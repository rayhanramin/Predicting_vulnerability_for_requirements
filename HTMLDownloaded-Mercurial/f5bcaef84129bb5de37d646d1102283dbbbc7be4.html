<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 16294:f5bcaef84129bb5de37d646d1102283dbbbc7be4</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ f5bcaef84129bb5de37d646d1102283dbbbc7be4" />
<meta property="og:url" content="/comm-central/rev/f5bcaef84129bb5de37d646d1102283dbbbc7be4" />
<meta property="og:description" content="Bug 1015779 - JS Remove whitespace in mail/ r=mconley" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / f5bcaef84129bb5de37d646d1102283dbbbc7be4 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/f5bcaef84129bb5de37d646d1102283dbbbc7be4">shortlog</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/f5bcaef84129bb5de37d646d1102283dbbbc7be4">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4">files</a> |
changeset |
<a href="/comm-central/raw-rev/f5bcaef84129bb5de37d646d1102283dbbbc7be4">raw</a>  | <a href="/comm-central/archive/f5bcaef84129bb5de37d646d1102283dbbbc7be4.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1015779">Bug 1015779</a> - JS Remove whitespace in mail/ r=mconley
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#115;&#105;&#97;&#104;&#32;&#66;&#114;&#117;&#110;&#101;&#114;&#32;&#60;&#106;&#111;&#115;&#105;&#97;&#104;&#64;&#112;&#114;&#111;&#103;&#114;&#97;&#109;&#109;&#101;&#114;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 25 May 2014 18:26:42 -0400</td></tr>

<tr>
 <td>changeset 16294</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/f5bcaef84129bb5de37d646d1102283dbbbc7be4">f5bcaef84129bb5de37d646d1102283dbbbc7be4</a></td>
</tr>



<tr>
<td>parent 16293</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9f37dabe70cb9afb8092351ac3e2beca499e9489">9f37dabe70cb9afb8092351ac3e2beca499e9489</a>
</td>
</tr>

<tr>
<td>child 16295</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7e23a0acc5e86e2f19560950dbcbd1c735f038fa">7e23a0acc5e86e2f19560950dbcbd1c735f038fa</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=f5bcaef84129bb5de37d646d1102283dbbbc7be4">10179</a></td></tr>
<tr><td>push user</td><td>josiah@programmer.net</td></tr>
<tr><td>push date</td><td class="date age">Fri, 06 Jun 2014 03:12:06 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@9477e9a40a03 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9477e9a40a038f4bf7d80a07ec5d3468bd4fe8d1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9477e9a40a038f4bf7d80a07ec5d3468bd4fe8d1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9477e9a40a038f4bf7d80a07ec5d3468bd4fe8d1&newProject=comm-central&newRevision=9f37dabe70cb9afb8092351ac3e2beca499e9489&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9477e9a40a038f4bf7d80a07ec5d3468bd4fe8d1&newProject=comm-central&newRevision=9f37dabe70cb9afb8092351ac3e2beca499e9489&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9477e9a40a038f4bf7d80a07ec5d3468bd4fe8d1&newProject=comm-central&newRevision=9f37dabe70cb9afb8092351ac3e2beca499e9489&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mconley%29&revcount=50">mconley</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1015779">1015779</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1015779">Bug 1015779</a> - JS Remove whitespace in mail/ r=mconley</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/app/profile/all-thunderbird.js">mail/app/profile/all-thunderbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/app/profile/all-thunderbird.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/app/profile/all-thunderbird.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/app/profile/all-thunderbird.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/app/profile/all-thunderbird.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/app/profile/all-thunderbird.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/ABSearchDialog.js">mail/base/content/ABSearchDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/ABSearchDialog.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/ABSearchDialog.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/ABSearchDialog.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/ABSearchDialog.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/ABSearchDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/FilterListDialog.js">mail/base/content/FilterListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/FilterListDialog.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/FilterListDialog.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/FilterListDialog.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/FilterListDialog.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/FilterListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/SearchDialog.js">mail/base/content/SearchDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/SearchDialog.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/SearchDialog.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/SearchDialog.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/SearchDialog.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/SearchDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/aboutDialog.js">mail/base/content/aboutDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/aboutDialog.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/aboutDialog.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/aboutDialog.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/aboutDialog.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/aboutDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/folderPane.js">mail/base/content/folderPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/folderPane.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/folderPane.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/folderPane.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/folderPane.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/folderPane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail-offline.js">mail/base/content/mail-offline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail-offline.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail-offline.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail-offline.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail-offline.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail-offline.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail3PaneWindowCommands.js">mail/base/content/mail3PaneWindowCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail3PaneWindowCommands.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail3PaneWindowCommands.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail3PaneWindowCommands.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail3PaneWindowCommands.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mail3PaneWindowCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailContextMenus.js">mail/base/content/mailContextMenus.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailContextMenus.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailContextMenus.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailContextMenus.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailContextMenus.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailContextMenus.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgViewNavigation.js">mail/base/content/msgViewNavigation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgViewNavigation.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgViewNavigation.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgViewNavigation.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgViewNavigation.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/msgViewNavigation.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/newTagDialog.js">mail/base/content/newTagDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/newTagDialog.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/newTagDialog.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/newTagDialog.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/newTagDialog.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/newTagDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/safeMode.js">mail/base/content/safeMode.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/safeMode.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/safeMode.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/safeMode.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/safeMode.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/safeMode.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/sanitize.js">mail/base/content/sanitize.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/sanitize.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/sanitize.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/sanitize.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/sanitize.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/sanitize.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/threadPane.js">mail/base/content/threadPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/threadPane.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/threadPane.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/threadPane.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/threadPane.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/threadPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/utilityOverlay.js">mail/base/content/utilityOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/utilityOverlay.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/utilityOverlay.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/utilityOverlay.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/utilityOverlay.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/content/utilityOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/modules/distribution.js">mail/base/modules/distribution.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/modules/distribution.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/modules/distribution.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/modules/distribution.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/modules/distribution.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/modules/distribution.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_mailGlue_distribution.js">mail/base/test/unit/test_mailGlue_distribution.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_mailGlue_distribution.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_mailGlue_distribution.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_mailGlue_distribution.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_mailGlue_distribution.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_mailGlue_distribution.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_viewWrapper_virtualFolder.js">mail/base/test/unit/test_viewWrapper_virtualFolder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_viewWrapper_virtualFolder.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_viewWrapper_virtualFolder.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_viewWrapper_virtualFolder.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_viewWrapper_virtualFolder.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_viewWrapper_virtualFolder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_windows_font_migration.js">mail/base/test/unit/test_windows_font_migration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_windows_font_migration.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_windows_font_migration.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_windows_font_migration.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_windows_font_migration.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/base/test/unit/test_windows_font_migration.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/crashes.js">mail/components/about-support/content/crashes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/crashes.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/crashes.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/crashes.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/crashes.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/crashes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/gfx.js">mail/components/about-support/content/gfx.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/gfx.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/gfx.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/gfx.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/gfx.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/gfx.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/init.js">mail/components/about-support/content/init.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/init.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/init.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/init.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/init.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/init.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/libversions.js">mail/components/about-support/content/libversions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/libversions.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/libversions.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/libversions.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/libversions.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/about-support/content/libversions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/modules/moveCopy.js">mail/components/activity/modules/moveCopy.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/modules/moveCopy.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/modules/moveCopy.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/modules/moveCopy.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/modules/moveCopy.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/modules/moveCopy.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivity.js">mail/components/activity/nsActivity.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivity.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivity.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivity.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivity.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivity.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivityManager.js">mail/components/activity/nsActivityManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivityManager.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivityManager.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivityManager.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivityManager.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/activity/nsActivityManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abCardOverlay.js">mail/components/addrbook/content/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abContactsPanel.js">mail/components/addrbook/content/abContactsPanel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abContactsPanel.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abContactsPanel.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abContactsPanel.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abContactsPanel.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/addrbook/content/abContactsPanel.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/appIdleManager.js">mail/components/appIdleManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/appIdleManager.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/appIdleManager.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/appIdleManager.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/appIdleManager.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/appIdleManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/cloudFileAccounts.js">mail/components/cloudfile/cloudFileAccounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/cloudFileAccounts.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/cloudFileAccounts.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/cloudFileAccounts.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/cloudFileAccounts.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/cloudFileAccounts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsBox.js">mail/components/cloudfile/nsBox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsBox.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsBox.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsBox.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsBox.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsBox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsHightail.js">mail/components/cloudfile/nsHightail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsHightail.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsHightail.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsHightail.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsHightail.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/cloudfile/nsHightail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/mailGlue.js">mail/components/mailGlue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/mailGlue.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/mailGlue.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/mailGlue.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/mailGlue.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/mailGlue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/newmailaccount/content/jquery.scrollTo.js">mail/components/newmailaccount/content/jquery.scrollTo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/newmailaccount/content/jquery.scrollTo.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/newmailaccount/content/jquery.scrollTo.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/newmailaccount/content/jquery.scrollTo.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/newmailaccount/content/jquery.scrollTo.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/newmailaccount/content/jquery.scrollTo.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/application.js">mail/components/phishing/application.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/application.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/application.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/application.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/application.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/application.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/globalstore.js">mail/components/phishing/globalstore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/globalstore.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/globalstore.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/globalstore.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/globalstore.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/globalstore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/list-warden.js">mail/components/phishing/list-warden.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/list-warden.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/list-warden.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/list-warden.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/list-warden.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/list-warden.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/phishing-warden.js">mail/components/phishing/phishing-warden.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/phishing-warden.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/phishing-warden.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/phishing-warden.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/phishing-warden.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/phishing/phishing-warden.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/advanced.js">mail/components/preferences/advanced.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/advanced.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/advanced.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/advanced.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/advanced.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/advanced.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/connection.js">mail/components/preferences/connection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/connection.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/connection.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/connection.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/connection.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/connection.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/downloads.js">mail/components/preferences/downloads.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/downloads.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/downloads.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/downloads.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/downloads.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/downloads.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/dsn.js">mail/components/preferences/dsn.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/dsn.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/dsn.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/dsn.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/dsn.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/dsn.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/sendoptions.js">mail/components/preferences/sendoptions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/sendoptions.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/sendoptions.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/sendoptions.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/sendoptions.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/preferences/sendoptions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/search/WinSearchIntegration.js">mail/components/search/WinSearchIntegration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/search/WinSearchIntegration.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/search/WinSearchIntegration.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/search/WinSearchIntegration.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/search/WinSearchIntegration.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/search/WinSearchIntegration.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/test/unit/test_about_support.js">mail/components/test/unit/test_about_support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/test/unit/test_about_support.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/test/unit/test_about_support.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/test/unit/test_about_support.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/test/unit/test_about_support.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/test/unit/test_about_support.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/wintaskbar/windowsJumpLists.js">mail/components/wintaskbar/windowsJumpLists.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/wintaskbar/windowsJumpLists.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/wintaskbar/windowsJumpLists.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/wintaskbar/windowsJumpLists.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/wintaskbar/windowsJumpLists.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/components/wintaskbar/windowsJumpLists.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewList.js">mail/extensions/mailviews/content/mailViewList.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewList.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewList.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewList.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewList.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewList.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewSetup.js">mail/extensions/mailviews/content/mailViewSetup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewSetup.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewSetup.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewSetup.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewSetup.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/mailviews/content/mailViewSetup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js">mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/jquery/jquery-1.6.4.min.js">mail/jquery/jquery-1.6.4.min.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/jquery/jquery-1.6.4.min.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/jquery/jquery-1.6.4.min.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/jquery/jquery-1.6.4.min.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/jquery/jquery-1.6.4.min.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/jquery/jquery-1.6.4.min.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/account/test-mail-account-setup-wizard.js">mail/test/mozmill/account/test-mail-account-setup-wizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/account/test-mail-account-setup-wizard.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/account/test-mail-account-setup-wizard.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/account/test-mail-account-setup-wizard.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/account/test-mail-account-setup-wizard.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/account/test-mail-account-setup-wizard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js">mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js">mail/test/mozmill/cloudfile/test-cloudfile-notifications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-forwarded-eml-actions.js">mail/test/mozmill/composition/test-forwarded-eml-actions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-forwarded-eml-actions.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-forwarded-eml-actions.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-forwarded-eml-actions.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-forwarded-eml-actions.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-forwarded-eml-actions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-newmsg-compose-identity.js">mail/test/mozmill/composition/test-newmsg-compose-identity.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-newmsg-compose-identity.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-newmsg-compose-identity.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-newmsg-compose-identity.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-newmsg-compose-identity.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-newmsg-compose-identity.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-reply-addresses.js">mail/test/mozmill/composition/test-reply-addresses.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-reply-addresses.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-reply-addresses.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-reply-addresses.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-reply-addresses.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/composition/test-reply-addresses.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/content-policy/test-view-source.js">mail/test/mozmill/content-policy/test-view-source.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/content-policy/test-view-source.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/content-policy/test-view-source.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/content-policy/test-view-source.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/content-policy/test-view-source.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/content-policy/test-view-source.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-pane-focus.js">mail/test/mozmill/folder-display/test-pane-focus.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-pane-focus.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-pane-focus.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-pane-focus.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-pane-focus.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-pane-focus.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-recent-menu.js">mail/test/mozmill/folder-display/test-recent-menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-recent-menu.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-recent-menu.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-recent-menu.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-recent-menu.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-display/test-recent-menu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js">mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/message-header/test-return-receipt.js">mail/test/mozmill/message-header/test-return-receipt.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/message-header/test-return-receipt.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/message-header/test-return-receipt.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/message-header/test-return-receipt.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/message-header/test-return-receipt.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/message-header/test-return-receipt.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/quick-filter-bar/test-display-issues.js">mail/test/mozmill/quick-filter-bar/test-display-issues.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/quick-filter-bar/test-display-issues.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/quick-filter-bar/test-display-issues.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/quick-filter-bar/test-display-issues.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/quick-filter-bar/test-display-issues.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/quick-filter-bar/test-display-issues.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">mail/test/mozmill/shared-modules/test-notificationbox-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-window-helpers.js">mail/test/mozmill/shared-modules/test-window-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-window-helpers.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-window-helpers.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-window-helpers.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-window-helpers.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/mozmill/shared-modules/test-window-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js">mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js">mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js">mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/chrome.js">mail/test/resources/mozmill/mozmill/extension/content/chrome.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/chrome.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/chrome.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/chrome.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/chrome.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/chrome.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/dx.js">mail/test/resources/mozmill/mozmill/extension/content/dx.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/dx.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/dx.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/dx.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/dx.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/dx.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js">mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/inspector.js">mail/test/resources/mozmill/mozmill/extension/content/inspector.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/inspector.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/inspector.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/inspector.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/inspector.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/inspector.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js">mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js">mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js">mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/menus.js">mail/test/resources/mozmill/mozmill/extension/content/menus.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/menus.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/menus.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/menus.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/menus.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/menus.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js">mail/test/resources/mozmill/mozmill/extension/content/mozmill.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/output.js">mail/test/resources/mozmill/mozmill/extension/content/output.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/output.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/output.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/output.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/output.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/output.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/rec.js">mail/test/resources/mozmill/mozmill/extension/content/rec.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/rec.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/rec.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/rec.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/rec.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/rec.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shell.js">mail/test/resources/mozmill/mozmill/extension/content/shell.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shell.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shell.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shell.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shell.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shell.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js">mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/ui.js">mail/test/resources/mozmill/mozmill/extension/content/ui.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/ui.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/ui.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/ui.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/ui.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/content/ui.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js">mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/commonjs/modules1/moda.js">mail/test/resources/mozmill/test/commonjs/modules1/moda.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/commonjs/modules1/moda.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/commonjs/modules1/moda.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/commonjs/modules1/moda.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/commonjs/modules1/moda.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/commonjs/modules1/moda.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testDragLink.js">mail/test/resources/mozmill/test/dnd/testDragLink.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testDragLink.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testDragLink.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testDragLink.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testDragLink.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testDragLink.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testTabView.js">mail/test/resources/mozmill/test/dnd/testTabView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testTabView.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testTabView.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testTabView.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testTabView.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testTabView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testxul.js">mail/test/resources/mozmill/test/dnd/testxul.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testxul.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testxul.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testxul.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testxul.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/dnd/testxul.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/elementLib-UnitTest.js">mail/test/resources/mozmill/test/elementLib-UnitTest.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/elementLib-UnitTest.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/elementLib-UnitTest.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/elementLib-UnitTest.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/elementLib-UnitTest.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/elementLib-UnitTest.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/restart/test_browser/testPost.js">mail/test/resources/mozmill/test/restart/test_browser/testPost.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/restart/test_browser/testPost.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/restart/test_browser/testPost.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/restart/test_browser/testPost.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/restart/test_browser/testPost.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/restart/test_browser/testPost.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_assert.js">mail/test/resources/mozmill/test/test_assert.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_assert.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_assert.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_assert.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_assert.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_assert.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_diggIterator.js">mail/test/resources/mozmill/test/test_diggIterator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_diggIterator.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_diggIterator.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_diggIterator.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_diggIterator.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_diggIterator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_googleIterator.js">mail/test/resources/mozmill/test/test_googleIterator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_googleIterator.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_googleIterator.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_googleIterator.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_googleIterator.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_googleIterator.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_radio.js">mail/test/resources/mozmill/test/test_radio.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_radio.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_radio.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_radio.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_radio.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_radio.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_setupmodulereporting.js">mail/test/resources/mozmill/test/test_setupmodulereporting.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_setupmodulereporting.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_setupmodulereporting.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_setupmodulereporting.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_setupmodulereporting.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_setupmodulereporting.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_something/test_parents.js">mail/test/resources/mozmill/test/test_something/test_parents.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_something/test_parents.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_something/test_parents.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_something/test_parents.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_something/test_parents.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_something/test_parents.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_staleelement.js">mail/test/resources/mozmill/test/test_staleelement.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_staleelement.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_staleelement.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_staleelement.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_staleelement.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_staleelement.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_waitForPageLoad.js">mail/test/resources/mozmill/test/test_waitForPageLoad.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_waitForPageLoad.js">file</a> |
<a href="/comm-central/annotate/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_waitForPageLoad.js">annotate</a> |
<a href="/comm-central/diff/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_waitForPageLoad.js">diff</a> |
<a href="/comm-central/comparison/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_waitForPageLoad.js">comparison</a> |
<a href="/comm-central/log/f5bcaef84129bb5de37d646d1102283dbbbc7be4/mail/test/resources/mozmill/test/test_waitForPageLoad.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -90,20 +90,20 @@ pref(&quot;app.update.certs.2.commonName&quot;, &quot;a</span>
<a href="#l1.4"></a><span id="l1.4"> pref(&quot;app.update.certs.1.issuerName&quot;, &quot;CN=Thawte SSL CA,O=\&quot;Thawte, Inc.\&quot;,C=US&quot;);</span>
<a href="#l1.5"></a><span id="l1.5"> pref(&quot;app.update.certs.1.commonName&quot;, &quot;aus3.mozilla.org&quot;);</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> pref(&quot;app.update.certs.2.issuerName&quot;, &quot;CN=DigiCert Secure Server CA,O=DigiCert Inc,C=US&quot;);</span>
<a href="#l1.8"></a><span id="l1.8"> pref(&quot;app.update.certs.2.commonName&quot;, &quot;aus3.mozilla.org&quot;);</span>
<a href="#l1.9"></a><span id="l1.9"> #endif</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> // Whether or not app updates are enabled</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-pref(&quot;app.update.enabled&quot;, true);               </span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+pref(&quot;app.update.enabled&quot;, true);</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> // This preference turns on app.update.mode and allows automatic download and</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-// install to take place. We use a separate boolean toggle for this to make     </span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+// install to take place. We use a separate boolean toggle for this to make</span>
<a href="#l1.18"></a><span id="l1.18"> // the UI easier to construct.</span>
<a href="#l1.19"></a><span id="l1.19"> pref(&quot;app.update.auto&quot;, true);</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21"> // Defines how the Application Update Service notifies the user about updates:</span>
<a href="#l1.22"></a><span id="l1.22"> //</span>
<a href="#l1.23"></a><span id="l1.23"> // AUM Set to:        Minor Releases:     Major Releases:</span>
<a href="#l1.24"></a><span id="l1.24"> // 0                  download no prompt  download no prompt</span>
<a href="#l1.25"></a><span id="l1.25"> // 1                  download no prompt  download no prompt if no incompatibilities</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineat">@@ -126,28 +126,28 @@ pref(&quot;app.update.url&quot;, &quot;https://aus4.moz</span>
<a href="#l1.27"></a><span id="l1.27"> #else</span>
<a href="#l1.28"></a><span id="l1.28"> pref(&quot;app.update.url&quot;, &quot;https://aus3.mozilla.org/update/3/%PRODUCT%/%VERSION%/%BUILD_ID%/%BUILD_TARGET%/%LOCALE%/%CHANNEL%/%OS_VERSION%/%DISTRIBUTION%/%DISTRIBUTION_VERSION%/update.xml&quot;);</span>
<a href="#l1.29"></a><span id="l1.29"> #endif</span>
<a href="#l1.30"></a><span id="l1.30"> </span>
<a href="#l1.31"></a><span id="l1.31"> // URL user can browse to manually if for some reason all update installation</span>
<a href="#l1.32"></a><span id="l1.32"> // attempts fail.</span>
<a href="#l1.33"></a><span id="l1.33"> pref(&quot;app.update.url.manual&quot;, &quot;http://www.getthunderbird.com&quot;);</span>
<a href="#l1.34"></a><span id="l1.34"> // A default value for the &quot;More information about this update&quot; link</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-// supplied in the &quot;An update is available&quot; page of the update wizard. </span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+// supplied in the &quot;An update is available&quot; page of the update wizard.</span>
<a href="#l1.37"></a><span id="l1.37"> pref(&quot;app.update.url.details&quot;, &quot;http://www.mozilla.org/%LOCALE%/%APP%/releases/&quot;);</span>
<a href="#l1.38"></a><span id="l1.38"> // User-settable override to app.update.url for testing purposes.</span>
<a href="#l1.39"></a><span id="l1.39"> //pref(&quot;app.update.url.override&quot;, &quot;&quot;);</span>
<a href="#l1.40"></a><span id="l1.40"> </span>
<a href="#l1.41"></a><span id="l1.41"> // app.update.promptWaitTime is in branding section</span>
<a href="#l1.42"></a><span id="l1.42"> </span>
<a href="#l1.43"></a><span id="l1.43"> // Show the Update Checking/Ready UI when the user was idle for x seconds</span>
<a href="#l1.44"></a><span id="l1.44"> pref(&quot;app.update.idletime&quot;, 60);</span>
<a href="#l1.45"></a><span id="l1.45"> </span>
<a href="#l1.46"></a><span id="l1.46"> // Whether or not we show a dialog box informing the user that the update was</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">-// successfully applied. This is off in Firefox by default since we show a </span>
<a href="#l1.48"></a><span id="l1.48" class="difflineplus">+// successfully applied. This is off in Firefox by default since we show a</span>
<a href="#l1.49"></a><span id="l1.49"> // upgrade start page instead! Other apps may wish to show this UI, and supply</span>
<a href="#l1.50"></a><span id="l1.50"> // a whatsNewURL field in their brand.properties that contains a link to a page</span>
<a href="#l1.51"></a><span id="l1.51"> // which tells users what's new in this new update.</span>
<a href="#l1.52"></a><span id="l1.52"> pref(&quot;app.update.showInstalledUI&quot;, false);</span>
<a href="#l1.53"></a><span id="l1.53"> </span>
<a href="#l1.54"></a><span id="l1.54"> // Whether or not to attempt using the service for updates.</span>
<a href="#l1.55"></a><span id="l1.55"> #ifdef MOZ_MAINTENANCE_SERVICE</span>
<a href="#l1.56"></a><span id="l1.56"> pref(&quot;app.update.service.enabled&quot;, true);</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineat">@@ -187,33 +187,33 @@ pref(&quot;extensions.webservice.discoverURL&quot;</span>
<a href="#l1.58"></a><span id="l1.58"> </span>
<a href="#l1.59"></a><span id="l1.59"> // Blocklist preferences</span>
<a href="#l1.60"></a><span id="l1.60"> pref(&quot;extensions.blocklist.enabled&quot;, true);</span>
<a href="#l1.61"></a><span id="l1.61"> pref(&quot;extensions.blocklist.interval&quot;, 86400);</span>
<a href="#l1.62"></a><span id="l1.62"> pref(&quot;extensions.blocklist.url&quot;, &quot;https://addons.mozilla.org/blocklist/3/%APP_ID%/%APP_VERSION%/%PRODUCT%/%BUILD_ID%/%BUILD_TARGET%/%LOCALE%/%CHANNEL%/%OS_VERSION%/%DISTRIBUTION%/%DISTRIBUTION_VERSION%/%PING_COUNT%/%TOTAL_PING_COUNT%/%DAYS_SINCE_LAST_PING%/&quot;);</span>
<a href="#l1.63"></a><span id="l1.63"> pref(&quot;extensions.blocklist.detailsURL&quot;, &quot;https://addons.mozilla.org/%LOCALE%/%APP%/blocked/&quot;);</span>
<a href="#l1.64"></a><span id="l1.64"> pref(&quot;extensions.blocklist.itemURL&quot;, &quot;https://addons.mozilla.org/%LOCALE%/%APP%/blocked/%blockID%&quot;);</span>
<a href="#l1.65"></a><span id="l1.65"> </span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-// Enables some extra Extension System Logging (can reduce performance) </span>
<a href="#l1.67"></a><span id="l1.67" class="difflineminus">-pref(&quot;extensions.logging.enabled&quot;, false); </span>
<a href="#l1.68"></a><span id="l1.68" class="difflineplus">+// Enables some extra Extension System Logging (can reduce performance)</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineplus">+pref(&quot;extensions.logging.enabled&quot;, false);</span>
<a href="#l1.70"></a><span id="l1.70"> </span>
<a href="#l1.71"></a><span id="l1.71"> // Symmetric (can be overridden by individual extensions) update preferences.</span>
<a href="#l1.72"></a><span id="l1.72"> // e.g.</span>
<a href="#l1.73"></a><span id="l1.73"> //  extensions.{GUID}.update.enabled</span>
<a href="#l1.74"></a><span id="l1.74"> //  extensions.{GUID}.update.url</span>
<a href="#l1.75"></a><span id="l1.75"> //  extensions.{GUID}.update.interval</span>
<a href="#l1.76"></a><span id="l1.76"> //  .. etc ..</span>
<a href="#l1.77"></a><span id="l1.77"> //</span>
<a href="#l1.78"></a><span id="l1.78"> pref(&quot;extensions.update.enabled&quot;, true);</span>
<a href="#l1.79"></a><span id="l1.79"> pref(&quot;extensions.update.url&quot;, &quot;https://versioncheck.addons.mozilla.org/update/VersionCheck.php?reqVersion=%REQ_VERSION%&amp;id=%ITEM_ID%&amp;version=%ITEM_VERSION%&amp;maxAppVersion=%ITEM_MAXAPPVERSION%&amp;status=%ITEM_STATUS%&amp;appID=%APP_ID%&amp;appVersion=%APP_VERSION%&amp;appOS=%APP_OS%&amp;appABI=%APP_ABI%&amp;locale=%APP_LOCALE%&amp;currentAppVersion=%CURRENT_APP_VERSION%&amp;updateType=%UPDATE_TYPE%&amp;compatMode=%COMPATIBILITY_MODE%&quot;);</span>
<a href="#l1.80"></a><span id="l1.80"> </span>
<a href="#l1.81"></a><span id="l1.81" class="difflineminus">-pref(&quot;extensions.update.interval&quot;, 86400);  // Check for updates to Extensions and </span>
<a href="#l1.82"></a><span id="l1.82" class="difflineplus">+pref(&quot;extensions.update.interval&quot;, 86400);  // Check for updates to Extensions and</span>
<a href="#l1.83"></a><span id="l1.83">                                             // Themes every day</span>
<a href="#l1.84"></a><span id="l1.84"> </span>
<a href="#l1.85"></a><span id="l1.85" class="difflineminus">-pref(&quot;extensions.dss.enabled&quot;, false);          // Dynamic Skin Switching                                               </span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+pref(&quot;extensions.dss.enabled&quot;, false);          // Dynamic Skin Switching</span>
<a href="#l1.87"></a><span id="l1.87"> pref(&quot;extensions.dss.switchPending&quot;, false);    // Non-dynamic switch pending after next</span>
<a href="#l1.88"></a><span id="l1.88"> </span>
<a href="#l1.89"></a><span id="l1.89"> pref(&quot;extensions.{972ce4c6-7e08-4474-a285-3208198ce6fd}.name&quot;, &quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l1.90"></a><span id="l1.90"> pref(&quot;extensions.{972ce4c6-7e08-4474-a285-3208198ce6fd}.description&quot;, &quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l1.91"></a><span id="l1.91"> </span>
<a href="#l1.92"></a><span id="l1.92"> pref(&quot;lightweightThemes.update.enabled&quot;, true);</span>
<a href="#l1.93"></a><span id="l1.93"> </span>
<a href="#l1.94"></a><span id="l1.94"> pref(&quot;xpinstall.whitelist.add&quot;, &quot;addons.mozilla.org&quot;);</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineat">@@ -309,17 +309,17 @@ pref(&quot;editor.throbber.url&quot;, &quot;&quot;);</span>
<a href="#l1.96"></a><span id="l1.96"> // 0=as attachment 2=default forward as inline with attachments</span>
<a href="#l1.97"></a><span id="l1.97"> pref(&quot;mail.forward_message_mode&quot;, 2);</span>
<a href="#l1.98"></a><span id="l1.98"> </span>
<a href="#l1.99"></a><span id="l1.99"> // 0=ask, 1=plain, 2=html, 3=both</span>
<a href="#l1.100"></a><span id="l1.100"> pref(&quot;mail.default_html_action&quot;, 3);</span>
<a href="#l1.101"></a><span id="l1.101"> </span>
<a href="#l1.102"></a><span id="l1.102"> /////////////////////////////////////////////////////////////////</span>
<a href="#l1.103"></a><span id="l1.103"> // End core mailnews.js pref overrides</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">-///////////////////////////////////////////////////////////////// </span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+/////////////////////////////////////////////////////////////////</span>
<a href="#l1.106"></a><span id="l1.106"> </span>
<a href="#l1.107"></a><span id="l1.107"> /////////////////////////////////////////////////////////////////</span>
<a href="#l1.108"></a><span id="l1.108"> // Overrides for generic app behavior from the core all.js</span>
<a href="#l1.109"></a><span id="l1.109"> /////////////////////////////////////////////////////////////////</span>
<a href="#l1.110"></a><span id="l1.110"> </span>
<a href="#l1.111"></a><span id="l1.111"> pref(&quot;browser.hiddenWindowChromeURL&quot;, &quot;chrome://messenger/content/hiddenWindow.xul&quot;);</span>
<a href="#l1.112"></a><span id="l1.112"> </span>
<a href="#l1.113"></a><span id="l1.113"> pref(&quot;offline.startup_state&quot;,            2);</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineat">@@ -331,19 +331,19 @@ pref(&quot;offline.send.unsent_messages&quot;,    </span>
<a href="#l1.115"></a><span id="l1.115"> // 0 Ask before synchronizing the offline mail store when going offline</span>
<a href="#l1.116"></a><span id="l1.116"> // 1 Always synchronize the offline store when going offline</span>
<a href="#l1.117"></a><span id="l1.117"> // 2 Never synchronize the offline store when going offline</span>
<a href="#l1.118"></a><span id="l1.118"> pref(&quot;offline.download.download_messages&quot;,  0);</span>
<a href="#l1.119"></a><span id="l1.119"> </span>
<a href="#l1.120"></a><span id="l1.120"> #ifdef UNIX_BUT_NOT_MAC</span>
<a href="#l1.121"></a><span id="l1.121"> pref(&quot;offline.autoDetect&quot;, false);</span>
<a href="#l1.122"></a><span id="l1.122"> #else</span>
<a href="#l1.123"></a><span id="l1.123" class="difflineminus">-// Windows and Mac can automatically move the user offline or online based on </span>
<a href="#l1.124"></a><span id="l1.124" class="difflineplus">+// Windows and Mac can automatically move the user offline or online based on</span>
<a href="#l1.125"></a><span id="l1.125"> // the network connection.</span>
<a href="#l1.126"></a><span id="l1.126" class="difflineminus">-pref(&quot;offline.autoDetect&quot;, true); </span>
<a href="#l1.127"></a><span id="l1.127" class="difflineplus">+pref(&quot;offline.autoDetect&quot;, true);</span>
<a href="#l1.128"></a><span id="l1.128"> #endif</span>
<a href="#l1.129"></a><span id="l1.129"> </span>
<a href="#l1.130"></a><span id="l1.130"> // Expose only select protocol handlers. All others should go</span>
<a href="#l1.131"></a><span id="l1.131"> // through the external protocol handler route.</span>
<a href="#l1.132"></a><span id="l1.132"> // If you are changing this list, you may need to also consider changing the</span>
<a href="#l1.133"></a><span id="l1.133"> // list in nsMsgContentPolicy::IsExposedProtocol.</span>
<a href="#l1.134"></a><span id="l1.134"> pref(&quot;network.protocol-handler.expose-all&quot;, false);</span>
<a href="#l1.135"></a><span id="l1.135"> pref(&quot;network.protocol-handler.expose.mailto&quot;, true);</span>
<a href="#l1.136"></a><span id="l1.136" class="difflineat">@@ -379,20 +379,20 @@ pref(&quot;browser.display.auto_quality_min_f</span>
<a href="#l1.137"></a><span id="l1.137"> </span>
<a href="#l1.138"></a><span id="l1.138"> pref(&quot;view_source.syntax_highlight&quot;, false);</span>
<a href="#l1.139"></a><span id="l1.139"> </span>
<a href="#l1.140"></a><span id="l1.140"> pref(&quot;toolkit.telemetry.infoURL&quot;, &quot;http://www.mozilla.org/thunderbird/legal/privacy/#telemetry&quot;);</span>
<a href="#l1.141"></a><span id="l1.141"> </span>
<a href="#l1.142"></a><span id="l1.142"> pref(&quot;mousewheel.withcontrolkey.action&quot;, 3);</span>
<a href="#l1.143"></a><span id="l1.143"> /////////////////////////////////////////////////////////////////</span>
<a href="#l1.144"></a><span id="l1.144"> // End core all.js pref overrides</span>
<a href="#l1.145"></a><span id="l1.145" class="difflineminus">-///////////////////////////////////////////////////////////////// </span>
<a href="#l1.146"></a><span id="l1.146" class="difflineplus">+/////////////////////////////////////////////////////////////////</span>
<a href="#l1.147"></a><span id="l1.147"> </span>
<a href="#l1.148"></a><span id="l1.148"> /////////////////////////////////////////////////////////////////</span>
<a href="#l1.149"></a><span id="l1.149" class="difflineminus">-// Generic browser related prefs. </span>
<a href="#l1.150"></a><span id="l1.150" class="difflineplus">+// Generic browser related prefs.</span>
<a href="#l1.151"></a><span id="l1.151"> /////////////////////////////////////////////////////////////////</span>
<a href="#l1.152"></a><span id="l1.152"> pref(&quot;browser.send_pings&quot;, false);</span>
<a href="#l1.153"></a><span id="l1.153"> pref(&quot;browser.chrome.toolbar_tips&quot;,         true);</span>
<a href="#l1.154"></a><span id="l1.154"> pref(&quot;browser.xul.error_pages.enabled&quot;, true);</span>
<a href="#l1.155"></a><span id="l1.155"> pref(&quot;browser.xul.error_pages.expert_bad_cert&quot;, false);</span>
<a href="#l1.156"></a><span id="l1.156"> </span>
<a href="#l1.157"></a><span id="l1.157"> // Attachment download manager settings</span>
<a href="#l1.158"></a><span id="l1.158"> pref(&quot;mail.attachment.store.version&quot;, 0);</span>
<a href="#l1.159"></a><span id="l1.159" class="difflineat">@@ -408,29 +408,29 @@ pref(&quot;browser.download.manager.focusWhen</span>
<a href="#l1.160"></a><span id="l1.160"> pref(&quot;browser.download.manager.flashCount&quot;, 0);</span>
<a href="#l1.161"></a><span id="l1.161"> pref(&quot;browser.download.manager.addToRecentDocs&quot;, true);</span>
<a href="#l1.162"></a><span id="l1.162"> </span>
<a href="#l1.163"></a><span id="l1.163"> pref(&quot;spellchecker.dictionary&quot;, &quot;&quot;);</span>
<a href="#l1.164"></a><span id="l1.164"> // Dictionary download preference</span>
<a href="#l1.165"></a><span id="l1.165"> pref(&quot;spellchecker.dictionaries.download.url&quot;, &quot;https://addons.mozilla.org/%LOCALE%/%APP%/dictionaries/&quot;);</span>
<a href="#l1.166"></a><span id="l1.166"> </span>
<a href="#l1.167"></a><span id="l1.167"> // profile.force.migration can be used to bypass the migration wizard, forcing migration from a particular</span>
<a href="#l1.168"></a><span id="l1.168" class="difflineminus">-// mail application without any user intervention. Possible values are: </span>
<a href="#l1.169"></a><span id="l1.169" class="difflineplus">+// mail application without any user intervention. Possible values are:</span>
<a href="#l1.170"></a><span id="l1.170"> // seamonkey (mozilla suite), eudora, oexpress, outlook.</span>
<a href="#l1.171"></a><span id="l1.171"> pref(&quot;profile.force.migration&quot;, &quot;&quot;);</span>
<a href="#l1.172"></a><span id="l1.172"> </span>
<a href="#l1.173"></a><span id="l1.173"> // prefs to control the mail alert notification</span>
<a href="#l1.174"></a><span id="l1.174"> pref(&quot;alerts.slideIncrementTime&quot;, 50);</span>
<a href="#l1.175"></a><span id="l1.175"> pref(&quot;alerts.totalOpenTime&quot;, 10000);</span>
<a href="#l1.176"></a><span id="l1.176"> </span>
<a href="#l1.177"></a><span id="l1.177"> // analyze urls in mail messages for scams</span>
<a href="#l1.178"></a><span id="l1.178"> pref(&quot;mail.phishing.detection.enabled&quot;, true);</span>
<a href="#l1.179"></a><span id="l1.179"> // If phishing detection is enabled, allow fine grained control</span>
<a href="#l1.180"></a><span id="l1.180"> // of the local, static tests</span>
<a href="#l1.181"></a><span id="l1.181" class="difflineminus">-pref(&quot;mail.phishing.detection.ipaddresses&quot;, true); </span>
<a href="#l1.182"></a><span id="l1.182" class="difflineplus">+pref(&quot;mail.phishing.detection.ipaddresses&quot;, true);</span>
<a href="#l1.183"></a><span id="l1.183"> pref(&quot;mail.phishing.detection.mismatched_hosts&quot;, true);</span>
<a href="#l1.184"></a><span id="l1.184"> </span>
<a href="#l1.185"></a><span id="l1.185"> pref(&quot;browser.safebrowsing.enabled&quot;, false);</span>
<a href="#l1.186"></a><span id="l1.186"> </span>
<a href="#l1.187"></a><span id="l1.187"> // Non-enhanced mode (local url lists) URL list to check for updates</span>
<a href="#l1.188"></a><span id="l1.188"> pref(&quot;browser.safebrowsing.provider.0.updateURL&quot;, &quot;&quot;);</span>
<a href="#l1.189"></a><span id="l1.189"> pref(&quot;browser.safebrowsing.dataProvider&quot;, 0);</span>
<a href="#l1.190"></a><span id="l1.190"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/ABSearchDialog.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/ABSearchDialog.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -92,30 +92,30 @@ function initializeSearchWindowWidgets()</span>
<a href="#l2.4"></a><span id="l2.4">   gComposeCmd = document.getElementById(&quot;cmd_compose&quot;);</span>
<a href="#l2.5"></a><span id="l2.5">   gDeleteCmd = document.getElementById(&quot;cmd_deleteCard&quot;);</span>
<a href="#l2.6"></a><span id="l2.6">   gStatusText = document.getElementById('statusText');</span>
<a href="#l2.7"></a><span id="l2.7">   disableCommands();</span>
<a href="#l2.8"></a><span id="l2.8">   // matchAll doesn't make sense for address book search</span>
<a href="#l2.9"></a><span id="l2.9">   hideMatchAllItem();</span>
<a href="#l2.10"></a><span id="l2.10"> }</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-function onSearchStop() </span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+function onSearchStop()</span>
<a href="#l2.14"></a><span id="l2.14"> {</span>
<a href="#l2.15"></a><span id="l2.15"> }</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17"> function onAbSearchReset(event)</span>
<a href="#l2.18"></a><span id="l2.18"> {</span>
<a href="#l2.19"></a><span id="l2.19">   disableCommands();</span>
<a href="#l2.20"></a><span id="l2.20">   CloseAbView();</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22">   onReset(event);</span>
<a href="#l2.23"></a><span id="l2.23">   gStatusText.setAttribute(&quot;label&quot;, &quot;&quot;);</span>
<a href="#l2.24"></a><span id="l2.24"> }</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-function SelectDirectory(aURI) </span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+function SelectDirectory(aURI)</span>
<a href="#l2.28"></a><span id="l2.28"> {</span>
<a href="#l2.29"></a><span id="l2.29">   var selectedAB = aURI;</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31">   if (!selectedAB)</span>
<a href="#l2.32"></a><span id="l2.32">     selectedAB = kPersonalAddressbookURI;</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34">   // set popup with address book names</span>
<a href="#l2.35"></a><span id="l2.35">   var abPopup = document.getElementById('abPopup');</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineat">@@ -128,63 +128,63 @@ function SelectDirectory(aURI)</span>
<a href="#l2.37"></a><span id="l2.37"> function GetScopeForDirectoryURI(aURI)</span>
<a href="#l2.38"></a><span id="l2.38"> {</span>
<a href="#l2.39"></a><span id="l2.39">   var directory = MailServices.ab.getDirectory(aURI);</span>
<a href="#l2.40"></a><span id="l2.40">   var booleanAnd = gSearchBooleanRadiogroup.selectedItem.value == &quot;and&quot;;</span>
<a href="#l2.41"></a><span id="l2.41"> </span>
<a href="#l2.42"></a><span id="l2.42">   if (directory.isRemote) {</span>
<a href="#l2.43"></a><span id="l2.43">     if (booleanAnd)</span>
<a href="#l2.44"></a><span id="l2.44">       return nsMsgSearchScope.LDAPAnd;</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineminus">-    else </span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+    else</span>
<a href="#l2.47"></a><span id="l2.47">       return nsMsgSearchScope.LDAP;</span>
<a href="#l2.48"></a><span id="l2.48">   }</span>
<a href="#l2.49"></a><span id="l2.49">   else {</span>
<a href="#l2.50"></a><span id="l2.50">     if (booleanAnd)</span>
<a href="#l2.51"></a><span id="l2.51">       return nsMsgSearchScope.LocalABAnd;</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-    else </span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+    else</span>
<a href="#l2.54"></a><span id="l2.54">       return nsMsgSearchScope.LocalAB;</span>
<a href="#l2.55"></a><span id="l2.55">   }</span>
<a href="#l2.56"></a><span id="l2.56"> }</span>
<a href="#l2.57"></a><span id="l2.57"> </span>
<a href="#l2.58"></a><span id="l2.58"> function onEnterInSearchTerm()</span>
<a href="#l2.59"></a><span id="l2.59"> {</span>
<a href="#l2.60"></a><span id="l2.60">   // on enter</span>
<a href="#l2.61"></a><span id="l2.61">   // if not searching, start the search</span>
<a href="#l2.62"></a><span id="l2.62">   // if searching, stop and then start again</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-  if (gSearchStopButton.getAttribute(&quot;label&quot;) == gSearchBundle.getString(&quot;labelForSearchButton&quot;)) { </span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-     onSearch(); </span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+  if (gSearchStopButton.getAttribute(&quot;label&quot;) == gSearchBundle.getString(&quot;labelForSearchButton&quot;)) {</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+     onSearch();</span>
<a href="#l2.67"></a><span id="l2.67">   }</span>
<a href="#l2.68"></a><span id="l2.68">   else {</span>
<a href="#l2.69"></a><span id="l2.69">      onSearchStop();</span>
<a href="#l2.70"></a><span id="l2.70">      onSearch();</span>
<a href="#l2.71"></a><span id="l2.71">   }</span>
<a href="#l2.72"></a><span id="l2.72"> }</span>
<a href="#l2.73"></a><span id="l2.73"> </span>
<a href="#l2.74"></a><span id="l2.74"> function onSearch()</span>
<a href="#l2.75"></a><span id="l2.75"> {</span>
<a href="#l2.76"></a><span id="l2.76">     gStatusText.setAttribute(&quot;label&quot;, &quot;&quot;);</span>
<a href="#l2.77"></a><span id="l2.77">     disableCommands();</span>
<a href="#l2.78"></a><span id="l2.78"> </span>
<a href="#l2.79"></a><span id="l2.79">     gSearchSession.clearScopes();</span>
<a href="#l2.80"></a><span id="l2.80"> </span>
<a href="#l2.81"></a><span id="l2.81">     var currentAbURI = document.getElementById('abPopup').getAttribute('value');</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineminus">- </span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+</span>
<a href="#l2.84"></a><span id="l2.84">     gSearchSession.addDirectoryScopeTerm(GetScopeForDirectoryURI(currentAbURI));</span>
<a href="#l2.85"></a><span id="l2.85">     saveSearchTerms(gSearchSession.searchTerms, gSearchSession);</span>
<a href="#l2.86"></a><span id="l2.86"> </span>
<a href="#l2.87"></a><span id="l2.87">     var searchUri = currentAbURI + &quot;?(&quot;;</span>
<a href="#l2.88"></a><span id="l2.88"> </span>
<a href="#l2.89"></a><span id="l2.89">     var count = gSearchSession.searchTerms.Count();</span>
<a href="#l2.90"></a><span id="l2.90"> </span>
<a href="#l2.91"></a><span id="l2.91">     for (var i=0; i&lt;count; i++) {</span>
<a href="#l2.92"></a><span id="l2.92">       var searchTerm = gSearchSession.searchTerms.GetElementAt(i).QueryInterface(nsIMsgSearchTerm);</span>
<a href="#l2.93"></a><span id="l2.93"> </span>
<a href="#l2.94"></a><span id="l2.94">       // get the &quot;and&quot; / &quot;or&quot; value from the first term</span>
<a href="#l2.95"></a><span id="l2.95">       if (i == 0) {</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-       if (searchTerm.booleanAnd) </span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+       if (searchTerm.booleanAnd)</span>
<a href="#l2.98"></a><span id="l2.98">          searchUri += &quot;and&quot;;</span>
<a href="#l2.99"></a><span id="l2.99">        else</span>
<a href="#l2.100"></a><span id="l2.100">          searchUri += &quot;or&quot;;</span>
<a href="#l2.101"></a><span id="l2.101">       }</span>
<a href="#l2.102"></a><span id="l2.102"> </span>
<a href="#l2.103"></a><span id="l2.103">       var attrs;</span>
<a href="#l2.104"></a><span id="l2.104"> </span>
<a href="#l2.105"></a><span id="l2.105">       switch (searchTerm.attrib) {</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineat">@@ -196,17 +196,17 @@ function onSearch()</span>
<a href="#l2.107"></a><span id="l2.107">          break;</span>
<a href="#l2.108"></a><span id="l2.108">        case nsMsgSearchAttrib.DisplayName:</span>
<a href="#l2.109"></a><span id="l2.109">          attrs = [&quot;DisplayName&quot;];</span>
<a href="#l2.110"></a><span id="l2.110">          break;</span>
<a href="#l2.111"></a><span id="l2.111">        case nsMsgSearchAttrib.Email:</span>
<a href="#l2.112"></a><span id="l2.112">          attrs = [&quot;PrimaryEmail&quot;];</span>
<a href="#l2.113"></a><span id="l2.113">          break;</span>
<a href="#l2.114"></a><span id="l2.114">        case nsMsgSearchAttrib.PhoneNumber:</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineminus">-         attrs = [&quot;HomePhone&quot;,&quot;WorkPhone&quot;,&quot;FaxNumber&quot;,&quot;PagerNumber&quot;,&quot;CellularNumber&quot;]; </span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+         attrs = [&quot;HomePhone&quot;,&quot;WorkPhone&quot;,&quot;FaxNumber&quot;,&quot;PagerNumber&quot;,&quot;CellularNumber&quot;];</span>
<a href="#l2.117"></a><span id="l2.117">          break;</span>
<a href="#l2.118"></a><span id="l2.118">        case nsMsgSearchAttrib.Organization:</span>
<a href="#l2.119"></a><span id="l2.119">          attrs = [&quot;Company&quot;];</span>
<a href="#l2.120"></a><span id="l2.120">          break;</span>
<a href="#l2.121"></a><span id="l2.121">        case nsMsgSearchAttrib.Department:</span>
<a href="#l2.122"></a><span id="l2.122">          attrs = [&quot;Department&quot;];</span>
<a href="#l2.123"></a><span id="l2.123">          break;</span>
<a href="#l2.124"></a><span id="l2.124">        case nsMsgSearchAttrib.City:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/FilterListDialog.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/FilterListDialog.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -161,17 +161,17 @@ function refresh(aArguments)</span>
<a href="#l3.4"></a><span id="l3.4">   // As we really don't know what has changed, clear the search box</span>
<a href="#l3.5"></a><span id="l3.5">   // undonditionally so that the changed/added filters are surely visible.</span>
<a href="#l3.6"></a><span id="l3.6">   resetSearchBox();</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">   processWindowArguments(aArguments);</span>
<a href="#l3.9"></a><span id="l3.9"> }</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11"> /**</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">- * Called when a user selects a folder in the list, so we can update the </span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+ * Called when a user selects a folder in the list, so we can update the</span>
<a href="#l3.14"></a><span id="l3.14">  * filters that are displayed</span>
<a href="#l3.15"></a><span id="l3.15">  * note the function name 'onFilterFolderClick' is misleading, it would be</span>
<a href="#l3.16"></a><span id="l3.16">  * better named 'onServerSelect' =&gt; file follow up bug later.</span>
<a href="#l3.17"></a><span id="l3.17">  *</span>
<a href="#l3.18"></a><span id="l3.18">  * @param aFolder  the nsIMsgFolder that was selected</span>
<a href="#l3.19"></a><span id="l3.19">  */</span>
<a href="#l3.20"></a><span id="l3.20"> function onFilterFolderClick(aFolder)</span>
<a href="#l3.21"></a><span id="l3.21"> {</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -398,17 +398,17 @@ function onDown(event) {</span>
<a href="#l3.23"></a><span id="l3.23"> /**</span>
<a href="#l3.24"></a><span id="l3.24">  * Move filter to top for long filter lists.</span>
<a href="#l3.25"></a><span id="l3.25">  */</span>
<a href="#l3.26"></a><span id="l3.26"> function onBottom(evt) {</span>
<a href="#l3.27"></a><span id="l3.27">   moveFilter(msgMoveMotion.Bottom);</span>
<a href="#l3.28"></a><span id="l3.28"> }</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30"> /**</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">- * Moves a singular selected filter up or down either 1 increment or to the </span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+ * Moves a singular selected filter up or down either 1 increment or to the</span>
<a href="#l3.33"></a><span id="l3.33">  * top/bottom. This acts on the visible filter list only which means that:</span>
<a href="#l3.34"></a><span id="l3.34">  *</span>
<a href="#l3.35"></a><span id="l3.35">  * - when moving up or down &quot;1&quot; the filter may skip one or more other</span>
<a href="#l3.36"></a><span id="l3.36">  *   filters (which are currently not visible) - this will also lead</span>
<a href="#l3.37"></a><span id="l3.37">  *   to the &quot;related&quot; filters (e.g search filters containing 'moz')</span>
<a href="#l3.38"></a><span id="l3.38">  *   being grouped more closely together</span>
<a href="#l3.39"></a><span id="l3.39">  * - moveTop / moveBottom</span>
<a href="#l3.40"></a><span id="l3.40">  *   this is currently moving to the top/bottom of the absolute list</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/SearchDialog.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/SearchDialog.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -449,17 +449,17 @@ function AddSubFoldersToURI(folder)</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> /**</span>
<a href="#l4.6"></a><span id="l4.6">  * Determine the proper search scope to use for a folder, so that the user is</span>
<a href="#l4.7"></a><span id="l4.7">  *  presented with a correct list of search capabilities. The user may manually</span>
<a href="#l4.8"></a><span id="l4.8">  *  request on online search for certain server types. To determine if the</span>
<a href="#l4.9"></a><span id="l4.9">  *  folder body may be searched, we ignore whether autosync is enabled,</span>
<a href="#l4.10"></a><span id="l4.10">  *  figuring that after the user manually syncs, they would still expect that</span>
<a href="#l4.11"></a><span id="l4.11">  *  body searches would work.</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">- *  </span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+ *</span>
<a href="#l4.14"></a><span id="l4.14">  * The available search capabilities also depend on whether the user is</span>
<a href="#l4.15"></a><span id="l4.15">  *  currently online or offline. Although that is also checked by the server,</span>
<a href="#l4.16"></a><span id="l4.16">  *  we do it ourselves because we have a more complex response to offline</span>
<a href="#l4.17"></a><span id="l4.17">  *  than the server's searchScope attribute provides.</span>
<a href="#l4.18"></a><span id="l4.18">  *</span>
<a href="#l4.19"></a><span id="l4.19">  * This method only works for real folders.</span>
<a href="#l4.20"></a><span id="l4.20">  */</span>
<a href="#l4.21"></a><span id="l4.21"> function GetScopeForFolder(folder)</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -483,17 +483,17 @@ function GetScopeForFolder(folder)</span>
<a href="#l4.23"></a><span id="l4.23"> </span>
<a href="#l4.24"></a><span id="l4.24">   let hasBody = folder.getFlag(Components.interfaces.nsMsgFolderFlags.Offline);</span>
<a href="#l4.25"></a><span id="l4.25">   let nsMsgSearchScope = Components.interfaces.nsMsgSearchScope;</span>
<a href="#l4.26"></a><span id="l4.26">   switch (localType)</span>
<a href="#l4.27"></a><span id="l4.27">   {</span>
<a href="#l4.28"></a><span id="l4.28">     case &quot;news&quot;:</span>
<a href="#l4.29"></a><span id="l4.29">       // News has four offline scopes, depending on whether junk and body</span>
<a href="#l4.30"></a><span id="l4.30">       // are available.</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-      let hasJunk = </span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+      let hasJunk =</span>
<a href="#l4.33"></a><span id="l4.33">         folder.getInheritedStringProperty(&quot;dobayes.mailnews@mozilla.org#junk&quot;)</span>
<a href="#l4.34"></a><span id="l4.34">                == &quot;true&quot;;</span>
<a href="#l4.35"></a><span id="l4.35">       if (hasJunk &amp;&amp; hasBody)</span>
<a href="#l4.36"></a><span id="l4.36">         return nsMsgSearchScope.localNewsJunkBody;</span>
<a href="#l4.37"></a><span id="l4.37">       if (hasJunk) // and no body</span>
<a href="#l4.38"></a><span id="l4.38">         return nsMsgSearchScope.localNewsJunk;</span>
<a href="#l4.39"></a><span id="l4.39">       if (hasBody) // and no junk</span>
<a href="#l4.40"></a><span id="l4.40">         return nsMsgSearchScope.localNewsBody;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/aboutDialog.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/aboutDialog.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -168,27 +168,27 @@ function appUpdater()</span>
<a href="#l5.4"></a><span id="l5.4"> appUpdater.prototype =</span>
<a href="#l5.5"></a><span id="l5.5"> {</span>
<a href="#l5.6"></a><span id="l5.6">   // true when there is an update check in progress.</span>
<a href="#l5.7"></a><span id="l5.7">   isChecking: false,</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">   // true when there is an update already staged / ready to be applied.</span>
<a href="#l5.10"></a><span id="l5.10">   get isPending() {</span>
<a href="#l5.11"></a><span id="l5.11">     if (this.update) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      return this.update.state == &quot;pending&quot; || </span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+      return this.update.state == &quot;pending&quot; ||</span>
<a href="#l5.14"></a><span id="l5.14">              this.update.state == &quot;pending-service&quot;;</span>
<a href="#l5.15"></a><span id="l5.15">     }</span>
<a href="#l5.16"></a><span id="l5.16">     return this.um.activeUpdate &amp;&amp;</span>
<a href="#l5.17"></a><span id="l5.17">            (this.um.activeUpdate.state == &quot;pending&quot; ||</span>
<a href="#l5.18"></a><span id="l5.18">             this.um.activeUpdate.state == &quot;pending-service&quot;);</span>
<a href="#l5.19"></a><span id="l5.19">   },</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">   get isApplied() {</span>
<a href="#l5.22"></a><span id="l5.22">     if (this.update) {</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-      return this.update.state == &quot;applied&quot; || </span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+      return this.update.state == &quot;applied&quot; ||</span>
<a href="#l5.25"></a><span id="l5.25">              this.update.state == &quot;applied-service&quot;;</span>
<a href="#l5.26"></a><span id="l5.26">     }</span>
<a href="#l5.27"></a><span id="l5.27">     return this.um.activeUpdate &amp;&amp;</span>
<a href="#l5.28"></a><span id="l5.28">            (this.um.activeUpdate.state == &quot;applied&quot; ||</span>
<a href="#l5.29"></a><span id="l5.29">             this.um.activeUpdate.state == &quot;applied-service&quot;);</span>
<a href="#l5.30"></a><span id="l5.30">   },</span>
<a href="#l5.31"></a><span id="l5.31"> </span>
<a href="#l5.32"></a><span id="l5.32">   // true when there is an update download in progress.</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineat">@@ -341,17 +341,17 @@ appUpdater.prototype =</span>
<a href="#l5.34"></a><span id="l5.34">       }</span>
<a href="#l5.35"></a><span id="l5.35"> </span>
<a href="#l5.36"></a><span id="l5.36">       if (gAppUpdater.update.unsupported) {</span>
<a href="#l5.37"></a><span id="l5.37">         let unsupportedLink = document.getElementById(&quot;unsupportedLink&quot;);</span>
<a href="#l5.38"></a><span id="l5.38">         if (gAppUpdater.update.detailsURL)</span>
<a href="#l5.39"></a><span id="l5.39">           unsupportedLink.href = gAppUpdater.update.detailsURL;</span>
<a href="#l5.40"></a><span id="l5.40">         else</span>
<a href="#l5.41"></a><span id="l5.41">           unsupportedLink.setAttribute(&quot;hidden&quot;, true);</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-        </span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+</span>
<a href="#l5.44"></a><span id="l5.44">         gAppUpdater.selectPanel(&quot;unsupportedSystem&quot;);</span>
<a href="#l5.45"></a><span id="l5.45">         return;</span>
<a href="#l5.46"></a><span id="l5.46">       }</span>
<a href="#l5.47"></a><span id="l5.47"> </span>
<a href="#l5.48"></a><span id="l5.48">       if (!gAppUpdater.aus.canApplyUpdates) {</span>
<a href="#l5.49"></a><span id="l5.49">         gAppUpdater.selectPanel(&quot;manualUpdate&quot;);</span>
<a href="#l5.50"></a><span id="l5.50">         return;</span>
<a href="#l5.51"></a><span id="l5.51">       }</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineat">@@ -505,17 +505,17 @@ appUpdater.prototype =</span>
<a href="#l5.53"></a><span id="l5.53">     if (!this.update)</span>
<a href="#l5.54"></a><span id="l5.54">       this.update = this.um.activeUpdate;</span>
<a href="#l5.55"></a><span id="l5.55">     this.update.QueryInterface(Components.interfaces.nsIWritablePropertyBag);</span>
<a href="#l5.56"></a><span id="l5.56">     this.update.setProperty(&quot;foregroundDownload&quot;, &quot;true&quot;);</span>
<a href="#l5.57"></a><span id="l5.57"> </span>
<a href="#l5.58"></a><span id="l5.58">     this.aus.pauseDownload();</span>
<a href="#l5.59"></a><span id="l5.59">     let state = this.aus.downloadUpdate(this.update, false);</span>
<a href="#l5.60"></a><span id="l5.60">     if (state == &quot;failed&quot;) {</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineminus">-      this.selectPanel(&quot;downloadFailed&quot;);      </span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+      this.selectPanel(&quot;downloadFailed&quot;);</span>
<a href="#l5.63"></a><span id="l5.63">       return;</span>
<a href="#l5.64"></a><span id="l5.64">     }</span>
<a href="#l5.65"></a><span id="l5.65"> </span>
<a href="#l5.66"></a><span id="l5.66">     this.downloadStatus = document.getElementById(&quot;downloadStatus&quot;);</span>
<a href="#l5.67"></a><span id="l5.67">     this.downloadStatus.value =</span>
<a href="#l5.68"></a><span id="l5.68">       DownloadUtils.getTransferTotal(0, this.update.selectedPatch.size);</span>
<a href="#l5.69"></a><span id="l5.69">     this.selectPanel(&quot;downloading&quot;);</span>
<a href="#l5.70"></a><span id="l5.70">     this.aus.addDownloadListener(this);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/folderPane.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/folderPane.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -244,17 +244,17 @@ let gFolderTreeView = {</span>
<a href="#l6.4"></a><span id="l6.4">    */</span>
<a href="#l6.5"></a><span id="l6.5">   unregisterFolderTreeMode: function ftv_unregisterFolderTreeMode(aCommonName) {</span>
<a href="#l6.6"></a><span id="l6.6">     this._modeNames.splice(this._modeNames.indexOf(aCommonName), 1);</span>
<a href="#l6.7"></a><span id="l6.7">     delete this._modes[aCommonName];</span>
<a href="#l6.8"></a><span id="l6.8">     delete this._modeDisplayNames[aCommonName];</span>
<a href="#l6.9"></a><span id="l6.9">     if (this._mode == aCommonName)</span>
<a href="#l6.10"></a><span id="l6.10">       this.mode = kDefaultMode;</span>
<a href="#l6.11"></a><span id="l6.11">   },</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  </span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+</span>
<a href="#l6.14"></a><span id="l6.14">   /**</span>
<a href="#l6.15"></a><span id="l6.15">    * Retrieves a specific mode object</span>
<a href="#l6.16"></a><span id="l6.16">    * @param aCommonName  the common-name with which the mode was previously</span>
<a href="#l6.17"></a><span id="l6.17">    *                     registered</span>
<a href="#l6.18"></a><span id="l6.18">    */</span>
<a href="#l6.19"></a><span id="l6.19">   getFolderTreeMode: function ftv_getFolderTreeMode(aCommonName) {</span>
<a href="#l6.20"></a><span id="l6.20">     return this._modes[aCommonName];</span>
<a href="#l6.21"></a><span id="l6.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/mail-offline.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/mail-offline.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -100,17 +100,17 @@ var MailOfflineMgr = {</span>
<a href="#l7.4"></a><span id="l7.4">       this.offlineBundle.getString('sendMessagesOfflineWindowTitle1'),</span>
<a href="#l7.5"></a><span id="l7.5">       this.offlineBundle.getString('sendMessagesOfflineLabel1'));</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">     if (goOnlineToSendMsgs)</span>
<a href="#l7.8"></a><span id="l7.8">       this.offlineManager.goOnline(true /* send unsent messages*/, false, aMsgWindow);</span>
<a href="#l7.9"></a><span id="l7.9">   },</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">   /**</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-   * Prompts the user to confirm sending of unsent messages. This is different from </span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+   * Prompts the user to confirm sending of unsent messages. This is different from</span>
<a href="#l7.14"></a><span id="l7.14">    * goOnlineToSendMessages which involves going online to send unsent messages.</span>
<a href="#l7.15"></a><span id="l7.15">    *</span>
<a href="#l7.16"></a><span id="l7.16">    * @return true if the user wants to send unsent messages</span>
<a href="#l7.17"></a><span id="l7.17">    */</span>
<a href="#l7.18"></a><span id="l7.18">   confirmSendUnsentMessages: function()</span>
<a href="#l7.19"></a><span id="l7.19">   {</span>
<a href="#l7.20"></a><span id="l7.20">     let alwaysAsk = {value: true};</span>
<a href="#l7.21"></a><span id="l7.21">     let sendUnsentMessages = Services.prompt.confirmEx(window,</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -173,36 +173,36 @@ var MailOfflineMgr = {</span>
<a href="#l7.23"></a><span id="l7.23">       alwaysAsk) == 0;</span>
<a href="#l7.24"></a><span id="l7.24"> </span>
<a href="#l7.25"></a><span id="l7.25">     // if the user changed the ask me setting then update the global pref based on their yes / no answer</span>
<a href="#l7.26"></a><span id="l7.26">     if (!alwaysAsk.value)</span>
<a href="#l7.27"></a><span id="l7.27">       Services.prefs.setIntPref(&quot;offline.download.download_messages&quot;, downloadMessages ? 1 : 2);</span>
<a href="#l7.28"></a><span id="l7.28">     return downloadMessages;</span>
<a href="#l7.29"></a><span id="l7.29">   },</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  /** </span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+  /**</span>
<a href="#l7.33"></a><span id="l7.33">    *  Get New Mail When Offline</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-   *  Prompts the user about going online in order to download new messages. </span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+   *  Prompts the user about going online in order to download new messages.</span>
<a href="#l7.36"></a><span id="l7.36">    *  Based on the response, will move us back to online mode.</span>
<a href="#l7.37"></a><span id="l7.37">    *</span>
<a href="#l7.38"></a><span id="l7.38">    * @return true if the user confirms going online.</span>
<a href="#l7.39"></a><span id="l7.39">    */</span>
<a href="#l7.40"></a><span id="l7.40">   getNewMail: function()</span>
<a href="#l7.41"></a><span id="l7.41">   {</span>
<a href="#l7.42"></a><span id="l7.42">     let goOnline = Services.prompt.confirm(window,</span>
<a href="#l7.43"></a><span id="l7.43">       this.offlineBundle.getString('getMessagesOfflineWindowTitle1'),</span>
<a href="#l7.44"></a><span id="l7.44">       this.offlineBundle.getString('getMessagesOfflineLabel1'));</span>
<a href="#l7.45"></a><span id="l7.45"> </span>
<a href="#l7.46"></a><span id="l7.46">     if (goOnline)</span>
<a href="#l7.47"></a><span id="l7.47">       this.offlineManager.goOnline(this.shouldSendUnsentMessages(),</span>
<a href="#l7.48"></a><span id="l7.48">                                    false /* playbackOfflineImapOperations */, msgWindow);</span>
<a href="#l7.49"></a><span id="l7.49">     return goOnline;</span>
<a href="#l7.50"></a><span id="l7.50">   },</span>
<a href="#l7.51"></a><span id="l7.51"> </span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-  /** </span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+  /**</span>
<a href="#l7.54"></a><span id="l7.54">    * Private helper method to update the state of the Offline menu item</span>
<a href="#l7.55"></a><span id="l7.55">    * and the offline status bar indicator</span>
<a href="#l7.56"></a><span id="l7.56">    */</span>
<a href="#l7.57"></a><span id="l7.57">   updateOfflineUI: function(aIsOffline)</span>
<a href="#l7.58"></a><span id="l7.58">   {</span>
<a href="#l7.59"></a><span id="l7.59">     document.getElementById('goOfflineMenuItem').setAttribute(&quot;checked&quot;, aIsOffline);</span>
<a href="#l7.60"></a><span id="l7.60">     document.getElementById('appmenu_goOffline').setAttribute(&quot;checked&quot;, aIsOffline);</span>
<a href="#l7.61"></a><span id="l7.61">     var statusBarPanel = document.getElementById('offline-status');</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineat">@@ -215,17 +215,17 @@ var MailOfflineMgr = {</span>
<a href="#l7.63"></a><span id="l7.63">     {</span>
<a href="#l7.64"></a><span id="l7.64">       statusBarPanel.removeAttribute(&quot;offline&quot;);</span>
<a href="#l7.65"></a><span id="l7.65">       statusBarPanel.setAttribute(&quot;tooltiptext&quot;, this.offlineBundle.getString(&quot;onlineTooltip&quot;));</span>
<a href="#l7.66"></a><span id="l7.66">     }</span>
<a href="#l7.67"></a><span id="l7.67">   },</span>
<a href="#l7.68"></a><span id="l7.68"> </span>
<a href="#l7.69"></a><span id="l7.69">   /**</span>
<a href="#l7.70"></a><span id="l7.70">    * private helper method called whenever we detect a change to the offline state</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-   */ </span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+   */</span>
<a href="#l7.73"></a><span id="l7.73">   mailOfflineStateChanged: function (aGoingOffline)</span>
<a href="#l7.74"></a><span id="l7.74">   {</span>
<a href="#l7.75"></a><span id="l7.75">     this.updateOfflineUI(aGoingOffline);</span>
<a href="#l7.76"></a><span id="l7.76">     if (!aGoingOffline)</span>
<a href="#l7.77"></a><span id="l7.77">     {</span>
<a href="#l7.78"></a><span id="l7.78">       let prefSendUnsentMessages = Services.prefs.getIntPref(&quot;offline.send.unsent_messages&quot;);</span>
<a href="#l7.79"></a><span id="l7.79">       // 0 == Ask, 1 == Always Send, 2 == Never Send</span>
<a href="#l7.80"></a><span id="l7.80">       let sendUnsentMessages = (prefSendUnsentMessages == 0 &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/content/mail3PaneWindowCommands.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/content/mail3PaneWindowCommands.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -429,17 +429,17 @@ var DefaultController =</span>
<a href="#l8.4"></a><span id="l8.4">       case &quot;cmd_goBack&quot;:</span>
<a href="#l8.5"></a><span id="l8.5">         if (gDBView)</span>
<a href="#l8.6"></a><span id="l8.6">           enabled.value = gDBView.navigateStatus((command == &quot;cmd_goBack&quot; || command == &quot;button_goBack&quot;) ? nsMsgNavigationType.back : nsMsgNavigationType.forward);</span>
<a href="#l8.7"></a><span id="l8.7">         return enabled.value;</span>
<a href="#l8.8"></a><span id="l8.8">       case &quot;cmd_goStartPage&quot;:</span>
<a href="#l8.9"></a><span id="l8.9">         return document.getElementById(&quot;tabmail&quot;).selectedTab.mode.name == &quot;folder&quot; &amp;&amp;</span>
<a href="#l8.10"></a><span id="l8.10">                !IsMessagePaneCollapsed();</span>
<a href="#l8.11"></a><span id="l8.11">       case &quot;cmd_undoCloseTab&quot;:</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-        return (document.getElementById(&quot;tabmail&quot;).recentlyClosedTabs.length &gt; 0);               </span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+        return (document.getElementById(&quot;tabmail&quot;).recentlyClosedTabs.length &gt; 0);</span>
<a href="#l8.14"></a><span id="l8.14">       case &quot;cmd_markAllRead&quot;:</span>
<a href="#l8.15"></a><span id="l8.15">         return IsFolderSelected() &amp;&amp; gDBView &amp;&amp;</span>
<a href="#l8.16"></a><span id="l8.16">                gDBView.msgFolder.getNumUnread(false) &gt; 0;</span>
<a href="#l8.17"></a><span id="l8.17">       case &quot;cmd_markReadByDate&quot;:</span>
<a href="#l8.18"></a><span id="l8.18">         return IsFolderSelected();</span>
<a href="#l8.19"></a><span id="l8.19">       case &quot;cmd_find&quot;:</span>
<a href="#l8.20"></a><span id="l8.20">       case &quot;cmd_findAgain&quot;:</span>
<a href="#l8.21"></a><span id="l8.21">       case &quot;cmd_findPrevious&quot;:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/content/mailContextMenus.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/content/mailContextMenus.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -58,17 +58,17 @@ function fillMailContextMenu(event)</span>
<a href="#l9.4"></a><span id="l9.4">   // If the popupshowing was for a submenu, we don't need to do anything.</span>
<a href="#l9.5"></a><span id="l9.5">   if (event.target != event.currentTarget)</span>
<a href="#l9.6"></a><span id="l9.6">     return true;</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">   goUpdateCommand('cmd_printpreview');</span>
<a href="#l9.9"></a><span id="l9.9">   goUpdateCommand('cmd_print');</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">   updateCheckedStateForIgnoreAndWatchThreadCmds();</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  </span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+</span>
<a href="#l9.14"></a><span id="l9.14">   gContextMenu = new nsContextMenu(event.target, event.shiftKey);</span>
<a href="#l9.15"></a><span id="l9.15">   return gContextMenu.shouldDisplay;</span>
<a href="#l9.16"></a><span id="l9.16"> }</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18"> /**</span>
<a href="#l9.19"></a><span id="l9.19">  * Set the message id to show as label in the context menu item designated</span>
<a href="#l9.20"></a><span id="l9.20">  * for that purpose.</span>
<a href="#l9.21"></a><span id="l9.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -107,17 +107,17 @@ function overlayOnLoad()</span>
<a href="#l10.4"></a><span id="l10.4">   if (mode == &quot;full&quot; &amp;&amp; align == &quot;end&quot;) {</span>
<a href="#l10.5"></a><span id="l10.5">     toolbox.setAttribute(&quot;mode&quot;, mode);</span>
<a href="#l10.6"></a><span id="l10.6">     toolbox.ownerDocument.persist(toolbox.id, &quot;mode&quot;);</span>
<a href="#l10.7"></a><span id="l10.7">   }</span>
<a href="#l10.8"></a><span id="l10.8"> }</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10"> function overlayRepositionDialog()</span>
<a href="#l10.11"></a><span id="l10.11"> {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  // Position the dialog so it is fully visible on the screen  </span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  // Position the dialog so it is fully visible on the screen</span>
<a href="#l10.14"></a><span id="l10.14">   // (if possible)</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16">   // Seems to be necessary to get the correct dialog height/width</span>
<a href="#l10.17"></a><span id="l10.17">   window.sizeToContent();</span>
<a href="#l10.18"></a><span id="l10.18">   var wH  = window.outerHeight;</span>
<a href="#l10.19"></a><span id="l10.19">   var wW  = window.outerWidth;</span>
<a href="#l10.20"></a><span id="l10.20">   var sH  = window.screen.height;</span>
<a href="#l10.21"></a><span id="l10.21">   var sW  = window.screen.width;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -502,17 +502,17 @@ function openSavedFilesWnd()</span>
<a href="#l10.23"></a><span id="l10.23">   Components.classes['@mozilla.org/download-manager-ui;1']</span>
<a href="#l10.24"></a><span id="l10.24">             .getService(Components.interfaces.nsIDownloadManagerUI)</span>
<a href="#l10.25"></a><span id="l10.25">             .show(window);</span>
<a href="#l10.26"></a><span id="l10.26"> }</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28"> function SetBusyCursor(window, enable)</span>
<a href="#l10.29"></a><span id="l10.29"> {</span>
<a href="#l10.30"></a><span id="l10.30">     // setCursor() is only available for chrome windows.</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-    // However one of our frames is the start page which </span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+    // However one of our frames is the start page which</span>
<a href="#l10.33"></a><span id="l10.33">     // is a non-chrome window, so check if this window has a</span>
<a href="#l10.34"></a><span id="l10.34">     // setCursor method</span>
<a href="#l10.35"></a><span id="l10.35">     if (&quot;setCursor&quot; in window) {</span>
<a href="#l10.36"></a><span id="l10.36">         if (enable)</span>
<a href="#l10.37"></a><span id="l10.37">             window.setCursor(&quot;progress&quot;);</span>
<a href="#l10.38"></a><span id="l10.38">         else</span>
<a href="#l10.39"></a><span id="l10.39">             window.setCursor(&quot;auto&quot;);</span>
<a href="#l10.40"></a><span id="l10.40">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -593,28 +593,28 @@ function InitViewBodyMenu()</span>
<a href="#l11.4"></a><span id="l11.4">   const defaultIDs = [&quot;bodyAllowHTML&quot;,</span>
<a href="#l11.5"></a><span id="l11.5">                       &quot;bodySanitized&quot;,</span>
<a href="#l11.6"></a><span id="l11.6">                       &quot;bodyAsPlaintext&quot;,</span>
<a href="#l11.7"></a><span id="l11.7">                       &quot;bodyAllParts&quot;];</span>
<a href="#l11.8"></a><span id="l11.8">   const rssIDs = [&quot;bodyFeedSummaryAllowHTML&quot;,</span>
<a href="#l11.9"></a><span id="l11.9">                   &quot;bodyFeedSummarySanitized&quot;,</span>
<a href="#l11.10"></a><span id="l11.10">                   &quot;bodyFeedSummaryAsPlaintext&quot;];</span>
<a href="#l11.11"></a><span id="l11.11">   let menuIDs = isFeed ? rssIDs : defaultIDs;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  </span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+</span>
<a href="#l11.14"></a><span id="l11.14">   if (disallow_classes &gt; 0)</span>
<a href="#l11.15"></a><span id="l11.15">     gDisallow_classes_no_html = disallow_classes;</span>
<a href="#l11.16"></a><span id="l11.16">   // else gDisallow_classes_no_html keeps its inital value (see top)</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18">   let AllowHTML_menuitem = document.getElementById(menuIDs[0]);</span>
<a href="#l11.19"></a><span id="l11.19">   let Sanitized_menuitem = document.getElementById(menuIDs[1]);</span>
<a href="#l11.20"></a><span id="l11.20">   let AsPlaintext_menuitem = document.getElementById(menuIDs[2]);</span>
<a href="#l11.21"></a><span id="l11.21">   let AllBodyParts_menuitem = menuIDs[3] ? document.getElementById(menuIDs[3])</span>
<a href="#l11.22"></a><span id="l11.22">         : null;</span>
<a href="#l11.23"></a><span id="l11.23"> </span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-  document.getElementById(&quot;bodyAllParts&quot;).hidden = </span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+  document.getElementById(&quot;bodyAllParts&quot;).hidden =</span>
<a href="#l11.26"></a><span id="l11.26">     ! Services.prefs.getBoolPref(&quot;mailnews.display.show_all_body_parts_menu&quot;);</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28">   if (!prefer_plaintext &amp;&amp; !html_as &amp;&amp; !disallow_classes &amp;&amp;</span>
<a href="#l11.29"></a><span id="l11.29">       AllowHTML_menuitem)</span>
<a href="#l11.30"></a><span id="l11.30">     AllowHTML_menuitem.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l11.31"></a><span id="l11.31">   else if (!prefer_plaintext &amp;&amp; html_as == 3 &amp;&amp; disallow_classes &gt; 0 &amp;&amp;</span>
<a href="#l11.32"></a><span id="l11.32">       Sanitized_menuitem)</span>
<a href="#l11.33"></a><span id="l11.33">     Sanitized_menuitem.setAttribute(&quot;checked&quot;, true);</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineat">@@ -940,54 +940,54 @@ function InitMessageTags(menuPopup)</span>
<a href="#l11.35"></a><span id="l11.35"> function InitRecentlyClosedTabsPopup(menuPopup)</span>
<a href="#l11.36"></a><span id="l11.36"> {</span>
<a href="#l11.37"></a><span id="l11.37">   let tabs = document.getElementById(&quot;tabmail&quot;).recentlyClosedTabs;</span>
<a href="#l11.38"></a><span id="l11.38"> </span>
<a href="#l11.39"></a><span id="l11.39">   // show Popup only when there are restorable tabs.</span>
<a href="#l11.40"></a><span id="l11.40">   if( !tabs.length )</span>
<a href="#l11.41"></a><span id="l11.41">     return false;</span>
<a href="#l11.42"></a><span id="l11.42"> </span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-  // Clear the list before rebulding it.     </span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+  // Clear the list before rebulding it.</span>
<a href="#l11.45"></a><span id="l11.45">   while (menuPopup.hasChildNodes())</span>
<a href="#l11.46"></a><span id="l11.46">     menuPopup.lastChild.remove();</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-    </span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+</span>
<a href="#l11.49"></a><span id="l11.49">   // Rebuild the recently closed tab list</span>
<a href="#l11.50"></a><span id="l11.50">   for (let i = 0; i &lt; tabs.length; i++ ) {</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-    </span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+</span>
<a href="#l11.53"></a><span id="l11.53">     let menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineminus">-    menuItem.setAttribute(&quot;label&quot;,tabs[i].title);    </span>
<a href="#l11.55"></a><span id="l11.55" class="difflineplus">+    menuItem.setAttribute(&quot;label&quot;,tabs[i].title);</span>
<a href="#l11.56"></a><span id="l11.56">     menuItem.setAttribute('oncommand',</span>
<a href="#l11.57"></a><span id="l11.57">         'document.getElementById(&quot;tabmail&quot;).undoCloseTab('+i+');');</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineminus">-     </span>
<a href="#l11.59"></a><span id="l11.59" class="difflineplus">+</span>
<a href="#l11.60"></a><span id="l11.60">     if (i==0)</span>
<a href="#l11.61"></a><span id="l11.61">       menuItem.setAttribute('key',&quot;key_undoCloseTab&quot;);</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-     </span>
<a href="#l11.63"></a><span id="l11.63" class="difflineplus">+</span>
<a href="#l11.64"></a><span id="l11.64">     menuPopup.appendChild(menuItem);</span>
<a href="#l11.65"></a><span id="l11.65">   }</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-  </span>
<a href="#l11.67"></a><span id="l11.67" class="difflineminus">-  // &quot;Restore All Tabs&quot; with only one entry does not make sense </span>
<a href="#l11.68"></a><span id="l11.68" class="difflineplus">+</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineplus">+  // &quot;Restore All Tabs&quot; with only one entry does not make sense</span>
<a href="#l11.70"></a><span id="l11.70">   if (tabs.length &gt; 1) {</span>
<a href="#l11.71"></a><span id="l11.71">     menuPopup.appendChild(document.createElement(&quot;menuseparator&quot;));</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-  </span>
<a href="#l11.73"></a><span id="l11.73" class="difflineplus">+</span>
<a href="#l11.74"></a><span id="l11.74">     let menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l11.75"></a><span id="l11.75">     menuItem.setAttribute(&quot;label&quot;, document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l11.76"></a><span id="l11.76">                                            .getString(&quot;restoreAllTabs&quot;));</span>
<a href="#l11.77"></a><span id="l11.77">     menuItem.setAttribute(&quot;oncommand&quot;,&quot;goRestoreAllTabs();&quot;);</span>
<a href="#l11.78"></a><span id="l11.78">     menuPopup.appendChild(menuItem);</span>
<a href="#l11.79"></a><span id="l11.79">   }</span>
<a href="#l11.80"></a><span id="l11.80"> </span>
<a href="#l11.81"></a><span id="l11.81">   return true;</span>
<a href="#l11.82"></a><span id="l11.82"> }</span>
<a href="#l11.83"></a><span id="l11.83"> </span>
<a href="#l11.84"></a><span id="l11.84"> function goRestoreAllTabs()</span>
<a href="#l11.85"></a><span id="l11.85"> {</span>
<a href="#l11.86"></a><span id="l11.86">   let tabmail = document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineminus">-  </span>
<a href="#l11.88"></a><span id="l11.88" class="difflineplus">+</span>
<a href="#l11.89"></a><span id="l11.89">   let len = tabmail.recentlyClosedTabs.length;</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineminus">-  </span>
<a href="#l11.91"></a><span id="l11.91" class="difflineplus">+</span>
<a href="#l11.92"></a><span id="l11.92">   while(len--)</span>
<a href="#l11.93"></a><span id="l11.93">     document.getElementById(&quot;tabmail&quot;).undoCloseTab();</span>
<a href="#l11.94"></a><span id="l11.94"> }</span>
<a href="#l11.95"></a><span id="l11.95"> </span>
<a href="#l11.96"></a><span id="l11.96"> function backToolbarMenu_init(menuPopup)</span>
<a href="#l11.97"></a><span id="l11.97"> {</span>
<a href="#l11.98"></a><span id="l11.98">   populateHistoryMenu(menuPopup, true);</span>
<a href="#l11.99"></a><span id="l11.99"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -1065,17 +1065,17 @@ function UpdateExpandedMessageHeaders() </span>
<a href="#l12.4"></a><span id="l12.4">   // Iterate over each header we received and see if we have a matching entry</span>
<a href="#l12.5"></a><span id="l12.5">   // in each header view table...</span>
<a href="#l12.6"></a><span id="l12.6">   var headerName;</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8">   // Remove the height attr so that it redraws correctly. Works around a problem</span>
<a href="#l12.9"></a><span id="l12.9">   // that attachment-splitter causes if it's moved high enough to affect</span>
<a href="#l12.10"></a><span id="l12.10">   // the header box:</span>
<a href="#l12.11"></a><span id="l12.11">   document.getElementById(&quot;msgHeaderView&quot;).removeAttribute(&quot;height&quot;);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  // This height attribute may be set by toggleWrap() if the user clicked </span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  // This height attribute may be set by toggleWrap() if the user clicked</span>
<a href="#l12.14"></a><span id="l12.14">   // the &quot;more&quot; button&quot; in the header.</span>
<a href="#l12.15"></a><span id="l12.15">   // Remove it so that the height is determined automatically.</span>
<a href="#l12.16"></a><span id="l12.16">   document.getElementById(&quot;expandedHeaderView&quot;).removeAttribute(&quot;height&quot;);</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18">   for (headerName in currentHeaderData) {</span>
<a href="#l12.19"></a><span id="l12.19">     var headerField = currentHeaderData[headerName];</span>
<a href="#l12.20"></a><span id="l12.20">     var headerEntry = null;</span>
<a href="#l12.21"></a><span id="l12.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/base/content/msgViewNavigation.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/base/content/msgViewNavigation.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -80,37 +80,37 @@ function FindNextFolder()</span>
<a href="#l13.4"></a><span id="l13.4">   // go up to the parent, and start at the folder after the current one</span>
<a href="#l13.5"></a><span id="l13.5">   // unless we are at a server, in which case bail out.</span>
<a href="#l13.6"></a><span id="l13.6">   for (folder = gDBView.msgFolder; !folder.isServer; ) {</span>
<a href="#l13.7"></a><span id="l13.7"> </span>
<a href="#l13.8"></a><span id="l13.8">     var parent = folder.parent;</span>
<a href="#l13.9"></a><span id="l13.9">     folder = FindNextChildFolder(parent, folder);</span>
<a href="#l13.10"></a><span id="l13.10">     if (folder)</span>
<a href="#l13.11"></a><span id="l13.11">       return folder;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">- </span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+</span>
<a href="#l13.14"></a><span id="l13.14">     // none at this level after the current folder.  go up.</span>
<a href="#l13.15"></a><span id="l13.15">     folder = parent;</span>
<a href="#l13.16"></a><span id="l13.16">   }</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18">   // nothing in the current account, start with the next account (below)</span>
<a href="#l13.19"></a><span id="l13.19">   // and try until we hit the bottom of the folder pane</span>
<a href="#l13.20"></a><span id="l13.20"> </span>
<a href="#l13.21"></a><span id="l13.21">   // start at the account after the current account</span>
<a href="#l13.22"></a><span id="l13.22">   var rootFolders = GetRootFoldersInFolderPaneOrder();</span>
<a href="#l13.23"></a><span id="l13.23">   for (var i = 0; i &lt; rootFolders.length; i++) {</span>
<a href="#l13.24"></a><span id="l13.24">     if (rootFolders[i].URI == gDBView.msgFolder.server.serverURI)</span>
<a href="#l13.25"></a><span id="l13.25">       break;</span>
<a href="#l13.26"></a><span id="l13.26">   }</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineminus">-  </span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+</span>
<a href="#l13.29"></a><span id="l13.29">   for (var j = i + 1; j &lt; rootFolders.length; j++) {</span>
<a href="#l13.30"></a><span id="l13.30">     folder = FindNextChildFolder(rootFolders[j], null);</span>
<a href="#l13.31"></a><span id="l13.31">     if (folder)</span>
<a href="#l13.32"></a><span id="l13.32">       return folder;</span>
<a href="#l13.33"></a><span id="l13.33">   }</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">-  </span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+</span>
<a href="#l13.36"></a><span id="l13.36">   // if nothing from the current account down to the bottom</span>
<a href="#l13.37"></a><span id="l13.37">   // (of the folder pane), start again at the top.</span>
<a href="#l13.38"></a><span id="l13.38">   for (j = 0; j &lt;= i; j++) {</span>
<a href="#l13.39"></a><span id="l13.39">     folder = FindNextChildFolder(rootFolders[j], null);</span>
<a href="#l13.40"></a><span id="l13.40">     if (folder)</span>
<a href="#l13.41"></a><span id="l13.41">       return folder;</span>
<a href="#l13.42"></a><span id="l13.42">   }</span>
<a href="#l13.43"></a><span id="l13.43">   return null;</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineat">@@ -144,17 +144,17 @@ function CrossFolderNavigation(type)</span>
<a href="#l13.45"></a><span id="l13.45">     // 1: &quot;next&quot; goes to the next folder, and prompts (the default)</span>
<a href="#l13.46"></a><span id="l13.46">     // 2: &quot;next&quot; does nothing when there are no unread messages</span>
<a href="#l13.47"></a><span id="l13.47"> </span>
<a href="#l13.48"></a><span id="l13.48">     // not crossing folders, don't find next</span>
<a href="#l13.49"></a><span id="l13.49">     if (nextMode == 2)</span>
<a href="#l13.50"></a><span id="l13.50">       return;</span>
<a href="#l13.51"></a><span id="l13.51"> </span>
<a href="#l13.52"></a><span id="l13.52">     var folder = FindNextFolder();</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineminus">-    if (folder &amp;&amp; (gDBView.msgFolder.URI != folder.URI)) </span>
<a href="#l13.54"></a><span id="l13.54" class="difflineplus">+    if (folder &amp;&amp; (gDBView.msgFolder.URI != folder.URI))</span>
<a href="#l13.55"></a><span id="l13.55">     {</span>
<a href="#l13.56"></a><span id="l13.56">       if (nextMode == 1)</span>
<a href="#l13.57"></a><span id="l13.57">       {</span>
<a href="#l13.58"></a><span id="l13.58">         let promptText = document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l13.59"></a><span id="l13.59">                                  .getFormattedString(&quot;advanceNextPrompt&quot;,</span>
<a href="#l13.60"></a><span id="l13.60">                                                      [folder.name], 1);</span>
<a href="#l13.61"></a><span id="l13.61">         if (Services.prompt.confirmEx(window, null, promptText,</span>
<a href="#l13.62"></a><span id="l13.62">                                       Services.prompt.STD_YES_NO_BUTTONS,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/base/content/newTagDialog.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/base/content/newTagDialog.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -46,17 +46,17 @@ function initializeForEditing(aTagKey)</span>
<a href="#l14.4"></a><span id="l14.4">   document.documentElement.setAttribute(&quot;ondialogaccept&quot;, &quot;return onOKEditTag();&quot;);</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">   // extract the color and name for the current tag</span>
<a href="#l14.7"></a><span id="l14.7">   document.getElementById(&quot;tagColorPicker&quot;).color = MailServices.tags.getColorForKey(aTagKey);</span>
<a href="#l14.8"></a><span id="l14.8">   dialog.nameField.value = MailServices.tags.getTagForKey(aTagKey);</span>
<a href="#l14.9"></a><span id="l14.9"> }</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11"> /**</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">- * on OK handler for editing a new tag. </span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+ * on OK handler for editing a new tag.</span>
<a href="#l14.14"></a><span id="l14.14">  */</span>
<a href="#l14.15"></a><span id="l14.15"> function onOKEditTag()</span>
<a href="#l14.16"></a><span id="l14.16"> {</span>
<a href="#l14.17"></a><span id="l14.17">   // get the tag name of the current key we are editing</span>
<a href="#l14.18"></a><span id="l14.18">   let existingTagName = MailServices.tags.getTagForKey(dialog.editTagKey);</span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20">   // it's ok if the name didn't change</span>
<a href="#l14.21"></a><span id="l14.21">   if (existingTagName != dialog.nameField.value)</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -71,17 +71,17 @@ function onOKEditTag()</span>
<a href="#l14.23"></a><span id="l14.23">     MailServices.tags.setTagForKey(dialog.editTagKey, dialog.nameField.value);</span>
<a href="#l14.24"></a><span id="l14.24">   }</span>
<a href="#l14.25"></a><span id="l14.25"> </span>
<a href="#l14.26"></a><span id="l14.26">   MailServices.tags.setColorForKey(dialog.editTagKey, document.getElementById(&quot;tagColorPicker&quot;).color);</span>
<a href="#l14.27"></a><span id="l14.27">   return dialog.okCallback();</span>
<a href="#l14.28"></a><span id="l14.28"> }</span>
<a href="#l14.29"></a><span id="l14.29"> </span>
<a href="#l14.30"></a><span id="l14.30"> /**</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">- * on OK handler for creating a new tag. Alerts the user if a tag with </span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+ * on OK handler for creating a new tag. Alerts the user if a tag with</span>
<a href="#l14.33"></a><span id="l14.33">  * the name already exists.</span>
<a href="#l14.34"></a><span id="l14.34">  */</span>
<a href="#l14.35"></a><span id="l14.35"> function onOKNewTag()</span>
<a href="#l14.36"></a><span id="l14.36"> {</span>
<a href="#l14.37"></a><span id="l14.37">   var name = dialog.nameField.value;</span>
<a href="#l14.38"></a><span id="l14.38"> </span>
<a href="#l14.39"></a><span id="l14.39">   if (MailServices.tags.getKeyForTag(name))</span>
<a href="#l14.40"></a><span id="l14.40">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/base/content/safeMode.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/base/content/safeMode.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -57,12 +57,12 @@ function onCancel() {</span>
<a href="#l15.4"></a><span id="l15.4"> }</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6"> function onLoad() {</span>
<a href="#l15.7"></a><span id="l15.7">   document.getElementById(&quot;tasks&quot;)</span>
<a href="#l15.8"></a><span id="l15.8">           .addEventListener(&quot;CheckboxStateChange&quot;, updateOKButtonState, false);</span>
<a href="#l15.9"></a><span id="l15.9"> }</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11"> function updateOKButtonState() {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-  document.documentElement.getButton(&quot;accept&quot;).disabled = </span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+  document.documentElement.getButton(&quot;accept&quot;).disabled =</span>
<a href="#l15.14"></a><span id="l15.14">     !document.getElementById(&quot;resetToolbars&quot;).checked &amp;&amp;</span>
<a href="#l15.15"></a><span id="l15.15">     !document.getElementById(&quot;disableAddons&quot;).checked;</span>
<a href="#l15.16"></a><span id="l15.16"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/base/content/sanitize.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/base/content/sanitize.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -14,98 +14,98 @@ Sanitizer.prototype = {</span>
<a href="#l16.4"></a><span id="l16.4">     if (this.items[aItemName].canClear)</span>
<a href="#l16.5"></a><span id="l16.5">       this.items[aItemName].clear();</span>
<a href="#l16.6"></a><span id="l16.6">   },</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8">   canClearItem: function (aItemName)</span>
<a href="#l16.9"></a><span id="l16.9">   {</span>
<a href="#l16.10"></a><span id="l16.10">     return this.items[aItemName].canClear;</span>
<a href="#l16.11"></a><span id="l16.11">   },</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  </span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+</span>
<a href="#l16.14"></a><span id="l16.14">   prefDomain: &quot;&quot;,</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-  </span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+</span>
<a href="#l16.17"></a><span id="l16.17">   getNameFromPreference: function (aPreferenceName)</span>
<a href="#l16.18"></a><span id="l16.18">   {</span>
<a href="#l16.19"></a><span id="l16.19">     return aPreferenceName.substr(this.prefDomain.length);</span>
<a href="#l16.20"></a><span id="l16.20">   },</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-  </span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+</span>
<a href="#l16.23"></a><span id="l16.23">   /**</span>
<a href="#l16.24"></a><span id="l16.24">    * Deletes privacy sensitive data in a batch, according to user preferences</span>
<a href="#l16.25"></a><span id="l16.25">    *</span>
<a href="#l16.26"></a><span id="l16.26">    * @returns  null if everything's fine;  an object in the form</span>
<a href="#l16.27"></a><span id="l16.27">    *           { itemName: error, ... } on (partial) failure</span>
<a href="#l16.28"></a><span id="l16.28">    */</span>
<a href="#l16.29"></a><span id="l16.29">   sanitize: function ()</span>
<a href="#l16.30"></a><span id="l16.30">   {</span>
<a href="#l16.31"></a><span id="l16.31">     var branch = Services.prefs.getBranch(this.prefDomain);</span>
<a href="#l16.32"></a><span id="l16.32">     var errors = null;</span>
<a href="#l16.33"></a><span id="l16.33"> </span>
<a href="#l16.34"></a><span id="l16.34">     // Cache the range of times to clear</span>
<a href="#l16.35"></a><span id="l16.35">     if (this.ignoreTimespan)</span>
<a href="#l16.36"></a><span id="l16.36">       var range = null;  // If we ignore timespan, clear everything</span>
<a href="#l16.37"></a><span id="l16.37">     else</span>
<a href="#l16.38"></a><span id="l16.38">       range = this.range || Sanitizer.getClearRange();</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-      </span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+</span>
<a href="#l16.41"></a><span id="l16.41">     for (var itemName in this.items) {</span>
<a href="#l16.42"></a><span id="l16.42">       var item = this.items[itemName];</span>
<a href="#l16.43"></a><span id="l16.43">       item.range = range;</span>
<a href="#l16.44"></a><span id="l16.44">       if (&quot;clear&quot; in item &amp;&amp; item.canClear &amp;&amp; branch.getBoolPref(itemName)) {</span>
<a href="#l16.45"></a><span id="l16.45">         // Some of these clear() may raise exceptions (see bug #265028)</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineminus">-        // to sanitize as much as possible, we catch and store them, </span>
<a href="#l16.47"></a><span id="l16.47" class="difflineplus">+        // to sanitize as much as possible, we catch and store them,</span>
<a href="#l16.48"></a><span id="l16.48">         // rather than fail fast.</span>
<a href="#l16.49"></a><span id="l16.49">         // Callers should check returned errors and give user feedback</span>
<a href="#l16.50"></a><span id="l16.50">         // about items that could not be sanitized</span>
<a href="#l16.51"></a><span id="l16.51">         try {</span>
<a href="#l16.52"></a><span id="l16.52">           item.clear();</span>
<a href="#l16.53"></a><span id="l16.53">         } catch(er) {</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-          if (!errors) </span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+          if (!errors)</span>
<a href="#l16.56"></a><span id="l16.56">             errors = {};</span>
<a href="#l16.57"></a><span id="l16.57">           errors[itemName] = er;</span>
<a href="#l16.58"></a><span id="l16.58">           dump(&quot;Error sanitizing &quot; + itemName + &quot;: &quot; + er + &quot;\n&quot;);</span>
<a href="#l16.59"></a><span id="l16.59">         }</span>
<a href="#l16.60"></a><span id="l16.60">       }</span>
<a href="#l16.61"></a><span id="l16.61">     }</span>
<a href="#l16.62"></a><span id="l16.62">     return errors;</span>
<a href="#l16.63"></a><span id="l16.63">   },</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineminus">-  </span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+</span>
<a href="#l16.66"></a><span id="l16.66">   // Time span only makes sense in certain cases.  Consumers who want</span>
<a href="#l16.67"></a><span id="l16.67">   // to only clear some private data can opt in by setting this to false,</span>
<a href="#l16.68"></a><span id="l16.68">   // and can optionally specify a specific range.  If timespan is not ignored,</span>
<a href="#l16.69"></a><span id="l16.69">   // and range is not set, sanitize() will use the value of the timespan</span>
<a href="#l16.70"></a><span id="l16.70">   // pref to determine a range</span>
<a href="#l16.71"></a><span id="l16.71">   ignoreTimespan : true,</span>
<a href="#l16.72"></a><span id="l16.72">   range : null,</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineminus">-  </span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+</span>
<a href="#l16.75"></a><span id="l16.75">   items: {</span>
<a href="#l16.76"></a><span id="l16.76">     cache: {</span>
<a href="#l16.77"></a><span id="l16.77">       clear: function ()</span>
<a href="#l16.78"></a><span id="l16.78">       {</span>
<a href="#l16.79"></a><span id="l16.79">         try {</span>
<a href="#l16.80"></a><span id="l16.80">           // Cache doesn't consult timespan, nor does it have the</span>
<a href="#l16.81"></a><span id="l16.81">           // facility for timespan-based eviction.  Wipe it.</span>
<a href="#l16.82"></a><span id="l16.82">           Services.cache.evictEntries(Ci.nsICache.STORE_ANYWHERE);</span>
<a href="#l16.83"></a><span id="l16.83">         } catch(er) {}</span>
<a href="#l16.84"></a><span id="l16.84"> </span>
<a href="#l16.85"></a><span id="l16.85">       },</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineminus">-      </span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+</span>
<a href="#l16.88"></a><span id="l16.88">       get canClear()</span>
<a href="#l16.89"></a><span id="l16.89">       {</span>
<a href="#l16.90"></a><span id="l16.90">         return true;</span>
<a href="#l16.91"></a><span id="l16.91">       }</span>
<a href="#l16.92"></a><span id="l16.92">     },</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineminus">-    </span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+</span>
<a href="#l16.95"></a><span id="l16.95">     cookies: {</span>
<a href="#l16.96"></a><span id="l16.96">       clear: function ()</span>
<a href="#l16.97"></a><span id="l16.97">       {</span>
<a href="#l16.98"></a><span id="l16.98">         if (this.range) {</span>
<a href="#l16.99"></a><span id="l16.99">           // Iterate through the cookies and delete any created after our cutoff.</span>
<a href="#l16.100"></a><span id="l16.100">           var cookiesEnum = Services.cookies.enumerator;</span>
<a href="#l16.101"></a><span id="l16.101">           while (cookiesEnum.hasMoreElements()) {</span>
<a href="#l16.102"></a><span id="l16.102">             var cookie = cookiesEnum.getNext().QueryInterface(Ci.nsICookie2);</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineminus">-            </span>
<a href="#l16.104"></a><span id="l16.104" class="difflineplus">+</span>
<a href="#l16.105"></a><span id="l16.105">             if (cookie.creationTime &gt; this.range[0])</span>
<a href="#l16.106"></a><span id="l16.106">               // This cookie was created after our cutoff, clear it</span>
<a href="#l16.107"></a><span id="l16.107">               Services.cookies.remove(cookie.host, cookie.name, cookie.path, false);</span>
<a href="#l16.108"></a><span id="l16.108">           }</span>
<a href="#l16.109"></a><span id="l16.109">         }</span>
<a href="#l16.110"></a><span id="l16.110">         else {</span>
<a href="#l16.111"></a><span id="l16.111">           // Remove everything</span>
<a href="#l16.112"></a><span id="l16.112">           Services.cookies.removeAll();</span>
<a href="#l16.113"></a><span id="l16.113" class="difflineat">@@ -174,17 +174,17 @@ Sanitizer.TIMESPAN_TODAY      = 4;</span>
<a href="#l16.114"></a><span id="l16.114"> // in the uSec-since-epoch format that PRTime likes.  If we should</span>
<a href="#l16.115"></a><span id="l16.115"> // clear everything, return null.  Use ts if it is defined; otherwise</span>
<a href="#l16.116"></a><span id="l16.116"> // use the timeSpan pref.</span>
<a href="#l16.117"></a><span id="l16.117"> Sanitizer.getClearRange = function (ts) {</span>
<a href="#l16.118"></a><span id="l16.118">   if (ts === undefined)</span>
<a href="#l16.119"></a><span id="l16.119">     ts = Sanitizer.prefs.getIntPref(&quot;timeSpan&quot;);</span>
<a href="#l16.120"></a><span id="l16.120">   if (ts === Sanitizer.TIMESPAN_EVERYTHING)</span>
<a href="#l16.121"></a><span id="l16.121">     return null;</span>
<a href="#l16.122"></a><span id="l16.122" class="difflineminus">-  </span>
<a href="#l16.123"></a><span id="l16.123" class="difflineplus">+</span>
<a href="#l16.124"></a><span id="l16.124">   // PRTime is microseconds while JS time is milliseconds</span>
<a href="#l16.125"></a><span id="l16.125">   var endDate = Date.now() * 1000;</span>
<a href="#l16.126"></a><span id="l16.126">   switch (ts) {</span>
<a href="#l16.127"></a><span id="l16.127">     case Sanitizer.TIMESPAN_HOUR :</span>
<a href="#l16.128"></a><span id="l16.128">       var startDate = endDate - 3600000000; // 1*60*60*1000000</span>
<a href="#l16.129"></a><span id="l16.129">       break;</span>
<a href="#l16.130"></a><span id="l16.130">     case Sanitizer.TIMESPAN_2HOURS :</span>
<a href="#l16.131"></a><span id="l16.131">       startDate = endDate - 7200000000; // 2*60*60*1000000</span>
<a href="#l16.132"></a><span id="l16.132" class="difflineat">@@ -201,48 +201,48 @@ Sanitizer.getClearRange = function (ts) </span>
<a href="#l16.133"></a><span id="l16.133">       break;</span>
<a href="#l16.134"></a><span id="l16.134">     default:</span>
<a href="#l16.135"></a><span id="l16.135">       throw &quot;Invalid time span for clear private data: &quot; + ts;</span>
<a href="#l16.136"></a><span id="l16.136">   }</span>
<a href="#l16.137"></a><span id="l16.137">   return [startDate, endDate];</span>
<a href="#l16.138"></a><span id="l16.138"> };</span>
<a href="#l16.139"></a><span id="l16.139"> </span>
<a href="#l16.140"></a><span id="l16.140"> Sanitizer._prefs = null;</span>
<a href="#l16.141"></a><span id="l16.141" class="difflineminus">-Sanitizer.__defineGetter__(&quot;prefs&quot;, function() </span>
<a href="#l16.142"></a><span id="l16.142" class="difflineplus">+Sanitizer.__defineGetter__(&quot;prefs&quot;, function()</span>
<a href="#l16.143"></a><span id="l16.143"> {</span>
<a href="#l16.144"></a><span id="l16.144">   return Sanitizer._prefs ? Sanitizer._prefs</span>
<a href="#l16.145"></a><span id="l16.145">     : Sanitizer._prefs = Services.prefs</span>
<a href="#l16.146"></a><span id="l16.146">                                  .getBranch(Sanitizer</span>
<a href="#l16.147"></a><span id="l16.147">                                  .prefDomain);</span>
<a href="#l16.148"></a><span id="l16.148"> });</span>
<a href="#l16.149"></a><span id="l16.149"> </span>
<a href="#l16.150"></a><span id="l16.150"> // Shows sanitization UI</span>
<a href="#l16.151"></a><span id="l16.151" class="difflineminus">-Sanitizer.showUI = function(aParentWindow) </span>
<a href="#l16.152"></a><span id="l16.152" class="difflineplus">+Sanitizer.showUI = function(aParentWindow)</span>
<a href="#l16.153"></a><span id="l16.153"> {</span>
<a href="#l16.154"></a><span id="l16.154"> Services.ww.openWindow(Application.platformIsMac ? null : aParentWindow,</span>
<a href="#l16.155"></a><span id="l16.155"> &quot;chrome://messenger/content/sanitize.xul&quot;,</span>
<a href="#l16.156"></a><span id="l16.156">                 &quot;Sanitize&quot;,</span>
<a href="#l16.157"></a><span id="l16.157">                 &quot;chrome,titlebar,dialog,centerscreen,modal&quot;,</span>
<a href="#l16.158"></a><span id="l16.158" class="difflineminus">-                null);                </span>
<a href="#l16.159"></a><span id="l16.159" class="difflineplus">+                null);</span>
<a href="#l16.160"></a><span id="l16.160"> };</span>
<a href="#l16.161"></a><span id="l16.161"> </span>
<a href="#l16.162"></a><span id="l16.162" class="difflineminus">-/** </span>
<a href="#l16.163"></a><span id="l16.163" class="difflineminus">- * Deletes privacy sensitive data in a batch, optionally showing the </span>
<a href="#l16.164"></a><span id="l16.164" class="difflineplus">+/**</span>
<a href="#l16.165"></a><span id="l16.165" class="difflineplus">+ * Deletes privacy sensitive data in a batch, optionally showing the</span>
<a href="#l16.166"></a><span id="l16.166">  * sanitize UI, according to user preferences</span>
<a href="#l16.167"></a><span id="l16.167">  */</span>
<a href="#l16.168"></a><span id="l16.168" class="difflineminus">-Sanitizer.sanitize = function(aParentWindow) </span>
<a href="#l16.169"></a><span id="l16.169" class="difflineplus">+Sanitizer.sanitize = function(aParentWindow)</span>
<a href="#l16.170"></a><span id="l16.170"> {</span>
<a href="#l16.171"></a><span id="l16.171">   Sanitizer.showUI(aParentWindow);</span>
<a href="#l16.172"></a><span id="l16.172"> };</span>
<a href="#l16.173"></a><span id="l16.173"> </span>
<a href="#l16.174"></a><span id="l16.174"> // this is called on startup and shutdown, to perform pending sanitizations</span>
<a href="#l16.175"></a><span id="l16.175" class="difflineminus">-Sanitizer._checkAndSanitize = function() </span>
<a href="#l16.176"></a><span id="l16.176" class="difflineplus">+Sanitizer._checkAndSanitize = function()</span>
<a href="#l16.177"></a><span id="l16.177"> {</span>
<a href="#l16.178"></a><span id="l16.178">   const prefs = Sanitizer.prefs;</span>
<a href="#l16.179"></a><span id="l16.179" class="difflineminus">-  if (prefs.getBoolPref(Sanitizer.prefShutdown) &amp;&amp; </span>
<a href="#l16.180"></a><span id="l16.180" class="difflineplus">+  if (prefs.getBoolPref(Sanitizer.prefShutdown) &amp;&amp;</span>
<a href="#l16.181"></a><span id="l16.181">       !prefs.prefHasUserValue(Sanitizer.prefDidShutdown)) {</span>
<a href="#l16.182"></a><span id="l16.182">     // this is a shutdown or a startup after an unclean exit</span>
<a href="#l16.183"></a><span id="l16.183">     var s = new Sanitizer();</span>
<a href="#l16.184"></a><span id="l16.184">     s.prefDomain = &quot;privacy.clearOnShutdown.&quot;;</span>
<a href="#l16.185"></a><span id="l16.185">     s.sanitize() || // sanitize() returns null on full success</span>
<a href="#l16.186"></a><span id="l16.186">       prefs.setBoolPref(Sanitizer.prefDidShutdown, true);</span>
<a href="#l16.187"></a><span id="l16.187">   }</span>
<a href="#l16.188"></a><span id="l16.188"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/base/content/threadPane.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/base/content/threadPane.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -36,17 +36,17 @@ function ThreadPaneOnClick(event)</span>
<a href="#l17.4"></a><span id="l17.4">       if (row.value == -1)</span>
<a href="#l17.5"></a><span id="l17.5">        return;</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7">       // if the cell is in a &quot;cycler&quot; column</span>
<a href="#l17.8"></a><span id="l17.8">       // or if the user double clicked on the twisty,</span>
<a href="#l17.9"></a><span id="l17.9">       // don't open the message in a new window</span>
<a href="#l17.10"></a><span id="l17.10">       if (event.detail == 2 &amp;&amp; !col.value.cycler &amp;&amp; (childElt.value != &quot;twisty&quot;)) {</span>
<a href="#l17.11"></a><span id="l17.11">         ThreadPaneDoubleClick();</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-        // double clicking should not toggle the open / close state of the </span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+        // double clicking should not toggle the open / close state of the</span>
<a href="#l17.14"></a><span id="l17.14">         // thread.  this will happen if we don't prevent the event from</span>
<a href="#l17.15"></a><span id="l17.15">         // bubbling to the default handler in tree.xml</span>
<a href="#l17.16"></a><span id="l17.16">         event.stopPropagation();</span>
<a href="#l17.17"></a><span id="l17.17">       }</span>
<a href="#l17.18"></a><span id="l17.18">       else if (col.value.id == &quot;junkStatusCol&quot;) {</span>
<a href="#l17.19"></a><span id="l17.19">         MsgJunkMailInfo(true);</span>
<a href="#l17.20"></a><span id="l17.20">       }</span>
<a href="#l17.21"></a><span id="l17.21">       else if (col.value.id == &quot;threadCol&quot; &amp;&amp; !event.shiftKey &amp;&amp;</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineat">@@ -84,17 +84,17 @@ function HandleColumnClick(columnID)</span>
<a href="#l17.23"></a><span id="l17.23">   } else {</span>
<a href="#l17.24"></a><span id="l17.24">     // If the column isn't in the map, check and see if it's a custom column</span>
<a href="#l17.25"></a><span id="l17.25">     try {</span>
<a href="#l17.26"></a><span id="l17.26">       // try to grab the columnHandler (an error is thrown if it does not exist)</span>
<a href="#l17.27"></a><span id="l17.27">       columnHandler = gDBView.getColumnHandler(columnID);</span>
<a href="#l17.28"></a><span id="l17.28"> </span>
<a href="#l17.29"></a><span id="l17.29">       // it exists - set it to be the current custom column</span>
<a href="#l17.30"></a><span id="l17.30">       gDBView.curCustomColumn = columnID;</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-        </span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+</span>
<a href="#l17.33"></a><span id="l17.33">       sortType = &quot;byCustom&quot;;</span>
<a href="#l17.34"></a><span id="l17.34">     } catch(err) {</span>
<a href="#l17.35"></a><span id="l17.35">         dump(&quot;unsupported sort column: &quot; + columnID + &quot; - no custom handler installed. (Error was: &quot; + err + &quot;)\n&quot;);</span>
<a href="#l17.36"></a><span id="l17.36">         return; // bail out</span>
<a href="#l17.37"></a><span id="l17.37">     }</span>
<a href="#l17.38"></a><span id="l17.38">   }</span>
<a href="#l17.39"></a><span id="l17.39"> </span>
<a href="#l17.40"></a><span id="l17.40">   let viewWrapper = gFolderDisplay.view;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/base/content/utilityOverlay.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/base/content/utilityOverlay.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -50,17 +50,17 @@ function goUpdatePasteMenuItems()</span>
<a href="#l18.4"></a><span id="l18.4"> // update Find As You Type menu items, they rely on focus</span>
<a href="#l18.5"></a><span id="l18.5"> function goUpdateFindTypeMenuItems()</span>
<a href="#l18.6"></a><span id="l18.6"> {</span>
<a href="#l18.7"></a><span id="l18.7">   goUpdateCommand('cmd_findTypeText');</span>
<a href="#l18.8"></a><span id="l18.8">   goUpdateCommand('cmd_findTypeLinks');</span>
<a href="#l18.9"></a><span id="l18.9"> }</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11"> // Gather all descendent text under given document node.</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-function gatherTextUnder ( root ) </span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+function gatherTextUnder ( root )</span>
<a href="#l18.14"></a><span id="l18.14"> {</span>
<a href="#l18.15"></a><span id="l18.15">   var text = &quot;&quot;;</span>
<a href="#l18.16"></a><span id="l18.16">   var node = root.firstChild;</span>
<a href="#l18.17"></a><span id="l18.17">   var depth = 1;</span>
<a href="#l18.18"></a><span id="l18.18">   while ( node &amp;&amp; depth &gt; 0 ) {</span>
<a href="#l18.19"></a><span id="l18.19">     // See if this node is text.</span>
<a href="#l18.20"></a><span id="l18.20">     if ( node.nodeType == Node.TEXT_NODE ) {</span>
<a href="#l18.21"></a><span id="l18.21">       // Add this text to our collection.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/base/modules/distribution.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/base/modules/distribution.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -51,49 +51,49 @@ var TBDistCustomizer = {</span>
<a href="#l19.4"></a><span id="l19.4">     defaults.setComplexValue(&quot;distribution.about&quot;,</span>
<a href="#l19.5"></a><span id="l19.5">                              Ci.nsISupportsString, partnerAbout);</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7">     if (sections[&quot;Preferences&quot;]) {</span>
<a href="#l19.8"></a><span id="l19.8">       let keys = this._ini.getKeys(&quot;Preferences&quot;);</span>
<a href="#l19.9"></a><span id="l19.9">       while (keys.hasMore()) {</span>
<a href="#l19.10"></a><span id="l19.10">         let key = keys.getNext();</span>
<a href="#l19.11"></a><span id="l19.11">         try {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-          // Get the string value of the key </span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+          // Get the string value of the key</span>
<a href="#l19.14"></a><span id="l19.14">           let value = eval(this._ini.getString(&quot;Preferences&quot;, key));</span>
<a href="#l19.15"></a><span id="l19.15">           // After determining what type it is, set the pref</span>
<a href="#l19.16"></a><span id="l19.16">           switch (typeof value) {</span>
<a href="#l19.17"></a><span id="l19.17">           case &quot;boolean&quot;:</span>
<a href="#l19.18"></a><span id="l19.18">             defaults.setBoolPref(key, value);</span>
<a href="#l19.19"></a><span id="l19.19">             break;</span>
<a href="#l19.20"></a><span id="l19.20">           case &quot;number&quot;:</span>
<a href="#l19.21"></a><span id="l19.21">             defaults.setIntPref(key, value);</span>
<a href="#l19.22"></a><span id="l19.22">             break;</span>
<a href="#l19.23"></a><span id="l19.23">           case &quot;string&quot;:</span>
<a href="#l19.24"></a><span id="l19.24">             defaults.setCharPref(key, value);</span>
<a href="#l19.25"></a><span id="l19.25">             break;</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineminus">-          case &quot;undefined&quot;: </span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+          case &quot;undefined&quot;:</span>
<a href="#l19.28"></a><span id="l19.28">             // In case of custom pref created by partner</span>
<a href="#l19.29"></a><span id="l19.29">             defaults.setCharPref(key, value);</span>
<a href="#l19.30"></a><span id="l19.30">             break;</span>
<a href="#l19.31"></a><span id="l19.31">           }</span>
<a href="#l19.32"></a><span id="l19.32">         } catch (e) {</span>
<a href="#l19.33"></a><span id="l19.33">           Cu.reportError(e);</span>
<a href="#l19.34"></a><span id="l19.34">         }</span>
<a href="#l19.35"></a><span id="l19.35">       }</span>
<a href="#l19.36"></a><span id="l19.36">     }</span>
<a href="#l19.37"></a><span id="l19.37"> </span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-    // Set the prefs in the other sections </span>
<a href="#l19.39"></a><span id="l19.39" class="difflineplus">+    // Set the prefs in the other sections</span>
<a href="#l19.40"></a><span id="l19.40"> </span>
<a href="#l19.41"></a><span id="l19.41">     // We eval() the localizable prefs as well (even though they'll</span>
<a href="#l19.42"></a><span id="l19.42">     // always get set as a string) to keep the INI format consistent:</span>
<a href="#l19.43"></a><span id="l19.43">     // string prefs always need to be in quotes</span>
<a href="#l19.44"></a><span id="l19.44"> </span>
<a href="#l19.45"></a><span id="l19.45">     let localizedStr = Cc[&quot;@mozilla.org/pref-localizedstring;1&quot;]</span>
<a href="#l19.46"></a><span id="l19.46">                          .createInstance(Ci.nsIPrefLocalizedString);</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">-    </span>
<a href="#l19.48"></a><span id="l19.48" class="difflineplus">+</span>
<a href="#l19.49"></a><span id="l19.49">     if (sections[&quot;LocalizablePreferences&quot;]) {</span>
<a href="#l19.50"></a><span id="l19.50">       let keys = this._ini.getKeys(&quot;LocalizablePreferences&quot;);</span>
<a href="#l19.51"></a><span id="l19.51">       while (keys.hasMore()) {</span>
<a href="#l19.52"></a><span id="l19.52">         let key = keys.getNext();</span>
<a href="#l19.53"></a><span id="l19.53">         try {</span>
<a href="#l19.54"></a><span id="l19.54">           let value = eval(this._ini.getString(&quot;LocalizablePreferences&quot;, key));</span>
<a href="#l19.55"></a><span id="l19.55">           value = value.replace(&quot;%LOCALE%&quot;, this._locale, &quot;g&quot;);</span>
<a href="#l19.56"></a><span id="l19.56">           localizedStr.data = &quot;data:text/plain,&quot; + key + &quot;=&quot; + value;</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineat">@@ -135,17 +135,17 @@ XPCOMUtils.defineLazyGetter(TBDistCustom</span>
<a href="#l19.58"></a><span id="l19.58">     return ini;</span>
<a href="#l19.59"></a><span id="l19.59"> });</span>
<a href="#l19.60"></a><span id="l19.60"> </span>
<a href="#l19.61"></a><span id="l19.61"> XPCOMUtils.defineLazyGetter(TBDistCustomizer, &quot;_locale&quot;,</span>
<a href="#l19.62"></a><span id="l19.62">   function TBDistCustomizer_get__locale() {</span>
<a href="#l19.63"></a><span id="l19.63">     let locale;</span>
<a href="#l19.64"></a><span id="l19.64">     try {</span>
<a href="#l19.65"></a><span id="l19.65">       locale = Services.prefs.getCharPref(&quot;general.useragent.locale&quot;);</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-    } </span>
<a href="#l19.67"></a><span id="l19.67" class="difflineplus">+    }</span>
<a href="#l19.68"></a><span id="l19.68">     catch (e) {</span>
<a href="#l19.69"></a><span id="l19.69">       locale = &quot;en-US&quot;;</span>
<a href="#l19.70"></a><span id="l19.70">     }</span>
<a href="#l19.71"></a><span id="l19.71">     return locale;</span>
<a href="#l19.72"></a><span id="l19.72"> });</span>
<a href="#l19.73"></a><span id="l19.73"> </span>
<a href="#l19.74"></a><span id="l19.74"> function enumToObject(UTF8Enumerator) {</span>
<a href="#l19.75"></a><span id="l19.75">   let ret = {};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/base/test/unit/test_mailGlue_distribution.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/base/test/unit/test_mailGlue_distribution.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -43,40 +43,40 @@ function run_test()</span>
<a href="#l20.4"></a><span id="l20.4"> </span>
<a href="#l20.5"></a><span id="l20.5">   // Set the prefs</span>
<a href="#l20.6"></a><span id="l20.6">   TBDistCustomizer.applyPrefDefaults();</span>
<a href="#l20.7"></a><span id="l20.7"> </span>
<a href="#l20.8"></a><span id="l20.8">   let testIni = Cc[&quot;@mozilla.org/xpcom/ini-parser-factory;1&quot;]</span>
<a href="#l20.9"></a><span id="l20.9">                   .getService(Ci.nsIINIParserFactory)</span>
<a href="#l20.10"></a><span id="l20.10">                   .createINIParser(testDistributionFile);</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  // Now check that prefs were set - test the Global prefs against the </span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  // Now check that prefs were set - test the Global prefs against the</span>
<a href="#l20.14"></a><span id="l20.14">   // Global section in the ini file</span>
<a href="#l20.15"></a><span id="l20.15">   let iniValue = testIni.getString(&quot;Global&quot;, &quot;id&quot;);</span>
<a href="#l20.16"></a><span id="l20.16">   let pref = Services.prefs.getCharPref(&quot;distribution.id&quot;);</span>
<a href="#l20.17"></a><span id="l20.17">   do_check_eq(iniValue, pref);</span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19">   iniValue = testIni.getString(&quot;Global&quot;, &quot;version&quot;);</span>
<a href="#l20.20"></a><span id="l20.20">   pref = Services.prefs.getCharPref(&quot;distribution.version&quot;);</span>
<a href="#l20.21"></a><span id="l20.21">   do_check_eq(iniValue, pref);</span>
<a href="#l20.22"></a><span id="l20.22"> </span>
<a href="#l20.23"></a><span id="l20.23">   let aboutLocale;</span>
<a href="#l20.24"></a><span id="l20.24">   try {</span>
<a href="#l20.25"></a><span id="l20.25">     aboutLocale = testIni.getString(&quot;Global&quot;, &quot;about.en-US&quot;);</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-  } </span>
<a href="#l20.27"></a><span id="l20.27" class="difflineplus">+  }</span>
<a href="#l20.28"></a><span id="l20.28">   catch (e) {</span>
<a href="#l20.29"></a><span id="l20.29">     Components.utils.reportError(e);</span>
<a href="#l20.30"></a><span id="l20.30">   }</span>
<a href="#l20.31"></a><span id="l20.31"> </span>
<a href="#l20.32"></a><span id="l20.32">   if (aboutLocale == undefined)</span>
<a href="#l20.33"></a><span id="l20.33">     aboutLocale = testIni.getString(&quot;Global&quot;, &quot;about&quot;);</span>
<a href="#l20.34"></a><span id="l20.34"> </span>
<a href="#l20.35"></a><span id="l20.35">   pref = Services.prefs.getCharPref(&quot;distribution.about&quot;);</span>
<a href="#l20.36"></a><span id="l20.36">   do_check_eq(aboutLocale, pref);</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-  </span>
<a href="#l20.38"></a><span id="l20.38" class="difflineplus">+</span>
<a href="#l20.39"></a><span id="l20.39">   // Test Preferences section</span>
<a href="#l20.40"></a><span id="l20.40">   let s = &quot;Preferences&quot;;</span>
<a href="#l20.41"></a><span id="l20.41">   let keys = testIni.getKeys(s);</span>
<a href="#l20.42"></a><span id="l20.42">   while (keys.hasMore()) {</span>
<a href="#l20.43"></a><span id="l20.43">     let key = keys.getNext();</span>
<a href="#l20.44"></a><span id="l20.44">     let value = eval(testIni.getString(s, key));</span>
<a href="#l20.45"></a><span id="l20.45">     switch (typeof value) {</span>
<a href="#l20.46"></a><span id="l20.46">     case &quot;boolean&quot;:</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineat">@@ -87,34 +87,34 @@ function run_test()</span>
<a href="#l20.48"></a><span id="l20.48">         break;</span>
<a href="#l20.49"></a><span id="l20.49">     case &quot;string&quot;:</span>
<a href="#l20.50"></a><span id="l20.50">         do_check_eq(value, Services.prefs.getCharPref(key));</span>
<a href="#l20.51"></a><span id="l20.51">         break;</span>
<a href="#l20.52"></a><span id="l20.52">     default:</span>
<a href="#l20.53"></a><span id="l20.53">         do_throw(&quot;The preference &quot; + key + &quot; is of unknown type: &quot; + typeof value);</span>
<a href="#l20.54"></a><span id="l20.54">     }</span>
<a href="#l20.55"></a><span id="l20.55">   }</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineminus">-  </span>
<a href="#l20.57"></a><span id="l20.57" class="difflineplus">+</span>
<a href="#l20.58"></a><span id="l20.58">   // Test the LocalizablePreferences-[locale] section</span>
<a href="#l20.59"></a><span id="l20.59">   // Add any prefs found in it to the overrides array</span>
<a href="#l20.60"></a><span id="l20.60">   let overrides = [];</span>
<a href="#l20.61"></a><span id="l20.61">   s = &quot;LocalizablePreferences-en-US&quot;;</span>
<a href="#l20.62"></a><span id="l20.62">   keys = testIni.getKeys(s);</span>
<a href="#l20.63"></a><span id="l20.63">   while (keys.hasMore()) {</span>
<a href="#l20.64"></a><span id="l20.64">     let key = keys.getNext();</span>
<a href="#l20.65"></a><span id="l20.65">     let value = eval(testIni.getString(s, key));</span>
<a href="#l20.66"></a><span id="l20.66">     value = &quot;data:text/plain,&quot; + key + &quot;=&quot; + value;</span>
<a href="#l20.67"></a><span id="l20.67">     do_check_eq(value, Services.prefs.getCharPref(key));</span>
<a href="#l20.68"></a><span id="l20.68">     overrides.push(key);</span>
<a href="#l20.69"></a><span id="l20.69">   }</span>
<a href="#l20.70"></a><span id="l20.70"> </span>
<a href="#l20.71"></a><span id="l20.71">   // Test the LocalizablePreferences section</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineminus">-  // Any prefs here that aren't found in overrides are not overriden </span>
<a href="#l20.73"></a><span id="l20.73" class="difflineplus">+  // Any prefs here that aren't found in overrides are not overriden</span>
<a href="#l20.74"></a><span id="l20.74">   //   by LocalizablePrefs-[locale] and should be tested</span>
<a href="#l20.75"></a><span id="l20.75" class="difflineminus">-  s = &quot;LocalizablePreferences&quot;; </span>
<a href="#l20.76"></a><span id="l20.76" class="difflineplus">+  s = &quot;LocalizablePreferences&quot;;</span>
<a href="#l20.77"></a><span id="l20.77">   keys = testIni.getKeys(s);</span>
<a href="#l20.78"></a><span id="l20.78">   while (keys.hasMore()) {</span>
<a href="#l20.79"></a><span id="l20.79">     let key = keys.getNext();</span>
<a href="#l20.80"></a><span id="l20.80">     if (overrides.indexOf(key) == -1) {</span>
<a href="#l20.81"></a><span id="l20.81">       let value = eval(testIni.getString(s, key));</span>
<a href="#l20.82"></a><span id="l20.82">       value =  value.replace(&quot;%LOCALE%&quot;, &quot;en-US&quot;, &quot;g&quot;);</span>
<a href="#l20.83"></a><span id="l20.83">       value = &quot;data:text/plain,&quot; + key + &quot;=&quot; + value;</span>
<a href="#l20.84"></a><span id="l20.84">       do_check_eq(value, Services.prefs.getCharPref(key));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/base/test/unit/test_viewWrapper_virtualFolder.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/base/test/unit/test_viewWrapper_virtualFolder.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -374,17 +374,17 @@ function test_virtual_folder_mail_new_ha</span>
<a href="#l21.4"></a><span id="l21.4">   let [fooThree, nopeThree] = make_new_sets_in_folders(folders,</span>
<a href="#l21.5"></a><span id="l21.5">     [{subject: &quot;foo 3&quot;}, {}]);</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7">   if (!virtFolder.hasNewMessages)</span>
<a href="#l21.8"></a><span id="l21.8">     do_throw(&quot;saved search should have new messages!&quot;);</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10">   if (!folder.hasNewMessages)</span>
<a href="#l21.11"></a><span id="l21.11">     do_throw(&quot;folder should have new messages!&quot;);</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  </span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+</span>
<a href="#l21.14"></a><span id="l21.14">   viewWrapper.close();</span>
<a href="#l21.15"></a><span id="l21.15">   folder.msgDatabase = null;</span>
<a href="#l21.16"></a><span id="l21.16">   folder.clearNewMessages();</span>
<a href="#l21.17"></a><span id="l21.17">   if (virtFolder.hasNewMessages)</span>
<a href="#l21.18"></a><span id="l21.18">     do_throw(&quot;saved search should not have new messages!&quot;);</span>
<a href="#l21.19"></a><span id="l21.19"> }</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21"> var tests = [</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/base/test/unit/test_windows_font_migration.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/base/test/unit/test_windows_font_migration.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -89,17 +89,17 @@ var gCTVerifier = makeVerifier({</span>
<a href="#l22.4"></a><span id="l22.4">   fixedSize: 14,</span>
<a href="#l22.5"></a><span id="l22.5">   migrated: true,</span>
<a href="#l22.6"></a><span id="l22.6"> });</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8"> /**</span>
<a href="#l22.9"></a><span id="l22.9">  * Windows versions to pretend we're running this on. Each value of this</span>
<a href="#l22.10"></a><span id="l22.10">  * dictionary is a pair: [Windows version, verifier for this version].</span>
<a href="#l22.11"></a><span id="l22.11">  */</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-const kWindowsVersions = {  </span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+const kWindowsVersions = {</span>
<a href="#l22.14"></a><span id="l22.14">   // Windows XP</span>
<a href="#l22.15"></a><span id="l22.15">   &quot;xp&quot;: [5.1, gNonCTVerifier],</span>
<a href="#l22.16"></a><span id="l22.16">   // Windows Vista</span>
<a href="#l22.17"></a><span id="l22.17">   &quot;vista&quot;: [6.0, gCTVerifier],</span>
<a href="#l22.18"></a><span id="l22.18"> };</span>
<a href="#l22.19"></a><span id="l22.19"> </span>
<a href="#l22.20"></a><span id="l22.20"> function set_windows_version(aVersion) {</span>
<a href="#l22.21"></a><span id="l22.21">   let sysInfo = Cc[&quot;@mozilla.org/system-info;1&quot;]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/components/about-support/content/crashes.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/components/about-support/content/crashes.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -68,17 +68,17 @@ function populateCrashesSection() {</span>
<a href="#l23.4"></a><span id="l23.4">     tr.appendChild(cellDate);</span>
<a href="#l23.5"></a><span id="l23.5">     crashesBody.appendChild(tr);</span>
<a href="#l23.6"></a><span id="l23.6">   }</span>
<a href="#l23.7"></a><span id="l23.7"> }</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9"> /**</span>
<a href="#l23.10"></a><span id="l23.10">  * Returns a plaintext representation of extension data.</span>
<a href="#l23.11"></a><span id="l23.11">  */</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">- </span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+</span>
<a href="#l23.14"></a><span id="l23.14"> function getCrashesText(aIndent) {</span>
<a href="#l23.15"></a><span id="l23.15">   let crashesData = &quot;&quot;;</span>
<a href="#l23.16"></a><span id="l23.16">   let recentCrashesSubmitted = document.querySelectorAll(&quot;#crashes-tbody &gt; tr&quot;);</span>
<a href="#l23.17"></a><span id="l23.17">   for (let i = 0; i &lt; recentCrashesSubmitted.length; i++)</span>
<a href="#l23.18"></a><span id="l23.18">   {</span>
<a href="#l23.19"></a><span id="l23.19">     let tds = recentCrashesSubmitted.item(i).querySelectorAll(&quot;td&quot;);</span>
<a href="#l23.20"></a><span id="l23.20">     crashesData += aIndent.repeat(2) + tds.item(0).firstChild.href +</span>
<a href="#l23.21"></a><span id="l23.21">                    &quot; (&quot; + tds.item(1).textContent + &quot;)\n&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/components/about-support/content/gfx.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/components/about-support/content/gfx.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -16,17 +16,17 @@ function populateGraphicsSection() {</span>
<a href="#l24.4"></a><span id="l24.4">   {</span>
<a href="#l24.5"></a><span id="l24.5">     if(value) {</span>
<a href="#l24.6"></a><span id="l24.6">       table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l24.7"></a><span id="l24.7">         createHeader(bundle.GetStringFromName(name)),</span>
<a href="#l24.8"></a><span id="l24.8">         createElement(&quot;td&quot;, value),</span>
<a href="#l24.9"></a><span id="l24.9">       ]));</span>
<a href="#l24.10"></a><span id="l24.10">     }</span>
<a href="#l24.11"></a><span id="l24.11">   }</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  </span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+</span>
<a href="#l24.14"></a><span id="l24.14">   function pushLiteralInfoRow(table, name, value)</span>
<a href="#l24.15"></a><span id="l24.15">   {</span>
<a href="#l24.16"></a><span id="l24.16">     table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l24.17"></a><span id="l24.17">       createHeader(name),</span>
<a href="#l24.18"></a><span id="l24.18">       createElement(&quot;td&quot;, value),</span>
<a href="#l24.19"></a><span id="l24.19">     ]));</span>
<a href="#l24.20"></a><span id="l24.20">   }</span>
<a href="#l24.21"></a><span id="l24.21"> </span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -115,25 +115,25 @@ function populateGraphicsSection() {</span>
<a href="#l24.23"></a><span id="l24.23">         d2dEnabled = gfxInfo.D2DEnabled;</span>
<a href="#l24.24"></a><span id="l24.24">       } catch(e) {}</span>
<a href="#l24.25"></a><span id="l24.25">       pushFeatureInfoRow(trGraphics, &quot;direct2DEnabled&quot;, gfxInfo.FEATURE_DIRECT2D, d2dEnabled);</span>
<a href="#l24.26"></a><span id="l24.26"> </span>
<a href="#l24.27"></a><span id="l24.27">       var dwEnabled = &quot;false&quot;;</span>
<a href="#l24.28"></a><span id="l24.28">       try {</span>
<a href="#l24.29"></a><span id="l24.29">         dwEnabled = gfxInfo.DWriteEnabled + &quot; (&quot; + gfxInfo.DWriteVersion + &quot;)&quot;;</span>
<a href="#l24.30"></a><span id="l24.30">       } catch(e) {}</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-      pushInfoRow(trGraphics, &quot;directWriteEnabled&quot;, dwEnabled);  </span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+      pushInfoRow(trGraphics, &quot;directWriteEnabled&quot;, dwEnabled);</span>
<a href="#l24.33"></a><span id="l24.33"> </span>
<a href="#l24.34"></a><span id="l24.34">       var cleartypeParams = &quot;&quot;;</span>
<a href="#l24.35"></a><span id="l24.35">       try {</span>
<a href="#l24.36"></a><span id="l24.36">         cleartypeParams = gfxInfo.cleartypeParameters;</span>
<a href="#l24.37"></a><span id="l24.37">       } catch(e) {</span>
<a href="#l24.38"></a><span id="l24.38">         cleartypeParams = bundle.GetStringFromName(&quot;clearTypeParametersNotFound&quot;);</span>
<a href="#l24.39"></a><span id="l24.39">       }</span>
<a href="#l24.40"></a><span id="l24.40" class="difflineminus">-      pushInfoRow(trGraphics, &quot;clearTypeParameters&quot;, cleartypeParams);  </span>
<a href="#l24.41"></a><span id="l24.41" class="difflineplus">+      pushInfoRow(trGraphics, &quot;clearTypeParameters&quot;, cleartypeParams);</span>
<a href="#l24.42"></a><span id="l24.42">     }</span>
<a href="#l24.43"></a><span id="l24.43"> </span>
<a href="#l24.44"></a><span id="l24.44"> #endif</span>
<a href="#l24.45"></a><span id="l24.45"> </span>
<a href="#l24.46"></a><span id="l24.46">     var webglrenderer;</span>
<a href="#l24.47"></a><span id="l24.47">     var webglenabled;</span>
<a href="#l24.48"></a><span id="l24.48">     try {</span>
<a href="#l24.49"></a><span id="l24.49">       webglrenderer = gfxInfo.getWebGLParameter(&quot;full-renderer&quot;);</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineat">@@ -150,26 +150,26 @@ function populateGraphicsSection() {</span>
<a href="#l24.51"></a><span id="l24.51">         gfxInfo.getFeatureStatus(gfxInfo.FEATURE_WEBGL_OPENGL) == gfxInfo.FEATURE_NO_INFO)</span>
<a href="#l24.52"></a><span id="l24.52">       webglfeature = gfxInfo.FEATURE_WEBGL_OPENGL;</span>
<a href="#l24.53"></a><span id="l24.53"> #else</span>
<a href="#l24.54"></a><span id="l24.54">     var webglfeature = gfxInfo.FEATURE_WEBGL_OPENGL;</span>
<a href="#l24.55"></a><span id="l24.55"> #endif</span>
<a href="#l24.56"></a><span id="l24.56">     pushFeatureInfoRow(trGraphics, &quot;webglRenderer&quot;, webglfeature, webglenabled, webglrenderer);</span>
<a href="#l24.57"></a><span id="l24.57"> </span>
<a href="#l24.58"></a><span id="l24.58">     appendChildren(graphics_tbody, trGraphics);</span>
<a href="#l24.59"></a><span id="l24.59" class="difflineminus">-    </span>
<a href="#l24.60"></a><span id="l24.60" class="difflineplus">+</span>
<a href="#l24.61"></a><span id="l24.61">     // display registered graphics properties</span>
<a href="#l24.62"></a><span id="l24.62">     let graphics_info_properties = document.getElementById(&quot;graphics-info-properties&quot;);</span>
<a href="#l24.63"></a><span id="l24.63">     var info = gfxInfo.getInfo();</span>
<a href="#l24.64"></a><span id="l24.64">     let trGraphicsProperties = [];</span>
<a href="#l24.65"></a><span id="l24.65">     for (var property in info) {</span>
<a href="#l24.66"></a><span id="l24.66">       pushLiteralInfoRow(trGraphicsProperties, property, info[property]);</span>
<a href="#l24.67"></a><span id="l24.67">     }</span>
<a href="#l24.68"></a><span id="l24.68">     appendChildren(graphics_info_properties, trGraphicsProperties);</span>
<a href="#l24.69"></a><span id="l24.69" class="difflineminus">-   </span>
<a href="#l24.70"></a><span id="l24.70" class="difflineplus">+</span>
<a href="#l24.71"></a><span id="l24.71">     // display any failures that have occurred</span>
<a href="#l24.72"></a><span id="l24.72">     let graphics_failures_tbody = document.getElementById(&quot;graphics-failures-tbody&quot;);</span>
<a href="#l24.73"></a><span id="l24.73">     let trGraphicsFailures = gfxInfo.getFailures().map(function (value)</span>
<a href="#l24.74"></a><span id="l24.74">         createParentElement(&quot;tr&quot;, [</span>
<a href="#l24.75"></a><span id="l24.75">             createElement(&quot;td&quot;, value)</span>
<a href="#l24.76"></a><span id="l24.76">         ])</span>
<a href="#l24.77"></a><span id="l24.77">     );</span>
<a href="#l24.78"></a><span id="l24.78">     appendChildren(graphics_failures_tbody, trGraphicsFailures);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/components/about-support/content/init.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/components/about-support/content/init.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -65,17 +65,17 @@ window.onload = function () {</span>
<a href="#l25.4"></a><span id="l25.4">   populatePreferencesSection();</span>
<a href="#l25.5"></a><span id="l25.5"> #ifdef MOZ_CRASHREPORTER</span>
<a href="#l25.6"></a><span id="l25.6">   populateCrashesSection();</span>
<a href="#l25.7"></a><span id="l25.7"> #endif</span>
<a href="#l25.8"></a><span id="l25.8">   populateExtensionsSection();</span>
<a href="#l25.9"></a><span id="l25.9">   populateGraphicsSection();</span>
<a href="#l25.10"></a><span id="l25.10">   populateJavaScriptSection();</span>
<a href="#l25.11"></a><span id="l25.11">   populateAccessibilitySection();</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  populateLibVersionsSection();  </span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  populateLibVersionsSection();</span>
<a href="#l25.14"></a><span id="l25.14"> }</span>
<a href="#l25.15"></a><span id="l25.15"> </span>
<a href="#l25.16"></a><span id="l25.16"> function onShowPrivateDataChange(aCheckbox) {</span>
<a href="#l25.17"></a><span id="l25.17">   document.getElementById(&quot;about-support-private&quot;).disabled = aCheckbox.checked;</span>
<a href="#l25.18"></a><span id="l25.18"> }</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20"> function createParentElement(tagName, childElems) {</span>
<a href="#l25.21"></a><span id="l25.21">   let elem = document.createElement(tagName);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/components/about-support/content/libversions.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/components/about-support/content/libversions.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -6,24 +6,24 @@ function populateLibVersionsSection() {</span>
<a href="#l26.4"></a><span id="l26.4">   function pushInfoRow(table, name, value, value2)</span>
<a href="#l26.5"></a><span id="l26.5">   {</span>
<a href="#l26.6"></a><span id="l26.6">     table.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l26.7"></a><span id="l26.7">       createElement(&quot;td&quot;, name),</span>
<a href="#l26.8"></a><span id="l26.8">       createElement(&quot;td&quot;, value),</span>
<a href="#l26.9"></a><span id="l26.9">       createElement(&quot;td&quot;, value2),</span>
<a href="#l26.10"></a><span id="l26.10">     ]));</span>
<a href="#l26.11"></a><span id="l26.11">   }</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-    </span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+</span>
<a href="#l26.14"></a><span id="l26.14">   var v = null;</span>
<a href="#l26.15"></a><span id="l26.15">   try { // just to be safe</span>
<a href="#l26.16"></a><span id="l26.16">     v = Cc[&quot;@mozilla.org/security/nssversion;1&quot;].getService(Ci.nsINSSVersion);</span>
<a href="#l26.17"></a><span id="l26.17">   } catch(e) {}</span>
<a href="#l26.18"></a><span id="l26.18">   if (!v)</span>
<a href="#l26.19"></a><span id="l26.19">     return;</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineminus">-    </span>
<a href="#l26.21"></a><span id="l26.21" class="difflineplus">+</span>
<a href="#l26.22"></a><span id="l26.22">   let bundle = Services.strings.createBundle(&quot;chrome://global/locale/aboutSupport.properties&quot;);</span>
<a href="#l26.23"></a><span id="l26.23">   let libversions_tbody = document.getElementById(&quot;libversions-tbody&quot;);</span>
<a href="#l26.24"></a><span id="l26.24"> </span>
<a href="#l26.25"></a><span id="l26.25">   let trLibs = [];</span>
<a href="#l26.26"></a><span id="l26.26">   trLibs.push(createParentElement(&quot;tr&quot;, [</span>
<a href="#l26.27"></a><span id="l26.27">     createElement(&quot;th&quot;, &quot;&quot;),</span>
<a href="#l26.28"></a><span id="l26.28">     createElement(&quot;th&quot;, bundle.GetStringFromName(&quot;minLibVersions&quot;)),</span>
<a href="#l26.29"></a><span id="l26.29">     createElement(&quot;th&quot;, bundle.GetStringFromName(&quot;loadedLibVersions&quot;)),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/components/activity/modules/moveCopy.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/components/activity/modules/moveCopy.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -256,17 +256,17 @@ let moveCopyModule =</span>
<a href="#l27.4"></a><span id="l27.4">     event.addSubject(aSrcFolder);</span>
<a href="#l27.5"></a><span id="l27.5">     event.addSubject(aDestFolder);</span>
<a href="#l27.6"></a><span id="l27.6">     event.iconClass = aMove ? &quot;moveMail&quot; : &quot;copyMail&quot;;</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8">     this.activityMgr.addActivity(event);</span>
<a href="#l27.9"></a><span id="l27.9">   },</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11">   folderRenamed: function(aOrigFolder, aNewFolder) {</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    this.log.info(&quot;in folderRenamed, aOrigFolder = &quot;+ aOrigFolder.prettiestName+&quot;, aNewFolder = &quot;+ </span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    this.log.info(&quot;in folderRenamed, aOrigFolder = &quot;+ aOrigFolder.prettiestName+&quot;, aNewFolder = &quot;+</span>
<a href="#l27.14"></a><span id="l27.14">              aNewFolder.prettiestName);</span>
<a href="#l27.15"></a><span id="l27.15"> </span>
<a href="#l27.16"></a><span id="l27.16">     let displayText;</span>
<a href="#l27.17"></a><span id="l27.17">     let statusText = aNewFolder.server.prettyName;</span>
<a href="#l27.18"></a><span id="l27.18"> </span>
<a href="#l27.19"></a><span id="l27.19">     // Display a different message depending on whether we moved the folder</span>
<a href="#l27.20"></a><span id="l27.20">     // to the trash or actually renamed the folder.</span>
<a href="#l27.21"></a><span id="l27.21">     if (aNewFolder.isSpecialFolder(nsMsgFolderFlags.Trash, true))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/components/activity/nsActivity.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/components/activity/nsActivity.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -303,21 +303,21 @@ function nsActivityWarning()</span>
<a href="#l28.4"></a><span id="l28.4"> }</span>
<a href="#l28.5"></a><span id="l28.5"> </span>
<a href="#l28.6"></a><span id="l28.6"> nsActivityWarning.prototype = {</span>
<a href="#l28.7"></a><span id="l28.7">   __proto__: nsActivity.prototype,</span>
<a href="#l28.8"></a><span id="l28.8">   classID: Components.ID(&quot;968BAC9E-798B-4952-B384-86B21B8CC71E&quot;),</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10">   //////////////////////////////////////////////////////////////////////////////</span>
<a href="#l28.11"></a><span id="l28.11">   //// nsIActivityWarning</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  </span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+</span>
<a href="#l28.14"></a><span id="l28.14">   recoveryTipText: &quot;&quot;,</span>
<a href="#l28.15"></a><span id="l28.15">   _time: 0,</span>
<a href="#l28.16"></a><span id="l28.16">   _recoveryHandler: null,</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineminus">-  </span>
<a href="#l28.18"></a><span id="l28.18" class="difflineplus">+</span>
<a href="#l28.19"></a><span id="l28.19">   init: function(aWarningText, aInitiator, aRecoveryTipText) {</span>
<a href="#l28.20"></a><span id="l28.20">     this.displayText = aWarningText;</span>
<a href="#l28.21"></a><span id="l28.21">     this.initiator = aInitiator;</span>
<a href="#l28.22"></a><span id="l28.22">     this.recoveryTipText = aRecoveryTipText;</span>
<a href="#l28.23"></a><span id="l28.23">     this._time = Date.now();</span>
<a href="#l28.24"></a><span id="l28.24">   },</span>
<a href="#l28.25"></a><span id="l28.25"> </span>
<a href="#l28.26"></a><span id="l28.26">   get recoveryHandler() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/components/activity/nsActivityManager.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/components/activity/nsActivityManager.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -26,56 +26,56 @@ nsActivityManager.prototype = {</span>
<a href="#l29.4"></a><span id="l29.4">   //////////////////////////////////////////////////////////////////////////////</span>
<a href="#l29.5"></a><span id="l29.5">   //// nsIActivityManager</span>
<a href="#l29.6"></a><span id="l29.6">   log: Log4Moz.getConfiguredLogger(&quot;nsActivityManager&quot;),</span>
<a href="#l29.7"></a><span id="l29.7">   _listeners: [],</span>
<a href="#l29.8"></a><span id="l29.8">   _processCount: 0,</span>
<a href="#l29.9"></a><span id="l29.9">   _db: null,</span>
<a href="#l29.10"></a><span id="l29.10">   _idCounter: 1,</span>
<a href="#l29.11"></a><span id="l29.11">   _activities: {},</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  </span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+</span>
<a href="#l29.14"></a><span id="l29.14">   get processCount() {</span>
<a href="#l29.15"></a><span id="l29.15">     let count = 0;</span>
<a href="#l29.16"></a><span id="l29.16">     for each(let [, value] in Iterator(this._activities)) {</span>
<a href="#l29.17"></a><span id="l29.17">       if (value instanceof Ci.nsIActivityProcess)</span>
<a href="#l29.18"></a><span id="l29.18">         count++;</span>
<a href="#l29.19"></a><span id="l29.19">     }</span>
<a href="#l29.20"></a><span id="l29.20" class="difflineminus">-    </span>
<a href="#l29.21"></a><span id="l29.21" class="difflineplus">+</span>
<a href="#l29.22"></a><span id="l29.22">     return count;</span>
<a href="#l29.23"></a><span id="l29.23">   },</span>
<a href="#l29.24"></a><span id="l29.24" class="difflineminus">-  </span>
<a href="#l29.25"></a><span id="l29.25" class="difflineplus">+</span>
<a href="#l29.26"></a><span id="l29.26">   getProcessesByContext: function(aContextType, aContextObj, aCount) {</span>
<a href="#l29.27"></a><span id="l29.27">     let list = [];</span>
<a href="#l29.28"></a><span id="l29.28">     for each (let [, activity] in Iterator(this._activities)) {</span>
<a href="#l29.29"></a><span id="l29.29">       if (activity instanceof Ci.nsIActivityProcess &amp;&amp;</span>
<a href="#l29.30"></a><span id="l29.30">           activity.contextType == aContextType &amp;&amp;</span>
<a href="#l29.31"></a><span id="l29.31">           activity.contextObj == aContextObj) {</span>
<a href="#l29.32"></a><span id="l29.32">         list.push(activity);</span>
<a href="#l29.33"></a><span id="l29.33">       }</span>
<a href="#l29.34"></a><span id="l29.34">     }</span>
<a href="#l29.35"></a><span id="l29.35" class="difflineminus">-    </span>
<a href="#l29.36"></a><span id="l29.36" class="difflineplus">+</span>
<a href="#l29.37"></a><span id="l29.37">     aCount.value = list.length;</span>
<a href="#l29.38"></a><span id="l29.38">     return list;</span>
<a href="#l29.39"></a><span id="l29.39">   },</span>
<a href="#l29.40"></a><span id="l29.40" class="difflineminus">-  </span>
<a href="#l29.41"></a><span id="l29.41" class="difflineplus">+</span>
<a href="#l29.42"></a><span id="l29.42">   get db() {</span>
<a href="#l29.43"></a><span id="l29.43">     return null;</span>
<a href="#l29.44"></a><span id="l29.44">   },</span>
<a href="#l29.45"></a><span id="l29.45" class="difflineminus">-  </span>
<a href="#l29.46"></a><span id="l29.46" class="difflineplus">+</span>
<a href="#l29.47"></a><span id="l29.47">   get nextId() {</span>
<a href="#l29.48"></a><span id="l29.48">     return this._idCounter++;</span>
<a href="#l29.49"></a><span id="l29.49">   },</span>
<a href="#l29.50"></a><span id="l29.50" class="difflineminus">-    </span>
<a href="#l29.51"></a><span id="l29.51" class="difflineplus">+</span>
<a href="#l29.52"></a><span id="l29.52">   addActivity: function (aActivity) {</span>
<a href="#l29.53"></a><span id="l29.53">     try {</span>
<a href="#l29.54"></a><span id="l29.54">       this.log.info(&quot;adding Activity&quot;);</span>
<a href="#l29.55"></a><span id="l29.55">       // get the next valid id for this activity</span>
<a href="#l29.56"></a><span id="l29.56">       let id = this.nextId;</span>
<a href="#l29.57"></a><span id="l29.57">       aActivity.id = id;</span>
<a href="#l29.58"></a><span id="l29.58" class="difflineminus">-      </span>
<a href="#l29.59"></a><span id="l29.59" class="difflineplus">+</span>
<a href="#l29.60"></a><span id="l29.60">       // add activity into the activities table</span>
<a href="#l29.61"></a><span id="l29.61">       this._activities[id] = aActivity;</span>
<a href="#l29.62"></a><span id="l29.62">       // notify all the listeners</span>
<a href="#l29.63"></a><span id="l29.63">       for each (let [, value] in Iterator(this._listeners)) {</span>
<a href="#l29.64"></a><span id="l29.64">         try {</span>
<a href="#l29.65"></a><span id="l29.65">           value.onAddedActivity(id, aActivity);</span>
<a href="#l29.66"></a><span id="l29.66">         }</span>
<a href="#l29.67"></a><span id="l29.67">         catch(e) {</span>
<a href="#l29.68"></a><span id="l29.68" class="difflineat">@@ -85,31 +85,31 @@ nsActivityManager.prototype = {</span>
<a href="#l29.69"></a><span id="l29.69">       return id;</span>
<a href="#l29.70"></a><span id="l29.70">     } catch (e) {</span>
<a href="#l29.71"></a><span id="l29.71">       // for some reason exceptions don't end up on the console if we don't</span>
<a href="#l29.72"></a><span id="l29.72">       // explicitly log them.</span>
<a href="#l29.73"></a><span id="l29.73">       this.log.error(&quot;Exception: &quot; + e);</span>
<a href="#l29.74"></a><span id="l29.74">       throw(e);</span>
<a href="#l29.75"></a><span id="l29.75">     }</span>
<a href="#l29.76"></a><span id="l29.76">   },</span>
<a href="#l29.77"></a><span id="l29.77" class="difflineminus">-  </span>
<a href="#l29.78"></a><span id="l29.78" class="difflineplus">+</span>
<a href="#l29.79"></a><span id="l29.79">   removeActivity: function (aID) {</span>
<a href="#l29.80"></a><span id="l29.80">     let activity = this._activities[aID];</span>
<a href="#l29.81"></a><span id="l29.81" class="difflineminus">- </span>
<a href="#l29.82"></a><span id="l29.82" class="difflineplus">+</span>
<a href="#l29.83"></a><span id="l29.83">     if (!activity)</span>
<a href="#l29.84"></a><span id="l29.84">       throw Cr.NS_ERROR_NOT_AVAILABLE;</span>
<a href="#l29.85"></a><span id="l29.85" class="difflineminus">-    </span>
<a href="#l29.86"></a><span id="l29.86" class="difflineplus">+</span>
<a href="#l29.87"></a><span id="l29.87">     // make sure that the activity is not in-progress state</span>
<a href="#l29.88"></a><span id="l29.88">     if (activity instanceof Ci.nsIActivityProcess &amp;&amp;</span>
<a href="#l29.89"></a><span id="l29.89">         activity.state == Ci.nsIActivityProcess.STATE_INPROGRESS)</span>
<a href="#l29.90"></a><span id="l29.90">       throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l29.91"></a><span id="l29.91" class="difflineminus">-    </span>
<a href="#l29.92"></a><span id="l29.92" class="difflineplus">+</span>
<a href="#l29.93"></a><span id="l29.93">     // remove the activity</span>
<a href="#l29.94"></a><span id="l29.94">     delete this._activities[aID];</span>
<a href="#l29.95"></a><span id="l29.95" class="difflineminus">-    </span>
<a href="#l29.96"></a><span id="l29.96" class="difflineplus">+</span>
<a href="#l29.97"></a><span id="l29.97">     // notify all the listeners</span>
<a href="#l29.98"></a><span id="l29.98">     for each (let [, value] in Iterator(this._listeners)) {</span>
<a href="#l29.99"></a><span id="l29.99">       try {</span>
<a href="#l29.100"></a><span id="l29.100">         value.onRemovedActivity(aID);</span>
<a href="#l29.101"></a><span id="l29.101">       }</span>
<a href="#l29.102"></a><span id="l29.102">       catch(e) {</span>
<a href="#l29.103"></a><span id="l29.103">         // ignore the exception</span>
<a href="#l29.104"></a><span id="l29.104">       }</span>
<a href="#l29.105"></a><span id="l29.105" class="difflineat">@@ -145,34 +145,34 @@ nsActivityManager.prototype = {</span>
<a href="#l29.106"></a><span id="l29.106">   containsActivity: function (aID) {</span>
<a href="#l29.107"></a><span id="l29.107">     return !!this._activities[aID];</span>
<a href="#l29.108"></a><span id="l29.108">   },</span>
<a href="#l29.109"></a><span id="l29.109"> </span>
<a href="#l29.110"></a><span id="l29.110">   getActivities: function(aCount) {</span>
<a href="#l29.111"></a><span id="l29.111">     let list = [];</span>
<a href="#l29.112"></a><span id="l29.112">     for each (let [, value] in Iterator(this._activities))</span>
<a href="#l29.113"></a><span id="l29.113">       list.push(value);</span>
<a href="#l29.114"></a><span id="l29.114" class="difflineminus">-    </span>
<a href="#l29.115"></a><span id="l29.115" class="difflineplus">+</span>
<a href="#l29.116"></a><span id="l29.116">     aCount.value = list.length;</span>
<a href="#l29.117"></a><span id="l29.117">     return list;</span>
<a href="#l29.118"></a><span id="l29.118">   },</span>
<a href="#l29.119"></a><span id="l29.119"> </span>
<a href="#l29.120"></a><span id="l29.120">   addListener: function(aListener) {</span>
<a href="#l29.121"></a><span id="l29.121">     this.log.info(&quot;addListener\n&quot;);</span>
<a href="#l29.122"></a><span id="l29.122">     this._listeners.push(aListener);</span>
<a href="#l29.123"></a><span id="l29.123">   },</span>
<a href="#l29.124"></a><span id="l29.124"> </span>
<a href="#l29.125"></a><span id="l29.125">   removeListener: function(aListener) {</span>
<a href="#l29.126"></a><span id="l29.126">     this.log.info(&quot;removeListener\n&quot;);</span>
<a href="#l29.127"></a><span id="l29.127">     for (let i = 0; i &lt; this._listeners.length; i++) {</span>
<a href="#l29.128"></a><span id="l29.128">       if (this._listeners[i] == aListener)</span>
<a href="#l29.129"></a><span id="l29.129">         this._listeners.splice(i, 1);</span>
<a href="#l29.130"></a><span id="l29.130">     }</span>
<a href="#l29.131"></a><span id="l29.131">   },</span>
<a href="#l29.132"></a><span id="l29.132" class="difflineminus">-  </span>
<a href="#l29.133"></a><span id="l29.133" class="difflineplus">+</span>
<a href="#l29.134"></a><span id="l29.134">   //////////////////////////////////////////////////////////////////////////////</span>
<a href="#l29.135"></a><span id="l29.135">   //// nsISupports</span>
<a href="#l29.136"></a><span id="l29.136"> </span>
<a href="#l29.137"></a><span id="l29.137">   QueryInterface: XPCOMUtils.generateQI([Ci.nsIActivityManager])</span>
<a href="#l29.138"></a><span id="l29.138"> };</span>
<a href="#l29.139"></a><span id="l29.139"> </span>
<a href="#l29.140"></a><span id="l29.140"> ////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l29.141"></a><span id="l29.141"> //// Module</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -256,17 +256,17 @@ function OnLoadEditCard()</span>
<a href="#l30.4"></a><span id="l30.4">   // check if selectedAB is a writeable</span>
<a href="#l30.5"></a><span id="l30.5">   // if not disable all the fields</span>
<a href="#l30.6"></a><span id="l30.6">   if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0])</span>
<a href="#l30.7"></a><span id="l30.7">   {</span>
<a href="#l30.8"></a><span id="l30.8">     if (&quot;abURI&quot; in window.arguments[0]) {</span>
<a href="#l30.9"></a><span id="l30.9">       var abURI = window.arguments[0].abURI;</span>
<a href="#l30.10"></a><span id="l30.10">       var directory = GetDirectoryFromURI(abURI);</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-      if (directory.readOnly) </span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+      if (directory.readOnly)</span>
<a href="#l30.14"></a><span id="l30.14">       {</span>
<a href="#l30.15"></a><span id="l30.15">         // Set all the editable vcard fields to read only</span>
<a href="#l30.16"></a><span id="l30.16">         for (var i = kVcardFields.length; i-- &gt; 0; )</span>
<a href="#l30.17"></a><span id="l30.17">           document.getElementById(kVcardFields[i][0]).readOnly = true;</span>
<a href="#l30.18"></a><span id="l30.18"> </span>
<a href="#l30.19"></a><span id="l30.19">         // the birthday fields</span>
<a href="#l30.20"></a><span id="l30.20">         document.getElementById(&quot;Birthday&quot;).readOnly = true;</span>
<a href="#l30.21"></a><span id="l30.21">         document.getElementById(&quot;BirthYear&quot;).readOnly = true;</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -767,17 +767,17 @@ function calculateYear(aEvent, aElement)</span>
<a href="#l30.23"></a><span id="l30.23">  *  - Hides the year</span>
<a href="#l30.24"></a><span id="l30.24">  *  - Allows the day and month to be blank</span>
<a href="#l30.25"></a><span id="l30.25">  * NOTE:</span>
<a href="#l30.26"></a><span id="l30.26">  * The datepicker's date, month, year, and dateValue properties are not always</span>
<a href="#l30.27"></a><span id="l30.27">  * what appear physically to the user in the datepicker fields.</span>
<a href="#l30.28"></a><span id="l30.28">  * If any field is blank, the corresponding property is either the previous</span>
<a href="#l30.29"></a><span id="l30.29">  * value if there was one since the card was opened or the relevant portion of</span>
<a href="#l30.30"></a><span id="l30.30">  * the current date.</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">- * </span>
<a href="#l30.32"></a><span id="l30.32" class="difflineplus">+ *</span>
<a href="#l30.33"></a><span id="l30.33">  * To get the displayed values, get the value of the individual field, such as</span>
<a href="#l30.34"></a><span id="l30.34">  * datepicker.yyyyField.value where yyyy is &quot;year&quot;, &quot;month&quot;, or &quot;date&quot; for the</span>
<a href="#l30.35"></a><span id="l30.35">  * year, month, and day, respectively.</span>
<a href="#l30.36"></a><span id="l30.36">  * If the value is null, then the field is blank and vice versa.</span>
<a href="#l30.37"></a><span id="l30.37">  * @param aDatepicker The datepicker to modify.</span>
<a href="#l30.38"></a><span id="l30.38">  */</span>
<a href="#l30.39"></a><span id="l30.39"> function modifyDatepicker(aDatepicker) {</span>
<a href="#l30.40"></a><span id="l30.40">   // collapse the year field and separator</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineat">@@ -995,17 +995,17 @@ function removePhoto(aName) {</span>
<a href="#l30.42"></a><span id="l30.42">  *</span>
<a href="#l30.43"></a><span id="l30.43">  * @return true if the OK button was clicked and a photo was chosen</span>
<a href="#l30.44"></a><span id="l30.44">  */</span>
<a href="#l30.45"></a><span id="l30.45"> function browsePhoto() {</span>
<a href="#l30.46"></a><span id="l30.46">   var nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l30.47"></a><span id="l30.47">   var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l30.48"></a><span id="l30.48">                      .createInstance(nsIFilePicker);</span>
<a href="#l30.49"></a><span id="l30.49">   fp.init(window, gAddressBookBundle.getString(&quot;browsePhoto&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineminus">-  </span>
<a href="#l30.51"></a><span id="l30.51" class="difflineplus">+</span>
<a href="#l30.52"></a><span id="l30.52">   // Add All Files &amp; Image Files filters and select the latter</span>
<a href="#l30.53"></a><span id="l30.53">   fp.appendFilters(nsIFilePicker.filterImages);</span>
<a href="#l30.54"></a><span id="l30.54">   fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l30.55"></a><span id="l30.55"> </span>
<a href="#l30.56"></a><span id="l30.56">   if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l30.57"></a><span id="l30.57">     document.getElementById(&quot;PhotoFile&quot;).file = fp.file;</span>
<a href="#l30.58"></a><span id="l30.58">     let photoType = document.getElementById(&quot;FilePhotoType&quot;).value;</span>
<a href="#l30.59"></a><span id="l30.59">     onSwitchPhotoType(photoType);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/components/addrbook/content/abContactsPanel.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/components/addrbook/content/abContactsPanel.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -32,48 +32,48 @@ function contactsListOnClick(event)</span>
<a href="#l31.4"></a><span id="l31.4">     addSelectedAddresses('addr_to');</span>
<a href="#l31.5"></a><span id="l31.5">   }</span>
<a href="#l31.6"></a><span id="l31.6"> }</span>
<a href="#l31.7"></a><span id="l31.7"> </span>
<a href="#l31.8"></a><span id="l31.8"> function addSelectedAddresses(recipientType)</span>
<a href="#l31.9"></a><span id="l31.9"> {</span>
<a href="#l31.10"></a><span id="l31.10">   var cards = GetSelectedAbCards();</span>
<a href="#l31.11"></a><span id="l31.11">   var count = cards.length;</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">- </span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+</span>
<a href="#l31.14"></a><span id="l31.14"> </span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-  for (var i = 0; i &lt; count; i++) </span>
<a href="#l31.16"></a><span id="l31.16" class="difflineplus">+  for (var i = 0; i &lt; count; i++)</span>
<a href="#l31.17"></a><span id="l31.17">   {</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineminus">-    // turn each card into a properly formatted address </span>
<a href="#l31.19"></a><span id="l31.19" class="difflineplus">+    // turn each card into a properly formatted address</span>
<a href="#l31.20"></a><span id="l31.20">     var address = GenerateAddressFromCard(cards[i]);</span>
<a href="#l31.21"></a><span id="l31.21">     if (address != &quot;&quot;)</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineminus">-      parent.AddRecipient(recipientType, address);     </span>
<a href="#l31.23"></a><span id="l31.23" class="difflineplus">+      parent.AddRecipient(recipientType, address);</span>
<a href="#l31.24"></a><span id="l31.24">   }</span>
<a href="#l31.25"></a><span id="l31.25"> }</span>
<a href="#l31.26"></a><span id="l31.26"> </span>
<a href="#l31.27"></a><span id="l31.27"> function AddressBookMenuListChange()</span>
<a href="#l31.28"></a><span id="l31.28"> {</span>
<a href="#l31.29"></a><span id="l31.29">   var searchInput = document.getElementById(&quot;peopleSearchInput&quot;);</span>
<a href="#l31.30"></a><span id="l31.30">   if (searchInput.value &amp;&amp; !searchInput.showingSearchCriteria)</span>
<a href="#l31.31"></a><span id="l31.31">     onEnterInSearchBar();</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineminus">-  else </span>
<a href="#l31.33"></a><span id="l31.33" class="difflineplus">+  else</span>
<a href="#l31.34"></a><span id="l31.34">     ChangeDirectoryByURI(document.getElementById('addressbookList').value);</span>
<a href="#l31.35"></a><span id="l31.35"> }</span>
<a href="#l31.36"></a><span id="l31.36"> </span>
<a href="#l31.37"></a><span id="l31.37"> function AbPanelOnComposerClose()</span>
<a href="#l31.38"></a><span id="l31.38"> {</span>
<a href="#l31.39"></a><span id="l31.39">   CloseAbView();</span>
<a href="#l31.40"></a><span id="l31.40">   onAbClearSearch();</span>
<a href="#l31.41"></a><span id="l31.41"> }</span>
<a href="#l31.42"></a><span id="l31.42"> </span>
<a href="#l31.43"></a><span id="l31.43"> function AbPanelOnComposerReOpen()</span>
<a href="#l31.44"></a><span id="l31.44"> {</span>
<a href="#l31.45"></a><span id="l31.45">   SetAbView(GetSelectedDirectory());</span>
<a href="#l31.46"></a><span id="l31.46"> }</span>
<a href="#l31.47"></a><span id="l31.47"> </span>
<a href="#l31.48"></a><span id="l31.48" class="difflineminus">-function AbPanelLoad() </span>
<a href="#l31.49"></a><span id="l31.49" class="difflineplus">+function AbPanelLoad()</span>
<a href="#l31.50"></a><span id="l31.50"> {</span>
<a href="#l31.51"></a><span id="l31.51">   InitCommonJS();</span>
<a href="#l31.52"></a><span id="l31.52"> </span>
<a href="#l31.53"></a><span id="l31.53">   document.title = parent.document.getElementById(&quot;sidebar-title&quot;).value;</span>
<a href="#l31.54"></a><span id="l31.54"> </span>
<a href="#l31.55"></a><span id="l31.55">   var abPopup = document.getElementById('addressbookList');</span>
<a href="#l31.56"></a><span id="l31.56"> </span>
<a href="#l31.57"></a><span id="l31.57">   // Reselect the persisted address book if possible, if not just select the</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineat">@@ -93,43 +93,43 @@ function AbPanelLoad()</span>
<a href="#l31.59"></a><span id="l31.59"> function AbPanelUnload()</span>
<a href="#l31.60"></a><span id="l31.60"> {</span>
<a href="#l31.61"></a><span id="l31.61">   parent.removeEventListener(&quot;compose-window-close&quot;, AbPanelOnComposerClose, true);</span>
<a href="#l31.62"></a><span id="l31.62">   parent.removeEventListener(&quot;compose-window-reopen&quot;, AbPanelOnComposerReOpen, true);</span>
<a href="#l31.63"></a><span id="l31.63"> </span>
<a href="#l31.64"></a><span id="l31.64">   CloseAbView();</span>
<a href="#l31.65"></a><span id="l31.65"> }</span>
<a href="#l31.66"></a><span id="l31.66"> </span>
<a href="#l31.67"></a><span id="l31.67" class="difflineminus">-function AbPanelNewCard() </span>
<a href="#l31.68"></a><span id="l31.68" class="difflineplus">+function AbPanelNewCard()</span>
<a href="#l31.69"></a><span id="l31.69"> {</span>
<a href="#l31.70"></a><span id="l31.70">   goNewCardDialog(abList.value);</span>
<a href="#l31.71"></a><span id="l31.71"> }</span>
<a href="#l31.72"></a><span id="l31.72"> </span>
<a href="#l31.73"></a><span id="l31.73" class="difflineminus">-function AbPanelNewList() </span>
<a href="#l31.74"></a><span id="l31.74" class="difflineplus">+function AbPanelNewList()</span>
<a href="#l31.75"></a><span id="l31.75"> {</span>
<a href="#l31.76"></a><span id="l31.76">   goNewListDialog(abList.value);</span>
<a href="#l31.77"></a><span id="l31.77"> }</span>
<a href="#l31.78"></a><span id="l31.78"> </span>
<a href="#l31.79"></a><span id="l31.79" class="difflineminus">-function ResultsPaneSelectionChanged() </span>
<a href="#l31.80"></a><span id="l31.80" class="difflineplus">+function ResultsPaneSelectionChanged()</span>
<a href="#l31.81"></a><span id="l31.81"> {</span>
<a href="#l31.82"></a><span id="l31.82">   // do nothing for ab panel</span>
<a href="#l31.83"></a><span id="l31.83"> }</span>
<a href="#l31.84"></a><span id="l31.84"> </span>
<a href="#l31.85"></a><span id="l31.85" class="difflineminus">-function OnClickedCard() </span>
<a href="#l31.86"></a><span id="l31.86" class="difflineplus">+function OnClickedCard()</span>
<a href="#l31.87"></a><span id="l31.87"> {</span>
<a href="#l31.88"></a><span id="l31.88">   // do nothing for ab panel</span>
<a href="#l31.89"></a><span id="l31.89"> }</span>
<a href="#l31.90"></a><span id="l31.90"> </span>
<a href="#l31.91"></a><span id="l31.91" class="difflineminus">-function AbResultsPaneDoubleClick(card) </span>
<a href="#l31.92"></a><span id="l31.92" class="difflineplus">+function AbResultsPaneDoubleClick(card)</span>
<a href="#l31.93"></a><span id="l31.93"> {</span>
<a href="#l31.94"></a><span id="l31.94">   // double click for ab panel means &quot;send mail to this person / list&quot;</span>
<a href="#l31.95"></a><span id="l31.95">   AbNewMessage();</span>
<a href="#l31.96"></a><span id="l31.96"> }</span>
<a href="#l31.97"></a><span id="l31.97"> </span>
<a href="#l31.98"></a><span id="l31.98" class="difflineminus">-function UpdateCardView() </span>
<a href="#l31.99"></a><span id="l31.99" class="difflineplus">+function UpdateCardView()</span>
<a href="#l31.100"></a><span id="l31.100"> {</span>
<a href="#l31.101"></a><span id="l31.101">   // do nothing for ab panel</span>
<a href="#l31.102"></a><span id="l31.102"> }</span>
<a href="#l31.103"></a><span id="l31.103"> </span>
<a href="#l31.104"></a><span id="l31.104"> function onEnterInSearchBar()</span>
<a href="#l31.105"></a><span id="l31.105"> {</span>
<a href="#l31.106"></a><span id="l31.106">   if (!gQueryURIFormat)</span>
<a href="#l31.107"></a><span id="l31.107">     gQueryURIFormat = Services.prefs.getComplexValue(&quot;mail.addr_book.quicksearchquery.format&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/components/appIdleManager.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/components/appIdleManager.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -9,17 +9,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5"> const Cc = Components.classes;</span>
<a href="#l32.6"></a><span id="l32.6"> const Ci = Components.interfaces;</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> // This module provides a mechanism to turn window focus and blur events</span>
<a href="#l32.9"></a><span id="l32.9"> // into app idle notifications. If we get a blur notification that is not</span>
<a href="#l32.10"></a><span id="l32.10"> // followed by a focus notification in less than some small number of seconds,</span>
<a href="#l32.11"></a><span id="l32.11"> // then we send a begin app idle notification.</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-// If we get a focus event, and we're app idle, then we send an end app idle </span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+// If we get a focus event, and we're app idle, then we send an end app idle</span>
<a href="#l32.14"></a><span id="l32.14"> // notification.</span>
<a href="#l32.15"></a><span id="l32.15"> // The notification topic is &quot;mail:appIdle&quot;, the values are &quot;idle&quot;, and &quot;back&quot;</span>
<a href="#l32.16"></a><span id="l32.16"> </span>
<a href="#l32.17"></a><span id="l32.17"> var appIdleManager =</span>
<a href="#l32.18"></a><span id="l32.18"> {</span>
<a href="#l32.19"></a><span id="l32.19">   _appIdle: false,</span>
<a href="#l32.20"></a><span id="l32.20">   _timerInterval: 5000, // 5 seconds ought to be plenty</span>
<a href="#l32.21"></a><span id="l32.21">   get _timer()</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineat">@@ -27,26 +27,26 @@ var appIdleManager =</span>
<a href="#l32.23"></a><span id="l32.23">     delete this._timer;</span>
<a href="#l32.24"></a><span id="l32.24">     return this._timer = Cc[&quot;@mozilla.org/timer;1&quot;].createInstance(Ci.nsITimer);</span>
<a href="#l32.25"></a><span id="l32.25">   },</span>
<a href="#l32.26"></a><span id="l32.26"> </span>
<a href="#l32.27"></a><span id="l32.27">   _timerCallback: function()</span>
<a href="#l32.28"></a><span id="l32.28">   {</span>
<a href="#l32.29"></a><span id="l32.29">     appIdleManager._appIdle = true;</span>
<a href="#l32.30"></a><span id="l32.30">     Services.obs.notifyObservers(null, &quot;mail:appIdle&quot;, &quot;idle&quot;);</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-    </span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+</span>
<a href="#l32.33"></a><span id="l32.33">   },</span>
<a href="#l32.34"></a><span id="l32.34" class="difflineminus">-  </span>
<a href="#l32.35"></a><span id="l32.35" class="difflineplus">+</span>
<a href="#l32.36"></a><span id="l32.36">   onBlur: function()</span>
<a href="#l32.37"></a><span id="l32.37">   {</span>
<a href="#l32.38"></a><span id="l32.38">     appIdleManager._timer.initWithCallback(appIdleManager._timerCallback,</span>
<a href="#l32.39"></a><span id="l32.39">                                  appIdleManager._timerInterval,</span>
<a href="#l32.40"></a><span id="l32.40">                                  Ci.nsITimer.TYPE_ONE_SHOT);</span>
<a href="#l32.41"></a><span id="l32.41">    },</span>
<a href="#l32.42"></a><span id="l32.42" class="difflineminus">-  </span>
<a href="#l32.43"></a><span id="l32.43" class="difflineplus">+</span>
<a href="#l32.44"></a><span id="l32.44">   onFocus: function()</span>
<a href="#l32.45"></a><span id="l32.45">   {</span>
<a href="#l32.46"></a><span id="l32.46">     appIdleManager._timer.cancel();</span>
<a href="#l32.47"></a><span id="l32.47">     if (appIdleManager._appIdle)</span>
<a href="#l32.48"></a><span id="l32.48">     {</span>
<a href="#l32.49"></a><span id="l32.49">       appIdleManager._appIdle = false;</span>
<a href="#l32.50"></a><span id="l32.50">       Services.obs.notifyObservers(null, &quot;mail:appIdle&quot;, &quot;back&quot;);</span>
<a href="#l32.51"></a><span id="l32.51">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/components/cloudfile/cloudFileAccounts.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/components/cloudfile/cloudFileAccounts.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -52,17 +52,17 @@ var cloudFileAccounts = {</span>
<a href="#l33.4"></a><span id="l33.4">     }</span>
<a href="#l33.5"></a><span id="l33.5">     return provider;</span>
<a href="#l33.6"></a><span id="l33.6">   },</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8">   _createUniqueAccountKey: function() {</span>
<a href="#l33.9"></a><span id="l33.9">     // Pick a unique account key (TODO: this is a dumb way to do it, probably)</span>
<a href="#l33.10"></a><span id="l33.10">     let existingKeys = this._accountKeys;</span>
<a href="#l33.11"></a><span id="l33.11">     for (let n = 1; ; n++) {</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  </span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+</span>
<a href="#l33.14"></a><span id="l33.14">       if (existingKeys.indexOf(&quot;account&quot; + n) == -1)</span>
<a href="#l33.15"></a><span id="l33.15">         return &quot;account&quot; + n;</span>
<a href="#l33.16"></a><span id="l33.16">     }</span>
<a href="#l33.17"></a><span id="l33.17">   },</span>
<a href="#l33.18"></a><span id="l33.18"> </span>
<a href="#l33.19"></a><span id="l33.19">   /**</span>
<a href="#l33.20"></a><span id="l33.20">    * Ensure that we have the account key for an account. If we already have the</span>
<a href="#l33.21"></a><span id="l33.21">    * key, just return it. If we have the nsIMsgCloudFileProvider, get the key</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/components/cloudfile/nsBox.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/components/cloudfile/nsBox.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -182,17 +182,17 @@ nsBox.prototype = {</span>
<a href="#l34.4"></a><span id="l34.4">     }.bind(this);</span>
<a href="#l34.5"></a><span id="l34.5"> </span>
<a href="#l34.6"></a><span id="l34.6">     let onAuthFailure = function() {</span>
<a href="#l34.7"></a><span id="l34.7">       this._urlListener.onStopRequest(null, null,</span>
<a href="#l34.8"></a><span id="l34.8">                                       Ci.nsIMsgCloudFileProvider.authErr);</span>
<a href="#l34.9"></a><span id="l34.9">     }.bind(this);</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11">     this.log.info(&quot;Checking to see if we're logged in&quot;);</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-    </span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+</span>
<a href="#l34.14"></a><span id="l34.14">     if (!this._loggedIn) {</span>
<a href="#l34.15"></a><span id="l34.15">       let onLoginSuccess = function() {</span>
<a href="#l34.16"></a><span id="l34.16">         this._getUserInfo(onGetUserInfoSuccess, onAuthFailure);</span>
<a href="#l34.17"></a><span id="l34.17">       }.bind(this);</span>
<a href="#l34.18"></a><span id="l34.18"> </span>
<a href="#l34.19"></a><span id="l34.19">       return this.logon(onLoginSuccess, onAuthFailure, true);</span>
<a href="#l34.20"></a><span id="l34.20">     }</span>
<a href="#l34.21"></a><span id="l34.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/components/cloudfile/nsHightail.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/components/cloudfile/nsHightail.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -95,17 +95,17 @@ nsHightail.prototype = {</span>
<a href="#l35.4"></a><span id="l35.4">   /**</span>
<a href="#l35.5"></a><span id="l35.5">    * Private function for retrieving or creating folder</span>
<a href="#l35.6"></a><span id="l35.6">    * on Hightail website for uploading file.</span>
<a href="#l35.7"></a><span id="l35.7">    *</span>
<a href="#l35.8"></a><span id="l35.8">    * @param aCallback called if folder is ready.</span>
<a href="#l35.9"></a><span id="l35.9">    */</span>
<a href="#l35.10"></a><span id="l35.10">   _initFolder: function(aCallback) {</span>
<a href="#l35.11"></a><span id="l35.11">     this.log.info('_initFolder');</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-    </span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+</span>
<a href="#l35.14"></a><span id="l35.14">     let saveFolderId = function(aFolderId) {</span>
<a href="#l35.15"></a><span id="l35.15">       this.log.info('saveFolderId');</span>
<a href="#l35.16"></a><span id="l35.16">       this._folderId = aFolderId;</span>
<a href="#l35.17"></a><span id="l35.17">       if (aCallback)</span>
<a href="#l35.18"></a><span id="l35.18">         aCallback();</span>
<a href="#l35.19"></a><span id="l35.19">     }.bind(this);</span>
<a href="#l35.20"></a><span id="l35.20"> </span>
<a href="#l35.21"></a><span id="l35.21">     let createThunderbirdFolder = function(aParentFolderId) {</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -197,17 +197,17 @@ nsHightail.prototype = {</span>
<a href="#l35.23"></a><span id="l35.23">     }.bind(this);</span>
<a href="#l35.24"></a><span id="l35.24"> </span>
<a href="#l35.25"></a><span id="l35.25">     let onAuthFailure = function() {</span>
<a href="#l35.26"></a><span id="l35.26">       this._urlListener.onStopRequest(null, null,</span>
<a href="#l35.27"></a><span id="l35.27">                                       Ci.nsIMsgCloudFileProvider.authErr);</span>
<a href="#l35.28"></a><span id="l35.28">     }.bind(this);</span>
<a href="#l35.29"></a><span id="l35.29"> </span>
<a href="#l35.30"></a><span id="l35.30">     this.log.info(&quot;Checking to see if we're logged in&quot;);</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-    </span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+</span>
<a href="#l35.33"></a><span id="l35.33">     if (!this._loggedIn) {</span>
<a href="#l35.34"></a><span id="l35.34">       let onLoginSuccess = function() {</span>
<a href="#l35.35"></a><span id="l35.35">         this._getUserInfo(onGetUserInfoSuccess, onAuthFailure);</span>
<a href="#l35.36"></a><span id="l35.36">       }.bind(this);</span>
<a href="#l35.37"></a><span id="l35.37"> </span>
<a href="#l35.38"></a><span id="l35.38">       return this.logon(onLoginSuccess, onAuthFailure, true);</span>
<a href="#l35.39"></a><span id="l35.39">     }</span>
<a href="#l35.40"></a><span id="l35.40"> </span>
<a href="#l35.41"></a><span id="l35.41" class="difflineat">@@ -227,17 +227,17 @@ nsHightail.prototype = {</span>
<a href="#l35.42"></a><span id="l35.42">    *                  states of the upload procedure.</span>
<a href="#l35.43"></a><span id="l35.43">    */</span>
<a href="#l35.44"></a><span id="l35.44">   _finishUpload: function(aFile, aCallback) {</span>
<a href="#l35.45"></a><span id="l35.45">     if (aFile.fileSize &gt; 2147483648)</span>
<a href="#l35.46"></a><span id="l35.46">       return this._fileExceedsLimit(aCallback, '2GB', 0);</span>
<a href="#l35.47"></a><span id="l35.47">     if (aFile.fileSize &gt; this._maxFileSize)</span>
<a href="#l35.48"></a><span id="l35.48">       return this._fileExceedsLimit(aCallback, 'Limit', 0);</span>
<a href="#l35.49"></a><span id="l35.49">     if (aFile.fileSize &gt; this._availableStorage)</span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-      return this._fileExceedsLimit(aCallback, 'Quota', </span>
<a href="#l35.51"></a><span id="l35.51" class="difflineplus">+      return this._fileExceedsLimit(aCallback, 'Quota',</span>
<a href="#l35.52"></a><span id="l35.52">                                     aFile.fileSize + this._fileSpaceUsed);</span>
<a href="#l35.53"></a><span id="l35.53"> </span>
<a href="#l35.54"></a><span id="l35.54">     delete this._userInfo; // force us to update userInfo on every upload.</span>
<a href="#l35.55"></a><span id="l35.55"> </span>
<a href="#l35.56"></a><span id="l35.56">     if (!this._uploader) {</span>
<a href="#l35.57"></a><span id="l35.57">       this._uploader = new nsHightailFileUploader(this, aFile,</span>
<a href="#l35.58"></a><span id="l35.58">                                                    this._uploaderCallback</span>
<a href="#l35.59"></a><span id="l35.59">                                                        .bind(this),</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineat">@@ -271,17 +271,17 @@ nsHightail.prototype = {</span>
<a href="#l35.61"></a><span id="l35.61"> </span>
<a href="#l35.62"></a><span id="l35.62">   /**</span>
<a href="#l35.63"></a><span id="l35.63">    * Cancels an in-progress file upload.</span>
<a href="#l35.64"></a><span id="l35.64">    *</span>
<a href="#l35.65"></a><span id="l35.65">    * @param aFile the nsILocalFile being uploaded.</span>
<a href="#l35.66"></a><span id="l35.66">    */</span>
<a href="#l35.67"></a><span id="l35.67">   cancelFileUpload: function(aFile) {</span>
<a href="#l35.68"></a><span id="l35.68">     this.log.info(&quot;in cancel upload&quot;);</span>
<a href="#l35.69"></a><span id="l35.69" class="difflineminus">-    if (this._uploadingFile != null &amp;&amp; this._uploader != null &amp;&amp; </span>
<a href="#l35.70"></a><span id="l35.70" class="difflineplus">+    if (this._uploadingFile != null &amp;&amp; this._uploader != null &amp;&amp;</span>
<a href="#l35.71"></a><span id="l35.71">         this._uploadingFile.equals(aFile)) {</span>
<a href="#l35.72"></a><span id="l35.72">       this._uploader.cancel();</span>
<a href="#l35.73"></a><span id="l35.73">     }</span>
<a href="#l35.74"></a><span id="l35.74">     else {</span>
<a href="#l35.75"></a><span id="l35.75">       for (let i = 0; i &lt; this._uploads.length; i++)</span>
<a href="#l35.76"></a><span id="l35.76">         if (this._uploads[i].file.equals(aFile)) {</span>
<a href="#l35.77"></a><span id="l35.77">           this._uploads[i].requestObserver.onStopRequest(</span>
<a href="#l35.78"></a><span id="l35.78">             null, null, Ci.nsIMsgCloudFileProvider.uploadCanceled);</span>
<a href="#l35.79"></a><span id="l35.79" class="difflineat">@@ -486,19 +486,19 @@ nsHightail.prototype = {</span>
<a href="#l35.80"></a><span id="l35.80">    *</span>
<a href="#l35.81"></a><span id="l35.81">    * @param aFolderName name of folder</span>
<a href="#l35.82"></a><span id="l35.82">    * @param aParentFolderId id of folder where we are looking</span>
<a href="#l35.83"></a><span id="l35.83">    * @param aNotFoundCallback called if folder is not found</span>
<a href="#l35.84"></a><span id="l35.84">    * @param aFoundCallback called if folder is found</span>
<a href="#l35.85"></a><span id="l35.85">    */</span>
<a href="#l35.86"></a><span id="l35.86">   _findFolder: function(aFolderName, aParentFolderId, aNotFoundCallback,</span>
<a href="#l35.87"></a><span id="l35.87">                         aFoundCallback) {</span>
<a href="#l35.88"></a><span id="l35.88" class="difflineminus">-    </span>
<a href="#l35.89"></a><span id="l35.89" class="difflineplus">+</span>
<a href="#l35.90"></a><span id="l35.90">     this.log.info(&quot;Find folder: &quot; + aFolderName);</span>
<a href="#l35.91"></a><span id="l35.91" class="difflineminus">-    </span>
<a href="#l35.92"></a><span id="l35.92" class="difflineplus">+</span>
<a href="#l35.93"></a><span id="l35.93">     let checkChildFolders = function(folders) {</span>
<a href="#l35.94"></a><span id="l35.94">       this.log.info(&quot;Looking for a child folder&quot;);</span>
<a href="#l35.95"></a><span id="l35.95">       let folderId = 0;</span>
<a href="#l35.96"></a><span id="l35.96">       let folder = folders.folder;</span>
<a href="#l35.97"></a><span id="l35.97">       for (let i in folder) {</span>
<a href="#l35.98"></a><span id="l35.98">         if (folder[i].name == aFolderName) {</span>
<a href="#l35.99"></a><span id="l35.99">           folderId = folder[i].id;</span>
<a href="#l35.100"></a><span id="l35.100">           break;</span>
<a href="#l35.101"></a><span id="l35.101" class="difflineat">@@ -536,17 +536,17 @@ nsHightail.prototype = {</span>
<a href="#l35.102"></a><span id="l35.102">              gServerUrl + kFolderPath + aFolderId + args + kUrlTail,</span>
<a href="#l35.103"></a><span id="l35.103">              true);</span>
<a href="#l35.104"></a><span id="l35.104"> </span>
<a href="#l35.105"></a><span id="l35.105">     req.onload = function() {</span>
<a href="#l35.106"></a><span id="l35.106">       let docResponse = JSON.parse(req.responseText);</span>
<a href="#l35.107"></a><span id="l35.107">       if (req.status &gt;= 200 &amp;&amp; req.status &lt; 400) {</span>
<a href="#l35.108"></a><span id="l35.108">         this.log.info(&quot;request status = &quot; + req + &quot; response = &quot; +</span>
<a href="#l35.109"></a><span id="l35.109">                       req.responseText);</span>
<a href="#l35.110"></a><span id="l35.110" class="difflineminus">-		</span>
<a href="#l35.111"></a><span id="l35.111" class="difflineplus">+</span>
<a href="#l35.112"></a><span id="l35.112">         if (aFoundCallback &amp;&amp; docResponse.folders)</span>
<a href="#l35.113"></a><span id="l35.113">           aFoundCallback(docResponse.folders);</span>
<a href="#l35.114"></a><span id="l35.114">       }</span>
<a href="#l35.115"></a><span id="l35.115">       else {</span>
<a href="#l35.116"></a><span id="l35.116">         this._lastErrorText = docResponse.errorStatus.message;</span>
<a href="#l35.117"></a><span id="l35.117">         this._lastErrorStatus = docResponse.errorStatus.code;</span>
<a href="#l35.118"></a><span id="l35.118">         if (this._lastErrorStatus == 400 &amp;&amp; this._lastErrorText == &quot;Not Found&quot; &amp;&amp; aNotFoundCallback)</span>
<a href="#l35.119"></a><span id="l35.119">           aNotFoundCallback();</span>
<a href="#l35.120"></a><span id="l35.120" class="difflineat">@@ -584,17 +584,17 @@ nsHightail.prototype = {</span>
<a href="#l35.121"></a><span id="l35.121"> </span>
<a href="#l35.122"></a><span id="l35.122">     req.open(&quot;POST&quot;, gServerUrl + kFolderPath.replace(/\/$/, '') + args + kUrlTail, true);</span>
<a href="#l35.123"></a><span id="l35.123"> </span>
<a href="#l35.124"></a><span id="l35.124">     req.onload = function() {</span>
<a href="#l35.125"></a><span id="l35.125">       let docResponse = JSON.parse(req.responseText);</span>
<a href="#l35.126"></a><span id="l35.126">       if (req.status &gt;= 200 &amp;&amp; req.status &lt; 400) {</span>
<a href="#l35.127"></a><span id="l35.127">         this.log.info(&quot;request status = &quot; + req + &quot; response = &quot; +</span>
<a href="#l35.128"></a><span id="l35.128">                       req.responseText);</span>
<a href="#l35.129"></a><span id="l35.129" class="difflineminus">-		</span>
<a href="#l35.130"></a><span id="l35.130" class="difflineplus">+</span>
<a href="#l35.131"></a><span id="l35.131">         if (aSuccessCallback)</span>
<a href="#l35.132"></a><span id="l35.132">           aSuccessCallback(docResponse.id)</span>
<a href="#l35.133"></a><span id="l35.133">       }</span>
<a href="#l35.134"></a><span id="l35.134">       else {</span>
<a href="#l35.135"></a><span id="l35.135">         this._lastErrorText = docResponse.errorStatus.message;</span>
<a href="#l35.136"></a><span id="l35.136">         this._lastErrorStatus = docResponse.errorStatus.code;</span>
<a href="#l35.137"></a><span id="l35.137">       }</span>
<a href="#l35.138"></a><span id="l35.138">     }.bind(this);</span>
<a href="#l35.139"></a><span id="l35.139" class="difflineat">@@ -684,17 +684,17 @@ nsHightail.prototype = {</span>
<a href="#l35.140"></a><span id="l35.140">     let req = Cc[&quot;@mozilla.org/xmlextras/xmlhttprequest;1&quot;]</span>
<a href="#l35.141"></a><span id="l35.141">                 .createInstance(Ci.nsIXMLHttpRequest);</span>
<a href="#l35.142"></a><span id="l35.142"> </span>
<a href="#l35.143"></a><span id="l35.143">     let args = kFolderFilePath + uploadInfo.fileId + &quot;?&quot;;</span>
<a href="#l35.144"></a><span id="l35.144"> </span>
<a href="#l35.145"></a><span id="l35.145">     req.open(&quot;DELETE&quot;, gServerUrl + args + kUrlTail, true);</span>
<a href="#l35.146"></a><span id="l35.146">     this.log.info(&quot;Sending request to: &quot; + gServerUrl + args);</span>
<a href="#l35.147"></a><span id="l35.147"> </span>
<a href="#l35.148"></a><span id="l35.148" class="difflineminus">-    req.onerror = function() {    </span>
<a href="#l35.149"></a><span id="l35.149" class="difflineplus">+    req.onerror = function() {</span>
<a href="#l35.150"></a><span id="l35.150">       let response = JSON.parse(req.responseText);</span>
<a href="#l35.151"></a><span id="l35.151">       this._lastErrorStatus = response.errorStatus.status;</span>
<a href="#l35.152"></a><span id="l35.152">       this._lastErrorText = response.errorStatus.message;</span>
<a href="#l35.153"></a><span id="l35.153">       this.log.error(&quot;There was a problem deleting: &quot; + this._lastErrorText);</span>
<a href="#l35.154"></a><span id="l35.154">       aCallback.onStopRequest(null, null, Cr.NS_ERROR_FAILURE);</span>
<a href="#l35.155"></a><span id="l35.155">     }.bind(this);</span>
<a href="#l35.156"></a><span id="l35.156"> </span>
<a href="#l35.157"></a><span id="l35.157">     req.onload = function() {</span>
<a href="#l35.158"></a><span id="l35.158" class="difflineat">@@ -784,17 +784,17 @@ nsHightail.prototype = {</span>
<a href="#l35.159"></a><span id="l35.159"> </span>
<a href="#l35.160"></a><span id="l35.160">     if (authPrompter.promptPassword(this.displayName, promptString, serverUrl,</span>
<a href="#l35.161"></a><span id="l35.161">                                     authPrompter.SAVE_PASSWORD_PERMANENTLY,</span>
<a href="#l35.162"></a><span id="l35.162">                                     password))</span>
<a href="#l35.163"></a><span id="l35.163">       return password.value;</span>
<a href="#l35.164"></a><span id="l35.164"> </span>
<a href="#l35.165"></a><span id="l35.165">     return &quot;&quot;;</span>
<a href="#l35.166"></a><span id="l35.166">   },</span>
<a href="#l35.167"></a><span id="l35.167" class="difflineminus">- </span>
<a href="#l35.168"></a><span id="l35.168" class="difflineplus">+</span>
<a href="#l35.169"></a><span id="l35.169">   /**</span>
<a href="#l35.170"></a><span id="l35.170">    * Clears any saved Hightail passwords for this instance's account.</span>
<a href="#l35.171"></a><span id="l35.171">    */</span>
<a href="#l35.172"></a><span id="l35.172">   clearPassword: function() {</span>
<a href="#l35.173"></a><span id="l35.173">     let logins = Services.logins.findLogins({}, gServerUrl, null, gServerUrl);</span>
<a href="#l35.174"></a><span id="l35.174">     for each (let loginInfo in logins)</span>
<a href="#l35.175"></a><span id="l35.175">       if (loginInfo.username == this._userName)</span>
<a href="#l35.176"></a><span id="l35.176">         Services.logins.removeLogin(loginInfo);</span>
<a href="#l35.177"></a><span id="l35.177" class="difflineat">@@ -991,18 +991,18 @@ nsHightailFileUploader.prototype = {</span>
<a href="#l35.178"></a><span id="l35.178">     let boundary = &quot;------&quot; + curDate;</span>
<a href="#l35.179"></a><span id="l35.179">     let contentType = &quot;multipart/form-data; boundary=&quot;+ boundary;</span>
<a href="#l35.180"></a><span id="l35.180">     req.setRequestHeader(&quot;Content-Type&quot;, contentType);</span>
<a href="#l35.181"></a><span id="l35.181"> </span>
<a href="#l35.182"></a><span id="l35.182">     let fileContents = &quot;--&quot; + boundary +</span>
<a href="#l35.183"></a><span id="l35.183">       &quot;\r\nContent-Disposition: form-data; name=\&quot;bid\&quot;\r\n\r\n&quot; +</span>
<a href="#l35.184"></a><span id="l35.184">        this._urlInfo.fileId;</span>
<a href="#l35.185"></a><span id="l35.185"> </span>
<a href="#l35.186"></a><span id="l35.186" class="difflineminus">-    let fileName = /^[\040-\176]+$/.test(this.file.leafName) </span>
<a href="#l35.187"></a><span id="l35.187" class="difflineminus">-        ? this.file.leafName </span>
<a href="#l35.188"></a><span id="l35.188" class="difflineplus">+    let fileName = /^[\040-\176]+$/.test(this.file.leafName)</span>
<a href="#l35.189"></a><span id="l35.189" class="difflineplus">+        ? this.file.leafName</span>
<a href="#l35.190"></a><span id="l35.190">         : encodeURIComponent(this.file.leafName);</span>
<a href="#l35.191"></a><span id="l35.191"> </span>
<a href="#l35.192"></a><span id="l35.192">     fileContents += &quot;\r\n--&quot; + boundary +</span>
<a href="#l35.193"></a><span id="l35.193">       &quot;\r\nContent-Disposition: form-data; name=\&quot;fname\&quot;; filename=\&quot;&quot; +</span>
<a href="#l35.194"></a><span id="l35.194">       fileName + &quot;\&quot;\r\nContent-Type: application/octet-stream&quot; +</span>
<a href="#l35.195"></a><span id="l35.195">       &quot;\r\n\r\n&quot;;</span>
<a href="#l35.196"></a><span id="l35.196"> </span>
<a href="#l35.197"></a><span id="l35.197">     // Since js doesn't like binary data in strings, we're going to create</span>
<a href="#l35.198"></a><span id="l35.198" class="difflineat">@@ -1102,17 +1102,17 @@ nsHightailFileUploader.prototype = {</span>
<a href="#l35.199"></a><span id="l35.199">       this.log.info(&quot;commit response = &quot; + response);</span>
<a href="#l35.200"></a><span id="l35.200">       let uploadInfo = JSON.parse(response);</span>
<a href="#l35.201"></a><span id="l35.201"> </span>
<a href="#l35.202"></a><span id="l35.202">       let succeed = function() {</span>
<a href="#l35.203"></a><span id="l35.203">         this.callback(this.requestObserver, Cr.NS_OK);</span>
<a href="#l35.204"></a><span id="l35.204">       }.bind(this);</span>
<a href="#l35.205"></a><span id="l35.205"> </span>
<a href="#l35.206"></a><span id="l35.206">       let failed = function() {</span>
<a href="#l35.207"></a><span id="l35.207" class="difflineminus">-        this.callback(this.requestObserver, this.file.leafName.length &gt; 120 </span>
<a href="#l35.208"></a><span id="l35.208" class="difflineplus">+        this.callback(this.requestObserver, this.file.leafName.length &gt; 120</span>
<a href="#l35.209"></a><span id="l35.209">                       ? Ci.nsIMsgCloudFileProvider.uploadExceedsFileNameLimit</span>
<a href="#l35.210"></a><span id="l35.210">                       : Ci.nsIMsgCloudFileProvider.uploadErr);</span>
<a href="#l35.211"></a><span id="l35.211">       }.bind(this);</span>
<a href="#l35.212"></a><span id="l35.212"> </span>
<a href="#l35.213"></a><span id="l35.213">       if (uploadInfo.errorStatus) {</span>
<a href="#l35.214"></a><span id="l35.214">         this.hightail._lastErrorText = uploadInfo.errorStatus.message;</span>
<a href="#l35.215"></a><span id="l35.215">         this.hightail._lastErrorStatus = uploadInfo.errorStatus.code;</span>
<a href="#l35.216"></a><span id="l35.216">         failed();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -883,17 +883,17 @@ var attachmentBucketController = {</span>
<a href="#l36.4"></a><span id="l36.4"> </span>
<a href="#l36.5"></a><span id="l36.5"> /**</span>
<a href="#l36.6"></a><span id="l36.6">  * Start composing a new message.</span>
<a href="#l36.7"></a><span id="l36.7">  */</span>
<a href="#l36.8"></a><span id="l36.8"> function goOpenNewMessage(aEvent)</span>
<a href="#l36.9"></a><span id="l36.9"> {</span>
<a href="#l36.10"></a><span id="l36.10">   // If aEvent is passed, check if Shift key was pressed for composition in</span>
<a href="#l36.11"></a><span id="l36.11">   // non-default format (HTML vs. plaintext).</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-  let msgCompFormat = (aEvent &amp;&amp; aEvent.shiftKey) ? </span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+  let msgCompFormat = (aEvent &amp;&amp; aEvent.shiftKey) ?</span>
<a href="#l36.14"></a><span id="l36.14">     Components.interfaces.nsIMsgCompFormat.OppositeOfDefault :</span>
<a href="#l36.15"></a><span id="l36.15">     Components.interfaces.nsIMsgCompFormat.Default;</span>
<a href="#l36.16"></a><span id="l36.16"> </span>
<a href="#l36.17"></a><span id="l36.17">   let identity = getCurrentIdentity();</span>
<a href="#l36.18"></a><span id="l36.18">   MailServices.compose.OpenComposeWindow(null, null, null,</span>
<a href="#l36.19"></a><span id="l36.19">     Components.interfaces.nsIMsgCompType.New,</span>
<a href="#l36.20"></a><span id="l36.20">     msgCompFormat, identity, null);</span>
<a href="#l36.21"></a><span id="l36.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/components/mailGlue.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/components/mailGlue.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -73,17 +73,17 @@ MailGlue.prototype = {</span>
<a href="#l37.4"></a><span id="l37.4">   _onProfileStartup: function MailGlue__onProfileStartup() {</span>
<a href="#l37.5"></a><span id="l37.5">     TBDistCustomizer.applyPrefDefaults();</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7">     // handle any migration work that has to happen at profile startup</span>
<a href="#l37.8"></a><span id="l37.8">     MailMigrator.migrateAtProfileStartup();</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10">     // check if we're in safe mode</span>
<a href="#l37.11"></a><span id="l37.11">     if (Services.appinfo.inSafeMode) {</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-      Services.ww.openWindow(null, &quot;chrome://messenger/content/safeMode.xul&quot;, </span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+      Services.ww.openWindow(null, &quot;chrome://messenger/content/safeMode.xul&quot;,</span>
<a href="#l37.14"></a><span id="l37.14">                              &quot;_blank&quot;, &quot;chrome,centerscreen,modal,resizable=no&quot;, null);</span>
<a href="#l37.15"></a><span id="l37.15">     }</span>
<a href="#l37.16"></a><span id="l37.16">   },</span>
<a href="#l37.17"></a><span id="l37.17"> </span>
<a href="#l37.18"></a><span id="l37.18">   _onMailStartupDone: function MailGlue__onMailStartupDone() {</span>
<a href="#l37.19"></a><span id="l37.19">     // On Windows 7 and above, initialize the jump list module.</span>
<a href="#l37.20"></a><span id="l37.20">     const WINTASKBAR_CONTRACTID = &quot;@mozilla.org/windows-taskbar;1&quot;;</span>
<a href="#l37.21"></a><span id="l37.21">     if (WINTASKBAR_CONTRACTID in Cc &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/components/newmailaccount/content/jquery.scrollTo.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/components/newmailaccount/content/jquery.scrollTo.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -16,50 +16,50 @@</span>
<a href="#l38.4"></a><span id="l38.4">  * @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.</span>
<a href="#l38.5"></a><span id="l38.5">  *    The different options for target are:</span>
<a href="#l38.6"></a><span id="l38.6">  *    - A number position (will be applied to all axes).</span>
<a href="#l38.7"></a><span id="l38.7">  *    - A string position ('44', '100px', '+=90', etc ) will be applied to all axes</span>
<a href="#l38.8"></a><span id="l38.8">  *    - A jQuery/DOM element ( logically, child of the element to scroll )</span>
<a href="#l38.9"></a><span id="l38.9">  *    - A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )</span>
<a href="#l38.10"></a><span id="l38.10">  *    - A hash { top:x, left:y }, x and y can be any kind of number/string like above.</span>
<a href="#l38.11"></a><span id="l38.11"> *    - A percentage of the container's dimension/s, for example: 50% to go to the middle.</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">- *    - The string 'max' for go-to-end. </span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+ *    - The string 'max' for go-to-end.</span>
<a href="#l38.14"></a><span id="l38.14">  * @param {Number} duration The OVERALL length of the animation, this argument can be the settings object instead.</span>
<a href="#l38.15"></a><span id="l38.15">  * @param {Object,Function} settings Optional set of settings or the onAfter callback.</span>
<a href="#l38.16"></a><span id="l38.16">  *   @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.</span>
<a href="#l38.17"></a><span id="l38.17">  *   @option {Number} duration The OVERALL length of the animation.</span>
<a href="#l38.18"></a><span id="l38.18">  *   @option {String} easing The easing method for the animation.</span>
<a href="#l38.19"></a><span id="l38.19">  *   @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.</span>
<a href="#l38.20"></a><span id="l38.20">  *   @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.</span>
<a href="#l38.21"></a><span id="l38.21">  *   @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.</span>
<a href="#l38.22"></a><span id="l38.22">  *   @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.</span>
<a href="#l38.23"></a><span id="l38.23" class="difflineminus">- *   @option {Function} onAfter Function to be called after the scrolling ends. </span>
<a href="#l38.24"></a><span id="l38.24" class="difflineplus">+ *   @option {Function} onAfter Function to be called after the scrolling ends.</span>
<a href="#l38.25"></a><span id="l38.25">  *   @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.</span>
<a href="#l38.26"></a><span id="l38.26">  * @return {jQuery} Returns the same jQuery object, for chaining.</span>
<a href="#l38.27"></a><span id="l38.27">  *</span>
<a href="#l38.28"></a><span id="l38.28">  * @desc Scroll to a fixed position</span>
<a href="#l38.29"></a><span id="l38.29">  * @example $('div').scrollTo( 340 );</span>
<a href="#l38.30"></a><span id="l38.30">  *</span>
<a href="#l38.31"></a><span id="l38.31">  * @desc Scroll relatively to the actual position</span>
<a href="#l38.32"></a><span id="l38.32">  * @example $('div').scrollTo( '+=340px', { axis:'y' } );</span>
<a href="#l38.33"></a><span id="l38.33">  *</span>
<a href="#l38.34"></a><span id="l38.34">  * @dec Scroll using a selector (relative to the scrolled element)</span>
<a href="#l38.35"></a><span id="l38.35">  * @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );</span>
<a href="#l38.36"></a><span id="l38.36">  *</span>
<a href="#l38.37"></a><span id="l38.37">  * @ Scroll to a DOM element (same for jQuery object)</span>
<a href="#l38.38"></a><span id="l38.38">  * @example var second_child = document.getElementById('container').firstChild.nextSibling;</span>
<a href="#l38.39"></a><span id="l38.39">  *      $('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){</span>
<a href="#l38.40"></a><span id="l38.40" class="difflineminus">- *        alert('scrolled!!');                                   </span>
<a href="#l38.41"></a><span id="l38.41" class="difflineplus">+ *        alert('scrolled!!');</span>
<a href="#l38.42"></a><span id="l38.42">  *      }});</span>
<a href="#l38.43"></a><span id="l38.43">  *</span>
<a href="#l38.44"></a><span id="l38.44">  * @desc Scroll on both axes, to different values</span>
<a href="#l38.45"></a><span id="l38.45">  * @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );</span>
<a href="#l38.46"></a><span id="l38.46">  */</span>
<a href="#l38.47"></a><span id="l38.47"> ;(function( $ ){</span>
<a href="#l38.48"></a><span id="l38.48" class="difflineminus">-  </span>
<a href="#l38.49"></a><span id="l38.49" class="difflineplus">+</span>
<a href="#l38.50"></a><span id="l38.50">   var $scrollTo = $.scrollTo = function( target, duration, settings ){</span>
<a href="#l38.51"></a><span id="l38.51">     $(window).scrollTo( target, duration, settings );</span>
<a href="#l38.52"></a><span id="l38.52">   };</span>
<a href="#l38.53"></a><span id="l38.53"> </span>
<a href="#l38.54"></a><span id="l38.54">   $scrollTo.defaults = {</span>
<a href="#l38.55"></a><span id="l38.55">     axis:'xy',</span>
<a href="#l38.56"></a><span id="l38.56">     duration: parseFloat($.fn.jquery) &gt;= 1.3 ? 0 : 1</span>
<a href="#l38.57"></a><span id="l38.57">   };</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineat">@@ -76,40 +76,40 @@</span>
<a href="#l38.59"></a><span id="l38.59">     return this.map(function(){</span>
<a href="#l38.60"></a><span id="l38.60">       var elem = this,</span>
<a href="#l38.61"></a><span id="l38.61">         isWin = !elem.nodeName || $.inArray( elem.nodeName.toLowerCase(), ['iframe','#document','html','body'] ) != -1;</span>
<a href="#l38.62"></a><span id="l38.62"> </span>
<a href="#l38.63"></a><span id="l38.63">         if( !isWin )</span>
<a href="#l38.64"></a><span id="l38.64">           return elem;</span>
<a href="#l38.65"></a><span id="l38.65"> </span>
<a href="#l38.66"></a><span id="l38.66">       var doc = (elem.contentWindow || elem).document || elem.ownerDocument || elem;</span>
<a href="#l38.67"></a><span id="l38.67" class="difflineminus">-      </span>
<a href="#l38.68"></a><span id="l38.68" class="difflineplus">+</span>
<a href="#l38.69"></a><span id="l38.69">       return $.browser.safari || doc.compatMode == 'BackCompat' ?</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineminus">-        doc.body : </span>
<a href="#l38.71"></a><span id="l38.71" class="difflineplus">+        doc.body :</span>
<a href="#l38.72"></a><span id="l38.72">         doc.documentElement;</span>
<a href="#l38.73"></a><span id="l38.73">     });</span>
<a href="#l38.74"></a><span id="l38.74">   };</span>
<a href="#l38.75"></a><span id="l38.75"> </span>
<a href="#l38.76"></a><span id="l38.76">   $.fn.scrollTo = function( target, duration, settings ){</span>
<a href="#l38.77"></a><span id="l38.77">     if( typeof duration == 'object' ){</span>
<a href="#l38.78"></a><span id="l38.78">       settings = duration;</span>
<a href="#l38.79"></a><span id="l38.79">       duration = 0;</span>
<a href="#l38.80"></a><span id="l38.80">     }</span>
<a href="#l38.81"></a><span id="l38.81">     if( typeof settings == 'function' )</span>
<a href="#l38.82"></a><span id="l38.82">       settings = { onAfter:settings };</span>
<a href="#l38.83"></a><span id="l38.83" class="difflineminus">-      </span>
<a href="#l38.84"></a><span id="l38.84" class="difflineplus">+</span>
<a href="#l38.85"></a><span id="l38.85">     if( target == 'max' )</span>
<a href="#l38.86"></a><span id="l38.86">       target = 9e9;</span>
<a href="#l38.87"></a><span id="l38.87" class="difflineminus">-      </span>
<a href="#l38.88"></a><span id="l38.88" class="difflineplus">+</span>
<a href="#l38.89"></a><span id="l38.89">     settings = $.extend( {}, $scrollTo.defaults, settings );</span>
<a href="#l38.90"></a><span id="l38.90">     // Speed is still recognized for backwards compatibility</span>
<a href="#l38.91"></a><span id="l38.91">     duration = duration || settings.speed || settings.duration;</span>
<a href="#l38.92"></a><span id="l38.92">     // Make sure the settings are given right</span>
<a href="#l38.93"></a><span id="l38.93">     settings.queue = settings.queue &amp;&amp; settings.axis.length &gt; 1;</span>
<a href="#l38.94"></a><span id="l38.94" class="difflineminus">-    </span>
<a href="#l38.95"></a><span id="l38.95" class="difflineplus">+</span>
<a href="#l38.96"></a><span id="l38.96">     if( settings.queue )</span>
<a href="#l38.97"></a><span id="l38.97">       // Let's keep the overall duration</span>
<a href="#l38.98"></a><span id="l38.98">       duration /= 2;</span>
<a href="#l38.99"></a><span id="l38.99">     settings.offset = both( settings.offset );</span>
<a href="#l38.100"></a><span id="l38.100">     settings.over = both( settings.over );</span>
<a href="#l38.101"></a><span id="l38.101"> </span>
<a href="#l38.102"></a><span id="l38.102">     return this._scrollable().each(function(){</span>
<a href="#l38.103"></a><span id="l38.103">       var elem = this,</span>
<a href="#l38.104"></a><span id="l38.104" class="difflineat">@@ -126,17 +126,17 @@</span>
<a href="#l38.105"></a><span id="l38.105">             // We are done</span>
<a href="#l38.106"></a><span id="l38.106">             break;</span>
<a href="#l38.107"></a><span id="l38.107">           }</span>
<a href="#l38.108"></a><span id="l38.108">           // Relative selector, no break!</span>
<a href="#l38.109"></a><span id="l38.109">           targ = $(targ,this);</span>
<a href="#l38.110"></a><span id="l38.110">         case 'object':</span>
<a href="#l38.111"></a><span id="l38.111">           // DOMElement / jQuery</span>
<a href="#l38.112"></a><span id="l38.112">           if( targ.is || targ.style )</span>
<a href="#l38.113"></a><span id="l38.113" class="difflineminus">-            // Get the real position of the target </span>
<a href="#l38.114"></a><span id="l38.114" class="difflineplus">+            // Get the real position of the target</span>
<a href="#l38.115"></a><span id="l38.115">             toff = (targ = $(targ)).offset();</span>
<a href="#l38.116"></a><span id="l38.116">       }</span>
<a href="#l38.117"></a><span id="l38.117">       $.each( settings.axis.split(''), function( i, axis ){</span>
<a href="#l38.118"></a><span id="l38.118">         var Pos  = axis == 'x' ? 'Left' : 'Top',</span>
<a href="#l38.119"></a><span id="l38.119">           pos = Pos.toLowerCase(),</span>
<a href="#l38.120"></a><span id="l38.120">           key = 'scroll' + Pos,</span>
<a href="#l38.121"></a><span id="l38.121">           old = elem[key],</span>
<a href="#l38.122"></a><span id="l38.122">           max = $scrollTo.max(elem, axis);</span>
<a href="#l38.123"></a><span id="l38.123" class="difflineat">@@ -144,26 +144,26 @@</span>
<a href="#l38.124"></a><span id="l38.124">         if( toff ){// jQuery / DOMElement</span>
<a href="#l38.125"></a><span id="l38.125">           attr[key] = toff[pos] + ( win ? 0 : old - $elem.offset()[pos] );</span>
<a href="#l38.126"></a><span id="l38.126"> </span>
<a href="#l38.127"></a><span id="l38.127">           // If it's a dom element, reduce the margin</span>
<a href="#l38.128"></a><span id="l38.128">           if( settings.margin ){</span>
<a href="#l38.129"></a><span id="l38.129">             attr[key] -= parseInt(targ.css('margin'+Pos)) || 0;</span>
<a href="#l38.130"></a><span id="l38.130">             attr[key] -= parseInt(targ.css('border'+Pos+'Width')) || 0;</span>
<a href="#l38.131"></a><span id="l38.131">           }</span>
<a href="#l38.132"></a><span id="l38.132" class="difflineminus">-          </span>
<a href="#l38.133"></a><span id="l38.133" class="difflineplus">+</span>
<a href="#l38.134"></a><span id="l38.134">           attr[key] += settings.offset[pos] || 0;</span>
<a href="#l38.135"></a><span id="l38.135" class="difflineminus">-          </span>
<a href="#l38.136"></a><span id="l38.136" class="difflineplus">+</span>
<a href="#l38.137"></a><span id="l38.137">           if( settings.over[pos] )</span>
<a href="#l38.138"></a><span id="l38.138">             // Scroll to a fraction of its width/height</span>
<a href="#l38.139"></a><span id="l38.139">             attr[key] += targ[axis=='x'?'width':'height']() * settings.over[pos];</span>
<a href="#l38.140"></a><span id="l38.140" class="difflineminus">-        }else{ </span>
<a href="#l38.141"></a><span id="l38.141" class="difflineplus">+        }else{</span>
<a href="#l38.142"></a><span id="l38.142">           var val = targ[pos];</span>
<a href="#l38.143"></a><span id="l38.143">           // Handle percentage values</span>
<a href="#l38.144"></a><span id="l38.144" class="difflineminus">-          attr[key] = val.slice &amp;&amp; val.slice(-1) == '%' ? </span>
<a href="#l38.145"></a><span id="l38.145" class="difflineplus">+          attr[key] = val.slice &amp;&amp; val.slice(-1) == '%' ?</span>
<a href="#l38.146"></a><span id="l38.146">             parseFloat(val) / 100 * max</span>
<a href="#l38.147"></a><span id="l38.147">             : val;</span>
<a href="#l38.148"></a><span id="l38.148">         }</span>
<a href="#l38.149"></a><span id="l38.149"> </span>
<a href="#l38.150"></a><span id="l38.150">         // Number or 'number'</span>
<a href="#l38.151"></a><span id="l38.151">         if( /^\d+$/.test(attr[key]) )</span>
<a href="#l38.152"></a><span id="l38.152">           // Check the limits</span>
<a href="#l38.153"></a><span id="l38.153">           attr[key] = attr[key] &lt;= 0 ? 0 : Math.min( attr[key], max );</span>
<a href="#l38.154"></a><span id="l38.154" class="difflineat">@@ -174,42 +174,42 @@</span>
<a href="#l38.155"></a><span id="l38.155">           if( old != attr[key] )</span>
<a href="#l38.156"></a><span id="l38.156">             // Intermediate animation</span>
<a href="#l38.157"></a><span id="l38.157">             animate( settings.onAfterFirst );</span>
<a href="#l38.158"></a><span id="l38.158">           // Don't animate this axis again in the next iteration.</span>
<a href="#l38.159"></a><span id="l38.159">           delete attr[key];</span>
<a href="#l38.160"></a><span id="l38.160">         }</span>
<a href="#l38.161"></a><span id="l38.161">       });</span>
<a href="#l38.162"></a><span id="l38.162"> </span>
<a href="#l38.163"></a><span id="l38.163" class="difflineminus">-      animate( settings.onAfter );      </span>
<a href="#l38.164"></a><span id="l38.164" class="difflineplus">+      animate( settings.onAfter );</span>
<a href="#l38.165"></a><span id="l38.165"> </span>
<a href="#l38.166"></a><span id="l38.166">       function animate( callback ){</span>
<a href="#l38.167"></a><span id="l38.167">         $elem.animate( attr, duration, settings.easing, callback &amp;&amp; function(){</span>
<a href="#l38.168"></a><span id="l38.168">           callback.call(this, target, settings);</span>
<a href="#l38.169"></a><span id="l38.169">         });</span>
<a href="#l38.170"></a><span id="l38.170">       };</span>
<a href="#l38.171"></a><span id="l38.171"> </span>
<a href="#l38.172"></a><span id="l38.172">     }).end();</span>
<a href="#l38.173"></a><span id="l38.173">   };</span>
<a href="#l38.174"></a><span id="l38.174" class="difflineminus">-  </span>
<a href="#l38.175"></a><span id="l38.175" class="difflineplus">+</span>
<a href="#l38.176"></a><span id="l38.176">   // Max scrolling position, works on quirks mode</span>
<a href="#l38.177"></a><span id="l38.177">   // It only fails (not too badly) on IE, quirks mode.</span>
<a href="#l38.178"></a><span id="l38.178">   $scrollTo.max = function( elem, axis ){</span>
<a href="#l38.179"></a><span id="l38.179">     var Dim = axis == 'x' ? 'Width' : 'Height',</span>
<a href="#l38.180"></a><span id="l38.180">       scroll = 'scroll'+Dim;</span>
<a href="#l38.181"></a><span id="l38.181" class="difflineminus">-    </span>
<a href="#l38.182"></a><span id="l38.182" class="difflineplus">+</span>
<a href="#l38.183"></a><span id="l38.183">     if( !$(elem).is('html,body') )</span>
<a href="#l38.184"></a><span id="l38.184">       return elem[scroll] - $(elem)[Dim.toLowerCase()]();</span>
<a href="#l38.185"></a><span id="l38.185" class="difflineminus">-    </span>
<a href="#l38.186"></a><span id="l38.186" class="difflineplus">+</span>
<a href="#l38.187"></a><span id="l38.187">     var size = 'client' + Dim,</span>
<a href="#l38.188"></a><span id="l38.188">       html = elem.ownerDocument.documentElement,</span>
<a href="#l38.189"></a><span id="l38.189">       body = elem.ownerDocument.body;</span>
<a href="#l38.190"></a><span id="l38.190"> </span>
<a href="#l38.191"></a><span id="l38.191" class="difflineminus">-    return Math.max( html[scroll], body[scroll] ) </span>
<a href="#l38.192"></a><span id="l38.192" class="difflineplus">+    return Math.max( html[scroll], body[scroll] )</span>
<a href="#l38.193"></a><span id="l38.193">        - Math.min( html[size]  , body[size]   );</span>
<a href="#l38.194"></a><span id="l38.194" class="difflineminus">-      </span>
<a href="#l38.195"></a><span id="l38.195" class="difflineplus">+</span>
<a href="#l38.196"></a><span id="l38.196">   };</span>
<a href="#l38.197"></a><span id="l38.197"> </span>
<a href="#l38.198"></a><span id="l38.198">   function both( val ){</span>
<a href="#l38.199"></a><span id="l38.199">     return typeof val == 'object' ? val : { top:val, left:val };</span>
<a href="#l38.200"></a><span id="l38.200">   };</span>
<a href="#l38.201"></a><span id="l38.201"> </span>
<a href="#l38.202"></a><span id="l38.202"> })( jQuery );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/components/phishing/application.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/components/phishing/application.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -6,27 +6,27 @@</span>
<a href="#l39.4"></a><span id="l39.4"> var gDataProvider = null;</span>
<a href="#l39.5"></a><span id="l39.5"> </span>
<a href="#l39.6"></a><span id="l39.6"> // An instance of our application is a PROT_Application object. It</span>
<a href="#l39.7"></a><span id="l39.7"> // basically just populates a few globals and instantiates wardens and</span>
<a href="#l39.8"></a><span id="l39.8"> // the listmanager.</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10"> /**</span>
<a href="#l39.11"></a><span id="l39.11">  * An instance of our application. There should be exactly one of these.</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">- * </span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+ *</span>
<a href="#l39.14"></a><span id="l39.14">  * Note: This object should instantiated only at profile-after-change</span>
<a href="#l39.15"></a><span id="l39.15">  * or later because the listmanager and the cryptokeymanager need to</span>
<a href="#l39.16"></a><span id="l39.16">  * read and write data files. Additionally, NSS isn't loaded until</span>
<a href="#l39.17"></a><span id="l39.17">  * some time around then (Moz bug #321024).</span>
<a href="#l39.18"></a><span id="l39.18">  *</span>
<a href="#l39.19"></a><span id="l39.19">  * @constructor</span>
<a href="#l39.20"></a><span id="l39.20">  */</span>
<a href="#l39.21"></a><span id="l39.21"> function PROT_Application() {</span>
<a href="#l39.22"></a><span id="l39.22">   this.debugZone= &quot;application&quot;;</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineminus">-  </span>
<a href="#l39.24"></a><span id="l39.24" class="difflineplus">+</span>
<a href="#l39.25"></a><span id="l39.25">   this.PROT_PhishingWarden = PROT_PhishingWarden;</span>
<a href="#l39.26"></a><span id="l39.26"> </span>
<a href="#l39.27"></a><span id="l39.27">   // Load data provider pref values</span>
<a href="#l39.28"></a><span id="l39.28">   gDataProvider = new PROT_DataProvider();</span>
<a href="#l39.29"></a><span id="l39.29"> </span>
<a href="#l39.30"></a><span id="l39.30">   // expose the object</span>
<a href="#l39.31"></a><span id="l39.31">   this.wrappedJSObject = this;</span>
<a href="#l39.32"></a><span id="l39.32"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mail/components/phishing/globalstore.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mail/components/phishing/globalstore.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -30,17 +30,17 @@ const MOZ_PARAM_VERSION = /\{moz:version</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5"> /**</span>
<a href="#l40.6"></a><span id="l40.6">  * Information regarding the data provider.</span>
<a href="#l40.7"></a><span id="l40.7">  */</span>
<a href="#l40.8"></a><span id="l40.8"> function PROT_DataProvider() {</span>
<a href="#l40.9"></a><span id="l40.9">   this.prefs_ = new G_Preferences();</span>
<a href="#l40.10"></a><span id="l40.10"> </span>
<a href="#l40.11"></a><span id="l40.11">   this.loadDataProviderPrefs_();</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-  </span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+</span>
<a href="#l40.14"></a><span id="l40.14">   // Watch for changes in the data provider and update accordingly.</span>
<a href="#l40.15"></a><span id="l40.15">   this.prefs_.addObserver(kDataProviderIdPref,</span>
<a href="#l40.16"></a><span id="l40.16">                           BindToObject(this.loadDataProviderPrefs_, this));</span>
<a href="#l40.17"></a><span id="l40.17"> </span>
<a href="#l40.18"></a><span id="l40.18">   // Watch for when anti-phishing is toggled on or off.</span>
<a href="#l40.19"></a><span id="l40.19">   this.prefs_.addObserver(kPhishWardenEnabledPref,</span>
<a href="#l40.20"></a><span id="l40.20">                           BindToObject(this.loadDataProviderPrefs_, this));</span>
<a href="#l40.21"></a><span id="l40.21"> }</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -55,17 +55,17 @@ PROT_DataProvider.prototype.loadDataProv</span>
<a href="#l40.23"></a><span id="l40.23">   this.updateURL_ = this.getUrlPref_(</span>
<a href="#l40.24"></a><span id="l40.24">         'browser.safebrowsing.provider.0.updateURL');</span>
<a href="#l40.25"></a><span id="l40.25"> </span>
<a href="#l40.26"></a><span id="l40.26">   var id = this.prefs_.getPref(kDataProviderIdPref, null);</span>
<a href="#l40.27"></a><span id="l40.27"> </span>
<a href="#l40.28"></a><span id="l40.28">   // default to 0</span>
<a href="#l40.29"></a><span id="l40.29">   if (null == id)</span>
<a href="#l40.30"></a><span id="l40.30">     id = 0;</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-  </span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+</span>
<a href="#l40.33"></a><span id="l40.33">   var basePref = kProviderBasePref + id + '.';</span>
<a href="#l40.34"></a><span id="l40.34"> </span>
<a href="#l40.35"></a><span id="l40.35">   this.name_ = this.prefs_.getPref(basePref + &quot;name&quot;, &quot;&quot;);</span>
<a href="#l40.36"></a><span id="l40.36"> </span>
<a href="#l40.37"></a><span id="l40.37">   // Urls used to get data from a provider</span>
<a href="#l40.38"></a><span id="l40.38">   this.lookupURL_ = this.getUrlPref_(basePref + &quot;lookupURL&quot;);</span>
<a href="#l40.39"></a><span id="l40.39">   this.keyURL_ = this.getUrlPref_(basePref + &quot;keyURL&quot;);</span>
<a href="#l40.40"></a><span id="l40.40">   this.reportURL_ = this.getUrlPref_(basePref + &quot;reportURL&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mail/components/phishing/list-warden.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mail/components/phishing/list-warden.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -12,17 +12,17 @@</span>
<a href="#l41.4"></a><span id="l41.4"> // registering prefObservers and calling enable or disable in the base</span>
<a href="#l41.5"></a><span id="l41.5"> // class as appropriate.</span>
<a href="#l41.6"></a><span id="l41.6"> //</span>
<a href="#l41.7"></a><span id="l41.7"> </span>
<a href="#l41.8"></a><span id="l41.8"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l41.9"></a><span id="l41.9"> </span>
<a href="#l41.10"></a><span id="l41.10"> /**</span>
<a href="#l41.11"></a><span id="l41.11">  * Abtracts the checking of user/browser actions for signs of</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">- * phishing. </span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+ * phishing.</span>
<a href="#l41.14"></a><span id="l41.14">  *</span>
<a href="#l41.15"></a><span id="l41.15">  * @constructor</span>
<a href="#l41.16"></a><span id="l41.16">  */</span>
<a href="#l41.17"></a><span id="l41.17"> function PROT_ListWarden() {</span>
<a href="#l41.18"></a><span id="l41.18">   this.debugZone = &quot;listwarden&quot;;</span>
<a href="#l41.19"></a><span id="l41.19">   var listManager = Cc[&quot;@mozilla.org/url-classifier/listmanager;1&quot;]</span>
<a href="#l41.20"></a><span id="l41.20">                       .getService(Ci.nsIUrlListManager);</span>
<a href="#l41.21"></a><span id="l41.21">   this.listManager_ = listManager;</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineat">@@ -151,17 +151,17 @@ PROT_ListWarden.prototype.isEvilURL = fu</span>
<a href="#l41.23"></a><span id="l41.23">  * This class helps us query multiple tables even though each table check</span>
<a href="#l41.24"></a><span id="l41.24">  * is asynchronous.  It provides callbacks for each listManager lookup</span>
<a href="#l41.25"></a><span id="l41.25">  * and decides whether we need to continue querying or not.  After</span>
<a href="#l41.26"></a><span id="l41.26">  * instantiating the method, use run() to invoke.</span>
<a href="#l41.27"></a><span id="l41.27">  *</span>
<a href="#l41.28"></a><span id="l41.28">  * @param url String The url to check</span>
<a href="#l41.29"></a><span id="l41.29">  * @param whiteTables Array of strings with each white table name</span>
<a href="#l41.30"></a><span id="l41.30">  * @param blackTables Array of strings with each black table name</span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">- * @param callback Function to call with result </span>
<a href="#l41.32"></a><span id="l41.32" class="difflineplus">+ * @param callback Function to call with result</span>
<a href="#l41.33"></a><span id="l41.33">  *       PROT_ListWarden.IN_BLACKLIST, PROT_ListWarden.IN_WHITELIST,</span>
<a href="#l41.34"></a><span id="l41.34">  *       or PROT_ListWarden.NOT_FOUND</span>
<a href="#l41.35"></a><span id="l41.35">  */</span>
<a href="#l41.36"></a><span id="l41.36"> function MultiTableQuerier(url, whiteTables, blackTables, callback) {</span>
<a href="#l41.37"></a><span id="l41.37">   this.debugZone = &quot;multitablequerier&quot;;</span>
<a href="#l41.38"></a><span id="l41.38"> </span>
<a href="#l41.39"></a><span id="l41.39">   let uri = Services.io.newURI(url, null, null);</span>
<a href="#l41.40"></a><span id="l41.40">   this.principal_ = Services.scriptSecurityManager</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mail/components/phishing/phishing-warden.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mail/components/phishing/phishing-warden.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -6,86 +6,86 @@</span>
<a href="#l42.4"></a><span id="l42.4"> // The warden checks URLs to see if they are phishing URLs. It</span>
<a href="#l42.5"></a><span id="l42.5"> // does so by querying our locally stored blacklists (privacy</span>
<a href="#l42.6"></a><span id="l42.6"> // mode).</span>
<a href="#l42.7"></a><span id="l42.7"> //</span>
<a href="#l42.8"></a><span id="l42.8"> // Note: There is a single warden for the whole application.</span>
<a href="#l42.9"></a><span id="l42.9"> </span>
<a href="#l42.10"></a><span id="l42.10"> const kPhishWardenEnabledPref = &quot;browser.safebrowsing.enabled&quot;;</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-// We have hardcoded URLs that let people navigate to in order to </span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+// We have hardcoded URLs that let people navigate to in order to</span>
<a href="#l42.14"></a><span id="l42.14"> // check out the warning.</span>
<a href="#l42.15"></a><span id="l42.15"> const kTestUrls = {</span>
<a href="#l42.16"></a><span id="l42.16">   &quot;http://www.google.com/tools/firefox/safebrowsing/phish-o-rama.html&quot;: true,</span>
<a href="#l42.17"></a><span id="l42.17">   &quot;http://www.mozilla.org/projects/bonecho/anti-phishing/its-a-trap.html&quot;: true,</span>
<a href="#l42.18"></a><span id="l42.18">   &quot;http://www.mozilla.com/firefox/its-a-trap.html&quot;: true,</span>
<a href="#l42.19"></a><span id="l42.19"> }</span>
<a href="#l42.20"></a><span id="l42.20"> </span>
<a href="#l42.21"></a><span id="l42.21"> /**</span>
<a href="#l42.22"></a><span id="l42.22">  * Abtracts the checking of user/browser actions for signs of</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineminus">- * phishing. </span>
<a href="#l42.24"></a><span id="l42.24" class="difflineplus">+ * phishing.</span>
<a href="#l42.25"></a><span id="l42.25">  *</span>
<a href="#l42.26"></a><span id="l42.26">  * @param progressListener nsIDocNavStartProgressListener</span>
<a href="#l42.27"></a><span id="l42.27">  * @constructor</span>
<a href="#l42.28"></a><span id="l42.28">  */</span>
<a href="#l42.29"></a><span id="l42.29"> function PROT_PhishingWarden(progressListener) {</span>
<a href="#l42.30"></a><span id="l42.30">   PROT_ListWarden.call(this);</span>
<a href="#l42.31"></a><span id="l42.31"> </span>
<a href="#l42.32"></a><span id="l42.32">   this.debugZone = &quot;phishwarden&quot;;</span>
<a href="#l42.33"></a><span id="l42.33">   this.testing_ = false;</span>
<a href="#l42.34"></a><span id="l42.34"> </span>
<a href="#l42.35"></a><span id="l42.35">   // Use this to query preferences</span>
<a href="#l42.36"></a><span id="l42.36">   this.prefs_ = new G_Preferences();</span>
<a href="#l42.37"></a><span id="l42.37" class="difflineminus">-  </span>
<a href="#l42.38"></a><span id="l42.38" class="difflineplus">+</span>
<a href="#l42.39"></a><span id="l42.39">   // Global preference to enable the phishing warden</span>
<a href="#l42.40"></a><span id="l42.40">   this.phishWardenEnabled_ = this.prefs_.getPref(kPhishWardenEnabledPref, null);</span>
<a href="#l42.41"></a><span id="l42.41"> </span>
<a href="#l42.42"></a><span id="l42.42">   // Get notifications when the phishing warden enabled pref changes</span>
<a href="#l42.43"></a><span id="l42.43" class="difflineminus">-  var phishWardenPrefObserver = </span>
<a href="#l42.44"></a><span id="l42.44" class="difflineplus">+  var phishWardenPrefObserver =</span>
<a href="#l42.45"></a><span id="l42.45">     BindToObject(this.onPhishWardenEnabledPrefChanged, this);</span>
<a href="#l42.46"></a><span id="l42.46">   this.prefs_.addObserver(kPhishWardenEnabledPref, phishWardenPrefObserver);</span>
<a href="#l42.47"></a><span id="l42.47" class="difflineminus">-  </span>
<a href="#l42.48"></a><span id="l42.48" class="difflineplus">+</span>
<a href="#l42.49"></a><span id="l42.49">   // Get notifications when the data provider pref changes</span>
<a href="#l42.50"></a><span id="l42.50">   var dataProviderPrefObserver =</span>
<a href="#l42.51"></a><span id="l42.51">     BindToObject(this.onDataProviderPrefChanged, this);</span>
<a href="#l42.52"></a><span id="l42.52">   this.prefs_.addObserver(kDataProviderIdPref, dataProviderPrefObserver);</span>
<a href="#l42.53"></a><span id="l42.53"> </span>
<a href="#l42.54"></a><span id="l42.54">   G_Debug(this, &quot;phishWarden initialized&quot;);</span>
<a href="#l42.55"></a><span id="l42.55"> }</span>
<a href="#l42.56"></a><span id="l42.56"> </span>
<a href="#l42.57"></a><span id="l42.57"> PROT_PhishingWarden.inherits(PROT_ListWarden);</span>
<a href="#l42.58"></a><span id="l42.58"> </span>
<a href="#l42.59"></a><span id="l42.59"> /**</span>
<a href="#l42.60"></a><span id="l42.60">  * We implement nsIWebProgressListener</span>
<a href="#l42.61"></a><span id="l42.61">  */</span>
<a href="#l42.62"></a><span id="l42.62"> PROT_PhishingWarden.prototype.QueryInterface = function(iid) {</span>
<a href="#l42.63"></a><span id="l42.63" class="difflineminus">-  if (iid.equals(Ci.nsISupports) || </span>
<a href="#l42.64"></a><span id="l42.64" class="difflineplus">+  if (iid.equals(Ci.nsISupports) ||</span>
<a href="#l42.65"></a><span id="l42.65">       iid.equals(Ci.nsISupportsWeakReference))</span>
<a href="#l42.66"></a><span id="l42.66">     return this;</span>
<a href="#l42.67"></a><span id="l42.67">   throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l42.68"></a><span id="l42.68"> }</span>
<a href="#l42.69"></a><span id="l42.69"> </span>
<a href="#l42.70"></a><span id="l42.70"> /**</span>
<a href="#l42.71"></a><span id="l42.71">  * Cleanup on shutdown.</span>
<a href="#l42.72"></a><span id="l42.72">  */</span>
<a href="#l42.73"></a><span id="l42.73"> PROT_PhishingWarden.prototype.shutdown = function() {</span>
<a href="#l42.74"></a><span id="l42.74">   this.prefs_.removeAllObservers();</span>
<a href="#l42.75"></a><span id="l42.75"> }</span>
<a href="#l42.76"></a><span id="l42.76"> </span>
<a href="#l42.77"></a><span id="l42.77"> /**</span>
<a href="#l42.78"></a><span id="l42.78">  * When a preference (either advanced features or the phishwarden</span>
<a href="#l42.79"></a><span id="l42.79" class="difflineminus">- * enabled) changes, we might have to start or stop asking for updates. </span>
<a href="#l42.80"></a><span id="l42.80" class="difflineminus">- * </span>
<a href="#l42.81"></a><span id="l42.81" class="difflineplus">+ * enabled) changes, we might have to start or stop asking for updates.</span>
<a href="#l42.82"></a><span id="l42.82" class="difflineplus">+ *</span>
<a href="#l42.83"></a><span id="l42.83">  * This is a little tricky; we start or stop management only when we</span>
<a href="#l42.84"></a><span id="l42.84">  * have complete information we can use to determine whether we</span>
<a href="#l42.85"></a><span id="l42.85">  * should.  It could be the case that one pref or the other isn't set</span>
<a href="#l42.86"></a><span id="l42.86">  * yet (e.g., they haven't opted in/out of advanced features). So do</span>
<a href="#l42.87"></a><span id="l42.87">  * nothing unless we have both pref values -- we get notifications for</span>
<a href="#l42.88"></a><span id="l42.88">  * both, so eventually we will start correctly.</span>
<a href="#l42.89"></a><span id="l42.89" class="difflineminus">- */ </span>
<a href="#l42.90"></a><span id="l42.90" class="difflineplus">+ */</span>
<a href="#l42.91"></a><span id="l42.91"> PROT_PhishingWarden.prototype.maybeToggleUpdateChecking = function() {</span>
<a href="#l42.92"></a><span id="l42.92">   if (this.testing_)</span>
<a href="#l42.93"></a><span id="l42.93">     return;</span>
<a href="#l42.94"></a><span id="l42.94"> </span>
<a href="#l42.95"></a><span id="l42.95">   var phishWardenEnabled = this.prefs_.getPref(kPhishWardenEnabledPref, null);</span>
<a href="#l42.96"></a><span id="l42.96"> </span>
<a href="#l42.97"></a><span id="l42.97">   // Do nothing unless the phishing warden pref is set.  It can be null (unset), true, or</span>
<a href="#l42.98"></a><span id="l42.98">   // false.</span>
<a href="#l42.99"></a><span id="l42.99" class="difflineat">@@ -102,17 +102,17 @@ PROT_PhishingWarden.prototype.maybeToggl</span>
<a href="#l42.100"></a><span id="l42.100">   } else {</span>
<a href="#l42.101"></a><span id="l42.101">     // Anti-phishing is off, disable table updates</span>
<a href="#l42.102"></a><span id="l42.102">     this.disableBlacklistTableUpdates();</span>
<a href="#l42.103"></a><span id="l42.103">     this.disableWhitelistTableUpdates();</span>
<a href="#l42.104"></a><span id="l42.104">   }</span>
<a href="#l42.105"></a><span id="l42.105"> }</span>
<a href="#l42.106"></a><span id="l42.106"> </span>
<a href="#l42.107"></a><span id="l42.107"> /**</span>
<a href="#l42.108"></a><span id="l42.108" class="difflineminus">- * Deal with a user changing the pref that says whether we should </span>
<a href="#l42.109"></a><span id="l42.109" class="difflineplus">+ * Deal with a user changing the pref that says whether we should</span>
<a href="#l42.110"></a><span id="l42.110">  * enable the phishing warden (i.e., that SafeBrowsing is active)</span>
<a href="#l42.111"></a><span id="l42.111">  *</span>
<a href="#l42.112"></a><span id="l42.112">  * @param prefName Name of the pref holding the value indicating whether</span>
<a href="#l42.113"></a><span id="l42.113">  *                 we should enable the phishing warden</span>
<a href="#l42.114"></a><span id="l42.114">  */</span>
<a href="#l42.115"></a><span id="l42.115"> PROT_PhishingWarden.prototype.onPhishWardenEnabledPrefChanged = function(</span>
<a href="#l42.116"></a><span id="l42.116">                                                                     prefName) {</span>
<a href="#l42.117"></a><span id="l42.117">   this.phishWardenEnabled_ = this.prefs_.getPref(prefName, this.phishWardenEnabled_);</span>
<a href="#l42.118"></a><span id="l42.118" class="difflineat">@@ -124,17 +124,17 @@ PROT_PhishingWarden.prototype.onPhishWar</span>
<a href="#l42.119"></a><span id="l42.119">  */</span>
<a href="#l42.120"></a><span id="l42.120"> PROT_PhishingWarden.prototype.onDataProviderPrefChanged = function(prefName) {</span>
<a href="#l42.121"></a><span id="l42.121"> }</span>
<a href="#l42.122"></a><span id="l42.122"> </span>
<a href="#l42.123"></a><span id="l42.123"> /**</span>
<a href="#l42.124"></a><span id="l42.124">  * Indicates if this URL is one of the possible blacklist test URLs.</span>
<a href="#l42.125"></a><span id="l42.125">  * These test URLs should always be considered as phishy.</span>
<a href="#l42.126"></a><span id="l42.126">  *</span>
<a href="#l42.127"></a><span id="l42.127" class="difflineminus">- * @param url URL to check </span>
<a href="#l42.128"></a><span id="l42.128" class="difflineplus">+ * @param url URL to check</span>
<a href="#l42.129"></a><span id="l42.129">  * @return A boolean indicating whether this is one of our blacklist</span>
<a href="#l42.130"></a><span id="l42.130">  *         test URLs</span>
<a href="#l42.131"></a><span id="l42.131">  */</span>
<a href="#l42.132"></a><span id="l42.132"> PROT_PhishingWarden.prototype.isBlacklistTestURL = function(url) {</span>
<a href="#l42.133"></a><span id="l42.133">   // Explicitly check for URL so we don't get JS warnings in strict mode.</span>
<a href="#l42.134"></a><span id="l42.134">   if (kTestUrls[url])</span>
<a href="#l42.135"></a><span id="l42.135">     return true;</span>
<a href="#l42.136"></a><span id="l42.136">   return false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mail/components/preferences/advanced.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mail/components/preferences/advanced.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -157,28 +157,28 @@ var gAdvancedPane = {</span>
<a href="#l43.4"></a><span id="l43.4">       Services.cache.evictEntries(Components.interfaces.nsICache.STORE_ANYWHERE);</span>
<a href="#l43.5"></a><span id="l43.5">     } catch(ex) {}</span>
<a href="#l43.6"></a><span id="l43.6">   },</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8">   updateButtons: function (aButtonID, aPreferenceID)</span>
<a href="#l43.9"></a><span id="l43.9">   {</span>
<a href="#l43.10"></a><span id="l43.10">     var button = document.getElementById(aButtonID);</span>
<a href="#l43.11"></a><span id="l43.11">     var preference = document.getElementById(aPreferenceID);</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-    // This is actually before the value changes, so the value is not as you expect. </span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+    // This is actually before the value changes, so the value is not as you expect.</span>
<a href="#l43.14"></a><span id="l43.14">     button.disabled = preference.value == true;</span>
<a href="#l43.15"></a><span id="l43.15">     return undefined;</span>
<a href="#l43.16"></a><span id="l43.16" class="difflineminus">-  },  </span>
<a href="#l43.17"></a><span id="l43.17" class="difflineminus">-  </span>
<a href="#l43.18"></a><span id="l43.18" class="difflineplus">+  },</span>
<a href="#l43.19"></a><span id="l43.19" class="difflineplus">+</span>
<a href="#l43.20"></a><span id="l43.20"> #ifdef MOZ_UPDATER</span>
<a href="#l43.21"></a><span id="l43.21"> /**</span>
<a href="#l43.22"></a><span id="l43.22">  * Selects the item of the radiogroup, and sets the warnIncompatible checkbox</span>
<a href="#l43.23"></a><span id="l43.23">  * based on the pref values and locked states.</span>
<a href="#l43.24"></a><span id="l43.24">  *</span>
<a href="#l43.25"></a><span id="l43.25">  * UI state matrix for update preference conditions</span>
<a href="#l43.26"></a><span id="l43.26" class="difflineminus">- * </span>
<a href="#l43.27"></a><span id="l43.27" class="difflineplus">+ *</span>
<a href="#l43.28"></a><span id="l43.28">  * UI Components:                              Preferences</span>
<a href="#l43.29"></a><span id="l43.29">  * Radiogroup                                  i   = app.update.enabled</span>
<a href="#l43.30"></a><span id="l43.30">  * Warn before disabling extensions checkbox   ii  = app.update.auto</span>
<a href="#l43.31"></a><span id="l43.31">  *                                             iii = app.update.mode</span>
<a href="#l43.32"></a><span id="l43.32">  *</span>
<a href="#l43.33"></a><span id="l43.33">  * Disabled states:</span>
<a href="#l43.34"></a><span id="l43.34">  * Element           pref  value  locked  disabled</span>
<a href="#l43.35"></a><span id="l43.35">  * radiogroup        i     t/f    f       false</span>
<a href="#l43.36"></a><span id="l43.36" class="difflineat">@@ -195,40 +195,40 @@ var gAdvancedPane = {</span>
<a href="#l43.37"></a><span id="l43.37">  *                   iii   0/1/2  f       false</span>
<a href="#l43.38"></a><span id="l43.38">  *                   iii   0/1/2  *t*     *true*</span>
<a href="#l43.39"></a><span id="l43.39">  */</span>
<a href="#l43.40"></a><span id="l43.40"> updateReadPrefs: function ()</span>
<a href="#l43.41"></a><span id="l43.41"> {</span>
<a href="#l43.42"></a><span id="l43.42">   var enabledPref = document.getElementById(&quot;app.update.enabled&quot;);</span>
<a href="#l43.43"></a><span id="l43.43">   var autoPref = document.getElementById(&quot;app.update.auto&quot;);</span>
<a href="#l43.44"></a><span id="l43.44">   var radiogroup = document.getElementById(&quot;updateRadioGroup&quot;);</span>
<a href="#l43.45"></a><span id="l43.45" class="difflineminus">-  </span>
<a href="#l43.46"></a><span id="l43.46" class="difflineplus">+</span>
<a href="#l43.47"></a><span id="l43.47">   if (!enabledPref.value)   // Don't care for autoPref.value in this case.</span>
<a href="#l43.48"></a><span id="l43.48">     radiogroup.value=&quot;manual&quot;     // 3. Never check for updates.</span>
<a href="#l43.49"></a><span id="l43.49">   else if (autoPref.value)  // enabledPref.value &amp;&amp; autoPref.value</span>
<a href="#l43.50"></a><span id="l43.50">     radiogroup.value=&quot;auto&quot;;      // 1. Automatically install updates</span>
<a href="#l43.51"></a><span id="l43.51">   else                      // enabledPref.value &amp;&amp; !autoPref.value</span>
<a href="#l43.52"></a><span id="l43.52">     radiogroup.value=&quot;checkOnly&quot;; // 2. Check, but let me choose</span>
<a href="#l43.53"></a><span id="l43.53"> </span>
<a href="#l43.54"></a><span id="l43.54">   var canCheck = Components.classes[&quot;@mozilla.org/updates/update-service;1&quot;].</span>
<a href="#l43.55"></a><span id="l43.55">                    getService(Components.interfaces.nsIApplicationUpdateService).</span>
<a href="#l43.56"></a><span id="l43.56">                    canCheckForUpdates;</span>
<a href="#l43.57"></a><span id="l43.57"> </span>
<a href="#l43.58"></a><span id="l43.58">   // canCheck is false if the enabledPref is false and locked,</span>
<a href="#l43.59"></a><span id="l43.59">   // or the binary platform or OS version is not known.</span>
<a href="#l43.60"></a><span id="l43.60">   // A locked pref is sufficient to disable the radiogroup.</span>
<a href="#l43.61"></a><span id="l43.61">   radiogroup.disabled = !canCheck || enabledPref.locked || autoPref.locked;</span>
<a href="#l43.62"></a><span id="l43.62" class="difflineminus">-  </span>
<a href="#l43.63"></a><span id="l43.63" class="difflineplus">+</span>
<a href="#l43.64"></a><span id="l43.64">   var modePref = document.getElementById(&quot;app.update.mode&quot;);</span>
<a href="#l43.65"></a><span id="l43.65">   var warnIncompatible = document.getElementById(&quot;warnIncompatible&quot;);</span>
<a href="#l43.66"></a><span id="l43.66"> </span>
<a href="#l43.67"></a><span id="l43.67">   // the warnIncompatible checkbox value is set by readAddonWarn</span>
<a href="#l43.68"></a><span id="l43.68">   warnIncompatible.disabled = radiogroup.disabled || modePref.locked ||</span>
<a href="#l43.69"></a><span id="l43.69">                               !enabledPref.value || !autoPref.value;</span>
<a href="#l43.70"></a><span id="l43.70" class="difflineminus">-  </span>
<a href="#l43.71"></a><span id="l43.71" class="difflineplus">+</span>
<a href="#l43.72"></a><span id="l43.72"> #ifdef MOZ_MAINTENANCE_SERVICE</span>
<a href="#l43.73"></a><span id="l43.73">   // Check to see if the maintenance service is installed.</span>
<a href="#l43.74"></a><span id="l43.74">   // If it is don't show the preference at all.</span>
<a href="#l43.75"></a><span id="l43.75">   var installed;</span>
<a href="#l43.76"></a><span id="l43.76">   try {</span>
<a href="#l43.77"></a><span id="l43.77">     let wrk = Components.classes[&quot;@mozilla.org/windows-registry-key;1&quot;]</span>
<a href="#l43.78"></a><span id="l43.78">               .createInstance(Components.interfaces.nsIWindowsRegKey);</span>
<a href="#l43.79"></a><span id="l43.79">     wrk.open(wrk.ROOT_KEY_LOCAL_MACHINE,</span>
<a href="#l43.80"></a><span id="l43.80" class="difflineat">@@ -270,17 +270,17 @@ updateWritePrefs: function ()</span>
<a href="#l43.81"></a><span id="l43.81">   var warnIncompatible = document.getElementById(&quot;warnIncompatible&quot;);</span>
<a href="#l43.82"></a><span id="l43.82">   var modePref = document.getElementById(&quot;app.update.mode&quot;);</span>
<a href="#l43.83"></a><span id="l43.83">   warnIncompatible.disabled = enabledPref.locked || !enabledPref.value ||</span>
<a href="#l43.84"></a><span id="l43.84">                               autoPref.locked || !autoPref.value ||</span>
<a href="#l43.85"></a><span id="l43.85">                               modePref.locked;</span>
<a href="#l43.86"></a><span id="l43.86"> },</span>
<a href="#l43.87"></a><span id="l43.87"> </span>
<a href="#l43.88"></a><span id="l43.88">   /**</span>
<a href="#l43.89"></a><span id="l43.89" class="difflineminus">-   * app.update.mode is a three state integer preference, and we have to </span>
<a href="#l43.90"></a><span id="l43.90" class="difflineplus">+   * app.update.mode is a three state integer preference, and we have to</span>
<a href="#l43.91"></a><span id="l43.91">    * express all three values in a single checkbox:</span>
<a href="#l43.92"></a><span id="l43.92">    * &quot;Warn me if this will disable extensions or themes&quot;</span>
<a href="#l43.93"></a><span id="l43.93">    * Preference Value         Checkbox State    Meaning</span>
<a href="#l43.94"></a><span id="l43.94">    * 0                        Unchecked         Do not warn</span>
<a href="#l43.95"></a><span id="l43.95">    * 1                        Checked           Warn if there are incompatibilities</span>
<a href="#l43.96"></a><span id="l43.96">    * 2                        Checked           Warn if there are incompatibilities,</span>
<a href="#l43.97"></a><span id="l43.97">    *                                            or the update is major.</span>
<a href="#l43.98"></a><span id="l43.98">    */</span>
<a href="#l43.99"></a><span id="l43.99" class="difflineat">@@ -350,36 +350,36 @@ updateWritePrefs: function ()</span>
<a href="#l43.100"></a><span id="l43.100"> </span>
<a href="#l43.101"></a><span id="l43.101">   /**</span>
<a href="#l43.102"></a><span id="l43.102">    * Display the return receipts configuration dialog.</span>
<a href="#l43.103"></a><span id="l43.103">    */</span>
<a href="#l43.104"></a><span id="l43.104">   showReturnReceipts: function()</span>
<a href="#l43.105"></a><span id="l43.105">   {</span>
<a href="#l43.106"></a><span id="l43.106">     document.documentElement.openSubDialog(&quot;chrome://messenger/content/preferences/receipts.xul&quot;,</span>
<a href="#l43.107"></a><span id="l43.107">                                            &quot;&quot;, null);</span>
<a href="#l43.108"></a><span id="l43.108" class="difflineminus">-  },  </span>
<a href="#l43.109"></a><span id="l43.109" class="difflineplus">+  },</span>
<a href="#l43.110"></a><span id="l43.110"> </span>
<a href="#l43.111"></a><span id="l43.111" class="difflineminus">-  /** </span>
<a href="#l43.112"></a><span id="l43.112" class="difflineplus">+  /**</span>
<a href="#l43.113"></a><span id="l43.113">    * Display the the connection settings dialog.</span>
<a href="#l43.114"></a><span id="l43.114">    */</span>
<a href="#l43.115"></a><span id="l43.115">   showConnections: function ()</span>
<a href="#l43.116"></a><span id="l43.116">   {</span>
<a href="#l43.117"></a><span id="l43.117">     document.documentElement</span>
<a href="#l43.118"></a><span id="l43.118">             .openSubDialog(&quot;chrome://messenger/content/preferences/connection.xul&quot;,</span>
<a href="#l43.119"></a><span id="l43.119">                            &quot;&quot;, null);</span>
<a href="#l43.120"></a><span id="l43.120">   },</span>
<a href="#l43.121"></a><span id="l43.121"> </span>
<a href="#l43.122"></a><span id="l43.122">   /**</span>
<a href="#l43.123"></a><span id="l43.123">    * Display the the offline settings dialog.</span>
<a href="#l43.124"></a><span id="l43.124">    */</span>
<a href="#l43.125"></a><span id="l43.125">   showOffline: function()</span>
<a href="#l43.126"></a><span id="l43.126">   {</span>
<a href="#l43.127"></a><span id="l43.127">     document.documentElement</span>
<a href="#l43.128"></a><span id="l43.128">             .openSubDialog(&quot;chrome://messenger/content/preferences/offline.xul&quot;,</span>
<a href="#l43.129"></a><span id="l43.129" class="difflineminus">-                           &quot;&quot;, null);  </span>
<a href="#l43.130"></a><span id="l43.130" class="difflineplus">+                           &quot;&quot;, null);</span>
<a href="#l43.131"></a><span id="l43.131">   },</span>
<a href="#l43.132"></a><span id="l43.132"> </span>
<a href="#l43.133"></a><span id="l43.133">   /**</span>
<a href="#l43.134"></a><span id="l43.134">    * Display the user's certificates and associated options.</span>
<a href="#l43.135"></a><span id="l43.135">    */</span>
<a href="#l43.136"></a><span id="l43.136">   showCertificates: function ()</span>
<a href="#l43.137"></a><span id="l43.137">   {</span>
<a href="#l43.138"></a><span id="l43.138">     document.documentElement.openWindow(&quot;mozilla:certmanager&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mail/components/preferences/connection.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mail/components/preferences/connection.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -100,17 +100,17 @@ var gConnectionsDialog = {</span>
<a href="#l44.4"></a><span id="l44.4">   {</span>
<a href="#l44.5"></a><span id="l44.5">     var proxyTypePref = document.getElementById(&quot;network.proxy.type&quot;);</span>
<a href="#l44.6"></a><span id="l44.6">     var shareProxiesPref = document.getElementById(&quot;network.proxy.share_proxy_settings&quot;);</span>
<a href="#l44.7"></a><span id="l44.7">     var proxyPrefs = [&quot;ssl&quot;, &quot;socks&quot;];</span>
<a href="#l44.8"></a><span id="l44.8">     for (var i = 0; i &lt; proxyPrefs.length; ++i) {</span>
<a href="#l44.9"></a><span id="l44.9">       var proxyServerURLPref = document.getElementById(&quot;network.proxy.&quot; + proxyPrefs[i]);</span>
<a href="#l44.10"></a><span id="l44.10">       var proxyPortPref = document.getElementById(&quot;network.proxy.&quot; + proxyPrefs[i] + &quot;_port&quot;);</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-      // Restore previous per-proxy custom settings, if present. </span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+      // Restore previous per-proxy custom settings, if present.</span>
<a href="#l44.14"></a><span id="l44.14">       if (!shareProxiesPref.value) {</span>
<a href="#l44.15"></a><span id="l44.15">         var backupServerURLPref = document.getElementById(&quot;network.proxy.backup.&quot; + proxyPrefs[i]);</span>
<a href="#l44.16"></a><span id="l44.16">         var backupPortPref = document.getElementById(&quot;network.proxy.backup.&quot; + proxyPrefs[i] + &quot;_port&quot;);</span>
<a href="#l44.17"></a><span id="l44.17">         if (backupServerURLPref.hasUserValue) {</span>
<a href="#l44.18"></a><span id="l44.18">           proxyServerURLPref.value = backupServerURLPref.value;</span>
<a href="#l44.19"></a><span id="l44.19">           backupServerURLPref.reset();</span>
<a href="#l44.20"></a><span id="l44.20">         }</span>
<a href="#l44.21"></a><span id="l44.21">         if (backupPortPref.hasUserValue) {</span>
<a href="#l44.22"></a><span id="l44.22" class="difflineat">@@ -129,17 +129,17 @@ var gConnectionsDialog = {</span>
<a href="#l44.23"></a><span id="l44.23"> </span>
<a href="#l44.24"></a><span id="l44.24">     return undefined;</span>
<a href="#l44.25"></a><span id="l44.25">   },</span>
<a href="#l44.26"></a><span id="l44.26"> </span>
<a href="#l44.27"></a><span id="l44.27">   readProxyProtocolPref: function (aProtocol, aIsPort)</span>
<a href="#l44.28"></a><span id="l44.28">   {</span>
<a href="#l44.29"></a><span id="l44.29">     var shareProxiesPref = document.getElementById(&quot;network.proxy.share_proxy_settings&quot;);</span>
<a href="#l44.30"></a><span id="l44.30">     if (shareProxiesPref.value) {</span>
<a href="#l44.31"></a><span id="l44.31" class="difflineminus">-      var pref = document.getElementById(&quot;network.proxy.http&quot; + (aIsPort ? &quot;_port&quot; : &quot;&quot;));    </span>
<a href="#l44.32"></a><span id="l44.32" class="difflineplus">+      var pref = document.getElementById(&quot;network.proxy.http&quot; + (aIsPort ? &quot;_port&quot; : &quot;&quot;));</span>
<a href="#l44.33"></a><span id="l44.33">       return pref.value;</span>
<a href="#l44.34"></a><span id="l44.34">     }</span>
<a href="#l44.35"></a><span id="l44.35"> </span>
<a href="#l44.36"></a><span id="l44.36">     var backupPref = document.getElementById(&quot;network.proxy.backup.&quot; + aProtocol + (aIsPort ? &quot;_port&quot; : &quot;&quot;));</span>
<a href="#l44.37"></a><span id="l44.37">     return backupPref.hasUserValue ? backupPref.value : undefined;</span>
<a href="#l44.38"></a><span id="l44.38">   },</span>
<a href="#l44.39"></a><span id="l44.39"> </span>
<a href="#l44.40"></a><span id="l44.40">   reloadPAC: function ()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mail/components/preferences/downloads.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mail/components/preferences/downloads.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -44,17 +44,17 @@ var gDownloadDirSection = {</span>
<a href="#l45.4"></a><span id="l45.4">     else if (aFile.equals(this._getDownloadsFolder(&quot;Downloads&quot;)))</span>
<a href="#l45.5"></a><span id="l45.5">       return 1;</span>
<a href="#l45.6"></a><span id="l45.6">     return 2;</span>
<a href="#l45.7"></a><span id="l45.7">   },</span>
<a href="#l45.8"></a><span id="l45.8"> </span>
<a href="#l45.9"></a><span id="l45.9">   _indexToFile: function (aIndex)</span>
<a href="#l45.10"></a><span id="l45.10">   {</span>
<a href="#l45.11"></a><span id="l45.11">     switch (aIndex) {</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-    case 0: </span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+    case 0:</span>
<a href="#l45.14"></a><span id="l45.14">       return this._getDownloadsFolder(&quot;Desktop&quot;);</span>
<a href="#l45.15"></a><span id="l45.15">     case 1:</span>
<a href="#l45.16"></a><span id="l45.16">       return this._getDownloadsFolder(&quot;Downloads&quot;);</span>
<a href="#l45.17"></a><span id="l45.17">     }</span>
<a href="#l45.18"></a><span id="l45.18">     var customDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l45.19"></a><span id="l45.19">     return customDirPref.value;</span>
<a href="#l45.20"></a><span id="l45.20">   },</span>
<a href="#l45.21"></a><span id="l45.21"> </span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -92,17 +92,17 @@ var gDownloadDirSection = {</span>
<a href="#l45.23"></a><span id="l45.23">     var folderListPref = document.getElementById(&quot;browser.download.folderList&quot;);</span>
<a href="#l45.24"></a><span id="l45.24">     var bundlePreferences = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l45.25"></a><span id="l45.25">     var downloadFolder = document.getElementById(&quot;downloadFolder&quot;);</span>
<a href="#l45.26"></a><span id="l45.26"> </span>
<a href="#l45.27"></a><span id="l45.27">     var customDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l45.28"></a><span id="l45.28">     var customIndex = customDirPref.value ? this._fileToIndex(customDirPref.value) : 0;</span>
<a href="#l45.29"></a><span id="l45.29">     if (folderListPref.value == 0 || customIndex == 0)</span>
<a href="#l45.30"></a><span id="l45.30">       downloadFolder.label = bundlePreferences.getString(&quot;desktopFolderName&quot;);</span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-    else if (folderListPref.value == 1 || customIndex == 1) </span>
<a href="#l45.32"></a><span id="l45.32" class="difflineplus">+    else if (folderListPref.value == 1 || customIndex == 1)</span>
<a href="#l45.33"></a><span id="l45.33">       downloadFolder.label = bundlePreferences.getString(&quot;myDownloadsFolderName&quot;);</span>
<a href="#l45.34"></a><span id="l45.34">     else</span>
<a href="#l45.35"></a><span id="l45.35">       downloadFolder.label = customDirPref.value ? customDirPref.value.path : &quot;&quot;;</span>
<a href="#l45.36"></a><span id="l45.36"> </span>
<a href="#l45.37"></a><span id="l45.37">     var currentDirPref = document.getElementById(&quot;browser.download.downloadDir&quot;);</span>
<a href="#l45.38"></a><span id="l45.38">     var downloadDir = currentDirPref.value || this._indexToFile(folderListPref.value);</span>
<a href="#l45.39"></a><span id="l45.39">     let urlSpec = Services.io.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l45.40"></a><span id="l45.40">       .QueryInterface(Components.interfaces.nsIFileProtocolHandler)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mail/components/preferences/dsn.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mail/components/preferences/dsn.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -13,49 +13,49 @@ var requestOnFailure;</span>
<a href="#l46.4"></a><span id="l46.4"> var requestOnFailurePref;</span>
<a href="#l46.5"></a><span id="l46.5"> </span>
<a href="#l46.6"></a><span id="l46.6"> var requestOnDelay;</span>
<a href="#l46.7"></a><span id="l46.7"> var requestOnDelayPref;</span>
<a href="#l46.8"></a><span id="l46.8"> </span>
<a href="#l46.9"></a><span id="l46.9"> var requestNever;</span>
<a href="#l46.10"></a><span id="l46.10"> var requestNeverPref;</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-function onInit() </span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+function onInit()</span>
<a href="#l46.14"></a><span id="l46.14"> {</span>
<a href="#l46.15"></a><span id="l46.15">   requestAlways = document.getElementById(&quot;always_request_on&quot;);</span>
<a href="#l46.16"></a><span id="l46.16">   requestAlwaysPref = document.getElementById(&quot;mail.dsn.always_request_on&quot;);</span>
<a href="#l46.17"></a><span id="l46.17" class="difflineminus">-  </span>
<a href="#l46.18"></a><span id="l46.18" class="difflineplus">+</span>
<a href="#l46.19"></a><span id="l46.19">   requestOnSuccess = document.getElementById(&quot;request_on_success_on&quot;);</span>
<a href="#l46.20"></a><span id="l46.20">   requestOnSuccessPref = document.getElementById(&quot;mail.dsn.request_on_success_on&quot;);</span>
<a href="#l46.21"></a><span id="l46.21" class="difflineminus">-  </span>
<a href="#l46.22"></a><span id="l46.22" class="difflineplus">+</span>
<a href="#l46.23"></a><span id="l46.23">   requestOnFailure = document.getElementById(&quot;request_on_failure_on&quot;);</span>
<a href="#l46.24"></a><span id="l46.24">   requestOnFailurePref = document.getElementById(&quot;mail.dsn.request_on_failure_on&quot;);</span>
<a href="#l46.25"></a><span id="l46.25" class="difflineminus">-  </span>
<a href="#l46.26"></a><span id="l46.26" class="difflineplus">+</span>
<a href="#l46.27"></a><span id="l46.27">   requestOnDelay = document.getElementById(&quot;request_on_delay_on&quot;);</span>
<a href="#l46.28"></a><span id="l46.28">   requestOnDelayPref = document.getElementById(&quot;mail.dsn.request_on_delay_on&quot;);</span>
<a href="#l46.29"></a><span id="l46.29" class="difflineminus">-  </span>
<a href="#l46.30"></a><span id="l46.30" class="difflineplus">+</span>
<a href="#l46.31"></a><span id="l46.31">   requestNever = document.getElementById(&quot;request_never_on&quot;);</span>
<a href="#l46.32"></a><span id="l46.32">   requestNeverPref = document.getElementById(&quot;mail.dsn.request_never_on&quot;);</span>
<a href="#l46.33"></a><span id="l46.33" class="difflineminus">-  </span>
<a href="#l46.34"></a><span id="l46.34" class="difflineplus">+</span>
<a href="#l46.35"></a><span id="l46.35">   EnableDisableAllowedDSNRequests(new Object());</span>
<a href="#l46.36"></a><span id="l46.36"> </span>
<a href="#l46.37"></a><span id="l46.37">   return true;</span>
<a href="#l46.38"></a><span id="l46.38"> }</span>
<a href="#l46.39"></a><span id="l46.39"> </span>
<a href="#l46.40"></a><span id="l46.40"> function EnableDisableAllowedDSNRequests(target)</span>
<a href="#l46.41"></a><span id="l46.41"> {</span>
<a href="#l46.42"></a><span id="l46.42">   var s = requestOnSuccess.checked;</span>
<a href="#l46.43"></a><span id="l46.43">   var f = requestOnFailure.checked;</span>
<a href="#l46.44"></a><span id="l46.44">   var d = requestOnDelay.checked;</span>
<a href="#l46.45"></a><span id="l46.45">   var n = requestNever.checked;</span>
<a href="#l46.46"></a><span id="l46.46"> </span>
<a href="#l46.47"></a><span id="l46.47">   // Case when the checkbox requestAlways must be enabled</span>
<a href="#l46.48"></a><span id="l46.48">   if (s || f || d || n) {</span>
<a href="#l46.49"></a><span id="l46.49">     requestAlways.disabled = false;</span>
<a href="#l46.50"></a><span id="l46.50" class="difflineminus">-  </span>
<a href="#l46.51"></a><span id="l46.51" class="difflineplus">+</span>
<a href="#l46.52"></a><span id="l46.52">   // Case when the checkbox requestAlways must be disabled</span>
<a href="#l46.53"></a><span id="l46.53">   } else if (!d &amp;&amp; !n &amp;&amp; !s &amp;&amp; !f) {</span>
<a href="#l46.54"></a><span id="l46.54">     requestAlwaysPref.value = false;</span>
<a href="#l46.55"></a><span id="l46.55">     requestAlways.disabled = true;</span>
<a href="#l46.56"></a><span id="l46.56">   }</span>
<a href="#l46.57"></a><span id="l46.57"> </span>
<a href="#l46.58"></a><span id="l46.58">   // Checkbox requestNever is exclusive with checkboxes requestOnSuccess, requestOnFailure, requestOnDelay</span>
<a href="#l46.59"></a><span id="l46.59">   if (target == requestNever) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -21,31 +21,31 @@ var gGeneralPane = {</span>
<a href="#l47.4"></a><span id="l47.4">   /**</span>
<a href="#l47.5"></a><span id="l47.5">    * Restores the default start page as the user's start page</span>
<a href="#l47.6"></a><span id="l47.6">    */</span>
<a href="#l47.7"></a><span id="l47.7">   restoreDefaultStartPage: function()</span>
<a href="#l47.8"></a><span id="l47.8">   {</span>
<a href="#l47.9"></a><span id="l47.9">     var startPage = document.getElementById(&quot;mailnews.start_page.url&quot;);</span>
<a href="#l47.10"></a><span id="l47.10">     startPage.value = startPage.defaultValue;</span>
<a href="#l47.11"></a><span id="l47.11">   },</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-  </span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+</span>
<a href="#l47.14"></a><span id="l47.14">   /**</span>
<a href="#l47.15"></a><span id="l47.15" class="difflineminus">-   * Returns a formatted url corresponding to the value of mailnews.start_page.url </span>
<a href="#l47.16"></a><span id="l47.16" class="difflineminus">-   * Stores the original value of mailnews.start_page.url </span>
<a href="#l47.17"></a><span id="l47.17" class="difflineplus">+   * Returns a formatted url corresponding to the value of mailnews.start_page.url</span>
<a href="#l47.18"></a><span id="l47.18" class="difflineplus">+   * Stores the original value of mailnews.start_page.url</span>
<a href="#l47.19"></a><span id="l47.19">    */</span>
<a href="#l47.20"></a><span id="l47.20">   readStartPageUrl: function()</span>
<a href="#l47.21"></a><span id="l47.21">   {</span>
<a href="#l47.22"></a><span id="l47.22">     var pref = document.getElementById(&quot;mailnews.start_page.url&quot;);</span>
<a href="#l47.23"></a><span id="l47.23">     this.mStartPageUrl = pref.value;</span>
<a href="#l47.24"></a><span id="l47.24">     return Services.urlFormatter.formatURL(this.mStartPageUrl);</span>
<a href="#l47.25"></a><span id="l47.25">   },</span>
<a href="#l47.26"></a><span id="l47.26"> </span>
<a href="#l47.27"></a><span id="l47.27">   /**</span>
<a href="#l47.28"></a><span id="l47.28">    * Returns the value of the mailnews start page url represented by the UI.</span>
<a href="#l47.29"></a><span id="l47.29" class="difflineminus">-   * If the url matches the formatted version of our stored value, then </span>
<a href="#l47.30"></a><span id="l47.30" class="difflineplus">+   * If the url matches the formatted version of our stored value, then</span>
<a href="#l47.31"></a><span id="l47.31">    * return the unformatted url.</span>
<a href="#l47.32"></a><span id="l47.32">    */</span>
<a href="#l47.33"></a><span id="l47.33">   writeStartPageUrl: function()</span>
<a href="#l47.34"></a><span id="l47.34">   {</span>
<a href="#l47.35"></a><span id="l47.35">     var startPage = document.getElementById('mailnewsStartPageUrl');</span>
<a href="#l47.36"></a><span id="l47.36">     return Services.urlFormatter.formatURL(this.mStartPageUrl) == startPage.value ? this.mStartPageUrl : startPage.value;</span>
<a href="#l47.37"></a><span id="l47.37">   },</span>
<a href="#l47.38"></a><span id="l47.38"> </span>
<a href="#l47.39"></a><span id="l47.39" class="difflineat">@@ -111,37 +111,37 @@ var gGeneralPane = {</span>
<a href="#l47.40"></a><span id="l47.40">     // if we already have a sound file, then use the path for that sound file</span>
<a href="#l47.41"></a><span id="l47.41">     // as the initial path in the dialog.</span>
<a href="#l47.42"></a><span id="l47.42">     var localFile = this.convertURLToLocalFile(document.getElementById('soundUrlLocation').value);</span>
<a href="#l47.43"></a><span id="l47.43">     if (localFile)</span>
<a href="#l47.44"></a><span id="l47.44">       fp.displayDirectory = localFile.parent;</span>
<a href="#l47.45"></a><span id="l47.45"> </span>
<a href="#l47.46"></a><span id="l47.46">     // XXX todo, persist the last sound directory and pass it in</span>
<a href="#l47.47"></a><span id="l47.47">     fp.init(window, document.getElementById(&quot;bundlePreferences&quot;).getString(&quot;soundFilePickerTitle&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l47.48"></a><span id="l47.48" class="difflineminus">-    </span>
<a href="#l47.49"></a><span id="l47.49" class="difflineplus">+</span>
<a href="#l47.50"></a><span id="l47.50">     // On Mac, allow AIFF and CAF files too</span>
<a href="#l47.51"></a><span id="l47.51">     var bundlePrefs = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l47.52"></a><span id="l47.52">     var soundFilesText = bundlePrefs.getString(&quot;soundFilesDescription&quot;);</span>
<a href="#l47.53"></a><span id="l47.53">     if (Application.platformIsMac)</span>
<a href="#l47.54"></a><span id="l47.54">       fp.appendFilter(soundFilesText, &quot;*.wav; *.aif; *.aiff; *.caf&quot;);</span>
<a href="#l47.55"></a><span id="l47.55">     else if (Application.platformIsLinux)</span>
<a href="#l47.56"></a><span id="l47.56">       fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l47.57"></a><span id="l47.57">     else</span>
<a href="#l47.58"></a><span id="l47.58">       fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l47.59"></a><span id="l47.59"> </span>
<a href="#l47.60"></a><span id="l47.60">     var ret = fp.show();</span>
<a href="#l47.61"></a><span id="l47.61" class="difflineminus">-    if (ret == nsIFilePicker.returnOK) </span>
<a href="#l47.62"></a><span id="l47.62" class="difflineplus">+    if (ret == nsIFilePicker.returnOK)</span>
<a href="#l47.63"></a><span id="l47.63">     {</span>
<a href="#l47.64"></a><span id="l47.64" class="difflineminus">-      // convert the nsILocalFile into a nsIFile url </span>
<a href="#l47.65"></a><span id="l47.65" class="difflineplus">+      // convert the nsILocalFile into a nsIFile url</span>
<a href="#l47.66"></a><span id="l47.66">       document.getElementById(&quot;mail.biff.play_sound.url&quot;).value = fp.fileURL.spec;</span>
<a href="#l47.67"></a><span id="l47.67">       this.readSoundLocation(); // XXX We shouldn't have to be doing this by hand</span>
<a href="#l47.68"></a><span id="l47.68">       this.updatePlaySound();</span>
<a href="#l47.69"></a><span id="l47.69">     }</span>
<a href="#l47.70"></a><span id="l47.70">   },</span>
<a href="#l47.71"></a><span id="l47.71" class="difflineminus">-  </span>
<a href="#l47.72"></a><span id="l47.72" class="difflineplus">+</span>
<a href="#l47.73"></a><span id="l47.73">   updatePlaySound: function()</span>
<a href="#l47.74"></a><span id="l47.74">   {</span>
<a href="#l47.75"></a><span id="l47.75">     // update the sound type radio buttons based on the state of the play sound checkbox</span>
<a href="#l47.76"></a><span id="l47.76">     var soundsDisabled = !document.getElementById('newMailNotification').checked;</span>
<a href="#l47.77"></a><span id="l47.77">     var soundTypeEl = document.getElementById('soundType');</span>
<a href="#l47.78"></a><span id="l47.78">     var soundUrlLocation = document.getElementById('soundUrlLocation').value;</span>
<a href="#l47.79"></a><span id="l47.79">     soundTypeEl.disabled = soundsDisabled;</span>
<a href="#l47.80"></a><span id="l47.80">     document.getElementById('browseForSound').disabled = soundsDisabled || soundTypeEl.value != 1;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mail/components/preferences/sendoptions.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mail/components/preferences/sendoptions.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -7,70 +7,70 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l48.4"></a><span id="l48.4"> </span>
<a href="#l48.5"></a><span id="l48.5"> var gSendOptionsDialog = {</span>
<a href="#l48.6"></a><span id="l48.6">   mPrefsBundle: null,</span>
<a href="#l48.7"></a><span id="l48.7">   mHTMLListBox: null,</span>
<a href="#l48.8"></a><span id="l48.8">   mPlainTextListBox: null,</span>
<a href="#l48.9"></a><span id="l48.9"> </span>
<a href="#l48.10"></a><span id="l48.10">   init: function ()</span>
<a href="#l48.11"></a><span id="l48.11">   {</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    this.mPrefsBundle = document.getElementById('bundlePreferences'); </span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+    this.mPrefsBundle = document.getElementById('bundlePreferences');</span>
<a href="#l48.14"></a><span id="l48.14">     this.mHTMLListBox = document.getElementById('html_domains');</span>
<a href="#l48.15"></a><span id="l48.15">     this.mPlainTextListBox = document.getElementById('plaintext_domains');</span>
<a href="#l48.16"></a><span id="l48.16"> </span>
<a href="#l48.17"></a><span id="l48.17">     var htmlDomainPrefString = document.getElementById('mailnews.html_domains').value;</span>
<a href="#l48.18"></a><span id="l48.18" class="difflineminus">-    this.loadDomains(document.getElementById('mailnews.html_domains').value, </span>
<a href="#l48.19"></a><span id="l48.19" class="difflineplus">+    this.loadDomains(document.getElementById('mailnews.html_domains').value,</span>
<a href="#l48.20"></a><span id="l48.20">                      this.mHTMLListBox);</span>
<a href="#l48.21"></a><span id="l48.21" class="difflineminus">-    this.loadDomains(document.getElementById('mailnews.plaintext_domains').value, </span>
<a href="#l48.22"></a><span id="l48.22" class="difflineplus">+    this.loadDomains(document.getElementById('mailnews.plaintext_domains').value,</span>
<a href="#l48.23"></a><span id="l48.23">                      this.mPlainTextListBox);</span>
<a href="#l48.24"></a><span id="l48.24">   },</span>
<a href="#l48.25"></a><span id="l48.25"> </span>
<a href="#l48.26"></a><span id="l48.26">   saveDomainPref: function(aHTML)</span>
<a href="#l48.27"></a><span id="l48.27">   {</span>
<a href="#l48.28"></a><span id="l48.28">     var listbox = aHTML ? this.mHTMLListBox : this.mPlainTextListBox;</span>
<a href="#l48.29"></a><span id="l48.29">     var num_domains = 0;</span>
<a href="#l48.30"></a><span id="l48.30">     var pref_string = &quot;&quot;;</span>
<a href="#l48.31"></a><span id="l48.31"> </span>
<a href="#l48.32"></a><span id="l48.32" class="difflineminus">-    for (var item = listbox.firstChild; item != null; item = item.nextSibling) </span>
<a href="#l48.33"></a><span id="l48.33" class="difflineplus">+    for (var item = listbox.firstChild; item != null; item = item.nextSibling)</span>
<a href="#l48.34"></a><span id="l48.34">     {</span>
<a href="#l48.35"></a><span id="l48.35">       var domainid = item.getAttribute('label');</span>
<a href="#l48.36"></a><span id="l48.36" class="difflineminus">-      if (domainid.length &gt; 1) </span>
<a href="#l48.37"></a><span id="l48.37" class="difflineplus">+      if (domainid.length &gt; 1)</span>
<a href="#l48.38"></a><span id="l48.38">       {</span>
<a href="#l48.39"></a><span id="l48.39">         num_domains++;</span>
<a href="#l48.40"></a><span id="l48.40"> </span>
<a href="#l48.41"></a><span id="l48.41">         //separate &gt;1 domains by commas</span>
<a href="#l48.42"></a><span id="l48.42">         if (num_domains &gt; 1)</span>
<a href="#l48.43"></a><span id="l48.43">           pref_string = pref_string + &quot;,&quot; + domainid;</span>
<a href="#l48.44"></a><span id="l48.44">         else</span>
<a href="#l48.45"></a><span id="l48.45">           pref_string = domainid;</span>
<a href="#l48.46"></a><span id="l48.46">       }</span>
<a href="#l48.47"></a><span id="l48.47">     }</span>
<a href="#l48.48"></a><span id="l48.48" class="difflineminus">-    </span>
<a href="#l48.49"></a><span id="l48.49" class="difflineplus">+</span>
<a href="#l48.50"></a><span id="l48.50">     return pref_string;</span>
<a href="#l48.51"></a><span id="l48.51">   },</span>
<a href="#l48.52"></a><span id="l48.52"> </span>
<a href="#l48.53"></a><span id="l48.53">   loadDomains: function (aPrefString, aListBox)</span>
<a href="#l48.54"></a><span id="l48.54">   {</span>
<a href="#l48.55"></a><span id="l48.55">     var arrayOfPrefs = aPrefString.split(',');</span>
<a href="#l48.56"></a><span id="l48.56">     if (arrayOfPrefs)</span>
<a href="#l48.57"></a><span id="l48.57" class="difflineminus">-      for (var i = 0; i &lt; arrayOfPrefs.length; i++) </span>
<a href="#l48.58"></a><span id="l48.58" class="difflineplus">+      for (var i = 0; i &lt; arrayOfPrefs.length; i++)</span>
<a href="#l48.59"></a><span id="l48.59">       {</span>
<a href="#l48.60"></a><span id="l48.60">         var str = arrayOfPrefs[i].replace(/ /g,&quot;&quot;);</span>
<a href="#l48.61"></a><span id="l48.61">         if (str)</span>
<a href="#l48.62"></a><span id="l48.62">           this.addItemToDomainList(aListBox, str);</span>
<a href="#l48.63"></a><span id="l48.63">       }</span>
<a href="#l48.64"></a><span id="l48.64">   },</span>
<a href="#l48.65"></a><span id="l48.65"> </span>
<a href="#l48.66"></a><span id="l48.66">   removeDomains: function(aHTML)</span>
<a href="#l48.67"></a><span id="l48.67">   {</span>
<a href="#l48.68"></a><span id="l48.68">     var listbox = aHTML ? this.mHTMLListBox : this.mPlainTextListBox;</span>
<a href="#l48.69"></a><span id="l48.69"> </span>
<a href="#l48.70"></a><span id="l48.70">     var currentIndex = listbox.currentIndex;</span>
<a href="#l48.71"></a><span id="l48.71"> </span>
<a href="#l48.72"></a><span id="l48.72" class="difflineminus">-    while (listbox.selectedItems.length &gt; 0) </span>
<a href="#l48.73"></a><span id="l48.73" class="difflineplus">+    while (listbox.selectedItems.length &gt; 0)</span>
<a href="#l48.74"></a><span id="l48.74">       listbox.selectedItems[0].remove();</span>
<a href="#l48.75"></a><span id="l48.75"> </span>
<a href="#l48.76"></a><span id="l48.76">     document.getElementById('SendOptionsDialogPane').userChangedValue(listbox);</span>
<a href="#l48.77"></a><span id="l48.77">   },</span>
<a href="#l48.78"></a><span id="l48.78"> </span>
<a href="#l48.79"></a><span id="l48.79">   addDomain: function (aHTML)</span>
<a href="#l48.80"></a><span id="l48.80">   {</span>
<a href="#l48.81"></a><span id="l48.81">     var listbox = aHTML ? this.mHTMLListBox : this.mPlainTextListBox;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mail/components/search/WinSearchIntegration.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mail/components/search/WinSearchIntegration.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -173,17 +173,17 @@ let SearchIntegration =</span>
<a href="#l49.4"></a><span id="l49.4">     // If the service isn't running, then we should stay in backoff mode</span>
<a href="#l49.5"></a><span id="l49.5">     if (!serviceRunning)</span>
<a href="#l49.6"></a><span id="l49.6">     {</span>
<a href="#l49.7"></a><span id="l49.7">       this._log.info(&quot;Windows Search service not running&quot;);</span>
<a href="#l49.8"></a><span id="l49.8">       this.osComponentsNotRunning = true;</span>
<a href="#l49.9"></a><span id="l49.9">       this._initSupport(false);</span>
<a href="#l49.10"></a><span id="l49.10">       return;</span>
<a href="#l49.11"></a><span id="l49.11">     }</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">- </span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+</span>
<a href="#l49.14"></a><span id="l49.14">     let enabled = this.prefEnabled;</span>
<a href="#l49.15"></a><span id="l49.15"> </span>
<a href="#l49.16"></a><span id="l49.16">     if (enabled)</span>
<a href="#l49.17"></a><span id="l49.17">       this._log.info(&quot;Initializing Windows Search integration&quot;);</span>
<a href="#l49.18"></a><span id="l49.18">     this._initSupport(enabled);</span>
<a href="#l49.19"></a><span id="l49.19">   },</span>
<a href="#l49.20"></a><span id="l49.20"> </span>
<a href="#l49.21"></a><span id="l49.21">   /**</span>
<a href="#l49.22"></a><span id="l49.22" class="difflineat">@@ -225,17 +225,17 @@ let SearchIntegration =</span>
<a href="#l49.23"></a><span id="l49.23">    * request was denied</span>
<a href="#l49.24"></a><span id="l49.24">    */</span>
<a href="#l49.25"></a><span id="l49.25">   deregister: function winsearch_deregister()</span>
<a href="#l49.26"></a><span id="l49.26">   {</span>
<a href="#l49.27"></a><span id="l49.27">     try {</span>
<a href="#l49.28"></a><span id="l49.28">       this._winSearchHelper.runSetup(false);</span>
<a href="#l49.29"></a><span id="l49.29">     }</span>
<a href="#l49.30"></a><span id="l49.30">     catch (e) { return false; }</span>
<a href="#l49.31"></a><span id="l49.31" class="difflineminus">-    </span>
<a href="#l49.32"></a><span id="l49.32" class="difflineplus">+</span>
<a href="#l49.33"></a><span id="l49.33">     return true;</span>
<a href="#l49.34"></a><span id="l49.34">   },</span>
<a href="#l49.35"></a><span id="l49.35"> </span>
<a href="#l49.36"></a><span id="l49.36">   /// The stream listener to read messages</span>
<a href="#l49.37"></a><span id="l49.37">   _streamListener: {</span>
<a href="#l49.38"></a><span id="l49.38">     __proto__: SearchSupport._streamListenerBase,</span>
<a href="#l49.39"></a><span id="l49.39"> </span>
<a href="#l49.40"></a><span id="l49.40">     /// Buffer to store the message</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mail/components/test/unit/test_about_support.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mail/components/test/unit/test_about_support.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -168,17 +168,17 @@ function test_get_account_details() {</span>
<a href="#l50.4"></a><span id="l50.4">     // Check that we're expecting to see this server</span>
<a href="#l50.5"></a><span id="l50.5">     let toSeeIndex = accountsToSee.indexOf(details.key);</span>
<a href="#l50.6"></a><span id="l50.6">     do_check_neq(toSeeIndex, -1);</span>
<a href="#l50.7"></a><span id="l50.7">     accountsToSee.splice(toSeeIndex, 1);</span>
<a href="#l50.8"></a><span id="l50.8"> </span>
<a href="#l50.9"></a><span id="l50.9">     verify_account_details(details);</span>
<a href="#l50.10"></a><span id="l50.10">   }</span>
<a href="#l50.11"></a><span id="l50.11">   // Check that we got all the accounts we wanted to see</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-  do_check_eq(accountsToSee.length, 0);  </span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+  do_check_eq(accountsToSee.length, 0);</span>
<a href="#l50.14"></a><span id="l50.14"> }</span>
<a href="#l50.15"></a><span id="l50.15"> </span>
<a href="#l50.16"></a><span id="l50.16"> var tests = [</span>
<a href="#l50.17"></a><span id="l50.17">   test_get_file_system_type,</span>
<a href="#l50.18"></a><span id="l50.18">   test_get_account_details,</span>
<a href="#l50.19"></a><span id="l50.19"> ];</span>
<a href="#l50.20"></a><span id="l50.20"> </span>
<a href="#l50.21"></a><span id="l50.21"> function run_test() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mail/components/wintaskbar/windowsJumpLists.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mail/components/wintaskbar/windowsJumpLists.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -68,17 +68,17 @@ let WinTaskbarJumpList = {</span>
<a href="#l51.4"></a><span id="l51.4"> </span>
<a href="#l51.5"></a><span id="l51.5">   startup: function WTBJL_startup() {</span>
<a href="#l51.6"></a><span id="l51.6">     // exit if this isn't win7 or higher.</span>
<a href="#l51.7"></a><span id="l51.7">     if (!this._initTaskbar())</span>
<a href="#l51.8"></a><span id="l51.8">       return;</span>
<a href="#l51.9"></a><span id="l51.9"> </span>
<a href="#l51.10"></a><span id="l51.10">     // Win shell shortcut maintenance. If we've gone through an update,</span>
<a href="#l51.11"></a><span id="l51.11">     // this will update any pinned taskbar shortcuts. Not specific to</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-    // jump lists, but this was a convienent place to call it. </span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+    // jump lists, but this was a convienent place to call it.</span>
<a href="#l51.14"></a><span id="l51.14">     try {</span>
<a href="#l51.15"></a><span id="l51.15">       // dev builds may not have helper.exe, ignore failures.</span>
<a href="#l51.16"></a><span id="l51.16">       this._shortcutMaintenance();</span>
<a href="#l51.17"></a><span id="l51.17">     }</span>
<a href="#l51.18"></a><span id="l51.18">     catch (ex) {</span>
<a href="#l51.19"></a><span id="l51.19">     }</span>
<a href="#l51.20"></a><span id="l51.20"> </span>
<a href="#l51.21"></a><span id="l51.21">     // Store our task list config data</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mail/extensions/mailviews/content/mailViewList.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mail/extensions/mailviews/content/mailViewList.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -1,23 +1,23 @@</span>
<a href="#l52.4"></a><span id="l52.4"> /* -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l52.5"></a><span id="l52.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l52.6"></a><span id="l52.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l52.7"></a><span id="l52.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l52.8"></a><span id="l52.8"> </span>
<a href="#l52.9"></a><span id="l52.9"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l52.10"></a><span id="l52.10"> </span>
<a href="#l52.11"></a><span id="l52.11" class="difflineminus">-var gMailListView; </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-var gListBox; </span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+var gMailListView;</span>
<a href="#l52.14"></a><span id="l52.14" class="difflineplus">+var gListBox;</span>
<a href="#l52.15"></a><span id="l52.15"> var gEditButton;</span>
<a href="#l52.16"></a><span id="l52.16"> var gDeleteButton;</span>
<a href="#l52.17"></a><span id="l52.17"> </span>
<a href="#l52.18"></a><span id="l52.18"> function mailViewListOnLoad()</span>
<a href="#l52.19"></a><span id="l52.19"> {</span>
<a href="#l52.20"></a><span id="l52.20" class="difflineminus">-  gMailListView = Components.classes[&quot;@mozilla.org/messenger/mailviewlist;1&quot;].getService(Components.interfaces.nsIMsgMailViewList);; </span>
<a href="#l52.21"></a><span id="l52.21" class="difflineplus">+  gMailListView = Components.classes[&quot;@mozilla.org/messenger/mailviewlist;1&quot;].getService(Components.interfaces.nsIMsgMailViewList);;</span>
<a href="#l52.22"></a><span id="l52.22">   gListBox = document.getElementById('mailViewList');</span>
<a href="#l52.23"></a><span id="l52.23"> </span>
<a href="#l52.24"></a><span id="l52.24">   // Construct list view based on current mail view list data</span>
<a href="#l52.25"></a><span id="l52.25">   refreshListView(null);</span>
<a href="#l52.26"></a><span id="l52.26">   gEditButton = document.getElementById('editButton');</span>
<a href="#l52.27"></a><span id="l52.27">   gDeleteButton = document.getElementById('deleteButton');</span>
<a href="#l52.28"></a><span id="l52.28"> </span>
<a href="#l52.29"></a><span id="l52.29">   updateButtons();</span>
<a href="#l52.30"></a><span id="l52.30" class="difflineat">@@ -25,33 +25,33 @@ function mailViewListOnLoad()</span>
<a href="#l52.31"></a><span id="l52.31"> </span>
<a href="#l52.32"></a><span id="l52.32"> function refreshListView(aSelectedMailView)</span>
<a href="#l52.33"></a><span id="l52.33"> {</span>
<a href="#l52.34"></a><span id="l52.34">   // remove any existing items in the view...</span>
<a href="#l52.35"></a><span id="l52.35">   for (var index = gListBox.getRowCount(); index &gt; 0; index--)</span>
<a href="#l52.36"></a><span id="l52.36">     gListBox.getItemAtIndex(index - 1).remove();</span>
<a href="#l52.37"></a><span id="l52.37"> </span>
<a href="#l52.38"></a><span id="l52.38">   var numItems = gMailListView.mailViewCount;</span>
<a href="#l52.39"></a><span id="l52.39" class="difflineminus">-  var mailView; </span>
<a href="#l52.40"></a><span id="l52.40" class="difflineplus">+  var mailView;</span>
<a href="#l52.41"></a><span id="l52.41">   for (index = 0; index &lt; numItems; index++)</span>
<a href="#l52.42"></a><span id="l52.42">   {</span>
<a href="#l52.43"></a><span id="l52.43">     mailView = gMailListView.getMailViewAt(index);</span>
<a href="#l52.44"></a><span id="l52.44">     gListBox.appendItem(mailView.prettyName, index);</span>
<a href="#l52.45"></a><span id="l52.45">     if (aSelectedMailView &amp;&amp; (mailView.prettyName == aSelectedMailView.prettyName) )</span>
<a href="#l52.46"></a><span id="l52.46">       gListBox.selectedIndex = index;</span>
<a href="#l52.47"></a><span id="l52.47">   }</span>
<a href="#l52.48"></a><span id="l52.48"> }</span>
<a href="#l52.49"></a><span id="l52.49"> </span>
<a href="#l52.50"></a><span id="l52.50"> function onNewMailView()</span>
<a href="#l52.51"></a><span id="l52.51"> {</span>
<a href="#l52.52"></a><span id="l52.52">    window.openDialog('chrome://messenger/content/mailViewSetup.xul', &quot;&quot;, 'centerscreen,resizable,modal,titlebar,chrome', {onOkCallback: refreshListView});</span>
<a href="#l52.53"></a><span id="l52.53"> }</span>
<a href="#l52.54"></a><span id="l52.54"> </span>
<a href="#l52.55"></a><span id="l52.55"> function onDeleteMailView()</span>
<a href="#l52.56"></a><span id="l52.56" class="difflineminus">-{  </span>
<a href="#l52.57"></a><span id="l52.57" class="difflineplus">+{</span>
<a href="#l52.58"></a><span id="l52.58">   var bundle = Services.strings.createBundle(&quot;chrome://messenger/locale/messenger.properties&quot;);</span>
<a href="#l52.59"></a><span id="l52.59"> </span>
<a href="#l52.60"></a><span id="l52.60">   if (!Services.prompt.confirm(window, bundle.GetStringFromName(&quot;confirmViewDeleteTitle&quot;), bundle.GetStringFromName(&quot;confirmViewDeleteMessage&quot;)))</span>
<a href="#l52.61"></a><span id="l52.61">     return;</span>
<a href="#l52.62"></a><span id="l52.62"> </span>
<a href="#l52.63"></a><span id="l52.63">   // get the selected index</span>
<a href="#l52.64"></a><span id="l52.64">   var selectedIndex = gListBox.selectedIndex;</span>
<a href="#l52.65"></a><span id="l52.65">   if (selectedIndex &gt;= 0)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mail/extensions/mailviews/content/mailViewSetup.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mail/extensions/mailviews/content/mailViewSetup.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -9,103 +9,103 @@ var gMailView = null;</span>
<a href="#l53.4"></a><span id="l53.4"> var dialog;</span>
<a href="#l53.5"></a><span id="l53.5"> </span>
<a href="#l53.6"></a><span id="l53.6"> function mailViewOnLoad()</span>
<a href="#l53.7"></a><span id="l53.7"> {</span>
<a href="#l53.8"></a><span id="l53.8">   initializeSearchWidgets();</span>
<a href="#l53.9"></a><span id="l53.9">   initializeMailViewOverrides();</span>
<a href="#l53.10"></a><span id="l53.10">   dialog = {};</span>
<a href="#l53.11"></a><span id="l53.11"> </span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-  if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0]) </span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+  if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0])</span>
<a href="#l53.14"></a><span id="l53.14">   {</span>
<a href="#l53.15"></a><span id="l53.15">     var args = window.arguments[0];</span>
<a href="#l53.16"></a><span id="l53.16" class="difflineminus">-    if (&quot;mailView&quot; in args) </span>
<a href="#l53.17"></a><span id="l53.17" class="difflineminus">-      gMailView = window.arguments[0].mailView; </span>
<a href="#l53.18"></a><span id="l53.18" class="difflineplus">+    if (&quot;mailView&quot; in args)</span>
<a href="#l53.19"></a><span id="l53.19" class="difflineplus">+      gMailView = window.arguments[0].mailView;</span>
<a href="#l53.20"></a><span id="l53.20">     if (&quot;onOkCallback&quot; in args)</span>
<a href="#l53.21"></a><span id="l53.21">       dialog.okCallback =  window.arguments[0].onOkCallback;</span>
<a href="#l53.22"></a><span id="l53.22">   }</span>
<a href="#l53.23"></a><span id="l53.23"> </span>
<a href="#l53.24"></a><span id="l53.24">   dialog.OKButton = document.documentElement.getButton(&quot;accept&quot;);</span>
<a href="#l53.25"></a><span id="l53.25">   dialog.nameField = document.getElementById(&quot;name&quot;);</span>
<a href="#l53.26"></a><span id="l53.26">   dialog.nameField.focus();</span>
<a href="#l53.27"></a><span id="l53.27"> </span>
<a href="#l53.28"></a><span id="l53.28" class="difflineminus">-  setSearchScope(nsMsgSearchScope.offlineMail);  </span>
<a href="#l53.29"></a><span id="l53.29" class="difflineplus">+  setSearchScope(nsMsgSearchScope.offlineMail);</span>
<a href="#l53.30"></a><span id="l53.30"> </span>
<a href="#l53.31"></a><span id="l53.31">   if (gMailView)</span>
<a href="#l53.32"></a><span id="l53.32">   {</span>
<a href="#l53.33"></a><span id="l53.33">     dialog.nameField.value = gMailView.prettyName;</span>
<a href="#l53.34"></a><span id="l53.34">     initializeSearchRows(nsMsgSearchScope.offlineMail, gMailView.searchTerms);</span>
<a href="#l53.35"></a><span id="l53.35">   }</span>
<a href="#l53.36"></a><span id="l53.36">   else</span>
<a href="#l53.37"></a><span id="l53.37">     onMore(null);</span>
<a href="#l53.38"></a><span id="l53.38" class="difflineminus">- </span>
<a href="#l53.39"></a><span id="l53.39" class="difflineplus">+</span>
<a href="#l53.40"></a><span id="l53.40">   doEnabling();</span>
<a href="#l53.41"></a><span id="l53.41"> }</span>
<a href="#l53.42"></a><span id="l53.42"> </span>
<a href="#l53.43"></a><span id="l53.43"> function mailViewOnUnLoad()</span>
<a href="#l53.44"></a><span id="l53.44"> {</span>
<a href="#l53.45"></a><span id="l53.45"> </span>
<a href="#l53.46"></a><span id="l53.46"> }</span>
<a href="#l53.47"></a><span id="l53.47"> </span>
<a href="#l53.48"></a><span id="l53.48"> function onOK()</span>
<a href="#l53.49"></a><span id="l53.49"> {</span>
<a href="#l53.50"></a><span id="l53.50">   var mailViewList = Components.classes[&quot;@mozilla.org/messenger/mailviewlist;1&quot;].getService(Components.interfaces.nsIMsgMailViewList);</span>
<a href="#l53.51"></a><span id="l53.51" class="difflineminus">-  </span>
<a href="#l53.52"></a><span id="l53.52" class="difflineplus">+</span>
<a href="#l53.53"></a><span id="l53.53">   // reflect the search widgets back into the search session</span>
<a href="#l53.54"></a><span id="l53.54">   var newMailView = null;</span>
<a href="#l53.55"></a><span id="l53.55">   if (gMailView)</span>
<a href="#l53.56"></a><span id="l53.56">   {</span>
<a href="#l53.57"></a><span id="l53.57">     saveSearchTerms(gMailView.searchTerms, gMailView);</span>
<a href="#l53.58"></a><span id="l53.58">     // if the name of the view has been changed...</span>
<a href="#l53.59"></a><span id="l53.59">     if (gMailView.prettyName != dialog.nameField.value)</span>
<a href="#l53.60"></a><span id="l53.60">       gMailView.mailViewName = dialog.nameField.value;</span>
<a href="#l53.61"></a><span id="l53.61">   }</span>
<a href="#l53.62"></a><span id="l53.62" class="difflineminus">-  else  </span>
<a href="#l53.63"></a><span id="l53.63" class="difflineplus">+  else</span>
<a href="#l53.64"></a><span id="l53.64">   {</span>
<a href="#l53.65"></a><span id="l53.65" class="difflineminus">-    // otherwise, create a new mail view </span>
<a href="#l53.66"></a><span id="l53.66" class="difflineplus">+    // otherwise, create a new mail view</span>
<a href="#l53.67"></a><span id="l53.67">     newMailView = mailViewList.createMailView();</span>
<a href="#l53.68"></a><span id="l53.68"> </span>
<a href="#l53.69"></a><span id="l53.69">     saveSearchTerms(newMailView.searchTerms, newMailView);</span>
<a href="#l53.70"></a><span id="l53.70">     newMailView.mailViewName = dialog.nameField.value;</span>
<a href="#l53.71"></a><span id="l53.71">     // now add the mail view to our mail view list</span>
<a href="#l53.72"></a><span id="l53.72">     mailViewList.addMailView(newMailView);</span>
<a href="#l53.73"></a><span id="l53.73">   }</span>
<a href="#l53.74"></a><span id="l53.74" class="difflineminus">-    </span>
<a href="#l53.75"></a><span id="l53.75" class="difflineplus">+</span>
<a href="#l53.76"></a><span id="l53.76">   mailViewList.save();</span>
<a href="#l53.77"></a><span id="l53.77" class="difflineminus">- </span>
<a href="#l53.78"></a><span id="l53.78" class="difflineplus">+</span>
<a href="#l53.79"></a><span id="l53.79">   if (dialog.okCallback)</span>
<a href="#l53.80"></a><span id="l53.80">     dialog.okCallback(gMailView ? gMailView : newMailView);</span>
<a href="#l53.81"></a><span id="l53.81"> </span>
<a href="#l53.82"></a><span id="l53.82">   return true;</span>
<a href="#l53.83"></a><span id="l53.83"> }</span>
<a href="#l53.84"></a><span id="l53.84"> </span>
<a href="#l53.85"></a><span id="l53.85"> function initializeMailViewOverrides()</span>
<a href="#l53.86"></a><span id="l53.86"> {</span>
<a href="#l53.87"></a><span id="l53.87">   // replace some text with something we want. Need to add some ids to searchOverlay.js</span>
<a href="#l53.88"></a><span id="l53.88">   //var orButton = document.getElementById('or');</span>
<a href="#l53.89"></a><span id="l53.89">   //orButton.setAttribute('label', 'Any of the following');</span>
<a href="#l53.90"></a><span id="l53.90">   //var andButton = document.getElementById('and');</span>
<a href="#l53.91"></a><span id="l53.91">   //andButton.setAttribute('label', 'All of the following');</span>
<a href="#l53.92"></a><span id="l53.92">   // matchAll doesn't make sense for views, since views are a single folder</span>
<a href="#l53.93"></a><span id="l53.93">   hideMatchAllItem();</span>
<a href="#l53.94"></a><span id="l53.94" class="difflineminus">-  </span>
<a href="#l53.95"></a><span id="l53.95" class="difflineplus">+</span>
<a href="#l53.96"></a><span id="l53.96"> }</span>
<a href="#l53.97"></a><span id="l53.97"> </span>
<a href="#l53.98"></a><span id="l53.98"> function UpdateAfterCustomHeaderChange()</span>
<a href="#l53.99"></a><span id="l53.99"> {</span>
<a href="#l53.100"></a><span id="l53.100">   updateSearchAttributes();</span>
<a href="#l53.101"></a><span id="l53.101"> }</span>
<a href="#l53.102"></a><span id="l53.102"> </span>
<a href="#l53.103"></a><span id="l53.103"> function doEnabling()</span>
<a href="#l53.104"></a><span id="l53.104"> {</span>
<a href="#l53.105"></a><span id="l53.105" class="difflineminus">-  if (dialog.nameField.value) </span>
<a href="#l53.106"></a><span id="l53.106" class="difflineplus">+  if (dialog.nameField.value)</span>
<a href="#l53.107"></a><span id="l53.107">   {</span>
<a href="#l53.108"></a><span id="l53.108">     if (dialog.OKButton.disabled)</span>
<a href="#l53.109"></a><span id="l53.109">       dialog.OKButton.disabled = false;</span>
<a href="#l53.110"></a><span id="l53.110" class="difflineminus">-  } else </span>
<a href="#l53.111"></a><span id="l53.111" class="difflineplus">+  } else</span>
<a href="#l53.112"></a><span id="l53.112">   {</span>
<a href="#l53.113"></a><span id="l53.113">     if (!dialog.OKButton.disabled)</span>
<a href="#l53.114"></a><span id="l53.114">       dialog.OKButton.disabled = true;</span>
<a href="#l53.115"></a><span id="l53.115">   }</span>
<a href="#l53.116"></a><span id="l53.116"> }</span>
<a href="#l53.117"></a><span id="l53.117"> </span>
<a href="#l53.118"></a><span id="l53.118"> function onEnterInSearchTerm()</span>
<a href="#l53.119"></a><span id="l53.119"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mail/extensions/smime/content/msgHdrViewSMIMEOverlay.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -12,18 +12,18 @@ var gEncryptedURIService = null;</span>
<a href="#l54.4"></a><span id="l54.4"> var gMyLastEncryptedURI = null;</span>
<a href="#l54.5"></a><span id="l54.5"> </span>
<a href="#l54.6"></a><span id="l54.6"> var gSMIMEBundle = null;</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8"> // manipulates some globals from msgReadSMIMEOverlay.js</span>
<a href="#l54.9"></a><span id="l54.9"> </span>
<a href="#l54.10"></a><span id="l54.10"> const nsICMSMessageErrors = Components.interfaces.nsICMSMessageErrors;</span>
<a href="#l54.11"></a><span id="l54.11"> </span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-var smimeHeaderSink = </span>
<a href="#l54.13"></a><span id="l54.13" class="difflineminus">-{ </span>
<a href="#l54.14"></a><span id="l54.14" class="difflineplus">+var smimeHeaderSink =</span>
<a href="#l54.15"></a><span id="l54.15" class="difflineplus">+{</span>
<a href="#l54.16"></a><span id="l54.16">   maxWantedNesting: function()</span>
<a href="#l54.17"></a><span id="l54.17">   {</span>
<a href="#l54.18"></a><span id="l54.18">     return 1;</span>
<a href="#l54.19"></a><span id="l54.19">   },</span>
<a href="#l54.20"></a><span id="l54.20"> </span>
<a href="#l54.21"></a><span id="l54.21">   signedStatus: function(aNestingLevel, aSignatureStatus, aSignerCert)</span>
<a href="#l54.22"></a><span id="l54.22">   {</span>
<a href="#l54.23"></a><span id="l54.23">     if (aNestingLevel &gt; 1) {</span>
<a href="#l54.24"></a><span id="l54.24" class="difflineat">@@ -31,17 +31,17 @@ var smimeHeaderSink =</span>
<a href="#l54.25"></a><span id="l54.25">       return;</span>
<a href="#l54.26"></a><span id="l54.26">     }</span>
<a href="#l54.27"></a><span id="l54.27"> </span>
<a href="#l54.28"></a><span id="l54.28">     gSignatureStatus = aSignatureStatus;</span>
<a href="#l54.29"></a><span id="l54.29">     gSignerCert = aSignerCert;</span>
<a href="#l54.30"></a><span id="l54.30"> </span>
<a href="#l54.31"></a><span id="l54.31">     gSMIMEContainer.collapsed = false;</span>
<a href="#l54.32"></a><span id="l54.32">     gSignedUINode.collapsed = false;</span>
<a href="#l54.33"></a><span id="l54.33" class="difflineminus">-  </span>
<a href="#l54.34"></a><span id="l54.34" class="difflineplus">+</span>
<a href="#l54.35"></a><span id="l54.35">     switch (aSignatureStatus) {</span>
<a href="#l54.36"></a><span id="l54.36">       case nsICMSMessageErrors.SUCCESS:</span>
<a href="#l54.37"></a><span id="l54.37">         gSignedUINode.setAttribute(&quot;signed&quot;, &quot;ok&quot;);</span>
<a href="#l54.38"></a><span id="l54.38">         gStatusBar.setAttribute(&quot;signed&quot;, &quot;ok&quot;);</span>
<a href="#l54.39"></a><span id="l54.39">         break;</span>
<a href="#l54.40"></a><span id="l54.40"> </span>
<a href="#l54.41"></a><span id="l54.41">       case nsICMSMessageErrors.VERIFY_NOT_YET_ATTEMPTED:</span>
<a href="#l54.42"></a><span id="l54.42">         gSignedUINode.setAttribute(&quot;signed&quot;, &quot;unknown&quot;);</span>
<a href="#l54.43"></a><span id="l54.43" class="difflineat">@@ -66,17 +66,17 @@ var smimeHeaderSink =</span>
<a href="#l54.44"></a><span id="l54.44">     if (aNestingLevel &gt; 1) {</span>
<a href="#l54.45"></a><span id="l54.45">       // we are not interested</span>
<a href="#l54.46"></a><span id="l54.46">       return;</span>
<a href="#l54.47"></a><span id="l54.47">     }</span>
<a href="#l54.48"></a><span id="l54.48"> </span>
<a href="#l54.49"></a><span id="l54.49">     gEncryptionStatus = aEncryptionStatus;</span>
<a href="#l54.50"></a><span id="l54.50">     gEncryptionCert = aRecipientCert;</span>
<a href="#l54.51"></a><span id="l54.51"> </span>
<a href="#l54.52"></a><span id="l54.52" class="difflineminus">-    gSMIMEContainer.collapsed = false; </span>
<a href="#l54.53"></a><span id="l54.53" class="difflineplus">+    gSMIMEContainer.collapsed = false;</span>
<a href="#l54.54"></a><span id="l54.54">     gEncryptedUINode.collapsed = false;</span>
<a href="#l54.55"></a><span id="l54.55"> </span>
<a href="#l54.56"></a><span id="l54.56">     if (nsICMSMessageErrors.SUCCESS == aEncryptionStatus)</span>
<a href="#l54.57"></a><span id="l54.57">     {</span>
<a href="#l54.58"></a><span id="l54.58">       gEncryptedUINode.setAttribute(&quot;encrypted&quot;, &quot;ok&quot;);</span>
<a href="#l54.59"></a><span id="l54.59">       gStatusBar.setAttribute(&quot;encrypted&quot;, &quot;ok&quot;);</span>
<a href="#l54.60"></a><span id="l54.60">     }</span>
<a href="#l54.61"></a><span id="l54.61">     else</span>
<a href="#l54.62"></a><span id="l54.62" class="difflineat">@@ -133,20 +133,20 @@ function forgetEncryptedURI()</span>
<a href="#l54.63"></a><span id="l54.63">     gMyLastEncryptedURI = null;</span>
<a href="#l54.64"></a><span id="l54.64">   }</span>
<a href="#l54.65"></a><span id="l54.65"> }</span>
<a href="#l54.66"></a><span id="l54.66"> </span>
<a href="#l54.67"></a><span id="l54.67"> function onSMIMEStartHeaders()</span>
<a href="#l54.68"></a><span id="l54.68"> {</span>
<a href="#l54.69"></a><span id="l54.69">   gEncryptionStatus = -1;</span>
<a href="#l54.70"></a><span id="l54.70">   gSignatureStatus = -1;</span>
<a href="#l54.71"></a><span id="l54.71" class="difflineminus">-  </span>
<a href="#l54.72"></a><span id="l54.72" class="difflineplus">+</span>
<a href="#l54.73"></a><span id="l54.73">   gSignerCert = null;</span>
<a href="#l54.74"></a><span id="l54.74">   gEncryptionCert = null;</span>
<a href="#l54.75"></a><span id="l54.75" class="difflineminus">-  </span>
<a href="#l54.76"></a><span id="l54.76" class="difflineplus">+</span>
<a href="#l54.77"></a><span id="l54.77">   gSMIMEContainer.collapsed = true;</span>
<a href="#l54.78"></a><span id="l54.78"> </span>
<a href="#l54.79"></a><span id="l54.79">   gSignedUINode.collapsed = true;</span>
<a href="#l54.80"></a><span id="l54.80">   gSignedUINode.removeAttribute(&quot;signed&quot;);</span>
<a href="#l54.81"></a><span id="l54.81">   gStatusBar.removeAttribute(&quot;signed&quot;);</span>
<a href="#l54.82"></a><span id="l54.82"> </span>
<a href="#l54.83"></a><span id="l54.83">   gEncryptedUINode.collapsed = true;</span>
<a href="#l54.84"></a><span id="l54.84">   gEncryptedUINode.removeAttribute(&quot;encrypted&quot;);</span>
<a href="#l54.85"></a><span id="l54.85" class="difflineat">@@ -185,17 +185,17 @@ function msgHdrViewSMIMEOnLoad(event)</span>
<a href="#l54.86"></a><span id="l54.86"> </span>
<a href="#l54.87"></a><span id="l54.87">   // add ourself to the list of message display listeners so we get notified when we are about to display a</span>
<a href="#l54.88"></a><span id="l54.88">   // message.</span>
<a href="#l54.89"></a><span id="l54.89">   var listener = {};</span>
<a href="#l54.90"></a><span id="l54.90">   listener.onStartHeaders = onSMIMEStartHeaders;</span>
<a href="#l54.91"></a><span id="l54.91">   listener.onEndHeaders = onSMIMEEndHeaders;</span>
<a href="#l54.92"></a><span id="l54.92">   gMessageListeners.push(listener);</span>
<a href="#l54.93"></a><span id="l54.93"> </span>
<a href="#l54.94"></a><span id="l54.94" class="difflineminus">-  gEncryptedURIService = </span>
<a href="#l54.95"></a><span id="l54.95" class="difflineplus">+  gEncryptedURIService =</span>
<a href="#l54.96"></a><span id="l54.96">     Components.classes[&quot;@mozilla.org/messenger-smime/smime-encrypted-uris-service;1&quot;]</span>
<a href="#l54.97"></a><span id="l54.97">     .getService(Components.interfaces.nsIEncryptedSMIMEURIsService);</span>
<a href="#l54.98"></a><span id="l54.98"> }</span>
<a href="#l54.99"></a><span id="l54.99"> </span>
<a href="#l54.100"></a><span id="l54.100"> function msgHdrViewSMIMEOnUnload(event)</span>
<a href="#l54.101"></a><span id="l54.101"> {</span>
<a href="#l54.102"></a><span id="l54.102">   window.crypto.enableSmartCardEvents = false;</span>
<a href="#l54.103"></a><span id="l54.103">   document.removeEventListener(&quot;smartcard-insert&quot;, onSmartCardChange, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mail/jquery/jquery-1.6.4.min.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mail/jquery/jquery-1.6.4.min.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -1,4 +1,4 @@</span>
<a href="#l55.4"></a><span id="l55.4"> /*! jQuery v1.6.4 http://jquery.com/ | http://jquery.org/license */</span>
<a href="#l55.5"></a><span id="l55.5" class="difflineminus">-(function(a,b){function cu(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cr(a){if(!cg[a]){var b=c.body,d=f(&quot;&lt;&quot;+a+&quot;&gt;&quot;).appendTo(b),e=d.css(&quot;display&quot;);d.remove();if(e===&quot;none&quot;||e===&quot;&quot;){ch||(ch=c.createElement(&quot;iframe&quot;),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode===&quot;CSS1Compat&quot;?&quot;&lt;!doctype html&gt;&quot;:&quot;&quot;)+&quot;&lt;html&gt;&lt;body&gt;&quot;),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,&quot;display&quot;),b.removeChild(ch)}cg[a]=e}return cg[a]}function cq(a,b){var c={};f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a});return c}function cp(){cn=b}function co(){setTimeout(cp,0);return cn=f.now()}function cf(){try{return new a.ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)}catch(b){}}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function b$(a,c){a.dataFilter&amp;&amp;(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g&lt;i;g++){if(g===1)for(h in a.converters)typeof h==&quot;string&quot;&amp;&amp;(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k===&quot;*&quot;)k=l;else if(l!==&quot;*&quot;&amp;&amp;l!==k){m=l+&quot; &quot;+k,n=e[m]||e[&quot;* &quot;+k];if(!n){p=b;for(o in e){j=o.split(&quot; &quot;);if(j[0]===l||j[0]===&quot;*&quot;){p=e[j[1]+&quot; &quot;+k];if(p){o=e[o],o===!0?n=p:p===!0&amp;&amp;(n=o);break}}}}!n&amp;&amp;!p&amp;&amp;f.error(&quot;No conversion from &quot;+m.replace(&quot; &quot;,&quot; to &quot;)),n!==!0&amp;&amp;(c=n?n(c):p(o(c)))}}return c}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&amp;&amp;(c[g[i]]=d[i]);while(f[0]===&quot;*&quot;)f.shift(),h===b&amp;&amp;(h=a.mimeType||c.getResponseHeader(&quot;content-type&quot;));if(h)for(i in e)if(e[i]&amp;&amp;e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+&quot; &quot;+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&amp;&amp;f.unshift(j);return d[j]}}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bA.test(a)?d(a,e):bY(a+&quot;[&quot;+(typeof e==&quot;object&quot;||f.isArray(e)?b:&quot;&quot;)+&quot;]&quot;,e,c,d)});else if(!c&amp;&amp;b!=null&amp;&amp;typeof b==&quot;object&quot;)for(var e in b)bY(a+&quot;[&quot;+e+&quot;]&quot;,b[e],c,d);else d(a,b)}function bX(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&amp;&amp;((g[d]?a:e||(e={}))[d]=c[d]);e&amp;&amp;f.extend(!0,a,e)}function bW(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bP,l;for(;i&lt;j&amp;&amp;(k||!l);i++)l=h[i](c,d,e),typeof l==&quot;string&quot;&amp;&amp;(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bW(a,c,d,e,l,g)));(k||!l)&amp;&amp;!g[&quot;*&quot;]&amp;&amp;(l=bW(a,c,d,e,&quot;*&quot;,g));return l}function bV(a){return function(b,c){typeof b!=&quot;string&quot;&amp;&amp;(c=b,b=&quot;*&quot;);if(f.isFunction(c)){var d=b.toLowerCase().split(bL),e=0,g=d.length,h,i,j;for(;e&lt;g;e++)h=d[e],j=/^\+/.test(h),j&amp;&amp;(h=h.substr(1)||&quot;*&quot;),i=a[h]=a[h]||[],i[j?&quot;unshift&quot;:&quot;push&quot;](c)}}}function by(a,b,c){var d=b===&quot;width&quot;?a.offsetWidth:a.offsetHeight,e=b===&quot;width&quot;?bt:bu;if(d&gt;0){c!==&quot;border&quot;&amp;&amp;f.each(e,function(){c||(d-=parseFloat(f.css(a,&quot;padding&quot;+this))||0),c===&quot;margin&quot;?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,&quot;border&quot;+this+&quot;Width&quot;))||0});return d+&quot;px&quot;}d=bv(a,b,b);if(d&lt;0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&amp;&amp;f.each(e,function(){d+=parseFloat(f.css(a,&quot;padding&quot;+this))||0,c!==&quot;padding&quot;&amp;&amp;(d+=parseFloat(f.css(a,&quot;border&quot;+this+&quot;Width&quot;))||0),c===&quot;margin&quot;&amp;&amp;(d+=parseFloat(f.css(a,c+this))||0)});return d+&quot;px&quot;}function bl(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:&quot;script&quot;}):f.globalEval((b.text||b.textContent||b.innerHTML||&quot;&quot;).replace(bd,&quot;/*$0*/&quot;)),b.parentNode&amp;&amp;b.parentNode.removeChild(b)}function bk(a){f.nodeName(a,&quot;input&quot;)?bj(a):&quot;getElementsByTagName&quot;in a&amp;&amp;f.grep(a.getElementsByTagName(&quot;input&quot;),bj)}function bj(a){if(a.type===&quot;checkbox&quot;||a.type===&quot;radio&quot;)a.defaultChecked=a.checked}function bi(a){return&quot;getElementsByTagName&quot;in a?a.getElementsByTagName(&quot;*&quot;):&quot;querySelectorAll&quot;in a?a.querySelectorAll(&quot;*&quot;):[]}function bh(a,b){var c;if(b.nodeType===1){b.clearAttributes&amp;&amp;b.clearAttributes(),b.mergeAttributes&amp;&amp;b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c===&quot;object&quot;)b.outerHTML=a.outerHTML;else if(c!==&quot;input&quot;||a.type!==&quot;checkbox&quot;&amp;&amp;a.type!==&quot;radio&quot;){if(c===&quot;option&quot;)b.selected=a.defaultSelected;else if(c===&quot;input&quot;||c===&quot;textarea&quot;)b.defaultValue=a.defaultValue}else a.checked&amp;&amp;(b.defaultChecked=b.checked=a.checked),b.value!==a.value&amp;&amp;(b.value=a.value);b.removeAttribute(f.expando)}}function bg(a,b){if(b.nodeType===1&amp;&amp;!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i&lt;j;i++)f.event.add(b,h+(g[h][i].namespace?&quot;.&quot;:&quot;&quot;)+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function bf(a,b){return f.nodeName(a,&quot;table&quot;)?a.getElementsByTagName(&quot;tbody&quot;)[0]||a.appendChild(a.ownerDocument.createElement(&quot;tbody&quot;)):a}function V(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b==&quot;string&quot;){var d=f.grep(a,function(a){return a.nodeType===1});if(Q.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)&gt;=0===c})}function U(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function M(a,b){return(a&amp;&amp;a!==&quot;*&quot;?a+&quot;.&quot;:&quot;&quot;)+b.replace(y,&quot;`&quot;).replace(z,&quot;&amp;&quot;)}function L(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,&quot;events&quot;);if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&amp;&amp;a.type===&quot;click&quot;)){a.namespace&amp;&amp;(n=new RegExp(&quot;(^|\\.)&quot;+a.namespace.split(&quot;.&quot;).join(&quot;\\.(?:.*\\.)?&quot;)+&quot;(\\.|$)&quot;)),a.liveFired=this;var s=r.live.slice(0);for(i=0;i&lt;s.length;i++)g=s[i],g.origType.replace(w,&quot;&quot;)===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j&lt;k;j++){m=e[j];for(i=0;i&lt;s.length;i++){g=s[i];if(m.selector===g.selector&amp;&amp;(!n||n.test(g.namespace))&amp;&amp;!m.elem.disabled){h=m.elem,d=null;if(g.preType===&quot;mouseenter&quot;||g.preType===&quot;mouseleave&quot;)a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&amp;&amp;f.contains(h,d)&amp;&amp;(d=h);(!d||d!==h)&amp;&amp;p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j&lt;k;j++){e=p[j];if(c&amp;&amp;e.level&gt;c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&amp;&amp;(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function J(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&amp;&amp;d[0].preventDefault()}function D(){return!0}function C(){return!1}function m(a,c,d){var e=c+&quot;defer&quot;,g=c+&quot;queue&quot;,h=c+&quot;mark&quot;,i=f.data(a,e,b,!0);i&amp;&amp;(d===&quot;queue&quot;||!f.data(a,g,b,!0))&amp;&amp;(d===&quot;mark&quot;||!f.data(a,h,b,!0))&amp;&amp;setTimeout(function(){!f.data(a,g,b,!0)&amp;&amp;!f.data(a,h,b,!0)&amp;&amp;(f.removeData(a,e,!0),i.resolve())},0)}function l(a){for(var b in a)if(b!==&quot;toJSON&quot;)return!1;return!0}function k(a,c,d){if(d===b&amp;&amp;a.nodeType===1){var e=&quot;data-&quot;+c.replace(j,&quot;-$1&quot;).toLowerCase();d=a.getAttribute(e);if(typeof d==&quot;string&quot;){try{d=d===&quot;true&quot;?!0:d===&quot;false&quot;?!1:d===&quot;null&quot;?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll(&quot;left&quot;)}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+&quot;&quot;).toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a===&quot;body&quot;&amp;&amp;!d&amp;&amp;c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a==&quot;string&quot;){a.charAt(0)!==&quot;&lt;&quot;||a.charAt(a.length-1)!==&quot;&gt;&quot;||a.length&lt;3?g=i.exec(a):g=[null,a,null];if(g&amp;&amp;(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&amp;&amp;h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&amp;&amp;(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:&quot;&quot;,jquery:&quot;1.6.4&quot;,length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a&lt;0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b===&quot;find&quot;?d.selector=this.selector+(this.selector?&quot; &quot;:&quot;&quot;)+c:b&amp;&amp;(d.selector=this.selector+&quot;.&quot;+b+&quot;(&quot;+c+&quot;)&quot;);return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),&quot;slice&quot;,G.call(arguments).join(&quot;,&quot;))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i==&quot;boolean&quot;&amp;&amp;(l=i,i=arguments[1]||{},j=2),typeof i!=&quot;object&quot;&amp;&amp;!e.isFunction(i)&amp;&amp;(i={}),k===j&amp;&amp;(i=this,--j);for(;j&lt;k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&amp;&amp;f&amp;&amp;(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&amp;&amp;e.isArray(d)?d:[]):h=d&amp;&amp;e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&amp;&amp;(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&amp;&amp;(a.$=g),b&amp;&amp;a.jQuery===e&amp;&amp;(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&amp;&amp;!--e.readyWait||a!==!0&amp;&amp;!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&amp;&amp;--e.readyWait&gt;0)return;B.resolveWith(c,[e]),e.fn.trigger&amp;&amp;e(c).trigger(&quot;ready&quot;).unbind(&quot;ready&quot;)}},bindReady:function(){if(!B){B=e._Deferred();if(c.readyState===&quot;complete&quot;)return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener(&quot;DOMContentLoaded&quot;,C,!1),a.addEventListener(&quot;load&quot;,e.ready,!1);else if(c.attachEvent){c.attachEvent(&quot;onreadystatechange&quot;,C),a.attachEvent(&quot;onload&quot;,e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&amp;&amp;b&amp;&amp;K()}}},isFunction:function(a){return e.type(a)===&quot;function&quot;},isArray:Array.isArray||function(a){return e.type(a)===&quot;array&quot;},isWindow:function(a){return a&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;&quot;setInterval&quot;in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||&quot;object&quot;},isPlainObject:function(a){if(!a||e.type(a)!==&quot;object&quot;||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&amp;&amp;!E.call(a,&quot;constructor&quot;)&amp;&amp;!E.call(a.constructor.prototype,&quot;isPrototypeOf&quot;))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!=&quot;string&quot;||!b)return null;b=e.trim(b);if(a.JSON&amp;&amp;a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,&quot;@&quot;).replace(q,&quot;]&quot;).replace(r,&quot;&quot;)))return(new Function(&quot;return &quot;+b))();e.error(&quot;Invalid JSON: &quot;+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,&quot;text/xml&quot;)):(d=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),d.async=&quot;false&quot;,d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName(&quot;parsererror&quot;).length)&amp;&amp;e.error(&quot;Invalid XML: &quot;+c);return d},noop:function(){},globalEval:function(b){b&amp;&amp;j.test(b)&amp;&amp;(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,&quot;ms-&quot;).replace(w,y)},nodeName:function(a,b){return a.nodeName&amp;&amp;a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g&lt;h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g&lt;h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?&quot;&quot;:H.call(a)}:function(a){return a==null?&quot;&quot;:(a+&quot;&quot;).replace(k,&quot;&quot;).replace(l,&quot;&quot;)},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d===&quot;string&quot;||d===&quot;function&quot;||d===&quot;regexp&quot;||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(!b)return-1;if(I)return I.call(b,a);for(var c=0,d=b.length;c&lt;d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length==&quot;number&quot;)for(var f=c.length;e&lt;f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f&lt;g;f++)e=!!b(a[f],f),c!==e&amp;&amp;d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&amp;&amp;typeof j==&quot;number&quot;&amp;&amp;(j&gt;0&amp;&amp;a[0]&amp;&amp;a[j-1]||j===0||e.isArray(a));if(k)for(;i&lt;j;i++)f=c(a[i],i,d),f!=null&amp;&amp;(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&amp;&amp;(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c==&quot;string&quot;){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c==&quot;object&quot;){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&amp;&amp;f&amp;&amp;e.isFunction(d);for(var k=0;k&lt;i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf(&quot;compatible&quot;)&lt;0&amp;&amp;v.exec(a)||[];return{browser:b[1]||&quot;&quot;,version:b[2]||&quot;0&quot;}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&amp;&amp;f instanceof e&amp;&amp;!(f instanceof a)&amp;&amp;(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each(&quot;Boolean Number String Function Array Date RegExp Object&quot;.split(&quot; &quot;),function(a,b){J[&quot;[object &quot;+b+&quot;]&quot;]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&amp;&amp;(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&amp;&amp;(e.browser.safari=!0),j.test(&quot;&quot;)&amp;&amp;(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener(&quot;DOMContentLoaded&quot;,C,!1),e.ready()}:c.attachEvent&amp;&amp;(C=function(){c.readyState===&quot;complete&quot;&amp;&amp;(c.detachEvent(&quot;onreadystatechange&quot;,C),e.ready())});return e}(),g=&quot;done fail isResolved isRejected promise then always pipe&quot;.split(&quot; &quot;),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&amp;&amp;(k=b,b=0);for(g=0,h=c.length;g&lt;h;g++)i=c[g],j=f.type(i),j===&quot;array&quot;?e.done.apply(e,i):j===&quot;function&quot;&amp;&amp;a.push(i);k&amp;&amp;e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&amp;&amp;!b&amp;&amp;!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;f.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,&quot;resolve&quot;],fail:[c,&quot;reject&quot;]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&amp;&amp;f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g+&quot;With&quot;](this===b?d:this,[h])}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&amp;&amp;a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length&gt;1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d&lt;=1&amp;&amp;a&amp;&amp;f.isFunction(a.promise)?a:f.Deferred();if(d&gt;1){for(;c&lt;d;c++)b[c]&amp;&amp;f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&amp;&amp;g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement(&quot;div&quot;),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute(&quot;className&quot;,&quot;t&quot;),a.innerHTML=&quot;   &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href='/a' style='top:1px;float:left;opacity:.55;'&gt;a&lt;/a&gt;&lt;input type='checkbox'/&gt;&quot;,d=a.getElementsByTagName(&quot;*&quot;),e=a.getElementsByTagName(&quot;a&quot;)[0];if(!d||!d.length||!e)return{};g=c.createElement(&quot;select&quot;),h=g.appendChild(c.createElement(&quot;option&quot;)),i=a.getElementsByTagName(&quot;input&quot;)[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName(&quot;tbody&quot;).length,htmlSerialize:!!a.getElementsByTagName(&quot;link&quot;).length,style:/top/.test(e.getAttribute(&quot;style&quot;)),hrefNormalized:e.getAttribute(&quot;href&quot;)===&quot;/a&quot;,opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value===&quot;on&quot;,optSelected:h.selected,getSetAttribute:a.className!==&quot;t&quot;,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&amp;&amp;a.attachEvent&amp;&amp;a.fireEvent&amp;&amp;(a.attachEvent(&quot;onclick&quot;,function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent(&quot;onclick&quot;)),i=c.createElement(&quot;input&quot;),i.value=&quot;t&quot;,i.setAttribute(&quot;type&quot;,&quot;radio&quot;),k.radioValue=i.value===&quot;t&quot;,i.setAttribute(&quot;checked&quot;,&quot;checked&quot;),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML=&quot;&quot;,a.style.width=a.style.paddingLeft=&quot;1px&quot;,m=c.getElementsByTagName(&quot;body&quot;)[0],o=c.createElement(m?&quot;div&quot;:&quot;body&quot;),p={visibility:&quot;hidden&quot;,width:0,height:0,border:0,margin:0,background:&quot;none&quot;},m&amp;&amp;f.extend(p,{position:&quot;absolute&quot;,left:&quot;-1000px&quot;,top:&quot;-1000px&quot;});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,&quot;zoom&quot;in a.style&amp;&amp;(a.style.display=&quot;inline&quot;,a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display=&quot;&quot;,a.innerHTML=&quot;&lt;div style='width:4px;'&gt;&lt;/div&gt;&quot;,k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML=&quot;&lt;table&gt;&lt;tr&gt;&lt;td style='padding:0;border:0;display:none'&gt;&lt;/td&gt;&lt;td&gt;t&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;,q=a.getElementsByTagName(&quot;td&quot;),u=q[0].offsetHeight===0,q[0].style.display=&quot;&quot;,q[1].style.display=&quot;none&quot;,k.reliableHiddenOffsets=u&amp;&amp;q[0].offsetHeight===0,a.innerHTML=&quot;&quot;,c.defaultView&amp;&amp;c.defaultView.getComputedStyle&amp;&amp;(j=c.createElement(&quot;div&quot;),j.style.width=&quot;0&quot;,j.style.marginRight=&quot;0&quot;,a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML=&quot;&quot;,n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s=&quot;on&quot;+t,u=s in a,u||(a.setAttribute(s,&quot;return;&quot;),u=typeof a[s]==&quot;function&quot;),k[t+&quot;Bubbles&quot;]=u;o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:&quot;jQuery&quot;+(f.fn.jquery+Math.random()).replace(/\D/g,&quot;&quot;),noData:{embed:!0,object:&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;,applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&amp;&amp;!l(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i=f.expando,j=typeof c==&quot;string&quot;,k=a.nodeType,l=k?f.cache:a,m=k?a[f.expando]:a[f.expando]&amp;&amp;f.expando;if((!m||e&amp;&amp;m&amp;&amp;l[m]&amp;&amp;!l[m][i])&amp;&amp;j&amp;&amp;d===b)return;m||(k?a[f.expando]=m=++f.uuid:m=f.expando),l[m]||(l[m]={},k||(l[m].toJSON=f.noop));if(typeof c==&quot;object&quot;||typeof c==&quot;function&quot;)e?l[m][i]=f.extend(l[m][i],c):l[m]=f.extend(l[m],c);g=l[m],e&amp;&amp;(g[i]||(g[i]={}),g=g[i]),d!==b&amp;&amp;(g[f.camelCase(c)]=d);if(c===&quot;events&quot;&amp;&amp;!g[c])return g[i]&amp;&amp;g[i].events;j?(h=g[c],h==null&amp;&amp;(h=g[f.camelCase(c)])):h=g;return h}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e=f.expando,g=a.nodeType,h=g?f.cache:a,i=g?a[f.expando]:f.expando;if(!h[i])return;if(b){d=c?h[i][e]:h[i];if(d){d[b]||(b=f.camelCase(b)),delete d[b];if(!l(d))return}}if(c){delete h[i][e];if(!l(h[i]))return}var j=h[i][e];f.support.deleteExpando||!h.setInterval?delete h[i]:h[i]=null,j?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=j):g&amp;&amp;(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&amp;&amp;a.getAttribute(&quot;classid&quot;)===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a==&quot;undefined&quot;){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h&lt;i;h++)g=e[h].name,g.indexOf(&quot;data-&quot;)===0&amp;&amp;(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a==&quot;object&quot;)return this.each(function(){f.data(this,a)});var j=a.split(&quot;.&quot;);j[1]=j[1]?&quot;.&quot;+j[1]:&quot;&quot;;if(c===b){d=this.triggerHandler(&quot;getData&quot;+j[1]+&quot;!&quot;,[j[0]]),d===b&amp;&amp;this.length&amp;&amp;(d=f.data(this[0],a),d=k(this[0],a,d));return d===b&amp;&amp;j[1]?this.data(j[0]):d}return this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler(&quot;setData&quot;+j[1]+&quot;!&quot;,d),f.data(this,a,c),b.triggerHandler(&quot;changeData&quot;+j[1]+&quot;!&quot;,d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&amp;&amp;(c=(c||&quot;fx&quot;)+&quot;mark&quot;,f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&amp;&amp;(d=c,c=a,a=!1);if(c){d=d||&quot;fx&quot;;var e=d+&quot;mark&quot;,g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,&quot;mark&quot;))}},queue:function(a,c,d){if(a){c=(c||&quot;fx&quot;)+&quot;queue&quot;;var e=f.data(a,c,b,!0);d&amp;&amp;(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||&quot;fx&quot;;var c=f.queue(a,b),d=c.shift(),e;d===&quot;inprogress&quot;&amp;&amp;(d=c.shift()),d&amp;&amp;(b===&quot;fx&quot;&amp;&amp;c.unshift(&quot;inprogress&quot;),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+&quot;queue&quot;,!0),m(a,b,&quot;queue&quot;))}}),f.fn.extend({queue:function(a,c){typeof a!=&quot;string&quot;&amp;&amp;(c=a,a=&quot;fx&quot;);if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a===&quot;fx&quot;&amp;&amp;b[0]!==&quot;inprogress&quot;&amp;&amp;f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||&quot;fx&quot;;return this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||&quot;fx&quot;,[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!=&quot;string&quot;&amp;&amp;(c=a,a=b),a=a||&quot;fx&quot;;var d=f.Deferred(),e=this,g=e.length,h=1,i=a+&quot;defer&quot;,j=a+&quot;queue&quot;,k=a+&quot;mark&quot;,l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&amp;&amp;f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);m();return d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u,v;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&amp;&amp;typeof a==&quot;string&quot;){b=a.split(o);for(c=0,d=this.length;c&lt;d;c++){e=this[c];if(e.nodeType===1)if(!e.className&amp;&amp;b.length===1)e.className=a;else{g=&quot; &quot;+e.className+&quot; &quot;;for(h=0,i=b.length;h&lt;i;h++)~g.indexOf(&quot; &quot;+b[h]+&quot; &quot;)||(g+=b[h]+&quot; &quot;);e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&amp;&amp;typeof a==&quot;string&quot;||a===b){c=(a||&quot;&quot;).split(o);for(d=0,e=this.length;d&lt;e;d++){g=this[d];if(g.nodeType===1&amp;&amp;g.className)if(a){h=(&quot; &quot;+g.className+&quot; &quot;).replace(n,&quot; &quot;);for(i=0,j=c.length;i&lt;j;i++)h=h.replace(&quot; &quot;+c[i]+&quot; &quot;,&quot; &quot;);g.className=f.trim(h)}else g.className=&quot;&quot;}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==&quot;boolean&quot;;if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c===&quot;string&quot;){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?&quot;addClass&quot;:&quot;removeClass&quot;](e)}else if(c===&quot;undefined&quot;||c===&quot;boolean&quot;)this.className&amp;&amp;f._data(this,&quot;__className__&quot;,this.className),this.className=this.className||a===!1?&quot;&quot;:f._data(this,&quot;__className__&quot;)||&quot;&quot;})},hasClass:function(a){var b=&quot; &quot;+a+&quot; &quot;;for(var c=0,d=this.length;c&lt;d;c++)if(this[c].nodeType===1&amp;&amp;(&quot; &quot;+this[c].className+&quot; &quot;).replace(n,&quot; &quot;).indexOf(b)&gt;-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];if(c&amp;&amp;&quot;get&quot;in c&amp;&amp;(d=c.get(e,&quot;value&quot;))!==b)return d;d=e.value;return typeof d==&quot;string&quot;?d.replace(p,&quot;&quot;):d==null?&quot;&quot;:d}return b}var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h=&quot;&quot;:typeof h==&quot;number&quot;?h+=&quot;&quot;:f.isArray(h)&amp;&amp;(h=f.map(h,function(a){return a==null?&quot;&quot;:a+&quot;&quot;})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!(&quot;set&quot;in c)||c.set(this,h,&quot;value&quot;)===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type===&quot;select-one&quot;;if(c&lt;0)return null;for(var h=g?c:0,i=g?c+1:e.length;h&lt;i;h++){var j=e[h];if(j.selected&amp;&amp;(f.support.optDisabled?!j.disabled:j.getAttribute(&quot;disabled&quot;)===null)&amp;&amp;(!j.parentNode.disabled||!f.nodeName(j.parentNode,&quot;optgroup&quot;))){b=f(j).val();if(g)return b;d.push(b)}}if(g&amp;&amp;!d.length&amp;&amp;e.length)return f(e[c]).val();return d},set:function(a,b){var c=f.makeArray(b);f(a).find(&quot;option&quot;).each(function(){this.selected=f.inArray(f(this).val(),c)&gt;=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:&quot;tabIndex&quot;},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&amp;&amp;c in f.attrFn)return f(a)[c](d);if(!(&quot;getAttribute&quot;in a))return f.prop(a,c,d);var h,i,j=g!==1||!f.isXMLDoc(a);j&amp;&amp;(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=v:u&amp;&amp;(i=u)));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(i&amp;&amp;&quot;set&quot;in i&amp;&amp;j&amp;&amp;(h=i.set(a,d,c))!==b)return h;a.setAttribute(c,&quot;&quot;+d);return d}if(i&amp;&amp;&quot;get&quot;in i&amp;&amp;j&amp;&amp;(h=i.get(a,c))!==null)return h;h=a.getAttribute(c);return h===null?b:h},removeAttr:function(a,b){var c;a.nodeType===1&amp;&amp;(b=f.attrFix[b]||b,f.attr(a,b,&quot;&quot;),a.removeAttribute(b),t.test(b)&amp;&amp;(c=f.propFix[b]||b)in a&amp;&amp;(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&amp;&amp;a.parentNode)f.error(&quot;type property can't be changed&quot;);else if(!f.support.radioValue&amp;&amp;b===&quot;radio&quot;&amp;&amp;f.nodeName(a,&quot;input&quot;)){var c=a.value;a.setAttribute(&quot;type&quot;,b),c&amp;&amp;(a.value=c);return b}}},value:{get:function(a,b){if(u&amp;&amp;f.nodeName(a,&quot;button&quot;))return u.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(u&amp;&amp;f.nodeName(a,&quot;button&quot;))return u.set(a,b,c);a.value=b}}},propFix:{tabindex:&quot;tabIndex&quot;,readonly:&quot;readOnly&quot;,&quot;for&quot;:&quot;htmlFor&quot;,&quot;class&quot;:&quot;className&quot;,maxlength:&quot;maxLength&quot;,cellspacing:&quot;cellSpacing&quot;,cellpadding:&quot;cellPadding&quot;,rowspan:&quot;rowSpan&quot;,colspan:&quot;colSpan&quot;,usemap:&quot;useMap&quot;,frameborder:&quot;frameBorder&quot;,contenteditable:&quot;contentEditable&quot;},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);i&amp;&amp;(c=f.propFix[c]||c,h=f.propHooks[c]);return d!==b?h&amp;&amp;&quot;set&quot;in h&amp;&amp;(g=h.set(a,d,c))!==b?g:a[c]=d:h&amp;&amp;&quot;get&quot;in h&amp;&amp;(g=h.get(a,c))!==null?g:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode(&quot;tabindex&quot;);return c&amp;&amp;c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&amp;&amp;a.href?0:b}}}}),f.attrHooks.tabIndex=f.propHooks.tabIndex,v={get:function(a,c){var d;return f.prop(a,c)===!0||(d=a.getAttributeNode(c))&amp;&amp;d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&amp;&amp;(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},f.support.getSetAttribute||(u=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&amp;&amp;d.nodeValue!==&quot;&quot;?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+&quot;&quot;}},f.each([&quot;width&quot;,&quot;height&quot;],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===&quot;&quot;){a.setAttribute(b,&quot;auto&quot;);return c}}})})),f.support.hrefNormalized||f.each([&quot;href&quot;,&quot;src&quot;,&quot;width&quot;,&quot;height&quot;],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=&quot;&quot;+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&amp;&amp;(b.selectedIndex,b.parentNode&amp;&amp;b.parentNode.selectedIndex);return null}})),f.support.checkOn||f.each([&quot;radio&quot;,&quot;checkbox&quot;],function(){f.valHooks[this]={get:function(a){return a.getAttribute(&quot;value&quot;)===null?&quot;on&quot;:a.value}}}),f.each([&quot;radio&quot;,&quot;checkbox&quot;],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)&gt;=0}})});var w=/\.(.*)$/,x=/^(?:textarea|input|select)$/i,y=/\./g,z=/ /g,A=/[^\w\s.|`]/g,B=function(a){return a.replace(A,&quot;\\$&amp;&quot;)};f.event={add:function(a,c,d,e){if(a.nodeType!==3&amp;&amp;a.nodeType!==8){if(d===!1)d=C;else if(!d)return;var g,h;d.handler&amp;&amp;(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!=&quot;undefined&quot;&amp;&amp;(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(&quot; &quot;);var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(&quot;.&quot;)&gt;-1?(n=l.split(&quot;.&quot;),l=n.shift(),h.namespace=n.slice(0).sort().join(&quot;.&quot;)):(n=[],h.namespace=&quot;&quot;),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;on&quot;+l,k)}p.add&amp;&amp;(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&amp;&amp;a.nodeType!==8){d===!1&amp;&amp;(d=C);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&amp;&amp;f._data(a),t=s&amp;&amp;s.events;if(!s||!t)return;c&amp;&amp;c.type&amp;&amp;(d=c.handler,c=c.type);if(!c||typeof c==&quot;string&quot;&amp;&amp;c.charAt(0)===&quot;.&quot;){c=c||&quot;&quot;;for(h in t)f.event.remove(a,h+c);return}c=c.split(&quot; &quot;);while(h=c[k++]){r=h,q=null,l=h.indexOf(&quot;.&quot;)&lt;0,m=[],l||(m=h.split(&quot;.&quot;),h=m.shift(),n=new RegExp(&quot;(^|\\.)&quot;+f.map(m.slice(0).sort(),B).join(&quot;\\.(?:.*\\.)?&quot;)+&quot;(\\.|$)&quot;)),p=t[h];if(!p)continue;if(!d){for(j=0;j&lt;p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j&lt;p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&amp;&amp;p.splice(j--,1),o.remove&amp;&amp;o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&amp;&amp;p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&amp;&amp;f.removeEvent(a,h,s.handle),g=null,delete </span>
<a href="#l55.6"></a><span id="l55.6" class="difflineplus">+(function(a,b){function cu(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cr(a){if(!cg[a]){var b=c.body,d=f(&quot;&lt;&quot;+a+&quot;&gt;&quot;).appendTo(b),e=d.css(&quot;display&quot;);d.remove();if(e===&quot;none&quot;||e===&quot;&quot;){ch||(ch=c.createElement(&quot;iframe&quot;),ch.frameBorder=ch.width=ch.height=0),b.appendChild(ch);if(!ci||!ch.createElement)ci=(ch.contentWindow||ch.contentDocument).document,ci.write((c.compatMode===&quot;CSS1Compat&quot;?&quot;&lt;!doctype html&gt;&quot;:&quot;&quot;)+&quot;&lt;html&gt;&lt;body&gt;&quot;),ci.close();d=ci.createElement(a),ci.body.appendChild(d),e=f.css(d,&quot;display&quot;),b.removeChild(ch)}cg[a]=e}return cg[a]}function cq(a,b){var c={};f.each(cm.concat.apply([],cm.slice(0,b)),function(){c[this]=a});return c}function cp(){cn=b}function co(){setTimeout(cp,0);return cn=f.now()}function cf(){try{return new a.ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)}catch(b){}}function ce(){try{return new a.XMLHttpRequest}catch(b){}}function b$(a,c){a.dataFilter&amp;&amp;(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g&lt;i;g++){if(g===1)for(h in a.converters)typeof h==&quot;string&quot;&amp;&amp;(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k===&quot;*&quot;)k=l;else if(l!==&quot;*&quot;&amp;&amp;l!==k){m=l+&quot; &quot;+k,n=e[m]||e[&quot;* &quot;+k];if(!n){p=b;for(o in e){j=o.split(&quot; &quot;);if(j[0]===l||j[0]===&quot;*&quot;){p=e[j[1]+&quot; &quot;+k];if(p){o=e[o],o===!0?n=p:p===!0&amp;&amp;(n=o);break}}}}!n&amp;&amp;!p&amp;&amp;f.error(&quot;No conversion from &quot;+m.replace(&quot; &quot;,&quot; to &quot;)),n!==!0&amp;&amp;(c=n?n(c):p(o(c)))}}return c}function bZ(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&amp;&amp;(c[g[i]]=d[i]);while(f[0]===&quot;*&quot;)f.shift(),h===b&amp;&amp;(h=a.mimeType||c.getResponseHeader(&quot;content-type&quot;));if(h)for(i in e)if(e[i]&amp;&amp;e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+&quot; &quot;+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&amp;&amp;f.unshift(j);return d[j]}}function bY(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bA.test(a)?d(a,e):bY(a+&quot;[&quot;+(typeof e==&quot;object&quot;||f.isArray(e)?b:&quot;&quot;)+&quot;]&quot;,e,c,d)});else if(!c&amp;&amp;b!=null&amp;&amp;typeof b==&quot;object&quot;)for(var e in b)bY(a+&quot;[&quot;+e+&quot;]&quot;,b[e],c,d);else d(a,b)}function bX(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&amp;&amp;((g[d]?a:e||(e={}))[d]=c[d]);e&amp;&amp;f.extend(!0,a,e)}function bW(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bP,l;for(;i&lt;j&amp;&amp;(k||!l);i++)l=h[i](c,d,e),typeof l==&quot;string&quot;&amp;&amp;(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bW(a,c,d,e,l,g)));(k||!l)&amp;&amp;!g[&quot;*&quot;]&amp;&amp;(l=bW(a,c,d,e,&quot;*&quot;,g));return l}function bV(a){return function(b,c){typeof b!=&quot;string&quot;&amp;&amp;(c=b,b=&quot;*&quot;);if(f.isFunction(c)){var d=b.toLowerCase().split(bL),e=0,g=d.length,h,i,j;for(;e&lt;g;e++)h=d[e],j=/^\+/.test(h),j&amp;&amp;(h=h.substr(1)||&quot;*&quot;),i=a[h]=a[h]||[],i[j?&quot;unshift&quot;:&quot;push&quot;](c)}}}function by(a,b,c){var d=b===&quot;width&quot;?a.offsetWidth:a.offsetHeight,e=b===&quot;width&quot;?bt:bu;if(d&gt;0){c!==&quot;border&quot;&amp;&amp;f.each(e,function(){c||(d-=parseFloat(f.css(a,&quot;padding&quot;+this))||0),c===&quot;margin&quot;?d+=parseFloat(f.css(a,c+this))||0:d-=parseFloat(f.css(a,&quot;border&quot;+this+&quot;Width&quot;))||0});return d+&quot;px&quot;}d=bv(a,b,b);if(d&lt;0||d==null)d=a.style[b]||0;d=parseFloat(d)||0,c&amp;&amp;f.each(e,function(){d+=parseFloat(f.css(a,&quot;padding&quot;+this))||0,c!==&quot;padding&quot;&amp;&amp;(d+=parseFloat(f.css(a,&quot;border&quot;+this+&quot;Width&quot;))||0),c===&quot;margin&quot;&amp;&amp;(d+=parseFloat(f.css(a,c+this))||0)});return d+&quot;px&quot;}function bl(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:&quot;script&quot;}):f.globalEval((b.text||b.textContent||b.innerHTML||&quot;&quot;).replace(bd,&quot;/*$0*/&quot;)),b.parentNode&amp;&amp;b.parentNode.removeChild(b)}function bk(a){f.nodeName(a,&quot;input&quot;)?bj(a):&quot;getElementsByTagName&quot;in a&amp;&amp;f.grep(a.getElementsByTagName(&quot;input&quot;),bj)}function bj(a){if(a.type===&quot;checkbox&quot;||a.type===&quot;radio&quot;)a.defaultChecked=a.checked}function bi(a){return&quot;getElementsByTagName&quot;in a?a.getElementsByTagName(&quot;*&quot;):&quot;querySelectorAll&quot;in a?a.querySelectorAll(&quot;*&quot;):[]}function bh(a,b){var c;if(b.nodeType===1){b.clearAttributes&amp;&amp;b.clearAttributes(),b.mergeAttributes&amp;&amp;b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c===&quot;object&quot;)b.outerHTML=a.outerHTML;else if(c!==&quot;input&quot;||a.type!==&quot;checkbox&quot;&amp;&amp;a.type!==&quot;radio&quot;){if(c===&quot;option&quot;)b.selected=a.defaultSelected;else if(c===&quot;input&quot;||c===&quot;textarea&quot;)b.defaultValue=a.defaultValue}else a.checked&amp;&amp;(b.defaultChecked=b.checked=a.checked),b.value!==a.value&amp;&amp;(b.value=a.value);b.removeAttribute(f.expando)}}function bg(a,b){if(b.nodeType===1&amp;&amp;!!f.hasData(a)){var c=f.expando,d=f.data(a),e=f.data(b,d);if(d=d[c]){var g=d.events;e=e[c]=f.extend({},d);if(g){delete e.handle,e.events={};for(var h in g)for(var i=0,j=g[h].length;i&lt;j;i++)f.event.add(b,h+(g[h][i].namespace?&quot;.&quot;:&quot;&quot;)+g[h][i].namespace,g[h][i],g[h][i].data)}}}}function bf(a,b){return f.nodeName(a,&quot;table&quot;)?a.getElementsByTagName(&quot;tbody&quot;)[0]||a.appendChild(a.ownerDocument.createElement(&quot;tbody&quot;)):a}function V(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b==&quot;string&quot;){var d=f.grep(a,function(a){return a.nodeType===1});if(Q.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)&gt;=0===c})}function U(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function M(a,b){return(a&amp;&amp;a!==&quot;*&quot;?a+&quot;.&quot;:&quot;&quot;)+b.replace(y,&quot;`&quot;).replace(z,&quot;&amp;&quot;)}function L(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p=[],q=[],r=f._data(this,&quot;events&quot;);if(!(a.liveFired===this||!r||!r.live||a.target.disabled||a.button&amp;&amp;a.type===&quot;click&quot;)){a.namespace&amp;&amp;(n=new RegExp(&quot;(^|\\.)&quot;+a.namespace.split(&quot;.&quot;).join(&quot;\\.(?:.*\\.)?&quot;)+&quot;(\\.|$)&quot;)),a.liveFired=this;var s=r.live.slice(0);for(i=0;i&lt;s.length;i++)g=s[i],g.origType.replace(w,&quot;&quot;)===a.type?q.push(g.selector):s.splice(i--,1);e=f(a.target).closest(q,a.currentTarget);for(j=0,k=e.length;j&lt;k;j++){m=e[j];for(i=0;i&lt;s.length;i++){g=s[i];if(m.selector===g.selector&amp;&amp;(!n||n.test(g.namespace))&amp;&amp;!m.elem.disabled){h=m.elem,d=null;if(g.preType===&quot;mouseenter&quot;||g.preType===&quot;mouseleave&quot;)a.type=g.preType,d=f(a.relatedTarget).closest(g.selector)[0],d&amp;&amp;f.contains(h,d)&amp;&amp;(d=h);(!d||d!==h)&amp;&amp;p.push({elem:h,handleObj:g,level:m.level})}}}for(j=0,k=p.length;j&lt;k;j++){e=p[j];if(c&amp;&amp;e.level&gt;c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,o=e.handleObj.origHandler.apply(e.elem,arguments);if(o===!1||a.isPropagationStopped()){c=e.level,o===!1&amp;&amp;(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function J(a,c,d){var e=f.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,f.event.handle.call(c,e),e.isDefaultPrevented()&amp;&amp;d[0].preventDefault()}function D(){return!0}function C(){return!1}function m(a,c,d){var e=c+&quot;defer&quot;,g=c+&quot;queue&quot;,h=c+&quot;mark&quot;,i=f.data(a,e,b,!0);i&amp;&amp;(d===&quot;queue&quot;||!f.data(a,g,b,!0))&amp;&amp;(d===&quot;mark&quot;||!f.data(a,h,b,!0))&amp;&amp;setTimeout(function(){!f.data(a,g,b,!0)&amp;&amp;!f.data(a,h,b,!0)&amp;&amp;(f.removeData(a,e,!0),i.resolve())},0)}function l(a){for(var b in a)if(b!==&quot;toJSON&quot;)return!1;return!0}function k(a,c,d){if(d===b&amp;&amp;a.nodeType===1){var e=&quot;data-&quot;+c.replace(j,&quot;-$1&quot;).toLowerCase();d=a.getAttribute(e);if(typeof d==&quot;string&quot;){try{d=d===&quot;true&quot;?!0:d===&quot;false&quot;?!1:d===&quot;null&quot;?null:f.isNaN(d)?i.test(d)?f.parseJSON(d):d:parseFloat(d)}catch(g){}f.data(a,c,d)}else d=b}return d}var c=a.document,d=a.navigator,e=a.location,f=function(){function K(){if(!e.isReady){try{c.documentElement.doScroll(&quot;left&quot;)}catch(a){setTimeout(K,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/\d/,n=/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;)?$/,o=/^[\],:{}\s]*$/,p=/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,s=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,v=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,x=/^-ms-/,y=function(a,b){return(b+&quot;&quot;).toUpperCase()},z=d.userAgent,A,B,C,D=Object.prototype.toString,E=Object.prototype.hasOwnProperty,F=Array.prototype.push,G=Array.prototype.slice,H=String.prototype.trim,I=Array.prototype.indexOf,J={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a===&quot;body&quot;&amp;&amp;!d&amp;&amp;c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a==&quot;string&quot;){a.charAt(0)!==&quot;&lt;&quot;||a.charAt(a.length-1)!==&quot;&gt;&quot;||a.length&lt;3?g=i.exec(a):g=[null,a,null];if(g&amp;&amp;(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=n.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&amp;&amp;h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&amp;&amp;(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:&quot;&quot;,jquery:&quot;1.6.4&quot;,length:0,size:function(){return this.length},toArray:function(){return G.call(this,0)},get:function(a){return a==null?this.toArray():a&lt;0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?F.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b===&quot;find&quot;?d.selector=this.selector+(this.selector?&quot; &quot;:&quot;&quot;)+c:b&amp;&amp;(d.selector=this.selector+&quot;.&quot;+b+&quot;(&quot;+c+&quot;)&quot;);return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),B.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(G.apply(this,arguments),&quot;slice&quot;,G.call(arguments).join(&quot;,&quot;))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:F,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i==&quot;boolean&quot;&amp;&amp;(l=i,i=arguments[1]||{},j=2),typeof i!=&quot;object&quot;&amp;&amp;!e.isFunction(i)&amp;&amp;(i={}),k===j&amp;&amp;(i=this,--j);for(;j&lt;k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&amp;&amp;f&amp;&amp;(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&amp;&amp;e.isArray(d)?d:[]):h=d&amp;&amp;e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&amp;&amp;(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&amp;&amp;(a.$=g),b&amp;&amp;a.jQuery===e&amp;&amp;(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&amp;&amp;!--e.readyWait||a!==!0&amp;&amp;!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&amp;&amp;--e.readyWait&gt;0)return;B.resolveWith(c,[e]),e.fn.trigger&amp;&amp;e(c).trigger(&quot;ready&quot;).unbind(&quot;ready&quot;)}},bindReady:function(){if(!B){B=e._Deferred();if(c.readyState===&quot;complete&quot;)return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener(&quot;DOMContentLoaded&quot;,C,!1),a.addEventListener(&quot;load&quot;,e.ready,!1);else if(c.attachEvent){c.attachEvent(&quot;onreadystatechange&quot;,C),a.attachEvent(&quot;onload&quot;,e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&amp;&amp;b&amp;&amp;K()}}},isFunction:function(a){return e.type(a)===&quot;function&quot;},isArray:Array.isArray||function(a){return e.type(a)===&quot;array&quot;},isWindow:function(a){return a&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;&quot;setInterval&quot;in a},isNaN:function(a){return a==null||!m.test(a)||isNaN(a)},type:function(a){return a==null?String(a):J[D.call(a)]||&quot;object&quot;},isPlainObject:function(a){if(!a||e.type(a)!==&quot;object&quot;||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&amp;&amp;!E.call(a,&quot;constructor&quot;)&amp;&amp;!E.call(a.constructor.prototype,&quot;isPrototypeOf&quot;))return!1}catch(c){return!1}var d;for(d in a);return d===b||E.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!=&quot;string&quot;||!b)return null;b=e.trim(b);if(a.JSON&amp;&amp;a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(p,&quot;@&quot;).replace(q,&quot;]&quot;).replace(r,&quot;&quot;)))return(new Function(&quot;return &quot;+b))();e.error(&quot;Invalid JSON: &quot;+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,&quot;text/xml&quot;)):(d=new ActiveXObject(&quot;Microsoft.XMLDOM&quot;),d.async=&quot;false&quot;,d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName(&quot;parsererror&quot;).length)&amp;&amp;e.error(&quot;Invalid XML: &quot;+c);return d},noop:function(){},globalEval:function(b){b&amp;&amp;j.test(b)&amp;&amp;(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(x,&quot;ms-&quot;).replace(w,y)},nodeName:function(a,b){return a.nodeName&amp;&amp;a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g&lt;h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g&lt;h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:H?function(a){return a==null?&quot;&quot;:H.call(a)}:function(a){return a==null?&quot;&quot;:(a+&quot;&quot;).replace(k,&quot;&quot;).replace(l,&quot;&quot;)},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d===&quot;string&quot;||d===&quot;function&quot;||d===&quot;regexp&quot;||e.isWindow(a)?F.call(c,a):e.merge(c,a)}return c},inArray:function(a,b){if(!b)return-1;if(I)return I.call(b,a);for(var c=0,d=b.length;c&lt;d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length==&quot;number&quot;)for(var f=c.length;e&lt;f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f&lt;g;f++)e=!!b(a[f],f),c!==e&amp;&amp;d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&amp;&amp;typeof j==&quot;number&quot;&amp;&amp;(j&gt;0&amp;&amp;a[0]&amp;&amp;a[j-1]||j===0||e.isArray(a));if(k)for(;i&lt;j;i++)f=c(a[i],i,d),f!=null&amp;&amp;(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&amp;&amp;(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c==&quot;string&quot;){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=G.call(arguments,2),g=function(){return a.apply(c,f.concat(G.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c==&quot;object&quot;){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&amp;&amp;f&amp;&amp;e.isFunction(d);for(var k=0;k&lt;i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=s.exec(a)||t.exec(a)||u.exec(a)||a.indexOf(&quot;compatible&quot;)&lt;0&amp;&amp;v.exec(a)||[];return{browser:b[1]||&quot;&quot;,version:b[2]||&quot;0&quot;}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&amp;&amp;f instanceof e&amp;&amp;!(f instanceof a)&amp;&amp;(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each(&quot;Boolean Number String Function Array Date RegExp Object&quot;.split(&quot; &quot;),function(a,b){J[&quot;[object &quot;+b+&quot;]&quot;]=b.toLowerCase()}),A=e.uaMatch(z),A.browser&amp;&amp;(e.browser[A.browser]=!0,e.browser.version=A.version),e.browser.webkit&amp;&amp;(e.browser.safari=!0),j.test(&quot;&quot;)&amp;&amp;(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?C=function(){c.removeEventListener(&quot;DOMContentLoaded&quot;,C,!1),e.ready()}:c.attachEvent&amp;&amp;(C=function(){c.readyState===&quot;complete&quot;&amp;&amp;(c.detachEvent(&quot;onreadystatechange&quot;,C),e.ready())});return e}(),g=&quot;done fail isResolved isRejected promise then always pipe&quot;.split(&quot; &quot;),h=[].slice;f.extend({_Deferred:function(){var a=[],b,c,d,e={done:function(){if(!d){var c=arguments,g,h,i,j,k;b&amp;&amp;(k=b,b=0);for(g=0,h=c.length;g&lt;h;g++)i=c[g],j=f.type(i),j===&quot;array&quot;?e.done.apply(e,i):j===&quot;function&quot;&amp;&amp;a.push(i);k&amp;&amp;e.resolveWith(k[0],k[1])}return this},resolveWith:function(e,f){if(!d&amp;&amp;!b&amp;&amp;!c){f=f||[],c=1;try{while(a[0])a.shift().apply(e,f)}finally{b=[e,f],c=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!c||!!b},cancel:function(){d=1,a=[];return this}};return e},Deferred:function(a){var b=f._Deferred(),c=f._Deferred(),d;f.extend(b,{then:function(a,c){b.done(a).fail(c);return this},always:function(){return b.done.apply(b,arguments).fail.apply(this,arguments)},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,pipe:function(a,c){return f.Deferred(function(d){f.each({done:[a,&quot;resolve&quot;],fail:[c,&quot;reject&quot;]},function(a,c){var e=c[0],g=c[1],h;f.isFunction(e)?b[a](function(){h=e.apply(this,arguments),h&amp;&amp;f.isFunction(h.promise)?h.promise().then(d.resolve,d.reject):d[g+&quot;With&quot;](this===b?d:this,[h])}):b[a](d[g])})}).promise()},promise:function(a){if(a==null){if(d)return d;d=a={}}var c=g.length;while(c--)a[g[c]]=b[g[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&amp;&amp;a.call(b,b);return b},when:function(a){function i(a){return function(c){b[a]=arguments.length&gt;1?h.call(arguments,0):c,--e||g.resolveWith(g,h.call(b,0))}}var b=arguments,c=0,d=b.length,e=d,g=d&lt;=1&amp;&amp;a&amp;&amp;f.isFunction(a.promise)?a:f.Deferred();if(d&gt;1){for(;c&lt;d;c++)b[c]&amp;&amp;f.isFunction(b[c].promise)?b[c].promise().then(i(c),g.reject):--e;e||g.resolveWith(g,b)}else g!==a&amp;&amp;g.resolveWith(g,d?[a]:[]);return g.promise()}}),f.support=function(){var a=c.createElement(&quot;div&quot;),b=c.documentElement,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;a.setAttribute(&quot;className&quot;,&quot;t&quot;),a.innerHTML=&quot;   &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href='/a' style='top:1px;float:left;opacity:.55;'&gt;a&lt;/a&gt;&lt;input type='checkbox'/&gt;&quot;,d=a.getElementsByTagName(&quot;*&quot;),e=a.getElementsByTagName(&quot;a&quot;)[0];if(!d||!d.length||!e)return{};g=c.createElement(&quot;select&quot;),h=g.appendChild(c.createElement(&quot;option&quot;)),i=a.getElementsByTagName(&quot;input&quot;)[0],k={leadingWhitespace:a.firstChild.nodeType===3,tbody:!a.getElementsByTagName(&quot;tbody&quot;).length,htmlSerialize:!!a.getElementsByTagName(&quot;link&quot;).length,style:/top/.test(e.getAttribute(&quot;style&quot;)),hrefNormalized:e.getAttribute(&quot;href&quot;)===&quot;/a&quot;,opacity:/^0.55$/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value===&quot;on&quot;,optSelected:h.selected,getSetAttribute:a.className!==&quot;t&quot;,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,k.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,k.optDisabled=!h.disabled;try{delete a.test}catch(v){k.deleteExpando=!1}!a.addEventListener&amp;&amp;a.attachEvent&amp;&amp;a.fireEvent&amp;&amp;(a.attachEvent(&quot;onclick&quot;,function(){k.noCloneEvent=!1}),a.cloneNode(!0).fireEvent(&quot;onclick&quot;)),i=c.createElement(&quot;input&quot;),i.value=&quot;t&quot;,i.setAttribute(&quot;type&quot;,&quot;radio&quot;),k.radioValue=i.value===&quot;t&quot;,i.setAttribute(&quot;checked&quot;,&quot;checked&quot;),a.appendChild(i),l=c.createDocumentFragment(),l.appendChild(a.firstChild),k.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML=&quot;&quot;,a.style.width=a.style.paddingLeft=&quot;1px&quot;,m=c.getElementsByTagName(&quot;body&quot;)[0],o=c.createElement(m?&quot;div&quot;:&quot;body&quot;),p={visibility:&quot;hidden&quot;,width:0,height:0,border:0,margin:0,background:&quot;none&quot;},m&amp;&amp;f.extend(p,{position:&quot;absolute&quot;,left:&quot;-1000px&quot;,top:&quot;-1000px&quot;});for(t in p)o.style[t]=p[t];o.appendChild(a),n=m||b,n.insertBefore(o,n.firstChild),k.appendChecked=i.checked,k.boxModel=a.offsetWidth===2,&quot;zoom&quot;in a.style&amp;&amp;(a.style.display=&quot;inline&quot;,a.style.zoom=1,k.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display=&quot;&quot;,a.innerHTML=&quot;&lt;div style='width:4px;'&gt;&lt;/div&gt;&quot;,k.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML=&quot;&lt;table&gt;&lt;tr&gt;&lt;td style='padding:0;border:0;display:none'&gt;&lt;/td&gt;&lt;td&gt;t&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;,q=a.getElementsByTagName(&quot;td&quot;),u=q[0].offsetHeight===0,q[0].style.display=&quot;&quot;,q[1].style.display=&quot;none&quot;,k.reliableHiddenOffsets=u&amp;&amp;q[0].offsetHeight===0,a.innerHTML=&quot;&quot;,c.defaultView&amp;&amp;c.defaultView.getComputedStyle&amp;&amp;(j=c.createElement(&quot;div&quot;),j.style.width=&quot;0&quot;,j.style.marginRight=&quot;0&quot;,a.appendChild(j),k.reliableMarginRight=(parseInt((c.defaultView.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),o.innerHTML=&quot;&quot;,n.removeChild(o);if(a.attachEvent)for(t in{submit:1,change:1,focusin:1})s=&quot;on&quot;+t,u=s in a,u||(a.setAttribute(s,&quot;return;&quot;),u=typeof a[s]==&quot;function&quot;),k[t+&quot;Bubbles&quot;]=u;o=l=g=h=m=j=a=i=null;return k}(),f.boxModel=f.support.boxModel;var i=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:&quot;jQuery&quot;+(f.fn.jquery+Math.random()).replace(/\D/g,&quot;&quot;),noData:{embed:!0,object:&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;,applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&amp;&amp;!l(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i=f.expando,j=typeof c==&quot;string&quot;,k=a.nodeType,l=k?f.cache:a,m=k?a[f.expando]:a[f.expando]&amp;&amp;f.expando;if((!m||e&amp;&amp;m&amp;&amp;l[m]&amp;&amp;!l[m][i])&amp;&amp;j&amp;&amp;d===b)return;m||(k?a[f.expando]=m=++f.uuid:m=f.expando),l[m]||(l[m]={},k||(l[m].toJSON=f.noop));if(typeof c==&quot;object&quot;||typeof c==&quot;function&quot;)e?l[m][i]=f.extend(l[m][i],c):l[m]=f.extend(l[m],c);g=l[m],e&amp;&amp;(g[i]||(g[i]={}),g=g[i]),d!==b&amp;&amp;(g[f.camelCase(c)]=d);if(c===&quot;events&quot;&amp;&amp;!g[c])return g[i]&amp;&amp;g[i].events;j?(h=g[c],h==null&amp;&amp;(h=g[f.camelCase(c)])):h=g;return h}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e=f.expando,g=a.nodeType,h=g?f.cache:a,i=g?a[f.expando]:f.expando;if(!h[i])return;if(b){d=c?h[i][e]:h[i];if(d){d[b]||(b=f.camelCase(b)),delete d[b];if(!l(d))return}}if(c){delete h[i][e];if(!l(h[i]))return}var j=h[i][e];f.support.deleteExpando||!h.setInterval?delete h[i]:h[i]=null,j?(h[i]={},g||(h[i].toJSON=f.noop),h[i][e]=j):g&amp;&amp;(f.support.deleteExpando?delete a[f.expando]:a.removeAttribute?a.removeAttribute(f.expando):a[f.expando]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&amp;&amp;a.getAttribute(&quot;classid&quot;)===b}return!0}}),f.fn.extend({data:function(a,c){var d=null;if(typeof a==&quot;undefined&quot;){if(this.length){d=f.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,g;for(var h=0,i=e.length;h&lt;i;h++)g=e[h].name,g.indexOf(&quot;data-&quot;)===0&amp;&amp;(g=f.camelCase(g.substring(5)),k(this[0],g,d[g]))}}return d}if(typeof a==&quot;object&quot;)return this.each(function(){f.data(this,a)});var j=a.split(&quot;.&quot;);j[1]=j[1]?&quot;.&quot;+j[1]:&quot;&quot;;if(c===b){d=this.triggerHandler(&quot;getData&quot;+j[1]+&quot;!&quot;,[j[0]]),d===b&amp;&amp;this.length&amp;&amp;(d=f.data(this[0],a),d=k(this[0],a,d));return d===b&amp;&amp;j[1]?this.data(j[0]):d}return this.each(function(){var b=f(this),d=[j[0],c];b.triggerHandler(&quot;setData&quot;+j[1]+&quot;!&quot;,d),f.data(this,a,c),b.triggerHandler(&quot;changeData&quot;+j[1]+&quot;!&quot;,d)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,c){a&amp;&amp;(c=(c||&quot;fx&quot;)+&quot;mark&quot;,f.data(a,c,(f.data(a,c,b,!0)||0)+1,!0))},_unmark:function(a,c,d){a!==!0&amp;&amp;(d=c,c=a,a=!1);if(c){d=d||&quot;fx&quot;;var e=d+&quot;mark&quot;,g=a?0:(f.data(c,e,b,!0)||1)-1;g?f.data(c,e,g,!0):(f.removeData(c,e,!0),m(c,d,&quot;mark&quot;))}},queue:function(a,c,d){if(a){c=(c||&quot;fx&quot;)+&quot;queue&quot;;var e=f.data(a,c,b,!0);d&amp;&amp;(!e||f.isArray(d)?e=f.data(a,c,f.makeArray(d),!0):e.push(d));return e||[]}},dequeue:function(a,b){b=b||&quot;fx&quot;;var c=f.queue(a,b),d=c.shift(),e;d===&quot;inprogress&quot;&amp;&amp;(d=c.shift()),d&amp;&amp;(b===&quot;fx&quot;&amp;&amp;c.unshift(&quot;inprogress&quot;),d.call(a,function(){f.dequeue(a,b)})),c.length||(f.removeData(a,b+&quot;queue&quot;,!0),m(a,b,&quot;queue&quot;))}}),f.fn.extend({queue:function(a,c){typeof a!=&quot;string&quot;&amp;&amp;(c=a,a=&quot;fx&quot;);if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a===&quot;fx&quot;&amp;&amp;b[0]!==&quot;inprogress&quot;&amp;&amp;f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||&quot;fx&quot;;return this.queue(b,function(){var c=this;setTimeout(function(){f.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||&quot;fx&quot;,[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!=&quot;string&quot;&amp;&amp;(c=a,a=b),a=a||&quot;fx&quot;;var d=f.Deferred(),e=this,g=e.length,h=1,i=a+&quot;defer&quot;,j=a+&quot;queue&quot;,k=a+&quot;mark&quot;,l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&amp;&amp;f.data(e[g],i,f._Deferred(),!0))h++,l.done(m);m();return d.promise()}});var n=/[\n\t\r]/g,o=/\s+/,p=/\r/g,q=/^(?:button|input)$/i,r=/^(?:button|input|object|select|textarea)$/i,s=/^a(?:rea)?$/i,t=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u,v;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&amp;&amp;typeof a==&quot;string&quot;){b=a.split(o);for(c=0,d=this.length;c&lt;d;c++){e=this[c];if(e.nodeType===1)if(!e.className&amp;&amp;b.length===1)e.className=a;else{g=&quot; &quot;+e.className+&quot; &quot;;for(h=0,i=b.length;h&lt;i;h++)~g.indexOf(&quot; &quot;+b[h]+&quot; &quot;)||(g+=b[h]+&quot; &quot;);e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&amp;&amp;typeof a==&quot;string&quot;||a===b){c=(a||&quot;&quot;).split(o);for(d=0,e=this.length;d&lt;e;d++){g=this[d];if(g.nodeType===1&amp;&amp;g.className)if(a){h=(&quot; &quot;+g.className+&quot; &quot;).replace(n,&quot; &quot;);for(i=0,j=c.length;i&lt;j;i++)h=h.replace(&quot; &quot;+c[i]+&quot; &quot;,&quot; &quot;);g.className=f.trim(h)}else g.className=&quot;&quot;}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b==&quot;boolean&quot;;if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c===&quot;string&quot;){var e,g=0,h=f(this),i=b,j=a.split(o);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?&quot;addClass&quot;:&quot;removeClass&quot;](e)}else if(c===&quot;undefined&quot;||c===&quot;boolean&quot;)this.className&amp;&amp;f._data(this,&quot;__className__&quot;,this.className),this.className=this.className||a===!1?&quot;&quot;:f._data(this,&quot;__className__&quot;)||&quot;&quot;})},hasClass:function(a){var b=&quot; &quot;+a+&quot; &quot;;for(var c=0,d=this.length;c&lt;d;c++)if(this[c].nodeType===1&amp;&amp;(&quot; &quot;+this[c].className+&quot; &quot;).replace(n,&quot; &quot;).indexOf(b)&gt;-1)return!0;return!1},val:function(a){var c,d,e=this[0];if(!arguments.length){if(e){c=f.valHooks[e.nodeName.toLowerCase()]||f.valHooks[e.type];if(c&amp;&amp;&quot;get&quot;in c&amp;&amp;(d=c.get(e,&quot;value&quot;))!==b)return d;d=e.value;return typeof d==&quot;string&quot;?d.replace(p,&quot;&quot;):d==null?&quot;&quot;:d}return b}var g=f.isFunction(a);return this.each(function(d){var e=f(this),h;if(this.nodeType===1){g?h=a.call(this,d,e.val()):h=a,h==null?h=&quot;&quot;:typeof h==&quot;number&quot;?h+=&quot;&quot;:f.isArray(h)&amp;&amp;(h=f.map(h,function(a){return a==null?&quot;&quot;:a+&quot;&quot;})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!(&quot;set&quot;in c)||c.set(this,h,&quot;value&quot;)===b)this.value=h}})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c=a.selectedIndex,d=[],e=a.options,g=a.type===&quot;select-one&quot;;if(c&lt;0)return null;for(var h=g?c:0,i=g?c+1:e.length;h&lt;i;h++){var j=e[h];if(j.selected&amp;&amp;(f.support.optDisabled?!j.disabled:j.getAttribute(&quot;disabled&quot;)===null)&amp;&amp;(!j.parentNode.disabled||!f.nodeName(j.parentNode,&quot;optgroup&quot;))){b=f(j).val();if(g)return b;d.push(b)}}if(g&amp;&amp;!d.length&amp;&amp;e.length)return f(e[c]).val();return d},set:function(a,b){var c=f.makeArray(b);f(a).find(&quot;option&quot;).each(function(){this.selected=f.inArray(f(this).val(),c)&gt;=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:&quot;tabIndex&quot;},attr:function(a,c,d,e){var g=a.nodeType;if(!a||g===3||g===8||g===2)return b;if(e&amp;&amp;c in f.attrFn)return f(a)[c](d);if(!(&quot;getAttribute&quot;in a))return f.prop(a,c,d);var h,i,j=g!==1||!f.isXMLDoc(a);j&amp;&amp;(c=f.attrFix[c]||c,i=f.attrHooks[c],i||(t.test(c)?i=v:u&amp;&amp;(i=u)));if(d!==b){if(d===null){f.removeAttr(a,c);return b}if(i&amp;&amp;&quot;set&quot;in i&amp;&amp;j&amp;&amp;(h=i.set(a,d,c))!==b)return h;a.setAttribute(c,&quot;&quot;+d);return d}if(i&amp;&amp;&quot;get&quot;in i&amp;&amp;j&amp;&amp;(h=i.get(a,c))!==null)return h;h=a.getAttribute(c);return h===null?b:h},removeAttr:function(a,b){var c;a.nodeType===1&amp;&amp;(b=f.attrFix[b]||b,f.attr(a,b,&quot;&quot;),a.removeAttribute(b),t.test(b)&amp;&amp;(c=f.propFix[b]||b)in a&amp;&amp;(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(q.test(a.nodeName)&amp;&amp;a.parentNode)f.error(&quot;type property can't be changed&quot;);else if(!f.support.radioValue&amp;&amp;b===&quot;radio&quot;&amp;&amp;f.nodeName(a,&quot;input&quot;)){var c=a.value;a.setAttribute(&quot;type&quot;,b),c&amp;&amp;(a.value=c);return b}}},value:{get:function(a,b){if(u&amp;&amp;f.nodeName(a,&quot;button&quot;))return u.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(u&amp;&amp;f.nodeName(a,&quot;button&quot;))return u.set(a,b,c);a.value=b}}},propFix:{tabindex:&quot;tabIndex&quot;,readonly:&quot;readOnly&quot;,&quot;for&quot;:&quot;htmlFor&quot;,&quot;class&quot;:&quot;className&quot;,maxlength:&quot;maxLength&quot;,cellspacing:&quot;cellSpacing&quot;,cellpadding:&quot;cellPadding&quot;,rowspan:&quot;rowSpan&quot;,colspan:&quot;colSpan&quot;,usemap:&quot;useMap&quot;,frameborder:&quot;frameBorder&quot;,contenteditable:&quot;contentEditable&quot;},prop:function(a,c,d){var e=a.nodeType;if(!a||e===3||e===8||e===2)return b;var g,h,i=e!==1||!f.isXMLDoc(a);i&amp;&amp;(c=f.propFix[c]||c,h=f.propHooks[c]);return d!==b?h&amp;&amp;&quot;set&quot;in h&amp;&amp;(g=h.set(a,d,c))!==b?g:a[c]=d:h&amp;&amp;&quot;get&quot;in h&amp;&amp;(g=h.get(a,c))!==null?g:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode(&quot;tabindex&quot;);return c&amp;&amp;c.specified?parseInt(c.value,10):r.test(a.nodeName)||s.test(a.nodeName)&amp;&amp;a.href?0:b}}}}),f.attrHooks.tabIndex=f.propHooks.tabIndex,v={get:function(a,c){var d;return f.prop(a,c)===!0||(d=a.getAttributeNode(c))&amp;&amp;d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&amp;&amp;(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},f.support.getSetAttribute||(u=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&amp;&amp;d.nodeValue!==&quot;&quot;?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+&quot;&quot;}},f.each([&quot;width&quot;,&quot;height&quot;],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===&quot;&quot;){a.setAttribute(b,&quot;auto&quot;);return c}}})})),f.support.hrefNormalized||f.each([&quot;href&quot;,&quot;src&quot;,&quot;width&quot;,&quot;height&quot;],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=&quot;&quot;+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&amp;&amp;(b.selectedIndex,b.parentNode&amp;&amp;b.parentNode.selectedIndex);return null}})),f.support.checkOn||f.each([&quot;radio&quot;,&quot;checkbox&quot;],function(){f.valHooks[this]={get:function(a){return a.getAttribute(&quot;value&quot;)===null?&quot;on&quot;:a.value}}}),f.each([&quot;radio&quot;,&quot;checkbox&quot;],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)&gt;=0}})});var w=/\.(.*)$/,x=/^(?:textarea|input|select)$/i,y=/\./g,z=/ /g,A=/[^\w\s.|`]/g,B=function(a){return a.replace(A,&quot;\\$&amp;&quot;)};f.event={add:function(a,c,d,e){if(a.nodeType!==3&amp;&amp;a.nodeType!==8){if(d===!1)d=C;else if(!d)return;var g,h;d.handler&amp;&amp;(g=d,d=g.handler),d.guid||(d.guid=f.guid++);var i=f._data(a);if(!i)return;var j=i.events,k=i.handle;j||(i.events=j={}),k||(i.handle=k=function(a){return typeof f!=&quot;undefined&quot;&amp;&amp;(!a||f.event.triggered!==a.type)?f.event.handle.apply(k.elem,arguments):b}),k.elem=a,c=c.split(&quot; &quot;);var l,m=0,n;while(l=c[m++]){h=g?f.extend({},g):{handler:d,data:e},l.indexOf(&quot;.&quot;)&gt;-1?(n=l.split(&quot;.&quot;),l=n.shift(),h.namespace=n.slice(0).sort().join(&quot;.&quot;)):(n=[],h.namespace=&quot;&quot;),h.type=l,h.guid||(h.guid=d.guid);var o=j[l],p=f.event.special[l]||{};if(!o){o=j[l]=[];if(!p.setup||p.setup.call(a,e,n,k)===!1)a.addEventListener?a.addEventListener(l,k,!1):a.attachEvent&amp;&amp;a.attachEvent(&quot;on&quot;+l,k)}p.add&amp;&amp;(p.add.call(a,h),h.handler.guid||(h.handler.guid=d.guid)),o.push(h),f.event.global[l]=!0}a=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&amp;&amp;a.nodeType!==8){d===!1&amp;&amp;(d=C);var g,h,i,j,k=0,l,m,n,o,p,q,r,s=f.hasData(a)&amp;&amp;f._data(a),t=s&amp;&amp;s.events;if(!s||!t)return;c&amp;&amp;c.type&amp;&amp;(d=c.handler,c=c.type);if(!c||typeof c==&quot;string&quot;&amp;&amp;c.charAt(0)===&quot;.&quot;){c=c||&quot;&quot;;for(h in t)f.event.remove(a,h+c);return}c=c.split(&quot; &quot;);while(h=c[k++]){r=h,q=null,l=h.indexOf(&quot;.&quot;)&lt;0,m=[],l||(m=h.split(&quot;.&quot;),h=m.shift(),n=new RegExp(&quot;(^|\\.)&quot;+f.map(m.slice(0).sort(),B).join(&quot;\\.(?:.*\\.)?&quot;)+&quot;(\\.|$)&quot;)),p=t[h];if(!p)continue;if(!d){for(j=0;j&lt;p.length;j++){q=p[j];if(l||n.test(q.namespace))f.event.remove(a,r,q.handler,j),p.splice(j--,1)}continue}o=f.event.special[h]||{};for(j=e||0;j&lt;p.length;j++){q=p[j];if(d.guid===q.guid){if(l||n.test(q.namespace))e==null&amp;&amp;p.splice(j--,1),o.remove&amp;&amp;o.remove.call(a,q);if(e!=null)break}}if(p.length===0||e!=null&amp;&amp;p.length===1)(!o.teardown||o.teardown.call(a,m)===!1)&amp;&amp;f.removeEvent(a,h,s.handle),g=null,delete</span>
<a href="#l55.7"></a><span id="l55.7"> t[h]}if(f.isEmptyObject(t)){var u=s.handle;u&amp;&amp;(u.elem=null),delete s.events,delete s.handle,f.isEmptyObject(s)&amp;&amp;f.removeData(a,b,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){var h=c.type||c,i=[],j;h.indexOf(&quot;!&quot;)&gt;=0&amp;&amp;(h=h.slice(0,-1),j=!0),h.indexOf(&quot;.&quot;)&gt;=0&amp;&amp;(i=h.split(&quot;.&quot;),h=i.shift(),i.sort());if(!!e&amp;&amp;!f.event.customEvent[h]||!!f.event.global[h]){c=typeof c==&quot;object&quot;?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.exclusive=j,c.namespace=i.join(&quot;.&quot;),c.namespace_re=new RegExp(&quot;(^|\\.)&quot;+i.join(&quot;\\.(?:.*\\.)?&quot;)+&quot;(\\.|$)&quot;);if(g||!e)c.preventDefault(),c.stopPropagation();if(!e){f.each(f.cache,function(){var a=f.expando,b=this[a];b&amp;&amp;b.events&amp;&amp;b.events[h]&amp;&amp;f.event.trigger(c,d,b.handle.elem)});return}if(e.nodeType===3||e.nodeType===8)return;c.result=b,c.target=e,d=d!=null?f.makeArray(d):[],d.unshift(c);var k=e,l=h.indexOf(&quot;:&quot;)&lt;0?&quot;on&quot;+h:&quot;&quot;;do{var m=f._data(k,&quot;handle&quot;);c.currentTarget=k,m&amp;&amp;m.apply(k,d),l&amp;&amp;f.acceptData(k)&amp;&amp;k[l]&amp;&amp;k[l].apply(k,d)===!1&amp;&amp;(c.result=!1,c.preventDefault()),k=k.parentNode||k.ownerDocument||k===c.target.ownerDocument&amp;&amp;a}while(k&amp;&amp;!c.isPropagationStopped());if(!c.isDefaultPrevented()){var n,o=f.event.special[h]||{};if((!o._default||o._default.call(e.ownerDocument,c)===!1)&amp;&amp;(h!==&quot;click&quot;||!f.nodeName(e,&quot;a&quot;))&amp;&amp;f.acceptData(e)){try{l&amp;&amp;e[h]&amp;&amp;(n=e[l],n&amp;&amp;(e[l]=null),f.event.triggered=h,e[h]())}catch(p){}n&amp;&amp;(e[l]=n),f.event.triggered=b}}return c.result}},handle:function(c){c=f.event.fix(c||a.event);var d=((f._data(this,&quot;events&quot;)||{})[c.type]||[]).slice(0),e=!c.exclusive&amp;&amp;!c.namespace,g=Array.prototype.slice.call(arguments,0);g[0]=c,c.currentTarget=this;for(var h=0,i=d.length;h&lt;i;h++){var j=d[h];if(e||c.namespace_re.test(j.namespace)){c.handler=j.handler,c.data=j.data,c.handleObj=j;var k=j.handler.apply(this,g);k!==b&amp;&amp;(c.result=k,k===!1&amp;&amp;(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}return c.result},props:&quot;altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which&quot;.split(&quot; &quot;),fix:function(a){if(a[f.expando])return a;var d=a;a=f.Event(d);for(var e=this.props.length,g;e;)g=this.props[--e],a[g]=d[g];a.target||(a.target=a.srcElement||c),a.target.nodeType===3&amp;&amp;(a.target=a.target.parentNode),!a.relatedTarget&amp;&amp;a.fromElement&amp;&amp;(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&amp;&amp;a.clientX!=null){var h=a.target.ownerDocument||c,i=h.documentElement,j=h.body;a.pageX=a.clientX+(i&amp;&amp;i.scrollLeft||j&amp;&amp;j.scrollLeft||0)-(i&amp;&amp;i.clientLeft||j&amp;&amp;j.clientLeft||0),a.pageY=a.clientY+(i&amp;&amp;i.scrollTop||j&amp;&amp;j.scrollTop||0)-(i&amp;&amp;i.clientTop||j&amp;&amp;j.clientTop||0)}a.which==null&amp;&amp;(a.charCode!=null||a.keyCode!=null)&amp;&amp;(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&amp;&amp;a.ctrlKey&amp;&amp;(a.metaKey=a.ctrlKey),!a.which&amp;&amp;a.button!==b&amp;&amp;(a.which=a.button&amp;1?1:a.button&amp;2?3:a.button&amp;4?2:0);return a},guid:1e8,proxy:f.proxy,special:{ready:{setup:f.bindReady,teardown:f.noop},live:{add:function(a){f.event.add(this,M(a.origType,a.selector),f.extend({},a,{handler:L,guid:a.handler.guid}))},remove:function(a){f.event.remove(this,M(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){f.isWindow(this)&amp;&amp;(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&amp;&amp;(this.onbeforeunload=null)}}}},f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&amp;&amp;a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&amp;&amp;a.detachEvent(&quot;on&quot;+b,c)},f.Event=function(a,b){if(!this.preventDefault)return new f.Event(a,b);a&amp;&amp;a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&amp;&amp;a.getPreventDefault()?D:C):this.type=a,b&amp;&amp;f.extend(this,b),this.timeStamp=f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=D;var a=this.originalEvent;!a||(a.stopPropagation&amp;&amp;a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=D,this.stopPropagation()},isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C};var E=function(a){var b=a.relatedTarget,c=!1,d=a.type;a.type=a.data,b!==this&amp;&amp;(b&amp;&amp;(c=f.contains(this,b)),c||(f.event.handle.apply(this,arguments),a.type=d))},F=function(a){a.type=a.data,f.event.handle.apply(this,arguments)};f.each({mouseenter:&quot;mouseover&quot;,mouseleave:&quot;mouseout&quot;},function(a,b){f.event.special[a]={setup:function(c){f.event.add(this,b,c&amp;&amp;c.selector?F:E,a)},teardown:function(a){f.event.remove(this,b,a&amp;&amp;a.selector?F:E)}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(a,b){if(!f.nodeName(this,&quot;form&quot;))f.event.add(this,&quot;click.specialSubmit&quot;,function(a){var b=a.target,c=f.nodeName(b,&quot;input&quot;)||f.nodeName(b,&quot;button&quot;)?b.type:&quot;&quot;;(c===&quot;submit&quot;||c===&quot;image&quot;)&amp;&amp;f(b).closest(&quot;form&quot;).length&amp;&amp;J(&quot;submit&quot;,this,arguments)}),f.event.add(this,&quot;keypress.specialSubmit&quot;,function(a){var b=a.target,c=f.nodeName(b,&quot;input&quot;)||f.nodeName(b,&quot;button&quot;)?b.type:&quot;&quot;;(c===&quot;text&quot;||c===&quot;password&quot;)&amp;&amp;f(b).closest(&quot;form&quot;).length&amp;&amp;a.keyCode===13&amp;&amp;J(&quot;submit&quot;,this,arguments)});else return!1},teardown:function(a){f.event.remove(this,&quot;.specialSubmit&quot;)}});if(!f.support.changeBubbles){var G,H=function(a){var b=f.nodeName(a,&quot;input&quot;)?a.type:&quot;&quot;,c=a.value;b===&quot;radio&quot;||b===&quot;checkbox&quot;?c=a.checked:b===&quot;select-multiple&quot;?c=a.selectedIndex&gt;-1?f.map(a.options,function(a){return a.selected}).join(&quot;-&quot;):&quot;&quot;:f.nodeName(a,&quot;select&quot;)&amp;&amp;(c=a.selectedIndex);return c},I=function(c){var d=c.target,e,g;if(!!x.test(d.nodeName)&amp;&amp;!d.readOnly){e=f._data(d,&quot;_change_data&quot;),g=H(d),(c.type!==&quot;focusout&quot;||d.type!==&quot;radio&quot;)&amp;&amp;f._data(d,&quot;_change_data&quot;,g);if(e===b||g===e)return;if(e!=null||g)c.type=&quot;change&quot;,c.liveFired=b,f.event.trigger(c,arguments[1],d)}};f.event.special.change={filters:{focusout:I,beforedeactivate:I,click:function(a){var b=a.target,c=f.nodeName(b,&quot;input&quot;)?b.type:&quot;&quot;;(c===&quot;radio&quot;||c===&quot;checkbox&quot;||f.nodeName(b,&quot;select&quot;))&amp;&amp;I.call(this,a)},keydown:function(a){var b=a.target,c=f.nodeName(b,&quot;input&quot;)?b.type:&quot;&quot;;(a.keyCode===13&amp;&amp;!f.nodeName(b,&quot;textarea&quot;)||a.keyCode===32&amp;&amp;(c===&quot;checkbox&quot;||c===&quot;radio&quot;)||c===&quot;select-multiple&quot;)&amp;&amp;I.call(this,a)},beforeactivate:function(a){var b=a.target;f._data(b,&quot;_change_data&quot;,H(b))}},setup:function(a,b){if(this.type===&quot;file&quot;)return!1;for(var c in G)f.event.add(this,c+&quot;.specialChange&quot;,G[c]);return x.test(this.nodeName)},teardown:function(a){f.event.remove(this,&quot;.specialChange&quot;);return x.test(this.nodeName)}},G=f.event.special.change.filters,G.focus=G.beforeactivate}f.support.focusinBubbles||f.each({focus:&quot;focusin&quot;,blur:&quot;focusout&quot;},function(a,b){function e(a){var c=f.event.fix(a);c.type=b,c.originalEvent={},f.event.trigger(c,null,c.target),c.isDefaultPrevented()&amp;&amp;a.preventDefault()}var d=0;f.event.special[b]={setup:function(){d++===0&amp;&amp;c.addEventListener(a,e,!0)},teardown:function(){--d===0&amp;&amp;c.removeEventListener(a,e,!0)}}}),f.each([&quot;bind&quot;,&quot;one&quot;],function(a,c){f.fn[c]=function(a,d,e){var g;if(typeof a==&quot;object&quot;){for(var h in a)this[c](h,d,a[h],e);return this}if(arguments.length===2||d===!1)e=d,d=b;c===&quot;one&quot;?(g=function(a){f(this).unbind(a,g);return e.apply(this,arguments)},g.guid=e.guid||f.guid++):g=e;if(a===&quot;unload&quot;&amp;&amp;c!==&quot;one&quot;)this.one(a,d,e);else for(var i=0,j=this.length;i&lt;j;i++)f.event.add(this[i],a,g,d);return this}}),f.fn.extend({unbind:function(a,b){if(typeof a==&quot;object&quot;&amp;&amp;!a.preventDefault)for(var c in a)this.unbind(c,a[c]);else for(var d=0,e=this.length;d&lt;e;d++)f.event.remove(this[d],a,b);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind(&quot;live&quot;):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f.data(this,&quot;lastToggle&quot;+a.guid)||0)%d;f.data(this,&quot;lastToggle&quot;+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d&lt;b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var K={focus:&quot;focusin&quot;,blur:&quot;focusout&quot;,mouseenter:&quot;mouseover&quot;,mouseleave:&quot;mouseout&quot;};f.each([&quot;live&quot;,&quot;die&quot;],function(a,c){f.fn[c]=function(a,d,e,g){var h,i=0,j,k,l,m=g||this.selector,n=g?this:f(this.context);if(typeof a==&quot;object&quot;&amp;&amp;!a.preventDefault){for(var o in a)n[c](o,d,a[o],m);return this}if(c===&quot;die&quot;&amp;&amp;!a&amp;&amp;g&amp;&amp;g.charAt(0)===&quot;.&quot;){n.unbind(g);return this}if(d===!1||f.isFunction(d))e=d||C,d=b;a=(a||&quot;&quot;).split(&quot; &quot;);while((h=a[i++])!=null){j=w.exec(h),k=&quot;&quot;,j&amp;&amp;(k=j[0],h=h.replace(w,&quot;&quot;));if(h===&quot;hover&quot;){a.push(&quot;mouseenter&quot;+k,&quot;mouseleave&quot;+k);continue}l=h,K[h]?(a.push(K[h]+k),h=h+k):h=(K[h]||h)+k;if(c===&quot;live&quot;)for(var p=0,q=n.length;p&lt;q;p++)f.event.add(n[p],&quot;live.&quot;+M(h,m),{data:d,selector:m,handler:e,origType:h,origHandler:e,preType:l});else n.unbind(&quot;live.&quot;+M(h,m),e)}return this}}),f.each(&quot;blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error&quot;.split(&quot; &quot;),function(a,b){f.fn[b]=function(a,c){c==null&amp;&amp;(c=a,a=null);return arguments.length&gt;0?this.bind(b,a,c):this.trigger(b)},f.attrFn&amp;&amp;(f.attrFn[b]=!0)}),function(){function u(a,b,c,d,e,f){for(var g=0,h=d.length;g&lt;h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!=&quot;string&quot;){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length&gt;0){j=i;break}}i=i[a]}d[g]=j}}}function t(a,b,c,d,e,f){for(var g=0,h=d.length;g&lt;h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&amp;&amp;!f&amp;&amp;(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['&quot;][^'&quot;]*['&quot;]|[^\[\]'&quot;]+)+\]|\\.|[^ &gt;+~,(\[\\]+)+|[&gt;+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){h=!1;return 0});var k=function(b,d,f,g){f=f||[],d=d||c;var h=d;if(d.nodeType!==1&amp;&amp;d.nodeType!==9)return[];if(!b||typeof b!=&quot;string&quot;)return f;var i,j,n,o,q,r,s,t,u=!0,w=k.isXML(d),x=[],y=b;do{a.exec(&quot;&quot;),i=a.exec(y);if(i){y=i[3],x.push(i[1]);if(i[2]){o=i[3];break}}}while(i);if(x.length&gt;1&amp;&amp;m.exec(b))if(x.length===2&amp;&amp;l.relative[x[0]])j=v(x[0]+x[1],d);else{j=l.relative[x[0]]?[d]:k(x.shift(),d);while(x.length)b=x.shift(),l.relative[b]&amp;&amp;(b+=x.shift()),j=v(b,j)}else{!g&amp;&amp;x.length&gt;1&amp;&amp;d.nodeType===9&amp;&amp;!w&amp;&amp;l.match.ID.test(x[0])&amp;&amp;!l.match.ID.test(x[x.length-1])&amp;&amp;(q=k.find(x.shift(),d,w),d=q.expr?k.filter(q.expr,q.set)[0]:q.set[0]);if(d){q=g?{expr:x.pop(),set:p(g)}:k.find(x.pop(),x.length===1&amp;&amp;(x[0]===&quot;~&quot;||x[0]===&quot;+&quot;)&amp;&amp;d.parentNode?d.parentNode:d,w),j=q.expr?k.filter(q.expr,q.set):q.set,x.length&gt;0?n=p(j):u=!1;while(x.length)r=x.pop(),s=r,l.relative[r]?s=x.pop():r=&quot;&quot;,s==null&amp;&amp;(s=d),l.relative[r](n,s,w)}else n=x=[]}n||(n=j),n||k.error(r||b);if(e.call(n)===&quot;[object Array]&quot;)if(!u)f.push.apply(f,n);else if(d&amp;&amp;d.nodeType===1)for(t=0;n[t]!=null;t++)n[t]&amp;&amp;(n[t]===!0||n[t].nodeType===1&amp;&amp;k.contains(d,n[t]))&amp;&amp;f.push(j[t]);else for(t=0;n[t]!=null;t++)n[t]&amp;&amp;n[t].nodeType===1&amp;&amp;f.push(j[t]);else p(n,f);o&amp;&amp;(k(o,h,f,g),k.uniqueSort(f));return f};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b&lt;a.length;b++)a[b]===a[b-1]&amp;&amp;a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length&gt;0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e&lt;f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!==&quot;\\&quot;){g[1]=(g[1]||&quot;&quot;).replace(i,&quot;&quot;),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],&quot;&quot;);break}}}}d||(d=typeof b.getElementsByTagName!=&quot;undefined&quot;?b.getElementsByTagName(&quot;*&quot;):[]);return{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&amp;&amp;c[0]&amp;&amp;k.isXML(c[0]);while(a&amp;&amp;c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&amp;&amp;f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)===&quot;\\&quot;)continue;j===i&amp;&amp;(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(!f)g=o=!0;else if(f===!0)continue}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&amp;&amp;o!=null?t?g=!0:j[s]=!1:t&amp;&amp;(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],&quot;&quot;);if(!g)return[];break}}if(a===h)if(g==null)k.error(a);else break;h=a}return j},k.error=function(a){throw&quot;Syntax error, unrecognized expression: &quot;+a};var l=k.selectors={order:[&quot;ID&quot;,&quot;NAME&quot;,&quot;TAG&quot;],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['&quot;]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['&quot;]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['&quot;])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['&quot;]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{&quot;class&quot;:&quot;className&quot;,&quot;for&quot;:&quot;htmlFor&quot;},attrHandle:{href:function(a){return a.getAttribute(&quot;href&quot;)},type:function(a){return a.getAttribute(&quot;type&quot;)}},relative:{&quot;+&quot;:function(a,b){var c=typeof b==&quot;string&quot;,d=c&amp;&amp;!j.test(b),e=c&amp;&amp;!d;d&amp;&amp;(b=b.toLowerCase());for(var f=0,g=a.length,h;f&lt;g;f++)if(h=a[f]){while((h=h.previousSibling)&amp;&amp;h.nodeType!==1);a[f]=e||h&amp;&amp;h.nodeName.toLowerCase()===b?h||!1:h===b}e&amp;&amp;k.filter(b,a,!0)},&quot;&gt;&quot;:function(a,b){var c,d=typeof b==&quot;string&quot;,e=0,f=a.length;if(d&amp;&amp;!j.test(b)){b=b.toLowerCase();for(;e&lt;f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e&lt;f;e++)c=a[e],c&amp;&amp;(a[e]=d?c.parentNode:c.parentNode===b);d&amp;&amp;k.filter(b,a,!0)}},&quot;&quot;:function(a,b,c){var e,f=d++,g=u;typeof b==&quot;string&quot;&amp;&amp;!j.test(b)&amp;&amp;(b=b.toLowerCase(),e=b,g=t),g(&quot;parentNode&quot;,b,f,a,e,c)},&quot;~&quot;:function(a,b,c){var e,f=d++,g=u;typeof b==&quot;string&quot;&amp;&amp;!j.test(b)&amp;&amp;(b=b.toLowerCase(),e=b,g=t),g(&quot;previousSibling&quot;,b,f,a,e,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!=&quot;undefined&quot;&amp;&amp;!c){var d=b.getElementById(a[1]);return d&amp;&amp;d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!=&quot;undefined&quot;){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e&lt;f;e++)d[e].getAttribute(&quot;name&quot;)===a[1]&amp;&amp;c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!=&quot;undefined&quot;)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=&quot; &quot;+a[1].replace(i,&quot;&quot;)+&quot; &quot;;if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&amp;&amp;(e^(h.className&amp;&amp;(&quot; &quot;+h.className+&quot; &quot;).replace(/[\t\n\r]/g,&quot; &quot;).indexOf(a)&gt;=0)?c||d.push(h):c&amp;&amp;(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,&quot;&quot;)},TAG:function(a,b){return a[1].replace(i,&quot;&quot;).toLowerCase()},CHILD:function(a){if(a[1]===&quot;nth&quot;){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,&quot;&quot;);var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]===&quot;even&quot;&amp;&amp;&quot;2n&quot;||a[2]===&quot;odd&quot;&amp;&amp;&quot;2n+1&quot;||!/\D/.test(a[2])&amp;&amp;&quot;0n+&quot;+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&amp;&amp;k.error(a[0]);a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,&quot;&quot;);!f&amp;&amp;l.attrMap[g]&amp;&amp;(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||&quot;&quot;).replace(i,&quot;&quot;),a[2]===&quot;~=&quot;&amp;&amp;(a[4]=&quot; &quot;+a[4]+&quot; &quot;);return a},PSEUDO:function(b,c,d,e,f){if(b[1]===&quot;not&quot;)if((a.exec(b[3])||&quot;&quot;).length&gt;1||/^\w/.test(b[3]))b[3]=k(b[3],null,null,c);else{var g=k.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(l.match.POS.test(b[0])||l.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&amp;&amp;a.type!==&quot;hidden&quot;},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&amp;&amp;a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute(&quot;type&quot;),c=a.type;return a.nodeName.toLowerCase()===&quot;input&quot;&amp;&amp;&quot;text&quot;===c&amp;&amp;(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()===&quot;input&quot;&amp;&amp;&quot;radio&quot;===a.type},checkbox:function(a){return a.nodeName.toLowerCase()===&quot;input&quot;&amp;&amp;&quot;checkbox&quot;===a.type},file:function(a){return a.nodeName.toLowerCase()===&quot;input&quot;&amp;&amp;&quot;file&quot;===a.type},password:function(a){return a.nodeName.toLowerCase()===&quot;input&quot;&amp;&amp;&quot;password&quot;===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b===&quot;input&quot;||b===&quot;button&quot;)&amp;&amp;&quot;submit&quot;===a.type},image:function(a){return a.nodeName.toLowerCase()===&quot;input&quot;&amp;&amp;&quot;image&quot;===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b===&quot;input&quot;||b===&quot;button&quot;)&amp;&amp;&quot;reset&quot;===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b===&quot;input&quot;&amp;&amp;&quot;button&quot;===a.type||b===&quot;button&quot;},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b&lt;c[3]-0},gt:function(a,b,c){return b&gt;c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e===&quot;contains&quot;)return(a.textContent||a.innerText||k.getText([a])||&quot;&quot;).indexOf(b[3])&gt;=0;if(e===&quot;not&quot;){var g=b[3];for(var h=0,i=g.length;h&lt;i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case&quot;only&quot;:case&quot;first&quot;:while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c===&quot;first&quot;)return!0;d=a;case&quot;last&quot;:while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case&quot;nth&quot;:var e=b[2],f=b[3];if(e===1&amp;&amp;f===0)return!0;var g=b[0],h=a.parentNode;if(h&amp;&amp;(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&amp;&amp;(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&amp;&amp;j/e&gt;=0}},ID:function(a,b){return a.nodeType===1&amp;&amp;a.getAttribute(&quot;id&quot;)===b},TAG:function(a,b){return b===&quot;*&quot;&amp;&amp;a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(&quot; &quot;+(a.className||a.getAttribute(&quot;class&quot;))+&quot; &quot;).indexOf(b)&gt;-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+&quot;&quot;,f=b[2],g=b[4];return d==null?f===&quot;!=&quot;:f===&quot;=&quot;?e===g:f===&quot;*=&quot;?e.indexOf(g)&gt;=0:f===&quot;~=&quot;?(&quot; &quot;+e+&quot; &quot;).indexOf(g)&gt;=0:g?f===&quot;!=&quot;?e!==g:f===&quot;^=&quot;?e.indexOf(g)===0:f===&quot;$=&quot;?e.substr(e.length-g.length)===g:f===&quot;|=&quot;?e===g||e.substr(0,g.length+1)===g+&quot;-&quot;:!1:e&amp;&amp;d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return&quot;\\&quot;+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(e.call(a)===&quot;[object Array]&quot;)Array.prototype.push.apply(d,a);else if(typeof a.length==&quot;number&quot;)for(var f=a.length;c&lt;f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;c.documentElement.compareDocumentPosition?r=function(a,b){if(a===b){g=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&amp;4?-1:1}:(r=function(a,b){if(a===b){g=!0;return 0}if(a.sourceIndex&amp;&amp;b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k&lt;c&amp;&amp;k&lt;d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b=&quot;&quot;,c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&amp;&amp;(b+=k.getText(c.childNodes));return b},function(){var a=c.createElement(&quot;div&quot;),d=&quot;script&quot;+(new Date).getTime(),e=c.documentElement;a.innerHTML=&quot;&lt;a name='&quot;+d+&quot;'/&gt;&quot;,e.insertBefore(a,e.firstChild),c.getElementById(d)&amp;&amp;(l.find.ID=function(a,c,d){if(typeof c.getElementById!=&quot;undefined&quot;&amp;&amp;!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!=&quot;undefined&quot;&amp;&amp;e.getAttributeNode(&quot;id&quot;).nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!=&quot;undefined&quot;&amp;&amp;a.getAttributeNode(&quot;id&quot;);return a.nodeType===1&amp;&amp;c&amp;&amp;c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement(&quot;div&quot;);a.appendChild(c.createComment(&quot;&quot;)),a.getElementsByTagName(&quot;*&quot;).length&gt;0&amp;&amp;(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]===&quot;*&quot;){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&amp;&amp;d.push(c[e]);c=d}return c}),a.innerHTML=&quot;&lt;a href='#'&gt;&lt;/a&gt;&quot;,a.firstChild&amp;&amp;typeof a.firstChild.getAttribute!=&quot;undefined&quot;&amp;&amp;a.firstChild.getAttribute(&quot;href&quot;)!==&quot;#&quot;&amp;&amp;(l.attrHandle.href=function(a){return a.getAttribute(&quot;href&quot;,2)}),a=null}(),c.querySelectorAll&amp;&amp;function(){var a=k,b=c.createElement(&quot;div&quot;),d=&quot;__sizzle__&quot;;b.innerHTML=&quot;&lt;p class='TEST'&gt;&lt;/p&gt;&quot;;if(!b.querySelectorAll||b.querySelectorAll(&quot;.TEST&quot;).length!==0){k=function(b,e,f,g){e=e||c;if(!g&amp;&amp;!k.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&amp;&amp;(e.nodeType===1||e.nodeType===9)){if(h[1])return p(e.getElementsByTagName(b),f);if(h[2]&amp;&amp;l.find.CLASS&amp;&amp;e.getElementsByClassName)return p(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b===&quot;body&quot;&amp;&amp;e.body)return p([e.body],f);if(h&amp;&amp;h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return p([],f);if(i.id===h[3])return p([i],f)}try{return p(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&amp;&amp;e.nodeName.toLowerCase()!==&quot;object&quot;){var m=e,n=e.getAttribute(&quot;id&quot;),o=n||d,q=e.parentNode,r=/^\s*[+~]/.test(b);n?o=o.replace(/'/g,&quot;\\$&amp;&quot;):e.setAttribute(&quot;id&quot;,o),r&amp;&amp;q&amp;&amp;(e=e.parentNode);try{if(!r||q)return p(e.querySelectorAll(&quot;[id='&quot;+o+&quot;'] &quot;+b),f)}catch(s){}finally{n||m.removeAttribute(&quot;id&quot;)}}}return a(b,e,f,g)};for(var e in a)k[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement(&quot;div&quot;),&quot;div&quot;),e=!1;try{b.call(c.documentElement,&quot;[test!='']:sizzle&quot;)}catch(f){e=!0}k.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'&quot;\]]*)\s*\]/g,&quot;='$1']&quot;);if(!k.isXML(a))try{if(e||!l.match.PSEUDO.test(c)&amp;&amp;!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&amp;&amp;a.document.nodeType!==11)return f}}catch(g){}return k(c,null,null,[a]).length&gt;0}}}(),function(){var a=c.createElement(&quot;div&quot;);a.innerHTML=&quot;&lt;div class='test e'&gt;&lt;/div&gt;&lt;div class='test'&gt;&lt;/div&gt;&quot;;if(!!a.getElementsByClassName&amp;&amp;a.getElementsByClassName(&quot;e&quot;).length!==0){a.lastChild.className=&quot;e&quot;;if(a.getElementsByClassName(&quot;e&quot;).length===1)return;l.order.splice(1,0,&quot;CLASS&quot;),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!=&quot;undefined&quot;&amp;&amp;!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?k.contains=function(a,b){return a!==b&amp;&amp;(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&amp;16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!==&quot;HTML&quot;:!1};var v=function(a,b){var c,d=[],e=&quot;&quot;,f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,&quot;&quot;);a=l.relative[a]?a+&quot;*&quot;:a;for(var g=0,h=f.length;g&lt;h;g++)k(a,f[g],d);return k.filter(e,d)};f.find=k,f.expr=k.selectors,f.expr[&quot;:&quot;]=f.expr.filters,f.unique=k.uniqueSort,f.text=k.getText,f.isXMLDoc=k.isXML,f.contains=k.contains}();var N=/Until$/,O=/^(?:parents|prevUntil|prevAll)/,P=/,/,Q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,S=f.expr.match.POS,T={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!=&quot;string&quot;)return f(a).filter(function(){for(c=0,d=b.length;c&lt;d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack(&quot;&quot;,&quot;find&quot;,a),g,h,i;for(c=0,d=this.length;c&lt;d;c++){g=e.length,f.find(a,this[c],e);if(c&gt;0)for(h=g;h&lt;e.length;h++)for(i=0;i&lt;g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a&lt;c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(V(this,a,!1),&quot;not&quot;,a)},filter:function(a){return this.pushStack(V(this,a,!0),&quot;filter&quot;,a)},is:function(a){return!!a&amp;&amp;(typeof a==&quot;string&quot;?f.filter(a,this).length&gt;0:this.filter(a).length&gt;0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h,i,j={},k=1;if(g&amp;&amp;a.length){for(d=0,e=a.length;d&lt;e;d++)i=a[d],j[i]||(j[i]=S.test(i)?f(i,b||this.context):i);while(g&amp;&amp;g.ownerDocument&amp;&amp;g!==b){for(i in j)h=j[i],(h.jquery?h.index(g)&gt;-1:f(g).is(h))&amp;&amp;c.push({selector:i,elem:g,level:k});g=g.parentNode,k++}}return c}var l=S.test(a)||typeof a!=&quot;string&quot;?f(a,b||this.context):0;for(d=0,e=this.length;d&lt;e;d++){g=this[d];while(g){if(l?l.index(g)&gt;-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length&gt;1?f.unique(c):c;return this.pushStack(c,&quot;closest&quot;,a)},index:function(a){if(!a)return this[0]&amp;&amp;this[0].parentNode?this.prevAll().length:-1;if(typeof a==&quot;string&quot;)return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a==&quot;string&quot;?f(a,b):f.makeArray(a&amp;&amp;a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(U(c[0])||U(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&amp;&amp;b.nodeType!==11?b:null},parents:function(a){return f.dir(a,&quot;parentNode&quot;)},parentsUntil:function(a,b,c){return f.dir(a,&quot;parentNode&quot;,c)},next:function(a){return f.nth(a,2,&quot;nextSibling&quot;)},prev:function(a){return f.nth(a,2,&quot;previousSibling&quot;)},nextAll:function(a){return f.dir(a,&quot;nextSibling&quot;)},prevAll:function(a){return f.dir(a,&quot;previousSibling&quot;)},nextUntil:function(a,b,c){return f.dir(a,&quot;nextSibling&quot;,c)},prevUntil:function(a,b,c){return f.dir(a,&quot;previousSibling&quot;,c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,&quot;iframe&quot;)?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c),g=R.call(arguments);N.test(a)||(d=c),d&amp;&amp;typeof d==&quot;string&quot;&amp;&amp;(e=f.filter(d,e)),e=this.length&gt;1&amp;&amp;!T[a]?f.unique(e):e,(this.length&gt;1||P.test(d))&amp;&amp;O.test(a)&amp;&amp;(e=e.reverse());return this.pushStack(e,a,g.join(&quot;,&quot;))}}),f.extend({filter:function(a,b,c){c&amp;&amp;(a=&quot;:not(&quot;+a+&quot;)&quot;);return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&amp;&amp;g.nodeType!==9&amp;&amp;(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&amp;&amp;e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&amp;&amp;++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&amp;&amp;a!==b&amp;&amp;c.push(a);return c}});var W=/ jQuery\d+=&quot;(?:\d+|null)&quot;/g,X=/^\s+/,Y=/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig,Z=/&lt;([\w:]+)/,$=/&lt;tbody/i,_=/&lt;|&amp;#?\w+;/,ba=/&lt;(?:script|object|embed|option|style)/i,bb=/checked\s*(?:[^=]|=\s*.checked.)/i,bc=/\/(java|ecma)script/i,bd=/^\s*&lt;!(?:\[CDATA\[|\-\-)/,be={option:[1,&quot;&lt;select multiple='multiple'&gt;&quot;,&quot;&lt;/select&gt;&quot;],legend:[1,&quot;&lt;fieldset&gt;&quot;,&quot;&lt;/fieldset&gt;&quot;],thead:[1,&quot;&lt;table&gt;&quot;,&quot;&lt;/table&gt;&quot;],tr:[2,&quot;&lt;table&gt;&lt;tbody&gt;&quot;,&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;],td:[3,&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;,&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;],col:[2,&quot;&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;&quot;,&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;],area:[1,&quot;&lt;map&gt;&quot;,&quot;&lt;/map&gt;&quot;],_default:[0,&quot;&quot;,&quot;&quot;]};be.optgroup=be.option,be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,f.support.htmlSerialize||(be._default=[1,&quot;div&lt;div&gt;&quot;,&quot;&lt;/div&gt;&quot;]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!=&quot;object&quot;&amp;&amp;a!==b)return this.empty().append((this[0]&amp;&amp;this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&amp;&amp;b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&amp;&amp;a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){f(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,&quot;body&quot;)||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&amp;&amp;this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&amp;&amp;this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&amp;&amp;this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,&quot;before&quot;,arguments)}},after:function(){if(this[0]&amp;&amp;this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,&quot;after&quot;,arguments);a.push.apply(a,f(arguments[0]).toArray());return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&amp;&amp;d.nodeType===1&amp;&amp;(f.cleanData(d.getElementsByTagName(&quot;*&quot;)),f.cleanData([d])),d.parentNode&amp;&amp;d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&amp;&amp;f.cleanData(b.getElementsByTagName(&quot;*&quot;));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&amp;&amp;this[0].nodeType===1?this[0].innerHTML.replace(W,&quot;&quot;):null;if(typeof a==&quot;string&quot;&amp;&amp;!ba.test(a)&amp;&amp;(f.support.leadingWhitespace||!X.test(a))&amp;&amp;!be[(Z.exec(a)||[&quot;&quot;,&quot;&quot;])[1].toLowerCase()]){a=a.replace(Y,&quot;&lt;$1&gt;&lt;/$2&gt;&quot;);try{for(var c=0,d=this.length;c&lt;d;c++)this[c].nodeType===1&amp;&amp;(f.cleanData(this[c].getElementsByTagName(&quot;*&quot;)),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&amp;&amp;this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!=&quot;string&quot;&amp;&amp;(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),&quot;replaceWith&quot;,a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&amp;&amp;arguments.length===3&amp;&amp;typeof j==&quot;string&quot;&amp;&amp;bb.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&amp;&amp;j.parentNode,f.support.parentNode&amp;&amp;i&amp;&amp;i.nodeType===11&amp;&amp;i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&amp;&amp;f.nodeName(g,&quot;tr&quot;);for(var l=0,m=this.length,n=m-1;l&lt;m;l++)d.call(c?bf(this[l],g):this[l],e.cacheable||m&gt;1&amp;&amp;l&lt;n?f.clone(h,!0,!0):h)}k.length&amp;&amp;f.each(k,bl)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i;b&amp;&amp;b[0]&amp;&amp;(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&amp;&amp;typeof a[0]==&quot;string&quot;&amp;&amp;a[0].length&lt;512&amp;&amp;i===c&amp;&amp;a[0].charAt(0)===&quot;&lt;&quot;&amp;&amp;!ba.test(a[0])&amp;&amp;(f.support.checkClone||!bb.test(a[0]))&amp;&amp;(g=!0,h=f.fragments[a[0]],h&amp;&amp;h!==1&amp;&amp;(e=h)),e||(e=i.createDocumentFragment(),f.clean</span>
<a href="#l55.8"></a><span id="l55.8"> (a,i,e,d)),g&amp;&amp;(f.fragments[a[0]]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:&quot;append&quot;,prependTo:&quot;prepend&quot;,insertBefore:&quot;before&quot;,insertAfter:&quot;after&quot;,replaceAll:&quot;replaceWith&quot;},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&amp;&amp;this[0].parentNode;if(g&amp;&amp;g.nodeType===11&amp;&amp;g.childNodes.length===1&amp;&amp;e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h&lt;i;h++){var j=(h&gt;0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,g,h;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&amp;&amp;(a.nodeType===1||a.nodeType===11)&amp;&amp;!f.isXMLDoc(a)){bh(a,d),e=bi(a),g=bi(d);for(h=0;e[h];++h)g[h]&amp;&amp;bh(e[h],g[h])}if(b){bg(a,d);if(c){e=bi(a),g=bi(d);for(h=0;e[h];++h)bg(e[h],g[h])}}e=g=null;return d},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement==&quot;undefined&quot;&amp;&amp;(b=b.ownerDocument||b[0]&amp;&amp;b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k==&quot;number&quot;&amp;&amp;(k+=&quot;&quot;);if(!k)continue;if(typeof k==&quot;string&quot;)if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,&quot;&lt;$1&gt;&lt;/$2&gt;&quot;);var l=(Z.exec(k)||[&quot;&quot;,&quot;&quot;])[1].toLowerCase(),m=be[l]||be._default,n=m[0],o=b.createElement(&quot;div&quot;);o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l===&quot;table&quot;&amp;&amp;!p?o.firstChild&amp;&amp;o.firstChild.childNodes:m[1]===&quot;&lt;table&gt;&quot;&amp;&amp;!p?o.childNodes:[];for(i=q.length-1;i&gt;=0;--i)f.nodeName(q[i],&quot;tbody&quot;)&amp;&amp;!q[i].childNodes.length&amp;&amp;q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&amp;&amp;X.test(k)&amp;&amp;o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&amp;&amp;typeof (r=k.length)==&quot;number&quot;)for(i=0;i&lt;r;i++)bk(k[i]);else bk(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||bc.test(a.type)};for(j=0;h[j];j++)if(e&amp;&amp;f.nodeName(h[j],&quot;script&quot;)&amp;&amp;(!h[j].type||h[j].type.toLowerCase()===&quot;text/javascript&quot;))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName(&quot;script&quot;),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.expando,g=f.event.special,h=f.support.deleteExpando;for(var i=0,j;(j=a[i])!=null;i++){if(j.nodeName&amp;&amp;f.noData[j.nodeName.toLowerCase()])continue;c=j[f.expando];if(c){b=d[c]&amp;&amp;d[c][e];if(b&amp;&amp;b.events){for(var k in b.events)g[k]?f.event.remove(j,k):f.removeEvent(j,k,b.handle);b.handle&amp;&amp;(b.handle.elem=null)}h?delete j[f.expando]:j.removeAttribute&amp;&amp;j.removeAttribute(f.expando),delete d[c]}}}});var bm=/alpha\([^)]*\)/i,bn=/opacity=([^)]*)/,bo=/([A-Z]|^ms)/g,bp=/^-?\d+(?:px)?$/i,bq=/^-?\d/,br=/^([\-+])=([\-+.\de]+)/,bs={position:&quot;absolute&quot;,visibility:&quot;hidden&quot;,display:&quot;block&quot;},bt=[&quot;Left&quot;,&quot;Right&quot;],bu=[&quot;Top&quot;,&quot;Bottom&quot;],bv,bw,bx;f.fn.css=function(a,c){if(arguments.length===2&amp;&amp;c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bv(a,&quot;opacity&quot;,&quot;opacity&quot;);return c===&quot;&quot;?&quot;1&quot;:c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{&quot;float&quot;:f.support.cssFloat?&quot;cssFloat&quot;:&quot;styleFloat&quot;},style:function(a,c,d,e){if(!!a&amp;&amp;a.nodeType!==3&amp;&amp;a.nodeType!==8&amp;&amp;!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&amp;&amp;&quot;get&quot;in k&amp;&amp;(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h===&quot;string&quot;&amp;&amp;(g=br.exec(d))&amp;&amp;(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h=&quot;number&quot;);if(d==null||h===&quot;number&quot;&amp;&amp;isNaN(d))return;h===&quot;number&quot;&amp;&amp;!f.cssNumber[i]&amp;&amp;(d+=&quot;px&quot;);if(!k||!(&quot;set&quot;in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c===&quot;cssFloat&quot;&amp;&amp;(c=&quot;float&quot;);if(g&amp;&amp;&quot;get&quot;in g&amp;&amp;(e=g.get(a,!0,d))!==b)return e;if(bv)return bv(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each([&quot;height&quot;,&quot;width&quot;],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return by(a,b,d);f.swap(a,bs,function(){e=by(a,b,d)});return e}},set:function(a,b){if(!bp.test(b))return b;b=parseFloat(b);if(b&gt;=0)return b+&quot;px&quot;}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bn.test((b&amp;&amp;a.currentStyle?a.currentStyle.filter:a.style.filter)||&quot;&quot;)?parseFloat(RegExp.$1)/100+&quot;&quot;:b?&quot;1&quot;:&quot;&quot;},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNaN(b)?&quot;&quot;:&quot;alpha(opacity=&quot;+b*100+&quot;)&quot;,g=d&amp;&amp;d.filter||c.filter||&quot;&quot;;c.zoom=1;if(b&gt;=1&amp;&amp;f.trim(g.replace(bm,&quot;&quot;))===&quot;&quot;){c.removeAttribute(&quot;filter&quot;);if(d&amp;&amp;!d.filter)return}c.filter=bm.test(g)?g.replace(bm,e):g+&quot; &quot;+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:&quot;inline-block&quot;},function(){b?c=bv(a,&quot;margin-right&quot;,&quot;marginRight&quot;):c=a.style.marginRight});return c}})}),c.defaultView&amp;&amp;c.defaultView.getComputedStyle&amp;&amp;(bw=function(a,c){var d,e,g;c=c.replace(bo,&quot;-$1&quot;).toLowerCase();if(!(e=a.ownerDocument.defaultView))return b;if(g=e.getComputedStyle(a,null))d=g.getPropertyValue(c),d===&quot;&quot;&amp;&amp;!f.contains(a.ownerDocument.documentElement,a)&amp;&amp;(d=f.style(a,c));return d}),c.documentElement.currentStyle&amp;&amp;(bx=function(a,b){var c,d=a.currentStyle&amp;&amp;a.currentStyle[b],e=a.runtimeStyle&amp;&amp;a.runtimeStyle[b],f=a.style;!bp.test(d)&amp;&amp;bq.test(d)&amp;&amp;(c=f.left,e&amp;&amp;(a.runtimeStyle.left=a.currentStyle.left),f.left=b===&quot;fontSize&quot;?&quot;1em&quot;:d||0,d=f.pixelLeft+&quot;px&quot;,f.left=c,e&amp;&amp;(a.runtimeStyle.left=e));return d===&quot;&quot;?&quot;auto&quot;:d}),bv=bw||bx,f.expr&amp;&amp;f.expr.filters&amp;&amp;(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&amp;&amp;c===0||!f.support.reliableHiddenOffsets&amp;&amp;(a.style.display||f.css(a,&quot;display&quot;))===&quot;none&quot;},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bz=/%20/g,bA=/\[\]$/,bB=/\r?\n/g,bC=/#.*$/,bD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bE=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bF=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bG=/^(?:GET|HEAD)$/,bH=/^\/\//,bI=/\?/,bJ=/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi,bK=/^(?:select|textarea)/i,bL=/\s+/,bM=/([?&amp;])_=[^&amp;]*/,bN=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bO=f.fn.load,bP={},bQ={},bR,bS,bT=[&quot;*/&quot;]+[&quot;*&quot;];try{bR=e.href}catch(bU){bR=c.createElement(&quot;a&quot;),bR.href=&quot;&quot;,bR=bR.href}bS=bN.exec(bR.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!=&quot;string&quot;&amp;&amp;bO)return bO.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(&quot; &quot;);if(e&gt;=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h=&quot;GET&quot;;c&amp;&amp;(f.isFunction(c)?(d=c,c=b):typeof c==&quot;object&quot;&amp;&amp;(c=f.param(c,f.ajaxSettings.traditional),h=&quot;POST&quot;));var i=this;f.ajax({url:a,type:h,dataType:&quot;html&quot;,data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&amp;&amp;(a.done(function(a){c=a}),i.html(g?f(&quot;&lt;div&gt;&quot;).append(c.replace(bJ,&quot;&quot;)).find(g):c)),d&amp;&amp;i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&amp;&amp;!this.disabled&amp;&amp;(this.checked||bK.test(this.nodeName)||bE.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bB,&quot;\r\n&quot;)}}):{name:b.name,value:c.replace(bB,&quot;\r\n&quot;)}}).get()}}),f.each(&quot;ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend&quot;.split(&quot; &quot;),function(a,b){f.fn[b]=function(a){return this.bind(b,a)}}),f.each([&quot;get&quot;,&quot;post&quot;],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&amp;&amp;(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,&quot;script&quot;)},getJSON:function(a,b,c){return f.get(a,b,c,&quot;json&quot;)},ajaxSetup:function(a,b){b?bX(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),bX(a,b);return a},ajaxSettings:{url:bR,isLocal:bF.test(bS[1]),global:!0,type:&quot;GET&quot;,contentType:&quot;application/x-www-form-urlencoded&quot;,processData:!0,async:!0,accepts:{xml:&quot;application/xml, text/xml&quot;,html:&quot;text/html&quot;,text:&quot;text/plain&quot;,json:&quot;application/json, text/javascript&quot;,&quot;*&quot;:bT},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:&quot;responseXML&quot;,text:&quot;responseText&quot;},converters:{&quot;* text&quot;:a.String,&quot;text html&quot;:!0,&quot;text json&quot;:f.parseJSON,&quot;text xml&quot;:f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bV(bP),ajaxTransport:bV(bQ),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&amp;&amp;clearTimeout(q),p=b,n=m||&quot;&quot;,v.readyState=a&gt;0?4:0;var o,r,u,w=c,x=l?bZ(d,v,l):b,y,z;if(a&gt;=200&amp;&amp;a&lt;300||a===304){if(d.ifModified){if(y=v.getResponseHeader(&quot;Last-Modified&quot;))f.lastModified[k]=y;if(z=v.getResponseHeader(&quot;Etag&quot;))f.etag[k]=z}if(a===304)w=&quot;notmodified&quot;,o=!0;else try{r=b$(d,x),w=&quot;success&quot;,o=!0}catch(A){w=&quot;parsererror&quot;,u=A}}else{u=w;if(!w||a)w=&quot;error&quot;,a&lt;0&amp;&amp;(a=0)}v.status=a,v.statusText=&quot;&quot;+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&amp;&amp;g.trigger(&quot;ajax&quot;+(o?&quot;Success&quot;:&quot;Error&quot;),[v,d,o?r:u]),i.resolveWith(e,[v,w]),t&amp;&amp;(g.trigger(&quot;ajaxComplete&quot;,[v,d]),--f.active||f.event.trigger(&quot;ajaxStop&quot;))}}typeof a==&quot;object&quot;&amp;&amp;(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&amp;&amp;(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f._Deferred(),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bD.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||&quot;abort&quot;,p&amp;&amp;p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.done,v.statusCode=function(a){if(a){var b;if(s&lt;2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+&quot;&quot;).replace(bC,&quot;&quot;).replace(bH,bS[1]+&quot;//&quot;),d.dataTypes=f.trim(d.dataType||&quot;*&quot;).toLowerCase().split(bL),d.crossDomain==null&amp;&amp;(r=bN.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bS[1]&amp;&amp;r[2]==bS[2]&amp;&amp;(r[3]||(r[1]===&quot;http:&quot;?80:443))==(bS[3]||(bS[1]===&quot;http:&quot;?80:443)))),d.data&amp;&amp;d.processData&amp;&amp;typeof d.data!=&quot;string&quot;&amp;&amp;(d.data=f.param(d.data,d.traditional)),bW(bP,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bG.test(d.type),t&amp;&amp;f.active++===0&amp;&amp;f.event.trigger(&quot;ajaxStart&quot;);if(!d.hasContent){d.data&amp;&amp;(d.url+=(bI.test(d.url)?&quot;&amp;&quot;:&quot;?&quot;)+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bM,&quot;$1_=&quot;+x);d.url=y+(y===d.url?(bI.test(d.url)?&quot;&amp;&quot;:&quot;?&quot;)+&quot;_=&quot;+x:&quot;&quot;)}}(d.data&amp;&amp;d.hasContent&amp;&amp;d.contentType!==!1||c.contentType)&amp;&amp;v.setRequestHeader(&quot;Content-Type&quot;,d.contentType),d.ifModified&amp;&amp;(k=k||d.url,f.lastModified[k]&amp;&amp;v.setRequestHeader(&quot;If-Modified-Since&quot;,f.lastModified[k]),f.etag[k]&amp;&amp;v.setRequestHeader(&quot;If-None-Match&quot;,f.etag[k])),v.setRequestHeader(&quot;Accept&quot;,d.dataTypes[0]&amp;&amp;d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!==&quot;*&quot;?&quot;, &quot;+bT+&quot;; q=0.01&quot;:&quot;&quot;):d.accepts[&quot;*&quot;]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&amp;&amp;(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bW(bQ,d,c,v);if(!p)w(-1,&quot;No Transport&quot;);else{v.readyState=1,t&amp;&amp;g.trigger(&quot;ajaxSend&quot;,[v,d]),d.async&amp;&amp;d.timeout&gt;0&amp;&amp;(q=setTimeout(function(){v.abort(&quot;timeout&quot;)},d.timeout));try{s=1,p.send(l,w)}catch(z){s&lt;2?w(-1,z):f.error(z)}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+&quot;=&quot;+encodeURIComponent(b)};c===b&amp;&amp;(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&amp;&amp;!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)bY(g,a[g],c,e);return d.join(&quot;&amp;&quot;).replace(bz,&quot;+&quot;)}}),f.extend({active:0,lastModified:{},etag:{}});var b_=f.now(),ca=/(\=)\?(&amp;|$)|\?\?/i;f.ajaxSetup({jsonp:&quot;callback&quot;,jsonpCallback:function(){return f.expando+&quot;_&quot;+b_++}}),f.ajaxPrefilter(&quot;json jsonp&quot;,function(b,c,d){var e=b.contentType===&quot;application/x-www-form-urlencoded&quot;&amp;&amp;typeof b.data==&quot;string&quot;;if(b.dataTypes[0]===&quot;jsonp&quot;||b.jsonp!==!1&amp;&amp;(ca.test(b.url)||e&amp;&amp;ca.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l=&quot;$1&quot;+h+&quot;$2&quot;;b.jsonp!==!1&amp;&amp;(j=j.replace(ca,l),b.url===j&amp;&amp;(e&amp;&amp;(k=k.replace(ca,l)),b.data===k&amp;&amp;(j+=(/\?/.test(j)?&quot;&amp;&quot;:&quot;?&quot;)+b.jsonp+&quot;=&quot;+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&amp;&amp;f.isFunction(i)&amp;&amp;a[h](g[0])}),b.converters[&quot;script json&quot;]=function(){g||f.error(h+&quot; was not called&quot;);return g[0]},b.dataTypes[0]=&quot;json&quot;;return&quot;script&quot;}}),f.ajaxSetup({accepts:{script:&quot;text/javascript, application/javascript, application/ecmascript, application/x-ecmascript&quot;},contents:{script:/javascript|ecmascript/},converters:{&quot;text script&quot;:function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter(&quot;script&quot;,function(a){a.cache===b&amp;&amp;(a.cache=!1),a.crossDomain&amp;&amp;(a.type=&quot;GET&quot;,a.global=!1)}),f.ajaxTransport(&quot;script&quot;,function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName(&quot;head&quot;)[0]||c.documentElement;return{send:function(f,g){d=c.createElement(&quot;script&quot;),d.async=&quot;async&quot;,a.scriptCharset&amp;&amp;(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&amp;&amp;d.parentNode&amp;&amp;e.removeChild(d),d=b,c||g(200,&quot;success&quot;)},e.insertBefore(d,e.firstChild)},abort:function(){d&amp;&amp;d.onload(0,1)}}}});var cb=a.ActiveXObject?function(){for(var a in cd)cd[a](0,1)}:!1,cc=0,cd;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&amp;&amp;ce()||cf()}:ce,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&amp;&amp;&quot;withCredentials&quot;in a})}(f.ajaxSettings.xhr()),f.support.ajax&amp;&amp;f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&amp;&amp;h.overrideMimeType&amp;&amp;h.overrideMimeType(c.mimeType),!c.crossDomain&amp;&amp;!e[&quot;X-Requested-With&quot;]&amp;&amp;(e[&quot;X-Requested-With&quot;]=&quot;XMLHttpRequest&quot;);try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&amp;&amp;c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&amp;&amp;(e||h.readyState===4)){d=b,i&amp;&amp;(h.onreadystatechange=f.noop,cb&amp;&amp;delete cd[i]);if(e)h.readyState!==4&amp;&amp;h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&amp;&amp;n.documentElement&amp;&amp;(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=&quot;&quot;}!j&amp;&amp;c.isLocal&amp;&amp;!c.crossDomain?j=m.text?200:404:j===1223&amp;&amp;(j=204)}}}catch(p){e||g(-1,p)}m&amp;&amp;g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cc,cb&amp;&amp;(cd||(cd={},f(a).unload(cb)),cd[i]=d),h.onreadystatechange=d)},abort:function(){d&amp;&amp;d(0,1)}}}});var cg={},ch,ci,cj=/^(?:toggle|show|hide)$/,ck=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cl,cm=[[&quot;height&quot;,&quot;marginTop&quot;,&quot;marginBottom&quot;,&quot;paddingTop&quot;,&quot;paddingBottom&quot;],[&quot;width&quot;,&quot;marginLeft&quot;,&quot;marginRight&quot;,&quot;paddingLeft&quot;,&quot;paddingRight&quot;],[&quot;opacity&quot;]],cn;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cq(&quot;show&quot;,3),a,b,c);for(var g=0,h=this.length;g&lt;h;g++)d=this[g],d.style&amp;&amp;(e=d.style.display,!f._data(d,&quot;olddisplay&quot;)&amp;&amp;e===&quot;none&quot;&amp;&amp;(e=d.style.display=&quot;&quot;),e===&quot;&quot;&amp;&amp;f.css(d,&quot;display&quot;)===&quot;none&quot;&amp;&amp;f._data(d,&quot;olddisplay&quot;,cr(d.nodeName)));for(g=0;g&lt;h;g++){d=this[g];if(d.style){e=d.style.display;if(e===&quot;&quot;||e===&quot;none&quot;)d.style.display=f._data(d,&quot;olddisplay&quot;)||&quot;&quot;}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cq(&quot;hide&quot;,3),a,b,c);for(var d=0,e=this.length;d&lt;e;d++)if(this[d].style){var g=f.css(this[d],&quot;display&quot;);g!==&quot;none&quot;&amp;&amp;!f._data(this[d],&quot;olddisplay&quot;)&amp;&amp;f._data(this[d],&quot;olddisplay&quot;,g)}for(d=0;d&lt;e;d++)this[d].style&amp;&amp;(this[d].style.display=&quot;none&quot;);return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a==&quot;boolean&quot;;f.isFunction(a)&amp;&amp;f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(&quot;:hidden&quot;);f(this)[b?&quot;show&quot;:&quot;hide&quot;]()}):this.animate(cq(&quot;toggle&quot;,3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(&quot;:hidden&quot;).css(&quot;opacity&quot;,0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return this[e.queue===!1?&quot;each&quot;:&quot;queue&quot;](function(){e.queue===!1&amp;&amp;f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&amp;&amp;f(this).is(&quot;:hidden&quot;),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&amp;&amp;(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&amp;&amp;b.specialEasing[g]||b.easing||&quot;swing&quot;;if(h===&quot;hide&quot;&amp;&amp;d||h===&quot;show&quot;&amp;&amp;!d)return b.complete.call(this);c&amp;&amp;(g===&quot;height&quot;||g===&quot;width&quot;)&amp;&amp;(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,&quot;display&quot;)===&quot;inline&quot;&amp;&amp;f.css(this,&quot;float&quot;)===&quot;none&quot;&amp;&amp;(f.support.inlineBlockNeedsLayout?(j=cr(this.nodeName),j===&quot;inline&quot;?this.style.display=&quot;inline-block&quot;:(this.style.display=&quot;inline&quot;,this.style.zoom=1)):this.style.display=&quot;inline-block&quot;))}b.overflow!=null&amp;&amp;(this.style.overflow=&quot;hidden&quot;);for(i in a)k=new f.fx(this,b,i),h=a[i],cj.test(h)?k[h===&quot;toggle&quot;?d?&quot;show&quot;:&quot;hide&quot;:h]():(l=ck.exec(h),m=k.cur(),l?(n=parseFloat(l[2]),o=l[3]||(f.cssNumber[i]?&quot;&quot;:&quot;px&quot;),o!==&quot;px&quot;&amp;&amp;(f.style(this,i,(n||1)+o),m=(n||1)/k.cur()*m,f.style(this,i,m+o)),l[1]&amp;&amp;(n=(l[1]===&quot;-=&quot;?-1:1)*n+m),k.custom(m,n,o)):k.custom(m,h,&quot;&quot;));return!0})},stop:function(a,b){a&amp;&amp;this.queue([]),this.each(function(){var a=f.timers,c=a.length;b||f._unmark(!0,this);while(c--)a[c].elem===this&amp;&amp;(b&amp;&amp;a[c](!0),a.splice(c,1))}),b||this.dequeue();return this}}),f.each({slideDown:cq(&quot;show&quot;,1),slideUp:cq(&quot;hide&quot;,1),slideToggle:cq(&quot;toggle&quot;,1),fadeIn:{opacity:&quot;show&quot;},fadeOut:{opacity:&quot;hide&quot;},fadeToggle:{opacity:&quot;toggle&quot;}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&amp;&amp;typeof a==&quot;object&quot;?f.extend({},a):{complete:c||!c&amp;&amp;b||f.isFunction(a)&amp;&amp;a,duration:a,easing:c&amp;&amp;b||b&amp;&amp;!f.isFunction(b)&amp;&amp;b};d.duration=f.fx.off?0:typeof d.duration==&quot;number&quot;?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&amp;&amp;d.old.call(this),d.queue!==!1?f.dequeue(this):a!==!1&amp;&amp;f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&amp;&amp;this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&amp;&amp;(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b===&quot;auto&quot;?0:b:a},custom:function(a,b,c){function g(a){return d.step(a)}var d=this,e=f.fx;this.startTime=cn||co(),this.start=a,this.end=b,this.unit=c||this.unit||(f.cssNumber[this.prop]?&quot;&quot;:&quot;px&quot;),this.now=this.start,this.pos=this.state=0,g.elem=this.elem,g()&amp;&amp;f.timers.push(g)&amp;&amp;!cl&amp;&amp;(cl=setInterval(e.tick,e.interval))},show:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop===&quot;width&quot;||this.prop===&quot;height&quot;?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=cn||co(),c=!0,d=this.elem,e=this.options,g,h;if(a||b&gt;=e.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),e.animatedProperties[this.prop]=!0;for(g in e.animatedProperties)e.animatedProperties[g]!==!0&amp;&amp;(c=!1);if(c){e.overflow!=null&amp;&amp;!f.support.shrinkWrapBlocks&amp;&amp;f.each([&quot;&quot;,&quot;X&quot;,&quot;Y&quot;],function(a,b){d.style[&quot;overflow&quot;+b]=e.overflow[a]}),e.hide&amp;&amp;f(d).hide();if(e.hide||e.show)for(var i in e.animatedProperties)f.style(d,i,e.orig[i]);e.complete.call(d)}return!1}e.duration==Infinity?this.now=b:(h=b-this.startTime,this.state=h/e.duration,this.pos=f.easing[e.animatedProperties[this.prop]](this.state,h,0,1,e.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){for(var a=f.timers,b=0;b&lt;a.length;++b)a[b]()||a.splice(b--,1);a.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cl),cl=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,&quot;opacity&quot;,a.now)},_default:function(a){a.elem.style&amp;&amp;a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop===&quot;width&quot;||a.prop===&quot;height&quot;?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),f.expr&amp;&amp;f.expr.filters&amp;&amp;(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cs=/^t(?:able|d|h)$/i,ct=/^(?:body|html)$/i;&quot;getBoundingClientRect&quot;in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cu(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&amp;&amp;g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&amp;&amp;g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);f.offset.initialize();var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&amp;&amp;b!==i&amp;&amp;b!==h){if(f.offset.supportsFixedPosition&amp;&amp;k.position===&quot;fixed&quot;)break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&amp;&amp;(l+=b.offsetTop,m+=b.offsetLeft,f.offset.doesNotAddBorder&amp;&amp;(!f.offset.doesAddBorderForTableAndCells||!cs.test(b.nodeName))&amp;&amp;(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.offset.subtractsBorderForOverflowNotVisible&amp;&amp;c.overflow!==&quot;visible&quot;&amp;&amp;(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position===&quot;relative&quot;||k.position===&quot;static&quot;)l+=i.offsetTop,m+=i.offsetLeft;f.offset.supportsFixedPosition&amp;&amp;k.position===&quot;fixed&quot;&amp;&amp;(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={initialize:function(){var a=c.body,b=c.createElement(&quot;div&quot;),d,e,g,h,i=parseFloat(f.css(a,&quot;marginTop&quot;))||0,j=&quot;&lt;div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;f.extend(b.style,{position:&quot;absolute&quot;,top:0,left:0,margin:0,border:0,width:&quot;1px&quot;,height:&quot;1px&quot;,visibility:&quot;hidden&quot;}),b.innerHTML=j,a.insertBefore(b,a.firstChild),d=b.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,this.doesNotAddBorder=e.offsetTop!==5,this.doesAddBorderForTableAndCells=h.offsetTop===5,e.style.position=&quot;fixed&quot;,e.style.top=&quot;20px&quot;,this.supportsFixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top=&quot;&quot;,d.style.overflow=&quot;hidden&quot;,d.style.position=&quot;relative&quot;,this.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==i,a.removeChild(b),f.offset.initialize=f.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.offset.initialize(),f.offset.doesNotIncludeMarginInBodyOffset&amp;&amp;(b+=parseFloat(f.css(a,&quot;marginTop&quot;))||0,c+=parseFloat(f.css(a,&quot;marginLeft&quot;))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,&quot;position&quot;);d===&quot;static&quot;&amp;&amp;(a.style.position=&quot;relative&quot;);var e=f(a),g=e.offset(),h=f.css(a,&quot;top&quot;),i=f.css(a,&quot;left&quot;),j=(d===&quot;absolute&quot;||d===&quot;fixed&quot;)&amp;&amp;f.inArray(&quot;auto&quot;,[h,i])&gt;-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&amp;&amp;(b=b.call(a,c,g)),b.top!=null&amp;&amp;(k.top=b.top-g.top+m),b.left!=null&amp;&amp;(k.left=b.left-g.left+n),&quot;using&quot;in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=ct.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,&quot;marginTop&quot;))||0,c.left-=parseFloat(f.css(a,&quot;marginLeft&quot;))||0,d.top+=parseFloat(f.css(b[0],&quot;borderTopWidth&quot;))||0,d.left+=parseFloat(f.css(b[0],&quot;borderLeftWidth&quot;))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&amp;&amp;!ct.test(a.nodeName)&amp;&amp;f.css(a,&quot;position&quot;)===&quot;static&quot;)a=a.offsetParent;return a})}}),f.each([&quot;Left&quot;,&quot;Top&quot;],function(a,c){var d=&quot;scroll&quot;+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cu(e);return g?&quot;pageXOffset&quot;in g?g[a?&quot;pageYOffset&quot;:&quot;pageXOffset&quot;]:f.support.boxModel&amp;&amp;g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cu(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each([&quot;Height&quot;,&quot;Width&quot;],function(a,c){var d=c.toLowerCase();f.fn[&quot;inner&quot;+c]=function(){var a=this[0];return a&amp;&amp;a.style?parseFloat(f.css(a,d,&quot;padding&quot;)):null},f.fn[&quot;outer&quot;+c]=function(a){var b=this[0];return b&amp;&amp;b.style?parseFloat(f.css(b,d,a?&quot;margin&quot;:&quot;border&quot;)):null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement[&quot;client&quot;+c],h=e.document.body;return e.document.compatMode===&quot;CSS1Compat&quot;&amp;&amp;g||h&amp;&amp;h[&quot;client&quot;+c]||g}if(e.nodeType===9)return Math.max(e.documentElement[&quot;client&quot;+c],e.body[&quot;scroll&quot;+c],e.documentElement[&quot;scroll&quot;+c],e.body[&quot;offset&quot;+c],e.documentElement[&quot;offset&quot;+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNaN(j)?i:j}return this.css(d,typeof a==&quot;string&quot;?a:a+&quot;px&quot;)}}),a.jQuery=a.$=f})(window);</span>
<a href="#l55.9"></a><span id="l55.9">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mail/test/mozmill/account/test-mail-account-setup-wizard.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-mail-account-setup-wizard.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -79,17 +79,17 @@ function test_mail_account_setup() {</span>
<a href="#l56.4"></a><span id="l56.4">   // Force .com MIME-Type to text/xml</span>
<a href="#l56.5"></a><span id="l56.5">   collector.httpd.registerContentType(&quot;com&quot;, &quot;text/xml&quot;);</span>
<a href="#l56.6"></a><span id="l56.6"> </span>
<a href="#l56.7"></a><span id="l56.7">   open_mail_account_setup_wizard(function (awc) {</span>
<a href="#l56.8"></a><span id="l56.8">     // Input user's account information</span>
<a href="#l56.9"></a><span id="l56.9">     awc.e(&quot;realname&quot;).focus();</span>
<a href="#l56.10"></a><span id="l56.10">     if (!awc.e(&quot;realname&quot;).value) {</span>
<a href="#l56.11"></a><span id="l56.11">        // Realname is likely already filled, if not, fill it now.</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-      input_value(awc, user.name); </span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+      input_value(awc, user.name);</span>
<a href="#l56.14"></a><span id="l56.14">     }</span>
<a href="#l56.15"></a><span id="l56.15">     awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l56.16"></a><span id="l56.16">     input_value(awc, user.email);</span>
<a href="#l56.17"></a><span id="l56.17">     awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l56.18"></a><span id="l56.18">     input_value(awc, user.password);</span>
<a href="#l56.19"></a><span id="l56.19"> </span>
<a href="#l56.20"></a><span id="l56.20">     // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l56.21"></a><span id="l56.21">     awc.e(&quot;next_button&quot;).click();</span>
<a href="#l56.22"></a><span id="l56.22" class="difflineat">@@ -166,17 +166,17 @@ function test_bad_password_uses_old_sett</span>
<a href="#l56.23"></a><span id="l56.23"> </span>
<a href="#l56.24"></a><span id="l56.24">   mc.sleep(0);</span>
<a href="#l56.25"></a><span id="l56.25">   open_mail_account_setup_wizard(function (awc) {</span>
<a href="#l56.26"></a><span id="l56.26">     try {</span>
<a href="#l56.27"></a><span id="l56.27">       // Input user's account information</span>
<a href="#l56.28"></a><span id="l56.28">       awc.e(&quot;realname&quot;).focus();</span>
<a href="#l56.29"></a><span id="l56.29">       if (!awc.e(&quot;realname&quot;).value) {</span>
<a href="#l56.30"></a><span id="l56.30">          // Realname is likely already filled, if not, fill it now.</span>
<a href="#l56.31"></a><span id="l56.31" class="difflineminus">-        input_value(awc, user.name); </span>
<a href="#l56.32"></a><span id="l56.32" class="difflineplus">+        input_value(awc, user.name);</span>
<a href="#l56.33"></a><span id="l56.33">       }</span>
<a href="#l56.34"></a><span id="l56.34">       awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l56.35"></a><span id="l56.35">       input_value(awc, user.email);</span>
<a href="#l56.36"></a><span id="l56.36">       awc.keypress(null, &quot;VK_TAB&quot;, {});</span>
<a href="#l56.37"></a><span id="l56.37">       input_value(awc, user.password);</span>
<a href="#l56.38"></a><span id="l56.38"> </span>
<a href="#l56.39"></a><span id="l56.39">       // Load the autoconfig file from http://localhost:433**/autoconfig/example.com</span>
<a href="#l56.40"></a><span id="l56.40">       awc.e(&quot;next_button&quot;).click();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mail/test/mozmill/cloudfile/test-cloudfile-add-account-dialog.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -60,17 +60,17 @@ function teardownModule(module) {</span>
<a href="#l57.4"></a><span id="l57.4"> </span>
<a href="#l57.5"></a><span id="l57.5"> /**</span>
<a href="#l57.6"></a><span id="l57.6">  * Helper function that ensures that we know the number of registered</span>
<a href="#l57.7"></a><span id="l57.7">  * Filelink service providers.</span>
<a href="#l57.8"></a><span id="l57.8">  *</span>
<a href="#l57.9"></a><span id="l57.9">  * @param aNum the number of expected registered Filelink service providers.</span>
<a href="#l57.10"></a><span id="l57.10">  */</span>
<a href="#l57.11"></a><span id="l57.11"> function assert_num_providers(aNum) {</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-  let providers = [provider for each </span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+  let providers = [provider for each</span>
<a href="#l57.14"></a><span id="l57.14">                    (provider in cloudFileAccounts.enumerateProviders())];</span>
<a href="#l57.15"></a><span id="l57.15">   assert_equals(aNum, providers.length,</span>
<a href="#l57.16"></a><span id="l57.16">                 'Expected ' + aNum + ' providers to be available, but ' +</span>
<a href="#l57.17"></a><span id="l57.17">                 'found ' + providers.length + ' instead.');</span>
<a href="#l57.18"></a><span id="l57.18"> }</span>
<a href="#l57.19"></a><span id="l57.19"> </span>
<a href="#l57.20"></a><span id="l57.20"> /**</span>
<a href="#l57.21"></a><span id="l57.21">  * Helper function that takes a controller for an 'Add an Account' dialog, and</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mail/test/mozmill/cloudfile/test-cloudfile-notifications.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -8,17 +8,17 @@</span>
<a href="#l58.4"></a><span id="l58.4"> </span>
<a href="#l58.5"></a><span id="l58.5"> let MODULE_NAME = 'test-cloudfile-notifications';</span>
<a href="#l58.6"></a><span id="l58.6"> </span>
<a href="#l58.7"></a><span id="l58.7"> let RELATIVE_ROOT = '../shared-modules';</span>
<a href="#l58.8"></a><span id="l58.8"> let MODULE_REQUIRES = ['folder-display-helpers',</span>
<a href="#l58.9"></a><span id="l58.9">                        'compose-helpers',</span>
<a href="#l58.10"></a><span id="l58.10">                        'cloudfile-helpers',</span>
<a href="#l58.11"></a><span id="l58.11">                        'attachment-helpers',</span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-                       'prompt-helpers', </span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+                       'prompt-helpers',</span>
<a href="#l58.14"></a><span id="l58.14">                        'notificationbox-helpers'];</span>
<a href="#l58.15"></a><span id="l58.15"> </span>
<a href="#l58.16"></a><span id="l58.16"> let controller = {};</span>
<a href="#l58.17"></a><span id="l58.17"> let mozmill = {};</span>
<a href="#l58.18"></a><span id="l58.18"> let elib = {};</span>
<a href="#l58.19"></a><span id="l58.19"> Cu.import('resource://mozmill/modules/controller.js', controller);</span>
<a href="#l58.20"></a><span id="l58.20"> Cu.import('resource://mozmill/modules/mozmill.js', mozmill);</span>
<a href="#l58.21"></a><span id="l58.21"> Cu.import('resource://mozmill/modules/elementslib.js', elib);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-forwarded-eml-actions.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-forwarded-eml-actions.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l59.4"></a><span id="l59.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l59.5"></a><span id="l59.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l59.6"></a><span id="l59.6">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l59.7"></a><span id="l59.7"> </span>
<a href="#l59.8"></a><span id="l59.8"> /**</span>
<a href="#l59.9"></a><span id="l59.9" class="difflineminus">- * Tests that actions such as replying and forwarding works correctly from </span>
<a href="#l59.10"></a><span id="l59.10" class="difflineplus">+ * Tests that actions such as replying and forwarding works correctly from</span>
<a href="#l59.11"></a><span id="l59.11">  * an .eml message that's attached to another mail.</span>
<a href="#l59.12"></a><span id="l59.12">  */</span>
<a href="#l59.13"></a><span id="l59.13"> </span>
<a href="#l59.14"></a><span id="l59.14"> // make SOLO_TEST=composition/test-forwarded-eml-actions.js mozmill-one</span>
<a href="#l59.15"></a><span id="l59.15"> </span>
<a href="#l59.16"></a><span id="l59.16"> const MODULE_NAME = &quot;test-forwarded-eml-actions&quot;;</span>
<a href="#l59.17"></a><span id="l59.17"> </span>
<a href="#l59.18"></a><span id="l59.18"> const RELATIVE_ROOT = &quot;../shared-modules&quot;;</span>
<a href="#l59.19"></a><span id="l59.19" class="difflineat">@@ -27,17 +27,17 @@ var msgbodyB = &quot;hi, i think you may know</span>
<a href="#l59.20"></a><span id="l59.20"> </span>
<a href="#l59.21"></a><span id="l59.21"> var setupModule = function(module) {</span>
<a href="#l59.22"></a><span id="l59.22">   collector.getModule(&quot;folder-display-helpers&quot;).installInto(module);</span>
<a href="#l59.23"></a><span id="l59.23">   collector.getModule(&quot;window-helpers&quot;).installInto(module);</span>
<a href="#l59.24"></a><span id="l59.24">   collector.getModule(&quot;compose-helpers&quot;).installInto(module);</span>
<a href="#l59.25"></a><span id="l59.25"> </span>
<a href="#l59.26"></a><span id="l59.26">   folder = create_folder(&quot;FwdedEmlTest&quot;);</span>
<a href="#l59.27"></a><span id="l59.27"> </span>
<a href="#l59.28"></a><span id="l59.28" class="difflineminus">-  let source = </span>
<a href="#l59.29"></a><span id="l59.29" class="difflineplus">+  let source =</span>
<a href="#l59.30"></a><span id="l59.30">     &quot;From - Mon Apr  16 22:55:33 2012\n&quot; +</span>
<a href="#l59.31"></a><span id="l59.31">     &quot;Date: Mon, 16 Apr 2012 22:55:33 +0300\n&quot; +</span>
<a href="#l59.32"></a><span id="l59.32">     &quot;From: Mr Example &lt;example@invalid&gt;\n&quot; +</span>
<a href="#l59.33"></a><span id="l59.33">     &quot;User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:14.0) Gecko/20120331 Thunderbird/14.0a1\n&quot; +</span>
<a href="#l59.34"></a><span id="l59.34">     &quot;MIME-Version: 1.0\n&quot; +</span>
<a href="#l59.35"></a><span id="l59.35">     &quot;To: example@invalid\n&quot; +</span>
<a href="#l59.36"></a><span id="l59.36">     &quot;Subject: Fwd: &quot; + msgsubject + &quot;\n&quot; +</span>
<a href="#l59.37"></a><span id="l59.37">     &quot;References: &lt;4F8C78F5.4000704@invalid&gt;\n&quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-newmsg-compose-identity.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-newmsg-compose-identity.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -69,17 +69,17 @@ function test_compose_from_composer() {</span>
<a href="#l60.4"></a><span id="l60.4">   checkCompIdentity(newCompWin, account.defaultIdentity.email);</span>
<a href="#l60.5"></a><span id="l60.5">   close_compose_window(newCompWin);</span>
<a href="#l60.6"></a><span id="l60.6"> </span>
<a href="#l60.7"></a><span id="l60.7">   // Switch to identity2 in the main compose window, new compose windows</span>
<a href="#l60.8"></a><span id="l60.8">   // starting from here should use the same identiy as it's &quot;parent&quot;.</span>
<a href="#l60.9"></a><span id="l60.9">   let identityList = mainCompWin.e(&quot;msgIdentity&quot;);</span>
<a href="#l60.10"></a><span id="l60.10">   identityList.selectedIndex++;</span>
<a href="#l60.11"></a><span id="l60.11">   checkCompIdentity(mainCompWin, identity2Email);</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-  </span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+</span>
<a href="#l60.14"></a><span id="l60.14">   // Compose a second new message from the compose window.</span>
<a href="#l60.15"></a><span id="l60.15">   plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l60.16"></a><span id="l60.16">   mainCompWin.keypress(null, &quot;n&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l60.17"></a><span id="l60.17">   let newCompWin2 = wait_for_compose_window();</span>
<a href="#l60.18"></a><span id="l60.18">   checkCompIdentity(newCompWin2, identity2Email);</span>
<a href="#l60.19"></a><span id="l60.19">   close_compose_window(newCompWin2);</span>
<a href="#l60.20"></a><span id="l60.20"> </span>
<a href="#l60.21"></a><span id="l60.21">   close_compose_window(mainCompWin);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-reply-addresses.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-reply-addresses.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -837,17 +837,17 @@ function testReplyToOtherIdentity() {</span>
<a href="#l61.4"></a><span id="l61.4">   let msg = select_click_row(i++);</span>
<a href="#l61.5"></a><span id="l61.5">   assert_selected_and_displayed(mc, msg);</span>
<a href="#l61.6"></a><span id="l61.6"> </span>
<a href="#l61.7"></a><span id="l61.7">   ensureNoAutoCc(identity);</span>
<a href="#l61.8"></a><span id="l61.8">   checkReply(</span>
<a href="#l61.9"></a><span id="l61.9">     open_compose_with_reply_to_all,</span>
<a href="#l61.10"></a><span id="l61.10">     // To: from + to (except me2)</span>
<a href="#l61.11"></a><span id="l61.11">     // Cc: original Cc</span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-    // </span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+    //</span>
<a href="#l61.14"></a><span id="l61.14">     {</span>
<a href="#l61.15"></a><span id="l61.15">       &quot;addr_to&quot;: [&quot;secretary@example.com&quot;, &quot;barney@example.com&quot;],</span>
<a href="#l61.16"></a><span id="l61.16">       &quot;addr_cc&quot;: [&quot;Lisa &lt;lisa@example.com&gt;&quot;]</span>
<a href="#l61.17"></a><span id="l61.17">     }</span>
<a href="#l61.18"></a><span id="l61.18">   );</span>
<a href="#l61.19"></a><span id="l61.19"> }</span>
<a href="#l61.20"></a><span id="l61.20"> </span>
<a href="#l61.21"></a><span id="l61.21"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mail/test/mozmill/content-policy/test-view-source.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mail/test/mozmill/content-policy/test-view-source.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -22,17 +22,17 @@ var folder = null;</span>
<a href="#l62.4"></a><span id="l62.4"> </span>
<a href="#l62.5"></a><span id="l62.5"> function setupModule(module) {</span>
<a href="#l62.6"></a><span id="l62.6">   for (let dep of MODULE_REQUIRES) {</span>
<a href="#l62.7"></a><span id="l62.7">     collector.getModule(dep).installInto(module);</span>
<a href="#l62.8"></a><span id="l62.8">   }</span>
<a href="#l62.9"></a><span id="l62.9"> </span>
<a href="#l62.10"></a><span id="l62.10">   folder = create_folder(&quot;viewsource&quot;);</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-  // Bug 805374 removed the charsetMenu from view source. </span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+  // Bug 805374 removed the charsetMenu from view source.</span>
<a href="#l62.14"></a><span id="l62.14">   // Enable this test again when bug 940907 is fixed.</span>
<a href="#l62.15"></a><span id="l62.15">   test_view_source_reload.__force_skip__ = true;</span>
<a href="#l62.16"></a><span id="l62.16"> </span>
<a href="#l62.17"></a><span id="l62.17">   // Skip on mac, as we can't click the (native) menus to make it work.</span>
<a href="#l62.18"></a><span id="l62.18">   if (mc.mozmillModule.isMac)</span>
<a href="#l62.19"></a><span id="l62.19">     test_view_source_reload.__force_skip__ = true;</span>
<a href="#l62.20"></a><span id="l62.20"> }</span>
<a href="#l62.21"></a><span id="l62.21"> </span>
<a href="#l62.22"></a><span id="l62.22" class="difflineat">@@ -92,14 +92,14 @@ function test_view_source_reload() {</span>
<a href="#l62.23"></a><span id="l62.23">     [{id: &quot;charsetMenu&quot;}, {label: &quot;Unicode (UTF-8)&quot;}]);</span>
<a href="#l62.24"></a><span id="l62.24"> </span>
<a href="#l62.25"></a><span id="l62.25">   vsc.waitFor(function() vsc.e(&quot;content&quot;).contentDocument != doc &amp;&amp;</span>
<a href="#l62.26"></a><span id="l62.26">                          vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l62.27"></a><span id="l62.27">               &quot;Timeout waiting utf-8 encoded view-source document to load.&quot;);</span>
<a href="#l62.28"></a><span id="l62.28"> </span>
<a href="#l62.29"></a><span id="l62.29">   source = vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;).textContent;</span>
<a href="#l62.30"></a><span id="l62.30">   if (!source.contains(contentUTF8))</span>
<a href="#l62.31"></a><span id="l62.31" class="difflineminus">-    throw new Error(&quot;View source didn't contain the utf-8 text;\n&quot; + </span>
<a href="#l62.32"></a><span id="l62.32" class="difflineplus">+    throw new Error(&quot;View source didn't contain the utf-8 text;\n&quot; +</span>
<a href="#l62.33"></a><span id="l62.33">                     contentUTF8 + &quot;\n&quot; + source);</span>
<a href="#l62.34"></a><span id="l62.34"> </span>
<a href="#l62.35"></a><span id="l62.35">   close_window(vsc);</span>
<a href="#l62.36"></a><span id="l62.36"> }</span>
<a href="#l62.37"></a><span id="l62.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-pane-focus.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-pane-focus.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -112,26 +112,26 @@ function test_between_tab_and_single_mes</span>
<a href="#l63.4"></a><span id="l63.4">   // pane is focused.</span>
<a href="#l63.5"></a><span id="l63.5">   mc.window.SetFocusMessagePane();</span>
<a href="#l63.6"></a><span id="l63.6"> </span>
<a href="#l63.7"></a><span id="l63.7">   switch_tab(tab);</span>
<a href="#l63.8"></a><span id="l63.8">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.9"></a><span id="l63.9"> </span>
<a href="#l63.10"></a><span id="l63.10">   switch_tab();</span>
<a href="#l63.11"></a><span id="l63.11">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-  </span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+</span>
<a href="#l63.14"></a><span id="l63.14">   switch_tab(tab);</span>
<a href="#l63.15"></a><span id="l63.15">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.16"></a><span id="l63.16"> </span>
<a href="#l63.17"></a><span id="l63.17">   switch_tab();</span>
<a href="#l63.18"></a><span id="l63.18">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.19"></a><span id="l63.19"> </span>
<a href="#l63.20"></a><span id="l63.20">   // Now, focus the folder tree and make sure focus updates properly.</span>
<a href="#l63.21"></a><span id="l63.21">   mc.e(&quot;folderTree&quot;).focus();</span>
<a href="#l63.22"></a><span id="l63.22" class="difflineminus">-  </span>
<a href="#l63.23"></a><span id="l63.23" class="difflineplus">+</span>
<a href="#l63.24"></a><span id="l63.24">   switch_tab(tab);</span>
<a href="#l63.25"></a><span id="l63.25">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.26"></a><span id="l63.26"> </span>
<a href="#l63.27"></a><span id="l63.27">   switch_tab();</span>
<a href="#l63.28"></a><span id="l63.28">   assert_equals(mc.e(&quot;folderTree&quot;), get_focused_pane());</span>
<a href="#l63.29"></a><span id="l63.29"> </span>
<a href="#l63.30"></a><span id="l63.30">   close_tab(tab);</span>
<a href="#l63.31"></a><span id="l63.31"> }</span>
<a href="#l63.32"></a><span id="l63.32" class="difflineat">@@ -147,26 +147,26 @@ function test_between_tab_and_multi_mess</span>
<a href="#l63.33"></a><span id="l63.33">   // pane is focused.</span>
<a href="#l63.34"></a><span id="l63.34">   mc.window.SetFocusMessagePane();</span>
<a href="#l63.35"></a><span id="l63.35"> </span>
<a href="#l63.36"></a><span id="l63.36">   switch_tab(tab);</span>
<a href="#l63.37"></a><span id="l63.37">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.38"></a><span id="l63.38"> </span>
<a href="#l63.39"></a><span id="l63.39">   switch_tab();</span>
<a href="#l63.40"></a><span id="l63.40">   assert_equals(mc.e(&quot;multimessage&quot;), get_focused_pane());</span>
<a href="#l63.41"></a><span id="l63.41" class="difflineminus">-  </span>
<a href="#l63.42"></a><span id="l63.42" class="difflineplus">+</span>
<a href="#l63.43"></a><span id="l63.43">   switch_tab(tab);</span>
<a href="#l63.44"></a><span id="l63.44">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.45"></a><span id="l63.45"> </span>
<a href="#l63.46"></a><span id="l63.46">   switch_tab();</span>
<a href="#l63.47"></a><span id="l63.47">   assert_equals(mc.e(&quot;multimessage&quot;), get_focused_pane());</span>
<a href="#l63.48"></a><span id="l63.48"> </span>
<a href="#l63.49"></a><span id="l63.49">   // Now, focus the folder tree and make sure focus updates properly.</span>
<a href="#l63.50"></a><span id="l63.50">   mc.e(&quot;folderTree&quot;).focus();</span>
<a href="#l63.51"></a><span id="l63.51" class="difflineminus">-  </span>
<a href="#l63.52"></a><span id="l63.52" class="difflineplus">+</span>
<a href="#l63.53"></a><span id="l63.53">   switch_tab(tab);</span>
<a href="#l63.54"></a><span id="l63.54">   assert_equals(mc.e(&quot;messagepane&quot;), get_focused_pane());</span>
<a href="#l63.55"></a><span id="l63.55"> </span>
<a href="#l63.56"></a><span id="l63.56">   switch_tab();</span>
<a href="#l63.57"></a><span id="l63.57">   assert_equals(mc.e(&quot;folderTree&quot;), get_focused_pane());</span>
<a href="#l63.58"></a><span id="l63.58"> </span>
<a href="#l63.59"></a><span id="l63.59">   close_tab(tab);</span>
<a href="#l63.60"></a><span id="l63.60"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-recent-menu.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -90,17 +90,17 @@ function test_delete_message() {</span>
<a href="#l64.4"></a><span id="l64.4">   let popups = mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;),</span>
<a href="#l64.5"></a><span id="l64.5">                                           [{id: &quot;mailContext-moveMenu&quot;},</span>
<a href="#l64.6"></a><span id="l64.6">                                            {label: &quot;Recent&quot;}], true);</span>
<a href="#l64.7"></a><span id="l64.7">   let recentMenu = mc.eid(&quot;mailContext-moveMenu&quot;)</span>
<a href="#l64.8"></a><span id="l64.8">                      .node.querySelector('[label=&quot;Recent&quot;]');</span>
<a href="#l64.9"></a><span id="l64.9">   let recentChildren = recentMenu.menupopup.children;</span>
<a href="#l64.10"></a><span id="l64.10">   assert_equals(recentChildren.length, gInitRecentMenuCount + 1,</span>
<a href="#l64.11"></a><span id="l64.11">                 &quot;delete shouldn't add anything to recent menu&quot;);</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-  assert_equals(recentChildren[0].label, &quot;aaafolder2&quot;, </span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+  assert_equals(recentChildren[0].label, &quot;aaafolder2&quot;,</span>
<a href="#l64.14"></a><span id="l64.14">                 &quot;recent menu should still be aaafolder2 after delete&quot;);</span>
<a href="#l64.15"></a><span id="l64.15">   mc.close_popup_sequence(popups);</span>
<a href="#l64.16"></a><span id="l64.16"> }</span>
<a href="#l64.17"></a><span id="l64.17"> </span>
<a href="#l64.18"></a><span id="l64.18"> function test_archive_message() {</span>
<a href="#l64.19"></a><span id="l64.19">   archive_selected_messages();</span>
<a href="#l64.20"></a><span id="l64.20">   // We've archived a message - we should still just have folder2 in the menu.</span>
<a href="#l64.21"></a><span id="l64.21">   let popups = mc.click_menus_in_sequence(mc.e(&quot;mailContext&quot;),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mail/test/mozmill/folder-tree-modes/test-custom-smart-folder.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -39,34 +39,34 @@ function setupModule(module) {</span>
<a href="#l65.4"></a><span id="l65.4">   mc.folderTreeView.getFolderTreeMode(&quot;smart&quot;)</span>
<a href="#l65.5"></a><span id="l65.5">         .addSmartFolderType(smartParentNameB, false, false);</span>
<a href="#l65.6"></a><span id="l65.6"> </span>
<a href="#l65.7"></a><span id="l65.7">   // Create a folder as a subfolder of the inbox</span>
<a href="#l65.8"></a><span id="l65.8">   inboxFolder.createSubfolder(&quot;smartFolderA&quot;, null);</span>
<a href="#l65.9"></a><span id="l65.9">   subfolderA = inboxFolder.getChildNamed(&quot;smartFolderA&quot;);</span>
<a href="#l65.10"></a><span id="l65.10">   inboxFolder.createSubfolder(&quot;smartFolderB&quot;, null);</span>
<a href="#l65.11"></a><span id="l65.11">   subfolderB = inboxFolder.getChildNamed(&quot;smartFolderB&quot;);</span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-  </span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+</span>
<a href="#l65.14"></a><span id="l65.14">   // This is how folders are marked to match a custom smart folder</span>
<a href="#l65.15"></a><span id="l65.15">   subfolderA.setStringProperty(&quot;smartFolderName&quot;, smartParentNameA);</span>
<a href="#l65.16"></a><span id="l65.16">   subfolderB.setStringProperty(&quot;smartFolderName&quot;, smartParentNameB);</span>
<a href="#l65.17"></a><span id="l65.17"> </span>
<a href="#l65.18"></a><span id="l65.18">   // The message itself doesn't really matter, as long as there's at least one</span>
<a href="#l65.19"></a><span id="l65.19">   // in the folder.</span>
<a href="#l65.20"></a><span id="l65.20">   make_new_sets_in_folder(subfolderA, [{count: 1}]);</span>
<a href="#l65.21"></a><span id="l65.21">   make_new_sets_in_folder(subfolderB, [{count: 1}]);</span>
<a href="#l65.22"></a><span id="l65.22"> }</span>
<a href="#l65.23"></a><span id="l65.23"> </span>
<a href="#l65.24"></a><span id="l65.24"> /**</span>
<a href="#l65.25"></a><span id="l65.25">  * Switch to the smart folder mode, get the smart inbox.</span>
<a href="#l65.26"></a><span id="l65.26">  */</span>
<a href="#l65.27"></a><span id="l65.27"> function test_switch_to_smart_folder_mode() {</span>
<a href="#l65.28"></a><span id="l65.28">   mc.folderTreeView.mode = &quot;smart&quot;;</span>
<a href="#l65.29"></a><span id="l65.29">   assert_folder_mode(&quot;smart&quot;);</span>
<a href="#l65.30"></a><span id="l65.30" class="difflineminus">-  </span>
<a href="#l65.31"></a><span id="l65.31" class="difflineplus">+</span>
<a href="#l65.32"></a><span id="l65.32">   smartFolderA = get_smart_folder_named(smartParentNameA);</span>
<a href="#l65.33"></a><span id="l65.33">   mc.folderTreeView.selectFolder(smartFolderA);</span>
<a href="#l65.34"></a><span id="l65.34"> }</span>
<a href="#l65.35"></a><span id="l65.35"> </span>
<a href="#l65.36"></a><span id="l65.36"> </span>
<a href="#l65.37"></a><span id="l65.37"> function test_string_property() {</span>
<a href="#l65.38"></a><span id="l65.38">   if (subfolderA.getStringProperty(&quot;smartFolderName&quot;) != smartParentNameA)</span>
<a href="#l65.39"></a><span id="l65.39">     throw new Error(&quot;smartFolderName string property not set&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-return-receipt.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-return-receipt.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -151,17 +151,17 @@ function test_mdn_when_from_and_disposit</span>
<a href="#l66.4"></a><span id="l66.4">   assert_mdn_text_contains(&quot;other@example.com&quot;, true); // address should show</span>
<a href="#l66.5"></a><span id="l66.5"> }</span>
<a href="#l66.6"></a><span id="l66.6"> </span>
<a href="#l66.7"></a><span id="l66.7"> /**</span>
<a href="#l66.8"></a><span id="l66.8">  * Test that return receipts warns when the mdn address consists of multiple</span>
<a href="#l66.9"></a><span id="l66.9">  * addresses.</span>
<a href="#l66.10"></a><span id="l66.10">  */</span>
<a href="#l66.11"></a><span id="l66.11"> function test_mdn_when_disposition_to_multi() {</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-  gotoMsg(3); </span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+  gotoMsg(3);</span>
<a href="#l66.14"></a><span id="l66.14">   // Should display a notification with warning listing all the addresses.</span>
<a href="#l66.15"></a><span id="l66.15">   assert_mdn_shown(true);</span>
<a href="#l66.16"></a><span id="l66.16">   assert_mdn_text_contains(&quot;ex1@example.com&quot;, true);</span>
<a href="#l66.17"></a><span id="l66.17">   assert_mdn_text_contains(&quot;ex2@example.com&quot;, true);</span>
<a href="#l66.18"></a><span id="l66.18"> }</span>
<a href="#l66.19"></a><span id="l66.19"> </span>
<a href="#l66.20"></a><span id="l66.20"> /**</span>
<a href="#l66.21"></a><span id="l66.21">  * Test that return receipts warns when the mdn address consists of multiple</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mail/test/mozmill/quick-filter-bar/test-display-issues.js</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mail/test/mozmill/quick-filter-bar/test-display-issues.js</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -1,15 +1,15 @@</span>
<a href="#l67.4"></a><span id="l67.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l67.5"></a><span id="l67.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l67.6"></a><span id="l67.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l67.7"></a><span id="l67.7"> </span>
<a href="#l67.8"></a><span id="l67.8"> /*</span>
<a href="#l67.9"></a><span id="l67.9">  * Test things of a visual nature.</span>
<a href="#l67.10"></a><span id="l67.10" class="difflineminus">- * </span>
<a href="#l67.11"></a><span id="l67.11" class="difflineplus">+ *</span>
<a href="#l67.12"></a><span id="l67.12">  * Note: this test requires a screen resolution of 1280 x 1024 which is standard on</span>
<a href="#l67.13"></a><span id="l67.13">  * the unit test machines (see also testing/machine-configuration.json).</span>
<a href="#l67.14"></a><span id="l67.14">  */</span>
<a href="#l67.15"></a><span id="l67.15"> </span>
<a href="#l67.16"></a><span id="l67.16"> var MODULE_NAME = 'test-keyboard-interface';</span>
<a href="#l67.17"></a><span id="l67.17"> </span>
<a href="#l67.18"></a><span id="l67.18"> const RELATIVE_ROOT = '../shared-modules';</span>
<a href="#l67.19"></a><span id="l67.19"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -38,17 +38,17 @@ const kDefaultReturnHeader = {</span>
<a href="#l68.4"></a><span id="l68.4"> </span>
<a href="#l68.5"></a><span id="l68.5"> const kDefaultUser = {</span>
<a href="#l68.6"></a><span id="l68.6">   key: null,</span>
<a href="#l68.7"></a><span id="l68.7">   id: null,</span>
<a href="#l68.8"></a><span id="l68.8">   type: &quot;BAS&quot;,</span>
<a href="#l68.9"></a><span id="l68.9">   policy: null,</span>
<a href="#l68.10"></a><span id="l68.10">   version: &quot;v3&quot;,</span>
<a href="#l68.11"></a><span id="l68.11">   password: null,</span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-  role:null, </span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+  role:null,</span>
<a href="#l68.14"></a><span id="l68.14">   email: &quot;john@example.com&quot;,</span>
<a href="#l68.15"></a><span id="l68.15">   firstname: &quot;John&quot;,</span>
<a href="#l68.16"></a><span id="l68.16">   lastname: &quot;User&quot;,</span>
<a href="#l68.17"></a><span id="l68.17">   created: null,</span>
<a href="#l68.18"></a><span id="l68.18">   account: {</span>
<a href="#l68.19"></a><span id="l68.19">     passwordProtect: &quot;Pay-per-use&quot;,</span>
<a href="#l68.20"></a><span id="l68.20">     returnReceipt: &quot;Pay-per-use&quot;,</span>
<a href="#l68.21"></a><span id="l68.21">     availableStorage: &quot;2147483648&quot;,</span>
<a href="#l68.22"></a><span id="l68.22" class="difflineat">@@ -299,23 +299,23 @@ function MockHightailPrepareSimple(aHigh</span>
<a href="#l68.23"></a><span id="l68.23">   this._hightail = aHightail;</span>
<a href="#l68.24"></a><span id="l68.24"> }</span>
<a href="#l68.25"></a><span id="l68.25"> </span>
<a href="#l68.26"></a><span id="l68.26"> MockHightailPrepareSimple.prototype = {</span>
<a href="#l68.27"></a><span id="l68.27">   init: function(aServer) {</span>
<a href="#l68.28"></a><span id="l68.28">     this._server = aServer;</span>
<a href="#l68.29"></a><span id="l68.29">     this._server.registerPathHandler(kFolderInitUploadPath,</span>
<a href="#l68.30"></a><span id="l68.30">                                      this._prepare.bind(this));</span>
<a href="#l68.31"></a><span id="l68.31" class="difflineminus">-    </span>
<a href="#l68.32"></a><span id="l68.32" class="difflineplus">+</span>
<a href="#l68.33"></a><span id="l68.33">     this._foldersId = {</span>
<a href="#l68.34"></a><span id="l68.34">       root: 0,</span>
<a href="#l68.35"></a><span id="l68.35">       Apps: this._hightail.registry.createItemId(),</span>
<a href="#l68.36"></a><span id="l68.36">       &quot;Mozilla Thunderbird&quot; : this._hightail.registry.createItemId()</span>
<a href="#l68.37"></a><span id="l68.37">     };</span>
<a href="#l68.38"></a><span id="l68.38" class="difflineminus">-    </span>
<a href="#l68.39"></a><span id="l68.39" class="difflineplus">+</span>
<a href="#l68.40"></a><span id="l68.40">     // Set up folders info</span>
<a href="#l68.41"></a><span id="l68.41">     for (let i in this._foldersId) {</span>
<a href="#l68.42"></a><span id="l68.42">       this._server.registerPathHandler(kFolderPath + this._foldersId[i],</span>
<a href="#l68.43"></a><span id="l68.43">                                        this._getFolderInfo.bind(this));</span>
<a href="#l68.44"></a><span id="l68.44">     }</span>
<a href="#l68.45"></a><span id="l68.45">   },</span>
<a href="#l68.46"></a><span id="l68.46"> </span>
<a href="#l68.47"></a><span id="l68.47">   shutdown: function() {</span>
<a href="#l68.48"></a><span id="l68.48" class="difflineat">@@ -325,17 +325,17 @@ MockHightailPrepareSimple.prototype = {</span>
<a href="#l68.49"></a><span id="l68.49">                                        null);</span>
<a href="#l68.50"></a><span id="l68.50">     }</span>
<a href="#l68.51"></a><span id="l68.51">     this._server = null;</span>
<a href="#l68.52"></a><span id="l68.52">   },</span>
<a href="#l68.53"></a><span id="l68.53"> </span>
<a href="#l68.54"></a><span id="l68.54">   _getFolderInfo: function(aRequest, aResponse) {</span>
<a href="#l68.55"></a><span id="l68.55">     let folderId = aRequest.path.substring(kFolderPath.length);</span>
<a href="#l68.56"></a><span id="l68.56">     let nextFolder = folderId == (this._foldersId.root + &quot;&quot;)</span>
<a href="#l68.57"></a><span id="l68.57" class="difflineminus">-                        ? &quot;Apps&quot; </span>
<a href="#l68.58"></a><span id="l68.58" class="difflineplus">+                        ? &quot;Apps&quot;</span>
<a href="#l68.59"></a><span id="l68.59">                         : &quot;Mozilla Thunderbird&quot;;</span>
<a href="#l68.60"></a><span id="l68.60">     let response = {</span>
<a href="#l68.61"></a><span id="l68.61">       folders: {</span>
<a href="#l68.62"></a><span id="l68.62">         folder: [{name: nextFolder, id: this._foldersId[nextFolder]}]</span>
<a href="#l68.63"></a><span id="l68.63">       },</span>
<a href="#l68.64"></a><span id="l68.64">       status: 200</span>
<a href="#l68.65"></a><span id="l68.65">     }</span>
<a href="#l68.66"></a><span id="l68.66">     aResponse.setStatusLine(null, 200, &quot;OK&quot;);</span>
<a href="#l68.67"></a><span id="l68.67" class="difflineat">@@ -460,22 +460,22 @@ function MockHightailCommitterSimple(aHi</span>
<a href="#l68.68"></a><span id="l68.68">   this._itemIdMap = {};</span>
<a href="#l68.69"></a><span id="l68.69">   this._filenameURLMap = {};</span>
<a href="#l68.70"></a><span id="l68.70"> }</span>
<a href="#l68.71"></a><span id="l68.71"> </span>
<a href="#l68.72"></a><span id="l68.72"> MockHightailCommitterSimple.prototype = {</span>
<a href="#l68.73"></a><span id="l68.73">   init: function(aServer) {</span>
<a href="#l68.74"></a><span id="l68.74">     this._server = aServer;</span>
<a href="#l68.75"></a><span id="l68.75">     // Since fileId is in query, we need to register path only once.</span>
<a href="#l68.76"></a><span id="l68.76" class="difflineminus">-    this._server.registerPathHandler(kFolderCommitUploadPath, </span>
<a href="#l68.77"></a><span id="l68.77" class="difflineplus">+    this._server.registerPathHandler(kFolderCommitUploadPath,</span>
<a href="#l68.78"></a><span id="l68.78">                                      this.commit.bind(this));</span>
<a href="#l68.79"></a><span id="l68.79">   },</span>
<a href="#l68.80"></a><span id="l68.80"> </span>
<a href="#l68.81"></a><span id="l68.81">   shutdown: function() {</span>
<a href="#l68.82"></a><span id="l68.82" class="difflineminus">-    this._server.registerPathHandler(kFolderCommitUploadPath, </span>
<a href="#l68.83"></a><span id="l68.83" class="difflineplus">+    this._server.registerPathHandler(kFolderCommitUploadPath,</span>
<a href="#l68.84"></a><span id="l68.84">                                      null);</span>
<a href="#l68.85"></a><span id="l68.85">     this._server = null;</span>
<a href="#l68.86"></a><span id="l68.86">     this._itemIdMap = {};</span>
<a href="#l68.87"></a><span id="l68.87">     this._filenameURLMap = {};</span>
<a href="#l68.88"></a><span id="l68.88">   },</span>
<a href="#l68.89"></a><span id="l68.89"> </span>
<a href="#l68.90"></a><span id="l68.90">   prepareDownloadURL: function(aFilename, aURL) {</span>
<a href="#l68.91"></a><span id="l68.91">     this._filenameURLMap[aFilename] = aURL;</span>
<a href="#l68.92"></a><span id="l68.92" class="difflineat">@@ -490,32 +490,32 @@ MockHightailCommitterSimple.prototype = </span>
<a href="#l68.93"></a><span id="l68.93">       aResponse.setStatusLine(null, 500, &quot;Bad request&quot;);</span>
<a href="#l68.94"></a><span id="l68.94">       aResponse.write(&quot;The item ID &quot; + fileId + &quot; did not map to an item we &quot;</span>
<a href="#l68.95"></a><span id="l68.95">                       + &quot;were prepared for committing&quot;);</span>
<a href="#l68.96"></a><span id="l68.96">       return;</span>
<a href="#l68.97"></a><span id="l68.97">     }</span>
<a href="#l68.98"></a><span id="l68.98"> </span>
<a href="#l68.99"></a><span id="l68.99">     let filename = this._hightail.registry.lookupFilename(fileId);</span>
<a href="#l68.100"></a><span id="l68.100">     let url;</span>
<a href="#l68.101"></a><span id="l68.101" class="difflineminus">-    </span>
<a href="#l68.102"></a><span id="l68.102" class="difflineplus">+</span>
<a href="#l68.103"></a><span id="l68.103">     if (filename in this._filenameURLMap)</span>
<a href="#l68.104"></a><span id="l68.104">       url = this._filenameURLMap[filename];</span>
<a href="#l68.105"></a><span id="l68.105">     else</span>
<a href="#l68.106"></a><span id="l68.106">       url = kDownloadURLPrefix + &quot;/&quot; + filename;</span>
<a href="#l68.107"></a><span id="l68.107" class="difflineminus">-    </span>
<a href="#l68.108"></a><span id="l68.108" class="difflineplus">+</span>
<a href="#l68.109"></a><span id="l68.109">     let injectedData = {</span>
<a href="#l68.110"></a><span id="l68.110">       clickableDownloadUrl: url,</span>
<a href="#l68.111"></a><span id="l68.111">     }</span>
<a href="#l68.112"></a><span id="l68.112">     let data = overrideDefault(kDefaultCommitReturn, injectedData);</span>
<a href="#l68.113"></a><span id="l68.113" class="difflineminus">-    </span>
<a href="#l68.114"></a><span id="l68.114" class="difflineplus">+</span>
<a href="#l68.115"></a><span id="l68.115">     // Return the default share URL</span>
<a href="#l68.116"></a><span id="l68.116">     aResponse.setStatusLine(null, 200, &quot;OK&quot;);</span>
<a href="#l68.117"></a><span id="l68.117">     aResponse.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);</span>
<a href="#l68.118"></a><span id="l68.118">     aResponse.write(JSON.stringify(data));</span>
<a href="#l68.119"></a><span id="l68.119" class="difflineminus">-    </span>
<a href="#l68.120"></a><span id="l68.120" class="difflineplus">+</span>
<a href="#l68.121"></a><span id="l68.121">     Services.obs.notifyObservers(null, &quot;cloudfile:getFileURL&quot;, filename);</span>
<a href="#l68.122"></a><span id="l68.122">   },</span>
<a href="#l68.123"></a><span id="l68.123"> };</span>
<a href="#l68.124"></a><span id="l68.124"> </span>
<a href="#l68.125"></a><span id="l68.125"> function MockHightailDeleterSimple(aHightail) {</span>
<a href="#l68.126"></a><span id="l68.126">   this._server = null;</span>
<a href="#l68.127"></a><span id="l68.127">   this._hightail = aHightail;</span>
<a href="#l68.128"></a><span id="l68.128">   this._expectDelete = [];</span>
<a href="#l68.129"></a><span id="l68.129" class="difflineat">@@ -664,26 +664,26 @@ function overrideDefault(aDefault, aData</span>
<a href="#l68.130"></a><span id="l68.130">     if (param in aData)</span>
<a href="#l68.131"></a><span id="l68.131">       aDefault[param] = aData[param];</span>
<a href="#l68.132"></a><span id="l68.132">   }</span>
<a href="#l68.133"></a><span id="l68.133">   return aDefault;</span>
<a href="#l68.134"></a><span id="l68.134"> }</span>
<a href="#l68.135"></a><span id="l68.135"> </span>
<a href="#l68.136"></a><span id="l68.136"> </span>
<a href="#l68.137"></a><span id="l68.137"> /**</span>
<a href="#l68.138"></a><span id="l68.138" class="difflineminus">- * Large swaths of this were liberally stolen from </span>
<a href="#l68.139"></a><span id="l68.139" class="difflineplus">+ * Large swaths of this were liberally stolen from</span>
<a href="#l68.140"></a><span id="l68.140">  * mozilla/toolkit/crashreporter/test/browser/crashreport.sjs</span>
<a href="#l68.141"></a><span id="l68.141">  *</span>
<a href="#l68.142"></a><span id="l68.142">  */</span>
<a href="#l68.143"></a><span id="l68.143"> function generateUUID() {</span>
<a href="#l68.144"></a><span id="l68.144">   let uuidGen = Cc[&quot;@mozilla.org/uuid-generator;1&quot;]</span>
<a href="#l68.145"></a><span id="l68.145">                   .getService(Ci.nsIUUIDGenerator);</span>
<a href="#l68.146"></a><span id="l68.146">   let uuid = uuidGen.generateUUID().toString();</span>
<a href="#l68.147"></a><span id="l68.147">   return uuid.substring(1, uuid.length - 2);</span>
<a href="#l68.148"></a><span id="l68.148" class="difflineminus">-  </span>
<a href="#l68.149"></a><span id="l68.149" class="difflineplus">+</span>
<a href="#l68.150"></a><span id="l68.150"> }</span>
<a href="#l68.151"></a><span id="l68.151"> </span>
<a href="#l68.152"></a><span id="l68.152"> function parseHeaders(data, start)</span>
<a href="#l68.153"></a><span id="l68.153"> {</span>
<a href="#l68.154"></a><span id="l68.154">   let headers = {};</span>
<a href="#l68.155"></a><span id="l68.155"> </span>
<a href="#l68.156"></a><span id="l68.156">   while (true) {</span>
<a href="#l68.157"></a><span id="l68.157">     let done = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-notificationbox-helpers.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -63,17 +63,17 @@ function close_notification(aController,</span>
<a href="#l69.4"></a><span id="l69.4">     notification.close();</span>
<a href="#l69.5"></a><span id="l69.5"> }</span>
<a href="#l69.6"></a><span id="l69.6"> </span>
<a href="#l69.7"></a><span id="l69.7"> /**</span>
<a href="#l69.8"></a><span id="l69.8">  * A helper function that waits for a notification with value aValue</span>
<a href="#l69.9"></a><span id="l69.9">  * to stop displaying in the window.</span>
<a href="#l69.10"></a><span id="l69.10">  *</span>
<a href="#l69.11"></a><span id="l69.11">  * @param aController the controller for the window with the notification</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">- * @param aBoxId the id of the notificaiton box </span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+ * @param aBoxId the id of the notificaiton box</span>
<a href="#l69.14"></a><span id="l69.14">  * @param aValue the value of the notification to wait to stop</span>
<a href="#l69.15"></a><span id="l69.15">  */</span>
<a href="#l69.16"></a><span id="l69.16"> function wait_for_notification_to_stop(aController, aBoxId, aValue) {</span>
<a href="#l69.17"></a><span id="l69.17">   let nb = aController.window.document.getElementById(aBoxId);</span>
<a href="#l69.18"></a><span id="l69.18">   if (!nb)</span>
<a href="#l69.19"></a><span id="l69.19">     throw new Error(&quot;Couldn't find a notification box for id=&quot; + aBoxId);</span>
<a href="#l69.20"></a><span id="l69.20">   aController.waitFor(function() !nb.getNotificationWithValue(aValue),</span>
<a href="#l69.21"></a><span id="l69.21">                       &quot;Timed out waiting for notification with value &quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-window-helpers.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -256,17 +256,17 @@ var WindowWatcher = {</span>
<a href="#l70.4"></a><span id="l70.4">     let xulWindow = this.waitingList.get(aWindowType);</span>
<a href="#l70.5"></a><span id="l70.5">     let domWindow = xulWindow.docShell.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l70.6"></a><span id="l70.6">                                       .getInterface(Ci.nsIDOMWindow);</span>
<a href="#l70.7"></a><span id="l70.7">     this.waitingList.delete(aWindowType);</span>
<a href="#l70.8"></a><span id="l70.8">     // spin the event loop to make sure any setTimeout 0 calls have gotten their</span>
<a href="#l70.9"></a><span id="l70.9">     //  time in the sun.</span>
<a href="#l70.10"></a><span id="l70.10">     controller.sleep(0);</span>
<a href="#l70.11"></a><span id="l70.11">     this._firstWindowOpened = true;</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">-    // wrap the creation because </span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+    // wrap the creation because</span>
<a href="#l70.14"></a><span id="l70.14">     mark_action(&quot;winhelp&quot;, &quot;new MozMillController()&quot;, [aWindowType]);</span>
<a href="#l70.15"></a><span id="l70.15">     let c = new controller.MozMillController(domWindow);</span>
<a href="#l70.16"></a><span id="l70.16">     mark_action(&quot;winhelp&quot;, &quot;/new MozMillController()&quot;, [aWindowType]);</span>
<a href="#l70.17"></a><span id="l70.17">     return c;</span>
<a href="#l70.18"></a><span id="l70.18">   },</span>
<a href="#l70.19"></a><span id="l70.19"> </span>
<a href="#l70.20"></a><span id="l70.20">   /**</span>
<a href="#l70.21"></a><span id="l70.21">    * Because the modal dialog spins its own event loop, the mozmill idiom of</span>
<a href="#l70.22"></a><span id="l70.22" class="difflineat">@@ -718,17 +718,17 @@ function wait_for_frame_load(aFrame, aUR</span>
<a href="#l70.23"></a><span id="l70.23">   };</span>
<a href="#l70.24"></a><span id="l70.24">   return _wait_for_generic_load(details, aURLOrPredicate);</span>
<a href="#l70.25"></a><span id="l70.25"> }</span>
<a href="#l70.26"></a><span id="l70.26"> </span>
<a href="#l70.27"></a><span id="l70.27"> /**</span>
<a href="#l70.28"></a><span id="l70.28">  * Generic function to wait for some sort of document to load. We expect</span>
<a href="#l70.29"></a><span id="l70.29">  * aDetails to have three fields:</span>
<a href="#l70.30"></a><span id="l70.30">  * - webProgress: an nsIWebProgress associated with the contentWindow.</span>
<a href="#l70.31"></a><span id="l70.31" class="difflineminus">- * - currentURI: the currently loaded page (nsIURI). </span>
<a href="#l70.32"></a><span id="l70.32" class="difflineplus">+ * - currentURI: the currently loaded page (nsIURI).</span>
<a href="#l70.33"></a><span id="l70.33">  * - contentWindow: the content window.</span>
<a href="#l70.34"></a><span id="l70.34">  */</span>
<a href="#l70.35"></a><span id="l70.35"> function _wait_for_generic_load(aDetails, aURLOrPredicate) {</span>
<a href="#l70.36"></a><span id="l70.36">   let predicate;</span>
<a href="#l70.37"></a><span id="l70.37">   if (typeof aURLOrPredicate == &quot;string&quot;) {</span>
<a href="#l70.38"></a><span id="l70.38">     let expectedURL = NetUtil.newURI(aURLOrPredicate);</span>
<a href="#l70.39"></a><span id="l70.39">     predicate = function (url) (expectedURL.equals(url));</span>
<a href="#l70.40"></a><span id="l70.40">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/jsbridge/extension/chrome/content/overlay.js</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -1,40 +1,40 @@</span>
<a href="#l71.4"></a><span id="l71.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l71.5"></a><span id="l71.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l71.6"></a><span id="l71.6" class="difflineminus">-// </span>
<a href="#l71.7"></a><span id="l71.7" class="difflineplus">+//</span>
<a href="#l71.8"></a><span id="l71.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l71.9"></a><span id="l71.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l71.10"></a><span id="l71.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l71.11"></a><span id="l71.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-// </span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+//</span>
<a href="#l71.14"></a><span id="l71.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l71.15"></a><span id="l71.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l71.16"></a><span id="l71.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l71.17"></a><span id="l71.17"> // License.</span>
<a href="#l71.18"></a><span id="l71.18" class="difflineminus">-// </span>
<a href="#l71.19"></a><span id="l71.19" class="difflineplus">+//</span>
<a href="#l71.20"></a><span id="l71.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l71.21"></a><span id="l71.21" class="difflineminus">-// </span>
<a href="#l71.22"></a><span id="l71.22" class="difflineplus">+//</span>
<a href="#l71.23"></a><span id="l71.23"> // The Initial Developer of the Original Code is</span>
<a href="#l71.24"></a><span id="l71.24"> // Mikeal Rogers.</span>
<a href="#l71.25"></a><span id="l71.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l71.26"></a><span id="l71.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l71.27"></a><span id="l71.27" class="difflineminus">-// </span>
<a href="#l71.28"></a><span id="l71.28" class="difflineplus">+//</span>
<a href="#l71.29"></a><span id="l71.29"> // Contributor(s):</span>
<a href="#l71.30"></a><span id="l71.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l71.31"></a><span id="l71.31" class="difflineminus">-// </span>
<a href="#l71.32"></a><span id="l71.32" class="difflineplus">+//</span>
<a href="#l71.33"></a><span id="l71.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l71.34"></a><span id="l71.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l71.35"></a><span id="l71.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l71.36"></a><span id="l71.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l71.37"></a><span id="l71.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l71.38"></a><span id="l71.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l71.39"></a><span id="l71.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l71.40"></a><span id="l71.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l71.41"></a><span id="l71.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l71.42"></a><span id="l71.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l71.43"></a><span id="l71.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l71.44"></a><span id="l71.44" class="difflineminus">-// </span>
<a href="#l71.45"></a><span id="l71.45" class="difflineplus">+//</span>
<a href="#l71.46"></a><span id="l71.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l71.47"></a><span id="l71.47"> </span>
<a href="#l71.48"></a><span id="l71.48"> var jsbridgeInit = {}; Components.utils.import('resource://jsbridge/modules/init.js',jsbridgeInit);</span>
<a href="#l71.49"></a><span id="l71.49"> </span>
<a href="#l71.50"></a><span id="l71.50"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/init.js</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -1,40 +1,40 @@</span>
<a href="#l72.4"></a><span id="l72.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l72.5"></a><span id="l72.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l72.6"></a><span id="l72.6" class="difflineminus">-// </span>
<a href="#l72.7"></a><span id="l72.7" class="difflineplus">+//</span>
<a href="#l72.8"></a><span id="l72.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l72.9"></a><span id="l72.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l72.10"></a><span id="l72.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l72.11"></a><span id="l72.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">-// </span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+//</span>
<a href="#l72.14"></a><span id="l72.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l72.15"></a><span id="l72.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l72.16"></a><span id="l72.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l72.17"></a><span id="l72.17"> // License.</span>
<a href="#l72.18"></a><span id="l72.18" class="difflineminus">-// </span>
<a href="#l72.19"></a><span id="l72.19" class="difflineplus">+//</span>
<a href="#l72.20"></a><span id="l72.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l72.21"></a><span id="l72.21" class="difflineminus">-// </span>
<a href="#l72.22"></a><span id="l72.22" class="difflineplus">+//</span>
<a href="#l72.23"></a><span id="l72.23"> // The Initial Developer of the Original Code is</span>
<a href="#l72.24"></a><span id="l72.24"> // Mikeal Rogers.</span>
<a href="#l72.25"></a><span id="l72.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l72.26"></a><span id="l72.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l72.27"></a><span id="l72.27" class="difflineminus">-// </span>
<a href="#l72.28"></a><span id="l72.28" class="difflineplus">+//</span>
<a href="#l72.29"></a><span id="l72.29"> // Contributor(s):</span>
<a href="#l72.30"></a><span id="l72.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l72.31"></a><span id="l72.31" class="difflineminus">-// </span>
<a href="#l72.32"></a><span id="l72.32" class="difflineplus">+//</span>
<a href="#l72.33"></a><span id="l72.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l72.34"></a><span id="l72.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l72.35"></a><span id="l72.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l72.36"></a><span id="l72.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l72.37"></a><span id="l72.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l72.38"></a><span id="l72.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l72.39"></a><span id="l72.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l72.40"></a><span id="l72.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l72.41"></a><span id="l72.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l72.42"></a><span id="l72.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l72.43"></a><span id="l72.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l72.44"></a><span id="l72.44" class="difflineminus">-// </span>
<a href="#l72.45"></a><span id="l72.45" class="difflineplus">+//</span>
<a href="#l72.46"></a><span id="l72.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l72.47"></a><span id="l72.47"> </span>
<a href="#l72.48"></a><span id="l72.48"> var EXPORTED_SYMBOLS = [&quot;server&quot;];</span>
<a href="#l72.49"></a><span id="l72.49"> </span>
<a href="#l72.50"></a><span id="l72.50"> var server = {}; Components.utils.import('resource://jsbridge/modules/server.js', server);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/jsbridge/extension/resource/modules/server.js</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -1,63 +1,63 @@</span>
<a href="#l73.4"></a><span id="l73.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l73.5"></a><span id="l73.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l73.6"></a><span id="l73.6" class="difflineminus">-// </span>
<a href="#l73.7"></a><span id="l73.7" class="difflineplus">+//</span>
<a href="#l73.8"></a><span id="l73.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l73.9"></a><span id="l73.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l73.10"></a><span id="l73.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l73.11"></a><span id="l73.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-// </span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+//</span>
<a href="#l73.14"></a><span id="l73.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l73.15"></a><span id="l73.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l73.16"></a><span id="l73.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l73.17"></a><span id="l73.17"> // License.</span>
<a href="#l73.18"></a><span id="l73.18" class="difflineminus">-// </span>
<a href="#l73.19"></a><span id="l73.19" class="difflineplus">+//</span>
<a href="#l73.20"></a><span id="l73.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l73.21"></a><span id="l73.21" class="difflineminus">-// </span>
<a href="#l73.22"></a><span id="l73.22" class="difflineplus">+//</span>
<a href="#l73.23"></a><span id="l73.23"> // The Initial Developer of the Original Code is</span>
<a href="#l73.24"></a><span id="l73.24"> // based on the MozRepl project.</span>
<a href="#l73.25"></a><span id="l73.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l73.26"></a><span id="l73.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l73.27"></a><span id="l73.27" class="difflineminus">-// </span>
<a href="#l73.28"></a><span id="l73.28" class="difflineplus">+//</span>
<a href="#l73.29"></a><span id="l73.29"> // Contributor(s):</span>
<a href="#l73.30"></a><span id="l73.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l73.31"></a><span id="l73.31"> //  Massimiliano Mirra &lt;bard@hyperstruct.net&gt;</span>
<a href="#l73.32"></a><span id="l73.32"> //</span>
<a href="#l73.33"></a><span id="l73.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l73.34"></a><span id="l73.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l73.35"></a><span id="l73.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l73.36"></a><span id="l73.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l73.37"></a><span id="l73.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l73.38"></a><span id="l73.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l73.39"></a><span id="l73.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l73.40"></a><span id="l73.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l73.41"></a><span id="l73.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l73.42"></a><span id="l73.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l73.43"></a><span id="l73.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l73.44"></a><span id="l73.44" class="difflineminus">-// </span>
<a href="#l73.45"></a><span id="l73.45" class="difflineplus">+//</span>
<a href="#l73.46"></a><span id="l73.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l73.47"></a><span id="l73.47"> </span>
<a href="#l73.48"></a><span id="l73.48"> var EXPORTED_SYMBOLS = [&quot;Server&quot;, &quot;server&quot;, &quot;AsyncRead&quot;, &quot;Session&quot;, &quot;sessions&quot;, &quot;globalRegistry&quot;, &quot;startServer&quot;];</span>
<a href="#l73.49"></a><span id="l73.49"> </span>
<a href="#l73.50"></a><span id="l73.50"> var events = {}; Components.utils.import(&quot;resource://jsbridge/modules/events.js&quot;, events);</span>
<a href="#l73.51"></a><span id="l73.51"> const DEBUG_ON = false;</span>
<a href="#l73.52"></a><span id="l73.52"> const BUFFER_SIZE = 1024;</span>
<a href="#l73.53"></a><span id="l73.53"> const Cc = Components.classes;</span>
<a href="#l73.54"></a><span id="l73.54"> const Ci = Components.interfaces;</span>
<a href="#l73.55"></a><span id="l73.55"> const loader = Cc['@mozilla.org/moz/jssubscript-loader;1']</span>
<a href="#l73.56"></a><span id="l73.56">     .getService(Ci.mozIJSSubScriptLoader);</span>
<a href="#l73.57"></a><span id="l73.57"> </span>
<a href="#l73.58"></a><span id="l73.58"> var hwindow = Components.classes[&quot;@mozilla.org/appshell/appShellService;1&quot;]</span>
<a href="#l73.59"></a><span id="l73.59">     .getService(Components.interfaces.nsIAppShellService)</span>
<a href="#l73.60"></a><span id="l73.60">     .hiddenDOMWindow;</span>
<a href="#l73.61"></a><span id="l73.61" class="difflineminus">-    </span>
<a href="#l73.62"></a><span id="l73.62" class="difflineplus">+</span>
<a href="#l73.63"></a><span id="l73.63"> var json2 = Components.utils.import(&quot;resource://jsbridge/modules/json2.js&quot;);</span>
<a href="#l73.64"></a><span id="l73.64"> </span>
<a href="#l73.65"></a><span id="l73.65" class="difflineminus">-var jsonEncode = json2.JSON.stringify;    </span>
<a href="#l73.66"></a><span id="l73.66" class="difflineplus">+var jsonEncode = json2.JSON.stringify;</span>
<a href="#l73.67"></a><span id="l73.67"> </span>
<a href="#l73.68"></a><span id="l73.68"> var uuidgen = Components.classes[&quot;@mozilla.org/uuid-generator;1&quot;]</span>
<a href="#l73.69"></a><span id="l73.69">     .getService(Components.interfaces.nsIUUIDGenerator);</span>
<a href="#l73.70"></a><span id="l73.70"> </span>
<a href="#l73.71"></a><span id="l73.71"> function AsyncRead (session) {</span>
<a href="#l73.72"></a><span id="l73.72">   this.session = session;</span>
<a href="#l73.73"></a><span id="l73.73"> }</span>
<a href="#l73.74"></a><span id="l73.74"> AsyncRead.prototype.onStartRequest = function (request, context) {};</span>
<a href="#l73.75"></a><span id="l73.75" class="difflineat">@@ -76,17 +76,17 @@ AsyncRead.prototype.onDataAvailable = fu</span>
<a href="#l73.76"></a><span id="l73.76">       bytesAvail = BUFFER_SIZE;</span>
<a href="#l73.77"></a><span id="l73.77">     } else {</span>
<a href="#l73.78"></a><span id="l73.78">       bytesAvail = count;</span>
<a href="#l73.79"></a><span id="l73.79">     }</span>
<a href="#l73.80"></a><span id="l73.80"> </span>
<a href="#l73.81"></a><span id="l73.81">     log(&quot;jsbridge: onDataAvailable, reading bytesAvail = &quot; + bytesAvail + &quot;\n&quot;);</span>
<a href="#l73.82"></a><span id="l73.82">     var bytesRead = this.session.instream.readString(bytesAvail, parts);</span>
<a href="#l73.83"></a><span id="l73.83">     count = count - bytesRead;</span>
<a href="#l73.84"></a><span id="l73.84" class="difflineminus">-    log(&quot;jsbridge: onDataAvailable, read bytes: &quot; + bytesRead + &quot; count is now: &quot; + count + &quot;\n&quot;); </span>
<a href="#l73.85"></a><span id="l73.85" class="difflineplus">+    log(&quot;jsbridge: onDataAvailable, read bytes: &quot; + bytesRead + &quot; count is now: &quot; + count + &quot;\n&quot;);</span>
<a href="#l73.86"></a><span id="l73.86">     str.value += parts.value;</span>
<a href="#l73.87"></a><span id="l73.87">   } while (count &gt; 0);</span>
<a href="#l73.88"></a><span id="l73.88">   log(&quot;jsbridge: onDataAvailable, going into receive with: \n\n&quot; + str.value + &quot;\n\n&quot;);</span>
<a href="#l73.89"></a><span id="l73.89">   this.session.receive(str.value);</span>
<a href="#l73.90"></a><span id="l73.90"> }</span>
<a href="#l73.91"></a><span id="l73.91"> </span>
<a href="#l73.92"></a><span id="l73.92"> </span>
<a href="#l73.93"></a><span id="l73.93"> </span>
<a href="#l73.94"></a><span id="l73.94" class="difflineat">@@ -112,17 +112,17 @@ Bridge.prototype.register = function (uu</span>
<a href="#l73.95"></a><span id="l73.95">     } else {</span>
<a href="#l73.96"></a><span id="l73.96">       var exception = {'name':e.name, 'message':e.message};</span>
<a href="#l73.97"></a><span id="l73.97">     }</span>
<a href="#l73.98"></a><span id="l73.98">     this.session.encodeOut({'result':false, 'exception':exception, 'uuid':uuid});</span>
<a href="#l73.99"></a><span id="l73.99">   }</span>
<a href="#l73.100"></a><span id="l73.100">   if (passed != undefined) {</span>
<a href="#l73.101"></a><span id="l73.101">     this.session.encodeOut({&quot;result&quot;:true, 'eventType':'register', 'uuid':uuid});</span>
<a href="#l73.102"></a><span id="l73.102">   }</span>
<a href="#l73.103"></a><span id="l73.103" class="difflineminus">-  </span>
<a href="#l73.104"></a><span id="l73.104" class="difflineplus">+</span>
<a href="#l73.105"></a><span id="l73.105"> }</span>
<a href="#l73.106"></a><span id="l73.106"> Bridge.prototype._describe = function (obj) {</span>
<a href="#l73.107"></a><span id="l73.107">   var response = {};</span>
<a href="#l73.108"></a><span id="l73.108">   if (obj == null) {</span>
<a href="#l73.109"></a><span id="l73.109">     var type = &quot;null&quot;;</span>
<a href="#l73.110"></a><span id="l73.110">   } else {</span>
<a href="#l73.111"></a><span id="l73.111">     var type = typeof(obj);</span>
<a href="#l73.112"></a><span id="l73.112">   }</span>
<a href="#l73.113"></a><span id="l73.113" class="difflineat">@@ -185,17 +185,17 @@ Bridge.prototype.execFunction = function</span>
<a href="#l73.114"></a><span id="l73.114">   } catch(e) {</span>
<a href="#l73.115"></a><span id="l73.115">     if (typeof(e) == &quot;string&quot;) {</span>
<a href="#l73.116"></a><span id="l73.116">       var exception = e;</span>
<a href="#l73.117"></a><span id="l73.117">     } else {</span>
<a href="#l73.118"></a><span id="l73.118">       var exception = {'name':e.name, 'message':e.message};</span>
<a href="#l73.119"></a><span id="l73.119">     }</span>
<a href="#l73.120"></a><span id="l73.120">     this.session.encodeOut({'result':false, 'exception':exception, 'uuid':uuid});</span>
<a href="#l73.121"></a><span id="l73.121">     var result = true;</span>
<a href="#l73.122"></a><span id="l73.122" class="difflineminus">-  }  </span>
<a href="#l73.123"></a><span id="l73.123" class="difflineplus">+  }</span>
<a href="#l73.124"></a><span id="l73.124">   if (data != undefined) {</span>
<a href="#l73.125"></a><span id="l73.125">     this.set(uuid, data);</span>
<a href="#l73.126"></a><span id="l73.126">   } else if ( result == true) {</span>
<a href="#l73.127"></a><span id="l73.127">     this.session.encodeOut({'result':true, 'data':null, 'uuid':uuid});</span>
<a href="#l73.128"></a><span id="l73.128">   } else {</span>
<a href="#l73.129"></a><span id="l73.129">     log(&quot;jsbridge threw unknown data in execFunc&quot;);</span>
<a href="#l73.130"></a><span id="l73.130">     throw 'JSBridge unknown data in execFunc';</span>
<a href="#l73.131"></a><span id="l73.131">   }</span>
<a href="#l73.132"></a><span id="l73.132" class="difflineat">@@ -204,41 +204,41 @@ Bridge.prototype.execFunction = function</span>
<a href="#l73.133"></a><span id="l73.133"> backstage = this;</span>
<a href="#l73.134"></a><span id="l73.134"> </span>
<a href="#l73.135"></a><span id="l73.135"> function Session (transport) {</span>
<a href="#l73.136"></a><span id="l73.136">   this.transpart = transport;</span>
<a href="#l73.137"></a><span id="l73.137">   this.sandbox = Components.utils.Sandbox(backstage);</span>
<a href="#l73.138"></a><span id="l73.138">   this.sandbox.bridge = new Bridge(this);</span>
<a href="#l73.139"></a><span id="l73.139">   this.sandbox.openPreferences = hwindow.openPreferences;</span>
<a href="#l73.140"></a><span id="l73.140">   try {</span>
<a href="#l73.141"></a><span id="l73.141" class="difflineminus">-      this.outputstream = transport.openOutputStream(Ci.nsITransport.OPEN_BLOCKING, 0, 0);	</span>
<a href="#l73.142"></a><span id="l73.142" class="difflineplus">+      this.outputstream = transport.openOutputStream(Ci.nsITransport.OPEN_BLOCKING, 0, 0);</span>
<a href="#l73.143"></a><span id="l73.143">       this.outstream = Cc['@mozilla.org/intl/converter-output-stream;1']</span>
<a href="#l73.144"></a><span id="l73.144">                     .createInstance(Ci.nsIConverterOutputStream);</span>
<a href="#l73.145"></a><span id="l73.145">       this.outstream.init(this.outputstream, 'UTF-8', BUFFER_SIZE,</span>
<a href="#l73.146"></a><span id="l73.146">                     Ci.nsIConverterOutputStream.DEFAULT_REPLACEMENT_CHARACTER);</span>
<a href="#l73.147"></a><span id="l73.147">       this.stream = transport.openInputStream(0, 0, 0);</span>
<a href="#l73.148"></a><span id="l73.148">       this.instream = Cc['@mozilla.org/intl/converter-input-stream;1']</span>
<a href="#l73.149"></a><span id="l73.149">           .createInstance(Ci.nsIConverterInputStream);</span>
<a href="#l73.150"></a><span id="l73.150">       this.instream.init(this.stream, 'UTF-8', BUFFER_SIZE,</span>
<a href="#l73.151"></a><span id="l73.151">                     Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);</span>
<a href="#l73.152"></a><span id="l73.152">   } catch(e) {</span>
<a href="#l73.153"></a><span id="l73.153">       log('jsbridge: Error: ' + e);</span>
<a href="#l73.154"></a><span id="l73.154">   }</span>
<a href="#l73.155"></a><span id="l73.155">   log('jsbridge: Accepted connection.');</span>
<a href="#l73.156"></a><span id="l73.156" class="difflineminus">-  </span>
<a href="#l73.157"></a><span id="l73.157" class="difflineplus">+</span>
<a href="#l73.158"></a><span id="l73.158">   this.pump = Cc['@mozilla.org/network/input-stream-pump;1']</span>
<a href="#l73.159"></a><span id="l73.159">       .createInstance(Ci.nsIInputStreamPump);</span>
<a href="#l73.160"></a><span id="l73.160">   this.pump.init(this.stream, -1, -1, 0, 0, false);</span>
<a href="#l73.161"></a><span id="l73.161">   this.pump.asyncRead(new AsyncRead(this), null);</span>
<a href="#l73.162"></a><span id="l73.162"> }</span>
<a href="#l73.163"></a><span id="l73.163"> Session.prototype.onOutput = function(string) {</span>
<a href="#l73.164"></a><span id="l73.164">   log('jsbridge: write: '+string)</span>
<a href="#l73.165"></a><span id="l73.165">   if (typeof(string) != &quot;string&quot;) {</span>
<a href="#l73.166"></a><span id="l73.166">     throw &quot;This is not a string&quot;</span>
<a href="#l73.167"></a><span id="l73.167" class="difflineminus">-  } </span>
<a href="#l73.168"></a><span id="l73.168" class="difflineplus">+  }</span>
<a href="#l73.169"></a><span id="l73.169">   try {</span>
<a href="#l73.170"></a><span id="l73.170">     var stroffset = 0;</span>
<a href="#l73.171"></a><span id="l73.171">     do {</span>
<a href="#l73.172"></a><span id="l73.172">       var parts = '';</span>
<a href="#l73.173"></a><span id="l73.173">       // Handle the case where we are writing something larger than our buffer</span>
<a href="#l73.174"></a><span id="l73.174">       if (string.length &gt; BUFFER_SIZE) {</span>
<a href="#l73.175"></a><span id="l73.175">         log(&quot;jsbridge: onOutput: writing data stroffset is: &quot; + stroffset + &quot; string.length is: &quot; + string.length);</span>
<a href="#l73.176"></a><span id="l73.176">         parts = string.slice(stroffset, stroffset + BUFFER_SIZE);</span>
<a href="#l73.177"></a><span id="l73.177" class="difflineat">@@ -272,17 +272,17 @@ Session.prototype.encodeOut = function (</span>
<a href="#l73.178"></a><span id="l73.178">   } catch(e) {</span>
<a href="#l73.179"></a><span id="l73.179">     if (typeof(e) == &quot;string&quot;) {</span>
<a href="#l73.180"></a><span id="l73.180">       var exception = e;</span>
<a href="#l73.181"></a><span id="l73.181">     } else {</span>
<a href="#l73.182"></a><span id="l73.182">       var exception = {'name':e.name, 'message':e.message};</span>
<a href="#l73.183"></a><span id="l73.183">     }</span>
<a href="#l73.184"></a><span id="l73.184">     this.onOutput(jsonEncode({'result':false, 'exception':exception}));</span>
<a href="#l73.185"></a><span id="l73.185">   }</span>
<a href="#l73.186"></a><span id="l73.186" class="difflineminus">-  </span>
<a href="#l73.187"></a><span id="l73.187" class="difflineplus">+</span>
<a href="#l73.188"></a><span id="l73.188"> }</span>
<a href="#l73.189"></a><span id="l73.189"> Session.prototype.receive = function(data) {</span>
<a href="#l73.190"></a><span id="l73.190">   Components.utils.evalInSandbox(data, this.sandbox);</span>
<a href="#l73.191"></a><span id="l73.191"> }</span>
<a href="#l73.192"></a><span id="l73.192"> </span>
<a href="#l73.193"></a><span id="l73.193"> var sessions = {</span>
<a href="#l73.194"></a><span id="l73.194">     _list: [],</span>
<a href="#l73.195"></a><span id="l73.195">     add: function(session) {</span>
<a href="#l73.196"></a><span id="l73.196" class="difflineat">@@ -309,17 +309,17 @@ function Server (port) {</span>
<a href="#l73.197"></a><span id="l73.197"> Server.prototype.start = function () {</span>
<a href="#l73.198"></a><span id="l73.198">   try {</span>
<a href="#l73.199"></a><span id="l73.199">     this.serv = Cc['@mozilla.org/network/server-socket;1']</span>
<a href="#l73.200"></a><span id="l73.200">         .createInstance(Ci.nsIServerSocket);</span>
<a href="#l73.201"></a><span id="l73.201">     this.serv.init(this.port, true, -1);</span>
<a href="#l73.202"></a><span id="l73.202">     this.serv.asyncListen(this);</span>
<a href="#l73.203"></a><span id="l73.203">   } catch(e) {</span>
<a href="#l73.204"></a><span id="l73.204">     log('jsbridge: Exception: ' + e);</span>
<a href="#l73.205"></a><span id="l73.205" class="difflineminus">-  }    </span>
<a href="#l73.206"></a><span id="l73.206" class="difflineplus">+  }</span>
<a href="#l73.207"></a><span id="l73.207"> }</span>
<a href="#l73.208"></a><span id="l73.208"> Server.prototype.stop = function () {</span>
<a href="#l73.209"></a><span id="l73.209">     log('jsbridge: Closing...');</span>
<a href="#l73.210"></a><span id="l73.210">     this.serv.close();</span>
<a href="#l73.211"></a><span id="l73.211">     this.sessions.quit();</span>
<a href="#l73.212"></a><span id="l73.212">     this.serv = undefined;</span>
<a href="#l73.213"></a><span id="l73.213"> }</span>
<a href="#l73.214"></a><span id="l73.214"> Server.prototype.onStopListening = function (serv, status) {</span>
<a href="#l73.215"></a><span id="l73.215" class="difflineat">@@ -328,17 +328,17 @@ Server.prototype.onStopListening = funct</span>
<a href="#l73.216"></a><span id="l73.216"> Server.prototype.onSocketAccepted = function (serv, transport) {</span>
<a href="#l73.217"></a><span id="l73.217">   session = new Session(transport)</span>
<a href="#l73.218"></a><span id="l73.218">   sessions.add(session);</span>
<a href="#l73.219"></a><span id="l73.219"> }</span>
<a href="#l73.220"></a><span id="l73.220"> </span>
<a href="#l73.221"></a><span id="l73.221"> function log(msg) {</span>
<a href="#l73.222"></a><span id="l73.222">   if (DEBUG_ON) {</span>
<a href="#l73.223"></a><span id="l73.223">     dump(msg + '\n');</span>
<a href="#l73.224"></a><span id="l73.224" class="difflineminus">-  } </span>
<a href="#l73.225"></a><span id="l73.225" class="difflineplus">+  }</span>
<a href="#l73.226"></a><span id="l73.226"> }</span>
<a href="#l73.227"></a><span id="l73.227"> </span>
<a href="#l73.228"></a><span id="l73.228"> function startServer(port) {</span>
<a href="#l73.229"></a><span id="l73.229">   var server = new Server(port)</span>
<a href="#l73.230"></a><span id="l73.230">   server.start()</span>
<a href="#l73.231"></a><span id="l73.231"> }</span>
<a href="#l73.232"></a><span id="l73.232"> </span>
<a href="#l73.233"></a><span id="l73.233"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/chrome.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/chrome.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -19,17 +19,17 @@ function fillTooltip(tipElement) {</span>
<a href="#l74.4"></a><span id="l74.4">         direction = defView.getComputedStyle(tipElement, &quot;&quot;)</span>
<a href="#l74.5"></a><span id="l74.5">           .getPropertyValue(&quot;direction&quot;);</span>
<a href="#l74.6"></a><span id="l74.6">       }</span>
<a href="#l74.7"></a><span id="l74.7">       tipElement = tipElement.parentNode;</span>
<a href="#l74.8"></a><span id="l74.8">     }</span>
<a href="#l74.9"></a><span id="l74.9"> </span>
<a href="#l74.10"></a><span id="l74.10">     var tipNode = document.getElementById(&quot;mozmill-tooltip&quot;);</span>
<a href="#l74.11"></a><span id="l74.11">     tipNode.style.direction = direction;</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">-  </span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+</span>
<a href="#l74.14"></a><span id="l74.14">     for each (var t in [titleText, XLinkTitleText]) {</span>
<a href="#l74.15"></a><span id="l74.15">       if (t &amp;&amp; /\S/.test(t)) {</span>
<a href="#l74.16"></a><span id="l74.16">         // Per HTML 4.01 6.2 (CDATA section), literal CRs and tabs should be</span>
<a href="#l74.17"></a><span id="l74.17">         // replaced with spaces, and LFs should be removed entirely</span>
<a href="#l74.18"></a><span id="l74.18">         t = t.replace(/[\r\t]/g, ' ');</span>
<a href="#l74.19"></a><span id="l74.19">         t = t.replace(/\n/g, '');</span>
<a href="#l74.20"></a><span id="l74.20"> </span>
<a href="#l74.21"></a><span id="l74.21">         tipNode.setAttribute(&quot;label&quot;, t);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/dx.js</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/dx.js</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -1,44 +1,44 @@</span>
<a href="#l75.4"></a><span id="l75.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l75.5"></a><span id="l75.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l75.6"></a><span id="l75.6" class="difflineminus">-// </span>
<a href="#l75.7"></a><span id="l75.7" class="difflineplus">+//</span>
<a href="#l75.8"></a><span id="l75.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l75.9"></a><span id="l75.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l75.10"></a><span id="l75.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l75.11"></a><span id="l75.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">-// </span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+//</span>
<a href="#l75.14"></a><span id="l75.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l75.15"></a><span id="l75.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l75.16"></a><span id="l75.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l75.17"></a><span id="l75.17"> // License.</span>
<a href="#l75.18"></a><span id="l75.18" class="difflineminus">-// </span>
<a href="#l75.19"></a><span id="l75.19" class="difflineplus">+//</span>
<a href="#l75.20"></a><span id="l75.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l75.21"></a><span id="l75.21" class="difflineminus">-// </span>
<a href="#l75.22"></a><span id="l75.22" class="difflineplus">+//</span>
<a href="#l75.23"></a><span id="l75.23"> // The Initial Developer of the Original Code is</span>
<a href="#l75.24"></a><span id="l75.24"> // Adam Christian.</span>
<a href="#l75.25"></a><span id="l75.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l75.26"></a><span id="l75.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l75.27"></a><span id="l75.27" class="difflineminus">-// </span>
<a href="#l75.28"></a><span id="l75.28" class="difflineplus">+//</span>
<a href="#l75.29"></a><span id="l75.29"> // Contributor(s):</span>
<a href="#l75.30"></a><span id="l75.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l75.31"></a><span id="l75.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l75.32"></a><span id="l75.32" class="difflineminus">-// </span>
<a href="#l75.33"></a><span id="l75.33" class="difflineplus">+//</span>
<a href="#l75.34"></a><span id="l75.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l75.35"></a><span id="l75.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l75.36"></a><span id="l75.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l75.37"></a><span id="l75.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l75.38"></a><span id="l75.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l75.39"></a><span id="l75.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l75.40"></a><span id="l75.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l75.41"></a><span id="l75.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l75.42"></a><span id="l75.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l75.43"></a><span id="l75.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l75.44"></a><span id="l75.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l75.45"></a><span id="l75.45" class="difflineminus">-// </span>
<a href="#l75.46"></a><span id="l75.46" class="difflineplus">+//</span>
<a href="#l75.47"></a><span id="l75.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l75.48"></a><span id="l75.48"> </span>
<a href="#l75.49"></a><span id="l75.49"> var inspection = {}; Components.utils.import('resource://mozmill/modules/inspection.js', inspection);</span>
<a href="#l75.50"></a><span id="l75.50"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l75.51"></a><span id="l75.51"> </span>
<a href="#l75.52"></a><span id="l75.52"> var DomInspectorConnector = function() {</span>
<a href="#l75.53"></a><span id="l75.53">   this.lastEvent = null;</span>
<a href="#l75.54"></a><span id="l75.54">   this.lastTime = null;</span>
<a href="#l75.55"></a><span id="l75.55" class="difflineat">@@ -53,36 +53,36 @@ DomInspectorConnector.prototype.grab = f</span>
<a href="#l75.56"></a><span id="l75.56"> DomInspectorConnector.prototype.changeClick = function(e) {</span>
<a href="#l75.57"></a><span id="l75.57">   if (this.on){</span>
<a href="#l75.58"></a><span id="l75.58">     this.dxOff()</span>
<a href="#l75.59"></a><span id="l75.59">     this.dxOn();</span>
<a href="#l75.60"></a><span id="l75.60">   }</span>
<a href="#l75.61"></a><span id="l75.61"> }</span>
<a href="#l75.62"></a><span id="l75.62"> </span>
<a href="#l75.63"></a><span id="l75.63"> DomInspectorConnector.prototype.evtDispatch = function(e) {</span>
<a href="#l75.64"></a><span id="l75.64" class="difflineminus">-  </span>
<a href="#l75.65"></a><span id="l75.65" class="difflineplus">+</span>
<a href="#l75.66"></a><span id="l75.66">   //if this function was called less than a second ago, exit</span>
<a href="#l75.67"></a><span id="l75.67">   //this should solve the flickering problem</span>
<a href="#l75.68"></a><span id="l75.68">   var currentTime = new Date();</span>
<a href="#l75.69"></a><span id="l75.69">   var newTime = currentTime.getTime();</span>
<a href="#l75.70"></a><span id="l75.70" class="difflineminus">-  </span>
<a href="#l75.71"></a><span id="l75.71" class="difflineplus">+</span>
<a href="#l75.72"></a><span id="l75.72">   if (this.lastTime != null){</span>
<a href="#l75.73"></a><span id="l75.73">     var timeDiff = newTime - this.lastTime;</span>
<a href="#l75.74"></a><span id="l75.74">     this.lastTime = newTime;</span>
<a href="#l75.75"></a><span id="l75.75" class="difflineminus">-        </span>
<a href="#l75.76"></a><span id="l75.76" class="difflineplus">+</span>
<a href="#l75.77"></a><span id="l75.77">     if (timeDiff &lt; 2){</span>
<a href="#l75.78"></a><span id="l75.78">       this.lastEvent = e;</span>
<a href="#l75.79"></a><span id="l75.79">       return;</span>
<a href="#l75.80"></a><span id="l75.80">     }</span>
<a href="#l75.81"></a><span id="l75.81">   } else { this.lastTime = newTime; }</span>
<a href="#l75.82"></a><span id="l75.82" class="difflineminus">-  </span>
<a href="#l75.83"></a><span id="l75.83" class="difflineplus">+</span>
<a href="#l75.84"></a><span id="l75.84">   //Fix the scroll bar exception Bug 472124</span>
<a href="#l75.85"></a><span id="l75.85">   try { var i = inspection.inspectElement(e); }</span>
<a href="#l75.86"></a><span id="l75.86">   catch(err){ return; }</span>
<a href="#l75.87"></a><span id="l75.87" class="difflineminus">-  </span>
<a href="#l75.88"></a><span id="l75.88" class="difflineplus">+</span>
<a href="#l75.89"></a><span id="l75.89">   var dxC = i.controllerText;</span>
<a href="#l75.90"></a><span id="l75.90">   var dxE = i.elementText;</span>
<a href="#l75.91"></a><span id="l75.91">   var dxV = String(i.validation);</span>
<a href="#l75.92"></a><span id="l75.92"> </span>
<a href="#l75.93"></a><span id="l75.93">   document.getElementById('dxController').innerHTML = dxC;</span>
<a href="#l75.94"></a><span id="l75.94">   document.getElementById('dxValidation').innerHTML = dxV;</span>
<a href="#l75.95"></a><span id="l75.95">   document.getElementById('dxElement').innerHTML = dxE;</span>
<a href="#l75.96"></a><span id="l75.96"> </span>
<a href="#l75.97"></a><span id="l75.97" class="difflineat">@@ -140,30 +140,30 @@ DomInspectorConnector.prototype.dxOff = </span>
<a href="#l75.98"></a><span id="l75.98">   this.on = false;</span>
<a href="#l75.99"></a><span id="l75.99">   $(&quot;#dxToggle&quot;).text(&quot;Start&quot;);</span>
<a href="#l75.100"></a><span id="l75.100">   $(&quot;#dxCopy&quot;).show();</span>
<a href="#l75.101"></a><span id="l75.101"> </span>
<a href="#l75.102"></a><span id="l75.102">   //try to cleanup left over outlines</span>
<a href="#l75.103"></a><span id="l75.103">   if (this.lastEvent){</span>
<a href="#l75.104"></a><span id="l75.104">     this.lastEvent.target.style.outline = &quot;&quot;;</span>
<a href="#l75.105"></a><span id="l75.105">   }</span>
<a href="#l75.106"></a><span id="l75.106" class="difflineminus">-  </span>
<a href="#l75.107"></a><span id="l75.107" class="difflineplus">+</span>
<a href="#l75.108"></a><span id="l75.108">   for each(win in utils.getWindows()) {</span>
<a href="#l75.109"></a><span id="l75.109">     this.dxRecursiveUnBind(win, 'click');</span>
<a href="#l75.110"></a><span id="l75.110">   }</span>
<a href="#l75.111"></a><span id="l75.111" class="difflineminus">-  </span>
<a href="#l75.112"></a><span id="l75.112" class="difflineplus">+</span>
<a href="#l75.113"></a><span id="l75.113">   for each(win in utils.getWindows()) {</span>
<a href="#l75.114"></a><span id="l75.114">     this.dxRecursiveUnBind(win, 'dblclick');</span>
<a href="#l75.115"></a><span id="l75.115">   }</span>
<a href="#l75.116"></a><span id="l75.116" class="difflineminus">-  </span>
<a href="#l75.117"></a><span id="l75.117" class="difflineplus">+</span>
<a href="#l75.118"></a><span id="l75.118">   var observerService =</span>
<a href="#l75.119"></a><span id="l75.119">     Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l75.120"></a><span id="l75.120">       .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l75.121"></a><span id="l75.121"> </span>
<a href="#l75.122"></a><span id="l75.122" class="difflineminus">-  try { </span>
<a href="#l75.123"></a><span id="l75.123" class="difflineplus">+  try {</span>
<a href="#l75.124"></a><span id="l75.124">     observerService.removeObserver(this.observer, &quot;toplevel-window-ready&quot;);</span>
<a href="#l75.125"></a><span id="l75.125">   } catch(err){}</span>
<a href="#l75.126"></a><span id="l75.126"> };</span>
<a href="#l75.127"></a><span id="l75.127"> </span>
<a href="#l75.128"></a><span id="l75.128"> DomInspectorConnector.prototype.getFoc = function(e){</span>
<a href="#l75.129"></a><span id="l75.129">   MozMilldx.dxOff();</span>
<a href="#l75.130"></a><span id="l75.130">   e.target.style.outline = &quot;&quot;;</span>
<a href="#l75.131"></a><span id="l75.131">   e.stopPropagation();</span>
<a href="#l75.132"></a><span id="l75.132" class="difflineat">@@ -182,23 +182,23 @@ DomInspectorConnector.prototype.clipCopy</span>
<a href="#l75.133"></a><span id="l75.133">    }</span>
<a href="#l75.134"></a><span id="l75.134">    else if (e.altKey &amp;&amp; e.shiftKey &amp;&amp; (e.charCode == 199)){</span>
<a href="#l75.135"></a><span id="l75.135">      copyToClipboard($('#dxElement')[0].innerHTML + ' '+$('#dxValidation')[0].innerHTML + ' ' + $('#dxController')[0].innerHTML);</span>
<a href="#l75.136"></a><span id="l75.136">    }</span>
<a href="#l75.137"></a><span id="l75.137"> }</span>
<a href="#l75.138"></a><span id="l75.138"> </span>
<a href="#l75.139"></a><span id="l75.139"> //Recursively bind to all the iframes and frames within</span>
<a href="#l75.140"></a><span id="l75.140"> DomInspectorConnector.prototype.dxRecursiveBind = function(frame, clickMethod) {</span>
<a href="#l75.141"></a><span id="l75.141" class="difflineminus">-  </span>
<a href="#l75.142"></a><span id="l75.142" class="difflineplus">+</span>
<a href="#l75.143"></a><span id="l75.143">   frame.addEventListener('mouseover', this.evtDispatch, true);</span>
<a href="#l75.144"></a><span id="l75.144">   frame.addEventListener('mouseout', this.evtDispatch, true);</span>
<a href="#l75.145"></a><span id="l75.145">   frame.addEventListener(clickMethod, this.getFoc, true);</span>
<a href="#l75.146"></a><span id="l75.146">   frame.addEventListener('keypress', this.clipCopy, true);</span>
<a href="#l75.147"></a><span id="l75.147" class="difflineminus">-  </span>
<a href="#l75.148"></a><span id="l75.148" class="difflineminus">-  </span>
<a href="#l75.149"></a><span id="l75.149" class="difflineplus">+</span>
<a href="#l75.150"></a><span id="l75.150" class="difflineplus">+</span>
<a href="#l75.151"></a><span id="l75.151">   var iframeCount = frame.window.frames.length;</span>
<a href="#l75.152"></a><span id="l75.152">   var iframeArray = frame.window.frames;</span>
<a href="#l75.153"></a><span id="l75.153"> </span>
<a href="#l75.154"></a><span id="l75.154">   for (var i = 0; i &lt; iframeCount; i++)</span>
<a href="#l75.155"></a><span id="l75.155">     this.dxRecursiveBind(iframeArray[i], clickMethod);</span>
<a href="#l75.156"></a><span id="l75.156"> }</span>
<a href="#l75.157"></a><span id="l75.157"> </span>
<a href="#l75.158"></a><span id="l75.158"> //Recursively bind to all the iframes and frames within</span>
<a href="#l75.159"></a><span id="l75.159" class="difflineat">@@ -207,17 +207,17 @@ DomInspectorConnector.prototype.dxRecurs</span>
<a href="#l75.160"></a><span id="l75.160">     frame.removeEventListener('mouseover', this.evtDispatch, true);</span>
<a href="#l75.161"></a><span id="l75.161">     frame.removeEventListener('mouseout', this.evtDispatch, true);</span>
<a href="#l75.162"></a><span id="l75.162">     frame.removeEventListener(clickMethod, this.getFoc, true);</span>
<a href="#l75.163"></a><span id="l75.163">     frame.removeEventListener('keypress', this.clipCopy, true);</span>
<a href="#l75.164"></a><span id="l75.164">   }</span>
<a href="#l75.165"></a><span id="l75.165">   catch(e) {</span>
<a href="#l75.166"></a><span id="l75.166">     // don't want to prevent the rest of the frames from removing listeners</span>
<a href="#l75.167"></a><span id="l75.167">   }</span>
<a href="#l75.168"></a><span id="l75.168" class="difflineminus">-  </span>
<a href="#l75.169"></a><span id="l75.169" class="difflineplus">+</span>
<a href="#l75.170"></a><span id="l75.170">   var iframeCount = frame.window.frames.length;</span>
<a href="#l75.171"></a><span id="l75.171">   var iframeArray = frame.window.frames;</span>
<a href="#l75.172"></a><span id="l75.172"> </span>
<a href="#l75.173"></a><span id="l75.173">   for (var i = 0; i &lt; iframeCount; i++)</span>
<a href="#l75.174"></a><span id="l75.174">     this.dxRecursiveUnBind(iframeArray[i], clickMethod);</span>
<a href="#l75.175"></a><span id="l75.175"> }</span>
<a href="#l75.176"></a><span id="l75.176"> </span>
<a href="#l75.177"></a><span id="l75.177"> var MozMilldx = new DomInspectorConnector();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/editor/editor.js</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -118,17 +118,17 @@ var editor = {</span>
<a href="#l76.4"></a><span id="l76.4"> function editorTab(content, filename) {</span>
<a href="#l76.5"></a><span id="l76.5">   var elem = $(&quot;&lt;pre&gt;&lt;/pre&gt;&quot;).addClass(&quot;bespin&quot;).appendTo(&quot;#editors&quot;);</span>
<a href="#l76.6"></a><span id="l76.6">   elem.val(content);</span>
<a href="#l76.7"></a><span id="l76.7">   var bespinElement = elem.get(0);</span>
<a href="#l76.8"></a><span id="l76.8">   var editorObject = this;</span>
<a href="#l76.9"></a><span id="l76.9"> </span>
<a href="#l76.10"></a><span id="l76.10">   bespin.useBespin(bespinElement, {</span>
<a href="#l76.11"></a><span id="l76.11">     settings: {&quot;tabstop&quot;: 4},</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-    syntax: &quot;js&quot;, </span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+    syntax: &quot;js&quot;,</span>
<a href="#l76.14"></a><span id="l76.14">     stealFocus: true})</span>
<a href="#l76.15"></a><span id="l76.15">   .then(function(env) {</span>
<a href="#l76.16"></a><span id="l76.16">     editorObject.editorEnv = env;</span>
<a href="#l76.17"></a><span id="l76.17">     editorObject.editor = env.editor;</span>
<a href="#l76.18"></a><span id="l76.18">     env.editor.textChanged.add(editor.onFileChanged);</span>
<a href="#l76.19"></a><span id="l76.19">     editor.switchTab();</span>
<a href="#l76.20"></a><span id="l76.20">     env.settings.set(&quot;fontsize&quot;, 13);</span>
<a href="#l76.21"></a><span id="l76.21">   });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/inspector.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/inspector.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -14,17 +14,17 @@ var showOptionDialog = function(){</span>
<a href="#l77.4"></a><span id="l77.4">   $(&quot;#optionDialog&quot;).dialog(&quot;open&quot;);</span>
<a href="#l77.5"></a><span id="l77.5"> }</span>
<a href="#l77.6"></a><span id="l77.6"> </span>
<a href="#l77.7"></a><span id="l77.7"> var showHelpDialog = function(){</span>
<a href="#l77.8"></a><span id="l77.8">   $(&quot;#helpDialog&quot;).dialog(&quot;open&quot;);</span>
<a href="#l77.9"></a><span id="l77.9"> }</span>
<a href="#l77.10"></a><span id="l77.10"> </span>
<a href="#l77.11"></a><span id="l77.11"> var showRecordDialog = function(){</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-  $(&quot;#tabs&quot;).tabs().tabs(&quot;select&quot;, 0); </span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+  $(&quot;#tabs&quot;).tabs().tabs(&quot;select&quot;, 0);</span>
<a href="#l77.14"></a><span id="l77.14">   $(&quot;#recordDialog&quot;).dialog(&quot;open&quot;);</span>
<a href="#l77.15"></a><span id="l77.15">   MozMillrec.on();</span>
<a href="#l77.16"></a><span id="l77.16">   $(&quot;#recordDialog&quot;).dialog().parents(&quot;.ui-dialog:first&quot;).find(&quot;.ui-dialog-buttonpane button&quot;)[1].innerHTML = &quot;Stop&quot;;</span>
<a href="#l77.17"></a><span id="l77.17"> }</span>
<a href="#l77.18"></a><span id="l77.18"> </span>
<a href="#l77.19"></a><span id="l77.19"> //Align mozmill to all the other open windows in a way that makes it usable</span>
<a href="#l77.20"></a><span id="l77.20"> var align = function(){</span>
<a href="#l77.21"></a><span id="l77.21">   var enumerator = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l77.22"></a><span id="l77.22" class="difflineat">@@ -37,27 +37,27 @@ var align = function(){</span>
<a href="#l77.23"></a><span id="l77.23">       //move to top left corner</span>
<a href="#l77.24"></a><span id="l77.24">       win.screenY = 0;</span>
<a href="#l77.25"></a><span id="l77.25">       win.screenX = 0;</span>
<a href="#l77.26"></a><span id="l77.26"> </span>
<a href="#l77.27"></a><span id="l77.27">       //make only browser windows big</span>
<a href="#l77.28"></a><span id="l77.28">       if (wintype == &quot;navigator:browser&quot;){</span>
<a href="#l77.29"></a><span id="l77.29">         var width = window.screen.availWidth/2.5;</span>
<a href="#l77.30"></a><span id="l77.30">         var height = window.screen.availHeight;</span>
<a href="#l77.31"></a><span id="l77.31" class="difflineminus">-        win.resizeTo((window.screen.availWidth - width), window.screen.availHeight);        </span>
<a href="#l77.32"></a><span id="l77.32" class="difflineplus">+        win.resizeTo((window.screen.availWidth - width), window.screen.availHeight);</span>
<a href="#l77.33"></a><span id="l77.33">       }</span>
<a href="#l77.34"></a><span id="l77.34">     }</span>
<a href="#l77.35"></a><span id="l77.35">     else {</span>
<a href="#l77.36"></a><span id="l77.36">       var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l77.37"></a><span id="l77.37">                  .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l77.38"></a><span id="l77.38">       var latestbrowser = wm.getMostRecentWindow('navigator:browser');</span>
<a href="#l77.39"></a><span id="l77.39" class="difflineminus">-      </span>
<a href="#l77.40"></a><span id="l77.40" class="difflineplus">+</span>
<a href="#l77.41"></a><span id="l77.41">       //if there is no most recent browser window, use whatever window</span>
<a href="#l77.42"></a><span id="l77.42">       if (!latestbrowser){</span>
<a href="#l77.43"></a><span id="l77.43">         var latestbrowser = wm.getMostRecentWindow('');</span>
<a href="#l77.44"></a><span id="l77.44">       }</span>
<a href="#l77.45"></a><span id="l77.45" class="difflineminus">-      </span>
<a href="#l77.46"></a><span id="l77.46" class="difflineplus">+</span>
<a href="#l77.47"></a><span id="l77.47">       win.screenX = latestbrowser.innerWidth;</span>
<a href="#l77.48"></a><span id="l77.48">       win.screenY = 0;</span>
<a href="#l77.49"></a><span id="l77.49">     }</span>
<a href="#l77.50"></a><span id="l77.50" class="difflineminus">-  }  </span>
<a href="#l77.51"></a><span id="l77.51" class="difflineplus">+  }</span>
<a href="#l77.52"></a><span id="l77.52">     return true;</span>
<a href="#l77.53"></a><span id="l77.53"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/jquery/fg.menu.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -1,411 +1,411 @@</span>
<a href="#l78.4"></a><span id="l78.4" class="difflineminus">-/*-------------------------------------------------------------------- </span>
<a href="#l78.5"></a><span id="l78.5" class="difflineplus">+/*--------------------------------------------------------------------</span>
<a href="#l78.6"></a><span id="l78.6"> Scripts for creating and manipulating custom menus based on standard &lt;ul&gt; markup</span>
<a href="#l78.7"></a><span id="l78.7"> Version: 3.0, 03.31.2009</span>
<a href="#l78.8"></a><span id="l78.8"> </span>
<a href="#l78.9"></a><span id="l78.9"> By: Maggie Costello Wachs (maggie@filamentgroup.com) and Scott Jehl (scott@filamentgroup.com)</span>
<a href="#l78.10"></a><span id="l78.10"> 	http://www.filamentgroup.com</span>
<a href="#l78.11"></a><span id="l78.11"> 	* reference articles: http://www.filamentgroup.com/lab/jquery_ipod_style_drilldown_menu/</span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">-		</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+</span>
<a href="#l78.14"></a><span id="l78.14"> Copyright (c) 2009 Filament Group</span>
<a href="#l78.15"></a><span id="l78.15"> Dual licensed under the MIT (filamentgroup.com/examples/mit-license.txt) and GPL (filamentgroup.com/examples/gpl-license.txt) licenses.</span>
<a href="#l78.16"></a><span id="l78.16"> --------------------------------------------------------------------*/</span>
<a href="#l78.17"></a><span id="l78.17"> </span>
<a href="#l78.18"></a><span id="l78.18"> </span>
<a href="#l78.19"></a><span id="l78.19"> var allUIMenus = [];</span>
<a href="#l78.20"></a><span id="l78.20"> </span>
<a href="#l78.21"></a><span id="l78.21"> $.fn.menu = function(options){</span>
<a href="#l78.22"></a><span id="l78.22"> 	var caller = this;</span>
<a href="#l78.23"></a><span id="l78.23"> 	var options = options;</span>
<a href="#l78.24"></a><span id="l78.24" class="difflineminus">-	var m = new Menu(caller, options);	</span>
<a href="#l78.25"></a><span id="l78.25" class="difflineplus">+	var m = new Menu(caller, options);</span>
<a href="#l78.26"></a><span id="l78.26"> 	allUIMenus.push(m);</span>
<a href="#l78.27"></a><span id="l78.27" class="difflineminus">-	</span>
<a href="#l78.28"></a><span id="l78.28" class="difflineplus">+</span>
<a href="#l78.29"></a><span id="l78.29"> 	$(this)</span>
<a href="#l78.30"></a><span id="l78.30"> 	.mousedown(function(){</span>
<a href="#l78.31"></a><span id="l78.31"> 		if (!m.menuOpen) { m.showLoading(); };</span>
<a href="#l78.32"></a><span id="l78.32" class="difflineminus">-	})	</span>
<a href="#l78.33"></a><span id="l78.33" class="difflineplus">+	})</span>
<a href="#l78.34"></a><span id="l78.34"> 	.click(function(){</span>
<a href="#l78.35"></a><span id="l78.35"> 		if (m.menuOpen == false) { m.showMenu(); }</span>
<a href="#l78.36"></a><span id="l78.36"> 		else { m.kill(); };</span>
<a href="#l78.37"></a><span id="l78.37"> 		return false;</span>
<a href="#l78.38"></a><span id="l78.38" class="difflineminus">-	});	</span>
<a href="#l78.39"></a><span id="l78.39" class="difflineplus">+	});</span>
<a href="#l78.40"></a><span id="l78.40"> };</span>
<a href="#l78.41"></a><span id="l78.41"> </span>
<a href="#l78.42"></a><span id="l78.42"> function Menu(caller, options){</span>
<a href="#l78.43"></a><span id="l78.43"> 	var menu = this;</span>
<a href="#l78.44"></a><span id="l78.44"> 	var caller = $(caller);</span>
<a href="#l78.45"></a><span id="l78.45"> 	var container = $('&lt;div class=&quot;fg-menu-container ui-widget ui-widget-content ui-corner-all&quot;&gt;'+options.content+'&lt;/div&gt;');</span>
<a href="#l78.46"></a><span id="l78.46" class="difflineminus">-	</span>
<a href="#l78.47"></a><span id="l78.47" class="difflineplus">+</span>
<a href="#l78.48"></a><span id="l78.48"> 	this.menuOpen = false;</span>
<a href="#l78.49"></a><span id="l78.49"> 	this.menuExists = false;</span>
<a href="#l78.50"></a><span id="l78.50"> </span>
<a href="#l78.51"></a><span id="l78.51">     caller.showMenu = this.showMenu; // for keyboard accessiblity</span>
<a href="#l78.52"></a><span id="l78.52" class="difflineminus">-	</span>
<a href="#l78.53"></a><span id="l78.53" class="difflineplus">+</span>
<a href="#l78.54"></a><span id="l78.54"> 	var options = jQuery.extend({</span>
<a href="#l78.55"></a><span id="l78.55"> 		content: null,</span>
<a href="#l78.56"></a><span id="l78.56"> 		width: 180, // width of menu container, must be set or passed in to calculate widths of child menus</span>
<a href="#l78.57"></a><span id="l78.57"> 		maxHeight: 180, // max height of menu (if a drilldown: height does not include breadcrumb)</span>
<a href="#l78.58"></a><span id="l78.58"> 		positionOpts: {</span>
<a href="#l78.59"></a><span id="l78.59" class="difflineminus">-			posX: 'left', </span>
<a href="#l78.60"></a><span id="l78.60" class="difflineplus">+			posX: 'left',</span>
<a href="#l78.61"></a><span id="l78.61"> 			posY: 'bottom',</span>
<a href="#l78.62"></a><span id="l78.62"> 			offsetX: 0,</span>
<a href="#l78.63"></a><span id="l78.63"> 			offsetY: 0,</span>
<a href="#l78.64"></a><span id="l78.64"> 			directionH: 'right',</span>
<a href="#l78.65"></a><span id="l78.65" class="difflineminus">-			directionV: 'down', </span>
<a href="#l78.66"></a><span id="l78.66" class="difflineminus">-			detectH: true, // do horizontal collision detection  </span>
<a href="#l78.67"></a><span id="l78.67" class="difflineplus">+			directionV: 'down',</span>
<a href="#l78.68"></a><span id="l78.68" class="difflineplus">+			detectH: true, // do horizontal collision detection</span>
<a href="#l78.69"></a><span id="l78.69"> 			detectV: true, // do vertical collision detection</span>
<a href="#l78.70"></a><span id="l78.70"> 			linkToFront: false</span>
<a href="#l78.71"></a><span id="l78.71"> 		},</span>
<a href="#l78.72"></a><span id="l78.72"> 		showSpeed: 200, // show/hide speed in milliseconds</span>
<a href="#l78.73"></a><span id="l78.73"> 		callerOnState: 'ui-state-active', // class to change the appearance of the link/button when the menu is showing</span>
<a href="#l78.74"></a><span id="l78.74"> 		loadingState: 'ui-state-loading', // class added to the link/button while the menu is created</span>
<a href="#l78.75"></a><span id="l78.75"> 		linkHover: 'ui-state-hover', // class for menu option hover state</span>
<a href="#l78.76"></a><span id="l78.76" class="difflineminus">-		linkHoverSecondary: 'li-hover', // alternate class, may be used for multi-level menus		</span>
<a href="#l78.77"></a><span id="l78.77" class="difflineplus">+		linkHoverSecondary: 'li-hover', // alternate class, may be used for multi-level menus</span>
<a href="#l78.78"></a><span id="l78.78"> 	// ----- multi-level menu defaults -----</span>
<a href="#l78.79"></a><span id="l78.79"> 		crossSpeed: 200, // cross-fade speed for multi-level menus</span>
<a href="#l78.80"></a><span id="l78.80"> 		crumbDefaultText: 'Choose an option:',</span>
<a href="#l78.81"></a><span id="l78.81"> 		backLink: true, // in the ipod-style menu: instead of breadcrumbs, show only a 'back' link</span>
<a href="#l78.82"></a><span id="l78.82"> 		backLinkText: 'Back',</span>
<a href="#l78.83"></a><span id="l78.83"> 		flyOut: false, // multi-level menus are ipod-style by default; this parameter overrides to make a flyout instead</span>
<a href="#l78.84"></a><span id="l78.84"> 		flyOutOnState: 'ui-state-default',</span>
<a href="#l78.85"></a><span id="l78.85"> 		nextMenuLink: 'ui-icon-triangle-1-e', // class to style the link (specifically, a span within the link) used in the multi-level menu to show the next level</span>
<a href="#l78.86"></a><span id="l78.86"> 		topLinkText: 'All',</span>
<a href="#l78.87"></a><span id="l78.87" class="difflineminus">-		nextCrumbLink: 'ui-icon-carat-1-e'	</span>
<a href="#l78.88"></a><span id="l78.88" class="difflineplus">+		nextCrumbLink: 'ui-icon-carat-1-e'</span>
<a href="#l78.89"></a><span id="l78.89"> 	}, options);</span>
<a href="#l78.90"></a><span id="l78.90" class="difflineminus">-	</span>
<a href="#l78.91"></a><span id="l78.91" class="difflineplus">+</span>
<a href="#l78.92"></a><span id="l78.92"> 	var killAllMenus = function(){</span>
<a href="#l78.93"></a><span id="l78.93"> 		$.each(allUIMenus, function(i){</span>
<a href="#l78.94"></a><span id="l78.94" class="difflineminus">-			if (allUIMenus[i].menuOpen) { allUIMenus[i].kill(); };	</span>
<a href="#l78.95"></a><span id="l78.95" class="difflineplus">+			if (allUIMenus[i].menuOpen) { allUIMenus[i].kill(); };</span>
<a href="#l78.96"></a><span id="l78.96"> 		});</span>
<a href="#l78.97"></a><span id="l78.97"> 	};</span>
<a href="#l78.98"></a><span id="l78.98" class="difflineminus">-	</span>
<a href="#l78.99"></a><span id="l78.99" class="difflineplus">+</span>
<a href="#l78.100"></a><span id="l78.100"> 	this.kill = function(){</span>
<a href="#l78.101"></a><span id="l78.101"> 		caller</span>
<a href="#l78.102"></a><span id="l78.102"> 			.removeClass(options.loadingState)</span>
<a href="#l78.103"></a><span id="l78.103"> 			.removeClass('fg-menu-open')</span>
<a href="#l78.104"></a><span id="l78.104" class="difflineminus">-			.removeClass(options.callerOnState);	</span>
<a href="#l78.105"></a><span id="l78.105" class="difflineminus">-		container.find('li').removeClass(options.linkHoverSecondary).find('a').removeClass(options.linkHover);		</span>
<a href="#l78.106"></a><span id="l78.106" class="difflineminus">-		if (options.flyOutOnState) { container.find('li a').removeClass(options.flyOutOnState); };	</span>
<a href="#l78.107"></a><span id="l78.107" class="difflineminus">-		if (options.callerOnState) { 	caller.removeClass(options.callerOnState); };			</span>
<a href="#l78.108"></a><span id="l78.108" class="difflineplus">+			.removeClass(options.callerOnState);</span>
<a href="#l78.109"></a><span id="l78.109" class="difflineplus">+		container.find('li').removeClass(options.linkHoverSecondary).find('a').removeClass(options.linkHover);</span>
<a href="#l78.110"></a><span id="l78.110" class="difflineplus">+		if (options.flyOutOnState) { container.find('li a').removeClass(options.flyOutOnState); };</span>
<a href="#l78.111"></a><span id="l78.111" class="difflineplus">+		if (options.callerOnState) { 	caller.removeClass(options.callerOnState); };</span>
<a href="#l78.112"></a><span id="l78.112"> 		if (container.is('.fg-menu-ipod')) { menu.resetDrilldownMenu(); };</span>
<a href="#l78.113"></a><span id="l78.113" class="difflineminus">-		if (container.is('.fg-menu-flyout')) { menu.resetFlyoutMenu(); };	</span>
<a href="#l78.114"></a><span id="l78.114" class="difflineminus">-		container.parent().hide();	</span>
<a href="#l78.115"></a><span id="l78.115" class="difflineplus">+		if (container.is('.fg-menu-flyout')) { menu.resetFlyoutMenu(); };</span>
<a href="#l78.116"></a><span id="l78.116" class="difflineplus">+		container.parent().hide();</span>
<a href="#l78.117"></a><span id="l78.117"> 		menu.menuOpen = false;</span>
<a href="#l78.118"></a><span id="l78.118"> 		$(document).unbind('click', killAllMenus);</span>
<a href="#l78.119"></a><span id="l78.119"> 		$(document).unbind('keydown');</span>
<a href="#l78.120"></a><span id="l78.120"> 	};</span>
<a href="#l78.121"></a><span id="l78.121" class="difflineminus">-	</span>
<a href="#l78.122"></a><span id="l78.122" class="difflineplus">+</span>
<a href="#l78.123"></a><span id="l78.123"> 	this.showLoading = function(){</span>
<a href="#l78.124"></a><span id="l78.124"> 		caller.addClass(options.loadingState);</span>
<a href="#l78.125"></a><span id="l78.125"> 	};</span>
<a href="#l78.126"></a><span id="l78.126"> </span>
<a href="#l78.127"></a><span id="l78.127"> 	this.showMenu = function(){</span>
<a href="#l78.128"></a><span id="l78.128"> 		killAllMenus();</span>
<a href="#l78.129"></a><span id="l78.129"> 		if (!menu.menuExists) { menu.create() };</span>
<a href="#l78.130"></a><span id="l78.130"> 		caller</span>
<a href="#l78.131"></a><span id="l78.131"> 			.addClass('fg-menu-open')</span>
<a href="#l78.132"></a><span id="l78.132"> 			.addClass(options.callerOnState);</span>
<a href="#l78.133"></a><span id="l78.133"> 		container.parent().show().click(function(){ menu.kill(); return false; });</span>
<a href="#l78.134"></a><span id="l78.134"> 		container.hide().slideDown(options.showSpeed).find('.fg-menu:eq(0)');</span>
<a href="#l78.135"></a><span id="l78.135"> 		menu.menuOpen = true;</span>
<a href="#l78.136"></a><span id="l78.136"> 		caller.removeClass(options.loadingState);</span>
<a href="#l78.137"></a><span id="l78.137"> 		$(document).click(killAllMenus);</span>
<a href="#l78.138"></a><span id="l78.138" class="difflineminus">-		</span>
<a href="#l78.139"></a><span id="l78.139" class="difflineplus">+</span>
<a href="#l78.140"></a><span id="l78.140"> 		// assign key events</span>
<a href="#l78.141"></a><span id="l78.141"> 		$(document).keydown(function(event){</span>
<a href="#l78.142"></a><span id="l78.142"> 			var e;</span>
<a href="#l78.143"></a><span id="l78.143"> 			if (event.which !=&quot;&quot;) { e = event.which; }</span>
<a href="#l78.144"></a><span id="l78.144"> 			else if (event.charCode != &quot;&quot;) { e = event.charCode; }</span>
<a href="#l78.145"></a><span id="l78.145"> 			else if (event.keyCode != &quot;&quot;) { e = event.keyCode; }</span>
<a href="#l78.146"></a><span id="l78.146" class="difflineminus">-			</span>
<a href="#l78.147"></a><span id="l78.147" class="difflineplus">+</span>
<a href="#l78.148"></a><span id="l78.148"> 			var menuType = ($(event.target).parents('div').is('.fg-menu-flyout')) ? 'flyout' : 'ipod' ;</span>
<a href="#l78.149"></a><span id="l78.149" class="difflineminus">-			</span>
<a href="#l78.150"></a><span id="l78.150" class="difflineplus">+</span>
<a href="#l78.151"></a><span id="l78.151"> 			switch(e) {</span>
<a href="#l78.152"></a><span id="l78.152" class="difflineminus">-				case 37: // left arrow </span>
<a href="#l78.153"></a><span id="l78.153" class="difflineplus">+				case 37: // left arrow</span>
<a href="#l78.154"></a><span id="l78.154"> 					if (menuType == 'flyout') {</span>
<a href="#l78.155"></a><span id="l78.155"> 						$(event.target).trigger('mouseout');</span>
<a href="#l78.156"></a><span id="l78.156"> 						if ($('.'+options.flyOutOnState).size() &gt; 0) { $('.'+options.flyOutOnState).trigger('mouseover'); };</span>
<a href="#l78.157"></a><span id="l78.157"> 					};</span>
<a href="#l78.158"></a><span id="l78.158" class="difflineminus">-					</span>
<a href="#l78.159"></a><span id="l78.159" class="difflineplus">+</span>
<a href="#l78.160"></a><span id="l78.160"> 					if (menuType == 'ipod') {</span>
<a href="#l78.161"></a><span id="l78.161"> 						$(event.target).trigger('mouseout');</span>
<a href="#l78.162"></a><span id="l78.162"> 						if ($('.fg-menu-footer').find('a').size() &gt; 0) { $('.fg-menu-footer').find('a').trigger('click'); };</span>
<a href="#l78.163"></a><span id="l78.163"> 						if ($('.fg-menu-header').find('a').size() &gt; 0) { $('.fg-menu-current-crumb').prev().find('a').trigger('click'); };</span>
<a href="#l78.164"></a><span id="l78.164"> 						if ($('.fg-menu-current').prev().is('.fg-menu-indicator')) {</span>
<a href="#l78.165"></a><span id="l78.165" class="difflineminus">-							$('.fg-menu-current').prev().trigger('mouseover');							</span>
<a href="#l78.166"></a><span id="l78.166" class="difflineminus">-						};						</span>
<a href="#l78.167"></a><span id="l78.167" class="difflineplus">+							$('.fg-menu-current').prev().trigger('mouseover');</span>
<a href="#l78.168"></a><span id="l78.168" class="difflineplus">+						};</span>
<a href="#l78.169"></a><span id="l78.169"> 					};</span>
<a href="#l78.170"></a><span id="l78.170"> 					return false;</span>
<a href="#l78.171"></a><span id="l78.171"> 					break;</span>
<a href="#l78.172"></a><span id="l78.172" class="difflineminus">-					</span>
<a href="#l78.173"></a><span id="l78.173" class="difflineminus">-				case 38: // up arrow </span>
<a href="#l78.174"></a><span id="l78.174" class="difflineminus">-					if ($(event.target).is('.' + options.linkHover)) {	</span>
<a href="#l78.175"></a><span id="l78.175" class="difflineminus">-						var prevLink = $(event.target).parent().prev().find('a:eq(0)');						</span>
<a href="#l78.176"></a><span id="l78.176" class="difflineplus">+</span>
<a href="#l78.177"></a><span id="l78.177" class="difflineplus">+				case 38: // up arrow</span>
<a href="#l78.178"></a><span id="l78.178" class="difflineplus">+					if ($(event.target).is('.' + options.linkHover)) {</span>
<a href="#l78.179"></a><span id="l78.179" class="difflineplus">+						var prevLink = $(event.target).parent().prev().find('a:eq(0)');</span>
<a href="#l78.180"></a><span id="l78.180"> 						if (prevLink.size() &gt; 0) {</span>
<a href="#l78.181"></a><span id="l78.181"> 							$(event.target).trigger('mouseout');</span>
<a href="#l78.182"></a><span id="l78.182"> 							prevLink.trigger('mouseover');</span>
<a href="#l78.183"></a><span id="l78.183" class="difflineminus">-						};						</span>
<a href="#l78.184"></a><span id="l78.184" class="difflineplus">+						};</span>
<a href="#l78.185"></a><span id="l78.185"> 					}</span>
<a href="#l78.186"></a><span id="l78.186"> 					else { container.find('a:eq(0)').trigger('mouseover'); }</span>
<a href="#l78.187"></a><span id="l78.187"> 					return false;</span>
<a href="#l78.188"></a><span id="l78.188"> 					break;</span>
<a href="#l78.189"></a><span id="l78.189" class="difflineminus">-					</span>
<a href="#l78.190"></a><span id="l78.190" class="difflineminus">-				case 39: // right arrow </span>
<a href="#l78.191"></a><span id="l78.191" class="difflineminus">-					if ($(event.target).is('.fg-menu-indicator')) {						</span>
<a href="#l78.192"></a><span id="l78.192" class="difflineplus">+</span>
<a href="#l78.193"></a><span id="l78.193" class="difflineplus">+				case 39: // right arrow</span>
<a href="#l78.194"></a><span id="l78.194" class="difflineplus">+					if ($(event.target).is('.fg-menu-indicator')) {</span>
<a href="#l78.195"></a><span id="l78.195"> 						if (menuType == 'flyout') {</span>
<a href="#l78.196"></a><span id="l78.196"> 							$(event.target).next().find('a:eq(0)').trigger('mouseover');</span>
<a href="#l78.197"></a><span id="l78.197"> 						}</span>
<a href="#l78.198"></a><span id="l78.198"> 						else if (menuType == 'ipod') {</span>
<a href="#l78.199"></a><span id="l78.199" class="difflineminus">-							$(event.target).trigger('click');						</span>
<a href="#l78.200"></a><span id="l78.200" class="difflineplus">+							$(event.target).trigger('click');</span>
<a href="#l78.201"></a><span id="l78.201"> 							setTimeout(function(){</span>
<a href="#l78.202"></a><span id="l78.202"> 								$(event.target).next().find('a:eq(0)').trigger('mouseover');</span>
<a href="#l78.203"></a><span id="l78.203"> 							}, options.crossSpeed);</span>
<a href="#l78.204"></a><span id="l78.204" class="difflineminus">-						};				</span>
<a href="#l78.205"></a><span id="l78.205" class="difflineminus">-					}; </span>
<a href="#l78.206"></a><span id="l78.206" class="difflineplus">+						};</span>
<a href="#l78.207"></a><span id="l78.207" class="difflineplus">+					};</span>
<a href="#l78.208"></a><span id="l78.208"> 					return false;</span>
<a href="#l78.209"></a><span id="l78.209"> 					break;</span>
<a href="#l78.210"></a><span id="l78.210" class="difflineminus">-					</span>
<a href="#l78.211"></a><span id="l78.211" class="difflineplus">+</span>
<a href="#l78.212"></a><span id="l78.212"> 				case 40: // down arrow</span>
<a href="#l78.213"></a><span id="l78.213"> 					if ($(event.target).is('.' + options.linkHover)) {</span>
<a href="#l78.214"></a><span id="l78.214" class="difflineminus">-						var nextLink = $(event.target).parent().next().find('a:eq(0)');						</span>
<a href="#l78.215"></a><span id="l78.215" class="difflineminus">-						if (nextLink.size() &gt; 0) {							</span>
<a href="#l78.216"></a><span id="l78.216" class="difflineplus">+						var nextLink = $(event.target).parent().next().find('a:eq(0)');</span>
<a href="#l78.217"></a><span id="l78.217" class="difflineplus">+						if (nextLink.size() &gt; 0) {</span>
<a href="#l78.218"></a><span id="l78.218"> 							$(event.target).trigger('mouseout');</span>
<a href="#l78.219"></a><span id="l78.219"> 							nextLink.trigger('mouseover');</span>
<a href="#l78.220"></a><span id="l78.220" class="difflineminus">-						};				</span>
<a href="#l78.221"></a><span id="l78.221" class="difflineplus">+						};</span>
<a href="#l78.222"></a><span id="l78.222"> 					}</span>
<a href="#l78.223"></a><span id="l78.223" class="difflineminus">-					else { container.find('a:eq(0)').trigger('mouseover'); }		</span>
<a href="#l78.224"></a><span id="l78.224" class="difflineminus">-					return false;						</span>
<a href="#l78.225"></a><span id="l78.225" class="difflineplus">+					else { container.find('a:eq(0)').trigger('mouseover'); }</span>
<a href="#l78.226"></a><span id="l78.226" class="difflineplus">+					return false;</span>
<a href="#l78.227"></a><span id="l78.227"> 					break;</span>
<a href="#l78.228"></a><span id="l78.228" class="difflineminus">-					</span>
<a href="#l78.229"></a><span id="l78.229" class="difflineplus">+</span>
<a href="#l78.230"></a><span id="l78.230"> 				case 27: // escape</span>
<a href="#l78.231"></a><span id="l78.231"> 					killAllMenus();</span>
<a href="#l78.232"></a><span id="l78.232"> 					break;</span>
<a href="#l78.233"></a><span id="l78.233" class="difflineminus">-					</span>
<a href="#l78.234"></a><span id="l78.234" class="difflineplus">+</span>
<a href="#l78.235"></a><span id="l78.235"> 				case 13: // enter</span>
<a href="#l78.236"></a><span id="l78.236" class="difflineminus">-					if ($(event.target).is('.fg-menu-indicator') &amp;&amp; menuType == 'ipod') {							</span>
<a href="#l78.237"></a><span id="l78.237" class="difflineminus">-						$(event.target).trigger('click');						</span>
<a href="#l78.238"></a><span id="l78.238" class="difflineplus">+					if ($(event.target).is('.fg-menu-indicator') &amp;&amp; menuType == 'ipod') {</span>
<a href="#l78.239"></a><span id="l78.239" class="difflineplus">+						$(event.target).trigger('click');</span>
<a href="#l78.240"></a><span id="l78.240"> 						setTimeout(function(){</span>
<a href="#l78.241"></a><span id="l78.241"> 							$(event.target).next().find('a:eq(0)').trigger('mouseover');</span>
<a href="#l78.242"></a><span id="l78.242" class="difflineminus">-						}, options.crossSpeed);					</span>
<a href="#l78.243"></a><span id="l78.243" class="difflineminus">-					}; </span>
<a href="#l78.244"></a><span id="l78.244" class="difflineplus">+						}, options.crossSpeed);</span>
<a href="#l78.245"></a><span id="l78.245" class="difflineplus">+					};</span>
<a href="#l78.246"></a><span id="l78.246"> 					break;</span>
<a href="#l78.247"></a><span id="l78.247" class="difflineminus">-			};			</span>
<a href="#l78.248"></a><span id="l78.248" class="difflineplus">+			};</span>
<a href="#l78.249"></a><span id="l78.249"> 		});</span>
<a href="#l78.250"></a><span id="l78.250"> 	};</span>
<a href="#l78.251"></a><span id="l78.251"> </span>
<a href="#l78.252"></a><span id="l78.252" class="difflineminus">-    </span>
<a href="#l78.253"></a><span id="l78.253" class="difflineminus">-	this.create = function(){	</span>
<a href="#l78.254"></a><span id="l78.254" class="difflineplus">+</span>
<a href="#l78.255"></a><span id="l78.255" class="difflineplus">+	this.create = function(){</span>
<a href="#l78.256"></a><span id="l78.256"> 		container.css({ width: options.width }).appendTo('body').find('ul:first').not('.fg-menu-breadcrumb').addClass('fg-menu');</span>
<a href="#l78.257"></a><span id="l78.257"> 		container.find('ul, li a').addClass('ui-corner-all');</span>
<a href="#l78.258"></a><span id="l78.258" class="difflineminus">-		</span>
<a href="#l78.259"></a><span id="l78.259" class="difflineplus">+</span>
<a href="#l78.260"></a><span id="l78.260"> 		// aria roles &amp; attributes</span>
<a href="#l78.261"></a><span id="l78.261"> 		container.find('ul').attr('role', 'menu').eq(0).attr('aria-activedescendant','active-menuitem').attr('aria-labelledby', caller.attr('id'));</span>
<a href="#l78.262"></a><span id="l78.262"> 		container.find('li').attr('role', 'menuitem');</span>
<a href="#l78.263"></a><span id="l78.263"> 		container.find('li:has(ul)').attr('aria-haspopup', 'true').find('ul').attr('aria-expanded', 'false');</span>
<a href="#l78.264"></a><span id="l78.264"> 		container.find('a').attr('tabindex', '-1');</span>
<a href="#l78.265"></a><span id="l78.265" class="difflineminus">-		</span>
<a href="#l78.266"></a><span id="l78.266" class="difflineplus">+</span>
<a href="#l78.267"></a><span id="l78.267"> 		// when there are multiple levels of hierarchy, create flyout or drilldown menu</span>
<a href="#l78.268"></a><span id="l78.268"> 		if (container.find('ul').size() &gt; 1) {</span>
<a href="#l78.269"></a><span id="l78.269"> 			if (options.flyOut) { menu.flyout(container, options); }</span>
<a href="#l78.270"></a><span id="l78.270" class="difflineminus">-			else { menu.drilldown(container, options); }	</span>
<a href="#l78.271"></a><span id="l78.271" class="difflineplus">+			else { menu.drilldown(container, options); }</span>
<a href="#l78.272"></a><span id="l78.272"> 		}</span>
<a href="#l78.273"></a><span id="l78.273"> 		else {</span>
<a href="#l78.274"></a><span id="l78.274"> 			container.find('li').click(function(){ // Mozmill modified : 'a' to 'li'</span>
<a href="#l78.275"></a><span id="l78.275"> 				menu.chooseItem(this);</span>
<a href="#l78.276"></a><span id="l78.276"> 				return false;</span>
<a href="#l78.277"></a><span id="l78.277"> 			});</span>
<a href="#l78.278"></a><span id="l78.278" class="difflineminus">-		};	</span>
<a href="#l78.279"></a><span id="l78.279" class="difflineminus">-		</span>
<a href="#l78.280"></a><span id="l78.280" class="difflineplus">+		};</span>
<a href="#l78.281"></a><span id="l78.281" class="difflineplus">+</span>
<a href="#l78.282"></a><span id="l78.282"> 		if (options.linkHover) {</span>
<a href="#l78.283"></a><span id="l78.283"> 			var allLinks = container.find('.fg-menu li a');</span>
<a href="#l78.284"></a><span id="l78.284"> 			allLinks.hover(</span>
<a href="#l78.285"></a><span id="l78.285"> 				function(){</span>
<a href="#l78.286"></a><span id="l78.286"> 					var menuitem = $(this);</span>
<a href="#l78.287"></a><span id="l78.287"> 					$('.'+options.linkHover).removeClass(options.linkHover).blur().parent().removeAttr('id');</span>
<a href="#l78.288"></a><span id="l78.288"> 					$(this).addClass(options.linkHover).focus().parent().attr('id','active-menuitem');</span>
<a href="#l78.289"></a><span id="l78.289"> 				},</span>
<a href="#l78.290"></a><span id="l78.290"> 				function(){</span>
<a href="#l78.291"></a><span id="l78.291"> 					$(this).removeClass(options.linkHover).blur().parent().removeAttr('id');</span>
<a href="#l78.292"></a><span id="l78.292"> 				}</span>
<a href="#l78.293"></a><span id="l78.293"> 			);</span>
<a href="#l78.294"></a><span id="l78.294"> 		};</span>
<a href="#l78.295"></a><span id="l78.295" class="difflineminus">-		</span>
<a href="#l78.296"></a><span id="l78.296" class="difflineplus">+</span>
<a href="#l78.297"></a><span id="l78.297"> 		if (options.linkHoverSecondary) {</span>
<a href="#l78.298"></a><span id="l78.298"> 			container.find('.fg-menu li').hover(</span>
<a href="#l78.299"></a><span id="l78.299"> 				function(){</span>
<a href="#l78.300"></a><span id="l78.300"> 					$(this).siblings('li').removeClass(options.linkHoverSecondary);</span>
<a href="#l78.301"></a><span id="l78.301"> 					if (options.flyOutOnState) { $(this).siblings('li').find('a').removeClass(options.flyOutOnState); }</span>
<a href="#l78.302"></a><span id="l78.302"> 					$(this).addClass(options.linkHoverSecondary);</span>
<a href="#l78.303"></a><span id="l78.303"> 				},</span>
<a href="#l78.304"></a><span id="l78.304"> 				function(){ $(this).removeClass(options.linkHoverSecondary); }</span>
<a href="#l78.305"></a><span id="l78.305"> 			);</span>
<a href="#l78.306"></a><span id="l78.306" class="difflineminus">-		};	</span>
<a href="#l78.307"></a><span id="l78.307" class="difflineminus">-		</span>
<a href="#l78.308"></a><span id="l78.308" class="difflineplus">+		};</span>
<a href="#l78.309"></a><span id="l78.309" class="difflineplus">+</span>
<a href="#l78.310"></a><span id="l78.310"> 		menu.setPosition(container, caller, options);</span>
<a href="#l78.311"></a><span id="l78.311"> 		menu.menuExists = true;</span>
<a href="#l78.312"></a><span id="l78.312"> 	};</span>
<a href="#l78.313"></a><span id="l78.313" class="difflineminus">-	</span>
<a href="#l78.314"></a><span id="l78.314" class="difflineplus">+</span>
<a href="#l78.315"></a><span id="l78.315"> 	this.chooseItem = function(item){</span>
<a href="#l78.316"></a><span id="l78.316"> 		menu.kill();</span>
<a href="#l78.317"></a><span id="l78.317"> 		// edit this for your own custom function/callback:</span>
<a href="#l78.318"></a><span id="l78.318" class="difflineminus">-		$('#menuSelection').text($(item).text());	</span>
<a href="#l78.319"></a><span id="l78.319" class="difflineplus">+		$('#menuSelection').text($(item).text());</span>
<a href="#l78.320"></a><span id="l78.320"> 		// location.href = $(item).attr('href');</span>
<a href="#l78.321"></a><span id="l78.321"> 	};</span>
<a href="#l78.322"></a><span id="l78.322"> };</span>
<a href="#l78.323"></a><span id="l78.323"> </span>
<a href="#l78.324"></a><span id="l78.324"> Menu.prototype.flyout = function(container, options) {</span>
<a href="#l78.325"></a><span id="l78.325"> 	var menu = this;</span>
<a href="#l78.326"></a><span id="l78.326" class="difflineminus">-	</span>
<a href="#l78.327"></a><span id="l78.327" class="difflineplus">+</span>
<a href="#l78.328"></a><span id="l78.328"> 	this.resetFlyoutMenu = function(){</span>
<a href="#l78.329"></a><span id="l78.329"> 		var allLists = container.find('ul ul');</span>
<a href="#l78.330"></a><span id="l78.330" class="difflineminus">-		allLists.removeClass('ui-widget-content').hide();	</span>
<a href="#l78.331"></a><span id="l78.331" class="difflineplus">+		allLists.removeClass('ui-widget-content').hide();</span>
<a href="#l78.332"></a><span id="l78.332"> 	};</span>
<a href="#l78.333"></a><span id="l78.333" class="difflineminus">-	</span>
<a href="#l78.334"></a><span id="l78.334" class="difflineplus">+</span>
<a href="#l78.335"></a><span id="l78.335"> 	container.addClass('fg-menu-flyout').find('li:has(ul)').each(function(){</span>
<a href="#l78.336"></a><span id="l78.336"> 		var linkWidth = container.width();</span>
<a href="#l78.337"></a><span id="l78.337"> 		var showTimer, hideTimer;</span>
<a href="#l78.338"></a><span id="l78.338" class="difflineminus">-		var allSubLists = $(this).find('ul');		</span>
<a href="#l78.339"></a><span id="l78.339" class="difflineminus">-		</span>
<a href="#l78.340"></a><span id="l78.340" class="difflineplus">+		var allSubLists = $(this).find('ul');</span>
<a href="#l78.341"></a><span id="l78.341" class="difflineplus">+</span>
<a href="#l78.342"></a><span id="l78.342"> 		allSubLists.css({ left: linkWidth, width: linkWidth }).hide();</span>
<a href="#l78.343"></a><span id="l78.343" class="difflineminus">-			</span>
<a href="#l78.344"></a><span id="l78.344" class="difflineplus">+</span>
<a href="#l78.345"></a><span id="l78.345"> 		$(this).find('a:eq(0)').addClass('fg-menu-indicator').html('&lt;span&gt;' + $(this).find('a:eq(0)').text() + '&lt;/span&gt;&lt;span class=&quot;ui-icon '+options.nextMenuLink+'&quot;&gt;&lt;/span&gt;').hover(</span>
<a href="#l78.346"></a><span id="l78.346"> 			function(){</span>
<a href="#l78.347"></a><span id="l78.347"> 				clearTimeout(hideTimer);</span>
<a href="#l78.348"></a><span id="l78.348"> 				var subList = $(this).next();</span>
<a href="#l78.349"></a><span id="l78.349"> 				if (!fitVertical(subList, $(this).offset().top)) { subList.css({ top: 'auto', bottom: 0 }); };</span>
<a href="#l78.350"></a><span id="l78.350"> 				if (!fitHorizontal(subList, $(this).offset().left + 100)) { subList.css({ left: 'auto', right: linkWidth, 'z-index': 999 }); };</span>
<a href="#l78.351"></a><span id="l78.351"> 				showTimer = setTimeout(function(){</span>
<a href="#l78.352"></a><span id="l78.352" class="difflineminus">-					subList.addClass('ui-widget-content').show(options.showSpeed).attr('aria-expanded', 'true');	</span>
<a href="#l78.353"></a><span id="l78.353" class="difflineminus">-				}, 300);	</span>
<a href="#l78.354"></a><span id="l78.354" class="difflineplus">+					subList.addClass('ui-widget-content').show(options.showSpeed).attr('aria-expanded', 'true');</span>
<a href="#l78.355"></a><span id="l78.355" class="difflineplus">+				}, 300);</span>
<a href="#l78.356"></a><span id="l78.356"> 			},</span>
<a href="#l78.357"></a><span id="l78.357"> 			function(){</span>
<a href="#l78.358"></a><span id="l78.358"> 				clearTimeout(showTimer);</span>
<a href="#l78.359"></a><span id="l78.359"> 				var subList = $(this).next();</span>
<a href="#l78.360"></a><span id="l78.360"> 				hideTimer = setTimeout(function(){</span>
<a href="#l78.361"></a><span id="l78.361"> 					subList.removeClass('ui-widget-content').hide(options.showSpeed).attr('aria-expanded', 'false');</span>
<a href="#l78.362"></a><span id="l78.362" class="difflineminus">-				}, 400);	</span>
<a href="#l78.363"></a><span id="l78.363" class="difflineplus">+				}, 400);</span>
<a href="#l78.364"></a><span id="l78.364"> 			}</span>
<a href="#l78.365"></a><span id="l78.365"> 		);</span>
<a href="#l78.366"></a><span id="l78.366"> </span>
<a href="#l78.367"></a><span id="l78.367"> 		$(this).find('ul a').hover(</span>
<a href="#l78.368"></a><span id="l78.368"> 			function(){</span>
<a href="#l78.369"></a><span id="l78.369"> 				clearTimeout(hideTimer);</span>
<a href="#l78.370"></a><span id="l78.370"> 				if ($(this).parents('ul').prev().is('a.fg-menu-indicator')) {</span>
<a href="#l78.371"></a><span id="l78.371"> 					$(this).parents('ul').prev().addClass(options.flyOutOnState);</span>
<a href="#l78.372"></a><span id="l78.372"> 				}</span>
<a href="#l78.373"></a><span id="l78.373"> 			},</span>
<a href="#l78.374"></a><span id="l78.374"> 			function(){</span>
<a href="#l78.375"></a><span id="l78.375"> 				hideTimer = setTimeout(function(){</span>
<a href="#l78.376"></a><span id="l78.376"> 					allSubLists.hide(options.showSpeed);</span>
<a href="#l78.377"></a><span id="l78.377"> 					container.find(options.flyOutOnState).removeClass(options.flyOutOnState);</span>
<a href="#l78.378"></a><span id="l78.378" class="difflineminus">-				}, 500);	</span>
<a href="#l78.379"></a><span id="l78.379" class="difflineplus">+				}, 500);</span>
<a href="#l78.380"></a><span id="l78.380"> 			}</span>
<a href="#l78.381"></a><span id="l78.381" class="difflineminus">-		);	</span>
<a href="#l78.382"></a><span id="l78.382" class="difflineplus">+		);</span>
<a href="#l78.383"></a><span id="l78.383"> 	});</span>
<a href="#l78.384"></a><span id="l78.384" class="difflineminus">-	</span>
<a href="#l78.385"></a><span id="l78.385" class="difflineplus">+</span>
<a href="#l78.386"></a><span id="l78.386"> 	container.find('a').click(function(){</span>
<a href="#l78.387"></a><span id="l78.387"> 		menu.chooseItem(this);</span>
<a href="#l78.388"></a><span id="l78.388"> 		return false;</span>
<a href="#l78.389"></a><span id="l78.389"> 	});</span>
<a href="#l78.390"></a><span id="l78.390"> };</span>
<a href="#l78.391"></a><span id="l78.391"> </span>
<a href="#l78.392"></a><span id="l78.392"> </span>
<a href="#l78.393"></a><span id="l78.393"> </span>
<a href="#l78.394"></a><span id="l78.394"> </span>
<a href="#l78.395"></a><span id="l78.395"> /* Menu.prototype.setPosition parameters (defaults noted with *):</span>
<a href="#l78.396"></a><span id="l78.396" class="difflineminus">-	referrer = the link (or other element) used to show the overlaid object </span>
<a href="#l78.397"></a><span id="l78.397" class="difflineplus">+	referrer = the link (or other element) used to show the overlaid object</span>
<a href="#l78.398"></a><span id="l78.398"> 	settings = can override the defaults:</span>
<a href="#l78.399"></a><span id="l78.399"> 		- posX/Y: where the top left corner of the object should be positioned in relation to its referrer.</span>
<a href="#l78.400"></a><span id="l78.400"> 				X: left*, center, right</span>
<a href="#l78.401"></a><span id="l78.401"> 				Y: top, center, bottom*</span>
<a href="#l78.402"></a><span id="l78.402"> 		- offsetX/Y: the number of pixels to be offset from the x or y position.  Can be a positive or negative number.</span>
<a href="#l78.403"></a><span id="l78.403"> 		- directionH/V: where the entire menu should appear in relation to its referrer.</span>
<a href="#l78.404"></a><span id="l78.404"> 				Horizontal: left*, right</span>
<a href="#l78.405"></a><span id="l78.405"> 				Vertical: up, down*</span>
<a href="#l78.406"></a><span id="l78.406"> 		- detectH/V: detect the viewport horizontally / vertically</span>
<a href="#l78.407"></a><span id="l78.407"> 		- linkToFront: copy the menu link and place it on top of the menu (visual effect to make it look like it overlaps the object) */</span>
<a href="#l78.408"></a><span id="l78.408"> </span>
<a href="#l78.409"></a><span id="l78.409" class="difflineminus">-Menu.prototype.setPosition = function(widget, caller, options) { </span>
<a href="#l78.410"></a><span id="l78.410" class="difflineplus">+Menu.prototype.setPosition = function(widget, caller, options) {</span>
<a href="#l78.411"></a><span id="l78.411"> 	var el = widget;</span>
<a href="#l78.412"></a><span id="l78.412"> 	var referrer = caller;</span>
<a href="#l78.413"></a><span id="l78.413"> 	var dims = {</span>
<a href="#l78.414"></a><span id="l78.414"> 		refX: referrer.offset().left,</span>
<a href="#l78.415"></a><span id="l78.415"> 		refY: referrer.offset().top,</span>
<a href="#l78.416"></a><span id="l78.416"> 		refW: referrer.getTotalWidth(),</span>
<a href="#l78.417"></a><span id="l78.417"> 		refH: referrer.getTotalHeight()</span>
<a href="#l78.418"></a><span id="l78.418" class="difflineminus">-	};	</span>
<a href="#l78.419"></a><span id="l78.419" class="difflineplus">+	};</span>
<a href="#l78.420"></a><span id="l78.420"> 	var options = options;</span>
<a href="#l78.421"></a><span id="l78.421"> 	var xVal, yVal;</span>
<a href="#l78.422"></a><span id="l78.422" class="difflineminus">-	</span>
<a href="#l78.423"></a><span id="l78.423" class="difflineplus">+</span>
<a href="#l78.424"></a><span id="l78.424"> 	var helper = $('&lt;div class=&quot;positionHelper&quot;&gt;&lt;/div&gt;');</span>
<a href="#l78.425"></a><span id="l78.425"> 	helper.css({ position: 'absolute', left: dims.refX, top: dims.refY, width: dims.refW, height: dims.refH });</span>
<a href="#l78.426"></a><span id="l78.426"> 	el.wrap(helper);</span>
<a href="#l78.427"></a><span id="l78.427" class="difflineminus">-	</span>
<a href="#l78.428"></a><span id="l78.428" class="difflineplus">+</span>
<a href="#l78.429"></a><span id="l78.429"> 	// get X pos</span>
<a href="#l78.430"></a><span id="l78.430"> 	switch(options.positionOpts.posX) {</span>
<a href="#l78.431"></a><span id="l78.431" class="difflineminus">-		case 'left': 	xVal = 0; </span>
<a href="#l78.432"></a><span id="l78.432" class="difflineminus">-			break;				</span>
<a href="#l78.433"></a><span id="l78.433" class="difflineplus">+		case 'left': 	xVal = 0;</span>
<a href="#l78.434"></a><span id="l78.434" class="difflineplus">+			break;</span>
<a href="#l78.435"></a><span id="l78.435"> 		case 'center': xVal = dims.refW / 2;</span>
<a href="#l78.436"></a><span id="l78.436" class="difflineminus">-			break;				</span>
<a href="#l78.437"></a><span id="l78.437" class="difflineplus">+			break;</span>
<a href="#l78.438"></a><span id="l78.438"> 		case 'right': xVal = dims.refW;</span>
<a href="#l78.439"></a><span id="l78.439"> 			break;</span>
<a href="#l78.440"></a><span id="l78.440"> 	};</span>
<a href="#l78.441"></a><span id="l78.441" class="difflineminus">-	</span>
<a href="#l78.442"></a><span id="l78.442" class="difflineplus">+</span>
<a href="#l78.443"></a><span id="l78.443"> 	// get Y pos</span>
<a href="#l78.444"></a><span id="l78.444"> 	switch(options.positionOpts.posY) {</span>
<a href="#l78.445"></a><span id="l78.445"> 		case 'top': 	yVal = 0;</span>
<a href="#l78.446"></a><span id="l78.446" class="difflineminus">-			break;				</span>
<a href="#l78.447"></a><span id="l78.447" class="difflineplus">+			break;</span>
<a href="#l78.448"></a><span id="l78.448"> 		case 'center': yVal = dims.refH / 2;</span>
<a href="#l78.449"></a><span id="l78.449" class="difflineminus">-			break;				</span>
<a href="#l78.450"></a><span id="l78.450" class="difflineplus">+			break;</span>
<a href="#l78.451"></a><span id="l78.451"> 		case 'bottom': yVal = dims.refH;</span>
<a href="#l78.452"></a><span id="l78.452"> 			break;</span>
<a href="#l78.453"></a><span id="l78.453"> 	};</span>
<a href="#l78.454"></a><span id="l78.454" class="difflineminus">-	</span>
<a href="#l78.455"></a><span id="l78.455" class="difflineplus">+</span>
<a href="#l78.456"></a><span id="l78.456"> 	// add the offsets (zero by default)</span>
<a href="#l78.457"></a><span id="l78.457"> 	xVal += options.positionOpts.offsetX;</span>
<a href="#l78.458"></a><span id="l78.458"> 	yVal += options.positionOpts.offsetY;</span>
<a href="#l78.459"></a><span id="l78.459" class="difflineminus">-	</span>
<a href="#l78.460"></a><span id="l78.460" class="difflineplus">+</span>
<a href="#l78.461"></a><span id="l78.461"> 	// position the object vertically</span>
<a href="#l78.462"></a><span id="l78.462"> 	if (options.positionOpts.directionV == 'up') {</span>
<a href="#l78.463"></a><span id="l78.463"> 		el.css({ top: 'auto', bottom: yVal });</span>
<a href="#l78.464"></a><span id="l78.464"> 		if (options.positionOpts.detectV &amp;&amp; !fitVertical(el)) {</span>
<a href="#l78.465"></a><span id="l78.465"> 			el.css({ bottom: 'auto', top: yVal });</span>
<a href="#l78.466"></a><span id="l78.466"> 		}</span>
<a href="#l78.467"></a><span id="l78.467" class="difflineminus">-	} </span>
<a href="#l78.468"></a><span id="l78.468" class="difflineplus">+	}</span>
<a href="#l78.469"></a><span id="l78.469"> 	else {</span>
<a href="#l78.470"></a><span id="l78.470"> 		el.css({ bottom: 'auto', top: yVal });</span>
<a href="#l78.471"></a><span id="l78.471"> 		if (options.positionOpts.detectV &amp;&amp; !fitVertical(el)) {</span>
<a href="#l78.472"></a><span id="l78.472"> 			el.css({ top: 'auto', bottom: yVal });</span>
<a href="#l78.473"></a><span id="l78.473"> 		}</span>
<a href="#l78.474"></a><span id="l78.474"> 	};</span>
<a href="#l78.475"></a><span id="l78.475" class="difflineminus">-	</span>
<a href="#l78.476"></a><span id="l78.476" class="difflineplus">+</span>
<a href="#l78.477"></a><span id="l78.477"> 	// and horizontally</span>
<a href="#l78.478"></a><span id="l78.478"> 	if (options.positionOpts.directionH == 'left') {</span>
<a href="#l78.479"></a><span id="l78.479"> 		el.css({ left: 'auto', right: xVal });</span>
<a href="#l78.480"></a><span id="l78.480"> 		if (options.positionOpts.detectH &amp;&amp; !fitHorizontal(el)) {</span>
<a href="#l78.481"></a><span id="l78.481"> 			el.css({ right: 'auto', left: xVal });</span>
<a href="#l78.482"></a><span id="l78.482"> 		}</span>
<a href="#l78.483"></a><span id="l78.483" class="difflineminus">-	} </span>
<a href="#l78.484"></a><span id="l78.484" class="difflineplus">+	}</span>
<a href="#l78.485"></a><span id="l78.485"> 	else {</span>
<a href="#l78.486"></a><span id="l78.486"> 		el.css({ right: 'auto', left: xVal });</span>
<a href="#l78.487"></a><span id="l78.487"> 		if (options.positionOpts.detectH &amp;&amp; !fitHorizontal(el)) {</span>
<a href="#l78.488"></a><span id="l78.488"> 			el.css({ left: 'auto', right: xVal });</span>
<a href="#l78.489"></a><span id="l78.489"> 		}</span>
<a href="#l78.490"></a><span id="l78.490"> 	};</span>
<a href="#l78.491"></a><span id="l78.491" class="difflineminus">-	</span>
<a href="#l78.492"></a><span id="l78.492" class="difflineplus">+</span>
<a href="#l78.493"></a><span id="l78.493"> 	// if specified, clone the referring element and position it so that it appears on top of the menu</span>
<a href="#l78.494"></a><span id="l78.494"> 	if (options.positionOpts.linkToFront) {</span>
<a href="#l78.495"></a><span id="l78.495"> 		referrer.clone().addClass('linkClone').css({</span>
<a href="#l78.496"></a><span id="l78.496" class="difflineminus">-			position: 'absolute', </span>
<a href="#l78.497"></a><span id="l78.497" class="difflineminus">-			top: 0, </span>
<a href="#l78.498"></a><span id="l78.498" class="difflineminus">-			right: 'auto', </span>
<a href="#l78.499"></a><span id="l78.499" class="difflineminus">-			bottom: 'auto', </span>
<a href="#l78.500"></a><span id="l78.500" class="difflineminus">-			left: 0, </span>
<a href="#l78.501"></a><span id="l78.501" class="difflineminus">-			width: referrer.width(), </span>
<a href="#l78.502"></a><span id="l78.502" class="difflineplus">+			position: 'absolute',</span>
<a href="#l78.503"></a><span id="l78.503" class="difflineplus">+			top: 0,</span>
<a href="#l78.504"></a><span id="l78.504" class="difflineplus">+			right: 'auto',</span>
<a href="#l78.505"></a><span id="l78.505" class="difflineplus">+			bottom: 'auto',</span>
<a href="#l78.506"></a><span id="l78.506" class="difflineplus">+			left: 0,</span>
<a href="#l78.507"></a><span id="l78.507" class="difflineplus">+			width: referrer.width(),</span>
<a href="#l78.508"></a><span id="l78.508"> 			height: referrer.height()</span>
<a href="#l78.509"></a><span id="l78.509"> 		}).insertAfter(el);</span>
<a href="#l78.510"></a><span id="l78.510"> 	};</span>
<a href="#l78.511"></a><span id="l78.511"> };</span>
<a href="#l78.512"></a><span id="l78.512"> </span>
<a href="#l78.513"></a><span id="l78.513"> </span>
<a href="#l78.514"></a><span id="l78.514"> /* Utilities to sort and find viewport dimensions */</span>
<a href="#l78.515"></a><span id="l78.515"> </span>
<a href="#l78.516"></a><span id="l78.516" class="difflineat">@@ -436,75 +436,75 @@ function getWindowWidth(){</span>
<a href="#l78.517"></a><span id="l78.517"> 	var de = document.documentElement;</span>
<a href="#l78.518"></a><span id="l78.518"> 	return self.innerWidth || (de &amp;&amp; de.clientWidth) || document.body.clientWidth;</span>
<a href="#l78.519"></a><span id="l78.519"> };</span>
<a href="#l78.520"></a><span id="l78.520"> </span>
<a href="#l78.521"></a><span id="l78.521"> /* Utilities to test whether an element will fit in the viewport</span>
<a href="#l78.522"></a><span id="l78.522"> 	Parameters:</span>
<a href="#l78.523"></a><span id="l78.523"> 	el = element to position, required</span>
<a href="#l78.524"></a><span id="l78.524"> 	leftOffset / topOffset = optional parameter if the offset cannot be calculated (i.e., if the object is in the DOM but is set to display: 'none') */</span>
<a href="#l78.525"></a><span id="l78.525" class="difflineminus">-	</span>
<a href="#l78.526"></a><span id="l78.526" class="difflineplus">+</span>
<a href="#l78.527"></a><span id="l78.527"> function fitHorizontal(el, leftOffset){</span>
<a href="#l78.528"></a><span id="l78.528"> 	var leftVal = parseInt(leftOffset) || $(el).offset().left;</span>
<a href="#l78.529"></a><span id="l78.529"> 	return (leftVal + $(el).width() &lt;= getWindowWidth() + getScrollLeft() &amp;&amp; leftVal - getScrollLeft() &gt;= 0);</span>
<a href="#l78.530"></a><span id="l78.530"> };</span>
<a href="#l78.531"></a><span id="l78.531"> </span>
<a href="#l78.532"></a><span id="l78.532"> function fitVertical(el, topOffset){</span>
<a href="#l78.533"></a><span id="l78.533"> 	var topVal = parseInt(topOffset) || $(el).offset().top;</span>
<a href="#l78.534"></a><span id="l78.534"> 	return (topVal + $(el).height() &lt;= getWindowHeight() + getScrollTop() &amp;&amp; topVal - getScrollTop() &gt;= 0);</span>
<a href="#l78.535"></a><span id="l78.535"> };</span>
<a href="#l78.536"></a><span id="l78.536"> </span>
<a href="#l78.537"></a><span id="l78.537" class="difflineminus">-/*-------------------------------------------------------------------- </span>
<a href="#l78.538"></a><span id="l78.538" class="difflineplus">+/*--------------------------------------------------------------------</span>
<a href="#l78.539"></a><span id="l78.539">  * javascript method: &quot;pxToEm&quot;</span>
<a href="#l78.540"></a><span id="l78.540">  * by:</span>
<a href="#l78.541"></a><span id="l78.541" class="difflineminus">-   Scott Jehl (scott@filamentgroup.com) </span>
<a href="#l78.542"></a><span id="l78.542" class="difflineplus">+   Scott Jehl (scott@filamentgroup.com)</span>
<a href="#l78.543"></a><span id="l78.543">    Maggie Wachs (maggie@filamentgroup.com)</span>
<a href="#l78.544"></a><span id="l78.544">    http://www.filamentgroup.com</span>
<a href="#l78.545"></a><span id="l78.545">  *</span>
<a href="#l78.546"></a><span id="l78.546">  * Copyright (c) 2008 Filament Group</span>
<a href="#l78.547"></a><span id="l78.547">  * Dual licensed under the MIT (filamentgroup.com/examples/mit-license.txt) and GPL (filamentgroup.com/examples/gpl-license.txt) licenses.</span>
<a href="#l78.548"></a><span id="l78.548">  *</span>
<a href="#l78.549"></a><span id="l78.549" class="difflineminus">- * Description: Extends the native Number and String objects with pxToEm method. pxToEm converts a pixel value to ems depending on inherited font size.  </span>
<a href="#l78.550"></a><span id="l78.550" class="difflineplus">+ * Description: Extends the native Number and String objects with pxToEm method. pxToEm converts a pixel value to ems depending on inherited font size.</span>
<a href="#l78.551"></a><span id="l78.551">  * Article: http://www.filamentgroup.com/lab/retaining_scalable_interfaces_with_pixel_to_em_conversion/</span>
<a href="#l78.552"></a><span id="l78.552" class="difflineminus">- * Demo: http://www.filamentgroup.com/examples/pxToEm/	 	</span>
<a href="#l78.553"></a><span id="l78.553" class="difflineminus">- *							</span>
<a href="#l78.554"></a><span id="l78.554" class="difflineminus">- * Options:  	 								</span>
<a href="#l78.555"></a><span id="l78.555" class="difflineplus">+ * Demo: http://www.filamentgroup.com/examples/pxToEm/</span>
<a href="#l78.556"></a><span id="l78.556" class="difflineplus">+ *</span>
<a href="#l78.557"></a><span id="l78.557" class="difflineplus">+ * Options:</span>
<a href="#l78.558"></a><span id="l78.558">  		scope: string or jQuery selector for font-size scoping</span>
<a href="#l78.559"></a><span id="l78.559">  		reverse: Boolean, true reverses the conversion to em-px</span>
<a href="#l78.560"></a><span id="l78.560" class="difflineminus">- * Dependencies: jQuery library						  </span>
<a href="#l78.561"></a><span id="l78.561" class="difflineplus">+ * Dependencies: jQuery library</span>
<a href="#l78.562"></a><span id="l78.562">  * Usage Example: myPixelValue.pxToEm(); or myPixelValue.pxToEm({'scope':'#navigation', reverse: true});</span>
<a href="#l78.563"></a><span id="l78.563">  *</span>
<a href="#l78.564"></a><span id="l78.564" class="difflineminus">- * Version: 2.0, 08.01.2008 </span>
<a href="#l78.565"></a><span id="l78.565" class="difflineplus">+ * Version: 2.0, 08.01.2008</span>
<a href="#l78.566"></a><span id="l78.566">  * Changelog:</span>
<a href="#l78.567"></a><span id="l78.567">  *		08.02.2007 initial Version 1.0</span>
<a href="#l78.568"></a><span id="l78.568">  *		08.01.2008 - fixed font-size calculation for IE</span>
<a href="#l78.569"></a><span id="l78.569"> --------------------------------------------------------------------*/</span>
<a href="#l78.570"></a><span id="l78.570"> </span>
<a href="#l78.571"></a><span id="l78.571"> Number.prototype.pxToEm = String.prototype.pxToEm = function(settings){</span>
<a href="#l78.572"></a><span id="l78.572"> 	//set defaults</span>
<a href="#l78.573"></a><span id="l78.573"> 	settings = jQuery.extend({</span>
<a href="#l78.574"></a><span id="l78.574"> 		scope: 'body',</span>
<a href="#l78.575"></a><span id="l78.575"> 		reverse: false</span>
<a href="#l78.576"></a><span id="l78.576"> 	}, settings);</span>
<a href="#l78.577"></a><span id="l78.577" class="difflineminus">-	</span>
<a href="#l78.578"></a><span id="l78.578" class="difflineplus">+</span>
<a href="#l78.579"></a><span id="l78.579"> 	var pxVal = (this == '') ? 0 : parseFloat(this);</span>
<a href="#l78.580"></a><span id="l78.580"> 	var scopeVal;</span>
<a href="#l78.581"></a><span id="l78.581"> 	var getWindowWidth = function(){</span>
<a href="#l78.582"></a><span id="l78.582"> 		var de = document.documentElement;</span>
<a href="#l78.583"></a><span id="l78.583"> 		return self.innerWidth || (de &amp;&amp; de.clientWidth) || document.body.clientWidth;</span>
<a href="#l78.584"></a><span id="l78.584" class="difflineminus">-	};	</span>
<a href="#l78.585"></a><span id="l78.585" class="difflineminus">-	</span>
<a href="#l78.586"></a><span id="l78.586" class="difflineminus">-	/* When a percentage-based font-size is set on the body, IE returns that percent of the window width as the font-size. </span>
<a href="#l78.587"></a><span id="l78.587" class="difflineminus">-		For example, if the body font-size is 62.5% and the window width is 1000px, IE will return 625px as the font-size. 	</span>
<a href="#l78.588"></a><span id="l78.588" class="difflineminus">-		When this happens, we calculate the correct body font-size (%) and multiply it by 16 (the standard browser font size) </span>
<a href="#l78.589"></a><span id="l78.589" class="difflineplus">+	};</span>
<a href="#l78.590"></a><span id="l78.590" class="difflineplus">+</span>
<a href="#l78.591"></a><span id="l78.591" class="difflineplus">+	/* When a percentage-based font-size is set on the body, IE returns that percent of the window width as the font-size.</span>
<a href="#l78.592"></a><span id="l78.592" class="difflineplus">+		For example, if the body font-size is 62.5% and the window width is 1000px, IE will return 625px as the font-size.</span>
<a href="#l78.593"></a><span id="l78.593" class="difflineplus">+		When this happens, we calculate the correct body font-size (%) and multiply it by 16 (the standard browser font size)</span>
<a href="#l78.594"></a><span id="l78.594"> 		to get an accurate em value. */</span>
<a href="#l78.595"></a><span id="l78.595" class="difflineminus">-				</span>
<a href="#l78.596"></a><span id="l78.596" class="difflineplus">+</span>
<a href="#l78.597"></a><span id="l78.597"> 	if (settings.scope == 'body' &amp;&amp; $.browser.msie &amp;&amp; (parseFloat($('body').css('font-size')) / getWindowWidth()).toFixed(1) &gt; 0.0) {</span>
<a href="#l78.598"></a><span id="l78.598" class="difflineminus">-		var calcFontSize = function(){		</span>
<a href="#l78.599"></a><span id="l78.599" class="difflineplus">+		var calcFontSize = function(){</span>
<a href="#l78.600"></a><span id="l78.600"> 			return (parseFloat($('body').css('font-size'))/getWindowWidth()).toFixed(3) * 16;</span>
<a href="#l78.601"></a><span id="l78.601"> 		};</span>
<a href="#l78.602"></a><span id="l78.602"> 		scopeVal = calcFontSize();</span>
<a href="#l78.603"></a><span id="l78.603"> 	}</span>
<a href="#l78.604"></a><span id="l78.604"> 	else { scopeVal = parseFloat(jQuery(settings.scope).css(&quot;font-size&quot;)); };</span>
<a href="#l78.605"></a><span id="l78.605" class="difflineminus">-			</span>
<a href="#l78.606"></a><span id="l78.606" class="difflineplus">+</span>
<a href="#l78.607"></a><span id="l78.607"> 	var result = (settings.reverse == true) ? (pxVal * scopeVal).toFixed(2) + 'px' : (pxVal / scopeVal).toFixed(2) + 'em';</span>
<a href="#l78.608"></a><span id="l78.608"> 	return result;</span>
<a href="#l78.609"></a><span id="l78.609"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.core.js</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -142,17 +142,17 @@ if (isFF2) {</span>
<a href="#l79.4"></a><span id="l79.4"> 				var elem = this;</span>
<a href="#l79.5"></a><span id="l79.5"> 				setTimeout(function() {</span>
<a href="#l79.6"></a><span id="l79.6"> 					$(elem).focus();</span>
<a href="#l79.7"></a><span id="l79.7"> 					(fn &amp;&amp; fn.call(elem));</span>
<a href="#l79.8"></a><span id="l79.8"> 				}, delay);</span>
<a href="#l79.9"></a><span id="l79.9"> 			})</span>
<a href="#l79.10"></a><span id="l79.10"> 			: this._focus.apply(this, arguments);</span>
<a href="#l79.11"></a><span id="l79.11"> 	},</span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-	</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+</span>
<a href="#l79.14"></a><span id="l79.14"> 	remove: function() {</span>
<a href="#l79.15"></a><span id="l79.15"> 		// Safari has a native remove event which actually removes DOM elements,</span>
<a href="#l79.16"></a><span id="l79.16"> 		// so we have to use triggerHandler instead of trigger (#3037).</span>
<a href="#l79.17"></a><span id="l79.17"> 		$(&quot;*&quot;, this).add(this).each(function() {</span>
<a href="#l79.18"></a><span id="l79.18"> 			$(this).triggerHandler(&quot;remove&quot;);</span>
<a href="#l79.19"></a><span id="l79.19"> 		});</span>
<a href="#l79.20"></a><span id="l79.20"> 		return _remove.apply(this, arguments );</span>
<a href="#l79.21"></a><span id="l79.21"> 	},</span>
<a href="#l79.22"></a><span id="l79.22" class="difflineat">@@ -241,17 +241,17 @@ if (isFF2) {</span>
<a href="#l79.23"></a><span id="l79.23"> 		fullName;</span>
<a href="#l79.24"></a><span id="l79.24"> 	name = name.split(&quot;.&quot;)[1];</span>
<a href="#l79.25"></a><span id="l79.25"> 	fullName = namespace + '-' + name;</span>
<a href="#l79.26"></a><span id="l79.26"> </span>
<a href="#l79.27"></a><span id="l79.27"> 	// create selector for plugin</span>
<a href="#l79.28"></a><span id="l79.28"> 	$.expr[':'][fullName] = function(elem) {</span>
<a href="#l79.29"></a><span id="l79.29"> 		return !!$.data(elem, name);</span>
<a href="#l79.30"></a><span id="l79.30"> 	};</span>
<a href="#l79.31"></a><span id="l79.31" class="difflineminus">-	</span>
<a href="#l79.32"></a><span id="l79.32" class="difflineplus">+</span>
<a href="#l79.33"></a><span id="l79.33"> 	// create plugin method</span>
<a href="#l79.34"></a><span id="l79.34"> 	$.fn[name] = function(options) {</span>
<a href="#l79.35"></a><span id="l79.35"> 		var isMethodCall = (typeof options == 'string'),</span>
<a href="#l79.36"></a><span id="l79.36"> 			args = Array.prototype.slice.call(arguments, 1),</span>
<a href="#l79.37"></a><span id="l79.37"> 			returnValue = this;</span>
<a href="#l79.38"></a><span id="l79.38"> </span>
<a href="#l79.39"></a><span id="l79.39"> 		// allow multiple hashes to be passed on init</span>
<a href="#l79.40"></a><span id="l79.40"> 		options = !isMethodCall &amp;&amp; args.length</span>
<a href="#l79.41"></a><span id="l79.41" class="difflineat">@@ -322,17 +322,17 @@ if (isFF2) {</span>
<a href="#l79.42"></a><span id="l79.42"> 	_init: function() {},</span>
<a href="#l79.43"></a><span id="l79.43"> 	destroy: function() {</span>
<a href="#l79.44"></a><span id="l79.44"> 		this.element.removeData(this.widgetName)</span>
<a href="#l79.45"></a><span id="l79.45"> 			.removeClass(this.widgetBaseClass + '-disabled' + ' ' + this.namespace + '-state-disabled')</span>
<a href="#l79.46"></a><span id="l79.46"> 			.removeAttr('aria-disabled');</span>
<a href="#l79.47"></a><span id="l79.47"> </span>
<a href="#l79.48"></a><span id="l79.48"> 		return this;</span>
<a href="#l79.49"></a><span id="l79.49"> 	},</span>
<a href="#l79.50"></a><span id="l79.50" class="difflineminus">-	</span>
<a href="#l79.51"></a><span id="l79.51" class="difflineplus">+</span>
<a href="#l79.52"></a><span id="l79.52"> 	// override when the widget element is a wrapper or similar</span>
<a href="#l79.53"></a><span id="l79.53"> 	widget: function() {</span>
<a href="#l79.54"></a><span id="l79.54"> 		return this.element;</span>
<a href="#l79.55"></a><span id="l79.55"> 	},</span>
<a href="#l79.56"></a><span id="l79.56"> </span>
<a href="#l79.57"></a><span id="l79.57"> 	option: function(key, value) {</span>
<a href="#l79.58"></a><span id="l79.58"> 		var options = key,</span>
<a href="#l79.59"></a><span id="l79.59"> 			self = this;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/jquery/jquery.ui.menu.js</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -26,69 +26,69 @@</span>
<a href="#l80.4"></a><span id="l80.4"> 		var items = this.element.children(&quot;li&quot;);</span>
<a href="#l80.5"></a><span id="l80.5"> 		items.addClass(&quot;ui-menu-item&quot;).attr(&quot;role&quot;, &quot;menuitem&quot;)</span>
<a href="#l80.6"></a><span id="l80.6"> 		.children(&quot;a&quot;).attr(&quot;tabindex&quot;, &quot;-1&quot;).addClass(&quot;ui-corner-all&quot;)</span>
<a href="#l80.7"></a><span id="l80.7"> 		// mouseenter doesn't work with event delegation</span>
<a href="#l80.8"></a><span id="l80.8"> 		.mouseenter(function() {</span>
<a href="#l80.9"></a><span id="l80.9"> 			self.activate($(this).parent());</span>
<a href="#l80.10"></a><span id="l80.10"> 		});</span>
<a href="#l80.11"></a><span id="l80.11"> 	},</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-	</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineplus">+</span>
<a href="#l80.14"></a><span id="l80.14"> 	activate: function(item) {</span>
<a href="#l80.15"></a><span id="l80.15"> 		this.deactivate();</span>
<a href="#l80.16"></a><span id="l80.16"> 		this.active = item.children(&quot;a&quot;).addClass(&quot;ui-state-hover&quot;).attr(&quot;id&quot;, &quot;ui-active-menuitem&quot;).end();</span>
<a href="#l80.17"></a><span id="l80.17"> 		this._trigger(&quot;focus&quot;, null, { item: item });</span>
<a href="#l80.18"></a><span id="l80.18"> 		if (this.hasScroll()) {</span>
<a href="#l80.19"></a><span id="l80.19"> 			var offset = item.offset().top - this.element.offset().top,</span>
<a href="#l80.20"></a><span id="l80.20"> 				scroll = this.element.attr(&quot;scrollTop&quot;),</span>
<a href="#l80.21"></a><span id="l80.21"> 				elementHeight = this.element.height();</span>
<a href="#l80.22"></a><span id="l80.22"> 			if (offset &lt; 0) {</span>
<a href="#l80.23"></a><span id="l80.23"> 				this.element.attr(&quot;scrollTop&quot;, scroll + offset);</span>
<a href="#l80.24"></a><span id="l80.24"> 			} else if (offset &gt; elementHeight) {</span>
<a href="#l80.25"></a><span id="l80.25"> 				this.element.attr(&quot;scrollTop&quot;, scroll + offset - elementHeight + item.height());</span>
<a href="#l80.26"></a><span id="l80.26"> 			}</span>
<a href="#l80.27"></a><span id="l80.27"> 		}</span>
<a href="#l80.28"></a><span id="l80.28"> 	},</span>
<a href="#l80.29"></a><span id="l80.29" class="difflineminus">-	</span>
<a href="#l80.30"></a><span id="l80.30" class="difflineplus">+</span>
<a href="#l80.31"></a><span id="l80.31"> 	deactivate: function() {</span>
<a href="#l80.32"></a><span id="l80.32"> 		if (!this.active)</span>
<a href="#l80.33"></a><span id="l80.33"> 			return;</span>
<a href="#l80.34"></a><span id="l80.34"> 		this.active.children(&quot;a&quot;).removeClass(&quot;ui-state-hover&quot;).removeAttr(&quot;id&quot;, &quot;ui-active-menuitem&quot;);</span>
<a href="#l80.35"></a><span id="l80.35"> 		this.active = null;</span>
<a href="#l80.36"></a><span id="l80.36"> 	},</span>
<a href="#l80.37"></a><span id="l80.37" class="difflineminus">-	</span>
<a href="#l80.38"></a><span id="l80.38" class="difflineplus">+</span>
<a href="#l80.39"></a><span id="l80.39"> 	next: function() {</span>
<a href="#l80.40"></a><span id="l80.40"> 		this.move(&quot;next&quot;, &quot;li:first&quot;);</span>
<a href="#l80.41"></a><span id="l80.41"> 	},</span>
<a href="#l80.42"></a><span id="l80.42" class="difflineminus">-	</span>
<a href="#l80.43"></a><span id="l80.43" class="difflineplus">+</span>
<a href="#l80.44"></a><span id="l80.44"> 	previous: function() {</span>
<a href="#l80.45"></a><span id="l80.45"> 		this.move(&quot;prev&quot;, &quot;li:last&quot;);</span>
<a href="#l80.46"></a><span id="l80.46"> 	},</span>
<a href="#l80.47"></a><span id="l80.47" class="difflineminus">-	</span>
<a href="#l80.48"></a><span id="l80.48" class="difflineplus">+</span>
<a href="#l80.49"></a><span id="l80.49"> 	first: function() {</span>
<a href="#l80.50"></a><span id="l80.50"> 		return this.active &amp;&amp; !this.active.prev().length;</span>
<a href="#l80.51"></a><span id="l80.51"> 	},</span>
<a href="#l80.52"></a><span id="l80.52" class="difflineminus">-	</span>
<a href="#l80.53"></a><span id="l80.53" class="difflineplus">+</span>
<a href="#l80.54"></a><span id="l80.54"> 	last: function() {</span>
<a href="#l80.55"></a><span id="l80.55"> 		return this.active &amp;&amp; !this.active.next().length;</span>
<a href="#l80.56"></a><span id="l80.56"> 	},</span>
<a href="#l80.57"></a><span id="l80.57" class="difflineminus">-	</span>
<a href="#l80.58"></a><span id="l80.58" class="difflineplus">+</span>
<a href="#l80.59"></a><span id="l80.59"> 	move: function(direction, edge) {</span>
<a href="#l80.60"></a><span id="l80.60"> 		if (!this.active) {</span>
<a href="#l80.61"></a><span id="l80.61"> 			this.activate(this.element.children(edge));</span>
<a href="#l80.62"></a><span id="l80.62"> 			return;</span>
<a href="#l80.63"></a><span id="l80.63"> 		}</span>
<a href="#l80.64"></a><span id="l80.64"> 		var next = this.active[direction]();</span>
<a href="#l80.65"></a><span id="l80.65"> 		if (next.length) {</span>
<a href="#l80.66"></a><span id="l80.66"> 			this.activate(next);</span>
<a href="#l80.67"></a><span id="l80.67"> 		} else {</span>
<a href="#l80.68"></a><span id="l80.68"> 			this.activate(this.element.children(edge));</span>
<a href="#l80.69"></a><span id="l80.69"> 		}</span>
<a href="#l80.70"></a><span id="l80.70"> 	},</span>
<a href="#l80.71"></a><span id="l80.71" class="difflineminus">-	</span>
<a href="#l80.72"></a><span id="l80.72" class="difflineplus">+</span>
<a href="#l80.73"></a><span id="l80.73"> 	// TODO merge with previousPage</span>
<a href="#l80.74"></a><span id="l80.74"> 	nextPage: function() {</span>
<a href="#l80.75"></a><span id="l80.75"> 		if (this.hasScroll()) {</span>
<a href="#l80.76"></a><span id="l80.76"> 			// TODO merge with no-scroll-else</span>
<a href="#l80.77"></a><span id="l80.77"> 			if (!this.active || this.last()) {</span>
<a href="#l80.78"></a><span id="l80.78"> 				this.activate(this.element.children(&quot;:first&quot;));</span>
<a href="#l80.79"></a><span id="l80.79"> 				return;</span>
<a href="#l80.80"></a><span id="l80.80"> 			}</span>
<a href="#l80.81"></a><span id="l80.81" class="difflineat">@@ -116,17 +116,17 @@</span>
<a href="#l80.82"></a><span id="l80.82"> 					return close &lt; 10 &amp;&amp; close &gt; -10;</span>
<a href="#l80.83"></a><span id="l80.83"> 				})</span>
<a href="#l80.84"></a><span id="l80.84"> 				this.activate(result);</span>
<a href="#l80.85"></a><span id="l80.85"> 			}</span>
<a href="#l80.86"></a><span id="l80.86"> 		} else {</span>
<a href="#l80.87"></a><span id="l80.87"> 			this.activate(this.element.children(!this.active || this.last() ? &quot;:first&quot; : &quot;:last&quot;));</span>
<a href="#l80.88"></a><span id="l80.88"> 		}</span>
<a href="#l80.89"></a><span id="l80.89"> 	},</span>
<a href="#l80.90"></a><span id="l80.90" class="difflineminus">-	</span>
<a href="#l80.91"></a><span id="l80.91" class="difflineplus">+</span>
<a href="#l80.92"></a><span id="l80.92"> 	// TODO merge with nextPage</span>
<a href="#l80.93"></a><span id="l80.93"> 	previousPage: function() {</span>
<a href="#l80.94"></a><span id="l80.94"> 		if (this.hasScroll()) {</span>
<a href="#l80.95"></a><span id="l80.95"> 			// TODO merge with no-scroll-else</span>
<a href="#l80.96"></a><span id="l80.96"> 			if (!this.active || this.first()) {</span>
<a href="#l80.97"></a><span id="l80.97"> 				this.activate(this.element.children(&quot;:last&quot;));</span>
<a href="#l80.98"></a><span id="l80.98"> 				return;</span>
<a href="#l80.99"></a><span id="l80.99"> 			}</span>
<a href="#l80.100"></a><span id="l80.100" class="difflineat">@@ -154,20 +154,20 @@</span>
<a href="#l80.101"></a><span id="l80.101"> 					return close &lt; 10 &amp;&amp; close &gt; -10;</span>
<a href="#l80.102"></a><span id="l80.102"> 				})</span>
<a href="#l80.103"></a><span id="l80.103"> 				this.activate(result);</span>
<a href="#l80.104"></a><span id="l80.104"> 			}</span>
<a href="#l80.105"></a><span id="l80.105"> 		} else {</span>
<a href="#l80.106"></a><span id="l80.106"> 			this.activate(this.element.children(!this.active || this.first() ? &quot;:last&quot; : &quot;:first&quot;));</span>
<a href="#l80.107"></a><span id="l80.107"> 		}</span>
<a href="#l80.108"></a><span id="l80.108"> 	},</span>
<a href="#l80.109"></a><span id="l80.109" class="difflineminus">-	</span>
<a href="#l80.110"></a><span id="l80.110" class="difflineplus">+</span>
<a href="#l80.111"></a><span id="l80.111"> 	hasScroll: function() {</span>
<a href="#l80.112"></a><span id="l80.112"> 		return this.element.height() &lt; this.element.attr(&quot;scrollHeight&quot;);</span>
<a href="#l80.113"></a><span id="l80.113"> 	},</span>
<a href="#l80.114"></a><span id="l80.114" class="difflineminus">-	</span>
<a href="#l80.115"></a><span id="l80.115" class="difflineplus">+</span>
<a href="#l80.116"></a><span id="l80.116"> 	select: function() {</span>
<a href="#l80.117"></a><span id="l80.117"> 		this._trigger(&quot;selected&quot;, null, { item: this.active });</span>
<a href="#l80.118"></a><span id="l80.118"> 	}</span>
<a href="#l80.119"></a><span id="l80.119" class="difflineminus">-	</span>
<a href="#l80.120"></a><span id="l80.120" class="difflineplus">+</span>
<a href="#l80.121"></a><span id="l80.121"> });</span>
<a href="#l80.122"></a><span id="l80.122"> </span>
<a href="#l80.123"></a><span id="l80.123"> })(jQuery);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/menus.js</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/menus.js</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -1,44 +1,44 @@</span>
<a href="#l81.4"></a><span id="l81.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l81.5"></a><span id="l81.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l81.6"></a><span id="l81.6" class="difflineminus">-// </span>
<a href="#l81.7"></a><span id="l81.7" class="difflineplus">+//</span>
<a href="#l81.8"></a><span id="l81.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l81.9"></a><span id="l81.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l81.10"></a><span id="l81.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l81.11"></a><span id="l81.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-// </span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+//</span>
<a href="#l81.14"></a><span id="l81.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l81.15"></a><span id="l81.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l81.16"></a><span id="l81.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l81.17"></a><span id="l81.17"> // License.</span>
<a href="#l81.18"></a><span id="l81.18" class="difflineminus">-// </span>
<a href="#l81.19"></a><span id="l81.19" class="difflineplus">+//</span>
<a href="#l81.20"></a><span id="l81.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l81.21"></a><span id="l81.21" class="difflineminus">-// </span>
<a href="#l81.22"></a><span id="l81.22" class="difflineplus">+//</span>
<a href="#l81.23"></a><span id="l81.23"> // The Initial Developer of the Original Code is</span>
<a href="#l81.24"></a><span id="l81.24"> // Adam Christian.</span>
<a href="#l81.25"></a><span id="l81.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l81.26"></a><span id="l81.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l81.27"></a><span id="l81.27" class="difflineminus">-// </span>
<a href="#l81.28"></a><span id="l81.28" class="difflineplus">+//</span>
<a href="#l81.29"></a><span id="l81.29"> // Contributor(s):</span>
<a href="#l81.30"></a><span id="l81.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l81.31"></a><span id="l81.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l81.32"></a><span id="l81.32" class="difflineminus">-// </span>
<a href="#l81.33"></a><span id="l81.33" class="difflineplus">+//</span>
<a href="#l81.34"></a><span id="l81.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l81.35"></a><span id="l81.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l81.36"></a><span id="l81.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l81.37"></a><span id="l81.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l81.38"></a><span id="l81.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l81.39"></a><span id="l81.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l81.40"></a><span id="l81.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l81.41"></a><span id="l81.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l81.42"></a><span id="l81.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l81.43"></a><span id="l81.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l81.44"></a><span id="l81.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l81.45"></a><span id="l81.45" class="difflineminus">-// </span>
<a href="#l81.46"></a><span id="l81.46" class="difflineplus">+//</span>
<a href="#l81.47"></a><span id="l81.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l81.48"></a><span id="l81.48"> </span>
<a href="#l81.49"></a><span id="l81.49"> var frame = {}; Components.utils.import('resource://mozmill/modules/frame.js', frame);</span>
<a href="#l81.50"></a><span id="l81.50"> </span>
<a href="#l81.51"></a><span id="l81.51"> </span>
<a href="#l81.52"></a><span id="l81.52"> function getBasename(path){</span>
<a href="#l81.53"></a><span id="l81.53">   var splt = &quot;/&quot;</span>
<a href="#l81.54"></a><span id="l81.54">   if (navigator.platform.indexOf(&quot;Win&quot;) != -1){</span>
<a href="#l81.55"></a><span id="l81.55" class="difflineat">@@ -142,15 +142,15 @@ function newTemplate(){</span>
<a href="#l81.56"></a><span id="l81.56">   editor.openNew(template);</span>
<a href="#l81.57"></a><span id="l81.57"> }</span>
<a href="#l81.58"></a><span id="l81.58"> </span>
<a href="#l81.59"></a><span id="l81.59"> function tabSelected(selector) {</span>
<a href="#l81.60"></a><span id="l81.60">   editor.switchTab(selector.selectedIndex);</span>
<a href="#l81.61"></a><span id="l81.61"> }</span>
<a href="#l81.62"></a><span id="l81.62"> </span>
<a href="#l81.63"></a><span id="l81.63"> function openHelp() {</span>
<a href="#l81.64"></a><span id="l81.64" class="difflineminus">-  var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]  </span>
<a href="#l81.65"></a><span id="l81.65" class="difflineminus">-                         .getService(Components.interfaces.nsIWindowMediator);  </span>
<a href="#l81.66"></a><span id="l81.66" class="difflineplus">+  var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l81.67"></a><span id="l81.67" class="difflineplus">+                         .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l81.68"></a><span id="l81.68">   var browser = wm.getMostRecentWindow(&quot;navigator:browser&quot;).gBrowser;</span>
<a href="#l81.69"></a><span id="l81.69">   browser.selectedTab =</span>
<a href="#l81.70"></a><span id="l81.70">     browser.addTab(&quot;http://quality.mozilla.org/docs/mozmill/getting-started/&quot;);</span>
<a href="#l81.71"></a><span id="l81.71"> }</span>
<a href="#l81.72"></a><span id="l81.72"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/mozmill.js</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -1,71 +1,71 @@</span>
<a href="#l82.4"></a><span id="l82.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l82.5"></a><span id="l82.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l82.6"></a><span id="l82.6" class="difflineminus">-// </span>
<a href="#l82.7"></a><span id="l82.7" class="difflineplus">+//</span>
<a href="#l82.8"></a><span id="l82.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l82.9"></a><span id="l82.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l82.10"></a><span id="l82.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l82.11"></a><span id="l82.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-// </span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+//</span>
<a href="#l82.14"></a><span id="l82.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l82.15"></a><span id="l82.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l82.16"></a><span id="l82.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l82.17"></a><span id="l82.17"> // License.</span>
<a href="#l82.18"></a><span id="l82.18" class="difflineminus">-// </span>
<a href="#l82.19"></a><span id="l82.19" class="difflineplus">+//</span>
<a href="#l82.20"></a><span id="l82.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l82.21"></a><span id="l82.21" class="difflineminus">-// </span>
<a href="#l82.22"></a><span id="l82.22" class="difflineplus">+//</span>
<a href="#l82.23"></a><span id="l82.23"> // The Initial Developer of the Original Code is</span>
<a href="#l82.24"></a><span id="l82.24"> // Adam Christian.</span>
<a href="#l82.25"></a><span id="l82.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l82.26"></a><span id="l82.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l82.27"></a><span id="l82.27" class="difflineminus">-// </span>
<a href="#l82.28"></a><span id="l82.28" class="difflineplus">+//</span>
<a href="#l82.29"></a><span id="l82.29"> // Contributor(s):</span>
<a href="#l82.30"></a><span id="l82.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l82.31"></a><span id="l82.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l82.32"></a><span id="l82.32" class="difflineminus">-// </span>
<a href="#l82.33"></a><span id="l82.33" class="difflineplus">+//</span>
<a href="#l82.34"></a><span id="l82.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l82.35"></a><span id="l82.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l82.36"></a><span id="l82.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l82.37"></a><span id="l82.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l82.38"></a><span id="l82.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l82.39"></a><span id="l82.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l82.40"></a><span id="l82.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l82.41"></a><span id="l82.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l82.42"></a><span id="l82.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l82.43"></a><span id="l82.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l82.44"></a><span id="l82.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l82.45"></a><span id="l82.45" class="difflineminus">-// </span>
<a href="#l82.46"></a><span id="l82.46" class="difflineplus">+//</span>
<a href="#l82.47"></a><span id="l82.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l82.48"></a><span id="l82.48"> </span>
<a href="#l82.49"></a><span id="l82.49"> var mozmill = {}; Components.utils.import('resource://mozmill/modules/mozmill.js', mozmill);</span>
<a href="#l82.50"></a><span id="l82.50"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l82.51"></a><span id="l82.51"> </span>
<a href="#l82.52"></a><span id="l82.52"> var updateOutput = function(){</span>
<a href="#l82.53"></a><span id="l82.53">   //get the checkboxes</span>
<a href="#l82.54"></a><span id="l82.54">   var pass = document.getElementById('outPass');</span>
<a href="#l82.55"></a><span id="l82.55">   var fail = document.getElementById('outFail');</span>
<a href="#l82.56"></a><span id="l82.56">   var info = document.getElementById('outTest');</span>
<a href="#l82.57"></a><span id="l82.57"> </span>
<a href="#l82.58"></a><span id="l82.58">   //get the collections</span>
<a href="#l82.59"></a><span id="l82.59">   var passCollect = window.document.getElementsByClassName('pass');</span>
<a href="#l82.60"></a><span id="l82.60">   var failCollect = window.document.getElementsByClassName('fail');</span>
<a href="#l82.61"></a><span id="l82.61">   var infoCollect = window.document.getElementsByClassName('test');</span>
<a href="#l82.62"></a><span id="l82.62" class="difflineminus">-  </span>
<a href="#l82.63"></a><span id="l82.63" class="difflineplus">+</span>
<a href="#l82.64"></a><span id="l82.64">   //set the htmlcollection display property in accordance item.checked</span>
<a href="#l82.65"></a><span id="l82.65">   var setDisplay = function(item, collection){</span>
<a href="#l82.66"></a><span id="l82.66">     for (var i = 0; i &lt; collection.length; i++){</span>
<a href="#l82.67"></a><span id="l82.67">       if (item.checked == true){</span>
<a href="#l82.68"></a><span id="l82.68">         collection[i].style.display = &quot;block&quot;;</span>
<a href="#l82.69"></a><span id="l82.69">       } else {</span>
<a href="#l82.70"></a><span id="l82.70">         collection[i].style.display = &quot;none&quot;;</span>
<a href="#l82.71"></a><span id="l82.71">       }</span>
<a href="#l82.72"></a><span id="l82.72">     }</span>
<a href="#l82.73"></a><span id="l82.73">   };</span>
<a href="#l82.74"></a><span id="l82.74" class="difflineminus">-  </span>
<a href="#l82.75"></a><span id="l82.75" class="difflineplus">+</span>
<a href="#l82.76"></a><span id="l82.76">   setDisplay(pass, passCollect);</span>
<a href="#l82.77"></a><span id="l82.77">   setDisplay(fail, failCollect);</span>
<a href="#l82.78"></a><span id="l82.78">   setDisplay(info, infoCollect);</span>
<a href="#l82.79"></a><span id="l82.79"> };</span>
<a href="#l82.80"></a><span id="l82.80"> </span>
<a href="#l82.81"></a><span id="l82.81"> function cleanUp(){</span>
<a href="#l82.82"></a><span id="l82.82">   //cleanup frame event listeners for output</span>
<a href="#l82.83"></a><span id="l82.83">   removeStateListeners();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/output.js</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/output.js</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -1,110 +1,110 @@</span>
<a href="#l83.4"></a><span id="l83.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l83.5"></a><span id="l83.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l83.6"></a><span id="l83.6" class="difflineminus">-// </span>
<a href="#l83.7"></a><span id="l83.7" class="difflineplus">+//</span>
<a href="#l83.8"></a><span id="l83.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l83.9"></a><span id="l83.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l83.10"></a><span id="l83.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l83.11"></a><span id="l83.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-// </span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+//</span>
<a href="#l83.14"></a><span id="l83.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l83.15"></a><span id="l83.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l83.16"></a><span id="l83.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l83.17"></a><span id="l83.17"> // License.</span>
<a href="#l83.18"></a><span id="l83.18" class="difflineminus">-// </span>
<a href="#l83.19"></a><span id="l83.19" class="difflineplus">+//</span>
<a href="#l83.20"></a><span id="l83.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l83.21"></a><span id="l83.21" class="difflineminus">-// </span>
<a href="#l83.22"></a><span id="l83.22" class="difflineplus">+//</span>
<a href="#l83.23"></a><span id="l83.23"> // The Initial Developer of the Original Code is</span>
<a href="#l83.24"></a><span id="l83.24"> // Adam Christian.</span>
<a href="#l83.25"></a><span id="l83.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l83.26"></a><span id="l83.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l83.27"></a><span id="l83.27" class="difflineminus">-// </span>
<a href="#l83.28"></a><span id="l83.28" class="difflineplus">+//</span>
<a href="#l83.29"></a><span id="l83.29"> // Contributor(s):</span>
<a href="#l83.30"></a><span id="l83.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l83.31"></a><span id="l83.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l83.32"></a><span id="l83.32" class="difflineminus">-// </span>
<a href="#l83.33"></a><span id="l83.33" class="difflineplus">+//</span>
<a href="#l83.34"></a><span id="l83.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l83.35"></a><span id="l83.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l83.36"></a><span id="l83.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l83.37"></a><span id="l83.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l83.38"></a><span id="l83.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l83.39"></a><span id="l83.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l83.40"></a><span id="l83.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l83.41"></a><span id="l83.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l83.42"></a><span id="l83.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l83.43"></a><span id="l83.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l83.44"></a><span id="l83.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l83.45"></a><span id="l83.45" class="difflineminus">-// </span>
<a href="#l83.46"></a><span id="l83.46" class="difflineplus">+//</span>
<a href="#l83.47"></a><span id="l83.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l83.48"></a><span id="l83.48"> </span>
<a href="#l83.49"></a><span id="l83.49"> var arrays = {}; Components.utils.import('resource://mozmill/stdlib/arrays.js', arrays);</span>
<a href="#l83.50"></a><span id="l83.50"> var json2 = {}; Components.utils.import('resource://mozmill/stdlib/json2.js', json2);</span>
<a href="#l83.51"></a><span id="l83.51"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l83.52"></a><span id="l83.52"> </span>
<a href="#l83.53"></a><span id="l83.53"> var aConsoleService = Components.classes[&quot;@mozilla.org/consoleservice;1&quot;].</span>
<a href="#l83.54"></a><span id="l83.54">      getService(Components.interfaces.nsIConsoleService);</span>
<a href="#l83.55"></a><span id="l83.55"> </span>
<a href="#l83.56"></a><span id="l83.56"> </span>
<a href="#l83.57"></a><span id="l83.57"> var createCell = function (t, obj, message) {</span>
<a href="#l83.58"></a><span id="l83.58">   // try {</span>
<a href="#l83.59"></a><span id="l83.59">   //    alert(json2.JSON.stringify(message.exception.message));</span>
<a href="#l83.60"></a><span id="l83.60">   //  } catch(err){}</span>
<a href="#l83.61"></a><span id="l83.61">   //  //alert(msgObj.exception.message);</span>
<a href="#l83.62"></a><span id="l83.62" class="difflineminus">-  //  </span>
<a href="#l83.63"></a><span id="l83.63" class="difflineplus">+  //</span>
<a href="#l83.64"></a><span id="l83.64">   var r = document.getElementById(&quot;resOut&quot;);</span>
<a href="#l83.65"></a><span id="l83.65">   var msg = document.createElement('div');</span>
<a href="#l83.66"></a><span id="l83.66">   msg.setAttribute(&quot;class&quot;, t);</span>
<a href="#l83.67"></a><span id="l83.67">   if (t == &quot;fail&quot;){</span>
<a href="#l83.68"></a><span id="l83.68">     $(msg).addClass(&quot;ui-state-error ui-corner-all&quot;);</span>
<a href="#l83.69"></a><span id="l83.69">   }</span>
<a href="#l83.70"></a><span id="l83.70">   if (t == &quot;pass&quot;){</span>
<a href="#l83.71"></a><span id="l83.71">     $(msg).addClass(&quot;ui-state-highlight ui-corner-all&quot;);</span>
<a href="#l83.72"></a><span id="l83.72">     msg.style.background = &quot;lightgreen&quot;;</span>
<a href="#l83.73"></a><span id="l83.73">     msg.style.border = &quot;1px solid darkgreen&quot;;</span>
<a href="#l83.74"></a><span id="l83.74">   }</span>
<a href="#l83.75"></a><span id="l83.75">   else {</span>
<a href="#l83.76"></a><span id="l83.76">     $(msg).addClass(&quot;ui-state-highlight ui-corner-all&quot;);</span>
<a href="#l83.77"></a><span id="l83.77">   }</span>
<a href="#l83.78"></a><span id="l83.78">   msg.style.height = &quot;15px&quot;;</span>
<a href="#l83.79"></a><span id="l83.79">   msg.style.overflow = &quot;hidden&quot;;</span>
<a href="#l83.80"></a><span id="l83.80" class="difflineminus">-  </span>
<a href="#l83.81"></a><span id="l83.81" class="difflineplus">+</span>
<a href="#l83.82"></a><span id="l83.82">   //if message isn't an object</span>
<a href="#l83.83"></a><span id="l83.83">   if (typeof(message) == &quot;string&quot;){</span>
<a href="#l83.84"></a><span id="l83.84">     msg.innerHTML = &quot;&lt;strong&gt;&quot;+t+&quot;&lt;/strong&gt;&quot;+' :: '+message;</span>
<a href="#l83.85"></a><span id="l83.85">   }</span>
<a href="#l83.86"></a><span id="l83.86">   else {</span>
<a href="#l83.87"></a><span id="l83.87">     try {</span>
<a href="#l83.88"></a><span id="l83.88">       var display = message.exception.message;</span>
<a href="#l83.89"></a><span id="l83.89">       if (display == undefined) {</span>
<a href="#l83.90"></a><span id="l83.90">         var display = message.exception;</span>
<a href="#l83.91"></a><span id="l83.91">       }</span>
<a href="#l83.92"></a><span id="l83.92" class="difflineminus">-    } catch(err){ </span>
<a href="#l83.93"></a><span id="l83.93" class="difflineplus">+    } catch(err){</span>
<a href="#l83.94"></a><span id="l83.94">       var display = message['function'];</span>
<a href="#l83.95"></a><span id="l83.95">     }</span>
<a href="#l83.96"></a><span id="l83.96">     //add each piece in its own hbox</span>
<a href="#l83.97"></a><span id="l83.97">     msg.innerHTML = '&lt;span style=&quot;float:right;top:0px;cursor: pointer;&quot; class=&quot;ui-icon ui-icon-triangle-1-s&quot;/&gt;';</span>
<a href="#l83.98"></a><span id="l83.98">     msg.innerHTML += &quot;&lt;strong&gt;&quot;+t+&quot;&lt;/strong&gt;&quot;+' :: '+display;</span>
<a href="#l83.99"></a><span id="l83.99" class="difflineminus">-    </span>
<a href="#l83.100"></a><span id="l83.100" class="difflineplus">+</span>
<a href="#l83.101"></a><span id="l83.101">     var createTree = function(obj){</span>
<a href="#l83.102"></a><span id="l83.102">       var mainDiv = document.createElement('div');</span>
<a href="#l83.103"></a><span id="l83.103">       for (prop in obj){</span>
<a href="#l83.104"></a><span id="l83.104">         var newDiv = document.createElement('div');</span>
<a href="#l83.105"></a><span id="l83.105">         newDiv.style.position = &quot;relative&quot;;</span>
<a href="#l83.106"></a><span id="l83.106">         newDiv.style.height = &quot;15px&quot;;</span>
<a href="#l83.107"></a><span id="l83.107">         newDiv.style.overflow = &quot;hidden&quot;;</span>
<a href="#l83.108"></a><span id="l83.108">         newDiv.style.width = &quot;95%&quot;;</span>
<a href="#l83.109"></a><span id="l83.109">         newDiv.style.left = &quot;10px&quot;;</span>
<a href="#l83.110"></a><span id="l83.110">         //some properties don't have a length attib</span>
<a href="#l83.111"></a><span id="l83.111">         try {</span>
<a href="#l83.112"></a><span id="l83.112">           if (obj[prop] &amp;&amp; obj[prop].length &gt; 50){</span>
<a href="#l83.113"></a><span id="l83.113">             newDiv.innerHTML = '&lt;span style=&quot;float:right;top:0px;cursor: pointer;&quot; class=&quot;ui-icon ui-icon-triangle-1-s&quot;/&gt;';</span>
<a href="#l83.114"></a><span id="l83.114">           }</span>
<a href="#l83.115"></a><span id="l83.115">         } catch(e){}</span>
<a href="#l83.116"></a><span id="l83.116" class="difflineminus">-        </span>
<a href="#l83.117"></a><span id="l83.117" class="difflineplus">+</span>
<a href="#l83.118"></a><span id="l83.118">         newDiv.innerHTML += &quot;&lt;strong&gt;&quot;+prop+&quot;&lt;/strong&gt;: &quot;+obj[prop];</span>
<a href="#l83.119"></a><span id="l83.119">         mainDiv.appendChild(newDiv);</span>
<a href="#l83.120"></a><span id="l83.120">       }</span>
<a href="#l83.121"></a><span id="l83.121">       return mainDiv;</span>
<a href="#l83.122"></a><span id="l83.122">     }</span>
<a href="#l83.123"></a><span id="l83.123">     //iterate the properties creating output entries for them</span>
<a href="#l83.124"></a><span id="l83.124">     for (prop in message){</span>
<a href="#l83.125"></a><span id="l83.125">       if (typeof message[prop] == &quot;object&quot;){</span>
<a href="#l83.126"></a><span id="l83.126" class="difflineat">@@ -112,22 +112,22 @@ var createCell = function (t, obj, messa</span>
<a href="#l83.127"></a><span id="l83.127">       }</span>
<a href="#l83.128"></a><span id="l83.128">       else {</span>
<a href="#l83.129"></a><span id="l83.129">         var newDiv = document.createElement('div');</span>
<a href="#l83.130"></a><span id="l83.130">         newDiv.innerHTML = &quot;&lt;strong&gt;&quot;+prop+&quot;&lt;/strong&gt;: &quot;+message[prop];</span>
<a href="#l83.131"></a><span id="l83.131">       }</span>
<a href="#l83.132"></a><span id="l83.132">       newDiv.style.position = &quot;relative&quot;;</span>
<a href="#l83.133"></a><span id="l83.133">       newDiv.style.left = &quot;10px&quot;;</span>
<a href="#l83.134"></a><span id="l83.134">       newDiv.style.overflow = &quot;hidden&quot;;</span>
<a href="#l83.135"></a><span id="l83.135" class="difflineminus">-      </span>
<a href="#l83.136"></a><span id="l83.136" class="difflineplus">+</span>
<a href="#l83.137"></a><span id="l83.137">       msg.appendChild(newDiv);</span>
<a href="#l83.138"></a><span id="l83.138">     }</span>
<a href="#l83.139"></a><span id="l83.139" class="difflineminus">-   </span>
<a href="#l83.140"></a><span id="l83.140" class="difflineplus">+</span>
<a href="#l83.141"></a><span id="l83.141">   }</span>
<a href="#l83.142"></a><span id="l83.142" class="difflineminus">-  </span>
<a href="#l83.143"></a><span id="l83.143" class="difflineplus">+</span>
<a href="#l83.144"></a><span id="l83.144">   //Add the event listener for clicking on the box to see more info</span>
<a href="#l83.145"></a><span id="l83.145">   msg.addEventListener('click', function(e){</span>
<a href="#l83.146"></a><span id="l83.146">     // if (e.which == 3){</span>
<a href="#l83.147"></a><span id="l83.147">     //    var rout = document.getElementById('resOut');</span>
<a href="#l83.148"></a><span id="l83.148">     //    if (e.target.parentNode != rout){</span>
<a href="#l83.149"></a><span id="l83.149">     //      copyToClipboard(e.target.parentNode.innerHTML);</span>
<a href="#l83.150"></a><span id="l83.150">     //    }</span>
<a href="#l83.151"></a><span id="l83.151">     //    else {</span>
<a href="#l83.152"></a><span id="l83.152" class="difflineat">@@ -137,41 +137,41 @@ var createCell = function (t, obj, messa</span>
<a href="#l83.153"></a><span id="l83.153">     //    return;</span>
<a href="#l83.154"></a><span id="l83.154">     //  }</span>
<a href="#l83.155"></a><span id="l83.155">     if (e.target.tagName == &quot;SPAN&quot;){</span>
<a href="#l83.156"></a><span id="l83.156">       if (e.target.parentNode.style.height == &quot;15px&quot;){</span>
<a href="#l83.157"></a><span id="l83.157">         e.target.parentNode.style.overflow = &quot;&quot;;</span>
<a href="#l83.158"></a><span id="l83.158">         e.target.parentNode.style.height = &quot;&quot;;</span>
<a href="#l83.159"></a><span id="l83.159">         e.target.className = &quot;ui-icon ui-icon-triangle-1-n&quot;;</span>
<a href="#l83.160"></a><span id="l83.160">       }</span>
<a href="#l83.161"></a><span id="l83.161" class="difflineminus">-      else { </span>
<a href="#l83.162"></a><span id="l83.162" class="difflineplus">+      else {</span>
<a href="#l83.163"></a><span id="l83.163">         e.target.parentNode.style.height = &quot;15px&quot;;</span>
<a href="#l83.164"></a><span id="l83.164">         e.target.parentNode.style.overflow = &quot;hidden&quot;;</span>
<a href="#l83.165"></a><span id="l83.165">         e.target.className = &quot;ui-icon ui-icon-triangle-1-s&quot;;</span>
<a href="#l83.166"></a><span id="l83.166">       }</span>
<a href="#l83.167"></a><span id="l83.167">     }</span>
<a href="#l83.168"></a><span id="l83.168"> </span>
<a href="#l83.169"></a><span id="l83.169">   }, true);</span>
<a href="#l83.170"></a><span id="l83.170" class="difflineminus">-  </span>
<a href="#l83.171"></a><span id="l83.171" class="difflineplus">+</span>
<a href="#l83.172"></a><span id="l83.172">   if (r.childNodes.length == 0){</span>
<a href="#l83.173"></a><span id="l83.173">    r.appendChild(msg);</span>
<a href="#l83.174"></a><span id="l83.174">   }</span>
<a href="#l83.175"></a><span id="l83.175">   else {</span>
<a href="#l83.176"></a><span id="l83.176">    r.insertBefore(msg, r.childNodes[0]);</span>
<a href="#l83.177"></a><span id="l83.177">   }</span>
<a href="#l83.178"></a><span id="l83.178">   updateOutput();</span>
<a href="#l83.179"></a><span id="l83.179"> }</span>
<a href="#l83.180"></a><span id="l83.180"> </span>
<a href="#l83.181"></a><span id="l83.181"> var frame = {}; Components.utils.import('resource://mozmill/modules/frame.js', frame);</span>
<a href="#l83.182"></a><span id="l83.182"> // var utils = {}; Components.utils.import('resouce://mozmill/modules/utils.js', utils);</span>
<a href="#l83.183"></a><span id="l83.183"> </span>
<a href="#l83.184"></a><span id="l83.184"> // Set UI Listeners in frame</span>
<a href="#l83.185"></a><span id="l83.185"> </span>
<a href="#l83.186"></a><span id="l83.186"> function stateListener (state) {</span>
<a href="#l83.187"></a><span id="l83.187" class="difflineminus">-  if (state != 'test') {  </span>
<a href="#l83.188"></a><span id="l83.188" class="difflineplus">+  if (state != 'test') {</span>
<a href="#l83.189"></a><span id="l83.189">   //  utils.getWindowByTitle('MozMill IDE').document.getElementById('runningStatus').innerHTML = state;</span>
<a href="#l83.190"></a><span id="l83.190">   }</span>
<a href="#l83.191"></a><span id="l83.191"> }</span>
<a href="#l83.192"></a><span id="l83.192"> frame.events.addListener('setState', stateListener);</span>
<a href="#l83.193"></a><span id="l83.193"> aConsoleService.logStringMessage('+++++++++++++++++++++++');</span>
<a href="#l83.194"></a><span id="l83.194"> aConsoleService.logStringMessage(&quot;Current setStateListener size: &quot;+String(frame.events.listeners.setState.length) );</span>
<a href="#l83.195"></a><span id="l83.195"> function testListener (test) {</span>
<a href="#l83.196"></a><span id="l83.196">   createCell('test', test, 'Started running test: '+test.name);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/rec.js</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/rec.js</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -1,44 +1,44 @@</span>
<a href="#l84.4"></a><span id="l84.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l84.5"></a><span id="l84.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l84.6"></a><span id="l84.6" class="difflineminus">-// </span>
<a href="#l84.7"></a><span id="l84.7" class="difflineplus">+//</span>
<a href="#l84.8"></a><span id="l84.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l84.9"></a><span id="l84.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l84.10"></a><span id="l84.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l84.11"></a><span id="l84.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-// </span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+//</span>
<a href="#l84.14"></a><span id="l84.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l84.15"></a><span id="l84.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l84.16"></a><span id="l84.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l84.17"></a><span id="l84.17"> // License.</span>
<a href="#l84.18"></a><span id="l84.18" class="difflineminus">-// </span>
<a href="#l84.19"></a><span id="l84.19" class="difflineplus">+//</span>
<a href="#l84.20"></a><span id="l84.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l84.21"></a><span id="l84.21" class="difflineminus">-// </span>
<a href="#l84.22"></a><span id="l84.22" class="difflineplus">+//</span>
<a href="#l84.23"></a><span id="l84.23"> // The Initial Developer of the Original Code is</span>
<a href="#l84.24"></a><span id="l84.24"> // Adam Christian.</span>
<a href="#l84.25"></a><span id="l84.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l84.26"></a><span id="l84.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l84.27"></a><span id="l84.27" class="difflineminus">-// </span>
<a href="#l84.28"></a><span id="l84.28" class="difflineplus">+//</span>
<a href="#l84.29"></a><span id="l84.29"> // Contributor(s):</span>
<a href="#l84.30"></a><span id="l84.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l84.31"></a><span id="l84.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l84.32"></a><span id="l84.32" class="difflineminus">-// </span>
<a href="#l84.33"></a><span id="l84.33" class="difflineplus">+//</span>
<a href="#l84.34"></a><span id="l84.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l84.35"></a><span id="l84.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l84.36"></a><span id="l84.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l84.37"></a><span id="l84.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l84.38"></a><span id="l84.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l84.39"></a><span id="l84.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l84.40"></a><span id="l84.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l84.41"></a><span id="l84.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l84.42"></a><span id="l84.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l84.43"></a><span id="l84.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l84.44"></a><span id="l84.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l84.45"></a><span id="l84.45" class="difflineminus">-// </span>
<a href="#l84.46"></a><span id="l84.46" class="difflineplus">+//</span>
<a href="#l84.47"></a><span id="l84.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l84.48"></a><span id="l84.48"> </span>
<a href="#l84.49"></a><span id="l84.49"> var inspection = {}; Components.utils.import('resource://mozmill/modules/inspection.js', inspection);</span>
<a href="#l84.50"></a><span id="l84.50"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l84.51"></a><span id="l84.51"> var objects = {}; Components.utils.import('resource://mozmill/stdlib/objects.js', objects);</span>
<a href="#l84.52"></a><span id="l84.52"> var arrays = {}; Components.utils.import('resource://mozmill/stdlib/arrays.js', arrays);</span>
<a href="#l84.53"></a><span id="l84.53"> var events = {}; Components.utils.import('resource://mozmill/modules/events.js', events);</span>
<a href="#l84.54"></a><span id="l84.54"> // var logging = {}; Components.utils.import('resource://mozmill/stdlib/logging.js', logging);</span>
<a href="#l84.55"></a><span id="l84.55" class="difflineat">@@ -52,123 +52,123 @@ var getEventSet = function (eArray) {</span>
<a href="#l84.56"></a><span id="l84.56">   var inSet = function (a, c) {</span>
<a href="#l84.57"></a><span id="l84.57">     for each(x in a) {</span>
<a href="#l84.58"></a><span id="l84.58">       if (x.evt.timeStamp == c.evt.timeStamp &amp;&amp; c.evt.type == x.evt.type) {</span>
<a href="#l84.59"></a><span id="l84.59">         return true;</span>
<a href="#l84.60"></a><span id="l84.60">       }</span>
<a href="#l84.61"></a><span id="l84.61">     }</span>
<a href="#l84.62"></a><span id="l84.62">     return false;</span>
<a href="#l84.63"></a><span id="l84.63">   }</span>
<a href="#l84.64"></a><span id="l84.64" class="difflineminus">-  </span>
<a href="#l84.65"></a><span id="l84.65" class="difflineplus">+</span>
<a href="#l84.66"></a><span id="l84.66">   var returnArray = [];</span>
<a href="#l84.67"></a><span id="l84.67">   for each(e in eArray) {</span>
<a href="#l84.68"></a><span id="l84.68">     // recorderLogger.info('ts '+e.evt.timeStamp+' '+inSet(returnArray, e))</span>
<a href="#l84.69"></a><span id="l84.69">     if (!inSet(returnArray, e)) {</span>
<a href="#l84.70"></a><span id="l84.70">       returnArray.push(e);</span>
<a href="#l84.71"></a><span id="l84.71">     }</span>
<a href="#l84.72"></a><span id="l84.72">   }</span>
<a href="#l84.73"></a><span id="l84.73">   return returnArray;</span>
<a href="#l84.74"></a><span id="l84.74"> }</span>
<a href="#l84.75"></a><span id="l84.75"> </span>
<a href="#l84.76"></a><span id="l84.76"> var recorderMethodCases = {</span>
<a href="#l84.77"></a><span id="l84.77">   'click': function (x) {return 'click('+x['inspected'].elementText+')';},</span>
<a href="#l84.78"></a><span id="l84.78">   //this code is causing issues when recording type</span>
<a href="#l84.79"></a><span id="l84.79">   //and also requires the same code as the DX for genating accurate keypress</span>
<a href="#l84.80"></a><span id="l84.80">   //based on the new VK_ keyCode API</span>
<a href="#l84.81"></a><span id="l84.81" class="difflineminus">-  </span>
<a href="#l84.82"></a><span id="l84.82" class="difflineplus">+</span>
<a href="#l84.83"></a><span id="l84.83">   'keypress': function (x) {</span>
<a href="#l84.84"></a><span id="l84.84">     if (x['evt'].charCode == 0){</span>
<a href="#l84.85"></a><span id="l84.85" class="difflineminus">-      return 'keypress(' + x['inspected'].elementText + ',' + x['evt'].keyCode + ', {ctrlKey:' +x['evt'].ctrlKey </span>
<a href="#l84.86"></a><span id="l84.86" class="difflineplus">+      return 'keypress(' + x['inspected'].elementText + ',' + x['evt'].keyCode + ', {ctrlKey:' +x['evt'].ctrlKey</span>
<a href="#l84.87"></a><span id="l84.87">               + ', altKey:'+ x['evt'].altKey + ',shiftKey:' + x['evt'].shiftKey + ', metaKey:' + x['evt'].metaKey + '})';</span>
<a href="#l84.88"></a><span id="l84.88">     }</span>
<a href="#l84.89"></a><span id="l84.89">     else {</span>
<a href="#l84.90"></a><span id="l84.90" class="difflineminus">-      return 'keypress(' + x['inspected'].elementText + ',&quot;' + String.fromCharCode(x['evt'].charCode) + '&quot;, {ctrlKey:' +x['evt'].ctrlKey </span>
<a href="#l84.91"></a><span id="l84.91" class="difflineminus">-              + ', altKey:'+ x['evt'].altKey + ',shiftKey:' + x['evt'].shiftKey + ', metaKey:' + x['evt'].metaKey + '})'; </span>
<a href="#l84.92"></a><span id="l84.92" class="difflineplus">+      return 'keypress(' + x['inspected'].elementText + ',&quot;' + String.fromCharCode(x['evt'].charCode) + '&quot;, {ctrlKey:' +x['evt'].ctrlKey</span>
<a href="#l84.93"></a><span id="l84.93" class="difflineplus">+              + ', altKey:'+ x['evt'].altKey + ',shiftKey:' + x['evt'].shiftKey + ', metaKey:' + x['evt'].metaKey + '})';</span>
<a href="#l84.94"></a><span id="l84.94">     }</span>
<a href="#l84.95"></a><span id="l84.95">    },</span>
<a href="#l84.96"></a><span id="l84.96">   'change': function (x) {return 'type('+x['inspected'].elementText+',&quot;'+x['evt'].target.value+'&quot;)';},</span>
<a href="#l84.97"></a><span id="l84.97">   'dblclick': function (x) { return 'doubleClick('+x['inspected'].elementText+')';},</span>
<a href="#l84.98"></a><span id="l84.98"> }</span>
<a href="#l84.99"></a><span id="l84.99"> </span>
<a href="#l84.100"></a><span id="l84.100"> var cleanupEventsArray = function (recorder_array) {</span>
<a href="#l84.101"></a><span id="l84.101">   var indexesForRemoval = [];</span>
<a href="#l84.102"></a><span id="l84.102">   var type_indexes = [x['evt'].type for each(x in recorder_array)];</span>
<a href="#l84.103"></a><span id="l84.103" class="difflineminus">-  </span>
<a href="#l84.104"></a><span id="l84.104" class="difflineplus">+</span>
<a href="#l84.105"></a><span id="l84.105">   // Convert a set of keypress events to a single type event</span>
<a href="#l84.106"></a><span id="l84.106">   if (arrays.inArray(type_indexes, 'change')) {</span>
<a href="#l84.107"></a><span id="l84.107">     var offset = 0;</span>
<a href="#l84.108"></a><span id="l84.108">     while (arrays.indexOf(type_indexes, 'change', offset) != -1) {</span>
<a href="#l84.109"></a><span id="l84.109">       var eIndex = arrays.indexOf(type_indexes, 'change', offset);</span>
<a href="#l84.110"></a><span id="l84.110">       var e = recorder_array[eIndex];</span>
<a href="#l84.111"></a><span id="l84.111" class="difflineminus">-      if (e['evt'].target.value != undefined &amp;&amp; arrays.compare(e['evt'].target.value, </span>
<a href="#l84.112"></a><span id="l84.112" class="difflineminus">-        [String.fromCharCode(x['evt'].charCode) for </span>
<a href="#l84.113"></a><span id="l84.113" class="difflineplus">+      if (e['evt'].target.value != undefined &amp;&amp; arrays.compare(e['evt'].target.value,</span>
<a href="#l84.114"></a><span id="l84.114" class="difflineplus">+        [String.fromCharCode(x['evt'].charCode) for</span>
<a href="#l84.115"></a><span id="l84.115">         each(x in recorder_array.slice(eIndex - (e['evt'].target.value.length + 1) ,eIndex - 1))</span>
<a href="#l84.116"></a><span id="l84.116">         ])) {</span>
<a href="#l84.117"></a><span id="l84.117">           var i = eIndex - (e['evt'].target.value.length + 1)</span>
<a href="#l84.118"></a><span id="l84.118">           while (i &lt; eIndex) {</span>
<a href="#l84.119"></a><span id="l84.119" class="difflineminus">-            indexesForRemoval.push(i); i++;            </span>
<a href="#l84.120"></a><span id="l84.120" class="difflineplus">+            indexesForRemoval.push(i); i++;</span>
<a href="#l84.121"></a><span id="l84.121">           }</span>
<a href="#l84.122"></a><span id="l84.122" class="difflineminus">-        } else if (e['evt'].target.value != undefined &amp;&amp; arrays.compare(e['evt'].target.value, </span>
<a href="#l84.123"></a><span id="l84.123" class="difflineminus">-        [String.fromCharCode(x['evt'].charCode) for </span>
<a href="#l84.124"></a><span id="l84.124" class="difflineplus">+        } else if (e['evt'].target.value != undefined &amp;&amp; arrays.compare(e['evt'].target.value,</span>
<a href="#l84.125"></a><span id="l84.125" class="difflineplus">+        [String.fromCharCode(x['evt'].charCode) for</span>
<a href="#l84.126"></a><span id="l84.126">         each(x in recorder_array.slice(eIndex - (e['evt'].target.value.length) ,eIndex - 1))</span>
<a href="#l84.127"></a><span id="l84.127">         ])) {</span>
<a href="#l84.128"></a><span id="l84.128">           var i = eIndex - (e['evt'].target.value.length )</span>
<a href="#l84.129"></a><span id="l84.129">           while (i &lt; eIndex) {</span>
<a href="#l84.130"></a><span id="l84.130">             indexesForRemoval.push(i); i++;</span>
<a href="#l84.131"></a><span id="l84.131">           }</span>
<a href="#l84.132"></a><span id="l84.132">         }</span>
<a href="#l84.133"></a><span id="l84.133">       var offset = arrays.indexOf(type_indexes, 'change', offset) + 1;</span>
<a href="#l84.134"></a><span id="l84.134">     }</span>
<a href="#l84.135"></a><span id="l84.135">   }</span>
<a href="#l84.136"></a><span id="l84.136" class="difflineminus">-  </span>
<a href="#l84.137"></a><span id="l84.137" class="difflineplus">+</span>
<a href="#l84.138"></a><span id="l84.138">   // Remove change events with '' as value</span>
<a href="#l84.139"></a><span id="l84.139">   for (i in recorder_array) {</span>
<a href="#l84.140"></a><span id="l84.140">     var x = recorder_array[i];</span>
<a href="#l84.141"></a><span id="l84.141">     if (x['evt'].type ==  &quot;change&quot;) {</span>
<a href="#l84.142"></a><span id="l84.142">       if (x['evt'].target.value == '') {</span>
<a href="#l84.143"></a><span id="l84.143">         indexesForRemoval.push(i);</span>
<a href="#l84.144"></a><span id="l84.144">       }</span>
<a href="#l84.145"></a><span id="l84.145">     }</span>
<a href="#l84.146"></a><span id="l84.146">   }</span>
<a href="#l84.147"></a><span id="l84.147" class="difflineminus">-  </span>
<a href="#l84.148"></a><span id="l84.148" class="difflineplus">+</span>
<a href="#l84.149"></a><span id="l84.149">   // Cleanup trailing cmd+~</span>
<a href="#l84.150"></a><span id="l84.150">   try {</span>
<a href="#l84.151"></a><span id="l84.151">     var i = 1;</span>
<a href="#l84.152"></a><span id="l84.152">     while (recorder_array[recorder_array.length - i]['inspected'].controllerText == 'new mozmill.controller.MozMillController(mozmill.utils.getWindowByTitle(&quot;MozMill IDE&quot;))') {</span>
<a href="#l84.153"></a><span id="l84.153">       i++;</span>
<a href="#l84.154"></a><span id="l84.154">       if (recorder_array[recorder_array.length - i]['evt'].charCode == 96) {</span>
<a href="#l84.155"></a><span id="l84.155">         indexesForRemoval.push(recorder_array.length - i);</span>
<a href="#l84.156"></a><span id="l84.156" class="difflineminus">-      }   </span>
<a href="#l84.157"></a><span id="l84.157" class="difflineplus">+      }</span>
<a href="#l84.158"></a><span id="l84.158">     }</span>
<a href="#l84.159"></a><span id="l84.159">   } catch(err){}</span>
<a href="#l84.160"></a><span id="l84.160" class="difflineminus">-  </span>
<a href="#l84.161"></a><span id="l84.161" class="difflineplus">+</span>
<a href="#l84.162"></a><span id="l84.162">   // Remove any actions in the mozmill window</span>
<a href="#l84.163"></a><span id="l84.163">   for (i in recorder_array) {</span>
<a href="#l84.164"></a><span id="l84.164">     var inspected = recorder_array[i]['inspected'];</span>
<a href="#l84.165"></a><span id="l84.165">     if (inspected.controllerText == 'new mozmill.controller.MozMillController(mozmill.utils.getWindowByTitle(&quot;MozMill IDE&quot;))') {</span>
<a href="#l84.166"></a><span id="l84.166">       indexesForRemoval.push(i);</span>
<a href="#l84.167"></a><span id="l84.167">     }</span>
<a href="#l84.168"></a><span id="l84.168">   }</span>
<a href="#l84.169"></a><span id="l84.169" class="difflineminus">-  </span>
<a href="#l84.170"></a><span id="l84.170" class="difflineplus">+</span>
<a href="#l84.171"></a><span id="l84.171">   var narray = [];</span>
<a href="#l84.172"></a><span id="l84.172">   for (i in recorder_array) {</span>
<a href="#l84.173"></a><span id="l84.173">     if (!arrays.inArray(indexesForRemoval, i)) {</span>
<a href="#l84.174"></a><span id="l84.174">       narray.push(recorder_array[i]);</span>
<a href="#l84.175"></a><span id="l84.175">     }</span>
<a href="#l84.176"></a><span id="l84.176">   }</span>
<a href="#l84.177"></a><span id="l84.177" class="difflineminus">-  </span>
<a href="#l84.178"></a><span id="l84.178" class="difflineplus">+</span>
<a href="#l84.179"></a><span id="l84.179">   return narray;</span>
<a href="#l84.180"></a><span id="l84.180"> }</span>
<a href="#l84.181"></a><span id="l84.181"> </span>
<a href="#l84.182"></a><span id="l84.182"> var getRecordedScript = function (recorder_array) {</span>
<a href="#l84.183"></a><span id="l84.183">   var setup = {};</span>
<a href="#l84.184"></a><span id="l84.184">   var test = [];</span>
<a href="#l84.185"></a><span id="l84.185" class="difflineminus">-  </span>
<a href="#l84.186"></a><span id="l84.186" class="difflineplus">+</span>
<a href="#l84.187"></a><span id="l84.187">   var recorder_array = cleanupEventsArray(getEventSet(recorder_array));</span>
<a href="#l84.188"></a><span id="l84.188" class="difflineminus">-  </span>
<a href="#l84.189"></a><span id="l84.189" class="difflineplus">+</span>
<a href="#l84.190"></a><span id="l84.190">   for each(x in recorder_array) {</span>
<a href="#l84.191"></a><span id="l84.191">     var inspected = x['inspected'];</span>
<a href="#l84.192"></a><span id="l84.192">     if (!setup[inspected.controllerText]) {</span>
<a href="#l84.193"></a><span id="l84.193">       if (objects.getLength(setup) &gt; 0) {</span>
<a href="#l84.194"></a><span id="l84.194">         var ext = String(objects.getLength(setup) + 1);</span>
<a href="#l84.195"></a><span id="l84.195">       } else {</span>
<a href="#l84.196"></a><span id="l84.196">         var ext = '';</span>
<a href="#l84.197"></a><span id="l84.197">       }</span>
<a href="#l84.198"></a><span id="l84.198" class="difflineat">@@ -179,17 +179,17 @@ var getRecordedScript = function (record</span>
<a href="#l84.199"></a><span id="l84.199">     }</span>
<a href="#l84.200"></a><span id="l84.200">     var methodString = recorderMethodCases[x['evt'].type](x).replace(inspected.documentString, inspected.documentString.replace('controller.', setup[inspected.controllerText]+'.'))</span>
<a href="#l84.201"></a><span id="l84.201"> </span>
<a href="#l84.202"></a><span id="l84.202">     if (x['evt'].button == 2){</span>
<a href="#l84.203"></a><span id="l84.203">       methodString = methodString.replace(&quot;click&quot;, &quot;rightClick&quot;);</span>
<a href="#l84.204"></a><span id="l84.204">     }</span>
<a href="#l84.205"></a><span id="l84.205">     test.push(setup[inspected.controllerText]  + '.' + methodString + ';');</span>
<a href="#l84.206"></a><span id="l84.206">   }</span>
<a href="#l84.207"></a><span id="l84.207" class="difflineminus">-  </span>
<a href="#l84.208"></a><span id="l84.208" class="difflineplus">+</span>
<a href="#l84.209"></a><span id="l84.209">   var rscript = ['var setupModule = function(module) {',];</span>
<a href="#l84.210"></a><span id="l84.210">   for (i in setup) {</span>
<a href="#l84.211"></a><span id="l84.211">     rscript.push(&quot;  &quot;+setup[i]+' = '+i+';')</span>
<a href="#l84.212"></a><span id="l84.212">   }</span>
<a href="#l84.213"></a><span id="l84.213">   rscript.push('}')</span>
<a href="#l84.214"></a><span id="l84.214">   rscript.push('')</span>
<a href="#l84.215"></a><span id="l84.215">   rscript.push('var testRecorded = function () {')</span>
<a href="#l84.216"></a><span id="l84.216">   for each(t in test){</span>
<a href="#l84.217"></a><span id="l84.217" class="difflineat">@@ -236,17 +236,17 @@ RecorderConnector.prototype.bindListener</span>
<a href="#l84.218"></a><span id="l84.218"> RecorderConnector.prototype.unbindListeners = function(frame) {</span>
<a href="#l84.219"></a><span id="l84.219">   try {</span>
<a href="#l84.220"></a><span id="l84.220">     frame.removeEventListener('click', this.dispatch, false);</span>
<a href="#l84.221"></a><span id="l84.221">     frame.removeEventListener('dblclick', this.dispatch, false);</span>
<a href="#l84.222"></a><span id="l84.222">     frame.removeEventListener('change', this.dispatch, false);</span>
<a href="#l84.223"></a><span id="l84.223">     frame.removeEventListener('keypress', this.dispatch, false);</span>
<a href="#l84.224"></a><span id="l84.224">   }</span>
<a href="#l84.225"></a><span id="l84.225">   catch(error) {}</span>
<a href="#l84.226"></a><span id="l84.226" class="difflineminus">-  </span>
<a href="#l84.227"></a><span id="l84.227" class="difflineplus">+</span>
<a href="#l84.228"></a><span id="l84.228">   var iframeCount = frame.window.frames.length;</span>
<a href="#l84.229"></a><span id="l84.229">   var iframeArray = frame.window.frames;</span>
<a href="#l84.230"></a><span id="l84.230"> </span>
<a href="#l84.231"></a><span id="l84.231">   for (var i = 0; i &lt; iframeCount; i++)</span>
<a href="#l84.232"></a><span id="l84.232">     this.unbindListeners(iframeArray[i]);</span>
<a href="#l84.233"></a><span id="l84.233"> }</span>
<a href="#l84.234"></a><span id="l84.234"> </span>
<a href="#l84.235"></a><span id="l84.235"> //When a new win dom window gets opened</span>
<a href="#l84.236"></a><span id="l84.236" class="difflineat">@@ -264,47 +264,47 @@ RecorderConnector.prototype.on = functio</span>
<a href="#l84.237"></a><span id="l84.237">   this.ison = true;</span>
<a href="#l84.238"></a><span id="l84.238"> </span>
<a href="#l84.239"></a><span id="l84.239">   // update UI</span>
<a href="#l84.240"></a><span id="l84.240">   $(&quot;#recordToggle&quot;).text(&quot;Stop Recording&quot;);</span>
<a href="#l84.241"></a><span id="l84.241">   $(&quot;#recordToggle&quot;).addClass(&quot;ui-state-highlight&quot;);</span>
<a href="#l84.242"></a><span id="l84.242">   $(&quot;#recordToggle&quot;).addClass(&quot;ui-priority-primary&quot;);</span>
<a href="#l84.243"></a><span id="l84.243"> </span>
<a href="#l84.244"></a><span id="l84.244">   newFile();</span>
<a href="#l84.245"></a><span id="l84.245" class="difflineminus">-  </span>
<a href="#l84.246"></a><span id="l84.246" class="difflineplus">+</span>
<a href="#l84.247"></a><span id="l84.247">   for each(win in utils.getWindows()) {</span>
<a href="#l84.248"></a><span id="l84.248">     if (win.document.title != &quot;MozMill IDE&quot;){</span>
<a href="#l84.249"></a><span id="l84.249">       this.bindListeners(win);</span>
<a href="#l84.250"></a><span id="l84.250">     }</span>
<a href="#l84.251"></a><span id="l84.251">   }</span>
<a href="#l84.252"></a><span id="l84.252"> </span>
<a href="#l84.253"></a><span id="l84.253">   var mmWindows = utils.getWindows('navigator:browser');</span>
<a href="#l84.254"></a><span id="l84.254">   if (mmWindows.length != 0){</span>
<a href="#l84.255"></a><span id="l84.255">     mmWindows[0].focus();</span>
<a href="#l84.256"></a><span id="l84.256">   }</span>
<a href="#l84.257"></a><span id="l84.257" class="difflineminus">-  </span>
<a href="#l84.258"></a><span id="l84.258" class="difflineplus">+</span>
<a href="#l84.259"></a><span id="l84.259">   var observerService =</span>
<a href="#l84.260"></a><span id="l84.260">     Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l84.261"></a><span id="l84.261">       .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l84.262"></a><span id="l84.262" class="difflineminus">-  </span>
<a href="#l84.263"></a><span id="l84.263" class="difflineplus">+</span>
<a href="#l84.264"></a><span id="l84.264">   //Attach the new window open listener</span>
<a href="#l84.265"></a><span id="l84.265">   observerService.addObserver(this.observer, &quot;toplevel-window-ready&quot;, false);</span>
<a href="#l84.266"></a><span id="l84.266" class="difflineminus">-  </span>
<a href="#l84.267"></a><span id="l84.267" class="difflineplus">+</span>
<a href="#l84.268"></a><span id="l84.268">   currentRecorderArray = [];</span>
<a href="#l84.269"></a><span id="l84.269"> };</span>
<a href="#l84.270"></a><span id="l84.270"> </span>
<a href="#l84.271"></a><span id="l84.271"> RecorderConnector.prototype.off = function() {</span>
<a href="#l84.272"></a><span id="l84.272">   this.ison = false;</span>
<a href="#l84.273"></a><span id="l84.273"> </span>
<a href="#l84.274"></a><span id="l84.274">   //update UI</span>
<a href="#l84.275"></a><span id="l84.275">   $(&quot;#recordToggle&quot;).text(&quot;Record&quot;);</span>
<a href="#l84.276"></a><span id="l84.276">   $(&quot;#recordToggle&quot;).removeClass(&quot;ui-state-highlight&quot;);</span>
<a href="#l84.277"></a><span id="l84.277">   $(&quot;#recordToggle&quot;).removeClass(&quot;ui-priority-primary&quot;);</span>
<a href="#l84.278"></a><span id="l84.278"> </span>
<a href="#l84.279"></a><span id="l84.279" class="difflineminus">-  </span>
<a href="#l84.280"></a><span id="l84.280" class="difflineplus">+</span>
<a href="#l84.281"></a><span id="l84.281">   for each(win in utils.getWindows()) {</span>
<a href="#l84.282"></a><span id="l84.282">     this.unbindListeners(win);</span>
<a href="#l84.283"></a><span id="l84.283">   }</span>
<a href="#l84.284"></a><span id="l84.284">   var r = getRecordedScript(currentRecorderArray);</span>
<a href="#l84.285"></a><span id="l84.285"> </span>
<a href="#l84.286"></a><span id="l84.286">   editor.setContent(r);</span>
<a href="#l84.287"></a><span id="l84.287">   currentRecorderArray = [];</span>
<a href="#l84.288"></a><span id="l84.288">   //remove new window listener</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/shell.js</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/shell.js</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -4,105 +4,105 @@ var utils = {}; Components.utils.import(</span>
<a href="#l85.4"></a><span id="l85.4"> var elementslib = {}; Components.utils.import('resource://mozmill/modules/elementslib.js', elementslib);</span>
<a href="#l85.5"></a><span id="l85.5"> var frame = {}; Components.utils.import('resource://mozmill/modules/frame.js', frame);</span>
<a href="#l85.6"></a><span id="l85.6"> </span>
<a href="#l85.7"></a><span id="l85.7"> var that = this;</span>
<a href="#l85.8"></a><span id="l85.8"> </span>
<a href="#l85.9"></a><span id="l85.9"> var hwindow = Components.classes[&quot;@mozilla.org/appshell/appShellService;1&quot;]</span>
<a href="#l85.10"></a><span id="l85.10">                 .getService(Components.interfaces.nsIAppShellService)</span>
<a href="#l85.11"></a><span id="l85.11">                 .hiddenDOMWindow;</span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-                </span>
<a href="#l85.13"></a><span id="l85.13" class="difflineplus">+</span>
<a href="#l85.14"></a><span id="l85.14"> var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l85.15"></a><span id="l85.15">            .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l85.16"></a><span id="l85.16"> </span>
<a href="#l85.17"></a><span id="l85.17"> var dir = function(obj){</span>
<a href="#l85.18"></a><span id="l85.18">  for (prop in obj){</span>
<a href="#l85.19"></a><span id="l85.19">     shell.send(prop);</span>
<a href="#l85.20"></a><span id="l85.20">   }</span>
<a href="#l85.21"></a><span id="l85.21"> }</span>
<a href="#l85.22"></a><span id="l85.22" class="difflineminus">-           </span>
<a href="#l85.23"></a><span id="l85.23" class="difflineplus">+</span>
<a href="#l85.24"></a><span id="l85.24"> var shell = new function(){</span>
<a href="#l85.25"></a><span id="l85.25">   this.hist = [];</span>
<a href="#l85.26"></a><span id="l85.26">   this.histPos = 0;</span>
<a href="#l85.27"></a><span id="l85.27">   this.histLength = 20;</span>
<a href="#l85.28"></a><span id="l85.28" class="difflineminus">-  </span>
<a href="#l85.29"></a><span id="l85.29" class="difflineplus">+</span>
<a href="#l85.30"></a><span id="l85.30">   //generate a new output entry node</span>
<a href="#l85.31"></a><span id="l85.31">   this.entry = function(val){</span>
<a href="#l85.32"></a><span id="l85.32">     var nd = document.createElement('div');</span>
<a href="#l85.33"></a><span id="l85.33">     nd.style.textAlign = &quot;left&quot;;</span>
<a href="#l85.34"></a><span id="l85.34">     nd.style.paddingLeft = &quot;5px&quot;;</span>
<a href="#l85.35"></a><span id="l85.35">     nd.style.paddingBottom = &quot;1px&quot;;</span>
<a href="#l85.36"></a><span id="l85.36">     nd.style.font = &quot;12px arial&quot;;</span>
<a href="#l85.37"></a><span id="l85.37">     nd.innerHTML = val;</span>
<a href="#l85.38"></a><span id="l85.38">     nd.style.display = &quot;block&quot;;</span>
<a href="#l85.39"></a><span id="l85.39">     nd.style.width = &quot;99%&quot;;</span>
<a href="#l85.40"></a><span id="l85.40"> </span>
<a href="#l85.41"></a><span id="l85.41">     return nd;</span>
<a href="#l85.42"></a><span id="l85.42" class="difflineminus">-  }  </span>
<a href="#l85.43"></a><span id="l85.43" class="difflineplus">+  }</span>
<a href="#l85.44"></a><span id="l85.44">   //generate a new output entry node</span>
<a href="#l85.45"></a><span id="l85.45">   this.cmdEntry = function(val){</span>
<a href="#l85.46"></a><span id="l85.46">     nd = shell.entry(val);</span>
<a href="#l85.47"></a><span id="l85.47">     nd.style.fontWeight = &quot;bold&quot;;</span>
<a href="#l85.48"></a><span id="l85.48">     return nd;</span>
<a href="#l85.49"></a><span id="l85.49">   };</span>
<a href="#l85.50"></a><span id="l85.50" class="difflineminus">-  </span>
<a href="#l85.51"></a><span id="l85.51" class="difflineplus">+</span>
<a href="#l85.52"></a><span id="l85.52">   this.sin = function(){</span>
<a href="#l85.53"></a><span id="l85.53">     return document.getElementById('shellInput');</span>
<a href="#l85.54"></a><span id="l85.54">   };</span>
<a href="#l85.55"></a><span id="l85.55" class="difflineminus">-  </span>
<a href="#l85.56"></a><span id="l85.56" class="difflineplus">+</span>
<a href="#l85.57"></a><span id="l85.57">   this.sout = function(){</span>
<a href="#l85.58"></a><span id="l85.58">     return document.getElementById('shellOutput');</span>
<a href="#l85.59"></a><span id="l85.59">   };</span>
<a href="#l85.60"></a><span id="l85.60" class="difflineminus">-  </span>
<a href="#l85.61"></a><span id="l85.61" class="difflineplus">+</span>
<a href="#l85.62"></a><span id="l85.62">   this.sendCmd = function(s){</span>
<a href="#l85.63"></a><span id="l85.63">     shell.sout().insertBefore(shell.cmdEntry('&lt;font color=&quot;blue&quot;&gt;mmsh%&lt;/font&gt; &lt;font color=&quot;tan&quot;&gt;'+s+'&lt;/font&gt;'), shell.sout().childNodes[0]);</span>
<a href="#l85.64"></a><span id="l85.64">   };</span>
<a href="#l85.65"></a><span id="l85.65"> </span>
<a href="#l85.66"></a><span id="l85.66">   //send output to console</span>
<a href="#l85.67"></a><span id="l85.67">   this.send = function(s){</span>
<a href="#l85.68"></a><span id="l85.68">     if (s == undefined){</span>
<a href="#l85.69"></a><span id="l85.69">       return;</span>
<a href="#l85.70"></a><span id="l85.70" class="difflineminus">-    }  </span>
<a href="#l85.71"></a><span id="l85.71" class="difflineplus">+    }</span>
<a href="#l85.72"></a><span id="l85.72">     shell.sout().insertBefore(shell.entry(s), shell.sout().childNodes[0]);</span>
<a href="#l85.73"></a><span id="l85.73">   };</span>
<a href="#l85.74"></a><span id="l85.74" class="difflineminus">-  </span>
<a href="#l85.75"></a><span id="l85.75" class="difflineplus">+</span>
<a href="#l85.76"></a><span id="l85.76">   this.getWindows = function(){</span>
<a href="#l85.77"></a><span id="l85.77">      var enumerator = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l85.78"></a><span id="l85.78">                       .getService(Components.interfaces.nsIWindowMediator)</span>
<a href="#l85.79"></a><span id="l85.79">                       .getEnumerator(&quot;&quot;);</span>
<a href="#l85.80"></a><span id="l85.80">       var s = &quot;&quot;;</span>
<a href="#l85.81"></a><span id="l85.81">       //define an array we can access</span>
<a href="#l85.82"></a><span id="l85.82">       shell.windows = [];</span>
<a href="#l85.83"></a><span id="l85.83">       windows = shell.windows;</span>
<a href="#l85.84"></a><span id="l85.84">       var c = 1;</span>
<a href="#l85.85"></a><span id="l85.85">       while(enumerator.hasMoreElements()) {</span>
<a href="#l85.86"></a><span id="l85.86">         var win = enumerator.getNext();</span>
<a href="#l85.87"></a><span id="l85.87">         shell.windows.push(win);</span>
<a href="#l85.88"></a><span id="l85.88">         c++;</span>
<a href="#l85.89"></a><span id="l85.89">       }</span>
<a href="#l85.90"></a><span id="l85.90">   }</span>
<a href="#l85.91"></a><span id="l85.91" class="difflineminus">-  </span>
<a href="#l85.92"></a><span id="l85.92" class="difflineplus">+</span>
<a href="#l85.93"></a><span id="l85.93">   this.handle = function(cmd){</span>
<a href="#l85.94"></a><span id="l85.94">     //if the command has spaces -- args</span>
<a href="#l85.95"></a><span id="l85.95">     var cmdArr = cmd.split(' ');</span>
<a href="#l85.96"></a><span id="l85.96"> </span>
<a href="#l85.97"></a><span id="l85.97">     switch(cmdArr[0]){</span>
<a href="#l85.98"></a><span id="l85.98" class="difflineminus">-    //clear window </span>
<a href="#l85.99"></a><span id="l85.99" class="difflineplus">+    //clear window</span>
<a href="#l85.100"></a><span id="l85.100">     case 'clear':</span>
<a href="#l85.101"></a><span id="l85.101">       shell.sout().innerHTML = &quot;&quot;;</span>
<a href="#l85.102"></a><span id="l85.102">       break;</span>
<a href="#l85.103"></a><span id="l85.103" class="difflineminus">-    </span>
<a href="#l85.104"></a><span id="l85.104" class="difflineplus">+</span>
<a href="#l85.105"></a><span id="l85.105">     case 'windows':</span>
<a href="#l85.106"></a><span id="l85.106">       shell.getWindows();</span>
<a href="#l85.107"></a><span id="l85.107">       for (win in shell.windows){</span>
<a href="#l85.108"></a><span id="l85.108" class="difflineminus">-        shell.send( win+'. '+shell.windows[win].document.documentElement.getAttribute('windowtype') + ': ' + shell.windows[win].title); </span>
<a href="#l85.109"></a><span id="l85.109" class="difflineplus">+        shell.send( win+'. '+shell.windows[win].document.documentElement.getAttribute('windowtype') + ': ' + shell.windows[win].title);</span>
<a href="#l85.110"></a><span id="l85.110">       }</span>
<a href="#l85.111"></a><span id="l85.111">       shell.sendCmd(cmd);</span>
<a href="#l85.112"></a><span id="l85.112">       break;</span>
<a href="#l85.113"></a><span id="l85.113" class="difflineminus">-      </span>
<a href="#l85.114"></a><span id="l85.114" class="difflineplus">+</span>
<a href="#l85.115"></a><span id="l85.115">     case 'dir':</span>
<a href="#l85.116"></a><span id="l85.116">       //if has an arg</span>
<a href="#l85.117"></a><span id="l85.117">       if (cmdArr[1]){</span>
<a href="#l85.118"></a><span id="l85.118">         try {</span>
<a href="#l85.119"></a><span id="l85.119">           var arg = eval(cmdArr[1]);</span>
<a href="#l85.120"></a><span id="l85.120">           for (prop in arg){</span>
<a href="#l85.121"></a><span id="l85.121">             shell.send(prop);</span>
<a href="#l85.122"></a><span id="l85.122">           }</span>
<a href="#l85.123"></a><span id="l85.123" class="difflineat">@@ -111,66 +111,66 @@ var shell = new function(){</span>
<a href="#l85.124"></a><span id="l85.124">         }</span>
<a href="#l85.125"></a><span id="l85.125">       }</span>
<a href="#l85.126"></a><span id="l85.126">       else {</span>
<a href="#l85.127"></a><span id="l85.127">         for (prop in that){</span>
<a href="#l85.128"></a><span id="l85.128">           shell.send(prop);</span>
<a href="#l85.129"></a><span id="l85.129">         }</span>
<a href="#l85.130"></a><span id="l85.130">       }</span>
<a href="#l85.131"></a><span id="l85.131">       shell.sendCmd(cmd);</span>
<a href="#l85.132"></a><span id="l85.132" class="difflineminus">-      break;    </span>
<a href="#l85.133"></a><span id="l85.133" class="difflineplus">+      break;</span>
<a href="#l85.134"></a><span id="l85.134">     case 'help':</span>
<a href="#l85.135"></a><span id="l85.135">       var opts = [];</span>
<a href="#l85.136"></a><span id="l85.136">       opts.push('dir -- default shows you the current scope, \'dir obj\' or \'dir(obj)\' will show you the properties of the object.');</span>
<a href="#l85.137"></a><span id="l85.137">       opts.push('window -- reference to current content window.');</span>
<a href="#l85.138"></a><span id="l85.138">       opts.push('windows -- show you all the open in the browser.');</span>
<a href="#l85.139"></a><span id="l85.139">       opts.push('windows[x] -- access the window object of your choice');</span>
<a href="#l85.140"></a><span id="l85.140">       opts.push('elementslib -- bag of fun tricks for doing element lookups in the browser.');</span>
<a href="#l85.141"></a><span id="l85.141">       opts.push('hwindow -- ...');</span>
<a href="#l85.142"></a><span id="l85.142">       opts.push('controller -- ...');</span>
<a href="#l85.143"></a><span id="l85.143">       opts.push('events -- ...');</span>
<a href="#l85.144"></a><span id="l85.144" class="difflineminus">-      opts.push('utils -- ...');      </span>
<a href="#l85.145"></a><span id="l85.145" class="difflineplus">+      opts.push('utils -- ...');</span>
<a href="#l85.146"></a><span id="l85.146">       opts.push('clear -- reset the output.');</span>
<a href="#l85.147"></a><span id="l85.147"> </span>
<a href="#l85.148"></a><span id="l85.148">       while(opts.length != 0){</span>
<a href="#l85.149"></a><span id="l85.149">         this.send(opts.pop());</span>
<a href="#l85.150"></a><span id="l85.150">       }</span>
<a href="#l85.151"></a><span id="l85.151">       this.sendCmd(cmd);</span>
<a href="#l85.152"></a><span id="l85.152" class="difflineminus">-      break;  </span>
<a href="#l85.153"></a><span id="l85.153" class="difflineplus">+      break;</span>
<a href="#l85.154"></a><span id="l85.154">     //defaut is to eval</span>
<a href="#l85.155"></a><span id="l85.155">     default:</span>
<a href="#l85.156"></a><span id="l85.156">        try {</span>
<a href="#l85.157"></a><span id="l85.157">          var res = eval.call(that,cmd);</span>
<a href="#l85.158"></a><span id="l85.158">          if ((cmd.indexOf('=') == -1) &amp;&amp; (res == null)){</span>
<a href="#l85.159"></a><span id="l85.159">            shell.send(cmd + ' is null.')</span>
<a href="#l85.160"></a><span id="l85.160">          }</span>
<a href="#l85.161"></a><span id="l85.161">          else {</span>
<a href="#l85.162"></a><span id="l85.162">            shell.send(res);</span>
<a href="#l85.163"></a><span id="l85.163">          }</span>
<a href="#l85.164"></a><span id="l85.164">        }</span>
<a href="#l85.165"></a><span id="l85.165">        catch(err){</span>
<a href="#l85.166"></a><span id="l85.166">          shell.send('&lt;font color=&quot;red&quot;&gt;Error:'+err+&quot;&lt;/font&gt;&quot;);</span>
<a href="#l85.167"></a><span id="l85.167">        }</span>
<a href="#l85.168"></a><span id="l85.168">        shell.sendCmd(cmd);</span>
<a href="#l85.169"></a><span id="l85.169">     }</span>
<a href="#l85.170"></a><span id="l85.170" class="difflineminus">-    </span>
<a href="#l85.171"></a><span id="l85.171" class="difflineplus">+</span>
<a href="#l85.172"></a><span id="l85.172">     shell.sin().value = &quot;&quot;;</span>
<a href="#l85.173"></a><span id="l85.173">     shell.sin().focus();</span>
<a href="#l85.174"></a><span id="l85.174">   };</span>
<a href="#l85.175"></a><span id="l85.175" class="difflineminus">-  </span>
<a href="#l85.176"></a><span id="l85.176" class="difflineplus">+</span>
<a href="#l85.177"></a><span id="l85.177">   this.omc = function(event){</span>
<a href="#l85.178"></a><span id="l85.178">     if (event.target.value == &quot;Type commands here...&quot;){</span>
<a href="#l85.179"></a><span id="l85.179">       event.target.value = &quot;&quot;;</span>
<a href="#l85.180"></a><span id="l85.180">     }</span>
<a href="#l85.181"></a><span id="l85.181">   };</span>
<a href="#l85.182"></a><span id="l85.182" class="difflineminus">-  </span>
<a href="#l85.183"></a><span id="l85.183" class="difflineplus">+</span>
<a href="#l85.184"></a><span id="l85.184">   this.init = function(){</span>
<a href="#l85.185"></a><span id="l85.185">     document.getElementById('shellInput').addEventListener(&quot;keypress&quot;, shell.okp, false);</span>
<a href="#l85.186"></a><span id="l85.186">     document.getElementById('shellInput').addEventListener(&quot;mousedown&quot;, shell.omc, false);</span>
<a href="#l85.187"></a><span id="l85.187" class="difflineminus">-    </span>
<a href="#l85.188"></a><span id="l85.188" class="difflineplus">+</span>
<a href="#l85.189"></a><span id="l85.189">     document.getElementById('shellInput').addEventListener(&quot;keydown&quot;, function(event){</span>
<a href="#l85.190"></a><span id="l85.190">       if (event.target.value == &quot;Type commands here...&quot;){</span>
<a href="#l85.191"></a><span id="l85.191">         event.target.value = &quot;&quot;;</span>
<a href="#l85.192"></a><span id="l85.192">       }</span>
<a href="#l85.193"></a><span id="l85.193">       //if there is a command history</span>
<a href="#l85.194"></a><span id="l85.194">       if (shell.hist.length != 0){</span>
<a href="#l85.195"></a><span id="l85.195">         //uparrow</span>
<a href="#l85.196"></a><span id="l85.196">         if ((event.keyCode == 38) &amp;&amp; (event.charCode == 0) &amp;&amp; (event.shiftKey == true)){</span>
<a href="#l85.197"></a><span id="l85.197" class="difflineat">@@ -181,25 +181,25 @@ var shell = new function(){</span>
<a href="#l85.198"></a><span id="l85.198">           }</span>
<a href="#l85.199"></a><span id="l85.199">           shell.sin().value = shell.hist[shell.histPos];</span>
<a href="#l85.200"></a><span id="l85.200">         }</span>
<a href="#l85.201"></a><span id="l85.201">         //downarrow</span>
<a href="#l85.202"></a><span id="l85.202">         if ((event.keyCode == 40) &amp;&amp; (event.charCode == 0) &amp;&amp; (event.shiftKey == true)){</span>
<a href="#l85.203"></a><span id="l85.203">           if (shell.histPos == 0){</span>
<a href="#l85.204"></a><span id="l85.204">             shell.histPos = shell.hist.length -1;</span>
<a href="#l85.205"></a><span id="l85.205">           } else {</span>
<a href="#l85.206"></a><span id="l85.206" class="difflineminus">-           shell.histPos--; </span>
<a href="#l85.207"></a><span id="l85.207" class="difflineplus">+           shell.histPos--;</span>
<a href="#l85.208"></a><span id="l85.208">           }</span>
<a href="#l85.209"></a><span id="l85.209">           shell.sin().value = shell.hist[shell.histPos];</span>
<a href="#l85.210"></a><span id="l85.210">         }</span>
<a href="#l85.211"></a><span id="l85.211">       }</span>
<a href="#l85.212"></a><span id="l85.212">     }, false);</span>
<a href="#l85.213"></a><span id="l85.213" class="difflineminus">-    </span>
<a href="#l85.214"></a><span id="l85.214" class="difflineplus">+</span>
<a href="#l85.215"></a><span id="l85.215">   };</span>
<a href="#l85.216"></a><span id="l85.216" class="difflineminus">-  </span>
<a href="#l85.217"></a><span id="l85.217" class="difflineplus">+</span>
<a href="#l85.218"></a><span id="l85.218">   this.enter = function(event){</span>
<a href="#l85.219"></a><span id="l85.219">     var inp = document.getElementById('shellInput');</span>
<a href="#l85.220"></a><span id="l85.220">     //inp.value = strings.trim(inp.value);</span>
<a href="#l85.221"></a><span id="l85.221">     //ignore empty returns</span>
<a href="#l85.222"></a><span id="l85.222">     // if ((inp.value == &quot;&quot;) || (inp.value == &quot; &quot;)){</span>
<a href="#l85.223"></a><span id="l85.223">     //       return;</span>
<a href="#l85.224"></a><span id="l85.224">     //     }</span>
<a href="#l85.225"></a><span id="l85.225">     //if we have less than histLength</span>
<a href="#l85.226"></a><span id="l85.226" class="difflineat">@@ -209,17 +209,17 @@ var shell = new function(){</span>
<a href="#l85.227"></a><span id="l85.227">     // }</span>
<a href="#l85.228"></a><span id="l85.228">     // else {</span>
<a href="#l85.229"></a><span id="l85.229">     //   shell.hist.pop();</span>
<a href="#l85.230"></a><span id="l85.230">     //   shell.hist.unshift(inp.value);</span>
<a href="#l85.231"></a><span id="l85.231">     // }</span>
<a href="#l85.232"></a><span id="l85.232">     //pass input commands to the handler</span>
<a href="#l85.233"></a><span id="l85.233">     shell.handle(inp.value);</span>
<a href="#l85.234"></a><span id="l85.234">   };</span>
<a href="#l85.235"></a><span id="l85.235" class="difflineminus">-  </span>
<a href="#l85.236"></a><span id="l85.236" class="difflineplus">+</span>
<a href="#l85.237"></a><span id="l85.237">   this.okp = function(event){</span>
<a href="#l85.238"></a><span id="l85.238">     if ((event.keyCode == 13) &amp;&amp; (event.shiftKey == false)){</span>
<a href="#l85.239"></a><span id="l85.239">        event.preventDefault();</span>
<a href="#l85.240"></a><span id="l85.240">        shell.enter(event);</span>
<a href="#l85.241"></a><span id="l85.241">      }</span>
<a href="#l85.242"></a><span id="l85.242">   };</span>
<a href="#l85.243"></a><span id="l85.243"> };</span>
<a href="#l85.244"></a><span id="l85.244"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/shortcuts.js</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -1,16 +1,16 @@</span>
<a href="#l86.4"></a><span id="l86.4"> //Determines of the event is accel, meaning</span>
<a href="#l86.5"></a><span id="l86.5"> //ctrl or cmd depending on your platform</span>
<a href="#l86.6"></a><span id="l86.6"> //but none of the other modified keys</span>
<a href="#l86.7"></a><span id="l86.7"> function isAccel(e){</span>
<a href="#l86.8"></a><span id="l86.8">   var plat = navigator.platform;</span>
<a href="#l86.9"></a><span id="l86.9">   var isMac = (plat.indexOf('Mac') != -1);</span>
<a href="#l86.10"></a><span id="l86.10">   var modifiers = e.altKey;</span>
<a href="#l86.11"></a><span id="l86.11" class="difflineminus">-  </span>
<a href="#l86.12"></a><span id="l86.12" class="difflineplus">+</span>
<a href="#l86.13"></a><span id="l86.13">   if ((isMac) &amp;&amp; (!modifiers) &amp;&amp; (e.metaKey) &amp;&amp; (!e.ctrlKey) &amp;&amp; (!e.shiftKey))</span>
<a href="#l86.14"></a><span id="l86.14">     return true;</span>
<a href="#l86.15"></a><span id="l86.15">   else if ((!isMac) &amp;&amp; (!modifiers) &amp;&amp; (e.ctrlKey) &amp;&amp; (e.shiftKey) &amp;&amp; (!e.metaKey))</span>
<a href="#l86.16"></a><span id="l86.16">     return true;</span>
<a href="#l86.17"></a><span id="l86.17">   return false;</span>
<a href="#l86.18"></a><span id="l86.18"> };</span>
<a href="#l86.19"></a><span id="l86.19"> </span>
<a href="#l86.20"></a><span id="l86.20"> //window onkeypress handler for various keyboard</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/content/ui.js</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/content/ui.js</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -18,47 +18,47 @@ function testFinished(){</span>
<a href="#l87.4"></a><span id="l87.4">   window.focus();</span>
<a href="#l87.5"></a><span id="l87.5"> }</span>
<a href="#l87.6"></a><span id="l87.6"> </span>
<a href="#l87.7"></a><span id="l87.7"> function swapTabs(tab){</span>
<a href="#l87.8"></a><span id="l87.8">   $('editorTab').style.display = 'none';</span>
<a href="#l87.9"></a><span id="l87.9">   $('outputTab').style.display = 'none';</span>
<a href="#l87.10"></a><span id="l87.10">   $('eventsTab').style.display = 'none';</span>
<a href="#l87.11"></a><span id="l87.11">   $('shellTab').style.display = 'none';</span>
<a href="#l87.12"></a><span id="l87.12" class="difflineminus">-  </span>
<a href="#l87.13"></a><span id="l87.13" class="difflineplus">+</span>
<a href="#l87.14"></a><span id="l87.14">   $('editorHead').style.background = '#aaa';</span>
<a href="#l87.15"></a><span id="l87.15">   $('outputHead').style.background = '#aaa';</span>
<a href="#l87.16"></a><span id="l87.16">   $('eventsHead').style.background = '#aaa';</span>
<a href="#l87.17"></a><span id="l87.17">   $('shellHead').style.background = '#aaa';</span>
<a href="#l87.18"></a><span id="l87.18" class="difflineminus">-  </span>
<a href="#l87.19"></a><span id="l87.19" class="difflineplus">+</span>
<a href="#l87.20"></a><span id="l87.20">   $(tab+'Tab').style.display = 'block';</span>
<a href="#l87.21"></a><span id="l87.21">   $(tab+'Head').style.background = 'white';</span>
<a href="#l87.22"></a><span id="l87.22"> }</span>
<a href="#l87.23"></a><span id="l87.23"> </span>
<a href="#l87.24"></a><span id="l87.24"> function logicalClear(){</span>
<a href="#l87.25"></a><span id="l87.25">   $('#resOut')[0].innerHTML = '';</span>
<a href="#l87.26"></a><span id="l87.26"> }</span>
<a href="#l87.27"></a><span id="l87.27"> </span>
<a href="#l87.28"></a><span id="l87.28"> function accessOutput(){</span>
<a href="#l87.29"></a><span id="l87.29">   var n = $('resOut');</span>
<a href="#l87.30"></a><span id="l87.30">   var txt = '';</span>
<a href="#l87.31"></a><span id="l87.31">   for (var c = 0; c &lt; n.childNodes.length; c++){</span>
<a href="#l87.32"></a><span id="l87.32">     if (n.childNodes[c].textContent){</span>
<a href="#l87.33"></a><span id="l87.33" class="difflineminus">-      txt += n.childNodes[c].textContent + '\n';  </span>
<a href="#l87.34"></a><span id="l87.34" class="difflineplus">+      txt += n.childNodes[c].textContent + '\n';</span>
<a href="#l87.35"></a><span id="l87.35">     }</span>
<a href="#l87.36"></a><span id="l87.36">     else{</span>
<a href="#l87.37"></a><span id="l87.37">       txt += n.childNodes[c].value + '\n';</span>
<a href="#l87.38"></a><span id="l87.38">     }</span>
<a href="#l87.39"></a><span id="l87.39">   }</span>
<a href="#l87.40"></a><span id="l87.40">   if (txt == undefined){ return; }</span>
<a href="#l87.41"></a><span id="l87.41">   copyToClipboard(txt);</span>
<a href="#l87.42"></a><span id="l87.42"> }</span>
<a href="#l87.43"></a><span id="l87.43"> </span>
<a href="#l87.44"></a><span id="l87.44"> var copyToClipboard = function(str){</span>
<a href="#l87.45"></a><span id="l87.45" class="difflineminus">-  const gClipboardHelper = Components.classes[&quot;@mozilla.org/widget/clipboardhelper;1&quot;] .getService(Components.interfaces.nsIClipboardHelper); </span>
<a href="#l87.46"></a><span id="l87.46" class="difflineplus">+  const gClipboardHelper = Components.classes[&quot;@mozilla.org/widget/clipboardhelper;1&quot;] .getService(Components.interfaces.nsIClipboardHelper);</span>
<a href="#l87.47"></a><span id="l87.47">   gClipboardHelper.copyString(str);</span>
<a href="#l87.48"></a><span id="l87.48"> }</span>
<a href="#l87.49"></a><span id="l87.49"> </span>
<a href="#l87.50"></a><span id="l87.50"> var showFileDialog = function(){</span>
<a href="#l87.51"></a><span id="l87.51">   $(&quot;#fileDialog&quot;).dialog(&quot;open&quot;);</span>
<a href="#l87.52"></a><span id="l87.52"> }</span>
<a href="#l87.53"></a><span id="l87.53"> </span>
<a href="#l87.54"></a><span id="l87.54"> //Align mozmill to all the other open windows in a way that makes it usable</span>
<a href="#l87.55"></a><span id="l87.55" class="difflineat">@@ -73,27 +73,27 @@ var align = function(){</span>
<a href="#l87.56"></a><span id="l87.56">       //move to top left corner</span>
<a href="#l87.57"></a><span id="l87.57">       win.screenY = 0;</span>
<a href="#l87.58"></a><span id="l87.58">       win.screenX = 0;</span>
<a href="#l87.59"></a><span id="l87.59"> </span>
<a href="#l87.60"></a><span id="l87.60">       //make only browser windows big</span>
<a href="#l87.61"></a><span id="l87.61">       if (wintype == &quot;navigator:browser&quot;){</span>
<a href="#l87.62"></a><span id="l87.62">         var width = window.screen.availWidth/2.5;</span>
<a href="#l87.63"></a><span id="l87.63">         var height = window.screen.availHeight;</span>
<a href="#l87.64"></a><span id="l87.64" class="difflineminus">-        win.resizeTo((window.screen.availWidth - width), window.screen.availHeight);        </span>
<a href="#l87.65"></a><span id="l87.65" class="difflineplus">+        win.resizeTo((window.screen.availWidth - width), window.screen.availHeight);</span>
<a href="#l87.66"></a><span id="l87.66">       }</span>
<a href="#l87.67"></a><span id="l87.67">     }</span>
<a href="#l87.68"></a><span id="l87.68">     else {</span>
<a href="#l87.69"></a><span id="l87.69">       var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l87.70"></a><span id="l87.70">                  .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l87.71"></a><span id="l87.71">       var latestbrowser = wm.getMostRecentWindow('navigator:browser');</span>
<a href="#l87.72"></a><span id="l87.72" class="difflineminus">-      </span>
<a href="#l87.73"></a><span id="l87.73" class="difflineplus">+</span>
<a href="#l87.74"></a><span id="l87.74">       //if there is no most recent browser window, use whatever window</span>
<a href="#l87.75"></a><span id="l87.75">       if (!latestbrowser){</span>
<a href="#l87.76"></a><span id="l87.76">         var latestbrowser = wm.getMostRecentWindow('');</span>
<a href="#l87.77"></a><span id="l87.77">       }</span>
<a href="#l87.78"></a><span id="l87.78" class="difflineminus">-      </span>
<a href="#l87.79"></a><span id="l87.79" class="difflineplus">+</span>
<a href="#l87.80"></a><span id="l87.80">       win.screenX = latestbrowser.innerWidth;</span>
<a href="#l87.81"></a><span id="l87.81">       win.screenY = 0;</span>
<a href="#l87.82"></a><span id="l87.82">     }</span>
<a href="#l87.83"></a><span id="l87.83" class="difflineminus">-  }  </span>
<a href="#l87.84"></a><span id="l87.84" class="difflineplus">+  }</span>
<a href="#l87.85"></a><span id="l87.85">     return true;</span>
<a href="#l87.86"></a><span id="l87.86"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l88.1"></a><span id="l88.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js</span>
<a href="#l88.2"></a><span id="l88.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/controller.js</span>
<a href="#l88.3"></a><span id="l88.3" class="difflineat">@@ -101,22 +101,22 @@ waitForEvents = function() {}</span>
<a href="#l88.4"></a><span id="l88.4"> </span>
<a href="#l88.5"></a><span id="l88.5"> waitForEvents.prototype = {</span>
<a href="#l88.6"></a><span id="l88.6">   /**</span>
<a href="#l88.7"></a><span id="l88.7">    *  Initialize list of events for given node</span>
<a href="#l88.8"></a><span id="l88.8">    */</span>
<a href="#l88.9"></a><span id="l88.9">   init : function waitForEvents_init(node, events) {</span>
<a href="#l88.10"></a><span id="l88.10">     if (node.getNode != undefined)</span>
<a href="#l88.11"></a><span id="l88.11">       node = node.getNode();</span>
<a href="#l88.12"></a><span id="l88.12" class="difflineminus">-  </span>
<a href="#l88.13"></a><span id="l88.13" class="difflineplus">+</span>
<a href="#l88.14"></a><span id="l88.14">     this.events = events;</span>
<a href="#l88.15"></a><span id="l88.15">     this.node = node;</span>
<a href="#l88.16"></a><span id="l88.16">     node.firedEvents = {};</span>
<a href="#l88.17"></a><span id="l88.17">     this.registry = {};</span>
<a href="#l88.18"></a><span id="l88.18" class="difflineminus">-  </span>
<a href="#l88.19"></a><span id="l88.19" class="difflineplus">+</span>
<a href="#l88.20"></a><span id="l88.20">     for each(e in events) {</span>
<a href="#l88.21"></a><span id="l88.21">       var listener = function(event) {</span>
<a href="#l88.22"></a><span id="l88.22">         this.firedEvents[event.type] = true;</span>
<a href="#l88.23"></a><span id="l88.23">       }</span>
<a href="#l88.24"></a><span id="l88.24">       this.registry[e] = listener;</span>
<a href="#l88.25"></a><span id="l88.25">       this.registry[e].result = false;</span>
<a href="#l88.26"></a><span id="l88.26">       this.node.addEventListener(e, this.registry[e], true);</span>
<a href="#l88.27"></a><span id="l88.27">     }</span>
<a href="#l88.28"></a><span id="l88.28" class="difflineat">@@ -126,17 +126,17 @@ waitForEvents.prototype = {</span>
<a href="#l88.29"></a><span id="l88.29">    * Wait until all assigned events have been fired</span>
<a href="#l88.30"></a><span id="l88.30">    */</span>
<a href="#l88.31"></a><span id="l88.31">   wait : function waitForEvents_wait(timeout, interval)</span>
<a href="#l88.32"></a><span id="l88.32">   {</span>
<a href="#l88.33"></a><span id="l88.33">     for (var e in this.registry) {</span>
<a href="#l88.34"></a><span id="l88.34">       utils.waitFor(function() {</span>
<a href="#l88.35"></a><span id="l88.35">         return this.node.firedEvents[e] == true;</span>
<a href="#l88.36"></a><span id="l88.36">       }, &quot;Timeout happened before event '&quot; + ex +&quot;' was fired.&quot;, timeout, interval);</span>
<a href="#l88.37"></a><span id="l88.37" class="difflineminus">-  </span>
<a href="#l88.38"></a><span id="l88.38" class="difflineplus">+</span>
<a href="#l88.39"></a><span id="l88.39">       this.node.removeEventListener(e, this.registry[e], true);</span>
<a href="#l88.40"></a><span id="l88.40">     }</span>
<a href="#l88.41"></a><span id="l88.41">   }</span>
<a href="#l88.42"></a><span id="l88.42"> }</span>
<a href="#l88.43"></a><span id="l88.43"> </span>
<a href="#l88.44"></a><span id="l88.44"> </span>
<a href="#l88.45"></a><span id="l88.45"> /**</span>
<a href="#l88.46"></a><span id="l88.46">  * Class to handle menus and context menus</span>
<a href="#l88.47"></a><span id="l88.47" class="difflineat">@@ -623,17 +623,17 @@ MozMillController.prototype.check = func</span>
<a href="#l88.48"></a><span id="l88.48">     throw new Error(&quot;could not find element &quot; + el.getInfo());</span>
<a href="#l88.49"></a><span id="l88.49">     return false;</span>
<a href="#l88.50"></a><span id="l88.50">   }</span>
<a href="#l88.51"></a><span id="l88.51"> </span>
<a href="#l88.52"></a><span id="l88.52">   // If we have a XUL element, unwrap its XPCNativeWrapper</span>
<a href="#l88.53"></a><span id="l88.53">   if (element.namespaceURI == &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;) {</span>
<a href="#l88.54"></a><span id="l88.54">     element = utils.unwrapNode(element);</span>
<a href="#l88.55"></a><span id="l88.55">   }</span>
<a href="#l88.56"></a><span id="l88.56" class="difflineminus">-  </span>
<a href="#l88.57"></a><span id="l88.57" class="difflineplus">+</span>
<a href="#l88.58"></a><span id="l88.58">   state = (typeof(state) == &quot;boolean&quot;) ? state : false;</span>
<a href="#l88.59"></a><span id="l88.59">   if (state != element.checked) {</span>
<a href="#l88.60"></a><span id="l88.60">     this.click(el);</span>
<a href="#l88.61"></a><span id="l88.61">     this.waitFor(function() {</span>
<a href="#l88.62"></a><span id="l88.62">       return element.checked == state;</span>
<a href="#l88.63"></a><span id="l88.63">     }, &quot;Checkbox &quot; + el.getInfo() + &quot; could not be checked/unchecked&quot;, 500);</span>
<a href="#l88.64"></a><span id="l88.64"> </span>
<a href="#l88.65"></a><span id="l88.65">     result = true;</span>
<a href="#l88.66"></a><span id="l88.66" class="difflineat">@@ -815,17 +815,17 @@ MozMillController.prototype.select = fun</span>
<a href="#l88.67"></a><span id="l88.67">   }</span>
<a href="#l88.68"></a><span id="l88.68">   //if we have a xul menulist select accordingly</span>
<a href="#l88.69"></a><span id="l88.69">   else if (element.localName.toLowerCase() == &quot;menulist&quot;) {</span>
<a href="#l88.70"></a><span id="l88.70">     ownerDoc = element.ownerDocument;</span>
<a href="#l88.71"></a><span id="l88.71">     // Unwrap the XUL element's XPCNativeWrapper</span>
<a href="#l88.72"></a><span id="l88.72">     if (element.namespaceURI.toLowerCase() == &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;) {</span>
<a href="#l88.73"></a><span id="l88.73">       element = utils.unwrapNode(element);</span>
<a href="#l88.74"></a><span id="l88.74">     }</span>
<a href="#l88.75"></a><span id="l88.75" class="difflineminus">-    </span>
<a href="#l88.76"></a><span id="l88.76" class="difflineplus">+</span>
<a href="#l88.77"></a><span id="l88.77">     var item = null;</span>
<a href="#l88.78"></a><span id="l88.78"> </span>
<a href="#l88.79"></a><span id="l88.79">     if (indx != undefined) {</span>
<a href="#l88.80"></a><span id="l88.80">       if (indx == -1) {</span>
<a href="#l88.81"></a><span id="l88.81">         events.triggerEvent(element, 'focus', false);</span>
<a href="#l88.82"></a><span id="l88.82">         element.selectedIndex = indx;</span>
<a href="#l88.83"></a><span id="l88.83">         events.triggerEvent(element, 'change', true);</span>
<a href="#l88.84"></a><span id="l88.84"> </span>
<a href="#l88.85"></a><span id="l88.85" class="difflineat">@@ -854,20 +854,20 @@ MozMillController.prototype.select = fun</span>
<a href="#l88.86"></a><span id="l88.86">       for (var i = s = element.selectedIndex; i &lt;= element.itemCount + s; ++i) {</span>
<a href="#l88.87"></a><span id="l88.87">         var entry = element.getItemAtIndex((i + 1) % element.itemCount);</span>
<a href="#l88.88"></a><span id="l88.88">         EventUtils.synthesizeKey(&quot;VK_DOWN&quot;, {}, ownerDoc.defaultView);</span>
<a href="#l88.89"></a><span id="l88.89">         if (entry.label == item.label) {</span>
<a href="#l88.90"></a><span id="l88.90">           break;</span>
<a href="#l88.91"></a><span id="l88.91">         }</span>
<a href="#l88.92"></a><span id="l88.92">         else if (entry.label == &quot;&quot;) i += 1;</span>
<a href="#l88.93"></a><span id="l88.93">       }</span>
<a href="#l88.94"></a><span id="l88.94" class="difflineminus">-      </span>
<a href="#l88.95"></a><span id="l88.95" class="difflineplus">+</span>
<a href="#l88.96"></a><span id="l88.96">       EventUtils.synthesizeMouse(item, 1, 1, {}, ownerDoc.defaultView);</span>
<a href="#l88.97"></a><span id="l88.97">       this.sleep(0);</span>
<a href="#l88.98"></a><span id="l88.98" class="difflineminus">-      </span>
<a href="#l88.99"></a><span id="l88.99" class="difflineplus">+</span>
<a href="#l88.100"></a><span id="l88.100">       frame.events.pass({'function':'Controller.select()'});</span>
<a href="#l88.101"></a><span id="l88.101">       return true;</span>
<a href="#l88.102"></a><span id="l88.102">     } catch (ex) {</span>
<a href="#l88.103"></a><span id="l88.103">       throw new Error('No item selected for element ' + el.getInfo());</span>
<a href="#l88.104"></a><span id="l88.104">       return false;</span>
<a href="#l88.105"></a><span id="l88.105">     }</span>
<a href="#l88.106"></a><span id="l88.106">   }</span>
<a href="#l88.107"></a><span id="l88.107"> };</span>
<a href="#l88.108"></a><span id="l88.108" class="difflineat">@@ -1009,40 +1009,40 @@ MozMillController.prototype.assertNotChe</span>
<a href="#l88.109"></a><span id="l88.109">   if (!element.hasAttribute(&quot;checked&quot;) || element.checked != true){</span>
<a href="#l88.110"></a><span id="l88.110">     frame.events.pass({'function':'Controller.assertNotChecked()'});</span>
<a href="#l88.111"></a><span id="l88.111">     return true;</span>
<a href="#l88.112"></a><span id="l88.112">     }</span>
<a href="#l88.113"></a><span id="l88.113">   throw new Error(&quot;assert failed for not checked element &quot; + el.getInfo());</span>
<a href="#l88.114"></a><span id="l88.114">   return false;</span>
<a href="#l88.115"></a><span id="l88.115"> };</span>
<a href="#l88.116"></a><span id="l88.116"> </span>
<a href="#l88.117"></a><span id="l88.117" class="difflineminus">-/** </span>
<a href="#l88.118"></a><span id="l88.118" class="difflineplus">+/**</span>
<a href="#l88.119"></a><span id="l88.119">  * Assert that an element's javascript property exists or has a particular value</span>
<a href="#l88.120"></a><span id="l88.120">  *</span>
<a href="#l88.121"></a><span id="l88.121">  * if val is undefined, will return true if the property exists.</span>
<a href="#l88.122"></a><span id="l88.122">  * if val is specified, will return true if the property exists and has the correct value</span>
<a href="#l88.123"></a><span id="l88.123">  */</span>
<a href="#l88.124"></a><span id="l88.124"> MozMillController.prototype.assertJSProperty = function(el, attrib, val) {</span>
<a href="#l88.125"></a><span id="l88.125">   var element = el.getNode();</span>
<a href="#l88.126"></a><span id="l88.126">   if (!element){</span>
<a href="#l88.127"></a><span id="l88.127">     throw new Error(&quot;could not find element &quot; + el.getInfo());</span>
<a href="#l88.128"></a><span id="l88.128">     return false;</span>
<a href="#l88.129"></a><span id="l88.129">   }</span>
<a href="#l88.130"></a><span id="l88.130">   var value = element[attrib];</span>
<a href="#l88.131"></a><span id="l88.131">   var res = (value !== undefined &amp;&amp; (val === undefined ? true : String(value) == String(val)));</span>
<a href="#l88.132"></a><span id="l88.132">   if (res) {</span>
<a href="#l88.133"></a><span id="l88.133">     frame.events.pass({'function':'Controller.assertJSProperty(&quot;' + el.getInfo() + '&quot;) : ' + val});</span>
<a href="#l88.134"></a><span id="l88.134">   } else {</span>
<a href="#l88.135"></a><span id="l88.135" class="difflineminus">-    throw new Error(&quot;Controller.assertJSProperty(&quot; + el.getInfo() + &quot;) : &quot; + </span>
<a href="#l88.136"></a><span id="l88.136" class="difflineplus">+    throw new Error(&quot;Controller.assertJSProperty(&quot; + el.getInfo() + &quot;) : &quot; +</span>
<a href="#l88.137"></a><span id="l88.137">                      (val === undefined ? &quot;property '&quot; + attrib + &quot;' doesn't exist&quot; : val + &quot; == &quot; + value));</span>
<a href="#l88.138"></a><span id="l88.138">   }</span>
<a href="#l88.139"></a><span id="l88.139">   return res;</span>
<a href="#l88.140"></a><span id="l88.140"> };</span>
<a href="#l88.141"></a><span id="l88.141"> </span>
<a href="#l88.142"></a><span id="l88.142" class="difflineminus">-/** </span>
<a href="#l88.143"></a><span id="l88.143" class="difflineplus">+/**</span>
<a href="#l88.144"></a><span id="l88.144">  * Assert that an element's javascript property doesn't exist or doesn't have a particular value</span>
<a href="#l88.145"></a><span id="l88.145">  *</span>
<a href="#l88.146"></a><span id="l88.146">  * if val is undefined, will return true if the property doesn't exist.</span>
<a href="#l88.147"></a><span id="l88.147">  * if val is specified, will return true if the property doesn't exist or doesn't have the specified value</span>
<a href="#l88.148"></a><span id="l88.148">  */</span>
<a href="#l88.149"></a><span id="l88.149"> MozMillController.prototype.assertNotJSProperty = function(el, attrib, val) {</span>
<a href="#l88.150"></a><span id="l88.150">   var element = el.getNode();</span>
<a href="#l88.151"></a><span id="l88.151">   if (!element){</span>
<a href="#l88.152"></a><span id="l88.152" class="difflineat">@@ -1055,72 +1055,72 @@ MozMillController.prototype.assertNotJSP</span>
<a href="#l88.153"></a><span id="l88.153">     frame.events.pass({'function':'Controller.assertNotProperty(&quot;' + el.getInfo() + '&quot;) : ' + val});</span>
<a href="#l88.154"></a><span id="l88.154">   } else {</span>
<a href="#l88.155"></a><span id="l88.155">     throw new Error(&quot;Controller.assertNotJSProperty(&quot; + el.getInfo() + &quot;) : &quot; +</span>
<a href="#l88.156"></a><span id="l88.156">                      (val === undefined ? &quot;property '&quot; + attrib + &quot;' exists&quot; : val + &quot; != &quot; + value));</span>
<a href="#l88.157"></a><span id="l88.157">   }</span>
<a href="#l88.158"></a><span id="l88.158">   return res;</span>
<a href="#l88.159"></a><span id="l88.159"> };</span>
<a href="#l88.160"></a><span id="l88.160"> </span>
<a href="#l88.161"></a><span id="l88.161" class="difflineminus">-/** </span>
<a href="#l88.162"></a><span id="l88.162" class="difflineplus">+/**</span>
<a href="#l88.163"></a><span id="l88.163">  * Assert that an element's dom property exists or has a particular value</span>
<a href="#l88.164"></a><span id="l88.164">  *</span>
<a href="#l88.165"></a><span id="l88.165">  * if val is undefined, will return true if the property exists.</span>
<a href="#l88.166"></a><span id="l88.166">  * if val is specified, will return true if the property exists and has the correct value</span>
<a href="#l88.167"></a><span id="l88.167">  */</span>
<a href="#l88.168"></a><span id="l88.168"> MozMillController.prototype.assertDOMProperty = function(el, attrib, val) {</span>
<a href="#l88.169"></a><span id="l88.169">   var element = el.getNode();</span>
<a href="#l88.170"></a><span id="l88.170">   if (!element){</span>
<a href="#l88.171"></a><span id="l88.171">     throw new Error(&quot;could not find element &quot; + el.getInfo());</span>
<a href="#l88.172"></a><span id="l88.172">     return false;</span>
<a href="#l88.173"></a><span id="l88.173">   }</span>
<a href="#l88.174"></a><span id="l88.174">   var value, res = element.hasAttribute(attrib);</span>
<a href="#l88.175"></a><span id="l88.175">   if (res &amp;&amp; val !== undefined) {</span>
<a href="#l88.176"></a><span id="l88.176">     value = element.getAttribute(attrib);</span>
<a href="#l88.177"></a><span id="l88.177">     res = (String(value) == String(val));</span>
<a href="#l88.178"></a><span id="l88.178" class="difflineminus">-  }   </span>
<a href="#l88.179"></a><span id="l88.179" class="difflineminus">- </span>
<a href="#l88.180"></a><span id="l88.180" class="difflineplus">+  }</span>
<a href="#l88.181"></a><span id="l88.181" class="difflineplus">+</span>
<a href="#l88.182"></a><span id="l88.182">   if (res) {</span>
<a href="#l88.183"></a><span id="l88.183">     frame.events.pass({'function':'Controller.assertDOMProperty(&quot;' + el.getInfo() + '&quot;) : ' + val});</span>
<a href="#l88.184"></a><span id="l88.184">   } else {</span>
<a href="#l88.185"></a><span id="l88.185" class="difflineminus">-    throw new Error(&quot;Controller.assertDOMProperty(&quot; + el.getInfo() + &quot;) : &quot; + </span>
<a href="#l88.186"></a><span id="l88.186" class="difflineplus">+    throw new Error(&quot;Controller.assertDOMProperty(&quot; + el.getInfo() + &quot;) : &quot; +</span>
<a href="#l88.187"></a><span id="l88.187">                      (val === undefined ? &quot;property '&quot; + attrib + &quot;' doesn't exist&quot; : val + &quot; == &quot; + value));</span>
<a href="#l88.188"></a><span id="l88.188">   }</span>
<a href="#l88.189"></a><span id="l88.189">   return res;</span>
<a href="#l88.190"></a><span id="l88.190"> };</span>
<a href="#l88.191"></a><span id="l88.191"> </span>
<a href="#l88.192"></a><span id="l88.192" class="difflineminus">-/** </span>
<a href="#l88.193"></a><span id="l88.193" class="difflineplus">+/**</span>
<a href="#l88.194"></a><span id="l88.194">  * Assert that an element's dom property doesn't exist or doesn't have a particular value</span>
<a href="#l88.195"></a><span id="l88.195">  *</span>
<a href="#l88.196"></a><span id="l88.196">  * if val is undefined, will return true if the property doesn't exist.</span>
<a href="#l88.197"></a><span id="l88.197">  * if val is specified, will return true if the property doesn't exist or doesn't have the specified value</span>
<a href="#l88.198"></a><span id="l88.198">  */</span>
<a href="#l88.199"></a><span id="l88.199"> MozMillController.prototype.assertNotDOMProperty = function(el, attrib, val) {</span>
<a href="#l88.200"></a><span id="l88.200">   var element = el.getNode();</span>
<a href="#l88.201"></a><span id="l88.201">   if (!element){</span>
<a href="#l88.202"></a><span id="l88.202">     throw new Error(&quot;could not find element &quot; + el.getInfo());</span>
<a href="#l88.203"></a><span id="l88.203">     return false;</span>
<a href="#l88.204"></a><span id="l88.204">   }</span>
<a href="#l88.205"></a><span id="l88.205">   var value, res = element.hasAttribute(attrib);</span>
<a href="#l88.206"></a><span id="l88.206">   if (res &amp;&amp; val !== undefined) {</span>
<a href="#l88.207"></a><span id="l88.207">     value = element.getAttribute(attrib);</span>
<a href="#l88.208"></a><span id="l88.208">     res = (String(value) == String(val));</span>
<a href="#l88.209"></a><span id="l88.209" class="difflineminus">-  }   </span>
<a href="#l88.210"></a><span id="l88.210" class="difflineplus">+  }</span>
<a href="#l88.211"></a><span id="l88.211">   if (!res) {</span>
<a href="#l88.212"></a><span id="l88.212">     frame.events.pass({'function':'Controller.assertNotDOMProperty(&quot;' + el.getInfo() + '&quot;) : ' + val});</span>
<a href="#l88.213"></a><span id="l88.213">   } else {</span>
<a href="#l88.214"></a><span id="l88.214" class="difflineminus">-    throw new Error(&quot;Controller.assertNotDOMProperty(&quot; + el.getInfo() + &quot;) : &quot; + </span>
<a href="#l88.215"></a><span id="l88.215" class="difflineplus">+    throw new Error(&quot;Controller.assertNotDOMProperty(&quot; + el.getInfo() + &quot;) : &quot; +</span>
<a href="#l88.216"></a><span id="l88.216">                      (val == undefined ? &quot;property '&quot; + attrib + &quot;' exists&quot; : val + &quot; == &quot; + value));</span>
<a href="#l88.217"></a><span id="l88.217">   }</span>
<a href="#l88.218"></a><span id="l88.218">   return !res;</span>
<a href="#l88.219"></a><span id="l88.219"> };</span>
<a href="#l88.220"></a><span id="l88.220"> </span>
<a href="#l88.221"></a><span id="l88.221"> // deprecated - Use assertNotJSProperty or assertNotDOMProperty instead</span>
<a href="#l88.222"></a><span id="l88.222"> MozMillController.prototype.assertProperty = function(el, attrib, val) {</span>
<a href="#l88.223"></a><span id="l88.223" class="difflineminus">-  frame.log({'function':'controller.assertProperty() - DEPRECATED', </span>
<a href="#l88.224"></a><span id="l88.224" class="difflineplus">+  frame.log({'function':'controller.assertProperty() - DEPRECATED',</span>
<a href="#l88.225"></a><span id="l88.225">                       'message':'assertProperty(el, attrib, val) is deprecated. Use assertJSProperty(el, attrib, val) or assertDOMProperty(el, attrib, val) instead'});</span>
<a href="#l88.226"></a><span id="l88.226">   return this.assertJSProperty(el, attrib, val);</span>
<a href="#l88.227"></a><span id="l88.227"> };</span>
<a href="#l88.228"></a><span id="l88.228"> </span>
<a href="#l88.229"></a><span id="l88.229"> // deprecated - Use assertNotJSProperty or assertNotDOMProperty instead</span>
<a href="#l88.230"></a><span id="l88.230"> MozMillController.prototype.assertPropertyNotExist = function(el, attrib) {</span>
<a href="#l88.231"></a><span id="l88.231">   frame.log({'function':'controller.assertPropertyNotExist() - DEPRECATED',</span>
<a href="#l88.232"></a><span id="l88.232">                    'message':'assertPropertyNotExist(el, attrib) is deprecated. Use assertNotJSProperty(el, attrib) or assertNotDOMProperty(el, attrib) instead'});</span>
<a href="#l88.233"></a><span id="l88.233" class="difflineat">@@ -1352,16 +1352,16 @@ MozMillAsyncTest.prototype.run = functio</span>
<a href="#l88.234"></a><span id="l88.234">   for (var i in this) {</span>
<a href="#l88.235"></a><span id="l88.235">     if (withs.startsWith(i, 'test') &amp;&amp; typeof(this[i]) == 'function') {</span>
<a href="#l88.236"></a><span id="l88.236">       this[i]();</span>
<a href="#l88.237"></a><span id="l88.237">     }</span>
<a href="#l88.238"></a><span id="l88.238">   }</span>
<a href="#l88.239"></a><span id="l88.239"> </span>
<a href="#l88.240"></a><span id="l88.240">   utils.waitFor(function() {</span>
<a href="#l88.241"></a><span id="l88.241">     return this._done == true;</span>
<a href="#l88.242"></a><span id="l88.242" class="difflineminus">-  }, &quot;MozMillAsyncTest timed out. Done is &quot; + this._done, 500, 100); </span>
<a href="#l88.243"></a><span id="l88.243" class="difflineplus">+  }, &quot;MozMillAsyncTest timed out. Done is &quot; + this._done, 500, 100);</span>
<a href="#l88.244"></a><span id="l88.244"> </span>
<a href="#l88.245"></a><span id="l88.245">   return true;</span>
<a href="#l88.246"></a><span id="l88.246"> }</span>
<a href="#l88.247"></a><span id="l88.247"> </span>
<a href="#l88.248"></a><span id="l88.248"> MozMillAsyncTest.prototype.finish = function () {</span>
<a href="#l88.249"></a><span id="l88.249">   this._done = true;</span>
<a href="#l88.250"></a><span id="l88.250"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l89.1"></a><span id="l89.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js</span>
<a href="#l89.2"></a><span id="l89.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/elementslib.js</span>
<a href="#l89.3"></a><span id="l89.3" class="difflineat">@@ -1,44 +1,44 @@</span>
<a href="#l89.4"></a><span id="l89.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l89.5"></a><span id="l89.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l89.6"></a><span id="l89.6" class="difflineminus">-// </span>
<a href="#l89.7"></a><span id="l89.7" class="difflineplus">+//</span>
<a href="#l89.8"></a><span id="l89.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l89.9"></a><span id="l89.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l89.10"></a><span id="l89.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l89.11"></a><span id="l89.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l89.12"></a><span id="l89.12" class="difflineminus">-// </span>
<a href="#l89.13"></a><span id="l89.13" class="difflineplus">+//</span>
<a href="#l89.14"></a><span id="l89.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l89.15"></a><span id="l89.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l89.16"></a><span id="l89.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l89.17"></a><span id="l89.17"> // License.</span>
<a href="#l89.18"></a><span id="l89.18" class="difflineminus">-// </span>
<a href="#l89.19"></a><span id="l89.19" class="difflineplus">+//</span>
<a href="#l89.20"></a><span id="l89.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l89.21"></a><span id="l89.21" class="difflineminus">-// </span>
<a href="#l89.22"></a><span id="l89.22" class="difflineplus">+//</span>
<a href="#l89.23"></a><span id="l89.23"> // The Initial Developer of the Original Code is</span>
<a href="#l89.24"></a><span id="l89.24"> // Adam Christian.</span>
<a href="#l89.25"></a><span id="l89.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l89.26"></a><span id="l89.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l89.27"></a><span id="l89.27" class="difflineminus">-// </span>
<a href="#l89.28"></a><span id="l89.28" class="difflineplus">+//</span>
<a href="#l89.29"></a><span id="l89.29"> // Contributor(s):</span>
<a href="#l89.30"></a><span id="l89.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l89.31"></a><span id="l89.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l89.32"></a><span id="l89.32" class="difflineminus">-// </span>
<a href="#l89.33"></a><span id="l89.33" class="difflineplus">+//</span>
<a href="#l89.34"></a><span id="l89.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l89.35"></a><span id="l89.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l89.36"></a><span id="l89.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l89.37"></a><span id="l89.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l89.38"></a><span id="l89.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l89.39"></a><span id="l89.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l89.40"></a><span id="l89.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l89.41"></a><span id="l89.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l89.42"></a><span id="l89.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l89.43"></a><span id="l89.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l89.44"></a><span id="l89.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l89.45"></a><span id="l89.45" class="difflineminus">-// </span>
<a href="#l89.46"></a><span id="l89.46" class="difflineplus">+//</span>
<a href="#l89.47"></a><span id="l89.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l89.48"></a><span id="l89.48"> </span>
<a href="#l89.49"></a><span id="l89.49"> var EXPORTED_SYMBOLS = [&quot;Elem&quot;, &quot;ID&quot;, &quot;Link&quot;, &quot;XPath&quot;, &quot;Selector&quot;, &quot;Name&quot;, &quot;Anon&quot;, &quot;AnonXPath&quot;,</span>
<a href="#l89.50"></a><span id="l89.50">                         &quot;Lookup&quot;, &quot;_byID&quot;, &quot;_byName&quot;, &quot;_byAttrib&quot;, &quot;_byAnonAttrib&quot;,</span>
<a href="#l89.51"></a><span id="l89.51">                        ];</span>
<a href="#l89.52"></a><span id="l89.52"> </span>
<a href="#l89.53"></a><span id="l89.53"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l89.54"></a><span id="l89.54"> var strings = {}; Components.utils.import('resource://mozmill/stdlib/strings.js', strings);</span>
<a href="#l89.55"></a><span id="l89.55" class="difflineat">@@ -58,32 +58,32 @@ var countQuotes = function(str){</span>
<a href="#l89.56"></a><span id="l89.56">       i++;</span>
<a href="#l89.57"></a><span id="l89.57">     } else {</span>
<a href="#l89.58"></a><span id="l89.58">       break;</span>
<a href="#l89.59"></a><span id="l89.59">     }</span>
<a href="#l89.60"></a><span id="l89.60">   }</span>
<a href="#l89.61"></a><span id="l89.61">   return count;</span>
<a href="#l89.62"></a><span id="l89.62"> }</span>
<a href="#l89.63"></a><span id="l89.63"> var smartSplit = function (str) {</span>
<a href="#l89.64"></a><span id="l89.64" class="difflineminus">-  // Note: I would love it if someone good with regular expressions </span>
<a href="#l89.65"></a><span id="l89.65" class="difflineplus">+  // Note: I would love it if someone good with regular expressions</span>
<a href="#l89.66"></a><span id="l89.66">   // could just replace this function with a good regex</span>
<a href="#l89.67"></a><span id="l89.67"> </span>
<a href="#l89.68"></a><span id="l89.68">   // Ensure we have an even number of quotes</span>
<a href="#l89.69"></a><span id="l89.69">   if (countQuotes(str) % 2 != 0) {</span>
<a href="#l89.70"></a><span id="l89.70">     throw new Error (&quot;Invalid Lookup Expression&quot;);</span>
<a href="#l89.71"></a><span id="l89.71">   }</span>
<a href="#l89.72"></a><span id="l89.72"> </span>
<a href="#l89.73"></a><span id="l89.73">   var repls = [];</span>
<a href="#l89.74"></a><span id="l89.74">   while ((str.indexOf('&quot;') != -1) &amp;&amp; i &lt;= str.length) {</span>
<a href="#l89.75"></a><span id="l89.75">     var i = str.indexOf('&quot;');</span>
<a href="#l89.76"></a><span id="l89.76">     var s = str.slice(i, str.indexOf('&quot;', i + 1) +1)</span>
<a href="#l89.77"></a><span id="l89.77">     str = str.replace(s, '%$^'+repls.length);</span>
<a href="#l89.78"></a><span id="l89.78">     repls.push(s)</span>
<a href="#l89.79"></a><span id="l89.79">   }</span>
<a href="#l89.80"></a><span id="l89.80" class="difflineminus">-  </span>
<a href="#l89.81"></a><span id="l89.81" class="difflineplus">+</span>
<a href="#l89.82"></a><span id="l89.82">   var split = str.split('/');</span>
<a href="#l89.83"></a><span id="l89.83">   var rindex = 0;</span>
<a href="#l89.84"></a><span id="l89.84">   for (var i in split) {</span>
<a href="#l89.85"></a><span id="l89.85">     while (split[i].indexOf('%$^') != -1) {</span>
<a href="#l89.86"></a><span id="l89.86">       var s = split[i];</span>
<a href="#l89.87"></a><span id="l89.87">       var si = rindex;</span>
<a href="#l89.88"></a><span id="l89.88">       split[i] = s.replace('%$^'+si, repls[si]);</span>
<a href="#l89.89"></a><span id="l89.89">       rindex++;</span>
<a href="#l89.90"></a><span id="l89.90" class="difflineat">@@ -109,28 +109,28 @@ ElemBase.prototype.nodeSearch = function</span>
<a href="#l89.91"></a><span id="l89.91">      if (win == null)</span>
<a href="#l89.92"></a><span id="l89.92">        return;</span>
<a href="#l89.93"></a><span id="l89.93"> </span>
<a href="#l89.94"></a><span id="l89.94">      //do the lookup in the current window</span>
<a href="#l89.95"></a><span id="l89.95">      try {</span>
<a href="#l89.96"></a><span id="l89.96">        element = func.call(win, string);</span>
<a href="#l89.97"></a><span id="l89.97">      }</span>
<a href="#l89.98"></a><span id="l89.98">      catch(err) { }</span>
<a href="#l89.99"></a><span id="l89.99" class="difflineminus">-     </span>
<a href="#l89.100"></a><span id="l89.100" class="difflineplus">+</span>
<a href="#l89.101"></a><span id="l89.101">       if (!element || (element.length == 0)) {</span>
<a href="#l89.102"></a><span id="l89.102">         var frames = win.frames;</span>
<a href="#l89.103"></a><span id="l89.103">         for (var i=0; i &lt; frames.length; i++) {</span>
<a href="#l89.104"></a><span id="l89.104">           search(frames[i], func, string);</span>
<a href="#l89.105"></a><span id="l89.105">         }</span>
<a href="#l89.106"></a><span id="l89.106">      }</span>
<a href="#l89.107"></a><span id="l89.107">      else { e = element; }</span>
<a href="#l89.108"></a><span id="l89.108">     };</span>
<a href="#l89.109"></a><span id="l89.109" class="difflineminus">-    </span>
<a href="#l89.110"></a><span id="l89.110" class="difflineplus">+</span>
<a href="#l89.111"></a><span id="l89.111">     search(win, func, string);</span>
<a href="#l89.112"></a><span id="l89.112" class="difflineminus">-    </span>
<a href="#l89.113"></a><span id="l89.113" class="difflineplus">+</span>
<a href="#l89.114"></a><span id="l89.114">     return e;</span>
<a href="#l89.115"></a><span id="l89.115"> }</span>
<a href="#l89.116"></a><span id="l89.116"> </span>
<a href="#l89.117"></a><span id="l89.117"> var Elem = function(node) {</span>
<a href="#l89.118"></a><span id="l89.118">   this.node = node;</span>
<a href="#l89.119"></a><span id="l89.119">   return this;</span>
<a href="#l89.120"></a><span id="l89.120"> }</span>
<a href="#l89.121"></a><span id="l89.121"> Elem.prototype = new utils.Copy(ElemBase.prototype);</span>
<a href="#l89.122"></a><span id="l89.122" class="difflineat">@@ -200,27 +200,27 @@ Link.prototype.getNodeForDocument = func</span>
<a href="#l89.123"></a><span id="l89.123">       else{ text = el.innerHTML; }</span>
<a href="#l89.124"></a><span id="l89.124">       text = text.replace(/n|r|t/g, &quot; &quot;);</span>
<a href="#l89.125"></a><span id="l89.125">     }</span>
<a href="#l89.126"></a><span id="l89.126">     if (el.nodeType == 1){ //elementNode</span>
<a href="#l89.127"></a><span id="l89.127">         for (var i = 0; i &lt; el.childNodes.length; i++) {</span>
<a href="#l89.128"></a><span id="l89.128">             var child = el.childNodes.item(i);</span>
<a href="#l89.129"></a><span id="l89.129">             text += getText(child);</span>
<a href="#l89.130"></a><span id="l89.130">         }</span>
<a href="#l89.131"></a><span id="l89.131" class="difflineminus">-        if (el.tagName == &quot;P&quot; || el.tagName == &quot;BR&quot; || </span>
<a href="#l89.132"></a><span id="l89.132" class="difflineplus">+        if (el.tagName == &quot;P&quot; || el.tagName == &quot;BR&quot; ||</span>
<a href="#l89.133"></a><span id="l89.133">           el.tagName == &quot;HR&quot; || el.tagName == &quot;DIV&quot;) {</span>
<a href="#l89.134"></a><span id="l89.134">           text += &quot;n&quot;;</span>
<a href="#l89.135"></a><span id="l89.135">         }</span>
<a href="#l89.136"></a><span id="l89.136">     }</span>
<a href="#l89.137"></a><span id="l89.137">     return text;</span>
<a href="#l89.138"></a><span id="l89.138">   }</span>
<a href="#l89.139"></a><span id="l89.139" class="difflineminus">-  </span>
<a href="#l89.140"></a><span id="l89.140" class="difflineplus">+</span>
<a href="#l89.141"></a><span id="l89.141">   //sometimes the windows won't have this function</span>
<a href="#l89.142"></a><span id="l89.142">   try { var links = this.document.getElementsByTagName('a'); }</span>
<a href="#l89.143"></a><span id="l89.143" class="difflineminus">-  catch(err){ // ADD LOG LINE mresults.write('Error: '+ err, 'lightred'); </span>
<a href="#l89.144"></a><span id="l89.144" class="difflineplus">+  catch(err){ // ADD LOG LINE mresults.write('Error: '+ err, 'lightred');</span>
<a href="#l89.145"></a><span id="l89.145">   }</span>
<a href="#l89.146"></a><span id="l89.146">   for (var i = 0; i &lt; links.length; i++) {</span>
<a href="#l89.147"></a><span id="l89.147">     var el = links[i];</span>
<a href="#l89.148"></a><span id="l89.148">     //if (getText(el).indexOf(this.linkName) != -1) {</span>
<a href="#l89.149"></a><span id="l89.149">     if (el.innerHTML.indexOf(linkName) != -1){</span>
<a href="#l89.150"></a><span id="l89.150">       return el;</span>
<a href="#l89.151"></a><span id="l89.151">     }</span>
<a href="#l89.152"></a><span id="l89.152">   }</span>
<a href="#l89.153"></a><span id="l89.153" class="difflineat">@@ -361,24 +361,24 @@ var _byAttrib = function (parent, attrib</span>
<a href="#l89.154"></a><span id="l89.154">     }</span>
<a href="#l89.155"></a><span id="l89.155">   }</span>
<a href="#l89.156"></a><span id="l89.156">   if (results.length == 0) {</span>
<a href="#l89.157"></a><span id="l89.157">   }</span>
<a href="#l89.158"></a><span id="l89.158">   return _returnResult(results)</span>
<a href="#l89.159"></a><span id="l89.159"> }</span>
<a href="#l89.160"></a><span id="l89.160"> var _byAnonAttrib = function (_document, parent, attributes) {</span>
<a href="#l89.161"></a><span id="l89.161">   var results = [];</span>
<a href="#l89.162"></a><span id="l89.162" class="difflineminus">-  </span>
<a href="#l89.163"></a><span id="l89.163" class="difflineplus">+</span>
<a href="#l89.164"></a><span id="l89.164">   if (objects.getLength(attributes) == 1) {</span>
<a href="#l89.165"></a><span id="l89.165">     for (var i in attributes) {var k = i; var v = attributes[i]; }</span>
<a href="#l89.166"></a><span id="l89.166">     var result = _document.getAnonymousElementByAttribute(parent, k, v)</span>
<a href="#l89.167"></a><span id="l89.167">     if (result) {</span>
<a href="#l89.168"></a><span id="l89.168">       return result;</span>
<a href="#l89.169"></a><span id="l89.169" class="difflineminus">-      </span>
<a href="#l89.170"></a><span id="l89.170" class="difflineminus">-    } </span>
<a href="#l89.171"></a><span id="l89.171" class="difflineplus">+</span>
<a href="#l89.172"></a><span id="l89.172" class="difflineplus">+    }</span>
<a href="#l89.173"></a><span id="l89.173">   }</span>
<a href="#l89.174"></a><span id="l89.174">   var nodes = [n for each (n in _document.getAnonymousNodes(parent)) if (n.getAttribute)];</span>
<a href="#l89.175"></a><span id="l89.175">   function resultsForNodes (nodes) {</span>
<a href="#l89.176"></a><span id="l89.176">     for (var i in nodes) {</span>
<a href="#l89.177"></a><span id="l89.177">       var n = nodes[i];</span>
<a href="#l89.178"></a><span id="l89.178">       requirementPass = 0;</span>
<a href="#l89.179"></a><span id="l89.179">       requirementLength = 0;</span>
<a href="#l89.180"></a><span id="l89.180">       for (var a in attributes) {</span>
<a href="#l89.181"></a><span id="l89.181" class="difflineat">@@ -386,18 +386,18 @@ var _byAnonAttrib = function (_document,</span>
<a href="#l89.182"></a><span id="l89.182">         if (n.getAttribute(a) == attributes[a]) {</span>
<a href="#l89.183"></a><span id="l89.183">           requirementPass++;</span>
<a href="#l89.184"></a><span id="l89.184">         }</span>
<a href="#l89.185"></a><span id="l89.185">       }</span>
<a href="#l89.186"></a><span id="l89.186">       if (requirementPass == requirementLength) {</span>
<a href="#l89.187"></a><span id="l89.187">         results.push(n);</span>
<a href="#l89.188"></a><span id="l89.188">       }</span>
<a href="#l89.189"></a><span id="l89.189">     }</span>
<a href="#l89.190"></a><span id="l89.190" class="difflineminus">-  }  </span>
<a href="#l89.191"></a><span id="l89.191" class="difflineminus">-  resultsForNodes(nodes)  </span>
<a href="#l89.192"></a><span id="l89.192" class="difflineplus">+  }</span>
<a href="#l89.193"></a><span id="l89.193" class="difflineplus">+  resultsForNodes(nodes)</span>
<a href="#l89.194"></a><span id="l89.194">   if (results.length == 0) {</span>
<a href="#l89.195"></a><span id="l89.195">     resultsForNodes([n for each (n in parent.childNodes) if (n != undefined &amp;&amp; n.getAttribute)])</span>
<a href="#l89.196"></a><span id="l89.196">   }</span>
<a href="#l89.197"></a><span id="l89.197">   return _returnResult(results)</span>
<a href="#l89.198"></a><span id="l89.198"> }</span>
<a href="#l89.199"></a><span id="l89.199"> var _byIndex = function (_document, parent, i) {</span>
<a href="#l89.200"></a><span id="l89.200">   return parent.childNodes[i];</span>
<a href="#l89.201"></a><span id="l89.201"> }</span>
<a href="#l89.202"></a><span id="l89.202" class="difflineat">@@ -407,17 +407,17 @@ var _anonByName = function (_document, p</span>
<a href="#l89.203"></a><span id="l89.203"> var _anonByAttrib = function (_document, parent, value) {</span>
<a href="#l89.204"></a><span id="l89.204">   return _byAnonAttrib(_document, parent, value);</span>
<a href="#l89.205"></a><span id="l89.205"> }</span>
<a href="#l89.206"></a><span id="l89.206"> var _anonByIndex = function (_document, parent, i) {</span>
<a href="#l89.207"></a><span id="l89.207">   return _document.getAnonymousNodes(parent)[i];</span>
<a href="#l89.208"></a><span id="l89.208"> }</span>
<a href="#l89.209"></a><span id="l89.209"> </span>
<a href="#l89.210"></a><span id="l89.210"> Lookup.prototype.getInfo = function () {</span>
<a href="#l89.211"></a><span id="l89.211" class="difflineminus">-  return &quot;Lookup: &quot;+ this.expression; </span>
<a href="#l89.212"></a><span id="l89.212" class="difflineplus">+  return &quot;Lookup: &quot;+ this.expression;</span>
<a href="#l89.213"></a><span id="l89.213"> }</span>
<a href="#l89.214"></a><span id="l89.214"> Lookup.prototype.exists = function () {</span>
<a href="#l89.215"></a><span id="l89.215">   try {</span>
<a href="#l89.216"></a><span id="l89.216">     var e = this.getNode();</span>
<a href="#l89.217"></a><span id="l89.217">   } catch (ex) {</span>
<a href="#l89.218"></a><span id="l89.218">     return false;</span>
<a href="#l89.219"></a><span id="l89.219">   }</span>
<a href="#l89.220"></a><span id="l89.220">   if (e) {</span>
<a href="#l89.221"></a><span id="l89.221" class="difflineat">@@ -429,17 +429,17 @@ Lookup.prototype.getNode = function () {</span>
<a href="#l89.222"></a><span id="l89.222">   var expSplit = [e for each (e in smartSplit(this.expression) ) if (e != '')];</span>
<a href="#l89.223"></a><span id="l89.223">   expSplit.unshift(this._view.document)</span>
<a href="#l89.224"></a><span id="l89.224">   _document = this._view.document;</span>
<a href="#l89.225"></a><span id="l89.225">   var nCases = {'id':_byID, 'name':_byName, 'attrib':_byAttrib, 'index':_byIndex};</span>
<a href="#l89.226"></a><span id="l89.226">   var aCases = {'name':_anonByName, 'attrib':_anonByAttrib, 'index':_anonByIndex};</span>
<a href="#l89.227"></a><span id="l89.227">   var reduceLookup = function (parent, exp) {</span>
<a href="#l89.228"></a><span id="l89.228">     // Handle case where only index is provided</span>
<a href="#l89.229"></a><span id="l89.229">     var cases = nCases;</span>
<a href="#l89.230"></a><span id="l89.230" class="difflineminus">-    </span>
<a href="#l89.231"></a><span id="l89.231" class="difflineplus">+</span>
<a href="#l89.232"></a><span id="l89.232">     // Handle ending index before any of the expression gets mangled</span>
<a href="#l89.233"></a><span id="l89.233">     if (withs.endsWith(exp, ']')) {</span>
<a href="#l89.234"></a><span id="l89.234">       var expIndex = json2.JSON.parse(strings.vslice(exp, '[', ']'));</span>
<a href="#l89.235"></a><span id="l89.235">     }</span>
<a href="#l89.236"></a><span id="l89.236">     // Handle anon</span>
<a href="#l89.237"></a><span id="l89.237">     if (withs.startsWith(exp, 'anon')) {</span>
<a href="#l89.238"></a><span id="l89.238">       var exp = strings.vslice(exp, '(', ')');</span>
<a href="#l89.239"></a><span id="l89.239">       var cases = aCases;</span>
<a href="#l89.240"></a><span id="l89.240" class="difflineat">@@ -451,47 +451,47 @@ Lookup.prototype.getNode = function () {</span>
<a href="#l89.241"></a><span id="l89.241">         throw new Error(err+'. String to be parsed was || '+strings.vslice(exp, '[', ']')+' ||');</span>
<a href="#l89.242"></a><span id="l89.242">       }</span>
<a href="#l89.243"></a><span id="l89.243">       var r = cases['index'](_document, parent, obj);</span>
<a href="#l89.244"></a><span id="l89.244">       if (r == null) {</span>
<a href="#l89.245"></a><span id="l89.245">         throw new Error('Expression &quot;'+exp+'&quot; returned null. Anonymous == '+(cases == aCases));</span>
<a href="#l89.246"></a><span id="l89.246">       }</span>
<a href="#l89.247"></a><span id="l89.247">       return r;</span>
<a href="#l89.248"></a><span id="l89.248">     }</span>
<a href="#l89.249"></a><span id="l89.249" class="difflineminus">-    </span>
<a href="#l89.250"></a><span id="l89.250" class="difflineplus">+</span>
<a href="#l89.251"></a><span id="l89.251">     for (var c in cases) {</span>
<a href="#l89.252"></a><span id="l89.252">       if (withs.startsWith(exp, c)) {</span>
<a href="#l89.253"></a><span id="l89.253">         try {</span>
<a href="#l89.254"></a><span id="l89.254">           var obj = json2.JSON.parse(strings.vslice(exp, '(', ')'))</span>
<a href="#l89.255"></a><span id="l89.255">         } catch(err) {</span>
<a href="#l89.256"></a><span id="l89.256">            throw new Error(err+'. String to be parsed was || '+strings.vslice(exp, '(', ')')+'  ||');</span>
<a href="#l89.257"></a><span id="l89.257">         }</span>
<a href="#l89.258"></a><span id="l89.258">         var result = cases[c](_document, parent, obj);</span>
<a href="#l89.259"></a><span id="l89.259">       }</span>
<a href="#l89.260"></a><span id="l89.260">     }</span>
<a href="#l89.261"></a><span id="l89.261" class="difflineminus">-    </span>
<a href="#l89.262"></a><span id="l89.262" class="difflineplus">+</span>
<a href="#l89.263"></a><span id="l89.263">     if (!result) {</span>
<a href="#l89.264"></a><span id="l89.264">       if ( withs.startsWith(exp, '{') ) {</span>
<a href="#l89.265"></a><span id="l89.265">         try {</span>
<a href="#l89.266"></a><span id="l89.266">           var obj = json2.JSON.parse(exp)</span>
<a href="#l89.267"></a><span id="l89.267">         } catch(err) {</span>
<a href="#l89.268"></a><span id="l89.268">           throw new Error(err+'. String to be parsed was || '+exp+' ||');</span>
<a href="#l89.269"></a><span id="l89.269">         }</span>
<a href="#l89.270"></a><span id="l89.270" class="difflineminus">-        </span>
<a href="#l89.271"></a><span id="l89.271" class="difflineplus">+</span>
<a href="#l89.272"></a><span id="l89.272">         if (cases == aCases) {</span>
<a href="#l89.273"></a><span id="l89.273">           var result = _anonByAttrib(_document, parent, obj)</span>
<a href="#l89.274"></a><span id="l89.274">         } else {</span>
<a href="#l89.275"></a><span id="l89.275">           var result = _byAttrib(parent, obj)</span>
<a href="#l89.276"></a><span id="l89.276">         }</span>
<a href="#l89.277"></a><span id="l89.277">       }</span>
<a href="#l89.278"></a><span id="l89.278">       if (!result) {</span>
<a href="#l89.279"></a><span id="l89.279">         throw new Error('Expression &quot;'+exp+'&quot; returned null. Anonymous == '+(cases == aCases));</span>
<a href="#l89.280"></a><span id="l89.280">       }</span>
<a href="#l89.281"></a><span id="l89.281">     }</span>
<a href="#l89.282"></a><span id="l89.282" class="difflineminus">-    </span>
<a href="#l89.283"></a><span id="l89.283" class="difflineplus">+</span>
<a href="#l89.284"></a><span id="l89.284">     // Final return</span>
<a href="#l89.285"></a><span id="l89.285">     if (expIndex) {</span>
<a href="#l89.286"></a><span id="l89.286">       // TODO: Check length and raise error</span>
<a href="#l89.287"></a><span id="l89.287">       return result[expIndex];</span>
<a href="#l89.288"></a><span id="l89.288">     } else {</span>
<a href="#l89.289"></a><span id="l89.289">       // TODO: Check length and raise error</span>
<a href="#l89.290"></a><span id="l89.290">       return result;</span>
<a href="#l89.291"></a><span id="l89.291">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l90.1"></a><span id="l90.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js</span>
<a href="#l90.2"></a><span id="l90.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/events.js</span>
<a href="#l90.3"></a><span id="l90.3" class="difflineat">@@ -1,50 +1,50 @@</span>
<a href="#l90.4"></a><span id="l90.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l90.5"></a><span id="l90.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l90.6"></a><span id="l90.6" class="difflineminus">-// </span>
<a href="#l90.7"></a><span id="l90.7" class="difflineplus">+//</span>
<a href="#l90.8"></a><span id="l90.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l90.9"></a><span id="l90.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l90.10"></a><span id="l90.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l90.11"></a><span id="l90.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l90.12"></a><span id="l90.12" class="difflineminus">-// </span>
<a href="#l90.13"></a><span id="l90.13" class="difflineplus">+//</span>
<a href="#l90.14"></a><span id="l90.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l90.15"></a><span id="l90.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l90.16"></a><span id="l90.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l90.17"></a><span id="l90.17"> // License.</span>
<a href="#l90.18"></a><span id="l90.18" class="difflineminus">-// </span>
<a href="#l90.19"></a><span id="l90.19" class="difflineplus">+//</span>
<a href="#l90.20"></a><span id="l90.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l90.21"></a><span id="l90.21" class="difflineminus">-// </span>
<a href="#l90.22"></a><span id="l90.22" class="difflineplus">+//</span>
<a href="#l90.23"></a><span id="l90.23"> // The Initial Developer of the Original Code is</span>
<a href="#l90.24"></a><span id="l90.24"> // Adam Christian.</span>
<a href="#l90.25"></a><span id="l90.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l90.26"></a><span id="l90.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l90.27"></a><span id="l90.27" class="difflineminus">-// </span>
<a href="#l90.28"></a><span id="l90.28" class="difflineplus">+//</span>
<a href="#l90.29"></a><span id="l90.29"> // Contributor(s):</span>
<a href="#l90.30"></a><span id="l90.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l90.31"></a><span id="l90.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l90.32"></a><span id="l90.32"> //  Henrik Skupin &lt;hskupin@mozilla.com&gt;</span>
<a href="#l90.33"></a><span id="l90.33" class="difflineminus">-// </span>
<a href="#l90.34"></a><span id="l90.34" class="difflineplus">+//</span>
<a href="#l90.35"></a><span id="l90.35"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l90.36"></a><span id="l90.36"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l90.37"></a><span id="l90.37"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l90.38"></a><span id="l90.38"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l90.39"></a><span id="l90.39"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l90.40"></a><span id="l90.40"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l90.41"></a><span id="l90.41"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l90.42"></a><span id="l90.42"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l90.43"></a><span id="l90.43"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l90.44"></a><span id="l90.44"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l90.45"></a><span id="l90.45"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l90.46"></a><span id="l90.46" class="difflineminus">-// </span>
<a href="#l90.47"></a><span id="l90.47" class="difflineplus">+//</span>
<a href="#l90.48"></a><span id="l90.48"> // ***** END LICENSE BLOCK *****</span>
<a href="#l90.49"></a><span id="l90.49"> </span>
<a href="#l90.50"></a><span id="l90.50"> var EXPORTED_SYMBOLS = [&quot;createEventObject&quot;, &quot;triggerEvent&quot;, &quot;getKeyCodeFromKeySequence&quot;,</span>
<a href="#l90.51"></a><span id="l90.51">                         &quot;triggerKeyEvent&quot;, &quot;triggerMouseEvent&quot;, &quot;fakeOpenPopup&quot;];</span>
<a href="#l90.52"></a><span id="l90.52" class="difflineminus">-                        </span>
<a href="#l90.53"></a><span id="l90.53" class="difflineplus">+</span>
<a href="#l90.54"></a><span id="l90.54"> var EventUtils = {}; Components.utils.import('resource://mozmill/stdlib/EventUtils.js', EventUtils);</span>
<a href="#l90.55"></a><span id="l90.55"> </span>
<a href="#l90.56"></a><span id="l90.56"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l90.57"></a><span id="l90.57"> </span>
<a href="#l90.58"></a><span id="l90.58"> // var logging = {}; Components.utils.import('resource://mozmill/stdlib/logging.js', logging);</span>
<a href="#l90.59"></a><span id="l90.59"> </span>
<a href="#l90.60"></a><span id="l90.60"> // var eventsLogger = logging.getLogger('eventsLogger');</span>
<a href="#l90.61"></a><span id="l90.61"> </span>
<a href="#l90.62"></a><span id="l90.62" class="difflineat">@@ -65,17 +65,17 @@ var createEventObject = function(element</span>
<a href="#l90.63"></a><span id="l90.63">  * @param menupopup aPopup</span>
<a href="#l90.64"></a><span id="l90.64">  *                  Popup to fake the click for</span>
<a href="#l90.65"></a><span id="l90.65">  */</span>
<a href="#l90.66"></a><span id="l90.66"> function fakeOpenPopup(aWindow, aPopup) {</span>
<a href="#l90.67"></a><span id="l90.67">   var popupEvent = aWindow.document.createEvent(&quot;MouseEvent&quot;);</span>
<a href="#l90.68"></a><span id="l90.68">   popupEvent.initMouseEvent(&quot;popupshowing&quot;, true, true, aWindow, 0,</span>
<a href="#l90.69"></a><span id="l90.69">                             0, 0, 0, 0, false, false, false, false,</span>
<a href="#l90.70"></a><span id="l90.70">                             0, null);</span>
<a href="#l90.71"></a><span id="l90.71" class="difflineminus">-  aPopup.dispatchEvent(popupEvent);  </span>
<a href="#l90.72"></a><span id="l90.72" class="difflineplus">+  aPopup.dispatchEvent(popupEvent);</span>
<a href="#l90.73"></a><span id="l90.73"> }</span>
<a href="#l90.74"></a><span id="l90.74"> </span>
<a href="#l90.75"></a><span id="l90.75">     /* Fire an event in a browser-compatible manner */</span>
<a href="#l90.76"></a><span id="l90.76"> var triggerEvent = function(element, eventType, canBubble, controlKeyDown, altKeyDown, shiftKeyDown, metaKeyDown) {</span>
<a href="#l90.77"></a><span id="l90.77">   canBubble = (typeof(canBubble) == undefined) ? true: canBubble;</span>
<a href="#l90.78"></a><span id="l90.78">   var evt = element.ownerDocument.createEvent('HTMLEvents');</span>
<a href="#l90.79"></a><span id="l90.79"> </span>
<a href="#l90.80"></a><span id="l90.80">   evt.shiftKey = shiftKeyDown;</span>
<a href="#l90.81"></a><span id="l90.81" class="difflineat">@@ -84,17 +84,17 @@ var triggerEvent = function(element, eve</span>
<a href="#l90.82"></a><span id="l90.82">   evt.ctrlKey = controlKeyDown;</span>
<a href="#l90.83"></a><span id="l90.83"> </span>
<a href="#l90.84"></a><span id="l90.84">   evt.initEvent(eventType, canBubble, true);</span>
<a href="#l90.85"></a><span id="l90.85">   element.dispatchEvent(evt);</span>
<a href="#l90.86"></a><span id="l90.86"> </span>
<a href="#l90.87"></a><span id="l90.87"> };</span>
<a href="#l90.88"></a><span id="l90.88"> </span>
<a href="#l90.89"></a><span id="l90.89"> var getKeyCodeFromKeySequence = function(keySequence) {</span>
<a href="#l90.90"></a><span id="l90.90" class="difflineminus">-  </span>
<a href="#l90.91"></a><span id="l90.91" class="difflineplus">+</span>
<a href="#l90.92"></a><span id="l90.92">   var match = /^\\(\d{1,3})$/.exec(keySequence);</span>
<a href="#l90.93"></a><span id="l90.93">   if (match != null) {</span>
<a href="#l90.94"></a><span id="l90.94">       return match[1];</span>
<a href="#l90.95"></a><span id="l90.95"> </span>
<a href="#l90.96"></a><span id="l90.96">   }</span>
<a href="#l90.97"></a><span id="l90.97">   match = /^.$/.exec(keySequence);</span>
<a href="#l90.98"></a><span id="l90.98">   if (match != null) {</span>
<a href="#l90.99"></a><span id="l90.99">       return match[0].charCodeAt(0);</span>
<a href="#l90.100"></a><span id="l90.100" class="difflineat">@@ -147,17 +147,17 @@ var triggerKeyEvent = function(element, </span>
<a href="#l90.101"></a><span id="l90.101">                                         &quot;events.triggerKeyEvent()&quot;, win);</span>
<a href="#l90.102"></a><span id="l90.102">   } else {</span>
<a href="#l90.103"></a><span id="l90.103">     EventUtils.synthesizeKey(aKey, modifiers, win);</span>
<a href="#l90.104"></a><span id="l90.104">   }</span>
<a href="#l90.105"></a><span id="l90.105"> }</span>
<a href="#l90.106"></a><span id="l90.106"> </span>
<a href="#l90.107"></a><span id="l90.107">     /* Fire a mouse event in a browser-compatible manner */</span>
<a href="#l90.108"></a><span id="l90.108"> var triggerMouseEvent = function(element, eventType, canBubble, clientX, clientY, controlKeyDown, altKeyDown, shiftKeyDown, metaKeyDown) {</span>
<a href="#l90.109"></a><span id="l90.109" class="difflineminus">-  </span>
<a href="#l90.110"></a><span id="l90.110" class="difflineplus">+</span>
<a href="#l90.111"></a><span id="l90.111">   clientX = clientX ? clientX: 0;</span>
<a href="#l90.112"></a><span id="l90.112">   clientY = clientY ? clientY: 0;</span>
<a href="#l90.113"></a><span id="l90.113"> </span>
<a href="#l90.114"></a><span id="l90.114">   // Fixing this - make the mouse understand where it is on the screen, needed</span>
<a href="#l90.115"></a><span id="l90.115">   // for double click.</span>
<a href="#l90.116"></a><span id="l90.116">   var screenX = element.boxObject.screenX ? element.boxObject.screenX : 0;</span>
<a href="#l90.117"></a><span id="l90.117">   var screenY = element.boxObject.screenY ? element.boxObject.screenY : 0;;</span>
<a href="#l90.118"></a><span id="l90.118"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l91.1"></a><span id="l91.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js</span>
<a href="#l91.2"></a><span id="l91.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/frame.js</span>
<a href="#l91.3"></a><span id="l91.3" class="difflineat">@@ -1,46 +1,46 @@</span>
<a href="#l91.4"></a><span id="l91.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l91.5"></a><span id="l91.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l91.6"></a><span id="l91.6" class="difflineminus">-// </span>
<a href="#l91.7"></a><span id="l91.7" class="difflineplus">+//</span>
<a href="#l91.8"></a><span id="l91.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l91.9"></a><span id="l91.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l91.10"></a><span id="l91.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l91.11"></a><span id="l91.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l91.12"></a><span id="l91.12" class="difflineminus">-// </span>
<a href="#l91.13"></a><span id="l91.13" class="difflineplus">+//</span>
<a href="#l91.14"></a><span id="l91.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l91.15"></a><span id="l91.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l91.16"></a><span id="l91.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l91.17"></a><span id="l91.17"> // License.</span>
<a href="#l91.18"></a><span id="l91.18" class="difflineminus">-// </span>
<a href="#l91.19"></a><span id="l91.19" class="difflineplus">+//</span>
<a href="#l91.20"></a><span id="l91.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l91.21"></a><span id="l91.21" class="difflineminus">-// </span>
<a href="#l91.22"></a><span id="l91.22" class="difflineplus">+//</span>
<a href="#l91.23"></a><span id="l91.23"> // The Initial Developer of the Original Code is</span>
<a href="#l91.24"></a><span id="l91.24"> // Mikeal Rogers.</span>
<a href="#l91.25"></a><span id="l91.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l91.26"></a><span id="l91.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l91.27"></a><span id="l91.27" class="difflineminus">-// </span>
<a href="#l91.28"></a><span id="l91.28" class="difflineplus">+//</span>
<a href="#l91.29"></a><span id="l91.29"> // Contributor(s):</span>
<a href="#l91.30"></a><span id="l91.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l91.31"></a><span id="l91.31" class="difflineminus">-// </span>
<a href="#l91.32"></a><span id="l91.32" class="difflineplus">+//</span>
<a href="#l91.33"></a><span id="l91.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l91.34"></a><span id="l91.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l91.35"></a><span id="l91.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l91.36"></a><span id="l91.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l91.37"></a><span id="l91.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l91.38"></a><span id="l91.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l91.39"></a><span id="l91.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l91.40"></a><span id="l91.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l91.41"></a><span id="l91.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l91.42"></a><span id="l91.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l91.43"></a><span id="l91.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l91.44"></a><span id="l91.44" class="difflineminus">-// </span>
<a href="#l91.45"></a><span id="l91.45" class="difflineplus">+//</span>
<a href="#l91.46"></a><span id="l91.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l91.47"></a><span id="l91.47"> </span>
<a href="#l91.48"></a><span id="l91.48" class="difflineminus">-var EXPORTED_SYMBOLS = ['loadFile','register_function','Collector','Runner','events', </span>
<a href="#l91.49"></a><span id="l91.49" class="difflineplus">+var EXPORTED_SYMBOLS = ['loadFile','register_function','Collector','Runner','events',</span>
<a href="#l91.50"></a><span id="l91.50">                         'jsbridge', 'runTestDirectory', 'runTestFile', 'log', 'getThread',</span>
<a href="#l91.51"></a><span id="l91.51">                         'timers', 'persisted'];</span>
<a href="#l91.52"></a><span id="l91.52"> </span>
<a href="#l91.53"></a><span id="l91.53"> Components.utils.import('resource://mozmill/stdlib/httpd.js');</span>
<a href="#l91.54"></a><span id="l91.54"> </span>
<a href="#l91.55"></a><span id="l91.55"> var os = {};      Components.utils.import('resource://mozmill/stdlib/os.js', os);</span>
<a href="#l91.56"></a><span id="l91.56"> var strings = {}; Components.utils.import('resource://mozmill/stdlib/strings.js', strings);</span>
<a href="#l91.57"></a><span id="l91.57"> var arrays = {};  Components.utils.import('resource://mozmill/stdlib/arrays.js', arrays);</span>
<a href="#l91.58"></a><span id="l91.58" class="difflineat">@@ -51,17 +51,17 @@ var securableModule = {};</span>
<a href="#l91.59"></a><span id="l91.59"> </span>
<a href="#l91.60"></a><span id="l91.60"> var aConsoleService = Components.classes[&quot;@mozilla.org/consoleservice;1&quot;].</span>
<a href="#l91.61"></a><span id="l91.61">      getService(Components.interfaces.nsIConsoleService);</span>
<a href="#l91.62"></a><span id="l91.62"> var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l91.63"></a><span id="l91.63">                     .getService(Components.interfaces.nsIIOService);</span>
<a href="#l91.64"></a><span id="l91.64"> var loader = Components.classes[&quot;@mozilla.org/moz/jssubscript-loader;1&quot;]</span>
<a href="#l91.65"></a><span id="l91.65">                     .getService(Components.interfaces.mozIJSSubScriptLoader);</span>
<a href="#l91.66"></a><span id="l91.66"> var uuidgen = Components.classes[&quot;@mozilla.org/uuid-generator;1&quot;]</span>
<a href="#l91.67"></a><span id="l91.67" class="difflineminus">-                    .getService(Components.interfaces.nsIUUIDGenerator);  </span>
<a href="#l91.68"></a><span id="l91.68" class="difflineplus">+                    .getService(Components.interfaces.nsIUUIDGenerator);</span>
<a href="#l91.69"></a><span id="l91.69"> </span>
<a href="#l91.70"></a><span id="l91.70"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l91.71"></a><span id="l91.71"> var systemPrincipal = Services.scriptSecurityManager.getSystemPrincipal();</span>
<a href="#l91.72"></a><span id="l91.72"> </span>
<a href="#l91.73"></a><span id="l91.73"> var backstage = this;</span>
<a href="#l91.74"></a><span id="l91.74"> </span>
<a href="#l91.75"></a><span id="l91.75"> var registeredFunctions = {};</span>
<a href="#l91.76"></a><span id="l91.76"> </span>
<a href="#l91.77"></a><span id="l91.77" class="difflineat">@@ -87,17 +87,17 @@ var loadTestResources = function () {</span>
<a href="#l91.78"></a><span id="l91.78"> }</span>
<a href="#l91.79"></a><span id="l91.79"> </span>
<a href="#l91.80"></a><span id="l91.80"> var loadFile = function(path, collector) {</span>
<a href="#l91.81"></a><span id="l91.81">   var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l91.82"></a><span id="l91.82">                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l91.83"></a><span id="l91.83">   file.initWithPath(path);</span>
<a href="#l91.84"></a><span id="l91.84">   var uri = ios.newFileURI(file).spec;</span>
<a href="#l91.85"></a><span id="l91.85"> </span>
<a href="#l91.86"></a><span id="l91.86" class="difflineminus">-  var module = new Components.utils.Sandbox(systemPrincipal); </span>
<a href="#l91.87"></a><span id="l91.87" class="difflineplus">+  var module = new Components.utils.Sandbox(systemPrincipal);</span>
<a href="#l91.88"></a><span id="l91.88">   module.registeredFunctions = registeredFunctions;</span>
<a href="#l91.89"></a><span id="l91.89">   module.collector = collector</span>
<a href="#l91.90"></a><span id="l91.90">   loadTestResources();</span>
<a href="#l91.91"></a><span id="l91.91">   module.mozmill = mozmill;</span>
<a href="#l91.92"></a><span id="l91.92">   module.elementslib = elementslib;</span>
<a href="#l91.93"></a><span id="l91.93">   module.persisted = persisted;</span>
<a href="#l91.94"></a><span id="l91.94">   module.Cc = Components.classes;</span>
<a href="#l91.95"></a><span id="l91.95">   module.Ci = Components.interfaces;</span>
<a href="#l91.96"></a><span id="l91.96" class="difflineat">@@ -115,17 +115,17 @@ var loadFile = function(path, collector)</span>
<a href="#l91.97"></a><span id="l91.97">     });</span>
<a href="#l91.98"></a><span id="l91.98">     if (modules != undefined) {</span>
<a href="#l91.99"></a><span id="l91.99">         loader.modules = modules;</span>
<a href="#l91.100"></a><span id="l91.100">     }</span>
<a href="#l91.101"></a><span id="l91.101">     var retval = loader.require(mod);</span>
<a href="#l91.102"></a><span id="l91.102">     modules = loader.modules;</span>
<a href="#l91.103"></a><span id="l91.103">     return retval;</span>
<a href="#l91.104"></a><span id="l91.104">   }</span>
<a href="#l91.105"></a><span id="l91.105" class="difflineminus">-  </span>
<a href="#l91.106"></a><span id="l91.106" class="difflineplus">+</span>
<a href="#l91.107"></a><span id="l91.107">   if (collector != undefined) {</span>
<a href="#l91.108"></a><span id="l91.108">     collector.current_file = file;</span>
<a href="#l91.109"></a><span id="l91.109">     collector.current_path = path;</span>
<a href="#l91.110"></a><span id="l91.110">   }</span>
<a href="#l91.111"></a><span id="l91.111">   try {</span>
<a href="#l91.112"></a><span id="l91.112">     loader.loadSubScript(uri, module, &quot;UTF-8&quot;);</span>
<a href="#l91.113"></a><span id="l91.113">   } catch (e) {</span>
<a href="#l91.114"></a><span id="l91.114">     events.fail({'exception' : e});</span>
<a href="#l91.115"></a><span id="l91.115" class="difflineat">@@ -138,32 +138,32 @@ var loadFile = function(path, collector)</span>
<a href="#l91.116"></a><span id="l91.116">       'fails' : [{'exception' : {</span>
<a href="#l91.117"></a><span id="l91.117">                      message: e.message,</span>
<a href="#l91.118"></a><span id="l91.118">                      filename: e.filename,</span>
<a href="#l91.119"></a><span id="l91.119">                      lineNumber: e.lineNumber}}],</span>
<a href="#l91.120"></a><span id="l91.120">       'name'  : '&lt;TOP_LEVEL&gt;'</span>
<a href="#l91.121"></a><span id="l91.121">     };</span>
<a href="#l91.122"></a><span id="l91.122">     events.fireEvent('endTest', obj);</span>
<a href="#l91.123"></a><span id="l91.123">   }</span>
<a href="#l91.124"></a><span id="l91.124" class="difflineminus">-  </span>
<a href="#l91.125"></a><span id="l91.125" class="difflineplus">+</span>
<a href="#l91.126"></a><span id="l91.126">   module.__file__ = path;</span>
<a href="#l91.127"></a><span id="l91.127">   module.__uri__ = uri;</span>
<a href="#l91.128"></a><span id="l91.128">   return module;</span>
<a href="#l91.129"></a><span id="l91.129"> }</span>
<a href="#l91.130"></a><span id="l91.130"> </span>
<a href="#l91.131"></a><span id="l91.131"> function registerFunction (name, func) {</span>
<a href="#l91.132"></a><span id="l91.132">   registeredFunctions[name] = func;</span>
<a href="#l91.133"></a><span id="l91.133"> }</span>
<a href="#l91.134"></a><span id="l91.134"> </span>
<a href="#l91.135"></a><span id="l91.135"> function stateChangeBase (possibilties, restrictions, target, cmeta, v) {</span>
<a href="#l91.136"></a><span id="l91.136">   if (possibilties) {</span>
<a href="#l91.137"></a><span id="l91.137">     if (!arrays.inArray(possibilties, v)) {</span>
<a href="#l91.138"></a><span id="l91.138">       // TODO Error value not in this.poss</span>
<a href="#l91.139"></a><span id="l91.139">       return;</span>
<a href="#l91.140"></a><span id="l91.140" class="difflineminus">-    } </span>
<a href="#l91.141"></a><span id="l91.141" class="difflineplus">+    }</span>
<a href="#l91.142"></a><span id="l91.142">   }</span>
<a href="#l91.143"></a><span id="l91.143">   if (restrictions) {</span>
<a href="#l91.144"></a><span id="l91.144">     for (var i in restrictions) {</span>
<a href="#l91.145"></a><span id="l91.145">       var r = restrictions[i];</span>
<a href="#l91.146"></a><span id="l91.146">       if (!r(v)) {</span>
<a href="#l91.147"></a><span id="l91.147">         // TODO error value did not pass restriction</span>
<a href="#l91.148"></a><span id="l91.148">         return;</span>
<a href="#l91.149"></a><span id="l91.149">       }</span>
<a href="#l91.150"></a><span id="l91.150" class="difflineat">@@ -180,18 +180,18 @@ var events = {</span>
<a href="#l91.151"></a><span id="l91.151">   'currentState' : null,</span>
<a href="#l91.152"></a><span id="l91.152">   'currentModule': null,</span>
<a href="#l91.153"></a><span id="l91.153">   'currentTest'  : null,</span>
<a href="#l91.154"></a><span id="l91.154">   'userShutdown' : false,</span>
<a href="#l91.155"></a><span id="l91.155">   'appQuit'      : false,</span>
<a href="#l91.156"></a><span id="l91.156">   'listeners'    : {},</span>
<a href="#l91.157"></a><span id="l91.157"> }</span>
<a href="#l91.158"></a><span id="l91.158"> events.setState = function (v) {</span>
<a href="#l91.159"></a><span id="l91.159" class="difflineminus">-   return stateChangeBase(['dependencies', 'setupModule', 'teardownModule', </span>
<a href="#l91.160"></a><span id="l91.160" class="difflineminus">-                           'setupTest', 'teardownTest', 'test', 'collection'], </span>
<a href="#l91.161"></a><span id="l91.161" class="difflineplus">+   return stateChangeBase(['dependencies', 'setupModule', 'teardownModule',</span>
<a href="#l91.162"></a><span id="l91.162" class="difflineplus">+                           'setupTest', 'teardownTest', 'test', 'collection'],</span>
<a href="#l91.163"></a><span id="l91.163">                            null, 'currentState', 'setState', v);</span>
<a href="#l91.164"></a><span id="l91.164"> }</span>
<a href="#l91.165"></a><span id="l91.165"> events.toggleUserShutdown = function (){</span>
<a href="#l91.166"></a><span id="l91.166">   if (this.userShutdown) {</span>
<a href="#l91.167"></a><span id="l91.167">     this.fail({'function':'frame.events.toggleUserShutdown', 'message':'Shutdown expected but none detected before timeout'});</span>
<a href="#l91.168"></a><span id="l91.168">   }</span>
<a href="#l91.169"></a><span id="l91.169">   this.userShutdown = (!this.userShutdown);</span>
<a href="#l91.170"></a><span id="l91.170"> }</span>
<a href="#l91.171"></a><span id="l91.171" class="difflineat">@@ -205,35 +205,35 @@ events.setTest = function (test, invoked</span>
<a href="#l91.172"></a><span id="l91.172">   events.currentTest = test;</span>
<a href="#l91.173"></a><span id="l91.173">   var obj = {'filename':events.currentModule.__file__,</span>
<a href="#l91.174"></a><span id="l91.174">              'name':test.__name__,</span>
<a href="#l91.175"></a><span id="l91.175">             }</span>
<a href="#l91.176"></a><span id="l91.176">   events.fireEvent('setTest', obj);</span>
<a href="#l91.177"></a><span id="l91.177"> }</span>
<a href="#l91.178"></a><span id="l91.178"> events.endTest = function (test) {</span>
<a href="#l91.179"></a><span id="l91.179">   test.status = 'done';</span>
<a href="#l91.180"></a><span id="l91.180" class="difflineminus">-  events.currentTest = null; </span>
<a href="#l91.181"></a><span id="l91.181" class="difflineminus">-  var obj = {'filename':events.currentModule.__file__, </span>
<a href="#l91.182"></a><span id="l91.182" class="difflineplus">+  events.currentTest = null;</span>
<a href="#l91.183"></a><span id="l91.183" class="difflineplus">+  var obj = {'filename':events.currentModule.__file__,</span>
<a href="#l91.184"></a><span id="l91.184">          'passed':test.__passes__.length,</span>
<a href="#l91.185"></a><span id="l91.185">          'failed':test.__fails__.length,</span>
<a href="#l91.186"></a><span id="l91.186">          'passes':test.__passes__,</span>
<a href="#l91.187"></a><span id="l91.187">          'fails' :test.__fails__,</span>
<a href="#l91.188"></a><span id="l91.188">          'name'  :test.__name__,</span>
<a href="#l91.189"></a><span id="l91.189">          }</span>
<a href="#l91.190"></a><span id="l91.190">   if (test.skipped) {</span>
<a href="#l91.191"></a><span id="l91.191">     obj['skipped'] = true;</span>
<a href="#l91.192"></a><span id="l91.192">     obj.skipped_reason = test.skipped_reason;</span>
<a href="#l91.193"></a><span id="l91.193">   }</span>
<a href="#l91.194"></a><span id="l91.194">   if (test.meta) {</span>
<a href="#l91.195"></a><span id="l91.195">     obj.meta = test.meta;</span>
<a href="#l91.196"></a><span id="l91.196">   }</span>
<a href="#l91.197"></a><span id="l91.197">   events.fireEvent('endTest', obj);</span>
<a href="#l91.198"></a><span id="l91.198"> }</span>
<a href="#l91.199"></a><span id="l91.199"> events.setModule = function (v) {</span>
<a href="#l91.200"></a><span id="l91.200" class="difflineminus">-  return stateChangeBase( null, [function (v) {return (v.__file__ != undefined)}], </span>
<a href="#l91.201"></a><span id="l91.201" class="difflineplus">+  return stateChangeBase( null, [function (v) {return (v.__file__ != undefined)}],</span>
<a href="#l91.202"></a><span id="l91.202">                           'currentModule', 'setModule', v);</span>
<a href="#l91.203"></a><span id="l91.203"> }</span>
<a href="#l91.204"></a><span id="l91.204"> events.pass = function (obj) {</span>
<a href="#l91.205"></a><span id="l91.205">   if (events.currentTest) {</span>
<a href="#l91.206"></a><span id="l91.206">     events.currentTest.__passes__.push(obj);</span>
<a href="#l91.207"></a><span id="l91.207">   }</span>
<a href="#l91.208"></a><span id="l91.208">   for each(var timer in timers) {</span>
<a href="#l91.209"></a><span id="l91.209">     timer.actions.push(</span>
<a href="#l91.210"></a><span id="l91.210" class="difflineat">@@ -427,70 +427,70 @@ Collector.prototype.initTestModule = fun</span>
<a href="#l91.211"></a><span id="l91.211">         test_module.__teardownTest__ = test_module[i];</span>
<a href="#l91.212"></a><span id="l91.212">       } else if (i == &quot;teardownModule&quot;) {</span>
<a href="#l91.213"></a><span id="l91.213">         test_module[i].__name__ = i;</span>
<a href="#l91.214"></a><span id="l91.214">         test_module.__teardownModule__ = test_module[i];</span>
<a href="#l91.215"></a><span id="l91.215">       } else if (withs.startsWith(i, &quot;test&quot;)) {</span>
<a href="#l91.216"></a><span id="l91.216">         test_module[i].__name__ = i;</span>
<a href="#l91.217"></a><span id="l91.217">         test_module.__tests__.push(test_module[i]);</span>
<a href="#l91.218"></a><span id="l91.218">       }</span>
<a href="#l91.219"></a><span id="l91.219" class="difflineminus">-    } else if (typeof(test_module[i]) == 'object' &amp;&amp; </span>
<a href="#l91.220"></a><span id="l91.220" class="difflineplus">+    } else if (typeof(test_module[i]) == 'object' &amp;&amp;</span>
<a href="#l91.221"></a><span id="l91.221">                test_module[i]._mozmillasynctest == true) {</span>
<a href="#l91.222"></a><span id="l91.222">         test_module[i].__name__ = i;</span>
<a href="#l91.223"></a><span id="l91.223">         test_module.__tests__.push(test_module[i]);</span>
<a href="#l91.224"></a><span id="l91.224">     }</span>
<a href="#l91.225"></a><span id="l91.225">     if (i == &quot;RELATIVE_ROOT&quot;) {</span>
<a href="#l91.226"></a><span id="l91.226">       test_module.__root_path__ = os.abspath(test_module[i], os.getFileForPath(filename));</span>
<a href="#l91.227"></a><span id="l91.227">     }</span>
<a href="#l91.228"></a><span id="l91.228">     if (i == &quot;MODULE_REQUIRES&quot;) {</span>
<a href="#l91.229"></a><span id="l91.229">       test_module.__requirements__ = test_module[i];</span>
<a href="#l91.230"></a><span id="l91.230">       this.all_requirements.push.apply(backstage, test_module[i]);</span>
<a href="#l91.231"></a><span id="l91.231">     }</span>
<a href="#l91.232"></a><span id="l91.232">     if (i == &quot;MODULE_NAME&quot;) {</span>
<a href="#l91.233"></a><span id="l91.233">       test_module.__module_name__ = test_module[i];</span>
<a href="#l91.234"></a><span id="l91.234">       this.test_modules_by_name[test_module[i]] = test_module;</span>
<a href="#l91.235"></a><span id="l91.235">     }</span>
<a href="#l91.236"></a><span id="l91.236">   }</span>
<a href="#l91.237"></a><span id="l91.237" class="difflineminus">-  </span>
<a href="#l91.238"></a><span id="l91.238" class="difflineplus">+</span>
<a href="#l91.239"></a><span id="l91.239">   if (test_module.MODULE_REQUIRES != undefined &amp;&amp; test_module.RELATIVE_ROOT == undefined) {</span>
<a href="#l91.240"></a><span id="l91.240">     for each(var t in test_module.__tests__) {</span>
<a href="#l91.241"></a><span id="l91.241">       t.__force_skip__ = &quot;RELATIVE ROOT is not defined and test requires another module.&quot;;</span>
<a href="#l91.242"></a><span id="l91.242">     }</span>
<a href="#l91.243"></a><span id="l91.243">   }</span>
<a href="#l91.244"></a><span id="l91.244" class="difflineminus">-  </span>
<a href="#l91.245"></a><span id="l91.245" class="difflineplus">+</span>
<a href="#l91.246"></a><span id="l91.246">   test_module.collector = this;</span>
<a href="#l91.247"></a><span id="l91.247">   test_module.status = 'loaded';</span>
<a href="#l91.248"></a><span id="l91.248">   this.test_modules_by_filename[filename] = test_module;</span>
<a href="#l91.249"></a><span id="l91.249"> </span>
<a href="#l91.250"></a><span id="l91.250">   return test_module;</span>
<a href="#l91.251"></a><span id="l91.251"> }</span>
<a href="#l91.252"></a><span id="l91.252"> </span>
<a href="#l91.253"></a><span id="l91.253"> Collector.prototype.initTestDirectory = function (directory) {</span>
<a href="#l91.254"></a><span id="l91.254">   var r = this;</span>
<a href="#l91.255"></a><span id="l91.255">   function recursiveModuleLoader(dfile) {</span>
<a href="#l91.256"></a><span id="l91.256">     r.loaded_directories.push(directory);</span>
<a href="#l91.257"></a><span id="l91.257">     var dfiles = os.listDirectory(dfile);</span>
<a href="#l91.258"></a><span id="l91.258">     for (var i in dfiles) {</span>
<a href="#l91.259"></a><span id="l91.259">       var f = dfiles[i];</span>
<a href="#l91.260"></a><span id="l91.260" class="difflineminus">-      if ( f.isDirectory() &amp;&amp; </span>
<a href="#l91.261"></a><span id="l91.261" class="difflineminus">-           !withs.startsWith(f.leafName, '.') &amp;&amp; </span>
<a href="#l91.262"></a><span id="l91.262" class="difflineplus">+      if ( f.isDirectory() &amp;&amp;</span>
<a href="#l91.263"></a><span id="l91.263" class="difflineplus">+           !withs.startsWith(f.leafName, '.') &amp;&amp;</span>
<a href="#l91.264"></a><span id="l91.264">            withs.startsWith(f.leafName, &quot;test&quot;) &amp;&amp;</span>
<a href="#l91.265"></a><span id="l91.265">            !arrays.inArray(r.loaded_directories, f.path) ) {</span>
<a href="#l91.266"></a><span id="l91.266">         recursiveModuleLoader(os.getFileForPath(f.path));</span>
<a href="#l91.267"></a><span id="l91.267" class="difflineminus">-      } else if ( withs.startsWith(f.leafName, &quot;test&quot;) &amp;&amp; </span>
<a href="#l91.268"></a><span id="l91.268" class="difflineplus">+      } else if ( withs.startsWith(f.leafName, &quot;test&quot;) &amp;&amp;</span>
<a href="#l91.269"></a><span id="l91.269">                   withs.endsWith(f.leafName, &quot;.js&quot;)    &amp;&amp;</span>
<a href="#l91.270"></a><span id="l91.270">                   !arrays.inArray(r.test_modules_by_filename, f.path) ) {</span>
<a href="#l91.271"></a><span id="l91.271">         r.initTestModule(f.path);</span>
<a href="#l91.272"></a><span id="l91.272">       }</span>
<a href="#l91.273"></a><span id="l91.273">       r.testing.push(f.path);</span>
<a href="#l91.274"></a><span id="l91.274">     }</span>
<a href="#l91.275"></a><span id="l91.275">   }</span>
<a href="#l91.276"></a><span id="l91.276">   recursiveModuleLoader(os.getFileForPath(directory));</span>
<a href="#l91.277"></a><span id="l91.277"> }</span>
<a href="#l91.278"></a><span id="l91.278" class="difflineminus">-  </span>
<a href="#l91.279"></a><span id="l91.279" class="difflineplus">+</span>
<a href="#l91.280"></a><span id="l91.280"> // Observer which gets notified when the application quits</span>
<a href="#l91.281"></a><span id="l91.281"> function AppQuitObserver() {</span>
<a href="#l91.282"></a><span id="l91.282">   this.register();</span>
<a href="#l91.283"></a><span id="l91.283"> }</span>
<a href="#l91.284"></a><span id="l91.284"> AppQuitObserver.prototype = {</span>
<a href="#l91.285"></a><span id="l91.285">   observe: function(subject, topic, data) {</span>
<a href="#l91.286"></a><span id="l91.286">     events.appQuit = true;</span>
<a href="#l91.287"></a><span id="l91.287">   },</span>
<a href="#l91.288"></a><span id="l91.288" class="difflineat">@@ -513,17 +513,17 @@ function Runner (collector, invokedFromI</span>
<a href="#l91.289"></a><span id="l91.289">   events.fireEvent('startRunner', true);</span>
<a href="#l91.290"></a><span id="l91.290">   // var logging = {}; Components.utils.import('resource://mozmill/stdlib/logging.js', logging);</span>
<a href="#l91.291"></a><span id="l91.291">   // this.logger = new logging.Logger('Runner');</span>
<a href="#l91.292"></a><span id="l91.292">   var m = {}; Components.utils.import('resource://mozmill/modules/mozmill.js', m);</span>
<a href="#l91.293"></a><span id="l91.293">   this.platform = m.platform;</span>
<a href="#l91.294"></a><span id="l91.294"> }</span>
<a href="#l91.295"></a><span id="l91.295"> Runner.prototype.runTestDirectory = function (directory) {</span>
<a href="#l91.296"></a><span id="l91.296">   this.collector.initTestDirectory(directory);</span>
<a href="#l91.297"></a><span id="l91.297" class="difflineminus">-  </span>
<a href="#l91.298"></a><span id="l91.298" class="difflineplus">+</span>
<a href="#l91.299"></a><span id="l91.299">   for (var i in this.collector.test_modules_by_filename) {</span>
<a href="#l91.300"></a><span id="l91.300">     var test = this.collector.test_modules_by_filename[i];</span>
<a href="#l91.301"></a><span id="l91.301">     if (test.status != 'done') {</span>
<a href="#l91.302"></a><span id="l91.302">       this.runTestModule(test);</span>
<a href="#l91.303"></a><span id="l91.303">     }</span>
<a href="#l91.304"></a><span id="l91.304">   }</span>
<a href="#l91.305"></a><span id="l91.305"> }</span>
<a href="#l91.306"></a><span id="l91.306"> Runner.prototype.runTestFile = function (filename) {</span>
<a href="#l91.307"></a><span id="l91.307" class="difflineat">@@ -618,53 +618,53 @@ Runner.prototype._runTestModule = functi</span>
<a href="#l91.308"></a><span id="l91.308">   for (var i in module) {</span>
<a href="#l91.309"></a><span id="l91.309">     attrs.push(i);</span>
<a href="#l91.310"></a><span id="l91.310">   }</span>
<a href="#l91.311"></a><span id="l91.311"> </span>
<a href="#l91.312"></a><span id="l91.312">   events.setModule(module);</span>
<a href="#l91.313"></a><span id="l91.313">   var observer = new AppQuitObserver();</span>
<a href="#l91.314"></a><span id="l91.314"> </span>
<a href="#l91.315"></a><span id="l91.315">   module.__status__ = 'running';</span>
<a href="#l91.316"></a><span id="l91.316" class="difflineminus">-  if (module.__setupModule__) { </span>
<a href="#l91.317"></a><span id="l91.317" class="difflineplus">+  if (module.__setupModule__) {</span>
<a href="#l91.318"></a><span id="l91.318">     events.setState('setupModule');</span>
<a href="#l91.319"></a><span id="l91.319">     events.setTest(module.__setupModule__);</span>
<a href="#l91.320"></a><span id="l91.320" class="difflineminus">-    this.wrapper(module.__setupModule__, module); </span>
<a href="#l91.321"></a><span id="l91.321" class="difflineplus">+    this.wrapper(module.__setupModule__, module);</span>
<a href="#l91.322"></a><span id="l91.322">     var setupModulePassed = (events.currentTest.__fails__.length == 0 &amp;&amp; !events.currentTest.skipped);</span>
<a href="#l91.323"></a><span id="l91.323">     events.endTest(module.__setupModule__);</span>
<a href="#l91.324"></a><span id="l91.324">   } else {</span>
<a href="#l91.325"></a><span id="l91.325">     var setupModulePassed = true;</span>
<a href="#l91.326"></a><span id="l91.326">   }</span>
<a href="#l91.327"></a><span id="l91.327">   if (setupModulePassed) {</span>
<a href="#l91.328"></a><span id="l91.328">     for (var i in module.__tests__) {</span>
<a href="#l91.329"></a><span id="l91.329">       events.appQuit = false;</span>
<a href="#l91.330"></a><span id="l91.330">       var test = module.__tests__[i];</span>
<a href="#l91.331"></a><span id="l91.331" class="difflineminus">-      </span>
<a href="#l91.332"></a><span id="l91.332" class="difflineplus">+</span>
<a href="#l91.333"></a><span id="l91.333">       // TODO: introduce per-test timeout:</span>
<a href="#l91.334"></a><span id="l91.334">       // https://bugzilla.mozilla.org/show_bug.cgi?id=574871</span>
<a href="#l91.335"></a><span id="l91.335"> </span>
<a href="#l91.336"></a><span id="l91.336" class="difflineminus">-      if (module.__setupTest__) { </span>
<a href="#l91.337"></a><span id="l91.337" class="difflineplus">+      if (module.__setupTest__) {</span>
<a href="#l91.338"></a><span id="l91.338">         events.setState('setupTest');</span>
<a href="#l91.339"></a><span id="l91.339">         events.setTest(module.__setupTest__);</span>
<a href="#l91.340"></a><span id="l91.340" class="difflineminus">-        this.wrapper(module.__setupTest__, test); </span>
<a href="#l91.341"></a><span id="l91.341" class="difflineplus">+        this.wrapper(module.__setupTest__, test);</span>
<a href="#l91.342"></a><span id="l91.342">         var setupTestPassed = (events.currentTest.__fails__.length == 0 &amp;&amp; !events.currentTest.skipped);</span>
<a href="#l91.343"></a><span id="l91.343">         events.endTest(module.__setupTest__);</span>
<a href="#l91.344"></a><span id="l91.344">       } else {</span>
<a href="#l91.345"></a><span id="l91.345">         var setupTestPassed = true;</span>
<a href="#l91.346"></a><span id="l91.346" class="difflineminus">-      }  </span>
<a href="#l91.347"></a><span id="l91.347" class="difflineminus">-      events.setState('test'); </span>
<a href="#l91.348"></a><span id="l91.348" class="difflineplus">+      }</span>
<a href="#l91.349"></a><span id="l91.349" class="difflineplus">+      events.setState('test');</span>
<a href="#l91.350"></a><span id="l91.350">       events.setTest(test, this.invokedFromIDE);</span>
<a href="#l91.351"></a><span id="l91.351">       if (setupTestPassed) {</span>
<a href="#l91.352"></a><span id="l91.352">         this.wrapper(test);</span>
<a href="#l91.353"></a><span id="l91.353">       } else {</span>
<a href="#l91.354"></a><span id="l91.354">         events.skip(&quot;setupTest failed.&quot;);</span>
<a href="#l91.355"></a><span id="l91.355">       }</span>
<a href="#l91.356"></a><span id="l91.356">       if (module.__teardownTest__) {</span>
<a href="#l91.357"></a><span id="l91.357" class="difflineminus">-        events.setState('teardownTest'); </span>
<a href="#l91.358"></a><span id="l91.358" class="difflineplus">+        events.setState('teardownTest');</span>
<a href="#l91.359"></a><span id="l91.359">         events.setTest(module.__teardownTest__);</span>
<a href="#l91.360"></a><span id="l91.360" class="difflineminus">-        this.wrapper(module.__teardownTest__, test); </span>
<a href="#l91.361"></a><span id="l91.361" class="difflineplus">+        this.wrapper(module.__teardownTest__, test);</span>
<a href="#l91.362"></a><span id="l91.362">         events.endTest(module.__teardownTest__);</span>
<a href="#l91.363"></a><span id="l91.363">       }</span>
<a href="#l91.364"></a><span id="l91.364">       events.endTest(test)</span>
<a href="#l91.365"></a><span id="l91.365">     }</span>
<a href="#l91.366"></a><span id="l91.366">   } else {</span>
<a href="#l91.367"></a><span id="l91.367">     for each(var test in module.__tests__) {</span>
<a href="#l91.368"></a><span id="l91.368">       events.setTest(test);</span>
<a href="#l91.369"></a><span id="l91.369">       events.skip(&quot;setupModule failed.&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l92.1"></a><span id="l92.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js</span>
<a href="#l92.2"></a><span id="l92.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/init.js</span>
<a href="#l92.3"></a><span id="l92.3" class="difflineat">@@ -1,49 +1,49 @@</span>
<a href="#l92.4"></a><span id="l92.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l92.5"></a><span id="l92.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l92.6"></a><span id="l92.6" class="difflineminus">- * </span>
<a href="#l92.7"></a><span id="l92.7" class="difflineplus">+ *</span>
<a href="#l92.8"></a><span id="l92.8">  * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l92.9"></a><span id="l92.9">  * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l92.10"></a><span id="l92.10">  * the License. You may obtain a copy of the License at</span>
<a href="#l92.11"></a><span id="l92.11">  * http://www.mozilla.org/MPL/</span>
<a href="#l92.12"></a><span id="l92.12" class="difflineminus">- * </span>
<a href="#l92.13"></a><span id="l92.13" class="difflineplus">+ *</span>
<a href="#l92.14"></a><span id="l92.14">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l92.15"></a><span id="l92.15">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l92.16"></a><span id="l92.16">  * for the specific language governing rights and limitations under the</span>
<a href="#l92.17"></a><span id="l92.17">  * License.</span>
<a href="#l92.18"></a><span id="l92.18" class="difflineminus">- * </span>
<a href="#l92.19"></a><span id="l92.19" class="difflineplus">+ *</span>
<a href="#l92.20"></a><span id="l92.20">  * The Original Code is Mozilla Corporation Code.</span>
<a href="#l92.21"></a><span id="l92.21" class="difflineminus">- * </span>
<a href="#l92.22"></a><span id="l92.22" class="difflineplus">+ *</span>
<a href="#l92.23"></a><span id="l92.23">  * The Initial Developer of the Original Code is</span>
<a href="#l92.24"></a><span id="l92.24">  * Adam Christian.</span>
<a href="#l92.25"></a><span id="l92.25">  * Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l92.26"></a><span id="l92.26">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l92.27"></a><span id="l92.27" class="difflineminus">- * </span>
<a href="#l92.28"></a><span id="l92.28" class="difflineplus">+ *</span>
<a href="#l92.29"></a><span id="l92.29">  * Contributor(s):</span>
<a href="#l92.30"></a><span id="l92.30">  *  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l92.31"></a><span id="l92.31">  *  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l92.32"></a><span id="l92.32">  *  Henrik Skupin &lt;hskupin@mozilla.com&gt;</span>
<a href="#l92.33"></a><span id="l92.33" class="difflineminus">- * </span>
<a href="#l92.34"></a><span id="l92.34" class="difflineplus">+ *</span>
<a href="#l92.35"></a><span id="l92.35">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l92.36"></a><span id="l92.36">  * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l92.37"></a><span id="l92.37">  * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l92.38"></a><span id="l92.38">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l92.39"></a><span id="l92.39">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l92.40"></a><span id="l92.40">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l92.41"></a><span id="l92.41">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l92.42"></a><span id="l92.42">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l92.43"></a><span id="l92.43">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l92.44"></a><span id="l92.44">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l92.45"></a><span id="l92.45">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l92.46"></a><span id="l92.46" class="difflineminus">- * </span>
<a href="#l92.47"></a><span id="l92.47" class="difflineplus">+ *</span>
<a href="#l92.48"></a><span id="l92.48">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l92.49"></a><span id="l92.49"> </span>
<a href="#l92.50"></a><span id="l92.50"> var EXPORTED_SYMBOLS = [&quot;mozmill&quot;];</span>
<a href="#l92.51"></a><span id="l92.51" class="difflineminus">-  </span>
<a href="#l92.52"></a><span id="l92.52" class="difflineplus">+</span>
<a href="#l92.53"></a><span id="l92.53"> const Cc = Components.classes;</span>
<a href="#l92.54"></a><span id="l92.54"> const Ci = Components.interfaces;</span>
<a href="#l92.55"></a><span id="l92.55"> const Cu = Components.utils;</span>
<a href="#l92.56"></a><span id="l92.56"> </span>
<a href="#l92.57"></a><span id="l92.57"> var controller = Cu.import('resource://mozmill/modules/controller.js');</span>
<a href="#l92.58"></a><span id="l92.58"> var mozmill = Cu.import('resource://mozmill/modules/mozmill.js');</span>
<a href="#l92.59"></a><span id="l92.59"> var utils = Cu.import('resource://mozmill/modules/utils.js');</span>
<a href="#l92.60"></a><span id="l92.60"> </span>
<a href="#l92.61"></a><span id="l92.61" class="difflineat">@@ -65,30 +65,30 @@ var windowCloseObserver = {</span>
<a href="#l92.62"></a><span id="l92.62"> </span>
<a href="#l92.63"></a><span id="l92.63"> </span>
<a href="#l92.64"></a><span id="l92.64"> /**</span>
<a href="#l92.65"></a><span id="l92.65">  * Attach event listeners</span>
<a href="#l92.66"></a><span id="l92.66">  */</span>
<a href="#l92.67"></a><span id="l92.67"> function attachEventListeners(aWindow) {</span>
<a href="#l92.68"></a><span id="l92.68">   aWindow.addEventListener(&quot;load&quot;, function (event) {</span>
<a href="#l92.69"></a><span id="l92.69">     controller.windowMap.update(utils.getWindowId(aWindow), &quot;loaded&quot;, true);</span>
<a href="#l92.70"></a><span id="l92.70" class="difflineminus">- </span>
<a href="#l92.71"></a><span id="l92.71" class="difflineplus">+</span>
<a href="#l92.72"></a><span id="l92.72">     if (&quot;gBrowser&quot; in aWindow) {</span>
<a href="#l92.73"></a><span id="l92.73">       // Page is ready</span>
<a href="#l92.74"></a><span id="l92.74">       aWindow.gBrowser.addEventListener(&quot;load&quot;, function (event) {</span>
<a href="#l92.75"></a><span id="l92.75">         var doc = event.originalTarget;</span>
<a href="#l92.76"></a><span id="l92.76"> </span>
<a href="#l92.77"></a><span id="l92.77">         // Only update the flag if we have a document as target</span>
<a href="#l92.78"></a><span id="l92.78">         if (&quot;defaultView&quot; in doc) {</span>
<a href="#l92.79"></a><span id="l92.79">           var id = utils.getWindowId(doc.defaultView);</span>
<a href="#l92.80"></a><span id="l92.80">           controller.windowMap.update(id, &quot;loaded&quot;, true);</span>
<a href="#l92.81"></a><span id="l92.81">           // dump(&quot;*** load event: &quot; + id + &quot;, &quot; + doc.location + &quot;, baseURI=&quot; + doc.baseURI + &quot;\n&quot;);</span>
<a href="#l92.82"></a><span id="l92.82">         }</span>
<a href="#l92.83"></a><span id="l92.83">       }, true);</span>
<a href="#l92.84"></a><span id="l92.84" class="difflineminus">- </span>
<a href="#l92.85"></a><span id="l92.85" class="difflineplus">+</span>
<a href="#l92.86"></a><span id="l92.86">       // Note: Error pages will never fire a &quot;load&quot; event. For those we</span>
<a href="#l92.87"></a><span id="l92.87">       // have to wait for the &quot;DOMContentLoaded&quot; event. That's the final state.</span>
<a href="#l92.88"></a><span id="l92.88">       // Error pages will always have a baseURI starting with</span>
<a href="#l92.89"></a><span id="l92.89">       // &quot;about:&quot; followed by &quot;error&quot; or &quot;blocked&quot;.</span>
<a href="#l92.90"></a><span id="l92.90">       aWindow.gBrowser.addEventListener(&quot;DOMContentLoaded&quot;, function (event) {</span>
<a href="#l92.91"></a><span id="l92.91">         var doc = event.originalTarget;</span>
<a href="#l92.92"></a><span id="l92.92"> </span>
<a href="#l92.93"></a><span id="l92.93">         var errorRegex = /about:.+(error)|(blocked)\?/;</span>
<a href="#l92.94"></a><span id="l92.94" class="difflineat">@@ -99,32 +99,32 @@ function attachEventListeners(aWindow) {</span>
<a href="#l92.95"></a><span id="l92.95">           // Only update the flag if we have a document as target</span>
<a href="#l92.96"></a><span id="l92.96">           if (&quot;defaultView&quot; in doc) {</span>
<a href="#l92.97"></a><span id="l92.97">             var id = utils.getWindowId(doc.defaultView);</span>
<a href="#l92.98"></a><span id="l92.98">             controller.windowMap.update(id, &quot;loaded&quot;, true);</span>
<a href="#l92.99"></a><span id="l92.99">             // dump(&quot;*** load event: &quot; + id + &quot;, &quot; + doc.location + &quot;, baseURI=&quot; + doc.baseURI + &quot;\n&quot;);</span>
<a href="#l92.100"></a><span id="l92.100">           }</span>
<a href="#l92.101"></a><span id="l92.101">         }</span>
<a href="#l92.102"></a><span id="l92.102">       }, true);</span>
<a href="#l92.103"></a><span id="l92.103" class="difflineminus">-  </span>
<a href="#l92.104"></a><span id="l92.104" class="difflineplus">+</span>
<a href="#l92.105"></a><span id="l92.105">       // Page is about to get unloaded</span>
<a href="#l92.106"></a><span id="l92.106">       aWindow.gBrowser.addEventListener(&quot;beforeunload&quot;, function (event) {</span>
<a href="#l92.107"></a><span id="l92.107">         var doc = event.originalTarget;</span>
<a href="#l92.108"></a><span id="l92.108"> </span>
<a href="#l92.109"></a><span id="l92.109">         // Only update the flag if we have a document as target</span>
<a href="#l92.110"></a><span id="l92.110">         if (&quot;defaultView&quot; in doc) {</span>
<a href="#l92.111"></a><span id="l92.111">           var id = utils.getWindowId(doc.defaultView);</span>
<a href="#l92.112"></a><span id="l92.112">           controller.windowMap.update(id, &quot;loaded&quot;, false);</span>
<a href="#l92.113"></a><span id="l92.113">           // dump(&quot;*** beforeunload event: &quot; + id + &quot;, &quot; + doc.location + &quot;, baseURI=&quot; + doc.baseURI + &quot;\n&quot;);</span>
<a href="#l92.114"></a><span id="l92.114">         }</span>
<a href="#l92.115"></a><span id="l92.115">       }, true);</span>
<a href="#l92.116"></a><span id="l92.116">     }</span>
<a href="#l92.117"></a><span id="l92.117">   }, false);</span>
<a href="#l92.118"></a><span id="l92.118"> }</span>
<a href="#l92.119"></a><span id="l92.119" class="difflineminus">-  </span>
<a href="#l92.120"></a><span id="l92.120" class="difflineplus">+</span>
<a href="#l92.121"></a><span id="l92.121"> /**</span>
<a href="#l92.122"></a><span id="l92.122">  * Initialize Mozmill</span>
<a href="#l92.123"></a><span id="l92.123">  */</span>
<a href="#l92.124"></a><span id="l92.124"> function initialize() {</span>
<a href="#l92.125"></a><span id="l92.125">   // Activate observer for new top level windows</span>
<a href="#l92.126"></a><span id="l92.126">   var observerService = Cc[&quot;@mozilla.org/observer-service;1&quot;].</span>
<a href="#l92.127"></a><span id="l92.127">                         getService(Ci.nsIObserverService);</span>
<a href="#l92.128"></a><span id="l92.128">   observerService.addObserver(windowReadyObserver, &quot;toplevel-window-ready&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l93.1"></a><span id="l93.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js</span>
<a href="#l93.2"></a><span id="l93.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/inspection.js</span>
<a href="#l93.3"></a><span id="l93.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l93.4"></a><span id="l93.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l93.5"></a><span id="l93.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l93.6"></a><span id="l93.6" class="difflineminus">-// </span>
<a href="#l93.7"></a><span id="l93.7" class="difflineplus">+//</span>
<a href="#l93.8"></a><span id="l93.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l93.9"></a><span id="l93.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l93.10"></a><span id="l93.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l93.11"></a><span id="l93.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l93.12"></a><span id="l93.12" class="difflineminus">-// </span>
<a href="#l93.13"></a><span id="l93.13" class="difflineplus">+//</span>
<a href="#l93.14"></a><span id="l93.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l93.15"></a><span id="l93.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l93.16"></a><span id="l93.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l93.17"></a><span id="l93.17"> // License.</span>
<a href="#l93.18"></a><span id="l93.18" class="difflineminus">-// </span>
<a href="#l93.19"></a><span id="l93.19" class="difflineplus">+//</span>
<a href="#l93.20"></a><span id="l93.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l93.21"></a><span id="l93.21" class="difflineminus">-// </span>
<a href="#l93.22"></a><span id="l93.22" class="difflineplus">+//</span>
<a href="#l93.23"></a><span id="l93.23"> // The Initial Developer of the Original Code is</span>
<a href="#l93.24"></a><span id="l93.24"> // Mikeal Rogers.</span>
<a href="#l93.25"></a><span id="l93.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l93.26"></a><span id="l93.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l93.27"></a><span id="l93.27" class="difflineminus">-// </span>
<a href="#l93.28"></a><span id="l93.28" class="difflineplus">+//</span>
<a href="#l93.29"></a><span id="l93.29"> // Contributor(s):</span>
<a href="#l93.30"></a><span id="l93.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l93.31"></a><span id="l93.31" class="difflineminus">-// </span>
<a href="#l93.32"></a><span id="l93.32" class="difflineplus">+//</span>
<a href="#l93.33"></a><span id="l93.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l93.34"></a><span id="l93.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l93.35"></a><span id="l93.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l93.36"></a><span id="l93.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l93.37"></a><span id="l93.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l93.38"></a><span id="l93.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l93.39"></a><span id="l93.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l93.40"></a><span id="l93.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l93.41"></a><span id="l93.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l93.42"></a><span id="l93.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l93.43"></a><span id="l93.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l93.44"></a><span id="l93.44" class="difflineminus">-// </span>
<a href="#l93.45"></a><span id="l93.45" class="difflineplus">+//</span>
<a href="#l93.46"></a><span id="l93.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l93.47"></a><span id="l93.47"> </span>
<a href="#l93.48"></a><span id="l93.48"> var EXPORTED_SYMBOLS = [&quot;inspectElement&quot;]</span>
<a href="#l93.49"></a><span id="l93.49"> </span>
<a href="#l93.50"></a><span id="l93.50"> var elementslib = {}; Components.utils.import('resource://mozmill/modules/elementslib.js', elementslib);</span>
<a href="#l93.51"></a><span id="l93.51"> var mozmill = {}; Components.utils.import('resource://mozmill/modules/mozmill.js', mozmill);</span>
<a href="#l93.52"></a><span id="l93.52"> var utils = {}; Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l93.53"></a><span id="l93.53"> </span>
<a href="#l93.54"></a><span id="l93.54" class="difflineat">@@ -102,33 +102,33 @@ var getXPath = function (node, path) {</span>
<a href="#l93.55"></a><span id="l93.55">       path.push(node.nodeName.toLowerCase() + (node.id ? &quot;[@id='&quot;+node.id+&quot;']&quot; : count &gt; 0 ? &quot;[&quot;+count+&quot;]&quot; : ''));</span>
<a href="#l93.56"></a><span id="l93.56">   //  }</span>
<a href="#l93.57"></a><span id="l93.57">   //  else{</span>
<a href="#l93.58"></a><span id="l93.58">   //    path.push(node.nodeName.toLowerCase() + (node.id ? &quot;&quot; : count &gt; 0 ? &quot;[&quot;+count+&quot;]&quot; : ''));</span>
<a href="#l93.59"></a><span id="l93.59">   //  }</span>
<a href="#l93.60"></a><span id="l93.60">   }</span>
<a href="#l93.61"></a><span id="l93.61">   return path;</span>
<a href="#l93.62"></a><span id="l93.62"> };</span>
<a href="#l93.63"></a><span id="l93.63" class="difflineminus">-  </span>
<a href="#l93.64"></a><span id="l93.64" class="difflineplus">+</span>
<a href="#l93.65"></a><span id="l93.65"> function getXSPath(node){</span>
<a href="#l93.66"></a><span id="l93.66">   var xpArray = getXPath(node);</span>
<a href="#l93.67"></a><span id="l93.67">   var stringXpath = xpArray.join('/');</span>
<a href="#l93.68"></a><span id="l93.68">   stringXpath = '/'+stringXpath;</span>
<a href="#l93.69"></a><span id="l93.69">   stringXpath = stringXpath.replace('//','/');</span>
<a href="#l93.70"></a><span id="l93.70">   return stringXpath;</span>
<a href="#l93.71"></a><span id="l93.71"> }</span>
<a href="#l93.72"></a><span id="l93.72"> function getXULXpath (el, xml) {</span>
<a href="#l93.73"></a><span id="l93.73"> 	var xpath = '';</span>
<a href="#l93.74"></a><span id="l93.74"> 	var pos, tempitem2;</span>
<a href="#l93.75"></a><span id="l93.75"> </span>
<a href="#l93.76"></a><span id="l93.76" class="difflineminus">-	while(el !== xml.documentElement) {		</span>
<a href="#l93.77"></a><span id="l93.77" class="difflineplus">+	while(el !== xml.documentElement) {</span>
<a href="#l93.78"></a><span id="l93.78"> 		pos = 0;</span>
<a href="#l93.79"></a><span id="l93.79"> 		tempitem2 = el;</span>
<a href="#l93.80"></a><span id="l93.80"> 		while(tempitem2) {</span>
<a href="#l93.81"></a><span id="l93.81" class="difflineminus">-			if (tempitem2.nodeType === 1 &amp;&amp; tempitem2.nodeName === el.nodeName) { </span>
<a href="#l93.82"></a><span id="l93.82" class="difflineplus">+			if (tempitem2.nodeType === 1 &amp;&amp; tempitem2.nodeName === el.nodeName) {</span>
<a href="#l93.83"></a><span id="l93.83"> 			  // If it is ELEMENT_NODE of the same name</span>
<a href="#l93.84"></a><span id="l93.84"> 				pos += 1;</span>
<a href="#l93.85"></a><span id="l93.85"> 			}</span>
<a href="#l93.86"></a><span id="l93.86"> 			tempitem2 = tempitem2.previousSibling;</span>
<a href="#l93.87"></a><span id="l93.87"> 		}</span>
<a href="#l93.88"></a><span id="l93.88"> </span>
<a href="#l93.89"></a><span id="l93.89"> 		xpath = &quot;*[name()='&quot;+el.nodeName+&quot;' and namespace-uri()='&quot;+(el.namespaceURI===null?'':el.namespaceURI)+&quot;'][&quot;+pos+']'+'/'+xpath;</span>
<a href="#l93.90"></a><span id="l93.90"> </span>
<a href="#l93.91"></a><span id="l93.91" class="difflineat">@@ -154,17 +154,17 @@ var attributeToIgnore = ['focus', 'focus</span>
<a href="#l93.92"></a><span id="l93.92">                          'linkedpanel', 'last-tab', 'afterselected', // From Tabs UI, thanks Farhad</span>
<a href="#l93.93"></a><span id="l93.93">                          'style', // Gets set dynamically all the time, also effected by dx display code</span>
<a href="#l93.94"></a><span id="l93.94">                          ];</span>
<a href="#l93.95"></a><span id="l93.95"> </span>
<a href="#l93.96"></a><span id="l93.96"> var getUniqueAttributesReduction = function (attributes, node) {</span>
<a href="#l93.97"></a><span id="l93.97">   for (var i in attributes) {</span>
<a href="#l93.98"></a><span id="l93.98">     if ( node.getAttribute(i) == attributes[i] || arrays.inArray(attributeToIgnore, i) || arrays.inArray(attributeToIgnore, attributes[i]) || i == 'id') {</span>
<a href="#l93.99"></a><span id="l93.99">       delete attributes[i];</span>
<a href="#l93.100"></a><span id="l93.100" class="difflineminus">-    } </span>
<a href="#l93.101"></a><span id="l93.101" class="difflineplus">+    }</span>
<a href="#l93.102"></a><span id="l93.102">   }</span>
<a href="#l93.103"></a><span id="l93.103">   return attributes;</span>
<a href="#l93.104"></a><span id="l93.104"> }</span>
<a href="#l93.105"></a><span id="l93.105"> </span>
<a href="#l93.106"></a><span id="l93.106"> var getLookupExpression = function (_document, elem) {</span>
<a href="#l93.107"></a><span id="l93.107">   expArray = [];</span>
<a href="#l93.108"></a><span id="l93.108">   while ( elem.parentNode ) {</span>
<a href="#l93.109"></a><span id="l93.109">     var exp = getLookupForElem(_document, elem);</span>
<a href="#l93.110"></a><span id="l93.110" class="difflineat">@@ -172,103 +172,103 @@ var getLookupExpression = function (_doc</span>
<a href="#l93.111"></a><span id="l93.111">     var elem = elem.parentNode;</span>
<a href="#l93.112"></a><span id="l93.112">   }</span>
<a href="#l93.113"></a><span id="l93.113">   expArray.reverse();</span>
<a href="#l93.114"></a><span id="l93.114">   return '/' + expArray.join('/');</span>
<a href="#l93.115"></a><span id="l93.115"> }</span>
<a href="#l93.116"></a><span id="l93.116"> </span>
<a href="#l93.117"></a><span id="l93.117"> var getLookupForElem = function (_document, elem) {</span>
<a href="#l93.118"></a><span id="l93.118">   if ( !elemIsAnonymous(elem) ) {</span>
<a href="#l93.119"></a><span id="l93.119" class="difflineminus">-    if (elem.id != &quot;&quot; &amp;&amp; !withs.startsWith(elem.id, 'panel')) {  </span>
<a href="#l93.120"></a><span id="l93.120" class="difflineplus">+    if (elem.id != &quot;&quot; &amp;&amp; !withs.startsWith(elem.id, 'panel')) {</span>
<a href="#l93.121"></a><span id="l93.121">       identifier = {'name':'id', 'value':elem.id};</span>
<a href="#l93.122"></a><span id="l93.122">     } else if ((elem.name != &quot;&quot;) &amp;&amp; (typeof(elem.name) != &quot;undefined&quot;)) {</span>
<a href="#l93.123"></a><span id="l93.123">       identifier = {'name':'name', 'value':elem.name};</span>
<a href="#l93.124"></a><span id="l93.124">     } else {</span>
<a href="#l93.125"></a><span id="l93.125">       identifier = null;</span>
<a href="#l93.126"></a><span id="l93.126">     }</span>
<a href="#l93.127"></a><span id="l93.127" class="difflineminus">-    </span>
<a href="#l93.128"></a><span id="l93.128" class="difflineplus">+</span>
<a href="#l93.129"></a><span id="l93.129">     if (identifier) {</span>
<a href="#l93.130"></a><span id="l93.130">       var result = {'id':elementslib._byID, 'name':elementslib._byName}[identifier.name](_document, elem.parentNode, identifier.value);</span>
<a href="#l93.131"></a><span id="l93.131">       if ( typeof(result != 'array') ) {</span>
<a href="#l93.132"></a><span id="l93.132">         return identifier.name+'('+json2.JSON.stringify(identifier.value)+')';</span>
<a href="#l93.133"></a><span id="l93.133">       }</span>
<a href="#l93.134"></a><span id="l93.134">     }</span>
<a href="#l93.135"></a><span id="l93.135" class="difflineminus">-    </span>
<a href="#l93.136"></a><span id="l93.136" class="difflineplus">+</span>
<a href="#l93.137"></a><span id="l93.137">     // At this point there is either no identifier or it returns multiple</span>
<a href="#l93.138"></a><span id="l93.138" class="difflineminus">-    var parse = [n for each (n in elem.parentNode.childNodes) if </span>
<a href="#l93.139"></a><span id="l93.139" class="difflineplus">+    var parse = [n for each (n in elem.parentNode.childNodes) if</span>
<a href="#l93.140"></a><span id="l93.140">                  (n.getAttribute &amp;&amp; n != elem)</span>
<a href="#l93.141"></a><span id="l93.141">                  ];</span>
<a href="#l93.142"></a><span id="l93.142">     parse.unshift(dom.getAttributes(elem));</span>
<a href="#l93.143"></a><span id="l93.143">     var uniqueAttributes = parse.reduce(getUniqueAttributesReduction);</span>
<a href="#l93.144"></a><span id="l93.144" class="difflineminus">-    </span>
<a href="#l93.145"></a><span id="l93.145" class="difflineplus">+</span>
<a href="#l93.146"></a><span id="l93.146">     if (!result) {</span>
<a href="#l93.147"></a><span id="l93.147" class="difflineminus">-      var result = elementslib._byAttrib(elem.parentNode, uniqueAttributes);  </span>
<a href="#l93.148"></a><span id="l93.148" class="difflineminus">-    } </span>
<a href="#l93.149"></a><span id="l93.149" class="difflineminus">-    </span>
<a href="#l93.150"></a><span id="l93.150" class="difflineplus">+      var result = elementslib._byAttrib(elem.parentNode, uniqueAttributes);</span>
<a href="#l93.151"></a><span id="l93.151" class="difflineplus">+    }</span>
<a href="#l93.152"></a><span id="l93.152" class="difflineplus">+</span>
<a href="#l93.153"></a><span id="l93.153">     if (!identifier &amp;&amp; typeof(result) == 'array' ) {</span>
<a href="#l93.154"></a><span id="l93.154">       return json2.JSON.stringify(uniqueAttributes) + '['+arrays.indexOf(result, elem)+']'</span>
<a href="#l93.155"></a><span id="l93.155">     } else {</span>
<a href="#l93.156"></a><span id="l93.156">       var aresult = elementslib._byAttrib(elem.parentNode, uniqueAttributes);</span>
<a href="#l93.157"></a><span id="l93.157">       if ( typeof(aresult != 'array') ) {</span>
<a href="#l93.158"></a><span id="l93.158">         if (objects.getLength(uniqueAttributes) == 0) {</span>
<a href="#l93.159"></a><span id="l93.159">           return '['+arrays.indexOf(elem.parentNode.childNodes, elem)+']'</span>
<a href="#l93.160"></a><span id="l93.160">         }</span>
<a href="#l93.161"></a><span id="l93.161">         return json2.JSON.stringify(uniqueAttributes)</span>
<a href="#l93.162"></a><span id="l93.162">       } else if ( result.length &gt; aresult.length ) {</span>
<a href="#l93.163"></a><span id="l93.163">         return json2.JSON.stringify(uniqueAttributes) + '['+arrays.indexOf(aresult, elem)+']'</span>
<a href="#l93.164"></a><span id="l93.164">       } else {</span>
<a href="#l93.165"></a><span id="l93.165">         return identifier.name+'('+json2.JSON.stringify(identifier.value)+')' + '['+arrays.indexOf(result, elem)+']'</span>
<a href="#l93.166"></a><span id="l93.166">       }</span>
<a href="#l93.167"></a><span id="l93.167">     }</span>
<a href="#l93.168"></a><span id="l93.168" class="difflineminus">-    </span>
<a href="#l93.169"></a><span id="l93.169" class="difflineplus">+</span>
<a href="#l93.170"></a><span id="l93.170">   } else {</span>
<a href="#l93.171"></a><span id="l93.171">     // Handle Anonymous Nodes</span>
<a href="#l93.172"></a><span id="l93.172" class="difflineminus">-    var parse = [n for each (n in _document.getAnonymousNodes(elem.parentNode)) if </span>
<a href="#l93.173"></a><span id="l93.173" class="difflineplus">+    var parse = [n for each (n in _document.getAnonymousNodes(elem.parentNode)) if</span>
<a href="#l93.174"></a><span id="l93.174">                  (n.getAttribute &amp;&amp; n != elem)</span>
<a href="#l93.175"></a><span id="l93.175">                  ];</span>
<a href="#l93.176"></a><span id="l93.176">     parse.unshift(dom.getAttributes(elem));</span>
<a href="#l93.177"></a><span id="l93.177">     var uniqueAttributes = parse.reduce(getUniqueAttributesReduction);</span>
<a href="#l93.178"></a><span id="l93.178" class="difflineminus">-    if (uniqueAttributes.anonid &amp;&amp; typeof(elementslib._byAnonAttrib(_document, </span>
<a href="#l93.179"></a><span id="l93.179" class="difflineplus">+    if (uniqueAttributes.anonid &amp;&amp; typeof(elementslib._byAnonAttrib(_document,</span>
<a href="#l93.180"></a><span id="l93.180">         elem.parentNode, {'anonid':uniqueAttributes.anonid})) != 'array') {</span>
<a href="#l93.181"></a><span id="l93.181">       uniqueAttributes = {'anonid':uniqueAttributes.anonid};</span>
<a href="#l93.182"></a><span id="l93.182">     }</span>
<a href="#l93.183"></a><span id="l93.183" class="difflineminus">-    </span>
<a href="#l93.184"></a><span id="l93.184" class="difflineplus">+</span>
<a href="#l93.185"></a><span id="l93.185">     if (objects.getLength(uniqueAttributes) == 0) {</span>
<a href="#l93.186"></a><span id="l93.186">       return 'anon(['+arrays.indexOf(_document.getAnonymousNodes(elem.parentNode), elem)+'])';</span>
<a href="#l93.187"></a><span id="l93.187">     } else if (arrays.inArray(uniqueAttributes, 'anonid')) {</span>
<a href="#l93.188"></a><span id="l93.188">       return 'anon({&quot;anonid&quot;:&quot;'+uniqueAttributes['anonid']+'&quot;})';</span>
<a href="#l93.189"></a><span id="l93.189">     } else {</span>
<a href="#l93.190"></a><span id="l93.190">       return 'anon('+json2.JSON.stringify(uniqueAttributes)+')';</span>
<a href="#l93.191"></a><span id="l93.191" class="difflineminus">-    }    </span>
<a href="#l93.192"></a><span id="l93.192" class="difflineminus">-    </span>
<a href="#l93.193"></a><span id="l93.193" class="difflineplus">+    }</span>
<a href="#l93.194"></a><span id="l93.194" class="difflineplus">+</span>
<a href="#l93.195"></a><span id="l93.195">   }</span>
<a href="#l93.196"></a><span id="l93.196">   return 'broken '+elemIsAnonymous(elem)</span>
<a href="#l93.197"></a><span id="l93.197"> }</span>
<a href="#l93.198"></a><span id="l93.198"> </span>
<a href="#l93.199"></a><span id="l93.199"> var removeHTMLTags = function(str){</span>
<a href="#l93.200"></a><span id="l93.200">  	 	str = str.replace(/&amp;(lt|gt);/g, function (strMatch, p1){</span>
<a href="#l93.201"></a><span id="l93.201">  		 	return (p1 == &quot;lt&quot;)? &quot;&lt;&quot; : &quot;&gt;&quot;;</span>
<a href="#l93.202"></a><span id="l93.202">  		});</span>
<a href="#l93.203"></a><span id="l93.203">  		var strTagStrippedText = str.replace(/&lt;\/?[^&gt;]+(&gt;|$)/g, &quot;&quot;);</span>
<a href="#l93.204"></a><span id="l93.204">  		strTagStrippedText = strTagStrippedText.replace(/&amp;nbsp;/g,&quot;&quot;);</span>
<a href="#l93.205"></a><span id="l93.205"> 	return strTagStrippedText;</span>
<a href="#l93.206"></a><span id="l93.206"> }</span>
<a href="#l93.207"></a><span id="l93.207"> </span>
<a href="#l93.208"></a><span id="l93.208"> var isMagicAnonymousDiv = function (_document, node) {</span>
<a href="#l93.209"></a><span id="l93.209">   if (node.getAttribute &amp;&amp; node.getAttribute('class') == 'anonymous-div') {</span>
<a href="#l93.210"></a><span id="l93.210" class="difflineminus">-    if (!arrays.inArray(node.parentNode.childNodes, node) &amp;&amp; (_document.getAnonymousNodes(node) == null || </span>
<a href="#l93.211"></a><span id="l93.211" class="difflineplus">+    if (!arrays.inArray(node.parentNode.childNodes, node) &amp;&amp; (_document.getAnonymousNodes(node) == null ||</span>
<a href="#l93.212"></a><span id="l93.212">         !arrays.inArray(_document.getAnonymousNodes(node), node) ) ) {</span>
<a href="#l93.213"></a><span id="l93.213">           return true;</span>
<a href="#l93.214"></a><span id="l93.214">         }</span>
<a href="#l93.215"></a><span id="l93.215">   }</span>
<a href="#l93.216"></a><span id="l93.216">   return false;</span>
<a href="#l93.217"></a><span id="l93.217"> }</span>
<a href="#l93.218"></a><span id="l93.218"> </span>
<a href="#l93.219"></a><span id="l93.219"> var copyToClipboard = function(str){</span>
<a href="#l93.220"></a><span id="l93.220" class="difflineminus">-  const gClipboardHelper = Components.classes[&quot;@mozilla.org/widget/clipboardhelper;1&quot;] .getService(Components.interfaces.nsIClipboardHelper); </span>
<a href="#l93.221"></a><span id="l93.221" class="difflineplus">+  const gClipboardHelper = Components.classes[&quot;@mozilla.org/widget/clipboardhelper;1&quot;] .getService(Components.interfaces.nsIClipboardHelper);</span>
<a href="#l93.222"></a><span id="l93.222">   gClipboardHelper.copyString(str);</span>
<a href="#l93.223"></a><span id="l93.223"> }</span>
<a href="#l93.224"></a><span id="l93.224"> </span>
<a href="#l93.225"></a><span id="l93.225"> var getControllerAndDocument = function (_document, _window) {</span>
<a href="#l93.226"></a><span id="l93.226">   var windowtype = _window.document.documentElement.getAttribute('windowtype');</span>
<a href="#l93.227"></a><span id="l93.227">   var controllerString, documentString, activeTab;</span>
<a href="#l93.228"></a><span id="l93.228"> </span>
<a href="#l93.229"></a><span id="l93.229">   // TODO replace with object based cases</span>
<a href="#l93.230"></a><span id="l93.230" class="difflineat">@@ -315,82 +315,82 @@ getDocumentStub = function( _document, _</span>
<a href="#l93.231"></a><span id="l93.231">   for(var i = 0; i &lt; _window.frames.length; i++) {</span>
<a href="#l93.232"></a><span id="l93.232">     var stub = getDocumentStub(_document, _window.frames[i]);</span>
<a href="#l93.233"></a><span id="l93.233">     if (stub)</span>
<a href="#l93.234"></a><span id="l93.234">       return '.frames['+i+']' + stub;</span>
<a href="#l93.235"></a><span id="l93.235">   }</span>
<a href="#l93.236"></a><span id="l93.236">   return '';</span>
<a href="#l93.237"></a><span id="l93.237"> }</span>
<a href="#l93.238"></a><span id="l93.238"> </span>
<a href="#l93.239"></a><span id="l93.239" class="difflineminus">-var inspectElement = function(e){    </span>
<a href="#l93.240"></a><span id="l93.240" class="difflineplus">+var inspectElement = function(e){</span>
<a href="#l93.241"></a><span id="l93.241">   if (e.originalTarget != undefined) {</span>
<a href="#l93.242"></a><span id="l93.242">     target = e.originalTarget;</span>
<a href="#l93.243"></a><span id="l93.243">   } else {</span>
<a href="#l93.244"></a><span id="l93.244">     target = e.target;</span>
<a href="#l93.245"></a><span id="l93.245">   }</span>
<a href="#l93.246"></a><span id="l93.246" class="difflineminus">-  </span>
<a href="#l93.247"></a><span id="l93.247" class="difflineplus">+</span>
<a href="#l93.248"></a><span id="l93.248">   //Element highlighting</span>
<a href="#l93.249"></a><span id="l93.249">   try {</span>
<a href="#l93.250"></a><span id="l93.250">     if (this.lastEvent)</span>
<a href="#l93.251"></a><span id="l93.251">       this.lastEvent.target.style.outline = &quot;&quot;;</span>
<a href="#l93.252"></a><span id="l93.252">   } catch(err) {}</span>
<a href="#l93.253"></a><span id="l93.253" class="difflineminus">-  </span>
<a href="#l93.254"></a><span id="l93.254" class="difflineplus">+</span>
<a href="#l93.255"></a><span id="l93.255">   this.lastEvent = e;</span>
<a href="#l93.256"></a><span id="l93.256" class="difflineminus">-  </span>
<a href="#l93.257"></a><span id="l93.257" class="difflineplus">+</span>
<a href="#l93.258"></a><span id="l93.258">   try {</span>
<a href="#l93.259"></a><span id="l93.259">      e.target.style.outline = &quot;1px solid darkblue&quot;;</span>
<a href="#l93.260"></a><span id="l93.260">   } catch(err){}</span>
<a href="#l93.261"></a><span id="l93.261"> </span>
<a href="#l93.262"></a><span id="l93.262">   var _document = getDocument(target);</span>
<a href="#l93.263"></a><span id="l93.263"> </span>
<a href="#l93.264"></a><span id="l93.264" class="difflineminus">-  </span>
<a href="#l93.265"></a><span id="l93.265" class="difflineplus">+</span>
<a href="#l93.266"></a><span id="l93.266">   if (isMagicAnonymousDiv(_document, target)) {</span>
<a href="#l93.267"></a><span id="l93.267">     target = target.parentNode;</span>
<a href="#l93.268"></a><span id="l93.268">   }</span>
<a href="#l93.269"></a><span id="l93.269" class="difflineminus">-  </span>
<a href="#l93.270"></a><span id="l93.270" class="difflineplus">+</span>
<a href="#l93.271"></a><span id="l93.271">   var windowtype = _document.documentElement.getAttribute('windowtype');</span>
<a href="#l93.272"></a><span id="l93.272">   var _window = getTopWindow(_document);</span>
<a href="#l93.273"></a><span id="l93.273">   r = getControllerAndDocument(_document, _window);</span>
<a href="#l93.274"></a><span id="l93.274" class="difflineminus">-    </span>
<a href="#l93.275"></a><span id="l93.275" class="difflineplus">+</span>
<a href="#l93.276"></a><span id="l93.276">   // displayText = &quot;Controller: &quot; + r.controllerString + '\n\n';</span>
<a href="#l93.277"></a><span id="l93.277" class="difflineminus">-  if ( isNotAnonymous(target) ) {  </span>
<a href="#l93.278"></a><span id="l93.278" class="difflineplus">+  if ( isNotAnonymous(target) ) {</span>
<a href="#l93.279"></a><span id="l93.279">     // Logic for which identifier to use is duplicated above</span>
<a href="#l93.280"></a><span id="l93.280">     if (target.id != &quot;&quot; &amp;&amp; !withs.startsWith(target.id, 'panel')) {</span>
<a href="#l93.281"></a><span id="l93.281">       elemText = &quot;new elementslib.ID(&quot;+ r.documentString + ', &quot;' + target.id + '&quot;)';</span>
<a href="#l93.282"></a><span id="l93.282">       var telem = new elementslib.ID(_document, target.id);</span>
<a href="#l93.283"></a><span id="l93.283">     } else if ((target.name != &quot;&quot;) &amp;&amp; (typeof(target.name) != &quot;undefined&quot;)) {</span>
<a href="#l93.284"></a><span id="l93.284">       elemText = &quot;new elementslib.Name(&quot;+ r.documentString + ', &quot;' + target.name + '&quot;)';</span>
<a href="#l93.285"></a><span id="l93.285">       var telem = new elementslib.Name(_document, target.name);</span>
<a href="#l93.286"></a><span id="l93.286">     } else if (target.nodeName == &quot;A&quot;) {</span>
<a href="#l93.287"></a><span id="l93.287">       var linkText = removeHTMLTags(target.innerHTML);</span>
<a href="#l93.288"></a><span id="l93.288">       elemText = &quot;new elementslib.Link(&quot;+ r.documentString + ', &quot;' + linkText + '&quot;)';</span>
<a href="#l93.289"></a><span id="l93.289">       var telem = new elementslib.Link(_document, linkText);</span>
<a href="#l93.290"></a><span id="l93.290" class="difflineminus">-    } </span>
<a href="#l93.291"></a><span id="l93.291" class="difflineplus">+    }</span>
<a href="#l93.292"></a><span id="l93.292">   }</span>
<a href="#l93.293"></a><span id="l93.293">   // Fallback on XPath</span>
<a href="#l93.294"></a><span id="l93.294">   if (telem == undefined || telem.getNode() != target) {</span>
<a href="#l93.295"></a><span id="l93.295">     if (windowtype == null) {</span>
<a href="#l93.296"></a><span id="l93.296">       var stringXpath = getXSPath(target);</span>
<a href="#l93.297"></a><span id="l93.297">     } else {</span>
<a href="#l93.298"></a><span id="l93.298">       var stringXpath = getXULXpath(target, _document);</span>
<a href="#l93.299"></a><span id="l93.299" class="difflineminus">-    }      </span>
<a href="#l93.300"></a><span id="l93.300" class="difflineplus">+    }</span>
<a href="#l93.301"></a><span id="l93.301">     var telem = new elementslib.XPath(_document, stringXpath);</span>
<a href="#l93.302"></a><span id="l93.302">     if ( telem.getNode() == target ) {</span>
<a href="#l93.303"></a><span id="l93.303">       elemText = &quot;new elementslib.XPath(&quot;+ r.documentString + ', &quot;' + stringXpath + '&quot;)';</span>
<a href="#l93.304"></a><span id="l93.304">     }</span>
<a href="#l93.305"></a><span id="l93.305">   }</span>
<a href="#l93.306"></a><span id="l93.306">   // Fallback to Lookup</span>
<a href="#l93.307"></a><span id="l93.307">   if (telem == undefined || telem.getNode() != target) {</span>
<a href="#l93.308"></a><span id="l93.308">     var exp = getLookupExpression(_document, target);</span>
<a href="#l93.309"></a><span id="l93.309">     elemText = &quot;new elementslib.Lookup(&quot;+ r.documentString + &quot;, '&quot; + exp + &quot;')&quot;;</span>
<a href="#l93.310"></a><span id="l93.310">     var telem = new elementslib.Lookup(_document, exp);</span>
<a href="#l93.311"></a><span id="l93.311" class="difflineminus">-  } </span>
<a href="#l93.312"></a><span id="l93.312" class="difflineminus">-  </span>
<a href="#l93.313"></a><span id="l93.313" class="difflineminus">-  return {'validation':( target == telem.getNode() ), </span>
<a href="#l93.314"></a><span id="l93.314" class="difflineminus">-          'elementText':elemText, </span>
<a href="#l93.315"></a><span id="l93.315" class="difflineplus">+  }</span>
<a href="#l93.316"></a><span id="l93.316" class="difflineplus">+</span>
<a href="#l93.317"></a><span id="l93.317" class="difflineplus">+  return {'validation':( target == telem.getNode() ),</span>
<a href="#l93.318"></a><span id="l93.318" class="difflineplus">+          'elementText':elemText,</span>
<a href="#l93.319"></a><span id="l93.319">           'elementType':telem.constructor.name,</span>
<a href="#l93.320"></a><span id="l93.320">           'controllerText':r.controllerString,</span>
<a href="#l93.321"></a><span id="l93.321">           'documentString':r.documentString,</span>
<a href="#l93.322"></a><span id="l93.322" class="difflineminus">-          }  </span>
<a href="#l93.323"></a><span id="l93.323" class="difflineplus">+          }</span>
<a href="#l93.324"></a><span id="l93.324"> }</span>
<a href="#l93.325"></a><span id="l93.325"> </span>
<a href="#l93.326"></a><span id="l93.326"> </span>
<a href="#l93.327"></a><span id="l93.327"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l94.1"></a><span id="l94.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js</span>
<a href="#l94.2"></a><span id="l94.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/jum.js</span>
<a href="#l94.3"></a><span id="l94.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l94.4"></a><span id="l94.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l94.5"></a><span id="l94.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l94.6"></a><span id="l94.6" class="difflineminus">-// </span>
<a href="#l94.7"></a><span id="l94.7" class="difflineplus">+//</span>
<a href="#l94.8"></a><span id="l94.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l94.9"></a><span id="l94.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l94.10"></a><span id="l94.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l94.11"></a><span id="l94.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l94.12"></a><span id="l94.12" class="difflineminus">-// </span>
<a href="#l94.13"></a><span id="l94.13" class="difflineplus">+//</span>
<a href="#l94.14"></a><span id="l94.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l94.15"></a><span id="l94.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l94.16"></a><span id="l94.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l94.17"></a><span id="l94.17"> // License.</span>
<a href="#l94.18"></a><span id="l94.18" class="difflineminus">-// </span>
<a href="#l94.19"></a><span id="l94.19" class="difflineplus">+//</span>
<a href="#l94.20"></a><span id="l94.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l94.21"></a><span id="l94.21" class="difflineminus">-// </span>
<a href="#l94.22"></a><span id="l94.22" class="difflineplus">+//</span>
<a href="#l94.23"></a><span id="l94.23"> // The Initial Developer of the Original Code is</span>
<a href="#l94.24"></a><span id="l94.24"> // Adam Christian.</span>
<a href="#l94.25"></a><span id="l94.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l94.26"></a><span id="l94.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l94.27"></a><span id="l94.27" class="difflineminus">-// </span>
<a href="#l94.28"></a><span id="l94.28" class="difflineplus">+//</span>
<a href="#l94.29"></a><span id="l94.29"> // Contributor(s):</span>
<a href="#l94.30"></a><span id="l94.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l94.31"></a><span id="l94.31" class="difflineminus">-// </span>
<a href="#l94.32"></a><span id="l94.32" class="difflineplus">+//</span>
<a href="#l94.33"></a><span id="l94.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l94.34"></a><span id="l94.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l94.35"></a><span id="l94.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l94.36"></a><span id="l94.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l94.37"></a><span id="l94.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l94.38"></a><span id="l94.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l94.39"></a><span id="l94.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l94.40"></a><span id="l94.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l94.41"></a><span id="l94.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l94.42"></a><span id="l94.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l94.43"></a><span id="l94.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l94.44"></a><span id="l94.44" class="difflineminus">-// </span>
<a href="#l94.45"></a><span id="l94.45" class="difflineplus">+//</span>
<a href="#l94.46"></a><span id="l94.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l94.47"></a><span id="l94.47"> </span>
<a href="#l94.48"></a><span id="l94.48"> var EXPORTED_SYMBOLS = [&quot;assert&quot;, &quot;assertTrue&quot;, &quot;assertFalse&quot;, &quot;assertEquals&quot;, &quot;assertNotEquals&quot;,</span>
<a href="#l94.49"></a><span id="l94.49">                         &quot;assertNull&quot;, &quot;assertNotNull&quot;, &quot;assertUndefined&quot;, &quot;assertNotUndefined&quot;,</span>
<a href="#l94.50"></a><span id="l94.50">                         &quot;assertNaN&quot;, &quot;assertNotNaN&quot;, &quot;fail&quot;, &quot;pass&quot;];</span>
<a href="#l94.51"></a><span id="l94.51"> </span>
<a href="#l94.52"></a><span id="l94.52"> var frame = {}; Components.utils.import(&quot;resource://mozmill/modules/frame.js&quot;, frame);</span>
<a href="#l94.53"></a><span id="l94.53"> </span>
<a href="#l94.54"></a><span id="l94.54" class="difflineat">@@ -59,35 +59,35 @@ var assert = function (booleanValue, com</span>
<a href="#l94.55"></a><span id="l94.55"> }</span>
<a href="#l94.56"></a><span id="l94.56"> </span>
<a href="#l94.57"></a><span id="l94.57"> var assertTrue = function (booleanValue, comment) {</span>
<a href="#l94.58"></a><span id="l94.58">   if (typeof(booleanValue) != 'boolean') {</span>
<a href="#l94.59"></a><span id="l94.59">     reportFail(&quot;jum.assertTrue(&quot; + ifJSONable(booleanValue) + &quot;) &quot; +</span>
<a href="#l94.60"></a><span id="l94.60">       &quot;Bad argument, value type &quot; + typeof(booleanValue) + &quot; isn't boolean - &quot; + comment);</span>
<a href="#l94.61"></a><span id="l94.61">       return false;</span>
<a href="#l94.62"></a><span id="l94.62">   }</span>
<a href="#l94.63"></a><span id="l94.63" class="difflineminus">-  </span>
<a href="#l94.64"></a><span id="l94.64" class="difflineplus">+</span>
<a href="#l94.65"></a><span id="l94.65">   if (booleanValue) {</span>
<a href="#l94.66"></a><span id="l94.66" class="difflineminus">-    frame.events.pass({'function':'jum.assertTrue', 'value':ifJSONable(booleanValue), </span>
<a href="#l94.67"></a><span id="l94.67" class="difflineplus">+    frame.events.pass({'function':'jum.assertTrue', 'value':ifJSONable(booleanValue),</span>
<a href="#l94.68"></a><span id="l94.68">                        'comment':comment});</span>
<a href="#l94.69"></a><span id="l94.69">     return true;</span>
<a href="#l94.70"></a><span id="l94.70">   }</span>
<a href="#l94.71"></a><span id="l94.71">   reportFail(&quot;jum.assertTrue(&quot; + ifJSONable(booleanValue) + &quot;) - &quot; + comment);</span>
<a href="#l94.72"></a><span id="l94.72">   return false;</span>
<a href="#l94.73"></a><span id="l94.73"> }</span>
<a href="#l94.74"></a><span id="l94.74"> </span>
<a href="#l94.75"></a><span id="l94.75"> var assertFalse = function (booleanValue, comment) {</span>
<a href="#l94.76"></a><span id="l94.76">   if (typeof(booleanValue) != 'boolean') {</span>
<a href="#l94.77"></a><span id="l94.77">     reportFail(&quot;jum.assertFalse(&quot; + ifJSONable(booleanValue) + &quot;) &quot; +</span>
<a href="#l94.78"></a><span id="l94.78">       &quot;Bad argument, value type &quot; + typeof(booleanValue) + &quot; isn't boolean - &quot; + comment);</span>
<a href="#l94.79"></a><span id="l94.79">     return false;</span>
<a href="#l94.80"></a><span id="l94.80">   }</span>
<a href="#l94.81"></a><span id="l94.81" class="difflineminus">-  </span>
<a href="#l94.82"></a><span id="l94.82" class="difflineplus">+</span>
<a href="#l94.83"></a><span id="l94.83">   if (!booleanValue) {</span>
<a href="#l94.84"></a><span id="l94.84" class="difflineminus">-    frame.events.pass({'function':'jum.assertFalse', 'value':ifJSONable(booleanValue), </span>
<a href="#l94.85"></a><span id="l94.85" class="difflineplus">+    frame.events.pass({'function':'jum.assertFalse', 'value':ifJSONable(booleanValue),</span>
<a href="#l94.86"></a><span id="l94.86">                        'comment':comment});</span>
<a href="#l94.87"></a><span id="l94.87">     return true;</span>
<a href="#l94.88"></a><span id="l94.88">   }</span>
<a href="#l94.89"></a><span id="l94.89">   reportFail(&quot;jum.assertFalse(&quot; + ifJSONable(booleanValue) + &quot;) - &quot; + comment);</span>
<a href="#l94.90"></a><span id="l94.90">   return false;</span>
<a href="#l94.91"></a><span id="l94.91"> }</span>
<a href="#l94.92"></a><span id="l94.92"> </span>
<a href="#l94.93"></a><span id="l94.93"> var assertEquals = function (value1, value2, comment) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l95.1"></a><span id="l95.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js</span>
<a href="#l95.2"></a><span id="l95.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/mozmill.js</span>
<a href="#l95.3"></a><span id="l95.3" class="difflineat">@@ -1,56 +1,56 @@</span>
<a href="#l95.4"></a><span id="l95.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l95.5"></a><span id="l95.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l95.6"></a><span id="l95.6" class="difflineminus">-// </span>
<a href="#l95.7"></a><span id="l95.7" class="difflineplus">+//</span>
<a href="#l95.8"></a><span id="l95.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l95.9"></a><span id="l95.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l95.10"></a><span id="l95.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l95.11"></a><span id="l95.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l95.12"></a><span id="l95.12" class="difflineminus">-// </span>
<a href="#l95.13"></a><span id="l95.13" class="difflineplus">+//</span>
<a href="#l95.14"></a><span id="l95.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l95.15"></a><span id="l95.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l95.16"></a><span id="l95.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l95.17"></a><span id="l95.17"> // License.</span>
<a href="#l95.18"></a><span id="l95.18" class="difflineminus">-// </span>
<a href="#l95.19"></a><span id="l95.19" class="difflineplus">+//</span>
<a href="#l95.20"></a><span id="l95.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l95.21"></a><span id="l95.21" class="difflineminus">-// </span>
<a href="#l95.22"></a><span id="l95.22" class="difflineplus">+//</span>
<a href="#l95.23"></a><span id="l95.23"> // The Initial Developer of the Original Code is</span>
<a href="#l95.24"></a><span id="l95.24"> // Mikeal Rogers.</span>
<a href="#l95.25"></a><span id="l95.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l95.26"></a><span id="l95.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l95.27"></a><span id="l95.27" class="difflineminus">-// </span>
<a href="#l95.28"></a><span id="l95.28" class="difflineplus">+//</span>
<a href="#l95.29"></a><span id="l95.29"> // Contributor(s):</span>
<a href="#l95.30"></a><span id="l95.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l95.31"></a><span id="l95.31"> //  Gary Kwong &lt;nth10sd@gmail.com&gt;</span>
<a href="#l95.32"></a><span id="l95.32" class="difflineminus">-// </span>
<a href="#l95.33"></a><span id="l95.33" class="difflineplus">+//</span>
<a href="#l95.34"></a><span id="l95.34"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l95.35"></a><span id="l95.35"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l95.36"></a><span id="l95.36"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l95.37"></a><span id="l95.37"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l95.38"></a><span id="l95.38"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l95.39"></a><span id="l95.39"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l95.40"></a><span id="l95.40"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l95.41"></a><span id="l95.41"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l95.42"></a><span id="l95.42"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l95.43"></a><span id="l95.43"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l95.44"></a><span id="l95.44"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l95.45"></a><span id="l95.45" class="difflineminus">-// </span>
<a href="#l95.46"></a><span id="l95.46" class="difflineplus">+//</span>
<a href="#l95.47"></a><span id="l95.47"> // ***** END LICENSE BLOCK *****</span>
<a href="#l95.48"></a><span id="l95.48"> </span>
<a href="#l95.49"></a><span id="l95.49"> var EXPORTED_SYMBOLS = [&quot;controller&quot;, &quot;events&quot;, &quot;utils&quot;, &quot;elementslib&quot;, &quot;os&quot;,</span>
<a href="#l95.50"></a><span id="l95.50" class="difflineminus">-                        &quot;getBrowserController&quot;, &quot;newBrowserController&quot;, </span>
<a href="#l95.51"></a><span id="l95.51" class="difflineminus">-                        &quot;getAddonsController&quot;, &quot;getPreferencesController&quot;, </span>
<a href="#l95.52"></a><span id="l95.52" class="difflineminus">-                        &quot;newMail3PaneController&quot;, &quot;getMail3PaneController&quot;, </span>
<a href="#l95.53"></a><span id="l95.53" class="difflineminus">-                        &quot;wm&quot;, &quot;platform&quot;, &quot;getAddrbkController&quot;, </span>
<a href="#l95.54"></a><span id="l95.54" class="difflineplus">+                        &quot;getBrowserController&quot;, &quot;newBrowserController&quot;,</span>
<a href="#l95.55"></a><span id="l95.55" class="difflineplus">+                        &quot;getAddonsController&quot;, &quot;getPreferencesController&quot;,</span>
<a href="#l95.56"></a><span id="l95.56" class="difflineplus">+                        &quot;newMail3PaneController&quot;, &quot;getMail3PaneController&quot;,</span>
<a href="#l95.57"></a><span id="l95.57" class="difflineplus">+                        &quot;wm&quot;, &quot;platform&quot;, &quot;getAddrbkController&quot;,</span>
<a href="#l95.58"></a><span id="l95.58">                         &quot;getMsgComposeController&quot;, &quot;getDownloadsController&quot;,</span>
<a href="#l95.59"></a><span id="l95.59">                         &quot;Application&quot;, &quot;MozMillAsyncTest&quot;, &quot;cleanQuit&quot;,</span>
<a href="#l95.60"></a><span id="l95.60">                         &quot;getPlacesController&quot;, 'isMac', 'isLinux', 'isWindows',</span>
<a href="#l95.61"></a><span id="l95.61">                        ];</span>
<a href="#l95.62"></a><span id="l95.62" class="difflineminus">-                        </span>
<a href="#l95.63"></a><span id="l95.63" class="difflineplus">+</span>
<a href="#l95.64"></a><span id="l95.64"> var controller = {};  Components.utils.import('resource://mozmill/modules/controller.js', controller);</span>
<a href="#l95.65"></a><span id="l95.65"> var events = {};      Components.utils.import('resource://mozmill/modules/events.js', events);</span>
<a href="#l95.66"></a><span id="l95.66"> var utils = {};       Components.utils.import('resource://mozmill/modules/utils.js', utils);</span>
<a href="#l95.67"></a><span id="l95.67"> var elementslib = {}; Components.utils.import('resource://mozmill/modules/elementslib.js', elementslib);</span>
<a href="#l95.68"></a><span id="l95.68"> var frame = {}; Components.utils.import('resource://mozmill/modules/frame.js', frame);</span>
<a href="#l95.69"></a><span id="l95.69"> </span>
<a href="#l95.70"></a><span id="l95.70"> var os = {}; Components.utils.import('resource://mozmill/stdlib/os.js', os);</span>
<a href="#l95.71"></a><span id="l95.71"> var withs = {}; Components.utils.import('resource://mozmill/stdlib/withs.js', withs);</span>
<a href="#l95.72"></a><span id="l95.72" class="difflineat">@@ -68,41 +68,41 @@ if (platform == &quot;winnt&quot;){</span>
<a href="#l95.73"></a><span id="l95.73">   isWindows = true;</span>
<a href="#l95.74"></a><span id="l95.74"> }</span>
<a href="#l95.75"></a><span id="l95.75"> if (platform == &quot;linux&quot;){</span>
<a href="#l95.76"></a><span id="l95.76">   isLinux = true;</span>
<a href="#l95.77"></a><span id="l95.77"> }</span>
<a href="#l95.78"></a><span id="l95.78"> </span>
<a href="#l95.79"></a><span id="l95.79"> var wm = Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l95.80"></a><span id="l95.80">            .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l95.81"></a><span id="l95.81" class="difflineminus">-           </span>
<a href="#l95.82"></a><span id="l95.82" class="difflineplus">+</span>
<a href="#l95.83"></a><span id="l95.83"> var appInfo = Components.classes[&quot;@mozilla.org/xre/app-info;1&quot;]</span>
<a href="#l95.84"></a><span id="l95.84">                .getService(Components.interfaces.nsIXULAppInfo);</span>
<a href="#l95.85"></a><span id="l95.85"> </span>
<a href="#l95.86"></a><span id="l95.86"> var locale = Components.classes[&quot;@mozilla.org/chrome/chrome-registry;1&quot;]</span>
<a href="#l95.87"></a><span id="l95.87">                .getService(Components.interfaces.nsIXULChromeRegistry)</span>
<a href="#l95.88"></a><span id="l95.88">                .getSelectedLocale(&quot;global&quot;);</span>
<a href="#l95.89"></a><span id="l95.89"> </span>
<a href="#l95.90"></a><span id="l95.90"> var aConsoleService = Components.classes[&quot;@mozilla.org/consoleservice;1&quot;].</span>
<a href="#l95.91"></a><span id="l95.91">     getService(Components.interfaces.nsIConsoleService);</span>
<a href="#l95.92"></a><span id="l95.92"> </span>
<a href="#l95.93"></a><span id="l95.93" class="difflineminus">-                       </span>
<a href="#l95.94"></a><span id="l95.94" class="difflineplus">+</span>
<a href="#l95.95"></a><span id="l95.95"> applicationDictionary = {</span>
<a href="#l95.96"></a><span id="l95.96" class="difflineminus">-  &quot;{718e30fb-e89b-41dd-9da7-e25a45638b28}&quot;: &quot;Sunbird&quot;,    </span>
<a href="#l95.97"></a><span id="l95.97" class="difflineplus">+  &quot;{718e30fb-e89b-41dd-9da7-e25a45638b28}&quot;: &quot;Sunbird&quot;,</span>
<a href="#l95.98"></a><span id="l95.98">   &quot;{92650c4d-4b8e-4d2a-b7eb-24ecf4f6b63a}&quot;: &quot;SeaMonkey&quot;,</span>
<a href="#l95.99"></a><span id="l95.99">   &quot;{ec8030f7-c20a-464f-9b0e-13a3a9e97384}&quot;: &quot;Firefox&quot;,</span>
<a href="#l95.100"></a><span id="l95.100">   &quot;{3550f703-e582-4d05-9a08-453d09bdfdc6}&quot;: 'Thunderbird',</span>
<a href="#l95.101"></a><span id="l95.101" class="difflineminus">-}                 </span>
<a href="#l95.102"></a><span id="l95.102" class="difflineminus">-                       </span>
<a href="#l95.103"></a><span id="l95.103" class="difflineplus">+}</span>
<a href="#l95.104"></a><span id="l95.104" class="difflineplus">+</span>
<a href="#l95.105"></a><span id="l95.105"> var Application = applicationDictionary[appInfo.ID];</span>
<a href="#l95.106"></a><span id="l95.106"> </span>
<a href="#l95.107"></a><span id="l95.107"> if (Application == undefined) {</span>
<a href="#l95.108"></a><span id="l95.108">   // Default to Firefox</span>
<a href="#l95.109"></a><span id="l95.109">   var Application = 'Firefox';</span>
<a href="#l95.110"></a><span id="l95.110" class="difflineminus">-} </span>
<a href="#l95.111"></a><span id="l95.111" class="difflineplus">+}</span>
<a href="#l95.112"></a><span id="l95.112"> </span>
<a href="#l95.113"></a><span id="l95.113"> function cleanQuit () {</span>
<a href="#l95.114"></a><span id="l95.114">   utils.getMethodInWindows('goQuitApplication')();</span>
<a href="#l95.115"></a><span id="l95.115"> }</span>
<a href="#l95.116"></a><span id="l95.116"> </span>
<a href="#l95.117"></a><span id="l95.117"> function addHttpResource (directory, namespace) {</span>
<a href="#l95.118"></a><span id="l95.118">   return 'http://localhost:4545/'+namespace;</span>
<a href="#l95.119"></a><span id="l95.119"> }</span>
<a href="#l95.120"></a><span id="l95.120" class="difflineat">@@ -153,17 +153,17 @@ function getPreferencesController() {</span>
<a href="#l95.121"></a><span id="l95.121">   // utils.sleep(1000)</span>
<a href="#l95.122"></a><span id="l95.122">   return new controller.MozMillController(wm.getMostRecentWindow(''));</span>
<a href="#l95.123"></a><span id="l95.123"> }</span>
<a href="#l95.124"></a><span id="l95.124"> </span>
<a href="#l95.125"></a><span id="l95.125"> // Thunderbird functions</span>
<a href="#l95.126"></a><span id="l95.126"> function newMail3PaneController () {</span>
<a href="#l95.127"></a><span id="l95.127">   return new controller.MozMillController(utils.getMethodInWindows('toMessengerWindow')());</span>
<a href="#l95.128"></a><span id="l95.128"> }</span>
<a href="#l95.129"></a><span id="l95.129" class="difflineminus">- </span>
<a href="#l95.130"></a><span id="l95.130" class="difflineplus">+</span>
<a href="#l95.131"></a><span id="l95.131"> function getMail3PaneController () {</span>
<a href="#l95.132"></a><span id="l95.132">   var mail3PaneWindow = wm.getMostRecentWindow(&quot;mail:3pane&quot;);</span>
<a href="#l95.133"></a><span id="l95.133">   if (mail3PaneWindow == null) {</span>
<a href="#l95.134"></a><span id="l95.134">     return newMail3PaneController();</span>
<a href="#l95.135"></a><span id="l95.135">   }</span>
<a href="#l95.136"></a><span id="l95.136">   else {</span>
<a href="#l95.137"></a><span id="l95.137">     return new controller.MozMillController(mail3PaneWindow);</span>
<a href="#l95.138"></a><span id="l95.138">   }</span>
<a href="#l95.139"></a><span id="l95.139" class="difflineat">@@ -199,17 +199,17 @@ function firePythonCallbackAfterRestart(</span>
<a href="#l95.140"></a><span id="l95.140"> function timer (name) {</span>
<a href="#l95.141"></a><span id="l95.141">   this.name = name;</span>
<a href="#l95.142"></a><span id="l95.142">   this.timers = {};</span>
<a href="#l95.143"></a><span id="l95.143">   frame.timers.push(this);</span>
<a href="#l95.144"></a><span id="l95.144">   this.actions = [];</span>
<a href="#l95.145"></a><span id="l95.145"> }</span>
<a href="#l95.146"></a><span id="l95.146"> timer.prototype.start = function (name) {</span>
<a href="#l95.147"></a><span id="l95.147">   this.timers[name].startTime = (new Date).getTime();</span>
<a href="#l95.148"></a><span id="l95.148" class="difflineminus">-} </span>
<a href="#l95.149"></a><span id="l95.149" class="difflineplus">+}</span>
<a href="#l95.150"></a><span id="l95.150"> timer.prototype.stop = function (name) {</span>
<a href="#l95.151"></a><span id="l95.151">   var t = this.timers[name];</span>
<a href="#l95.152"></a><span id="l95.152">   t.endTime = (new Date).getTime();</span>
<a href="#l95.153"></a><span id="l95.153">   t.totalTime = (t.endTime - t.startTime);</span>
<a href="#l95.154"></a><span id="l95.154"> }</span>
<a href="#l95.155"></a><span id="l95.155"> timer.prototype.end = function () {</span>
<a href="#l95.156"></a><span id="l95.156">   frame.events.fireEvent(&quot;timer&quot;, this);</span>
<a href="#l95.157"></a><span id="l95.157">   frame.timers.remove(this);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l96.1"></a><span id="l96.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js</span>
<a href="#l96.2"></a><span id="l96.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/modules/utils.js</span>
<a href="#l96.3"></a><span id="l96.3" class="difflineat">@@ -1,48 +1,48 @@</span>
<a href="#l96.4"></a><span id="l96.4"> // ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l96.5"></a><span id="l96.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l96.6"></a><span id="l96.6" class="difflineminus">-// </span>
<a href="#l96.7"></a><span id="l96.7" class="difflineplus">+//</span>
<a href="#l96.8"></a><span id="l96.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l96.9"></a><span id="l96.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l96.10"></a><span id="l96.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l96.11"></a><span id="l96.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l96.12"></a><span id="l96.12" class="difflineminus">-// </span>
<a href="#l96.13"></a><span id="l96.13" class="difflineplus">+//</span>
<a href="#l96.14"></a><span id="l96.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l96.15"></a><span id="l96.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l96.16"></a><span id="l96.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l96.17"></a><span id="l96.17"> // License.</span>
<a href="#l96.18"></a><span id="l96.18" class="difflineminus">-// </span>
<a href="#l96.19"></a><span id="l96.19" class="difflineplus">+//</span>
<a href="#l96.20"></a><span id="l96.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l96.21"></a><span id="l96.21" class="difflineminus">-// </span>
<a href="#l96.22"></a><span id="l96.22" class="difflineplus">+//</span>
<a href="#l96.23"></a><span id="l96.23"> // The Initial Developer of the Original Code is</span>
<a href="#l96.24"></a><span id="l96.24"> // Adam Christian.</span>
<a href="#l96.25"></a><span id="l96.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l96.26"></a><span id="l96.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l96.27"></a><span id="l96.27" class="difflineminus">-// </span>
<a href="#l96.28"></a><span id="l96.28" class="difflineplus">+//</span>
<a href="#l96.29"></a><span id="l96.29"> // Contributor(s):</span>
<a href="#l96.30"></a><span id="l96.30"> //  Adam Christian &lt;adam.christian@gmail.com&gt;</span>
<a href="#l96.31"></a><span id="l96.31"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l96.32"></a><span id="l96.32"> //  Henrik Skupin &lt;hskupin@mozilla.com&gt;</span>
<a href="#l96.33"></a><span id="l96.33" class="difflineminus">-// </span>
<a href="#l96.34"></a><span id="l96.34" class="difflineplus">+//</span>
<a href="#l96.35"></a><span id="l96.35"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l96.36"></a><span id="l96.36"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l96.37"></a><span id="l96.37"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l96.38"></a><span id="l96.38"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l96.39"></a><span id="l96.39"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l96.40"></a><span id="l96.40"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l96.41"></a><span id="l96.41"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l96.42"></a><span id="l96.42"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l96.43"></a><span id="l96.43"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l96.44"></a><span id="l96.44"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l96.45"></a><span id="l96.45"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l96.46"></a><span id="l96.46" class="difflineminus">-// </span>
<a href="#l96.47"></a><span id="l96.47" class="difflineplus">+//</span>
<a href="#l96.48"></a><span id="l96.48"> // ***** END LICENSE BLOCK *****</span>
<a href="#l96.49"></a><span id="l96.49"> </span>
<a href="#l96.50"></a><span id="l96.50" class="difflineminus">-var EXPORTED_SYMBOLS = [&quot;openFile&quot;, &quot;saveFile&quot;, &quot;saveAsFile&quot;, &quot;genBoiler&quot;, </span>
<a href="#l96.51"></a><span id="l96.51" class="difflineplus">+var EXPORTED_SYMBOLS = [&quot;openFile&quot;, &quot;saveFile&quot;, &quot;saveAsFile&quot;, &quot;genBoiler&quot;,</span>
<a href="#l96.52"></a><span id="l96.52">                         &quot;getFile&quot;, &quot;Copy&quot;, &quot;getChromeWindow&quot;, &quot;getWindows&quot;, &quot;runEditor&quot;,</span>
<a href="#l96.53"></a><span id="l96.53">                         &quot;runFile&quot;, &quot;getWindowByTitle&quot;, &quot;getWindowByType&quot;, &quot;getWindowId&quot;,</span>
<a href="#l96.54"></a><span id="l96.54">                         &quot;tempfile&quot;, &quot;getMethodInWindows&quot;, &quot;getPreference&quot;, &quot;setPreference&quot;,</span>
<a href="#l96.55"></a><span id="l96.55">                         &quot;sleep&quot;, &quot;assert&quot;, &quot;unwrapNode&quot;, &quot;TimeoutError&quot;, &quot;waitFor&quot;, &quot;waitForEval&quot;];</span>
<a href="#l96.56"></a><span id="l96.56"> </span>
<a href="#l96.57"></a><span id="l96.57"> const Ci = Components.interfaces;</span>
<a href="#l96.58"></a><span id="l96.58"> </span>
<a href="#l96.59"></a><span id="l96.59"> </span>
<a href="#l96.60"></a><span id="l96.60" class="difflineat">@@ -140,17 +140,17 @@ function tempfile(appention) {</span>
<a href="#l96.61"></a><span id="l96.61"> }</span>
<a href="#l96.62"></a><span id="l96.62"> </span>
<a href="#l96.63"></a><span id="l96.63"> var checkChrome = function() {</span>
<a href="#l96.64"></a><span id="l96.64">    var loc = window.document.location.href;</span>
<a href="#l96.65"></a><span id="l96.65">    try {</span>
<a href="#l96.66"></a><span id="l96.66">        loc = window.top.document.location.href;</span>
<a href="#l96.67"></a><span id="l96.67">    } catch (e) {}</span>
<a href="#l96.68"></a><span id="l96.68"> </span>
<a href="#l96.69"></a><span id="l96.69" class="difflineminus">-   if (/^chrome:\/\//.test(loc)) { return true; } </span>
<a href="#l96.70"></a><span id="l96.70" class="difflineplus">+   if (/^chrome:\/\//.test(loc)) { return true; }</span>
<a href="#l96.71"></a><span id="l96.71">    else { return false; }</span>
<a href="#l96.72"></a><span id="l96.72"> }</span>
<a href="#l96.73"></a><span id="l96.73"> </span>
<a href="#l96.74"></a><span id="l96.74"> /*var openFile = function(){</span>
<a href="#l96.75"></a><span id="l96.75">  const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l96.76"></a><span id="l96.76"> </span>
<a href="#l96.77"></a><span id="l96.77">  var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l96.78"></a><span id="l96.78">  fp.init(window, &quot;Select a Test Directory&quot;, nsIFilePicker.modeGetFolder);</span>
<a href="#l96.79"></a><span id="l96.79" class="difflineat">@@ -176,17 +176,17 @@ var checkChrome = function() {</span>
<a href="#l96.80"></a><span id="l96.80">        }</span>
<a href="#l96.81"></a><span id="l96.81">    }</span>
<a href="#l96.82"></a><span id="l96.82">    //build the files array</span>
<a href="#l96.83"></a><span id="l96.83">    recurseDir(fp.file.directoryEntries);</span>
<a href="#l96.84"></a><span id="l96.84">    paramObj = {};</span>
<a href="#l96.85"></a><span id="l96.85">    paramObj.files = array;</span>
<a href="#l96.86"></a><span id="l96.86">    mozmill.MozMillController.commands.jsTests(paramObj);</span>
<a href="#l96.87"></a><span id="l96.87">  }*/</span>
<a href="#l96.88"></a><span id="l96.88" class="difflineminus">- </span>
<a href="#l96.89"></a><span id="l96.89" class="difflineplus">+</span>
<a href="#l96.90"></a><span id="l96.90">  var runFile = function(w){</span>
<a href="#l96.91"></a><span id="l96.91">    //define the interface</span>
<a href="#l96.92"></a><span id="l96.92">    var nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l96.93"></a><span id="l96.93">    var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l96.94"></a><span id="l96.94">    //define the file picker window</span>
<a href="#l96.95"></a><span id="l96.95">    fp.init(w, &quot;Select a File&quot;, nsIFilePicker.modeOpen);</span>
<a href="#l96.96"></a><span id="l96.96">    fp.appendFilter(&quot;JavaScript Files&quot;,&quot;*.js&quot;);</span>
<a href="#l96.97"></a><span id="l96.97">    //show the window</span>
<a href="#l96.98"></a><span id="l96.98" class="difflineat">@@ -200,130 +200,130 @@ var checkChrome = function() {</span>
<a href="#l96.99"></a><span id="l96.99">      paramObj.files.push(thefile.path);</span>
<a href="#l96.100"></a><span id="l96.100"> </span>
<a href="#l96.101"></a><span id="l96.101">      //Move focus to output tab</span>
<a href="#l96.102"></a><span id="l96.102">      //w.document.getElementById('mmtabs').setAttribute(&quot;selectedIndex&quot;, 2);</span>
<a href="#l96.103"></a><span id="l96.103">      //send it into the JS test framework to run the file</span>
<a href="#l96.104"></a><span id="l96.104">      // jstest.runFromFile(thefile.path);</span>
<a href="#l96.105"></a><span id="l96.105">    }</span>
<a href="#l96.106"></a><span id="l96.106">  };</span>
<a href="#l96.107"></a><span id="l96.107" class="difflineminus">- </span>
<a href="#l96.108"></a><span id="l96.108" class="difflineplus">+</span>
<a href="#l96.109"></a><span id="l96.109">  var saveFile = function(w, content, filename){</span>
<a href="#l96.110"></a><span id="l96.110">    //define the file interface</span>
<a href="#l96.111"></a><span id="l96.111">    var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l96.112"></a><span id="l96.112">                         .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l96.113"></a><span id="l96.113">    //point it at the file we want to get at</span>
<a href="#l96.114"></a><span id="l96.114">    file.initWithPath(filename);</span>
<a href="#l96.115"></a><span id="l96.115" class="difflineminus">-   </span>
<a href="#l96.116"></a><span id="l96.116" class="difflineplus">+</span>
<a href="#l96.117"></a><span id="l96.117">    // file is nsIFile, data is a string</span>
<a href="#l96.118"></a><span id="l96.118">    var foStream = Components.classes[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l96.119"></a><span id="l96.119">                             .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l96.120"></a><span id="l96.120"> </span>
<a href="#l96.121"></a><span id="l96.121">    // use 0x02 | 0x10 to open file for appending.</span>
<a href="#l96.122"></a><span id="l96.122" class="difflineminus">-   foStream.init(file, 0x02 | 0x08 | 0x20, 0666, 0); </span>
<a href="#l96.123"></a><span id="l96.123" class="difflineplus">+   foStream.init(file, 0x02 | 0x08 | 0x20, 0666, 0);</span>
<a href="#l96.124"></a><span id="l96.124">    // write, create, truncate</span>
<a href="#l96.125"></a><span id="l96.125">    // In a c file operation, we have no need to set file mode with or operation,</span>
<a href="#l96.126"></a><span id="l96.126">    // directly using &quot;r&quot; or &quot;w&quot; usually.</span>
<a href="#l96.127"></a><span id="l96.127" class="difflineminus">-   </span>
<a href="#l96.128"></a><span id="l96.128" class="difflineplus">+</span>
<a href="#l96.129"></a><span id="l96.129">    foStream.write(content, content.length);</span>
<a href="#l96.130"></a><span id="l96.130">    foStream.close();</span>
<a href="#l96.131"></a><span id="l96.131">  };</span>
<a href="#l96.132"></a><span id="l96.132" class="difflineminus">- </span>
<a href="#l96.133"></a><span id="l96.133" class="difflineplus">+</span>
<a href="#l96.134"></a><span id="l96.134">   var saveAsFile = function(w, content){</span>
<a href="#l96.135"></a><span id="l96.135">      //define the interface</span>
<a href="#l96.136"></a><span id="l96.136">      var nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l96.137"></a><span id="l96.137">      var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l96.138"></a><span id="l96.138">      //define the file picker window</span>
<a href="#l96.139"></a><span id="l96.139">      fp.init(w, &quot;Select a File&quot;, nsIFilePicker.modeSave);</span>
<a href="#l96.140"></a><span id="l96.140">      fp.appendFilter(&quot;JavaScript Files&quot;,&quot;*.js&quot;);</span>
<a href="#l96.141"></a><span id="l96.141">      //show the window</span>
<a href="#l96.142"></a><span id="l96.142">      var res = fp.show();</span>
<a href="#l96.143"></a><span id="l96.143">      //if we got a file</span>
<a href="#l96.144"></a><span id="l96.144">      if ((res == nsIFilePicker.returnOK) || (res == nsIFilePicker.returnReplace)){</span>
<a href="#l96.145"></a><span id="l96.145">        var thefile = fp.file;</span>
<a href="#l96.146"></a><span id="l96.146" class="difflineminus">-              </span>
<a href="#l96.147"></a><span id="l96.147" class="difflineplus">+</span>
<a href="#l96.148"></a><span id="l96.148">        //forcing the user to save as a .js file</span>
<a href="#l96.149"></a><span id="l96.149">        if (thefile.path.indexOf(&quot;.js&quot;) == -1){</span>
<a href="#l96.150"></a><span id="l96.150">          //define the file interface</span>
<a href="#l96.151"></a><span id="l96.151">          var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l96.152"></a><span id="l96.152">                               .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l96.153"></a><span id="l96.153">          //point it at the file we want to get at</span>
<a href="#l96.154"></a><span id="l96.154">          file.initWithPath(thefile.path+&quot;.js&quot;);</span>
<a href="#l96.155"></a><span id="l96.155">          var thefile = file;</span>
<a href="#l96.156"></a><span id="l96.156">        }</span>
<a href="#l96.157"></a><span id="l96.157" class="difflineminus">-       </span>
<a href="#l96.158"></a><span id="l96.158" class="difflineplus">+</span>
<a href="#l96.159"></a><span id="l96.159">        // file is nsIFile, data is a string</span>
<a href="#l96.160"></a><span id="l96.160">        var foStream = Components.classes[&quot;@mozilla.org/network/file-output-stream;1&quot;]</span>
<a href="#l96.161"></a><span id="l96.161">                                .createInstance(Components.interfaces.nsIFileOutputStream);</span>
<a href="#l96.162"></a><span id="l96.162"> </span>
<a href="#l96.163"></a><span id="l96.163">        // use 0x02 | 0x10 to open file for appending.</span>
<a href="#l96.164"></a><span id="l96.164" class="difflineminus">-       foStream.init(thefile, 0x02 | 0x08 | 0x20, 0666, 0); </span>
<a href="#l96.165"></a><span id="l96.165" class="difflineplus">+       foStream.init(thefile, 0x02 | 0x08 | 0x20, 0666, 0);</span>
<a href="#l96.166"></a><span id="l96.166">        // write, create, truncate</span>
<a href="#l96.167"></a><span id="l96.167">        // In a c file operation, we have no need to set file mode with or operation,</span>
<a href="#l96.168"></a><span id="l96.168">        // directly using &quot;r&quot; or &quot;w&quot; usually.</span>
<a href="#l96.169"></a><span id="l96.169">        foStream.write(content, content.length);</span>
<a href="#l96.170"></a><span id="l96.170">        foStream.close();</span>
<a href="#l96.171"></a><span id="l96.171">        return thefile.path;</span>
<a href="#l96.172"></a><span id="l96.172">      }</span>
<a href="#l96.173"></a><span id="l96.173">   };</span>
<a href="#l96.174"></a><span id="l96.174" class="difflineminus">-  </span>
<a href="#l96.175"></a><span id="l96.175" class="difflineplus">+</span>
<a href="#l96.176"></a><span id="l96.176">  var openFile = function(w){</span>
<a href="#l96.177"></a><span id="l96.177">     //define the interface</span>
<a href="#l96.178"></a><span id="l96.178">     var nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l96.179"></a><span id="l96.179">     var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(nsIFilePicker);</span>
<a href="#l96.180"></a><span id="l96.180">     //define the file picker window</span>
<a href="#l96.181"></a><span id="l96.181">     fp.init(w, &quot;Select a File&quot;, nsIFilePicker.modeOpen);</span>
<a href="#l96.182"></a><span id="l96.182">     fp.appendFilter(&quot;JavaScript Files&quot;,&quot;*.js&quot;);</span>
<a href="#l96.183"></a><span id="l96.183">     //show the window</span>
<a href="#l96.184"></a><span id="l96.184">     var res = fp.show();</span>
<a href="#l96.185"></a><span id="l96.185">     //if we got a file</span>
<a href="#l96.186"></a><span id="l96.186">     if (res == nsIFilePicker.returnOK){</span>
<a href="#l96.187"></a><span id="l96.187">       var thefile = fp.file;</span>
<a href="#l96.188"></a><span id="l96.188">       //create the paramObj with a files array attrib</span>
<a href="#l96.189"></a><span id="l96.189">       var data = getFile(thefile.path);</span>
<a href="#l96.190"></a><span id="l96.190">       //w.document.getElementById('editorInput').value = data;</span>
<a href="#l96.191"></a><span id="l96.191" class="difflineminus">-      </span>
<a href="#l96.192"></a><span id="l96.192" class="difflineplus">+</span>
<a href="#l96.193"></a><span id="l96.193">       //Move focus to output tab</span>
<a href="#l96.194"></a><span id="l96.194">       //$('mmtabs').setAttribute(&quot;selectedIndex&quot;, 2);</span>
<a href="#l96.195"></a><span id="l96.195">       //send it into the JS test framework to run the file</span>
<a href="#l96.196"></a><span id="l96.196">       //mozmill.utils.jsTests(paramObj);</span>
<a href="#l96.197"></a><span id="l96.197">       //jsTest.runFromString(thefile.path);</span>
<a href="#l96.198"></a><span id="l96.198">       return {path:thefile.path, data:data};</span>
<a href="#l96.199"></a><span id="l96.199">     }</span>
<a href="#l96.200"></a><span id="l96.200">   };</span>
<a href="#l96.201"></a><span id="l96.201" class="difflineminus">-  </span>
<a href="#l96.202"></a><span id="l96.202" class="difflineplus">+</span>
<a href="#l96.203"></a><span id="l96.203">  var getFile = function(path){</span>
<a href="#l96.204"></a><span id="l96.204">    //define the file interface</span>
<a href="#l96.205"></a><span id="l96.205">    var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l96.206"></a><span id="l96.206">                         .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l96.207"></a><span id="l96.207">    //point it at the file we want to get at</span>
<a href="#l96.208"></a><span id="l96.208">    file.initWithPath(path);</span>
<a href="#l96.209"></a><span id="l96.209">    // define file stream interfaces</span>
<a href="#l96.210"></a><span id="l96.210">    var data = &quot;&quot;;</span>
<a href="#l96.211"></a><span id="l96.211">    var fstream = Components.classes[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l96.212"></a><span id="l96.212">                            .createInstance(Components.interfaces.nsIFileInputStream);</span>
<a href="#l96.213"></a><span id="l96.213">    var sstream = Components.classes[&quot;@mozilla.org/scriptableinputstream;1&quot;]</span>
<a href="#l96.214"></a><span id="l96.214">                            .createInstance(Components.interfaces.nsIScriptableInputStream);</span>
<a href="#l96.215"></a><span id="l96.215">    fstream.init(file, -1, 0, 0);</span>
<a href="#l96.216"></a><span id="l96.216" class="difflineminus">-   sstream.init(fstream); </span>
<a href="#l96.217"></a><span id="l96.217" class="difflineplus">+   sstream.init(fstream);</span>
<a href="#l96.218"></a><span id="l96.218"> </span>
<a href="#l96.219"></a><span id="l96.219">    //pull the contents of the file out</span>
<a href="#l96.220"></a><span id="l96.220">    var str = sstream.read(4096);</span>
<a href="#l96.221"></a><span id="l96.221">    while (str.length &gt; 0) {</span>
<a href="#l96.222"></a><span id="l96.222">      data += str;</span>
<a href="#l96.223"></a><span id="l96.223">      str = sstream.read(4096);</span>
<a href="#l96.224"></a><span id="l96.224">    }</span>
<a href="#l96.225"></a><span id="l96.225"> </span>
<a href="#l96.226"></a><span id="l96.226">    sstream.close();</span>
<a href="#l96.227"></a><span id="l96.227">    fstream.close();</span>
<a href="#l96.228"></a><span id="l96.228"> </span>
<a href="#l96.229"></a><span id="l96.229">    //data = data.replace(/\r|\n|\r\n/g, &quot;&quot;);</span>
<a href="#l96.230"></a><span id="l96.230">    return data;</span>
<a href="#l96.231"></a><span id="l96.231">  };</span>
<a href="#l96.232"></a><span id="l96.232" class="difflineminus">- </span>
<a href="#l96.233"></a><span id="l96.233" class="difflineplus">+</span>
<a href="#l96.234"></a><span id="l96.234"> /**</span>
<a href="#l96.235"></a><span id="l96.235">  * Called to get the state of an individual preference.</span>
<a href="#l96.236"></a><span id="l96.236">  *</span>
<a href="#l96.237"></a><span id="l96.237">  * @param aPrefName     string The preference to get the state of.</span>
<a href="#l96.238"></a><span id="l96.238">  * @param aDefaultValue any    The default value if preference was not found.</span>
<a href="#l96.239"></a><span id="l96.239">  *</span>
<a href="#l96.240"></a><span id="l96.240">  * @returns any The value of the requested preference</span>
<a href="#l96.241"></a><span id="l96.241">  *</span>
<a href="#l96.242"></a><span id="l96.242" class="difflineat">@@ -410,38 +410,38 @@ function assert(callback, message, thisO</span>
<a href="#l96.243"></a><span id="l96.243">   var result = callback.call(thisObject);</span>
<a href="#l96.244"></a><span id="l96.244"> </span>
<a href="#l96.245"></a><span id="l96.245">   if (!result) {</span>
<a href="#l96.246"></a><span id="l96.246">     throw new Error(message || arguments.callee.name + &quot;: Failed for '&quot; + callback + &quot;'&quot;);</span>
<a href="#l96.247"></a><span id="l96.247">   }</span>
<a href="#l96.248"></a><span id="l96.248"> </span>
<a href="#l96.249"></a><span id="l96.249">   return true;</span>
<a href="#l96.250"></a><span id="l96.250"> }</span>
<a href="#l96.251"></a><span id="l96.251" class="difflineminus">-	   </span>
<a href="#l96.252"></a><span id="l96.252" class="difflineplus">+</span>
<a href="#l96.253"></a><span id="l96.253"> /**</span>
<a href="#l96.254"></a><span id="l96.254">  * Unwraps a node which is wrapped into a XPCNativeWrapper or XrayWrapper</span>
<a href="#l96.255"></a><span id="l96.255">  *</span>
<a href="#l96.256"></a><span id="l96.256">  * @param {DOMnode} Wrapped DOM node</span>
<a href="#l96.257"></a><span id="l96.257">  * @returns {DOMNode} Unwrapped DOM node</span>
<a href="#l96.258"></a><span id="l96.258">  */</span>
<a href="#l96.259"></a><span id="l96.259" class="difflineminus">-	   </span>
<a href="#l96.260"></a><span id="l96.260" class="difflineplus">+</span>
<a href="#l96.261"></a><span id="l96.261"> function unwrapNode(aNode) {</span>
<a href="#l96.262"></a><span id="l96.262">   var node = aNode;</span>
<a href="#l96.263"></a><span id="l96.263">   if (node) {</span>
<a href="#l96.264"></a><span id="l96.264">     // unwrap is not available on older branches (3.5 and 3.6) - Bug 533596</span>
<a href="#l96.265"></a><span id="l96.265">     if (&quot;unwrap&quot; in XPCNativeWrapper) {</span>
<a href="#l96.266"></a><span id="l96.266">       node = XPCNativeWrapper.unwrap(node);</span>
<a href="#l96.267"></a><span id="l96.267">     }</span>
<a href="#l96.268"></a><span id="l96.268">     else if (node.wrappedJSObject != null) {</span>
<a href="#l96.269"></a><span id="l96.269">       node = node.wrappedJSObject;</span>
<a href="#l96.270"></a><span id="l96.270">     }</span>
<a href="#l96.271"></a><span id="l96.271">   }</span>
<a href="#l96.272"></a><span id="l96.272">   return node;</span>
<a href="#l96.273"></a><span id="l96.273"> }</span>
<a href="#l96.274"></a><span id="l96.274" class="difflineminus">-	   </span>
<a href="#l96.275"></a><span id="l96.275" class="difflineplus">+</span>
<a href="#l96.276"></a><span id="l96.276"> </span>
<a href="#l96.277"></a><span id="l96.277"> /**</span>
<a href="#l96.278"></a><span id="l96.278">  * TimeoutError</span>
<a href="#l96.279"></a><span id="l96.279">  *</span>
<a href="#l96.280"></a><span id="l96.280">  * Error object used for timeouts</span>
<a href="#l96.281"></a><span id="l96.281">  */</span>
<a href="#l96.282"></a><span id="l96.282"> function TimeoutError(message, fileName, lineNumber) {</span>
<a href="#l96.283"></a><span id="l96.283">   var err = new Error();</span>
<a href="#l96.284"></a><span id="l96.284" class="difflineat">@@ -495,38 +495,38 @@ function waitForEval(expression, timeout</span>
<a href="#l96.285"></a><span id="l96.285">   waitFor(function() {</span>
<a href="#l96.286"></a><span id="l96.286">     return eval(expression);</span>
<a href="#l96.287"></a><span id="l96.287">   }, arguments.callee.name + &quot;: Timeout exceeded for '&quot; + expression + &quot;'&quot;, timeout, interval);</span>
<a href="#l96.288"></a><span id="l96.288"> </span>
<a href="#l96.289"></a><span id="l96.289">   return true;</span>
<a href="#l96.290"></a><span id="l96.290"> }</span>
<a href="#l96.291"></a><span id="l96.291"> </span>
<a href="#l96.292"></a><span id="l96.292"> </span>
<a href="#l96.293"></a><span id="l96.293" class="difflineminus">- // </span>
<a href="#l96.294"></a><span id="l96.294" class="difflineplus">+ //</span>
<a href="#l96.295"></a><span id="l96.295">  // //Function to start the running of jsTests</span>
<a href="#l96.296"></a><span id="l96.296">  // var jsTests = function (paramObj) {</span>
<a href="#l96.297"></a><span id="l96.297">  //     //Setup needed variables</span>
<a href="#l96.298"></a><span id="l96.298">  //     mozmill.jsTest.actions.loadActions();</span>
<a href="#l96.299"></a><span id="l96.299">  //     var wm = mozmill.jsTest.actions;</span>
<a href="#l96.300"></a><span id="l96.300">  //     var testFiles = paramObj.files;</span>
<a href="#l96.301"></a><span id="l96.301">  //     if (!testFiles.length) {</span>
<a href="#l96.302"></a><span id="l96.302">  //       throw new Error('No JavaScript tests to run.');</span>
<a href="#l96.303"></a><span id="l96.303">  //     }</span>
<a href="#l96.304"></a><span id="l96.304">  //     var _j = mozmill.jsTest;</span>
<a href="#l96.305"></a><span id="l96.305">  //     //mozmill.MozMillController.stopLoop();</span>
<a href="#l96.306"></a><span id="l96.306" class="difflineminus">- // </span>
<a href="#l96.307"></a><span id="l96.307" class="difflineplus">+ //</span>
<a href="#l96.308"></a><span id="l96.308">  //     //Timing the suite</span>
<a href="#l96.309"></a><span id="l96.309">  //     var jsSuiteSummary = new TimeObj();</span>
<a href="#l96.310"></a><span id="l96.310">  //     jsSuiteSummary.setName('jsSummary');</span>
<a href="#l96.311"></a><span id="l96.311">  //     jsSuiteSummary.startTime();</span>
<a href="#l96.312"></a><span id="l96.312">  //     _j.jsSuiteSummary = jsSuiteSummary;</span>
<a href="#l96.313"></a><span id="l96.313" class="difflineminus">- // </span>
<a href="#l96.314"></a><span id="l96.314" class="difflineplus">+ //</span>
<a href="#l96.315"></a><span id="l96.315">  //     _j.run(paramObj);</span>
<a href="#l96.316"></a><span id="l96.316">  // };</span>
<a href="#l96.317"></a><span id="l96.317" class="difflineminus">- // </span>
<a href="#l96.318"></a><span id="l96.318" class="difflineplus">+ //</span>
<a href="#l96.319"></a><span id="l96.319">  // //Commands function to hande the test results of the js tests</span>
<a href="#l96.320"></a><span id="l96.320">  // var jsTestResults = function () {</span>
<a href="#l96.321"></a><span id="l96.321">  //   var _j = mozmill.jsTest;</span>
<a href="#l96.322"></a><span id="l96.322">  //   var jsSuiteSummary = _j.jsSuiteSummary;</span>
<a href="#l96.323"></a><span id="l96.323">  //   var s = '';</span>
<a href="#l96.324"></a><span id="l96.324">  //   s += 'Number of tests run: ' + _j.testCount + '\n';</span>
<a href="#l96.325"></a><span id="l96.325">  //   s += '\nNumber of tests failures: ' + _j.testFailureCount;</span>
<a href="#l96.326"></a><span id="l96.326">  //   if (_j.testFailureCount &gt; 0) {</span>
<a href="#l96.327"></a><span id="l96.327" class="difflineat">@@ -536,26 +536,26 @@ function waitForEval(expression, timeout</span>
<a href="#l96.328"></a><span id="l96.328">  //       var fail = fails[i];</span>
<a href="#l96.329"></a><span id="l96.329">  //       var msg = fail.message;</span>
<a href="#l96.330"></a><span id="l96.330">  //       // Escape angle brackets for display in HTML</span>
<a href="#l96.331"></a><span id="l96.331">  //       msg = msg.replace(/&lt;/g, '&amp;lt;');</span>
<a href="#l96.332"></a><span id="l96.332">  //       msg = msg.replace(/&gt;/g, '&amp;gt;');</span>
<a href="#l96.333"></a><span id="l96.333">  //       s += msg + '&lt;br/&gt;';</span>
<a href="#l96.334"></a><span id="l96.334">  //     }</span>
<a href="#l96.335"></a><span id="l96.335">  //   };</span>
<a href="#l96.336"></a><span id="l96.336" class="difflineminus">- // </span>
<a href="#l96.337"></a><span id="l96.337" class="difflineplus">+ //</span>
<a href="#l96.338"></a><span id="l96.338">  //   jsSuiteSummary.endTime();</span>
<a href="#l96.339"></a><span id="l96.339">  //   var result = !(_j.testFailureCount &gt; 0);</span>
<a href="#l96.340"></a><span id="l96.340" class="difflineminus">- // </span>
<a href="#l96.341"></a><span id="l96.341" class="difflineplus">+ //</span>
<a href="#l96.342"></a><span id="l96.342">  //   if (result){</span>
<a href="#l96.343"></a><span id="l96.343">  //      mozmill.results.writeResult(s, 'lightgreen');</span>
<a href="#l96.344"></a><span id="l96.344">  //    }</span>
<a href="#l96.345"></a><span id="l96.345">  //    else{</span>
<a href="#l96.346"></a><span id="l96.346">  //      mozmill.results.writeResult(s, 'lightred');</span>
<a href="#l96.347"></a><span id="l96.347">  //    }</span>
<a href="#l96.348"></a><span id="l96.348">  //   //mozmill.results.writeResult(s);</span>
<a href="#l96.349"></a><span id="l96.349">  //   //We want the summary to have a concept of success/failure</span>
<a href="#l96.350"></a><span id="l96.350">  //   var result = !(_j.testFailureCount &gt; 0);</span>
<a href="#l96.351"></a><span id="l96.351">  //   var method = 'JS Test Suite Completion';</span>
<a href="#l96.352"></a><span id="l96.352">  //   //mozmill.jsTest.sendJSReport(method, result, null, jsSuiteSummary);</span>
<a href="#l96.353"></a><span id="l96.353">  //   // Fire the polling loop back up</span>
<a href="#l96.354"></a><span id="l96.354">  //   //mozmill.MozMillController.continueLoop();</span>
<a href="#l96.355"></a><span id="l96.355" class="difflineminus">- // }; </span>
<a href="#l96.356"></a><span id="l96.356" class="difflineplus">+ // };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l97.1"></a><span id="l97.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js</span>
<a href="#l97.2"></a><span id="l97.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/arrays.js</span>
<a href="#l97.3"></a><span id="l97.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l97.4"></a><span id="l97.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l97.5"></a><span id="l97.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l97.6"></a><span id="l97.6" class="difflineminus">-// </span>
<a href="#l97.7"></a><span id="l97.7" class="difflineplus">+//</span>
<a href="#l97.8"></a><span id="l97.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l97.9"></a><span id="l97.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l97.10"></a><span id="l97.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l97.11"></a><span id="l97.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l97.12"></a><span id="l97.12" class="difflineminus">-// </span>
<a href="#l97.13"></a><span id="l97.13" class="difflineplus">+//</span>
<a href="#l97.14"></a><span id="l97.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l97.15"></a><span id="l97.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l97.16"></a><span id="l97.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l97.17"></a><span id="l97.17"> // License.</span>
<a href="#l97.18"></a><span id="l97.18" class="difflineminus">-// </span>
<a href="#l97.19"></a><span id="l97.19" class="difflineplus">+//</span>
<a href="#l97.20"></a><span id="l97.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l97.21"></a><span id="l97.21" class="difflineminus">-// </span>
<a href="#l97.22"></a><span id="l97.22" class="difflineplus">+//</span>
<a href="#l97.23"></a><span id="l97.23"> // The Initial Developer of the Original Code is</span>
<a href="#l97.24"></a><span id="l97.24"> // Mikeal Rogers.</span>
<a href="#l97.25"></a><span id="l97.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l97.26"></a><span id="l97.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l97.27"></a><span id="l97.27" class="difflineminus">-// </span>
<a href="#l97.28"></a><span id="l97.28" class="difflineplus">+//</span>
<a href="#l97.29"></a><span id="l97.29"> // Contributor(s):</span>
<a href="#l97.30"></a><span id="l97.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l97.31"></a><span id="l97.31" class="difflineminus">-// </span>
<a href="#l97.32"></a><span id="l97.32" class="difflineplus">+//</span>
<a href="#l97.33"></a><span id="l97.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l97.34"></a><span id="l97.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l97.35"></a><span id="l97.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l97.36"></a><span id="l97.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l97.37"></a><span id="l97.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l97.38"></a><span id="l97.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l97.39"></a><span id="l97.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l97.40"></a><span id="l97.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l97.41"></a><span id="l97.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l97.42"></a><span id="l97.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l97.43"></a><span id="l97.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l97.44"></a><span id="l97.44" class="difflineminus">-// </span>
<a href="#l97.45"></a><span id="l97.45" class="difflineplus">+//</span>
<a href="#l97.46"></a><span id="l97.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l97.47"></a><span id="l97.47"> </span>
<a href="#l97.48"></a><span id="l97.48"> var EXPORTED_SYMBOLS = ['inArray', 'getSet', 'indexOf', 'rindexOf', 'compare'];</span>
<a href="#l97.49"></a><span id="l97.49"> </span>
<a href="#l97.50"></a><span id="l97.50"> function inArray (array, value) {</span>
<a href="#l97.51"></a><span id="l97.51">   for (i in array) {</span>
<a href="#l97.52"></a><span id="l97.52">     if (value == array[i]) {</span>
<a href="#l97.53"></a><span id="l97.53">       return true;</span>
<a href="#l97.54"></a><span id="l97.54" class="difflineat">@@ -46,17 +46,17 @@ function inArray (array, value) {</span>
<a href="#l97.55"></a><span id="l97.55">   return false;</span>
<a href="#l97.56"></a><span id="l97.56"> }</span>
<a href="#l97.57"></a><span id="l97.57"> </span>
<a href="#l97.58"></a><span id="l97.58"> function getSet (array) {</span>
<a href="#l97.59"></a><span id="l97.59">   var narray = [];</span>
<a href="#l97.60"></a><span id="l97.60">   for (i in array) {</span>
<a href="#l97.61"></a><span id="l97.61">     if ( !inArray(narray, array[i]) ) {</span>
<a href="#l97.62"></a><span id="l97.62">       narray.push(array[i]);</span>
<a href="#l97.63"></a><span id="l97.63" class="difflineminus">-    } </span>
<a href="#l97.64"></a><span id="l97.64" class="difflineplus">+    }</span>
<a href="#l97.65"></a><span id="l97.65">   }</span>
<a href="#l97.66"></a><span id="l97.66">   return narray;</span>
<a href="#l97.67"></a><span id="l97.67"> }</span>
<a href="#l97.68"></a><span id="l97.68"> </span>
<a href="#l97.69"></a><span id="l97.69"> function indexOf (array, v, offset) {</span>
<a href="#l97.70"></a><span id="l97.70">   for (i in array) {</span>
<a href="#l97.71"></a><span id="l97.71">     if (offset == undefined || i &gt;= offset) {</span>
<a href="#l97.72"></a><span id="l97.72">       if ( !isNaN(i) &amp;&amp; array[i] == v) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l98.1"></a><span id="l98.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js</span>
<a href="#l98.2"></a><span id="l98.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/dom.js</span>
<a href="#l98.3"></a><span id="l98.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l98.4"></a><span id="l98.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l98.5"></a><span id="l98.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l98.6"></a><span id="l98.6" class="difflineminus">-// </span>
<a href="#l98.7"></a><span id="l98.7" class="difflineplus">+//</span>
<a href="#l98.8"></a><span id="l98.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l98.9"></a><span id="l98.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l98.10"></a><span id="l98.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l98.11"></a><span id="l98.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l98.12"></a><span id="l98.12" class="difflineminus">-// </span>
<a href="#l98.13"></a><span id="l98.13" class="difflineplus">+//</span>
<a href="#l98.14"></a><span id="l98.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l98.15"></a><span id="l98.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l98.16"></a><span id="l98.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l98.17"></a><span id="l98.17"> // License.</span>
<a href="#l98.18"></a><span id="l98.18" class="difflineminus">-// </span>
<a href="#l98.19"></a><span id="l98.19" class="difflineplus">+//</span>
<a href="#l98.20"></a><span id="l98.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l98.21"></a><span id="l98.21" class="difflineminus">-// </span>
<a href="#l98.22"></a><span id="l98.22" class="difflineplus">+//</span>
<a href="#l98.23"></a><span id="l98.23"> // The Initial Developer of the Original Code is</span>
<a href="#l98.24"></a><span id="l98.24"> // Mikeal Rogers.</span>
<a href="#l98.25"></a><span id="l98.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l98.26"></a><span id="l98.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l98.27"></a><span id="l98.27" class="difflineminus">-// </span>
<a href="#l98.28"></a><span id="l98.28" class="difflineplus">+//</span>
<a href="#l98.29"></a><span id="l98.29"> // Contributor(s):</span>
<a href="#l98.30"></a><span id="l98.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l98.31"></a><span id="l98.31" class="difflineminus">-// </span>
<a href="#l98.32"></a><span id="l98.32" class="difflineplus">+//</span>
<a href="#l98.33"></a><span id="l98.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l98.34"></a><span id="l98.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l98.35"></a><span id="l98.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l98.36"></a><span id="l98.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l98.37"></a><span id="l98.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l98.38"></a><span id="l98.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l98.39"></a><span id="l98.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l98.40"></a><span id="l98.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l98.41"></a><span id="l98.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l98.42"></a><span id="l98.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l98.43"></a><span id="l98.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l98.44"></a><span id="l98.44" class="difflineminus">-// </span>
<a href="#l98.45"></a><span id="l98.45" class="difflineplus">+//</span>
<a href="#l98.46"></a><span id="l98.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l98.47"></a><span id="l98.47"> </span>
<a href="#l98.48"></a><span id="l98.48"> var EXPORTED_SYMBOLS = ['getAttributes'];</span>
<a href="#l98.49"></a><span id="l98.49"> </span>
<a href="#l98.50"></a><span id="l98.50"> </span>
<a href="#l98.51"></a><span id="l98.51"> var getAttributes = function (node) {</span>
<a href="#l98.52"></a><span id="l98.52">   var attributes = {};</span>
<a href="#l98.53"></a><span id="l98.53">   for (i in node.attributes) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l99.1"></a><span id="l99.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</span>
<a href="#l99.2"></a><span id="l99.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/httpd.js</span>
<a href="#l99.3"></a><span id="l99.3" class="difflineat">@@ -281,17 +281,17 @@ function toDateString(date)</span>
<a href="#l99.4"></a><span id="l99.4">    *   the date to process</span>
<a href="#l99.5"></a><span id="l99.5">    * @returns string</span>
<a href="#l99.6"></a><span id="l99.6">    *   a string of the form &quot;HH:MM:SS&quot;, ranging from &quot;00:00:00&quot; to &quot;23:59:59&quot;</span>
<a href="#l99.7"></a><span id="l99.7">    */</span>
<a href="#l99.8"></a><span id="l99.8">   function toTime(date)</span>
<a href="#l99.9"></a><span id="l99.9">   {</span>
<a href="#l99.10"></a><span id="l99.10">     var hrs = date.getUTCHours();</span>
<a href="#l99.11"></a><span id="l99.11">     var rv  = (hrs &lt; 10) ? &quot;0&quot; + hrs : hrs;</span>
<a href="#l99.12"></a><span id="l99.12" class="difflineminus">-    </span>
<a href="#l99.13"></a><span id="l99.13" class="difflineplus">+</span>
<a href="#l99.14"></a><span id="l99.14">     var mins = date.getUTCMinutes();</span>
<a href="#l99.15"></a><span id="l99.15">     rv += &quot;:&quot;;</span>
<a href="#l99.16"></a><span id="l99.16">     rv += (mins &lt; 10) ? &quot;0&quot; + mins : mins;</span>
<a href="#l99.17"></a><span id="l99.17"> </span>
<a href="#l99.18"></a><span id="l99.18">     var secs = date.getUTCSeconds();</span>
<a href="#l99.19"></a><span id="l99.19">     rv += &quot;:&quot;;</span>
<a href="#l99.20"></a><span id="l99.20">     rv += (secs &lt; 10) ? &quot;0&quot; + secs : secs;</span>
<a href="#l99.21"></a><span id="l99.21"> </span>
<a href="#l99.22"></a><span id="l99.22" class="difflineat">@@ -818,17 +818,17 @@ var HttpServer = nsHttpServer;</span>
<a href="#l99.23"></a><span id="l99.23"> </span>
<a href="#l99.24"></a><span id="l99.24"> const HOST_REGEX =</span>
<a href="#l99.25"></a><span id="l99.25">   new RegExp(&quot;^(?:&quot; +</span>
<a href="#l99.26"></a><span id="l99.26">                // *( domainlabel &quot;.&quot; )</span>
<a href="#l99.27"></a><span id="l99.27">                &quot;(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)*&quot; +</span>
<a href="#l99.28"></a><span id="l99.28">                // toplabel</span>
<a href="#l99.29"></a><span id="l99.29">                &quot;[a-z](?:[a-z0-9-]*[a-z0-9])?&quot; +</span>
<a href="#l99.30"></a><span id="l99.30">              &quot;|&quot; +</span>
<a href="#l99.31"></a><span id="l99.31" class="difflineminus">-               // IPv4 address </span>
<a href="#l99.32"></a><span id="l99.32" class="difflineplus">+               // IPv4 address</span>
<a href="#l99.33"></a><span id="l99.33">                &quot;\\d+\\.\\d+\\.\\d+\\.\\d+&quot; +</span>
<a href="#l99.34"></a><span id="l99.34">              &quot;)$&quot;,</span>
<a href="#l99.35"></a><span id="l99.35">              &quot;i&quot;);</span>
<a href="#l99.36"></a><span id="l99.36"> </span>
<a href="#l99.37"></a><span id="l99.37"> </span>
<a href="#l99.38"></a><span id="l99.38"> /**</span>
<a href="#l99.39"></a><span id="l99.39">  * Represents the identity of a server.  An identity consists of a set of</span>
<a href="#l99.40"></a><span id="l99.40">  * (scheme, host, port) tuples denoted as locations (allowing a single server to</span>
<a href="#l99.41"></a><span id="l99.41" class="difflineat">@@ -1029,17 +1029,17 @@ ServerIdentity.prototype =</span>
<a href="#l99.42"></a><span id="l99.42">    * set of locations used.</span>
<a href="#l99.43"></a><span id="l99.43">    */</span>
<a href="#l99.44"></a><span id="l99.44">   _teardown: function()</span>
<a href="#l99.45"></a><span id="l99.45">   {</span>
<a href="#l99.46"></a><span id="l99.46">     if (this._host != &quot;127.0.0.1&quot;) {</span>
<a href="#l99.47"></a><span id="l99.47">       // Not the default primary location, nothing special to do here</span>
<a href="#l99.48"></a><span id="l99.48">       this.remove(&quot;http&quot;, &quot;127.0.0.1&quot;, this._defaultPort);</span>
<a href="#l99.49"></a><span id="l99.49">     }</span>
<a href="#l99.50"></a><span id="l99.50" class="difflineminus">-    </span>
<a href="#l99.51"></a><span id="l99.51" class="difflineplus">+</span>
<a href="#l99.52"></a><span id="l99.52">     // This is a *very* tricky bit of reasoning here; make absolutely sure the</span>
<a href="#l99.53"></a><span id="l99.53">     // tests for this code pass before you commit changes to it.</span>
<a href="#l99.54"></a><span id="l99.54">     if (this._primaryScheme == &quot;http&quot; &amp;&amp;</span>
<a href="#l99.55"></a><span id="l99.55">         this._primaryHost == this._host &amp;&amp;</span>
<a href="#l99.56"></a><span id="l99.56">         this._primaryPort == this._defaultPort)</span>
<a href="#l99.57"></a><span id="l99.57">     {</span>
<a href="#l99.58"></a><span id="l99.58">       // Make sure we don't trigger the readding logic in .remove(), then remove</span>
<a href="#l99.59"></a><span id="l99.59">       // the default location.</span>
<a href="#l99.60"></a><span id="l99.60" class="difflineat">@@ -1461,17 +1461,17 @@ RequestReader.prototype =</span>
<a href="#l99.61"></a><span id="l99.61">       dumpn(&quot;*** remaining body data len=&quot; + this._contentLength);</span>
<a href="#l99.62"></a><span id="l99.62">       if (this._contentLength == 0)</span>
<a href="#l99.63"></a><span id="l99.63">       {</span>
<a href="#l99.64"></a><span id="l99.64">         this._validateRequest();</span>
<a href="#l99.65"></a><span id="l99.65">         this._state = READER_FINISHED;</span>
<a href="#l99.66"></a><span id="l99.66">         this._handleResponse();</span>
<a href="#l99.67"></a><span id="l99.67">         return true;</span>
<a href="#l99.68"></a><span id="l99.68">       }</span>
<a href="#l99.69"></a><span id="l99.69" class="difflineminus">-      </span>
<a href="#l99.70"></a><span id="l99.70" class="difflineplus">+</span>
<a href="#l99.71"></a><span id="l99.71">       return false;</span>
<a href="#l99.72"></a><span id="l99.72">     }</span>
<a href="#l99.73"></a><span id="l99.73">     catch (e)</span>
<a href="#l99.74"></a><span id="l99.74">     {</span>
<a href="#l99.75"></a><span id="l99.75">       this._handleError(e);</span>
<a href="#l99.76"></a><span id="l99.76">       return false;</span>
<a href="#l99.77"></a><span id="l99.77">     }</span>
<a href="#l99.78"></a><span id="l99.78">   },</span>
<a href="#l99.79"></a><span id="l99.79" class="difflineat">@@ -2164,17 +2164,17 @@ function maybeAddHeaders(file, metadata,</span>
<a href="#l99.80"></a><span id="l99.80">         code = status;</span>
<a href="#l99.81"></a><span id="l99.81">         description = &quot;&quot;;</span>
<a href="#l99.82"></a><span id="l99.82">       }</span>
<a href="#l99.83"></a><span id="l99.83">       else</span>
<a href="#l99.84"></a><span id="l99.84">       {</span>
<a href="#l99.85"></a><span id="l99.85">         code = status.substring(0, space);</span>
<a href="#l99.86"></a><span id="l99.86">         description = status.substring(space + 1, status.length);</span>
<a href="#l99.87"></a><span id="l99.87">       }</span>
<a href="#l99.88"></a><span id="l99.88" class="difflineminus">-    </span>
<a href="#l99.89"></a><span id="l99.89" class="difflineplus">+</span>
<a href="#l99.90"></a><span id="l99.90">       response.setStatusLine(metadata.httpVersion, parseInt(code, 10), description);</span>
<a href="#l99.91"></a><span id="l99.91"> </span>
<a href="#l99.92"></a><span id="l99.92">       line.value = &quot;&quot;;</span>
<a href="#l99.93"></a><span id="l99.93">       more = lis.readLine(line);</span>
<a href="#l99.94"></a><span id="l99.94">     }</span>
<a href="#l99.95"></a><span id="l99.95"> </span>
<a href="#l99.96"></a><span id="l99.96">     // headers</span>
<a href="#l99.97"></a><span id="l99.97">     while (more || line.value != &quot;&quot;)</span>
<a href="#l99.98"></a><span id="l99.98" class="difflineat">@@ -3096,17 +3096,17 @@ ServerHandler.prototype =</span>
<a href="#l99.99"></a><span id="l99.99">    */</span>
<a href="#l99.100"></a><span id="l99.100">   handleError: function(errorCode, connection)</span>
<a href="#l99.101"></a><span id="l99.101">   {</span>
<a href="#l99.102"></a><span id="l99.102">     var response = new Response(connection);</span>
<a href="#l99.103"></a><span id="l99.103"> </span>
<a href="#l99.104"></a><span id="l99.104">     dumpn(&quot;*** error in request: &quot; + errorCode);</span>
<a href="#l99.105"></a><span id="l99.105"> </span>
<a href="#l99.106"></a><span id="l99.106">     this._handleError(errorCode, new Request(connection.port), response);</span>
<a href="#l99.107"></a><span id="l99.107" class="difflineminus">-  }, </span>
<a href="#l99.108"></a><span id="l99.108" class="difflineplus">+  },</span>
<a href="#l99.109"></a><span id="l99.109"> </span>
<a href="#l99.110"></a><span id="l99.110">   /**</span>
<a href="#l99.111"></a><span id="l99.111">    * Handles a request which generates the given error code, using the</span>
<a href="#l99.112"></a><span id="l99.112">    * user-defined error handler if one has been set, gracefully falling back to</span>
<a href="#l99.113"></a><span id="l99.113">    * the x00 status code if the code has no handler, and failing to status code</span>
<a href="#l99.114"></a><span id="l99.114">    * 500 if all else fails.</span>
<a href="#l99.115"></a><span id="l99.115">    *</span>
<a href="#l99.116"></a><span id="l99.116">    * @param errorCode : uint</span>
<a href="#l99.117"></a><span id="l99.117" class="difflineat">@@ -3345,17 +3345,17 @@ ServerHandler.prototype =</span>
<a href="#l99.118"></a><span id="l99.118">       var body = &quot;Request-URI: &quot; +</span>
<a href="#l99.119"></a><span id="l99.119">                  metadata.scheme + &quot;://&quot; + metadata.host + &quot;:&quot; + metadata.port +</span>
<a href="#l99.120"></a><span id="l99.120">                  metadata.path + &quot;\n\n&quot;;</span>
<a href="#l99.121"></a><span id="l99.121">       body += &quot;Request (semantically equivalent, slightly reformatted):\n\n&quot;;</span>
<a href="#l99.122"></a><span id="l99.122">       body += metadata.method + &quot; &quot; + metadata.path;</span>
<a href="#l99.123"></a><span id="l99.123"> </span>
<a href="#l99.124"></a><span id="l99.124">       if (metadata.queryString)</span>
<a href="#l99.125"></a><span id="l99.125">         body +=  &quot;?&quot; + metadata.queryString;</span>
<a href="#l99.126"></a><span id="l99.126" class="difflineminus">-        </span>
<a href="#l99.127"></a><span id="l99.127" class="difflineplus">+</span>
<a href="#l99.128"></a><span id="l99.128">       body += &quot; HTTP/&quot; + metadata.httpVersion + &quot;\r\n&quot;;</span>
<a href="#l99.129"></a><span id="l99.129"> </span>
<a href="#l99.130"></a><span id="l99.130">       var headEnum = metadata.headers;</span>
<a href="#l99.131"></a><span id="l99.131">       while (headEnum.hasMoreElements())</span>
<a href="#l99.132"></a><span id="l99.132">       {</span>
<a href="#l99.133"></a><span id="l99.133">         var fieldName = headEnum.getNext()</span>
<a href="#l99.134"></a><span id="l99.134">                                 .QueryInterface(Ci.nsISupportsString)</span>
<a href="#l99.135"></a><span id="l99.135">                                 .data;</span>
<a href="#l99.136"></a><span id="l99.136" class="difflineat">@@ -4898,27 +4898,27 @@ nsHttpHeaders.prototype =</span>
<a href="#l99.137"></a><span id="l99.137">    *   if name or value is not a valid header component</span>
<a href="#l99.138"></a><span id="l99.138">    */</span>
<a href="#l99.139"></a><span id="l99.139">   setHeader: function(fieldName, fieldValue, merge)</span>
<a href="#l99.140"></a><span id="l99.140">   {</span>
<a href="#l99.141"></a><span id="l99.141">     var name = headerUtils.normalizeFieldName(fieldName);</span>
<a href="#l99.142"></a><span id="l99.142">     var value = headerUtils.normalizeFieldValue(fieldValue);</span>
<a href="#l99.143"></a><span id="l99.143"> </span>
<a href="#l99.144"></a><span id="l99.144">     // The following three headers are stored as arrays because their real-world</span>
<a href="#l99.145"></a><span id="l99.145" class="difflineminus">-    // syntax prevents joining individual headers into a single header using </span>
<a href="#l99.146"></a><span id="l99.146" class="difflineplus">+    // syntax prevents joining individual headers into a single header using</span>
<a href="#l99.147"></a><span id="l99.147">     // &quot;,&quot;.  See also &lt;http://hg.mozilla.org/mozilla-central/diff/9b2a99adc05e/netwerk/protocol/http/src/nsHttpHeaderArray.cpp#l77&gt;</span>
<a href="#l99.148"></a><span id="l99.148">     if (merge &amp;&amp; name in this._headers)</span>
<a href="#l99.149"></a><span id="l99.149">     {</span>
<a href="#l99.150"></a><span id="l99.150">       if (name === &quot;www-authenticate&quot; ||</span>
<a href="#l99.151"></a><span id="l99.151">           name === &quot;proxy-authenticate&quot; ||</span>
<a href="#l99.152"></a><span id="l99.152" class="difflineminus">-          name === &quot;set-cookie&quot;) </span>
<a href="#l99.153"></a><span id="l99.153" class="difflineplus">+          name === &quot;set-cookie&quot;)</span>
<a href="#l99.154"></a><span id="l99.154">       {</span>
<a href="#l99.155"></a><span id="l99.155">         this._headers[name].push(value);</span>
<a href="#l99.156"></a><span id="l99.156">       }</span>
<a href="#l99.157"></a><span id="l99.157" class="difflineminus">-      else </span>
<a href="#l99.158"></a><span id="l99.158" class="difflineplus">+      else</span>
<a href="#l99.159"></a><span id="l99.159">       {</span>
<a href="#l99.160"></a><span id="l99.160">         this._headers[name][0] += &quot;,&quot; + value;</span>
<a href="#l99.161"></a><span id="l99.161">         NS_ASSERT(this._headers[name].length === 1,</span>
<a href="#l99.162"></a><span id="l99.162">             &quot;how'd a non-special header have multiple values?&quot;)</span>
<a href="#l99.163"></a><span id="l99.163">       }</span>
<a href="#l99.164"></a><span id="l99.164">     }</span>
<a href="#l99.165"></a><span id="l99.165">     else</span>
<a href="#l99.166"></a><span id="l99.166">     {</span>
<a href="#l99.167"></a><span id="l99.167" class="difflineat">@@ -4931,18 +4931,18 @@ nsHttpHeaders.prototype =</span>
<a href="#l99.168"></a><span id="l99.168">    *</span>
<a href="#l99.169"></a><span id="l99.169">    * @throws NS_ERROR_INVALID_ARG</span>
<a href="#l99.170"></a><span id="l99.170">    *   if fieldName does not constitute a valid header field name</span>
<a href="#l99.171"></a><span id="l99.171">    * @throws NS_ERROR_NOT_AVAILABLE</span>
<a href="#l99.172"></a><span id="l99.172">    *   if the given header does not exist in this</span>
<a href="#l99.173"></a><span id="l99.173">    * @returns string</span>
<a href="#l99.174"></a><span id="l99.174">    *   the field value for the given header, possibly with non-semantic changes</span>
<a href="#l99.175"></a><span id="l99.175">    *   (i.e., leading/trailing whitespace stripped, whitespace runs replaced</span>
<a href="#l99.176"></a><span id="l99.176" class="difflineminus">-   *   with spaces, etc.) at the option of the implementation; multiple </span>
<a href="#l99.177"></a><span id="l99.177" class="difflineminus">-   *   instances of the header will be combined with a comma, except for </span>
<a href="#l99.178"></a><span id="l99.178" class="difflineplus">+   *   with spaces, etc.) at the option of the implementation; multiple</span>
<a href="#l99.179"></a><span id="l99.179" class="difflineplus">+   *   instances of the header will be combined with a comma, except for</span>
<a href="#l99.180"></a><span id="l99.180">    *   the three headers noted in the description of getHeaderValues</span>
<a href="#l99.181"></a><span id="l99.181">    */</span>
<a href="#l99.182"></a><span id="l99.182">   getHeader: function(fieldName)</span>
<a href="#l99.183"></a><span id="l99.183">   {</span>
<a href="#l99.184"></a><span id="l99.184">     return this.getHeaderValues(fieldName).join(&quot;\n&quot;);</span>
<a href="#l99.185"></a><span id="l99.185">   },</span>
<a href="#l99.186"></a><span id="l99.186"> </span>
<a href="#l99.187"></a><span id="l99.187">   /**</span>
<a href="#l99.188"></a><span id="l99.188" class="difflineat">@@ -5194,17 +5194,17 @@ Request.prototype =</span>
<a href="#l99.189"></a><span id="l99.189">   get bodyInputStream()</span>
<a href="#l99.190"></a><span id="l99.190">   {</span>
<a href="#l99.191"></a><span id="l99.191">     return this._bodyInputStream;</span>
<a href="#l99.192"></a><span id="l99.192">   },</span>
<a href="#l99.193"></a><span id="l99.193"> </span>
<a href="#l99.194"></a><span id="l99.194">   //</span>
<a href="#l99.195"></a><span id="l99.195">   // see nsIPropertyBag.getProperty</span>
<a href="#l99.196"></a><span id="l99.196">   //</span>
<a href="#l99.197"></a><span id="l99.197" class="difflineminus">-  getProperty: function(name) </span>
<a href="#l99.198"></a><span id="l99.198" class="difflineplus">+  getProperty: function(name)</span>
<a href="#l99.199"></a><span id="l99.199">   {</span>
<a href="#l99.200"></a><span id="l99.200">     this._ensurePropertyBag();</span>
<a href="#l99.201"></a><span id="l99.201">     return this._bag.getProperty(name);</span>
<a href="#l99.202"></a><span id="l99.202">   },</span>
<a href="#l99.203"></a><span id="l99.203"> </span>
<a href="#l99.204"></a><span id="l99.204"> </span>
<a href="#l99.205"></a><span id="l99.205">   // NSISUPPORTS</span>
<a href="#l99.206"></a><span id="l99.206"> </span>
<a href="#l99.207"></a><span id="l99.207" class="difflineat">@@ -5216,17 +5216,17 @@ Request.prototype =</span>
<a href="#l99.208"></a><span id="l99.208">     if (iid.equals(Ci.nsIHttpRequest) || iid.equals(Ci.nsISupports))</span>
<a href="#l99.209"></a><span id="l99.209">       return this;</span>
<a href="#l99.210"></a><span id="l99.210"> </span>
<a href="#l99.211"></a><span id="l99.211">     throw Cr.NS_ERROR_NO_INTERFACE;</span>
<a href="#l99.212"></a><span id="l99.212">   },</span>
<a href="#l99.213"></a><span id="l99.213"> </span>
<a href="#l99.214"></a><span id="l99.214"> </span>
<a href="#l99.215"></a><span id="l99.215">   // PRIVATE IMPLEMENTATION</span>
<a href="#l99.216"></a><span id="l99.216" class="difflineminus">-  </span>
<a href="#l99.217"></a><span id="l99.217" class="difflineplus">+</span>
<a href="#l99.218"></a><span id="l99.218">   /** Ensures a property bag has been created for ad-hoc behaviors. */</span>
<a href="#l99.219"></a><span id="l99.219">   _ensurePropertyBag: function()</span>
<a href="#l99.220"></a><span id="l99.220">   {</span>
<a href="#l99.221"></a><span id="l99.221">     if (!this._bag)</span>
<a href="#l99.222"></a><span id="l99.222">       this._bag = new WritablePropertyBag();</span>
<a href="#l99.223"></a><span id="l99.223">   }</span>
<a href="#l99.224"></a><span id="l99.224"> };</span>
<a href="#l99.225"></a><span id="l99.225"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l100.1"></a><span id="l100.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js</span>
<a href="#l100.2"></a><span id="l100.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/objects.js</span>
<a href="#l100.3"></a><span id="l100.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l100.4"></a><span id="l100.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l100.5"></a><span id="l100.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l100.6"></a><span id="l100.6" class="difflineminus">-// </span>
<a href="#l100.7"></a><span id="l100.7" class="difflineplus">+//</span>
<a href="#l100.8"></a><span id="l100.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l100.9"></a><span id="l100.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l100.10"></a><span id="l100.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l100.11"></a><span id="l100.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l100.12"></a><span id="l100.12" class="difflineminus">-// </span>
<a href="#l100.13"></a><span id="l100.13" class="difflineplus">+//</span>
<a href="#l100.14"></a><span id="l100.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l100.15"></a><span id="l100.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l100.16"></a><span id="l100.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l100.17"></a><span id="l100.17"> // License.</span>
<a href="#l100.18"></a><span id="l100.18" class="difflineminus">-// </span>
<a href="#l100.19"></a><span id="l100.19" class="difflineplus">+//</span>
<a href="#l100.20"></a><span id="l100.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l100.21"></a><span id="l100.21" class="difflineminus">-// </span>
<a href="#l100.22"></a><span id="l100.22" class="difflineplus">+//</span>
<a href="#l100.23"></a><span id="l100.23"> // The Initial Developer of the Original Code is</span>
<a href="#l100.24"></a><span id="l100.24"> // Mikeal Rogers.</span>
<a href="#l100.25"></a><span id="l100.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l100.26"></a><span id="l100.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l100.27"></a><span id="l100.27" class="difflineminus">-// </span>
<a href="#l100.28"></a><span id="l100.28" class="difflineplus">+//</span>
<a href="#l100.29"></a><span id="l100.29"> // Contributor(s):</span>
<a href="#l100.30"></a><span id="l100.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l100.31"></a><span id="l100.31" class="difflineminus">-// </span>
<a href="#l100.32"></a><span id="l100.32" class="difflineplus">+//</span>
<a href="#l100.33"></a><span id="l100.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l100.34"></a><span id="l100.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l100.35"></a><span id="l100.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l100.36"></a><span id="l100.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l100.37"></a><span id="l100.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l100.38"></a><span id="l100.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l100.39"></a><span id="l100.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l100.40"></a><span id="l100.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l100.41"></a><span id="l100.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l100.42"></a><span id="l100.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l100.43"></a><span id="l100.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l100.44"></a><span id="l100.44" class="difflineminus">-// </span>
<a href="#l100.45"></a><span id="l100.45" class="difflineplus">+//</span>
<a href="#l100.46"></a><span id="l100.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l100.47"></a><span id="l100.47"> </span>
<a href="#l100.48"></a><span id="l100.48"> var EXPORTED_SYMBOLS = ['getLength', ];//'compare'];</span>
<a href="#l100.49"></a><span id="l100.49"> </span>
<a href="#l100.50"></a><span id="l100.50"> var getLength = function (obj) {</span>
<a href="#l100.51"></a><span id="l100.51">   var len = 0;</span>
<a href="#l100.52"></a><span id="l100.52">   for (i in obj) {</span>
<a href="#l100.53"></a><span id="l100.53">     len++;</span>
<a href="#l100.54"></a><span id="l100.54" class="difflineat">@@ -51,25 +51,25 @@ var getLength = function (obj) {</span>
<a href="#l100.55"></a><span id="l100.55"> </span>
<a href="#l100.56"></a><span id="l100.56"> // var compare = function (obj1, obj2, depth, recursion) {</span>
<a href="#l100.57"></a><span id="l100.57"> //   if (depth == undefined) {</span>
<a href="#l100.58"></a><span id="l100.58"> //     var depth = 4;</span>
<a href="#l100.59"></a><span id="l100.59"> //   }</span>
<a href="#l100.60"></a><span id="l100.60"> //   if (recursion == undefined) {</span>
<a href="#l100.61"></a><span id="l100.61"> //     var recursion = 0;</span>
<a href="#l100.62"></a><span id="l100.62"> //   }</span>
<a href="#l100.63"></a><span id="l100.63" class="difflineminus">-//   </span>
<a href="#l100.64"></a><span id="l100.64" class="difflineplus">+//</span>
<a href="#l100.65"></a><span id="l100.65"> //   if (recursion &gt; depth) {</span>
<a href="#l100.66"></a><span id="l100.66"> //     return true;</span>
<a href="#l100.67"></a><span id="l100.67"> //   }</span>
<a href="#l100.68"></a><span id="l100.68" class="difflineminus">-//   </span>
<a href="#l100.69"></a><span id="l100.69" class="difflineplus">+//</span>
<a href="#l100.70"></a><span id="l100.70"> //   if (typeof(obj1) != typeof(obj2)) {</span>
<a href="#l100.71"></a><span id="l100.71"> //     return false;</span>
<a href="#l100.72"></a><span id="l100.72"> //   }</span>
<a href="#l100.73"></a><span id="l100.73" class="difflineminus">-//   </span>
<a href="#l100.74"></a><span id="l100.74" class="difflineplus">+//</span>
<a href="#l100.75"></a><span id="l100.75"> //   if (typeof(obj1) == &quot;object&quot; &amp;&amp; typeof(obj2) == &quot;object&quot;) {</span>
<a href="#l100.76"></a><span id="l100.76"> //     if ([x for (x in obj1)].length != [x for (x in obj2)].length) {</span>
<a href="#l100.77"></a><span id="l100.77"> //       return false;</span>
<a href="#l100.78"></a><span id="l100.78"> //     }</span>
<a href="#l100.79"></a><span id="l100.79"> //     for (i in obj1) {</span>
<a href="#l100.80"></a><span id="l100.80"> //       recursion++;</span>
<a href="#l100.81"></a><span id="l100.81"> //       var result = compare(obj1[i], obj2[i], depth, recursion);</span>
<a href="#l100.82"></a><span id="l100.82"> //       objectsLogger.info(i+' in recursion '+result);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l101.1"></a><span id="l101.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js</span>
<a href="#l101.2"></a><span id="l101.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/os.js</span>
<a href="#l101.3"></a><span id="l101.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l101.4"></a><span id="l101.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l101.5"></a><span id="l101.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l101.6"></a><span id="l101.6" class="difflineminus">-// </span>
<a href="#l101.7"></a><span id="l101.7" class="difflineplus">+//</span>
<a href="#l101.8"></a><span id="l101.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l101.9"></a><span id="l101.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l101.10"></a><span id="l101.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l101.11"></a><span id="l101.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l101.12"></a><span id="l101.12" class="difflineminus">-// </span>
<a href="#l101.13"></a><span id="l101.13" class="difflineplus">+//</span>
<a href="#l101.14"></a><span id="l101.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l101.15"></a><span id="l101.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l101.16"></a><span id="l101.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l101.17"></a><span id="l101.17"> // License.</span>
<a href="#l101.18"></a><span id="l101.18" class="difflineminus">-// </span>
<a href="#l101.19"></a><span id="l101.19" class="difflineplus">+//</span>
<a href="#l101.20"></a><span id="l101.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l101.21"></a><span id="l101.21" class="difflineminus">-// </span>
<a href="#l101.22"></a><span id="l101.22" class="difflineplus">+//</span>
<a href="#l101.23"></a><span id="l101.23"> // The Initial Developer of the Original Code is</span>
<a href="#l101.24"></a><span id="l101.24"> // Mikeal Rogers.</span>
<a href="#l101.25"></a><span id="l101.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l101.26"></a><span id="l101.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l101.27"></a><span id="l101.27" class="difflineminus">-// </span>
<a href="#l101.28"></a><span id="l101.28" class="difflineplus">+//</span>
<a href="#l101.29"></a><span id="l101.29"> // Contributor(s):</span>
<a href="#l101.30"></a><span id="l101.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l101.31"></a><span id="l101.31" class="difflineminus">-// </span>
<a href="#l101.32"></a><span id="l101.32" class="difflineplus">+//</span>
<a href="#l101.33"></a><span id="l101.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l101.34"></a><span id="l101.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l101.35"></a><span id="l101.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l101.36"></a><span id="l101.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l101.37"></a><span id="l101.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l101.38"></a><span id="l101.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l101.39"></a><span id="l101.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l101.40"></a><span id="l101.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l101.41"></a><span id="l101.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l101.42"></a><span id="l101.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l101.43"></a><span id="l101.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l101.44"></a><span id="l101.44" class="difflineminus">-// </span>
<a href="#l101.45"></a><span id="l101.45" class="difflineplus">+//</span>
<a href="#l101.46"></a><span id="l101.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l101.47"></a><span id="l101.47"> </span>
<a href="#l101.48"></a><span id="l101.48"> var EXPORTED_SYMBOLS = ['listDirectory', 'getFileForPath', 'abspath', 'getPlatform'];</span>
<a href="#l101.49"></a><span id="l101.49"> </span>
<a href="#l101.50"></a><span id="l101.50"> function listDirectory (file) {</span>
<a href="#l101.51"></a><span id="l101.51">   // file is the given directory (nsIFile)</span>
<a href="#l101.52"></a><span id="l101.52">   var entries = file.directoryEntries;</span>
<a href="#l101.53"></a><span id="l101.53">   var array = [];</span>
<a href="#l101.54"></a><span id="l101.54" class="difflineat">@@ -52,17 +52,17 @@ function listDirectory (file) {</span>
<a href="#l101.55"></a><span id="l101.55"> </span>
<a href="#l101.56"></a><span id="l101.56"> function getFileForPath (path) {</span>
<a href="#l101.57"></a><span id="l101.57">   var file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l101.58"></a><span id="l101.58">                        .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l101.59"></a><span id="l101.59">   file.initWithPath(path);</span>
<a href="#l101.60"></a><span id="l101.60">   return file;</span>
<a href="#l101.61"></a><span id="l101.61"> }</span>
<a href="#l101.62"></a><span id="l101.62"> </span>
<a href="#l101.63"></a><span id="l101.63" class="difflineminus">-function abspath (rel, file) {  </span>
<a href="#l101.64"></a><span id="l101.64" class="difflineplus">+function abspath (rel, file) {</span>
<a href="#l101.65"></a><span id="l101.65">   var relSplit = rel.split('/');</span>
<a href="#l101.66"></a><span id="l101.66">   if (relSplit[0] == '..' &amp;&amp; !file.isDirectory()) {</span>
<a href="#l101.67"></a><span id="l101.67">     file = file.parent;</span>
<a href="#l101.68"></a><span id="l101.68">   }</span>
<a href="#l101.69"></a><span id="l101.69">   for each(p in relSplit) {</span>
<a href="#l101.70"></a><span id="l101.70">     if (p == '..') {</span>
<a href="#l101.71"></a><span id="l101.71">       file = file.parent;</span>
<a href="#l101.72"></a><span id="l101.72">     } else if (p == '.'){</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l102.1"></a><span id="l102.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js</span>
<a href="#l102.2"></a><span id="l102.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/strings.js</span>
<a href="#l102.3"></a><span id="l102.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l102.4"></a><span id="l102.4"> // ***** BEGIN LICENSE BLOCK *****// ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l102.5"></a><span id="l102.5"> // Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l102.6"></a><span id="l102.6" class="difflineminus">-// </span>
<a href="#l102.7"></a><span id="l102.7" class="difflineplus">+//</span>
<a href="#l102.8"></a><span id="l102.8"> // The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l102.9"></a><span id="l102.9"> // 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l102.10"></a><span id="l102.10"> // the License. You may obtain a copy of the License at</span>
<a href="#l102.11"></a><span id="l102.11"> // http://www.mozilla.org/MPL/</span>
<a href="#l102.12"></a><span id="l102.12" class="difflineminus">-// </span>
<a href="#l102.13"></a><span id="l102.13" class="difflineplus">+//</span>
<a href="#l102.14"></a><span id="l102.14"> // Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l102.15"></a><span id="l102.15"> // WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l102.16"></a><span id="l102.16"> // for the specific language governing rights and limitations under the</span>
<a href="#l102.17"></a><span id="l102.17"> // License.</span>
<a href="#l102.18"></a><span id="l102.18" class="difflineminus">-// </span>
<a href="#l102.19"></a><span id="l102.19" class="difflineplus">+//</span>
<a href="#l102.20"></a><span id="l102.20"> // The Original Code is Mozilla Corporation Code.</span>
<a href="#l102.21"></a><span id="l102.21" class="difflineminus">-// </span>
<a href="#l102.22"></a><span id="l102.22" class="difflineplus">+//</span>
<a href="#l102.23"></a><span id="l102.23"> // The Initial Developer of the Original Code is</span>
<a href="#l102.24"></a><span id="l102.24"> // Mikeal Rogers.</span>
<a href="#l102.25"></a><span id="l102.25"> // Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l102.26"></a><span id="l102.26"> // the Initial Developer. All Rights Reserved.</span>
<a href="#l102.27"></a><span id="l102.27" class="difflineminus">-// </span>
<a href="#l102.28"></a><span id="l102.28" class="difflineplus">+//</span>
<a href="#l102.29"></a><span id="l102.29"> // Contributor(s):</span>
<a href="#l102.30"></a><span id="l102.30"> //  Mikeal Rogers &lt;mikeal.rogers@gmail.com&gt;</span>
<a href="#l102.31"></a><span id="l102.31" class="difflineminus">-// </span>
<a href="#l102.32"></a><span id="l102.32" class="difflineplus">+//</span>
<a href="#l102.33"></a><span id="l102.33"> // Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l102.34"></a><span id="l102.34"> // either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l102.35"></a><span id="l102.35"> // the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l102.36"></a><span id="l102.36"> // in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l102.37"></a><span id="l102.37"> // of those above. If you wish to allow use of your version of this file only</span>
<a href="#l102.38"></a><span id="l102.38"> // under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l102.39"></a><span id="l102.39"> // use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l102.40"></a><span id="l102.40"> // decision by deleting the provisions above and replace them with the notice</span>
<a href="#l102.41"></a><span id="l102.41"> // and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l102.42"></a><span id="l102.42"> // the provisions above, a recipient may use your version of this file under</span>
<a href="#l102.43"></a><span id="l102.43"> // the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l102.44"></a><span id="l102.44" class="difflineminus">-// </span>
<a href="#l102.45"></a><span id="l102.45" class="difflineplus">+//</span>
<a href="#l102.46"></a><span id="l102.46"> // ***** END LICENSE BLOCK *****</span>
<a href="#l102.47"></a><span id="l102.47"> </span>
<a href="#l102.48"></a><span id="l102.48"> var EXPORTED_SYMBOLS = ['trim', 'vslice'];</span>
<a href="#l102.49"></a><span id="l102.49"> </span>
<a href="#l102.50"></a><span id="l102.50"> var arrays = {}; Components.utils.import('resource://mozmill/stdlib/arrays.js', arrays);</span>
<a href="#l102.51"></a><span id="l102.51"> </span>
<a href="#l102.52"></a><span id="l102.52"> var trim = function (str) {</span>
<a href="#l102.53"></a><span id="l102.53">   return (str.replace(/^[\s\xA0]+/, &quot;&quot;).replace(/[\s\xA0]+$/, &quot;&quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l103.1"></a><span id="l103.1" class="difflineminus">--- a/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js</span>
<a href="#l103.2"></a><span id="l103.2" class="difflineplus">+++ b/mail/test/resources/mozmill/mozmill/extension/resource/stdlib/withs.js</span>
<a href="#l103.3"></a><span id="l103.3" class="difflineat">@@ -1,27 +1,27 @@</span>
<a href="#l103.4"></a><span id="l103.4"> /*</span>
<a href="#l103.5"></a><span id="l103.5">     Copyright (c) 2006 Lawrence Oluyede &lt;l.oluyede@gmail.com&gt;</span>
<a href="#l103.6"></a><span id="l103.6"> </span>
<a href="#l103.7"></a><span id="l103.7">     Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<a href="#l103.8"></a><span id="l103.8" class="difflineminus">-    of this software and associated documentation files (the &quot;Software&quot;), to deal </span>
<a href="#l103.9"></a><span id="l103.9" class="difflineminus">-    in the Software without restriction, including without limitation the rights </span>
<a href="#l103.10"></a><span id="l103.10" class="difflineminus">-    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell </span>
<a href="#l103.11"></a><span id="l103.11" class="difflineminus">-    copies of the Software, and to permit persons to whom the Software is </span>
<a href="#l103.12"></a><span id="l103.12" class="difflineplus">+    of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<a href="#l103.13"></a><span id="l103.13" class="difflineplus">+    in the Software without restriction, including without limitation the rights</span>
<a href="#l103.14"></a><span id="l103.14" class="difflineplus">+    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<a href="#l103.15"></a><span id="l103.15" class="difflineplus">+    copies of the Software, and to permit persons to whom the Software is</span>
<a href="#l103.16"></a><span id="l103.16">     furnished to do so, subject to the following conditions:</span>
<a href="#l103.17"></a><span id="l103.17"> </span>
<a href="#l103.18"></a><span id="l103.18" class="difflineminus">-    The above copyright notice and this permission notice shall be included in all </span>
<a href="#l103.19"></a><span id="l103.19" class="difflineplus">+    The above copyright notice and this permission notice shall be included in all</span>
<a href="#l103.20"></a><span id="l103.20">     copies or substantial portions of the Software.</span>
<a href="#l103.21"></a><span id="l103.21"> </span>
<a href="#l103.22"></a><span id="l103.22" class="difflineminus">-    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR </span>
<a href="#l103.23"></a><span id="l103.23" class="difflineminus">-    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, </span>
<a href="#l103.24"></a><span id="l103.24" class="difflineminus">-    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE </span>
<a href="#l103.25"></a><span id="l103.25" class="difflineminus">-    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER </span>
<a href="#l103.26"></a><span id="l103.26" class="difflineminus">-    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, </span>
<a href="#l103.27"></a><span id="l103.27" class="difflineminus">-    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE </span>
<a href="#l103.28"></a><span id="l103.28" class="difflineplus">+    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<a href="#l103.29"></a><span id="l103.29" class="difflineplus">+    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<a href="#l103.30"></a><span id="l103.30" class="difflineplus">+    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<a href="#l103.31"></a><span id="l103.31" class="difflineplus">+    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<a href="#l103.32"></a><span id="l103.32" class="difflineplus">+    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<a href="#l103.33"></a><span id="l103.33" class="difflineplus">+    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<a href="#l103.34"></a><span id="l103.34">     SOFTWARE.</span>
<a href="#l103.35"></a><span id="l103.35"> */</span>
<a href="#l103.36"></a><span id="l103.36"> </span>
<a href="#l103.37"></a><span id="l103.37"> /*</span>
<a href="#l103.38"></a><span id="l103.38">  startsWith(str, prefix[, start[, end]]) -&gt; bool</span>
<a href="#l103.39"></a><span id="l103.39"> </span>
<a href="#l103.40"></a><span id="l103.40">  Return true if str ends with the specified prefix, false otherwise.</span>
<a href="#l103.41"></a><span id="l103.41">  With optional start, test str beginning at that position.</span>
<a href="#l103.42"></a><span id="l103.42" class="difflineat">@@ -30,117 +30,117 @@</span>
<a href="#l103.43"></a><span id="l103.43"> */</span>
<a href="#l103.44"></a><span id="l103.44"> </span>
<a href="#l103.45"></a><span id="l103.45"> var EXPORTED_SYMBOLS = ['startsWith', 'endsWith'];</span>
<a href="#l103.46"></a><span id="l103.46"> </span>
<a href="#l103.47"></a><span id="l103.47"> function startsWith(str, prefix, start, end) {</span>
<a href="#l103.48"></a><span id="l103.48">     if (arguments.length &lt; 2) {</span>
<a href="#l103.49"></a><span id="l103.49">         throw new TypeError('startsWith() requires at least 2 arguments');</span>
<a href="#l103.50"></a><span id="l103.50">     }</span>
<a href="#l103.51"></a><span id="l103.51" class="difflineminus">-        </span>
<a href="#l103.52"></a><span id="l103.52" class="difflineplus">+</span>
<a href="#l103.53"></a><span id="l103.53">     // check if start and end are null/undefined or a 'number'</span>
<a href="#l103.54"></a><span id="l103.54">     if ((start == null) || (isNaN(new Number(start)))) {</span>
<a href="#l103.55"></a><span id="l103.55">         start = 0;</span>
<a href="#l103.56"></a><span id="l103.56">     }</span>
<a href="#l103.57"></a><span id="l103.57">     if ((end == null) || (isNaN(new Number(end)))) {</span>
<a href="#l103.58"></a><span id="l103.58">         end = Number.MAX_VALUE;</span>
<a href="#l103.59"></a><span id="l103.59">     }</span>
<a href="#l103.60"></a><span id="l103.60" class="difflineminus">-    </span>
<a href="#l103.61"></a><span id="l103.61" class="difflineplus">+</span>
<a href="#l103.62"></a><span id="l103.62">     // if it's an array</span>
<a href="#l103.63"></a><span id="l103.63">     if (typeof prefix == &quot;object&quot;) {</span>
<a href="#l103.64"></a><span id="l103.64">         for (var i = 0, j = prefix.length; i &lt; j; i++) {</span>
<a href="#l103.65"></a><span id="l103.65">             var res = _stringTailMatch(str, prefix[i], start, end, true);</span>
<a href="#l103.66"></a><span id="l103.66">             if (res) {</span>
<a href="#l103.67"></a><span id="l103.67">                 return true;</span>
<a href="#l103.68"></a><span id="l103.68">             }</span>
<a href="#l103.69"></a><span id="l103.69">         }</span>
<a href="#l103.70"></a><span id="l103.70">         return false;</span>
<a href="#l103.71"></a><span id="l103.71">     }</span>
<a href="#l103.72"></a><span id="l103.72" class="difflineminus">-    </span>
<a href="#l103.73"></a><span id="l103.73" class="difflineplus">+</span>
<a href="#l103.74"></a><span id="l103.74">     return _stringTailMatch(str, prefix, start, end, true);</span>
<a href="#l103.75"></a><span id="l103.75"> }</span>
<a href="#l103.76"></a><span id="l103.76"> </span>
<a href="#l103.77"></a><span id="l103.77"> /*</span>
<a href="#l103.78"></a><span id="l103.78">  endsWith(str, suffix[, start[, end]]) -&gt; bool</span>
<a href="#l103.79"></a><span id="l103.79"> </span>
<a href="#l103.80"></a><span id="l103.80">  Return true if str ends with the specified suffix, false otherwise.</span>
<a href="#l103.81"></a><span id="l103.81">  With optional start, test str beginning at that position.</span>
<a href="#l103.82"></a><span id="l103.82">  With optional end, stop comparing str at that position.</span>
<a href="#l103.83"></a><span id="l103.83">  suffix can also be an array of strings to try.</span>
<a href="#l103.84"></a><span id="l103.84"> */</span>
<a href="#l103.85"></a><span id="l103.85"> function endsWith(str, suffix, start, end) {</span>
<a href="#l103.86"></a><span id="l103.86">     if (arguments.length &lt; 2) {</span>
<a href="#l103.87"></a><span id="l103.87">         throw new TypeError('endsWith() requires at least 2 arguments');</span>
<a href="#l103.88"></a><span id="l103.88">     }</span>
<a href="#l103.89"></a><span id="l103.89" class="difflineminus">-    </span>
<a href="#l103.90"></a><span id="l103.90" class="difflineplus">+</span>
<a href="#l103.91"></a><span id="l103.91">     // check if start and end are null/undefined or a 'number'</span>
<a href="#l103.92"></a><span id="l103.92">     if ((start == null) || (isNaN(new Number(start)))) {</span>
<a href="#l103.93"></a><span id="l103.93">         start = 0;</span>
<a href="#l103.94"></a><span id="l103.94">     }</span>
<a href="#l103.95"></a><span id="l103.95">     if ((end == null) || (isNaN(new Number(end)))) {</span>
<a href="#l103.96"></a><span id="l103.96">         end = Number.MAX_VALUE;</span>
<a href="#l103.97"></a><span id="l103.97">     }</span>
<a href="#l103.98"></a><span id="l103.98" class="difflineminus">-    </span>
<a href="#l103.99"></a><span id="l103.99" class="difflineplus">+</span>
<a href="#l103.100"></a><span id="l103.100">     // if it's an array</span>
<a href="#l103.101"></a><span id="l103.101">     if (typeof suffix == &quot;object&quot;) {</span>
<a href="#l103.102"></a><span id="l103.102">         for (var i = 0, j = suffix.length; i &lt; j; i++) {</span>
<a href="#l103.103"></a><span id="l103.103">             var res = _stringTailMatch(str, suffix[i], start, end, false);</span>
<a href="#l103.104"></a><span id="l103.104">             if (res) {</span>
<a href="#l103.105"></a><span id="l103.105">                 return true;</span>
<a href="#l103.106"></a><span id="l103.106">             }</span>
<a href="#l103.107"></a><span id="l103.107">         }</span>
<a href="#l103.108"></a><span id="l103.108">         return false;</span>
<a href="#l103.109"></a><span id="l103.109">     }</span>
<a href="#l103.110"></a><span id="l103.110" class="difflineminus">-    </span>
<a href="#l103.111"></a><span id="l103.111" class="difflineplus">+</span>
<a href="#l103.112"></a><span id="l103.112">     return _stringTailMatch(str, suffix, start, end, false);</span>
<a href="#l103.113"></a><span id="l103.113"> }</span>
<a href="#l103.114"></a><span id="l103.114"> </span>
<a href="#l103.115"></a><span id="l103.115"> /*</span>
<a href="#l103.116"></a><span id="l103.116">  Matches the end (direction == false) or start (direction == true) of str</span>
<a href="#l103.117"></a><span id="l103.117">  against substr, using the start and end arguments. Returns false</span>
<a href="#l103.118"></a><span id="l103.118">  if not found and true if found.</span>
<a href="#l103.119"></a><span id="l103.119"> */</span>
<a href="#l103.120"></a><span id="l103.120"> function _stringTailMatch(str, substr, start, end, fromStart) {</span>
<a href="#l103.121"></a><span id="l103.121">     var len = str.length;</span>
<a href="#l103.122"></a><span id="l103.122">     var slen = substr.length;</span>
<a href="#l103.123"></a><span id="l103.123" class="difflineminus">-    </span>
<a href="#l103.124"></a><span id="l103.124" class="difflineplus">+</span>
<a href="#l103.125"></a><span id="l103.125">     var indices = _adjustIndices(start, end, len);</span>
<a href="#l103.126"></a><span id="l103.126">     start = indices[0]; end = indices[1]; len = indices[2];</span>
<a href="#l103.127"></a><span id="l103.127" class="difflineminus">-    </span>
<a href="#l103.128"></a><span id="l103.128" class="difflineplus">+</span>
<a href="#l103.129"></a><span id="l103.129">     if (fromStart) {</span>
<a href="#l103.130"></a><span id="l103.130">         if (start + slen &gt; len) {</span>
<a href="#l103.131"></a><span id="l103.131">             return false;</span>
<a href="#l103.132"></a><span id="l103.132">         }</span>
<a href="#l103.133"></a><span id="l103.133">     } else {</span>
<a href="#l103.134"></a><span id="l103.134">         if (end - start &lt; slen || start &gt; len) {</span>
<a href="#l103.135"></a><span id="l103.135">             return false;</span>
<a href="#l103.136"></a><span id="l103.136">         }</span>
<a href="#l103.137"></a><span id="l103.137">         if (end - slen &gt; start) {</span>
<a href="#l103.138"></a><span id="l103.138">             start = end - slen;</span>
<a href="#l103.139"></a><span id="l103.139">         }</span>
<a href="#l103.140"></a><span id="l103.140">     }</span>
<a href="#l103.141"></a><span id="l103.141" class="difflineminus">-    </span>
<a href="#l103.142"></a><span id="l103.142" class="difflineplus">+</span>
<a href="#l103.143"></a><span id="l103.143">     if (end - start &gt;= slen) {</span>
<a href="#l103.144"></a><span id="l103.144">         return str.substr(start, slen) == substr;</span>
<a href="#l103.145"></a><span id="l103.145">     }</span>
<a href="#l103.146"></a><span id="l103.146">     return false;</span>
<a href="#l103.147"></a><span id="l103.147"> }</span>
<a href="#l103.148"></a><span id="l103.148"> </span>
<a href="#l103.149"></a><span id="l103.149"> function _adjustIndices(start, end, len)</span>
<a href="#l103.150"></a><span id="l103.150"> {</span>
<a href="#l103.151"></a><span id="l103.151"> 	if (end &gt; len) {</span>
<a href="#l103.152"></a><span id="l103.152"> 	    end = len;</span>
<a href="#l103.153"></a><span id="l103.153"> 	} else if (end &lt; 0) {</span>
<a href="#l103.154"></a><span id="l103.154"> 	    end += len;</span>
<a href="#l103.155"></a><span id="l103.155"> 	}</span>
<a href="#l103.156"></a><span id="l103.156" class="difflineminus">-    </span>
<a href="#l103.157"></a><span id="l103.157" class="difflineplus">+</span>
<a href="#l103.158"></a><span id="l103.158">     if (end &lt; 0) {</span>
<a href="#l103.159"></a><span id="l103.159">         end = 0;</span>
<a href="#l103.160"></a><span id="l103.160">     }</span>
<a href="#l103.161"></a><span id="l103.161"> 	if (start &lt; 0) {</span>
<a href="#l103.162"></a><span id="l103.162" class="difflineminus">-	    start += len;   </span>
<a href="#l103.163"></a><span id="l103.163" class="difflineplus">+	    start += len;</span>
<a href="#l103.164"></a><span id="l103.164"> 	}</span>
<a href="#l103.165"></a><span id="l103.165"> 	if (start &lt; 0) {</span>
<a href="#l103.166"></a><span id="l103.166"> 		start = 0;</span>
<a href="#l103.167"></a><span id="l103.167"> 	}</span>
<a href="#l103.168"></a><span id="l103.168" class="difflineminus">-	</span>
<a href="#l103.169"></a><span id="l103.169" class="difflineplus">+</span>
<a href="#l103.170"></a><span id="l103.170"> 	return [start, end, len];</span>
<a href="#l103.171"></a><span id="l103.171"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l104.1"></a><span id="l104.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/commonjs/modules1/moda.js</span>
<a href="#l104.2"></a><span id="l104.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/commonjs/modules1/moda.js</span>
<a href="#l104.3"></a><span id="l104.3" class="difflineat">@@ -1,8 +1,8 @@</span>
<a href="#l104.4"></a><span id="l104.4"> var modb = require(&quot;modb&quot;),</span>
<a href="#l104.5"></a><span id="l104.5">     modc = require(&quot;../modules2/modc&quot;);</span>
<a href="#l104.6"></a><span id="l104.6" class="difflineminus">-    </span>
<a href="#l104.7"></a><span id="l104.7" class="difflineplus">+</span>
<a href="#l104.8"></a><span id="l104.8"> exports.add = modc.add;</span>
<a href="#l104.9"></a><span id="l104.9"> </span>
<a href="#l104.10"></a><span id="l104.10"> exports.subtract = function(a, b) {</span>
<a href="#l104.11"></a><span id="l104.11">   return a - b;</span>
<a href="#l104.12"></a><span id="l104.12"> }</span>
<a href="#l104.13"></a><span id="l104.13">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l105.1"></a><span id="l105.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/dnd/testDragLink.js</span>
<a href="#l105.2"></a><span id="l105.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/dnd/testDragLink.js</span>
<a href="#l105.3"></a><span id="l105.3" class="difflineat">@@ -5,14 +5,14 @@ var setupModule = function(module) {</span>
<a href="#l105.4"></a><span id="l105.4"> var testFoo = function(){</span>
<a href="#l105.5"></a><span id="l105.5">   controller.open('http://www.google.com');</span>
<a href="#l105.6"></a><span id="l105.6">   controller.waitForPageLoad();</span>
<a href="#l105.7"></a><span id="l105.7"> </span>
<a href="#l105.8"></a><span id="l105.8">   var urlbar = new elementslib.Lookup(controller.window.document, '/id(&quot;main-window&quot;)/id(&quot;tab-view-deck&quot;)/{&quot;flex&quot;:&quot;1&quot;}/id(&quot;navigator-toolbox&quot;)/id(&quot;nav-bar&quot;)/id(&quot;urlbar-container&quot;)/id(&quot;urlbar&quot;)/anon({&quot;class&quot;:&quot;urlbar-frontcap-and-textbox&quot;})/anon({&quot;anonid&quot;:&quot;stack&quot;})/anon({&quot;anonid&quot;:&quot;textbox-container&quot;})/anon({&quot;anonid&quot;:&quot;textbox-input-box&quot;})/anon({&quot;anonid&quot;:&quot;input&quot;})');</span>
<a href="#l105.9"></a><span id="l105.9">   var link = new elementslib.Link(controller.tabs.activeTab, &quot;Advanced search&quot;);</span>
<a href="#l105.10"></a><span id="l105.10"> </span>
<a href="#l105.11"></a><span id="l105.11">   controller.dragToElement(link, urlbar, 100, 20);</span>
<a href="#l105.12"></a><span id="l105.12" class="difflineminus">-    </span>
<a href="#l105.13"></a><span id="l105.13" class="difflineplus">+</span>
<a href="#l105.14"></a><span id="l105.14">   // should visit advanced search page</span>
<a href="#l105.15"></a><span id="l105.15">   controller.waitForPageLoad();</span>
<a href="#l105.16"></a><span id="l105.16">   var advancedSearch = new elementslib.Name(controller.tabs.activeTab, &quot;as_q&quot;);</span>
<a href="#l105.17"></a><span id="l105.17">   controller.assertNode(advancedSearch);</span>
<a href="#l105.18"></a><span id="l105.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l106.1"></a><span id="l106.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/dnd/testTabView.js</span>
<a href="#l106.2"></a><span id="l106.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/dnd/testTabView.js</span>
<a href="#l106.3"></a><span id="l106.3" class="difflineat">@@ -11,16 +11,16 @@ var testFoo = function() {</span>
<a href="#l106.4"></a><span id="l106.4">   // wait for tab candy to open</span>
<a href="#l106.5"></a><span id="l106.5">   controller.sleep(2000);</span>
<a href="#l106.6"></a><span id="l106.6"> </span>
<a href="#l106.7"></a><span id="l106.7">   var doc = controller.window.document.getElementById(&quot;tab-view&quot;).contentDocument;</span>
<a href="#l106.8"></a><span id="l106.8"> </span>
<a href="#l106.9"></a><span id="l106.9">   var tab = new elementslib.Selector(doc, &quot;.tab&quot;);</span>
<a href="#l106.10"></a><span id="l106.10">   var content = new elementslib.ID(doc, &quot;content&quot;);</span>
<a href="#l106.11"></a><span id="l106.11">   controller.dragToElement(tab, content, 500, 600);</span>
<a href="#l106.12"></a><span id="l106.12" class="difflineminus">-  </span>
<a href="#l106.13"></a><span id="l106.13" class="difflineplus">+</span>
<a href="#l106.14"></a><span id="l106.14">   var looseTabs = new elementslib.Selector(doc, &quot;.tabInGroupItem&quot;);</span>
<a href="#l106.15"></a><span id="l106.15">   controller.assertNode(looseTabs);</span>
<a href="#l106.16"></a><span id="l106.16">   // there should only be one tab in the group now</span>
<a href="#l106.17"></a><span id="l106.17">   controller.assertJS(function() { return !looseTabs.getNode(1); });</span>
<a href="#l106.18"></a><span id="l106.18" class="difflineminus">-  </span>
<a href="#l106.19"></a><span id="l106.19" class="difflineplus">+</span>
<a href="#l106.20"></a><span id="l106.20">   tabView.close();</span>
<a href="#l106.21"></a><span id="l106.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l107.1"></a><span id="l107.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/dnd/testxul.js</span>
<a href="#l107.2"></a><span id="l107.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/dnd/testxul.js</span>
<a href="#l107.3"></a><span id="l107.3" class="difflineat">@@ -6,11 +6,11 @@ var test = function () {</span>
<a href="#l107.4"></a><span id="l107.4">   controller.open(&quot;chrome://mozmill/content/test/test.xul&quot;);</span>
<a href="#l107.5"></a><span id="l107.5">   controller.waitForPageLoad();</span>
<a href="#l107.6"></a><span id="l107.6"> </span>
<a href="#l107.7"></a><span id="l107.7">   var bar = new elementslib.ID(controller.window.document, &quot;item1&quot;);</span>
<a href="#l107.8"></a><span id="l107.8">   var box = new elementslib.ID(controller.window.document, &quot;item2&quot;);</span>
<a href="#l107.9"></a><span id="l107.9"> </span>
<a href="#l107.10"></a><span id="l107.10">   controller.dragToElement(bar, box);</span>
<a href="#l107.11"></a><span id="l107.11"> </span>
<a href="#l107.12"></a><span id="l107.12" class="difflineminus">-  // successful drop makes bar disappear </span>
<a href="#l107.13"></a><span id="l107.13" class="difflineplus">+  // successful drop makes bar disappear</span>
<a href="#l107.14"></a><span id="l107.14">   controller.assertNodeNotExist(bar);</span>
<a href="#l107.15"></a><span id="l107.15"> }</span>
<a href="#l107.16"></a><span id="l107.16">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l108.1"></a><span id="l108.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/elementLib-UnitTest.js</span>
<a href="#l108.2"></a><span id="l108.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/elementLib-UnitTest.js</span>
<a href="#l108.3"></a><span id="l108.3" class="difflineat">@@ -1,11 +1,11 @@</span>
<a href="#l108.4"></a><span id="l108.4" class="difflineminus">-var elementslib = {}; </span>
<a href="#l108.5"></a><span id="l108.5" class="difflineplus">+var elementslib = {};</span>
<a href="#l108.6"></a><span id="l108.6"> Components.utils.import('resource://mozmill/modules/elementslib.js', elementslib);</span>
<a href="#l108.7"></a><span id="l108.7" class="difflineminus">-var mozmill = {}; </span>
<a href="#l108.8"></a><span id="l108.8" class="difflineplus">+var mozmill = {};</span>
<a href="#l108.9"></a><span id="l108.9"> Components.utils.import('resource://mozmill/modules/mozmill.js', mozmill);</span>
<a href="#l108.10"></a><span id="l108.10"> </span>
<a href="#l108.11"></a><span id="l108.11"> var test_foo = function(){</span>
<a href="#l108.12"></a><span id="l108.12">   var controller = mozmill.getBrowserController();</span>
<a href="#l108.13"></a><span id="l108.13">   controller.open(&quot;http://en-us.www.mozilla.com/en-US/firefox/3.0.1/firstrun/&quot;);</span>
<a href="#l108.14"></a><span id="l108.14"> </span>
<a href="#l108.15"></a><span id="l108.15">   // Shorthand</span>
<a href="#l108.16"></a><span id="l108.16">   var content = controller.window.content.document;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l109.1"></a><span id="l109.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/restart/test_browser/testPost.js</span>
<a href="#l109.2"></a><span id="l109.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/restart/test_browser/testPost.js</span>
<a href="#l109.3"></a><span id="l109.3" class="difflineat">@@ -6,13 +6,13 @@ var setupModule = function(module) {</span>
<a href="#l109.4"></a><span id="l109.4"> }</span>
<a href="#l109.5"></a><span id="l109.5"> </span>
<a href="#l109.6"></a><span id="l109.6"> </span>
<a href="#l109.7"></a><span id="l109.7"> var testKnowRightsDoesNotExist = function(){</span>
<a href="#l109.8"></a><span id="l109.8">   if (!persisted.test) {</span>
<a href="#l109.9"></a><span id="l109.9">     throw &quot;Persisted is not working.&quot;</span>
<a href="#l109.10"></a><span id="l109.10">   }</span>
<a href="#l109.11"></a><span id="l109.11">   var e = new elementslib.Lookup(controller.window.document, '/id(&quot;main-window&quot;)/id(&quot;browser&quot;)/id(&quot;appcontent&quot;)/id(&quot;content&quot;)/anon({&quot;anonid&quot;:&quot;tabbox&quot;})/anon({&quot;anonid&quot;:&quot;panelcontainer&quot;})/[0]/{&quot;value&quot;:&quot;about-rights&quot;}/{&quot;accesskey&quot;:&quot;K&quot;}');</span>
<a href="#l109.12"></a><span id="l109.12" class="difflineminus">-  </span>
<a href="#l109.13"></a><span id="l109.13" class="difflineplus">+</span>
<a href="#l109.14"></a><span id="l109.14">   if (e.exists()) {</span>
<a href="#l109.15"></a><span id="l109.15">     throw 'First run &quot;know our rights&quot; dialog is up after restart';</span>
<a href="#l109.16"></a><span id="l109.16">   }</span>
<a href="#l109.17"></a><span id="l109.17"> }</span>
<a href="#l109.18"></a><span id="l109.18">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l110.1"></a><span id="l110.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_assert.js</span>
<a href="#l110.2"></a><span id="l110.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_assert.js</span>
<a href="#l110.3"></a><span id="l110.3" class="difflineat">@@ -1,24 +1,24 @@</span>
<a href="#l110.4"></a><span id="l110.4"> </span>
<a href="#l110.5"></a><span id="l110.5" class="difflineminus">-var elementslib = {}; </span>
<a href="#l110.6"></a><span id="l110.6" class="difflineplus">+var elementslib = {};</span>
<a href="#l110.7"></a><span id="l110.7"> Components.utils.import('resource://mozmill/modules/elementslib.js', elementslib);</span>
<a href="#l110.8"></a><span id="l110.8" class="difflineminus">-var mozmill = {}; </span>
<a href="#l110.9"></a><span id="l110.9" class="difflineplus">+var mozmill = {};</span>
<a href="#l110.10"></a><span id="l110.10"> Components.utils.import('resource://mozmill/modules/mozmill.js', mozmill);</span>
<a href="#l110.11"></a><span id="l110.11"> </span>
<a href="#l110.12"></a><span id="l110.12"> var test_assert = function(){</span>
<a href="#l110.13"></a><span id="l110.13">  var controller = mozmill.getBrowserController();</span>
<a href="#l110.14"></a><span id="l110.14">  controller.open('http://www.google.com');</span>
<a href="#l110.15"></a><span id="l110.15">  controller.sleep(2000);</span>
<a href="#l110.16"></a><span id="l110.16">  controller.type(new elementslib.Name(controller.window.content.document, 'q'), 'Mozilla');</span>
<a href="#l110.17"></a><span id="l110.17">  controller.assertValue(new elementslib.Name(controller.window.content.document, 'q'), 'Mozilla');</span>
<a href="#l110.18"></a><span id="l110.18">  controller.keypress(new elementslib.Name(controller.window.content.document, 'btnG'), 13);</span>
<a href="#l110.19"></a><span id="l110.19">  controller.sleep(2000);</span>
<a href="#l110.20"></a><span id="l110.20">  controller.type(new elementslib.Name(controller.window.content.document, 'q'), 'Mozilla Summit');</span>
<a href="#l110.21"></a><span id="l110.21">  controller.click(new elementslib.Name(controller.window.content.document, 'btnG'));</span>
<a href="#l110.22"></a><span id="l110.22">  controller.sleep(2000);</span>
<a href="#l110.23"></a><span id="l110.23" class="difflineminus">- </span>
<a href="#l110.24"></a><span id="l110.24" class="difflineplus">+</span>
<a href="#l110.25"></a><span id="l110.25">  // chrome</span>
<a href="#l110.26"></a><span id="l110.26">  controller.assertNode(new elementslib.ID(controller.window.document, 'searchbar'));</span>
<a href="#l110.27"></a><span id="l110.27">  controller.type(new elementslib.ID(controller.window.document, 'searchbar'), 'Mozilla Summit');</span>
<a href="#l110.28"></a><span id="l110.28">  controller.assertValue(new elementslib.ID(controller.window.document, 'searchbar'), 'Mozilla Summit');</span>
<a href="#l110.29"></a><span id="l110.29">  controller.keypress(new elementslib.ID(controller.window.document, 'searchbar'), '13');</span>
<a href="#l110.30"></a><span id="l110.30"> }</span>
<a href="#l110.31"></a><span id="l110.31">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l111.1"></a><span id="l111.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_diggIterator.js</span>
<a href="#l111.2"></a><span id="l111.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_diggIterator.js</span>
<a href="#l111.3"></a><span id="l111.3" class="difflineat">@@ -3,16 +3,16 @@ var mozmill = {}; Components.utils.impor</span>
<a href="#l111.4"></a><span id="l111.4"> </span>
<a href="#l111.5"></a><span id="l111.5"> // var test_DiggIterator = function () {</span>
<a href="#l111.6"></a><span id="l111.6"> //   // Bring up browser controller.</span>
<a href="#l111.7"></a><span id="l111.7"> //   var controller = mozmill.getBrowserController();</span>
<a href="#l111.8"></a><span id="l111.8"> //   controller.open('http://www.digg.com');</span>
<a href="#l111.9"></a><span id="l111.9"> //   controller.waitForElement(new elementslib.Elem( controller.window.content.document.body ));</span>
<a href="#l111.10"></a><span id="l111.10"> //   controller.sleep(5000);</span>
<a href="#l111.11"></a><span id="l111.11"> //   var links = controller.window.content.document.getElementsByTagName('a');</span>
<a href="#l111.12"></a><span id="l111.12" class="difflineminus">-//  </span>
<a href="#l111.13"></a><span id="l111.13" class="difflineplus">+//</span>
<a href="#l111.14"></a><span id="l111.14"> //   for (var i = 0; i&lt;links.length; i++){</span>
<a href="#l111.15"></a><span id="l111.15"> //     controller.click(new elementslib.Elem( links[i] ));</span>
<a href="#l111.16"></a><span id="l111.16"> //     controller.sleep(3000);</span>
<a href="#l111.17"></a><span id="l111.17"> //     links = controller.window.content.document.getElementsByTagName('a');</span>
<a href="#l111.18"></a><span id="l111.18"> //     controller.sleep(2000);</span>
<a href="#l111.19"></a><span id="l111.19"> //   }</span>
<a href="#l111.20"></a><span id="l111.20"> // }</span>
<a href="#l111.21"></a><span id="l111.21">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l112.1"></a><span id="l112.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_googleIterator.js</span>
<a href="#l112.2"></a><span id="l112.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_googleIterator.js</span>
<a href="#l112.3"></a><span id="l112.3" class="difflineat">@@ -6,16 +6,16 @@ var mozmill = {}; Components.utils.impor</span>
<a href="#l112.4"></a><span id="l112.4"> //   var controller = mozmill.getBrowserController();</span>
<a href="#l112.5"></a><span id="l112.5"> //   controller.open('http://www.google.com');</span>
<a href="#l112.6"></a><span id="l112.6"> //   controller.waitForElement(new elementslib.Elem( controller.window.content.document.body ));</span>
<a href="#l112.7"></a><span id="l112.7"> //   controller.sleep(5000);</span>
<a href="#l112.8"></a><span id="l112.8"> //   controller.type(new elementslib.Name(controller.window.content.document, 'q'), 'Mozilla');</span>
<a href="#l112.9"></a><span id="l112.9"> //   controller.click(new elementslib.Name(controller.window.content.document, 'btnG'));</span>
<a href="#l112.10"></a><span id="l112.10"> //   controller.sleep(2000);</span>
<a href="#l112.11"></a><span id="l112.11"> //   var links = controller.window.content.document.getElementsByTagName('a');</span>
<a href="#l112.12"></a><span id="l112.12" class="difflineminus">-//  </span>
<a href="#l112.13"></a><span id="l112.13" class="difflineplus">+//</span>
<a href="#l112.14"></a><span id="l112.14"> //   for (var i = 0; i&lt;links.length; i++){</span>
<a href="#l112.15"></a><span id="l112.15"> //     controller.click(new elementslib.Elem( links[i] ));</span>
<a href="#l112.16"></a><span id="l112.16"> //     controller.sleep(5000);</span>
<a href="#l112.17"></a><span id="l112.17"> //     links = controller.window.content.document.getElementsByTagName('a');</span>
<a href="#l112.18"></a><span id="l112.18"> //     controller.sleep(2000);</span>
<a href="#l112.19"></a><span id="l112.19"> //   }</span>
<a href="#l112.20"></a><span id="l112.20"> // }</span>
<a href="#l112.21"></a><span id="l112.21">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l113.1"></a><span id="l113.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_radio.js</span>
<a href="#l113.2"></a><span id="l113.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_radio.js</span>
<a href="#l113.3"></a><span id="l113.3" class="difflineat">@@ -3,31 +3,31 @@ var prefs = require(&quot;../../mozmill-tests</span>
<a href="#l113.4"></a><span id="l113.4"> </span>
<a href="#l113.5"></a><span id="l113.5"> var setupModule = function(module) {</span>
<a href="#l113.6"></a><span id="l113.6">   module.controller = mozmill.getBrowserController();</span>
<a href="#l113.7"></a><span id="l113.7"> }</span>
<a href="#l113.8"></a><span id="l113.8"> </span>
<a href="#l113.9"></a><span id="l113.9"> var testHTMLRadio = function() {</span>
<a href="#l113.10"></a><span id="l113.10">   controller.open('http://www.google.com/cse?cx=002443141534113389537%3Aysdmevkkknw&amp;cof=FORID%3A0&amp;q=mozmill&amp;x=0&amp;y=0');</span>
<a href="#l113.11"></a><span id="l113.11">   controller.waitForPageLoad();</span>
<a href="#l113.12"></a><span id="l113.12" class="difflineminus">-  </span>
<a href="#l113.13"></a><span id="l113.13" class="difflineplus">+</span>
<a href="#l113.14"></a><span id="l113.14">   var radio = new elementslib.ID(controller.tabs.activeTab, &quot;www&quot;);</span>
<a href="#l113.15"></a><span id="l113.15">   controller.radio(radio);</span>
<a href="#l113.16"></a><span id="l113.16">   controller.sleep(2000);</span>
<a href="#l113.17"></a><span id="l113.17"> }</span>
<a href="#l113.18"></a><span id="l113.18"> </span>
<a href="#l113.19"></a><span id="l113.19"> var testXULRadio = function() {</span>
<a href="#l113.20"></a><span id="l113.20">   prefs.openPreferencesDialog(controller, prefDialogCallback);</span>
<a href="#l113.21"></a><span id="l113.21"> }</span>
<a href="#l113.22"></a><span id="l113.22"> </span>
<a href="#l113.23"></a><span id="l113.23"> var prefDialogCallback = function(controller) {</span>
<a href="#l113.24"></a><span id="l113.24">   var prefDialog = new prefs.preferencesDialog(controller);</span>
<a href="#l113.25"></a><span id="l113.25" class="difflineminus">-  </span>
<a href="#l113.26"></a><span id="l113.26" class="difflineplus">+</span>
<a href="#l113.27"></a><span id="l113.27">   var radio = new elementslib.ID(controller.window.document, &quot;alwaysAsk&quot;);</span>
<a href="#l113.28"></a><span id="l113.28">   controller.radio(radio);</span>
<a href="#l113.29"></a><span id="l113.29">   controller.sleep(2000);</span>
<a href="#l113.30"></a><span id="l113.30" class="difflineminus">-  </span>
<a href="#l113.31"></a><span id="l113.31" class="difflineplus">+</span>
<a href="#l113.32"></a><span id="l113.32">   radio = new elementslib.ID(controller.window.document, &quot;saveTo&quot;);</span>
<a href="#l113.33"></a><span id="l113.33">   controller.radio(radio);</span>
<a href="#l113.34"></a><span id="l113.34">   controller.sleep(2000);</span>
<a href="#l113.35"></a><span id="l113.35"> </span>
<a href="#l113.36"></a><span id="l113.36">   prefDialog.close(true);</span>
<a href="#l113.37"></a><span id="l113.37"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l114.1"></a><span id="l114.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_setupmodulereporting.js</span>
<a href="#l114.2"></a><span id="l114.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_setupmodulereporting.js</span>
<a href="#l114.3"></a><span id="l114.3" class="difflineat">@@ -1,28 +1,28 @@</span>
<a href="#l114.4"></a><span id="l114.4" class="difflineminus">-var elementslib = {}; </span>
<a href="#l114.5"></a><span id="l114.5" class="difflineplus">+var elementslib = {};</span>
<a href="#l114.6"></a><span id="l114.6"> Components.utils.import('resource://mozmill/modules/elementslib.js', elementslib);</span>
<a href="#l114.7"></a><span id="l114.7" class="difflineminus">-var mozmill = {}; </span>
<a href="#l114.8"></a><span id="l114.8" class="difflineplus">+var mozmill = {};</span>
<a href="#l114.9"></a><span id="l114.9"> Components.utils.import('resource://mozmill/modules/mozmill.js', mozmill);</span>
<a href="#l114.10"></a><span id="l114.10"> </span>
<a href="#l114.11"></a><span id="l114.11"> var setupModule = function(){</span>
<a href="#l114.12"></a><span id="l114.12">   controller = mozmill.getBrowserController();</span>
<a href="#l114.13"></a><span id="l114.13">   controller.open(&quot;http://mozilla.org&quot;);</span>
<a href="#l114.14"></a><span id="l114.14"> }</span>
<a href="#l114.15"></a><span id="l114.15"> </span>
<a href="#l114.16"></a><span id="l114.16"> var setupTest = function(){</span>
<a href="#l114.17"></a><span id="l114.17">   controller.open(&quot;http://mozilla.org&quot;);</span>
<a href="#l114.18"></a><span id="l114.18">   controller.waitForPageLoad();</span>
<a href="#l114.19"></a><span id="l114.19"> }</span>
<a href="#l114.20"></a><span id="l114.20"> </span>
<a href="#l114.21"></a><span id="l114.21"> var testSetupModuleReporting = function() {</span>
<a href="#l114.22"></a><span id="l114.22">   // We should have mozilla.org page open</span>
<a href="#l114.23"></a><span id="l114.23">   var q = new elementslib.ID(controller.tabs.activeTab, &quot;q&quot;);</span>
<a href="#l114.24"></a><span id="l114.24">   controller.type(q, &quot;firefox&quot;);</span>
<a href="#l114.25"></a><span id="l114.25" class="difflineminus">-  </span>
<a href="#l114.26"></a><span id="l114.26" class="difflineplus">+</span>
<a href="#l114.27"></a><span id="l114.27">   var btn = new elementslib.ID(controller.tabs.activeTab, &quot;quick-search-btn&quot;);</span>
<a href="#l114.28"></a><span id="l114.28">   controller.click(btn);</span>
<a href="#l114.29"></a><span id="l114.29"> </span>
<a href="#l114.30"></a><span id="l114.30">   controller.waitForPageLoad();</span>
<a href="#l114.31"></a><span id="l114.31"> }</span>
<a href="#l114.32"></a><span id="l114.32"> </span>
<a href="#l114.33"></a><span id="l114.33"> var teardownTest = function(){</span>
<a href="#l114.34"></a><span id="l114.34">   controller.open(&quot;http://www.google.com&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l115.1"></a><span id="l115.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_something/test_parents.js</span>
<a href="#l115.2"></a><span id="l115.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_something/test_parents.js</span>
<a href="#l115.3"></a><span id="l115.3" class="difflineat">@@ -1,12 +1,12 @@</span>
<a href="#l115.4"></a><span id="l115.4"> </span>
<a href="#l115.5"></a><span id="l115.5"> var MODULE_NAME = 'test_parent';</span>
<a href="#l115.6"></a><span id="l115.6"> </span>
<a href="#l115.7"></a><span id="l115.7"> var asdf = 'asdf'</span>
<a href="#l115.8"></a><span id="l115.8"> </span>
<a href="#l115.9"></a><span id="l115.9"> var setupModule = function (module) {</span>
<a href="#l115.10"></a><span id="l115.10" class="difflineminus">-  </span>
<a href="#l115.11"></a><span id="l115.11" class="difflineplus">+</span>
<a href="#l115.12"></a><span id="l115.12"> }</span>
<a href="#l115.13"></a><span id="l115.13"> </span>
<a href="#l115.14"></a><span id="l115.14"> var testInParent = function () {</span>
<a href="#l115.15"></a><span id="l115.15" class="difflineminus">-  </span>
<a href="#l115.16"></a><span id="l115.16" class="difflineplus">+</span>
<a href="#l115.17"></a><span id="l115.17"> }</span>
<a href="#l115.18"></a><span id="l115.18">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l116.1"></a><span id="l116.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_staleelement.js</span>
<a href="#l116.2"></a><span id="l116.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_staleelement.js</span>
<a href="#l116.3"></a><span id="l116.3" class="difflineat">@@ -6,15 +6,15 @@ var setupTest = function() {</span>
<a href="#l116.4"></a><span id="l116.4"> </span>
<a href="#l116.5"></a><span id="l116.5"> var testReload = function() {</span>
<a href="#l116.6"></a><span id="l116.6">   var testPage = localTestFolder + &quot;singlediv.html&quot;;</span>
<a href="#l116.7"></a><span id="l116.7">   controller.open(testPage);</span>
<a href="#l116.8"></a><span id="l116.8">   controller.waitForPageLoad();</span>
<a href="#l116.9"></a><span id="l116.9"> </span>
<a href="#l116.10"></a><span id="l116.10">   var elem = new elementslib.Selector(controller.tabs.activeTab, &quot;#test-div&quot;);</span>
<a href="#l116.11"></a><span id="l116.11">   controller.assertNode(elem);</span>
<a href="#l116.12"></a><span id="l116.12" class="difflineminus">-  </span>
<a href="#l116.13"></a><span id="l116.13" class="difflineplus">+</span>
<a href="#l116.14"></a><span id="l116.14">   controller.open(testPage);</span>
<a href="#l116.15"></a><span id="l116.15">   controller.waitForPageLoad();</span>
<a href="#l116.16"></a><span id="l116.16" class="difflineminus">-  </span>
<a href="#l116.17"></a><span id="l116.17" class="difflineplus">+</span>
<a href="#l116.18"></a><span id="l116.18">   controller.assertNode(elem);</span>
<a href="#l116.19"></a><span id="l116.19"> }</span>
<a href="#l116.20"></a><span id="l116.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l117.1"></a><span id="l117.1" class="difflineminus">--- a/mail/test/resources/mozmill/test/test_waitForPageLoad.js</span>
<a href="#l117.2"></a><span id="l117.2" class="difflineplus">+++ b/mail/test/resources/mozmill/test/test_waitForPageLoad.js</span>
<a href="#l117.3"></a><span id="l117.3" class="difflineat">@@ -21,45 +21,45 @@ var setupTest = function() {</span>
<a href="#l117.4"></a><span id="l117.4"> var testWaitForPageLoad = function() {</span>
<a href="#l117.5"></a><span id="l117.5"> </span>
<a href="#l117.6"></a><span id="l117.6">   /**</span>
<a href="#l117.7"></a><span id="l117.7">    * PART I - Check different types of pages</span>
<a href="#l117.8"></a><span id="l117.8">    */</span>
<a href="#l117.9"></a><span id="l117.9">   for each (var location in LOCATIONS) {</span>
<a href="#l117.10"></a><span id="l117.10">     controller.open(location.url);</span>
<a href="#l117.11"></a><span id="l117.11">     controller.waitForPageLoad();</span>
<a href="#l117.12"></a><span id="l117.12" class="difflineminus">-  </span>
<a href="#l117.13"></a><span id="l117.13" class="difflineplus">+</span>
<a href="#l117.14"></a><span id="l117.14">     // Check that the expected element exists</span>
<a href="#l117.15"></a><span id="l117.15">     if (location.type) {</span>
<a href="#l117.16"></a><span id="l117.16">       var elem = null;</span>
<a href="#l117.17"></a><span id="l117.17" class="difflineminus">-  </span>
<a href="#l117.18"></a><span id="l117.18" class="difflineplus">+</span>
<a href="#l117.19"></a><span id="l117.19">       switch (location.type) {</span>
<a href="#l117.20"></a><span id="l117.20">         case &quot;link&quot;:</span>
<a href="#l117.21"></a><span id="l117.21">           elem = new elementslib.Link(controller.tabs.activeTab, location.value);</span>
<a href="#l117.22"></a><span id="l117.22">           break;</span>
<a href="#l117.23"></a><span id="l117.23">         case &quot;name&quot;:</span>
<a href="#l117.24"></a><span id="l117.24">           elem = new elementslib.Name(controller.tabs.activeTab, location.value);</span>
<a href="#l117.25"></a><span id="l117.25">           break;</span>
<a href="#l117.26"></a><span id="l117.26">         case &quot;id&quot;:</span>
<a href="#l117.27"></a><span id="l117.27">           elem = new elementslib.ID(controller.tabs.activeTab, location.value);</span>
<a href="#l117.28"></a><span id="l117.28">           break;</span>
<a href="#l117.29"></a><span id="l117.29">         default:</span>
<a href="#l117.30"></a><span id="l117.30">       }</span>
<a href="#l117.31"></a><span id="l117.31" class="difflineminus">-  </span>
<a href="#l117.32"></a><span id="l117.32" class="difflineplus">+</span>
<a href="#l117.33"></a><span id="l117.33">       controller.assertNode(elem);</span>
<a href="#l117.34"></a><span id="l117.34">     }</span>
<a href="#l117.35"></a><span id="l117.35">   }</span>
<a href="#l117.36"></a><span id="l117.36" class="difflineminus">-  </span>
<a href="#l117.37"></a><span id="l117.37" class="difflineplus">+</span>
<a href="#l117.38"></a><span id="l117.38">   /**</span>
<a href="#l117.39"></a><span id="l117.39">    * PART II - Test different parameter sets</span>
<a href="#l117.40"></a><span id="l117.40" class="difflineminus">-   */ </span>
<a href="#l117.41"></a><span id="l117.41" class="difflineplus">+   */</span>
<a href="#l117.42"></a><span id="l117.42">   var location = LOCATIONS[0];</span>
<a href="#l117.43"></a><span id="l117.43">   for (var i = 0; i &lt; 7; i++) {</span>
<a href="#l117.44"></a><span id="l117.44">     controller.open(location.url);</span>
<a href="#l117.45"></a><span id="l117.45" class="difflineminus">-  </span>
<a href="#l117.46"></a><span id="l117.46" class="difflineplus">+</span>
<a href="#l117.47"></a><span id="l117.47">     switch (i) {</span>
<a href="#l117.48"></a><span id="l117.48">       case 0:</span>
<a href="#l117.49"></a><span id="l117.49">         controller.waitForPageLoad(controller.tabs.activeTab);</span>
<a href="#l117.50"></a><span id="l117.50">         break;</span>
<a href="#l117.51"></a><span id="l117.51">       case 1:</span>
<a href="#l117.52"></a><span id="l117.52">         controller.waitForPageLoad(controller.tabs.activeTab, undefined, 10);</span>
<a href="#l117.53"></a><span id="l117.53">         break;</span>
<a href="#l117.54"></a><span id="l117.54">       case 2:</span>
<a href="#l117.55"></a><span id="l117.55" class="difflineat">@@ -74,30 +74,30 @@ var testWaitForPageLoad = function() {</span>
<a href="#l117.56"></a><span id="l117.56">       case 5:</span>
<a href="#l117.57"></a><span id="l117.57">         controller.waitForPageLoad(&quot;invalid&quot;, undefined);</span>
<a href="#l117.58"></a><span id="l117.58">         break;</span>
<a href="#l117.59"></a><span id="l117.59">       case 6:</span>
<a href="#l117.60"></a><span id="l117.60">         controller.waitForPageLoad(undefined, &quot;invalid&quot;);</span>
<a href="#l117.61"></a><span id="l117.61">         break;</span>
<a href="#l117.62"></a><span id="l117.62">     }</span>
<a href="#l117.63"></a><span id="l117.63">   }</span>
<a href="#l117.64"></a><span id="l117.64" class="difflineminus">-  </span>
<a href="#l117.65"></a><span id="l117.65" class="difflineplus">+</span>
<a href="#l117.66"></a><span id="l117.66">   /**</span>
<a href="#l117.67"></a><span id="l117.67">    * PART III - Check that we correctly handle timeouts for waitForPageLoad</span>
<a href="#l117.68"></a><span id="l117.68">    */</span>
<a href="#l117.69"></a><span id="l117.69">   try {</span>
<a href="#l117.70"></a><span id="l117.70">     controller.open(LOCATIONS[0].url);</span>
<a href="#l117.71"></a><span id="l117.71">     controller.waitForPageLoad(0);</span>
<a href="#l117.72"></a><span id="l117.72" class="difflineminus">-  </span>
<a href="#l117.73"></a><span id="l117.73" class="difflineplus">+</span>
<a href="#l117.74"></a><span id="l117.74">     throw new Error(&quot;controller.waitForPageLoad() not timed out for timeout=0.&quot;);</span>
<a href="#l117.75"></a><span id="l117.75">   } catch (ex) {}</span>
<a href="#l117.76"></a><span id="l117.76"> </span>
<a href="#l117.77"></a><span id="l117.77">   /**</span>
<a href="#l117.78"></a><span id="l117.78">    * PART IV - Make sure we don't fail when clicking links on a page</span>
<a href="#l117.79"></a><span id="l117.79" class="difflineminus">-   */ </span>
<a href="#l117.80"></a><span id="l117.80" class="difflineplus">+   */</span>
<a href="#l117.81"></a><span id="l117.81">   controller.open(&quot;http://www.mozilla.org&quot;);</span>
<a href="#l117.82"></a><span id="l117.82">   controller.waitForPageLoad();</span>
<a href="#l117.83"></a><span id="l117.83"> </span>
<a href="#l117.84"></a><span id="l117.84">   var link = new elementslib.Link(controller.tabs.activeTab, &quot;Get Involved&quot;);</span>
<a href="#l117.85"></a><span id="l117.85">   controller.click(link);</span>
<a href="#l117.86"></a><span id="l117.86">   controller.waitForPageLoad();</span>
<a href="#l117.87"></a><span id="l117.87"> </span>
<a href="#l117.88"></a><span id="l117.88">   var target = new elementslib.Name(controller.tabs.activeTab, &quot;area&quot;);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

