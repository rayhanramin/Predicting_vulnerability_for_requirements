<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23551:37b26fb2a42136d17d5ee39705a7a8e32a188435</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 37b26fb2a42136d17d5ee39705a7a8e32a188435" />
<meta property="og:url" content="/comm-central/rev/37b26fb2a42136d17d5ee39705a7a8e32a188435" />
<meta property="og:description" content="Bug 1399756 - fix typos in mailnews/ using codespell. rs=comment-only,typo-fix" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 37b26fb2a42136d17d5ee39705a7a8e32a188435 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/37b26fb2a42136d17d5ee39705a7a8e32a188435">shortlog</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/37b26fb2a42136d17d5ee39705a7a8e32a188435">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435">files</a> |
changeset |
<a href="/comm-central/raw-rev/37b26fb2a42136d17d5ee39705a7a8e32a188435">raw</a>  | <a href="/comm-central/archive/37b26fb2a42136d17d5ee39705a7a8e32a188435.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1399756">Bug 1399756</a> - fix typos in mailnews/ using codespell. rs=comment-only,typo-fix
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 20 Mar 2018 11:54:29 +0100</td></tr>

<tr>
 <td>changeset 23551</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/37b26fb2a42136d17d5ee39705a7a8e32a188435">37b26fb2a42136d17d5ee39705a7a8e32a188435</a></td>
</tr>



<tr>
<td>parent 23550</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/96b445d6df365b54eaebcb70193b39cb2055976c">96b445d6df365b54eaebcb70193b39cb2055976c</a>
</td>
</tr>

<tr>
<td>child 23552</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/64fb777301cd52eafd558d431a32b4124b7e0a7a">64fb777301cd52eafd558d431a32b4124b7e0a7a</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=37b26fb2a42136d17d5ee39705a7a8e32a188435">14217</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 20 Mar 2018 11:30:53 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@64fb777301cd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=64fb777301cd52eafd558d431a32b4124b7e0a7a">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=64fb777301cd52eafd558d431a32b4124b7e0a7a&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=64fb777301cd52eafd558d431a32b4124b7e0a7a&newProject=comm-central&newRevision=96b445d6df365b54eaebcb70193b39cb2055976c&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=64fb777301cd52eafd558d431a32b4124b7e0a7a&newProject=comm-central&newRevision=96b445d6df365b54eaebcb70193b39cb2055976c&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=64fb777301cd52eafd558d431a32b4124b7e0a7a&newProject=comm-central&newRevision=96b445d6df365b54eaebcb70193b39cb2055976c&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28comment-only%29&revcount=50">comment-only</a>, <a href="/comm-central/log?rev=reviewer%28typo-fix%29&revcount=50">typo-fix</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1399756">1399756</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1399756">Bug 1399756</a> - fix typos in mailnews/ using codespell. rs=comment-only,typo-fix
[skip-blame]</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/content/abDragDrop.js">mailnews/addrbook/content/abDragDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/content/abDragDrop.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/content/abDragDrop.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/content/abDragDrop.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/content/abDragDrop.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/content/abDragDrop.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp">mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">mailnews/addrbook/src/nsAbLDAPDirectory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDAPDirectory.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDIFService.cpp">mailnews/addrbook/src/nsAbLDIFService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDIFService.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDIFService.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDIFService.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDIFService.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbLDIFService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbManager.cpp">mailnews/addrbook/src/nsAbManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbManager.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbManager.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbManager.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbManager.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsAbManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsVCardObj.cpp">mailnews/addrbook/src/nsVCardObj.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsVCardObj.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsVCardObj.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsVCardObj.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsVCardObj.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/addrbook/src/nsVCardObj.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/charsetList.xml">mailnews/base/content/charsetList.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/charsetList.xml">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/charsetList.xml">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/charsetList.xml">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/charsetList.xml">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/charsetList.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/dateFormat.js">mailnews/base/content/dateFormat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/dateFormat.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/dateFormat.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/dateFormat.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/dateFormat.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/dateFormat.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/folderProps.js">mailnews/base/content/folderProps.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/folderProps.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/folderProps.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/folderProps.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/folderProps.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/folderProps.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/msgAccountCentral.js">mailnews/base/content/msgAccountCentral.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/msgAccountCentral.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/msgAccountCentral.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/msgAccountCentral.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/msgAccountCentral.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/content/msgAccountCentral.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/AccountManager.js">mailnews/base/prefs/content/AccountManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/AccountManager.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/AccountManager.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/AccountManager.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/AccountManager.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/AccountManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-identity.js">mailnews/base/prefs/content/aw-identity.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-identity.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-identity.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-identity.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-identity.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-identity.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-incoming.js">mailnews/base/prefs/content/aw-incoming.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-incoming.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-incoming.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-incoming.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-incoming.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/prefs/content/aw-incoming.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMapiRegistry.idl">mailnews/base/public/nsIMapiRegistry.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMapiRegistry.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMapiRegistry.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMapiRegistry.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMapiRegistry.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMapiRegistry.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgCopyServiceListener.idl">mailnews/base/public/nsIMsgCopyServiceListener.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgCopyServiceListener.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgCopyServiceListener.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgCopyServiceListener.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgCopyServiceListener.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgCopyServiceListener.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgDBView.idl">mailnews/base/public/nsIMsgDBView.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgDBView.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgDBView.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgDBView.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgDBView.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgDBView.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgIdentity.idl">mailnews/base/public/nsIMsgIdentity.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgIdentity.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgIdentity.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgIdentity.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgIdentity.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgIdentity.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgShutdown.idl">mailnews/base/public/nsIMsgShutdown.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgShutdown.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgShutdown.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgShutdown.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgShutdown.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/public/nsIMsgShutdown.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgFilterList.idl">mailnews/base/search/public/nsIMsgFilterList.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgFilterList.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgFilterList.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgFilterList.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgFilterList.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgFilterList.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgSearchSession.idl">mailnews/base/search/public/nsIMsgSearchSession.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgSearchSession.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgSearchSession.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgSearchSession.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgSearchSession.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgSearchSession.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgTraitService.idl">mailnews/base/search/public/nsIMsgTraitService.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgTraitService.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgTraitService.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgTraitService.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgTraitService.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/public/nsIMsgTraitService.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/src/nsMsgSearchTerm.cpp">mailnews/base/search/src/nsMsgSearchTerm.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/src/nsMsgSearchTerm.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/src/nsMsgSearchTerm.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/src/nsMsgSearchTerm.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/src/nsMsgSearchTerm.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/search/src/nsMsgSearchTerm.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.cpp">mailnews/base/src/nsMsgDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.h">mailnews/base/src/nsMsgDBView.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgDBView.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgFolderCompactor.cpp">mailnews/base/src/nsMsgFolderCompactor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgFolderCompactor.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgFolderCompactor.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgFolderCompactor.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgFolderCompactor.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgFolderCompactor.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgMailSession.cpp">mailnews/base/src/nsMsgMailSession.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgMailSession.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgMailSession.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgMailSession.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgMailSession.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgMailSession.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgPrintEngine.cpp">mailnews/base/src/nsMsgPrintEngine.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgPrintEngine.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgPrintEngine.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgPrintEngine.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgPrintEngine.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgPrintEngine.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgThreadedDBView.cpp">mailnews/base/src/nsMsgThreadedDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgThreadedDBView.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgThreadedDBView.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgThreadedDBView.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgThreadedDBView.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/src/nsMsgThreadedDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_folderLookupService.js">mailnews/base/test/unit/test_folderLookupService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_folderLookupService.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_folderLookupService.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_folderLookupService.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_folderLookupService.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_folderLookupService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_junkWhitelisting.js">mailnews/base/test/unit/test_junkWhitelisting.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_junkWhitelisting.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_junkWhitelisting.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_junkWhitelisting.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_junkWhitelisting.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_junkWhitelisting.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/converterWorker.js">mailnews/base/util/converterWorker.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/converterWorker.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/converterWorker.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/converterWorker.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/converterWorker.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/converterWorker.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/errUtils.js">mailnews/base/util/errUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/errUtils.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/errUtils.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/errUtils.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/errUtils.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/errUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/mailnewsMigrator.js">mailnews/base/util/mailnewsMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/mailnewsMigrator.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/mailnewsMigrator.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/mailnewsMigrator.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/mailnewsMigrator.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/mailnewsMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgDBFolder.cpp">mailnews/base/util/nsMsgDBFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgDBFolder.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgDBFolder.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgDBFolder.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgDBFolder.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgDBFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeyArray.cpp">mailnews/base/util/nsMsgKeyArray.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeyArray.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeyArray.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeyArray.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeyArray.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeyArray.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeySet.cpp">mailnews/base/util/nsMsgKeySet.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeySet.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeySet.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeySet.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeySet.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgKeySet.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgProtocol.h">mailnews/base/util/nsMsgProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgProtocol.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgProtocol.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgProtocol.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgProtocol.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.cpp">mailnews/base/util/nsMsgUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.h">mailnews/base/util/nsMsgUtils.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/base/util/nsMsgUtils.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgAttachment.idl">mailnews/compose/public/nsIMsgAttachment.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgAttachment.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgAttachment.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgAttachment.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgAttachment.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgAttachment.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgCompose.idl">mailnews/compose/public/nsIMsgCompose.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgCompose.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgCompose.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgCompose.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgCompose.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgCompose.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgComposeService.idl">mailnews/compose/public/nsIMsgComposeService.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgComposeService.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgComposeService.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgComposeService.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgComposeService.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgComposeService.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgSend.idl">mailnews/compose/public/nsIMsgSend.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgSend.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgSend.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgSend.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgSend.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/public/nsIMsgSend.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsComposeStrings.cpp">mailnews/compose/src/nsComposeStrings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsComposeStrings.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsComposeStrings.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsComposeStrings.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsComposeStrings.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsComposeStrings.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgAppleEncode.cpp">mailnews/compose/src/nsMsgAppleEncode.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgAppleEncode.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgAppleEncode.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgAppleEncode.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgAppleEncode.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgAppleEncode.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompUtils.cpp">mailnews/compose/src/nsMsgCompUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompUtils.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompUtils.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompUtils.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompUtils.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.cpp">mailnews/compose/src/nsMsgCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.h">mailnews/compose/src/nsMsgCompose.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgCompose.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.h">mailnews/compose/src/nsMsgSend.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSend.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSendReport.cpp">mailnews/compose/src/nsMsgSendReport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSendReport.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSendReport.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSendReport.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSendReport.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsMsgSendReport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.cpp">mailnews/compose/src/nsSmtpProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.h">mailnews/compose/src/nsSmtpProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpServer.cpp">mailnews/compose/src/nsSmtpServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpServer.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpServer.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpServer.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpServer.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.cpp">mailnews/compose/src/nsSmtpService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.h">mailnews/compose/src/nsSmtpService.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsSmtpService.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsURLFetcher.cpp">mailnews/compose/src/nsURLFetcher.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsURLFetcher.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsURLFetcher.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsURLFetcher.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsURLFetcher.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/src/nsURLFetcher.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_bug235432.js">mailnews/compose/test/unit/test_bug235432.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_bug235432.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_bug235432.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_bug235432.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_bug235432.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_bug235432.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose1.js">mailnews/compose/test/unit/test_nsMsgCompose1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose1.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose1.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose1.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose1.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose1.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose4.js">mailnews/compose/test/unit/test_nsMsgCompose4.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose4.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose4.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose4.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose4.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_nsMsgCompose4.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMailAddressIDN.js">mailnews/compose/test/unit/test_sendMailAddressIDN.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMailAddressIDN.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMailAddressIDN.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMailAddressIDN.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMailAddressIDN.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMailAddressIDN.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMessageLater2.js">mailnews/compose/test/unit/test_sendMessageLater2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMessageLater2.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMessageLater2.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMessageLater2.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMessageLater2.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/compose/test/unit/test_sendMessageLater2.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/components/jsmimeemitter.js">mailnews/db/gloda/components/jsmimeemitter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/components/jsmimeemitter.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/components/jsmimeemitter.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/components/jsmimeemitter.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/components/jsmimeemitter.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/components/jsmimeemitter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/content/glodacomplete.xml">mailnews/db/gloda/content/glodacomplete.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/content/glodacomplete.xml">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/content/glodacomplete.xml">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/content/glodacomplete.xml">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/content/glodacomplete.xml">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/content/glodacomplete.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/collection.js">mailnews/db/gloda/modules/collection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/collection.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/collection.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/collection.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/collection.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/collection.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datamodel.js">mailnews/db/gloda/modules/datamodel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datamodel.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datamodel.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datamodel.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datamodel.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datamodel.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datastore.js">mailnews/db/gloda/modules/datastore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datastore.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datastore.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datastore.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datastore.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/datastore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/gloda.js">mailnews/db/gloda/modules/gloda.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/gloda.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/gloda.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/gloda.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/gloda.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/gloda.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/index_msg.js">mailnews/db/gloda/modules/index_msg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/index_msg.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/index_msg.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/index_msg.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/index_msg.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/index_msg.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/indexer.js">mailnews/db/gloda/modules/indexer.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/indexer.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/indexer.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/indexer.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/indexer.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/indexer.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/mimemsg.js">mailnews/db/gloda/modules/mimemsg.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/mimemsg.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/mimemsg.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/mimemsg.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/mimemsg.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/mimemsg.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/msg_search.js">mailnews/db/gloda/modules/msg_search.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/msg_search.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/msg_search.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/msg_search.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/msg_search.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/modules/msg_search.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">mailnews/db/gloda/test/unit/resources/glodaTestHelper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_index_compaction.js">mailnews/db/gloda/test/unit/test_index_compaction.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_index_compaction.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_index_compaction.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_index_compaction.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_index_compaction.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_index_compaction.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_query_core.js">mailnews/db/gloda/test/unit/test_query_core.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_query_core.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_query_core.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_query_core.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_query_core.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/gloda/test/unit/test_query_core.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/public/nsIMsgDatabase.idl">mailnews/db/msgdb/public/nsIMsgDatabase.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/public/nsIMsgDatabase.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/public/nsIMsgDatabase.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/public/nsIMsgDatabase.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/public/nsIMsgDatabase.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/public/nsIMsgDatabase.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/src/nsMsgDatabase.cpp">mailnews/db/msgdb/src/nsMsgDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/src/nsMsgDatabase.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/src/nsMsgDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/src/nsMsgDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/src/nsMsgDatabase.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/db/msgdb/src/nsMsgDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h">mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/fts3/src/fts3_porter.c">mailnews/extensions/fts3/src/fts3_porter.c</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/fts3/src/fts3_porter.c">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/fts3/src/fts3_porter.c">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/fts3/src/fts3_porter.c">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/fts3/src/fts3_porter.c">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/fts3/src/fts3_porter.c">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/Feed.js">mailnews/extensions/newsblog/content/Feed.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/Feed.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/Feed.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/Feed.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/Feed.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/Feed.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/FeedUtils.jsm">mailnews/extensions/newsblog/content/FeedUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/FeedUtils.jsm">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/FeedUtils.jsm">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/FeedUtils.jsm">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/FeedUtils.jsm">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/FeedUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-parser.js">mailnews/extensions/newsblog/content/feed-parser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-parser.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-parser.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-parser.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-parser.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-parser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-subscriptions.js">mailnews/extensions/newsblog/content/feed-subscriptions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-subscriptions.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-subscriptions.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-subscriptions.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-subscriptions.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/newsblog/content/feed-subscriptions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js">mailnews/extensions/smime/content/msgCompSMIMEOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/public/nsIImapMessageSink.idl">mailnews/imap/public/nsIImapMessageSink.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/public/nsIImapMessageSink.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/public/nsIImapMessageSink.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/public/nsIImapMessageSink.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/public/nsIImapMessageSink.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/public/nsIImapMessageSink.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsAutoSyncManager.cpp">mailnews/imap/src/nsAutoSyncManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsAutoSyncManager.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsAutoSyncManager.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsAutoSyncManager.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsAutoSyncManager.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsAutoSyncManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapIncomingServer.cpp">mailnews/imap/src/nsImapIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapIncomingServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapMailFolder.cpp">mailnews/imap/src/nsImapMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapOfflineSync.cpp">mailnews/imap/src/nsImapOfflineSync.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapOfflineSync.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapOfflineSync.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapOfflineSync.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapOfflineSync.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapOfflineSync.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.cpp">mailnews/imap/src/nsImapProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.h">mailnews/imap/src/nsImapProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.cpp">mailnews/imap/src/nsImapServerResponseParser.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.h">mailnews/imap/src/nsImapServerResponseParser.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapServerResponseParser.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapUrl.cpp">mailnews/imap/src/nsImapUrl.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapUrl.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapUrl.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapUrl.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapUrl.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/src/nsImapUrl.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dod.js">mailnews/imap/test/unit/test_dod.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dod.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dod.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dod.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dod.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dod.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dontStatNoSelect.js">mailnews/imap/test/unit/test_dontStatNoSelect.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dontStatNoSelect.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dontStatNoSelect.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dontStatNoSelect.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dontStatNoSelect.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_dontStatNoSelect.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapFilterActions.js">mailnews/imap/test/unit/test_imapFilterActions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapFilterActions.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapFilterActions.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapFilterActions.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapFilterActions.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapFilterActions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHdrChunking.js">mailnews/imap/test/unit/test_imapHdrChunking.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHdrChunking.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHdrChunking.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHdrChunking.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHdrChunking.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHdrChunking.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHighWater.js">mailnews/imap/test/unit/test_imapHighWater.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHighWater.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHighWater.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHighWater.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHighWater.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapHighWater.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">mailnews/imap/test/unit/test_imapStoreMsgOffline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_imapStoreMsgOffline.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_offlinePlayback.js">mailnews/imap/test/unit/test_offlinePlayback.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_offlinePlayback.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_offlinePlayback.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_offlinePlayback.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_offlinePlayback.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/imap/test/unit/test_offlinePlayback.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/MapiMessage.cpp">mailnews/import/outlook/src/MapiMessage.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/MapiMessage.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/MapiMessage.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/MapiMessage.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/MapiMessage.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/MapiMessage.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookImport.h">mailnews/import/outlook/src/nsOutlookImport.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookImport.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookImport.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookImport.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookImport.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookImport.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookSettings.cpp">mailnews/import/outlook/src/nsOutlookSettings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookSettings.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookSettings.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookSettings.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookSettings.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/outlook/src/nsOutlookSettings.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/public/nsIImportAddressBooks.idl">mailnews/import/public/nsIImportAddressBooks.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/public/nsIImportAddressBooks.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/public/nsIImportAddressBooks.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/public/nsIImportAddressBooks.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/public/nsIImportAddressBooks.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/public/nsIImportAddressBooks.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/ImportTranslate.cpp">mailnews/import/src/ImportTranslate.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/ImportTranslate.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/ImportTranslate.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/ImportTranslate.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/ImportTranslate.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/ImportTranslate.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/nsImportTranslator.h">mailnews/import/src/nsImportTranslator.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/nsImportTranslator.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/nsImportTranslator.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/nsImportTranslator.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/nsImportTranslator.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/src/nsImportTranslator.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextAddress.cpp">mailnews/import/text/src/nsTextAddress.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextAddress.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextAddress.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextAddress.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextAddress.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextAddress.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextImport.h">mailnews/import/text/src/nsTextImport.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextImport.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextImport.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextImport.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextImport.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/text/src/nsTextImport.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/vcard/src/nsVCardImport.h">mailnews/import/vcard/src/nsVCardImport.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/vcard/src/nsVCardImport.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/vcard/src/nsVCardImport.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/vcard/src/nsVCardImport.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/vcard/src/nsVCardImport.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/vcard/src/nsVCardImport.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/winlivemail/nsWMImport.h">mailnews/import/winlivemail/nsWMImport.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/winlivemail/nsWMImport.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/winlivemail/nsWMImport.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/winlivemail/nsWMImport.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/winlivemail/nsWMImport.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/import/winlivemail/nsWMImport.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/intl/charsetalias.properties">mailnews/intl/charsetalias.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/intl/charsetalias.properties">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/intl/charsetalias.properties">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/intl/charsetalias.properties">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/intl/charsetalias.properties">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/intl/charsetalias.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/jsaccount/modules/JSAccountUtils.jsm">mailnews/jsaccount/modules/JSAccountUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/jsaccount/modules/JSAccountUtils.jsm">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/jsaccount/modules/JSAccountUtils.jsm">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/jsaccount/modules/JSAccountUtils.jsm">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/jsaccount/modules/JSAccountUtils.jsm">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/jsaccount/modules/JSAccountUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsLocalMailFolder.cpp">mailnews/local/src/nsLocalMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsLocalMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsLocalMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsLocalMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsLocalMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsLocalMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.cpp">mailnews/local/src/nsMailboxProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.h">mailnews/local/src/nsMailboxProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMailboxProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMovemailService.cpp">mailnews/local/src/nsMovemailService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMovemailService.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMovemailService.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMovemailService.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMovemailService.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsMovemailService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsParseMailbox.h">mailnews/local/src/nsParseMailbox.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsParseMailbox.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsParseMailbox.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsParseMailbox.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsParseMailbox.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsParseMailbox.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Protocol.cpp">mailnews/local/src/nsPop3Protocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Protocol.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Protocol.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Protocol.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Protocol.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Protocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Service.h">mailnews/local/src/nsPop3Service.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Service.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Service.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Service.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Service.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Service.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Sink.cpp">mailnews/local/src/nsPop3Sink.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Sink.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Sink.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Sink.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Sink.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/local/src/nsPop3Sink.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mailnews.js">mailnews/mailnews.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mailnews.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mailnews.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mailnews.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mailnews.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mailnews.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/build/msgMapi.idl">mailnews/mapi/mapihook/build/msgMapi.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/build/msgMapi.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/build/msgMapi.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/build/msgMapi.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/build/msgMapi.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/build/msgMapi.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/Registry.cpp">mailnews/mapi/mapihook/src/Registry.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/Registry.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/Registry.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/Registry.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/Registry.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/Registry.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/msgMapiSupport.cpp">mailnews/mapi/mapihook/src/msgMapiSupport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/msgMapiSupport.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/msgMapiSupport.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/msgMapiSupport.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/msgMapiSupport.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mapi/mapihook/src/msgMapiSupport.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/cthandlers/vcard/mimevcrd.cpp">mailnews/mime/cthandlers/vcard/mimevcrd.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/cthandlers/vcard/mimevcrd.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/cthandlers/vcard/mimevcrd.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/cthandlers/vcard/mimevcrd.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/cthandlers/vcard/mimevcrd.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/cthandlers/vcard/mimevcrd.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/jsmime/jsmime.js">mailnews/mime/jsmime/jsmime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/jsmime/jsmime.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/jsmime/jsmime.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/jsmime/jsmime.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/jsmime/jsmime.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/jsmime/jsmime.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/public/nsIMsgHeaderParser.idl">mailnews/mime/public/nsIMsgHeaderParser.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/public/nsIMsgHeaderParser.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/public/nsIMsgHeaderParser.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/public/nsIMsgHeaderParser.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/public/nsIMsgHeaderParser.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/public/nsIMsgHeaderParser.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimehdrs.cpp">mailnews/mime/src/mimehdrs.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimehdrs.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimehdrs.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimehdrs.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimehdrs.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimehdrs.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.cpp">mailnews/mime/src/mimei.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.h">mailnews/mime/src/mimei.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimei.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemalt.cpp">mailnews/mime/src/mimemalt.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemalt.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemalt.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemalt.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemalt.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemalt.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.cpp">mailnews/mime/src/mimemoz2.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.h">mailnews/mime/src/mimemoz2.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemoz2.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemrel.cpp">mailnews/mime/src/mimemrel.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemrel.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemrel.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemrel.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemrel.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemrel.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsg.cpp">mailnews/mime/src/mimemsg.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsg.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsg.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsg.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsg.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsg.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsig.cpp">mailnews/mime/src/mimemsig.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsig.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsig.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsig.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsig.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemsig.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemult.cpp">mailnews/mime/src/mimemult.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemult.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemult.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemult.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemult.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimemult.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimeobj.h">mailnews/mime/src/mimeobj.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimeobj.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimeobj.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimeobj.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimeobj.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimeobj.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimethpl.cpp">mailnews/mime/src/mimethpl.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimethpl.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimethpl.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimethpl.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimethpl.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimethpl.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimetric.cpp">mailnews/mime/src/mimetric.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimetric.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimetric.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimetric.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimetric.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/mimetric.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/nsStreamConverter.cpp">mailnews/mime/src/nsStreamConverter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/nsStreamConverter.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/nsStreamConverter.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/nsStreamConverter.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/nsStreamConverter.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/mime/src/nsStreamConverter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupList.idl">mailnews/news/public/nsINNTPNewsgroupList.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupList.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupList.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupList.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupList.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupList.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupPost.idl">mailnews/news/public/nsINNTPNewsgroupPost.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupPost.idl">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupPost.idl">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupPost.idl">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupPost.idl">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/public/nsINNTPNewsgroupPost.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNNTPProtocol.h">mailnews/news/src/nsNNTPProtocol.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNNTPProtocol.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNNTPProtocol.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNNTPProtocol.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNNTPProtocol.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNNTPProtocol.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNewsFolder.cpp">mailnews/news/src/nsNewsFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNewsFolder.cpp">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNewsFolder.cpp">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNewsFolder.cpp">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNewsFolder.cpp">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNewsFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNntpService.h">mailnews/news/src/nsNntpService.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNntpService.h">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNntpService.h">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNntpService.h">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNntpService.h">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/news/src/nsNntpService.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/fakeserver/nntpd.js">mailnews/test/fakeserver/nntpd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/fakeserver/nntpd.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/fakeserver/nntpd.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/fakeserver/nntpd.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/fakeserver/nntpd.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/fakeserver/nntpd.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/logHelper.js">mailnews/test/resources/logHelper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/logHelper.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/logHelper.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/logHelper.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/logHelper.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/logHelper.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/mailTestUtils.js">mailnews/test/resources/mailTestUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/mailTestUtils.js">file</a> |
<a href="/comm-central/annotate/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/mailTestUtils.js">annotate</a> |
<a href="/comm-central/diff/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/mailTestUtils.js">diff</a> |
<a href="/comm-central/comparison/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/mailTestUtils.js">comparison</a> |
<a href="/comm-central/log/37b26fb2a42136d17d5ee39705a7a8e32a188435/mailnews/test/resources/mailTestUtils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/addrbook/content/abDragDrop.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/addrbook/content/abDragDrop.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -161,17 +161,17 @@ var abDirTreeObserver = {</span>
<a href="#l1.4"></a><span id="l1.4">       return false;</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     var dragSession = dragService.getCurrentSession();</span>
<a href="#l1.7"></a><span id="l1.7">     if (!dragSession)</span>
<a href="#l1.8"></a><span id="l1.8">       return false;</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10">     // XXX Due to bug 373125/bug 349044 we can't specify a default action,</span>
<a href="#l1.11"></a><span id="l1.11">     // so we default to move and this means that the user would have to press</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    // ctrl to copy which most users don't realise.</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    // ctrl to copy which most users don't realize.</span>
<a href="#l1.14"></a><span id="l1.14">     //</span>
<a href="#l1.15"></a><span id="l1.15">     // If target directory is a mailing list, then only allow copies.</span>
<a href="#l1.16"></a><span id="l1.16">     //    if (targetDirectory.isMailList &amp;&amp;</span>
<a href="#l1.17"></a><span id="l1.17">     //   dragSession.dragAction != Ci.nsIDragService.DRAGDROP_ACTION_COPY)</span>
<a href="#l1.18"></a><span id="l1.18">     //return false;</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">     var srcDirectory = GetDirectoryFromURI(srcURI);</span>
<a href="#l1.21"></a><span id="l1.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPChangeLogData.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -198,17 +198,17 @@ nsresult nsAbLDAPProcessChangeLogData::O</span>
<a href="#l2.4"></a><span id="l2.4">                 // Now start the appropriate query</span>
<a href="#l2.5"></a><span id="l2.5">                 rv = OnSearchRootDSEDone();</span>
<a href="#l2.6"></a><span id="l2.6">                 break;</span>
<a href="#l2.7"></a><span id="l2.7">              }</span>
<a href="#l2.8"></a><span id="l2.8">             case kFindingChanges:</span>
<a href="#l2.9"></a><span id="l2.9">                 rv = OnFindingChangesDone();</span>
<a href="#l2.10"></a><span id="l2.10">                 // If success we return from here since</span>
<a href="#l2.11"></a><span id="l2.11">                 // this changes state to kReplicatingChanges</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                // and it falls thru into the if clause below.</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                // and it falls through into the if clause below.</span>
<a href="#l2.14"></a><span id="l2.14">                 if (NS_SUCCEEDED(rv))</span>
<a href="#l2.15"></a><span id="l2.15">                     return rv;</span>
<a href="#l2.16"></a><span id="l2.16">                 break;</span>
<a href="#l2.17"></a><span id="l2.17">             case kReplicatingAll :</span>
<a href="#l2.18"></a><span id="l2.18">                 return nsAbLDAPProcessReplicationData::OnLDAPSearchResult(aMessage);</span>
<a href="#l2.19"></a><span id="l2.19">             } // end of switch</span>
<a href="#l2.20"></a><span id="l2.20">         }</span>
<a href="#l2.21"></a><span id="l2.21">         else</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPChangeLogQuery.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -132,17 +132,17 @@ NS_IMETHODIMP nsAbLDAPChangeLogQuery::Qu</span>
<a href="#l3.4"></a><span id="l3.4">     return NS_ERROR_UNEXPECTED;</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">   int32_t lastChangeNumber;</span>
<a href="#l3.7"></a><span id="l3.7">   nsresult rv = mDirectory-&gt;GetLastChangeNumber(&amp;lastChangeNumber);</span>
<a href="#l3.8"></a><span id="l3.8">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">   // make sure that the filter here just have one condition</span>
<a href="#l3.11"></a><span id="l3.11">   // and should not be enclosed in enclosing brackets.</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  // also condition '&gt;' doesnot work, it should be '&gt;='/</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  // also condition '&gt;' does not work, it should be '&gt;='/</span>
<a href="#l3.14"></a><span id="l3.14">   nsAutoCString filter (NS_LITERAL_CSTRING(&quot;changenumber&gt;=&quot;));</span>
<a href="#l3.15"></a><span id="l3.15">   filter.AppendInt(lastChangeNumber + 1);</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">   rv = CreateNewLDAPOperation();</span>
<a href="#l3.18"></a><span id="l3.18">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20">   return mOperation-&gt;SearchExt(aChangeLogDN, nsILDAPURL::SCOPE_ONELEVEL, filter,</span>
<a href="#l3.21"></a><span id="l3.21">                                sizeof(sChangeLogEntryAttribs),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPDirectory.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPDirectory.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -498,17 +498,17 @@ NS_IMETHODIMP nsAbLDAPDirectory::UseForA</span>
<a href="#l4.4"></a><span id="l4.4">         bool overrideGlobalPref = false;</span>
<a href="#l4.5"></a><span id="l4.5">         identity-&gt;GetOverrideGlobalPref(&amp;overrideGlobalPref);</span>
<a href="#l4.6"></a><span id="l4.6">         if (overrideGlobalPref)</span>
<a href="#l4.7"></a><span id="l4.7">           identity-&gt;GetDirectoryServer(prefName);</span>
<a href="#l4.8"></a><span id="l4.8">       }</span>
<a href="#l4.9"></a><span id="l4.9">     }</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">     // If the preference name is still empty but useDirectory is false, then</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    // the global one is not available, nor is the overriden one.</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    // the global one is not available, nor is the overridden one.</span>
<a href="#l4.14"></a><span id="l4.14">     if (prefName.IsEmpty() &amp;&amp; !useDirectory)</span>
<a href="#l4.15"></a><span id="l4.15">       return NS_OK;</span>
<a href="#l4.16"></a><span id="l4.16">   }</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18">   // If we failed to get the identity preference, or the pref name is empty</span>
<a href="#l4.19"></a><span id="l4.19">   // try the global preference.</span>
<a href="#l4.20"></a><span id="l4.20">   if (prefName.IsEmpty())</span>
<a href="#l4.21"></a><span id="l4.21">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDIFService.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDIFService.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -261,17 +261,17 @@ nsresult nsAbLDIFService::str_parse_line</span>
<a href="#l5.4"></a><span id="l5.4"> }</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6"> /*</span>
<a href="#l5.7"></a><span id="l5.7">  * str_getline - return the next &quot;line&quot; (minus newline) of input from a</span>
<a href="#l5.8"></a><span id="l5.8">  * string buffer of lines separated by newlines, terminated by \n\n</span>
<a href="#l5.9"></a><span id="l5.9">  * or \0.  this routine handles continued lines, bundling them into</span>
<a href="#l5.10"></a><span id="l5.10">  * a single big line before returning.  if a line begins with a white</span>
<a href="#l5.11"></a><span id="l5.11">  * space character, it is a continuation of the previous line. the white</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">- * space character (nb: only one char), and preceeding newline are changed</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+ * space character (nb: only one char), and preceding newline are changed</span>
<a href="#l5.14"></a><span id="l5.14">  * into CONTINUED_LINE_MARKER chars, to be deleted later by the</span>
<a href="#l5.15"></a><span id="l5.15">  * str_parse_line() routine above.</span>
<a href="#l5.16"></a><span id="l5.16">  *</span>
<a href="#l5.17"></a><span id="l5.17">  * it takes a pointer to a pointer to the buffer on the first call,</span>
<a href="#l5.18"></a><span id="l5.18">  * which it updates and must be supplied on subsequent calls.</span>
<a href="#l5.19"></a><span id="l5.19">  */</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21"> char* nsAbLDIFService::str_getline(char **next) const</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbManager.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbManager.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -41,17 +41,17 @@ struct ExportAttributesTableStruct</span>
<a href="#l6.4"></a><span id="l6.4">   uint32_t plainTextStringID;</span>
<a href="#l6.5"></a><span id="l6.5"> };</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> // our schema is not fixed yet, but we still want some sort of objectclass</span>
<a href="#l6.8"></a><span id="l6.8"> // for now, use obsolete in the class name, hinting that this will change</span>
<a href="#l6.9"></a><span id="l6.9"> // see bugs bug #116692 and #118454</span>
<a href="#l6.10"></a><span id="l6.10"> #define MOZ_AB_OBJECTCLASS &quot;mozillaAbPersonAlpha&quot;</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-// for now, the oder of the attributes with true for includeForPlainText</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+// for now, the order of the attributes with true for includeForPlainText</span>
<a href="#l6.14"></a><span id="l6.14"> // should be in the same order as they are in the import code</span>
<a href="#l6.15"></a><span id="l6.15"> // see importMsgProperties and nsImportStringBundle.</span>
<a href="#l6.16"></a><span id="l6.16"> //</span>
<a href="#l6.17"></a><span id="l6.17"> // XXX todo, merge with what's in nsAbLDAPProperties.cpp, so we can</span>
<a href="#l6.18"></a><span id="l6.18"> // use this for LDAP and LDIF export</span>
<a href="#l6.19"></a><span id="l6.19"> //</span>
<a href="#l6.20"></a><span id="l6.20"> // here's how we're coming up with the ldapPropertyName values</span>
<a href="#l6.21"></a><span id="l6.21"> // if they are specified in RFC 2798, use them</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/addrbook/src/nsVCardObj.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsVCardObj.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -602,18 +602,18 @@ static const char *AAlarmFields[] = {</span>
<a href="#l7.4"></a><span id="l7.4"> };</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> static const char *coolTalkFields[] = {</span>
<a href="#l7.7"></a><span id="l7.7">   VCCooltalkAddress,</span>
<a href="#l7.8"></a><span id="l7.8">   VCUseServer,</span>
<a href="#l7.9"></a><span id="l7.9">   0</span>
<a href="#l7.10"></a><span id="l7.10"> };</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-/* ExDate -- has unamed fields */</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-/* RDate -- has unamed fields */</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+/* ExDate -- has unnamed fields */</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+/* RDate -- has unnamed fields */</span>
<a href="#l7.16"></a><span id="l7.16"> </span>
<a href="#l7.17"></a><span id="l7.17"> static const char *DAlarmFields[] = {</span>
<a href="#l7.18"></a><span id="l7.18">   VCRunTimeProp,</span>
<a href="#l7.19"></a><span id="l7.19">   VCSnoozeTimeProp,</span>
<a href="#l7.20"></a><span id="l7.20">   VCRepeatCountProp,</span>
<a href="#l7.21"></a><span id="l7.21">   VCDisplayStringProp,</span>
<a href="#l7.22"></a><span id="l7.22">   0</span>
<a href="#l7.23"></a><span id="l7.23"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/base/content/charsetList.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/base/content/charsetList.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -49,17 +49,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">             return 1;</span>
<a href="#l8.5"></a><span id="l8.5">           return 0;</span>
<a href="#l8.6"></a><span id="l8.6">         });</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">         menuLabels.forEach(function(item) {</span>
<a href="#l8.9"></a><span id="l8.9">           aMenuList.appendItem(item.label, item.value);</span>
<a href="#l8.10"></a><span id="l8.10">         });</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-        // Selecting appropiate menu item corresponding to preference stored</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+        // Selecting appropriate menu item corresponding to preference stored</span>
<a href="#l8.14"></a><span id="l8.14">         // value.</span>
<a href="#l8.15"></a><span id="l8.15">         if (this.hasAttribute(&quot;preference&quot;)) {</span>
<a href="#l8.16"></a><span id="l8.16">           let preference = Services.prefs.getComplexValue(</span>
<a href="#l8.17"></a><span id="l8.17">             this.getAttribute(&quot;preference&quot;), Ci.nsIPrefLocalizedString);</span>
<a href="#l8.18"></a><span id="l8.18">           this.value = preference.data;</span>
<a href="#l8.19"></a><span id="l8.19">         }</span>
<a href="#l8.20"></a><span id="l8.20">      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l8.21"></a><span id="l8.21">     &lt;/implementation&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/content/dateFormat.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/content/dateFormat.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -36,17 +36,17 @@ function initLocaleShortDateFormat()</span>
<a href="#l9.4"></a><span id="l9.4">       if ( arrayOfStrings.length == 3 )</span>
<a href="#l9.5"></a><span id="l9.5">       {</span>
<a href="#l9.6"></a><span id="l9.6">         gSearchDateSeparator = possibleSeparators[i];</span>
<a href="#l9.7"></a><span id="l9.7">         break;</span>
<a href="#l9.8"></a><span id="l9.8">       }</span>
<a href="#l9.9"></a><span id="l9.9">     }</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">     // check the format option</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-    if ( arrayOfStrings.length != 3 )       // no successfull split</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+    if ( arrayOfStrings.length != 3 )       // no successful split</span>
<a href="#l9.14"></a><span id="l9.14">     {</span>
<a href="#l9.15"></a><span id="l9.15">       dump(&quot;getLocaleShortDateFormat: could not analyze the date format, defaulting to mm/dd/yyyy\n&quot;);</span>
<a href="#l9.16"></a><span id="l9.16">     }</span>
<a href="#l9.17"></a><span id="l9.17">     else</span>
<a href="#l9.18"></a><span id="l9.18">     {</span>
<a href="#l9.19"></a><span id="l9.19">       // the date will contain a zero if that system settings include leading zeros</span>
<a href="#l9.20"></a><span id="l9.20">       gSearchDateLeadingZeros = dateString.includes(&quot;0&quot;);</span>
<a href="#l9.21"></a><span id="l9.21"> </span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -74,17 +74,17 @@ function initLocaleShortDateFormat()</span>
<a href="#l9.23"></a><span id="l9.23">   }</span>
<a href="#l9.24"></a><span id="l9.24"> }</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26"> function initializeSearchDateFormat()</span>
<a href="#l9.27"></a><span id="l9.27"> {</span>
<a href="#l9.28"></a><span id="l9.28">   if (gSearchDateFormat)</span>
<a href="#l9.29"></a><span id="l9.29">     return;</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  // get a search date format option and a seprator</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  // get a search date format option and a separator</span>
<a href="#l9.33"></a><span id="l9.33">   try {</span>
<a href="#l9.34"></a><span id="l9.34">     gSearchDateFormat =</span>
<a href="#l9.35"></a><span id="l9.35">       Services.prefs.getComplexValue(&quot;mailnews.search_date_format&quot;,</span>
<a href="#l9.36"></a><span id="l9.36">                                      Ci.nsIPrefLocalizedString);</span>
<a href="#l9.37"></a><span id="l9.37">     gSearchDateFormat = parseInt(gSearchDateFormat);</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39">     // if the option is 0 then try to use the format of the current locale</span>
<a href="#l9.40"></a><span id="l9.40">     if (gSearchDateFormat == 0)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/content/folderProps.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/content/folderProps.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -315,17 +315,17 @@ function hideShowControls(serverType)</span>
<a href="#l10.4"></a><span id="l10.4">       if (hideForTokens[j] == serverType) {</span>
<a href="#l10.5"></a><span id="l10.5">         hideForBool = true;</span>
<a href="#l10.6"></a><span id="l10.6">         break;</span>
<a href="#l10.7"></a><span id="l10.7">       }</span>
<a href="#l10.8"></a><span id="l10.8">     }</span>
<a href="#l10.9"></a><span id="l10.9">     control.hidden = hideForBool;</span>
<a href="#l10.10"></a><span id="l10.10">   }</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  // hide the priviliges button if the imap folder doesn't have an admin url</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  // hide the privileges button if the imap folder doesn't have an admin url</span>
<a href="#l10.14"></a><span id="l10.14">   // mabye should leave this hidden by default and only show it in this case instead</span>
<a href="#l10.15"></a><span id="l10.15">   try {</span>
<a href="#l10.16"></a><span id="l10.16">     var imapFolder = gMsgFolder.QueryInterface(Ci.nsIMsgImapMailFolder);</span>
<a href="#l10.17"></a><span id="l10.17">     if (imapFolder)</span>
<a href="#l10.18"></a><span id="l10.18">     {</span>
<a href="#l10.19"></a><span id="l10.19">       var privilegesButton = document.getElementById(&quot;imap.FolderPrivileges&quot;);</span>
<a href="#l10.20"></a><span id="l10.20">       if (privilegesButton)</span>
<a href="#l10.21"></a><span id="l10.21">       {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/content/msgAccountCentral.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/content/msgAccountCentral.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5"> ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7"> var selectedServer = null;</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9"> function OnInit()</span>
<a href="#l11.10"></a><span id="l11.10"> {</span>
<a href="#l11.11"></a><span id="l11.11">     // Set the header for the page.</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    // Title containts the brand name of the application and the account</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    // Title contains the brand name of the application and the account</span>
<a href="#l11.14"></a><span id="l11.14">     // type (mail/news) and the name of the account</span>
<a href="#l11.15"></a><span id="l11.15">     try {</span>
<a href="#l11.16"></a><span id="l11.16">         let msgFolder    = null;</span>
<a href="#l11.17"></a><span id="l11.17">         let title;</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19">         // Get the brand name</span>
<a href="#l11.20"></a><span id="l11.20">         let brandName = document.getElementById(&quot;bundle_brand&quot;)</span>
<a href="#l11.21"></a><span id="l11.21">                                 .getString(&quot;brandShortName&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/prefs/content/AccountManager.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/prefs/content/AccountManager.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -47,17 +47,17 @@ var currentPageId;</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5"> var pendingAccount;</span>
<a href="#l12.6"></a><span id="l12.6"> var pendingPageId;</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> /**</span>
<a href="#l12.9"></a><span id="l12.9">  * This array contains filesystem folders that are deemed inappropriate</span>
<a href="#l12.10"></a><span id="l12.10">  * for use as the local directory pref for message storage.</span>
<a href="#l12.11"></a><span id="l12.11">  * It is global to allow extensions to add to/remove from it if needed.</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">- * Extentions adding new server types should first consider setting</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+ * Extensions adding new server types should first consider setting</span>
<a href="#l12.14"></a><span id="l12.14">  * nsIMsgProtocolInfo(of the server type).defaultLocalPath properly</span>
<a href="#l12.15"></a><span id="l12.15">  * so that the test will allow that directory automatically.</span>
<a href="#l12.16"></a><span id="l12.16">  * See the checkLocalDirectoryIsSafe function for description of the members.</span>
<a href="#l12.17"></a><span id="l12.17">  */</span>
<a href="#l12.18"></a><span id="l12.18"> var gDangerousLocalStorageDirs = [</span>
<a href="#l12.19"></a><span id="l12.19">   // profile folder</span>
<a href="#l12.20"></a><span id="l12.20">   { dirsvc: &quot;ProfD&quot;,    OS: null },</span>
<a href="#l12.21"></a><span id="l12.21">   // GRE install folder</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -1535,17 +1535,17 @@ var gAccountTree = {</span>
<a href="#l12.23"></a><span id="l12.23"> </span>
<a href="#l12.24"></a><span id="l12.24">         accountName = server.prettyName;</span>
<a href="#l12.25"></a><span id="l12.25"> </span>
<a href="#l12.26"></a><span id="l12.26">         // Now add our panels.</span>
<a href="#l12.27"></a><span id="l12.27">         let idents = MailServices.accounts.getIdentitiesForServer(server);</span>
<a href="#l12.28"></a><span id="l12.28">         if (idents.length) {</span>
<a href="#l12.29"></a><span id="l12.29">           panelsToKeep.push(panels[0]); // The server panel is valid</span>
<a href="#l12.30"></a><span id="l12.30">           panelsToKeep.push(panels[1]); // also the copies panel</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-          panelsToKeep.push(panels[4]); // and addresssing</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+          panelsToKeep.push(panels[4]); // and addressing</span>
<a href="#l12.33"></a><span id="l12.33">         }</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35">         // Everyone except News, RSS and IM has a junk panel</span>
<a href="#l12.36"></a><span id="l12.36">         // XXX: unextensible!</span>
<a href="#l12.37"></a><span id="l12.37">         // The existence of server.spamSettings can't currently be used for this.</span>
<a href="#l12.38"></a><span id="l12.38">         if (server.type != &quot;nntp&quot; &amp;&amp; server.type != &quot;rss&quot; &amp;&amp; server.type != &quot;im&quot;)</span>
<a href="#l12.39"></a><span id="l12.39">           panelsToKeep.push(panels[5]);</span>
<a href="#l12.40"></a><span id="l12.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/base/prefs/content/aw-identity.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/base/prefs/content/aw-identity.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -96,17 +96,17 @@ function clearEmailTextItems()</span>
<a href="#l13.4"></a><span id="l13.4">   if (emailDescText.hasChildNodes())</span>
<a href="#l13.5"></a><span id="l13.5">     emailDescText.firstChild.remove();</span>
<a href="#l13.6"></a><span id="l13.6"> </span>
<a href="#l13.7"></a><span id="l13.7">   var postEmailText = document.getElementById(&quot;postEmailText&quot;);</span>
<a href="#l13.8"></a><span id="l13.8">   postEmailText.setAttribute(&quot;value&quot;, &quot;&quot;);</span>
<a href="#l13.9"></a><span id="l13.9">   postEmailText.hidden = true;</span>
<a href="#l13.10"></a><span id="l13.10"> }</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-// Use email example data that ISP has provided. ISP data, if avaialble</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+// Use email example data that ISP has provided. ISP data, if available</span>
<a href="#l13.14"></a><span id="l13.14"> // for the choice user has made, will be read into CurrentAccountData.</span>
<a href="#l13.15"></a><span id="l13.15"> // Default example data from properties will be used when the info is missing.</span>
<a href="#l13.16"></a><span id="l13.16"> function setEmailDescriptionText()</span>
<a href="#l13.17"></a><span id="l13.17"> {</span>
<a href="#l13.18"></a><span id="l13.18">     var emailDescText = document.getElementById(&quot;emailDescText&quot;);</span>
<a href="#l13.19"></a><span id="l13.19">     var emailFieldLabel = document.getElementById(&quot;emailFieldLabel&quot;);</span>
<a href="#l13.20"></a><span id="l13.20">     var currentAccountData = parent.gCurrentAccountData;</span>
<a href="#l13.21"></a><span id="l13.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/prefs/content/aw-incoming.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/prefs/content/aw-incoming.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -96,17 +96,17 @@ function incomingPageInit() {</span>
<a href="#l14.4"></a><span id="l14.4">   // Server type selection (pop3 or imap) is for mail accounts only</span>
<a href="#l14.5"></a><span id="l14.5">   var pageData = parent.GetPageData();</span>
<a href="#l14.6"></a><span id="l14.6">   var isMailAccount = pageData.accounttype.mailaccount.value;</span>
<a href="#l14.7"></a><span id="l14.7">   var isOtherAccount = pageData.accounttype.otheraccount.value;</span>
<a href="#l14.8"></a><span id="l14.8">   if (isMailAccount &amp;&amp; !gHideIncoming) {</span>
<a href="#l14.9"></a><span id="l14.9">     var serverTypeRadioGroup = document.getElementById(&quot;servertype&quot;);</span>
<a href="#l14.10"></a><span id="l14.10">     /*</span>
<a href="#l14.11"></a><span id="l14.11">      * Check to see if the radiogroup has any value. If there is no</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-     * value, this must be the first time user visting this page in the</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+     * value, this must be the first time user visiting this page in the</span>
<a href="#l14.14"></a><span id="l14.14">      * account setup process. So, the default is set to pop3. If there</span>
<a href="#l14.15"></a><span id="l14.15">      * is a value (it's used automatically), user has already visited</span>
<a href="#l14.16"></a><span id="l14.16">      * page and server type selection is done. Once user visits the page,</span>
<a href="#l14.17"></a><span id="l14.17">      * the server type value from then on will persist (whether the selection</span>
<a href="#l14.18"></a><span id="l14.18">      * came from the default or the user action).</span>
<a href="#l14.19"></a><span id="l14.19">      */</span>
<a href="#l14.20"></a><span id="l14.20">     if (!serverTypeRadioGroup.value) {</span>
<a href="#l14.21"></a><span id="l14.21">       /*</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/public/nsIMapiRegistry.idl</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/public/nsIMapiRegistry.idl</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -32,17 +32,17 @@ interface nsIMapiRegistry: nsISupports {</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5">    /** This will bring the dialog asking the user if he/she wants to set</span>
<a href="#l15.6"></a><span id="l15.6">     * Mozilla as default Mail Client.</span>
<a href="#l15.7"></a><span id="l15.7">     * Call this only if Mozilla is not the default Mail client</span>
<a href="#l15.8"></a><span id="l15.8">     */</span>
<a href="#l15.9"></a><span id="l15.9">    void showMailIntegrationDialog(in mozIDOMWindowProxy parentWindow);</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">    /* After being installed, when we first launch, make sure we add the correct</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    OS registry entries to make us show up as regsitered mail and news client</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+    OS registry entries to make us show up as registered mail and news client</span>
<a href="#l15.14"></a><span id="l15.14">     in the OS</span>
<a href="#l15.15"></a><span id="l15.15">    */</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17">    void registerMailAndNewsClient();</span>
<a href="#l15.18"></a><span id="l15.18"> };</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20"> %{C++</span>
<a href="#l15.21"></a><span id="l15.21"> #define NS_IMAPIREGISTRY_CONTRACTID    &quot;@mozilla.org/mapiregistry;1&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/public/nsIMsgCopyServiceListener.idl</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/public/nsIMsgCopyServiceListener.idl</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -21,30 +21,30 @@ interface nsIMsgCopyServiceListener : ns</span>
<a href="#l16.4"></a><span id="l16.4">      * Notify the observer that progress as occurred for the message copy</span>
<a href="#l16.5"></a><span id="l16.5">      * aProgress -</span>
<a href="#l16.6"></a><span id="l16.6">      * aProgressMax -</span>
<a href="#l16.7"></a><span id="l16.7">      */</span>
<a href="#l16.8"></a><span id="l16.8">     void OnProgress(in uint32_t aProgress,</span>
<a href="#l16.9"></a><span id="l16.9">                     in uint32_t aProgressMax);</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11">     /**</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-     * Setting newly created message key. This method is taylored specifically</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-     * for nsIMsgCopyService::CopyFileMessage() when saveing Drafts/Templates.</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+     * Setting newly created message key. This method is tailored specifically</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+     * for nsIMsgCopyService::CopyFileMessage() when saving Drafts/Templates.</span>
<a href="#l16.16"></a><span id="l16.16">      * We need to have a way to inform the client what's the key of the newly</span>
<a href="#l16.17"></a><span id="l16.17">      * created message.</span>
<a href="#l16.18"></a><span id="l16.18">      * aKey -</span>
<a href="#l16.19"></a><span id="l16.19">      */</span>
<a href="#l16.20"></a><span id="l16.20">     void SetMessageKey(in nsMsgKey aKey);</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22">     /**</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-     * Getting the file message message ID. This method is taylored</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineplus">+     * Getting the file message message ID. This method is tailored</span>
<a href="#l16.25"></a><span id="l16.25">      * specifically for nsIMsgCopyService::CopyFileMessage() when saving</span>
<a href="#l16.26"></a><span id="l16.26">      * Drafts/Templates. In order to work with imap server which doesn't</span>
<a href="#l16.27"></a><span id="l16.27">      * support uidplus we have to use search comman to retrieve the key of</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-     * newly created message. Message ID generated by the compose gurantee its</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+     * newly created message. Message ID generated by the compose guarantee its</span>
<a href="#l16.30"></a><span id="l16.30">      * uniqueness.</span>
<a href="#l16.31"></a><span id="l16.31">      * aMessageId -</span>
<a href="#l16.32"></a><span id="l16.32">      */</span>
<a href="#l16.33"></a><span id="l16.33">     void GetMessageId(out ACString aMessageId);</span>
<a href="#l16.34"></a><span id="l16.34"> </span>
<a href="#l16.35"></a><span id="l16.35">     /**</span>
<a href="#l16.36"></a><span id="l16.36">      * Notify the observer that the message copied operation has completed.</span>
<a href="#l16.37"></a><span id="l16.37">      * This method is called regardless of whether the the operation was</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/public/nsIMsgDBView.idl</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/public/nsIMsgDBView.idl</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -495,17 +495,17 @@ interface nsIMsgDBView : nsISupports</span>
<a href="#l17.4"></a><span id="l17.4"> /* this interface is rapidly morphing from a command updater interface into a more generic</span>
<a href="#l17.5"></a><span id="l17.5">    FE updater interface to handle changes in the view</span>
<a href="#l17.6"></a><span id="l17.6"> */</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8"> [scriptable, uuid(ce8f52ee-e742-4b31-8bdd-2b3a8168a117)]</span>
<a href="#l17.9"></a><span id="l17.9"> interface nsIMsgDBViewCommandUpdater : nsISupports</span>
<a href="#l17.10"></a><span id="l17.10"> {</span>
<a href="#l17.11"></a><span id="l17.11">   /* Eventually we'll flush this out into some kind of rich interface</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  which may take specifc selection changed type notifications like</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  which may take specific selection changed type notifications like</span>
<a href="#l17.14"></a><span id="l17.14">   no selections, single selection, multi-selection, etc. For starters,</span>
<a href="#l17.15"></a><span id="l17.15">   we are going to keep it generic. The back end will only push an update</span>
<a href="#l17.16"></a><span id="l17.16">   command status when the # of selected items changes.</span>
<a href="#l17.17"></a><span id="l17.17">   */</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19">   void updateCommandStatus();</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">   /* displayed message has changed */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/public/nsIMsgIdentity.idl</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/public/nsIMsgIdentity.idl</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -141,17 +141,17 @@ interface nsIMsgIdentity : nsISupports {</span>
<a href="#l18.4"></a><span id="l18.4">    */</span>
<a href="#l18.5"></a><span id="l18.5">   attribute ACString fccFolderPickerMode;</span>
<a href="#l18.6"></a><span id="l18.6">   attribute ACString draftsFolderPickerMode;</span>
<a href="#l18.7"></a><span id="l18.7">   attribute ACString archivesFolderPickerMode;</span>
<a href="#l18.8"></a><span id="l18.8">   attribute ACString tmplFolderPickerMode;</span>
<a href="#l18.9"></a><span id="l18.9">   /** @} */</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11">   // Don't call bccSelf, bccOthers, and bccList directly, they are</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  // only used for migration and backward compatability. Use doBcc</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  // only used for migration and backward compatibility. Use doBcc</span>
<a href="#l18.14"></a><span id="l18.14">   // and doBccList instead.</span>
<a href="#l18.15"></a><span id="l18.15">   attribute boolean bccSelf;</span>
<a href="#l18.16"></a><span id="l18.16">   attribute boolean bccOthers;</span>
<a href="#l18.17"></a><span id="l18.17">   attribute ACString bccList;</span>
<a href="#l18.18"></a><span id="l18.18"> </span>
<a href="#l18.19"></a><span id="l18.19">   attribute boolean doCc;</span>
<a href="#l18.20"></a><span id="l18.20">   attribute AUTF8String doCcList;</span>
<a href="#l18.21"></a><span id="l18.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/base/public/nsIMsgShutdown.idl</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/base/public/nsIMsgShutdown.idl</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -6,17 +6,17 @@</span>
<a href="#l19.4"></a><span id="l19.4"> interface nsIUrlListener;</span>
<a href="#l19.5"></a><span id="l19.5"> interface nsIMsgWindow;</span>
<a href="#l19.6"></a><span id="l19.6"> interface nsIWebProgressListener;</span>
<a href="#l19.7"></a><span id="l19.7"> </span>
<a href="#l19.8"></a><span id="l19.8"> [scriptable, uuid(D1B43428-B631-4629-B691-AB0E01A2DB4B)]</span>
<a href="#l19.9"></a><span id="l19.9"> interface nsIMsgShutdownTask : nsISupports</span>
<a href="#l19.10"></a><span id="l19.10"> {</span>
<a href="#l19.11"></a><span id="l19.11">   /**</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-   * Inform the caller wheter or not the task needs to be run. This method</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+   * Inform the caller whether or not the task needs to be run. This method</span>
<a href="#l19.14"></a><span id="l19.14">    * gives the task the flexibility to cancel running a task on shutdown</span>
<a href="#l19.15"></a><span id="l19.15">    * if nothing needs to be run.</span>
<a href="#l19.16"></a><span id="l19.16">    */</span>
<a href="#l19.17"></a><span id="l19.17">   readonly attribute boolean needsToRunTask;</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19">   /**</span>
<a href="#l19.20"></a><span id="l19.20">    * At shutdown-time, this function will be called to all registered implementors.</span>
<a href="#l19.21"></a><span id="l19.21">    * Shutdown will be temporarily postponed until |OnStopRequest()| has been called</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/base/search/public/nsIMsgFilterList.idl</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/base/search/public/nsIMsgFilterList.idl</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -59,17 +59,17 @@ interface nsIMsgFilterList : nsISupports</span>
<a href="#l20.4"></a><span id="l20.4">     attribute boolean loggingEnabled;</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6">     nsIMsgFilter createFilter(in AString name);</span>
<a href="#l20.7"></a><span id="l20.7"> </span>
<a href="#l20.8"></a><span id="l20.8">     void saveToFile(in nsIOutputStream stream);</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10">     void parseCondition(in nsIMsgFilter aFilter, in string condition);</span>
<a href="#l20.11"></a><span id="l20.11">     // this is temporary so that we can save the filterlist to disk</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    // without knowing where the filters were read from intially</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    // without knowing where the filters were read from initially</span>
<a href="#l20.14"></a><span id="l20.14">     // (such as the filter list dialog)</span>
<a href="#l20.15"></a><span id="l20.15">     attribute nsIFile defaultFile;</span>
<a href="#l20.16"></a><span id="l20.16">     void saveToDefaultFile();</span>
<a href="#l20.17"></a><span id="l20.17"> </span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19">     // marking noscript because headers is a null-separated list</span>
<a href="#l20.20"></a><span id="l20.20">     // of strings, which is not scriptable</span>
<a href="#l20.21"></a><span id="l20.21">     [noscript]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/base/search/public/nsIMsgSearchSession.idl</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/base/search/public/nsIMsgSearchSession.idl</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -89,17 +89,17 @@ interface nsIMsgSearchSession :  nsISupp</span>
<a href="#l21.4"></a><span id="l21.4">   /* add a scope (e.g. a mail folder) to the search */</span>
<a href="#l21.5"></a><span id="l21.5">   void addScopeTerm(in nsMsgSearchScopeValue scope,</span>
<a href="#l21.6"></a><span id="l21.6">                     in nsIMsgFolder folder);</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8">   void addDirectoryScopeTerm(in nsMsgSearchScopeValue scope);</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10">   void clearScopes();</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  /* Call this function everytime the scope changes! It informs the FE if</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  /* Call this function every time the scope changes! It informs the FE if</span>
<a href="#l21.14"></a><span id="l21.14">      the current scope support custom header use. FEs should not display the</span>
<a href="#l21.15"></a><span id="l21.15">      custom header dialog if custom headers are not supported */</span>
<a href="#l21.16"></a><span id="l21.16">   [noscript] boolean ScopeUsesCustomHeaders(in nsMsgSearchScopeValue scope,</span>
<a href="#l21.17"></a><span id="l21.17">                                  /* could be a folder or server based on scope */</span>
<a href="#l21.18"></a><span id="l21.18">                                  in voidPtr selection,</span>
<a href="#l21.19"></a><span id="l21.19">                                  in boolean forFilters);</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21">   /* use this to determine if your attribute is a string attrib */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/base/search/public/nsIMsgTraitService.idl</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/base/search/public/nsIMsgTraitService.idl</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -3,17 +3,17 @@</span>
<a href="#l22.4"></a><span id="l22.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l22.5"></a><span id="l22.5"> </span>
<a href="#l22.6"></a><span id="l22.6">  /**</span>
<a href="#l22.7"></a><span id="l22.7">   * This interface provides management of traits that are used to categorize</span>
<a href="#l22.8"></a><span id="l22.8">   * messages. A trait is some characteristic of a message, such as being &quot;junk&quot;</span>
<a href="#l22.9"></a><span id="l22.9">   * or &quot;personal&quot;, that may be discoverable by analysis of the message.</span>
<a href="#l22.10"></a><span id="l22.10">   *</span>
<a href="#l22.11"></a><span id="l22.11">   * Traits are described by a universal identifier &quot;id&quot; as a string, as well</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  * as a local integer identifer &quot;index&quot;. One purpose of this service is to</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  * as a local integer identifier &quot;index&quot;. One purpose of this service is to</span>
<a href="#l22.14"></a><span id="l22.14">   * provide the mapping between those forms.</span>
<a href="#l22.15"></a><span id="l22.15">   *</span>
<a href="#l22.16"></a><span id="l22.16">   * Recommended (but not required) format for id:</span>
<a href="#l22.17"></a><span id="l22.17">   * &quot;extensionName@example.org#traitName&quot;</span>
<a href="#l22.18"></a><span id="l22.18">   */</span>
<a href="#l22.19"></a><span id="l22.19"> </span>
<a href="#l22.20"></a><span id="l22.20"> #include &quot;nsISupports.idl&quot;</span>
<a href="#l22.21"></a><span id="l22.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgSearchTerm.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgSearchTerm.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -75,17 +75,17 @@ nsMsgSearchAttribEntry SearchAttribEntry</span>
<a href="#l23.4"></a><span id="l23.4">     {nsMsgSearchAttrib::ToOrCC,     &quot;to or cc&quot;},</span>
<a href="#l23.5"></a><span id="l23.5">     {nsMsgSearchAttrib::AllAddresses, &quot;all addresses&quot;},</span>
<a href="#l23.6"></a><span id="l23.6">     {nsMsgSearchAttrib::AgeInDays,  &quot;age in days&quot;},</span>
<a href="#l23.7"></a><span id="l23.7">     {nsMsgSearchAttrib::Label,      &quot;label&quot;},</span>
<a href="#l23.8"></a><span id="l23.8">     {nsMsgSearchAttrib::Keywords,   &quot;tag&quot;},</span>
<a href="#l23.9"></a><span id="l23.9">     {nsMsgSearchAttrib::Size,       &quot;size&quot;},</span>
<a href="#l23.10"></a><span id="l23.10">     // this used to be nsMsgSearchAttrib::SenderInAddressBook</span>
<a href="#l23.11"></a><span id="l23.11">     // we used to have two Sender menuitems</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    // for backward compatability, we can still parse</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    // for backward compatibility, we can still parse</span>
<a href="#l23.14"></a><span id="l23.14">     // the old style.  see bug #179803</span>
<a href="#l23.15"></a><span id="l23.15">     {nsMsgSearchAttrib::Sender,     &quot;from in ab&quot;},</span>
<a href="#l23.16"></a><span id="l23.16">     {nsMsgSearchAttrib::JunkStatus, &quot;junk status&quot;},</span>
<a href="#l23.17"></a><span id="l23.17">     {nsMsgSearchAttrib::JunkPercent, &quot;junk percent&quot;},</span>
<a href="#l23.18"></a><span id="l23.18">     {nsMsgSearchAttrib::JunkScoreOrigin, &quot;junk score origin&quot;},</span>
<a href="#l23.19"></a><span id="l23.19">     {nsMsgSearchAttrib::HasAttachmentStatus, &quot;has attachment status&quot;},</span>
<a href="#l23.20"></a><span id="l23.20"> };</span>
<a href="#l23.21"></a><span id="l23.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -339,17 +339,17 @@ GetDisplayNameInAddressBook(const nsACSt</span>
<a href="#l24.4"></a><span id="l24.4">  */</span>
<a href="#l24.5"></a><span id="l24.5"> static void</span>
<a href="#l24.6"></a><span id="l24.6"> GetCachedName(const nsCString&amp; unparsedString,</span>
<a href="#l24.7"></a><span id="l24.7">               int32_t displayVersion,</span>
<a href="#l24.8"></a><span id="l24.8">               nsACString&amp; cachedName)</span>
<a href="#l24.9"></a><span id="l24.9"> {</span>
<a href="#l24.10"></a><span id="l24.10">   nsresult err;</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  // Get verion #.</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  // Get version #.</span>
<a href="#l24.14"></a><span id="l24.14">   int32_t cachedVersion = unparsedString.ToInteger(&amp;err);</span>
<a href="#l24.15"></a><span id="l24.15">   if (cachedVersion != displayVersion)</span>
<a href="#l24.16"></a><span id="l24.16">     return;</span>
<a href="#l24.17"></a><span id="l24.17"> </span>
<a href="#l24.18"></a><span id="l24.18">   // Get cached name.</span>
<a href="#l24.19"></a><span id="l24.19">   int32_t pos = unparsedString.FindChar('|');</span>
<a href="#l24.20"></a><span id="l24.20">   if (pos != kNotFound)</span>
<a href="#l24.21"></a><span id="l24.21">     cachedName = Substring(unparsedString, pos + 1);</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineat">@@ -1043,17 +1043,17 @@ nsMsgDBView::GetMessageEnumerator(nsISim</span>
<a href="#l24.23"></a><span id="l24.23"> </span>
<a href="#l24.24"></a><span id="l24.24"> NS_IMETHODIMP</span>
<a href="#l24.25"></a><span id="l24.25"> nsMsgDBView::IsEditable(int32_t row,</span>
<a href="#l24.26"></a><span id="l24.26">                         nsITreeColumn* col,</span>
<a href="#l24.27"></a><span id="l24.27">                         bool* _retval)</span>
<a href="#l24.28"></a><span id="l24.28"> {</span>
<a href="#l24.29"></a><span id="l24.29">   NS_ENSURE_ARG_POINTER(col);</span>
<a href="#l24.30"></a><span id="l24.30">   NS_ENSURE_ARG_POINTER(_retval);</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-  // Attempt to retreive a custom column handler. If it exists call it and</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+  // Attempt to retrieve a custom column handler. If it exists call it and</span>
<a href="#l24.33"></a><span id="l24.33">   // return.</span>
<a href="#l24.34"></a><span id="l24.34">   const char16_t* colID;</span>
<a href="#l24.35"></a><span id="l24.35">   col-&gt;GetIdConst(&amp;colID);</span>
<a href="#l24.36"></a><span id="l24.36"> </span>
<a href="#l24.37"></a><span id="l24.37">   nsIMsgCustomColumnHandler* colHandler = GetColumnHandler(colID);</span>
<a href="#l24.38"></a><span id="l24.38"> </span>
<a href="#l24.39"></a><span id="l24.39">   if (colHandler)</span>
<a href="#l24.40"></a><span id="l24.40">   {</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineat">@@ -2159,17 +2159,17 @@ nsMsgDBView::GetCellText(int32_t aRow,</span>
<a href="#l24.42"></a><span id="l24.42">   const char16_t* colID;</span>
<a href="#l24.43"></a><span id="l24.43">   aCol-&gt;GetIdConst(&amp;colID);</span>
<a href="#l24.44"></a><span id="l24.44"> </span>
<a href="#l24.45"></a><span id="l24.45">   if (!IsValidIndex(aRow))</span>
<a href="#l24.46"></a><span id="l24.46">     return NS_MSG_INVALID_DBVIEW_INDEX;</span>
<a href="#l24.47"></a><span id="l24.47"> </span>
<a href="#l24.48"></a><span id="l24.48">   aValue.Truncate();</span>
<a href="#l24.49"></a><span id="l24.49"> </span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-  // Attempt to retreive a custom column handler. If it exists call it and</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineplus">+  // Attempt to retrieve a custom column handler. If it exists call it and</span>
<a href="#l24.52"></a><span id="l24.52">   // return.</span>
<a href="#l24.53"></a><span id="l24.53">   nsIMsgCustomColumnHandler* colHandler = GetColumnHandler(colID);</span>
<a href="#l24.54"></a><span id="l24.54"> </span>
<a href="#l24.55"></a><span id="l24.55">   if (colHandler)</span>
<a href="#l24.56"></a><span id="l24.56">   {</span>
<a href="#l24.57"></a><span id="l24.57">     colHandler-&gt;GetCellText(aRow, aCol, aValue);</span>
<a href="#l24.58"></a><span id="l24.58">     return NS_OK;</span>
<a href="#l24.59"></a><span id="l24.59">   }</span>
<a href="#l24.60"></a><span id="l24.60" class="difflineat">@@ -2328,17 +2328,17 @@ nsMsgDBView::CycleCell(int32_t row,</span>
<a href="#l24.61"></a><span id="l24.61">                        nsITreeColumn* col)</span>
<a href="#l24.62"></a><span id="l24.62"> {</span>
<a href="#l24.63"></a><span id="l24.63">   if (!IsValidIndex(row))</span>
<a href="#l24.64"></a><span id="l24.64">     return NS_MSG_INVALID_DBVIEW_INDEX;</span>
<a href="#l24.65"></a><span id="l24.65"> </span>
<a href="#l24.66"></a><span id="l24.66">   const char16_t* colID;</span>
<a href="#l24.67"></a><span id="l24.67">   col-&gt;GetIdConst(&amp;colID);</span>
<a href="#l24.68"></a><span id="l24.68"> </span>
<a href="#l24.69"></a><span id="l24.69" class="difflineminus">-  // Attempt to retreive a custom column handler. If it exists call it and</span>
<a href="#l24.70"></a><span id="l24.70" class="difflineplus">+  // Attempt to retrieve a custom column handler. If it exists call it and</span>
<a href="#l24.71"></a><span id="l24.71">   // return.</span>
<a href="#l24.72"></a><span id="l24.72">   nsIMsgCustomColumnHandler* colHandler = GetColumnHandler(colID);</span>
<a href="#l24.73"></a><span id="l24.73"> </span>
<a href="#l24.74"></a><span id="l24.74">   if (colHandler)</span>
<a href="#l24.75"></a><span id="l24.75">   {</span>
<a href="#l24.76"></a><span id="l24.76">     colHandler-&gt;CycleCell(row, col);</span>
<a href="#l24.77"></a><span id="l24.77">     return NS_OK;</span>
<a href="#l24.78"></a><span id="l24.78">   }</span>
<a href="#l24.79"></a><span id="l24.79" class="difflineat">@@ -4380,17 +4380,17 @@ nsresult nsMsgDBView::GetFieldTypeAndLen</span>
<a href="#l24.80"></a><span id="l24.80">       }</span>
<a href="#l24.81"></a><span id="l24.81"> </span>
<a href="#l24.82"></a><span id="l24.82">       bool isString;</span>
<a href="#l24.83"></a><span id="l24.83">       colHandler-&gt;IsString(&amp;isString);</span>
<a href="#l24.84"></a><span id="l24.84"> </span>
<a href="#l24.85"></a><span id="l24.85">       if (isString)</span>
<a href="#l24.86"></a><span id="l24.86">       {</span>
<a href="#l24.87"></a><span id="l24.87">         *pFieldType = kCollationKey;</span>
<a href="#l24.88"></a><span id="l24.88" class="difflineminus">-        // 80 - do we need a seperate k?</span>
<a href="#l24.89"></a><span id="l24.89" class="difflineplus">+        // 80 - do we need a separate k?</span>
<a href="#l24.90"></a><span id="l24.90">         *pMaxLen = kMaxRecipientKey;</span>
<a href="#l24.91"></a><span id="l24.91">       }</span>
<a href="#l24.92"></a><span id="l24.92">       else</span>
<a href="#l24.93"></a><span id="l24.93">       {</span>
<a href="#l24.94"></a><span id="l24.94">         *pFieldType = kU32;</span>
<a href="#l24.95"></a><span id="l24.95">         *pMaxLen = 0;</span>
<a href="#l24.96"></a><span id="l24.96">       }</span>
<a href="#l24.97"></a><span id="l24.97">       break;</span>
<a href="#l24.98"></a><span id="l24.98" class="difflineat">@@ -6525,17 +6525,17 @@ nsMsgDBView::FindLevelInThread(nsIMsgDBH</span>
<a href="#l24.99"></a><span id="l24.99">         return m_levels[indexToTry] + 1;</span>
<a href="#l24.100"></a><span id="l24.100">     }</span>
<a href="#l24.101"></a><span id="l24.101"> </span>
<a href="#l24.102"></a><span id="l24.102">     // If msgHdr's key is its parentKey, we'll loop forever, so protect</span>
<a href="#l24.103"></a><span id="l24.103">     // against that corruption.</span>
<a href="#l24.104"></a><span id="l24.104">     if (msgKey == parentKey ||</span>
<a href="#l24.105"></a><span id="l24.105">         NS_FAILED(m_db-&gt;GetMsgHdrForKey(parentKey, getter_AddRefs(curMsgHdr))))</span>
<a href="#l24.106"></a><span id="l24.106">     {</span>
<a href="#l24.107"></a><span id="l24.107" class="difflineminus">-      NS_ERROR(&quot;msgKey == parentKey, or GetMsgHdrForKey failed, this used to be an infinte loop condition&quot;);</span>
<a href="#l24.108"></a><span id="l24.108" class="difflineplus">+      NS_ERROR(&quot;msgKey == parentKey, or GetMsgHdrForKey failed, this used to be an infinite loop condition&quot;);</span>
<a href="#l24.109"></a><span id="l24.109">       curMsgHdr = nullptr;</span>
<a href="#l24.110"></a><span id="l24.110">     }</span>
<a href="#l24.111"></a><span id="l24.111">     else</span>
<a href="#l24.112"></a><span id="l24.112">     {</span>
<a href="#l24.113"></a><span id="l24.113">       // Need to update msgKey so the check for a msgHdr with matching</span>
<a href="#l24.114"></a><span id="l24.114">       // key+parentKey will work after first time through loop.</span>
<a href="#l24.115"></a><span id="l24.115">       curMsgHdr-&gt;GetMessageKey(&amp;msgKey);</span>
<a href="#l24.116"></a><span id="l24.116">     }</span>
<a href="#l24.117"></a><span id="l24.117" class="difflineat">@@ -7401,17 +7401,17 @@ nsMsgDBView::NavigateFromPos(nsMsgNaviga</span>
<a href="#l24.118"></a><span id="l24.118">     case nsMsgNavigationType::firstNew:</span>
<a href="#l24.119"></a><span id="l24.119">       rv = FindFirstNew(pResultIndex);</span>
<a href="#l24.120"></a><span id="l24.120">       if (IsValidIndex(*pResultIndex))</span>
<a href="#l24.121"></a><span id="l24.121">         *pResultKey = m_keys[*pResultIndex];</span>
<a href="#l24.122"></a><span id="l24.122"> </span>
<a href="#l24.123"></a><span id="l24.123">       break;</span>
<a href="#l24.124"></a><span id="l24.124">     case nsMsgNavigationType::firstUnreadMessage:</span>
<a href="#l24.125"></a><span id="l24.125">       startIndex = nsMsgViewIndex_None;</span>
<a href="#l24.126"></a><span id="l24.126" class="difflineminus">-      // Note fall thru - is this motion ever used?</span>
<a href="#l24.127"></a><span id="l24.127" class="difflineplus">+      // Note fall through - is this motion ever used?</span>
<a href="#l24.128"></a><span id="l24.128">       MOZ_FALLTHROUGH;</span>
<a href="#l24.129"></a><span id="l24.129">     case nsMsgNavigationType::nextUnreadMessage:</span>
<a href="#l24.130"></a><span id="l24.130">       for (curIndex = (startIndex == nsMsgViewIndex_None) ? 0 : startIndex;</span>
<a href="#l24.131"></a><span id="l24.131">            curIndex &lt;= lastIndex &amp;&amp; lastIndex != nsMsgViewIndex_None;</span>
<a href="#l24.132"></a><span id="l24.132">            curIndex++)</span>
<a href="#l24.133"></a><span id="l24.133">       {</span>
<a href="#l24.134"></a><span id="l24.134">         uint32_t flags = m_flags[curIndex];</span>
<a href="#l24.135"></a><span id="l24.135">         // Don't return start index since navigate should move.</span>
<a href="#l24.136"></a><span id="l24.136" class="difflineat">@@ -8705,24 +8705,24 @@ nsMsgDBView::CopyDBView(nsMsgDBView *aNe</span>
<a href="#l24.137"></a><span id="l24.137">   aNewMsgDBView-&gt;m_customColumnHandlers.AppendObjects(m_customColumnHandlers);</span>
<a href="#l24.138"></a><span id="l24.138"> </span>
<a href="#l24.139"></a><span id="l24.139">   return NS_OK;</span>
<a href="#l24.140"></a><span id="l24.140"> }</span>
<a href="#l24.141"></a><span id="l24.141"> </span>
<a href="#l24.142"></a><span id="l24.142"> NS_IMETHODIMP</span>
<a href="#l24.143"></a><span id="l24.143"> nsMsgDBView::GetSearchSession(nsIMsgSearchSession* *aSession)</span>
<a href="#l24.144"></a><span id="l24.144"> {</span>
<a href="#l24.145"></a><span id="l24.145" class="difflineminus">-  NS_ASSERTION(false, &quot;should be overriden by child class&quot;);</span>
<a href="#l24.146"></a><span id="l24.146" class="difflineplus">+  NS_ASSERTION(false, &quot;should be overridden by child class&quot;);</span>
<a href="#l24.147"></a><span id="l24.147">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l24.148"></a><span id="l24.148"> }</span>
<a href="#l24.149"></a><span id="l24.149"> </span>
<a href="#l24.150"></a><span id="l24.150"> NS_IMETHODIMP</span>
<a href="#l24.151"></a><span id="l24.151"> nsMsgDBView::SetSearchSession(nsIMsgSearchSession *aSession)</span>
<a href="#l24.152"></a><span id="l24.152"> {</span>
<a href="#l24.153"></a><span id="l24.153" class="difflineminus">-  NS_ASSERTION(false, &quot;should be overriden by child class&quot;);</span>
<a href="#l24.154"></a><span id="l24.154" class="difflineplus">+  NS_ASSERTION(false, &quot;should be overridden by child class&quot;);</span>
<a href="#l24.155"></a><span id="l24.155">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l24.156"></a><span id="l24.156"> }</span>
<a href="#l24.157"></a><span id="l24.157"> </span>
<a href="#l24.158"></a><span id="l24.158"> NS_IMETHODIMP</span>
<a href="#l24.159"></a><span id="l24.159"> nsMsgDBView::GetSupportsThreading(bool *aResult)</span>
<a href="#l24.160"></a><span id="l24.160"> {</span>
<a href="#l24.161"></a><span id="l24.161">   NS_ENSURE_ARG_POINTER(aResult);</span>
<a href="#l24.162"></a><span id="l24.162">   *aResult = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/base/src/nsMsgDBView.h</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgDBView.h</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -439,17 +439,17 @@ protected:</span>
<a href="#l25.4"></a><span id="l25.4">   // because the selection changed (i.e. after a sort).</span>
<a href="#l25.5"></a><span id="l25.5">   nsMsgKey                m_currentlyDisplayedMsgKey;</span>
<a href="#l25.6"></a><span id="l25.6">   nsCString               m_currentlyDisplayedMsgUri;</span>
<a href="#l25.7"></a><span id="l25.7">   nsMsgViewIndex          m_currentlyDisplayedViewIndex;</span>
<a href="#l25.8"></a><span id="l25.8">   // If we're deleting messages, we want to hold off loading messages on</span>
<a href="#l25.9"></a><span id="l25.9">   // selection changed until the delete is done and we want to batch</span>
<a href="#l25.10"></a><span id="l25.10">   // notifications.</span>
<a href="#l25.11"></a><span id="l25.11">   bool m_deletingRows;</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  // For certain special folders and decendents of those folders</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  // For certain special folders and descendants of those folders</span>
<a href="#l25.14"></a><span id="l25.14">   // (like the &quot;Sent&quot; folder, &quot;Sent/Old Sent&quot;).</span>
<a href="#l25.15"></a><span id="l25.15">   // The Sender column really shows recipients.</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17">   // Server types for this view's folder</span>
<a href="#l25.18"></a><span id="l25.18">   bool mIsNews;             // We have special icons for news.</span>
<a href="#l25.19"></a><span id="l25.19">   bool mIsRss;              // RSS affects enabling of junk commands.</span>
<a href="#l25.20"></a><span id="l25.20">   bool mIsXFVirtual;        // A virtual folder with multiple folders.</span>
<a href="#l25.21"></a><span id="l25.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/base/src/nsMsgFolderCompactor.cpp</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgFolderCompactor.cpp</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1278,17 +1278,17 @@ nsFolderCompactState::EndCopy(nsISupport</span>
<a href="#l26.4"></a><span id="l26.4">     if (m_addedHeaderSize)</span>
<a href="#l26.5"></a><span id="l26.5">     {</span>
<a href="#l26.6"></a><span id="l26.6">       msgSize += m_addedHeaderSize;</span>
<a href="#l26.7"></a><span id="l26.7">       newMsgHdr-&gt;SetMessageSize(msgSize);</span>
<a href="#l26.8"></a><span id="l26.8">     }</span>
<a href="#l26.9"></a><span id="l26.9">     m_totalMsgSize += msgSize;</span>
<a href="#l26.10"></a><span id="l26.10">   }</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-//  m_db-&gt;Commit(nsMsgDBCommitType::kLargeCommit);  // no sense commiting until the end</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+//  m_db-&gt;Commit(nsMsgDBCommitType::kLargeCommit);  // no sense committing until the end</span>
<a href="#l26.14"></a><span id="l26.14">   // advance to next message</span>
<a href="#l26.15"></a><span id="l26.15">   m_curIndex ++;</span>
<a href="#l26.16"></a><span id="l26.16">   m_startOfMsg = true;</span>
<a href="#l26.17"></a><span id="l26.17">   nsCOMPtr &lt;nsIMsgStatusFeedback&gt; statusFeedback;</span>
<a href="#l26.18"></a><span id="l26.18">   if (m_window)</span>
<a href="#l26.19"></a><span id="l26.19">   {</span>
<a href="#l26.20"></a><span id="l26.20">     m_window-&gt;GetStatusFeedback(getter_AddRefs(statusFeedback));</span>
<a href="#l26.21"></a><span id="l26.21">     if (statusFeedback)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/base/src/nsMsgMailSession.cpp</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgMailSession.cpp</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -276,17 +276,17 @@ nsresult nsMsgMailSession::GetTopmostMsg</span>
<a href="#l27.4"></a><span id="l27.4"> </span>
<a href="#l27.5"></a><span id="l27.5">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7">     nsCOMPtr&lt;nsISupports&gt; windowSupports;</span>
<a href="#l27.8"></a><span id="l27.8">     nsCOMPtr&lt;nsPIDOMWindowOuter&gt; topMostWindow;</span>
<a href="#l27.9"></a><span id="l27.9">     nsAutoString windowType;</span>
<a href="#l27.10"></a><span id="l27.10">     bool more;</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    // loop to get the top most with attibute &quot;mail:3pane&quot; or &quot;mail:messageWindow&quot;</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    // loop to get the top most with attribute &quot;mail:3pane&quot; or &quot;mail:messageWindow&quot;</span>
<a href="#l27.14"></a><span id="l27.14">     windowEnum-&gt;HasMoreElements(&amp;more);</span>
<a href="#l27.15"></a><span id="l27.15">     while (more)</span>
<a href="#l27.16"></a><span id="l27.16">     {</span>
<a href="#l27.17"></a><span id="l27.17">       rv = windowEnum-&gt;GetNext(getter_AddRefs(windowSupports));</span>
<a href="#l27.18"></a><span id="l27.18">       NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l27.19"></a><span id="l27.19">       NS_ENSURE_TRUE(windowSupports, NS_ERROR_FAILURE);</span>
<a href="#l27.20"></a><span id="l27.20"> </span>
<a href="#l27.21"></a><span id="l27.21">       topMostWindow = do_QueryInterface(windowSupports, &amp;rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -531,17 +531,17 @@ nsMsgPrintEngine::SetupObserver()</span>
<a href="#l28.4"></a><span id="l28.4">     if (progress)</span>
<a href="#l28.5"></a><span id="l28.5">     {</span>
<a href="#l28.6"></a><span id="l28.6">       (void) progress-&gt;AddProgressListener((nsIWebProgressListener *)this,</span>
<a href="#l28.7"></a><span id="l28.7">                                         nsIWebProgress::NOTIFY_STATE_DOCUMENT);</span>
<a href="#l28.8"></a><span id="l28.8">     }</span>
<a href="#l28.9"></a><span id="l28.9"> </span>
<a href="#l28.10"></a><span id="l28.10">     // Cache a pointer to the mail message's DOMWindow</span>
<a href="#l28.11"></a><span id="l28.11">     // so later we know when we can print when the</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    // document &quot;loaded&quot; msgs com thru via the Progress listener</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+    // document &quot;loaded&quot; msgs com through via the Progress listener</span>
<a href="#l28.14"></a><span id="l28.14">     mMsgDOMWin = do_GetInterface(mDocShell);</span>
<a href="#l28.15"></a><span id="l28.15">   }</span>
<a href="#l28.16"></a><span id="l28.16"> }</span>
<a href="#l28.17"></a><span id="l28.17"> </span>
<a href="#l28.18"></a><span id="l28.18"> nsresult</span>
<a href="#l28.19"></a><span id="l28.19"> nsMsgPrintEngine::SetStatusMessage(const nsString&amp; aMsgString)</span>
<a href="#l28.20"></a><span id="l28.20"> {</span>
<a href="#l28.21"></a><span id="l28.21">   if ( (!mFeedback) || (aMsgString.IsEmpty()) )</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/base/src/nsMsgThreadedDBView.cpp</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgThreadedDBView.cpp</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -544,17 +544,17 @@ nsMsgThreadedDBView::ListThreadIds(nsMsg</span>
<a href="#l29.4"></a><span id="l29.4">       }</span>
<a href="#l29.5"></a><span id="l29.5">     }</span>
<a href="#l29.6"></a><span id="l29.6">     else if (threadsRemoved &lt; 10 &amp;&amp;</span>
<a href="#l29.7"></a><span id="l29.7">              !(threadFlags &amp; (nsMsgMessageFlags::Watched |</span>
<a href="#l29.8"></a><span id="l29.8">                               nsMsgMessageFlags::Ignored)))</span>
<a href="#l29.9"></a><span id="l29.9">     {</span>
<a href="#l29.10"></a><span id="l29.10">       // ### remove thread.</span>
<a href="#l29.11"></a><span id="l29.11">       // Don't want to remove all empty threads first time around as it will</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-      // choke preformance for upgrade.</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+      // choke performance for upgrade.</span>
<a href="#l29.14"></a><span id="l29.14">       threadsRemoved++;</span>
<a href="#l29.15"></a><span id="l29.15"> #ifdef DEBUG_bienvenu</span>
<a href="#l29.16"></a><span id="l29.16">       printf(&quot;removing empty non-ignored non-watched thread\n&quot;);</span>
<a href="#l29.17"></a><span id="l29.17"> #endif</span>
<a href="#l29.18"></a><span id="l29.18">     }</span>
<a href="#l29.19"></a><span id="l29.19">   }</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21">   if (hasMore &amp;&amp; threadHdr)</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineat">@@ -1081,17 +1081,17 @@ nsMsgThreadedDBView::RemoveByIndex(nsMsg</span>
<a href="#l29.23"></a><span id="l29.23"> </span>
<a href="#l29.24"></a><span id="l29.24">     }</span>
<a href="#l29.25"></a><span id="l29.25"> </span>
<a href="#l29.26"></a><span id="l29.26">     return nsMsgDBView::RemoveByIndex(index);</span>
<a href="#l29.27"></a><span id="l29.27">   }</span>
<a href="#l29.28"></a><span id="l29.28"> </span>
<a href="#l29.29"></a><span id="l29.29">   // Deleting collapsed thread header is special case. Child will be promoted,</span>
<a href="#l29.30"></a><span id="l29.30">   // so just tell FE that line changed, not that it was deleted.</span>
<a href="#l29.31"></a><span id="l29.31" class="difflineminus">-  // Header has aleady been deleted from thread.</span>
<a href="#l29.32"></a><span id="l29.32" class="difflineplus">+  // Header has already been deleted from thread.</span>
<a href="#l29.33"></a><span id="l29.33">   if (threadHdr &amp;&amp; numThreadChildren &gt; 0)</span>
<a href="#l29.34"></a><span id="l29.34">   {</span>
<a href="#l29.35"></a><span id="l29.35">     // Change the id array and flags array to reflect the child header.</span>
<a href="#l29.36"></a><span id="l29.36">     // If we're not deleting the header, we want the second header,</span>
<a href="#l29.37"></a><span id="l29.37">     // Otherwise, the first one (which just got promoted).</span>
<a href="#l29.38"></a><span id="l29.38">     nsCOMPtr&lt;nsIMsgDBHdr&gt; msgHdr;</span>
<a href="#l29.39"></a><span id="l29.39">     rv = threadHdr-&gt;GetChildHdrAt(0, getter_AddRefs(msgHdr));</span>
<a href="#l29.40"></a><span id="l29.40">     if (msgHdr != nullptr)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/base/test/unit/test_folderLookupService.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_folderLookupService.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l30.4"></a><span id="l30.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l30.5"></a><span id="l30.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l30.6"></a><span id="l30.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8"> /**</span>
<a href="#l30.9"></a><span id="l30.9" class="difflineminus">- * This tests that nsIFolderLookupService works acording to specification.</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineplus">+ * This tests that nsIFolderLookupService works according to specification.</span>
<a href="#l30.11"></a><span id="l30.11">  */</span>
<a href="#l30.12"></a><span id="l30.12"> ChromeUtils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l30.13"></a><span id="l30.13"> </span>
<a href="#l30.14"></a><span id="l30.14"> var kRootURI = &quot;mailbox://nobody@Local%20Folders&quot;;</span>
<a href="#l30.15"></a><span id="l30.15"> </span>
<a href="#l30.16"></a><span id="l30.16"> function run_test() {</span>
<a href="#l30.17"></a><span id="l30.17">   let fls = Cc[&quot;@mozilla.org/mail/folder-lookup;1&quot;]</span>
<a href="#l30.18"></a><span id="l30.18">               .getService(Ci.nsIFolderLookupService);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/base/test/unit/test_junkWhitelisting.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_junkWhitelisting.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -97,17 +97,17 @@ function doChecks(server)</span>
<a href="#l31.4"></a><span id="l31.4">   spamSettings.initialize(server);</span>
<a href="#l31.5"></a><span id="l31.5"> </span>
<a href="#l31.6"></a><span id="l31.6">   // check that the change was propagated to spamSettings</span>
<a href="#l31.7"></a><span id="l31.7">   Assert.ok(!spamSettings.useWhiteList);</span>
<a href="#l31.8"></a><span id="l31.8"> </span>
<a href="#l31.9"></a><span id="l31.9">   // and affects whitelisting calculationss</span>
<a href="#l31.10"></a><span id="l31.10">   Assert.ok(!spamSettings.checkWhiteList(hdrs[kDomainTest]));</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  // reenable whitelisting</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  // re-enable whitelisting</span>
<a href="#l31.14"></a><span id="l31.14">   server.setBoolValue(&quot;useWhiteList&quot;, true);</span>
<a href="#l31.15"></a><span id="l31.15">   spamSettings.initialize(server);</span>
<a href="#l31.16"></a><span id="l31.16">   Assert.ok(spamSettings.checkWhiteList(hdrs[kDomainTest]));</span>
<a href="#l31.17"></a><span id="l31.17"> </span>
<a href="#l31.18"></a><span id="l31.18">   // Set an empty white list.</span>
<a href="#l31.19"></a><span id="l31.19">   // To really empty this, I have to change the default value as well</span>
<a href="#l31.20"></a><span id="l31.20">   Services.prefs.setCharPref(&quot;mail.server.default.whiteListAbURI&quot;, &quot;&quot;);</span>
<a href="#l31.21"></a><span id="l31.21">   server.setCharValue(&quot;whiteListAbURI&quot;, &quot;&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -13,17 +13,17 @@ load(&quot;../../../resources/alertTestUtils.</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5"> // IMAP pump</span>
<a href="#l32.6"></a><span id="l32.6"> ChromeUtils.import(&quot;resource://testing-common/mailnews/IMAPpump.js&quot;);</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11"> setupIMAPPump(&quot;GMail&quot;);</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-// create our own hander so that we can call imapd functions directly</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+// create our own handler so that we can call imapd functions directly</span>
<a href="#l32.14"></a><span id="l32.14"> var handler;</span>
<a href="#l32.15"></a><span id="l32.15"> </span>
<a href="#l32.16"></a><span id="l32.16"> // Definition of tests</span>
<a href="#l32.17"></a><span id="l32.17"> var tests = [</span>
<a href="#l32.18"></a><span id="l32.18">   setupMailboxes,</span>
<a href="#l32.19"></a><span id="l32.19">   testXlist,</span>
<a href="#l32.20"></a><span id="l32.20">   endTest</span>
<a href="#l32.21"></a><span id="l32.21"> ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -15,17 +15,17 @@ ChromeUtils.import(&quot;resource://testing-c</span>
<a href="#l33.4"></a><span id="l33.4"> </span>
<a href="#l33.5"></a><span id="l33.5"> ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l33.6"></a><span id="l33.6"> </span>
<a href="#l33.7"></a><span id="l33.7"> // Globals</span>
<a href="#l33.8"></a><span id="l33.8"> </span>
<a href="#l33.9"></a><span id="l33.9"> </span>
<a href="#l33.10"></a><span id="l33.10"> // Dovecot is one of the servers that supports LIST-EXTENDED</span>
<a href="#l33.11"></a><span id="l33.11"> setupIMAPPump(&quot;Dovecot&quot;);</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-// create our own hander so that we can call imapd functions directly</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+// create our own handler so that we can call imapd functions directly</span>
<a href="#l33.14"></a><span id="l33.14"> var handler;</span>
<a href="#l33.15"></a><span id="l33.15"> </span>
<a href="#l33.16"></a><span id="l33.16"> // Definition of tests</span>
<a href="#l33.17"></a><span id="l33.17"> var tests = [</span>
<a href="#l33.18"></a><span id="l33.18">   setupMailboxes,</span>
<a href="#l33.19"></a><span id="l33.19">   testList,</span>
<a href="#l33.20"></a><span id="l33.20">   testListSelectSubscribed,</span>
<a href="#l33.21"></a><span id="l33.21">   testListReturnChilderen,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/base/util/converterWorker.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/base/util/converterWorker.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -239,17 +239,17 @@ self.addEventListener(&quot;message&quot;, functio</span>
<a href="#l34.4"></a><span id="l34.4">               // Set index of the (i+1)th &quot;From - &quot; match found in 'text'.</span>
<a href="#l34.5"></a><span id="l34.5">               lastMatchIndex = msgPos[i + 1];</span>
<a href="#l34.6"></a><span id="l34.6">             }</span>
<a href="#l34.7"></a><span id="l34.7"> </span>
<a href="#l34.8"></a><span id="l34.8">             // Now 'lastMatchIndex' holds the index of the last match found in</span>
<a href="#l34.9"></a><span id="l34.9">             // 'text'. So we move the position in the file to 'position +</span>
<a href="#l34.10"></a><span id="l34.10">             // lastMatchIndex' from the beginning of the file.</span>
<a href="#l34.11"></a><span id="l34.11">             // This ensures that the next 'text' starts from &quot;From - &quot;</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-            // and that there is at least 1 match everytime.</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+            // and that there is at least 1 match every time.</span>
<a href="#l34.14"></a><span id="l34.14">             sourceFileOpen.setPosition(position + lastMatchIndex,</span>
<a href="#l34.15"></a><span id="l34.15">               OS.File.POS_START);</span>
<a href="#l34.16"></a><span id="l34.16">           } else {</span>
<a href="#l34.17"></a><span id="l34.17">             // If 1 match is found increase the no. of bytes to be extracted by</span>
<a href="#l34.18"></a><span id="l34.18">             // 1000000 and move the position in the file to 'position', i.e. the</span>
<a href="#l34.19"></a><span id="l34.19">             // position in the file before reading the bytes.</span>
<a href="#l34.20"></a><span id="l34.20">             sourceFileOpen.setPosition(position, OS.File.POS_START);</span>
<a href="#l34.21"></a><span id="l34.21">             noOfBytes = noOfBytes + 1000000;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/base/util/errUtils.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/base/util/errUtils.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -52,17 +52,17 @@ function logElement(aElement) {</span>
<a href="#l35.4"></a><span id="l35.4">  */</span>
<a href="#l35.5"></a><span id="l35.5"> function logEvent(aEvent) {</span>
<a href="#l35.6"></a><span id="l35.6">   stringifier.dumpEvent(aEvent);</span>
<a href="#l35.7"></a><span id="l35.7"> }</span>
<a href="#l35.8"></a><span id="l35.8"> </span>
<a href="#l35.9"></a><span id="l35.9"> /**</span>
<a href="#l35.10"></a><span id="l35.10">  * Dump the current stack and return an Error suitable for throwing.  We return</span>
<a href="#l35.11"></a><span id="l35.11">  *  the new Error so that your code can use a &quot;throw&quot; statement which makes it</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">- *  obvious to syntactic analysis that there is an exit occuring at that point.</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+ *  obvious to syntactic analysis that there is an exit occurring at that point.</span>
<a href="#l35.14"></a><span id="l35.14">  *</span>
<a href="#l35.15"></a><span id="l35.15">  * Example:</span>
<a href="#l35.16"></a><span id="l35.16">  *   throw errorWithDebug(&quot;I did not expect this!&quot;);</span>
<a href="#l35.17"></a><span id="l35.17">  *</span>
<a href="#l35.18"></a><span id="l35.18">  * @param aString The message payload for the exception.</span>
<a href="#l35.19"></a><span id="l35.19">  */</span>
<a href="#l35.20"></a><span id="l35.20"> function errorWithDebug(aString) {</span>
<a href="#l35.21"></a><span id="l35.21">   dump(&quot;PROBLEM: &quot; + aString + &quot;\n&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/base/util/mailnewsMigrator.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/base/util/mailnewsMigrator.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -111,17 +111,17 @@ function MigrateServerAuthPref()</span>
<a href="#l36.4"></a><span id="l36.4">                             Ci.nsMsgAuthMethod.passwordCleartext) :</span>
<a href="#l36.5"></a><span id="l36.5">                         Ci.nsMsgAuthMethod.none);</span>
<a href="#l36.6"></a><span id="l36.6">       Services.prefs.setIntPref(server + &quot;migrated&quot;, kSmtpPrefVersion);</span>
<a href="#l36.7"></a><span id="l36.7">     }</span>
<a href="#l36.8"></a><span id="l36.8">   } catch(e) { logException(e); }</span>
<a href="#l36.9"></a><span id="l36.9"> }</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11"> /**</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">- * The address book used to contain information about wheather to allow remote</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+ * The address book used to contain information about whether to allow remote</span>
<a href="#l36.14"></a><span id="l36.14">  * content for a given contact. Now we use the permission manager for that.</span>
<a href="#l36.15"></a><span id="l36.15">  * Do a one-time migration for it.</span>
<a href="#l36.16"></a><span id="l36.16">  */</span>
<a href="#l36.17"></a><span id="l36.17"> function MigrateABRemoteContentSettings()</span>
<a href="#l36.18"></a><span id="l36.18"> {</span>
<a href="#l36.19"></a><span id="l36.19">   if (Services.prefs.prefHasUserValue(&quot;mail.ab_remote_content.migrated&quot;))</span>
<a href="#l36.20"></a><span id="l36.20">     return;</span>
<a href="#l36.21"></a><span id="l36.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/base/util/nsMsgDBFolder.cpp</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgDBFolder.cpp</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -2205,17 +2205,17 @@ nsMsgDBFolder::SetStringProperty(const c</span>
<a href="#l37.4"></a><span id="l37.4">       cacheElement-&gt;SetStringProperty(propertyName, propertyValue);</span>
<a href="#l37.5"></a><span id="l37.5">   }</span>
<a href="#l37.6"></a><span id="l37.6">   nsCOMPtr&lt;nsIDBFolderInfo&gt; folderInfo;</span>
<a href="#l37.7"></a><span id="l37.7">   nsCOMPtr&lt;nsIMsgDatabase&gt; db;</span>
<a href="#l37.8"></a><span id="l37.8">   nsresult rv = GetDBFolderInfoAndDB(getter_AddRefs(folderInfo), getter_AddRefs(db));</span>
<a href="#l37.9"></a><span id="l37.9">   if(NS_SUCCEEDED(rv))</span>
<a href="#l37.10"></a><span id="l37.10">   {</span>
<a href="#l37.11"></a><span id="l37.11">     folderInfo-&gt;SetCharProperty(propertyName, propertyValue);</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-    db-&gt;Commit(nsMsgDBCommitType::kLargeCommit);  //commiting the db also commits the cache</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+    db-&gt;Commit(nsMsgDBCommitType::kLargeCommit);  //committing the db also commits the cache</span>
<a href="#l37.14"></a><span id="l37.14">   }</span>
<a href="#l37.15"></a><span id="l37.15">   return NS_OK;</span>
<a href="#l37.16"></a><span id="l37.16"> }</span>
<a href="#l37.17"></a><span id="l37.17"> </span>
<a href="#l37.18"></a><span id="l37.18"> // Get/Set ForcePropertyEmpty is only used with inherited properties</span>
<a href="#l37.19"></a><span id="l37.19"> NS_IMETHODIMP</span>
<a href="#l37.20"></a><span id="l37.20"> nsMsgDBFolder::GetForcePropertyEmpty(const char *aPropertyName, bool *_retval)</span>
<a href="#l37.21"></a><span id="l37.21"> {</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineat">@@ -3108,17 +3108,17 @@ NS_IMETHODIMP nsMsgDBFolder::GetFolderUR</span>
<a href="#l37.23"></a><span id="l37.23">   url.Assign(EmptyCString());</span>
<a href="#l37.24"></a><span id="l37.24">   return NS_OK;</span>
<a href="#l37.25"></a><span id="l37.25"> }</span>
<a href="#l37.26"></a><span id="l37.26"> </span>
<a href="#l37.27"></a><span id="l37.27"> NS_IMETHODIMP nsMsgDBFolder::GetServer(nsIMsgIncomingServer ** aServer)</span>
<a href="#l37.28"></a><span id="l37.28"> {</span>
<a href="#l37.29"></a><span id="l37.29">   NS_ENSURE_ARG_POINTER(aServer);</span>
<a href="#l37.30"></a><span id="l37.30">   nsresult rv;</span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">-  // short circut the server if we have it.</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineplus">+  // short circuit the server if we have it.</span>
<a href="#l37.33"></a><span id="l37.33">   nsCOMPtr&lt;nsIMsgIncomingServer&gt; server = do_QueryReferent(mServer, &amp;rv);</span>
<a href="#l37.34"></a><span id="l37.34">   if (NS_FAILED(rv))</span>
<a href="#l37.35"></a><span id="l37.35">   {</span>
<a href="#l37.36"></a><span id="l37.36">     // try again after parsing the URI</span>
<a href="#l37.37"></a><span id="l37.37">     rv = parseURI(true);</span>
<a href="#l37.38"></a><span id="l37.38">     server = do_QueryReferent(mServer);</span>
<a href="#l37.39"></a><span id="l37.39">   }</span>
<a href="#l37.40"></a><span id="l37.40">   server.forget(aServer);</span>
<a href="#l37.41"></a><span id="l37.41" class="difflineat">@@ -5700,17 +5700,17 @@ void nsMsgDBFolder::compressQuotesInMsgS</span>
<a href="#l37.42"></a><span id="l37.42">   int32_t lineFeedPos = 0;</span>
<a href="#l37.43"></a><span id="l37.43">   while (offset &lt; msgBodyStrLen)</span>
<a href="#l37.44"></a><span id="l37.44">   {</span>
<a href="#l37.45"></a><span id="l37.45">     lineFeedPos = aMsgSnippet.FindChar('\n', offset);</span>
<a href="#l37.46"></a><span id="l37.46">     if (lineFeedPos != -1)</span>
<a href="#l37.47"></a><span id="l37.47">     {</span>
<a href="#l37.48"></a><span id="l37.48">       const nsAString&amp; currentLine = Substring(aMsgSnippet, offset, lineFeedPos - offset);</span>
<a href="#l37.49"></a><span id="l37.49">       // this catches quoted text (&quot;&gt; &quot;), nested quotes of any level (&quot;&gt;&gt; &quot;, &quot;&gt;&gt;&gt; &quot;, ...)</span>
<a href="#l37.50"></a><span id="l37.50" class="difflineminus">-      // it also catches empty line quoted text (&quot;&gt;&quot;). It might be over agressive and require</span>
<a href="#l37.51"></a><span id="l37.51" class="difflineplus">+      // it also catches empty line quoted text (&quot;&gt;&quot;). It might be over aggressive and require</span>
<a href="#l37.52"></a><span id="l37.52">       // tweaking later.</span>
<a href="#l37.53"></a><span id="l37.53">       // Try to strip the citation. If the current line ends with a ':' and the next line</span>
<a href="#l37.54"></a><span id="l37.54">       // looks like a quoted reply (starts with a &quot;&gt;&quot;) skip the current line</span>
<a href="#l37.55"></a><span id="l37.55">       if (StringBeginsWith(currentLine, NS_LITERAL_STRING(&quot;&gt;&quot;)) ||</span>
<a href="#l37.56"></a><span id="l37.56">           (lineFeedPos + 1 &lt; msgBodyStrLen  &amp;&amp; lineFeedPos</span>
<a href="#l37.57"></a><span id="l37.57">           &amp;&amp; aMsgSnippet[lineFeedPos - 1] == char16_t(':')</span>
<a href="#l37.58"></a><span id="l37.58">           &amp;&amp; aMsgSnippet[lineFeedPos + 1] == char16_t('&gt;')))</span>
<a href="#l37.59"></a><span id="l37.59">       {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/base/util/nsMsgKeyArray.cpp</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgKeyArray.cpp</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -56,17 +56,17 @@ NS_IMETHODIMP nsMsgKeyArray::AppendEleme</span>
<a href="#l38.4"></a><span id="l38.4">                &quot;Inserting a new key at wrong position in a sorted key list!&quot;);</span>
<a href="#l38.5"></a><span id="l38.5"> #endif</span>
<a href="#l38.6"></a><span id="l38.6">   m_keys.AppendElement(aKey);</span>
<a href="#l38.7"></a><span id="l38.7">   return NS_OK;</span>
<a href="#l38.8"></a><span id="l38.8"> }</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10"> NS_IMETHODIMP nsMsgKeyArray::InsertElementSorted(nsMsgKey aKey)</span>
<a href="#l38.11"></a><span id="l38.11"> {</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  // Ths function should be removed after interfaces are not frozen for TB38.</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+  // This function should be removed after interfaces are not frozen for TB38.</span>
<a href="#l38.14"></a><span id="l38.14">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l38.15"></a><span id="l38.15"> }</span>
<a href="#l38.16"></a><span id="l38.16"> </span>
<a href="#l38.17"></a><span id="l38.17"> NS_IMETHODIMP nsMsgKeyArray::GetArray(uint32_t *aCount, nsMsgKey **aKeys)</span>
<a href="#l38.18"></a><span id="l38.18"> {</span>
<a href="#l38.19"></a><span id="l38.19">   NS_ENSURE_ARG_POINTER(aCount);</span>
<a href="#l38.20"></a><span id="l38.20">   NS_ENSURE_ARG_POINTER(aKeys);</span>
<a href="#l38.21"></a><span id="l38.21">   *aCount = m_keys.Length();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/base/util/nsMsgKeySet.cpp</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgKeySet.cpp</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -28,17 +28,17 @@</span>
<a href="#l39.4"></a><span id="l39.4">    - strictly increasing</span>
<a href="#l39.5"></a><span id="l39.5">    - large subsequences of monotonically increasing ranges</span>
<a href="#l39.6"></a><span id="l39.6">    - gaps in the set are usually small, but not always</span>
<a href="#l39.7"></a><span id="l39.7">    - consecutive ranges tend to be large</span>
<a href="#l39.8"></a><span id="l39.8"> </span>
<a href="#l39.9"></a><span id="l39.9">    The biggest win is to run-length encode the data, storing ranges as two</span>
<a href="#l39.10"></a><span id="l39.10">    numbers (start+length or start,end). We could also store each number as a</span>
<a href="#l39.11"></a><span id="l39.11">    delta from the previous number for further compression, but that gets kind</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-   of tricky, since there are no guarentees about the sizes of the gaps, and</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+   of tricky, since there are no guarantees about the sizes of the gaps, and</span>
<a href="#l39.14"></a><span id="l39.14">    we'd have to store variable-length words.</span>
<a href="#l39.15"></a><span id="l39.15"> </span>
<a href="#l39.16"></a><span id="l39.16">    Current data format:</span>
<a href="#l39.17"></a><span id="l39.17"> </span>
<a href="#l39.18"></a><span id="l39.18">    DATA := SIZE [ CHUNK ]*</span>
<a href="#l39.19"></a><span id="l39.19">    CHUNK := [ RANGE | VALUE ]</span>
<a href="#l39.20"></a><span id="l39.20">    RANGE := -LENGTH START</span>
<a href="#l39.21"></a><span id="l39.21">    START := VALUE</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/mailnews/base/util/nsMsgProtocol.h</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgProtocol.h</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -116,20 +116,20 @@ protected:</span>
<a href="#l40.4"></a><span id="l40.4"> </span>
<a href="#l40.5"></a><span id="l40.5">   virtual nsresult InitFromURI(nsIURI *aUrl);</span>
<a href="#l40.6"></a><span id="l40.6"> </span>
<a href="#l40.7"></a><span id="l40.7">   nsresult DoNtlmStep1(const nsACString &amp;username, const nsAString &amp;password, nsCString &amp;response);</span>
<a href="#l40.8"></a><span id="l40.8">   nsresult DoNtlmStep2(nsCString &amp;commandResponse, nsCString &amp;response);</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10">   nsresult DoGSSAPIStep1(const char *service, const char *username, nsCString &amp;response);</span>
<a href="#l40.11"></a><span id="l40.11">   nsresult DoGSSAPIStep2(nsCString &amp;commandResponse, nsCString &amp;response);</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-  // Ouput stream for writing commands to the socket</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+  // Output stream for writing commands to the socket</span>
<a href="#l40.14"></a><span id="l40.14">   nsCOMPtr&lt;nsIOutputStream&gt;   m_outputStream;   // this will be obtained from the transport interface</span>
<a href="#l40.15"></a><span id="l40.15"> </span>
<a href="#l40.16"></a><span id="l40.16" class="difflineminus">-  // Ouput stream for writing commands to the socket</span>
<a href="#l40.17"></a><span id="l40.17" class="difflineplus">+  // Output stream for writing commands to the socket</span>
<a href="#l40.18"></a><span id="l40.18">   nsCOMPtr&lt;nsITransport&gt;  m_transport;</span>
<a href="#l40.19"></a><span id="l40.19">   nsCOMPtr&lt;nsIRequest&gt;    m_request;</span>
<a href="#l40.20"></a><span id="l40.20">   nsCOMPtr&lt;nsICancelable&gt; m_proxyRequest;</span>
<a href="#l40.21"></a><span id="l40.21"> </span>
<a href="#l40.22"></a><span id="l40.22">   bool          m_socketIsOpen; // mscott: we should look into keeping this state in the nsSocketTransport...</span>
<a href="#l40.23"></a><span id="l40.23">                                   // I'm using it to make sure I open the socket the first time a URL is loaded into the connection</span>
<a href="#l40.24"></a><span id="l40.24">   uint32_t      m_flags; // used to store flag information</span>
<a href="#l40.25"></a><span id="l40.25">   //uint32_t  m_startPosition;</span>
<a href="#l40.26"></a><span id="l40.26" class="difflineat">@@ -191,17 +191,17 @@ public:</span>
<a href="#l40.27"></a><span id="l40.27"> </span>
<a href="#l40.28"></a><span id="l40.28">   // if we suspended the asynch write while waiting for more data to write then this will be TRUE</span>
<a href="#l40.29"></a><span id="l40.29">   bool mSuspendedWrite;</span>
<a href="#l40.30"></a><span id="l40.30">   nsCOMPtr&lt;nsIRequest&gt;     m_WriteRequest;</span>
<a href="#l40.31"></a><span id="l40.31">   nsCOMPtr&lt;nsIAsyncOutputStream&gt;    mAsyncOutStream;</span>
<a href="#l40.32"></a><span id="l40.32">   nsCOMPtr&lt;nsIOutputStreamCallback&gt; mProvider;</span>
<a href="#l40.33"></a><span id="l40.33">   nsCOMPtr&lt;nsIThread&gt;               mProviderThread;</span>
<a href="#l40.34"></a><span id="l40.34"> </span>
<a href="#l40.35"></a><span id="l40.35" class="difflineminus">-  // because we are reading the post data in asychronously, it's possible that we aren't sending it</span>
<a href="#l40.36"></a><span id="l40.36" class="difflineplus">+  // because we are reading the post data in asynchronously, it's possible that we aren't sending it</span>
<a href="#l40.37"></a><span id="l40.37">   // out fast enough and the reading gets blocked. The following set of state variables are used to</span>
<a href="#l40.38"></a><span id="l40.38">   // track this.</span>
<a href="#l40.39"></a><span id="l40.39">   bool    mSuspendedRead;</span>
<a href="#l40.40"></a><span id="l40.40">   bool    mInsertPeriodRequired; // do we need to insert a '.' as part of the unblocking process</span>
<a href="#l40.41"></a><span id="l40.41"> </span>
<a href="#l40.42"></a><span id="l40.42">   nsresult ProcessIncomingPostData(nsIInputStream *inStr, uint32_t count);</span>
<a href="#l40.43"></a><span id="l40.43">   nsresult UnblockPostReader();</span>
<a href="#l40.44"></a><span id="l40.44">   nsresult UpdateSuspendedReadBytes(uint32_t aNewBytes, bool aAddToPostPeriodByteCount);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/mailnews/base/util/nsMsgUtils.cpp</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgUtils.cpp</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -222,17 +222,17 @@ nsresult NS_MsgGetPriorityFromString(</span>
<a href="#l41.4"></a><span id="l41.4">            nsMsgPriorityValue &amp; outPriority)</span>
<a href="#l41.5"></a><span id="l41.5"> {</span>
<a href="#l41.6"></a><span id="l41.6">   if (!priority)</span>
<a href="#l41.7"></a><span id="l41.7">     return NS_ERROR_NULL_POINTER;</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9">   // Note: Checking the values separately and _before_ the names,</span>
<a href="#l41.10"></a><span id="l41.10">   //        hoping for a much faster match;</span>
<a href="#l41.11"></a><span id="l41.11">   //       Only _drawback_, as &quot;priority&quot; handling is not truly specified:</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-  //        some softwares may have the number meanings reversed (1=Lowest) !?</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+  //        some software may have the number meanings reversed (1=Lowest) !?</span>
<a href="#l41.14"></a><span id="l41.14">   if (PL_strchr(priority, '1'))</span>
<a href="#l41.15"></a><span id="l41.15">     outPriority = nsMsgPriority::highest;</span>
<a href="#l41.16"></a><span id="l41.16">   else if (PL_strchr(priority, '2'))</span>
<a href="#l41.17"></a><span id="l41.17">     outPriority = nsMsgPriority::high;</span>
<a href="#l41.18"></a><span id="l41.18">   else if (PL_strchr(priority, '3'))</span>
<a href="#l41.19"></a><span id="l41.19">     outPriority = nsMsgPriority::normal;</span>
<a href="#l41.20"></a><span id="l41.20">   else if (PL_strchr(priority, '4'))</span>
<a href="#l41.21"></a><span id="l41.21">     outPriority = nsMsgPriority::low;</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineat">@@ -633,17 +633,17 @@ bool NS_MsgStripRE(const char **stringP,</span>
<a href="#l41.23"></a><span id="l41.23">   nsresult rv;</span>
<a href="#l41.24"></a><span id="l41.24">   nsString utf16LocalizedRe;</span>
<a href="#l41.25"></a><span id="l41.25">   NS_GetLocalizedUnicharPreferenceWithDefault(nullptr,</span>
<a href="#l41.26"></a><span id="l41.26">                                               &quot;mailnews.localizedRe&quot;,</span>
<a href="#l41.27"></a><span id="l41.27">                                               EmptyString(),</span>
<a href="#l41.28"></a><span id="l41.28">                                               utf16LocalizedRe);</span>
<a href="#l41.29"></a><span id="l41.29">   NS_ConvertUTF16toUTF8 localizedRe(utf16LocalizedRe);</span>
<a href="#l41.30"></a><span id="l41.30"> </span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">-  // hardcoded &quot;Re&quot; so that noone can configure Mozilla standards incompatible</span>
<a href="#l41.32"></a><span id="l41.32" class="difflineplus">+  // hardcoded &quot;Re&quot; so that no one can configure Mozilla standards incompatible</span>
<a href="#l41.33"></a><span id="l41.33">   nsAutoCString checkString(&quot;Re,RE,re,rE&quot;);</span>
<a href="#l41.34"></a><span id="l41.34">   if (!localizedRe.IsEmpty()) {</span>
<a href="#l41.35"></a><span id="l41.35">     checkString.Append(',');</span>
<a href="#l41.36"></a><span id="l41.36">     checkString.Append(localizedRe);</span>
<a href="#l41.37"></a><span id="l41.37">   }</span>
<a href="#l41.38"></a><span id="l41.38"> </span>
<a href="#l41.39"></a><span id="l41.39">   // decode the string</span>
<a href="#l41.40"></a><span id="l41.40">   nsCString decodedString;</span>
<a href="#l41.41"></a><span id="l41.41" class="difflineat">@@ -839,17 +839,17 @@ bool IsAFromSpaceLine(char *start, const</span>
<a href="#l41.42"></a><span id="l41.42">     start++;</span>
<a href="#l41.43"></a><span id="l41.43">   // If the leading '&gt;'s are followed by an 'F' then we have a possible case here.</span>
<a href="#l41.44"></a><span id="l41.44">   if ( (*start == 'F') &amp;&amp; (end-start &gt; 4) &amp;&amp; !strncmp(start, &quot;From &quot;, 5) )</span>
<a href="#l41.45"></a><span id="l41.45">     rv = true;</span>
<a href="#l41.46"></a><span id="l41.46">   return rv;</span>
<a href="#l41.47"></a><span id="l41.47"> }</span>
<a href="#l41.48"></a><span id="l41.48"> </span>
<a href="#l41.49"></a><span id="l41.49"> //</span>
<a href="#l41.50"></a><span id="l41.50" class="difflineminus">-// This function finds all lines starting with &quot;From &quot; or &quot;From &quot; preceeding</span>
<a href="#l41.51"></a><span id="l41.51" class="difflineplus">+// This function finds all lines starting with &quot;From &quot; or &quot;From &quot; preceding</span>
<a href="#l41.52"></a><span id="l41.52"> // with one or more '&gt;' (ie, &quot;&gt;From&quot;, &quot;&gt;&gt;From&quot;, etc) in the input buffer</span>
<a href="#l41.53"></a><span id="l41.53"> // (between 'start' and 'end') and prefix them with a &quot;&gt;&quot; .</span>
<a href="#l41.54"></a><span id="l41.54"> //</span>
<a href="#l41.55"></a><span id="l41.55"> nsresult EscapeFromSpaceLine(nsIOutputStream *outputStream, char *start, const char *end)</span>
<a href="#l41.56"></a><span id="l41.56"> {</span>
<a href="#l41.57"></a><span id="l41.57">   nsresult rv;</span>
<a href="#l41.58"></a><span id="l41.58">   char *pChar;</span>
<a href="#l41.59"></a><span id="l41.59">   uint32_t written;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/mailnews/base/util/nsMsgUtils.h</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgUtils.h</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -286,18 +286,18 @@ NS_MSG_BASE PRTime MsgConvertAgeInDaysTo</span>
<a href="#l42.4"></a><span id="l42.4"> NS_MSG_BASE nsresult MsgTermListToString(nsIArray *aTermList, nsCString &amp;aOutString);</span>
<a href="#l42.5"></a><span id="l42.5"> </span>
<a href="#l42.6"></a><span id="l42.6"> NS_MSG_BASE nsresult</span>
<a href="#l42.7"></a><span id="l42.7"> MsgStreamMsgHeaders(nsIInputStream *aInputStream, nsIStreamListener *aConsumer);</span>
<a href="#l42.8"></a><span id="l42.8"> </span>
<a href="#l42.9"></a><span id="l42.9"> /**</span>
<a href="#l42.10"></a><span id="l42.10">  * convert string to uint64_t</span>
<a href="#l42.11"></a><span id="l42.11">  *</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">- * @param str conveted string</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineminus">- * @returns   uint64_t vaule for success, 0 for parse failure</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineplus">+ * @param str converted string</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineplus">+ * @returns   uint64_t value for success, 0 for parse failure</span>
<a href="#l42.16"></a><span id="l42.16">  */</span>
<a href="#l42.17"></a><span id="l42.17"> NS_MSG_BASE uint64_t ParseUint64Str(const char *str);</span>
<a href="#l42.18"></a><span id="l42.18"> </span>
<a href="#l42.19"></a><span id="l42.19"> /**</span>
<a href="#l42.20"></a><span id="l42.20">  * Detect charset of file</span>
<a href="#l42.21"></a><span id="l42.21">  *</span>
<a href="#l42.22"></a><span id="l42.22">  * @param      aFile    The target of nsIFile</span>
<a href="#l42.23"></a><span id="l42.23">  * @param[out] aCharset The charset string</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/mailnews/compose/public/nsIMsgAttachment.idl</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/mailnews/compose/public/nsIMsgAttachment.idl</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -64,17 +64,17 @@ interface nsIMsgAttachment : nsISupports</span>
<a href="#l43.4"></a><span id="l43.4">    */</span>
<a href="#l43.5"></a><span id="l43.5">   attribute ACString contentLocation;</span>
<a href="#l43.6"></a><span id="l43.6"> </span>
<a href="#l43.7"></a><span id="l43.7">   /**</span>
<a href="#l43.8"></a><span id="l43.8">    * contentType attribute</span>
<a href="#l43.9"></a><span id="l43.9">    *</span>
<a href="#l43.10"></a><span id="l43.10">    * @Specify the content-type of the attachment, this does not include extra content-type parameters. If</span>
<a href="#l43.11"></a><span id="l43.11">    * @you need to specify extra information, use contentTypeParam, charset, macType or macCreator.</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-   * @If ommitted, it will be determined base on either the name, the url or the content of the file.</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+   * @If omitted, it will be determined base on either the name, the url or the content of the file.</span>
<a href="#l43.14"></a><span id="l43.14">    */</span>
<a href="#l43.15"></a><span id="l43.15">   attribute string    contentType;</span>
<a href="#l43.16"></a><span id="l43.16"> </span>
<a href="#l43.17"></a><span id="l43.17">   /**</span>
<a href="#l43.18"></a><span id="l43.18">    * contentTypeParam attribute</span>
<a href="#l43.19"></a><span id="l43.19">    *</span>
<a href="#l43.20"></a><span id="l43.20">    * @Specify the any content-type parameter (other than the content-type itself, charset, macType or macCreator).</span>
<a href="#l43.21"></a><span id="l43.21">    * @It will be added to the content-type during the send/save operation.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/mailnews/compose/public/nsIMsgCompose.idl</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/mailnews/compose/public/nsIMsgCompose.idl</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -260,17 +260,17 @@ interface nsIMsgCompose : nsIMsgSendList</span>
<a href="#l44.4"></a><span id="l44.4">                                               in boolean aQuoted,</span>
<a href="#l44.5"></a><span id="l44.5">                                               in boolean aHTMLEditor);</span>
<a href="#l44.6"></a><span id="l44.6"> </span>
<a href="#l44.7"></a><span id="l44.7">   /* Tell the doc state listeners that the doc state has changed</span>
<a href="#l44.8"></a><span id="l44.8">    * aNotificationType is from nsIMsgComposeNotificationType</span>
<a href="#l44.9"></a><span id="l44.9">    */</span>
<a href="#l44.10"></a><span id="l44.10">   [noscript] void notifyStateListeners(in long aNotificationType, in nsresult aResult);</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-  /* Retreive the progress object */</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+  /* Retrieve the progress object */</span>
<a href="#l44.14"></a><span id="l44.14">   readonly attribute nsIMsgProgress progress;</span>
<a href="#l44.15"></a><span id="l44.15"> </span>
<a href="#l44.16"></a><span id="l44.16"> 	/* ... */</span>
<a href="#l44.17"></a><span id="l44.17">   [noscript] void buildBodyMessageAndSignature();</span>
<a href="#l44.18"></a><span id="l44.18"> </span>
<a href="#l44.19"></a><span id="l44.19"> 	/* ... */</span>
<a href="#l44.20"></a><span id="l44.20">   [noscript] void buildQuotedMessageAndSignature();</span>
<a href="#l44.21"></a><span id="l44.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/mailnews/compose/public/nsIMsgComposeService.idl</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/mailnews/compose/public/nsIMsgComposeService.idl</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -41,17 +41,17 @@ interface nsIMsgComposeService : nsISupp</span>
<a href="#l45.4"></a><span id="l45.4">   void OpenComposeWindowWithURI(in string msgComposeWindowURL,</span>
<a href="#l45.5"></a><span id="l45.5">                                 in nsIURI aURI,</span>
<a href="#l45.6"></a><span id="l45.6">                                 [optional] in nsIMsgIdentity aIdentity);</span>
<a href="#l45.7"></a><span id="l45.7"> </span>
<a href="#l45.8"></a><span id="l45.8">   /* ... */</span>
<a href="#l45.9"></a><span id="l45.9">   void OpenComposeWindowWithParams(in string msgComposeWindowURL, in nsIMsgComposeParams params);</span>
<a href="#l45.10"></a><span id="l45.10"> </span>
<a href="#l45.11"></a><span id="l45.11">   /**</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-   * Creates an nsIMsgCompose instance and initalizes it.</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+   * Creates an nsIMsgCompose instance and initializes it.</span>
<a href="#l45.14"></a><span id="l45.14">    *</span>
<a href="#l45.15"></a><span id="l45.15">    * @param aParams   An nsIMsgComposeParams object containing the initial</span>
<a href="#l45.16"></a><span id="l45.16">    *                  details for the compose.</span>
<a href="#l45.17"></a><span id="l45.17">    * @param aWindow   The optional window associated with this compose object.</span>
<a href="#l45.18"></a><span id="l45.18">    * @param aDocShell The optional docShell of the editor element that is used</span>
<a href="#l45.19"></a><span id="l45.19">    *                  for composing.</span>
<a href="#l45.20"></a><span id="l45.20">    */</span>
<a href="#l45.21"></a><span id="l45.21">   nsIMsgCompose initCompose(in nsIMsgComposeParams aParams,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/mailnews/compose/public/nsIMsgSend.idl</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/mailnews/compose/public/nsIMsgSend.idl</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -312,17 +312,17 @@ interface nsIMsgSend : nsISupports</span>
<a href="#l46.4"></a><span id="l46.4">     nsresult fail(in nsresult aFailureCode, in wstring aErrorMsg);</span>
<a href="#l46.5"></a><span id="l46.5"> </span>
<a href="#l46.6"></a><span id="l46.6">     /* Disable UI notification (alert message) */</span>
<a href="#l46.7"></a><span id="l46.7">     void setGUINotificationState(in boolean aEnableFlag);</span>
<a href="#l46.8"></a><span id="l46.8"> </span>
<a href="#l46.9"></a><span id="l46.9">     /* Crypto */</span>
<a href="#l46.10"></a><span id="l46.10">     void BeginCryptoEncapsulation();</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-    /* retreive the last send process report*/</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+    /* retrieve the last send process report*/</span>
<a href="#l46.14"></a><span id="l46.14">     readonly attribute nsIMsgSendReport sendReport;</span>
<a href="#l46.15"></a><span id="l46.15"> </span>
<a href="#l46.16"></a><span id="l46.16">     /* methods for send listener ... */</span>
<a href="#l46.17"></a><span id="l46.17">     void notifyListenerOnStartSending(in string aMsgID, in unsigned long aMsgSize);</span>
<a href="#l46.18"></a><span id="l46.18">     void notifyListenerOnProgress(in string aMsgID, in unsigned long aProgress, in unsigned long aProgressMax);</span>
<a href="#l46.19"></a><span id="l46.19">     void notifyListenerOnStatus(in string aMsgID, in wstring aMsg);</span>
<a href="#l46.20"></a><span id="l46.20">     void notifyListenerOnStopSending(in string aMsgID, in nsresult aStatus, in wstring aMsg, in nsIFile returnFile);</span>
<a href="#l46.21"></a><span id="l46.21">     void deliverAsMailExit(in nsIURI aUrl, in nsresult aExitCode);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/mailnews/compose/src/nsComposeStrings.cpp</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/mailnews/compose/src/nsComposeStrings.cpp</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -2,17 +2,17 @@</span>
<a href="#l47.4"></a><span id="l47.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l47.5"></a><span id="l47.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l47.6"></a><span id="l47.6"> </span>
<a href="#l47.7"></a><span id="l47.7"> #include &quot;nsComposeStrings.h&quot;</span>
<a href="#l47.8"></a><span id="l47.8"> </span>
<a href="#l47.9"></a><span id="l47.9"> const char* errorStringNameForErrorCode(nsresult aCode)</span>
<a href="#l47.10"></a><span id="l47.10"> {</span>
<a href="#l47.11"></a><span id="l47.11"> #ifdef __GNUC__</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-// Temporary workaroung until bug 783526 is fixed.</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+// Temporary workaround until bug 783526 is fixed.</span>
<a href="#l47.14"></a><span id="l47.14"> #pragma GCC diagnostic push</span>
<a href="#l47.15"></a><span id="l47.15"> #pragma GCC diagnostic ignored &quot;-Wswitch&quot;</span>
<a href="#l47.16"></a><span id="l47.16"> #endif</span>
<a href="#l47.17"></a><span id="l47.17">   switch(aCode)</span>
<a href="#l47.18"></a><span id="l47.18">   {</span>
<a href="#l47.19"></a><span id="l47.19">     case NS_MSG_UNABLE_TO_OPEN_FILE:</span>
<a href="#l47.20"></a><span id="l47.20">       return &quot;unableToOpenFile&quot;;</span>
<a href="#l47.21"></a><span id="l47.21">     case NS_MSG_UNABLE_TO_OPEN_TMP_FILE:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgAppleEncode.cpp</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgAppleEncode.cpp</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -378,17 +378,17 @@ static struct magic magic[] =</span>
<a href="#l48.4"></a><span id="l48.4"> };</span>
<a href="#l48.5"></a><span id="l48.5"> static int num_magic = MOZ_ARRAY_LENGTH(magic);</span>
<a href="#l48.6"></a><span id="l48.6"> </span>
<a href="#l48.7"></a><span id="l48.7"> static const char *text_type    = TEXT_PLAIN;					/* the text file type. */</span>
<a href="#l48.8"></a><span id="l48.8"> static const char *default_type = APPLICATION_OCTET_STREAM;</span>
<a href="#l48.9"></a><span id="l48.9"> </span>
<a href="#l48.10"></a><span id="l48.10"> </span>
<a href="#l48.11"></a><span id="l48.11"> /*</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">- * Determins the format of the file &quot;inputf&quot;.  The name</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+ * Determines the format of the file &quot;inputf&quot;.  The name</span>
<a href="#l48.14"></a><span id="l48.14">  * of the file format (or NULL on error) is returned.</span>
<a href="#l48.15"></a><span id="l48.15">  */</span>
<a href="#l48.16"></a><span id="l48.16"> static const char *magic_look(char *inbuff, int numread)</span>
<a href="#l48.17"></a><span id="l48.17"> {</span>
<a href="#l48.18"></a><span id="l48.18">     int i, j;</span>
<a href="#l48.19"></a><span id="l48.19"> </span>
<a href="#l48.20"></a><span id="l48.20"> 	for (i=0; i&lt;num_magic; i++)</span>
<a href="#l48.21"></a><span id="l48.21"> 	{</span>
<a href="#l48.22"></a><span id="l48.22" class="difflineat">@@ -537,17 +537,17 @@ int ap_encode_data(</span>
<a href="#l48.23"></a><span id="l48.23"> 	return status;</span>
<a href="#l48.24"></a><span id="l48.24"> }</span>
<a href="#l48.25"></a><span id="l48.25"> </span>
<a href="#l48.26"></a><span id="l48.26"> static char basis_64[] =</span>
<a href="#l48.27"></a><span id="l48.27">    &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;</span>
<a href="#l48.28"></a><span id="l48.28"> </span>
<a href="#l48.29"></a><span id="l48.29"> /*</span>
<a href="#l48.30"></a><span id="l48.30"> **	convert the stream in the inbuff to 64 format and put it in the out buff.</span>
<a href="#l48.31"></a><span id="l48.31" class="difflineminus">-**  To make the life easier, the caller will responcable of the cheking of the outbuff's bundary.</span>
<a href="#l48.32"></a><span id="l48.32" class="difflineplus">+**  To make the life easier, the caller will responcable of the checking of the outbuff's bundary.</span>
<a href="#l48.33"></a><span id="l48.33"> */</span>
<a href="#l48.34"></a><span id="l48.34"> static int</span>
<a href="#l48.35"></a><span id="l48.35"> to64(appledouble_encode_object* p_ap_encode_obj,</span>
<a href="#l48.36"></a><span id="l48.36"> 	char	*p,</span>
<a href="#l48.37"></a><span id="l48.37"> 	int 	in_size)</span>
<a href="#l48.38"></a><span id="l48.38"> {</span>
<a href="#l48.39"></a><span id="l48.39"> 	int 	status;</span>
<a href="#l48.40"></a><span id="l48.40">     int c1, c2, c3, ct;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -266,17 +266,17 @@ nsresult mime_generate_headers(nsIMsgCom</span>
<a href="#l49.4"></a><span id="l49.4"> </span>
<a href="#l49.5"></a><span id="l49.5">   PRExplodedTime now;</span>
<a href="#l49.6"></a><span id="l49.6">   PR_ExplodeTime(PR_Now(), PR_LocalTimeParameters, &amp;now);</span>
<a href="#l49.7"></a><span id="l49.7">   int gmtoffset = (now.tm_params.tp_gmt_offset + now.tm_params.tp_dst_offset) / 60;</span>
<a href="#l49.8"></a><span id="l49.8"> </span>
<a href="#l49.9"></a><span id="l49.9">   /* Use PR_FormatTimeUSEnglish() to format the date in US English format,</span>
<a href="#l49.10"></a><span id="l49.10">      then figure out what our local GMT offset is, and append it (since</span>
<a href="#l49.11"></a><span id="l49.11">      PR_FormatTimeUSEnglish() can't do that.) Generate four digit years as</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-     per RFC 1123 (superceding RFC 822.)</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+     per RFC 1123 (superseding RFC 822.)</span>
<a href="#l49.14"></a><span id="l49.14">    */</span>
<a href="#l49.15"></a><span id="l49.15">   char dateString[130];</span>
<a href="#l49.16"></a><span id="l49.16">   PR_FormatTimeUSEnglish(dateString, sizeof(dateString),</span>
<a href="#l49.17"></a><span id="l49.17">                &quot;%a, %d %b %Y %H:%M:%S &quot;,</span>
<a href="#l49.18"></a><span id="l49.18">                &amp;now);</span>
<a href="#l49.19"></a><span id="l49.19"> </span>
<a href="#l49.20"></a><span id="l49.20">   char *entryPoint = dateString + strlen(dateString);</span>
<a href="#l49.21"></a><span id="l49.21">   PR_snprintf(entryPoint, sizeof(dateString) - (entryPoint - dateString),</span>
<a href="#l49.22"></a><span id="l49.22" class="difflineat">@@ -418,17 +418,17 @@ nsresult mime_generate_headers(nsIMsgCom</span>
<a href="#l49.23"></a><span id="l49.23">             }</span>
<a href="#l49.24"></a><span id="l49.24">           }</span>
<a href="#l49.25"></a><span id="l49.25">         }</span>
<a href="#l49.26"></a><span id="l49.26">       }</span>
<a href="#l49.27"></a><span id="l49.27">     }</span>
<a href="#l49.28"></a><span id="l49.28">   }</span>
<a href="#l49.29"></a><span id="l49.29"> </span>
<a href="#l49.30"></a><span id="l49.30">   // We don't want to emit a Bcc header to the output. If we are saving this to</span>
<a href="#l49.31"></a><span id="l49.31" class="difflineminus">-  // Drafts/Sent, this is readded later in nsMsgSend.cpp.</span>
<a href="#l49.32"></a><span id="l49.32" class="difflineplus">+  // Drafts/Sent, this is re-added later in nsMsgSend.cpp.</span>
<a href="#l49.33"></a><span id="l49.33">   finalHeaders-&gt;DeleteHeader(&quot;bcc&quot;);</span>
<a href="#l49.34"></a><span id="l49.34"> </span>
<a href="#l49.35"></a><span id="l49.35">   // Skip no or empty priority.</span>
<a href="#l49.36"></a><span id="l49.36">   nsAutoCString priority;</span>
<a href="#l49.37"></a><span id="l49.37">   rv = fields-&gt;GetRawHeader(&quot;X-Priority&quot;, priority);</span>
<a href="#l49.38"></a><span id="l49.38">   if (NS_SUCCEEDED(rv) &amp;&amp; !priority.IsEmpty())</span>
<a href="#l49.39"></a><span id="l49.39">   {</span>
<a href="#l49.40"></a><span id="l49.40">     nsMsgPriorityValue priorityValue;</span>
<a href="#l49.41"></a><span id="l49.41" class="difflineat">@@ -926,17 +926,17 @@ msg_generate_message_id (nsIMsgIdentity </span>
<a href="#l49.42"></a><span id="l49.42"> </span>
<a href="#l49.43"></a><span id="l49.43"> </span>
<a href="#l49.44"></a><span id="l49.44"> inline static bool is7bitCharset(const nsCString&amp; charset)</span>
<a href="#l49.45"></a><span id="l49.45"> {</span>
<a href="#l49.46"></a><span id="l49.46">   // charset name is canonical (no worry about case-sensitivity)</span>
<a href="#l49.47"></a><span id="l49.47">   return Substring(charset, 0, 8).EqualsLiteral(&quot;ISO-2022-&quot;);</span>
<a href="#l49.48"></a><span id="l49.48"> }</span>
<a href="#l49.49"></a><span id="l49.49"> </span>
<a href="#l49.50"></a><span id="l49.50" class="difflineminus">-#define PR_MAX_FOLDING_LEN 75     // this is to gurantee the folded line will</span>
<a href="#l49.51"></a><span id="l49.51" class="difflineplus">+#define PR_MAX_FOLDING_LEN 75     // this is to guarantee the folded line will</span>
<a href="#l49.52"></a><span id="l49.52">                                   // never be greater than 78 = 75 + CRLFLWSP</span>
<a href="#l49.53"></a><span id="l49.53"> /*static */ char *</span>
<a href="#l49.54"></a><span id="l49.54"> RFC2231ParmFolding(const char *parmName, const nsCString&amp; charset,</span>
<a href="#l49.55"></a><span id="l49.55">                    const char *language, const nsString&amp; parmValue)</span>
<a href="#l49.56"></a><span id="l49.56"> {</span>
<a href="#l49.57"></a><span id="l49.57">   NS_ENSURE_TRUE(parmName &amp;&amp; *parmName &amp;&amp; !parmValue.IsEmpty(), nullptr);</span>
<a href="#l49.58"></a><span id="l49.58"> </span>
<a href="#l49.59"></a><span id="l49.59">   bool needEscape;</span>
<a href="#l49.60"></a><span id="l49.60" class="difflineat">@@ -1217,17 +1217,17 @@ mime_type_requires_b64_p (const char *ty</span>
<a href="#l49.61"></a><span id="l49.61"> </span>
<a href="#l49.62"></a><span id="l49.62">   else if (!PL_strncasecmp (type, &quot;image/&quot;, 6) ||</span>
<a href="#l49.63"></a><span id="l49.63">        !PL_strncasecmp (type, &quot;audio/&quot;, 6) ||</span>
<a href="#l49.64"></a><span id="l49.64">        !PL_strncasecmp (type, &quot;video/&quot;, 6) ||</span>
<a href="#l49.65"></a><span id="l49.65">        !PL_strncasecmp (type, &quot;application/&quot;, 12))</span>
<a href="#l49.66"></a><span id="l49.66">   {</span>
<a href="#l49.67"></a><span id="l49.67">     /* The following types are application/ or image/ types that are actually</span>
<a href="#l49.68"></a><span id="l49.68">      known to contain textual data (meaning line-based, not binary, where</span>
<a href="#l49.69"></a><span id="l49.69" class="difflineminus">-     CRLF conversion is desired rather than disasterous.)  So, if the type</span>
<a href="#l49.70"></a><span id="l49.70" class="difflineplus">+     CRLF conversion is desired rather than disastrous.)  So, if the type</span>
<a href="#l49.71"></a><span id="l49.71">      is any of these, it does not *require* base64, and if we do need to</span>
<a href="#l49.72"></a><span id="l49.72">      encode it for other reasons, we'll probably use quoted-printable.</span>
<a href="#l49.73"></a><span id="l49.73">      But, if it's not one of these types, then we assume that any subtypes</span>
<a href="#l49.74"></a><span id="l49.74">      of the non-&quot;text/&quot; types are binary data, where CRLF conversion would</span>
<a href="#l49.75"></a><span id="l49.75">      corrupt it, so we use base64 right off the bat.</span>
<a href="#l49.76"></a><span id="l49.76"> </span>
<a href="#l49.77"></a><span id="l49.77">      The reason it's desirable to ship these as text instead of just using</span>
<a href="#l49.78"></a><span id="l49.78">      base64 all the time is mainly to preserve the readability of them for</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -1463,17 +1463,17 @@ NS_IMETHODIMP nsMsgCompose::SendMsg(MSG_</span>
<a href="#l50.4"></a><span id="l50.4">       mMsgSend-&gt;GetSendReport(getter_AddRefs(sendReport));</span>
<a href="#l50.5"></a><span id="l50.5">     if (sendReport)</span>
<a href="#l50.6"></a><span id="l50.6">     {</span>
<a href="#l50.7"></a><span id="l50.7">       nsresult theError;</span>
<a href="#l50.8"></a><span id="l50.8">       sendReport-&gt;DisplayReport(prompt, true, true, &amp;theError);</span>
<a href="#l50.9"></a><span id="l50.9">     }</span>
<a href="#l50.10"></a><span id="l50.10">     else</span>
<a href="#l50.11"></a><span id="l50.11">     {</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-      /* If we come here it's because we got an error before we could intialize a</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+      /* If we come here it's because we got an error before we could initialize a</span>
<a href="#l50.14"></a><span id="l50.14">          send report! Let's try our best...</span>
<a href="#l50.15"></a><span id="l50.15">       */</span>
<a href="#l50.16"></a><span id="l50.16">       switch (deliverMode)</span>
<a href="#l50.17"></a><span id="l50.17">       {</span>
<a href="#l50.18"></a><span id="l50.18">         case nsIMsgCompDeliverMode::Later:</span>
<a href="#l50.19"></a><span id="l50.19">           nsMsgDisplayMessageByName(prompt, &quot;unableToSendLater&quot;);</span>
<a href="#l50.20"></a><span id="l50.20">           break;</span>
<a href="#l50.21"></a><span id="l50.21">         case nsIMsgCompDeliverMode::AutoSaveAsDraft:</span>
<a href="#l50.22"></a><span id="l50.22" class="difflineat">@@ -2272,17 +2272,17 @@ NS_IMETHODIMP nsMsgCompose::GetSavedFold</span>
<a href="#l50.23"></a><span id="l50.23"> NS_IMETHODIMP nsMsgCompose::GetOriginalMsgURI(char ** originalMsgURI)</span>
<a href="#l50.24"></a><span id="l50.24"> {</span>
<a href="#l50.25"></a><span id="l50.25">   NS_ENSURE_ARG_POINTER(originalMsgURI);</span>
<a href="#l50.26"></a><span id="l50.26">   *originalMsgURI = ToNewCString(mOriginalMsgURI);</span>
<a href="#l50.27"></a><span id="l50.27">   return (*originalMsgURI) ? NS_OK : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l50.28"></a><span id="l50.28"> }</span>
<a href="#l50.29"></a><span id="l50.29"> </span>
<a href="#l50.30"></a><span id="l50.30"> ////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l50.31"></a><span id="l50.31" class="difflineminus">-// THIS IS THE CLASS THAT IS THE STREAM CONSUMER OF THE HTML OUPUT</span>
<a href="#l50.32"></a><span id="l50.32" class="difflineplus">+// THIS IS THE CLASS THAT IS THE STREAM CONSUMER OF THE HTML OUTPUT</span>
<a href="#l50.33"></a><span id="l50.33"> // FROM LIBMIME. THIS IS FOR QUOTING</span>
<a href="#l50.34"></a><span id="l50.34"> ////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l50.35"></a><span id="l50.35"> QuotingOutputStreamListener::~QuotingOutputStreamListener()</span>
<a href="#l50.36"></a><span id="l50.36"> {</span>
<a href="#l50.37"></a><span id="l50.37"> }</span>
<a href="#l50.38"></a><span id="l50.38"> </span>
<a href="#l50.39"></a><span id="l50.39"> QuotingOutputStreamListener::QuotingOutputStreamListener(const char * originalMsgURI,</span>
<a href="#l50.40"></a><span id="l50.40">                                                          nsIMsgDBHdr *originalMsgHdr,</span>
<a href="#l50.41"></a><span id="l50.41" class="difflineat">@@ -2608,17 +2608,17 @@ NS_IMETHODIMP QuotingOutputStreamListene</span>
<a href="#l50.42"></a><span id="l50.42">         do_GetService(NS_MSGACCOUNTMANAGER_CONTRACTID, &amp;rv);</span>
<a href="#l50.43"></a><span id="l50.43">       NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l50.44"></a><span id="l50.44"> </span>
<a href="#l50.45"></a><span id="l50.45">       nsCOMPtr&lt;nsIArray&gt; identities;</span>
<a href="#l50.46"></a><span id="l50.46">       nsCString accountKey;</span>
<a href="#l50.47"></a><span id="l50.47">       mOrigMsgHdr-&gt;GetAccountKey(getter_Copies(accountKey));</span>
<a href="#l50.48"></a><span id="l50.48">       if (replyToSelfCheckAll)</span>
<a href="#l50.49"></a><span id="l50.49">       {</span>
<a href="#l50.50"></a><span id="l50.50" class="difflineminus">-        // Check all avaliable identities if the pref was set.</span>
<a href="#l50.51"></a><span id="l50.51" class="difflineplus">+        // Check all available identities if the pref was set.</span>
<a href="#l50.52"></a><span id="l50.52">         accountManager-&gt;GetAllIdentities(getter_AddRefs(identities));</span>
<a href="#l50.53"></a><span id="l50.53">       }</span>
<a href="#l50.54"></a><span id="l50.54">       else if (!accountKey.IsEmpty())</span>
<a href="#l50.55"></a><span id="l50.55">       {</span>
<a href="#l50.56"></a><span id="l50.56">          // Check headers to see which account the message came in from</span>
<a href="#l50.57"></a><span id="l50.57">          // (only works for pop3).</span>
<a href="#l50.58"></a><span id="l50.58">         nsCOMPtr&lt;nsIMsgAccount&gt; account;</span>
<a href="#l50.59"></a><span id="l50.59">         accountManager-&gt;GetAccount(accountKey, getter_AddRefs(account));</span>
<a href="#l50.60"></a><span id="l50.60" class="difflineat">@@ -4568,17 +4568,17 @@ nsMsgCompose::BuildBodyMessageAndSignatu</span>
<a href="#l50.61"></a><span id="l50.61"> </span>
<a href="#l50.62"></a><span id="l50.62">   //</span>
<a href="#l50.63"></a><span id="l50.63">   // Now, we have the body so we can just blast it into the</span>
<a href="#l50.64"></a><span id="l50.64">   // composition editor window.</span>
<a href="#l50.65"></a><span id="l50.65">   //</span>
<a href="#l50.66"></a><span id="l50.66">   nsAutoString   body;</span>
<a href="#l50.67"></a><span id="l50.67">   m_compFields-&gt;GetBody(body);</span>
<a href="#l50.68"></a><span id="l50.68"> </span>
<a href="#l50.69"></a><span id="l50.69" class="difflineminus">-  /* Some time we want to add a signature and sometime we wont. Let's figure that now...*/</span>
<a href="#l50.70"></a><span id="l50.70" class="difflineplus">+  /* Some time we want to add a signature and sometime we won't. Let's figure that now...*/</span>
<a href="#l50.71"></a><span id="l50.71">   bool addSignature;</span>
<a href="#l50.72"></a><span id="l50.72">   bool isQuoted = false;</span>
<a href="#l50.73"></a><span id="l50.73">   switch (mType)</span>
<a href="#l50.74"></a><span id="l50.74">   {</span>
<a href="#l50.75"></a><span id="l50.75">     case nsIMsgCompType::ForwardInline :</span>
<a href="#l50.76"></a><span id="l50.76">       addSignature = true;</span>
<a href="#l50.77"></a><span id="l50.77">       isQuoted = true;</span>
<a href="#l50.78"></a><span id="l50.78">       break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompose.h</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompose.h</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -142,17 +142,17 @@ protected:</span>
<a href="#l51.4"></a><span id="l51.4">   bool                                      mInsertingQuotedContent;</span>
<a href="#l51.5"></a><span id="l51.5">   MSG_DeliverMode                           mDeliverMode;  // nsIMsgCompDeliverMode long.</span>
<a href="#l51.6"></a><span id="l51.6"> </span>
<a href="#l51.7"></a><span id="l51.7">   friend class QuotingOutputStreamListener;</span>
<a href="#l51.8"></a><span id="l51.8">   friend class nsMsgComposeSendListener;</span>
<a href="#l51.9"></a><span id="l51.9"> };</span>
<a href="#l51.10"></a><span id="l51.10"> </span>
<a href="#l51.11"></a><span id="l51.11"> ////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-// THIS IS THE CLASS THAT IS THE STREAM Listener OF THE HTML OUPUT</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+// THIS IS THE CLASS THAT IS THE STREAM Listener OF THE HTML OUTPUT</span>
<a href="#l51.14"></a><span id="l51.14"> // FROM LIBMIME. THIS IS FOR QUOTING</span>
<a href="#l51.15"></a><span id="l51.15"> ////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l51.16"></a><span id="l51.16"> class QuotingOutputStreamListener : public nsIMsgQuotingOutputStreamListener</span>
<a href="#l51.17"></a><span id="l51.17"> {</span>
<a href="#l51.18"></a><span id="l51.18"> public:</span>
<a href="#l51.19"></a><span id="l51.19">     QuotingOutputStreamListener(const char *originalMsgURI,</span>
<a href="#l51.20"></a><span id="l51.20">                                 nsIMsgDBHdr *origMsgHdr,</span>
<a href="#l51.21"></a><span id="l51.21">                                 bool quoteHeaders,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -1704,17 +1704,17 @@ nsMsgComposeAndSend::ProcessMultipartRel</span>
<a href="#l52.4"></a><span id="l52.4">     m_attachments[i]-&gt;mDeleteFile = true;</span>
<a href="#l52.5"></a><span id="l52.5">     m_attachments[i]-&gt;m_done = false;</span>
<a href="#l52.6"></a><span id="l52.6">     m_attachments[i]-&gt;SetMimeDeliveryState(this);</span>
<a href="#l52.7"></a><span id="l52.7">     m_attachments[i]-&gt;mNodeIndex = locCount;</span>
<a href="#l52.8"></a><span id="l52.8"> </span>
<a href="#l52.9"></a><span id="l52.9">     j++;</span>
<a href="#l52.10"></a><span id="l52.10">     domSaveArray[j].element = domElement;</span>
<a href="#l52.11"></a><span id="l52.11"> </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-    // check if we have alreay attached this object, don't need to attach it twice</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+    // check if we have already attached this object, don't need to attach it twice</span>
<a href="#l52.14"></a><span id="l52.14">     duplicateOf = -1;</span>
<a href="#l52.15"></a><span id="l52.15">     for (k = mPreloadedAttachmentCount; k &lt; i; k++)</span>
<a href="#l52.16"></a><span id="l52.16">     {</span>
<a href="#l52.17"></a><span id="l52.17">       bool isEqual = false;</span>
<a href="#l52.18"></a><span id="l52.18">       NS_ASSERTION(attachment-&gt;m_url, &quot;null attachment url!&quot;);</span>
<a href="#l52.19"></a><span id="l52.19">       if (attachment-&gt;m_url)</span>
<a href="#l52.20"></a><span id="l52.20">         (void)attachment-&gt;m_url-&gt;Equals(m_attachments[k]-&gt;mURL, &amp;isEqual);</span>
<a href="#l52.21"></a><span id="l52.21">       if (isEqual)</span>
<a href="#l52.22"></a><span id="l52.22" class="difflineat">@@ -2772,17 +2772,17 @@ nsMsgComposeAndSend::InitCompositionFiel</span>
<a href="#l52.23"></a><span id="l52.23">                     mCompFields-&gt;GetSubject(), mCompFields-&gt;GetReferences(),</span>
<a href="#l52.24"></a><span id="l52.24">                     mCompFields-&gt;GetOrganization(), &quot;&quot;);</span>
<a href="#l52.25"></a><span id="l52.25">   }</span>
<a href="#l52.26"></a><span id="l52.26">   return NS_OK;</span>
<a href="#l52.27"></a><span id="l52.27"> }</span>
<a href="#l52.28"></a><span id="l52.28"> </span>
<a href="#l52.29"></a><span id="l52.29"> // Add default headers to outgoing messages see Bug #61520</span>
<a href="#l52.30"></a><span id="l52.30"> // mail.identity.&lt;id#&gt;.headers pref is a comma separated value of pref names</span>
<a href="#l52.31"></a><span id="l52.31" class="difflineminus">-// containging headers to add headers are stored in</span>
<a href="#l52.32"></a><span id="l52.32" class="difflineplus">+// containing headers to add headers are stored in</span>
<a href="#l52.33"></a><span id="l52.33"> // mail.identity.&lt;id#&gt;.header.&lt;header name&gt; grab all the headers, mime encode</span>
<a href="#l52.34"></a><span id="l52.34"> // them and add them to the other custom headers.</span>
<a href="#l52.35"></a><span id="l52.35"> nsresult</span>
<a href="#l52.36"></a><span id="l52.36"> nsMsgComposeAndSend::AddDefaultCustomHeaders() {</span>
<a href="#l52.37"></a><span id="l52.37">   nsCString headersList;</span>
<a href="#l52.38"></a><span id="l52.38">   // get names of prefs containing headers to add</span>
<a href="#l52.39"></a><span id="l52.39">   nsresult rv = mUserIdentity-&gt;GetCharAttribute(&quot;headers&quot;, headersList);</span>
<a href="#l52.40"></a><span id="l52.40">   if (NS_SUCCEEDED(rv) &amp;&amp; !headersList.IsEmpty()) {</span>
<a href="#l52.41"></a><span id="l52.41" class="difflineat">@@ -2927,17 +2927,17 @@ nsMsgComposeAndSend::AddMailReplyToHeade</span>
<a href="#l52.42"></a><span id="l52.42">     RemoveDuplicateAddresses(recipients, EmptyCString(), recipients_no_dups);</span>
<a href="#l52.43"></a><span id="l52.43"> </span>
<a href="#l52.44"></a><span id="l52.44">     // Remove reply-to mangling mailing lists from recipients...</span>
<a href="#l52.45"></a><span id="l52.45">     nsAutoCString recipients_without_mailing_lists;</span>
<a href="#l52.46"></a><span id="l52.46">     RemoveDuplicateAddresses(recipients_no_dups, mailing_lists,</span>
<a href="#l52.47"></a><span id="l52.47">                              recipients_without_mailing_lists);</span>
<a href="#l52.48"></a><span id="l52.48"> </span>
<a href="#l52.49"></a><span id="l52.49">     // ... If the result is equal to the input, none of the recipients</span>
<a href="#l52.50"></a><span id="l52.50" class="difflineminus">-    // occure in the MRT addresses and therefore we stop here.</span>
<a href="#l52.51"></a><span id="l52.51" class="difflineplus">+    // occur in the MRT addresses and therefore we stop here.</span>
<a href="#l52.52"></a><span id="l52.52">     if (recipients_no_dups == recipients_without_mailing_lists)</span>
<a href="#l52.53"></a><span id="l52.53">       return NS_OK;</span>
<a href="#l52.54"></a><span id="l52.54">   }</span>
<a href="#l52.55"></a><span id="l52.55"> </span>
<a href="#l52.56"></a><span id="l52.56">   // Set Mail-Reply-To</span>
<a href="#l52.57"></a><span id="l52.57">   nsAutoCString replyTo, mailReplyTo;</span>
<a href="#l52.58"></a><span id="l52.58">   replyTo = mCompFields-&gt;GetReplyTo();</span>
<a href="#l52.59"></a><span id="l52.59">   if (replyTo.IsEmpty())</span>
<a href="#l52.60"></a><span id="l52.60" class="difflineat">@@ -2999,17 +2999,17 @@ nsMsgComposeAndSend::Init(</span>
<a href="#l52.61"></a><span id="l52.61">               nsIArray *attachments,</span>
<a href="#l52.62"></a><span id="l52.62">               nsIArray *preloaded_attachments,</span>
<a href="#l52.63"></a><span id="l52.63">               const nsAString &amp;password,</span>
<a href="#l52.64"></a><span id="l52.64">               const nsACString &amp;aOriginalMsgURI,</span>
<a href="#l52.65"></a><span id="l52.65">               MSG_ComposeType aType)</span>
<a href="#l52.66"></a><span id="l52.66"> {</span>
<a href="#l52.67"></a><span id="l52.67">   nsresult      rv = NS_OK;</span>
<a href="#l52.68"></a><span id="l52.68"> </span>
<a href="#l52.69"></a><span id="l52.69" class="difflineminus">-  //Let make sure we retreive the correct number of related parts. It may have changed since last time</span>
<a href="#l52.70"></a><span id="l52.70" class="difflineplus">+  //Let make sure we retrieve the correct number of related parts. It may have changed since last time</span>
<a href="#l52.71"></a><span id="l52.71">   GetMultipartRelatedCount(true);</span>
<a href="#l52.72"></a><span id="l52.72"> </span>
<a href="#l52.73"></a><span id="l52.73">   nsString msg;</span>
<a href="#l52.74"></a><span id="l52.74">   if (!mComposeBundle)</span>
<a href="#l52.75"></a><span id="l52.75">   {</span>
<a href="#l52.76"></a><span id="l52.76">     nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l52.77"></a><span id="l52.77">       mozilla::services::GetStringBundleService();</span>
<a href="#l52.78"></a><span id="l52.78">     NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l52.79"></a><span id="l52.79" class="difflineat">@@ -3139,17 +3139,17 @@ NS_IMETHODIMP nsMsgComposeAndSend::SendD</span>
<a href="#l52.80"></a><span id="l52.80"> </span>
<a href="#l52.81"></a><span id="l52.81">     DeliverAsNewsExit(aUrl, aExitCode);</span>
<a href="#l52.82"></a><span id="l52.82">   }</span>
<a href="#l52.83"></a><span id="l52.83">   else</span>
<a href="#l52.84"></a><span id="l52.84">   {</span>
<a href="#l52.85"></a><span id="l52.85">     if (NS_FAILED(aExitCode))</span>
<a href="#l52.86"></a><span id="l52.86">     {</span>
<a href="#l52.87"></a><span id="l52.87"> #ifdef __GNUC__</span>
<a href="#l52.88"></a><span id="l52.88" class="difflineminus">-// Temporary workaroung until bug 783526 is fixed.</span>
<a href="#l52.89"></a><span id="l52.89" class="difflineplus">+// Temporary workaround until bug 783526 is fixed.</span>
<a href="#l52.90"></a><span id="l52.90"> #pragma GCC diagnostic push</span>
<a href="#l52.91"></a><span id="l52.91"> #pragma GCC diagnostic ignored &quot;-Wswitch&quot;</span>
<a href="#l52.92"></a><span id="l52.92"> #endif</span>
<a href="#l52.93"></a><span id="l52.93">       switch (aExitCode)</span>
<a href="#l52.94"></a><span id="l52.94">       {</span>
<a href="#l52.95"></a><span id="l52.95">         case NS_ERROR_UNKNOWN_HOST:</span>
<a href="#l52.96"></a><span id="l52.96">         case NS_ERROR_UNKNOWN_PROXY_HOST:</span>
<a href="#l52.97"></a><span id="l52.97">           aExitCode = NS_ERROR_SMTP_SEND_FAILED_UNKNOWN_SERVER;</span>
<a href="#l52.98"></a><span id="l52.98" class="difflineat">@@ -4262,17 +4262,17 @@ nsMsgGetEnvelopeLine(void)</span>
<a href="#l52.99"></a><span id="l52.99">   PRExplodedTime    now;</span>
<a href="#l52.100"></a><span id="l52.100">   char              buffer[128] = &quot;&quot;;</span>
<a href="#l52.101"></a><span id="l52.101"> </span>
<a href="#l52.102"></a><span id="l52.102">   // Generate envelope line in format of:  From - Sat Apr 18 20:01:49 1998</span>
<a href="#l52.103"></a><span id="l52.103">   //</span>
<a href="#l52.104"></a><span id="l52.104">   // Use PR_FormatTimeUSEnglish() to format the date in US English format,</span>
<a href="#l52.105"></a><span id="l52.105">   // then figure out what our local GMT offset is, and append it (since</span>
<a href="#l52.106"></a><span id="l52.106">   // PR_FormatTimeUSEnglish() can't do that.) Generate four digit years as</span>
<a href="#l52.107"></a><span id="l52.107" class="difflineminus">-  // per RFC 1123 (superceding RFC 822.)</span>
<a href="#l52.108"></a><span id="l52.108" class="difflineplus">+  // per RFC 1123 (superseding RFC 822.)</span>
<a href="#l52.109"></a><span id="l52.109">   //</span>
<a href="#l52.110"></a><span id="l52.110">   PR_ExplodeTime(PR_Now(), PR_LocalTimeParameters, &amp;now);</span>
<a href="#l52.111"></a><span id="l52.111">   PR_FormatTimeUSEnglish(buffer, sizeof(buffer),</span>
<a href="#l52.112"></a><span id="l52.112">                &quot;%a %b %d %H:%M:%S %Y&quot;,</span>
<a href="#l52.113"></a><span id="l52.113">                &amp;now);</span>
<a href="#l52.114"></a><span id="l52.114"> </span>
<a href="#l52.115"></a><span id="l52.115">   // This value must be in ctime() format, with English abbreviations.</span>
<a href="#l52.116"></a><span id="l52.116">   // PL_strftime(&quot;... %c ...&quot;) is no good, because it is localized.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.h</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.h</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -79,17 +79,17 @@</span>
<a href="#l53.4"></a><span id="l53.4"> </span>
<a href="#l53.5"></a><span id="l53.5"> /* Whether the contents of the BCC header should be preserved in the FCC'ed</span>
<a href="#l53.6"></a><span id="l53.6">    copy of a message.  See comments below, in mime_do_fcc_1().</span>
<a href="#l53.7"></a><span id="l53.7">  */</span>
<a href="#l53.8"></a><span id="l53.8"> #define SAVE_BCC_IN_FCC_FILE</span>
<a href="#l53.9"></a><span id="l53.9"> </span>
<a href="#l53.10"></a><span id="l53.10"> /* When attaching an HTML document, one must indicate the original URL of</span>
<a href="#l53.11"></a><span id="l53.11">    that document, if the receiver is to have any chance of being able to</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-   retreive and display the inline images, or to click on any links in the</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+   retrieve and display the inline images, or to click on any links in the</span>
<a href="#l53.14"></a><span id="l53.14">    HTML.</span>
<a href="#l53.15"></a><span id="l53.15"> </span>
<a href="#l53.16"></a><span id="l53.16">    The way we have done this in the past is by inserting a &lt;BASE&gt; tag as the</span>
<a href="#l53.17"></a><span id="l53.17">    first line of all HTML documents we attach.  (This is kind of bad in that</span>
<a href="#l53.18"></a><span id="l53.18">    we're actually modifying the document, and it really isn't our place to</span>
<a href="#l53.19"></a><span id="l53.19">    do that.)</span>
<a href="#l53.20"></a><span id="l53.20"> </span>
<a href="#l53.21"></a><span id="l53.21">    The sanctioned *new* way of doing this is to insert a Content-Base header</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSendReport.cpp</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSendReport.cpp</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -270,17 +270,17 @@ NS_IMETHODIMP nsMsgSendReport::DisplayRe</span>
<a href="#l54.4"></a><span id="l54.4">     //TODO display a success error message</span>
<a href="#l54.5"></a><span id="l54.5">     return NS_OK;</span>
<a href="#l54.6"></a><span id="l54.6">   }</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8">   //Do we have an explanation of the error? if no, try to build one...</span>
<a href="#l54.9"></a><span id="l54.9">   if (currMessage.IsEmpty())</span>
<a href="#l54.10"></a><span id="l54.10">   {</span>
<a href="#l54.11"></a><span id="l54.11"> #ifdef __GNUC__</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-// Temporary workaroung until bug 783526 is fixed.</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+// Temporary workaround until bug 783526 is fixed.</span>
<a href="#l54.14"></a><span id="l54.14"> #pragma GCC diagnostic push</span>
<a href="#l54.15"></a><span id="l54.15"> #pragma GCC diagnostic ignored &quot;-Wswitch&quot;</span>
<a href="#l54.16"></a><span id="l54.16"> #endif</span>
<a href="#l54.17"></a><span id="l54.17">     switch (currError)</span>
<a href="#l54.18"></a><span id="l54.18">     {</span>
<a href="#l54.19"></a><span id="l54.19">       case NS_BINDING_ABORTED:</span>
<a href="#l54.20"></a><span id="l54.20">       case NS_ERROR_SEND_FAILED:</span>
<a href="#l54.21"></a><span id="l54.21">       case NS_ERROR_SEND_FAILED_BUT_NNTP_OK:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -89,17 +89,17 @@ nsresult nsExplainErrorDetails(nsISmtpUr</span>
<a href="#l55.4"></a><span id="l55.4">   nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l55.5"></a><span id="l55.5">   nsresult rv = bundleService-&gt;CreateBundle(</span>
<a href="#l55.6"></a><span id="l55.6">     &quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;,</span>
<a href="#l55.7"></a><span id="l55.7">     getter_AddRefs(bundle));</span>
<a href="#l55.8"></a><span id="l55.8">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l55.9"></a><span id="l55.9"> </span>
<a href="#l55.10"></a><span id="l55.10">   const char* exitString;</span>
<a href="#l55.11"></a><span id="l55.11"> #ifdef __GNUC__</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-// Temporary workaroung until bug 783526 is fixed.</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+// Temporary workaround until bug 783526 is fixed.</span>
<a href="#l55.14"></a><span id="l55.14"> #pragma GCC diagnostic push</span>
<a href="#l55.15"></a><span id="l55.15"> #pragma GCC diagnostic ignored &quot;-Wswitch&quot;</span>
<a href="#l55.16"></a><span id="l55.16"> #endif</span>
<a href="#l55.17"></a><span id="l55.17">   switch (aCode)</span>
<a href="#l55.18"></a><span id="l55.18">   {</span>
<a href="#l55.19"></a><span id="l55.19">     case NS_ERROR_ILLEGAL_LOCALPART:</span>
<a href="#l55.20"></a><span id="l55.20">       bundle-&gt;GetStringFromName(&quot;errorIllegalLocalPart&quot;, eMsg);</span>
<a href="#l55.21"></a><span id="l55.21">       nsTextFormatter::ssprintf(msg, eMsg.get(), arg1, arg2);</span>
<a href="#l55.22"></a><span id="l55.22" class="difflineat">@@ -513,17 +513,17 @@ void nsSmtpProtocol::AppendHelloArgument</span>
<a href="#l55.23"></a><span id="l55.23">                   aResult.Append(']');</span>
<a href="#l55.24"></a><span id="l55.24">               }</span>
<a href="#l55.25"></a><span id="l55.25">           }</span>
<a href="#l55.26"></a><span id="l55.26">       }</span>
<a href="#l55.27"></a><span id="l55.27">   }</span>
<a href="#l55.28"></a><span id="l55.28"> }</span>
<a href="#l55.29"></a><span id="l55.29"> </span>
<a href="#l55.30"></a><span id="l55.30"> /////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l55.31"></a><span id="l55.31" class="difflineminus">-// we suppport the nsIStreamListener interface</span>
<a href="#l55.32"></a><span id="l55.32" class="difflineplus">+// we support the nsIStreamListener interface</span>
<a href="#l55.33"></a><span id="l55.33"> ////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l55.34"></a><span id="l55.34"> </span>
<a href="#l55.35"></a><span id="l55.35"> // stop binding is a &quot;notification&quot; informing us that the stream</span>
<a href="#l55.36"></a><span id="l55.36"> // associated with aURL is going away.</span>
<a href="#l55.37"></a><span id="l55.37"> NS_IMETHODIMP nsSmtpProtocol::OnStopRequest(nsIRequest *request, nsISupports *ctxt,</span>
<a href="#l55.38"></a><span id="l55.38">                                             nsresult aStatus)</span>
<a href="#l55.39"></a><span id="l55.39"> {</span>
<a href="#l55.40"></a><span id="l55.40">   bool connDroppedDuringAuth = NS_SUCCEEDED(aStatus) &amp;&amp; !m_sendDone &amp;&amp;</span>
<a href="#l55.41"></a><span id="l55.41" class="difflineat">@@ -1127,17 +1127,17 @@ nsresult nsSmtpProtocol::ProcessAuth()</span>
<a href="#l55.42"></a><span id="l55.42">     nsAutoCString buffer;</span>
<a href="#l55.43"></a><span id="l55.43"> </span>
<a href="#l55.44"></a><span id="l55.44">     if (!m_tlsEnabled)</span>
<a href="#l55.45"></a><span id="l55.45">     {</span>
<a href="#l55.46"></a><span id="l55.46">         if (TestFlag(SMTP_EHLO_STARTTLS_ENABLED))</span>
<a href="#l55.47"></a><span id="l55.47">         {</span>
<a href="#l55.48"></a><span id="l55.48">             // Do not try to combine SMTPS with STARTTLS.</span>
<a href="#l55.49"></a><span id="l55.49">             // If nsMsgSocketType::SSL is set,</span>
<a href="#l55.50"></a><span id="l55.50" class="difflineminus">-            // we are alrady using a secure connection.</span>
<a href="#l55.51"></a><span id="l55.51" class="difflineplus">+            // we are already using a secure connection.</span>
<a href="#l55.52"></a><span id="l55.52">             // Do not attempt to do STARTTLS,</span>
<a href="#l55.53"></a><span id="l55.53">             // even if server offers it.</span>
<a href="#l55.54"></a><span id="l55.54">             if (m_prefSocketType == nsMsgSocketType::trySTARTTLS ||</span>
<a href="#l55.55"></a><span id="l55.55">                 m_prefSocketType == nsMsgSocketType::alwaysSTARTTLS)</span>
<a href="#l55.56"></a><span id="l55.56">             {</span>
<a href="#l55.57"></a><span id="l55.57">                 buffer = &quot;STARTTLS&quot;;</span>
<a href="#l55.58"></a><span id="l55.58">                 buffer += CRLF;</span>
<a href="#l55.59"></a><span id="l55.59"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.h</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.h</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -95,17 +95,17 @@ public:</span>
<a href="#l56.4"></a><span id="l56.4"> </span>
<a href="#l56.5"></a><span id="l56.5">     // Creating a protocol instance requires the URL which needs to be run.</span>
<a href="#l56.6"></a><span id="l56.6">     nsSmtpProtocol(nsIURI * aURL);</span>
<a href="#l56.7"></a><span id="l56.7"> </span>
<a href="#l56.8"></a><span id="l56.8">     virtual nsresult LoadUrl(nsIURI * aURL, nsISupports * aConsumer = nullptr) override;</span>
<a href="#l56.9"></a><span id="l56.9">     virtual nsresult SendData(const char * dataBuffer, bool aSuppressLogging = false) override;</span>
<a href="#l56.10"></a><span id="l56.10"> </span>
<a href="#l56.11"></a><span id="l56.11">     ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-    // we suppport the nsIStreamListener interface</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+    // we support the nsIStreamListener interface</span>
<a href="#l56.14"></a><span id="l56.14">     ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l56.15"></a><span id="l56.15"> </span>
<a href="#l56.16"></a><span id="l56.16">     // stop binding is a &quot;notification&quot; informing us that the stream associated with aURL is going away.</span>
<a href="#l56.17"></a><span id="l56.17">     NS_IMETHOD OnStopRequest(nsIRequest *request, nsISupports *ctxt, nsresult status) override;</span>
<a href="#l56.18"></a><span id="l56.18"> </span>
<a href="#l56.19"></a><span id="l56.19"> private:</span>
<a href="#l56.20"></a><span id="l56.20">     virtual ~nsSmtpProtocol();</span>
<a href="#l56.21"></a><span id="l56.21">     // if we are asked to load a url while we are blocked waiting for redirection information,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpServer.cpp</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpServer.cpp</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -491,17 +491,17 @@ nsSmtpServer::GetUsernamePasswordWithUI(</span>
<a href="#l57.4"></a><span id="l57.4">   rv = aDialog-&gt;PromptUsernameAndPassword(aPromptTitle, aPromptMessage,</span>
<a href="#l57.5"></a><span id="l57.5">                                           NS_ConvertASCIItoUTF16(serverUri).get(),</span>
<a href="#l57.6"></a><span id="l57.6">                                           nsIAuthPrompt::SAVE_PASSWORD_PERMANENTLY,</span>
<a href="#l57.7"></a><span id="l57.7">                                           getter_Copies(uniUsername),</span>
<a href="#l57.8"></a><span id="l57.8">                                           getter_Copies(aPassword),</span>
<a href="#l57.9"></a><span id="l57.9">                                           &amp;okayValue);</span>
<a href="#l57.10"></a><span id="l57.10">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l57.11"></a><span id="l57.11"> </span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-  // If the user pressed cancel, just return emtpy strings.</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+  // If the user pressed cancel, just return empty strings.</span>
<a href="#l57.14"></a><span id="l57.14">   if (!okayValue)</span>
<a href="#l57.15"></a><span id="l57.15">   {</span>
<a href="#l57.16"></a><span id="l57.16">     aUsername.Truncate();</span>
<a href="#l57.17"></a><span id="l57.17">     aPassword.Truncate();</span>
<a href="#l57.18"></a><span id="l57.18">     return rv;</span>
<a href="#l57.19"></a><span id="l57.19">   }</span>
<a href="#l57.20"></a><span id="l57.20"> </span>
<a href="#l57.21"></a><span id="l57.21">   // We got a username and password back...so remember them.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpService.cpp</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpService.cpp</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -43,17 +43,17 @@ typedef struct _findServerByKeyEntry {</span>
<a href="#l58.4"></a><span id="l58.4"> typedef struct _findServerByHostnameEntry {</span>
<a href="#l58.5"></a><span id="l58.5">     nsCString hostname;</span>
<a href="#l58.6"></a><span id="l58.6">     nsCString username;</span>
<a href="#l58.7"></a><span id="l58.7">     nsISmtpServer *server;</span>
<a href="#l58.8"></a><span id="l58.8"> } findServerByHostnameEntry;</span>
<a href="#l58.9"></a><span id="l58.9"> </span>
<a href="#l58.10"></a><span id="l58.10"> static NS_DEFINE_CID(kCSmtpUrlCID, NS_SMTPURL_CID);</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-// foward declarations...</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+// forward declarations...</span>
<a href="#l58.14"></a><span id="l58.14"> nsresult</span>
<a href="#l58.15"></a><span id="l58.15"> NS_MsgBuildSmtpUrl(nsIFile * aFilePath,</span>
<a href="#l58.16"></a><span id="l58.16">                    nsISmtpServer *aServer,</span>
<a href="#l58.17"></a><span id="l58.17">                    const char* aRecipients,</span>
<a href="#l58.18"></a><span id="l58.18">                    nsIMsgIdentity * aSenderIdentity,</span>
<a href="#l58.19"></a><span id="l58.19">                    const char * aSender,</span>
<a href="#l58.20"></a><span id="l58.20">                    nsIUrlListener * aUrlListener,</span>
<a href="#l58.21"></a><span id="l58.21">                    nsIMsgStatusFeedback *aStatusFeedback,</span>
<a href="#l58.22"></a><span id="l58.22" class="difflineat">@@ -112,31 +112,31 @@ NS_IMETHODIMP nsSmtpService::SendMailMes</span>
<a href="#l58.23"></a><span id="l58.23">     else</span>
<a href="#l58.24"></a><span id="l58.24">       NS_IF_RELEASE(urlToRun);</span>
<a href="#l58.25"></a><span id="l58.25">   }</span>
<a href="#l58.26"></a><span id="l58.26"> </span>
<a href="#l58.27"></a><span id="l58.27">   return rv;</span>
<a href="#l58.28"></a><span id="l58.28"> }</span>
<a href="#l58.29"></a><span id="l58.29"> </span>
<a href="#l58.30"></a><span id="l58.30"> </span>
<a href="#l58.31"></a><span id="l58.31" class="difflineminus">-// The following are two convience functions I'm using to help expedite building and running a mail to url...</span>
<a href="#l58.32"></a><span id="l58.32" class="difflineplus">+// The following are two convenience functions I'm using to help expedite building and running a mail to url...</span>
<a href="#l58.33"></a><span id="l58.33"> </span>
<a href="#l58.34"></a><span id="l58.34"> // short cut function for creating a mailto url...</span>
<a href="#l58.35"></a><span id="l58.35"> nsresult NS_MsgBuildSmtpUrl(nsIFile * aFilePath,</span>
<a href="#l58.36"></a><span id="l58.36">                             nsISmtpServer *aSmtpServer,</span>
<a href="#l58.37"></a><span id="l58.37">                             const char * aRecipients,</span>
<a href="#l58.38"></a><span id="l58.38">                             nsIMsgIdentity * aSenderIdentity,</span>
<a href="#l58.39"></a><span id="l58.39">                             const char * aSender,</span>
<a href="#l58.40"></a><span id="l58.40">                             nsIUrlListener * aUrlListener,</span>
<a href="#l58.41"></a><span id="l58.41">                             nsIMsgStatusFeedback *aStatusFeedback,</span>
<a href="#l58.42"></a><span id="l58.42">                             nsIInterfaceRequestor* aNotificationCallbacks,</span>
<a href="#l58.43"></a><span id="l58.43">                             nsIURI ** aUrl,</span>
<a href="#l58.44"></a><span id="l58.44">                             bool aRequestDSN)</span>
<a href="#l58.45"></a><span id="l58.45"> {</span>
<a href="#l58.46"></a><span id="l58.46" class="difflineminus">-  // mscott: this function is a convience hack until netlib actually dispatches</span>
<a href="#l58.47"></a><span id="l58.47" class="difflineplus">+  // mscott: this function is a convenience hack until netlib actually dispatches</span>
<a href="#l58.48"></a><span id="l58.48">   // smtp urls. in addition until we have a session to get a password, host and</span>
<a href="#l58.49"></a><span id="l58.49">   // other stuff from, we need to use default values....</span>
<a href="#l58.50"></a><span id="l58.50">   // ..for testing purposes....</span>
<a href="#l58.51"></a><span id="l58.51"> </span>
<a href="#l58.52"></a><span id="l58.52">     nsCString smtpHostName;</span>
<a href="#l58.53"></a><span id="l58.53">     nsCString smtpUserName;</span>
<a href="#l58.54"></a><span id="l58.54">     int32_t smtpPort;</span>
<a href="#l58.55"></a><span id="l58.55">     int32_t socketType;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpService.h</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpService.h</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -24,22 +24,22 @@ class nsSmtpService : public nsISmtpServ</span>
<a href="#l59.4"></a><span id="l59.4"> {</span>
<a href="#l59.5"></a><span id="l59.5"> public:</span>
<a href="#l59.6"></a><span id="l59.6"> </span>
<a href="#l59.7"></a><span id="l59.7"> 	nsSmtpService();</span>
<a href="#l59.8"></a><span id="l59.8"> 	</span>
<a href="#l59.9"></a><span id="l59.9"> 	NS_DECL_ISUPPORTS</span>
<a href="#l59.10"></a><span id="l59.10"> </span>
<a href="#l59.11"></a><span id="l59.11"> 	////////////////////////////////////////////////////////////////////////</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-	// we suppport the nsISmtpService interface</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+	// we support the nsISmtpService interface</span>
<a href="#l59.14"></a><span id="l59.14"> 	////////////////////////////////////////////////////////////////////////</span>
<a href="#l59.15"></a><span id="l59.15"> 	NS_DECL_NSISMTPSERVICE</span>
<a href="#l59.16"></a><span id="l59.16"> </span>
<a href="#l59.17"></a><span id="l59.17"> 	//////////////////////////////////////////////////////////////////////////</span>
<a href="#l59.18"></a><span id="l59.18" class="difflineminus">-	// we suppport the nsIProtocolHandler interface</span>
<a href="#l59.19"></a><span id="l59.19" class="difflineplus">+	// we support the nsIProtocolHandler interface</span>
<a href="#l59.20"></a><span id="l59.20"> 	//////////////////////////////////////////////////////////////////////////</span>
<a href="#l59.21"></a><span id="l59.21">   NS_DECL_NSIPROTOCOLHANDLER</span>
<a href="#l59.22"></a><span id="l59.22"> </span>
<a href="#l59.23"></a><span id="l59.23"> protected:</span>
<a href="#l59.24"></a><span id="l59.24">     nsresult loadSmtpServers();</span>
<a href="#l59.25"></a><span id="l59.25"> </span>
<a href="#l59.26"></a><span id="l59.26"> </span>
<a href="#l59.27"></a><span id="l59.27"> private:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/mailnews/compose/src/nsURLFetcher.cpp</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/mailnews/compose/src/nsURLFetcher.cpp</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -99,17 +99,17 @@ nsURLFetcher::CanHandleContent(const cha</span>
<a href="#l60.4"></a><span id="l60.4">                                 bool aIsContentPreferred,</span>
<a href="#l60.5"></a><span id="l60.5">                                 char ** aDesiredContentType,</span>
<a href="#l60.6"></a><span id="l60.6">                                 bool * aCanHandleContent)</span>
<a href="#l60.7"></a><span id="l60.7"> </span>
<a href="#l60.8"></a><span id="l60.8"> {</span>
<a href="#l60.9"></a><span id="l60.9">     if (!mIsFile &amp;&amp; PL_strcasecmp(aContentType, MESSAGE_RFC822) == 0)</span>
<a href="#l60.10"></a><span id="l60.10">       *aDesiredContentType = strdup(&quot;text/html&quot;);</span>
<a href="#l60.11"></a><span id="l60.11"> </span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-    // since we explicilty loaded the url, we always want to handle it!</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+    // since we explicitly loaded the url, we always want to handle it!</span>
<a href="#l60.14"></a><span id="l60.14">     *aCanHandleContent = true;</span>
<a href="#l60.15"></a><span id="l60.15">   return NS_OK;</span>
<a href="#l60.16"></a><span id="l60.16"> }</span>
<a href="#l60.17"></a><span id="l60.17"> </span>
<a href="#l60.18"></a><span id="l60.18"> NS_IMETHODIMP</span>
<a href="#l60.19"></a><span id="l60.19"> nsURLFetcher::DoContent(const nsACString&amp; aContentType,</span>
<a href="#l60.20"></a><span id="l60.20">                       bool aIsContentPreferred,</span>
<a href="#l60.21"></a><span id="l60.21">                       nsIRequest *request,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_bug235432.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -66,17 +66,17 @@ function copyFileMessageInLocalFolder(aM</span>
<a href="#l61.4"></a><span id="l61.4">                                     localAccountUtils.inboxFolder,</span>
<a href="#l61.5"></a><span id="l61.5">                                     null, false,</span>
<a href="#l61.6"></a><span id="l61.6">                                     aMessageFlags,</span>
<a href="#l61.7"></a><span id="l61.7">                                     aMessageKeywords,</span>
<a href="#l61.8"></a><span id="l61.8">                                     gCopyListener,</span>
<a href="#l61.9"></a><span id="l61.9">                                     aMessageWindow);</span>
<a href="#l61.10"></a><span id="l61.10"> }</span>
<a href="#l61.11"></a><span id="l61.11"> </span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-// The attatchment file can not be obtained from js test,</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+// The attachment file can not be obtained from js test,</span>
<a href="#l61.14"></a><span id="l61.14"> // so we have to generate the file name here.</span>
<a href="#l61.15"></a><span id="l61.15"> function createExpectedTemporaryFile() {</span>
<a href="#l61.16"></a><span id="l61.16">   function createTemporaryFile() {</span>
<a href="#l61.17"></a><span id="l61.17">     let file = Services.dirsvc.get(&quot;TmpD&quot;, Ci.nsIFile);</span>
<a href="#l61.18"></a><span id="l61.18">     file.append(&quot;nsmail.tmp&quot;);</span>
<a href="#l61.19"></a><span id="l61.19">     file.createUnique(Ci.nsIFile.NORMAL_FILE_TYPE, 0o600);</span>
<a href="#l61.20"></a><span id="l61.20">     return file;</span>
<a href="#l61.21"></a><span id="l61.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_nsMsgCompose1.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_nsMsgCompose1.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -54,17 +54,17 @@ function run_test() {</span>
<a href="#l62.4"></a><span id="l62.4">   // Copy the file to the profile directory for a PAB</span>
<a href="#l62.5"></a><span id="l62.5">   testAB.copyTo(do_get_profile(), kPABData.fileName);</span>
<a href="#l62.6"></a><span id="l62.6"> </span>
<a href="#l62.7"></a><span id="l62.7">   testAB = do_get_file(&quot;../../../data/abLists2.mab&quot;);</span>
<a href="#l62.8"></a><span id="l62.8"> </span>
<a href="#l62.9"></a><span id="l62.9">   // Copy the file to the profile directory for a CAB</span>
<a href="#l62.10"></a><span id="l62.10">   testAB.copyTo(do_get_profile(), kCABData.fileName);</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-  // Test - Check we can initalize with fewest specified</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+  // Test - Check we can initialize with fewest specified</span>
<a href="#l62.14"></a><span id="l62.14">   // parameters and don't fail/crash like we did in bug 411646.</span>
<a href="#l62.15"></a><span id="l62.15"> </span>
<a href="#l62.16"></a><span id="l62.16">   var msgCompose = Cc[MsgComposeContractID]</span>
<a href="#l62.17"></a><span id="l62.17">                      .createInstance(nsIMsgCompose);</span>
<a href="#l62.18"></a><span id="l62.18"> </span>
<a href="#l62.19"></a><span id="l62.19">   // Set up some params</span>
<a href="#l62.20"></a><span id="l62.20">   var params = Cc[MsgComposeParamsContractID]</span>
<a href="#l62.21"></a><span id="l62.21">                  .createInstance(nsIMsgComposeParams);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_nsMsgCompose4.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_nsMsgCompose4.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -53,17 +53,17 @@ function run_test() {</span>
<a href="#l63.4"></a><span id="l63.4">   // Copy the file to the profile directory for a PAB</span>
<a href="#l63.5"></a><span id="l63.5">   testAB.copyTo(do_get_profile(), kPABData.fileName);</span>
<a href="#l63.6"></a><span id="l63.6"> </span>
<a href="#l63.7"></a><span id="l63.7">   testAB = do_get_file(&quot;../../../data/abLists2.mab&quot;);</span>
<a href="#l63.8"></a><span id="l63.8"> </span>
<a href="#l63.9"></a><span id="l63.9">   // Copy the file to the profile directory for a CAB</span>
<a href="#l63.10"></a><span id="l63.10">   testAB.copyTo(do_get_profile(), kCABData.fileName);</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-  // Test - Check we can initalize with fewest specified</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+  // Test - Check we can initialize with fewest specified</span>
<a href="#l63.14"></a><span id="l63.14">   // parameters and don't fail/crash like we did in bug 411646.</span>
<a href="#l63.15"></a><span id="l63.15"> </span>
<a href="#l63.16"></a><span id="l63.16">   var msgCompose = Cc[MsgComposeContractID]</span>
<a href="#l63.17"></a><span id="l63.17">                      .createInstance(nsIMsgCompose);</span>
<a href="#l63.18"></a><span id="l63.18"> </span>
<a href="#l63.19"></a><span id="l63.19">   // Set up some params</span>
<a href="#l63.20"></a><span id="l63.20">   var params = Cc[MsgComposeParamsContractID]</span>
<a href="#l63.21"></a><span id="l63.21">                  .createInstance(nsIMsgComposeParams);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMailAddressIDN.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMailAddressIDN.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -200,12 +200,12 @@ function run_test()</span>
<a href="#l64.4"></a><span id="l64.4">   // allowed with unextended SMTP.</span>
<a href="#l64.5"></a><span id="l64.5">   // The old code would just strip the invalid character and try to send the</span>
<a href="#l64.6"></a><span id="l64.6">   // message to the remaining - wrong! - address.</span>
<a href="#l64.7"></a><span id="l64.7">   // The new code will present an informational message box and deny sending.</span>
<a href="#l64.8"></a><span id="l64.8">   test = kToInvalid;</span>
<a href="#l64.9"></a><span id="l64.9">   DoSendTest(kToInvalid, kToInvalid, NS_ERROR_BUT_DONT_SHOW_ALERT);</span>
<a href="#l64.10"></a><span id="l64.10"> </span>
<a href="#l64.11"></a><span id="l64.11">   // Test 4:</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-  // Bug 856506. invalid char without '@' casues crash.</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+  // Bug 856506. invalid char without '@' causes crash.</span>
<a href="#l64.14"></a><span id="l64.14">   test = kToInvalidWithoutDomain;</span>
<a href="#l64.15"></a><span id="l64.15">   DoSendTest(kToInvalidWithoutDomain, kToInvalidWithoutDomain, NS_ERROR_BUT_DONT_SHOW_ALERT);</span>
<a href="#l64.16"></a><span id="l64.16"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_sendMessageLater2.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_sendMessageLater2.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -194,17 +194,17 @@ function sendUnsentMessages()</span>
<a href="#l65.4"></a><span id="l65.4"> function runServerTest()</span>
<a href="#l65.5"></a><span id="l65.5"> {</span>
<a href="#l65.6"></a><span id="l65.6">   server.performTest();</span>
<a href="#l65.7"></a><span id="l65.7"> }</span>
<a href="#l65.8"></a><span id="l65.8"> </span>
<a href="#l65.9"></a><span id="l65.9"> function* actually_run_test() {</span>
<a href="#l65.10"></a><span id="l65.10">   dump(&quot;in actually_run_test\n&quot;);</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-  dump(&quot;Copy Mesage from file to folder\n&quot;);</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+  dump(&quot;Copy Message from file to folder\n&quot;);</span>
<a href="#l65.14"></a><span id="l65.14">   yield async_run({func: sendMessageLater, args: [0]});</span>
<a href="#l65.15"></a><span id="l65.15"> </span>
<a href="#l65.16"></a><span id="l65.16">   dump(&quot;Send unsent message\n&quot;);</span>
<a href="#l65.17"></a><span id="l65.17">   yield async_run({func: sendUnsentMessages});</span>
<a href="#l65.18"></a><span id="l65.18"> </span>
<a href="#l65.19"></a><span id="l65.19">   // Check sent folder is now empty.</span>
<a href="#l65.20"></a><span id="l65.20">   Assert.equal(gSentFolder.getTotalMessages(false), 0);</span>
<a href="#l65.21"></a><span id="l65.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/mailnews/db/gloda/components/jsmimeemitter.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/mailnews/db/gloda/components/jsmimeemitter.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -317,17 +317,17 @@ MimeMessageEmitter.prototype = {</span>
<a href="#l66.4"></a><span id="l66.4">   },</span>
<a href="#l66.5"></a><span id="l66.5"> </span>
<a href="#l66.6"></a><span id="l66.6">   /**</span>
<a href="#l66.7"></a><span id="l66.7">    * In the case of UUEncoded attachments, libmime tells us about the attachment</span>
<a href="#l66.8"></a><span id="l66.8">    *  as a child of a MimeBody. This obviously doesn't make us happy, so in case</span>
<a href="#l66.9"></a><span id="l66.9">    *  libmime wants us to attach an attachment to something that's not a</span>
<a href="#l66.10"></a><span id="l66.10">    *  container, we walk up the mime tree to find a suitable container to hold</span>
<a href="#l66.11"></a><span id="l66.11">    *  the attachment.</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-   * The results are cached so that they're consistent accross calls  this</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+   * The results are cached so that they're consistent across calls  this</span>
<a href="#l66.14"></a><span id="l66.14">    *  ensures the call to _replacePart works fine.</span>
<a href="#l66.15"></a><span id="l66.15">    */</span>
<a href="#l66.16"></a><span id="l66.16">   _findAnotherContainer: function(aPartName) {</span>
<a href="#l66.17"></a><span id="l66.17">     if (aPartName in this._bogusPartTranslation)</span>
<a href="#l66.18"></a><span id="l66.18">       return this._bogusPartTranslation[aPartName];</span>
<a href="#l66.19"></a><span id="l66.19"> </span>
<a href="#l66.20"></a><span id="l66.20">     let parentName = aPartName + &quot;&quot;;</span>
<a href="#l66.21"></a><span id="l66.21">     let parentPart;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -39,17 +39,17 @@</span>
<a href="#l67.4"></a><span id="l67.4">             item = document.createElementNS(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;, &quot;richlistitem&quot;);</span>
<a href="#l67.5"></a><span id="l67.5"> </span>
<a href="#l67.6"></a><span id="l67.6">             let glodaCompleter = Cc[&quot;@mozilla.org/autocomplete/search;1?name=gloda&quot;]</span>
<a href="#l67.7"></a><span id="l67.7">                                    .getService(Ci.nsIAutoCompleteSearch)</span>
<a href="#l67.8"></a><span id="l67.8">                                    .wrappedJSObject;</span>
<a href="#l67.9"></a><span id="l67.9">             var result = glodaCompleter.curResult;</span>
<a href="#l67.10"></a><span id="l67.10"> </span>
<a href="#l67.11"></a><span id="l67.11">             // set these attributes before we set the class</span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-            // so that we can use them from the contructor</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+            // so that we can use them from the constructor</span>
<a href="#l67.14"></a><span id="l67.14">             var row = result.getObjectAt(this._currentIndex);</span>
<a href="#l67.15"></a><span id="l67.15">             var obj = row.item;</span>
<a href="#l67.16"></a><span id="l67.16">             item.setAttribute(&quot;text&quot;, trimmedSearchString);</span>
<a href="#l67.17"></a><span id="l67.17">             item.setAttribute(&quot;type&quot;, result.getStyleAt(this._currentIndex));</span>
<a href="#l67.18"></a><span id="l67.18"> </span>
<a href="#l67.19"></a><span id="l67.19">             item.row = row;</span>
<a href="#l67.20"></a><span id="l67.20"> </span>
<a href="#l67.21"></a><span id="l67.21">             // set the class at the end so we can use the attributes</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineat">@@ -239,17 +239,17 @@</span>
<a href="#l67.23"></a><span id="l67.23">         &lt;/body&gt;</span>
<a href="#l67.24"></a><span id="l67.24">       &lt;/method&gt;</span>
<a href="#l67.25"></a><span id="l67.25"> </span>
<a href="#l67.26"></a><span id="l67.26">       &lt;method name=&quot;_setUpOverflow&quot;&gt;</span>
<a href="#l67.27"></a><span id="l67.27">         &lt;parameter name=&quot;aParentBox&quot;/&gt;</span>
<a href="#l67.28"></a><span id="l67.28">         &lt;parameter name=&quot;aEllipsis&quot;/&gt;</span>
<a href="#l67.29"></a><span id="l67.29">         &lt;body&gt;</span>
<a href="#l67.30"></a><span id="l67.30">           &lt;![CDATA[</span>
<a href="#l67.31"></a><span id="l67.31" class="difflineminus">-          // Hide the ellipsis incase there's just enough to not underflow</span>
<a href="#l67.32"></a><span id="l67.32" class="difflineplus">+          // Hide the ellipsis in case there's just enough to not underflow</span>
<a href="#l67.33"></a><span id="l67.33">           aEllipsis.hidden = true;</span>
<a href="#l67.34"></a><span id="l67.34"> </span>
<a href="#l67.35"></a><span id="l67.35">           // Start with the parent's width and subtract off its children</span>
<a href="#l67.36"></a><span id="l67.36">           let tooltip = [];</span>
<a href="#l67.37"></a><span id="l67.37">           let children = aParentBox.childNodes;</span>
<a href="#l67.38"></a><span id="l67.38">           let widthDiff = aParentBox.boxObject.width;</span>
<a href="#l67.39"></a><span id="l67.39"> </span>
<a href="#l67.40"></a><span id="l67.40">           for (let i = 0; i &lt; children.length; i++) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l68.1"></a><span id="l68.1" class="difflineminus">--- a/mailnews/db/gloda/modules/collection.js</span>
<a href="#l68.2"></a><span id="l68.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/collection.js</span>
<a href="#l68.3"></a><span id="l68.3" class="difflineat">@@ -63,17 +63,17 @@ var GlodaCollectionManager = {</span>
<a href="#l68.4"></a><span id="l68.4"> </span>
<a href="#l68.5"></a><span id="l68.5">   defineCache: function gloda_colm_defineCache(aNounDef, aCacheSize) {</span>
<a href="#l68.6"></a><span id="l68.6">     this._cachesByNoun[aNounDef.id] = new GlodaLRUCacheCollection(aNounDef,</span>
<a href="#l68.7"></a><span id="l68.7">                                                                    aCacheSize);</span>
<a href="#l68.8"></a><span id="l68.8">   },</span>
<a href="#l68.9"></a><span id="l68.9"> </span>
<a href="#l68.10"></a><span id="l68.10">   /**</span>
<a href="#l68.11"></a><span id="l68.11">    * Attempt to locate an instance of the object of the given noun type with the</span>
<a href="#l68.12"></a><span id="l68.12" class="difflineminus">-   *  given id.  Counts as a cache hit if found.  (And if it was't in a cache,</span>
<a href="#l68.13"></a><span id="l68.13" class="difflineplus">+   *  given id.  Counts as a cache hit if found.  (And if it wasn't in a cache,</span>
<a href="#l68.14"></a><span id="l68.14">    *  but rather a collection, it is added to the cache.)</span>
<a href="#l68.15"></a><span id="l68.15">    */</span>
<a href="#l68.16"></a><span id="l68.16">   cacheLookupOne: function gloda_colm_cacheLookupOne(aNounID, aID, aDoCache) {</span>
<a href="#l68.17"></a><span id="l68.17">     let cache = this._cachesByNoun[aNounID];</span>
<a href="#l68.18"></a><span id="l68.18"> </span>
<a href="#l68.19"></a><span id="l68.19">     if (cache) {</span>
<a href="#l68.20"></a><span id="l68.20">       if (aID in cache._idMap) {</span>
<a href="#l68.21"></a><span id="l68.21">         let item = cache._idMap[aID];</span>
<a href="#l68.22"></a><span id="l68.22" class="difflineat">@@ -169,17 +169,17 @@ var GlodaCollectionManager = {</span>
<a href="#l68.23"></a><span id="l68.23">     }</span>
<a href="#l68.24"></a><span id="l68.24">     // do not promote found items into the cache</span>
<a href="#l68.25"></a><span id="l68.25">     this.cacheLookupMany(aNounID, checkMap, targetMap, false);</span>
<a href="#l68.26"></a><span id="l68.26">     return targetMap;</span>
<a href="#l68.27"></a><span id="l68.27">   },</span>
<a href="#l68.28"></a><span id="l68.28"> </span>
<a href="#l68.29"></a><span id="l68.29">   /**</span>
<a href="#l68.30"></a><span id="l68.30">    * Attempt to locate an instance of the object of the given noun type with the</span>
<a href="#l68.31"></a><span id="l68.31" class="difflineminus">-   *  given id.  Counts as a cache hit if found.  (And if it was't in a cache,</span>
<a href="#l68.32"></a><span id="l68.32" class="difflineplus">+   *  given id.  Counts as a cache hit if found.  (And if it wasn't in a cache,</span>
<a href="#l68.33"></a><span id="l68.33">    *  but rather a collection, it is added to the cache.)</span>
<a href="#l68.34"></a><span id="l68.34">    */</span>
<a href="#l68.35"></a><span id="l68.35">   cacheLookupOneByUniqueValue:</span>
<a href="#l68.36"></a><span id="l68.36">       function gloda_colm_cacheLookupOneByUniqueValue(aNounID, aUniqueValue,</span>
<a href="#l68.37"></a><span id="l68.37">                                                       aDoCache) {</span>
<a href="#l68.38"></a><span id="l68.38">     let cache = this._cachesByNoun[aNounID];</span>
<a href="#l68.39"></a><span id="l68.39"> </span>
<a href="#l68.40"></a><span id="l68.40">     if (cache) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l69.1"></a><span id="l69.1" class="difflineminus">--- a/mailnews/db/gloda/modules/datamodel.js</span>
<a href="#l69.2"></a><span id="l69.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/datamodel.js</span>
<a href="#l69.3"></a><span id="l69.3" class="difflineat">@@ -19,17 +19,17 @@ function getMessenger () {</span>
<a href="#l69.4"></a><span id="l69.4">   if (!gMessenger)</span>
<a href="#l69.5"></a><span id="l69.5">     gMessenger = Cc[&quot;@mozilla.org/messenger;1&quot;].createInstance(Ci.nsIMessenger);</span>
<a href="#l69.6"></a><span id="l69.6">   return gMessenger;</span>
<a href="#l69.7"></a><span id="l69.7"> }</span>
<a href="#l69.8"></a><span id="l69.8"> </span>
<a href="#l69.9"></a><span id="l69.9"> /**</span>
<a href="#l69.10"></a><span id="l69.10">  * @class Represents a gloda attribute definition's DB form.  This class</span>
<a href="#l69.11"></a><span id="l69.11">  *  stores the information in the database relating to this attribute</span>
<a href="#l69.12"></a><span id="l69.12" class="difflineminus">- *  definition.  Access its attrDef attribute to get at the realy juicy data.</span>
<a href="#l69.13"></a><span id="l69.13" class="difflineplus">+ *  definition.  Access its attrDef attribute to get at the really juicy data.</span>
<a href="#l69.14"></a><span id="l69.14">  *  This main interesting thing this class does is serve as the keeper of the</span>
<a href="#l69.15"></a><span id="l69.15">  *  mapping from parameters to attribute ids in the database if this is a</span>
<a href="#l69.16"></a><span id="l69.16">  *  parameterized attribute.</span>
<a href="#l69.17"></a><span id="l69.17">  */</span>
<a href="#l69.18"></a><span id="l69.18"> function GlodaAttributeDBDef(aDatastore, aID, aCompoundName, aAttrType,</span>
<a href="#l69.19"></a><span id="l69.19">                            aPluginName, aAttrName) {</span>
<a href="#l69.20"></a><span id="l69.20">   // _datastore is now set on the prototype by GlodaDatastore</span>
<a href="#l69.21"></a><span id="l69.21">   this._id = aID;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l70.1"></a><span id="l70.1" class="difflineminus">--- a/mailnews/db/gloda/modules/datastore.js</span>
<a href="#l70.2"></a><span id="l70.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/datastore.js</span>
<a href="#l70.3"></a><span id="l70.3" class="difflineat">@@ -143,17 +143,17 @@ var QueryFromQueryResolver = {</span>
<a href="#l70.4"></a><span id="l70.4">     }</span>
<a href="#l70.5"></a><span id="l70.5">   },</span>
<a href="#l70.6"></a><span id="l70.6"> };</span>
<a href="#l70.7"></a><span id="l70.7"> </span>
<a href="#l70.8"></a><span id="l70.8"> /**</span>
<a href="#l70.9"></a><span id="l70.9">  * Handles the results from a GlodaDatastore.queryFromQuery call in cooperation</span>
<a href="#l70.10"></a><span id="l70.10">  *  with the |QueryFromQueryResolver| collection listener.  We do a lot of</span>
<a href="#l70.11"></a><span id="l70.11">  *  legwork related to satisfying references to other noun instances on the</span>
<a href="#l70.12"></a><span id="l70.12" class="difflineminus">- *  noun instances the user directy queried.  Messages reference identities</span>
<a href="#l70.13"></a><span id="l70.13" class="difflineplus">+ *  noun instances the user directly queried.  Messages reference identities</span>
<a href="#l70.14"></a><span id="l70.14">  *  reference contacts which in turn (implicitly) reference identities again.</span>
<a href="#l70.15"></a><span id="l70.15">  *  We have to spin up those other queries and stitch things together.</span>
<a href="#l70.16"></a><span id="l70.16">  *</span>
<a href="#l70.17"></a><span id="l70.17">  * While the code is generally up to the existing set of tasks it is called to</span>
<a href="#l70.18"></a><span id="l70.18">  *  handle, I would not be surprised for it to fall down if things get more</span>
<a href="#l70.19"></a><span id="l70.19">  *  complex.  Some of the logic here 'evolved' a bit and could benefit from</span>
<a href="#l70.20"></a><span id="l70.20">  *  additional documentation and a fresh go-through.</span>
<a href="#l70.21"></a><span id="l70.21">  */</span>
<a href="#l70.22"></a><span id="l70.22" class="difflineat">@@ -1940,17 +1940,17 @@ var GlodaDatastore = {</span>
<a href="#l70.23"></a><span id="l70.23">    * Authoritative map from folder URI to folder ID.  (Authoritative in the</span>
<a href="#l70.24"></a><span id="l70.24">    *  sense that this map exactly represents the state of the underlying</span>
<a href="#l70.25"></a><span id="l70.25">    *  database.  If it does not, it's a bug in updating the database.)</span>
<a href="#l70.26"></a><span id="l70.26">    */</span>
<a href="#l70.27"></a><span id="l70.27">   _folderByURI: {},</span>
<a href="#l70.28"></a><span id="l70.28">   /** Authoritative map from folder ID to folder URI */</span>
<a href="#l70.29"></a><span id="l70.29">   _folderByID: {},</span>
<a href="#l70.30"></a><span id="l70.30"> </span>
<a href="#l70.31"></a><span id="l70.31" class="difflineminus">-  /** Intialize our _folderByURI/_folderByID mappings, called by _init(). */</span>
<a href="#l70.32"></a><span id="l70.32" class="difflineplus">+  /** Initialize our _folderByURI/_folderByID mappings, called by _init(). */</span>
<a href="#l70.33"></a><span id="l70.33">   _getAllFolderMappings: function gloda_ds_getAllFolderMappings() {</span>
<a href="#l70.34"></a><span id="l70.34">     let stmt = this._createSyncStatement(</span>
<a href="#l70.35"></a><span id="l70.35">       &quot;SELECT id, folderURI, dirtyStatus, name, indexingPriority \</span>
<a href="#l70.36"></a><span id="l70.36">         FROM folderLocations&quot;, true);</span>
<a href="#l70.37"></a><span id="l70.37"> </span>
<a href="#l70.38"></a><span id="l70.38">     while (stmt.executeStep()) {  // no chance of this SQLITE_BUSY on this call</span>
<a href="#l70.39"></a><span id="l70.39">       let folderID = stmt.getInt64(0);</span>
<a href="#l70.40"></a><span id="l70.40">       let folderURI = stmt.getString(1);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l71.1"></a><span id="l71.1" class="difflineminus">--- a/mailnews/db/gloda/modules/gloda.js</span>
<a href="#l71.2"></a><span id="l71.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/gloda.js</span>
<a href="#l71.3"></a><span id="l71.3" class="difflineat">@@ -367,17 +367,17 @@ var Gloda = {</span>
<a href="#l71.4"></a><span id="l71.4">    *   that you are operating under.</span>
<a href="#l71.5"></a><span id="l71.5">    * @param aAddrGroups... One or more strings.  Each string can contain zero or more</span>
<a href="#l71.6"></a><span id="l71.6">    *   e-mail addresses with display name.  If more than one address is given,</span>
<a href="#l71.7"></a><span id="l71.7">    *   they should be comma-delimited.  For example</span>
<a href="#l71.8"></a><span id="l71.8">    *   '&quot;Bob Smith&quot; &lt;bob@example.com&gt;' is an address with display name.  Mime</span>
<a href="#l71.9"></a><span id="l71.9">    *   header decoding is performed, but is ignorant of any folder-level</span>
<a href="#l71.10"></a><span id="l71.10">    *   character set overrides.</span>
<a href="#l71.11"></a><span id="l71.11">    * @returns via the callback handle mechanism, a list containing one sub-list</span>
<a href="#l71.12"></a><span id="l71.12" class="difflineminus">-   *   for each string argument passed.  Each sub-list containts zero or more</span>
<a href="#l71.13"></a><span id="l71.13" class="difflineplus">+   *   for each string argument passed.  Each sub-list contains zero or more</span>
<a href="#l71.14"></a><span id="l71.14">    *   GlodaIdentity instances corresponding to the addresses provided.</span>
<a href="#l71.15"></a><span id="l71.15">    */</span>
<a href="#l71.16"></a><span id="l71.16">   getOrCreateMailIdentities:</span>
<a href="#l71.17"></a><span id="l71.17">       function* gloda_ns_getOrCreateMailIdentities(aCallbackHandle, ...aAddrGroups) {</span>
<a href="#l71.18"></a><span id="l71.18">     let addresses = {};</span>
<a href="#l71.19"></a><span id="l71.19">     let resultLists = [];</span>
<a href="#l71.20"></a><span id="l71.20"> </span>
<a href="#l71.21"></a><span id="l71.21">     // parse the strings</span>
<a href="#l71.22"></a><span id="l71.22" class="difflineat">@@ -652,17 +652,17 @@ var Gloda = {</span>
<a href="#l71.23"></a><span id="l71.23">   /**</span>
<a href="#l71.24"></a><span id="l71.24">    * This attribute is stored as a string column on the row for the noun.  It</span>
<a href="#l71.25"></a><span id="l71.25">    *  differs from kSpecialColumn in that it is a string, which once had</span>
<a href="#l71.26"></a><span id="l71.26">    *  query ramifications and one day may have them again.</span>
<a href="#l71.27"></a><span id="l71.27">    */</span>
<a href="#l71.28"></a><span id="l71.28">   kSpecialString: GlodaDatastore.kSpecialString,</span>
<a href="#l71.29"></a><span id="l71.29">   /**</span>
<a href="#l71.30"></a><span id="l71.30">    * This attribute is stored as a fulltext column on the fulltext table for</span>
<a href="#l71.31"></a><span id="l71.31" class="difflineminus">-   *  the noun.  The attribute defintion should include this value as 'special'</span>
<a href="#l71.32"></a><span id="l71.32" class="difflineplus">+   *  the noun.  The attribute definition should include this value as 'special'</span>
<a href="#l71.33"></a><span id="l71.33">    *  and the column name that stores the table as 'specialColumnName'.</span>
<a href="#l71.34"></a><span id="l71.34">    */</span>
<a href="#l71.35"></a><span id="l71.35">   kSpecialFulltext: GlodaDatastore.kSpecialFulltext,</span>
<a href="#l71.36"></a><span id="l71.36"> </span>
<a href="#l71.37"></a><span id="l71.37">   /**</span>
<a href="#l71.38"></a><span id="l71.38">    * The extensionName used for the attributes defined by core gloda plugins</span>
<a href="#l71.39"></a><span id="l71.39">    *  such as fundattr.js and explattr.js.</span>
<a href="#l71.40"></a><span id="l71.40">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l72.1"></a><span id="l72.1" class="difflineminus">--- a/mailnews/db/gloda/modules/index_msg.js</span>
<a href="#l72.2"></a><span id="l72.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/index_msg.js</span>
<a href="#l72.3"></a><span id="l72.3" class="difflineat">@@ -362,17 +362,17 @@ MessagesByMessageIdCallback.prototype = </span>
<a href="#l72.4"></a><span id="l72.4"> </span>
<a href="#l72.5"></a><span id="l72.5"> </span>
<a href="#l72.6"></a><span id="l72.6"> /**</span>
<a href="#l72.7"></a><span id="l72.7">  * The message indexer!</span>
<a href="#l72.8"></a><span id="l72.8">  *</span>
<a href="#l72.9"></a><span id="l72.9">  * === Message Indexing Strategy</span>
<a href="#l72.10"></a><span id="l72.10">  * To these ends, we implement things like so:</span>
<a href="#l72.11"></a><span id="l72.11">  *</span>
<a href="#l72.12"></a><span id="l72.12" class="difflineminus">- * Mesage State Tracking</span>
<a href="#l72.13"></a><span id="l72.13" class="difflineplus">+ * Message State Tracking</span>
<a href="#l72.14"></a><span id="l72.14">  * - We store a property on all indexed headers indicating their gloda message</span>
<a href="#l72.15"></a><span id="l72.15">  *   id.  This allows us to tell whether a message is indexed from the header,</span>
<a href="#l72.16"></a><span id="l72.16">  *   without having to consult the SQL database.</span>
<a href="#l72.17"></a><span id="l72.17">  * - When we receive an event that indicates that a message's meta-data has</span>
<a href="#l72.18"></a><span id="l72.18">  *   changed and gloda needs to re-index the message, we set a property on the</span>
<a href="#l72.19"></a><span id="l72.19">  *   header that indicates the message is dirty.  This property can indicate</span>
<a href="#l72.20"></a><span id="l72.20">  *   that the message needs to be re-indexed but the gloda-id is valid (dirty)</span>
<a href="#l72.21"></a><span id="l72.21">  *   or that the message's gloda-id is invalid (filthy) because the gloda</span>
<a href="#l72.22"></a><span id="l72.22" class="difflineat">@@ -443,17 +443,17 @@ var GlodaMsgIndexer = {</span>
<a href="#l72.23"></a><span id="l72.23"> </span>
<a href="#l72.24"></a><span id="l72.24">   enable: function msg_indexer_enable() {</span>
<a href="#l72.25"></a><span id="l72.25">     // initialize our listeners' this pointers</span>
<a href="#l72.26"></a><span id="l72.26">     this._databaseAnnouncerListener.indexer = this;</span>
<a href="#l72.27"></a><span id="l72.27">     this._msgFolderListener.indexer = this;</span>
<a href="#l72.28"></a><span id="l72.28"> </span>
<a href="#l72.29"></a><span id="l72.29">     // register for:</span>
<a href="#l72.30"></a><span id="l72.30">     // - folder loaded events, so we know when getDatabaseWithReparse has</span>
<a href="#l72.31"></a><span id="l72.31" class="difflineminus">-    //   finished updating the index/what not (if it was't immediately</span>
<a href="#l72.32"></a><span id="l72.32" class="difflineplus">+    //   finished updating the index/what not (if it wasn't immediately</span>
<a href="#l72.33"></a><span id="l72.33">     //   available)</span>
<a href="#l72.34"></a><span id="l72.34">     // - property changes (so we know when a message's read/starred state have</span>
<a href="#l72.35"></a><span id="l72.35">     //   changed.)</span>
<a href="#l72.36"></a><span id="l72.36">     this._folderListener._init(this);</span>
<a href="#l72.37"></a><span id="l72.37">     MailServices.mailSession.AddFolderListener(this._folderListener,</span>
<a href="#l72.38"></a><span id="l72.38">                                                Ci.nsIFolderListener.intPropertyChanged |</span>
<a href="#l72.39"></a><span id="l72.39">                                                Ci.nsIFolderListener.propertyFlagChanged |</span>
<a href="#l72.40"></a><span id="l72.40">                                                Ci.nsIFolderListener.event);</span>
<a href="#l72.41"></a><span id="l72.41" class="difflineat">@@ -3188,17 +3188,17 @@ var GlodaMsgIndexer = {</span>
<a href="#l72.42"></a><span id="l72.42">     yield this.kWorkDone;</span>
<a href="#l72.43"></a><span id="l72.43">   },</span>
<a href="#l72.44"></a><span id="l72.44"> </span>
<a href="#l72.45"></a><span id="l72.45">   /**</span>
<a href="#l72.46"></a><span id="l72.46">    * Wipe a message out of existence from our index.  This is slightly more</span>
<a href="#l72.47"></a><span id="l72.47">    *  tricky than one would first expect because there are potentially</span>
<a href="#l72.48"></a><span id="l72.48">    *  attributes not immediately associated with this message that reference</span>
<a href="#l72.49"></a><span id="l72.49">    *  the message.  Not only that, but deletion of messages may leave a</span>
<a href="#l72.50"></a><span id="l72.50" class="difflineminus">-   *  conversation posessing only ghost messages, which we don't want, so we</span>
<a href="#l72.51"></a><span id="l72.51" class="difflineplus">+   *  conversation possessing only ghost messages, which we don't want, so we</span>
<a href="#l72.52"></a><span id="l72.52">    *  need to nuke the moot conversation and its moot ghost messages.</span>
<a href="#l72.53"></a><span id="l72.53">    * For now, we are actually punting on that trickiness, and the exact</span>
<a href="#l72.54"></a><span id="l72.54">    *  nuances aren't defined yet because we have not decided whether to store</span>
<a href="#l72.55"></a><span id="l72.55">    *  such attributes redundantly.  For example, if we have subject-pred-object,</span>
<a href="#l72.56"></a><span id="l72.56">    *  we could actually store this as attributes (subject, id, object) and</span>
<a href="#l72.57"></a><span id="l72.57">    *  (object, id, subject).  In such a case, we could query on (subject, *)</span>
<a href="#l72.58"></a><span id="l72.58">    *  and use the results to delete the (object, id, subject) case.  If we</span>
<a href="#l72.59"></a><span id="l72.59">    *  don't redundantly store attributes, we can deal with the problem by</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l73.1"></a><span id="l73.1" class="difflineminus">--- a/mailnews/db/gloda/modules/indexer.js</span>
<a href="#l73.2"></a><span id="l73.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/indexer.js</span>
<a href="#l73.3"></a><span id="l73.3" class="difflineat">@@ -1310,17 +1310,17 @@ var GlodaIndexer = {</span>
<a href="#l73.4"></a><span id="l73.4">    * - Make sure the job's cleanup function gets called if appropriate.</span>
<a href="#l73.5"></a><span id="l73.5">    *</span>
<a href="#l73.6"></a><span id="l73.6">    * The async return case is actually not too troublesome.  Since there is an</span>
<a href="#l73.7"></a><span id="l73.7">    *  active indexing job and we are not (by fiat) in that call stack, we know</span>
<a href="#l73.8"></a><span id="l73.8">    *  that the callback driver is guaranteed to get triggered again somehow.</span>
<a href="#l73.9"></a><span id="l73.9">    *  The only issue is to make sure that _workBatchData does not end up with</span>
<a href="#l73.10"></a><span id="l73.10">    *  the data.  We compel |_hireJobWorker| to erase it to this end.</span>
<a href="#l73.11"></a><span id="l73.11">    *</span>
<a href="#l73.12"></a><span id="l73.12" class="difflineminus">-   * @note You MUST NOT call this function from inside a job or an async funtion</span>
<a href="#l73.13"></a><span id="l73.13" class="difflineplus">+   * @note You MUST NOT call this function from inside a job or an async function</span>
<a href="#l73.14"></a><span id="l73.14">    *    on the callbackHandle's stack of generators.  If you are in that</span>
<a href="#l73.15"></a><span id="l73.15">    *    situation, you should just throw an exception.  At the very least,</span>
<a href="#l73.16"></a><span id="l73.16">    *    use a timeout to trigger us.</span>
<a href="#l73.17"></a><span id="l73.17">    */</span>
<a href="#l73.18"></a><span id="l73.18">   killActiveJob: function() {</span>
<a href="#l73.19"></a><span id="l73.19">     // There is nothing to do if we have no job</span>
<a href="#l73.20"></a><span id="l73.20">     if (!this._curIndexingJob)</span>
<a href="#l73.21"></a><span id="l73.21">       return;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l74.1"></a><span id="l74.1" class="difflineminus">--- a/mailnews/db/gloda/modules/mimemsg.js</span>
<a href="#l74.2"></a><span id="l74.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/mimemsg.js</span>
<a href="#l74.3"></a><span id="l74.3" class="difflineat">@@ -152,17 +152,17 @@ function stripEncryptedParts(aPart) {</span>
<a href="#l74.4"></a><span id="l74.4">  * @param [aAllowDownload=false] Should we allow the message to be downloaded</span>
<a href="#l74.5"></a><span id="l74.5">  *     for this streaming request?  The default is false, which means that we</span>
<a href="#l74.6"></a><span id="l74.6">  *     require that the message be available offline.  If false is passed and</span>
<a href="#l74.7"></a><span id="l74.7">  *     the message is not available offline, we will propagate an exception</span>
<a href="#l74.8"></a><span id="l74.8">  *     thrown by the underlying code.</span>
<a href="#l74.9"></a><span id="l74.9">  * @param [aOptions] Optional options.</span>
<a href="#l74.10"></a><span id="l74.10">  * @param [aOptions.saneBodySize] Limit body sizes to a 'reasonable' size in</span>
<a href="#l74.11"></a><span id="l74.11">  *     order to combat corrupt offline/message stores creating pathological</span>
<a href="#l74.12"></a><span id="l74.12" class="difflineminus">- *     situtations where we have erroneously multi-megabyte messages.  This</span>
<a href="#l74.13"></a><span id="l74.13" class="difflineplus">+ *     situations where we have erroneously multi-megabyte messages.  This</span>
<a href="#l74.14"></a><span id="l74.14">  *     also likely reduces the impact of legitimately ridiculously large</span>
<a href="#l74.15"></a><span id="l74.15">  *     messages.</span>
<a href="#l74.16"></a><span id="l74.16">  * @param [aOptions.partsOnDemand] If this is a message stored on an IMAP</span>
<a href="#l74.17"></a><span id="l74.17">  *     server, and for whatever reason, it isn't available locally, then setting</span>
<a href="#l74.18"></a><span id="l74.18">  *     this option to true will make sure that attachments aren't downloaded.</span>
<a href="#l74.19"></a><span id="l74.19">  *     This makes sure the message is available quickly.</span>
<a href="#l74.20"></a><span id="l74.20">  * @param [aOptions.examineEncryptedParts] By default, we won't reveal the</span>
<a href="#l74.21"></a><span id="l74.21">  *     contents of multipart/encrypted parts to the consumers, unless explicitly</span>
<a href="#l74.22"></a><span id="l74.22" class="difflineat">@@ -606,17 +606,17 @@ MimeBody.prototype = {</span>
<a href="#l74.23"></a><span id="l74.23">  *  class.</span>
<a href="#l74.24"></a><span id="l74.24">  *</span>
<a href="#l74.25"></a><span id="l74.25">  * @ivar contentType The content type of this part.</span>
<a href="#l74.26"></a><span id="l74.26">  */</span>
<a href="#l74.27"></a><span id="l74.27"> function MimeUnknown(aContentType) {</span>
<a href="#l74.28"></a><span id="l74.28">   this.partName = null;</span>
<a href="#l74.29"></a><span id="l74.29">   this.contentType = aContentType;</span>
<a href="#l74.30"></a><span id="l74.30">   this.headers = {};</span>
<a href="#l74.31"></a><span id="l74.31" class="difflineminus">-  // Looks like libmime does not always intepret us as an attachment, which</span>
<a href="#l74.32"></a><span id="l74.32" class="difflineplus">+  // Looks like libmime does not always interpret us as an attachment, which</span>
<a href="#l74.33"></a><span id="l74.33">   //  means we'll have to have a default size. Returning undefined would cause</span>
<a href="#l74.34"></a><span id="l74.34">   //  the recursive size computations to fail.</span>
<a href="#l74.35"></a><span id="l74.35">   this._size = 0;</span>
<a href="#l74.36"></a><span id="l74.36">   this.isEncrypted = false;</span>
<a href="#l74.37"></a><span id="l74.37">   // We want to make sure MimeUnknown has a part property: S/MIME encrypted</span>
<a href="#l74.38"></a><span id="l74.38">   // messages have a topmost MimeUnknown part, with the encrypted bit set to 1,</span>
<a href="#l74.39"></a><span id="l74.39">   // and we need to ensure all other encrypted parts are children of this</span>
<a href="#l74.40"></a><span id="l74.40">   // topmost part.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l75.1"></a><span id="l75.1" class="difflineminus">--- a/mailnews/db/gloda/modules/msg_search.js</span>
<a href="#l75.2"></a><span id="l75.2" class="difflineplus">+++ b/mailnews/db/gloda/modules/msg_search.js</span>
<a href="#l75.3"></a><span id="l75.3" class="difflineat">@@ -106,17 +106,17 @@ function reduceSum(accum, curValue) {</span>
<a href="#l75.4"></a><span id="l75.4"> </span>
<a href="#l75.5"></a><span id="l75.5"> /**</span>
<a href="#l75.6"></a><span id="l75.6">  * Scores if all search terms match in a column.  We bias against author</span>
<a href="#l75.7"></a><span id="l75.7">  *  slightly and recipient a bit more in this case because a search that</span>
<a href="#l75.8"></a><span id="l75.8">  *  entirely matches just on a person should give a mention of that person</span>
<a href="#l75.9"></a><span id="l75.9">  *  in the subject or attachment a fighting chance.</span>
<a href="#l75.10"></a><span id="l75.10">  * Keep in mind that because of our indexing in the face of address book</span>
<a href="#l75.11"></a><span id="l75.11">  *  contacts (namely, we index the name used in the e-mail as well as the</span>
<a href="#l75.12"></a><span id="l75.12" class="difflineminus">- *  display name on the address book card associated with the e-mail adress)</span>
<a href="#l75.13"></a><span id="l75.13" class="difflineplus">+ *  display name on the address book card associated with the e-mail address)</span>
<a href="#l75.14"></a><span id="l75.14">  *  a contact is going to bias towards matching multiple times.</span>
<a href="#l75.15"></a><span id="l75.15">  */</span>
<a href="#l75.16"></a><span id="l75.16"> var COLUMN_ALL_MATCH_SCORES = [4, 20, 20, 16, 12];</span>
<a href="#l75.17"></a><span id="l75.17"> /**</span>
<a href="#l75.18"></a><span id="l75.18">  * Score for each distinct term that matches in the column.  This is capped</span>
<a href="#l75.19"></a><span id="l75.19">  *  by COLUMN_ALL_SCORES.</span>
<a href="#l75.20"></a><span id="l75.20">  */</span>
<a href="#l75.21"></a><span id="l75.21"> var COLUMN_PARTIAL_PER_MATCH_SCORES = [1, 4, 4, 4, 3];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l76.1"></a><span id="l76.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js</span>
<a href="#l76.2"></a><span id="l76.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js</span>
<a href="#l76.3"></a><span id="l76.3" class="difflineat">@@ -1154,17 +1154,17 @@ function _inject_failure_on_MsgHdrToMime</span>
<a href="#l76.4"></a><span id="l76.4">  *     failure) or &quot;streaming&quot; indicating that we should inject a failure when</span>
<a href="#l76.5"></a><span id="l76.5">  *     the message indexer attempts to stream a message.  The fault will be an</span>
<a href="#l76.6"></a><span id="l76.6">  *     appropriate exception.  You must omit hangWhile if you use injectFaultIn.</span>
<a href="#l76.7"></a><span id="l76.7">  */</span>
<a href="#l76.8"></a><span id="l76.8"> function configure_gloda_indexing(aArgs) {</span>
<a href="#l76.9"></a><span id="l76.9">   let shouldSuppress = (&quot;event&quot; in aArgs) ? !aArgs.event : false;</span>
<a href="#l76.10"></a><span id="l76.10">   if (shouldSuppress != GlodaIndexer.suppressIndexing) {</span>
<a href="#l76.11"></a><span id="l76.11">     mark_action(&quot;glodaTestHelper&quot;,</span>
<a href="#l76.12"></a><span id="l76.12" class="difflineminus">-                &quot;setting supress indexing to &quot; + shouldSuppress, []);</span>
<a href="#l76.13"></a><span id="l76.13" class="difflineplus">+                &quot;setting suppress indexing to &quot; + shouldSuppress, []);</span>
<a href="#l76.14"></a><span id="l76.14">     GlodaIndexer.suppressIndexing = shouldSuppress;</span>
<a href="#l76.15"></a><span id="l76.15">   }</span>
<a href="#l76.16"></a><span id="l76.16"> </span>
<a href="#l76.17"></a><span id="l76.17">   if (&quot;hangWhile&quot; in aArgs) {</span>
<a href="#l76.18"></a><span id="l76.18">     mark_action(&quot;glodaTestHelper&quot;, &quot;enabling hang injection in&quot;,</span>
<a href="#l76.19"></a><span id="l76.19">                 [aArgs.hangWhile]);</span>
<a href="#l76.20"></a><span id="l76.20">     switch (aArgs.hangWhile) {</span>
<a href="#l76.21"></a><span id="l76.21">       case &quot;streaming&quot;:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l77.1"></a><span id="l77.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_index_compaction.js</span>
<a href="#l77.2"></a><span id="l77.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_index_compaction.js</span>
<a href="#l77.3"></a><span id="l77.3" class="difflineat">@@ -190,17 +190,17 @@ function* test_moves_and_deletions_on_co</span>
<a href="#l77.4"></a><span id="l77.4">   //  indexing in the target folder...</span>
<a href="#l77.5"></a><span id="l77.5">   yield async_move_messages(moveSet, otherFolder);</span>
<a href="#l77.6"></a><span id="l77.6">   // Kill the event-based indexing job of the target; we want the indexing sweep</span>
<a href="#l77.7"></a><span id="l77.7">   //  to see it as a move.</span>
<a href="#l77.8"></a><span id="l77.8">   mark_action(&quot;actual&quot;, &quot;killing all indexing jobs&quot;, []);</span>
<a href="#l77.9"></a><span id="l77.9">   GlodaIndexer.purgeJobsUsingFilter(() =&gt; true);</span>
<a href="#l77.10"></a><span id="l77.10"> </span>
<a href="#l77.11"></a><span id="l77.11">   // - Indexing pass</span>
<a href="#l77.12"></a><span id="l77.12" class="difflineminus">-  // Reenable indexing so we can do a sweep.</span>
<a href="#l77.13"></a><span id="l77.13" class="difflineplus">+  // Re-enable indexing so we can do a sweep.</span>
<a href="#l77.14"></a><span id="l77.14">   configure_gloda_indexing({event: true});</span>
<a href="#l77.15"></a><span id="l77.15"> </span>
<a href="#l77.16"></a><span id="l77.16">   // This will trigger compaction (per the previous unit test) which should mark</span>
<a href="#l77.17"></a><span id="l77.17">   //  moveSet and delSet as deleted.  Then it should happen in to the next</span>
<a href="#l77.18"></a><span id="l77.18">   //  folder and add moveSet again...</span>
<a href="#l77.19"></a><span id="l77.19">   mark_action(&quot;actual&quot;, &quot;triggering indexing sweep&quot;, []);</span>
<a href="#l77.20"></a><span id="l77.20">   GlodaMsgIndexer.indexingSweepNeeded = true;</span>
<a href="#l77.21"></a><span id="l77.21">   yield wait_for_gloda_indexer([moveSet], {deleted: [moveSet, delSet]});</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l78.1"></a><span id="l78.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_query_core.js</span>
<a href="#l78.2"></a><span id="l78.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_query_core.js</span>
<a href="#l78.3"></a><span id="l78.3" class="difflineat">@@ -350,17 +350,17 @@ function* test_empty_set_logic() {</span>
<a href="#l78.4"></a><span id="l78.4"> /*</span>
<a href="#l78.5"></a><span id="l78.5">  * The conceit of our search is that more recent messages are better than older</span>
<a href="#l78.6"></a><span id="l78.6">  *  messages.  But at the same time, we care about some messages more than</span>
<a href="#l78.7"></a><span id="l78.7">  *  others (in general), and we care about messages that match search terms</span>
<a href="#l78.8"></a><span id="l78.8">  *  more strongly too.  So we introduce a general 'score' heuristic which we</span>
<a href="#l78.9"></a><span id="l78.9">  *  then apply to message timestamps to make them appear more recent.  We</span>
<a href="#l78.10"></a><span id="l78.10">  *  then order by this 'date score' hybrid, which we dub &quot;dascore&quot;.  Such a</span>
<a href="#l78.11"></a><span id="l78.11">  *  flattening heuristic is over-simple, but believed to be sufficient to</span>
<a href="#l78.12"></a><span id="l78.12" class="difflineminus">- *  generally get us the messsages we want.  Post-processing based can then</span>
<a href="#l78.13"></a><span id="l78.13" class="difflineplus">+ *  generally get us the messages we want.  Post-processing based can then</span>
<a href="#l78.14"></a><span id="l78.14">  *  be more multi-dimensional and what not, but that is beyond the scope of</span>
<a href="#l78.15"></a><span id="l78.15">  *  this unit test.</span>
<a href="#l78.16"></a><span id="l78.16">  */</span>
<a href="#l78.17"></a><span id="l78.17"> </span>
<a href="#l78.18"></a><span id="l78.18"> /**</span>
<a href="#l78.19"></a><span id="l78.19">  * How much time boost should a 'score point' amount to?  The authoritative,</span>
<a href="#l78.20"></a><span id="l78.20">  *  incontrivertible answer, across all time and space, is a week.</span>
<a href="#l78.21"></a><span id="l78.21">  *  Gloda and storage like to store things as PRTime and so we do it too,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l79.1"></a><span id="l79.1" class="difflineminus">--- a/mailnews/db/msgdb/public/nsIMsgDatabase.idl</span>
<a href="#l79.2"></a><span id="l79.2" class="difflineplus">+++ b/mailnews/db/msgdb/public/nsIMsgDatabase.idl</span>
<a href="#l79.3"></a><span id="l79.3" class="difflineat">@@ -539,17 +539,17 @@ interface nsIMsgDatabase : nsIDBChangeAn</span>
<a href="#l79.4"></a><span id="l79.4"> </span>
<a href="#l79.5"></a><span id="l79.5">   // when creating a view, the default sort order and view flags</span>
<a href="#l79.6"></a><span id="l79.6">   // use these for the default.  (this allows news to override, so that</span>
<a href="#l79.7"></a><span id="l79.7">   // news can be threaded by default)</span>
<a href="#l79.8"></a><span id="l79.8">   readonly attribute nsMsgViewFlagsTypeValue defaultViewFlags;</span>
<a href="#l79.9"></a><span id="l79.9">   readonly attribute nsMsgViewSortTypeValue  defaultSortType;</span>
<a href="#l79.10"></a><span id="l79.10">   readonly attribute nsMsgViewSortOrderValue defaultSortOrder;</span>
<a href="#l79.11"></a><span id="l79.11"> </span>
<a href="#l79.12"></a><span id="l79.12" class="difflineminus">-  // for msg hdr hash table allocation. controllable by caller to improve folder loading preformance.</span>
<a href="#l79.13"></a><span id="l79.13" class="difflineplus">+  // for msg hdr hash table allocation. controllable by caller to improve folder loading performance.</span>
<a href="#l79.14"></a><span id="l79.14">   attribute unsigned long msgHdrCacheSize;</span>
<a href="#l79.15"></a><span id="l79.15"> </span>
<a href="#l79.16"></a><span id="l79.16">   /**</span>
<a href="#l79.17"></a><span id="l79.17">    * The list of messages currently in the NEW state.</span>
<a href="#l79.18"></a><span id="l79.18">    *</span>
<a href="#l79.19"></a><span id="l79.19">    * If there are no such messages, a null pointer may be returned.</span>
<a href="#l79.20"></a><span id="l79.20">    * the caller should free when done using free.</span>
<a href="#l79.21"></a><span id="l79.21">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l80.1"></a><span id="l80.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgDatabase.cpp</span>
<a href="#l80.2"></a><span id="l80.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgDatabase.cpp</span>
<a href="#l80.3"></a><span id="l80.3" class="difflineat">@@ -1280,17 +1280,17 @@ nsresult nsMsgDatabase::CheckForErrors(n</span>
<a href="#l80.4"></a><span id="l80.4">     m_dbFolderInfo = nullptr;</span>
<a href="#l80.5"></a><span id="l80.5">     ForceClosed();</span>
<a href="#l80.6"></a><span id="l80.6">     if (err == NS_MSG_ERROR_FOLDER_SUMMARY_OUT_OF_DATE)</span>
<a href="#l80.7"></a><span id="l80.7">       summaryFile-&gt;Remove(false);</span>
<a href="#l80.8"></a><span id="l80.8">   }</span>
<a href="#l80.9"></a><span id="l80.9">   if (NS_FAILED(err) || newFile)</span>
<a href="#l80.10"></a><span id="l80.10">   {</span>
<a href="#l80.11"></a><span id="l80.11">     // if we couldn't open file, or we have a blank one, and we're supposed</span>
<a href="#l80.12"></a><span id="l80.12" class="difflineminus">-    // to upgrade, updgrade it.</span>
<a href="#l80.13"></a><span id="l80.13" class="difflineplus">+    // to upgrade, upgrade it.</span>
<a href="#l80.14"></a><span id="l80.14">     if (newFile &amp;&amp; !m_leaveInvalidDB)  // caller is upgrading, and we have empty summary file,</span>
<a href="#l80.15"></a><span id="l80.15">     {          // leave db around and open so caller can upgrade it.</span>
<a href="#l80.16"></a><span id="l80.16">       err = NS_MSG_ERROR_FOLDER_SUMMARY_MISSING;</span>
<a href="#l80.17"></a><span id="l80.17">     }</span>
<a href="#l80.18"></a><span id="l80.18">     else if (NS_FAILED(err) &amp;&amp; err != NS_MSG_ERROR_FOLDER_SUMMARY_OUT_OF_DATE)</span>
<a href="#l80.19"></a><span id="l80.19">     {</span>
<a href="#l80.20"></a><span id="l80.20">       Close(false);</span>
<a href="#l80.21"></a><span id="l80.21">       summaryFile-&gt;Remove(false);  // blow away the db if it's corrupt.</span>
<a href="#l80.22"></a><span id="l80.22" class="difflineat">@@ -2034,17 +2034,17 @@ nsresult nsMsgDatabase::RemoveHeaderFrom</span>
<a href="#l80.23"></a><span id="l80.23"> </span>
<a href="#l80.24"></a><span id="l80.24"> NS_IMETHODIMP nsMsgDatabase::RemoveHeaderMdbRow(nsIMsgDBHdr *msg)</span>
<a href="#l80.25"></a><span id="l80.25"> {</span>
<a href="#l80.26"></a><span id="l80.26">   NS_ENSURE_ARG_POINTER(msg);</span>
<a href="#l80.27"></a><span id="l80.27">   nsMsgHdr* msgHdr = static_cast&lt;nsMsgHdr*&gt;(msg);  // closed system, so this is ok</span>
<a href="#l80.28"></a><span id="l80.28">   return RemoveHeaderFromDB(msgHdr);</span>
<a href="#l80.29"></a><span id="l80.29"> }</span>
<a href="#l80.30"></a><span id="l80.30"> </span>
<a href="#l80.31"></a><span id="l80.31" class="difflineminus">-// This is a lower level routine which doesn't send notifcations or</span>
<a href="#l80.32"></a><span id="l80.32" class="difflineplus">+// This is a lower level routine which doesn't send notifications or</span>
<a href="#l80.33"></a><span id="l80.33"> // update folder info. One use is when a rule fires moving a header</span>
<a href="#l80.34"></a><span id="l80.34"> // from one db to another, to remove it from the first db.</span>
<a href="#l80.35"></a><span id="l80.35"> </span>
<a href="#l80.36"></a><span id="l80.36"> nsresult nsMsgDatabase::RemoveHeaderFromDB(nsMsgHdr *msgHdr)</span>
<a href="#l80.37"></a><span id="l80.37"> {</span>
<a href="#l80.38"></a><span id="l80.38">   if (!msgHdr)</span>
<a href="#l80.39"></a><span id="l80.39">     return NS_ERROR_NULL_POINTER;</span>
<a href="#l80.40"></a><span id="l80.40">   nsresult ret = NS_OK;</span>
<a href="#l80.41"></a><span id="l80.41" class="difflineat">@@ -5396,17 +5396,17 @@ nsresult nsMsgDatabase::PurgeExcessMessa</span>
<a href="#l80.42"></a><span id="l80.42">         Commit(nsMsgDBCommitType::kLargeCommit);</span>
<a href="#l80.43"></a><span id="l80.43">     }</span>
<a href="#l80.44"></a><span id="l80.44">   }</span>
<a href="#l80.45"></a><span id="l80.45">   return rv;</span>
<a href="#l80.46"></a><span id="l80.46"> }</span>
<a href="#l80.47"></a><span id="l80.47"> </span>
<a href="#l80.48"></a><span id="l80.48"> NS_IMPL_ISUPPORTS(nsMsgRetentionSettings, nsIMsgRetentionSettings)</span>
<a href="#l80.49"></a><span id="l80.49"> </span>
<a href="#l80.50"></a><span id="l80.50" class="difflineminus">-// Initialise the member variables to resonable defaults.</span>
<a href="#l80.51"></a><span id="l80.51" class="difflineplus">+// Initialise the member variables to reasonable defaults.</span>
<a href="#l80.52"></a><span id="l80.52"> nsMsgRetentionSettings::nsMsgRetentionSettings()</span>
<a href="#l80.53"></a><span id="l80.53"> : m_retainByPreference(1),</span>
<a href="#l80.54"></a><span id="l80.54">   m_daysToKeepHdrs(0),</span>
<a href="#l80.55"></a><span id="l80.55">   m_numHeadersToKeep(0),</span>
<a href="#l80.56"></a><span id="l80.56">   m_useServerDefaults(true),</span>
<a href="#l80.57"></a><span id="l80.57">   m_cleanupBodiesByDays(false),</span>
<a href="#l80.58"></a><span id="l80.58">   m_daysToKeepBodies(0),</span>
<a href="#l80.59"></a><span id="l80.59">   m_applyToFlaggedMessages(false)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l81.1"></a><span id="l81.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</span>
<a href="#l81.2"></a><span id="l81.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</span>
<a href="#l81.3"></a><span id="l81.3" class="difflineat">@@ -597,17 +597,17 @@ void Tokenizer::tokenize_ascii_word(char</span>
<a href="#l81.4"></a><span id="l81.4">     skipToken.AssignLiteral(&quot;skip:&quot;);</span>
<a href="#l81.5"></a><span id="l81.5">     skipToken.Append(word[0]);</span>
<a href="#l81.6"></a><span id="l81.6">     skipToken.Append(' ');</span>
<a href="#l81.7"></a><span id="l81.7">     skipToken.AppendInt((wordLength/10) * 10);</span>
<a href="#l81.8"></a><span id="l81.8">     add(skipToken.get());</span>
<a href="#l81.9"></a><span id="l81.9">   }</span>
<a href="#l81.10"></a><span id="l81.10"> }</span>
<a href="#l81.11"></a><span id="l81.11"> </span>
<a href="#l81.12"></a><span id="l81.12" class="difflineminus">-// one substract and one conditional jump should be faster than two conditional jump on most recent system.</span>
<a href="#l81.13"></a><span id="l81.13" class="difflineplus">+// one subtract and one conditional jump should be faster than two conditional jump on most recent system.</span>
<a href="#l81.14"></a><span id="l81.14"> #define IN_RANGE(x, low, high)  ((uint16_t)((x)-(low)) &lt;= (high)-(low))</span>
<a href="#l81.15"></a><span id="l81.15"> </span>
<a href="#l81.16"></a><span id="l81.16"> #define IS_JA_HIRAGANA(x)   IN_RANGE(x, 0x3040, 0x309F)</span>
<a href="#l81.17"></a><span id="l81.17"> // swapping the range using xor operation to reduce conditional jump.</span>
<a href="#l81.18"></a><span id="l81.18"> #define IS_JA_KATAKANA(x)	(IN_RANGE(x^0x0004, 0x30A0, 0x30FE)||(IN_RANGE(x, 0xFF66, 0xFF9F)))</span>
<a href="#l81.19"></a><span id="l81.19"> #define IS_JA_KANJI(x)      (IN_RANGE(x, 0x2E80, 0x2FDF)||IN_RANGE(x, 0x4E00, 0x9FAF))</span>
<a href="#l81.20"></a><span id="l81.20"> #define IS_JA_KUTEN(x)      (((x)==0x3001)||((x)==0xFF64)||((x)==0xFF0E))</span>
<a href="#l81.21"></a><span id="l81.21"> #define IS_JA_TOUTEN(x)     (((x)==0x3002)||((x)==0xFF61)||((x)==0xFF0C))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l82.1"></a><span id="l82.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h</span>
<a href="#l82.2"></a><span id="l82.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.h</span>
<a href="#l82.3"></a><span id="l82.3" class="difflineat">@@ -105,17 +105,17 @@ protected:</span>
<a href="#l82.4"></a><span id="l82.4"> class Tokenizer: public TokenHash {</span>
<a href="#l82.5"></a><span id="l82.5"> public:</span>
<a href="#l82.6"></a><span id="l82.6">     Tokenizer();</span>
<a href="#l82.7"></a><span id="l82.7">     ~Tokenizer();</span>
<a href="#l82.8"></a><span id="l82.8"> </span>
<a href="#l82.9"></a><span id="l82.9">     Token* get(const char* word);</span>
<a href="#l82.10"></a><span id="l82.10"> </span>
<a href="#l82.11"></a><span id="l82.11">     // The training set keeps an occurrence count on each word. This count</span>
<a href="#l82.12"></a><span id="l82.12" class="difflineminus">-    // is supposed to count the # of messsages it occurs in.</span>
<a href="#l82.13"></a><span id="l82.13" class="difflineplus">+    // is supposed to count the # of messages it occurs in.</span>
<a href="#l82.14"></a><span id="l82.14">     // When add/remove is called while tokenizing a message and NOT the training set,</span>
<a href="#l82.15"></a><span id="l82.15">     //</span>
<a href="#l82.16"></a><span id="l82.16">     Token* add(const char* word, uint32_t count = 1);</span>
<a href="#l82.17"></a><span id="l82.17"> </span>
<a href="#l82.18"></a><span id="l82.18">     Token* copyTokens();</span>
<a href="#l82.19"></a><span id="l82.19"> </span>
<a href="#l82.20"></a><span id="l82.20">     void tokenize(const char* text);</span>
<a href="#l82.21"></a><span id="l82.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l83.1"></a><span id="l83.1" class="difflineminus">--- a/mailnews/extensions/fts3/src/fts3_porter.c</span>
<a href="#l83.2"></a><span id="l83.2" class="difflineplus">+++ b/mailnews/extensions/fts3/src/fts3_porter.c</span>
<a href="#l83.3"></a><span id="l83.3" class="difflineat">@@ -288,17 +288,17 @@ static const char cType[] = {</span>
<a href="#l83.4"></a><span id="l83.4"> ** to Porter ruls.  </span>
<a href="#l83.5"></a><span id="l83.5"> **</span>
<a href="#l83.6"></a><span id="l83.6"> ** A consonate is any letter other than 'a', 'e', 'i', 'o', or 'u'.</span>
<a href="#l83.7"></a><span id="l83.7"> ** 'Y' is a consonant unless it follows another consonant,</span>
<a href="#l83.8"></a><span id="l83.8"> ** in which case it is a vowel.</span>
<a href="#l83.9"></a><span id="l83.9"> **</span>
<a href="#l83.10"></a><span id="l83.10"> ** In these routine, the letters are in reverse order.  So the 'y' rule</span>
<a href="#l83.11"></a><span id="l83.11"> ** is that 'y' is a consonant unless it is followed by another</span>
<a href="#l83.12"></a><span id="l83.12" class="difflineminus">-** consonent.</span>
<a href="#l83.13"></a><span id="l83.13" class="difflineplus">+** consonant.</span>
<a href="#l83.14"></a><span id="l83.14"> */</span>
<a href="#l83.15"></a><span id="l83.15"> static int isVowel(const char*);</span>
<a href="#l83.16"></a><span id="l83.16"> static int isConsonant(const char *z){</span>
<a href="#l83.17"></a><span id="l83.17">   int j;</span>
<a href="#l83.18"></a><span id="l83.18">   char x = *z;</span>
<a href="#l83.19"></a><span id="l83.19">   if( x==0 ) return 0;</span>
<a href="#l83.20"></a><span id="l83.20">   assert( x&gt;='a' &amp;&amp; x&lt;='z' );</span>
<a href="#l83.21"></a><span id="l83.21">   j = cType[x-'a'];</span>
<a href="#l83.22"></a><span id="l83.22" class="difflineat">@@ -400,17 +400,17 @@ static int star_oh(const char *z){</span>
<a href="#l83.23"></a><span id="l83.23">     z[0]!=0 &amp;&amp; isConsonant(z) &amp;&amp;</span>
<a href="#l83.24"></a><span id="l83.24">     z[0]!='w' &amp;&amp; z[0]!='x' &amp;&amp; z[0]!='y' &amp;&amp;</span>
<a href="#l83.25"></a><span id="l83.25">     z[1]!=0 &amp;&amp; isVowel(z+1) &amp;&amp;</span>
<a href="#l83.26"></a><span id="l83.26">     z[2]!=0 &amp;&amp; isConsonant(z+2);</span>
<a href="#l83.27"></a><span id="l83.27"> }</span>
<a href="#l83.28"></a><span id="l83.28"> </span>
<a href="#l83.29"></a><span id="l83.29"> /*</span>
<a href="#l83.30"></a><span id="l83.30"> ** If the word ends with zFrom and xCond() is true for the stem</span>
<a href="#l83.31"></a><span id="l83.31" class="difflineminus">-** of the word that preceeds the zFrom ending, then change the </span>
<a href="#l83.32"></a><span id="l83.32" class="difflineplus">+** of the word that precedes the zFrom ending, then change the </span>
<a href="#l83.33"></a><span id="l83.33"> ** ending to zTo.</span>
<a href="#l83.34"></a><span id="l83.34"> **</span>
<a href="#l83.35"></a><span id="l83.35"> ** The input word *pz and zFrom are both in reverse order.  zTo</span>
<a href="#l83.36"></a><span id="l83.36"> ** is in normal order. </span>
<a href="#l83.37"></a><span id="l83.37"> **</span>
<a href="#l83.38"></a><span id="l83.38"> ** Return TRUE if zFrom matches.  Return FALSE if zFrom does not</span>
<a href="#l83.39"></a><span id="l83.39"> ** match.  Not that TRUE is returned even if xCond() fails and</span>
<a href="#l83.40"></a><span id="l83.40"> ** no substitution occurs.</span>
<a href="#l83.41"></a><span id="l83.41" class="difflineat">@@ -813,32 +813,32 @@ static const char porterIdChar[] = {</span>
<a href="#l83.42"></a><span id="l83.42">  * - 0xff61: halfwidth ideographic full stop (~ narrow 0x3002)</span>
<a href="#l83.43"></a><span id="l83.43">  * - 0xff64: halfwidth ideographic comma (~ narrow 0x3001)</span>
<a href="#l83.44"></a><span id="l83.44">  *</span>
<a href="#l83.45"></a><span id="l83.45">  * It is possible we should be treating other things as delimiters!</span>
<a href="#l83.46"></a><span id="l83.46">  */</span>
<a href="#l83.47"></a><span id="l83.47"> #define IS_JA_DELIM(x) (((x)==0x3001)||((x)==0xFF64)||((x)==0xFF0E)||((x)==0x3002)||((x)==0xFF61)||((x)==0xFF0C))</span>
<a href="#l83.48"></a><span id="l83.48"> </span>
<a href="#l83.49"></a><span id="l83.49"> /**</span>
<a href="#l83.50"></a><span id="l83.50" class="difflineminus">- * The previous character was a delimeter (which includes the start of the</span>
<a href="#l83.51"></a><span id="l83.51" class="difflineplus">+ * The previous character was a delimiter (which includes the start of the</span>
<a href="#l83.52"></a><span id="l83.52">  *  string).</span>
<a href="#l83.53"></a><span id="l83.53">  */</span>
<a href="#l83.54"></a><span id="l83.54"> #define BIGRAM_RESET   0</span>
<a href="#l83.55"></a><span id="l83.55"> /**</span>
<a href="#l83.56"></a><span id="l83.56">  * The previous character was a CJK character and we have only seen one of them.</span>
<a href="#l83.57"></a><span id="l83.57">  *  If we had seen more than one in a row it would be the BIGRAM_USE state.</span>
<a href="#l83.58"></a><span id="l83.58">  */</span>
<a href="#l83.59"></a><span id="l83.59"> #define BIGRAM_UNKNOWN 1</span>
<a href="#l83.60"></a><span id="l83.60"> /**</span>
<a href="#l83.61"></a><span id="l83.61">  * We have seen two or more CJK characters in a row.</span>
<a href="#l83.62"></a><span id="l83.62">  */</span>
<a href="#l83.63"></a><span id="l83.63"> #define BIGRAM_USE     2</span>
<a href="#l83.64"></a><span id="l83.64"> /**</span>
<a href="#l83.65"></a><span id="l83.65">  * The previous character was ASCII or something in the unicode general scripts</span>
<a href="#l83.66"></a><span id="l83.66" class="difflineminus">- *  area that we do not believe is a delimeter.  We call it 'alpha' as in</span>
<a href="#l83.67"></a><span id="l83.67" class="difflineplus">+ *  area that we do not believe is a delimiter.  We call it 'alpha' as in</span>
<a href="#l83.68"></a><span id="l83.68">  *  alphabetic/alphanumeric and something that should be tokenized based on</span>
<a href="#l83.69"></a><span id="l83.69">  *  delimiters rather than on a bi-gram basis.</span>
<a href="#l83.70"></a><span id="l83.70">  */</span>
<a href="#l83.71"></a><span id="l83.71"> #define BIGRAM_ALPHA   3</span>
<a href="#l83.72"></a><span id="l83.72"> </span>
<a href="#l83.73"></a><span id="l83.73"> static int isDelim(</span>
<a href="#l83.74"></a><span id="l83.74">   const unsigned char *zCur,    /* IN: current pointer of token */</span>
<a href="#l83.75"></a><span id="l83.75">   const unsigned char *zTerm,   /* IN: one character beyond end of token */</span>
<a href="#l83.76"></a><span id="l83.76" class="difflineat">@@ -883,17 +883,17 @@ static int isDelim(</span>
<a href="#l83.77"></a><span id="l83.77">     /* ignore this because it is combined with previous char */</span>
<a href="#l83.78"></a><span id="l83.78">    return 0;</span>
<a href="#l83.79"></a><span id="l83.79">   }</span>
<a href="#l83.80"></a><span id="l83.80"> </span>
<a href="#l83.81"></a><span id="l83.81">   /* this isn't CJK range, so return as no delim */</span>
<a href="#l83.82"></a><span id="l83.82">   // Anything less than 0x2000 (except to U+0E00-U+0EFF and  U+1780-U+17FF) </span>
<a href="#l83.83"></a><span id="l83.83">   // is the general scripts area and should not be bi-gram indexed.</span>
<a href="#l83.84"></a><span id="l83.84">   // 0xa000 - 0a4cf is the Yi area.  It is apparently a phonetic language whose</span>
<a href="#l83.85"></a><span id="l83.85" class="difflineminus">-  //  usage does not appear to have simple delimeter rules, so we're leaving it</span>
<a href="#l83.86"></a><span id="l83.86" class="difflineplus">+  //  usage does not appear to have simple delimiter rules, so we're leaving it</span>
<a href="#l83.87"></a><span id="l83.87">   //  as bigram processed.  This is a guess, if you know better, let us know.</span>
<a href="#l83.88"></a><span id="l83.88">   //  (We previously bailed on this range too.)</span>
<a href="#l83.89"></a><span id="l83.89">   // Addition, U+0E00-U+0E7F is Thai, U+0E80-U+0EFF is Laos,</span>
<a href="#l83.90"></a><span id="l83.90">   // and U+1780-U+17FF is Khmer.  It is no easy way to break each word.</span>
<a href="#l83.91"></a><span id="l83.91">   // So these should use bi-gram too. </span>
<a href="#l83.92"></a><span id="l83.92">   // cases: &quot;aa&quot;, &quot;.a&quot;, &quot;&amp;a&quot;</span>
<a href="#l83.93"></a><span id="l83.93">   if (c &lt; 0xe00 ||</span>
<a href="#l83.94"></a><span id="l83.94">      (c &gt;= 0xf00 &amp;&amp; c &lt; 0x1780) ||</span>
<a href="#l83.95"></a><span id="l83.95" class="difflineat">@@ -954,28 +954,28 @@ static int isDelim(</span>
<a href="#l83.96"></a><span id="l83.96">  *    search based on the arbitrary context of the indexed documents.)</span>
<a href="#l83.97"></a><span id="l83.97">  *</span>
<a href="#l83.98"></a><span id="l83.98">  * It may be useful to think of this function as operating at the points between</span>
<a href="#l83.99"></a><span id="l83.99">  *  characters.  While we are considering the 'current' character (the one after</span>
<a href="#l83.100"></a><span id="l83.100">  *  the 'point'), we are also interested in the 'previous' character (the one</span>
<a href="#l83.101"></a><span id="l83.101">  *  preceding the point).</span>
<a href="#l83.102"></a><span id="l83.102">  * At any 'point', there are a number of possible situations which I will</span>
<a href="#l83.103"></a><span id="l83.103">  *  illustrate with pairs of characters. 'a' means alphanumeric ASCII or a</span>
<a href="#l83.104"></a><span id="l83.104" class="difflineminus">- *  non-ASCII character that is not bi-grammable or a delimeter, '.'</span>
<a href="#l83.105"></a><span id="l83.105" class="difflineplus">+ *  non-ASCII character that is not bi-grammable or a delimiter, '.'</span>
<a href="#l83.106"></a><span id="l83.106">  *  means a delimiter (space or punctuation), '&amp;' means a bi-grammable</span>
<a href="#l83.107"></a><span id="l83.107">  *  character.</span>
<a href="#l83.108"></a><span id="l83.108">  * - aa: We are in the midst of a token.  State remains BIGRAM_ALPHA.</span>
<a href="#l83.109"></a><span id="l83.109">  * - a.: We will generate a porter stemmed or copied token.  State was</span>
<a href="#l83.110"></a><span id="l83.110">  *        BIGRAM_ALPHA, gets set to BIGRAM_RESET.</span>
<a href="#l83.111"></a><span id="l83.111">  * - a&amp;: We will generate a porter stemmed or copied token; we will set our</span>
<a href="#l83.112"></a><span id="l83.112">  *        state to BIGRAM_UNKNOWN to indicate we have seen one bigram character</span>
<a href="#l83.113"></a><span id="l83.113">  *        but that it is not yet time to emit a bigram.</span>
<a href="#l83.114"></a><span id="l83.114">  * - .a: We are starting a token.  State was BIGRAM_RESET, gets set to</span>
<a href="#l83.115"></a><span id="l83.115">  *        BIGRAM_ALPHA.</span>
<a href="#l83.116"></a><span id="l83.116" class="difflineminus">- * - ..: We skip/eat the delimeters.  State stays BIGRAM_RESET.</span>
<a href="#l83.117"></a><span id="l83.117" class="difflineplus">+ * - ..: We skip/eat the delimiters.  State stays BIGRAM_RESET.</span>
<a href="#l83.118"></a><span id="l83.118">  * - .&amp;: State set to BIGRAM_UNKNOWN to indicate we have seen one bigram char.</span>
<a href="#l83.119"></a><span id="l83.119">  * - &amp;a: If the state was BIGRAM_USE, we generate a bi-gram token.  If the state</span>
<a href="#l83.120"></a><span id="l83.120">  *        was BIGRAM_UNKNOWN we had only seen one CJK character and so don't do</span>
<a href="#l83.121"></a><span id="l83.121">  *        anything.  State is set to BIGRAM_ALPHA.</span>
<a href="#l83.122"></a><span id="l83.122">  * - &amp;.: Same as the &quot;&amp;a&quot; case, but state is set to BIGRAM_RESET.</span>
<a href="#l83.123"></a><span id="l83.123">  * - &amp;&amp;: We will generate a bi-gram token.  State was either BIGRAM_UNKNOWN or</span>
<a href="#l83.124"></a><span id="l83.124">  *        BIGRAM_USE, gets set to BIGRAM_USE.</span>
<a href="#l83.125"></a><span id="l83.125">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l84.1"></a><span id="l84.1" class="difflineminus">--- a/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</span>
<a href="#l84.2"></a><span id="l84.2" class="difflineplus">+++ b/mailnews/extensions/mailviews/src/nsMsgMailViewList.cpp</span>
<a href="#l84.3"></a><span id="l84.3" class="difflineat">@@ -252,17 +252,17 @@ nsresult nsMsgMailViewList::LoadMailView</span>
<a href="#l84.4"></a><span id="l84.4"> </span>
<a href="#l84.5"></a><span id="l84.5">          // get the profile directory</span>
<a href="#l84.6"></a><span id="l84.6">         rv = NS_GetSpecialDirectory(NS_APP_USER_PROFILE_50_DIR, getter_AddRefs(profileDir));</span>
<a href="#l84.7"></a><span id="l84.7"> </span>
<a href="#l84.8"></a><span id="l84.8">         // now copy the file over to the profile directory</span>
<a href="#l84.9"></a><span id="l84.9">         defaultMessagesFile-&gt;CopyToNative(profileDir, EmptyCString());</span>
<a href="#l84.10"></a><span id="l84.10">     }</span>
<a href="#l84.11"></a><span id="l84.11">     // this is kind of a hack but I think it will be an effective hack. The filter service already knows how to</span>
<a href="#l84.12"></a><span id="l84.12" class="difflineminus">-    // take a nsIFile and parse the contents into filters which are very similar to mail views. Intead of</span>
<a href="#l84.13"></a><span id="l84.13" class="difflineplus">+    // take a nsIFile and parse the contents into filters which are very similar to mail views. Instead of</span>
<a href="#l84.14"></a><span id="l84.14">     // re-writing all of that dirty parsing code, let's just re-use it then convert the results into a data strcuture</span>
<a href="#l84.15"></a><span id="l84.15">     // we wish to give to our consumers.</span>
<a href="#l84.16"></a><span id="l84.16"> </span>
<a href="#l84.17"></a><span id="l84.17">     nsCOMPtr&lt;nsIMsgFilterService&gt; filterService = do_GetService(NS_MSGFILTERSERVICE_CONTRACTID, &amp;rv);</span>
<a href="#l84.18"></a><span id="l84.18">     nsCOMPtr&lt;nsIMsgFilterList&gt; mfilterList;</span>
<a href="#l84.19"></a><span id="l84.19"> </span>
<a href="#l84.20"></a><span id="l84.20">     rv = filterService-&gt;OpenFilterList(file, nullptr, nullptr, getter_AddRefs(mFilterList));</span>
<a href="#l84.21"></a><span id="l84.21">     NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l85.1"></a><span id="l85.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l85.2"></a><span id="l85.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l85.3"></a><span id="l85.3" class="difflineat">@@ -191,17 +191,17 @@ bool nsMsgMdnGenerator::ProcessSendMode(</span>
<a href="#l85.4"></a><span id="l85.4">         if (!PL_strcasestr(m_dntRrt.get(), accountDomain))</span>
<a href="#l85.5"></a><span id="l85.5">             miscState |= MDN_OUTSIDE_DOMAIN;</span>
<a href="#l85.6"></a><span id="l85.6">         if (NotInToOrCc())</span>
<a href="#l85.7"></a><span id="l85.7">             miscState |= MDN_NOT_IN_TO_CC;</span>
<a href="#l85.8"></a><span id="l85.8">         m_reallySendMdn = true;</span>
<a href="#l85.9"></a><span id="l85.9">         // *********</span>
<a href="#l85.10"></a><span id="l85.10">         // How are we gona deal with the auto forwarding issues? Some server</span>
<a href="#l85.11"></a><span id="l85.11">         // didn't bother to add addition header or modify existing header to</span>
<a href="#l85.12"></a><span id="l85.12" class="difflineminus">-        // thev message when forwarding. They simply copy the exact same</span>
<a href="#l85.13"></a><span id="l85.13" class="difflineplus">+        // the message when forwarding. They simply copy the exact same</span>
<a href="#l85.14"></a><span id="l85.14">         // message to another user's mailbox. Some change To: to</span>
<a href="#l85.15"></a><span id="l85.15">         // Apparently-To:</span>
<a href="#l85.16"></a><span id="l85.16">         // Unfortunately, there is nothing we can do. It's out of our control.</span>
<a href="#l85.17"></a><span id="l85.17">         // *********</span>
<a href="#l85.18"></a><span id="l85.18">         // starting from lowest denominator to highest</span>
<a href="#l85.19"></a><span id="l85.19">         if (!miscState)</span>
<a href="#l85.20"></a><span id="l85.20">         {   // under normal situation: recipent is in to and cc list,</span>
<a href="#l85.21"></a><span id="l85.21">             // and the sender is from the same domain</span>
<a href="#l85.22"></a><span id="l85.22" class="difflineat">@@ -434,17 +434,17 @@ nsresult nsMsgMdnGenerator::CreateFirstP</span>
<a href="#l85.23"></a><span id="l85.23">     PRExplodedTime now;</span>
<a href="#l85.24"></a><span id="l85.24">     PR_ExplodeTime(PR_Now(), PR_LocalTimeParameters, &amp;now);</span>
<a href="#l85.25"></a><span id="l85.25"> </span>
<a href="#l85.26"></a><span id="l85.26">     int gmtoffset = (now.tm_params.tp_gmt_offset + now.tm_params.tp_dst_offset)</span>
<a href="#l85.27"></a><span id="l85.27">         / 60;</span>
<a href="#l85.28"></a><span id="l85.28">   /* Use PR_FormatTimeUSEnglish() to format the date in US English format,</span>
<a href="#l85.29"></a><span id="l85.29">      then figure out what our local GMT offset is, and append it (since</span>
<a href="#l85.30"></a><span id="l85.30">      PR_FormatTimeUSEnglish() can't do that.) Generate four digit years as</span>
<a href="#l85.31"></a><span id="l85.31" class="difflineminus">-     per RFC 1123 (superceding RFC 822.)</span>
<a href="#l85.32"></a><span id="l85.32" class="difflineplus">+     per RFC 1123 (superseding RFC 822.)</span>
<a href="#l85.33"></a><span id="l85.33">   */</span>
<a href="#l85.34"></a><span id="l85.34">     PR_FormatTimeUSEnglish(tmpBuffer, 100,</span>
<a href="#l85.35"></a><span id="l85.35">                            &quot;Date: %a, %d %b %Y %H:%M:%S &quot;,</span>
<a href="#l85.36"></a><span id="l85.36">                            &amp;now);</span>
<a href="#l85.37"></a><span id="l85.37"> </span>
<a href="#l85.38"></a><span id="l85.38">     PR_snprintf(tmpBuffer + strlen(tmpBuffer), 100,</span>
<a href="#l85.39"></a><span id="l85.39">                 &quot;%c%02d%02d&quot; CRLF,</span>
<a href="#l85.40"></a><span id="l85.40">                 (gmtoffset &gt;= 0 ? '+' : '-'),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l86.1"></a><span id="l86.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/Feed.js</span>
<a href="#l86.2"></a><span id="l86.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/Feed.js</span>
<a href="#l86.3"></a><span id="l86.3" class="difflineat">@@ -88,17 +88,17 @@ Feed.prototype =</span>
<a href="#l86.4"></a><span id="l86.4"> </span>
<a href="#l86.5"></a><span id="l86.5">   set folder (aFolder)</span>
<a href="#l86.6"></a><span id="l86.6">   {</span>
<a href="#l86.7"></a><span id="l86.7">     this.mFolder = aFolder;</span>
<a href="#l86.8"></a><span id="l86.8">   },</span>
<a href="#l86.9"></a><span id="l86.9"> </span>
<a href="#l86.10"></a><span id="l86.10">   get name()</span>
<a href="#l86.11"></a><span id="l86.11">   {</span>
<a href="#l86.12"></a><span id="l86.12" class="difflineminus">-    // Used for the feed's title in Subcribe dialog and opml export.</span>
<a href="#l86.13"></a><span id="l86.13" class="difflineplus">+    // Used for the feed's title in Subscribe dialog and opml export.</span>
<a href="#l86.14"></a><span id="l86.14">     let name = this.title || this.description || this.url;</span>
<a href="#l86.15"></a><span id="l86.15">     return name.replace(/[\n\r\t]+/g, &quot; &quot;).replace(/[\x00-\x1F]+/g, &quot;&quot;);</span>
<a href="#l86.16"></a><span id="l86.16">   },</span>
<a href="#l86.17"></a><span id="l86.17"> </span>
<a href="#l86.18"></a><span id="l86.18">   get folderName()</span>
<a href="#l86.19"></a><span id="l86.19">   {</span>
<a href="#l86.20"></a><span id="l86.20">     if (this.mFolderName)</span>
<a href="#l86.21"></a><span id="l86.21">       return this.mFolderName;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l87.1"></a><span id="l87.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/FeedUtils.jsm</span>
<a href="#l87.2"></a><span id="l87.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/FeedUtils.jsm</span>
<a href="#l87.3"></a><span id="l87.3" class="difflineat">@@ -652,17 +652,17 @@ var FeedUtils = {</span>
<a href="#l87.4"></a><span id="l87.4">  * @return array of urls, or null if none.</span>
<a href="#l87.5"></a><span id="l87.5">  */</span>
<a href="#l87.6"></a><span id="l87.6">   getFeedUrlsInFolder: function(aFolder) {</span>
<a href="#l87.7"></a><span id="l87.7">     if (!aFolder || aFolder.isServer || aFolder.server.type != &quot;rss&quot; ||</span>
<a href="#l87.8"></a><span id="l87.8">         aFolder.getFlag(Ci.nsMsgFolderFlags.Trash) ||</span>
<a href="#l87.9"></a><span id="l87.9">         aFolder.getFlag(Ci.nsMsgFolderFlags.Virtual) ||</span>
<a href="#l87.10"></a><span id="l87.10">         !aFolder.filePath.exists())</span>
<a href="#l87.11"></a><span id="l87.11">       // There are never any feedUrls in the account/non-feed/trash/virtual</span>
<a href="#l87.12"></a><span id="l87.12" class="difflineminus">-      // folders or in a ghost folder (nonexistant on disk yet found in</span>
<a href="#l87.13"></a><span id="l87.13" class="difflineplus">+      // folders or in a ghost folder (nonexistent on disk yet found in</span>
<a href="#l87.14"></a><span id="l87.14">       // aFolder.subFolders).</span>
<a href="#l87.15"></a><span id="l87.15">       return null;</span>
<a href="#l87.16"></a><span id="l87.16"> </span>
<a href="#l87.17"></a><span id="l87.17">     let feedUrlArray = [];</span>
<a href="#l87.18"></a><span id="l87.18"> </span>
<a href="#l87.19"></a><span id="l87.19">     // Get the list from the feeds database.</span>
<a href="#l87.20"></a><span id="l87.20">     try {</span>
<a href="#l87.21"></a><span id="l87.21">       let ds = this.getSubscriptionsDS(aFolder.server);</span>
<a href="#l87.22"></a><span id="l87.22" class="difflineat">@@ -1860,17 +1860,17 @@ var FeedUtils = {</span>
<a href="#l87.23"></a><span id="l87.23">           // to |null| to indicate error disable (and not user disable), but</span>
<a href="#l87.24"></a><span id="l87.24">           // only if the feed is user enabled.</span>
<a href="#l87.25"></a><span id="l87.25">           let options = feed.options;</span>
<a href="#l87.26"></a><span id="l87.26">           if (options.updates.enabled)</span>
<a href="#l87.27"></a><span id="l87.27">             options.updates.enabled = null;</span>
<a href="#l87.28"></a><span id="l87.28"> </span>
<a href="#l87.29"></a><span id="l87.29">           feed.options = options;</span>
<a href="#l87.30"></a><span id="l87.30">           FeedUtils.setStatus(feed.folder, feed.url, &quot;enabled&quot;, false);</span>
<a href="#l87.31"></a><span id="l87.31" class="difflineminus">-          FeedUtils.log.warn(&quot;downloaded: udpates disabled due to error, &quot; +</span>
<a href="#l87.32"></a><span id="l87.32" class="difflineplus">+          FeedUtils.log.warn(&quot;downloaded: updates disabled due to error, &quot; +</span>
<a href="#l87.33"></a><span id="l87.33">                              &quot;check the url - &quot; + feed.url);</span>
<a href="#l87.34"></a><span id="l87.34">         }</span>
<a href="#l87.35"></a><span id="l87.35"> </span>
<a href="#l87.36"></a><span id="l87.36">         if (!this.mSubscribeMode)</span>
<a href="#l87.37"></a><span id="l87.37">         {</span>
<a href="#l87.38"></a><span id="l87.38">           FeedUtils.setStatus(feed.folder, feed.url, &quot;code&quot;, aErrorCode);</span>
<a href="#l87.39"></a><span id="l87.39"> </span>
<a href="#l87.40"></a><span id="l87.40">           if (feed.folder &amp;&amp;</span>
<a href="#l87.41"></a><span id="l87.41" class="difflineat">@@ -1940,17 +1940,17 @@ var FeedUtils = {</span>
<a href="#l87.42"></a><span id="l87.42">         if (feed.server)</span>
<a href="#l87.43"></a><span id="l87.43">           FeedUtils.getSubscriptionsDS(feed.server).Flush();</span>
<a href="#l87.44"></a><span id="l87.44"> </span>
<a href="#l87.45"></a><span id="l87.45">         this.mFeeds = {};</span>
<a href="#l87.46"></a><span id="l87.46">         this.mSubscribeMode = false;</span>
<a href="#l87.47"></a><span id="l87.47">         FeedUtils.log.debug(&quot;downloaded: all pending downloads finished&quot;);</span>
<a href="#l87.48"></a><span id="l87.48"> </span>
<a href="#l87.49"></a><span id="l87.49">         // Should we do this on a timer so the text sticks around for a little</span>
<a href="#l87.50"></a><span id="l87.50" class="difflineminus">-        // while?  It doesnt look like we do it on a timer for newsgroups so</span>
<a href="#l87.51"></a><span id="l87.51" class="difflineplus">+        // while?  It doesn't look like we do it on a timer for newsgroups so</span>
<a href="#l87.52"></a><span id="l87.52">         // we'll follow that model.  Don't clear the status text if we just</span>
<a href="#l87.53"></a><span id="l87.53">         // dumped an error to the status bar!</span>
<a href="#l87.54"></a><span id="l87.54">         if (aErrorCode == FeedUtils.kNewsBlogSuccess &amp;&amp; this.mStatusFeedback)</span>
<a href="#l87.55"></a><span id="l87.55">           this.mStatusFeedback.showStatusString(&quot;&quot;);</span>
<a href="#l87.56"></a><span id="l87.56">       }</span>
<a href="#l87.57"></a><span id="l87.57"> </span>
<a href="#l87.58"></a><span id="l87.58">       feed = null;</span>
<a href="#l87.59"></a><span id="l87.59">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l88.1"></a><span id="l88.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/feed-parser.js</span>
<a href="#l88.2"></a><span id="l88.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/feed-parser.js</span>
<a href="#l88.3"></a><span id="l88.3" class="difflineat">@@ -52,17 +52,17 @@ FeedParser.prototype =</span>
<a href="#l88.4"></a><span id="l88.4">     else if (doc.namespaceURI == FeedUtils.RDF_SYNTAX_NS &amp;&amp;</span>
<a href="#l88.5"></a><span id="l88.5">              doc.getElementsByTagNameNS(FeedUtils.RSS_NS, &quot;channel&quot;)[0])</span>
<a href="#l88.6"></a><span id="l88.6">     {</span>
<a href="#l88.7"></a><span id="l88.7">       aFeed.mFeedType = &quot;RSS_1.xRDF&quot;</span>
<a href="#l88.8"></a><span id="l88.8">       FeedUtils.log.debug(&quot;FeedParser.parseFeed: type:url - &quot; +</span>
<a href="#l88.9"></a><span id="l88.9">                           aFeed.mFeedType +&quot; : &quot; +aFeed.url);</span>
<a href="#l88.10"></a><span id="l88.10">       // aSource can be misencoded (XMLHttpRequest converts to UTF-8 by default),</span>
<a href="#l88.11"></a><span id="l88.11">       // but the DOM is almost always right because it uses the hints in the</span>
<a href="#l88.12"></a><span id="l88.12" class="difflineminus">-      // XML file.  This is slower, but not noticably so.  Mozilla doesn't have</span>
<a href="#l88.13"></a><span id="l88.13" class="difflineplus">+      // XML file.  This is slower, but not noticeably so.  Mozilla doesn't have</span>
<a href="#l88.14"></a><span id="l88.14">       // the XMLHttpRequest.responseBody property that IE has, which provides</span>
<a href="#l88.15"></a><span id="l88.15">       // access to the unencoded response.</span>
<a href="#l88.16"></a><span id="l88.16">       let xmlString = this.mSerializer.serializeToString(doc);</span>
<a href="#l88.17"></a><span id="l88.17">       return this.parseAsRSS1(aFeed, xmlString, aFeed.request.channel.URI);</span>
<a href="#l88.18"></a><span id="l88.18">     }</span>
<a href="#l88.19"></a><span id="l88.19">     else if (doc.namespaceURI == FeedUtils.ATOM_03_NS)</span>
<a href="#l88.20"></a><span id="l88.20">     {</span>
<a href="#l88.21"></a><span id="l88.21">       aFeed.mFeedType = &quot;ATOM_0.3&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l89.1"></a><span id="l89.1" class="difflineminus">--- a/mailnews/extensions/newsblog/content/feed-subscriptions.js</span>
<a href="#l89.2"></a><span id="l89.2" class="difflineplus">+++ b/mailnews/extensions/newsblog/content/feed-subscriptions.js</span>
<a href="#l89.3"></a><span id="l89.3" class="difflineat">@@ -787,17 +787,17 @@ var FeedSubscriptions = {</span>
<a href="#l89.4"></a><span id="l89.4">       if (aItem.url == folderURI)</span>
<a href="#l89.5"></a><span id="l89.5">         return found = true;</span>
<a href="#l89.6"></a><span id="l89.6"> </span>
<a href="#l89.7"></a><span id="l89.7">       for (let i = 0; i &lt; aItem.children.length; i++) {</span>
<a href="#l89.8"></a><span id="l89.8">         if (aItem.children[i].container &amp;&amp; containsFolder(aItem.children[i]))</span>
<a href="#l89.9"></a><span id="l89.9">         {</span>
<a href="#l89.10"></a><span id="l89.10">           if (removeIt &amp;&amp; aItem.children[i].url == folderURI)</span>
<a href="#l89.11"></a><span id="l89.11">           {</span>
<a href="#l89.12"></a><span id="l89.12" class="difflineminus">-            // Get all occurences in the tree cache arrays.</span>
<a href="#l89.13"></a><span id="l89.13" class="difflineplus">+            // Get all occurrences in the tree cache arrays.</span>
<a href="#l89.14"></a><span id="l89.14">             FeedUtils.log.debug(&quot;selectFolder: delete in cache, &quot; +</span>
<a href="#l89.15"></a><span id="l89.15">                                 &quot;parent:children:item:index - &quot;+</span>
<a href="#l89.16"></a><span id="l89.16">                                 aItem.name + &quot;:&quot; + aItem.children.length + &quot;:&quot; +</span>
<a href="#l89.17"></a><span id="l89.17">                                 aItem.children[i].name + &quot;:&quot; + i);</span>
<a href="#l89.18"></a><span id="l89.18">             aItem.children.splice(i, 1);</span>
<a href="#l89.19"></a><span id="l89.19">             FeedUtils.log.debug(&quot;selectFolder: deleted in cache, &quot; +</span>
<a href="#l89.20"></a><span id="l89.20">                                 &quot;parent:children - &quot; +</span>
<a href="#l89.21"></a><span id="l89.21">                                 aItem.name + &quot;:&quot; + aItem.children.length);</span>
<a href="#l89.22"></a><span id="l89.22" class="difflineat">@@ -1658,17 +1658,17 @@ var FeedSubscriptions = {</span>
<a href="#l89.23"></a><span id="l89.23">       let params = {quickMode: currentItem.quickMode,</span>
<a href="#l89.24"></a><span id="l89.24">                     name:      currentItem.name,</span>
<a href="#l89.25"></a><span id="l89.25">                     options:   currentItem.options};</span>
<a href="#l89.26"></a><span id="l89.26">       // Subscribe to the new folder first.  If it already exists in the</span>
<a href="#l89.27"></a><span id="l89.27">       // account or on error, return.</span>
<a href="#l89.28"></a><span id="l89.28">       if (!this.addFeed(currentItem.url, newFolder, false, params, mode))</span>
<a href="#l89.29"></a><span id="l89.29">         return;</span>
<a href="#l89.30"></a><span id="l89.30">       // Unsubscribe the feed from the old folder, if add to the new folder</span>
<a href="#l89.31"></a><span id="l89.31" class="difflineminus">-      // is successfull, and doing a move.</span>
<a href="#l89.32"></a><span id="l89.32" class="difflineplus">+      // is successful, and doing a move.</span>
<a href="#l89.33"></a><span id="l89.33">       if (moveFeed)</span>
<a href="#l89.34"></a><span id="l89.34">       {</span>
<a href="#l89.35"></a><span id="l89.35">         let feed = new Feed(currentItem.url, currentItem.parentFolder);</span>
<a href="#l89.36"></a><span id="l89.36">         FeedUtils.deleteFeed(feed);</span>
<a href="#l89.37"></a><span id="l89.37">       }</span>
<a href="#l89.38"></a><span id="l89.38">     }</span>
<a href="#l89.39"></a><span id="l89.39"> </span>
<a href="#l89.40"></a><span id="l89.40">     // Update local favicons.</span>
<a href="#l89.41"></a><span id="l89.41" class="difflineat">@@ -2577,17 +2577,17 @@ var FeedSubscriptions = {</span>
<a href="#l89.42"></a><span id="l89.42">     let firstFeedInFolderQuickMode = null;</span>
<a href="#l89.43"></a><span id="l89.43">     let lastFolder;</span>
<a href="#l89.44"></a><span id="l89.44">     let feedsAdded = 0;</span>
<a href="#l89.45"></a><span id="l89.45">     let rssOutlines = 0;</span>
<a href="#l89.46"></a><span id="l89.46">     let folderOutlines = 0;</span>
<a href="#l89.47"></a><span id="l89.47"> </span>
<a href="#l89.48"></a><span id="l89.48">     function processor(aParentNode, aParentFolder)</span>
<a href="#l89.49"></a><span id="l89.49">     {</span>
<a href="#l89.50"></a><span id="l89.50" class="difflineminus">-      FeedUtils.log.trace(&quot;importOPMLOutlines: PROCESSOR tag:name:childs - &quot; +</span>
<a href="#l89.51"></a><span id="l89.51" class="difflineplus">+      FeedUtils.log.trace(&quot;importOPMLOutlines: PROCESSOR tag:name:children - &quot; +</span>
<a href="#l89.52"></a><span id="l89.52">                           aParentNode.tagName + &quot;:&quot; +</span>
<a href="#l89.53"></a><span id="l89.53">                           aParentNode.getAttribute(&quot;text&quot;) + &quot;:&quot; +</span>
<a href="#l89.54"></a><span id="l89.54">                           aParentNode.childElementCount);</span>
<a href="#l89.55"></a><span id="l89.55">       while (true)</span>
<a href="#l89.56"></a><span id="l89.56">       {</span>
<a href="#l89.57"></a><span id="l89.57">         if (aParentNode.tagName == &quot;body&quot; &amp;&amp; !aParentNode.childElementCount)</span>
<a href="#l89.58"></a><span id="l89.58">         {</span>
<a href="#l89.59"></a><span id="l89.59">           // Finished.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l90.1"></a><span id="l90.1" class="difflineminus">--- a/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js</span>
<a href="#l90.2"></a><span id="l90.2" class="difflineplus">+++ b/mailnews/extensions/smime/content/msgCompSMIMEOverlay.js</span>
<a href="#l90.3"></a><span id="l90.3" class="difflineat">@@ -30,17 +30,17 @@ function onComposerLoad()</span>
<a href="#l90.4"></a><span id="l90.4"> </span>
<a href="#l90.5"></a><span id="l90.5">   gSMFields = Cc[&quot;@mozilla.org/messenger-smime/composefields;1&quot;]</span>
<a href="#l90.6"></a><span id="l90.6">                 .createInstance(Ci.nsIMsgSMIMECompFields);</span>
<a href="#l90.7"></a><span id="l90.7">   if (!gSMFields)</span>
<a href="#l90.8"></a><span id="l90.8">     return;</span>
<a href="#l90.9"></a><span id="l90.9"> </span>
<a href="#l90.10"></a><span id="l90.10">   gMsgCompose.compFields.securityInfo = gSMFields;</span>
<a href="#l90.11"></a><span id="l90.11"> </span>
<a href="#l90.12"></a><span id="l90.12" class="difflineminus">-  // Set up the intial security state.</span>
<a href="#l90.13"></a><span id="l90.13" class="difflineplus">+  // Set up the initial security state.</span>
<a href="#l90.14"></a><span id="l90.14">   gSMFields.requireEncryptMessage =</span>
<a href="#l90.15"></a><span id="l90.15">     gCurrentIdentity.getIntAttribute(&quot;encryptionpolicy&quot;) == kEncryptionPolicy_Always;</span>
<a href="#l90.16"></a><span id="l90.16">   if (!gSMFields.requireEncryptMessage &amp;&amp;</span>
<a href="#l90.17"></a><span id="l90.17">       gEncryptedURIService &amp;&amp;</span>
<a href="#l90.18"></a><span id="l90.18">       gEncryptedURIService.isEncrypted(gMsgCompose.originalMsgURI))</span>
<a href="#l90.19"></a><span id="l90.19">   {</span>
<a href="#l90.20"></a><span id="l90.20">     // Override encryption setting if original is known as encrypted.</span>
<a href="#l90.21"></a><span id="l90.21">     gSMFields.requireEncryptMessage = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l91.1"></a><span id="l91.1" class="difflineminus">--- a/mailnews/imap/public/nsIImapMessageSink.idl</span>
<a href="#l91.2"></a><span id="l91.2" class="difflineplus">+++ b/mailnews/imap/public/nsIImapMessageSink.idl</span>
<a href="#l91.3"></a><span id="l91.3" class="difflineat">@@ -7,17 +7,17 @@</span>
<a href="#l91.4"></a><span id="l91.4"> #include &quot;MailNewsTypes2.idl&quot;</span>
<a href="#l91.5"></a><span id="l91.5"> #include &quot;nsIImapUrl.idl&quot;</span>
<a href="#l91.6"></a><span id="l91.6"> </span>
<a href="#l91.7"></a><span id="l91.7"> interface nsIMsgMailNewsUrl;</span>
<a href="#l91.8"></a><span id="l91.8"> </span>
<a href="#l91.9"></a><span id="l91.9"> [scriptable, uuid(6ffb6a92-e43a-405f-92ea-92cf81a5e17b)]</span>
<a href="#l91.10"></a><span id="l91.10"> </span>
<a href="#l91.11"></a><span id="l91.11"> interface nsIImapMessageSink : nsISupports {</span>
<a href="#l91.12"></a><span id="l91.12" class="difflineminus">-  // set up messge download output stream</span>
<a href="#l91.13"></a><span id="l91.13" class="difflineplus">+  // set up message download output stream</span>
<a href="#l91.14"></a><span id="l91.14">   void setupMsgWriteStream(in nsIFile aFile, in boolean aAppendDummyEnvelope);</span>
<a href="#l91.15"></a><span id="l91.15"> </span>
<a href="#l91.16"></a><span id="l91.16">   /**</span>
<a href="#l91.17"></a><span id="l91.17">    * Used by the imap protocol code to notify the core backend code about</span>
<a href="#l91.18"></a><span id="l91.18">    * downloaded imap messages.</span>
<a href="#l91.19"></a><span id="l91.19">    *</span>
<a href="#l91.20"></a><span id="l91.20">    * @param aAdoptedMsgLine  a string with a lot of message lines,</span>
<a href="#l91.21"></a><span id="l91.21">    *                         separated by native line terminators.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l92.1"></a><span id="l92.1" class="difflineminus">--- a/mailnews/imap/src/nsAutoSyncManager.cpp</span>
<a href="#l92.2"></a><span id="l92.2" class="difflineplus">+++ b/mailnews/imap/src/nsAutoSyncManager.cpp</span>
<a href="#l92.3"></a><span id="l92.3" class="difflineat">@@ -1010,17 +1010,17 @@ nsresult nsAutoSyncManager::DownloadMess</span>
<a href="#l92.4"></a><span id="l92.4">  *    with.</span>
<a href="#l92.5"></a><span id="l92.5">  */</span>
<a href="#l92.6"></a><span id="l92.6"> nsresult nsAutoSyncManager::HandleDownloadErrorFor(nsIAutoSyncState *aAutoSyncStateObj,</span>
<a href="#l92.7"></a><span id="l92.7">                                                    const nsresult error)</span>
<a href="#l92.8"></a><span id="l92.8"> {</span>
<a href="#l92.9"></a><span id="l92.9">   if (!aAutoSyncStateObj)</span>
<a href="#l92.10"></a><span id="l92.10">     return NS_ERROR_INVALID_ARG;</span>
<a href="#l92.11"></a><span id="l92.11"> </span>
<a href="#l92.12"></a><span id="l92.12" class="difflineminus">-  // ensure that an error occured</span>
<a href="#l92.13"></a><span id="l92.13" class="difflineplus">+  // ensure that an error occurred</span>
<a href="#l92.14"></a><span id="l92.14">   if (NS_SUCCEEDED(error))</span>
<a href="#l92.15"></a><span id="l92.15">     return NS_OK;</span>
<a href="#l92.16"></a><span id="l92.16"> </span>
<a href="#l92.17"></a><span id="l92.17">   // NS_ERROR_NOT_AVAILABLE is a special case/error happens when the queued folder</span>
<a href="#l92.18"></a><span id="l92.18">   // doesn't have any message to download (see bug 457342). In such case we shouldn't</span>
<a href="#l92.19"></a><span id="l92.19">   // retry the current message group, nor notify listeners. Simply continuing with the</span>
<a href="#l92.20"></a><span id="l92.20">   // next sibling in the priority queue would suffice.</span>
<a href="#l92.21"></a><span id="l92.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l93.1"></a><span id="l93.1" class="difflineminus">--- a/mailnews/imap/src/nsImapIncomingServer.cpp</span>
<a href="#l93.2"></a><span id="l93.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapIncomingServer.cpp</span>
<a href="#l93.3"></a><span id="l93.3" class="difflineat">@@ -1444,17 +1444,17 @@ NS_IMETHODIMP nsImapIncomingServer::Disc</span>
<a href="#l93.4"></a><span id="l93.4">     return NS_OK;</span>
<a href="#l93.5"></a><span id="l93.5"> </span>
<a href="#l93.6"></a><span id="l93.6">   nsCOMPtr&lt;nsIMsgFolder&gt; rootMsgFolder;</span>
<a href="#l93.7"></a><span id="l93.7">   nsresult rv = GetRootFolder(getter_AddRefs(rootMsgFolder));</span>
<a href="#l93.8"></a><span id="l93.8">   if (NS_SUCCEEDED(rv) &amp;&amp; rootMsgFolder)</span>
<a href="#l93.9"></a><span id="l93.9">   {</span>
<a href="#l93.10"></a><span id="l93.10">     // GetResource() may return a node which is not in the folder</span>
<a href="#l93.11"></a><span id="l93.11">     // tree hierarchy but in the rdf cache in case of the non-existing default</span>
<a href="#l93.12"></a><span id="l93.12" class="difflineminus">-    // Sent, Drafts, and Templates folders. The resouce will be eventually</span>
<a href="#l93.13"></a><span id="l93.13" class="difflineplus">+    // Sent, Drafts, and Templates folders. The resource will be eventually</span>
<a href="#l93.14"></a><span id="l93.14">     // released when the rdf service shuts down. When we create the default</span>
<a href="#l93.15"></a><span id="l93.15">     // folders later on in the imap server, the subsequent GetResource() of the</span>
<a href="#l93.16"></a><span id="l93.16">     // same uri will get us the cached rdf resource which should have the folder</span>
<a href="#l93.17"></a><span id="l93.17">     // flag set appropriately.</span>
<a href="#l93.18"></a><span id="l93.18">     nsCOMPtr&lt;nsIRDFService&gt; rdf(do_GetService(&quot;@mozilla.org/rdf/rdf-service;1&quot;,</span>
<a href="#l93.19"></a><span id="l93.19">                                               &amp;rv));</span>
<a href="#l93.20"></a><span id="l93.20">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l93.21"></a><span id="l93.21"> </span>
<a href="#l93.22"></a><span id="l93.22" class="difflineat">@@ -2167,17 +2167,17 @@ nsImapIncomingServer::AsyncGetPassword(n</span>
<a href="#l93.23"></a><span id="l93.23">     // prompt), so we need to use the async prompter.</span>
<a href="#l93.24"></a><span id="l93.24">     nsresult rv;</span>
<a href="#l93.25"></a><span id="l93.25">     nsCOMPtr&lt;nsIMsgAsyncPrompter&gt; asyncPrompter =</span>
<a href="#l93.26"></a><span id="l93.26">       do_GetService(NS_MSGASYNCPROMPTER_CONTRACTID, &amp;rv);</span>
<a href="#l93.27"></a><span id="l93.27">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l93.28"></a><span id="l93.28">     nsCOMPtr&lt;nsIMsgAsyncPromptListener&gt; promptListener(do_QueryInterface(aProtocol));</span>
<a href="#l93.29"></a><span id="l93.29">     rv = asyncPrompter-&gt;QueueAsyncAuthPrompt(m_serverKey, aNewPasswordRequested,</span>
<a href="#l93.30"></a><span id="l93.30">                                              promptListener);</span>
<a href="#l93.31"></a><span id="l93.31" class="difflineminus">-    // Explict NS_ENSURE_SUCCESS for debug purposes as errors tend to get</span>
<a href="#l93.32"></a><span id="l93.32" class="difflineplus">+    // Explicit NS_ENSURE_SUCCESS for debug purposes as errors tend to get</span>
<a href="#l93.33"></a><span id="l93.33">     // hidden.</span>
<a href="#l93.34"></a><span id="l93.34">     NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l93.35"></a><span id="l93.35">   }</span>
<a href="#l93.36"></a><span id="l93.36">   if (!m_password.IsEmpty())</span>
<a href="#l93.37"></a><span id="l93.37">     aPassword = m_password;</span>
<a href="#l93.38"></a><span id="l93.38">   return NS_OK;</span>
<a href="#l93.39"></a><span id="l93.39"> }</span>
<a href="#l93.40"></a><span id="l93.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l94.1"></a><span id="l94.1" class="difflineminus">--- a/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l94.2"></a><span id="l94.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l94.3"></a><span id="l94.3" class="difflineat">@@ -4246,17 +4246,17 @@ void nsImapMailFolder::FindKeysToDelete(</span>
<a href="#l94.4"></a><span id="l94.4">           pHeader-&gt;GetMessageKey(&amp;msgKey);</span>
<a href="#l94.5"></a><span id="l94.5">           keysToDelete.AppendElement(msgKey);</span>
<a href="#l94.6"></a><span id="l94.6">         }</span>
<a href="#l94.7"></a><span id="l94.7">       }</span>
<a href="#l94.8"></a><span id="l94.8">     }</span>
<a href="#l94.9"></a><span id="l94.9">     return;</span>
<a href="#l94.10"></a><span id="l94.10">   }</span>
<a href="#l94.11"></a><span id="l94.11">   // otherwise, we have a complete set of uid's and flags, so we delete</span>
<a href="#l94.12"></a><span id="l94.12" class="difflineminus">-  // anything thats in existingKeys but not in the flag state, as well</span>
<a href="#l94.13"></a><span id="l94.13" class="difflineplus">+  // anything that's in existingKeys but not in the flag state, as well</span>
<a href="#l94.14"></a><span id="l94.14">   // as messages with the deleted flag set.</span>
<a href="#l94.15"></a><span id="l94.15">   uint32_t total = existingKeys.Length();</span>
<a href="#l94.16"></a><span id="l94.16">   int onlineIndex = 0; // current index into flagState</span>
<a href="#l94.17"></a><span id="l94.17">   for (uint32_t keyIndex = 0; keyIndex &lt; total; keyIndex++)</span>
<a href="#l94.18"></a><span id="l94.18">   {</span>
<a href="#l94.19"></a><span id="l94.19"> </span>
<a href="#l94.20"></a><span id="l94.20">     while ((onlineIndex &lt; numMessageInFlagState) &amp;&amp;</span>
<a href="#l94.21"></a><span id="l94.21">            NS_SUCCEEDED(flagState-&gt;GetUidOfMessage(onlineIndex, &amp;uidOfMessage)) &amp;&amp;</span>
<a href="#l94.22"></a><span id="l94.22" class="difflineat">@@ -9241,17 +9241,17 @@ nsImapMailFolder::OnMessageClassified(co</span>
<a href="#l94.23"></a><span id="l94.23">   return NS_OK;</span>
<a href="#l94.24"></a><span id="l94.24"> }</span>
<a href="#l94.25"></a><span id="l94.25"> </span>
<a href="#l94.26"></a><span id="l94.26"> NS_IMETHODIMP</span>
<a href="#l94.27"></a><span id="l94.27"> nsImapMailFolder::GetShouldDownloadAllHeaders(bool *aResult)</span>
<a href="#l94.28"></a><span id="l94.28"> {</span>
<a href="#l94.29"></a><span id="l94.29">   NS_ENSURE_ARG_POINTER(aResult);</span>
<a href="#l94.30"></a><span id="l94.30">   *aResult = false;</span>
<a href="#l94.31"></a><span id="l94.31" class="difflineminus">-  //for just the inbox, we check if the filter list has arbitary headers.</span>
<a href="#l94.32"></a><span id="l94.32" class="difflineplus">+  //for just the inbox, we check if the filter list has arbitrary headers.</span>
<a href="#l94.33"></a><span id="l94.33">   //for all folders, check if we have a spam plugin that requires all headers</span>
<a href="#l94.34"></a><span id="l94.34">   if (mFlags &amp; nsMsgFolderFlags::Inbox)</span>
<a href="#l94.35"></a><span id="l94.35">   {</span>
<a href="#l94.36"></a><span id="l94.36">     nsCOMPtr &lt;nsIMsgFilterList&gt; filterList;</span>
<a href="#l94.37"></a><span id="l94.37">     nsresult rv = GetFilterList(nullptr, getter_AddRefs(filterList));</span>
<a href="#l94.38"></a><span id="l94.38">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l94.39"></a><span id="l94.39"> </span>
<a href="#l94.40"></a><span id="l94.40">     rv = filterList-&gt;GetShouldDownloadAllHeaders(aResult);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l95.1"></a><span id="l95.1" class="difflineminus">--- a/mailnews/imap/src/nsImapOfflineSync.cpp</span>
<a href="#l95.2"></a><span id="l95.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapOfflineSync.cpp</span>
<a href="#l95.3"></a><span id="l95.3" class="difflineat">@@ -238,17 +238,17 @@ void nsImapOfflineSync::ProcessFlagOpera</span>
<a href="#l95.4"></a><span id="l95.4">   uint32_t currentKeyIndex = m_KeyIndex;</span>
<a href="#l95.5"></a><span id="l95.5"> </span>
<a href="#l95.6"></a><span id="l95.6">   imapMessageFlagsType matchingFlags;</span>
<a href="#l95.7"></a><span id="l95.7">   currentOp-&gt;GetNewFlags(&amp;matchingFlags);</span>
<a href="#l95.8"></a><span id="l95.8">   imapMessageFlagsType flagOperation;</span>
<a href="#l95.9"></a><span id="l95.9">   imapMessageFlagsType newFlags;</span>
<a href="#l95.10"></a><span id="l95.10">   bool flagsMatch = true;</span>
<a href="#l95.11"></a><span id="l95.11">   do</span>
<a href="#l95.12"></a><span id="l95.12" class="difflineminus">-  { // loop for all messsages with the same flags</span>
<a href="#l95.13"></a><span id="l95.13" class="difflineplus">+  { // loop for all messages with the same flags</span>
<a href="#l95.14"></a><span id="l95.14">     if (flagsMatch)</span>
<a href="#l95.15"></a><span id="l95.15">     {</span>
<a href="#l95.16"></a><span id="l95.16">       nsMsgKey curKey;</span>
<a href="#l95.17"></a><span id="l95.17">       currentOp-&gt;GetMessageKey(&amp;curKey);</span>
<a href="#l95.18"></a><span id="l95.18">       matchingFlagKeys.AppendElement(curKey);</span>
<a href="#l95.19"></a><span id="l95.19">       currentOp-&gt;SetPlayingBack(true);</span>
<a href="#l95.20"></a><span id="l95.20">       m_currentOpsToClear.AppendObject(currentOp);</span>
<a href="#l95.21"></a><span id="l95.21">     }</span>
<a href="#l95.22"></a><span id="l95.22" class="difflineat">@@ -301,17 +301,17 @@ void nsImapOfflineSync::ProcessKeywordOp</span>
<a href="#l95.23"></a><span id="l95.23"> </span>
<a href="#l95.24"></a><span id="l95.24">   nsAutoCString keywords;</span>
<a href="#l95.25"></a><span id="l95.25">   if (mCurrentPlaybackOpType == nsIMsgOfflineImapOperation::kAddKeywords)</span>
<a href="#l95.26"></a><span id="l95.26">     currentOp-&gt;GetKeywordsToAdd(getter_Copies(keywords));</span>
<a href="#l95.27"></a><span id="l95.27">   else</span>
<a href="#l95.28"></a><span id="l95.28">     currentOp-&gt;GetKeywordsToRemove(getter_Copies(keywords));</span>
<a href="#l95.29"></a><span id="l95.29">   bool keywordsMatch = true;</span>
<a href="#l95.30"></a><span id="l95.30">   do</span>
<a href="#l95.31"></a><span id="l95.31" class="difflineminus">-  { // loop for all messsages with the same keywords</span>
<a href="#l95.32"></a><span id="l95.32" class="difflineplus">+  { // loop for all messages with the same keywords</span>
<a href="#l95.33"></a><span id="l95.33">     if (keywordsMatch)</span>
<a href="#l95.34"></a><span id="l95.34">     {</span>
<a href="#l95.35"></a><span id="l95.35">       nsMsgKey curKey;</span>
<a href="#l95.36"></a><span id="l95.36">       currentOp-&gt;GetMessageKey(&amp;curKey);</span>
<a href="#l95.37"></a><span id="l95.37">       matchingKeywordKeys.AppendElement(curKey);</span>
<a href="#l95.38"></a><span id="l95.38">       currentOp-&gt;SetPlayingBack(true);</span>
<a href="#l95.39"></a><span id="l95.39">       m_currentOpsToClear.AppendObject(currentOp);</span>
<a href="#l95.40"></a><span id="l95.40">     }</span>
<a href="#l95.41"></a><span id="l95.41" class="difflineat">@@ -521,17 +521,17 @@ void nsImapOfflineSync::ProcessMoveOpera</span>
<a href="#l95.42"></a><span id="l95.42"> {</span>
<a href="#l95.43"></a><span id="l95.43">   nsTArray&lt;nsMsgKey&gt; matchingFlagKeys;</span>
<a href="#l95.44"></a><span id="l95.44">   uint32_t currentKeyIndex = m_KeyIndex;</span>
<a href="#l95.45"></a><span id="l95.45">   nsCString moveDestination;</span>
<a href="#l95.46"></a><span id="l95.46">   op-&gt;GetDestinationFolderURI(getter_Copies(moveDestination));</span>
<a href="#l95.47"></a><span id="l95.47">   bool moveMatches = true;</span>
<a href="#l95.48"></a><span id="l95.48">   nsCOMPtr &lt;nsIMsgOfflineImapOperation&gt; currentOp = op;</span>
<a href="#l95.49"></a><span id="l95.49">   do</span>
<a href="#l95.50"></a><span id="l95.50" class="difflineminus">-  {	// loop for all messsages with the same destination</span>
<a href="#l95.51"></a><span id="l95.51" class="difflineplus">+  {	// loop for all messages with the same destination</span>
<a href="#l95.52"></a><span id="l95.52">     if (moveMatches)</span>
<a href="#l95.53"></a><span id="l95.53">     {</span>
<a href="#l95.54"></a><span id="l95.54">       nsMsgKey curKey;</span>
<a href="#l95.55"></a><span id="l95.55">       currentOp-&gt;GetMessageKey(&amp;curKey);</span>
<a href="#l95.56"></a><span id="l95.56">       matchingFlagKeys.AppendElement(curKey);</span>
<a href="#l95.57"></a><span id="l95.57">       currentOp-&gt;SetPlayingBack(true);</span>
<a href="#l95.58"></a><span id="l95.58">       m_currentOpsToClear.AppendObject(currentOp);</span>
<a href="#l95.59"></a><span id="l95.59">     }</span>
<a href="#l95.60"></a><span id="l95.60" class="difflineat">@@ -634,17 +634,17 @@ void nsImapOfflineSync::ProcessCopyOpera</span>
<a href="#l95.61"></a><span id="l95.61"> </span>
<a href="#l95.62"></a><span id="l95.62">   nsTArray&lt;nsMsgKey&gt; matchingFlagKeys;</span>
<a href="#l95.63"></a><span id="l95.63">   uint32_t currentKeyIndex = m_KeyIndex;</span>
<a href="#l95.64"></a><span id="l95.64">   nsCString copyDestination;</span>
<a href="#l95.65"></a><span id="l95.65">   currentOp-&gt;GetCopyDestination(0, getter_Copies(copyDestination));</span>
<a href="#l95.66"></a><span id="l95.66">   bool copyMatches = true;</span>
<a href="#l95.67"></a><span id="l95.67">   nsresult rv;</span>
<a href="#l95.68"></a><span id="l95.68"> </span>
<a href="#l95.69"></a><span id="l95.69" class="difflineminus">-  do { // loop for all messsages with the same destination</span>
<a href="#l95.70"></a><span id="l95.70" class="difflineplus">+  do { // loop for all messages with the same destination</span>
<a href="#l95.71"></a><span id="l95.71">     if (copyMatches)</span>
<a href="#l95.72"></a><span id="l95.72">     {</span>
<a href="#l95.73"></a><span id="l95.73">       nsMsgKey curKey;</span>
<a href="#l95.74"></a><span id="l95.74">       currentOp-&gt;GetMessageKey(&amp;curKey);</span>
<a href="#l95.75"></a><span id="l95.75">       matchingFlagKeys.AppendElement(curKey);</span>
<a href="#l95.76"></a><span id="l95.76">       currentOp-&gt;SetPlayingBack(true);</span>
<a href="#l95.77"></a><span id="l95.77">       m_currentOpsToClear.AppendObject(currentOp);</span>
<a href="#l95.78"></a><span id="l95.78">     }</span>
<a href="#l95.79"></a><span id="l95.79" class="difflineat">@@ -843,17 +843,17 @@ nsresult nsImapOfflineSync::ProcessNextO</span>
<a href="#l95.80"></a><span id="l95.80">               currentOp-&gt;GetMessageKey(&amp;curKey);</span>
<a href="#l95.81"></a><span id="l95.81">               m_currentDB-&gt;RemoveOfflineOp(currentOp);</span>
<a href="#l95.82"></a><span id="l95.82">               deletedGhostMsgs = true;</span>
<a href="#l95.83"></a><span id="l95.83"> </span>
<a href="#l95.84"></a><span id="l95.84">               // Remember the pseudo headers before we delete them,</span>
<a href="#l95.85"></a><span id="l95.85">               // and when we download new headers, tell listeners about the</span>
<a href="#l95.86"></a><span id="l95.86">               // message key change between the pseudo headers and the real</span>
<a href="#l95.87"></a><span id="l95.87">               // downloaded headers. Note that we're not currently sending</span>
<a href="#l95.88"></a><span id="l95.88" class="difflineminus">-              // a msgsDeleted notifcation for these headers, but the</span>
<a href="#l95.89"></a><span id="l95.89" class="difflineplus">+              // a msgsDeleted notification for these headers, but the</span>
<a href="#l95.90"></a><span id="l95.90">               // db listeners are notified about the deletion.</span>
<a href="#l95.91"></a><span id="l95.91">               // for imap folders, we should adjust the pending counts, because we</span>
<a href="#l95.92"></a><span id="l95.92">               // have a header that we know about, but don't have in the db.</span>
<a href="#l95.93"></a><span id="l95.93">               nsCOMPtr &lt;nsIMsgImapMailFolder&gt; imapFolder = do_QueryInterface(m_currentFolder);</span>
<a href="#l95.94"></a><span id="l95.94">               if (imapFolder)</span>
<a href="#l95.95"></a><span id="l95.95">               {</span>
<a href="#l95.96"></a><span id="l95.96">                 bool hdrIsRead;</span>
<a href="#l95.97"></a><span id="l95.97">                 m_currentDB-&gt;IsRead(curKey, &amp;hdrIsRead);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l96.1"></a><span id="l96.1" class="difflineminus">--- a/mailnews/imap/src/nsImapProtocol.cpp</span>
<a href="#l96.2"></a><span id="l96.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapProtocol.cpp</span>
<a href="#l96.3"></a><span id="l96.3" class="difflineat">@@ -320,21 +320,21 @@ static bool gUseLiteralPlus = true;</span>
<a href="#l96.4"></a><span id="l96.4"> static bool gExpungeAfterDelete = false;</span>
<a href="#l96.5"></a><span id="l96.5"> static bool gCheckDeletedBeforeExpunge = false; //bug 235004</span>
<a href="#l96.6"></a><span id="l96.6"> static int32_t gResponseTimeout = 60;</span>
<a href="#l96.7"></a><span id="l96.7"> static nsCString gForceSelectDetect;</span>
<a href="#l96.8"></a><span id="l96.8"> static nsTArray&lt;nsCString&gt; gForceSelectServersArray;</span>
<a href="#l96.9"></a><span id="l96.9"> </span>
<a href="#l96.10"></a><span id="l96.10"> // let delete model control expunging, i.e., don't ever expunge when the</span>
<a href="#l96.11"></a><span id="l96.11"> // user chooses the imap delete model, otherwise, expunge when over the</span>
<a href="#l96.12"></a><span id="l96.12" class="difflineminus">-// threshhold. This is the normal TB behavior.</span>
<a href="#l96.13"></a><span id="l96.13" class="difflineplus">+// threshold. This is the normal TB behavior.</span>
<a href="#l96.14"></a><span id="l96.14"> static const int32_t kAutoExpungeDeleteModel = 0;</span>
<a href="#l96.15"></a><span id="l96.15"> // Expunge whenever the folder is opened</span>
<a href="#l96.16"></a><span id="l96.16"> static const int32_t kAutoExpungeAlways = 1;</span>
<a href="#l96.17"></a><span id="l96.17" class="difflineminus">-// Expunge when over the threshhold, independent of the delete model.</span>
<a href="#l96.18"></a><span id="l96.18" class="difflineplus">+// Expunge when over the threshold, independent of the delete model.</span>
<a href="#l96.19"></a><span id="l96.19"> static const int32_t kAutoExpungeOnThreshold = 2;</span>
<a href="#l96.20"></a><span id="l96.20"> static int32_t gExpungeOption = kAutoExpungeDeleteModel;</span>
<a href="#l96.21"></a><span id="l96.21"> static int32_t gExpungeThreshold = 20;</span>
<a href="#l96.22"></a><span id="l96.22"> </span>
<a href="#l96.23"></a><span id="l96.23"> const int32_t kAppBufSize = 100;</span>
<a href="#l96.24"></a><span id="l96.24"> // can't use static nsCString because it shows up as a leak.</span>
<a href="#l96.25"></a><span id="l96.25"> static char gAppName[kAppBufSize];</span>
<a href="#l96.26"></a><span id="l96.26"> static char gAppVersion[kAppBufSize];</span>
<a href="#l96.27"></a><span id="l96.27" class="difflineat">@@ -3130,17 +3130,17 @@ nsresult nsImapProtocol::BeginMessageDow</span>
<a href="#l96.28"></a><span id="l96.28">         NormalMessageEndDownload();</span>
<a href="#l96.29"></a><span id="l96.29">       if (!m_curHdrInfo)</span>
<a href="#l96.30"></a><span id="l96.30">         m_curHdrInfo = m_hdrDownloadCache-&gt;StartNewHdr();</span>
<a href="#l96.31"></a><span id="l96.31">       if (m_curHdrInfo)</span>
<a href="#l96.32"></a><span id="l96.32">         m_curHdrInfo-&gt;SetMsgSize(total_message_size);</span>
<a href="#l96.33"></a><span id="l96.33">       return NS_OK;</span>
<a href="#l96.34"></a><span id="l96.34">     }</span>
<a href="#l96.35"></a><span id="l96.35">     // if we have a mock channel, that means we have a channel listener who wants the</span>
<a href="#l96.36"></a><span id="l96.36" class="difflineminus">-    // message. So set up a pipe. We'll write the messsage into one end of the pipe</span>
<a href="#l96.37"></a><span id="l96.37" class="difflineplus">+    // message. So set up a pipe. We'll write the message into one end of the pipe</span>
<a href="#l96.38"></a><span id="l96.38">     // and they will read it out of the other end.</span>
<a href="#l96.39"></a><span id="l96.39">     if (m_channelListener)</span>
<a href="#l96.40"></a><span id="l96.40">     {</span>
<a href="#l96.41"></a><span id="l96.41">       // create a pipe to pump the message into...the output will go to whoever</span>
<a href="#l96.42"></a><span id="l96.42">       // is consuming the message display</span>
<a href="#l96.43"></a><span id="l96.43">       // we create an &quot;infinite&quot; pipe in case we get extremely long lines from the imap server,</span>
<a href="#l96.44"></a><span id="l96.44">       // and the consumer is waiting for a whole line</span>
<a href="#l96.45"></a><span id="l96.45">       nsCOMPtr&lt;nsIPipe&gt; pipe = do_CreateInstance(&quot;@mozilla.org/pipe;1&quot;);</span>
<a href="#l96.46"></a><span id="l96.46" class="difflineat">@@ -4177,18 +4177,18 @@ void nsImapProtocol::ProcessMailboxUpdat</span>
<a href="#l96.47"></a><span id="l96.47">             m_flagState-&gt;SetPartialUIDFetch(false);</span>
<a href="#l96.48"></a><span id="l96.48">             FetchMessage(NS_LITERAL_CSTRING(&quot;1:*&quot;), kFlags);</span>
<a href="#l96.49"></a><span id="l96.49">           }</span>
<a href="#l96.50"></a><span id="l96.50">         }</span>
<a href="#l96.51"></a><span id="l96.51">         int32_t numDeleted = m_flagState-&gt;NumberOfDeletedMessages();</span>
<a href="#l96.52"></a><span id="l96.52">         // Don't do expunge when we are lite selecting folder because we</span>
<a href="#l96.53"></a><span id="l96.53">         // could be doing undo.</span>
<a href="#l96.54"></a><span id="l96.54">         // Expunge if we're always expunging, or the number of deleted messages</span>
<a href="#l96.55"></a><span id="l96.55" class="difflineminus">-        // is over the threshhold, and we're either always respecting the</span>
<a href="#l96.56"></a><span id="l96.56" class="difflineminus">-        // threshhold, or we're expunging based on the delete model, and</span>
<a href="#l96.57"></a><span id="l96.57" class="difflineplus">+        // is over the threshold, and we're either always respecting the</span>
<a href="#l96.58"></a><span id="l96.58" class="difflineplus">+        // threshold, or we're expunging based on the delete model, and</span>
<a href="#l96.59"></a><span id="l96.59">         // the delete model is not the imap delete model.</span>
<a href="#l96.60"></a><span id="l96.60">         if (m_imapAction != nsIImapUrl::nsImapLiteSelectFolder &amp;&amp;</span>
<a href="#l96.61"></a><span id="l96.61">             (gExpungeOption == kAutoExpungeAlways ||</span>
<a href="#l96.62"></a><span id="l96.62">              (numDeleted &gt;= gExpungeThreshold &amp;&amp;</span>
<a href="#l96.63"></a><span id="l96.63">               (gExpungeOption == kAutoExpungeOnThreshold ||</span>
<a href="#l96.64"></a><span id="l96.64">                (gExpungeOption == kAutoExpungeDeleteModel &amp;&amp; !GetShowDeletedMessages())))))</span>
<a href="#l96.65"></a><span id="l96.65">           Expunge();</span>
<a href="#l96.66"></a><span id="l96.66">       }</span>
<a href="#l96.67"></a><span id="l96.67" class="difflineat">@@ -4481,17 +4481,17 @@ bool nsImapProtocol::CheckNewMail()</span>
<a href="#l96.68"></a><span id="l96.68"> // log info including current state...</span>
<a href="#l96.69"></a><span id="l96.69"> void nsImapProtocol::Log(const char *logSubName, const char *extraInfo, const char *logData)</span>
<a href="#l96.70"></a><span id="l96.70"> {</span>
<a href="#l96.71"></a><span id="l96.71">   if (MOZ_LOG_TEST(IMAP, LogLevel::Info))</span>
<a href="#l96.72"></a><span id="l96.72">   {</span>
<a href="#l96.73"></a><span id="l96.73">     static const char nonAuthStateName[] = &quot;NA&quot;;</span>
<a href="#l96.74"></a><span id="l96.74">     static const char authStateName[] = &quot;A&quot;;</span>
<a href="#l96.75"></a><span id="l96.75">     static const char selectedStateName[] = &quot;S&quot;;</span>
<a href="#l96.76"></a><span id="l96.76" class="difflineminus">-    const nsCString&amp; hostName = GetImapHostName();  // initilize to empty string</span>
<a href="#l96.77"></a><span id="l96.77" class="difflineplus">+    const nsCString&amp; hostName = GetImapHostName();  // initialize to empty string</span>
<a href="#l96.78"></a><span id="l96.78"> </span>
<a href="#l96.79"></a><span id="l96.79">     int32_t logDataLen = PL_strlen(logData); // PL_strlen checks for null</span>
<a href="#l96.80"></a><span id="l96.80">     nsCString logDataLines;</span>
<a href="#l96.81"></a><span id="l96.81">     const char *logDataToLog;</span>
<a href="#l96.82"></a><span id="l96.82">     int32_t lastLineEnd;</span>
<a href="#l96.83"></a><span id="l96.83"> </span>
<a href="#l96.84"></a><span id="l96.84">     const int kLogDataChunkSize = 400; // nspr line length is 512, and we</span>
<a href="#l96.85"></a><span id="l96.85">                                        // allow some space for the log preamble.</span>
<a href="#l96.86"></a><span id="l96.86" class="difflineat">@@ -6139,17 +6139,17 @@ void nsImapProtocol::UploadMessageFromFi</span>
<a href="#l96.87"></a><span id="l96.87">     }</span>
<a href="#l96.88"></a><span id="l96.88"> </span>
<a href="#l96.89"></a><span id="l96.89">     // date should never be 0, but just in case...</span>
<a href="#l96.90"></a><span id="l96.90">     if (date)</span>
<a href="#l96.91"></a><span id="l96.91">     {</span>
<a href="#l96.92"></a><span id="l96.92">       /* Use PR_FormatTimeUSEnglish() to format the date in US English format,</span>
<a href="#l96.93"></a><span id="l96.93">         then figure out what our local GMT offset is, and append it (since</span>
<a href="#l96.94"></a><span id="l96.94">         PR_FormatTimeUSEnglish() can't do that.) Generate four digit years as</span>
<a href="#l96.95"></a><span id="l96.95" class="difflineminus">-        per RFC 1123 (superceding RFC 822.)</span>
<a href="#l96.96"></a><span id="l96.96" class="difflineplus">+        per RFC 1123 (superseding RFC 822.)</span>
<a href="#l96.97"></a><span id="l96.97">         */</span>
<a href="#l96.98"></a><span id="l96.98">       char szDateTime[64];</span>
<a href="#l96.99"></a><span id="l96.99">       char dateStr[100];</span>
<a href="#l96.100"></a><span id="l96.100">       PRExplodedTime exploded;</span>
<a href="#l96.101"></a><span id="l96.101">       PR_ExplodeTime(date, PR_LocalTimeParameters, &amp;exploded);</span>
<a href="#l96.102"></a><span id="l96.102">       PR_FormatTimeUSEnglish(szDateTime, sizeof(szDateTime), &quot;%d-%b-%Y %H:%M:%S&quot;, &amp;exploded);</span>
<a href="#l96.103"></a><span id="l96.103">       PRExplodedTime now;</span>
<a href="#l96.104"></a><span id="l96.104">       PR_ExplodeTime(PR_Now(), PR_LocalTimeParameters, &amp;now);</span>
<a href="#l96.105"></a><span id="l96.105" class="difflineat">@@ -6170,17 +6170,17 @@ void nsImapProtocol::UploadMessageFromFi</span>
<a href="#l96.106"></a><span id="l96.106">     rv = file-&gt;GetFileSize(&amp;fileSize);</span>
<a href="#l96.107"></a><span id="l96.107">     NS_ASSERTION(fileSize, &quot;got empty file in UploadMessageFromFile&quot;);</span>
<a href="#l96.108"></a><span id="l96.108">     if (NS_FAILED(rv) || !fileSize) goto done;</span>
<a href="#l96.109"></a><span id="l96.109">     rv = NS_NewLocalFileInputStream(getter_AddRefs(fileInputStream), file);</span>
<a href="#l96.110"></a><span id="l96.110">     if (NS_FAILED(rv) || !fileInputStream) goto done;</span>
<a href="#l96.111"></a><span id="l96.111">     command.AppendInt((int32_t)fileSize);</span>
<a href="#l96.112"></a><span id="l96.112"> </span>
<a href="#l96.113"></a><span id="l96.113">     // Set useLiteralPlus to true if server has capability LITERAL+ and</span>
<a href="#l96.114"></a><span id="l96.114" class="difflineminus">-    // LITERAL+ useage is enabled in the config editor,</span>
<a href="#l96.115"></a><span id="l96.115" class="difflineplus">+    // LITERAL+ usage is enabled in the config editor,</span>
<a href="#l96.116"></a><span id="l96.116">     // i.e., &quot;mail.imap.use_literal_plus&quot; = true.</span>
<a href="#l96.117"></a><span id="l96.117">     bool useLiteralPlus = (GetServerStateParser().GetCapabilityFlag() &amp;</span>
<a href="#l96.118"></a><span id="l96.118">                           kLiteralPlusCapability) &amp;&amp; gUseLiteralPlus;</span>
<a href="#l96.119"></a><span id="l96.119">     if (useLiteralPlus)</span>
<a href="#l96.120"></a><span id="l96.120">       command.AppendLiteral(&quot;+}&quot; CRLF);</span>
<a href="#l96.121"></a><span id="l96.121">     else</span>
<a href="#l96.122"></a><span id="l96.122">       command.AppendLiteral(&quot;}&quot; CRLF);</span>
<a href="#l96.123"></a><span id="l96.123"> </span>
<a href="#l96.124"></a><span id="l96.124" class="difflineat">@@ -8560,17 +8560,17 @@ bool nsImapProtocol::TryToLogon()</span>
<a href="#l96.125"></a><span id="l96.125">     }</span>
<a href="#l96.126"></a><span id="l96.126">     else</span>
<a href="#l96.127"></a><span id="l96.127">     {</span>
<a href="#l96.128"></a><span id="l96.128">       // try to reset failed methods and try them again</span>
<a href="#l96.129"></a><span id="l96.129">       ResetAuthMethods();</span>
<a href="#l96.130"></a><span id="l96.130">       rv = ChooseAuthMethod();</span>
<a href="#l96.131"></a><span id="l96.131">       if (NS_FAILED(rv)) // all methods failed</span>
<a href="#l96.132"></a><span id="l96.132">       {</span>
<a href="#l96.133"></a><span id="l96.133" class="difflineminus">-        MOZ_LOG(IMAP, LogLevel::Error, (&quot;huch? there are auth methods, and we resetted failed ones, but ChooseAuthMethod still fails.&quot;));</span>
<a href="#l96.134"></a><span id="l96.134" class="difflineplus">+        MOZ_LOG(IMAP, LogLevel::Error, (&quot;huch? there are auth methods, and we reset failed ones, but ChooseAuthMethod still fails.&quot;));</span>
<a href="#l96.135"></a><span id="l96.135">         return false;</span>
<a href="#l96.136"></a><span id="l96.136">       }</span>
<a href="#l96.137"></a><span id="l96.137">     }</span>
<a href="#l96.138"></a><span id="l96.138">   }</span>
<a href="#l96.139"></a><span id="l96.139"> </span>
<a href="#l96.140"></a><span id="l96.140">   // Get username, either the stored one or from user</span>
<a href="#l96.141"></a><span id="l96.141">   rv = m_imapServerSink-&gt;GetLoginUsername(userName);</span>
<a href="#l96.142"></a><span id="l96.142">   if (NS_FAILED(rv) || userName.IsEmpty())</span>
<a href="#l96.143"></a><span id="l96.143" class="difflineat">@@ -8672,17 +8672,17 @@ bool nsImapProtocol::TryToLogon()</span>
<a href="#l96.144"></a><span id="l96.144">           if (buttonPressed == 2) // 'New password' button</span>
<a href="#l96.145"></a><span id="l96.145">           {</span>
<a href="#l96.146"></a><span id="l96.146">             MOZ_LOG(IMAP, LogLevel::Warning, (&quot;new password button pressed.&quot;));</span>
<a href="#l96.147"></a><span id="l96.147">             // Forget the current password</span>
<a href="#l96.148"></a><span id="l96.148">             password.Truncate();</span>
<a href="#l96.149"></a><span id="l96.149">             m_hostSessionList-&gt;SetPasswordForHost(GetImapServerKey(), EmptyString());</span>
<a href="#l96.150"></a><span id="l96.150">             m_imapServerSink-&gt;ForgetPassword();</span>
<a href="#l96.151"></a><span id="l96.151">             m_password.Truncate();</span>
<a href="#l96.152"></a><span id="l96.152" class="difflineminus">-            MOZ_LOG(IMAP, LogLevel::Warning, (&quot;password resetted (nulled)&quot;));</span>
<a href="#l96.153"></a><span id="l96.153" class="difflineplus">+            MOZ_LOG(IMAP, LogLevel::Warning, (&quot;password reset (nulled)&quot;));</span>
<a href="#l96.154"></a><span id="l96.154">             newPasswordRequested = true;</span>
<a href="#l96.155"></a><span id="l96.155">             // Will call GetPassword() in beginning of next loop</span>
<a href="#l96.156"></a><span id="l96.156"> </span>
<a href="#l96.157"></a><span id="l96.157">             // Try all possible auth methods again with the new password.</span>
<a href="#l96.158"></a><span id="l96.158">             ResetAuthMethods();</span>
<a href="#l96.159"></a><span id="l96.159">           }</span>
<a href="#l96.160"></a><span id="l96.160">           else if (buttonPressed == 0) // Retry button</span>
<a href="#l96.161"></a><span id="l96.161">           {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l97.1"></a><span id="l97.1" class="difflineminus">--- a/mailnews/imap/src/nsImapProtocol.h</span>
<a href="#l97.2"></a><span id="l97.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapProtocol.h</span>
<a href="#l97.3"></a><span id="l97.3" class="difflineat">@@ -324,30 +324,30 @@ public:</span>
<a href="#l97.4"></a><span id="l97.4"> </span>
<a href="#l97.5"></a><span id="l97.5">   const nsString &amp;GetEmptyMimePartString() { return m_emptyMimePartString; }</span>
<a href="#l97.6"></a><span id="l97.6"> private:</span>
<a href="#l97.7"></a><span id="l97.7">   virtual ~nsImapProtocol();</span>
<a href="#l97.8"></a><span id="l97.8">   // the following flag is used to determine when a url is currently being run. It is cleared when we</span>
<a href="#l97.9"></a><span id="l97.9">   // finish processng a url and it is set whenever we call Load on a url</span>
<a href="#l97.10"></a><span id="l97.10">   bool m_urlInProgress;</span>
<a href="#l97.11"></a><span id="l97.11">   nsCOMPtr&lt;nsIImapUrl&gt; m_runningUrl; // the nsIImapURL that is currently running</span>
<a href="#l97.12"></a><span id="l97.12" class="difflineminus">-  nsImapAction m_imapAction;  // current imap action associated with this connnection...</span>
<a href="#l97.13"></a><span id="l97.13" class="difflineplus">+  nsImapAction m_imapAction;  // current imap action associated with this connection...</span>
<a href="#l97.14"></a><span id="l97.14"> </span>
<a href="#l97.15"></a><span id="l97.15">   nsCString             m_hostName;</span>
<a href="#l97.16"></a><span id="l97.16">   nsCString             m_userName;</span>
<a href="#l97.17"></a><span id="l97.17">   nsCString             m_serverKey;</span>
<a href="#l97.18"></a><span id="l97.18">   nsCString             m_realHostName;</span>
<a href="#l97.19"></a><span id="l97.19">   char                  *m_dataOutputBuf;</span>
<a href="#l97.20"></a><span id="l97.20">   nsMsgLineStreamBuffer * m_inputStreamBuffer;</span>
<a href="#l97.21"></a><span id="l97.21">   uint32_t              m_allocatedSize; // allocated size</span>
<a href="#l97.22"></a><span id="l97.22">   uint32_t        m_totalDataSize; // total data size</span>
<a href="#l97.23"></a><span id="l97.23">   uint32_t        m_curReadIndex;  // current read index</span>
<a href="#l97.24"></a><span id="l97.24">   nsCString       m_trashFolderPath;</span>
<a href="#l97.25"></a><span id="l97.25"> </span>
<a href="#l97.26"></a><span id="l97.26" class="difflineminus">-  // Ouput stream for writing commands to the socket</span>
<a href="#l97.27"></a><span id="l97.27" class="difflineplus">+  // Output stream for writing commands to the socket</span>
<a href="#l97.28"></a><span id="l97.28">   nsCOMPtr&lt;nsISocketTransport&gt;  m_transport;</span>
<a href="#l97.29"></a><span id="l97.29">   nsCOMPtr&lt;nsIInputStream&gt; m_inputStream;</span>
<a href="#l97.30"></a><span id="l97.30"> </span>
<a href="#l97.31"></a><span id="l97.31">   nsCOMPtr&lt;nsIAsyncInputStream&gt;   m_channelInputStream;</span>
<a href="#l97.32"></a><span id="l97.32">   nsCOMPtr&lt;nsIAsyncOutputStream&gt;  m_channelOutputStream;</span>
<a href="#l97.33"></a><span id="l97.33">   nsCOMPtr&lt;nsIImapMockChannel&gt;    m_mockChannel;   // this is the channel we should forward to people</span>
<a href="#l97.34"></a><span id="l97.34">   uint32_t m_bytesToChannel;</span>
<a href="#l97.35"></a><span id="l97.35">   bool m_fetchingWholeMessage;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l98.1"></a><span id="l98.1" class="difflineminus">--- a/mailnews/imap/src/nsImapServerResponseParser.cpp</span>
<a href="#l98.2"></a><span id="l98.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapServerResponseParser.cpp</span>
<a href="#l98.3"></a><span id="l98.3" class="difflineat">@@ -733,31 +733,31 @@ void nsImapServerResponseParser::PostPro</span>
<a href="#l98.4"></a><span id="l98.4">  mailbox_data    ::=  &quot;FLAGS&quot; SPACE flag_list /</span>
<a href="#l98.5"></a><span id="l98.5">                                &quot;LIST&quot; SPACE mailbox_list /</span>
<a href="#l98.6"></a><span id="l98.6">                                &quot;LSUB&quot; SPACE mailbox_list /</span>
<a href="#l98.7"></a><span id="l98.7">                                &quot;XLIST&quot; SPACE mailbox_list /</span>
<a href="#l98.8"></a><span id="l98.8">                                &quot;MAILBOX&quot; SPACE text /</span>
<a href="#l98.9"></a><span id="l98.9">                                &quot;SEARCH&quot; [SPACE 1#nz_number] /</span>
<a href="#l98.10"></a><span id="l98.10">                                number SPACE &quot;EXISTS&quot; / number SPACE &quot;RECENT&quot;</span>
<a href="#l98.11"></a><span id="l98.11"> </span>
<a href="#l98.12"></a><span id="l98.12" class="difflineminus">-This production was changed to accomodate predictive parsing</span>
<a href="#l98.13"></a><span id="l98.13" class="difflineplus">+This production was changed to accommodate predictive parsing</span>
<a href="#l98.14"></a><span id="l98.14"> </span>
<a href="#l98.15"></a><span id="l98.15">  mailbox_data    ::=  &quot;FLAGS&quot; SPACE flag_list /</span>
<a href="#l98.16"></a><span id="l98.16">                                &quot;LIST&quot; SPACE mailbox_list /</span>
<a href="#l98.17"></a><span id="l98.17">                                &quot;LSUB&quot; SPACE mailbox_list /</span>
<a href="#l98.18"></a><span id="l98.18">                                &quot;XLIST&quot; SPACE mailbox_list /</span>
<a href="#l98.19"></a><span id="l98.19">                                &quot;MAILBOX&quot; SPACE text /</span>
<a href="#l98.20"></a><span id="l98.20">                                &quot;SEARCH&quot; [SPACE 1#nz_number]</span>
<a href="#l98.21"></a><span id="l98.21"> */</span>
<a href="#l98.22"></a><span id="l98.22"> void nsImapServerResponseParser::mailbox_data()</span>
<a href="#l98.23"></a><span id="l98.23"> {</span>
<a href="#l98.24"></a><span id="l98.24">   if (!PL_strcasecmp(fNextToken, &quot;FLAGS&quot;))</span>
<a href="#l98.25"></a><span id="l98.25">   {</span>
<a href="#l98.26"></a><span id="l98.26">     // this handles the case where we got the permanent flags response</span>
<a href="#l98.27"></a><span id="l98.27" class="difflineminus">-    // before the flags response, in which case, we want to ignore thes flags.</span>
<a href="#l98.28"></a><span id="l98.28" class="difflineplus">+    // before the flags response, in which case, we want to ignore these flags.</span>
<a href="#l98.29"></a><span id="l98.29">     if (fGotPermanentFlags)</span>
<a href="#l98.30"></a><span id="l98.30">       skip_to_CRLF();</span>
<a href="#l98.31"></a><span id="l98.31">     else</span>
<a href="#l98.32"></a><span id="l98.32">       parse_folder_flags();</span>
<a href="#l98.33"></a><span id="l98.33">   }</span>
<a href="#l98.34"></a><span id="l98.34">   else if (!PL_strcasecmp(fNextToken, &quot;LIST&quot;) ||</span>
<a href="#l98.35"></a><span id="l98.35">            !PL_strcasecmp(fNextToken, &quot;XLIST&quot;))</span>
<a href="#l98.36"></a><span id="l98.36">   {</span>
<a href="#l98.37"></a><span id="l98.37" class="difflineat">@@ -2969,17 +2969,17 @@ nsImapServerResponseParser::bodystructur</span>
<a href="#l98.38"></a><span id="l98.38"> </span>
<a href="#l98.39"></a><span id="l98.39"> </span>
<a href="#l98.40"></a><span id="l98.40"> // RFC2087:  quotaroot_response = &quot;QUOTAROOT&quot; SP astring *(SP astring)</span>
<a href="#l98.41"></a><span id="l98.41"> //           quota_response = &quot;QUOTA&quot; SP astring SP quota_list</span>
<a href="#l98.42"></a><span id="l98.42"> //           quota_list     = &quot;(&quot; [quota_resource *(SP quota_resource)] &quot;)&quot;</span>
<a href="#l98.43"></a><span id="l98.43"> //           quota_resource = atom SP number SP number</span>
<a href="#l98.44"></a><span id="l98.44"> // Only the STORAGE resource is considered.  The current implementation is</span>
<a href="#l98.45"></a><span id="l98.45"> // slightly broken because it assumes that STORAGE is the first resource;</span>
<a href="#l98.46"></a><span id="l98.46" class="difflineminus">-// a reponse   QUOTA (MESSAGE 5 100 STORAGE 10 512)   would be ignored.</span>
<a href="#l98.47"></a><span id="l98.47" class="difflineplus">+// a response   QUOTA (MESSAGE 5 100 STORAGE 10 512)   would be ignored.</span>
<a href="#l98.48"></a><span id="l98.48"> void nsImapServerResponseParser::quota_data()</span>
<a href="#l98.49"></a><span id="l98.49"> {</span>
<a href="#l98.50"></a><span id="l98.50">   if (!PL_strcasecmp(fNextToken, &quot;QUOTAROOT&quot;))</span>
<a href="#l98.51"></a><span id="l98.51">   {</span>
<a href="#l98.52"></a><span id="l98.52">     // ignore QUOTAROOT response</span>
<a href="#l98.53"></a><span id="l98.53">     nsCString quotaroot;</span>
<a href="#l98.54"></a><span id="l98.54">     AdvanceToNextToken();</span>
<a href="#l98.55"></a><span id="l98.55">     while (ContinueParse() &amp;&amp; !fAtEndOfLine)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l99.1"></a><span id="l99.1" class="difflineminus">--- a/mailnews/imap/src/nsImapServerResponseParser.h</span>
<a href="#l99.2"></a><span id="l99.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapServerResponseParser.h</span>
<a href="#l99.3"></a><span id="l99.3" class="difflineat">@@ -177,17 +177,17 @@ protected:</span>
<a href="#l99.4"></a><span id="l99.4">   virtual void    ProcessBadCommand(const char *commandToken);</span>
<a href="#l99.5"></a><span id="l99.5">   virtual void    PreProcessCommandToken(const char *commandToken,</span>
<a href="#l99.6"></a><span id="l99.6">                                              const char *currentCommand);</span>
<a href="#l99.7"></a><span id="l99.7">   virtual void    PostProcessEndOfLine();</span>
<a href="#l99.8"></a><span id="l99.8"> </span>
<a href="#l99.9"></a><span id="l99.9">   // Overridden from the nsIMAPGenericParser, to retrieve the next line</span>
<a href="#l99.10"></a><span id="l99.10">   // from the open socket.</span>
<a href="#l99.11"></a><span id="l99.11">   virtual bool    GetNextLineForParser(char **nextLine) override;</span>
<a href="#l99.12"></a><span id="l99.12" class="difflineminus">-  // overriden to do logging</span>
<a href="#l99.13"></a><span id="l99.13" class="difflineplus">+  // overridden to do logging</span>
<a href="#l99.14"></a><span id="l99.14">   virtual void    SetSyntaxError(bool error, const char *msg = nullptr) override;</span>
<a href="#l99.15"></a><span id="l99.15"> </span>
<a href="#l99.16"></a><span id="l99.16"> private:</span>
<a href="#l99.17"></a><span id="l99.17">   bool            fCurrentCommandFailed;</span>
<a href="#l99.18"></a><span id="l99.18">   bool            fReportingErrors;</span>
<a href="#l99.19"></a><span id="l99.19"> </span>
<a href="#l99.20"></a><span id="l99.20"> </span>
<a href="#l99.21"></a><span id="l99.21">   bool            fCurrentFolderReadOnly;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l100.1"></a><span id="l100.1" class="difflineminus">--- a/mailnews/imap/src/nsImapUrl.cpp</span>
<a href="#l100.2"></a><span id="l100.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapUrl.cpp</span>
<a href="#l100.3"></a><span id="l100.3" class="difflineat">@@ -325,17 +325,17 @@ NS_IMETHODIMP nsImapUrl::GetCustomSubtra</span>
<a href="#l100.4"></a><span id="l100.4">   return NS_OK;</span>
<a href="#l100.5"></a><span id="l100.5"> }</span>
<a href="#l100.6"></a><span id="l100.6"> </span>
<a href="#l100.7"></a><span id="l100.7"> </span>
<a href="#l100.8"></a><span id="l100.8"> NS_IMETHODIMP nsImapUrl::GetImapPartToFetch(char **result)</span>
<a href="#l100.9"></a><span id="l100.9"> {</span>
<a href="#l100.10"></a><span id="l100.10">   //  here's the old code....</span>
<a href="#l100.11"></a><span id="l100.11"> </span>
<a href="#l100.12"></a><span id="l100.12" class="difflineminus">-  // unforunately an imap part can have the form: /;section= OR</span>
<a href="#l100.13"></a><span id="l100.13" class="difflineplus">+  // unfortunately an imap part can have the form: /;section= OR</span>
<a href="#l100.14"></a><span id="l100.14">   // it can have the form ?section=. We need to look for both.</span>
<a href="#l100.15"></a><span id="l100.15">   if (m_listOfMessageIds)</span>
<a href="#l100.16"></a><span id="l100.16">   {</span>
<a href="#l100.17"></a><span id="l100.17">     char *wherepart = PL_strstr(m_listOfMessageIds, &quot;;section=&quot;);</span>
<a href="#l100.18"></a><span id="l100.18">     if (!wherepart) // look for ?section too....</span>
<a href="#l100.19"></a><span id="l100.19">       wherepart = PL_strstr(m_listOfMessageIds, &quot;?section=&quot;);</span>
<a href="#l100.20"></a><span id="l100.20">     if (wherepart)</span>
<a href="#l100.21"></a><span id="l100.21">     {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l101.1"></a><span id="l101.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_dod.js</span>
<a href="#l101.2"></a><span id="l101.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_dod.js</span>
<a href="#l101.3"></a><span id="l101.3" class="difflineat">@@ -26,17 +26,17 @@ function run_test()</span>
<a href="#l101.4"></a><span id="l101.4">   // pref tuning: one connection only, turn off notifications</span>
<a href="#l101.5"></a><span id="l101.5">   Services.prefs.setIntPref( &quot;mail.server.server1.max_cached_connections&quot;, 1);</span>
<a href="#l101.6"></a><span id="l101.6">   Services.prefs.setBoolPref(&quot;mail.biff.play_sound&quot;, false);</span>
<a href="#l101.7"></a><span id="l101.7">   Services.prefs.setBoolPref(&quot;mail.biff.show_alert&quot;, false);</span>
<a href="#l101.8"></a><span id="l101.8">   Services.prefs.setBoolPref(&quot;mail.biff.show_tray_icon&quot;,    false);</span>
<a href="#l101.9"></a><span id="l101.9">   Services.prefs.setBoolPref(&quot;mail.biff.animate_dock_icon&quot;, false);</span>
<a href="#l101.10"></a><span id="l101.10"> </span>
<a href="#l101.11"></a><span id="l101.11">   // Force bodypart fetching as best as we can.</span>
<a href="#l101.12"></a><span id="l101.12" class="difflineminus">-  // It would be adviseable to enable log and check to be sure body[] is not</span>
<a href="#l101.13"></a><span id="l101.13" class="difflineplus">+  // It would be advisable to enable log and check to be sure body[] is not</span>
<a href="#l101.14"></a><span id="l101.14">   // being fetched in lieu of parts. There may be conditions that bypass</span>
<a href="#l101.15"></a><span id="l101.15">   // bodypart fetch.</span>
<a href="#l101.16"></a><span id="l101.16">   Services.prefs.setBoolPref(&quot;mail.inline_attachments&quot;,     false);</span>
<a href="#l101.17"></a><span id="l101.17">   Services.prefs.setIntPref (&quot;browser.cache.disk.capacity&quot;,              0);</span>
<a href="#l101.18"></a><span id="l101.18">   Services.prefs.setIntPref (&quot;mail.imap.mime_parts_on_demand_threshold&quot;, 1);</span>
<a href="#l101.19"></a><span id="l101.19">   Services.prefs.setIntPref (&quot;mailnews.display.disallow_mime_handlers&quot;,  0);</span>
<a href="#l101.20"></a><span id="l101.20">   Services.prefs.setBoolPref(&quot;mail.server.default.fetch_by_chunks&quot;,  false);</span>
<a href="#l101.21"></a><span id="l101.21">   Services.prefs.setBoolPref(&quot;mail.server.server1.autosync_offline_stores&quot;, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l102.1"></a><span id="l102.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_dontStatNoSelect.js</span>
<a href="#l102.2"></a><span id="l102.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_dontStatNoSelect.js</span>
<a href="#l102.3"></a><span id="l102.3" class="difflineat">@@ -100,17 +100,17 @@ function* checkStatNoSelect() {</span>
<a href="#l102.4"></a><span id="l102.4">   MailServices.mailSession.AddFolderListener(gFolderListener,</span>
<a href="#l102.5"></a><span id="l102.5">                                              Ci.nsIFolderListener.boolPropertyChanged);</span>
<a href="#l102.6"></a><span id="l102.6">   gIMAPInbox.getNewMessages(null, null);</span>
<a href="#l102.7"></a><span id="l102.7">   // Wait for the folder listener to get told about new messages.</span>
<a href="#l102.8"></a><span id="l102.8">   yield false;</span>
<a href="#l102.9"></a><span id="l102.9"> }</span>
<a href="#l102.10"></a><span id="l102.10"> </span>
<a href="#l102.11"></a><span id="l102.11"> function addMessageToFolder(mbox) {</span>
<a href="#l102.12"></a><span id="l102.12" class="difflineminus">-  // make a couple messges</span>
<a href="#l102.13"></a><span id="l102.13" class="difflineplus">+  // make a couple of messages</span>
<a href="#l102.14"></a><span id="l102.14">   let messages = [];</span>
<a href="#l102.15"></a><span id="l102.15">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l102.16"></a><span id="l102.16">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l102.17"></a><span id="l102.17"> </span>
<a href="#l102.18"></a><span id="l102.18">   let msgURI =</span>
<a href="#l102.19"></a><span id="l102.19">     Services.io.newURI(&quot;data:text/plain;base64,&quot; +</span>
<a href="#l102.20"></a><span id="l102.20">                        btoa(messages[0].toMessageString()));</span>
<a href="#l102.21"></a><span id="l102.21">   let message = new imapMessage(msgURI.spec, mbox.uidnext++);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l103.1"></a><span id="l103.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapFilterActions.js</span>
<a href="#l103.2"></a><span id="l103.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapFilterActions.js</span>
<a href="#l103.3"></a><span id="l103.3" class="difflineat">@@ -87,29 +87,29 @@ var gTestArray =</span>
<a href="#l103.4"></a><span id="l103.4">     gAction.type = Ci.nsMsgFilterAction.MoveToFolder;</span>
<a href="#l103.5"></a><span id="l103.5">     gAction.targetFolderUri = gSubfolder.URI;</span>
<a href="#l103.6"></a><span id="l103.6">     gInboxCount = folderCount(IMAPPump.inbox);</span>
<a href="#l103.7"></a><span id="l103.7">     gSubfolderCount = folderCount(gSubfolder);</span>
<a href="#l103.8"></a><span id="l103.8">     yield setupTest(gBodyFilter, gAction);</span>
<a href="#l103.9"></a><span id="l103.9"> </span>
<a href="#l103.10"></a><span id="l103.10">     testCounts(false, 0, 0, 0);</span>
<a href="#l103.11"></a><span id="l103.11">     Assert.equal(gSubfolderCount + 1, folderCount(gSubfolder));</span>
<a href="#l103.12"></a><span id="l103.12" class="difflineminus">-    // no net messsages were added to the inbox</span>
<a href="#l103.13"></a><span id="l103.13" class="difflineplus">+    // no net messages were added to the inbox</span>
<a href="#l103.14"></a><span id="l103.14">     Assert.equal(gInboxCount, folderCount(IMAPPump.inbox));</span>
<a href="#l103.15"></a><span id="l103.15">   },</span>
<a href="#l103.16"></a><span id="l103.16">   function *MoveToFolderBody2() {</span>
<a href="#l103.17"></a><span id="l103.17">     gAction.type = Ci.nsMsgFilterAction.MoveToFolder;</span>
<a href="#l103.18"></a><span id="l103.18">     gAction.targetFolderUri = gSubfolder.URI;</span>
<a href="#l103.19"></a><span id="l103.19">     gInboxCount = folderCount(IMAPPump.inbox);</span>
<a href="#l103.20"></a><span id="l103.20">     gSubfolderCount = folderCount(gSubfolder);</span>
<a href="#l103.21"></a><span id="l103.21">     yield setupTest(gBodyFilter, gAction);</span>
<a href="#l103.22"></a><span id="l103.22"> </span>
<a href="#l103.23"></a><span id="l103.23">     testCounts(false, 0, 0, 0);</span>
<a href="#l103.24"></a><span id="l103.24">     Assert.equal(gSubfolderCount + 1, folderCount(gSubfolder));</span>
<a href="#l103.25"></a><span id="l103.25" class="difflineminus">-    // no net messsages were added to the inbox</span>
<a href="#l103.26"></a><span id="l103.26" class="difflineplus">+    // no net messages were added to the inbox</span>
<a href="#l103.27"></a><span id="l103.27">     Assert.equal(gInboxCount, folderCount(IMAPPump.inbox));</span>
<a href="#l103.28"></a><span id="l103.28">   },</span>
<a href="#l103.29"></a><span id="l103.29">   function *MarkRead() {</span>
<a href="#l103.30"></a><span id="l103.30">     gAction.type = Ci.nsMsgFilterAction.MarkRead;</span>
<a href="#l103.31"></a><span id="l103.31">     gInboxCount = folderCount(IMAPPump.inbox);</span>
<a href="#l103.32"></a><span id="l103.32">     yield setupTest(gFilter, gAction);</span>
<a href="#l103.33"></a><span id="l103.33">     testCounts(false, 0, 0, 0);</span>
<a href="#l103.34"></a><span id="l103.34">     Assert.ok(gHeader.isRead);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l104.1"></a><span id="l104.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHdrChunking.js</span>
<a href="#l104.2"></a><span id="l104.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHdrChunking.js</span>
<a href="#l104.3"></a><span id="l104.3" class="difflineat">@@ -42,17 +42,17 @@ var tests = [</span>
<a href="#l104.4"></a><span id="l104.4">   testMessageFetched,</span>
<a href="#l104.5"></a><span id="l104.5">   testHdrsDownloaded,</span>
<a href="#l104.6"></a><span id="l104.6">   endTest</span>
<a href="#l104.7"></a><span id="l104.7"> ]</span>
<a href="#l104.8"></a><span id="l104.8"> </span>
<a href="#l104.9"></a><span id="l104.9"> // upload messages to the imap fake server Inbox</span>
<a href="#l104.10"></a><span id="l104.10"> function* uploadImapMessages()</span>
<a href="#l104.11"></a><span id="l104.11"> {</span>
<a href="#l104.12"></a><span id="l104.12" class="difflineminus">-  // make 10 messges</span>
<a href="#l104.13"></a><span id="l104.13" class="difflineplus">+  // make 10 messages</span>
<a href="#l104.14"></a><span id="l104.14">   let messageGenerator = new MessageGenerator();</span>
<a href="#l104.15"></a><span id="l104.15">   let scenarioFactory = new MessageScenarioFactory(messageGenerator);</span>
<a href="#l104.16"></a><span id="l104.16"> </span>
<a href="#l104.17"></a><span id="l104.17">   // build up a list of messages</span>
<a href="#l104.18"></a><span id="l104.18">   let messages = [];</span>
<a href="#l104.19"></a><span id="l104.19">   messages = messages.concat(scenarioFactory.directReply(10));</span>
<a href="#l104.20"></a><span id="l104.20"> </span>
<a href="#l104.21"></a><span id="l104.21">   // Add 10 messages with uids 1-10.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l105.1"></a><span id="l105.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l105.2"></a><span id="l105.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapHighWater.js</span>
<a href="#l105.3"></a><span id="l105.3" class="difflineat">@@ -63,17 +63,17 @@ function run_test()</span>
<a href="#l105.4"></a><span id="l105.4">   Services.prefs.setBoolPref(&quot;mail.biff.animate_dock_icon&quot;, false);</span>
<a href="#l105.5"></a><span id="l105.5">   Services.prefs.setBoolPref(&quot;mail.server.default.autosync_offline_stores&quot;, false);</span>
<a href="#l105.6"></a><span id="l105.6">   // Don't prompt about offline download when going offline</span>
<a href="#l105.7"></a><span id="l105.7">   Services.prefs.setIntPref(&quot;offline.download.download_messages&quot;, 2);</span>
<a href="#l105.8"></a><span id="l105.8">   actually_run_test();</span>
<a href="#l105.9"></a><span id="l105.9"> }</span>
<a href="#l105.10"></a><span id="l105.10"> </span>
<a href="#l105.11"></a><span id="l105.11"> function* setupFolders() {</span>
<a href="#l105.12"></a><span id="l105.12" class="difflineminus">-  // make 10 messges</span>
<a href="#l105.13"></a><span id="l105.13" class="difflineplus">+  // make 10 messages</span>
<a href="#l105.14"></a><span id="l105.14">   let messageGenerator = new MessageGenerator();</span>
<a href="#l105.15"></a><span id="l105.15">   let scenarioFactory = new MessageScenarioFactory(messageGenerator);</span>
<a href="#l105.16"></a><span id="l105.16"> </span>
<a href="#l105.17"></a><span id="l105.17">   // build up a list of messages</span>
<a href="#l105.18"></a><span id="l105.18">   let messages = [];</span>
<a href="#l105.19"></a><span id="l105.19">   messages = messages.concat(scenarioFactory.directReply(10));</span>
<a href="#l105.20"></a><span id="l105.20"> </span>
<a href="#l105.21"></a><span id="l105.21">   // Add 10 messages with uids 1-10.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l106.1"></a><span id="l106.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l106.2"></a><span id="l106.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_imapStoreMsgOffline.js</span>
<a href="#l106.3"></a><span id="l106.3" class="difflineat">@@ -70,17 +70,17 @@ function addMessagesToServer(messages, m</span>
<a href="#l106.4"></a><span id="l106.4">     mailbox.addMessage(new imapMessage(URI.spec, mailbox.uidnext++, []));</span>
<a href="#l106.5"></a><span id="l106.5">   });</span>
<a href="#l106.6"></a><span id="l106.6"> }</span>
<a href="#l106.7"></a><span id="l106.7"> </span>
<a href="#l106.8"></a><span id="l106.8"> function setup() {</span>
<a href="#l106.9"></a><span id="l106.9">   // We aren't interested in downloading messages automatically</span>
<a href="#l106.10"></a><span id="l106.10">   Services.prefs.setBoolPref(&quot;mail.server.server1.autosync_offline_stores&quot;, false);</span>
<a href="#l106.11"></a><span id="l106.11">   Services.prefs.setBoolPref(&quot;mail.server.server1.offline_download&quot;, true);</span>
<a href="#l106.12"></a><span id="l106.12" class="difflineminus">-  // make small threshhold for mpod so our test messages don't have to be big.</span>
<a href="#l106.13"></a><span id="l106.13" class="difflineplus">+  // make small threshold for mpod so our test messages don't have to be big.</span>
<a href="#l106.14"></a><span id="l106.14">   // XXX We can't set this pref until the fake server supports body structure.</span>
<a href="#l106.15"></a><span id="l106.15">   // So for now, we'll leave it at the default value, which is larger than any of</span>
<a href="#l106.16"></a><span id="l106.16">   // our test messages.</span>
<a href="#l106.17"></a><span id="l106.17">   // Services.prefs.setIntPref(&quot;mail.imap.mime_parts_on_demand_threshold&quot;, 3000);</span>
<a href="#l106.18"></a><span id="l106.18"> </span>
<a href="#l106.19"></a><span id="l106.19">   setupIMAPPump();</span>
<a href="#l106.20"></a><span id="l106.20"> </span>
<a href="#l106.21"></a><span id="l106.21">   // these hacks are required because we've created the inbox before</span>
<a href="#l106.22"></a><span id="l106.22" class="difflineat">@@ -155,17 +155,17 @@ var tests = [</span>
<a href="#l106.23"></a><span id="l106.23">   },</span>
<a href="#l106.24"></a><span id="l106.24">   function verify3rdMsg() {</span>
<a href="#l106.25"></a><span id="l106.25">     let msg3 = IMAPPump.inbox.msgDatabase.getMsgHdrForMessageID(gMsgId3);</span>
<a href="#l106.26"></a><span id="l106.26">     // can't turn this on because our fake server doesn't support body structure.</span>
<a href="#l106.27"></a><span id="l106.27"> //    do_check_eq(msg3.flags &amp; nsMsgMessageFlags.Offline, 0);</span>
<a href="#l106.28"></a><span id="l106.28">   },</span>
<a href="#l106.29"></a><span id="l106.29">   function* addNewMsgs() {</span>
<a href="#l106.30"></a><span id="l106.30">     let mbox = IMAPPump.daemon.getMailbox(&quot;INBOX&quot;)</span>
<a href="#l106.31"></a><span id="l106.31" class="difflineminus">-    // make a couple messges</span>
<a href="#l106.32"></a><span id="l106.32" class="difflineplus">+    // make a couple of messages</span>
<a href="#l106.33"></a><span id="l106.33">     let messages = [];</span>
<a href="#l106.34"></a><span id="l106.34">     let bodyString = &quot;&quot;;</span>
<a href="#l106.35"></a><span id="l106.35">     for (let i = 0; i &lt; 100; i++)</span>
<a href="#l106.36"></a><span id="l106.36">       bodyString += &quot;1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890\r\n&quot;;</span>
<a href="#l106.37"></a><span id="l106.37"> </span>
<a href="#l106.38"></a><span id="l106.38">     let gMessageGenerator = new MessageGenerator();</span>
<a href="#l106.39"></a><span id="l106.39">     messages = messages.concat(gMessageGenerator.makeMessage({body: {body: bodyString, contentType: &quot;text/plain&quot;}}));</span>
<a href="#l106.40"></a><span id="l106.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l107.1"></a><span id="l107.1" class="difflineminus">--- a/mailnews/imap/test/unit/test_offlinePlayback.js</span>
<a href="#l107.2"></a><span id="l107.2" class="difflineplus">+++ b/mailnews/imap/test/unit/test_offlinePlayback.js</span>
<a href="#l107.3"></a><span id="l107.3" class="difflineat">@@ -103,17 +103,17 @@ function *setup() {</span>
<a href="#l107.4"></a><span id="l107.4">    * Set up an IMAP server.</span>
<a href="#l107.5"></a><span id="l107.5">    */</span>
<a href="#l107.6"></a><span id="l107.6">   IMAPPump.daemon.createMailbox(&quot;secondFolder&quot;, {subscribed : true});</span>
<a href="#l107.7"></a><span id="l107.7">   IMAPPump.daemon.createMailbox(&quot;thirdFolder&quot;, {subscribed : true});</span>
<a href="#l107.8"></a><span id="l107.8">   Services.prefs.setBoolPref(&quot;mail.server.default.autosync_offline_stores&quot;, false);</span>
<a href="#l107.9"></a><span id="l107.9">   // Don't prompt about offline download when going offline</span>
<a href="#l107.10"></a><span id="l107.10">   Services.prefs.setIntPref(&quot;offline.download.download_messages&quot;, 2);</span>
<a href="#l107.11"></a><span id="l107.11"> </span>
<a href="#l107.12"></a><span id="l107.12" class="difflineminus">-  // make a couple messges</span>
<a href="#l107.13"></a><span id="l107.13" class="difflineplus">+  // make a couple of messages</span>
<a href="#l107.14"></a><span id="l107.14">   let messages = [];</span>
<a href="#l107.15"></a><span id="l107.15">   let gMessageGenerator = new MessageGenerator();</span>
<a href="#l107.16"></a><span id="l107.16">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l107.17"></a><span id="l107.17">   messages = messages.concat(gMessageGenerator.makeMessage());</span>
<a href="#l107.18"></a><span id="l107.18">   gSynthMessage1 = messages[0];</span>
<a href="#l107.19"></a><span id="l107.19">   gSynthMessage2 = messages[1];</span>
<a href="#l107.20"></a><span id="l107.20"> </span>
<a href="#l107.21"></a><span id="l107.21">   let msgURI =</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l108.1"></a><span id="l108.1" class="difflineminus">--- a/mailnews/import/outlook/src/MapiMessage.cpp</span>
<a href="#l108.2"></a><span id="l108.2" class="difflineplus">+++ b/mailnews/import/outlook/src/MapiMessage.cpp</span>
<a href="#l108.3"></a><span id="l108.3" class="difflineat">@@ -619,17 +619,17 @@ void ExtractMetaCharset(const wchar_t* b</span>
<a href="#l108.4"></a><span id="l108.4">   const wchar_t* chset_pos = std::search(body, eohd_pos, str_chset,</span>
<a href="#l108.5"></a><span id="l108.5">                                          str_chset_end, CaseInsensitiveComp);</span>
<a href="#l108.6"></a><span id="l108.6">   if (chset_pos == eohd_pos) // No charset!</span>
<a href="#l108.7"></a><span id="l108.7">     return;</span>
<a href="#l108.8"></a><span id="l108.8">   chset_pos += 8;</span>
<a href="#l108.9"></a><span id="l108.9"> </span>
<a href="#l108.10"></a><span id="l108.10">   // remove everything from the string after the next ; or &quot; or space,</span>
<a href="#l108.11"></a><span id="l108.11">   // whichever comes first.</span>
<a href="#l108.12"></a><span id="l108.12" class="difflineminus">-  // The inital sting looks something like</span>
<a href="#l108.13"></a><span id="l108.13" class="difflineplus">+  // The initial string looks something like</span>
<a href="#l108.14"></a><span id="l108.14">   // &lt;META content=&quot;text/html; charset=utf-8&quot; http-equiv=Content-Type&gt;</span>
<a href="#l108.15"></a><span id="l108.15">   // &lt;META content=&quot;text/html; charset=utf-8;&quot; http-equiv=Content-Type&gt;</span>
<a href="#l108.16"></a><span id="l108.16">   // &lt;META content=&quot;text/html; charset=utf-8 ;&quot; http-equiv=Content-Type&gt;</span>
<a href="#l108.17"></a><span id="l108.17">   // &lt;META content=&quot;text/html; charset=utf-8 &quot; http-equiv=Content-Type&gt;</span>
<a href="#l108.18"></a><span id="l108.18">   const wchar_t term[] = L&quot;;\&quot; &quot;, *term_end= term+sizeof(term)/sizeof(term[0])-1;</span>
<a href="#l108.19"></a><span id="l108.19">   const wchar_t* chset_end = std::find_first_of(chset_pos, eohd_pos, term,</span>
<a href="#l108.20"></a><span id="l108.20">                                                 term_end);</span>
<a href="#l108.21"></a><span id="l108.21">   if (chset_end != eohd_pos)</span>
<a href="#l108.22"></a><span id="l108.22" class="difflineat">@@ -1077,17 +1077,17 @@ bool CMapiMessage::AddAttachment(DWORD a</span>
<a href="#l108.23"></a><span id="l108.23">       // when an attachment has a Content-Id while isn't embedded (even in a message</span>
<a href="#l108.24"></a><span id="l108.24">       // with a plain-text body!). So next I tried to look for &lt;img&gt; tags that contain</span>
<a href="#l108.25"></a><span id="l108.25">       // the found Content-Id. But this is unreliable, too, because there exist cases</span>
<a href="#l108.26"></a><span id="l108.26">       // where other places of HTML reference the embedded messages (e.g. it may be</span>
<a href="#l108.27"></a><span id="l108.27">       // a background of a table cell, or some CSS; further, it is possible that the</span>
<a href="#l108.28"></a><span id="l108.28">       // reference to an embedded object is not in the main body, but in another</span>
<a href="#l108.29"></a><span id="l108.29">       // embedded object - like body references a CSS attachment that in turn references</span>
<a href="#l108.30"></a><span id="l108.30">       // a picture as a background of its element). From the other hand, it's unreliable</span>
<a href="#l108.31"></a><span id="l108.31" class="difflineminus">-      // to relax the search criteria to any occurence of the Content-Id string in the body -</span>
<a href="#l108.32"></a><span id="l108.32" class="difflineplus">+      // to relax the search criteria to any occurrence of the Content-Id string in the body -</span>
<a href="#l108.33"></a><span id="l108.33">       // partly because the string may be simply in a text or other non-referencing part,</span>
<a href="#l108.34"></a><span id="l108.34">       // partly because of the abovementioned possibility that the reference is outside</span>
<a href="#l108.35"></a><span id="l108.35">       // the body at all.</span>
<a href="#l108.36"></a><span id="l108.36">       // There exist the PR_ATTACH_FLAGS property of the attachment. The MS documentation</span>
<a href="#l108.37"></a><span id="l108.37">       // tells about two possible flags in it: ATT_INVISIBLE_IN_HTML and ATT_INVISIBLE_IN_RTF.</span>
<a href="#l108.38"></a><span id="l108.38">       // There is at least one more undocumented flag: ATT_MHTML_REF. Some sources in Internet</span>
<a href="#l108.39"></a><span id="l108.39">       // suggest simply check for the latter flag to distinguish between the embedded</span>
<a href="#l108.40"></a><span id="l108.40">       // and ordinary attachments. But my observations indicate that even if the flags</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l109.1"></a><span id="l109.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookImport.h</span>
<a href="#l109.2"></a><span id="l109.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookImport.h</span>
<a href="#l109.3"></a><span id="l109.3" class="difflineat">@@ -24,17 +24,17 @@ class nsOutlookImport : public nsIImport</span>
<a href="#l109.4"></a><span id="l109.4"> {</span>
<a href="#l109.5"></a><span id="l109.5"> public:</span>
<a href="#l109.6"></a><span id="l109.6"> </span>
<a href="#l109.7"></a><span id="l109.7">   nsOutlookImport();</span>
<a href="#l109.8"></a><span id="l109.8"> </span>
<a href="#l109.9"></a><span id="l109.9">   NS_DECL_ISUPPORTS</span>
<a href="#l109.10"></a><span id="l109.10"> </span>
<a href="#l109.11"></a><span id="l109.11">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l109.12"></a><span id="l109.12" class="difflineminus">-  // we suppport the nsIImportModule interface</span>
<a href="#l109.13"></a><span id="l109.13" class="difflineplus">+  // we support the nsIImportModule interface</span>
<a href="#l109.14"></a><span id="l109.14">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l109.15"></a><span id="l109.15"> </span>
<a href="#l109.16"></a><span id="l109.16">   NS_DECL_NSIIMPORTMODULE</span>
<a href="#l109.17"></a><span id="l109.17"> </span>
<a href="#l109.18"></a><span id="l109.18"> protected:</span>
<a href="#l109.19"></a><span id="l109.19">   virtual ~nsOutlookImport();</span>
<a href="#l109.20"></a><span id="l109.20"> };</span>
<a href="#l109.21"></a><span id="l109.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l110.1"></a><span id="l110.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookSettings.cpp</span>
<a href="#l110.2"></a><span id="l110.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookSettings.cpp</span>
<a href="#l110.3"></a><span id="l110.3" class="difflineat">@@ -540,13 +540,13 @@ nsresult OutlookSettings::SetSmtpServer(</span>
<a href="#l110.4"></a><span id="l110.4">   smtpServer-&gt;SetHostname(nativeServerName);</span>
<a href="#l110.5"></a><span id="l110.5">   if (!aUser.IsEmpty())</span>
<a href="#l110.6"></a><span id="l110.6">     smtpServer-&gt;SetUsername(nativeUserName);</span>
<a href="#l110.7"></a><span id="l110.7"> </span>
<a href="#l110.8"></a><span id="l110.8">   if (aId)</span>
<a href="#l110.9"></a><span id="l110.9">     SetSmtpServerKey(aId, smtpServer);</span>
<a href="#l110.10"></a><span id="l110.10"> </span>
<a href="#l110.11"></a><span id="l110.11">   // TODO SSL, auth method</span>
<a href="#l110.12"></a><span id="l110.12" class="difflineminus">-  IMPORT_LOG1(&quot;Ceated new SMTP server: %s\n&quot;,</span>
<a href="#l110.13"></a><span id="l110.13" class="difflineplus">+  IMPORT_LOG1(&quot;Created new SMTP server: %s\n&quot;,</span>
<a href="#l110.14"></a><span id="l110.14">               nativeServerName.get());</span>
<a href="#l110.15"></a><span id="l110.15">   return NS_OK;</span>
<a href="#l110.16"></a><span id="l110.16"> }</span>
<a href="#l110.17"></a><span id="l110.17"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l111.1"></a><span id="l111.1" class="difflineminus">--- a/mailnews/import/public/nsIImportAddressBooks.idl</span>
<a href="#l111.2"></a><span id="l111.2" class="difflineplus">+++ b/mailnews/import/public/nsIImportAddressBooks.idl</span>
<a href="#l111.3"></a><span id="l111.3" class="difflineat">@@ -87,17 +87,17 @@ interface nsIImportAddressBooks : nsISup</span>
<a href="#l111.4"></a><span id="l111.4">     Fill in defaults (if any) for a field map for importing address</span>
<a href="#l111.5"></a><span id="l111.5">     books from this location.</span>
<a href="#l111.6"></a><span id="l111.6">   */</span>
<a href="#l111.7"></a><span id="l111.7">   void InitFieldMap(in nsIImportFieldMap fieldMap);</span>
<a href="#l111.8"></a><span id="l111.8"> </span>
<a href="#l111.9"></a><span id="l111.9">   /**</span>
<a href="#l111.10"></a><span id="l111.10">    * Import a specific address book into the destination file supplied.</span>
<a href="#l111.11"></a><span id="l111.11">    * If an error occurs that is non-fatal, the destination will be deleted and</span>
<a href="#l111.12"></a><span id="l111.12" class="difflineminus">-   * other adress book will be imported.  If a fatal error occurs, the</span>
<a href="#l111.13"></a><span id="l111.13" class="difflineplus">+   * other address book will be imported.  If a fatal error occurs, the</span>
<a href="#l111.14"></a><span id="l111.14">    * destination will be deleted and the import operation will abort.</span>
<a href="#l111.15"></a><span id="l111.15">    *</span>
<a href="#l111.16"></a><span id="l111.16">    * @param aSource         The source data for the import.</span>
<a href="#l111.17"></a><span id="l111.17">    * @param aDestination    The proxy database for the destination of the</span>
<a href="#l111.18"></a><span id="l111.18">    *                        import.</span>
<a href="#l111.19"></a><span id="l111.19">    * @param aFieldMap       The field map containing the mapping of fields to be</span>
<a href="#l111.20"></a><span id="l111.20">    *                        used in cvs and tab type imports.</span>
<a href="#l111.21"></a><span id="l111.21">    * @param aSupportService An optional proxy support service (nullptr is</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l112.1"></a><span id="l112.1" class="difflineminus">--- a/mailnews/import/src/ImportTranslate.cpp</span>
<a href="#l112.2"></a><span id="l112.2" class="difflineplus">+++ b/mailnews/import/src/ImportTranslate.cpp</span>
<a href="#l112.3"></a><span id="l112.3" class="difflineat">@@ -22,17 +22,17 @@ bool ImportTranslate::ConvertString(cons</span>
<a href="#l112.4"></a><span id="l112.4">   nsCString  lang;</span>
<a href="#l112.5"></a><span id="l112.5"> </span>
<a href="#l112.6"></a><span id="l112.6">   if (mimeHeader) {</span>
<a href="#l112.7"></a><span id="l112.7">     // add the charset and language</span>
<a href="#l112.8"></a><span id="l112.8">     pTrans-&gt;GetCharset(set);</span>
<a href="#l112.9"></a><span id="l112.9">     pTrans-&gt;GetLanguage(lang);</span>
<a href="#l112.10"></a><span id="l112.10">   }</span>
<a href="#l112.11"></a><span id="l112.11"> </span>
<a href="#l112.12"></a><span id="l112.12" class="difflineminus">-  // Unfortunatly, we didn't implement ConvertBuffer for all translators,</span>
<a href="#l112.13"></a><span id="l112.13" class="difflineplus">+  // Unfortunately, we didn't implement ConvertBuffer for all translators,</span>
<a href="#l112.14"></a><span id="l112.14">   // just ConvertToFile.  This means that this data will not always</span>
<a href="#l112.15"></a><span id="l112.15">   // be converted to the charset of pTrans.  In that case...</span>
<a href="#l112.16"></a><span id="l112.16">   // We don't always have the data in the same charset as the current</span>
<a href="#l112.17"></a><span id="l112.17">   // translator...</span>
<a href="#l112.18"></a><span id="l112.18">   // It is safer to leave the charset and language field blank</span>
<a href="#l112.19"></a><span id="l112.19">   set.Truncate();</span>
<a href="#l112.20"></a><span id="l112.20">   lang.Truncate();</span>
<a href="#l112.21"></a><span id="l112.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l113.1"></a><span id="l113.1" class="difflineminus">--- a/mailnews/import/src/nsImportTranslator.h</span>
<a href="#l113.2"></a><span id="l113.2" class="difflineplus">+++ b/mailnews/import/src/nsImportTranslator.h</span>
<a href="#l113.3"></a><span id="l113.3" class="difflineat">@@ -29,26 +29,26 @@ public:</span>
<a href="#l113.4"></a><span id="l113.4">   virtual bool      ConvertToFile(const uint8_t * pIn, uint32_t inLen, ImportOutFile *pOutFile, uint32_t *pProcessed = nullptr);</span>
<a href="#l113.5"></a><span id="l113.5">   virtual bool      FinishConvertToFile(ImportOutFile * /* pOutFile */) { return true;}</span>
<a href="#l113.6"></a><span id="l113.6"> </span>
<a href="#l113.7"></a><span id="l113.7">   virtual void  GetCharset(nsCString&amp; charSet) { charSet = &quot;us-ascii&quot;;}</span>
<a href="#l113.8"></a><span id="l113.8">   virtual void  GetLanguage(nsCString&amp; lang) { lang = &quot;en&quot;;}</span>
<a href="#l113.9"></a><span id="l113.9">   virtual void  GetEncoding(nsCString&amp; encoding) { encoding.Truncate();}</span>
<a href="#l113.10"></a><span id="l113.10"> };</span>
<a href="#l113.11"></a><span id="l113.11"> </span>
<a href="#l113.12"></a><span id="l113.12" class="difflineminus">-// Specialized encoder, not a vaild language translator, used for Mime headers.</span>
<a href="#l113.13"></a><span id="l113.13" class="difflineplus">+// Specialized encoder, not a valid language translator, used for Mime headers.</span>
<a href="#l113.14"></a><span id="l113.14"> // rfc2231</span>
<a href="#l113.15"></a><span id="l113.15"> class CMHTranslator : public nsImportTranslator {</span>
<a href="#l113.16"></a><span id="l113.16"> public:</span>
<a href="#l113.17"></a><span id="l113.17">   virtual uint32_t  GetMaxBufferSize(uint32_t inLen) override { return (inLen * 3) + 1;}</span>
<a href="#l113.18"></a><span id="l113.18">   virtual void    ConvertBuffer(const uint8_t * pIn, uint32_t inLen, uint8_t * pOut) override;</span>
<a href="#l113.19"></a><span id="l113.19">   virtual bool      ConvertToFile(const uint8_t * pIn, uint32_t inLen, ImportOutFile *pOutFile, uint32_t *pProcessed = nullptr) override;</span>
<a href="#l113.20"></a><span id="l113.20"> };</span>
<a href="#l113.21"></a><span id="l113.21"> </span>
<a href="#l113.22"></a><span id="l113.22" class="difflineminus">-// Specialized encoder, not a vaild language translator, used for mail headers</span>
<a href="#l113.23"></a><span id="l113.23" class="difflineplus">+// Specialized encoder, not a valid language translator, used for mail headers</span>
<a href="#l113.24"></a><span id="l113.24"> // rfc2047</span>
<a href="#l113.25"></a><span id="l113.25"> class C2047Translator : public nsImportTranslator {</span>
<a href="#l113.26"></a><span id="l113.26"> public:</span>
<a href="#l113.27"></a><span id="l113.27">   virtual ~C2047Translator() {}</span>
<a href="#l113.28"></a><span id="l113.28"> </span>
<a href="#l113.29"></a><span id="l113.29">   C2047Translator(const char *pCharset, uint32_t headerLen) { m_charset = pCharset; m_startLen = headerLen; m_useQuotedPrintable = false;}</span>
<a href="#l113.30"></a><span id="l113.30"> </span>
<a href="#l113.31"></a><span id="l113.31">   void  SetUseQuotedPrintable(void) { m_useQuotedPrintable = true;}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l114.1"></a><span id="l114.1" class="difflineminus">--- a/mailnews/import/text/src/nsTextAddress.cpp</span>
<a href="#l114.2"></a><span id="l114.2" class="difflineplus">+++ b/mailnews/import/text/src/nsTextAddress.cpp</span>
<a href="#l114.3"></a><span id="l114.3" class="difflineat">@@ -102,17 +102,17 @@ nsresult nsTextAddress::ImportAddresses(</span>
<a href="#l114.4"></a><span id="l114.4">   // Skip the first record if the user has requested it.</span>
<a href="#l114.5"></a><span id="l114.5">   if (skipRecord)</span>
<a href="#l114.6"></a><span id="l114.6">     rv = ReadRecord(lineStream, line, &amp;more);</span>
<a href="#l114.7"></a><span id="l114.7"> </span>
<a href="#l114.8"></a><span id="l114.8">   while (!(*pAbort) &amp;&amp; more &amp;&amp; NS_SUCCEEDED(rv)) {</span>
<a href="#l114.9"></a><span id="l114.9">     // Read the line in</span>
<a href="#l114.10"></a><span id="l114.10">     rv = ReadRecord(lineStream, line, &amp;more);</span>
<a href="#l114.11"></a><span id="l114.11">     if (NS_SUCCEEDED(rv)) {</span>
<a href="#l114.12"></a><span id="l114.12" class="difflineminus">-      // Now proces it to add it to the database</span>
<a href="#l114.13"></a><span id="l114.13" class="difflineplus">+      // Now process it to add it to the database</span>
<a href="#l114.14"></a><span id="l114.14">       rv = ProcessLine(line, errors);</span>
<a href="#l114.15"></a><span id="l114.15"> </span>
<a href="#l114.16"></a><span id="l114.16">       if (NS_FAILED(rv)) {</span>
<a href="#l114.17"></a><span id="l114.17">         IMPORT_LOG0(&quot;*** Error processing text record.\n&quot;);</span>
<a href="#l114.18"></a><span id="l114.18">       }</span>
<a href="#l114.19"></a><span id="l114.19">     }</span>
<a href="#l114.20"></a><span id="l114.20">     if (NS_SUCCEEDED(rv) &amp;&amp; pProgress) {</span>
<a href="#l114.21"></a><span id="l114.21">       // This won't be totally accurate, but its the best we can do</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l115.1"></a><span id="l115.1" class="difflineminus">--- a/mailnews/import/text/src/nsTextImport.h</span>
<a href="#l115.2"></a><span id="l115.2" class="difflineplus">+++ b/mailnews/import/text/src/nsTextImport.h</span>
<a href="#l115.3"></a><span id="l115.3" class="difflineat">@@ -21,17 +21,17 @@</span>
<a href="#l115.4"></a><span id="l115.4"> class nsTextImport : public nsIImportModule</span>
<a href="#l115.5"></a><span id="l115.5"> {</span>
<a href="#l115.6"></a><span id="l115.6"> public:</span>
<a href="#l115.7"></a><span id="l115.7">   nsTextImport();</span>
<a href="#l115.8"></a><span id="l115.8"> </span>
<a href="#l115.9"></a><span id="l115.9">   NS_DECL_ISUPPORTS</span>
<a href="#l115.10"></a><span id="l115.10"> </span>
<a href="#l115.11"></a><span id="l115.11">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l115.12"></a><span id="l115.12" class="difflineminus">-  // we suppport the nsIImportModule interface</span>
<a href="#l115.13"></a><span id="l115.13" class="difflineplus">+  // we support the nsIImportModule interface</span>
<a href="#l115.14"></a><span id="l115.14">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l115.15"></a><span id="l115.15"> </span>
<a href="#l115.16"></a><span id="l115.16">   NS_DECL_NSIIMPORTMODULE</span>
<a href="#l115.17"></a><span id="l115.17"> </span>
<a href="#l115.18"></a><span id="l115.18"> protected:</span>
<a href="#l115.19"></a><span id="l115.19">   virtual ~nsTextImport();</span>
<a href="#l115.20"></a><span id="l115.20">   nsCOMPtr&lt;nsIStringBundle&gt;   m_stringBundle;</span>
<a href="#l115.21"></a><span id="l115.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l116.1"></a><span id="l116.1" class="difflineminus">--- a/mailnews/import/vcard/src/nsVCardImport.h</span>
<a href="#l116.2"></a><span id="l116.2" class="difflineplus">+++ b/mailnews/import/vcard/src/nsVCardImport.h</span>
<a href="#l116.3"></a><span id="l116.3" class="difflineat">@@ -20,17 +20,17 @@ class nsVCardImport : public nsIImportMo</span>
<a href="#l116.4"></a><span id="l116.4"> {</span>
<a href="#l116.5"></a><span id="l116.5"> public:</span>
<a href="#l116.6"></a><span id="l116.6"> </span>
<a href="#l116.7"></a><span id="l116.7">   nsVCardImport();</span>
<a href="#l116.8"></a><span id="l116.8"> </span>
<a href="#l116.9"></a><span id="l116.9">   NS_DECL_ISUPPORTS</span>
<a href="#l116.10"></a><span id="l116.10"> </span>
<a href="#l116.11"></a><span id="l116.11">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l116.12"></a><span id="l116.12" class="difflineminus">-  // we suppport the nsIImportModule interface</span>
<a href="#l116.13"></a><span id="l116.13" class="difflineplus">+  // we support the nsIImportModule interface</span>
<a href="#l116.14"></a><span id="l116.14">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l116.15"></a><span id="l116.15"> </span>
<a href="#l116.16"></a><span id="l116.16">   NS_DECL_NSIIMPORTMODULE</span>
<a href="#l116.17"></a><span id="l116.17"> </span>
<a href="#l116.18"></a><span id="l116.18"> protected:</span>
<a href="#l116.19"></a><span id="l116.19">   virtual ~nsVCardImport();</span>
<a href="#l116.20"></a><span id="l116.20">   nsCOMPtr&lt;nsIStringBundle&gt; m_stringBundle;</span>
<a href="#l116.21"></a><span id="l116.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l117.1"></a><span id="l117.1" class="difflineminus">--- a/mailnews/import/winlivemail/nsWMImport.h</span>
<a href="#l117.2"></a><span id="l117.2" class="difflineplus">+++ b/mailnews/import/winlivemail/nsWMImport.h</span>
<a href="#l117.3"></a><span id="l117.3" class="difflineat">@@ -21,17 +21,17 @@ class nsWMImport : public nsIImportModul</span>
<a href="#l117.4"></a><span id="l117.4"> {</span>
<a href="#l117.5"></a><span id="l117.5"> public:</span>
<a href="#l117.6"></a><span id="l117.6"> </span>
<a href="#l117.7"></a><span id="l117.7">   nsWMImport();</span>
<a href="#l117.8"></a><span id="l117.8"> </span>
<a href="#l117.9"></a><span id="l117.9">   NS_DECL_ISUPPORTS</span>
<a href="#l117.10"></a><span id="l117.10"> </span>
<a href="#l117.11"></a><span id="l117.11">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l117.12"></a><span id="l117.12" class="difflineminus">-  // we suppport the nsIImportModule interface</span>
<a href="#l117.13"></a><span id="l117.13" class="difflineplus">+  // we support the nsIImportModule interface</span>
<a href="#l117.14"></a><span id="l117.14">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l117.15"></a><span id="l117.15"> </span>
<a href="#l117.16"></a><span id="l117.16">   NS_DECL_NSIIMPORTMODULE</span>
<a href="#l117.17"></a><span id="l117.17"> </span>
<a href="#l117.18"></a><span id="l117.18"> protected:</span>
<a href="#l117.19"></a><span id="l117.19">   virtual ~nsWMImport();</span>
<a href="#l117.20"></a><span id="l117.20"> };</span>
<a href="#l117.21"></a><span id="l117.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l118.1"></a><span id="l118.1" class="difflineminus">--- a/mailnews/intl/charsetalias.properties</span>
<a href="#l118.2"></a><span id="l118.2" class="difflineplus">+++ b/mailnews/intl/charsetalias.properties</span>
<a href="#l118.3"></a><span id="l118.3" class="difflineat">@@ -85,15 +85,15 @@ iso-10646-ucs-basic=UTF-16BE</span>
<a href="#l118.4"></a><span id="l118.4"> csunicodeascii=UTF-16BE</span>
<a href="#l118.5"></a><span id="l118.5"> iso-10646-unicode-latin1=UTF-16BE</span>
<a href="#l118.6"></a><span id="l118.6"> csunicodelatin1=UTF-16BE</span>
<a href="#l118.7"></a><span id="l118.7"> iso-10646=UTF-16BE</span>
<a href="#l118.8"></a><span id="l118.8"> iso-10646-j-1=UTF-16BE</span>
<a href="#l118.9"></a><span id="l118.9"> </span>
<a href="#l118.10"></a><span id="l118.10"> # Following names appears in unix nl_langinfo(CODESET)</span>
<a href="#l118.11"></a><span id="l118.11"> # They can be compiled as platform specific if necessary</span>
<a href="#l118.12"></a><span id="l118.12" class="difflineminus">-# DONT put things here if it does not look generic enough (like hp15CN)</span>
<a href="#l118.13"></a><span id="l118.13" class="difflineplus">+# DON'T put things here if it does not look generic enough (like hp15CN)</span>
<a href="#l118.14"></a><span id="l118.14"> iso88591=ISO-8859-1</span>
<a href="#l118.15"></a><span id="l118.15"> iso885912=ISO-8859-12</span>
<a href="#l118.16"></a><span id="l118.16"> windows-936=gbk</span>
<a href="#l118.17"></a><span id="l118.17"> ansi-1251=windows-1251</span>
<a href="#l118.18"></a><span id="l118.18"> </span>
<a href="#l118.19"></a><span id="l118.19"> cp936=gbk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l119.1"></a><span id="l119.1" class="difflineminus">--- a/mailnews/jsaccount/modules/JSAccountUtils.jsm</span>
<a href="#l119.2"></a><span id="l119.2" class="difflineplus">+++ b/mailnews/jsaccount/modules/JSAccountUtils.jsm</span>
<a href="#l119.3"></a><span id="l119.3" class="difflineat">@@ -71,17 +71,17 @@ var log = configureLogging();</span>
<a href="#l119.4"></a><span id="l119.4">  *</span>
<a href="#l119.5"></a><span id="l119.5">  *       contractID:     string contract ID for the JS object that will be</span>
<a href="#l119.6"></a><span id="l119.6">  *                       created by the factory.</span>
<a href="#l119.7"></a><span id="l119.7">  *</span>
<a href="#l119.8"></a><span id="l119.8">  *       classID:        Components.ID(CID) for the JS object that will be</span>
<a href="#l119.9"></a><span id="l119.9">  *                       created by the factory, where CID is a string uuid.</span>
<a href="#l119.10"></a><span id="l119.10">  *      }</span>
<a href="#l119.11"></a><span id="l119.11">  *</span>
<a href="#l119.12"></a><span id="l119.12" class="difflineminus">- *   @param aJsDelegateConstructor: a JS contructor class, called using new,</span>
<a href="#l119.13"></a><span id="l119.13" class="difflineplus">+ *   @param aJsDelegateConstructor: a JS constructor class, called using new,</span>
<a href="#l119.14"></a><span id="l119.14">  *                                  that will create the JS object to which</span>
<a href="#l119.15"></a><span id="l119.15">  *                                  XPCOM methods calls will be delegated.</span>
<a href="#l119.16"></a><span id="l119.16">  */</span>
<a href="#l119.17"></a><span id="l119.17"> </span>
<a href="#l119.18"></a><span id="l119.18"> JSAccountUtils.jaFactory = function (aProperties, aJsDelegateConstructor)</span>
<a href="#l119.19"></a><span id="l119.19"> {</span>
<a href="#l119.20"></a><span id="l119.20">   let factory = {};</span>
<a href="#l119.21"></a><span id="l119.21">   factory.QueryInterface = XPCOMUtils.generateQI([Ci.nsIFactory]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l120.1"></a><span id="l120.1" class="difflineminus">--- a/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l120.2"></a><span id="l120.2" class="difflineplus">+++ b/mailnews/local/src/nsLocalMailFolder.cpp</span>
<a href="#l120.3"></a><span id="l120.3" class="difflineat">@@ -2970,17 +2970,17 @@ nsMsgLocalMailFolder::MarkMsgsOnPop3Serv</span>
<a href="#l120.4"></a><span id="l120.4">   return rv;</span>
<a href="#l120.5"></a><span id="l120.5"> }</span>
<a href="#l120.6"></a><span id="l120.6"> </span>
<a href="#l120.7"></a><span id="l120.7"> NS_IMETHODIMP nsMsgLocalMailFolder::DeleteDownloadMsg(nsIMsgDBHdr *aMsgHdr, bool *aDoSelect)</span>
<a href="#l120.8"></a><span id="l120.8"> {</span>
<a href="#l120.9"></a><span id="l120.9">   uint32_t numMsgs;</span>
<a href="#l120.10"></a><span id="l120.10">   char *newMsgId;</span>
<a href="#l120.11"></a><span id="l120.11"> </span>
<a href="#l120.12"></a><span id="l120.12" class="difflineminus">-  // This method is only invoked thru DownloadMessagesForOffline()</span>
<a href="#l120.13"></a><span id="l120.13" class="difflineplus">+  // This method is only invoked through DownloadMessagesForOffline()</span>
<a href="#l120.14"></a><span id="l120.14">   if (mDownloadState != DOWNLOAD_STATE_NONE)</span>
<a href="#l120.15"></a><span id="l120.15">   {</span>
<a href="#l120.16"></a><span id="l120.16">     // We only remember the first key, no matter how many</span>
<a href="#l120.17"></a><span id="l120.17">     // messages were originally selected.</span>
<a href="#l120.18"></a><span id="l120.18">     if (mDownloadState == DOWNLOAD_STATE_INITED)</span>
<a href="#l120.19"></a><span id="l120.19">     {</span>
<a href="#l120.20"></a><span id="l120.20">       aMsgHdr-&gt;GetMessageKey(&amp;mDownloadSelectKey);</span>
<a href="#l120.21"></a><span id="l120.21">       mDownloadState = DOWNLOAD_STATE_GOTMSG;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l121.1"></a><span id="l121.1" class="difflineminus">--- a/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l121.2"></a><span id="l121.2" class="difflineplus">+++ b/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l121.3"></a><span id="l121.3" class="difflineat">@@ -217,17 +217,17 @@ nsresult nsMailboxProtocol::Initialize(n</span>
<a href="#l121.4"></a><span id="l121.4">   mCurrentProgress = 0;</span>
<a href="#l121.5"></a><span id="l121.5"> </span>
<a href="#l121.6"></a><span id="l121.6">   // do we really need both?</span>
<a href="#l121.7"></a><span id="l121.7">   m_tempMessageFile = m_tempMsgFile;</span>
<a href="#l121.8"></a><span id="l121.8">   return rv;</span>
<a href="#l121.9"></a><span id="l121.9"> }</span>
<a href="#l121.10"></a><span id="l121.10"> </span>
<a href="#l121.11"></a><span id="l121.11"> /////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l121.12"></a><span id="l121.12" class="difflineminus">-// we suppport the nsIStreamListener interface</span>
<a href="#l121.13"></a><span id="l121.13" class="difflineplus">+// we support the nsIStreamListener interface</span>
<a href="#l121.14"></a><span id="l121.14"> ////////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l121.15"></a><span id="l121.15"> </span>
<a href="#l121.16"></a><span id="l121.16"> NS_IMETHODIMP nsMailboxProtocol::OnStartRequest(nsIRequest *request, nsISupports *ctxt)</span>
<a href="#l121.17"></a><span id="l121.17"> {</span>
<a href="#l121.18"></a><span id="l121.18">   // extract the appropriate event sinks from the url and initialize them in our protocol data</span>
<a href="#l121.19"></a><span id="l121.19">   // the URL should be queried for a nsINewsURL. If it doesn't support a news URL interface then</span>
<a href="#l121.20"></a><span id="l121.20">   // we have an error.</span>
<a href="#l121.21"></a><span id="l121.21">   if (m_nextState == MAILBOX_READ_FOLDER &amp;&amp; m_mailboxParser)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l122.1"></a><span id="l122.1" class="difflineminus">--- a/mailnews/local/src/nsMailboxProtocol.h</span>
<a href="#l122.2"></a><span id="l122.2" class="difflineplus">+++ b/mailnews/local/src/nsMailboxProtocol.h</span>
<a href="#l122.3"></a><span id="l122.3" class="difflineat">@@ -54,25 +54,25 @@ public:</span>
<a href="#l122.4"></a><span id="l122.4"> </span>
<a href="#l122.5"></a><span id="l122.5">   // initialization function given a new url and transport layer</span>
<a href="#l122.6"></a><span id="l122.6">   nsresult Initialize(nsIURI * aURL);</span>
<a href="#l122.7"></a><span id="l122.7"> </span>
<a href="#l122.8"></a><span id="l122.8">   // the consumer of the url might be something like an nsIDocShell....</span>
<a href="#l122.9"></a><span id="l122.9">   virtual nsresult LoadUrl(nsIURI * aURL, nsISupports * aConsumer) override;</span>
<a href="#l122.10"></a><span id="l122.10"> </span>
<a href="#l122.11"></a><span id="l122.11">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l122.12"></a><span id="l122.12" class="difflineminus">-  // we suppport the nsIStreamListener interface</span>
<a href="#l122.13"></a><span id="l122.13" class="difflineplus">+  // we support the nsIStreamListener interface</span>
<a href="#l122.14"></a><span id="l122.14">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l122.15"></a><span id="l122.15"> </span>
<a href="#l122.16"></a><span id="l122.16">   NS_IMETHOD OnStartRequest(nsIRequest *request, nsISupports *ctxt) override;</span>
<a href="#l122.17"></a><span id="l122.17">   NS_IMETHOD OnStopRequest(nsIRequest *request, nsISupports *ctxt, nsresult aStatus) override;</span>
<a href="#l122.18"></a><span id="l122.18"> </span>
<a href="#l122.19"></a><span id="l122.19"> private:</span>
<a href="#l122.20"></a><span id="l122.20">   nsCOMPtr&lt;nsIMailboxUrl&gt;  m_runningUrl; // the nsIMailboxURL that is currently running</span>
<a href="#l122.21"></a><span id="l122.21" class="difflineminus">-  nsMailboxAction m_mailboxAction; // current mailbox action associated with this connnection...</span>
<a href="#l122.22"></a><span id="l122.22" class="difflineplus">+  nsMailboxAction m_mailboxAction; // current mailbox action associated with this connection...</span>
<a href="#l122.23"></a><span id="l122.23">   uint64_t m_msgOffset;</span>
<a href="#l122.24"></a><span id="l122.24">   // Event sink handles</span>
<a href="#l122.25"></a><span id="l122.25">   nsCOMPtr&lt;nsIStreamListener&gt; m_mailboxParser;</span>
<a href="#l122.26"></a><span id="l122.26"> </span>
<a href="#l122.27"></a><span id="l122.27">   // Local state for the current operation</span>
<a href="#l122.28"></a><span id="l122.28">   nsMsgLineStreamBuffer   * m_lineStreamBuffer; // used to efficiently extract lines from the incoming data stream</span>
<a href="#l122.29"></a><span id="l122.29"> </span>
<a href="#l122.30"></a><span id="l122.30">   // Generic state information -- What state are we in? What state do we want to go to</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l123.1"></a><span id="l123.1" class="difflineminus">--- a/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l123.2"></a><span id="l123.2" class="difflineplus">+++ b/mailnews/local/src/nsMovemailService.cpp</span>
<a href="#l123.3"></a><span id="l123.3" class="difflineat">@@ -182,17 +182,17 @@ SpoolLock::isLocked() {</span>
<a href="#l123.4"></a><span id="l123.4"> }</span>
<a href="#l123.5"></a><span id="l123.5"> </span>
<a href="#l123.6"></a><span id="l123.6"> bool</span>
<a href="#l123.7"></a><span id="l123.7"> SpoolLock::ObtainSpoolLock(unsigned int aSeconds /* number of seconds to retry */)</span>
<a href="#l123.8"></a><span id="l123.8"> {</span>
<a href="#l123.9"></a><span id="l123.9">   /*</span>
<a href="#l123.10"></a><span id="l123.10">    * Locking procedures:</span>
<a href="#l123.11"></a><span id="l123.11">    * If the directory is not writable, we want to use the appropriate system</span>
<a href="#l123.12"></a><span id="l123.12" class="difflineminus">-   * utilites to lock the file.</span>
<a href="#l123.13"></a><span id="l123.13" class="difflineplus">+   * utilities to lock the file.</span>
<a href="#l123.14"></a><span id="l123.14">    * If the directory is writable, we want to go through the create-and-link</span>
<a href="#l123.15"></a><span id="l123.15">    * locking procedures to make it atomic for certain networked file systems.</span>
<a href="#l123.16"></a><span id="l123.16">    * This involves creating a .mozlock file and attempting to hard-link it to</span>
<a href="#l123.17"></a><span id="l123.17">    * the customary .lock file.</span>
<a href="#l123.18"></a><span id="l123.18">    */</span>
<a href="#l123.19"></a><span id="l123.19">   nsCOMPtr&lt;nsIFile&gt; spoolFile;</span>
<a href="#l123.20"></a><span id="l123.20">   nsresult rv = NS_NewNativeLocalFile(mSpoolName,</span>
<a href="#l123.21"></a><span id="l123.21">                                       true,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l124.1"></a><span id="l124.1" class="difflineminus">--- a/mailnews/local/src/nsParseMailbox.h</span>
<a href="#l124.2"></a><span id="l124.2" class="difflineplus">+++ b/mailnews/local/src/nsParseMailbox.h</span>
<a href="#l124.3"></a><span id="l124.3" class="difflineat">@@ -135,17 +135,17 @@ public:</span>
<a href="#l124.4"></a><span id="l124.4">   nsMsgMailboxParser(nsIMsgFolder *);</span>
<a href="#l124.5"></a><span id="l124.5">   nsMsgMailboxParser();</span>
<a href="#l124.6"></a><span id="l124.6">   nsresult Init();</span>
<a href="#l124.7"></a><span id="l124.7"> </span>
<a href="#l124.8"></a><span id="l124.8">   bool    IsRunningUrl() { return m_urlInProgress;} // returns true if we are currently running a url and false otherwise...</span>
<a href="#l124.9"></a><span id="l124.9">   NS_DECL_ISUPPORTS_INHERITED</span>
<a href="#l124.10"></a><span id="l124.10"> </span>
<a href="#l124.11"></a><span id="l124.11">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l124.12"></a><span id="l124.12" class="difflineminus">-  // we suppport the nsIStreamListener interface</span>
<a href="#l124.13"></a><span id="l124.13" class="difflineplus">+  // we support the nsIStreamListener interface</span>
<a href="#l124.14"></a><span id="l124.14">   ////////////////////////////////////////////////////////////////////////////////////////</span>
<a href="#l124.15"></a><span id="l124.15">   NS_DECL_NSIREQUESTOBSERVER</span>
<a href="#l124.16"></a><span id="l124.16">   NS_DECL_NSISTREAMLISTENER</span>
<a href="#l124.17"></a><span id="l124.17"> </span>
<a href="#l124.18"></a><span id="l124.18">   void    SetDB (nsIMsgDatabase *mailDB) {m_mailDB = mailDB; }</span>
<a href="#l124.19"></a><span id="l124.19"> </span>
<a href="#l124.20"></a><span id="l124.20">   // message socket libnet callbacks, which come through folder pane</span>
<a href="#l124.21"></a><span id="l124.21">   nsresult ProcessMailboxInputStream(nsIURI* aURL, nsIInputStream *aIStream, uint32_t aLength);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l125.1"></a><span id="l125.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l125.2"></a><span id="l125.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Protocol.cpp</span>
<a href="#l125.3"></a><span id="l125.3" class="difflineat">@@ -738,17 +738,17 @@ nsresult nsPop3Protocol::StartGetAsyncPa</span>
<a href="#l125.4"></a><span id="l125.4">     if (NS_SUCCEEDED(rv) &amp;&amp; !m_passwordResult.IsEmpty())</span>
<a href="#l125.5"></a><span id="l125.5">     {</span>
<a href="#l125.6"></a><span id="l125.6">       m_pop3ConData-&gt;next_state = GetNextPasswordObtainState();</span>
<a href="#l125.7"></a><span id="l125.7">       return NS_OK;</span>
<a href="#l125.8"></a><span id="l125.8">     }</span>
<a href="#l125.9"></a><span id="l125.9">   }</span>
<a href="#l125.10"></a><span id="l125.10"> </span>
<a href="#l125.11"></a><span id="l125.11">   // We're now going to need to do something that will end up with us either</span>
<a href="#l125.12"></a><span id="l125.12" class="difflineminus">-  // poking the login manger or prompting the user. We need to ensure we only</span>
<a href="#l125.13"></a><span id="l125.13" class="difflineplus">+  // poking the login manager or prompting the user. We need to ensure we only</span>
<a href="#l125.14"></a><span id="l125.14">   // do one prompt at a time (and loging manager could cause a master password</span>
<a href="#l125.15"></a><span id="l125.15">   // prompt), so we need to use the async prompter.</span>
<a href="#l125.16"></a><span id="l125.16">   nsCOMPtr&lt;nsIMsgAsyncPrompter&gt; asyncPrompter =</span>
<a href="#l125.17"></a><span id="l125.17">     do_GetService(NS_MSGASYNCPROMPTER_CONTRACTID, &amp;rv);</span>
<a href="#l125.18"></a><span id="l125.18">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l125.19"></a><span id="l125.19"> </span>
<a href="#l125.20"></a><span id="l125.20">   m_pop3ConData-&gt;next_state = aNextState;</span>
<a href="#l125.21"></a><span id="l125.21"> </span>
<a href="#l125.22"></a><span id="l125.22" class="difflineat">@@ -756,17 +756,17 @@ nsresult nsPop3Protocol::StartGetAsyncPa</span>
<a href="#l125.23"></a><span id="l125.23">   // the async prompt run. Once it is our turn again we'll call back into</span>
<a href="#l125.24"></a><span id="l125.24">   // ProcessProtocolState.</span>
<a href="#l125.25"></a><span id="l125.25">   m_pop3ConData-&gt;pause_for_read = true;</span>
<a href="#l125.26"></a><span id="l125.26"> </span>
<a href="#l125.27"></a><span id="l125.27">   nsCString server(&quot;unknown&quot;);</span>
<a href="#l125.28"></a><span id="l125.28">   m_url-&gt;GetPrePath(server);</span>
<a href="#l125.29"></a><span id="l125.29"> </span>
<a href="#l125.30"></a><span id="l125.30">   rv = asyncPrompter-&gt;QueueAsyncAuthPrompt(server, false, this);</span>
<a href="#l125.31"></a><span id="l125.31" class="difflineminus">-  // Explict NS_ENSURE_SUCCESS for debug purposes as errors tend to get</span>
<a href="#l125.32"></a><span id="l125.32" class="difflineplus">+  // Explicit NS_ENSURE_SUCCESS for debug purposes as errors tend to get</span>
<a href="#l125.33"></a><span id="l125.33">   // hidden.</span>
<a href="#l125.34"></a><span id="l125.34">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l125.35"></a><span id="l125.35">   return rv;</span>
<a href="#l125.36"></a><span id="l125.36"> }</span>
<a href="#l125.37"></a><span id="l125.37"> </span>
<a href="#l125.38"></a><span id="l125.38"> NS_IMETHODIMP nsPop3Protocol::OnPromptStart(bool *aResult)</span>
<a href="#l125.39"></a><span id="l125.39"> {</span>
<a href="#l125.40"></a><span id="l125.40">   MOZ_LOG(POP3LOGMODULE, LogLevel::Debug, (POP3LOG(&quot;OnPromptStart()&quot;)));</span>
<a href="#l125.41"></a><span id="l125.41" class="difflineat">@@ -3152,17 +3152,17 @@ int32_t nsPop3Protocol::GetMsg()</span>
<a href="#l125.42"></a><span id="l125.42">     if (m_pop3ConData-&gt;next_state == POP3_GET_MSG)</span>
<a href="#l125.43"></a><span id="l125.43">       m_pop3ConData-&gt;last_accessed_msg++;</span>
<a href="#l125.44"></a><span id="l125.44">     // Make sure we check the next message next time!</span>
<a href="#l125.45"></a><span id="l125.45">   }</span>
<a href="#l125.46"></a><span id="l125.46">   return 0;</span>
<a href="#l125.47"></a><span id="l125.47"> }</span>
<a href="#l125.48"></a><span id="l125.48"> </span>
<a href="#l125.49"></a><span id="l125.49"> </span>
<a href="#l125.50"></a><span id="l125.50" class="difflineminus">-/* start retreiving just the first 20 lines</span>
<a href="#l125.51"></a><span id="l125.51" class="difflineplus">+/* start retrieving just the first 20 lines</span>
<a href="#l125.52"></a><span id="l125.52">  */</span>
<a href="#l125.53"></a><span id="l125.53"> int32_t nsPop3Protocol::SendTop()</span>
<a href="#l125.54"></a><span id="l125.54"> {</span>
<a href="#l125.55"></a><span id="l125.55">    char * cmd = PR_smprintf( &quot;TOP %ld %d&quot; CRLF,</span>
<a href="#l125.56"></a><span id="l125.56">      m_pop3ConData-&gt;msg_info[m_pop3ConData-&gt;last_accessed_msg].msgnum,</span>
<a href="#l125.57"></a><span id="l125.57">      m_pop3ConData-&gt;headers_only ? 0 : 20);</span>
<a href="#l125.58"></a><span id="l125.58">    int32_t status = -1;</span>
<a href="#l125.59"></a><span id="l125.59">    if (cmd)</span>
<a href="#l125.60"></a><span id="l125.60" class="difflineat">@@ -3211,17 +3211,17 @@ int32_t nsPop3Protocol::XsenderResponse(</span>
<a href="#l125.61"></a><span id="l125.61"> </span>
<a href="#l125.62"></a><span id="l125.62">     if (m_pop3ConData-&gt;truncating_cur_msg)</span>
<a href="#l125.63"></a><span id="l125.63">         m_pop3ConData-&gt;next_state = POP3_SEND_TOP;</span>
<a href="#l125.64"></a><span id="l125.64">     else</span>
<a href="#l125.65"></a><span id="l125.65">         m_pop3ConData-&gt;next_state = POP3_SEND_RETR;</span>
<a href="#l125.66"></a><span id="l125.66">     return 0;</span>
<a href="#l125.67"></a><span id="l125.67"> }</span>
<a href="#l125.68"></a><span id="l125.68"> </span>
<a href="#l125.69"></a><span id="l125.69" class="difflineminus">-/* retreive the whole message</span>
<a href="#l125.70"></a><span id="l125.70" class="difflineplus">+/* retrieve the whole message</span>
<a href="#l125.71"></a><span id="l125.71">  */</span>
<a href="#l125.72"></a><span id="l125.72"> int32_t</span>
<a href="#l125.73"></a><span id="l125.73"> nsPop3Protocol::SendRetr()</span>
<a href="#l125.74"></a><span id="l125.74"> {</span>
<a href="#l125.75"></a><span id="l125.75"> </span>
<a href="#l125.76"></a><span id="l125.76">   char * cmd = PR_smprintf(&quot;RETR %ld&quot; CRLF, m_pop3ConData-&gt;msg_info[m_pop3ConData-&gt;last_accessed_msg].msgnum);</span>
<a href="#l125.77"></a><span id="l125.77">   int32_t status = -1;</span>
<a href="#l125.78"></a><span id="l125.78">   if (cmd)</span>
<a href="#l125.79"></a><span id="l125.79" class="difflineat">@@ -3593,17 +3593,17 @@ nsPop3Protocol::HandleLine(char *line, u</span>
<a href="#l125.80"></a><span id="l125.80">             }</span>
<a href="#l125.81"></a><span id="l125.81"> </span>
<a href="#l125.82"></a><span id="l125.82">             m_pop3ConData-&gt;msg_closure = nullptr;</span>
<a href="#l125.83"></a><span id="l125.83">             return rv;</span>
<a href="#l125.84"></a><span id="l125.84">         }</span>
<a href="#l125.85"></a><span id="l125.85">     }</span>
<a href="#l125.86"></a><span id="l125.86">     /* Check if the line begins with the termination octet. If so</span>
<a href="#l125.87"></a><span id="l125.87">        and if another termination octet follows, we step over the</span>
<a href="#l125.88"></a><span id="l125.88" class="difflineminus">-       first occurence of it. */</span>
<a href="#l125.89"></a><span id="l125.89" class="difflineplus">+       first occurrence of it. */</span>
<a href="#l125.90"></a><span id="l125.90">     else if (line_length &gt; 1 &amp;&amp; line[0] == '.' &amp;&amp; line[1] == '.') {</span>
<a href="#l125.91"></a><span id="l125.91">         line++;</span>
<a href="#l125.92"></a><span id="l125.92">         line_length--;</span>
<a href="#l125.93"></a><span id="l125.93"> </span>
<a href="#l125.94"></a><span id="l125.94">     }</span>
<a href="#l125.95"></a><span id="l125.95"> </span>
<a href="#l125.96"></a><span id="l125.96">     return m_nsIPop3Sink-&gt;IncorporateWrite(line, line_length);</span>
<a href="#l125.97"></a><span id="l125.97"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l126.1"></a><span id="l126.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Service.h</span>
<a href="#l126.2"></a><span id="l126.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Service.h</span>
<a href="#l126.3"></a><span id="l126.3" class="difflineat">@@ -34,17 +34,17 @@ public:</span>
<a href="#l126.4"></a><span id="l126.4"> protected:</span>
<a href="#l126.5"></a><span id="l126.5">   virtual ~nsPop3Service();</span>
<a href="#l126.6"></a><span id="l126.6">   nsresult GetMail(bool downloadNewMail,</span>
<a href="#l126.7"></a><span id="l126.7">                    nsIMsgWindow* aMsgWindow,</span>
<a href="#l126.8"></a><span id="l126.8">                    nsIUrlListener * aUrlListener,</span>
<a href="#l126.9"></a><span id="l126.9">                    nsIMsgFolder *inbox,</span>
<a href="#l126.10"></a><span id="l126.10">                    nsIPop3IncomingServer *popServer,</span>
<a href="#l126.11"></a><span id="l126.11">                    nsIURI ** aURL);</span>
<a href="#l126.12"></a><span id="l126.12" class="difflineminus">-  // convience function to make constructing of the pop3 url easier...</span>
<a href="#l126.13"></a><span id="l126.13" class="difflineplus">+  // convenience function to make constructing of the pop3 url easier...</span>
<a href="#l126.14"></a><span id="l126.14">   nsresult BuildPop3Url(const char * urlSpec, nsIMsgFolder *inbox,</span>
<a href="#l126.15"></a><span id="l126.15">                     nsIPop3IncomingServer *, nsIUrlListener * aUrlListener,</span>
<a href="#l126.16"></a><span id="l126.16">                     nsIURI ** aUrl, nsIMsgWindow *aMsgWindow);</span>
<a href="#l126.17"></a><span id="l126.17"> </span>
<a href="#l126.18"></a><span id="l126.18">   nsresult RunPopUrl(nsIMsgIncomingServer * aServer, nsIURI * aUrlToRun);</span>
<a href="#l126.19"></a><span id="l126.19">   void AlertServerBusy(nsIMsgMailNewsUrl *url);</span>
<a href="#l126.20"></a><span id="l126.20">   nsTObserverArray&lt;nsCOMPtr&lt;nsIPop3ServiceListener&gt; &gt; mListeners;</span>
<a href="#l126.21"></a><span id="l126.21"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l127.1"></a><span id="l127.1" class="difflineminus">--- a/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l127.2"></a><span id="l127.2" class="difflineplus">+++ b/mailnews/local/src/nsPop3Sink.cpp</span>
<a href="#l127.3"></a><span id="l127.3" class="difflineat">@@ -109,32 +109,32 @@ partialRecord::partialRecord() :</span>
<a href="#l127.4"></a><span id="l127.4"> {</span>
<a href="#l127.5"></a><span id="l127.5"> }</span>
<a href="#l127.6"></a><span id="l127.6"> </span>
<a href="#l127.7"></a><span id="l127.7"> partialRecord::~partialRecord()</span>
<a href="#l127.8"></a><span id="l127.8"> {</span>
<a href="#l127.9"></a><span id="l127.9"> }</span>
<a href="#l127.10"></a><span id="l127.10"> </span>
<a href="#l127.11"></a><span id="l127.11"> // Walk through all the messages in this folder and look for any</span>
<a href="#l127.12"></a><span id="l127.12" class="difflineminus">-// PARTIAL messages. For each of those, dig thru the mailbox and</span>
<a href="#l127.13"></a><span id="l127.13" class="difflineplus">+// PARTIAL messages. For each of those, dig through the mailbox and</span>
<a href="#l127.14"></a><span id="l127.14"> // find the Account that the message belongs to. If that Account</span>
<a href="#l127.15"></a><span id="l127.15"> // matches the current Account, then look for the Uidl and save</span>
<a href="#l127.16"></a><span id="l127.16"> // this message for later processing.</span>
<a href="#l127.17"></a><span id="l127.17"> nsresult</span>
<a href="#l127.18"></a><span id="l127.18"> nsPop3Sink::FindPartialMessages()</span>
<a href="#l127.19"></a><span id="l127.19"> {</span>
<a href="#l127.20"></a><span id="l127.20">   nsCOMPtr&lt;nsISimpleEnumerator&gt; messages;</span>
<a href="#l127.21"></a><span id="l127.21">   bool hasMore = false;</span>
<a href="#l127.22"></a><span id="l127.22">   bool isOpen = false;</span>
<a href="#l127.23"></a><span id="l127.23">   nsLocalFolderScanState folderScanState;</span>
<a href="#l127.24"></a><span id="l127.24">   nsCOMPtr&lt;nsIMsgDatabase&gt; db;</span>
<a href="#l127.25"></a><span id="l127.25">   nsCOMPtr&lt;nsIMsgLocalMailFolder&gt; localFolder = do_QueryInterface(m_folder);</span>
<a href="#l127.26"></a><span id="l127.26">   m_folder-&gt;GetMsgDatabase(getter_AddRefs(db));</span>
<a href="#l127.27"></a><span id="l127.27">   if (!localFolder || !db)</span>
<a href="#l127.28"></a><span id="l127.28" class="difflineminus">-    return NS_ERROR_FAILURE;  // we need it to grub thru the folder</span>
<a href="#l127.29"></a><span id="l127.29" class="difflineplus">+    return NS_ERROR_FAILURE;  // we need it to grub through the folder</span>
<a href="#l127.30"></a><span id="l127.30"> </span>
<a href="#l127.31"></a><span id="l127.31">   nsresult rv = db-&gt;EnumerateMessages(getter_AddRefs(messages));</span>
<a href="#l127.32"></a><span id="l127.32">   if (messages)</span>
<a href="#l127.33"></a><span id="l127.33">     messages-&gt;HasMoreElements(&amp;hasMore);</span>
<a href="#l127.34"></a><span id="l127.34">   while(hasMore &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l127.35"></a><span id="l127.35">   {</span>
<a href="#l127.36"></a><span id="l127.36">     nsCOMPtr&lt;nsISupports&gt; aSupport;</span>
<a href="#l127.37"></a><span id="l127.37">     uint32_t flags = 0;</span>
<a href="#l127.38"></a><span id="l127.38" class="difflineat">@@ -697,17 +697,17 @@ nsresult nsPop3Sink::WriteLineToMailbox(</span>
<a href="#l127.39"></a><span id="l127.39">     // where for some reason or another we can't write to and lose the messages</span>
<a href="#l127.40"></a><span id="l127.40">     // See bug 62480</span>
<a href="#l127.41"></a><span id="l127.41">     NS_ENSURE_TRUE(m_outFileStream, NS_ERROR_OUT_OF_MEMORY);</span>
<a href="#l127.42"></a><span id="l127.42"> </span>
<a href="#l127.43"></a><span id="l127.43">     // To remove seeking to the end for each line to be written, remove the</span>
<a href="#l127.44"></a><span id="l127.44">     // following line. See bug 1116055 for details.</span>
<a href="#l127.45"></a><span id="l127.45"> #define SEEK_TO_END</span>
<a href="#l127.46"></a><span id="l127.46"> #ifdef  SEEK_TO_END</span>
<a href="#l127.47"></a><span id="l127.47" class="difflineminus">-    // seek to the end in case someone else has seeked elsewhere in our stream.</span>
<a href="#l127.48"></a><span id="l127.48" class="difflineplus">+    // seek to the end in case someone else has sought elsewhere in our stream.</span>
<a href="#l127.49"></a><span id="l127.49">     nsCOMPtr &lt;nsISeekableStream&gt; seekableOutStream = do_QueryInterface(m_outFileStream);</span>
<a href="#l127.50"></a><span id="l127.50"> </span>
<a href="#l127.51"></a><span id="l127.51">     int64_t before_seek_pos;</span>
<a href="#l127.52"></a><span id="l127.52">     nsresult rv2 = seekableOutStream-&gt;Tell(&amp;before_seek_pos);</span>
<a href="#l127.53"></a><span id="l127.53">     MOZ_ASSERT(NS_SUCCEEDED(rv2), &quot;seekableOutStream-&gt;Tell(&amp;before_seek_pos) failed&quot;);</span>
<a href="#l127.54"></a><span id="l127.54"> </span>
<a href="#l127.55"></a><span id="l127.55">     // XXX Handle error such as network error for remote file system.</span>
<a href="#l127.56"></a><span id="l127.56">     seekableOutStream-&gt;Seek(nsISeekableStream::NS_SEEK_END, 0);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l128.1"></a><span id="l128.1" class="difflineminus">--- a/mailnews/mailnews.js</span>
<a href="#l128.2"></a><span id="l128.2" class="difflineplus">+++ b/mailnews/mailnews.js</span>
<a href="#l128.3"></a><span id="l128.3" class="difflineat">@@ -96,17 +96,17 @@ pref(&quot;mail.db.idle_limit&quot;, 300000);</span>
<a href="#l128.4"></a><span id="l128.4"> // How many db's should we leave open? LRU db's will be closed first</span>
<a href="#l128.5"></a><span id="l128.5"> pref(&quot;mail.db.max_open&quot;, 30);</span>
<a href="#l128.6"></a><span id="l128.6"> </span>
<a href="#l128.7"></a><span id="l128.7"> // Should we allow folders over 4GB in size?</span>
<a href="#l128.8"></a><span id="l128.8"> pref(&quot;mailnews.allowMboxOver4GB&quot;, true);</span>
<a href="#l128.9"></a><span id="l128.9"> </span>
<a href="#l128.10"></a><span id="l128.10"> // For IMAP caching lift the limits since they are designed for HTML pages.</span>
<a href="#l128.11"></a><span id="l128.11"> // Note that the maximum size of a cache entry is limited by</span>
<a href="#l128.12"></a><span id="l128.12" class="difflineminus">-// max_entry_size and (capacity &gt;&gt; 3), so devided by 8.</span>
<a href="#l128.13"></a><span id="l128.13" class="difflineplus">+// max_entry_size and (capacity &gt;&gt; 3), so divided by 8.</span>
<a href="#l128.14"></a><span id="l128.14"> // Larger messages or attachments won't be cached.</span>
<a href="#l128.15"></a><span id="l128.15"> pref(&quot;browser.cache.memory.max_entry_size&quot;, 25000); //  25 MB</span>
<a href="#l128.16"></a><span id="l128.16"> pref(&quot;browser.cache.memory.capacity&quot;,      200000); // 200 MB = 8*25 MB</span>
<a href="#l128.17"></a><span id="l128.17"> </span>
<a href="#l128.18"></a><span id="l128.18"> pref(&quot;mail.imap.chunk_size&quot;,                65536);</span>
<a href="#l128.19"></a><span id="l128.19"> pref(&quot;mail.imap.min_chunk_size_threshold&quot;,  98304);</span>
<a href="#l128.20"></a><span id="l128.20"> pref(&quot;mail.imap.chunk_fast&quot;,                2);</span>
<a href="#l128.21"></a><span id="l128.21"> pref(&quot;mail.imap.chunk_ideal&quot;,               4);</span>
<a href="#l128.22"></a><span id="l128.22" class="difflineat">@@ -574,17 +574,17 @@ pref(&quot;mailnews.traits.enabled.1&quot;, false)</span>
<a href="#l128.23"></a><span id="l128.23"> pref(&quot;mailnews.traits.id.2&quot;, &quot;mailnews@mozilla.org#junk&quot;);</span>
<a href="#l128.24"></a><span id="l128.24"> pref(&quot;mailnews.traits.name.2&quot;, &quot;Junk&quot;);</span>
<a href="#l128.25"></a><span id="l128.25"> pref(&quot;mailnews.traits.enabled.2&quot;, true);</span>
<a href="#l128.26"></a><span id="l128.26"> pref(&quot;mailnews.traits.antiId.2&quot;, &quot;mailnews@mozilla.org#good&quot;);</span>
<a href="#l128.27"></a><span id="l128.27"> // traits 3 - 1000 are reserved for use by mailnews@mozilla.org</span>
<a href="#l128.28"></a><span id="l128.28"> // the first externally defined trait will have index 1001</span>
<a href="#l128.29"></a><span id="l128.29"> pref(&quot;mailnews.traits.lastIndex&quot;, 1000);</span>
<a href="#l128.30"></a><span id="l128.30"> </span>
<a href="#l128.31"></a><span id="l128.31" class="difflineminus">-// Adress entry will highlight input that doesn't match anything in the</span>
<a href="#l128.32"></a><span id="l128.32" class="difflineplus">+// Address entry will highlight input that doesn't match anything in the</span>
<a href="#l128.33"></a><span id="l128.33"> // address books.</span>
<a href="#l128.34"></a><span id="l128.34"> pref(&quot;mail.autoComplete.highlightNonMatches&quot;, true);</span>
<a href="#l128.35"></a><span id="l128.35"> </span>
<a href="#l128.36"></a><span id="l128.36"> // Show extra column in address entry. This is numeric for</span>
<a href="#l128.37"></a><span id="l128.37"> // historical reasons: 0 = no extra column, 1 = show extra column.</span>
<a href="#l128.38"></a><span id="l128.38"> pref(&quot;mail.autoComplete.commentColumn&quot;, 0);</span>
<a href="#l128.39"></a><span id="l128.39"> </span>
<a href="#l128.40"></a><span id="l128.40"> // if true, we'll use the password from an incoming server with</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l129.1"></a><span id="l129.1" class="difflineminus">--- a/mailnews/mapi/mapihook/build/msgMapi.idl</span>
<a href="#l129.2"></a><span id="l129.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/build/msgMapi.idl</span>
<a href="#l129.3"></a><span id="l129.3" class="difflineat">@@ -44,17 +44,17 @@ typedef struct</span>
<a href="#l129.4"></a><span id="l129.4">     [size_is (nRecipCount)]	lpnsMapiRecipDesc lpRecips;/* Recipient descriptors  */</span>
<a href="#l129.5"></a><span id="l129.5">     unsigned long      nFileCount;    /* # of file attachments  */</span>
<a href="#l129.6"></a><span id="l129.6">     [size_is (nFileCount)]	lpnsMapiFileDesc   lpFiles;       /* Attachment descriptors */</span>
<a href="#l129.7"></a><span id="l129.7"> } nsMapiMessage, * lpnsMapiMessage;</span>
<a href="#l129.8"></a><span id="l129.8"> </span>
<a href="#l129.9"></a><span id="l129.9"> [</span>
<a href="#l129.10"></a><span id="l129.10">     object,</span>
<a href="#l129.11"></a><span id="l129.11">     uuid(6EDCD38E-8861-11d5-A3DD-00B0D0F3BAA7),</span>
<a href="#l129.12"></a><span id="l129.12" class="difflineminus">-    helpstring(&quot;nsIMapi Inteface&quot;),</span>
<a href="#l129.13"></a><span id="l129.13" class="difflineplus">+    helpstring(&quot;nsIMapi Interface&quot;),</span>
<a href="#l129.14"></a><span id="l129.14">     pointer_default(unique)</span>
<a href="#l129.15"></a><span id="l129.15"> ]</span>
<a href="#l129.16"></a><span id="l129.16"> </span>
<a href="#l129.17"></a><span id="l129.17"> interface nsIMapi : IUnknown</span>
<a href="#l129.18"></a><span id="l129.18"> {</span>
<a href="#l129.19"></a><span id="l129.19">     HRESULT Login([in] unsigned long aUIArg, [in, unique] LOGIN_PW_TYPE aLogin,</span>
<a href="#l129.20"></a><span id="l129.20">                   [in, unique] LOGIN_PW_TYPE aPassWord, [in] unsigned long aFlags,</span>
<a href="#l129.21"></a><span id="l129.21">                   [out] unsigned long *aSessionId);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l130.1"></a><span id="l130.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/Registry.cpp</span>
<a href="#l130.2"></a><span id="l130.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/Registry.cpp</span>
<a href="#l130.3"></a><span id="l130.3" class="difflineat">@@ -86,24 +86,24 @@ LONG recursiveDeleteKey(HKEY hKeyParent,</span>
<a href="#l130.4"></a><span id="l130.4">     HKEY hKeyChild ;</span>
<a href="#l130.5"></a><span id="l130.5">     LONG lRes = RegOpenKeyEx(hKeyParent, lpszKeyChild, 0,</span>
<a href="#l130.6"></a><span id="l130.6">                              KEY_ALL_ACCESS, &amp;hKeyChild) ;</span>
<a href="#l130.7"></a><span id="l130.7">     if (lRes != ERROR_SUCCESS)</span>
<a href="#l130.8"></a><span id="l130.8">     {</span>
<a href="#l130.9"></a><span id="l130.9">         return lRes ;</span>
<a href="#l130.10"></a><span id="l130.10">     }</span>
<a href="#l130.11"></a><span id="l130.11"> </span>
<a href="#l130.12"></a><span id="l130.12" class="difflineminus">-    // Enumerate all of the decendents of this child.</span>
<a href="#l130.13"></a><span id="l130.13" class="difflineplus">+    // Enumerate all of the descendants of this child.</span>
<a href="#l130.14"></a><span id="l130.14">     FILETIME time ;</span>
<a href="#l130.15"></a><span id="l130.15">     char szBuffer[MAX_SIZE] ;</span>
<a href="#l130.16"></a><span id="l130.16">     DWORD dwSize = MAX_SIZE ;</span>
<a href="#l130.17"></a><span id="l130.17">     while (RegEnumKeyEx(hKeyChild, 0, szBuffer, &amp;dwSize, NULL,</span>
<a href="#l130.18"></a><span id="l130.18">                         NULL, NULL, &amp;time) == S_OK)</span>
<a href="#l130.19"></a><span id="l130.19">     {</span>
<a href="#l130.20"></a><span id="l130.20" class="difflineminus">-        // Delete the decendents of this child.</span>
<a href="#l130.21"></a><span id="l130.21" class="difflineplus">+        // Delete the descendants of this child.</span>
<a href="#l130.22"></a><span id="l130.22">         lRes = recursiveDeleteKey(hKeyChild, szBuffer) ;</span>
<a href="#l130.23"></a><span id="l130.23">         if (lRes != ERROR_SUCCESS)</span>
<a href="#l130.24"></a><span id="l130.24">         {</span>
<a href="#l130.25"></a><span id="l130.25">             // Cleanup before exiting.</span>
<a href="#l130.26"></a><span id="l130.26">             RegCloseKey(hKeyChild) ;</span>
<a href="#l130.27"></a><span id="l130.27">             return lRes;</span>
<a href="#l130.28"></a><span id="l130.28">         }</span>
<a href="#l130.29"></a><span id="l130.29">         dwSize = MAX_SIZE;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l131.1"></a><span id="l131.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiSupport.cpp</span>
<a href="#l131.2"></a><span id="l131.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiSupport.cpp</span>
<a href="#l131.3"></a><span id="l131.3" class="difflineat">@@ -102,25 +102,25 @@ nsMapiSupport::ShutdownMAPISupport()</span>
<a href="#l131.4"></a><span id="l131.4">     ::OleUninitialize();</span>
<a href="#l131.5"></a><span id="l131.5"> </span>
<a href="#l131.6"></a><span id="l131.6">     return NS_OK ;</span>
<a href="#l131.7"></a><span id="l131.7"> }</span>
<a href="#l131.8"></a><span id="l131.8"> </span>
<a href="#l131.9"></a><span id="l131.9"> NS_IMETHODIMP</span>
<a href="#l131.10"></a><span id="l131.10"> nsMapiSupport::RegisterServer()</span>
<a href="#l131.11"></a><span id="l131.11"> {</span>
<a href="#l131.12"></a><span id="l131.12" class="difflineminus">-  // TODO: Figure out what kind of error propogation to pass back</span>
<a href="#l131.13"></a><span id="l131.13" class="difflineplus">+  // TODO: Figure out what kind of error propagation to pass back</span>
<a href="#l131.14"></a><span id="l131.14">   ::RegisterServer(CLSID_CMapiImp, &quot;Mozilla MAPI&quot;, &quot;MozillaMapi&quot;, &quot;MozillaMapi.1&quot;);</span>
<a href="#l131.15"></a><span id="l131.15">   return NS_OK;</span>
<a href="#l131.16"></a><span id="l131.16"> }</span>
<a href="#l131.17"></a><span id="l131.17"> </span>
<a href="#l131.18"></a><span id="l131.18"> NS_IMETHODIMP</span>
<a href="#l131.19"></a><span id="l131.19"> nsMapiSupport::UnRegisterServer()</span>
<a href="#l131.20"></a><span id="l131.20"> {</span>
<a href="#l131.21"></a><span id="l131.21" class="difflineminus">-  // TODO: Figure out what kind of error propogation to pass back</span>
<a href="#l131.22"></a><span id="l131.22" class="difflineplus">+  // TODO: Figure out what kind of error propagation to pass back</span>
<a href="#l131.23"></a><span id="l131.23">   ::UnregisterServer(CLSID_CMapiImp, &quot;MozillaMapi&quot;, &quot;MozillaMapi.1&quot;);</span>
<a href="#l131.24"></a><span id="l131.24">   return NS_OK;</span>
<a href="#l131.25"></a><span id="l131.25"> }</span>
<a href="#l131.26"></a><span id="l131.26"> </span>
<a href="#l131.27"></a><span id="l131.27"> NS_DEFINE_NAMED_CID(NS_IMAPISUPPORT_CID);</span>
<a href="#l131.28"></a><span id="l131.28"> </span>
<a href="#l131.29"></a><span id="l131.29"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsMapiSupport)</span>
<a href="#l131.30"></a><span id="l131.30"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l132.1"></a><span id="l132.1" class="difflineminus">--- a/mailnews/mime/cthandlers/vcard/mimevcrd.cpp</span>
<a href="#l132.2"></a><span id="l132.2" class="difflineplus">+++ b/mailnews/mime/cthandlers/vcard/mimevcrd.cpp</span>
<a href="#l132.3"></a><span id="l132.3" class="difflineat">@@ -172,17 +172,17 @@ MimeInlineTextVCard_parse_eof (MimeObjec</span>
<a href="#l132.4"></a><span id="l132.4">     /* This is a fine place to write any closing HTML.  In fact, you may</span>
<a href="#l132.5"></a><span id="l132.5">     want all the writing to be here, and all of the above would just</span>
<a href="#l132.6"></a><span id="l132.6">     collect data into datastructures, though that isn't very</span>
<a href="#l132.7"></a><span id="l132.7">     &quot;streaming&quot;. */</span>
<a href="#l132.8"></a><span id="l132.8">     t = v;</span>
<a href="#l132.9"></a><span id="l132.9">     while (v &amp;&amp; status &gt;= 0) {</span>
<a href="#l132.10"></a><span id="l132.10">       /* write out html */</span>
<a href="#l132.11"></a><span id="l132.11">       status = WriteOutVCard (obj, v);</span>
<a href="#l132.12"></a><span id="l132.12" class="difflineminus">-      /* parse next vcard incase they're embedded */</span>
<a href="#l132.13"></a><span id="l132.13" class="difflineplus">+      /* parse next vcard in case they're embedded */</span>
<a href="#l132.14"></a><span id="l132.14">       v = vCardService-&gt;NextVObjectInList(v);</span>
<a href="#l132.15"></a><span id="l132.15">     }</span>
<a href="#l132.16"></a><span id="l132.16"> </span>
<a href="#l132.17"></a><span id="l132.17">     (void)vCardService-&gt;CleanVObject(t);</span>
<a href="#l132.18"></a><span id="l132.18">   }</span>
<a href="#l132.19"></a><span id="l132.19"> </span>
<a href="#l132.20"></a><span id="l132.20">   if (status &lt; 0)</span>
<a href="#l132.21"></a><span id="l132.21">     return status;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l133.1"></a><span id="l133.1" class="difflineminus">--- a/mailnews/mime/jsmime/jsmime.js</span>
<a href="#l133.2"></a><span id="l133.2" class="difflineplus">+++ b/mailnews/mime/jsmime/jsmime.js</span>
<a href="#l133.3"></a><span id="l133.3" class="difflineat">@@ -1314,23 +1314,23 @@ for (let pair of structuredHeaders.decod</span>
<a href="#l133.4"></a><span id="l133.4"> }</span>
<a href="#l133.5"></a><span id="l133.5"> </span>
<a href="#l133.6"></a><span id="l133.6"> /**</span>
<a href="#l133.7"></a><span id="l133.7">  * Use an already-registered structured decoder to parse the value of the header</span>
<a href="#l133.8"></a><span id="l133.8">  * into a structured representation.</span>
<a href="#l133.9"></a><span id="l133.9">  *</span>
<a href="#l133.10"></a><span id="l133.10">  * As this method is designed to be used for the internal MIME Parser to convert</span>
<a href="#l133.11"></a><span id="l133.11">  * the raw header values to well-structured values, value is intended to be an</span>
<a href="#l133.12"></a><span id="l133.12" class="difflineminus">- * array consisting of all occurences of the header in order. However, for ease</span>
<a href="#l133.13"></a><span id="l133.13" class="difflineplus">+ * array consisting of all occurrences of the header in order. However, for ease</span>
<a href="#l133.14"></a><span id="l133.14">  * of use by other callers, it can also be treated as a string.</span>
<a href="#l133.15"></a><span id="l133.15">  *</span>
<a href="#l133.16"></a><span id="l133.16">  * If the decoder for the header is not found, an exception will be thrown.</span>
<a href="#l133.17"></a><span id="l133.17">  *</span>
<a href="#l133.18"></a><span id="l133.18">  * A large set of headers have pre-defined structured decoders; these decoders</span>
<a href="#l133.19"></a><span id="l133.19" class="difflineminus">- * cannot be overrided with addStructuredDecoder, as doing so could prevent the</span>
<a href="#l133.20"></a><span id="l133.20" class="difflineplus">+ * cannot be overridden with addStructuredDecoder, as doing so could prevent the</span>
<a href="#l133.21"></a><span id="l133.21">  * MIME or message parsers from working properly. The pre-defined structured</span>
<a href="#l133.22"></a><span id="l133.22">  * headers break down into five clases of results, plus some ad-hoc</span>
<a href="#l133.23"></a><span id="l133.23">  * representations. They are:</span>
<a href="#l133.24"></a><span id="l133.24">  *</span>
<a href="#l133.25"></a><span id="l133.25">  * Addressing headers (results are the same as parseAddressingHeader):</span>
<a href="#l133.26"></a><span id="l133.26">  * - Approved</span>
<a href="#l133.27"></a><span id="l133.27">  * - Bcc</span>
<a href="#l133.28"></a><span id="l133.28">  * - Cc</span>
<a href="#l133.29"></a><span id="l133.29" class="difflineat">@@ -2853,17 +2853,17 @@ HeaderEmitter.prototype.addPhrase = func</span>
<a href="#l133.30"></a><span id="l133.30">     } catch (e) {</span>
<a href="#l133.31"></a><span id="l133.31">       // If we get an error at this point, we failed to add the quoted string</span>
<a href="#l133.32"></a><span id="l133.32">       // because the string was too long. Fall through to the case where we know</span>
<a href="#l133.33"></a><span id="l133.33">       // that the input was too long to begin with.</span>
<a href="#l133.34"></a><span id="l133.34">     }</span>
<a href="#l133.35"></a><span id="l133.35">   }</span>
<a href="#l133.36"></a><span id="l133.36"> </span>
<a href="#l133.37"></a><span id="l133.37">   // If the text is too long, split the quotable string at space boundaries and</span>
<a href="#l133.38"></a><span id="l133.38" class="difflineminus">-  // add each word invidually. If we still can't add all those words, there is</span>
<a href="#l133.39"></a><span id="l133.39" class="difflineplus">+  // add each word individually. If we still can't add all those words, there is</span>
<a href="#l133.40"></a><span id="l133.40">   // nothing that we can do.</span>
<a href="#l133.41"></a><span id="l133.41">   let words = text.split(' ');</span>
<a href="#l133.42"></a><span id="l133.42">   for (let i = 0; i &lt; words.length; i++) {</span>
<a href="#l133.43"></a><span id="l133.43">     this.addQuotable(words[i], qchars,</span>
<a href="#l133.44"></a><span id="l133.44">       i == words.length - 1 ? mayBreakAfter : true);</span>
<a href="#l133.45"></a><span id="l133.45">   }</span>
<a href="#l133.46"></a><span id="l133.46"> };</span>
<a href="#l133.47"></a><span id="l133.47"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l134.1"></a><span id="l134.1" class="difflineminus">--- a/mailnews/mime/public/nsIMsgHeaderParser.idl</span>
<a href="#l134.2"></a><span id="l134.2" class="difflineplus">+++ b/mailnews/mime/public/nsIMsgHeaderParser.idl</span>
<a href="#l134.3"></a><span id="l134.3" class="difflineat">@@ -128,17 +128,17 @@ interface nsIMsgHeaderParser : nsISuppor</span>
<a href="#l134.4"></a><span id="l134.4">    */</span>
<a href="#l134.5"></a><span id="l134.5">   AString makeMimeHeader([array, size_is(aLength)]</span>
<a href="#l134.6"></a><span id="l134.6">                          in msgIAddressObject aAddresses,</span>
<a href="#l134.7"></a><span id="l134.7">                          in unsigned long aLength);</span>
<a href="#l134.8"></a><span id="l134.8"> </span>
<a href="#l134.9"></a><span id="l134.9">   /**</span>
<a href="#l134.10"></a><span id="l134.10">    * Return the first address in the list in a format suitable for display.</span>
<a href="#l134.11"></a><span id="l134.11">    *</span>
<a href="#l134.12"></a><span id="l134.12" class="difflineminus">-   * This is largely a convience method for handling From headers (or similar),</span>
<a href="#l134.13"></a><span id="l134.13" class="difflineplus">+   * This is largely a convenience method for handling From headers (or similar),</span>
<a href="#l134.14"></a><span id="l134.14">    * which are expected to only have a single element in them. It is exactly</span>
<a href="#l134.15"></a><span id="l134.15">    * equivalent to saying (parseDecodedHeader(decodedHeader))[0].toString().</span>
<a href="#l134.16"></a><span id="l134.16">    *</span>
<a href="#l134.17"></a><span id="l134.17">    * @param decodedHeader   The non-RFC 2047-encoded header to parse.</span>
<a href="#l134.18"></a><span id="l134.18">    * @return                The first address, suitable for display.</span>
<a href="#l134.19"></a><span id="l134.19">    */</span>
<a href="#l134.20"></a><span id="l134.20">   AString extractFirstName(in AString aDecodedHeader);</span>
<a href="#l134.21"></a><span id="l134.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l135.1"></a><span id="l135.1" class="difflineminus">--- a/mailnews/mime/src/mimehdrs.cpp</span>
<a href="#l135.2"></a><span id="l135.2" class="difflineplus">+++ b/mailnews/mime/src/mimehdrs.cpp</span>
<a href="#l135.3"></a><span id="l135.3" class="difflineat">@@ -463,17 +463,17 @@ MimeHeaders_get (MimeHeaders *hdrs, cons</span>
<a href="#l135.4"></a><span id="l135.4">         memcpy(s, contents, end - contents);</span>
<a href="#l135.5"></a><span id="l135.5">         s[end - contents] = 0;</span>
<a href="#l135.6"></a><span id="l135.6">       }</span>
<a href="#l135.7"></a><span id="l135.7">     else</span>
<a href="#l135.8"></a><span id="l135.8">       {</span>
<a href="#l135.9"></a><span id="l135.9">         s[0] = 0;</span>
<a href="#l135.10"></a><span id="l135.10">       }</span>
<a href="#l135.11"></a><span id="l135.11"> </span>
<a href="#l135.12"></a><span id="l135.12" class="difflineminus">-    /* If we only wanted the first occurence of this header, we're done. */</span>
<a href="#l135.13"></a><span id="l135.13" class="difflineplus">+    /* If we only wanted the first occurrence of this header, we're done. */</span>
<a href="#l135.14"></a><span id="l135.14">     if (!all_p) break;</span>
<a href="#l135.15"></a><span id="l135.15">     }</span>
<a href="#l135.16"></a><span id="l135.16">   }</span>
<a href="#l135.17"></a><span id="l135.17"> </span>
<a href="#l135.18"></a><span id="l135.18">   if (result &amp;&amp; !*result)  /* empty string */</span>
<a href="#l135.19"></a><span id="l135.19">   {</span>
<a href="#l135.20"></a><span id="l135.20">     PR_Free(result);</span>
<a href="#l135.21"></a><span id="l135.21">     return 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l136.1"></a><span id="l136.1" class="difflineminus">--- a/mailnews/mime/src/mimei.cpp</span>
<a href="#l136.2"></a><span id="l136.2" class="difflineplus">+++ b/mailnews/mime/src/mimei.cpp</span>
<a href="#l136.3"></a><span id="l136.3" class="difflineat">@@ -144,30 +144,30 @@ add_content_type_attribs(const char *con</span>
<a href="#l136.4"></a><span id="l136.4">     return;</span>
<a href="#l136.5"></a><span id="l136.5"> </span>
<a href="#l136.6"></a><span id="l136.6">   PL_strncpy(ptr-&gt;content_type, content_type, sizeof(ptr-&gt;content_type));</span>
<a href="#l136.7"></a><span id="l136.7">   ptr-&gt;force_inline_display = ctHandlerInfo-&gt;force_inline_display;</span>
<a href="#l136.8"></a><span id="l136.8">   ctHandlerList-&gt;AppendElement(ptr);</span>
<a href="#l136.9"></a><span id="l136.9"> }</span>
<a href="#l136.10"></a><span id="l136.10"> </span>
<a href="#l136.11"></a><span id="l136.11"> /*</span>
<a href="#l136.12"></a><span id="l136.12" class="difflineminus">- * This routine will find all content type handler for a specifc content</span>
<a href="#l136.13"></a><span id="l136.13" class="difflineplus">+ * This routine will find all content type handler for a specific content</span>
<a href="#l136.14"></a><span id="l136.14">  * type (if it exists)</span>
<a href="#l136.15"></a><span id="l136.15">  */</span>
<a href="#l136.16"></a><span id="l136.16"> bool</span>
<a href="#l136.17"></a><span id="l136.17"> force_inline_display(const char *content_type)</span>
<a href="#l136.18"></a><span id="l136.18"> {</span>
<a href="#l136.19"></a><span id="l136.19">   bool       force_inline_disp;</span>
<a href="#l136.20"></a><span id="l136.20"> </span>
<a href="#l136.21"></a><span id="l136.21">   find_content_type_attribs(content_type, &amp;force_inline_disp);</span>
<a href="#l136.22"></a><span id="l136.22">   return (force_inline_disp);</span>
<a href="#l136.23"></a><span id="l136.23"> }</span>
<a href="#l136.24"></a><span id="l136.24"> </span>
<a href="#l136.25"></a><span id="l136.25"> /*</span>
<a href="#l136.26"></a><span id="l136.26" class="difflineminus">- * This routine will find all content type handler for a specifc content</span>
<a href="#l136.27"></a><span id="l136.27" class="difflineplus">+ * This routine will find all content type handler for a specific content</span>
<a href="#l136.28"></a><span id="l136.28">  * type (if it exists) and is defined to the nsRegistry</span>
<a href="#l136.29"></a><span id="l136.29">  */</span>
<a href="#l136.30"></a><span id="l136.30"> MimeObjectClass *</span>
<a href="#l136.31"></a><span id="l136.31"> mime_locate_external_content_handler(const char *content_type,</span>
<a href="#l136.32"></a><span id="l136.32">                                      contentTypeHandlerInitStruct  *ctHandlerInfo)</span>
<a href="#l136.33"></a><span id="l136.33"> {</span>
<a href="#l136.34"></a><span id="l136.34">   if (!content_type || !*(content_type)) // null or empty content type</span>
<a href="#l136.35"></a><span id="l136.35">     return nullptr;</span>
<a href="#l136.36"></a><span id="l136.36" class="difflineat">@@ -480,17 +480,17 @@ mime_find_class (const char *content_typ</span>
<a href="#l136.37"></a><span id="l136.37">       }</span>
<a href="#l136.38"></a><span id="l136.38"> #endif</span>
<a href="#l136.39"></a><span id="l136.39"> </span>
<a href="#l136.40"></a><span id="l136.40">     if (types_of_classes_to_disallow &gt; 0</span>
<a href="#l136.41"></a><span id="l136.41">         &amp;&amp; (!PL_strncasecmp(content_type, &quot;text/x-vcard&quot;, 12))</span>
<a href="#l136.42"></a><span id="l136.42">        )</span>
<a href="#l136.43"></a><span id="l136.43">       /* Use a little hack to prevent some dangerous plugins, which ship</span>
<a href="#l136.44"></a><span id="l136.44">          with Mozilla, to run.</span>
<a href="#l136.45"></a><span id="l136.45" class="difflineminus">-         For the truely user-installed plugins, we rely on the judgement</span>
<a href="#l136.46"></a><span id="l136.46" class="difflineplus">+         For the truly user-installed plugins, we rely on the judgement</span>
<a href="#l136.47"></a><span id="l136.47">          of the user. */</span>
<a href="#l136.48"></a><span id="l136.48">     {</span>
<a href="#l136.49"></a><span id="l136.49">       if (!exact_match_p)</span>
<a href="#l136.50"></a><span id="l136.50">         clazz = (MimeObjectClass *)&amp;mimeExternalObjectClass; // As attachment</span>
<a href="#l136.51"></a><span id="l136.51">     }</span>
<a href="#l136.52"></a><span id="l136.52">     else</span>
<a href="#l136.53"></a><span id="l136.53">       clazz = (MimeObjectClass *)tempClass;</span>
<a href="#l136.54"></a><span id="l136.54">   }</span>
<a href="#l136.55"></a><span id="l136.55" class="difflineat">@@ -853,17 +853,17 @@ mime_create (const char *content_type, M</span>
<a href="#l136.56"></a><span id="l136.56">     {</span>
<a href="#l136.57"></a><span id="l136.57">       override_content_type = opts-&gt;file_type_fn (name, opts-&gt;stream_closure);</span>
<a href="#l136.58"></a><span id="l136.58">       // appledouble isn't a valid override content type, and makes</span>
<a href="#l136.59"></a><span id="l136.59">       // attachments invisible.</span>
<a href="#l136.60"></a><span id="l136.60">       if (!PL_strcasecmp(override_content_type, MULTIPART_APPLEDOUBLE))</span>
<a href="#l136.61"></a><span id="l136.61">         override_content_type = nullptr;</span>
<a href="#l136.62"></a><span id="l136.62">       PR_FREEIF(name);</span>
<a href="#l136.63"></a><span id="l136.63"> </span>
<a href="#l136.64"></a><span id="l136.64" class="difflineminus">-      // Workaroung for saving '.eml&quot; file encoded with base64.</span>
<a href="#l136.65"></a><span id="l136.65" class="difflineplus">+      // Workaround for saving '.eml&quot; file encoded with base64.</span>
<a href="#l136.66"></a><span id="l136.66">       // Do not override with message/rfc822 whenever Transfer-Encoding is</span>
<a href="#l136.67"></a><span id="l136.67">       // base64 since base64 encoding of message/rfc822 is invalid.</span>
<a href="#l136.68"></a><span id="l136.68">       // Our MimeMessageClass has no capability to decode it.</span>
<a href="#l136.69"></a><span id="l136.69">       if (!PL_strcasecmp(override_content_type, MESSAGE_RFC822)) {</span>
<a href="#l136.70"></a><span id="l136.70">         nsCString encoding;</span>
<a href="#l136.71"></a><span id="l136.71">         encoding.Adopt(MimeHeaders_get(hdrs,</span>
<a href="#l136.72"></a><span id="l136.72">                                        HEADER_CONTENT_TRANSFER_ENCODING,</span>
<a href="#l136.73"></a><span id="l136.73">                                        true, false));</span>
<a href="#l136.74"></a><span id="l136.74" class="difflineat">@@ -1747,17 +1747,17 @@ MimeOptions_write(MimeHeaders *hdrs, Mim</span>
<a href="#l136.75"></a><span id="l136.75"> }</span>
<a href="#l136.76"></a><span id="l136.76"> </span>
<a href="#l136.77"></a><span id="l136.77"> int</span>
<a href="#l136.78"></a><span id="l136.78"> MimeObject_write(MimeObject *obj, const char *output, int32_t length,</span>
<a href="#l136.79"></a><span id="l136.79">          bool user_visible_p)</span>
<a href="#l136.80"></a><span id="l136.80"> {</span>
<a href="#l136.81"></a><span id="l136.81">   if (!obj-&gt;output_p) return 0;</span>
<a href="#l136.82"></a><span id="l136.82"> </span>
<a href="#l136.83"></a><span id="l136.83" class="difflineminus">-  // if we're stripping attachments, check if any parent is not being ouput</span>
<a href="#l136.84"></a><span id="l136.84" class="difflineplus">+  // if we're stripping attachments, check if any parent is not being output</span>
<a href="#l136.85"></a><span id="l136.85">   if (obj-&gt;options-&gt;format_out == nsMimeOutput::nsMimeMessageAttach)</span>
<a href="#l136.86"></a><span id="l136.86">   {</span>
<a href="#l136.87"></a><span id="l136.87">     // if true, mime generates a separator in html - we don't want that.</span>
<a href="#l136.88"></a><span id="l136.88">     user_visible_p = false;</span>
<a href="#l136.89"></a><span id="l136.89"> </span>
<a href="#l136.90"></a><span id="l136.90">     for (MimeObject *parent = obj-&gt;parent; parent; parent = parent-&gt;parent)</span>
<a href="#l136.91"></a><span id="l136.91">     {</span>
<a href="#l136.92"></a><span id="l136.92">       if (!parent-&gt;output_p)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l137.1"></a><span id="l137.1" class="difflineminus">--- a/mailnews/mime/src/mimei.h</span>
<a href="#l137.2"></a><span id="l137.2" class="difflineplus">+++ b/mailnews/mime/src/mimei.h</span>
<a href="#l137.3"></a><span id="l137.3" class="difflineat">@@ -133,17 +133,17 @@</span>
<a href="#l137.4"></a><span id="l137.4">   First we pull in the appropriate include file (which includes all necessary</span>
<a href="#l137.5"></a><span id="l137.5">   include files for the parent classes) and then we define the class object</span>
<a href="#l137.6"></a><span id="l137.6">   using the MimeDefClass macro:</span>
<a href="#l137.7"></a><span id="l137.7"> </span>
<a href="#l137.8"></a><span id="l137.8">       #include &quot;foobar.h&quot;</span>
<a href="#l137.9"></a><span id="l137.9">       #define MIME_SUPERCLASS parentlClass</span>
<a href="#l137.10"></a><span id="l137.10">       MimeDefClass(Foobar, FoobarClass, foobarClass, &amp;MIME_SUPERCLASS);</span>
<a href="#l137.11"></a><span id="l137.11"> </span>
<a href="#l137.12"></a><span id="l137.12" class="difflineminus">-  The definition of MIME_SUPERCLASS is just to move most of the knowlege of the</span>
<a href="#l137.13"></a><span id="l137.13" class="difflineplus">+  The definition of MIME_SUPERCLASS is just to move most of the knowledge of the</span>
<a href="#l137.14"></a><span id="l137.14">   exact class hierarchy up to the file's header, instead of it being scattered</span>
<a href="#l137.15"></a><span id="l137.15">   through the various methods; see below.</span>
<a href="#l137.16"></a><span id="l137.16"> </span>
<a href="#l137.17"></a><span id="l137.17">   METHOD DECLARATIONS:</span>
<a href="#l137.18"></a><span id="l137.18">   We will be putting function pointers into the class object, so we declare</span>
<a href="#l137.19"></a><span id="l137.19">   them here.  They can generally all be static, since nobody outside of this</span>
<a href="#l137.20"></a><span id="l137.20">   file needs to reference them by name; all references to these routines should</span>
<a href="#l137.21"></a><span id="l137.21">   be through the class object.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l138.1"></a><span id="l138.1" class="difflineminus">--- a/mailnews/mime/src/mimemalt.cpp</span>
<a href="#l138.2"></a><span id="l138.2" class="difflineplus">+++ b/mailnews/mime/src/mimemalt.cpp</span>
<a href="#l138.3"></a><span id="l138.3" class="difflineat">@@ -37,17 +37,17 @@</span>
<a href="#l138.4"></a><span id="l138.4">   problem is what prompted a rewrite of this file into its current</span>
<a href="#l138.5"></a><span id="l138.5">   architecture.</span>
<a href="#l138.6"></a><span id="l138.6"> </span>
<a href="#l138.7"></a><span id="l138.7">   ARCHITECTURE</span>
<a href="#l138.8"></a><span id="l138.8">   ------------</span>
<a href="#l138.9"></a><span id="l138.9"> </span>
<a href="#l138.10"></a><span id="l138.10">   Parts are read and queued until we know whether we're going to display</span>
<a href="#l138.11"></a><span id="l138.11">   them. If the first pending part is one we don't know how to display, then we</span>
<a href="#l138.12"></a><span id="l138.12" class="difflineminus">-  can add it to the MIME structure immediatelly, with output_p disabled. If the</span>
<a href="#l138.13"></a><span id="l138.13" class="difflineplus">+  can add it to the MIME structure immediately, with output_p disabled. If the</span>
<a href="#l138.14"></a><span id="l138.14">   first pending part is one we know how to display, then we can't add it to the</span>
<a href="#l138.15"></a><span id="l138.15">   in-memory MIME structure until either (a) we encounter a later, more</span>
<a href="#l138.16"></a><span id="l138.16">   preferred part we know how to display, or (b) we reach the end of the</span>
<a href="#l138.17"></a><span id="l138.17">   parts. A display-capable part of the queue may be followed by one or more</span>
<a href="#l138.18"></a><span id="l138.18">   display-incapable parts. We can't add them to the in-memory structure until</span>
<a href="#l138.19"></a><span id="l138.19">   we figure out what to do with the first, display-capable pending part,</span>
<a href="#l138.20"></a><span id="l138.20">   because otherwise the order and numbering will be wrong. All of the logic in</span>
<a href="#l138.21"></a><span id="l138.21">   this paragraph is implemented in the flush_children function.</span>
<a href="#l138.22"></a><span id="l138.22" class="difflineat">@@ -71,22 +71,22 @@</span>
<a href="#l138.23"></a><span id="l138.23">   multipart/alternative and if so not notify emitters there because</span>
<a href="#l138.24"></a><span id="l138.24">   MimeMultipartAlternative_create_child handles it.</span>
<a href="#l138.25"></a><span id="l138.25"> </span>
<a href="#l138.26"></a><span id="l138.26">   - Jonathan Kamens, 2010-07-23</span>
<a href="#l138.27"></a><span id="l138.27"> </span>
<a href="#l138.28"></a><span id="l138.28">   When the option prefer_plaintext is on, the last text/plain part</span>
<a href="#l138.29"></a><span id="l138.29">   should be preferred over any other part that can be displayed. But</span>
<a href="#l138.30"></a><span id="l138.30">   if no text/plain part is found, then the algorithm should go as</span>
<a href="#l138.31"></a><span id="l138.31" class="difflineminus">-  normal and convert any html part found to text. To achive this I</span>
<a href="#l138.32"></a><span id="l138.32" class="difflineplus">+  normal and convert any html part found to text. To achieve this I</span>
<a href="#l138.33"></a><span id="l138.33">   found that the simplest way was to change the function display_part_p</span>
<a href="#l138.34"></a><span id="l138.34">   into returning priority as an integer instead of boolean can/can't</span>
<a href="#l138.35"></a><span id="l138.35">   display. Then I also changed the function flush_children so it selects</span>
<a href="#l138.36"></a><span id="l138.36">   the last part with the highest priority. (Priority 0 means it cannot</span>
<a href="#l138.37"></a><span id="l138.37" class="difflineminus">-  be displayed and the part is never choosen.)</span>
<a href="#l138.38"></a><span id="l138.38" class="difflineplus">+  be displayed and the part is never chosen.)</span>
<a href="#l138.39"></a><span id="l138.39"> </span>
<a href="#l138.40"></a><span id="l138.40">   - Terje Brten, 2013-02-16</span>
<a href="#l138.41"></a><span id="l138.41"> */</span>
<a href="#l138.42"></a><span id="l138.42"> </span>
<a href="#l138.43"></a><span id="l138.43"> #include &quot;mimemalt.h&quot;</span>
<a href="#l138.44"></a><span id="l138.44"> #include &quot;prmem.h&quot;</span>
<a href="#l138.45"></a><span id="l138.45"> #include &quot;plstr.h&quot;</span>
<a href="#l138.46"></a><span id="l138.46"> #include &quot;prlog.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l139.1"></a><span id="l139.1" class="difflineminus">--- a/mailnews/mime/src/mimemoz2.cpp</span>
<a href="#l139.2"></a><span id="l139.2" class="difflineplus">+++ b/mailnews/mime/src/mimemoz2.cpp</span>
<a href="#l139.3"></a><span id="l139.3" class="difflineat">@@ -97,17 +97,17 @@ nsresult</span>
<a href="#l139.4"></a><span id="l139.4"> ProcessBodyAsAttachment(MimeObject *obj, nsMsgAttachmentData **data)</span>
<a href="#l139.5"></a><span id="l139.5"> {</span>
<a href="#l139.6"></a><span id="l139.6">   nsMsgAttachmentData   *tmp;</span>
<a href="#l139.7"></a><span id="l139.7">   char                  *disp = nullptr;</span>
<a href="#l139.8"></a><span id="l139.8">   char                  *charset = nullptr;</span>
<a href="#l139.9"></a><span id="l139.9"> </span>
<a href="#l139.10"></a><span id="l139.10">   // Ok, this is the special case when somebody sends an &quot;attachment&quot; as the</span>
<a href="#l139.11"></a><span id="l139.11">   // body of an RFC822 message...I really don't think this is the way this</span>
<a href="#l139.12"></a><span id="l139.12" class="difflineminus">-  // should be done.  I belive this should really be a multipart/mixed message</span>
<a href="#l139.13"></a><span id="l139.13" class="difflineplus">+  // should be done.  I believe this should really be a multipart/mixed message</span>
<a href="#l139.14"></a><span id="l139.14">   // with an empty body part, but what can ya do...our friends to the North seem</span>
<a href="#l139.15"></a><span id="l139.15">   // to do this.</span>
<a href="#l139.16"></a><span id="l139.16">   MimeObject    *child = obj;</span>
<a href="#l139.17"></a><span id="l139.17"> </span>
<a href="#l139.18"></a><span id="l139.18">   *data = new nsMsgAttachmentData[2];</span>
<a href="#l139.19"></a><span id="l139.19">   if (!*data)</span>
<a href="#l139.20"></a><span id="l139.20">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l139.21"></a><span id="l139.21"> </span>
<a href="#l139.22"></a><span id="l139.22" class="difflineat">@@ -1248,17 +1248,17 @@ bool MimeObjectIsMessageBody(MimeObject </span>
<a href="#l139.23"></a><span id="l139.23">     root = root-&gt;parent;</span>
<a href="#l139.24"></a><span id="l139.24">   return MimeObjectIsMessageBodyNoClimb(root, looking_for, &amp;stop);</span>
<a href="#l139.25"></a><span id="l139.25"> }</span>
<a href="#l139.26"></a><span id="l139.26"> </span>
<a href="#l139.27"></a><span id="l139.27"> //</span>
<a href="#l139.28"></a><span id="l139.28"> // New Stream Converter Interface</span>
<a href="#l139.29"></a><span id="l139.29"> //</span>
<a href="#l139.30"></a><span id="l139.30"> </span>
<a href="#l139.31"></a><span id="l139.31" class="difflineminus">-// Get the connnection to prefs service manager</span>
<a href="#l139.32"></a><span id="l139.32" class="difflineplus">+// Get the connection to prefs service manager</span>
<a href="#l139.33"></a><span id="l139.33"> nsIPrefBranch *</span>
<a href="#l139.34"></a><span id="l139.34"> GetPrefBranch(MimeDisplayOptions *opt)</span>
<a href="#l139.35"></a><span id="l139.35"> {</span>
<a href="#l139.36"></a><span id="l139.36">   if (!opt)</span>
<a href="#l139.37"></a><span id="l139.37">     return nullptr;</span>
<a href="#l139.38"></a><span id="l139.38"> </span>
<a href="#l139.39"></a><span id="l139.39">   return opt-&gt;m_prefBranch;</span>
<a href="#l139.40"></a><span id="l139.40"> }</span>
<a href="#l139.41"></a><span id="l139.41" class="difflineat">@@ -2049,34 +2049,34 @@ nsresult GetMailNewsFont(MimeObject *obj</span>
<a href="#l139.42"></a><span id="l139.42">     *fontSizePercentage = originalSize ?</span>
<a href="#l139.43"></a><span id="l139.43">                           (int32_t)((float)*fontPixelSize / (float)originalSize * 100) : 0;</span>
<a href="#l139.44"></a><span id="l139.44"> </span>
<a href="#l139.45"></a><span id="l139.45">   }</span>
<a href="#l139.46"></a><span id="l139.46"> </span>
<a href="#l139.47"></a><span id="l139.47">   return NS_OK;</span>
<a href="#l139.48"></a><span id="l139.48"> }</span>
<a href="#l139.49"></a><span id="l139.49"> </span>
<a href="#l139.50"></a><span id="l139.50" class="difflineminus">-/* This function syncronously converts an HTML document (as string)</span>
<a href="#l139.51"></a><span id="l139.51" class="difflineplus">+/* This function synchronously converts an HTML document (as string)</span>
<a href="#l139.52"></a><span id="l139.52">    to plaintext (as string) using the Gecko converter.</span>
<a href="#l139.53"></a><span id="l139.53"> </span>
<a href="#l139.54"></a><span id="l139.54">    flags: see nsIDocumentEncoder.h</span>
<a href="#l139.55"></a><span id="l139.55"> */</span>
<a href="#l139.56"></a><span id="l139.56"> nsresult</span>
<a href="#l139.57"></a><span id="l139.57"> HTML2Plaintext(const nsString&amp; inString, nsString&amp; outString,</span>
<a href="#l139.58"></a><span id="l139.58">                uint32_t flags, uint32_t wrapCol)</span>
<a href="#l139.59"></a><span id="l139.59"> {</span>
<a href="#l139.60"></a><span id="l139.60">   nsCOMPtr&lt;nsIParserUtils&gt; utils =</span>
<a href="#l139.61"></a><span id="l139.61">     do_GetService(NS_PARSERUTILS_CONTRACTID);</span>
<a href="#l139.62"></a><span id="l139.62">   return utils-&gt;ConvertToPlainText(inString, flags, wrapCol, outString);</span>
<a href="#l139.63"></a><span id="l139.63"> }</span>
<a href="#l139.64"></a><span id="l139.64"> // &lt;/copy&gt;</span>
<a href="#l139.65"></a><span id="l139.65"> </span>
<a href="#l139.66"></a><span id="l139.66"> </span>
<a href="#l139.67"></a><span id="l139.67"> </span>
<a href="#l139.68"></a><span id="l139.68" class="difflineminus">-/* This function syncronously sanitizes an HTML document (string-&gt;string)</span>
<a href="#l139.69"></a><span id="l139.69" class="difflineplus">+/* This function synchronously sanitizes an HTML document (string-&gt;string)</span>
<a href="#l139.70"></a><span id="l139.70">    using the Gecko nsTreeSanitizer.</span>
<a href="#l139.71"></a><span id="l139.71"> */</span>
<a href="#l139.72"></a><span id="l139.72"> // copied from HTML2Plaintext above</span>
<a href="#l139.73"></a><span id="l139.73"> nsresult</span>
<a href="#l139.74"></a><span id="l139.74"> HTMLSanitize(const nsString&amp; inString, nsString&amp; outString)</span>
<a href="#l139.75"></a><span id="l139.75"> {</span>
<a href="#l139.76"></a><span id="l139.76">   // If you want to add alternative sanitization, you can insert a conditional</span>
<a href="#l139.77"></a><span id="l139.77">   // call to another sanitizer and an early return here.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l140.1"></a><span id="l140.1" class="difflineminus">--- a/mailnews/mime/src/mimemoz2.h</span>
<a href="#l140.2"></a><span id="l140.2" class="difflineplus">+++ b/mailnews/mime/src/mimemoz2.h</span>
<a href="#l140.3"></a><span id="l140.3" class="difflineat">@@ -160,17 +160,17 @@ extern &quot;C&quot; nsresult     mimeEmitterStart</span>
<a href="#l140.4"></a><span id="l140.4"> extern &quot;C&quot; nsresult     mimeEmitterEndBody(MimeDisplayOptions *opt);</span>
<a href="#l140.5"></a><span id="l140.5"> extern &quot;C&quot; nsresult     mimeEmitterEndHeader(MimeDisplayOptions *opt, MimeObject *obj);</span>
<a href="#l140.6"></a><span id="l140.6"> extern &quot;C&quot; nsresult     mimeEmitterStartHeader(MimeDisplayOptions *opt, bool rootMailHeader, bool headerOnly, const char *msgID,</span>
<a href="#l140.7"></a><span id="l140.7">                                                const char *outCharset);</span>
<a href="#l140.8"></a><span id="l140.8"> extern &quot;C&quot; nsresult     mimeEmitterUpdateCharacterSet(MimeDisplayOptions *opt, const char *aCharset);</span>
<a href="#l140.9"></a><span id="l140.9"> </span>
<a href="#l140.10"></a><span id="l140.10"> extern &quot;C&quot; nsresult     MimeGetAttachmentList(MimeObject *tobj, const char *aMessageURL, nsMsgAttachmentData **data);</span>
<a href="#l140.11"></a><span id="l140.11"> </span>
<a href="#l140.12"></a><span id="l140.12" class="difflineminus">-/* To Get the connnection to prefs service manager */</span>
<a href="#l140.13"></a><span id="l140.13" class="difflineplus">+/* To Get the connection to prefs service manager */</span>
<a href="#l140.14"></a><span id="l140.14"> extern &quot;C&quot; nsIPrefBranch      *GetPrefBranch(MimeDisplayOptions *opt);</span>
<a href="#l140.15"></a><span id="l140.15"> </span>
<a href="#l140.16"></a><span id="l140.16"> // Get the text converter...</span>
<a href="#l140.17"></a><span id="l140.17"> mozITXTToHTMLConv           *GetTextConverter(MimeDisplayOptions *opt);</span>
<a href="#l140.18"></a><span id="l140.18"> </span>
<a href="#l140.19"></a><span id="l140.19"> nsresult</span>
<a href="#l140.20"></a><span id="l140.20"> HTML2Plaintext(const nsString&amp; inString, nsString&amp; outString,</span>
<a href="#l140.21"></a><span id="l140.21">                uint32_t flags, uint32_t wrapCol);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l141.1"></a><span id="l141.1" class="difflineminus">--- a/mailnews/mime/src/mimemrel.cpp</span>
<a href="#l141.2"></a><span id="l141.2" class="difflineplus">+++ b/mailnews/mime/src/mimemrel.cpp</span>
<a href="#l141.3"></a><span id="l141.3" class="difflineat">@@ -486,17 +486,17 @@ MimeMultipartRelated_output_child_p(Mime</span>
<a href="#l141.4"></a><span id="l141.4">             char * imappart = mime_imap_part_address(child);</span>
<a href="#l141.5"></a><span id="l141.5">             if (imappart)</span>
<a href="#l141.6"></a><span id="l141.6">               imappartnum.Adopt(imappart);</span>
<a href="#l141.7"></a><span id="l141.7">           }</span>
<a href="#l141.8"></a><span id="l141.8"> </span>
<a href="#l141.9"></a><span id="l141.9">           /*</span>
<a href="#l141.10"></a><span id="l141.10">             AppleDouble part need special care: we need to output only the data fork part of it.</span>
<a href="#l141.11"></a><span id="l141.11">             The problem at this point is that we haven't yet decoded the children of the AppleDouble</span>
<a href="#l141.12"></a><span id="l141.12" class="difflineminus">-            part therfore we will have to hope the datafork is the second one!</span>
<a href="#l141.13"></a><span id="l141.13" class="difflineplus">+            part therefore we will have to hope the datafork is the second one!</span>
<a href="#l141.14"></a><span id="l141.14">           */</span>
<a href="#l141.15"></a><span id="l141.15">           if (mime_typep(child, (MimeObjectClass *) &amp;mimeMultipartAppleDoubleClass))</span>
<a href="#l141.16"></a><span id="l141.16">             partnum.AppendLiteral(&quot;.2&quot;);</span>
<a href="#l141.17"></a><span id="l141.17"> </span>
<a href="#l141.18"></a><span id="l141.18">           char* part;</span>
<a href="#l141.19"></a><span id="l141.19">           if (!imappartnum.IsEmpty())</span>
<a href="#l141.20"></a><span id="l141.20">             part = mime_set_url_imap_part(obj-&gt;options-&gt;url, imappartnum.get(), partnum.get());</span>
<a href="#l141.21"></a><span id="l141.21">           else</span>
<a href="#l141.22"></a><span id="l141.22" class="difflineat">@@ -566,17 +566,17 @@ MimeMultipartRelated_output_child_p(Mime</span>
<a href="#l141.23"></a><span id="l141.23">                   else</span>
<a href="#l141.24"></a><span id="l141.24">                     PR_smprintf_free(tloc);</span>
<a href="#l141.25"></a><span id="l141.25">                 }</span>
<a href="#l141.26"></a><span id="l141.26">               }</span>
<a href="#l141.27"></a><span id="l141.27">             }</span>
<a href="#l141.28"></a><span id="l141.28">             /*  rhp - End of putting more stuff into the hash table */</span>
<a href="#l141.29"></a><span id="l141.29"> </span>
<a href="#l141.30"></a><span id="l141.30">               /* it's possible that temp pointer is the same than the part pointer,</span>
<a href="#l141.31"></a><span id="l141.31" class="difflineminus">-                 therefore be carefull to not freeing twice the same pointer */</span>
<a href="#l141.32"></a><span id="l141.32" class="difflineplus">+                 therefore be careful to not freeing twice the same pointer */</span>
<a href="#l141.33"></a><span id="l141.33">               if (temp &amp;&amp; temp != part)</span>
<a href="#l141.34"></a><span id="l141.34">                 PR_Free(temp);</span>
<a href="#l141.35"></a><span id="l141.35">               PR_Free(part);</span>
<a href="#l141.36"></a><span id="l141.36">             }</span>
<a href="#l141.37"></a><span id="l141.37">           }</span>
<a href="#l141.38"></a><span id="l141.38">         }</span>
<a href="#l141.39"></a><span id="l141.39">       }</span>
<a href="#l141.40"></a><span id="l141.40">   } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l142.1"></a><span id="l142.1" class="difflineminus">--- a/mailnews/mime/src/mimemsg.cpp</span>
<a href="#l142.2"></a><span id="l142.2" class="difflineplus">+++ b/mailnews/mime/src/mimemsg.cpp</span>
<a href="#l142.3"></a><span id="l142.3" class="difflineat">@@ -399,17 +399,17 @@ MimeMessage_close_headers (MimeObject *o</span>
<a href="#l142.4"></a><span id="l142.4">       if (mv &amp;&amp; !ct)</span>
<a href="#l142.5"></a><span id="l142.5">         ct = strdup(TEXT_PLAIN);</span>
<a href="#l142.6"></a><span id="l142.6">       }</span>
<a href="#l142.7"></a><span id="l142.7"> </span>
<a href="#l142.8"></a><span id="l142.8">     PR_FREEIF(mv);  /* done with this now. */</span>
<a href="#l142.9"></a><span id="l142.9">     }</span>
<a href="#l142.10"></a><span id="l142.10"> </span>
<a href="#l142.11"></a><span id="l142.11">     /* If this message has a body which is encrypted and we're going to</span>
<a href="#l142.12"></a><span id="l142.12" class="difflineminus">-       decrypt it (whithout converting it to HTML, since decrypt_p and</span>
<a href="#l142.13"></a><span id="l142.13" class="difflineplus">+       decrypt it (without converting it to HTML, since decrypt_p and</span>
<a href="#l142.14"></a><span id="l142.14">        write_html_p are never true at the same time)</span>
<a href="#l142.15"></a><span id="l142.15">     */</span>
<a href="#l142.16"></a><span id="l142.16">     if (obj-&gt;output_p &amp;&amp;</span>
<a href="#l142.17"></a><span id="l142.17">         obj-&gt;options &amp;&amp;</span>
<a href="#l142.18"></a><span id="l142.18">         obj-&gt;options-&gt;decrypt_p</span>
<a href="#l142.19"></a><span id="l142.19"> #ifdef ENABLE_SMIME</span>
<a href="#l142.20"></a><span id="l142.20">         &amp;&amp; !mime_crypto_object_p (msg-&gt;hdrs, false)</span>
<a href="#l142.21"></a><span id="l142.21"> #endif /* ENABLE_SMIME */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l143.1"></a><span id="l143.1" class="difflineminus">--- a/mailnews/mime/src/mimemsig.cpp</span>
<a href="#l143.2"></a><span id="l143.2" class="difflineplus">+++ b/mailnews/mime/src/mimemsig.cpp</span>
<a href="#l143.3"></a><span id="l143.3" class="difflineat">@@ -175,17 +175,17 @@ MimeMultipartSigned_parse_line (const ch</span>
<a href="#l143.4"></a><span id="l143.4">     {</span>
<a href="#l143.5"></a><span id="l143.5">     case MimeMultipartPreamble:</span>
<a href="#l143.6"></a><span id="l143.6">       PR_ASSERT(0);  /* can't move *in* to preamble state. */</span>
<a href="#l143.7"></a><span id="l143.7">       sig-&gt;state = MimeMultipartSignedPreamble;</span>
<a href="#l143.8"></a><span id="l143.8">       break;</span>
<a href="#l143.9"></a><span id="l143.9"> </span>
<a href="#l143.10"></a><span id="l143.10">     case MimeMultipartHeaders:</span>
<a href="#l143.11"></a><span id="l143.11">       /* If we're moving in to the Headers state, then that means</span>
<a href="#l143.12"></a><span id="l143.12" class="difflineminus">-       that this line is the preceeding boundary string (and we</span>
<a href="#l143.13"></a><span id="l143.13" class="difflineplus">+       that this line is the preceding boundary string (and we</span>
<a href="#l143.14"></a><span id="l143.14">        should ignore it.)</span>
<a href="#l143.15"></a><span id="l143.15">        */</span>
<a href="#l143.16"></a><span id="l143.16">       hash_line_p = false;</span>
<a href="#l143.17"></a><span id="l143.17"> </span>
<a href="#l143.18"></a><span id="l143.18">       if (sig-&gt;state == MimeMultipartSignedPreamble)</span>
<a href="#l143.19"></a><span id="l143.19">       sig-&gt;state = MimeMultipartSignedBodyFirstHeader;</span>
<a href="#l143.20"></a><span id="l143.20">       else if (sig-&gt;state == MimeMultipartSignedBodyFirstLine ||</span>
<a href="#l143.21"></a><span id="l143.21">            sig-&gt;state == MimeMultipartSignedBodyLine)</span>
<a href="#l143.22"></a><span id="l143.22" class="difflineat">@@ -289,34 +289,34 @@ MimeMultipartSigned_parse_line (const ch</span>
<a href="#l143.23"></a><span id="l143.23">       sig-&gt;state = MimeMultipartSignedBodyHeaders;</span>
<a href="#l143.24"></a><span id="l143.24"> </span>
<a href="#l143.25"></a><span id="l143.25">       /* The newline issues here are tricky, since both the newlines</span>
<a href="#l143.26"></a><span id="l143.26">        before and after the boundary string are to be considered part</span>
<a href="#l143.27"></a><span id="l143.27">        of the boundary: this is so that a part can be specified such</span>
<a href="#l143.28"></a><span id="l143.28">        that it does not end in a trailing newline.</span>
<a href="#l143.29"></a><span id="l143.29"> </span>
<a href="#l143.30"></a><span id="l143.30">        To implement this, we send a newline *before* each line instead</span>
<a href="#l143.31"></a><span id="l143.31" class="difflineminus">-       of after, except for the first line, which is not preceeded by a</span>
<a href="#l143.32"></a><span id="l143.32" class="difflineplus">+       of after, except for the first line, which is not preceded by a</span>
<a href="#l143.33"></a><span id="l143.33">        newline.</span>
<a href="#l143.34"></a><span id="l143.34"> </span>
<a href="#l143.35"></a><span id="l143.35">        For purposes of cryptographic hashing, we always hash line</span>
<a href="#l143.36"></a><span id="l143.36">        breaks as CRLF -- the canonical, on-the-wire linebreaks, since</span>
<a href="#l143.37"></a><span id="l143.37">        we have no idea of knowing what line breaks were used on the</span>
<a href="#l143.38"></a><span id="l143.38">        originating system (SMTP rightly destroys that information.)</span>
<a href="#l143.39"></a><span id="l143.39">        */</span>
<a href="#l143.40"></a><span id="l143.40"> </span>
<a href="#l143.41"></a><span id="l143.41">       /* Remove the trailing newline... */</span>
<a href="#l143.42"></a><span id="l143.42">       if (length &gt; 0 &amp;&amp; line[length-1] == '\n') length--;</span>
<a href="#l143.43"></a><span id="l143.43">       if (length &gt; 0 &amp;&amp; line[length-1] == '\r') length--;</span>
<a href="#l143.44"></a><span id="l143.44"> </span>
<a href="#l143.45"></a><span id="l143.45">       PR_ASSERT(sig-&gt;crypto_closure);</span>
<a href="#l143.46"></a><span id="l143.46"> </span>
<a href="#l143.47"></a><span id="l143.47">       if (!first_line_p)</span>
<a href="#l143.48"></a><span id="l143.48">       {</span>
<a href="#l143.49"></a><span id="l143.49" class="difflineminus">-        /* Push out a preceeding newline... */</span>
<a href="#l143.50"></a><span id="l143.50" class="difflineplus">+        /* Push out a preceding newline... */</span>
<a href="#l143.51"></a><span id="l143.51">         char nl[] = CRLF;</span>
<a href="#l143.52"></a><span id="l143.52">         status = (((MimeMultipartSignedClass *) obj-&gt;clazz)</span>
<a href="#l143.53"></a><span id="l143.53">             -&gt;crypto_data_hash (nl, 2, sig-&gt;crypto_closure));</span>
<a href="#l143.54"></a><span id="l143.54">         if (status &lt; 0) return status;</span>
<a href="#l143.55"></a><span id="l143.55">       }</span>
<a href="#l143.56"></a><span id="l143.56"> </span>
<a href="#l143.57"></a><span id="l143.57">       /* Now push out the line sans trailing newline. */</span>
<a href="#l143.58"></a><span id="l143.58">       if (length &gt; 0)</span>
<a href="#l143.59"></a><span id="l143.59" class="difflineat">@@ -513,31 +513,31 @@ MimeMultipartSigned_parse_child_line (Mi</span>
<a href="#l143.60"></a><span id="l143.60">      */</span>
<a href="#l143.61"></a><span id="l143.61"> </span>
<a href="#l143.62"></a><span id="l143.62">     /* The newline issues here are tricky, since both the newlines</span>
<a href="#l143.63"></a><span id="l143.63">        before and after the boundary string are to be considered part</span>
<a href="#l143.64"></a><span id="l143.64">        of the boundary: this is so that a part can be specified such</span>
<a href="#l143.65"></a><span id="l143.65">        that it does not end in a trailing newline.</span>
<a href="#l143.66"></a><span id="l143.66"> </span>
<a href="#l143.67"></a><span id="l143.67">        To implement this, we send a newline *before* each line instead</span>
<a href="#l143.68"></a><span id="l143.68" class="difflineminus">-       of after, except for the first line, which is not preceeded by a</span>
<a href="#l143.69"></a><span id="l143.69" class="difflineplus">+       of after, except for the first line, which is not preceded by a</span>
<a href="#l143.70"></a><span id="l143.70">        newline.</span>
<a href="#l143.71"></a><span id="l143.71">      */</span>
<a href="#l143.72"></a><span id="l143.72"> </span>
<a href="#l143.73"></a><span id="l143.73">     /* Remove the trailing newline... */</span>
<a href="#l143.74"></a><span id="l143.74">     if (length &gt; 0 &amp;&amp; line[length-1] == '\n') length--;</span>
<a href="#l143.75"></a><span id="l143.75">     if (length &gt; 0 &amp;&amp; line[length-1] == '\r') length--;</span>
<a href="#l143.76"></a><span id="l143.76"> </span>
<a href="#l143.77"></a><span id="l143.77">     PR_ASSERT(sig-&gt;part_buffer);</span>
<a href="#l143.78"></a><span id="l143.78">     PR_ASSERT(first_line_p ==</span>
<a href="#l143.79"></a><span id="l143.79">           (sig-&gt;state == MimeMultipartSignedBodyFirstLine));</span>
<a href="#l143.80"></a><span id="l143.80"> </span>
<a href="#l143.81"></a><span id="l143.81">     if (!first_line_p)</span>
<a href="#l143.82"></a><span id="l143.82">       {</span>
<a href="#l143.83"></a><span id="l143.83" class="difflineminus">-      /* Push out a preceeding newline... */</span>
<a href="#l143.84"></a><span id="l143.84" class="difflineplus">+      /* Push out a preceding newline... */</span>
<a href="#l143.85"></a><span id="l143.85">       char nl[] = MSG_LINEBREAK;</span>
<a href="#l143.86"></a><span id="l143.86">       status = MimePartBufferWrite (sig-&gt;part_buffer, nl, MSG_LINEBREAK_LEN);</span>
<a href="#l143.87"></a><span id="l143.87">       if (status &lt; 0) return status;</span>
<a href="#l143.88"></a><span id="l143.88">       }</span>
<a href="#l143.89"></a><span id="l143.89"> </span>
<a href="#l143.90"></a><span id="l143.90">     /* Now push out the line sans trailing newline. */</span>
<a href="#l143.91"></a><span id="l143.91">     if (length &gt; 0)</span>
<a href="#l143.92"></a><span id="l143.92">       status = MimePartBufferWrite (sig-&gt;part_buffer, line, length);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l144.1"></a><span id="l144.1" class="difflineminus">--- a/mailnews/mime/src/mimemult.cpp</span>
<a href="#l144.2"></a><span id="l144.2" class="difflineplus">+++ b/mailnews/mime/src/mimemult.cpp</span>
<a href="#l144.3"></a><span id="l144.3" class="difflineat">@@ -633,27 +633,27 @@ MimeMultipart_parse_child_line (MimeObje</span>
<a href="#l144.4"></a><span id="l144.4"> #endif /* MIME_DRAFTS */</span>
<a href="#l144.5"></a><span id="l144.5"> </span>
<a href="#l144.6"></a><span id="l144.6">   /* The newline issues here are tricky, since both the newlines before</span>
<a href="#l144.7"></a><span id="l144.7">    and after the boundary string are to be considered part of the</span>
<a href="#l144.8"></a><span id="l144.8">    boundary: this is so that a part can be specified such that it</span>
<a href="#l144.9"></a><span id="l144.9">    does not end in a trailing newline.</span>
<a href="#l144.10"></a><span id="l144.10"> </span>
<a href="#l144.11"></a><span id="l144.11">    To implement this, we send a newline *before* each line instead</span>
<a href="#l144.12"></a><span id="l144.12" class="difflineminus">-   of after, except for the first line, which is not preceeded by a</span>
<a href="#l144.13"></a><span id="l144.13" class="difflineplus">+   of after, except for the first line, which is not preceded by a</span>
<a href="#l144.14"></a><span id="l144.14">    newline.</span>
<a href="#l144.15"></a><span id="l144.15">    */</span>
<a href="#l144.16"></a><span id="l144.16"> </span>
<a href="#l144.17"></a><span id="l144.17">   /* Remove the trailing newline... */</span>
<a href="#l144.18"></a><span id="l144.18">   if (length &gt; 0 &amp;&amp; line[length-1] == '\n') length--;</span>
<a href="#l144.19"></a><span id="l144.19">   if (length &gt; 0 &amp;&amp; line[length-1] == '\r') length--;</span>
<a href="#l144.20"></a><span id="l144.20"> </span>
<a href="#l144.21"></a><span id="l144.21">   if (!first_line_p)</span>
<a href="#l144.22"></a><span id="l144.22">   {</span>
<a href="#l144.23"></a><span id="l144.23" class="difflineminus">-    /* Push out a preceeding newline... */</span>
<a href="#l144.24"></a><span id="l144.24" class="difflineplus">+    /* Push out a preceding newline... */</span>
<a href="#l144.25"></a><span id="l144.25">     char nl[] = MSG_LINEBREAK;</span>
<a href="#l144.26"></a><span id="l144.26">     status = kid-&gt;clazz-&gt;parse_buffer (nl, MSG_LINEBREAK_LEN, kid);</span>
<a href="#l144.27"></a><span id="l144.27">     if (status &lt; 0) return status;</span>
<a href="#l144.28"></a><span id="l144.28">   }</span>
<a href="#l144.29"></a><span id="l144.29"> </span>
<a href="#l144.30"></a><span id="l144.30">   /* Now push out the line sans trailing newline. */</span>
<a href="#l144.31"></a><span id="l144.31">   return kid-&gt;clazz-&gt;parse_buffer (line, length, kid);</span>
<a href="#l144.32"></a><span id="l144.32"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l145.1"></a><span id="l145.1" class="difflineminus">--- a/mailnews/mime/src/mimeobj.h</span>
<a href="#l145.2"></a><span id="l145.2" class="difflineplus">+++ b/mailnews/mime/src/mimeobj.h</span>
<a href="#l145.3"></a><span id="l145.3" class="difflineat">@@ -86,17 +86,17 @@</span>
<a href="#l145.4"></a><span id="l145.4"> </span>
<a href="#l145.5"></a><span id="l145.5">      This method should return true if this class of object will be displayed</span>
<a href="#l145.6"></a><span id="l145.6">      directly, as opposed to being displayed as a link.  This information is</span>
<a href="#l145.7"></a><span id="l145.7">      used by the &quot;multipart/alternative&quot; parser to decide which of its children</span>
<a href="#l145.8"></a><span id="l145.8">      is the ``best'' one to display.   Note that this is a class method, not</span>
<a href="#l145.9"></a><span id="l145.9">      an object method -- there is not yet an instance of this class at the time</span>
<a href="#l145.10"></a><span id="l145.10">      that it is called.  The `hdrs' provided are the headers of the object that</span>
<a href="#l145.11"></a><span id="l145.11">    might be instantiated -- from this, the method may extract additional</span>
<a href="#l145.12"></a><span id="l145.12" class="difflineminus">-   infomation that it might need to make its decision.</span>
<a href="#l145.13"></a><span id="l145.13" class="difflineplus">+   information that it might need to make its decision.</span>
<a href="#l145.14"></a><span id="l145.14">  */</span>
<a href="#l145.15"></a><span id="l145.15"> </span>
<a href="#l145.16"></a><span id="l145.16"> </span>
<a href="#l145.17"></a><span id="l145.17"> /* this one is typdedef'ed in mimei.h, since it is the base-class. */</span>
<a href="#l145.18"></a><span id="l145.18"> struct MimeObjectClass {</span>
<a href="#l145.19"></a><span id="l145.19"> </span>
<a href="#l145.20"></a><span id="l145.20">   /* Note: the order of these first five slots is known by MimeDefClass().</span>
<a href="#l145.21"></a><span id="l145.21">    Technically, these are part of the object system, not the MIME code.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l146.1"></a><span id="l146.1" class="difflineminus">--- a/mailnews/mime/src/mimethpl.cpp</span>
<a href="#l146.2"></a><span id="l146.2" class="difflineplus">+++ b/mailnews/mime/src/mimethpl.cpp</span>
<a href="#l146.3"></a><span id="l146.3" class="difflineat">@@ -142,21 +142,21 @@ MimeInlineTextHTMLAsPlaintext_parse_line</span>
<a href="#l146.4"></a><span id="l146.4">   {</span>
<a href="#l146.5"></a><span id="l146.5"> #if DEBUG</span>
<a href="#l146.6"></a><span id="l146.6"> printf(&quot;Can't output: %s\n&quot;, line);</span>
<a href="#l146.7"></a><span id="l146.7"> #endif</span>
<a href="#l146.8"></a><span id="l146.8">     return -1;</span>
<a href="#l146.9"></a><span id="l146.9">   }</span>
<a href="#l146.10"></a><span id="l146.10"> </span>
<a href="#l146.11"></a><span id="l146.11">   /*</span>
<a href="#l146.12"></a><span id="l146.12" class="difflineminus">-    To convert HTML-&gt;TXT syncronously, I need the full source at once,</span>
<a href="#l146.13"></a><span id="l146.13" class="difflineplus">+    To convert HTML-&gt;TXT synchronously, I need the full source at once,</span>
<a href="#l146.14"></a><span id="l146.14">     not line by line (how do you convert &quot;&lt;li&gt;foo\n&quot; to plaintext?).</span>
<a href="#l146.15"></a><span id="l146.15">     parse_decoded_buffer claims to give me that, but in fact also gives</span>
<a href="#l146.16"></a><span id="l146.16">     me single lines.</span>
<a href="#l146.17"></a><span id="l146.17" class="difflineminus">-    It might be theoretically possible to drive this asyncronously, but</span>
<a href="#l146.18"></a><span id="l146.18" class="difflineplus">+    It might be theoretically possible to drive this asynchronously, but</span>
<a href="#l146.19"></a><span id="l146.19">     I don't know, which odd circumstances might arise and how libmime</span>
<a href="#l146.20"></a><span id="l146.20">     will behave then. It's not worth the trouble for me to figure this all out.</span>
<a href="#l146.21"></a><span id="l146.21">    */</span>
<a href="#l146.22"></a><span id="l146.22">   nsCString linestr(line, length);</span>
<a href="#l146.23"></a><span id="l146.23">   NS_ConvertUTF8toUTF16 line_ucs2(linestr.get());</span>
<a href="#l146.24"></a><span id="l146.24">   if (length &amp;&amp; line_ucs2.IsEmpty())</span>
<a href="#l146.25"></a><span id="l146.25">     CopyASCIItoUTF16 (linestr, line_ucs2);</span>
<a href="#l146.26"></a><span id="l146.26">   (textHTMLPlain-&gt;complete_buffer)-&gt;Append(line_ucs2);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l147.1"></a><span id="l147.1" class="difflineminus">--- a/mailnews/mime/src/mimetric.cpp</span>
<a href="#l147.2"></a><span id="l147.2" class="difflineplus">+++ b/mailnews/mime/src/mimetric.cpp</span>
<a href="#l147.3"></a><span id="l147.3" class="difflineat">@@ -35,17 +35,17 @@ MimeInlineTextRichtextClassInitialize(Mi</span>
<a href="#l147.4"></a><span id="l147.4"> int</span>
<a href="#l147.5"></a><span id="l147.5"> MimeRichtextConvert (const char *line, int32_t length,</span>
<a href="#l147.6"></a><span id="l147.6">            MimeObject *obj,</span>
<a href="#l147.7"></a><span id="l147.7">            char **obufferP,</span>
<a href="#l147.8"></a><span id="l147.8">            int32_t *obuffer_sizeP,</span>
<a href="#l147.9"></a><span id="l147.9">            bool enriched_p)</span>
<a href="#l147.10"></a><span id="l147.10"> {</span>
<a href="#l147.11"></a><span id="l147.11">   /* RFC 1341 (the original MIME spec) defined text/richtext.</span>
<a href="#l147.12"></a><span id="l147.12" class="difflineminus">-   RFC 1563 superceded text/richtext with text/enriched.</span>
<a href="#l147.13"></a><span id="l147.13" class="difflineplus">+   RFC 1563 superseded text/richtext with text/enriched.</span>
<a href="#l147.14"></a><span id="l147.14">    The changes from text/richtext to text/enriched are:</span>
<a href="#l147.15"></a><span id="l147.15">     - CRLF semantics are different</span>
<a href="#l147.16"></a><span id="l147.16">     - &lt;&lt; maps to &lt;</span>
<a href="#l147.17"></a><span id="l147.17">     - These tags were added:</span>
<a href="#l147.18"></a><span id="l147.18">        &lt;VERBATIM&gt;, &lt;NOFILL&gt;, &lt;PARAM&gt;, &lt;FLUSHBOTH&gt;</span>
<a href="#l147.19"></a><span id="l147.19">     - These tags were removed:</span>
<a href="#l147.20"></a><span id="l147.20">        &lt;COMMENT&gt;, &lt;OUTDENT&gt;, &lt;OUTDENTRIGHT&gt;, &lt;SAMEPAGE&gt;, &lt;SUBSCRIPT&gt;,</span>
<a href="#l147.21"></a><span id="l147.21">          &lt;SUPERSCRIPT&gt;, &lt;HEADING&gt;, &lt;FOOTING&gt;, &lt;PARAGRAPH&gt;, &lt;SIGNATURE&gt;,</span>
<a href="#l147.22"></a><span id="l147.22" class="difflineat">@@ -120,17 +120,17 @@ MimeRichtextConvert (const char *line, i</span>
<a href="#l147.23"></a><span id="l147.23">          !IS_SPACE(*this_end) &amp;&amp;</span>
<a href="#l147.24"></a><span id="l147.24">          *this_end != '&lt;' &amp;&amp; *this_end != '&gt;' &amp;&amp;</span>
<a href="#l147.25"></a><span id="l147.25">          *this_end != '&amp;')</span>
<a href="#l147.26"></a><span id="l147.26">       this_end++;</span>
<a href="#l147.27"></a><span id="l147.27">     }</span>
<a href="#l147.28"></a><span id="l147.28"> </span>
<a href="#l147.29"></a><span id="l147.29">     this_end++;</span>
<a href="#l147.30"></a><span id="l147.30"> </span>
<a href="#l147.31"></a><span id="l147.31" class="difflineminus">-    /* Push out the text preceeding the tag. */</span>
<a href="#l147.32"></a><span id="l147.32" class="difflineplus">+    /* Push out the text preceding the tag. */</span>
<a href="#l147.33"></a><span id="l147.33">     if (last_end &amp;&amp; last_end != this_start)</span>
<a href="#l147.34"></a><span id="l147.34">     {</span>
<a href="#l147.35"></a><span id="l147.35">       memcpy (out, last_end, this_start - last_end);</span>
<a href="#l147.36"></a><span id="l147.36">       out += this_start - last_end;</span>
<a href="#l147.37"></a><span id="l147.37">       *out = 0;</span>
<a href="#l147.38"></a><span id="l147.38">       outlen -= (this_start - last_end);</span>
<a href="#l147.39"></a><span id="l147.39">     }</span>
<a href="#l147.40"></a><span id="l147.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l148.1"></a><span id="l148.1" class="difflineminus">--- a/mailnews/mime/src/nsStreamConverter.cpp</span>
<a href="#l148.2"></a><span id="l148.2" class="difflineplus">+++ b/mailnews/mime/src/nsStreamConverter.cpp</span>
<a href="#l148.3"></a><span id="l148.3" class="difflineat">@@ -846,17 +846,17 @@ nsStreamConverter::GetOrigMsgHdr(nsIMsgD</span>
<a href="#l148.4"></a><span id="l148.4">   return NS_OK;</span>
<a href="#l148.5"></a><span id="l148.5"> }</span>
<a href="#l148.6"></a><span id="l148.6"> </span>
<a href="#l148.7"></a><span id="l148.7"> /////////////////////////////////////////////////////////////////////////////</span>
<a href="#l148.8"></a><span id="l148.8"> // Methods for nsIStreamListener...</span>
<a href="#l148.9"></a><span id="l148.9"> /////////////////////////////////////////////////////////////////////////////</span>
<a href="#l148.10"></a><span id="l148.10"> //</span>
<a href="#l148.11"></a><span id="l148.11"> // Notify the client that data is available in the input stream.  This</span>
<a href="#l148.12"></a><span id="l148.12" class="difflineminus">-// method is called whenver data is written into the input stream by the</span>
<a href="#l148.13"></a><span id="l148.13" class="difflineplus">+// method is called whenever data is written into the input stream by the</span>
<a href="#l148.14"></a><span id="l148.14"> // networking library...</span>
<a href="#l148.15"></a><span id="l148.15"> //</span>
<a href="#l148.16"></a><span id="l148.16"> nsresult</span>
<a href="#l148.17"></a><span id="l148.17"> nsStreamConverter::OnDataAvailable(nsIRequest     *request,</span>
<a href="#l148.18"></a><span id="l148.18">                                    nsISupports    *ctxt,</span>
<a href="#l148.19"></a><span id="l148.19">                                    nsIInputStream *aIStream,</span>
<a href="#l148.20"></a><span id="l148.20">                                    uint64_t       sourceOffset,</span>
<a href="#l148.21"></a><span id="l148.21">                                    uint32_t       aLength)</span>
<a href="#l148.22"></a><span id="l148.22" class="difflineat">@@ -1093,17 +1093,17 @@ nsresult nsStreamConverter::Close()</span>
<a href="#l148.23"></a><span id="l148.23">   mOutgoingChannel = nullptr;</span>
<a href="#l148.24"></a><span id="l148.24">   mEmitter = nullptr;</span>
<a href="#l148.25"></a><span id="l148.25">   mOutListener = nullptr;</span>
<a href="#l148.26"></a><span id="l148.26">   return NS_OK;</span>
<a href="#l148.27"></a><span id="l148.27"> }</span>
<a href="#l148.28"></a><span id="l148.28"> </span>
<a href="#l148.29"></a><span id="l148.29"> // nsIStreamConverter implementation</span>
<a href="#l148.30"></a><span id="l148.30"> </span>
<a href="#l148.31"></a><span id="l148.31" class="difflineminus">-// No syncronous conversion at this time.</span>
<a href="#l148.32"></a><span id="l148.32" class="difflineplus">+// No synchronous conversion at this time.</span>
<a href="#l148.33"></a><span id="l148.33"> NS_IMETHODIMP nsStreamConverter::Convert(nsIInputStream  *aFromStream,</span>
<a href="#l148.34"></a><span id="l148.34">                                          const char *aFromType,</span>
<a href="#l148.35"></a><span id="l148.35">                                          const char *aToType,</span>
<a href="#l148.36"></a><span id="l148.36">                                          nsISupports     *aCtxt,</span>
<a href="#l148.37"></a><span id="l148.37">                                          nsIInputStream **_retval)</span>
<a href="#l148.38"></a><span id="l148.38"> {</span>
<a href="#l148.39"></a><span id="l148.39">     return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l148.40"></a><span id="l148.40"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l149.1"></a><span id="l149.1" class="difflineminus">--- a/mailnews/news/public/nsINNTPNewsgroupList.idl</span>
<a href="#l149.2"></a><span id="l149.2" class="difflineplus">+++ b/mailnews/news/public/nsINNTPNewsgroupList.idl</span>
<a href="#l149.3"></a><span id="l149.3" class="difflineat">@@ -35,33 +35,33 @@ interface nsINNTPNewsgroupList : nsISupp</span>
<a href="#l149.4"></a><span id="l149.4">    * @param last_message   The last message of the download range.</span>
<a href="#l149.5"></a><span id="l149.5">    */</span>
<a href="#l149.6"></a><span id="l149.6">   void initXOVER(in long first_message, in long last_message);</span>
<a href="#l149.7"></a><span id="l149.7">   void processXOVERLINE(in string line, out unsigned long status);</span>
<a href="#l149.8"></a><span id="l149.8">   void resetXOVER();</span>
<a href="#l149.9"></a><span id="l149.9">   void finishXOVERLINE(in long status, out long newstatus);</span>
<a href="#l149.10"></a><span id="l149.10"> </span>
<a href="#l149.11"></a><span id="l149.11">   /**</span>
<a href="#l149.12"></a><span id="l149.12" class="difflineminus">-   * Initalizes the state in preparation for a call to XHDR.</span>
<a href="#l149.13"></a><span id="l149.13" class="difflineplus">+   * Initializes the state in preparation for a call to XHDR.</span>
<a href="#l149.14"></a><span id="l149.14">    *</span>
<a href="#l149.15"></a><span id="l149.15">    * @return               The next header to get, or an empty string if done.</span>
<a href="#l149.16"></a><span id="l149.16">    */</span>
<a href="#l149.17"></a><span id="l149.17">   ACString initXHDR();</span>
<a href="#l149.18"></a><span id="l149.18">   /**</span>
<a href="#l149.19"></a><span id="l149.19">    * Processes a line of the server's response to XHDR.</span>
<a href="#l149.20"></a><span id="l149.20">    *</span>
<a href="#l149.21"></a><span id="l149.21">    * It will calculate the message number and other information itself, so the</span>
<a href="#l149.22"></a><span id="l149.22">    * unadulterated line itself should be sent.</span>
<a href="#l149.23"></a><span id="l149.23">    *</span>
<a href="#l149.24"></a><span id="l149.24">    * @param aLine          The line as sent from the server.</span>
<a href="#l149.25"></a><span id="l149.25">    */</span>
<a href="#l149.26"></a><span id="l149.26">   void processXHDRLine(in ACString aLine);</span>
<a href="#l149.27"></a><span id="l149.27"> </span>
<a href="#l149.28"></a><span id="l149.28">   /**</span>
<a href="#l149.29"></a><span id="l149.29" class="difflineminus">-   * Initalizes the internal state to process a HEAD command.</span>
<a href="#l149.30"></a><span id="l149.30" class="difflineplus">+   * Initializes the internal state to process a HEAD command.</span>
<a href="#l149.31"></a><span id="l149.31">    *</span>
<a href="#l149.32"></a><span id="l149.32">    * This method should be called before sending the line</span>
<a href="#l149.33"></a><span id="l149.33">    * &lt;tt&gt;HEAD @arg aMessage&lt;/tt&gt; to the server.</span>
<a href="#l149.34"></a><span id="l149.34">    *</span>
<a href="#l149.35"></a><span id="l149.35">    * @param aMessage       The message number that will be sent.</span>
<a href="#l149.36"></a><span id="l149.36">    */</span>
<a href="#l149.37"></a><span id="l149.37">   void initHEAD(in long aMessage);</span>
<a href="#l149.38"></a><span id="l149.38">   /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l150.1"></a><span id="l150.1" class="difflineminus">--- a/mailnews/news/public/nsINNTPNewsgroupPost.idl</span>
<a href="#l150.2"></a><span id="l150.2" class="difflineplus">+++ b/mailnews/news/public/nsINNTPNewsgroupPost.idl</span>
<a href="#l150.3"></a><span id="l150.3" class="difflineat">@@ -23,17 +23,17 @@ interface nsINNTPNewsgroupPost : nsISupp</span>
<a href="#l150.4"></a><span id="l150.4">     attribute string date;</span>
<a href="#l150.5"></a><span id="l150.5"> </span>
<a href="#l150.6"></a><span id="l150.6">     void AddNewsgroup(in string newsgroupName);</span>
<a href="#l150.7"></a><span id="l150.7">     readonly attribute string newsgroups;</span>
<a href="#l150.8"></a><span id="l150.8"> </span>
<a href="#l150.9"></a><span id="l150.9">     attribute string subject;</span>
<a href="#l150.10"></a><span id="l150.10">     attribute string path;</span>
<a href="#l150.11"></a><span id="l150.11"> </span>
<a href="#l150.12"></a><span id="l150.12" class="difflineminus">-    /* Secion 2.2 - optional headers */</span>
<a href="#l150.13"></a><span id="l150.13" class="difflineplus">+    /* Section 2.2 - optional headers */</span>
<a href="#l150.14"></a><span id="l150.14">     attribute string replyTo;</span>
<a href="#l150.15"></a><span id="l150.15">     attribute string sender;</span>
<a href="#l150.16"></a><span id="l150.16">     attribute string followupTo;</span>
<a href="#l150.17"></a><span id="l150.17">     attribute string dateReceived;</span>
<a href="#l150.18"></a><span id="l150.18">     attribute string expires;</span>
<a href="#l150.19"></a><span id="l150.19"> </span>
<a href="#l150.20"></a><span id="l150.20">     readonly attribute string references;</span>
<a href="#l150.21"></a><span id="l150.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l151.1"></a><span id="l151.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPProtocol.h</span>
<a href="#l151.2"></a><span id="l151.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPProtocol.h</span>
<a href="#l151.3"></a><span id="l151.3" class="difflineat">@@ -36,17 +36,17 @@</span>
<a href="#l151.4"></a><span id="l151.4"> // commands, etc. I do not intend it to refer to protocol state)</span>
<a href="#l151.5"></a><span id="l151.5"> </span>
<a href="#l151.6"></a><span id="l151.6"> #define NNTP_PAUSE_FOR_READ      0x00000001  /* should we pause for the next read */</span>
<a href="#l151.7"></a><span id="l151.7"> #define NNTP_PROXY_AUTH_REQUIRED    0x00000002  /* is auth required */</span>
<a href="#l151.8"></a><span id="l151.8"> #define NNTP_SENT_PROXY_AUTH        0x00000004  /* have we sent a proxy auth? */</span>
<a href="#l151.9"></a><span id="l151.9"> #define NNTP_READER_PERFORMED       0x00000010  /* have we sent any cmds to the server yet? */</span>
<a href="#l151.10"></a><span id="l151.10"> #define NNTP_USE_FANCY_NEWSGROUP    0x00000020  /* use LIST XACTIVE or LIST */</span>
<a href="#l151.11"></a><span id="l151.11"> #define NNTP_DESTROY_PROGRESS_GRAPH 0x00000040  /* do we need to destroy graph progress */</span>
<a href="#l151.12"></a><span id="l151.12" class="difflineminus">-#define NNTP_SOME_PROTOCOL_SUCCEEDED 0x0000080  /* some protocol has suceeded so don't kill the connection */</span>
<a href="#l151.13"></a><span id="l151.13" class="difflineplus">+#define NNTP_SOME_PROTOCOL_SUCCEEDED 0x0000080  /* some protocol has succeeded so don't kill the connection */</span>
<a href="#l151.14"></a><span id="l151.14"> #define NNTP_NO_XOVER_SUPPORT       0x00000100  /* xover command is not supported here */</span>
<a href="#l151.15"></a><span id="l151.15"> </span>
<a href="#l151.16"></a><span id="l151.16"> /* states of the machine</span>
<a href="#l151.17"></a><span id="l151.17">  */</span>
<a href="#l151.18"></a><span id="l151.18"> typedef enum _StatesEnum {</span>
<a href="#l151.19"></a><span id="l151.19"> NNTP_RESPONSE,</span>
<a href="#l151.20"></a><span id="l151.20"> #ifdef BLOCK_UNTIL_AVAILABLE_CONNECTION</span>
<a href="#l151.21"></a><span id="l151.21"> NNTP_BLOCK_UNTIL_CONNECTIONS_ARE_AVAILABLE,</span>
<a href="#l151.22"></a><span id="l151.22" class="difflineat">@@ -166,17 +166,17 @@ private:</span>
<a href="#l151.23"></a><span id="l151.23">    *</span>
<a href="#l151.24"></a><span id="l151.24">    * This method additionally handles some states not covered by other methods:</span>
<a href="#l151.25"></a><span id="l151.25">    * NEWS_DONE: Alias for NEWS_FREE</span>
<a href="#l151.26"></a><span id="l151.26">    * NEWS_POST_DONE: Alias for NEWS_FREE that cleans up the URL state</span>
<a href="#l151.27"></a><span id="l151.27">    * NEWS_ERROR: An error which permits further use of the connection</span>
<a href="#l151.28"></a><span id="l151.28">    * NNTP_ERROR: An error which does not permit further use of the connection</span>
<a href="#l151.29"></a><span id="l151.29">    * NEWS_FREE: Cleans up from the current URL and prepares for the next one</span>
<a href="#l151.30"></a><span id="l151.30">    * NNTP_SUSPENDED: A state where the state machine does not read input until</span>
<a href="#l151.31"></a><span id="l151.31" class="difflineminus">-   *                 reenabled by a non-network related callback</span>
<a href="#l151.32"></a><span id="l151.32" class="difflineplus">+   *                 re-enabled by a non-network related callback</span>
<a href="#l151.33"></a><span id="l151.33">    *</span>
<a href="#l151.34"></a><span id="l151.34">    * @note Use of NNTP_SUSPENDED is dangerous: if input comes along the socket,</span>
<a href="#l151.35"></a><span id="l151.35">    * the code will not read the input stream at all. Therefore, it is strongly</span>
<a href="#l151.36"></a><span id="l151.36">    * advised to suspend the request before using this state.</span>
<a href="#l151.37"></a><span id="l151.37">    */</span>
<a href="#l151.38"></a><span id="l151.38">   virtual nsresult ProcessProtocolState(nsIURI * url, nsIInputStream * inputStream,</span>
<a href="#l151.39"></a><span id="l151.39">                                         uint64_t sourceOffset, uint32_t length) override;</span>
<a href="#l151.40"></a><span id="l151.40">   virtual nsresult CloseSocket() override;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l152.1"></a><span id="l152.1" class="difflineminus">--- a/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l152.2"></a><span id="l152.2" class="difflineplus">+++ b/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l152.3"></a><span id="l152.3" class="difflineat">@@ -989,17 +989,17 @@ nsMsgNewsFolder::HandleNewsrcLine(const </span>
<a href="#l152.4"></a><span id="l152.4">     return RememberLine(nsDependentCString(line));</span>
<a href="#l152.5"></a><span id="l152.5"> </span>
<a href="#l152.6"></a><span id="l152.6">   bool subscribed = (*s == ':');</span>
<a href="#l152.7"></a><span id="l152.7">   setStr = s+1;</span>
<a href="#l152.8"></a><span id="l152.8"> </span>
<a href="#l152.9"></a><span id="l152.9">   if (*line == '\0')</span>
<a href="#l152.10"></a><span id="l152.10">     return 0;</span>
<a href="#l152.11"></a><span id="l152.11"> </span>
<a href="#l152.12"></a><span id="l152.12" class="difflineminus">-  // previous versions of Communicator poluted the</span>
<a href="#l152.13"></a><span id="l152.13" class="difflineplus">+  // previous versions of Communicator polluted the</span>
<a href="#l152.14"></a><span id="l152.14">   // newsrc files with articles</span>
<a href="#l152.15"></a><span id="l152.15">   // (this would happen when you clicked on a link like</span>
<a href="#l152.16"></a><span id="l152.16">   // news://news.mozilla.org/3746EF3F.6080309@netscape.com)</span>
<a href="#l152.17"></a><span id="l152.17">   //</span>
<a href="#l152.18"></a><span id="l152.18">   // legal newsgroup names can't contain @ or %</span>
<a href="#l152.19"></a><span id="l152.19">   //</span>
<a href="#l152.20"></a><span id="l152.20">   // News group names are structured into parts separated by dots,</span>
<a href="#l152.21"></a><span id="l152.21">   // for example &quot;netscape.public.mozilla.mail-news&quot;.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l153.1"></a><span id="l153.1" class="difflineminus">--- a/mailnews/news/src/nsNntpService.h</span>
<a href="#l153.2"></a><span id="l153.2" class="difflineplus">+++ b/mailnews/news/src/nsNntpService.h</span>
<a href="#l153.3"></a><span id="l153.3" class="difflineat">@@ -52,23 +52,23 @@ protected:</span>
<a href="#l153.4"></a><span id="l153.4"> </span>
<a href="#l153.5"></a><span id="l153.5">   nsresult GetNntpServerByAccount(const char *aAccountKey, nsIMsgIncomingServer **aNntpServer);</span>
<a href="#l153.6"></a><span id="l153.6">   nsresult SetUpNntpUrlForPosting(const char *aAccountKey, char **newsUrlSpec);</span>
<a href="#l153.7"></a><span id="l153.7">   nsresult FindHostFromGroup(nsCString &amp;host, nsCString &amp;groupName);</span>
<a href="#l153.8"></a><span id="l153.8">   nsresult FindServerWithNewsgroup(nsCString &amp;host, nsCString &amp;groupName);</span>
<a href="#l153.9"></a><span id="l153.9"> </span>
<a href="#l153.10"></a><span id="l153.10">   nsresult CreateMessageIDURL(nsIMsgFolder *folder, nsMsgKey key, char **url);</span>
<a href="#l153.11"></a><span id="l153.11">   nsresult GetMessageFromUrl(nsIURI *aUrl, nsIMsgWindow *aMsgWindow, nsISupports *aDisplayConsumer);</span>
<a href="#l153.12"></a><span id="l153.12" class="difflineminus">-  // a convience routine used to put together news urls</span>
<a href="#l153.13"></a><span id="l153.13" class="difflineplus">+  // a convenience routine used to put together news urls</span>
<a href="#l153.14"></a><span id="l153.14">   nsresult ConstructNntpUrl(const char * urlString, nsIUrlListener *aUrlListener,  nsIMsgWindow * aMsgWindow, const char *originalMessageUri, int32_t action, nsIURI ** aUrl);</span>
<a href="#l153.15"></a><span id="l153.15">   nsresult CreateNewsAccount(const char *aHostname, bool aIsSecure, int32_t aPort, nsIMsgIncomingServer **aServer);</span>
<a href="#l153.16"></a><span id="l153.16">   nsresult GetServerForUri(nsIURI *aUri, nsINntpIncomingServer **aProtocol);</span>
<a href="#l153.17"></a><span id="l153.17" class="difflineminus">-  // a convience routine to run news urls</span>
<a href="#l153.18"></a><span id="l153.18" class="difflineplus">+  // a convenience routine to run news urls</span>
<a href="#l153.19"></a><span id="l153.19">   nsresult RunNewsUrl (nsIURI * aUrl, nsIMsgWindow *aMsgWindow, nsISupports * aConsumer);</span>
<a href="#l153.20"></a><span id="l153.20" class="difflineminus">-  // a convience routine to go from folder uri to msg folder</span>
<a href="#l153.21"></a><span id="l153.21" class="difflineplus">+  // a convenience routine to go from folder uri to msg folder</span>
<a href="#l153.22"></a><span id="l153.22">   nsresult GetFolderFromUri(const char *uri, nsIMsgFolder **folder);</span>
<a href="#l153.23"></a><span id="l153.23">   nsresult DecomposeNewsMessageURI(const char * aMessageURI, nsIMsgFolder ** aFolder, nsMsgKey *aMsgKey);</span>
<a href="#l153.24"></a><span id="l153.24"> </span>
<a href="#l153.25"></a><span id="l153.25">   bool              mPrintingOperation; // Flag for printing operations</span>
<a href="#l153.26"></a><span id="l153.26">   bool        mOpenAttachmentOperation; // Flag for opening attachments</span>
<a href="#l153.27"></a><span id="l153.27"> </span>
<a href="#l153.28"></a><span id="l153.28">   nsCOMPtr&lt;nsICacheStorage&gt; mCacheStorage; // the cache storage used by news</span>
<a href="#l153.29"></a><span id="l153.29"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l154.1"></a><span id="l154.1" class="difflineminus">--- a/mailnews/test/fakeserver/nntpd.js</span>
<a href="#l154.2"></a><span id="l154.2" class="difflineplus">+++ b/mailnews/test/fakeserver/nntpd.js</span>
<a href="#l154.3"></a><span id="l154.3" class="difflineat">@@ -546,17 +546,17 @@ subclass(NNTP_RFC4643_extension, NNTP_RF</span>
<a href="#l154.4"></a><span id="l154.4">       if (this.requireBoth)</span>
<a href="#l154.5"></a><span id="l154.5">         return &quot;381 Password required&quot;;</span>
<a href="#l154.6"></a><span id="l154.6"> </span>
<a href="#l154.7"></a><span id="l154.7">       this.authenticated = this.lastGroupTried ? this.lastGroupTried : true;</span>
<a href="#l154.8"></a><span id="l154.8">       return &quot;281 Authentication Accepted&quot;;</span>
<a href="#l154.9"></a><span id="l154.9">     }</span>
<a href="#l154.10"></a><span id="l154.10">     else if (action == &quot;pass&quot;) {</span>
<a href="#l154.11"></a><span id="l154.11">       if (!this.requireBoth || !this.usernameReceived)</span>
<a href="#l154.12"></a><span id="l154.12" class="difflineminus">-        return &quot;482 Authetication commands issued out of sequence&quot;;</span>
<a href="#l154.13"></a><span id="l154.13" class="difflineplus">+        return &quot;482 Authentication commands issued out of sequence&quot;;</span>
<a href="#l154.14"></a><span id="l154.14"> </span>
<a href="#l154.15"></a><span id="l154.15">       this.usernameReceived = false;</span>
<a href="#l154.16"></a><span id="l154.16"> </span>
<a href="#l154.17"></a><span id="l154.17">       var expectPassword = this.lastGroupTried</span>
<a href="#l154.18"></a><span id="l154.18">         ? this._daemon.groupCredentials[this.lastGroupTried][1]</span>
<a href="#l154.19"></a><span id="l154.19">         : this.expectedPassword;</span>
<a href="#l154.20"></a><span id="l154.20">       if (param != expectPassword)</span>
<a href="#l154.21"></a><span id="l154.21">         return &quot;481 Authentication failed&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l155.1"></a><span id="l155.1" class="difflineminus">--- a/mailnews/test/resources/logHelper.js</span>
<a href="#l155.2"></a><span id="l155.2" class="difflineplus">+++ b/mailnews/test/resources/logHelper.js</span>
<a href="#l155.3"></a><span id="l155.3" class="difflineat">@@ -250,17 +250,17 @@ function mark_sub_test_start(aName, aPar</span>
<a href="#l155.4"></a><span id="l155.4"> function mark_sub_test_end() {</span>
<a href="#l155.5"></a><span id="l155.5">   if (_testLoggerContexts.length &lt;= 1)</span>
<a href="#l155.6"></a><span id="l155.6">     return;</span>
<a href="#l155.7"></a><span id="l155.7">   mark_test_end(_testLoggerContexts.length - 1);</span>
<a href="#l155.8"></a><span id="l155.8"> }</span>
<a href="#l155.9"></a><span id="l155.9"> </span>
<a href="#l155.10"></a><span id="l155.10"> /**</span>
<a href="#l155.11"></a><span id="l155.11">  * Express that all tests were run to completion.  This helps the listener</span>
<a href="#l155.12"></a><span id="l155.12" class="difflineminus">- *  distinguish between succesful termination and abort-style termination where</span>
<a href="#l155.13"></a><span id="l155.13" class="difflineplus">+ *  distinguish between successful termination and abort-style termination where</span>
<a href="#l155.14"></a><span id="l155.14">  *  the process just keeled over and on one told us.</span>
<a href="#l155.15"></a><span id="l155.15">  *</span>
<a href="#l155.16"></a><span id="l155.16">  * This also tells us to clean up.</span>
<a href="#l155.17"></a><span id="l155.17">  */</span>
<a href="#l155.18"></a><span id="l155.18"> function mark_all_tests_run() {</span>
<a href="#l155.19"></a><span id="l155.19">   // make sure all tests get closed out</span>
<a href="#l155.20"></a><span id="l155.20">   mark_test_end();</span>
<a href="#l155.21"></a><span id="l155.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l156.1"></a><span id="l156.1" class="difflineminus">--- a/mailnews/test/resources/mailTestUtils.js</span>
<a href="#l156.2"></a><span id="l156.2" class="difflineplus">+++ b/mailnews/test/resources/mailTestUtils.js</span>
<a href="#l156.3"></a><span id="l156.3" class="difflineat">@@ -222,17 +222,17 @@ var mailTestUtils = {</span>
<a href="#l156.4"></a><span id="l156.4">    *</span>
<a href="#l156.5"></a><span id="l156.5">    * @param aFile The file to mark as sparse.</span>
<a href="#l156.6"></a><span id="l156.6">    * @param aRegionStart The start position of the sparse region, in bytes.</span>
<a href="#l156.7"></a><span id="l156.7">    * @param aRegionBytes The number of bytes to mark as sparse.</span>
<a href="#l156.8"></a><span id="l156.8">    * @return Whether the OS and file system supports marking files as sparse. If</span>
<a href="#l156.9"></a><span id="l156.9">    *          this is true, then the file has been marked as sparse. If this is</span>
<a href="#l156.10"></a><span id="l156.10">    *          false, then the underlying system doesn't support marking files as</span>
<a href="#l156.11"></a><span id="l156.11">    *          sparse. If an exception is thrown, then the system does support</span>
<a href="#l156.12"></a><span id="l156.12" class="difflineminus">-   *          marking files as sparse, but an error occured while doing so.</span>
<a href="#l156.13"></a><span id="l156.13" class="difflineplus">+   *          marking files as sparse, but an error occurred while doing so.</span>
<a href="#l156.14"></a><span id="l156.14">    *</span>
<a href="#l156.15"></a><span id="l156.15">    */</span>
<a href="#l156.16"></a><span id="l156.16">   mark_file_region_sparse: function(aFile, aRegionStart, aRegionBytes) {</span>
<a href="#l156.17"></a><span id="l156.17">     let fileSystem = this.get_file_system(aFile);</span>
<a href="#l156.18"></a><span id="l156.18">     dump(&quot;[mark_file_region_sparse()] File system = &quot; + (fileSystem || &quot;(unknown)&quot;) +</span>
<a href="#l156.19"></a><span id="l156.19">            &quot;, file region = at &quot; + this.toMiBString(aRegionStart) +</span>
<a href="#l156.20"></a><span id="l156.20">            &quot; for &quot; + this.toMiBString(aRegionBytes) + &quot;\n&quot;);</span>
<a href="#l156.21"></a><span id="l156.21"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

