<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 16705:8f57b03404285702405cfb4516765e5ad83e4193</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 8f57b03404285702405cfb4516765e5ad83e4193" />
<meta property="og:url" content="/comm-central/rev/8f57b03404285702405cfb4516765e5ad83e4193" />
<meta property="og:description" content="Bug 1040009 - Run mozilla-central's configure from the objdir, not objdir/mozilla, r=Standard8 CLOSED TREE." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 8f57b03404285702405cfb4516765e5ad83e4193 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/8f57b03404285702405cfb4516765e5ad83e4193">shortlog</a> |
<a href="/comm-central/log/8f57b03404285702405cfb4516765e5ad83e4193">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/8f57b03404285702405cfb4516765e5ad83e4193">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/8f57b03404285702405cfb4516765e5ad83e4193">files</a> |
changeset |
<a href="/comm-central/raw-rev/8f57b03404285702405cfb4516765e5ad83e4193">raw</a>  | <a href="/comm-central/archive/8f57b03404285702405cfb4516765e5ad83e4193.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1040009">Bug 1040009</a> - Run mozilla-central's configure from the objdir, not objdir/mozilla, r=Standard8 CLOSED TREE.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#115;&#104;&#117;&#97;&#32;&#67;&#114;&#97;&#110;&#109;&#101;&#114;&#32;&#60;&#80;&#105;&#100;&#103;&#101;&#111;&#116;&#49;&#56;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 27 Aug 2014 10:09:55 -0500</td></tr>

<tr>
 <td>changeset 16705</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/8f57b03404285702405cfb4516765e5ad83e4193">8f57b03404285702405cfb4516765e5ad83e4193</a></td>
</tr>



<tr>
<td>parent 16704</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/200a55b73ed0329af84705907ab0b29c1079554c">200a55b73ed0329af84705907ab0b29c1079554c</a>
</td>
</tr>

<tr>
<td>child 16706</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/148e7a1145c4b1c5e087074e57c032a8c2c8ac28">148e7a1145c4b1c5e087074e57c032a8c2c8ac28</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=8f57b03404285702405cfb4516765e5ad83e4193">10395</a></td></tr>
<tr><td>push user</td><td>Pidgeot18@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 27 Aug 2014 15:10:44 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@8f57b0340428 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8f57b03404285702405cfb4516765e5ad83e4193">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=8f57b03404285702405cfb4516765e5ad83e4193&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8f57b03404285702405cfb4516765e5ad83e4193&newProject=comm-central&newRevision=8f57b03404285702405cfb4516765e5ad83e4193&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8f57b03404285702405cfb4516765e5ad83e4193&newProject=comm-central&newRevision=8f57b03404285702405cfb4516765e5ad83e4193&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=8f57b03404285702405cfb4516765e5ad83e4193&newProject=comm-central&newRevision=8f57b03404285702405cfb4516765e5ad83e4193&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1040009">1040009</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1040009">Bug 1040009</a> - Run mozilla-central's configure from the objdir, not objdir/mozilla, r=Standard8 CLOSED TREE.

This bug moves the objdir from the current location of MOZ_OBJDIR/mozilla to
MOZ_OBJDIR, which fixes a series of longstanding bugs about mozconfigs not
working due to the presence of two distinct objdirs. A temporary workaround to
keep automation working is included.

An important implication of this change is that mozconfigs are now required for
comm-central: if they are not provided, Firefox, not Thunderbird, will be built.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8f57b03404285702405cfb4516765e5ad83e4193/aclocal.m4">aclocal.m4</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8f57b03404285702405cfb4516765e5ad83e4193/aclocal.m4">file</a> |
<a href="/comm-central/annotate/8f57b03404285702405cfb4516765e5ad83e4193/aclocal.m4">annotate</a> |
<a href="/comm-central/diff/8f57b03404285702405cfb4516765e5ad83e4193/aclocal.m4">diff</a> |
<a href="/comm-central/comparison/8f57b03404285702405cfb4516765e5ad83e4193/aclocal.m4">comparison</a> |
<a href="/comm-central/log/8f57b03404285702405cfb4516765e5ad83e4193/aclocal.m4">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/8f57b03404285702405cfb4516765e5ad83e4193/client.mk">client.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8f57b03404285702405cfb4516765e5ad83e4193/client.mk">file</a> |
<a href="/comm-central/annotate/8f57b03404285702405cfb4516765e5ad83e4193/client.mk">annotate</a> |
<a href="/comm-central/diff/8f57b03404285702405cfb4516765e5ad83e4193/client.mk">diff</a> |
<a href="/comm-central/comparison/8f57b03404285702405cfb4516765e5ad83e4193/client.mk">comparison</a> |
<a href="/comm-central/log/8f57b03404285702405cfb4516765e5ad83e4193/client.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/8f57b03404285702405cfb4516765e5ad83e4193/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/8f57b03404285702405cfb4516765e5ad83e4193/configure.in">file</a> |
<a href="/comm-central/annotate/8f57b03404285702405cfb4516765e5ad83e4193/configure.in">annotate</a> |
<a href="/comm-central/diff/8f57b03404285702405cfb4516765e5ad83e4193/configure.in">diff</a> |
<a href="/comm-central/comparison/8f57b03404285702405cfb4516765e5ad83e4193/configure.in">comparison</a> |
<a href="/comm-central/log/8f57b03404285702405cfb4516765e5ad83e4193/configure.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/aclocal.m4</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/aclocal.m4</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -21,9 +21,9 @@ builtin(include, mozilla/build/autoconf/</span>
<a href="#l1.4"></a><span id="l1.4"> builtin(include, mozilla/build/autoconf/python-virtualenv.m4)dnl</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> MOZ_PROG_CHECKMSYS()</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> # Read the user's .mozconfig script.  We can't do this in</span>
<a href="#l1.9"></a><span id="l1.9"> # configure.in: autoconf puts the argument parsing code above anything</span>
<a href="#l1.10"></a><span id="l1.10"> # expanded from configure.in, and we need to get the configure options</span>
<a href="#l1.11"></a><span id="l1.11"> # from .mozconfig in place before that argument parsing code.</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-MOZ_READ_MOZCONFIG(mozilla)</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+dnl MOZ_READ_MOZCONFIG(mozilla)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/client.mk</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/client.mk</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -155,16 +155,22 @@ endif</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> else # MOZ_BUILD_PROJECTS</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7"> OBJDIR = $(MOZ_OBJDIR)</span>
<a href="#l2.8"></a><span id="l2.8"> MOZ_MAKE = $(MAKE) $(MOZ_MAKE_FLAGS) -C $(OBJDIR)</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10"> endif # MOZ_BUILD_PROJECTS</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+# If we have a MOZ_OBJDIR that's set from the environment, ensure that it is an</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+# absolute path.</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+ifdef MOZ_OBJDIR</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+MOZ_OBJDIR := $(shell $(PYTHON) -c &quot;import os.path; print(os.path.join(\&quot;$(TOPSRCDIR)\&quot;, \&quot;$(MOZ_OBJDIR)\&quot;).replace('\\\\','/'))&quot;)</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+endif</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+</span>
<a href="#l2.18"></a><span id="l2.18"> # 'configure' scripts generated by autoconf.</span>
<a href="#l2.19"></a><span id="l2.19"> CONFIGURES := $(TOPSRCDIR)/configure</span>
<a href="#l2.20"></a><span id="l2.20"> CONFIGURES += $(TOPSRCDIR)/mozilla/configure</span>
<a href="#l2.21"></a><span id="l2.21"> CONFIGURES += $(TOPSRCDIR)/mozilla/js/src/configure</span>
<a href="#l2.22"></a><span id="l2.22"> </span>
<a href="#l2.23"></a><span id="l2.23"> #######################################################################</span>
<a href="#l2.24"></a><span id="l2.24"> # Rules</span>
<a href="#l2.25"></a><span id="l2.25"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/configure.in</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/configure.in</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -5,277 +5,26 @@ dnl License, v. 2.0. If a copy of the MP</span>
<a href="#l3.4"></a><span id="l3.4"> dnl file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6"> dnl Process this file with autoconf to produce a configure script.</span>
<a href="#l3.7"></a><span id="l3.7"> dnl ========================================================</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> AC_PREREQ(2.13)</span>
<a href="#l3.10"></a><span id="l3.10"> AC_INIT(config/config.mk)</span>
<a href="#l3.11"></a><span id="l3.11"> MOZILLA_SRCDIR=$srcdir/mozilla</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-AC_CONFIG_AUX_DIR(${MOZILLA_SRCDIR}/build/autoconf)</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-AC_CANONICAL_SYSTEM</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-dnl comm-central-specific options</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-dnl (MOZILLA_SRCDIR would fit here, but is needed to find autoconf tools)</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-export COMM_BUILD=1</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-dnl Get mozconfig output for configure in a config.site we'll pass to</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-dnl the mozilla configure. Then unset MOZCONFIG and MOZ_OBJDIR to avoid</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-dnl confusing the mozilla configure.</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-$(dirname $0)/mozilla/mach environment --format=configure &gt; config.site</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-COMM_MOZCONFIG=`$srcdir/build/autoconf/mozconfig-find $srcdir`</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-unset MOZCONFIG</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-unset MOZ_OBJDIR</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineminus">-dnl Do not allow a separate objdir build if a srcdir build exists.</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineminus">-dnl ==============================================================</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineminus">-_topsrcdir=`cd \`dirname $0\`; pwd`</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-_objdir=`pwd`</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-if test &quot;$_topsrcdir&quot; != &quot;$_objdir&quot;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-then</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-  # Check for a couple representative files in the source tree</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-  _conflict_files=</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-  for file in $_topsrcdir/Makefile $_topsrcdir/config/autoconf.mk; do</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-    if test -f $file; then</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-      _conflict_files=&quot;$_conflict_files $file&quot;</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-    fi</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-  done</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-  if test &quot;$_conflict_files&quot;; then</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-    echo &quot;***&quot;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-    echo &quot;*   Your source tree contains these files:&quot;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-    for file in $_conflict_files; do</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-      echo &quot;*         $file&quot;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-    done</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-    cat 1&gt;&amp;2 &lt;&lt;-EOF</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-	*   This indicates that you previously built in the source tree.</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-	*   A source tree build can confuse the separate objdir build.</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-	*</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-	*   To clean up the source tree:</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-	*     1. cd $_topsrcdir</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-	*     2. gmake distclean</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-	***</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineminus">-	EOF</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineminus">-    exit 1</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineminus">-    break</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-  fi</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineminus">-fi</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineminus">-</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineminus">-MOZ_BUILD_ROOT=`pwd`</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-MOZILLA_CENTRAL_PATH=$_topsrcdir/mozilla</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-MOZ_PYTHON</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineminus">-</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-MOZ_ARG_WITH_STRING(l10n-base,</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-[  --with-l10n-base=DIR     path to l10n repositories],</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-    L10NBASEDIR=$withval)</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-if test -n &quot;$L10NBASEDIR&quot;; then</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineminus">-    if test &quot;$L10NBASEDIR&quot; = &quot;yes&quot; -o &quot;$L10NBASEDIR&quot; = &quot;no&quot;; then</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-        AC_MSG_ERROR([--with-l10n-base must specify a path])</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineminus">-    elif test -d &quot;$L10NBASEDIR&quot;; then</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineminus">-        dnl Ensure to use an absolute path.</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineminus">-        L10NBASEDIR=`cd &quot;$L10NBASEDIR&quot; &amp;&amp; pwd`</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineminus">-    else</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-        AC_MSG_ERROR([Invalid value --with-l10n-base, $L10NBASEDIR doesn't exist])</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineminus">-    fi</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineminus">-fi</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineminus">-MOZ_ARG_WITH_STRING(unify-dist,</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineminus">-[  --with-unify-dist=dir   Location of the dist directory to unify with at packaging time (Mac OS X universal build only)],</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineminus">-    UNIFY_DIST=$withval)</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-if test -n &quot;$UNIVERSAL_BINARY&quot;; then</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineminus">-    if test -z &quot;$UNIFY_DIST&quot;; then</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineminus">-        AC_MSG_ERROR([You need to provide the --with-unify-dist=dir argument when performing a universal build])</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineminus">-    fi</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineminus">-    case &quot;$UNIFY_DIST&quot; in</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineminus">-    /*)</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineminus">-        ;;</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineminus">-    *)</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineminus">-        UNIFY_DIST=&quot;${MOZ_BUILD_ROOT}/${UNIFY_DIST}&quot;</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineminus">-        ;;</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineminus">-    esac</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineminus">-fi</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineminus">-</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineminus">-dnl =</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineminus">-dnl = Application</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineminus">-dnl =</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineminus">-</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineminus">-MOZ_ARG_HEADER(Application)</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineminus">-</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineminus">-MOZ_BRANDING_DIRECTORY=</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineminus">-</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineminus">-MOZ_ARG_ENABLE_STRING(application,</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineminus">-[  --enable-application=APP</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineminus">-                          Options include:</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineminus">-                            suite (SeaMonkey)</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineminus">-                            mail (Thunderbird)],</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineminus">-[ MOZ_BUILD_APP=$enableval ] )</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineminus">-</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineminus">-AC_MSG_CHECKING([for application to build])</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineminus">-if test -z &quot;$MOZ_BUILD_APP&quot;; then</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineminus">-  AC_MSG_RESULT([mail])</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineminus">-  echo &quot;Building Thunderbird by default. Set --enable-application to build a different application.&quot;</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineminus">-  MOZ_BUILD_APP=mail</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineminus">-else</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineminus">-  # We have a valid application only if it has a build.mk file in its top</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineminus">-  # directory.</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineminus">-  if test ! -f &quot;${srcdir}/${MOZ_BUILD_APP}/build.mk&quot; ; then</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineminus">-    AC_MSG_RESULT([none])</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineminus">-    AC_MSG_ERROR([--enable-application value not recognized (${MOZ_BUILD_APP}/build.mk does not exist).])</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineminus">-  else</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineminus">-    AC_MSG_RESULT([$MOZ_BUILD_APP])</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineminus">-  fi</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineminus">-fi</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineminus">-# Allow the application to influence configure with a confvars.sh script. We</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineminus">-# still need this for MOZ_BRANDING_DIRECTORY.</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineminus">-</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineminus">-AC_MSG_CHECKING([if app-specific confvars.sh exists])</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineminus">-if test -f &quot;${srcdir}/${MOZ_BUILD_APP}/confvars.sh&quot; ; then</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineminus">-  AC_MSG_RESULT([${srcdir}/${MOZ_BUILD_APP}/confvars.sh])</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineminus">-  . &quot;${srcdir}/${MOZ_BUILD_APP}/confvars.sh&quot;</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineminus">-else</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineminus">-  AC_MSG_RESULT([no])</span>
<a href="#l3.138"></a><span id="l3.138" class="difflineplus">+# If MOZCONFIG isn't set, use the .mozconfig from the current directory. This</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineplus">+# overrides the lookup in mozilla-central's configure, which looks in the wrong</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineplus">+# directory for this file.</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineplus">+if test -z &quot;$MOZCONFIG&quot; -a -f $(dirname $0)/.mozconfig; then</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+    export MOZCONFIG=$(dirname $0)/.mozconfig</span>
<a href="#l3.143"></a><span id="l3.143"> fi</span>
<a href="#l3.144"></a><span id="l3.144"> </span>
<a href="#l3.145"></a><span id="l3.145" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineminus">-dnl = Trademarked Branding </span>
<a href="#l3.147"></a><span id="l3.147" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineminus">-MOZ_ARG_ENABLE_BOOL(official-branding,</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineminus">-[  --enable-official-branding Enable Official mozilla.org Branding</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineminus">-                          Do not distribute builds with</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineminus">-                          --enable-official-branding unless you have</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineminus">-                          permission to use trademarks per</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineminus">-                          http://www.mozilla.org/foundation/trademarks/ .],</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineminus">-[</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineminus">-  if test -z &quot;$MOZ_OFFICIAL_BRANDING_DIRECTORY&quot;; then</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineminus">-    AC_MSG_ERROR([You must specify MOZ_OFFICIAL_BRANDING_DIRECTORY to use --enable-official-branding.])</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineminus">-  else</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineminus">-    MOZ_BRANDING_DIRECTORY=${MOZ_OFFICIAL_BRANDING_DIRECTORY}</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineminus">-  fi</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineminus">-])</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineminus">-</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineminus">-MOZ_ARG_WITH_STRING(branding,</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineminus">-[  --with-branding=dir    Use branding from the specified directory.],</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineminus">-    MOZ_BRANDING_DIRECTORY=$withval)</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineminus">-</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineminus">-REAL_BRANDING_DIRECTORY=&quot;${MOZ_BRANDING_DIRECTORY}&quot;</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineminus">-if test -z &quot;$REAL_BRANDING_DIRECTORY&quot;; then</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineminus">-  REAL_BRANDING_DIRECTORY=${MOZ_BUILD_APP}/branding/nightly</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineminus">-fi</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineminus">-</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineminus">-if test -f &quot;${_topsrcdir}/$REAL_BRANDING_DIRECTORY/configure.sh&quot;; then</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineminus">-  . &quot;${_topsrcdir}/$REAL_BRANDING_DIRECTORY/configure.sh&quot;</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineplus">+# Our automation expects to find things in $MOZ_OBJDIR/mozilla. Oblige it by</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineplus">+# symlinking the directories together.</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+if test &quot;$MOZ_AUTOMATION&quot; -eq 1; then</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineplus">+    ln -s $PWD mozilla</span>
<a href="#l3.177"></a><span id="l3.177"> fi</span>
<a href="#l3.178"></a><span id="l3.178"> </span>
<a href="#l3.179"></a><span id="l3.179" class="difflineminus">-case &quot;$host_os&quot; in</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineminus">-mingw*)</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineminus">-    WIN_TOP_SRC=`cd $srcdir; pwd -W`</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineminus">-    ;;</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineminus">-esac</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineminus">-</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineminus">-# These lines do no useful work, but if we don't have them, then the output</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineminus">-# configure script is really messed up.</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineminus">-touch confdefs.pytmp</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineminus">-AC_OUTPUT([])</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineminus">-</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineminus">-# Build the config.status for comm-central</span>
<a href="#l3.191"></a><span id="l3.191" class="difflineminus">-changequote(&lt;&lt;&lt;,&gt;&gt;&gt;)dnl</span>
<a href="#l3.192"></a><span id="l3.192" class="difflineminus">-: ${CONFIG_STATUS=./config.status}</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineminus">-</span>
<a href="#l3.194"></a><span id="l3.194" class="difflineminus">-echo creating $CONFIG_STATUS</span>
<a href="#l3.195"></a><span id="l3.195" class="difflineminus">-cat &gt; $CONFIG_STATUS &lt;&lt;EOF</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineminus">-#!${PYTHON}</span>
<a href="#l3.197"></a><span id="l3.197" class="difflineminus">-</span>
<a href="#l3.198"></a><span id="l3.198" class="difflineminus">-import os</span>
<a href="#l3.199"></a><span id="l3.199" class="difflineminus">-topsrcdir = '''${WIN_TOP_SRC:-$srcdir}'''</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineminus">-if not os.path.isabs(topsrcdir):</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineminus">-    rel = os.path.join(os.path.dirname(&lt;&lt;&lt;__file__&gt;&gt;&gt;), topsrcdir)</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineminus">-    topsrcdir = os.path.normpath(os.path.abspath(rel))</span>
<a href="#l3.203"></a><span id="l3.203" class="difflineminus">-</span>
<a href="#l3.204"></a><span id="l3.204" class="difflineminus">-topobjdir = os.path.dirname(&lt;&lt;&lt;__file__&gt;&gt;&gt;)</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineminus">-</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineminus">-from mozbuild.backend.configenvironment import BuildConfig</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineminus">-mozfile = os.path.join(topobjdir, 'mozilla', 'config.status')</span>
<a href="#l3.208"></a><span id="l3.208" class="difflineminus">-mozbuildcfg = BuildConfig.from_config_status(mozfile)</span>
<a href="#l3.209"></a><span id="l3.209" class="difflineminus">-</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineminus">-dnl No need to tweak these from mozilla-central</span>
<a href="#l3.211"></a><span id="l3.211" class="difflineminus">-defines = mozbuildcfg.defines</span>
<a href="#l3.212"></a><span id="l3.212" class="difflineminus">-non_global_defines = mozbuildcfg.non_global_defines</span>
<a href="#l3.213"></a><span id="l3.213" class="difflineminus">-</span>
<a href="#l3.214"></a><span id="l3.214" class="difflineminus">-dnl Fix up substitutitons</span>
<a href="#l3.215"></a><span id="l3.215" class="difflineminus">-def remap_subst(pair):</span>
<a href="#l3.216"></a><span id="l3.216" class="difflineminus">-    name, value = pair</span>
<a href="#l3.217"></a><span id="l3.217" class="difflineminus">-    if isinstance(value, set) or isinstance(value, list):</span>
<a href="#l3.218"></a><span id="l3.218" class="difflineminus">-        return name, value</span>
<a href="#l3.219"></a><span id="l3.219" class="difflineminus">-    value = value.replace('\$(DEPTH)', '\$(DEPTH)/mozilla')</span>
<a href="#l3.220"></a><span id="l3.220" class="difflineminus">-    value = value.replace('\$(topsrcdir)', '\$(topsrcdir)/mozilla')</span>
<a href="#l3.221"></a><span id="l3.221" class="difflineminus">-    if name == 'ac_configure_args':</span>
<a href="#l3.222"></a><span id="l3.222" class="difflineminus">-        value = r''' $ac_configure_args '''[1:-1]</span>
<a href="#l3.223"></a><span id="l3.223" class="difflineminus">-    elif name in ['MOZ_BRANDING_DIRECTORY', 'MOZ_BUILD_APP']:</span>
<a href="#l3.224"></a><span id="l3.224" class="difflineminus">-        value = value[3:] # Strip off ../ from the beginning</span>
<a href="#l3.225"></a><span id="l3.225" class="difflineminus">-    elif name in ['top_srcdir', 'MOZ_BUILD_ROOT', 'WIN_TOP_SRC']:</span>
<a href="#l3.226"></a><span id="l3.226" class="difflineminus">-        value = value[:-8] # Strip off /mozilla from the end</span>
<a href="#l3.227"></a><span id="l3.227" class="difflineminus">-    return name, value</span>
<a href="#l3.228"></a><span id="l3.228" class="difflineminus">-</span>
<a href="#l3.229"></a><span id="l3.229" class="difflineminus">-substs = map(remap_subst, mozbuildcfg.substs)</span>
<a href="#l3.230"></a><span id="l3.230" class="difflineminus">-substs.append(('COMM_BUILD', '1'))</span>
<a href="#l3.231"></a><span id="l3.231" class="difflineminus">-</span>
<a href="#l3.232"></a><span id="l3.232" class="difflineminus">-__all__ = ['topobjdir', 'topsrcdir', 'defines', 'non_global_defines', 'substs']</span>
<a href="#l3.233"></a><span id="l3.233" class="difflineplus">+# Execute the mozilla configure script in the current directory, adding the</span>
<a href="#l3.234"></a><span id="l3.234" class="difflineplus">+# parameter we need to run comm-central.</span>
<a href="#l3.235"></a><span id="l3.235" class="difflineplus">+exec ${MOZILLA_SRCDIR}/configure &quot;$@&quot; --with-external-source-dir=&quot;$(dirname $0)&quot;</span>
<a href="#l3.236"></a><span id="l3.236"> </span>
<a href="#l3.237"></a><span id="l3.237" class="difflineminus">-dnl Do the actual work</span>
<a href="#l3.238"></a><span id="l3.238" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l3.239"></a><span id="l3.239" class="difflineminus">-    args = dict([(name, globals()[name]) for name in __all__])</span>
<a href="#l3.240"></a><span id="l3.240" class="difflineminus">-    import sys</span>
<a href="#l3.241"></a><span id="l3.241" class="difflineminus">-dnl Don't rely on virtualenv here. Standalone js doesn't use it.</span>
<a href="#l3.242"></a><span id="l3.242" class="difflineminus">-    sys.path.append(os.path.join(topsrcdir, ${extra_python_path}'build'))</span>
<a href="#l3.243"></a><span id="l3.243" class="difflineminus">-    from mozbuild.config_status import config_status</span>
<a href="#l3.244"></a><span id="l3.244" class="difflineminus">-    config_status(**args)</span>
<a href="#l3.245"></a><span id="l3.245" class="difflineminus">-EOF</span>
<a href="#l3.246"></a><span id="l3.246" class="difflineminus">-changequote([,])dnl</span>
<a href="#l3.247"></a><span id="l3.247" class="difflineminus">-</span>
<a href="#l3.248"></a><span id="l3.248" class="difflineminus">-# Make the config.status file executable</span>
<a href="#l3.249"></a><span id="l3.249" class="difflineminus">-chmod +x $CONFIG_STATUS</span>
<a href="#l3.250"></a><span id="l3.250" class="difflineminus">-</span>
<a href="#l3.251"></a><span id="l3.251" class="difflineminus">-_SUBDIR_CONFIG_ARGS=&quot;$ac_configure_args&quot;</span>
<a href="#l3.252"></a><span id="l3.252" class="difflineminus">-if test -n &quot;$UNIFY_DIST&quot;; then</span>
<a href="#l3.253"></a><span id="l3.253" class="difflineminus">-    # Make --with-unify-dist point to the right path</span>
<a href="#l3.254"></a><span id="l3.254" class="difflineminus">-    _SUBDIR_CONFIG_ARGS=&quot;$_SUBDIR_CONFIG_ARGS --with-unify-dist=$UNIFY_DIST&quot;</span>
<a href="#l3.255"></a><span id="l3.255" class="difflineminus">-fi</span>
<a href="#l3.256"></a><span id="l3.256" class="difflineminus">-</span>
<a href="#l3.257"></a><span id="l3.257" class="difflineminus">-# build Mozilla first</span>
<a href="#l3.258"></a><span id="l3.258" class="difflineminus">-#</span>
<a href="#l3.259"></a><span id="l3.259" class="difflineminus">-# the subdir may not yet have been created in the build tree.</span>
<a href="#l3.260"></a><span id="l3.260" class="difflineminus">-#</span>
<a href="#l3.261"></a><span id="l3.261" class="difflineminus">-if test ! -d &quot;mozilla&quot;; then</span>
<a href="#l3.262"></a><span id="l3.262" class="difflineminus">-    mkdir &quot;mozilla&quot;</span>
<a href="#l3.263"></a><span id="l3.263" class="difflineminus">-fi</span>
<a href="#l3.264"></a><span id="l3.264" class="difflineminus">-</span>
<a href="#l3.265"></a><span id="l3.265" class="difflineminus">-external_topsrcdir=$_topsrcdir</span>
<a href="#l3.266"></a><span id="l3.266" class="difflineminus">-</span>
<a href="#l3.267"></a><span id="l3.267" class="difflineminus">-if test &quot;$msyshost&quot;; then</span>
<a href="#l3.268"></a><span id="l3.268" class="difflineminus">-    external_topsrcdir=`cd $_topsrcdir &amp;&amp; pwd -W $_topsrcdir`</span>
<a href="#l3.269"></a><span id="l3.269" class="difflineminus">-fi</span>
<a href="#l3.270"></a><span id="l3.270" class="difflineminus">-</span>
<a href="#l3.271"></a><span id="l3.271" class="difflineminus">-# --enable-application needs to find confvars.sh, build.mk, etc in the gived dir, so add ../</span>
<a href="#l3.272"></a><span id="l3.272" class="difflineminus">-# --external-source-dir is so the build system doesn't reject files outside known locations.</span>
<a href="#l3.273"></a><span id="l3.273" class="difflineminus">-# --disable-official-branding disables all checks for official branding, as we're doing this ourselves in our own repo</span>
<a href="#l3.274"></a><span id="l3.274" class="difflineminus">-ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --enable-application=../$MOZ_BUILD_APP --with-external-source-dir=$external_topsrcdir --disable-official-branding --with-branding=$REAL_BRANDING_DIRECTORY&quot;</span>
<a href="#l3.275"></a><span id="l3.275" class="difflineminus">-if test -n &quot;$L10NBASEDIR&quot;; then</span>
<a href="#l3.276"></a><span id="l3.276" class="difflineminus">-    dnl Override the initial value with the new one which is guaranteed to be an absolute path.</span>
<a href="#l3.277"></a><span id="l3.277" class="difflineminus">-    ac_configure_args=&quot;$ac_configure_args --with-l10n-base=$L10NBASEDIR&quot;</span>
<a href="#l3.278"></a><span id="l3.278" class="difflineminus">-fi</span>
<a href="#l3.279"></a><span id="l3.279" class="difflineminus">-</span>
<a href="#l3.280"></a><span id="l3.280" class="difflineminus">-# for Mac universal builds, we need to call the Mozilla configure with MOZ_BUILD_APP=[i386|x86_64]</span>
<a href="#l3.281"></a><span id="l3.281" class="difflineminus">-MOZ_BUILD_APP_CACHED=&quot;$MOZ_BUILD_APP&quot;</span>
<a href="#l3.282"></a><span id="l3.282" class="difflineminus">-if test -n &quot;$MOZ_CURRENT_PROJECT&quot;; then</span>
<a href="#l3.283"></a><span id="l3.283" class="difflineminus">-    export MOZ_BUILD_APP=&quot;$MOZ_CURRENT_PROJECT&quot;</span>
<a href="#l3.284"></a><span id="l3.284" class="difflineminus">-fi</span>
<a href="#l3.285"></a><span id="l3.285" class="difflineminus">-</span>
<a href="#l3.286"></a><span id="l3.286" class="difflineminus">-# Files listed in $CONFIG_SITE are sourced by configure near the beginning.</span>
<a href="#l3.287"></a><span id="l3.287" class="difflineminus">-export CONFIG_SITE=&quot;$(pwd)/config.site $CONFIG_SITE&quot;</span>
<a href="#l3.288"></a><span id="l3.288" class="difflineminus">-AC_OUTPUT_SUBDIRS(mozilla)</span>
<a href="#l3.289"></a><span id="l3.289" class="difflineminus">-MOZ_BUILD_APP=&quot;$MOZ_BUILD_APP_CACHED&quot;</span>
<a href="#l3.290"></a><span id="l3.290" class="difflineminus">-</span>
<a href="#l3.291"></a><span id="l3.291" class="difflineminus">-# Build the comm-central files with config.status</span>
<a href="#l3.292"></a><span id="l3.292" class="difflineminus">-test &quot;$no_create&quot; = yes || MOZCONFIG=&quot;$COMM_MOZCONFIG&quot; WRITE_MOZINFO=1 ${PYTHON} $CONFIG_STATUS || exit 1</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

