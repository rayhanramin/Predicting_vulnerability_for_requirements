<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20855:80db47dbea4e1d03999ad1b74b30bb1a39297f43</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 80db47dbea4e1d03999ad1b74b30bb1a39297f43" />
<meta property="og:url" content="/comm-central/rev/80db47dbea4e1d03999ad1b74b30bb1a39297f43" />
<meta property="og:description" content="Bug 1322124 - Remove javascript Array generics: suite. r=Ratty a=Ratty" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 80db47dbea4e1d03999ad1b74b30bb1a39297f43 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/80db47dbea4e1d03999ad1b74b30bb1a39297f43">shortlog</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/80db47dbea4e1d03999ad1b74b30bb1a39297f43">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43">files</a> |
changeset |
<a href="/comm-central/raw-rev/80db47dbea4e1d03999ad1b74b30bb1a39297f43">raw</a>  | <a href="/comm-central/archive/80db47dbea4e1d03999ad1b74b30bb1a39297f43.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1322124">Bug 1322124</a> - Remove javascript Array generics: suite. r=Ratty a=Ratty
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 13 Dec 2016 14:32:47 +0100</td></tr>

<tr>
 <td>changeset 20855</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/80db47dbea4e1d03999ad1b74b30bb1a39297f43">80db47dbea4e1d03999ad1b74b30bb1a39297f43</a></td>
</tr>



<tr>
<td>parent 20854</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/00e450b4815fddb004fe6f07ef09154dd3eadee3">00e450b4815fddb004fe6f07ef09154dd3eadee3</a>
</td>
</tr>

<tr>
<td>child 20856</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/65fbe3d4ae2495e9e9999c741aff410ba9634f9c">65fbe3d4ae2495e9e9999c741aff410ba9634f9c</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=80db47dbea4e1d03999ad1b74b30bb1a39297f43">12636</a></td></tr>
<tr><td>push user</td><td>archaeopteryx@coole-files.de</td></tr>
<tr><td>push date</td><td class="date age">Tue, 13 Dec 2016 13:39:32 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@80db47dbea4e [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=80db47dbea4e1d03999ad1b74b30bb1a39297f43">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=80db47dbea4e1d03999ad1b74b30bb1a39297f43&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=80db47dbea4e1d03999ad1b74b30bb1a39297f43&newProject=comm-central&newRevision=48f2cf2651d2e83a11eb874475af6d379804a2ed&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=80db47dbea4e1d03999ad1b74b30bb1a39297f43&newProject=comm-central&newRevision=48f2cf2651d2e83a11eb874475af6d379804a2ed&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=80db47dbea4e1d03999ad1b74b30bb1a39297f43&newProject=comm-central&newRevision=48f2cf2651d2e83a11eb874475af6d379804a2ed&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Ratty%29&revcount=50">Ratty</a>, <a href="/comm-central/log?rev=reviewer%28Ratty%29&revcount=50">Ratty</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1322124">1322124</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1322124">Bug 1322124</a> - Remove javascript Array generics: suite. r=Ratty a=Ratty

MozReview-Commit-ID: 8WPOkLXzFoO</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/pageinfo/pageInfo.js">suite/browser/pageinfo/pageInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/pageinfo/pageInfo.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/pageinfo/pageInfo.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/pageinfo/pageInfo.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/pageinfo/pageInfo.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/pageinfo/pageInfo.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/tabbrowser.xml">suite/browser/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_page_style_menu.js">suite/browser/test/browser/browser_page_style_menu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_page_style_menu.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_page_style_menu.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_page_style_menu.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_page_style_menu.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_page_style_menu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_relatedTabs.js">suite/browser/test/browser/browser_relatedTabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_relatedTabs.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_relatedTabs.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_relatedTabs.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_relatedTabs.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/browser/test/browser/browser_relatedTabs.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/bindings/notification.xml">suite/common/bindings/notification.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/bindings/notification.xml">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/bindings/notification.xml">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/bindings/notification.xml">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/bindings/notification.xml">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/bindings/notification.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/history/treeView.js">suite/common/history/treeView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/history/treeView.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/history/treeView.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/history/treeView.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/history/treeView.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/history/treeView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/browserPlacesViews.js">suite/common/places/browserPlacesViews.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/browserPlacesViews.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/browserPlacesViews.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/browserPlacesViews.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/browserPlacesViews.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/browserPlacesViews.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/treeView.js">suite/common/places/treeView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/treeView.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/treeView.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/treeView.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/treeView.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/places/treeView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages-add.js">suite/common/pref/pref-languages-add.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages-add.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages-add.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages-add.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages-add.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages-add.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages.js">suite/common/pref/pref-languages.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/pref/pref-languages.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSessionStore.js">suite/common/src/nsSessionStore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSessionStore.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSessionStore.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSessionStore.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSessionStore.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSessionStore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSuiteGlue.js">suite/common/src/nsSuiteGlue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSuiteGlue.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSuiteGlue.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSuiteGlue.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSuiteGlue.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/src/nsSuiteGlue.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_346337.js">suite/common/tests/browser/browser_346337.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_346337.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_346337.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_346337.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_346337.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_346337.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_408470.js">suite/common/tests/browser/browser_408470.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_408470.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_408470.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_408470.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_408470.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_408470.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_form_restore_events.js">suite/common/tests/browser/browser_form_restore_events.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_form_restore_events.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_form_restore_events.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_form_restore_events.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_form_restore_events.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/tests/browser/browser_form_restore_events.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/utilityOverlay.js">suite/common/utilityOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/utilityOverlay.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/utilityOverlay.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/utilityOverlay.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/utilityOverlay.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/common/utilityOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/compose/prefs/pref-formatting.js">suite/mailnews/compose/prefs/pref-formatting.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/compose/prefs/pref-formatting.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/compose/prefs/pref-formatting.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/compose/prefs/pref-formatting.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/compose/prefs/pref-formatting.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/compose/prefs/pref-formatting.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/mailWidgets.xml">suite/mailnews/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/messengerdnd.js">suite/mailnews/messengerdnd.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/messengerdnd.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/messengerdnd.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/messengerdnd.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/messengerdnd.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/messengerdnd.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/nsDragAndDrop.js">suite/mailnews/nsDragAndDrop.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/nsDragAndDrop.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/nsDragAndDrop.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/nsDragAndDrop.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/nsDragAndDrop.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/mailnews/nsDragAndDrop.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/profile/migration/src/SuiteProfileMigrator.js">suite/profile/migration/src/SuiteProfileMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/profile/migration/src/SuiteProfileMigrator.js">file</a> |
<a href="/comm-central/annotate/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/profile/migration/src/SuiteProfileMigrator.js">annotate</a> |
<a href="/comm-central/diff/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/profile/migration/src/SuiteProfileMigrator.js">diff</a> |
<a href="/comm-central/comparison/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/profile/migration/src/SuiteProfileMigrator.js">comparison</a> |
<a href="/comm-central/log/80db47dbea4e1d03999ad1b74b30bb1a39297f43/suite/profile/migration/src/SuiteProfileMigrator.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/browser/pageinfo/pageInfo.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/browser/pageinfo/pageInfo.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -88,17 +88,17 @@ pageInfoTreeView.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">   },</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">   doSort: function doSort(col, comparator)</span>
<a href="#l1.7"></a><span id="l1.7">   {</span>
<a href="#l1.8"></a><span id="l1.8">     var ascending = col.index != this.sortcol || !this.sortdir;</span>
<a href="#l1.9"></a><span id="l1.9">     this.sortdir = ascending;</span>
<a href="#l1.10"></a><span id="l1.10">     this.sortcol = col.index;</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    Array.forEach(this.tree.columns, function(treecol) {</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    Array.from(this.tree.columns).forEach(function(treecol) {</span>
<a href="#l1.14"></a><span id="l1.14">       treecol.element.removeAttribute(&quot;sortActive&quot;);</span>
<a href="#l1.15"></a><span id="l1.15">       treecol.element.removeAttribute(&quot;sortDirection&quot;);</span>
<a href="#l1.16"></a><span id="l1.16">     });</span>
<a href="#l1.17"></a><span id="l1.17">     col.element.setAttribute(&quot;sortActive&quot;, true);</span>
<a href="#l1.18"></a><span id="l1.18">     col.element.setAttribute(&quot;sortDirection&quot;, ascending ?</span>
<a href="#l1.19"></a><span id="l1.19">                                               &quot;ascending&quot; : &quot;descending&quot;);</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21">     var index = col.index;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -632,17 +632,17 @@ function addImage(url, type, alt, elem, </span>
<a href="#l1.23"></a><span id="l1.23">   catch (ex) { }</span>
<a href="#l1.24"></a><span id="l1.24"> }</span>
<a href="#l1.25"></a><span id="l1.25"> </span>
<a href="#l1.26"></a><span id="l1.26"> function grabAll(elem)</span>
<a href="#l1.27"></a><span id="l1.27"> {</span>
<a href="#l1.28"></a><span id="l1.28">   // check for background images, any node may have multiple</span>
<a href="#l1.29"></a><span id="l1.29">   var computedStyle = elem.ownerDocument.defaultView.getComputedStyle(elem, &quot;&quot;);</span>
<a href="#l1.30"></a><span id="l1.30">   if (computedStyle) {</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-    Array.forEach(computedStyle.getPropertyCSSValue(&quot;background-image&quot;), function (url) {</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+    Array.from(computedStyle.getPropertyCSSValue(&quot;background-image&quot;)).forEach(function (url) {</span>
<a href="#l1.33"></a><span id="l1.33">       if (url.primitiveType == CSSPrimitiveValue.CSS_URI)</span>
<a href="#l1.34"></a><span id="l1.34">         addImage(url.getStringValue(), gStrings.mediaBGImg, gStrings.notSet, elem, true);</span>
<a href="#l1.35"></a><span id="l1.35">     });</span>
<a href="#l1.36"></a><span id="l1.36">   }</span>
<a href="#l1.37"></a><span id="l1.37"> </span>
<a href="#l1.38"></a><span id="l1.38">   // one swi^H^H^Hif-else to rule them all</span>
<a href="#l1.39"></a><span id="l1.39">   if (elem instanceof HTMLAnchorElement)</span>
<a href="#l1.40"></a><span id="l1.40">     gLinkView.addRow([getValueText(elem), elem.href, gStrings.linkAnchor, elem.target, elem.accessKey]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/tabbrowser.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/tabbrowser.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -453,17 +453,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5">             // cache flags for correct status UI update after tab switching</span>
<a href="#l2.6"></a><span id="l2.6">             mTotalProgress: 0,</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">             // count of open requests (should always be 0 or 1)</span>
<a href="#l2.9"></a><span id="l2.9">             mRequestCount: 0,</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">             _callProgressListeners: function () {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-              Array.unshift(arguments, this.mBrowser);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+              Array.from(arguments).unshift(this.mBrowser);</span>
<a href="#l2.14"></a><span id="l2.14">               return this.mTabBrowser._callProgressListeners.apply(this.mTabBrowser, arguments);</span>
<a href="#l2.15"></a><span id="l2.15">             },</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">             _shouldShowProgress: function (aRequest) {</span>
<a href="#l2.18"></a><span id="l2.18">               if (this.mBlank)</span>
<a href="#l2.19"></a><span id="l2.19">                 return false;</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21">               // Don't show progress indicators in tabs for about: URIs</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -2216,17 +2216,17 @@</span>
<a href="#l2.23"></a><span id="l2.23">       &lt;property name=&quot;selectedBrowser&quot;</span>
<a href="#l2.24"></a><span id="l2.24">                 onget=&quot;return this.mCurrentBrowser;&quot;</span>
<a href="#l2.25"></a><span id="l2.25">                 readonly=&quot;true&quot;/&gt;</span>
<a href="#l2.26"></a><span id="l2.26"> </span>
<a href="#l2.27"></a><span id="l2.27">       &lt;property name=&quot;browsers&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l2.28"></a><span id="l2.28">         &lt;getter&gt;</span>
<a href="#l2.29"></a><span id="l2.29">           &lt;![CDATA[</span>
<a href="#l2.30"></a><span id="l2.30">             return this._browsers ||</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-                   (this._browsers = Array.map(this.tabs, tab =&gt; tab.linkedBrowser));</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+                   (this._browsers = Array.from(this.tabs, tab =&gt; tab.linkedBrowser));</span>
<a href="#l2.33"></a><span id="l2.33">           ]]&gt;</span>
<a href="#l2.34"></a><span id="l2.34">         &lt;/getter&gt;</span>
<a href="#l2.35"></a><span id="l2.35">       &lt;/property&gt;</span>
<a href="#l2.36"></a><span id="l2.36"> </span>
<a href="#l2.37"></a><span id="l2.37">       &lt;!-- Drag and drop observer API --&gt;</span>
<a href="#l2.38"></a><span id="l2.38">       &lt;method name=&quot;_onDragStart&quot;&gt;</span>
<a href="#l2.39"></a><span id="l2.39">         &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l2.40"></a><span id="l2.40">         &lt;body&gt;</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineat">@@ -3164,18 +3164,18 @@</span>
<a href="#l2.42"></a><span id="l2.42">   &lt;binding id=&quot;tabbrowser-arrowscrollbox&quot;</span>
<a href="#l2.43"></a><span id="l2.43">            extends=&quot;chrome://global/content/bindings/scrollbox.xml#arrowscrollbox-clicktoscroll&quot;&gt;</span>
<a href="#l2.44"></a><span id="l2.44">     &lt;implementation&gt;</span>
<a href="#l2.45"></a><span id="l2.45">       &lt;!-- Override scrollbox.xml method, since our scrollbox's children are</span>
<a href="#l2.46"></a><span id="l2.46">            inherited from the binding parent --&gt;</span>
<a href="#l2.47"></a><span id="l2.47">       &lt;method name=&quot;_getScrollableElements&quot;&gt;</span>
<a href="#l2.48"></a><span id="l2.48">         &lt;body&gt;</span>
<a href="#l2.49"></a><span id="l2.49">           &lt;![CDATA[</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-            return Array.filter(document.getBindingParent(this).childNodes,</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-                                this._canScrollToElement,</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+            return Array.from(document.getBindingParent(this).childNodes)</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+                        .filter(this._canScrollToElement,</span>
<a href="#l2.54"></a><span id="l2.54">                                 this);</span>
<a href="#l2.55"></a><span id="l2.55">           ]]&gt;</span>
<a href="#l2.56"></a><span id="l2.56">         &lt;/body&gt;</span>
<a href="#l2.57"></a><span id="l2.57">       &lt;/method&gt;</span>
<a href="#l2.58"></a><span id="l2.58">       &lt;method name=&quot;_canScrollToElement&quot;&gt;</span>
<a href="#l2.59"></a><span id="l2.59">         &lt;parameter name=&quot;aTab&quot;/&gt;</span>
<a href="#l2.60"></a><span id="l2.60">         &lt;body&gt;</span>
<a href="#l2.61"></a><span id="l2.61">           &lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/browser/test/browser/browser_page_style_menu.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_page_style_menu.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -19,17 +19,17 @@ function checkPageStyleMenu() {</span>
<a href="#l3.4"></a><span id="l3.4">   var items = [];</span>
<a href="#l3.5"></a><span id="l3.5">   var current = menupopup.getElementsByTagName(&quot;menuitem&quot;)[1];</span>
<a href="#l3.6"></a><span id="l3.6">   while (current.nextSibling) {</span>
<a href="#l3.7"></a><span id="l3.7">     current = current.nextSibling;</span>
<a href="#l3.8"></a><span id="l3.8">     items.push(current);</span>
<a href="#l3.9"></a><span id="l3.9">   }</span>
<a href="#l3.10"></a><span id="l3.10"> </span>
<a href="#l3.11"></a><span id="l3.11">   var validLinks = 0;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  Array.forEach(content.document.getElementsByTagName(&quot;link&quot;), function (link) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  Array.from(content.document.getElementsByTagName(&quot;link&quot;)).forEach(function (link) {</span>
<a href="#l3.14"></a><span id="l3.14">     var title = link.getAttribute(&quot;title&quot;);</span>
<a href="#l3.15"></a><span id="l3.15">     var rel = link.getAttribute(&quot;rel&quot;);</span>
<a href="#l3.16"></a><span id="l3.16">     var media = link.getAttribute(&quot;media&quot;);</span>
<a href="#l3.17"></a><span id="l3.17">     var idstring = &quot;link &quot; + (title ? title : &quot;without title and&quot;) +</span>
<a href="#l3.18"></a><span id="l3.18">                    &quot; with rel=\&quot;&quot; + rel + &quot;\&quot;&quot; +</span>
<a href="#l3.19"></a><span id="l3.19">                    (media ? &quot; and media=\&quot;&quot; + media + &quot;\&quot;&quot; : &quot;&quot;);</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21">     var item = items.filter(item =&gt; item.getAttribute(&quot;label&quot;) == title);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/browser/test/browser/browser_relatedTabs.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_relatedTabs.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -27,17 +27,20 @@ function test() {</span>
<a href="#l4.4"></a><span id="l4.4">   getBrowser().removeTab(tabs.pop());</span>
<a href="#l4.5"></a><span id="l4.5">   addTab(&quot;about:blank&quot;, getBrowser().currentURI);</span>
<a href="#l4.6"></a><span id="l4.6">   getBrowser().moveTabTo(getBrowser().selectedTab, 1);</span>
<a href="#l4.7"></a><span id="l4.7">   addTab(&quot;http://mochi.test:8888/#6&quot;, getBrowser().currentURI);</span>
<a href="#l4.8"></a><span id="l4.8">   addTab();</span>
<a href="#l4.9"></a><span id="l4.9">   addTab(&quot;http://mochi.test:8888/#7&quot;);</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11">   function testPosition(tabNum, expectedPosition, msg) {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    is(Array.indexOf(getBrowser().tabs, tabs[tabNum]), expectedPosition, msg);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    is(Array.from(getBrowser().tabs)</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+            .indexOf(tabs[tabNum]),</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+       expectedPosition,</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+       msg);</span>
<a href="#l4.17"></a><span id="l4.17">   }</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">   testPosition(0, 3, &quot;tab without referrer was opened to the far right&quot;);</span>
<a href="#l4.20"></a><span id="l4.20">   testPosition(1, 7, &quot;tab without referrer was opened to the far right&quot;);</span>
<a href="#l4.21"></a><span id="l4.21">   testPosition(2, 5, &quot;tab with referrer opened immediately to the right&quot;);</span>
<a href="#l4.22"></a><span id="l4.22">   testPosition(3, 1, &quot;next tab with referrer opened further to the right&quot;);</span>
<a href="#l4.23"></a><span id="l4.23">   testPosition(4, 4, &quot;tab selection changed, tab opens immediately to the right&quot;);</span>
<a href="#l4.24"></a><span id="l4.24">   testPosition(5, 6, &quot;blank tab with referrer opens to the right of 3rd original tab where removed tab was&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/common/bindings/notification.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/common/bindings/notification.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -856,17 +856,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">           &lt;![CDATA[</span>
<a href="#l5.5"></a><span id="l5.5">             // XXX just doing (callback)(arg) was giving a same-origin error. bug?</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">             /* We use event bubbling for the event listeners so that inside a</span>
<a href="#l5.8"></a><span id="l5.8">                click-to-play plugin we don't activate the plugin when the user</span>
<a href="#l5.9"></a><span id="l5.9">                clicks on a link in the click-to-play UI (e.g. to check for</span>
<a href="#l5.10"></a><span id="l5.10">                plugin updates)</span>
<a href="#l5.11"></a><span id="l5.11">              */</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-            let callbackArgs = Array.slice(arguments, 2);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+            let callbackArgs = Array.from(arguments).slice(2);</span>
<a href="#l5.14"></a><span id="l5.14">             linkNode.addEventListener(&quot;click&quot;,</span>
<a href="#l5.15"></a><span id="l5.15">                                       function(aEvent) {</span>
<a href="#l5.16"></a><span id="l5.16">                                         if (!aEvent.isTrusted)</span>
<a href="#l5.17"></a><span id="l5.17">                                           return;</span>
<a href="#l5.18"></a><span id="l5.18">                                         if (aEvent.button != 0)</span>
<a href="#l5.19"></a><span id="l5.19">                                           return;</span>
<a href="#l5.20"></a><span id="l5.20">                                         aEvent.preventDefault();</span>
<a href="#l5.21"></a><span id="l5.21">                                         aEvent.stopPropagation();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/common/history/treeView.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/common/history/treeView.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -229,18 +229,18 @@ PlacesTreeView.prototype = {</span>
<a href="#l6.4"></a><span id="l6.4">   _buildVisibleSection:</span>
<a href="#l6.5"></a><span id="l6.5">   function PTV__buildVisibleSection(aContainer, aFirstChildRow, aToOpen)</span>
<a href="#l6.6"></a><span id="l6.6">   {</span>
<a href="#l6.7"></a><span id="l6.7">     // There's nothing to do if the container is closed.</span>
<a href="#l6.8"></a><span id="l6.8">     if (!aContainer.containerOpen)</span>
<a href="#l6.9"></a><span id="l6.9">       return 0;</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">     // Inserting the new elements into the rows array in one shot (by</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    // Array.concat) is faster than resizing the array (by splice) on each loop</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-    // iteration.</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+    // Array.prototype.concat) is faster than resizing the array (by splice) on</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+    // each loop iteration.</span>
<a href="#l6.16"></a><span id="l6.16">     var cc = aContainer.childCount;</span>
<a href="#l6.17"></a><span id="l6.17">     var newElements = new Array(cc);</span>
<a href="#l6.18"></a><span id="l6.18">     this._rows = this._rows.splice(0, aFirstChildRow)</span>
<a href="#l6.19"></a><span id="l6.19">                            .concat(newElements, this._rows);</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">     if (this._isPlainContainer(aContainer))</span>
<a href="#l6.22"></a><span id="l6.22">       return cc;</span>
<a href="#l6.23"></a><span id="l6.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/common/places/browserPlacesViews.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/common/places/browserPlacesViews.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1305,17 +1305,17 @@ PlacesToolbar.prototype = {</span>
<a href="#l7.4"></a><span id="l7.4">     if (!PlacesUtils.nodeIsFolder(this._resultNode))</span>
<a href="#l7.5"></a><span id="l7.5">       return null;</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">     let dropPoint = { ip: null, beforeIndex: null, folderElt: null };</span>
<a href="#l7.8"></a><span id="l7.8">     let elt = aEvent.target;</span>
<a href="#l7.9"></a><span id="l7.9">     if (elt._placesNode &amp;&amp; elt != this._rootElt &amp;&amp;</span>
<a href="#l7.10"></a><span id="l7.10">         elt.localName != &quot;menupopup&quot;) {</span>
<a href="#l7.11"></a><span id="l7.11">       let eltRect = elt.getBoundingClientRect();</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      let eltIndex = Array.indexOf(this._rootElt.childNodes, elt);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+      let eltIndex = Array.from(this._rootElt.childNodes).indexOf(elt);</span>
<a href="#l7.14"></a><span id="l7.14">       if (PlacesUtils.nodeIsFolder(elt._placesNode) &amp;&amp;</span>
<a href="#l7.15"></a><span id="l7.15">           !PlacesUIUtils.isContentsReadOnly(elt._placesNode)) {</span>
<a href="#l7.16"></a><span id="l7.16">         // This is a folder.</span>
<a href="#l7.17"></a><span id="l7.17">         // If we are in the middle of it, drop inside it.</span>
<a href="#l7.18"></a><span id="l7.18">         // Otherwise, drop before it, with regards to RTL mode.</span>
<a href="#l7.19"></a><span id="l7.19">         let threshold = eltRect.width * 0.25;</span>
<a href="#l7.20"></a><span id="l7.20">         if (this._isRTL ? (aEvent.clientX &gt; eltRect.right - threshold)</span>
<a href="#l7.21"></a><span id="l7.21">                         : (aEvent.clientX &lt; eltRect.left + threshold)) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/suite/common/places/treeView.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/suite/common/places/treeView.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -248,18 +248,18 @@ PlacesTreeView.prototype = {</span>
<a href="#l8.4"></a><span id="l8.4">   _buildVisibleSection:</span>
<a href="#l8.5"></a><span id="l8.5">   function PTV__buildVisibleSection(aContainer, aFirstChildRow, aToOpen)</span>
<a href="#l8.6"></a><span id="l8.6">   {</span>
<a href="#l8.7"></a><span id="l8.7">     // There's nothing to do if the container is closed.</span>
<a href="#l8.8"></a><span id="l8.8">     if (!aContainer.containerOpen)</span>
<a href="#l8.9"></a><span id="l8.9">       return 0;</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11">     // Inserting the new elements into the rows array in one shot (by</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    // Array.concat) is faster than resizing the array (by splice) on each loop</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-    // iteration.</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+    // Array.prototype.concat) is faster than resizing the array (by splice) on</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+    // each loop iteration.</span>
<a href="#l8.16"></a><span id="l8.16">     let cc = aContainer.childCount;</span>
<a href="#l8.17"></a><span id="l8.17">     let newElements = new Array(cc);</span>
<a href="#l8.18"></a><span id="l8.18">     this._rows = this._rows.splice(0, aFirstChildRow)</span>
<a href="#l8.19"></a><span id="l8.19">                      .concat(newElements, this._rows);</span>
<a href="#l8.20"></a><span id="l8.20"> </span>
<a href="#l8.21"></a><span id="l8.21">     if (this._isPlainContainer(aContainer))</span>
<a href="#l8.22"></a><span id="l8.22">       return cc;</span>
<a href="#l8.23"></a><span id="l8.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/common/pref/pref-languages-add.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/common/pref/pref-languages-add.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -84,17 +84,17 @@ function IsRFC1766LangTag(aCandidate)</span>
<a href="#l9.4"></a><span id="l9.4">   return true;</span>
<a href="#l9.5"></a><span id="l9.5"> }</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7"> function WriteAddedLanguages(aListbox)</span>
<a href="#l9.8"></a><span id="l9.8"> {</span>
<a href="#l9.9"></a><span id="l9.9">   var invalidLangs = [];</span>
<a href="#l9.10"></a><span id="l9.10">   // selected languages</span>
<a href="#l9.11"></a><span id="l9.11">   var languages = aListbox.selectedItems;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  var addedLang = Array.map(languages, function(e) { return e.value; });</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  var addedLang = Array.from(languages, e =&gt; e.value);</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">   // user-defined languages</span>
<a href="#l9.16"></a><span id="l9.16">   languages = gOtherLanguages.value;</span>
<a href="#l9.17"></a><span id="l9.17">   if (languages)</span>
<a href="#l9.18"></a><span id="l9.18">   {</span>
<a href="#l9.19"></a><span id="l9.19">     let languageIds = languages.replace(/\s+/g, &quot;&quot;).toLowerCase().split(&quot;,&quot;);</span>
<a href="#l9.20"></a><span id="l9.20">     for (var i = 0; i &lt; languageIds.length; i++)</span>
<a href="#l9.21"></a><span id="l9.21">     {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/suite/common/pref/pref-languages.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/suite/common/pref/pref-languages.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -131,17 +131,17 @@ function InSync(aPrefArray)</span>
<a href="#l10.4"></a><span id="l10.4">       return aElement == gLanguages[aIndex].value;</span>
<a href="#l10.5"></a><span id="l10.5">     }</span>
<a href="#l10.6"></a><span id="l10.6">   );</span>
<a href="#l10.7"></a><span id="l10.7"> }</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9"> // Called on onsynctopreference.</span>
<a href="#l10.10"></a><span id="l10.10"> function WriteActiveLanguages()</span>
<a href="#l10.11"></a><span id="l10.11"> {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  return Array.map(gLanguages, function(e) { return e.value; }).join(&quot;,&quot;);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  return Array.from(gLanguages, e =&gt; e.value).join(&quot;,&quot;);</span>
<a href="#l10.14"></a><span id="l10.14"> }</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16"> function MoveUp()</span>
<a href="#l10.17"></a><span id="l10.17"> {</span>
<a href="#l10.18"></a><span id="l10.18">   var selected = gActiveLanguages.selectedItem;</span>
<a href="#l10.19"></a><span id="l10.19">   var before = selected.previousSibling;</span>
<a href="#l10.20"></a><span id="l10.20">   if (before)</span>
<a href="#l10.21"></a><span id="l10.21">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/suite/common/src/nsSessionStore.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/suite/common/src/nsSessionStore.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -401,17 +401,17 @@ SessionStoreService.prototype = {</span>
<a href="#l11.4"></a><span id="l11.4">         return;</span>
<a href="#l11.5"></a><span id="l11.5">       this._lastSessionState = null;</span>
<a href="#l11.6"></a><span id="l11.6">       let openWindows = {};</span>
<a href="#l11.7"></a><span id="l11.7">       this._forEachBrowserWindow(function(aWindow) {</span>
<a href="#l11.8"></a><span id="l11.8">         //Hide &quot;Restore Last Session&quot; menu item</span>
<a href="#l11.9"></a><span id="l11.9">         let restoreItem = aWindow.document.getElementById(&quot;historyRestoreLastSession&quot;);</span>
<a href="#l11.10"></a><span id="l11.10">         restoreItem.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-        Array.forEach(aWindow.getBrowser().tabs, function(aTab) {</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+        Array.from(aWindow.getBrowser().tabs).forEach(function(aTab) {</span>
<a href="#l11.14"></a><span id="l11.14">           delete aTab.linkedBrowser.__SS_data;</span>
<a href="#l11.15"></a><span id="l11.15">           delete aTab.linkedBrowser.__SS_formDataSaved;</span>
<a href="#l11.16"></a><span id="l11.16">           if (aTab.linkedBrowser.__SS_restoreState)</span>
<a href="#l11.17"></a><span id="l11.17">             this._resetTabRestoringState(aTab);</span>
<a href="#l11.18"></a><span id="l11.18">         });</span>
<a href="#l11.19"></a><span id="l11.19">         openWindows[aWindow.__SSi] = true;</span>
<a href="#l11.20"></a><span id="l11.20">       });</span>
<a href="#l11.21"></a><span id="l11.21">       // also clear all data about closed tabs and windows</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -1917,17 +1917,17 @@ SessionStoreService.prototype = {</span>
<a href="#l11.23"></a><span id="l11.23">         // &lt;select&gt;s without the multiple attribute are hard to determine the</span>
<a href="#l11.24"></a><span id="l11.24">         // default value, so assume we don't have the default.</span>
<a href="#l11.25"></a><span id="l11.25">         hasDefaultValue = false;</span>
<a href="#l11.26"></a><span id="l11.26">         value = node.selectedIndex;</span>
<a href="#l11.27"></a><span id="l11.27">       }</span>
<a href="#l11.28"></a><span id="l11.28">       else {</span>
<a href="#l11.29"></a><span id="l11.29">         // &lt;select&gt;s with the multiple attribute are easier to determine the</span>
<a href="#l11.30"></a><span id="l11.30">         // default value since each &lt;option&gt; has a defaultSelected</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-        let options = Array.map(node.options, function(aOpt, aIx) {</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+        let options = Array.from(node.options, function(aOpt, aIx) {</span>
<a href="#l11.33"></a><span id="l11.33">           let oSelected = aOpt.selected;</span>
<a href="#l11.34"></a><span id="l11.34">           hasDefaultValue = hasDefaultValue &amp;&amp; (oSelected == aOpt.defaultSelected);</span>
<a href="#l11.35"></a><span id="l11.35">           return oSelected ? aIx : -1;</span>
<a href="#l11.36"></a><span id="l11.36">         });</span>
<a href="#l11.37"></a><span id="l11.37">         value = options.filter(aIx =&gt; aIx &gt;= 0);</span>
<a href="#l11.38"></a><span id="l11.38">       }</span>
<a href="#l11.39"></a><span id="l11.39">       // In order to reduce XPath generation (which is slow), we only save data</span>
<a href="#l11.40"></a><span id="l11.40">       // for form fields that have been changed. (cf. bug 537289)</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineat">@@ -3024,17 +3024,17 @@ SessionStoreService.prototype = {</span>
<a href="#l11.42"></a><span id="l11.42">             eventType = &quot;change&quot;;</span>
<a href="#l11.43"></a><span id="l11.43">           } catch (ex) { /* throws for invalid indices */ }</span>
<a href="#l11.44"></a><span id="l11.44">         }</span>
<a href="#l11.45"></a><span id="l11.45">         else if (value &amp;&amp; value.fileList &amp;&amp; value.type == &quot;file&quot; &amp;&amp; node.type == &quot;file&quot;) {</span>
<a href="#l11.46"></a><span id="l11.46">           node.mozSetFileNameArray(value.fileList, value.fileList.length);</span>
<a href="#l11.47"></a><span id="l11.47">           eventType = &quot;input&quot;;</span>
<a href="#l11.48"></a><span id="l11.48">         }</span>
<a href="#l11.49"></a><span id="l11.49">         else if (value &amp;&amp; typeof value.indexOf == &quot;function&quot; &amp;&amp; node.options) {</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-          Array.forEach(node.options, function(aOpt, aIx) {</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+          Array.from(node.options).forEach(function(aOpt, aIx) {</span>
<a href="#l11.52"></a><span id="l11.52">             aOpt.selected = value.indexOf(aIx) &gt; -1;</span>
<a href="#l11.53"></a><span id="l11.53"> </span>
<a href="#l11.54"></a><span id="l11.54">             // Only fire the event here if this wasn't selected by default</span>
<a href="#l11.55"></a><span id="l11.55">             if (!aOpt.defaultSelected)</span>
<a href="#l11.56"></a><span id="l11.56">               eventType = &quot;change&quot;;</span>
<a href="#l11.57"></a><span id="l11.57">           });</span>
<a href="#l11.58"></a><span id="l11.58">         }</span>
<a href="#l11.59"></a><span id="l11.59"> </span>
<a href="#l11.60"></a><span id="l11.60" class="difflineat">@@ -3058,17 +3058,17 @@ SessionStoreService.prototype = {</span>
<a href="#l11.61"></a><span id="l11.61">             aContent.document.body.innerHTML = aData.innerHTML;</span>
<a href="#l11.62"></a><span id="l11.62">           }</span>
<a href="#l11.63"></a><span id="l11.63">         }, 0);</span>
<a href="#l11.64"></a><span id="l11.64">       }</span>
<a href="#l11.65"></a><span id="l11.65">       var match;</span>
<a href="#l11.66"></a><span id="l11.66">       if (aData.scroll &amp;&amp; (match = /(\d+),(\d+)/.exec(aData.scroll)) != null) {</span>
<a href="#l11.67"></a><span id="l11.67">         aContent.scrollTo(match[1], match[2]);</span>
<a href="#l11.68"></a><span id="l11.68">       }</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-      Array.forEach(aContent.document.styleSheets, function(aSS) {</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+      Array.from(aContent.document.styleSheets).forEach(function(aSS) {</span>
<a href="#l11.71"></a><span id="l11.71">         aSS.disabled = aSS.title &amp;&amp; aSS.title != selectedPageStyle;</span>
<a href="#l11.72"></a><span id="l11.72">       });</span>
<a href="#l11.73"></a><span id="l11.73">       for (var i = 0; i &lt; aContent.frames.length; i++) {</span>
<a href="#l11.74"></a><span id="l11.74">         if (aData.children &amp;&amp; aData.children[i] &amp;&amp;</span>
<a href="#l11.75"></a><span id="l11.75">           hasExpectedURL(aContent.document, aData.url)) {</span>
<a href="#l11.76"></a><span id="l11.76">           restoreTextDataAndScrolling(aContent.frames[i], aData.children[i], aPrefix + i + &quot;|&quot;);</span>
<a href="#l11.77"></a><span id="l11.77">         }</span>
<a href="#l11.78"></a><span id="l11.78">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/common/src/nsSuiteGlue.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/common/src/nsSuiteGlue.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -84,24 +84,24 @@ SuiteGlue.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">     const nsIScriptError = Components.interfaces.nsIScriptError;</span>
<a href="#l12.5"></a><span id="l12.5">     var flg = nsIScriptError.errorFlag;</span>
<a href="#l12.6"></a><span id="l12.6">     switch (aEvent.level) {</span>
<a href="#l12.7"></a><span id="l12.7">       case &quot;warn&quot;:</span>
<a href="#l12.8"></a><span id="l12.8">         flg = nsIScriptError.warningFlag;</span>
<a href="#l12.9"></a><span id="l12.9">       case &quot;error&quot;:</span>
<a href="#l12.10"></a><span id="l12.10">         var scriptError = Components.classes[&quot;@mozilla.org/scripterror;1&quot;]</span>
<a href="#l12.11"></a><span id="l12.11">                                     .createInstance(nsIScriptError);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        scriptError.initWithWindowID(Array.slice(aEvent.arguments),</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+        scriptError.initWithWindowID(Array.from(aEvent.arguments),</span>
<a href="#l12.14"></a><span id="l12.14">                                      aEvent.filename, &quot;&quot;, aEvent.lineNumber, 0,</span>
<a href="#l12.15"></a><span id="l12.15">                                      flg, &quot;content javascript&quot;, aEvent.innerID);</span>
<a href="#l12.16"></a><span id="l12.16">         Services.console.logMessage(scriptError);</span>
<a href="#l12.17"></a><span id="l12.17">         break;</span>
<a href="#l12.18"></a><span id="l12.18">       case &quot;log&quot;:</span>
<a href="#l12.19"></a><span id="l12.19">       case &quot;info&quot;:</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-        Services.console.logStringMessage(Array.slice(aEvent.arguments));</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+        Services.console.logStringMessage(Array.from(aEvent.arguments));</span>
<a href="#l12.22"></a><span id="l12.22">         break;</span>
<a href="#l12.23"></a><span id="l12.23">     }</span>
<a href="#l12.24"></a><span id="l12.24">   },</span>
<a href="#l12.25"></a><span id="l12.25"> </span>
<a href="#l12.26"></a><span id="l12.26">   _setSyncAutoconnectDelay: function BG__setSyncAutoconnectDelay() {</span>
<a href="#l12.27"></a><span id="l12.27">     // Assume that a non-zero value for services.sync.autoconnectDelay should override</span>
<a href="#l12.28"></a><span id="l12.28">     if (Services.prefs.prefHasUserValue(&quot;services.sync.autoconnectDelay&quot;)) {</span>
<a href="#l12.29"></a><span id="l12.29">       let prefDelay = Services.prefs.getIntPref(&quot;services.sync.autoconnectDelay&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/suite/common/tests/browser/browser_346337.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_346337.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -46,39 +46,39 @@ function test() {</span>
<a href="#l13.4"></a><span id="l13.4">       node.value = aValue;</span>
<a href="#l13.5"></a><span id="l13.5">     else if (typeof aValue == &quot;boolean&quot;)</span>
<a href="#l13.6"></a><span id="l13.6">       node.checked = aValue;</span>
<a href="#l13.7"></a><span id="l13.7">     else if (typeof aValue == &quot;number&quot;)</span>
<a href="#l13.8"></a><span id="l13.8">       node.selectedIndex = aValue;</span>
<a href="#l13.9"></a><span id="l13.9">     else if (node instanceof Components.interfaces.nsIDOMHTMLInputElement &amp;&amp; node.type == &quot;file&quot;)</span>
<a href="#l13.10"></a><span id="l13.10">       node.mozSetFileNameArray(aValue, aValue.length);</span>
<a href="#l13.11"></a><span id="l13.11">     else</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-      Array.forEach(node.options, (aOpt, aIx) =&gt;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-                                    (aOpt.selected = aValue.indexOf(aIx) &gt; -1));</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+      Array.from(node.options).forEach((aOpt, aIx) =&gt;</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+                                       aOpt.selected = aValue.includes(aIx));</span>
<a href="#l13.16"></a><span id="l13.16">   }</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18">   function compareFormValue(aTab, aQuery, aValue) {</span>
<a href="#l13.19"></a><span id="l13.19">     let node = getElementByXPath(aTab, aQuery);</span>
<a href="#l13.20"></a><span id="l13.20">     if (!node)</span>
<a href="#l13.21"></a><span id="l13.21">       return false;</span>
<a href="#l13.22"></a><span id="l13.22">     if (node instanceof Components.interfaces.nsIDOMHTMLInputElement) {</span>
<a href="#l13.23"></a><span id="l13.23">       if (node.type == &quot;file&quot;) {</span>
<a href="#l13.24"></a><span id="l13.24">         let fileNames = node.mozGetFileNameArray();</span>
<a href="#l13.25"></a><span id="l13.25">         return fileNames.length == aValue.length &amp;&amp;</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-               Array.every(fileNames, aFile =&gt; aValue.indexOf(aFile) &gt;= 0);</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+               Array.from(fileNames).every(aFile =&gt; aValue.includes(aFile));</span>
<a href="#l13.28"></a><span id="l13.28">       }</span>
<a href="#l13.29"></a><span id="l13.29">       return aValue == (node.type == &quot;checkbox&quot; || node.type == &quot;radio&quot; ?</span>
<a href="#l13.30"></a><span id="l13.30">                         node.checked : node.value);</span>
<a href="#l13.31"></a><span id="l13.31">     }</span>
<a href="#l13.32"></a><span id="l13.32">     if (node instanceof Components.interfaces.nsIDOMHTMLTextAreaElement)</span>
<a href="#l13.33"></a><span id="l13.33">       return aValue == node.value;</span>
<a href="#l13.34"></a><span id="l13.34">     if (!node.multiple)</span>
<a href="#l13.35"></a><span id="l13.35">       return aValue == node.selectedIndex;</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineminus">-    return Array.every(node.options, (aOpt, aIx) =&gt;</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">-                                       (aValue.indexOf(aIx) &gt; -1) == aOpt.selected);</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+    return Array.from(node.options).every((aOpt, aIx) =&gt;</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+                                          aValue.includes(aIx) == aOpt.selected);</span>
<a href="#l13.40"></a><span id="l13.40">   }</span>
<a href="#l13.41"></a><span id="l13.41"> </span>
<a href="#l13.42"></a><span id="l13.42">   // test setup</span>
<a href="#l13.43"></a><span id="l13.43">   let tabbrowser = getBrowser();</span>
<a href="#l13.44"></a><span id="l13.44">   waitForExplicitFinish();</span>
<a href="#l13.45"></a><span id="l13.45"> </span>
<a href="#l13.46"></a><span id="l13.46">   // make sure we don't save form data at all (except for tab duplication)</span>
<a href="#l13.47"></a><span id="l13.47">   Services.prefs.setIntPref(&quot;browser.sessionstore.privacy_level&quot;, 2);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/suite/common/tests/browser/browser_408470.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_408470.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -11,26 +11,26 @@ function test() {</span>
<a href="#l14.4"></a><span id="l14.4">   let rootDir = getRootDirectory(gTestPath);</span>
<a href="#l14.5"></a><span id="l14.5">   let testURL = rootDir + &quot;browser_408470_sample.html&quot;;</span>
<a href="#l14.6"></a><span id="l14.6">   let tab = getBrowser().addTab(testURL);</span>
<a href="#l14.7"></a><span id="l14.7">   let window = tab.ownerDocument.defaultView;</span>
<a href="#l14.8"></a><span id="l14.8"> </span>
<a href="#l14.9"></a><span id="l14.9">   tab.linkedBrowser.addEventListener(&quot;load&quot;, function loadListener1(aEvent) {</span>
<a href="#l14.10"></a><span id="l14.10">     tab.linkedBrowser.removeEventListener(&quot;load&quot;, loadListener1, true);</span>
<a href="#l14.11"></a><span id="l14.11">     // enable all stylesheets and verify that they're correctly persisted</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    Array.forEach(tab.linkedBrowser.contentDocument.styleSheets, function(aSS, aIx) {</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    Array.from(tab.linkedBrowser.contentDocument.styleSheets).forEach(function(aSS, aIx) {</span>
<a href="#l14.14"></a><span id="l14.14">       pendingCount++;</span>
<a href="#l14.15"></a><span id="l14.15">       let ssTitle = aSS.title;</span>
<a href="#l14.16"></a><span id="l14.16">       stylesheetSwitchAll(tab.linkedBrowser.contentWindow, ssTitle);</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">       let newTab = ss.duplicateTab(window,tab);</span>
<a href="#l14.19"></a><span id="l14.19">       newTab.linkedBrowser.addEventListener(&quot;load&quot;, function loadListener2(aEvent) {</span>
<a href="#l14.20"></a><span id="l14.20">         newTab.linkedBrowser.removeEventListener(&quot;load&quot;, loadListener2, true);</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">-        let states = Array.map(newTab.linkedBrowser.contentDocument.styleSheets,</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineminus">-                               aSS =&gt; !aSS.disabled);</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+        let states = Array.from(newTab.linkedBrowser.contentDocument.styleSheets,</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineplus">+                                aSS =&gt; !aSS.disabled);</span>
<a href="#l14.25"></a><span id="l14.25">         let correct = states.indexOf(true) == aIx &amp;&amp; states.indexOf(true, aIx + 1) == -1;</span>
<a href="#l14.26"></a><span id="l14.26"> </span>
<a href="#l14.27"></a><span id="l14.27">         if (/^fail_/.test(ssTitle))</span>
<a href="#l14.28"></a><span id="l14.28">           ok(!correct, &quot;didn't restore stylesheet &quot; + ssTitle);</span>
<a href="#l14.29"></a><span id="l14.29">         else</span>
<a href="#l14.30"></a><span id="l14.30">           ok(correct, &quot;restored stylesheet &quot; + ssTitle);</span>
<a href="#l14.31"></a><span id="l14.31"> </span>
<a href="#l14.32"></a><span id="l14.32">         getBrowser().removeTab(newTab);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/suite/common/tests/browser/browser_form_restore_events.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/suite/common/tests/browser/browser_form_restore_events.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -28,17 +28,17 @@ function test() {</span>
<a href="#l15.4"></a><span id="l15.4">     doc.getElementById(&quot;modify04&quot;).value += &quot; &quot; + Date.now();</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">     // file</span>
<a href="#l15.7"></a><span id="l15.7">     doc.getElementById(&quot;modify05&quot;).value = file.path;</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9">     // select</span>
<a href="#l15.10"></a><span id="l15.10">     doc.getElementById(&quot;modify06&quot;).selectedIndex = 1;</span>
<a href="#l15.11"></a><span id="l15.11">     var multipleChange = doc.getElementById(&quot;modify07&quot;);</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    Array.forEach(multipleChange.options, option =&gt; option.selected = true);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+    Array.from(multipleChange.options).forEach(option =&gt; option.selected = true);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">     // checkbox</span>
<a href="#l15.16"></a><span id="l15.16">     doc.getElementById(&quot;modify08&quot;).checked = true;</span>
<a href="#l15.17"></a><span id="l15.17">     doc.getElementById(&quot;modify09&quot;).checked = false;</span>
<a href="#l15.18"></a><span id="l15.18"> </span>
<a href="#l15.19"></a><span id="l15.19">     // radio</span>
<a href="#l15.20"></a><span id="l15.20">     // select one then another in the same group - only last one should get event on restore</span>
<a href="#l15.21"></a><span id="l15.21">     doc.getElementById(&quot;modify10&quot;).checked = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/suite/common/utilityOverlay.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/suite/common/utilityOverlay.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -347,20 +347,20 @@ function onViewToolbarsPopupShowing(aEve</span>
<a href="#l16.4"></a><span id="l16.4">   // where toolboxIds is either a string or an array of strings.</span>
<a href="#l16.5"></a><span id="l16.5">   var firstMenuItem = aInsertPoint instanceof XULElement ? aInsertPoint</span>
<a href="#l16.6"></a><span id="l16.6">                                                          : popup.firstChild;</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8">   var toolbar = document.popupNode || popup;</span>
<a href="#l16.9"></a><span id="l16.9">   while (toolbar.localName != &quot;toolbar&quot;)</span>
<a href="#l16.10"></a><span id="l16.10">     toolbar = toolbar.parentNode;</span>
<a href="#l16.11"></a><span id="l16.11">   var toolbox = toolbar.toolbox;</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  var externalToolbars = Array.filter(toolbox.externalToolbars,</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-                                      function(toolbar) {</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+  var externalToolbars = Array.from(toolbox.externalToolbars)</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+                              .filter(function(toolbar) {</span>
<a href="#l16.16"></a><span id="l16.16">                                         return toolbar.hasAttribute(&quot;toolbarname&quot;)});</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-  var toolbars = Array.slice(toolbox.getElementsByAttribute(&quot;toolbarname&quot;, &quot;*&quot;));</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+  var toolbars = Array.from(toolbox.getElementsByAttribute(&quot;toolbarname&quot;, &quot;*&quot;));</span>
<a href="#l16.19"></a><span id="l16.19">   toolbars = toolbars.concat(externalToolbars);</span>
<a href="#l16.20"></a><span id="l16.20">   var menusep = document.getElementById(&quot;toolbarmode-sep&quot;);</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22">   var menubar = toolbox.getElementsByAttribute(&quot;type&quot;, &quot;menubar&quot;).item(0);</span>
<a href="#l16.23"></a><span id="l16.23">   if (!menubar || !toolbars.length) {</span>
<a href="#l16.24"></a><span id="l16.24">     if (menusep)</span>
<a href="#l16.25"></a><span id="l16.25">       menusep.hidden = true;</span>
<a href="#l16.26"></a><span id="l16.26">     return;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/suite/mailnews/compose/prefs/pref-formatting.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/suite/mailnews/compose/prefs/pref-formatting.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -142,10 +142,10 @@ function ReadDomains(aListbox)</span>
<a href="#l17.4"></a><span id="l17.4">         aListbox.appendItem(str);</span>
<a href="#l17.5"></a><span id="l17.5">     }</span>
<a href="#l17.6"></a><span id="l17.6">   }</span>
<a href="#l17.7"></a><span id="l17.7"> }</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9"> function WriteDomains(aListbox)</span>
<a href="#l17.10"></a><span id="l17.10"> {</span>
<a href="#l17.11"></a><span id="l17.11">   var domains = aListbox.getElementsByAttribute(&quot;label&quot;, &quot;*&quot;);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  return Array.map(domains, function(e) { return e.label; }).join(&quot;,&quot;);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  return Array.from(domains, e =&gt; e.label).join(&quot;,&quot;);</span>
<a href="#l17.14"></a><span id="l17.14"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/suite/mailnews/mailWidgets.xml</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/suite/mailnews/mailWidgets.xml</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -105,17 +105,17 @@</span>
<a href="#l18.4"></a><span id="l18.4">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l18.5"></a><span id="l18.5">           return direction * this.getNumberOfVisibleRows();</span>
<a href="#l18.6"></a><span id="l18.6">         ]]&gt;&lt;/body&gt;</span>
<a href="#l18.7"></a><span id="l18.7">       &lt;/method&gt;</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">       &lt;!-- ///////////////// private members ///////////////// --&gt;</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11">       &lt;property name=&quot;children&quot; readonly=&quot;true&quot;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-                onget=&quot;return Array.slice(this.getElementsByTagName('descriptionitem'));&quot;/&gt;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+                onget=&quot;return Array.from(this.getElementsByTagName('descriptionitem'));&quot;/&gt;</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15">       &lt;method name=&quot;_fireOnSelect&quot;&gt;</span>
<a href="#l18.16"></a><span id="l18.16">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l18.17"></a><span id="l18.17">           if (!this._suppressOnSelect &amp;&amp; !this.suppressOnSelect) {</span>
<a href="#l18.18"></a><span id="l18.18">             this.dispatchEvent(new Event(&quot;select&quot;,</span>
<a href="#l18.19"></a><span id="l18.19">               { bubbles: false, cancelable: true }));</span>
<a href="#l18.20"></a><span id="l18.20">           }</span>
<a href="#l18.21"></a><span id="l18.21">         ]]&gt;&lt;/body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/suite/mailnews/messengerdnd.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/suite/mailnews/messengerdnd.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -16,18 +16,18 @@ function CanDropOnFolderTree(aIndex, aOr</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5">   var folderTree = GetFolderTree();</span>
<a href="#l19.6"></a><span id="l19.6">   var targetFolder = GetFolderResource(folderTree, aIndex)</span>
<a href="#l19.7"></a><span id="l19.7">                        .QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l19.8"></a><span id="l19.8">   var dt = dragSession.dataTransfer;</span>
<a href="#l19.9"></a><span id="l19.9">   var count = dt.mozItemCount;</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">   // We only support drag of a single flavor at a time.</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  var types = dt.mozTypesAt(0);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-  if (Array.indexOf(types, &quot;text/x-moz-message&quot;) != -1)</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+  var types = Array.from(dt.mozTypesAt(0));</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+  if (types.includes(&quot;text/x-moz-message&quot;))</span>
<a href="#l19.16"></a><span id="l19.16">   {</span>
<a href="#l19.17"></a><span id="l19.17">     // Only allow dragging onto container.</span>
<a href="#l19.18"></a><span id="l19.18">     if (aOrientation != Components.interfaces.nsITreeView.DROP_ON)</span>
<a href="#l19.19"></a><span id="l19.19">       return false;</span>
<a href="#l19.20"></a><span id="l19.20">     // Don't allow drop onto server itself.</span>
<a href="#l19.21"></a><span id="l19.21">     if (targetFolder.isServer)</span>
<a href="#l19.22"></a><span id="l19.22">       return false;</span>
<a href="#l19.23"></a><span id="l19.23">     // Don't allow drop into a folder that cannot take messages.</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineat">@@ -37,17 +37,17 @@ function CanDropOnFolderTree(aIndex, aOr</span>
<a href="#l19.25"></a><span id="l19.25">     {</span>
<a href="#l19.26"></a><span id="l19.26">       let msgHdr = messenger.msgHdrFromURI(dt.mozGetDataAt(&quot;text/x-moz-message&quot;, i));</span>
<a href="#l19.27"></a><span id="l19.27">       // Don't allow drop onto original folder.</span>
<a href="#l19.28"></a><span id="l19.28">       if (msgHdr.folder == targetFolder)</span>
<a href="#l19.29"></a><span id="l19.29">         return false;</span>
<a href="#l19.30"></a><span id="l19.30">     }</span>
<a href="#l19.31"></a><span id="l19.31">     return true;</span>
<a href="#l19.32"></a><span id="l19.32">   }</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-  else if (Array.indexOf(types, &quot;text/x-moz-folder&quot;) != -1)</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineplus">+  else if (types.includes(&quot;text/x-moz-folder&quot;))</span>
<a href="#l19.35"></a><span id="l19.35">   {</span>
<a href="#l19.36"></a><span id="l19.36">     // Only allow dragging onto container.</span>
<a href="#l19.37"></a><span id="l19.37">     if (aOrientation != Components.interfaces.nsITreeView.DROP_ON)</span>
<a href="#l19.38"></a><span id="l19.38">       return false;</span>
<a href="#l19.39"></a><span id="l19.39">     // If cannot create subfolders then don't allow drop here.</span>
<a href="#l19.40"></a><span id="l19.40">     if (!targetFolder.canCreateSubfolders)</span>
<a href="#l19.41"></a><span id="l19.41">       return false;</span>
<a href="#l19.42"></a><span id="l19.42"> </span>
<a href="#l19.43"></a><span id="l19.43" class="difflineat">@@ -74,17 +74,17 @@ function CanDropOnFolderTree(aIndex, aOr</span>
<a href="#l19.44"></a><span id="l19.44">       // If there is a folder that can't be renamed, don't allow it to be</span>
<a href="#l19.45"></a><span id="l19.45">       // dropped if it is not to &quot;Local Folders&quot; or is to the same account.</span>
<a href="#l19.46"></a><span id="l19.46">       if (!folder.canRename &amp;&amp; (targetFolder.server.type != &quot;none&quot; ||</span>
<a href="#l19.47"></a><span id="l19.47">                                 folder.server == targetFolder.server))</span>
<a href="#l19.48"></a><span id="l19.48">         return false;</span>
<a href="#l19.49"></a><span id="l19.49">     }</span>
<a href="#l19.50"></a><span id="l19.50">     return true;</span>
<a href="#l19.51"></a><span id="l19.51">   }</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineminus">-  else if (Array.indexOf(types, &quot;text/x-moz-newsfolder&quot;) != -1)</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineplus">+  else if (types.includes(&quot;text/x-moz-newsfolder&quot;))</span>
<a href="#l19.54"></a><span id="l19.54">   {</span>
<a href="#l19.55"></a><span id="l19.55">     // Don't allow dragging onto newsgroup.</span>
<a href="#l19.56"></a><span id="l19.56">     if (aOrientation == Components.interfaces.nsITreeView.DROP_ON)</span>
<a href="#l19.57"></a><span id="l19.57">       return false;</span>
<a href="#l19.58"></a><span id="l19.58">     // Don't allow drop onto server itself.</span>
<a href="#l19.59"></a><span id="l19.59">     if (targetFolder.isServer)</span>
<a href="#l19.60"></a><span id="l19.60">       return false;</span>
<a href="#l19.61"></a><span id="l19.61">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineat">@@ -104,29 +104,29 @@ function CanDropOnFolderTree(aIndex, aOr</span>
<a href="#l19.63"></a><span id="l19.63">         targetFolder = GetFolderResource(folderTree, aIndex)</span>
<a href="#l19.64"></a><span id="l19.64">                          .QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l19.65"></a><span id="l19.65">         if (targetFolder == folder)</span>
<a href="#l19.66"></a><span id="l19.66">           return false;</span>
<a href="#l19.67"></a><span id="l19.67">       }</span>
<a href="#l19.68"></a><span id="l19.68">     }</span>
<a href="#l19.69"></a><span id="l19.69">     return true;</span>
<a href="#l19.70"></a><span id="l19.70">   }</span>
<a href="#l19.71"></a><span id="l19.71" class="difflineminus">-  else if (Array.indexOf(types, &quot;text/x-moz-url&quot;) != -1)</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineplus">+  else if (types.includes(&quot;text/x-moz-url&quot;))</span>
<a href="#l19.73"></a><span id="l19.73">   {</span>
<a href="#l19.74"></a><span id="l19.74">     // Only allow dragging onto container.</span>
<a href="#l19.75"></a><span id="l19.75">     if (aOrientation != Components.interfaces.nsITreeView.DROP_ON)</span>
<a href="#l19.76"></a><span id="l19.76">       return false;</span>
<a href="#l19.77"></a><span id="l19.77">     // This is a potential RSS feed to subscribe to</span>
<a href="#l19.78"></a><span id="l19.78">     // and there's only one, so just get the 0th element.</span>
<a href="#l19.79"></a><span id="l19.79">     let url = dt.mozGetDataAt(&quot;text/x-moz-url&quot;, 0);</span>
<a href="#l19.80"></a><span id="l19.80">     let scheme = Services.io.extractScheme(url);</span>
<a href="#l19.81"></a><span id="l19.81">     if (/^https?$/.test(scheme) &amp;&amp; targetFolder.server.type == &quot;rss&quot;)</span>
<a href="#l19.82"></a><span id="l19.82">       return true;</span>
<a href="#l19.83"></a><span id="l19.83">   }</span>
<a href="#l19.84"></a><span id="l19.84" class="difflineminus">-  else if (Array.indexOf(types, &quot;application/x-moz-file&quot;) != -1)</span>
<a href="#l19.85"></a><span id="l19.85" class="difflineplus">+  else if (types.includes(&quot;application/x-moz-file&quot;))</span>
<a href="#l19.86"></a><span id="l19.86">   {</span>
<a href="#l19.87"></a><span id="l19.87">     // Only allow dragging onto container.</span>
<a href="#l19.88"></a><span id="l19.88">     if (aOrientation != Components.interfaces.nsITreeView.DROP_ON)</span>
<a href="#l19.89"></a><span id="l19.89">       return false;</span>
<a href="#l19.90"></a><span id="l19.90">     // Don't allow drop onto server itself.</span>
<a href="#l19.91"></a><span id="l19.91">     if (targetFolder.isServer)</span>
<a href="#l19.92"></a><span id="l19.92">       return false;</span>
<a href="#l19.93"></a><span id="l19.93">     // Don't allow drop into a folder that cannot take messages.</span>
<a href="#l19.94"></a><span id="l19.94" class="difflineat">@@ -148,18 +148,18 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l19.95"></a><span id="l19.95"> </span>
<a href="#l19.96"></a><span id="l19.96">   var folderTree = GetFolderTree();</span>
<a href="#l19.97"></a><span id="l19.97">   var targetFolder = GetFolderResource(folderTree, aRow)</span>
<a href="#l19.98"></a><span id="l19.98">                        .QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l19.99"></a><span id="l19.99">   var dt = dragSession.dataTransfer;</span>
<a href="#l19.100"></a><span id="l19.100">   var count = dt.mozItemCount;</span>
<a href="#l19.101"></a><span id="l19.101"> </span>
<a href="#l19.102"></a><span id="l19.102">   // We only support drag of a single flavor at a time.</span>
<a href="#l19.103"></a><span id="l19.103" class="difflineminus">-  var types = dt.mozTypesAt(0);</span>
<a href="#l19.104"></a><span id="l19.104" class="difflineminus">-  if (Array.indexOf(types, &quot;text/x-moz-folder&quot;) != -1)</span>
<a href="#l19.105"></a><span id="l19.105" class="difflineplus">+  var types = Array.from(dt.mozTypesAt(0));</span>
<a href="#l19.106"></a><span id="l19.106" class="difflineplus">+  if (types.includes(&quot;text/x-moz-folder&quot;))</span>
<a href="#l19.107"></a><span id="l19.107">   {</span>
<a href="#l19.108"></a><span id="l19.108">     const NS_MSG_FOLDER_EXISTS = 0x80550013;</span>
<a href="#l19.109"></a><span id="l19.109">     const NS_MSG_ERROR_COPY_FOLDER_ABORTED = 0x8055001a;</span>
<a href="#l19.110"></a><span id="l19.110"> </span>
<a href="#l19.111"></a><span id="l19.111">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l19.112"></a><span id="l19.112">     {</span>
<a href="#l19.113"></a><span id="l19.113">       let folder = dt.mozGetDataAt(&quot;text/x-moz-folder&quot;, i);</span>
<a href="#l19.114"></a><span id="l19.114">       let array = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l19.115"></a><span id="l19.115" class="difflineat">@@ -173,17 +173,17 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l19.116"></a><span id="l19.116">                                  null,</span>
<a href="#l19.117"></a><span id="l19.117">                                  msgWindow);</span>
<a href="#l19.118"></a><span id="l19.118">       }</span>
<a href="#l19.119"></a><span id="l19.119">       // Ignore known errors from canceled warning dialogs.</span>
<a href="#l19.120"></a><span id="l19.120">       catch (ex if (ex.result == NS_MSG_FOLDER_EXISTS)) {}</span>
<a href="#l19.121"></a><span id="l19.121">       catch (ex if (ex.result == NS_MSG_ERROR_COPY_FOLDER_ABORTED)) {}</span>
<a href="#l19.122"></a><span id="l19.122">     }</span>
<a href="#l19.123"></a><span id="l19.123">   }</span>
<a href="#l19.124"></a><span id="l19.124" class="difflineminus">-  else if (Array.indexOf(types, &quot;text/x-moz-newsfolder&quot;) != -1)</span>
<a href="#l19.125"></a><span id="l19.125" class="difflineplus">+  else if (types.includes(&quot;text/x-moz-newsfolder&quot;))</span>
<a href="#l19.126"></a><span id="l19.126">   {</span>
<a href="#l19.127"></a><span id="l19.127">     // Start by getting folders into order.</span>
<a href="#l19.128"></a><span id="l19.128">     let folders = new Array;</span>
<a href="#l19.129"></a><span id="l19.129">     for (let i = 0; i &lt; count; i++) {</span>
<a href="#l19.130"></a><span id="l19.130">       let folder = dt.mozGetDataAt(&quot;text/x-moz-newsfolder&quot;, i)</span>
<a href="#l19.131"></a><span id="l19.131">                      .QueryInterface(Components.interfaces.nsIMsgFolder);</span>
<a href="#l19.132"></a><span id="l19.132">       let folderIndex = EnsureFolderIndex(folderTree.builderView, folder);</span>
<a href="#l19.133"></a><span id="l19.133">       folders[folderIndex] = folder;</span>
<a href="#l19.134"></a><span id="l19.134" class="difflineat">@@ -200,17 +200,17 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l19.135"></a><span id="l19.135"> </span>
<a href="#l19.136"></a><span id="l19.136">         let folderIndex = EnsureFolderIndex(folderTree.builderView, folder);</span>
<a href="#l19.137"></a><span id="l19.137">         folderTree.view.selection.toggleSelect(folderIndex);</span>
<a href="#l19.138"></a><span id="l19.138">         folderTree.treeBoxObject.ensureRowIsVisible(folderIndex);</span>
<a href="#l19.139"></a><span id="l19.139">       }</span>
<a href="#l19.140"></a><span id="l19.140">       i -= aOrientation;</span>
<a href="#l19.141"></a><span id="l19.141">     }</span>
<a href="#l19.142"></a><span id="l19.142">   }</span>
<a href="#l19.143"></a><span id="l19.143" class="difflineminus">-  else if (Array.indexOf(types, &quot;text/x-moz-message&quot;) != -1)</span>
<a href="#l19.144"></a><span id="l19.144" class="difflineplus">+  else if (types.includes(&quot;text/x-moz-message&quot;))</span>
<a href="#l19.145"></a><span id="l19.145">   {</span>
<a href="#l19.146"></a><span id="l19.146">     let array = Components.classes[&quot;@mozilla.org/array;1&quot;]</span>
<a href="#l19.147"></a><span id="l19.147">                           .createInstance(Components.interfaces.nsIMutableArray);</span>
<a href="#l19.148"></a><span id="l19.148">     let sourceFolder;</span>
<a href="#l19.149"></a><span id="l19.149">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l19.150"></a><span id="l19.150">     {</span>
<a href="#l19.151"></a><span id="l19.151">       let msgHdr = messenger.msgHdrFromURI(dt.mozGetDataAt(&quot;text/x-moz-message&quot;, i));</span>
<a href="#l19.152"></a><span id="l19.152">       if (!sourceFolder)</span>
<a href="#l19.153"></a><span id="l19.153" class="difflineat">@@ -223,28 +223,28 @@ function DropOnFolderTree(aRow, aOrienta</span>
<a href="#l19.154"></a><span id="l19.154"> </span>
<a href="#l19.155"></a><span id="l19.155">     Services.prefs.setCharPref(&quot;mail.last_msg_movecopy_target_uri&quot;, targetFolder.URI);</span>
<a href="#l19.156"></a><span id="l19.156">     Services.prefs.setBoolPref(&quot;mail.last_msg_movecopy_was_move&quot;, isMove);</span>
<a href="#l19.157"></a><span id="l19.157">     // ### ugh, so this won't work with cross-folder views. We would</span>
<a href="#l19.158"></a><span id="l19.158">     // really need to partition the messages by folder.</span>
<a href="#l19.159"></a><span id="l19.159">     gCopyService.CopyMessages(sourceFolder, array, targetFolder, isMove, null,</span>
<a href="#l19.160"></a><span id="l19.160">                               msgWindow, true);</span>
<a href="#l19.161"></a><span id="l19.161">   }</span>
<a href="#l19.162"></a><span id="l19.162" class="difflineminus">-  else if (Array.indexOf(types, &quot;application/x-moz-file&quot;) != -1)</span>
<a href="#l19.163"></a><span id="l19.163" class="difflineplus">+  else if (types.includes(&quot;application/x-moz-file&quot;))</span>
<a href="#l19.164"></a><span id="l19.164">   {</span>
<a href="#l19.165"></a><span id="l19.165">     for (let i = 0; i &lt; count; i++)</span>
<a href="#l19.166"></a><span id="l19.166">     {</span>
<a href="#l19.167"></a><span id="l19.167">       let extFile = dt.mozGetDataAt(&quot;application/x-moz-file&quot;, i)</span>
<a href="#l19.168"></a><span id="l19.168">                       .QueryInterface(Components.interfaces.nsILocalFile);</span>
<a href="#l19.169"></a><span id="l19.169">       if (extFile.isFile() &amp;&amp; /\.eml$/i.test(extFile.leafName))</span>
<a href="#l19.170"></a><span id="l19.170">         gCopyService.CopyFileMessage(extFile, targetFolder, null, false, 1,</span>
<a href="#l19.171"></a><span id="l19.171">                                      &quot;&quot;, null, msgWindow);</span>
<a href="#l19.172"></a><span id="l19.172">     }</span>
<a href="#l19.173"></a><span id="l19.173">   }</span>
<a href="#l19.174"></a><span id="l19.174" class="difflineminus">-  else if (Array.indexOf(types, &quot;text/x-moz-url&quot;) != -1)</span>
<a href="#l19.175"></a><span id="l19.175" class="difflineplus">+  else if (types.includes(&quot;text/x-moz-url&quot;)))</span>
<a href="#l19.176"></a><span id="l19.176">   {</span>
<a href="#l19.177"></a><span id="l19.177">     // This is a potential RSS feed to subscribe to</span>
<a href="#l19.178"></a><span id="l19.178">     // and there's only one, so just get the 0th element.</span>
<a href="#l19.179"></a><span id="l19.179">     let url = dt.mozGetDataAt(&quot;text/x-moz-url&quot;, 0);</span>
<a href="#l19.180"></a><span id="l19.180">     Components.classes[&quot;@mozilla.org/newsblog-feed-downloader;1&quot;]</span>
<a href="#l19.181"></a><span id="l19.181">               .getService(Components.interfaces.nsINewsBlogFeedDownloader)</span>
<a href="#l19.182"></a><span id="l19.182">               .subscribeToFeed(url, targetFolder, msgWindow);</span>
<a href="#l19.183"></a><span id="l19.183">   }</span>
<a href="#l19.184"></a><span id="l19.184" class="difflineat">@@ -312,17 +312,17 @@ function DragOverThreadPane(aEvent)</span>
<a href="#l19.185"></a><span id="l19.185"> {</span>
<a href="#l19.186"></a><span id="l19.186">   if (!gMsgFolderSelected.canFileMessages ||</span>
<a href="#l19.187"></a><span id="l19.187">       gMsgFolderSelected.server.type == &quot;rss&quot;)</span>
<a href="#l19.188"></a><span id="l19.188">     return;</span>
<a href="#l19.189"></a><span id="l19.189">   let dt = aEvent.dataTransfer;</span>
<a href="#l19.190"></a><span id="l19.190">   dt.effectAllowed = &quot;copy&quot;;</span>
<a href="#l19.191"></a><span id="l19.191">   for (let i = 0; i &lt; dt.mozItemCount; i++)</span>
<a href="#l19.192"></a><span id="l19.192">   {</span>
<a href="#l19.193"></a><span id="l19.193" class="difflineminus">-    if (Array.indexOf(dt.mozTypesAt(i), &quot;application/x-moz-file&quot;) != -1)</span>
<a href="#l19.194"></a><span id="l19.194" class="difflineplus">+    if (Array.from(dt.mozTypesAt(i)).includes(&quot;application/x-moz-file&quot;))</span>
<a href="#l19.195"></a><span id="l19.195">     {</span>
<a href="#l19.196"></a><span id="l19.196">       let extFile = dt.mozGetDataAt(&quot;application/x-moz-file&quot;, i)</span>
<a href="#l19.197"></a><span id="l19.197">                       .QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l19.198"></a><span id="l19.198">       if (extFile.isFile() &amp;&amp; /\.eml$/i.test(extFile.leafName))</span>
<a href="#l19.199"></a><span id="l19.199">       {</span>
<a href="#l19.200"></a><span id="l19.200">         aEvent.preventDefault();</span>
<a href="#l19.201"></a><span id="l19.201">         return;</span>
<a href="#l19.202"></a><span id="l19.202">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/suite/mailnews/nsDragAndDrop.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/suite/mailnews/nsDragAndDrop.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -449,17 +449,17 @@ var nsDragAndDrop = {</span>
<a href="#l20.4"></a><span id="l20.4">       var count = dt.mozItemCount;</span>
<a href="#l20.5"></a><span id="l20.5">       for (var i = 0; i &lt; count; ++i) {</span>
<a href="#l20.6"></a><span id="l20.6">         var types = dt.mozTypesAt(i);</span>
<a href="#l20.7"></a><span id="l20.7">         for (var j = 0; j &lt; flavourSet.flavours.length; j++) {</span>
<a href="#l20.8"></a><span id="l20.8">           var type = flavourSet.flavours[j].contentType;</span>
<a href="#l20.9"></a><span id="l20.9">           // dataTransfer uses text/plain but older code used text/unicode, so</span>
<a href="#l20.10"></a><span id="l20.10">           // switch this for compatibility</span>
<a href="#l20.11"></a><span id="l20.11">           var modtype = (type == &quot;text/unicode&quot;) ? &quot;text/plain&quot; : type;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-          if (Array.indexOf(types, modtype) &gt;= 0) {</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+          if (Array.from(types).includes(modtype)) {</span>
<a href="#l20.14"></a><span id="l20.14">             var data = dt.mozGetDataAt(modtype, i);</span>
<a href="#l20.15"></a><span id="l20.15">             if (data) {</span>
<a href="#l20.16"></a><span id="l20.16">               // Non-strings need some non-zero value used for their data length.</span>
<a href="#l20.17"></a><span id="l20.17">               const kNonStringDataLength = 4;</span>
<a href="#l20.18"></a><span id="l20.18"> </span>
<a href="#l20.19"></a><span id="l20.19">               var length = (typeof data == &quot;string&quot;) ? data.length : kNonStringDataLength;</span>
<a href="#l20.20"></a><span id="l20.20">               dataArray[i] = FlavourToXfer(data, length, flavourSet.flavourTable[type]);</span>
<a href="#l20.21"></a><span id="l20.21">               break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/suite/profile/migration/src/SuiteProfileMigrator.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/suite/profile/migration/src/SuiteProfileMigrator.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -51,17 +51,17 @@ ProfileMigrator.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5">   // We don't yet support checking for the default browser on all platforms,</span>
<a href="#l21.6"></a><span id="l21.6">   // needless to say we don't have migrators for all browsers.  Thus, for each</span>
<a href="#l21.7"></a><span id="l21.7">   // platform, there's a fallback list of migrators used in these cases.</span>
<a href="#l21.8"></a><span id="l21.8">   _PLATFORM_FALLBACK_LIST:</span>
<a href="#l21.9"></a><span id="l21.9">      [&quot;thunderbird&quot;],</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">   _getDefaultMigrator: function PM__getDefaultMigrator() {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    let migratorsOrdered = Array.slice(this._PLATFORM_FALLBACK_LIST);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+    let migratorsOrdered = Array.from(this._PLATFORM_FALLBACK_LIST);</span>
<a href="#l21.14"></a><span id="l21.14"> #if 0</span>
<a href="#l21.15"></a><span id="l21.15">     let defaultBrowser = &quot;&quot;;</span>
<a href="#l21.16"></a><span id="l21.16"> #ifdef XP_WIN</span>
<a href="#l21.17"></a><span id="l21.17">     try {</span>
<a href="#l21.18"></a><span id="l21.18">       const REG_KEY = &quot;SOFTWARE\\Classes\\HTTP\\shell\\open\\command&quot;;</span>
<a href="#l21.19"></a><span id="l21.19">       let regKey = Components.classes[&quot;@mozilla.org/windows-registry-key;1&quot;]</span>
<a href="#l21.20"></a><span id="l21.20">                              .createInstance(Components.interfaces.nsIWindowsRegKey);</span>
<a href="#l21.21"></a><span id="l21.21">       regKey.open(regKey.ROOT_KEY_LOCAL_MACHINE, REG_KEY,</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

