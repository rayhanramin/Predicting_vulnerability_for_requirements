<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12798:45cc1abe255a26c5c6920c64c4ba257007d47d4a</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 45cc1abe255a26c5c6920c64c4ba257007d47d4a" />
<meta property="og:url" content="/comm-central/rev/45cc1abe255a26c5c6920c64c4ba257007d47d4a" />
<meta property="og:description" content="Part of bug 896738 - Switch mailDirService.js to be a testing js module, so that it is only included once. This fixes some of the strict warnings seen. r=mconley,a=part bustage fix for CLOSED TREE" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 45cc1abe255a26c5c6920c64c4ba257007d47d4a 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/45cc1abe255a26c5c6920c64c4ba257007d47d4a">shortlog</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/45cc1abe255a26c5c6920c64c4ba257007d47d4a">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a">files</a> |
changeset |
<a href="/comm-central/raw-rev/45cc1abe255a26c5c6920c64c4ba257007d47d4a">raw</a>  | <a href="/comm-central/archive/45cc1abe255a26c5c6920c64c4ba257007d47d4a.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
Part of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=896738">bug 896738</a> - Switch mailDirService.js to be a testing js module, so that it is only included once. This fixes some of the strict warnings seen. r=mconley,a=part bustage fix for CLOSED TREE
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#114;&#107;&#32;&#66;&#97;&#110;&#110;&#101;&#114;&#32;&#60;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#115;&#116;&#97;&#110;&#100;&#97;&#114;&#100;&#56;&#46;&#112;&#108;&#117;&#115;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 23 Jul 2013 22:18:19 +0100</td></tr>

<tr>
 <td>changeset 12798</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/45cc1abe255a26c5c6920c64c4ba257007d47d4a">45cc1abe255a26c5c6920c64c4ba257007d47d4a</a></td>
</tr>



<tr>
<td>parent 12797</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6b2de324d78fa1261cb067efb1eef73c436493a8">6b2de324d78fa1261cb067efb1eef73c436493a8</a>
</td>
</tr>

<tr>
<td>child 12799</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/63ae3d6b6984b649228a8a2d5d1586238a4c2ea0">63ae3d6b6984b649228a8a2d5d1586238a4c2ea0</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=45cc1abe255a26c5c6920c64c4ba257007d47d4a">9358</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 23 Jul 2013 21:18:54 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@45cc1abe255a [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=45cc1abe255a26c5c6920c64c4ba257007d47d4a">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&newProject=comm-central&newRevision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&newProject=comm-central&newRevision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&newProject=comm-central&newRevision=45cc1abe255a26c5c6920c64c4ba257007d47d4a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mconley%29&revcount=50">mconley</a>, <a href="/comm-central/log?rev=reviewer%28part%29&revcount=50">part</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=896738">896738</a></td></tr>




</table></div>

<div class="page_body description">Part of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=896738">bug 896738</a> - Switch mailDirService.js to be a testing js module, so that it is only included once. This fixes some of the strict warnings seen. r=mconley,a=part bustage fix for CLOSED TREE</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/config/rules.mk">config/rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/config/rules.mk">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/config/rules.mk">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/config/rules.mk">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/config/rules.mk">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/config/rules.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/base/test/unit/head_mailbase.js">mail/base/test/unit/head_mailbase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/base/test/unit/head_mailbase.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/base/test/unit/head_mailbase.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/base/test/unit/head_mailbase.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/base/test/unit/head_mailbase.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/base/test/unit/head_mailbase.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/components/test/unit/head_mailcomponents.js">mail/components/test/unit/head_mailcomponents.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/components/test/unit/head_mailcomponents.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/components/test/unit/head_mailcomponents.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/components/test/unit/head_mailcomponents.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/components/test/unit/head_mailcomponents.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mail/components/test/unit/head_mailcomponents.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/Makefile.in">mailnews/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/Makefile.in">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/Makefile.in">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/Makefile.in">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/Makefile.in">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/head_addrbook.js">mailnews/addrbook/test/unit/head_addrbook.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/head_addrbook.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/head_addrbook.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/head_addrbook.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/head_addrbook.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/head_addrbook.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/test_bug387403.js">mailnews/addrbook/test/unit/test_bug387403.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/test_bug387403.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/test_bug387403.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/test_bug387403.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/test_bug387403.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/addrbook/test/unit/test_bug387403.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/head_mailbase.js">mailnews/base/test/unit/head_mailbase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/head_mailbase.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/head_mailbase.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/head_mailbase.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/head_mailbase.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/head_mailbase.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_detachToFile.js">mailnews/base/test/unit/test_detachToFile.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_detachToFile.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_detachToFile.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_detachToFile.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_detachToFile.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_detachToFile.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_imapPump.js">mailnews/base/test/unit/test_imapPump.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_imapPump.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_imapPump.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_imapPump.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_imapPump.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_imapPump.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_mimemaltdetach.js">mailnews/base/test/unit/test_mimemaltdetach.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_mimemaltdetach.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_mimemaltdetach.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_mimemaltdetach.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_mimemaltdetach.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_mimemaltdetach.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/compose/test/unit/head_compose.js">mailnews/compose/test/unit/head_compose.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/compose/test/unit/head_compose.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/compose/test/unit/head_compose.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/compose/test/unit/head_compose.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/compose/test/unit/head_compose.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/compose/test/unit/head_compose.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/head_gloda.js">mailnews/db/gloda/test/unit/head_gloda.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/head_gloda.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/head_gloda.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/head_gloda.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/head_gloda.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/head_gloda.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">mailnews/db/gloda/test/unit/resources/glodaTestHelper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_corrupt_database.js">mailnews/db/gloda/test/unit/test_corrupt_database.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_corrupt_database.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_corrupt_database.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_corrupt_database.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_corrupt_database.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_corrupt_database.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">mailnews/db/gloda/test/unit/test_mime_attachments_size.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_emitter.js">mailnews/db/gloda/test/unit/test_mime_emitter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_emitter.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_emitter.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_emitter.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_emitter.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_mime_emitter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_nuke_migration.js">mailnews/db/gloda/test/unit/test_nuke_migration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_nuke_migration.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_nuke_migration.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_nuke_migration.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_nuke_migration.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/gloda/test/unit/test_nuke_migration.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/msgdb/test/unit/head_maildb.js">mailnews/db/msgdb/test/unit/head_maildb.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/msgdb/test/unit/head_maildb.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/msgdb/test/unit/head_maildb.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/msgdb/test/unit/head_maildb.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/msgdb/test/unit/head_maildb.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/db/msgdb/test/unit/head_maildb.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_askuser.js">mailnews/extensions/mdn/test/unit/test_askuser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_askuser.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_askuser.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_askuser.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_askuser.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_askuser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">mailnews/extensions/mdn/test/unit/test_mdnFlags.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/imap/test/unit/head_server.js">mailnews/imap/test/unit/head_server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/imap/test/unit/head_server.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/imap/test/unit/head_server.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/imap/test/unit/head_server.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/imap/test/unit/head_server.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/imap/test/unit/head_server.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/import/test/unit/head_import.js">mailnews/import/test/unit/head_import.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/import/test/unit/head_import.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/import/test/unit/head_import.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/import/test/unit/head_import.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/import/test/unit/head_import.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/import/test/unit/head_import.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/local/test/unit/head_maillocal.js">mailnews/local/test/unit/head_maillocal.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/local/test/unit/head_maillocal.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/local/test/unit/head_maillocal.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/local/test/unit/head_maillocal.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/local/test/unit/head_maillocal.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/local/test/unit/head_maillocal.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/head_mime.js">mailnews/mime/test/unit/head_mime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/head_mime.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/head_mime.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/head_mime.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/head_mime.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/head_mime.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_attachment_size.js">mailnews/mime/test/unit/test_attachment_size.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_attachment_size.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_attachment_size.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_attachment_size.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_attachment_size.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_attachment_size.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_badContentType.js">mailnews/mime/test/unit/test_badContentType.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_badContentType.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_badContentType.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_badContentType.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_badContentType.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_badContentType.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_hidden_attachments.js">mailnews/mime/test/unit/test_hidden_attachments.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_hidden_attachments.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_hidden_attachments.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_hidden_attachments.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_hidden_attachments.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_hidden_attachments.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_message_attachment.js">mailnews/mime/test/unit/test_message_attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_message_attachment.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_message_attachment.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_message_attachment.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_message_attachment.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_message_attachment.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_rfc822_body.js">mailnews/mime/test/unit/test_rfc822_body.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_rfc822_body.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_rfc822_body.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_rfc822_body.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_rfc822_body.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_rfc822_body.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_text_attachment.js">mailnews/mime/test/unit/test_text_attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_text_attachment.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_text_attachment.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_text_attachment.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_text_attachment.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/mime/test/unit/test_text_attachment.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/news/test/unit/head_server_setup.js">mailnews/news/test/unit/head_server_setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/news/test/unit/head_server_setup.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/news/test/unit/head_server_setup.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/news/test/unit/head_server_setup.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/news/test/unit/head_server_setup.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/news/test/unit/head_server_setup.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailDirService.js">mailnews/test/resources/mailDirService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailDirService.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailDirService.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailDirService.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailDirService.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailDirService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailShutdown.js">mailnews/test/resources/mailShutdown.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailShutdown.js">file</a> |
<a href="/comm-central/annotate/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailShutdown.js">annotate</a> |
<a href="/comm-central/diff/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailShutdown.js">diff</a> |
<a href="/comm-central/comparison/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailShutdown.js">comparison</a> |
<a href="/comm-central/log/45cc1abe255a26c5c6920c64c4ba257007d47d4a/mailnews/test/resources/mailShutdown.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/rules.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/rules.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -172,16 +172,17 @@ check-interactive:</span>
<a href="#l1.4"></a><span id="l1.4"> check-one:</span>
<a href="#l1.5"></a><span id="l1.5"> 	$(PYTHON) -u $(MOZILLA_DIR)/config/pythonpath.py \</span>
<a href="#l1.6"></a><span id="l1.6"> 	  -I$(MOZDEPTH)/build \</span>
<a href="#l1.7"></a><span id="l1.7"> 	  -I$(MOZILLA_DIR)/build -I$(MOZDEPTH)/_tests/mozbase/mozinfo \</span>
<a href="#l1.8"></a><span id="l1.8"> 	  $(testxpcsrcdir)/runxpcshelltests.py \</span>
<a href="#l1.9"></a><span id="l1.9"> 	  --symbols-path=$(DIST)/crashreporter-symbols \</span>
<a href="#l1.10"></a><span id="l1.10"> 	  --build-info-json=$(MOZDEPTH)/mozinfo.json \</span>
<a href="#l1.11"></a><span id="l1.11"> 	  --test-path=$(SOLO_FILE) \</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+	  --testing-modules-dir=$(MOZDEPTH)/_tests/modules \</span>
<a href="#l1.13"></a><span id="l1.13"> 	  --profile-name=$(MOZ_APP_NAME) \</span>
<a href="#l1.14"></a><span id="l1.14"> 	  --verbose \</span>
<a href="#l1.15"></a><span id="l1.15"> 	  $(EXTRA_TEST_ARGS) \</span>
<a href="#l1.16"></a><span id="l1.16"> 	  $(LIBXUL_DIST)/bin/xpcshell \</span>
<a href="#l1.17"></a><span id="l1.17"> 	  $(foreach dir,$(XPCSHELL_TESTS),$(testxpcobjdir)/$(relativesrcdir)/$(dir))</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19"> endif # XPCSHELL_TESTS</span>
<a href="#l1.20"></a><span id="l1.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/test/unit/head_mailbase.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/test/unit/head_mailbase.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,5 +1,15 @@</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineminus">-var gDEPTH = &quot;../../../../&quot;</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10" class="difflineminus">-// Import the main scripts that mail tests need to set up and tear down</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-load(&quot;../../../../mailnews/resources/mailDirService.js&quot;);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+</span>
<a href="#l2.21"></a><span id="l2.21"> load(&quot;../../../../mailnews/resources/mailTestUtils.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/test/unit/head_mailcomponents.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/test/unit/head_mailcomponents.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,5 +1,15 @@</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+</span>
<a href="#l3.16"></a><span id="l3.16"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-// Import the main scripts that mail tests need to set up and tear down</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-load(&quot;../../../../mailnews/resources/mailDirService.js&quot;);</span>
<a href="#l3.20"></a><span id="l3.20"> load(&quot;../../../../mailnews/resources/mailTestUtils.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/Makefile.in</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/Makefile.in</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -12,16 +12,24 @@ include $(DEPTH)/config/autoconf.mk</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> PREF_JS_EXPORTS = $(srcdir)/mailnews.js</span>
<a href="#l4.6"></a><span id="l4.6"> </span>
<a href="#l4.7"></a><span id="l4.7"> DEFINES += -DOS_ARCH=$(OS_ARCH) \</span>
<a href="#l4.8"></a><span id="l4.8">            -DMOZ_WIDGET_TOOLKIT=$(MOZ_WIDGET_TOOLKIT) \</span>
<a href="#l4.9"></a><span id="l4.9">            -DNO_NSPR_10_SUPPORT \</span>
<a href="#l4.10"></a><span id="l4.10">            $(NULL)</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+ifdef ENABLE_TESTS</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+RESDIR = $(srcdir)/test/resources</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+TESTING_JS_MODULE_DIR = mailnews</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+TESTING_JS_MODULES += \</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+	$(RESDIR)/mailDirService.js \</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+	$(NULL)</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+endif</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+</span>
<a href="#l4.20"></a><span id="l4.20"> include $(topsrcdir)/config/rules.mk</span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22"> ifdef ENABLE_TESTS</span>
<a href="#l4.23"></a><span id="l4.23"> libs::</span>
<a href="#l4.24"></a><span id="l4.24"> 	$(INSTALL) $(wildcard $(srcdir)/test/resources/*.js) $(MOZDEPTH)/_tests/xpcshell/mailnews/resources</span>
<a href="#l4.25"></a><span id="l4.25"> 	$(INSTALL) $(wildcard $(srcdir)/test/data/*) $(MOZDEPTH)/_tests/xpcshell/mailnews/data</span>
<a href="#l4.26"></a><span id="l4.26"> 	$(INSTALL) $(wildcard $(srcdir)/test/fakeserver/*.js) $(MOZDEPTH)/_tests/xpcshell/mailnews/fakeserver</span>
<a href="#l4.27"></a><span id="l4.27"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/head_addrbook.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/head_addrbook.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1,5 +1,14 @@</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineminus">-// Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> // Import the required setup scripts.</span>
<a href="#l5.19"></a><span id="l5.19"> load(&quot;../../../resources/abSetup.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/addrbook/test/unit/test_bug387403.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/addrbook/test/unit/test_bug387403.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,12 +1,10 @@</span>
<a href="#l6.4"></a><span id="l6.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l6.5"></a><span id="l6.5"> /**</span>
<a href="#l6.6"></a><span id="l6.6">  * Test for bug 387403 crash when opening e-mail with broken vcard.</span>
<a href="#l6.7"></a><span id="l6.7">  */</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-</span>
<a href="#l6.11"></a><span id="l6.11"> function run_test() {</span>
<a href="#l6.12"></a><span id="l6.12">   // Before bug 387403 this would hang, eating up all the memory until it</span>
<a href="#l6.13"></a><span id="l6.13">   // crashed.</span>
<a href="#l6.14"></a><span id="l6.14">   MailServices.ab.escapedVCardToAbCard(&quot;begin:vcard\nfn;quoted-printable:Xxxx=C5=82xx  Xxx\nn;quoted-printable:Xxx;Xxxx=C5=82xx \nadr;quoted-printable;quoted-printable;dom:;;xx. Xxxxxxxxxxxx X;Xxxxxx=C3=3&quot;);</span>
<a href="#l6.15"></a><span id="l6.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/base/test/unit/head_mailbase.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/base/test/unit/head_mailbase.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,5 +1,15 @@</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+</span>
<a href="#l7.16"></a><span id="l7.16"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-// Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+load(&quot;../../../../mailnews/resources/mailTestUtils.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/base/test/unit/test_detachToFile.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_detachToFile.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -2,17 +2,16 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.5"></a><span id="l8.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> /*</span>
<a href="#l8.8"></a><span id="l8.8">  * Tests nsIMessenger's detachAttachmentsWOPrompts</span>
<a href="#l8.9"></a><span id="l8.9">  */</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l8.13"></a><span id="l8.13"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15"> // javascript mime emitter functions</span>
<a href="#l8.16"></a><span id="l8.16"> var mimeMsg = {};</span>
<a href="#l8.17"></a><span id="l8.17"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l8.18"></a><span id="l8.18"> Components.utils.import(&quot;resource:///modules/gloda/mimemsg.js&quot;, mimeMsg);</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20"> var tests = [</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/test/unit/test_imapPump.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_imapPump.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -3,17 +3,16 @@</span>
<a href="#l9.4"></a><span id="l9.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> /**</span>
<a href="#l9.7"></a><span id="l9.7">  * Simple demonstration of the imap pump test method.</span>
<a href="#l9.8"></a><span id="l9.8">  */</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> // async support </span>
<a href="#l9.11"></a><span id="l9.11"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l9.13"></a><span id="l9.13"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l9.14"></a><span id="l9.14"> load(&quot;../../../resources/alertTestUtils.js&quot;);</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16"> // IMAP pump</span>
<a href="#l9.17"></a><span id="l9.17"> load(&quot;../../../resources/IMAPpump.js&quot;);</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l9.20"></a><span id="l9.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/test/unit/test_mimemaltdetach.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_mimemaltdetach.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -3,17 +3,16 @@</span>
<a href="#l10.4"></a><span id="l10.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6"> /*</span>
<a href="#l10.7"></a><span id="l10.7">  * Tests nsIMessenger's detachAttachmentsWOPrompts of Mime multi-part</span>
<a href="#l10.8"></a><span id="l10.8">  * alternative messages.</span>
<a href="#l10.9"></a><span id="l10.9">  */</span>
<a href="#l10.10"></a><span id="l10.10"> </span>
<a href="#l10.11"></a><span id="l10.11"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l10.13"></a><span id="l10.13"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l10.14"></a><span id="l10.14"> </span>
<a href="#l10.15"></a><span id="l10.15"> // javascript mime emitter functions</span>
<a href="#l10.16"></a><span id="l10.16"> var mimeMsg = {};</span>
<a href="#l10.17"></a><span id="l10.17"> Components.utils.import(&quot;resource:///modules/gloda/mimemsg.js&quot;, mimeMsg);</span>
<a href="#l10.18"></a><span id="l10.18"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> var tests = [</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_gmail.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -3,17 +3,16 @@</span>
<a href="#l11.4"></a><span id="l11.4">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6"> // Test that imapd.js fakeserver correctly emulates GMail server</span>
<a href="#l11.7"></a><span id="l11.7"> // That means X-GM-EXT-1 capability and GMail flavor XLIST</span>
<a href="#l11.8"></a><span id="l11.8"> // per https://developers.google.com/google-apps/gmail/imap_extensions</span>
<a href="#l11.9"></a><span id="l11.9"> </span>
<a href="#l11.10"></a><span id="l11.10"> // async support</span>
<a href="#l11.11"></a><span id="l11.11"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l11.13"></a><span id="l11.13"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l11.14"></a><span id="l11.14"> load(&quot;../../../resources/alertTestUtils.js&quot;);</span>
<a href="#l11.15"></a><span id="l11.15"> </span>
<a href="#l11.16"></a><span id="l11.16"> // IMAP pump</span>
<a href="#l11.17"></a><span id="l11.17"> load(&quot;../../../resources/IMAPpump.js&quot;);</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l11.20"></a><span id="l11.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/test/unit/test_testsuite_fakeserver_imapd_list-extended.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -2,17 +2,16 @@</span>
<a href="#l12.4"></a><span id="l12.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.5"></a><span id="l12.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> // Test that imapd.js fakeserver correctly implements LIST-EXTENDED imap</span>
<a href="#l12.8"></a><span id="l12.8"> // extension (RFC 5258 - http://tools.ietf.org/html/rfc5258)</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10"> // async support</span>
<a href="#l12.11"></a><span id="l12.11"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l12.13"></a><span id="l12.13"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l12.14"></a><span id="l12.14"> load(&quot;../../../resources/alertTestUtils.js&quot;);</span>
<a href="#l12.15"></a><span id="l12.15"> </span>
<a href="#l12.16"></a><span id="l12.16"> // IMAP pump</span>
<a href="#l12.17"></a><span id="l12.17"> load(&quot;../../../resources/IMAPpump.js&quot;);</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l12.20"></a><span id="l12.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/compose/test/unit/head_compose.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,10 +1,20 @@</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineminus">-// Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+</span>
<a href="#l13.18"></a><span id="l13.18"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20"> // Import the required setup scripts.</span>
<a href="#l13.21"></a><span id="l13.21"> load(&quot;../../../resources/abSetup.js&quot;);</span>
<a href="#l13.22"></a><span id="l13.22"> </span>
<a href="#l13.23"></a><span id="l13.23"> // Import the smtp server scripts</span>
<a href="#l13.24"></a><span id="l13.24"> load(&quot;../../../fakeserver/maild.js&quot;)</span>
<a href="#l13.25"></a><span id="l13.25"> load(&quot;../../../fakeserver/auth.js&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/head_gloda.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/head_gloda.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,3 +1,15 @@</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+</span>
<a href="#l14.16"></a><span id="l14.16"> var gDEPTH = &quot;../../../../../&quot;;</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18" class="difflineminus">-// glodaTestHelper.js does all the imports</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+// glodaTestHelper.js does all the rest of the imports</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/resources/glodaTestHelper.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -21,17 +21,16 @@</span>
<a href="#l15.4"></a><span id="l15.4">  */</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6"> // Services</span>
<a href="#l15.7"></a><span id="l15.7"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l15.8"></a><span id="l15.8"> // MailServices</span>
<a href="#l15.9"></a><span id="l15.9"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11"> // Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l15.13"></a><span id="l15.13"> load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l15.14"></a><span id="l15.14"> load(&quot;../../../../resources/abSetup.js&quot;);</span>
<a href="#l15.15"></a><span id="l15.15"> load(&quot;../../../../resources/logHelper.js&quot;);</span>
<a href="#l15.16"></a><span id="l15.16"> load(&quot;../../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18"> load(&quot;../../../../resources/messageGenerator.js&quot;);</span>
<a href="#l15.19"></a><span id="l15.19"> load(&quot;../../../../resources/messageModifier.js&quot;);</span>
<a href="#l15.20"></a><span id="l15.20"> load(&quot;../../../../resources/messageInjection.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_corrupt_database.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_corrupt_database.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -7,17 +7,16 @@</span>
<a href="#l16.4"></a><span id="l16.4">  * 1) We need to do things as part of the test without gloda having remotely</span>
<a href="#l16.5"></a><span id="l16.5">  *    thought about opening the database.</span>
<a href="#l16.6"></a><span id="l16.6">  * 2) We expect and desire that the logger produce a warning and glodaTestHelper</span>
<a href="#l16.7"></a><span id="l16.7">  *    takes the view that warnings = death.</span>
<a href="#l16.8"></a><span id="l16.8">  *</span>
<a href="#l16.9"></a><span id="l16.9">  * We do use the rest of the test infrastructure though.</span>
<a href="#l16.10"></a><span id="l16.10">  */</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l16.13"></a><span id="l16.13"> load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l16.14"></a><span id="l16.14"> load(&quot;../../../../resources/logHelper.js&quot;);</span>
<a href="#l16.15"></a><span id="l16.15"> load(&quot;../../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l16.16"></a><span id="l16.16"> </span>
<a href="#l16.17"></a><span id="l16.17"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19"> // -- Do configure the gloda prefs though...</span>
<a href="#l16.20"></a><span id="l16.20"> // yes to indexing</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_mime_attachments_size.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_mime_attachments_size.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -7,17 +7,16 @@</span>
<a href="#l17.4"></a><span id="l17.4">  * is streamed to us is actually labeled with the right size.</span>
<a href="#l17.5"></a><span id="l17.5">  */</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7"> /*</span>
<a href="#l17.8"></a><span id="l17.8">  * Do not include glodaTestHelper because we do not want gloda loaded and it</span>
<a href="#l17.9"></a><span id="l17.9">  *  adds a lot of runtime overhead which makes certain debugging strategies like</span>
<a href="#l17.10"></a><span id="l17.10">  *  using chronicle-recorder impractical.</span>
<a href="#l17.11"></a><span id="l17.11">  */</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l17.13"></a><span id="l17.13"> load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l17.14"></a><span id="l17.14"> load(&quot;../../../../resources/logHelper.js&quot;);</span>
<a href="#l17.15"></a><span id="l17.15"> load(&quot;../../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17"> load(&quot;../../../../resources/messageGenerator.js&quot;);</span>
<a href="#l17.18"></a><span id="l17.18"> load(&quot;../../../../resources/messageModifier.js&quot;);</span>
<a href="#l17.19"></a><span id="l17.19"> load(&quot;../../../../resources/messageInjection.js&quot;);</span>
<a href="#l17.20"></a><span id="l17.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_mime_emitter.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_mime_emitter.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -12,17 +12,16 @@</span>
<a href="#l18.4"></a><span id="l18.4">  * - sun attachment</span>
<a href="#l18.5"></a><span id="l18.5">  */</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7"> /*</span>
<a href="#l18.8"></a><span id="l18.8">  * Do not include glodaTestHelper because we do not want gloda loaded and it</span>
<a href="#l18.9"></a><span id="l18.9">  *  adds a lot of runtime overhead which makes certain debugging strategies like</span>
<a href="#l18.10"></a><span id="l18.10">  *  using chronicle-recorder impractical.</span>
<a href="#l18.11"></a><span id="l18.11">  */</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l18.13"></a><span id="l18.13"> load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l18.14"></a><span id="l18.14"> load(&quot;../../../../resources/logHelper.js&quot;);</span>
<a href="#l18.15"></a><span id="l18.15"> load(&quot;../../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l18.16"></a><span id="l18.16"> </span>
<a href="#l18.17"></a><span id="l18.17"> load(&quot;../../../../resources/messageGenerator.js&quot;);</span>
<a href="#l18.18"></a><span id="l18.18"> load(&quot;../../../../resources/messageModifier.js&quot;);</span>
<a href="#l18.19"></a><span id="l18.19"> load(&quot;../../../../resources/messageInjection.js&quot;);</span>
<a href="#l18.20"></a><span id="l18.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/db/gloda/test/unit/test_nuke_migration.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/db/gloda/test/unit/test_nuke_migration.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -9,19 +9,16 @@</span>
<a href="#l19.4"></a><span id="l19.4">  * with a database connection and it has the right schema version, we declare</span>
<a href="#l19.5"></a><span id="l19.5">  * that gloda has successfully loaded.  Our only historical screw-up here was</span>
<a href="#l19.6"></a><span id="l19.6">  * very blatant (and was actually a result of trying to avoid complexity in</span>
<a href="#l19.7"></a><span id="l19.7">  * the nuke path! oh the irony!) so we don't need to get all hardcore.</span>
<a href="#l19.8"></a><span id="l19.8">  **/</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-// we need the directory service</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineminus">-</span>
<a href="#l19.15"></a><span id="l19.15"> /**</span>
<a href="#l19.16"></a><span id="l19.16">  * The DB version to use.  We set this as a non-const variable so that</span>
<a href="#l19.17"></a><span id="l19.17">  * test_nuke_migration_from_future.js can change it.</span>
<a href="#l19.18"></a><span id="l19.18">  */</span>
<a href="#l19.19"></a><span id="l19.19"> var BAD_DB_VERSION_TO_USE = 2;</span>
<a href="#l19.20"></a><span id="l19.20"> </span>
<a href="#l19.21"></a><span id="l19.21"> /**</span>
<a href="#l19.22"></a><span id="l19.22">  * Synchronously create and close the out-of-date database.  Because we are</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/db/msgdb/test/unit/head_maildb.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/db/msgdb/test/unit/head_maildb.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,3 +1,14 @@</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineplus">+</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+</span>
<a href="#l20.16"></a><span id="l20.16"> // Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l20.18"></a><span id="l20.18"> load(&quot;../../../../resources/mailTestUtils.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/test/unit/head_bayes.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1,10 +1,21 @@</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineplus">+</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+</span>
<a href="#l21.16"></a><span id="l21.16"> // Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l21.18"></a><span id="l21.18"> load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l21.21"></a><span id="l21.21"> </span>
<a href="#l21.22"></a><span id="l21.22"> function getSpec(aFileName)</span>
<a href="#l21.23"></a><span id="l21.23"> {</span>
<a href="#l21.24"></a><span id="l21.24">   var file = do_get_file(&quot;resources/&quot; + aFileName);</span>
<a href="#l21.25"></a><span id="l21.25">   var uri = Services.io.newFileURI(file).QueryInterface(Ci.nsIURL);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/test_askuser.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/test_askuser.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1,13 +1,8 @@</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineminus">-load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineminus">-</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineminus">-Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineminus">-</span>
<a href="#l22.9"></a><span id="l22.9"> var gMessenger = Cc[&quot;@mozilla.org/messenger;1&quot;].</span>
<a href="#l22.10"></a><span id="l22.10">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12"> loadLocalMailAccount();</span>
<a href="#l22.13"></a><span id="l22.13"> </span>
<a href="#l22.14"></a><span id="l22.14"> let localAccount = MailServices.accounts.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l22.15"></a><span id="l22.15"> let identity = MailServices.accounts.createIdentity();</span>
<a href="#l22.16"></a><span id="l22.16"> identity.email = &quot;bob@t2.example.net&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/extensions/mdn/test/unit/test_mdnFlags.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/extensions/mdn/test/unit/test_mdnFlags.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,18 +1,13 @@</span>
<a href="#l23.4"></a><span id="l23.4"> /**</span>
<a href="#l23.5"></a><span id="l23.5">  * This tests that setting mdn flags works correctly, so that we don't</span>
<a href="#l23.6"></a><span id="l23.6">  * reprompt when the user re-selects a message.</span>
<a href="#l23.7"></a><span id="l23.7">  */</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9" class="difflineminus">-load(&quot;../../../../resources/mailDirService.js&quot;);</span>
<a href="#l23.10"></a><span id="l23.10" class="difflineminus">-load(&quot;../../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineminus">-</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-</span>
<a href="#l23.14"></a><span id="l23.14"> var gMessenger = Cc[&quot;@mozilla.org/messenger;1&quot;].</span>
<a href="#l23.15"></a><span id="l23.15">                    createInstance(Ci.nsIMessenger);</span>
<a href="#l23.16"></a><span id="l23.16"> </span>
<a href="#l23.17"></a><span id="l23.17"> loadLocalMailAccount();</span>
<a href="#l23.18"></a><span id="l23.18"> </span>
<a href="#l23.19"></a><span id="l23.19"> let localAccount = MailServices.accounts.FindAccountForServer(gLocalIncomingServer);</span>
<a href="#l23.20"></a><span id="l23.20"> let identity = MailServices.accounts.createIdentity();</span>
<a href="#l23.21"></a><span id="l23.21"> identity.email = &quot;bob@t2.example.net&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/imap/test/unit/head_server.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/imap/test/unit/head_server.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -1,20 +1,31 @@</span>
<a href="#l24.4"></a><span id="l24.4"> // We can be executed from multiple depths</span>
<a href="#l24.5"></a><span id="l24.5"> // Provide gDEPTH if not already defined</span>
<a href="#l24.6"></a><span id="l24.6"> if (typeof gDEPTH == &quot;undefined&quot;)</span>
<a href="#l24.7"></a><span id="l24.7">   var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l24.8"></a><span id="l24.8"> </span>
<a href="#l24.9"></a><span id="l24.9" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l24.10"></a><span id="l24.10" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l24.11"></a><span id="l24.11" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineplus">+</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineplus">+</span>
<a href="#l24.21"></a><span id="l24.21"> // Import fakeserver</span>
<a href="#l24.22"></a><span id="l24.22"> load(gDEPTH + &quot;mailnews/fakeserver/maild.js&quot;);</span>
<a href="#l24.23"></a><span id="l24.23"> load(gDEPTH + &quot;mailnews/fakeserver/auth.js&quot;);</span>
<a href="#l24.24"></a><span id="l24.24"> load(gDEPTH + &quot;mailnews/fakeserver/imapd.js&quot;);</span>
<a href="#l24.25"></a><span id="l24.25"> </span>
<a href="#l24.26"></a><span id="l24.26"> // And mailnews scripts</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineminus">-load(gDEPTH + &quot;mailnews/resources/mailDirService.js&quot;);</span>
<a href="#l24.28"></a><span id="l24.28"> load(gDEPTH + &quot;mailnews/resources/mailTestUtils.js&quot;);</span>
<a href="#l24.29"></a><span id="l24.29"> </span>
<a href="#l24.30"></a><span id="l24.30"> const IMAP_PORT = 1024 + 143;</span>
<a href="#l24.31"></a><span id="l24.31"> </span>
<a href="#l24.32"></a><span id="l24.32"> function makeServer(daemon, infoString, otherProps) {</span>
<a href="#l24.33"></a><span id="l24.33">   if (infoString in configurations)</span>
<a href="#l24.34"></a><span id="l24.34">     return makeServer(daemon, configurations[infoString].join(&quot;,&quot;), otherProps);</span>
<a href="#l24.35"></a><span id="l24.35"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/import/test/unit/head_import.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/import/test/unit/head_import.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1,8 +1,17 @@</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineminus">-// Set up the profile directory for verifying the success of imports</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineplus">+</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l25.17"></a><span id="l25.17"> </span>
<a href="#l25.18"></a><span id="l25.18"> // Import the required setup scripts.</span>
<a href="#l25.19"></a><span id="l25.19"> load(&quot;../../../resources/abSetup.js&quot;);</span>
<a href="#l25.20"></a><span id="l25.20"> </span>
<a href="#l25.21"></a><span id="l25.21"> // Import the script with basic import functions</span>
<a href="#l25.22"></a><span id="l25.22"> load(&quot;resources/import_helper.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/local/test/unit/head_maillocal.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1,12 +1,23 @@</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l26.6"></a><span id="l26.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l26.7"></a><span id="l26.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l26.8"></a><span id="l26.8" class="difflineplus">+</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+</span>
<a href="#l26.16"></a><span id="l26.16"> var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18"> // Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l26.20"></a><span id="l26.20"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l26.21"></a><span id="l26.21"> </span>
<a href="#l26.22"></a><span id="l26.22"> // Import the pop3 server scripts</span>
<a href="#l26.23"></a><span id="l26.23"> load(&quot;../../../fakeserver/maild.js&quot;);</span>
<a href="#l26.24"></a><span id="l26.24"> load(&quot;../../../fakeserver/auth.js&quot;);</span>
<a href="#l26.25"></a><span id="l26.25"> load(&quot;../../../fakeserver/pop3d.js&quot;);</span>
<a href="#l26.26"></a><span id="l26.26"> </span>
<a href="#l26.27"></a><span id="l26.27"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/mime/test/unit/head_mime.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/mime/test/unit/head_mime.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -1,4 +1,13 @@</span>
<a href="#l27.4"></a><span id="l27.4" class="difflineminus">-var gDEPTH = &quot;../../../../&quot;;</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l27.6"></a><span id="l27.6" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l27.7"></a><span id="l27.7" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l27.8"></a><span id="l27.8" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10" class="difflineminus">-// Import the main scripts that mailnews tests need to set up and tear down</span>
<a href="#l27.11"></a><span id="l27.11" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineplus">+</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineplus">+var gDEPTH = &quot;../../../../&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_attachment_size.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_attachment_size.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l28.4"></a><span id="l28.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l28.5"></a><span id="l28.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l28.6"></a><span id="l28.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l28.7"></a><span id="l28.7"> </span>
<a href="#l28.8"></a><span id="l28.8"> /**</span>
<a href="#l28.9"></a><span id="l28.9">  * This test creates some messages with attachments of different types and</span>
<a href="#l28.10"></a><span id="l28.10">  * checks that libmime reports the expected size for each of them.</span>
<a href="#l28.11"></a><span id="l28.11">  */</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l28.13"></a><span id="l28.13"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l28.14"></a><span id="l28.14"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l28.15"></a><span id="l28.15"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l28.18"></a><span id="l28.18"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l28.19"></a><span id="l28.19"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l28.20"></a><span id="l28.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_badContentType.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_badContentType.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -2,18 +2,16 @@</span>
<a href="#l29.4"></a><span id="l29.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l29.5"></a><span id="l29.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l29.6"></a><span id="l29.6"> </span>
<a href="#l29.7"></a><span id="l29.7"> /**</span>
<a href="#l29.8"></a><span id="l29.8">  * This test checks handling of bad content type of the</span>
<a href="#l29.9"></a><span id="l29.9">  * type reported in bug 659355.</span>
<a href="#l29.10"></a><span id="l29.10">  * Adapted from test_attachment_size.js</span>
<a href="#l29.11"></a><span id="l29.11">  */</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l29.14"></a><span id="l29.14"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l29.15"></a><span id="l29.15"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l29.16"></a><span id="l29.16"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l29.17"></a><span id="l29.17"> </span>
<a href="#l29.18"></a><span id="l29.18"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l29.19"></a><span id="l29.19"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l29.20"></a><span id="l29.20"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l29.21"></a><span id="l29.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_hidden_attachments.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_hidden_attachments.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l30.4"></a><span id="l30.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l30.5"></a><span id="l30.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l30.6"></a><span id="l30.6">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8"> /**</span>
<a href="#l30.9"></a><span id="l30.9">  * This test creates some messages with attachments of different types and</span>
<a href="#l30.10"></a><span id="l30.10">  * checks that libmime emits (or doesn't emit) the attachments as appropriate.</span>
<a href="#l30.11"></a><span id="l30.11">  */</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l30.13"></a><span id="l30.13"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l30.14"></a><span id="l30.14"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l30.15"></a><span id="l30.15"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l30.16"></a><span id="l30.16"> </span>
<a href="#l30.17"></a><span id="l30.17"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l30.18"></a><span id="l30.18"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l30.19"></a><span id="l30.19"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l30.20"></a><span id="l30.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_message_attachment.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_message_attachment.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l31.4"></a><span id="l31.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l31.5"></a><span id="l31.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l31.6"></a><span id="l31.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l31.7"></a><span id="l31.7"> </span>
<a href="#l31.8"></a><span id="l31.8"> /**</span>
<a href="#l31.9"></a><span id="l31.9">  * This test verifies that we don't display text attachments inline</span>
<a href="#l31.10"></a><span id="l31.10">  * when mail.inline_attachments is false.</span>
<a href="#l31.11"></a><span id="l31.11">  */</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l31.13"></a><span id="l31.13"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l31.14"></a><span id="l31.14"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l31.15"></a><span id="l31.15"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l31.16"></a><span id="l31.16"> </span>
<a href="#l31.17"></a><span id="l31.17"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l31.18"></a><span id="l31.18"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l31.19"></a><span id="l31.19"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l31.20"></a><span id="l31.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_rfc822_body.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_rfc822_body.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l32.4"></a><span id="l32.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l32.5"></a><span id="l32.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l32.6"></a><span id="l32.6">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> /**</span>
<a href="#l32.9"></a><span id="l32.9">  * This test verifies that we emit a message/rfc822 body part as an attachment</span>
<a href="#l32.10"></a><span id="l32.10">  * whether or not mail.inline_attachments is true.</span>
<a href="#l32.11"></a><span id="l32.11">  */</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l32.13"></a><span id="l32.13"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l32.14"></a><span id="l32.14"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l32.15"></a><span id="l32.15"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l32.16"></a><span id="l32.16"> </span>
<a href="#l32.17"></a><span id="l32.17"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l32.18"></a><span id="l32.18"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l32.19"></a><span id="l32.19"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l32.20"></a><span id="l32.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/mime/test/unit/test_text_attachment.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/mime/test/unit/test_text_attachment.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -1,17 +1,16 @@</span>
<a href="#l33.4"></a><span id="l33.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l33.5"></a><span id="l33.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l33.6"></a><span id="l33.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8"> /**</span>
<a href="#l33.9"></a><span id="l33.9">  * This test verifies that we don't display text attachments inline</span>
<a href="#l33.10"></a><span id="l33.10">  * when mail.inline_attachments is false.</span>
<a href="#l33.11"></a><span id="l33.11">  */</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l33.13"></a><span id="l33.13"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l33.14"></a><span id="l33.14"> load(&quot;../../../resources/logHelper.js&quot;);</span>
<a href="#l33.15"></a><span id="l33.15"> load(&quot;../../../resources/asyncTestUtils.js&quot;);</span>
<a href="#l33.16"></a><span id="l33.16"> </span>
<a href="#l33.17"></a><span id="l33.17"> load(&quot;../../../resources/messageGenerator.js&quot;);</span>
<a href="#l33.18"></a><span id="l33.18"> load(&quot;../../../resources/messageModifier.js&quot;);</span>
<a href="#l33.19"></a><span id="l33.19"> load(&quot;../../../resources/messageInjection.js&quot;);</span>
<a href="#l33.20"></a><span id="l33.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/news/test/unit/head_server_setup.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -1,14 +1,25 @@</span>
<a href="#l34.4"></a><span id="l34.4" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l34.5"></a><span id="l34.5" class="difflineplus">+Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l34.6"></a><span id="l34.6" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l34.7"></a><span id="l34.7" class="difflineplus">+Components.utils.import(&quot;resource://testing-common/mailnews/mailDirService.js&quot;);</span>
<a href="#l34.8"></a><span id="l34.8" class="difflineplus">+</span>
<a href="#l34.9"></a><span id="l34.9" class="difflineplus">+var Cc = Components.classes;</span>
<a href="#l34.10"></a><span id="l34.10" class="difflineplus">+var Ci = Components.interfaces;</span>
<a href="#l34.11"></a><span id="l34.11" class="difflineplus">+var Cr = Components.results;</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineplus">+var CC = Components.Constructor;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+</span>
<a href="#l34.14"></a><span id="l34.14" class="difflineplus">+var gProfileDir = ProfileDir.initialize(do_get_profile());</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineplus">+</span>
<a href="#l34.16"></a><span id="l34.16"> // Import the servers</span>
<a href="#l34.17"></a><span id="l34.17"> load(&quot;../../../fakeserver/maild.js&quot;);</span>
<a href="#l34.18"></a><span id="l34.18"> load(&quot;../../../fakeserver/nntpd.js&quot;);</span>
<a href="#l34.19"></a><span id="l34.19"> </span>
<a href="#l34.20"></a><span id="l34.20"> // Generic mailnews resource scripts</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineminus">-load(&quot;../../../resources/mailDirService.js&quot;);</span>
<a href="#l34.22"></a><span id="l34.22"> load(&quot;../../../resources/mailTestUtils.js&quot;);</span>
<a href="#l34.23"></a><span id="l34.23"> </span>
<a href="#l34.24"></a><span id="l34.24"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l34.25"></a><span id="l34.25"> </span>
<a href="#l34.26"></a><span id="l34.26"> const kSimpleNewsArticle =</span>
<a href="#l34.27"></a><span id="l34.27">   &quot;From: John Doe &lt;john.doe@example.com&gt;\n&quot;+</span>
<a href="#l34.28"></a><span id="l34.28">   &quot;Date: Sat, 24 Mar 1990 10:59:24 -0500\n&quot;+</span>
<a href="#l34.29"></a><span id="l34.29">   &quot;Newsgroups: test.subscribe.simple\n&quot;+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/test/resources/mailDirService.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/test/resources/mailDirService.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -2,130 +2,122 @@</span>
<a href="#l35.4"></a><span id="l35.4"> /*</span>
<a href="#l35.5"></a><span id="l35.5">  * Sets up the directory service provider to create the &quot;mailtest&quot; sub</span>
<a href="#l35.6"></a><span id="l35.6">  * directory under the process directory and use that as the profile</span>
<a href="#l35.7"></a><span id="l35.7">  * directory for the mailnews tests to locate files during unit tests.</span>
<a href="#l35.8"></a><span id="l35.8">  *</span>
<a href="#l35.9"></a><span id="l35.9">  * For xpcshell tests, the &quot;profile&quot; directory will be &lt;profile_dir&gt;/mailtest/</span>
<a href="#l35.10"></a><span id="l35.10">  */</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-// Make sure we execute this file exactly once</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineminus">-var gMailDirService_js__;</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineminus">-if (!gMailDirService_js__) {</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineminus">-gMailDirService_js__ = true;</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineplus">+const EXPORTED_SYMBOLS = [&quot;ProfileDir&quot;];</span>
<a href="#l35.17"></a><span id="l35.17"> </span>
<a href="#l35.18"></a><span id="l35.18"> // Services</span>
<a href="#l35.19"></a><span id="l35.19"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l35.20"></a><span id="l35.20"> // MailServices</span>
<a href="#l35.21"></a><span id="l35.21"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l35.22"></a><span id="l35.22"> </span>
<a href="#l35.23"></a><span id="l35.23"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l35.24"></a><span id="l35.24"> </span>
<a href="#l35.25"></a><span id="l35.25"> // Declare these globally for unit tests and be done with it.</span>
<a href="#l35.26"></a><span id="l35.26"> var Cc = Components.classes;</span>
<a href="#l35.27"></a><span id="l35.27"> var Ci = Components.interfaces;</span>
<a href="#l35.28"></a><span id="l35.28"> var Cr = Components.results;</span>
<a href="#l35.29"></a><span id="l35.29"> var CC = Components.Constructor;</span>
<a href="#l35.30"></a><span id="l35.30"> </span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-var gProfileDirProvider = null;</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineminus">-</span>
<a href="#l35.33"></a><span id="l35.33" class="difflineminus">-// keep things out of global scope where possible.</span>
<a href="#l35.34"></a><span id="l35.34" class="difflineminus">-function initializeDirServer() {</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">-  const NS_APP_USER_PROFILE_50_DIR = &quot;ProfD&quot;;</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineplus">+let ProfileDir = {</span>
<a href="#l35.37"></a><span id="l35.37" class="difflineplus">+  // keep things out of global scope where possible.</span>
<a href="#l35.38"></a><span id="l35.38" class="difflineplus">+  initialize: function initializeDirServer(aProfileDir) {</span>
<a href="#l35.39"></a><span id="l35.39" class="difflineplus">+    const NS_APP_USER_PROFILE_50_DIR = &quot;ProfD&quot;;</span>
<a href="#l35.40"></a><span id="l35.40"> </span>
<a href="#l35.41"></a><span id="l35.41" class="difflineminus">-  // Various functions common to the tests.</span>
<a href="#l35.42"></a><span id="l35.42" class="difflineminus">-  const MailTestDirServer = {</span>
<a href="#l35.43"></a><span id="l35.43" class="difflineminus">-    /*</span>
<a href="#l35.44"></a><span id="l35.44" class="difflineminus">-     * makeDirectoryService</span>
<a href="#l35.45"></a><span id="l35.45" class="difflineminus">-     *</span>
<a href="#l35.46"></a><span id="l35.46" class="difflineminus">-     */</span>
<a href="#l35.47"></a><span id="l35.47" class="difflineminus">-    makeDirectoryService : function () {</span>
<a href="#l35.48"></a><span id="l35.48" class="difflineminus">-      // Register our own provider for the profile directory.</span>
<a href="#l35.49"></a><span id="l35.49" class="difflineminus">-      // It will simply return the current directory.</span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-      const provider = {</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineminus">-        getFile : function(prop, persistent) {</span>
<a href="#l35.52"></a><span id="l35.52" class="difflineminus">-          persistent.value = true;</span>
<a href="#l35.53"></a><span id="l35.53" class="difflineminus">-          if (prop == NS_APP_USER_PROFILE_50_DIR) {</span>
<a href="#l35.54"></a><span id="l35.54" class="difflineminus">-            var profileDir = do_get_profile();</span>
<a href="#l35.55"></a><span id="l35.55" class="difflineplus">+    // Various functions common to the tests.</span>
<a href="#l35.56"></a><span id="l35.56" class="difflineplus">+    const MailTestDirServer = {</span>
<a href="#l35.57"></a><span id="l35.57" class="difflineplus">+      /*</span>
<a href="#l35.58"></a><span id="l35.58" class="difflineplus">+       * makeDirectoryService</span>
<a href="#l35.59"></a><span id="l35.59" class="difflineplus">+       */</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineplus">+      makeDirectoryService : function () {</span>
<a href="#l35.61"></a><span id="l35.61" class="difflineplus">+        // Register our own provider for the profile directory.</span>
<a href="#l35.62"></a><span id="l35.62" class="difflineplus">+        // It will simply return the current directory.</span>
<a href="#l35.63"></a><span id="l35.63" class="difflineplus">+        const provider = {</span>
<a href="#l35.64"></a><span id="l35.64" class="difflineplus">+           getFile : function(prop, persistent) {</span>
<a href="#l35.65"></a><span id="l35.65" class="difflineplus">+           persistent.value = true;</span>
<a href="#l35.66"></a><span id="l35.66" class="difflineplus">+           if (prop == NS_APP_USER_PROFILE_50_DIR) {</span>
<a href="#l35.67"></a><span id="l35.67" class="difflineplus">+              // Then this is the directory we want</span>
<a href="#l35.68"></a><span id="l35.68" class="difflineplus">+              aProfileDir.append(&quot;mailtest&quot;);</span>
<a href="#l35.69"></a><span id="l35.69"> </span>
<a href="#l35.70"></a><span id="l35.70" class="difflineminus">-            // Then this is the directory we want</span>
<a href="#l35.71"></a><span id="l35.71" class="difflineminus">-            profileDir.append(&quot;mailtest&quot;);</span>
<a href="#l35.72"></a><span id="l35.72" class="difflineplus">+              return aProfileDir;</span>
<a href="#l35.73"></a><span id="l35.73" class="difflineplus">+            }</span>
<a href="#l35.74"></a><span id="l35.74" class="difflineplus">+            if (prop == &quot;resource:app&quot;) {</span>
<a href="#l35.75"></a><span id="l35.75" class="difflineplus">+              // app should return the same as gre...</span>
<a href="#l35.76"></a><span id="l35.76" class="difflineplus">+              return Services.dirsvc.get(&quot;GreD&quot;, Ci.nsIFile);</span>
<a href="#l35.77"></a><span id="l35.77" class="difflineplus">+            }</span>
<a href="#l35.78"></a><span id="l35.78" class="difflineplus">+            if (prop == &quot;TmpD&quot;) {</span>
<a href="#l35.79"></a><span id="l35.79" class="difflineplus">+              throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l35.80"></a><span id="l35.80" class="difflineplus">+            }</span>
<a href="#l35.81"></a><span id="l35.81"> </span>
<a href="#l35.82"></a><span id="l35.82" class="difflineminus">-            return profileDir;</span>
<a href="#l35.83"></a><span id="l35.83" class="difflineminus">-          }</span>
<a href="#l35.84"></a><span id="l35.84" class="difflineminus">-          if (prop == &quot;resource:app&quot;) {</span>
<a href="#l35.85"></a><span id="l35.85" class="difflineminus">-            // app should return the same as gre...</span>
<a href="#l35.86"></a><span id="l35.86" class="difflineminus">-            return Services.dirsvc.get(&quot;GreD&quot;, Ci.nsIFile);</span>
<a href="#l35.87"></a><span id="l35.87" class="difflineminus">-          }</span>
<a href="#l35.88"></a><span id="l35.88" class="difflineminus">-          if (prop == &quot;TmpD&quot;) {</span>
<a href="#l35.89"></a><span id="l35.89" class="difflineplus">+            dump(&quot;Directory request for: &quot; + prop + &quot; that we (mailDirService.js)&quot; +</span>
<a href="#l35.90"></a><span id="l35.90" class="difflineplus">+                 &quot; are not handling, leaving it to another handler.\n&quot;);</span>
<a href="#l35.91"></a><span id="l35.91">             throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l35.92"></a><span id="l35.92" class="difflineminus">-          }</span>
<a href="#l35.93"></a><span id="l35.93" class="difflineplus">+          },</span>
<a href="#l35.94"></a><span id="l35.94"> </span>
<a href="#l35.95"></a><span id="l35.95" class="difflineminus">-          dump(&quot;Directory request for: &quot; + prop + &quot; that we (mailDirService.js)&quot; +</span>
<a href="#l35.96"></a><span id="l35.96" class="difflineminus">-               &quot; are not handling, leaving it to another handler.\n&quot;);</span>
<a href="#l35.97"></a><span id="l35.97" class="difflineminus">-          throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l35.98"></a><span id="l35.98" class="difflineminus">-        },</span>
<a href="#l35.99"></a><span id="l35.99" class="difflineplus">+          QueryInterface:</span>
<a href="#l35.100"></a><span id="l35.100" class="difflineplus">+            XPCOMUtils.generateQI([Ci.nsIDirectoryServiceProvider])</span>
<a href="#l35.101"></a><span id="l35.101" class="difflineplus">+        };</span>
<a href="#l35.102"></a><span id="l35.102" class="difflineplus">+        gProfileDirProvider = provider;</span>
<a href="#l35.103"></a><span id="l35.103" class="difflineplus">+        Services.dirsvc.QueryInterface(Ci.nsIDirectoryService)</span>
<a href="#l35.104"></a><span id="l35.104" class="difflineplus">+                       .registerProvider(gProfileDirProvider);</span>
<a href="#l35.105"></a><span id="l35.105" class="difflineplus">+      }</span>
<a href="#l35.106"></a><span id="l35.106" class="difflineplus">+    };</span>
<a href="#l35.107"></a><span id="l35.107"> </span>
<a href="#l35.108"></a><span id="l35.108" class="difflineminus">-        QueryInterface:</span>
<a href="#l35.109"></a><span id="l35.109" class="difflineminus">-          XPCOMUtils.generateQI([Ci.nsIDirectoryServiceProvider])</span>
<a href="#l35.110"></a><span id="l35.110" class="difflineminus">-      };</span>
<a href="#l35.111"></a><span id="l35.111" class="difflineminus">-      gProfileDirProvider = provider;</span>
<a href="#l35.112"></a><span id="l35.112" class="difflineminus">-      Services.dirsvc.QueryInterface(Ci.nsIDirectoryService)</span>
<a href="#l35.113"></a><span id="l35.113" class="difflineminus">-                     .registerProvider(gProfileDirProvider);</span>
<a href="#l35.114"></a><span id="l35.114" class="difflineplus">+    // If there's no location registered for the profile directory, register one</span>
<a href="#l35.115"></a><span id="l35.115" class="difflineplus">+    var dir;</span>
<a href="#l35.116"></a><span id="l35.116" class="difflineplus">+    try {</span>
<a href="#l35.117"></a><span id="l35.117" class="difflineplus">+      dir = Services.dirsvc.get(NS_APP_USER_PROFILE_50_DIR, Ci.nsIFile);</span>
<a href="#l35.118"></a><span id="l35.118" class="difflineplus">+    } catch (e) { }</span>
<a href="#l35.119"></a><span id="l35.119" class="difflineplus">+</span>
<a href="#l35.120"></a><span id="l35.120" class="difflineplus">+    if (!dir) {</span>
<a href="#l35.121"></a><span id="l35.121" class="difflineplus">+      MailTestDirServer.makeDirectoryService();</span>
<a href="#l35.122"></a><span id="l35.122" class="difflineplus">+      dir = Services.dirsvc.get(NS_APP_USER_PROFILE_50_DIR, Ci.nsIFile);</span>
<a href="#l35.123"></a><span id="l35.123">     }</span>
<a href="#l35.124"></a><span id="l35.124" class="difflineminus">-  };</span>
<a href="#l35.125"></a><span id="l35.125"> </span>
<a href="#l35.126"></a><span id="l35.126" class="difflineminus">-  // If there's no location registered for the profile directory, register one</span>
<a href="#l35.127"></a><span id="l35.127" class="difflineminus">-  var profileDir;</span>
<a href="#l35.128"></a><span id="l35.128" class="difflineminus">-  try {</span>
<a href="#l35.129"></a><span id="l35.129" class="difflineminus">-    profileDir = Services.dirsvc.get(NS_APP_USER_PROFILE_50_DIR, Ci.nsIFile);</span>
<a href="#l35.130"></a><span id="l35.130" class="difflineminus">-  } catch (e) { }</span>
<a href="#l35.131"></a><span id="l35.131" class="difflineplus">+    // Ensure we start with a clean profile directory for all tests</span>
<a href="#l35.132"></a><span id="l35.132" class="difflineplus">+    try {</span>
<a href="#l35.133"></a><span id="l35.133" class="difflineplus">+      if (dir.exists()) {</span>
<a href="#l35.134"></a><span id="l35.134" class="difflineplus">+        this._recursiveRemove(dir);</span>
<a href="#l35.135"></a><span id="l35.135" class="difflineplus">+        dir.remove(false);</span>
<a href="#l35.136"></a><span id="l35.136" class="difflineplus">+      }</span>
<a href="#l35.137"></a><span id="l35.137" class="difflineplus">+    }</span>
<a href="#l35.138"></a><span id="l35.138" class="difflineplus">+    catch (e) {</span>
<a href="#l35.139"></a><span id="l35.139" class="difflineplus">+      dump(&quot;Couldn't recursive remove directory: &quot; + e);</span>
<a href="#l35.140"></a><span id="l35.140" class="difflineplus">+      dump(&quot;Trying automatically\n&quot;);</span>
<a href="#l35.141"></a><span id="l35.141"> </span>
<a href="#l35.142"></a><span id="l35.142" class="difflineminus">-  if (!profileDir) {</span>
<a href="#l35.143"></a><span id="l35.143" class="difflineminus">-    MailTestDirServer.makeDirectoryService();</span>
<a href="#l35.144"></a><span id="l35.144" class="difflineminus">-    profileDir = Services.dirsvc.get(NS_APP_USER_PROFILE_50_DIR, Ci.nsIFile);</span>
<a href="#l35.145"></a><span id="l35.145" class="difflineminus">-  }</span>
<a href="#l35.146"></a><span id="l35.146" class="difflineminus">-  return profileDir;</span>
<a href="#l35.147"></a><span id="l35.147" class="difflineminus">-}</span>
<a href="#l35.148"></a><span id="l35.148" class="difflineplus">+      if (dir.exists())</span>
<a href="#l35.149"></a><span id="l35.149" class="difflineplus">+        dir.remove(true);</span>
<a href="#l35.150"></a><span id="l35.150" class="difflineplus">+</span>
<a href="#l35.151"></a><span id="l35.151" class="difflineplus">+      // This throw is so that we know if this bug happens</span>
<a href="#l35.152"></a><span id="l35.152" class="difflineplus">+      throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l35.153"></a><span id="l35.153" class="difflineplus">+    }</span>
<a href="#l35.154"></a><span id="l35.154"> </span>
<a href="#l35.155"></a><span id="l35.155" class="difflineminus">-// Left as a global to make things like copying files easy.</span>
<a href="#l35.156"></a><span id="l35.156" class="difflineminus">-var gProfileDir = initializeDirServer();</span>
<a href="#l35.157"></a><span id="l35.157" class="difflineplus">+    // Always ensure the profile directory exists before we start the tests</span>
<a href="#l35.158"></a><span id="l35.158" class="difflineplus">+    dir.create(Ci.nsIFile.DIRECTORY_TYPE, parseInt(&quot;0700&quot;, 8));</span>
<a href="#l35.159"></a><span id="l35.159"> </span>
<a href="#l35.160"></a><span id="l35.160" class="difflineminus">-// Ensure we start with a clean profile directory for all tests</span>
<a href="#l35.161"></a><span id="l35.161" class="difflineminus">-try {</span>
<a href="#l35.162"></a><span id="l35.162" class="difflineplus">+    return dir;</span>
<a href="#l35.163"></a><span id="l35.163" class="difflineplus">+  },</span>
<a href="#l35.164"></a><span id="l35.164" class="difflineplus">+</span>
<a href="#l35.165"></a><span id="l35.165">   // XXX We have Bug 473385 - nsIFile.remove(true) intermittently fails on Mac</span>
<a href="#l35.166"></a><span id="l35.166">   // So we have to do it manually to keep the tinderboxes stable.</span>
<a href="#l35.167"></a><span id="l35.167" class="difflineminus">-  function recursiveRemove(aDirectory) {</span>
<a href="#l35.168"></a><span id="l35.168" class="difflineplus">+  _recursiveRemove: function(aDirectory) {</span>
<a href="#l35.169"></a><span id="l35.169">     let entries = aDirectory.directoryEntries;</span>
<a href="#l35.170"></a><span id="l35.170"> </span>
<a href="#l35.171"></a><span id="l35.171">     while (entries.hasMoreElements()) {</span>
<a href="#l35.172"></a><span id="l35.172">       let entry = entries.getNext();</span>
<a href="#l35.173"></a><span id="l35.173"> </span>
<a href="#l35.174"></a><span id="l35.174">       if (entry instanceof Ci.nsIFile) {</span>
<a href="#l35.175"></a><span id="l35.175">         if (entry.isDirectory() &amp;&amp;</span>
<a href="#l35.176"></a><span id="l35.176">             !entry.equals(aDirectory)) {</span>
<a href="#l35.177"></a><span id="l35.177" class="difflineminus">-          recursiveRemove(entry);</span>
<a href="#l35.178"></a><span id="l35.178" class="difflineplus">+          this._recursiveRemove(entry);</span>
<a href="#l35.179"></a><span id="l35.179">         }</span>
<a href="#l35.180"></a><span id="l35.180"> </span>
<a href="#l35.181"></a><span id="l35.181">         entry.remove(false);</span>
<a href="#l35.182"></a><span id="l35.182">       }</span>
<a href="#l35.183"></a><span id="l35.183">     }</span>
<a href="#l35.184"></a><span id="l35.184">   }</span>
<a href="#l35.185"></a><span id="l35.185" class="difflineminus">-</span>
<a href="#l35.186"></a><span id="l35.186" class="difflineminus">-  if (gProfileDir.exists()) {</span>
<a href="#l35.187"></a><span id="l35.187" class="difflineminus">-    recursiveRemove(gProfileDir);</span>
<a href="#l35.188"></a><span id="l35.188" class="difflineminus">-    gProfileDir.remove(false);</span>
<a href="#l35.189"></a><span id="l35.189" class="difflineminus">-  }</span>
<a href="#l35.190"></a><span id="l35.190" class="difflineminus">-}</span>
<a href="#l35.191"></a><span id="l35.191" class="difflineminus">-catch (e) {</span>
<a href="#l35.192"></a><span id="l35.192" class="difflineminus">-  print(&quot;Couldn't recursive remove directory: &quot; + e);</span>
<a href="#l35.193"></a><span id="l35.193" class="difflineminus">-  print(&quot;Trying automatically\n&quot;);</span>
<a href="#l35.194"></a><span id="l35.194" class="difflineplus">+};</span>
<a href="#l35.195"></a><span id="l35.195"> </span>
<a href="#l35.196"></a><span id="l35.196" class="difflineminus">-  if (gProfileDir.exists())</span>
<a href="#l35.197"></a><span id="l35.197" class="difflineminus">-    gProfileDir.remove(true);</span>
<a href="#l35.198"></a><span id="l35.198" class="difflineminus">-</span>
<a href="#l35.199"></a><span id="l35.199" class="difflineminus">-  // This throw is so that we know if this bug happens</span>
<a href="#l35.200"></a><span id="l35.200" class="difflineminus">-  throw Cr.NS_ERROR_FAILURE;</span>
<a href="#l35.201"></a><span id="l35.201" class="difflineminus">-}</span>
<a href="#l35.202"></a><span id="l35.202" class="difflineminus">-// Always ensure the profile directory exists before we start the tests</span>
<a href="#l35.203"></a><span id="l35.203" class="difflineminus">-gProfileDir.create(Ci.nsIFile.DIRECTORY_TYPE, parseInt(&quot;0700&quot;, 8));</span>
<a href="#l35.204"></a><span id="l35.204" class="difflineminus">-</span>
<a href="#l35.205"></a><span id="l35.205" class="difflineminus">-} // gMailDirService_js__</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/test/resources/mailShutdown.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/test/resources/mailShutdown.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -19,25 +19,19 @@ function postShutdownNotifications()</span>
<a href="#l36.4"></a><span id="l36.4">   }</span>
<a href="#l36.5"></a><span id="l36.5"> </span>
<a href="#l36.6"></a><span id="l36.6">   // post all notifications in the right order. none of these are cancellable</span>
<a href="#l36.7"></a><span id="l36.7">   var notifications = [&quot;quit-application&quot;,</span>
<a href="#l36.8"></a><span id="l36.8">                        &quot;profile-change-net-teardown&quot;,</span>
<a href="#l36.9"></a><span id="l36.9">                        &quot;profile-change-teardown&quot;,</span>
<a href="#l36.10"></a><span id="l36.10">                        &quot;profile-before-change&quot;];</span>
<a href="#l36.11"></a><span id="l36.11">   notifications.forEach(function(notification) {</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-                          Services.obs.notifyObservers(null, notification, null)</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+                          Services.obs.notifyObservers(null, notification, null);</span>
<a href="#l36.14"></a><span id="l36.14">                         });</span>
<a href="#l36.15"></a><span id="l36.15"> </span>
<a href="#l36.16"></a><span id="l36.16">   // finally, the xpcom-shutdown notification is handled by XPCOM itself.</span>
<a href="#l36.17"></a><span id="l36.17"> }</span>
<a href="#l36.18"></a><span id="l36.18"> </span>
<a href="#l36.19"></a><span id="l36.19"> // First do a gc to let anything not being referenced be cleaned up.</span>
<a href="#l36.20"></a><span id="l36.20"> gc();</span>
<a href="#l36.21"></a><span id="l36.21"> </span>
<a href="#l36.22"></a><span id="l36.22"> // Now shut everything down.</span>
<a href="#l36.23"></a><span id="l36.23"> postShutdownNotifications();</span>
<a href="#l36.24"></a><span id="l36.24" class="difflineminus">-</span>
<a href="#l36.25"></a><span id="l36.25" class="difflineminus">-gProfileDir = null;</span>
<a href="#l36.26"></a><span id="l36.26" class="difflineminus">-if (gProfileDirProvider) {</span>
<a href="#l36.27"></a><span id="l36.27" class="difflineminus">-  Services.dirsvc.QueryInterface(Ci.nsIDirectoryService)</span>
<a href="#l36.28"></a><span id="l36.28" class="difflineminus">-                 .unregisterProvider(gProfileDirProvider);</span>
<a href="#l36.29"></a><span id="l36.29" class="difflineminus">- }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

