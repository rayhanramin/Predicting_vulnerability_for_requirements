<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21000:b0e38b2324c339f3e765ab8f63acabf10cbaaa73</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ b0e38b2324c339f3e765ab8f63acabf10cbaaa73" />
<meta property="og:url" content="/comm-central/rev/b0e38b2324c339f3e765ab8f63acabf10cbaaa73" />
<meta property="og:description" content="Bug 1322473 - Support removing IM accounts from the UI and implement forgetPassword() and removeFiles() for imIncomingServer. ui-r=Paenglab, r=aleth,mkmelin rs,a=Ratty" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / b0e38b2324c339f3e765ab8f63acabf10cbaaa73 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/b0e38b2324c339f3e765ab8f63acabf10cbaaa73">shortlog</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/b0e38b2324c339f3e765ab8f63acabf10cbaaa73">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73">files</a> |
changeset |
<a href="/comm-central/raw-rev/b0e38b2324c339f3e765ab8f63acabf10cbaaa73">raw</a>  | <a href="/comm-central/archive/b0e38b2324c339f3e765ab8f63acabf10cbaaa73.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1322473">Bug 1322473</a> - Support removing IM accounts from the UI and implement forgetPassword() and removeFiles() for imIncomingServer. ui-r=Paenglab, r=aleth,mkmelin rs,a=Ratty
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Sat, 17 Dec 2016 18:49:00 +0100</td></tr>

<tr>
 <td>changeset 21000</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/b0e38b2324c339f3e765ab8f63acabf10cbaaa73">b0e38b2324c339f3e765ab8f63acabf10cbaaa73</a></td>
</tr>



<tr>
<td>parent 20999</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7b3948ead9381fa9c7fd7b1ba0a76b06c4f7395a">7b3948ead9381fa9c7fd7b1ba0a76b06c4f7395a</a>
</td>
</tr>

<tr>
<td>child 21001</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/4eeb3f3d3ec60193f6c908170a202c20b649f390">4eeb3f3d3ec60193f6c908170a202c20b649f390</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=b0e38b2324c339f3e765ab8f63acabf10cbaaa73">12739</a></td></tr>
<tr><td>push user</td><td>aleth@instantbird.org</td></tr>
<tr><td>push date</td><td class="date age">Wed, 11 Jan 2017 23:06:31 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@b0e38b2324c3 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b0e38b2324c339f3e765ab8f63acabf10cbaaa73">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b0e38b2324c339f3e765ab8f63acabf10cbaaa73&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b0e38b2324c339f3e765ab8f63acabf10cbaaa73&newProject=comm-central&newRevision=7b3948ead9381fa9c7fd7b1ba0a76b06c4f7395a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b0e38b2324c339f3e765ab8f63acabf10cbaaa73&newProject=comm-central&newRevision=7b3948ead9381fa9c7fd7b1ba0a76b06c4f7395a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b0e38b2324c339f3e765ab8f63acabf10cbaaa73&newProject=comm-central&newRevision=7b3948ead9381fa9c7fd7b1ba0a76b06c4f7395a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Paenglab%29&revcount=50">Paenglab</a>, <a href="/comm-central/log?rev=reviewer%28aleth%29&revcount=50">aleth</a>, <a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a>, <a href="/comm-central/log?rev=reviewer%28Ratty%29&revcount=50">Ratty</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1322473">1322473</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1322473">Bug 1322473</a> - Support removing IM accounts from the UI and implement forgetPassword() and removeFiles() for imIncomingServer. ui-r=Paenglab, r=aleth,mkmelin rs,a=Ratty</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/public/imILogger.idl">chat/components/public/imILogger.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/public/imILogger.idl">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/public/imILogger.idl">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/public/imILogger.idl">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/public/imILogger.idl">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/public/imILogger.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/src/logger.js">chat/components/src/logger.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/src/logger.js">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/src/logger.js">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/src/logger.js">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/src/logger.js">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/chat/components/src/logger.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/components/im/imIncomingServer.js">mail/components/im/imIncomingServer.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/components/im/imIncomingServer.js">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/components/im/imIncomingServer.js">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/components/im/imIncomingServer.js">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/components/im/imIncomingServer.js">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/components/im/imIncomingServer.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/locales/en-US/chrome/messenger/removeAccount.dtd">mail/locales/en-US/chrome/messenger/removeAccount.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/locales/en-US/chrome/messenger/removeAccount.dtd">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/locales/en-US/chrome/messenger/removeAccount.dtd">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/locales/en-US/chrome/messenger/removeAccount.dtd">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/locales/en-US/chrome/messenger/removeAccount.dtd">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mail/locales/en-US/chrome/messenger/removeAccount.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.js">mailnews/base/prefs/content/removeAccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.js">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.js">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.js">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.js">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.xul">mailnews/base/prefs/content/removeAccount.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.xul">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.xul">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.xul">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.xul">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/mailnews/base/prefs/content/removeAccount.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd">suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd">file</a> |
<a href="/comm-central/annotate/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd">annotate</a> |
<a href="/comm-central/diff/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd">diff</a> |
<a href="/comm-central/comparison/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd">comparison</a> |
<a href="/comm-central/log/b0e38b2324c339f3e765ab8f63acabf10cbaaa73/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/components/public/imILogger.idl</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/components/public/imILogger.idl</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -89,9 +89,16 @@ interface imILogger: nsISupports {</span>
<a href="#l1.4"></a><span id="l1.4">                        [optional] in boolean aGroupByDay);</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">   // Asynchronously iterates through log folders for all prpls and accounts and</span>
<a href="#l1.7"></a><span id="l1.7">   // invokes the callback on every log file. Returns a promise that resolves when</span>
<a href="#l1.8"></a><span id="l1.8">   // iteration is complete. If the callback returns a promise, iteration pauses</span>
<a href="#l1.9"></a><span id="l1.9">   // until the promise resolves. If the callback throws (or rejects), iteration</span>
<a href="#l1.10"></a><span id="l1.10">   // will stop and the returned promise will reject with the same error.</span>
<a href="#l1.11"></a><span id="l1.11">   jsval forEach(in imIProcessLogsCallback aCallback);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  // Returns the folder storing all logs for aAccount.</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+  AUTF8String getLogFolderPathForAccount(in imIAccount aAccount);</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+  // Removes the folder storing all logs for aAccount.</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+  // Be sure the account is disconnected before using this.</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+  jsval deleteLogFolderForAccount(in imIAccount aAccount);</span>
<a href="#l1.19"></a><span id="l1.19"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/chat/components/src/logger.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/chat/components/src/logger.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -805,16 +805,41 @@ Logger.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">     } catch (aError) {</span>
<a href="#l2.5"></a><span id="l2.5">       Cu.reportError(&quot;Error getting similar logs for \&quot;&quot; +</span>
<a href="#l2.6"></a><span id="l2.6">                      aLog.path + &quot;\&quot;:\n&quot; + aError);</span>
<a href="#l2.7"></a><span id="l2.7">     }</span>
<a href="#l2.8"></a><span id="l2.8">     // If there was an error, this will return an EmptyEnumerator.</span>
<a href="#l2.9"></a><span id="l2.9">     return this._getEnumerator(entries, aGroupByDay);</span>
<a href="#l2.10"></a><span id="l2.10">   }),</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+  getLogFolderPathForAccount: function(aAccount) {</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    return getLogFolderPathForAccount(aAccount);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+  },</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+  deleteLogFolderForAccount: function(aAccount) {</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+    if (!aAccount.disconnecting &amp;&amp; !aAccount.disconnected)</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+      throw new Error(&quot;Account must be disconnected first before deleting logs.&quot;);</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+    if (aAccount.disconnecting)</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+      Cu.reportError(&quot;Account is still disconnecting while we attempt to remove logs.&quot;);</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+    let logPath = this.getLogFolderPathForAccount(aAccount);</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+    // Find all operations on files inside the log folder.</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+    let pendingPromises = [];</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+    function checkLogFiles(promiseOperation, filePath) {</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+      if (filePath.startsWith(logPath))</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+        pendingPromises.push(promiseOperation);</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+    }</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+    gFilePromises.forEach(checkLogFiles);</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+    // After all operations finish, remove the whole log folder.</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+    return Promise.all(pendingPromises)</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+                  .then(values =&gt; { OS.File.removeDir(logPath, { ignoreAbsent: true }); })</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+                  .catch(aError =&gt; Cu.reportError(&quot;Failed to remove log folders:\n&quot; + aError));</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+  },</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+</span>
<a href="#l2.37"></a><span id="l2.37">   forEach: Task.async(function* (aCallback) {</span>
<a href="#l2.38"></a><span id="l2.38">     let getAllSubdirs = Task.async(function* (aPaths, aErrorMsg) {</span>
<a href="#l2.39"></a><span id="l2.39">       let entries = [];</span>
<a href="#l2.40"></a><span id="l2.40">       for (let path of aPaths) {</span>
<a href="#l2.41"></a><span id="l2.41">         let iterator = new OS.File.DirectoryIterator(path);</span>
<a href="#l2.42"></a><span id="l2.42">         try {</span>
<a href="#l2.43"></a><span id="l2.43">           entries = entries.concat(yield iterator.nextBatch());</span>
<a href="#l2.44"></a><span id="l2.44">         } catch (aError) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/im/imIncomingServer.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/im/imIncomingServer.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -41,19 +41,43 @@ imIncomingServer.prototype = {</span>
<a href="#l3.4"></a><span id="l3.4">   },</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">   clearAllValues: function() {</span>
<a href="#l3.7"></a><span id="l3.7">     Services.accounts.deleteAccount(this.imAccount.id);</span>
<a href="#l3.8"></a><span id="l3.8">     this._prefBranch.deleteBranch(&quot;&quot;);</span>
<a href="#l3.9"></a><span id="l3.9">     delete this._prefBranch;</span>
<a href="#l3.10"></a><span id="l3.10">     delete this._imAccount;</span>
<a href="#l3.11"></a><span id="l3.11">   },</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  // Returns the directory where the account would have its data stored.</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+  // There are currently conversation logs only.</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+  // It may not exist yet.</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+  // This is used in account removal dialog and should return the same path</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+  // that the removeFiles() function deletes.</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+  get localPath() {</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+    let logPath = Services.logs.getLogFolderPathForAccount(this.imAccount);</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+    let file = Cc[&quot;@mozilla.org/file/local;1&quot;].createInstance(Ci.nsIFile);</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+    file.initWithPath(logPath);</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+    return file;</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+  },</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+  // Removes files created by this account.</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+  removeFiles: function() {</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+    Services.logs.deleteLogFolderForAccount(this.imAccount);</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+  },</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+</span>
<a href="#l3.30"></a><span id="l3.30">   // called by nsMsgAccountManager while deleting an account:</span>
<a href="#l3.31"></a><span id="l3.31">   forgetSessionPassword: function() { },</span>
<a href="#l3.32"></a><span id="l3.32"> </span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+  forgetPassword: function() {</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+    // Password is cleared in imAccount.remove()</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+    // TODO: this may need to be implemented here as a separate function</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+    // once IM accounts support changing username/hostname.</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+  },</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+</span>
<a href="#l3.39"></a><span id="l3.39">   // Shown in the &quot;Remove Account&quot; confirm prompt.</span>
<a href="#l3.40"></a><span id="l3.40">   get prettyName() {</span>
<a href="#l3.41"></a><span id="l3.41">     let protocol = this.imAccount.protocol.name || this.imAccount.protocol.id;</span>
<a href="#l3.42"></a><span id="l3.42">     return protocol + &quot; - &quot; + this.imAccount.name;</span>
<a href="#l3.43"></a><span id="l3.43">   },</span>
<a href="#l3.44"></a><span id="l3.44"> </span>
<a href="#l3.45"></a><span id="l3.45">   //XXX Flo: I don't think constructedPrettyName is visible in the UI</span>
<a href="#l3.46"></a><span id="l3.46">   get constructedPrettyName() { return &quot;constructedPrettyName FIXME&quot;; },</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineat">@@ -193,17 +217,22 @@ imIncomingServer.prototype = {</span>
<a href="#l3.48"></a><span id="l3.48"> </span>
<a href="#l3.49"></a><span id="l3.49">   get hostName() { return this._prefBranch.getCharPref(&quot;hostname&quot;); },</span>
<a href="#l3.50"></a><span id="l3.50">   set hostName(aHostName) {</span>
<a href="#l3.51"></a><span id="l3.51">     this._prefBranch.setCharPref(&quot;hostname&quot;, aHostName);</span>
<a href="#l3.52"></a><span id="l3.52">   },</span>
<a href="#l3.53"></a><span id="l3.53"> </span>
<a href="#l3.54"></a><span id="l3.54">   writeToFolderCache: function() { },</span>
<a href="#l3.55"></a><span id="l3.55">   closeCachedConnections: function() { },</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineminus">-  shutdown: function() { },</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+  // Shutdown the server instance so at least disconnect from the server.</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+  shutdown: function() {</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+    this.imAccount.disconnect();</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+  },</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+</span>
<a href="#l3.63"></a><span id="l3.63">   setFilterList: function() { },</span>
<a href="#l3.64"></a><span id="l3.64"> </span>
<a href="#l3.65"></a><span id="l3.65">   get canBeDefaultServer() { return false; },</span>
<a href="#l3.66"></a><span id="l3.66"> </span>
<a href="#l3.67"></a><span id="l3.67">   // AccountManager.js verifies that spamSettings is non-null before</span>
<a href="#l3.68"></a><span id="l3.68">   // using the initialize method, but we can't just use a null value</span>
<a href="#l3.69"></a><span id="l3.69">   // because that would crash nsMsgPurgeService::PerformPurge which</span>
<a href="#l3.70"></a><span id="l3.70">   // only verifies the nsresult return value of the spamSettings</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/removeAccount.dtd</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/removeAccount.dtd</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -5,15 +5,18 @@</span>
<a href="#l4.4"></a><span id="l4.4"> &lt;!ENTITY dialogTitle                  &quot;Remove Account and Data&quot;&gt;</span>
<a href="#l4.5"></a><span id="l4.5"> &lt;!ENTITY removeButton.label           &quot;Remove&quot;&gt;</span>
<a href="#l4.6"></a><span id="l4.6"> &lt;!ENTITY removeButton.accesskey       &quot;R&quot;&gt;</span>
<a href="#l4.7"></a><span id="l4.7"> &lt;!ENTITY removeAccount.label          &quot;Remove account information&quot;&gt;</span>
<a href="#l4.8"></a><span id="l4.8"> &lt;!ENTITY removeAccount.accesskey      &quot;a&quot;&gt;</span>
<a href="#l4.9"></a><span id="l4.9"> &lt;!ENTITY removeAccount.desc           &quot;Removes only &amp;brandShortName;'s knowledge of this account. Does not affect the account itself on the server.&quot;&gt;</span>
<a href="#l4.10"></a><span id="l4.10"> &lt;!ENTITY removeData.label             &quot;Remove message data&quot;&gt;</span>
<a href="#l4.11"></a><span id="l4.11"> &lt;!ENTITY removeData.accesskey         &quot;d&quot;&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+&lt;!ENTITY removeDataChat.label         &quot;Remove conversation data&quot;&gt;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+&lt;!ENTITY removeDataChat.accesskey     &quot;d&quot;&gt;</span>
<a href="#l4.14"></a><span id="l4.14"> &lt;!ENTITY removeDataLocalAccount.desc  &quot;Removes all messages, folders and filters associated with this account from your local disk. This does not affect some messages which may still be kept on the server. Do not choose this if you plan to archive the local data or re-use it in &amp;brandShortName; later.&quot;&gt;</span>
<a href="#l4.15"></a><span id="l4.15"> &lt;!ENTITY removeDataServerAccount.desc &quot;Removes all messages, folders and filters associated with this account from your local disk. Your messages and folders are still kept on the server.&quot;&gt;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+&lt;!ENTITY removeDataChatAccount.desc   &quot;Removes all logs of conversations stored for this account on your local disk.&quot;&gt;</span>
<a href="#l4.17"></a><span id="l4.17"> &lt;!ENTITY showData.label               &quot;Show data location&quot;&gt;</span>
<a href="#l4.18"></a><span id="l4.18"> &lt;!ENTITY showData.accesskey           &quot;S&quot;&gt;</span>
<a href="#l4.19"></a><span id="l4.19"> &lt;!ENTITY progressPending              &quot;Removing selected data…&quot;&gt;</span>
<a href="#l4.20"></a><span id="l4.20"> &lt;!ENTITY progressSuccess              &quot;Removal succeeded.&quot;&gt;</span>
<a href="#l4.21"></a><span id="l4.21"> &lt;!ENTITY progressFailure              &quot;Removal failed.&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/base/prefs/content/removeAccount.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/base/prefs/content/removeAccount.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -13,28 +13,41 @@ function onLoad(event) {</span>
<a href="#l5.4"></a><span id="l5.4">   gServer = window.arguments[0].account.incomingServer;</span>
<a href="#l5.5"></a><span id="l5.5">   gDialog = document.documentElement;</span>
<a href="#l5.6"></a><span id="l5.6"> </span>
<a href="#l5.7"></a><span id="l5.7">   let bundle = document.getElementById(&quot;bundle_removeAccount&quot;);</span>
<a href="#l5.8"></a><span id="l5.8">   let removeQuestion = bundle.getFormattedString(&quot;removeQuestion&quot;,</span>
<a href="#l5.9"></a><span id="l5.9">                                                  [gServer.prettyName]);</span>
<a href="#l5.10"></a><span id="l5.10">   document.getElementById(&quot;accountName&quot;).textContent = removeQuestion;</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  // Do not allow removal if localPath is outside of profile folder.</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-  let profilePath = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile)</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-  profilePath.normalize();</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-  let localDirectory = gServer.localPath</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-  localDirectory.normalize();</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-  // TODO: bug 77652, decide what to do for deferred accounts.</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-  // And inform the user if the account localPath is outside the profile.</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-  if ((gServer.isDeferredTo ||</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-      (gServer instanceof Components.interfaces.nsIPop3IncomingServer &amp;&amp;</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-       gServer.deferredToAccount)) ||</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-       !profilePath.contains(localDirectory)) {</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-    document.getElementById(&quot;removeData&quot;).disabled = true;</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+  // Allow to remove account data if it has a local storage.</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+  let localDirectory = gServer.localPath;</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+  if (localDirectory &amp;&amp; localDirectory.exists()) {</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+    localDirectory.normalize();</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+    // Do not allow removal if localPath is outside of profile folder.</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+    let profilePath = Services.dirsvc.get(&quot;ProfD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+    profilePath.normalize();</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+    // TODO: bug 77652, decide what to do for deferred accounts.</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+    // And inform the user if the account localPath is outside the profile.</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+    if ((gServer.isDeferredTo ||</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+        (gServer instanceof Components.interfaces.nsIPop3IncomingServer &amp;&amp;</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+         gServer.deferredToAccount)) ||</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+         !profilePath.contains(localDirectory)) {</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+      document.getElementById(&quot;removeData&quot;).disabled = true;</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+    }</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+  } else {</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+    document.getElementById(&quot;removeDataPossibility&quot;).collapsed = true;</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+  }</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+  if (gServer.type == &quot;im&quot;) {</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+    let dataCheckbox = document.getElementById(&quot;removeData&quot;);</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+    dataCheckbox.label = dataCheckbox.getAttribute(&quot;labelChat&quot;);</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+    dataCheckbox.accessKey = dataCheckbox.getAttribute(&quot;accesskeyChat&quot;);</span>
<a href="#l5.49"></a><span id="l5.49">   }</span>
<a href="#l5.50"></a><span id="l5.50"> </span>
<a href="#l5.51"></a><span id="l5.51">   enableRemove();</span>
<a href="#l5.52"></a><span id="l5.52">   window.sizeToContent();</span>
<a href="#l5.53"></a><span id="l5.53"> }</span>
<a href="#l5.54"></a><span id="l5.54"> </span>
<a href="#l5.55"></a><span id="l5.55"> function enableRemove() {</span>
<a href="#l5.56"></a><span id="l5.56">   gDialog.getButton(&quot;accept&quot;).disabled =</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineat">@@ -59,18 +72,21 @@ function openLocalDirectory() {</span>
<a href="#l5.58"></a><span id="l5.58"> }</span>
<a href="#l5.59"></a><span id="l5.59"> </span>
<a href="#l5.60"></a><span id="l5.60"> function showInfo() {</span>
<a href="#l5.61"></a><span id="l5.61">   let descs = document.querySelectorAll(&quot;vbox.indent&quot;);</span>
<a href="#l5.62"></a><span id="l5.62">   for (let desc of descs) {</span>
<a href="#l5.63"></a><span id="l5.63">     desc.collapsed = false;</span>
<a href="#l5.64"></a><span id="l5.64">   }</span>
<a href="#l5.65"></a><span id="l5.65"> </span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+  // TODO: bug 1238271, this should use showFor attributes if possible.</span>
<a href="#l5.67"></a><span id="l5.67">   if (gServer.type == &quot;imap&quot; || gServer.type == &quot;nntp&quot;) {</span>
<a href="#l5.68"></a><span id="l5.68">     document.getElementById(&quot;serverAccount&quot;).collapsed = false;</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+  } else if (gServer.type == &quot;im&quot;) {</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+    document.getElementById(&quot;chatAccount&quot;).collapsed = false;</span>
<a href="#l5.71"></a><span id="l5.71">   } else {</span>
<a href="#l5.72"></a><span id="l5.72">     document.getElementById(&quot;localAccount&quot;).collapsed = false;</span>
<a href="#l5.73"></a><span id="l5.73">   }</span>
<a href="#l5.74"></a><span id="l5.74"> </span>
<a href="#l5.75"></a><span id="l5.75">   window.sizeToContent();</span>
<a href="#l5.76"></a><span id="l5.76">   gDialog.getButton(&quot;disclosure&quot;).disabled = true;</span>
<a href="#l5.77"></a><span id="l5.77">   gDialog.getButton(&quot;disclosure&quot;).blur();</span>
<a href="#l5.78"></a><span id="l5.78"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/base/prefs/content/removeAccount.xul</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/base/prefs/content/removeAccount.xul</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -38,35 +38,43 @@</span>
<a href="#l6.4"></a><span id="l6.4">                 disabled=&quot;true&quot;</span>
<a href="#l6.5"></a><span id="l6.5">                 accesskey=&quot;&amp;removeAccount.accesskey;&quot;</span>
<a href="#l6.6"></a><span id="l6.6">                 oncommand=&quot;enableRemove();&quot;/&gt;</span>
<a href="#l6.7"></a><span id="l6.7">       &lt;vbox class=&quot;indent&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l6.8"></a><span id="l6.8">         &lt;description&gt;</span>
<a href="#l6.9"></a><span id="l6.9">           &amp;removeAccount.desc;</span>
<a href="#l6.10"></a><span id="l6.10">         &lt;/description&gt;</span>
<a href="#l6.11"></a><span id="l6.11">       &lt;/vbox&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+      &lt;vbox id=&quot;removeDataPossibility&quot; collapsed=&quot;false&quot;&gt;</span>
<a href="#l6.13"></a><span id="l6.13">       &lt;checkbox id=&quot;removeData&quot;</span>
<a href="#l6.14"></a><span id="l6.14">                 label=&quot;&amp;removeData.label;&quot;</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+                labelChat=&quot;&amp;removeDataChat.label;&quot;</span>
<a href="#l6.16"></a><span id="l6.16">                 checked=&quot;false&quot;</span>
<a href="#l6.17"></a><span id="l6.17">                 accesskey=&quot;&amp;removeData.accesskey;&quot;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+                accesskeyChat=&quot;&amp;removeDataChat.accesskey;&quot;</span>
<a href="#l6.19"></a><span id="l6.19">                 oncommand=&quot;enableRemove();&quot;/&gt;</span>
<a href="#l6.20"></a><span id="l6.20">       &lt;vbox class=&quot;indent&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l6.21"></a><span id="l6.21">         &lt;description id=&quot;localAccount&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l6.22"></a><span id="l6.22">           &amp;removeDataLocalAccount.desc;</span>
<a href="#l6.23"></a><span id="l6.23">         &lt;/description&gt;</span>
<a href="#l6.24"></a><span id="l6.24">         &lt;description id=&quot;serverAccount&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l6.25"></a><span id="l6.25">           &amp;removeDataServerAccount.desc;</span>
<a href="#l6.26"></a><span id="l6.26">         &lt;/description&gt;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+        &lt;description id=&quot;chatAccount&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+          &amp;removeDataChatAccount.desc;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+        &lt;/description&gt;</span>
<a href="#l6.30"></a><span id="l6.30">         &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-          &lt;button label=&quot;&amp;showData.label;&quot;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+          &lt;button id=&quot;showLocalDirectory&quot;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+                  label=&quot;&amp;showData.label;&quot;</span>
<a href="#l6.34"></a><span id="l6.34">                   accesskey=&quot;&amp;showData.accesskey;&quot;</span>
<a href="#l6.35"></a><span id="l6.35">                   oncommand=&quot;openLocalDirectory();&quot;/&gt;</span>
<a href="#l6.36"></a><span id="l6.36">           &lt;label id=&quot;localDirectory&quot; collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.37"></a><span id="l6.37">         &lt;/hbox&gt;</span>
<a href="#l6.38"></a><span id="l6.38">       &lt;/vbox&gt;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l6.40"></a><span id="l6.40">     &lt;/vbox&gt;</span>
<a href="#l6.41"></a><span id="l6.41">     &lt;vbox align=&quot;center&quot;&gt;</span>
<a href="#l6.42"></a><span id="l6.42">       &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l6.43"></a><span id="l6.43">       &lt;deck id=&quot;status&quot;&gt;</span>
<a href="#l6.44"></a><span id="l6.44">         &lt;vbox align=&quot;center&quot;&gt;</span>
<a href="#l6.45"></a><span id="l6.45">           &lt;label&gt;&amp;progressPending;&lt;/label&gt;</span>
<a href="#l6.46"></a><span id="l6.46">           &lt;progressmeter mode=&quot;undetermined&quot;/&gt;</span>
<a href="#l6.47"></a><span id="l6.47">         &lt;/vbox&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/pref/removeAccount.dtd</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -5,15 +5,18 @@</span>
<a href="#l7.4"></a><span id="l7.4"> &lt;!ENTITY dialogTitle                  &quot;Remove Account and Data&quot;&gt;</span>
<a href="#l7.5"></a><span id="l7.5"> &lt;!ENTITY removeButton.label           &quot;Remove&quot;&gt;</span>
<a href="#l7.6"></a><span id="l7.6"> &lt;!ENTITY removeButton.accesskey       &quot;R&quot;&gt;</span>
<a href="#l7.7"></a><span id="l7.7"> &lt;!ENTITY removeAccount.label          &quot;Remove account information&quot;&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> &lt;!ENTITY removeAccount.accesskey      &quot;a&quot;&gt;</span>
<a href="#l7.9"></a><span id="l7.9"> &lt;!ENTITY removeAccount.desc           &quot;Removes only &amp;brandShortName;'s knowledge of this account. Does not affect the account itself on the server.&quot;&gt;</span>
<a href="#l7.10"></a><span id="l7.10"> &lt;!ENTITY removeData.label             &quot;Remove message data&quot;&gt;</span>
<a href="#l7.11"></a><span id="l7.11"> &lt;!ENTITY removeData.accesskey         &quot;d&quot;&gt;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+&lt;!ENTITY removeDataChat.label         &quot;Remove conversation data&quot;&gt;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+&lt;!ENTITY removeDataChat.accesskey     &quot;d&quot;&gt;</span>
<a href="#l7.14"></a><span id="l7.14"> &lt;!ENTITY removeDataLocalAccount.desc  &quot;Removes all messages, folders and filters associated with this account from your local disk. This does not affect some messages which may still be kept on the server. Do not choose this if you plan to archive the local data or re-use it in &amp;brandShortName; later.&quot;&gt;</span>
<a href="#l7.15"></a><span id="l7.15"> &lt;!ENTITY removeDataServerAccount.desc &quot;Removes all messages, folders and filters associated with this account from your local disk. Your messages and folders are still kept on the server.&quot;&gt;</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+&lt;!ENTITY removeDataChatAccount.desc   &quot;Removes all logs of conversations stored for this account on your local disk.&quot;&gt;</span>
<a href="#l7.17"></a><span id="l7.17"> &lt;!ENTITY showData.label               &quot;Show data location&quot;&gt;</span>
<a href="#l7.18"></a><span id="l7.18"> &lt;!ENTITY showData.accesskey           &quot;S&quot;&gt;</span>
<a href="#l7.19"></a><span id="l7.19"> &lt;!ENTITY progressPending              &quot;Removing selected data…&quot;&gt;</span>
<a href="#l7.20"></a><span id="l7.20"> &lt;!ENTITY progressSuccess              &quot;Removal succeeded.&quot;&gt;</span>
<a href="#l7.21"></a><span id="l7.21"> &lt;!ENTITY progressFailure              &quot;Removal failed.&quot;&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

