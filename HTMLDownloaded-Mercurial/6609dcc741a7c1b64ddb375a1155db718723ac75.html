<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 7318:6609dcc741a7c1b64ddb375a1155db718723ac75</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 6609dcc741a7c1b64ddb375a1155db718723ac75" />
<meta property="og:url" content="/comm-central/rev/6609dcc741a7c1b64ddb375a1155db718723ac75" />
<meta property="og:description" content="bug 401417 - Add an option for a search box in SeaMonkey toolbar, including additon of an engine manager for OpenSearch, r+ui-r=Neil" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 6609dcc741a7c1b64ddb375a1155db718723ac75 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/6609dcc741a7c1b64ddb375a1155db718723ac75">shortlog</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/6609dcc741a7c1b64ddb375a1155db718723ac75">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75">files</a> |
changeset |
<a href="/comm-central/raw-rev/6609dcc741a7c1b64ddb375a1155db718723ac75">raw</a>  | <a href="/comm-central/archive/6609dcc741a7c1b64ddb375a1155db718723ac75.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=401417">bug 401417</a> - Add an option for a search box in SeaMonkey toolbar, including additon of an engine manager for OpenSearch, r+ui-r=Neil
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#111;&#98;&#101;&#114;&#116;&#32;&#75;&#97;&#105;&#115;&#101;&#114;&#32;&#60;&#107;&#97;&#105;&#114;&#111;&#64;&#107;&#97;&#105;&#114;&#111;&#46;&#97;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 10 Mar 2011 22:42:00 +0100</td></tr>

<tr>
 <td>changeset 7318</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/6609dcc741a7c1b64ddb375a1155db718723ac75">6609dcc741a7c1b64ddb375a1155db718723ac75</a></td>
</tr>



<tr>
<td>parent 7317</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/dd7768eaabf2e4a0e3e2ce13b33fcda09fd9c71b">dd7768eaabf2e4a0e3e2ce13b33fcda09fd9c71b</a>
</td>
</tr>

<tr>
<td>child 7319</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/83d38f9f13c6fe4672b1d0ff0b11776e0cb4b92b">83d38f9f13c6fe4672b1d0ff0b11776e0cb4b92b</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=6609dcc741a7c1b64ddb375a1155db718723ac75">5604</a></td></tr>
<tr><td>push user</td><td>kairo@kairo.at</td></tr>
<tr><td>push date</td><td class="date age">Thu, 10 Mar 2011 21:42:52 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@6609dcc741a7 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=6609dcc741a7c1b64ddb375a1155db718723ac75">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=6609dcc741a7c1b64ddb375a1155db718723ac75&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6609dcc741a7c1b64ddb375a1155db718723ac75&newProject=comm-central&newRevision=6609dcc741a7c1b64ddb375a1155db718723ac75&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6609dcc741a7c1b64ddb375a1155db718723ac75&newProject=comm-central&newRevision=6609dcc741a7c1b64ddb375a1155db718723ac75&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=6609dcc741a7c1b64ddb375a1155db718723ac75&newProject=comm-central&newRevision=6609dcc741a7c1b64ddb375a1155db718723ac75&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=401417">401417</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=401417">bug 401417</a> - Add an option for a search box in SeaMonkey toolbar, including additon of an engine manager for OpenSearch, r+ui-r=Neil</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/browser-prefs.js">suite/browser/browser-prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/browser-prefs.js">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/browser-prefs.js">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/browser-prefs.js">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/browser-prefs.js">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/browser-prefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.css">suite/browser/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.js">suite/browser/navigator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.js">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.js">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.js">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.js">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.xul">suite/browser/navigator.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.xul">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.xul">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.xul">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.xul">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/navigator.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/nsBrowserStatusHandler.js">suite/browser/nsBrowserStatusHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/nsBrowserStatusHandler.js">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/nsBrowserStatusHandler.js">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/nsBrowserStatusHandler.js">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/nsBrowserStatusHandler.js">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/browser/nsBrowserStatusHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/jar.mn">suite/common/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/jar.mn">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/jar.mn">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/jar.mn">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/jar.mn">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.js">suite/common/search/engineManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.js">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.js">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.js">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.js">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.xul">suite/common/search/engineManager.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.xul">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.xul">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.xul">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.xul">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/engineManager.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/search.xml">suite/common/search/search.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/search.xml">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/search.xml">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/search.xml">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/search.xml">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/search.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/searchbarBindings.css">suite/common/search/searchbarBindings.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/searchbarBindings.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/searchbarBindings.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/searchbarBindings.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/searchbarBindings.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/common/search/searchbarBindings.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/browser/navigator.dtd">suite/locales/en-US/chrome/browser/navigator.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/browser/navigator.dtd">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/browser/navigator.dtd">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/browser/navigator.dtd">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/browser/navigator.dtd">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/browser/navigator.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/pref/pref-search.dtd">suite/locales/en-US/chrome/common/pref/pref-search.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/pref/pref-search.dtd">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/pref/pref-search.dtd">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/pref/pref-search.dtd">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/pref/pref-search.dtd">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/pref/pref-search.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.dtd">suite/locales/en-US/chrome/common/search/engineManager.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.dtd">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.dtd">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.dtd">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.dtd">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.properties">suite/locales/en-US/chrome/common/search/engineManager.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.properties">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.properties">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.properties">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.properties">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/engineManager.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search-panel.dtd">suite/locales/en-US/chrome/common/search/search-panel.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search-panel.dtd">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search-panel.dtd">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search-panel.dtd">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search-panel.dtd">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search-panel.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search.properties">suite/locales/en-US/chrome/common/search/search.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search.properties">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search.properties">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search.properties">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search.properties">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/search.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/searchbar.dtd">suite/locales/en-US/chrome/common/search/searchbar.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/searchbar.dtd">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/searchbar.dtd">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/searchbar.dtd">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/searchbar.dtd">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/chrome/common/search/searchbar.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/searchplugins/google.xml">suite/locales/en-US/searchplugins/google.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/searchplugins/google.xml">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/searchplugins/google.xml">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/searchplugins/google.xml">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/searchplugins/google.xml">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/en-US/searchplugins/google.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/jar.mn">suite/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/engineManager.css">suite/themes/classic/communicator/search/engineManager.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/engineManager.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/engineManager.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/engineManager.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/engineManager.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/engineManager.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png">suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/mainwindow-dropdown-arrow.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/searchbar.css">suite/themes/classic/communicator/search/searchbar.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/searchbar.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/searchbar.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/searchbar.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/searchbar.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/communicator/search/searchbar.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/jar.mn">suite/themes/classic/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/jar.mn">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/jar.mn">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/jar.mn">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/jar.mn">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/mac/navigator/navigator.css">suite/themes/classic/mac/navigator/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/mac/navigator/navigator.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/mac/navigator/navigator.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/mac/navigator/navigator.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/mac/navigator/navigator.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/mac/navigator/navigator.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/navigator/navigator.css">suite/themes/classic/navigator/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/navigator/navigator.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/navigator/navigator.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/navigator/navigator.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/navigator/navigator.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/classic/navigator/navigator.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/engineManager.css">suite/themes/modern/communicator/search/engineManager.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/engineManager.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/engineManager.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/engineManager.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/engineManager.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/engineManager.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png">suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/mainwindow-dropdown-arrow.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/searchbar.css">suite/themes/modern/communicator/search/searchbar.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/searchbar.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/searchbar.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/searchbar.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/searchbar.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/communicator/search/searchbar.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/jar.mn">suite/themes/modern/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/jar.mn">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/jar.mn">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/jar.mn">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/jar.mn">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/navigator/navigator.css">suite/themes/modern/navigator/navigator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/navigator/navigator.css">file</a> |
<a href="/comm-central/annotate/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/navigator/navigator.css">annotate</a> |
<a href="/comm-central/diff/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/navigator/navigator.css">diff</a> |
<a href="/comm-central/comparison/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/navigator/navigator.css">comparison</a> |
<a href="/comm-central/log/6609dcc741a7c1b64ddb375a1155db718723ac75/suite/themes/modern/navigator/navigator.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/browser/browser-prefs.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/browser/browser-prefs.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -132,16 +132,19 @@ pref(&quot;browser.search.opensidebarsearchpa</span>
<a href="#l1.4"></a><span id="l1.4"> pref(&quot;browser.search.update&quot;, true);</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6"> // Disable logging for the search service update system by default.</span>
<a href="#l1.7"></a><span id="l1.7"> pref(&quot;browser.search.update.log&quot;, false);</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> // Check whether we need to perform engine updates every 6 hours</span>
<a href="#l1.10"></a><span id="l1.10"> pref(&quot;browser.search.update.interval&quot;, 21600);</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+// enable search suggestions by default</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+pref(&quot;browser.search.suggest.enabled&quot;, true);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+</span>
<a href="#l1.15"></a><span id="l1.15"> // Smart Browsing prefs</span>
<a href="#l1.16"></a><span id="l1.16"> pref(&quot;keyword.enabled&quot;, true);</span>
<a href="#l1.17"></a><span id="l1.17"> // Override the default keyword.URL. Empty value means</span>
<a href="#l1.18"></a><span id="l1.18"> // &quot;use the search service's default engine&quot;</span>
<a href="#l1.19"></a><span id="l1.19"> pref(&quot;keyword.URL&quot;, &quot;&quot;);</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21"> pref(&quot;browser.urlbar.autocomplete.enabled&quot;, true);</span>
<a href="#l1.22"></a><span id="l1.22"> pref(&quot;browser.urlbar.clickSelectsAll&quot;, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/navigator.css</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/navigator.css</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,8 +1,11 @@</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineplus">+@namespace url(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;);</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+@namespace html url(&quot;http://www.w3.org/1999/xhtml&quot;);</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+</span>
<a href="#l2.7"></a><span id="l2.7"> /* ::::: Hide the link toolbar if it is set to autohide and has no items. ::::: */</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> #linktoolbar[hidden=&quot;maybe&quot;][hasitems=&quot;false&quot;] {</span>
<a href="#l2.10"></a><span id="l2.10">   display: none;</span>
<a href="#l2.11"></a><span id="l2.11"> }</span>
<a href="#l2.12"></a><span id="l2.12"> </span>
<a href="#l2.13"></a><span id="l2.13"> /* ::::: tabbed browser ::::: */</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15" class="difflineat">@@ -44,16 +47,25 @@ panel[for=&quot;urlbar&quot;] {</span>
<a href="#l2.16"></a><span id="l2.16">   -moz-binding: url(&quot;chrome://navigator/content/urlbarBindings.xml#autocomplete-search-box&quot;);</span>
<a href="#l2.17"></a><span id="l2.17"> }</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> .autocomplete-search-engine {</span>
<a href="#l2.20"></a><span id="l2.20">   -moz-binding: url(&quot;chrome://navigator/content/urlbarBindings.xml#autocomplete-search-engine&quot;);</span>
<a href="#l2.21"></a><span id="l2.21">   -moz-box-align: center;</span>
<a href="#l2.22"></a><span id="l2.22"> }</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+/* ::::: search bar ::::: */</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+searchbar {</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+  -moz-binding: url(&quot;chrome://communicator/content/search/search.xml#searchbar&quot;);</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+}</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+#wrapper-search-container &gt; #search-container &gt; #searchbar &gt; .searchbar-textbox &gt; .autocomplete-textbox-container &gt; .textbox-input-box &gt; html|*.textbox-input {</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+  visibility: hidden;</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+}</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+</span>
<a href="#l2.33"></a><span id="l2.33"> /* ::::: bookmarks menu ::::: */</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35"> .isempty:not(:last-child) {</span>
<a href="#l2.36"></a><span id="l2.36">   display: none;</span>
<a href="#l2.37"></a><span id="l2.37"> }</span>
<a href="#l2.38"></a><span id="l2.38"> </span>
<a href="#l2.39"></a><span id="l2.39"> /* ::::: bookmarks toolbar ::::: */</span>
<a href="#l2.40"></a><span id="l2.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/browser/navigator.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/browser/navigator.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1074,26 +1074,55 @@ var gBookmarkAllTabsHandler = {</span>
<a href="#l3.4"></a><span id="l3.4">   // nsIDOMEventListener</span>
<a href="#l3.5"></a><span id="l3.5">   handleEvent: function(aEvent) {</span>
<a href="#l3.6"></a><span id="l3.6">     this._updateCommandState(aEvent.type == &quot;TabClose&quot;);</span>
<a href="#l3.7"></a><span id="l3.7">   }</span>
<a href="#l3.8"></a><span id="l3.8"> };</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> const BrowserSearch = {</span>
<a href="#l3.11"></a><span id="l3.11">   addEngine: function(engine, targetDoc) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    Services.console.logStringMessage(&quot;BrowserSearch.addEngine will be implemented in bug 401417.&quot;);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-  },</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-  /**</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-   * Update the browser UI to show whether or not additional engines are</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-   * available when a page is loaded or the user switches tabs to a page that</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-   * has search engines.</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-   */</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-  updateSearchButton: function() {</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-    Services.console.logStringMessage(&quot;BrowserSearch.updateSearchButton will be implemented in bug 401417.&quot;);</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+    if (!this.searchBar)</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+      return;</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+    var browser = getBrowser().getBrowserForDocument(targetDoc);</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+    // ignore search engines from subframes (see bug 479408)</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+    if (!browser)</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+      return;</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+    // Check to see whether we've already added an engine with this title</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+    if (browser.engines) {</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+      if (browser.engines.some(function (e) e.title == engine.title))</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+        return;</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+    }</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+    // Append the URI and an appropriate title to the browser data.</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+    // Use documentURIObject in the check for shouldLoadFavIcon so that we</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+    // do the right thing with about:-style error pages.  Bug 453442</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+    var iconURL = null;</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+    if (getBrowser().shouldLoadFavIcon(targetDoc.documentURIObject))</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+      iconURL = getBrowser().buildFavIconString(targetDoc.documentURIObject);</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+    var hidden = false;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+    // If this engine (identified by title) is already in the list, add it</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+    // to the list of hidden engines rather than to the main list.</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+    // XXX This will need to be changed when engines are identified by URL;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+    // see bug 335102.</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+    if (Services.search.getEngineByName(engine.title))</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+      hidden = true;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+    var engines = (hidden ? browser.hiddenEngines : browser.engines) || [];</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+    engines.push({ uri: engine.href,</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+                   title: engine.title,</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+                   icon: iconURL });</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+    if (hidden)</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+      browser.hiddenEngines = engines;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+    else</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+      browser.engines = engines;</span>
<a href="#l3.61"></a><span id="l3.61">   },</span>
<a href="#l3.62"></a><span id="l3.62"> </span>
<a href="#l3.63"></a><span id="l3.63">   /**</span>
<a href="#l3.64"></a><span id="l3.64">    * Gives focus to the search bar, if it is present on the toolbar, or to the</span>
<a href="#l3.65"></a><span id="l3.65">    * search sidebar, if it is open, or loads the default engine's search form</span>
<a href="#l3.66"></a><span id="l3.66">    * otherwise. For Mac, opens a new window or focuses an existing window, if</span>
<a href="#l3.67"></a><span id="l3.67">    * necessary.</span>
<a href="#l3.68"></a><span id="l3.68">    */</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineat">@@ -1118,20 +1147,20 @@ const BrowserSearch = {</span>
<a href="#l3.70"></a><span id="l3.70">                                   &quot;chrome,all,dialog=no&quot;, &quot;about:blank&quot;);</span>
<a href="#l3.71"></a><span id="l3.71">           win.addEventListener(&quot;load&quot;, webSearchCallback, false);</span>
<a href="#l3.72"></a><span id="l3.72">         }</span>
<a href="#l3.73"></a><span id="l3.73">         return;</span>
<a href="#l3.74"></a><span id="l3.74">       }</span>
<a href="#l3.75"></a><span id="l3.75">     }</span>
<a href="#l3.76"></a><span id="l3.76"> </span>
<a href="#l3.77"></a><span id="l3.77">     if (isElementVisible(this.searchBar)) {</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineminus">-      searchBar.select();</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-      searchBar.focus();</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+      this.searchBar.select();</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+      this.searchBar.focus();</span>
<a href="#l3.82"></a><span id="l3.82">     } else if (isElementVisible(this.searchSidebar)) {</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-      searchSidebar.focus();</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+      this.searchSidebar.focus();</span>
<a href="#l3.85"></a><span id="l3.85">     } else {</span>
<a href="#l3.86"></a><span id="l3.86">       loadURI(Services.search.defaultEngine.searchForm);</span>
<a href="#l3.87"></a><span id="l3.87">       window.content.focus();</span>
<a href="#l3.88"></a><span id="l3.88">     }</span>
<a href="#l3.89"></a><span id="l3.89">   },</span>
<a href="#l3.90"></a><span id="l3.90"> </span>
<a href="#l3.91"></a><span id="l3.91">   /**</span>
<a href="#l3.92"></a><span id="l3.92">    * Loads a search results page, given a set of search terms. Uses the current</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineat">@@ -1192,16 +1221,23 @@ const BrowserSearch = {</span>
<a href="#l3.94"></a><span id="l3.94"> </span>
<a href="#l3.95"></a><span id="l3.95">   /**</span>
<a href="#l3.96"></a><span id="l3.96">    * Returns the search sidebar element if it is present in the toolbar, null otherwise.</span>
<a href="#l3.97"></a><span id="l3.97">    */</span>
<a href="#l3.98"></a><span id="l3.98">   get searchSidebar() {</span>
<a href="#l3.99"></a><span id="l3.99">     return document.getElementById(&quot;urn:sidebar:panel:search&quot;);</span>
<a href="#l3.100"></a><span id="l3.100">   },</span>
<a href="#l3.101"></a><span id="l3.101"> </span>
<a href="#l3.102"></a><span id="l3.102" class="difflineplus">+  loadAddEngines: function BrowserSearch_loadAddEngines() {</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineplus">+    var newWindowPref = Services.prefs.getIntPref(&quot;browser.link.open_newwindow&quot;);</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineplus">+    var where = newWindowPref == 3 ? &quot;tabfocused&quot; : &quot;window&quot;;</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+    var searchEnginesURL = Services.urlFormatter.formatURLPref(&quot;browser.search.searchEnginesURL&quot;);</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+    openUILinkIn(searchEnginesURL, where);</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineplus">+  },</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineplus">+</span>
<a href="#l3.109"></a><span id="l3.109">   /**</span>
<a href="#l3.110"></a><span id="l3.110">    * Reveal the search sidebar panel.</span>
<a href="#l3.111"></a><span id="l3.111">    */</span>
<a href="#l3.112"></a><span id="l3.112">   revealSidebar: function BrowserSearch_revealSidebar() {</span>
<a href="#l3.113"></a><span id="l3.113">     // first lets check if the search panel will be shown at all</span>
<a href="#l3.114"></a><span id="l3.114">     // by checking the sidebar datasource to see if there is an entry</span>
<a href="#l3.115"></a><span id="l3.115">     // for the search panel, and if it is excluded for navigator or not</span>
<a href="#l3.116"></a><span id="l3.116"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/browser/navigator.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/browser/navigator.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -149,16 +149,18 @@</span>
<a href="#l4.4"></a><span id="l4.4">     &lt;/tooltip&gt;</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">     &lt;menupopup id=&quot;toolbar-context-menu&quot;/&gt;</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8">     &lt;menupopup id=&quot;feedsPopup&quot; popupanchor=&quot;bottomright&quot; popupalign=&quot;topright&quot;</span>
<a href="#l4.9"></a><span id="l4.9">                onpopupshowing=&quot;window.XULBrowserWindow.populateFeeds(this);&quot;</span>
<a href="#l4.10"></a><span id="l4.10">                oncommand=&quot;subscribeToFeed(event.target.statusText, event);&quot;</span>
<a href="#l4.11"></a><span id="l4.11">                onclick=&quot;checkForMiddleClick(this, event);&quot;/&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    &lt;!-- for search and content formfill/pw manager --&gt;</span>
<a href="#l4.14"></a><span id="l4.14">     &lt;panel id=&quot;PopupAutoComplete&quot; type=&quot;autocomplete&quot; noautofocus=&quot;true&quot;/&gt;</span>
<a href="#l4.15"></a><span id="l4.15"> </span>
<a href="#l4.16"></a><span id="l4.16">     &lt;!-- for invalid form error message --&gt;</span>
<a href="#l4.17"></a><span id="l4.17">     &lt;panel id=&quot;invalid-form-popup&quot; noautofocus=&quot;true&quot; hidden=&quot;true&quot; level=&quot;parent&quot;&gt;</span>
<a href="#l4.18"></a><span id="l4.18">       &lt;description/&gt;</span>
<a href="#l4.19"></a><span id="l4.19">     &lt;/panel&gt;</span>
<a href="#l4.20"></a><span id="l4.20"> </span>
<a href="#l4.21"></a><span id="l4.21">     &lt;panel id=&quot;editBookmarkPanel&quot;/&gt;</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -288,17 +290,17 @@</span>
<a href="#l4.23"></a><span id="l4.23">                      tooltip=&quot;home-button-tooltip&quot;</span>
<a href="#l4.24"></a><span id="l4.24">                      ondraggesture=&quot;nsDragAndDrop.startDrag(event, homeButtonObserver)&quot;</span>
<a href="#l4.25"></a><span id="l4.25">                      ondragdrop=&quot;nsDragAndDrop.drop(event, homeButtonObserver); event.stopPropagation()&quot;</span>
<a href="#l4.26"></a><span id="l4.26">                      ondragenter=&quot;event.stopPropagation()&quot;</span>
<a href="#l4.27"></a><span id="l4.27">                      ondragexit=&quot;nsDragAndDrop.dragExit(event, homeButtonObserver); event.stopPropagation()&quot;</span>
<a href="#l4.28"></a><span id="l4.28">                      ondragover=&quot;nsDragAndDrop.dragOver(event, homeButtonObserver); event.stopPropagation()&quot;/&gt;</span>
<a href="#l4.29"></a><span id="l4.29"> </span>
<a href="#l4.30"></a><span id="l4.30">       &lt;toolbaritem id=&quot;nav-bar-inner&quot;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-                   flex=&quot;1&quot;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+                   flex=&quot;4&quot;</span>
<a href="#l4.33"></a><span id="l4.33">                    persist=&quot;width&quot;</span>
<a href="#l4.34"></a><span id="l4.34">                    class=&quot;chromeclass-location nav-bar-class&quot;</span>
<a href="#l4.35"></a><span id="l4.35">                    title=&quot;&amp;locationBar.title;&quot;&gt;</span>
<a href="#l4.36"></a><span id="l4.36">         &lt;textbox id=&quot;urlbar&quot; class=&quot;chromeclass-location uri-element&quot; flex=&quot;1&quot;</span>
<a href="#l4.37"></a><span id="l4.37">                  type=&quot;autocomplete&quot; autocompletesearch=&quot;history file&quot;</span>
<a href="#l4.38"></a><span id="l4.38">                  timeout=&quot;50&quot; maxrows=&quot;6&quot;</span>
<a href="#l4.39"></a><span id="l4.39">                  disablehistory=&quot;false&quot; accesskey=&quot;&amp;locationBar.accesskey;&quot;</span>
<a href="#l4.40"></a><span id="l4.40">                  defaultSearchEngine=&quot;true&quot; tabscrolling=&quot;true&quot;</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineat">@@ -372,16 +374,22 @@</span>
<a href="#l4.42"></a><span id="l4.42">                 label=&quot;&amp;searchButton.label;&quot;</span>
<a href="#l4.43"></a><span id="l4.43">                 tooltiptext=&quot;&amp;searchButton.tooltip;&quot;</span>
<a href="#l4.44"></a><span id="l4.44">                 oncommand=&quot;BrowserSearch.loadSearch(QualifySearchTerm());&quot;</span>
<a href="#l4.45"></a><span id="l4.45">                 ondragover=&quot;nsDragAndDrop.dragOver(event, searchButtonObserver);&quot;</span>
<a href="#l4.46"></a><span id="l4.46">                 ondragdrop=&quot;nsDragAndDrop.drop(event, searchButtonObserver);&quot;</span>
<a href="#l4.47"></a><span id="l4.47">                 ondragexit=&quot;nsDragAndDrop.dragExit(event, searchButtonObserver);&quot;/&gt;</span>
<a href="#l4.48"></a><span id="l4.48">       &lt;/toolbaritem&gt;</span>
<a href="#l4.49"></a><span id="l4.49"> </span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+      &lt;toolbaritem id=&quot;search-container&quot; title=&quot;&amp;searchItem.title;&quot;</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+                   align=&quot;center&quot; class=&quot;chromeclass-toolbar-additional&quot;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+                   flex=&quot;1&quot; persist=&quot;width&quot; removable=&quot;true&quot;&gt;</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+        &lt;searchbar id=&quot;searchbar&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+      &lt;/toolbaritem&gt;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+</span>
<a href="#l4.56"></a><span id="l4.56">       &lt;toolbarbutton id=&quot;print-button&quot; type=&quot;menu-button&quot;</span>
<a href="#l4.57"></a><span id="l4.57">                      class=&quot;toolbarbutton-1 chromeclass-toolbar-additional&quot;</span>
<a href="#l4.58"></a><span id="l4.58">                      label=&quot;&amp;printButton.label;&quot;</span>
<a href="#l4.59"></a><span id="l4.59">                      oncommand=&quot;if (event.target==this) PrintUtils.print();&quot;</span>
<a href="#l4.60"></a><span id="l4.60">                      tooltiptext=&quot;&amp;printButton.tooltip;&quot;&gt;</span>
<a href="#l4.61"></a><span id="l4.61">         &lt;menupopup id=&quot;printMenu&quot;&gt;</span>
<a href="#l4.62"></a><span id="l4.62">           &lt;menuitem id=&quot;printMenuItemToolbar&quot; label=&quot;&amp;printCmd.label;&quot; accesskey=&quot;&amp;printCmd.accesskey;&quot;</span>
<a href="#l4.63"></a><span id="l4.63">                     default=&quot;true&quot; oncommand=&quot;PrintUtils.print()&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/browser/nsBrowserStatusHandler.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/browser/nsBrowserStatusHandler.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -451,16 +451,19 @@ nsBrowserStatusHandler.prototype =</span>
<a href="#l5.4"></a><span id="l5.4">   },</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6">   startDocumentLoad : function(aRequest)</span>
<a href="#l5.7"></a><span id="l5.7">   {</span>
<a href="#l5.8"></a><span id="l5.8">     var uri = aRequest.QueryInterface(Components.interfaces.nsIChannel).originalURI;</span>
<a href="#l5.9"></a><span id="l5.9">     var observerService = Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l5.10"></a><span id="l5.10">                                     .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+    // clear out search-engine data</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+    getBrowser().selectedBrowser.engines = null;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+</span>
<a href="#l5.15"></a><span id="l5.15">     // Set the URI now if it isn't already set, so that the user can tell which</span>
<a href="#l5.16"></a><span id="l5.16">     // site is loading. Only do this if user requested the load via chrome UI,</span>
<a href="#l5.17"></a><span id="l5.17">     // to minimise spoofing risk.</span>
<a href="#l5.18"></a><span id="l5.18">     if (!content.opener &amp;&amp;</span>
<a href="#l5.19"></a><span id="l5.19">         !gURLBar.value &amp;&amp;</span>
<a href="#l5.20"></a><span id="l5.20">         getWebNavigation().currentURI.spec == &quot;about:blank&quot;)</span>
<a href="#l5.21"></a><span id="l5.21">       URLBarSetURI(uri);</span>
<a href="#l5.22"></a><span id="l5.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/common/jar.mn</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/common/jar.mn</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -231,16 +231,20 @@ comm.jar:</span>
<a href="#l6.4"></a><span id="l6.4">    content/communicator/pref/pref-security.xul                      (pref/pref-security.xul)</span>
<a href="#l6.5"></a><span id="l6.5">    content/communicator/pref/pref-smartupdate.js                    (pref/pref-smartupdate.js)</span>
<a href="#l6.6"></a><span id="l6.6">    content/communicator/pref/pref-smartupdate.xul                   (pref/pref-smartupdate.xul)</span>
<a href="#l6.7"></a><span id="l6.7">    content/communicator/pref/pref-sync.js                           (pref/pref-sync.js)</span>
<a href="#l6.8"></a><span id="l6.8">    content/communicator/pref/pref-sync.xul                          (pref/pref-sync.xul)</span>
<a href="#l6.9"></a><span id="l6.9">    content/communicator/pref/pref-tabs.xul                          (pref/pref-tabs.xul)</span>
<a href="#l6.10"></a><span id="l6.10">    content/communicator/profile/profileSelection.js                 (profile/profileSelection.js)</span>
<a href="#l6.11"></a><span id="l6.11">    content/communicator/profile/profileSelection.xul                (profile/profileSelection.xul)</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+   content/communicator/search/engineManager.js                     (search/engineManager.js)</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+   content/communicator/search/engineManager.xul                    (search/engineManager.xul)</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+*  content/communicator/search/search.xml                           (search/search.xml)</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+   content/communicator/search/searchbarBindings.css                (search/searchbarBindings.css)</span>
<a href="#l6.16"></a><span id="l6.16">    content/communicator/search/search-panel.js                      (search/search-panel.js)</span>
<a href="#l6.17"></a><span id="l6.17">    content/communicator/search/search-panel.xul                     (search/search-panel.xul)</span>
<a href="#l6.18"></a><span id="l6.18">    content/communicator/sidebar/customize-panel.js                  (sidebar/customize-panel.js)</span>
<a href="#l6.19"></a><span id="l6.19">    content/communicator/sidebar/customize-panel.xul                 (sidebar/customize-panel.xul)</span>
<a href="#l6.20"></a><span id="l6.20">    content/communicator/sidebar/customize.js                        (sidebar/customize.js)</span>
<a href="#l6.21"></a><span id="l6.21">    content/communicator/sidebar/customize.xul                       (sidebar/customize.xul)</span>
<a href="#l6.22"></a><span id="l6.22">    content/communicator/sidebar/PageNotFound.xul                    (sidebar/PageNotFound.xul)</span>
<a href="#l6.23"></a><span id="l6.23">    content/communicator/sidebar/preview.js                          (sidebar/preview.js)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/suite/common/search/engineManager.js</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,526 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+ *</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+ *</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+ * License.</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+ *</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+ * The Original Code is the Browser Search Service.</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+ *</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+ * Google Inc.</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+ *</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+ *   Ben Goodger &lt;beng@google.com&gt;</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+ *   Gavin Sharp &lt;gavin@gavinsharp.com&gt;</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+ *   Pamela Greene &lt;pamg.bugs@gmail.com&gt;</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+ *   Ryan Flint &lt;rflint@dslr.net&gt;</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+ *</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+ *</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+const Ci = Components.interfaces;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+const Cc = Components.classes;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+const ENGINE_FLAVOR = &quot;text/x-moz-search-engine&quot;;</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+const BROWSER_SUGGEST_PREF = &quot;browser.search.suggest.enabled&quot;;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+var gEngineView = null;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+var gEngineManagerDialog = {</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+  init: function engineManager_init() {</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+    gEngineView = new EngineView(new EngineStore());</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+    var suggestEnabled = Services.prefs.getBoolPref(BROWSER_SUGGEST_PREF);</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+    document.getElementById(&quot;enableSuggest&quot;).checked = suggestEnabled;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+    var tree = document.getElementById(&quot;engineList&quot;);</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+    tree.view = gEngineView;</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+    Services.obs.addObserver(this, &quot;browser-search-engine-modified&quot;, false);</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+  },</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+  destroy: function engineManager_destroy() {</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+    // Remove the observer</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+    Services.obs.removeObserver(this, &quot;browser-search-engine-modified&quot;);</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+  },</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+  observe: function engineManager_observe(aEngine, aTopic, aVerb) {</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+    if (aTopic == &quot;browser-search-engine-modified&quot;) {</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineplus">+      aEngine.QueryInterface(Ci.nsISearchEngine);</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+      switch (aVerb) {</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+      case &quot;engine-added&quot;:</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+        gEngineView._engineStore.addEngine(aEngine);</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+        gEngineView.rowCountChanged(gEngineView.lastIndex, 1);</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+        break;</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+      case &quot;engine-changed&quot;:</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+        gEngineView._engineStore.reloadIcons();</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineplus">+        gEngineView.invalidate();</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineplus">+        break;</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineplus">+      case &quot;engine-removed&quot;:</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+      case &quot;engine-current&quot;:</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+        // Not relevant</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+        break;</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+      }</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+    }</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+  },</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineplus">+  onOK: function engineManager_onOK() {</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineplus">+    // Set the preference</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+    var newSuggestEnabled = document.getElementById(&quot;enableSuggest&quot;).checked;</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineplus">+    Services.prefs.setBoolPref(BROWSER_SUGGEST_PREF, newSuggestEnabled);</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineplus">+</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+    // Commit the changes</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+    gEngineView._engineStore.commit();</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+  },</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineplus">+  onRestoreDefaults: function engineManager_onRestoreDefaults() {</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+    var num = gEngineView._engineStore.restoreDefaultEngines();</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+    gEngineView.rowCountChanged(0, num);</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+    gEngineView.invalidate();</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineplus">+  },</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineplus">+  showRestoreDefaults: function engineManager_showRestoreDefaults(val) {</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineplus">+    document.documentElement.getButton(&quot;extra2&quot;).disabled = !val;</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineplus">+  },</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineplus">+</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineplus">+  loadAddEngines: function engineManager_loadAddEngines() {</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineplus">+    this.onOK();</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineplus">+    window.opener.BrowserSearch.loadAddEngines();</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineplus">+    window.close();</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineplus">+  },</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineplus">+</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineplus">+  remove: function engineManager_remove() {</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+    gEngineView._engineStore.removeEngine(gEngineView.selectedEngine);</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineplus">+    var index = gEngineView.selectedIndex;</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineplus">+    gEngineView.rowCountChanged(index, -1);</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+    gEngineView.invalidate();</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineplus">+    gEngineView.selection.select(Math.min(index, gEngineView.lastIndex));</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+    gEngineView.ensureRowIsVisible(gEngineView.currentIndex);</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineplus">+    document.getElementById(&quot;engineList&quot;).focus();</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+  },</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineplus">+</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineplus">+  /**</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineplus">+   * Moves the selected engine either up or down in the engine list</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineplus">+   * @param aDir</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineplus">+   *        -1 to move the selected engine down, +1 to move it up.</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineplus">+   */</span>
<a href="#l7.134"></a><span id="l7.134" class="difflineplus">+  bump: function engineManager_move(aDir) {</span>
<a href="#l7.135"></a><span id="l7.135" class="difflineplus">+    var selectedEngine = gEngineView.selectedEngine;</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineplus">+    var newIndex = gEngineView.selectedIndex - aDir;</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineplus">+</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineplus">+    gEngineView._engineStore.moveEngine(selectedEngine, newIndex);</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineplus">+</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineplus">+    gEngineView.invalidate();</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineplus">+    gEngineView.selection.select(newIndex);</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineplus">+    gEngineView.ensureRowIsVisible(newIndex);</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineplus">+    this.showRestoreDefaults(true);</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineplus">+    document.getElementById(&quot;engineList&quot;).focus();</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineplus">+  },</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineplus">+</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineplus">+  editKeyword: function engineManager_editKeyword() {</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineplus">+    var selectedEngine = gEngineView.selectedEngine;</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineplus">+    if (!selectedEngine)</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineplus">+      return;</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineplus">+</span>
<a href="#l7.152"></a><span id="l7.152" class="difflineplus">+    var alias = { value: selectedEngine.alias };</span>
<a href="#l7.153"></a><span id="l7.153" class="difflineplus">+    var strings = document.getElementById(&quot;engineManagerBundle&quot;);</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineplus">+    var title = strings.getString(&quot;editTitle&quot;);</span>
<a href="#l7.155"></a><span id="l7.155" class="difflineplus">+    var msg = strings.getFormattedString(&quot;editMsg&quot;, [selectedEngine.name]);</span>
<a href="#l7.156"></a><span id="l7.156" class="difflineplus">+</span>
<a href="#l7.157"></a><span id="l7.157" class="difflineplus">+    while (Services.prompt.prompt(window, title, msg, alias, null, {})) {</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineplus">+      var bduplicate = false;</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineplus">+      var eduplicate = false;</span>
<a href="#l7.160"></a><span id="l7.160" class="difflineplus">+      var dupName = &quot;&quot;;</span>
<a href="#l7.161"></a><span id="l7.161" class="difflineplus">+</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineplus">+      if (alias.value != &quot;&quot;) {</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineplus">+        try {</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineplus">+          let bmserv = Cc[&quot;@mozilla.org/browser/nav-bookmarks-service;1&quot;].</span>
<a href="#l7.165"></a><span id="l7.165" class="difflineplus">+                       getService(Ci.nsINavBookmarksService);</span>
<a href="#l7.166"></a><span id="l7.166" class="difflineplus">+          if (bmserv.getURIForKeyword(alias.value))</span>
<a href="#l7.167"></a><span id="l7.167" class="difflineplus">+            bduplicate = true;</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineplus">+        } catch(ex) {}</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+        // Check for duplicates in changes we haven't committed yet</span>
<a href="#l7.171"></a><span id="l7.171" class="difflineplus">+        let engines = gEngineView._engineStore.engines;</span>
<a href="#l7.172"></a><span id="l7.172" class="difflineplus">+        for each (let engine in engines) {</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineplus">+          if (engine.alias == alias.value &amp;&amp;</span>
<a href="#l7.174"></a><span id="l7.174" class="difflineplus">+              engine.name != selectedEngine.name) {</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineplus">+            eduplicate = true;</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineplus">+            dupName = engine.name;</span>
<a href="#l7.177"></a><span id="l7.177" class="difflineplus">+            break;</span>
<a href="#l7.178"></a><span id="l7.178" class="difflineplus">+          }</span>
<a href="#l7.179"></a><span id="l7.179" class="difflineplus">+        }</span>
<a href="#l7.180"></a><span id="l7.180" class="difflineplus">+      }</span>
<a href="#l7.181"></a><span id="l7.181" class="difflineplus">+</span>
<a href="#l7.182"></a><span id="l7.182" class="difflineplus">+      // Notify the user if they have chosen an existing engine/bookmark keyword</span>
<a href="#l7.183"></a><span id="l7.183" class="difflineplus">+      if (eduplicate || bduplicate) {</span>
<a href="#l7.184"></a><span id="l7.184" class="difflineplus">+        var dtitle = strings.getString(&quot;duplicateTitle&quot;);</span>
<a href="#l7.185"></a><span id="l7.185" class="difflineplus">+        var bmsg = strings.getString(&quot;duplicateBookmarkMsg&quot;);</span>
<a href="#l7.186"></a><span id="l7.186" class="difflineplus">+        var emsg = strings.getFormattedString(&quot;duplicateEngineMsg&quot;, [dupName]);</span>
<a href="#l7.187"></a><span id="l7.187" class="difflineplus">+</span>
<a href="#l7.188"></a><span id="l7.188" class="difflineplus">+        prompt.alert(window, dtitle, eduplicate ? emsg : bmsg);</span>
<a href="#l7.189"></a><span id="l7.189" class="difflineplus">+      } else {</span>
<a href="#l7.190"></a><span id="l7.190" class="difflineplus">+        gEngineView._engineStore.changeEngine(selectedEngine, &quot;alias&quot;,</span>
<a href="#l7.191"></a><span id="l7.191" class="difflineplus">+                                              alias.value);</span>
<a href="#l7.192"></a><span id="l7.192" class="difflineplus">+        gEngineView.invalidate();</span>
<a href="#l7.193"></a><span id="l7.193" class="difflineplus">+        break;</span>
<a href="#l7.194"></a><span id="l7.194" class="difflineplus">+      }</span>
<a href="#l7.195"></a><span id="l7.195" class="difflineplus">+    }</span>
<a href="#l7.196"></a><span id="l7.196" class="difflineplus">+  },</span>
<a href="#l7.197"></a><span id="l7.197" class="difflineplus">+</span>
<a href="#l7.198"></a><span id="l7.198" class="difflineplus">+  onSelect: function engineManager_onSelect() {</span>
<a href="#l7.199"></a><span id="l7.199" class="difflineplus">+    // Buttons only work if an engine is selected and it's not the last engine,</span>
<a href="#l7.200"></a><span id="l7.200" class="difflineplus">+    // the latter is true when the selected is first and last at the same time.</span>
<a href="#l7.201"></a><span id="l7.201" class="difflineplus">+    var lastSelected = (gEngineView.selectedIndex == gEngineView.lastIndex);</span>
<a href="#l7.202"></a><span id="l7.202" class="difflineplus">+    var firstSelected = (gEngineView.selectedIndex == 0);</span>
<a href="#l7.203"></a><span id="l7.203" class="difflineplus">+    var noSelection = (gEngineView.selectedIndex == -1);</span>
<a href="#l7.204"></a><span id="l7.204" class="difflineplus">+</span>
<a href="#l7.205"></a><span id="l7.205" class="difflineplus">+    document.getElementById(&quot;cmd_remove&quot;)</span>
<a href="#l7.206"></a><span id="l7.206" class="difflineplus">+            .setAttribute(&quot;disabled&quot;, noSelection ||</span>
<a href="#l7.207"></a><span id="l7.207" class="difflineplus">+                                      (firstSelected &amp;&amp; lastSelected));</span>
<a href="#l7.208"></a><span id="l7.208" class="difflineplus">+</span>
<a href="#l7.209"></a><span id="l7.209" class="difflineplus">+    document.getElementById(&quot;cmd_moveup&quot;)</span>
<a href="#l7.210"></a><span id="l7.210" class="difflineplus">+            .setAttribute(&quot;disabled&quot;, noSelection || firstSelected);</span>
<a href="#l7.211"></a><span id="l7.211" class="difflineplus">+</span>
<a href="#l7.212"></a><span id="l7.212" class="difflineplus">+    document.getElementById(&quot;cmd_movedown&quot;)</span>
<a href="#l7.213"></a><span id="l7.213" class="difflineplus">+            .setAttribute(&quot;disabled&quot;, noSelection || lastSelected);</span>
<a href="#l7.214"></a><span id="l7.214" class="difflineplus">+</span>
<a href="#l7.215"></a><span id="l7.215" class="difflineplus">+    document.getElementById(&quot;cmd_editkeyword&quot;)</span>
<a href="#l7.216"></a><span id="l7.216" class="difflineplus">+            .setAttribute(&quot;disabled&quot;, noSelection);</span>
<a href="#l7.217"></a><span id="l7.217" class="difflineplus">+  }</span>
<a href="#l7.218"></a><span id="l7.218" class="difflineplus">+};</span>
<a href="#l7.219"></a><span id="l7.219" class="difflineplus">+</span>
<a href="#l7.220"></a><span id="l7.220" class="difflineplus">+function onDragEngineStart(event) {</span>
<a href="#l7.221"></a><span id="l7.221" class="difflineplus">+  var selectedIndex = gEngineView.selectedIndex;</span>
<a href="#l7.222"></a><span id="l7.222" class="difflineplus">+  if (selectedIndex &gt;= 0) {</span>
<a href="#l7.223"></a><span id="l7.223" class="difflineplus">+    event.dataTransfer.setData(ENGINE_FLAVOR, selectedIndex.toString());</span>
<a href="#l7.224"></a><span id="l7.224" class="difflineplus">+    event.dataTransfer.effectAllowed = &quot;move&quot;;</span>
<a href="#l7.225"></a><span id="l7.225" class="difflineplus">+  }</span>
<a href="#l7.226"></a><span id="l7.226" class="difflineplus">+}</span>
<a href="#l7.227"></a><span id="l7.227" class="difflineplus">+</span>
<a href="#l7.228"></a><span id="l7.228" class="difflineplus">+// &quot;Operation&quot; objects</span>
<a href="#l7.229"></a><span id="l7.229" class="difflineplus">+function EngineMoveOp(aEngineClone, aNewIndex) {</span>
<a href="#l7.230"></a><span id="l7.230" class="difflineplus">+  if (!aEngineClone)</span>
<a href="#l7.231"></a><span id="l7.231" class="difflineplus">+    throw new Error(&quot;bad args to new EngineMoveOp!&quot;);</span>
<a href="#l7.232"></a><span id="l7.232" class="difflineplus">+  this._engine = aEngineClone.originalEngine;</span>
<a href="#l7.233"></a><span id="l7.233" class="difflineplus">+  this._newIndex = aNewIndex;</span>
<a href="#l7.234"></a><span id="l7.234" class="difflineplus">+}</span>
<a href="#l7.235"></a><span id="l7.235" class="difflineplus">+EngineMoveOp.prototype = {</span>
<a href="#l7.236"></a><span id="l7.236" class="difflineplus">+  _engine: null,</span>
<a href="#l7.237"></a><span id="l7.237" class="difflineplus">+  _newIndex: null,</span>
<a href="#l7.238"></a><span id="l7.238" class="difflineplus">+  commit: function EMO_commit() {</span>
<a href="#l7.239"></a><span id="l7.239" class="difflineplus">+    Services.search.moveEngine(this._engine, this._newIndex);</span>
<a href="#l7.240"></a><span id="l7.240" class="difflineplus">+  }</span>
<a href="#l7.241"></a><span id="l7.241" class="difflineplus">+}</span>
<a href="#l7.242"></a><span id="l7.242" class="difflineplus">+</span>
<a href="#l7.243"></a><span id="l7.243" class="difflineplus">+function EngineRemoveOp(aEngineClone) {</span>
<a href="#l7.244"></a><span id="l7.244" class="difflineplus">+  if (!aEngineClone)</span>
<a href="#l7.245"></a><span id="l7.245" class="difflineplus">+    throw new Error(&quot;bad args to new EngineRemoveOp!&quot;);</span>
<a href="#l7.246"></a><span id="l7.246" class="difflineplus">+  this._engine = aEngineClone.originalEngine;</span>
<a href="#l7.247"></a><span id="l7.247" class="difflineplus">+}</span>
<a href="#l7.248"></a><span id="l7.248" class="difflineplus">+EngineRemoveOp.prototype = {</span>
<a href="#l7.249"></a><span id="l7.249" class="difflineplus">+  _engine: null,</span>
<a href="#l7.250"></a><span id="l7.250" class="difflineplus">+  commit: function ERO_commit() {</span>
<a href="#l7.251"></a><span id="l7.251" class="difflineplus">+    Services.search.removeEngine(this._engine);</span>
<a href="#l7.252"></a><span id="l7.252" class="difflineplus">+  }</span>
<a href="#l7.253"></a><span id="l7.253" class="difflineplus">+}</span>
<a href="#l7.254"></a><span id="l7.254" class="difflineplus">+</span>
<a href="#l7.255"></a><span id="l7.255" class="difflineplus">+function EngineUnhideOp(aEngineClone, aNewIndex) {</span>
<a href="#l7.256"></a><span id="l7.256" class="difflineplus">+  if (!aEngineClone)</span>
<a href="#l7.257"></a><span id="l7.257" class="difflineplus">+    throw new Error(&quot;bad args to new EngineUnhideOp!&quot;);</span>
<a href="#l7.258"></a><span id="l7.258" class="difflineplus">+  this._engine = aEngineClone.originalEngine;</span>
<a href="#l7.259"></a><span id="l7.259" class="difflineplus">+  this._newIndex = aNewIndex;</span>
<a href="#l7.260"></a><span id="l7.260" class="difflineplus">+}</span>
<a href="#l7.261"></a><span id="l7.261" class="difflineplus">+EngineUnhideOp.prototype = {</span>
<a href="#l7.262"></a><span id="l7.262" class="difflineplus">+  _engine: null,</span>
<a href="#l7.263"></a><span id="l7.263" class="difflineplus">+  _newIndex: null,</span>
<a href="#l7.264"></a><span id="l7.264" class="difflineplus">+  commit: function EUO_commit() {</span>
<a href="#l7.265"></a><span id="l7.265" class="difflineplus">+    this._engine.hidden = false;</span>
<a href="#l7.266"></a><span id="l7.266" class="difflineplus">+    Services.search.moveEngine(this._engine, this._newIndex);</span>
<a href="#l7.267"></a><span id="l7.267" class="difflineplus">+  }</span>
<a href="#l7.268"></a><span id="l7.268" class="difflineplus">+}</span>
<a href="#l7.269"></a><span id="l7.269" class="difflineplus">+</span>
<a href="#l7.270"></a><span id="l7.270" class="difflineplus">+function EngineChangeOp(aEngineClone, aProp, aValue) {</span>
<a href="#l7.271"></a><span id="l7.271" class="difflineplus">+  if (!aEngineClone)</span>
<a href="#l7.272"></a><span id="l7.272" class="difflineplus">+    throw new Error(&quot;bad args to new EngineChangeOp!&quot;);</span>
<a href="#l7.273"></a><span id="l7.273" class="difflineplus">+</span>
<a href="#l7.274"></a><span id="l7.274" class="difflineplus">+  this._engine = aEngineClone.originalEngine;</span>
<a href="#l7.275"></a><span id="l7.275" class="difflineplus">+  this._prop = aProp;</span>
<a href="#l7.276"></a><span id="l7.276" class="difflineplus">+  this._newValue = aValue;</span>
<a href="#l7.277"></a><span id="l7.277" class="difflineplus">+}</span>
<a href="#l7.278"></a><span id="l7.278" class="difflineplus">+EngineChangeOp.prototype = {</span>
<a href="#l7.279"></a><span id="l7.279" class="difflineplus">+  _engine: null,</span>
<a href="#l7.280"></a><span id="l7.280" class="difflineplus">+  _prop: null,</span>
<a href="#l7.281"></a><span id="l7.281" class="difflineplus">+  _newValue: null,</span>
<a href="#l7.282"></a><span id="l7.282" class="difflineplus">+  commit: function ECO_commit() {</span>
<a href="#l7.283"></a><span id="l7.283" class="difflineplus">+    this._engine[this._prop] = this._newValue;</span>
<a href="#l7.284"></a><span id="l7.284" class="difflineplus">+  }</span>
<a href="#l7.285"></a><span id="l7.285" class="difflineplus">+}</span>
<a href="#l7.286"></a><span id="l7.286" class="difflineplus">+</span>
<a href="#l7.287"></a><span id="l7.287" class="difflineplus">+function EngineStore() {</span>
<a href="#l7.288"></a><span id="l7.288" class="difflineplus">+  this._engines = Services.search.getVisibleEngines().map(this._cloneEngine);</span>
<a href="#l7.289"></a><span id="l7.289" class="difflineplus">+  this._defaultEngines = Services.search.getDefaultEngines().map(this._cloneEngine);</span>
<a href="#l7.290"></a><span id="l7.290" class="difflineplus">+</span>
<a href="#l7.291"></a><span id="l7.291" class="difflineplus">+  this._ops = [];</span>
<a href="#l7.292"></a><span id="l7.292" class="difflineplus">+</span>
<a href="#l7.293"></a><span id="l7.293" class="difflineplus">+  // check if we need to disable the restore defaults button</span>
<a href="#l7.294"></a><span id="l7.294" class="difflineplus">+  var someHidden = this._defaultEngines.some(function (e) e.hidden);</span>
<a href="#l7.295"></a><span id="l7.295" class="difflineplus">+  gEngineManagerDialog.showRestoreDefaults(someHidden);</span>
<a href="#l7.296"></a><span id="l7.296" class="difflineplus">+}</span>
<a href="#l7.297"></a><span id="l7.297" class="difflineplus">+EngineStore.prototype = {</span>
<a href="#l7.298"></a><span id="l7.298" class="difflineplus">+  _engines: null,</span>
<a href="#l7.299"></a><span id="l7.299" class="difflineplus">+  _defaultEngines: null,</span>
<a href="#l7.300"></a><span id="l7.300" class="difflineplus">+  _ops: null,</span>
<a href="#l7.301"></a><span id="l7.301" class="difflineplus">+</span>
<a href="#l7.302"></a><span id="l7.302" class="difflineplus">+  get engines() {</span>
<a href="#l7.303"></a><span id="l7.303" class="difflineplus">+    return this._engines;</span>
<a href="#l7.304"></a><span id="l7.304" class="difflineplus">+  },</span>
<a href="#l7.305"></a><span id="l7.305" class="difflineplus">+  set engines(val) {</span>
<a href="#l7.306"></a><span id="l7.306" class="difflineplus">+    this._engines = val;</span>
<a href="#l7.307"></a><span id="l7.307" class="difflineplus">+    return val;</span>
<a href="#l7.308"></a><span id="l7.308" class="difflineplus">+  },</span>
<a href="#l7.309"></a><span id="l7.309" class="difflineplus">+</span>
<a href="#l7.310"></a><span id="l7.310" class="difflineplus">+  _getIndexForEngine: function ES_getIndexForEngine(aEngine) {</span>
<a href="#l7.311"></a><span id="l7.311" class="difflineplus">+    return this._engines.indexOf(aEngine);</span>
<a href="#l7.312"></a><span id="l7.312" class="difflineplus">+  },</span>
<a href="#l7.313"></a><span id="l7.313" class="difflineplus">+</span>
<a href="#l7.314"></a><span id="l7.314" class="difflineplus">+  _getEngineByName: function ES_getEngineByName(aName) {</span>
<a href="#l7.315"></a><span id="l7.315" class="difflineplus">+    for each (var engine in this._engines)</span>
<a href="#l7.316"></a><span id="l7.316" class="difflineplus">+      if (engine.name == aName)</span>
<a href="#l7.317"></a><span id="l7.317" class="difflineplus">+        return engine;</span>
<a href="#l7.318"></a><span id="l7.318" class="difflineplus">+</span>
<a href="#l7.319"></a><span id="l7.319" class="difflineplus">+    return null;</span>
<a href="#l7.320"></a><span id="l7.320" class="difflineplus">+  },</span>
<a href="#l7.321"></a><span id="l7.321" class="difflineplus">+</span>
<a href="#l7.322"></a><span id="l7.322" class="difflineplus">+  _cloneEngine: function ES_cloneEngine(aEngine) {</span>
<a href="#l7.323"></a><span id="l7.323" class="difflineplus">+    var clonedObj={};</span>
<a href="#l7.324"></a><span id="l7.324" class="difflineplus">+    for (var i in aEngine)</span>
<a href="#l7.325"></a><span id="l7.325" class="difflineplus">+      clonedObj[i] = aEngine[i];</span>
<a href="#l7.326"></a><span id="l7.326" class="difflineplus">+    clonedObj.originalEngine = aEngine;</span>
<a href="#l7.327"></a><span id="l7.327" class="difflineplus">+    return clonedObj;</span>
<a href="#l7.328"></a><span id="l7.328" class="difflineplus">+  },</span>
<a href="#l7.329"></a><span id="l7.329" class="difflineplus">+</span>
<a href="#l7.330"></a><span id="l7.330" class="difflineplus">+  // Callback for Array's some(). A thisObj must be passed to some()</span>
<a href="#l7.331"></a><span id="l7.331" class="difflineplus">+  _isSameEngine: function ES_isSameEngine(aEngineClone) {</span>
<a href="#l7.332"></a><span id="l7.332" class="difflineplus">+    return aEngineClone.originalEngine == this.originalEngine;</span>
<a href="#l7.333"></a><span id="l7.333" class="difflineplus">+  },</span>
<a href="#l7.334"></a><span id="l7.334" class="difflineplus">+</span>
<a href="#l7.335"></a><span id="l7.335" class="difflineplus">+  commit: function ES_commit() {</span>
<a href="#l7.336"></a><span id="l7.336" class="difflineplus">+    var currentEngine = this._cloneEngine(Services.search.currentEngine);</span>
<a href="#l7.337"></a><span id="l7.337" class="difflineplus">+    for (var i = 0; i &lt; this._ops.length; i++)</span>
<a href="#l7.338"></a><span id="l7.338" class="difflineplus">+      this._ops[i].commit();</span>
<a href="#l7.339"></a><span id="l7.339" class="difflineplus">+</span>
<a href="#l7.340"></a><span id="l7.340" class="difflineplus">+    // Restore currentEngine if it is a default engine that is still visible.</span>
<a href="#l7.341"></a><span id="l7.341" class="difflineplus">+    // Needed if the user deletes currentEngine and then restores it.</span>
<a href="#l7.342"></a><span id="l7.342" class="difflineplus">+    if (this._defaultEngines.some(this._isSameEngine, currentEngine) &amp;&amp;</span>
<a href="#l7.343"></a><span id="l7.343" class="difflineplus">+        !currentEngine.originalEngine.hidden)</span>
<a href="#l7.344"></a><span id="l7.344" class="difflineplus">+      Services.search.currentEngine = currentEngine.originalEngine;</span>
<a href="#l7.345"></a><span id="l7.345" class="difflineplus">+  },</span>
<a href="#l7.346"></a><span id="l7.346" class="difflineplus">+</span>
<a href="#l7.347"></a><span id="l7.347" class="difflineplus">+  addEngine: function ES_addEngine(aEngine) {</span>
<a href="#l7.348"></a><span id="l7.348" class="difflineplus">+    this._engines.push(this._cloneEngine(aEngine));</span>
<a href="#l7.349"></a><span id="l7.349" class="difflineplus">+  },</span>
<a href="#l7.350"></a><span id="l7.350" class="difflineplus">+</span>
<a href="#l7.351"></a><span id="l7.351" class="difflineplus">+  moveEngine: function ES_moveEngine(aEngine, aNewIndex) {</span>
<a href="#l7.352"></a><span id="l7.352" class="difflineplus">+    if (aNewIndex &lt; 0 || aNewIndex &gt; this._engines.length - 1)</span>
<a href="#l7.353"></a><span id="l7.353" class="difflineplus">+      throw new Error(&quot;ES_moveEngine: invalid aNewIndex!&quot;);</span>
<a href="#l7.354"></a><span id="l7.354" class="difflineplus">+    var index = this._getIndexForEngine(aEngine);</span>
<a href="#l7.355"></a><span id="l7.355" class="difflineplus">+    if (index == -1)</span>
<a href="#l7.356"></a><span id="l7.356" class="difflineplus">+      throw new Error(&quot;ES_moveEngine: invalid engine?&quot;);</span>
<a href="#l7.357"></a><span id="l7.357" class="difflineplus">+</span>
<a href="#l7.358"></a><span id="l7.358" class="difflineplus">+    if (index == aNewIndex)</span>
<a href="#l7.359"></a><span id="l7.359" class="difflineplus">+      return; // nothing to do</span>
<a href="#l7.360"></a><span id="l7.360" class="difflineplus">+</span>
<a href="#l7.361"></a><span id="l7.361" class="difflineplus">+    // Move the engine in our internal store</span>
<a href="#l7.362"></a><span id="l7.362" class="difflineplus">+    var removedEngine = this._engines.splice(index, 1)[0];</span>
<a href="#l7.363"></a><span id="l7.363" class="difflineplus">+    this._engines.splice(aNewIndex, 0, removedEngine);</span>
<a href="#l7.364"></a><span id="l7.364" class="difflineplus">+</span>
<a href="#l7.365"></a><span id="l7.365" class="difflineplus">+    this._ops.push(new EngineMoveOp(aEngine, aNewIndex));</span>
<a href="#l7.366"></a><span id="l7.366" class="difflineplus">+  },</span>
<a href="#l7.367"></a><span id="l7.367" class="difflineplus">+</span>
<a href="#l7.368"></a><span id="l7.368" class="difflineplus">+  removeEngine: function ES_removeEngine(aEngine) {</span>
<a href="#l7.369"></a><span id="l7.369" class="difflineplus">+    var index = this._getIndexForEngine(aEngine);</span>
<a href="#l7.370"></a><span id="l7.370" class="difflineplus">+    if (index == -1)</span>
<a href="#l7.371"></a><span id="l7.371" class="difflineplus">+      throw new Error(&quot;invalid engine?&quot;);</span>
<a href="#l7.372"></a><span id="l7.372" class="difflineplus">+</span>
<a href="#l7.373"></a><span id="l7.373" class="difflineplus">+    this._engines.splice(index, 1);</span>
<a href="#l7.374"></a><span id="l7.374" class="difflineplus">+    this._ops.push(new EngineRemoveOp(aEngine));</span>
<a href="#l7.375"></a><span id="l7.375" class="difflineplus">+    if (this._defaultEngines.some(this._isSameEngine, aEngine))</span>
<a href="#l7.376"></a><span id="l7.376" class="difflineplus">+      gEngineManagerDialog.showRestoreDefaults(true);</span>
<a href="#l7.377"></a><span id="l7.377" class="difflineplus">+  },</span>
<a href="#l7.378"></a><span id="l7.378" class="difflineplus">+</span>
<a href="#l7.379"></a><span id="l7.379" class="difflineplus">+  restoreDefaultEngines: function ES_restoreDefaultEngines() {</span>
<a href="#l7.380"></a><span id="l7.380" class="difflineplus">+    var added = 0;</span>
<a href="#l7.381"></a><span id="l7.381" class="difflineplus">+</span>
<a href="#l7.382"></a><span id="l7.382" class="difflineplus">+    for (var i = 0; i &lt; this._defaultEngines.length; ++i) {</span>
<a href="#l7.383"></a><span id="l7.383" class="difflineplus">+      var e = this._defaultEngines[i];</span>
<a href="#l7.384"></a><span id="l7.384" class="difflineplus">+</span>
<a href="#l7.385"></a><span id="l7.385" class="difflineplus">+      // If the engine is already in the list, just move it.</span>
<a href="#l7.386"></a><span id="l7.386" class="difflineplus">+      if (this._engines.some(this._isSameEngine, e)) {</span>
<a href="#l7.387"></a><span id="l7.387" class="difflineplus">+        this.moveEngine(this._getEngineByName(e.name), i);</span>
<a href="#l7.388"></a><span id="l7.388" class="difflineplus">+      } else {</span>
<a href="#l7.389"></a><span id="l7.389" class="difflineplus">+        // Otherwise, add it back to our internal store</span>
<a href="#l7.390"></a><span id="l7.390" class="difflineplus">+        this._engines.splice(i, 0, e);</span>
<a href="#l7.391"></a><span id="l7.391" class="difflineplus">+        this._ops.push(new EngineUnhideOp(e, i));</span>
<a href="#l7.392"></a><span id="l7.392" class="difflineplus">+        added++;</span>
<a href="#l7.393"></a><span id="l7.393" class="difflineplus">+      }</span>
<a href="#l7.394"></a><span id="l7.394" class="difflineplus">+    }</span>
<a href="#l7.395"></a><span id="l7.395" class="difflineplus">+    gEngineManagerDialog.showRestoreDefaults(false);</span>
<a href="#l7.396"></a><span id="l7.396" class="difflineplus">+    return added;</span>
<a href="#l7.397"></a><span id="l7.397" class="difflineplus">+  },</span>
<a href="#l7.398"></a><span id="l7.398" class="difflineplus">+</span>
<a href="#l7.399"></a><span id="l7.399" class="difflineplus">+  changeEngine: function ES_changeEngine(aEngine, aProp, aNewValue) {</span>
<a href="#l7.400"></a><span id="l7.400" class="difflineplus">+    var index = this._getIndexForEngine(aEngine);</span>
<a href="#l7.401"></a><span id="l7.401" class="difflineplus">+    if (index == -1)</span>
<a href="#l7.402"></a><span id="l7.402" class="difflineplus">+      throw new Error(&quot;invalid engine?&quot;);</span>
<a href="#l7.403"></a><span id="l7.403" class="difflineplus">+</span>
<a href="#l7.404"></a><span id="l7.404" class="difflineplus">+    this._engines[index][aProp] = aNewValue;</span>
<a href="#l7.405"></a><span id="l7.405" class="difflineplus">+    this._ops.push(new EngineChangeOp(aEngine, aProp, aNewValue));</span>
<a href="#l7.406"></a><span id="l7.406" class="difflineplus">+  },</span>
<a href="#l7.407"></a><span id="l7.407" class="difflineplus">+</span>
<a href="#l7.408"></a><span id="l7.408" class="difflineplus">+  reloadIcons: function ES_reloadIcons() {</span>
<a href="#l7.409"></a><span id="l7.409" class="difflineplus">+    this._engines.forEach(function (e) {</span>
<a href="#l7.410"></a><span id="l7.410" class="difflineplus">+      e.uri = e.originalEngine.uri;</span>
<a href="#l7.411"></a><span id="l7.411" class="difflineplus">+    });</span>
<a href="#l7.412"></a><span id="l7.412" class="difflineplus">+  }</span>
<a href="#l7.413"></a><span id="l7.413" class="difflineplus">+}</span>
<a href="#l7.414"></a><span id="l7.414" class="difflineplus">+</span>
<a href="#l7.415"></a><span id="l7.415" class="difflineplus">+function EngineView(aEngineStore) {</span>
<a href="#l7.416"></a><span id="l7.416" class="difflineplus">+  this._engineStore = aEngineStore;</span>
<a href="#l7.417"></a><span id="l7.417" class="difflineplus">+}</span>
<a href="#l7.418"></a><span id="l7.418" class="difflineplus">+EngineView.prototype = {</span>
<a href="#l7.419"></a><span id="l7.419" class="difflineplus">+  _engineStore: null,</span>
<a href="#l7.420"></a><span id="l7.420" class="difflineplus">+  tree: null,</span>
<a href="#l7.421"></a><span id="l7.421" class="difflineplus">+</span>
<a href="#l7.422"></a><span id="l7.422" class="difflineplus">+  get lastIndex() {</span>
<a href="#l7.423"></a><span id="l7.423" class="difflineplus">+    return this.rowCount - 1;</span>
<a href="#l7.424"></a><span id="l7.424" class="difflineplus">+  },</span>
<a href="#l7.425"></a><span id="l7.425" class="difflineplus">+  get selectedIndex() {</span>
<a href="#l7.426"></a><span id="l7.426" class="difflineplus">+    var seln = this.selection;</span>
<a href="#l7.427"></a><span id="l7.427" class="difflineplus">+    if (seln.getRangeCount() &gt; 0) {</span>
<a href="#l7.428"></a><span id="l7.428" class="difflineplus">+      var min = {};</span>
<a href="#l7.429"></a><span id="l7.429" class="difflineplus">+      seln.getRangeAt(0, min, {});</span>
<a href="#l7.430"></a><span id="l7.430" class="difflineplus">+      return min.value;</span>
<a href="#l7.431"></a><span id="l7.431" class="difflineplus">+    }</span>
<a href="#l7.432"></a><span id="l7.432" class="difflineplus">+    return -1;</span>
<a href="#l7.433"></a><span id="l7.433" class="difflineplus">+  },</span>
<a href="#l7.434"></a><span id="l7.434" class="difflineplus">+  get selectedEngine() {</span>
<a href="#l7.435"></a><span id="l7.435" class="difflineplus">+    return this._engineStore.engines[this.selectedIndex];</span>
<a href="#l7.436"></a><span id="l7.436" class="difflineplus">+  },</span>
<a href="#l7.437"></a><span id="l7.437" class="difflineplus">+</span>
<a href="#l7.438"></a><span id="l7.438" class="difflineplus">+  // Helpers</span>
<a href="#l7.439"></a><span id="l7.439" class="difflineplus">+  rowCountChanged: function (index, count) {</span>
<a href="#l7.440"></a><span id="l7.440" class="difflineplus">+    this.tree.rowCountChanged(index, count);</span>
<a href="#l7.441"></a><span id="l7.441" class="difflineplus">+  },</span>
<a href="#l7.442"></a><span id="l7.442" class="difflineplus">+</span>
<a href="#l7.443"></a><span id="l7.443" class="difflineplus">+  invalidate: function () {</span>
<a href="#l7.444"></a><span id="l7.444" class="difflineplus">+    this.tree.invalidate();</span>
<a href="#l7.445"></a><span id="l7.445" class="difflineplus">+  },</span>
<a href="#l7.446"></a><span id="l7.446" class="difflineplus">+</span>
<a href="#l7.447"></a><span id="l7.447" class="difflineplus">+  ensureRowIsVisible: function (index) {</span>
<a href="#l7.448"></a><span id="l7.448" class="difflineplus">+    this.tree.ensureRowIsVisible(index);</span>
<a href="#l7.449"></a><span id="l7.449" class="difflineplus">+  },</span>
<a href="#l7.450"></a><span id="l7.450" class="difflineplus">+</span>
<a href="#l7.451"></a><span id="l7.451" class="difflineplus">+  getSourceIndexFromDrag: function (dataTransfer) {</span>
<a href="#l7.452"></a><span id="l7.452" class="difflineplus">+    return parseInt(dataTransfer.getData(ENGINE_FLAVOR));</span>
<a href="#l7.453"></a><span id="l7.453" class="difflineplus">+  },</span>
<a href="#l7.454"></a><span id="l7.454" class="difflineplus">+</span>
<a href="#l7.455"></a><span id="l7.455" class="difflineplus">+  // nsITreeView</span>
<a href="#l7.456"></a><span id="l7.456" class="difflineplus">+  get rowCount() {</span>
<a href="#l7.457"></a><span id="l7.457" class="difflineplus">+    return this._engineStore.engines.length;</span>
<a href="#l7.458"></a><span id="l7.458" class="difflineplus">+  },</span>
<a href="#l7.459"></a><span id="l7.459" class="difflineplus">+</span>
<a href="#l7.460"></a><span id="l7.460" class="difflineplus">+  getImageSrc: function(index, column) {</span>
<a href="#l7.461"></a><span id="l7.461" class="difflineplus">+    if (column.id == &quot;engineName&quot; &amp;&amp; this._engineStore.engines[index].iconURI)</span>
<a href="#l7.462"></a><span id="l7.462" class="difflineplus">+      return this._engineStore.engines[index].iconURI.spec;</span>
<a href="#l7.463"></a><span id="l7.463" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l7.464"></a><span id="l7.464" class="difflineplus">+  },</span>
<a href="#l7.465"></a><span id="l7.465" class="difflineplus">+</span>
<a href="#l7.466"></a><span id="l7.466" class="difflineplus">+  getCellText: function(index, column) {</span>
<a href="#l7.467"></a><span id="l7.467" class="difflineplus">+    if (column.id == &quot;engineName&quot;)</span>
<a href="#l7.468"></a><span id="l7.468" class="difflineplus">+      return this._engineStore.engines[index].name;</span>
<a href="#l7.469"></a><span id="l7.469" class="difflineplus">+    else if (column.id == &quot;engineKeyword&quot;)</span>
<a href="#l7.470"></a><span id="l7.470" class="difflineplus">+      return this._engineStore.engines[index].alias;</span>
<a href="#l7.471"></a><span id="l7.471" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l7.472"></a><span id="l7.472" class="difflineplus">+  },</span>
<a href="#l7.473"></a><span id="l7.473" class="difflineplus">+</span>
<a href="#l7.474"></a><span id="l7.474" class="difflineplus">+  setTree: function(tree) {</span>
<a href="#l7.475"></a><span id="l7.475" class="difflineplus">+    this.tree = tree;</span>
<a href="#l7.476"></a><span id="l7.476" class="difflineplus">+  },</span>
<a href="#l7.477"></a><span id="l7.477" class="difflineplus">+</span>
<a href="#l7.478"></a><span id="l7.478" class="difflineplus">+  canDrop: function(targetIndex, orientation, dataTransfer) {</span>
<a href="#l7.479"></a><span id="l7.479" class="difflineplus">+    var sourceIndex = this.getSourceIndexFromDrag(dataTransfer);</span>
<a href="#l7.480"></a><span id="l7.480" class="difflineplus">+    return (sourceIndex != -1 &amp;&amp;</span>
<a href="#l7.481"></a><span id="l7.481" class="difflineplus">+            sourceIndex != targetIndex &amp;&amp;</span>
<a href="#l7.482"></a><span id="l7.482" class="difflineplus">+            sourceIndex != targetIndex + orientation);</span>
<a href="#l7.483"></a><span id="l7.483" class="difflineplus">+  },</span>
<a href="#l7.484"></a><span id="l7.484" class="difflineplus">+</span>
<a href="#l7.485"></a><span id="l7.485" class="difflineplus">+  drop: function(dropIndex, orientation, dataTransfer) {</span>
<a href="#l7.486"></a><span id="l7.486" class="difflineplus">+    var sourceIndex = this.getSourceIndexFromDrag(dataTransfer);</span>
<a href="#l7.487"></a><span id="l7.487" class="difflineplus">+    var sourceEngine = this._engineStore.engines[sourceIndex];</span>
<a href="#l7.488"></a><span id="l7.488" class="difflineplus">+</span>
<a href="#l7.489"></a><span id="l7.489" class="difflineplus">+    if (dropIndex &gt; sourceIndex) {</span>
<a href="#l7.490"></a><span id="l7.490" class="difflineplus">+      if (orientation == Ci.nsITreeView.DROP_BEFORE)</span>
<a href="#l7.491"></a><span id="l7.491" class="difflineplus">+        dropIndex--;</span>
<a href="#l7.492"></a><span id="l7.492" class="difflineplus">+    } else {</span>
<a href="#l7.493"></a><span id="l7.493" class="difflineplus">+      if (orientation == Ci.nsITreeView.DROP_AFTER)</span>
<a href="#l7.494"></a><span id="l7.494" class="difflineplus">+        dropIndex++;</span>
<a href="#l7.495"></a><span id="l7.495" class="difflineplus">+    }</span>
<a href="#l7.496"></a><span id="l7.496" class="difflineplus">+</span>
<a href="#l7.497"></a><span id="l7.497" class="difflineplus">+    this._engineStore.moveEngine(sourceEngine, dropIndex);</span>
<a href="#l7.498"></a><span id="l7.498" class="difflineplus">+    gEngineManagerDialog.showRestoreDefaults(true);</span>
<a href="#l7.499"></a><span id="l7.499" class="difflineplus">+</span>
<a href="#l7.500"></a><span id="l7.500" class="difflineplus">+    // Redraw, and adjust selection</span>
<a href="#l7.501"></a><span id="l7.501" class="difflineplus">+    this.invalidate();</span>
<a href="#l7.502"></a><span id="l7.502" class="difflineplus">+    this.selection.select(dropIndex);</span>
<a href="#l7.503"></a><span id="l7.503" class="difflineplus">+  },</span>
<a href="#l7.504"></a><span id="l7.504" class="difflineplus">+</span>
<a href="#l7.505"></a><span id="l7.505" class="difflineplus">+  selection: null,</span>
<a href="#l7.506"></a><span id="l7.506" class="difflineplus">+  getRowProperties: function(index, properties) { },</span>
<a href="#l7.507"></a><span id="l7.507" class="difflineplus">+  getCellProperties: function(index, column, properties) { },</span>
<a href="#l7.508"></a><span id="l7.508" class="difflineplus">+  getColumnProperties: function(column, properties) { },</span>
<a href="#l7.509"></a><span id="l7.509" class="difflineplus">+  isContainer: function(index) { return false; },</span>
<a href="#l7.510"></a><span id="l7.510" class="difflineplus">+  isContainerOpen: function(index) { return false; },</span>
<a href="#l7.511"></a><span id="l7.511" class="difflineplus">+  isContainerEmpty: function(index) { return false; },</span>
<a href="#l7.512"></a><span id="l7.512" class="difflineplus">+  isSeparator: function(index) { return false; },</span>
<a href="#l7.513"></a><span id="l7.513" class="difflineplus">+  isSorted: function(index) { return false; },</span>
<a href="#l7.514"></a><span id="l7.514" class="difflineplus">+  getParentIndex: function(index) { return -1; },</span>
<a href="#l7.515"></a><span id="l7.515" class="difflineplus">+  hasNextSibling: function(parentIndex, index) { return false; },</span>
<a href="#l7.516"></a><span id="l7.516" class="difflineplus">+  getLevel: function(index) { return 0; },</span>
<a href="#l7.517"></a><span id="l7.517" class="difflineplus">+  getProgressMode: function(index, column) { },</span>
<a href="#l7.518"></a><span id="l7.518" class="difflineplus">+  getCellValue: function(index, column) { },</span>
<a href="#l7.519"></a><span id="l7.519" class="difflineplus">+  toggleOpenState: function(index) { },</span>
<a href="#l7.520"></a><span id="l7.520" class="difflineplus">+  cycleHeader: function(column) { },</span>
<a href="#l7.521"></a><span id="l7.521" class="difflineplus">+  selectionChanged: function() { },</span>
<a href="#l7.522"></a><span id="l7.522" class="difflineplus">+  cycleCell: function(row, column) { },</span>
<a href="#l7.523"></a><span id="l7.523" class="difflineplus">+  isEditable: function(index, column) { return false; },</span>
<a href="#l7.524"></a><span id="l7.524" class="difflineplus">+  isSelectable: function(index, column) { return false; },</span>
<a href="#l7.525"></a><span id="l7.525" class="difflineplus">+  setCellValue: function(index, column, value) { },</span>
<a href="#l7.526"></a><span id="l7.526" class="difflineplus">+  setCellText: function(index, column, value) { },</span>
<a href="#l7.527"></a><span id="l7.527" class="difflineplus">+  performAction: function(action) { },</span>
<a href="#l7.528"></a><span id="l7.528" class="difflineplus">+  performActionOnRow: function(action, index) { },</span>
<a href="#l7.529"></a><span id="l7.529" class="difflineplus">+  performActionOnCell: function(action, index, column) { }</span>
<a href="#l7.530"></a><span id="l7.530" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/suite/common/search/engineManager.xul</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,127 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+   - Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineplus">+   -</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineplus">+   - The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineplus">+   - 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+   - the License. You may obtain a copy of the License at</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+   - http://www.mozilla.org/MPL/</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+   -</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+   - Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+   - for the specific language governing rights and limitations under the</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+   - License.</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+   -</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+   - The Original Code is the Browser Search Service.</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+   -</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+   - The Initial Developer of the Original Code is</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+   - Google Inc.</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+   - Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineplus">+   - the Initial Developer. All Rights Reserved.</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+   -</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+   - Contributor(s):</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+   -   Ben Goodger &lt;beng@google.com&gt;</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+   -   Gavin Sharp &lt;gavin@gavinsharp.com&gt;</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+   -</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+   - Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+   - either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+   - the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+   - in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+   - of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+   - under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+   - use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+   - decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+   - and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+   - the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+   - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+   -</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+   - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot;?&gt;</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://communicator/skin/search/engineManager.css&quot;?&gt;</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+&lt;!DOCTYPE dialog SYSTEM &quot;chrome://communicator/locale/search/engineManager.dtd&quot;&gt;</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+&lt;dialog id=&quot;engineManager&quot;</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+        xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+        buttons=&quot;accept,cancel,extra2&quot;</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+        buttonlabelextra2=&quot;&amp;restoreDefaults.label;&quot;</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+        buttonaccesskeyextra2=&quot;&amp;restoreDefaults.accesskey;&quot;</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+        onload=&quot;gEngineManagerDialog.init();&quot;</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+        onunload=&quot;gEngineManagerDialog.destroy();&quot;</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+        ondialogaccept=&quot;gEngineManagerDialog.onOK();&quot;</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+        ondialogextra2=&quot;gEngineManagerDialog.onRestoreDefaults();&quot;</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+        title=&quot;&amp;engineManager.title;&quot;</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+        style=&quot;&amp;engineManager.style;&quot;</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+        persist=&quot;screenX screenY width height&quot;</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+        windowtype=&quot;Browser:SearchManager&quot;&gt;</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+          src=&quot;chrome://communicator/content/search/engineManager.js&quot;/&gt;</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+  &lt;commandset id=&quot;engineManagerCommandSet&quot;&gt;</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+    &lt;command id=&quot;cmd_remove&quot;</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+             oncommand=&quot;gEngineManagerDialog.remove();&quot;</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+             disabled=&quot;true&quot;/&gt;</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+    &lt;command id=&quot;cmd_moveup&quot;</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+             oncommand=&quot;gEngineManagerDialog.bump(1);&quot;</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+             disabled=&quot;true&quot;/&gt;</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+    &lt;command id=&quot;cmd_movedown&quot;</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+             oncommand=&quot;gEngineManagerDialog.bump(-1);&quot;</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+             disabled=&quot;true&quot;/&gt;</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+    &lt;command id=&quot;cmd_editkeyword&quot;</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+             oncommand=&quot;gEngineManagerDialog.editKeyword();&quot;</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+             disabled=&quot;true&quot;/&gt;</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+  &lt;/commandset&gt;</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+  &lt;keyset id=&quot;engineManagerKeyset&quot;&gt;</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+    &lt;key id=&quot;delete&quot; keycode=&quot;VK_DELETE&quot; command=&quot;cmd_remove&quot;/&gt;</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+  &lt;/keyset&gt;</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+  &lt;stringbundleset id=&quot;engineManagerBundleset&quot;&gt;</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+    &lt;stringbundle id=&quot;engineManagerBundle&quot; src=&quot;chrome://communicator/locale/search/engineManager.properties&quot;/&gt;</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+  &lt;/stringbundleset&gt;</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineplus">+</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineplus">+  &lt;description&gt;&amp;engineManager.intro;&lt;/description&gt;</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineplus">+  &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineplus">+  &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineplus">+    &lt;tree id=&quot;engineList&quot; flex=&quot;1&quot; rows=&quot;10&quot; hidecolumnpicker=&quot;true&quot;</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineplus">+          seltype=&quot;single&quot; onselect=&quot;gEngineManagerDialog.onSelect();&quot;&gt;</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineplus">+      &lt;treechildren id=&quot;engineChildren&quot; flex=&quot;1&quot;</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineplus">+                    ondragstart=&quot;onDragEngineStart(event);&quot;/&gt;</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineplus">+      &lt;treecols&gt;</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+        &lt;treecol id=&quot;engineName&quot; flex=&quot;4&quot; label=&quot;&amp;columnLabel.name;&quot;/&gt;</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+        &lt;treecol id=&quot;engineKeyword&quot; flex=&quot;1&quot; label=&quot;&amp;columnLabel.keyword;&quot;/&gt;</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+      &lt;/treecols&gt;</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+    &lt;/tree&gt;</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+    &lt;vbox&gt;</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineplus">+      &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineplus">+      &lt;button id=&quot;edit&quot;</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineplus">+              label=&quot;&amp;edit.label;&quot;</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineplus">+              accesskey=&quot;&amp;edit.accesskey;&quot;</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineplus">+              command=&quot;cmd_editkeyword&quot;/&gt;</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineplus">+      &lt;button id=&quot;up&quot;</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineplus">+              label=&quot;&amp;up.label;&quot;</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineplus">+              accesskey=&quot;&amp;up.accesskey;&quot;</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+              command=&quot;cmd_moveup&quot;/&gt;</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineplus">+      &lt;button id=&quot;down&quot;</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineplus">+              label=&quot;&amp;dn.label;&quot;</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineplus">+              accesskey=&quot;&amp;dn.accesskey;&quot;</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineplus">+              command=&quot;cmd_movedown&quot;/&gt;</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineplus">+      &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineplus">+      &lt;button id=&quot;remove&quot;</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineplus">+              label=&quot;&amp;remove.label;&quot;</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineplus">+              accesskey=&quot;&amp;remove.accesskey;&quot;</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineplus">+              command=&quot;cmd_remove&quot;/&gt;</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineplus">+    &lt;/vbox&gt;</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineplus">+  &lt;/hbox&gt;</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineplus">+  &lt;hbox&gt;</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineplus">+    &lt;checkbox id=&quot;enableSuggest&quot;</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineplus">+              label=&quot;&amp;enableSuggest.label;&quot;</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineplus">+              accesskey=&quot;&amp;enableSuggest.accesskey;&quot;/&gt;</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineplus">+  &lt;/hbox&gt;</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineplus">+  &lt;hbox&gt;</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineplus">+    &lt;label id=&quot;addEngines&quot; class=&quot;text-link&quot; value=&quot;&amp;addEngine.label;&quot;</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineplus">+           onclick=&quot;if (event.button == 0) { gEngineManagerDialog.loadAddEngines(); }&quot;/&gt;</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineplus">+  &lt;/hbox&gt;</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineplus">+&lt;/dialog&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- /dev/null</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ b/suite/common/search/search.xml</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -0,0 +1,747 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineplus">+   - Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineplus">+   -</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineplus">+   - The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+   - 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+   - the License. You may obtain a copy of the License at</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+   - http://www.mozilla.org/MPL/</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+   -</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+   - Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+   - for the specific language governing rights and limitations under the</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+   - License.</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+   -</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+   - The Original Code is mozilla.org browser.</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+   -</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+   - The Initial Developer of the Original Code is</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+   - Joe Hewitt.</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+   - Portions created by the Initial Developer are Copyright (C) 2003</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+   - the Initial Developer. All Rights Reserved.</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+   -</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+   - Contributor(s):</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+   -   Pierre Chanial (v2) &lt;p_ch@verizon.net&gt;</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+   -   Gavin Sharp (v3) &lt;gavin@gavinsharp.com&gt;</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+   -   Ben Goodger &lt;beng@google.com&gt;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+   -   Pamela Greene &lt;pamg.bugs@gmail.com&gt;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+   -   Michael Ventnor &lt;m.ventnor@gmail.com&gt;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+   -   Ehsan Akhgari &lt;ehsan.akhgari@gmail.com&gt;</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+   -</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+   - Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+   - either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+   - the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+   - in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+   - of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+   - under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+   - use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineplus">+   - decision by deleting the provisions above and replace them with the notice</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+   - and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+   - the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+   - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+   -</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+   - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineplus">+</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+&lt;!DOCTYPE bindings [</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineplus">+&lt;!ENTITY % searchBarDTD SYSTEM &quot;chrome://communicator/locale/search/searchbar.dtd&quot;&gt;</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineplus">+%searchBarDTD;</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+&lt;!ENTITY % navigatorDTD SYSTEM &quot;chrome://navigator/locale/navigator.dtd&quot;&gt;</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+%navigatorDTD;</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+]&gt;</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineplus">+&lt;bindings id=&quot;SearchBindings&quot;</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+          xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineplus">+          xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+          xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineplus">+</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineplus">+  &lt;binding id=&quot;searchbar&quot;&gt;</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineplus">+    &lt;resources&gt;</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineplus">+      &lt;stylesheet src=&quot;chrome://communicator/content/search/searchbarBindings.css&quot;/&gt;</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineplus">+      &lt;stylesheet src=&quot;chrome://communicator/skin/search/searchbar.css&quot;/&gt;</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineplus">+    &lt;/resources&gt;</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineplus">+      &lt;xul:stringbundle src=&quot;chrome://communicator/locale/search/search.properties&quot;</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineplus">+                        anonid=&quot;searchbar-stringbundle&quot;/&gt;</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineplus">+</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineplus">+      &lt;xul:textbox class=&quot;searchbar-textbox&quot;</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+                   anonid=&quot;searchbar-textbox&quot;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+                   type=&quot;autocomplete&quot;</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+                   flex=&quot;1&quot;</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+                   autocompletepopup=&quot;PopupAutoComplete&quot;</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+                   autocompletesearch=&quot;search-autocomplete&quot;</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+                   autocompletesearchparam=&quot;searchbar-history&quot;</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+                   timeout=&quot;250&quot;</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+                   maxrows=&quot;10&quot;</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+                   completeselectedindex=&quot;true&quot;</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+                   showcommentcolumn=&quot;true&quot;</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+                   tabscrolling=&quot;true&quot;</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+                   xbl:inherits=&quot;disabled,disableautocomplete,searchengine,src,newlines&quot;&gt;</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+        &lt;xul:box&gt;</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+          &lt;xul:button class=&quot;plain searchbar-engine-button&quot;</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+                      type=&quot;menu&quot;</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+                      anonid=&quot;searchbar-engine-button&quot;&gt;</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+            &lt;xul:image class=&quot;searchbar-engine-image&quot; xbl:inherits=&quot;src&quot;/&gt;</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+            &lt;xul:image class=&quot;searchbar-dropmarker-image&quot;/&gt;</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+            &lt;xul:menupopup class=&quot;searchbar-popup&quot;</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+                           anonid=&quot;searchbar-popup&quot;&gt;</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+              &lt;xul:menuseparator/&gt;</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+              &lt;xul:menuitem class=&quot;open-engine-manager&quot;</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+                            anonid=&quot;open-engine-manager&quot;</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+                            label=&quot;&amp;cmd_engineManager.label;&quot;</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+                            oncommand=&quot;openManager(event);&quot;/&gt;</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+            &lt;/xul:menupopup&gt;</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+          &lt;/xul:button&gt;</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+        &lt;/xul:box&gt;</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+        &lt;xul:hbox class=&quot;search-go-container&quot;&gt;</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineplus">+          &lt;xul:image class=&quot;search-go-button&quot;</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineplus">+                     anonid=&quot;search-go-button&quot;</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineplus">+                     onclick=&quot;handleSearchCommand(event);&quot;</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineplus">+                     tooltiptext=&quot;&amp;searchEndCap.label;&quot;/&gt;</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineplus">+      &lt;/xul:textbox&gt;</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineplus">+</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineplus">+    &lt;implementation implements=&quot;nsIObserver&quot;&gt;</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+      &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+        if (this.parentNode.parentNode.localName == &quot;toolbarpaletteitem&quot;)</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+          return;</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+        setTimeout(function (a) { a.init(); }, 0, this);</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineplus">+      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineplus">+</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineplus">+      &lt;method name=&quot;init&quot;&gt;</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineplus">+          // Make sure we rebuild the popup in onpopupshowing</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineplus">+          this._needToBuildPopup = true;</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineplus">+</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineplus">+          // Refresh the display (updating icon, etc)</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineplus">+          this.updateDisplay();</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineplus">+</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineplus">+          var os =</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineplus">+               Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineplus">+                         .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineplus">+          os.addObserver(this, &quot;browser-search-engine-modified&quot;, false);</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineplus">+</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineplus">+          this._addedObserver = true;</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineplus">+</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineplus">+      &lt;destructor&gt;&lt;![CDATA[</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineplus">+        if (this._addedObserver) {</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineplus">+          var os = Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineplus">+                             .getService(Components.interfaces.nsIObserverService);</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineplus">+          os.removeObserver(this, &quot;browser-search-engine-modified&quot;);</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineplus">+        }</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineplus">+</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineplus">+        // Make sure to break the cycle from _texbox to us. Otherwise we leak</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineplus">+        // the world. But make sure it's actually pointing to us.</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineplus">+        if (this._textbox.mController.input == this)</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineplus">+          this._textbox.mController.input = null;</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineplus">+      ]]&gt;&lt;/destructor&gt;</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineplus">+</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineplus">+      &lt;field name=&quot;_stringBundle&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineplus">+          &quot;anonid&quot;, &quot;searchbar-stringbundle&quot;);&lt;/field&gt;</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineplus">+      &lt;field name=&quot;_textbox&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineplus">+          &quot;anonid&quot;, &quot;searchbar-textbox&quot;);&lt;/field&gt;</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineplus">+      &lt;field name=&quot;_popup&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineplus">+          &quot;anonid&quot;, &quot;searchbar-popup&quot;);&lt;/field&gt;</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineplus">+      &lt;field name=&quot;searchButton&quot;&gt;document.getAnonymousElementByAttribute(this,</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineplus">+          &quot;anonid&quot;, &quot;searchbar-engine-button&quot;);&lt;/field&gt;</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineplus">+      &lt;field name=&quot;_searchService&quot;&gt;</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineplus">+        Components.classes[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineplus">+                  .getService(Components.interfaces.nsIBrowserSearchService);</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineplus">+      &lt;field name=&quot;_engines&quot;&gt;null&lt;/field&gt;</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineplus">+</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineplus">+      &lt;property name=&quot;engines&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineplus">+        &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineplus">+          if (!this._engines)</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineplus">+            this._engines = this.searchService.getVisibleEngines();</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineplus">+          return this._engines;</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineplus">+        ]]&gt;&lt;/getter&gt;</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineplus">+</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineplus">+      &lt;property name=&quot;currentEngine&quot;</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineplus">+                onset=&quot;this.searchService.currentEngine = val; return val;&quot;&gt;</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineplus">+        &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineplus">+          var currentEngine = this.searchService.currentEngine;</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineplus">+          // Return a dummy engine if there is no currentEngine</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineplus">+          return currentEngine || {name: &quot;&quot;, uri: null};</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineplus">+        ]]&gt;&lt;/getter&gt;</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineplus">+</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineplus">+      &lt;!-- textbox is used by sanitize.js to clear the undo history when</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineplus">+           clearing form information. --&gt;</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineplus">+      &lt;property name=&quot;textbox&quot; readonly=&quot;true&quot;</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineplus">+                onget=&quot;return this._textbox;&quot;/&gt;</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineplus">+</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineplus">+      &lt;property name=&quot;searchService&quot; readonly=&quot;true&quot;</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineplus">+                onget=&quot;return this._searchService;&quot;/&gt;</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineplus">+</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineplus">+      &lt;property name=&quot;value&quot; onget=&quot;return this._textbox.value;&quot;</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineplus">+                             onset=&quot;return this._textbox.value = val;&quot;/&gt;</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineplus">+</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineplus">+      &lt;method name=&quot;focus&quot;&gt;</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.188"></a><span id="l9.188" class="difflineplus">+          this._textbox.focus();</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.191"></a><span id="l9.191" class="difflineplus">+</span>
<a href="#l9.192"></a><span id="l9.192" class="difflineplus">+      &lt;method name=&quot;select&quot;&gt;</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineplus">+          this._textbox.select();</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineplus">+</span>
<a href="#l9.198"></a><span id="l9.198" class="difflineplus">+      &lt;method name=&quot;observe&quot;&gt;</span>
<a href="#l9.199"></a><span id="l9.199" class="difflineplus">+        &lt;parameter name=&quot;aEngine&quot;/&gt;</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineplus">+        &lt;parameter name=&quot;aTopic&quot;/&gt;</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineplus">+        &lt;parameter name=&quot;aVerb&quot;/&gt;</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.203"></a><span id="l9.203" class="difflineplus">+          if (aTopic == &quot;browser-search-engine-modified&quot;) {</span>
<a href="#l9.204"></a><span id="l9.204" class="difflineplus">+            switch (aVerb) {</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineplus">+            case &quot;engine-removed&quot;:</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineplus">+              this.offerNewEngine(aEngine);</span>
<a href="#l9.207"></a><span id="l9.207" class="difflineplus">+              break;</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineplus">+            case &quot;engine-added&quot;:</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineplus">+              this.hideNewEngine(aEngine);</span>
<a href="#l9.210"></a><span id="l9.210" class="difflineplus">+              break;</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineplus">+            case &quot;engine-current&quot;:</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineplus">+              // The current engine was changed.  Rebuilding the menu appears to</span>
<a href="#l9.213"></a><span id="l9.213" class="difflineplus">+              // confuse its idea of whether it should be open when it's just</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineplus">+              // been clicked, so we force it to close now.</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineplus">+              this._popup.hidePopup();</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineplus">+              break;</span>
<a href="#l9.217"></a><span id="l9.217" class="difflineplus">+            case &quot;engine-changed&quot;:</span>
<a href="#l9.218"></a><span id="l9.218" class="difflineplus">+              // An engine was removed (or hidden) or added, or an icon was</span>
<a href="#l9.219"></a><span id="l9.219" class="difflineplus">+              // changed.  Do nothing special.</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineplus">+            }</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineplus">+</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineplus">+            // Make sure the engine list is refetched next time it's needed</span>
<a href="#l9.223"></a><span id="l9.223" class="difflineplus">+            this._engines = null;</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineplus">+</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineplus">+            // Rebuild the popup and update the display after any modification.</span>
<a href="#l9.226"></a><span id="l9.226" class="difflineplus">+            this.rebuildPopup();</span>
<a href="#l9.227"></a><span id="l9.227" class="difflineplus">+            this.updateDisplay();</span>
<a href="#l9.228"></a><span id="l9.228" class="difflineplus">+          }</span>
<a href="#l9.229"></a><span id="l9.229" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineplus">+</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineplus">+      &lt;!-- There are two seaprate lists of search engines, whose uses intersect</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineplus">+      in this file.  The search service (nsIBrowserSearchService and</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineplus">+      nsSearchService.js) maintains a list of Engine objects which is used to</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineplus">+      populate the searchbox list of available engines and to perform queries.</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineplus">+      That list is accessed here via this.SearchService, and it's that sort of</span>
<a href="#l9.237"></a><span id="l9.237" class="difflineplus">+      Engine that is passed to this binding's observer as aEngine.</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineplus">+</span>
<a href="#l9.239"></a><span id="l9.239" class="difflineplus">+      In addition, browser.js fills two lists of autodetected search engines</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineplus">+      (browser.engines and browser.hiddenEngines) as properties of</span>
<a href="#l9.241"></a><span id="l9.241" class="difflineplus">+      mCurrentBrowser.  Those lists contain unnamed JS objects of the form</span>
<a href="#l9.242"></a><span id="l9.242" class="difflineplus">+      { uri:, title:, icon: }, and that's what the searchbar uses to determine</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineplus">+      whether to show any &quot;Add &lt;EngineName&gt;&quot; menu items in the drop-down.</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineplus">+</span>
<a href="#l9.245"></a><span id="l9.245" class="difflineplus">+      The two types of engines are currently related by their identifying</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineplus">+      titles (the Engine object's 'name'), although that may change; see bug</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineplus">+      335102.  --&gt;</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineplus">+</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineplus">+      &lt;!-- If the engine that was just removed from the searchbox list was</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineplus">+      autodetected on this page, move it to each browser's active list so it</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineplus">+      will be offered to be added again. --&gt;</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineplus">+      &lt;method name=&quot;offerNewEngine&quot;&gt;</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineplus">+        &lt;parameter name=&quot;aEngine&quot;/&gt;</span>
<a href="#l9.254"></a><span id="l9.254" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.255"></a><span id="l9.255" class="difflineplus">+          var allbrowsers = getBrowser().mPanelContainer.childNodes;</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineplus">+          for (var tab = 0; tab &lt; allbrowsers.length; tab++) {</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineplus">+            var browser = getBrowser().getBrowserAtIndex(tab);</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineplus">+            if (browser.hiddenEngines) {</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineplus">+              // XXX This will need to be changed when engines are identified by</span>
<a href="#l9.260"></a><span id="l9.260" class="difflineplus">+              // URL rather than title; see bug 335102.</span>
<a href="#l9.261"></a><span id="l9.261" class="difflineplus">+              var removeTitle = aEngine.wrappedJSObject.name;</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineplus">+              for (var i = 0; i &lt; browser.hiddenEngines.length; i++) {</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineplus">+                if (browser.hiddenEngines[i].title == removeTitle) {</span>
<a href="#l9.264"></a><span id="l9.264" class="difflineplus">+                  if (!browser.engines)</span>
<a href="#l9.265"></a><span id="l9.265" class="difflineplus">+                    browser.engines = [];</span>
<a href="#l9.266"></a><span id="l9.266" class="difflineplus">+                  browser.engines.push(browser.hiddenEngines[i]);</span>
<a href="#l9.267"></a><span id="l9.267" class="difflineplus">+                  browser.hiddenEngines.splice(i, 1);</span>
<a href="#l9.268"></a><span id="l9.268" class="difflineplus">+                  break;</span>
<a href="#l9.269"></a><span id="l9.269" class="difflineplus">+                }</span>
<a href="#l9.270"></a><span id="l9.270" class="difflineplus">+              }</span>
<a href="#l9.271"></a><span id="l9.271" class="difflineplus">+            }</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineplus">+          }</span>
<a href="#l9.273"></a><span id="l9.273" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.274"></a><span id="l9.274" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.275"></a><span id="l9.275" class="difflineplus">+</span>
<a href="#l9.276"></a><span id="l9.276" class="difflineplus">+      &lt;!-- If the engine that was just added to the searchbox list was</span>
<a href="#l9.277"></a><span id="l9.277" class="difflineplus">+      autodetected on this page, move it to each browser's hidden list so it is</span>
<a href="#l9.278"></a><span id="l9.278" class="difflineplus">+      no longer offered to be added. --&gt;</span>
<a href="#l9.279"></a><span id="l9.279" class="difflineplus">+      &lt;method name=&quot;hideNewEngine&quot;&gt;</span>
<a href="#l9.280"></a><span id="l9.280" class="difflineplus">+        &lt;parameter name=&quot;aEngine&quot;/&gt;</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineplus">+          var allbrowsers = getBrowser().mPanelContainer.childNodes;</span>
<a href="#l9.283"></a><span id="l9.283" class="difflineplus">+          for (var tab = 0; tab &lt; allbrowsers.length; tab++) {</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineplus">+            var browser = getBrowser().getBrowserAtIndex(tab);</span>
<a href="#l9.285"></a><span id="l9.285" class="difflineplus">+            if (browser.engines) {</span>
<a href="#l9.286"></a><span id="l9.286" class="difflineplus">+              // XXX This will need to be changed when engines are identified by</span>
<a href="#l9.287"></a><span id="l9.287" class="difflineplus">+              // URL rather than title; see bug 335102.</span>
<a href="#l9.288"></a><span id="l9.288" class="difflineplus">+              var removeTitle = aEngine.wrappedJSObject.name;</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineplus">+              for (var i = 0; i &lt; browser.engines.length; i++) {</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineplus">+                if (browser.engines[i].title == removeTitle) {</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineplus">+                  if (!browser.hiddenEngines)</span>
<a href="#l9.292"></a><span id="l9.292" class="difflineplus">+                    browser.hiddenEngines = [];</span>
<a href="#l9.293"></a><span id="l9.293" class="difflineplus">+                  browser.hiddenEngines.push(browser.engines[i]);</span>
<a href="#l9.294"></a><span id="l9.294" class="difflineplus">+                  browser.engines.splice(i, 1);</span>
<a href="#l9.295"></a><span id="l9.295" class="difflineplus">+                  break;</span>
<a href="#l9.296"></a><span id="l9.296" class="difflineplus">+                }</span>
<a href="#l9.297"></a><span id="l9.297" class="difflineplus">+              }</span>
<a href="#l9.298"></a><span id="l9.298" class="difflineplus">+            }</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineplus">+          }</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.301"></a><span id="l9.301" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.302"></a><span id="l9.302" class="difflineplus">+</span>
<a href="#l9.303"></a><span id="l9.303" class="difflineplus">+      &lt;method name=&quot;updateDisplay&quot;&gt;</span>
<a href="#l9.304"></a><span id="l9.304" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.305"></a><span id="l9.305" class="difflineplus">+          var uri = this.currentEngine.iconURI;</span>
<a href="#l9.306"></a><span id="l9.306" class="difflineplus">+          this.setAttribute(&quot;src&quot;, uri ? uri.spec : &quot;&quot;);</span>
<a href="#l9.307"></a><span id="l9.307" class="difflineplus">+</span>
<a href="#l9.308"></a><span id="l9.308" class="difflineplus">+          var name = this.currentEngine.name;</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineplus">+          var text = this._stringBundle.getFormattedString(&quot;searchtip&quot;, [name]);</span>
<a href="#l9.310"></a><span id="l9.310" class="difflineplus">+          this._textbox.placeholder = name;</span>
<a href="#l9.311"></a><span id="l9.311" class="difflineplus">+          this._textbox.tooltipText = text;</span>
<a href="#l9.312"></a><span id="l9.312" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.313"></a><span id="l9.313" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.314"></a><span id="l9.314" class="difflineplus">+</span>
<a href="#l9.315"></a><span id="l9.315" class="difflineplus">+      &lt;!-- Rebuilds the dynamic portion of the popup menu (i.e., the menu items</span>
<a href="#l9.316"></a><span id="l9.316" class="difflineplus">+           for new search engines that can be added to the available list).  This</span>
<a href="#l9.317"></a><span id="l9.317" class="difflineplus">+           is called each time the popup is shown.</span>
<a href="#l9.318"></a><span id="l9.318" class="difflineplus">+      --&gt;</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineplus">+      &lt;method name=&quot;rebuildPopupDynamic&quot;&gt;</span>
<a href="#l9.320"></a><span id="l9.320" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.321"></a><span id="l9.321" class="difflineplus">+          // We might not have added the main popup items yet, do that first</span>
<a href="#l9.322"></a><span id="l9.322" class="difflineplus">+          // if needed.</span>
<a href="#l9.323"></a><span id="l9.323" class="difflineplus">+          if (this._needToBuildPopup)</span>
<a href="#l9.324"></a><span id="l9.324" class="difflineplus">+            this.rebuildPopup();</span>
<a href="#l9.325"></a><span id="l9.325" class="difflineplus">+</span>
<a href="#l9.326"></a><span id="l9.326" class="difflineplus">+          var popup = this._popup;</span>
<a href="#l9.327"></a><span id="l9.327" class="difflineplus">+          // Clear any addengine menuitems, including addengine-item entries and</span>
<a href="#l9.328"></a><span id="l9.328" class="difflineplus">+          // the addengine-separator.  Work backward to avoid invalidating the</span>
<a href="#l9.329"></a><span id="l9.329" class="difflineplus">+          // indexes as items are removed.</span>
<a href="#l9.330"></a><span id="l9.330" class="difflineplus">+          var items = popup.childNodes;</span>
<a href="#l9.331"></a><span id="l9.331" class="difflineplus">+          for (var i = items.length - 1; i &gt;= 0; i--) {</span>
<a href="#l9.332"></a><span id="l9.332" class="difflineplus">+            if (items[i].classList.contains(&quot;addengine-item&quot;) ||</span>
<a href="#l9.333"></a><span id="l9.333" class="difflineplus">+                items[i].classList.contains(&quot;addengine-separator&quot;))</span>
<a href="#l9.334"></a><span id="l9.334" class="difflineplus">+              popup.removeChild(items[i]);</span>
<a href="#l9.335"></a><span id="l9.335" class="difflineplus">+          }</span>
<a href="#l9.336"></a><span id="l9.336" class="difflineplus">+</span>
<a href="#l9.337"></a><span id="l9.337" class="difflineplus">+          var addengines = getBrowser().mCurrentBrowser.engines;</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineplus">+          if (addengines &amp;&amp; addengines.length &gt; 0) {</span>
<a href="#l9.339"></a><span id="l9.339" class="difflineplus">+            const kXULNS =</span>
<a href="#l9.340"></a><span id="l9.340" class="difflineplus">+               &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;;</span>
<a href="#l9.341"></a><span id="l9.341" class="difflineplus">+</span>
<a href="#l9.342"></a><span id="l9.342" class="difflineplus">+            // Find the (first) separator in the remaining menu, or the first item</span>
<a href="#l9.343"></a><span id="l9.343" class="difflineplus">+            // if no separators are present.</span>
<a href="#l9.344"></a><span id="l9.344" class="difflineplus">+            var insertLocation = popup.firstChild;</span>
<a href="#l9.345"></a><span id="l9.345" class="difflineplus">+            while (insertLocation.nextSibling &amp;&amp;</span>
<a href="#l9.346"></a><span id="l9.346" class="difflineplus">+                   insertLocation.localName != &quot;menuseparator&quot;) {</span>
<a href="#l9.347"></a><span id="l9.347" class="difflineplus">+              insertLocation = insertLocation.nextSibling;</span>
<a href="#l9.348"></a><span id="l9.348" class="difflineplus">+            }</span>
<a href="#l9.349"></a><span id="l9.349" class="difflineplus">+            if (insertLocation.localName != &quot;menuseparator&quot;)</span>
<a href="#l9.350"></a><span id="l9.350" class="difflineplus">+              insertLocation = popup.firstChild;</span>
<a href="#l9.351"></a><span id="l9.351" class="difflineplus">+</span>
<a href="#l9.352"></a><span id="l9.352" class="difflineplus">+            var separator = document.createElementNS(kXULNS, &quot;menuseparator&quot;);</span>
<a href="#l9.353"></a><span id="l9.353" class="difflineplus">+            separator.setAttribute(&quot;class&quot;, &quot;addengine-separator&quot;);</span>
<a href="#l9.354"></a><span id="l9.354" class="difflineplus">+            popup.insertBefore(separator, insertLocation);</span>
<a href="#l9.355"></a><span id="l9.355" class="difflineplus">+</span>
<a href="#l9.356"></a><span id="l9.356" class="difflineplus">+            // Insert the &quot;add this engine&quot; items.</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineplus">+            for (var i = 0; i &lt; addengines.length; i++) {</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineplus">+              var menuitem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l9.359"></a><span id="l9.359" class="difflineplus">+              var engineInfo = addengines[i];</span>
<a href="#l9.360"></a><span id="l9.360" class="difflineplus">+              var labelStr =</span>
<a href="#l9.361"></a><span id="l9.361" class="difflineplus">+                  this._stringBundle.getFormattedString(&quot;cmd_addFoundEngine&quot;,</span>
<a href="#l9.362"></a><span id="l9.362" class="difflineplus">+                                                        [engineInfo.title]);</span>
<a href="#l9.363"></a><span id="l9.363" class="difflineplus">+              menuitem = document.createElementNS(kXULNS, &quot;menuitem&quot;);</span>
<a href="#l9.364"></a><span id="l9.364" class="difflineplus">+              menuitem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic addengine-item&quot;);</span>
<a href="#l9.365"></a><span id="l9.365" class="difflineplus">+              menuitem.setAttribute(&quot;label&quot;, labelStr);</span>
<a href="#l9.366"></a><span id="l9.366" class="difflineplus">+              menuitem.setAttribute(&quot;tooltiptext&quot;, engineInfo.uri);</span>
<a href="#l9.367"></a><span id="l9.367" class="difflineplus">+              menuitem.setAttribute(&quot;uri&quot;, engineInfo.uri);</span>
<a href="#l9.368"></a><span id="l9.368" class="difflineplus">+              if (engineInfo.icon)</span>
<a href="#l9.369"></a><span id="l9.369" class="difflineplus">+                menuitem.setAttribute(&quot;src&quot;, engineInfo.icon);</span>
<a href="#l9.370"></a><span id="l9.370" class="difflineplus">+              menuitem.setAttribute(&quot;title&quot;, engineInfo.title);</span>
<a href="#l9.371"></a><span id="l9.371" class="difflineplus">+              popup.insertBefore(menuitem, insertLocation);</span>
<a href="#l9.372"></a><span id="l9.372" class="difflineplus">+            }</span>
<a href="#l9.373"></a><span id="l9.373" class="difflineplus">+          }</span>
<a href="#l9.374"></a><span id="l9.374" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.375"></a><span id="l9.375" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.376"></a><span id="l9.376" class="difflineplus">+</span>
<a href="#l9.377"></a><span id="l9.377" class="difflineplus">+      &lt;!-- Rebuilds the list of visible search engines in the menu.  Does not remove</span>
<a href="#l9.378"></a><span id="l9.378" class="difflineplus">+           or update any dynamic entries (i.e., &quot;Add this engine&quot; items) nor the</span>
<a href="#l9.379"></a><span id="l9.379" class="difflineplus">+           Manage Engines item.  This is called by the observer when the list of</span>
<a href="#l9.380"></a><span id="l9.380" class="difflineplus">+           visible engines, or the currently selected engine, has changed.</span>
<a href="#l9.381"></a><span id="l9.381" class="difflineplus">+      --&gt;</span>
<a href="#l9.382"></a><span id="l9.382" class="difflineplus">+      &lt;method name=&quot;rebuildPopup&quot;&gt;</span>
<a href="#l9.383"></a><span id="l9.383" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.384"></a><span id="l9.384" class="difflineplus">+          var popup = this._popup;</span>
<a href="#l9.385"></a><span id="l9.385" class="difflineplus">+</span>
<a href="#l9.386"></a><span id="l9.386" class="difflineplus">+          // Clear the popup, down to the first separator</span>
<a href="#l9.387"></a><span id="l9.387" class="difflineplus">+          while (popup.firstChild &amp;&amp; popup.firstChild.localName != &quot;menuseparator&quot;)</span>
<a href="#l9.388"></a><span id="l9.388" class="difflineplus">+            popup.removeChild(popup.firstChild);</span>
<a href="#l9.389"></a><span id="l9.389" class="difflineplus">+</span>
<a href="#l9.390"></a><span id="l9.390" class="difflineplus">+          const kXULNS =</span>
<a href="#l9.391"></a><span id="l9.391" class="difflineplus">+               &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;;</span>
<a href="#l9.392"></a><span id="l9.392" class="difflineplus">+</span>
<a href="#l9.393"></a><span id="l9.393" class="difflineplus">+          var engines = this.engines;</span>
<a href="#l9.394"></a><span id="l9.394" class="difflineplus">+          for (var i = engines.length - 1; i &gt;= 0; --i) {</span>
<a href="#l9.395"></a><span id="l9.395" class="difflineplus">+            var menuitem = document.createElementNS(kXULNS, &quot;menuitem&quot;);</span>
<a href="#l9.396"></a><span id="l9.396" class="difflineplus">+            var name = engines[i].name;</span>
<a href="#l9.397"></a><span id="l9.397" class="difflineplus">+            menuitem.setAttribute(&quot;label&quot;, name);</span>
<a href="#l9.398"></a><span id="l9.398" class="difflineplus">+            menuitem.setAttribute(&quot;id&quot;, name);</span>
<a href="#l9.399"></a><span id="l9.399" class="difflineplus">+            menuitem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic searchbar-engine-menuitem menuitem-with-favicon&quot;);</span>
<a href="#l9.400"></a><span id="l9.400" class="difflineplus">+            // Since this menu is rebuilt by the observer method whenever a new</span>
<a href="#l9.401"></a><span id="l9.401" class="difflineplus">+            // engine is selected, the &quot;selected&quot; attribute does not need to be</span>
<a href="#l9.402"></a><span id="l9.402" class="difflineplus">+            // explicitly cleared anywhere.</span>
<a href="#l9.403"></a><span id="l9.403" class="difflineplus">+            if (engines[i] == this.currentEngine)</span>
<a href="#l9.404"></a><span id="l9.404" class="difflineplus">+              menuitem.setAttribute(&quot;selected&quot;, &quot;true&quot;);</span>
<a href="#l9.405"></a><span id="l9.405" class="difflineplus">+            var tooltip = this._stringBundle.getFormattedString(&quot;searchtip&quot;, [name]);</span>
<a href="#l9.406"></a><span id="l9.406" class="difflineplus">+            menuitem.setAttribute(&quot;tooltiptext&quot;, tooltip);</span>
<a href="#l9.407"></a><span id="l9.407" class="difflineplus">+            if (engines[i].iconURI)</span>
<a href="#l9.408"></a><span id="l9.408" class="difflineplus">+              menuitem.setAttribute(&quot;src&quot;, engines[i].iconURI.spec);</span>
<a href="#l9.409"></a><span id="l9.409" class="difflineplus">+            popup.insertBefore(menuitem, popup.firstChild);</span>
<a href="#l9.410"></a><span id="l9.410" class="difflineplus">+            menuitem.engine = engines[i];</span>
<a href="#l9.411"></a><span id="l9.411" class="difflineplus">+          }</span>
<a href="#l9.412"></a><span id="l9.412" class="difflineplus">+</span>
<a href="#l9.413"></a><span id="l9.413" class="difflineplus">+          this._needToBuildPopup = false;</span>
<a href="#l9.414"></a><span id="l9.414" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.415"></a><span id="l9.415" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.416"></a><span id="l9.416" class="difflineplus">+</span>
<a href="#l9.417"></a><span id="l9.417" class="difflineplus">+      &lt;method name=&quot;openManager&quot;&gt;</span>
<a href="#l9.418"></a><span id="l9.418" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l9.419"></a><span id="l9.419" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.420"></a><span id="l9.420" class="difflineplus">+          var wm =</span>
<a href="#l9.421"></a><span id="l9.421" class="difflineplus">+                Components.classes[&quot;@mozilla.org/appshell/window-mediator;1&quot;]</span>
<a href="#l9.422"></a><span id="l9.422" class="difflineplus">+                          .getService(Components.interfaces.nsIWindowMediator);</span>
<a href="#l9.423"></a><span id="l9.423" class="difflineplus">+</span>
<a href="#l9.424"></a><span id="l9.424" class="difflineplus">+          var window = wm.getMostRecentWindow(&quot;Browser:SearchManager&quot;);</span>
<a href="#l9.425"></a><span id="l9.425" class="difflineplus">+          if (window)</span>
<a href="#l9.426"></a><span id="l9.426" class="difflineplus">+            window.focus()</span>
<a href="#l9.427"></a><span id="l9.427" class="difflineplus">+          else {</span>
<a href="#l9.428"></a><span id="l9.428" class="difflineplus">+            setTimeout(function () {</span>
<a href="#l9.429"></a><span id="l9.429" class="difflineplus">+              openDialog(&quot;chrome://communicator/content/search/engineManager.xul&quot;,</span>
<a href="#l9.430"></a><span id="l9.430" class="difflineplus">+                         &quot;_blank&quot;, &quot;chrome,dialog,modal,centerscreen,resizable&quot;);</span>
<a href="#l9.431"></a><span id="l9.431" class="difflineplus">+            }, 0);</span>
<a href="#l9.432"></a><span id="l9.432" class="difflineplus">+          }</span>
<a href="#l9.433"></a><span id="l9.433" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.434"></a><span id="l9.434" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.435"></a><span id="l9.435" class="difflineplus">+</span>
<a href="#l9.436"></a><span id="l9.436" class="difflineplus">+      &lt;method name=&quot;selectEngine&quot;&gt;</span>
<a href="#l9.437"></a><span id="l9.437" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l9.438"></a><span id="l9.438" class="difflineplus">+        &lt;parameter name=&quot;isNextEngine&quot;/&gt;</span>
<a href="#l9.439"></a><span id="l9.439" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.440"></a><span id="l9.440" class="difflineplus">+          // Find the new index</span>
<a href="#l9.441"></a><span id="l9.441" class="difflineplus">+          var newIndex = this.engines.indexOf(this.currentEngine);</span>
<a href="#l9.442"></a><span id="l9.442" class="difflineplus">+          newIndex += isNextEngine ? 1 : -1;</span>
<a href="#l9.443"></a><span id="l9.443" class="difflineplus">+</span>
<a href="#l9.444"></a><span id="l9.444" class="difflineplus">+          if (newIndex &gt;= 0 &amp;&amp; newIndex &lt; this.engines.length)</span>
<a href="#l9.445"></a><span id="l9.445" class="difflineplus">+            this.currentEngine = this.engines[newIndex];</span>
<a href="#l9.446"></a><span id="l9.446" class="difflineplus">+</span>
<a href="#l9.447"></a><span id="l9.447" class="difflineplus">+          aEvent.preventDefault();</span>
<a href="#l9.448"></a><span id="l9.448" class="difflineplus">+          aEvent.stopPropagation();</span>
<a href="#l9.449"></a><span id="l9.449" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.450"></a><span id="l9.450" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.451"></a><span id="l9.451" class="difflineplus">+</span>
<a href="#l9.452"></a><span id="l9.452" class="difflineplus">+      &lt;method name=&quot;handleSearchCommand&quot;&gt;</span>
<a href="#l9.453"></a><span id="l9.453" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l9.454"></a><span id="l9.454" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.455"></a><span id="l9.455" class="difflineplus">+          var textBox = this._textbox;</span>
<a href="#l9.456"></a><span id="l9.456" class="difflineplus">+          var textValue = textBox.value;</span>
<a href="#l9.457"></a><span id="l9.457" class="difflineplus">+</span>
<a href="#l9.458"></a><span id="l9.458" class="difflineplus">+          var where = &quot;current&quot;;</span>
<a href="#l9.459"></a><span id="l9.459" class="difflineplus">+          if (aEvent &amp;&amp; aEvent.originalTarget.getAttribute(&quot;anonid&quot;) == &quot;search-go-button&quot;) {</span>
<a href="#l9.460"></a><span id="l9.460" class="difflineplus">+            if (aEvent.button == 2)</span>
<a href="#l9.461"></a><span id="l9.461" class="difflineplus">+              return;</span>
<a href="#l9.462"></a><span id="l9.462" class="difflineplus">+            where = whereToOpenLink(aEvent, false, true);</span>
<a href="#l9.463"></a><span id="l9.463" class="difflineplus">+          }</span>
<a href="#l9.464"></a><span id="l9.464" class="difflineplus">+          else {</span>
<a href="#l9.465"></a><span id="l9.465" class="difflineplus">+            var newTabPref = textBox._prefBranch.getBoolPref(&quot;browser.search.openintab&quot;);</span>
<a href="#l9.466"></a><span id="l9.466" class="difflineplus">+            if ((aEvent &amp;&amp; aEvent.altKey) ^ newTabPref)</span>
<a href="#l9.467"></a><span id="l9.467" class="difflineplus">+              where = &quot;tabfocused&quot;;</span>
<a href="#l9.468"></a><span id="l9.468" class="difflineplus">+          }</span>
<a href="#l9.469"></a><span id="l9.469" class="difflineplus">+</span>
<a href="#l9.470"></a><span id="l9.470" class="difflineplus">+          // Save the current value in the form history</span>
<a href="#l9.471"></a><span id="l9.471" class="difflineplus">+          if (textValue) {</span>
<a href="#l9.472"></a><span id="l9.472" class="difflineplus">+            textBox._formHistSvc.addEntry(textBox.getAttribute(&quot;autocompletesearchparam&quot;),</span>
<a href="#l9.473"></a><span id="l9.473" class="difflineplus">+                                          textValue);</span>
<a href="#l9.474"></a><span id="l9.474" class="difflineplus">+          }</span>
<a href="#l9.475"></a><span id="l9.475" class="difflineplus">+</span>
<a href="#l9.476"></a><span id="l9.476" class="difflineplus">+          this.doSearch(textValue, where);</span>
<a href="#l9.477"></a><span id="l9.477" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.478"></a><span id="l9.478" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.479"></a><span id="l9.479" class="difflineplus">+</span>
<a href="#l9.480"></a><span id="l9.480" class="difflineplus">+      &lt;method name=&quot;doSearch&quot;&gt;</span>
<a href="#l9.481"></a><span id="l9.481" class="difflineplus">+        &lt;parameter name=&quot;aData&quot;/&gt;</span>
<a href="#l9.482"></a><span id="l9.482" class="difflineplus">+        &lt;parameter name=&quot;aWhere&quot;/&gt;</span>
<a href="#l9.483"></a><span id="l9.483" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.484"></a><span id="l9.484" class="difflineplus">+          // null parameter below specifies HTML response for search</span>
<a href="#l9.485"></a><span id="l9.485" class="difflineplus">+          var submission = this.currentEngine.getSubmission(aData);</span>
<a href="#l9.486"></a><span id="l9.486" class="difflineplus">+          openUILinkIn(submission.uri.spec, aWhere, null, submission.postData);</span>
<a href="#l9.487"></a><span id="l9.487" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.488"></a><span id="l9.488" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.489"></a><span id="l9.489" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l9.490"></a><span id="l9.490" class="difflineplus">+</span>
<a href="#l9.491"></a><span id="l9.491" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l9.492"></a><span id="l9.492" class="difflineplus">+      &lt;handler event=&quot;command&quot;&gt;&lt;![CDATA[</span>
<a href="#l9.493"></a><span id="l9.493" class="difflineplus">+        const target = event.originalTarget;</span>
<a href="#l9.494"></a><span id="l9.494" class="difflineplus">+        if (target.classList.contains(&quot;addengine-item&quot;)) {</span>
<a href="#l9.495"></a><span id="l9.495" class="difflineplus">+          var searchService =</span>
<a href="#l9.496"></a><span id="l9.496" class="difflineplus">+            Components.classes[&quot;@mozilla.org/browser/search-service;1&quot;]</span>
<a href="#l9.497"></a><span id="l9.497" class="difflineplus">+                      .getService(Components.interfaces.nsIBrowserSearchService);</span>
<a href="#l9.498"></a><span id="l9.498" class="difflineplus">+          // We only detect OpenSearch files</span>
<a href="#l9.499"></a><span id="l9.499" class="difflineplus">+          var type = Components.interfaces.nsISearchEngine.DATA_XML;</span>
<a href="#l9.500"></a><span id="l9.500" class="difflineplus">+          searchService.addEngine(target.getAttribute(&quot;uri&quot;), type,</span>
<a href="#l9.501"></a><span id="l9.501" class="difflineplus">+                                  target.getAttribute(&quot;src&quot;), false);</span>
<a href="#l9.502"></a><span id="l9.502" class="difflineplus">+        }</span>
<a href="#l9.503"></a><span id="l9.503" class="difflineplus">+        else if (target.engine)</span>
<a href="#l9.504"></a><span id="l9.504" class="difflineplus">+          this.currentEngine = target.engine;</span>
<a href="#l9.505"></a><span id="l9.505" class="difflineplus">+        else</span>
<a href="#l9.506"></a><span id="l9.506" class="difflineplus">+          return;</span>
<a href="#l9.507"></a><span id="l9.507" class="difflineplus">+</span>
<a href="#l9.508"></a><span id="l9.508" class="difflineplus">+        this.focus();</span>
<a href="#l9.509"></a><span id="l9.509" class="difflineplus">+        this.select();</span>
<a href="#l9.510"></a><span id="l9.510" class="difflineplus">+      ]]&gt;&lt;/handler&gt;</span>
<a href="#l9.511"></a><span id="l9.511" class="difflineplus">+</span>
<a href="#l9.512"></a><span id="l9.512" class="difflineplus">+      &lt;handler event=&quot;popupshowing&quot; action=&quot;this.rebuildPopupDynamic();&quot;/&gt;</span>
<a href="#l9.513"></a><span id="l9.513" class="difflineplus">+</span>
<a href="#l9.514"></a><span id="l9.514" class="difflineplus">+      &lt;handler event=&quot;DOMMouseScroll&quot;</span>
<a href="#l9.515"></a><span id="l9.515" class="difflineplus">+               phase=&quot;capturing&quot;</span>
<a href="#l9.516"></a><span id="l9.516" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l9.517"></a><span id="l9.517" class="difflineplus">+               action=&quot;if (event.metaKey) this.selectEngine(event, (event.detail &gt; 0));&quot;/&gt;</span>
<a href="#l9.518"></a><span id="l9.518" class="difflineplus">+#else</span>
<a href="#l9.519"></a><span id="l9.519" class="difflineplus">+               action=&quot;if (event.ctrlKey) this.selectEngine(event, (event.detail &gt; 0));&quot;/&gt;</span>
<a href="#l9.520"></a><span id="l9.520" class="difflineplus">+#endif</span>
<a href="#l9.521"></a><span id="l9.521" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l9.522"></a><span id="l9.522" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l9.523"></a><span id="l9.523" class="difflineplus">+</span>
<a href="#l9.524"></a><span id="l9.524" class="difflineplus">+  &lt;binding id=&quot;searchbar-textbox&quot;</span>
<a href="#l9.525"></a><span id="l9.525" class="difflineplus">+      extends=&quot;chrome://global/content/bindings/autocomplete.xml#autocomplete&quot;&gt;</span>
<a href="#l9.526"></a><span id="l9.526" class="difflineplus">+    &lt;implementation implements=&quot;nsIObserver&quot;&gt;</span>
<a href="#l9.527"></a><span id="l9.527" class="difflineplus">+      &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l9.528"></a><span id="l9.528" class="difflineplus">+        if (document.getBindingParent(this).parentNode.parentNode.localName ==</span>
<a href="#l9.529"></a><span id="l9.529" class="difflineplus">+            &quot;toolbarpaletteitem&quot;)</span>
<a href="#l9.530"></a><span id="l9.530" class="difflineplus">+          return;</span>
<a href="#l9.531"></a><span id="l9.531" class="difflineplus">+        setTimeout(function(a) { a.initialize(); }, 0, this);</span>
<a href="#l9.532"></a><span id="l9.532" class="difflineplus">+      ]]&gt;&lt;/constructor&gt;</span>
<a href="#l9.533"></a><span id="l9.533" class="difflineplus">+</span>
<a href="#l9.534"></a><span id="l9.534" class="difflineplus">+      &lt;destructor&gt;&lt;![CDATA[</span>
<a href="#l9.535"></a><span id="l9.535" class="difflineplus">+          this._prefBranch.removeObserver(&quot;browser.search.suggest.enabled&quot;, this);</span>
<a href="#l9.536"></a><span id="l9.536" class="difflineplus">+</span>
<a href="#l9.537"></a><span id="l9.537" class="difflineplus">+        // Because XBL and the customize toolbar code interacts poorly,</span>
<a href="#l9.538"></a><span id="l9.538" class="difflineplus">+        // there may not be anything to remove here</span>
<a href="#l9.539"></a><span id="l9.539" class="difflineplus">+        try {</span>
<a href="#l9.540"></a><span id="l9.540" class="difflineplus">+          this.controllers.removeController(this.searchbarController);</span>
<a href="#l9.541"></a><span id="l9.541" class="difflineplus">+        } catch (ex) { }</span>
<a href="#l9.542"></a><span id="l9.542" class="difflineplus">+      ]]&gt;&lt;/destructor&gt;</span>
<a href="#l9.543"></a><span id="l9.543" class="difflineplus">+</span>
<a href="#l9.544"></a><span id="l9.544" class="difflineplus">+      &lt;field name=&quot;_stringBundle&quot;&gt;document.getBindingParent(this)._stringBundle&lt;/field&gt;</span>
<a href="#l9.545"></a><span id="l9.545" class="difflineplus">+      &lt;field name=&quot;_formHistSvc&quot;&gt;</span>
<a href="#l9.546"></a><span id="l9.546" class="difflineplus">+        Components.classes[&quot;@mozilla.org/satchel/form-history;1&quot;]</span>
<a href="#l9.547"></a><span id="l9.547" class="difflineplus">+                  .getService(Components.interfaces.nsIFormHistory2)</span>
<a href="#l9.548"></a><span id="l9.548" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l9.549"></a><span id="l9.549" class="difflineplus">+      &lt;field name=&quot;_prefBranch&quot;&gt;</span>
<a href="#l9.550"></a><span id="l9.550" class="difflineplus">+        Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l9.551"></a><span id="l9.551" class="difflineplus">+                  .getService(Components.interfaces.nsIPrefBranch2)</span>
<a href="#l9.552"></a><span id="l9.552" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l9.553"></a><span id="l9.553" class="difflineplus">+      &lt;field name=&quot;_suggestMenuItem&quot;/&gt;</span>
<a href="#l9.554"></a><span id="l9.554" class="difflineplus">+      &lt;field name=&quot;_suggestEnabled&quot;&gt;</span>
<a href="#l9.555"></a><span id="l9.555" class="difflineplus">+        this._prefBranch.getBoolPref(&quot;browser.search.suggest.enabled&quot;)</span>
<a href="#l9.556"></a><span id="l9.556" class="difflineplus">+      &lt;/field&gt;</span>
<a href="#l9.557"></a><span id="l9.557" class="difflineplus">+</span>
<a href="#l9.558"></a><span id="l9.558" class="difflineplus">+      &lt;method name=&quot;initialize&quot;&gt;</span>
<a href="#l9.559"></a><span id="l9.559" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.560"></a><span id="l9.560" class="difflineplus">+          const kXULNS =</span>
<a href="#l9.561"></a><span id="l9.561" class="difflineplus">+            &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;;</span>
<a href="#l9.562"></a><span id="l9.562" class="difflineplus">+</span>
<a href="#l9.563"></a><span id="l9.563" class="difflineplus">+          if (this._prefBranch.getBoolPref(&quot;browser.urlbar.clickSelectsAll&quot;))</span>
<a href="#l9.564"></a><span id="l9.564" class="difflineplus">+            this.setAttribute(&quot;clickSelectsAll&quot;, true);</span>
<a href="#l9.565"></a><span id="l9.565" class="difflineplus">+</span>
<a href="#l9.566"></a><span id="l9.566" class="difflineplus">+          // Add items to context menu and attach controller to handle them</span>
<a href="#l9.567"></a><span id="l9.567" class="difflineplus">+          var textBox = document.getAnonymousElementByAttribute(this,</span>
<a href="#l9.568"></a><span id="l9.568" class="difflineplus">+                                                &quot;anonid&quot;, &quot;textbox-input-box&quot;);</span>
<a href="#l9.569"></a><span id="l9.569" class="difflineplus">+          var cxmenu = document.getAnonymousElementByAttribute(textBox,</span>
<a href="#l9.570"></a><span id="l9.570" class="difflineplus">+                                            &quot;anonid&quot;, &quot;input-box-contextmenu&quot;);</span>
<a href="#l9.571"></a><span id="l9.571" class="difflineplus">+          var pasteAndSearch;</span>
<a href="#l9.572"></a><span id="l9.572" class="difflineplus">+          cxmenu.addEventListener(&quot;popupshowing&quot;, function() {</span>
<a href="#l9.573"></a><span id="l9.573" class="difflineplus">+            if (!pasteAndSearch)</span>
<a href="#l9.574"></a><span id="l9.574" class="difflineplus">+              return;</span>
<a href="#l9.575"></a><span id="l9.575" class="difflineplus">+            var controller = document.commandDispatcher.getControllerForCommand(&quot;cmd_paste&quot;);</span>
<a href="#l9.576"></a><span id="l9.576" class="difflineplus">+            var enabled = controller.isCommandEnabled(&quot;cmd_paste&quot;);</span>
<a href="#l9.577"></a><span id="l9.577" class="difflineplus">+            if (enabled)</span>
<a href="#l9.578"></a><span id="l9.578" class="difflineplus">+              pasteAndSearch.removeAttribute(&quot;disabled&quot;);</span>
<a href="#l9.579"></a><span id="l9.579" class="difflineplus">+            else</span>
<a href="#l9.580"></a><span id="l9.580" class="difflineplus">+              pasteAndSearch.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l9.581"></a><span id="l9.581" class="difflineplus">+          }, false);</span>
<a href="#l9.582"></a><span id="l9.582" class="difflineplus">+</span>
<a href="#l9.583"></a><span id="l9.583" class="difflineplus">+          var element, label, akey;</span>
<a href="#l9.584"></a><span id="l9.584" class="difflineplus">+</span>
<a href="#l9.585"></a><span id="l9.585" class="difflineplus">+          element = document.createElementNS(kXULNS, &quot;menuseparator&quot;);</span>
<a href="#l9.586"></a><span id="l9.586" class="difflineplus">+          cxmenu.appendChild(element);</span>
<a href="#l9.587"></a><span id="l9.587" class="difflineplus">+          var insertLocation = cxmenu.firstChild;</span>
<a href="#l9.588"></a><span id="l9.588" class="difflineplus">+          while (insertLocation.nextSibling &amp;&amp;</span>
<a href="#l9.589"></a><span id="l9.589" class="difflineplus">+                 insertLocation.getAttribute(&quot;cmd&quot;) != &quot;cmd_paste&quot;)</span>
<a href="#l9.590"></a><span id="l9.590" class="difflineplus">+            insertLocation = insertLocation.nextSibling;</span>
<a href="#l9.591"></a><span id="l9.591" class="difflineplus">+          if (insertLocation) {</span>
<a href="#l9.592"></a><span id="l9.592" class="difflineplus">+            element = document.createElementNS(kXULNS, &quot;menuitem&quot;);</span>
<a href="#l9.593"></a><span id="l9.593" class="difflineplus">+            label = this._stringBundle.getString(&quot;cmd_pasteAndSearch&quot;);</span>
<a href="#l9.594"></a><span id="l9.594" class="difflineplus">+            element.setAttribute(&quot;label&quot;, label);</span>
<a href="#l9.595"></a><span id="l9.595" class="difflineplus">+            element.setAttribute(&quot;anonid&quot;, &quot;paste-and-search&quot;);</span>
<a href="#l9.596"></a><span id="l9.596" class="difflineplus">+            element.setAttribute(&quot;oncommand&quot;,</span>
<a href="#l9.597"></a><span id="l9.597" class="difflineplus">+                &quot;BrowserSearch.searchBar.select(); goDoCommand('cmd_paste'); BrowserSearch.searchBar.handleSearchCommand();&quot;);</span>
<a href="#l9.598"></a><span id="l9.598" class="difflineplus">+            cxmenu.insertBefore(element, insertLocation.nextSibling);</span>
<a href="#l9.599"></a><span id="l9.599" class="difflineplus">+            pasteAndSearch = element;</span>
<a href="#l9.600"></a><span id="l9.600" class="difflineplus">+          }</span>
<a href="#l9.601"></a><span id="l9.601" class="difflineplus">+</span>
<a href="#l9.602"></a><span id="l9.602" class="difflineplus">+          element = document.createElementNS(kXULNS, &quot;menuitem&quot;);</span>
<a href="#l9.603"></a><span id="l9.603" class="difflineplus">+          label = this._stringBundle.getString(&quot;cmd_clearHistory&quot;);</span>
<a href="#l9.604"></a><span id="l9.604" class="difflineplus">+          akey = this._stringBundle.getString(&quot;cmd_clearHistory_accesskey&quot;);</span>
<a href="#l9.605"></a><span id="l9.605" class="difflineplus">+          element.setAttribute(&quot;label&quot;, label);</span>
<a href="#l9.606"></a><span id="l9.606" class="difflineplus">+          element.setAttribute(&quot;accesskey&quot;, akey);</span>
<a href="#l9.607"></a><span id="l9.607" class="difflineplus">+          element.setAttribute(&quot;cmd&quot;, &quot;cmd_clearhistory&quot;);</span>
<a href="#l9.608"></a><span id="l9.608" class="difflineplus">+</span>
<a href="#l9.609"></a><span id="l9.609" class="difflineplus">+          cxmenu.appendChild(element);</span>
<a href="#l9.610"></a><span id="l9.610" class="difflineplus">+</span>
<a href="#l9.611"></a><span id="l9.611" class="difflineplus">+          element = document.createElementNS(kXULNS, &quot;menuitem&quot;);</span>
<a href="#l9.612"></a><span id="l9.612" class="difflineplus">+          label = this._stringBundle.getString(&quot;cmd_showSuggestions&quot;);</span>
<a href="#l9.613"></a><span id="l9.613" class="difflineplus">+          akey = this._stringBundle.getString(&quot;cmd_showSuggestions_accesskey&quot;);</span>
<a href="#l9.614"></a><span id="l9.614" class="difflineplus">+          element.setAttribute(&quot;anonid&quot;, &quot;toggle-suggest-item&quot;);</span>
<a href="#l9.615"></a><span id="l9.615" class="difflineplus">+          element.setAttribute(&quot;label&quot;, label);</span>
<a href="#l9.616"></a><span id="l9.616" class="difflineplus">+          element.setAttribute(&quot;accesskey&quot;, akey);</span>
<a href="#l9.617"></a><span id="l9.617" class="difflineplus">+          element.setAttribute(&quot;cmd&quot;, &quot;cmd_togglesuggest&quot;);</span>
<a href="#l9.618"></a><span id="l9.618" class="difflineplus">+          element.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l9.619"></a><span id="l9.619" class="difflineplus">+          element.setAttribute(&quot;checked&quot;, this._suggestEnabled);</span>
<a href="#l9.620"></a><span id="l9.620" class="difflineplus">+          element.setAttribute(&quot;autocheck&quot;, &quot;false&quot;);</span>
<a href="#l9.621"></a><span id="l9.621" class="difflineplus">+</span>
<a href="#l9.622"></a><span id="l9.622" class="difflineplus">+          this._suggestMenuItem = element;</span>
<a href="#l9.623"></a><span id="l9.623" class="difflineplus">+          cxmenu.appendChild(element);</span>
<a href="#l9.624"></a><span id="l9.624" class="difflineplus">+</span>
<a href="#l9.625"></a><span id="l9.625" class="difflineplus">+          this.controllers.appendController(this.searchbarController);</span>
<a href="#l9.626"></a><span id="l9.626" class="difflineplus">+</span>
<a href="#l9.627"></a><span id="l9.627" class="difflineplus">+          // Add observer for suggest preference</span>
<a href="#l9.628"></a><span id="l9.628" class="difflineplus">+          this._prefBranch.addObserver(&quot;browser.search.suggest.enabled&quot;, this, false);</span>
<a href="#l9.629"></a><span id="l9.629" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.630"></a><span id="l9.630" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.631"></a><span id="l9.631" class="difflineplus">+</span>
<a href="#l9.632"></a><span id="l9.632" class="difflineplus">+      &lt;method name=&quot;observe&quot;&gt;</span>
<a href="#l9.633"></a><span id="l9.633" class="difflineplus">+        &lt;parameter name=&quot;aSubject&quot;/&gt;</span>
<a href="#l9.634"></a><span id="l9.634" class="difflineplus">+        &lt;parameter name=&quot;aTopic&quot;/&gt;</span>
<a href="#l9.635"></a><span id="l9.635" class="difflineplus">+        &lt;parameter name=&quot;aData&quot;/&gt;</span>
<a href="#l9.636"></a><span id="l9.636" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.637"></a><span id="l9.637" class="difflineplus">+          if (aTopic == &quot;nsPref:changed&quot;) {</span>
<a href="#l9.638"></a><span id="l9.638" class="difflineplus">+            this._suggestEnabled =</span>
<a href="#l9.639"></a><span id="l9.639" class="difflineplus">+              this._prefBranch.getBoolPref(&quot;browser.search.suggest.enabled&quot;);</span>
<a href="#l9.640"></a><span id="l9.640" class="difflineplus">+            this._suggestMenuItem.setAttribute(&quot;checked&quot;, this._suggestEnabled);</span>
<a href="#l9.641"></a><span id="l9.641" class="difflineplus">+          }</span>
<a href="#l9.642"></a><span id="l9.642" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.643"></a><span id="l9.643" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.644"></a><span id="l9.644" class="difflineplus">+</span>
<a href="#l9.645"></a><span id="l9.645" class="difflineplus">+      &lt;method name=&quot;openSearch&quot;&gt;</span>
<a href="#l9.646"></a><span id="l9.646" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l9.647"></a><span id="l9.647" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l9.648"></a><span id="l9.648" class="difflineplus">+            // Don't open search popup if history popup is open</span>
<a href="#l9.649"></a><span id="l9.649" class="difflineplus">+            if (!this.popupOpen) {</span>
<a href="#l9.650"></a><span id="l9.650" class="difflineplus">+              document.getBindingParent(this).searchButton.open = true;</span>
<a href="#l9.651"></a><span id="l9.651" class="difflineplus">+              return false;</span>
<a href="#l9.652"></a><span id="l9.652" class="difflineplus">+            }</span>
<a href="#l9.653"></a><span id="l9.653" class="difflineplus">+            return true;</span>
<a href="#l9.654"></a><span id="l9.654" class="difflineplus">+          ]]&gt;</span>
<a href="#l9.655"></a><span id="l9.655" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l9.656"></a><span id="l9.656" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.657"></a><span id="l9.657" class="difflineplus">+</span>
<a href="#l9.658"></a><span id="l9.658" class="difflineplus">+      &lt;!-- override |onTextEntered| in autocomplete.xml --&gt;</span>
<a href="#l9.659"></a><span id="l9.659" class="difflineplus">+      &lt;method name=&quot;onTextEntered&quot;&gt;</span>
<a href="#l9.660"></a><span id="l9.660" class="difflineplus">+        &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l9.661"></a><span id="l9.661" class="difflineplus">+        &lt;body&gt;&lt;![CDATA[</span>
<a href="#l9.662"></a><span id="l9.662" class="difflineplus">+          var evt = aEvent || this.mEnterEvent;</span>
<a href="#l9.663"></a><span id="l9.663" class="difflineplus">+          document.getBindingParent(this).handleSearchCommand(evt);</span>
<a href="#l9.664"></a><span id="l9.664" class="difflineplus">+          this.mEnterEvent = null;</span>
<a href="#l9.665"></a><span id="l9.665" class="difflineplus">+        ]]&gt;&lt;/body&gt;</span>
<a href="#l9.666"></a><span id="l9.666" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.667"></a><span id="l9.667" class="difflineplus">+</span>
<a href="#l9.668"></a><span id="l9.668" class="difflineplus">+      &lt;!-- nsIController --&gt;</span>
<a href="#l9.669"></a><span id="l9.669" class="difflineplus">+      &lt;field name=&quot;searchbarController&quot; readonly=&quot;true&quot;&gt;&lt;![CDATA[({</span>
<a href="#l9.670"></a><span id="l9.670" class="difflineplus">+        _self: this,</span>
<a href="#l9.671"></a><span id="l9.671" class="difflineplus">+        supportsCommand: function(aCommand) {</span>
<a href="#l9.672"></a><span id="l9.672" class="difflineplus">+          return aCommand == &quot;cmd_clearhistory&quot; ||</span>
<a href="#l9.673"></a><span id="l9.673" class="difflineplus">+                 aCommand == &quot;cmd_togglesuggest&quot;;</span>
<a href="#l9.674"></a><span id="l9.674" class="difflineplus">+        },</span>
<a href="#l9.675"></a><span id="l9.675" class="difflineplus">+</span>
<a href="#l9.676"></a><span id="l9.676" class="difflineplus">+        isCommandEnabled: function(aCommand) {</span>
<a href="#l9.677"></a><span id="l9.677" class="difflineplus">+          if (aCommand == &quot;cmd_clearhistory&quot;) {</span>
<a href="#l9.678"></a><span id="l9.678" class="difflineplus">+            var param = this._self.getAttribute(&quot;autocompletesearchparam&quot;);</span>
<a href="#l9.679"></a><span id="l9.679" class="difflineplus">+            return this._self._formHistSvc.nameExists(param);</span>
<a href="#l9.680"></a><span id="l9.680" class="difflineplus">+          }</span>
<a href="#l9.681"></a><span id="l9.681" class="difflineplus">+          return true;</span>
<a href="#l9.682"></a><span id="l9.682" class="difflineplus">+        },</span>
<a href="#l9.683"></a><span id="l9.683" class="difflineplus">+</span>
<a href="#l9.684"></a><span id="l9.684" class="difflineplus">+        doCommand: function (aCommand) {</span>
<a href="#l9.685"></a><span id="l9.685" class="difflineplus">+          switch (aCommand) {</span>
<a href="#l9.686"></a><span id="l9.686" class="difflineplus">+            case &quot;cmd_clearhistory&quot;:</span>
<a href="#l9.687"></a><span id="l9.687" class="difflineplus">+              var param = this._self.getAttribute(&quot;autocompletesearchparam&quot;);</span>
<a href="#l9.688"></a><span id="l9.688" class="difflineplus">+              this._self._formHistSvc.removeEntriesForName(param);</span>
<a href="#l9.689"></a><span id="l9.689" class="difflineplus">+              this._self.value = &quot;&quot;;</span>
<a href="#l9.690"></a><span id="l9.690" class="difflineplus">+              break;</span>
<a href="#l9.691"></a><span id="l9.691" class="difflineplus">+            case &quot;cmd_togglesuggest&quot;:</span>
<a href="#l9.692"></a><span id="l9.692" class="difflineplus">+              // The pref observer will update _suggestEnabled and the menu</span>
<a href="#l9.693"></a><span id="l9.693" class="difflineplus">+              // checkmark.</span>
<a href="#l9.694"></a><span id="l9.694" class="difflineplus">+              this._self._prefBranch.setBoolPref(&quot;browser.search.suggest.enabled&quot;,</span>
<a href="#l9.695"></a><span id="l9.695" class="difflineplus">+                                                 !this._self._suggestEnabled);</span>
<a href="#l9.696"></a><span id="l9.696" class="difflineplus">+              break;</span>
<a href="#l9.697"></a><span id="l9.697" class="difflineplus">+            default:</span>
<a href="#l9.698"></a><span id="l9.698" class="difflineplus">+              // do nothing with unrecognized command</span>
<a href="#l9.699"></a><span id="l9.699" class="difflineplus">+          }</span>
<a href="#l9.700"></a><span id="l9.700" class="difflineplus">+        }</span>
<a href="#l9.701"></a><span id="l9.701" class="difflineplus">+      })]]&gt;&lt;/field&gt;</span>
<a href="#l9.702"></a><span id="l9.702" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l9.703"></a><span id="l9.703" class="difflineplus">+</span>
<a href="#l9.704"></a><span id="l9.704" class="difflineplus">+    &lt;handlers&gt;</span>
<a href="#l9.705"></a><span id="l9.705" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_UP&quot; modifiers=&quot;accel&quot;</span>
<a href="#l9.706"></a><span id="l9.706" class="difflineplus">+               phase=&quot;capturing&quot;</span>
<a href="#l9.707"></a><span id="l9.707" class="difflineplus">+               action=&quot;document.getBindingParent(this).selectEngine(event, false);&quot;/&gt;</span>
<a href="#l9.708"></a><span id="l9.708" class="difflineplus">+</span>
<a href="#l9.709"></a><span id="l9.709" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_DOWN&quot; modifiers=&quot;accel&quot;</span>
<a href="#l9.710"></a><span id="l9.710" class="difflineplus">+               phase=&quot;capturing&quot;</span>
<a href="#l9.711"></a><span id="l9.711" class="difflineplus">+               action=&quot;document.getBindingParent(this).selectEngine(event, true);&quot;/&gt;</span>
<a href="#l9.712"></a><span id="l9.712" class="difflineplus">+</span>
<a href="#l9.713"></a><span id="l9.713" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_DOWN&quot; modifiers=&quot;alt&quot;</span>
<a href="#l9.714"></a><span id="l9.714" class="difflineplus">+               phase=&quot;capturing&quot;</span>
<a href="#l9.715"></a><span id="l9.715" class="difflineplus">+               action=&quot;return this.openSearch();&quot;/&gt;</span>
<a href="#l9.716"></a><span id="l9.716" class="difflineplus">+</span>
<a href="#l9.717"></a><span id="l9.717" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_UP&quot; modifiers=&quot;alt&quot;</span>
<a href="#l9.718"></a><span id="l9.718" class="difflineplus">+               phase=&quot;capturing&quot;</span>
<a href="#l9.719"></a><span id="l9.719" class="difflineplus">+               action=&quot;return this.openSearch();&quot;/&gt;</span>
<a href="#l9.720"></a><span id="l9.720" class="difflineplus">+</span>
<a href="#l9.721"></a><span id="l9.721" class="difflineplus">+#ifndef XP_MACOSX</span>
<a href="#l9.722"></a><span id="l9.722" class="difflineplus">+      &lt;handler event=&quot;keypress&quot; keycode=&quot;VK_F4&quot;</span>
<a href="#l9.723"></a><span id="l9.723" class="difflineplus">+               phase=&quot;capturing&quot;</span>
<a href="#l9.724"></a><span id="l9.724" class="difflineplus">+               action=&quot;return this.openSearch();&quot;/&gt;</span>
<a href="#l9.725"></a><span id="l9.725" class="difflineplus">+#endif</span>
<a href="#l9.726"></a><span id="l9.726" class="difflineplus">+</span>
<a href="#l9.727"></a><span id="l9.727" class="difflineplus">+      &lt;handler event=&quot;dragover&quot;&gt;</span>
<a href="#l9.728"></a><span id="l9.728" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l9.729"></a><span id="l9.729" class="difflineplus">+        var types = event.dataTransfer.types;</span>
<a href="#l9.730"></a><span id="l9.730" class="difflineplus">+        if (types.contains(&quot;text/plain&quot;) || types.contains(&quot;text/x-moz-text-internal&quot;))</span>
<a href="#l9.731"></a><span id="l9.731" class="difflineplus">+          event.preventDefault();</span>
<a href="#l9.732"></a><span id="l9.732" class="difflineplus">+      ]]&gt;</span>
<a href="#l9.733"></a><span id="l9.733" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l9.734"></a><span id="l9.734" class="difflineplus">+</span>
<a href="#l9.735"></a><span id="l9.735" class="difflineplus">+      &lt;handler event=&quot;drop&quot;&gt;</span>
<a href="#l9.736"></a><span id="l9.736" class="difflineplus">+      &lt;![CDATA[</span>
<a href="#l9.737"></a><span id="l9.737" class="difflineplus">+        var dataTransfer = event.dataTransfer;</span>
<a href="#l9.738"></a><span id="l9.738" class="difflineplus">+        var data = dataTransfer.getData(&quot;text/plain&quot;);</span>
<a href="#l9.739"></a><span id="l9.739" class="difflineplus">+        if (!data)</span>
<a href="#l9.740"></a><span id="l9.740" class="difflineplus">+          data = dataTransfer.getData(&quot;text/x-moz-text-internal&quot;);</span>
<a href="#l9.741"></a><span id="l9.741" class="difflineplus">+        if (data) {</span>
<a href="#l9.742"></a><span id="l9.742" class="difflineplus">+          event.preventDefault();</span>
<a href="#l9.743"></a><span id="l9.743" class="difflineplus">+          this.value = data;</span>
<a href="#l9.744"></a><span id="l9.744" class="difflineplus">+          this.onTextEntered(event);</span>
<a href="#l9.745"></a><span id="l9.745" class="difflineplus">+        }</span>
<a href="#l9.746"></a><span id="l9.746" class="difflineplus">+      ]]&gt;</span>
<a href="#l9.747"></a><span id="l9.747" class="difflineplus">+      &lt;/handler&gt;</span>
<a href="#l9.748"></a><span id="l9.748" class="difflineplus">+</span>
<a href="#l9.749"></a><span id="l9.749" class="difflineplus">+    &lt;/handlers&gt;</span>
<a href="#l9.750"></a><span id="l9.750" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l9.751"></a><span id="l9.751" class="difflineplus">+&lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/suite/common/search/searchbarBindings.css</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,13 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+@namespace url(&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;);</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+.searchbar-textbox {</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+  -moz-binding: url(&quot;chrome://communicator/content/search/search.xml#searchbar-textbox&quot;);</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+}</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+.searchbar-engine-button {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+  -moz-user-focus: none;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+}</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+.autocomplete-history-dropmarker {</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+  display: none;</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/suite/locales/en-US/chrome/browser/navigator.dtd</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/browser/navigator.dtd</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -147,24 +147,24 @@</span>
<a href="#l11.4"></a><span id="l11.4"> &lt;!ENTITY printButton.label            &quot;Print&quot;&gt;</span>
<a href="#l11.5"></a><span id="l11.5"> &lt;!ENTITY printButton.tooltip          &quot;Print this page&quot;&gt;</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7"> &lt;!ENTITY throbber.tooltip             &quot;Go to the &amp;vendorShortName; home page&quot;&gt;</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9"> &lt;!ENTITY locationBar.tooltip          &quot;Enter search term, keyword, or web address&quot;&gt;</span>
<a href="#l11.10"></a><span id="l11.10"> &lt;!ENTITY locationBar.accesskey        &quot;d&quot;&gt;</span>
<a href="#l11.11"></a><span id="l11.11"> &lt;!ENTITY locationBar.title            &quot;Location&quot;&gt;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-</span>
<a href="#l11.13"></a><span id="l11.13"> &lt;!ENTITY proxyIcon.tooltip            &quot;Drag and drop this icon to create a link to this page&quot;&gt;</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-&lt;!-- Toolbar items --&gt; </span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-&lt;!ENTITY  bookmarksButton.label       &quot;Bookmarks&quot;&gt;</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-&lt;!ENTITY  bookmarksButton.tooltip     &quot;Bookmarks list&quot;&gt;</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-&lt;!ENTITY  homeButton.label            &quot;Home&quot;&gt;</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-&lt;!ENTITY  bookmarksToolbarItem.label  &quot;Bookmarks Toolbar Items&quot;&gt;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+&lt;!ENTITY searchItem.title             &quot;Search&quot;&gt;</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+&lt;!ENTITY bookmarksButton.label        &quot;Bookmarks&quot;&gt;</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+&lt;!ENTITY bookmarksButton.tooltip      &quot;Bookmarks list&quot;&gt;</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+&lt;!ENTITY homeButton.label             &quot;Home&quot;&gt;</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+&lt;!ENTITY bookmarksToolbarItem.label   &quot;Bookmarks Toolbar Items&quot;&gt;</span>
<a href="#l11.26"></a><span id="l11.26"> &lt;!ENTITY bookmarksToolbarChevron.tooltip &quot;Show more bookmarks&quot;&gt;</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28"> &lt;!-- Statusbar --&gt;</span>
<a href="#l11.29"></a><span id="l11.29"> &lt;!ENTITY  statusText.label            &quot;Done&quot;&gt;</span>
<a href="#l11.30"></a><span id="l11.30"> </span>
<a href="#l11.31"></a><span id="l11.31"> &lt;!ENTITY historyCmd.label           &quot;History&quot;&gt;  </span>
<a href="#l11.32"></a><span id="l11.32"> &lt;!ENTITY historyCmd.accesskey       &quot;i&quot;&gt;</span>
<a href="#l11.33"></a><span id="l11.33"> &lt;!ENTITY history.commandKey         &quot;h&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/pref/pref-search.dtd</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/pref/pref-search.dtd</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -2,14 +2,17 @@</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5"> &lt;!-- LOCALIZATION NOTE : FILE The Search prefs dialog --&gt;</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> &lt;!ENTITY pref.search.title                &quot;Internet Search&quot;&gt;</span>
<a href="#l12.8"></a><span id="l12.8"> &lt;!ENTITY legendHeader                     &quot;Default Search Engine&quot;&gt;</span>
<a href="#l12.9"></a><span id="l12.9"> &lt;!ENTITY defaultSearchEngine.label        &quot;Search using:&quot;&gt;</span>
<a href="#l12.10"></a><span id="l12.10"> &lt;!ENTITY defaultSearchEngine.accesskey    &quot;S&quot;&gt;</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+&lt;!-- Will be used by bug 595246 --&gt;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+&lt;!ENTITY engineManager.label              &quot;Manage Search Engines&quot;&gt;</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+</span>
<a href="#l12.15"></a><span id="l12.15"> &lt;!ENTITY searchResults.label              &quot;Search Results&quot;&gt;</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17"> &lt;!ENTITY openInTab.label                  &quot;Open new tabs for sidebar search results&quot;&gt;</span>
<a href="#l12.18"></a><span id="l12.18"> &lt;!ENTITY openInTab.accesskey              &quot;n&quot;&gt;</span>
<a href="#l12.19"></a><span id="l12.19"> &lt;!ENTITY openSidebarSearchPanel.label     &quot;Open the Search tab in the sidebar when a search is invoked&quot;&gt;</span>
<a href="#l12.20"></a><span id="l12.20"> &lt;!ENTITY openSidebarSearchPanel.accesskey &quot;O&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/search/engineManager.dtd</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,25 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+&lt;!ENTITY  engineManager.title       &quot;Manage Search Engine List&quot;&gt;</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+&lt;!ENTITY  engineManager.style       &quot;min-width: 35em;&quot;&gt;</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+&lt;!ENTITY  engineManager.intro       &quot;You have the following search engines installed:&quot;&gt;</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+&lt;!ENTITY  columnLabel.name          &quot;Name&quot;&gt;</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+&lt;!ENTITY  columnLabel.keyword       &quot;Keyword&quot;&gt;</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+&lt;!-- Buttons --&gt;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+&lt;!ENTITY  up.label                  &quot;Move Up&quot;&gt;</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+&lt;!ENTITY  up.accesskey              &quot;U&quot;&gt;</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+&lt;!ENTITY  dn.label                  &quot;Move Down&quot;&gt;</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+&lt;!ENTITY  dn.accesskey              &quot;D&quot;&gt;</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+&lt;!ENTITY  remove.label              &quot;Remove&quot;&gt;</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+&lt;!ENTITY  remove.accesskey          &quot;R&quot;&gt;</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+&lt;!ENTITY  edit.label                &quot;Edit Keyword&quot;&gt;</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+&lt;!ENTITY  edit.accesskey            &quot;t&quot;&gt;</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+&lt;!ENTITY  addEngine.label           &quot;Get more search engines&quot;&gt;</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+&lt;!ENTITY  addEngine.accesskey       &quot;A&quot;&gt;</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+&lt;!ENTITY  enableSuggest.label       &quot;Show search suggestions&quot;&gt;</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+&lt;!ENTITY  enableSuggest.accesskey   &quot;S&quot;&gt;</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+&lt;!ENTITY  restoreDefaults.label     &quot;Restore Defaults&quot;&gt;</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineplus">+&lt;!ENTITY  restoreDefaults.accesskey &quot;e&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- /dev/null</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/search/engineManager.properties</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -0,0 +1,5 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+editTitle=Edit Keyword</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+editMsg=Enter a new keyword for &quot;%S&quot;:</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+duplicateTitle=Duplicate Keyword</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+duplicateEngineMsg=You have chosen a keyword that is currently in use by &quot;%S&quot;. Please select another.</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+duplicateBookmarkMsg=You have chosen a keyword that is currently in use by a bookmark. Please select another.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/search/search-panel.dtd</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/search/search-panel.dtd</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -33,8 +33,10 @@</span>
<a href="#l15.4"></a><span id="l15.4">    - the provisions above, a recipient may use your version of this file under</span>
<a href="#l15.5"></a><span id="l15.5">    - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l15.6"></a><span id="l15.6">    -</span>
<a href="#l15.7"></a><span id="l15.7">    - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9"> &lt;!ENTITY search.button.label      &quot;Search&quot;&gt;</span>
<a href="#l15.10"></a><span id="l15.10"> &lt;!ENTITY search.placeholder       &quot;Enter search text&quot;&gt;</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+&lt;!-- Will be used by bug 595246 --&gt;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+&lt;!ENTITY search.engineManager.label &quot;Manage Search Engines&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">new file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- /dev/null</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/search/search.properties</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -0,0 +1,14 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineplus">+searchtip=Search using %S</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineplus">+</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineplus">+# LOCALIZATION NOTE (cmd_pasteAndSearch): &quot;Search&quot; is a verb, this is the</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineplus">+# search bar equivalent to the url bar's &quot;Paste &amp; Go&quot;</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineplus">+cmd_pasteAndSearch=Paste &amp; Search</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineplus">+cmd_clearHistory=Clear Search History</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+cmd_clearHistory_accesskey=H</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+cmd_showSuggestions=Show Suggestions</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+cmd_showSuggestions_accesskey=S</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+cmd_addFoundEngine=Add &quot;%S&quot;</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">new file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- /dev/null</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/search/searchbar.dtd</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -0,0 +1,2 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineplus">+&lt;!ENTITY cmd_engineManager.label        &quot;Manage Search Engines&quot;&gt;</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineplus">+&lt;!ENTITY searchEndCap.label             &quot;Search&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/suite/locales/en-US/searchplugins/google.xml</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/suite/locales/en-US/searchplugins/google.xml</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -1,14 +1,14 @@</span>
<a href="#l18.4"></a><span id="l18.4"> &lt;SearchPlugin xmlns=&quot;http://www.mozilla.org/2006/browser/search/&quot;&gt;</span>
<a href="#l18.5"></a><span id="l18.5"> &lt;ShortName&gt;Google&lt;/ShortName&gt;</span>
<a href="#l18.6"></a><span id="l18.6"> &lt;Description&gt;Google Search&lt;/Description&gt;</span>
<a href="#l18.7"></a><span id="l18.7"> &lt;InputEncoding&gt;UTF-8&lt;/InputEncoding&gt;</span>
<a href="#l18.8"></a><span id="l18.8"> &lt;Image width=&quot;16&quot; height=&quot;16&quot;&gt;data:image/png;base64,AAABAAEAEBAAAAEAGABoAwAAFgAAACgAAAAQAAAAIAAAAAEAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs9Pt8xetPtu9FsfFNtu%2BTzvb2%2B%2Fne4dFJeBw0egA%2FfAJAfAA8ewBBegAAAAD%2B%2FPtft98Mp%2BwWsfAVsvEbs%2FQeqvF8xO7%2F%2F%2F63yqkxdgM7gwE%2FggM%2BfQA%2BegBDeQDe7PIbotgQufcMufEPtfIPsvAbs%2FQvq%2Bfz%2Bf%2F%2B%2B%2FZKhR05hgBBhQI8hgBAgAI9ewD0%2B%2Fg3pswAtO8Cxf4Kw%2FsJvvYAqupKsNv%2B%2Fv7%2F%2FP5VkSU0iQA7jQA9hgBDgQU%2BfQH%2F%2Ff%2FQ6fM4sM4KsN8AteMCruIqqdbZ7PH8%2Fv%2Fg6Nc%2Fhg05kAA8jAM9iQI%2BhQA%2BgQDQu6b97uv%2F%2F%2F7V8Pqw3eiWz97q8%2Ff%2F%2F%2F%2F7%2FPptpkkqjQE4kwA7kAA5iwI8iAA8hQCOSSKdXjiyflbAkG7u2s%2F%2B%2F%2F39%2F%2F7r8utrqEYtjQE8lgA7kwA7kwA9jwA9igA9hACiWSekVRyeSgiYSBHx6N%2F%2B%2Fv7k7OFRmiYtlAA5lwI7lwI4lAA7kgI9jwE9iwI4iQCoVhWcTxCmb0K%2BooT8%2Fv%2F7%2F%2F%2FJ2r8fdwI1mwA3mQA3mgA8lAE8lAE4jwA9iwE%2BhwGfXifWvqz%2B%2Ff%2F58u%2Fev6Dt4tr%2B%2F%2F2ZuIUsggA7mgM6mAM3lgA5lgA6kQE%2FkwBChwHt4dv%2F%2F%2F728ei1bCi7VAC5XQ7kz7n%2F%2F%2F6bsZkgcB03lQA9lgM7kwA2iQktZToPK4r9%2F%2F%2F9%2F%2F%2FSqYK5UwDKZAS9WALIkFn%2B%2F%2F3%2F%2BP8oKccGGcIRJrERILYFEMwAAuEAAdX%2F%2Ff7%2F%2FP%2B%2BfDvGXQLIZgLEWgLOjlf7%2F%2F%2F%2F%2F%2F9QU90EAPQAAf8DAP0AAfMAAOUDAtr%2F%2F%2F%2F7%2B%2Fu2bCTIYwDPZgDBWQDSr4P%2F%2Fv%2F%2F%2FP5GRuABAPkAA%2FwBAfkDAPAAAesAAN%2F%2F%2B%2Fz%2F%2F%2F64g1C5VwDMYwK8Yg7y5tz8%2Fv%2FV1PYKDOcAAP0DAf4AAf0AAfYEAOwAAuAAAAD%2F%2FPvi28ymXyChTATRrIb8%2F%2F3v8fk6P8MAAdUCAvoAAP0CAP0AAfYAAO4AAACAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAA&lt;/Image&gt;</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">-&lt;Url type=&quot;application/x-suggestions+json&quot; method=&quot;GET&quot; template=&quot;http://suggestqueries.google.com/complete/search?output=firefox&amp;amp;client=seamonkey&amp;amp;hl={moz:locale}&amp;amp;q={searchTerms}&quot;/&gt;</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+&lt;Url type=&quot;application/x-suggestions+json&quot; method=&quot;GET&quot; template=&quot;http://suggestqueries.google.com/complete/search?output=firefox&amp;amp;client=firefox&amp;amp;hl={moz:locale}&amp;amp;q={searchTerms}&quot;/&gt;</span>
<a href="#l18.11"></a><span id="l18.11"> &lt;Url type=&quot;text/html&quot; method=&quot;GET&quot; template=&quot;http://www.google.com/search&quot;&gt;</span>
<a href="#l18.12"></a><span id="l18.12">   &lt;Param name=&quot;q&quot; value=&quot;{searchTerms}&quot;/&gt;</span>
<a href="#l18.13"></a><span id="l18.13">   &lt;Param name=&quot;ie&quot; value=&quot;utf-8&quot;/&gt;</span>
<a href="#l18.14"></a><span id="l18.14">   &lt;Param name=&quot;oe&quot; value=&quot;utf-8&quot;/&gt;</span>
<a href="#l18.15"></a><span id="l18.15">   &lt;Param name=&quot;aq&quot; value=&quot;t&quot;/&gt;</span>
<a href="#l18.16"></a><span id="l18.16">   &lt;!-- Dynamic parameters --&gt;</span>
<a href="#l18.17"></a><span id="l18.17">   &lt;Param name=&quot;rls&quot; value=&quot;{moz:distributionID}:{moz:locale}:{moz:official}&quot;/&gt;</span>
<a href="#l18.18"></a><span id="l18.18">   &lt;MozParam name=&quot;client&quot; condition=&quot;defaultEngine&quot; trueValue=&quot;seamonkey-a&quot; falseValue=&quot;seamonkey&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/suite/locales/jar.mn</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/suite/locales/jar.mn</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -181,16 +181,20 @@</span>
<a href="#l19.4"></a><span id="l19.4">   locale/@AB_CD@/communicator/pref/pref-smartupdate.dtd                     (%chrome/common/pref/pref-smartupdate.dtd)</span>
<a href="#l19.5"></a><span id="l19.5">   locale/@AB_CD@/communicator/pref/pref-sync.dtd                            (%chrome/common/pref/pref-sync.dtd)</span>
<a href="#l19.6"></a><span id="l19.6">   locale/@AB_CD@/communicator/pref/pref-tabs.dtd                            (%chrome/common/pref/pref-tabs.dtd)</span>
<a href="#l19.7"></a><span id="l19.7">   locale/@AB_CD@/communicator-platform/mac/pref/platformPrefOverlay.dtd     (%chrome/common/pref/mac/platformPrefOverlay.dtd)</span>
<a href="#l19.8"></a><span id="l19.8">   locale/@AB_CD@/communicator-platform/unix/pref/platformPrefOverlay.dtd    (%chrome/common/pref/unix/platformPrefOverlay.dtd)</span>
<a href="#l19.9"></a><span id="l19.9">   locale/@AB_CD@/communicator-platform/win/pref/platformPrefOverlay.dtd     (%chrome/common/pref/win/platformPrefOverlay.dtd)</span>
<a href="#l19.10"></a><span id="l19.10">   locale/@AB_CD@/communicator/profile/profileSelection.dtd                  (%chrome/common/profile/profileSelection.dtd)</span>
<a href="#l19.11"></a><span id="l19.11">   locale/@AB_CD@/communicator/profile/profileSelection.properties           (%chrome/common/profile/profileSelection.properties)</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineplus">+  locale/@AB_CD@/communicator/search/engineManager.dtd                      (%chrome/common/search/engineManager.dtd)</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  locale/@AB_CD@/communicator/search/engineManager.properties               (%chrome/common/search/engineManager.properties)</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+  locale/@AB_CD@/communicator/search/search.properties                      (%chrome/common/search/search.properties)</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+  locale/@AB_CD@/communicator/search/searchbar.dtd                          (%chrome/common/search/searchbar.dtd)</span>
<a href="#l19.16"></a><span id="l19.16">   locale/@AB_CD@/communicator/search/search-panel.dtd                       (%chrome/common/search/search-panel.dtd)</span>
<a href="#l19.17"></a><span id="l19.17">   locale/@AB_CD@/communicator/sidebar/customize.dtd                         (%chrome/common/sidebar/customize.dtd)</span>
<a href="#l19.18"></a><span id="l19.18">   locale/@AB_CD@/communicator/sidebar/preview.dtd                           (%chrome/common/sidebar/preview.dtd)</span>
<a href="#l19.19"></a><span id="l19.19">   locale/@AB_CD@/communicator/sidebar/sidebar.properties                    (%chrome/common/sidebar/sidebar.properties)</span>
<a href="#l19.20"></a><span id="l19.20">   locale/@AB_CD@/communicator/sidebar/sidebarOverlay.dtd                    (%chrome/common/sidebar/sidebarOverlay.dtd)</span>
<a href="#l19.21"></a><span id="l19.21">   locale/@AB_CD@/communicator/sync/syncBrand.dtd                            (%chrome/common/sync/syncBrand.dtd)</span>
<a href="#l19.22"></a><span id="l19.22">   locale/@AB_CD@/communicator/sync/syncSetup.dtd                            (%chrome/common/sync/syncSetup.dtd)</span>
<a href="#l19.23"></a><span id="l19.23">   locale/@AB_CD@/communicator/sync/syncSetup.properties                     (%chrome/common/sync/syncSetup.properties)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">new file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- /dev/null</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ b/suite/themes/classic/communicator/search/engineManager.css</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -0,0 +1,47 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineplus">+ *</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+ *</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+ * License.</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+ *</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+ * The Original Code is search engine manager code.</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineplus">+ *</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineplus">+ * Gavin Sharp.</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2006</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineplus">+ *</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineplus">+ *   Gavin Sharp &lt;gavin@gavinsharp.com&gt;</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineplus">+ *</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineplus">+ *</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineplus">+</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineplus">+#engineChildren::-moz-tree-image(engineName) {</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineplus">+  -moz-margin-end: 4px;</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineplus">+  -moz-margin-start: 1px;</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineplus">+  width: 16px;</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineplus">+  height: 16px;</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineplus">+}</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineplus">+</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineplus">+#engineChildren::-moz-tree-row {</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineplus">+  height: 20px;</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">new file mode 100755</span>
<a href="#l21.2"></a><span id="l21.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..7f5f55ef2b3ccc210bc66fec70c61405024819c0</span>
<a href="#l21.3"></a><span id="l21.3">GIT binary patch
literal 509
zc$@+K0RsMsP)&lt;h;3K|Lk000e1NJLTq000^Q000XJ1^@s6VZfd60000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBUzpGibPRCwB?Q%y?(Q53y8+Vm_aF(#;p
z5)4WVS`{sFCA0`y=&amp;p6U7WD^;wypXhxog+T7J)4@3zCeAghnT=h2xC#(R;&amp;vG!81H
z7Y_Hn`8bDr?|A{+w&amp;A~VcI6~Lg%2~Yc`#B7;nV&gt;bEPRLnVuV6KK}K#;=oALRH;j-U
zMMfzIh3FE}ux|0L1{LC?3!&gt;0CMF_iM-86AzCU#_Y2&amp;L2M8A8ZMI2;B+5WqA|sMqVD
zs_JYuo2_)~=%HMizbil9h!azEK0&amp;aJHfY~9SdA`ku0&amp;%czP}D3N~RPFg-kA&amp;yO1Oa
zWLbt}GMPyv5{joAn`3t)rXOt2&lt;xj6)*F%#LXf_l$*;~uMH;7)6|Gx8k2sBE1nM$QH
z)oK-3W@ntaH=LzYGWoeij*hn$Zd=M5u*}ZvIgZY9M$p6FVzF4&lt;iO1tzMX0^G&lt;3uz&lt;
zXfXoQOOks2B$LAz1wL_4D*kWuGK1Dj#M4n5_hnIXeM}_#G=HJBb$su1)X#POMEHd?
zFf&amp;r&amp;z5+ikw^{B&gt;JB+&gt;Ex8H}NUbFBTegzl+yP~i4FIHUT00000NkvXXu0mjf#iQ8)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">new file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineminus">--- /dev/null</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineplus">+++ b/suite/themes/classic/communicator/search/searchbar.css</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineat">@@ -0,0 +1,68 @@</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineplus">+.searchbar-textbox {</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineplus">+  width: 6em;</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineplus">+  min-width: 6em;</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineplus">+}</span>
<a href="#l22.9"></a><span id="l22.9" class="difflineplus">+</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineplus">+.textbox-input-box {</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineplus">+  margin: 0;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+}</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineplus">+/* ::::: searchbar-engine-button ::::: */</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+.searchbar-engine-image {</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+  height: 16px;</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineplus">+  width: 16px;</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/folder-item.png&quot;);</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineplus">+  -moz-image-region: rect(0px, 16px, 16px, 0px);</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineplus">+  -moz-margin-start: 2px;</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+}</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineplus">+</span>
<a href="#l22.24"></a><span id="l22.24" class="difflineplus">+.searchbar-engine-button {</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineplus">+  min-width: 0;</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineplus">+  -moz-padding-end: 2px;</span>
<a href="#l22.27"></a><span id="l22.27" class="difflineplus">+  background-color: transparent;</span>
<a href="#l22.28"></a><span id="l22.28" class="difflineplus">+}</span>
<a href="#l22.29"></a><span id="l22.29" class="difflineplus">+</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineplus">+.searchbar-dropmarker-image {</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineplus">+  list-style-image: url(&quot;chrome://communicator/skin/search/mainwindow-dropdown-arrow.png&quot;);</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+  -moz-image-region: rect(0, 13px, 11px, 0);</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineplus">+}</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineplus">+</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineplus">+.searchbar-engine-button[open=&quot;true&quot;] &gt; .searchbar-dropmarker-image {</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineplus">+  -moz-image-region: rect(0, 26px, 11px, 13px);</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineplus">+}</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineplus">+</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineplus">+</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineplus">+/* ::::: search-go-button ::::: */</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineplus">+</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineplus">+.search-go-container {</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineplus">+  -moz-box-align: center;</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineplus">+}</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineplus">+</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineplus">+.search-go-button {</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineplus">+  padding: 1px;</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineplus">+  -moz-padding-end: 2px;</span>
<a href="#l22.49"></a><span id="l22.49" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/Search-glass.png&quot;);</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineplus">+  -moz-image-region: rect(0px 16px 16px 0px);</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineplus">+}</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineplus">+</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineplus">+.search-go-button:-moz-system-metric(touch-enabled) {</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineplus">+  -moz-padding-start: 5px;</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineplus">+  -moz-padding-end: 3px;</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineplus">+}</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineplus">+</span>
<a href="#l22.58"></a><span id="l22.58" class="difflineplus">+.search-go-button:-moz-locale-dir(rtl) {</span>
<a href="#l22.59"></a><span id="l22.59" class="difflineplus">+  -moz-transform: scaleX(-1);</span>
<a href="#l22.60"></a><span id="l22.60" class="difflineplus">+}</span>
<a href="#l22.61"></a><span id="l22.61" class="difflineplus">+</span>
<a href="#l22.62"></a><span id="l22.62" class="difflineplus">+.search-go-button:hover {</span>
<a href="#l22.63"></a><span id="l22.63" class="difflineplus">+  -moz-image-region: rect(0px 32px 16px 16px);</span>
<a href="#l22.64"></a><span id="l22.64" class="difflineplus">+}</span>
<a href="#l22.65"></a><span id="l22.65" class="difflineplus">+</span>
<a href="#l22.66"></a><span id="l22.66" class="difflineplus">+.search-go-button:hover:active {</span>
<a href="#l22.67"></a><span id="l22.67" class="difflineplus">+  -moz-image-region: rect(0px, 48px, 16px, 32px);</span>
<a href="#l22.68"></a><span id="l22.68" class="difflineplus">+}</span>
<a href="#l22.69"></a><span id="l22.69" class="difflineplus">+</span>
<a href="#l22.70"></a><span id="l22.70" class="difflineplus">+.searchbar-engine-menuitem[selected=&quot;true&quot;] &gt; .menu-iconic-text {</span>
<a href="#l22.71"></a><span id="l22.71" class="difflineplus">+  font-weight: bold;</span>
<a href="#l22.72"></a><span id="l22.72" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/suite/themes/classic/jar.mn</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/suite/themes/classic/jar.mn</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -100,17 +100,20 @@ classic.jar:</span>
<a href="#l23.4"></a><span id="l23.4">   skin/classic/communicator/directory/folder-open.gif                   (communicator/directory/folder-open.gif)</span>
<a href="#l23.5"></a><span id="l23.5">   skin/classic/communicator/directory/file.gif                          (communicator/directory/file.gif)</span>
<a href="#l23.6"></a><span id="l23.6">   skin/classic/communicator/downloads/dl-remove.png                     (communicator/downloads/dl-remove.png)</span>
<a href="#l23.7"></a><span id="l23.7">   skin/classic/communicator/history/calendar.png                        (communicator/history/calendar.png)</span>
<a href="#l23.8"></a><span id="l23.8">   skin/classic/communicator/profile/migrate.gif                         (communicator/profile/migrate.gif)</span>
<a href="#l23.9"></a><span id="l23.9">   skin/classic/communicator/profile/profile.css                         (communicator/profile/profile.css)</span>
<a href="#l23.10"></a><span id="l23.10">   skin/classic/communicator/profile/profileManager.css                  (communicator/profile/profileManager.css)</span>
<a href="#l23.11"></a><span id="l23.11">   skin/classic/communicator/profile/profileicon-large.gif               (communicator/profile/profileicon-large.gif)</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineplus">+  skin/classic/communicator/search/engineManager.css                    (communicator/search/engineManager.css)</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  skin/classic/communicator/search/mainwindow-dropdown-arrow.png        (communicator/search/mainwindow-dropdown-arrow.png)</span>
<a href="#l23.14"></a><span id="l23.14">   skin/classic/communicator/search/search.css                           (communicator/search/search.css)</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+  skin/classic/communicator/search/searchbar.css                        (communicator/search/searchbar.css)</span>
<a href="#l23.16"></a><span id="l23.16">   skin/classic/communicator/sidebar/sbtab-twisty.gif                    (communicator/sidebar/sbtab-twisty.gif)</span>
<a href="#l23.17"></a><span id="l23.17">   skin/classic/communicator/sidebar/sbtab-twisty-open.gif               (communicator/sidebar/sbtab-twisty-open.gif)</span>
<a href="#l23.18"></a><span id="l23.18">   skin/classic/communicator/sidebar/customize.css                       (communicator/sidebar/customize.css)</span>
<a href="#l23.19"></a><span id="l23.19">   skin/classic/communicator/sidebar/preview.css                         (communicator/sidebar/preview.css)</span>
<a href="#l23.20"></a><span id="l23.20">   skin/classic/communicator/sidebar/sidebarBindings.xml                 (communicator/sidebar/sidebarBindings.xml)</span>
<a href="#l23.21"></a><span id="l23.21">   skin/classic/communicator/sidebar/sidebarListView.css                 (communicator/sidebar/sidebarListView.css)</span>
<a href="#l23.22"></a><span id="l23.22">   skin/classic/communicator/xpinstall/xpinstall.css                     (communicator/xpinstall/xpinstall.css)</span>
<a href="#l23.23"></a><span id="l23.23">   skin/classic/communicator/icons/audioFeedIcon.png                     (communicator/icons/feedIcon.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/suite/themes/classic/mac/navigator/navigator.css</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/suite/themes/classic/mac/navigator/navigator.css</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -436,30 +436,46 @@ toolbar[mode=&quot;text&quot;] &gt; #window-controls </span>
<a href="#l24.4"></a><span id="l24.4">   border-top: 1px solid #D9D9D9; /* Same color as menuseparator is probably sane here */</span>
<a href="#l24.5"></a><span id="l24.5">   padding: 2px;</span>
<a href="#l24.6"></a><span id="l24.6"> }</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8"> .autocomplete-search-engine-img {</span>
<a href="#l24.9"></a><span id="l24.9">   -moz-margin-end: 4px;</span>
<a href="#l24.10"></a><span id="l24.10"> }</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(treecolAutoCompleteComment) {</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  color: GrayText;</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+}</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+</span>
<a href="#l24.16"></a><span id="l24.16"> /* ::::: searchbutton ::::: */</span>
<a href="#l24.17"></a><span id="l24.17"> </span>
<a href="#l24.18"></a><span id="l24.18"> #search-button {</span>
<a href="#l24.19"></a><span id="l24.19">   margin: 0;</span>
<a href="#l24.20"></a><span id="l24.20">   padding: 0;</span>
<a href="#l24.21"></a><span id="l24.21">   border: 0;</span>
<a href="#l24.22"></a><span id="l24.22">   list-style-image: url(&quot;chrome://global/skin/icons/search-textbox.png&quot;);</span>
<a href="#l24.23"></a><span id="l24.23"> }</span>
<a href="#l24.24"></a><span id="l24.24"> </span>
<a href="#l24.25"></a><span id="l24.25"> toolbar[mode=&quot;text&quot;] #search-button &gt; .button-box &gt; .button-icon,</span>
<a href="#l24.26"></a><span id="l24.26"> toolbar[mode=&quot;icons&quot;] #search-button &gt; .button-box &gt; .button-text {</span>
<a href="#l24.27"></a><span id="l24.27">   display: none;</span>
<a href="#l24.28"></a><span id="l24.28"> }</span>
<a href="#l24.29"></a><span id="l24.29"> </span>
<a href="#l24.30"></a><span id="l24.30" class="difflineplus">+/* ::::: search bar ::::: */</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineplus">+</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(suggesthint, treecolAutoCompleteComment),</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(suggestfirst, treecolAutoCompleteComment) {</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineplus">+  color: GrayText;</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineplus">+  font-size: smaller;</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineplus">+}</span>
<a href="#l24.37"></a><span id="l24.37" class="difflineplus">+</span>
<a href="#l24.38"></a><span id="l24.38" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell(suggesthint) {</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineplus">+  border-top: 1px solid GrayText;</span>
<a href="#l24.40"></a><span id="l24.40" class="difflineplus">+}</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineplus">+</span>
<a href="#l24.42"></a><span id="l24.42"> /* ::::: sidebar splitter ::::: */</span>
<a href="#l24.43"></a><span id="l24.43"> </span>
<a href="#l24.44"></a><span id="l24.44"> #sidebar-splitter {</span>
<a href="#l24.45"></a><span id="l24.45">   border-left: none;</span>
<a href="#l24.46"></a><span id="l24.46">   border-right: none;</span>
<a href="#l24.47"></a><span id="l24.47">   min-width: 5px;</span>
<a href="#l24.48"></a><span id="l24.48"> }</span>
<a href="#l24.49"></a><span id="l24.49"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/suite/themes/classic/navigator/navigator.css</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/suite/themes/classic/navigator/navigator.css</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -471,16 +471,20 @@ panel[nomatch=&quot;true&quot;] &gt; .autocomplete-se</span>
<a href="#l25.4"></a><span id="l25.4">   background-color: Highlight;</span>
<a href="#l25.5"></a><span id="l25.5">   color: HighlightText;</span>
<a href="#l25.6"></a><span id="l25.6"> }</span>
<a href="#l25.7"></a><span id="l25.7"> </span>
<a href="#l25.8"></a><span id="l25.8"> .autocomplete-search-engine-img {</span>
<a href="#l25.9"></a><span id="l25.9">   -moz-margin-end: 4px;</span>
<a href="#l25.10"></a><span id="l25.10"> }</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(treecolAutoCompleteComment) {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  color: GrayText;</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+}</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+</span>
<a href="#l25.16"></a><span id="l25.16"> /* ::::: go and searchbuttons ::::: */</span>
<a href="#l25.17"></a><span id="l25.17"> </span>
<a href="#l25.18"></a><span id="l25.18"> #search-button, </span>
<a href="#l25.19"></a><span id="l25.19"> #go-button {</span>
<a href="#l25.20"></a><span id="l25.20">   margin-top: 0px;</span>
<a href="#l25.21"></a><span id="l25.21">   margin-bottom: 0px;</span>
<a href="#l25.22"></a><span id="l25.22">   -moz-margin-start: 0px;</span>
<a href="#l25.23"></a><span id="l25.23">   -moz-margin-end: 4px;</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineat">@@ -502,16 +506,28 @@ panel[nomatch=&quot;true&quot;] &gt; .autocomplete-se</span>
<a href="#l25.25"></a><span id="l25.25">   -moz-image-region: rect(0 53px 17px 36px);</span>
<a href="#l25.26"></a><span id="l25.26"> }</span>
<a href="#l25.27"></a><span id="l25.27"> </span>
<a href="#l25.28"></a><span id="l25.28"> toolbar[mode=&quot;text&quot;] #search-button &gt; .button-box &gt; .button-icon,</span>
<a href="#l25.29"></a><span id="l25.29"> toolbar[mode=&quot;icons&quot;] #search-button &gt; .button-box &gt; .button-text {</span>
<a href="#l25.30"></a><span id="l25.30">   display: none;</span>
<a href="#l25.31"></a><span id="l25.31"> }</span>
<a href="#l25.32"></a><span id="l25.32"> </span>
<a href="#l25.33"></a><span id="l25.33" class="difflineplus">+/* ::::: search bar ::::: */</span>
<a href="#l25.34"></a><span id="l25.34" class="difflineplus">+</span>
<a href="#l25.35"></a><span id="l25.35" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(suggesthint, treecolAutoCompleteComment),</span>
<a href="#l25.36"></a><span id="l25.36" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(suggestfirst, treecolAutoCompleteComment) {</span>
<a href="#l25.37"></a><span id="l25.37" class="difflineplus">+  color: GrayText;</span>
<a href="#l25.38"></a><span id="l25.38" class="difflineplus">+  font-size: smaller;</span>
<a href="#l25.39"></a><span id="l25.39" class="difflineplus">+}</span>
<a href="#l25.40"></a><span id="l25.40" class="difflineplus">+</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell(suggesthint) {</span>
<a href="#l25.42"></a><span id="l25.42" class="difflineplus">+  border-top: 1px solid GrayText;</span>
<a href="#l25.43"></a><span id="l25.43" class="difflineplus">+}</span>
<a href="#l25.44"></a><span id="l25.44" class="difflineplus">+</span>
<a href="#l25.45"></a><span id="l25.45"> /* ::::: sidebar splitter ::::: */</span>
<a href="#l25.46"></a><span id="l25.46"> </span>
<a href="#l25.47"></a><span id="l25.47"> #sidebar-splitter {</span>
<a href="#l25.48"></a><span id="l25.48">   border-left: none;</span>
<a href="#l25.49"></a><span id="l25.49">   border-right: none;</span>
<a href="#l25.50"></a><span id="l25.50">   min-width: 5px;</span>
<a href="#l25.51"></a><span id="l25.51"> }</span>
<a href="#l25.52"></a><span id="l25.52"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">new file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineminus">--- /dev/null</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineplus">+++ b/suite/themes/modern/communicator/search/engineManager.css</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineat">@@ -0,0 +1,47 @@</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l26.6"></a><span id="l26.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l26.7"></a><span id="l26.7" class="difflineplus">+ *</span>
<a href="#l26.8"></a><span id="l26.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+ *</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l26.14"></a><span id="l26.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineplus">+ * License.</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineplus">+ *</span>
<a href="#l26.18"></a><span id="l26.18" class="difflineplus">+ * The Original Code is search engine manager code.</span>
<a href="#l26.19"></a><span id="l26.19" class="difflineplus">+ *</span>
<a href="#l26.20"></a><span id="l26.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l26.21"></a><span id="l26.21" class="difflineplus">+ * Gavin Sharp.</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2006</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineplus">+ *</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineplus">+ *   Gavin Sharp &lt;gavin@gavinsharp.com&gt;</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineplus">+ *</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l26.34"></a><span id="l26.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l26.35"></a><span id="l26.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l26.36"></a><span id="l26.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l26.37"></a><span id="l26.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l26.38"></a><span id="l26.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l26.39"></a><span id="l26.39" class="difflineplus">+ *</span>
<a href="#l26.40"></a><span id="l26.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineplus">+</span>
<a href="#l26.42"></a><span id="l26.42" class="difflineplus">+#engineChildren::-moz-tree-image(engineName) {</span>
<a href="#l26.43"></a><span id="l26.43" class="difflineplus">+  -moz-margin-end: 4px;</span>
<a href="#l26.44"></a><span id="l26.44" class="difflineplus">+  -moz-margin-start: 1px;</span>
<a href="#l26.45"></a><span id="l26.45" class="difflineplus">+  width: 16px;</span>
<a href="#l26.46"></a><span id="l26.46" class="difflineplus">+  height: 16px;</span>
<a href="#l26.47"></a><span id="l26.47" class="difflineplus">+}</span>
<a href="#l26.48"></a><span id="l26.48" class="difflineplus">+</span>
<a href="#l26.49"></a><span id="l26.49" class="difflineplus">+#engineChildren::-moz-tree-row {</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineplus">+  height: 20px;</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">new file mode 100644</span>
<a href="#l27.2"></a><span id="l27.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..dc141ef9f4c61427f65b54024740abc82e26e46c</span>
<a href="#l27.3"></a><span id="l27.3">GIT binary patch
literal 576
zc$@)10&gt;Ax&lt;P)&lt;h;3K|Lk000e1NJLTq000^Q000XJ1^@s6VZfd600001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2ipS*
z04^p)I#4M900F&gt;BL_t(I%cYaSYZE~f#=p0_)uf7$N+YP)LotgigI&lt;c@C8xdg81_~#
z2J|M_Kf{}UfhUh9r&lt;}ayBD6ONEfjl`4eW+AV0U(t?e2`1H?k?|!8q{2zzp-7@4fF4
z)?A;@PAmWfz+zG5SOZWj-E}=h&gt;p(t!)3m*FY5{Oqw*c4-Q~*i&lt;Ie&gt;ztoHY#@Ck}ub
zfI5KN70`nBbK`1V5cr`D2Hgd)$*xKODVMKgN97Wz)9E~{*Xv=U(SU8+D9aMF*$i2h
zJ?i)S&lt;5iA+%%)FHCeinMn|H85ge$G_JC*RZAG~_rxc}4iZwb`v^`@iIC&gt;RchUz^P)
z;y6aT-428hQ=+AIYNP$fJNcWZ&amp;yK#FpS|3w)o?MN&lt;MoTZqbN)BP$qxxSxbc{S_mNq
zzV8Q&lt;$ppUd2SSJe5iM4fP5~%GnZ%(?4i9!)$5EEzV7GM~%H%MVNzA2F;AY}FOlv(T
ziXw1b_a=z&gt;X#rp!W$D-^djGEFeflLYKSWs?aS#e~cV!q1&gt;;_2H(G~YgjZ&gt;M|9Ovyg
zl@}cCoX-`m4cWgAY;{;IP8?OzW(HPuT~E`0#M{8khiOG=(RDoy0Dk}&amp;vcPo3xCP+=
O0000&lt;MNUMnLSTYf-uKi1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">new file mode 100644</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineminus">--- /dev/null</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineplus">+++ b/suite/themes/modern/communicator/search/searchbar.css</span>
<a href="#l28.4"></a><span id="l28.4" class="difflineat">@@ -0,0 +1,62 @@</span>
<a href="#l28.5"></a><span id="l28.5" class="difflineplus">+.searchbar-textbox {</span>
<a href="#l28.6"></a><span id="l28.6" class="difflineplus">+  width: 6em;</span>
<a href="#l28.7"></a><span id="l28.7" class="difflineplus">+  min-width: 6em;</span>
<a href="#l28.8"></a><span id="l28.8" class="difflineplus">+}</span>
<a href="#l28.9"></a><span id="l28.9" class="difflineplus">+</span>
<a href="#l28.10"></a><span id="l28.10" class="difflineplus">+.autocomplete-textbox-container {</span>
<a href="#l28.11"></a><span id="l28.11" class="difflineplus">+  -moz-box-align: stretch;</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+}</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineplus">+.textbox-input-box {</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineplus">+  margin: 0;</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineplus">+}</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineplus">+</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineplus">+/* ::::: searchbar-engine-button ::::: */</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineplus">+</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineplus">+.searchbar-engine-image {</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineplus">+  height: 16px;</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+  width: 16px;</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineplus">+  list-style-image: url(&quot;chrome://communicator/skin/directory/file-icon.gif&quot;);</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineplus">+  -moz-margin-start: 2px;</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+}</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineplus">+.searchbar-engine-button {</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+  min-width: 0;</span>
<a href="#l28.29"></a><span id="l28.29" class="difflineplus">+  -moz-padding-end: 2px;</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineplus">+  -moz-box-align: center;</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineplus">+  background: none;</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+}</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineplus">+</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+.searchbar-dropmarker-image {</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineplus">+  list-style-image: url(&quot;chrome://communicator/skin/search/mainwindow-dropdown-arrow.png&quot;);</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineplus">+  -moz-image-region: rect(0, 13px, 11px, 0);</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineplus">+}</span>
<a href="#l28.38"></a><span id="l28.38" class="difflineplus">+</span>
<a href="#l28.39"></a><span id="l28.39" class="difflineplus">+.searchbar-engine-button[open=&quot;true&quot;] &gt; .searchbar-dropmarker-image {</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineplus">+  -moz-image-region: rect(0, 26px, 11px, 13px);</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineplus">+}</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineplus">+</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineplus">+</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineplus">+/* ::::: search-go-button ::::: */</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineplus">+</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineplus">+.search-go-container {</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineplus">+  -moz-box-align: center;</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineplus">+}</span>
<a href="#l28.49"></a><span id="l28.49" class="difflineplus">+</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineplus">+.search-go-button {</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineplus">+  padding: 1px;</span>
<a href="#l28.52"></a><span id="l28.52" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/search.gif&quot;);</span>
<a href="#l28.53"></a><span id="l28.53" class="difflineplus">+}</span>
<a href="#l28.54"></a><span id="l28.54" class="difflineplus">+</span>
<a href="#l28.55"></a><span id="l28.55" class="difflineplus">+.search-go-button:-moz-system-metric(touch-enabled) {</span>
<a href="#l28.56"></a><span id="l28.56" class="difflineplus">+  -moz-padding-start: 5px;</span>
<a href="#l28.57"></a><span id="l28.57" class="difflineplus">+  -moz-padding-end: 3px;</span>
<a href="#l28.58"></a><span id="l28.58" class="difflineplus">+}</span>
<a href="#l28.59"></a><span id="l28.59" class="difflineplus">+</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineplus">+.search-go-button:-moz-locale-dir(rtl) {</span>
<a href="#l28.61"></a><span id="l28.61" class="difflineplus">+  -moz-transform: scaleX(-1);</span>
<a href="#l28.62"></a><span id="l28.62" class="difflineplus">+}</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineplus">+</span>
<a href="#l28.64"></a><span id="l28.64" class="difflineplus">+.searchbar-engine-menuitem[selected=&quot;true&quot;] &gt; .menu-iconic-text {</span>
<a href="#l28.65"></a><span id="l28.65" class="difflineplus">+  font-weight: bold;</span>
<a href="#l28.66"></a><span id="l28.66" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/suite/themes/modern/jar.mn</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/suite/themes/modern/jar.mn</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -98,17 +98,20 @@ modern.jar:</span>
<a href="#l29.4"></a><span id="l29.4">   skin/modern/communicator/icons/smileys/smiley-foot.png           (communicator/icons/smileys/smiley-foot.png)</span>
<a href="#l29.5"></a><span id="l29.5">   skin/modern/communicator/icons/smileys/smiley-innocent.png       (communicator/icons/smileys/smiley-innocent.png)</span>
<a href="#l29.6"></a><span id="l29.6">   skin/modern/communicator/icons/smileys/smiley-cry.png            (communicator/icons/smileys/smiley-cry.png)</span>
<a href="#l29.7"></a><span id="l29.7">   skin/modern/communicator/icons/smileys/smiley-sealed.png         (communicator/icons/smileys/smiley-sealed.png)</span>
<a href="#l29.8"></a><span id="l29.8">   skin/modern/communicator/icons/videoFeedIcon.png                 (communicator/icons/feedIcon.png)</span>
<a href="#l29.9"></a><span id="l29.9">   skin/modern/communicator/profile/migrate.gif                     (communicator/profile/migrate.gif)</span>
<a href="#l29.10"></a><span id="l29.10">   skin/modern/communicator/profile/profile.gif                     (communicator/profile/profile.gif)</span>
<a href="#l29.11"></a><span id="l29.11">   skin/modern/communicator/profile/profile.css                     (communicator/profile/profile.css)</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineplus">+  skin/modern/communicator/search/engineManager.css                (communicator/search/engineManager.css)</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  skin/modern/communicator/search/mainwindow-dropdown-arrow.png    (communicator/search/mainwindow-dropdown-arrow.png)</span>
<a href="#l29.14"></a><span id="l29.14">   skin/modern/communicator/search/search.css                       (communicator/search/search.css)</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineplus">+  skin/modern/communicator/search/searchbar.css                    (communicator/search/searchbar.css)</span>
<a href="#l29.16"></a><span id="l29.16">   skin/modern/communicator/sidebar/sidebarBindings.xml             (communicator/sidebar/sidebarBindings.xml)</span>
<a href="#l29.17"></a><span id="l29.17">   skin/modern/communicator/sidebar/sbar-top.gif                    (communicator/sidebar/sbar-top.gif)</span>
<a href="#l29.18"></a><span id="l29.18">   skin/modern/communicator/sidebar/sbar-top-tabopen.gif            (communicator/sidebar/sbar-top-tabopen.gif)</span>
<a href="#l29.19"></a><span id="l29.19">   skin/modern/communicator/sidebar/sbtab-rit-top-act.gif           (communicator/sidebar/sbtab-rit-top-act.gif)</span>
<a href="#l29.20"></a><span id="l29.20">   skin/modern/communicator/sidebar/sbtab-rit-btm-act.gif           (communicator/sidebar/sbtab-rit-btm-act.gif)</span>
<a href="#l29.21"></a><span id="l29.21">   skin/modern/communicator/sidebar/sbtab-rit-top.gif               (communicator/sidebar/sbtab-rit-top.gif)</span>
<a href="#l29.22"></a><span id="l29.22">   skin/modern/communicator/sidebar/sbtab-mid.gif                   (communicator/sidebar/sbtab-mid.gif)</span>
<a href="#l29.23"></a><span id="l29.23">   skin/modern/communicator/sidebar/sbtab-lft-act.gif               (communicator/sidebar/sbtab-lft-act.gif)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/suite/themes/modern/navigator/navigator.css</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/suite/themes/modern/navigator/navigator.css</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -666,16 +666,20 @@ panel[nomatch=&quot;true&quot;] &gt; .autocomplete-se</span>
<a href="#l30.4"></a><span id="l30.4">   -moz-margin-end: 3px;</span>
<a href="#l30.5"></a><span id="l30.5">   list-style-image: url(&quot;chrome://navigator/skin/toolbar/ubhist-arrow.gif&quot;);</span>
<a href="#l30.6"></a><span id="l30.6"> }</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8"> .autocomplete-history-dropmarker[open=&quot;true&quot;] {</span>
<a href="#l30.9"></a><span id="l30.9">   list-style-image: url(&quot;chrome://navigator/skin/toolbar/ubhist-arrow-act.gif&quot;);</span>
<a href="#l30.10"></a><span id="l30.10"> }</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(treecolAutoCompleteComment) {</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+  color: #999999;</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineplus">+}</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+</span>
<a href="#l30.16"></a><span id="l30.16"> /* ::::: go and searchbuttons ::::: */</span>
<a href="#l30.17"></a><span id="l30.17"> </span>
<a href="#l30.18"></a><span id="l30.18"> #go-button,</span>
<a href="#l30.19"></a><span id="l30.19"> #search-button {</span>
<a href="#l30.20"></a><span id="l30.20">   margin-top: 0px;</span>
<a href="#l30.21"></a><span id="l30.21">   margin-bottom: 0px;</span>
<a href="#l30.22"></a><span id="l30.22">   -moz-margin-start: 0px;</span>
<a href="#l30.23"></a><span id="l30.23">   -moz-margin-end: 4px;</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineat">@@ -683,16 +687,28 @@ panel[nomatch=&quot;true&quot;] &gt; .autocomplete-se</span>
<a href="#l30.25"></a><span id="l30.25">   font: message-box;</span>
<a href="#l30.26"></a><span id="l30.26">   font-weight: bold;</span>
<a href="#l30.27"></a><span id="l30.27"> }</span>
<a href="#l30.28"></a><span id="l30.28"> </span>
<a href="#l30.29"></a><span id="l30.29"> #search-button {</span>
<a href="#l30.30"></a><span id="l30.30">   list-style-image: url(&quot;chrome://global/skin/icons/search.gif&quot;);</span>
<a href="#l30.31"></a><span id="l30.31"> }</span>
<a href="#l30.32"></a><span id="l30.32"> </span>
<a href="#l30.33"></a><span id="l30.33" class="difflineplus">+/* ::::: search bar ::::: */</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineplus">+</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(suggesthint, treecolAutoCompleteComment),</span>
<a href="#l30.36"></a><span id="l30.36" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell-text(suggestfirst, treecolAutoCompleteComment) {</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineplus">+  color: #999999;</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineplus">+  font-size: smaller;</span>
<a href="#l30.39"></a><span id="l30.39" class="difflineplus">+}</span>
<a href="#l30.40"></a><span id="l30.40" class="difflineplus">+</span>
<a href="#l30.41"></a><span id="l30.41" class="difflineplus">+.autocomplete-treebody::-moz-tree-cell(suggesthint) {</span>
<a href="#l30.42"></a><span id="l30.42" class="difflineplus">+  border-top: 1px solid #999999;</span>
<a href="#l30.43"></a><span id="l30.43" class="difflineplus">+}</span>
<a href="#l30.44"></a><span id="l30.44" class="difflineplus">+</span>
<a href="#l30.45"></a><span id="l30.45"> /* ::::: navigator throbber ::::: */</span>
<a href="#l30.46"></a><span id="l30.46"> </span>
<a href="#l30.47"></a><span id="l30.47"> #throbber-box {</span>
<a href="#l30.48"></a><span id="l30.48">   background: none; /* override bg used to cover toolbar line */</span>
<a href="#l30.49"></a><span id="l30.49">   margin: 0px 0px 2px;</span>
<a href="#l30.50"></a><span id="l30.50"> }</span>
<a href="#l30.51"></a><span id="l30.51"> </span>
<a href="#l30.52"></a><span id="l30.52"> /* ::::: personal toolbar ::::: */</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

