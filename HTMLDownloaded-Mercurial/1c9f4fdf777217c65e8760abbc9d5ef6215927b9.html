<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 28797:1c9f4fdf777217c65e8760abbc9d5ef6215927b9</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 1c9f4fdf777217c65e8760abbc9d5ef6215927b9" />
<meta property="og:url" content="/comm-central/rev/1c9f4fdf777217c65e8760abbc9d5ef6215927b9" />
<meta property="og:description" content="Bug 1615417 - Implement the subdialogs in Account Manager. r=mkmelin DONTBUILD" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 1c9f4fdf777217c65e8760abbc9d5ef6215927b9 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/1c9f4fdf777217c65e8760abbc9d5ef6215927b9">shortlog</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/1c9f4fdf777217c65e8760abbc9d5ef6215927b9">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9">files</a> |
changeset |
<a href="/comm-central/raw-rev/1c9f4fdf777217c65e8760abbc9d5ef6215927b9">raw</a>  | <a href="/comm-central/archive/1c9f4fdf777217c65e8760abbc9d5ef6215927b9.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1615417">Bug 1615417</a> - Implement the subdialogs in Account Manager. r=mkmelin DONTBUILD
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#105;&#99;&#104;&#97;&#114;&#100;&#32;&#77;&#97;&#114;&#116;&#105;&#32;&#60;&#114;&#105;&#99;&#104;&#97;&#114;&#100;&#46;&#109;&#97;&#114;&#116;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 19 Feb 2020 12:36:42 +0200</td></tr>

<tr>
 <td>changeset 28797</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/1c9f4fdf777217c65e8760abbc9d5ef6215927b9">1c9f4fdf777217c65e8760abbc9d5ef6215927b9</a></td>
</tr>



<tr>
<td>parent 28796</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7a6415f8b8cdcf494368f2b87de8bf549ef915c3">7a6415f8b8cdcf494368f2b87de8bf549ef915c3</a>
</td>
</tr>

<tr>
<td>child 28798</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7a9663e64dc8fa84e4dc2d5c11918add1a5aa457">7a9663e64dc8fa84e4dc2d5c11918add1a5aa457</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=1c9f4fdf777217c65e8760abbc9d5ef6215927b9">17043</a></td></tr>
<tr><td>push user</td><td>mkmelin@iki.fi</td></tr>
<tr><td>push date</td><td class="date age">Wed, 19 Feb 2020 10:38:58 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@1c9f4fdf7772 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=1c9f4fdf777217c65e8760abbc9d5ef6215927b9">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=1c9f4fdf777217c65e8760abbc9d5ef6215927b9&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1c9f4fdf777217c65e8760abbc9d5ef6215927b9&newProject=comm-central&newRevision=7a6415f8b8cdcf494368f2b87de8bf549ef915c3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1c9f4fdf777217c65e8760abbc9d5ef6215927b9&newProject=comm-central&newRevision=7a6415f8b8cdcf494368f2b87de8bf549ef915c3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1c9f4fdf777217c65e8760abbc9d5ef6215927b9&newProject=comm-central&newRevision=7a6415f8b8cdcf494368f2b87de8bf549ef915c3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1615417">1615417</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1615417">Bug 1615417</a> - Implement the subdialogs in Account Manager. r=mkmelin DONTBUILD</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/chat/content/otr-finger.js">chat/content/otr-finger.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/chat/content/otr-finger.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/chat/content/otr-finger.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/chat/content/otr-finger.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/chat/content/otr-finger.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/chat/content/otr-finger.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/components/im/content/am-im.js">mail/components/im/content/am-im.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/components/im/content/am-im.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/components/im/content/am-im.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/components/im/content/am-im.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/components/im/content/am-im.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/components/im/content/am-im.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/AccountManager.dtd">mail/locales/en-US/chrome/messenger/AccountManager.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/AccountManager.dtd">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/AccountManager.dtd">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/AccountManager.dtd">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/AccountManager.dtd">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/AccountManager.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd">mail/locales/en-US/chrome/messenger/am-identity-edit.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/test/browser/account/browser_archiveOptions.js">mail/test/browser/account/browser_archiveOptions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/test/browser/account/browser_archiveOptions.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/test/browser/account/browser_archiveOptions.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/test/browser/account/browser_archiveOptions.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/test/browser/account/browser_archiveOptions.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/test/browser/account/browser_archiveOptions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/themes/shared/mail/accountManage.css">mail/themes/shared/mail/accountManage.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/themes/shared/mail/accountManage.css">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/themes/shared/mail/accountManage.css">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/themes/shared/mail/accountManage.css">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/themes/shared/mail/accountManage.css">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mail/themes/shared/mail/accountManage.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/AccountManager.xhtml">mailnews/base/prefs/content/AccountManager.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/AccountManager.xhtml">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/AccountManager.xhtml">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/AccountManager.xhtml">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/AccountManager.xhtml">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/AccountManager.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-addressing.js">mailnews/base/prefs/content/am-addressing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-addressing.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-addressing.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-addressing.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-addressing.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-addressing.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-archiveoptions.js">mailnews/base/prefs/content/am-archiveoptions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-archiveoptions.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-archiveoptions.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-archiveoptions.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-archiveoptions.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-archiveoptions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-copies.js">mailnews/base/prefs/content/am-copies.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-copies.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-copies.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-copies.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-copies.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-copies.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identities-list.js">mailnews/base/prefs/content/am-identities-list.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identities-list.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identities-list.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identities-list.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identities-list.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identities-list.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.js">mailnews/base/prefs/content/am-identity-edit.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.xhtml">mailnews/base/prefs/content/am-identity-edit.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.xhtml">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.xhtml">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.xhtml">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.xhtml">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-identity-edit.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.js">mailnews/base/prefs/content/am-main.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.xhtml">mailnews/base/prefs/content/am-main.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.xhtml">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.xhtml">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.xhtml">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.xhtml">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-main.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-offline.js">mailnews/base/prefs/content/am-offline.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-offline.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-offline.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-offline.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-offline.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-offline.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.js">mailnews/base/prefs/content/am-server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.xhtml">mailnews/base/prefs/content/am-server.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.xhtml">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.xhtml">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.xhtml">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.xhtml">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/am-server.xhtml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/amUtils.js">mailnews/base/prefs/content/amUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/amUtils.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/amUtils.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/amUtils.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/amUtils.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/base/prefs/content/amUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/mdn/content/am-mdn.js">mailnews/extensions/mdn/content/am-mdn.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/mdn/content/am-mdn.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/mdn/content/am-mdn.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/mdn/content/am-mdn.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/mdn/content/am-mdn.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/mdn/content/am-mdn.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/smime/content/am-smime.js">mailnews/extensions/smime/content/am-smime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/smime/content/am-smime.js">file</a> |
<a href="/comm-central/annotate/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/smime/content/am-smime.js">annotate</a> |
<a href="/comm-central/diff/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/smime/content/am-smime.js">diff</a> |
<a href="/comm-central/comparison/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/smime/content/am-smime.js">comparison</a> |
<a href="/comm-central/log/1c9f4fdf777217c65e8760abbc9d5ef6215927b9/mailnews/extensions/smime/content/am-smime.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/content/otr-finger.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/content/otr-finger.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -5,17 +5,17 @@</span>
<a href="#l1.4"></a><span id="l1.4"> const { Services } = ChromeUtils.import(&quot;resource:///modules/imServices.jsm&quot;);</span>
<a href="#l1.5"></a><span id="l1.5"> const { OTR } = ChromeUtils.import(&quot;resource:///modules/OTR.jsm&quot;);</span>
<a href="#l1.6"></a><span id="l1.6"> const { Localization } = ChromeUtils.import(</span>
<a href="#l1.7"></a><span id="l1.7">   &quot;resource://gre/modules/Localization.jsm&quot;</span>
<a href="#l1.8"></a><span id="l1.8"> );</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> const syncL10n = new Localization([&quot;messenger/otr/finger.ftl&quot;], true);</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-var [account] = window.arguments;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+var [account] = window.arguments.account;</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15"> var gFingers;</span>
<a href="#l1.16"></a><span id="l1.16"> var fingerTreeView = {</span>
<a href="#l1.17"></a><span id="l1.17">   selection: null,</span>
<a href="#l1.18"></a><span id="l1.18">   rowCount: 0,</span>
<a href="#l1.19"></a><span id="l1.19">   setTree(tree) {},</span>
<a href="#l1.20"></a><span id="l1.20">   getImageSrc(row, column) {},</span>
<a href="#l1.21"></a><span id="l1.21">   getProgressMode(row, column) {},</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/im/content/am-im.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/im/content/am-im.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -134,16 +134,16 @@ var account = {</span>
<a href="#l2.4"></a><span id="l2.4">       // properties that don't exist when restoring values.</span>
<a href="#l2.5"></a><span id="l2.5">       document.getElementById(&quot;protoSpecific&quot;).getBoundingClientRect();</span>
<a href="#l2.6"></a><span id="l2.6">     } else if (!haveOptions) {</span>
<a href="#l2.7"></a><span id="l2.7">       advanced.hidden = true;</span>
<a href="#l2.8"></a><span id="l2.8">     }</span>
<a href="#l2.9"></a><span id="l2.9">   },</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">   viewFingerprintKeys() {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    let otrAccount = { account: this.account };</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+    parent.gSubDialog.open(</span>
<a href="#l2.15"></a><span id="l2.15">       &quot;chrome://chat/content/otr-finger.xhtml&quot;,</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-      &quot;&quot;,</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-      &quot;chrome,modal,titlebar,centerscreen&quot;,</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-      this.account</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+      null,</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+      otrAccount</span>
<a href="#l2.21"></a><span id="l2.21">     );</span>
<a href="#l2.22"></a><span id="l2.22">   },</span>
<a href="#l2.23"></a><span id="l2.23"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/AccountManager.dtd</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/AccountManager.dtd</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,15 +1,16 @@</span>
<a href="#l3.4"></a><span id="l3.4"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.5"></a><span id="l3.5">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.6"></a><span id="l3.6">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> &lt;!-- extracted from AccountManager.xhtml --&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> &lt;!ENTITY accountManagerTitle.label &quot;Account Settings&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+&lt;!ENTITY  accountManagerCloseButton.label &quot;Close&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12"> </span>
<a href="#l3.13"></a><span id="l3.13"> &lt;!ENTITY accountActionsButton.label &quot;Account Actions&quot;&gt;</span>
<a href="#l3.14"></a><span id="l3.14"> &lt;!ENTITY accountActionsButton.accesskey &quot;A&quot;&gt;</span>
<a href="#l3.15"></a><span id="l3.15"> &lt;!ENTITY addMailAccountButton.label &quot;Add Mail Account…&quot;&gt;</span>
<a href="#l3.16"></a><span id="l3.16"> &lt;!ENTITY addMailAccountButton.accesskey &quot;A&quot;&gt;</span>
<a href="#l3.17"></a><span id="l3.17"> &lt;!ENTITY addIMAccountButton.label &quot;Add Chat Account…&quot;&gt;</span>
<a href="#l3.18"></a><span id="l3.18"> &lt;!ENTITY addIMAccountButton.accesskey &quot;C&quot;&gt;</span>
<a href="#l3.19"></a><span id="l3.19"> &lt;!ENTITY addFeedAccountButton.label &quot;Add Feed Account…&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/am-identity-edit.dtd</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1,16 +1,15 @@</span>
<a href="#l4.4"></a><span id="l4.4"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.5"></a><span id="l4.5">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.6"></a><span id="l4.6">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> &lt;!-- LOCALIZATION NOTE (identityDialog.style): This value should be roughly</span>
<a href="#l4.9"></a><span id="l4.9">      equal to the value of accountManager.size entity minus the value</span>
<a href="#l4.10"></a><span id="l4.10">      of accountTree.width entity. --&gt;</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineminus">-&lt;!ENTITY identityDialog.style &quot;min-width: 75ch;&quot;&gt;</span>
<a href="#l4.12"></a><span id="l4.12"> &lt;!ENTITY identityListDesc.label &quot;Configure the settings for this identity:&quot;&gt;</span>
<a href="#l4.13"></a><span id="l4.13"> </span>
<a href="#l4.14"></a><span id="l4.14"> &lt;!ENTITY settingsTab.label       &quot;Settings&quot;&gt;</span>
<a href="#l4.15"></a><span id="l4.15"> &lt;!ENTITY copiesFoldersTab.label &quot;Copies &amp;amp; Folders&quot;&gt;</span>
<a href="#l4.16"></a><span id="l4.16"> &lt;!ENTITY addressingTab.label    &quot;Composition &amp;amp; Addressing&quot;&gt;</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18"> &lt;!ENTITY publicData.label        &quot;Public Data&quot;&gt;</span>
<a href="#l4.19"></a><span id="l4.19"> &lt;!ENTITY privateData.label       &quot;Private Data&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/test/browser/account/browser_archiveOptions.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/test/browser/account/browser_archiveOptions.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -112,17 +112,17 @@ function subtest_initial_state(identity)</span>
<a href="#l5.4"></a><span id="l5.4">       ac.e(&quot;archiveKeepFolderStructure&quot;).checked,</span>
<a href="#l5.5"></a><span id="l5.5">       identity.archiveKeepFolderStructure</span>
<a href="#l5.6"></a><span id="l5.6">     );</span>
<a href="#l5.7"></a><span id="l5.7">   });</span>
<a href="#l5.8"></a><span id="l5.8">   mc.window.openDialog(</span>
<a href="#l5.9"></a><span id="l5.9">     &quot;chrome://messenger/content/am-archiveoptions.xhtml&quot;,</span>
<a href="#l5.10"></a><span id="l5.10">     &quot;&quot;,</span>
<a href="#l5.11"></a><span id="l5.11">     &quot;centerscreen,chrome,modal,titlebar,resizable=yes&quot;,</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    identity</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+    { identity }</span>
<a href="#l5.14"></a><span id="l5.14">   );</span>
<a href="#l5.15"></a><span id="l5.15">   wait_for_modal_dialog(&quot;Mailnews:archiveOptions&quot;);</span>
<a href="#l5.16"></a><span id="l5.16"> }</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> add_task(function test_open_archive_options() {</span>
<a href="#l5.19"></a><span id="l5.19">   for (let granularity = 0; granularity &lt; 3; granularity++) {</span>
<a href="#l5.20"></a><span id="l5.20">     defaultIdentity.archiveGranularity = granularity;</span>
<a href="#l5.21"></a><span id="l5.21">     for (let kfs = 0; kfs &lt; 2; kfs++) {</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -138,17 +138,17 @@ function subtest_save_state(identity, gr</span>
<a href="#l5.23"></a><span id="l5.23">     ac.e(&quot;archiveKeepFolderStructure&quot;).checked = kfs;</span>
<a href="#l5.24"></a><span id="l5.24">     ac.keypress(null, &quot;VK_RETURN&quot;, {});</span>
<a href="#l5.25"></a><span id="l5.25">     ac.window.document.querySelector(&quot;dialog&quot;).acceptDialog();</span>
<a href="#l5.26"></a><span id="l5.26">   });</span>
<a href="#l5.27"></a><span id="l5.27">   mc.window.openDialog(</span>
<a href="#l5.28"></a><span id="l5.28">     &quot;chrome://messenger/content/am-archiveoptions.xhtml&quot;,</span>
<a href="#l5.29"></a><span id="l5.29">     &quot;&quot;,</span>
<a href="#l5.30"></a><span id="l5.30">     &quot;centerscreen,chrome,modal,titlebar,resizable=yes&quot;,</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-    identity</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+    { identity }</span>
<a href="#l5.33"></a><span id="l5.33">   );</span>
<a href="#l5.34"></a><span id="l5.34">   wait_for_modal_dialog(&quot;Mailnews:archiveOptions&quot;);</span>
<a href="#l5.35"></a><span id="l5.35"> }</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37"> add_task(function test_save_archive_options() {</span>
<a href="#l5.38"></a><span id="l5.38">   defaultIdentity.archiveGranularity = 0;</span>
<a href="#l5.39"></a><span id="l5.39">   defaultIdentity.archiveKeepFolderStructure = false;</span>
<a href="#l5.40"></a><span id="l5.40">   subtest_save_state(defaultIdentity, 1, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/themes/shared/mail/accountManage.css</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/themes/shared/mail/accountManage.css</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -15,16 +15,20 @@ window &gt; vbox {</span>
<a href="#l6.4"></a><span id="l6.4">   padding-inline: 25px 28px;</span>
<a href="#l6.5"></a><span id="l6.5"> }</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> fieldset {</span>
<a href="#l6.8"></a><span id="l6.8">   margin: 0 0 32px;</span>
<a href="#l6.9"></a><span id="l6.9">   padding: initial;</span>
<a href="#l6.10"></a><span id="l6.10"> }</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+fieldset:last-of-type {</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  margin-bottom: 0;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+}</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+</span>
<a href="#l6.16"></a><span id="l6.16"> #accountTreeBox {</span>
<a href="#l6.17"></a><span id="l6.17">   margin-block: 28px;</span>
<a href="#l6.18"></a><span id="l6.18">   margin-inline: 28px 3px;</span>
<a href="#l6.19"></a><span id="l6.19"> }</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21"> /* Styles for the Account Actions button */</span>
<a href="#l6.22"></a><span id="l6.22"> </span>
<a href="#l6.23"></a><span id="l6.23"> #accountActionsButton {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/base/prefs/content/AccountManager.xhtml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/base/prefs/content/AccountManager.xhtml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -6,28 +6,30 @@</span>
<a href="#l7.4"></a><span id="l7.4"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/folderPane.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l7.5"></a><span id="l7.5"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/accountManage.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> &lt;!DOCTYPE window SYSTEM &quot;chrome://messenger/locale/AccountManager.dtd&quot;&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> &lt;window windowtype=&quot;mailnews:accountmanager&quot;</span>
<a href="#l7.9"></a><span id="l7.9">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot; xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l7.10"></a><span id="l7.10">         title=&quot;&amp;accountManagerTitle.label;&quot;</span>
<a href="#l7.11"></a><span id="l7.11">         persist=&quot;width height screenX screenY&quot;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-        onload=&quot;onLoad(event);&quot;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+        onload=&quot;onLoad(event); gSubDialog.init();&quot;</span>
<a href="#l7.14"></a><span id="l7.14">         onunload=&quot;onUnload();&quot;&gt;</span>
<a href="#l7.15"></a><span id="l7.15"> &lt;stringbundle id=&quot;bundle_brand&quot; src=&quot;chrome://branding/locale/brand.properties&quot;/&gt;</span>
<a href="#l7.16"></a><span id="l7.16"> &lt;stringbundle id=&quot;bundle_prefs&quot; src=&quot;chrome://messenger/locale/prefs.properties&quot;/&gt;</span>
<a href="#l7.17"></a><span id="l7.17"> &lt;script src=&quot;chrome://messenger/content/accountUtils.js&quot;/&gt;</span>
<a href="#l7.18"></a><span id="l7.18"> &lt;script src=&quot;chrome://messenger/content/am-prefs.js&quot;/&gt;</span>
<a href="#l7.19"></a><span id="l7.19"> &lt;script src=&quot;chrome://messenger/content/AccountManager.js&quot;/&gt;</span>
<a href="#l7.20"></a><span id="l7.20"> #ifdef MOZ_SUITE</span>
<a href="#l7.21"></a><span id="l7.21"> &lt;script src=&quot;chrome://messenger/content/am-help.js&quot;/&gt;</span>
<a href="#l7.22"></a><span id="l7.22"> #endif</span>
<a href="#l7.23"></a><span id="l7.23"> &lt;script src=&quot;chrome://messenger/content/amUtils.js&quot;/&gt;</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+&lt;script src=&quot;chrome://messenger/content/preferences/subdialogs.js&quot;/&gt;</span>
<a href="#l7.25"></a><span id="l7.25"> </span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+  &lt;stack id=&quot;preferences-stack&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l7.27"></a><span id="l7.27">   &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l7.28"></a><span id="l7.28">     &lt;vbox id=&quot;accountTreeBox&quot; style=&quot;&amp;accountTree.width;&quot;&gt;</span>
<a href="#l7.29"></a><span id="l7.29">       &lt;tree flex=&quot;1&quot; onselect=&quot;onAccountTreeSelect(null, null);&quot; id=&quot;accounttree&quot;</span>
<a href="#l7.30"></a><span id="l7.30">             seltype=&quot;single&quot; hidecolumnpicker=&quot;true&quot;&gt;</span>
<a href="#l7.31"></a><span id="l7.31">         &lt;treecols&gt;</span>
<a href="#l7.32"></a><span id="l7.32">           &lt;treecol id=&quot;AccountCol&quot; flex=&quot;1&quot; primary=&quot;true&quot; hideheader=&quot;true&quot;/&gt;</span>
<a href="#l7.33"></a><span id="l7.33">         &lt;/treecols&gt;</span>
<a href="#l7.34"></a><span id="l7.34">         &lt;treechildren id=&quot;account-tree-children&quot;/&gt;</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineat">@@ -79,12 +81,33 @@</span>
<a href="#l7.36"></a><span id="l7.36">       &lt;button label=&quot;&amp;setDefaultButton.label;&quot; oncommand=&quot;onSetDefault(event);&quot; disabled=&quot;true&quot; id=&quot;setDefaultButton&quot;</span>
<a href="#l7.37"></a><span id="l7.37">               prefstring=&quot;mail.disable_button.set_default_account&quot;</span>
<a href="#l7.38"></a><span id="l7.38">               accesskey=&quot;&amp;setDefaultButton.accesskey;&quot;/&gt;</span>
<a href="#l7.39"></a><span id="l7.39">       &lt;button disabled=&quot;true&quot; label=&quot;&amp;removeButton.label;&quot; oncommand=&quot;onRemoveAccount(event);&quot; id=&quot;removeButton&quot;</span>
<a href="#l7.40"></a><span id="l7.40">               prefstring=&quot;mail.disable_button.delete_account&quot;</span>
<a href="#l7.41"></a><span id="l7.41">               accesskey=&quot;&amp;removeButton.accesskey;&quot;/&gt;</span>
<a href="#l7.42"></a><span id="l7.42"> #endif</span>
<a href="#l7.43"></a><span id="l7.43">     &lt;/vbox&gt;</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-</span>
<a href="#l7.45"></a><span id="l7.45">     &lt;iframe id=&quot;contentFrame&quot; name=&quot;contentFrame&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l7.46"></a><span id="l7.46">   &lt;/hbox&gt;</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+  &lt;stack id=&quot;dialogStack&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+  &lt;vbox id=&quot;dialogTemplate&quot;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+        class=&quot;dialogOverlay&quot;</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+        align=&quot;center&quot;</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+        pack=&quot;center&quot;</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+        topmost=&quot;true&quot;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+        hidden=&quot;true&quot;&gt;</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+    &lt;vbox class=&quot;dialogBox&quot;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+          pack=&quot;end&quot;</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+          role=&quot;dialog&quot;</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+          aria-labelledby=&quot;dialogTitle&quot;&gt;</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+      &lt;hbox class=&quot;dialogTitleBar&quot; align=&quot;center&quot;&gt;</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+        &lt;label class=&quot;dialogTitle&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+        &lt;button class=&quot;dialogClose close-icon&quot;</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+                aria-label=&quot;&amp;accountManagerCloseButton.label;&quot;/&gt;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+      &lt;browser class=&quot;dialogFrame&quot;</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+               autoscroll=&quot;false&quot;</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+               disablehistory=&quot;true&quot;/&gt;</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+    &lt;/vbox&gt;</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+  &lt;/vbox&gt;</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+&lt;/stack&gt;</span>
<a href="#l7.69"></a><span id="l7.69"> &lt;/window&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-addressing.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-addressing.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -17,21 +17,18 @@ function onInit(aPageId, aServerId) {</span>
<a href="#l8.4"></a><span id="l8.4"> }</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> function onInitCompositionAndAddressing() {</span>
<a href="#l8.7"></a><span id="l8.7">   LDAPenabling();</span>
<a href="#l8.8"></a><span id="l8.8">   quoteEnabling();</span>
<a href="#l8.9"></a><span id="l8.9"> }</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11"> function onEditDirectories() {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-    &quot;chrome://messenger/content/addressbook/pref-editdirectories.xhtml&quot;,</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-    &quot;editDirectories&quot;,</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-    &quot;chrome,modal=yes,resizable=no&quot;,</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-    null</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+    &quot;chrome://messenger/content/addressbook/pref-editdirectories.xhtml&quot;</span>
<a href="#l8.19"></a><span id="l8.19">   );</span>
<a href="#l8.20"></a><span id="l8.20"> }</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22"> function onPreInit(account, accountValues) {}</span>
<a href="#l8.23"></a><span id="l8.23"> </span>
<a href="#l8.24"></a><span id="l8.24"> function LDAPenabling() {</span>
<a href="#l8.25"></a><span id="l8.25">   onCheckItem(&quot;identity.directoryServer&quot;, [&quot;directories&quot;]);</span>
<a href="#l8.26"></a><span id="l8.26">   onCheckItem(&quot;editButton&quot;, [&quot;directories&quot;]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-archiveoptions.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-archiveoptions.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -8,17 +8,17 @@ var gIdentity = null;</span>
<a href="#l9.4"></a><span id="l9.4"> document.addEventListener(&quot;dialogaccept&quot;, onAcceptArchiveOptions);</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> /**</span>
<a href="#l9.7"></a><span id="l9.7">  * Load the archive options dialog, set the radio/checkbox items to the</span>
<a href="#l9.8"></a><span id="l9.8">  * appropriate values, and update the archive hierarchy example.</span>
<a href="#l9.9"></a><span id="l9.9">  */</span>
<a href="#l9.10"></a><span id="l9.10"> function onLoadArchiveOptions() {</span>
<a href="#l9.11"></a><span id="l9.11">   // extract the account</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  gIdentity = window.arguments[0];</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  gIdentity = window.arguments[0].identity;</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">   let granularity = document.getElementById(&quot;archiveGranularity&quot;);</span>
<a href="#l9.16"></a><span id="l9.16">   granularity.selectedIndex = gIdentity.archiveGranularity;</span>
<a href="#l9.17"></a><span id="l9.17">   granularity.addEventListener(&quot;command&quot;, updateArchiveExample);</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">   let kfs = document.getElementById(&quot;archiveKeepFolderStructure&quot;);</span>
<a href="#l9.20"></a><span id="l9.20">   kfs.checked = gIdentity.archiveKeepFolderStructure;</span>
<a href="#l9.21"></a><span id="l9.21">   kfs.addEventListener(&quot;command&quot;, updateArchiveExample);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-copies.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-copies.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -525,17 +525,16 @@ function setupArchiveItems() {</span>
<a href="#l10.4"></a><span id="l10.4">   }</span>
<a href="#l10.5"></a><span id="l10.5"> }</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7"> /**</span>
<a href="#l10.8"></a><span id="l10.8">  * Open a dialog to edit the folder hierarchy used when archiving messages.</span>
<a href="#l10.9"></a><span id="l10.9">  */</span>
<a href="#l10.10"></a><span id="l10.10"> function ChangeArchiveHierarchy() {</span>
<a href="#l10.11"></a><span id="l10.11">   let identity = parent.gIdentity || parent.getCurrentAccount().defaultIdentity;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+  let arg = { identity };</span>
<a href="#l10.13"></a><span id="l10.13"> </span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.window.openDialog(</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l10.16"></a><span id="l10.16">     &quot;chrome://messenger/content/am-archiveoptions.xhtml&quot;,</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-    &quot;&quot;,</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-    &quot;centerscreen,chrome,modal,titlebar,resizable=yes&quot;,</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-    identity</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+    null,</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+    arg</span>
<a href="#l10.22"></a><span id="l10.22">   );</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineminus">-  return true;</span>
<a href="#l10.24"></a><span id="l10.24"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-identities-list.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-identities-list.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -81,25 +81,27 @@ function refreshIdentityList(aSelectInde</span>
<a href="#l11.4"></a><span id="l11.4">  */</span>
<a href="#l11.5"></a><span id="l11.5"> function openIdentityEditor(identity) {</span>
<a href="#l11.6"></a><span id="l11.6">   let args = { identity, account: gAccount, result: false };</span>
<a href="#l11.7"></a><span id="l11.7"> </span>
<a href="#l11.8"></a><span id="l11.8">   let indexToSelect = identity</span>
<a href="#l11.9"></a><span id="l11.9">     ? gIdentityListBox.selectedIndex</span>
<a href="#l11.10"></a><span id="l11.10">     : gIdentityListBox.itemCount;</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-    &quot;am-identity-edit.xhtml&quot;,</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-    &quot;&quot;,</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-    &quot;chrome,modal,resizable,centerscreen&quot;,</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-    args</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+    &quot;chrome://messenger/content/am-identity-edit.xhtml&quot;,</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+    null,</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+    args,</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+    onCloseIdentity</span>
<a href="#l11.22"></a><span id="l11.22">   );</span>
<a href="#l11.23"></a><span id="l11.23"> </span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-  if (args.result) {</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-    refreshIdentityList(indexToSelect);</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+  function onCloseIdentity() {</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+    if (args.result) {</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+      refreshIdentityList(indexToSelect);</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+    }</span>
<a href="#l11.30"></a><span id="l11.30">   }</span>
<a href="#l11.31"></a><span id="l11.31"> }</span>
<a href="#l11.32"></a><span id="l11.32"> </span>
<a href="#l11.33"></a><span id="l11.33"> function getSelectedIdentity() {</span>
<a href="#l11.34"></a><span id="l11.34">   if (gIdentityListBox.selectedItems.length != 1) {</span>
<a href="#l11.35"></a><span id="l11.35">     return null;</span>
<a href="#l11.36"></a><span id="l11.36">   }</span>
<a href="#l11.37"></a><span id="l11.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-identity-edit.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-identity-edit.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -425,28 +425,28 @@ function setupSignatureItems() {</span>
<a href="#l12.4"></a><span id="l12.4"> </span>
<a href="#l12.5"></a><span id="l12.5"> function editVCardCallback(escapedVCardStr) {</span>
<a href="#l12.6"></a><span id="l12.6">   var escapedVCard = document.getElementById(&quot;identity.escapedVCard&quot;);</span>
<a href="#l12.7"></a><span id="l12.7">   escapedVCard.value = escapedVCardStr;</span>
<a href="#l12.8"></a><span id="l12.8"> }</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10"> function editVCard() {</span>
<a href="#l12.11"></a><span id="l12.11">   var escapedVCard = document.getElementById(&quot;identity.escapedVCard&quot;);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+  let args = {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    escapedVCardStr: escapedVCard.value,</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+    okCallback: editVCardCallback,</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+    titleProperty: &quot;editVCardTitle&quot;,</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+    hideABPicker: true,</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+  };</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19">   // read vCard hidden value from UI</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l12.22"></a><span id="l12.22">     &quot;chrome://messenger/content/addressbook/abNewCardDialog.xhtml&quot;,</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-    &quot;&quot;,</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-    &quot;chrome,modal,resizable=no,centerscreen&quot;,</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-    {</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-      escapedVCardStr: escapedVCard.value,</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-      okCallback: editVCardCallback,</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-      titleProperty: &quot;editVCardTitle&quot;,</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineminus">-      hideABPicker: true,</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-    }</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+    &quot;resizable=no&quot;,</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+    args</span>
<a href="#l12.33"></a><span id="l12.33">   );</span>
<a href="#l12.34"></a><span id="l12.34"> }</span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36"> function getAccountForFolderPickerState() {</span>
<a href="#l12.37"></a><span id="l12.37">   return gAccount;</span>
<a href="#l12.38"></a><span id="l12.38"> }</span>
<a href="#l12.39"></a><span id="l12.39"> </span>
<a href="#l12.40"></a><span id="l12.40"> /**</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineat">@@ -491,14 +491,17 @@ function loadSMTPServerList() {</span>
<a href="#l12.42"></a><span id="l12.42">  * Open dialog for editing properties of currently selected SMTP server.</span>
<a href="#l12.43"></a><span id="l12.43">  */</span>
<a href="#l12.44"></a><span id="l12.44"> function editCurrentSMTP() {</span>
<a href="#l12.45"></a><span id="l12.45">   let smtpKey = document.getElementById(&quot;identity.smtpServerKey&quot;).value;</span>
<a href="#l12.46"></a><span id="l12.46">   let server =</span>
<a href="#l12.47"></a><span id="l12.47">     smtpKey === &quot;&quot;</span>
<a href="#l12.48"></a><span id="l12.48">       ? MailServices.smtp.defaultServer</span>
<a href="#l12.49"></a><span id="l12.49">       : MailServices.smtp.getServerByKey(smtpKey);</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+  let args = { server, result: false, addSmtpServer: &quot;&quot; };</span>
<a href="#l12.51"></a><span id="l12.51"> </span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-  let args = editSMTPServer(server);</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineminus">-  if (args.result) {</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineminus">-    loadSMTPServerList();</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineminus">-  }</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineplus">+    &quot;chrome://messenger/content/SmtpServerEdit.xhtml&quot;,</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineplus">+    null,</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineplus">+    args,</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineplus">+    loadSMTPServerList</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineplus">+  );</span>
<a href="#l12.62"></a><span id="l12.62"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-identity-edit.xhtml</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-identity-edit.xhtml</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -18,17 +18,17 @@</span>
<a href="#l13.4"></a><span id="l13.4"> %addressingDTD;</span>
<a href="#l13.5"></a><span id="l13.5"> &lt;!ENTITY % smimeDTD SYSTEM &quot;chrome://messenger/locale/am-smime.dtd&quot; &gt;</span>
<a href="#l13.6"></a><span id="l13.6"> %smimeDTD;</span>
<a href="#l13.7"></a><span id="l13.7"> ]&gt;</span>
<a href="#l13.8"></a><span id="l13.8"> </span>
<a href="#l13.9"></a><span id="l13.9"> &lt;window xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l13.10"></a><span id="l13.10">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l13.11"></a><span id="l13.11">         onload=&quot;onLoadIdentityProperties();&quot;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        style=&quot;&amp;identityDialog.style;&quot;&gt;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        style=&quot;width: 75ch; height: 56em;&quot;&gt;</span>
<a href="#l13.14"></a><span id="l13.14"> &lt;dialog id=&quot;identityDialog&quot;&gt;</span>
<a href="#l13.15"></a><span id="l13.15">   &lt;stringbundle id=&quot;bundle_prefs&quot;</span>
<a href="#l13.16"></a><span id="l13.16">                 src=&quot;chrome://messenger/locale/prefs.properties&quot;/&gt;</span>
<a href="#l13.17"></a><span id="l13.17">   &lt;stringbundle id=&quot;bundle_messenger&quot;</span>
<a href="#l13.18"></a><span id="l13.18">                 src=&quot;chrome://messenger/locale/messenger.properties&quot;/&gt;</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20">   &lt;script src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l13.21"></a><span id="l13.21">   &lt;script src=&quot;chrome://global/content/editMenuOverlay.js&quot;/&gt;</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -187,25 +187,25 @@</span>
<a href="#l13.23"></a><span id="l13.23">                     oncommand=&quot;editCurrentSMTP();&quot;/&gt;</span>
<a href="#l13.24"></a><span id="l13.24">           &lt;/hbox&gt;</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26">           &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l13.27"></a><span id="l13.27"> </span>
<a href="#l13.28"></a><span id="l13.28">           &lt;hbox align=&quot;center&quot; class=&quot;input-container&quot;&gt;</span>
<a href="#l13.29"></a><span id="l13.29">             &lt;label id=&quot;identity.input.label&quot; value=&quot;&amp;identityAlias.label;&quot;</span>
<a href="#l13.30"></a><span id="l13.30">                    accesskey=&quot;&amp;identityAlias.accesskey;&quot;</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+                   style=&quot;margin-block: auto;&quot;</span>
<a href="#l13.32"></a><span id="l13.32">                    control=&quot;identity.label&quot;/&gt;</span>
<a href="#l13.33"></a><span id="l13.33">             &lt;html:input id=&quot;identity.label&quot;</span>
<a href="#l13.34"></a><span id="l13.34">                         type=&quot;text&quot;</span>
<a href="#l13.35"></a><span id="l13.35">                         class=&quot;input-inline&quot;</span>
<a href="#l13.36"></a><span id="l13.36">                         aria-labelledby=&quot;identity.input.label&quot;/&gt;</span>
<a href="#l13.37"></a><span id="l13.37">           &lt;/hbox&gt;</span>
<a href="#l13.38"></a><span id="l13.38">         &lt;/html:fieldset&gt;</span>
<a href="#l13.39"></a><span id="l13.39"> </span>
<a href="#l13.40"></a><span id="l13.40" class="difflineminus">-        &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l13.41"></a><span id="l13.41">       &lt;/vbox&gt;</span>
<a href="#l13.42"></a><span id="l13.42"> </span>
<a href="#l13.43"></a><span id="l13.43">       &lt;!-- Copies &amp; Folders Tab --&gt;</span>
<a href="#l13.44"></a><span id="l13.44"> #include am-copies.inc.xhtml</span>
<a href="#l13.45"></a><span id="l13.45"> </span>
<a href="#l13.46"></a><span id="l13.46">       &lt;!-- Composition &amp; Addressing Tab --&gt;</span>
<a href="#l13.47"></a><span id="l13.47"> #include am-addressing.inc.xhtml</span>
<a href="#l13.48"></a><span id="l13.48"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-main.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-main.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -43,25 +43,26 @@ function manageIdentities() {</span>
<a href="#l14.4"></a><span id="l14.4"> </span>
<a href="#l14.5"></a><span id="l14.5">   var args = { account: gAccount, accountName, result: false };</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">   // save the current identity settings so they show up correctly</span>
<a href="#l14.8"></a><span id="l14.8">   // if the user just changed them in the manage identities dialog</span>
<a href="#l14.9"></a><span id="l14.9">   var identity = gAccount.defaultIdentity;</span>
<a href="#l14.10"></a><span id="l14.10">   saveIdentitySettings(identity);</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-    &quot;am-identities-list.xhtml&quot;,</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-    &quot;&quot;,</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-    &quot;chrome,modal,resizable=no,centerscreen&quot;,</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-    args</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+    &quot;chrome://messenger/content/am-identities-list.xhtml&quot;,</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+    null,</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineplus">+    args,</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineplus">+    onCloseIdentities</span>
<a href="#l14.22"></a><span id="l14.22">   );</span>
<a href="#l14.23"></a><span id="l14.23"> </span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-  if (args.result) {</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-    // now re-initialize the default identity settings in case they changed</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineminus">-    identity = gAccount.defaultIdentity; // Refetch the default identity in case it changed.</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineminus">-    initIdentityValues(identity);</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineplus">+  function onCloseIdentities() {</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineplus">+    if (args.result) {</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+      // now re-initialize the default identity settings in case they changed</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+      identity = gAccount.defaultIdentity; // Refetch the default identity in case it changed.</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+      initIdentityValues(identity);</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+      // Refresh the SMTP list in case the user changed server properties</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+      // from the identity dialog.</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+      loadSMTPServerList();</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+    }</span>
<a href="#l14.37"></a><span id="l14.37">   }</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineminus">-</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineminus">-  // Refresh the SMTP list in case the user changed server properties</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineminus">-  // from the identity dialog.</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineminus">-  loadSMTPServerList();</span>
<a href="#l14.42"></a><span id="l14.42"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-main.xhtml</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-main.xhtml</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -187,12 +187,10 @@</span>
<a href="#l15.4"></a><span id="l15.4">     &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">     &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l15.7"></a><span id="l15.7">       &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l15.8"></a><span id="l15.8">       &lt;button label=&quot;&amp;manageIdentities.label;&quot; oncommand=&quot;manageIdentities(event);&quot;</span>
<a href="#l15.9"></a><span id="l15.9">               accesskey=&quot;&amp;manageIdentities.accesskey;&quot;</span>
<a href="#l15.10"></a><span id="l15.10">               wsm_persist=&quot;true&quot; id=&quot;identity.manageIdentitiesbutton&quot;/&gt;</span>
<a href="#l15.11"></a><span id="l15.11">     &lt;/hbox&gt;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-    &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l15.14"></a><span id="l15.14">   &lt;/vbox&gt;</span>
<a href="#l15.15"></a><span id="l15.15"> &lt;/window&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-offline.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-offline.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -170,22 +170,19 @@ function onPreInit(account, accountValue</span>
<a href="#l16.4"></a><span id="l16.4">         &quot;retention.applyToFlagged&quot;</span>
<a href="#l16.5"></a><span id="l16.5">       );</span>
<a href="#l16.6"></a><span id="l16.6">       applyToFlaggedCheckbox.setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l16.7"></a><span id="l16.7">     }</span>
<a href="#l16.8"></a><span id="l16.8">   }</span>
<a href="#l16.9"></a><span id="l16.9"> }</span>
<a href="#l16.10"></a><span id="l16.10"> </span>
<a href="#l16.11"></a><span id="l16.11"> function onClickSelect() {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.window.openDialog(</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-    &quot;chrome://messenger/content/msgSelectOfflineFolders.xhtml&quot;,</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-    &quot;&quot;,</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-    &quot;centerscreen,chrome,modal,titlebar,resizable=yes&quot;</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+    &quot;chrome://messenger/content/msgSelectOfflineFolders.xhtml&quot;</span>
<a href="#l16.18"></a><span id="l16.18">   );</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-  return true;</span>
<a href="#l16.20"></a><span id="l16.20"> }</span>
<a href="#l16.21"></a><span id="l16.21"> </span>
<a href="#l16.22"></a><span id="l16.22"> /**</span>
<a href="#l16.23"></a><span id="l16.23">  * Handle updates to the Autosync</span>
<a href="#l16.24"></a><span id="l16.24">  */</span>
<a href="#l16.25"></a><span id="l16.25"> function onAutosyncChange() {</span>
<a href="#l16.26"></a><span id="l16.26">   let autosyncSelect = document.getElementById(&quot;autosyncSelect&quot;);</span>
<a href="#l16.27"></a><span id="l16.27">   let autosyncInterval = document.getElementById(&quot;autosyncInterval&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-server.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-server.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -224,17 +224,16 @@ function onAdvanced() {</span>
<a href="#l17.4"></a><span id="l17.4">       &quot;imap.dualUseFolders&quot;</span>
<a href="#l17.5"></a><span id="l17.5">     ).checked;</span>
<a href="#l17.6"></a><span id="l17.6">     serverSettings.usingSubscription = document.getElementById(</span>
<a href="#l17.7"></a><span id="l17.7">       &quot;imap.usingSubscription&quot;</span>
<a href="#l17.8"></a><span id="l17.8">     ).checked;</span>
<a href="#l17.9"></a><span id="l17.9">     serverSettings.maximumConnectionsNumber = document</span>
<a href="#l17.10"></a><span id="l17.10">       .getElementById(&quot;imap.maximumConnectionsNumber&quot;)</span>
<a href="#l17.11"></a><span id="l17.11">       .getAttribute(&quot;value&quot;);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    // string prefs</span>
<a href="#l17.13"></a><span id="l17.13">     serverSettings.personalNamespace = document</span>
<a href="#l17.14"></a><span id="l17.14">       .getElementById(&quot;imap.personalNamespace&quot;)</span>
<a href="#l17.15"></a><span id="l17.15">       .getAttribute(&quot;value&quot;);</span>
<a href="#l17.16"></a><span id="l17.16">     serverSettings.publicNamespace = document</span>
<a href="#l17.17"></a><span id="l17.17">       .getElementById(&quot;imap.publicNamespace&quot;)</span>
<a href="#l17.18"></a><span id="l17.18">       .getAttribute(&quot;value&quot;);</span>
<a href="#l17.19"></a><span id="l17.19">     serverSettings.serverDirectory = document</span>
<a href="#l17.20"></a><span id="l17.20">       .getElementById(&quot;imap.serverDirectory&quot;)</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineat">@@ -249,158 +248,159 @@ function onAdvanced() {</span>
<a href="#l17.22"></a><span id="l17.22">     serverSettings.deferGetNewMail = document.getElementById(</span>
<a href="#l17.23"></a><span id="l17.23">       &quot;pop3.deferGetNewMail&quot;</span>
<a href="#l17.24"></a><span id="l17.24">     ).checked;</span>
<a href="#l17.25"></a><span id="l17.25">     serverSettings.deferredToAccount = document</span>
<a href="#l17.26"></a><span id="l17.26">       .getElementById(&quot;pop3.deferredToAccount&quot;)</span>
<a href="#l17.27"></a><span id="l17.27">       .getAttribute(&quot;value&quot;);</span>
<a href="#l17.28"></a><span id="l17.28">   }</span>
<a href="#l17.29"></a><span id="l17.29"> </span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-    &quot;chrome://messenger/content/am-server-advanced.xhtml&quot;,</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineminus">-    &quot;_blank&quot;,</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-    &quot;chrome,modal,titlebar&quot;,</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-    serverSettings</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-  );</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineplus">+  let onCloseAdvanced = function() {</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineplus">+    if (serverType == &quot;imap&quot;) {</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineplus">+      document.getElementById(&quot;imap.dualUseFolders&quot;).checked =</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineplus">+        serverSettings.dualUseFolders;</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineplus">+      document.getElementById(&quot;imap.usingSubscription&quot;).checked =</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineplus">+        serverSettings.usingSubscription;</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineplus">+      document</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+        .getElementById(&quot;imap.maximumConnectionsNumber&quot;)</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineplus">+        .setAttribute(&quot;value&quot;, serverSettings.maximumConnectionsNumber);</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineplus">+      document</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineplus">+        .getElementById(&quot;imap.personalNamespace&quot;)</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineplus">+        .setAttribute(&quot;value&quot;, serverSettings.personalNamespace);</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineplus">+      document</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineplus">+        .getElementById(&quot;imap.publicNamespace&quot;)</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineplus">+        .setAttribute(&quot;value&quot;, serverSettings.publicNamespace);</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineplus">+      document</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineplus">+        .getElementById(&quot;imap.serverDirectory&quot;)</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineplus">+        .setAttribute(&quot;value&quot;, serverSettings.serverDirectory);</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineplus">+      document</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineplus">+        .getElementById(&quot;imap.otherUsersNamespace&quot;)</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineplus">+        .setAttribute(&quot;value&quot;, serverSettings.otherUsersNamespace);</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineplus">+      document.getElementById(&quot;imap.overrideNamespaces&quot;).checked =</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineplus">+        serverSettings.overrideNamespaces;</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineplus">+    } else if (serverType == &quot;pop3&quot;) {</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineplus">+      document.getElementById(&quot;pop3.deferGetNewMail&quot;).checked =</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineplus">+        serverSettings.deferGetNewMail;</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineplus">+      document</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineplus">+        .getElementById(&quot;pop3.deferredToAccount&quot;)</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineplus">+        .setAttribute(&quot;value&quot;, serverSettings.deferredToAccount);</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineplus">+      let pop3Server = gServer.QueryInterface(Ci.nsIPop3IncomingServer);</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineplus">+      // we're explicitly setting this so we'll go through the SetDeferredToAccount method</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+      pop3Server.deferredToAccount = serverSettings.deferredToAccount;</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineplus">+      // Setting the server to be deferred causes a rebuild of the account tree,</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineplus">+      // losing the current selection. Reselect the current server again as it</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineplus">+      // didn't really disappear.</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineplus">+      parent.selectServer(</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineplus">+        parent.getCurrentAccount().incomingServer,</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineplus">+        parent.currentPageId</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineplus">+      );</span>
<a href="#l17.75"></a><span id="l17.75"> </span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-  if (serverType == &quot;imap&quot;) {</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-    document.getElementById(&quot;imap.dualUseFolders&quot;).checked =</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-      serverSettings.dualUseFolders;</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineminus">-    document.getElementById(&quot;imap.usingSubscription&quot;).checked =</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-      serverSettings.usingSubscription;</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineminus">-    document</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineminus">-      .getElementById(&quot;imap.maximumConnectionsNumber&quot;)</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-      .setAttribute(&quot;value&quot;, serverSettings.maximumConnectionsNumber);</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineminus">-    // string prefs</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">-    document</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineminus">-      .getElementById(&quot;imap.personalNamespace&quot;)</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineminus">-      .setAttribute(&quot;value&quot;, serverSettings.personalNamespace);</span>
<a href="#l17.88"></a><span id="l17.88" class="difflineminus">-    document</span>
<a href="#l17.89"></a><span id="l17.89" class="difflineminus">-      .getElementById(&quot;imap.publicNamespace&quot;)</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineminus">-      .setAttribute(&quot;value&quot;, serverSettings.publicNamespace);</span>
<a href="#l17.91"></a><span id="l17.91" class="difflineminus">-    document</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineminus">-      .getElementById(&quot;imap.serverDirectory&quot;)</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineminus">-      .setAttribute(&quot;value&quot;, serverSettings.serverDirectory);</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineminus">-    document</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineminus">-      .getElementById(&quot;imap.otherUsersNamespace&quot;)</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineminus">-      .setAttribute(&quot;value&quot;, serverSettings.otherUsersNamespace);</span>
<a href="#l17.97"></a><span id="l17.97" class="difflineminus">-    document.getElementById(&quot;imap.overrideNamespaces&quot;).checked =</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineminus">-      serverSettings.overrideNamespaces;</span>
<a href="#l17.99"></a><span id="l17.99" class="difflineminus">-  } else if (serverType == &quot;pop3&quot;) {</span>
<a href="#l17.100"></a><span id="l17.100" class="difflineminus">-    document.getElementById(&quot;pop3.deferGetNewMail&quot;).checked =</span>
<a href="#l17.101"></a><span id="l17.101" class="difflineminus">-      serverSettings.deferGetNewMail;</span>
<a href="#l17.102"></a><span id="l17.102" class="difflineminus">-    document</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineminus">-      .getElementById(&quot;pop3.deferredToAccount&quot;)</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-      .setAttribute(&quot;value&quot;, serverSettings.deferredToAccount);</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineminus">-    let pop3Server = gServer.QueryInterface(Ci.nsIPop3IncomingServer);</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineminus">-    // we're explicitly setting this so we'll go through the SetDeferredToAccount method</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">-    pop3Server.deferredToAccount = serverSettings.deferredToAccount;</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineminus">-    // Setting the server to be deferred causes a rebuild of the account tree,</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineminus">-    // losing the current selection. Reselect the current server again as it</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineminus">-    // didn't really disappear.</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineminus">-    parent.selectServer(</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineminus">-      parent.getCurrentAccount().incomingServer,</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineminus">-      parent.currentPageId</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineminus">-    );</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineplus">+      // Iterate over all accounts to see if any of their junk targets are now</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineplus">+      // invalid (pointed to the account that is now deferred).</span>
<a href="#l17.117"></a><span id="l17.117" class="difflineplus">+      // If any such target is found it is reset to a new safe folder</span>
<a href="#l17.118"></a><span id="l17.118" class="difflineplus">+      // (the deferred to account or Local Folders). If junk was really moved</span>
<a href="#l17.119"></a><span id="l17.119" class="difflineplus">+      // to that folder (moveOnSpam = true) then moving junk is disabled</span>
<a href="#l17.120"></a><span id="l17.120" class="difflineplus">+      // (so that the user notices it and checks the settings).</span>
<a href="#l17.121"></a><span id="l17.121" class="difflineplus">+      // This is the same sanitization as in am-junk.js, just applied to all POP accounts.</span>
<a href="#l17.122"></a><span id="l17.122" class="difflineplus">+      let deferredURI =</span>
<a href="#l17.123"></a><span id="l17.123" class="difflineplus">+        serverSettings.deferredToAccount &amp;&amp;</span>
<a href="#l17.124"></a><span id="l17.124" class="difflineplus">+        MailServices.accounts.getAccount(serverSettings.deferredToAccount)</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineplus">+          .incomingServer.serverURI;</span>
<a href="#l17.126"></a><span id="l17.126"> </span>
<a href="#l17.127"></a><span id="l17.127" class="difflineminus">-    // Iterate over all accounts to see if any of their junk targets are now</span>
<a href="#l17.128"></a><span id="l17.128" class="difflineminus">-    // invalid (pointed to the account that is now deferred).</span>
<a href="#l17.129"></a><span id="l17.129" class="difflineminus">-    // If any such target is found it is reset to a new safe folder</span>
<a href="#l17.130"></a><span id="l17.130" class="difflineminus">-    // (the deferred to account or Local Folders). If junk was really moved</span>
<a href="#l17.131"></a><span id="l17.131" class="difflineminus">-    // to that folder (moveOnSpam = true) then moving junk is disabled</span>
<a href="#l17.132"></a><span id="l17.132" class="difflineminus">-    // (so that the user notices it and checks the settings).</span>
<a href="#l17.133"></a><span id="l17.133" class="difflineminus">-    // This is the same sanitization as in am-junk.js, just applied to all POP accounts.</span>
<a href="#l17.134"></a><span id="l17.134" class="difflineminus">-    let deferredURI =</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineminus">-      serverSettings.deferredToAccount &amp;&amp;</span>
<a href="#l17.136"></a><span id="l17.136" class="difflineminus">-      MailServices.accounts.getAccount(serverSettings.deferredToAccount)</span>
<a href="#l17.137"></a><span id="l17.137" class="difflineminus">-        .incomingServer.serverURI;</span>
<a href="#l17.138"></a><span id="l17.138" class="difflineminus">-</span>
<a href="#l17.139"></a><span id="l17.139" class="difflineminus">-    for (let account of fixIterator(</span>
<a href="#l17.140"></a><span id="l17.140" class="difflineminus">-      MailServices.accounts.accounts,</span>
<a href="#l17.141"></a><span id="l17.141" class="difflineminus">-      Ci.nsIMsgAccount</span>
<a href="#l17.142"></a><span id="l17.142" class="difflineminus">-    )) {</span>
<a href="#l17.143"></a><span id="l17.143" class="difflineminus">-      let accountValues = parent.getValueArrayFor(account);</span>
<a href="#l17.144"></a><span id="l17.144" class="difflineminus">-      let type = parent.getAccountValue(</span>
<a href="#l17.145"></a><span id="l17.145" class="difflineminus">-        account,</span>
<a href="#l17.146"></a><span id="l17.146" class="difflineminus">-        accountValues,</span>
<a href="#l17.147"></a><span id="l17.147" class="difflineminus">-        &quot;server&quot;,</span>
<a href="#l17.148"></a><span id="l17.148" class="difflineminus">-        &quot;type&quot;,</span>
<a href="#l17.149"></a><span id="l17.149" class="difflineminus">-        null,</span>
<a href="#l17.150"></a><span id="l17.150" class="difflineminus">-        false</span>
<a href="#l17.151"></a><span id="l17.151" class="difflineminus">-      );</span>
<a href="#l17.152"></a><span id="l17.152" class="difflineminus">-      // Try to keep this list of account types not having Junk settings</span>
<a href="#l17.153"></a><span id="l17.153" class="difflineminus">-      // synchronized with the list in AccountManager.js.</span>
<a href="#l17.154"></a><span id="l17.154" class="difflineminus">-      if (type != &quot;nntp&quot; &amp;&amp; type != &quot;rss&quot; &amp;&amp; type != &quot;im&quot;) {</span>
<a href="#l17.155"></a><span id="l17.155" class="difflineminus">-        let spamActionTargetAccount = parent.getAccountValue(</span>
<a href="#l17.156"></a><span id="l17.156" class="difflineplus">+      for (let account of fixIterator(</span>
<a href="#l17.157"></a><span id="l17.157" class="difflineplus">+        MailServices.accounts.accounts,</span>
<a href="#l17.158"></a><span id="l17.158" class="difflineplus">+        Ci.nsIMsgAccount</span>
<a href="#l17.159"></a><span id="l17.159" class="difflineplus">+      )) {</span>
<a href="#l17.160"></a><span id="l17.160" class="difflineplus">+        let accountValues = parent.getValueArrayFor(account);</span>
<a href="#l17.161"></a><span id="l17.161" class="difflineplus">+        let type = parent.getAccountValue(</span>
<a href="#l17.162"></a><span id="l17.162">           account,</span>
<a href="#l17.163"></a><span id="l17.163">           accountValues,</span>
<a href="#l17.164"></a><span id="l17.164">           &quot;server&quot;,</span>
<a href="#l17.165"></a><span id="l17.165" class="difflineminus">-          &quot;spamActionTargetAccount&quot;,</span>
<a href="#l17.166"></a><span id="l17.166" class="difflineminus">-          &quot;string&quot;,</span>
<a href="#l17.167"></a><span id="l17.167" class="difflineminus">-          true</span>
<a href="#l17.168"></a><span id="l17.168" class="difflineminus">-        );</span>
<a href="#l17.169"></a><span id="l17.169" class="difflineminus">-        let spamActionTargetFolder = parent.getAccountValue(</span>
<a href="#l17.170"></a><span id="l17.170" class="difflineminus">-          account,</span>
<a href="#l17.171"></a><span id="l17.171" class="difflineminus">-          accountValues,</span>
<a href="#l17.172"></a><span id="l17.172" class="difflineminus">-          &quot;server&quot;,</span>
<a href="#l17.173"></a><span id="l17.173" class="difflineminus">-          &quot;spamActionTargetFolder&quot;,</span>
<a href="#l17.174"></a><span id="l17.174" class="difflineminus">-          &quot;string&quot;,</span>
<a href="#l17.175"></a><span id="l17.175" class="difflineminus">-          true</span>
<a href="#l17.176"></a><span id="l17.176" class="difflineplus">+          &quot;type&quot;,</span>
<a href="#l17.177"></a><span id="l17.177" class="difflineplus">+          null,</span>
<a href="#l17.178"></a><span id="l17.178" class="difflineplus">+          false</span>
<a href="#l17.179"></a><span id="l17.179">         );</span>
<a href="#l17.180"></a><span id="l17.180" class="difflineminus">-        let moveOnSpam = parent.getAccountValue(</span>
<a href="#l17.181"></a><span id="l17.181" class="difflineminus">-          account,</span>
<a href="#l17.182"></a><span id="l17.182" class="difflineminus">-          accountValues,</span>
<a href="#l17.183"></a><span id="l17.183" class="difflineminus">-          &quot;server&quot;,</span>
<a href="#l17.184"></a><span id="l17.184" class="difflineminus">-          &quot;moveOnSpam&quot;,</span>
<a href="#l17.185"></a><span id="l17.185" class="difflineminus">-          &quot;bool&quot;,</span>
<a href="#l17.186"></a><span id="l17.186" class="difflineminus">-          true</span>
<a href="#l17.187"></a><span id="l17.187" class="difflineminus">-        );</span>
<a href="#l17.188"></a><span id="l17.188" class="difflineminus">-</span>
<a href="#l17.189"></a><span id="l17.189" class="difflineminus">-        // Check if there are any invalid junk targets and fix them.</span>
<a href="#l17.190"></a><span id="l17.190" class="difflineminus">-        [</span>
<a href="#l17.191"></a><span id="l17.191" class="difflineminus">-          spamActionTargetAccount,</span>
<a href="#l17.192"></a><span id="l17.192" class="difflineminus">-          spamActionTargetFolder,</span>
<a href="#l17.193"></a><span id="l17.193" class="difflineminus">-          moveOnSpam,</span>
<a href="#l17.194"></a><span id="l17.194" class="difflineminus">-        ] = sanitizeJunkTargets(</span>
<a href="#l17.195"></a><span id="l17.195" class="difflineminus">-          spamActionTargetAccount,</span>
<a href="#l17.196"></a><span id="l17.196" class="difflineminus">-          spamActionTargetFolder,</span>
<a href="#l17.197"></a><span id="l17.197" class="difflineminus">-          deferredURI || account.incomingServer.serverURI,</span>
<a href="#l17.198"></a><span id="l17.198" class="difflineminus">-          parent.getAccountValue(</span>
<a href="#l17.199"></a><span id="l17.199" class="difflineplus">+        // Try to keep this list of account types not having Junk settings</span>
<a href="#l17.200"></a><span id="l17.200" class="difflineplus">+        // synchronized with the list in AccountManager.js.</span>
<a href="#l17.201"></a><span id="l17.201" class="difflineplus">+        if (type != &quot;nntp&quot; &amp;&amp; type != &quot;rss&quot; &amp;&amp; type != &quot;im&quot;) {</span>
<a href="#l17.202"></a><span id="l17.202" class="difflineplus">+          let spamActionTargetAccount = parent.getAccountValue(</span>
<a href="#l17.203"></a><span id="l17.203" class="difflineplus">+            account,</span>
<a href="#l17.204"></a><span id="l17.204" class="difflineplus">+            accountValues,</span>
<a href="#l17.205"></a><span id="l17.205" class="difflineplus">+            &quot;server&quot;,</span>
<a href="#l17.206"></a><span id="l17.206" class="difflineplus">+            &quot;spamActionTargetAccount&quot;,</span>
<a href="#l17.207"></a><span id="l17.207" class="difflineplus">+            &quot;string&quot;,</span>
<a href="#l17.208"></a><span id="l17.208" class="difflineplus">+            true</span>
<a href="#l17.209"></a><span id="l17.209" class="difflineplus">+          );</span>
<a href="#l17.210"></a><span id="l17.210" class="difflineplus">+          let spamActionTargetFolder = parent.getAccountValue(</span>
<a href="#l17.211"></a><span id="l17.211" class="difflineplus">+            account,</span>
<a href="#l17.212"></a><span id="l17.212" class="difflineplus">+            accountValues,</span>
<a href="#l17.213"></a><span id="l17.213" class="difflineplus">+            &quot;server&quot;,</span>
<a href="#l17.214"></a><span id="l17.214" class="difflineplus">+            &quot;spamActionTargetFolder&quot;,</span>
<a href="#l17.215"></a><span id="l17.215" class="difflineplus">+            &quot;string&quot;,</span>
<a href="#l17.216"></a><span id="l17.216" class="difflineplus">+            true</span>
<a href="#l17.217"></a><span id="l17.217" class="difflineplus">+          );</span>
<a href="#l17.218"></a><span id="l17.218" class="difflineplus">+          let moveOnSpam = parent.getAccountValue(</span>
<a href="#l17.219"></a><span id="l17.219">             account,</span>
<a href="#l17.220"></a><span id="l17.220">             accountValues,</span>
<a href="#l17.221"></a><span id="l17.221">             &quot;server&quot;,</span>
<a href="#l17.222"></a><span id="l17.222" class="difflineminus">-            &quot;moveTargetMode&quot;,</span>
<a href="#l17.223"></a><span id="l17.223" class="difflineminus">-            &quot;int&quot;,</span>
<a href="#l17.224"></a><span id="l17.224" class="difflineplus">+            &quot;moveOnSpam&quot;,</span>
<a href="#l17.225"></a><span id="l17.225" class="difflineplus">+            &quot;bool&quot;,</span>
<a href="#l17.226"></a><span id="l17.226">             true</span>
<a href="#l17.227"></a><span id="l17.227" class="difflineminus">-          ),</span>
<a href="#l17.228"></a><span id="l17.228" class="difflineminus">-          account.incomingServer.spamSettings,</span>
<a href="#l17.229"></a><span id="l17.229" class="difflineminus">-          moveOnSpam</span>
<a href="#l17.230"></a><span id="l17.230" class="difflineminus">-        );</span>
<a href="#l17.231"></a><span id="l17.231" class="difflineplus">+          );</span>
<a href="#l17.232"></a><span id="l17.232"> </span>
<a href="#l17.233"></a><span id="l17.233" class="difflineminus">-        parent.setAccountValue(</span>
<a href="#l17.234"></a><span id="l17.234" class="difflineminus">-          accountValues,</span>
<a href="#l17.235"></a><span id="l17.235" class="difflineminus">-          &quot;server&quot;,</span>
<a href="#l17.236"></a><span id="l17.236" class="difflineminus">-          &quot;moveOnSpam&quot;,</span>
<a href="#l17.237"></a><span id="l17.237" class="difflineminus">-          moveOnSpam</span>
<a href="#l17.238"></a><span id="l17.238" class="difflineminus">-        );</span>
<a href="#l17.239"></a><span id="l17.239" class="difflineminus">-        parent.setAccountValue(</span>
<a href="#l17.240"></a><span id="l17.240" class="difflineminus">-          accountValues,</span>
<a href="#l17.241"></a><span id="l17.241" class="difflineminus">-          &quot;server&quot;,</span>
<a href="#l17.242"></a><span id="l17.242" class="difflineminus">-          &quot;spamActionTargetAccount&quot;,</span>
<a href="#l17.243"></a><span id="l17.243" class="difflineminus">-          spamActionTargetAccount</span>
<a href="#l17.244"></a><span id="l17.244" class="difflineminus">-        );</span>
<a href="#l17.245"></a><span id="l17.245" class="difflineminus">-        parent.setAccountValue(</span>
<a href="#l17.246"></a><span id="l17.246" class="difflineminus">-          accountValues,</span>
<a href="#l17.247"></a><span id="l17.247" class="difflineminus">-          &quot;server&quot;,</span>
<a href="#l17.248"></a><span id="l17.248" class="difflineminus">-          &quot;spamActionTargetFolder&quot;,</span>
<a href="#l17.249"></a><span id="l17.249" class="difflineminus">-          spamActionTargetFolder</span>
<a href="#l17.250"></a><span id="l17.250" class="difflineminus">-        );</span>
<a href="#l17.251"></a><span id="l17.251" class="difflineplus">+          // Check if there are any invalid junk targets and fix them.</span>
<a href="#l17.252"></a><span id="l17.252" class="difflineplus">+          [</span>
<a href="#l17.253"></a><span id="l17.253" class="difflineplus">+            spamActionTargetAccount,</span>
<a href="#l17.254"></a><span id="l17.254" class="difflineplus">+            spamActionTargetFolder,</span>
<a href="#l17.255"></a><span id="l17.255" class="difflineplus">+            moveOnSpam,</span>
<a href="#l17.256"></a><span id="l17.256" class="difflineplus">+          ] = sanitizeJunkTargets(</span>
<a href="#l17.257"></a><span id="l17.257" class="difflineplus">+            spamActionTargetAccount,</span>
<a href="#l17.258"></a><span id="l17.258" class="difflineplus">+            spamActionTargetFolder,</span>
<a href="#l17.259"></a><span id="l17.259" class="difflineplus">+            deferredURI || account.incomingServer.serverURI,</span>
<a href="#l17.260"></a><span id="l17.260" class="difflineplus">+            parent.getAccountValue(</span>
<a href="#l17.261"></a><span id="l17.261" class="difflineplus">+              account,</span>
<a href="#l17.262"></a><span id="l17.262" class="difflineplus">+              accountValues,</span>
<a href="#l17.263"></a><span id="l17.263" class="difflineplus">+              &quot;server&quot;,</span>
<a href="#l17.264"></a><span id="l17.264" class="difflineplus">+              &quot;moveTargetMode&quot;,</span>
<a href="#l17.265"></a><span id="l17.265" class="difflineplus">+              &quot;int&quot;,</span>
<a href="#l17.266"></a><span id="l17.266" class="difflineplus">+              true</span>
<a href="#l17.267"></a><span id="l17.267" class="difflineplus">+            ),</span>
<a href="#l17.268"></a><span id="l17.268" class="difflineplus">+            account.incomingServer.spamSettings,</span>
<a href="#l17.269"></a><span id="l17.269" class="difflineplus">+            moveOnSpam</span>
<a href="#l17.270"></a><span id="l17.270" class="difflineplus">+          );</span>
<a href="#l17.271"></a><span id="l17.271" class="difflineplus">+</span>
<a href="#l17.272"></a><span id="l17.272" class="difflineplus">+          parent.setAccountValue(</span>
<a href="#l17.273"></a><span id="l17.273" class="difflineplus">+            accountValues,</span>
<a href="#l17.274"></a><span id="l17.274" class="difflineplus">+            &quot;server&quot;,</span>
<a href="#l17.275"></a><span id="l17.275" class="difflineplus">+            &quot;moveOnSpam&quot;,</span>
<a href="#l17.276"></a><span id="l17.276" class="difflineplus">+            moveOnSpam</span>
<a href="#l17.277"></a><span id="l17.277" class="difflineplus">+          );</span>
<a href="#l17.278"></a><span id="l17.278" class="difflineplus">+          parent.setAccountValue(</span>
<a href="#l17.279"></a><span id="l17.279" class="difflineplus">+            accountValues,</span>
<a href="#l17.280"></a><span id="l17.280" class="difflineplus">+            &quot;server&quot;,</span>
<a href="#l17.281"></a><span id="l17.281" class="difflineplus">+            &quot;spamActionTargetAccount&quot;,</span>
<a href="#l17.282"></a><span id="l17.282" class="difflineplus">+            spamActionTargetAccount</span>
<a href="#l17.283"></a><span id="l17.283" class="difflineplus">+          );</span>
<a href="#l17.284"></a><span id="l17.284" class="difflineplus">+          parent.setAccountValue(</span>
<a href="#l17.285"></a><span id="l17.285" class="difflineplus">+            accountValues,</span>
<a href="#l17.286"></a><span id="l17.286" class="difflineplus">+            &quot;server&quot;,</span>
<a href="#l17.287"></a><span id="l17.287" class="difflineplus">+            &quot;spamActionTargetFolder&quot;,</span>
<a href="#l17.288"></a><span id="l17.288" class="difflineplus">+            spamActionTargetFolder</span>
<a href="#l17.289"></a><span id="l17.289" class="difflineplus">+          );</span>
<a href="#l17.290"></a><span id="l17.290" class="difflineplus">+        }</span>
<a href="#l17.291"></a><span id="l17.291">       }</span>
<a href="#l17.292"></a><span id="l17.292">     }</span>
<a href="#l17.293"></a><span id="l17.293" class="difflineminus">-  }</span>
<a href="#l17.294"></a><span id="l17.294" class="difflineplus">+  };</span>
<a href="#l17.295"></a><span id="l17.295" class="difflineplus">+</span>
<a href="#l17.296"></a><span id="l17.296" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l17.297"></a><span id="l17.297" class="difflineplus">+    &quot;chrome://messenger/content/am-server-advanced.xhtml&quot;,</span>
<a href="#l17.298"></a><span id="l17.298" class="difflineplus">+    null,</span>
<a href="#l17.299"></a><span id="l17.299" class="difflineplus">+    serverSettings,</span>
<a href="#l17.300"></a><span id="l17.300" class="difflineplus">+    onCloseAdvanced</span>
<a href="#l17.301"></a><span id="l17.301" class="difflineplus">+  );</span>
<a href="#l17.302"></a><span id="l17.302"> }</span>
<a href="#l17.303"></a><span id="l17.303"> </span>
<a href="#l17.304"></a><span id="l17.304"> function secureSelect(aLoading) {</span>
<a href="#l17.305"></a><span id="l17.305">   var socketType = document.getElementById(&quot;server.socketType&quot;).value;</span>
<a href="#l17.306"></a><span id="l17.306">   var defaultPort = gServer.protocolInfo.getDefaultServerPort(false);</span>
<a href="#l17.307"></a><span id="l17.307">   var defaultPortSecure = gServer.protocolInfo.getDefaultServerPort(true);</span>
<a href="#l17.308"></a><span id="l17.308">   var port = document.getElementById(&quot;server.port&quot;);</span>
<a href="#l17.309"></a><span id="l17.309">   var portDefault = document.getElementById(&quot;defaultPort&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-server.xhtml</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-server.xhtml</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -437,19 +437,19 @@</span>
<a href="#l18.4"></a><span id="l18.4">                   filepickertitle=&quot;&amp;localFolderPicker.label;&quot;</span>
<a href="#l18.5"></a><span id="l18.5">                   accesskey=&quot;&amp;browseFolder.accesskey;&quot;</span>
<a href="#l18.6"></a><span id="l18.6">                   oncommand=&quot;BrowseForLocalFolders();&quot;/&gt;</span>
<a href="#l18.7"></a><span id="l18.7">         &lt;/hbox&gt;</span>
<a href="#l18.8"></a><span id="l18.8">       &lt;/vbox&gt;</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10">     &lt;/html:fieldset&gt;</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    &lt;hbox hidefor=&quot;imap,pop3,movemail&quot; align=&quot;center&quot; valign=&quot;middle&quot; iscontrolcontainer=&quot;true&quot;&gt;</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-    &lt;hbox hidefor=&quot;imap,pop3,movemail&quot; align=&quot;center&quot; valign=&quot;middle&quot; iscontrolcontainer=&quot;true&quot;&gt;</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l18.17"></a><span id="l18.17">       &lt;label value=&quot;&amp;serverDefaultCharset2.label;&quot; control=&quot;nntp.charset&quot;/&gt;</span>
<a href="#l18.18"></a><span id="l18.18">       &lt;menulist is=&quot;menulist-charsetpicker-viewing&quot; id=&quot;nntp.charset&quot;</span>
<a href="#l18.19"></a><span id="l18.19">                 hidable=&quot;true&quot;</span>
<a href="#l18.20"></a><span id="l18.20">                 hidefor=&quot;imap,pop3,movemail&quot;</span>
<a href="#l18.21"></a><span id="l18.21">                 wsm_persist=&quot;true&quot;</span>
<a href="#l18.22"></a><span id="l18.22">                 preftype=&quot;string&quot;</span>
<a href="#l18.23"></a><span id="l18.23">                 prefstring=&quot;mail.server.%serverkey%.charset&quot;/&gt;</span>
<a href="#l18.24"></a><span id="l18.24">     &lt;/hbox&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/base/prefs/content/amUtils.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/base/prefs/content/amUtils.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1,13 +1,15 @@</span>
<a href="#l19.4"></a><span id="l19.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l19.5"></a><span id="l19.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l19.6"></a><span id="l19.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l19.7"></a><span id="l19.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l19.8"></a><span id="l19.8"> </span>
<a href="#l19.9"></a><span id="l19.9" class="difflineplus">+/* import-globals-from am-smtp.js */</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineplus">+</span>
<a href="#l19.11"></a><span id="l19.11"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l19.12"></a><span id="l19.12"> var { MailServices } = ChromeUtils.import(</span>
<a href="#l19.13"></a><span id="l19.13">   &quot;resource:///modules/MailServices.jsm&quot;</span>
<a href="#l19.14"></a><span id="l19.14"> );</span>
<a href="#l19.15"></a><span id="l19.15"> var { MailUtils } = ChromeUtils.import(&quot;resource:///modules/MailUtils.jsm&quot;);</span>
<a href="#l19.16"></a><span id="l19.16"> var { fixIterator } = ChromeUtils.import(</span>
<a href="#l19.17"></a><span id="l19.17">   &quot;resource:///modules/iteratorUtils.jsm&quot;</span>
<a href="#l19.18"></a><span id="l19.18"> );</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineat">@@ -253,17 +255,23 @@ function accountNameExists(aAccountName,</span>
<a href="#l19.20"></a><span id="l19.20">  *</span>
<a href="#l19.21"></a><span id="l19.21">  * @param aServer {nsISmtpServer}  The server to edit.</span>
<a href="#l19.22"></a><span id="l19.22">  * @return {object}                Object with result member to indicate whether 'OK'</span>
<a href="#l19.23"></a><span id="l19.23">  *                                 was clicked and addSmtpServer with key of newly created server.</span>
<a href="#l19.24"></a><span id="l19.24">  */</span>
<a href="#l19.25"></a><span id="l19.25"> function editSMTPServer(aServer) {</span>
<a href="#l19.26"></a><span id="l19.26">   let args = { server: aServer, result: false, addSmtpServer: &quot;&quot; };</span>
<a href="#l19.27"></a><span id="l19.27"> </span>
<a href="#l19.28"></a><span id="l19.28" class="difflineminus">-  window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineplus">+  let onCloseSMTPDialog = function() {</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineplus">+    if (args.result) {</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineplus">+      gSmtpServerListWindow.refreshServerList(aServer, true);</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+    }</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineplus">+  };</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineplus">+</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l19.36"></a><span id="l19.36">     &quot;chrome://messenger/content/SmtpServerEdit.xhtml&quot;,</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineminus">-    &quot;smtpEdit&quot;,</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-    &quot;chrome,titlebar,modal,centerscreen&quot;,</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineminus">-    args</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineplus">+    null,</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineplus">+    args,</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineplus">+    onCloseSMTPDialog</span>
<a href="#l19.43"></a><span id="l19.43">   );</span>
<a href="#l19.44"></a><span id="l19.44"> </span>
<a href="#l19.45"></a><span id="l19.45">   return args;</span>
<a href="#l19.46"></a><span id="l19.46"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/extensions/mdn/content/am-mdn.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/extensions/mdn/content/am-mdn.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -152,15 +152,13 @@ function disableIfLocked(prefstrArray) {</span>
<a href="#l20.4"></a><span id="l20.4">   }</span>
<a href="#l20.5"></a><span id="l20.5"> }</span>
<a href="#l20.6"></a><span id="l20.6"> </span>
<a href="#l20.7"></a><span id="l20.7"> /**</span>
<a href="#l20.8"></a><span id="l20.8">  * Opens Preferences (Options) dialog on the pane and tab where</span>
<a href="#l20.9"></a><span id="l20.9">  * the global receipts settings can be found.</span>
<a href="#l20.10"></a><span id="l20.10">  */</span>
<a href="#l20.11"></a><span id="l20.11"> function showGlobalReceipts() {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  openPrefsFromAccountManager(</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-    &quot;paneAdvanced&quot;,</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-    &quot;readingAndDisplayCategory&quot;,</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-    { subdialog: &quot;showReturnReceipts&quot; },</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-    &quot;receipts_pane&quot;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+  parent.gSubDialog.open(</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+    &quot;chrome://messenger/content/preferences/receipts.xhtml&quot;,</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineplus">+    &quot;resizable=no&quot;</span>
<a href="#l20.20"></a><span id="l20.20">   );</span>
<a href="#l20.21"></a><span id="l20.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/extensions/smime/content/am-smime.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/extensions/smime/content/am-smime.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -483,44 +483,20 @@ function smimeClearCert(smime_cert) {</span>
<a href="#l21.4"></a><span id="l21.4">   } else if (smime_cert == kSigningCertPref) {</span>
<a href="#l21.5"></a><span id="l21.5">     enableSigningControls(false);</span>
<a href="#l21.6"></a><span id="l21.6">   }</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8">   enableCertSelectButtons();</span>
<a href="#l21.9"></a><span id="l21.9"> }</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11"> function openCertManager() {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  // Check for an existing certManager window and focus it; it's not</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-  // application modal.</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-  let lastCertManager = Services.wm.getMostRecentWindow(&quot;mozilla:certmanager&quot;);</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-  if (lastCertManager) {</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-    lastCertManager.focus();</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-  } else {</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-    window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-      &quot;chrome://pippki/content/certManager.xhtml&quot;,</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-      &quot;&quot;,</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">-      &quot;centerscreen,resizable=yes,dialog=no&quot;</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineminus">-    );</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineminus">-  }</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineplus">+  parent.gSubDialog.open(&quot;chrome://pippki/content/certManager.xhtml&quot;);</span>
<a href="#l21.25"></a><span id="l21.25"> }</span>
<a href="#l21.26"></a><span id="l21.26"> </span>
<a href="#l21.27"></a><span id="l21.27"> function openDeviceManager() {</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineminus">-  // Check for an existing deviceManager window and focus it; it's not</span>
<a href="#l21.29"></a><span id="l21.29" class="difflineminus">-  // application modal.</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-  let lastCertManager = Services.wm.getMostRecentWindow(</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-    &quot;mozilla:devicemanager&quot;</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineminus">-  );</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineminus">-  if (lastCertManager) {</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">-    lastCertManager.focus();</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineminus">-  } else {</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-    window.docShell.rootTreeItem.domWindow.openDialog(</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineminus">-      &quot;chrome://pippki/content/device_manager.xhtml&quot;,</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineminus">-      &quot;&quot;,</span>
<a href="#l21.39"></a><span id="l21.39" class="difflineminus">-      &quot;centerscreen,resizable=yes,dialog=no&quot;</span>
<a href="#l21.40"></a><span id="l21.40" class="difflineminus">-    );</span>
<a href="#l21.41"></a><span id="l21.41" class="difflineminus">-  }</span>
<a href="#l21.42"></a><span id="l21.42" class="difflineplus">+  parent.gSubDialog.open(&quot;chrome://pippki/content/device_manager.xhtml&quot;);</span>
<a href="#l21.43"></a><span id="l21.43"> }</span>
<a href="#l21.44"></a><span id="l21.44"> </span>
<a href="#l21.45"></a><span id="l21.45"> function smimeOnLoadEditor() {</span>
<a href="#l21.46"></a><span id="l21.46">   smimeInitializeFields();</span>
<a href="#l21.47"></a><span id="l21.47">   document.addEventListener(&quot;dialogaccept&quot;, smimeOnAcceptEditor);</span>
<a href="#l21.48"></a><span id="l21.48">   window.dispatchEvent(new CustomEvent(&quot;prefchange&quot;));</span>
<a href="#l21.49"></a><span id="l21.49"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

