<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12117:fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb" />
<meta property="og:url" content="/comm-central/rev/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb" />
<meta property="og:description" content="Bug 681219 - Make method names of nsISmtpService more decent. r=standard8, sr=bienvenu" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">shortlog</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">files</a> |
changeset |
<a href="/comm-central/raw-rev/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">raw</a>  | <a href="/comm-central/archive/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=681219">Bug 681219</a> - Make method names of nsISmtpService more decent. r=standard8, sr=bienvenu
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#72;&#105;&#114;&#111;&#121;&#117;&#107;&#105;&#32;&#73;&#107;&#101;&#122;&#111;&#101;&#32;&#60;&#104;&#105;&#105;&#107;&#101;&#122;&#111;&#101;&#64;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#45;&#106;&#97;&#112;&#97;&#110;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 12 Mar 2013 15:29:07 -0400</td></tr>

<tr>
 <td>changeset 12117</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb</a></td>
</tr>



<tr>
<td>parent 12116</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3220cc71d13738248229f093feec0cc7b91a51fb">3220cc71d13738248229f093feec0cc7b91a51fb</a>
</td>
</tr>

<tr>
<td>child 12118</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/59251f37874372088af401559e156218c7f923e3">59251f37874372088af401559e156218c7f923e3</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">8994</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 12 Mar 2013 19:29:18 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@fab9e5145cd4 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb&newProject=comm-central&newRevision=3220cc71d13738248229f093feec0cc7b91a51fb&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb&newProject=comm-central&newRevision=3220cc71d13738248229f093feec0cc7b91a51fb&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb&newProject=comm-central&newRevision=3220cc71d13738248229f093feec0cc7b91a51fb&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28standard8%29&revcount=50">standard8</a>, <a href="/comm-central/log?rev=reviewer%28bienvenu%29&revcount=50">bienvenu</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=681219">681219</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=681219">Bug 681219</a> - Make method names of nsISmtpService more decent. r=standard8, sr=bienvenu</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/components/about-support/aboutSupport.js">mail/components/about-support/aboutSupport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/components/about-support/aboutSupport.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/components/about-support/aboutSupport.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/components/about-support/aboutSupport.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/components/about-support/aboutSupport.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/components/about-support/aboutSupport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/account/test-mail-account-setup-wizard.js">mail/test/mozmill/account/test-mail-account-setup-wizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/account/test-mail-account-setup-wizard.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/account/test-mail-account-setup-wizard.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/account/test-mail-account-setup-wizard.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/account/test-mail-account-setup-wizard.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/account/test-mail-account-setup-wizard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/instrumentation/test-instrument-setup.js">mail/test/mozmill/instrumentation/test-instrument-setup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/instrumentation/test-instrument-setup.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/instrumentation/test-instrument-setup.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/instrumentation/test-instrument-setup.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/instrumentation/test-instrument-setup.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mail/test/mozmill/instrumentation/test-instrument-setup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/AccountWizard.js">mailnews/base/prefs/content/AccountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/AccountWizard.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/AccountWizard.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/AccountWizard.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/AccountWizard.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/AccountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/SmtpServerEdit.js">mailnews/base/prefs/content/SmtpServerEdit.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/SmtpServerEdit.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/SmtpServerEdit.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/SmtpServerEdit.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/SmtpServerEdit.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/SmtpServerEdit.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/createInBackend.js">mailnews/base/prefs/content/accountcreation/createInBackend.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/createInBackend.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/createInBackend.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/createInBackend.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/createInBackend.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/createInBackend.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/emailWizard.js">mailnews/base/prefs/content/accountcreation/emailWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/emailWizard.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/emailWizard.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/emailWizard.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/emailWizard.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/accountcreation/emailWizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-identity-edit.js">mailnews/base/prefs/content/am-identity-edit.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-identity-edit.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-identity-edit.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-identity-edit.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-identity-edit.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-identity-edit.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-smtp.js">mailnews/base/prefs/content/am-smtp.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-smtp.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-smtp.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-smtp.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-smtp.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/base/prefs/content/am-smtp.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/public/nsISmtpService.idl">mailnews/compose/public/nsISmtpService.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/public/nsISmtpService.idl">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/public/nsISmtpService.idl">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/public/nsISmtpService.idl">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/public/nsISmtpService.idl">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/public/nsISmtpService.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsSmtpService.cpp">mailnews/compose/src/nsSmtpService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsSmtpService.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsSmtpService.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsSmtpService.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsSmtpService.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/src/nsSmtpService.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/test/unit/test_nsSmtpService1.js">mailnews/compose/test/unit/test_nsSmtpService1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/test/unit/test_nsSmtpService1.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/test/unit/test_nsSmtpService1.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/test/unit/test_nsSmtpService1.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/test/unit/test_nsSmtpService1.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/compose/test/unit/test_nsSmtpService1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraMac.cpp">mailnews/import/eudora/src/nsEudoraMac.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraMac.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraMac.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraMac.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraMac.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraMac.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraWin32.cpp">mailnews/import/eudora/src/nsEudoraWin32.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraWin32.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraWin32.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraWin32.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraWin32.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/eudora/src/nsEudoraWin32.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/oexpress/nsOESettings.cpp">mailnews/import/oexpress/nsOESettings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/oexpress/nsOESettings.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/oexpress/nsOESettings.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/oexpress/nsOESettings.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/oexpress/nsOESettings.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/oexpress/nsOESettings.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/outlook/src/nsOutlookSettings.cpp">mailnews/import/outlook/src/nsOutlookSettings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/outlook/src/nsOutlookSettings.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/outlook/src/nsOutlookSettings.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/outlook/src/nsOutlookSettings.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/outlook/src/nsOutlookSettings.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/outlook/src/nsOutlookSettings.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_oe_settings.js">mailnews/import/test/unit/test_oe_settings.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_oe_settings.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_oe_settings.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_oe_settings.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_oe_settings.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_oe_settings.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_outlook_settings.js">mailnews/import/test/unit/test_outlook_settings.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_outlook_settings.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_outlook_settings.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_outlook_settings.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_outlook_settings.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_outlook_settings.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_winmail.js">mailnews/import/test/unit/test_winmail.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_winmail.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_winmail.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_winmail.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_winmail.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/test/unit/test_winmail.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/winlivemail/nsWMSettings.cpp">mailnews/import/winlivemail/nsWMSettings.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/winlivemail/nsWMSettings.cpp">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/winlivemail/nsWMSettings.cpp">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/winlivemail/nsWMSettings.cpp">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/winlivemail/nsWMSettings.cpp">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/import/winlivemail/nsWMSettings.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/test/resources/mailTestUtils.js">mailnews/test/resources/mailTestUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/test/resources/mailTestUtils.js">file</a> |
<a href="/comm-central/annotate/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/test/resources/mailTestUtils.js">annotate</a> |
<a href="/comm-central/diff/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/test/resources/mailTestUtils.js">diff</a> |
<a href="/comm-central/comparison/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/test/resources/mailTestUtils.js">comparison</a> |
<a href="/comm-central/log/fab9e5145cd4dbf80e49ea9dbea4e7f2867b58cb/mailnews/test/resources/mailTestUtils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/components/about-support/aboutSupport.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/components/about-support/aboutSupport.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -53,17 +53,17 @@ var AboutSupport = {</span>
<a href="#l1.4"></a><span id="l1.4">   _getSMTPDetails: function AboutSupport__getSMTPDetails(aAccount) {</span>
<a href="#l1.5"></a><span id="l1.5">     let identities = aAccount.identities;</span>
<a href="#l1.6"></a><span id="l1.6">     let defaultIdentity = aAccount.defaultIdentity;</span>
<a href="#l1.7"></a><span id="l1.7">     let smtpDetails = [];</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     for each (let identity in fixIterator(identities, Ci.nsIMsgIdentity)) {</span>
<a href="#l1.10"></a><span id="l1.10">       let isDefault = identity == defaultIdentity;</span>
<a href="#l1.11"></a><span id="l1.11">       let smtpServer = {};</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-      MailServices.smtp.GetSmtpServerByIdentity(identity, smtpServer);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      MailServices.smtp.getServerByIdentity(identity, smtpServer);</span>
<a href="#l1.14"></a><span id="l1.14">       smtpDetails.push({name: smtpServer.value.displayname,</span>
<a href="#l1.15"></a><span id="l1.15">                         authMethod: smtpServer.value.authMethod,</span>
<a href="#l1.16"></a><span id="l1.16">                         socketType: smtpServer.value.socketType,</span>
<a href="#l1.17"></a><span id="l1.17">                         isDefault: isDefault});</span>
<a href="#l1.18"></a><span id="l1.18">     }</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">     return smtpDetails;</span>
<a href="#l1.21"></a><span id="l1.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/test/mozmill/account/test-mail-account-setup-wizard.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-mail-account-setup-wizard.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -58,17 +58,17 @@ function remove_account(amc) {</span>
<a href="#l2.4"></a><span id="l2.4">     // Remove the account and incoming server</span>
<a href="#l2.5"></a><span id="l2.5">     let serverId = incoming.serverURI;</span>
<a href="#l2.6"></a><span id="l2.6">     MailServices.accounts.removeAccount(account);</span>
<a href="#l2.7"></a><span id="l2.7">     if (serverId in win.accountArray)</span>
<a href="#l2.8"></a><span id="l2.8">       delete win.accountArray[serverId];</span>
<a href="#l2.9"></a><span id="l2.9">     win.selectServer(null, null);</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">     // Remove the outgoing server</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    MailServices.smtp.deleteSmtpServer(outgoing);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    MailServices.smtp.deleteServer(outgoing);</span>
<a href="#l2.14"></a><span id="l2.14">     win.replaceWithDefaultSmtpServer(outgoing.key);</span>
<a href="#l2.15"></a><span id="l2.15">   } catch (ex) {</span>
<a href="#l2.16"></a><span id="l2.16">     throw new Error(&quot;failure to remove account: &quot; + ex + &quot;\n&quot;);</span>
<a href="#l2.17"></a><span id="l2.17">   }</span>
<a href="#l2.18"></a><span id="l2.18"> }</span>
<a href="#l2.19"></a><span id="l2.19"> </span>
<a href="#l2.20"></a><span id="l2.20"> function test_mail_account_setup() {</span>
<a href="#l2.21"></a><span id="l2.21">   // Set the pref to load a local autoconfig file.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/test/mozmill/instrumentation/test-instrument-setup.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/test/mozmill/instrumentation/test-instrument-setup.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -94,12 +94,12 @@ function remove_account() {</span>
<a href="#l3.4"></a><span id="l3.4">                      .getService(Ci.nsISmtpService);</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">   let incomingServer = am.FindServer(&quot;roger.sterling&quot;, &quot;testin.example.com&quot;, &quot;pop3&quot;);</span>
<a href="#l3.7"></a><span id="l3.7">   let account = am.FindAccountForServer(incomingServer)</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9">   let identity = account.defaultIdentity;</span>
<a href="#l3.10"></a><span id="l3.10">   am.removeIncomingServer(incomingServer, true);</span>
<a href="#l3.11"></a><span id="l3.11">   outgoing = smtpService.getServerByKey(identity.smtpServerKey);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  smtpService.deleteSmtpServer(outgoing);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  smtpService.deleteServer(outgoing);</span>
<a href="#l3.14"></a><span id="l3.14">   am.removeAccount(account);</span>
<a href="#l3.15"></a><span id="l3.15"> }</span>
<a href="#l3.16"></a><span id="l3.16"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/base/prefs/content/AccountWizard.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/base/prefs/content/AccountWizard.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -498,17 +498,17 @@ function finishAccount(account, accountD</span>
<a href="#l4.4"></a><span id="l4.4">           sigFile.append(sigFileName);</span>
<a href="#l4.5"></a><span id="l4.5">           destIdentity.signature = sigFile;</span>
<a href="#l4.6"></a><span id="l4.6">       }</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8">       if (accountData.smtp.hostname &amp;&amp; !destIdentity.smtpServerKey)</span>
<a href="#l4.9"></a><span id="l4.9">       {</span>
<a href="#l4.10"></a><span id="l4.10">           // hostname + no key =&gt; create a new SMTP server.</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-          var smtpServer = smtpService.createSmtpServer();</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+          var smtpServer = smtpService.createServer();</span>
<a href="#l4.14"></a><span id="l4.14">           var isDefaultSmtpServer;</span>
<a href="#l4.15"></a><span id="l4.15">           if (!smtpService.defaultServer.hostname) {</span>
<a href="#l4.16"></a><span id="l4.16">             smtpService.defaultServer = smtpServer;</span>
<a href="#l4.17"></a><span id="l4.17">             isDefaultSmtpServer = true;</span>
<a href="#l4.18"></a><span id="l4.18">           }</span>
<a href="#l4.19"></a><span id="l4.19"> </span>
<a href="#l4.20"></a><span id="l4.20">           copyObjectToInterface(smtpServer, accountData.smtp, false);</span>
<a href="#l4.21"></a><span id="l4.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/base/prefs/content/SmtpServerEdit.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/base/prefs/content/SmtpServerEdit.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -27,17 +27,17 @@ function onAccept()</span>
<a href="#l5.4"></a><span id="l5.4">     window.arguments[0].result = false;</span>
<a href="#l5.5"></a><span id="l5.5">     return false;</span>
<a href="#l5.6"></a><span id="l5.6">   }</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8">   // If we didn't have an SMTP server to initialize with,</span>
<a href="#l5.9"></a><span id="l5.9">   // we must be creating one.</span>
<a href="#l5.10"></a><span id="l5.10">   try {</span>
<a href="#l5.11"></a><span id="l5.11">     if (!gSmtpServer) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      gSmtpServer = MailServices.smtp.createSmtpServer();</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+      gSmtpServer = MailServices.smtp.createServer();</span>
<a href="#l5.14"></a><span id="l5.14">       window.arguments[0].addSmtpServer = gSmtpServer.key;</span>
<a href="#l5.15"></a><span id="l5.15">     }</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17">     saveSmtpSettings(gSmtpServer);</span>
<a href="#l5.18"></a><span id="l5.18">   } catch (ex) {</span>
<a href="#l5.19"></a><span id="l5.19">     Components.utils.reportError(&quot;Error saving smtp server: &quot; + ex);</span>
<a href="#l5.20"></a><span id="l5.20">   }</span>
<a href="#l5.21"></a><span id="l5.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/base/prefs/content/accountcreation/createInBackend.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/base/prefs/content/accountcreation/createInBackend.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -89,17 +89,17 @@ function createAccountInBackend(config)</span>
<a href="#l6.4"></a><span id="l6.4">   let outServer = smtpManager.findServer(username, config.outgoing.hostname);</span>
<a href="#l6.5"></a><span id="l6.5">   assert(config.outgoing.addThisServer ||</span>
<a href="#l6.6"></a><span id="l6.6">          config.outgoing.useGlobalPreferredServer ||</span>
<a href="#l6.7"></a><span id="l6.7">          config.outgoing.existingServerKey,</span>
<a href="#l6.8"></a><span id="l6.8">          &quot;No SMTP server: inconsistent flags&quot;);</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10">   if (config.outgoing.addThisServer &amp;&amp; !outServer)</span>
<a href="#l6.11"></a><span id="l6.11">   {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    outServer = smtpManager.createSmtpServer();</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    outServer = smtpManager.createServer();</span>
<a href="#l6.14"></a><span id="l6.14">     outServer.hostname = config.outgoing.hostname;</span>
<a href="#l6.15"></a><span id="l6.15">     outServer.port = config.outgoing.port;</span>
<a href="#l6.16"></a><span id="l6.16">     outServer.authMethod = config.outgoing.auth;</span>
<a href="#l6.17"></a><span id="l6.17">     if (config.outgoing.auth &gt; 1)</span>
<a href="#l6.18"></a><span id="l6.18">     {</span>
<a href="#l6.19"></a><span id="l6.19">       outServer.username = username;</span>
<a href="#l6.20"></a><span id="l6.20">       outServer.password = config.incoming.password;</span>
<a href="#l6.21"></a><span id="l6.21">       if (config.rememberPassword &amp;&amp; config.incoming.password.length)</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -248,17 +248,17 @@ function checkIncomingServerAlreadyExist</span>
<a href="#l6.23"></a><span id="l6.23">  *     object is returned.</span>
<a href="#l6.24"></a><span id="l6.24">  *     If it's a new server, |null| is returned.</span>
<a href="#l6.25"></a><span id="l6.25">  */</span>
<a href="#l6.26"></a><span id="l6.26"> function checkOutgoingServerAlreadyExists(config)</span>
<a href="#l6.27"></a><span id="l6.27"> {</span>
<a href="#l6.28"></a><span id="l6.28">   assert(config instanceof AccountConfig);</span>
<a href="#l6.29"></a><span id="l6.29">   var smtpManager = Cc[&quot;@mozilla.org/messengercompose/smtp;1&quot;]</span>
<a href="#l6.30"></a><span id="l6.30">                     .getService(Ci.nsISmtpService);</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-  var smtpServers = smtpManager.smtpServers;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  var smtpServers = smtpManager.servers;</span>
<a href="#l6.33"></a><span id="l6.33">   while (smtpServers.hasMoreElements())</span>
<a href="#l6.34"></a><span id="l6.34">   {</span>
<a href="#l6.35"></a><span id="l6.35">     let existingServer = smtpServers.getNext()</span>
<a href="#l6.36"></a><span id="l6.36">         .QueryInterface(Ci.nsISmtpServer);</span>
<a href="#l6.37"></a><span id="l6.37">     // TODO check username with full email address, too, like for incoming</span>
<a href="#l6.38"></a><span id="l6.38">     if (existingServer.hostname == config.outgoing.hostname &amp;&amp;</span>
<a href="#l6.39"></a><span id="l6.39">         existingServer.port == config.outgoing.port &amp;&amp;</span>
<a href="#l6.40"></a><span id="l6.40">         existingServer.username == config.outgoing.username)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/base/prefs/content/accountcreation/emailWizard.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/base/prefs/content/accountcreation/emailWizard.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -196,17 +196,17 @@ EmailConfigWizard.prototype =</span>
<a href="#l7.4"></a><span id="l7.4">     if (!Services.prefs.getBoolPref(&quot;mail.provider.enabled&quot;))</span>
<a href="#l7.5"></a><span id="l7.5">       _hide(&quot;provisioner_button&quot;);</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">     // Populate SMTP server dropdown with already configured SMTP servers from</span>
<a href="#l7.8"></a><span id="l7.8">     // other accounts.</span>
<a href="#l7.9"></a><span id="l7.9">     var menulist = e(&quot;outgoing_hostname&quot;);</span>
<a href="#l7.10"></a><span id="l7.10">     var smtpManager = Cc[&quot;@mozilla.org/messengercompose/smtp;1&quot;]</span>
<a href="#l7.11"></a><span id="l7.11">         .getService(Ci.nsISmtpService);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    var smtpServers = smtpManager.smtpServers;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    var smtpServers = smtpManager.servers;</span>
<a href="#l7.14"></a><span id="l7.14">     while (smtpServers.hasMoreElements()) {</span>
<a href="#l7.15"></a><span id="l7.15">       let server = smtpServers.getNext().QueryInterface(Ci.nsISmtpServer);</span>
<a href="#l7.16"></a><span id="l7.16">       let label = server.displayname;</span>
<a href="#l7.17"></a><span id="l7.17">       let key = server.key;</span>
<a href="#l7.18"></a><span id="l7.18">       if (smtpManager.defaultServer &amp;&amp;</span>
<a href="#l7.19"></a><span id="l7.19">           smtpManager.defaultServer.key == key) {</span>
<a href="#l7.20"></a><span id="l7.20">         label += &quot; &quot; + gStringsBundle.getString(&quot;default_server_tag&quot;);</span>
<a href="#l7.21"></a><span id="l7.21">       }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-identity-edit.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-identity-edit.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -335,17 +335,17 @@ function getAccountForFolderPickerState(</span>
<a href="#l8.4"></a><span id="l8.4"> }</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> /**</span>
<a href="#l8.7"></a><span id="l8.7">  * Build the SMTP server list for display.</span>
<a href="#l8.8"></a><span id="l8.8">  */</span>
<a href="#l8.9"></a><span id="l8.9"> function loadSMTPServerList()</span>
<a href="#l8.10"></a><span id="l8.10"> {</span>
<a href="#l8.11"></a><span id="l8.11">   var smtpServerList = document.getElementById(&quot;identity.smtpServerKey&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  let servers = MailServices.smtp.smtpServers;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  let servers = MailServices.smtp.servers;</span>
<a href="#l8.14"></a><span id="l8.14">   let defaultServer = MailServices.smtp.defaultServer;</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16">   var smtpPopup = document.getElementById(&quot;smtpPopup&quot;);</span>
<a href="#l8.17"></a><span id="l8.17">   while (smtpPopup.lastChild.nodeName != &quot;menuseparator&quot;)</span>
<a href="#l8.18"></a><span id="l8.18">     smtpPopup.removeChild(smtpPopup.lastChild);</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20">   while (servers.hasMoreElements())</span>
<a href="#l8.21"></a><span id="l8.21">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-smtp.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-smtp.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -47,17 +47,17 @@ var gSmtpServerListWindow =</span>
<a href="#l9.4"></a><span id="l9.4">       // confirm deletion</span>
<a href="#l9.5"></a><span id="l9.5">       let cancel = Services.prompt.confirmEx(window,</span>
<a href="#l9.6"></a><span id="l9.6">         this.mBundle.getString('smtpServers-confirmServerDeletionTitle'),</span>
<a href="#l9.7"></a><span id="l9.7">         this.mBundle.getFormattedString('smtpServers-confirmServerDeletion', [server.hostname], 1),</span>
<a href="#l9.8"></a><span id="l9.8">         Services.prompt.STD_YES_NO_BUTTONS, null, null, null, null, { });</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10">       if (!cancel)</span>
<a href="#l9.11"></a><span id="l9.11">       {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        MailServices.smtp.deleteSmtpServer(server);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+        MailServices.smtp.deleteServer(server);</span>
<a href="#l9.14"></a><span id="l9.14">         parent.replaceWithDefaultSmtpServer(server.key);</span>
<a href="#l9.15"></a><span id="l9.15">         this.refreshServerList(&quot;&quot;, true);</span>
<a href="#l9.16"></a><span id="l9.16">       }</span>
<a href="#l9.17"></a><span id="l9.17">     }</span>
<a href="#l9.18"></a><span id="l9.18">   },</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20">   onAddServer: function (aEvent)</span>
<a href="#l9.21"></a><span id="l9.21">   {</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -145,17 +145,17 @@ var gSmtpServerListWindow =</span>
<a href="#l9.23"></a><span id="l9.23"> </span>
<a href="#l9.24"></a><span id="l9.24">   refreshServerList: function(aServerKeyToSelect, aFocusList)</span>
<a href="#l9.25"></a><span id="l9.25">   {</span>
<a href="#l9.26"></a><span id="l9.26">     // remove all children</span>
<a href="#l9.27"></a><span id="l9.27">     while (this.mServerList.hasChildNodes())</span>
<a href="#l9.28"></a><span id="l9.28">       this.mServerList.removeChild(this.mServerList.lastChild);</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30">     this.fillSmtpServers(this.mServerList,</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-                         MailServices.smtp.smtpServers,</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+                         MailServices.smtp.servers,</span>
<a href="#l9.33"></a><span id="l9.33">                          MailServices.smtp.defaultServer);</span>
<a href="#l9.34"></a><span id="l9.34"> </span>
<a href="#l9.35"></a><span id="l9.35">     if (aServerKeyToSelect)</span>
<a href="#l9.36"></a><span id="l9.36">       this.setSelectedServer(this.mServerList.querySelector('[key=&quot;' + aServerKeyToSelect + '&quot;]'));</span>
<a href="#l9.37"></a><span id="l9.37">     else // select the default server</span>
<a href="#l9.38"></a><span id="l9.38">       this.setSelectedServer(this.mServerList.querySelector('[default=&quot;true&quot;]'));</span>
<a href="#l9.39"></a><span id="l9.39"> </span>
<a href="#l9.40"></a><span id="l9.40">     if (aFocusList)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/compose/public/nsISmtpService.idl</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/compose/public/nsISmtpService.idl</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -11,17 +11,17 @@ interface nsIUrlListener;</span>
<a href="#l10.4"></a><span id="l10.4"> interface nsIMsgIdentity;</span>
<a href="#l10.5"></a><span id="l10.5"> interface nsIInterfaceRequestor;</span>
<a href="#l10.6"></a><span id="l10.6"> interface nsIFile;</span>
<a href="#l10.7"></a><span id="l10.7"> interface nsIMsgStatusFeedback;</span>
<a href="#l10.8"></a><span id="l10.8"> interface nsIRequest;</span>
<a href="#l10.9"></a><span id="l10.9"> interface nsISimpleEnumerator;</span>
<a href="#l10.10"></a><span id="l10.10"> interface nsIMsgWindow;</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-[scriptable, uuid(8c5c5d5b-3b69-4a80-bf4b-d6c22865a3c3)]</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+[scriptable, uuid(1b11b532-1527-4fc0-a00f-4ce7e6886419)]</span>
<a href="#l10.14"></a><span id="l10.14"> interface nsISmtpService : nsISupports {</span>
<a href="#l10.15"></a><span id="l10.15">   /**</span>
<a href="#l10.16"></a><span id="l10.16">    * Sends a mail message via the given parameters. This function builds an</span>
<a href="#l10.17"></a><span id="l10.17">    * SMTP URL and makes an SMTP connection, and then runs the url.</span>
<a href="#l10.18"></a><span id="l10.18">    * The SMTP server defined</span>
<a href="#l10.19"></a><span id="l10.19">    * in the aSenderIdentity object (see nsIMsgIdentity) will be used to send</span>
<a href="#l10.20"></a><span id="l10.20">    * the message. If there is no SMTP server defined in aSenderIdentity, the</span>
<a href="#l10.21"></a><span id="l10.21">    * default SMTP server will be used.</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -71,24 +71,26 @@ interface nsISmtpService : nsISupports {</span>
<a href="#l10.23"></a><span id="l10.23">    * @param aMsgWindow         nsIMsgWindow to use for notification callbacks.</span>
<a href="#l10.24"></a><span id="l10.24">    * @return - the url that we run.</span>
<a href="#l10.25"></a><span id="l10.25">    */</span>
<a href="#l10.26"></a><span id="l10.26">   nsIURI verifyLogon(in nsISmtpServer aServer, in nsIUrlListener aListener,</span>
<a href="#l10.27"></a><span id="l10.27">                      in nsIMsgWindow aMsgWindow);</span>
<a href="#l10.28"></a><span id="l10.28"> </span>
<a href="#l10.29"></a><span id="l10.29">   /**</span>
<a href="#l10.30"></a><span id="l10.30">    * Return the SMTP server that is associated with an identity.</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+   * @param  aSenderIdentity   the identity</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+   * @param  aServer           the SMTP server</span>
<a href="#l10.33"></a><span id="l10.33">    */</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-  void GetSmtpServerByIdentity(in nsIMsgIdentity aSenderIdentity,</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-                               out nsISmtpServer aServer);</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+  void getServerByIdentity(in nsIMsgIdentity aSenderIdentity,</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+                           out nsISmtpServer aServer);</span>
<a href="#l10.38"></a><span id="l10.38"> </span>
<a href="#l10.39"></a><span id="l10.39">   /**</span>
<a href="#l10.40"></a><span id="l10.40">    * A copy of the array of SMTP servers, as stored in the preferences</span>
<a href="#l10.41"></a><span id="l10.41">    */</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineminus">-  readonly attribute nsISimpleEnumerator smtpServers;</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineplus">+  readonly attribute nsISimpleEnumerator servers;</span>
<a href="#l10.44"></a><span id="l10.44"> </span>
<a href="#l10.45"></a><span id="l10.45">   /**</span>
<a href="#l10.46"></a><span id="l10.46">    * The default server, across sessions of the app</span>
<a href="#l10.47"></a><span id="l10.47">    * (eventually there will be a session default which does not</span>
<a href="#l10.48"></a><span id="l10.48">    * persist past shutdown)</span>
<a href="#l10.49"></a><span id="l10.49">    */</span>
<a href="#l10.50"></a><span id="l10.50">   attribute nsISmtpServer defaultServer;</span>
<a href="#l10.51"></a><span id="l10.51"> </span>
<a href="#l10.52"></a><span id="l10.52" class="difflineat">@@ -99,17 +101,17 @@ interface nsISmtpService : nsISupports {</span>
<a href="#l10.53"></a><span id="l10.53">    */</span>
<a href="#l10.54"></a><span id="l10.54">   attribute nsISmtpServer sessionDefaultServer;</span>
<a href="#l10.55"></a><span id="l10.55"> </span>
<a href="#l10.56"></a><span id="l10.56">   /**</span>
<a href="#l10.57"></a><span id="l10.57">    * Create a new SMTP server.</span>
<a href="#l10.58"></a><span id="l10.58">    * Use this instead of createInstance(), so that the SMTP Service can</span>
<a href="#l10.59"></a><span id="l10.59">    * be aware of this server</span>
<a href="#l10.60"></a><span id="l10.60">    */</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineminus">-  nsISmtpServer createSmtpServer();</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+  nsISmtpServer createServer();</span>
<a href="#l10.63"></a><span id="l10.63"> </span>
<a href="#l10.64"></a><span id="l10.64">   /**</span>
<a href="#l10.65"></a><span id="l10.65">    * Find the first server with the given hostname and/or username.</span>
<a href="#l10.66"></a><span id="l10.66">    * Note: if either username or hostname is empty, then that parameter will</span>
<a href="#l10.67"></a><span id="l10.67">    * not be used in the matching process.</span>
<a href="#l10.68"></a><span id="l10.68">    * @param username  the username for the server</span>
<a href="#l10.69"></a><span id="l10.69">    * @param hostname  the hostname of the server</span>
<a href="#l10.70"></a><span id="l10.70">    * @returns         null if no server is found</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineat">@@ -123,10 +125,10 @@ interface nsISmtpService : nsISupports {</span>
<a href="#l10.72"></a><span id="l10.72">   nsISmtpServer getServerByKey(in string key);</span>
<a href="#l10.73"></a><span id="l10.73">   </span>
<a href="#l10.74"></a><span id="l10.74">   /**</span>
<a href="#l10.75"></a><span id="l10.75">    * Delete the given server from the server list - does nothing if the server</span>
<a href="#l10.76"></a><span id="l10.76">    * does not exist</span>
<a href="#l10.77"></a><span id="l10.77">    * @param server   the server to delete. Use findServer() if you only know</span>
<a href="#l10.78"></a><span id="l10.78">    *                 the hostname</span>
<a href="#l10.79"></a><span id="l10.79">    */</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineminus">-  void deleteSmtpServer(in nsISmtpServer server);</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+  void deleteServer(in nsISmtpServer server);</span>
<a href="#l10.82"></a><span id="l10.82"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -3736,17 +3736,17 @@ nsMsgComposeAndSend::FormatStringWithSMT</span>
<a href="#l11.4"></a><span id="l11.4"> </span>
<a href="#l11.5"></a><span id="l11.5">   nsresult rv;</span>
<a href="#l11.6"></a><span id="l11.6">   nsCOMPtr&lt;nsISmtpService&gt; smtpService(do_GetService(NS_SMTPSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l11.7"></a><span id="l11.7">   NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9">   // Get the smtp hostname and format the string.</span>
<a href="#l11.10"></a><span id="l11.10">   nsCString smtpHostName;</span>
<a href="#l11.11"></a><span id="l11.11">   nsCOMPtr&lt;nsISmtpServer&gt; smtpServer;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  rv = smtpService-&gt;GetSmtpServerByIdentity(mUserIdentity, getter_AddRefs(smtpServer));</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  rv = smtpService-&gt;GetServerByIdentity(mUserIdentity, getter_AddRefs(smtpServer));</span>
<a href="#l11.14"></a><span id="l11.14">   if (NS_SUCCEEDED(rv))</span>
<a href="#l11.15"></a><span id="l11.15">     smtpServer-&gt;GetHostname(smtpHostName);</span>
<a href="#l11.16"></a><span id="l11.16"> </span>
<a href="#l11.17"></a><span id="l11.17">   nsAutoString hostStr;</span>
<a href="#l11.18"></a><span id="l11.18">   CopyASCIItoUTF16(smtpHostName, hostStr);</span>
<a href="#l11.19"></a><span id="l11.19">   const PRUnichar *params[] = { hostStr.get() };</span>
<a href="#l11.20"></a><span id="l11.20">   if (NS_SUCCEEDED(rv))</span>
<a href="#l11.21"></a><span id="l11.21">     mComposeBundle-&gt;FormatStringFromID(NS_ERROR_GET_CODE(aMsgId), params, 1, aString);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpService.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpService.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -85,17 +85,17 @@ NS_IMETHODIMP nsSmtpService::SendMailMes</span>
<a href="#l12.4"></a><span id="l12.4">                                         bool aRequestDSN,</span>
<a href="#l12.5"></a><span id="l12.5">                                         nsIURI ** aURL,</span>
<a href="#l12.6"></a><span id="l12.6">                                         nsIRequest ** aRequest)</span>
<a href="#l12.7"></a><span id="l12.7"> {</span>
<a href="#l12.8"></a><span id="l12.8">   nsIURI * urlToRun = nullptr;</span>
<a href="#l12.9"></a><span id="l12.9">   nsresult rv = NS_OK;</span>
<a href="#l12.10"></a><span id="l12.10"> </span>
<a href="#l12.11"></a><span id="l12.11">   nsCOMPtr&lt;nsISmtpServer&gt; smtpServer;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  rv = GetSmtpServerByIdentity(aSenderIdentity, getter_AddRefs(smtpServer));</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  rv = GetServerByIdentity(aSenderIdentity, getter_AddRefs(smtpServer));</span>
<a href="#l12.14"></a><span id="l12.14"> </span>
<a href="#l12.15"></a><span id="l12.15">   if (NS_SUCCEEDED(rv) &amp;&amp; smtpServer)</span>
<a href="#l12.16"></a><span id="l12.16">   {</span>
<a href="#l12.17"></a><span id="l12.17">     if (aPassword &amp;&amp; *aPassword)</span>
<a href="#l12.18"></a><span id="l12.18">       smtpServer-&gt;SetPassword(nsDependentCString(aPassword));</span>
<a href="#l12.19"></a><span id="l12.19"> </span>
<a href="#l12.20"></a><span id="l12.20">     // this ref counts urlToRun</span>
<a href="#l12.21"></a><span id="l12.21">     rv = NS_MsgBuildSmtpUrl(aFilePath, smtpServer, aRecipients, aSenderIdentity,</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -334,17 +334,17 @@ NS_IMETHODIMP nsSmtpService::NewChannel(</span>
<a href="#l12.23"></a><span id="l12.23">   pipeOut-&gt;Close();</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25">   return NS_NewInputStreamChannel(_retval, aURI, pipeIn,</span>
<a href="#l12.26"></a><span id="l12.26">                                   NS_LITERAL_CSTRING(&quot;application/x-mailto&quot;));</span>
<a href="#l12.27"></a><span id="l12.27"> }</span>
<a href="#l12.28"></a><span id="l12.28"> </span>
<a href="#l12.29"></a><span id="l12.29"> </span>
<a href="#l12.30"></a><span id="l12.30"> NS_IMETHODIMP</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-nsSmtpService::GetSmtpServers(nsISimpleEnumerator **aResult)</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+nsSmtpService::GetServers(nsISimpleEnumerator **aResult)</span>
<a href="#l12.33"></a><span id="l12.33"> {</span>
<a href="#l12.34"></a><span id="l12.34">   NS_ENSURE_ARG_POINTER(aResult);</span>
<a href="#l12.35"></a><span id="l12.35"> </span>
<a href="#l12.36"></a><span id="l12.36">   // now read in the servers from prefs if necessary</span>
<a href="#l12.37"></a><span id="l12.37">   uint32_t serverCount = mSmtpServers.Count();</span>
<a href="#l12.38"></a><span id="l12.38"> </span>
<a href="#l12.39"></a><span id="l12.39">   if (serverCount &lt;= 0)</span>
<a href="#l12.40"></a><span id="l12.40">     loadSmtpServers();</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineat">@@ -573,17 +573,17 @@ nsSmtpService::findServerByKey(nsISmtpSe</span>
<a href="#l12.42"></a><span id="l12.42">     entry-&gt;server = aServer;</span>
<a href="#l12.43"></a><span id="l12.43">     return false;</span>
<a href="#l12.44"></a><span id="l12.44">   }</span>
<a href="#l12.45"></a><span id="l12.45">     </span>
<a href="#l12.46"></a><span id="l12.46">   return true;</span>
<a href="#l12.47"></a><span id="l12.47"> }</span>
<a href="#l12.48"></a><span id="l12.48"> </span>
<a href="#l12.49"></a><span id="l12.49"> NS_IMETHODIMP</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-nsSmtpService::CreateSmtpServer(nsISmtpServer **aResult)</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+nsSmtpService::CreateServer(nsISmtpServer **aResult)</span>
<a href="#l12.52"></a><span id="l12.52"> {</span>
<a href="#l12.53"></a><span id="l12.53">     if (!aResult) return NS_ERROR_NULL_POINTER;</span>
<a href="#l12.54"></a><span id="l12.54"> </span>
<a href="#l12.55"></a><span id="l12.55">     loadSmtpServers();</span>
<a href="#l12.56"></a><span id="l12.56">     nsresult rv;</span>
<a href="#l12.57"></a><span id="l12.57">     int32_t i = 0;</span>
<a href="#l12.58"></a><span id="l12.58">     bool unique = false;</span>
<a href="#l12.59"></a><span id="l12.59"> </span>
<a href="#l12.60"></a><span id="l12.60" class="difflineat">@@ -627,17 +627,17 @@ nsSmtpService::GetServerByKey(const char</span>
<a href="#l12.61"></a><span id="l12.61">         return NS_OK;</span>
<a href="#l12.62"></a><span id="l12.62">     }</span>
<a href="#l12.63"></a><span id="l12.63"> </span>
<a href="#l12.64"></a><span id="l12.64">     // not found in array, I guess we load it</span>
<a href="#l12.65"></a><span id="l12.65">     return createKeyedServer(aKey, aResult);</span>
<a href="#l12.66"></a><span id="l12.66"> }</span>
<a href="#l12.67"></a><span id="l12.67"> </span>
<a href="#l12.68"></a><span id="l12.68"> NS_IMETHODIMP</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineminus">-nsSmtpService::DeleteSmtpServer(nsISmtpServer *aServer)</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineplus">+nsSmtpService::DeleteServer(nsISmtpServer *aServer)</span>
<a href="#l12.71"></a><span id="l12.71"> {</span>
<a href="#l12.72"></a><span id="l12.72">     if (!aServer) return NS_OK;</span>
<a href="#l12.73"></a><span id="l12.73"> </span>
<a href="#l12.74"></a><span id="l12.74">     int32_t idx = mSmtpServers.IndexOf(aServer);</span>
<a href="#l12.75"></a><span id="l12.75">     if (idx == -1)</span>
<a href="#l12.76"></a><span id="l12.76">       return NS_OK;</span>
<a href="#l12.77"></a><span id="l12.77"> </span>
<a href="#l12.78"></a><span id="l12.78">     nsCString serverKey;</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineat">@@ -720,17 +720,18 @@ nsSmtpService::FindServer(const char *aU</span>
<a href="#l12.80"></a><span id="l12.80">     // entry.server may be null, but that's ok.</span>
<a href="#l12.81"></a><span id="l12.81">     // just return null if no server is found</span>
<a href="#l12.82"></a><span id="l12.82">     NS_IF_ADDREF(*aResult = entry.server);</span>
<a href="#l12.83"></a><span id="l12.83">     </span>
<a href="#l12.84"></a><span id="l12.84">     return NS_OK;</span>
<a href="#l12.85"></a><span id="l12.85"> }</span>
<a href="#l12.86"></a><span id="l12.86"> </span>
<a href="#l12.87"></a><span id="l12.87"> NS_IMETHODIMP</span>
<a href="#l12.88"></a><span id="l12.88" class="difflineminus">-nsSmtpService::GetSmtpServerByIdentity(nsIMsgIdentity *aSenderIdentity, nsISmtpServer **aSmtpServer)</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineplus">+nsSmtpService::GetServerByIdentity(nsIMsgIdentity *aSenderIdentity,</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineplus">+                                   nsISmtpServer **aSmtpServer)</span>
<a href="#l12.91"></a><span id="l12.91"> {</span>
<a href="#l12.92"></a><span id="l12.92">   NS_ENSURE_ARG_POINTER(aSmtpServer);</span>
<a href="#l12.93"></a><span id="l12.93">   nsresult rv = NS_ERROR_FAILURE;</span>
<a href="#l12.94"></a><span id="l12.94"> </span>
<a href="#l12.95"></a><span id="l12.95">   // First try the identity's preferred server</span>
<a href="#l12.96"></a><span id="l12.96">   if (aSenderIdentity) </span>
<a href="#l12.97"></a><span id="l12.97">   {</span>
<a href="#l12.98"></a><span id="l12.98">       nsCString smtpServerKey;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/compose/test/unit/test_nsSmtpService1.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/compose/test/unit/test_nsSmtpService1.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -7,76 +7,76 @@ const SmtpServiceContractID = &quot;@mozilla.</span>
<a href="#l13.4"></a><span id="l13.4"> const nsISmtpService = Components.interfaces.nsISmtpService;</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6"> function run_test() {</span>
<a href="#l13.7"></a><span id="l13.7">   var smtpService = Components.classes[SmtpServiceContractID]</span>
<a href="#l13.8"></a><span id="l13.8">                               .getService(nsISmtpService);</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10">   // Test - no servers</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  var smtpServers = smtpService.smtpServers;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  var smtpServers = smtpService.servers;</span>
<a href="#l13.14"></a><span id="l13.14">   do_check_false(smtpServers.hasMoreElements());</span>
<a href="#l13.15"></a><span id="l13.15"> </span>
<a href="#l13.16"></a><span id="l13.16">   do_check_eq(smtpService.defaultServer, null);</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18">   // Test - add single server, and check</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-  var smtpServer = smtpService.createSmtpServer();</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+  var smtpServer = smtpService.createServer();</span>
<a href="#l13.22"></a><span id="l13.22"> </span>
<a href="#l13.23"></a><span id="l13.23">   smtpServer.hostname = &quot;localhost&quot;;</span>
<a href="#l13.24"></a><span id="l13.24">   smtpServer.description = &quot;test&quot;;</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26">   smtpService.defaultServer = smtpServer;</span>
<a href="#l13.27"></a><span id="l13.27"> </span>
<a href="#l13.28"></a><span id="l13.28">   // Test - Check to see there is only one element in the server list</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineminus">-  smtpServers = smtpService.smtpServers;</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+  smtpServers = smtpService.servers;</span>
<a href="#l13.31"></a><span id="l13.31">   do_check_true(smtpServers.hasMoreElements());</span>
<a href="#l13.32"></a><span id="l13.32">   do_check_eq(smtpServer, smtpServers.getNext());</span>
<a href="#l13.33"></a><span id="l13.33">   do_check_false(smtpServers.hasMoreElements());</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35">   // Test - Find the server in different ways</span>
<a href="#l13.36"></a><span id="l13.36">   do_check_eq(smtpServer, smtpService.findServer(&quot;&quot;, &quot;localhost&quot;));</span>
<a href="#l13.37"></a><span id="l13.37">   do_check_eq(smtpServer, smtpService.getServerByKey(smtpServer.key));</span>
<a href="#l13.38"></a><span id="l13.38"> </span>
<a href="#l13.39"></a><span id="l13.39">   // Test - Try finding one that doesn't exist.</span>
<a href="#l13.40"></a><span id="l13.40">   do_check_eq(null, smtpService.findServer(&quot;&quot;, &quot;test&quot;));</span>
<a href="#l13.41"></a><span id="l13.41"> </span>
<a href="#l13.42"></a><span id="l13.42">   // Test - Check default server is still ok</span>
<a href="#l13.43"></a><span id="l13.43">   do_check_eq(smtpServer, smtpService.defaultServer);</span>
<a href="#l13.44"></a><span id="l13.44"> </span>
<a href="#l13.45"></a><span id="l13.45">   // Test - Delete the only server</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineminus">-  smtpService.deleteSmtpServer(smtpServer);</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineplus">+  smtpService.deleteServer(smtpServer);</span>
<a href="#l13.48"></a><span id="l13.48"> </span>
<a href="#l13.49"></a><span id="l13.49" class="difflineminus">-  smtpServers = smtpService.smtpServers;</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineplus">+  smtpServers = smtpService.servers;</span>
<a href="#l13.51"></a><span id="l13.51">   do_check_false(smtpServers.hasMoreElements());</span>
<a href="#l13.52"></a><span id="l13.52">  </span>
<a href="#l13.53"></a><span id="l13.53">   //    do_check_eq(null, smtpService.defaultServer);</span>
<a href="#l13.54"></a><span id="l13.54"> </span>
<a href="#l13.55"></a><span id="l13.55">   // Test - add multiple servers</span>
<a href="#l13.56"></a><span id="l13.56"> </span>
<a href="#l13.57"></a><span id="l13.57">   var smtpServerArray = new Array(3);</span>
<a href="#l13.58"></a><span id="l13.58">   var i;</span>
<a href="#l13.59"></a><span id="l13.59"> </span>
<a href="#l13.60"></a><span id="l13.60">   for (i = 0; i &lt; 3; ++i)</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineminus">-    smtpServerArray[i] = smtpService.createSmtpServer();</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineplus">+    smtpServerArray[i] = smtpService.createServer();</span>
<a href="#l13.63"></a><span id="l13.63"> </span>
<a href="#l13.64"></a><span id="l13.64">   smtpServerArray[0].hostname = &quot;localhost&quot;;</span>
<a href="#l13.65"></a><span id="l13.65">   smtpServerArray[0].description = &quot;test&quot;;</span>
<a href="#l13.66"></a><span id="l13.66">   smtpServerArray[0].username = &quot;user&quot;;</span>
<a href="#l13.67"></a><span id="l13.67"> </span>
<a href="#l13.68"></a><span id="l13.68">   smtpServerArray[1].hostname = &quot;localhost&quot;;</span>
<a href="#l13.69"></a><span id="l13.69">   smtpServerArray[1].description = &quot;test1&quot;;</span>
<a href="#l13.70"></a><span id="l13.70">   smtpServerArray[1].username = &quot;user1&quot;;</span>
<a href="#l13.71"></a><span id="l13.71"> </span>
<a href="#l13.72"></a><span id="l13.72">   smtpServerArray[2].hostname = &quot;localhost1&quot;;</span>
<a href="#l13.73"></a><span id="l13.73">   smtpServerArray[2].description = &quot;test2&quot;;</span>
<a href="#l13.74"></a><span id="l13.74">   smtpServerArray[2].username = &quot;&quot;;</span>
<a href="#l13.75"></a><span id="l13.75"> </span>
<a href="#l13.76"></a><span id="l13.76">   // Now check them</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineminus">-  smtpServers = smtpService.smtpServers;</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineplus">+  smtpServers = smtpService.servers;</span>
<a href="#l13.79"></a><span id="l13.79"> </span>
<a href="#l13.80"></a><span id="l13.80">   var found = [false, false, false];</span>
<a href="#l13.81"></a><span id="l13.81"> </span>
<a href="#l13.82"></a><span id="l13.82">   while (smtpServers.hasMoreElements()) {</span>
<a href="#l13.83"></a><span id="l13.83">     var smtpServer = smtpServers.getNext();</span>
<a href="#l13.84"></a><span id="l13.84"> </span>
<a href="#l13.85"></a><span id="l13.85">     for (i = 0; i &lt; 3; ++i)</span>
<a href="#l13.86"></a><span id="l13.86">       if (smtpServer == smtpServerArray[i])</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineat">@@ -98,13 +98,13 @@ function run_test() {</span>
<a href="#l13.88"></a><span id="l13.88"> </span>
<a href="#l13.89"></a><span id="l13.89">   for (i = 0; i &lt; 3; ++i)</span>
<a href="#l13.90"></a><span id="l13.90">     do_check_eq(smtpServerArray[i],</span>
<a href="#l13.91"></a><span id="l13.91">                 smtpService.getServerByKey(smtpServerArray[i].key));</span>
<a href="#l13.92"></a><span id="l13.92"> </span>
<a href="#l13.93"></a><span id="l13.93">   // Test - Delete the servers</span>
<a href="#l13.94"></a><span id="l13.94"> </span>
<a href="#l13.95"></a><span id="l13.95">   for (i = 0; i &lt; 3; ++i)</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineminus">-    smtpService.deleteSmtpServer(smtpServerArray[i]);</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineplus">+    smtpService.deleteServer(smtpServerArray[i]);</span>
<a href="#l13.98"></a><span id="l13.98"> </span>
<a href="#l13.99"></a><span id="l13.99" class="difflineminus">-  smtpServers = smtpService.smtpServers;</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineplus">+  smtpServers = smtpService.servers;</span>
<a href="#l13.101"></a><span id="l13.101">   do_check_false(smtpServers.hasMoreElements());</span>
<a href="#l13.102"></a><span id="l13.102"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1107,17 +1107,17 @@ NS_IMETHODIMP nsMsgMdnGenerator::OnStopR</span>
<a href="#l14.4"></a><span id="l14.4">     }    </span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">     nsCOMPtr&lt;nsISmtpService&gt; smtpService(do_GetService(NS_SMTPSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l14.7"></a><span id="l14.7">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l14.8"></a><span id="l14.8"> </span>
<a href="#l14.9"></a><span id="l14.9">     // Get the smtp hostname and format the string.</span>
<a href="#l14.10"></a><span id="l14.10">     nsCString smtpHostName;</span>
<a href="#l14.11"></a><span id="l14.11">     nsCOMPtr&lt;nsISmtpServer&gt; smtpServer;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    rv = smtpService-&gt;GetSmtpServerByIdentity(m_identity, getter_AddRefs(smtpServer));</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    rv = smtpService-&gt;GetServerByIdentity(m_identity, getter_AddRefs(smtpServer));</span>
<a href="#l14.14"></a><span id="l14.14">     if (NS_SUCCEEDED(rv)) </span>
<a href="#l14.15"></a><span id="l14.15">       smtpServer-&gt;GetHostname(smtpHostName);</span>
<a href="#l14.16"></a><span id="l14.16">      </span>
<a href="#l14.17"></a><span id="l14.17">     nsAutoString hostStr;</span>
<a href="#l14.18"></a><span id="l14.18">     CopyASCIItoUTF16(smtpHostName, hostStr);</span>
<a href="#l14.19"></a><span id="l14.19">     const PRUnichar *params[] = { hostStr.get() };</span>
<a href="#l14.20"></a><span id="l14.20"> </span>
<a href="#l14.21"></a><span id="l14.21">     nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraMac.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraMac.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -895,17 +895,17 @@ void nsEudoraMac::SetSmtpServer(nsIMsgAc</span>
<a href="#l15.4"></a><span id="l15.4">     rv = smtpService-&gt;FindServer(pUser, pServer, getter_AddRefs(foundServer));</span>
<a href="#l15.5"></a><span id="l15.5">     if (NS_SUCCEEDED(rv) &amp;&amp; foundServer)</span>
<a href="#l15.6"></a><span id="l15.6">     {</span>
<a href="#l15.7"></a><span id="l15.7">       IMPORT_LOG1(&quot;SMTP server already exists: %s\n&quot;, pServer);</span>
<a href="#l15.8"></a><span id="l15.8">       return;</span>
<a href="#l15.9"></a><span id="l15.9">     }</span>
<a href="#l15.10"></a><span id="l15.10">     nsCOMPtr&lt;nsISmtpServer&gt;    smtpServer;</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    rv = smtpService-&gt;CreateSmtpServer(getter_AddRefs(smtpServer));</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+    rv = smtpService-&gt;CreateServer(getter_AddRefs(smtpServer));</span>
<a href="#l15.14"></a><span id="l15.14">     if (NS_SUCCEEDED(rv) &amp;&amp; smtpServer)</span>
<a href="#l15.15"></a><span id="l15.15">     {</span>
<a href="#l15.16"></a><span id="l15.16">       smtpServer-&gt;SetHostname(nsDependentCString(pServer));</span>
<a href="#l15.17"></a><span id="l15.17">       if (pUser)</span>
<a href="#l15.18"></a><span id="l15.18">         smtpServer-&gt;SetUsername(nsDependentCString(pUser));</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20">       IMPORT_LOG1(&quot;Created new SMTP server: %s\n&quot;, pServer);</span>
<a href="#l15.21"></a><span id="l15.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/import/eudora/src/nsEudoraWin32.cpp</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/import/eudora/src/nsEudoraWin32.cpp</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -964,17 +964,17 @@ void nsEudoraWin32::SetSmtpServer(nsIMsg</span>
<a href="#l16.4"></a><span id="l16.4">     rv = smtpService-&gt;FindServer(pUser, pServer, getter_AddRefs(foundServer));</span>
<a href="#l16.5"></a><span id="l16.5">     if (NS_SUCCEEDED(rv) &amp;&amp; foundServer)</span>
<a href="#l16.6"></a><span id="l16.6">     {</span>
<a href="#l16.7"></a><span id="l16.7">       IMPORT_LOG1(&quot;SMTP server already exists: %s\n&quot;, pServer);</span>
<a href="#l16.8"></a><span id="l16.8">       return;</span>
<a href="#l16.9"></a><span id="l16.9">     }</span>
<a href="#l16.10"></a><span id="l16.10">     nsCOMPtr&lt;nsISmtpServer&gt;    smtpServer;</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    rv = smtpService-&gt;CreateSmtpServer(getter_AddRefs(smtpServer));</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    rv = smtpService-&gt;CreateServer(getter_AddRefs(smtpServer));</span>
<a href="#l16.14"></a><span id="l16.14">     if (NS_SUCCEEDED(rv) &amp;&amp; smtpServer)</span>
<a href="#l16.15"></a><span id="l16.15">     {</span>
<a href="#l16.16"></a><span id="l16.16">       smtpServer-&gt;SetHostname(nsDependentCString(pServer));</span>
<a href="#l16.17"></a><span id="l16.17">       if (pUser)</span>
<a href="#l16.18"></a><span id="l16.18">         smtpServer-&gt;SetUsername(nsDependentCString(pUser));</span>
<a href="#l16.19"></a><span id="l16.19"> </span>
<a href="#l16.20"></a><span id="l16.20">       IMPORT_LOG1(&quot;Created new SMTP server: %s\n&quot;, pServer);</span>
<a href="#l16.21"></a><span id="l16.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/import/oexpress/nsOESettings.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/import/oexpress/nsOESettings.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -844,17 +844,17 @@ void OESettings::SetSmtpServer(const nsS</span>
<a href="#l17.4"></a><span id="l17.4">       foundServer-&gt;GetKey(getter_Copies(smtpServerKey));</span>
<a href="#l17.5"></a><span id="l17.5">       aId-&gt;SetSmtpServerKey(smtpServerKey);</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7">       IMPORT_LOG1(&quot;SMTP server already exists: %s\n&quot;,</span>
<a href="#l17.8"></a><span id="l17.8">                   nativeSmtpServer.get());</span>
<a href="#l17.9"></a><span id="l17.9">     }</span>
<a href="#l17.10"></a><span id="l17.10">     else {</span>
<a href="#l17.11"></a><span id="l17.11">       nsCOMPtr&lt;nsISmtpServer&gt; smtpServer;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      rv = smtpService-&gt;CreateSmtpServer(getter_AddRefs(smtpServer));</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      rv = smtpService-&gt;CreateServer(getter_AddRefs(smtpServer));</span>
<a href="#l17.14"></a><span id="l17.14">       if (NS_SUCCEEDED(rv) &amp;&amp; smtpServer) {</span>
<a href="#l17.15"></a><span id="l17.15">         uint32_t port = 0;</span>
<a href="#l17.16"></a><span id="l17.16">         rv = aKey-&gt;ReadIntValue(NS_LITERAL_STRING(&quot;SMTP Port&quot;),</span>
<a href="#l17.17"></a><span id="l17.17">                                 &amp;port);</span>
<a href="#l17.18"></a><span id="l17.18">         if (NS_SUCCEEDED(rv) &amp;&amp; port)</span>
<a href="#l17.19"></a><span id="l17.19">           smtpServer-&gt;SetPort(static_cast&lt;int32_t&gt;(port));</span>
<a href="#l17.20"></a><span id="l17.20"> </span>
<a href="#l17.21"></a><span id="l17.21">         int32_t socketType = nsMsgSocketType::plain;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookSettings.cpp</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookSettings.cpp</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -545,17 +545,17 @@ nsresult OutlookSettings::SetSmtpServer(</span>
<a href="#l18.4"></a><span id="l18.4">     if (aId)</span>
<a href="#l18.5"></a><span id="l18.5">       SetSmtpServerKey(aId, foundServer);</span>
<a href="#l18.6"></a><span id="l18.6">     IMPORT_LOG1(&quot;SMTP server already exists: %s\n&quot;,</span>
<a href="#l18.7"></a><span id="l18.7">                 nativeServerName.get());</span>
<a href="#l18.8"></a><span id="l18.8">     return rv;</span>
<a href="#l18.9"></a><span id="l18.9">   }</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11">   nsCOMPtr&lt;nsISmtpServer&gt; smtpServer;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  rv = smtpService-&gt;CreateSmtpServer(getter_AddRefs(smtpServer));</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  rv = smtpService-&gt;CreateServer(getter_AddRefs(smtpServer));</span>
<a href="#l18.14"></a><span id="l18.14">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">   smtpServer-&gt;SetHostname(nativeServerName);</span>
<a href="#l18.17"></a><span id="l18.17">   if (!aUser.IsEmpty())</span>
<a href="#l18.18"></a><span id="l18.18">     smtpServer-&gt;SetUsername(nativeUserName);</span>
<a href="#l18.19"></a><span id="l18.19"> </span>
<a href="#l18.20"></a><span id="l18.20">   if (aId)</span>
<a href="#l18.21"></a><span id="l18.21">     SetSmtpServerKey(aId, smtpServer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/import/test/unit/test_oe_settings.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/import/test/unit/test_oe_settings.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -182,21 +182,21 @@ let expectedNntpAccount = {</span>
<a href="#l19.4"></a><span id="l19.4">     fullName: 'NNTP Display Name',</span>
<a href="#l19.5"></a><span id="l19.5">     email: 'nntpuser@host.invalid',</span>
<a href="#l19.6"></a><span id="l19.6">     replyTo: 'nntpuser@host.invalid',</span>
<a href="#l19.7"></a><span id="l19.7">     organization: 'NNTP Organization Name'</span>
<a href="#l19.8"></a><span id="l19.8">   }</span>
<a href="#l19.9"></a><span id="l19.9"> };</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11"> function teardown() {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  let smtpServers = MailServices.smtp.smtpServers;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  let smtpServers = MailServices.smtp.servers;</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">   while (smtpServers.hasMoreElements()) {</span>
<a href="#l19.16"></a><span id="l19.16">     let server = smtpServers.getNext().QueryInterface(Ci.nsISmtpServer);</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-    MailServices.smtp.deleteSmtpServer(server);</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+    MailServices.smtp.deleteServer(server);</span>
<a href="#l19.19"></a><span id="l19.19">   }</span>
<a href="#l19.20"></a><span id="l19.20"> </span>
<a href="#l19.21"></a><span id="l19.21">   teardown_mock_registry();</span>
<a href="#l19.22"></a><span id="l19.22"> }</span>
<a href="#l19.23"></a><span id="l19.23"> </span>
<a href="#l19.24"></a><span id="l19.24"> function _test(registry, expectedAccount) {</span>
<a href="#l19.25"></a><span id="l19.25">   try {</span>
<a href="#l19.26"></a><span id="l19.26">     setup_mock_registry(registry);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/import/test/unit/test_outlook_settings.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/import/test/unit/test_outlook_settings.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -93,21 +93,21 @@ let expectedImapAccount = {</span>
<a href="#l20.4"></a><span id="l20.4">   },</span>
<a href="#l20.5"></a><span id="l20.5">   smtpServer: {</span>
<a href="#l20.6"></a><span id="l20.6">     hostname: 'smtp.invalid.host',</span>
<a href="#l20.7"></a><span id="l20.7">     username: 'smtpuser'</span>
<a href="#l20.8"></a><span id="l20.8">   }</span>
<a href="#l20.9"></a><span id="l20.9"> };</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11"> function teardown() {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  let smtpServers = MailServices.smtp.smtpServers;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  let smtpServers = MailServices.smtp.servers;</span>
<a href="#l20.14"></a><span id="l20.14"> </span>
<a href="#l20.15"></a><span id="l20.15">   while (smtpServers.hasMoreElements()) {</span>
<a href="#l20.16"></a><span id="l20.16">     let server = smtpServers.getNext().QueryInterface(Ci.nsISmtpServer);</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-    MailServices.smtp.deleteSmtpServer(server);</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+    MailServices.smtp.deleteServer(server);</span>
<a href="#l20.19"></a><span id="l20.19">   }</span>
<a href="#l20.20"></a><span id="l20.20"> </span>
<a href="#l20.21"></a><span id="l20.21">   teardown_mock_registry();</span>
<a href="#l20.22"></a><span id="l20.22"> }</span>
<a href="#l20.23"></a><span id="l20.23"> </span>
<a href="#l20.24"></a><span id="l20.24"> function _test(registry, expectedAccount) {</span>
<a href="#l20.25"></a><span id="l20.25">   try {</span>
<a href="#l20.26"></a><span id="l20.26">     setup_mock_registry(registry);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/import/test/unit/test_winmail.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/import/test/unit/test_winmail.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -151,21 +151,21 @@ function _test(registry, expectedAccount</span>
<a href="#l21.4"></a><span id="l21.4">   } catch(e) {</span>
<a href="#l21.5"></a><span id="l21.5">     teardown();</span>
<a href="#l21.6"></a><span id="l21.6">     do_throw(e);</span>
<a href="#l21.7"></a><span id="l21.7">   }</span>
<a href="#l21.8"></a><span id="l21.8">   teardown();</span>
<a href="#l21.9"></a><span id="l21.9"> }</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11"> function teardown() {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  let smtpServers = MailServices.smtp.smtpServers;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  let smtpServers = MailServices.smtp.servers;</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">   while (smtpServers.hasMoreElements()) {</span>
<a href="#l21.16"></a><span id="l21.16">     let server = smtpServers.getNext().QueryInterface(Ci.nsISmtpServer);</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-    MailServices.smtp.deleteSmtpServer(server);</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineplus">+    MailServices.smtp.deleteServer(server);</span>
<a href="#l21.19"></a><span id="l21.19">   }</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21">   teardown_mock_registry();</span>
<a href="#l21.22"></a><span id="l21.22"> }</span>
<a href="#l21.23"></a><span id="l21.23"> </span>
<a href="#l21.24"></a><span id="l21.24"> function run_test() {</span>
<a href="#l21.25"></a><span id="l21.25">   let root = do_get_file(&quot;resources/WindowsLiveMail&quot;);</span>
<a href="#l21.26"></a><span id="l21.26">   _test(new WinLiveMailRegistry(root.path), expectedAccounts);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/import/winlivemail/nsWMSettings.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/import/winlivemail/nsWMSettings.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -711,17 +711,17 @@ void WMSettings::SetSmtpServer(nsIDOMDoc</span>
<a href="#l22.4"></a><span id="l22.4">       // set our account keyed to this smptserver key</span>
<a href="#l22.5"></a><span id="l22.5">       extgServer-&gt;GetKey(getter_Copies(smtpServerKey));</span>
<a href="#l22.6"></a><span id="l22.6">       id-&gt;SetSmtpServerKey(smtpServerKey);</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8">       IMPORT_LOG1(&quot;SMTP server already exists: %S\n&quot;, smtpName);</span>
<a href="#l22.9"></a><span id="l22.9">     }</span>
<a href="#l22.10"></a><span id="l22.10">     else {</span>
<a href="#l22.11"></a><span id="l22.11">       nsCOMPtr&lt;nsISmtpServer&gt; smtpServer;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-      rv = smtpService-&gt;CreateSmtpServer(getter_AddRefs(smtpServer));</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+      rv = smtpService-&gt;CreateServer(getter_AddRefs(smtpServer));</span>
<a href="#l22.14"></a><span id="l22.14">       if (NS_SUCCEEDED(rv) &amp;&amp; smtpServer) {</span>
<a href="#l22.15"></a><span id="l22.15">         if (NS_SUCCEEDED(nsWMUtils::GetValueForTag(xmlDoc,</span>
<a href="#l22.16"></a><span id="l22.16">                                                    &quot;SMTP_Port&quot;,</span>
<a href="#l22.17"></a><span id="l22.17">                                                    value))) {</span>
<a href="#l22.18"></a><span id="l22.18">           smtpServer-&gt;SetPort(value.ToInteger(&amp;errorCode,16));</span>
<a href="#l22.19"></a><span id="l22.19">         }</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21">         if (NS_SUCCEEDED(nsWMUtils::GetValueForTag(xmlDoc,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/test/resources/mailTestUtils.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/test/resources/mailTestUtils.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -92,17 +92,17 @@ function create_incoming_server(aType, a</span>
<a href="#l23.4"></a><span id="l23.4">  * Create an outgoing nsISmtpServer with the given parameters.</span>
<a href="#l23.5"></a><span id="l23.5">  *</span>
<a href="#l23.6"></a><span id="l23.6">  * @param aPort The port the server is on.</span>
<a href="#l23.7"></a><span id="l23.7">  * @param aUsername The username for the server</span>
<a href="#l23.8"></a><span id="l23.8">  * @param aPassword The password for the server</span>
<a href="#l23.9"></a><span id="l23.9">  * @return The newly-created nsISmtpServer.</span>
<a href="#l23.10"></a><span id="l23.10">  */</span>
<a href="#l23.11"></a><span id="l23.11"> function create_outgoing_server(aPort, aUsername, aPassword) {</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  let server = MailServices.smtp.createSmtpServer();</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  let server = MailServices.smtp.createServer();</span>
<a href="#l23.14"></a><span id="l23.14">   server.hostname = &quot;localhost&quot;;</span>
<a href="#l23.15"></a><span id="l23.15">   server.port = aPort;</span>
<a href="#l23.16"></a><span id="l23.16">   server.authMethod = Ci.nsMsgAuthMethod.none;</span>
<a href="#l23.17"></a><span id="l23.17">   return server;</span>
<a href="#l23.18"></a><span id="l23.18"> }</span>
<a href="#l23.19"></a><span id="l23.19"> </span>
<a href="#l23.20"></a><span id="l23.20"> /**</span>
<a href="#l23.21"></a><span id="l23.21">  * Associate the given outgoing server with the given incoming server's account.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

