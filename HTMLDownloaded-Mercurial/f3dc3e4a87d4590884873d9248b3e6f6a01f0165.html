<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20046:f3dc3e4a87d4590884873d9248b3e6f6a01f0165</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ f3dc3e4a87d4590884873d9248b3e6f6a01f0165" />
<meta property="og:url" content="/comm-central/rev/f3dc3e4a87d4590884873d9248b3e6f6a01f0165" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - enable space-before-function-paren rule. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / f3dc3e4a87d4590884873d9248b3e6f6a01f0165 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">shortlog</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">files</a> |
changeset |
<a href="/comm-central/raw-rev/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">raw</a>  | <a href="/comm-central/archive/f3dc3e4a87d4590884873d9248b3e6f6a01f0165.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable space-before-function-paren rule. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 11:19:21 +0200</td></tr>

<tr>
 <td>changeset 20046</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">f3dc3e4a87d4590884873d9248b3e6f6a01f0165</a></td>
</tr>



<tr>
<td>parent 20045</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">d67d30c8c222ad68b1f2f97e770ac6b1f75a1770</a>
</td>
</tr>

<tr>
<td>child 20047</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/626c889fd0927fd07df3bfe982a09c19ea7a8e7e">626c889fd0927fd07df3bfe982a09c19ea7a8e7e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=f3dc3e4a87d4590884873d9248b3e6f6a01f0165">12297</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Fri, 16 Sep 2016 20:17:21 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f3dc3e4a87d4 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&newProject=comm-central&newRevision=a7312b12f00f6b39084b768a6252669ed641d0b4&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&newProject=comm-central&newRevision=a7312b12f00f6b39084b768a6252669ed641d0b4&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&newProject=comm-central&newRevision=a7312b12f00f6b39084b768a6252669ed641d0b4&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable space-before-function-paren rule. r=MakeMyDay

MozReview-Commit-ID: EY2mfQpHGch</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/backend/icaljs/calDateTime.js">calendar/base/backend/icaljs/calDateTime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/backend/icaljs/calDateTime.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/backend/icaljs/calDateTime.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/backend/icaljs/calDateTime.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/backend/icaljs/calDateTime.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/backend/icaljs/calDateTime.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-chrome-startup.js">calendar/base/content/calendar-chrome-startup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-chrome-startup.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-chrome-startup.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-chrome-startup.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-chrome-startup.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-chrome-startup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-common-sets.js">calendar/base/content/calendar-common-sets.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-common-sets.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-common-sets.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-common-sets.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-common-sets.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-common-sets.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-invitations-manager.js">calendar/base/content/calendar-invitations-manager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-invitations-manager.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-invitations-manager.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-invitations-manager.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-invitations-manager.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-invitations-manager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-management.js">calendar/base/content/calendar-management.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-management.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-management.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-management.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-management.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-management.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-views.js">calendar/base/content/calendar-views.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-views.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-views.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-views.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-views.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/calendar-views.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/preferences/categories.js">calendar/base/content/preferences/categories.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/preferences/categories.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/preferences/categories.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/preferences/categories.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/preferences/categories.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/content/preferences/categories.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calItipUtils.jsm">calendar/base/modules/calItipUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calItipUtils.jsm">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calItipUtils.jsm">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calItipUtils.jsm">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calItipUtils.jsm">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calItipUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calUtils.jsm">calendar/base/modules/calUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calUtils.jsm">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calUtils.jsm">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calUtils.jsm">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calUtils.jsm">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/modules/calUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttachment.js">calendar/base/src/calAttachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttachment.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttachment.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttachment.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttachment.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttachment.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttendee.js">calendar/base/src/calAttendee.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttendee.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttendee.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttendee.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttendee.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calAttendee.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calCachedCalendar.js">calendar/base/src/calCachedCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calCachedCalendar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calCachedCalendar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calCachedCalendar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calCachedCalendar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calCachedCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calDefaultACLManager.js">calendar/base/src/calDefaultACLManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calDefaultACLManager.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calDefaultACLManager.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calDefaultACLManager.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calDefaultACLManager.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calDefaultACLManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calEvent.js">calendar/base/src/calEvent.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calEvent.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calEvent.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calEvent.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calEvent.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calEvent.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calItemBase.js">calendar/base/src/calItemBase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calItemBase.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calItemBase.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calItemBase.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calItemBase.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calItemBase.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRecurrenceInfo.js">calendar/base/src/calRecurrenceInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRecurrenceInfo.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRecurrenceInfo.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRecurrenceInfo.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRecurrenceInfo.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRecurrenceInfo.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRelation.js">calendar/base/src/calRelation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRelation.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRelation.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRelation.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRelation.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calRelation.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calTodo.js">calendar/base/src/calTodo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calTodo.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calTodo.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calTodo.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calTodo.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/base/src/calTodo.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/itip/calItipEmailTransport.js">calendar/itip/calItipEmailTransport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/itip/calItipEmailTransport.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/itip/calItipEmailTransport.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/itip/calItipEmailTransport.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/itip/calItipEmailTransport.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/itip/calItipEmailTransport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/components/calItipProtocolHandler.js">calendar/lightning/components/calItipProtocolHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/components/calItipProtocolHandler.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/components/calItipProtocolHandler.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/components/calItipProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/components/calItipProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/components/calItipProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/html-item-editing/react-code.js">calendar/lightning/content/html-item-editing/react-code.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/html-item-editing/react-code.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/html-item-editing/react-code.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/html-item-editing/react-code.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/html-item-editing/react-code.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/html-item-editing/react-code.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/imip-bar.js">calendar/lightning/content/imip-bar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/imip-bar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/imip-bar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/imip-bar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/imip-bar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/imip-bar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/lightning-item-panel.js">calendar/lightning/content/lightning-item-panel.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/lightning-item-panel.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/lightning-item-panel.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/lightning-item-panel.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/lightning-item-panel.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/lightning-item-panel.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/modules/ltnInvitationUtils.jsm">calendar/lightning/modules/ltnInvitationUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/modules/ltnInvitationUtils.jsm">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/modules/ltnInvitationUtils.jsm">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/modules/ltnInvitationUtils.jsm">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/modules/ltnInvitationUtils.jsm">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/lightning/modules/ltnInvitationUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/composite/calCompositeCalendar.js">calendar/providers/composite/calCompositeCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/composite/calCompositeCalendar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/composite/calCompositeCalendar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/composite/calCompositeCalendar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/composite/calCompositeCalendar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/composite/calCompositeCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/memory/calMemoryCalendar.js">calendar/providers/memory/calMemoryCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/memory/calMemoryCalendar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/memory/calMemoryCalendar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/memory/calMemoryCalendar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/memory/calMemoryCalendar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/memory/calMemoryCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialog.js">calendar/test/mozmill/eventDialog/testEventDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialog.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialog.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialog.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialog.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testUTF8.js">calendar/test/mozmill/eventDialog/testUTF8.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testUTF8.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testUTF8.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testUTF8.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testUTF8.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/eventDialog/testUTF8.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">calendar/test/mozmill/recurrence/testAnnualRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testAnnualRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testDailyRecurrence.js">calendar/test/mozmill/recurrence/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testDailyRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testDailyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testBasicFunctionality.js">calendar/test/mozmill/testBasicFunctionality.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testBasicFunctionality.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testBasicFunctionality.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testBasicFunctionality.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testBasicFunctionality.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testBasicFunctionality.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testLocalICS.js">calendar/test/mozmill/testLocalICS.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testLocalICS.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testLocalICS.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testLocalICS.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testLocalICS.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testLocalICS.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testTodayPane.js">calendar/test/mozmill/testTodayPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testTodayPane.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testTodayPane.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testTodayPane.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testTodayPane.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/testTodayPane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test1.js">calendar/test/mozmill/timezoneTests/test1.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test1.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test1.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test1.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test1.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test1.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test10.js">calendar/test/mozmill/timezoneTests/test10.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test10.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test10.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test10.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test10.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test10.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test2.js">calendar/test/mozmill/timezoneTests/test2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test2.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test2.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test2.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test2.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test2.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test3.js">calendar/test/mozmill/timezoneTests/test3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test3.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test3.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test3.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test3.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test3.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test4.js">calendar/test/mozmill/timezoneTests/test4.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test4.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test4.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test4.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test4.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test4.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test5.js">calendar/test/mozmill/timezoneTests/test5.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test5.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test5.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test5.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test5.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test5.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test6.js">calendar/test/mozmill/timezoneTests/test6.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test6.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test6.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test6.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test6.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test6.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test7.js">calendar/test/mozmill/timezoneTests/test7.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test7.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test7.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test7.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test7.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test7.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test8.js">calendar/test/mozmill/timezoneTests/test8.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test8.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test8.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test8.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test8.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test8.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test9.js">calendar/test/mozmill/timezoneTests/test9.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test9.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test9.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test9.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test9.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/timezoneTests/test9.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testDayView.js">calendar/test/mozmill/views/testDayView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testDayView.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testDayView.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testDayView.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testDayView.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testDayView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMonthView.js">calendar/test/mozmill/views/testMonthView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMonthView.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMonthView.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMonthView.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMonthView.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMonthView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMultiweekView.js">calendar/test/mozmill/views/testMultiweekView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMultiweekView.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMultiweekView.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMultiweekView.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMultiweekView.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testMultiweekView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testTaskView.js">calendar/test/mozmill/views/testTaskView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testTaskView.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testTaskView.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testTaskView.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testTaskView.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testTaskView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testWeekView.js">calendar/test/mozmill/views/testWeekView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testWeekView.js">file</a> |
<a href="/comm-central/annotate/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testWeekView.js">annotate</a> |
<a href="/comm-central/diff/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testWeekView.js">diff</a> |
<a href="/comm-central/comparison/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testWeekView.js">comparison</a> |
<a href="/comm-central/log/f3dc3e4a87d4590884873d9248b3e6f6a01f0165/calendar/test/mozmill/views/testWeekView.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -167,16 +167,20 @@</span>
<a href="#l1.4"></a><span id="l1.4">     &quot;no-return-assign&quot;: 2,</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">     // Disallow padding within blocks.</span>
<a href="#l1.7"></a><span id="l1.7">     &quot;padded-blocks&quot;: [2, &quot;never&quot;],</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     // Disallow spaces inside parentheses.</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;space-in-parens&quot;: [2, &quot;never&quot;],</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Require space after keyword for anonymous functions, but disallow space</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    // after name of named functions.</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    &quot;space-before-function-paren&quot;: [2, {&quot;anonymous&quot;: &quot;never&quot;, &quot;named&quot;: &quot;never&quot;}],</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16">     // Will enable these rules later</span>
<a href="#l1.17"></a><span id="l1.17">     &quot;block-spacing&quot;: 0,</span>
<a href="#l1.18"></a><span id="l1.18">     &quot;no-lonely-if&quot;: 0,</span>
<a href="#l1.19"></a><span id="l1.19">     &quot;space-before-blocks&quot;: 0,</span>
<a href="#l1.20"></a><span id="l1.20">     &quot;computed-property-spacing&quot;: 0,</span>
<a href="#l1.21"></a><span id="l1.21">     &quot;consistent-return&quot;: 0,</span>
<a href="#l1.22"></a><span id="l1.22">     &quot;no-redeclare&quot;: 0,</span>
<a href="#l1.23"></a><span id="l1.23">     &quot;no-empty&quot;: 0,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calDateTime.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calDateTime.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -21,17 +21,17 @@ calDateTime.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l2.5"></a><span id="l2.5">         contractID: &quot;@mozilla.org/calendar/datetime;1&quot;,</span>
<a href="#l2.6"></a><span id="l2.6">         classDescription: &quot;Describes a Date/Time Object&quot;,</span>
<a href="#l2.7"></a><span id="l2.7">         classID: calDateTimeClassID,</span>
<a href="#l2.8"></a><span id="l2.8">         interfaces: calDateTimeInterfaces</span>
<a href="#l2.9"></a><span id="l2.9">     }),</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11">     isMutable: true,</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    makeImmutable: function () { this.isMutable = false; },</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    makeImmutable: function() { this.isMutable = false; },</span>
<a href="#l2.14"></a><span id="l2.14">     clone: function() { return new calDateTime(this.innerObject.clone()); },</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">     isValid: true,</span>
<a href="#l2.17"></a><span id="l2.17">     innerObject: null,</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">     get nativeTime() { return this.innerObject.toUnixTime() * UNIX_TIME_TO_PRTIME; },</span>
<a href="#l2.20"></a><span id="l2.20">     set nativeTime(val) { this.innerObject.fromUnixTime(val / UNIX_TIME_TO_PRTIME); },</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -56,17 +56,17 @@ calDateTime.prototype = {</span>
<a href="#l2.23"></a><span id="l2.23">     get timezone() { return new calICALJSTimezone(this.innerObject.zone); },</span>
<a href="#l2.24"></a><span id="l2.24">     set timezone(val) {</span>
<a href="#l2.25"></a><span id="l2.25">         unwrapSetter(ICAL.Timezone, val, function(val) {</span>
<a href="#l2.26"></a><span id="l2.26">             this.innerObject.zone = val;</span>
<a href="#l2.27"></a><span id="l2.27">             return val;</span>
<a href="#l2.28"></a><span id="l2.28">         }, this);</span>
<a href="#l2.29"></a><span id="l2.29">     },</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-    resetTo: function (yr, mo, dy, hr, mi, sc, tz) {</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+    resetTo: function(yr, mo, dy, hr, mi, sc, tz) {</span>
<a href="#l2.33"></a><span id="l2.33">         this.innerObject.fromData({</span>
<a href="#l2.34"></a><span id="l2.34">             year: yr, month: mo + 1, day: dy,</span>
<a href="#l2.35"></a><span id="l2.35">             hour: hr, minute: mi, second: sc,</span>
<a href="#l2.36"></a><span id="l2.36">         });</span>
<a href="#l2.37"></a><span id="l2.37">         this.timezone = tz;</span>
<a href="#l2.38"></a><span id="l2.38">     },</span>
<a href="#l2.39"></a><span id="l2.39"> </span>
<a href="#l2.40"></a><span id="l2.40">     reset: function() { this.innerObject.reset(); },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -117,17 +117,17 @@ var calendarWindowPrefs = {</span>
<a href="#l3.4"></a><span id="l3.4">         Services.ww.unregisterNotification(this);</span>
<a href="#l3.5"></a><span id="l3.5">     },</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">     /**</span>
<a href="#l3.8"></a><span id="l3.8">      * Observer function called when a pref has changed</span>
<a href="#l3.9"></a><span id="l3.9">      *</span>
<a href="#l3.10"></a><span id="l3.10">      * @see nsIObserver</span>
<a href="#l3.11"></a><span id="l3.11">      */</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    observe: function (aSubject, aTopic, aData) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    observe: function(aSubject, aTopic, aData) {</span>
<a href="#l3.14"></a><span id="l3.14">         if (aTopic == &quot;nsPref:changed&quot;) {</span>
<a href="#l3.15"></a><span id="l3.15">             switch (aData) {</span>
<a href="#l3.16"></a><span id="l3.16">                 case &quot;calendar.view.useSystemColors&quot;: {</span>
<a href="#l3.17"></a><span id="l3.17">                     let attributeValue = Preferences.get(&quot;calendar.view.useSystemColors&quot;, false) &amp;&amp; &quot;true&quot;;</span>
<a href="#l3.18"></a><span id="l3.18">                     for (let win in fixIterator(Services.ww.getWindowEnumerator())) {</span>
<a href="#l3.19"></a><span id="l3.19">                         setElementValue(win.document.documentElement, attributeValue, &quot;systemcolors&quot;);</span>
<a href="#l3.20"></a><span id="l3.20">                     }</span>
<a href="#l3.21"></a><span id="l3.21">                     break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-common-sets.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-common-sets.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -516,17 +516,17 @@ var calendarController = {</span>
<a href="#l4.4"></a><span id="l4.4">      */</span>
<a href="#l4.5"></a><span id="l4.5">     get offline() {</span>
<a href="#l4.6"></a><span id="l4.6">         return Services.io.offline;</span>
<a href="#l4.7"></a><span id="l4.7">     },</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">     /**</span>
<a href="#l4.10"></a><span id="l4.10">      * Returns a boolean indicating if all calendars are readonly.</span>
<a href="#l4.11"></a><span id="l4.11">      */</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    get all_readonly () {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+    get all_readonly() {</span>
<a href="#l4.14"></a><span id="l4.14">         var calMgr = getCalendarManager();</span>
<a href="#l4.15"></a><span id="l4.15">         return (calMgr.readOnlyCalendarCount == calMgr.calendarCount);</span>
<a href="#l4.16"></a><span id="l4.16">     },</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18">     /**</span>
<a href="#l4.19"></a><span id="l4.19">      * Returns a boolean indicating if all calendars are local</span>
<a href="#l4.20"></a><span id="l4.20">      */</span>
<a href="#l4.21"></a><span id="l4.21">     get no_network_calendars() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-invitations-manager.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-invitations-manager.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -140,20 +140,19 @@ InvitationsManager.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4"> </span>
<a href="#l5.5"></a><span id="l5.5">             // calIOperationListener</span>
<a href="#l5.6"></a><span id="l5.6">             onOperationComplete: function(aCalendar,</span>
<a href="#l5.7"></a><span id="l5.7">                                           aStatus,</span>
<a href="#l5.8"></a><span id="l5.8">                                           aOperationType,</span>
<a href="#l5.9"></a><span id="l5.9">                                           aId,</span>
<a href="#l5.10"></a><span id="l5.10">                                           aDetail) {</span>
<a href="#l5.11"></a><span id="l5.11">                 if (--this.mCount == 0) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                    this.mInvitationsManager.mItemList.sort(</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-                        function (a, b) {</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-                            return a.startDate.compare(b.startDate);</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-                        });</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+                    this.mInvitationsManager.mItemList.sort((a, b) =&gt; {</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+                        return a.startDate.compare(b.startDate)</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+                    });</span>
<a href="#l5.19"></a><span id="l5.19">                     for (var listener of listeners) {</span>
<a href="#l5.20"></a><span id="l5.20">                         try {</span>
<a href="#l5.21"></a><span id="l5.21">                             if (this.mInvitationsManager.mItemList.length) {</span>
<a href="#l5.22"></a><span id="l5.22">                                 // Only call if there are actually items</span>
<a href="#l5.23"></a><span id="l5.23">                                 listener.onGetResult(null,</span>
<a href="#l5.24"></a><span id="l5.24">                                                      Components.results.NS_OK,</span>
<a href="#l5.25"></a><span id="l5.25">                                                      Components.interfaces.calIItemBase,</span>
<a href="#l5.26"></a><span id="l5.26">                                                      null,</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineat">@@ -270,21 +269,21 @@ InvitationsManager.prototype = {</span>
<a href="#l5.28"></a><span id="l5.28">         // TODO: undo/redo</span>
<a href="#l5.29"></a><span id="l5.29">         function operationListener(mgr, queueCallback, oldItem_) {</span>
<a href="#l5.30"></a><span id="l5.30">             this.mInvitationsManager = mgr;</span>
<a href="#l5.31"></a><span id="l5.31">             this.mJobQueueFinishedCallBack = queueCallback;</span>
<a href="#l5.32"></a><span id="l5.32">             this.mOldItem = oldItem_;</span>
<a href="#l5.33"></a><span id="l5.33">         }</span>
<a href="#l5.34"></a><span id="l5.34">         operationListener.prototype = {</span>
<a href="#l5.35"></a><span id="l5.35">             QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIOperationListener]),</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-            onOperationComplete: function (aCalendar,</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-                                           aStatus,</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-                                           aOperationType,</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-                                           aId,</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-                                           aDetail) {</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+            onOperationComplete: function(aCalendar,</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+                                          aStatus,</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+                                          aOperationType,</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+                                          aId,</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+                                          aDetail) {</span>
<a href="#l5.46"></a><span id="l5.46">                 if (Components.isSuccessCode(aStatus) &amp;&amp;</span>
<a href="#l5.47"></a><span id="l5.47">                     aOperationType == Components.interfaces.calIOperationListener.MODIFY) {</span>
<a href="#l5.48"></a><span id="l5.48">                     cal.itip.checkAndSend(aOperationType, aDetail, this.mOldItem);</span>
<a href="#l5.49"></a><span id="l5.49">                     this.mInvitationsManager.deleteItem(aDetail);</span>
<a href="#l5.50"></a><span id="l5.50">                     this.mInvitationsManager.addItem(aDetail);</span>
<a href="#l5.51"></a><span id="l5.51">                 }</span>
<a href="#l5.52"></a><span id="l5.52">                 this.mInvitationsManager.mJobsPending--;</span>
<a href="#l5.53"></a><span id="l5.53">                 if (this.mInvitationsManager.mJobsPending == 0 &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-management.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-management.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -336,17 +336,17 @@ function showOnlyCalendar(aCalendar) {</span>
<a href="#l6.4"></a><span id="l6.4">     composite.endBatch();</span>
<a href="#l6.5"></a><span id="l6.5"> }</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> var compositeObserver = {</span>
<a href="#l6.8"></a><span id="l6.8">     QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIObserver,</span>
<a href="#l6.9"></a><span id="l6.9">                                            Components.interfaces.calICompositeObserver]),</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">     onStartBatch: function() {},</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    onEndBatch: function () {},</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    onEndBatch: function() {},</span>
<a href="#l6.14"></a><span id="l6.14">     onAddItem: function() {},</span>
<a href="#l6.15"></a><span id="l6.15">     onModifyItem: function() {},</span>
<a href="#l6.16"></a><span id="l6.16">     onDeleteItem: function() {},</span>
<a href="#l6.17"></a><span id="l6.17">     onError: function() {},</span>
<a href="#l6.18"></a><span id="l6.18">     onPropertyChanged: function() {},</span>
<a href="#l6.19"></a><span id="l6.19">     onPropertyDeleting: function() {},</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">     onLoad: function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1464,20 +1464,17 @@</span>
<a href="#l7.4"></a><span id="l7.4">               // the multiday view currently exhibits a less than optimal strategy</span>
<a href="#l7.5"></a><span id="l7.5">               // in terms of item selection. items don't get automatically selected</span>
<a href="#l7.6"></a><span id="l7.6">               // when clicked and dragged, as to differentiate inline editing from</span>
<a href="#l7.7"></a><span id="l7.7">               // the act of selecting an event. but the application internal drop</span>
<a href="#l7.8"></a><span id="l7.8">               // targets will ask for selected items in order to pull the data from</span>
<a href="#l7.9"></a><span id="l7.9">               // the packets. that's why we need to make sure at least the currently</span>
<a href="#l7.10"></a><span id="l7.10">               // dragged event is contained in the set of selected items.</span>
<a href="#l7.11"></a><span id="l7.11">               let selectedItems = this.getSelectedItems({});</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-              if (!selectedItems.some(</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-                  function (aItem) {</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-                      return (aItem.hashId == item.hashId);</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-                  })) {</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+              if (!selectedItems.some(aItem =&gt; aItem.hashId == item.hashId)) {</span>
<a href="#l7.17"></a><span id="l7.17">                   col.calendarView.setSelectedItems(1,</span>
<a href="#l7.18"></a><span id="l7.18">                       [event.ctrlKey ? item.parentItem : item]);</span>
<a href="#l7.19"></a><span id="l7.19">               }</span>
<a href="#l7.20"></a><span id="l7.20">               invokeEventDragSession(dragState.dragOccurrence, col);</span>
<a href="#l7.21"></a><span id="l7.21">               return;</span>
<a href="#l7.22"></a><span id="l7.22">           }</span>
<a href="#l7.23"></a><span id="l7.23"> </span>
<a href="#l7.24"></a><span id="l7.24">           col.fgboxes.box.setAttribute(&quot;dragging&quot;, &quot;true&quot;);</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineat">@@ -2131,19 +2128,17 @@</span>
<a href="#l7.26"></a><span id="l7.26">           return null;</span>
<a href="#l7.27"></a><span id="l7.27">         ]]&gt;&lt;/body&gt;</span>
<a href="#l7.28"></a><span id="l7.28">       &lt;/method&gt;</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30">       &lt;method name=&quot;addEvent&quot;&gt;</span>
<a href="#l7.31"></a><span id="l7.31">         &lt;parameter name=&quot;aItem&quot;/&gt;</span>
<a href="#l7.32"></a><span id="l7.32">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l7.33"></a><span id="l7.33">           // prevent same items being added</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-          if (this.mItemBoxes.some(function (itemBox) {</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-                                     return itemBox.occurrence.hashId == aItem.hashId;</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-                                   })) {</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+          if (this.mItemBoxes.some(itemBox =&gt; itemBox.occurrence.hashId == aItem.hashId)) {</span>
<a href="#l7.38"></a><span id="l7.38">             return;</span>
<a href="#l7.39"></a><span id="l7.39">           }</span>
<a href="#l7.40"></a><span id="l7.40"> </span>
<a href="#l7.41"></a><span id="l7.41">           var itemBox = createXULElement(&quot;calendar-editable-item&quot;);</span>
<a href="#l7.42"></a><span id="l7.42">           this.appendChild(itemBox);</span>
<a href="#l7.43"></a><span id="l7.43">           itemBox.calendarView = this.calendarView;</span>
<a href="#l7.44"></a><span id="l7.44">           itemBox.occurrence = aItem;</span>
<a href="#l7.45"></a><span id="l7.45">           var ctxt = this.calendarView.getAttribute(&quot;item-context&quot;) ||</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-views.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -21,33 +21,33 @@ var calendarViewController = {</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5">         return this;</span>
<a href="#l8.6"></a><span id="l8.6">     },</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">     /**</span>
<a href="#l8.9"></a><span id="l8.9">      * Creates a new event</span>
<a href="#l8.10"></a><span id="l8.10">      * @see calICalendarViewController</span>
<a href="#l8.11"></a><span id="l8.11">      */</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    createNewEvent: function (aCalendar, aStartTime, aEndTime, aForceAllday) {</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+    createNewEvent: function(aCalendar, aStartTime, aEndTime, aForceAllday) {</span>
<a href="#l8.14"></a><span id="l8.14">         // if we're given both times, skip the dialog</span>
<a href="#l8.15"></a><span id="l8.15">         if (aStartTime &amp;&amp; aEndTime &amp;&amp; !aStartTime.isDate &amp;&amp; !aEndTime.isDate) {</span>
<a href="#l8.16"></a><span id="l8.16">             let item = cal.createEvent();</span>
<a href="#l8.17"></a><span id="l8.17">             setDefaultItemValues(item, aCalendar, aStartTime, aEndTime);</span>
<a href="#l8.18"></a><span id="l8.18">             item.title = calGetString(&quot;calendar&quot;, &quot;newEvent&quot;);</span>
<a href="#l8.19"></a><span id="l8.19">             doTransaction('add', item, item.calendar, null, null);</span>
<a href="#l8.20"></a><span id="l8.20">         } else {</span>
<a href="#l8.21"></a><span id="l8.21">             createEventWithDialog(aCalendar, aStartTime, null, null, null, aForceAllday);</span>
<a href="#l8.22"></a><span id="l8.22">         }</span>
<a href="#l8.23"></a><span id="l8.23">     },</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25">     /**</span>
<a href="#l8.26"></a><span id="l8.26">      * Modifies the given occurrence</span>
<a href="#l8.27"></a><span id="l8.27">      * @see calICalendarViewController</span>
<a href="#l8.28"></a><span id="l8.28">      */</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-    modifyOccurrence: function (aOccurrence, aNewStartTime, aNewEndTime, aNewTitle) {</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+    modifyOccurrence: function(aOccurrence, aNewStartTime, aNewEndTime, aNewTitle) {</span>
<a href="#l8.31"></a><span id="l8.31">         // if modifying this item directly (e.g. just dragged to new time),</span>
<a href="#l8.32"></a><span id="l8.32">         // then do so; otherwise pop up the dialog</span>
<a href="#l8.33"></a><span id="l8.33">         if (aNewStartTime || aNewEndTime || aNewTitle) {</span>
<a href="#l8.34"></a><span id="l8.34">             let instance = aOccurrence.clone();</span>
<a href="#l8.35"></a><span id="l8.35"> </span>
<a href="#l8.36"></a><span id="l8.36">             if (aNewTitle) {</span>
<a href="#l8.37"></a><span id="l8.37">                 instance.title = aNewTitle;</span>
<a href="#l8.38"></a><span id="l8.38">             }</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineat">@@ -82,20 +82,20 @@ var calendarViewController = {</span>
<a href="#l8.40"></a><span id="l8.40">             modifyEventWithDialog(aOccurrence, null, true);</span>
<a href="#l8.41"></a><span id="l8.41">         }</span>
<a href="#l8.42"></a><span id="l8.42">     },</span>
<a href="#l8.43"></a><span id="l8.43"> </span>
<a href="#l8.44"></a><span id="l8.44">     /**</span>
<a href="#l8.45"></a><span id="l8.45">      * Deletes the given occurrences</span>
<a href="#l8.46"></a><span id="l8.46">      * @see calICalendarViewController</span>
<a href="#l8.47"></a><span id="l8.47">      */</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineminus">-    deleteOccurrences: function (aCount,</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-                                 aOccurrences,</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-                                 aUseParentItems,</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-                                 aDoNotConfirm) {</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+    deleteOccurrences: function(aCount,</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+                                aOccurrences,</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+                                aUseParentItems,</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+                                aDoNotConfirm) {</span>
<a href="#l8.56"></a><span id="l8.56">         startBatchTransaction();</span>
<a href="#l8.57"></a><span id="l8.57">         var recurringItems = {};</span>
<a href="#l8.58"></a><span id="l8.58"> </span>
<a href="#l8.59"></a><span id="l8.59">         function getSavedItem(aItemToDelete) {</span>
<a href="#l8.60"></a><span id="l8.60">             // Get the parent item, saving it in our recurringItems object for</span>
<a href="#l8.61"></a><span id="l8.61">             // later use.</span>
<a href="#l8.62"></a><span id="l8.62">             var hashVal = aItemToDelete.parentItem.hashId;</span>
<a href="#l8.63"></a><span id="l8.63">             if (!recurringItems[hashVal]) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-freebusy.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -811,17 +811,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">                       // offset -&gt; offset in hours from start of current day</span>
<a href="#l9.5"></a><span id="l9.5">                       offset.addDuration(dayoffset);</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">                       let duration = rangeEnd.subtractDate(rangeStart);</span>
<a href="#l9.8"></a><span id="l9.8">                       let start_in_minutes = Math.floor(offset.inSeconds / 60);</span>
<a href="#l9.9"></a><span id="l9.9">                       let end_in_minutes = Math.ceil((duration.inSeconds / 60) +</span>
<a href="#l9.10"></a><span id="l9.10">                                                      (offset.inSeconds / 60));</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-                      let minute2offset = function (value, fNumHours, numHours, start_hour, zoomfactor) {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+                      let minute2offset = function(value, fNumHours, numHours, start_hour, zoomfactor) {</span>
<a href="#l9.14"></a><span id="l9.14">                           // 'value' is some integer in the interval [0, range * 24 * 60].</span>
<a href="#l9.15"></a><span id="l9.15">                           // we need to map this offset into our array which</span>
<a href="#l9.16"></a><span id="l9.16">                           // holds elements for 'range' days with [start, end] hours each.</span>
<a href="#l9.17"></a><span id="l9.17">                           let minutes_per_day = 24 * 60;</span>
<a href="#l9.18"></a><span id="l9.18">                           let day = (value - (value % minutes_per_day)) / minutes_per_day;</span>
<a href="#l9.19"></a><span id="l9.19">                           let minute = Math.floor(value % minutes_per_day) - (start_hour * 60);</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21">                           minute = Math.max(0, minute);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/preferences/categories.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/preferences/categories.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -63,17 +63,17 @@ var gCategoriesPane = {</span>
<a href="#l10.4"></a><span id="l10.4">      */</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">     updatePrefs: function gCP_updatePrefs() {</span>
<a href="#l10.7"></a><span id="l10.7">         cal.sortArrayByLocaleCollator(gCategoryList);</span>
<a href="#l10.8"></a><span id="l10.8">         document.getElementById(&quot;calendar.categories.names&quot;).value =</span>
<a href="#l10.9"></a><span id="l10.9">             categoriesArrayToString(gCategoryList);</span>
<a href="#l10.10"></a><span id="l10.10">     },</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    updateCategoryList: function gCP_updateCategoryList () {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+    updateCategoryList: function gCP_updateCategoryList() {</span>
<a href="#l10.14"></a><span id="l10.14">         this.updatePrefs();</span>
<a href="#l10.15"></a><span id="l10.15">         let listbox = document.getElementById(&quot;categorieslist&quot;);</span>
<a href="#l10.16"></a><span id="l10.16"> </span>
<a href="#l10.17"></a><span id="l10.17">         listbox.clearSelection();</span>
<a href="#l10.18"></a><span id="l10.18">         this.updateButtons();</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> </span>
<a href="#l10.21"></a><span id="l10.21">         while (listbox.lastChild.id != &quot;categoryColumns&quot;) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -140,17 +140,17 @@ cal.itip = {</span>
<a href="#l11.4"></a><span id="l11.4">         if (imipMethod &amp;&amp; imipMethod.length != 0 &amp;&amp; imipMethod.toLowerCase() != &quot;nomethod&quot;) {</span>
<a href="#l11.5"></a><span id="l11.5">             itipItem.receivedMethod = imipMethod.toUpperCase();</span>
<a href="#l11.6"></a><span id="l11.6">         } else { // There is no METHOD in the content-type header (spec violation).</span>
<a href="#l11.7"></a><span id="l11.7">                  // Fall back to using the one from the itipItem's ICS.</span>
<a href="#l11.8"></a><span id="l11.8">             imipMethod = itipItem.receivedMethod;</span>
<a href="#l11.9"></a><span id="l11.9">         }</span>
<a href="#l11.10"></a><span id="l11.10">         cal.LOG(&quot;iTIP method: &quot; + imipMethod);</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-        let isWritableCalendar = function (aCalendar) {</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+        let isWritableCalendar = function(aCalendar) {</span>
<a href="#l11.14"></a><span id="l11.14">             /* TODO: missing ACL check for existing items (require callback API) */</span>
<a href="#l11.15"></a><span id="l11.15">             return (cal.itip.isSchedulingCalendar(aCalendar)</span>
<a href="#l11.16"></a><span id="l11.16">                     &amp;&amp; cal.userCanAddItemsToCalendar(aCalendar));</span>
<a href="#l11.17"></a><span id="l11.17">         };</span>
<a href="#l11.18"></a><span id="l11.18"> </span>
<a href="#l11.19"></a><span id="l11.19">         let writableCalendars = cal.getCalendarManager().getCalendars({}).filter(isWritableCalendar);</span>
<a href="#l11.20"></a><span id="l11.20">         if (writableCalendars.length &gt; 0) {</span>
<a href="#l11.21"></a><span id="l11.21">             let compCal = Components.classes[&quot;@mozilla.org/calendar/calendar;1?type=composite&quot;]</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -630,17 +630,17 @@ cal.itip = {</span>
<a href="#l11.23"></a><span id="l11.23">                         aItem.deleteProperty(&quot;X-MS-OLK-SENDER&quot;);</span>
<a href="#l11.24"></a><span id="l11.24">                     }</span>
<a href="#l11.25"></a><span id="l11.25">                     // if the event was delegated to the replying attendee, we may also notify also</span>
<a href="#l11.26"></a><span id="l11.26">                     // the delegator due to chapter 3.2.2.3. of RfC 5546</span>
<a href="#l11.27"></a><span id="l11.27">                     let replyTo = [];</span>
<a href="#l11.28"></a><span id="l11.28">                     let delegatorIds = invitedAttendee.getProperty(&quot;DELEGATED-FROM&quot;);</span>
<a href="#l11.29"></a><span id="l11.29">                     if (delegatorIds &amp;&amp;</span>
<a href="#l11.30"></a><span id="l11.30">                         Preferences.get(&quot;calendar.itip.notifyDelegatorOnReply&quot;, false)) {</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-                        let getDelegator = function (aDelegatorId) {</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+                        let getDelegator = function(aDelegatorId) {</span>
<a href="#l11.33"></a><span id="l11.33">                             let delegator = aOriginalItem.getAttendeeById(aDelegatorId);</span>
<a href="#l11.34"></a><span id="l11.34">                             if (delegator) {</span>
<a href="#l11.35"></a><span id="l11.35">                                 replyTo.push(delegator);</span>
<a href="#l11.36"></a><span id="l11.36">                             }</span>
<a href="#l11.37"></a><span id="l11.37">                         };</span>
<a href="#l11.38"></a><span id="l11.38">                         // Our backends currently do not support multi-value params. libical just</span>
<a href="#l11.39"></a><span id="l11.39">                         // swallows any value but the first, while ical.js fails to parse the item</span>
<a href="#l11.40"></a><span id="l11.40">                         // at all. Single values are handled properly by both backends though.</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineat">@@ -788,17 +788,17 @@ cal.itip = {</span>
<a href="#l11.42"></a><span id="l11.42">             //           find original occurrence</span>
<a href="#l11.43"></a><span id="l11.43">             oldItem = oldItem.recurrenceInfo.getOccurrenceFor(newItem.recurrenceId);</span>
<a href="#l11.44"></a><span id="l11.44">             cal.ASSERT(oldItem, &quot;unexpected!&quot;);</span>
<a href="#l11.45"></a><span id="l11.45">             if (!oldItem) {</span>
<a href="#l11.46"></a><span id="l11.46">                 return newItem;</span>
<a href="#l11.47"></a><span id="l11.47">             }</span>
<a href="#l11.48"></a><span id="l11.48">         }</span>
<a href="#l11.49"></a><span id="l11.49"> </span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-        let hashMajorProps = function (aItem) {</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+        let hashMajorProps = function(aItem) {</span>
<a href="#l11.52"></a><span id="l11.52">             const majorProps = {</span>
<a href="#l11.53"></a><span id="l11.53">                 DTSTART: true,</span>
<a href="#l11.54"></a><span id="l11.54">                 DTEND: true,</span>
<a href="#l11.55"></a><span id="l11.55">                 DURATION: true,</span>
<a href="#l11.56"></a><span id="l11.56">                 DUE: true,</span>
<a href="#l11.57"></a><span id="l11.57">                 RDATE: true,</span>
<a href="#l11.58"></a><span id="l11.58">                 RRULE: true,</span>
<a href="#l11.59"></a><span id="l11.59">                 EXDATE: true,</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineat">@@ -1019,17 +1019,17 @@ function sendMessage(aItem, aMethod, aRe</span>
<a href="#l11.61"></a><span id="l11.61">     }</span>
<a href="#l11.62"></a><span id="l11.62"> </span>
<a href="#l11.63"></a><span id="l11.63">     let aTransport = aItem.calendar.getProperty(&quot;itip.transport&quot;);</span>
<a href="#l11.64"></a><span id="l11.64">     if (!aTransport) { // can only send if there's a transport for the calendar</span>
<a href="#l11.65"></a><span id="l11.65">         return false;</span>
<a href="#l11.66"></a><span id="l11.66">     }</span>
<a href="#l11.67"></a><span id="l11.67">     aTransport = aTransport.QueryInterface(Components.interfaces.calIItipTransport);</span>
<a href="#l11.68"></a><span id="l11.68"> </span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-    let _sendItem = function (aSendToList, aSendItem) {</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+    let _sendItem = function(aSendToList, aSendItem) {</span>
<a href="#l11.71"></a><span id="l11.71">         let itipItem = Components.classes[&quot;@mozilla.org/calendar/itip-item;1&quot;]</span>
<a href="#l11.72"></a><span id="l11.72">                                  .createInstance(Components.interfaces.calIItipItem);</span>
<a href="#l11.73"></a><span id="l11.73">         itipItem.init(cal.getSerializedItem(aSendItem));</span>
<a href="#l11.74"></a><span id="l11.74">         itipItem.responseMethod = aMethod;</span>
<a href="#l11.75"></a><span id="l11.75">         itipItem.targetCalendar = aSendItem.calendar;</span>
<a href="#l11.76"></a><span id="l11.76">         itipItem.autoResponse = ((autoResponse &amp;&amp; autoResponse.value) ? Components.interfaces.calIItipItem.AUTO</span>
<a href="#l11.77"></a><span id="l11.77">                                                                       : Components.interfaces.calIItipItem.USER);</span>
<a href="#l11.78"></a><span id="l11.78">         if (autoResponse) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/modules/calUtils.jsm</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/modules/calUtils.jsm</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -200,17 +200,17 @@ var cal = {</span>
<a href="#l12.4"></a><span id="l12.4">      * - has the same organizer but</span>
<a href="#l12.5"></a><span id="l12.5">      * - has any attendee removed</span>
<a href="#l12.6"></a><span id="l12.6">      * Intended to get a copy of a normal event invitation that behaves as if the PUBLISH method</span>
<a href="#l12.7"></a><span id="l12.7">      * was chosen instead.</span>
<a href="#l12.8"></a><span id="l12.8">      *</span>
<a href="#l12.9"></a><span id="l12.9">      * @param aItem         original item</span>
<a href="#l12.10"></a><span id="l12.10">      * @param aUid          (optional) UID to use for the new item</span>
<a href="#l12.11"></a><span id="l12.11">      */</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    getPublishLikeItemCopy: function (aItem, aUid) {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    getPublishLikeItemCopy: function(aItem, aUid) {</span>
<a href="#l12.14"></a><span id="l12.14">         // avoid changing aItem</span>
<a href="#l12.15"></a><span id="l12.15">         let item = aItem.clone();</span>
<a href="#l12.16"></a><span id="l12.16">         // reset to a new UUID if applicable</span>
<a href="#l12.17"></a><span id="l12.17">         item.id = aUid || cal.getUUID();</span>
<a href="#l12.18"></a><span id="l12.18">         // add a relation to the original item</span>
<a href="#l12.19"></a><span id="l12.19">         let relation = cal.createRelation();</span>
<a href="#l12.20"></a><span id="l12.20">         relation.relId = aItem.id;</span>
<a href="#l12.21"></a><span id="l12.21">         relation.relType = &quot;SIBLING&quot;;</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -246,17 +246,17 @@ var cal = {</span>
<a href="#l12.23"></a><span id="l12.23">     },</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25">     /**</span>
<a href="#l12.26"></a><span id="l12.26">      * Returns a basically checked recipient list - malformed elements will be removed</span>
<a href="#l12.27"></a><span id="l12.27">      *</span>
<a href="#l12.28"></a><span id="l12.28">      * @param   string aRecipients  a comma-seperated list of e-mail addresses</span>
<a href="#l12.29"></a><span id="l12.29">      * @return  string              a comma-seperated list of e-mail addresses</span>
<a href="#l12.30"></a><span id="l12.30">      */</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-    validateRecipientList: function (aRecipients) {</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+    validateRecipientList: function(aRecipients) {</span>
<a href="#l12.33"></a><span id="l12.33">         let compFields = Components.classes[&quot;@mozilla.org/messengercompose/composefields;1&quot;]</span>
<a href="#l12.34"></a><span id="l12.34">                                    .createInstance(Components.interfaces.nsIMsgCompFields);</span>
<a href="#l12.35"></a><span id="l12.35">         // Resolve the list considering also configured common names</span>
<a href="#l12.36"></a><span id="l12.36">         let members = compFields.splitRecipients(aRecipients, false, {});</span>
<a href="#l12.37"></a><span id="l12.37">         let list = [];</span>
<a href="#l12.38"></a><span id="l12.38">         let prefix = &quot;&quot;;</span>
<a href="#l12.39"></a><span id="l12.39">         for (let member of members) {</span>
<a href="#l12.40"></a><span id="l12.40">             if (prefix != &quot;&quot;) {</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineat">@@ -344,33 +344,33 @@ var cal = {</span>
<a href="#l12.42"></a><span id="l12.42">     /**</span>
<a href="#l12.43"></a><span id="l12.43">      * Resolves delegated-to/delegated-from calusers for a given attendee to also include the</span>
<a href="#l12.44"></a><span id="l12.44">      * respective CNs if available in a given set of attendees</span>
<a href="#l12.45"></a><span id="l12.45">      *</span>
<a href="#l12.46"></a><span id="l12.46">      * @param aAttendee  {calIAttendee}  The attendee to resolve the delegation information for</span>
<a href="#l12.47"></a><span id="l12.47">      * @param aAttendees {Array}         An array of calIAttendee objects to look up</span>
<a href="#l12.48"></a><span id="l12.48">      * @return           {Object}        An object with string attributes for delegators and delegatees</span>
<a href="#l12.49"></a><span id="l12.49">      */</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-    resolveDelegation: function (aAttendee, aAttendees) {</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+    resolveDelegation: function(aAttendee, aAttendees) {</span>
<a href="#l12.52"></a><span id="l12.52">         let attendees = aAttendees || [aAttendee];</span>
<a href="#l12.53"></a><span id="l12.53"> </span>
<a href="#l12.54"></a><span id="l12.54">         // this will be replaced by a direct property getter in calIAttendee</span>
<a href="#l12.55"></a><span id="l12.55">         let delegators = [];</span>
<a href="#l12.56"></a><span id="l12.56">         let delegatees = [];</span>
<a href="#l12.57"></a><span id="l12.57">         let delegatorProp = aAttendee.getProperty(&quot;DELEGATED-FROM&quot;);</span>
<a href="#l12.58"></a><span id="l12.58">         if (delegatorProp) {</span>
<a href="#l12.59"></a><span id="l12.59">             delegators = typeof delegatorProp == &quot;string&quot; ? [delegatorProp] : delegatorProp;</span>
<a href="#l12.60"></a><span id="l12.60">         }</span>
<a href="#l12.61"></a><span id="l12.61">         let delegateeProp = aAttendee.getProperty(&quot;DELEGATED-TO&quot;);</span>
<a href="#l12.62"></a><span id="l12.62">         if (delegateeProp) {</span>
<a href="#l12.63"></a><span id="l12.63">             delegatees = typeof delegateeProp == &quot;string&quot; ? [delegateeProp] : delegateeProp;</span>
<a href="#l12.64"></a><span id="l12.64">         }</span>
<a href="#l12.65"></a><span id="l12.65"> </span>
<a href="#l12.66"></a><span id="l12.66">         for (let att of attendees) {</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineminus">-            let resolveDelegation = function (e, i, a) {</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineplus">+            let resolveDelegation = function(e, i, a) {</span>
<a href="#l12.69"></a><span id="l12.69">                 if (e == att.id) {</span>
<a href="#l12.70"></a><span id="l12.70">                     a[i] = att.toString();</span>
<a href="#l12.71"></a><span id="l12.71">                 }</span>
<a href="#l12.72"></a><span id="l12.72">             };</span>
<a href="#l12.73"></a><span id="l12.73">             delegators.forEach(resolveDelegation);</span>
<a href="#l12.74"></a><span id="l12.74">             delegatees.forEach(resolveDelegation);</span>
<a href="#l12.75"></a><span id="l12.75">         }</span>
<a href="#l12.76"></a><span id="l12.76">         return {</span>
<a href="#l12.77"></a><span id="l12.77" class="difflineat">@@ -397,17 +397,17 @@ var cal = {</span>
<a href="#l12.78"></a><span id="l12.78">     /**</span>
<a href="#l12.79"></a><span id="l12.79">      * Returns a wellformed email string like 'attendee@example.net',</span>
<a href="#l12.80"></a><span id="l12.80">      * 'Common Name &lt;attendee@example.net&gt;' or '&quot;Name, Common&quot; &lt;attendee@example.net&gt;'</span>
<a href="#l12.81"></a><span id="l12.81">      *</span>
<a href="#l12.82"></a><span id="l12.82">      * @param  {calIAttendee}  aAttendee - the attendee to check</span>
<a href="#l12.83"></a><span id="l12.83">      * @param  {boolean}       aIncludeCn - whether or not to return also the CN if available</span>
<a href="#l12.84"></a><span id="l12.84">      * @return {string}        valid email string or an empty string in case of error</span>
<a href="#l12.85"></a><span id="l12.85">      */</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineminus">-    getAttendeeEmail: function (aAttendee, aIncludeCn) {</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineplus">+    getAttendeeEmail: function(aAttendee, aIncludeCn) {</span>
<a href="#l12.88"></a><span id="l12.88">         // If the recipient id is of type urn, we need to figure out the email address, otherwise</span>
<a href="#l12.89"></a><span id="l12.89">         // we fall back to the attendee id</span>
<a href="#l12.90"></a><span id="l12.90">         let email = aAttendee.id.match(/^urn:/i) ? aAttendee.getProperty(&quot;EMAIL&quot;) || &quot;&quot; : aAttendee.id;</span>
<a href="#l12.91"></a><span id="l12.91">         // Strip leading &quot;mailto:&quot; if it exists.</span>
<a href="#l12.92"></a><span id="l12.92">         email = email.replace(/^mailto:/i, &quot;&quot;);</span>
<a href="#l12.93"></a><span id="l12.93">         // We add the CN if requested and available</span>
<a href="#l12.94"></a><span id="l12.94">         let cn = aAttendee.commonName;</span>
<a href="#l12.95"></a><span id="l12.95">         if (aIncludeCn &amp;&amp; email.length &gt; 0 &amp;&amp; cn &amp;&amp; cn.length &gt; 0) {</span>
<a href="#l12.96"></a><span id="l12.96" class="difflineat">@@ -423,35 +423,35 @@ var cal = {</span>
<a href="#l12.97"></a><span id="l12.97">     },</span>
<a href="#l12.98"></a><span id="l12.98"> </span>
<a href="#l12.99"></a><span id="l12.99">     /**</span>
<a href="#l12.100"></a><span id="l12.100">      * Provides a string to use in email &quot;to&quot; header for given attendees</span>
<a href="#l12.101"></a><span id="l12.101">      *</span>
<a href="#l12.102"></a><span id="l12.102">      * @param  {array}   aAttendees - array of calIAttendee's to check</span>
<a href="#l12.103"></a><span id="l12.103">      * @return {string}  Valid string to use in a 'to' header of an email</span>
<a href="#l12.104"></a><span id="l12.104">      */</span>
<a href="#l12.105"></a><span id="l12.105" class="difflineminus">-    getRecipientList: function (aAttendees) {</span>
<a href="#l12.106"></a><span id="l12.106" class="difflineminus">-        let cbEmail = function (aVal, aInd, aArr) {</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineplus">+    getRecipientList: function(aAttendees) {</span>
<a href="#l12.108"></a><span id="l12.108" class="difflineplus">+        let cbEmail = function(aVal, aInd, aArr) {</span>
<a href="#l12.109"></a><span id="l12.109">             let email = cal.getAttendeeEmail(aVal, true);</span>
<a href="#l12.110"></a><span id="l12.110">             if (!email.length) {</span>
<a href="#l12.111"></a><span id="l12.111">                 cal.LOG(&quot;Dropping invalid recipient for email transport: &quot; + aVal.toString());</span>
<a href="#l12.112"></a><span id="l12.112">             }</span>
<a href="#l12.113"></a><span id="l12.113">             return email;</span>
<a href="#l12.114"></a><span id="l12.114">         }</span>
<a href="#l12.115"></a><span id="l12.115">         return aAttendees.map(cbEmail)</span>
<a href="#l12.116"></a><span id="l12.116">                          .filter(aVal =&gt; aVal.length &gt; 0)</span>
<a href="#l12.117"></a><span id="l12.117">                          .join(', ');</span>
<a href="#l12.118"></a><span id="l12.118">     },</span>
<a href="#l12.119"></a><span id="l12.119"> </span>
<a href="#l12.120"></a><span id="l12.120">     /**</span>
<a href="#l12.121"></a><span id="l12.121">      * Returns the default transparency to apply for an event depending on whether its an all-day event</span>
<a href="#l12.122"></a><span id="l12.122">      *</span>
<a href="#l12.123"></a><span id="l12.123">      * @param aIsAllDay      If true, the default transparency for all-day events is returned</span>
<a href="#l12.124"></a><span id="l12.124">      */</span>
<a href="#l12.125"></a><span id="l12.125" class="difflineminus">-    getEventDefaultTransparency: function (aIsAllDay) {</span>
<a href="#l12.126"></a><span id="l12.126" class="difflineplus">+    getEventDefaultTransparency: function(aIsAllDay) {</span>
<a href="#l12.127"></a><span id="l12.127">         let transp = null;</span>
<a href="#l12.128"></a><span id="l12.128">         if (aIsAllDay) {</span>
<a href="#l12.129"></a><span id="l12.129">             transp = Preferences.get(&quot;calendar.events.defaultTransparency.allday.transparent&quot;, false)</span>
<a href="#l12.130"></a><span id="l12.130">                      ? &quot;TRANSPARENT&quot;</span>
<a href="#l12.131"></a><span id="l12.131">                      : &quot;OPAQUE&quot;;</span>
<a href="#l12.132"></a><span id="l12.132">         } else {</span>
<a href="#l12.133"></a><span id="l12.133">             transp = Preferences.get(&quot;calendar.events.defaultTransparency.standard.transparent&quot;, false)</span>
<a href="#l12.134"></a><span id="l12.134">                      ? &quot;TRANSPARENT&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/src/calAttachment.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/src/calAttachment.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -139,29 +139,29 @@ calAttachment.prototype = {</span>
<a href="#l13.4"></a><span id="l13.4">         let prop = cal.getIcsService().createIcalPropertyFromString(val);</span>
<a href="#l13.5"></a><span id="l13.5">         if (prop.propertyName != &quot;ATTACH&quot;) {</span>
<a href="#l13.6"></a><span id="l13.6">             throw Components.results.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l13.7"></a><span id="l13.7">         }</span>
<a href="#l13.8"></a><span id="l13.8">         this.icalProperty = prop;</span>
<a href="#l13.9"></a><span id="l13.9">         return val;</span>
<a href="#l13.10"></a><span id="l13.10">     },</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-    getParameter: function (aName) {</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    getParameter: function(aName) {</span>
<a href="#l13.14"></a><span id="l13.14">         return this.mProperties.getProperty(aName);</span>
<a href="#l13.15"></a><span id="l13.15">     },</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-    setParameter: function (aName, aValue) {</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+    setParameter: function(aName, aValue) {</span>
<a href="#l13.19"></a><span id="l13.19">         if (aValue || aValue === 0) {</span>
<a href="#l13.20"></a><span id="l13.20">             return this.mProperties.setProperty(aName, aValue);</span>
<a href="#l13.21"></a><span id="l13.21">         } else {</span>
<a href="#l13.22"></a><span id="l13.22">             return this.mProperties.deleteProperty(aName);</span>
<a href="#l13.23"></a><span id="l13.23">         }</span>
<a href="#l13.24"></a><span id="l13.24">     },</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26" class="difflineminus">-    deleteParameter: function (aName) {</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+    deleteParameter: function(aName) {</span>
<a href="#l13.28"></a><span id="l13.28">         this.mProperties.deleteProperty(aName);</span>
<a href="#l13.29"></a><span id="l13.29">     },</span>
<a href="#l13.30"></a><span id="l13.30"> </span>
<a href="#l13.31"></a><span id="l13.31">     clone: function cA_clone() {</span>
<a href="#l13.32"></a><span id="l13.32">         let newAttachment = new calAttachment();</span>
<a href="#l13.33"></a><span id="l13.33">         newAttachment.mData = this.mData;</span>
<a href="#l13.34"></a><span id="l13.34">         newAttachment.mHashId = this.mHashId;</span>
<a href="#l13.35"></a><span id="l13.35">         for (let [name, value] of this.mProperties) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/src/calAttendee.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/src/calAttendee.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -65,17 +65,17 @@ calAttendee.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">         { cal: &quot;role&quot;, ics: &quot;ROLE&quot; }</span>
<a href="#l14.5"></a><span id="l14.5">     ],</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">     mIsOrganizer: false,</span>
<a href="#l14.8"></a><span id="l14.8">     get isOrganizer() { return this.mIsOrganizer; },</span>
<a href="#l14.9"></a><span id="l14.9">     set isOrganizer(bool) { this.mIsOrganizer = bool; },</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">     // icalatt is a calIcalProperty of type attendee</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    set icalProperty (icalatt) {</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    set icalProperty(icalatt) {</span>
<a href="#l14.14"></a><span id="l14.14">         this.modify();</span>
<a href="#l14.15"></a><span id="l14.15">         this.id = icalatt.valueAsIcalString;</span>
<a href="#l14.16"></a><span id="l14.16">         this.mIsOrganizer = (icalatt.propertyName == &quot;ORGANIZER&quot;);</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">         let promotedProps = { };</span>
<a href="#l14.19"></a><span id="l14.19">         for (let prop of this.icalAttendeePropMap) {</span>
<a href="#l14.20"></a><span id="l14.20">             this[prop.cal] = icalatt.getParameter(prop.ics);</span>
<a href="#l14.21"></a><span id="l14.21">             // Don't copy these to the property bag.</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -149,28 +149,28 @@ calAttendee.prototype = {</span>
<a href="#l14.23"></a><span id="l14.23">         }</span>
<a href="#l14.24"></a><span id="l14.24">         this.icalProperty = prop;</span>
<a href="#l14.25"></a><span id="l14.25">         return val;</span>
<a href="#l14.26"></a><span id="l14.26">     },</span>
<a href="#l14.27"></a><span id="l14.27"> </span>
<a href="#l14.28"></a><span id="l14.28">     get propertyEnumerator() { return this.mProperties.enumerator; },</span>
<a href="#l14.29"></a><span id="l14.29"> </span>
<a href="#l14.30"></a><span id="l14.30">     // The has/get/set/deleteProperty methods are case-insensitive.</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-    getProperty: function (aName) {</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+    getProperty: function(aName) {</span>
<a href="#l14.33"></a><span id="l14.33">         return this.mProperties.getProperty(aName.toUpperCase());</span>
<a href="#l14.34"></a><span id="l14.34">     },</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineminus">-    setProperty: function (aName, aValue) {</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+    setProperty: function(aName, aValue) {</span>
<a href="#l14.37"></a><span id="l14.37">         this.modify();</span>
<a href="#l14.38"></a><span id="l14.38">         if (aValue || !isNaN(parseInt(aValue, 10))) {</span>
<a href="#l14.39"></a><span id="l14.39">             this.mProperties.setProperty(aName.toUpperCase(), aValue);</span>
<a href="#l14.40"></a><span id="l14.40">         } else {</span>
<a href="#l14.41"></a><span id="l14.41">             this.mProperties.deleteProperty(aName.toUpperCase());</span>
<a href="#l14.42"></a><span id="l14.42">         }</span>
<a href="#l14.43"></a><span id="l14.43">     },</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineminus">-    deleteProperty: function (aName) {</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+    deleteProperty: function(aName) {</span>
<a href="#l14.46"></a><span id="l14.46">         this.modify();</span>
<a href="#l14.47"></a><span id="l14.47">         this.mProperties.deleteProperty(aName.toUpperCase());</span>
<a href="#l14.48"></a><span id="l14.48">     },</span>
<a href="#l14.49"></a><span id="l14.49"> </span>
<a href="#l14.50"></a><span id="l14.50">     mId: null,</span>
<a href="#l14.51"></a><span id="l14.51">     get id() {</span>
<a href="#l14.52"></a><span id="l14.52">         return this.mId;</span>
<a href="#l14.53"></a><span id="l14.53">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/src/calCachedCalendar.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/src/calCachedCalendar.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -156,17 +156,17 @@ calCachedCalendar.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">     onCalendarUnregistering: function() {</span>
<a href="#l15.5"></a><span id="l15.5">         if (this.mCachedCalendar) {</span>
<a href="#l15.6"></a><span id="l15.6">             let self = this;</span>
<a href="#l15.7"></a><span id="l15.7">             this.mCachedCalendar.removeObserver(this.mCachedObserver);</span>
<a href="#l15.8"></a><span id="l15.8">             // TODO put changes into a different calendar and delete</span>
<a href="#l15.9"></a><span id="l15.9">             // afterwards.</span>
<a href="#l15.10"></a><span id="l15.10"> </span>
<a href="#l15.11"></a><span id="l15.11">             let listener = {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-                onDeleteCalendar: function (aCalendar, aStatus, aDetail) {</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+                onDeleteCalendar: function(aCalendar, aStatus, aDetail) {</span>
<a href="#l15.14"></a><span id="l15.14">                     self.mCachedCalendar = null;</span>
<a href="#l15.15"></a><span id="l15.15">                 }</span>
<a href="#l15.16"></a><span id="l15.16">             };</span>
<a href="#l15.17"></a><span id="l15.17"> </span>
<a href="#l15.18"></a><span id="l15.18">             this.mCachedCalendar.QueryInterface(Components.interfaces.calICalendarProvider)</span>
<a href="#l15.19"></a><span id="l15.19">                                 .deleteCalendar(this.mCachedCalendar, listener);</span>
<a href="#l15.20"></a><span id="l15.20">         }</span>
<a href="#l15.21"></a><span id="l15.21">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/src/calDefaultACLManager.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/src/calDefaultACLManager.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -69,17 +69,17 @@ calDefaultCalendarACLEntry.prototype = {</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">     hasAccessControl: false,</span>
<a href="#l16.6"></a><span id="l16.6">     userIsOwner: true,</span>
<a href="#l16.7"></a><span id="l16.7">     userCanAddItems: true,</span>
<a href="#l16.8"></a><span id="l16.8">     userCanDeleteItems: true,</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">     _getIdentities: function calDefaultCalendarACLEntry_getUserAddresses(aCount) {</span>
<a href="#l16.11"></a><span id="l16.11">         let identities = [];</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-        cal.calIterateEmailIdentities(function (id, ac) { identities.push(id); });</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+        cal.calIterateEmailIdentities(function(id, ac) { identities.push(id); });</span>
<a href="#l16.14"></a><span id="l16.14">         aCount.value = identities.length;</span>
<a href="#l16.15"></a><span id="l16.15">         return identities;</span>
<a href="#l16.16"></a><span id="l16.16">     },</span>
<a href="#l16.17"></a><span id="l16.17"> </span>
<a href="#l16.18"></a><span id="l16.18">     getUserAddresses: function calDefaultCalendarACLEntry_getUserAddresses(aCount) {</span>
<a href="#l16.19"></a><span id="l16.19">         let identities = this.getUserIdentities(aCount);</span>
<a href="#l16.20"></a><span id="l16.20">         let addresses = identities.map(id =&gt; id.email);</span>
<a href="#l16.21"></a><span id="l16.21">         return addresses;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/src/calEvent.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/src/calEvent.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -30,17 +30,17 @@ calEvent.prototype = {</span>
<a href="#l17.4"></a><span id="l17.4">     QueryInterface: XPCOMUtils.generateQI(calEventInterfaces),</span>
<a href="#l17.5"></a><span id="l17.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l17.6"></a><span id="l17.6">         classID: calEventClassID,</span>
<a href="#l17.7"></a><span id="l17.7">         contractID: &quot;@mozilla.org/calendar/event;1&quot;,</span>
<a href="#l17.8"></a><span id="l17.8">         classDescription: &quot;Calendar Event&quot;,</span>
<a href="#l17.9"></a><span id="l17.9">         interfaces: calEventInterfaces</span>
<a href="#l17.10"></a><span id="l17.10">     }),</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    cloneShallow: function (aNewParent) {</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+    cloneShallow: function(aNewParent) {</span>
<a href="#l17.14"></a><span id="l17.14">         let m = new calEvent();</span>
<a href="#l17.15"></a><span id="l17.15">         this.cloneItemBaseInto(m, aNewParent);</span>
<a href="#l17.16"></a><span id="l17.16">         return m;</span>
<a href="#l17.17"></a><span id="l17.17">     },</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19">     createProxy: function calEvent_createProxy(aRecurrenceId) {</span>
<a href="#l17.20"></a><span id="l17.20">         cal.ASSERT(!this.mIsProxy, &quot;Tried to create a proxy for an existing proxy!&quot;, true);</span>
<a href="#l17.21"></a><span id="l17.21"> </span>
<a href="#l17.22"></a><span id="l17.22" class="difflineat">@@ -54,17 +54,17 @@ calEvent.prototype = {</span>
<a href="#l17.23"></a><span id="l17.23">         m.startDate = aRecurrenceId;</span>
<a href="#l17.24"></a><span id="l17.24"> </span>
<a href="#l17.25"></a><span id="l17.25">         m.initializeProxy(this, aRecurrenceId);</span>
<a href="#l17.26"></a><span id="l17.26">         m.mDirty = false;</span>
<a href="#l17.27"></a><span id="l17.27"> </span>
<a href="#l17.28"></a><span id="l17.28">         return m;</span>
<a href="#l17.29"></a><span id="l17.29">     },</span>
<a href="#l17.30"></a><span id="l17.30"> </span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-    makeImmutable: function () {</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+    makeImmutable: function() {</span>
<a href="#l17.33"></a><span id="l17.33">         this.makeItemBaseImmutable();</span>
<a href="#l17.34"></a><span id="l17.34">     },</span>
<a href="#l17.35"></a><span id="l17.35"> </span>
<a href="#l17.36"></a><span id="l17.36">     get duration() {</span>
<a href="#l17.37"></a><span id="l17.37">         if (this.endDate &amp;&amp; this.startDate) {</span>
<a href="#l17.38"></a><span id="l17.38">             return this.endDate.subtractDate(this.startDate);</span>
<a href="#l17.39"></a><span id="l17.39">         } else {</span>
<a href="#l17.40"></a><span id="l17.40">             // Return a null-duration if we don't have an end date</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineat">@@ -146,17 +146,17 @@ calEvent.prototype = {</span>
<a href="#l17.42"></a><span id="l17.42">         this.mapPropsFromICS(event, this.icsEventPropMap);</span>
<a href="#l17.43"></a><span id="l17.43"> </span>
<a href="#l17.44"></a><span id="l17.44">         this.importUnpromotedProperties(event, this.eventPromotedProps);</span>
<a href="#l17.45"></a><span id="l17.45"> </span>
<a href="#l17.46"></a><span id="l17.46">         // Importing didn't really change anything</span>
<a href="#l17.47"></a><span id="l17.47">         this.mDirty = false;</span>
<a href="#l17.48"></a><span id="l17.48">     },</span>
<a href="#l17.49"></a><span id="l17.49"> </span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-    isPropertyPromoted: function (name) {</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineplus">+    isPropertyPromoted: function(name) {</span>
<a href="#l17.52"></a><span id="l17.52">         // avoid strict undefined property warning</span>
<a href="#l17.53"></a><span id="l17.53">         return (this.eventPromotedProps[name] || false);</span>
<a href="#l17.54"></a><span id="l17.54">     },</span>
<a href="#l17.55"></a><span id="l17.55"> </span>
<a href="#l17.56"></a><span id="l17.56">     set startDate(value) {</span>
<a href="#l17.57"></a><span id="l17.57">         this.modify();</span>
<a href="#l17.58"></a><span id="l17.58"> </span>
<a href="#l17.59"></a><span id="l17.59">         // We're about to change the start date of an item which probably</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/base/src/calItemBase.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/base/src/calItemBase.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -1110,24 +1110,24 @@ makeMemberAttr(calItemBase, &quot;mProperties</span>
<a href="#l18.4"></a><span id="l18.4">  *                        case asProperty is true.</span>
<a href="#l18.5"></a><span id="l18.5">  * @param dflt          The default value in case none is set</span>
<a href="#l18.6"></a><span id="l18.6">  * @param attr          The attribute name to be used</span>
<a href="#l18.7"></a><span id="l18.7">  * @param asProperty    If true, getProperty will be used to get/set the</span>
<a href="#l18.8"></a><span id="l18.8">  *                        member.</span>
<a href="#l18.9"></a><span id="l18.9">  */</span>
<a href="#l18.10"></a><span id="l18.10"> function makeMemberAttr(ctor, varname, dflt, attr, asProperty) {</span>
<a href="#l18.11"></a><span id="l18.11">     // XXX handle defaults!</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    var getter = function () {</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    var getter = function() {</span>
<a href="#l18.14"></a><span id="l18.14">         if (asProperty) {</span>
<a href="#l18.15"></a><span id="l18.15">             return this.getProperty(varname);</span>
<a href="#l18.16"></a><span id="l18.16">         } else {</span>
<a href="#l18.17"></a><span id="l18.17">             return (varname in this ? this[varname] : undefined);</span>
<a href="#l18.18"></a><span id="l18.18">         }</span>
<a href="#l18.19"></a><span id="l18.19">     };</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-    var setter = function (v) {</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineplus">+    var setter = function(v) {</span>
<a href="#l18.22"></a><span id="l18.22">         this.modify();</span>
<a href="#l18.23"></a><span id="l18.23">         if (asProperty) {</span>
<a href="#l18.24"></a><span id="l18.24">             return this.setProperty(varname, v);</span>
<a href="#l18.25"></a><span id="l18.25">         } else {</span>
<a href="#l18.26"></a><span id="l18.26">             return (this[varname] = v);</span>
<a href="#l18.27"></a><span id="l18.27">         }</span>
<a href="#l18.28"></a><span id="l18.28">     };</span>
<a href="#l18.29"></a><span id="l18.29">     ctor.prototype.__defineGetter__(attr, getter);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -547,29 +547,29 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l19.4"></a><span id="l19.4">             // check exceptions here</span>
<a href="#l19.5"></a><span id="l19.5">             for (let dateToRemove of cur_dates) {</span>
<a href="#l19.6"></a><span id="l19.6">                 let dateToRemoveKey = getRidKey(dateToRemove);</span>
<a href="#l19.7"></a><span id="l19.7">                 if (dateToRemove.isDate) {</span>
<a href="#l19.8"></a><span id="l19.8">                     // As decided in bug 734245, an EXDATE of type DATE shall also match a DTSTART of type DATE-TIME</span>
<a href="#l19.9"></a><span id="l19.9">                     let toRemove = [];</span>
<a href="#l19.10"></a><span id="l19.10">                     for (let occurenceKey in occurrenceMap) {</span>
<a href="#l19.11"></a><span id="l19.11">                         if (occurrenceMap[occurenceKey] &amp;&amp; occurenceKey.substring(0, 8) == dateToRemoveKey) {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-                            dates = dates.filter(function (d) { return d.id.compare(dateToRemove) != 0; });</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+                            dates = dates.filter(d =&gt; d.id.compare(dateToRemove) != 0);</span>
<a href="#l19.14"></a><span id="l19.14">                             toRemove.push(occurenceKey)</span>
<a href="#l19.15"></a><span id="l19.15">                         }</span>
<a href="#l19.16"></a><span id="l19.16">                     }</span>
<a href="#l19.17"></a><span id="l19.17">                     for (let i = 0; i &lt; toRemove.length; i++) {</span>
<a href="#l19.18"></a><span id="l19.18">                         delete occurrenceMap[toRemove[i]];</span>
<a href="#l19.19"></a><span id="l19.19">                     }</span>
<a href="#l19.20"></a><span id="l19.20">                 } else if (occurrenceMap[dateToRemoveKey]) {</span>
<a href="#l19.21"></a><span id="l19.21">                     // TODO PERF Theoretically we could use occurrence map</span>
<a href="#l19.22"></a><span id="l19.22">                     // to construct the array of occurrences. Right now I'm</span>
<a href="#l19.23"></a><span id="l19.23">                     // just using the occurrence map to skip the filter</span>
<a href="#l19.24"></a><span id="l19.24">                     // action if the occurrence isn't there anyway.</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-                    dates = dates.filter(function (d) { return d.id.compare(dateToRemove) != 0; });</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+                    dates = dates.filter(d =&gt; d.id.compare(dateToRemove) != 0);</span>
<a href="#l19.27"></a><span id="l19.27">                     delete occurrenceMap[dateToRemoveKey];</span>
<a href="#l19.28"></a><span id="l19.28">                 }</span>
<a href="#l19.29"></a><span id="l19.29">             }</span>
<a href="#l19.30"></a><span id="l19.30">         }</span>
<a href="#l19.31"></a><span id="l19.31"> </span>
<a href="#l19.32"></a><span id="l19.32">         // The list was already sorted above, chop anything over aMaxCount, if</span>
<a href="#l19.33"></a><span id="l19.33">         // specified.</span>
<a href="#l19.34"></a><span id="l19.34">         if (aMaxCount &amp;&amp; dates.length &gt; aMaxCount) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/base/src/calRelation.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/base/src/calRelation.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -102,25 +102,25 @@ calRelation.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">         let prop = cal.getIcsService().createIcalPropertyFromString(val);</span>
<a href="#l20.5"></a><span id="l20.5">         if (prop.propertyName != &quot;RELATED-TO&quot;) {</span>
<a href="#l20.6"></a><span id="l20.6">             throw Components.results.NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l20.7"></a><span id="l20.7">         }</span>
<a href="#l20.8"></a><span id="l20.8">         this.icalProperty = prop;</span>
<a href="#l20.9"></a><span id="l20.9">         return val;</span>
<a href="#l20.10"></a><span id="l20.10">     },</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    getParameter: function (aName) {</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    getParameter: function(aName) {</span>
<a href="#l20.14"></a><span id="l20.14">         return this.mProperties.getProperty(aName);</span>
<a href="#l20.15"></a><span id="l20.15">     },</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-    setParameter: function (aName, aValue) {</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+    setParameter: function(aName, aValue) {</span>
<a href="#l20.19"></a><span id="l20.19">         return this.mProperties.setProperty(aName, aValue);</span>
<a href="#l20.20"></a><span id="l20.20">     },</span>
<a href="#l20.21"></a><span id="l20.21"> </span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-    deleteParameter: function (aName) {</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+    deleteParameter: function(aName) {</span>
<a href="#l20.24"></a><span id="l20.24">         return this.mProperties.deleteProperty(aName);</span>
<a href="#l20.25"></a><span id="l20.25">     },</span>
<a href="#l20.26"></a><span id="l20.26"> </span>
<a href="#l20.27"></a><span id="l20.27">     clone: function cR_clone() {</span>
<a href="#l20.28"></a><span id="l20.28">         let newRelation = new calRelation();</span>
<a href="#l20.29"></a><span id="l20.29">         newRelation.mId = this.mId;</span>
<a href="#l20.30"></a><span id="l20.30">         newRelation.mType = this.mType;</span>
<a href="#l20.31"></a><span id="l20.31">         for (let [name, value] of this.mProperties) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/base/src/calTodo.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/base/src/calTodo.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -33,17 +33,17 @@ calTodo.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">     QueryInterface: XPCOMUtils.generateQI(calTodoInterfaces),</span>
<a href="#l21.5"></a><span id="l21.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l21.6"></a><span id="l21.6">         classID: calTodoClassID,</span>
<a href="#l21.7"></a><span id="l21.7">         contractID: &quot;@mozilla.org/calendar/todo;1&quot;,</span>
<a href="#l21.8"></a><span id="l21.8">         classDescription: &quot;Calendar Todo&quot;,</span>
<a href="#l21.9"></a><span id="l21.9">         interfaces: calTodoInterfaces,</span>
<a href="#l21.10"></a><span id="l21.10">     }),</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    cloneShallow: function (aNewParent) {</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+    cloneShallow: function(aNewParent) {</span>
<a href="#l21.14"></a><span id="l21.14">         let m = new calTodo();</span>
<a href="#l21.15"></a><span id="l21.15">         this.cloneItemBaseInto(m, aNewParent);</span>
<a href="#l21.16"></a><span id="l21.16">         return m;</span>
<a href="#l21.17"></a><span id="l21.17">     },</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19">     createProxy: function calTodo_createProxy(aRecurrenceId) {</span>
<a href="#l21.20"></a><span id="l21.20">         cal.ASSERT(!this.mIsProxy, &quot;Tried to create a proxy for an existing proxy!&quot;, true);</span>
<a href="#l21.21"></a><span id="l21.21"> </span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -60,17 +60,17 @@ calTodo.prototype = {</span>
<a href="#l21.23"></a><span id="l21.23">         m.entryDate = aRecurrenceId;</span>
<a href="#l21.24"></a><span id="l21.24"> </span>
<a href="#l21.25"></a><span id="l21.25">         m.initializeProxy(this, aRecurrenceId);</span>
<a href="#l21.26"></a><span id="l21.26">         m.mDirty = false;</span>
<a href="#l21.27"></a><span id="l21.27"> </span>
<a href="#l21.28"></a><span id="l21.28">         return m;</span>
<a href="#l21.29"></a><span id="l21.29">     },</span>
<a href="#l21.30"></a><span id="l21.30"> </span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-    makeImmutable: function () {</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+    makeImmutable: function() {</span>
<a href="#l21.33"></a><span id="l21.33">         this.makeItemBaseImmutable();</span>
<a href="#l21.34"></a><span id="l21.34">     },</span>
<a href="#l21.35"></a><span id="l21.35"> </span>
<a href="#l21.36"></a><span id="l21.36">     get isCompleted() {</span>
<a href="#l21.37"></a><span id="l21.37">         return this.completedDate != null ||</span>
<a href="#l21.38"></a><span id="l21.38">                this.percentComplete == 100 ||</span>
<a href="#l21.39"></a><span id="l21.39">                this.status == &quot;COMPLETED&quot;;</span>
<a href="#l21.40"></a><span id="l21.40">     },</span>
<a href="#l21.41"></a><span id="l21.41" class="difflineat">@@ -183,17 +183,17 @@ calTodo.prototype = {</span>
<a href="#l21.42"></a><span id="l21.42">         this.setItemBaseFromICS(todo);</span>
<a href="#l21.43"></a><span id="l21.43">         this.mapPropsFromICS(todo, this.icsEventPropMap);</span>
<a href="#l21.44"></a><span id="l21.44"> </span>
<a href="#l21.45"></a><span id="l21.45">         this.importUnpromotedProperties(todo, this.todoPromotedProps);</span>
<a href="#l21.46"></a><span id="l21.46">         // Importing didn't really change anything</span>
<a href="#l21.47"></a><span id="l21.47">         this.mDirty = false;</span>
<a href="#l21.48"></a><span id="l21.48">     },</span>
<a href="#l21.49"></a><span id="l21.49"> </span>
<a href="#l21.50"></a><span id="l21.50" class="difflineminus">-    isPropertyPromoted: function (name) {</span>
<a href="#l21.51"></a><span id="l21.51" class="difflineplus">+    isPropertyPromoted: function(name) {</span>
<a href="#l21.52"></a><span id="l21.52">         // avoid strict undefined property warning</span>
<a href="#l21.53"></a><span id="l21.53">         return (this.todoPromotedProps[name] || false);</span>
<a href="#l21.54"></a><span id="l21.54">     },</span>
<a href="#l21.55"></a><span id="l21.55"> </span>
<a href="#l21.56"></a><span id="l21.56">     set entryDate(value) {</span>
<a href="#l21.57"></a><span id="l21.57">         this.modify();</span>
<a href="#l21.58"></a><span id="l21.58"> </span>
<a href="#l21.59"></a><span id="l21.59">         // We're about to change the start date of an item which probably</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/itip/calItipEmailTransport.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/itip/calItipEmailTransport.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -65,17 +65,17 @@ calItipEmailTransport.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4">                 );</span>
<a href="#l22.5"></a><span id="l22.5">         } else {</span>
<a href="#l22.6"></a><span id="l22.6">             // Sunbird case: Call user's default mailer on system.</span>
<a href="#l22.7"></a><span id="l22.7">             throw Components.results.NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l22.8"></a><span id="l22.8">         }</span>
<a href="#l22.9"></a><span id="l22.9">         return false;</span>
<a href="#l22.10"></a><span id="l22.10">     },</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    _prepareItems: function (aItipItem) {</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+    _prepareItems: function(aItipItem) {</span>
<a href="#l22.14"></a><span id="l22.14">         let item = aItipItem.getItemList({})[0];</span>
<a href="#l22.15"></a><span id="l22.15"> </span>
<a href="#l22.16"></a><span id="l22.16">         // Get ourselves some default text - when we handle organizer properly</span>
<a href="#l22.17"></a><span id="l22.17">         // We'll need a way to configure the Common Name attribute and we should</span>
<a href="#l22.18"></a><span id="l22.18">         // use it here rather than the email address</span>
<a href="#l22.19"></a><span id="l22.19"> </span>
<a href="#l22.20"></a><span id="l22.20">         let summary = (item.getProperty(&quot;SUMMARY&quot;) || &quot;&quot;);</span>
<a href="#l22.21"></a><span id="l22.21">         let subject = &quot;&quot;;</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -255,24 +255,24 @@ calItipEmailTransport.prototype = {</span>
<a href="#l22.23"></a><span id="l22.23">                     Preferences.set(&quot;calendar.itip.compatSendMode&quot;, compatMode);</span>
<a href="#l22.24"></a><span id="l22.24">                 }</span>
<a href="#l22.25"></a><span id="l22.25">             }</span>
<a href="#l22.26"></a><span id="l22.26">             case (Components.interfaces.calIItipItem.AUTO): {</span>
<a href="#l22.27"></a><span id="l22.27">                 // don't show log message in case of falling through</span>
<a href="#l22.28"></a><span id="l22.28">                 if (aItem.autoResponse == Components.interfaces.calIItipItem.AUTO) {</span>
<a href="#l22.29"></a><span id="l22.29">                     cal.LOG(&quot;sendXpcomMail: Found AUTO autoResponse type.&quot;);</span>
<a href="#l22.30"></a><span id="l22.30">                 }</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-                let cbEmail = function (aVal, aInd, aArr) {</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+                let cbEmail = function(aVal, aInd, aArr) {</span>
<a href="#l22.33"></a><span id="l22.33">                     let email = cal.getAttendeeEmail(aVal, true);</span>
<a href="#l22.34"></a><span id="l22.34">                     if (!email.length) {</span>
<a href="#l22.35"></a><span id="l22.35">                         cal.LOG(&quot;Invalid recipient for email transport: &quot; + aVal.toString());</span>
<a href="#l22.36"></a><span id="l22.36">                     }</span>
<a href="#l22.37"></a><span id="l22.37">                     return email;</span>
<a href="#l22.38"></a><span id="l22.38">                 }</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineminus">-                let toMap = aToList.map(cbEmail).filter(function (aVal, aInd, aArr) {return (aVal.length)});</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineplus">+                let toMap = aToList.map(cbEmail).filter(function(aVal, aInd, aArr) {return (aVal.length)});</span>
<a href="#l22.41"></a><span id="l22.41">                 if (toMap.length &lt; aToList.length) {</span>
<a href="#l22.42"></a><span id="l22.42">                     // at least one invalid recipient, so we skip sending for this message</span>
<a href="#l22.43"></a><span id="l22.43">                     return false;</span>
<a href="#l22.44"></a><span id="l22.44">                 }</span>
<a href="#l22.45"></a><span id="l22.45">                 let toList = toMap.join(', ');</span>
<a href="#l22.46"></a><span id="l22.46">                 let composeUtils = Components.classes[&quot;@mozilla.org/messengercompose/computils;1&quot;]</span>
<a href="#l22.47"></a><span id="l22.47">                                              .createInstance(Components.interfaces.nsIMsgCompUtils);</span>
<a href="#l22.48"></a><span id="l22.48">                 let messageId = composeUtils.msgGenerateMessageId(identity);</span>
<a href="#l22.49"></a><span id="l22.49" class="difflineat">@@ -334,17 +334,17 @@ calItipEmailTransport.prototype = {</span>
<a href="#l22.50"></a><span id="l22.50">                 // Unknown autoResponse type</span>
<a href="#l22.51"></a><span id="l22.51">                 throw new Error(&quot;sendXpcomMail: &quot; +</span>
<a href="#l22.52"></a><span id="l22.52">                                 &quot;Unknown autoResponse type: &quot; +</span>
<a href="#l22.53"></a><span id="l22.53">                                 aItem.autoResponse);</span>
<a href="#l22.54"></a><span id="l22.54">         }</span>
<a href="#l22.55"></a><span id="l22.55">         return false;</span>
<a href="#l22.56"></a><span id="l22.56">     },</span>
<a href="#l22.57"></a><span id="l22.57"> </span>
<a href="#l22.58"></a><span id="l22.58" class="difflineminus">-    _createTempImipFile: function (compatMode, aToList, aSubject, aBody, aItem, aIdentity, aMessageId) {</span>
<a href="#l22.59"></a><span id="l22.59" class="difflineplus">+    _createTempImipFile: function(compatMode, aToList, aSubject, aBody, aItem, aIdentity, aMessageId) {</span>
<a href="#l22.60"></a><span id="l22.60">         try {</span>
<a href="#l22.61"></a><span id="l22.61">             let itemList = aItem.getItemList({});</span>
<a href="#l22.62"></a><span id="l22.62">             let serializer = Components.classes[&quot;@mozilla.org/calendar/ics-serializer;1&quot;]</span>
<a href="#l22.63"></a><span id="l22.63">                                        .createInstance(Components.interfaces.calIIcsSerializer);</span>
<a href="#l22.64"></a><span id="l22.64">             serializer.addItems(itemList, itemList.length);</span>
<a href="#l22.65"></a><span id="l22.65">             let methodProp = cal.getIcsService().createIcalProperty(&quot;METHOD&quot;);</span>
<a href="#l22.66"></a><span id="l22.66">             methodProp.value = aItem.responseMethod;</span>
<a href="#l22.67"></a><span id="l22.67">             serializer.addProperty(methodProp);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/lightning/components/calItipProtocolHandler.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/lightning/components/calItipProtocolHandler.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -38,26 +38,26 @@ ItipChannel.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4">     loadAttributes: null,</span>
<a href="#l23.5"></a><span id="l23.5">     contentLength: 0,</span>
<a href="#l23.6"></a><span id="l23.6">     owner: null,</span>
<a href="#l23.7"></a><span id="l23.7">     loadGroup: null,</span>
<a href="#l23.8"></a><span id="l23.8">     notificationCallbacks: null,</span>
<a href="#l23.9"></a><span id="l23.9">     securityInfo: null,</span>
<a href="#l23.10"></a><span id="l23.10"> </span>
<a href="#l23.11"></a><span id="l23.11">     open: NYI,</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    asyncOpen: function (observer, ctxt) {</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    asyncOpen: function(observer, ctxt) {</span>
<a href="#l23.14"></a><span id="l23.14">         observer.onStartRequest(this, ctxt);</span>
<a href="#l23.15"></a><span id="l23.15">     },</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-    asyncRead: function (listener, ctxt) {</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+    asyncRead: function(listener, ctxt) {</span>
<a href="#l23.18"></a><span id="l23.18">         return listener.onStartRequest(this, ctxt);</span>
<a href="#l23.19"></a><span id="l23.19">     },</span>
<a href="#l23.20"></a><span id="l23.20"> </span>
<a href="#l23.21"></a><span id="l23.21" class="difflineminus">-    isPending: function () { return true; },</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+    isPending: function() { return true; },</span>
<a href="#l23.23"></a><span id="l23.23">     status: Components.results.NS_OK,</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-    cancel: function (status) { this.status = status; },</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineplus">+    cancel: function(status) { this.status = status; },</span>
<a href="#l23.26"></a><span id="l23.26">     suspend: NYI,</span>
<a href="#l23.27"></a><span id="l23.27">     resume: NYI,</span>
<a href="#l23.28"></a><span id="l23.28"> };</span>
<a href="#l23.29"></a><span id="l23.29"> </span>
<a href="#l23.30"></a><span id="l23.30"> function ItipProtocolHandler() {</span>
<a href="#l23.31"></a><span id="l23.31">     this.wrappedJSObject = this;</span>
<a href="#l23.32"></a><span id="l23.32"> }</span>
<a href="#l23.33"></a><span id="l23.33"> var ItipProtocolHandlerClassID = Components.ID(&quot;{6e957006-b4ce-11d9-b053-001124736B74}&quot;);</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineat">@@ -70,25 +70,25 @@ ItipProtocolHandler.prototype = {</span>
<a href="#l23.35"></a><span id="l23.35">         contractID: &quot;@mozilla.org/network/protocol;1?name=&quot; + ITIP_HANDLER_PROTOCOL,</span>
<a href="#l23.36"></a><span id="l23.36">         classDescription: &quot;iTIP Protocol Handler&quot;,</span>
<a href="#l23.37"></a><span id="l23.37">         interfaces: ItipProtocolHandlerInterfaces</span>
<a href="#l23.38"></a><span id="l23.38">     }),</span>
<a href="#l23.39"></a><span id="l23.39"> </span>
<a href="#l23.40"></a><span id="l23.40">     protocolFlags: CI.nsIProtocolHandler.URI_NORELATIVE | CI.nsIProtocolHandler.URI_DANGEROUS_TO_LOAD,</span>
<a href="#l23.41"></a><span id="l23.41">     allowPort: () =&gt; false,</span>
<a href="#l23.42"></a><span id="l23.42">     isSecure: false,</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineminus">-    newURI: function (spec, charSet, baseURI) {</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineplus">+    newURI: function(spec, charSet, baseURI) {</span>
<a href="#l23.45"></a><span id="l23.45">         let cls = Components.classes[&quot;@mozilla.org/network/standard-url;1&quot;];</span>
<a href="#l23.46"></a><span id="l23.46">         let url = cls.createInstance(CI.nsIStandardURL);</span>
<a href="#l23.47"></a><span id="l23.47">         url.init(CI.nsIStandardURL.URLTYPE_STANDARD, 0, spec, charSet, baseURI);</span>
<a href="#l23.48"></a><span id="l23.48">         dump(&quot;Creating new URI for &quot; + spec + &quot;\n&quot;);</span>
<a href="#l23.49"></a><span id="l23.49">         return url.QueryInterface(CI.nsIURI);</span>
<a href="#l23.50"></a><span id="l23.50">     },</span>
<a href="#l23.51"></a><span id="l23.51"> </span>
<a href="#l23.52"></a><span id="l23.52" class="difflineminus">-    newChannel: function (URI) {</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineplus">+    newChannel: function(URI) {</span>
<a href="#l23.54"></a><span id="l23.54">         return this.newChannel2(URI, null);</span>
<a href="#l23.55"></a><span id="l23.55">     },</span>
<a href="#l23.56"></a><span id="l23.56"> </span>
<a href="#l23.57"></a><span id="l23.57">     newChannel2: function(URI, aLoadInfo) {</span>
<a href="#l23.58"></a><span id="l23.58">         dump(&quot;Creating new ItipChannel for &quot; + URI + &quot;\n&quot;);</span>
<a href="#l23.59"></a><span id="l23.59">         return new ItipChannel(URI);</span>
<a href="#l23.60"></a><span id="l23.60">     },</span>
<a href="#l23.61"></a><span id="l23.61"> };</span>
<a href="#l23.62"></a><span id="l23.62" class="difflineat">@@ -103,28 +103,28 @@ ItipContentHandler.prototype = {</span>
<a href="#l23.63"></a><span id="l23.63">     QueryInterface: XPCOMUtils.generateQI(ItipContentHandlerInterfaces),</span>
<a href="#l23.64"></a><span id="l23.64">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l23.65"></a><span id="l23.65">         classID: ItipContentHandlerClassID,</span>
<a href="#l23.66"></a><span id="l23.66">         contractID: &quot;@mozilla.org/uriloader/content-handler;1?type=&quot; + ITIP_HANDLER_MIMETYPE,</span>
<a href="#l23.67"></a><span id="l23.67">         classDescription: &quot;Lightning text/calendar content handler&quot;,</span>
<a href="#l23.68"></a><span id="l23.68">         interfaces: ItipContentHandlerInterfaces</span>
<a href="#l23.69"></a><span id="l23.69">     }),</span>
<a href="#l23.70"></a><span id="l23.70"> </span>
<a href="#l23.71"></a><span id="l23.71" class="difflineminus">-    handleContent: function (contentType, windowTarget, request) {</span>
<a href="#l23.72"></a><span id="l23.72" class="difflineplus">+    handleContent: function(contentType, windowTarget, request) {</span>
<a href="#l23.73"></a><span id="l23.73">         let channel = request.QueryInterface(CI.nsIChannel);</span>
<a href="#l23.74"></a><span id="l23.74">         let uri = channel.URI.spec;</span>
<a href="#l23.75"></a><span id="l23.75">         if (!uri.startsWith(ITIP_HANDLER_PROTOCOL + &quot;:&quot;)) {</span>
<a href="#l23.76"></a><span id="l23.76">             cal.ERROR(&quot;Unexpected iTIP uri: &quot; + uri + &quot;\n&quot;);</span>
<a href="#l23.77"></a><span id="l23.77">             throw NS_ERROR_WONT_HANDLE_CONTENT;</span>
<a href="#l23.78"></a><span id="l23.78">         }</span>
<a href="#l23.79"></a><span id="l23.79">         // moz-cal-handle-itip:///?</span>
<a href="#l23.80"></a><span id="l23.80">         let paramString = uri.substring(ITIP_HANDLER_PROTOCOL.length + 4);</span>
<a href="#l23.81"></a><span id="l23.81">         let paramArray = paramString.split(&quot;&amp;&quot;);</span>
<a href="#l23.82"></a><span id="l23.82">         let paramBlock = { };</span>
<a href="#l23.83"></a><span id="l23.83" class="difflineminus">-        paramArray.forEach(function (v) {</span>
<a href="#l23.84"></a><span id="l23.84" class="difflineplus">+        paramArray.forEach(function(v) {</span>
<a href="#l23.85"></a><span id="l23.85">             let parts = v.split(&quot;=&quot;);</span>
<a href="#l23.86"></a><span id="l23.86">             paramBlock[parts[0]] = unescape(unescape(parts[1]));</span>
<a href="#l23.87"></a><span id="l23.87">             });</span>
<a href="#l23.88"></a><span id="l23.88">         // dump(&quot;content-handler: have params &quot; + paramBlock.toSource() + &quot;\n&quot;);</span>
<a href="#l23.89"></a><span id="l23.89">         let event = cal.createEvent(paramBlock.data);</span>
<a href="#l23.90"></a><span id="l23.90">         dump(&quot;Processing iTIP event '&quot; + event.title + &quot;' from &quot; +</span>
<a href="#l23.91"></a><span id="l23.91">             event.organizer.id + &quot; (&quot; + event.id + &quot;)\n&quot;);</span>
<a href="#l23.92"></a><span id="l23.92">         let calMgr = cal.getCalendarManager();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/lightning/content/html-item-editing/react-code.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/lightning/content/html-item-editing/react-code.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -579,12 +579,12 @@ var TopComponent = React.createClass({</span>
<a href="#l24.4"></a><span id="l24.4">                     tabpanels,</span>
<a href="#l24.5"></a><span id="l24.5">                     urlDiv</span>
<a href="#l24.6"></a><span id="l24.6">                 )</span>
<a href="#l24.7"></a><span id="l24.7">             );</span>
<a href="#l24.8"></a><span id="l24.8">         }</span>
<a href="#l24.9"></a><span id="l24.9">     }</span>
<a href="#l24.10"></a><span id="l24.10"> });</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-window.onload = function () {</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+window.onload = function() {</span>
<a href="#l24.14"></a><span id="l24.14">     onLoad();</span>
<a href="#l24.15"></a><span id="l24.15"> }</span>
<a href="#l24.16"></a><span id="l24.16"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/lightning/content/imip-bar.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/lightning/content/imip-bar.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -245,17 +245,17 @@ var ltnImipBar = {</span>
<a href="#l25.4"></a><span id="l25.4">         // adjust button style if necessary</span>
<a href="#l25.5"></a><span id="l25.5">         ltnImipBar.conformButtonType();</span>
<a href="#l25.6"></a><span id="l25.6">         ltnImipBar.displayModifications();</span>
<a href="#l25.7"></a><span id="l25.7">     },</span>
<a href="#l25.8"></a><span id="l25.8"> </span>
<a href="#l25.9"></a><span id="l25.9">     /**</span>
<a href="#l25.10"></a><span id="l25.10">      * Displays changes in case of invitation updates in invitation overlay</span>
<a href="#l25.11"></a><span id="l25.11">      */</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    displayModifications: function () {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    displayModifications: function() {</span>
<a href="#l25.14"></a><span id="l25.14">         if (!ltnImipBar.msgOverlay || !msgWindow || !ltnImipBar.foundItems ||</span>
<a href="#l25.15"></a><span id="l25.15">             !ltnImipBar.foundItems[0] || !ltnImipBar.itipItem) {</span>
<a href="#l25.16"></a><span id="l25.16">             return;</span>
<a href="#l25.17"></a><span id="l25.17">         }</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19">         let msgOverlay = ltnImipBar.msgOverlay;</span>
<a href="#l25.20"></a><span id="l25.20">         let diff = cal.itip.compare(ltnImipBar.itipItem.getItemList({})[0], ltnImipBar.foundItems[0]);</span>
<a href="#l25.21"></a><span id="l25.21">         // displaying chnages is only needed if that is enabled, an item already exists and there are</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-panel.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -298,17 +298,17 @@ function updateItemTabState(aArg) {</span>
<a href="#l26.4"></a><span id="l26.4"> }</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6"> /**</span>
<a href="#l26.7"></a><span id="l26.7">  * When in a window, set Item-Menu label to Event or Task.</span>
<a href="#l26.8"></a><span id="l26.8">  *</span>
<a href="#l26.9"></a><span id="l26.9">  * @param {string} aLabel      The new name for the menu</span>
<a href="#l26.10"></a><span id="l26.10">  * @param {string} aAccessKey  The access key for the menu</span>
<a href="#l26.11"></a><span id="l26.11">  */</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-function initializeItemMenu (aLabel, aAccessKey) {</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+function initializeItemMenu(aLabel, aAccessKey) {</span>
<a href="#l26.14"></a><span id="l26.14">     let menuItem = document.getElementById(&quot;item-menu&quot;);</span>
<a href="#l26.15"></a><span id="l26.15">     menuItem.setAttribute(&quot;label&quot;, aLabel);</span>
<a href="#l26.16"></a><span id="l26.16">     menuItem.setAttribute(&quot;accesskey&quot;, aAccessKey);</span>
<a href="#l26.17"></a><span id="l26.17"> }</span>
<a href="#l26.18"></a><span id="l26.18"> </span>
<a href="#l26.19"></a><span id="l26.19"> /**</span>
<a href="#l26.20"></a><span id="l26.20">  * Handler for when dialog is accepted.</span>
<a href="#l26.21"></a><span id="l26.21">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -413,20 +413,20 @@ function ltnIntegrationNotification() {</span>
<a href="#l27.4"></a><span id="l27.4">     let notifyBox = document.getElementById(&quot;mail-notification-box&quot;) ||</span>
<a href="#l27.5"></a><span id="l27.5">                     document.getElementById(&quot;messagepanebox&quot;);</span>
<a href="#l27.6"></a><span id="l27.6"> </span>
<a href="#l27.7"></a><span id="l27.7">     let appBrand = cal.calGetString(&quot;brand&quot;, &quot;brandShortName&quot;, null, &quot;branding&quot;);</span>
<a href="#l27.8"></a><span id="l27.8">     let ltnBrand = ltnGetString(&quot;lightning&quot;, &quot;brandShortName&quot;);</span>
<a href="#l27.9"></a><span id="l27.9">     let label = ltnGetString(&quot;lightning&quot;, &quot;integrationLabel&quot;, [appBrand, ltnBrand]);</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11">     // call backs for doing/undoing Lightning removal</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    let cbRemoveLightning = function (aAddon) {</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    let cbRemoveLightning = function(aAddon) {</span>
<a href="#l27.14"></a><span id="l27.14">         aAddon.userDisabled = true;</span>
<a href="#l27.15"></a><span id="l27.15">     };</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-    let cbUndoRemoveLightning = function (aAddon) {</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+    let cbUndoRemoveLightning = function(aAddon) {</span>
<a href="#l27.18"></a><span id="l27.18">         aAddon.userDisabled = false;</span>
<a href="#l27.19"></a><span id="l27.19">     };</span>
<a href="#l27.20"></a><span id="l27.20"> </span>
<a href="#l27.21"></a><span id="l27.21">     // call backs for the undo opt-out bar</span>
<a href="#l27.22"></a><span id="l27.22">     let cbRestartNow = function(aNotificationBar, aButton) {</span>
<a href="#l27.23"></a><span id="l27.23">         Services.startup.quit(Components.interfaces.nsIAppStartup.eRestart |</span>
<a href="#l27.24"></a><span id="l27.24">                               Components.interfaces.nsIAppStartup.eForceQuit);</span>
<a href="#l27.25"></a><span id="l27.25">     };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/lightning/modules/ltnInvitationUtils.jsm</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/lightning/modules/ltnInvitationUtils.jsm</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -11,17 +11,17 @@ Components.utils.import(&quot;resource:///mod</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> this.EXPORTED_SYMBOLS = [&quot;ltn&quot;]; // even though it's defined in ltnUtils.jsm, import needs this</span>
<a href="#l28.6"></a><span id="l28.6"> ltn.invitation = {</span>
<a href="#l28.7"></a><span id="l28.7">     /**</span>
<a href="#l28.8"></a><span id="l28.8">      * Returns a header title for an ITIP item depending on the response method</span>
<a href="#l28.9"></a><span id="l28.9">      * @param  {calItipItem}     aItipItem  the itip item to check</span>
<a href="#l28.10"></a><span id="l28.10">      * @return {String}          the header title</span>
<a href="#l28.11"></a><span id="l28.11">      */</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    getItipHeader: function (aItipItem) {</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+    getItipHeader: function(aItipItem) {</span>
<a href="#l28.14"></a><span id="l28.14">         let header;</span>
<a href="#l28.15"></a><span id="l28.15"> </span>
<a href="#l28.16"></a><span id="l28.16">         if (aItipItem) {</span>
<a href="#l28.17"></a><span id="l28.17">             let item = aItipItem.getItemList({})[0];</span>
<a href="#l28.18"></a><span id="l28.18">             let summary = item.getProperty(&quot;SUMMARY&quot;) || &quot;&quot;;</span>
<a href="#l28.19"></a><span id="l28.19">             let organizer = item.organizer;</span>
<a href="#l28.20"></a><span id="l28.20">             let organizerString = (organizer) ?</span>
<a href="#l28.21"></a><span id="l28.21">               (organizer.commonName || organizer.toString()) : &quot;&quot;;</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -67,25 +67,25 @@ ltn.invitation = {</span>
<a href="#l28.23"></a><span id="l28.23"> </span>
<a href="#l28.24"></a><span id="l28.24">     /**</span>
<a href="#l28.25"></a><span id="l28.25">      * Returns the html representation of the event as a DOM document.</span>
<a href="#l28.26"></a><span id="l28.26">      *</span>
<a href="#l28.27"></a><span id="l28.27">      * @param  {calIItemBase} aEvent     The event to parse into html.</span>
<a href="#l28.28"></a><span id="l28.28">      * @param  {calItipItem}  aItipItem  The itip item, which containes aEvent.</span>
<a href="#l28.29"></a><span id="l28.29">      * @return {DOM}                     The html representation of aEvent.</span>
<a href="#l28.30"></a><span id="l28.30">      */</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-    createInvitationOverlay: function (aEvent, aItipItem) {</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+    createInvitationOverlay: function(aEvent, aItipItem) {</span>
<a href="#l28.33"></a><span id="l28.33">         // Creates HTML using the Node strings in the properties file</span>
<a href="#l28.34"></a><span id="l28.34">         let doc = cal.xml.parseFile(&quot;chrome://lightning/content/lightning-invitation.xhtml&quot;);</span>
<a href="#l28.35"></a><span id="l28.35">         let formatter = cal.getDateFormatter();</span>
<a href="#l28.36"></a><span id="l28.36"> </span>
<a href="#l28.37"></a><span id="l28.37">         let linkConverter = Components.classes[&quot;@mozilla.org/txttohtmlconv;1&quot;]</span>
<a href="#l28.38"></a><span id="l28.38">                                       .getService(Components.interfaces.mozITXTToHTMLConv);</span>
<a href="#l28.39"></a><span id="l28.39"> </span>
<a href="#l28.40"></a><span id="l28.40" class="difflineminus">-        let field = function (aField, aContentText, aConvert) {</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineplus">+        let field = function(aField, aContentText, aConvert) {</span>
<a href="#l28.42"></a><span id="l28.42">             let descr = doc.getElementById(&quot;imipHtml-&quot; + aField + &quot;-descr&quot;);</span>
<a href="#l28.43"></a><span id="l28.43">             if (descr) {</span>
<a href="#l28.44"></a><span id="l28.44">                 let labelText = ltn.getString(&quot;lightning&quot;, &quot;imipHtml.&quot; + aField, null);</span>
<a href="#l28.45"></a><span id="l28.45">                 descr.textContent = labelText;</span>
<a href="#l28.46"></a><span id="l28.46">             }</span>
<a href="#l28.47"></a><span id="l28.47"> </span>
<a href="#l28.48"></a><span id="l28.48">             if (aContentText) {</span>
<a href="#l28.49"></a><span id="l28.49">                 let content = doc.getElementById(&quot;imipHtml-&quot; + aField + &quot;-content&quot;);</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineat">@@ -125,17 +125,17 @@ ltn.invitation = {</span>
<a href="#l28.51"></a><span id="l28.51">                                                      endDate, startDate.isDate);</span>
<a href="#l28.52"></a><span id="l28.52">             if (repeatString) {</span>
<a href="#l28.53"></a><span id="l28.53">                 dateString = repeatString;</span>
<a href="#l28.54"></a><span id="l28.54">             }</span>
<a href="#l28.55"></a><span id="l28.55"> </span>
<a href="#l28.56"></a><span id="l28.56">             let formattedExDates = [];</span>
<a href="#l28.57"></a><span id="l28.57">             let modifiedOccurrences = [];</span>
<a href="#l28.58"></a><span id="l28.58"> </span>
<a href="#l28.59"></a><span id="l28.59" class="difflineminus">-            let dateComptor = function (a, b) {</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineplus">+            let dateComptor = function(a, b) {</span>
<a href="#l28.61"></a><span id="l28.61">                 return a.startDate.compare(b.startDate);</span>
<a href="#l28.62"></a><span id="l28.62">             }</span>
<a href="#l28.63"></a><span id="l28.63"> </span>
<a href="#l28.64"></a><span id="l28.64">             // Show removed instances</span>
<a href="#l28.65"></a><span id="l28.65">             for (let exc of aEvent.recurrenceInfo.getRecurrenceItems({})) {</span>
<a href="#l28.66"></a><span id="l28.66">                 if (exc instanceof Components.interfaces.calIRecurrenceDate) {</span>
<a href="#l28.67"></a><span id="l28.67">                     if (exc.isNegative) {</span>
<a href="#l28.68"></a><span id="l28.68">                         // This is an EXDATE</span>
<a href="#l28.69"></a><span id="l28.69" class="difflineat">@@ -160,17 +160,17 @@ ltn.invitation = {</span>
<a href="#l28.70"></a><span id="l28.70">                 // has changed.</span>
<a href="#l28.71"></a><span id="l28.71">                 if (exc.startDate.compare(exc.recurrenceId) != 0 ||</span>
<a href="#l28.72"></a><span id="l28.72">                     exc.duration.compare(aEvent.duration) != 0 ||</span>
<a href="#l28.73"></a><span id="l28.73">                     excLocation != aEvent.getProperty(&quot;LOCATION&quot;)) {</span>
<a href="#l28.74"></a><span id="l28.74">                     cal.binaryInsert(modifiedOccurrences, exc, dateComptor, true)</span>
<a href="#l28.75"></a><span id="l28.75">                 }</span>
<a href="#l28.76"></a><span id="l28.76">             }</span>
<a href="#l28.77"></a><span id="l28.77"> </span>
<a href="#l28.78"></a><span id="l28.78" class="difflineminus">-            let stringifyOcc = function (occ) {</span>
<a href="#l28.79"></a><span id="l28.79" class="difflineplus">+            let stringifyOcc = function(occ) {</span>
<a href="#l28.80"></a><span id="l28.80">                 let formattedExc = formatter.formatItemInterval(occ);</span>
<a href="#l28.81"></a><span id="l28.81">                 let occLocation = occ.getProperty(&quot;LOCATION&quot;);</span>
<a href="#l28.82"></a><span id="l28.82">                 if (occLocation != aEvent.getProperty(&quot;LOCATION&quot;)) {</span>
<a href="#l28.83"></a><span id="l28.83">                     let location = ltn.getString(&quot;lightning&quot;, &quot;imipHtml.newLocation&quot;, [occLocation]);</span>
<a href="#l28.84"></a><span id="l28.84">                     formattedExc += &quot; (&quot; + location + &quot;)&quot;;</span>
<a href="#l28.85"></a><span id="l28.85">                 }</span>
<a href="#l28.86"></a><span id="l28.86">                 return formattedExc;</span>
<a href="#l28.87"></a><span id="l28.87">             }</span>
<a href="#l28.88"></a><span id="l28.88" class="difflineat">@@ -205,17 +205,17 @@ ltn.invitation = {</span>
<a href="#l28.89"></a><span id="l28.89">         // ATTENDEE and ORGANIZER fields</span>
<a href="#l28.90"></a><span id="l28.90">         let attendees = aEvent.getAttendees({});</span>
<a href="#l28.91"></a><span id="l28.91">         let attendeeTemplate = doc.getElementById(&quot;attendee-template&quot;);</span>
<a href="#l28.92"></a><span id="l28.92">         let attendeeTable = doc.getElementById(&quot;attendee-table&quot;);</span>
<a href="#l28.93"></a><span id="l28.93">         let organizerTable = doc.getElementById(&quot;organizer-table&quot;);</span>
<a href="#l28.94"></a><span id="l28.94">         doc.getElementById(&quot;imipHtml-attendees-row&quot;).hidden = (attendees.length &lt; 1);</span>
<a href="#l28.95"></a><span id="l28.95">         doc.getElementById(&quot;imipHtml-organizer-row&quot;).hidden = !aEvent.organizer;</span>
<a href="#l28.96"></a><span id="l28.96"> </span>
<a href="#l28.97"></a><span id="l28.97" class="difflineminus">-        let setupAttendee = function (aAttendee) {</span>
<a href="#l28.98"></a><span id="l28.98" class="difflineplus">+        let setupAttendee = function(aAttendee) {</span>
<a href="#l28.99"></a><span id="l28.99">             let row = attendeeTemplate.cloneNode(true);</span>
<a href="#l28.100"></a><span id="l28.100">             row.removeAttribute(&quot;id&quot;);</span>
<a href="#l28.101"></a><span id="l28.101">             row.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l28.102"></a><span id="l28.102"> </span>
<a href="#l28.103"></a><span id="l28.103">             // resolve delegatees/delegators to display also the CN</span>
<a href="#l28.104"></a><span id="l28.104">             let del = cal.resolveDelegation(aAttendee, attendees);</span>
<a href="#l28.105"></a><span id="l28.105">             if (del.delegators != &quot;&quot;) {</span>
<a href="#l28.106"></a><span id="l28.106">                 del.delegators = &quot; &quot; + ltn.getString(&quot;lightning&quot;, &quot;imipHtml.attendeeDelegatedFrom&quot;,</span>
<a href="#l28.107"></a><span id="l28.107" class="difflineat">@@ -263,17 +263,17 @@ ltn.invitation = {</span>
<a href="#l28.108"></a><span id="l28.108"> </span>
<a href="#l28.109"></a><span id="l28.109">     /**</span>
<a href="#l28.110"></a><span id="l28.110">      * Expects and return a serialized DOM - use cal.xml.serializeDOM(aDOM)</span>
<a href="#l28.111"></a><span id="l28.111">      * @param  {String} aOldDoc    serialized DOM of the the old document</span>
<a href="#l28.112"></a><span id="l28.112">      * @param  {String} aNewDoc    serialized DOM of the the new document</span>
<a href="#l28.113"></a><span id="l28.113">      * @param  {String} aIgnoreId  attendee id to ignore, usually the organizer</span>
<a href="#l28.114"></a><span id="l28.114">      * @return {String}            updated serialized DOM of the new document</span>
<a href="#l28.115"></a><span id="l28.115">      */</span>
<a href="#l28.116"></a><span id="l28.116" class="difflineminus">-    compareInvitationOverlay: function (aOldDoc, aNewDoc, aIgnoreId) {</span>
<a href="#l28.117"></a><span id="l28.117" class="difflineplus">+    compareInvitationOverlay: function(aOldDoc, aNewDoc, aIgnoreId) {</span>
<a href="#l28.118"></a><span id="l28.118">         /**</span>
<a href="#l28.119"></a><span id="l28.119">          * Transforms text node content to formated child nodes. Decorations are defined in imip.css</span>
<a href="#l28.120"></a><span id="l28.120">          * @param {Node}    aToNode text node to change</span>
<a href="#l28.121"></a><span id="l28.121">          * @param {String}  aType   use 'newline' for the same, 'added' or 'removed' for decoration</span>
<a href="#l28.122"></a><span id="l28.122">          * @param {String}  aText   [optional]</span>
<a href="#l28.123"></a><span id="l28.123">          * @param {Boolean} aClear  [optional] for consecutive changes on the same node, set to false</span>
<a href="#l28.124"></a><span id="l28.124">          */</span>
<a href="#l28.125"></a><span id="l28.125">         function _content2Child(aToNode, aType, aText = '', aClear = true) {</span>
<a href="#l28.126"></a><span id="l28.126" class="difflineat">@@ -372,17 +372,17 @@ ltn.invitation = {</span>
<a href="#l28.127"></a><span id="l28.127">                             } else if ((att in attendees) &amp;&amp; notExcluded) {</span>
<a href="#l28.128"></a><span id="l28.128">                                 // highlight partstat, role or usertype changes</span>
<a href="#l28.129"></a><span id="l28.129">                                 let oldAtts = oldAttendees[att].parentNode</span>
<a href="#l28.130"></a><span id="l28.130">                                                                .getElementsByClassName(&quot;itip-icon&quot;)[0]</span>
<a href="#l28.131"></a><span id="l28.131">                                                                .attributes;</span>
<a href="#l28.132"></a><span id="l28.132">                                 let newAtts = attendees[att].parentNode</span>
<a href="#l28.133"></a><span id="l28.133">                                                             .getElementsByClassName(&quot;itip-icon&quot;)[0]</span>
<a href="#l28.134"></a><span id="l28.134">                                                             .attributes;</span>
<a href="#l28.135"></a><span id="l28.135" class="difflineminus">-                                let hasChanged = function (name) {</span>
<a href="#l28.136"></a><span id="l28.136" class="difflineplus">+                                let hasChanged = function(name) {</span>
<a href="#l28.137"></a><span id="l28.137">                                     return oldAtts.getNamedItem(name).value !=</span>
<a href="#l28.138"></a><span id="l28.138">                                            newAtts.getNamedItem(name).value;</span>
<a href="#l28.139"></a><span id="l28.139">                                 };</span>
<a href="#l28.140"></a><span id="l28.140">                                 if ([&quot;role&quot;, &quot;partstat&quot;, &quot;usertype&quot;].some(hasChanged)) {</span>
<a href="#l28.141"></a><span id="l28.141">                                     _content2Child(attendees[att], 'modified', att);</span>
<a href="#l28.142"></a><span id="l28.142">                                 }</span>
<a href="#l28.143"></a><span id="l28.143">                             }</span>
<a href="#l28.144"></a><span id="l28.144">                         }</span>
<a href="#l28.145"></a><span id="l28.145" class="difflineat">@@ -400,17 +400,17 @@ ltn.invitation = {</span>
<a href="#l28.146"></a><span id="l28.146">     },</span>
<a href="#l28.147"></a><span id="l28.147"> </span>
<a href="#l28.148"></a><span id="l28.148">     /**</span>
<a href="#l28.149"></a><span id="l28.149">      * Returns the header section for an invitation email.</span>
<a href="#l28.150"></a><span id="l28.150">      * @param   {String}         aMessageId  the message id to use for that email</span>
<a href="#l28.151"></a><span id="l28.151">      * @param   {nsIMsgIdentity} aIdentity   the identity to use for that email</span>
<a href="#l28.152"></a><span id="l28.152">      * @returns {String}                     the source code of the header section of the email</span>
<a href="#l28.153"></a><span id="l28.153">      */</span>
<a href="#l28.154"></a><span id="l28.154" class="difflineminus">-    getHeaderSection: function (aMessageId, aIdentity, aToList, aSubject) {</span>
<a href="#l28.155"></a><span id="l28.155" class="difflineplus">+    getHeaderSection: function(aMessageId, aIdentity, aToList, aSubject) {</span>
<a href="#l28.156"></a><span id="l28.156">         let from = !aIdentity.fullName.length ? aIdentity.email :</span>
<a href="#l28.157"></a><span id="l28.157">                                                 cal.validateRecipientList(aIdentity.fullName +</span>
<a href="#l28.158"></a><span id="l28.158">                                                                           &quot; &lt;&quot; + aIdentity.email + &quot;&gt;&quot;);</span>
<a href="#l28.159"></a><span id="l28.159">         let header = (&quot;MIME-version: 1.0\r\n&quot; +</span>
<a href="#l28.160"></a><span id="l28.160">                       (aIdentity.replyTo ? &quot;Return-path: &quot; +</span>
<a href="#l28.161"></a><span id="l28.161">                                            ltn.invitation.encodeMimeHeader(aIdentity.replyTo, true) +</span>
<a href="#l28.162"></a><span id="l28.162">                                            &quot;\r\n&quot; : &quot;&quot;) +</span>
<a href="#l28.163"></a><span id="l28.163">                       &quot;From: &quot; + ltn.invitation.encodeMimeHeader(from, true) + &quot;\r\n&quot; +</span>
<a href="#l28.164"></a><span id="l28.164" class="difflineat">@@ -439,17 +439,17 @@ ltn.invitation = {</span>
<a href="#l28.165"></a><span id="l28.165">     },</span>
<a href="#l28.166"></a><span id="l28.166"> </span>
<a href="#l28.167"></a><span id="l28.167">     /**</span>
<a href="#l28.168"></a><span id="l28.168">      * Returns a datetime string according to section 3.3 of RfC5322</span>
<a href="#l28.169"></a><span id="l28.169">      * @param  {Date}   [optional] Js Date object to format; if not provided current DateTime is used</span>
<a href="#l28.170"></a><span id="l28.170">      * @return {String}            Datetime string with a modified tz-offset notation compared to</span>
<a href="#l28.171"></a><span id="l28.171">      *                             Date.toString() like &quot;Fri, 20 Nov 2015 09:45:36 +0100&quot;</span>
<a href="#l28.172"></a><span id="l28.172">      */</span>
<a href="#l28.173"></a><span id="l28.173" class="difflineminus">-    getRfc5322FormattedDate: function (aDate = null) {</span>
<a href="#l28.174"></a><span id="l28.174" class="difflineplus">+    getRfc5322FormattedDate: function(aDate = null) {</span>
<a href="#l28.175"></a><span id="l28.175">         let date = aDate || new Date();</span>
<a href="#l28.176"></a><span id="l28.176">         let str = date.toString()</span>
<a href="#l28.177"></a><span id="l28.177">                       .replace(/^(\w{3}) (\w{3}) (\d{2}) (\d{4}) ([0-9:]{8}) GMT([+-])(\d{4}).*$/,</span>
<a href="#l28.178"></a><span id="l28.178">                                &quot;$1, $3 $2 $4 $5 $6$7&quot;);</span>
<a href="#l28.179"></a><span id="l28.179">         // according to section 3.3 of RfC5322, +0000 should be used for defined timezones using</span>
<a href="#l28.180"></a><span id="l28.180">         // UTC time, while -0000 should indicate a floating time instead</span>
<a href="#l28.181"></a><span id="l28.181">         let tz = cal.calendarDefaultTimezone();</span>
<a href="#l28.182"></a><span id="l28.182">         if (tz &amp;&amp; tz.isFloating) {</span>
<a href="#l28.183"></a><span id="l28.183" class="difflineat">@@ -458,41 +458,41 @@ ltn.invitation = {</span>
<a href="#l28.184"></a><span id="l28.184">         return str;</span>
<a href="#l28.185"></a><span id="l28.185">     },</span>
<a href="#l28.186"></a><span id="l28.186"> </span>
<a href="#l28.187"></a><span id="l28.187">     /**</span>
<a href="#l28.188"></a><span id="l28.188">      * Converts a given unicode text to utf-8 and normalizes line-breaks to \r\n</span>
<a href="#l28.189"></a><span id="l28.189">      * @param  {String} aText   a unicode encoded string</span>
<a href="#l28.190"></a><span id="l28.190">      * @return {String}         the converted uft-8 encoded string</span>
<a href="#l28.191"></a><span id="l28.191">      */</span>
<a href="#l28.192"></a><span id="l28.192" class="difflineminus">-    encodeUTF8: function (aText) {</span>
<a href="#l28.193"></a><span id="l28.193" class="difflineplus">+    encodeUTF8: function(aText) {</span>
<a href="#l28.194"></a><span id="l28.194">         return ltn.invitation.convertFromUnicode(&quot;UTF-8&quot;, aText).replace(/(\r\n)|\n/g, &quot;\r\n&quot;);</span>
<a href="#l28.195"></a><span id="l28.195">     },</span>
<a href="#l28.196"></a><span id="l28.196"> </span>
<a href="#l28.197"></a><span id="l28.197">     /**</span>
<a href="#l28.198"></a><span id="l28.198">      * Converts a given unicode text</span>
<a href="#l28.199"></a><span id="l28.199">      * @param  {String} aCharset   target character set</span>
<a href="#l28.200"></a><span id="l28.200">      * @param  {String} aSrc       unicode text to convert</span>
<a href="#l28.201"></a><span id="l28.201">      * @return {String}            the converted string</span>
<a href="#l28.202"></a><span id="l28.202">      */</span>
<a href="#l28.203"></a><span id="l28.203" class="difflineminus">-    convertFromUnicode: function (aCharset, aSrc) {</span>
<a href="#l28.204"></a><span id="l28.204" class="difflineplus">+    convertFromUnicode: function(aCharset, aSrc) {</span>
<a href="#l28.205"></a><span id="l28.205">         let unicodeConverter = Components.classes[&quot;@mozilla.org/intl/scriptableunicodeconverter&quot;]</span>
<a href="#l28.206"></a><span id="l28.206">                                          .createInstance(Components.interfaces.nsIScriptableUnicodeConverter);</span>
<a href="#l28.207"></a><span id="l28.207">         unicodeConverter.charset = aCharset;</span>
<a href="#l28.208"></a><span id="l28.208">         return unicodeConverter.ConvertFromUnicode(aSrc);</span>
<a href="#l28.209"></a><span id="l28.209">     },</span>
<a href="#l28.210"></a><span id="l28.210"> </span>
<a href="#l28.211"></a><span id="l28.211">     /**</span>
<a href="#l28.212"></a><span id="l28.212">      * Converts a header to a mime encoded header</span>
<a href="#l28.213"></a><span id="l28.213">      * @param  {String}  aHeader   a header to encode</span>
<a href="#l28.214"></a><span id="l28.214">      * @param  {boolean} aIsEmail  if enabled, only the CN but not the email address gets</span>
<a href="#l28.215"></a><span id="l28.215">      *                             converted - default value is false</span>
<a href="#l28.216"></a><span id="l28.216">      * @return {String}            the encoded string</span>
<a href="#l28.217"></a><span id="l28.217">      */</span>
<a href="#l28.218"></a><span id="l28.218" class="difflineminus">-    encodeMimeHeader: function (aHeader, aIsEmail = false) {</span>
<a href="#l28.219"></a><span id="l28.219" class="difflineplus">+    encodeMimeHeader: function(aHeader, aIsEmail = false) {</span>
<a href="#l28.220"></a><span id="l28.220">         let fieldNameLen = (aHeader.indexOf(&quot;: &quot;) + 2);</span>
<a href="#l28.221"></a><span id="l28.221">         return MailServices.mimeConverter</span>
<a href="#l28.222"></a><span id="l28.222">                            .encodeMimePartIIStr_UTF8(aHeader,</span>
<a href="#l28.223"></a><span id="l28.223">                                                      aIsEmail,</span>
<a href="#l28.224"></a><span id="l28.224">                                                      &quot;UTF-8&quot;,</span>
<a href="#l28.225"></a><span id="l28.225">                                                      fieldNameLen,</span>
<a href="#l28.226"></a><span id="l28.226">                                                      Components.interfaces</span>
<a href="#l28.227"></a><span id="l28.227">                                                                .nsIMimeConverter</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -9,17 +9,17 @@ Components.utils.import(&quot;resource://cale</span>
<a href="#l29.4"></a><span id="l29.4"> // calCompositeCalendar.js</span>
<a href="#l29.5"></a><span id="l29.5"> //</span>
<a href="#l29.6"></a><span id="l29.6"> </span>
<a href="#l29.7"></a><span id="l29.7"> /**</span>
<a href="#l29.8"></a><span id="l29.8">  * Calendar specific utility functions</span>
<a href="#l29.9"></a><span id="l29.9">  */</span>
<a href="#l29.10"></a><span id="l29.10"> var calIOperationListener = Components.interfaces.calIOperationListener;</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-function calCompositeCalendarObserverHelper (compCalendar) {</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+function calCompositeCalendarObserverHelper(compCalendar) {</span>
<a href="#l29.14"></a><span id="l29.14">     this.compCalendar = compCalendar;</span>
<a href="#l29.15"></a><span id="l29.15">     this.pendingLoads = {};</span>
<a href="#l29.16"></a><span id="l29.16"> }</span>
<a href="#l29.17"></a><span id="l29.17"> </span>
<a href="#l29.18"></a><span id="l29.18"> calCompositeCalendarObserverHelper.prototype = {</span>
<a href="#l29.19"></a><span id="l29.19">     pendingLoads: null,</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21">     QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIObserver]),</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineat">@@ -65,17 +65,17 @@ calCompositeCalendarObserverHelper.proto</span>
<a href="#l29.23"></a><span id="l29.23">         this.compCalendar.mObservers.notify(&quot;onPropertyChanged&quot;, arguments);</span>
<a href="#l29.24"></a><span id="l29.24">     },</span>
<a href="#l29.25"></a><span id="l29.25"> </span>
<a href="#l29.26"></a><span id="l29.26">     onPropertyDeleting: function(aCalendar, aName) {</span>
<a href="#l29.27"></a><span id="l29.27">         this.compCalendar.mObservers.notify(&quot;onPropertyDeleting&quot;, arguments);</span>
<a href="#l29.28"></a><span id="l29.28">     }</span>
<a href="#l29.29"></a><span id="l29.29"> };</span>
<a href="#l29.30"></a><span id="l29.30"> </span>
<a href="#l29.31"></a><span id="l29.31" class="difflineminus">-function calCompositeCalendar () {</span>
<a href="#l29.32"></a><span id="l29.32" class="difflineplus">+function calCompositeCalendar() {</span>
<a href="#l29.33"></a><span id="l29.33">     this.mObserverHelper = new calCompositeCalendarObserverHelper(this);</span>
<a href="#l29.34"></a><span id="l29.34">     this.wrappedJSObject = this;</span>
<a href="#l29.35"></a><span id="l29.35"> </span>
<a href="#l29.36"></a><span id="l29.36">     this.mCalendars = [];</span>
<a href="#l29.37"></a><span id="l29.37">     this.mCompositeObservers = new cal.ObserverBag(Components.interfaces.calICompositeObserver);</span>
<a href="#l29.38"></a><span id="l29.38">     this.mObservers = new cal.ObserverBag(Components.interfaces.calIObserver);</span>
<a href="#l29.39"></a><span id="l29.39">     this.mDefaultCalendar = null;</span>
<a href="#l29.40"></a><span id="l29.40">     this.mStatusObserver = null;</span>
<a href="#l29.41"></a><span id="l29.41" class="difflineat">@@ -123,39 +123,39 @@ calCompositeCalendar.prototype = {</span>
<a href="#l29.42"></a><span id="l29.42">     mActivePref: null,</span>
<a href="#l29.43"></a><span id="l29.43"> </span>
<a href="#l29.44"></a><span id="l29.44">     get enabledCalendars() {</span>
<a href="#l29.45"></a><span id="l29.45">       return this.mCalendars.filter(</span>
<a href="#l29.46"></a><span id="l29.46">         function(e) { return !e.getProperty(&quot;disabled&quot;); }</span>
<a href="#l29.47"></a><span id="l29.47">       );</span>
<a href="#l29.48"></a><span id="l29.48">     },</span>
<a href="#l29.49"></a><span id="l29.49"> </span>
<a href="#l29.50"></a><span id="l29.50" class="difflineminus">-    set prefPrefix (aPrefPrefix) {</span>
<a href="#l29.51"></a><span id="l29.51" class="difflineplus">+    set prefPrefix(aPrefPrefix) {</span>
<a href="#l29.52"></a><span id="l29.52">         if (this.mPrefPrefix) {</span>
<a href="#l29.53"></a><span id="l29.53">             for (let calendar of this.mCalendars) {</span>
<a href="#l29.54"></a><span id="l29.54">                 this.removeCalendar(calendar);</span>
<a href="#l29.55"></a><span id="l29.55">             }</span>
<a href="#l29.56"></a><span id="l29.56">         }</span>
<a href="#l29.57"></a><span id="l29.57">         this.mPrefPrefix = aPrefPrefix;</span>
<a href="#l29.58"></a><span id="l29.58">         this.mActivePref = aPrefPrefix + &quot;-in-composite&quot;;</span>
<a href="#l29.59"></a><span id="l29.59">         this.mDefaultPref = aPrefPrefix + &quot;-default&quot;;</span>
<a href="#l29.60"></a><span id="l29.60">         let mgr = cal.getCalendarManager();</span>
<a href="#l29.61"></a><span id="l29.61">         let cals = mgr.getCalendars({});</span>
<a href="#l29.62"></a><span id="l29.62"> </span>
<a href="#l29.63"></a><span id="l29.63" class="difflineminus">-        cals.forEach(function (c) {</span>
<a href="#l29.64"></a><span id="l29.64" class="difflineplus">+        cals.forEach(function(c) {</span>
<a href="#l29.65"></a><span id="l29.65">             if (c.getProperty(this.mActivePref)) {</span>
<a href="#l29.66"></a><span id="l29.66">                 this.addCalendar(c);</span>
<a href="#l29.67"></a><span id="l29.67">             }</span>
<a href="#l29.68"></a><span id="l29.68">             if (c.getProperty(this.mDefaultPref)) {</span>
<a href="#l29.69"></a><span id="l29.69">                 this.setDefaultCalendar(c, false);</span>
<a href="#l29.70"></a><span id="l29.70">             }</span>
<a href="#l29.71"></a><span id="l29.71">         }, this);</span>
<a href="#l29.72"></a><span id="l29.72">     },</span>
<a href="#l29.73"></a><span id="l29.73"> </span>
<a href="#l29.74"></a><span id="l29.74" class="difflineminus">-    get prefPrefix () {</span>
<a href="#l29.75"></a><span id="l29.75" class="difflineplus">+    get prefPrefix() {</span>
<a href="#l29.76"></a><span id="l29.76">         return this.mPrefPrefix;</span>
<a href="#l29.77"></a><span id="l29.77">     },</span>
<a href="#l29.78"></a><span id="l29.78"> </span>
<a href="#l29.79"></a><span id="l29.79">     addCalendar: function cCC_addCalendar(aCalendar) {</span>
<a href="#l29.80"></a><span id="l29.80">         cal.ASSERT(aCalendar.id, &quot;calendar does not have an id!&quot;, true);</span>
<a href="#l29.81"></a><span id="l29.81"> </span>
<a href="#l29.82"></a><span id="l29.82">         // check if the calendar already exists</span>
<a href="#l29.83"></a><span id="l29.83">         if (this.getCalendarById(aCalendar.id)) {</span>
<a href="#l29.84"></a><span id="l29.84" class="difflineat">@@ -204,17 +204,17 @@ calCompositeCalendar.prototype = {</span>
<a href="#l29.85"></a><span id="l29.85">         count.value = this.mCalendars.length;</span>
<a href="#l29.86"></a><span id="l29.86">         return this.mCalendars;</span>
<a href="#l29.87"></a><span id="l29.87">     },</span>
<a href="#l29.88"></a><span id="l29.88"> </span>
<a href="#l29.89"></a><span id="l29.89">     get defaultCalendar() {</span>
<a href="#l29.90"></a><span id="l29.90">         return this.mDefaultCalendar;</span>
<a href="#l29.91"></a><span id="l29.91">     },</span>
<a href="#l29.92"></a><span id="l29.92"> </span>
<a href="#l29.93"></a><span id="l29.93" class="difflineminus">-    setDefaultCalendar: function (calendar, usePref) {</span>
<a href="#l29.94"></a><span id="l29.94" class="difflineplus">+    setDefaultCalendar: function(calendar, usePref) {</span>
<a href="#l29.95"></a><span id="l29.95">         // Don't do anything if the passed calendar is the default calendar</span>
<a href="#l29.96"></a><span id="l29.96">         if (calendar &amp;&amp; this.mDefaultCalendar &amp;&amp; this.mDefaultCalendar.id == calendar.id) {</span>
<a href="#l29.97"></a><span id="l29.97">             return;</span>
<a href="#l29.98"></a><span id="l29.98">         }</span>
<a href="#l29.99"></a><span id="l29.99">         if (usePref &amp;&amp; this.mPrefPrefix) {</span>
<a href="#l29.100"></a><span id="l29.100">             if (this.mDefaultCalendar) {</span>
<a href="#l29.101"></a><span id="l29.101">                 this.mDefaultCalendar.deleteProperty(this.mDefaultPref);</span>
<a href="#l29.102"></a><span id="l29.102">             }</span>
<a href="#l29.103"></a><span id="l29.103" class="difflineat">@@ -296,26 +296,26 @@ calCompositeCalendar.prototype = {</span>
<a href="#l29.104"></a><span id="l29.104"> </span>
<a href="#l29.105"></a><span id="l29.105">     deleteProperty: function(aName) {</span>
<a href="#l29.106"></a><span id="l29.106">         return this.mDefaultCalendar.deleteProperty(aName);</span>
<a href="#l29.107"></a><span id="l29.107">     },</span>
<a href="#l29.108"></a><span id="l29.108"> </span>
<a href="#l29.109"></a><span id="l29.109">     // void addObserver( in calIObserver observer );</span>
<a href="#l29.110"></a><span id="l29.110">     mCompositeObservers: null,</span>
<a href="#l29.111"></a><span id="l29.111">     mObservers: null,</span>
<a href="#l29.112"></a><span id="l29.112" class="difflineminus">-    addObserver: function (aObserver) {</span>
<a href="#l29.113"></a><span id="l29.113" class="difflineplus">+    addObserver: function(aObserver) {</span>
<a href="#l29.114"></a><span id="l29.114">         let wrappedCObserver = cal.wrapInstance(aObserver, Components.interfaces.calICompositeObserver);</span>
<a href="#l29.115"></a><span id="l29.115">         if (wrappedCObserver) {</span>
<a href="#l29.116"></a><span id="l29.116">             this.mCompositeObservers.add(wrappedCObserver);</span>
<a href="#l29.117"></a><span id="l29.117">         }</span>
<a href="#l29.118"></a><span id="l29.118">         this.mObservers.add(aObserver);</span>
<a href="#l29.119"></a><span id="l29.119">     },</span>
<a href="#l29.120"></a><span id="l29.120"> </span>
<a href="#l29.121"></a><span id="l29.121">     // void removeObserver( in calIObserver observer );</span>
<a href="#l29.122"></a><span id="l29.122" class="difflineminus">-    removeObserver: function (aObserver) {</span>
<a href="#l29.123"></a><span id="l29.123" class="difflineplus">+    removeObserver: function(aObserver) {</span>
<a href="#l29.124"></a><span id="l29.124">         let wrappedCObserver = cal.wrapInstance(aObserver, Components.interfaces.calICompositeObserver);</span>
<a href="#l29.125"></a><span id="l29.125">         if (wrappedCObserver) {</span>
<a href="#l29.126"></a><span id="l29.126">             this.mCompositeObservers.remove(wrappedCObserver);</span>
<a href="#l29.127"></a><span id="l29.127">         }</span>
<a href="#l29.128"></a><span id="l29.128">         this.mObservers.remove(aObserver);</span>
<a href="#l29.129"></a><span id="l29.129">     },</span>
<a href="#l29.130"></a><span id="l29.130"> </span>
<a href="#l29.131"></a><span id="l29.131">     refresh: function cCC_refresh() {</span>
<a href="#l29.132"></a><span id="l29.132" class="difflineat">@@ -336,54 +336,54 @@ calCompositeCalendar.prototype = {</span>
<a href="#l29.133"></a><span id="l29.133">         // send out a single onLoad for this composite calendar,</span>
<a href="#l29.134"></a><span id="l29.134">         // although e.g. the ics provider will trigger another</span>
<a href="#l29.135"></a><span id="l29.135">         // onLoad asynchronously; we cannot rely on every calendar</span>
<a href="#l29.136"></a><span id="l29.136">         // sending an onLoad:</span>
<a href="#l29.137"></a><span id="l29.137">         this.mObservers.notify(&quot;onLoad&quot;, [this]);</span>
<a href="#l29.138"></a><span id="l29.138">     },</span>
<a href="#l29.139"></a><span id="l29.139"> </span>
<a href="#l29.140"></a><span id="l29.140">     // void modifyItem( in calIItemBase aNewItem, in calIItemBase aOldItem, in calIOperationListener aListener );</span>
<a href="#l29.141"></a><span id="l29.141" class="difflineminus">-    modifyItem: function (aNewItem, aOldItem, aListener) {</span>
<a href="#l29.142"></a><span id="l29.142" class="difflineplus">+    modifyItem: function(aNewItem, aOldItem, aListener) {</span>
<a href="#l29.143"></a><span id="l29.143">         cal.ASSERT(aNewItem.calendar, &quot;Composite can't modify item with null calendar&quot;, true);</span>
<a href="#l29.144"></a><span id="l29.144">         cal.ASSERT(aNewItem.calendar != this, &quot;Composite can't modify item with this calendar&quot;, true);</span>
<a href="#l29.145"></a><span id="l29.145"> </span>
<a href="#l29.146"></a><span id="l29.146">         return aNewItem.calendar.modifyItem(aNewItem, aOldItem, aListener);</span>
<a href="#l29.147"></a><span id="l29.147">     },</span>
<a href="#l29.148"></a><span id="l29.148"> </span>
<a href="#l29.149"></a><span id="l29.149">     // void deleteItem( in string id, in calIOperationListener aListener );</span>
<a href="#l29.150"></a><span id="l29.150" class="difflineminus">-    deleteItem: function (aItem, aListener) {</span>
<a href="#l29.151"></a><span id="l29.151" class="difflineplus">+    deleteItem: function(aItem, aListener) {</span>
<a href="#l29.152"></a><span id="l29.152">         cal.ASSERT(aItem.calendar, &quot;Composite can't delete item with null calendar&quot;, true);</span>
<a href="#l29.153"></a><span id="l29.153">         cal.ASSERT(aItem.calendar != this, &quot;Composite can't delete item with this calendar&quot;, true);</span>
<a href="#l29.154"></a><span id="l29.154"> </span>
<a href="#l29.155"></a><span id="l29.155">         return aItem.calendar.deleteItem(aItem, aListener);</span>
<a href="#l29.156"></a><span id="l29.156">     },</span>
<a href="#l29.157"></a><span id="l29.157"> </span>
<a href="#l29.158"></a><span id="l29.158">     // void addItem( in calIItemBase aItem, in calIOperationListener aListener );</span>
<a href="#l29.159"></a><span id="l29.159" class="difflineminus">-    addItem: function (aItem, aListener) {</span>
<a href="#l29.160"></a><span id="l29.160" class="difflineplus">+    addItem: function(aItem, aListener) {</span>
<a href="#l29.161"></a><span id="l29.161">         return this.mDefaultCalendar.addItem(aItem, aListener);</span>
<a href="#l29.162"></a><span id="l29.162">     },</span>
<a href="#l29.163"></a><span id="l29.163"> </span>
<a href="#l29.164"></a><span id="l29.164">     // void getItem( in string aId, in calIOperationListener aListener );</span>
<a href="#l29.165"></a><span id="l29.165" class="difflineminus">-    getItem: function (aId, aListener) {</span>
<a href="#l29.166"></a><span id="l29.166" class="difflineplus">+    getItem: function(aId, aListener) {</span>
<a href="#l29.167"></a><span id="l29.167">         let enabledCalendars = this.enabledCalendars;</span>
<a href="#l29.168"></a><span id="l29.168">         let cmpListener = new calCompositeGetListenerHelper(this, aListener);</span>
<a href="#l29.169"></a><span id="l29.169">         for (let calendar of enabledCalendars) {</span>
<a href="#l29.170"></a><span id="l29.170">             try {</span>
<a href="#l29.171"></a><span id="l29.171">                 cmpListener.opGroup.add(calendar.getItem(aId, cmpListener));</span>
<a href="#l29.172"></a><span id="l29.172">             } catch (exc) {</span>
<a href="#l29.173"></a><span id="l29.173">                 cal.ASSERT(false, exc);</span>
<a href="#l29.174"></a><span id="l29.174">             }</span>
<a href="#l29.175"></a><span id="l29.175">         }</span>
<a href="#l29.176"></a><span id="l29.176">         return cmpListener.opGroup;</span>
<a href="#l29.177"></a><span id="l29.177">     },</span>
<a href="#l29.178"></a><span id="l29.178"> </span>
<a href="#l29.179"></a><span id="l29.179">     // void getItems( in unsigned long aItemFilter, in unsigned long aCount,</span>
<a href="#l29.180"></a><span id="l29.180">     //                in calIDateTime aRangeStart, in calIDateTime aRangeEnd,</span>
<a href="#l29.181"></a><span id="l29.181">     //                in calIOperationListener aListener );</span>
<a href="#l29.182"></a><span id="l29.182" class="difflineminus">-    getItems: function (aItemFilter, aCount, aRangeStart, aRangeEnd, aListener) {</span>
<a href="#l29.183"></a><span id="l29.183" class="difflineplus">+    getItems: function(aItemFilter, aCount, aRangeStart, aRangeEnd, aListener) {</span>
<a href="#l29.184"></a><span id="l29.184">         // If there are no calendars, then we just call onOperationComplete</span>
<a href="#l29.185"></a><span id="l29.185">         let enabledCalendars = this.enabledCalendars;</span>
<a href="#l29.186"></a><span id="l29.186">         if (enabledCalendars.length == 0) {</span>
<a href="#l29.187"></a><span id="l29.187">             aListener.onOperationComplete(this,</span>
<a href="#l29.188"></a><span id="l29.188">                                           Components.results.NS_OK,</span>
<a href="#l29.189"></a><span id="l29.189">                                           calIOperationListener.GET,</span>
<a href="#l29.190"></a><span id="l29.190">                                           null,</span>
<a href="#l29.191"></a><span id="l29.191">                                           null);</span>
<a href="#l29.192"></a><span id="l29.192" class="difflineat">@@ -405,20 +405,20 @@ calCompositeCalendar.prototype = {</span>
<a href="#l29.193"></a><span id="l29.193">                                                           cmpListener));</span>
<a href="#l29.194"></a><span id="l29.194">             } catch (exc) {</span>
<a href="#l29.195"></a><span id="l29.195">                 cal.ASSERT(false, exc);</span>
<a href="#l29.196"></a><span id="l29.196">             }</span>
<a href="#l29.197"></a><span id="l29.197">         }</span>
<a href="#l29.198"></a><span id="l29.198">         return cmpListener.opGroup;</span>
<a href="#l29.199"></a><span id="l29.199">     },</span>
<a href="#l29.200"></a><span id="l29.200"> </span>
<a href="#l29.201"></a><span id="l29.201" class="difflineminus">-    startBatch: function () {</span>
<a href="#l29.202"></a><span id="l29.202" class="difflineplus">+    startBatch: function() {</span>
<a href="#l29.203"></a><span id="l29.203">         this.mCompositeObservers.notify(&quot;onStartBatch&quot;);</span>
<a href="#l29.204"></a><span id="l29.204">     },</span>
<a href="#l29.205"></a><span id="l29.205" class="difflineminus">-    endBatch: function () {</span>
<a href="#l29.206"></a><span id="l29.206" class="difflineplus">+    endBatch: function() {</span>
<a href="#l29.207"></a><span id="l29.207">         this.mCompositeObservers.notify(&quot;onEndBatch&quot;);</span>
<a href="#l29.208"></a><span id="l29.208">     },</span>
<a href="#l29.209"></a><span id="l29.209"> </span>
<a href="#l29.210"></a><span id="l29.210">     get statusDisplayed() {</span>
<a href="#l29.211"></a><span id="l29.211">         if (!this.mStatusObserver){</span>
<a href="#l29.212"></a><span id="l29.212">             return false;</span>
<a href="#l29.213"></a><span id="l29.213">         } else {</span>
<a href="#l29.214"></a><span id="l29.214">             return this.mStatusObserver.spinning != Components.interfaces.calIStatusObserver.NO_PROGRESS;</span>
<a href="#l29.215"></a><span id="l29.215" class="difflineat">@@ -466,17 +466,17 @@ calCompositeGetListenerHelper.prototype </span>
<a href="#l29.216"></a><span id="l29.216">                 }</span>
<a href="#l29.217"></a><span id="l29.217">             });</span>
<a href="#l29.218"></a><span id="l29.218">         }</span>
<a href="#l29.219"></a><span id="l29.219">         return this.mOpGroup;</span>
<a href="#l29.220"></a><span id="l29.220">     },</span>
<a href="#l29.221"></a><span id="l29.221"> </span>
<a href="#l29.222"></a><span id="l29.222">     QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIOperationListener]),</span>
<a href="#l29.223"></a><span id="l29.223"> </span>
<a href="#l29.224"></a><span id="l29.224" class="difflineminus">-    onOperationComplete: function (aCalendar, aStatus, aOperationType, aId, aDetail) {</span>
<a href="#l29.225"></a><span id="l29.225" class="difflineplus">+    onOperationComplete: function(aCalendar, aStatus, aOperationType, aId, aDetail) {</span>
<a href="#l29.226"></a><span id="l29.226">         if (!this.mRealListener) {</span>
<a href="#l29.227"></a><span id="l29.227">             // has been cancelled, ignore any providers firing on this...</span>
<a href="#l29.228"></a><span id="l29.228">             return;</span>
<a href="#l29.229"></a><span id="l29.229">         }</span>
<a href="#l29.230"></a><span id="l29.230">         if (this.mFinished) {</span>
<a href="#l29.231"></a><span id="l29.231">             dump(&quot;+++ calCompositeGetListenerHelper.onOperationComplete: called with mFinished == true!&quot;);</span>
<a href="#l29.232"></a><span id="l29.232">             return;</span>
<a href="#l29.233"></a><span id="l29.233">         }</span>
<a href="#l29.234"></a><span id="l29.234" class="difflineat">@@ -503,17 +503,17 @@ calCompositeGetListenerHelper.prototype </span>
<a href="#l29.235"></a><span id="l29.235">             this.mRealListener.onOperationComplete(this,</span>
<a href="#l29.236"></a><span id="l29.236">                                                    aStatus,</span>
<a href="#l29.237"></a><span id="l29.237">                                                    calIOperationListener.GET,</span>
<a href="#l29.238"></a><span id="l29.238">                                                    null,</span>
<a href="#l29.239"></a><span id="l29.239">                                                    null);</span>
<a href="#l29.240"></a><span id="l29.240">         }</span>
<a href="#l29.241"></a><span id="l29.241">     },</span>
<a href="#l29.242"></a><span id="l29.242"> </span>
<a href="#l29.243"></a><span id="l29.243" class="difflineminus">-    onGetResult: function (aCalendar, aStatus, aItemType, aDetail, aCount, aItems) {</span>
<a href="#l29.244"></a><span id="l29.244" class="difflineplus">+    onGetResult: function(aCalendar, aStatus, aItemType, aDetail, aCount, aItems) {</span>
<a href="#l29.245"></a><span id="l29.245">         if (!this.mRealListener) {</span>
<a href="#l29.246"></a><span id="l29.246">             // has been cancelled, ignore any providers firing on this...</span>
<a href="#l29.247"></a><span id="l29.247">             return;</span>
<a href="#l29.248"></a><span id="l29.248">         }</span>
<a href="#l29.249"></a><span id="l29.249">         if (this.mFinished) {</span>
<a href="#l29.250"></a><span id="l29.250">             dump(&quot;+++ calCompositeGetListenerHelper.onGetResult: called with mFinished == true!&quot;);</span>
<a href="#l29.251"></a><span id="l29.251">             return;</span>
<a href="#l29.252"></a><span id="l29.252">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -293,32 +293,32 @@ calICSCalendar.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4">                 // the views from being notified.</span>
<a href="#l30.5"></a><span id="l30.5">                 this_.mMemoryCalendar.addObserver(this_.mObserver);</span>
<a href="#l30.6"></a><span id="l30.6">                 this_.unlock();</span>
<a href="#l30.7"></a><span id="l30.7">             }</span>
<a href="#l30.8"></a><span id="l30.8">         };</span>
<a href="#l30.9"></a><span id="l30.9">         parser.parseString(str, null, listener);</span>
<a href="#l30.10"></a><span id="l30.10">     },</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    writeICS: function () {</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    writeICS: function() {</span>
<a href="#l30.14"></a><span id="l30.14">         cal.LOG(&quot;[calICSCalendar] Commencing write of ICS Calendar &quot; + this.name);</span>
<a href="#l30.15"></a><span id="l30.15">         this.lock();</span>
<a href="#l30.16"></a><span id="l30.16">         try {</span>
<a href="#l30.17"></a><span id="l30.17">             if (!this.mUri) {</span>
<a href="#l30.18"></a><span id="l30.18">                 throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l30.19"></a><span id="l30.19">             }</span>
<a href="#l30.20"></a><span id="l30.20">             // makeBackup will call doWriteICS</span>
<a href="#l30.21"></a><span id="l30.21">             this.makeBackup(this.doWriteICS);</span>
<a href="#l30.22"></a><span id="l30.22">         } catch (exc) {</span>
<a href="#l30.23"></a><span id="l30.23">             this.unlock(calIErrors.MODIFICATION_FAILED);</span>
<a href="#l30.24"></a><span id="l30.24">             throw exc;</span>
<a href="#l30.25"></a><span id="l30.25">         }</span>
<a href="#l30.26"></a><span id="l30.26">     },</span>
<a href="#l30.27"></a><span id="l30.27"> </span>
<a href="#l30.28"></a><span id="l30.28" class="difflineminus">-    doWriteICS: function () {</span>
<a href="#l30.29"></a><span id="l30.29" class="difflineplus">+    doWriteICS: function() {</span>
<a href="#l30.30"></a><span id="l30.30">         cal.LOG(&quot;[calICSCalendar] Writing ICS File &quot; + this.uri.spec);</span>
<a href="#l30.31"></a><span id="l30.31">         var savedthis = this;</span>
<a href="#l30.32"></a><span id="l30.32">         var listener =</span>
<a href="#l30.33"></a><span id="l30.33">         {</span>
<a href="#l30.34"></a><span id="l30.34">             serializer: null,</span>
<a href="#l30.35"></a><span id="l30.35">             QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIOperationListener]),</span>
<a href="#l30.36"></a><span id="l30.36">             onOperationComplete: function(aCalendar, aStatus, aOperationType, aId, aDetail) {</span>
<a href="#l30.37"></a><span id="l30.37">                 var inLastWindowClosingSurvivalArea = false;</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineat">@@ -454,45 +454,45 @@ calICSCalendar.prototype = {</span>
<a href="#l30.39"></a><span id="l30.39">                                    ctxt.unlock();</span>
<a href="#l30.40"></a><span id="l30.40">                                    Services.startup.exitLastWindowClosingSurvivalArea();</span>
<a href="#l30.41"></a><span id="l30.41">                                });</span>
<a href="#l30.42"></a><span id="l30.42">     },</span>
<a href="#l30.43"></a><span id="l30.43"> </span>
<a href="#l30.44"></a><span id="l30.44">     // Always use the queue, just to reduce the amount of places where</span>
<a href="#l30.45"></a><span id="l30.45">     // this.mMemoryCalendar.addItem() and friends are called. less</span>
<a href="#l30.46"></a><span id="l30.46">     // copied code.</span>
<a href="#l30.47"></a><span id="l30.47" class="difflineminus">-    addItem: function (aItem, aListener) {</span>
<a href="#l30.48"></a><span id="l30.48" class="difflineplus">+    addItem: function(aItem, aListener) {</span>
<a href="#l30.49"></a><span id="l30.49">         this.adoptItem(aItem.clone(), aListener);</span>
<a href="#l30.50"></a><span id="l30.50">     },</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineminus">-    adoptItem: function (aItem, aListener) {</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineplus">+    adoptItem: function(aItem, aListener) {</span>
<a href="#l30.53"></a><span id="l30.53">         if (this.readOnly) {</span>
<a href="#l30.54"></a><span id="l30.54">             throw calIErrors.CAL_IS_READONLY;</span>
<a href="#l30.55"></a><span id="l30.55">         }</span>
<a href="#l30.56"></a><span id="l30.56">         this.queue.push({ action: 'add', item: aItem, listener: aListener });</span>
<a href="#l30.57"></a><span id="l30.57">         this.processQueue();</span>
<a href="#l30.58"></a><span id="l30.58">     },</span>
<a href="#l30.59"></a><span id="l30.59"> </span>
<a href="#l30.60"></a><span id="l30.60" class="difflineminus">-    modifyItem: function (aNewItem, aOldItem, aListener) {</span>
<a href="#l30.61"></a><span id="l30.61" class="difflineplus">+    modifyItem: function(aNewItem, aOldItem, aListener) {</span>
<a href="#l30.62"></a><span id="l30.62">         if (this.readOnly) {</span>
<a href="#l30.63"></a><span id="l30.63">             throw calIErrors.CAL_IS_READONLY;</span>
<a href="#l30.64"></a><span id="l30.64">         }</span>
<a href="#l30.65"></a><span id="l30.65">         this.queue.push({ action: 'modify', oldItem: aOldItem,</span>
<a href="#l30.66"></a><span id="l30.66">                           newItem: aNewItem, listener: aListener});</span>
<a href="#l30.67"></a><span id="l30.67">         this.processQueue();</span>
<a href="#l30.68"></a><span id="l30.68">     },</span>
<a href="#l30.69"></a><span id="l30.69"> </span>
<a href="#l30.70"></a><span id="l30.70" class="difflineminus">-    deleteItem: function (aItem, aListener) {</span>
<a href="#l30.71"></a><span id="l30.71" class="difflineplus">+    deleteItem: function(aItem, aListener) {</span>
<a href="#l30.72"></a><span id="l30.72">         if (this.readOnly) {</span>
<a href="#l30.73"></a><span id="l30.73">             throw calIErrors.CAL_IS_READONLY;</span>
<a href="#l30.74"></a><span id="l30.74">         }</span>
<a href="#l30.75"></a><span id="l30.75">         this.queue.push({action: 'delete', item: aItem, listener: aListener});</span>
<a href="#l30.76"></a><span id="l30.76">         this.processQueue();</span>
<a href="#l30.77"></a><span id="l30.77">     },</span>
<a href="#l30.78"></a><span id="l30.78"> </span>
<a href="#l30.79"></a><span id="l30.79" class="difflineminus">-    getItem: function (aId, aListener) {</span>
<a href="#l30.80"></a><span id="l30.80" class="difflineplus">+    getItem: function(aId, aListener) {</span>
<a href="#l30.81"></a><span id="l30.81">         this.queue.push({action: 'get_item', id: aId, listener: aListener});</span>
<a href="#l30.82"></a><span id="l30.82">         this.processQueue();</span>
<a href="#l30.83"></a><span id="l30.83">     },</span>
<a href="#l30.84"></a><span id="l30.84"> </span>
<a href="#l30.85"></a><span id="l30.85">     getItems: function(aItemFilter, aCount, aRangeStart, aRangeEnd, aListener) {</span>
<a href="#l30.86"></a><span id="l30.86">         this.queue.push({action: 'get_items',</span>
<a href="#l30.87"></a><span id="l30.87">                          itemFilter: aItemFilter, count: aCount,</span>
<a href="#l30.88"></a><span id="l30.88">                          rangeStart: aRangeStart, rangeEnd: aRangeEnd,</span>
<a href="#l30.89"></a><span id="l30.89" class="difflineat">@@ -564,21 +564,21 @@ calICSCalendar.prototype = {</span>
<a href="#l30.90"></a><span id="l30.90">             this.writeICS();</span>
<a href="#l30.91"></a><span id="l30.91">         } else if (refreshAction) {</span>
<a href="#l30.92"></a><span id="l30.92">             cal.LOG(&quot;[calICSCalendar] Refreshing &quot; + this.name +</span>
<a href="#l30.93"></a><span id="l30.93">                     (refreshAction.forceRefresh ? &quot; (forced)&quot; : &quot;&quot;));</span>
<a href="#l30.94"></a><span id="l30.94">             this.doRefresh(refreshAction.forceRefresh);</span>
<a href="#l30.95"></a><span id="l30.95">         }</span>
<a href="#l30.96"></a><span id="l30.96">     },</span>
<a href="#l30.97"></a><span id="l30.97"> </span>
<a href="#l30.98"></a><span id="l30.98" class="difflineminus">-    lock: function () {</span>
<a href="#l30.99"></a><span id="l30.99" class="difflineplus">+    lock: function() {</span>
<a href="#l30.100"></a><span id="l30.100">         this.locked = true;</span>
<a href="#l30.101"></a><span id="l30.101">     },</span>
<a href="#l30.102"></a><span id="l30.102"> </span>
<a href="#l30.103"></a><span id="l30.103" class="difflineminus">-    unlock: function (errCode) {</span>
<a href="#l30.104"></a><span id="l30.104" class="difflineplus">+    unlock: function(errCode) {</span>
<a href="#l30.105"></a><span id="l30.105">         ASSERT(this.locked, &quot;unexpected!&quot;);</span>
<a href="#l30.106"></a><span id="l30.106"> </span>
<a href="#l30.107"></a><span id="l30.107">         this.mModificationActions.forEach(</span>
<a href="#l30.108"></a><span id="l30.108">             function(action) {</span>
<a href="#l30.109"></a><span id="l30.109">                 let args = action.opCompleteArgs;</span>
<a href="#l30.110"></a><span id="l30.110">                 ASSERT(args, &quot;missing onOperationComplete call!&quot;);</span>
<a href="#l30.111"></a><span id="l30.111">                 let listener = action.listener;</span>
<a href="#l30.112"></a><span id="l30.112">                 if (listener) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/providers/memory/calMemoryCalendar.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -99,23 +99,23 @@ calMemoryCalendar.prototype = {</span>
<a href="#l31.4"></a><span id="l31.4">         }</span>
<a href="#l31.5"></a><span id="l31.5">         return this.__proto__.__proto__.getProperty.apply(this, arguments);</span>
<a href="#l31.6"></a><span id="l31.6">     },</span>
<a href="#l31.7"></a><span id="l31.7"> </span>
<a href="#l31.8"></a><span id="l31.8">     // readonly attribute AUTF8String type;</span>
<a href="#l31.9"></a><span id="l31.9">     get type() { return &quot;memory&quot;; },</span>
<a href="#l31.10"></a><span id="l31.10"> </span>
<a href="#l31.11"></a><span id="l31.11">     // void addItem( in calIItemBase aItem, in calIOperationListener aListener );</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    addItem: function (aItem, aListener) {</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+    addItem: function(aItem, aListener) {</span>
<a href="#l31.14"></a><span id="l31.14">         var newItem = aItem.clone();</span>
<a href="#l31.15"></a><span id="l31.15">         return this.adoptItem(newItem, aListener);</span>
<a href="#l31.16"></a><span id="l31.16">     },</span>
<a href="#l31.17"></a><span id="l31.17"> </span>
<a href="#l31.18"></a><span id="l31.18">     // void adoptItem( in calIItemBase aItem, in calIOperationListener aListener );</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-    adoptItem: function (aItem, aListener) {</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineplus">+    adoptItem: function(aItem, aListener) {</span>
<a href="#l31.21"></a><span id="l31.21">         if (this.readOnly) {</span>
<a href="#l31.22"></a><span id="l31.22">             throw Components.interfaces.calIErrors.CAL_IS_READONLY;</span>
<a href="#l31.23"></a><span id="l31.23">         }</span>
<a href="#l31.24"></a><span id="l31.24">         if (aItem.id == null &amp;&amp; aItem.isMutable) {</span>
<a href="#l31.25"></a><span id="l31.25">             aItem.id = cal.getUUID();</span>
<a href="#l31.26"></a><span id="l31.26">         }</span>
<a href="#l31.27"></a><span id="l31.27"> </span>
<a href="#l31.28"></a><span id="l31.28">         if (aItem.id == null) {</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineat">@@ -163,17 +163,17 @@ calMemoryCalendar.prototype = {</span>
<a href="#l31.30"></a><span id="l31.30">                                      Components.interfaces.calIOperationListener.ADD,</span>
<a href="#l31.31"></a><span id="l31.31">                                      aItem.id,</span>
<a href="#l31.32"></a><span id="l31.32">                                      aItem);</span>
<a href="#l31.33"></a><span id="l31.33">         // notify observers</span>
<a href="#l31.34"></a><span id="l31.34">         this.mObservers.notify(&quot;onAddItem&quot;, [aItem]);</span>
<a href="#l31.35"></a><span id="l31.35">     },</span>
<a href="#l31.36"></a><span id="l31.36"> </span>
<a href="#l31.37"></a><span id="l31.37">     // void modifyItem( in calIItemBase aNewItem, in calIItemBase aOldItem, in calIOperationListener aListener );</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineminus">-    modifyItem: function (aNewItem, aOldItem, aListener) {</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineplus">+    modifyItem: function(aNewItem, aOldItem, aListener) {</span>
<a href="#l31.40"></a><span id="l31.40">         if (this.readOnly) {</span>
<a href="#l31.41"></a><span id="l31.41">             throw Components.interfaces.calIErrors.CAL_IS_READONLY;</span>
<a href="#l31.42"></a><span id="l31.42">         }</span>
<a href="#l31.43"></a><span id="l31.43">         if (!aNewItem) {</span>
<a href="#l31.44"></a><span id="l31.44">             throw Components.results.NS_ERROR_INVALID_ARG;</span>
<a href="#l31.45"></a><span id="l31.45">         }</span>
<a href="#l31.46"></a><span id="l31.46"> </span>
<a href="#l31.47"></a><span id="l31.47">         var this_ = this;</span>
<a href="#l31.48"></a><span id="l31.48" class="difflineat">@@ -252,17 +252,17 @@ calMemoryCalendar.prototype = {</span>
<a href="#l31.49"></a><span id="l31.49">                                      modifiedItem);</span>
<a href="#l31.50"></a><span id="l31.50"> </span>
<a href="#l31.51"></a><span id="l31.51">         // notify observers</span>
<a href="#l31.52"></a><span id="l31.52">         this.mObservers.notify(&quot;onModifyItem&quot;, [modifiedItem, aOldItem]);</span>
<a href="#l31.53"></a><span id="l31.53">         return null;</span>
<a href="#l31.54"></a><span id="l31.54">     },</span>
<a href="#l31.55"></a><span id="l31.55"> </span>
<a href="#l31.56"></a><span id="l31.56">     // void deleteItem( in calIItemBase aItem, in calIOperationListener aListener );</span>
<a href="#l31.57"></a><span id="l31.57" class="difflineminus">-    deleteItem: function (aItem, aListener) {</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineplus">+    deleteItem: function(aItem, aListener) {</span>
<a href="#l31.59"></a><span id="l31.59">         if (this.readOnly) {</span>
<a href="#l31.60"></a><span id="l31.60">             this.notifyOperationComplete(aListener,</span>
<a href="#l31.61"></a><span id="l31.61">                                          Components.interfaces.calIErrors.CAL_IS_READONLY,</span>
<a href="#l31.62"></a><span id="l31.62">                                          Components.interfaces.calIOperationListener.DELETE,</span>
<a href="#l31.63"></a><span id="l31.63">                                          aItem.id,</span>
<a href="#l31.64"></a><span id="l31.64">                                          &quot;Calendar is readonly&quot;);</span>
<a href="#l31.65"></a><span id="l31.65">             return;</span>
<a href="#l31.66"></a><span id="l31.66">         }</span>
<a href="#l31.67"></a><span id="l31.67" class="difflineat">@@ -299,17 +299,17 @@ calMemoryCalendar.prototype = {</span>
<a href="#l31.68"></a><span id="l31.68">                                      Components.interfaces.calIOperationListener.DELETE,</span>
<a href="#l31.69"></a><span id="l31.69">                                      aItem.id,</span>
<a href="#l31.70"></a><span id="l31.70">                                      aItem);</span>
<a href="#l31.71"></a><span id="l31.71">         // notify observers</span>
<a href="#l31.72"></a><span id="l31.72">         this.mObservers.notify(&quot;onDeleteItem&quot;, [oldItem]);</span>
<a href="#l31.73"></a><span id="l31.73">     },</span>
<a href="#l31.74"></a><span id="l31.74"> </span>
<a href="#l31.75"></a><span id="l31.75">     // void getItem( in string id, in calIOperationListener aListener );</span>
<a href="#l31.76"></a><span id="l31.76" class="difflineminus">-    getItem: function (aId, aListener) {</span>
<a href="#l31.77"></a><span id="l31.77" class="difflineplus">+    getItem: function(aId, aListener) {</span>
<a href="#l31.78"></a><span id="l31.78">         if (!aListener) {</span>
<a href="#l31.79"></a><span id="l31.79">             return;</span>
<a href="#l31.80"></a><span id="l31.80">         }</span>
<a href="#l31.81"></a><span id="l31.81"> </span>
<a href="#l31.82"></a><span id="l31.82">         if (aId == null || this.mItems[aId] == null) {</span>
<a href="#l31.83"></a><span id="l31.83">             // querying by id is a valid use case, even if no item is returned:</span>
<a href="#l31.84"></a><span id="l31.84">             this.notifyOperationComplete(aListener,</span>
<a href="#l31.85"></a><span id="l31.85">                                          Components.results.NS_OK,</span>
<a href="#l31.86"></a><span id="l31.86" class="difflineat">@@ -345,24 +345,24 @@ calMemoryCalendar.prototype = {</span>
<a href="#l31.87"></a><span id="l31.87">                                      Components.interfaces.calIOperationListener.GET,</span>
<a href="#l31.88"></a><span id="l31.88">                                      aId,</span>
<a href="#l31.89"></a><span id="l31.89">                                      null);</span>
<a href="#l31.90"></a><span id="l31.90">     },</span>
<a href="#l31.91"></a><span id="l31.91"> </span>
<a href="#l31.92"></a><span id="l31.92">     // void getItems( in unsigned long aItemFilter, in unsigned long aCount,</span>
<a href="#l31.93"></a><span id="l31.93">     //                in calIDateTime aRangeStart, in calIDateTime aRangeEnd,</span>
<a href="#l31.94"></a><span id="l31.94">     //                in calIOperationListener aListener );</span>
<a href="#l31.95"></a><span id="l31.95" class="difflineminus">-    getItems: function (aItemFilter, aCount,</span>
<a href="#l31.96"></a><span id="l31.96" class="difflineplus">+    getItems: function(aItemFilter, aCount,</span>
<a href="#l31.97"></a><span id="l31.97">                         aRangeStart, aRangeEnd, aListener) {</span>
<a href="#l31.98"></a><span id="l31.98">         let this_ = this;</span>
<a href="#l31.99"></a><span id="l31.99">         cal.postPone(function() {</span>
<a href="#l31.100"></a><span id="l31.100">                 this_.getItems_(aItemFilter, aCount, aRangeStart, aRangeEnd, aListener);</span>
<a href="#l31.101"></a><span id="l31.101">             });</span>
<a href="#l31.102"></a><span id="l31.102">     },</span>
<a href="#l31.103"></a><span id="l31.103" class="difflineminus">-    getItems_: function (aItemFilter, aCount,</span>
<a href="#l31.104"></a><span id="l31.104" class="difflineplus">+    getItems_: function(aItemFilter, aCount,</span>
<a href="#l31.105"></a><span id="l31.105">                          aRangeStart, aRangeEnd, aListener) {</span>
<a href="#l31.106"></a><span id="l31.106">         if (!aListener) {</span>
<a href="#l31.107"></a><span id="l31.107">             return;</span>
<a href="#l31.108"></a><span id="l31.108">         }</span>
<a href="#l31.109"></a><span id="l31.109"> </span>
<a href="#l31.110"></a><span id="l31.110">         const calICalendar = Components.interfaces.calICalendar;</span>
<a href="#l31.111"></a><span id="l31.111">         const calIRecurrenceInfo = Components.interfaces.calIRecurrenceInfo;</span>
<a href="#l31.112"></a><span id="l31.112"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -466,19 +466,19 @@ calStorageCalendar.prototype = {</span>
<a href="#l32.4"></a><span id="l32.4">     // void modifyItem( in calIItemBase aNewItem, in calIItemBase aOldItem, in calIOperationListener aListener );</span>
<a href="#l32.5"></a><span id="l32.5">     // Actually uses doModifyItem</span>
<a href="#l32.6"></a><span id="l32.6">     modifyItem: function cSC_modifyItem(aNewItem, aOldItem, aListener) {</span>
<a href="#l32.7"></a><span id="l32.7">         let this_ = this;</span>
<a href="#l32.8"></a><span id="l32.8"> </span>
<a href="#l32.9"></a><span id="l32.9">         // HACK Just modifying the item would clear the offline flag, we need to</span>
<a href="#l32.10"></a><span id="l32.10">         // retrieve the flag and pass it to the real modify function.</span>
<a href="#l32.11"></a><span id="l32.11">         let offlineJournalFlagListener = {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-            onGetResult: function (calendar, status, opType, id, detail) {</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+            onGetResult: function(calendar, status, opType, id, detail) {</span>
<a href="#l32.14"></a><span id="l32.14">             },</span>
<a href="#l32.15"></a><span id="l32.15" class="difflineminus">-            onOperationComplete: function (this_, status, opType, id, offlineFlag) {</span>
<a href="#l32.16"></a><span id="l32.16" class="difflineplus">+            onOperationComplete: function(this_, status, opType, id, offlineFlag) {</span>
<a href="#l32.17"></a><span id="l32.17">                 this_.doModifyItem(aNewItem, aOldItem, aListener, offlineFlag);</span>
<a href="#l32.18"></a><span id="l32.18">             }</span>
<a href="#l32.19"></a><span id="l32.19">         };</span>
<a href="#l32.20"></a><span id="l32.20">         this.getItemOfflineFlag(aOldItem, offlineJournalFlagListener);</span>
<a href="#l32.21"></a><span id="l32.21">     },</span>
<a href="#l32.22"></a><span id="l32.22"> </span>
<a href="#l32.23"></a><span id="l32.23">     doModifyItem: function cSC_doModifyItem(aNewItem, aOldItem, aListener, offlineFlag) {</span>
<a href="#l32.24"></a><span id="l32.24">         let oldOfflineFlag = offlineFlag;</span>
<a href="#l32.25"></a><span id="l32.25" class="difflineat">@@ -1019,17 +1019,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l32.26"></a><span id="l32.26">                                      aItem.id,</span>
<a href="#l32.27"></a><span id="l32.27">                                      aItem);</span>
<a href="#l32.28"></a><span id="l32.28">     },</span>
<a href="#l32.29"></a><span id="l32.29"> </span>
<a href="#l32.30"></a><span id="l32.30">     modifyOfflineItem: function(aItem, aListener) {</span>
<a href="#l32.31"></a><span id="l32.31">         let this_ = this;</span>
<a href="#l32.32"></a><span id="l32.32">         let opListener = {</span>
<a href="#l32.33"></a><span id="l32.33">             QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIOperationListener]),</span>
<a href="#l32.34"></a><span id="l32.34" class="difflineminus">-            onGetResult: function (calendar, status, itemType, detail, count, items) {</span>
<a href="#l32.35"></a><span id="l32.35" class="difflineplus">+            onGetResult: function(calendar, status, itemType, detail, count, items) {</span>
<a href="#l32.36"></a><span id="l32.36">             },</span>
<a href="#l32.37"></a><span id="l32.37">             onOperationComplete: function(calendar, status, opType, id, oldOfflineJournalFlag) {</span>
<a href="#l32.38"></a><span id="l32.38">                 let newOfflineJournalFlag = cICL.OFFLINE_FLAG_MODIFIED_RECORD;</span>
<a href="#l32.39"></a><span id="l32.39">                 if (oldOfflineJournalFlag == cICL.OFFLINE_FLAG_CREATED_RECORD || oldOfflineJournalFlag == cICL.OFFLINE_FLAG_DELETED_RECORD) {</span>
<a href="#l32.40"></a><span id="l32.40">                     // Do nothing since a flag of &quot;created&quot; or &quot;deleted&quot; exists</span>
<a href="#l32.41"></a><span id="l32.41">                 } else {</span>
<a href="#l32.42"></a><span id="l32.42">                     this_.setOfflineJournalFlag(aItem, newOfflineJournalFlag);</span>
<a href="#l32.43"></a><span id="l32.43">                 }</span>
<a href="#l32.44"></a><span id="l32.44" class="difflineat">@@ -1042,17 +1042,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l32.45"></a><span id="l32.45">         };</span>
<a href="#l32.46"></a><span id="l32.46">         this.getItemOfflineFlag(aItem, opListener);</span>
<a href="#l32.47"></a><span id="l32.47">     },</span>
<a href="#l32.48"></a><span id="l32.48"> </span>
<a href="#l32.49"></a><span id="l32.49">     deleteOfflineItem: function(aItem, aListener) {</span>
<a href="#l32.50"></a><span id="l32.50">         let this_ = this;</span>
<a href="#l32.51"></a><span id="l32.51">         let opListener = {</span>
<a href="#l32.52"></a><span id="l32.52">             QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIOperationListener]),</span>
<a href="#l32.53"></a><span id="l32.53" class="difflineminus">-            onGetResult: function (calendar, status, itemType, detail, count, items) {</span>
<a href="#l32.54"></a><span id="l32.54" class="difflineplus">+            onGetResult: function(calendar, status, itemType, detail, count, items) {</span>
<a href="#l32.55"></a><span id="l32.55"> </span>
<a href="#l32.56"></a><span id="l32.56">             },</span>
<a href="#l32.57"></a><span id="l32.57">             onOperationComplete: function(calendar, status, opType, id, oldOfflineJournalFlag) {</span>
<a href="#l32.58"></a><span id="l32.58">                 var newOfflineJournalFlag = cICL.OFFLINE_FLAG_DELETED_RECORD;</span>
<a href="#l32.59"></a><span id="l32.59">                 if (oldOfflineJournalFlag) {</span>
<a href="#l32.60"></a><span id="l32.60">                     // Delete item if flag is c</span>
<a href="#l32.61"></a><span id="l32.61">                     if (oldOfflineJournalFlag == cICL.OFFLINE_FLAG_CREATED_RECORD) {</span>
<a href="#l32.62"></a><span id="l32.62">                         this_.deleteItemById(aItem.id);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -15,17 +15,17 @@ var attendee = &quot;foo@bar.com&quot;;</span>
<a href="#l33.4"></a><span id="l33.4"> var url = &quot;http://mozilla.org&quot;;</span>
<a href="#l33.5"></a><span id="l33.5"> var tmp;</span>
<a href="#l33.6"></a><span id="l33.6"> </span>
<a href="#l33.7"></a><span id="l33.7"> var setupModule = function(module) {</span>
<a href="#l33.8"></a><span id="l33.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l33.9"></a><span id="l33.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l33.10"></a><span id="l33.10"> }</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-var testEventDialog = function () {</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+var testEventDialog = function() {</span>
<a href="#l33.14"></a><span id="l33.14">   // paths</span>
<a href="#l33.15"></a><span id="l33.15">   let monthView = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l33.16"></a><span id="l33.16">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span>
<a href="#l33.17"></a><span id="l33.17">     + 'id(&quot;calendarDisplayDeck&quot;)/id(&quot;calendar-view-box&quot;)/id(&quot;view-deck&quot;)/id(&quot;month-view&quot;)/';</span>
<a href="#l33.18"></a><span id="l33.18">   let miniMonth = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l33.19"></a><span id="l33.19">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l33.20"></a><span id="l33.20">     + 'id(&quot;minimonth-pane&quot;)/{&quot;align&quot;:&quot;center&quot;}/id(&quot;calMinimonthBox&quot;)/id(&quot;calMinimonth&quot;)/';</span>
<a href="#l33.21"></a><span id="l33.21">   let eventDialog = '/id(&quot;calendar-event-dialog&quot;)/id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/';</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testEventDialogModificationPrompt.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -34,17 +34,17 @@ var setupModule = function(module) {</span>
<a href="#l34.4"></a><span id="l34.4">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l34.5"></a><span id="l34.5"> </span>
<a href="#l34.6"></a><span id="l34.6">   let categories = prefs.preferences.getPref(&quot;calendar.categories.names&quot;, &quot;string&quot;).split(',');</span>
<a href="#l34.7"></a><span id="l34.7">   data[0].category = categories[0];</span>
<a href="#l34.8"></a><span id="l34.8">   data[1].category = categories[1];</span>
<a href="#l34.9"></a><span id="l34.9"> }</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11"> // Test that closing an event dialog with no changes does not prompt for save</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-var testEventDialogModificationPrompt = function () {</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+var testEventDialogModificationPrompt = function() {</span>
<a href="#l34.14"></a><span id="l34.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l34.15"></a><span id="l34.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l34.16"></a><span id="l34.16">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l34.17"></a><span id="l34.17"> </span>
<a href="#l34.18"></a><span id="l34.18">   // create new event</span>
<a href="#l34.19"></a><span id="l34.19">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l34.20"></a><span id="l34.20">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, 8)), 1, 1);</span>
<a href="#l34.21"></a><span id="l34.21">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testUTF8.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testUTF8.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -11,17 +11,17 @@ var sleep = 500;</span>
<a href="#l35.4"></a><span id="l35.4"> var UTF8string = &quot;õäöü&quot;;</span>
<a href="#l35.5"></a><span id="l35.5"> </span>
<a href="#l35.6"></a><span id="l35.6"> var setupModule = function(module) {</span>
<a href="#l35.7"></a><span id="l35.7">   controller = mozmill.getMail3PaneController();</span>
<a href="#l35.8"></a><span id="l35.8">   calUtils.createCalendar(controller, UTF8string);</span>
<a href="#l35.9"></a><span id="l35.9">   Preferences.set(&quot;calendar.categories.names&quot;, UTF8string);</span>
<a href="#l35.10"></a><span id="l35.10"> }</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-var testUTF8 = function () {</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+var testUTF8 = function() {</span>
<a href="#l35.14"></a><span id="l35.14">   let eventDialog = '/id(&quot;calendar-event-dialog&quot;)/id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/';</span>
<a href="#l35.15"></a><span id="l35.15"> </span>
<a href="#l35.16"></a><span id="l35.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l35.17"></a><span id="l35.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l35.18"></a><span id="l35.18"> </span>
<a href="#l35.19"></a><span id="l35.19">   // create new event</span>
<a href="#l35.20"></a><span id="l35.20">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l35.21"></a><span id="l35.21">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, 8)));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testAnnualRecurrence.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testAnnualRecurrence.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -9,17 +9,17 @@ var calendar = &quot;Mozmill&quot;;</span>
<a href="#l36.4"></a><span id="l36.4"> var startYear = 1950;</span>
<a href="#l36.5"></a><span id="l36.5"> var epoch = 1970;</span>
<a href="#l36.6"></a><span id="l36.6"> </span>
<a href="#l36.7"></a><span id="l36.7"> var setupModule = function(module) {</span>
<a href="#l36.8"></a><span id="l36.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l36.9"></a><span id="l36.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l36.10"></a><span id="l36.10"> }</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-var testAnnualRecurrence = function () {</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+var testAnnualRecurrence = function() {</span>
<a href="#l36.14"></a><span id="l36.14">   var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l36.15"></a><span id="l36.15"> </span>
<a href="#l36.16"></a><span id="l36.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l36.17"></a><span id="l36.17">   controller.sleep(sleep);</span>
<a href="#l36.18"></a><span id="l36.18"> </span>
<a href="#l36.19"></a><span id="l36.19">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l36.20"></a><span id="l36.20">   calUtils.goToDate(controller, startYear, 1, 1);</span>
<a href="#l36.21"></a><span id="l36.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testBiweeklyRecurrence.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -8,17 +8,17 @@ var sleep = 500;</span>
<a href="#l37.4"></a><span id="l37.4"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l37.5"></a><span id="l37.5"> var hour = 8;</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7"> var setupModule = function(module) {</span>
<a href="#l37.8"></a><span id="l37.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l37.9"></a><span id="l37.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l37.10"></a><span id="l37.10"> }</span>
<a href="#l37.11"></a><span id="l37.11"> </span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-var testBiweeklyRecurrence = function () {</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+var testBiweeklyRecurrence = function() {</span>
<a href="#l37.14"></a><span id="l37.14">   var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l37.15"></a><span id="l37.15"> </span>
<a href="#l37.16"></a><span id="l37.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l37.17"></a><span id="l37.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l37.18"></a><span id="l37.18">   calUtils.goToDate(controller, 2009, 1, 31);</span>
<a href="#l37.19"></a><span id="l37.19"> </span>
<a href="#l37.20"></a><span id="l37.20">   // create biweekly event</span>
<a href="#l37.21"></a><span id="l37.21">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testDailyRecurrence.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testDailyRecurrence.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -8,17 +8,17 @@ var sleep = 500;</span>
<a href="#l38.4"></a><span id="l38.4"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l38.5"></a><span id="l38.5"> var hour = 8;</span>
<a href="#l38.6"></a><span id="l38.6"> </span>
<a href="#l38.7"></a><span id="l38.7"> var setupModule = function(module) {</span>
<a href="#l38.8"></a><span id="l38.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l38.9"></a><span id="l38.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l38.10"></a><span id="l38.10"> }</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-var testDailyRecurrence = function () {</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+var testDailyRecurrence = function() {</span>
<a href="#l38.14"></a><span id="l38.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l38.15"></a><span id="l38.15"> </span>
<a href="#l38.16"></a><span id="l38.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l38.17"></a><span id="l38.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l38.18"></a><span id="l38.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l38.19"></a><span id="l38.19"> </span>
<a href="#l38.20"></a><span id="l38.20">   // create daily event</span>
<a href="#l38.21"></a><span id="l38.21">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testLastDayOfMonthRecurrence.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -9,17 +9,17 @@ var sleep = 500;</span>
<a href="#l39.4"></a><span id="l39.4"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l39.5"></a><span id="l39.5"> var hour = 8;</span>
<a href="#l39.6"></a><span id="l39.6"> </span>
<a href="#l39.7"></a><span id="l39.7"> var setupModule = function(module) {</span>
<a href="#l39.8"></a><span id="l39.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l39.9"></a><span id="l39.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l39.10"></a><span id="l39.10"> }</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-var testLastDayOfMonthRecurrence = function () {</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+var testLastDayOfMonthRecurrence = function() {</span>
<a href="#l39.14"></a><span id="l39.14">   var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l39.15"></a><span id="l39.15">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l39.16"></a><span id="l39.16">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l39.17"></a><span id="l39.17">   calUtils.goToDate(controller, 2008, 1, 31); // start with a leap year</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19">   // create monthly recurring event</span>
<a href="#l39.20"></a><span id="l39.20">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l39.21"></a><span id="l39.21">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, hour)), 1, 1);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyNRecurrence.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -11,17 +11,17 @@ var calendar = &quot;Mozmill&quot;;</span>
<a href="#l40.4"></a><span id="l40.4"> var hour = 8;</span>
<a href="#l40.5"></a><span id="l40.5"> var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l40.6"></a><span id="l40.6"> </span>
<a href="#l40.7"></a><span id="l40.7"> var setupModule = function(module) {</span>
<a href="#l40.8"></a><span id="l40.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l40.9"></a><span id="l40.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l40.10"></a><span id="l40.10"> }</span>
<a href="#l40.11"></a><span id="l40.11"> </span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-var testWeeklyNRecurrence = function () {</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+var testWeeklyNRecurrence = function() {</span>
<a href="#l40.14"></a><span id="l40.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l40.15"></a><span id="l40.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l40.16"></a><span id="l40.16">   calUtils.goToDate(controller, 2009, 1, 5);</span>
<a href="#l40.17"></a><span id="l40.17"> </span>
<a href="#l40.18"></a><span id="l40.18">   // create weekly recurring event</span>
<a href="#l40.19"></a><span id="l40.19">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l40.20"></a><span id="l40.20">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, hour)), 1, 1);</span>
<a href="#l40.21"></a><span id="l40.21">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyUntilRecurrence.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -13,17 +13,17 @@ var endDate = new Date(2009, 0, 26); // </span>
<a href="#l41.4"></a><span id="l41.4"> var hour = 8;</span>
<a href="#l41.5"></a><span id="l41.5"> var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l41.6"></a><span id="l41.6"> </span>
<a href="#l41.7"></a><span id="l41.7"> var setupModule = function(module) {</span>
<a href="#l41.8"></a><span id="l41.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l41.9"></a><span id="l41.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l41.10"></a><span id="l41.10"> }</span>
<a href="#l41.11"></a><span id="l41.11"> </span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-var testWeeklyUntilRecurrence = function () {</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+var testWeeklyUntilRecurrence = function() {</span>
<a href="#l41.14"></a><span id="l41.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l41.15"></a><span id="l41.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l41.16"></a><span id="l41.16">   calUtils.goToDate(controller, 2009, 1, 5); // Monday</span>
<a href="#l41.17"></a><span id="l41.17"> </span>
<a href="#l41.18"></a><span id="l41.18">   // create weekly recurring event</span>
<a href="#l41.19"></a><span id="l41.19">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l41.20"></a><span id="l41.20">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, hour)), 1, 1);</span>
<a href="#l41.21"></a><span id="l41.21">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrence/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -12,17 +12,17 @@ var hour = 8;</span>
<a href="#l42.4"></a><span id="l42.4"> var startDate = new Date(2009, 0, 6);</span>
<a href="#l42.5"></a><span id="l42.5"> var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l42.6"></a><span id="l42.6"> </span>
<a href="#l42.7"></a><span id="l42.7"> var setupModule = function(module) {</span>
<a href="#l42.8"></a><span id="l42.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l42.9"></a><span id="l42.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l42.10"></a><span id="l42.10"> }</span>
<a href="#l42.11"></a><span id="l42.11"> </span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-var testWeeklyWithExceptionRecurrence = function () {</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+var testWeeklyWithExceptionRecurrence = function() {</span>
<a href="#l42.14"></a><span id="l42.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l42.15"></a><span id="l42.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l42.16"></a><span id="l42.16">   calUtils.goToDate(controller, 2009, 1, 5);</span>
<a href="#l42.17"></a><span id="l42.17"> </span>
<a href="#l42.18"></a><span id="l42.18">   // create weekly recurring event</span>
<a href="#l42.19"></a><span id="l42.19">   controller.doubleClick(new elementslib.Lookup(controller.window.document,</span>
<a href="#l42.20"></a><span id="l42.20">     calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.CANVAS_BOX, undefined, 1, hour)), 1, 1);</span>
<a href="#l42.21"></a><span id="l42.21">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testAnnualRecurrence.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -9,17 +9,17 @@ var calendar = &quot;Mozmill&quot;;</span>
<a href="#l43.4"></a><span id="l43.4"> var startYear = 1950;</span>
<a href="#l43.5"></a><span id="l43.5"> var epoch = 1970;</span>
<a href="#l43.6"></a><span id="l43.6"> </span>
<a href="#l43.7"></a><span id="l43.7"> var setupModule = function(module) {</span>
<a href="#l43.8"></a><span id="l43.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l43.9"></a><span id="l43.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l43.10"></a><span id="l43.10"> }</span>
<a href="#l43.11"></a><span id="l43.11"> </span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-var testAnnualRecurrence = function () {</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+var testAnnualRecurrence = function() {</span>
<a href="#l43.14"></a><span id="l43.14">   var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l43.15"></a><span id="l43.15"> </span>
<a href="#l43.16"></a><span id="l43.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l43.17"></a><span id="l43.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l43.18"></a><span id="l43.18">   calUtils.goToDate(controller, startYear, 1, 1);</span>
<a href="#l43.19"></a><span id="l43.19"> </span>
<a href="#l43.20"></a><span id="l43.20">   // rotate view</span>
<a href="#l43.21"></a><span id="l43.21">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testBiweeklyRecurrence.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -8,17 +8,17 @@ var sleep = 500;</span>
<a href="#l44.4"></a><span id="l44.4"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l44.5"></a><span id="l44.5"> var hour = 8;</span>
<a href="#l44.6"></a><span id="l44.6"> </span>
<a href="#l44.7"></a><span id="l44.7"> var setupModule = function(module) {</span>
<a href="#l44.8"></a><span id="l44.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l44.9"></a><span id="l44.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l44.10"></a><span id="l44.10"> }</span>
<a href="#l44.11"></a><span id="l44.11"> </span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-var testBiweeklyRecurrence = function () {</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+var testBiweeklyRecurrence = function() {</span>
<a href="#l44.14"></a><span id="l44.14">   var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l44.15"></a><span id="l44.15"> </span>
<a href="#l44.16"></a><span id="l44.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l44.17"></a><span id="l44.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l44.18"></a><span id="l44.18">   calUtils.goToDate(controller, 2009, 1, 31);</span>
<a href="#l44.19"></a><span id="l44.19"> </span>
<a href="#l44.20"></a><span id="l44.20">   // rotate view</span>
<a href="#l44.21"></a><span id="l44.21">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testDailyRecurrence.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -8,17 +8,17 @@ var sleep = 500;</span>
<a href="#l45.4"></a><span id="l45.4"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l45.5"></a><span id="l45.5"> var hour = 8;</span>
<a href="#l45.6"></a><span id="l45.6"> </span>
<a href="#l45.7"></a><span id="l45.7"> var setupModule = function(module) {</span>
<a href="#l45.8"></a><span id="l45.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l45.9"></a><span id="l45.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l45.10"></a><span id="l45.10"> }</span>
<a href="#l45.11"></a><span id="l45.11"> </span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-var testDailyRecurrence = function () {</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+var testDailyRecurrence = function() {</span>
<a href="#l45.14"></a><span id="l45.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l45.15"></a><span id="l45.15"> </span>
<a href="#l45.16"></a><span id="l45.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l45.17"></a><span id="l45.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l45.18"></a><span id="l45.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l45.19"></a><span id="l45.19"> </span>
<a href="#l45.20"></a><span id="l45.20">   // rotate view</span>
<a href="#l45.21"></a><span id="l45.21">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testLastDayOfMonthRecurrence.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -9,17 +9,17 @@ var sleep = 500;</span>
<a href="#l46.4"></a><span id="l46.4"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l46.5"></a><span id="l46.5"> var hour = 8;</span>
<a href="#l46.6"></a><span id="l46.6"> </span>
<a href="#l46.7"></a><span id="l46.7"> var setupModule = function(module) {</span>
<a href="#l46.8"></a><span id="l46.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l46.9"></a><span id="l46.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l46.10"></a><span id="l46.10"> }</span>
<a href="#l46.11"></a><span id="l46.11"> </span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-var testLastDayOfMonthRecurrence = function () {</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+var testLastDayOfMonthRecurrence = function() {</span>
<a href="#l46.14"></a><span id="l46.14">   var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l46.15"></a><span id="l46.15">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l46.16"></a><span id="l46.16">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l46.17"></a><span id="l46.17">   calUtils.goToDate(controller, 2008, 1, 31); // start with a leap year</span>
<a href="#l46.18"></a><span id="l46.18"> </span>
<a href="#l46.19"></a><span id="l46.19">   // rotate view</span>
<a href="#l46.20"></a><span id="l46.20">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l46.21"></a><span id="l46.21">   controller.waitFor(function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyNRecurrence.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -11,17 +11,17 @@ var calendar = &quot;Mozmill&quot;;</span>
<a href="#l47.4"></a><span id="l47.4"> var hour = 8;</span>
<a href="#l47.5"></a><span id="l47.5"> var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l47.6"></a><span id="l47.6"> </span>
<a href="#l47.7"></a><span id="l47.7"> var setupModule = function(module) {</span>
<a href="#l47.8"></a><span id="l47.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l47.9"></a><span id="l47.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l47.10"></a><span id="l47.10"> }</span>
<a href="#l47.11"></a><span id="l47.11"> </span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-var testWeeklyNRecurrence = function () {</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineplus">+var testWeeklyNRecurrence = function() {</span>
<a href="#l47.14"></a><span id="l47.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l47.15"></a><span id="l47.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l47.16"></a><span id="l47.16">   calUtils.goToDate(controller, 2009, 1, 5);</span>
<a href="#l47.17"></a><span id="l47.17"> </span>
<a href="#l47.18"></a><span id="l47.18">   // rotate view</span>
<a href="#l47.19"></a><span id="l47.19">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l47.20"></a><span id="l47.20">   controller.waitFor(function() {</span>
<a href="#l47.21"></a><span id="l47.21">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyUntilRecurrence.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -12,17 +12,17 @@ var endDate = new Date(2009, 0, 26); // </span>
<a href="#l48.4"></a><span id="l48.4"> var hour = 8;</span>
<a href="#l48.5"></a><span id="l48.5"> var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l48.6"></a><span id="l48.6"> </span>
<a href="#l48.7"></a><span id="l48.7"> var setupModule = function(module) {</span>
<a href="#l48.8"></a><span id="l48.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l48.9"></a><span id="l48.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l48.10"></a><span id="l48.10"> }</span>
<a href="#l48.11"></a><span id="l48.11"> </span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-var testWeeklyUntilRecurrence = function () {</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+var testWeeklyUntilRecurrence = function() {</span>
<a href="#l48.14"></a><span id="l48.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l48.15"></a><span id="l48.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l48.16"></a><span id="l48.16">   calUtils.goToDate(controller, 2009, 1, 5); // Monday</span>
<a href="#l48.17"></a><span id="l48.17"> </span>
<a href="#l48.18"></a><span id="l48.18">   // rotate view</span>
<a href="#l48.19"></a><span id="l48.19">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l48.20"></a><span id="l48.20">   controller.waitFor(function() {</span>
<a href="#l48.21"></a><span id="l48.21">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/calendar/test/mozmill/recurrenceRotated/testWeeklyWithExceptionRecurrence.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -12,17 +12,17 @@ var hour = 8;</span>
<a href="#l49.4"></a><span id="l49.4"> var startDate = new Date(2009, 0, 6);</span>
<a href="#l49.5"></a><span id="l49.5"> var eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l49.6"></a><span id="l49.6"> </span>
<a href="#l49.7"></a><span id="l49.7"> var setupModule = function(module) {</span>
<a href="#l49.8"></a><span id="l49.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l49.9"></a><span id="l49.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l49.10"></a><span id="l49.10"> }</span>
<a href="#l49.11"></a><span id="l49.11"> </span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-var testWeeklyWithExceptionRecurrence = function () {</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+var testWeeklyWithExceptionRecurrence = function() {</span>
<a href="#l49.14"></a><span id="l49.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l49.15"></a><span id="l49.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l49.16"></a><span id="l49.16">   calUtils.goToDate(controller, 2009, 1, 5);</span>
<a href="#l49.17"></a><span id="l49.17"> </span>
<a href="#l49.18"></a><span id="l49.18">   // rotate view</span>
<a href="#l49.19"></a><span id="l49.19">   controller.mainMenu.click(&quot;#ltnViewRotated&quot;);</span>
<a href="#l49.20"></a><span id="l49.20">   controller.waitFor(function() {</span>
<a href="#l49.21"></a><span id="l49.21">     let view = (new elementslib.ID(controller.window.document, &quot;day-view&quot;)).getNode();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/calendar/test/mozmill/testBasicFunctionality.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/calendar/test/mozmill/testBasicFunctionality.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -10,17 +10,17 @@ var calUtils = require(&quot;shared-modules/c</span>
<a href="#l50.4"></a><span id="l50.4"> var TIMEOUT_MODAL_DIALOG = 30000;</span>
<a href="#l50.5"></a><span id="l50.5"> </span>
<a href="#l50.6"></a><span id="l50.6"> var modalDialog;</span>
<a href="#l50.7"></a><span id="l50.7"> var setupModule = function(module) {</span>
<a href="#l50.8"></a><span id="l50.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l50.9"></a><span id="l50.9">   modalDialog = collector.getModule('window-helpers');</span>
<a href="#l50.10"></a><span id="l50.10"> }</span>
<a href="#l50.11"></a><span id="l50.11"> </span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-var testSmokeTest = function () {</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+var testSmokeTest = function() {</span>
<a href="#l50.14"></a><span id="l50.14">   let dateService = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l50.15"></a><span id="l50.15">                               .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l50.16"></a><span id="l50.16">   let path = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/id(&quot;tabpanelcontainer&quot;)/'</span>
<a href="#l50.17"></a><span id="l50.17">     + 'id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/';</span>
<a href="#l50.18"></a><span id="l50.18"> </span>
<a href="#l50.19"></a><span id="l50.19">   // open calendar view</span>
<a href="#l50.20"></a><span id="l50.20">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l50.21"></a><span id="l50.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -30,17 +30,17 @@ var setupModule = function(module) {</span>
<a href="#l51.4"></a><span id="l51.4">   title = time;</span>
<a href="#l51.5"></a><span id="l51.5"> </span>
<a href="#l51.6"></a><span id="l51.6">   file = Services.dirsvc.get(&quot;TmpD&quot;, Components.interfaces.nsIFile);</span>
<a href="#l51.7"></a><span id="l51.7">   file.append(calendar + &quot;.ics&quot;);</span>
<a href="#l51.8"></a><span id="l51.8">   let fileURI = Services.io.newFileURI(file);</span>
<a href="#l51.9"></a><span id="l51.9">   uri = fileURI.prePath + fileURI.path;</span>
<a href="#l51.10"></a><span id="l51.10"> }</span>
<a href="#l51.11"></a><span id="l51.11"> </span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-var testLocalICS = function () {</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+var testLocalICS = function() {</span>
<a href="#l51.14"></a><span id="l51.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l51.15"></a><span id="l51.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l51.16"></a><span id="l51.16"> </span>
<a href="#l51.17"></a><span id="l51.17">   modalDialog.plan_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, handleNewCalendarWizard);</span>
<a href="#l51.18"></a><span id="l51.18">   controller.mainMenu.click(&quot;#ltnNewCalendar&quot;);</span>
<a href="#l51.19"></a><span id="l51.19">   modalDialog.wait_for_modal_dialog(&quot;Calendar:NewCalendarWizard&quot;, TIMEOUT_MODAL_DIALOG);</span>
<a href="#l51.20"></a><span id="l51.20"> </span>
<a href="#l51.21"></a><span id="l51.21">   // create new event</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -14,17 +14,17 @@ var calUtils = require(&quot;./shared-modules</span>
<a href="#l52.4"></a><span id="l52.4"> </span>
<a href="#l52.5"></a><span id="l52.5"> Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l52.6"></a><span id="l52.6"> </span>
<a href="#l52.7"></a><span id="l52.7"> var setupModule = function(module) {</span>
<a href="#l52.8"></a><span id="l52.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l52.9"></a><span id="l52.9">   calUtils.createCalendar(controller, MOZMILL_CALENDAR);</span>
<a href="#l52.10"></a><span id="l52.10"> }</span>
<a href="#l52.11"></a><span id="l52.11"> </span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-var testTodayPane = function () {</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+var testTodayPane = function() {</span>
<a href="#l52.14"></a><span id="l52.14">   // paths</span>
<a href="#l52.15"></a><span id="l52.15">   let panels = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l52.16"></a><span id="l52.16">     + 'id(&quot;tabpanelcontainer&quot;)/';</span>
<a href="#l52.17"></a><span id="l52.17">   let miniMonth = panels + 'id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l52.18"></a><span id="l52.18">     + 'id(&quot;minimonth-pane&quot;)/';</span>
<a href="#l52.19"></a><span id="l52.19">   let dayView = panels + 'id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;calendarDisplayDeck&quot;)/'</span>
<a href="#l52.20"></a><span id="l52.20">     + 'id(&quot;calendar-view-box&quot;)/id(&quot;view-deck&quot;)/id(&quot;day-view&quot;)/';</span>
<a href="#l52.21"></a><span id="l52.21">   let dayPath = dayView + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;labelbox&quot;})/'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test1.js</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test1.js</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -7,11 +7,11 @@ var timezoneUtils = require(&quot;../shared-m</span>
<a href="#l53.4"></a><span id="l53.4"> </span>
<a href="#l53.5"></a><span id="l53.5"> var calendar = &quot;Mozmill&quot;;</span>
<a href="#l53.6"></a><span id="l53.6"> </span>
<a href="#l53.7"></a><span id="l53.7"> var setupModule = function(module) {</span>
<a href="#l53.8"></a><span id="l53.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l53.9"></a><span id="l53.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l53.10"></a><span id="l53.10"> }</span>
<a href="#l53.11"></a><span id="l53.11"> </span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-var testTimezones1_SetGMT = function () {</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+var testTimezones1_SetGMT = function() {</span>
<a href="#l53.14"></a><span id="l53.14">   timezoneUtils.switchAppTimezone(&quot;Europe/London&quot;);</span>
<a href="#l53.15"></a><span id="l53.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test10.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test10.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -22,17 +22,17 @@ var times = [[[18, 30], [19, 30], [20, 3</span>
<a href="#l54.4"></a><span id="l54.4">              [[17, 30], [19, 30], [20, 30], [20, 30], [22, 30], [22, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l54.5"></a><span id="l54.5">              [[17, 30], [19, 30], [20, 30], [20, 30], [22, 30], [23, 30], [0, 30, +1], [1, 30, +1]],</span>
<a href="#l54.6"></a><span id="l54.6">              [[18, 30], [19, 30], [20, 30], [21, 30], [22, 30], [23, 30], [0, 30, +1], [1, 30, +1]]]</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8"> var setupModule = function(module) {</span>
<a href="#l54.9"></a><span id="l54.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l54.10"></a><span id="l54.10"> }</span>
<a href="#l54.11"></a><span id="l54.11"> </span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-var testTimezones10_checkAdelaide = function () {</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+var testTimezones10_checkAdelaide = function() {</span>
<a href="#l54.14"></a><span id="l54.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l54.15"></a><span id="l54.15"> </span>
<a href="#l54.16"></a><span id="l54.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l54.17"></a><span id="l54.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l54.18"></a><span id="l54.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l54.19"></a><span id="l54.19"> </span>
<a href="#l54.20"></a><span id="l54.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l54.21"></a><span id="l54.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test2.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test2.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -12,17 +12,17 @@ var timezones = [&quot;America/St_Johns&quot;, &quot;Am</span>
<a href="#l55.4"></a><span id="l55.4">                  &quot;America/Argentina/Buenos_Aires&quot;, &quot;Europe/Paris&quot;, &quot;Asia/Kathmandu&quot;, &quot;Australia/Adelaide&quot;];</span>
<a href="#l55.5"></a><span id="l55.5"> var times = [[4, 30], [4, 30], [3, 0], [3, 0], [9, 0], [14, 0], [19, 45], [1, 30]];</span>
<a href="#l55.6"></a><span id="l55.6"> var gTimezone;</span>
<a href="#l55.7"></a><span id="l55.7"> </span>
<a href="#l55.8"></a><span id="l55.8"> var setupModule = function(module) {</span>
<a href="#l55.9"></a><span id="l55.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l55.10"></a><span id="l55.10"> }</span>
<a href="#l55.11"></a><span id="l55.11"> </span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-var testTimezones2_CreateEvents = function () {</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+var testTimezones2_CreateEvents = function() {</span>
<a href="#l55.14"></a><span id="l55.14">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l55.15"></a><span id="l55.15">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l55.16"></a><span id="l55.16">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l55.17"></a><span id="l55.17"> </span>
<a href="#l55.18"></a><span id="l55.18">   // create daily recurring events in all timezones</span>
<a href="#l55.19"></a><span id="l55.19">   let time = new Date();</span>
<a href="#l55.20"></a><span id="l55.20">   for (let i = 0; i &lt; timezones.length; i++) {</span>
<a href="#l55.21"></a><span id="l55.21">     controller.doubleClick(new elementslib.Lookup(controller.window.document,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test3.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test3.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[4, 30], [5, 30], [6, 30],</span>
<a href="#l56.4"></a><span id="l56.4">              [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [9, 30], [11, 30], [12, 30]],</span>
<a href="#l56.5"></a><span id="l56.5">              [[4, 30], [6, 30], [7, 30], [7, 30], [9, 30], [10, 30], [11, 30], [12, 30]],</span>
<a href="#l56.6"></a><span id="l56.6">              [[4, 30], [5, 30], [6, 30], [7, 30], [8, 30], [9, 30], [10, 30], [11, 30]]]</span>
<a href="#l56.7"></a><span id="l56.7"> </span>
<a href="#l56.8"></a><span id="l56.8"> var setupModule = function(module) {</span>
<a href="#l56.9"></a><span id="l56.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l56.10"></a><span id="l56.10"> }</span>
<a href="#l56.11"></a><span id="l56.11"> </span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-var testTimezones3_checkStJohns = function () {</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+var testTimezones3_checkStJohns = function() {</span>
<a href="#l56.14"></a><span id="l56.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l56.15"></a><span id="l56.15"> </span>
<a href="#l56.16"></a><span id="l56.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l56.17"></a><span id="l56.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l56.18"></a><span id="l56.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l56.19"></a><span id="l56.19"> </span>
<a href="#l56.20"></a><span id="l56.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l56.21"></a><span id="l56.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test4.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test4.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[3, 30], [4, 30], [5, 30],</span>
<a href="#l57.4"></a><span id="l57.4">              [[2, 30], [4, 30], [5, 30], [5, 30], [7, 30], [7, 30], [9, 30], [10, 30]],</span>
<a href="#l57.5"></a><span id="l57.5">              [[2, 30], [4, 30], [5, 30], [5, 30], [7, 30], [8, 30], [9, 30], [10, 30]],</span>
<a href="#l57.6"></a><span id="l57.6">              [[3, 30], [4, 30], [5, 30], [6, 30], [7, 30], [8, 30], [9, 30], [10, 30]]]</span>
<a href="#l57.7"></a><span id="l57.7"> </span>
<a href="#l57.8"></a><span id="l57.8"> var setupModule = function(module) {</span>
<a href="#l57.9"></a><span id="l57.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l57.10"></a><span id="l57.10"> }</span>
<a href="#l57.11"></a><span id="l57.11"> </span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-var testTimezones4_checkCaracas = function () {</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineplus">+var testTimezones4_checkCaracas = function() {</span>
<a href="#l57.14"></a><span id="l57.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l57.15"></a><span id="l57.15"> </span>
<a href="#l57.16"></a><span id="l57.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l57.17"></a><span id="l57.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l57.18"></a><span id="l57.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l57.19"></a><span id="l57.19"> </span>
<a href="#l57.20"></a><span id="l57.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l57.21"></a><span id="l57.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test5.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test5.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[1, 0], [2, 0], [3, 0], [4</span>
<a href="#l58.4"></a><span id="l58.4">              [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [8, 0]],</span>
<a href="#l58.5"></a><span id="l58.5">              [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [6, 0], [7, 0], [8, 0]],</span>
<a href="#l58.6"></a><span id="l58.6">              [[1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0]]]</span>
<a href="#l58.7"></a><span id="l58.7"> </span>
<a href="#l58.8"></a><span id="l58.8"> var setupModule = function(module) {</span>
<a href="#l58.9"></a><span id="l58.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l58.10"></a><span id="l58.10"> }</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-var testTimezones5_checkPhoenix = function () {</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+var testTimezones5_checkPhoenix = function() {</span>
<a href="#l58.14"></a><span id="l58.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l58.15"></a><span id="l58.15"> </span>
<a href="#l58.16"></a><span id="l58.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l58.17"></a><span id="l58.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l58.18"></a><span id="l58.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l58.19"></a><span id="l58.19"> </span>
<a href="#l58.20"></a><span id="l58.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l58.21"></a><span id="l58.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test6.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test6.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[0, 0], [1, 0], [2, 0], [3</span>
<a href="#l59.4"></a><span id="l59.4">              [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [5, 0], [7, 0], [8, 0]],</span>
<a href="#l59.5"></a><span id="l59.5">              [[0, 0], [2, 0], [3, 0], [3, 0], [5, 0], [6, 0], [7, 0], [8, 0]],</span>
<a href="#l59.6"></a><span id="l59.6">              [[0, 0], [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0]]]</span>
<a href="#l59.7"></a><span id="l59.7"> </span>
<a href="#l59.8"></a><span id="l59.8"> var setupModule = function(module) {</span>
<a href="#l59.9"></a><span id="l59.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l59.10"></a><span id="l59.10"> }</span>
<a href="#l59.11"></a><span id="l59.11"> </span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-var testTimezones6_checkLosAngeles = function () {</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineplus">+var testTimezones6_checkLosAngeles = function() {</span>
<a href="#l59.14"></a><span id="l59.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l59.15"></a><span id="l59.15"> </span>
<a href="#l59.16"></a><span id="l59.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l59.17"></a><span id="l59.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l59.18"></a><span id="l59.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l59.19"></a><span id="l59.19"> </span>
<a href="#l59.20"></a><span id="l59.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l59.21"></a><span id="l59.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test7.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test7.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[5, 0], [6, 0], [7, 0], [8</span>
<a href="#l60.4"></a><span id="l60.4">              [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [9, 0], [11, 0], [12, 0]],</span>
<a href="#l60.5"></a><span id="l60.5">              [[4, 0], [6, 0], [7, 0], [7, 0], [9, 0], [10, 0], [11, 0], [12, 0]],</span>
<a href="#l60.6"></a><span id="l60.6">              [[5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0], [12, 0]]]</span>
<a href="#l60.7"></a><span id="l60.7"> </span>
<a href="#l60.8"></a><span id="l60.8"> var setupModule = function(module) {</span>
<a href="#l60.9"></a><span id="l60.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l60.10"></a><span id="l60.10"> }</span>
<a href="#l60.11"></a><span id="l60.11"> </span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-var testTimezones7_checkBuenosAires = function () {</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+var testTimezones7_checkBuenosAires = function() {</span>
<a href="#l60.14"></a><span id="l60.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l60.15"></a><span id="l60.15"> </span>
<a href="#l60.16"></a><span id="l60.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l60.17"></a><span id="l60.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l60.18"></a><span id="l60.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l60.19"></a><span id="l60.19"> </span>
<a href="#l60.20"></a><span id="l60.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l60.21"></a><span id="l60.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test8.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test8.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[9, 0], [10, 0], [11, 0], </span>
<a href="#l61.4"></a><span id="l61.4">              [[9, 0], [11, 0], [12, 0], [12, 0], [14, 0], [14, 0], [16, 0], [17, 0]],</span>
<a href="#l61.5"></a><span id="l61.5">              [[8, 0], [10, 0], [11, 0], [11, 0], [13, 0], [14, 0], [15, 0], [16, 0]],</span>
<a href="#l61.6"></a><span id="l61.6">              [[9, 0], [10, 0], [11, 0], [12, 0], [13, 0], [14, 0], [15, 0], [16, 0]]]</span>
<a href="#l61.7"></a><span id="l61.7"> </span>
<a href="#l61.8"></a><span id="l61.8"> var setupModule = function(module) {</span>
<a href="#l61.9"></a><span id="l61.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l61.10"></a><span id="l61.10"> }</span>
<a href="#l61.11"></a><span id="l61.11"> </span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-var testTimezones8_checkParis = function () {</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+var testTimezones8_checkParis = function() {</span>
<a href="#l61.14"></a><span id="l61.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l61.15"></a><span id="l61.15"> </span>
<a href="#l61.16"></a><span id="l61.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l61.17"></a><span id="l61.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l61.18"></a><span id="l61.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l61.19"></a><span id="l61.19"> </span>
<a href="#l61.20"></a><span id="l61.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l61.21"></a><span id="l61.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/calendar/test/mozmill/timezoneTests/test9.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/calendar/test/mozmill/timezoneTests/test9.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -21,17 +21,17 @@ var times = [[[13, 45], [14, 45], [15, 4</span>
<a href="#l62.4"></a><span id="l62.4">              [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [17, 45], [19, 45], [20, 45]],</span>
<a href="#l62.5"></a><span id="l62.5">              [[12, 45], [14, 45], [15, 45], [15, 45], [17, 45], [18, 45], [19, 45], [20, 45]],</span>
<a href="#l62.6"></a><span id="l62.6">              [[13, 45], [14, 45], [15, 45], [16, 45], [17, 45], [18, 45], [19, 45], [20, 45]]]</span>
<a href="#l62.7"></a><span id="l62.7"> </span>
<a href="#l62.8"></a><span id="l62.8"> var setupModule = function(module) {</span>
<a href="#l62.9"></a><span id="l62.9">   controller = mozmill.getMail3PaneController();</span>
<a href="#l62.10"></a><span id="l62.10"> }</span>
<a href="#l62.11"></a><span id="l62.11"> </span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-var testTimezones9_checkKathmandu = function () {</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+var testTimezones9_checkKathmandu = function() {</span>
<a href="#l62.14"></a><span id="l62.14">   let eventPath = '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar.toLowerCase() + '&quot;}';</span>
<a href="#l62.15"></a><span id="l62.15"> </span>
<a href="#l62.16"></a><span id="l62.16">   controller.click(new elementslib.ID(controller.window.document, &quot;calendar-tab-button&quot;));</span>
<a href="#l62.17"></a><span id="l62.17">   calUtils.switchToView(controller, &quot;day&quot;);</span>
<a href="#l62.18"></a><span id="l62.18">   calUtils.goToDate(controller, 2009, 1, 1);</span>
<a href="#l62.19"></a><span id="l62.19"> </span>
<a href="#l62.20"></a><span id="l62.20">   timezoneUtils.verify(controller, dates, timezones, times);</span>
<a href="#l62.21"></a><span id="l62.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/calendar/test/mozmill/views/testDayView.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testDayView.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -10,17 +10,17 @@ var title1 = &quot;Day View Event&quot;;</span>
<a href="#l63.4"></a><span id="l63.4"> var title2 = &quot;Day View Event Changed&quot;;</span>
<a href="#l63.5"></a><span id="l63.5"> var desc = &quot;Day View Event Description&quot;;</span>
<a href="#l63.6"></a><span id="l63.6"> </span>
<a href="#l63.7"></a><span id="l63.7"> var setupModule = function(module) {</span>
<a href="#l63.8"></a><span id="l63.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l63.9"></a><span id="l63.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l63.10"></a><span id="l63.10"> }</span>
<a href="#l63.11"></a><span id="l63.11"> </span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-var testDayView = function () {</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineplus">+var testDayView = function() {</span>
<a href="#l63.14"></a><span id="l63.14">   let dateService = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l63.15"></a><span id="l63.15">                               .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l63.16"></a><span id="l63.16">   // paths</span>
<a href="#l63.17"></a><span id="l63.17">   let miniMonth = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l63.18"></a><span id="l63.18">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l63.19"></a><span id="l63.19">     + 'id(&quot;minimonth-pane&quot;)/{&quot;align&quot;:&quot;center&quot;}/id(&quot;calMinimonthBox&quot;)/id(&quot;calMinimonth&quot;)/';</span>
<a href="#l63.20"></a><span id="l63.20">   let dayView = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l63.21"></a><span id="l63.21">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/calendar/test/mozmill/views/testMonthView.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testMonthView.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -10,17 +10,17 @@ var title1 = &quot;Month View Event&quot;;</span>
<a href="#l64.4"></a><span id="l64.4"> var title2 = &quot;Month View Event Changed&quot;;</span>
<a href="#l64.5"></a><span id="l64.5"> var desc = &quot;Month View Event Description&quot;;</span>
<a href="#l64.6"></a><span id="l64.6"> </span>
<a href="#l64.7"></a><span id="l64.7"> var setupModule = function(module) {</span>
<a href="#l64.8"></a><span id="l64.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l64.9"></a><span id="l64.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l64.10"></a><span id="l64.10"> }</span>
<a href="#l64.11"></a><span id="l64.11"> </span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-var testMonthView = function () {</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+var testMonthView = function() {</span>
<a href="#l64.14"></a><span id="l64.14">   let dateService = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l64.15"></a><span id="l64.15">                               .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l64.16"></a><span id="l64.16">   // paths</span>
<a href="#l64.17"></a><span id="l64.17">   let miniMonth = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l64.18"></a><span id="l64.18">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l64.19"></a><span id="l64.19">     + 'id(&quot;minimonth-pane&quot;)/{&quot;align&quot;:&quot;center&quot;}/id(&quot;calMinimonthBox&quot;)/id(&quot;calMinimonth&quot;)/';</span>
<a href="#l64.20"></a><span id="l64.20">   let monthView = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l64.21"></a><span id="l64.21">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/calendar/test/mozmill/views/testMultiweekView.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testMultiweekView.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -10,17 +10,17 @@ var title1 = &quot;Multiweek View Event&quot;;</span>
<a href="#l65.4"></a><span id="l65.4"> var title2 = &quot;Multiweek View Event Changed&quot;;</span>
<a href="#l65.5"></a><span id="l65.5"> var desc = &quot;Multiweek View Event Description&quot;;</span>
<a href="#l65.6"></a><span id="l65.6"> </span>
<a href="#l65.7"></a><span id="l65.7"> var setupModule = function(module) {</span>
<a href="#l65.8"></a><span id="l65.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l65.9"></a><span id="l65.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l65.10"></a><span id="l65.10"> }</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-var testMultiWeekView = function () {</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineplus">+var testMultiWeekView = function() {</span>
<a href="#l65.14"></a><span id="l65.14">   let dateService = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l65.15"></a><span id="l65.15">                               .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l65.16"></a><span id="l65.16">   // paths</span>
<a href="#l65.17"></a><span id="l65.17">   let miniMonth = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l65.18"></a><span id="l65.18">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l65.19"></a><span id="l65.19">     + 'id(&quot;minimonth-pane&quot;)/{&quot;align&quot;:&quot;center&quot;}/id(&quot;calMinimonthBox&quot;)/id(&quot;calMinimonth&quot;)/';</span>
<a href="#l65.20"></a><span id="l65.20">   let multiWeekView = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l65.21"></a><span id="l65.21">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l66.1"></a><span id="l66.1" class="difflineminus">--- a/calendar/test/mozmill/views/testTaskView.js</span>
<a href="#l66.2"></a><span id="l66.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testTaskView.js</span>
<a href="#l66.3"></a><span id="l66.3" class="difflineat">@@ -13,17 +13,17 @@ var percentComplete = &quot;50&quot;;</span>
<a href="#l66.4"></a><span id="l66.4"> </span>
<a href="#l66.5"></a><span id="l66.5"> var setupModule = function(module) {</span>
<a href="#l66.6"></a><span id="l66.6">   controller = mozmill.getMail3PaneController();</span>
<a href="#l66.7"></a><span id="l66.7">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l66.8"></a><span id="l66.8"> }</span>
<a href="#l66.9"></a><span id="l66.9"> </span>
<a href="#l66.10"></a><span id="l66.10"> // mozmill doesn't support trees yet, therefore completed checkbox and line-through style are not</span>
<a href="#l66.11"></a><span id="l66.11"> // checked</span>
<a href="#l66.12"></a><span id="l66.12" class="difflineminus">-var testTaskView = function () {</span>
<a href="#l66.13"></a><span id="l66.13" class="difflineplus">+var testTaskView = function() {</span>
<a href="#l66.14"></a><span id="l66.14">   // paths</span>
<a href="#l66.15"></a><span id="l66.15">   let taskView = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l66.16"></a><span id="l66.16">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span>
<a href="#l66.17"></a><span id="l66.17">     + 'id(&quot;calendarDisplayDeck&quot;)/id(&quot;calendar-task-box&quot;)/';</span>
<a href="#l66.18"></a><span id="l66.18">   let taskDialog = '/id(&quot;calendar-task-dialog&quot;)/id(&quot;event-grid&quot;)/id(&quot;event-grid-rows&quot;)/';</span>
<a href="#l66.19"></a><span id="l66.19">   let treeChildren = taskView + '[1]/id(&quot;calendar-task-tree&quot;)/anon({&quot;anonid&quot;:&quot;calendar-task-tree&quot;})/'</span>
<a href="#l66.20"></a><span id="l66.20">     + '{&quot;tooltip&quot;:&quot;taskTreeTooltip&quot;}';</span>
<a href="#l66.21"></a><span id="l66.21">   let taskTree = taskView + '[1]/id(&quot;calendar-task-tree&quot;)';</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l67.1"></a><span id="l67.1" class="difflineminus">--- a/calendar/test/mozmill/views/testWeekView.js</span>
<a href="#l67.2"></a><span id="l67.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testWeekView.js</span>
<a href="#l67.3"></a><span id="l67.3" class="difflineat">@@ -10,17 +10,17 @@ var title1 = &quot;Week View Event&quot;;</span>
<a href="#l67.4"></a><span id="l67.4"> var title2 = &quot;Week View Event Changed&quot;;</span>
<a href="#l67.5"></a><span id="l67.5"> var desc = &quot;Week View Event Description&quot;;</span>
<a href="#l67.6"></a><span id="l67.6"> </span>
<a href="#l67.7"></a><span id="l67.7"> var setupModule = function(module) {</span>
<a href="#l67.8"></a><span id="l67.8">   controller = mozmill.getMail3PaneController();</span>
<a href="#l67.9"></a><span id="l67.9">   calUtils.createCalendar(controller, calendar);</span>
<a href="#l67.10"></a><span id="l67.10"> }</span>
<a href="#l67.11"></a><span id="l67.11"> </span>
<a href="#l67.12"></a><span id="l67.12" class="difflineminus">-var testWeekView = function () {</span>
<a href="#l67.13"></a><span id="l67.13" class="difflineplus">+var testWeekView = function() {</span>
<a href="#l67.14"></a><span id="l67.14">   let dateService = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l67.15"></a><span id="l67.15">                               .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l67.16"></a><span id="l67.16">   // paths</span>
<a href="#l67.17"></a><span id="l67.17">   let miniMonth = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l67.18"></a><span id="l67.18">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/id(&quot;ltnSidebar&quot;)/'</span>
<a href="#l67.19"></a><span id="l67.19">     + 'id(&quot;minimonth-pane&quot;)/{&quot;align&quot;:&quot;center&quot;}/id(&quot;calMinimonthBox&quot;)/id(&quot;calMinimonth&quot;)/';</span>
<a href="#l67.20"></a><span id="l67.20">   let weekView = '/id(&quot;messengerWindow&quot;)/id(&quot;tabmail-container&quot;)/id(&quot;tabmail&quot;)/'</span>
<a href="#l67.21"></a><span id="l67.21">     + 'id(&quot;tabpanelcontainer&quot;)/id(&quot;calendarTabPanel&quot;)/id(&quot;calendarContent&quot;)/'</span>
<a href="#l67.22"></a><span id="l67.22" class="difflineat">@@ -96,17 +96,17 @@ var testWeekView = function () {</span>
<a href="#l67.23"></a><span id="l67.23">   event.select(new elementslib.ID(event.window.document, &quot;item-calendar&quot;), null, calendar);</span>
<a href="#l67.24"></a><span id="l67.24"> </span>
<a href="#l67.25"></a><span id="l67.25">   // save</span>
<a href="#l67.26"></a><span id="l67.26">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l67.27"></a><span id="l67.27"> </span>
<a href="#l67.28"></a><span id="l67.28">   // if it was created successfully, it can be opened</span>
<a href="#l67.29"></a><span id="l67.29">   controller.waitForElement(new elementslib.Lookup(controller.window.document, eventBox));</span>
<a href="#l67.30"></a><span id="l67.30">   controller.doubleClick(new elementslib.Lookup(controller.window.document, eventBox));</span>
<a href="#l67.31"></a><span id="l67.31" class="difflineminus">-  controller.waitFor(function () {return utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l67.32"></a><span id="l67.32" class="difflineplus">+  controller.waitFor(function() {return utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l67.33"></a><span id="l67.33">   event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l67.34"></a><span id="l67.34"> </span>
<a href="#l67.35"></a><span id="l67.35">   // change title and save changes</span>
<a href="#l67.36"></a><span id="l67.36">   let titleTextBox = new elementslib.Lookup(event.window.document, eventDialog</span>
<a href="#l67.37"></a><span id="l67.37">     + 'id(&quot;event-grid-title-row&quot;)/id(&quot;item-title&quot;)/anon({&quot;class&quot;:&quot;textbox-input-box&quot;})/'</span>
<a href="#l67.38"></a><span id="l67.38">     + 'anon({&quot;anonid&quot;:&quot;input&quot;})');</span>
<a href="#l67.39"></a><span id="l67.39">   event.waitForElement(titleTextBox);</span>
<a href="#l67.40"></a><span id="l67.40">   event.type(titleTextBox, title2);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

