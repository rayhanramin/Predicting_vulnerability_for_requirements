<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 21833:433d0530406d6ecde80c1ee962393384b219fee3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 433d0530406d6ecde80c1ee962393384b219fee3" />
<meta property="og:url" content="/comm-central/rev/433d0530406d6ecde80c1ee962393384b219fee3" />
<meta property="og:description" content="Bug 1385435 - Allow python2.6 to run client.py; rs=bustage-fix" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 433d0530406d6ecde80c1ee962393384b219fee3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/433d0530406d6ecde80c1ee962393384b219fee3">shortlog</a> |
<a href="/comm-central/log/433d0530406d6ecde80c1ee962393384b219fee3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/433d0530406d6ecde80c1ee962393384b219fee3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/433d0530406d6ecde80c1ee962393384b219fee3">files</a> |
changeset |
<a href="/comm-central/raw-rev/433d0530406d6ecde80c1ee962393384b219fee3">raw</a>  | <a href="/comm-central/archive/433d0530406d6ecde80c1ee962393384b219fee3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1385435">Bug 1385435</a> - Allow python2.6 to run client.py; rs=bustage-fix
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#84;&#111;&#109;&#32;&#80;&#114;&#105;&#110;&#99;&#101;&#32;&#60;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#104;&#111;&#99;&#97;&#116;&#46;&#99;&#97;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 28 Jul 2017 16:17:09 -0600</td></tr>

<tr>
 <td>changeset 21833</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/433d0530406d6ecde80c1ee962393384b219fee3">433d0530406d6ecde80c1ee962393384b219fee3</a></td>
</tr>



<tr>
<td>parent 21832</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9274ac34246c380b9181f275a1ee958ab9b2cbec">9274ac34246c380b9181f275a1ee958ab9b2cbec</a>
</td>
</tr>

<tr>
<td>child 21834</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1f0a3e17464ffabc53248e3a027fd705a9275be6">1f0a3e17464ffabc53248e3a027fd705a9275be6</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=433d0530406d6ecde80c1ee962393384b219fee3">13334</a></td></tr>
<tr><td>push user</td><td>mozilla@hocat.ca</td></tr>
<tr><td>push date</td><td class="date age">Sat, 29 Jul 2017 05:36:28 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@433d0530406d [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=433d0530406d6ecde80c1ee962393384b219fee3">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=433d0530406d6ecde80c1ee962393384b219fee3&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=433d0530406d6ecde80c1ee962393384b219fee3&newProject=comm-central&newRevision=9274ac34246c380b9181f275a1ee958ab9b2cbec&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=433d0530406d6ecde80c1ee962393384b219fee3&newProject=comm-central&newRevision=9274ac34246c380b9181f275a1ee958ab9b2cbec&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=433d0530406d6ecde80c1ee962393384b219fee3&newProject=comm-central&newRevision=9274ac34246c380b9181f275a1ee958ab9b2cbec&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bustage-fix%29&revcount=50">bustage-fix</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1385435">1385435</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1385435">Bug 1385435</a> - Allow python2.6 to run client.py; rs=bustage-fix

The L10N linux repacks try to run client.py with the system python (which is
python 2.6 from CentOS 6). There is nothing python 2.7 specific in client.py,
so don't needlessly error out in that case.

MozReview-Commit-ID: 6adOxHkqHnb</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/433d0530406d6ecde80c1ee962393384b219fee3/client.py">client.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/433d0530406d6ecde80c1ee962393384b219fee3/client.py">file</a> |
<a href="/comm-central/annotate/433d0530406d6ecde80c1ee962393384b219fee3/client.py">annotate</a> |
<a href="/comm-central/diff/433d0530406d6ecde80c1ee962393384b219fee3/client.py">diff</a> |
<a href="/comm-central/comparison/433d0530406d6ecde80c1ee962393384b219fee3/client.py">comparison</a> |
<a href="/comm-central/log/433d0530406d6ecde80c1ee962393384b219fee3/client.py">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/client.py</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/client.py</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -58,18 +58,18 @@ SWITCH_MOZILLA_REPO_BACKUP_LOCATION = &quot;.</span>
<a href="#l1.4"></a><span id="l1.4"> SWITCH_MOZILLA_REPO_OLD_REPO_LOCATION = &quot;.mozilla-trunk&quot;</span>
<a href="#l1.5"></a><span id="l1.5"> # This should be the same as DEFAULTS['MOZILLA_REPO'] but using %s instead</span>
<a href="#l1.6"></a><span id="l1.6"> # of http for the scheme.</span>
<a href="#l1.7"></a><span id="l1.7"> SWITCH_MOZILLA_REPO_REPLACE = '%s://hg.mozilla.org/mozilla-central/'</span>
<a href="#l1.8"></a><span id="l1.8"> SWITCH_MOZILLA_BASE_REV = &quot;GECKO_1_9_1_BASE&quot;</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> import sys</span>
<a href="#l1.11"></a><span id="l1.11"> pyver = sys.version_info</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-if pyver[0] &lt;= 1 or (pyver[0] == 2 and pyver[1] &lt; 7):</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-    sys.exit(&quot;ERROR: Python 2.7 or newer required&quot;)</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+if pyver[0] &lt;= 1 or (pyver[0] == 2 and pyver[1] &lt; 6):</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+    sys.exit(&quot;ERROR: Python 2.6 or newer required&quot;)</span>
<a href="#l1.16"></a><span id="l1.16"> elif pyver[0] &gt;= 3:</span>
<a href="#l1.17"></a><span id="l1.17">     # Python series 3 will syntax error here, Hack needed per Bug 601649c#8</span>
<a href="#l1.18"></a><span id="l1.18">     print &quot;ERROR: Python series 3 is not supported, use python 2.7&quot;</span>
<a href="#l1.19"></a><span id="l1.19">     sys.exit()  # Do an explicit sys.exit for code clarity.</span>
<a href="#l1.20"></a><span id="l1.20"> del pyver</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22"> import os</span>
<a href="#l1.23"></a><span id="l1.23"> from optparse import OptionParser, OptionValueError</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

