<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26640:6b97e6f65af806a8f1d9b316ceba376a575064d0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 6b97e6f65af806a8f1d9b316ceba376a575064d0" />
<meta property="og:url" content="/comm-central/rev/6b97e6f65af806a8f1d9b316ceba376a575064d0" />
<meta property="og:description" content="Bug 1546338 - fix some more instances of Port [Bug 1551320 - In XUL documents replace all callers of createElement with createXULElement]. r=jorgk" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 6b97e6f65af806a8f1d9b316ceba376a575064d0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/6b97e6f65af806a8f1d9b316ceba376a575064d0">shortlog</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/6b97e6f65af806a8f1d9b316ceba376a575064d0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0">files</a> |
changeset |
<a href="/comm-central/raw-rev/6b97e6f65af806a8f1d9b316ceba376a575064d0">raw</a>  | <a href="/comm-central/archive/6b97e6f65af806a8f1d9b316ceba376a575064d0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546338">Bug 1546338</a> - fix some more instances of Port [<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1551320">Bug 1551320</a> - In XUL documents replace all callers of createElement with createXULElement]. r=jorgk
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#103;&#110;&#117;&#115;&#32;&#77;&#101;&#108;&#105;&#110;&#32;&#60;&#109;&#107;&#109;&#101;&#108;&#105;&#110;&#43;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#105;&#107;&#105;&#46;&#102;&#105;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 19 May 2019 16:26:42 +0300</td></tr>

<tr>
 <td>changeset 26640</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/6b97e6f65af806a8f1d9b316ceba376a575064d0">6b97e6f65af806a8f1d9b316ceba376a575064d0</a></td>
</tr>



<tr>
<td>parent 26639</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/af02a4451ba2966d9e98f5a881ef21fc8f535a27">af02a4451ba2966d9e98f5a881ef21fc8f535a27</a>
</td>
</tr>

<tr>
<td>child 26641</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9331b129db1c34e1168f809251d478c20b52c35b">9331b129db1c34e1168f809251d478c20b52c35b</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=6b97e6f65af806a8f1d9b316ceba376a575064d0">15935</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Sun, 19 May 2019 20:52:12 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@aa46c393d41f [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=aa46c393d41f395b07246e19250fb3ce46c6c323">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=aa46c393d41f395b07246e19250fb3ce46c6c323&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=aa46c393d41f395b07246e19250fb3ce46c6c323&newProject=comm-central&newRevision=6b97e6f65af806a8f1d9b316ceba376a575064d0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=aa46c393d41f395b07246e19250fb3ce46c6c323&newProject=comm-central&newRevision=6b97e6f65af806a8f1d9b316ceba376a575064d0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=aa46c393d41f395b07246e19250fb3ce46c6c323&newProject=comm-central&newRevision=6b97e6f65af806a8f1d9b316ceba376a575064d0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28jorgk%29&revcount=50">jorgk</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546338">1546338</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1551320">1551320</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1546338">Bug 1546338</a> - fix some more instances of Port [<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1551320">Bug 1551320</a> - In XUL documents replace all callers of createElement with createXULElement]. r=jorgk</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/content/imtooltip.xml">chat/content/imtooltip.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/content/imtooltip.xml">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/content/imtooltip.xml">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/content/imtooltip.xml">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/content/imtooltip.xml">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/content/imtooltip.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/modules/OTRUI.jsm">chat/modules/OTRUI.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/modules/OTRUI.jsm">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/modules/OTRUI.jsm">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/modules/OTRUI.jsm">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/modules/OTRUI.jsm">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/chat/modules/OTRUI.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/common/src/Overlays.jsm">common/src/Overlays.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/common/src/Overlays.jsm">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/common/src/Overlays.jsm">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/common/src/Overlays.jsm">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/common/src/Overlays.jsm">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/common/src/Overlays.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/content/extensions.xml">mail/base/content/extensions.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/content/extensions.xml">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/content/extensions.xml">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/content/extensions.xml">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/content/extensions.xml">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/content/extensions.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/modules/QuickFilterManager.jsm">mail/base/modules/QuickFilterManager.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/modules/QuickFilterManager.jsm">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/modules/QuickFilterManager.jsm">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/modules/QuickFilterManager.jsm">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/modules/QuickFilterManager.jsm">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/base/modules/QuickFilterManager.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/components/im/content/imconversation.xml">mail/components/im/content/imconversation.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/components/im/content/imconversation.xml">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/components/im/content/imconversation.xml">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/components/im/content/imconversation.xml">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/components/im/content/imconversation.xml">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/mail/components/im/content/imconversation.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/content/folderWidgets.xml">mailnews/base/content/folderWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/content/folderWidgets.xml">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/content/folderWidgets.xml">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/content/folderWidgets.xml">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/content/folderWidgets.xml">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/content/folderWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/search/content/searchWidgets.xml">mailnews/base/search/content/searchWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/search/content/searchWidgets.xml">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/search/content/searchWidgets.xml">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/search/content/searchWidgets.xml">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/search/content/searchWidgets.xml">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/base/search/content/searchWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/db/gloda/content/glodacomplete.xml">mailnews/db/gloda/content/glodacomplete.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/db/gloda/content/glodacomplete.xml">file</a> |
<a href="/comm-central/annotate/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/db/gloda/content/glodacomplete.xml">annotate</a> |
<a href="/comm-central/diff/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/db/gloda/content/glodacomplete.xml">diff</a> |
<a href="/comm-central/comparison/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/db/gloda/content/glodacomplete.xml">comparison</a> |
<a href="/comm-central/log/6b97e6f65af806a8f1d9b316ceba376a575064d0/mailnews/db/gloda/content/glodacomplete.xml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/content/imtooltip.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/content/imtooltip.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -288,22 +288,22 @@</span>
<a href="#l1.4"></a><span id="l1.4">                      aContact.getTags().map(t =&gt; t.name).join(&quot;, &quot;));</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">          let buddies = this.contact.getBuddies();</span>
<a href="#l1.7"></a><span id="l1.7">          if (buddies.length &lt;= 1)</span>
<a href="#l1.8"></a><span id="l1.8">            return true;</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10">          let buddiesElt = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;,</span>
<a href="#l1.11"></a><span id="l1.11">                                                                   &quot;buddies&quot;);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-         let sep = document.createElement(&quot;separator&quot;);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+         let sep = document.createXULElement(&quot;separator&quot;);</span>
<a href="#l1.14"></a><span id="l1.14">          sep.setAttribute(&quot;class&quot;, &quot;groove tooltipSeparator&quot;);</span>
<a href="#l1.15"></a><span id="l1.15">          buddiesElt.appendChild(sep);</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17">          for (let buddy of buddies) {</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-           let buddyElt = document.createElement(&quot;buddy&quot;);</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+           let buddyElt = document.createXULElement(&quot;buddy&quot;);</span>
<a href="#l1.20"></a><span id="l1.20">            buddiesElt.appendChild(buddyElt);</span>
<a href="#l1.21"></a><span id="l1.21">            buddyElt.getBoundingClientRect(); // force binding attachment</span>
<a href="#l1.22"></a><span id="l1.22">            buddyElt.build(buddy, this);</span>
<a href="#l1.23"></a><span id="l1.23">          }</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25">          return true;</span>
<a href="#l1.26"></a><span id="l1.26">        ]]&gt;</span>
<a href="#l1.27"></a><span id="l1.27">        &lt;/body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/chat/modules/OTRUI.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/chat/modules/OTRUI.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -132,19 +132,19 @@ var OTRUI = {</span>
<a href="#l2.4"></a><span id="l2.4">   },</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6">   addBuddyContextMenu(buddyContextMenu, doc) {</span>
<a href="#l2.7"></a><span id="l2.7">     if (!buddyContextMenu || !OTR.libLoaded) {</span>
<a href="#l2.8"></a><span id="l2.8">       return;  // Not the buddy list context menu</span>
<a href="#l2.9"></a><span id="l2.9">     }</span>
<a href="#l2.10"></a><span id="l2.10">     OTRUI.removeBuddyContextMenu(doc);</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    let sep = doc.createElement(&quot;menuseparator&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    let sep = doc.createXULElement(&quot;menuseparator&quot;);</span>
<a href="#l2.14"></a><span id="l2.14">     sep.setAttribute(&quot;id&quot;, &quot;otrsep&quot;);</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-    let menuitem = doc.createElement(&quot;menuitem&quot;);</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+    let menuitem = doc.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l2.17"></a><span id="l2.17">     menuitem.setAttribute(&quot;label&quot;, _(&quot;buddycontextmenu.label&quot;));</span>
<a href="#l2.18"></a><span id="l2.18">     menuitem.setAttribute(&quot;id&quot;, &quot;otrcont&quot;);</span>
<a href="#l2.19"></a><span id="l2.19">     menuitem.addEventListener(&quot;command&quot;, () =&gt; {</span>
<a href="#l2.20"></a><span id="l2.20">       let target = buddyContextMenu.triggerNode;</span>
<a href="#l2.21"></a><span id="l2.21">       if (target.localName == &quot;richlistitem&quot;) {</span>
<a href="#l2.22"></a><span id="l2.22">         let contact = target.contact;</span>
<a href="#l2.23"></a><span id="l2.23">         let args = OTRUI.contactWrapper(contact);</span>
<a href="#l2.24"></a><span id="l2.24">         args.wrappedJSObject = args;</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineat">@@ -478,26 +478,26 @@ var OTRUI = {</span>
<a href="#l2.26"></a><span id="l2.26">     let title = this.globalDoc.createElement(&quot;title&quot;);</span>
<a href="#l2.27"></a><span id="l2.27">     title.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l2.28"></a><span id="l2.28">     title.setAttribute(&quot;crop&quot;, &quot;end&quot;);</span>
<a href="#l2.29"></a><span id="l2.29">     title.textContent = _(type + &quot;.title&quot;);</span>
<a href="#l2.30"></a><span id="l2.30"> </span>
<a href="#l2.31"></a><span id="l2.31">     let close = notification.querySelector(&quot;toolbarbutton&quot;);</span>
<a href="#l2.32"></a><span id="l2.32">     close.setAttribute(&quot;oncommand&quot;, &quot;this.parentNode.parentNode.dismiss();&quot;);</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-    let top = this.globalDoc.createElement(&quot;hbox&quot;);</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+    let top = this.globalDoc.createXULElement(&quot;hbox&quot;);</span>
<a href="#l2.36"></a><span id="l2.36">     top.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l2.37"></a><span id="l2.37">     top.setAttribute(&quot;align&quot;, &quot;center&quot;);</span>
<a href="#l2.38"></a><span id="l2.38">     top.classList.add(&quot;otr-notification-header&quot;);</span>
<a href="#l2.39"></a><span id="l2.39">     top.appendChild(notification.messageImage);</span>
<a href="#l2.40"></a><span id="l2.40">     top.appendChild(title);</span>
<a href="#l2.41"></a><span id="l2.41">     top.appendChild(close);</span>
<a href="#l2.42"></a><span id="l2.42">     notification.insertBefore(top, notification.messageDetails);</span>
<a href="#l2.43"></a><span id="l2.43"> </span>
<a href="#l2.44"></a><span id="l2.44" class="difflineminus">-    let bottom = this.globalDoc.createElement(&quot;hbox&quot;);</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+    let bottom = this.globalDoc.createXULElement(&quot;hbox&quot;);</span>
<a href="#l2.46"></a><span id="l2.46">     bottom.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l2.47"></a><span id="l2.47">     bottom.setAttribute(&quot;oncommand&quot;, &quot;this.parentNode._doButtonCommand(event);&quot;);</span>
<a href="#l2.48"></a><span id="l2.48">     bottom.classList.add(&quot;otr-notification-footer&quot;);</span>
<a href="#l2.49"></a><span id="l2.49"> </span>
<a href="#l2.50"></a><span id="l2.50">     notification.querySelectorAll(&quot;button&quot;).forEach((e) =&gt; {</span>
<a href="#l2.51"></a><span id="l2.51">       bottom.appendChild(e);</span>
<a href="#l2.52"></a><span id="l2.52">     });</span>
<a href="#l2.53"></a><span id="l2.53"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/common/src/Overlays.jsm</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/common/src/Overlays.jsm</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -192,17 +192,17 @@ class Overlays {</span>
<a href="#l3.4"></a><span id="l3.4">     // We've resolved all the forward references we can, we can now go ahead and load the scripts</span>
<a href="#l3.5"></a><span id="l3.5">     let deferredLoad = [];</span>
<a href="#l3.6"></a><span id="l3.6">     for (let script of unloadedScripts) {</span>
<a href="#l3.7"></a><span id="l3.7">       deferredLoad.push(...this.loadScript(script));</span>
<a href="#l3.8"></a><span id="l3.8">     }</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">     if (this.document.readyState == &quot;complete&quot;) {</span>
<a href="#l3.11"></a><span id="l3.11">       let sheet;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-      let overlayTrigger = this.document.createElement(&quot;overlayTrigger&quot;);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+      let overlayTrigger = this.document.createXULElement(&quot;overlayTrigger&quot;);</span>
<a href="#l3.14"></a><span id="l3.14">       overlayTrigger.addEventListener(&quot;bindingattached&quot;, () =&gt; {</span>
<a href="#l3.15"></a><span id="l3.15">         oconsole.debug(&quot;XBL binding attached, continuing with load&quot;);</span>
<a href="#l3.16"></a><span id="l3.16">         if (sheet) {</span>
<a href="#l3.17"></a><span id="l3.17">           sheet.remove();</span>
<a href="#l3.18"></a><span id="l3.18">         }</span>
<a href="#l3.19"></a><span id="l3.19">         overlayTrigger.remove();</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21">         setTimeout(() =&gt; {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/extensions.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/extensions.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -51,17 +51,17 @@</span>
<a href="#l4.4"></a><span id="l4.4">               this._warningBtn.label = gStrings.mailExt.GetStringFromName(</span>
<a href="#l4.5"></a><span id="l4.5">                 &quot;warnLegacyRestartButton&quot;</span>
<a href="#l4.6"></a><span id="l4.6">               );</span>
<a href="#l4.7"></a><span id="l4.7">               this._warningBtn.setAttribute(&quot;oncommand&quot;, &quot;BrowserUtils.restartApplication()&quot;);</span>
<a href="#l4.8"></a><span id="l4.8">               this._warningBtn.hidden = false;</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10">               if (undoCommand) {</span>
<a href="#l4.11"></a><span id="l4.11">                 if (!undoButton) {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-                  undoButton = document.createElement(&quot;button&quot;);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+                  undoButton = document.createXULElement(&quot;button&quot;);</span>
<a href="#l4.14"></a><span id="l4.14">                   undoButton.className = &quot;button-link undo-btn&quot;;</span>
<a href="#l4.15"></a><span id="l4.15">                   undoButton.setAttribute(</span>
<a href="#l4.16"></a><span id="l4.16">                     &quot;label&quot;, gStrings.mailExt.GetStringFromName(&quot;warnLegacyUndoButton&quot;)</span>
<a href="#l4.17"></a><span id="l4.17">                   );</span>
<a href="#l4.18"></a><span id="l4.18">                   // We shouldn't really attach non-anonymous content to anonymous content,</span>
<a href="#l4.19"></a><span id="l4.19">                   // but we can.</span>
<a href="#l4.20"></a><span id="l4.20">                   this._warningContainer.insertBefore(</span>
<a href="#l4.21"></a><span id="l4.21">                     undoButton, this._warningContainer.lastElementChild</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/modules/QuickFilterManager.jsm</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/modules/QuickFilterManager.jsm</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -862,17 +862,17 @@ var TagFacetingFilter = {</span>
<a href="#l5.4"></a><span id="l5.4">       let tag = tags[iTag];</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6">       if (tag.key in keywordMap) {</span>
<a href="#l5.7"></a><span id="l5.7">         addCount++;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">         // Keep in mind that the XBL does not get built for dynamically created</span>
<a href="#l5.10"></a><span id="l5.10">         //  elements such as these until they get displayed, which definitely</span>
<a href="#l5.11"></a><span id="l5.11">         //  means not before we append it into the tree.</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        let button = aDocument.createElement(&quot;toolbarbutton&quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        let button = aDocument.createXULElement(&quot;toolbarbutton&quot;);</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15">         button.setAttribute(&quot;id&quot;, &quot;qfb-tag-&quot; + tag.key);</span>
<a href="#l5.16"></a><span id="l5.16">         button.addEventListener(&quot;command&quot;, commandHandler);</span>
<a href="#l5.17"></a><span id="l5.17">         button.addEventListener(&quot;click&quot;, rightClickHandler);</span>
<a href="#l5.18"></a><span id="l5.18">         button.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l5.19"></a><span id="l5.19">         if (keywordMap[tag.key] !== null) {</span>
<a href="#l5.20"></a><span id="l5.20">           button.setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l5.21"></a><span id="l5.21">           if (!keywordMap[tag.key])</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/components/im/content/imconversation.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/components/im/content/imconversation.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1111,24 +1111,24 @@</span>
<a href="#l6.4"></a><span id="l6.4">          var name = aBuddy.name;</span>
<a href="#l6.5"></a><span id="l6.5">          if (!name)</span>
<a href="#l6.6"></a><span id="l6.6">            throw new Error(&quot;The empty string isn't a valid nick.&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">          if (this.buddies.has(name))</span>
<a href="#l6.8"></a><span id="l6.8">            throw new Error(&quot;Adding chat buddy &quot; + name + &quot; twice?!&quot;);</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10">          this.trackNick(name);</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-         let image = document.createElement(&quot;image&quot;);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-         let label = document.createElement(&quot;label&quot;);</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+         let image = document.createXULElement(&quot;image&quot;);</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+         let label = document.createXULElement(&quot;label&quot;);</span>
<a href="#l6.16"></a><span id="l6.16">          label.setAttribute(&quot;value&quot;, name);</span>
<a href="#l6.17"></a><span id="l6.17">          label.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l6.18"></a><span id="l6.18">          label.setAttribute(&quot;crop&quot;, &quot;end&quot;);</span>
<a href="#l6.19"></a><span id="l6.19"> </span>
<a href="#l6.20"></a><span id="l6.20">          // Fix insertBuddy below if you change the DOM makeup!</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-         var item = document.createElement(&quot;richlistitem&quot;);</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+         var item = document.createXULElement(&quot;richlistitem&quot;);</span>
<a href="#l6.23"></a><span id="l6.23">          item.chatBuddy = aBuddy;</span>
<a href="#l6.24"></a><span id="l6.24">          item.appendChild(image);</span>
<a href="#l6.25"></a><span id="l6.25">          item.appendChild(label);</span>
<a href="#l6.26"></a><span id="l6.26">          this.setBuddyAttributes(item);</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28">          var color = this._computeColor(name);</span>
<a href="#l6.29"></a><span id="l6.29">          var style = &quot;color: hsl(&quot; + color + &quot;, 100%, 40%);&quot;;</span>
<a href="#l6.30"></a><span id="l6.30">          item.colorStyle = style;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/base/content/folderWidgets.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/base/content/folderWidgets.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -406,17 +406,17 @@</span>
<a href="#l7.4"></a><span id="l7.4">              folder instead.</span>
<a href="#l7.5"></a><span id="l7.5">           */</span>
<a href="#l7.6"></a><span id="l7.6">           let parent = this._parentFolder;</span>
<a href="#l7.7"></a><span id="l7.7">           if (parent &amp;&amp; (this.getAttribute(&quot;showFileHereLabel&quot;) == &quot;true&quot; || !mode)) {</span>
<a href="#l7.8"></a><span id="l7.8">             let showAccountsFileHere = this.getAttribute(&quot;showAccountsFileHere&quot;);</span>
<a href="#l7.9"></a><span id="l7.9">             if ((!parent.isServer || showAccountsFileHere != &quot;false&quot;) &amp;&amp;</span>
<a href="#l7.10"></a><span id="l7.10">                 (!mode || mode == &quot;newFolder&quot; || parent.noSelect ||</span>
<a href="#l7.11"></a><span id="l7.11">                  parent.canFileMessages || showAccountsFileHere == &quot;true&quot;)) {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-              var menuitem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+              var menuitem = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l7.14"></a><span id="l7.14">               menuitem._folder = this._parentFolder;</span>
<a href="#l7.15"></a><span id="l7.15">               menuitem.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.16"></a><span id="l7.16">               if (this.hasAttribute(&quot;fileHereLabel&quot;)) {</span>
<a href="#l7.17"></a><span id="l7.17">                 menuitem.setAttribute(&quot;label&quot;, this.getAttribute(&quot;fileHereLabel&quot;));</span>
<a href="#l7.18"></a><span id="l7.18">                 menuitem.setAttribute(&quot;accesskey&quot;, this.getAttribute(&quot;fileHereAccessKey&quot;));</span>
<a href="#l7.19"></a><span id="l7.19">               } else {</span>
<a href="#l7.20"></a><span id="l7.20">                 menuitem.setAttribute(&quot;label&quot;, this._parentFolder.prettyName);</span>
<a href="#l7.21"></a><span id="l7.21">                 menuitem.setAttribute(&quot;class&quot;, &quot;folderMenuItem menuitem-iconic&quot;);</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -424,17 +424,17 @@</span>
<a href="#l7.23"></a><span id="l7.23">               }</span>
<a href="#l7.24"></a><span id="l7.24">               // Eww. have to support some legacy code here...</span>
<a href="#l7.25"></a><span id="l7.25">               menuitem.setAttribute(&quot;id&quot;, this._parentFolder.URI);</span>
<a href="#l7.26"></a><span id="l7.26">               this.appendChild(menuitem);</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28">               if (this._parentFolder.noSelect)</span>
<a href="#l7.29"></a><span id="l7.29">                 menuitem.setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-              let sep = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+              let sep = document.createXULElement(&quot;menuseparator&quot;);</span>
<a href="#l7.33"></a><span id="l7.33">               sep.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.34"></a><span id="l7.34">               this.appendChild(sep);</span>
<a href="#l7.35"></a><span id="l7.35">             }</span>
<a href="#l7.36"></a><span id="l7.36">           }</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38">           let globalInboxFolder = null;</span>
<a href="#l7.39"></a><span id="l7.39">           // See if this is the toplevel menu (usually with accounts).</span>
<a href="#l7.40"></a><span id="l7.40">           if (!this._parentFolder) {</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineat">@@ -446,17 +446,17 @@</span>
<a href="#l7.42"></a><span id="l7.42">               addSeparator = true;</span>
<a href="#l7.43"></a><span id="l7.43">             }</span>
<a href="#l7.44"></a><span id="l7.44">             if (this.getAttribute(&quot;showFavorites&quot;) == &quot;true&quot;) {</span>
<a href="#l7.45"></a><span id="l7.45">               this._buildSpecialMenu(&quot;favorites&quot;);</span>
<a href="#l7.46"></a><span id="l7.46">               addSeparator = true;</span>
<a href="#l7.47"></a><span id="l7.47">             }</span>
<a href="#l7.48"></a><span id="l7.48">             if (addSeparator) {</span>
<a href="#l7.49"></a><span id="l7.49">               // If we added Recent and/or Favorites, separate them from the rest of the items.</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-              let sep = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+              let sep = document.createXULElement(&quot;menuseparator&quot;);</span>
<a href="#l7.52"></a><span id="l7.52">               sep.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.53"></a><span id="l7.53">               this.appendChild(sep);</span>
<a href="#l7.54"></a><span id="l7.54">             }</span>
<a href="#l7.55"></a><span id="l7.55">             // If we are showing the accounts for deferring, move Local Folders to the top.</span>
<a href="#l7.56"></a><span id="l7.56">             if (mode == &quot;deferred&quot;) {</span>
<a href="#l7.57"></a><span id="l7.57">               globalInboxFolder = this.MailServices.accounts.localFoldersServer</span>
<a href="#l7.58"></a><span id="l7.58">                                                             .rootFolder;</span>
<a href="#l7.59"></a><span id="l7.59">               let localFoldersIndex = folders.indexOf(globalInboxFolder);</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineat">@@ -516,27 +516,27 @@</span>
<a href="#l7.61"></a><span id="l7.61">           for (let folder of folders) {</span>
<a href="#l7.62"></a><span id="l7.62">             let node;</span>
<a href="#l7.63"></a><span id="l7.63">             if (!folder.isServer)</span>
<a href="#l7.64"></a><span id="l7.64">               this._serversOnly = false;</span>
<a href="#l7.65"></a><span id="l7.65"> </span>
<a href="#l7.66"></a><span id="l7.66">             // If we're going to add subFolders, we need to make menus, not</span>
<a href="#l7.67"></a><span id="l7.67">             // menuitems.</span>
<a href="#l7.68"></a><span id="l7.68">             if (!folder.hasSubFolders || !shouldExpand(folder.server.type)) {</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-              node = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+              node = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l7.71"></a><span id="l7.71">               // Grumble, grumble, legacy code support</span>
<a href="#l7.72"></a><span id="l7.72">               node.setAttribute(&quot;id&quot;, folder.URI);</span>
<a href="#l7.73"></a><span id="l7.73">               node.setAttribute(&quot;class&quot;, &quot;folderMenuItem menuitem-iconic&quot;);</span>
<a href="#l7.74"></a><span id="l7.74">               node.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.75"></a><span id="l7.75">               this.appendChild(node);</span>
<a href="#l7.76"></a><span id="l7.76">             } else {</span>
<a href="#l7.77"></a><span id="l7.77">               this._serversOnly = false;</span>
<a href="#l7.78"></a><span id="l7.78">               // xxx this is slightly problematic in that we haven't confirmed</span>
<a href="#l7.79"></a><span id="l7.79">               //     whether any of the subfolders will pass the filter</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineminus">-              node = document.createElement(&quot;menu&quot;);</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+              node = document.createXULElement(&quot;menu&quot;);</span>
<a href="#l7.82"></a><span id="l7.82">               node.setAttribute(&quot;class&quot;, &quot;folderMenuItem menu-iconic&quot;);</span>
<a href="#l7.83"></a><span id="l7.83">               node.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.84"></a><span id="l7.84">               this.appendChild(node);</span>
<a href="#l7.85"></a><span id="l7.85"> </span>
<a href="#l7.86"></a><span id="l7.86">               // Create the submenu</span>
<a href="#l7.87"></a><span id="l7.87">               // (We must use cloneNode here because on OS X the native menu</span>
<a href="#l7.88"></a><span id="l7.88">               // functionality and very sad limitations of XBL1 cause the bindings</span>
<a href="#l7.89"></a><span id="l7.89">               // to never get created for popup if we create a new element.  We</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineat">@@ -558,22 +558,22 @@</span>
<a href="#l7.91"></a><span id="l7.91">                 popup.setAttribute(&quot;disableServers&quot;,</span>
<a href="#l7.92"></a><span id="l7.92">                                    this.getAttribute(&quot;disableServers&quot;));</span>
<a href="#l7.93"></a><span id="l7.93">               if (this.hasAttribute(&quot;position&quot;))</span>
<a href="#l7.94"></a><span id="l7.94">                 popup.setAttribute(&quot;position&quot;,</span>
<a href="#l7.95"></a><span id="l7.95">                                    this.getAttribute(&quot;position&quot;));</span>
<a href="#l7.96"></a><span id="l7.96"> </span>
<a href="#l7.97"></a><span id="l7.97">               // If there are labels, add the labels now</span>
<a href="#l7.98"></a><span id="l7.98">               if (labels) {</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineminus">-                var serverNode = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+                var serverNode = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l7.101"></a><span id="l7.101">                 serverNode.setAttribute(&quot;label&quot;, labels[folder.server.type]);</span>
<a href="#l7.102"></a><span id="l7.102">                 serverNode._folder = folder;</span>
<a href="#l7.103"></a><span id="l7.103">                 serverNode.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.104"></a><span id="l7.104">                 popup.appendChild(serverNode);</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineminus">-                let sep = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+                let sep = document.createXULElement(&quot;menuseparator&quot;);</span>
<a href="#l7.107"></a><span id="l7.107">                 sep.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.108"></a><span id="l7.108">                 popup.appendChild(sep);</span>
<a href="#l7.109"></a><span id="l7.109">               }</span>
<a href="#l7.110"></a><span id="l7.110"> </span>
<a href="#l7.111"></a><span id="l7.111">               popup.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.112"></a><span id="l7.112">               node.appendChild(popup);</span>
<a href="#l7.113"></a><span id="l7.113">             }</span>
<a href="#l7.114"></a><span id="l7.114"> </span>
<a href="#l7.115"></a><span id="l7.115" class="difflineat">@@ -598,28 +598,28 @@</span>
<a href="#l7.116"></a><span id="l7.116">          - This only builds the menu item in the top-level menulist.</span>
<a href="#l7.117"></a><span id="l7.117">          - The real submenu will be created once the popup is really shown,</span>
<a href="#l7.118"></a><span id="l7.118">          - via the _buildSpecialSubmenu method.</span>
<a href="#l7.119"></a><span id="l7.119">          --&gt;</span>
<a href="#l7.120"></a><span id="l7.120">       &lt;method name=&quot;_buildSpecialMenu&quot;&gt;</span>
<a href="#l7.121"></a><span id="l7.121">         &lt;parameter name=&quot;type&quot;/&gt;</span>
<a href="#l7.122"></a><span id="l7.122">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l7.123"></a><span id="l7.123">           // Now create the Recent folder and its children</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineminus">-          let menu = document.createElement(&quot;menu&quot;);</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+          let menu = document.createXULElement(&quot;menu&quot;);</span>
<a href="#l7.126"></a><span id="l7.126">           if (type == &quot;recent&quot;) {</span>
<a href="#l7.127"></a><span id="l7.127">             menu.setAttribute(&quot;label&quot;, this.getAttribute(&quot;recentLabel&quot;));</span>
<a href="#l7.128"></a><span id="l7.128">             menu.setAttribute(&quot;accesskey&quot;, this.getAttribute(&quot;recentAccessKey&quot;));</span>
<a href="#l7.129"></a><span id="l7.129">           } else {</span>
<a href="#l7.130"></a><span id="l7.130">             menu.setAttribute(&quot;label&quot;, this.getAttribute(&quot;favoritesLabel&quot;));</span>
<a href="#l7.131"></a><span id="l7.131">             menu.setAttribute(&quot;accesskey&quot;, this.getAttribute(&quot;favoritesAccessKey&quot;));</span>
<a href="#l7.132"></a><span id="l7.132">           }</span>
<a href="#l7.133"></a><span id="l7.133">           menu.setAttribute(&quot;special&quot;, type);</span>
<a href="#l7.134"></a><span id="l7.134">           menu.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.135"></a><span id="l7.135"> </span>
<a href="#l7.136"></a><span id="l7.136" class="difflineminus">-          let popup = document.createElement(&quot;menupopup&quot;);</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineplus">+          let popup = document.createXULElement(&quot;menupopup&quot;);</span>
<a href="#l7.138"></a><span id="l7.138">           popup.setAttribute(&quot;class&quot;, this.getAttribute(&quot;class&quot;));</span>
<a href="#l7.139"></a><span id="l7.139">           popup.addEventListener(&quot;popupshowing&quot;,</span>
<a href="#l7.140"></a><span id="l7.140">                                  () =&gt; this._buildSpecialSubmenu(menu),</span>
<a href="#l7.141"></a><span id="l7.141">                                  { once: true });</span>
<a href="#l7.142"></a><span id="l7.142"> </span>
<a href="#l7.143"></a><span id="l7.143">           menu.appendChild(popup);</span>
<a href="#l7.144"></a><span id="l7.144">           this.appendChild(menu);</span>
<a href="#l7.145"></a><span id="l7.145">         ]]&gt;&lt;/body&gt;</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineat">@@ -688,17 +688,17 @@</span>
<a href="#l7.147"></a><span id="l7.147">             folderItem.label = label;</span>
<a href="#l7.148"></a><span id="l7.148">           }</span>
<a href="#l7.149"></a><span id="l7.149"> </span>
<a href="#l7.150"></a><span id="l7.150">           // Make sure the entries are sorted alphabetically.</span>
<a href="#l7.151"></a><span id="l7.151">           specialFoldersMap.sort((a, b) =&gt; this.folderNameCompare(a.label, b.label));</span>
<a href="#l7.152"></a><span id="l7.152"> </span>
<a href="#l7.153"></a><span id="l7.153">           // Create entries for each of the recent folders.</span>
<a href="#l7.154"></a><span id="l7.154">           for (let folderItem of specialFoldersMap) {</span>
<a href="#l7.155"></a><span id="l7.155" class="difflineminus">-            let node = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l7.156"></a><span id="l7.156" class="difflineplus">+            let node = document.createXULElement(&quot;menuitem&quot;);</span>
<a href="#l7.157"></a><span id="l7.157"> </span>
<a href="#l7.158"></a><span id="l7.158">             node.setAttribute(&quot;label&quot;, folderItem.label);</span>
<a href="#l7.159"></a><span id="l7.159">             node._folder = folderItem.folder;</span>
<a href="#l7.160"></a><span id="l7.160"> </span>
<a href="#l7.161"></a><span id="l7.161">             node.setAttribute(&quot;class&quot;, &quot;folderMenuItem menuitem-iconic&quot;);</span>
<a href="#l7.162"></a><span id="l7.162">             this._setCssSelectors(folderItem.folder, node);</span>
<a href="#l7.163"></a><span id="l7.163">             node.setAttribute(&quot;generated&quot;, &quot;true&quot;);</span>
<a href="#l7.164"></a><span id="l7.164">             menu.menupopup.appendChild(node);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/base/search/content/searchWidgets.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/base/search/content/searchWidgets.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -553,17 +553,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">             this.mListBox.getItemAtIndex(0).mRemoveButton.disabled = this.mListBox.getRowCount() == 1;</span>
<a href="#l8.5"></a><span id="l8.5">           ]]&gt;</span>
<a href="#l8.6"></a><span id="l8.6">         &lt;/body&gt;</span>
<a href="#l8.7"></a><span id="l8.7">       &lt;/method&gt;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9">       &lt;method name=&quot;addRow&quot;&gt;</span>
<a href="#l8.10"></a><span id="l8.10">         &lt;body&gt;</span>
<a href="#l8.11"></a><span id="l8.11">           &lt;![CDATA[</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-            let listItem = document.createElement(&quot;richlistitem&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+            let listItem = document.createXULElement(&quot;richlistitem&quot;);</span>
<a href="#l8.14"></a><span id="l8.14">             listItem.className = &quot;ruleaction&quot;;</span>
<a href="#l8.15"></a><span id="l8.15">             listItem.setAttribute(&quot;onfocus&quot;, &quot;this.storeFocus();&quot;);</span>
<a href="#l8.16"></a><span id="l8.16">             this.mListBox.insertBefore(listItem, this.nextSibling);</span>
<a href="#l8.17"></a><span id="l8.17">             this.mListBox.ensureElementIsVisible(listItem);</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19">             // make sure the first remove button is enabled</span>
<a href="#l8.20"></a><span id="l8.20">             this.updateRemoveButton();</span>
<a href="#l8.21"></a><span id="l8.21">             checkActionsReorder();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/db/gloda/content/glodacomplete.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -27,17 +27,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">             // trim the leading/trailing whitespace</span>
<a href="#l9.5"></a><span id="l9.5">             var trimmedSearchString = controller.searchString.trim();</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">             let glodaCompleter = Cc[&quot;@mozilla.org/autocomplete/search;1?name=gloda&quot;]</span>
<a href="#l9.8"></a><span id="l9.8">                                    .getService(Ci.nsIAutoCompleteSearch)</span>
<a href="#l9.9"></a><span id="l9.9">                                    .wrappedJSObject;</span>
<a href="#l9.10"></a><span id="l9.10">             var result = glodaCompleter.curResult;</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-            item = document.createElement(&quot;richlistitem&quot;, { is: result.getStyleAt(this._currentIndex) });</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+            item = document.createXULElement(&quot;richlistitem&quot;, { is: result.getStyleAt(this._currentIndex) });</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">             // set these attributes before we set the class</span>
<a href="#l9.16"></a><span id="l9.16">             // so that we can use them from the constructor</span>
<a href="#l9.17"></a><span id="l9.17">             var row = result.getObjectAt(this._currentIndex);</span>
<a href="#l9.18"></a><span id="l9.18">             item.setAttribute(&quot;text&quot;, trimmedSearchString);</span>
<a href="#l9.19"></a><span id="l9.19">             item.setAttribute(&quot;type&quot;, result.getStyleAt(this._currentIndex));</span>
<a href="#l9.20"></a><span id="l9.20"> </span>
<a href="#l9.21"></a><span id="l9.21">             item.row = row;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

