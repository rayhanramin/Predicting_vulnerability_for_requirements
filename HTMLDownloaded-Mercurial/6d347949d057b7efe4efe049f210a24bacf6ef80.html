<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 29112:6d347949d057b7efe4efe049f210a24bacf6ef80</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 6d347949d057b7efe4efe049f210a24bacf6ef80" />
<meta property="og:url" content="/comm-central/rev/6d347949d057b7efe4efe049f210a24bacf6ef80" />
<meta property="og:description" content="Bug 1611678 - Clean up outdated plugin preferences in SeaMonkey. r=IanN" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 6d347949d057b7efe4efe049f210a24bacf6ef80 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/6d347949d057b7efe4efe049f210a24bacf6ef80">shortlog</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/6d347949d057b7efe4efe049f210a24bacf6ef80">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80">files</a> |
changeset |
<a href="/comm-central/raw-rev/6d347949d057b7efe4efe049f210a24bacf6ef80">raw</a>  | <a href="/comm-central/archive/6d347949d057b7efe4efe049f210a24bacf6ef80.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1611678">Bug 1611678</a> - Clean up outdated plugin preferences in SeaMonkey. r=IanN
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#114;&#97;&#110;&#107;&#45;&#82;&#97;&#105;&#110;&#101;&#114;&#32;&#71;&#114;&#97;&#104;&#108;&#32;&#60;&#102;&#114;&#103;&#114;&#97;&#104;&#108;&#64;&#103;&#109;&#120;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 05 Mar 2020 22:25:44 +0100</td></tr>

<tr>
 <td>changeset 29112</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/6d347949d057b7efe4efe049f210a24bacf6ef80">6d347949d057b7efe4efe049f210a24bacf6ef80</a></td>
</tr>



<tr>
<td>parent 29111</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1c4d7e7606f26b68cf972ec9be1e8a7020514673">1c4d7e7606f26b68cf972ec9be1e8a7020514673</a>
</td>
</tr>

<tr>
<td>child 29113</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/444f141ebc17217944af4c2b3839f721ca9cb31e">444f141ebc17217944af4c2b3839f721ca9cb31e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=6d347949d057b7efe4efe049f210a24bacf6ef80">17210</a></td></tr>
<tr><td>push user</td><td>frgrahl@gmx.net</td></tr>
<tr><td>push date</td><td class="date age">Mon, 30 Mar 2020 09:51:29 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@a27a39fd14d4 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a27a39fd14d429f9cd01db27d42a1b49e7312e0f">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a27a39fd14d429f9cd01db27d42a1b49e7312e0f&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a27a39fd14d429f9cd01db27d42a1b49e7312e0f&newProject=comm-central&newRevision=8e78266d3e9defb292f6214122e24dc8bfe09b21&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a27a39fd14d429f9cd01db27d42a1b49e7312e0f&newProject=comm-central&newRevision=8e78266d3e9defb292f6214122e24dc8bfe09b21&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a27a39fd14d429f9cd01db27d42a1b49e7312e0f&newProject=comm-central&newRevision=8e78266d3e9defb292f6214122e24dc8bfe09b21&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28IanN%29&revcount=50">IanN</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1611678">1611678</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1277905">1277905</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=874167">874167</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1090864">1090864</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=836415">836415</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1611678">Bug 1611678</a> - Clean up outdated plugin preferences in SeaMonkey. r=IanN

Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1277905">Bug 1277905</a> &quot;Remove plugincheck links from Firefox&quot;.
Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=874167">Bug 874167</a> part A &quot;remove nsNPAPIPlugin::RunPluginOOP and unused code paths&quot;
which landed with the wrong bug number <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1090864">Bug 1090864</a>.
Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=836415">Bug 836415</a> Kill PFS.
Remove a few unneeded Ci. consts.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/app/profile/suite-prefs.js">suite/app/profile/suite-prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/app/profile/suite-prefs.js">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/app/profile/suite-prefs.js">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/app/profile/suite-prefs.js">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/app/profile/suite-prefs.js">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/app/profile/suite-prefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginnotification.js">suite/browser/test/browser/browser_pluginnotification.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginnotification.js">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginnotification.js">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginnotification.js">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginnotification.js">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginnotification.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginplaypreview.js">suite/browser/test/browser/browser_pluginplaypreview.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginplaypreview.js">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginplaypreview.js">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginplaypreview.js">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginplaypreview.js">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/browser/test/browser/browser_pluginplaypreview.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/bindings/notification.xml">suite/components/bindings/notification.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/bindings/notification.xml">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/bindings/notification.xml">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/bindings/notification.xml">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/bindings/notification.xml">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/bindings/notification.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/nsSuiteGlue.js">suite/components/nsSuiteGlue.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/nsSuiteGlue.js">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/nsSuiteGlue.js">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/nsSuiteGlue.js">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/nsSuiteGlue.js">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/components/nsSuiteGlue.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/locales/en-US/chrome/common/notification.properties">suite/locales/en-US/chrome/common/notification.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/locales/en-US/chrome/common/notification.properties">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/locales/en-US/chrome/common/notification.properties">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/locales/en-US/chrome/common/notification.properties">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/locales/en-US/chrome/common/notification.properties">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/locales/en-US/chrome/common/notification.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/communicator/communicator.css">suite/themes/classic/communicator/communicator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/communicator/communicator.css">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/communicator/communicator.css">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/communicator/communicator.css">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/communicator/communicator.css">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/communicator/communicator.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/mac/communicator/communicator.css">suite/themes/classic/mac/communicator/communicator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/mac/communicator/communicator.css">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/mac/communicator/communicator.css">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/mac/communicator/communicator.css">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/mac/communicator/communicator.css">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/classic/mac/communicator/communicator.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/modern/communicator/communicator.css">suite/themes/modern/communicator/communicator.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/modern/communicator/communicator.css">file</a> |
<a href="/comm-central/annotate/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/modern/communicator/communicator.css">annotate</a> |
<a href="/comm-central/diff/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/modern/communicator/communicator.css">diff</a> |
<a href="/comm-central/comparison/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/modern/communicator/communicator.css">comparison</a> |
<a href="/comm-central/log/6d347949d057b7efe4efe049f210a24bacf6ef80/suite/themes/modern/communicator/communicator.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/app/profile/suite-prefs.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/app/profile/suite-prefs.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -743,36 +743,26 @@ pref(&quot;dom.disable_window_move_resize&quot;, t</span>
<a href="#l1.4"></a><span id="l1.4"> // prevent JS from raising or lowering windows</span>
<a href="#l1.5"></a><span id="l1.5"> pref(&quot;dom.disable_window_flip&quot;,        true);</span>
<a href="#l1.6"></a><span id="l1.6"> // prevent JS from disabling or replacing context menus</span>
<a href="#l1.7"></a><span id="l1.7"> pref(&quot;dom.event.contextmenu.enabled&quot;,  true);</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> pref(&quot;dom.identity.enabled&quot;, false);</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> #ifdef XP_MACOSX</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-// On mac, the default pref is per-architecture</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-pref(&quot;dom.ipc.plugins.enabled.i386&quot;, true);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-pref(&quot;dom.ipc.plugins.enabled.x86_64&quot;, true);</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-</span>
<a href="#l1.16"></a><span id="l1.16"> // This pref governs whether we attempt to work around problems caused by</span>
<a href="#l1.17"></a><span id="l1.17"> // plugins using OS calls to manipulate the cursor while running out-of-</span>
<a href="#l1.18"></a><span id="l1.18"> // process.  These workarounds all involve intercepting (hooking) certain</span>
<a href="#l1.19"></a><span id="l1.19"> // OS calls in the plugin process, then arranging to make certain OS calls</span>
<a href="#l1.20"></a><span id="l1.20"> // in the browser process.  Eventually plugins will be required to use the</span>
<a href="#l1.21"></a><span id="l1.21"> // NPAPI to manipulate the cursor, and these workarounds will be removed.</span>
<a href="#l1.22"></a><span id="l1.22"> // See bug 621117.</span>
<a href="#l1.23"></a><span id="l1.23"> pref(&quot;dom.ipc.plugins.nativeCursorSupport&quot;, true);</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-#else</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-pref(&quot;dom.ipc.plugins.enabled&quot;, true);</span>
<a href="#l1.26"></a><span id="l1.26"> #endif</span>
<a href="#l1.27"></a><span id="l1.27"> </span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-// plugin finder service url</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineminus">-pref(&quot;pfs.datasource.url&quot;, &quot;https://pfs.mozilla.org/plugins/PluginFinderService.php?mimetype=%PLUGIN_MIMETYPE%&amp;appID=%APP_ID%&amp;appVersion=%APP_VERSION%&amp;clientOS=%CLIENT_OS%&amp;chromeLocale=%CHROME_LOCALE%&quot;);</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-pref(&quot;plugins.update.url&quot;, &quot;https://www.mozilla.org/%LOCALE%/plugincheck/&quot;);</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-pref(&quot;plugins.update.notifyUser&quot;, false);</span>
<a href="#l1.32"></a><span id="l1.32"> pref(&quot;plugins.hide_infobar_for_outdated_plugin&quot;, false);</span>
<a href="#l1.33"></a><span id="l1.33"> pref(&quot;plugins.hide_infobar_for_missing_plugin&quot;, false);</span>
<a href="#l1.34"></a><span id="l1.34"> pref(&quot;plugins.click_to_play&quot;, true);</span>
<a href="#l1.35"></a><span id="l1.35"> pref(&quot;plugin.disable&quot;, false);</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37"> // Digital Rights Management, Encrypted Media Extensions</span>
<a href="#l1.38"></a><span id="l1.38"> pref(&quot;media.eme.enabled&quot;, false);</span>
<a href="#l1.39"></a><span id="l1.39"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/browser/test/browser/browser_pluginnotification.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_pluginnotification.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -101,52 +101,44 @@ function pageLoad() {</span>
<a href="#l2.4"></a><span id="l2.4"> function prepareTest(nextTest, url) {</span>
<a href="#l2.5"></a><span id="l2.5">   gNextTest = nextTest;</span>
<a href="#l2.6"></a><span id="l2.6">   gTestBrowser.contentWindow.location = url;</span>
<a href="#l2.7"></a><span id="l2.7"> }</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> // Tests a page with an unknown plugin in it.</span>
<a href="#l2.10"></a><span id="l2.10"> function test1() {</span>
<a href="#l2.11"></a><span id="l2.11">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  ok(notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 1, Should have displayed the missing plugin notification&quot;);</span>
<a href="#l2.13"></a><span id="l2.13">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 1, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-  ok(notificationBox._missingPlugins, &quot;Test 1, Should be a missing plugin list&quot;);</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-  ok(notificationBox.missingPlugins.has(&quot;application/x-unknown&quot;), &quot;Test 1, Should know about application/x-unknown&quot;);</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-  ok(!notificationBox.missingPlugins.has(&quot;application/x-test&quot;), &quot;Test 1, Should not know about application/x-test&quot;);</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18">   var pluginNode = gTestBrowser.contentDocument.getElementById(&quot;unknown&quot;);</span>
<a href="#l2.19"></a><span id="l2.19">   ok(pluginNode, &quot;Test 1, Found plugin in page&quot;);</span>
<a href="#l2.20"></a><span id="l2.20">   var objLoadingContent = pluginNode.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.21"></a><span id="l2.21">   is(objLoadingContent.pluginFallbackType, Ci.nsIObjectLoadingContent.PLUGIN_UNSUPPORTED, &quot;Test 1, plugin fallback type should be PLUGIN_UNSUPPORTED&quot;);</span>
<a href="#l2.22"></a><span id="l2.22"> </span>
<a href="#l2.23"></a><span id="l2.23">   var plugin = getTestPlugin();</span>
<a href="#l2.24"></a><span id="l2.24">   ok(plugin, &quot;Should have a test plugin&quot;);</span>
<a href="#l2.25"></a><span id="l2.25">   plugin.enabledState = Ci.nsIPluginTag.STATE_ENABLED;</span>
<a href="#l2.26"></a><span id="l2.26">   prepareTest(test2, gTestRoot + &quot;plugin_test.html&quot;);</span>
<a href="#l2.27"></a><span id="l2.27"> }</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29"> // Tests a page with a working plugin in it.</span>
<a href="#l2.30"></a><span id="l2.30"> function test2() {</span>
<a href="#l2.31"></a><span id="l2.31">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 2, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.33"></a><span id="l2.33">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 2, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 2, Should not be a missing plugin list&quot;);</span>
<a href="#l2.35"></a><span id="l2.35"> </span>
<a href="#l2.36"></a><span id="l2.36">   var plugin = getTestPlugin();</span>
<a href="#l2.37"></a><span id="l2.37">   ok(plugin, &quot;Should have a test plugin&quot;);</span>
<a href="#l2.38"></a><span id="l2.38">   plugin.enabledState = Ci.nsIPluginTag.STATE_DISABLED;</span>
<a href="#l2.39"></a><span id="l2.39">   prepareTest(test3, gTestRoot + &quot;plugin_test.html&quot;);</span>
<a href="#l2.40"></a><span id="l2.40"> }</span>
<a href="#l2.41"></a><span id="l2.41"> </span>
<a href="#l2.42"></a><span id="l2.42"> // Tests a page with a disabled plugin in it.</span>
<a href="#l2.43"></a><span id="l2.43"> function test3() {</span>
<a href="#l2.44"></a><span id="l2.44">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 3, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.46"></a><span id="l2.46">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 3, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 3, Should not be a missing plugin list&quot;);</span>
<a href="#l2.48"></a><span id="l2.48"> </span>
<a href="#l2.49"></a><span id="l2.49">   new TabOpenListener(&quot;about:addons&quot;, test4, prepareTest5);</span>
<a href="#l2.50"></a><span id="l2.50"> </span>
<a href="#l2.51"></a><span id="l2.51">   var pluginNode = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l2.52"></a><span id="l2.52">   ok(pluginNode, &quot;Test 3, Found plugin in page&quot;);</span>
<a href="#l2.53"></a><span id="l2.53">   var objLoadingContent = pluginNode.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.54"></a><span id="l2.54">   is(objLoadingContent.pluginFallbackType, Ci.nsIObjectLoadingContent.PLUGIN_DISABLED, &quot;Test 3, plugin fallback type should be PLUGIN_DISABLED&quot;);</span>
<a href="#l2.55"></a><span id="l2.55">   var manageLink = gTestBrowser.contentDocument.getAnonymousElementByAttribute(pluginNode, &quot;anonid&quot;, &quot;managePluginsLink&quot;);</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineat">@@ -168,82 +160,66 @@ function prepareTest5() {</span>
<a href="#l2.57"></a><span id="l2.57">       info(&quot;prepareTest5 callback&quot;);</span>
<a href="#l2.58"></a><span id="l2.58">       prepareTest(test5, gTestRoot + &quot;plugin_test.html&quot;);</span>
<a href="#l2.59"></a><span id="l2.59">     });</span>
<a href="#l2.60"></a><span id="l2.60"> }</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62"> // Tests a page with a blocked plugin in it.</span>
<a href="#l2.63"></a><span id="l2.63"> function test5() {</span>
<a href="#l2.64"></a><span id="l2.64">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 5, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.66"></a><span id="l2.66">   ok(notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 5, Should have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineminus">-  ok(notificationBox._missingPlugins, &quot;Test 5, Should be a missing plugin list&quot;);</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-  ok(notificationBox.missingPlugins.has(&quot;application/x-test&quot;), &quot;Test 5, Should know about application/x-test&quot;);</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-  ok(!notificationBox.missingPlugins.has(&quot;application/x-unknown&quot;), &quot;Test 5, Should not know about application/x-unknown&quot;);</span>
<a href="#l2.70"></a><span id="l2.70">   var pluginNode = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l2.71"></a><span id="l2.71">   ok(pluginNode, &quot;Test 5, Found plugin in page&quot;);</span>
<a href="#l2.72"></a><span id="l2.72">   var objLoadingContent = pluginNode.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.73"></a><span id="l2.73">   is(objLoadingContent.pluginFallbackType, Ci.nsIObjectLoadingContent.PLUGIN_BLOCKLISTED, &quot;Test 5, plugin fallback type should be PLUGIN_BLOCKLISTED&quot;);</span>
<a href="#l2.74"></a><span id="l2.74"> </span>
<a href="#l2.75"></a><span id="l2.75">   prepareTest(test6, gTestRoot + &quot;plugin_both.html&quot;);</span>
<a href="#l2.76"></a><span id="l2.76"> }</span>
<a href="#l2.77"></a><span id="l2.77"> </span>
<a href="#l2.78"></a><span id="l2.78"> // Tests a page with a blocked and unknown plugin in it.</span>
<a href="#l2.79"></a><span id="l2.79"> function test6() {</span>
<a href="#l2.80"></a><span id="l2.80">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineminus">-  ok(notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 6, Should have displayed the missing plugin notification&quot;);</span>
<a href="#l2.82"></a><span id="l2.82">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 6, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineminus">-  ok(notificationBox._missingPlugins, &quot;Test 6, Should be a missing plugin list&quot;);</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineminus">-  ok(notificationBox.missingPlugins.has(&quot;application/x-unknown&quot;), &quot;Test 6, Should know about application/x-unknown&quot;);</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineminus">-  ok(notificationBox.missingPlugins.has(&quot;application/x-test&quot;), &quot;Test 6, Should know about application/x-test&quot;);</span>
<a href="#l2.86"></a><span id="l2.86"> </span>
<a href="#l2.87"></a><span id="l2.87">   prepareTest(test7, gTestRoot + &quot;plugin_both2.html&quot;);</span>
<a href="#l2.88"></a><span id="l2.88"> }</span>
<a href="#l2.89"></a><span id="l2.89"> </span>
<a href="#l2.90"></a><span id="l2.90"> // Tests a page with a blocked and unknown plugin in it (alternate order to above).</span>
<a href="#l2.91"></a><span id="l2.91"> function test7() {</span>
<a href="#l2.92"></a><span id="l2.92">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-  ok(notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 7, Should have displayed the missing plugin notification&quot;);</span>
<a href="#l2.94"></a><span id="l2.94">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 7, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-  ok(notificationBox._missingPlugins, &quot;Test 7, Should be a missing plugin list&quot;);</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-  ok(notificationBox.missingPlugins.has(&quot;application/x-unknown&quot;), &quot;Test 7, Should know about application/x-unknown&quot;);</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineminus">-  ok(notificationBox.missingPlugins.has(&quot;application/x-test&quot;), &quot;Test 7, Should know about application/x-test&quot;);</span>
<a href="#l2.98"></a><span id="l2.98"> </span>
<a href="#l2.99"></a><span id="l2.99">   Services.prefs.setBoolPref(&quot;plugins.click_to_play&quot;, true);</span>
<a href="#l2.100"></a><span id="l2.100">   var plugin = getTestPlugin();</span>
<a href="#l2.101"></a><span id="l2.101">   plugin.enabledState = Ci.nsIPluginTag.STATE_CLICKTOPLAY;</span>
<a href="#l2.102"></a><span id="l2.102">   getTestPlugin(&quot;Second Test Plug-in&quot;).enabledState = Ci.nsIPluginTag.STATE_CLICKTOPLAY;</span>
<a href="#l2.103"></a><span id="l2.103"> </span>
<a href="#l2.104"></a><span id="l2.104">   setAndUpdateBlocklist(gHttpTestRoot + &quot;blockNoPlugins.xml&quot;, function() {</span>
<a href="#l2.105"></a><span id="l2.105">     prepareTest(test8, gTestRoot + &quot;plugin_test.html&quot;);</span>
<a href="#l2.106"></a><span id="l2.106">   });</span>
<a href="#l2.107"></a><span id="l2.107"> }</span>
<a href="#l2.108"></a><span id="l2.108"> </span>
<a href="#l2.109"></a><span id="l2.109"> // Tests a page with a working plugin that is click-to-play</span>
<a href="#l2.110"></a><span id="l2.110"> function test8() {</span>
<a href="#l2.111"></a><span id="l2.111">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 8, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.113"></a><span id="l2.113">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 8, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 8, Should not be a missing plugin list&quot;);</span>
<a href="#l2.115"></a><span id="l2.115">   ok(PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser), &quot;Test 8, Should have a click-to-play notification&quot;);</span>
<a href="#l2.116"></a><span id="l2.116"> </span>
<a href="#l2.117"></a><span id="l2.117">   var pluginNode = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l2.118"></a><span id="l2.118">   ok(pluginNode, &quot;Test 8, Found plugin in page&quot;);</span>
<a href="#l2.119"></a><span id="l2.119">   var objLoadingContent = pluginNode.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.120"></a><span id="l2.120">   is(objLoadingContent.pluginFallbackType, Ci.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY, &quot;Test 8, plugin fallback type should be PLUGIN_CLICK_TO_PLAY&quot;);</span>
<a href="#l2.121"></a><span id="l2.121"> </span>
<a href="#l2.122"></a><span id="l2.122">   prepareTest(test9a, gTestRoot + &quot;plugin_test2.html&quot;);</span>
<a href="#l2.123"></a><span id="l2.123"> }</span>
<a href="#l2.124"></a><span id="l2.124"> </span>
<a href="#l2.125"></a><span id="l2.125"> // Tests that activating one click-to-play plugin will activate only that plugin (part 1/3)</span>
<a href="#l2.126"></a><span id="l2.126"> function test9a() {</span>
<a href="#l2.127"></a><span id="l2.127">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9a, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.129"></a><span id="l2.129">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 9a, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.130"></a><span id="l2.130" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 9a, Should not be a missing plugin list&quot;);</span>
<a href="#l2.131"></a><span id="l2.131">   var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l2.132"></a><span id="l2.132">   ok(notification, &quot;Test 9a, Should have a click-to-play notification&quot;);</span>
<a href="#l2.133"></a><span id="l2.133">   ok(notification.options.centerActions.length == 1, &quot;Test 9a, Should have only one type of plugin in the notification&quot;);</span>
<a href="#l2.134"></a><span id="l2.134"> </span>
<a href="#l2.135"></a><span id="l2.135">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l2.136"></a><span id="l2.136">   var plugin1 = doc.getElementById(&quot;test1&quot;);</span>
<a href="#l2.137"></a><span id="l2.137">   var rect = doc.getAnonymousElementByAttribute(plugin1, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l2.138"></a><span id="l2.138">   ok(rect.width == 200, &quot;Test 9a, Plugin with id=&quot; + plugin1.id + &quot; overlay rect should have 200px width before being clicked&quot;);</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineat">@@ -262,19 +238,17 @@ function test9a() {</span>
<a href="#l2.140"></a><span id="l2.140">   var objLoadingContent = plugin1.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.141"></a><span id="l2.141">   var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l2.142"></a><span id="l2.142">   waitForCondition(condition, test9b, &quot;Test 9a, Waited too long for plugin to activate&quot;);</span>
<a href="#l2.143"></a><span id="l2.143"> }</span>
<a href="#l2.144"></a><span id="l2.144"> </span>
<a href="#l2.145"></a><span id="l2.145"> // Tests that activating one click-to-play plugin will activate only that plugin (part 2/3)</span>
<a href="#l2.146"></a><span id="l2.146"> function test9b() {</span>
<a href="#l2.147"></a><span id="l2.147">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9b, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.149"></a><span id="l2.149">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 9b, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.150"></a><span id="l2.150" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 9b, Should not be a missing plugin list&quot;);</span>
<a href="#l2.151"></a><span id="l2.151">   var notification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l2.152"></a><span id="l2.152">   ok(notification, &quot;Test 9b, Click to play notification should not be removed now&quot;);</span>
<a href="#l2.153"></a><span id="l2.153">   ok(notification.options.centerActions.length == 1, &quot;Test 9b, Should have only one type of plugin in the notification&quot;);</span>
<a href="#l2.154"></a><span id="l2.154"> </span>
<a href="#l2.155"></a><span id="l2.155">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l2.156"></a><span id="l2.156">   var plugin1 = doc.getElementById(&quot;test1&quot;);</span>
<a href="#l2.157"></a><span id="l2.157">   var pluginRect1 = doc.getAnonymousElementByAttribute(plugin1, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l2.158"></a><span id="l2.158">   ok(pluginRect1.width == 0, &quot;Test 9b, Plugin with id=&quot; + plugin1.id + &quot; should have click-to-play overlay with zero width&quot;);</span>
<a href="#l2.159"></a><span id="l2.159" class="difflineat">@@ -294,19 +268,17 @@ function test9b() {</span>
<a href="#l2.160"></a><span id="l2.160">   var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l2.161"></a><span id="l2.161">   waitForCondition(condition, test9c, &quot;Test 9b, Waited too long for plugin to activate&quot;);</span>
<a href="#l2.162"></a><span id="l2.162"> }</span>
<a href="#l2.163"></a><span id="l2.163"> </span>
<a href="#l2.164"></a><span id="l2.164"> //</span>
<a href="#l2.165"></a><span id="l2.165"> // Tests that activating one click-to-play plugin will activate only that plugin (part 3/3)</span>
<a href="#l2.166"></a><span id="l2.166"> function test9c() {</span>
<a href="#l2.167"></a><span id="l2.167">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 9c, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.169"></a><span id="l2.169">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 9c, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 9c, Should not be a missing plugin list&quot;);</span>
<a href="#l2.171"></a><span id="l2.171">   ok(!PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser), &quot;Test 9c, Click to play notification should be removed now&quot;);</span>
<a href="#l2.172"></a><span id="l2.172"> </span>
<a href="#l2.173"></a><span id="l2.173">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l2.174"></a><span id="l2.174">   var plugin1 = doc.getElementById(&quot;test1&quot;);</span>
<a href="#l2.175"></a><span id="l2.175">   var pluginRect1 = doc.getAnonymousElementByAttribute(plugin1, &quot;anonid&quot;, &quot;main&quot;).getBoundingClientRect();</span>
<a href="#l2.176"></a><span id="l2.176">   ok(pluginRect1.width == 0, &quot;Test 9c, Plugin with id=&quot; + plugin1.id + &quot; should have click-to-play overlay with zero width&quot;);</span>
<a href="#l2.177"></a><span id="l2.177">   ok(pluginRect1.height == 0, &quot;Test 9c, Plugin with id=&quot; + plugin1.id + &quot; should have click-to-play overlay with zero height&quot;);</span>
<a href="#l2.178"></a><span id="l2.178">   var objLoadingContent = plugin1.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.179"></a><span id="l2.179" class="difflineat">@@ -320,19 +292,17 @@ function test9c() {</span>
<a href="#l2.180"></a><span id="l2.180">   ok(objLoadingContent.activated, &quot;Test 9c, Plugin with id=&quot; + plugin2.id + &quot; should be activated&quot;);</span>
<a href="#l2.181"></a><span id="l2.181"> </span>
<a href="#l2.182"></a><span id="l2.182">   prepareTest(test10a, gTestRoot + &quot;plugin_test3.html&quot;);</span>
<a href="#l2.183"></a><span id="l2.183"> }</span>
<a href="#l2.184"></a><span id="l2.184"> </span>
<a href="#l2.185"></a><span id="l2.185"> // Tests that activating a hidden click-to-play plugin through the notification works (part 1/2)</span>
<a href="#l2.186"></a><span id="l2.186"> function test10a() {</span>
<a href="#l2.187"></a><span id="l2.187">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l2.188"></a><span id="l2.188" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 10a, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l2.189"></a><span id="l2.189">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 10a, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l2.190"></a><span id="l2.190" class="difflineminus">-  ok(!notificationBox._missingPlugins, &quot;Test 10a, Should not be a missing plugin list&quot;);</span>
<a href="#l2.191"></a><span id="l2.191">   var popupNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l2.192"></a><span id="l2.192">   ok(popupNotification, &quot;Test 10a, Should have a click-to-play notification&quot;);</span>
<a href="#l2.193"></a><span id="l2.193">   var plugin = gTestBrowser.contentDocument.getElementById(&quot;test&quot;);</span>
<a href="#l2.194"></a><span id="l2.194">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.195"></a><span id="l2.195">   ok(!objLoadingContent.activated, &quot;Test 10a, Plugin should not be activated&quot;);</span>
<a href="#l2.196"></a><span id="l2.196"> </span>
<a href="#l2.197"></a><span id="l2.197">   popupNotification.mainAction.callback();</span>
<a href="#l2.198"></a><span id="l2.198">   var condition = () =&gt; objLoadingContent.activated;</span>
<a href="#l2.199"></a><span id="l2.199" class="difflineat">@@ -605,18 +575,16 @@ function test16d() {</span>
<a href="#l2.200"></a><span id="l2.200">   prepareTest(test17, gTestRoot + &quot;plugin_bug749455.html&quot;);</span>
<a href="#l2.201"></a><span id="l2.201"> }</span>
<a href="#l2.202"></a><span id="l2.202"> </span>
<a href="#l2.203"></a><span id="l2.203"> // Tests that mContentType is used for click-to-play plugins, and not the</span>
<a href="#l2.204"></a><span id="l2.204"> // inspected type.</span>
<a href="#l2.205"></a><span id="l2.205"> function test17() {</span>
<a href="#l2.206"></a><span id="l2.206">   var clickToPlayNotification = PopupNotifications.getNotification(&quot;click-to-play-plugins&quot;, gTestBrowser);</span>
<a href="#l2.207"></a><span id="l2.207">   ok(clickToPlayNotification, &quot;Test 17, Should have a click-to-play notification&quot;);</span>
<a href="#l2.208"></a><span id="l2.208" class="difflineminus">-  var missingNotification = PopupNotifications.getNotification(&quot;missing-plugins&quot;, gTestBrowser);</span>
<a href="#l2.209"></a><span id="l2.209" class="difflineminus">-  ok(!missingNotification, &quot;Test 17, Should not have a missing plugin notification&quot;);</span>
<a href="#l2.210"></a><span id="l2.210"> </span>
<a href="#l2.211"></a><span id="l2.211">   setAndUpdateBlocklist(gHttpTestRoot + &quot;blockPluginVulnerableUpdatable.xml&quot;,</span>
<a href="#l2.212"></a><span id="l2.212">   function() {</span>
<a href="#l2.213"></a><span id="l2.213">     prepareTest(test18a, gHttpTestRoot + &quot;plugin_test.html&quot;);</span>
<a href="#l2.214"></a><span id="l2.214">   });</span>
<a href="#l2.215"></a><span id="l2.215"> }</span>
<a href="#l2.216"></a><span id="l2.216"> </span>
<a href="#l2.217"></a><span id="l2.217"> const Cm = Components.manager;</span>
<a href="#l2.218"></a><span id="l2.218" class="difflineat">@@ -635,26 +603,25 @@ function test18a() {</span>
<a href="#l2.219"></a><span id="l2.219">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l2.220"></a><span id="l2.220">   is(objLoadingContent.pluginFallbackType, Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE, &quot;Test 18a, plugin fallback type should be PLUGIN_VULNERABLE_UPDATABLE&quot;);</span>
<a href="#l2.221"></a><span id="l2.221">   ok(!objLoadingContent.activated, &quot;Test 18a, Plugin should not be activated&quot;);</span>
<a href="#l2.222"></a><span id="l2.222">   var overlay = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;main&quot;);</span>
<a href="#l2.223"></a><span id="l2.223">   ok(overlay.style.visibility != &quot;hidden&quot;, &quot;Test 18a, Plugin overlay should exist, not be hidden&quot;);</span>
<a href="#l2.224"></a><span id="l2.224">   var updateLink = doc.getAnonymousElementByAttribute(plugin, &quot;anonid&quot;, &quot;checkForUpdatesLink&quot;);</span>
<a href="#l2.225"></a><span id="l2.225">   ok(updateLink.style.visibility != &quot;hidden&quot;, &quot;Test 18a, Plugin should have an update link&quot;);</span>
<a href="#l2.226"></a><span id="l2.226"> </span>
<a href="#l2.227"></a><span id="l2.227" class="difflineminus">-  var tabOpenListener = new TabOpenListener(Services.urlFormatter.formatURLPref(&quot;plugins.update.url&quot;), false, false);</span>
<a href="#l2.228"></a><span id="l2.228" class="difflineplus">+  var tabOpenListener = new TabOpenListener(null, false, false);</span>
<a href="#l2.229"></a><span id="l2.229">   tabOpenListener.handleEvent = function(event) {</span>
<a href="#l2.230"></a><span id="l2.230">     if (event.type == &quot;TabOpen&quot;) {</span>
<a href="#l2.231"></a><span id="l2.231">       gBrowser.tabContainer.removeEventListener(&quot;TabOpen&quot;, this);</span>
<a href="#l2.232"></a><span id="l2.232">       this.tab = event.originalTarget;</span>
<a href="#l2.233"></a><span id="l2.233">       this.browser = this.tab.linkedBrowser;</span>
<a href="#l2.234"></a><span id="l2.234">       gBrowser.addEventListener(&quot;pageshow&quot;, this);</span>
<a href="#l2.235"></a><span id="l2.235">     } else if (event.type == &quot;pageshow&quot;) {</span>
<a href="#l2.236"></a><span id="l2.236">       gBrowser.removeEventListener(&quot;pageshow&quot;, this);</span>
<a href="#l2.237"></a><span id="l2.237" class="difflineminus">-      is(this.browser.contentDocument.location.href, this.url, &quot;Test 18a, Update link should open up the plugin check page&quot;);</span>
<a href="#l2.238"></a><span id="l2.238">       gBrowser.removeTab(this.tab);</span>
<a href="#l2.239"></a><span id="l2.239">       test18b();</span>
<a href="#l2.240"></a><span id="l2.240">     }</span>
<a href="#l2.241"></a><span id="l2.241">   };</span>
<a href="#l2.242"></a><span id="l2.242">   EventUtils.synthesizeMouseAtCenter(updateLink, {}, gTestBrowser.contentWindow);</span>
<a href="#l2.243"></a><span id="l2.243"> }</span>
<a href="#l2.244"></a><span id="l2.244"> </span>
<a href="#l2.245"></a><span id="l2.245"> function test18b() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/browser/test/browser/browser_pluginplaypreview.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/browser/test/browser/browser_pluginplaypreview.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -188,17 +188,16 @@ function prepareTest(nextTest, url, skip</span>
<a href="#l3.4"></a><span id="l3.4">   gNextTest = nextTest;</span>
<a href="#l3.5"></a><span id="l3.5">   gNextTestSkip = skip;</span>
<a href="#l3.6"></a><span id="l3.6">   gTestBrowser.contentWindow.location = url;</span>
<a href="#l3.7"></a><span id="l3.7"> }</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> // Tests a page with normal play preview registration (1/2)</span>
<a href="#l3.10"></a><span id="l3.10"> function test1a() {</span>
<a href="#l3.11"></a><span id="l3.11">   var notificationBox = gBrowser.getNotificationBox(gTestBrowser);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  ok(!notificationBox.getNotificationWithValue(&quot;missing-plugins&quot;), &quot;Test 1a, Should not have displayed the missing plugin notification&quot;);</span>
<a href="#l3.13"></a><span id="l3.13">   ok(!notificationBox.getNotificationWithValue(&quot;blocked-plugins&quot;), &quot;Test 1a, Should not have displayed the blocked plugin notification&quot;);</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15">   var pluginInfo = getTestPlugin();</span>
<a href="#l3.16"></a><span id="l3.16">   ok(pluginInfo, &quot;Should have a test plugin&quot;);</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18">   var doc = gTestBrowser.contentDocument;</span>
<a href="#l3.19"></a><span id="l3.19">   var plugin = doc.getElementById(&quot;test&quot;);</span>
<a href="#l3.20"></a><span id="l3.20">   var objLoadingContent = plugin.QueryInterface(Ci.nsIObjectLoadingContent);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/components/bindings/notification.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/components/bindings/notification.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -475,20 +475,16 @@</span>
<a href="#l4.4"></a><span id="l4.4">                   if (outdatedNotification)</span>
<a href="#l4.5"></a><span id="l4.5">                     this.removeNotification(outdatedNotification);</span>
<a href="#l4.6"></a><span id="l4.6">                 }</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8">                 if (aData == &quot;plugins.hide_infobar_for_missing_plugin&quot;) {</span>
<a href="#l4.9"></a><span id="l4.9">                   if (!Services.prefs.getBoolPref(aData))</span>
<a href="#l4.10"></a><span id="l4.10">                     return;</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-                  var missingNotification = this.getNotificationWithValue(&quot;missing-plugins&quot;);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-                  if (missingNotification)</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-                    this.removeNotification(missingNotification);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-</span>
<a href="#l4.16"></a><span id="l4.16">                   var disabledNotification = this.getNotificationWithValue(&quot;disabled-plugins&quot;);</span>
<a href="#l4.17"></a><span id="l4.17">                   if (disabledNotification)</span>
<a href="#l4.18"></a><span id="l4.18">                     this.removeNotification(disabledNotification);</span>
<a href="#l4.19"></a><span id="l4.19"> </span>
<a href="#l4.20"></a><span id="l4.20">                   var blockedNotification = this.getNotificationWithValue(&quot;blocked-plugins&quot;);</span>
<a href="#l4.21"></a><span id="l4.21">                   if (blockedNotification)</span>
<a href="#l4.22"></a><span id="l4.22">                     this.removeNotification(blockedNotification);</span>
<a href="#l4.23"></a><span id="l4.23">                 }</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineat">@@ -589,17 +585,16 @@</span>
<a href="#l4.25"></a><span id="l4.25"> </span>
<a href="#l4.26"></a><span id="l4.26">             if (Services.prefs.getBoolPref(aPref || &quot;plugins.hide_infobar_for_missing_plugin&quot;))</span>
<a href="#l4.27"></a><span id="l4.27">               return;</span>
<a href="#l4.28"></a><span id="l4.28"> </span>
<a href="#l4.29"></a><span id="l4.29">             var notification;</span>
<a href="#l4.30"></a><span id="l4.30">             var notifications = [</span>
<a href="#l4.31"></a><span id="l4.31">               &quot;blocked-plugins&quot;,</span>
<a href="#l4.32"></a><span id="l4.32">               &quot;disabled-plugins&quot;,</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-              &quot;missing-plugins&quot;,</span>
<a href="#l4.34"></a><span id="l4.34">               &quot;outdated-plugins&quot;,</span>
<a href="#l4.35"></a><span id="l4.35">             ];</span>
<a href="#l4.36"></a><span id="l4.36"> </span>
<a href="#l4.37"></a><span id="l4.37">             // Remove lower priority notifications.</span>
<a href="#l4.38"></a><span id="l4.38">             for (var i = 0; notifications[i] != aNotification; i++) {</span>
<a href="#l4.39"></a><span id="l4.39">               notification = this.getNotificationWithValue(notifications[i]);</span>
<a href="#l4.40"></a><span id="l4.40">               if (notification)</span>
<a href="#l4.41"></a><span id="l4.41">                 notification.close();</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineat">@@ -620,47 +615,44 @@</span>
<a href="#l4.43"></a><span id="l4.43">         &lt;/body&gt;</span>
<a href="#l4.44"></a><span id="l4.44">       &lt;/method&gt;</span>
<a href="#l4.45"></a><span id="l4.45"> </span>
<a href="#l4.46"></a><span id="l4.46">       &lt;method name=&quot;canActivatePlugin&quot;&gt;</span>
<a href="#l4.47"></a><span id="l4.47">         &lt;parameter name=&quot;aPlugin&quot;/&gt;</span>
<a href="#l4.48"></a><span id="l4.48">         &lt;parameter name=&quot;aSkipFallbackType&quot;/&gt;</span>
<a href="#l4.49"></a><span id="l4.49">         &lt;body&gt;</span>
<a href="#l4.50"></a><span id="l4.50">           &lt;![CDATA[</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-            const nsIObjectLoadingContent = Ci.nsIObjectLoadingContent;</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-            var objLoadingContent = aPlugin.QueryInterface(nsIObjectLoadingContent);</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+            var objLoadingContent = aPlugin.QueryInterface(Ci.nsIObjectLoadingContent);</span>
<a href="#l4.54"></a><span id="l4.54">             var actualType = objLoadingContent.actualType;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-            if (objLoadingContent.getContentTypeForMIMEType(actualType) != nsIObjectLoadingContent.TYPE_PLUGIN ||</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+            if (objLoadingContent.getContentTypeForMIMEType(actualType) != Ci.nsIObjectLoadingContent.TYPE_PLUGIN ||</span>
<a href="#l4.57"></a><span id="l4.57">                 objLoadingContent.activated ||</span>
<a href="#l4.58"></a><span id="l4.58">                 (!aSkipFallbackType &amp;&amp;</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-                 (objLoadingContent.pluginFallbackType &lt; nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY ||</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-                  objLoadingContent.pluginFallbackType &gt; nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE)))</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+                 (objLoadingContent.pluginFallbackType &lt; Ci.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY ||</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+                  objLoadingContent.pluginFallbackType &gt; Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE)))</span>
<a href="#l4.63"></a><span id="l4.63">               return false;</span>
<a href="#l4.64"></a><span id="l4.64"> </span>
<a href="#l4.65"></a><span id="l4.65">             var ph = Cc[&quot;@mozilla.org/plugin/host;1&quot;]</span>
<a href="#l4.66"></a><span id="l4.66">                        .getService(Ci.nsIPluginHost);</span>
<a href="#l4.67"></a><span id="l4.67">             var permissionString = ph.getPermissionStringForType(actualType);</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineminus">-            const nsIPermissionManager = Ci.nsIPermissionManager;</span>
<a href="#l4.69"></a><span id="l4.69">             var pm = Cc[&quot;@mozilla.org/permissionmanager;1&quot;]</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineminus">-                       .getService(nsIPermissionManager);</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+                       .getService(Ci.nsIPermissionManager);</span>
<a href="#l4.72"></a><span id="l4.72">             var pluginPermission = pm.testPermission(this.activeBrowser.currentURI, permissionString);</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-            return pluginPermission != nsIPermissionManager.DENY_ACTION;</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+            return pluginPermission != Ci.nsIPermissionManager.DENY_ACTION;</span>
<a href="#l4.75"></a><span id="l4.75">           ]]&gt;</span>
<a href="#l4.76"></a><span id="l4.76">         &lt;/body&gt;</span>
<a href="#l4.77"></a><span id="l4.77">       &lt;/method&gt;</span>
<a href="#l4.78"></a><span id="l4.78"> </span>
<a href="#l4.79"></a><span id="l4.79">       &lt;method name=&quot;setPermissionForPlugins&quot;&gt;</span>
<a href="#l4.80"></a><span id="l4.80">         &lt;parameter name=&quot;aPermission&quot;/&gt;</span>
<a href="#l4.81"></a><span id="l4.81">         &lt;body&gt;</span>
<a href="#l4.82"></a><span id="l4.82">           &lt;![CDATA[</span>
<a href="#l4.83"></a><span id="l4.83">             var ph = Cc[&quot;@mozilla.org/plugin/host;1&quot;]</span>
<a href="#l4.84"></a><span id="l4.84">                        .getService(Ci.nsIPluginHost);</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-            const nsIPermissionManager = Ci.nsIPermissionManager;</span>
<a href="#l4.86"></a><span id="l4.86">             var pm = Cc[&quot;@mozilla.org/permissionmanager;1&quot;]</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-                       .getService(nsIPermissionManager);</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineplus">+                       .getService(Ci.nsIPermissionManager);</span>
<a href="#l4.89"></a><span id="l4.89">             for (var type of this.clickToPlayTypes) {</span>
<a href="#l4.90"></a><span id="l4.90">               var permissionString = ph.getPermissionStringForType(type);</span>
<a href="#l4.91"></a><span id="l4.91">               pm.add(this.activeBrowser.currentURI, permissionString, aPermission);</span>
<a href="#l4.92"></a><span id="l4.92">             }</span>
<a href="#l4.93"></a><span id="l4.93">           ]]&gt;</span>
<a href="#l4.94"></a><span id="l4.94">         &lt;/body&gt;</span>
<a href="#l4.95"></a><span id="l4.95">       &lt;/method&gt;</span>
<a href="#l4.96"></a><span id="l4.96"> </span>
<a href="#l4.97"></a><span id="l4.97" class="difflineat">@@ -2024,45 +2016,32 @@</span>
<a href="#l4.98"></a><span id="l4.98">                                       null, priority, buttons);</span>
<a href="#l4.99"></a><span id="l4.99">             }</span>
<a href="#l4.100"></a><span id="l4.100">           }</span>
<a href="#l4.101"></a><span id="l4.101">         ]]&gt;</span>
<a href="#l4.102"></a><span id="l4.102">       &lt;/handler&gt;</span>
<a href="#l4.103"></a><span id="l4.103"> </span>
<a href="#l4.104"></a><span id="l4.104">       &lt;handler event=&quot;PluginBindingAttached&quot; phase=&quot;capturing&quot; allowuntrusted=&quot;true&quot;&gt;</span>
<a href="#l4.105"></a><span id="l4.105">         &lt;![CDATA[</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-          var nsIObjectLoadingContent = Ci.nsIObjectLoadingContent;</span>
<a href="#l4.107"></a><span id="l4.107">           var plugin = event.target;</span>
<a href="#l4.108"></a><span id="l4.108">           // Since we are expecting also untrusted events, make sure</span>
<a href="#l4.109"></a><span id="l4.109">           // that the target is a plugin</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineminus">-          if (!(plugin instanceof nsIObjectLoadingContent))</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineplus">+          if (!(plugin instanceof Ci.nsIObjectLoadingContent))</span>
<a href="#l4.112"></a><span id="l4.112">             return;</span>
<a href="#l4.113"></a><span id="l4.113"> </span>
<a href="#l4.114"></a><span id="l4.114">           var closeIcon = this.getPluginUI(plugin, &quot;closeIcon&quot;);</span>
<a href="#l4.115"></a><span id="l4.115">           this.addLinkClickCallback(closeIcon, this.hidePluginOverlay, plugin);</span>
<a href="#l4.116"></a><span id="l4.116"> </span>
<a href="#l4.117"></a><span id="l4.117">           var notification, message, buttons, pref;</span>
<a href="#l4.118"></a><span id="l4.118">           switch (plugin.pluginFallbackType) {</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_UNSUPPORTED:</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-              notification = &quot;missing-plugins&quot;;</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-              message = this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.title&quot;);</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineminus">-              if (&quot;goPreferences&quot; in window) {</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-                buttons = [{</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineminus">-                  label: this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.button.label&quot;),</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineminus">-                  accessKey: this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.button.accesskey&quot;),</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-                  popup: null,</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-                  callback: function() {</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineminus">-                    goPreferences(&quot;scripts_pane&quot;);</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineminus">-                    return true;</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineminus">-                  }</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineminus">-                }];</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineminus">-              }</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineminus">-              break;</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_UNSUPPORTED:</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineplus">+              // NOP. Plugin finder service (PFS) is dead.</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineplus">+              return;</span>
<a href="#l4.137"></a><span id="l4.137"> </span>
<a href="#l4.138"></a><span id="l4.138" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_DISABLED:</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_DISABLED:</span>
<a href="#l4.140"></a><span id="l4.140">               if (!this.canActivatePlugin(plugin, true))</span>
<a href="#l4.141"></a><span id="l4.141">                 return;</span>
<a href="#l4.142"></a><span id="l4.142"> </span>
<a href="#l4.143"></a><span id="l4.143">               notification = &quot;disabled-plugins&quot;;</span>
<a href="#l4.144"></a><span id="l4.144">               message = this._stringBundle.GetStringFromName(&quot;missingpluginsMessage.title&quot;);</span>
<a href="#l4.145"></a><span id="l4.145">               if (&quot;toEM&quot; in window) {</span>
<a href="#l4.146"></a><span id="l4.146">                 buttons = [{</span>
<a href="#l4.147"></a><span id="l4.147">                   label: this._stringBundle.GetStringFromName(&quot;addonInstallManageButton&quot;),</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineat">@@ -2073,55 +2052,53 @@</span>
<a href="#l4.149"></a><span id="l4.149">                   }</span>
<a href="#l4.150"></a><span id="l4.150">                 }];</span>
<a href="#l4.151"></a><span id="l4.151"> </span>
<a href="#l4.152"></a><span id="l4.152">                 var manageLink = this.getPluginUI(plugin, &quot;managePluginsLink&quot;);</span>
<a href="#l4.153"></a><span id="l4.153">                 this.addLinkClickCallback(manageLink, window.toEM, &quot;addons://list/plugin&quot;);</span>
<a href="#l4.154"></a><span id="l4.154">               }</span>
<a href="#l4.155"></a><span id="l4.155">               break;</span>
<a href="#l4.156"></a><span id="l4.156"> </span>
<a href="#l4.157"></a><span id="l4.157" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_BLOCKLISTED:</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_BLOCKLISTED:</span>
<a href="#l4.159"></a><span id="l4.159">               notification = &quot;blocked-plugins&quot;;</span>
<a href="#l4.160"></a><span id="l4.160">               message = this._stringBundle.GetStringFromName(&quot;blockedpluginsMessage.title&quot;);</span>
<a href="#l4.161"></a><span id="l4.161">               buttons = [{</span>
<a href="#l4.162"></a><span id="l4.162">                 label: this._stringBundle.GetStringFromName(&quot;blockedpluginsMessage.infoButton.label&quot;),</span>
<a href="#l4.163"></a><span id="l4.163">                 accessKey: this._stringBundle.GetStringFromName(&quot;blockedpluginsMessage.infoButton.accesskey&quot;),</span>
<a href="#l4.164"></a><span id="l4.164">                 popup: null,</span>
<a href="#l4.165"></a><span id="l4.165">                 callback: this.openURLPref.bind(this, &quot;extensions.blocklist.detailsURL&quot;)</span>
<a href="#l4.166"></a><span id="l4.166">               }];</span>
<a href="#l4.167"></a><span id="l4.167">               break;</span>
<a href="#l4.168"></a><span id="l4.168"> </span>
<a href="#l4.169"></a><span id="l4.169" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_OUTDATED:</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_OUTDATED:</span>
<a href="#l4.171"></a><span id="l4.171">               notification = &quot;outdated-plugins&quot;;</span>
<a href="#l4.172"></a><span id="l4.172">               message = this._stringBundle.GetStringFromName(&quot;outdatedpluginsMessage.title&quot;);</span>
<a href="#l4.173"></a><span id="l4.173">               buttons = [{</span>
<a href="#l4.174"></a><span id="l4.174">                 label: this._stringBundle.GetStringFromName(&quot;outdatedpluginsMessage.button.label&quot;),</span>
<a href="#l4.175"></a><span id="l4.175">                 accessKey: this._stringBundle.GetStringFromName(&quot;outdatedpluginsMessage.button.accesskey&quot;),</span>
<a href="#l4.176"></a><span id="l4.176">                 popup: null,</span>
<a href="#l4.177"></a><span id="l4.177" class="difflineminus">-                callback: this.openURLPref.bind(this, &quot;plugins.update.url&quot;)</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineplus">+                callback: null,</span>
<a href="#l4.179"></a><span id="l4.179">               }];</span>
<a href="#l4.180"></a><span id="l4.180">               pref = &quot;plugins.hide_infobar_for_outdated_plugin&quot;;</span>
<a href="#l4.181"></a><span id="l4.181">               break;</span>
<a href="#l4.182"></a><span id="l4.182"> </span>
<a href="#l4.183"></a><span id="l4.183" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE:</span>
<a href="#l4.184"></a><span id="l4.184" class="difflineminus">-              var updateLink = this.getPluginUI(plugin, &quot;checkForUpdatesLink&quot;);</span>
<a href="#l4.185"></a><span id="l4.185" class="difflineminus">-              this.addLinkClickCallback(updateLink, this.openURLPref, &quot;plugins.update.url&quot;);</span>
<a href="#l4.186"></a><span id="l4.186" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE:</span>
<a href="#l4.187"></a><span id="l4.187">               // fall through</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE:</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE:</span>
<a href="#l4.190"></a><span id="l4.190">               var eventType = this.getBindingType(plugin);</span>
<a href="#l4.191"></a><span id="l4.191">               // When we got here, we deal with a vulnerable plugin object, so setup UI elements for this case</span>
<a href="#l4.192"></a><span id="l4.192">               var vulnerabilityString = this._stringBundle.GetStringFromName(eventType);</span>
<a href="#l4.193"></a><span id="l4.193">               var vulnerabilityText = this.getPluginUI(plugin, &quot;vulnerabilityStatus&quot;);</span>
<a href="#l4.194"></a><span id="l4.194">               vulnerabilityText.textContent = vulnerabilityString;</span>
<a href="#l4.195"></a><span id="l4.195">               // fall through</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY:</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_CLICK_TO_PLAY:</span>
<a href="#l4.198"></a><span id="l4.198">               this.setupPluginClickToPlay(plugin, true);</span>
<a href="#l4.199"></a><span id="l4.199">               return;</span>
<a href="#l4.200"></a><span id="l4.200"> </span>
<a href="#l4.201"></a><span id="l4.201" class="difflineminus">-            case nsIObjectLoadingContent.PLUGIN_PLAY_PREVIEW:</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineplus">+            case Ci.nsIObjectLoadingContent.PLUGIN_PLAY_PREVIEW:</span>
<a href="#l4.203"></a><span id="l4.203">               this.handlePlayPreviewEvent(plugin);</span>
<a href="#l4.204"></a><span id="l4.204">               return;</span>
<a href="#l4.205"></a><span id="l4.205"> </span>
<a href="#l4.206"></a><span id="l4.206">             default:</span>
<a href="#l4.207"></a><span id="l4.207">               return;</span>
<a href="#l4.208"></a><span id="l4.208">           }</span>
<a href="#l4.209"></a><span id="l4.209">           this.pluginUnavailable(plugin, notification, message, buttons, pref);</span>
<a href="#l4.210"></a><span id="l4.210">         ]]&gt;</span>
<a href="#l4.211"></a><span id="l4.211" class="difflineat">@@ -2409,23 +2386,19 @@</span>
<a href="#l4.212"></a><span id="l4.212">             for (let [pluginName, namedPluginArray] of pluginsDictionary) {</span>
<a href="#l4.213"></a><span id="l4.213">               let plugin = namedPluginArray[0];</span>
<a href="#l4.214"></a><span id="l4.214">               let warn = false;</span>
<a href="#l4.215"></a><span id="l4.215">               let warningText = &quot;&quot;;</span>
<a href="#l4.216"></a><span id="l4.216">               let updateLink = &quot;&quot;;</span>
<a href="#l4.217"></a><span id="l4.217"> </span>
<a href="#l4.218"></a><span id="l4.218">               if (plugin.pluginFallbackType) {</span>
<a href="#l4.219"></a><span id="l4.219">                 if (plugin.pluginFallbackType ==</span>
<a href="#l4.220"></a><span id="l4.220" class="difflineminus">-                      Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE) {</span>
<a href="#l4.221"></a><span id="l4.221" class="difflineminus">-                  updateLink = this._urlFormatter.formatURLPref(&quot;plugins.update.url&quot;);</span>
<a href="#l4.222"></a><span id="l4.222" class="difflineminus">-                  warn = true;</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineminus">-                  warningText = this._stringBundle.GetStringFromName(&quot;vulnerableUpdatablePluginWarning&quot;);</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineminus">-                }</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineminus">-                else if (plugin.pluginFallbackType ==</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineminus">-                           Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE) {</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineplus">+                      Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_UPDATABLE ||</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineplus">+                    plugin.pluginFallbackType ==</span>
<a href="#l4.229"></a><span id="l4.229" class="difflineplus">+                      Ci.nsIObjectLoadingContent.PLUGIN_VULNERABLE_NO_UPDATE) {</span>
<a href="#l4.230"></a><span id="l4.230">                   warn = true;</span>
<a href="#l4.231"></a><span id="l4.231">                   warningText = this._stringBundle.GetStringFromName(&quot;vulnerableNoUpdatePluginWarning&quot;);</span>
<a href="#l4.232"></a><span id="l4.232">                 }</span>
<a href="#l4.233"></a><span id="l4.233">               }</span>
<a href="#l4.234"></a><span id="l4.234"> </span>
<a href="#l4.235"></a><span id="l4.235">               let action = {</span>
<a href="#l4.236"></a><span id="l4.236">                 message: pluginName,</span>
<a href="#l4.237"></a><span id="l4.237">                 warn: warn,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/suite/components/nsSuiteGlue.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/suite/components/nsSuiteGlue.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -588,19 +588,16 @@ SuiteGlue.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">           Cu.reportError(e);</span>
<a href="#l5.5"></a><span id="l5.5">         }</span>
<a href="#l5.6"></a><span id="l5.6">       }</span>
<a href="#l5.7"></a><span id="l5.7">     }</span>
<a href="#l5.8"></a><span id="l5.8">   },</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">   // Browser startup complete. All initial windows have opened.</span>
<a href="#l5.11"></a><span id="l5.11">   _onBrowserStartup: function(aWindow) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    if (Services.prefs.getBoolPref(&quot;plugins.update.notifyUser&quot;))</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-      this._showPluginUpdatePage(aWindow);</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-</span>
<a href="#l5.15"></a><span id="l5.15">     // For any add-ons that were installed disabled and can be enabled offer</span>
<a href="#l5.16"></a><span id="l5.16">     // them to the user.</span>
<a href="#l5.17"></a><span id="l5.17">     var browser = aWindow.getBrowser();</span>
<a href="#l5.18"></a><span id="l5.18">     var changedIDs = AddonManager.getStartupChanges(AddonManager.STARTUP_CHANGE_INSTALLED);</span>
<a href="#l5.19"></a><span id="l5.19">     if (changedIDs.length) {</span>
<a href="#l5.20"></a><span id="l5.20">       AddonManager.getAddonsByIDs(changedIDs, function(aAddons) {</span>
<a href="#l5.21"></a><span id="l5.21">         aAddons.forEach(function(aAddon) {</span>
<a href="#l5.22"></a><span id="l5.22">           // If the add-on isn't user disabled or can't be enabled then skip it.</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineat">@@ -824,24 +821,16 @@ SuiteGlue.prototype = {</span>
<a href="#l5.24"></a><span id="l5.24">             Services.prefs.setIntPref(&quot;browser.startup.page&quot;, 3);</span>
<a href="#l5.25"></a><span id="l5.25">           }</span>
<a href="#l5.26"></a><span id="l5.26">         }</span>
<a href="#l5.27"></a><span id="l5.27">         break;</span>
<a href="#l5.28"></a><span id="l5.28">       }</span>
<a href="#l5.29"></a><span id="l5.29">     }</span>
<a href="#l5.30"></a><span id="l5.30">   },</span>
<a href="#l5.31"></a><span id="l5.31"> </span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-  _showPluginUpdatePage: function(aWindow) {</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-    Services.prefs.setBoolPref(&quot;plugins.update.notifyUser&quot;, false);</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-    var url = Services.urlFormatter.formatURLPref(&quot;plugins.update.url&quot;);</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-    aWindow.getBrowser().addTab(url, { focusNewTab: true });</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-  },</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-</span>
<a href="#l5.40"></a><span id="l5.40">   /*</span>
<a href="#l5.41"></a><span id="l5.41">    * _shouldShowRights - Determines if the user should be shown the</span>
<a href="#l5.42"></a><span id="l5.42">    * about:rights notification. The notification should *not* be shown if</span>
<a href="#l5.43"></a><span id="l5.43">    * we've already shown the current version, or if the override pref says to</span>
<a href="#l5.44"></a><span id="l5.44">    * never show it. The notification *should* be shown if it's never been seen</span>
<a href="#l5.45"></a><span id="l5.45">    * before, if a newer version is available, or if the override pref says to</span>
<a href="#l5.46"></a><span id="l5.46">    * always show it.</span>
<a href="#l5.47"></a><span id="l5.47">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/notification.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/notification.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -2,18 +2,16 @@</span>
<a href="#l6.4"></a><span id="l6.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.5"></a><span id="l6.5"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> outdatedpluginsMessage.title=Some plugins used by this page are out of date.</span>
<a href="#l6.8"></a><span id="l6.8"> outdatedpluginsMessage.button.label=Update Plugins</span>
<a href="#l6.9"></a><span id="l6.9"> outdatedpluginsMessage.button.accesskey=U</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11"> missingpluginsMessage.title=Additional plugins are required to display all the media on this page.</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-missingpluginsMessage.button.label=Preferences</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-missingpluginsMessage.button.accesskey=P</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15"> blockedpluginsMessage.title=Some plugins required by this page have been blocked for your protection.</span>
<a href="#l6.16"></a><span id="l6.16"> blockedpluginsMessage.infoButton.label=Details</span>
<a href="#l6.17"></a><span id="l6.17"> blockedpluginsMessage.infoButton.accesskey=D</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19"> crashedpluginsMessage.title=The %S plugin has crashed.</span>
<a href="#l6.20"></a><span id="l6.20"> crashedpluginsMessage.reloadButton.label=Reload page</span>
<a href="#l6.21"></a><span id="l6.21"> crashedpluginsMessage.reloadButton.accesskey=R</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/suite/themes/classic/communicator/communicator.css</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/suite/themes/classic/communicator/communicator.css</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -157,17 +157,16 @@ treecols:-moz-lwtheme {</span>
<a href="#l7.4"></a><span id="l7.4"> /* ::::: notification bars ::::: */</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> .messageImage[value=&quot;refresh-blocked&quot;] {</span>
<a href="#l7.7"></a><span id="l7.7">   list-style-image: url(&quot;chrome://communicator/skin/icons/application.png&quot;);</span>
<a href="#l7.8"></a><span id="l7.8"> }</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> .messageImage[value=&quot;blocked-plugins&quot;],</span>
<a href="#l7.11"></a><span id="l7.11"> .messageImage[value=&quot;disabled-plugins&quot;],</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-.messageImage[value=&quot;missing-plugins&quot;],</span>
<a href="#l7.13"></a><span id="l7.13"> .messageImage[value=&quot;outdated-plugins&quot;],</span>
<a href="#l7.14"></a><span id="l7.14"> .messageImage[value=&quot;click-to-play-plugins&quot;],</span>
<a href="#l7.15"></a><span id="l7.15"> .messageImage[value=&quot;plugin-crashed&quot;] {</span>
<a href="#l7.16"></a><span id="l7.16">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l7.17"></a><span id="l7.17"> }</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19"> .messageImage[value=&quot;geolocation&quot;] {</span>
<a href="#l7.20"></a><span id="l7.20">   list-style-image: url(&quot;chrome://communicator/skin/icons/geo.png&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/suite/themes/classic/mac/communicator/communicator.css</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/suite/themes/classic/mac/communicator/communicator.css</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -167,17 +167,16 @@ treecols:-moz-lwtheme {</span>
<a href="#l8.4"></a><span id="l8.4"> /* ::::: notification bars ::::: */</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> .messageImage[value=&quot;refresh-blocked&quot;] {</span>
<a href="#l8.7"></a><span id="l8.7">   list-style-image: url(&quot;chrome://communicator/skin/icons/application.png&quot;);</span>
<a href="#l8.8"></a><span id="l8.8"> }</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10"> .messageImage[value=&quot;blocked-plugins&quot;],</span>
<a href="#l8.11"></a><span id="l8.11"> .messageImage[value=&quot;disabled-plugins&quot;],</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-.messageImage[value=&quot;missing-plugins&quot;],</span>
<a href="#l8.13"></a><span id="l8.13"> .messageImage[value=&quot;outdated-plugins&quot;],</span>
<a href="#l8.14"></a><span id="l8.14"> .messageImage[value=&quot;click-to-play-plugins&quot;],</span>
<a href="#l8.15"></a><span id="l8.15"> .messageImage[value=&quot;plugin-crashed&quot;] {</span>
<a href="#l8.16"></a><span id="l8.16">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l8.17"></a><span id="l8.17"> }</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19"> .messageImage[value=&quot;geolocation&quot;] {</span>
<a href="#l8.20"></a><span id="l8.20">   list-style-image: url(&quot;chrome://communicator/skin/icons/geo.png&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/suite/themes/modern/communicator/communicator.css</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/suite/themes/modern/communicator/communicator.css</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -119,17 +119,16 @@ toolbar[iconsize=&quot;small&quot;] &gt; #print-butto</span>
<a href="#l9.4"></a><span id="l9.4"> /* ::::: notification bars ::::: */</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> .messageImage[value=&quot;refresh-blocked&quot;] {</span>
<a href="#l9.7"></a><span id="l9.7">   list-style-image: url(&quot;chrome://communicator/skin/icons/application.png&quot;);</span>
<a href="#l9.8"></a><span id="l9.8"> }</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> .messageImage[value=&quot;blocked-plugins&quot;],</span>
<a href="#l9.11"></a><span id="l9.11"> .messageImage[value=&quot;disabled-plugins&quot;],</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-.messageImage[value=&quot;missing-plugins&quot;],</span>
<a href="#l9.13"></a><span id="l9.13"> .messageImage[value=&quot;outdated-plugins&quot;],</span>
<a href="#l9.14"></a><span id="l9.14"> .messageImage[value=&quot;click-to-play-plugins&quot;],</span>
<a href="#l9.15"></a><span id="l9.15"> .messageImage[value=&quot;plugin-crashed&quot;] {</span>
<a href="#l9.16"></a><span id="l9.16">   list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l9.17"></a><span id="l9.17"> }</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19"> .messageImage[value=&quot;geolocation&quot;] {</span>
<a href="#l9.20"></a><span id="l9.20">   list-style-image: url(&quot;chrome://communicator/skin/icons/geo.png&quot;);</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

