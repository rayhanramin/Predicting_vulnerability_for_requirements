<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 10888:9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb" />
<meta property="og:url" content="/comm-central/rev/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb" />
<meta property="og:description" content="Bug 779130 - Fix type of constants; r=irving" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">shortlog</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">files</a> |
changeset |
<a href="/comm-central/raw-rev/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">raw</a>  | <a href="/comm-central/archive/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=779130">Bug 779130</a> - Fix type of constants; r=irving
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#65;&#114;&#121;&#101;&#104;&#32;&#71;&#114;&#101;&#103;&#111;&#114;&#32;&#60;&#97;&#121;&#103;&#64;&#97;&#114;&#121;&#101;&#104;&#46;&#110;&#97;&#109;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 06 Aug 2012 17:44:08 +0300</td></tr>

<tr>
 <td>changeset 10888</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb</a></td>
</tr>



<tr>
<td>parent 10887</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3b75111da3ba7c3ce7b49b9ad4a22a8c4b951f7c">3b75111da3ba7c3ce7b49b9ad4a22a8c4b951f7c</a>
</td>
</tr>

<tr>
<td>child 10889</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/256178ca5b411f032447c10ea407c95a7f7998d5">256178ca5b411f032447c10ea407c95a7f7998d5</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb">8171</a></td></tr>
<tr><td>push user</td><td>ayg@aryeh.name</td></tr>
<tr><td>push date</td><td class="date age">Fri, 17 Aug 2012 11:47:13 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@2657de7f561b [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=2657de7f561bd4491898dca1ba0eb213ffd691b3">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=2657de7f561bd4491898dca1ba0eb213ffd691b3&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=2657de7f561bd4491898dca1ba0eb213ffd691b3&newProject=comm-central&newRevision=9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=2657de7f561bd4491898dca1ba0eb213ffd691b3&newProject=comm-central&newRevision=9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=2657de7f561bd4491898dca1ba0eb213ffd691b3&newProject=comm-central&newRevision=9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28irving%29&revcount=50">irving</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=779130">779130</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=779130">Bug 779130</a> - Fix type of constants; r=irving</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkCellObject.cpp">db/mork/src/morkCellObject.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkCellObject.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkCellObject.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkCellObject.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkCellObject.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkCellObject.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFactory.cpp">db/mork/src/morkFactory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFactory.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFactory.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFactory.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFactory.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFactory.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFile.cpp">db/mork/src/morkFile.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFile.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFile.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFile.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFile.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkFile.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkHandle.cpp">db/mork/src/morkHandle.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkHandle.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkHandle.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkHandle.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkHandle.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkHandle.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkNode.cpp">db/mork/src/morkNode.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkNode.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkNode.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkNode.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkNode.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkNode.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkPortTableCursor.cpp">db/mork/src/morkPortTableCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkPortTableCursor.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkPortTableCursor.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkPortTableCursor.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkPortTableCursor.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkPortTableCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowCellCursor.cpp">db/mork/src/morkRowCellCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowCellCursor.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowCellCursor.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowCellCursor.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowCellCursor.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowCellCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowObject.cpp">db/mork/src/morkRowObject.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowObject.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowObject.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowObject.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowObject.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkRowObject.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkStore.cpp">db/mork/src/morkStore.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkStore.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkStore.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkStore.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkStore.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkStore.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTable.cpp">db/mork/src/morkTable.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTable.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTable.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTable.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTable.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTable.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTableRowCursor.cpp">db/mork/src/morkTableRowCursor.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTableRowCursor.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTableRowCursor.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTableRowCursor.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTableRowCursor.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkTableRowCursor.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkThumb.cpp">db/mork/src/morkThumb.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkThumb.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkThumb.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkThumb.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkThumb.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkThumb.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkZone.cpp">db/mork/src/morkZone.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkZone.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkZone.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkZone.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkZone.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/morkZone.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/orkinHeap.cpp">db/mork/src/orkinHeap.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/orkinHeap.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/orkinHeap.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/orkinHeap.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/orkinHeap.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/db/mork/src/orkinHeap.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp">mailnews/addrbook/src/nsAbLDAPReplicationService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp">mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgAccountManagerDS.cpp">mailnews/base/src/nsMsgAccountManagerDS.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgAccountManagerDS.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgAccountManagerDS.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgAccountManagerDS.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgAccountManagerDS.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgAccountManagerDS.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgDBView.cpp">mailnews/base/src/nsMsgDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgDBView.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgDBView.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgDBView.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgDBView.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPrintEngine.cpp">mailnews/base/src/nsMsgPrintEngine.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPrintEngine.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPrintEngine.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPrintEngine.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPrintEngine.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPrintEngine.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgProgress.cpp">mailnews/base/src/nsMsgProgress.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgProgress.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgProgress.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgProgress.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgProgress.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgProgress.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPurgeService.cpp">mailnews/base/src/nsMsgPurgeService.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPurgeService.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPurgeService.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPurgeService.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPurgeService.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/src/nsMsgPurgeService.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/util/nsMsgLineBuffer.cpp">mailnews/base/util/nsMsgLineBuffer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/util/nsMsgLineBuffer.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/util/nsMsgLineBuffer.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/util/nsMsgLineBuffer.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/util/nsMsgLineBuffer.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/base/util/nsMsgLineBuffer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgAttachmentHandler.cpp">mailnews/compose/src/nsMsgAttachmentHandler.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgAttachmentHandler.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgAttachmentHandler.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgAttachmentHandler.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgAttachmentHandler.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgAttachmentHandler.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompUtils.cpp">mailnews/compose/src/nsMsgCompUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompUtils.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompUtils.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompUtils.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompUtils.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompose.cpp">mailnews/compose/src/nsMsgCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompose.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompose.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompose.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompose.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSend.cpp">mailnews/compose/src/nsMsgSend.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSend.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSend.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSend.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSend.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSend.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendLater.cpp">mailnews/compose/src/nsMsgSendLater.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendLater.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendLater.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendLater.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendLater.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendLater.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendPart.cpp">mailnews/compose/src/nsMsgSendPart.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendPart.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendPart.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendPart.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendPart.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/compose/src/nsMsgSendPart.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMailDatabase.cpp">mailnews/db/msgdb/src/nsMailDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMailDatabase.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMailDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMailDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMailDatabase.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMailDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMsgDatabase.cpp">mailnews/db/msgdb/src/nsMsgDatabase.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMsgDatabase.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMsgDatabase.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMsgDatabase.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMsgDatabase.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/db/msgdb/src/nsMsgDatabase.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsIMAPHostSessionList.cpp">mailnews/imap/src/nsIMAPHostSessionList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsIMAPHostSessionList.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsIMAPHostSessionList.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsIMAPHostSessionList.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsIMAPHostSessionList.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsIMAPHostSessionList.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsImapMailFolder.cpp">mailnews/imap/src/nsImapMailFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsImapMailFolder.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsImapMailFolder.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsImapMailFolder.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsImapMailFolder.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/imap/src/nsImapMailFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/local/src/nsMailboxProtocol.cpp">mailnews/local/src/nsMailboxProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/local/src/nsMailboxProtocol.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/local/src/nsMailboxProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/local/src/nsMailboxProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/local/src/nsMailboxProtocol.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/local/src/nsMailboxProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/mime/src/mimemoz2.cpp">mailnews/mime/src/mimemoz2.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/mime/src/mimemoz2.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/mime/src/mimemoz2.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/mime/src/mimemoz2.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/mime/src/mimemoz2.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/mime/src/mimemoz2.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNNTPNewsgroupList.cpp">mailnews/news/src/nsNNTPNewsgroupList.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNNTPNewsgroupList.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNNTPNewsgroupList.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNNTPNewsgroupList.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNNTPNewsgroupList.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNNTPNewsgroupList.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNewsFolder.cpp">mailnews/news/src/nsNewsFolder.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNewsFolder.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNewsFolder.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNewsFolder.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNewsFolder.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNewsFolder.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNntpIncomingServer.cpp">mailnews/news/src/nsNntpIncomingServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNntpIncomingServer.cpp">file</a> |
<a href="/comm-central/annotate/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNntpIncomingServer.cpp">annotate</a> |
<a href="/comm-central/diff/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNntpIncomingServer.cpp">diff</a> |
<a href="/comm-central/comparison/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNntpIncomingServer.cpp">comparison</a> |
<a href="/comm-central/log/9d106bbca8d92aea7b5188a1f67d2793fd1fb3fb/mailnews/news/src/nsNntpIncomingServer.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/db/mork/src/morkCellObject.cpp</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/db/mork/src/morkCellObject.cpp</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -295,17 +295,17 @@ NS_IMETHODIMP morkCellObject::GetBlobFil</span>
<a href="#l1.4"></a><span id="l1.4"> {</span>
<a href="#l1.5"></a><span id="l1.5">   NS_ASSERTION(false, &quot;not implemented&quot;);</span>
<a href="#l1.6"></a><span id="l1.6">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l1.7"></a><span id="l1.7"> }  // size of blob </span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9"> NS_IMETHODIMP morkCellObject::SetYarn(nsIMdbEnv* mev, </span>
<a href="#l1.10"></a><span id="l1.10">   const mdbYarn* inYarn)</span>
<a href="#l1.11"></a><span id="l1.11"> {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.14"></a><span id="l1.14">   morkCell* cell = 0;</span>
<a href="#l1.15"></a><span id="l1.15">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.16"></a><span id="l1.16">     &amp;outErr, &amp;cell);</span>
<a href="#l1.17"></a><span id="l1.17">   if ( ev )</span>
<a href="#l1.18"></a><span id="l1.18">   {</span>
<a href="#l1.19"></a><span id="l1.19">     morkRow* row = mCellObject_Row;</span>
<a href="#l1.20"></a><span id="l1.20">     if ( row )</span>
<a href="#l1.21"></a><span id="l1.21">     {</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -325,17 +325,17 @@ NS_IMETHODIMP morkCellObject::SetYarn(ns</span>
<a href="#l1.23"></a><span id="l1.23">     </span>
<a href="#l1.24"></a><span id="l1.24">   return outErr;</span>
<a href="#l1.25"></a><span id="l1.25"> }   // reads from yarn slots</span>
<a href="#l1.26"></a><span id="l1.26"> // make this text object contain content from the yarn's buffer</span>
<a href="#l1.27"></a><span id="l1.27"> </span>
<a href="#l1.28"></a><span id="l1.28"> NS_IMETHODIMP morkCellObject::GetYarn(nsIMdbEnv* mev, </span>
<a href="#l1.29"></a><span id="l1.29">   mdbYarn* outYarn)</span>
<a href="#l1.30"></a><span id="l1.30"> {</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.33"></a><span id="l1.33">   morkCell* cell = 0;</span>
<a href="#l1.34"></a><span id="l1.34">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.35"></a><span id="l1.35">     &amp;outErr, &amp;cell);</span>
<a href="#l1.36"></a><span id="l1.36">   if ( ev )</span>
<a href="#l1.37"></a><span id="l1.37">   {</span>
<a href="#l1.38"></a><span id="l1.38">     morkAtom* atom = cell-&gt;GetAtom();</span>
<a href="#l1.39"></a><span id="l1.39">     atom-&gt;GetYarn(outYarn);</span>
<a href="#l1.40"></a><span id="l1.40">     outErr = ev-&gt;AsErr();</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineat">@@ -343,17 +343,17 @@ NS_IMETHODIMP morkCellObject::GetYarn(ns</span>
<a href="#l1.42"></a><span id="l1.42">     </span>
<a href="#l1.43"></a><span id="l1.43">   return outErr;</span>
<a href="#l1.44"></a><span id="l1.44"> }  // writes some yarn slots </span>
<a href="#l1.45"></a><span id="l1.45"> // copy content into the yarn buffer, and update mYarn_Fill and mYarn_Form</span>
<a href="#l1.46"></a><span id="l1.46"> </span>
<a href="#l1.47"></a><span id="l1.47"> NS_IMETHODIMP morkCellObject::AliasYarn(nsIMdbEnv* mev, </span>
<a href="#l1.48"></a><span id="l1.48">   mdbYarn* outYarn)</span>
<a href="#l1.49"></a><span id="l1.49"> {</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.52"></a><span id="l1.52">   morkCell* cell = 0;</span>
<a href="#l1.53"></a><span id="l1.53">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.54"></a><span id="l1.54">     &amp;outErr, &amp;cell);</span>
<a href="#l1.55"></a><span id="l1.55">   if ( ev )</span>
<a href="#l1.56"></a><span id="l1.56">   {</span>
<a href="#l1.57"></a><span id="l1.57">     morkAtom* atom = cell-&gt;GetAtom();</span>
<a href="#l1.58"></a><span id="l1.58">     atom-&gt;AliasYarn(outYarn);</span>
<a href="#l1.59"></a><span id="l1.59">     outErr = ev-&gt;AsErr();</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineat">@@ -373,17 +373,17 @@ NS_IMETHODIMP morkCellObject::SetColumn(</span>
<a href="#l1.61"></a><span id="l1.61"> {</span>
<a href="#l1.62"></a><span id="l1.62">   NS_ASSERTION(false, &quot;not implemented&quot;);</span>
<a href="#l1.63"></a><span id="l1.63">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l1.64"></a><span id="l1.64">   // remember row-&gt;MaybeDirtySpaceStoreAndRow();</span>
<a href="#l1.65"></a><span id="l1.65"> } </span>
<a href="#l1.66"></a><span id="l1.66"> </span>
<a href="#l1.67"></a><span id="l1.67"> NS_IMETHODIMP morkCellObject::GetColumn(nsIMdbEnv* mev, mdb_column* outColumn)</span>
<a href="#l1.68"></a><span id="l1.68"> {</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.71"></a><span id="l1.71">   mdb_column col = 0;</span>
<a href="#l1.72"></a><span id="l1.72">   morkCell* cell = 0;</span>
<a href="#l1.73"></a><span id="l1.73">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.74"></a><span id="l1.74">     &amp;outErr, &amp;cell);</span>
<a href="#l1.75"></a><span id="l1.75">   if ( ev )</span>
<a href="#l1.76"></a><span id="l1.76">   {</span>
<a href="#l1.77"></a><span id="l1.77">     col = mCellObject_Col;</span>
<a href="#l1.78"></a><span id="l1.78">     outErr = ev-&gt;AsErr();</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineat">@@ -405,17 +405,17 @@ NS_IMETHODIMP morkCellObject::GetCellInf</span>
<a href="#l1.80"></a><span id="l1.80">   NS_ASSERTION(false, &quot;not implemented&quot;);</span>
<a href="#l1.81"></a><span id="l1.81">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l1.82"></a><span id="l1.82"> }</span>
<a href="#l1.83"></a><span id="l1.83"> </span>
<a href="#l1.84"></a><span id="l1.84"> </span>
<a href="#l1.85"></a><span id="l1.85"> NS_IMETHODIMP morkCellObject::GetRow(nsIMdbEnv* mev, // parent row for this cell</span>
<a href="#l1.86"></a><span id="l1.86">   nsIMdbRow** acqRow)</span>
<a href="#l1.87"></a><span id="l1.87"> {</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.90"></a><span id="l1.90">   nsIMdbRow* outRow = 0;</span>
<a href="#l1.91"></a><span id="l1.91">   morkCell* cell = 0;</span>
<a href="#l1.92"></a><span id="l1.92">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.93"></a><span id="l1.93">     &amp;outErr, &amp;cell);</span>
<a href="#l1.94"></a><span id="l1.94">   if ( ev )</span>
<a href="#l1.95"></a><span id="l1.95">   {</span>
<a href="#l1.96"></a><span id="l1.96">     outRow = mCellObject_RowObject-&gt;AcquireRowHandle(ev);</span>
<a href="#l1.97"></a><span id="l1.97">     </span>
<a href="#l1.98"></a><span id="l1.98" class="difflineat">@@ -424,17 +424,17 @@ NS_IMETHODIMP morkCellObject::GetRow(nsI</span>
<a href="#l1.99"></a><span id="l1.99">   if ( acqRow )</span>
<a href="#l1.100"></a><span id="l1.100">     *acqRow = outRow;</span>
<a href="#l1.101"></a><span id="l1.101">   return outErr;</span>
<a href="#l1.102"></a><span id="l1.102"> }</span>
<a href="#l1.103"></a><span id="l1.103"> </span>
<a href="#l1.104"></a><span id="l1.104"> NS_IMETHODIMP morkCellObject::GetPort(nsIMdbEnv* mev, // port containing cell</span>
<a href="#l1.105"></a><span id="l1.105">   nsIMdbPort** acqPort)</span>
<a href="#l1.106"></a><span id="l1.106"> {</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.109"></a><span id="l1.109">   nsIMdbPort* outPort = 0;</span>
<a href="#l1.110"></a><span id="l1.110">   morkCell* cell = 0;</span>
<a href="#l1.111"></a><span id="l1.111">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.112"></a><span id="l1.112">     &amp;outErr, &amp;cell);</span>
<a href="#l1.113"></a><span id="l1.113">   if ( ev )</span>
<a href="#l1.114"></a><span id="l1.114">   {</span>
<a href="#l1.115"></a><span id="l1.115">     if ( mCellObject_Row )</span>
<a href="#l1.116"></a><span id="l1.116">     {</span>
<a href="#l1.117"></a><span id="l1.117" class="difflineat">@@ -454,17 +454,17 @@ NS_IMETHODIMP morkCellObject::GetPort(ns</span>
<a href="#l1.118"></a><span id="l1.118"> // } ----- end attribute methods -----</span>
<a href="#l1.119"></a><span id="l1.119"> </span>
<a href="#l1.120"></a><span id="l1.120"> // { ----- begin children methods -----</span>
<a href="#l1.121"></a><span id="l1.121"> NS_IMETHODIMP morkCellObject::HasAnyChild( // does cell have a child instead of text?</span>
<a href="#l1.122"></a><span id="l1.122">   nsIMdbEnv* mev,</span>
<a href="#l1.123"></a><span id="l1.123">   mdbOid* outOid,  // out id of row or table (or unbound if no child)</span>
<a href="#l1.124"></a><span id="l1.124">   mdb_bool* outIsRow) // nonzero if child is a row (rather than a table)</span>
<a href="#l1.125"></a><span id="l1.125"> {</span>
<a href="#l1.126"></a><span id="l1.126" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l1.127"></a><span id="l1.127" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l1.128"></a><span id="l1.128">   mdb_bool isRow = morkBool_kFalse;</span>
<a href="#l1.129"></a><span id="l1.129">   outOid-&gt;mOid_Scope = 0;</span>
<a href="#l1.130"></a><span id="l1.130">   outOid-&gt;mOid_Id = morkId_kMinusOne;</span>
<a href="#l1.131"></a><span id="l1.131">   morkCell* cell = 0;</span>
<a href="#l1.132"></a><span id="l1.132">   morkEnv* ev = this-&gt;CanUseCell(mev, /*inMutable*/ morkBool_kTrue,</span>
<a href="#l1.133"></a><span id="l1.133">     &amp;outErr, &amp;cell);</span>
<a href="#l1.134"></a><span id="l1.134">   if ( ev )</span>
<a href="#l1.135"></a><span id="l1.135">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/db/mork/src/morkFactory.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/db/mork/src/morkFactory.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -174,17 +174,17 @@ morkFactory::OpenOldFile(nsIMdbEnv* mev,</span>
<a href="#l2.4"></a><span id="l2.4">   mork_bool inFrozen, nsIMdbFile** acqFile)</span>
<a href="#l2.5"></a><span id="l2.5">   // Choose some subclass of nsIMdbFile to instantiate, in order to read</span>
<a href="#l2.6"></a><span id="l2.6">   // (and write if not frozen) the file known by inFilePath.  The file</span>
<a href="#l2.7"></a><span id="l2.7">   // returned should be open and ready for use, and presumably positioned</span>
<a href="#l2.8"></a><span id="l2.8">   // at the first byte position of the file.  The exact manner in which</span>
<a href="#l2.9"></a><span id="l2.9">   // files must be opened is considered a subclass specific detail, and</span>
<a href="#l2.10"></a><span id="l2.10">   // other portions or Mork source code don't want to know how it's done.</span>
<a href="#l2.11"></a><span id="l2.11"> {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.14"></a><span id="l2.14">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.15"></a><span id="l2.15">   morkFile* file = nullptr;</span>
<a href="#l2.16"></a><span id="l2.16">   if ( ev )</span>
<a href="#l2.17"></a><span id="l2.17">   {</span>
<a href="#l2.18"></a><span id="l2.18">     if ( !ioHeap )</span>
<a href="#l2.19"></a><span id="l2.19">       ioHeap = &amp;mFactory_Heap;</span>
<a href="#l2.20"></a><span id="l2.20">       </span>
<a href="#l2.21"></a><span id="l2.21">     file = morkFile::OpenOldFile(ev, ioHeap, inFilePath, inFrozen);</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -203,17 +203,17 @@ morkFactory::CreateNewFile(nsIMdbEnv* me</span>
<a href="#l2.23"></a><span id="l2.23">   const char* inFilePath, nsIMdbFile** acqFile)</span>
<a href="#l2.24"></a><span id="l2.24">   // Choose some subclass of nsIMdbFile to instantiate, in order to read</span>
<a href="#l2.25"></a><span id="l2.25">   // (and write if not frozen) the file known by inFilePath.  The file</span>
<a href="#l2.26"></a><span id="l2.26">   // returned should be created and ready for use, and presumably positioned</span>
<a href="#l2.27"></a><span id="l2.27">   // at the first byte position of the file.  The exact manner in which</span>
<a href="#l2.28"></a><span id="l2.28">   // files must be opened is considered a subclass specific detail, and</span>
<a href="#l2.29"></a><span id="l2.29">   // other portions or Mork source code don't want to know how it's done.</span>
<a href="#l2.30"></a><span id="l2.30"> {</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.33"></a><span id="l2.33">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.34"></a><span id="l2.34">   morkFile* file = nullptr;</span>
<a href="#l2.35"></a><span id="l2.35">   if ( ev )</span>
<a href="#l2.36"></a><span id="l2.36">   {</span>
<a href="#l2.37"></a><span id="l2.37">     if ( !ioHeap )</span>
<a href="#l2.38"></a><span id="l2.38">       ioHeap = &amp;mFactory_Heap;</span>
<a href="#l2.39"></a><span id="l2.39">       </span>
<a href="#l2.40"></a><span id="l2.40">     file = morkFile::CreateNewFile(ev, ioHeap, inFilePath);</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineat">@@ -229,17 +229,17 @@ morkFactory::CreateNewFile(nsIMdbEnv* me</span>
<a href="#l2.42"></a><span id="l2.42"> }</span>
<a href="#l2.43"></a><span id="l2.43"> // } ----- end file methods -----</span>
<a href="#l2.44"></a><span id="l2.44"> </span>
<a href="#l2.45"></a><span id="l2.45"> // { ----- begin env methods -----</span>
<a href="#l2.46"></a><span id="l2.46"> NS_IMETHODIMP</span>
<a href="#l2.47"></a><span id="l2.47"> morkFactory::MakeEnv(nsIMdbHeap* ioHeap, nsIMdbEnv** acqEnv)</span>
<a href="#l2.48"></a><span id="l2.48"> // ioHeap can be nil, causing a MakeHeap() style heap instance to be used</span>
<a href="#l2.49"></a><span id="l2.49"> {</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.52"></a><span id="l2.52">   nsIMdbEnv* outEnv = 0;</span>
<a href="#l2.53"></a><span id="l2.53">   mork_bool ownsHeap = (ioHeap == 0);</span>
<a href="#l2.54"></a><span id="l2.54">   if ( !ioHeap )</span>
<a href="#l2.55"></a><span id="l2.55">     ioHeap = new orkinHeap();</span>
<a href="#l2.56"></a><span id="l2.56"> </span>
<a href="#l2.57"></a><span id="l2.57">   if ( acqEnv &amp;&amp; ioHeap )</span>
<a href="#l2.58"></a><span id="l2.58">   {</span>
<a href="#l2.59"></a><span id="l2.59">     morkEnv* fenv = this-&gt;GetInternalFactoryEnv(&amp;outErr);</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineat">@@ -268,17 +268,17 @@ morkFactory::MakeEnv(nsIMdbHeap* ioHeap,</span>
<a href="#l2.61"></a><span id="l2.61">   return outErr;</span>
<a href="#l2.62"></a><span id="l2.62"> }</span>
<a href="#l2.63"></a><span id="l2.63"> // } ----- end env methods -----</span>
<a href="#l2.64"></a><span id="l2.64"> </span>
<a href="#l2.65"></a><span id="l2.65"> // { ----- begin heap methods -----</span>
<a href="#l2.66"></a><span id="l2.66"> NS_IMETHODIMP</span>
<a href="#l2.67"></a><span id="l2.67"> morkFactory::MakeHeap(nsIMdbEnv* mev, nsIMdbHeap** acqHeap)</span>
<a href="#l2.68"></a><span id="l2.68"> {</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.71"></a><span id="l2.71">   nsIMdbHeap* outHeap = 0;</span>
<a href="#l2.72"></a><span id="l2.72">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.73"></a><span id="l2.73">   if ( ev )</span>
<a href="#l2.74"></a><span id="l2.74">   {</span>
<a href="#l2.75"></a><span id="l2.75">     outHeap = new orkinHeap();</span>
<a href="#l2.76"></a><span id="l2.76">     if ( !outHeap )</span>
<a href="#l2.77"></a><span id="l2.77">       ev-&gt;OutOfMemoryError();</span>
<a href="#l2.78"></a><span id="l2.78">   }</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineat">@@ -314,17 +314,17 @@ NS_IMETHODIMP</span>
<a href="#l2.80"></a><span id="l2.80"> morkFactory::CanOpenFilePort(</span>
<a href="#l2.81"></a><span id="l2.81">   nsIMdbEnv* mev, // context</span>
<a href="#l2.82"></a><span id="l2.82">   // const char* inFilePath, // the file to investigate</span>
<a href="#l2.83"></a><span id="l2.83">   // const mdbYarn* inFirst512Bytes,</span>
<a href="#l2.84"></a><span id="l2.84">   nsIMdbFile* ioFile, // db abstract file interface</span>
<a href="#l2.85"></a><span id="l2.85">   mdb_bool* outCanOpen, // whether OpenFilePort() might succeed</span>
<a href="#l2.86"></a><span id="l2.86">   mdbYarn* outFormatVersion)</span>
<a href="#l2.87"></a><span id="l2.87"> {</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.90"></a><span id="l2.90">   if ( outFormatVersion )</span>
<a href="#l2.91"></a><span id="l2.91">   {</span>
<a href="#l2.92"></a><span id="l2.92">     outFormatVersion-&gt;mYarn_Fill = 0;</span>
<a href="#l2.93"></a><span id="l2.93">   }</span>
<a href="#l2.94"></a><span id="l2.94">   mdb_bool canOpenAsPort = morkBool_kFalse;</span>
<a href="#l2.95"></a><span id="l2.95">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.96"></a><span id="l2.96">   if ( ev )</span>
<a href="#l2.97"></a><span id="l2.97">   {</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineat">@@ -350,17 +350,17 @@ morkFactory::OpenFilePort(</span>
<a href="#l2.99"></a><span id="l2.99">   nsIMdbHeap* ioHeap, // can be nil to cause ev's heap attribute to be used</span>
<a href="#l2.100"></a><span id="l2.100">   // const char* inFilePath, // the file to open for readonly import</span>
<a href="#l2.101"></a><span id="l2.101">   nsIMdbFile* ioFile, // db abstract file interface</span>
<a href="#l2.102"></a><span id="l2.102">   const mdbOpenPolicy* inOpenPolicy, // runtime policies for using db</span>
<a href="#l2.103"></a><span id="l2.103">   nsIMdbThumb** acqThumb)</span>
<a href="#l2.104"></a><span id="l2.104"> {</span>
<a href="#l2.105"></a><span id="l2.105">   NS_ASSERTION(false, &quot;this doesn't look implemented&quot;);</span>
<a href="#l2.106"></a><span id="l2.106">   MORK_USED_1(ioHeap);</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.109"></a><span id="l2.109">   nsIMdbThumb* outThumb = 0;</span>
<a href="#l2.110"></a><span id="l2.110">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.111"></a><span id="l2.111">    if ( ev )</span>
<a href="#l2.112"></a><span id="l2.112">   {</span>
<a href="#l2.113"></a><span id="l2.113">     if ( ioFile &amp;&amp; inOpenPolicy &amp;&amp; acqThumb )</span>
<a href="#l2.114"></a><span id="l2.114">     {</span>
<a href="#l2.115"></a><span id="l2.115">     }</span>
<a href="#l2.116"></a><span id="l2.116">     else</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineat">@@ -376,17 +376,17 @@ morkFactory::OpenFilePort(</span>
<a href="#l2.118"></a><span id="l2.118"> // then call nsIMdbFactory::ThumbToOpenPort() to get the port instance.</span>
<a href="#l2.119"></a><span id="l2.119"> </span>
<a href="#l2.120"></a><span id="l2.120"> NS_IMETHODIMP</span>
<a href="#l2.121"></a><span id="l2.121"> morkFactory::ThumbToOpenPort( // redeeming a completed thumb from OpenFilePort()</span>
<a href="#l2.122"></a><span id="l2.122">   nsIMdbEnv* mev, // context</span>
<a href="#l2.123"></a><span id="l2.123">   nsIMdbThumb* ioThumb, // thumb from OpenFilePort() with done status</span>
<a href="#l2.124"></a><span id="l2.124">   nsIMdbPort** acqPort)</span>
<a href="#l2.125"></a><span id="l2.125"> {</span>
<a href="#l2.126"></a><span id="l2.126" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.127"></a><span id="l2.127" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.128"></a><span id="l2.128">   nsIMdbPort* outPort = 0;</span>
<a href="#l2.129"></a><span id="l2.129">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.130"></a><span id="l2.130">   if ( ev )</span>
<a href="#l2.131"></a><span id="l2.131">   {</span>
<a href="#l2.132"></a><span id="l2.132">     if ( ioThumb &amp;&amp; acqPort )</span>
<a href="#l2.133"></a><span id="l2.133">     {</span>
<a href="#l2.134"></a><span id="l2.134">       morkThumb* thumb = (morkThumb*) ioThumb;</span>
<a href="#l2.135"></a><span id="l2.135">       morkStore* store = thumb-&gt;ThumbToOpenStore(ev);</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineat">@@ -461,17 +461,17 @@ morkFactory::CanOpenFileStore(</span>
<a href="#l2.137"></a><span id="l2.137">   mdbYarn* outFormatVersion)</span>
<a href="#l2.138"></a><span id="l2.138"> {</span>
<a href="#l2.139"></a><span id="l2.139">   mdb_bool canOpenAsStore = morkBool_kFalse;</span>
<a href="#l2.140"></a><span id="l2.140">   mdb_bool canOpenAsPort = morkBool_kFalse;</span>
<a href="#l2.141"></a><span id="l2.141">   if ( outFormatVersion )</span>
<a href="#l2.142"></a><span id="l2.142">   {</span>
<a href="#l2.143"></a><span id="l2.143">     outFormatVersion-&gt;mYarn_Fill = 0;</span>
<a href="#l2.144"></a><span id="l2.144">   }</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.147"></a><span id="l2.147">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.148"></a><span id="l2.148">   if ( ev )</span>
<a href="#l2.149"></a><span id="l2.149">   {</span>
<a href="#l2.150"></a><span id="l2.150">     if ( ioFile &amp;&amp; outCanOpenAsStore )</span>
<a href="#l2.151"></a><span id="l2.151">     {</span>
<a href="#l2.152"></a><span id="l2.152">       // right now always say true; later we should look for magic patterns</span>
<a href="#l2.153"></a><span id="l2.153">       canOpenAsStore = this-&gt;CanOpenMorkTextFile(ev, ioFile);</span>
<a href="#l2.154"></a><span id="l2.154">       canOpenAsPort = canOpenAsStore;</span>
<a href="#l2.155"></a><span id="l2.155" class="difflineat">@@ -494,17 +494,17 @@ NS_IMETHODIMP</span>
<a href="#l2.156"></a><span id="l2.156"> morkFactory::OpenFileStore( // open an existing database</span>
<a href="#l2.157"></a><span id="l2.157">   nsIMdbEnv* mev, // context</span>
<a href="#l2.158"></a><span id="l2.158">   nsIMdbHeap* ioHeap, // can be nil to cause ev's heap attribute to be used</span>
<a href="#l2.159"></a><span id="l2.159">   // const char* inFilePath, // the file to open for general db usage</span>
<a href="#l2.160"></a><span id="l2.160">   nsIMdbFile* ioFile, // db abstract file interface</span>
<a href="#l2.161"></a><span id="l2.161">   const mdbOpenPolicy* inOpenPolicy, // runtime policies for using db</span>
<a href="#l2.162"></a><span id="l2.162">   nsIMdbThumb** acqThumb)</span>
<a href="#l2.163"></a><span id="l2.163"> {</span>
<a href="#l2.164"></a><span id="l2.164" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.166"></a><span id="l2.166">   nsIMdbThumb* outThumb = 0;</span>
<a href="#l2.167"></a><span id="l2.167">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.168"></a><span id="l2.168">   if ( ev )</span>
<a href="#l2.169"></a><span id="l2.169">   {</span>
<a href="#l2.170"></a><span id="l2.170">     if ( !ioHeap ) // need to use heap from env?</span>
<a href="#l2.171"></a><span id="l2.171">       ioHeap = ev-&gt;mEnv_Heap;</span>
<a href="#l2.172"></a><span id="l2.172">     </span>
<a href="#l2.173"></a><span id="l2.173">     if ( ioFile &amp;&amp; inOpenPolicy &amp;&amp; acqThumb )</span>
<a href="#l2.174"></a><span id="l2.174" class="difflineat">@@ -540,17 +540,17 @@ morkFactory::OpenFileStore( // open an e</span>
<a href="#l2.175"></a><span id="l2.175"> // then call nsIMdbFactory::ThumbToOpenStore() to get the store instance.</span>
<a href="#l2.176"></a><span id="l2.176">   </span>
<a href="#l2.177"></a><span id="l2.177"> NS_IMETHODIMP</span>
<a href="#l2.178"></a><span id="l2.178"> morkFactory::ThumbToOpenStore( // redeem completed thumb from OpenFileStore()</span>
<a href="#l2.179"></a><span id="l2.179">   nsIMdbEnv* mev, // context</span>
<a href="#l2.180"></a><span id="l2.180">   nsIMdbThumb* ioThumb, // thumb from OpenFileStore() with done status</span>
<a href="#l2.181"></a><span id="l2.181">   nsIMdbStore** acqStore)</span>
<a href="#l2.182"></a><span id="l2.182"> {</span>
<a href="#l2.183"></a><span id="l2.183" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.184"></a><span id="l2.184" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.185"></a><span id="l2.185">   nsIMdbStore* outStore = 0;</span>
<a href="#l2.186"></a><span id="l2.186">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.187"></a><span id="l2.187">   if ( ev )</span>
<a href="#l2.188"></a><span id="l2.188">   {</span>
<a href="#l2.189"></a><span id="l2.189">     if ( ioThumb &amp;&amp; acqStore )</span>
<a href="#l2.190"></a><span id="l2.190">     {</span>
<a href="#l2.191"></a><span id="l2.191">       morkThumb* thumb = (morkThumb*) ioThumb;</span>
<a href="#l2.192"></a><span id="l2.192">       morkStore* store = thumb-&gt;ThumbToOpenStore(ev);</span>
<a href="#l2.193"></a><span id="l2.193" class="difflineat">@@ -578,17 +578,17 @@ NS_IMETHODIMP</span>
<a href="#l2.194"></a><span id="l2.194"> morkFactory::CreateNewFileStore( // create a new db with minimal content</span>
<a href="#l2.195"></a><span id="l2.195">   nsIMdbEnv* mev, // context</span>
<a href="#l2.196"></a><span id="l2.196">   nsIMdbHeap* ioHeap, // can be nil to cause ev's heap attribute to be used</span>
<a href="#l2.197"></a><span id="l2.197">   // const char* inFilePath, // name of file which should not yet exist</span>
<a href="#l2.198"></a><span id="l2.198">   nsIMdbFile* ioFile, // db abstract file interface</span>
<a href="#l2.199"></a><span id="l2.199">   const mdbOpenPolicy* inOpenPolicy, // runtime policies for using db</span>
<a href="#l2.200"></a><span id="l2.200">   nsIMdbStore** acqStore)</span>
<a href="#l2.201"></a><span id="l2.201"> {</span>
<a href="#l2.202"></a><span id="l2.202" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l2.203"></a><span id="l2.203" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l2.204"></a><span id="l2.204">   nsIMdbStore* outStore = 0;</span>
<a href="#l2.205"></a><span id="l2.205">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l2.206"></a><span id="l2.206">   if ( ev )</span>
<a href="#l2.207"></a><span id="l2.207">   {</span>
<a href="#l2.208"></a><span id="l2.208">     if ( !ioHeap ) // need to use heap from env?</span>
<a href="#l2.209"></a><span id="l2.209">       ioHeap = ev-&gt;mEnv_Heap;</span>
<a href="#l2.210"></a><span id="l2.210">     </span>
<a href="#l2.211"></a><span id="l2.211">     if ( ioFile &amp;&amp; inOpenPolicy &amp;&amp; acqStore &amp;&amp; ioHeap )</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/db/mork/src/morkFile.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/db/mork/src/morkFile.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -255,17 +255,17 @@ morkFile::WriteNewlines(morkEnv* ev, mor</span>
<a href="#l3.4"></a><span id="l3.4">     inNewlines -= quantum;</span>
<a href="#l3.5"></a><span id="l3.5">   }</span>
<a href="#l3.6"></a><span id="l3.6">   return outSize;</span>
<a href="#l3.7"></a><span id="l3.7"> }</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9"> NS_IMETHODIMP</span>
<a href="#l3.10"></a><span id="l3.10"> morkFile::Eof(nsIMdbEnv* mev, mdb_pos* outPos)</span>
<a href="#l3.11"></a><span id="l3.11"> {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l3.14"></a><span id="l3.14">   mdb_pos pos = -1;</span>
<a href="#l3.15"></a><span id="l3.15">   morkEnv *ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l3.16"></a><span id="l3.16">   pos = Length(ev);</span>
<a href="#l3.17"></a><span id="l3.17">   outErr = ev-&gt;AsErr();</span>
<a href="#l3.18"></a><span id="l3.18">   if ( outPos )</span>
<a href="#l3.19"></a><span id="l3.19">     *outPos = pos;</span>
<a href="#l3.20"></a><span id="l3.20">   return outErr;</span>
<a href="#l3.21"></a><span id="l3.21"> }</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -285,17 +285,17 @@ morkFile::Get(nsIMdbEnv* mev, void* outB</span>
<a href="#l3.23"></a><span id="l3.23">   }</span>
<a href="#l3.24"></a><span id="l3.24">   return rv;</span>
<a href="#l3.25"></a><span id="l3.25"> }</span>
<a href="#l3.26"></a><span id="l3.26"> </span>
<a href="#l3.27"></a><span id="l3.27"> NS_IMETHODIMP</span>
<a href="#l3.28"></a><span id="l3.28"> morkFile::Put(nsIMdbEnv* mev, const void* inBuf, mdb_size inSize,</span>
<a href="#l3.29"></a><span id="l3.29">   mdb_pos inPos, mdb_size* outActualSize)</span>
<a href="#l3.30"></a><span id="l3.30"> {</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l3.33"></a><span id="l3.33">   *outActualSize = 0;</span>
<a href="#l3.34"></a><span id="l3.34">   morkEnv *ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l3.35"></a><span id="l3.35">   if ( ev )</span>
<a href="#l3.36"></a><span id="l3.36">   {</span>
<a href="#l3.37"></a><span id="l3.37">     mdb_pos outPos;</span>
<a href="#l3.38"></a><span id="l3.38"> </span>
<a href="#l3.39"></a><span id="l3.39">     Seek(mev, inPos, &amp;outPos);</span>
<a href="#l3.40"></a><span id="l3.40">     if ( ev-&gt;Good() )</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineat">@@ -304,17 +304,17 @@ morkFile::Put(nsIMdbEnv* mev, const void</span>
<a href="#l3.42"></a><span id="l3.42">   }</span>
<a href="#l3.43"></a><span id="l3.43">   return outErr;</span>
<a href="#l3.44"></a><span id="l3.44"> }</span>
<a href="#l3.45"></a><span id="l3.45"> </span>
<a href="#l3.46"></a><span id="l3.46"> // { ----- begin path methods -----</span>
<a href="#l3.47"></a><span id="l3.47"> NS_IMETHODIMP</span>
<a href="#l3.48"></a><span id="l3.48"> morkFile::Path(nsIMdbEnv* mev, mdbYarn* outFilePath)</span>
<a href="#l3.49"></a><span id="l3.49"> {</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l3.52"></a><span id="l3.52">   if ( outFilePath )</span>
<a href="#l3.53"></a><span id="l3.53">     outFilePath-&gt;mYarn_Fill = 0;</span>
<a href="#l3.54"></a><span id="l3.54">   morkEnv *ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l3.55"></a><span id="l3.55">   if ( ev )</span>
<a href="#l3.56"></a><span id="l3.56">   {</span>
<a href="#l3.57"></a><span id="l3.57">     ev-&gt;StringToYarn(GetFileNameString(), outFilePath);</span>
<a href="#l3.58"></a><span id="l3.58">     outErr = ev-&gt;AsErr();</span>
<a href="#l3.59"></a><span id="l3.59">   }</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineat">@@ -324,17 +324,17 @@ morkFile::Path(nsIMdbEnv* mev, mdbYarn* </span>
<a href="#l3.61"></a><span id="l3.61"> // } ----- end path methods -----</span>
<a href="#l3.62"></a><span id="l3.62">   </span>
<a href="#l3.63"></a><span id="l3.63"> // { ----- begin replacement methods -----</span>
<a href="#l3.64"></a><span id="l3.64"> </span>
<a href="#l3.65"></a><span id="l3.65"> </span>
<a href="#l3.66"></a><span id="l3.66"> NS_IMETHODIMP</span>
<a href="#l3.67"></a><span id="l3.67"> morkFile::Thief(nsIMdbEnv* mev, nsIMdbFile** acqThief)</span>
<a href="#l3.68"></a><span id="l3.68"> {</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l3.71"></a><span id="l3.71">   nsIMdbFile* outThief = 0;</span>
<a href="#l3.72"></a><span id="l3.72">   morkEnv *ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l3.73"></a><span id="l3.73">   if ( ev )</span>
<a href="#l3.74"></a><span id="l3.74">   {</span>
<a href="#l3.75"></a><span id="l3.75">     outThief = GetThief();</span>
<a href="#l3.76"></a><span id="l3.76">     NS_IF_ADDREF(outThief);</span>
<a href="#l3.77"></a><span id="l3.77">     outErr = ev-&gt;AsErr();</span>
<a href="#l3.78"></a><span id="l3.78">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/db/mork/src/morkHandle.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/db/mork/src/morkHandle.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -221,17 +221,17 @@ morkHandle::CanUseHandle(nsIMdbEnv* mev,</span>
<a href="#l4.4"></a><span id="l4.4"> }</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6"> // { ===== begin nsIMdbObject methods =====</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> // { ----- begin attribute methods -----</span>
<a href="#l4.9"></a><span id="l4.9"> /*virtual*/ mdb_err</span>
<a href="#l4.10"></a><span id="l4.10"> morkHandle::Handle_IsFrozenMdbObject(nsIMdbEnv* mev, mdb_bool* outIsReadonly)</span>
<a href="#l4.11"></a><span id="l4.11"> {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.14"></a><span id="l4.14">   mdb_bool readOnly = mdbBool_kTrue;</span>
<a href="#l4.15"></a><span id="l4.15">   </span>
<a href="#l4.16"></a><span id="l4.16">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.17"></a><span id="l4.17">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.18"></a><span id="l4.18">   if ( ev )</span>
<a href="#l4.19"></a><span id="l4.19">   {</span>
<a href="#l4.20"></a><span id="l4.20">     readOnly = mHandle_Object-&gt;IsFrozen();</span>
<a href="#l4.21"></a><span id="l4.21">     </span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -245,17 +245,17 @@ morkHandle::Handle_IsFrozenMdbObject(nsI</span>
<a href="#l4.23"></a><span id="l4.23"> }</span>
<a href="#l4.24"></a><span id="l4.24"> // same as nsIMdbPort::GetIsPortReadonly() when this object is inside a port.</span>
<a href="#l4.25"></a><span id="l4.25"> // } ----- end attribute methods -----</span>
<a href="#l4.26"></a><span id="l4.26"> </span>
<a href="#l4.27"></a><span id="l4.27"> // { ----- begin factory methods -----</span>
<a href="#l4.28"></a><span id="l4.28"> /*virtual*/ mdb_err</span>
<a href="#l4.29"></a><span id="l4.29"> morkHandle::Handle_GetMdbFactory(nsIMdbEnv* mev, nsIMdbFactory** acqFactory)</span>
<a href="#l4.30"></a><span id="l4.30"> {</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.33"></a><span id="l4.33">   nsIMdbFactory* handle = 0;</span>
<a href="#l4.34"></a><span id="l4.34">   </span>
<a href="#l4.35"></a><span id="l4.35">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.36"></a><span id="l4.36">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.37"></a><span id="l4.37">   if ( ev )</span>
<a href="#l4.38"></a><span id="l4.38">   {</span>
<a href="#l4.39"></a><span id="l4.39">     morkFactory* factory = ev-&gt;mEnv_Factory;</span>
<a href="#l4.40"></a><span id="l4.40">     if ( factory )</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineat">@@ -277,17 +277,17 @@ morkHandle::Handle_GetMdbFactory(nsIMdbE</span>
<a href="#l4.42"></a><span id="l4.42"> } </span>
<a href="#l4.43"></a><span id="l4.43"> // } ----- end factory methods -----</span>
<a href="#l4.44"></a><span id="l4.44"> </span>
<a href="#l4.45"></a><span id="l4.45"> // { ----- begin ref counting for well-behaved cyclic graphs -----</span>
<a href="#l4.46"></a><span id="l4.46"> /*virtual*/ mdb_err</span>
<a href="#l4.47"></a><span id="l4.47"> morkHandle::Handle_GetWeakRefCount(nsIMdbEnv* mev, // weak refs</span>
<a href="#l4.48"></a><span id="l4.48">   mdb_count* outCount)</span>
<a href="#l4.49"></a><span id="l4.49"> {</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.52"></a><span id="l4.52">   mdb_count count = 0;</span>
<a href="#l4.53"></a><span id="l4.53">   </span>
<a href="#l4.54"></a><span id="l4.54">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.55"></a><span id="l4.55">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.56"></a><span id="l4.56">   if ( ev )</span>
<a href="#l4.57"></a><span id="l4.57">   {</span>
<a href="#l4.58"></a><span id="l4.58">     count = this-&gt;WeakRefsOnly();</span>
<a href="#l4.59"></a><span id="l4.59">     </span>
<a href="#l4.60"></a><span id="l4.60" class="difflineat">@@ -298,17 +298,17 @@ morkHandle::Handle_GetWeakRefCount(nsIMd</span>
<a href="#l4.61"></a><span id="l4.61">     *outCount = count;</span>
<a href="#l4.62"></a><span id="l4.62">     </span>
<a href="#l4.63"></a><span id="l4.63">   return outErr;</span>
<a href="#l4.64"></a><span id="l4.64"> }  </span>
<a href="#l4.65"></a><span id="l4.65"> /*virtual*/ mdb_err</span>
<a href="#l4.66"></a><span id="l4.66"> morkHandle::Handle_GetStrongRefCount(nsIMdbEnv* mev, // strong refs</span>
<a href="#l4.67"></a><span id="l4.67">   mdb_count* outCount)</span>
<a href="#l4.68"></a><span id="l4.68"> {</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.71"></a><span id="l4.71">   mdb_count count = 0;</span>
<a href="#l4.72"></a><span id="l4.72">   </span>
<a href="#l4.73"></a><span id="l4.73">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.74"></a><span id="l4.74">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.75"></a><span id="l4.75">   if ( ev )</span>
<a href="#l4.76"></a><span id="l4.76">   {</span>
<a href="#l4.77"></a><span id="l4.77">     count = this-&gt;StrongRefsOnly();</span>
<a href="#l4.78"></a><span id="l4.78">     </span>
<a href="#l4.79"></a><span id="l4.79" class="difflineat">@@ -319,63 +319,63 @@ morkHandle::Handle_GetStrongRefCount(nsI</span>
<a href="#l4.80"></a><span id="l4.80">     *outCount = count;</span>
<a href="#l4.81"></a><span id="l4.81">     </span>
<a href="#l4.82"></a><span id="l4.82">   return outErr;</span>
<a href="#l4.83"></a><span id="l4.83"> }</span>
<a href="#l4.84"></a><span id="l4.84"> </span>
<a href="#l4.85"></a><span id="l4.85"> /*virtual*/ mdb_err</span>
<a href="#l4.86"></a><span id="l4.86"> morkHandle::Handle_AddWeakRef(nsIMdbEnv* mev)</span>
<a href="#l4.87"></a><span id="l4.87"> {</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.90"></a><span id="l4.90">   </span>
<a href="#l4.91"></a><span id="l4.91">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.92"></a><span id="l4.92">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.93"></a><span id="l4.93">   if ( ev )</span>
<a href="#l4.94"></a><span id="l4.94">   {</span>
<a href="#l4.95"></a><span id="l4.95">     this-&gt;AddWeakRef(ev);</span>
<a href="#l4.96"></a><span id="l4.96">     outErr = ev-&gt;AsErr();</span>
<a href="#l4.97"></a><span id="l4.97">   }</span>
<a href="#l4.98"></a><span id="l4.98">     </span>
<a href="#l4.99"></a><span id="l4.99">   return outErr;</span>
<a href="#l4.100"></a><span id="l4.100"> }</span>
<a href="#l4.101"></a><span id="l4.101"> /*virtual*/ mdb_err</span>
<a href="#l4.102"></a><span id="l4.102"> morkHandle::Handle_AddStrongRef(nsIMdbEnv* mev)</span>
<a href="#l4.103"></a><span id="l4.103"> {</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.106"></a><span id="l4.106">   </span>
<a href="#l4.107"></a><span id="l4.107">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.108"></a><span id="l4.108">     /*inClosedOkay*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l4.109"></a><span id="l4.109">   if ( ev )</span>
<a href="#l4.110"></a><span id="l4.110">   {</span>
<a href="#l4.111"></a><span id="l4.111">     this-&gt;AddStrongRef(ev);</span>
<a href="#l4.112"></a><span id="l4.112">     outErr = ev-&gt;AsErr();</span>
<a href="#l4.113"></a><span id="l4.113">   }</span>
<a href="#l4.114"></a><span id="l4.114">     </span>
<a href="#l4.115"></a><span id="l4.115">   return outErr;</span>
<a href="#l4.116"></a><span id="l4.116"> }</span>
<a href="#l4.117"></a><span id="l4.117"> </span>
<a href="#l4.118"></a><span id="l4.118"> /*virtual*/ mdb_err</span>
<a href="#l4.119"></a><span id="l4.119"> morkHandle::Handle_CutWeakRef(nsIMdbEnv* mev)</span>
<a href="#l4.120"></a><span id="l4.120"> {</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.123"></a><span id="l4.123">   </span>
<a href="#l4.124"></a><span id="l4.124">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.125"></a><span id="l4.125">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.126"></a><span id="l4.126">   if ( ev )</span>
<a href="#l4.127"></a><span id="l4.127">   {</span>
<a href="#l4.128"></a><span id="l4.128">     this-&gt;CutWeakRef(ev);</span>
<a href="#l4.129"></a><span id="l4.129">     outErr = ev-&gt;AsErr();</span>
<a href="#l4.130"></a><span id="l4.130">   }</span>
<a href="#l4.131"></a><span id="l4.131">     </span>
<a href="#l4.132"></a><span id="l4.132">   return outErr;</span>
<a href="#l4.133"></a><span id="l4.133"> }</span>
<a href="#l4.134"></a><span id="l4.134"> /*virtual*/ mdb_err</span>
<a href="#l4.135"></a><span id="l4.135"> morkHandle::Handle_CutStrongRef(nsIMdbEnv* mev)</span>
<a href="#l4.136"></a><span id="l4.136"> {</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.139"></a><span id="l4.139">   morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.140"></a><span id="l4.140">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.141"></a><span id="l4.141">   if ( ev )</span>
<a href="#l4.142"></a><span id="l4.142">   {</span>
<a href="#l4.143"></a><span id="l4.143">     this-&gt;CutStrongRef(ev);</span>
<a href="#l4.144"></a><span id="l4.144">     outErr = ev-&gt;AsErr();</span>
<a href="#l4.145"></a><span id="l4.145">   }</span>
<a href="#l4.146"></a><span id="l4.146">   return outErr;</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineat">@@ -384,17 +384,17 @@ morkHandle::Handle_CutStrongRef(nsIMdbEn</span>
<a href="#l4.148"></a><span id="l4.148"> /*virtual*/ mdb_err</span>
<a href="#l4.149"></a><span id="l4.149"> morkHandle::Handle_CloseMdbObject(nsIMdbEnv* mev)</span>
<a href="#l4.150"></a><span id="l4.150"> // called at strong refs zero</span>
<a href="#l4.151"></a><span id="l4.151"> {</span>
<a href="#l4.152"></a><span id="l4.152">   // if only one ref, Handle_CutStrongRef will clean up better.</span>
<a href="#l4.153"></a><span id="l4.153">   if (mNode_Uses == 1)</span>
<a href="#l4.154"></a><span id="l4.154">     return Handle_CutStrongRef(mev);</span>
<a href="#l4.155"></a><span id="l4.155"> </span>
<a href="#l4.156"></a><span id="l4.156" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.158"></a><span id="l4.158">   </span>
<a href="#l4.159"></a><span id="l4.159">   if ( this-&gt;IsNode() &amp;&amp; this-&gt;IsOpenNode() )</span>
<a href="#l4.160"></a><span id="l4.160">   {</span>
<a href="#l4.161"></a><span id="l4.161">     morkEnv* ev = CanUseHandle(mev, /*inMutable*/ morkBool_kFalse,</span>
<a href="#l4.162"></a><span id="l4.162">     /*inClosedOkay*/ morkBool_kTrue, &amp;outErr);</span>
<a href="#l4.163"></a><span id="l4.163">     if ( ev )</span>
<a href="#l4.164"></a><span id="l4.164">     {</span>
<a href="#l4.165"></a><span id="l4.165">       morkObject* object = mHandle_Object;</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineat">@@ -407,17 +407,17 @@ morkHandle::Handle_CloseMdbObject(nsIMdb</span>
<a href="#l4.167"></a><span id="l4.167">   }</span>
<a href="#l4.168"></a><span id="l4.168">   return outErr;</span>
<a href="#l4.169"></a><span id="l4.169"> }</span>
<a href="#l4.170"></a><span id="l4.170"> </span>
<a href="#l4.171"></a><span id="l4.171"> /*virtual*/ mdb_err</span>
<a href="#l4.172"></a><span id="l4.172"> morkHandle::Handle_IsOpenMdbObject(nsIMdbEnv* mev, mdb_bool* outOpen)</span>
<a href="#l4.173"></a><span id="l4.173"> {</span>
<a href="#l4.174"></a><span id="l4.174">   MORK_USED_1(mev);</span>
<a href="#l4.175"></a><span id="l4.175" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l4.176"></a><span id="l4.176" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l4.177"></a><span id="l4.177">   </span>
<a href="#l4.178"></a><span id="l4.178">   MORK_ASSERT(outOpen);</span>
<a href="#l4.179"></a><span id="l4.179">   if ( outOpen )</span>
<a href="#l4.180"></a><span id="l4.180">     *outOpen = this-&gt;IsOpenNode();</span>
<a href="#l4.181"></a><span id="l4.181">       </span>
<a href="#l4.182"></a><span id="l4.182">   return outErr;</span>
<a href="#l4.183"></a><span id="l4.183"> }</span>
<a href="#l4.184"></a><span id="l4.184"> // } ----- end ref counting -----</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/db/mork/src/morkNode.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/db/mork/src/morkNode.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -209,17 +209,17 @@ morkNode::CloseMdbObject(nsIMdbEnv* mev)</span>
<a href="#l5.4"></a><span id="l5.4"> }</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6"> mdb_err morkNode::CloseMdbObject(morkEnv *ev)</span>
<a href="#l5.7"></a><span id="l5.7"> {</span>
<a href="#l5.8"></a><span id="l5.8">   // if only one ref, Handle_CutStrongRef will clean up better.</span>
<a href="#l5.9"></a><span id="l5.9">   if (mNode_Uses == 1)</span>
<a href="#l5.10"></a><span id="l5.10">     return CutStrongRef(ev);</span>
<a href="#l5.11"></a><span id="l5.11"> </span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l5.14"></a><span id="l5.14">   </span>
<a href="#l5.15"></a><span id="l5.15">   if ( IsNode() &amp;&amp; IsOpenNode() )</span>
<a href="#l5.16"></a><span id="l5.16">   {</span>
<a href="#l5.17"></a><span id="l5.17">     if ( ev )</span>
<a href="#l5.18"></a><span id="l5.18">     {</span>
<a href="#l5.19"></a><span id="l5.19">       CloseMorkNode(ev);</span>
<a href="#l5.20"></a><span id="l5.20">       outErr = ev-&gt;AsErr();</span>
<a href="#l5.21"></a><span id="l5.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/db/mork/src/morkPortTableCursor.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/db/mork/src/morkPortTableCursor.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -321,17 +321,17 @@ morkPortTableCursor::SetPort(nsIMdbEnv* </span>
<a href="#l6.4"></a><span id="l6.4"> {</span>
<a href="#l6.5"></a><span id="l6.5">   NS_ASSERTION(false,&quot;not implemented&quot;);</span>
<a href="#l6.6"></a><span id="l6.6">   return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l6.7"></a><span id="l6.7"> }</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9"> NS_IMETHODIMP</span>
<a href="#l6.10"></a><span id="l6.10"> morkPortTableCursor::GetPort(nsIMdbEnv* mev, nsIMdbPort** acqPort)</span>
<a href="#l6.11"></a><span id="l6.11"> {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l6.14"></a><span id="l6.14">   nsIMdbPort* outPort = 0;</span>
<a href="#l6.15"></a><span id="l6.15">   morkEnv* ev =</span>
<a href="#l6.16"></a><span id="l6.16">     this-&gt;CanUsePortTableCursor(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l6.17"></a><span id="l6.17">   if ( ev )</span>
<a href="#l6.18"></a><span id="l6.18">   {</span>
<a href="#l6.19"></a><span id="l6.19">     if ( mPortTableCursor_Store )</span>
<a href="#l6.20"></a><span id="l6.20">       outPort = mPortTableCursor_Store-&gt;AcquireStoreHandle(ev);</span>
<a href="#l6.21"></a><span id="l6.21">     outErr = ev-&gt;AsErr();</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -340,33 +340,33 @@ morkPortTableCursor::GetPort(nsIMdbEnv* </span>
<a href="#l6.23"></a><span id="l6.23">     *acqPort = outPort;</span>
<a href="#l6.24"></a><span id="l6.24">   return outErr;</span>
<a href="#l6.25"></a><span id="l6.25"> }</span>
<a href="#l6.26"></a><span id="l6.26"> </span>
<a href="#l6.27"></a><span id="l6.27"> NS_IMETHODIMP</span>
<a href="#l6.28"></a><span id="l6.28"> morkPortTableCursor::SetRowScope(nsIMdbEnv* mev, // sets pos to -1</span>
<a href="#l6.29"></a><span id="l6.29">   mdb_scope inRowScope)</span>
<a href="#l6.30"></a><span id="l6.30"> {</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l6.33"></a><span id="l6.33">   morkEnv* ev =</span>
<a href="#l6.34"></a><span id="l6.34">     this-&gt;CanUsePortTableCursor(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l6.35"></a><span id="l6.35">   if ( ev )</span>
<a href="#l6.36"></a><span id="l6.36">   {</span>
<a href="#l6.37"></a><span id="l6.37">     mCursor_Pos = -1;</span>
<a href="#l6.38"></a><span id="l6.38">     </span>
<a href="#l6.39"></a><span id="l6.39">     SetRowScope(ev, inRowScope);</span>
<a href="#l6.40"></a><span id="l6.40">     outErr = ev-&gt;AsErr();</span>
<a href="#l6.41"></a><span id="l6.41">   }</span>
<a href="#l6.42"></a><span id="l6.42">   return outErr;</span>
<a href="#l6.43"></a><span id="l6.43"> }</span>
<a href="#l6.44"></a><span id="l6.44"> </span>
<a href="#l6.45"></a><span id="l6.45"> NS_IMETHODIMP</span>
<a href="#l6.46"></a><span id="l6.46"> morkPortTableCursor::GetRowScope(nsIMdbEnv* mev, mdb_scope* outRowScope)</span>
<a href="#l6.47"></a><span id="l6.47"> {</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l6.50"></a><span id="l6.50">   mdb_scope rowScope = 0;</span>
<a href="#l6.51"></a><span id="l6.51">   morkEnv* ev =</span>
<a href="#l6.52"></a><span id="l6.52">     this-&gt;CanUsePortTableCursor(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l6.53"></a><span id="l6.53">   if ( ev )</span>
<a href="#l6.54"></a><span id="l6.54">   {</span>
<a href="#l6.55"></a><span id="l6.55">     rowScope = mPortTableCursor_RowScope;</span>
<a href="#l6.56"></a><span id="l6.56">     outErr = ev-&gt;AsErr();</span>
<a href="#l6.57"></a><span id="l6.57">   }</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineat">@@ -374,34 +374,34 @@ morkPortTableCursor::GetRowScope(nsIMdbE</span>
<a href="#l6.59"></a><span id="l6.59">   return outErr;</span>
<a href="#l6.60"></a><span id="l6.60"> }</span>
<a href="#l6.61"></a><span id="l6.61"> // setting row scope to zero iterates over all row scopes in port</span>
<a href="#l6.62"></a><span id="l6.62">   </span>
<a href="#l6.63"></a><span id="l6.63"> NS_IMETHODIMP</span>
<a href="#l6.64"></a><span id="l6.64"> morkPortTableCursor::SetTableKind(nsIMdbEnv* mev, // sets pos to -1</span>
<a href="#l6.65"></a><span id="l6.65">   mdb_kind inTableKind)</span>
<a href="#l6.66"></a><span id="l6.66"> {</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l6.69"></a><span id="l6.69">   morkEnv* ev =</span>
<a href="#l6.70"></a><span id="l6.70">     this-&gt;CanUsePortTableCursor(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l6.71"></a><span id="l6.71">   if ( ev )</span>
<a href="#l6.72"></a><span id="l6.72">   {</span>
<a href="#l6.73"></a><span id="l6.73">     mCursor_Pos = -1;</span>
<a href="#l6.74"></a><span id="l6.74">     </span>
<a href="#l6.75"></a><span id="l6.75">     SetTableKind(ev, inTableKind);</span>
<a href="#l6.76"></a><span id="l6.76">     outErr = ev-&gt;AsErr();</span>
<a href="#l6.77"></a><span id="l6.77">   }</span>
<a href="#l6.78"></a><span id="l6.78">   return outErr;</span>
<a href="#l6.79"></a><span id="l6.79"> }</span>
<a href="#l6.80"></a><span id="l6.80"> </span>
<a href="#l6.81"></a><span id="l6.81"> NS_IMETHODIMP</span>
<a href="#l6.82"></a><span id="l6.82"> morkPortTableCursor::GetTableKind(nsIMdbEnv* mev, mdb_kind* outTableKind)</span>
<a href="#l6.83"></a><span id="l6.83"> // setting table kind to zero iterates over all table kinds in row scope</span>
<a href="#l6.84"></a><span id="l6.84"> {</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l6.87"></a><span id="l6.87">   mdb_kind tableKind = 0;</span>
<a href="#l6.88"></a><span id="l6.88">   morkEnv* ev =</span>
<a href="#l6.89"></a><span id="l6.89">     this-&gt;CanUsePortTableCursor(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l6.90"></a><span id="l6.90">   if ( ev )</span>
<a href="#l6.91"></a><span id="l6.91">   {</span>
<a href="#l6.92"></a><span id="l6.92">     tableKind = mPortTableCursor_TableKind;</span>
<a href="#l6.93"></a><span id="l6.93">     outErr = ev-&gt;AsErr();</span>
<a href="#l6.94"></a><span id="l6.94">   }</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineat">@@ -411,17 +411,17 @@ morkPortTableCursor::GetTableKind(nsIMdb</span>
<a href="#l6.96"></a><span id="l6.96"> // } ----- end attribute methods -----</span>
<a href="#l6.97"></a><span id="l6.97"> </span>
<a href="#l6.98"></a><span id="l6.98"> // { ----- begin table iteration methods -----</span>
<a href="#l6.99"></a><span id="l6.99"> NS_IMETHODIMP</span>
<a href="#l6.100"></a><span id="l6.100"> morkPortTableCursor::NextTable( // get table at next position in the db</span>
<a href="#l6.101"></a><span id="l6.101">   nsIMdbEnv* mev, // context</span>
<a href="#l6.102"></a><span id="l6.102">   nsIMdbTable** acqTable)</span>
<a href="#l6.103"></a><span id="l6.103"> {</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l6.106"></a><span id="l6.106">   nsIMdbTable* outTable = 0;</span>
<a href="#l6.107"></a><span id="l6.107">   morkEnv* ev =</span>
<a href="#l6.108"></a><span id="l6.108">     CanUsePortTableCursor(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l6.109"></a><span id="l6.109">   if ( ev )</span>
<a href="#l6.110"></a><span id="l6.110">   {</span>
<a href="#l6.111"></a><span id="l6.111">     morkTable* table = NextTable(ev);</span>
<a href="#l6.112"></a><span id="l6.112">     if ( table &amp;&amp; ev-&gt;Good() )</span>
<a href="#l6.113"></a><span id="l6.113">       outTable = table-&gt;AcquireTableHandle(ev);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/db/mork/src/morkRowCellCursor.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/db/mork/src/morkRowCellCursor.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -137,17 +137,17 @@ morkRowCellCursor::NonRowCellCursorTypeE</span>
<a href="#l7.4"></a><span id="l7.4"> }</span>
<a href="#l7.5"></a><span id="l7.5"> </span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> //3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l7.8"></a><span id="l7.8"> // { ----- begin attribute methods -----</span>
<a href="#l7.9"></a><span id="l7.9"> NS_IMETHODIMP</span>
<a href="#l7.10"></a><span id="l7.10"> morkRowCellCursor::SetRow(nsIMdbEnv* mev, nsIMdbRow* ioRow)</span>
<a href="#l7.11"></a><span id="l7.11"> {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l7.14"></a><span id="l7.14">   morkRow* row = 0;</span>
<a href="#l7.15"></a><span id="l7.15">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l7.16"></a><span id="l7.16">   if ( ev )</span>
<a href="#l7.17"></a><span id="l7.17">   {</span>
<a href="#l7.18"></a><span id="l7.18">     row = (morkRow *) ioRow;</span>
<a href="#l7.19"></a><span id="l7.19">     morkStore* store = row-&gt;GetRowSpaceStore(ev);</span>
<a href="#l7.20"></a><span id="l7.20">     if ( store )</span>
<a href="#l7.21"></a><span id="l7.21">     {</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -166,17 +166,17 @@ morkRowCellCursor::SetRow(nsIMdbEnv* mev</span>
<a href="#l7.23"></a><span id="l7.23">     outErr = ev-&gt;AsErr();</span>
<a href="#l7.24"></a><span id="l7.24">   }</span>
<a href="#l7.25"></a><span id="l7.25">   return outErr;</span>
<a href="#l7.26"></a><span id="l7.26"> }</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28"> NS_IMETHODIMP</span>
<a href="#l7.29"></a><span id="l7.29"> morkRowCellCursor::GetRow(nsIMdbEnv* mev, nsIMdbRow** acqRow)</span>
<a href="#l7.30"></a><span id="l7.30"> {</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l7.33"></a><span id="l7.33">   nsIMdbRow* outRow = 0;</span>
<a href="#l7.34"></a><span id="l7.34">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l7.35"></a><span id="l7.35">   if ( ev )</span>
<a href="#l7.36"></a><span id="l7.36">   {</span>
<a href="#l7.37"></a><span id="l7.37">     morkRowObject* rowObj = mRowCellCursor_RowObject;</span>
<a href="#l7.38"></a><span id="l7.38">     if ( rowObj )</span>
<a href="#l7.39"></a><span id="l7.39">       outRow = rowObj-&gt;AcquireRowHandle(ev);</span>
<a href="#l7.40"></a><span id="l7.40"> </span>
<a href="#l7.41"></a><span id="l7.41" class="difflineat">@@ -191,17 +191,17 @@ morkRowCellCursor::GetRow(nsIMdbEnv* mev</span>
<a href="#l7.42"></a><span id="l7.42"> // { ----- begin cell creation methods -----</span>
<a href="#l7.43"></a><span id="l7.43"> NS_IMETHODIMP</span>
<a href="#l7.44"></a><span id="l7.44"> morkRowCellCursor::MakeCell( // get cell at current pos in the row</span>
<a href="#l7.45"></a><span id="l7.45">   nsIMdbEnv* mev, // context</span>
<a href="#l7.46"></a><span id="l7.46">   mdb_column* outColumn, // column for this particular cell</span>
<a href="#l7.47"></a><span id="l7.47">   mdb_pos* outPos, // position of cell in row sequence</span>
<a href="#l7.48"></a><span id="l7.48">   nsIMdbCell** acqCell)</span>
<a href="#l7.49"></a><span id="l7.49"> {</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l7.52"></a><span id="l7.52">   nsIMdbCell* outCell = 0;</span>
<a href="#l7.53"></a><span id="l7.53">   mdb_pos pos = 0;</span>
<a href="#l7.54"></a><span id="l7.54">   mdb_column col = 0;</span>
<a href="#l7.55"></a><span id="l7.55">   morkRow* row = 0;</span>
<a href="#l7.56"></a><span id="l7.56">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l7.57"></a><span id="l7.57">   if ( ev )</span>
<a href="#l7.58"></a><span id="l7.58">   {</span>
<a href="#l7.59"></a><span id="l7.59">     pos = mCursor_Pos;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/db/mork/src/morkRowObject.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/db/mork/src/morkRowObject.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -88,44 +88,44 @@ morkRowObject::morkRowObject(morkEnv* ev</span>
<a href="#l8.4"></a><span id="l8.4"> NS_IMPL_ISUPPORTS_INHERITED1(morkRowObject, morkObject, nsIMdbRow)</span>
<a href="#l8.5"></a><span id="l8.5"> // { ===== begin nsIMdbCollection methods =====</span>
<a href="#l8.6"></a><span id="l8.6"> </span>
<a href="#l8.7"></a><span id="l8.7"> // { ----- begin attribute methods -----</span>
<a href="#l8.8"></a><span id="l8.8"> NS_IMETHODIMP</span>
<a href="#l8.9"></a><span id="l8.9"> morkRowObject::GetSeed(nsIMdbEnv* mev,</span>
<a href="#l8.10"></a><span id="l8.10">   mdb_seed* outSeed)</span>
<a href="#l8.11"></a><span id="l8.11"> {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.14"></a><span id="l8.14">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.15"></a><span id="l8.15">   if ( ev )</span>
<a href="#l8.16"></a><span id="l8.16">   {</span>
<a href="#l8.17"></a><span id="l8.17">     *outSeed = (mdb_seed) mRowObject_Row-&gt;mRow_Seed;</span>
<a href="#l8.18"></a><span id="l8.18">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.19"></a><span id="l8.19">   }</span>
<a href="#l8.20"></a><span id="l8.20">   return outErr;</span>
<a href="#l8.21"></a><span id="l8.21"> }</span>
<a href="#l8.22"></a><span id="l8.22"> NS_IMETHODIMP</span>
<a href="#l8.23"></a><span id="l8.23"> morkRowObject::GetCount(nsIMdbEnv* mev,</span>
<a href="#l8.24"></a><span id="l8.24">   mdb_count* outCount)</span>
<a href="#l8.25"></a><span id="l8.25"> {</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.28"></a><span id="l8.28">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.29"></a><span id="l8.29">   if ( ev )</span>
<a href="#l8.30"></a><span id="l8.30">   {</span>
<a href="#l8.31"></a><span id="l8.31">     *outCount = (mdb_count) mRowObject_Row-&gt;mRow_Length;</span>
<a href="#l8.32"></a><span id="l8.32">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.33"></a><span id="l8.33">   }</span>
<a href="#l8.34"></a><span id="l8.34">   return outErr;</span>
<a href="#l8.35"></a><span id="l8.35"> }</span>
<a href="#l8.36"></a><span id="l8.36"> </span>
<a href="#l8.37"></a><span id="l8.37"> NS_IMETHODIMP</span>
<a href="#l8.38"></a><span id="l8.38"> morkRowObject::GetPort(nsIMdbEnv* mev,</span>
<a href="#l8.39"></a><span id="l8.39">   nsIMdbPort** acqPort)</span>
<a href="#l8.40"></a><span id="l8.40"> {</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.43"></a><span id="l8.43">   nsIMdbPort* outPort = 0;</span>
<a href="#l8.44"></a><span id="l8.44">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.45"></a><span id="l8.45">   if ( ev )</span>
<a href="#l8.46"></a><span id="l8.46">   {</span>
<a href="#l8.47"></a><span id="l8.47">     morkRowSpace* rowSpace = mRowObject_Row-&gt;mRow_Space;</span>
<a href="#l8.48"></a><span id="l8.48">     if ( rowSpace &amp;&amp; rowSpace-&gt;mSpace_Store )</span>
<a href="#l8.49"></a><span id="l8.49">     {</span>
<a href="#l8.50"></a><span id="l8.50">       morkStore* store = mRowObject_Row-&gt;GetRowSpaceStore(ev);</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineat">@@ -192,17 +192,17 @@ morkRowObject::DropActivity( // tell col</span>
<a href="#l8.52"></a><span id="l8.52"> </span>
<a href="#l8.53"></a><span id="l8.53"> // { ----- begin cursor methods -----</span>
<a href="#l8.54"></a><span id="l8.54"> NS_IMETHODIMP</span>
<a href="#l8.55"></a><span id="l8.55"> morkRowObject::GetRowCellCursor( // make a cursor starting iteration at inCellPos</span>
<a href="#l8.56"></a><span id="l8.56">   nsIMdbEnv* mev, // context</span>
<a href="#l8.57"></a><span id="l8.57">   mdb_pos inPos, // zero-based ordinal position of cell in row</span>
<a href="#l8.58"></a><span id="l8.58">   nsIMdbRowCellCursor** acqCursor)</span>
<a href="#l8.59"></a><span id="l8.59"> {</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.62"></a><span id="l8.62">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.63"></a><span id="l8.63">   nsIMdbRowCellCursor* outCursor = 0;</span>
<a href="#l8.64"></a><span id="l8.64">   if ( ev )</span>
<a href="#l8.65"></a><span id="l8.65">   {</span>
<a href="#l8.66"></a><span id="l8.66">     morkRowCellCursor* cursor = mRowObject_Row-&gt;NewRowCellCursor(ev, inPos);</span>
<a href="#l8.67"></a><span id="l8.67">     if ( cursor )</span>
<a href="#l8.68"></a><span id="l8.68">     {</span>
<a href="#l8.69"></a><span id="l8.69">       if ( ev-&gt;Good() )</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineat">@@ -253,17 +253,17 @@ morkRowObject::CutColumn( // make sure a</span>
<a href="#l8.71"></a><span id="l8.71">   }</span>
<a href="#l8.72"></a><span id="l8.72">   return outErr;</span>
<a href="#l8.73"></a><span id="l8.73"> }</span>
<a href="#l8.74"></a><span id="l8.74"> </span>
<a href="#l8.75"></a><span id="l8.75"> NS_IMETHODIMP</span>
<a href="#l8.76"></a><span id="l8.76"> morkRowObject::CutAllColumns( // remove all columns from the row</span>
<a href="#l8.77"></a><span id="l8.77">   nsIMdbEnv* mev)</span>
<a href="#l8.78"></a><span id="l8.78"> {</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.81"></a><span id="l8.81">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.82"></a><span id="l8.82">   if ( ev )</span>
<a href="#l8.83"></a><span id="l8.83">   {</span>
<a href="#l8.84"></a><span id="l8.84">     mRowObject_Row-&gt;CutAllColumns(ev);</span>
<a href="#l8.85"></a><span id="l8.85">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.86"></a><span id="l8.86">   }</span>
<a href="#l8.87"></a><span id="l8.87">   return outErr;</span>
<a href="#l8.88"></a><span id="l8.88"> }</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineat">@@ -271,17 +271,17 @@ morkRowObject::CutAllColumns( // remove </span>
<a href="#l8.90"></a><span id="l8.90"> </span>
<a href="#l8.91"></a><span id="l8.91"> // { ----- begin cell methods -----</span>
<a href="#l8.92"></a><span id="l8.92"> NS_IMETHODIMP</span>
<a href="#l8.93"></a><span id="l8.93"> morkRowObject::NewCell( // get cell for specified column, or add new one</span>
<a href="#l8.94"></a><span id="l8.94">   nsIMdbEnv* mev, // context</span>
<a href="#l8.95"></a><span id="l8.95">   mdb_column inColumn, // column to add</span>
<a href="#l8.96"></a><span id="l8.96">   nsIMdbCell** acqCell)</span>
<a href="#l8.97"></a><span id="l8.97"> {</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.100"></a><span id="l8.100">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.101"></a><span id="l8.101">   if ( ev )</span>
<a href="#l8.102"></a><span id="l8.102">   {</span>
<a href="#l8.103"></a><span id="l8.103">     GetCell(mev, inColumn, acqCell);</span>
<a href="#l8.104"></a><span id="l8.104">     if ( !*acqCell )</span>
<a href="#l8.105"></a><span id="l8.105">     {</span>
<a href="#l8.106"></a><span id="l8.106">       if ( mRowObject_Store )</span>
<a href="#l8.107"></a><span id="l8.107">       {</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineat">@@ -302,17 +302,17 @@ morkRowObject::NewCell( // get cell for </span>
<a href="#l8.109"></a><span id="l8.109">   return outErr;</span>
<a href="#l8.110"></a><span id="l8.110"> }</span>
<a href="#l8.111"></a><span id="l8.111">   </span>
<a href="#l8.112"></a><span id="l8.112"> NS_IMETHODIMP</span>
<a href="#l8.113"></a><span id="l8.113"> morkRowObject::AddCell( // copy a cell from another row to this row</span>
<a href="#l8.114"></a><span id="l8.114">   nsIMdbEnv* mev, // context</span>
<a href="#l8.115"></a><span id="l8.115">   const nsIMdbCell* inCell)</span>
<a href="#l8.116"></a><span id="l8.116"> {</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.119"></a><span id="l8.119">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.120"></a><span id="l8.120">   if ( ev )</span>
<a href="#l8.121"></a><span id="l8.121">   {</span>
<a href="#l8.122"></a><span id="l8.122">     morkCell* cell = 0;</span>
<a href="#l8.123"></a><span id="l8.123">     morkCellObject* cellObj = (morkCellObject*) inCell;</span>
<a href="#l8.124"></a><span id="l8.124">     if ( cellObj-&gt;CanUseCell(mev, morkBool_kFalse, &amp;outErr, &amp;cell) )</span>
<a href="#l8.125"></a><span id="l8.125">     {</span>
<a href="#l8.126"></a><span id="l8.126"> </span>
<a href="#l8.127"></a><span id="l8.127" class="difflineat">@@ -349,17 +349,17 @@ morkRowObject::AddCell( // copy a cell f</span>
<a href="#l8.128"></a><span id="l8.128"> }</span>
<a href="#l8.129"></a><span id="l8.129">   </span>
<a href="#l8.130"></a><span id="l8.130"> NS_IMETHODIMP</span>
<a href="#l8.131"></a><span id="l8.131"> morkRowObject::GetCell( // find a cell in this row</span>
<a href="#l8.132"></a><span id="l8.132">   nsIMdbEnv* mev, // context</span>
<a href="#l8.133"></a><span id="l8.133">   mdb_column inColumn, // column to find</span>
<a href="#l8.134"></a><span id="l8.134">   nsIMdbCell** acqCell)</span>
<a href="#l8.135"></a><span id="l8.135"> {</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.138"></a><span id="l8.138">   nsIMdbCell* outCell = 0;</span>
<a href="#l8.139"></a><span id="l8.139">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.140"></a><span id="l8.140"> </span>
<a href="#l8.141"></a><span id="l8.141">   if ( ev )</span>
<a href="#l8.142"></a><span id="l8.142">   {</span>
<a href="#l8.143"></a><span id="l8.143">     if ( inColumn )</span>
<a href="#l8.144"></a><span id="l8.144">     {</span>
<a href="#l8.145"></a><span id="l8.145">       mork_pos pos = 0;</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineat">@@ -378,34 +378,34 @@ morkRowObject::GetCell( // find a cell i</span>
<a href="#l8.147"></a><span id="l8.147">     *acqCell = outCell;</span>
<a href="#l8.148"></a><span id="l8.148">   return outErr;</span>
<a href="#l8.149"></a><span id="l8.149"> }</span>
<a href="#l8.150"></a><span id="l8.150">   </span>
<a href="#l8.151"></a><span id="l8.151"> NS_IMETHODIMP</span>
<a href="#l8.152"></a><span id="l8.152"> morkRowObject::EmptyAllCells( // make all cells in row empty of content</span>
<a href="#l8.153"></a><span id="l8.153">   nsIMdbEnv* mev)</span>
<a href="#l8.154"></a><span id="l8.154"> {</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.157"></a><span id="l8.157">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.158"></a><span id="l8.158">   if ( ev )</span>
<a href="#l8.159"></a><span id="l8.159">   {</span>
<a href="#l8.160"></a><span id="l8.160">     EmptyAllCells(ev);</span>
<a href="#l8.161"></a><span id="l8.161">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.162"></a><span id="l8.162">   }</span>
<a href="#l8.163"></a><span id="l8.163">   return outErr;</span>
<a href="#l8.164"></a><span id="l8.164"> }</span>
<a href="#l8.165"></a><span id="l8.165"> // } ----- end cell methods -----</span>
<a href="#l8.166"></a><span id="l8.166"> </span>
<a href="#l8.167"></a><span id="l8.167"> // { ----- begin row methods -----</span>
<a href="#l8.168"></a><span id="l8.168"> NS_IMETHODIMP</span>
<a href="#l8.169"></a><span id="l8.169"> morkRowObject::AddRow( // add all cells in another row to this one</span>
<a href="#l8.170"></a><span id="l8.170">   nsIMdbEnv* mev, // context</span>
<a href="#l8.171"></a><span id="l8.171">   nsIMdbRow* ioSourceRow)</span>
<a href="#l8.172"></a><span id="l8.172"> {</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.175"></a><span id="l8.175">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.176"></a><span id="l8.176">   if ( ev )</span>
<a href="#l8.177"></a><span id="l8.177">   {</span>
<a href="#l8.178"></a><span id="l8.178">     morkRow* unsafeSource = (morkRow*) ioSourceRow; // unsafe cast</span>
<a href="#l8.179"></a><span id="l8.179"> //    if ( unsafeSource-&gt;CanUseRow(mev, morkBool_kFalse, &amp;outErr, &amp;source) )</span>
<a href="#l8.180"></a><span id="l8.180">     {</span>
<a href="#l8.181"></a><span id="l8.181">       mRowObject_Row-&gt;AddRow(ev, unsafeSource);</span>
<a href="#l8.182"></a><span id="l8.182">     }</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineat">@@ -414,17 +414,17 @@ morkRowObject::AddRow( // add all cells </span>
<a href="#l8.184"></a><span id="l8.184">   return outErr;</span>
<a href="#l8.185"></a><span id="l8.185"> }</span>
<a href="#l8.186"></a><span id="l8.186">   </span>
<a href="#l8.187"></a><span id="l8.187"> NS_IMETHODIMP</span>
<a href="#l8.188"></a><span id="l8.188"> morkRowObject::SetRow( // make exact duplicate of another row</span>
<a href="#l8.189"></a><span id="l8.189">   nsIMdbEnv* mev, // context</span>
<a href="#l8.190"></a><span id="l8.190">   nsIMdbRow* ioSourceRow)</span>
<a href="#l8.191"></a><span id="l8.191"> {</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.193"></a><span id="l8.193" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.194"></a><span id="l8.194">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.195"></a><span id="l8.195">   if ( ev )</span>
<a href="#l8.196"></a><span id="l8.196">   {</span>
<a href="#l8.197"></a><span id="l8.197">     morkRowObject *sourceObject = (morkRowObject *) ioSourceRow; // unsafe cast</span>
<a href="#l8.198"></a><span id="l8.198">     morkRow* unsafeSource = sourceObject-&gt;mRowObject_Row;</span>
<a href="#l8.199"></a><span id="l8.199"> //    if ( unsafeSource-&gt;CanUseRow(mev, morkBool_kFalse, &amp;outErr, &amp;source) )</span>
<a href="#l8.200"></a><span id="l8.200">     {</span>
<a href="#l8.201"></a><span id="l8.201">       mRowObject_Row-&gt;SetRow(ev, unsafeSource);</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineat">@@ -437,17 +437,17 @@ morkRowObject::SetRow( // make exact dup</span>
<a href="#l8.203"></a><span id="l8.203"> </span>
<a href="#l8.204"></a><span id="l8.204"> // { ----- begin blob methods -----</span>
<a href="#l8.205"></a><span id="l8.205"> NS_IMETHODIMP</span>
<a href="#l8.206"></a><span id="l8.206"> morkRowObject::SetCellYarn( // synonym for AddColumn()</span>
<a href="#l8.207"></a><span id="l8.207">   nsIMdbEnv* mev, // context</span>
<a href="#l8.208"></a><span id="l8.208">   mdb_column inColumn, // column to add</span>
<a href="#l8.209"></a><span id="l8.209">   const mdbYarn* inYarn)</span>
<a href="#l8.210"></a><span id="l8.210"> {</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.213"></a><span id="l8.213">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.214"></a><span id="l8.214">   if ( ev )</span>
<a href="#l8.215"></a><span id="l8.215">   {</span>
<a href="#l8.216"></a><span id="l8.216">     if ( mRowObject_Store )</span>
<a href="#l8.217"></a><span id="l8.217">       AddColumn(ev, inColumn, inYarn);</span>
<a href="#l8.218"></a><span id="l8.218">       </span>
<a href="#l8.219"></a><span id="l8.219">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.220"></a><span id="l8.220">   }</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineat">@@ -455,17 +455,17 @@ morkRowObject::SetCellYarn( // synonym f</span>
<a href="#l8.222"></a><span id="l8.222"> }</span>
<a href="#l8.223"></a><span id="l8.223"> NS_IMETHODIMP</span>
<a href="#l8.224"></a><span id="l8.224"> morkRowObject::GetCellYarn(</span>
<a href="#l8.225"></a><span id="l8.225">   nsIMdbEnv* mev, // context</span>
<a href="#l8.226"></a><span id="l8.226">   mdb_column inColumn, // column to read </span>
<a href="#l8.227"></a><span id="l8.227">   mdbYarn* outYarn)  // writes some yarn slots </span>
<a href="#l8.228"></a><span id="l8.228"> // copy content into the yarn buffer, and update mYarn_Fill and mYarn_Form</span>
<a href="#l8.229"></a><span id="l8.229"> {</span>
<a href="#l8.230"></a><span id="l8.230" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.232"></a><span id="l8.232">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.233"></a><span id="l8.233">   if ( ev )</span>
<a href="#l8.234"></a><span id="l8.234">   {</span>
<a href="#l8.235"></a><span id="l8.235">     if ( mRowObject_Store &amp;&amp; mRowObject_Row)</span>
<a href="#l8.236"></a><span id="l8.236">     {</span>
<a href="#l8.237"></a><span id="l8.237">       morkAtom* atom = mRowObject_Row-&gt;GetColumnAtom(ev, inColumn);</span>
<a href="#l8.238"></a><span id="l8.238">       atom-&gt;GetYarn(outYarn);</span>
<a href="#l8.239"></a><span id="l8.239">       // note nil atom works and sets yarn correctly</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineat">@@ -477,17 +477,17 @@ morkRowObject::GetCellYarn(</span>
<a href="#l8.241"></a><span id="l8.241"> }</span>
<a href="#l8.242"></a><span id="l8.242"> </span>
<a href="#l8.243"></a><span id="l8.243"> NS_IMETHODIMP</span>
<a href="#l8.244"></a><span id="l8.244"> morkRowObject::AliasCellYarn(</span>
<a href="#l8.245"></a><span id="l8.245">   nsIMdbEnv* mev, // context</span>
<a href="#l8.246"></a><span id="l8.246">     mdb_column inColumn, // column to alias</span>
<a href="#l8.247"></a><span id="l8.247">     mdbYarn* outYarn) // writes ALL yarn slots</span>
<a href="#l8.248"></a><span id="l8.248"> {</span>
<a href="#l8.249"></a><span id="l8.249" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.251"></a><span id="l8.251">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.252"></a><span id="l8.252">   if ( ev )</span>
<a href="#l8.253"></a><span id="l8.253">   {</span>
<a href="#l8.254"></a><span id="l8.254">     if ( mRowObject_Store &amp;&amp; mRowObject_Row)</span>
<a href="#l8.255"></a><span id="l8.255">     {</span>
<a href="#l8.256"></a><span id="l8.256">       morkAtom* atom = mRowObject_Row-&gt;GetColumnAtom(ev, inColumn);</span>
<a href="#l8.257"></a><span id="l8.257">       atom-&gt;AliasYarn(outYarn);</span>
<a href="#l8.258"></a><span id="l8.258">       // note nil atom works and sets yarn correctly</span>
<a href="#l8.259"></a><span id="l8.259" class="difflineat">@@ -509,17 +509,17 @@ morkRowObject::NextCellYarn(nsIMdbEnv* m</span>
<a href="#l8.260"></a><span id="l8.260"> // value to say 'no previous column', which causes the first column to be</span>
<a href="#l8.261"></a><span id="l8.261"> // read.  Then the value returned in ioColumn is perfect for the next call</span>
<a href="#l8.262"></a><span id="l8.262"> // to NextCellYarn(), since it will then be the previous column accessed.</span>
<a href="#l8.263"></a><span id="l8.263"> // Callers need only examine the column token returned to see which cell</span>
<a href="#l8.264"></a><span id="l8.264"> // in the row is being read into the yarn.  When no more columns remain,</span>
<a href="#l8.265"></a><span id="l8.265"> // and the iteration has ended, ioColumn will return a zero token again.</span>
<a href="#l8.266"></a><span id="l8.266"> // So iterating over cells starts and ends with a zero column token.</span>
<a href="#l8.267"></a><span id="l8.267"> {</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.270"></a><span id="l8.270">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.271"></a><span id="l8.271">   if ( ev )</span>
<a href="#l8.272"></a><span id="l8.272">   {</span>
<a href="#l8.273"></a><span id="l8.273">     if ( mRowObject_Store &amp;&amp; mRowObject_Row)</span>
<a href="#l8.274"></a><span id="l8.274">       mRowObject_Row-&gt;NextColumn(ev, ioColumn, outYarn);</span>
<a href="#l8.275"></a><span id="l8.275">       </span>
<a href="#l8.276"></a><span id="l8.276">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.277"></a><span id="l8.277">   }</span>
<a href="#l8.278"></a><span id="l8.278" class="difflineat">@@ -533,17 +533,17 @@ morkRowObject::SeekCellYarn( // resemble</span>
<a href="#l8.279"></a><span id="l8.279">   mdb_column* outColumn, // column for this particular cell</span>
<a href="#l8.280"></a><span id="l8.280">   mdbYarn* outYarn) // writes some yarn slots</span>
<a href="#l8.281"></a><span id="l8.281"> // copy content into the yarn buffer, and update mYarn_Fill and mYarn_Form</span>
<a href="#l8.282"></a><span id="l8.282"> // Callers can pass nil for outYarn to indicate no interest in content, so</span>
<a href="#l8.283"></a><span id="l8.283"> // only the outColumn value is returned.  NOTE to subclasses: you must be</span>
<a href="#l8.284"></a><span id="l8.284"> // able to ignore outYarn when the pointer is nil; please do not crash.</span>
<a href="#l8.285"></a><span id="l8.285"> </span>
<a href="#l8.286"></a><span id="l8.286"> {</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l8.288"></a><span id="l8.288" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l8.289"></a><span id="l8.289">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l8.290"></a><span id="l8.290">   if ( ev )</span>
<a href="#l8.291"></a><span id="l8.291">   {</span>
<a href="#l8.292"></a><span id="l8.292">     if ( mRowObject_Store &amp;&amp; mRowObject_Row)</span>
<a href="#l8.293"></a><span id="l8.293">       mRowObject_Row-&gt;SeekColumn(ev, inPos, outColumn, outYarn);</span>
<a href="#l8.294"></a><span id="l8.294">       </span>
<a href="#l8.295"></a><span id="l8.295">     outErr = ev-&gt;AsErr();</span>
<a href="#l8.296"></a><span id="l8.296">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/db/mork/src/morkStore.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/db/mork/src/morkStore.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1350,17 +1350,17 @@ morkStore::IsOpenMdbObject(nsIMdbEnv* me</span>
<a href="#l9.4"></a><span id="l9.4"> // } ===== end nsIMdbObject methods =====</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6"> // { ===== begin nsIMdbPort methods =====</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8"> // { ----- begin attribute methods -----</span>
<a href="#l9.9"></a><span id="l9.9"> NS_IMETHODIMP</span>
<a href="#l9.10"></a><span id="l9.10"> morkStore::GetIsPortReadonly(nsIMdbEnv* mev, mdb_bool* outBool)</span>
<a href="#l9.11"></a><span id="l9.11"> {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.14"></a><span id="l9.14">   mdb_bool isReadOnly = morkBool_kFalse;</span>
<a href="#l9.15"></a><span id="l9.15">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.16"></a><span id="l9.16">   if ( ev )</span>
<a href="#l9.17"></a><span id="l9.17">   {</span>
<a href="#l9.18"></a><span id="l9.18">     ev-&gt;StubMethodOnlyError();</span>
<a href="#l9.19"></a><span id="l9.19">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.20"></a><span id="l9.20">   }</span>
<a href="#l9.21"></a><span id="l9.21">   if ( outBool )</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -1387,23 +1387,23 @@ morkStore::CanUseStore(nsIMdbEnv* mev,</span>
<a href="#l9.23"></a><span id="l9.23"> }</span>
<a href="#l9.24"></a><span id="l9.24"> </span>
<a href="#l9.25"></a><span id="l9.25"> NS_IMETHODIMP</span>
<a href="#l9.26"></a><span id="l9.26"> morkStore::GetIsStore(nsIMdbEnv* mev, mdb_bool* outBool)</span>
<a href="#l9.27"></a><span id="l9.27"> {</span>
<a href="#l9.28"></a><span id="l9.28">   MORK_USED_1(mev);</span>
<a href="#l9.29"></a><span id="l9.29">  if ( outBool )</span>
<a href="#l9.30"></a><span id="l9.30">     *outBool = morkBool_kTrue;</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  return 0;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+  return NS_OK;</span>
<a href="#l9.33"></a><span id="l9.33"> }</span>
<a href="#l9.34"></a><span id="l9.34"> </span>
<a href="#l9.35"></a><span id="l9.35"> NS_IMETHODIMP</span>
<a href="#l9.36"></a><span id="l9.36"> morkStore::GetIsStoreAndDirty(nsIMdbEnv* mev, mdb_bool* outBool)</span>
<a href="#l9.37"></a><span id="l9.37"> {</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.40"></a><span id="l9.40">   mdb_bool isStoreAndDirty = morkBool_kFalse;</span>
<a href="#l9.41"></a><span id="l9.41">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.42"></a><span id="l9.42">   if ( ev )</span>
<a href="#l9.43"></a><span id="l9.43">   {</span>
<a href="#l9.44"></a><span id="l9.44">     ev-&gt;StubMethodOnlyError();</span>
<a href="#l9.45"></a><span id="l9.45">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.46"></a><span id="l9.46">   }</span>
<a href="#l9.47"></a><span id="l9.47">   if ( outBool )</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineat">@@ -1411,49 +1411,49 @@ morkStore::GetIsStoreAndDirty(nsIMdbEnv*</span>
<a href="#l9.49"></a><span id="l9.49">   return outErr;</span>
<a href="#l9.50"></a><span id="l9.50"> }</span>
<a href="#l9.51"></a><span id="l9.51"> </span>
<a href="#l9.52"></a><span id="l9.52"> NS_IMETHODIMP</span>
<a href="#l9.53"></a><span id="l9.53"> morkStore::GetUsagePolicy(nsIMdbEnv* mev, </span>
<a href="#l9.54"></a><span id="l9.54">   mdbUsagePolicy* ioUsagePolicy)</span>
<a href="#l9.55"></a><span id="l9.55"> {</span>
<a href="#l9.56"></a><span id="l9.56">   MORK_USED_1(ioUsagePolicy);</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.59"></a><span id="l9.59">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.60"></a><span id="l9.60">   if ( ev )</span>
<a href="#l9.61"></a><span id="l9.61">   {</span>
<a href="#l9.62"></a><span id="l9.62">     ev-&gt;StubMethodOnlyError();</span>
<a href="#l9.63"></a><span id="l9.63">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.64"></a><span id="l9.64">   }</span>
<a href="#l9.65"></a><span id="l9.65">   return outErr;</span>
<a href="#l9.66"></a><span id="l9.66"> }</span>
<a href="#l9.67"></a><span id="l9.67"> </span>
<a href="#l9.68"></a><span id="l9.68"> NS_IMETHODIMP</span>
<a href="#l9.69"></a><span id="l9.69"> morkStore::SetUsagePolicy(nsIMdbEnv* mev, </span>
<a href="#l9.70"></a><span id="l9.70">   const mdbUsagePolicy* inUsagePolicy)</span>
<a href="#l9.71"></a><span id="l9.71"> {</span>
<a href="#l9.72"></a><span id="l9.72">   MORK_USED_1(inUsagePolicy);</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.75"></a><span id="l9.75">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.76"></a><span id="l9.76">   if ( ev )</span>
<a href="#l9.77"></a><span id="l9.77">   {</span>
<a href="#l9.78"></a><span id="l9.78">     // ev-&gt;StubMethodOnlyError(); // okay to do nothing?</span>
<a href="#l9.79"></a><span id="l9.79">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.80"></a><span id="l9.80">   }</span>
<a href="#l9.81"></a><span id="l9.81">   return outErr;</span>
<a href="#l9.82"></a><span id="l9.82"> }</span>
<a href="#l9.83"></a><span id="l9.83"> // } ----- end attribute methods -----</span>
<a href="#l9.84"></a><span id="l9.84"> </span>
<a href="#l9.85"></a><span id="l9.85"> // { ----- begin memory policy methods -----  </span>
<a href="#l9.86"></a><span id="l9.86"> NS_IMETHODIMP</span>
<a href="#l9.87"></a><span id="l9.87"> morkStore::IdleMemoryPurge( // do memory management already scheduled</span>
<a href="#l9.88"></a><span id="l9.88">   nsIMdbEnv* mev, // context</span>
<a href="#l9.89"></a><span id="l9.89">   mdb_size* outEstimatedBytesFreed) // approximate bytes actually freed</span>
<a href="#l9.90"></a><span id="l9.90"> {</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.93"></a><span id="l9.93">   mdb_size estimatedBytesFreed = 0;</span>
<a href="#l9.94"></a><span id="l9.94">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.95"></a><span id="l9.95">   if ( ev )</span>
<a href="#l9.96"></a><span id="l9.96">   {</span>
<a href="#l9.97"></a><span id="l9.97">     // ev-&gt;StubMethodOnlyError(); // okay to do nothing?</span>
<a href="#l9.98"></a><span id="l9.98">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.99"></a><span id="l9.99">   }</span>
<a href="#l9.100"></a><span id="l9.100">   if ( outEstimatedBytesFreed )</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineat">@@ -1463,17 +1463,17 @@ morkStore::IdleMemoryPurge( // do memory</span>
<a href="#l9.102"></a><span id="l9.102"> </span>
<a href="#l9.103"></a><span id="l9.103"> NS_IMETHODIMP</span>
<a href="#l9.104"></a><span id="l9.104"> morkStore::SessionMemoryPurge( // request specific footprint decrease</span>
<a href="#l9.105"></a><span id="l9.105">   nsIMdbEnv* mev, // context</span>
<a href="#l9.106"></a><span id="l9.106">   mdb_size inDesiredBytesFreed, // approximate number of bytes wanted</span>
<a href="#l9.107"></a><span id="l9.107">   mdb_size* outEstimatedBytesFreed) // approximate bytes actually freed</span>
<a href="#l9.108"></a><span id="l9.108"> {</span>
<a href="#l9.109"></a><span id="l9.109">   MORK_USED_1(inDesiredBytesFreed);</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.112"></a><span id="l9.112">   mdb_size estimate = 0;</span>
<a href="#l9.113"></a><span id="l9.113">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.114"></a><span id="l9.114">   if ( ev )</span>
<a href="#l9.115"></a><span id="l9.115">   {</span>
<a href="#l9.116"></a><span id="l9.116">     // ev-&gt;StubMethodOnlyError(); // okay to do nothing?</span>
<a href="#l9.117"></a><span id="l9.117">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.118"></a><span id="l9.118">   }</span>
<a href="#l9.119"></a><span id="l9.119">   if ( outEstimatedBytesFreed )</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineat">@@ -1481,17 +1481,17 @@ morkStore::SessionMemoryPurge( // reques</span>
<a href="#l9.121"></a><span id="l9.121">   return outErr;</span>
<a href="#l9.122"></a><span id="l9.122"> }</span>
<a href="#l9.123"></a><span id="l9.123"> </span>
<a href="#l9.124"></a><span id="l9.124"> NS_IMETHODIMP</span>
<a href="#l9.125"></a><span id="l9.125"> morkStore::PanicMemoryPurge( // desperately free all possible memory</span>
<a href="#l9.126"></a><span id="l9.126">   nsIMdbEnv* mev, // context</span>
<a href="#l9.127"></a><span id="l9.127">   mdb_size* outEstimatedBytesFreed) // approximate bytes actually freed</span>
<a href="#l9.128"></a><span id="l9.128"> {</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.131"></a><span id="l9.131">   mdb_size estimate = 0;</span>
<a href="#l9.132"></a><span id="l9.132">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.133"></a><span id="l9.133">   if ( ev )</span>
<a href="#l9.134"></a><span id="l9.134">   {</span>
<a href="#l9.135"></a><span id="l9.135">     // ev-&gt;StubMethodOnlyError(); // okay to do nothing?</span>
<a href="#l9.136"></a><span id="l9.136">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.137"></a><span id="l9.137">   }</span>
<a href="#l9.138"></a><span id="l9.138">   if ( outEstimatedBytesFreed )</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineat">@@ -1502,17 +1502,17 @@ morkStore::PanicMemoryPurge( // desperat</span>
<a href="#l9.140"></a><span id="l9.140"> </span>
<a href="#l9.141"></a><span id="l9.141"> // { ----- begin filepath methods -----</span>
<a href="#l9.142"></a><span id="l9.142"> NS_IMETHODIMP</span>
<a href="#l9.143"></a><span id="l9.143"> morkStore::GetPortFilePath(</span>
<a href="#l9.144"></a><span id="l9.144">   nsIMdbEnv* mev, // context</span>
<a href="#l9.145"></a><span id="l9.145">   mdbYarn* outFilePath, // name of file holding port content</span>
<a href="#l9.146"></a><span id="l9.146">   mdbYarn* outFormatVersion) // file format description</span>
<a href="#l9.147"></a><span id="l9.147"> {</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.150"></a><span id="l9.150">   if ( outFormatVersion )</span>
<a href="#l9.151"></a><span id="l9.151">     outFormatVersion-&gt;mYarn_Fill = 0;</span>
<a href="#l9.152"></a><span id="l9.152">   if ( outFilePath )</span>
<a href="#l9.153"></a><span id="l9.153">     outFilePath-&gt;mYarn_Fill = 0;</span>
<a href="#l9.154"></a><span id="l9.154">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.155"></a><span id="l9.155">   if ( ev )</span>
<a href="#l9.156"></a><span id="l9.156">   {</span>
<a href="#l9.157"></a><span id="l9.157">     if ( mStore_File )</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineat">@@ -1525,17 +1525,17 @@ morkStore::GetPortFilePath(</span>
<a href="#l9.159"></a><span id="l9.159">   return outErr;</span>
<a href="#l9.160"></a><span id="l9.160"> }</span>
<a href="#l9.161"></a><span id="l9.161"> </span>
<a href="#l9.162"></a><span id="l9.162"> NS_IMETHODIMP</span>
<a href="#l9.163"></a><span id="l9.163"> morkStore::GetPortFile(</span>
<a href="#l9.164"></a><span id="l9.164">   nsIMdbEnv* mev, // context</span>
<a href="#l9.165"></a><span id="l9.165">   nsIMdbFile** acqFile) // acquire file used by port or store</span>
<a href="#l9.166"></a><span id="l9.166"> {</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.169"></a><span id="l9.169">   if ( acqFile )</span>
<a href="#l9.170"></a><span id="l9.170">     *acqFile = 0;</span>
<a href="#l9.171"></a><span id="l9.171"> </span>
<a href="#l9.172"></a><span id="l9.172">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.173"></a><span id="l9.173">   if ( ev )</span>
<a href="#l9.174"></a><span id="l9.174">   {</span>
<a href="#l9.175"></a><span id="l9.175">     </span>
<a href="#l9.176"></a><span id="l9.176">     if ( mStore_File )</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineat">@@ -1557,17 +1557,17 @@ morkStore::GetPortFile(</span>
<a href="#l9.178"></a><span id="l9.178"> // } ----- end filepath methods -----</span>
<a href="#l9.179"></a><span id="l9.179"> </span>
<a href="#l9.180"></a><span id="l9.180"> // { ----- begin export methods -----</span>
<a href="#l9.181"></a><span id="l9.181"> NS_IMETHODIMP</span>
<a href="#l9.182"></a><span id="l9.182"> morkStore::BestExportFormat( // determine preferred export format</span>
<a href="#l9.183"></a><span id="l9.183">   nsIMdbEnv* mev, // context</span>
<a href="#l9.184"></a><span id="l9.184">   mdbYarn* outFormatVersion) // file format description</span>
<a href="#l9.185"></a><span id="l9.185"> {</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.188"></a><span id="l9.188">   if ( outFormatVersion )</span>
<a href="#l9.189"></a><span id="l9.189">     outFormatVersion-&gt;mYarn_Fill = 0;</span>
<a href="#l9.190"></a><span id="l9.190">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.191"></a><span id="l9.191">   if ( ev )</span>
<a href="#l9.192"></a><span id="l9.192">   {</span>
<a href="#l9.193"></a><span id="l9.193">     ev-&gt;StubMethodOnlyError();</span>
<a href="#l9.194"></a><span id="l9.194">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.195"></a><span id="l9.195">   }</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineat">@@ -1577,17 +1577,17 @@ morkStore::BestExportFormat( // determin</span>
<a href="#l9.197"></a><span id="l9.197"> NS_IMETHODIMP</span>
<a href="#l9.198"></a><span id="l9.198"> morkStore::CanExportToFormat( // can export content in given specific format?</span>
<a href="#l9.199"></a><span id="l9.199">   nsIMdbEnv* mev, // context</span>
<a href="#l9.200"></a><span id="l9.200">   const char* inFormatVersion, // file format description</span>
<a href="#l9.201"></a><span id="l9.201">   mdb_bool* outCanExport) // whether ExportSource() might succeed</span>
<a href="#l9.202"></a><span id="l9.202"> {</span>
<a href="#l9.203"></a><span id="l9.203">   MORK_USED_1(inFormatVersion);</span>
<a href="#l9.204"></a><span id="l9.204">   mdb_bool canExport = morkBool_kFalse;</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.207"></a><span id="l9.207">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.208"></a><span id="l9.208">   if ( ev )</span>
<a href="#l9.209"></a><span id="l9.209">   {</span>
<a href="#l9.210"></a><span id="l9.210">     ev-&gt;StubMethodOnlyError();</span>
<a href="#l9.211"></a><span id="l9.211">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.212"></a><span id="l9.212">   }</span>
<a href="#l9.213"></a><span id="l9.213">   if ( outCanExport )</span>
<a href="#l9.214"></a><span id="l9.214">     *outCanExport = canExport;</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineat">@@ -1599,17 +1599,17 @@ morkStore::ExportToFormat( // export con</span>
<a href="#l9.216"></a><span id="l9.216">   nsIMdbEnv* mev, // context</span>
<a href="#l9.217"></a><span id="l9.217">   // const char* inFilePath, // the file to receive exported content</span>
<a href="#l9.218"></a><span id="l9.218">   nsIMdbFile* ioFile, // destination abstract file interface</span>
<a href="#l9.219"></a><span id="l9.219">   const char* inFormatVersion, // file format description</span>
<a href="#l9.220"></a><span id="l9.220">   nsIMdbThumb** acqThumb) // acquire thumb for incremental export</span>
<a href="#l9.221"></a><span id="l9.221"> // Call nsIMdbThumb::DoMore() until done, or until the thumb is broken, and</span>
<a href="#l9.222"></a><span id="l9.222"> // then the export will be finished.</span>
<a href="#l9.223"></a><span id="l9.223"> {</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.226"></a><span id="l9.226">   nsIMdbThumb* outThumb = 0;</span>
<a href="#l9.227"></a><span id="l9.227">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.228"></a><span id="l9.228">   if ( ev )</span>
<a href="#l9.229"></a><span id="l9.229">   {</span>
<a href="#l9.230"></a><span id="l9.230">     if ( ioFile &amp;&amp; inFormatVersion &amp;&amp; acqThumb )</span>
<a href="#l9.231"></a><span id="l9.231">     {</span>
<a href="#l9.232"></a><span id="l9.232">       ev-&gt;StubMethodOnlyError();</span>
<a href="#l9.233"></a><span id="l9.233">     }</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineat">@@ -1627,17 +1627,17 @@ morkStore::ExportToFormat( // export con</span>
<a href="#l9.235"></a><span id="l9.235"> </span>
<a href="#l9.236"></a><span id="l9.236"> // { ----- begin token methods -----</span>
<a href="#l9.237"></a><span id="l9.237"> NS_IMETHODIMP</span>
<a href="#l9.238"></a><span id="l9.238"> morkStore::TokenToString( // return a string name for an integer token</span>
<a href="#l9.239"></a><span id="l9.239">   nsIMdbEnv* mev, // context</span>
<a href="#l9.240"></a><span id="l9.240">   mdb_token inToken, // token for inTokenName inside this port</span>
<a href="#l9.241"></a><span id="l9.241">   mdbYarn* outTokenName) // the type of table to access</span>
<a href="#l9.242"></a><span id="l9.242"> {</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.245"></a><span id="l9.245">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.246"></a><span id="l9.246">   if ( ev )</span>
<a href="#l9.247"></a><span id="l9.247">   {</span>
<a href="#l9.248"></a><span id="l9.248">     TokenToString(ev, inToken, outTokenName);</span>
<a href="#l9.249"></a><span id="l9.249">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.250"></a><span id="l9.250">   }</span>
<a href="#l9.251"></a><span id="l9.251">   return outErr;</span>
<a href="#l9.252"></a><span id="l9.252"> }</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineat">@@ -1647,17 +1647,17 @@ morkStore::StringToToken( // return an i</span>
<a href="#l9.254"></a><span id="l9.254">   nsIMdbEnv* mev, // context</span>
<a href="#l9.255"></a><span id="l9.255">   const char* inTokenName, // Latin1 string to tokenize if possible</span>
<a href="#l9.256"></a><span id="l9.256">   mdb_token* outToken) // token for inTokenName inside this port</span>
<a href="#l9.257"></a><span id="l9.257">   // String token zero is never used and never supported. If the port</span>
<a href="#l9.258"></a><span id="l9.258">   // is a mutable store, then StringToToken() to create a new</span>
<a href="#l9.259"></a><span id="l9.259">   // association of inTokenName with a new integer token if possible.</span>
<a href="#l9.260"></a><span id="l9.260">   // But a readonly port will return zero for an unknown scope name.</span>
<a href="#l9.261"></a><span id="l9.261"> {</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.264"></a><span id="l9.264">   mdb_token token = 0;</span>
<a href="#l9.265"></a><span id="l9.265">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.266"></a><span id="l9.266">   if ( ev )</span>
<a href="#l9.267"></a><span id="l9.267">   {</span>
<a href="#l9.268"></a><span id="l9.268">     token = StringToToken(ev, inTokenName);</span>
<a href="#l9.269"></a><span id="l9.269">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.270"></a><span id="l9.270">   }</span>
<a href="#l9.271"></a><span id="l9.271">   if ( outToken )</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineat">@@ -1670,17 +1670,17 @@ NS_IMETHODIMP</span>
<a href="#l9.273"></a><span id="l9.273"> morkStore::QueryToken( // like StringToToken(), but without adding</span>
<a href="#l9.274"></a><span id="l9.274">   nsIMdbEnv* mev, // context</span>
<a href="#l9.275"></a><span id="l9.275">   const char* inTokenName, // Latin1 string to tokenize if possible</span>
<a href="#l9.276"></a><span id="l9.276">   mdb_token* outToken) // token for inTokenName inside this port</span>
<a href="#l9.277"></a><span id="l9.277">   // QueryToken() will return a string token if one already exists,</span>
<a href="#l9.278"></a><span id="l9.278">   // but unlike StringToToken(), will not assign a new token if not</span>
<a href="#l9.279"></a><span id="l9.279">   // already in use.</span>
<a href="#l9.280"></a><span id="l9.280"> {</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.283"></a><span id="l9.283">   mdb_token token = 0;</span>
<a href="#l9.284"></a><span id="l9.284">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.285"></a><span id="l9.285">   if ( ev )</span>
<a href="#l9.286"></a><span id="l9.286">   {</span>
<a href="#l9.287"></a><span id="l9.287">     token = QueryToken(ev, inTokenName);</span>
<a href="#l9.288"></a><span id="l9.288">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.289"></a><span id="l9.289">   }</span>
<a href="#l9.290"></a><span id="l9.290">   if ( outToken )</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineat">@@ -1693,17 +1693,17 @@ morkStore::QueryToken( // like StringToT</span>
<a href="#l9.292"></a><span id="l9.292"> </span>
<a href="#l9.293"></a><span id="l9.293"> // { ----- begin row methods -----  </span>
<a href="#l9.294"></a><span id="l9.294"> NS_IMETHODIMP</span>
<a href="#l9.295"></a><span id="l9.295"> morkStore::HasRow( // contains a row with the specified oid?</span>
<a href="#l9.296"></a><span id="l9.296">   nsIMdbEnv* mev, // context</span>
<a href="#l9.297"></a><span id="l9.297">   const mdbOid* inOid,  // hypothetical row oid</span>
<a href="#l9.298"></a><span id="l9.298">   mdb_bool* outHasRow) // whether GetRow() might succeed</span>
<a href="#l9.299"></a><span id="l9.299"> {</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.301"></a><span id="l9.301" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.302"></a><span id="l9.302">   mdb_bool hasRow = morkBool_kFalse;</span>
<a href="#l9.303"></a><span id="l9.303">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.304"></a><span id="l9.304">   if ( ev )</span>
<a href="#l9.305"></a><span id="l9.305">   {</span>
<a href="#l9.306"></a><span id="l9.306">     morkRow* row = GetRow(ev, inOid);</span>
<a href="#l9.307"></a><span id="l9.307">     if ( row )</span>
<a href="#l9.308"></a><span id="l9.308">       hasRow = morkBool_kTrue;</span>
<a href="#l9.309"></a><span id="l9.309">       </span>
<a href="#l9.310"></a><span id="l9.310" class="difflineat">@@ -1715,17 +1715,17 @@ morkStore::HasRow( // contains a row wit</span>
<a href="#l9.311"></a><span id="l9.311"> }</span>
<a href="#l9.312"></a><span id="l9.312">   </span>
<a href="#l9.313"></a><span id="l9.313"> NS_IMETHODIMP</span>
<a href="#l9.314"></a><span id="l9.314"> morkStore::GetRow( // access one row with specific oid</span>
<a href="#l9.315"></a><span id="l9.315">   nsIMdbEnv* mev, // context</span>
<a href="#l9.316"></a><span id="l9.316">   const mdbOid* inOid,  // hypothetical row oid</span>
<a href="#l9.317"></a><span id="l9.317">   nsIMdbRow** acqRow) // acquire specific row (or null)</span>
<a href="#l9.318"></a><span id="l9.318"> {</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.320"></a><span id="l9.320" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.321"></a><span id="l9.321">   nsIMdbRow* outRow = 0;</span>
<a href="#l9.322"></a><span id="l9.322">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.323"></a><span id="l9.323">   if ( ev )</span>
<a href="#l9.324"></a><span id="l9.324">   {</span>
<a href="#l9.325"></a><span id="l9.325">     morkRow* row = GetRow(ev, inOid);</span>
<a href="#l9.326"></a><span id="l9.326">     if ( row &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.327"></a><span id="l9.327">       outRow = row-&gt;AcquireRowHandle(ev, this);</span>
<a href="#l9.328"></a><span id="l9.328">       </span>
<a href="#l9.329"></a><span id="l9.329" class="difflineat">@@ -1737,17 +1737,17 @@ morkStore::GetRow( // access one row wit</span>
<a href="#l9.330"></a><span id="l9.330"> }</span>
<a href="#l9.331"></a><span id="l9.331"> </span>
<a href="#l9.332"></a><span id="l9.332"> NS_IMETHODIMP</span>
<a href="#l9.333"></a><span id="l9.333"> morkStore::GetRowRefCount( // get number of tables that contain a row </span>
<a href="#l9.334"></a><span id="l9.334">   nsIMdbEnv* mev, // context</span>
<a href="#l9.335"></a><span id="l9.335">   const mdbOid* inOid,  // hypothetical row oid</span>
<a href="#l9.336"></a><span id="l9.336">   mdb_count* outRefCount) // number of tables containing inRowKey </span>
<a href="#l9.337"></a><span id="l9.337"> {</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.339"></a><span id="l9.339" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.340"></a><span id="l9.340">   mdb_count count = 0;</span>
<a href="#l9.341"></a><span id="l9.341">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.342"></a><span id="l9.342">   if ( ev )</span>
<a href="#l9.343"></a><span id="l9.343">   {</span>
<a href="#l9.344"></a><span id="l9.344">     morkRow* row = GetRow(ev, inOid);</span>
<a href="#l9.345"></a><span id="l9.345">     if ( row &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.346"></a><span id="l9.346">       count = row-&gt;mRow_GcUses;</span>
<a href="#l9.347"></a><span id="l9.347">       </span>
<a href="#l9.348"></a><span id="l9.348" class="difflineat">@@ -1792,17 +1792,17 @@ morkStore::FindRow(nsIMdbEnv* mev, // se</span>
<a href="#l9.349"></a><span id="l9.349">   // even though some duplicate row might still live within the rowspace.)</span>
<a href="#l9.350"></a><span id="l9.350">   //</span>
<a href="#l9.351"></a><span id="l9.351">   // In other words, the FindRow() implementation is allowed to assume simple</span>
<a href="#l9.352"></a><span id="l9.352">   // hash tables mapping unqiue column keys to associated row values will be</span>
<a href="#l9.353"></a><span id="l9.353">   // sufficient, where any duplication is not recorded because only one copy</span>
<a href="#l9.354"></a><span id="l9.354">   // of a given key need be remembered.  Implementors are not required to sort</span>
<a href="#l9.355"></a><span id="l9.355">   // all rows by the specified column.</span>
<a href="#l9.356"></a><span id="l9.356"> {</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.359"></a><span id="l9.359">   nsIMdbRow* outRow = 0;</span>
<a href="#l9.360"></a><span id="l9.360">   mdbOid rowOid;</span>
<a href="#l9.361"></a><span id="l9.361">   rowOid.mOid_Scope = 0;</span>
<a href="#l9.362"></a><span id="l9.362">   rowOid.mOid_Id = (mdb_id) -1;</span>
<a href="#l9.363"></a><span id="l9.363">   </span>
<a href="#l9.364"></a><span id="l9.364">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.365"></a><span id="l9.365">   if ( ev )</span>
<a href="#l9.366"></a><span id="l9.366">   {</span>
<a href="#l9.367"></a><span id="l9.367" class="difflineat">@@ -1827,17 +1827,17 @@ morkStore::FindRow(nsIMdbEnv* mev, // se</span>
<a href="#l9.368"></a><span id="l9.368"> </span>
<a href="#l9.369"></a><span id="l9.369"> // { ----- begin table methods -----  </span>
<a href="#l9.370"></a><span id="l9.370"> NS_IMETHODIMP</span>
<a href="#l9.371"></a><span id="l9.371"> morkStore::HasTable( // supports a table with the specified oid?</span>
<a href="#l9.372"></a><span id="l9.372">   nsIMdbEnv* mev, // context</span>
<a href="#l9.373"></a><span id="l9.373">   const mdbOid* inOid,  // hypothetical table oid</span>
<a href="#l9.374"></a><span id="l9.374">   mdb_bool* outHasTable) // whether GetTable() might succeed</span>
<a href="#l9.375"></a><span id="l9.375"> {</span>
<a href="#l9.376"></a><span id="l9.376" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.377"></a><span id="l9.377" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.378"></a><span id="l9.378">   mork_bool hasTable = morkBool_kFalse;</span>
<a href="#l9.379"></a><span id="l9.379">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.380"></a><span id="l9.380">   if ( ev )</span>
<a href="#l9.381"></a><span id="l9.381">   {</span>
<a href="#l9.382"></a><span id="l9.382">     morkTable* table = GetTable(ev, inOid);</span>
<a href="#l9.383"></a><span id="l9.383">     if ( table )</span>
<a href="#l9.384"></a><span id="l9.384">       hasTable = morkBool_kTrue;</span>
<a href="#l9.385"></a><span id="l9.385">     </span>
<a href="#l9.386"></a><span id="l9.386" class="difflineat">@@ -1849,17 +1849,17 @@ morkStore::HasTable( // supports a table</span>
<a href="#l9.387"></a><span id="l9.387"> }</span>
<a href="#l9.388"></a><span id="l9.388">   </span>
<a href="#l9.389"></a><span id="l9.389"> NS_IMETHODIMP</span>
<a href="#l9.390"></a><span id="l9.390"> morkStore::GetTable( // access one table with specific oid</span>
<a href="#l9.391"></a><span id="l9.391">   nsIMdbEnv* mev, // context</span>
<a href="#l9.392"></a><span id="l9.392">   const mdbOid* inOid,  // hypothetical table oid</span>
<a href="#l9.393"></a><span id="l9.393">   nsIMdbTable** acqTable) // acquire specific table (or null)</span>
<a href="#l9.394"></a><span id="l9.394"> {</span>
<a href="#l9.395"></a><span id="l9.395" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.396"></a><span id="l9.396" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.397"></a><span id="l9.397">   nsIMdbTable* outTable = 0;</span>
<a href="#l9.398"></a><span id="l9.398">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.399"></a><span id="l9.399">   if ( ev )</span>
<a href="#l9.400"></a><span id="l9.400">   {</span>
<a href="#l9.401"></a><span id="l9.401">     morkTable* table = GetTable(ev, inOid);</span>
<a href="#l9.402"></a><span id="l9.402">     if ( table &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.403"></a><span id="l9.403">       outTable = table-&gt;AcquireTableHandle(ev);</span>
<a href="#l9.404"></a><span id="l9.404">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.405"></a><span id="l9.405" class="difflineat">@@ -1872,17 +1872,17 @@ morkStore::GetTable( // access one table</span>
<a href="#l9.406"></a><span id="l9.406"> NS_IMETHODIMP</span>
<a href="#l9.407"></a><span id="l9.407"> morkStore::HasTableKind( // supports a table of the specified type?</span>
<a href="#l9.408"></a><span id="l9.408">   nsIMdbEnv* mev, // context</span>
<a href="#l9.409"></a><span id="l9.409">   mdb_scope inRowScope, // rid scope for row ids</span>
<a href="#l9.410"></a><span id="l9.410">   mdb_kind inTableKind, // the type of table to access</span>
<a href="#l9.411"></a><span id="l9.411">   mdb_count* outTableCount, // current number of such tables</span>
<a href="#l9.412"></a><span id="l9.412">   mdb_bool* outSupportsTable) // whether GetTableKind() might succeed</span>
<a href="#l9.413"></a><span id="l9.413"> {</span>
<a href="#l9.414"></a><span id="l9.414" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.415"></a><span id="l9.415" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.416"></a><span id="l9.416">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.417"></a><span id="l9.417">   if ( ev )</span>
<a href="#l9.418"></a><span id="l9.418">   {</span>
<a href="#l9.419"></a><span id="l9.419">     *outSupportsTable = HasTableKind(ev, inRowScope,</span>
<a href="#l9.420"></a><span id="l9.420">         inTableKind, outTableCount);</span>
<a href="#l9.421"></a><span id="l9.421">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.422"></a><span id="l9.422">   }</span>
<a href="#l9.423"></a><span id="l9.423">   return outErr;</span>
<a href="#l9.424"></a><span id="l9.424" class="difflineat">@@ -1892,17 +1892,17 @@ NS_IMETHODIMP</span>
<a href="#l9.425"></a><span id="l9.425"> morkStore::GetTableKind( // access one (random) table of specific type</span>
<a href="#l9.426"></a><span id="l9.426">   nsIMdbEnv* mev, // context</span>
<a href="#l9.427"></a><span id="l9.427">   mdb_scope inRowScope,      // row scope for row ids</span>
<a href="#l9.428"></a><span id="l9.428">   mdb_kind inTableKind,      // the type of table to access</span>
<a href="#l9.429"></a><span id="l9.429">   mdb_count* outTableCount, // current number of such tables</span>
<a href="#l9.430"></a><span id="l9.430">   mdb_bool* outMustBeUnique, // whether port can hold only one of these</span>
<a href="#l9.431"></a><span id="l9.431">   nsIMdbTable** acqTable)      // acquire scoped collection of rows</span>
<a href="#l9.432"></a><span id="l9.432"> {</span>
<a href="#l9.433"></a><span id="l9.433" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.434"></a><span id="l9.434" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.435"></a><span id="l9.435">   nsIMdbTable* outTable = 0;</span>
<a href="#l9.436"></a><span id="l9.436">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.437"></a><span id="l9.437">   if ( ev )</span>
<a href="#l9.438"></a><span id="l9.438">   {</span>
<a href="#l9.439"></a><span id="l9.439">     morkTable* table = GetTableKind(ev, inRowScope,</span>
<a href="#l9.440"></a><span id="l9.440">         inTableKind, outTableCount, outMustBeUnique);</span>
<a href="#l9.441"></a><span id="l9.441">     if ( table &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.442"></a><span id="l9.442">       outTable = table-&gt;AcquireTableHandle(ev);</span>
<a href="#l9.443"></a><span id="l9.443" class="difflineat">@@ -1915,17 +1915,17 @@ morkStore::GetTableKind( // access one (</span>
<a href="#l9.444"></a><span id="l9.444">   </span>
<a href="#l9.445"></a><span id="l9.445"> NS_IMETHODIMP</span>
<a href="#l9.446"></a><span id="l9.446"> morkStore::GetPortTableCursor( // get cursor for all tables of specific type</span>
<a href="#l9.447"></a><span id="l9.447">   nsIMdbEnv* mev, // context</span>
<a href="#l9.448"></a><span id="l9.448">   mdb_scope inRowScope, // row scope for row ids</span>
<a href="#l9.449"></a><span id="l9.449">   mdb_kind inTableKind, // the type of table to access</span>
<a href="#l9.450"></a><span id="l9.450">   nsIMdbPortTableCursor** acqCursor) // all such tables in the port</span>
<a href="#l9.451"></a><span id="l9.451"> {</span>
<a href="#l9.452"></a><span id="l9.452" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.453"></a><span id="l9.453" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.454"></a><span id="l9.454">   nsIMdbPortTableCursor* outCursor = 0;</span>
<a href="#l9.455"></a><span id="l9.455">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.456"></a><span id="l9.456">   if ( ev )</span>
<a href="#l9.457"></a><span id="l9.457">   {</span>
<a href="#l9.458"></a><span id="l9.458">     morkPortTableCursor* cursor =</span>
<a href="#l9.459"></a><span id="l9.459">       GetPortTableCursor(ev, inRowScope,</span>
<a href="#l9.460"></a><span id="l9.460">         inTableKind);</span>
<a href="#l9.461"></a><span id="l9.461">     if ( cursor &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.462"></a><span id="l9.462" class="difflineat">@@ -1945,17 +1945,17 @@ NS_IMETHODIMP</span>
<a href="#l9.463"></a><span id="l9.463"> morkStore::ShouldCompress( // store wastes at least inPercentWaste?</span>
<a href="#l9.464"></a><span id="l9.464">   nsIMdbEnv* mev, // context</span>
<a href="#l9.465"></a><span id="l9.465">   mdb_percent inPercentWaste, // 0..100 percent file size waste threshold</span>
<a href="#l9.466"></a><span id="l9.466">   mdb_percent* outActualWaste, // 0..100 percent of file actually wasted</span>
<a href="#l9.467"></a><span id="l9.467">   mdb_bool* outShould) // true when about inPercentWaste% is wasted</span>
<a href="#l9.468"></a><span id="l9.468"> {</span>
<a href="#l9.469"></a><span id="l9.469">   mdb_percent actualWaste = 0;</span>
<a href="#l9.470"></a><span id="l9.470">   mdb_bool shouldCompress = morkBool_kFalse;</span>
<a href="#l9.471"></a><span id="l9.471" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.472"></a><span id="l9.472" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.473"></a><span id="l9.473">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.474"></a><span id="l9.474">   if ( ev )</span>
<a href="#l9.475"></a><span id="l9.475">   {</span>
<a href="#l9.476"></a><span id="l9.476">     actualWaste = PercentOfStoreWasted(ev);</span>
<a href="#l9.477"></a><span id="l9.477">     if ( inPercentWaste &gt; 100 )</span>
<a href="#l9.478"></a><span id="l9.478">       inPercentWaste = 100;</span>
<a href="#l9.479"></a><span id="l9.479">     shouldCompress = ( actualWaste &gt;= inPercentWaste );</span>
<a href="#l9.480"></a><span id="l9.480">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.481"></a><span id="l9.481" class="difflineat">@@ -1974,17 +1974,17 @@ NS_IMETHODIMP</span>
<a href="#l9.482"></a><span id="l9.482"> morkStore::NewTable( // make one new table of specific type</span>
<a href="#l9.483"></a><span id="l9.483">   nsIMdbEnv* mev, // context</span>
<a href="#l9.484"></a><span id="l9.484">   mdb_scope inRowScope,    // row scope for row ids</span>
<a href="#l9.485"></a><span id="l9.485">   mdb_kind inTableKind,    // the type of table to access</span>
<a href="#l9.486"></a><span id="l9.486">   mdb_bool inMustBeUnique, // whether store can hold only one of these</span>
<a href="#l9.487"></a><span id="l9.487">   const mdbOid* inOptionalMetaRowOid, // can be nil to avoid specifying </span>
<a href="#l9.488"></a><span id="l9.488">   nsIMdbTable** acqTable)     // acquire scoped collection of rows</span>
<a href="#l9.489"></a><span id="l9.489"> {</span>
<a href="#l9.490"></a><span id="l9.490" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.491"></a><span id="l9.491" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.492"></a><span id="l9.492">   nsIMdbTable* outTable = 0;</span>
<a href="#l9.493"></a><span id="l9.493">   morkEnv* ev = this-&gt;CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.494"></a><span id="l9.494">   if ( ev )</span>
<a href="#l9.495"></a><span id="l9.495">   {</span>
<a href="#l9.496"></a><span id="l9.496">     morkTable* table = NewTable(ev, inRowScope,</span>
<a href="#l9.497"></a><span id="l9.497">         inTableKind, inMustBeUnique, inOptionalMetaRowOid);</span>
<a href="#l9.498"></a><span id="l9.498">     if ( table &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.499"></a><span id="l9.499">       outTable = table-&gt;AcquireTableHandle(ev);</span>
<a href="#l9.500"></a><span id="l9.500" class="difflineat">@@ -1999,17 +1999,17 @@ NS_IMETHODIMP</span>
<a href="#l9.501"></a><span id="l9.501"> morkStore::NewTableWithOid( // make one new table of specific type</span>
<a href="#l9.502"></a><span id="l9.502">   nsIMdbEnv* mev, // context</span>
<a href="#l9.503"></a><span id="l9.503">   const mdbOid* inOid,   // caller assigned oid</span>
<a href="#l9.504"></a><span id="l9.504">   mdb_kind inTableKind,    // the type of table to access</span>
<a href="#l9.505"></a><span id="l9.505">   mdb_bool inMustBeUnique, // whether store can hold only one of these</span>
<a href="#l9.506"></a><span id="l9.506">   const mdbOid* inOptionalMetaRowOid, // can be nil to avoid specifying </span>
<a href="#l9.507"></a><span id="l9.507">   nsIMdbTable** acqTable)     // acquire scoped collection of rows</span>
<a href="#l9.508"></a><span id="l9.508"> {</span>
<a href="#l9.509"></a><span id="l9.509" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.510"></a><span id="l9.510" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.511"></a><span id="l9.511">   nsIMdbTable* outTable = 0;</span>
<a href="#l9.512"></a><span id="l9.512">   morkEnv* ev = CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.513"></a><span id="l9.513">   if ( ev )</span>
<a href="#l9.514"></a><span id="l9.514">   {</span>
<a href="#l9.515"></a><span id="l9.515">     morkTable* table = OidToTable(ev, inOid,</span>
<a href="#l9.516"></a><span id="l9.516">       inOptionalMetaRowOid);</span>
<a href="#l9.517"></a><span id="l9.517">     if ( table &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.518"></a><span id="l9.518">     {</span>
<a href="#l9.519"></a><span id="l9.519" class="difflineat">@@ -2059,17 +2059,17 @@ morkStore::SetStoreAssignedIds(nsIMdbEnv</span>
<a href="#l9.520"></a><span id="l9.520"> // } ----- end row scope methods -----</span>
<a href="#l9.521"></a><span id="l9.521"> </span>
<a href="#l9.522"></a><span id="l9.522"> // { ----- begin row methods -----</span>
<a href="#l9.523"></a><span id="l9.523"> NS_IMETHODIMP</span>
<a href="#l9.524"></a><span id="l9.524"> morkStore::NewRowWithOid(nsIMdbEnv* mev, // new row w/ caller assigned oid</span>
<a href="#l9.525"></a><span id="l9.525">   const mdbOid* inOid,   // caller assigned oid</span>
<a href="#l9.526"></a><span id="l9.526">   nsIMdbRow** acqRow) // create new row</span>
<a href="#l9.527"></a><span id="l9.527"> {</span>
<a href="#l9.528"></a><span id="l9.528" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.529"></a><span id="l9.529" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.530"></a><span id="l9.530">   nsIMdbRow* outRow = 0;</span>
<a href="#l9.531"></a><span id="l9.531">   morkEnv* ev = CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.532"></a><span id="l9.532">   if ( ev )</span>
<a href="#l9.533"></a><span id="l9.533">   {</span>
<a href="#l9.534"></a><span id="l9.534">     morkRow* row = NewRowWithOid(ev, inOid);</span>
<a href="#l9.535"></a><span id="l9.535">     if ( row &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.536"></a><span id="l9.536">       outRow = row-&gt;AcquireRowHandle(ev, this);</span>
<a href="#l9.537"></a><span id="l9.537">       </span>
<a href="#l9.538"></a><span id="l9.538" class="difflineat">@@ -2082,17 +2082,17 @@ morkStore::NewRowWithOid(nsIMdbEnv* mev,</span>
<a href="#l9.539"></a><span id="l9.539"> </span>
<a href="#l9.540"></a><span id="l9.540"> NS_IMETHODIMP</span>
<a href="#l9.541"></a><span id="l9.541"> morkStore::NewRow(nsIMdbEnv* mev, // new row with db assigned oid</span>
<a href="#l9.542"></a><span id="l9.542">   mdb_scope inRowScope,   // row scope for row ids</span>
<a href="#l9.543"></a><span id="l9.543">   nsIMdbRow** acqRow) // create new row</span>
<a href="#l9.544"></a><span id="l9.544"> // Note this row must be added to some table or cell child before the</span>
<a href="#l9.545"></a><span id="l9.545"> // store is closed in order to make this row persist across sesssions.</span>
<a href="#l9.546"></a><span id="l9.546"> {</span>
<a href="#l9.547"></a><span id="l9.547" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.548"></a><span id="l9.548" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.549"></a><span id="l9.549">   nsIMdbRow* outRow = 0;</span>
<a href="#l9.550"></a><span id="l9.550">   morkEnv* ev = CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.551"></a><span id="l9.551">   if ( ev )</span>
<a href="#l9.552"></a><span id="l9.552">   {</span>
<a href="#l9.553"></a><span id="l9.553">     morkRow* row = NewRow(ev, inRowScope);</span>
<a href="#l9.554"></a><span id="l9.554">     if ( row &amp;&amp; ev-&gt;Good() )</span>
<a href="#l9.555"></a><span id="l9.555">       outRow = row-&gt;AcquireRowHandle(ev, this);</span>
<a href="#l9.556"></a><span id="l9.556">       </span>
<a href="#l9.557"></a><span id="l9.557" class="difflineat">@@ -2134,33 +2134,33 @@ morkStore::ImportFile( // import content</span>
<a href="#l9.558"></a><span id="l9.558"> // { ----- begin hinting methods -----</span>
<a href="#l9.559"></a><span id="l9.559"> NS_IMETHODIMP</span>
<a href="#l9.560"></a><span id="l9.560"> morkStore::ShareAtomColumnsHint( // advise re shared col content atomizing</span>
<a href="#l9.561"></a><span id="l9.561">   nsIMdbEnv* mev, // context</span>
<a href="#l9.562"></a><span id="l9.562">   mdb_scope inScopeHint, // zero, or suggested shared namespace</span>
<a href="#l9.563"></a><span id="l9.563">   const mdbColumnSet* inColumnSet) // cols desired tokenized together</span>
<a href="#l9.564"></a><span id="l9.564"> {</span>
<a href="#l9.565"></a><span id="l9.565">   MORK_USED_2(inColumnSet,inScopeHint);</span>
<a href="#l9.566"></a><span id="l9.566" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.567"></a><span id="l9.567" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.568"></a><span id="l9.568">   morkEnv* ev = CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.569"></a><span id="l9.569">   if ( ev )</span>
<a href="#l9.570"></a><span id="l9.570">   {</span>
<a href="#l9.571"></a><span id="l9.571">     // ev-&gt;StubMethodOnlyError(); // okay to do nothing for a hint method</span>
<a href="#l9.572"></a><span id="l9.572">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.573"></a><span id="l9.573">   }</span>
<a href="#l9.574"></a><span id="l9.574">   return outErr;</span>
<a href="#l9.575"></a><span id="l9.575"> }</span>
<a href="#l9.576"></a><span id="l9.576"> </span>
<a href="#l9.577"></a><span id="l9.577"> NS_IMETHODIMP</span>
<a href="#l9.578"></a><span id="l9.578"> morkStore::AvoidAtomColumnsHint( // advise col w/ poor atomizing prospects</span>
<a href="#l9.579"></a><span id="l9.579">   nsIMdbEnv* mev, // context</span>
<a href="#l9.580"></a><span id="l9.580">   const mdbColumnSet* inColumnSet) // cols with poor atomizing prospects</span>
<a href="#l9.581"></a><span id="l9.581"> {</span>
<a href="#l9.582"></a><span id="l9.582">   MORK_USED_1(inColumnSet);</span>
<a href="#l9.583"></a><span id="l9.583" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l9.584"></a><span id="l9.584" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l9.585"></a><span id="l9.585">   morkEnv* ev = CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.586"></a><span id="l9.586">   if ( ev )</span>
<a href="#l9.587"></a><span id="l9.587">   {</span>
<a href="#l9.588"></a><span id="l9.588">     // ev-&gt;StubMethodOnlyError(); // okay to do nothing for a hint method</span>
<a href="#l9.589"></a><span id="l9.589">     outErr = ev-&gt;AsErr();</span>
<a href="#l9.590"></a><span id="l9.590">   }</span>
<a href="#l9.591"></a><span id="l9.591">   return outErr;</span>
<a href="#l9.592"></a><span id="l9.592"> }</span>
<a href="#l9.593"></a><span id="l9.593" class="difflineat">@@ -2171,17 +2171,17 @@ NS_IMETHODIMP</span>
<a href="#l9.594"></a><span id="l9.594"> morkStore::LargeCommit( // save important changes if at all possible</span>
<a href="#l9.595"></a><span id="l9.595">   nsIMdbEnv* mev, // context</span>
<a href="#l9.596"></a><span id="l9.596">   nsIMdbThumb** acqThumb) // acquire thumb for incremental commit</span>
<a href="#l9.597"></a><span id="l9.597"> // Call nsIMdbThumb::DoMore() until done, or until the thumb is broken, and</span>
<a href="#l9.598"></a><span id="l9.598"> // then the commit will be finished.  Note the store is effectively write</span>
<a href="#l9.599"></a><span id="l9.599"> // locked until commit is finished or canceled through the thumb instance.</span>
<a href="#l9.600"></a><span id="l9.600"> // Until the commit is done, the store will report it has readonly status.</span>
<a href="#l9.601"></a><span id="l9.601"> {</span>
<a href="#l9.602"></a><span id="l9.602" class="difflineminus">-  nsresult outErr = 0;</span>
<a href="#l9.603"></a><span id="l9.603" class="difflineplus">+  nsresult outErr = NS_OK;</span>
<a href="#l9.604"></a><span id="l9.604">   nsIMdbThumb* outThumb = 0;</span>
<a href="#l9.605"></a><span id="l9.605">   morkEnv* ev = CanUseStore(mev, /*inMutable*/ morkBool_kFalse, &amp;outErr);</span>
<a href="#l9.606"></a><span id="l9.606">   if ( ev )</span>
<a href="#l9.607"></a><span id="l9.607">   {</span>
<a href="#l9.608"></a><span id="l9.608">     </span>
<a href="#l9.609"></a><span id="l9.609">     morkThumb* thumb = 0;</span>
<a href="#l9.610"></a><span id="l9.610">     // morkFile* file = store-&gt;mStore_File;</span>
<a href="#l9.611"></a><span id="l9.611">     if ( DoPreferLargeOverCompressCommit(ev) )</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/db/mork/src/morkTable.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/db/mork/src/morkTable.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -171,17 +171,17 @@ morkTable::CloseTable(morkEnv* ev) /*i*/</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5"> // { ===== begin nsIMdbCollection methods =====</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7"> // { ----- begin attribute methods -----</span>
<a href="#l10.8"></a><span id="l10.8"> NS_IMETHODIMP</span>
<a href="#l10.9"></a><span id="l10.9"> morkTable::GetSeed(nsIMdbEnv* mev,</span>
<a href="#l10.10"></a><span id="l10.10">   mdb_seed* outSeed)    // member change count</span>
<a href="#l10.11"></a><span id="l10.11"> {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.14"></a><span id="l10.14">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.15"></a><span id="l10.15">   if ( ev )</span>
<a href="#l10.16"></a><span id="l10.16">   {</span>
<a href="#l10.17"></a><span id="l10.17">     *outSeed = mTable_RowArray.mArray_Seed;</span>
<a href="#l10.18"></a><span id="l10.18">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.19"></a><span id="l10.19">   }</span>
<a href="#l10.20"></a><span id="l10.20">   return outErr;</span>
<a href="#l10.21"></a><span id="l10.21"> }</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -254,33 +254,33 @@ morkTable::DropActivity( // tell collect</span>
<a href="#l10.23"></a><span id="l10.23"> </span>
<a href="#l10.24"></a><span id="l10.24"> // { ===== begin nsIMdbTable methods =====</span>
<a href="#l10.25"></a><span id="l10.25"> </span>
<a href="#l10.26"></a><span id="l10.26"> // { ----- begin attribute methods -----</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28"> NS_IMETHODIMP</span>
<a href="#l10.29"></a><span id="l10.29"> morkTable::SetTablePriority(nsIMdbEnv* mev, mdb_priority inPrio)</span>
<a href="#l10.30"></a><span id="l10.30"> {</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.33"></a><span id="l10.33">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.34"></a><span id="l10.34">   if ( ev )</span>
<a href="#l10.35"></a><span id="l10.35">   {</span>
<a href="#l10.36"></a><span id="l10.36">     if ( inPrio &gt; morkPriority_kMax )</span>
<a href="#l10.37"></a><span id="l10.37">       inPrio = morkPriority_kMax;</span>
<a href="#l10.38"></a><span id="l10.38">       </span>
<a href="#l10.39"></a><span id="l10.39">     mTable_Priority = inPrio;</span>
<a href="#l10.40"></a><span id="l10.40">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.41"></a><span id="l10.41">   }</span>
<a href="#l10.42"></a><span id="l10.42">   return outErr;</span>
<a href="#l10.43"></a><span id="l10.43"> }</span>
<a href="#l10.44"></a><span id="l10.44"> </span>
<a href="#l10.45"></a><span id="l10.45"> NS_IMETHODIMP</span>
<a href="#l10.46"></a><span id="l10.46"> morkTable::GetTablePriority(nsIMdbEnv* mev, mdb_priority* outPrio)</span>
<a href="#l10.47"></a><span id="l10.47"> {</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.50"></a><span id="l10.50">   mork_priority prio = 0;</span>
<a href="#l10.51"></a><span id="l10.51">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.52"></a><span id="l10.52">   if ( ev )</span>
<a href="#l10.53"></a><span id="l10.53">   {</span>
<a href="#l10.54"></a><span id="l10.54">     prio = mTable_Priority;</span>
<a href="#l10.55"></a><span id="l10.55">     if ( prio &gt; morkPriority_kMax )</span>
<a href="#l10.56"></a><span id="l10.56">     {</span>
<a href="#l10.57"></a><span id="l10.57">       prio = morkPriority_kMax;</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineat">@@ -300,17 +300,17 @@ morkTable:: GetTableBeVerbose(nsIMdbEnv*</span>
<a href="#l10.59"></a><span id="l10.59">   NS_ENSURE_ARG_POINTER(outBeVerbose);</span>
<a href="#l10.60"></a><span id="l10.60">   *outBeVerbose = IsTableVerbose();</span>
<a href="#l10.61"></a><span id="l10.61">   return NS_OK;</span>
<a href="#l10.62"></a><span id="l10.62"> }</span>
<a href="#l10.63"></a><span id="l10.63"> </span>
<a href="#l10.64"></a><span id="l10.64"> NS_IMETHODIMP</span>
<a href="#l10.65"></a><span id="l10.65"> morkTable::SetTableBeVerbose(nsIMdbEnv* mev, mdb_bool inBeVerbose)</span>
<a href="#l10.66"></a><span id="l10.66"> {</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.69"></a><span id="l10.69">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.70"></a><span id="l10.70">   if ( ev )</span>
<a href="#l10.71"></a><span id="l10.71">   {</span>
<a href="#l10.72"></a><span id="l10.72">     if ( inBeVerbose )</span>
<a href="#l10.73"></a><span id="l10.73">       SetTableVerbose();</span>
<a href="#l10.74"></a><span id="l10.74">     else</span>
<a href="#l10.75"></a><span id="l10.75">       ClearTableVerbose();</span>
<a href="#l10.76"></a><span id="l10.76">    </span>
<a href="#l10.77"></a><span id="l10.77" class="difflineat">@@ -333,17 +333,17 @@ morkTable::GetTableKind(nsIMdbEnv* mev, </span>
<a href="#l10.78"></a><span id="l10.78">   NS_ENSURE_ARG_POINTER(outTableKind);</span>
<a href="#l10.79"></a><span id="l10.79">   *outTableKind = mTable_Kind;</span>
<a href="#l10.80"></a><span id="l10.80">   return NS_OK;</span>
<a href="#l10.81"></a><span id="l10.81"> }</span>
<a href="#l10.82"></a><span id="l10.82"> </span>
<a href="#l10.83"></a><span id="l10.83"> NS_IMETHODIMP</span>
<a href="#l10.84"></a><span id="l10.84"> morkTable::GetRowScope(nsIMdbEnv* mev, mdb_scope* outRowScope)</span>
<a href="#l10.85"></a><span id="l10.85"> {</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.88"></a><span id="l10.88">   mdb_scope rowScope = 0;</span>
<a href="#l10.89"></a><span id="l10.89">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.90"></a><span id="l10.90">   if ( ev )</span>
<a href="#l10.91"></a><span id="l10.91">   {</span>
<a href="#l10.92"></a><span id="l10.92">     if ( mTable_RowSpace )</span>
<a href="#l10.93"></a><span id="l10.93">       rowScope = mTable_RowSpace-&gt;SpaceScope();</span>
<a href="#l10.94"></a><span id="l10.94">     else</span>
<a href="#l10.95"></a><span id="l10.95">       NilRowSpaceError(ev);</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineat">@@ -378,17 +378,17 @@ morkTable::GetMetaRow( nsIMdbEnv* mev,</span>
<a href="#l10.97"></a><span id="l10.97">   // manually allocate any row IDs from that special meta scope namespace).</span>
<a href="#l10.98"></a><span id="l10.98">   // The meta row oid can be specified either when the table is created, or</span>
<a href="#l10.99"></a><span id="l10.99">   // else the first time that GetMetaRow() is called, by passing a non-nil</span>
<a href="#l10.100"></a><span id="l10.100">   // pointer to an oid for parameter inOptionalMetaRowOid.  The meta row's</span>
<a href="#l10.101"></a><span id="l10.101">   // actual oid is returned in outOid (if this is a non-nil pointer), and</span>
<a href="#l10.102"></a><span id="l10.102">   // it will be different from inOptionalMetaRowOid when the meta row was</span>
<a href="#l10.103"></a><span id="l10.103">   // already given a different oid earlier.</span>
<a href="#l10.104"></a><span id="l10.104"> {</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.107"></a><span id="l10.107">   nsIMdbRow* outRow = 0;</span>
<a href="#l10.108"></a><span id="l10.108">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.109"></a><span id="l10.109">   if ( ev )</span>
<a href="#l10.110"></a><span id="l10.110">   {</span>
<a href="#l10.111"></a><span id="l10.111">     morkRow* row = GetMetaRow(ev, inOptionalMetaRowOid);</span>
<a href="#l10.112"></a><span id="l10.112">     if ( row &amp;&amp; ev-&gt;Good() )</span>
<a href="#l10.113"></a><span id="l10.113">     {</span>
<a href="#l10.114"></a><span id="l10.114">       if ( outOid )</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineat">@@ -413,17 +413,17 @@ morkTable::GetMetaRow( nsIMdbEnv* mev,</span>
<a href="#l10.116"></a><span id="l10.116"> </span>
<a href="#l10.117"></a><span id="l10.117"> // { ----- begin cursor methods -----</span>
<a href="#l10.118"></a><span id="l10.118"> NS_IMETHODIMP</span>
<a href="#l10.119"></a><span id="l10.119"> morkTable::GetTableRowCursor( // make a cursor, starting iteration at inRowPos</span>
<a href="#l10.120"></a><span id="l10.120">   nsIMdbEnv* mev, // context</span>
<a href="#l10.121"></a><span id="l10.121">   mdb_pos inRowPos, // zero-based ordinal position of row in table</span>
<a href="#l10.122"></a><span id="l10.122">   nsIMdbTableRowCursor** acqCursor) // acquire new cursor instance</span>
<a href="#l10.123"></a><span id="l10.123"> {</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.126"></a><span id="l10.126">   nsIMdbTableRowCursor* outCursor = 0;</span>
<a href="#l10.127"></a><span id="l10.127">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.128"></a><span id="l10.128">   if ( ev )</span>
<a href="#l10.129"></a><span id="l10.129">   {</span>
<a href="#l10.130"></a><span id="l10.130">     morkTableRowCursor* cursor = NewTableRowCursor(ev, inRowPos);</span>
<a href="#l10.131"></a><span id="l10.131">     if ( cursor )</span>
<a href="#l10.132"></a><span id="l10.132">     {</span>
<a href="#l10.133"></a><span id="l10.133">       if ( ev-&gt;Good() )</span>
<a href="#l10.134"></a><span id="l10.134" class="difflineat">@@ -444,17 +444,17 @@ morkTable::GetTableRowCursor( // make a </span>
<a href="#l10.135"></a><span id="l10.135"> </span>
<a href="#l10.136"></a><span id="l10.136"> // { ----- begin row position methods -----</span>
<a href="#l10.137"></a><span id="l10.137"> NS_IMETHODIMP</span>
<a href="#l10.138"></a><span id="l10.138"> morkTable::PosToOid( // get row member for a table position</span>
<a href="#l10.139"></a><span id="l10.139">   nsIMdbEnv* mev, // context</span>
<a href="#l10.140"></a><span id="l10.140">   mdb_pos inRowPos, // zero-based ordinal position of row in table</span>
<a href="#l10.141"></a><span id="l10.141">   mdbOid* outOid) // row oid at the specified position</span>
<a href="#l10.142"></a><span id="l10.142"> {</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.145"></a><span id="l10.145">   mdbOid roid;</span>
<a href="#l10.146"></a><span id="l10.146">   roid.mOid_Scope = 0;</span>
<a href="#l10.147"></a><span id="l10.147">   roid.mOid_Id = (mork_id) -1;</span>
<a href="#l10.148"></a><span id="l10.148">   </span>
<a href="#l10.149"></a><span id="l10.149">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.150"></a><span id="l10.150">   if ( ev )</span>
<a href="#l10.151"></a><span id="l10.151">   {</span>
<a href="#l10.152"></a><span id="l10.152">     morkRow* row = SafeRowAt(ev, inRowPos);</span>
<a href="#l10.153"></a><span id="l10.153" class="difflineat">@@ -469,17 +469,17 @@ morkTable::PosToOid( // get row member f</span>
<a href="#l10.154"></a><span id="l10.154"> }</span>
<a href="#l10.155"></a><span id="l10.155"> </span>
<a href="#l10.156"></a><span id="l10.156"> NS_IMETHODIMP</span>
<a href="#l10.157"></a><span id="l10.157"> morkTable::OidToPos( // test for the table position of a row member</span>
<a href="#l10.158"></a><span id="l10.158">   nsIMdbEnv* mev, // context</span>
<a href="#l10.159"></a><span id="l10.159">   const mdbOid* inOid, // row to find in table</span>
<a href="#l10.160"></a><span id="l10.160">   mdb_pos* outPos) // zero-based ordinal position of row in table</span>
<a href="#l10.161"></a><span id="l10.161"> {</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.164"></a><span id="l10.164">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.165"></a><span id="l10.165">   if ( ev )</span>
<a href="#l10.166"></a><span id="l10.166">   {</span>
<a href="#l10.167"></a><span id="l10.167">     mork_pos pos = ArrayHasOid(ev, inOid);</span>
<a href="#l10.168"></a><span id="l10.168">     if ( outPos )</span>
<a href="#l10.169"></a><span id="l10.169">       *outPos = pos;</span>
<a href="#l10.170"></a><span id="l10.170">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.171"></a><span id="l10.171">   }</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineat">@@ -487,17 +487,17 @@ morkTable::OidToPos( // test for the tab</span>
<a href="#l10.173"></a><span id="l10.173"> }</span>
<a href="#l10.174"></a><span id="l10.174"> </span>
<a href="#l10.175"></a><span id="l10.175"> NS_IMETHODIMP</span>
<a href="#l10.176"></a><span id="l10.176"> morkTable::PosToRow( // get row member for a table position</span>
<a href="#l10.177"></a><span id="l10.177">   nsIMdbEnv* mev, // context</span>
<a href="#l10.178"></a><span id="l10.178">   mdb_pos inRowPos, // zero-based ordinal position of row in table</span>
<a href="#l10.179"></a><span id="l10.179">   nsIMdbRow** acqRow) // acquire row at table position inRowPos</span>
<a href="#l10.180"></a><span id="l10.180"> {</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.183"></a><span id="l10.183">   nsIMdbRow* outRow = 0;</span>
<a href="#l10.184"></a><span id="l10.184">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.185"></a><span id="l10.185">   if ( ev )</span>
<a href="#l10.186"></a><span id="l10.186">   {</span>
<a href="#l10.187"></a><span id="l10.187">     morkRow* row = SafeRowAt(ev, inRowPos);</span>
<a href="#l10.188"></a><span id="l10.188">     if ( row &amp;&amp; mTable_Store )</span>
<a href="#l10.189"></a><span id="l10.189">       outRow = row-&gt;AcquireRowHandle(ev, mTable_Store);</span>
<a href="#l10.190"></a><span id="l10.190">       </span>
<a href="#l10.191"></a><span id="l10.191" class="difflineat">@@ -509,17 +509,17 @@ morkTable::PosToRow( // get row member f</span>
<a href="#l10.192"></a><span id="l10.192"> }</span>
<a href="#l10.193"></a><span id="l10.193"> </span>
<a href="#l10.194"></a><span id="l10.194"> NS_IMETHODIMP</span>
<a href="#l10.195"></a><span id="l10.195"> morkTable::RowToPos( // test for the table position of a row member</span>
<a href="#l10.196"></a><span id="l10.196">   nsIMdbEnv* mev, // context</span>
<a href="#l10.197"></a><span id="l10.197">   nsIMdbRow* ioRow, // row to find in table</span>
<a href="#l10.198"></a><span id="l10.198">   mdb_pos* outPos) // zero-based ordinal position of row in table</span>
<a href="#l10.199"></a><span id="l10.199"> {</span>
<a href="#l10.200"></a><span id="l10.200" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.201"></a><span id="l10.201" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.202"></a><span id="l10.202">   mork_pos pos = -1;</span>
<a href="#l10.203"></a><span id="l10.203">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.204"></a><span id="l10.204">   if ( ev )</span>
<a href="#l10.205"></a><span id="l10.205">   {</span>
<a href="#l10.206"></a><span id="l10.206">     morkRowObject* row = (morkRowObject*) ioRow;</span>
<a href="#l10.207"></a><span id="l10.207">     pos = ArrayHasOid(ev, &amp;row-&gt;mRowObject_Row-&gt;mRow_Oid);</span>
<a href="#l10.208"></a><span id="l10.208">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.209"></a><span id="l10.209">   }</span>
<a href="#l10.210"></a><span id="l10.210" class="difflineat">@@ -542,33 +542,33 @@ morkTable::AddOid( // make sure the row </span>
<a href="#l10.211"></a><span id="l10.211"> }</span>
<a href="#l10.212"></a><span id="l10.212"> </span>
<a href="#l10.213"></a><span id="l10.213"> NS_IMETHODIMP</span>
<a href="#l10.214"></a><span id="l10.214"> morkTable::HasOid( // test for the table position of a row member</span>
<a href="#l10.215"></a><span id="l10.215">   nsIMdbEnv* mev, // context</span>
<a href="#l10.216"></a><span id="l10.216">   const mdbOid* inOid, // row to find in table</span>
<a href="#l10.217"></a><span id="l10.217">   mdb_bool* outHasOid) // whether inOid is a member row</span>
<a href="#l10.218"></a><span id="l10.218"> {</span>
<a href="#l10.219"></a><span id="l10.219" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.220"></a><span id="l10.220" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.221"></a><span id="l10.221">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.222"></a><span id="l10.222">   if ( ev )</span>
<a href="#l10.223"></a><span id="l10.223">   {</span>
<a href="#l10.224"></a><span id="l10.224">     if ( outHasOid )</span>
<a href="#l10.225"></a><span id="l10.225">       *outHasOid = MapHasOid(ev, inOid);</span>
<a href="#l10.226"></a><span id="l10.226">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.227"></a><span id="l10.227">   }</span>
<a href="#l10.228"></a><span id="l10.228">   return outErr;</span>
<a href="#l10.229"></a><span id="l10.229"> }</span>
<a href="#l10.230"></a><span id="l10.230"> </span>
<a href="#l10.231"></a><span id="l10.231"> NS_IMETHODIMP</span>
<a href="#l10.232"></a><span id="l10.232"> morkTable::CutOid( // make sure the row with inOid is not a member </span>
<a href="#l10.233"></a><span id="l10.233">   nsIMdbEnv* mev, // context</span>
<a href="#l10.234"></a><span id="l10.234">   const mdbOid* inOid) // row to remove from table</span>
<a href="#l10.235"></a><span id="l10.235"> {</span>
<a href="#l10.236"></a><span id="l10.236" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.237"></a><span id="l10.237" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.238"></a><span id="l10.238">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.239"></a><span id="l10.239">   if ( ev )</span>
<a href="#l10.240"></a><span id="l10.240">   {</span>
<a href="#l10.241"></a><span id="l10.241">     if ( inOid &amp;&amp; mTable_Store )</span>
<a href="#l10.242"></a><span id="l10.242">     {</span>
<a href="#l10.243"></a><span id="l10.243">       morkRow* row = mTable_Store-&gt;GetRow(ev, inOid);</span>
<a href="#l10.244"></a><span id="l10.244">       if ( row )</span>
<a href="#l10.245"></a><span id="l10.245">         CutRow(ev, row);</span>
<a href="#l10.246"></a><span id="l10.246" class="difflineat">@@ -584,17 +584,17 @@ morkTable::CutOid( // make sure the row </span>
<a href="#l10.247"></a><span id="l10.247"> </span>
<a href="#l10.248"></a><span id="l10.248"> // { ----- begin row set methods -----</span>
<a href="#l10.249"></a><span id="l10.249"> NS_IMETHODIMP</span>
<a href="#l10.250"></a><span id="l10.250"> morkTable::NewRow( // create a new row instance in table</span>
<a href="#l10.251"></a><span id="l10.251">   nsIMdbEnv* mev, // context</span>
<a href="#l10.252"></a><span id="l10.252">   mdbOid* ioOid, // please use zero (unbound) rowId for db-assigned IDs</span>
<a href="#l10.253"></a><span id="l10.253">   nsIMdbRow** acqRow) // create new row</span>
<a href="#l10.254"></a><span id="l10.254"> {</span>
<a href="#l10.255"></a><span id="l10.255" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.256"></a><span id="l10.256" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.257"></a><span id="l10.257">   nsIMdbRow* outRow = 0;</span>
<a href="#l10.258"></a><span id="l10.258">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.259"></a><span id="l10.259">   if ( ev )</span>
<a href="#l10.260"></a><span id="l10.260">   {</span>
<a href="#l10.261"></a><span id="l10.261">     if ( ioOid &amp;&amp; mTable_Store )</span>
<a href="#l10.262"></a><span id="l10.262">     {</span>
<a href="#l10.263"></a><span id="l10.263">       morkRow* row = 0;</span>
<a href="#l10.264"></a><span id="l10.264">       if ( ioOid-&gt;mOid_Id == morkRow_kMinusOneRid )</span>
<a href="#l10.265"></a><span id="l10.265" class="difflineat">@@ -615,17 +615,17 @@ morkTable::NewRow( // create a new row i</span>
<a href="#l10.266"></a><span id="l10.266">   return outErr;</span>
<a href="#l10.267"></a><span id="l10.267"> }</span>
<a href="#l10.268"></a><span id="l10.268"> </span>
<a href="#l10.269"></a><span id="l10.269"> NS_IMETHODIMP</span>
<a href="#l10.270"></a><span id="l10.270"> morkTable::AddRow( // make sure the row with inOid is a table member </span>
<a href="#l10.271"></a><span id="l10.271">   nsIMdbEnv* mev, // context</span>
<a href="#l10.272"></a><span id="l10.272">   nsIMdbRow* ioRow) // row to ensure membership in table</span>
<a href="#l10.273"></a><span id="l10.273"> {</span>
<a href="#l10.274"></a><span id="l10.274" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.275"></a><span id="l10.275" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.276"></a><span id="l10.276">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.277"></a><span id="l10.277">   if ( ev )</span>
<a href="#l10.278"></a><span id="l10.278">   {</span>
<a href="#l10.279"></a><span id="l10.279">     morkRowObject *rowObj = (morkRowObject *) ioRow;</span>
<a href="#l10.280"></a><span id="l10.280">     morkRow* row = rowObj-&gt;mRowObject_Row;</span>
<a href="#l10.281"></a><span id="l10.281">     AddRow(ev, row);</span>
<a href="#l10.282"></a><span id="l10.282">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.283"></a><span id="l10.283">   }</span>
<a href="#l10.284"></a><span id="l10.284" class="difflineat">@@ -633,17 +633,17 @@ morkTable::AddRow( // make sure the row </span>
<a href="#l10.285"></a><span id="l10.285"> }</span>
<a href="#l10.286"></a><span id="l10.286"> </span>
<a href="#l10.287"></a><span id="l10.287"> NS_IMETHODIMP</span>
<a href="#l10.288"></a><span id="l10.288"> morkTable::HasRow( // test for the table position of a row member</span>
<a href="#l10.289"></a><span id="l10.289">   nsIMdbEnv* mev, // context</span>
<a href="#l10.290"></a><span id="l10.290">   nsIMdbRow* ioRow, // row to find in table</span>
<a href="#l10.291"></a><span id="l10.291">   mdb_bool* outBool) // zero-based ordinal position of row in table</span>
<a href="#l10.292"></a><span id="l10.292"> {</span>
<a href="#l10.293"></a><span id="l10.293" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.294"></a><span id="l10.294" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.295"></a><span id="l10.295">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.296"></a><span id="l10.296">   if ( ev )</span>
<a href="#l10.297"></a><span id="l10.297">   {</span>
<a href="#l10.298"></a><span id="l10.298">     morkRowObject *rowObj = (morkRowObject *) ioRow;</span>
<a href="#l10.299"></a><span id="l10.299">     morkRow* row = rowObj-&gt;mRowObject_Row;</span>
<a href="#l10.300"></a><span id="l10.300">     if ( outBool )</span>
<a href="#l10.301"></a><span id="l10.301">       *outBool = MapHasOid(ev, &amp;row-&gt;mRow_Oid);</span>
<a href="#l10.302"></a><span id="l10.302">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.303"></a><span id="l10.303" class="difflineat">@@ -652,33 +652,33 @@ morkTable::HasRow( // test for the table</span>
<a href="#l10.304"></a><span id="l10.304"> }</span>
<a href="#l10.305"></a><span id="l10.305"> </span>
<a href="#l10.306"></a><span id="l10.306"> </span>
<a href="#l10.307"></a><span id="l10.307"> NS_IMETHODIMP</span>
<a href="#l10.308"></a><span id="l10.308"> morkTable::CutRow( // make sure the row with inOid is not a member </span>
<a href="#l10.309"></a><span id="l10.309">   nsIMdbEnv* mev, // context</span>
<a href="#l10.310"></a><span id="l10.310">   nsIMdbRow* ioRow) // row to remove from table</span>
<a href="#l10.311"></a><span id="l10.311"> {</span>
<a href="#l10.312"></a><span id="l10.312" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.313"></a><span id="l10.313" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.314"></a><span id="l10.314">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.315"></a><span id="l10.315">   if ( ev )</span>
<a href="#l10.316"></a><span id="l10.316">   {</span>
<a href="#l10.317"></a><span id="l10.317">     morkRowObject *rowObj = (morkRowObject *) ioRow;</span>
<a href="#l10.318"></a><span id="l10.318">     morkRow* row = rowObj-&gt;mRowObject_Row;</span>
<a href="#l10.319"></a><span id="l10.319">     CutRow(ev, row);</span>
<a href="#l10.320"></a><span id="l10.320">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.321"></a><span id="l10.321">   }</span>
<a href="#l10.322"></a><span id="l10.322">   return outErr;</span>
<a href="#l10.323"></a><span id="l10.323"> }</span>
<a href="#l10.324"></a><span id="l10.324"> </span>
<a href="#l10.325"></a><span id="l10.325"> NS_IMETHODIMP</span>
<a href="#l10.326"></a><span id="l10.326"> morkTable::CutAllRows( // remove all rows from the table </span>
<a href="#l10.327"></a><span id="l10.327">   nsIMdbEnv* mev) // context</span>
<a href="#l10.328"></a><span id="l10.328"> {</span>
<a href="#l10.329"></a><span id="l10.329" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.330"></a><span id="l10.330" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.331"></a><span id="l10.331">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.332"></a><span id="l10.332">   if ( ev )</span>
<a href="#l10.333"></a><span id="l10.333">   {</span>
<a href="#l10.334"></a><span id="l10.334">     CutAllRows(ev);</span>
<a href="#l10.335"></a><span id="l10.335">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.336"></a><span id="l10.336">   }</span>
<a href="#l10.337"></a><span id="l10.337">   return outErr;</span>
<a href="#l10.338"></a><span id="l10.338"> }</span>
<a href="#l10.339"></a><span id="l10.339" class="difflineat">@@ -832,17 +832,17 @@ morkTable::SetSearchSorting( // use this</span>
<a href="#l10.340"></a><span id="l10.340"> NS_IMETHODIMP</span>
<a href="#l10.341"></a><span id="l10.341"> morkTable::MoveOid( // change position of row in unsorted table</span>
<a href="#l10.342"></a><span id="l10.342">   nsIMdbEnv* mev, // context</span>
<a href="#l10.343"></a><span id="l10.343">   const mdbOid* inOid,  // row oid to find in table</span>
<a href="#l10.344"></a><span id="l10.344">   mdb_pos inHintFromPos, // suggested hint regarding start position</span>
<a href="#l10.345"></a><span id="l10.345">   mdb_pos inToPos,       // desired new position for row inOid</span>
<a href="#l10.346"></a><span id="l10.346">   mdb_pos* outActualPos) // actual new position of row in table</span>
<a href="#l10.347"></a><span id="l10.347"> {</span>
<a href="#l10.348"></a><span id="l10.348" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.349"></a><span id="l10.349" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.350"></a><span id="l10.350">   mdb_pos actualPos = -1; // meaning it was never found in table</span>
<a href="#l10.351"></a><span id="l10.351">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.352"></a><span id="l10.352">   if ( ev )</span>
<a href="#l10.353"></a><span id="l10.353">   {</span>
<a href="#l10.354"></a><span id="l10.354">     if ( inOid &amp;&amp; mTable_Store )</span>
<a href="#l10.355"></a><span id="l10.355">     {</span>
<a href="#l10.356"></a><span id="l10.356">       morkRow* row = mTable_Store-&gt;GetRow(ev, inOid);</span>
<a href="#l10.357"></a><span id="l10.357">       if ( row )</span>
<a href="#l10.358"></a><span id="l10.358" class="difflineat">@@ -862,17 +862,17 @@ NS_IMETHODIMP</span>
<a href="#l10.359"></a><span id="l10.359"> morkTable::MoveRow( // change position of row in unsorted table</span>
<a href="#l10.360"></a><span id="l10.360">   nsIMdbEnv* mev, // context</span>
<a href="#l10.361"></a><span id="l10.361">   nsIMdbRow* ioRow,  // row oid to find in table</span>
<a href="#l10.362"></a><span id="l10.362">   mdb_pos inHintFromPos, // suggested hint regarding start position</span>
<a href="#l10.363"></a><span id="l10.363">   mdb_pos inToPos,       // desired new position for row ioRow</span>
<a href="#l10.364"></a><span id="l10.364">   mdb_pos* outActualPos) // actual new position of row in table</span>
<a href="#l10.365"></a><span id="l10.365"> {</span>
<a href="#l10.366"></a><span id="l10.366">   mdb_pos actualPos = -1; // meaning it was never found in table</span>
<a href="#l10.367"></a><span id="l10.367" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l10.368"></a><span id="l10.368" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l10.369"></a><span id="l10.369">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l10.370"></a><span id="l10.370">   if ( ev )</span>
<a href="#l10.371"></a><span id="l10.371">   {</span>
<a href="#l10.372"></a><span id="l10.372">     morkRowObject *rowObj = (morkRowObject *) ioRow;</span>
<a href="#l10.373"></a><span id="l10.373">     morkRow* row = rowObj-&gt;mRowObject_Row;</span>
<a href="#l10.374"></a><span id="l10.374">     actualPos = MoveRow(ev, row, inHintFromPos, inToPos);</span>
<a href="#l10.375"></a><span id="l10.375">     outErr = ev-&gt;AsErr();</span>
<a href="#l10.376"></a><span id="l10.376">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/db/mork/src/morkTableRowCursor.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/db/mork/src/morkTableRowCursor.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -106,17 +106,17 @@ morkTableRowCursor::CloseTableRowCursor(</span>
<a href="#l11.4"></a><span id="l11.4"> }</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6"> // } ===== end morkNode methods =====</span>
<a href="#l11.7"></a><span id="l11.7"> // ````` ````` ````` ````` ````` </span>
<a href="#l11.8"></a><span id="l11.8"> // { ----- begin attribute methods -----</span>
<a href="#l11.9"></a><span id="l11.9"> /*virtual*/ mdb_err</span>
<a href="#l11.10"></a><span id="l11.10"> morkTableRowCursor::GetCount(nsIMdbEnv* mev, mdb_count* outCount)</span>
<a href="#l11.11"></a><span id="l11.11"> {</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.14"></a><span id="l11.14">   mdb_count count = 0;</span>
<a href="#l11.15"></a><span id="l11.15">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.16"></a><span id="l11.16">   if ( ev )</span>
<a href="#l11.17"></a><span id="l11.17">   {</span>
<a href="#l11.18"></a><span id="l11.18">     count = GetMemberCount(ev);</span>
<a href="#l11.19"></a><span id="l11.19">     outErr = ev-&gt;AsErr();</span>
<a href="#l11.20"></a><span id="l11.20">   }</span>
<a href="#l11.21"></a><span id="l11.21">   if ( outCount )</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -164,17 +164,17 @@ morkTableRowCursor::GetDoFailOnSeedOutOf</span>
<a href="#l11.23"></a><span id="l11.23"> </span>
<a href="#l11.24"></a><span id="l11.24"> // { ===== begin nsIMdbTableRowCursor methods =====</span>
<a href="#l11.25"></a><span id="l11.25"> </span>
<a href="#l11.26"></a><span id="l11.26"> // { ----- begin attribute methods -----</span>
<a href="#l11.27"></a><span id="l11.27"> </span>
<a href="#l11.28"></a><span id="l11.28"> NS_IMETHODIMP</span>
<a href="#l11.29"></a><span id="l11.29"> morkTableRowCursor::GetTable(nsIMdbEnv* mev, nsIMdbTable** acqTable)</span>
<a href="#l11.30"></a><span id="l11.30"> {</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.33"></a><span id="l11.33">   nsIMdbTable* outTable = 0;</span>
<a href="#l11.34"></a><span id="l11.34">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.35"></a><span id="l11.35">   if ( ev )</span>
<a href="#l11.36"></a><span id="l11.36">   {</span>
<a href="#l11.37"></a><span id="l11.37">     if ( mTableRowCursor_Table )</span>
<a href="#l11.38"></a><span id="l11.38">       outTable = mTableRowCursor_Table-&gt;AcquireTableHandle(ev);</span>
<a href="#l11.39"></a><span id="l11.39">     </span>
<a href="#l11.40"></a><span id="l11.40">     outErr = ev-&gt;AsErr();</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineat">@@ -187,17 +187,17 @@ morkTableRowCursor::GetTable(nsIMdbEnv* </span>
<a href="#l11.42"></a><span id="l11.42"> </span>
<a href="#l11.43"></a><span id="l11.43"> // { ----- begin oid iteration methods -----</span>
<a href="#l11.44"></a><span id="l11.44"> NS_IMETHODIMP</span>
<a href="#l11.45"></a><span id="l11.45"> morkTableRowCursor::NextRowOid( // get row id of next row in the table</span>
<a href="#l11.46"></a><span id="l11.46">   nsIMdbEnv* mev, // context</span>
<a href="#l11.47"></a><span id="l11.47">   mdbOid* outOid, // out row oid</span>
<a href="#l11.48"></a><span id="l11.48">   mdb_pos* outRowPos)</span>
<a href="#l11.49"></a><span id="l11.49"> {</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.52"></a><span id="l11.52">   mork_pos pos = -1;</span>
<a href="#l11.53"></a><span id="l11.53">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.54"></a><span id="l11.54">   if ( ev )</span>
<a href="#l11.55"></a><span id="l11.55">   {</span>
<a href="#l11.56"></a><span id="l11.56">     if ( outOid )</span>
<a href="#l11.57"></a><span id="l11.57">     {</span>
<a href="#l11.58"></a><span id="l11.58">       pos = NextRowOid(ev, outOid);</span>
<a href="#l11.59"></a><span id="l11.59">     }</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineat">@@ -211,17 +211,17 @@ morkTableRowCursor::NextRowOid( // get r</span>
<a href="#l11.61"></a><span id="l11.61"> }</span>
<a href="#l11.62"></a><span id="l11.62"> </span>
<a href="#l11.63"></a><span id="l11.63"> NS_IMETHODIMP</span>
<a href="#l11.64"></a><span id="l11.64"> morkTableRowCursor::PrevRowOid( // get row id of previous row in the table</span>
<a href="#l11.65"></a><span id="l11.65">   nsIMdbEnv* mev, // context</span>
<a href="#l11.66"></a><span id="l11.66">   mdbOid* outOid, // out row oid</span>
<a href="#l11.67"></a><span id="l11.67">   mdb_pos* outRowPos)</span>
<a href="#l11.68"></a><span id="l11.68"> {</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.71"></a><span id="l11.71">   mork_pos pos = -1;</span>
<a href="#l11.72"></a><span id="l11.72">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.73"></a><span id="l11.73">   if ( ev )</span>
<a href="#l11.74"></a><span id="l11.74">   {</span>
<a href="#l11.75"></a><span id="l11.75">     if ( outOid )</span>
<a href="#l11.76"></a><span id="l11.76">     {</span>
<a href="#l11.77"></a><span id="l11.77">       pos = PrevRowOid(ev, outOid);</span>
<a href="#l11.78"></a><span id="l11.78">     }</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineat">@@ -237,17 +237,17 @@ morkTableRowCursor::PrevRowOid( // get r</span>
<a href="#l11.80"></a><span id="l11.80"> </span>
<a href="#l11.81"></a><span id="l11.81"> // { ----- begin row iteration methods -----</span>
<a href="#l11.82"></a><span id="l11.82"> NS_IMETHODIMP</span>
<a href="#l11.83"></a><span id="l11.83"> morkTableRowCursor::NextRow( // get row cells from table for cells already in row</span>
<a href="#l11.84"></a><span id="l11.84">   nsIMdbEnv* mev, // context</span>
<a href="#l11.85"></a><span id="l11.85">   nsIMdbRow** acqRow, // acquire next row in table</span>
<a href="#l11.86"></a><span id="l11.86">   mdb_pos* outRowPos)</span>
<a href="#l11.87"></a><span id="l11.87"> {</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.90"></a><span id="l11.90">   nsIMdbRow* outRow = 0;</span>
<a href="#l11.91"></a><span id="l11.91">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.92"></a><span id="l11.92">   if ( ev )</span>
<a href="#l11.93"></a><span id="l11.93">   {</span>
<a href="#l11.94"></a><span id="l11.94">       </span>
<a href="#l11.95"></a><span id="l11.95">     mdbOid oid; // place to put oid we intend to ignore</span>
<a href="#l11.96"></a><span id="l11.96">     morkRow* row = NextRow(ev, &amp;oid, outRowPos);</span>
<a href="#l11.97"></a><span id="l11.97">     if ( row )</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineat">@@ -264,17 +264,17 @@ morkTableRowCursor::NextRow( // get row </span>
<a href="#l11.99"></a><span id="l11.99"> }</span>
<a href="#l11.100"></a><span id="l11.100"> </span>
<a href="#l11.101"></a><span id="l11.101"> NS_IMETHODIMP</span>
<a href="#l11.102"></a><span id="l11.102"> morkTableRowCursor::PrevRow( // get row cells from table for cells already in row</span>
<a href="#l11.103"></a><span id="l11.103">   nsIMdbEnv* mev, // context</span>
<a href="#l11.104"></a><span id="l11.104">   nsIMdbRow** acqRow, // acquire previous row in table</span>
<a href="#l11.105"></a><span id="l11.105">   mdb_pos* outRowPos)</span>
<a href="#l11.106"></a><span id="l11.106"> {</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.109"></a><span id="l11.109">   nsIMdbRow* outRow = 0;</span>
<a href="#l11.110"></a><span id="l11.110">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.111"></a><span id="l11.111">   if ( ev )</span>
<a href="#l11.112"></a><span id="l11.112">   {</span>
<a href="#l11.113"></a><span id="l11.113">       </span>
<a href="#l11.114"></a><span id="l11.114">     mdbOid oid; // place to put oid we intend to ignore</span>
<a href="#l11.115"></a><span id="l11.115">     morkRow* row = PrevRow(ev, &amp;oid, outRowPos);</span>
<a href="#l11.116"></a><span id="l11.116">     if ( row )</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineat">@@ -293,17 +293,17 @@ morkTableRowCursor::PrevRow( // get row </span>
<a href="#l11.118"></a><span id="l11.118"> // } ----- end row iteration methods -----</span>
<a href="#l11.119"></a><span id="l11.119"> </span>
<a href="#l11.120"></a><span id="l11.120"> </span>
<a href="#l11.121"></a><span id="l11.121"> // { ----- begin duplicate row removal methods -----</span>
<a href="#l11.122"></a><span id="l11.122"> NS_IMETHODIMP</span>
<a href="#l11.123"></a><span id="l11.123"> morkTableRowCursor::CanHaveDupRowMembers(nsIMdbEnv* mev, // cursor might hold dups?</span>
<a href="#l11.124"></a><span id="l11.124">   mdb_bool* outCanHaveDups)</span>
<a href="#l11.125"></a><span id="l11.125"> {</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.128"></a><span id="l11.128">   mdb_bool canHaveDups = mdbBool_kFalse;</span>
<a href="#l11.129"></a><span id="l11.129">   </span>
<a href="#l11.130"></a><span id="l11.130">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.131"></a><span id="l11.131">   if ( ev )</span>
<a href="#l11.132"></a><span id="l11.132">   {</span>
<a href="#l11.133"></a><span id="l11.133">     canHaveDups = CanHaveDupRowMembers(ev);</span>
<a href="#l11.134"></a><span id="l11.134">     outErr = ev-&gt;AsErr();</span>
<a href="#l11.135"></a><span id="l11.135">   }</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineat">@@ -333,17 +333,17 @@ morkTableRowCursor::MakeUniqueCursor( //</span>
<a href="#l11.137"></a><span id="l11.137">   // impact if a collection holds tens of thousands of rows or more, when</span>
<a href="#l11.138"></a><span id="l11.138">   // the original cursor with dups simply referenced rows indirectly by row</span>
<a href="#l11.139"></a><span id="l11.139">   // position ranges, without using an explicit row set representation.</span>
<a href="#l11.140"></a><span id="l11.140">   // Callers are encouraged to use nsIMdbCursor::GetCount() to determine</span>
<a href="#l11.141"></a><span id="l11.141">   // whether the row collection is very large (tens of thousands), and to</span>
<a href="#l11.142"></a><span id="l11.142">   // delay calling MakeUniqueCursor() when possible, until a user interface</span>
<a href="#l11.143"></a><span id="l11.143">   // element actually demands the creation of an explicit set representation.</span>
<a href="#l11.144"></a><span id="l11.144"> {</span>
<a href="#l11.145"></a><span id="l11.145" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l11.146"></a><span id="l11.146" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l11.147"></a><span id="l11.147">   nsIMdbTableRowCursor* outCursor = 0;</span>
<a href="#l11.148"></a><span id="l11.148">   </span>
<a href="#l11.149"></a><span id="l11.149">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l11.150"></a><span id="l11.150">   if ( ev )</span>
<a href="#l11.151"></a><span id="l11.151">   {</span>
<a href="#l11.152"></a><span id="l11.152">     AddRef();</span>
<a href="#l11.153"></a><span id="l11.153">     outCursor = this;</span>
<a href="#l11.154"></a><span id="l11.154">       </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/db/mork/src/morkThumb.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/db/mork/src/morkThumb.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -131,44 +131,44 @@ morkThumb::CloseThumb(morkEnv* ev) // ca</span>
<a href="#l12.4"></a><span id="l12.4"> // } ===== end morkNode methods =====</span>
<a href="#l12.5"></a><span id="l12.5"> // ````` ````` ````` ````` ````` </span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7"> // { ===== begin nsIMdbThumb methods =====</span>
<a href="#l12.8"></a><span id="l12.8"> NS_IMETHODIMP</span>
<a href="#l12.9"></a><span id="l12.9"> morkThumb::GetProgress(nsIMdbEnv* mev, mdb_count* outTotal,</span>
<a href="#l12.10"></a><span id="l12.10">   mdb_count* outCurrent, mdb_bool* outDone, mdb_bool* outBroken)</span>
<a href="#l12.11"></a><span id="l12.11"> {</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l12.14"></a><span id="l12.14">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l12.15"></a><span id="l12.15">   if ( ev )</span>
<a href="#l12.16"></a><span id="l12.16">   {</span>
<a href="#l12.17"></a><span id="l12.17">     GetProgress(ev, outTotal, outCurrent, outDone, outBroken);</span>
<a href="#l12.18"></a><span id="l12.18">     outErr = ev-&gt;AsErr();</span>
<a href="#l12.19"></a><span id="l12.19">   }</span>
<a href="#l12.20"></a><span id="l12.20">   return outErr;</span>
<a href="#l12.21"></a><span id="l12.21"> }</span>
<a href="#l12.22"></a><span id="l12.22"> </span>
<a href="#l12.23"></a><span id="l12.23"> NS_IMETHODIMP</span>
<a href="#l12.24"></a><span id="l12.24"> morkThumb::DoMore(nsIMdbEnv* mev, mdb_count* outTotal,</span>
<a href="#l12.25"></a><span id="l12.25">   mdb_count* outCurrent, mdb_bool* outDone, mdb_bool* outBroken)</span>
<a href="#l12.26"></a><span id="l12.26"> {</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l12.29"></a><span id="l12.29">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l12.30"></a><span id="l12.30">   if ( ev )</span>
<a href="#l12.31"></a><span id="l12.31">   {</span>
<a href="#l12.32"></a><span id="l12.32">     DoMore(ev, outTotal, outCurrent, outDone, outBroken);</span>
<a href="#l12.33"></a><span id="l12.33">     outErr = ev-&gt;AsErr();</span>
<a href="#l12.34"></a><span id="l12.34">   }</span>
<a href="#l12.35"></a><span id="l12.35">   return outErr;</span>
<a href="#l12.36"></a><span id="l12.36"> }</span>
<a href="#l12.37"></a><span id="l12.37"> </span>
<a href="#l12.38"></a><span id="l12.38"> NS_IMETHODIMP</span>
<a href="#l12.39"></a><span id="l12.39"> morkThumb::CancelAndBreakThumb(nsIMdbEnv* mev)</span>
<a href="#l12.40"></a><span id="l12.40"> {</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l12.43"></a><span id="l12.43">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l12.44"></a><span id="l12.44">   if ( ev )</span>
<a href="#l12.45"></a><span id="l12.45">   {</span>
<a href="#l12.46"></a><span id="l12.46">     mThumb_Done = morkBool_kTrue;</span>
<a href="#l12.47"></a><span id="l12.47">     mThumb_Broken = morkBool_kTrue;</span>
<a href="#l12.48"></a><span id="l12.48">     CloseMorkNode(ev); // should I close this here?</span>
<a href="#l12.49"></a><span id="l12.49">     outErr = ev-&gt;AsErr();</span>
<a href="#l12.50"></a><span id="l12.50">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/db/mork/src/morkZone.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/db/mork/src/morkZone.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -485,17 +485,17 @@ void* morkZone::ZoneGrowRun(morkEnv* ev,</span>
<a href="#l13.4"></a><span id="l13.4"> //3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span>
<a href="#l13.5"></a><span id="l13.5"> </span>
<a href="#l13.6"></a><span id="l13.6"> // { ===== begin nsIMdbHeap methods =====</span>
<a href="#l13.7"></a><span id="l13.7"> /*virtual*/ mdb_err</span>
<a href="#l13.8"></a><span id="l13.8"> morkZone::Alloc(nsIMdbEnv* mev, // allocate a piece of memory</span>
<a href="#l13.9"></a><span id="l13.9">   mdb_size inSize,   // requested size of new memory block </span>
<a href="#l13.10"></a><span id="l13.10">   void** outBlock)  // memory block of inSize bytes, or nil</span>
<a href="#l13.11"></a><span id="l13.11"> {</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l13.14"></a><span id="l13.14">   void* block = 0;</span>
<a href="#l13.15"></a><span id="l13.15">   morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l13.16"></a><span id="l13.16">   if ( ev )</span>
<a href="#l13.17"></a><span id="l13.17">   {</span>
<a href="#l13.18"></a><span id="l13.18">     block = this-&gt;ZoneNewRun(ev, inSize);</span>
<a href="#l13.19"></a><span id="l13.19">     outErr = ev-&gt;AsErr();</span>
<a href="#l13.20"></a><span id="l13.20">   }</span>
<a href="#l13.21"></a><span id="l13.21">   else</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineat">@@ -506,17 +506,17 @@ morkZone::Alloc(nsIMdbEnv* mev, // alloc</span>
<a href="#l13.23"></a><span id="l13.23">     </span>
<a href="#l13.24"></a><span id="l13.24">   return outErr;</span>
<a href="#l13.25"></a><span id="l13.25"> }</span>
<a href="#l13.26"></a><span id="l13.26">   </span>
<a href="#l13.27"></a><span id="l13.27"> /*virtual*/ mdb_err</span>
<a href="#l13.28"></a><span id="l13.28"> morkZone::Free(nsIMdbEnv* mev, // free block allocated earlier by Alloc()</span>
<a href="#l13.29"></a><span id="l13.29">   void* inBlock)</span>
<a href="#l13.30"></a><span id="l13.30"> {</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l13.33"></a><span id="l13.33">   if ( inBlock )</span>
<a href="#l13.34"></a><span id="l13.34">   {</span>
<a href="#l13.35"></a><span id="l13.35">     morkEnv* ev = morkEnv::FromMdbEnv(mev);</span>
<a href="#l13.36"></a><span id="l13.36">     if ( ev )</span>
<a href="#l13.37"></a><span id="l13.37">     {</span>
<a href="#l13.38"></a><span id="l13.38">       this-&gt;ZoneZapRun(ev, inBlock);</span>
<a href="#l13.39"></a><span id="l13.39">       outErr = ev-&gt;AsErr();</span>
<a href="#l13.40"></a><span id="l13.40">     }</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineat">@@ -526,20 +526,20 @@ morkZone::Free(nsIMdbEnv* mev, // free b</span>
<a href="#l13.42"></a><span id="l13.42">     </span>
<a href="#l13.43"></a><span id="l13.43">   return outErr;</span>
<a href="#l13.44"></a><span id="l13.44"> }</span>
<a href="#l13.45"></a><span id="l13.45"> </span>
<a href="#l13.46"></a><span id="l13.46"> /*virtual*/ mdb_err</span>
<a href="#l13.47"></a><span id="l13.47"> morkZone::HeapAddStrongRef(nsIMdbEnv* mev) // does nothing</span>
<a href="#l13.48"></a><span id="l13.48"> {</span>
<a href="#l13.49"></a><span id="l13.49">   MORK_USED_1(mev);</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineminus">-  return 0;</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+  return NS_OK;</span>
<a href="#l13.52"></a><span id="l13.52"> }</span>
<a href="#l13.53"></a><span id="l13.53"> </span>
<a href="#l13.54"></a><span id="l13.54"> /*virtual*/ mdb_err</span>
<a href="#l13.55"></a><span id="l13.55"> morkZone::HeapCutStrongRef(nsIMdbEnv* mev) // does nothing</span>
<a href="#l13.56"></a><span id="l13.56"> {</span>
<a href="#l13.57"></a><span id="l13.57">   MORK_USED_1(mev);</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineminus">-  return 0;</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineplus">+  return NS_OK;</span>
<a href="#l13.60"></a><span id="l13.60"> }</span>
<a href="#l13.61"></a><span id="l13.61"> </span>
<a href="#l13.62"></a><span id="l13.62"> // } ===== end nsIMdbHeap methods =====</span>
<a href="#l13.63"></a><span id="l13.63"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/db/mork/src/orkinHeap.cpp</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/db/mork/src/orkinHeap.cpp</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -51,17 +51,17 @@ orkinHeap::Alloc(nsIMdbEnv* mev, // allo</span>
<a href="#l14.4"></a><span id="l14.4"> {</span>
<a href="#l14.5"></a><span id="l14.5"> #ifdef MORK_DEBUG_HEAP_STATS</span>
<a href="#l14.6"></a><span id="l14.6">   mdb_size realSize = inSize;</span>
<a href="#l14.7"></a><span id="l14.7">   inSize += 12; // sizeof(mork_u4) * 3</span>
<a href="#l14.8"></a><span id="l14.8">   ++sHeap_AllocCount;</span>
<a href="#l14.9"></a><span id="l14.9"> #endif /*MORK_DEBUG_HEAP_STATS*/</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">   MORK_USED_1(mev);</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-  mdb_err outErr = 0;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+  mdb_err outErr = NS_OK;</span>
<a href="#l14.14"></a><span id="l14.14">   void* block = malloc(inSize);</span>
<a href="#l14.15"></a><span id="l14.15">   if ( !block )</span>
<a href="#l14.16"></a><span id="l14.16">     outErr = morkEnv_kOutOfMemoryError;</span>
<a href="#l14.17"></a><span id="l14.17"> #ifdef MORK_DEBUG_HEAP_STATS</span>
<a href="#l14.18"></a><span id="l14.18">   else</span>
<a href="#l14.19"></a><span id="l14.19">   {</span>
<a href="#l14.20"></a><span id="l14.20">     printf(&quot;%lx allocating %d\n&quot;, this, realSize);</span>
<a href="#l14.21"></a><span id="l14.21">     mork_u4* array = (mork_u4*) block;</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -130,28 +130,28 @@ orkinHeap::Free(nsIMdbEnv* mev, // free </span>
<a href="#l14.23"></a><span id="l14.23">     {</span>
<a href="#l14.24"></a><span id="l14.24">       sHeap_BlockVolume = 0;</span>
<a href="#l14.25"></a><span id="l14.25">       ev-&gt;NewWarning(&quot;sHeap_BlockVolume underflow&quot;);</span>
<a href="#l14.26"></a><span id="l14.26">     }</span>
<a href="#l14.27"></a><span id="l14.27"> #endif /*MORK_DEBUG_HEAP_STATS*/</span>
<a href="#l14.28"></a><span id="l14.28">     </span>
<a href="#l14.29"></a><span id="l14.29">     free(inBlock);</span>
<a href="#l14.30"></a><span id="l14.30">   }</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-  return 0;</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+  return NS_OK;</span>
<a href="#l14.33"></a><span id="l14.33"> }</span>
<a href="#l14.34"></a><span id="l14.34"> </span>
<a href="#l14.35"></a><span id="l14.35"> /*virtual*/ mdb_err</span>
<a href="#l14.36"></a><span id="l14.36"> orkinHeap::HeapAddStrongRef(nsIMdbEnv* ev) // does nothing</span>
<a href="#l14.37"></a><span id="l14.37"> {</span>
<a href="#l14.38"></a><span id="l14.38">   MORK_USED_1(ev);</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineminus">-  return 0;</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+  return NS_OK;</span>
<a href="#l14.41"></a><span id="l14.41"> }</span>
<a href="#l14.42"></a><span id="l14.42"> </span>
<a href="#l14.43"></a><span id="l14.43"> /*virtual*/ mdb_err</span>
<a href="#l14.44"></a><span id="l14.44"> orkinHeap::HeapCutStrongRef(nsIMdbEnv* ev) // does nothing</span>
<a href="#l14.45"></a><span id="l14.45"> {</span>
<a href="#l14.46"></a><span id="l14.46">   MORK_USED_1(ev);</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">-  return 0;</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+  return NS_OK;</span>
<a href="#l14.49"></a><span id="l14.49"> }</span>
<a href="#l14.50"></a><span id="l14.50"> </span>
<a href="#l14.51"></a><span id="l14.51"> // } ===== end nsIMdbHeap methods =====</span>
<a href="#l14.52"></a><span id="l14.52"> </span>
<a href="#l14.53"></a><span id="l14.53"> //3456789_123456789_123456789_123456789_123456789_123456789_123456789_123456789</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbLDAPReplicationService.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -71,17 +71,17 @@ NS_IMETHODIMP nsAbLDAPReplicationService</span>
<a href="#l15.4"></a><span id="l15.4"> 	  return rv;</span>
<a href="#l15.5"></a><span id="l15.5"> 	}</span>
<a href="#l15.6"></a><span id="l15.6">     }</span>
<a href="#l15.7"></a><span id="l15.7">   }</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9">   if (progressListener &amp;&amp; NS_FAILED(rv))</span>
<a href="#l15.10"></a><span id="l15.10">     progressListener-&gt;OnStateChange(nullptr, nullptr,</span>
<a href="#l15.11"></a><span id="l15.11"> 				    nsIWebProgressListener::STATE_STOP,</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-				    false);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+				    NS_OK);</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">   if (NS_FAILED(rv))</span>
<a href="#l15.16"></a><span id="l15.16">   {</span>
<a href="#l15.17"></a><span id="l15.17">     mDirectory = nullptr;</span>
<a href="#l15.18"></a><span id="l15.18">     mQuery = nullptr;</span>
<a href="#l15.19"></a><span id="l15.19">   }</span>
<a href="#l15.20"></a><span id="l15.20"> </span>
<a href="#l15.21"></a><span id="l15.21">   return rv;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsLDAPAutoCompleteSession.cpp</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -84,17 +84,17 @@ nsLDAPAutoCompleteSession::OnStartLookup</span>
<a href="#l16.4"></a><span id="l16.4">     if (searchString[0] == 0 ||</span>
<a href="#l16.5"></a><span id="l16.5">         nsDependentString(searchString).FindChar(PRUnichar('@'), 0) != -1 || </span>
<a href="#l16.6"></a><span id="l16.6">         nsDependentString(searchString).FindChar(PRUnichar(','), 0) != -1 || </span>
<a href="#l16.7"></a><span id="l16.7">         ( !IS_CJK_CHAR_FOR_LDAP(searchString[0]) ?</span>
<a href="#l16.8"></a><span id="l16.8">           mMinStringLength &amp;&amp; NS_strlen(searchString) &lt; mMinStringLength :</span>
<a href="#l16.9"></a><span id="l16.9">           mCjkMinStringLength &amp;&amp; NS_strlen(searchString) &lt; </span>
<a href="#l16.10"></a><span id="l16.10">           mCjkMinStringLength ) ) {</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-        FinishAutoCompleteLookup(nsIAutoCompleteStatus::ignored, 0, mState);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+        FinishAutoCompleteLookup(nsIAutoCompleteStatus::ignored, NS_OK, mState);</span>
<a href="#l16.14"></a><span id="l16.14">         return NS_OK;</span>
<a href="#l16.15"></a><span id="l16.15">     } else {</span>
<a href="#l16.16"></a><span id="l16.16">         mSearchString = searchString;        // save it for later use</span>
<a href="#l16.17"></a><span id="l16.17">     }</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">     // Make sure this was called appropriately.</span>
<a href="#l16.20"></a><span id="l16.20">     if (mState == SEARCHING || mState == BINDING) {</span>
<a href="#l16.21"></a><span id="l16.21">         NS_ERROR(&quot;nsLDAPAutoCompleteSession::OnStartLookup(): called while &quot;</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineat">@@ -387,17 +387,17 @@ nsLDAPAutoCompleteSession::OnLDAPMessage</span>
<a href="#l16.23"></a><span id="l16.23">                  &quot;LDAP message received&quot;);</span>
<a href="#l16.24"></a><span id="l16.24">         return NS_OK;</span>
<a href="#l16.25"></a><span id="l16.25">     }</span>
<a href="#l16.26"></a><span id="l16.26"> }</span>
<a href="#l16.27"></a><span id="l16.27"> </span>
<a href="#l16.28"></a><span id="l16.28"> void</span>
<a href="#l16.29"></a><span id="l16.29"> nsLDAPAutoCompleteSession::InitFailed(bool aCancelled)</span>
<a href="#l16.30"></a><span id="l16.30"> {</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-  FinishAutoCompleteLookup(nsIAutoCompleteStatus::failureItems, 0,</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+  FinishAutoCompleteLookup(nsIAutoCompleteStatus::failureItems, NS_OK,</span>
<a href="#l16.33"></a><span id="l16.33">                            UNBOUND);</span>
<a href="#l16.34"></a><span id="l16.34"> }</span>
<a href="#l16.35"></a><span id="l16.35"> </span>
<a href="#l16.36"></a><span id="l16.36"> // void onLDAPInit (in nsresult aStatus);</span>
<a href="#l16.37"></a><span id="l16.37"> NS_IMETHODIMP</span>
<a href="#l16.38"></a><span id="l16.38"> nsLDAPAutoCompleteSession::OnLDAPInit(nsILDAPConnection *aConn, nsresult aStatus)</span>
<a href="#l16.39"></a><span id="l16.39"> {</span>
<a href="#l16.40"></a><span id="l16.40">   nsresult rv = nsAbLDAPListenerBase::OnLDAPInit(aConn, aStatus);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccountManagerDS.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccountManagerDS.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -331,17 +331,17 @@ nsMsgAccountManagerDataSource::GetTarget</span>
<a href="#l17.4"></a><span id="l17.4">         const char *sourceValue;</span>
<a href="#l17.5"></a><span id="l17.5">         rv = source-&gt;GetValueConst(&amp;sourceValue);</span>
<a href="#l17.6"></a><span id="l17.6">         NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8">         // make sure the pointer math we're about to do is safe.</span>
<a href="#l17.9"></a><span id="l17.9">         NS_ENSURE_TRUE(sourceValue &amp;&amp; (strlen(sourceValue) &gt; strlen(NC_RDF_PAGETITLE_PREFIX)), NS_ERROR_UNEXPECTED);</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">         nsCOMPtr&lt;nsIMsgAccountManager&gt; am = do_QueryReferent(mAccountManager, &amp;rv);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-        NS_ENSURE_SUCCESS(rv, false);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+        NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15">         // turn NC#PageTitlefoobar into foobar, so we can get the am-foobar.properties bundle</span>
<a href="#l17.16"></a><span id="l17.16">         nsCString chromePackageName;</span>
<a href="#l17.17"></a><span id="l17.17">         rv = am-&gt;GetChromePackageName(nsCString(sourceValue + strlen(NC_RDF_PAGETITLE_PREFIX)), chromePackageName);</span>
<a href="#l17.18"></a><span id="l17.18">         NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l17.19"></a><span id="l17.19"> </span>
<a href="#l17.20"></a><span id="l17.20">         nsCAutoString bundleURL;</span>
<a href="#l17.21"></a><span id="l17.21">         bundleURL = &quot;chrome://&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -604,17 +604,17 @@ nsresult nsMsgDBView::FetchRecipients(ns</span>
<a href="#l18.4"></a><span id="l18.4">     if (NS_SUCCEEDED(rv))</span>
<a href="#l18.5"></a><span id="l18.5">     {</span>
<a href="#l18.6"></a><span id="l18.6">       char *curAddressPtr = emailAddresses;</span>
<a href="#l18.7"></a><span id="l18.7">       char *curNamePtr = names;</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">       nsCOMPtr&lt;nsISimpleEnumerator&gt; enumerator;</span>
<a href="#l18.10"></a><span id="l18.10">       nsCOMPtr&lt;nsIAbManager&gt;</span>
<a href="#l18.11"></a><span id="l18.11">         abManager(do_GetService(&quot;@mozilla.org/abmanager;1&quot;, &amp;rv));</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-      NS_ENSURE_SUCCESS(rv, false);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+      NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15">       // go through each email address in the recipients and</span>
<a href="#l18.16"></a><span id="l18.16">       // compute its display name.</span>
<a href="#l18.17"></a><span id="l18.17">       for (PRUint32 i = 0; i &lt; numAddresses; i++)</span>
<a href="#l18.18"></a><span id="l18.18">       {</span>
<a href="#l18.19"></a><span id="l18.19">         nsString recipient;</span>
<a href="#l18.20"></a><span id="l18.20">         nsDependentCString curAddress(curAddressPtr);</span>
<a href="#l18.21"></a><span id="l18.21">         nsDependentCString curName(curNamePtr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgPrintEngine.cpp</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -101,17 +101,17 @@ nsMsgPrintEngine::OnStateChange(nsIWebPr</span>
<a href="#l19.4"></a><span id="l19.4">         docLoader-&gt;GetContainer(getter_AddRefs(container));</span>
<a href="#l19.5"></a><span id="l19.5">         nsCOMPtr&lt;nsIDOMWindow&gt; domWindow(do_GetInterface(container));</span>
<a href="#l19.6"></a><span id="l19.6">         if (domWindow.get() != mMsgDOMWin.get()) {</span>
<a href="#l19.7"></a><span id="l19.7">           return NS_OK;</span>
<a href="#l19.8"></a><span id="l19.8">         }</span>
<a href="#l19.9"></a><span id="l19.9">       }</span>
<a href="#l19.10"></a><span id="l19.10">       nsCOMPtr&lt;nsIWebProgressListener&gt; wpl(do_QueryInterface(mPrintPromptService));</span>
<a href="#l19.11"></a><span id="l19.11">       if (wpl) {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-        wpl-&gt;OnStateChange(nullptr, nullptr, nsIWebProgressListener::STATE_STOP|nsIWebProgressListener::STATE_IS_DOCUMENT, nullptr);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+        wpl-&gt;OnStateChange(nullptr, nullptr, nsIWebProgressListener::STATE_STOP|nsIWebProgressListener::STATE_IS_DOCUMENT, NS_OK);</span>
<a href="#l19.14"></a><span id="l19.14">         mPrintProgressListener = nullptr;</span>
<a href="#l19.15"></a><span id="l19.15">         mPrintProgress         = nullptr;</span>
<a href="#l19.16"></a><span id="l19.16">         mPrintProgressParams   = nullptr;</span>
<a href="#l19.17"></a><span id="l19.17">       }</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19">       bool isPrintingCancelled = false;</span>
<a href="#l19.20"></a><span id="l19.20">       if (mPrintSettings)</span>
<a href="#l19.21"></a><span id="l19.21">       {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/base/src/nsMsgProgress.cpp</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgProgress.cpp</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -30,17 +30,17 @@ NS_INTERFACE_MAP_BEGIN(nsMsgProgress)</span>
<a href="#l20.4"></a><span id="l20.4"> NS_INTERFACE_MAP_END_THREADSAFE</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6"> </span>
<a href="#l20.7"></a><span id="l20.7"> nsMsgProgress::nsMsgProgress()</span>
<a href="#l20.8"></a><span id="l20.8"> {</span>
<a href="#l20.9"></a><span id="l20.9">   m_closeProgress = false;</span>
<a href="#l20.10"></a><span id="l20.10">   m_processCanceled = false;</span>
<a href="#l20.11"></a><span id="l20.11">   m_pendingStateFlags = -1;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  m_pendingStateValue = 0;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  m_pendingStateValue = NS_OK;</span>
<a href="#l20.14"></a><span id="l20.14"> }</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16"> nsMsgProgress::~nsMsgProgress()</span>
<a href="#l20.17"></a><span id="l20.17"> {</span>
<a href="#l20.18"></a><span id="l20.18">   (void)ReleaseListeners();</span>
<a href="#l20.19"></a><span id="l20.19"> }</span>
<a href="#l20.20"></a><span id="l20.20"> </span>
<a href="#l20.21"></a><span id="l20.21"> NS_IMETHODIMP nsMsgProgress::OpenProgressDialog(nsIDOMWindow *parent, </span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -114,20 +114,20 @@ NS_IMETHODIMP nsMsgProgress::RegisterLis</span>
<a href="#l20.23"></a><span id="l20.23"> {</span>
<a href="#l20.24"></a><span id="l20.24">   if (!listener) //Nothing to do with a null listener!</span>
<a href="#l20.25"></a><span id="l20.25">     return NS_OK;</span>
<a href="#l20.26"></a><span id="l20.26"> </span>
<a href="#l20.27"></a><span id="l20.27">   NS_ENSURE_ARG(this != listener); //Check for self-reference (see bug 271700)</span>
<a href="#l20.28"></a><span id="l20.28"> </span>
<a href="#l20.29"></a><span id="l20.29">   m_listenerList.AppendObject(listener);</span>
<a href="#l20.30"></a><span id="l20.30">   if (m_closeProgress || m_processCanceled)</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-    listener-&gt;OnStateChange(nullptr, nullptr, nsIWebProgressListener::STATE_STOP, 0);</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+    listener-&gt;OnStateChange(nullptr, nullptr, nsIWebProgressListener::STATE_STOP, NS_OK);</span>
<a href="#l20.33"></a><span id="l20.33">   else</span>
<a href="#l20.34"></a><span id="l20.34">   {</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-    listener-&gt;OnStatusChange(nullptr, nullptr, 0, m_pendingStatus.get());</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineplus">+    listener-&gt;OnStatusChange(nullptr, nullptr, NS_OK, m_pendingStatus.get());</span>
<a href="#l20.37"></a><span id="l20.37">     if (m_pendingStateFlags != -1)</span>
<a href="#l20.38"></a><span id="l20.38">       listener-&gt;OnStateChange(nullptr, nullptr, m_pendingStateFlags, m_pendingStateValue);</span>
<a href="#l20.39"></a><span id="l20.39">   }</span>
<a href="#l20.40"></a><span id="l20.40"> </span>
<a href="#l20.41"></a><span id="l20.41">   return NS_OK;</span>
<a href="#l20.42"></a><span id="l20.42"> }</span>
<a href="#l20.43"></a><span id="l20.43"> </span>
<a href="#l20.44"></a><span id="l20.44"> /* void UnregisterListener (in nsIWebProgressListener listener); */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/base/src/nsMsgPurgeService.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgPurgeService.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -228,17 +228,17 @@ nsresult nsMsgPurgeService::PerformPurge</span>
<a href="#l21.4"></a><span id="l21.4">         nsresult rv = server-&gt;GetType(type);</span>
<a href="#l21.5"></a><span id="l21.5">         NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7">         nsCAutoString contractid(NS_MSGPROTOCOLINFO_CONTRACTID_PREFIX);</span>
<a href="#l21.8"></a><span id="l21.8">         contractid.Append(type);</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10">         nsCOMPtr&lt;nsIMsgProtocolInfo&gt; protocolInfo =</span>
<a href="#l21.11"></a><span id="l21.11">           do_GetService(contractid.get(), &amp;rv);</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-        NS_ENSURE_SUCCESS(rv, false);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+        NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l21.14"></a><span id="l21.14"> </span>
<a href="#l21.15"></a><span id="l21.15">         nsCString realHostName;</span>
<a href="#l21.16"></a><span id="l21.16">         server-&gt;GetRealHostName(realHostName);</span>
<a href="#l21.17"></a><span id="l21.17">         PR_LOG(MsgPurgeLogModule, PR_LOG_ALWAYS, (&quot;[%d] %s (%s)&quot;, serverIndex, realHostName.get(), type.get()));</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19">         nsCOMPtr &lt;nsISpamSettings&gt; spamSettings;</span>
<a href="#l21.20"></a><span id="l21.20">         rv = server-&gt;GetSpamSettings(getter_AddRefs(spamSettings));</span>
<a href="#l21.21"></a><span id="l21.21">         NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/base/util/nsMsgLineBuffer.cpp</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/base/util/nsMsgLineBuffer.cpp</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -38,17 +38,17 @@ nsresult nsByteArray::GrowBuffer(PRUint3</span>
<a href="#l22.4"></a><span id="l22.4">     new_buf = (m_buffer</span>
<a href="#l22.5"></a><span id="l22.5">       ? (char *) PR_REALLOC (m_buffer, (m_bufferSize + increment))</span>
<a href="#l22.6"></a><span id="l22.6">       : (char *) PR_MALLOC (m_bufferSize + increment));</span>
<a href="#l22.7"></a><span id="l22.7">     if (! new_buf)</span>
<a href="#l22.8"></a><span id="l22.8">       return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l22.9"></a><span id="l22.9">     m_buffer = new_buf;</span>
<a href="#l22.10"></a><span id="l22.10">     m_bufferSize += increment;</span>
<a href="#l22.11"></a><span id="l22.11">   }</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  return 0;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  return NS_OK;</span>
<a href="#l22.14"></a><span id="l22.14"> }</span>
<a href="#l22.15"></a><span id="l22.15"> </span>
<a href="#l22.16"></a><span id="l22.16"> nsresult nsByteArray::AppendString(const char *string)</span>
<a href="#l22.17"></a><span id="l22.17"> {</span>
<a href="#l22.18"></a><span id="l22.18">   PRUint32 strLength = (string) ? PL_strlen(string) : 0;</span>
<a href="#l22.19"></a><span id="l22.19">   return AppendBuffer(string, strLength);</span>
<a href="#l22.20"></a><span id="l22.20">   </span>
<a href="#l22.21"></a><span id="l22.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgAttachmentHandler.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgAttachmentHandler.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1064,17 +1064,17 @@ nsMsgAttachmentHandler::UrlExit(nsresult</span>
<a href="#l23.4"></a><span id="l23.4">     nsCOMPtr&lt;nsIPrompt&gt; aPrompt;</span>
<a href="#l23.5"></a><span id="l23.5">     if (m_mime_delivery_state)</span>
<a href="#l23.6"></a><span id="l23.6">       m_mime_delivery_state-&gt;GetDefaultPrompt(getter_AddRefs(aPrompt));</span>
<a href="#l23.7"></a><span id="l23.7">     nsMsgAskBooleanQuestionByString(aPrompt, printfString, &amp;keepOnGoing);</span>
<a href="#l23.8"></a><span id="l23.8">     PR_FREEIF(printfString);</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10">     if (keepOnGoing)</span>
<a href="#l23.11"></a><span id="l23.11">     {</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-      status = 0;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+      status = NS_OK;</span>
<a href="#l23.14"></a><span id="l23.14">       m_bogus_attachment = true; //That will cause this attachment to be ignored.</span>
<a href="#l23.15"></a><span id="l23.15">     }</span>
<a href="#l23.16"></a><span id="l23.16">     else</span>
<a href="#l23.17"></a><span id="l23.17">     {</span>
<a href="#l23.18"></a><span id="l23.18">       status = NS_ERROR_ABORT;</span>
<a href="#l23.19"></a><span id="l23.19">       m_mime_delivery_state-&gt;SetStatus(status);</span>
<a href="#l23.20"></a><span id="l23.20">       nsresult ignoreMe;</span>
<a href="#l23.21"></a><span id="l23.21">       m_mime_delivery_state-&gt;Fail(status, nullptr, &amp;ignoreMe);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -249,17 +249,17 @@ nsMsgStripLine (char * string)</span>
<a href="#l24.4"></a><span id="l24.4">   }</span>
<a href="#l24.5"></a><span id="l24.5"> </span>
<a href="#l24.6"></a><span id="l24.6"> char *</span>
<a href="#l24.7"></a><span id="l24.7"> mime_generate_headers (nsMsgCompFields *fields,</span>
<a href="#l24.8"></a><span id="l24.8">                        const char *charset,</span>
<a href="#l24.9"></a><span id="l24.9">                        nsMsgDeliverMode deliver_mode, nsIPrompt * aPrompt, PRInt32 *status)</span>
<a href="#l24.10"></a><span id="l24.10"> {</span>
<a href="#l24.11"></a><span id="l24.11">   nsresult rv;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  *status = 0;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  *status = NS_OK;</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15">   nsCOMPtr&lt;nsIPrefBranch&gt; prefs(do_GetService(NS_PREFSERVICE_CONTRACTID, &amp;rv));</span>
<a href="#l24.16"></a><span id="l24.16">   if (NS_FAILED(rv)) {</span>
<a href="#l24.17"></a><span id="l24.17">     *status = rv;</span>
<a href="#l24.18"></a><span id="l24.18">     return nullptr;</span>
<a href="#l24.19"></a><span id="l24.19">   }</span>
<a href="#l24.20"></a><span id="l24.20"> </span>
<a href="#l24.21"></a><span id="l24.21">   bool usemime = nsMsgMIMEGetConformToStandard();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompose.cpp</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -3970,17 +3970,17 @@ NS_IMETHODIMP nsMsgComposeSendListener::</span>
<a href="#l25.4"></a><span id="l25.4">           nsCOMPtr&lt;nsIStringBundleService&gt; bundleService =</span>
<a href="#l25.5"></a><span id="l25.5">             mozilla::services::GetStringBundleService();</span>
<a href="#l25.6"></a><span id="l25.6">           NS_ENSURE_TRUE(bundleService, NS_ERROR_UNEXPECTED);</span>
<a href="#l25.7"></a><span id="l25.7">           nsCOMPtr&lt;nsIStringBundle&gt; bundle;</span>
<a href="#l25.8"></a><span id="l25.8">           rv = bundleService-&gt;CreateBundle(&quot;chrome://messenger/locale/messengercompose/composeMsgs.properties&quot;, getter_AddRefs(bundle));</span>
<a href="#l25.9"></a><span id="l25.9">           NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l25.10"></a><span id="l25.10">           nsString msg;</span>
<a href="#l25.11"></a><span id="l25.11">           bundle-&gt;GetStringFromID(NS_ERROR_GET_CODE(NS_MSG_CANCELLING), getter_Copies(msg));</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-          progress-&gt;OnStatusChange(nullptr, nullptr, 0, msg.get());</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+          progress-&gt;OnStatusChange(nullptr, nullptr, NS_OK, msg.get());</span>
<a href="#l25.14"></a><span id="l25.14">         }</span>
<a href="#l25.15"></a><span id="l25.15">       }</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17">       nsCOMPtr&lt;nsIMsgSend&gt; msgSend;</span>
<a href="#l25.18"></a><span id="l25.18">       msgCompose-&gt;GetMessageSend(getter_AddRefs(msgSend));</span>
<a href="#l25.19"></a><span id="l25.19">       if (msgSend)</span>
<a href="#l25.20"></a><span id="l25.20">         msgSend-&gt;Abort();</span>
<a href="#l25.21"></a><span id="l25.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSend.cpp</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -267,17 +267,17 @@ nsMsgComposeAndSend::nsMsgComposeAndSend</span>
<a href="#l26.4"></a><span id="l26.4">   m_attachment1_type = 0;</span>
<a href="#l26.5"></a><span id="l26.5">   m_attachment1_encoding = 0;</span>
<a href="#l26.6"></a><span id="l26.6">   m_attachment1_encoder_data = nullptr;</span>
<a href="#l26.7"></a><span id="l26.7">   m_attachment1_body = 0;</span>
<a href="#l26.8"></a><span id="l26.8">   m_attachment1_body_length = 0;</span>
<a href="#l26.9"></a><span id="l26.9">   m_attachment_count = 0;</span>
<a href="#l26.10"></a><span id="l26.10">   m_attachment_pending_count = 0;</span>
<a href="#l26.11"></a><span id="l26.11">   m_attachments = nullptr;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  m_status = 0;</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  m_status = NS_OK;</span>
<a href="#l26.14"></a><span id="l26.14">   m_plaintext = nullptr;</span>
<a href="#l26.15"></a><span id="l26.15">   m_related_part = nullptr;</span>
<a href="#l26.16"></a><span id="l26.16">   m_related_body_part = nullptr;</span>
<a href="#l26.17"></a><span id="l26.17">   mOriginalHTMLBody = nullptr;</span>
<a href="#l26.18"></a><span id="l26.18"> </span>
<a href="#l26.19"></a><span id="l26.19">   mNeedToPerformSecondFCC = false;</span>
<a href="#l26.20"></a><span id="l26.20"> </span>
<a href="#l26.21"></a><span id="l26.21">   mPreloadedAttachmentCount = 0;</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineat">@@ -4892,17 +4892,17 @@ nsMsgComposeAndSend::StartMessageCopyOpe</span>
<a href="#l26.23"></a><span id="l26.23"> }</span>
<a href="#l26.24"></a><span id="l26.24"> </span>
<a href="#l26.25"></a><span id="l26.25"> //I'm getting this each time without holding onto the feedback so that 3 pane windows can be closed</span>
<a href="#l26.26"></a><span id="l26.26"> //without any chance of crashing due to holding onto a deleted feedback.</span>
<a href="#l26.27"></a><span id="l26.27"> nsresult</span>
<a href="#l26.28"></a><span id="l26.28"> nsMsgComposeAndSend::SetStatusMessage(const nsString &amp;aMsgString)</span>
<a href="#l26.29"></a><span id="l26.29"> {</span>
<a href="#l26.30"></a><span id="l26.30">   if (mSendProgress)</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-    mSendProgress-&gt;OnStatusChange(nullptr, nullptr, 0, aMsgString.get());</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+    mSendProgress-&gt;OnStatusChange(nullptr, nullptr, NS_OK, aMsgString.get());</span>
<a href="#l26.33"></a><span id="l26.33">   return NS_OK;</span>
<a href="#l26.34"></a><span id="l26.34"> }</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36"> // For GUI notification...</span>
<a href="#l26.37"></a><span id="l26.37"> nsresult</span>
<a href="#l26.38"></a><span id="l26.38"> nsMsgComposeAndSend::SetGUINotificationState(bool aEnableFlag)</span>
<a href="#l26.39"></a><span id="l26.39"> {</span>
<a href="#l26.40"></a><span id="l26.40">   mGUINotificationEnabled = aEnableFlag;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSendLater.cpp</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSendLater.cpp</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -1149,24 +1149,24 @@ DoGrowBuffer(PRInt32 desired_size, PRInt</span>
<a href="#l27.4"></a><span id="l27.4">                 * (element_size / sizeof(char)))</span>
<a href="#l27.5"></a><span id="l27.5">                 : (char *) PR_Malloc ((*size + increment)</span>
<a href="#l27.6"></a><span id="l27.6">                 * (element_size / sizeof(char))));</span>
<a href="#l27.7"></a><span id="l27.7">     if (! new_buf)</span>
<a href="#l27.8"></a><span id="l27.8">       return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l27.9"></a><span id="l27.9">     *buffer = new_buf;</span>
<a href="#l27.10"></a><span id="l27.10">     *size += increment;</span>
<a href="#l27.11"></a><span id="l27.11">   }</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  return 0;</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  return NS_OK;</span>
<a href="#l27.14"></a><span id="l27.14"> }</span>
<a href="#l27.15"></a><span id="l27.15"> </span>
<a href="#l27.16"></a><span id="l27.16"> #define do_grow_headers(desired_size) \</span>
<a href="#l27.17"></a><span id="l27.17">   (((desired_size) &gt;= m_headersSize) ? \</span>
<a href="#l27.18"></a><span id="l27.18">    DoGrowBuffer ((desired_size), sizeof(char), 1024, \</span>
<a href="#l27.19"></a><span id="l27.19">            &amp;m_headers, &amp;m_headersSize) \</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineminus">-   : 0)</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+   : NS_OK)</span>
<a href="#l27.22"></a><span id="l27.22"> </span>
<a href="#l27.23"></a><span id="l27.23"> nsresult</span>
<a href="#l27.24"></a><span id="l27.24"> nsMsgSendLater::DeliverQueuedLine(char *line, PRInt32 length)</span>
<a href="#l27.25"></a><span id="l27.25"> {</span>
<a href="#l27.26"></a><span id="l27.26">   PRInt32 flength = length;</span>
<a href="#l27.27"></a><span id="l27.27">   </span>
<a href="#l27.28"></a><span id="l27.28">   m_bytesRead += length;</span>
<a href="#l27.29"></a><span id="l27.29">   </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgSendPart.cpp</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgSendPart.cpp</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -71,17 +71,17 @@ int nsMsgSendPart::CopyString(char** des</span>
<a href="#l28.4"></a><span id="l28.4">   NS_ASSERTION(src, &quot;src null&quot;);</span>
<a href="#l28.5"></a><span id="l28.5">   </span>
<a href="#l28.6"></a><span id="l28.6">   PR_FREEIF(*dest);</span>
<a href="#l28.7"></a><span id="l28.7">   if (!src)</span>
<a href="#l28.8"></a><span id="l28.8">     *dest = PL_strdup(&quot;&quot;);</span>
<a href="#l28.9"></a><span id="l28.9">   else</span>
<a href="#l28.10"></a><span id="l28.10">     *dest = PL_strdup(src);</span>
<a href="#l28.11"></a><span id="l28.11">   </span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-  return *dest? 0 : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+  return *dest? NS_OK : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.14"></a><span id="l28.14"> }</span>
<a href="#l28.15"></a><span id="l28.15"> </span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17"> nsresult nsMsgSendPart::SetFile(nsIFile *file)</span>
<a href="#l28.18"></a><span id="l28.18"> {</span>
<a href="#l28.19"></a><span id="l28.19">   m_file = file;</span>
<a href="#l28.20"></a><span id="l28.20">   return NS_OK;</span>
<a href="#l28.21"></a><span id="l28.21"> }</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -93,17 +93,17 @@ int nsMsgSendPart::SetBuffer(const char*</span>
<a href="#l28.23"></a><span id="l28.23">   return CopyString(&amp;m_buffer, buffer);</span>
<a href="#l28.24"></a><span id="l28.24"> }</span>
<a href="#l28.25"></a><span id="l28.25"> </span>
<a href="#l28.26"></a><span id="l28.26"> </span>
<a href="#l28.27"></a><span id="l28.27"> int nsMsgSendPart::SetType(const char* type)</span>
<a href="#l28.28"></a><span id="l28.28"> {</span>
<a href="#l28.29"></a><span id="l28.29">   PR_FREEIF(m_type);</span>
<a href="#l28.30"></a><span id="l28.30">   m_type = PL_strdup(type);</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-  return m_type ? 0 : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+  return m_type ? NS_OK : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.33"></a><span id="l28.33"> }</span>
<a href="#l28.34"></a><span id="l28.34"> </span>
<a href="#l28.35"></a><span id="l28.35"> </span>
<a href="#l28.36"></a><span id="l28.36"> int nsMsgSendPart::SetOtherHeaders(const char* other)</span>
<a href="#l28.37"></a><span id="l28.37"> {</span>
<a href="#l28.38"></a><span id="l28.38">   return CopyString(&amp;m_other, other);</span>
<a href="#l28.39"></a><span id="l28.39"> }</span>
<a href="#l28.40"></a><span id="l28.40"> </span>
<a href="#l28.41"></a><span id="l28.41" class="difflineat">@@ -114,50 +114,50 @@ int nsMsgSendPart::SetMimeDeliveryState(</span>
<a href="#l28.42"></a><span id="l28.42">   {</span>
<a href="#l28.43"></a><span id="l28.43">     for (int i = 0; i &lt; GetNumChildren(); i++)</span>
<a href="#l28.44"></a><span id="l28.44">     {</span>
<a href="#l28.45"></a><span id="l28.45">       nsMsgSendPart *part = GetChild(i);</span>
<a href="#l28.46"></a><span id="l28.46">       if (part) </span>
<a href="#l28.47"></a><span id="l28.47">         part-&gt;SetMimeDeliveryState(state);</span>
<a href="#l28.48"></a><span id="l28.48">     }</span>
<a href="#l28.49"></a><span id="l28.49">   }</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineminus">-  return 0;</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineplus">+  return NS_OK;</span>
<a href="#l28.52"></a><span id="l28.52"> }</span>
<a href="#l28.53"></a><span id="l28.53"> </span>
<a href="#l28.54"></a><span id="l28.54"> int nsMsgSendPart::AppendOtherHeaders(const char* more)</span>
<a href="#l28.55"></a><span id="l28.55"> {</span>
<a href="#l28.56"></a><span id="l28.56">   if (!m_other)</span>
<a href="#l28.57"></a><span id="l28.57">     return SetOtherHeaders(more);</span>
<a href="#l28.58"></a><span id="l28.58"> </span>
<a href="#l28.59"></a><span id="l28.59">   if (!more || !*more)</span>
<a href="#l28.60"></a><span id="l28.60" class="difflineminus">-    return 0;</span>
<a href="#l28.61"></a><span id="l28.61" class="difflineplus">+    return NS_OK;</span>
<a href="#l28.62"></a><span id="l28.62"> </span>
<a href="#l28.63"></a><span id="l28.63">   char* tmp = (char *) PR_Malloc(sizeof(char) * (PL_strlen(m_other) + PL_strlen(more) + 2));</span>
<a href="#l28.64"></a><span id="l28.64">   if (!tmp)</span>
<a href="#l28.65"></a><span id="l28.65">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.66"></a><span id="l28.66"> </span>
<a href="#l28.67"></a><span id="l28.67">   PL_strcpy(tmp, m_other);</span>
<a href="#l28.68"></a><span id="l28.68">   PL_strcat(tmp, more);</span>
<a href="#l28.69"></a><span id="l28.69">   PR_FREEIF(m_other);</span>
<a href="#l28.70"></a><span id="l28.70">   m_other = tmp;</span>
<a href="#l28.71"></a><span id="l28.71"> </span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-  return 0;</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineplus">+  return NS_OK;</span>
<a href="#l28.74"></a><span id="l28.74"> }</span>
<a href="#l28.75"></a><span id="l28.75"> </span>
<a href="#l28.76"></a><span id="l28.76"> </span>
<a href="#l28.77"></a><span id="l28.77"> int nsMsgSendPart::SetEncoderData(MimeEncoderData* data)</span>
<a href="#l28.78"></a><span id="l28.78"> {</span>
<a href="#l28.79"></a><span id="l28.79">   m_encoder_data = data;</span>
<a href="#l28.80"></a><span id="l28.80" class="difflineminus">-  return 0;</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineplus">+  return NS_OK;</span>
<a href="#l28.82"></a><span id="l28.82"> }</span>
<a href="#l28.83"></a><span id="l28.83"> </span>
<a href="#l28.84"></a><span id="l28.84"> int nsMsgSendPart::SetMainPart(bool value)</span>
<a href="#l28.85"></a><span id="l28.85"> {</span>
<a href="#l28.86"></a><span id="l28.86">   m_mainpart = value;</span>
<a href="#l28.87"></a><span id="l28.87" class="difflineminus">-  return 0;</span>
<a href="#l28.88"></a><span id="l28.88" class="difflineplus">+  return NS_OK;</span>
<a href="#l28.89"></a><span id="l28.89"> }</span>
<a href="#l28.90"></a><span id="l28.90"> </span>
<a href="#l28.91"></a><span id="l28.91"> int nsMsgSendPart::AddChild(nsMsgSendPart* child)</span>
<a href="#l28.92"></a><span id="l28.92"> {</span>
<a href="#l28.93"></a><span id="l28.93">   m_numchildren++;</span>
<a href="#l28.94"></a><span id="l28.94">   nsMsgSendPart** tmp = new nsMsgSendPart* [m_numchildren];</span>
<a href="#l28.95"></a><span id="l28.95">   if (tmp == nullptr) return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.96"></a><span id="l28.96">   for (int i=0 ; i&lt;m_numchildren-1 ; i++) {</span>
<a href="#l28.97"></a><span id="l28.97" class="difflineat">@@ -166,17 +166,17 @@ int nsMsgSendPart::AddChild(nsMsgSendPar</span>
<a href="#l28.98"></a><span id="l28.98">   delete [] m_children;</span>
<a href="#l28.99"></a><span id="l28.99">   m_children = tmp;</span>
<a href="#l28.100"></a><span id="l28.100">   m_children[m_numchildren - 1] = child;</span>
<a href="#l28.101"></a><span id="l28.101">   child-&gt;m_parent = this;</span>
<a href="#l28.102"></a><span id="l28.102">   nsCString partNum(m_partNum);</span>
<a href="#l28.103"></a><span id="l28.103">   partNum.Append(&quot;.&quot;);</span>
<a href="#l28.104"></a><span id="l28.104">   partNum.AppendInt(m_numchildren);</span>
<a href="#l28.105"></a><span id="l28.105">   child-&gt;m_partNum = partNum;</span>
<a href="#l28.106"></a><span id="l28.106" class="difflineminus">-  return 0;</span>
<a href="#l28.107"></a><span id="l28.107" class="difflineplus">+  return NS_OK;</span>
<a href="#l28.108"></a><span id="l28.108"> }</span>
<a href="#l28.109"></a><span id="l28.109"> </span>
<a href="#l28.110"></a><span id="l28.110"> nsMsgSendPart * nsMsgSendPart::DetachChild(PRInt32 whichOne)</span>
<a href="#l28.111"></a><span id="l28.111"> {</span>
<a href="#l28.112"></a><span id="l28.112">   nsMsgSendPart *returnValue = nullptr;</span>
<a href="#l28.113"></a><span id="l28.113">   </span>
<a href="#l28.114"></a><span id="l28.114">   NS_ASSERTION(whichOne &gt;= 0 &amp;&amp; whichOne &lt; m_numchildren, &quot;parameter out of range&quot;);</span>
<a href="#l28.115"></a><span id="l28.115">   if (whichOne &gt;= 0 &amp;&amp; whichOne &lt; m_numchildren) </span>
<a href="#l28.116"></a><span id="l28.116" class="difflineat">@@ -325,17 +325,17 @@ divide_content_headers(const char *heade</span>
<a href="#l28.117"></a><span id="l28.117"> {</span>
<a href="#l28.118"></a><span id="l28.118">     const char *tail;</span>
<a href="#l28.119"></a><span id="l28.119">     char *message_tail, *content_tail, *type_tail;</span>
<a href="#l28.120"></a><span id="l28.120">     int L = 0;</span>
<a href="#l28.121"></a><span id="l28.121">     if (headers)</span>
<a href="#l28.122"></a><span id="l28.122">       L = PL_strlen(headers);</span>
<a href="#l28.123"></a><span id="l28.123">     </span>
<a href="#l28.124"></a><span id="l28.124">     if (L == 0)</span>
<a href="#l28.125"></a><span id="l28.125" class="difflineminus">-      return 0;</span>
<a href="#l28.126"></a><span id="l28.126" class="difflineplus">+      return NS_OK;</span>
<a href="#l28.127"></a><span id="l28.127">     </span>
<a href="#l28.128"></a><span id="l28.128">     *message_headers = (char *)PR_Malloc(L+1);</span>
<a href="#l28.129"></a><span id="l28.129">     if (!*message_headers)</span>
<a href="#l28.130"></a><span id="l28.130">       return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l28.131"></a><span id="l28.131">     </span>
<a href="#l28.132"></a><span id="l28.132">     *content_headers = (char *)PR_Malloc(L+1);</span>
<a href="#l28.133"></a><span id="l28.133">     if (!*content_headers) {</span>
<a href="#l28.134"></a><span id="l28.134">       PR_Free(*message_headers);</span>
<a href="#l28.135"></a><span id="l28.135" class="difflineat">@@ -427,17 +427,17 @@ divide_content_headers(const char *heade</span>
<a href="#l28.136"></a><span id="l28.136">       tmp = PL_strstr(*content_headers, &quot;Content-Transfer-Encoding&quot;);</span>
<a href="#l28.137"></a><span id="l28.137">       if (tmp) {</span>
<a href="#l28.138"></a><span id="l28.138">         tmp++; // get past the first occurrence</span>
<a href="#l28.139"></a><span id="l28.139">         NS_ASSERTION(!PL_strstr(tmp, &quot;Content-Transfer-Encoding&quot;), &quot;Content-Transfert already present&quot;);</span>
<a href="#l28.140"></a><span id="l28.140">       }</span>
<a href="#l28.141"></a><span id="l28.141">     }</span>
<a href="#l28.142"></a><span id="l28.142"> #endif // DEBUG</span>
<a href="#l28.143"></a><span id="l28.143">     </span>
<a href="#l28.144"></a><span id="l28.144" class="difflineminus">-    return 0;</span>
<a href="#l28.145"></a><span id="l28.145" class="difflineplus">+    return NS_OK;</span>
<a href="#l28.146"></a><span id="l28.146"> }</span>
<a href="#l28.147"></a><span id="l28.147"> </span>
<a href="#l28.148"></a><span id="l28.148"> #define     SKIP_EMPTY_PART   1966</span>
<a href="#l28.149"></a><span id="l28.149"> </span>
<a href="#l28.150"></a><span id="l28.150"> int </span>
<a href="#l28.151"></a><span id="l28.151"> nsMsgSendPart::Write()</span>
<a href="#l28.152"></a><span id="l28.152"> {</span>
<a href="#l28.153"></a><span id="l28.153">   int     status = 0;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMailDatabase.cpp</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMailDatabase.cpp</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -341,17 +341,17 @@ nsMsgOfflineOpEnumerator::~nsMsgOfflineO</span>
<a href="#l29.4"></a><span id="l29.4">   NS_IF_RELEASE(mRowCursor);</span>
<a href="#l29.5"></a><span id="l29.5">   NS_RELEASE(mDB);</span>
<a href="#l29.6"></a><span id="l29.6"> }</span>
<a href="#l29.7"></a><span id="l29.7"> </span>
<a href="#l29.8"></a><span id="l29.8"> NS_IMPL_ISUPPORTS1(nsMsgOfflineOpEnumerator, nsISimpleEnumerator)</span>
<a href="#l29.9"></a><span id="l29.9"> </span>
<a href="#l29.10"></a><span id="l29.10"> nsresult nsMsgOfflineOpEnumerator::GetRowCursor()</span>
<a href="#l29.11"></a><span id="l29.11"> {</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  nsresult rv = 0;</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  nsresult rv = NS_OK;</span>
<a href="#l29.14"></a><span id="l29.14">   mDone = false;</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16">   if (!mDB || !mDB-&gt;m_mdbAllOfflineOpsTable)</span>
<a href="#l29.17"></a><span id="l29.17">     return NS_ERROR_NULL_POINTER;</span>
<a href="#l29.18"></a><span id="l29.18"> </span>
<a href="#l29.19"></a><span id="l29.19">   rv = mDB-&gt;m_mdbAllOfflineOpsTable-&gt;GetTableRowCursor(mDB-&gt;GetEnv(), -1, &amp;mRowCursor);</span>
<a href="#l29.20"></a><span id="l29.20">   return rv;</span>
<a href="#l29.21"></a><span id="l29.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgDatabase.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgDatabase.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -3206,17 +3206,17 @@ NS_IMETHODIMP nsMsgDBThreadEnumerator::O</span>
<a href="#l30.4"></a><span id="l30.4"> /* void onJunkScoreChanged (in nsIDBChangeListener aInstigator); */</span>
<a href="#l30.5"></a><span id="l30.5"> NS_IMETHODIMP nsMsgDBThreadEnumerator::OnJunkScoreChanged(nsIDBChangeListener *aInstigator)</span>
<a href="#l30.6"></a><span id="l30.6"> {</span>
<a href="#l30.7"></a><span id="l30.7">     return NS_OK;</span>
<a href="#l30.8"></a><span id="l30.8"> }</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10"> nsresult nsMsgDBThreadEnumerator::GetTableCursor(void)</span>
<a href="#l30.11"></a><span id="l30.11"> {</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-  nsresult rv = 0;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+  nsresult rv = NS_OK;</span>
<a href="#l30.14"></a><span id="l30.14"> </span>
<a href="#l30.15"></a><span id="l30.15">   if (!mDB || !mDB-&gt;m_mdbStore)</span>
<a href="#l30.16"></a><span id="l30.16">     return NS_ERROR_NULL_POINTER;</span>
<a href="#l30.17"></a><span id="l30.17"> </span>
<a href="#l30.18"></a><span id="l30.18">   mDB-&gt;m_mdbStore-&gt;GetPortTableCursor(mDB-&gt;GetEnv(),   mDB-&gt;m_hdrRowScopeToken, mDB-&gt;m_threadTableKindToken,</span>
<a href="#l30.19"></a><span id="l30.19">     getter_AddRefs(mTableCursor));</span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21">   if (NS_FAILED(rv))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -775,17 +775,16 @@ nsresult nsMsgMdnGenerator::OutputAllHea</span>
<a href="#l31.4"></a><span id="l31.4"> </span>
<a href="#l31.5"></a><span id="l31.5">     rv = m_headers-&gt;GetAllHeaders(getter_Copies(all_headers));</span>
<a href="#l31.6"></a><span id="l31.6">     if (NS_FAILED(rv))</span>
<a href="#l31.7"></a><span id="l31.7">         return rv;</span>
<a href="#l31.8"></a><span id="l31.8">     all_headers_size = all_headers.Length();</span>
<a href="#l31.9"></a><span id="l31.9">     char *buf = (char *) all_headers.get(),</span>
<a href="#l31.10"></a><span id="l31.10">         *buf_end = (char *) all_headers.get()+all_headers_size;</span>
<a href="#l31.11"></a><span id="l31.11">     char *start = buf, *end = buf;</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    PRInt32 count = 0;</span>
<a href="#l31.13"></a><span id="l31.13"> </span>
<a href="#l31.14"></a><span id="l31.14">     while (buf &lt; buf_end)</span>
<a href="#l31.15"></a><span id="l31.15">     {</span>
<a href="#l31.16"></a><span id="l31.16">         switch (*buf)</span>
<a href="#l31.17"></a><span id="l31.17">         {</span>
<a href="#l31.18"></a><span id="l31.18">         case 0:</span>
<a href="#l31.19"></a><span id="l31.19">             if (*(buf+1) == '\n')</span>
<a href="#l31.20"></a><span id="l31.20">             {</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineat">@@ -841,17 +840,17 @@ nsresult nsMsgMdnGenerator::OutputAllHea</span>
<a href="#l31.22"></a><span id="l31.22">                 while ( end &lt; buf_end &amp;&amp;</span>
<a href="#l31.23"></a><span id="l31.23">                         (*end == '\n' || *end == '\r' || *end == 0))</span>
<a href="#l31.24"></a><span id="l31.24">                     end++;</span>
<a href="#l31.25"></a><span id="l31.25">                 start = end;</span>
<a href="#l31.26"></a><span id="l31.26">             }</span>
<a href="#l31.27"></a><span id="l31.27">             buf = start;</span>
<a href="#l31.28"></a><span id="l31.28">         }</span>
<a href="#l31.29"></a><span id="l31.29">     }</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineminus">-    return count;</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineplus">+    return NS_OK;</span>
<a href="#l31.32"></a><span id="l31.32"> }</span>
<a href="#l31.33"></a><span id="l31.33"> </span>
<a href="#l31.34"></a><span id="l31.34"> nsresult nsMsgMdnGenerator::SendMdnMsg()</span>
<a href="#l31.35"></a><span id="l31.35"> {</span>
<a href="#l31.36"></a><span id="l31.36">     DEBUG_MDN(&quot;nsMsgMdnGenerator::SendMdnMsg&quot;);</span>
<a href="#l31.37"></a><span id="l31.37">     nsresult rv;</span>
<a href="#l31.38"></a><span id="l31.38">     nsCOMPtr&lt;nsISmtpService&gt; smtpService = do_GetService(NS_SMTPSERVICE_CONTRACTID, &amp;rv);</span>
<a href="#l31.39"></a><span id="l31.39">     NS_ENSURE_SUCCESS(rv,rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mailnews/extensions/smime/src/nsMsgComposeSecure.cpp</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -57,17 +57,17 @@ MIME_QPEncoderInit(MimeConverterOutputCa</span>
<a href="#l32.4"></a><span id="l32.4">   nsresult res = converter-&gt;QPEncoderInit(output_fn, closure, &amp;returnEncoderData);</span>
<a href="#l32.5"></a><span id="l32.5">   return NS_SUCCEEDED(res) ? returnEncoderData : nullptr;</span>
<a href="#l32.6"></a><span id="l32.6"> }</span>
<a href="#l32.7"></a><span id="l32.7"> </span>
<a href="#l32.8"></a><span id="l32.8"> nsresult</span>
<a href="#l32.9"></a><span id="l32.9"> MIME_EncoderDestroy(MimeEncoderData *data, bool abort_p) </span>
<a href="#l32.10"></a><span id="l32.10"> {</span>
<a href="#l32.11"></a><span id="l32.11">   nsCOMPtr&lt;nsIMimeConverter&gt; converter = do_GetService(NS_MIME_CONVERTER_CONTRACTID);</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-  NS_ENSURE_TRUE(converter, nullptr);</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+  NS_ENSURE_TRUE(converter, NS_OK);</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15">   return converter-&gt;EncoderDestroy(data, abort_p);</span>
<a href="#l32.16"></a><span id="l32.16"> }</span>
<a href="#l32.17"></a><span id="l32.17"> </span>
<a href="#l32.18"></a><span id="l32.18"> nsresult</span>
<a href="#l32.19"></a><span id="l32.19"> MIME_EncoderWrite(MimeEncoderData *data, const char *buffer, PRInt32 size) </span>
<a href="#l32.20"></a><span id="l32.20"> {</span>
<a href="#l32.21"></a><span id="l32.21">   nsresult rv;</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineat">@@ -474,17 +474,17 @@ nsresult nsMsgComposeSecure::MimeInitMul</span>
<a href="#l32.23"></a><span id="l32.23">   /* Now initialize the crypto library, so that we can compute a hash</span>
<a href="#l32.24"></a><span id="l32.24">    on the object which we are signing.</span>
<a href="#l32.25"></a><span id="l32.25">    */</span>
<a href="#l32.26"></a><span id="l32.26"> </span>
<a href="#l32.27"></a><span id="l32.27">   mHashType = nsICryptoHash::SHA1;</span>
<a href="#l32.28"></a><span id="l32.28"> </span>
<a href="#l32.29"></a><span id="l32.29">   PR_SetError(0,0);</span>
<a href="#l32.30"></a><span id="l32.30">   mDataHash = do_CreateInstance(&quot;@mozilla.org/security/hash;1&quot;, &amp;rv);</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-  if (NS_FAILED(rv)) return 0;</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+  if (NS_FAILED(rv)) return NS_OK;</span>
<a href="#l32.33"></a><span id="l32.33"> </span>
<a href="#l32.34"></a><span id="l32.34">   rv = mDataHash-&gt;Init(mHashType);</span>
<a href="#l32.35"></a><span id="l32.35">   if (NS_FAILED(rv)) {</span>
<a href="#l32.36"></a><span id="l32.36">     goto FAIL;</span>
<a href="#l32.37"></a><span id="l32.37">   }</span>
<a href="#l32.38"></a><span id="l32.38"> </span>
<a href="#l32.39"></a><span id="l32.39">   PR_SetError(0,0);</span>
<a href="#l32.40"></a><span id="l32.40">  FAIL:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mailnews/imap/src/nsIMAPHostSessionList.cpp</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mailnews/imap/src/nsIMAPHostSessionList.cpp</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -663,17 +663,17 @@ NS_IMETHODIMP nsIMAPHostSessionList::Add</span>
<a href="#l33.4"></a><span id="l33.4"> 		{</span>
<a href="#l33.5"></a><span id="l33.5"> 			bool rv = host-&gt;fShellCache-&gt;AddShellToCache(shell);</span>
<a href="#l33.6"></a><span id="l33.6"> 			PR_ExitMonitor(gCachedHostInfoMonitor);</span>
<a href="#l33.7"></a><span id="l33.7"> 			return rv;</span>
<a href="#l33.8"></a><span id="l33.8"> 		}</span>
<a href="#l33.9"></a><span id="l33.9"> 		else</span>
<a href="#l33.10"></a><span id="l33.10"> 		{</span>
<a href="#l33.11"></a><span id="l33.11"> 			PR_ExitMonitor(gCachedHostInfoMonitor);</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-			return false;</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+			return NS_OK;</span>
<a href="#l33.14"></a><span id="l33.14"> 		}</span>
<a href="#l33.15"></a><span id="l33.15"> 	}</span>
<a href="#l33.16"></a><span id="l33.16"> 	PR_ExitMonitor(gCachedHostInfoMonitor);</span>
<a href="#l33.17"></a><span id="l33.17"> 	return (host == NULL) ? NS_ERROR_ILLEGAL_VALUE : NS_OK;</span>
<a href="#l33.18"></a><span id="l33.18"> }</span>
<a href="#l33.19"></a><span id="l33.19"> </span>
<a href="#l33.20"></a><span id="l33.20"> NS_IMETHODIMP nsIMAPHostSessionList::FindShellInCacheForHost(const char *serverKey, const char *mailboxName, const char *UID,</span>
<a href="#l33.21"></a><span id="l33.21">                                                              IMAP_ContentModifiedType modType, nsIMAPBodyShell **shell)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapMailFolder.cpp</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -4992,17 +4992,17 @@ nsresult nsImapMailFolder::GetTrashFolde</span>
<a href="#l34.4"></a><span id="l34.4">   }</span>
<a href="#l34.5"></a><span id="l34.5">   return rv;</span>
<a href="#l34.6"></a><span id="l34.6"> }</span>
<a href="#l34.7"></a><span id="l34.7"> </span>
<a href="#l34.8"></a><span id="l34.8"> </span>
<a href="#l34.9"></a><span id="l34.9"> // store nsMsgMessageFlags::IMAPDeleted in the specified mailhdr records</span>
<a href="#l34.10"></a><span id="l34.10"> void nsImapMailFolder::SetIMAPDeletedFlag(nsIMsgDatabase *mailDB, const nsTArray&lt;nsMsgKey&gt; &amp;msgids, bool markDeleted)</span>
<a href="#l34.11"></a><span id="l34.11"> {</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-  nsresult markStatus = 0;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  nsresult markStatus = NS_OK;</span>
<a href="#l34.14"></a><span id="l34.14">   PRUint32 total = msgids.Length();</span>
<a href="#l34.15"></a><span id="l34.15"> </span>
<a href="#l34.16"></a><span id="l34.16">   for (PRUint32 msgIndex=0; !markStatus &amp;&amp; (msgIndex &lt; total); msgIndex++)</span>
<a href="#l34.17"></a><span id="l34.17">     markStatus = mailDB-&gt;MarkImapDeleted(msgids[msgIndex], markDeleted, nullptr);</span>
<a href="#l34.18"></a><span id="l34.18"> }</span>
<a href="#l34.19"></a><span id="l34.19"> </span>
<a href="#l34.20"></a><span id="l34.20"> NS_IMETHODIMP</span>
<a href="#l34.21"></a><span id="l34.21"> nsImapMailFolder::GetMessageSizeFromDB(const char * id, PRUint32 *size)</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineat">@@ -7033,17 +7033,17 @@ nsresult nsImapMailFolder::FindOpenRange</span>
<a href="#l34.23"></a><span id="l34.23"> nsresult nsImapMailFolder::CopyMessagesOffline(nsIMsgFolder* srcFolder,</span>
<a href="#l34.24"></a><span id="l34.24">                                nsIArray* messages,</span>
<a href="#l34.25"></a><span id="l34.25">                                bool isMove,</span>
<a href="#l34.26"></a><span id="l34.26">                                nsIMsgWindow *msgWindow,</span>
<a href="#l34.27"></a><span id="l34.27">                                nsIMsgCopyServiceListener* listener)</span>
<a href="#l34.28"></a><span id="l34.28"> {</span>
<a href="#l34.29"></a><span id="l34.29">   NS_ENSURE_ARG(messages);</span>
<a href="#l34.30"></a><span id="l34.30">   nsresult rv;</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-  nsresult stopit = 0;</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineplus">+  nsresult stopit = NS_OK;</span>
<a href="#l34.33"></a><span id="l34.33">   nsCOMPtr &lt;nsIMsgDatabase&gt; sourceMailDB;</span>
<a href="#l34.34"></a><span id="l34.34">   nsCOMPtr &lt;nsIDBFolderInfo&gt; srcDbFolderInfo;</span>
<a href="#l34.35"></a><span id="l34.35">   srcFolder-&gt;GetDBFolderInfoAndDB(getter_AddRefs(srcDbFolderInfo), getter_AddRefs(sourceMailDB));</span>
<a href="#l34.36"></a><span id="l34.36">   bool deleteToTrash = false;</span>
<a href="#l34.37"></a><span id="l34.37">   bool deleteImmediately = false;</span>
<a href="#l34.38"></a><span id="l34.38">   PRUint32 srcCount;</span>
<a href="#l34.39"></a><span id="l34.39">   messages-&gt;GetLength(&amp;srcCount);</span>
<a href="#l34.40"></a><span id="l34.40">   nsCOMPtr&lt;nsIImapIncomingServer&gt; imapServer;</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineat">@@ -7609,17 +7609,17 @@ nsImapMailFolder::CopyMessages(nsIMsgFol</span>
<a href="#l34.42"></a><span id="l34.42">       m_copyState-&gt;m_undoMsgTxn = undoMsgTxn;</span>
<a href="#l34.43"></a><span id="l34.43">     }</span>
<a href="#l34.44"></a><span id="l34.44"> </span>
<a href="#l34.45"></a><span id="l34.45">   }//endif</span>
<a href="#l34.46"></a><span id="l34.46">   </span>
<a href="#l34.47"></a><span id="l34.47"> done:</span>
<a href="#l34.48"></a><span id="l34.48">   if (NS_FAILED(rv))</span>
<a href="#l34.49"></a><span id="l34.49">   {</span>
<a href="#l34.50"></a><span id="l34.50" class="difflineminus">-    (void) OnCopyCompleted(srcSupport, false);</span>
<a href="#l34.51"></a><span id="l34.51" class="difflineplus">+    (void) OnCopyCompleted(srcSupport, NS_OK);</span>
<a href="#l34.52"></a><span id="l34.52">     if (isMove)</span>
<a href="#l34.53"></a><span id="l34.53">     {</span>
<a href="#l34.54"></a><span id="l34.54">       srcFolder-&gt;EnableNotifications(allMessageCountNotifications, true, true/* dbBatching*/);  //enable message count notification</span>
<a href="#l34.55"></a><span id="l34.55">       NotifyFolderEvent(mDeleteOrMoveMsgFailedAtom);</span>
<a href="#l34.56"></a><span id="l34.56">     }</span>
<a href="#l34.57"></a><span id="l34.57">   }</span>
<a href="#l34.58"></a><span id="l34.58">   return rv;</span>
<a href="#l34.59"></a><span id="l34.59"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mailnews/local/src/nsMailboxProtocol.cpp</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -723,12 +723,12 @@ nsresult nsMailboxProtocol::ProcessProto</span>
<a href="#l35.4"></a><span id="l35.4"> }</span>
<a href="#l35.5"></a><span id="l35.5"> </span>
<a href="#l35.6"></a><span id="l35.6"> nsresult nsMailboxProtocol::CloseSocket()</span>
<a href="#l35.7"></a><span id="l35.7"> {</span>
<a href="#l35.8"></a><span id="l35.8">   // how do you force a release when closing the connection??</span>
<a href="#l35.9"></a><span id="l35.9">   nsMsgProtocol::CloseSocket(); </span>
<a href="#l35.10"></a><span id="l35.10">   m_runningUrl = nullptr;</span>
<a href="#l35.11"></a><span id="l35.11">   m_mailboxParser = nullptr;</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-  return 0;</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  return NS_OK;</span>
<a href="#l35.14"></a><span id="l35.14"> }</span>
<a href="#l35.15"></a><span id="l35.15"> </span>
<a href="#l35.16"></a><span id="l35.16"> // vim: ts=2 sw=2</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mailnews/mime/src/mimemoz2.cpp</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mailnews/mime/src/mimemoz2.cpp</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -573,22 +573,22 @@ extern &quot;C&quot; nsresult</span>
<a href="#l36.4"></a><span id="l36.4"> MimeGetAttachmentList(MimeObject *tobj, const char *aMessageURL, nsMsgAttachmentData **data)</span>
<a href="#l36.5"></a><span id="l36.5"> {</span>
<a href="#l36.6"></a><span id="l36.6">   MimeObject            *obj;</span>
<a href="#l36.7"></a><span id="l36.7">   MimeContainer         *cobj;</span>
<a href="#l36.8"></a><span id="l36.8">   PRInt32               n;</span>
<a href="#l36.9"></a><span id="l36.9">   bool                  isAnInlineMessage;</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11">   if (!data)</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    return 0;</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+    return NS_OK;</span>
<a href="#l36.14"></a><span id="l36.14">   *data = nullptr;</span>
<a href="#l36.15"></a><span id="l36.15"> </span>
<a href="#l36.16"></a><span id="l36.16">   obj = mime_get_main_object(tobj);</span>
<a href="#l36.17"></a><span id="l36.17">   if (!obj)</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineminus">-    return 0;</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineplus">+    return NS_OK;</span>
<a href="#l36.20"></a><span id="l36.20"> </span>
<a href="#l36.21"></a><span id="l36.21">   if (!mime_subclass_p(obj-&gt;clazz, (MimeObjectClass*) &amp;mimeContainerClass))</span>
<a href="#l36.22"></a><span id="l36.22">     return ProcessBodyAsAttachment(obj, data);</span>
<a href="#l36.23"></a><span id="l36.23"> </span>
<a href="#l36.24"></a><span id="l36.24">   isAnInlineMessage = mime_typep(obj, (MimeObjectClass *) &amp;mimeMessageClass);</span>
<a href="#l36.25"></a><span id="l36.25"> </span>
<a href="#l36.26"></a><span id="l36.26">   cobj = (MimeContainer*) obj;</span>
<a href="#l36.27"></a><span id="l36.27">   n = CountTotalMimeAttachments(cobj);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mailnews/news/src/nsNNTPNewsgroupList.cpp</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -821,17 +821,17 @@ nsNNTPNewsgroupList::ProcessXOVERLINE(co</span>
<a href="#l37.4"></a><span id="l37.4">   return NS_OK;</span>
<a href="#l37.5"></a><span id="l37.5"> }</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7"> nsresult</span>
<a href="#l37.8"></a><span id="l37.8"> nsNNTPNewsgroupList::ResetXOVER()</span>
<a href="#l37.9"></a><span id="l37.9"> {</span>
<a href="#l37.10"></a><span id="l37.10">   m_lastMsgNumber = m_firstMsgNumber;</span>
<a href="#l37.11"></a><span id="l37.11">   m_lastProcessedNumber = m_lastMsgNumber;</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-  return 0;</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+  return NS_OK;</span>
<a href="#l37.14"></a><span id="l37.14"> }</span>
<a href="#l37.15"></a><span id="l37.15"> </span>
<a href="#l37.16"></a><span id="l37.16"> nsresult</span>
<a href="#l37.17"></a><span id="l37.17"> nsNNTPNewsgroupList::FinishXOVERLINE(int status, int *newstatus)</span>
<a href="#l37.18"></a><span id="l37.18"> {</span>
<a href="#l37.19"></a><span id="l37.19">   nsresult rv;</span>
<a href="#l37.20"></a><span id="l37.20">   struct MSG_NewsKnown* k;</span>
<a href="#l37.21"></a><span id="l37.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mailnews/news/src/nsNewsFolder.cpp</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -996,20 +996,20 @@ nsMsgNewsFolder::LoadNewsrcFileAndCreate</span>
<a href="#l38.4"></a><span id="l38.4">   if (NS_FAILED(rv)) return rv;</span>
<a href="#l38.5"></a><span id="l38.5"> </span>
<a href="#l38.6"></a><span id="l38.6">   if (!exists)</span>
<a href="#l38.7"></a><span id="l38.7">     // it is ok for the newsrc file to not exist yet</span>
<a href="#l38.8"></a><span id="l38.8">     return NS_OK;</span>
<a href="#l38.9"></a><span id="l38.9"> </span>
<a href="#l38.10"></a><span id="l38.10">   nsCOMPtr&lt;nsIInputStream&gt; fileStream;</span>
<a href="#l38.11"></a><span id="l38.11">   rv = NS_NewLocalFileInputStream(getter_AddRefs(fileStream), mNewsrcFilePath);</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+  NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l38.14"></a><span id="l38.14"> </span>
<a href="#l38.15"></a><span id="l38.15">   nsCOMPtr&lt;nsILineInputStream&gt; lineInputStream(do_QueryInterface(fileStream, &amp;rv));</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineminus">-  NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineplus">+  NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l38.18"></a><span id="l38.18"> </span>
<a href="#l38.19"></a><span id="l38.19">   bool more = true;</span>
<a href="#l38.20"></a><span id="l38.20">   nsCString line;</span>
<a href="#l38.21"></a><span id="l38.21"> </span>
<a href="#l38.22"></a><span id="l38.22">   while (more &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l38.23"></a><span id="l38.23">   {</span>
<a href="#l38.24"></a><span id="l38.24">     lineInputStream-&gt;ReadLine(line, &amp;more);</span>
<a href="#l38.25"></a><span id="l38.25">     if (line.IsEmpty())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mailnews/news/src/nsNntpIncomingServer.cpp</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mailnews/news/src/nsNntpIncomingServer.cpp</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -855,20 +855,20 @@ nsNntpIncomingServer::LoadHostInfoFile()</span>
<a href="#l39.4"></a><span id="l39.4">   rv = mHostInfoFile-&gt;Exists(&amp;exists);</span>
<a href="#l39.5"></a><span id="l39.5">   if (NS_FAILED(rv)) return rv;</span>
<a href="#l39.6"></a><span id="l39.6"> </span>
<a href="#l39.7"></a><span id="l39.7">   // it is ok if the hostinfo.dat file does not exist.</span>
<a href="#l39.8"></a><span id="l39.8">   if (!exists) return NS_OK;</span>
<a href="#l39.9"></a><span id="l39.9"> </span>
<a href="#l39.10"></a><span id="l39.10">   nsCOMPtr&lt;nsIInputStream&gt; fileStream;</span>
<a href="#l39.11"></a><span id="l39.11">   rv = NS_NewLocalFileInputStream(getter_AddRefs(fileStream), mHostInfoFile);</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-  NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+  NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15">   nsCOMPtr&lt;nsILineInputStream&gt; lineInputStream(do_QueryInterface(fileStream, &amp;rv));</span>
<a href="#l39.16"></a><span id="l39.16" class="difflineminus">-  NS_ENSURE_SUCCESS(rv, nullptr);</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineplus">+  NS_ENSURE_SUCCESS(rv, NS_OK);</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19">   bool more = true;</span>
<a href="#l39.20"></a><span id="l39.20">   nsCString line;</span>
<a href="#l39.21"></a><span id="l39.21"> </span>
<a href="#l39.22"></a><span id="l39.22">   while (more &amp;&amp; NS_SUCCEEDED(rv))</span>
<a href="#l39.23"></a><span id="l39.23">   {</span>
<a href="#l39.24"></a><span id="l39.24">     lineInputStream-&gt;ReadLine(line, &amp;more);</span>
<a href="#l39.25"></a><span id="l39.25">     if (line.IsEmpty())</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

