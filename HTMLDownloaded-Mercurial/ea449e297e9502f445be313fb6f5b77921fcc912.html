<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 1224:ea449e297e9502f445be313fb6f5b77921fcc912</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ ea449e297e9502f445be313fb6f5b77921fcc912" />
<meta property="og:url" content="/comm-central/rev/ea449e297e9502f445be313fb6f5b77921fcc912" />
<meta property="og:description" content="Bug 456818 messagereader: Collapsed view should show &quot;to&quot; information. [r=mkmelin,ui-review=clarkbw]" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / ea449e297e9502f445be313fb6f5b77921fcc912 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/ea449e297e9502f445be313fb6f5b77921fcc912">shortlog</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/ea449e297e9502f445be313fb6f5b77921fcc912">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912">files</a> |
changeset |
<a href="/comm-central/raw-rev/ea449e297e9502f445be313fb6f5b77921fcc912">raw</a>  | <a href="/comm-central/archive/ea449e297e9502f445be313fb6f5b77921fcc912.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=456818">Bug 456818</a> messagereader: Collapsed view should show &quot;to&quot; information. [r=mkmelin,ui-review=clarkbw]
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#68;&#97;&#118;&#105;&#100;&#32;&#65;&#115;&#99;&#104;&#101;&#114;&#32;&#60;&#100;&#97;&#118;&#105;&#100;&#46;&#97;&#115;&#99;&#104;&#101;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 25 Nov 2008 22:20:59 +0000</td></tr>

<tr>
 <td>changeset 1224</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/ea449e297e9502f445be313fb6f5b77921fcc912">ea449e297e9502f445be313fb6f5b77921fcc912</a></td>
</tr>



<tr>
<td>parent 1223</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/077a57083c7e4359f4f0505295d6111deeef3ca9">077a57083c7e4359f4f0505295d6111deeef3ca9</a>
</td>
</tr>

<tr>
<td>child 1225</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7ed6a4b1c9db6782b8727b81cac8d5f386608a93">7ed6a4b1c9db6782b8727b81cac8d5f386608a93</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=ea449e297e9502f445be313fb6f5b77921fcc912">949</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 25 Nov 2008 22:21:24 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@ea449e297e95 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ea449e297e9502f445be313fb6f5b77921fcc912">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ea449e297e9502f445be313fb6f5b77921fcc912&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ea449e297e9502f445be313fb6f5b77921fcc912&newProject=comm-central&newRevision=ea449e297e9502f445be313fb6f5b77921fcc912&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ea449e297e9502f445be313fb6f5b77921fcc912&newProject=comm-central&newRevision=ea449e297e9502f445be313fb6f5b77921fcc912&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ea449e297e9502f445be313fb6f5b77921fcc912&newProject=comm-central&newRevision=ea449e297e9502f445be313fb6f5b77921fcc912&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=456818">456818</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=456818">Bug 456818</a> messagereader: Collapsed view should show &quot;to&quot; information. [r=mkmelin,ui-review=clarkbw]</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messageWindow.xul">mail/base/content/messageWindow.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messageWindow.xul">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messageWindow.xul">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messageWindow.xul">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messageWindow.xul">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messageWindow.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.css">mail/base/content/messenger.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.css">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.css">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.css">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.css">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.xul">mail/base/content/messenger.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.xul">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.xul">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.xul">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.xul">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/messenger.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.xul">mail/base/content/msgHdrViewOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.xul">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.xul">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.xul">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.xul">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/base/content/msgHdrViewOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/pinstripe/mail/messageHeader.css">mail/themes/pinstripe/mail/messageHeader.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/pinstripe/mail/messageHeader.css">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/pinstripe/mail/messageHeader.css">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/pinstripe/mail/messageHeader.css">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/pinstripe/mail/messageHeader.css">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/pinstripe/mail/messageHeader.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/qute/mail/messageHeader.css">mail/themes/qute/mail/messageHeader.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/qute/mail/messageHeader.css">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/qute/mail/messageHeader.css">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/qute/mail/messageHeader.css">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/qute/mail/messageHeader.css">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mail/themes/qute/mail/messageHeader.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mailnews/base/resources/content/mailWidgets.xml">mailnews/base/resources/content/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea449e297e9502f445be313fb6f5b77921fcc912/mailnews/base/resources/content/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/ea449e297e9502f445be313fb6f5b77921fcc912/mailnews/base/resources/content/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/ea449e297e9502f445be313fb6f5b77921fcc912/mailnews/base/resources/content/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/ea449e297e9502f445be313fb6f5b77921fcc912/mailnews/base/resources/content/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/ea449e297e9502f445be313fb6f5b77921fcc912/mailnews/base/resources/content/mailWidgets.xml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1665,17 +1665,22 @@ function MsgJunk()</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5"> function UpdateJunkButton()</span>
<a href="#l1.6"></a><span id="l1.6"> {</span>
<a href="#l1.7"></a><span id="l1.7">   let hdr = gDBView.hdrForFirstSelectedMessage;</span>
<a href="#l1.8"></a><span id="l1.8">   let junkScore = hdr.getStringProperty(&quot;junkscore&quot;);</span>
<a href="#l1.9"></a><span id="l1.9">   let hideJunk = (junkScore != &quot;&quot;) &amp;&amp; (junkScore != &quot;0&quot;);</span>
<a href="#l1.10"></a><span id="l1.10">   if (isNewsURI(hdr.folder.URI))</span>
<a href="#l1.11"></a><span id="l1.11">     hideJunk = true;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  document.getElementById('junkButton').disabled = hideJunk;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  // which DOM node is the current junk button in the</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+  // message reader depends on whether it's the collapsed or</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+  // expanded header</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+  let buttonBox = document.getElementById(gCollapsedHeaderViewMode ?</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+                     &quot;collapsedButtonBox&quot; : &quot;expandedButtonBox&quot;);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+  buttonBox.getButton('hdrJunkButton').disabled = hideJunk;</span>
<a href="#l1.19"></a><span id="l1.19"> }</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21"> function MsgMarkMsgAsRead()</span>
<a href="#l1.22"></a><span id="l1.22"> {</span>
<a href="#l1.23"></a><span id="l1.23">   MarkSelectedMessagesRead(!SelectedMessagesAreRead());</span>
<a href="#l1.24"></a><span id="l1.24"> }</span>
<a href="#l1.25"></a><span id="l1.25"> </span>
<a href="#l1.26"></a><span id="l1.26"> function MsgMarkAsFlagged()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/messageWindow.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/messageWindow.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -110,41 +110,42 @@</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5">   &lt;keyset id=&quot;mailKeys&quot;&gt;</span>
<a href="#l2.6"></a><span id="l2.6">     &lt;keyset id=&quot;tasksKeys&quot;/&gt;</span>
<a href="#l2.7"></a><span id="l2.7">     &lt;key keycode=&quot;VK_ESCAPE&quot; oncommand=&quot;window.close();&quot;/&gt;</span>
<a href="#l2.8"></a><span id="l2.8">   &lt;/keyset&gt;</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10">   &lt;popupset&gt;</span>
<a href="#l2.11"></a><span id="l2.11">     &lt;panel id=&quot;editContactPanel&quot;/&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    &lt;popup id=&quot;emailAddressPopup&quot; popupanchor=&quot;bottomleft&quot;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-           onpopupshowing=&quot;setupEmailAddressPopup(document.popupNode.parentNode); goUpdateCommand('cmd_createFilterFromPopup')&quot;&gt;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+    &lt;popup id=&quot;emailAddressPopup&quot; class=&quot;emailAddressPopup&quot; position=&quot;after_start&quot;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+           onpopupshowing=&quot;setupEmailAddressPopup(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup')); goUpdateCommand('cmd_createFilterFromPopup')&quot;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+           onpopuphiding=&quot;hideEmailAddressPopup(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;&gt;</span>
<a href="#l2.17"></a><span id="l2.17">       &lt;menuitem id=&quot;emailAddressPlaceHolder&quot; label=&quot;&quot;</span>
<a href="#l2.18"></a><span id="l2.18">                 disabled=&quot;true&quot;/&gt;</span>
<a href="#l2.19"></a><span id="l2.19">       &lt;menuseparator/&gt;</span>
<a href="#l2.20"></a><span id="l2.20">       &lt;menuitem id=&quot;addToAddressBookItem&quot;</span>
<a href="#l2.21"></a><span id="l2.21">                 label=&quot;&amp;AddDirectlyToAddressBook.label;&quot;</span>
<a href="#l2.22"></a><span id="l2.22">                 accesskey=&quot;&amp;AddDirectlyToAddressBook.accesskey;&quot;</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-                oncommand=&quot;AddContact(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+                oncommand=&quot;AddContact(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l2.25"></a><span id="l2.25">       &lt;menuitem id=&quot;editContactItem&quot; label=&quot;&amp;EditContact.label;&quot; hidden=&quot;true&quot;</span>
<a href="#l2.26"></a><span id="l2.26">                 accesskey=&quot;&amp;EditContact.accesskey;&quot;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-                oncommand=&quot;EditContact(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+                oncommand=&quot;EditContact(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l2.29"></a><span id="l2.29">       &lt;menuitem id=&quot;viewContactItem&quot; label=&quot;&amp;ViewContact.label;&quot; hidden=&quot;true&quot;</span>
<a href="#l2.30"></a><span id="l2.30">                 accesskey=&quot;&amp;ViewContact.accesskey;&quot;</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-                oncommand=&quot;EditContact(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+                oncommand=&quot;EditContact(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l2.33"></a><span id="l2.33">       &lt;menuitem id=&quot;sendMailToItem&quot; label=&quot;&amp;SendMailTo.label;&quot;</span>
<a href="#l2.34"></a><span id="l2.34">                 accesskey=&quot;&amp;SendMailTo.accesskey;&quot;</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-                oncommand=&quot;SendMailToNode(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+                oncommand=&quot;SendMailToNode(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l2.37"></a><span id="l2.37">       &lt;menuitem id=&quot;copyEmailAddressItem&quot; label=&quot;&amp;CopyEmailAddress.label;&quot;</span>
<a href="#l2.38"></a><span id="l2.38">                 accesskey=&quot;&amp;CopyEmailAddress.accesskey;&quot;</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-                oncommand=&quot;CopyEmailAddress(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+                oncommand=&quot;CopyEmailAddress(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l2.41"></a><span id="l2.41">       &lt;menuseparator/&gt;</span>
<a href="#l2.42"></a><span id="l2.42">       &lt;menuitem id=&quot;createFilterFromItem&quot; label=&quot;&amp;CreateFilterFrom.label;&quot;</span>
<a href="#l2.43"></a><span id="l2.43">                 accesskey=&quot;&amp;CreateFilterFrom.accesskey;&quot;</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineminus">-                oncommand=&quot;CreateFilter(document.popupNode.parentNode)&quot;</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+                oncommand=&quot;CreateFilter(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;</span>
<a href="#l2.46"></a><span id="l2.46">                 observes=&quot;cmd_createFilterFromPopup&quot;/&gt;</span>
<a href="#l2.47"></a><span id="l2.47">     &lt;/popup&gt;</span>
<a href="#l2.48"></a><span id="l2.48"> </span>
<a href="#l2.49"></a><span id="l2.49">     &lt;popup id=&quot;messageIdContext&quot;/&gt;</span>
<a href="#l2.50"></a><span id="l2.50"> </span>
<a href="#l2.51"></a><span id="l2.51">     &lt;popup id=&quot;messagePaneContext&quot;/&gt;</span>
<a href="#l2.52"></a><span id="l2.52">   &lt;/popupset&gt;</span>
<a href="#l2.53"></a><span id="l2.53"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/messenger.css</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/messenger.css</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -201,16 +201,21 @@ folderSummary</span>
<a href="#l3.4"></a><span id="l3.4">   -moz-binding: url(&quot;chrome://messenger/content/mailWidgets.xml#folderSummary&quot;);</span>
<a href="#l3.5"></a><span id="l3.5"> }</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> folderSummaryMessage</span>
<a href="#l3.8"></a><span id="l3.8"> {</span>
<a href="#l3.9"></a><span id="l3.9">   -moz-binding: url(&quot;chrome://messenger/content/mailWidgets.xml#folderSummary-message&quot;);</span>
<a href="#l3.10"></a><span id="l3.10"> }</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+header-view-button-box</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+{</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+  -moz-binding: url(&quot;chrome://messenger/content/mailWidgets.xml#header-view-button-box&quot;);</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+}</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+</span>
<a href="#l3.17"></a><span id="l3.17"> .foldersTree</span>
<a href="#l3.18"></a><span id="l3.18"> {</span>
<a href="#l3.19"></a><span id="l3.19">   margin: 0px;</span>
<a href="#l3.20"></a><span id="l3.20">   border: none;</span>
<a href="#l3.21"></a><span id="l3.21">   -moz-user-focus: ignore;</span>
<a href="#l3.22"></a><span id="l3.22"> }</span>
<a href="#l3.23"></a><span id="l3.23"> </span>
<a href="#l3.24"></a><span id="l3.24"> .foldersTreeChildren</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/messenger.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/messenger.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -132,41 +132,42 @@</span>
<a href="#l4.4"></a><span id="l4.4"> &lt;popup id=&quot;threadPaneContext&quot;/&gt;</span>
<a href="#l4.5"></a><span id="l4.5"> &lt;popup id=&quot;folderPaneContext&quot;/&gt;</span>
<a href="#l4.6"></a><span id="l4.6"> &lt;popup id=&quot;attachmentListContext&quot;/&gt;</span>
<a href="#l4.7"></a><span id="l4.7"> &lt;popup id=&quot;copyUrlPopup&quot;/&gt;</span>
<a href="#l4.8"></a><span id="l4.8"> &lt;popup id=&quot;toolbar-context-menu&quot;/&gt;</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10"> &lt;tooltip id=&quot;attachmentListTooltip&quot;/&gt;</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-&lt;popup id=&quot;emailAddressPopup&quot; popupanchor=&quot;bottomleft&quot;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-       onpopupshowing=&quot;setupEmailAddressPopup(document.popupNode.parentNode); goUpdateCommand('cmd_createFilterFromPopup')&quot;&gt;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-    &lt;menuitem id=&quot;emailAddressPlaceHolder&quot; label=&quot;&quot;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+&lt;popup id=&quot;emailAddressPopup&quot; position=&quot;after_start&quot; class=&quot;emailAddressPopup&quot;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+       onpopupshowing=&quot;setupEmailAddressPopup(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup')); goUpdateCommand('cmd_createFilterFromPopup')&quot;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+       onpopuphiding=&quot;hideEmailAddressPopup(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'));&quot;&gt;</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+    &lt;menuitem id=&quot;emailAddressPlaceHolder&quot;</span>
<a href="#l4.19"></a><span id="l4.19">               disabled=&quot;true&quot;/&gt;</span>
<a href="#l4.20"></a><span id="l4.20">     &lt;menuseparator/&gt;</span>
<a href="#l4.21"></a><span id="l4.21">     &lt;menuitem id=&quot;addToAddressBookItem&quot;</span>
<a href="#l4.22"></a><span id="l4.22">               label=&quot;&amp;AddDirectlyToAddressBook.label;&quot;</span>
<a href="#l4.23"></a><span id="l4.23">               accesskey=&quot;&amp;AddDirectlyToAddressBook.accesskey;&quot;</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-              oncommand=&quot;AddContact(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+              oncommand=&quot;AddContact(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l4.26"></a><span id="l4.26">     &lt;menuitem id=&quot;editContactItem&quot; label=&quot;&amp;EditContact.label;&quot; hidden=&quot;true&quot;</span>
<a href="#l4.27"></a><span id="l4.27">               accesskey=&quot;&amp;EditContact.accesskey;&quot;</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-              oncommand=&quot;EditContact(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+              oncommand=&quot;EditContact(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l4.30"></a><span id="l4.30">     &lt;menuitem id=&quot;viewContactItem&quot; label=&quot;&amp;ViewContact.label;&quot; hidden=&quot;true&quot;</span>
<a href="#l4.31"></a><span id="l4.31">               accesskey=&quot;&amp;ViewContact.accesskey;&quot;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-              oncommand=&quot;EditContact(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+              oncommand=&quot;EditContact(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l4.34"></a><span id="l4.34">     &lt;menuitem id=&quot;sendMailToItem&quot; label=&quot;&amp;SendMailTo.label;&quot;</span>
<a href="#l4.35"></a><span id="l4.35">               accesskey=&quot;&amp;SendMailTo.accesskey;&quot;</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-              oncommand=&quot;SendMailToNode(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+              oncommand=&quot;SendMailToNode(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l4.38"></a><span id="l4.38">     &lt;menuitem id=&quot;copyEmailAddressItem&quot; label=&quot;&amp;CopyEmailAddress.label;&quot;</span>
<a href="#l4.39"></a><span id="l4.39">               accesskey=&quot;&amp;CopyEmailAddress.accesskey;&quot;</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-              oncommand=&quot;CopyEmailAddress(document.popupNode.parentNode)&quot;/&gt;</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+              oncommand=&quot;CopyEmailAddress(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;/&gt;</span>
<a href="#l4.42"></a><span id="l4.42">     &lt;menuseparator/&gt;</span>
<a href="#l4.43"></a><span id="l4.43">     &lt;menuitem id=&quot;createFilterFromItem&quot; label=&quot;&amp;CreateFilterFrom.label;&quot;</span>
<a href="#l4.44"></a><span id="l4.44">               accesskey=&quot;&amp;CreateFilterFrom.accesskey;&quot;</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-              oncommand=&quot;CreateFilter(document.popupNode.parentNode)&quot;</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineplus">+              oncommand=&quot;CreateFilter(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'))&quot;</span>
<a href="#l4.47"></a><span id="l4.47">               observes=&quot;cmd_createFilterFromPopup&quot;/&gt;</span>
<a href="#l4.48"></a><span id="l4.48"> &lt;/popup&gt;</span>
<a href="#l4.49"></a><span id="l4.49"> </span>
<a href="#l4.50"></a><span id="l4.50"> &lt;popup id=&quot;messageIdContext&quot;/&gt;</span>
<a href="#l4.51"></a><span id="l4.51"> </span>
<a href="#l4.52"></a><span id="l4.52"> &lt;tooltip id=&quot;folderpopup&quot; class=&quot;folderSummaryPopup&quot;/&gt;</span>
<a href="#l4.53"></a><span id="l4.53"> </span>
<a href="#l4.54"></a><span id="l4.54"> &lt;popup id=&quot;messagePaneContext&quot;/&gt;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineat">@@ -342,8 +343,9 @@</span>
<a href="#l4.56"></a><span id="l4.56">   &lt;/panel&gt;</span>
<a href="#l4.57"></a><span id="l4.57"> #endif</span>
<a href="#l4.58"></a><span id="l4.58"> </span>
<a href="#l4.59"></a><span id="l4.59">   &lt;statusbar id=&quot;status-bar&quot; class=&quot;chromeclass-status&quot;&gt;</span>
<a href="#l4.60"></a><span id="l4.60">     &lt;statusbarpanel id=&quot;unreadMessageCount&quot;/&gt;</span>
<a href="#l4.61"></a><span id="l4.61">     &lt;statusbarpanel id=&quot;totalMessageCount&quot;/&gt;</span>
<a href="#l4.62"></a><span id="l4.62">   &lt;/statusbar&gt;</span>
<a href="#l4.63"></a><span id="l4.63"> &lt;/window&gt;</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -89,17 +89,20 @@ var gMessageListeners = new Array();</span>
<a href="#l5.4"></a><span id="l5.4"> // outputFunction: this is a method which takes a headerEntry (see the definition below) and a header value</span>
<a href="#l5.5"></a><span id="l5.5"> //                 This allows you to provide your own methods for actually determining how the header value</span>
<a href="#l5.6"></a><span id="l5.6"> //                 is displayed. (DEFAULT: updateHeaderValue which just sets the header value on the text node)</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8"> // Our first view is the collapsed view. This is very light weight view of the data. We only show a couple</span>
<a href="#l5.9"></a><span id="l5.9"> // fields.</span>
<a href="#l5.10"></a><span id="l5.10"> var gCollapsedHeaderList = [ {name:&quot;subject&quot;, outputFunction:updateHeaderValueInTextNode},</span>
<a href="#l5.11"></a><span id="l5.11">                              {name:&quot;from&quot;, useToggle:true, useShortView:true, outputFunction:OutputEmailAddresses},</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-                             {name:&quot;date&quot;, outputFunction:updateHeaderValueInTextNode}];</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+                             {name:&quot;toCcBcc&quot;, useToggle:true,</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+                              useShortView:true,</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+                              outputFunction: OutputEmailAddresses},</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+                             {name:&quot;date&quot;, outputFunction:OutputDate}];</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18"> // We also have an expanded header view. This shows many of your more common (and useful) headers.</span>
<a href="#l5.19"></a><span id="l5.19"> var gExpandedHeaderList = [ {name:&quot;subject&quot;},</span>
<a href="#l5.20"></a><span id="l5.20">                             {name:&quot;from&quot;, useToggle:true, outputFunction:OutputEmailAddresses},</span>
<a href="#l5.21"></a><span id="l5.21">                             {name:&quot;reply-to&quot;, useToggle:true, outputFunction:OutputEmailAddresses},</span>
<a href="#l5.22"></a><span id="l5.22">                             {name:&quot;date&quot;},</span>
<a href="#l5.23"></a><span id="l5.23">                             {name:&quot;to&quot;, useToggle:true, outputFunction:OutputEmailAddresses},</span>
<a href="#l5.24"></a><span id="l5.24">                             {name:&quot;cc&quot;, useToggle:true, outputFunction:OutputEmailAddresses},</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineat">@@ -116,17 +119,17 @@ var gExpandedHeaderList = [ {name:&quot;subje</span>
<a href="#l5.26"></a><span id="l5.26"> // For the moment, display of those things when the user has touched that pref</span>
<a href="#l5.27"></a><span id="l5.27"> // is untested.  It might Just Work as a generic extended header.</span>
<a href="#l5.28"></a><span id="l5.28"> var extraExpandedHeaderList = [ {name:&quot;sender&quot;, outputFunction:OutputEmailAddresses},                            </span>
<a href="#l5.29"></a><span id="l5.29">                                 {name:&quot;references&quot;, outputFunction:OutputMessageIds} ];</span>
<a href="#l5.30"></a><span id="l5.30"> </span>
<a href="#l5.31"></a><span id="l5.31"> // These are all the items that use a mail-multi-emailHeaderField widget and</span>
<a href="#l5.32"></a><span id="l5.32"> // therefore may require updating if the address book changes.</span>
<a href="#l5.33"></a><span id="l5.33"> const gEmailAddressHeaderNames = [&quot;from&quot;, &quot;reply-to&quot;,</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-                                  &quot;to&quot;, &quot;cc&quot;, &quot;bcc&quot;];</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+                                  &quot;to&quot;, &quot;cc&quot;, &quot;bcc&quot;, &quot;toCcBcc&quot;];</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37"> // Now, for each view the message pane can generate, we need a global table of headerEntries. These</span>
<a href="#l5.38"></a><span id="l5.38"> // header entry objects are generated dynamically based on the static date in the header lists (see above)</span>
<a href="#l5.39"></a><span id="l5.39"> // and elements we find in the DOM based on properties in the header lists.</span>
<a href="#l5.40"></a><span id="l5.40"> var gCollapsedHeaderView = {};</span>
<a href="#l5.41"></a><span id="l5.41"> var gExpandedHeaderView  = {};</span>
<a href="#l5.42"></a><span id="l5.42"> </span>
<a href="#l5.43"></a><span id="l5.43"> // currentHeaderData --&gt; this is an array of header name and value pairs for the currently displayed message.</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineat">@@ -771,17 +774,17 @@ function updateHeaderViews()</span>
<a href="#l5.45"></a><span id="l5.45">   if (gCollapsedHeaderViewMode)</span>
<a href="#l5.46"></a><span id="l5.46">     showHeaderView(gCollapsedHeaderView);</span>
<a href="#l5.47"></a><span id="l5.47">   else</span>
<a href="#l5.48"></a><span id="l5.48">   {</span>
<a href="#l5.49"></a><span id="l5.49">     if (gMinNumberOfHeaders)</span>
<a href="#l5.50"></a><span id="l5.50">       EnsureMinimumNumberOfHeaders(gExpandedHeaderView);</span>
<a href="#l5.51"></a><span id="l5.51">     showHeaderView(gExpandedHeaderView);</span>
<a href="#l5.52"></a><span id="l5.52">   }</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+  UpdateJunkButton();</span>
<a href="#l5.55"></a><span id="l5.55">   displayAttachmentsForExpandedView();</span>
<a href="#l5.56"></a><span id="l5.56"> }</span>
<a href="#l5.57"></a><span id="l5.57"> </span>
<a href="#l5.58"></a><span id="l5.58"> function ToggleHeaderView ()</span>
<a href="#l5.59"></a><span id="l5.59"> {</span>
<a href="#l5.60"></a><span id="l5.60">   gCollapsedHeaderViewMode = !gCollapsedHeaderViewMode;</span>
<a href="#l5.61"></a><span id="l5.61">   // Work around a xul deck bug where the height of the deck is determined by the tallest panel in the deck</span>
<a href="#l5.62"></a><span id="l5.62">   // even if that panel is not selected...</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineat">@@ -799,21 +802,17 @@ function ToggleHeaderView ()</span>
<a href="#l5.64"></a><span id="l5.64"> // default method for updating a header value into a header entry</span>
<a href="#l5.65"></a><span id="l5.65"> function updateHeaderValue(headerEntry, headerValue)</span>
<a href="#l5.66"></a><span id="l5.66"> {</span>
<a href="#l5.67"></a><span id="l5.67">   headerEntry.enclosingBox.headerValue = headerValue;</span>
<a href="#l5.68"></a><span id="l5.68"> }</span>
<a href="#l5.69"></a><span id="l5.69"> </span>
<a href="#l5.70"></a><span id="l5.70"> function updateHeaderValueInTextNode(headerEntry, headerValue)</span>
<a href="#l5.71"></a><span id="l5.71"> {</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineminus">-  try {</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineminus">-      headerEntry.textNode.value = headerValue;</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineminus">-  } catch (e) {</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineminus">-    dump(&quot;headerEntry = &quot; + headerEntry + &quot; and headerValue = &quot; + headerValue + '\n')</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineminus">-  }</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+  headerEntry.textNode.value = headerValue;</span>
<a href="#l5.78"></a><span id="l5.78"> }</span>
<a href="#l5.79"></a><span id="l5.79"> </span>
<a href="#l5.80"></a><span id="l5.80"> function createNewHeaderView(headerName, label)</span>
<a href="#l5.81"></a><span id="l5.81"> {</span>
<a href="#l5.82"></a><span id="l5.82">   var idName = 'expanded' + headerName + 'Box';</span>
<a href="#l5.83"></a><span id="l5.83">   var newHeader = document.createElement(&quot;mail-headerfield&quot;);</span>
<a href="#l5.84"></a><span id="l5.84"> </span>
<a href="#l5.85"></a><span id="l5.85">   newHeader.setAttribute('id', idName);</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineat">@@ -861,18 +860,20 @@ function UpdateMessageHeaders()</span>
<a href="#l5.87"></a><span id="l5.87">             folder = GetMsgFolderFromUri(gCurrentFolderUri);</span>
<a href="#l5.88"></a><span id="l5.88">           setTitleFromFolder(folder, headerField.headerValue);</span>
<a href="#l5.89"></a><span id="l5.89">         }</span>
<a href="#l5.90"></a><span id="l5.90">       } catch (ex) {}</span>
<a href="#l5.91"></a><span id="l5.91">     }</span>
<a href="#l5.92"></a><span id="l5.92"> </span>
<a href="#l5.93"></a><span id="l5.93">     if (gCollapsedHeaderViewMode &amp;&amp; !gBuiltCollapsedView)</span>
<a href="#l5.94"></a><span id="l5.94">     {</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineminus">-      if (headerName in gCollapsedHeaderView)</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineminus">-      headerEntry = gCollapsedHeaderView[headerName];</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+      if (headerName == &quot;cc&quot; || headerName == &quot;to&quot; || headerName == &quot;bcc&quot;)</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+        headerEntry = gCollapsedHeaderView[&quot;toCcBcc&quot;];</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+      else if (headerName in gCollapsedHeaderView)</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+        headerEntry = gCollapsedHeaderView[headerName];</span>
<a href="#l5.101"></a><span id="l5.101">     }</span>
<a href="#l5.102"></a><span id="l5.102">     else if (!gCollapsedHeaderViewMode &amp;&amp; !gBuiltExpandedView)</span>
<a href="#l5.103"></a><span id="l5.103">     {</span>
<a href="#l5.104"></a><span id="l5.104">       if (headerName in gExpandedHeaderView)</span>
<a href="#l5.105"></a><span id="l5.105">        headerEntry = gExpandedHeaderView[headerName];</span>
<a href="#l5.106"></a><span id="l5.106"> </span>
<a href="#l5.107"></a><span id="l5.107">       if (!headerEntry &amp;&amp; gViewAllHeaders)</span>
<a href="#l5.108"></a><span id="l5.108">       {</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineat">@@ -968,16 +969,27 @@ function OutputMessageIds(headerEntry, h</span>
<a href="#l5.110"></a><span id="l5.110"> </span>
<a href="#l5.111"></a><span id="l5.111">   headerEntry.enclosingBox.clearHeaderValues();</span>
<a href="#l5.112"></a><span id="l5.112">   for (var i = 0; i &lt; messageIdArray.length; i++)</span>
<a href="#l5.113"></a><span id="l5.113">     headerEntry.enclosingBox.addMessageIdView(messageIdArray[i]);</span>
<a href="#l5.114"></a><span id="l5.114"> </span>
<a href="#l5.115"></a><span id="l5.115">   headerEntry.enclosingBox.fillMessageIdNodes();</span>
<a href="#l5.116"></a><span id="l5.116"> }</span>
<a href="#l5.117"></a><span id="l5.117"> </span>
<a href="#l5.118"></a><span id="l5.118" class="difflineplus">+function OutputDate(headerEntry, headerValue)</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineplus">+{</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineplus">+  headerEntry.textNode.value = headerValue;</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineplus">+  // The date field is a textbox, and we want it to be as small as possible to</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineplus">+  // not take space from the subject textbox. This is a bit bigger than</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineplus">+  // necessary, but guaranteed to fit. We should move to not using textboxes</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineplus">+  // because of these sizing problems, and instead figure out selectable</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineplus">+  // labels.</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineplus">+  headerEntry.textNode.setAttribute(&quot;size&quot;, Math.round(headerValue.length * 1.2));</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+}</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineplus">+</span>
<a href="#l5.129"></a><span id="l5.129"> // OutputEmailAddresses --&gt; knows how to take a comma separated list of email addresses,</span>
<a href="#l5.130"></a><span id="l5.130"> // extracts them one by one, linkifying each email address into a mailto url.</span>
<a href="#l5.131"></a><span id="l5.131"> // Then we add the link-ified email address to the parentDiv passed in.</span>
<a href="#l5.132"></a><span id="l5.132"> //</span>
<a href="#l5.133"></a><span id="l5.133"> // emailAddresses --&gt; comma separated list of the addresses for this header field</span>
<a href="#l5.134"></a><span id="l5.134"> </span>
<a href="#l5.135"></a><span id="l5.135"> function OutputEmailAddresses(headerEntry, emailAddresses)</span>
<a href="#l5.136"></a><span id="l5.136"> {</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineat">@@ -1029,27 +1041,37 @@ function AddExtraAddressProcessing(email</span>
<a href="#l5.138"></a><span id="l5.138">   // Always get the card details so we can show add or edit menu options.</span>
<a href="#l5.139"></a><span id="l5.139">   var cardDetails = getCardForEmail(emailAddress);</span>
<a href="#l5.140"></a><span id="l5.140">   documentNode.cardDetails = cardDetails;</span>
<a href="#l5.141"></a><span id="l5.141"> </span>
<a href="#l5.142"></a><span id="l5.142">   if (!cardDetails.card) {</span>
<a href="#l5.143"></a><span id="l5.143">     documentNode.setAttribute(&quot;hascard&quot;, &quot;false&quot;);</span>
<a href="#l5.144"></a><span id="l5.144">     documentNode.setAttribute(&quot;tooltipstar&quot;,</span>
<a href="#l5.145"></a><span id="l5.145">       document.getElementById(&quot;addToAddressBookItem&quot;).label);</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineminus">-    return;</span>
<a href="#l5.147"></a><span id="l5.147">   }</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineminus">-</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineminus">-  documentNode.setAttribute(&quot;hascard&quot;, &quot;true&quot;);</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineminus">-  documentNode.setAttribute(&quot;tooltipstar&quot;,</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineminus">-    document.getElementById(&quot;editContactItem&quot;).label);</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineplus">+  else {</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineplus">+    documentNode.setAttribute(&quot;hascard&quot;, &quot;true&quot;);</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineplus">+    documentNode.setAttribute(&quot;tooltipstar&quot;,</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineplus">+      document.getElementById(&quot;editContactItem&quot;).label);</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineplus">+  }</span>
<a href="#l5.157"></a><span id="l5.157"> </span>
<a href="#l5.158"></a><span id="l5.158">   if (!gShowCondensedEmailAddresses)</span>
<a href="#l5.159"></a><span id="l5.159">     return;</span>
<a href="#l5.160"></a><span id="l5.160"> </span>
<a href="#l5.161"></a><span id="l5.161" class="difflineminus">-  var displayName = cardDetails.card.displayName;</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineplus">+  var displayName;</span>
<a href="#l5.163"></a><span id="l5.163" class="difflineplus">+  var identity = getBestIdentity(accountManager.allIdentities);</span>
<a href="#l5.164"></a><span id="l5.164" class="difflineplus">+  if (emailAddress == identity.email) {</span>
<a href="#l5.165"></a><span id="l5.165" class="difflineplus">+    displayName = gMessengerBundle.getString(&quot;headerFieldYou&quot;);</span>
<a href="#l5.166"></a><span id="l5.166" class="difflineplus">+  }</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineplus">+  else</span>
<a href="#l5.168"></a><span id="l5.168" class="difflineplus">+  {</span>
<a href="#l5.169"></a><span id="l5.169" class="difflineplus">+    if (!cardDetails.card)</span>
<a href="#l5.170"></a><span id="l5.170" class="difflineplus">+      return;</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineplus">+    displayName = cardDetails.card.displayName;</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineplus">+  }</span>
<a href="#l5.173"></a><span id="l5.173"> </span>
<a href="#l5.174"></a><span id="l5.174">   if (!displayName)</span>
<a href="#l5.175"></a><span id="l5.175">     return;</span>
<a href="#l5.176"></a><span id="l5.176"> </span>
<a href="#l5.177"></a><span id="l5.177">   documentNode.setAttribute(&quot;label&quot;, displayName);</span>
<a href="#l5.178"></a><span id="l5.178">   documentNode.setAttribute(&quot;tooltiptext&quot;, emailAddress);</span>
<a href="#l5.179"></a><span id="l5.179"> }</span>
<a href="#l5.180"></a><span id="l5.180"> </span>
<a href="#l5.181"></a><span id="l5.181" class="difflineat">@@ -1107,17 +1129,17 @@ function UpdateExtraAddressProcessing(aA</span>
<a href="#l5.182"></a><span id="l5.182">       aDocumentNode.cardDetails.card = aItem;</span>
<a href="#l5.183"></a><span id="l5.183">       var displayName = aItem.displayName;</span>
<a href="#l5.184"></a><span id="l5.184"> </span>
<a href="#l5.185"></a><span id="l5.185">       if (gShowCondensedEmailAddresses &amp;&amp; displayName)</span>
<a href="#l5.186"></a><span id="l5.186">         aDocumentNode.setAttribute(&quot;label&quot;, displayName);</span>
<a href="#l5.187"></a><span id="l5.187">       else</span>
<a href="#l5.188"></a><span id="l5.188">         aDocumentNode.setAttribute(&quot;label&quot;,</span>
<a href="#l5.189"></a><span id="l5.189">                                    aDocumentNode.getAttribute(&quot;fullAddress&quot;) ||</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineminus">-                                   aDocumentNode.getAttriubte(&quot;displayName&quot;));</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineplus">+                                   aDocumentNode.getAttribute(&quot;displayName&quot;));</span>
<a href="#l5.192"></a><span id="l5.192">     }</span>
<a href="#l5.193"></a><span id="l5.193">     break;</span>
<a href="#l5.194"></a><span id="l5.194">   case nsIAbListener.itemAdded:</span>
<a href="#l5.195"></a><span id="l5.195">     // Is it a new address book?</span>
<a href="#l5.196"></a><span id="l5.196">     if (aItem instanceof Components.interfaces.nsIAbDirectory) {</span>
<a href="#l5.197"></a><span id="l5.197">       // If we don't have a match, search again for updates (e.g. a interface</span>
<a href="#l5.198"></a><span id="l5.198">       // to an existing book may just have been added).</span>
<a href="#l5.199"></a><span id="l5.199">       if (!aDocumentNode.cardDetails.card)</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineat">@@ -1149,21 +1171,45 @@ function UpdateExtraAddressProcessing(aA</span>
<a href="#l5.201"></a><span id="l5.201">     break;</span>
<a href="#l5.202"></a><span id="l5.202">   case nsIAbListener.directoryRemoved:</span>
<a href="#l5.203"></a><span id="l5.203">     if (aDocumentNode.cardDetails.book == aItem)</span>
<a href="#l5.204"></a><span id="l5.204">       UpdateEmailNodeDetails(aAddressData.emailAddress, aDocumentNode);</span>
<a href="#l5.205"></a><span id="l5.205">     break;</span>
<a href="#l5.206"></a><span id="l5.206">   }</span>
<a href="#l5.207"></a><span id="l5.207"> }</span>
<a href="#l5.208"></a><span id="l5.208"> </span>
<a href="#l5.209"></a><span id="l5.209" class="difflineplus">+function findEmailNodeFromPopupNode(elt, popup)</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineplus">+{</span>
<a href="#l5.211"></a><span id="l5.211" class="difflineplus">+  // This annoying little function is needed because in the binding for</span>
<a href="#l5.212"></a><span id="l5.212" class="difflineplus">+  // mail-emailaddress, we set the context on the &lt;description&gt;, but that if</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineplus">+  // the user clicks on the label, then popupNode is set to it, rather than</span>
<a href="#l5.214"></a><span id="l5.214" class="difflineplus">+  // the description.  So we have walk up the parent until we find the</span>
<a href="#l5.215"></a><span id="l5.215" class="difflineplus">+  // element with the popup set, and then return its parent.</span>
<a href="#l5.216"></a><span id="l5.216" class="difflineplus">+  </span>
<a href="#l5.217"></a><span id="l5.217" class="difflineplus">+  while (elt.getAttribute(&quot;popup&quot;) != popup)</span>
<a href="#l5.218"></a><span id="l5.218" class="difflineplus">+  {</span>
<a href="#l5.219"></a><span id="l5.219" class="difflineplus">+    elt = elt.parentNode;</span>
<a href="#l5.220"></a><span id="l5.220" class="difflineplus">+    if (elt == null)</span>
<a href="#l5.221"></a><span id="l5.221" class="difflineplus">+      return null;</span>
<a href="#l5.222"></a><span id="l5.222" class="difflineplus">+  }</span>
<a href="#l5.223"></a><span id="l5.223" class="difflineplus">+  return elt.parentNode;</span>
<a href="#l5.224"></a><span id="l5.224" class="difflineplus">+}</span>
<a href="#l5.225"></a><span id="l5.225" class="difflineplus">+</span>
<a href="#l5.226"></a><span id="l5.226" class="difflineplus">+function hideEmailAddressPopup(emailAddressNode)</span>
<a href="#l5.227"></a><span id="l5.227" class="difflineplus">+{</span>
<a href="#l5.228"></a><span id="l5.228" class="difflineplus">+  // highlight the emailBox</span>
<a href="#l5.229"></a><span id="l5.229" class="difflineplus">+  emailAddressNode.removeAttribute('selected');</span>
<a href="#l5.230"></a><span id="l5.230" class="difflineplus">+}</span>
<a href="#l5.231"></a><span id="l5.231" class="difflineplus">+</span>
<a href="#l5.232"></a><span id="l5.232"> function setupEmailAddressPopup(emailAddressNode)</span>
<a href="#l5.233"></a><span id="l5.233"> {</span>
<a href="#l5.234"></a><span id="l5.234" class="difflineplus">+    dump(&quot;emailAddressNode.tagName = &quot; + emailAddressNode.tagName + '\n');</span>
<a href="#l5.235"></a><span id="l5.235">   var emailAddressPlaceHolder = document.getElementById('emailAddressPlaceHolder');</span>
<a href="#l5.236"></a><span id="l5.236" class="difflineminus">-  var emailAddress = emailAddressNode.getAttribute('emailAddress');</span>
<a href="#l5.237"></a><span id="l5.237" class="difflineminus">-</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineplus">+  var emailAddress = emailAddressNode.getPart('emaillabel').value;</span>
<a href="#l5.239"></a><span id="l5.239" class="difflineplus">+  emailAddressNode.setAttribute('selected', 'true');</span>
<a href="#l5.240"></a><span id="l5.240">   emailAddressPlaceHolder.setAttribute('label', emailAddress);</span>
<a href="#l5.241"></a><span id="l5.241"> </span>
<a href="#l5.242"></a><span id="l5.242">   if (emailAddressNode.cardDetails.card) {</span>
<a href="#l5.243"></a><span id="l5.243">     document.getElementById('addToAddressBookItem').setAttribute('hidden', true);</span>
<a href="#l5.244"></a><span id="l5.244">     if (!emailAddressNode.cardDetails.book.readOnly) {</span>
<a href="#l5.245"></a><span id="l5.245">       document.getElementById('editContactItem').removeAttribute('hidden');</span>
<a href="#l5.246"></a><span id="l5.246">       document.getElementById('viewContactItem').setAttribute('hidden', true);</span>
<a href="#l5.247"></a><span id="l5.247">     }</span>
<a href="#l5.248"></a><span id="l5.248" class="difflineat">@@ -1909,8 +1955,9 @@ nsDummyMsgHeader.prototype =</span>
<a href="#l5.249"></a><span id="l5.249">   recipients : null,</span>
<a href="#l5.250"></a><span id="l5.250">   from : null,</span>
<a href="#l5.251"></a><span id="l5.251">   subject : null,</span>
<a href="#l5.252"></a><span id="l5.252">   ccList : null,</span>
<a href="#l5.253"></a><span id="l5.253">   messageId : null,</span>
<a href="#l5.254"></a><span id="l5.254">   accountKey : &quot;&quot;,</span>
<a href="#l5.255"></a><span id="l5.255">   folder : null</span>
<a href="#l5.256"></a><span id="l5.256"> };</span>
<a href="#l5.257"></a><span id="l5.257" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.xul</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.xul</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -98,142 +98,136 @@</span>
<a href="#l6.4"></a><span id="l6.4"> &lt;popup id=&quot;copyUrlPopup&quot; popupanchor=&quot;bottomleft&quot;&gt;</span>
<a href="#l6.5"></a><span id="l6.5">   &lt;menuitem label=&quot;&amp;copyLinkCmd.label;&quot; accesskey=&quot;&amp;copyLinkCmd.accesskey;&quot; oncommand=&quot;CopyWebsiteAddress(document.popupNode)&quot;/&gt;</span>
<a href="#l6.6"></a><span id="l6.6"> &lt;/popup&gt;</span>
<a href="#l6.7"></a><span id="l6.7"> </span>
<a href="#l6.8"></a><span id="l6.8"> &lt;hbox id=&quot;msgHeaderView&quot; collapsed=&quot;true&quot; class=&quot;main-header-area&quot;&gt;</span>
<a href="#l6.9"></a><span id="l6.9">   &lt;deck id=&quot;msgHeaderViewDeck&quot; persist=&quot;selectedIndex&quot; selectedIndex=&quot;1&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.10"></a><span id="l6.10">     &lt;!-- the message pane consists of 4 'boxes'. Box #1 is a grid, showing a brief view of the headers --&gt;</span>
<a href="#l6.11"></a><span id="l6.11">     &lt;vbox id=&quot;collapsedHeaderView&quot; class=&quot;header-part1 headerContainer&quot; flex=&quot;1&quot; pack=&quot;start&quot;&gt;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-      &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-        &lt;hbox id=&quot;collapsedfromBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-          &lt;hbox&gt;</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+      &lt;hbox align=&quot;baseline&quot;&gt;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+        &lt;hbox id=&quot;collapsedfromBox&quot; align=&quot;baseline&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.17"></a><span id="l6.17">             &lt;mail-multi-emailHeaderField id=&quot;collapsedfromValue&quot;</span>
<a href="#l6.18"></a><span id="l6.18">                                          pack=&quot;start&quot;</span>
<a href="#l6.19"></a><span id="l6.19">                                          class=&quot;collapsedHeaderDisplayName&quot;</span>
<a href="#l6.20"></a><span id="l6.20">                                          label=&quot;&amp;fromField2.label;&quot;/&gt;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-          &lt;/hbox&gt;</span>
<a href="#l6.22"></a><span id="l6.22">         &lt;/hbox&gt;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-        &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-        &lt;hbox id=&quot;collapseddateBox&quot;&gt;</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-          &lt;hbox&gt;</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-            &lt;textbox id=&quot;collapseddateValue&quot; class=&quot;collapsedHeaderValue plain&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-          &lt;/hbox&gt;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+        &lt;header-view-button-box id=&quot;collapsedButtonBox&quot;/&gt;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+      &lt;hbox align=&quot;baseline&quot;&gt;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+        &lt;hbox id=&quot;collapsedsubjectBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+          &lt;textbox id=&quot;collapsedsubjectValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+                   class=&quot;collapsedHeaderValue plain&quot;/&gt;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+        &lt;/hbox&gt;</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+        &lt;hbox id=&quot;collapseddateBox&quot; flex=&quot;0&quot;&gt;</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+          &lt;textbox id=&quot;collapseddateValue&quot; class=&quot;plain collapsedHeaderValue&quot;</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+                   flex=&quot;0&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l6.39"></a><span id="l6.39">         &lt;/hbox&gt;</span>
<a href="#l6.40"></a><span id="l6.40">       &lt;/hbox&gt;</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-      &lt;hbox align=&quot;baseline&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-        &lt;hbox id=&quot;collapsedsubjectBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-          &lt;hbox flex=&quot;1&quot; align=&quot;center&quot;&gt;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-            &lt;textbox flex=&quot;1&quot; id=&quot;collapsedsubjectValue&quot;</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-                     class=&quot;collapsedHeaderValue plain&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-          &lt;/hbox&gt;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-          &lt;vbox&gt;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-            &lt;button align=&quot;center&quot;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-                    id=&quot;showDetailsButton&quot;</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-                    tooltiptext=&quot;&amp;showDetailsButton.label;&quot;</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-                    onclick=&quot;ToggleHeaderView();&quot;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-                    class=&quot;msgHeaderView-button&quot;/&gt;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-          &lt;/vbox&gt;</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+      &lt;hbox flex=&quot;1&quot; align=&quot;center&quot;&gt;</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+        &lt;hbox id=&quot;collapsedtoCcBccBox&quot;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+              align=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+          &lt;mail-multi-emailHeaderField id=&quot;collapsedtoCcBccValue&quot;</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+                                       flex=&quot;1&quot;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+                                       align=&quot;baseline&quot;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+                                       class=&quot;collapsedHeaderDisplayName&quot;/&gt;</span>
<a href="#l6.62"></a><span id="l6.62">         &lt;/hbox&gt;</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+        &lt;button id=&quot;showDetailsButton&quot;</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+                tooltiptext=&quot;&amp;showDetailsButton.label;&quot;</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+                onclick=&quot;ToggleHeaderView();&quot;</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+                class=&quot;msgHeaderView-button&quot;/&gt;</span>
<a href="#l6.67"></a><span id="l6.67">       &lt;/hbox&gt;</span>
<a href="#l6.68"></a><span id="l6.68">     &lt;/vbox&gt;</span>
<a href="#l6.69"></a><span id="l6.69"> </span>
<a href="#l6.70"></a><span id="l6.70">     &lt;!-- the message pane consists of 3 'boxes'. Box #2 is the expanded headers view (the default view) --&gt;</span>
<a href="#l6.71"></a><span id="l6.71">     &lt;hbox id=&quot;expandedHeaderView&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.72"></a><span id="l6.72"> </span>
<a href="#l6.73"></a><span id="l6.73">       &lt;!--  XXX this should switch to using &lt;grid&gt; for expandedHeaders to get</span>
<a href="#l6.74"></a><span id="l6.74">             away from gross historical CSS pseudo-boxery used for header</span>
<a href="#l6.75"></a><span id="l6.75">             name positioning --&gt;</span>
<a href="#l6.76"></a><span id="l6.76">       &lt;vbox id=&quot;expandedHeaders&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.77"></a><span id="l6.77"> </span>
<a href="#l6.78"></a><span id="l6.78">         &lt;hbox id=&quot;expandedHeadersTopBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.79"></a><span id="l6.79"> </span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-          &lt;hbox flex=&quot;1&quot; align=&quot;end&quot;&gt;</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+          &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l6.82"></a><span id="l6.82">             &lt;mail-multi-emailHeaderField id=&quot;expandedfromBox&quot;</span>
<a href="#l6.83"></a><span id="l6.83">                                          label=&quot;&amp;fromField2.label;&quot;</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+                                         align=&quot;baseline&quot;</span>
<a href="#l6.85"></a><span id="l6.85">                                          collapsed=&quot;false&quot;</span>
<a href="#l6.86"></a><span id="l6.86">                                          flex=&quot;1&quot;/&gt;</span>
<a href="#l6.87"></a><span id="l6.87">           &lt;/hbox&gt;</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-          &lt;!-- This might want to become a customizable toolbar at some</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineminus">-               point --&gt;</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineminus">-          &lt;hbox id=&quot;expandedHeadersButtonBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineminus">-</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-            &lt;!-- XXXdmose need to move these commands to a controller, either</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineminus">-                 on the header view, the message pane, or the default</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineminus">-                 controller</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-                 --&gt;</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineminus">-</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineminus">-            &lt;!-- XXXdmose need to audit our shortcut/a11y setup and make sure</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineminus">-                 these buttons are doing the right thing --&gt;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineminus">-</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineminus">-            &lt;button id=&quot;replyButton&quot; label=&quot;&amp;replyButton.label;&quot;</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-                    oncommand=&quot;MsgReplyMessage(event);&quot; observes=&quot;button_reply&quot;</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-                    class=&quot;msgHeaderView-button&quot;/&gt;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineminus">-            &lt;button id=&quot;forwardButton&quot; label=&quot;&amp;forwardButton.label;&quot;</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineminus">-                    oncommand=&quot;MsgForwardMessage(event);&quot;</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineminus">-                    observes=&quot;button_forward&quot; class=&quot;msgHeaderView-button&quot;/&gt;</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-            &lt;button id=&quot;junkButton&quot; label=&quot;&amp;junkButton.label;&quot;</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineminus">-                    observes=&quot;button_junk&quot; class=&quot;msgHeaderView-button&quot;</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineminus">-                    oncommand=&quot;goDoCommand('button_junk')&quot;/&gt;</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineminus">-            &lt;button id=&quot;trashButton&quot; tooltiptext=&quot;&amp;trashButton.tooltiptext;&quot;</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineminus">-                    class=&quot;msgHeaderView-button&quot; observes=&quot;button_delete&quot;</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineminus">-                    oncommand=&quot;goDoCommand(event.shiftKey ? 'cmd_shiftDelete' : 'cmd_delete')&quot;/&gt;</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineminus">-           &lt;/hbox&gt;</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+          &lt;header-view-button-box id=&quot;expandedButtonBox&quot;/&gt;</span>
<a href="#l6.114"></a><span id="l6.114">         &lt;/hbox&gt;</span>
<a href="#l6.115"></a><span id="l6.115"> </span>
<a href="#l6.116"></a><span id="l6.116">         &lt;hbox id=&quot;otherHeadersAndButtonsBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.117"></a><span id="l6.117">           &lt;vbox id=&quot;variousHeadersBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l6.118"></a><span id="l6.118">             &lt;mail-headerfield id=&quot;expandedsubjectBox&quot; label=&quot;&amp;subjectField2.label;&quot;</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.120"></a><span id="l6.120">                               collapsed=&quot;false&quot;/&gt;</span>
<a href="#l6.121"></a><span id="l6.121">             &lt;mail-headerfield id=&quot;expandedorganizationBox&quot;</span>
<a href="#l6.122"></a><span id="l6.122">                               label=&quot;&amp;organizationField2.label;&quot;</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.124"></a><span id="l6.124">                               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.125"></a><span id="l6.125">             &lt;mail-emailheaderfield id=&quot;expandedsenderBox&quot;</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineplus">+                                   align=&quot;baseline&quot;</span>
<a href="#l6.127"></a><span id="l6.127">                                    label=&quot;&amp;senderField2.label;&quot;</span>
<a href="#l6.128"></a><span id="l6.128">                                    collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.129"></a><span id="l6.129">             &lt;mail-multi-emailHeaderField id=&quot;expandedreply-toBox&quot;</span>
<a href="#l6.130"></a><span id="l6.130">                                          label=&quot;&amp;replyToField2.label;&quot;</span>
<a href="#l6.131"></a><span id="l6.131" class="difflineplus">+                                         align=&quot;baseline&quot;</span>
<a href="#l6.132"></a><span id="l6.132">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.133"></a><span id="l6.133">             &lt;mail-multi-emailHeaderField id=&quot;expandedtoBox&quot;</span>
<a href="#l6.134"></a><span id="l6.134">                                          label=&quot;&amp;toField2.label;&quot;</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineplus">+                                         align=&quot;baseline&quot;</span>
<a href="#l6.136"></a><span id="l6.136">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.137"></a><span id="l6.137">             &lt;mail-multi-emailHeaderField id=&quot;expandedccBox&quot;</span>
<a href="#l6.138"></a><span id="l6.138">                                          label=&quot;&amp;ccField2.label;&quot;</span>
<a href="#l6.139"></a><span id="l6.139" class="difflineplus">+                                         align=&quot;baseline&quot;</span>
<a href="#l6.140"></a><span id="l6.140">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.141"></a><span id="l6.141">             &lt;mail-multi-emailHeaderField id=&quot;expandedbccBox&quot; </span>
<a href="#l6.142"></a><span id="l6.142">                                          label=&quot;&amp;bccField2.label;&quot;</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineplus">+                                         align=&quot;baseline&quot;</span>
<a href="#l6.144"></a><span id="l6.144">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.145"></a><span id="l6.145">             &lt;mail-headerfield id=&quot;expandednewsgroupsBox&quot;</span>
<a href="#l6.146"></a><span id="l6.146">                               label=&quot;&amp;newsgroupsField2.label;&quot;</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.148"></a><span id="l6.148">                               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.149"></a><span id="l6.149">             &lt;mail-headerfield id=&quot;expandedfollowup-toBox&quot;</span>
<a href="#l6.150"></a><span id="l6.150">                               label=&quot;&amp;followupToField2.label;&quot;</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.152"></a><span id="l6.152">                               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.153"></a><span id="l6.153">             &lt;mail-headerfield id=&quot;expandeddateBox&quot; label=&quot;&amp;dateField2.label;&quot;</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.155"></a><span id="l6.155">                               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.156"></a><span id="l6.156">             &lt;mail-messageids-headerfield id=&quot;expandedmessage-idBox&quot;</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.158"></a><span id="l6.158">                                          label=&quot;&amp;messageIdField2.label;&quot;</span>
<a href="#l6.159"></a><span id="l6.159">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.160"></a><span id="l6.160">             &lt;mail-messageids-headerfield id=&quot;expandedin-reply-toBox&quot;</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.162"></a><span id="l6.162">                                          label=&quot;&amp;inReplyToField2.label;&quot;</span>
<a href="#l6.163"></a><span id="l6.163">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.164"></a><span id="l6.164">             &lt;mail-messageids-headerfield id=&quot;expandedreferencesBox&quot;</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineplus">+                              align=&quot;baseline&quot;</span>
<a href="#l6.166"></a><span id="l6.166">                                          label=&quot;&amp;referencesField2.label;&quot;</span>
<a href="#l6.167"></a><span id="l6.167">                                          collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.168"></a><span id="l6.168">             &lt;mail-tagfield id=&quot;expandedtagsBox&quot; label=&quot;&amp;tagsHdr2.label;&quot;</span>
<a href="#l6.169"></a><span id="l6.169">                            collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.170"></a><span id="l6.170">             &lt;mail-urlfield id=&quot;expandedcontent-baseBox&quot;</span>
<a href="#l6.171"></a><span id="l6.171">                            label=&quot;&amp;originalWebsite2.label;&quot; collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.172"></a><span id="l6.172">             &lt;mail-headerfield id=&quot;expandeduser-agentBox&quot;</span>
<a href="#l6.173"></a><span id="l6.173">                               label=&quot;&amp;userAgentField2.label;&quot;</span>
<a href="#l6.174"></a><span id="l6.174">                               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l6.175"></a><span id="l6.175">           &lt;/vbox&gt;</span>
<a href="#l6.176"></a><span id="l6.176"> </span>
<a href="#l6.177"></a><span id="l6.177">           &lt;!-- perhaps this should be a customizable toolbar too --&gt;</span>
<a href="#l6.178"></a><span id="l6.178">           &lt;vbox id=&quot;hideDetailsBox&quot; align=&quot;end&quot;&gt;</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineplus">+            &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l6.180"></a><span id="l6.180">             &lt;button type=&quot;menu&quot; id=&quot;otherActionsButton&quot;</span>
<a href="#l6.181"></a><span id="l6.181">                     label=&quot;&amp;otherActionsButton.label;&quot;</span>
<a href="#l6.182"></a><span id="l6.182">                     class=&quot;msgHeaderView-button&quot;&gt;</span>
<a href="#l6.183"></a><span id="l6.183">               &lt;menupopup id=&quot;otherActionsPopup&quot;&gt;</span>
<a href="#l6.184"></a><span id="l6.184">                 &lt;menuitem id=&quot;viewSourceMenuItem&quot;</span>
<a href="#l6.185"></a><span id="l6.185">                           label=&quot;&amp;viewSourceMenuItem.label;&quot;</span>
<a href="#l6.186"></a><span id="l6.186">                           accesskey=&quot;&amp;viewSourceMenuItem.accesskey;&quot;</span>
<a href="#l6.187"></a><span id="l6.187">                           oncommand=&quot;ViewPageSource(GetSelectedMessages());&quot; /&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/themes/pinstripe/mail/messageHeader.css</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/themes/pinstripe/mail/messageHeader.css</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -43,27 +43,27 @@</span>
<a href="#l7.4"></a><span id="l7.4"> </span>
<a href="#l7.5"></a><span id="l7.5"> /* ::::: for the entire area ::::: */</span>
<a href="#l7.6"></a><span id="l7.6"> .main-header-area {</span>
<a href="#l7.7"></a><span id="l7.7">   background-color: #eeeeec;</span>
<a href="#l7.8"></a><span id="l7.8"> }</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> /* ::::: msg header toolbars ::::: */</span>
<a href="#l7.11"></a><span id="l7.11"> #collapsedHeaderView {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  padding: .5em;</span>
<a href="#l7.13"></a><span id="l7.13">   min-width: 1px;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+  margin-left: 0.5em;</span>
<a href="#l7.15"></a><span id="l7.15">   color: black;</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-  font-size: 120%;</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+  font-size: 110%;</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+  padding-bottom: 0.5em;</span>
<a href="#l7.19"></a><span id="l7.19"> }</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21"> #expandedHeaderView {</span>
<a href="#l7.22"></a><span id="l7.22">   color: #2e3436;</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-  font-size: 100%;</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-  overflow-y: auto;</span>
<a href="#l7.25"></a><span id="l7.25">   overflow-x: hidden;</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+  overflow-y: visible;</span>
<a href="#l7.27"></a><span id="l7.27">   max-height: 14em;</span>
<a href="#l7.28"></a><span id="l7.28"> }</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30"> #variousHeadersBox{</span>
<a href="#l7.31"></a><span id="l7.31">   padding-bottom: 1em;</span>
<a href="#l7.32"></a><span id="l7.32"> }</span>
<a href="#l7.33"></a><span id="l7.33"> </span>
<a href="#l7.34"></a><span id="l7.34"> #collapsedHeaderDisplayName {</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineat">@@ -72,17 +72,17 @@</span>
<a href="#l7.36"></a><span id="l7.36"> </span>
<a href="#l7.37"></a><span id="l7.37"> /* ::::: msg header buttons ::::: */</span>
<a href="#l7.38"></a><span id="l7.38"> .headerContainer</span>
<a href="#l7.39"></a><span id="l7.39"> {</span>
<a href="#l7.40"></a><span id="l7.40">   min-width: 1px;</span>
<a href="#l7.41"></a><span id="l7.41"> }</span>
<a href="#l7.42"></a><span id="l7.42"> </span>
<a href="#l7.43"></a><span id="l7.43"> #otherActionsButton {</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-  margin-bottom: .1em;</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+  margin-bottom: 0.1em;</span>
<a href="#l7.46"></a><span id="l7.46">   background: none;</span>
<a href="#l7.47"></a><span id="l7.47">   font-weight: normal;</span>
<a href="#l7.48"></a><span id="l7.48">   color: #41413F; /* higher contrast */</span>
<a href="#l7.49"></a><span id="l7.49">   border: 2px solid transparent;</span>
<a href="#l7.50"></a><span id="l7.50">   font-size: 100%;</span>
<a href="#l7.51"></a><span id="l7.51">   padding-top: 0px;</span>
<a href="#l7.52"></a><span id="l7.52"> }</span>
<a href="#l7.53"></a><span id="l7.53"> </span>
<a href="#l7.54"></a><span id="l7.54" class="difflineat">@@ -110,50 +110,57 @@</span>
<a href="#l7.55"></a><span id="l7.55"> }</span>
<a href="#l7.56"></a><span id="l7.56"> </span>
<a href="#l7.57"></a><span id="l7.57"> #hideDetailsButton:hover {</span>
<a href="#l7.58"></a><span id="l7.58">   color: black;</span>
<a href="#l7.59"></a><span id="l7.59">   background-color: rgb(230,231,227);</span>
<a href="#l7.60"></a><span id="l7.60">   border: 2px solid #C0C3C6;</span>
<a href="#l7.61"></a><span id="l7.61"> }</span>
<a href="#l7.62"></a><span id="l7.62"> </span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-</span>
<a href="#l7.64"></a><span id="l7.64"> #collapsedsubjectValue {</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+  margin-left: 3px !important;</span>
<a href="#l7.66"></a><span id="l7.66">   -moz-box-align: stretch;</span>
<a href="#l7.67"></a><span id="l7.67">   font-weight: bold;</span>
<a href="#l7.68"></a><span id="l7.68"> }</span>
<a href="#l7.69"></a><span id="l7.69"> </span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+#collapseddateValue {</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+  -moz-box-align: stretch;</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+  text-align: right;</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+  padding-right: 0.5em !important;</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+}</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+</span>
<a href="#l7.76"></a><span id="l7.76"> #showDetailsButton {</span>
<a href="#l7.77"></a><span id="l7.77">   -moz-appearance: none !important;</span>
<a href="#l7.78"></a><span id="l7.78">   border: 2px solid transparent;</span>
<a href="#l7.79"></a><span id="l7.79">   background-color: transparent;</span>
<a href="#l7.80"></a><span id="l7.80">   width: 22px;</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+  padding-bottom: 0px !important;</span>
<a href="#l7.82"></a><span id="l7.82">   background-image: url(&quot;chrome://messenger/skin/icons/chevron.png&quot;);</span>
<a href="#l7.83"></a><span id="l7.83">   background-repeat: no-repeat;</span>
<a href="#l7.84"></a><span id="l7.84">   background-position: center center;</span>
<a href="#l7.85"></a><span id="l7.85"> }</span>
<a href="#l7.86"></a><span id="l7.86"> </span>
<a href="#l7.87"></a><span id="l7.87"> #showDetailsButton:hover {</span>
<a href="#l7.88"></a><span id="l7.88">   background-color: rgb(230,231,227);</span>
<a href="#l7.89"></a><span id="l7.89">   border: 2px solid #C0C3C6;</span>
<a href="#l7.90"></a><span id="l7.90"> }</span>
<a href="#l7.91"></a><span id="l7.91"> </span>
<a href="#l7.92"></a><span id="l7.92" class="difflineminus">-#trashButton {</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+.hdrTrashButton {</span>
<a href="#l7.94"></a><span id="l7.94">   -moz-box-orient: vertical;</span>
<a href="#l7.95"></a><span id="l7.95">   list-style-image: url(&quot;chrome://messenger/skin/icons/folder-trash.png&quot;);</span>
<a href="#l7.96"></a><span id="l7.96"> }</span>
<a href="#l7.97"></a><span id="l7.97"> </span>
<a href="#l7.98"></a><span id="l7.98"> /* ::::: expanded header pane ::::: */</span>
<a href="#l7.99"></a><span id="l7.99"> </span>
<a href="#l7.100"></a><span id="l7.100"> #expandedHeadersButtonBox {</span>
<a href="#l7.101"></a><span id="l7.101">   padding-bottom: 0;</span>
<a href="#l7.102"></a><span id="l7.102"> }</span>
<a href="#l7.103"></a><span id="l7.103"> </span>
<a href="#l7.104"></a><span id="l7.104"> #expandedfromBox {</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineminus">-  padding-top: .5em;</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l7.107"></a><span id="l7.107"> }</span>
<a href="#l7.108"></a><span id="l7.108"> </span>
<a href="#l7.109"></a><span id="l7.109"> /* ::::: edit message bar ::::: */</span>
<a href="#l7.110"></a><span id="l7.110"> </span>
<a href="#l7.111"></a><span id="l7.111"> #editMessageBox</span>
<a href="#l7.112"></a><span id="l7.112"> {</span>
<a href="#l7.113"></a><span id="l7.113">   min-width: 1px;</span>
<a href="#l7.114"></a><span id="l7.114">   -moz-border-radius-bottomleft: 0.2em;</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineat">@@ -281,48 +288,67 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l7.116"></a><span id="l7.116"> }</span>
<a href="#l7.117"></a><span id="l7.117"> </span>
<a href="#l7.118"></a><span id="l7.118"> .msgHeaderView-button:hover {</span>
<a href="#l7.119"></a><span id="l7.119">   background-color: rgb(230,231,227);</span>
<a href="#l7.120"></a><span id="l7.120">   border: 2px solid #B0B3B6;</span>
<a href="#l7.121"></a><span id="l7.121"> }</span>
<a href="#l7.122"></a><span id="l7.122"> </span>
<a href="#l7.123"></a><span id="l7.123"> #msgHeaderView textbox {</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineminus">-  background-color: transparent;</span>
<a href="#l7.125"></a><span id="l7.125">   color: inherit;</span>
<a href="#l7.126"></a><span id="l7.126"> }</span>
<a href="#l7.127"></a><span id="l7.127"> </span>
<a href="#l7.128"></a><span id="l7.128"> </span>
<a href="#l7.129"></a><span id="l7.129"> .headerNameBox {</span>
<a href="#l7.130"></a><span id="l7.130">   width: 7em;</span>
<a href="#l7.131"></a><span id="l7.131">   background-color: transparent;</span>
<a href="#l7.132"></a><span id="l7.132"> }</span>
<a href="#l7.133"></a><span id="l7.133"> </span>
<a href="#l7.134"></a><span id="l7.134"> .headerName {</span>
<a href="#l7.135"></a><span id="l7.135">   color: #888a85; /* lower contrast */</span>
<a href="#l7.136"></a><span id="l7.136">   text-align: right;</span>
<a href="#l7.137"></a><span id="l7.137">   background-color: transparent;</span>
<a href="#l7.138"></a><span id="l7.138">   padding: 0px;</span>
<a href="#l7.139"></a><span id="l7.139">   margin-top: 0;</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineplus">+  margin-right: 0;</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineplus">+}</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineplus">+</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineplus">+</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineplus">+.headerValueBox {</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineplus">+  overflow: visible;</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineplus">+}</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineplus">+</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineplus">+.headerValueBox {</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineplus">+  margin-bottom: 0 !important;</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineplus">+  padding-bottom: 0 !important;</span>
<a href="#l7.151"></a><span id="l7.151"> }</span>
<a href="#l7.152"></a><span id="l7.152"> </span>
<a href="#l7.153"></a><span id="l7.153"> .headerValue {</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineminus">-  margin: 0;</span>
<a href="#l7.155"></a><span id="l7.155">   min-width: 50px;</span>
<a href="#l7.156"></a><span id="l7.156">   white-space: normal;</span>
<a href="#l7.157"></a><span id="l7.157">   color: black !important;</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineminus">-  background-color: transparent;</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineminus">-  padding: 0px;</span>
<a href="#l7.160"></a><span id="l7.160" class="difflineminus">-}</span>
<a href="#l7.161"></a><span id="l7.161" class="difflineplus">+  line-height: 1.4em;</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineplus">+</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineplus">+  -moz-appearance: none !important;</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l7.165"></a><span id="l7.165"> </span>
<a href="#l7.166"></a><span id="l7.166" class="difflineminus">-.headerValueBox {</span>
<a href="#l7.167"></a><span id="l7.167" class="difflineplus">+  padding: 0px !important;</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineplus">+  margin: 0px !important;</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+  margin-left: 3px !important;</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+  border: none !important;</span>
<a href="#l7.171"></a><span id="l7.171">   background-color: transparent;</span>
<a href="#l7.172"></a><span id="l7.172"> }</span>
<a href="#l7.173"></a><span id="l7.173"> </span>
<a href="#l7.174"></a><span id="l7.174" class="difflineplus">+.headerValue[containsEmail=&quot;true&quot;] {</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineplus">+  margin-left: 0px !important;</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineplus">+}</span>
<a href="#l7.177"></a><span id="l7.177" class="difflineplus">+</span>
<a href="#l7.178"></a><span id="l7.178" class="difflineplus">+</span>
<a href="#l7.179"></a><span id="l7.179"> .headerValueBox[singleline=&quot;true&quot;] {</span>
<a href="#l7.180"></a><span id="l7.180" class="difflineplus">+  height: 1.8em;</span>
<a href="#l7.181"></a><span id="l7.181">   overflow: hidden;</span>
<a href="#l7.182"></a><span id="l7.182"> }</span>
<a href="#l7.183"></a><span id="l7.183"> </span>
<a href="#l7.184"></a><span id="l7.184"> .headerValueUrl {</span>
<a href="#l7.185"></a><span id="l7.185">   cursor: pointer;</span>
<a href="#l7.186"></a><span id="l7.186">   color: #0000FF;</span>
<a href="#l7.187"></a><span id="l7.187">   text-decoration: underline;</span>
<a href="#l7.188"></a><span id="l7.188"> }</span>
<a href="#l7.189"></a><span id="l7.189" class="difflineat">@@ -337,23 +363,45 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l7.190"></a><span id="l7.190"> </span>
<a href="#l7.191"></a><span id="l7.191"> #collapsedsubjectBox {</span>
<a href="#l7.192"></a><span id="l7.192">   margin: 0px;</span>
<a href="#l7.193"></a><span id="l7.193">   padding: 0px;</span>
<a href="#l7.194"></a><span id="l7.194"> }</span>
<a href="#l7.195"></a><span id="l7.195"> </span>
<a href="#l7.196"></a><span id="l7.196"> #collapsedfromValue &gt; .headerNameBox {</span>
<a href="#l7.197"></a><span id="l7.197">   display: none;</span>
<a href="#l7.198"></a><span id="l7.198" class="difflineminus">-  /*width: auto !important;*/</span>
<a href="#l7.199"></a><span id="l7.199" class="difflineplus">+}</span>
<a href="#l7.200"></a><span id="l7.200" class="difflineplus">+</span>
<a href="#l7.201"></a><span id="l7.201" class="difflineplus">+#collapsedtoCcBccValue &gt; .headerNameBox {</span>
<a href="#l7.202"></a><span id="l7.202" class="difflineplus">+  display: none;</span>
<a href="#l7.203"></a><span id="l7.203" class="difflineplus">+}</span>
<a href="#l7.204"></a><span id="l7.204" class="difflineplus">+</span>
<a href="#l7.205"></a><span id="l7.205" class="difflineplus">+#collapsedtoCcBccValue &gt; .headerValueBox[singleline] {</span>
<a href="#l7.206"></a><span id="l7.206" class="difflineplus">+  padding-top: 0;</span>
<a href="#l7.207"></a><span id="l7.207" class="difflineplus">+  padding-bottom: 0;</span>
<a href="#l7.208"></a><span id="l7.208"> }</span>
<a href="#l7.209"></a><span id="l7.209"> </span>
<a href="#l7.210"></a><span id="l7.210" class="difflineminus">-#junkButton[disabled=&quot;true&quot;] {</span>
<a href="#l7.211"></a><span id="l7.211" class="difflineplus">+#collapsedtoCcBccValue &gt; .headerValueBox:not([singleline]) {</span>
<a href="#l7.212"></a><span id="l7.212" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l7.213"></a><span id="l7.213" class="difflineplus">+  padding-bottom: 0;</span>
<a href="#l7.214"></a><span id="l7.214" class="difflineplus">+}</span>
<a href="#l7.215"></a><span id="l7.215" class="difflineplus">+</span>
<a href="#l7.216"></a><span id="l7.216" class="difflineplus">+.moreIndicator {</span>
<a href="#l7.217"></a><span id="l7.217" class="difflineplus">+  font-weight: bold;</span>
<a href="#l7.218"></a><span id="l7.218" class="difflineplus">+  font-size: small;</span>
<a href="#l7.219"></a><span id="l7.219" class="difflineplus">+}</span>
<a href="#l7.220"></a><span id="l7.220" class="difflineplus">+</span>
<a href="#l7.221"></a><span id="l7.221" class="difflineplus">+.moreIndicator:hover {</span>
<a href="#l7.222"></a><span id="l7.222" class="difflineplus">+  text-decoration: underline;</span>
<a href="#l7.223"></a><span id="l7.223" class="difflineplus">+  color: darkred;</span>
<a href="#l7.224"></a><span id="l7.224" class="difflineplus">+}</span>
<a href="#l7.225"></a><span id="l7.225" class="difflineplus">+</span>
<a href="#l7.226"></a><span id="l7.226" class="difflineplus">+.junkButton[disabled=&quot;true&quot;] {</span>
<a href="#l7.227"></a><span id="l7.227">   background: none;</span>
<a href="#l7.228"></a><span id="l7.228">   opacity: 0;</span>
<a href="#l7.229"></a><span id="l7.229" class="difflineminus">-  /*border-color: transparent;*/</span>
<a href="#l7.230"></a><span id="l7.230"> }</span>
<a href="#l7.231"></a><span id="l7.231"> </span>
<a href="#l7.232"></a><span id="l7.232"> .tagvalue {</span>
<a href="#l7.233"></a><span id="l7.233">   margin-left: 0px;</span>
<a href="#l7.234"></a><span id="l7.234">   background-image: url(&quot;chrome://messenger/skin/tagbg.png&quot;);</span>
<a href="#l7.235"></a><span id="l7.235">   color: black;</span>
<a href="#l7.236"></a><span id="l7.236">   -moz-border-radius: 2px;</span>
<a href="#l7.237"></a><span id="l7.237">   padding-left: 3px;</span>
<a href="#l7.238"></a><span id="l7.238" class="difflineat">@@ -377,34 +425,66 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l7.239"></a><span id="l7.239">   color: blue;</span>
<a href="#l7.240"></a><span id="l7.240">   background: url(&quot;chrome://messenger/skin/icons/arrow-dn-black.png&quot;) no-repeat center right;</span>
<a href="#l7.241"></a><span id="l7.241"> }</span>
<a href="#l7.242"></a><span id="l7.242"> </span>
<a href="#l7.243"></a><span id="l7.243"> /* ::::: msg header email addresses ::::: */</span>
<a href="#l7.244"></a><span id="l7.244"> </span>
<a href="#l7.245"></a><span id="l7.245"> .emailDisplayButton {</span>
<a href="#l7.246"></a><span id="l7.246">   margin: 0;</span>
<a href="#l7.247"></a><span id="l7.247" class="difflineplus">+  padding-left: 3px !important;</span>
<a href="#l7.248"></a><span id="l7.248" class="difflineplus">+  padding-right: 3px !important;</span>
<a href="#l7.249"></a><span id="l7.249" class="difflineplus">+  padding-top: 0.1em;</span>
<a href="#l7.250"></a><span id="l7.250" class="difflineplus">+  padding-bottom: 0.1em;</span>
<a href="#l7.251"></a><span id="l7.251" class="difflineplus">+  margin-bottom: 3px !important;</span>
<a href="#l7.252"></a><span id="l7.252">   background-color: transparent;</span>
<a href="#l7.253"></a><span id="l7.253"> }</span>
<a href="#l7.254"></a><span id="l7.254"> </span>
<a href="#l7.255"></a><span id="l7.255"> .emailDisplayButton:hover {</span>
<a href="#l7.256"></a><span id="l7.256">   cursor: pointer;</span>
<a href="#l7.257"></a><span id="l7.257" class="difflineminus">-  text-decoration: underline;</span>
<a href="#l7.258"></a><span id="l7.258" class="difflineminus">-  color: #2A46C7;</span>
<a href="#l7.259"></a><span id="l7.259" class="difflineplus">+  -moz-border-radius: 2px;</span>
<a href="#l7.260"></a><span id="l7.260" class="difflineplus">+  background-color: #fcaf3e; /* tango orange */</span>
<a href="#l7.261"></a><span id="l7.261" class="difflineplus">+}</span>
<a href="#l7.262"></a><span id="l7.262" class="difflineplus">+</span>
<a href="#l7.263"></a><span id="l7.263" class="difflineplus">+mail-emailaddress[selected=&quot;true&quot;] .emailDisplayButton{</span>
<a href="#l7.264"></a><span id="l7.264" class="difflineplus">+  /* when an email address context menu is selected,</span>
<a href="#l7.265"></a><span id="l7.265" class="difflineplus">+    make sure that the email bubble stays displayed, and</span>
<a href="#l7.266"></a><span id="l7.266" class="difflineplus">+    tweak the bottom to blend in more w/ the menu */</span>
<a href="#l7.267"></a><span id="l7.267" class="difflineplus">+  cursor: pointer;</span>
<a href="#l7.268"></a><span id="l7.268" class="difflineplus">+  -moz-border-radius: 3px;</span>
<a href="#l7.269"></a><span id="l7.269" class="difflineplus">+  background-color: #fcaf3e; /* tango orange */</span>
<a href="#l7.270"></a><span id="l7.270" class="difflineplus">+  -moz-border-radius-bottomleft: 0;</span>
<a href="#l7.271"></a><span id="l7.271" class="difflineplus">+  -moz-border-radius-bottomright: 0;</span>
<a href="#l7.272"></a><span id="l7.272"> }</span>
<a href="#l7.273"></a><span id="l7.273"> </span>
<a href="#l7.274"></a><span id="l7.274" class="difflineminus">-.emailDisplayButton:focus, .emailStar:focus, .emailPopup:focus {</span>
<a href="#l7.275"></a><span id="l7.275" class="difflineplus">+.emailSeparator {</span>
<a href="#l7.276"></a><span id="l7.276" class="difflineplus">+  /* this is for the comma in between email addresses */</span>
<a href="#l7.277"></a><span id="l7.277" class="difflineplus">+  -moz-margin-start: -6px; /* squeeze it inside the bubble, by the star */</span>
<a href="#l7.278"></a><span id="l7.278" class="difflineplus">+}</span>
<a href="#l7.279"></a><span id="l7.279" class="difflineplus">+</span>
<a href="#l7.280"></a><span id="l7.280" class="difflineplus">+.emailDisplayButton:focus {</span>
<a href="#l7.281"></a><span id="l7.281" class="difflineplus">+  border: 1px dotted #fcaf3e; /* tango orange */</span>
<a href="#l7.282"></a><span id="l7.282" class="difflineplus">+}</span>
<a href="#l7.283"></a><span id="l7.283" class="difflineplus">+</span>
<a href="#l7.284"></a><span id="l7.284" class="difflineplus">+.emailStar:focus {</span>
<a href="#l7.285"></a><span id="l7.285">   border: 1px dotted;</span>
<a href="#l7.286"></a><span id="l7.286"> }</span>
<a href="#l7.287"></a><span id="l7.287"> </span>
<a href="#l7.288"></a><span id="l7.288" class="difflineplus">+.emaillabel {</span>
<a href="#l7.289"></a><span id="l7.289" class="difflineplus">+  padding: 0px !important;  /* override &lt;label&gt; defaults */</span>
<a href="#l7.290"></a><span id="l7.290" class="difflineplus">+  margin: 0px !important;  /* override &lt;label&gt; defaults */</span>
<a href="#l7.291"></a><span id="l7.291" class="difflineplus">+  overflow: hidden;</span>
<a href="#l7.292"></a><span id="l7.292" class="difflineplus">+}</span>
<a href="#l7.293"></a><span id="l7.293" class="difflineplus">+</span>
<a href="#l7.294"></a><span id="l7.294"> .emailStar {</span>
<a href="#l7.295"></a><span id="l7.295">   max-width: 1em;</span>
<a href="#l7.296"></a><span id="l7.296">   max-height: 1em;</span>
<a href="#l7.297"></a><span id="l7.297">   -moz-appearance: none;</span>
<a href="#l7.298"></a><span id="l7.298">   -moz-box-orient: vertical;</span>
<a href="#l7.299"></a><span id="l7.299" class="difflineplus">+  -moz-margin-start: -1px !important;</span>
<a href="#l7.300"></a><span id="l7.300">   padding: 0px;</span>
<a href="#l7.301"></a><span id="l7.301">   margin: 0px 2px;</span>
<a href="#l7.302"></a><span id="l7.302">   list-style-image: url(&quot;chrome://messenger/skin/starIcons.png&quot;);</span>
<a href="#l7.303"></a><span id="l7.303">   -moz-image-region: rect(0px, 16px, 16px, 0px);</span>
<a href="#l7.304"></a><span id="l7.304"> }</span>
<a href="#l7.305"></a><span id="l7.305"> </span>
<a href="#l7.306"></a><span id="l7.306"> .emailStar:hover {</span>
<a href="#l7.307"></a><span id="l7.307">   -moz-image-region: rect(0px, 32px, 16px, 16px);</span>
<a href="#l7.308"></a><span id="l7.308" class="difflineat">@@ -435,17 +515,17 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l7.309"></a><span id="l7.309"> </span>
<a href="#l7.310"></a><span id="l7.310"> .emailPopup:hover {</span>
<a href="#l7.311"></a><span id="l7.311">   list-style-image: url(&quot;chrome://messenger/skin/icons/arrow-dn-blue.png&quot;);</span>
<a href="#l7.312"></a><span id="l7.312"> }</span>
<a href="#l7.313"></a><span id="l7.313">  </span>
<a href="#l7.314"></a><span id="l7.314"> /* ::::: email address twisty ::::: */</span>
<a href="#l7.315"></a><span id="l7.315"> </span>
<a href="#l7.316"></a><span id="l7.316"> .addresstwisty {</span>
<a href="#l7.317"></a><span id="l7.317" class="difflineminus">-  -moz-padding-end: 5px;</span>
<a href="#l7.318"></a><span id="l7.318" class="difflineplus">+  -moz-padding-end: 0px;</span>
<a href="#l7.319"></a><span id="l7.319">   padding-top: 4px;</span>
<a href="#l7.320"></a><span id="l7.320">   list-style-image:url(&quot;chrome://messenger/skin/icons/arrow/arrow-right-dim.png&quot;);</span>
<a href="#l7.321"></a><span id="l7.321"> }</span>
<a href="#l7.322"></a><span id="l7.322"> </span>
<a href="#l7.323"></a><span id="l7.323"> .addresstwisty:hover {</span>
<a href="#l7.324"></a><span id="l7.324">   list-style-image:url(&quot;chrome://messenger/skin/icons/arrow/arrow-right.png&quot;);</span>
<a href="#l7.325"></a><span id="l7.325"> }</span>
<a href="#l7.326"></a><span id="l7.326"> </span>
<a href="#l7.327"></a><span id="l7.327" class="difflineat">@@ -455,33 +535,23 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l7.328"></a><span id="l7.328"> </span>
<a href="#l7.329"></a><span id="l7.329"> .addresstwisty[open]:hover {</span>
<a href="#l7.330"></a><span id="l7.330">   list-style-image:url(&quot;chrome://messenger/skin/icons/arrow/arrow-down.png&quot;);</span>
<a href="#l7.331"></a><span id="l7.331"> }</span>
<a href="#l7.332"></a><span id="l7.332"> </span>
<a href="#l7.333"></a><span id="l7.333"> </span>
<a href="#l7.334"></a><span id="l7.334"> /* ::::: view expand and collapse twisties  ::::: */</span>
<a href="#l7.335"></a><span id="l7.335"> </span>
<a href="#l7.336"></a><span id="l7.336" class="difflineminus">-.expandHeaderViewButton,</span>
<a href="#l7.337"></a><span id="l7.337" class="difflineminus">-.collapsedHeaderViewButton  {</span>
<a href="#l7.338"></a><span id="l7.338" class="difflineminus">-</span>
<a href="#l7.339"></a><span id="l7.339" class="difflineminus">-}</span>
<a href="#l7.340"></a><span id="l7.340" class="difflineminus">-</span>
<a href="#l7.341"></a><span id="l7.341"> .expandHeaderViewButton {</span>
<a href="#l7.342"></a><span id="l7.342">   list-style-image:url(&quot;chrome://messenger/skin/icons/twisty-open.gif&quot;);</span>
<a href="#l7.343"></a><span id="l7.343"> }</span>
<a href="#l7.344"></a><span id="l7.344"> </span>
<a href="#l7.345"></a><span id="l7.345"> .collapsedHeaderViewButton  {</span>
<a href="#l7.346"></a><span id="l7.346">   list-style-image:url(&quot;chrome://messenger/skin/icons/twisty-closed.gif&quot;);</span>
<a href="#l7.347"></a><span id="l7.347"> }</span>
<a href="#l7.348"></a><span id="l7.348"> </span>
<a href="#l7.349"></a><span id="l7.349"> /* ::::: collapsed view styles ::::: */</span>
<a href="#l7.350"></a><span id="l7.350"> </span>
<a href="#l7.351"></a><span id="l7.351" class="difflineminus">-#collapseddateValue {</span>
<a href="#l7.352"></a><span id="l7.352" class="difflineminus">-  text-align: right;</span>
<a href="#l7.353"></a><span id="l7.353" class="difflineminus">-  padding-right: .5em !important;</span>
<a href="#l7.354"></a><span id="l7.354" class="difflineminus">-}</span>
<a href="#l7.355"></a><span id="l7.355" class="difflineminus">-</span>
<a href="#l7.356"></a><span id="l7.356"> mail-multi-emailHeaderField,</span>
<a href="#l7.357"></a><span id="l7.357"> mail-headerfield {</span>
<a href="#l7.358"></a><span id="l7.358">   margin: 0;</span>
<a href="#l7.359"></a><span id="l7.359">   padding: 0;</span>
<a href="#l7.360"></a><span id="l7.360"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/themes/qute/mail/messageHeader.css</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/themes/qute/mail/messageHeader.css</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -44,25 +44,27 @@</span>
<a href="#l8.4"></a><span id="l8.4"> /* ::::: for the entire area ::::: */</span>
<a href="#l8.5"></a><span id="l8.5"> .main-header-area {</span>
<a href="#l8.6"></a><span id="l8.6">   background-color: #eeeeec;</span>
<a href="#l8.7"></a><span id="l8.7"> }</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9"> /* ::::: msg header toolbars ::::: */</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11"> #collapsedHeaderView {</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  padding: .5em;</span>
<a href="#l8.13"></a><span id="l8.13">   min-width: 1px;</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+  margin-left: 0.5em;</span>
<a href="#l8.15"></a><span id="l8.15">   color: black;</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-  font-size: 125%;</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+  font-size: 110%;</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+  padding-bottom: 0.5em;</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l8.20"></a><span id="l8.20"> }</span>
<a href="#l8.21"></a><span id="l8.21"> </span>
<a href="#l8.22"></a><span id="l8.22"> #expandedHeaderView {</span>
<a href="#l8.23"></a><span id="l8.23">   color: #2e3436;</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-  font-size: 100%;</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l8.26"></a><span id="l8.26">   overflow-y: auto;</span>
<a href="#l8.27"></a><span id="l8.27">   overflow-x: hidden;</span>
<a href="#l8.28"></a><span id="l8.28">   max-height: 14em;</span>
<a href="#l8.29"></a><span id="l8.29"> }</span>
<a href="#l8.30"></a><span id="l8.30"> </span>
<a href="#l8.31"></a><span id="l8.31"> #variousHeadersBox{</span>
<a href="#l8.32"></a><span id="l8.32">   padding-bottom: 1em;</span>
<a href="#l8.33"></a><span id="l8.33"> }</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineat">@@ -70,17 +72,16 @@</span>
<a href="#l8.35"></a><span id="l8.35"> #collapsedHeaderDisplayName {</span>
<a href="#l8.36"></a><span id="l8.36">   text-align: left;</span>
<a href="#l8.37"></a><span id="l8.37"> }</span>
<a href="#l8.38"></a><span id="l8.38"> </span>
<a href="#l8.39"></a><span id="l8.39"> /* ::::: msg header buttons ::::: */</span>
<a href="#l8.40"></a><span id="l8.40"> .headerContainer</span>
<a href="#l8.41"></a><span id="l8.41"> {</span>
<a href="#l8.42"></a><span id="l8.42">   min-width: 1px;</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-  background-color: transparent;</span>
<a href="#l8.44"></a><span id="l8.44"> }</span>
<a href="#l8.45"></a><span id="l8.45"> </span>
<a href="#l8.46"></a><span id="l8.46"> #otherActionsButton {</span>
<a href="#l8.47"></a><span id="l8.47">   -moz-appearance: none;</span>
<a href="#l8.48"></a><span id="l8.48">   margin-bottom: .1em;</span>
<a href="#l8.49"></a><span id="l8.49">   background: none;</span>
<a href="#l8.50"></a><span id="l8.50">   font-weight: normal;</span>
<a href="#l8.51"></a><span id="l8.51">   color: #41413F; /* higher contrast */</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineat">@@ -119,54 +120,55 @@</span>
<a href="#l8.53"></a><span id="l8.53"> }</span>
<a href="#l8.54"></a><span id="l8.54"> </span>
<a href="#l8.55"></a><span id="l8.55"> #hideDetailsButton:hover {</span>
<a href="#l8.56"></a><span id="l8.56">   color: black;</span>
<a href="#l8.57"></a><span id="l8.57">   background-color: rgb(230,231,227);</span>
<a href="#l8.58"></a><span id="l8.58">   border: 2px solid #C0C3C6;</span>
<a href="#l8.59"></a><span id="l8.59"> }</span>
<a href="#l8.60"></a><span id="l8.60"> </span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-</span>
<a href="#l8.62"></a><span id="l8.62"> #collapsedsubjectValue {</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+  margin-left: 3px !important;</span>
<a href="#l8.64"></a><span id="l8.64">   -moz-box-align: stretch;</span>
<a href="#l8.65"></a><span id="l8.65">   font-weight: bold;</span>
<a href="#l8.66"></a><span id="l8.66"> }</span>
<a href="#l8.67"></a><span id="l8.67"> </span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+#collapseddateValue {</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+  -moz-box-align: stretch;</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+  text-align: right;</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+  padding-right: 0.5em !important;</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+}</span>
<a href="#l8.73"></a><span id="l8.73"> </span>
<a href="#l8.74"></a><span id="l8.74"> #showDetailsButton {</span>
<a href="#l8.75"></a><span id="l8.75">   -moz-appearance: none !important;</span>
<a href="#l8.76"></a><span id="l8.76">   border: 2px solid transparent;</span>
<a href="#l8.77"></a><span id="l8.77">   background-color: transparent;</span>
<a href="#l8.78"></a><span id="l8.78">   width: 22px;</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+  padding-bottom: 0px !important;</span>
<a href="#l8.80"></a><span id="l8.80">   height: 22px;</span>
<a href="#l8.81"></a><span id="l8.81">   background-image: url(&quot;chrome://messenger/skin/icons/chevron.png&quot;);</span>
<a href="#l8.82"></a><span id="l8.82">   background-repeat: no-repeat;</span>
<a href="#l8.83"></a><span id="l8.83">   background-position: center center;</span>
<a href="#l8.84"></a><span id="l8.84"> }</span>
<a href="#l8.85"></a><span id="l8.85"> </span>
<a href="#l8.86"></a><span id="l8.86"> #showDetailsButton:hover {</span>
<a href="#l8.87"></a><span id="l8.87">   background-color: rgb(230,231,227);</span>
<a href="#l8.88"></a><span id="l8.88">   border: 2px solid #C0C3C6;</span>
<a href="#l8.89"></a><span id="l8.89"> }</span>
<a href="#l8.90"></a><span id="l8.90"> </span>
<a href="#l8.91"></a><span id="l8.91" class="difflineminus">-#trashButton {</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineminus">-  -moz-box-orient: vertical;</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineminus">- list-style-image: url(&quot;chrome://messenger/skin/icons/folder.png&quot;);</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineminus">-  -moz-image-region: rect(0 144px 16px 128px);</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineminus">-}</span>
<a href="#l8.96"></a><span id="l8.96"> </span>
<a href="#l8.97"></a><span id="l8.97"> /* ::::: expanded header pane ::::: */</span>
<a href="#l8.98"></a><span id="l8.98"> </span>
<a href="#l8.99"></a><span id="l8.99"> #expandedHeadersButtonBox {</span>
<a href="#l8.100"></a><span id="l8.100">   padding-top: 0.5em;</span>
<a href="#l8.101"></a><span id="l8.101">   padding-bottom: 0;</span>
<a href="#l8.102"></a><span id="l8.102"> }</span>
<a href="#l8.103"></a><span id="l8.103"> </span>
<a href="#l8.104"></a><span id="l8.104"> #expandedfromBox {</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineminus">-  padding-top: .5em;</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l8.107"></a><span id="l8.107"> }</span>
<a href="#l8.108"></a><span id="l8.108"> /* ::::: edit message bar ::::: */</span>
<a href="#l8.109"></a><span id="l8.109"> </span>
<a href="#l8.110"></a><span id="l8.110"> #editMessageBox</span>
<a href="#l8.111"></a><span id="l8.111"> {</span>
<a href="#l8.112"></a><span id="l8.112">   min-width: 1px;</span>
<a href="#l8.113"></a><span id="l8.113">   -moz-border-radius-bottomleft: 0.2em;</span>
<a href="#l8.114"></a><span id="l8.114">   -moz-border-radius-bottomright: 0.2em;</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineat">@@ -249,17 +251,17 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l8.116"></a><span id="l8.116"> }</span>
<a href="#l8.117"></a><span id="l8.117"> </span>
<a href="#l8.118"></a><span id="l8.118"> #msgHeaderViewDeck {</span>
<a href="#l8.119"></a><span id="l8.119">   margin: 0;</span>
<a href="#l8.120"></a><span id="l8.120">   padding: 0;</span>
<a href="#l8.121"></a><span id="l8.121"> }</span>
<a href="#l8.122"></a><span id="l8.122"> </span>
<a href="#l8.123"></a><span id="l8.123"> .msgHeaderView-button {</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineminus">-  min-width: 1px;</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineplus">+  min-width: 1px !important;</span>
<a href="#l8.126"></a><span id="l8.126">   -moz-appearance: none;</span>
<a href="#l8.127"></a><span id="l8.127">   font-size: 95%;</span>
<a href="#l8.128"></a><span id="l8.128">   color: black;</span>
<a href="#l8.129"></a><span id="l8.129">   margin-left: 0px;</span>
<a href="#l8.130"></a><span id="l8.130">   padding-left: 3px;</span>
<a href="#l8.131"></a><span id="l8.131">   padding-right: 3px;</span>
<a href="#l8.132"></a><span id="l8.132">   padding-top: 0px;</span>
<a href="#l8.133"></a><span id="l8.133">   padding-bottom: 0px;</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineat">@@ -267,78 +269,135 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l8.135"></a><span id="l8.135">   border: 2px solid #C0C3C6;</span>
<a href="#l8.136"></a><span id="l8.136">   -moz-border-radius: 4px;</span>
<a href="#l8.137"></a><span id="l8.137">   -moz-border-top-colors: none;</span>
<a href="#l8.138"></a><span id="l8.138">   -moz-border-right-colors: none;</span>
<a href="#l8.139"></a><span id="l8.139">   -moz-border-bottom-colors: none;</span>
<a href="#l8.140"></a><span id="l8.140">   -moz-border-left-colors: none;</span>
<a href="#l8.141"></a><span id="l8.141"> }</span>
<a href="#l8.142"></a><span id="l8.142"> </span>
<a href="#l8.143"></a><span id="l8.143" class="difflineplus">+/* had to set a silly attribute on the XUL element to make it so that this</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineplus">+  rule overrides the rule above.  Better fix wanted! */</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineplus">+.hdrTrashButton[trash=&quot;true&quot;] { </span>
<a href="#l8.146"></a><span id="l8.146" class="difflineplus">+  -moz-box-orient: vertical !important;</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/folder.png&quot;) !important;</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineplus">+  -moz-image-region: rect(1px 142px 15px 126px);</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineplus">+}</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineplus">+</span>
<a href="#l8.151"></a><span id="l8.151"> .msgHeaderView-button[secondary=&quot;true&quot;] {</span>
<a href="#l8.152"></a><span id="l8.152">   background: none;</span>
<a href="#l8.153"></a><span id="l8.153"> }</span>
<a href="#l8.154"></a><span id="l8.154"> </span>
<a href="#l8.155"></a><span id="l8.155"> .msgHeaderView-button &gt; .toolbarbutton-text {</span>
<a href="#l8.156"></a><span id="l8.156">   margin: 0;</span>
<a href="#l8.157"></a><span id="l8.157">   padding: 0;</span>
<a href="#l8.158"></a><span id="l8.158"> }</span>
<a href="#l8.159"></a><span id="l8.159"> </span>
<a href="#l8.160"></a><span id="l8.160"> .msgHeaderView-button:hover {</span>
<a href="#l8.161"></a><span id="l8.161">   background-color: rgb(230,231,227);</span>
<a href="#l8.162"></a><span id="l8.162">   border: 2px solid #B0B3B6;</span>
<a href="#l8.163"></a><span id="l8.163"> }</span>
<a href="#l8.164"></a><span id="l8.164"> </span>
<a href="#l8.165"></a><span id="l8.165" class="difflineminus">-.msgHeaderView-button {</span>
<a href="#l8.166"></a><span id="l8.166" class="difflineminus">-  min-width: 1px !important;</span>
<a href="#l8.167"></a><span id="l8.167" class="difflineminus">-}</span>
<a href="#l8.168"></a><span id="l8.168" class="difflineminus">-</span>
<a href="#l8.169"></a><span id="l8.169"> .headerNameBox {</span>
<a href="#l8.170"></a><span id="l8.170">   width: 7.7em;</span>
<a href="#l8.171"></a><span id="l8.171">   background-color: transparent;</span>
<a href="#l8.172"></a><span id="l8.172"> }</span>
<a href="#l8.173"></a><span id="l8.173"> </span>
<a href="#l8.174"></a><span id="l8.174"> .headerName {</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineminus">-  margin: 0 .5em 5px 0;</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineplus">+  color: #888a85; /* lower contrast */</span>
<a href="#l8.177"></a><span id="l8.177">   text-align: right;</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineminus">-  color: #888a85; /* lower contrast */</span>
<a href="#l8.179"></a><span id="l8.179">   background-color: transparent;</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineplus">+  padding: 0px;</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineplus">+  margin-top: 0;</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineplus">+  margin-right: 0;</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineplus">+}</span>
<a href="#l8.184"></a><span id="l8.184" class="difflineplus">+</span>
<a href="#l8.185"></a><span id="l8.185" class="difflineplus">+.headerValueBox {</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineplus">+  overflow:visible;</span>
<a href="#l8.187"></a><span id="l8.187" class="difflineplus">+  margin-bottom: 0 !important;</span>
<a href="#l8.188"></a><span id="l8.188" class="difflineplus">+  padding-bottom: 0 !important;</span>
<a href="#l8.189"></a><span id="l8.189"> }</span>
<a href="#l8.190"></a><span id="l8.190"> </span>
<a href="#l8.191"></a><span id="l8.191"> .headerValue {</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineminus">-  margin: 0;</span>
<a href="#l8.193"></a><span id="l8.193">   min-width: 50px;</span>
<a href="#l8.194"></a><span id="l8.194">   white-space: normal;</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineplus">+  color: black !important;</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineplus">+  line-height: 1.4em;</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineplus">+</span>
<a href="#l8.198"></a><span id="l8.198" class="difflineplus">+  -moz-appearance: none !important;</span>
<a href="#l8.199"></a><span id="l8.199" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l8.200"></a><span id="l8.200" class="difflineplus">+</span>
<a href="#l8.201"></a><span id="l8.201" class="difflineplus">+  padding: 0px !important;</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineplus">+  margin: 0px !important;</span>
<a href="#l8.203"></a><span id="l8.203" class="difflineplus">+  margin-left: 3px !important;</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineplus">+  border: none !important;</span>
<a href="#l8.205"></a><span id="l8.205">   background-color: transparent;</span>
<a href="#l8.206"></a><span id="l8.206" class="difflineminus">-  color: black !important;</span>
<a href="#l8.207"></a><span id="l8.207"> }</span>
<a href="#l8.208"></a><span id="l8.208"> </span>
<a href="#l8.209"></a><span id="l8.209" class="difflineminus">-.headerValueBox {</span>
<a href="#l8.210"></a><span id="l8.210" class="difflineminus">-  margin: 0 0 5px 0; /* XXX needed?*/</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineplus">+.headerValue[containsEmail=&quot;true&quot;] {</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineplus">+  margin-left: 0px !important;</span>
<a href="#l8.213"></a><span id="l8.213"> }</span>
<a href="#l8.214"></a><span id="l8.214"> </span>
<a href="#l8.215"></a><span id="l8.215"> .headerValueBox[singleline=&quot;true&quot;] {</span>
<a href="#l8.216"></a><span id="l8.216" class="difflineplus">+  height: 1.8em;</span>
<a href="#l8.217"></a><span id="l8.217">   overflow: hidden;</span>
<a href="#l8.218"></a><span id="l8.218"> }</span>
<a href="#l8.219"></a><span id="l8.219"> </span>
<a href="#l8.220"></a><span id="l8.220"> .headerValueUrl {</span>
<a href="#l8.221"></a><span id="l8.221">   cursor: pointer;</span>
<a href="#l8.222"></a><span id="l8.222">   color: #0000FF;</span>
<a href="#l8.223"></a><span id="l8.223">   text-decoration: underline;</span>
<a href="#l8.224"></a><span id="l8.224"> }</span>
<a href="#l8.225"></a><span id="l8.225"> </span>
<a href="#l8.226"></a><span id="l8.226" class="difflineplus">+.headerValueUrl:hover {</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineplus">+  color: red;</span>
<a href="#l8.228"></a><span id="l8.228" class="difflineplus">+}</span>
<a href="#l8.229"></a><span id="l8.229" class="difflineplus">+</span>
<a href="#l8.230"></a><span id="l8.230" class="difflineplus">+.headerField {</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineplus">+  color: inherit;</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineplus">+}</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineplus">+</span>
<a href="#l8.234"></a><span id="l8.234"> #collapsedsubjectBox {</span>
<a href="#l8.235"></a><span id="l8.235">   margin: 0px;</span>
<a href="#l8.236"></a><span id="l8.236">   padding: 0px;</span>
<a href="#l8.237"></a><span id="l8.237"> }</span>
<a href="#l8.238"></a><span id="l8.238"> </span>
<a href="#l8.239"></a><span id="l8.239" class="difflineplus">+#collapsedfromBox {</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineplus">+}</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineplus">+</span>
<a href="#l8.243"></a><span id="l8.243"> #collapsedfromValue &gt; .headerNameBox {</span>
<a href="#l8.244"></a><span id="l8.244">   display: none;</span>
<a href="#l8.245"></a><span id="l8.245"> }</span>
<a href="#l8.246"></a><span id="l8.246"> </span>
<a href="#l8.247"></a><span id="l8.247" class="difflineminus">-#junkButton[disabled=&quot;true&quot;] {</span>
<a href="#l8.248"></a><span id="l8.248" class="difflineplus">+#collapsedtoCcBccValue &gt; .headerNameBox {</span>
<a href="#l8.249"></a><span id="l8.249" class="difflineplus">+  display: none;</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineplus">+}</span>
<a href="#l8.251"></a><span id="l8.251" class="difflineplus">+</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineplus">+#collapsedtoCcBccValue &gt; .headerValueBox[singleline] {</span>
<a href="#l8.253"></a><span id="l8.253" class="difflineplus">+  padding-top: 0;</span>
<a href="#l8.254"></a><span id="l8.254" class="difflineplus">+  padding-bottom: 0;</span>
<a href="#l8.255"></a><span id="l8.255" class="difflineplus">+}</span>
<a href="#l8.256"></a><span id="l8.256" class="difflineplus">+</span>
<a href="#l8.257"></a><span id="l8.257" class="difflineplus">+#collapsedtoCcBccValue &gt; .headerValueBox:not([singleline]) {</span>
<a href="#l8.258"></a><span id="l8.258" class="difflineplus">+  padding-top: 0.5em;</span>
<a href="#l8.259"></a><span id="l8.259" class="difflineplus">+  padding-bottom: 0;</span>
<a href="#l8.260"></a><span id="l8.260" class="difflineplus">+}</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineplus">+</span>
<a href="#l8.262"></a><span id="l8.262" class="difflineplus">+.moreIndicator {</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineplus">+  font-weight: bold;</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineplus">+  font-size: small;</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineplus">+}</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineplus">+</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineplus">+.moreIndicator:hover {</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineplus">+  text-decoration: underline;</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+  color: darkred;</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineplus">+}</span>
<a href="#l8.271"></a><span id="l8.271" class="difflineplus">+</span>
<a href="#l8.272"></a><span id="l8.272" class="difflineplus">+.hdrJunkButton[disabled=&quot;true&quot;] {</span>
<a href="#l8.273"></a><span id="l8.273">   background: none;</span>
<a href="#l8.274"></a><span id="l8.274">   opacity: 0;</span>
<a href="#l8.275"></a><span id="l8.275"> }</span>
<a href="#l8.276"></a><span id="l8.276"> </span>
<a href="#l8.277"></a><span id="l8.277"> .tagvalue {</span>
<a href="#l8.278"></a><span id="l8.278">   margin-left: 0px;</span>
<a href="#l8.279"></a><span id="l8.279">   background-image: url(&quot;chrome://messenger/skin/tagbg.png&quot;);</span>
<a href="#l8.280"></a><span id="l8.280">   color: black;</span>
<a href="#l8.281"></a><span id="l8.281" class="difflineat">@@ -366,41 +425,71 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l8.282"></a><span id="l8.282">   -moz-padding-start: 2px;</span>
<a href="#l8.283"></a><span id="l8.283">   -moz-box-pack: end;</span>
<a href="#l8.284"></a><span id="l8.284"> }</span>
<a href="#l8.285"></a><span id="l8.285"> </span>
<a href="#l8.286"></a><span id="l8.286"> </span>
<a href="#l8.287"></a><span id="l8.287"> /* ::::: msg header email addresses ::::: */</span>
<a href="#l8.288"></a><span id="l8.288"> </span>
<a href="#l8.289"></a><span id="l8.289"> .emailDisplayButton {</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineminus">-  cursor: pointer;</span>
<a href="#l8.291"></a><span id="l8.291">   margin: 0;</span>
<a href="#l8.292"></a><span id="l8.292" class="difflineplus">+  padding-left: 3px !important;</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineplus">+  padding-right: 3px !important;</span>
<a href="#l8.294"></a><span id="l8.294" class="difflineplus">+  padding-top: .1em;</span>
<a href="#l8.295"></a><span id="l8.295" class="difflineplus">+  padding-bottom: .1em;</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineplus">+  margin-bottom: 3px !important;</span>
<a href="#l8.297"></a><span id="l8.297">   background-color: transparent;</span>
<a href="#l8.298"></a><span id="l8.298"> }</span>
<a href="#l8.299"></a><span id="l8.299"> </span>
<a href="#l8.300"></a><span id="l8.300" class="difflineminus">-.headerValueUrl:hover,</span>
<a href="#l8.301"></a><span id="l8.301"> .emailDisplayButton:hover {</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineminus">-  color: #2A46C7;</span>
<a href="#l8.303"></a><span id="l8.303" class="difflineplus">+  cursor: pointer;</span>
<a href="#l8.304"></a><span id="l8.304" class="difflineplus">+  -moz-border-radius: 2px;</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineplus">+  background-color: #729fcf; /* tango blue */</span>
<a href="#l8.306"></a><span id="l8.306" class="difflineplus">+}</span>
<a href="#l8.307"></a><span id="l8.307" class="difflineplus">+</span>
<a href="#l8.308"></a><span id="l8.308" class="difflineplus">+mail-emailaddress[selected=&quot;true&quot;] .emailDisplayButton{</span>
<a href="#l8.309"></a><span id="l8.309" class="difflineplus">+  /* when an email address context menu is selected,</span>
<a href="#l8.310"></a><span id="l8.310" class="difflineplus">+    make sure that the email bubble stays displayed, and</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineplus">+    tweak the bottom to blend in more w/ the menu */</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineplus">+  cursor: pointer;</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineplus">+  -moz-border-radius: 3px;</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineplus">+  background-color: #729fcf; /* tango orange */</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineplus">+  -moz-border-radius-bottomleft: 0;</span>
<a href="#l8.316"></a><span id="l8.316" class="difflineplus">+  -moz-border-radius-bottomright: 0;</span>
<a href="#l8.317"></a><span id="l8.317"> }</span>
<a href="#l8.318"></a><span id="l8.318"> </span>
<a href="#l8.319"></a><span id="l8.319" class="difflineminus">-.headerValueUrl:hover {</span>
<a href="#l8.320"></a><span id="l8.320" class="difflineminus">-  background: url(&quot;chrome://messenger/skin/icons/arrow-dn-blue.png&quot;) no-repeat center right;</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineplus">+.emailSeparator {</span>
<a href="#l8.322"></a><span id="l8.322" class="difflineplus">+  /* this is for the comma in between email addresses */</span>
<a href="#l8.323"></a><span id="l8.323" class="difflineplus">+  -moz-margin-start: -6px; /* squeeze it inside the bubble, by the star */</span>
<a href="#l8.324"></a><span id="l8.324" class="difflineplus">+}</span>
<a href="#l8.325"></a><span id="l8.325" class="difflineplus">+</span>
<a href="#l8.326"></a><span id="l8.326" class="difflineplus">+.emailDisplayButton:focus {</span>
<a href="#l8.327"></a><span id="l8.327" class="difflineplus">+  border: 1px dotted #729fcf; /* tango blue */</span>
<a href="#l8.328"></a><span id="l8.328"> }</span>
<a href="#l8.329"></a><span id="l8.329"> </span>
<a href="#l8.330"></a><span id="l8.330" class="difflineminus">-.emailDisplayButton:focus, .emailStar:focus, .emailPopup:focus {</span>
<a href="#l8.331"></a><span id="l8.331" class="difflineplus">+.emailStar:focus {</span>
<a href="#l8.332"></a><span id="l8.332">   border: 1px dotted;</span>
<a href="#l8.333"></a><span id="l8.333"> }</span>
<a href="#l8.334"></a><span id="l8.334"> </span>
<a href="#l8.335"></a><span id="l8.335" class="difflineplus">+.emaillabel {</span>
<a href="#l8.336"></a><span id="l8.336" class="difflineplus">+  padding: 0px !important;  /* override &lt;label&gt; defaults */</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineplus">+  margin: 0px !important;  /* override &lt;label&gt; defaults */</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineplus">+  overflow: hidden;</span>
<a href="#l8.339"></a><span id="l8.339" class="difflineplus">+}</span>
<a href="#l8.340"></a><span id="l8.340" class="difflineplus">+</span>
<a href="#l8.341"></a><span id="l8.341"> .emailStar {</span>
<a href="#l8.342"></a><span id="l8.342">   max-width: 1em;</span>
<a href="#l8.343"></a><span id="l8.343">   max-height: 1em;</span>
<a href="#l8.344"></a><span id="l8.344" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l8.345"></a><span id="l8.345" class="difflineplus">+  -moz-box-orient: vertical;</span>
<a href="#l8.346"></a><span id="l8.346">   padding: 0px;</span>
<a href="#l8.347"></a><span id="l8.347" class="difflineminus">-  margin: 0px 2px;</span>
<a href="#l8.348"></a><span id="l8.348" class="difflineplus">+  -moz-margin-start: -2px !important;</span>
<a href="#l8.349"></a><span id="l8.349" class="difflineplus">+  /*margin: 0px 2px;*/</span>
<a href="#l8.350"></a><span id="l8.350">   list-style-image: url(&quot;chrome://messenger/skin/starContact.png&quot;);</span>
<a href="#l8.351"></a><span id="l8.351" class="difflineminus">-  -moz-image-region:rect(0px 16px 16px 0px);</span>
<a href="#l8.352"></a><span id="l8.352" class="difflineplus">+  -moz-image-region: rect(0px, 16px, 16px, 0px);</span>
<a href="#l8.353"></a><span id="l8.353"> }</span>
<a href="#l8.354"></a><span id="l8.354"> </span>
<a href="#l8.355"></a><span id="l8.355"> .emailStar:hover {</span>
<a href="#l8.356"></a><span id="l8.356">   -moz-image-region:rect(0px 32px 16px 16px);</span>
<a href="#l8.357"></a><span id="l8.357"> }</span>
<a href="#l8.358"></a><span id="l8.358"> </span>
<a href="#l8.359"></a><span id="l8.359"> .emailStar:hover:active {</span>
<a href="#l8.360"></a><span id="l8.360">   -moz-image-region:rect(0px 48px 16px 32px);</span>
<a href="#l8.361"></a><span id="l8.361" class="difflineat">@@ -419,17 +508,17 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l8.362"></a><span id="l8.362"> </span>
<a href="#l8.363"></a><span id="l8.363"> .emailPopup:hover {</span>
<a href="#l8.364"></a><span id="l8.364">   list-style-image: url(&quot;chrome://messenger/skin/icons/arrow-dn-blue.png&quot;);</span>
<a href="#l8.365"></a><span id="l8.365"> }</span>
<a href="#l8.366"></a><span id="l8.366"> </span>
<a href="#l8.367"></a><span id="l8.367"> /* ::::: email address twisty ::::: */</span>
<a href="#l8.368"></a><span id="l8.368"> </span>
<a href="#l8.369"></a><span id="l8.369"> .addresstwisty {</span>
<a href="#l8.370"></a><span id="l8.370" class="difflineminus">-  -moz-padding-end: 5px;</span>
<a href="#l8.371"></a><span id="l8.371" class="difflineplus">+  -moz-padding-end: 0px;</span>
<a href="#l8.372"></a><span id="l8.372">   padding-top: 4px;</span>
<a href="#l8.373"></a><span id="l8.373">   list-style-image:url(&quot;chrome://messenger/skin/icons/arrow/arrow-right-dim.png&quot;);</span>
<a href="#l8.374"></a><span id="l8.374"> }</span>
<a href="#l8.375"></a><span id="l8.375"> </span>
<a href="#l8.376"></a><span id="l8.376"> .addresstwisty:hover {</span>
<a href="#l8.377"></a><span id="l8.377">   list-style-image:url(&quot;chrome://messenger/skin/icons/arrow/arrow-right.png&quot;);</span>
<a href="#l8.378"></a><span id="l8.378"> }</span>
<a href="#l8.379"></a><span id="l8.379"> </span>
<a href="#l8.380"></a><span id="l8.380" class="difflineat">@@ -446,28 +535,13 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l8.381"></a><span id="l8.381"> .expandHeaderViewButton {</span>
<a href="#l8.382"></a><span id="l8.382">   list-style-image: url(&quot;chrome://global/skin/tree/twisty-open.png&quot;);</span>
<a href="#l8.383"></a><span id="l8.383"> }</span>
<a href="#l8.384"></a><span id="l8.384"> </span>
<a href="#l8.385"></a><span id="l8.385"> .collapsedHeaderViewButton  {</span>
<a href="#l8.386"></a><span id="l8.386">   list-style-image: url(&quot;chrome://global/skin/tree/twisty-clsd.png&quot;);</span>
<a href="#l8.387"></a><span id="l8.387"> }</span>
<a href="#l8.388"></a><span id="l8.388"> </span>
<a href="#l8.389"></a><span id="l8.389" class="difflineminus">-/* ::::: collapsed view styles ::::: */</span>
<a href="#l8.390"></a><span id="l8.390" class="difflineminus">-</span>
<a href="#l8.391"></a><span id="l8.391" class="difflineminus">-#collapseddateValue {</span>
<a href="#l8.392"></a><span id="l8.392" class="difflineminus">-  margin: 0 .5em;</span>
<a href="#l8.393"></a><span id="l8.393" class="difflineminus">-  text-align: right;</span>
<a href="#l8.394"></a><span id="l8.394" class="difflineminus">-  background-color: transparent;</span>
<a href="#l8.395"></a><span id="l8.395" class="difflineminus">-  color: inherit;</span>
<a href="#l8.396"></a><span id="l8.396" class="difflineminus">-  padding-right: .5em !important;</span>
<a href="#l8.397"></a><span id="l8.397" class="difflineplus">+mail-multi-emailHeaderField,</span>
<a href="#l8.398"></a><span id="l8.398" class="difflineplus">+mail-headerfield {</span>
<a href="#l8.399"></a><span id="l8.399" class="difflineplus">+  margin: 0;</span>
<a href="#l8.400"></a><span id="l8.400" class="difflineplus">+  padding: 0;</span>
<a href="#l8.401"></a><span id="l8.401"> }</span>
<a href="#l8.402"></a><span id="l8.402" class="difflineminus">-</span>
<a href="#l8.403"></a><span id="l8.403" class="difflineminus">-.collapsedHeaderDisplayName { </span>
<a href="#l8.404"></a><span id="l8.404" class="difflineminus">-  min-height: 16px;</span>
<a href="#l8.405"></a><span id="l8.405" class="difflineminus">-  background-color: transparent;</span>
<a href="#l8.406"></a><span id="l8.406" class="difflineminus">-}</span>
<a href="#l8.407"></a><span id="l8.407" class="difflineminus">-</span>
<a href="#l8.408"></a><span id="l8.408" class="difflineminus">-.collapsedHeaderValue {</span>
<a href="#l8.409"></a><span id="l8.409" class="difflineminus">-  margin: 0;</span>
<a href="#l8.410"></a><span id="l8.410" class="difflineminus">-  color: inherit;</span>
<a href="#l8.411"></a><span id="l8.411" class="difflineminus">-  background-color: transparent;</span>
<a href="#l8.412"></a><span id="l8.412" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/base/resources/content/mailWidgets.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/base/resources/content/mailWidgets.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,10 +1,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> &lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l9.5"></a><span id="l9.5"> </span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+&lt;!DOCTYPE bindings [</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineplus">+&lt;!ENTITY % msgHdrViewOverlayDTD SYSTEM &quot;chrome://messenger/locale/msgHdrViewOverlay.dtd&quot; &gt;</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineplus">+%msgHdrViewOverlayDTD;</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineplus">+&lt;!ENTITY % messengerDTD SYSTEM &quot;chrome://messenger/locale/messenger.dtd&quot; &gt;</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+%messengerDTD;</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+]&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+</span>
<a href="#l9.13"></a><span id="l9.13"> &lt;bindings   id=&quot;mailBindings&quot;</span>
<a href="#l9.14"></a><span id="l9.14">             xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l9.15"></a><span id="l9.15">             xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l9.16"></a><span id="l9.16">             xmlns:nc=&quot;http://home.netscape.com/NC-rdf#&quot;</span>
<a href="#l9.17"></a><span id="l9.17">             xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">   &lt;!-- dummy widget to force this file to load --&gt;</span>
<a href="#l9.20"></a><span id="l9.20">   &lt;binding id=&quot;dummy&quot; extends=&quot;xul:box&quot;/&gt;</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -150,98 +157,124 @@</span>
<a href="#l9.22"></a><span id="l9.22">         &lt;xul:image class=&quot;descriptioncell-icon&quot; xbl:inherits=&quot;src=image&quot;/&gt;</span>
<a href="#l9.23"></a><span id="l9.23">         &lt;xul:label class=&quot;descriptioncell-label&quot; xbl:inherits=&quot;value=label,flex=flexlabel,crop,disabled,context&quot; flex=&quot;1&quot; dir=&quot;ltr&quot; crop=&quot;center&quot;/&gt;</span>
<a href="#l9.24"></a><span id="l9.24">       &lt;/xul:hbox&gt;</span>
<a href="#l9.25"></a><span id="l9.25">     &lt;/content&gt;</span>
<a href="#l9.26"></a><span id="l9.26">   &lt;/binding&gt;</span>
<a href="#l9.27"></a><span id="l9.27"> </span>
<a href="#l9.28"></a><span id="l9.28">   &lt;!-- Message Pane Widgets --&gt;</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-  &lt;!-- mail-toggle-headerfield: non email addrss headers which have a toggle associated with them (i.e. the subject).</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-       use label to set the header name.</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-       use headerValue to set the header value. --&gt;</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+  &lt;!-- mail-toggle-headerfield: Non-email addrs headers which have a toggle</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+       associated with them (i.e. the subject).</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+         Use label to set the header name.</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+         Use headerValue to set the header value. --&gt;</span>
<a href="#l9.37"></a><span id="l9.37">   &lt;binding id=&quot;mail-toggle-headerfield&quot;&gt;</span>
<a href="#l9.38"></a><span id="l9.38">     &lt;content&gt;</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">-      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l9.41"></a><span id="l9.41">         &lt;xul:image class=&quot;expandHeaderViewButton&quot; xbl:inherits=&quot;onclick=ontwistyclick&quot;/&gt;</span>
<a href="#l9.42"></a><span id="l9.42">         &lt;xul:spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l9.43"></a><span id="l9.43">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; control=&quot;headerValue&quot;/&gt;</span>
<a href="#l9.44"></a><span id="l9.44">       &lt;/xul:hbox&gt;</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-      &lt;xul:textbox class=&quot;headerValue plain&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+      &lt;xul:textbox class=&quot;headerValue&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.47"></a><span id="l9.47">     &lt;/content&gt;</span>
<a href="#l9.48"></a><span id="l9.48"> </span>
<a href="#l9.49"></a><span id="l9.49">     &lt;implementation&gt;</span>
<a href="#l9.50"></a><span id="l9.50">       &lt;property name=&quot;headerValue&quot; onset=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'headerValue').value = val;&quot;/&gt;</span>
<a href="#l9.51"></a><span id="l9.51">     &lt;/implementation&gt;</span>
<a href="#l9.52"></a><span id="l9.52">   &lt;/binding&gt;</span>
<a href="#l9.53"></a><span id="l9.53"> </span>
<a href="#l9.54"></a><span id="l9.54">   &lt;!-- mail-headerfield: presents standard text header name &amp; value pairs. Don't use this for email addresses.</span>
<a href="#l9.55"></a><span id="l9.55">        use label to set the header name.</span>
<a href="#l9.56"></a><span id="l9.56">        use headerValue to set the header value. --&gt;</span>
<a href="#l9.57"></a><span id="l9.57">   &lt;binding id=&quot;mail-headerfield&quot;&gt;</span>
<a href="#l9.58"></a><span id="l9.58">     &lt;content&gt;</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineplus">+      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l9.61"></a><span id="l9.61">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; control=&quot;headerValue&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.62"></a><span id="l9.62">       &lt;/xul:hbox&gt;</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-      &lt;xul:textbox class=&quot;headerValue plain&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineplus">+      &lt;xul:textbox class=&quot;headerValue&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.65"></a><span id="l9.65">     &lt;/content&gt;</span>
<a href="#l9.66"></a><span id="l9.66"> </span>
<a href="#l9.67"></a><span id="l9.67">     &lt;implementation&gt;</span>
<a href="#l9.68"></a><span id="l9.68">       &lt;property name=&quot;headerValue&quot; onset=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'headerValue').value = val;&quot;/&gt;</span>
<a href="#l9.69"></a><span id="l9.69">     &lt;/implementation&gt;</span>
<a href="#l9.70"></a><span id="l9.70">   &lt;/binding&gt;</span>
<a href="#l9.71"></a><span id="l9.71"> </span>
<a href="#l9.72"></a><span id="l9.72">   &lt;binding id=&quot;mail-urlfield&quot; extends=&quot;chrome://messenger/content/mailWidgets.xml#mail-headerfield&quot;&gt;</span>
<a href="#l9.73"></a><span id="l9.73">     &lt;content&gt;</span>
<a href="#l9.74"></a><span id="l9.74">       &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l9.75"></a><span id="l9.75">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.76"></a><span id="l9.76">       &lt;/xul:hbox&gt;</span>
<a href="#l9.77"></a><span id="l9.77">       &lt;xul:label onclick=&quot;if (event.button != 2) openUILink(event.target.value, event);&quot;</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineminus">-                 class=&quot;headerValue plain text-link headerValueUrl&quot;</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+                 class=&quot;headerValue text-link headerValueUrl&quot;</span>
<a href="#l9.80"></a><span id="l9.80">                  anonid=&quot;headerValue&quot; flex=&quot;1&quot; readonly=&quot;true&quot; context=&quot;copyUrlPopup&quot;/&gt;</span>
<a href="#l9.81"></a><span id="l9.81">     &lt;/content&gt;</span>
<a href="#l9.82"></a><span id="l9.82">   &lt;/binding&gt;</span>
<a href="#l9.83"></a><span id="l9.83"> </span>
<a href="#l9.84"></a><span id="l9.84">   &lt;binding id=&quot;mail-emailheaderfield&quot;&gt;</span>
<a href="#l9.85"></a><span id="l9.85">     &lt;content&gt;</span>
<a href="#l9.86"></a><span id="l9.86">       &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l9.87"></a><span id="l9.87">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.88"></a><span id="l9.88">       &lt;/xul:hbox&gt;</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-      &lt;xul:mail-emailaddress class=&quot;headerValue&quot; anonid=&quot;emailAddressNode&quot;/&gt;</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+      &lt;xul:mail-emailaddress class=&quot;headerValue&quot; containsEmail=&quot;true&quot;</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+                             anonid=&quot;emailAddressNode&quot;/&gt;</span>
<a href="#l9.92"></a><span id="l9.92">     &lt;/content&gt;</span>
<a href="#l9.93"></a><span id="l9.93"> </span>
<a href="#l9.94"></a><span id="l9.94">     &lt;implementation&gt;</span>
<a href="#l9.95"></a><span id="l9.95">       &lt;property name=&quot;emailAddressNode&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'emailAddressNode');&quot;</span>
<a href="#l9.96"></a><span id="l9.96">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.97"></a><span id="l9.97">     &lt;/implementation&gt;</span>
<a href="#l9.98"></a><span id="l9.98">   &lt;/binding&gt;</span>
<a href="#l9.99"></a><span id="l9.99"> </span>
<a href="#l9.100"></a><span id="l9.100">   &lt;!-- multi-emailHeaderField: presents multiple emailheaderfields with a toggle --&gt;</span>
<a href="#l9.101"></a><span id="l9.101">   &lt;binding id=&quot;mail-multi-emailHeaderField&quot;&gt;</span>
<a href="#l9.102"></a><span id="l9.102">     &lt;content&gt;</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineminus">-      &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot; pack=&quot;end&quot;&gt;</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-        &lt;xul:image class=&quot;addresstwisty&quot; anonid=&quot;toggleIcon&quot;</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-                   collapsed=&quot;true&quot; onclick=&quot;toggleWrap();&quot;/&gt;</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-        &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-      &lt;/xul:hbox&gt;</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+        &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;baseline&quot; pack=&quot;end&quot;&gt;</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+          &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l9.111"></a><span id="l9.111"> </span>
<a href="#l9.112"></a><span id="l9.112" class="difflineminus">-      &lt;xul:hbox class=&quot;headerValueBox&quot; anonid=&quot;longEmailAddresses&quot; flex=&quot;1&quot;</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineminus">-                onoverflow=&quot;if (event.detail != 1) this.parentNode.toggleIcon.collapsed = false;&quot;</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineminus">-                onunderflow=&quot;if (event.detail != 1) this.parentNode.toggleIcon.collapsed = true;&quot;&gt;</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineminus">-        &lt;xul:description class=&quot;headerValue&quot; anonid=&quot;emailAddresses&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineminus">-      &lt;/xul:hbox&gt;</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineplus">+        &lt;xul:hbox class=&quot;headerValueBox&quot; anonid=&quot;longEmailAddresses&quot; flex=&quot;1&quot;</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineplus">+                  singleline=&quot;true&quot;</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineplus">+                  align=&quot;baseline&quot;</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineplus">+                  onoverflow=&quot;this.parentNode.overflow(event)&quot;</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineplus">+                  onunderflow=&quot;this.parentNode.underflow(event)&quot;&gt;</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineplus">+          &lt;xul:description class=&quot;headerValue&quot; containsEmail=&quot;true&quot;</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineplus">+                           anonid=&quot;emailAddresses&quot; flex=&quot;1&quot;</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineplus">+                           orient=&quot;vertical&quot; pack=&quot;start&quot; /&gt;</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineplus">+          &lt;xul:label class=&quot;moreIndicator&quot; value=&quot;&amp;more.label;&quot; anonid=&quot;more&quot;</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineplus">+                     collapsed=&quot;true&quot;</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineplus">+                     onclick=&quot;this.parentNode.parentNode.toggleWrap()&quot;/&gt;</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l9.129"></a><span id="l9.129">     &lt;/content&gt;</span>
<a href="#l9.130"></a><span id="l9.130"> </span>
<a href="#l9.131"></a><span id="l9.131">     &lt;implementation&gt;</span>
<a href="#l9.132"></a><span id="l9.132">       &lt;constructor&gt;</span>
<a href="#l9.133"></a><span id="l9.133">         &lt;![CDATA[</span>
<a href="#l9.134"></a><span id="l9.134">           this.mAddresses = new Array;</span>
<a href="#l9.135"></a><span id="l9.135">         ]]&gt;</span>
<a href="#l9.136"></a><span id="l9.136">       &lt;/constructor&gt;</span>
<a href="#l9.137"></a><span id="l9.137"> </span>
<a href="#l9.138"></a><span id="l9.138" class="difflineplus">+</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineplus">+      &lt;method name=&quot;overflow&quot;&gt;</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineplus">+        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineplus">+        if (event.detail != 1) this.more.collapsed = false;</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineplus">+        ]]&gt;</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineplus">+</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineplus">+      &lt;method name=&quot;underflow&quot;&gt;</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineplus">+        &lt;parameter name=&quot;event&quot;/&gt;</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineplus">+        &lt;![CDATA[</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineplus">+          if (event.detail != 1) this.more.collapsed = true;</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineplus">+        ]]&gt;</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineplus">+</span>
<a href="#l9.157"></a><span id="l9.157">       &lt;field name=&quot;mAddresses&quot;/&gt;</span>
<a href="#l9.158"></a><span id="l9.158">       &lt;!-- as a perf optimization we are going to keep a cache of email address nodes which we've</span>
<a href="#l9.159"></a><span id="l9.159">            created around for the lifetime of the widget. mSizeOfAddressCache controls how many of these</span>
<a href="#l9.160"></a><span id="l9.160">            elements we keep around --&gt;</span>
<a href="#l9.161"></a><span id="l9.161">       &lt;field name=&quot;mSizeOfAddressCache&quot;&gt;3&lt;/field&gt;</span>
<a href="#l9.162"></a><span id="l9.162"> </span>
<a href="#l9.163"></a><span id="l9.163">       &lt;!-- addAddressView: a public method used to add an address to this widget.</span>
<a href="#l9.164"></a><span id="l9.164">            aAddresses is an object with 3 properties: displayName, emailAddress and fullAddress</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineat">@@ -277,17 +310,17 @@</span>
<a href="#l9.166"></a><span id="l9.166"> </span>
<a href="#l9.167"></a><span id="l9.167">             try</span>
<a href="#l9.168"></a><span id="l9.168">             {</span>
<a href="#l9.169"></a><span id="l9.169">               if (&quot;AddExtraAddressProcessing&quot; in top)</span>
<a href="#l9.170"></a><span id="l9.170">                 AddExtraAddressProcessing(aAddress.emailAddress, aEmailNode);</span>
<a href="#l9.171"></a><span id="l9.171">             }</span>
<a href="#l9.172"></a><span id="l9.172">             catch(ex)</span>
<a href="#l9.173"></a><span id="l9.173">             {</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineminus">-              dump(&quot;AddExtraAddressProcessing failed: &quot; + ex);</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineplus">+              dump(&quot;AddExtraAddressProcessing failed: &quot; + ex + &quot;\n&quot;);</span>
<a href="#l9.176"></a><span id="l9.176">             }</span>
<a href="#l9.177"></a><span id="l9.177">           ]]&gt;</span>
<a href="#l9.178"></a><span id="l9.178">         &lt;/body&gt;</span>
<a href="#l9.179"></a><span id="l9.179">       &lt;/method&gt;</span>
<a href="#l9.180"></a><span id="l9.180"> </span>
<a href="#l9.181"></a><span id="l9.181">       &lt;!-- fillCachedAddresses: private method used to fill up any cached pre-existing</span>
<a href="#l9.182"></a><span id="l9.182">            emailAddress fields without creating new email address fields. Returns a remainder</span>
<a href="#l9.183"></a><span id="l9.183">            for the # of addresses which require new addresses being created.</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineat">@@ -352,34 +385,34 @@</span>
<a href="#l9.185"></a><span id="l9.185">             var remainder = this.fillCachedAddresses(aAddressesNode, aNumAddressesToShow);</span>
<a href="#l9.186"></a><span id="l9.186">             var index = numAddresses - remainder;</span>
<a href="#l9.187"></a><span id="l9.187">             while (index &lt; numAddresses &amp;&amp; index &lt; aNumAddressesToShow)</span>
<a href="#l9.188"></a><span id="l9.188">             {</span>
<a href="#l9.189"></a><span id="l9.189">               var newAddressNode = document.createElement(&quot;mail-emailaddress&quot;);</span>
<a href="#l9.190"></a><span id="l9.190">               if (index)</span>
<a href="#l9.191"></a><span id="l9.191">               {</span>
<a href="#l9.192"></a><span id="l9.192">                 var textNode = document.createElement(&quot;text&quot;);</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineminus">-                textNode.setAttribute(&quot;value&quot;, &quot;, &quot;);</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineplus">+                textNode.setAttribute(&quot;value&quot;, &quot;,&quot;);</span>
<a href="#l9.195"></a><span id="l9.195">                 textNode.setAttribute(&quot;class&quot;, &quot;emailSeparator&quot;);</span>
<a href="#l9.196"></a><span id="l9.196">                 aAddressesNode.appendChild(textNode);</span>
<a href="#l9.197"></a><span id="l9.197">               }</span>
<a href="#l9.198"></a><span id="l9.198"> </span>
<a href="#l9.199"></a><span id="l9.199">               var itemInDocument = aAddressesNode.appendChild(newAddressNode);</span>
<a href="#l9.200"></a><span id="l9.200">               this.updateEmailAddressNode(itemInDocument, this.mAddresses[index]);</span>
<a href="#l9.201"></a><span id="l9.201">               index++;</span>
<a href="#l9.202"></a><span id="l9.202">             }</span>
<a href="#l9.203"></a><span id="l9.203">           ]]&gt;</span>
<a href="#l9.204"></a><span id="l9.204">         &lt;/body&gt;</span>
<a href="#l9.205"></a><span id="l9.205">       &lt;/method&gt;</span>
<a href="#l9.206"></a><span id="l9.206"> </span>
<a href="#l9.207"></a><span id="l9.207">       &lt;property name=&quot;emailAddresses&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'emailAddresses');&quot;</span>
<a href="#l9.208"></a><span id="l9.208">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.209"></a><span id="l9.209">       &lt;property name=&quot;longEmailAddresses&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'longEmailAddresses');&quot;</span>
<a href="#l9.210"></a><span id="l9.210">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineminus">-      &lt;property name=&quot;toggleIcon&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'toggleIcon');&quot;</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineplus">+      &lt;property name=&quot;more&quot; onget=&quot;return document.getAnonymousElementByAttribute(this, 'anonid', 'more');&quot;</span>
<a href="#l9.213"></a><span id="l9.213">         readonly=&quot;true&quot;/&gt;</span>
<a href="#l9.214"></a><span id="l9.214"> </span>
<a href="#l9.215"></a><span id="l9.215">       &lt;!-- buildView: public method used by callers when they are done adding all the email addresses to the widget</span>
<a href="#l9.216"></a><span id="l9.216">            aNumAddressesToShow: total # of addresses to show in the short view --&gt;</span>
<a href="#l9.217"></a><span id="l9.217">       &lt;method name=&quot;buildViews&quot;&gt;</span>
<a href="#l9.218"></a><span id="l9.218">         &lt;body&gt;</span>
<a href="#l9.219"></a><span id="l9.219">           &lt;![CDATA[</span>
<a href="#l9.220"></a><span id="l9.220">             this.fillAddressesNode(this.emailAddresses, -1);</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineat">@@ -408,23 +441,18 @@</span>
<a href="#l9.222"></a><span id="l9.222">             }</span>
<a href="#l9.223"></a><span id="l9.223">           ]]&gt;</span>
<a href="#l9.224"></a><span id="l9.224"> 	&lt;/body&gt;</span>
<a href="#l9.225"></a><span id="l9.225">       &lt;/method&gt;</span>
<a href="#l9.226"></a><span id="l9.226"> </span>
<a href="#l9.227"></a><span id="l9.227">       &lt;method name=&quot;toggleWrap&quot;&gt;</span>
<a href="#l9.228"></a><span id="l9.228">         &lt;body&gt;</span>
<a href="#l9.229"></a><span id="l9.229">           &lt;![CDATA[</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineminus">-            if (this.toggleIcon.hasAttribute(&quot;open&quot;)) {</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineminus">-              this.toggleIcon.removeAttribute(&quot;open&quot;);</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineminus">-              this.longEmailAddresses.setAttribute(&quot;singleline&quot;, &quot;true&quot;);</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineminus">-            } else {</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineminus">-              this.toggleIcon.setAttribute(&quot;open&quot;, &quot;true&quot;);</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineminus">-              this.longEmailAddresses.removeAttribute(&quot;singleline&quot;);</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineminus">-            }</span>
<a href="#l9.237"></a><span id="l9.237" class="difflineplus">+            this.more.collapsed = true;</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineplus">+            this.longEmailAddresses.removeAttribute(&quot;singleline&quot;);</span>
<a href="#l9.239"></a><span id="l9.239">           ]]&gt;</span>
<a href="#l9.240"></a><span id="l9.240">         &lt;/body&gt;</span>
<a href="#l9.241"></a><span id="l9.241">       &lt;/method&gt;</span>
<a href="#l9.242"></a><span id="l9.242"> </span>
<a href="#l9.243"></a><span id="l9.243">       &lt;!-- internal method used to clear both our divs --&gt;</span>
<a href="#l9.244"></a><span id="l9.244">       &lt;method name=&quot;clearChildNodes&quot;&gt;</span>
<a href="#l9.245"></a><span id="l9.245">         &lt;parameter name=&quot;aParentNode&quot;/&gt;</span>
<a href="#l9.246"></a><span id="l9.246">         &lt;body&gt;</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineat">@@ -444,49 +472,47 @@</span>
<a href="#l9.248"></a><span id="l9.248">         &lt;/body&gt;</span>
<a href="#l9.249"></a><span id="l9.249">       &lt;/method&gt;</span>
<a href="#l9.250"></a><span id="l9.250"> </span>
<a href="#l9.251"></a><span id="l9.251">       &lt;method name=&quot;clearHeaderValues&quot;&gt;</span>
<a href="#l9.252"></a><span id="l9.252">         &lt;body&gt;</span>
<a href="#l9.253"></a><span id="l9.253">           &lt;![CDATA[</span>
<a href="#l9.254"></a><span id="l9.254">             // clear out our local state</span>
<a href="#l9.255"></a><span id="l9.255">             this.mAddresses = new Array;</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineminus">-            if (this.toggleIcon.hasAttribute(&quot;open&quot;))</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineminus">-              // no automatic overflow tracking in this case</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineminus">-              this.toggleIcon.collapsed = true;</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineminus">-            this.toggleIcon.removeAttribute(&quot;open&quot;);</span>
<a href="#l9.260"></a><span id="l9.260">             this.longEmailAddresses.setAttribute(&quot;singleline&quot;, &quot;true&quot;);</span>
<a href="#l9.261"></a><span id="l9.261">             // remove anything inside of each of our labels....</span>
<a href="#l9.262"></a><span id="l9.262">             this.clearChildNodes(this.emailAddresses);</span>
<a href="#l9.263"></a><span id="l9.263">           ]]&gt;</span>
<a href="#l9.264"></a><span id="l9.264">         &lt;/body&gt;</span>
<a href="#l9.265"></a><span id="l9.265">       &lt;/method&gt;</span>
<a href="#l9.266"></a><span id="l9.266">     &lt;/implementation&gt;</span>
<a href="#l9.267"></a><span id="l9.267">   &lt;/binding&gt;</span>
<a href="#l9.268"></a><span id="l9.268"> </span>
<a href="#l9.269"></a><span id="l9.269">   &lt;binding id=&quot;mail-emailaddress&quot;&gt;</span>
<a href="#l9.270"></a><span id="l9.270"> #ifndef MOZ_THUNDERBIRD</span>
<a href="#l9.271"></a><span id="l9.271">     &lt;content popup=&quot;emailAddressPopup&quot; context=&quot;emailAddressPopup&quot;&gt;</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineminus">-      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton plain&quot;</span>
<a href="#l9.273"></a><span id="l9.273" class="difflineplus">+      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton&quot;</span>
<a href="#l9.274"></a><span id="l9.274">                  xbl:inherits=&quot;xbl:text=label,crop&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.275"></a><span id="l9.275">       &lt;xul:image class=&quot;emailDisplayImage&quot; anonid=&quot;emailImage&quot;</span>
<a href="#l9.276"></a><span id="l9.276">                  xbl:inherits=&quot;src=image&quot;/&gt;</span>
<a href="#l9.277"></a><span id="l9.277">     &lt;/content&gt;</span>
<a href="#l9.278"></a><span id="l9.278"> #else</span>
<a href="#l9.279"></a><span id="l9.279">     &lt;content&gt;</span>
<a href="#l9.280"></a><span id="l9.280" class="difflineminus">-      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton plain&quot;</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineplus">+      &lt;xul:description anonid=&quot;emailValue&quot; class=&quot;emailDisplayButton&quot;</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineplus">+                       xbl:inherits=&quot;hascard&quot;</span>
<a href="#l9.283"></a><span id="l9.283">                        context=&quot;emailAddressPopup&quot; popup=&quot;emailAddressPopup&quot;</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineminus">-                       xbl:inherits=&quot;xbl:text=label,crop&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.285"></a><span id="l9.285" class="difflineminus">-      &lt;xul:image class=&quot;emailStar&quot; anonid=&quot;emailStar&quot;</span>
<a href="#l9.286"></a><span id="l9.286" class="difflineminus">-                 context=&quot;emailAddressPopup&quot;</span>
<a href="#l9.287"></a><span id="l9.287" class="difflineminus">-                 onclick=&quot;onClickEmailStar(event, this.parentNode);&quot;</span>
<a href="#l9.288"></a><span id="l9.288" class="difflineminus">-                 xbl:inherits=&quot;hascard,tooltiptext=tooltipstar&quot;/&gt;</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineminus">-      &lt;xul:image class=&quot;emailPopup&quot; anonid=&quot;emailPopup&quot;</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineminus">-                 context=&quot;emailAddressPopup&quot; popup=&quot;emailAddressPopup&quot;</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineminus">-                 xbl:inherits=&quot;hascard&quot;/&gt;</span>
<a href="#l9.292"></a><span id="l9.292" class="difflineplus">+                       flex=&quot;1&quot;&gt;</span>
<a href="#l9.293"></a><span id="l9.293" class="difflineplus">+        &lt;xul:label class=&quot;emaillabel&quot; anonid=&quot;emaillabel&quot;</span>
<a href="#l9.294"></a><span id="l9.294" class="difflineplus">+                   xbl:inherits=&quot;value=label,crop&quot;/&gt;</span>
<a href="#l9.295"></a><span id="l9.295" class="difflineplus">+        &lt;xul:image class=&quot;emailStar&quot; anonid=&quot;emailStar&quot;</span>
<a href="#l9.296"></a><span id="l9.296" class="difflineplus">+                   context=&quot;emailAddressPopup&quot;</span>
<a href="#l9.297"></a><span id="l9.297" class="difflineplus">+                   onmousedown=&quot;event.preventDefault();&quot;</span>
<a href="#l9.298"></a><span id="l9.298" class="difflineplus">+                   onclick=&quot;onClickEmailStar(event, this.parentNode.parentNode);&quot;</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineplus">+                   xbl:inherits=&quot;hascard,tooltiptext=tooltipstar&quot;/&gt;</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineplus">+      &lt;/xul:description&gt;</span>
<a href="#l9.301"></a><span id="l9.301">     &lt;/content&gt;</span>
<a href="#l9.302"></a><span id="l9.302"> #endif</span>
<a href="#l9.303"></a><span id="l9.303"> </span>
<a href="#l9.304"></a><span id="l9.304">     &lt;implementation&gt;</span>
<a href="#l9.305"></a><span id="l9.305">       &lt;property name=&quot;label&quot;      onset=&quot;this.getPart('emailValue').setAttribute('label',val); return val;&quot;</span>
<a href="#l9.306"></a><span id="l9.306">                                   onget=&quot;return this.getPart('emailValue').getAttribute('label');&quot;/&gt;</span>
<a href="#l9.307"></a><span id="l9.307">       &lt;property name=&quot;crop&quot;       onset=&quot;this.getPart('emailValue').setAttribute('crop',val); return val;&quot;</span>
<a href="#l9.308"></a><span id="l9.308">                                   onget=&quot;return this.getPart('emailValue').getAttribute('crop');&quot;/&gt;</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineat">@@ -649,17 +675,17 @@</span>
<a href="#l9.310"></a><span id="l9.310">           ]]&gt;</span>
<a href="#l9.311"></a><span id="l9.311">         &lt;/body&gt;</span>
<a href="#l9.312"></a><span id="l9.312">       &lt;/method&gt;</span>
<a href="#l9.313"></a><span id="l9.313">     &lt;/implementation&gt;</span>
<a href="#l9.314"></a><span id="l9.314">   &lt;/binding&gt;</span>
<a href="#l9.315"></a><span id="l9.315"> </span>
<a href="#l9.316"></a><span id="l9.316">   &lt;binding id=&quot;mail-messageid&quot;&gt;</span>
<a href="#l9.317"></a><span id="l9.317">     &lt;content context=&quot;messageIdContext&quot; onclick=&quot;MessageIdClick(this, event);&quot;&gt;</span>
<a href="#l9.318"></a><span id="l9.318" class="difflineminus">-      &lt;xul:label anonid=&quot;messageIdValue&quot; class=&quot;messageIdDisplayButton plain&quot;</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineplus">+      &lt;xul:label anonid=&quot;messageIdValue&quot; class=&quot;messageIdDisplayButton&quot;</span>
<a href="#l9.320"></a><span id="l9.320">                  xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l9.321"></a><span id="l9.321">       &lt;xul:image class=&quot;messageIdDisplayImage&quot; anonid=&quot;messageIdImage&quot;/&gt;</span>
<a href="#l9.322"></a><span id="l9.322">     &lt;/content&gt;</span>
<a href="#l9.323"></a><span id="l9.323"> </span>
<a href="#l9.324"></a><span id="l9.324">     &lt;implementation&gt;</span>
<a href="#l9.325"></a><span id="l9.325">       &lt;property name=&quot;label&quot;      onset=&quot;this.getPart().setAttribute('label',val); return val;&quot;</span>
<a href="#l9.326"></a><span id="l9.326">                                   onget=&quot;return this.getPart('messageIdValue').getAttribute('label');&quot;/&gt;</span>
<a href="#l9.327"></a><span id="l9.327"> </span>
<a href="#l9.328"></a><span id="l9.328" class="difflineat">@@ -673,17 +699,17 @@</span>
<a href="#l9.329"></a><span id="l9.329">   &lt;/binding&gt;</span>
<a href="#l9.330"></a><span id="l9.330"> </span>
<a href="#l9.331"></a><span id="l9.331">   &lt;!-- Header field for showing the tags associated with a message --&gt;</span>
<a href="#l9.332"></a><span id="l9.332">   &lt;binding id=&quot;mail-headerfield-tags&quot;&gt;</span>
<a href="#l9.333"></a><span id="l9.333">     &lt;content&gt;</span>
<a href="#l9.334"></a><span id="l9.334">       &lt;xul:hbox class=&quot;headerNameBox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l9.335"></a><span id="l9.335">         &lt;xul:label class=&quot;headerName&quot; xbl:inherits=&quot;value=label&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.336"></a><span id="l9.336">       &lt;/xul:hbox&gt;</span>
<a href="#l9.337"></a><span id="l9.337" class="difflineminus">-      &lt;xul:label class=&quot;headerValue plain&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineplus">+      &lt;xul:label class=&quot;headerValue&quot; anonid=&quot;headerValue&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l9.339"></a><span id="l9.339">     &lt;/content&gt;</span>
<a href="#l9.340"></a><span id="l9.340"> </span>
<a href="#l9.341"></a><span id="l9.341">     &lt;implementation&gt;</span>
<a href="#l9.342"></a><span id="l9.342">       &lt;property name=&quot;headerValue&quot; onset=&quot;return this.buildTags(val);&quot;/&gt;</span>
<a href="#l9.343"></a><span id="l9.343">       &lt;method name=&quot;buildTags&quot;&gt;</span>
<a href="#l9.344"></a><span id="l9.344">         &lt;parameter name=&quot;aTags&quot;/&gt;</span>
<a href="#l9.345"></a><span id="l9.345">         &lt;body&gt;</span>
<a href="#l9.346"></a><span id="l9.346">           &lt;![CDATA[</span>
<a href="#l9.347"></a><span id="l9.347" class="difflineat">@@ -2079,9 +2105,49 @@</span>
<a href="#l9.348"></a><span id="l9.348">           }</span>
<a href="#l9.349"></a><span id="l9.349"> </span>
<a href="#l9.350"></a><span id="l9.350">           if (gAlertListener)</span>
<a href="#l9.351"></a><span id="l9.351">             gAlertListener.observe(null, &quot;alertclickcallback&quot;, &quot;&quot;);</span>
<a href="#l9.352"></a><span id="l9.352">         ]]&gt;</span>
<a href="#l9.353"></a><span id="l9.353">       &lt;/handler&gt;</span>
<a href="#l9.354"></a><span id="l9.354">     &lt;/handlers&gt;</span>
<a href="#l9.355"></a><span id="l9.355">   &lt;/binding&gt;</span>
<a href="#l9.356"></a><span id="l9.356" class="difflineplus">+</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineplus">+  &lt;binding id=&quot;header-view-button-box&quot;&gt;</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l9.359"></a><span id="l9.359" class="difflineplus">+      &lt;!-- It might be nice to allow a UI for customization of these buttons --&gt;</span>
<a href="#l9.360"></a><span id="l9.360" class="difflineplus">+      &lt;xul:hbox align=&quot;start&quot;&gt;</span>
<a href="#l9.361"></a><span id="l9.361" class="difflineplus">+</span>
<a href="#l9.362"></a><span id="l9.362" class="difflineplus">+        &lt;!-- XXXdmose need to move these commands to a controller, either</span>
<a href="#l9.363"></a><span id="l9.363" class="difflineplus">+             on the header view, the message pane, or the default</span>
<a href="#l9.364"></a><span id="l9.364" class="difflineplus">+             controller --&gt;</span>
<a href="#l9.365"></a><span id="l9.365" class="difflineplus">+</span>
<a href="#l9.366"></a><span id="l9.366" class="difflineplus">+        &lt;!-- XXXdmose need to audit our shortcut/a11y setup and make sure</span>
<a href="#l9.367"></a><span id="l9.367" class="difflineplus">+             these buttons are doing the right thing --&gt;</span>
<a href="#l9.368"></a><span id="l9.368" class="difflineplus">+</span>
<a href="#l9.369"></a><span id="l9.369" class="difflineplus">+       &lt;xul:button anonid=&quot;hdrReplyButton&quot; label=&quot;&amp;replyButton.label;&quot;</span>
<a href="#l9.370"></a><span id="l9.370" class="difflineplus">+                   oncommand=&quot;MsgReplyMessage(event);&quot; observes=&quot;button_reply&quot;</span>
<a href="#l9.371"></a><span id="l9.371" class="difflineplus">+                   class=&quot;msgHeaderView-button hdrReplyButton&quot;/&gt;</span>
<a href="#l9.372"></a><span id="l9.372" class="difflineplus">+       &lt;xul:button anonid=&quot;hdrForwardButton&quot; label=&quot;&amp;forwardButton.label;&quot;</span>
<a href="#l9.373"></a><span id="l9.373" class="difflineplus">+                   oncommand=&quot;MsgForwardMessage(event);&quot;</span>
<a href="#l9.374"></a><span id="l9.374" class="difflineplus">+                   observes=&quot;button_forward&quot; class=&quot;msgHeaderView-button hdrForwardButton&quot;/&gt;</span>
<a href="#l9.375"></a><span id="l9.375" class="difflineplus">+       &lt;xul:button anonid=&quot;hdrJunkButton&quot; label=&quot;&amp;junkButton.label;&quot;</span>
<a href="#l9.376"></a><span id="l9.376" class="difflineplus">+                   observes=&quot;button_junk&quot; class=&quot;msgHeaderView-button hdrJunkButton&quot;</span>
<a href="#l9.377"></a><span id="l9.377" class="difflineplus">+                   oncommand=&quot;goDoCommand('button_junk')&quot;/&gt;</span>
<a href="#l9.378"></a><span id="l9.378" class="difflineplus">+       &lt;xul:button anonid=&quot;hdrTrashButton&quot; tooltiptext=&quot;&amp;trashButton.tooltiptext;&quot;</span>
<a href="#l9.379"></a><span id="l9.379" class="difflineplus">+                   observes=&quot;button_delete&quot; trash=&quot;true&quot;</span>
<a href="#l9.380"></a><span id="l9.380" class="difflineplus">+                   class=&quot;msgHeaderView-button hdrTrashButton&quot; </span>
<a href="#l9.381"></a><span id="l9.381" class="difflineplus">+                   oncommand=&quot;goDoCommand(event.shiftKey ? 'cmd_shiftDelete' : 'cmd_delete')&quot;/&gt;</span>
<a href="#l9.382"></a><span id="l9.382" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l9.383"></a><span id="l9.383" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l9.384"></a><span id="l9.384" class="difflineplus">+</span>
<a href="#l9.385"></a><span id="l9.385" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l9.386"></a><span id="l9.386" class="difflineplus">+      &lt;method name=&quot;getButton&quot;&gt;</span>
<a href="#l9.387"></a><span id="l9.387" class="difflineplus">+        &lt;parameter name=&quot;id&quot;/&gt;</span>
<a href="#l9.388"></a><span id="l9.388" class="difflineplus">+        &lt;body&gt;</span>
<a href="#l9.389"></a><span id="l9.389" class="difflineplus">+          &lt;![CDATA[</span>
<a href="#l9.390"></a><span id="l9.390" class="difflineplus">+          return document.getAnonymousElementByAttribute(this, 'anonid', id);</span>
<a href="#l9.391"></a><span id="l9.391" class="difflineplus">+          ]]&gt;</span>
<a href="#l9.392"></a><span id="l9.392" class="difflineplus">+        &lt;/body&gt;</span>
<a href="#l9.393"></a><span id="l9.393" class="difflineplus">+      &lt;/method&gt;</span>
<a href="#l9.394"></a><span id="l9.394" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l9.395"></a><span id="l9.395" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l9.396"></a><span id="l9.396"> &lt;/bindings&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

