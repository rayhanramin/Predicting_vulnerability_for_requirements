<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 19434:3af670f17709f87c653d9f4587a3b6b8094f6ff2</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 3af670f17709f87c653d9f4587a3b6b8094f6ff2" />
<meta property="og:url" content="/comm-central/rev/3af670f17709f87c653d9f4587a3b6b8094f6ff2" />
<meta property="og:description" content="Bug 1278074 - remove STEEL uses in Thunderbird. r=mkmelin, r=aleth, r=Fallen" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 3af670f17709f87c653d9f4587a3b6b8094f6ff2 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/3af670f17709f87c653d9f4587a3b6b8094f6ff2">shortlog</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/3af670f17709f87c653d9f4587a3b6b8094f6ff2">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2">files</a> |
changeset |
<a href="/comm-central/raw-rev/3af670f17709f87c653d9f4587a3b6b8094f6ff2">raw</a>  | <a href="/comm-central/archive/3af670f17709f87c653d9f4587a3b6b8094f6ff2.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1278074">Bug 1278074</a> - remove STEEL uses in Thunderbird. r=mkmelin, r=aleth, r=Fallen
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 08 Jun 2016 19:15:06 +0200</td></tr>

<tr>
 <td>changeset 19434</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/3af670f17709f87c653d9f4587a3b6b8094f6ff2">3af670f17709f87c653d9f4587a3b6b8094f6ff2</a></td>
</tr>



<tr>
<td>parent 19433</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c37795888b0e9e92bbb145403b72bf14a201285e">c37795888b0e9e92bbb145403b72bf14a201285e</a>
</td>
</tr>

<tr>
<td>child 19435</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9452a67bfbe3186315cd3aa64ec0c302c162fc15">9452a67bfbe3186315cd3aa64ec0c302c162fc15</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=3af670f17709f87c653d9f4587a3b6b8094f6ff2">11963</a></td></tr>
<tr><td>push user</td><td>acelists@atlas.sk</td></tr>
<tr><td>push date</td><td class="date age">Wed, 08 Jun 2016 17:15:47 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@3af670f17709 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3af670f17709f87c653d9f4587a3b6b8094f6ff2">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&newProject=comm-central&newRevision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&newProject=comm-central&newRevision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&newProject=comm-central&newRevision=3af670f17709f87c653d9f4587a3b6b8094f6ff2&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a>, <a href="/comm-central/log?rev=reviewer%28aleth%29&revcount=50">aleth</a>, <a href="/comm-central/log?rev=reviewer%28Fallen%29&revcount=50">Fallen</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1278074">1278074</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1278074">Bug 1278074</a> - remove STEEL uses in Thunderbird. r=mkmelin, r=aleth, r=Fallen</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/calendar-task-view.js">calendar/base/content/calendar-task-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/calendar-task-view.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/calendar-task-view.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/calendar-task-view.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/calendar-task-view.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/calendar-task-view.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/preferences/categories.js">calendar/base/content/preferences/categories.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/preferences/categories.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/preferences/categories.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/preferences/categories.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/preferences/categories.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/content/preferences/categories.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/im/content/preferences/advanced.js">im/content/preferences/advanced.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/im/content/preferences/advanced.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/im/content/preferences/advanced.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/im/content/preferences/advanced.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/im/content/preferences/advanced.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/im/content/preferences/advanced.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/glodaFacetView.js">mail/base/content/glodaFacetView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/glodaFacetView.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/glodaFacetView.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/glodaFacetView.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/glodaFacetView.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/glodaFacetView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWidgets.xml">mail/base/content/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindow.js">mail/base/content/mailWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindow.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindow.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindow.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindow.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/messageWindow.js">mail/base/content/messageWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/messageWindow.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/messageWindow.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/messageWindow.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/messageWindow.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/messageWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/nsContextMenu.js">mail/base/content/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/sanitize.js">mail/base/content/sanitize.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/sanitize.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/sanitize.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/sanitize.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/sanitize.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/sanitize.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/search.xml">mail/base/content/search.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/search.xml">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/search.xml">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/search.xml">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/search.xml">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/search.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/specialTabs.js">mail/base/content/specialTabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/specialTabs.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/specialTabs.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/specialTabs.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/specialTabs.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/specialTabs.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/tabmail.xml">mail/base/content/tabmail.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/tabmail.xml">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/tabmail.xml">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/tabmail.xml">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/tabmail.xml">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/content/tabmail.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/modules/quickFilterManager.js">mail/base/modules/quickFilterManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/modules/quickFilterManager.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/modules/quickFilterManager.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/modules/quickFilterManager.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/modules/quickFilterManager.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/base/modules/quickFilterManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/a11y.js">mail/components/about-support/content/a11y.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/a11y.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/a11y.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/a11y.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/a11y.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/a11y.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/init.js">mail/components/about-support/content/init.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/init.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/init.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/init.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/init.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/init.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/prefs.js">mail/components/about-support/content/prefs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/prefs.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/prefs.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/prefs.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/prefs.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/about-support/content/prefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/im/content/chat-messenger-overlay.js">mail/components/im/content/chat-messenger-overlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/im/content/chat-messenger-overlay.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/im/content/chat-messenger-overlay.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/im/content/chat-messenger-overlay.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/im/content/chat-messenger-overlay.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/im/content/chat-messenger-overlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/chat.js">mail/components/preferences/chat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/chat.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/chat.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/chat.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/chat.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/chat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/permissions.js">mail/components/preferences/permissions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/permissions.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/permissions.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/permissions.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/permissions.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/components/preferences/permissions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/steel/steelApplication.js">mail/steel/steelApplication.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/steel/steelApplication.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/steel/steelApplication.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/steel/steelApplication.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/steel/steelApplication.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/steel/steelApplication.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/message-window/test-eml-subject.js">mail/test/mozmill/message-window/test-eml-subject.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/message-window/test-eml-subject.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/message-window/test-eml-subject.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/message-window/test-eml-subject.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/message-window/test-eml-subject.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/message-window/test-eml-subject.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mailnews/base/prefs/content/AccountManager.js">mailnews/base/prefs/content/AccountManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mailnews/base/prefs/content/AccountManager.js">file</a> |
<a href="/comm-central/annotate/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mailnews/base/prefs/content/AccountManager.js">annotate</a> |
<a href="/comm-central/diff/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mailnews/base/prefs/content/AccountManager.js">diff</a> |
<a href="/comm-central/comparison/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mailnews/base/prefs/content/AccountManager.js">comparison</a> |
<a href="/comm-central/log/3af670f17709f87c653d9f4587a3b6b8094f6ff2/mailnews/base/prefs/content/AccountManager.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/calendar-task-view.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-view.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,14 +1,15 @@</span>
<a href="#l1.4"></a><span id="l1.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.5"></a><span id="l1.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.6"></a><span id="l1.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> Components.utils.import(&quot;resource://calendar/modules/calRecurrenceUtils.jsm&quot;);</span>
<a href="#l1.9"></a><span id="l1.9"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12"> var taskDetailsView = {</span>
<a href="#l1.13"></a><span id="l1.13"> </span>
<a href="#l1.14"></a><span id="l1.14">     /**</span>
<a href="#l1.15"></a><span id="l1.15">      * Task Details Events</span>
<a href="#l1.16"></a><span id="l1.16">      *</span>
<a href="#l1.17"></a><span id="l1.17">      * XXXberend Please document this function, possibly also consolidate since</span>
<a href="#l1.18"></a><span id="l1.18">      * its the only function in taskDetailsView.</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineat">@@ -258,17 +259,17 @@ function taskViewOnLoad() {</span>
<a href="#l1.20"></a><span id="l1.20">     if (deck &amp;&amp; tree) {</span>
<a href="#l1.21"></a><span id="l1.21">         deck.addEventListener(&quot;select&quot;, taskViewObserveDisplayDeckChange, true);</span>
<a href="#l1.22"></a><span id="l1.22">         tree.textFilterField = &quot;task-text-filter-field&quot;;</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24">         // setup the platform-dependent placeholder for the text filter field</span>
<a href="#l1.25"></a><span id="l1.25">         let textFilter = document.getElementById(&quot;task-text-filter-field&quot;);</span>
<a href="#l1.26"></a><span id="l1.26">         if (textFilter) {</span>
<a href="#l1.27"></a><span id="l1.27">             let base = textFilter.getAttribute(&quot;emptytextbase&quot;);</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineminus">-            let keyLabel = textFilter.getAttribute(Application.platformIsMac ?</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+            let keyLabel = textFilter.getAttribute((AppConstants.platform == &quot;macosx&quot;) ?</span>
<a href="#l1.30"></a><span id="l1.30">                                                    &quot;keyLabelMac&quot; : &quot;keyLabelNonMac&quot;);</span>
<a href="#l1.31"></a><span id="l1.31"> </span>
<a href="#l1.32"></a><span id="l1.32">             textFilter.setAttribute(&quot;placeholder&quot;, base.replace(&quot;#1&quot;, keyLabel));</span>
<a href="#l1.33"></a><span id="l1.33">             textFilter.value = &quot;&quot;;</span>
<a href="#l1.34"></a><span id="l1.34">         }</span>
<a href="#l1.35"></a><span id="l1.35">     }</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37">     // Setup customizeDone handler for the task action toolbox.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/preferences/categories.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/preferences/categories.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,15 +1,16 @@</span>
<a href="#l2.4"></a><span id="l2.4"> /**</span>
<a href="#l2.5"></a><span id="l2.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.6"></a><span id="l2.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.7"></a><span id="l2.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l2.8"></a><span id="l2.8">  */</span>
<a href="#l2.9"></a><span id="l2.9"> Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l2.10"></a><span id="l2.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l2.12"></a><span id="l2.12"> </span>
<a href="#l2.13"></a><span id="l2.13"> var gCategoryList;</span>
<a href="#l2.14"></a><span id="l2.14"> var categoryPrefBranch = Services.prefs.getBranch(&quot;calendar.category.color.&quot;);</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> /**</span>
<a href="#l2.17"></a><span id="l2.17">  * Global Object to hold methods for the categories pref pane</span>
<a href="#l2.18"></a><span id="l2.18">  */</span>
<a href="#l2.19"></a><span id="l2.19"> var gCategoriesPane = {</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineat">@@ -106,18 +107,19 @@ var gCategoriesPane = {</span>
<a href="#l2.21"></a><span id="l2.21">     addCategory: function gCP_addCategory() {</span>
<a href="#l2.22"></a><span id="l2.22">         let listbox = document.getElementById(&quot;categorieslist&quot;);</span>
<a href="#l2.23"></a><span id="l2.23">         listbox.clearSelection();</span>
<a href="#l2.24"></a><span id="l2.24">         this.updateButtons();</span>
<a href="#l2.25"></a><span id="l2.25">         window.openDialog(&quot;chrome://calendar/content/preferences/editCategory.xul&quot;,</span>
<a href="#l2.26"></a><span id="l2.26">                           &quot;addCategory&quot;,</span>
<a href="#l2.27"></a><span id="l2.27">                           // Workaround for Bug 1151440 - the HTML color picker won't work</span>
<a href="#l2.28"></a><span id="l2.28">                           // in linux when opened from modal dialog</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-                          Application.platformIsLinux ? &quot;centerscreen,chrome,resizable=no&quot; :</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-                                                        &quot;modal,centerscreen,chrome,resizable=no&quot;,</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+                          (AppConstants.platform == &quot;linux&quot;) ?</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+                            &quot;centerscreen,chrome,resizable=no&quot; :</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+                            &quot;modal,centerscreen,chrome,resizable=no&quot;,</span>
<a href="#l2.34"></a><span id="l2.34">                           &quot;&quot;, null, addTitle);</span>
<a href="#l2.35"></a><span id="l2.35">     },</span>
<a href="#l2.36"></a><span id="l2.36"> </span>
<a href="#l2.37"></a><span id="l2.37">     /**</span>
<a href="#l2.38"></a><span id="l2.38">      * Edits the currently selected category using the edit category dialog.</span>
<a href="#l2.39"></a><span id="l2.39">      */</span>
<a href="#l2.40"></a><span id="l2.40">     editCategory: function gCP_editCategory() {</span>
<a href="#l2.41"></a><span id="l2.41">         var list = document.getElementById(&quot;categorieslist&quot;);</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineat">@@ -128,18 +130,19 @@ var gCategoriesPane = {</span>
<a href="#l2.43"></a><span id="l2.43">             var currentColor = null;</span>
<a href="#l2.44"></a><span id="l2.44">         }</span>
<a href="#l2.45"></a><span id="l2.45">  </span>
<a href="#l2.46"></a><span id="l2.46">         if (list.selectedItem) {</span>
<a href="#l2.47"></a><span id="l2.47">             window.openDialog(&quot;chrome://calendar/content/preferences/editCategory.xul&quot;,</span>
<a href="#l2.48"></a><span id="l2.48">                               &quot;editCategory&quot;,</span>
<a href="#l2.49"></a><span id="l2.49">                               // Workaround for Bug 1151440 - the HTML color picker won't work</span>
<a href="#l2.50"></a><span id="l2.50">                               // in linux when opened from modal dialog</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-                              Application.platformIsLinux ? &quot;centerscreen,chrome,resizable=no&quot; :</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-                                                            &quot;modal,centerscreen,chrome,resizable=no&quot;,</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+                              (AppConstants.platform == &quot;linux&quot;) ?</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+                                &quot;centerscreen,chrome,resizable=no&quot; :</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+                                &quot;modal,centerscreen,chrome,resizable=no&quot;,</span>
<a href="#l2.56"></a><span id="l2.56">                               gCategoryList[list.selectedIndex], currentColor, editTitle);</span>
<a href="#l2.57"></a><span id="l2.57">         }</span>
<a href="#l2.58"></a><span id="l2.58">     },</span>
<a href="#l2.59"></a><span id="l2.59"> </span>
<a href="#l2.60"></a><span id="l2.60">     /**</span>
<a href="#l2.61"></a><span id="l2.61">      * Removes the selected category.</span>
<a href="#l2.62"></a><span id="l2.62">      */</span>
<a href="#l2.63"></a><span id="l2.63">     deleteCategory: function gCP_deleteCategory() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -6,16 +6,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">  * various components (and other js scopes) don't need to replicate them. Note</span>
<a href="#l3.5"></a><span id="l3.5">  * that loading this file twice in the same scope will throw errors.</span>
<a href="#l3.6"></a><span id="l3.6">  */</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l3.9"></a><span id="l3.9"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l3.10"></a><span id="l3.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l3.11"></a><span id="l3.11"> Components.utils.import(&quot;resource://gre/modules/Preferences.jsm&quot;);</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l3.13"></a><span id="l3.13"> </span>
<a href="#l3.14"></a><span id="l3.14"> function _calIcalCreator(cid, iid) {</span>
<a href="#l3.15"></a><span id="l3.15">     return function(icalString) {</span>
<a href="#l3.16"></a><span id="l3.16">         let thing = Components.classes[cid].createInstance(iid);</span>
<a href="#l3.17"></a><span id="l3.17">         if (icalString) {</span>
<a href="#l3.18"></a><span id="l3.18">             thing.icalString = icalString;</span>
<a href="#l3.19"></a><span id="l3.19">         }</span>
<a href="#l3.20"></a><span id="l3.20">         return thing;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -331,33 +332,35 @@ function userCanRespondToInvitation(aIte</span>
<a href="#l3.22"></a><span id="l3.22">  * Opens the Create Calendar wizard</span>
<a href="#l3.23"></a><span id="l3.23">  *</span>
<a href="#l3.24"></a><span id="l3.24">  * @param aCallback  a function to be performed after calendar creation</span>
<a href="#l3.25"></a><span id="l3.25">  */</span>
<a href="#l3.26"></a><span id="l3.26"> function openCalendarWizard(aCallback) {</span>
<a href="#l3.27"></a><span id="l3.27">     openDialog(&quot;chrome://calendar/content/calendarCreation.xul&quot;, &quot;caEditServer&quot;,</span>
<a href="#l3.28"></a><span id="l3.28">                // Workaround for Bug 1151440 - the HTML color picker won't work</span>
<a href="#l3.29"></a><span id="l3.29">                // in linux when opened from modal dialog</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-               Application.platformIsLinux ? &quot;chrome,titlebar,resizable&quot; :</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-                                             &quot;modal,chrome,titlebar,resizable&quot;,</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+               (AppConstants.platform == &quot;linux&quot;) ?</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+                 &quot;chrome,titlebar,resizable&quot; :</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+                 &quot;modal,chrome,titlebar,resizable&quot;,</span>
<a href="#l3.35"></a><span id="l3.35">                aCallback);</span>
<a href="#l3.36"></a><span id="l3.36"> }</span>
<a href="#l3.37"></a><span id="l3.37"> </span>
<a href="#l3.38"></a><span id="l3.38"> /**</span>
<a href="#l3.39"></a><span id="l3.39">  * Opens the calendar properties window for aCalendar</span>
<a href="#l3.40"></a><span id="l3.40">  *</span>
<a href="#l3.41"></a><span id="l3.41">  * @param aCalendar  the calendar whose properties should be displayed</span>
<a href="#l3.42"></a><span id="l3.42">  */</span>
<a href="#l3.43"></a><span id="l3.43"> function openCalendarProperties(aCalendar) {</span>
<a href="#l3.44"></a><span id="l3.44">     openDialog(&quot;chrome://calendar/content/calendar-properties-dialog.xul&quot;,</span>
<a href="#l3.45"></a><span id="l3.45">                &quot;CalendarPropertiesDialog&quot;,</span>
<a href="#l3.46"></a><span id="l3.46">                // Workaround for Bug 1151440 - the HTML color picker won't work</span>
<a href="#l3.47"></a><span id="l3.47">                // in linux when opened from modal dialog</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-               Application.platformIsLinux ? &quot;chrome,titlebar,resizable&quot; :</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-                                             &quot;modal,chrome,titlebar,resizable&quot;,</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+               (AppConstants.platform == &quot;linux&quot;) ?</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+                 &quot;chrome,titlebar,resizable&quot; :</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+                 &quot;modal,chrome,titlebar,resizable&quot;,</span>
<a href="#l3.53"></a><span id="l3.53">                {calendar: aCalendar});</span>
<a href="#l3.54"></a><span id="l3.54"> }</span>
<a href="#l3.55"></a><span id="l3.55"> </span>
<a href="#l3.56"></a><span id="l3.56"> /**</span>
<a href="#l3.57"></a><span id="l3.57">  * Opens the print dialog</span>
<a href="#l3.58"></a><span id="l3.58">  */</span>
<a href="#l3.59"></a><span id="l3.59"> function calPrint() {</span>
<a href="#l3.60"></a><span id="l3.60">     openDialog(&quot;chrome://calendar/content/calendar-print-dialog.xul&quot;, &quot;Print&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/im/content/preferences/advanced.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/im/content/preferences/advanced.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -4,17 +4,16 @@</span>
<a href="#l4.4"></a><span id="l4.4"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6"> // Load DownloadUtils module for convertByteUnits</span>
<a href="#l4.7"></a><span id="l4.7"> Components.utils.import(&quot;resource://gre/modules/DownloadUtils.jsm&quot;);</span>
<a href="#l4.8"></a><span id="l4.8"> Components.utils.import(&quot;resource://gre/modules/ctypes.jsm&quot;);</span>
<a href="#l4.9"></a><span id="l4.9"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l4.10"></a><span id="l4.10"> Components.utils.import(&quot;resource://gre/modules/LoadContextInfo.jsm&quot;);</span>
<a href="#l4.11"></a><span id="l4.11"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/BrowserUtils.jsm&quot;);</span>
<a href="#l4.13"></a><span id="l4.13"> </span>
<a href="#l4.14"></a><span id="l4.14"> var gAdvancedPane = {</span>
<a href="#l4.15"></a><span id="l4.15">   _inited: false,</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17">   /**</span>
<a href="#l4.18"></a><span id="l4.18">    * Brings the appropriate tab to the front and initializes various bits of UI.</span>
<a href="#l4.19"></a><span id="l4.19">    */</span>
<a href="#l4.20"></a><span id="l4.20">   init: function ()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/glodaFacetView.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/glodaFacetView.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -15,16 +15,17 @@</span>
<a href="#l5.4"></a><span id="l5.4"> var Cc = Components.classes;</span>
<a href="#l5.5"></a><span id="l5.5"> var Ci = Components.interfaces;</span>
<a href="#l5.6"></a><span id="l5.6"> var Cr = Components.results;</span>
<a href="#l5.7"></a><span id="l5.7"> var Cu = Components.utils;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9"> Cu.import(&quot;resource:///modules/gloda/log4moz.js&quot;);</span>
<a href="#l5.10"></a><span id="l5.10"> Cu.import(&quot;resource:///modules/StringBundle.js&quot;);</span>
<a href="#l5.11"></a><span id="l5.11"> Cu.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l5.13"></a><span id="l5.13"> Cu.import(&quot;resource:///modules/errUtils.js&quot;);</span>
<a href="#l5.14"></a><span id="l5.14"> Cu.import(&quot;resource:///modules/templateUtils.js&quot;);</span>
<a href="#l5.15"></a><span id="l5.15"> </span>
<a href="#l5.16"></a><span id="l5.16"> Cu.import(&quot;resource:///modules/gloda/public.js&quot;);</span>
<a href="#l5.17"></a><span id="l5.17"> Cu.import(&quot;resource:///modules/gloda/facet.js&quot;);</span>
<a href="#l5.18"></a><span id="l5.18"> </span>
<a href="#l5.19"></a><span id="l5.19"> var glodaFacetStrings =</span>
<a href="#l5.20"></a><span id="l5.20">   new StringBundle(&quot;chrome://messenger/locale/glodaFacetView.properties&quot;);</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineat">@@ -354,17 +355,17 @@ var FacetContext = {</span>
<a href="#l5.22"></a><span id="l5.22">     let queryExplanation = document.getElementById(&quot;query-explanation&quot;);</span>
<a href="#l5.23"></a><span id="l5.23">     if (this.searcher)</span>
<a href="#l5.24"></a><span id="l5.24">       queryExplanation.setFulltext(this.searcher);</span>
<a href="#l5.25"></a><span id="l5.25">     else</span>
<a href="#l5.26"></a><span id="l5.26">       queryExplanation.setQuery(this.collection.query);</span>
<a href="#l5.27"></a><span id="l5.27">     // we like to sort them so should clone the list</span>
<a href="#l5.28"></a><span id="l5.28">     this.faceters = this.facetDriver.faceters.concat();</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-    this._timelineShown = ! Application.prefs.getValue('gloda.facetview.hidetimeline', true);</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+    this._timelineShown = !Services.prefs.getBoolPref(&quot;gloda.facetview.hidetimeline&quot;);</span>
<a href="#l5.32"></a><span id="l5.32"> </span>
<a href="#l5.33"></a><span id="l5.33">     this.everFaceted = false;</span>
<a href="#l5.34"></a><span id="l5.34">     this._activeConstraints = {};</span>
<a href="#l5.35"></a><span id="l5.35">     if (this.searcher)</span>
<a href="#l5.36"></a><span id="l5.36">       this._sortBy = '-dascore';</span>
<a href="#l5.37"></a><span id="l5.37">     else</span>
<a href="#l5.38"></a><span id="l5.38">       this._sortBy = '-date';</span>
<a href="#l5.39"></a><span id="l5.39">     this.fullSet = this._removeDupes(this._collection.items.concat());</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineat">@@ -592,27 +593,27 @@ var FacetContext = {</span>
<a href="#l5.41"></a><span id="l5.41">       // is not cut off at the top, and overflow=hidden causes</span>
<a href="#l5.42"></a><span id="l5.42">       // the transition to not work as intended.</span>
<a href="#l5.43"></a><span id="l5.43">       facetDate.removeAttribute(&quot;style&quot;);</span>
<a href="#l5.44"></a><span id="l5.44">       facetDate.removeEventListener(&quot;transitionend&quot;, listener);</span>
<a href="#l5.45"></a><span id="l5.45">     };</span>
<a href="#l5.46"></a><span id="l5.46">     facetDate.addEventListener(&quot;transitionend&quot;, listener);</span>
<a href="#l5.47"></a><span id="l5.47">     facetDate.removeAttribute(&quot;hide&quot;);</span>
<a href="#l5.48"></a><span id="l5.48">     document.getElementById(&quot;date-toggle&quot;).removeAttribute(&quot;tucked&quot;);</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-    Application.prefs.setValue('gloda.facetview.hidetimeline', false);</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+    Services.prefs.setBoolPref(&quot;gloda.facetview.hidetimeline&quot;, false);</span>
<a href="#l5.51"></a><span id="l5.51">   },</span>
<a href="#l5.52"></a><span id="l5.52"> </span>
<a href="#l5.53"></a><span id="l5.53">   _hideTimeline: function(immediate) {</span>
<a href="#l5.54"></a><span id="l5.54">     let facetDate = document.getElementById(&quot;facet-date&quot;);</span>
<a href="#l5.55"></a><span id="l5.55">     if (immediate)</span>
<a href="#l5.56"></a><span id="l5.56">       facetDate.style.display = &quot;none&quot;;</span>
<a href="#l5.57"></a><span id="l5.57">     facetDate.style.overflow = &quot;hidden&quot;;</span>
<a href="#l5.58"></a><span id="l5.58">     facetDate.setAttribute(&quot;hide&quot;, &quot;true&quot;);</span>
<a href="#l5.59"></a><span id="l5.59">     document.getElementById(&quot;date-toggle&quot;).setAttribute(&quot;tucked&quot;, &quot;true&quot;);</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineminus">-    Application.prefs.setValue('gloda.facetview.hidetimeline', true);</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+    Services.prefs.setBoolPref(&quot;gloda.facetview.hidetimeline&quot;, true);</span>
<a href="#l5.62"></a><span id="l5.62">   },</span>
<a href="#l5.63"></a><span id="l5.63"> </span>
<a href="#l5.64"></a><span id="l5.64">   _timelineShown: true,</span>
<a href="#l5.65"></a><span id="l5.65"> </span>
<a href="#l5.66"></a><span id="l5.66">   /** For use in hovering specific results. */</span>
<a href="#l5.67"></a><span id="l5.67">   fakeResultFaceter: {},</span>
<a href="#l5.68"></a><span id="l5.68">   /** For use in hovering specific results. */</span>
<a href="#l5.69"></a><span id="l5.69">   fakeResultAttr: {},</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -7,16 +7,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">  * Core mail routines used by all of the major mail windows (address book,</span>
<a href="#l6.5"></a><span id="l6.5">  * 3-pane, compose and stand alone message window).</span>
<a href="#l6.6"></a><span id="l6.6">  * Routines to support custom toolbars in mail windows, opening up a new window</span>
<a href="#l6.7"></a><span id="l6.7">  * of a particular type all live here.</span>
<a href="#l6.8"></a><span id="l6.8">  * Before adding to this file, ask yourself, is this a JS routine that is going</span>
<a href="#l6.9"></a><span id="l6.9">  * to be used by all of the main mail windows?</span>
<a href="#l6.10"></a><span id="l6.10">  */</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/BrowserUtils.jsm&quot;);</span>
<a href="#l6.13"></a><span id="l6.13"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l6.14"></a><span id="l6.14"> Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l6.15"></a><span id="l6.15"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17"> var gCustomizeSheet = false;</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19"> function overlayRestoreDefaultSet() {</span>
<a href="#l6.20"></a><span id="l6.20">   let toolbox = null;</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineat">@@ -604,17 +605,17 @@ function safeModeRestart()</span>
<a href="#l6.22"></a><span id="l6.22"> </span>
<a href="#l6.23"></a><span id="l6.23">   let rv = Services.prompt.confirmEx(window, promptTitle, promptMessage,</span>
<a href="#l6.24"></a><span id="l6.24">                                      buttonFlags, restartText, null, null,</span>
<a href="#l6.25"></a><span id="l6.25">                                      null, {});</span>
<a href="#l6.26"></a><span id="l6.26">   if (rv == 0) {</span>
<a href="#l6.27"></a><span id="l6.27">     let environment = Components.classes[&quot;@mozilla.org/process/environment;1&quot;]</span>
<a href="#l6.28"></a><span id="l6.28">                                 .getService(Components.interfaces.nsIEnvironment);</span>
<a href="#l6.29"></a><span id="l6.29">     environment.set(&quot;MOZ_SAFE_MODE_RESTART&quot;, &quot;1&quot;);</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-    Application.restart();</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+    BrowserUtils.restartApplication();</span>
<a href="#l6.32"></a><span id="l6.32">   }</span>
<a href="#l6.33"></a><span id="l6.33"> }</span>
<a href="#l6.34"></a><span id="l6.34"> </span>
<a href="#l6.35"></a><span id="l6.35"> function getMostRecentMailWindow() {</span>
<a href="#l6.36"></a><span id="l6.36">   let win = null;</span>
<a href="#l6.37"></a><span id="l6.37">   if (AppConstants.platform != &quot;win&quot;) {</span>
<a href="#l6.38"></a><span id="l6.38">     // Platforms other than Windows have a broken z-order...</span>
<a href="#l6.39"></a><span id="l6.39">     win = Services.wm.getMostRecentWindow(&quot;mail:3pane&quot;, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/mailWidgets.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/mailWidgets.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -570,16 +570,17 @@</span>
<a href="#l7.4"></a><span id="l7.4">       &lt;xul:label class=&quot;moreIndicator&quot; onclick=&quot;this.parentNode.toggleWrap()&quot;</span>
<a href="#l7.5"></a><span id="l7.5">                  collapsed=&quot;true&quot; anonid=&quot;more&quot;/&gt;</span>
<a href="#l7.6"></a><span id="l7.6">     &lt;/content&gt;</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8">     &lt;implementation&gt;</span>
<a href="#l7.9"></a><span id="l7.9">       &lt;constructor&gt;</span>
<a href="#l7.10"></a><span id="l7.10">         &lt;![CDATA[</span>
<a href="#l7.11"></a><span id="l7.11">           this.mAddresses = new Array;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+          Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l7.13"></a><span id="l7.13">         ]]&gt;</span>
<a href="#l7.14"></a><span id="l7.14">       &lt;/constructor&gt;</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16">       &lt;field name=&quot;mAddresses&quot;/&gt;</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18">       &lt;!-- addAddressView: a public method used to add an address to this widget.</span>
<a href="#l7.19"></a><span id="l7.19">            aAddresses is an object with 3 properties: displayName, emailAddress and fullAddress</span>
<a href="#l7.20"></a><span id="l7.20">       --&gt;</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineat">@@ -793,22 +794,20 @@</span>
<a href="#l7.22"></a><span id="l7.22">       &lt;!-- Public method to build the DOM nodes for display, to be called</span>
<a href="#l7.23"></a><span id="l7.23">            after all the addresses have been added to the widget. It uses</span>
<a href="#l7.24"></a><span id="l7.24">            fillAddressesNode to display at most maxLinesBeforeMore lines of</span>
<a href="#l7.25"></a><span id="l7.25">            addresses plus the (more) widget which can be clicked to reveal</span>
<a href="#l7.26"></a><span id="l7.26">            the rest. The &quot;singleline&quot; attribute is set for one line only. --&gt;</span>
<a href="#l7.27"></a><span id="l7.27">       &lt;method name=&quot;buildViews&quot;&gt;</span>
<a href="#l7.28"></a><span id="l7.28">         &lt;body&gt;</span>
<a href="#l7.29"></a><span id="l7.29">           &lt;![CDATA[</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-            this.maxLinesBeforeMore = Application.prefs.getValue(</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-              &quot;mailnews.headers.show_n_lines_before_more&quot;,</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-              this.maxLinesBeforeMore);</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+            this.maxLinesBeforeMore = Services.prefs.getIntPref(</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+              &quot;mailnews.headers.show_n_lines_before_more&quot;);</span>
<a href="#l7.35"></a><span id="l7.35">             const dt = Components.interfaces.nsMimeHeaderDisplayTypes;</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-            var headerchoice = Application.prefs.getValue(&quot;mail.show_headers&quot;,</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">-                                                          dt.NormalHeaders);</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+            let headerchoice = Services.prefs.getIntPref(&quot;mail.show_headers&quot;);</span>
<a href="#l7.39"></a><span id="l7.39">             if (this.maxLinesBeforeMore &lt; 1 ||</span>
<a href="#l7.40"></a><span id="l7.40">                 headerchoice == dt.AllHeaders) {</span>
<a href="#l7.41"></a><span id="l7.41">               this.fillAddressesNode(this.emailAddresses, true);</span>
<a href="#l7.42"></a><span id="l7.42">               this.longEmailAddresses.removeAttribute(&quot;singleline&quot;);</span>
<a href="#l7.43"></a><span id="l7.43">             }</span>
<a href="#l7.44"></a><span id="l7.44">             else {</span>
<a href="#l7.45"></a><span id="l7.45">               this.fillAddressesNode(this.emailAddresses, false);</span>
<a href="#l7.46"></a><span id="l7.46">               // force a single line only in the default n=1 case</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/content/mailWindow.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/content/mailWindow.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -420,18 +420,17 @@ nsMsgWindowCommands.prototype =</span>
<a href="#l8.4"></a><span id="l8.4"> }</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> /**</span>
<a href="#l8.7"></a><span id="l8.7">  * Loads the mail start page.</span>
<a href="#l8.8"></a><span id="l8.8">  */</span>
<a href="#l8.9"></a><span id="l8.9"> function loadStartPage(aForce)</span>
<a href="#l8.10"></a><span id="l8.10"> {</span>
<a href="#l8.11"></a><span id="l8.11">   // If the preference isn't enabled, then don't load anything.</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-  if (!aForce &amp;&amp;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-      !Application.prefs.getValue(&quot;mailnews.start_page.enabled&quot;, false))</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+  if (!aForce &amp;&amp; !Services.prefs.getBoolPref(&quot;mailnews.start_page.enabled&quot;))</span>
<a href="#l8.15"></a><span id="l8.15">     return;</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17">   gMessageNotificationBar.clearMsgNotifications();</span>
<a href="#l8.18"></a><span id="l8.18">   let startpage = Services.urlFormatter.formatURLPref(&quot;mailnews.start_page.url&quot;);</span>
<a href="#l8.19"></a><span id="l8.19">   if (startpage)</span>
<a href="#l8.20"></a><span id="l8.20">   {</span>
<a href="#l8.21"></a><span id="l8.21">     try {</span>
<a href="#l8.22"></a><span id="l8.22">       let uri = Services.uriFixup.createFixupURI(startpage, 0);</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineat">@@ -552,44 +551,44 @@ function nsBrowserAccess() { }</span>
<a href="#l8.24"></a><span id="l8.24"> nsBrowserAccess.prototype = {</span>
<a href="#l8.25"></a><span id="l8.25">   QueryInterface: XPCOMUtils.generateQI([Components.interfaces.nsIBrowserDOMWindow]),</span>
<a href="#l8.26"></a><span id="l8.26"> </span>
<a href="#l8.27"></a><span id="l8.27">   openURI: function (aURI, aOpener, aWhere, aContext) {</span>
<a href="#l8.28"></a><span id="l8.28">     const nsIBrowserDOMWindow = Components.interfaces.nsIBrowserDOMWindow;</span>
<a href="#l8.29"></a><span id="l8.29">     let isExternal = aContext == nsIBrowserDOMWindow.OPEN_EXTERNAL;</span>
<a href="#l8.30"></a><span id="l8.30"> </span>
<a href="#l8.31"></a><span id="l8.31">     if (isExternal &amp;&amp; aURI &amp;&amp; aURI.schemeIs(&quot;chrome&quot;)) {</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-      Application.console.log(&quot;use -chrome command-line option to load external chrome urls\n&quot;);</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+      Services.console.logStringMessage(&quot;use -chrome command-line option to load external chrome urls\n&quot;);</span>
<a href="#l8.34"></a><span id="l8.34">       return null;</span>
<a href="#l8.35"></a><span id="l8.35">     }</span>
<a href="#l8.36"></a><span id="l8.36"> </span>
<a href="#l8.37"></a><span id="l8.37">     let newWindow = null;</span>
<a href="#l8.38"></a><span id="l8.38">     let loadflags = isExternal ?</span>
<a href="#l8.39"></a><span id="l8.39">       Components.interfaces.nsIWebNavigation.LOAD_FLAGS_FROM_EXTERNAL :</span>
<a href="#l8.40"></a><span id="l8.40">       Components.interfaces.nsIWebNavigation.LOAD_FLAGS_NONE;</span>
<a href="#l8.41"></a><span id="l8.41"> </span>
<a href="#l8.42"></a><span id="l8.42">     if (aWhere != nsIBrowserDOMWindow.OPEN_NEWTAB)</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-      Application.console.log(&quot;Opening a URI in something other than a new tab is not supported, opening in new tab instead&quot;);</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+      Services.console.logStringMessage(&quot;Opening a URI in something other than a new tab is not supported, opening in new tab instead&quot;);</span>
<a href="#l8.45"></a><span id="l8.45"> </span>
<a href="#l8.46"></a><span id="l8.46">     let win, needToFocusWin;</span>
<a href="#l8.47"></a><span id="l8.47"> </span>
<a href="#l8.48"></a><span id="l8.48">     // Try the current window. If we're in a popup, fall back on the most</span>
<a href="#l8.49"></a><span id="l8.49">     // recent browser window.</span>
<a href="#l8.50"></a><span id="l8.50">     if (!window.document.documentElement.getAttribute(&quot;chromehidden&quot;))</span>
<a href="#l8.51"></a><span id="l8.51">       win = window;</span>
<a href="#l8.52"></a><span id="l8.52">     else {</span>
<a href="#l8.53"></a><span id="l8.53">       win = getMostRecentMailWindow();</span>
<a href="#l8.54"></a><span id="l8.54">       needToFocusWin = true;</span>
<a href="#l8.55"></a><span id="l8.55">     }</span>
<a href="#l8.56"></a><span id="l8.56"> </span>
<a href="#l8.57"></a><span id="l8.57">     if (!win)</span>
<a href="#l8.58"></a><span id="l8.58">       throw(&quot;Couldn't get a suitable window for openURI&quot;);</span>
<a href="#l8.59"></a><span id="l8.59"> </span>
<a href="#l8.60"></a><span id="l8.60">     let loadInBackground =</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-      Application.prefs.getValue(&quot;browser.tabs.loadDivertedInBackground&quot;, false);</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+      Services.prefs.getBoolPref(&quot;browser.tabs.loadDivertedInBackground&quot;);</span>
<a href="#l8.63"></a><span id="l8.63"> </span>
<a href="#l8.64"></a><span id="l8.64">     let tabmail = win.document.getElementById(&quot;tabmail&quot;);</span>
<a href="#l8.65"></a><span id="l8.65">     let clickHandler = null;</span>
<a href="#l8.66"></a><span id="l8.66">     let browser = tabmail.getBrowserForDocument(content);</span>
<a href="#l8.67"></a><span id="l8.67">     if (browser)</span>
<a href="#l8.68"></a><span id="l8.68">       clickHandler = browser.clickHandler;</span>
<a href="#l8.69"></a><span id="l8.69"> </span>
<a href="#l8.70"></a><span id="l8.70">     let newTab = tabmail.openTab(&quot;contentTab&quot;, {contentPage: &quot;about:blank&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -5,16 +5,17 @@</span>
<a href="#l9.4"></a><span id="l9.4"> </span>
<a href="#l9.5"></a><span id="l9.5"> Components.utils.import(&quot;resource:///modules/FeedUtils.jsm&quot;);</span>
<a href="#l9.6"></a><span id="l9.6"> Components.utils.import(&quot;resource:///modules/gloda/dbview.js&quot;);</span>
<a href="#l9.7"></a><span id="l9.7"> Components.utils.import(&quot;resource:///modules/MailConsts.js&quot;);</span>
<a href="#l9.8"></a><span id="l9.8"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l9.9"></a><span id="l9.9"> Components.utils.import(&quot;resource:///modules/MailUtils.js&quot;);</span>
<a href="#l9.10"></a><span id="l9.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l9.11"></a><span id="l9.11"> Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14"> var ADDR_DB_LARGE_COMMIT       = 1;</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16"> var kClassicMailLayout = 0;</span>
<a href="#l9.17"></a><span id="l9.17"> var kWideMailLayout = 1;</span>
<a href="#l9.18"></a><span id="l9.18"> var kVerticalMailLayout = 2;</span>
<a href="#l9.19"></a><span id="l9.19"> var kMailLayoutCommandMap =</span>
<a href="#l9.20"></a><span id="l9.20"> {</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -3027,19 +3028,19 @@ var gMessageNotificationBar =</span>
<a href="#l9.22"></a><span id="l9.22">     var desc = document.getElementById(&quot;bundle_messenger&quot;)</span>
<a href="#l9.23"></a><span id="l9.23">                        .getFormattedString(&quot;alwaysLoadRemoteContentForSender2&quot;,</span>
<a href="#l9.24"></a><span id="l9.24">                                            [emailAddress ? emailAddress : aMsgHdr.author]);</span>
<a href="#l9.25"></a><span id="l9.25">     let displayName = MailServices.headerParser.extractHeaderAddressName(aMsgHdr.author);</span>
<a href="#l9.26"></a><span id="l9.26">     let brandName = this.brandBundle.getString(&quot;brandShortName&quot;);</span>
<a href="#l9.27"></a><span id="l9.27">     let remoteContentMsg = this.stringBundle.getFormattedString(&quot;remoteContentBarMessage&quot;,</span>
<a href="#l9.28"></a><span id="l9.28">                                                                 [brandName]);</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-    let buttonLabel = this.stringBundle.getString(Application.platformIsWindows ?</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+    let buttonLabel = this.stringBundle.getString((AppConstants.platform == &quot;win&quot;) ?</span>
<a href="#l9.32"></a><span id="l9.32">       &quot;remoteContentPrefLabel&quot; : &quot;remoteContentPrefLabelUnix&quot;);</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-    let buttonAccesskey = this.stringBundle.getString(Application.platformIsWindows ?</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+    let buttonAccesskey = this.stringBundle.getString((AppConstants.platform == &quot;win&quot;) ?</span>
<a href="#l9.35"></a><span id="l9.35">       &quot;remoteContentPrefAccesskey&quot; : &quot;remoteContentPrefAccesskeyUnix&quot;);</span>
<a href="#l9.36"></a><span id="l9.36"> </span>
<a href="#l9.37"></a><span id="l9.37">     let buttons = [{</span>
<a href="#l9.38"></a><span id="l9.38">       label: buttonLabel,</span>
<a href="#l9.39"></a><span id="l9.39">       accessKey: buttonAccesskey,</span>
<a href="#l9.40"></a><span id="l9.40">       popup: &quot;remoteContentOptions&quot;,</span>
<a href="#l9.41"></a><span id="l9.41">       callback: function() { }</span>
<a href="#l9.42"></a><span id="l9.42">     }];</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineat">@@ -3064,19 +3065,19 @@ var gMessageNotificationBar =</span>
<a href="#l9.44"></a><span id="l9.44">   isShowingRemoteContentNotification: function() {</span>
<a href="#l9.45"></a><span id="l9.45">     return !!this.msgNotificationBar.getNotificationWithValue(&quot;remoteContent&quot;);</span>
<a href="#l9.46"></a><span id="l9.46">   },</span>
<a href="#l9.47"></a><span id="l9.47"> </span>
<a href="#l9.48"></a><span id="l9.48">   setPhishingMsg: function()</span>
<a href="#l9.49"></a><span id="l9.49">   {</span>
<a href="#l9.50"></a><span id="l9.50">     let phishingMsgNote = this.stringBundle.getString(&quot;phishingBarMessage&quot;);</span>
<a href="#l9.51"></a><span id="l9.51"> </span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-    let buttonLabel = this.stringBundle.getString(Application.platformIsWindows ?</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+    let buttonLabel = this.stringBundle.getString((AppConstants.platform == &quot;win&quot;) ?</span>
<a href="#l9.54"></a><span id="l9.54">       &quot;phishingBarPrefLabel&quot; : &quot;phishingBarPrefLabelUnix&quot;);</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-    let buttonAccesskey = this.stringBundle.getString(Application.platformIsWindows ?</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+    let buttonAccesskey = this.stringBundle.getString((AppConstants.platform == &quot;win&quot;) ?</span>
<a href="#l9.57"></a><span id="l9.57">       &quot;phishingBarPrefAccesskey&quot; : &quot;phishingBarPrefAccesskeyUnix&quot;);</span>
<a href="#l9.58"></a><span id="l9.58"> </span>
<a href="#l9.59"></a><span id="l9.59">     let buttons = [</span>
<a href="#l9.60"></a><span id="l9.60">     {</span>
<a href="#l9.61"></a><span id="l9.61">       label: buttonLabel,</span>
<a href="#l9.62"></a><span id="l9.62">       accessKey: buttonAccesskey,</span>
<a href="#l9.63"></a><span id="l9.63">       popup: &quot;phishingOptions&quot;,</span>
<a href="#l9.64"></a><span id="l9.64">       callback: function(aNotification, aButton) { }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/base/content/messageWindow.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/base/content/messageWindow.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -3,16 +3,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.5"></a><span id="l10.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7"> /* This is where functions related to the standalone message window are kept */</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9"> Components.utils.import(&quot;resource:///modules/jsTreeSelection.js&quot;);</span>
<a href="#l10.10"></a><span id="l10.10"> Components.utils.import(&quot;resource:///modules/MailUtils.js&quot;);</span>
<a href="#l10.11"></a><span id="l10.11"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l10.13"></a><span id="l10.13"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l10.14"></a><span id="l10.14"> Components.utils.import(&quot;resource:///modules/MsgHdrSyntheticView.js&quot;);</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16"> // from MailNewsTypes.h</span>
<a href="#l10.17"></a><span id="l10.17"> var nsMsgKey_None = 0xFFFFFFFF;</span>
<a href="#l10.18"></a><span id="l10.18"> var nsMsgViewIndex_None = 0xFFFFFFFF;</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> /* globals for a particular window */</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineat">@@ -219,23 +220,23 @@ StandaloneMessageDisplayWidget.prototype</span>
<a href="#l10.22"></a><span id="l10.22">       function StandaloneMessageDisplayWidget_onDisplayingMessage(aMsgHdr) {</span>
<a href="#l10.23"></a><span id="l10.23">     this.__proto__.__proto__.onDisplayingMessage.call(this, aMsgHdr);</span>
<a href="#l10.24"></a><span id="l10.24"> </span>
<a href="#l10.25"></a><span id="l10.25">     // - set the window title to the message subject (and maybe the app name)</span>
<a href="#l10.26"></a><span id="l10.26">     let docTitle = aMsgHdr.mime2DecodedSubject;</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28">     // If the tab hasn't got a title, or we're on Mac, don't display</span>
<a href="#l10.29"></a><span id="l10.29">     // the separator.</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineminus">-    if (docTitle &amp;&amp; !Application.platformIsMac)</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+    if (docTitle &amp;&amp; (AppConstants.platform != &quot;macosx&quot;))</span>
<a href="#l10.32"></a><span id="l10.32">         docTitle += document.documentElement</span>
<a href="#l10.33"></a><span id="l10.33">                             .getAttribute(&quot;titlemenuseparator&quot;);</span>
<a href="#l10.34"></a><span id="l10.34"> </span>
<a href="#l10.35"></a><span id="l10.35">     // If we haven't got a title at this stage add the modifier, or if</span>
<a href="#l10.36"></a><span id="l10.36">     // we are on a non-mac platform, add the modifier.</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-    if (!docTitle || !Application.platformIsMac)</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+    if (!docTitle || (AppConstants.platform != &quot;macosx&quot;))</span>
<a href="#l10.39"></a><span id="l10.39">          docTitle += document.documentElement</span>
<a href="#l10.40"></a><span id="l10.40">                              .getAttribute(&quot;titlemodifier&quot;);</span>
<a href="#l10.41"></a><span id="l10.41"> </span>
<a href="#l10.42"></a><span id="l10.42">     document.title = docTitle;</span>
<a href="#l10.43"></a><span id="l10.43"> </span>
<a href="#l10.44"></a><span id="l10.44">     this.isDummy = aMsgHdr.folder == null;</span>
<a href="#l10.45"></a><span id="l10.45">     if (!this.isDummy)</span>
<a href="#l10.46"></a><span id="l10.46">       this.displayedUri = null;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/base/content/nsContextMenu.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/base/content/nsContextMenu.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l11.4"></a><span id="l11.4"> /** ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l11.5"></a><span id="l11.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.6"></a><span id="l11.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.7"></a><span id="l11.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9"> Components.utils.import(&quot;resource://gre/modules/InlineSpellChecker.jsm&quot;);</span>
<a href="#l11.10"></a><span id="l11.10"> Components.utils.import(&quot;resource://gre/modules/PlacesUtils.jsm&quot;);</span>
<a href="#l11.11"></a><span id="l11.11"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l11.13"></a><span id="l11.13"> Components.utils.import(&quot;resource:///modules/MailUtils.js&quot;);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15"> XPCOMUtils.defineLazyGetter(this, &quot;PageMenuParent&quot;, function() {</span>
<a href="#l11.16"></a><span id="l11.16">   let tmp = {};</span>
<a href="#l11.17"></a><span id="l11.17">   Cu.import(&quot;resource://gre/modules/PageMenu.jsm&quot;, tmp);</span>
<a href="#l11.18"></a><span id="l11.18">   return new tmp.PageMenuParent();</span>
<a href="#l11.19"></a><span id="l11.19"> });</span>
<a href="#l11.20"></a><span id="l11.20"> </span>
<a href="#l11.21"></a><span id="l11.21" class="difflineat">@@ -358,17 +359,17 @@ nsContextMenu.prototype = {</span>
<a href="#l11.22"></a><span id="l11.22">     this.showItem(&quot;mailContext-afterWatchThread&quot;, !this.inStandaloneWindow);</span>
<a href="#l11.23"></a><span id="l11.23"> </span>
<a href="#l11.24"></a><span id="l11.24">     this.showItem(&quot;mailContext-saveAs&quot;, this.numSelectedMessages &gt; 0 &amp;&amp;</span>
<a href="#l11.25"></a><span id="l11.25">                                         !this.hideMailItems &amp;&amp;</span>
<a href="#l11.26"></a><span id="l11.26">                                         !gMessageDisplay.isDummy &amp;&amp;</span>
<a href="#l11.27"></a><span id="l11.27">                                         !this.onPlayableMedia);</span>
<a href="#l11.28"></a><span id="l11.28"> </span>
<a href="#l11.29"></a><span id="l11.29"> </span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-    if (Application.platformIsMac)</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+    if (AppConstants.platform == &quot;macosx&quot;)</span>
<a href="#l11.32"></a><span id="l11.32">       this.showItem(&quot;mailContext-printpreview&quot;, false);</span>
<a href="#l11.33"></a><span id="l11.33">     else</span>
<a href="#l11.34"></a><span id="l11.34">       this.setSingleSelection(&quot;mailContext-printpreview&quot;);</span>
<a href="#l11.35"></a><span id="l11.35"> </span>
<a href="#l11.36"></a><span id="l11.36">     // XXX Not quite modifying the message, but the same rules apply at the</span>
<a href="#l11.37"></a><span id="l11.37">     // moment as we can't print non-message content from the message pane yet.</span>
<a href="#l11.38"></a><span id="l11.38">     this.showItem(&quot;mailContext-print&quot;, msgModifyItems);</span>
<a href="#l11.39"></a><span id="l11.39"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/base/content/sanitize.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/base/content/sanitize.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -1,16 +1,15 @@</span>
<a href="#l12.4"></a><span id="l12.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l12.5"></a><span id="l12.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l12.6"></a><span id="l12.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l12.7"></a><span id="l12.7"> </span>
<a href="#l12.8"></a><span id="l12.8"> Components.utils.import(&quot;resource://gre/modules/PlacesUtils.jsm&quot;);</span>
<a href="#l12.9"></a><span id="l12.9"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-var Application = Components.classes[&quot;@mozilla.org/steel/application;1&quot;]</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-                            .getService(Components.interfaces.steelIApplication);</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l12.13"></a><span id="l12.13"> </span>
<a href="#l12.14"></a><span id="l12.14"> function Sanitizer() {}</span>
<a href="#l12.15"></a><span id="l12.15"> Sanitizer.prototype = {</span>
<a href="#l12.16"></a><span id="l12.16">   // warning to the caller: this one may raise an exception (e.g. bug #265028)</span>
<a href="#l12.17"></a><span id="l12.17">   clearItem: function (aItemName)</span>
<a href="#l12.18"></a><span id="l12.18">   {</span>
<a href="#l12.19"></a><span id="l12.19">     if (this.items[aItemName].canClear)</span>
<a href="#l12.20"></a><span id="l12.20">       this.items[aItemName].clear();</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineat">@@ -243,21 +242,21 @@ Sanitizer.__defineGetter__(&quot;prefs&quot;, func</span>
<a href="#l12.22"></a><span id="l12.22">     : Sanitizer._prefs = Services.prefs</span>
<a href="#l12.23"></a><span id="l12.23">                                  .getBranch(Sanitizer</span>
<a href="#l12.24"></a><span id="l12.24">                                  .prefDomain);</span>
<a href="#l12.25"></a><span id="l12.25"> });</span>
<a href="#l12.26"></a><span id="l12.26"> </span>
<a href="#l12.27"></a><span id="l12.27"> // Shows sanitization UI</span>
<a href="#l12.28"></a><span id="l12.28"> Sanitizer.showUI = function(aParentWindow)</span>
<a href="#l12.29"></a><span id="l12.29"> {</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-Services.ww.openWindow(Application.platformIsMac ? null : aParentWindow,</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-&quot;chrome://messenger/content/sanitize.xul&quot;,</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-                &quot;Sanitize&quot;,</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-                &quot;chrome,titlebar,dialog,centerscreen,modal&quot;,</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">-                null);</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+  Services.ww.openWindow(AppConstants.platform == &quot;macosx&quot; ? null : aParentWindow,</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+                         &quot;chrome://messenger/content/sanitize.xul&quot;,</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineplus">+                         &quot;Sanitize&quot;,</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+                         &quot;chrome,titlebar,dialog,centerscreen,modal&quot;,</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+                         null);</span>
<a href="#l12.40"></a><span id="l12.40"> };</span>
<a href="#l12.41"></a><span id="l12.41"> </span>
<a href="#l12.42"></a><span id="l12.42"> /**</span>
<a href="#l12.43"></a><span id="l12.43">  * Deletes privacy sensitive data in a batch, optionally showing the</span>
<a href="#l12.44"></a><span id="l12.44">  * sanitize UI, according to user preferences</span>
<a href="#l12.45"></a><span id="l12.45">  */</span>
<a href="#l12.46"></a><span id="l12.46"> Sanitizer.sanitize = function(aParentWindow)</span>
<a href="#l12.47"></a><span id="l12.47"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/base/content/search.xml</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/base/content/search.xml</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -51,23 +51,24 @@</span>
<a href="#l13.4"></a><span id="l13.4"> </span>
<a href="#l13.5"></a><span id="l13.5">     &lt;implementation implements=&quot;nsIObserver&quot;&gt;</span>
<a href="#l13.6"></a><span id="l13.6">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l13.7"></a><span id="l13.7">         const Cc = Components.classes;</span>
<a href="#l13.8"></a><span id="l13.8">         const Ci = Components.interfaces;</span>
<a href="#l13.9"></a><span id="l13.9">         const Cu = Components.utils;</span>
<a href="#l13.10"></a><span id="l13.10">         Cu.import(&quot;resource:///modules/errUtils.js&quot;);</span>
<a href="#l13.11"></a><span id="l13.11">         Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+        Cu.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l13.13"></a><span id="l13.13"> </span>
<a href="#l13.14"></a><span id="l13.14">         try {</span>
<a href="#l13.15"></a><span id="l13.15">           this.setAttribute(</span>
<a href="#l13.16"></a><span id="l13.16">             &quot;placeholder&quot;,</span>
<a href="#l13.17"></a><span id="l13.17">             this.getAttribute(&quot;emptytextbase&quot;)</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-                 .replace(&quot;#1&quot;, this.getAttribute(</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-                                  Application.platformIsMac ?</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+                .replace(&quot;#1&quot;, this.getAttribute(</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+                                 (AppConstants.platform == &quot;macosx&quot;) ?</span>
<a href="#l13.22"></a><span id="l13.22">                                   &quot;keyLabelMac&quot; : &quot;keyLabelNonMac&quot;)));</span>
<a href="#l13.23"></a><span id="l13.23"> </span>
<a href="#l13.24"></a><span id="l13.24">           Services.prefs.addObserver(&quot;mailnews.database.global.indexer.enabled&quot;,</span>
<a href="#l13.25"></a><span id="l13.25">                                      this._prefObserver, false);</span>
<a href="#l13.26"></a><span id="l13.26"> </span>
<a href="#l13.27"></a><span id="l13.27">           this.glodaCompleter =</span>
<a href="#l13.28"></a><span id="l13.28">             Components.classes[&quot;@mozilla.org/autocomplete/search;1?name=gloda&quot;]</span>
<a href="#l13.29"></a><span id="l13.29">                       .getService()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/base/content/specialTabs.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/base/content/specialTabs.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l14.4"></a><span id="l14.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.5"></a><span id="l14.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.6"></a><span id="l14.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l14.9"></a><span id="l14.9"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l14.10"></a><span id="l14.10"> Components.utils.import(&quot;resource://gre/modules/AddonManager.jsm&quot;);</span>
<a href="#l14.11"></a><span id="l14.11"> Components.utils.import(&quot;resource:///modules/StringBundle.js&quot;);</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/BrowserUtils.jsm&quot;);</span>
<a href="#l14.13"></a><span id="l14.13"> </span>
<a href="#l14.14"></a><span id="l14.14"> function tabProgressListener(aTab, aStartsBlank) {</span>
<a href="#l14.15"></a><span id="l14.15">   this.mTab = aTab;</span>
<a href="#l14.16"></a><span id="l14.16">   this.mBrowser = aTab.browser;</span>
<a href="#l14.17"></a><span id="l14.17">   this.mBlank = aStartsBlank;</span>
<a href="#l14.18"></a><span id="l14.18">   this.mProgressListener = null;</span>
<a href="#l14.19"></a><span id="l14.19"> }</span>
<a href="#l14.20"></a><span id="l14.20"> </span>
<a href="#l14.21"></a><span id="l14.21" class="difflineat">@@ -693,17 +694,17 @@ var specialTabs = {</span>
<a href="#l14.22"></a><span id="l14.22">   getApplicationUpgradeVersions: function() {</span>
<a href="#l14.23"></a><span id="l14.23">     let savedAppVersion = null;</span>
<a href="#l14.24"></a><span id="l14.24">     let prefstring = &quot;mailnews.start_page_override.mstone&quot;;</span>
<a href="#l14.25"></a><span id="l14.25"> </span>
<a href="#l14.26"></a><span id="l14.26">     try {</span>
<a href="#l14.27"></a><span id="l14.27">       savedAppVersion = Services.prefs.getCharPref(prefstring);</span>
<a href="#l14.28"></a><span id="l14.28">     } catch (ex) {}</span>
<a href="#l14.29"></a><span id="l14.29"> </span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-    let currentApplicationVersion = Application.version;</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+    let currentApplicationVersion = Services.appinfo.version;</span>
<a href="#l14.32"></a><span id="l14.32"> </span>
<a href="#l14.33"></a><span id="l14.33">     if (savedAppVersion == &quot;ignore&quot;)</span>
<a href="#l14.34"></a><span id="l14.34">       return [null, this.splitVersion(currentApplicationVersion)];</span>
<a href="#l14.35"></a><span id="l14.35"> </span>
<a href="#l14.36"></a><span id="l14.36">     if (savedAppVersion != currentApplicationVersion)</span>
<a href="#l14.37"></a><span id="l14.37">       Services.prefs.setCharPref(prefstring, currentApplicationVersion);</span>
<a href="#l14.38"></a><span id="l14.38"> </span>
<a href="#l14.39"></a><span id="l14.39">     return [this.splitVersion(savedAppVersion), this.splitVersion(currentApplicationVersion)];</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineat">@@ -1330,17 +1331,17 @@ var specialTabs = {</span>
<a href="#l14.41"></a><span id="l14.41"> </span>
<a href="#l14.42"></a><span id="l14.42">         if (needsRestart) {</span>
<a href="#l14.43"></a><span id="l14.43">           messageString = messengerBundle.getString(&quot;addonsInstalledNeedsRestart&quot;);</span>
<a href="#l14.44"></a><span id="l14.44">           buttons = [{</span>
<a href="#l14.45"></a><span id="l14.45">             label: messengerBundle.getString(&quot;addonInstallRestartButton&quot;),</span>
<a href="#l14.46"></a><span id="l14.46">             accessKey: messengerBundle.getString(&quot;addonInstallRestartButton.accesskey&quot;),</span>
<a href="#l14.47"></a><span id="l14.47">             popup: null,</span>
<a href="#l14.48"></a><span id="l14.48">             callback: function() {</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-              Application.restart();</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineplus">+              BrowserUtils.restartApplication();</span>
<a href="#l14.51"></a><span id="l14.51">             }</span>
<a href="#l14.52"></a><span id="l14.52">           }];</span>
<a href="#l14.53"></a><span id="l14.53">         }</span>
<a href="#l14.54"></a><span id="l14.54">         else {</span>
<a href="#l14.55"></a><span id="l14.55">           messageString = messengerBundle.getString(&quot;addonsInstalled&quot;);</span>
<a href="#l14.56"></a><span id="l14.56">           buttons = [{</span>
<a href="#l14.57"></a><span id="l14.57">             label: messengerBundle.getString(&quot;addonInstallManage&quot;),</span>
<a href="#l14.58"></a><span id="l14.58">             accessKey: messengerBundle.getString(&quot;addonInstallManage.accesskey&quot;),</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineat">@@ -1383,18 +1384,18 @@ var specialTabs = {</span>
<a href="#l14.60"></a><span id="l14.60"> </span>
<a href="#l14.61"></a><span id="l14.61">   /**</span>
<a href="#l14.62"></a><span id="l14.62">    * Determine if we should load fav icons or not.</span>
<a href="#l14.63"></a><span id="l14.63">    *</span>
<a href="#l14.64"></a><span id="l14.64">    * @param aURI  An nsIURI containing the current url.</span>
<a href="#l14.65"></a><span id="l14.65">    */</span>
<a href="#l14.66"></a><span id="l14.66">   _shouldLoadFavIcon: function shouldLoadFavIcon(aURI) {</span>
<a href="#l14.67"></a><span id="l14.67">     return (aURI &amp;&amp;</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineminus">-            Application.prefs.getValue(&quot;browser.chrome.site_icons&quot;, false) &amp;&amp;</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineminus">-            Application.prefs.getValue(&quot;browser.chrome.favicons&quot;, false) &amp;&amp;</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+            Services.prefs.getBoolPref(&quot;browser.chrome.site_icons&quot;) &amp;&amp;</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineplus">+            Services.prefs.getBoolPref(&quot;browser.chrome.favicons&quot;) &amp;&amp;</span>
<a href="#l14.72"></a><span id="l14.72">             (&quot;schemeIs&quot; in aURI) &amp;&amp;</span>
<a href="#l14.73"></a><span id="l14.73">             (aURI.schemeIs(&quot;http&quot;) || aURI.schemeIs(&quot;https&quot;)));</span>
<a href="#l14.74"></a><span id="l14.74">   },</span>
<a href="#l14.75"></a><span id="l14.75"> </span>
<a href="#l14.76"></a><span id="l14.76">   /**</span>
<a href="#l14.77"></a><span id="l14.77">    * Tries to use the default favicon for a webpage for the specified tab.</span>
<a href="#l14.78"></a><span id="l14.78">    * If the web page is just an image, then we'll use the image itself it it</span>
<a href="#l14.79"></a><span id="l14.79">    * isn't too big.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/base/content/tabmail.xml</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/base/content/tabmail.xml</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -273,16 +273,17 @@</span>
<a href="#l15.4"></a><span id="l15.4">         &lt;children includes=&quot;tabpanels&quot;/&gt;</span>
<a href="#l15.5"></a><span id="l15.5">       &lt;/xul:tabbox&gt;</span>
<a href="#l15.6"></a><span id="l15.6">     &lt;/content&gt;</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8">     &lt;implementation implements=&quot;nsIController&quot;&gt;</span>
<a href="#l15.9"></a><span id="l15.9">       &lt;constructor&gt;</span>
<a href="#l15.10"></a><span id="l15.10">         window.controllers.insertControllerAt(0, this);</span>
<a href="#l15.11"></a><span id="l15.11">         this._restoringTabState = null;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+        Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l15.13"></a><span id="l15.13">       &lt;/constructor&gt;</span>
<a href="#l15.14"></a><span id="l15.14">       &lt;destructor&gt;</span>
<a href="#l15.15"></a><span id="l15.15">         window.controllers.removeController(this);</span>
<a href="#l15.16"></a><span id="l15.16">       &lt;/destructor&gt;</span>
<a href="#l15.17"></a><span id="l15.17">       &lt;field name=&quot;currentTabInfo&quot;&gt;</span>
<a href="#l15.18"></a><span id="l15.18">         null</span>
<a href="#l15.19"></a><span id="l15.19">       &lt;/field&gt;</span>
<a href="#l15.20"></a><span id="l15.20">       &lt;!-- Temporary field that only has a non-null value during a call to</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineat">@@ -1502,17 +1503,17 @@</span>
<a href="#l15.22"></a><span id="l15.22">           &lt;![CDATA[</span>
<a href="#l15.23"></a><span id="l15.23">             let docTitle = aTab.title ? aTab.title.trim() : &quot;&quot;;</span>
<a href="#l15.24"></a><span id="l15.24">             let docElement = document.documentElement;</span>
<a href="#l15.25"></a><span id="l15.25">             // If the document title is blank, add the default title.</span>
<a href="#l15.26"></a><span id="l15.26">             if (!docTitle)</span>
<a href="#l15.27"></a><span id="l15.27">               docTitle = docElement.getAttribute(&quot;defaultTabTitle&quot;);</span>
<a href="#l15.28"></a><span id="l15.28"> </span>
<a href="#l15.29"></a><span id="l15.29">             // If we're on Mac, don't display the separator and the modifier.</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineminus">-            if (!Application.platformIsMac) {</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineplus">+            if (AppConstants.platform != &quot;macosx&quot;) {</span>
<a href="#l15.32"></a><span id="l15.32">               docTitle += docElement.getAttribute(&quot;titlemenuseparator&quot;) +</span>
<a href="#l15.33"></a><span id="l15.33">                           docElement.getAttribute(&quot;titlemodifier&quot;);</span>
<a href="#l15.34"></a><span id="l15.34">             }</span>
<a href="#l15.35"></a><span id="l15.35"> </span>
<a href="#l15.36"></a><span id="l15.36">             document.title = docTitle;</span>
<a href="#l15.37"></a><span id="l15.37">           ]]&gt;</span>
<a href="#l15.38"></a><span id="l15.38">         &lt;/body&gt;</span>
<a href="#l15.39"></a><span id="l15.39">       &lt;/method&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/base/modules/quickFilterManager.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/base/modules/quickFilterManager.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -6,25 +6,23 @@ this.EXPORTED_SYMBOLS = [&quot;QuickFilterSta</span>
<a href="#l16.4"></a><span id="l16.4">                           &quot;MessageTextFilter&quot;, &quot;QuickFilterSearchListener&quot;];</span>
<a href="#l16.5"></a><span id="l16.5"> var Cc = Components.classes;</span>
<a href="#l16.6"></a><span id="l16.6"> var Ci = Components.interfaces;</span>
<a href="#l16.7"></a><span id="l16.7"> var Cr = Components.results;</span>
<a href="#l16.8"></a><span id="l16.8"> var Cu = Components.utils;</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> Cu.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l16.11"></a><span id="l16.11"> Cu.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+Cu.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l16.13"></a><span id="l16.13"> </span>
<a href="#l16.14"></a><span id="l16.14"> Cu.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l16.15"></a><span id="l16.15"> Cu.import(&quot;resource:///modules/errUtils.js&quot;);</span>
<a href="#l16.16"></a><span id="l16.16"> Cu.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l16.17"></a><span id="l16.17"> Cu.import(&quot;resource:///modules/searchSpec.js&quot;);</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-var Application = Cc[&quot;@mozilla.org/steel/application;1&quot;]</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-                      .getService(Ci.steelIApplication);</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-</span>
<a href="#l16.22"></a><span id="l16.22"> var nsMsgSearchAttrib = Components.interfaces.nsMsgSearchAttrib;</span>
<a href="#l16.23"></a><span id="l16.23"> var nsMsgMessageFlags = Components.interfaces.nsMsgMessageFlags;</span>
<a href="#l16.24"></a><span id="l16.24"> var nsMsgSearchOp = Components.interfaces.nsMsgSearchOp;</span>
<a href="#l16.25"></a><span id="l16.25"> </span>
<a href="#l16.26"></a><span id="l16.26"> // XXX we need to know whether the gloda indexer is enabled for upsell reasons,</span>
<a href="#l16.27"></a><span id="l16.27"> // but this should really just be exposed on the main Gloda public interface.</span>
<a href="#l16.28"></a><span id="l16.28"> Cu.import(&quot;resource:///modules/gloda/indexer.js&quot;);</span>
<a href="#l16.29"></a><span id="l16.29"> // we need to be able to create gloda message searcher instances for upsells:</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineat">@@ -1064,17 +1062,17 @@ var MessageTextFilter = {</span>
<a href="#l16.31"></a><span id="l16.31">    *  add a special down keypress handler that escapes the textbox into the</span>
<a href="#l16.32"></a><span id="l16.32">    *  thread pane.</span>
<a href="#l16.33"></a><span id="l16.33">    */</span>
<a href="#l16.34"></a><span id="l16.34">   domBindExtra: function MessageTextFilter_domBind(aDocument, aMuxer, aNode) {</span>
<a href="#l16.35"></a><span id="l16.35">     // -- platform-dependent placeholder setup</span>
<a href="#l16.36"></a><span id="l16.36">     aNode.setAttribute(</span>
<a href="#l16.37"></a><span id="l16.37">       &quot;placeholder&quot;,</span>
<a href="#l16.38"></a><span id="l16.38">       aNode.getAttribute(&quot;emptytextbase&quot;)</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-           .replace(&quot;#1&quot;, aNode.getAttribute(Application.platformIsMac ?</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+           .replace(&quot;#1&quot;, aNode.getAttribute((AppConstants.platform == &quot;macosx&quot;) ?</span>
<a href="#l16.41"></a><span id="l16.41">                                              &quot;keyLabelMac&quot; : &quot;keyLabelNonMac&quot;)));</span>
<a href="#l16.42"></a><span id="l16.42">     // force an update of the emptytext now that we've updated it.</span>
<a href="#l16.43"></a><span id="l16.43">     aNode.value = &quot;&quot;;</span>
<a href="#l16.44"></a><span id="l16.44"> </span>
<a href="#l16.45"></a><span id="l16.45">     // -- Keypresses for focus transferral and upsell</span>
<a href="#l16.46"></a><span id="l16.46">     aNode.addEventListener(&quot;keypress&quot;, function(aEvent) {</span>
<a href="#l16.47"></a><span id="l16.47">       // - Down key into the thread pane</span>
<a href="#l16.48"></a><span id="l16.48">       if (aEvent.keyCode == aEvent.DOM_VK_DOWN) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/components/about-support/content/a11y.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/components/about-support/content/a11y.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -11,14 +11,14 @@ function populateAccessibilitySection() </span>
<a href="#l17.4"></a><span id="l17.4">         Ci.nsISupports);</span>
<a href="#l17.5"></a><span id="l17.5">   } catch (ex) {</span>
<a href="#l17.6"></a><span id="l17.6">     active = false;</span>
<a href="#l17.7"></a><span id="l17.7">   }</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9">   document.getElementById(&quot;a11y-activated&quot;).textContent = active ? &quot;1&quot; : &quot;0&quot;;</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">   var forceDisabled = 0;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-  forceDisabled = Application.prefs.get(&quot;accessibility.force_disabled&quot;).value;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+  forceDisabled = Services.getIntPref(&quot;accessibility.force_disabled&quot;);</span>
<a href="#l17.14"></a><span id="l17.14"> </span>
<a href="#l17.15"></a><span id="l17.15">   document.getElementById(&quot;a11y-force-disabled&quot;).textContent</span>
<a href="#l17.16"></a><span id="l17.16">     = (forceDisabled == -1) ? &quot;never&quot; :</span>
<a href="#l17.17"></a><span id="l17.17">   ((forceDisabled == 1) ? &quot;1&quot; : &quot;0&quot;);</span>
<a href="#l17.18"></a><span id="l17.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/components/about-support/content/init.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/components/about-support/content/init.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -28,18 +28,18 @@ var CLASS_DATA_PRIVATE = &quot;data-private&quot;;</span>
<a href="#l18.4"></a><span id="l18.4"> // to not display private data.</span>
<a href="#l18.5"></a><span id="l18.5"> var CLASS_DATA_PUBLIC = &quot;data-public&quot;;</span>
<a href="#l18.6"></a><span id="l18.6"> </span>
<a href="#l18.7"></a><span id="l18.7"> window.onload = function () {</span>
<a href="#l18.8"></a><span id="l18.8">   // Get the support URL.</span>
<a href="#l18.9"></a><span id="l18.9">   let supportUrl = Services.urlFormatter.formatURLPref(&quot;app.support.baseURL&quot;);</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11">   // Update the application basics section.</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  document.getElementById(&quot;application-box&quot;).textContent = Application.name;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-  document.getElementById(&quot;version-box&quot;).textContent = Application.version;</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  document.getElementById(&quot;application-box&quot;).textContent = Services.appinfo.name;</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+  document.getElementById(&quot;version-box&quot;).textContent = Services.appinfo.version;</span>
<a href="#l18.16"></a><span id="l18.16">   document.getElementById(&quot;useragent-box&quot;).textContent = navigator.userAgent;</span>
<a href="#l18.17"></a><span id="l18.17">   document.getElementById(&quot;supportLink&quot;).href = supportUrl;</span>
<a href="#l18.18"></a><span id="l18.18">   let currProfD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile);</span>
<a href="#l18.19"></a><span id="l18.19">   appendChildren(document.getElementById(&quot;profile-dir-box&quot;),</span>
<a href="#l18.20"></a><span id="l18.20">     [createElement(&quot;a&quot;, currProfD.path,</span>
<a href="#l18.21"></a><span id="l18.21">       {&quot;href&quot;: Services.io.newFileURI(currProfD).spec,</span>
<a href="#l18.22"></a><span id="l18.22">        &quot;onclick&quot;: &quot;openProfileDirectory(); event.preventDefault();&quot;</span>
<a href="#l18.23"></a><span id="l18.23">       })]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/components/about-support/content/prefs.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/components/about-support/content/prefs.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -102,24 +102,39 @@ function formatPrefValue(prefValue) {</span>
<a href="#l19.4"></a><span id="l19.4">   let text = &quot;&quot; + prefValue;</span>
<a href="#l19.5"></a><span id="l19.5">   if (text.length &gt; maxPrefValueLen)</span>
<a href="#l19.6"></a><span id="l19.6">     text = text.substring(0, maxPrefValueLen) + ELLIPSIS;</span>
<a href="#l19.7"></a><span id="l19.7">   return text;</span>
<a href="#l19.8"></a><span id="l19.8"> }</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10"> function getModifiedPrefs() {</span>
<a href="#l19.11"></a><span id="l19.11">   // We use the low-level prefs API to identify prefs that have been</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  // modified, rather that Application.prefs.all since the latter is</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-  // much, much slower.  Application.prefs.all also gets slower each</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+  // modified, rather than extApplication.js::prefs.all since the latter is</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">+  // much, much slower. extApplication.js::prefs.all also gets slower each</span>
<a href="#l19.16"></a><span id="l19.16">   // time it's called.  See bug 517312.</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineplus">+  function GetPref(name) {</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+    let type = Services.prefs.getPrefType(name);</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+    switch (type) {</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineplus">+      case Services.prefs.PREF_STRING:</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineplus">+        return Services.prefs.getCharPref(name);</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+      case Services.prefs.PREF_INT:</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineplus">+        return Services.prefs.getIntPref(name);</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineplus">+      case Services.prefs.PREF_BOOL:</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineplus">+        return Services.prefs.getBoolPref(name);</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+      default:</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineplus">+        throw new Error(&quot;Unknown type&quot;);</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineplus">+    }</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineplus">+  }</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineplus">+</span>
<a href="#l19.31"></a><span id="l19.31">   let prefNames = getWhitelistedPrefNames();</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-  let prefs = prefNames.filter(prefName =&gt;</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-                               Services.prefs.prefHasUserValue(prefName)</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-                               &amp;&amp; !isBlacklisted(prefName))</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-                       .map(prefName =&gt; Application.prefs.get(prefName));</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineplus">+  prefNames = prefNames.filter(prefName =&gt; (Services.prefs.prefHasUserValue(prefName)</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineplus">+                                            &amp;&amp; !isBlacklisted(prefName)));</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineplus">+  let prefs = [];</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineplus">+  prefNames.forEach(prefName =&gt;</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineplus">+                    prefs.push({ name: prefName, value: GetPref(prefName) }));</span>
<a href="#l19.41"></a><span id="l19.41">   return prefs;</span>
<a href="#l19.42"></a><span id="l19.42"> }</span>
<a href="#l19.43"></a><span id="l19.43"> </span>
<a href="#l19.44"></a><span id="l19.44"> function getWhitelistedPrefNames() {</span>
<a href="#l19.45"></a><span id="l19.45">   let results = [];</span>
<a href="#l19.46"></a><span id="l19.46">   PREFS_WHITELIST.forEach(function (prefStem) {</span>
<a href="#l19.47"></a><span id="l19.47">     let prefNames = Services.prefs.getChildList(prefStem, {});</span>
<a href="#l19.48"></a><span id="l19.48">     results = results.concat(prefNames);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -14,16 +14,17 @@ Components.utils.import(&quot;resource:///mod</span>
<a href="#l20.4"></a><span id="l20.4"> Components.utils.import(&quot;resource:///modules/folderUtils.jsm&quot;);</span>
<a href="#l20.5"></a><span id="l20.5"> Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l20.6"></a><span id="l20.6"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l20.7"></a><span id="l20.7"> Components.utils.import(&quot;resource:///modules/MailUtils.js&quot;);</span>
<a href="#l20.8"></a><span id="l20.8"> Components.utils.import(&quot;resource://gre/modules/InlineSpellChecker.jsm&quot;);</span>
<a href="#l20.9"></a><span id="l20.9"> Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l20.10"></a><span id="l20.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l20.11"></a><span id="l20.11"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l20.13"></a><span id="l20.13"> </span>
<a href="#l20.14"></a><span id="l20.14"> /**</span>
<a href="#l20.15"></a><span id="l20.15">  * interfaces</span>
<a href="#l20.16"></a><span id="l20.16">  */</span>
<a href="#l20.17"></a><span id="l20.17"> var nsIMsgCompDeliverMode = Components.interfaces.nsIMsgCompDeliverMode;</span>
<a href="#l20.18"></a><span id="l20.18"> var nsIMsgCompSendFormat = Components.interfaces.nsIMsgCompSendFormat;</span>
<a href="#l20.19"></a><span id="l20.19"> var nsIMsgCompConvertible = Components.interfaces.nsIMsgCompConvertible;</span>
<a href="#l20.20"></a><span id="l20.20"> var nsIMsgCompType = Components.interfaces.nsIMsgCompType;</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineat">@@ -2926,17 +2927,17 @@ function CheckValidEmailAddress(aMsgComp</span>
<a href="#l20.22"></a><span id="l20.22"> </span>
<a href="#l20.23"></a><span id="l20.23">   return true;</span>
<a href="#l20.24"></a><span id="l20.24"> }</span>
<a href="#l20.25"></a><span id="l20.25"> </span>
<a href="#l20.26"></a><span id="l20.26"> function SendMessage()</span>
<a href="#l20.27"></a><span id="l20.27"> {</span>
<a href="#l20.28"></a><span id="l20.28">   let sendInBackground =</span>
<a href="#l20.29"></a><span id="l20.29">     Services.prefs.getBoolPref(&quot;mailnews.sendInBackground&quot;);</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-  if (sendInBackground &amp;&amp; !Application.platformIsMac) {</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineplus">+  if (sendInBackground &amp;&amp; (AppConstants.platform != &quot;macosx&quot;)) {</span>
<a href="#l20.32"></a><span id="l20.32">     let enumerator = Services.wm.getEnumerator(null);</span>
<a href="#l20.33"></a><span id="l20.33">     let count = 0;</span>
<a href="#l20.34"></a><span id="l20.34">     while (enumerator.hasMoreElements() &amp;&amp; count &lt; 2) {</span>
<a href="#l20.35"></a><span id="l20.35">       let win = enumerator.getNext();</span>
<a href="#l20.36"></a><span id="l20.36">       count++;</span>
<a href="#l20.37"></a><span id="l20.37">     }</span>
<a href="#l20.38"></a><span id="l20.38">     if (count == 1)</span>
<a href="#l20.39"></a><span id="l20.39">       sendInBackground = false;</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineat">@@ -2985,17 +2986,17 @@ function SendMessageLater()</span>
<a href="#l20.41"></a><span id="l20.41"> {</span>
<a href="#l20.42"></a><span id="l20.42">   GenericSendMessage(nsIMsgCompDeliverMode.Later);</span>
<a href="#l20.43"></a><span id="l20.43">   ExitFullscreenMode();</span>
<a href="#l20.44"></a><span id="l20.44"> }</span>
<a href="#l20.45"></a><span id="l20.45"> </span>
<a href="#l20.46"></a><span id="l20.46"> function ExitFullscreenMode()</span>
<a href="#l20.47"></a><span id="l20.47"> {</span>
<a href="#l20.48"></a><span id="l20.48">   // On OS X we need to deliberately exit full screen mode after sending.</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineminus">-  if (Application.platformIsMac) {</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineplus">+  if (AppConstants.platform == &quot;macosx&quot;) {</span>
<a href="#l20.51"></a><span id="l20.51">     window.fullScreen = false;</span>
<a href="#l20.52"></a><span id="l20.52">   }</span>
<a href="#l20.53"></a><span id="l20.53"> }</span>
<a href="#l20.54"></a><span id="l20.54"> </span>
<a href="#l20.55"></a><span id="l20.55"> function Save()</span>
<a href="#l20.56"></a><span id="l20.56"> {</span>
<a href="#l20.57"></a><span id="l20.57">   switch (defaultSaveOperation)</span>
<a href="#l20.58"></a><span id="l20.58">   {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/components/im/content/chat-messenger-overlay.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/components/im/content/chat-messenger-overlay.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l21.4"></a><span id="l21.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l21.5"></a><span id="l21.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l21.6"></a><span id="l21.6">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> var imServices = {};</span>
<a href="#l21.9"></a><span id="l21.9"> Components.utils.import(&quot;resource:///modules/chatNotifications.jsm&quot;);</span>
<a href="#l21.10"></a><span id="l21.10"> Components.utils.import(&quot;resource:///modules/imServices.jsm&quot;, imServices);</span>
<a href="#l21.11"></a><span id="l21.11"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l21.13"></a><span id="l21.13"> </span>
<a href="#l21.14"></a><span id="l21.14"> XPCOMUtils.defineLazyModuleGetter(this, &quot;OS&quot;, &quot;resource://gre/modules/osfile.jsm&quot;);</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16"> imServices = imServices.Services;</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18"> var gBuddyListContextMenu = null;</span>
<a href="#l21.19"></a><span id="l21.19"> </span>
<a href="#l21.20"></a><span id="l21.20"> function buddyListContextMenu(aXulMenu) {</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineat">@@ -1134,17 +1135,17 @@ var chatHandler = {</span>
<a href="#l21.22"></a><span id="l21.22">       let item = listbox.selectedItem;</span>
<a href="#l21.23"></a><span id="l21.23">       if (!item || !item.parentNode) // empty list or item no longer in the list</span>
<a href="#l21.24"></a><span id="l21.24">         return;</span>
<a href="#l21.25"></a><span id="l21.25">       item.keyPress(aEvent);</span>
<a href="#l21.26"></a><span id="l21.26">     });</span>
<a href="#l21.27"></a><span id="l21.27">     listbox.addEventListener(&quot;select&quot;, this.onListItemSelected.bind(this));</span>
<a href="#l21.28"></a><span id="l21.28">     listbox.addEventListener(&quot;click&quot;, this.onListItemClick.bind(this));</span>
<a href="#l21.29"></a><span id="l21.29">     document.getElementById(&quot;chatTabPanel&quot;).addEventListener(&quot;keypress&quot;, function(aEvent) {</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-      let accelKeyPressed = Application.platformIsMac ? aEvent.metaKey : aEvent.ctrlKey;</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+      let accelKeyPressed = (AppContants.platform == &quot;macosx&quot;) ? aEvent.metaKey : aEvent.ctrlKey;</span>
<a href="#l21.32"></a><span id="l21.32">       if (!accelKeyPressed ||</span>
<a href="#l21.33"></a><span id="l21.33">           (aEvent.keyCode != aEvent.DOM_VK_DOWN &amp;&amp; aEvent.keyCode != aEvent.DOM_VK_UP))</span>
<a href="#l21.34"></a><span id="l21.34">         return;</span>
<a href="#l21.35"></a><span id="l21.35">       listbox._userSelecting = true;</span>
<a href="#l21.36"></a><span id="l21.36">       listbox.moveByOffset(aEvent.keyCode == aEvent.DOM_VK_DOWN ? 1 : -1, true, false);</span>
<a href="#l21.37"></a><span id="l21.37">       listbox._userSelecting = false;</span>
<a href="#l21.38"></a><span id="l21.38">       let item = listbox.selectedItem;</span>
<a href="#l21.39"></a><span id="l21.39">       if (item.localName == &quot;imconv&quot; &amp;&amp; item.convView)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/components/preferences/chat.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/components/preferences/chat.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -86,19 +86,19 @@ var gChatPane = {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">     // XXX todo, persist the last sound directory and pass it in</span>
<a href="#l22.6"></a><span id="l22.6">     fp.init(window, document.getElementById(&quot;bundlePreferences&quot;)</span>
<a href="#l22.7"></a><span id="l22.7">                             .getString(&quot;soundFilePickerTitle&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9">     // On Mac, allow AIFF and CAF files too</span>
<a href="#l22.10"></a><span id="l22.10">     let bundlePrefs = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l22.11"></a><span id="l22.11">     let soundFilesText = bundlePrefs.getString(&quot;soundFilesDescription&quot;);</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    if (Application.platformIsMac)</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+    if (AppConstants.platform == &quot;macosx&quot;)</span>
<a href="#l22.14"></a><span id="l22.14">       fp.appendFilter(soundFilesText, &quot;*.wav; *.aif; *.aiff; *.caf&quot;);</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-    else if (Application.platformIsLinux)</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+    else if (AppConstants.platform == &quot;linux&quot;)</span>
<a href="#l22.17"></a><span id="l22.17">       fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l22.18"></a><span id="l22.18">     else</span>
<a href="#l22.19"></a><span id="l22.19">       fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21">     let ret = fp.show();</span>
<a href="#l22.22"></a><span id="l22.22">     if (ret == nsIFilePicker.returnOK)</span>
<a href="#l22.23"></a><span id="l22.23">     {</span>
<a href="#l22.24"></a><span id="l22.24">       // convert the nsILocalFile into a nsIFile url</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -134,19 +134,19 @@ var gGeneralPane = {</span>
<a href="#l23.4"></a><span id="l23.4">       fp.displayDirectory = localFile.parent;</span>
<a href="#l23.5"></a><span id="l23.5"> </span>
<a href="#l23.6"></a><span id="l23.6">     // XXX todo, persist the last sound directory and pass it in</span>
<a href="#l23.7"></a><span id="l23.7">     fp.init(window, document.getElementById(&quot;bundlePreferences&quot;).getString(&quot;soundFilePickerTitle&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9">     // On Mac, allow AIFF and CAF files too</span>
<a href="#l23.10"></a><span id="l23.10">     var bundlePrefs = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l23.11"></a><span id="l23.11">     var soundFilesText = bundlePrefs.getString(&quot;soundFilesDescription&quot;);</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    if (Application.platformIsMac)</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    if (AppConstants.platform == &quot;macosx&quot;)</span>
<a href="#l23.14"></a><span id="l23.14">       fp.appendFilter(soundFilesText, &quot;*.wav; *.aif; *.aiff; *.caf&quot;);</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineminus">-    else if (Application.platformIsLinux)</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+    else if (AppConstants.platform == &quot;linux&quot;)</span>
<a href="#l23.17"></a><span id="l23.17">       fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l23.18"></a><span id="l23.18">     else</span>
<a href="#l23.19"></a><span id="l23.19">       fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l23.20"></a><span id="l23.20"> </span>
<a href="#l23.21"></a><span id="l23.21">     var ret = fp.show();</span>
<a href="#l23.22"></a><span id="l23.22">     if (ret == nsIFilePicker.returnOK)</span>
<a href="#l23.23"></a><span id="l23.23">     {</span>
<a href="#l23.24"></a><span id="l23.24">       // convert the nsILocalFile into a nsIFile url</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/components/preferences/permissions.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/components/preferences/permissions.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -1,13 +1,14 @@</span>
<a href="#l24.4"></a><span id="l24.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l24.5"></a><span id="l24.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l24.6"></a><span id="l24.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l24.7"></a><span id="l24.7"> </span>
<a href="#l24.8"></a><span id="l24.8"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l24.9"></a><span id="l24.9" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11"> var nsIPermissionManager = Components.interfaces.nsIPermissionManager;</span>
<a href="#l24.12"></a><span id="l24.12"> var nsICookiePermission = Components.interfaces.nsICookiePermission;</span>
<a href="#l24.13"></a><span id="l24.13"> </span>
<a href="#l24.14"></a><span id="l24.14"> var NOTIFICATION_FLUSH_PERMISSIONS = &quot;flush-pending-permissions&quot;;</span>
<a href="#l24.15"></a><span id="l24.15"> </span>
<a href="#l24.16"></a><span id="l24.16"> /**</span>
<a href="#l24.17"></a><span id="l24.17">  * Magic URI base used so the permission manager can store</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineat">@@ -349,19 +350,19 @@ var gPermissionManager = {</span>
<a href="#l24.19"></a><span id="l24.19">       this._removePermission(p);</span>
<a href="#l24.20"></a><span id="l24.20">     }</span>
<a href="#l24.21"></a><span id="l24.21">     document.getElementById(&quot;removePermission&quot;).disabled = true;</span>
<a href="#l24.22"></a><span id="l24.22">     document.getElementById(&quot;removeAllPermissions&quot;).disabled = true;</span>
<a href="#l24.23"></a><span id="l24.23">   },</span>
<a href="#l24.24"></a><span id="l24.24"> </span>
<a href="#l24.25"></a><span id="l24.25">   onPermissionKeyPress: function (aEvent)</span>
<a href="#l24.26"></a><span id="l24.26">   {</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineminus">-    if (aEvent.keyCode == KeyEvent.DOM_VK_DELETE</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineminus">-        || (Application.platformIsMac &amp;&amp; aEvent.keyCode == KeyEvent.DOM_VK_BACK_SPACE)</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineminus">-       )</span>
<a href="#l24.30"></a><span id="l24.30" class="difflineplus">+    if (aEvent.keyCode == KeyEvent.DOM_VK_DELETE ||</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineplus">+        ((AppConstants.platform == &quot;macosx&quot;) &amp;&amp;</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineplus">+         aEvent.keyCode == KeyEvent.DOM_VK_BACK_SPACE))</span>
<a href="#l24.33"></a><span id="l24.33">       this.onPermissionDeleted();</span>
<a href="#l24.34"></a><span id="l24.34">   },</span>
<a href="#l24.35"></a><span id="l24.35"> </span>
<a href="#l24.36"></a><span id="l24.36">   _lastPermissionSortColumn: &quot;&quot;,</span>
<a href="#l24.37"></a><span id="l24.37">   _lastPermissionSortAscending: false,</span>
<a href="#l24.38"></a><span id="l24.38">   _permissionsComparator : function (a, b)</span>
<a href="#l24.39"></a><span id="l24.39">   {</span>
<a href="#l24.40"></a><span id="l24.40">     return a.toLowerCase().localeCompare(b.toLowerCase());</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/steel/steelApplication.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/steel/steelApplication.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1,17 +1,18 @@</span>
<a href="#l25.4"></a><span id="l25.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l25.5"></a><span id="l25.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l25.6"></a><span id="l25.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l25.7"></a><span id="l25.7"> </span>
<a href="#l25.8"></a><span id="l25.8"> var Cc = Components.classes;</span>
<a href="#l25.9"></a><span id="l25.9"> var Ci = Components.interfaces;</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11"> Components.utils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+XPCOMUtils.defineLazyModuleGetter(this, &quot;Deprecated&quot;,</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+                                  &quot;resource://gre/modules/Deprecated.jsm&quot;);</span>
<a href="#l25.15"></a><span id="l25.15"> var APPLICATION_CID = Components.ID(&quot;f265021a-7f1d-4b4b-bdc6-9aedca4d8f13&quot;);</span>
<a href="#l25.16"></a><span id="l25.16"> var APPLICATION_CONTRACTID = &quot;@mozilla.org/steel/application;1&quot;;</span>
<a href="#l25.17"></a><span id="l25.17"> </span>
<a href="#l25.18"></a><span id="l25.18"> //=================================================</span>
<a href="#l25.19"></a><span id="l25.19"> // Factory - Treat Application as a singleton</span>
<a href="#l25.20"></a><span id="l25.20"> // XXX This is required, because we're registered for the 'JavaScript global</span>
<a href="#l25.21"></a><span id="l25.21"> // privileged property' category, whose handler always calls createInstance.</span>
<a href="#l25.22"></a><span id="l25.22"> // See bug 386535.</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineat">@@ -27,16 +28,19 @@ var ApplicationFactory = {</span>
<a href="#l25.24"></a><span id="l25.24"> </span>
<a href="#l25.25"></a><span id="l25.25">     return gSingleton.QueryInterface(aIID);</span>
<a href="#l25.26"></a><span id="l25.26">   }</span>
<a href="#l25.27"></a><span id="l25.27"> };</span>
<a href="#l25.28"></a><span id="l25.28"> </span>
<a href="#l25.29"></a><span id="l25.29"> #include ../../mozilla/toolkit/components/exthelper/extApplication.js</span>
<a href="#l25.30"></a><span id="l25.30"> </span>
<a href="#l25.31"></a><span id="l25.31"> function Application() {</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineplus">+  Deprecated.warning(&quot;STEEL is deprecated, you should use AppConstants.jsm or Services.jsm.&quot;,</span>
<a href="#l25.33"></a><span id="l25.33" class="difflineplus">+                     &quot;http://mxr.mozilla.org/comm-central/source/mozilla/toolkit/modules/AppConstants.jsm&quot;);</span>
<a href="#l25.34"></a><span id="l25.34" class="difflineplus">+</span>
<a href="#l25.35"></a><span id="l25.35">   this.initToolkitHelpers();</span>
<a href="#l25.36"></a><span id="l25.36"> }</span>
<a href="#l25.37"></a><span id="l25.37"> </span>
<a href="#l25.38"></a><span id="l25.38"> Application.prototype = {</span>
<a href="#l25.39"></a><span id="l25.39">   // set the proto, defined in extApplication.js</span>
<a href="#l25.40"></a><span id="l25.40">   __proto__: extApplication.prototype,</span>
<a href="#l25.41"></a><span id="l25.41"> </span>
<a href="#l25.42"></a><span id="l25.42">   classID: APPLICATION_CID,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/test/mozmill/message-window/test-eml-subject.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/test/mozmill/message-window/test-eml-subject.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -9,35 +9,36 @@</span>
<a href="#l26.4"></a><span id="l26.4"> var MODULE_NAME = &quot;test-eml-subject&quot;;</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6"> var RELATIVE_ROOT = &quot;../shared-modules&quot;;</span>
<a href="#l26.7"></a><span id="l26.7"> var MODULE_REQUIRES = [&quot;folder-display-helpers&quot;, &quot;window-helpers&quot;];</span>
<a href="#l26.8"></a><span id="l26.8"> </span>
<a href="#l26.9"></a><span id="l26.9"> var os = {};</span>
<a href="#l26.10"></a><span id="l26.10"> Cu.import('resource://mozmill/stdlib/os.js', os);</span>
<a href="#l26.11"></a><span id="l26.11"> Cu.import(&quot;resource:///modules/StringBundle.js&quot;);</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+Cu.import(&quot;resource://gre/modules/AppConstants.jsm&quot;);</span>
<a href="#l26.13"></a><span id="l26.13"> </span>
<a href="#l26.14"></a><span id="l26.14"> var setupModule = function(module) {</span>
<a href="#l26.15"></a><span id="l26.15">   let fdh = collector.getModule(&quot;folder-display-helpers&quot;);</span>
<a href="#l26.16"></a><span id="l26.16">   fdh.installInto(module);</span>
<a href="#l26.17"></a><span id="l26.17">   let wh = collector.getModule(&quot;window-helpers&quot;);</span>
<a href="#l26.18"></a><span id="l26.18">   wh.installInto(module);</span>
<a href="#l26.19"></a><span id="l26.19"> };</span>
<a href="#l26.20"></a><span id="l26.20"> </span>
<a href="#l26.21"></a><span id="l26.21"> function check_eml_window_title(subject, eml) {</span>
<a href="#l26.22"></a><span id="l26.22">   let file = os.getFileForPath(os.abspath(eml, os.getFileForPath(__file__)));</span>
<a href="#l26.23"></a><span id="l26.23">   let msgc = open_message_from_file(file);</span>
<a href="#l26.24"></a><span id="l26.24"> </span>
<a href="#l26.25"></a><span id="l26.25">   let brandBundle = new StringBundle(&quot;chrome://branding/locale/brand.properties&quot;);</span>
<a href="#l26.26"></a><span id="l26.26">   let productName = brandBundle.get(&quot;brandFullName&quot;);</span>
<a href="#l26.27"></a><span id="l26.27">   let expectedTitle = subject;</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineminus">-  if (expectedTitle &amp;&amp; !Application.platformIsMac)</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+  if (expectedTitle &amp;&amp; (AppConstants.platform != &quot;macosx&quot;))</span>
<a href="#l26.30"></a><span id="l26.30">     expectedTitle += &quot; - &quot;;</span>
<a href="#l26.31"></a><span id="l26.31"> </span>
<a href="#l26.32"></a><span id="l26.32" class="difflineminus">-  if (!expectedTitle || !Application.platformIsMac)</span>
<a href="#l26.33"></a><span id="l26.33" class="difflineplus">+  if (!expectedTitle || (AppConstants.platform != &quot;macosx&quot;))</span>
<a href="#l26.34"></a><span id="l26.34">     expectedTitle += productName;</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36">   assert_equals(msgc.window.document.title, expectedTitle);</span>
<a href="#l26.37"></a><span id="l26.37">   close_window(msgc);</span>
<a href="#l26.38"></a><span id="l26.38"> }</span>
<a href="#l26.39"></a><span id="l26.39"> </span>
<a href="#l26.40"></a><span id="l26.40"> function test_eml_empty_subject() {</span>
<a href="#l26.41"></a><span id="l26.41">   check_eml_window_title(&quot;&quot;, &quot;./emptySubject.eml&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -65,19 +65,16 @@ var DO_NOT_EXPORT = {</span>
<a href="#l27.4"></a><span id="l27.4"> };</span>
<a href="#l27.5"></a><span id="l27.5"> </span>
<a href="#l27.6"></a><span id="l27.6"> var EXPORT_VIA_GETTER_SETTER = {</span>
<a href="#l27.7"></a><span id="l27.7">   // These should be getters and setters instead of direct property accesses so</span>
<a href="#l27.8"></a><span id="l27.8">   // that setting them reflects across scopes.</span>
<a href="#l27.9"></a><span id="l27.9">   mc: true,</span>
<a href="#l27.10"></a><span id="l27.10"> };</span>
<a href="#l27.11"></a><span id="l27.11"> </span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-var Application = Cc[&quot;@mozilla.org/steel/application;1&quot;]</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-                    .getService(Ci.steelIApplication);</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineminus">-</span>
<a href="#l27.15"></a><span id="l27.15"> /** The controller for the main 3-pane window. */</span>
<a href="#l27.16"></a><span id="l27.16"> var mc;</span>
<a href="#l27.17"></a><span id="l27.17"> /** the index of the current 'other' tab */</span>
<a href="#l27.18"></a><span id="l27.18"> var otherTab;</span>
<a href="#l27.19"></a><span id="l27.19"> </span>
<a href="#l27.20"></a><span id="l27.20"> // These are pseudo-modules setup by setupModule:</span>
<a href="#l27.21"></a><span id="l27.21"> var testHelperModule;</span>
<a href="#l27.22"></a><span id="l27.22"> // (end pseudo-modules)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/base/prefs/content/AccountManager.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/base/prefs/content/AccountManager.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -20,18 +20,19 @@</span>
<a href="#l28.4"></a><span id="l28.4">  * - the card containing the relevant page is brought to the front</span>
<a href="#l28.5"></a><span id="l28.5">  * - each form element in the page is filled in with an appropriate value</span>
<a href="#l28.6"></a><span id="l28.6">  *   from the current account's hashtable</span>
<a href="#l28.7"></a><span id="l28.7">  * - in the IFRAME inside the page, if there is an onInit() method,</span>
<a href="#l28.8"></a><span id="l28.8">  *   it is called. The onInit method can further update this page based</span>
<a href="#l28.9"></a><span id="l28.9">  *   on values set in the previous step.</span>
<a href="#l28.10"></a><span id="l28.10">  */</span>
<a href="#l28.11"></a><span id="l28.11"> </span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/BrowserUtils.jsm&quot;);</span>
<a href="#l28.14"></a><span id="l28.14"> Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineminus">-Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l28.16"></a><span id="l28.16"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l28.17"></a><span id="l28.17"> Components.utils.import(&quot;resource:///modules/folderUtils.jsm&quot;);</span>
<a href="#l28.18"></a><span id="l28.18"> Components.utils.import(&quot;resource:///modules/hostnameUtils.jsm&quot;);</span>
<a href="#l28.19"></a><span id="l28.19"> </span>
<a href="#l28.20"></a><span id="l28.20"> // If Local directory has changed the app needs to restart. Once this is set</span>
<a href="#l28.21"></a><span id="l28.21"> // a restart will be attempted at each attempt to close the Account manager with OK.</span>
<a href="#l28.22"></a><span id="l28.22"> var gRestartNeeded = false;</span>
<a href="#l28.23"></a><span id="l28.23"> </span>
<a href="#l28.24"></a><span id="l28.24" class="difflineat">@@ -254,17 +255,17 @@ function onAccept(aDoChecks) {</span>
<a href="#l28.25"></a><span id="l28.25"> </span>
<a href="#l28.26"></a><span id="l28.26">   if (!onSave())</span>
<a href="#l28.27"></a><span id="l28.27">     return false;</span>
<a href="#l28.28"></a><span id="l28.28"> </span>
<a href="#l28.29"></a><span id="l28.29">   // hack hack - save the prefs file NOW in case we crash</span>
<a href="#l28.30"></a><span id="l28.30">   Services.prefs.savePrefFile(null);</span>
<a href="#l28.31"></a><span id="l28.31"> </span>
<a href="#l28.32"></a><span id="l28.32">   if (gRestartNeeded) {</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineminus">-    gRestartNeeded = !Application.restart();</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineplus">+    gRestartNeeded = !BrowserUtils.restartApplication();</span>
<a href="#l28.35"></a><span id="l28.35">     // returns false so that Account manager is not exited when restart failed</span>
<a href="#l28.36"></a><span id="l28.36">     return !gRestartNeeded;</span>
<a href="#l28.37"></a><span id="l28.37">   }</span>
<a href="#l28.38"></a><span id="l28.38"> </span>
<a href="#l28.39"></a><span id="l28.39">   return true;</span>
<a href="#l28.40"></a><span id="l28.40"> }</span>
<a href="#l28.41"></a><span id="l28.41"> </span>
<a href="#l28.42"></a><span id="l28.42"> /**</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

