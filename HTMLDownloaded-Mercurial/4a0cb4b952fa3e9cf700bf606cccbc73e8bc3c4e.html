<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27170:4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e" />
<meta property="og:url" content="/comm-central/rev/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e" />
<meta property="og:description" content="Bug 1552227 - OTR: improve UX of 'Add Finderprint' dialog. r=mkmelin,kaie" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">shortlog</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">files</a> |
changeset |
<a href="/comm-central/raw-rev/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">raw</a>  | <a href="/comm-central/archive/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1552227">Bug 1552227</a> - OTR: improve UX of 'Add Finderprint' dialog. r=mkmelin,kaie
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#65;&#108;&#101;&#115;&#115;&#97;&#110;&#100;&#114;&#111;&#32;&#67;&#97;&#115;&#116;&#101;&#108;&#108;&#97;&#110;&#105;&#32;&#60;&#97;&#108;&#101;&#115;&#115;&#97;&#110;&#100;&#114;&#111;&#64;&#116;&#104;&#117;&#110;&#100;&#101;&#114;&#98;&#105;&#114;&#100;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 04 Jul 2019 21:17:48 -0700</td></tr>

<tr>
 <td>changeset 27170</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e</a></td>
</tr>



<tr>
<td>parent 27169</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/92af3261f1feef2d8f0ac46705ca8a10c87e6cdd">92af3261f1feef2d8f0ac46705ca8a10c87e6cdd</a>
</td>
</tr>

<tr>
<td>child 27171</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9dc83f991206dd1d32695f6115a27132e718cb0f">9dc83f991206dd1d32695f6115a27132e718cb0f</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e">16199</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 22 Jul 2019 21:48:55 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@9dc83f991206 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9dc83f991206dd1d32695f6115a27132e718cb0f">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=9dc83f991206dd1d32695f6115a27132e718cb0f&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9dc83f991206dd1d32695f6115a27132e718cb0f&newProject=comm-central&newRevision=4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9dc83f991206dd1d32695f6115a27132e718cb0f&newProject=comm-central&newRevision=4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=9dc83f991206dd1d32695f6115a27132e718cb0f&newProject=comm-central&newRevision=4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a>, <a href="/comm-central/log?rev=reviewer%28kaie%29&revcount=50">kaie</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1552227">1552227</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1552227">Bug 1552227</a> - OTR: improve UX of 'Add Finderprint' dialog. r=mkmelin,kaie</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.js">chat/content/otr-add-fingerprint.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.js">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.js">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.js">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.js">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.xul">chat/content/otr-add-fingerprint.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.xul">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.xul">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.xul">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.xul">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr-add-fingerprint.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/add-finger.ftl">chat/content/otr/add-finger.ftl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/add-finger.ftl">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/add-finger.ftl">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/add-finger.ftl">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/add-finger.ftl">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/add-finger.ftl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/otrUI.ftl">chat/content/otr/otrUI.ftl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/otrUI.ftl">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/otrUI.ftl">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/otrUI.ftl">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/otrUI.ftl">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/content/otr/otrUI.ftl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/jar.mn">chat/themes/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/jar.mn">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/jar.mn">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/jar.mn">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/jar.mn">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/otrFingerprintDialog.css">chat/themes/otrFingerprintDialog.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/otrFingerprintDialog.css">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/otrFingerprintDialog.css">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/otrFingerprintDialog.css">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/otrFingerprintDialog.css">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/chat/themes/otrFingerprintDialog.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/jar.inc.mn">mail/themes/shared/jar.inc.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/jar.inc.mn">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/jar.inc.mn">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/jar.inc.mn">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/jar.inc.mn">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/jar.inc.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/mail/icons/login.svg">mail/themes/shared/mail/icons/login.svg</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/mail/icons/login.svg">file</a> |
<a href="/comm-central/annotate/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/mail/icons/login.svg">annotate</a> |
<a href="/comm-central/diff/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/mail/icons/login.svg">diff</a> |
<a href="/comm-central/comparison/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/mail/icons/login.svg">comparison</a> |
<a href="/comm-central/log/4a0cb4b952fa3e9cf700bf606cccbc73e8bc3c4e/mail/themes/shared/mail/icons/login.svg">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/content/otr-add-fingerprint.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/content/otr-add-fingerprint.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,47 +1,78 @@</span>
<a href="#l1.4"></a><span id="l1.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.5"></a><span id="l1.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.6"></a><span id="l1.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8" class="difflineminus">-const {</span>
<a href="#l1.9"></a><span id="l1.9" class="difflineminus">-  XPCOMUtils,</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineminus">-  l10nHelper,</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineminus">-} = ChromeUtils.import(&quot;resource:///modules/imXPCOMUtils.jsm&quot;);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-const {OTR} = ChromeUtils.import(&quot;resource:///modules/OTR.jsm&quot;);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-var args = window.arguments[0].wrappedJSObject;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+var {l10nHelper} = ChromeUtils.import(&quot;resource:///modules/imXPCOMUtils.jsm&quot;);</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+var {OTR} = ChromeUtils.import(&quot;resource:///modules/OTR.jsm&quot;);</span>
<a href="#l1.17"></a><span id="l1.17"> </span>
<a href="#l1.18"></a><span id="l1.18"> var otrAddFinger = {</span>
<a href="#l1.19"></a><span id="l1.19">   async onload() {</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-    let title = await document.l10n.formatValue(</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-      &quot;otr-add-finger-name-title&quot;, {name: args.screenname});</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-    document.title = title;</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineminus">-    document.addEventListener(&quot;dialogaccept&quot;, () =&gt; {</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineminus">-      return this.add();</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+    let args = window.arguments[0].wrappedJSObject;</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+    this.fingerWarning = document.getElementById(&quot;fingerWarning&quot;);</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+    this.fingerError = document.getElementById(&quot;fingerError&quot;);</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+    this.keyCount = document.getElementById(&quot;keyCount&quot;);</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+    let description = await document.l10n.formatValue(</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+      &quot;otr-add-finger-description&quot;, { name: args.screenname });</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+    document.getElementById(&quot;otrDescription&quot;).textContent = description;</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineplus">+</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+    let warningTooltip =</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+      await document.l10n.formatValue(&quot;otr-add-finger-tooltip-error&quot;);</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+    this.fingerWarning.setAttribute(&quot;tooltiptext&quot;, warningTooltip);</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+    document.addEventListener(&quot;dialogaccept&quot;, (event) =&gt; {</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineplus">+      let hex = document.getElementById(&quot;fingerprint&quot;).value;</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineplus">+      let context = OTR.getContextFromRecipient(</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+        args.account,</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+        args.protocol,</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineplus">+        args.screenname</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineplus">+      );</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineplus">+      let finger = OTR.addFingerprint(context, hex);</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineplus">+      if (finger.isNull()) {</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineplus">+        event.preventDefault();</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineplus">+        return;</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineplus">+      }</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineplus">+      try {</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+        // Ignore the return, this is just a test.</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+        OTR.getUIConvFromContext(context);</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineplus">+      } catch (error) {</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineplus">+        // We expect that a conversation may not have been started.</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineplus">+        context = null;</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+      }</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+      OTR.setTrust(finger, true, context);</span>
<a href="#l1.59"></a><span id="l1.59">     });</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-  },</span>
<a href="#l1.61"></a><span id="l1.61"> </span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-  oninput(e) {</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-    e.value = e.value.replace(/[^0-9a-fA-F]/gi, &quot;&quot;);</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineminus">-    document.documentElement.getButton(&quot;accept&quot;).disabled = (e.value.length != 40);</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineplus">+    window.sizeToContent();</span>
<a href="#l1.66"></a><span id="l1.66">   },</span>
<a href="#l1.67"></a><span id="l1.67"> </span>
<a href="#l1.68"></a><span id="l1.68" class="difflineminus">-  add(e) {</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-    let hex = document.getElementById(&quot;finger&quot;).value;</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineminus">-    let context = OTR.getContextFromRecipient(</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineminus">-      args.account,</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineminus">-      args.protocol,</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineminus">-      args.screenname</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-    );</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineminus">-    let finger = OTR.addFingerprint(context, hex);</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineminus">-    if (finger.isNull())</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineminus">-      return;</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineminus">-    try {</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineminus">-      // Ignore the return, this is just a test.</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineminus">-      OTR.getUIConvFromContext(context);</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineminus">-    } catch (error) {</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineminus">-      // We expect that a conversation may not have been started.</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineminus">-      context = null;</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+  addBlankSpace(value) {</span>
<a href="#l1.85"></a><span id="l1.85" class="difflineplus">+    return value.replace(/\s/g, &quot;&quot;).trim().replace(/(.{8})/g, &quot;$1 &quot;).trim();</span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+  },</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+</span>
<a href="#l1.88"></a><span id="l1.88" class="difflineplus">+  oninput(input) {</span>
<a href="#l1.89"></a><span id="l1.89" class="difflineplus">+    let hex = input.value.replace(/\s/g, &quot;&quot;);</span>
<a href="#l1.90"></a><span id="l1.90" class="difflineplus">+</span>
<a href="#l1.91"></a><span id="l1.91" class="difflineplus">+    if ((/[^0-9A-F]/gi).test(hex)) {</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineplus">+      this.keyCount.hidden = true;</span>
<a href="#l1.93"></a><span id="l1.93" class="difflineplus">+      this.fingerWarning.hidden = false;</span>
<a href="#l1.94"></a><span id="l1.94" class="difflineplus">+      this.fingerError.hidden = false;</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineplus">+    } else {</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineplus">+      this.keyCount.hidden = false;</span>
<a href="#l1.97"></a><span id="l1.97" class="difflineplus">+      this.fingerWarning.hidden = true;</span>
<a href="#l1.98"></a><span id="l1.98" class="difflineplus">+      this.fingerError.hidden = true;</span>
<a href="#l1.99"></a><span id="l1.99">     }</span>
<a href="#l1.100"></a><span id="l1.100" class="difflineminus">-    OTR.setTrust(finger, true, context);</span>
<a href="#l1.101"></a><span id="l1.101" class="difflineplus">+</span>
<a href="#l1.102"></a><span id="l1.102" class="difflineplus">+    document.documentElement.getButton(&quot;accept&quot;).disabled =</span>
<a href="#l1.103"></a><span id="l1.103" class="difflineplus">+      input.value &amp;&amp; !input.validity.valid;</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineplus">+</span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+    this.keyCount.value = `${hex.length}/40`;</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineplus">+    input.value = this.addBlankSpace(input.value);</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineplus">+</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineplus">+    window.sizeToContent();</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineplus">+  },</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineplus">+</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineplus">+  onblur(input) {</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineplus">+    input.value = this.addBlankSpace(input.value);</span>
<a href="#l1.113"></a><span id="l1.113">   },</span>
<a href="#l1.114"></a><span id="l1.114"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/chat/content/otr-add-fingerprint.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/chat/content/otr-add-fingerprint.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,32 +1,64 @@</span>
<a href="#l2.4"></a><span id="l2.4"> &lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<a href="#l2.5"></a><span id="l2.5"> &lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.6"></a><span id="l2.6">    - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.7"></a><span id="l2.7">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> &lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot; type=&quot;text/css&quot; ?&gt;</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://chat/skin/otrFingerprintDialog.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12"> &lt;!DOCTYPE dialog&gt;</span>
<a href="#l2.13"></a><span id="l2.13"> </span>
<a href="#l2.14"></a><span id="l2.14"> &lt;dialog id=&quot;otrAddFingerDialog&quot;</span>
<a href="#l2.15"></a><span id="l2.15">         data-l10n-id=&quot;otr-add-finger&quot;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-        data-l10n-attrs=&quot;buttonlabelcancel&quot;</span>
<a href="#l2.17"></a><span id="l2.17">         windowtype=&quot;OTR:AddFinger&quot;</span>
<a href="#l2.18"></a><span id="l2.18">         onload=&quot;otrAddFinger.onload()&quot;</span>
<a href="#l2.19"></a><span id="l2.19">         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l2.20"></a><span id="l2.20">         xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l2.21"></a><span id="l2.21">         buttons=&quot;accept,cancel&quot;</span>
<a href="#l2.22"></a><span id="l2.22">         buttondisabledaccept=&quot;true&quot;&gt;</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+  &lt;keyset id=&quot;mailKeys&quot;&gt;</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+    &lt;key keycode=&quot;VK_ESCAPE&quot; oncommand=&quot;window.close();&quot;/&gt;</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+  &lt;/keyset&gt;</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+</span>
<a href="#l2.28"></a><span id="l2.28">   &lt;linkset&gt;</span>
<a href="#l2.29"></a><span id="l2.29">     &lt;html:link rel=&quot;localization&quot; href=&quot;messenger/otr/add-finger.ftl&quot;/&gt;</span>
<a href="#l2.30"></a><span id="l2.30">   &lt;/linkset&gt;</span>
<a href="#l2.31"></a><span id="l2.31"> </span>
<a href="#l2.32"></a><span id="l2.32">   &lt;script src=&quot;chrome://chat/content/otr-add-fingerprint.js&quot;/&gt;</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-  &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-    &lt;label data-l10n-id=&quot;otr-add-finger-tooltip&quot; control=&quot;name&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-    &lt;hbox id=&quot;fingerBox&quot; align=&quot;baseline&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-      &lt;label data-l10n-id=&quot;otr-add-finger-fingerprint&quot; control=&quot;name&quot;/&gt;</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-      &lt;textbox id=&quot;finger&quot; oninput=&quot;otrAddFinger.oninput(this)&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+  &lt;script src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+  &lt;script src=&quot;chrome://global/content/editMenuOverlay.js&quot;/&gt;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+  &lt;vbox class=&quot;dialog-container&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+    &lt;hbox align=&quot;center&quot; pack=&quot;center&quot; class=&quot;header-container&quot;&gt;</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+      &lt;vbox&gt;</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+        &lt;image class=&quot;header-icon icon-login&quot;/&gt;</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+      &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+        &lt;description id=&quot;otrDescription&quot;/&gt;</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+      &lt;/vbox&gt;</span>
<a href="#l2.48"></a><span id="l2.48">     &lt;/hbox&gt;</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+    &lt;hbox class=&quot;form-control&quot; align=&quot;center&quot;&gt;</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+      &lt;label data-l10n-id=&quot;otr-add-finger-fingerprint&quot;</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+             class=&quot;label-box&quot;</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+             control=&quot;fingerprint&quot;/&gt;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+      &lt;hbox class=&quot;input-control&quot; align=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+        &lt;html:input id=&quot;fingerprint&quot; type=&quot;text&quot;</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+                    data-l10n-id=&quot;otr-add-finger-input&quot;</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+                    class=&quot;input-field&quot;</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+                    oninput=&quot;otrAddFinger.oninput(this);&quot;</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+                    onblur=&quot;otrAddFinger.onblur(this);&quot;</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+                    pattern=&quot;[ 0-9a-fA-F]*&quot;</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+                    minlength=&quot;44&quot;</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineplus">+                    maxlength=&quot;44&quot;/&gt;</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineplus">+      &lt;image id=&quot;fingerWarning&quot; class=&quot;form-icon icon-warning&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineplus">+    &lt;/hbox&gt;</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+    &lt;vbox class=&quot;input-helper-container&quot; flex=&quot;1&quot; align=&quot;end&quot;&gt;</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+      &lt;label id=&quot;fingerError&quot;</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+             data-l10n-id=&quot;otr-add-finger-tooltip-error&quot;</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+             class=&quot;msg-error&quot;</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+             hidden=&quot;true&quot;/&gt;</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+      &lt;label id=&quot;keyCount&quot; class=&quot;input-helper&quot; value=&quot;0/40&quot;/&gt;</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineplus">+    &lt;/vbox&gt;</span>
<a href="#l2.72"></a><span id="l2.72">   &lt;/vbox&gt;</span>
<a href="#l2.73"></a><span id="l2.73"> &lt;/dialog&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/chat/content/otr/add-finger.ftl</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/chat/content/otr/add-finger.ftl</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.5"></a><span id="l3.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l3.6"></a><span id="l3.6"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> otr-add-finger =</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineminus">-    .title = Add Fingerprint</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineminus">-    .buttonlabelcancel = Skip</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+    .title = Add OTR Key Fingerprint</span>
<a href="#l3.12"></a><span id="l3.12"> </span>
<a href="#l3.13"></a><span id="l3.13"> # Variables:</span>
<a href="#l3.14"></a><span id="l3.14"> #   $name (String) - name of a chat contact person</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-otr-add-finger-name-title = Enter the fingerprint of the OTR key used by { $name }</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+# Do not translate 'OTR' (name of an encryption protocol)</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+otr-add-finger-description = Enter the OTR key fingerprint for { $name }.</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-otr-add-finger-fingerprint = Fingerprint</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+otr-add-finger-fingerprint = Fingerprint:</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+otr-add-finger-tooltip-error = Invalid character entered. Only letters ABCDEF and numbers are allowed</span>
<a href="#l3.22"></a><span id="l3.22"> </span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-# Do not translate 'OTR' (name of an encryption protocol)</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-otr-add-finger-tooltip = If you know the 40 character long HEX fingerprint of your contact's OTR private key, enter it now.</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+otr-add-finger-input =</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+    .placeholder = The 40 character long OTR key fingerprint</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/chat/content/otr/otrUI.ftl</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/chat/content/otr/otrUI.ftl</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -15,17 +15,17 @@ auth-success = Verifying your contact's </span>
<a href="#l4.4"></a><span id="l4.4"> auth-successThem = Your contact has successfully verified your identity. You may want to verify their identity as well by asking your own question.</span>
<a href="#l4.5"></a><span id="l4.5"> auth-fail = Failed to verify your contact's identity.</span>
<a href="#l4.6"></a><span id="l4.6"> auth-waiting = Waiting for contact to complete verification …</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> finger-verify = Verify</span>
<a href="#l4.9"></a><span id="l4.9"> finger-verify-accessKey = V</span>
<a href="#l4.10"></a><span id="l4.10"> </span>
<a href="#l4.11"></a><span id="l4.11"> # Do not translate 'OTR' (name of an encryption protocol)</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-buddycontextmenu-label = Add Contact's OTR Fingerprint</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+buddycontextmenu-label = Add OTR Fingerprint</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15"> # Variables:</span>
<a href="#l4.16"></a><span id="l4.16"> #   $name (String) - the screen name of a chat contact person</span>
<a href="#l4.17"></a><span id="l4.17"> alert-start = Attempting to start an encrypted conversation with { $name }.</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19"> # Variables:</span>
<a href="#l4.20"></a><span id="l4.20"> #   $name (String) - the screen name of a chat contact person</span>
<a href="#l4.21"></a><span id="l4.21"> alert-refresh = Attempting to refresh the encrypted conversation with { $name }.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/chat/themes/jar.mn</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/chat/themes/jar.mn</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -16,16 +16,17 @@ chat.jar:</span>
<a href="#l5.4"></a><span id="l5.4"> 	skin/classic/chat/unknown-16.png</span>
<a href="#l5.5"></a><span id="l5.5"> 	skin/classic/chat/chat-16.png</span>
<a href="#l5.6"></a><span id="l5.6"> 	skin/classic/chat/chat-left-16.png</span>
<a href="#l5.7"></a><span id="l5.7"> 	skin/classic/chat/conv.css</span>
<a href="#l5.8"></a><span id="l5.8"> 	skin/classic/chat/browserRequest.css</span>
<a href="#l5.9"></a><span id="l5.9"> 	skin/classic/chat/imtooltip.css</span>
<a href="#l5.10"></a><span id="l5.10"> 	skin/classic/chat/status.css</span>
<a href="#l5.11"></a><span id="l5.11"> 	skin/classic/chat/otr.css</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+	skin/classic/chat/otrFingerprintDialog.css</span>
<a href="#l5.13"></a><span id="l5.13"> 	skin/classic/chat/prpl-generic/icon32.png	(icons/prpl-generic-32.png)</span>
<a href="#l5.14"></a><span id="l5.14"> 	skin/classic/chat/prpl-generic/icon48.png	(icons/prpl-generic-48.png)</span>
<a href="#l5.15"></a><span id="l5.15"> 	skin/classic/chat/prpl-generic/icon.png		(icons/prpl-generic.png)</span>
<a href="#l5.16"></a><span id="l5.16"> 	skin/classic/chat/prpl-unknown/icon32.png	(icons/prpl-unknown-32.png)</span>
<a href="#l5.17"></a><span id="l5.17"> 	skin/classic/chat/prpl-unknown/icon48.png	(icons/prpl-unknown-48.png)</span>
<a href="#l5.18"></a><span id="l5.18"> 	skin/classic/chat/prpl-unknown/icon.png		(icons/prpl-unknown.png)</span>
<a href="#l5.19"></a><span id="l5.19"> 	skin/classic/chat/otr-connection-encrypted.svg (icons/otr-connection-encrypted.svg)</span>
<a href="#l5.20"></a><span id="l5.20"> 	skin/classic/chat/otr-connection-finished.svg  (icons/otr-connection-finished.svg)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/chat/themes/otrFingerprintDialog.css</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,96 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+ * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+:root {</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+  --text-color: #36385A;</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+  --primary-color: #0a84ff;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+  --warning-color: #FF9400;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+  --error-color: #5A0002;</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+}</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+.dialog-container {</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+  width: 36em;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+}</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+.dialog-button-box {</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+  margin-top: 5px;</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+}</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+.header-container {</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+  margin: 0px 10px 5px;</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+}</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+.label-title {</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+  font-weight: bold;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+  margin-bottom: 5px;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+  color: var(--text-color);</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+}</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+.msg-error {</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+  color: var(--error-color);</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+}</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+/* Form and input fields */</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+.form-control {</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+  position: relative;</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+  margin: 0px 0px 10px;</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+}</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+.input-control {</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+  display: flex;</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+  align-items: stretch;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+}</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+.input-field {</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+  padding: 5px 30px 5px 6px;</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+  flex-grow: 1;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+  margin: 2px 4px;</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+}</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+.input-field:invalid {</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+  box-shadow: 0 0 2px 1px var(--warning-color);</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+}</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+.input-helper-container {</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+  margin-top: -6px;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+}</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+.input-helper {</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+  font-family: monospace;</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+  font-size: 1em;</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+  opacity: 0.7;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+}</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+/* Icons */</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+.header-icon {</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+  -moz-context-properties: fill, stroke-opacity;</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+  fill: currentColor;</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+  color: var(--primary-color);</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+  width: 3.5em;</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+  margin: 10px;</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineplus">+}</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineplus">+</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+.form-icon {</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+  cursor: pointer;</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineplus">+  -moz-context-properties: fill, stroke-opacity;</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+  fill: currentColor;</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+  margin-left: -26px;</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineplus">+  margin-right: 10px;</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+  color: var(--text-color);</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+}</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineplus">+</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+.icon-info {</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/info.svg&quot;);</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineplus">+}</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+.icon-warning {</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+  list-style-image: url(&quot;chrome://global/skin/icons/warning.svg&quot;);</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineplus">+  color: var(--warning-color);</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+}</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineplus">+</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+.icon-login {</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/login.svg&quot;);</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/themes/shared/jar.inc.mn</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/themes/shared/jar.inc.mn</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -51,16 +51,17 @@</span>
<a href="#l7.4"></a><span id="l7.4">   skin/classic/messenger/icons/forward.svg                    (../shared/mail/icons/forward.svg)</span>
<a href="#l7.5"></a><span id="l7.5">   skin/classic/messenger/icons/getmsg.svg                     (../shared/mail/icons/getmsg.svg)</span>
<a href="#l7.6"></a><span id="l7.6">   skin/classic/messenger/icons/goback.svg                     (../shared/mail/icons/goback.svg)</span>
<a href="#l7.7"></a><span id="l7.7">   skin/classic/messenger/icons/goforward.svg                  (../shared/mail/icons/goforward.svg)</span>
<a href="#l7.8"></a><span id="l7.8">   skin/classic/messenger/icons/info.svg                       (../shared/mail/icons/info.svg)</span>
<a href="#l7.9"></a><span id="l7.9">   skin/classic/messenger/icons/join.svg                       (../shared/mail/icons/join.svg)</span>
<a href="#l7.10"></a><span id="l7.10">   skin/classic/messenger/icons/junk.svg                       (../shared/mail/icons/junk.svg)</span>
<a href="#l7.11"></a><span id="l7.11">   skin/classic/messenger/icons/junk-col.svg                   (../shared/mail/icons/junk-col.svg)</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+  skin/classic/messenger/icons/login.svg                      (../shared/mail/icons/login.svg)</span>
<a href="#l7.13"></a><span id="l7.13">   skin/classic/messenger/icons/mark.svg                       (../shared/mail/icons/mark.svg)</span>
<a href="#l7.14"></a><span id="l7.14">   skin/classic/messenger/icons/message.svg                    (../shared/mail/icons/message.svg)</span>
<a href="#l7.15"></a><span id="l7.15">   skin/classic/messenger/icons/move-bottom.svg                (../shared/mail/icons/move-bottom.svg)</span>
<a href="#l7.16"></a><span id="l7.16">   skin/classic/messenger/icons/move-down.svg                  (../shared/mail/icons/move-down.svg)</span>
<a href="#l7.17"></a><span id="l7.17">   skin/classic/messenger/icons/move-together.svg              (../shared/mail/icons/move-together.svg)</span>
<a href="#l7.18"></a><span id="l7.18">   skin/classic/messenger/icons/move-top.svg                   (../shared/mail/icons/move-top.svg)</span>
<a href="#l7.19"></a><span id="l7.19">   skin/classic/messenger/icons/move-up.svg                    (../shared/mail/icons/move-up.svg)</span>
<a href="#l7.20"></a><span id="l7.20">   skin/classic/messenger/icons/navigation.svg                 (../shared/mail/icons/navigation.svg)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/mail/themes/shared/mail/icons/login.svg</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,4 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+&lt;!-- This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+   - License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineplus">+&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;16&quot; height=&quot;16&quot; viewBox=&quot;0 0 16 16&quot;&gt;&lt;path fill=&quot;context-fill&quot; d=&quot;M10.992 1a4.009 4.009 0 0 0-4.009 4.008c0 .1.022.187.028.282-.059.05-.119.087-.178.143L5.667 6.6a.366.366 0 0 0 0 .467A1.878 1.878 0 0 0 6 7.5.353.353 0 0 1 6 8l-5 5v1.767a.229.229 0 0 0 .233.233H3.77a.229.229 0 0 0 .23-.233v-.778h.75a.227.227 0 0 0 .233-.228v-.768H5.2s.28 0 .28-.235V12.5h.779s.233-.1.233-.244v-1.271h.855l1.12-1.118H8.7l.467.467c.233.233.233.233.365.233a.437.437 0 0 0 .275-.127l.993-1.273c.034-.053.054-.107.084-.161.036 0 .07.011.107.011a4.008 4.008 0 1 0 0-8.017zM12.5 4.489a1 1 0 1 1 1-1 1 1 0 0 1-1 1z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:32Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

