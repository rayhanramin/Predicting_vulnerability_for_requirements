<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23320:961aa136630db53e2f0371e445b5f05e554a573a</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 961aa136630db53e2f0371e445b5f05e554a573a" />
<meta property="og:url" content="/comm-central/rev/961aa136630db53e2f0371e445b5f05e554a573a" />
<meta property="og:description" content="Bug 1399756 - remove trailing spaces in ldap. rs=white-space-only" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 961aa136630db53e2f0371e445b5f05e554a573a 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/961aa136630db53e2f0371e445b5f05e554a573a">shortlog</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/961aa136630db53e2f0371e445b5f05e554a573a">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a">files</a> |
changeset |
<a href="/comm-central/raw-rev/961aa136630db53e2f0371e445b5f05e554a573a">raw</a>  | <a href="/comm-central/archive/961aa136630db53e2f0371e445b5f05e554a573a.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1399756">Bug 1399756</a> - remove trailing spaces in ldap. rs=white-space-only
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 15 Feb 2018 21:36:55 +0100</td></tr>

<tr>
 <td>changeset 23320</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/961aa136630db53e2f0371e445b5f05e554a573a">961aa136630db53e2f0371e445b5f05e554a573a</a></td>
</tr>



<tr>
<td>parent 23319</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/34495eaff49c8244379992b4c2b0ef7959ed3cd6">34495eaff49c8244379992b4c2b0ef7959ed3cd6</a>
</td>
</tr>

<tr>
<td>child 23321</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d0777339c5c9bca2665e288b484e6c504e134e24">d0777339c5c9bca2665e288b484e6c504e134e24</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=961aa136630db53e2f0371e445b5f05e554a573a">14092</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 15 Feb 2018 20:37:48 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@961aa136630d [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=961aa136630db53e2f0371e445b5f05e554a573a">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=961aa136630db53e2f0371e445b5f05e554a573a&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=961aa136630db53e2f0371e445b5f05e554a573a&newProject=comm-central&newRevision=961aa136630db53e2f0371e445b5f05e554a573a&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=961aa136630db53e2f0371e445b5f05e554a573a&newProject=comm-central&newRevision=961aa136630db53e2f0371e445b5f05e554a573a&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=961aa136630db53e2f0371e445b5f05e554a573a&newProject=comm-central&newRevision=961aa136630db53e2f0371e445b5f05e554a573a&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28white-space-only%29&revcount=50">white-space-only</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1399756">1399756</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1399756">Bug 1399756</a> - remove trailing spaces in ldap. rs=white-space-only
[skip-blame]</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/disptmpl.h">ldap/c-sdk/include/disptmpl.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/disptmpl.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/disptmpl.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/disptmpl.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/disptmpl.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/disptmpl.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/iutil.h">ldap/c-sdk/include/iutil.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/iutil.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/iutil.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/iutil.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/iutil.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/iutil.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lber.h">ldap/c-sdk/include/lber.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lber.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lber.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lber.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lber.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lber.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lcache.h">ldap/c-sdk/include/lcache.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lcache.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lcache.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lcache.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lcache.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/lcache.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-deprecated.h">ldap/c-sdk/include/ldap-deprecated.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-deprecated.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-deprecated.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-deprecated.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-deprecated.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-deprecated.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-extension.h">ldap/c-sdk/include/ldap-extension.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-extension.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-extension.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-extension.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-extension.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-extension.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-platform.h">ldap/c-sdk/include/ldap-platform.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-platform.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-platform.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-platform.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-platform.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-platform.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-standard.h">ldap/c-sdk/include/ldap-standard.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-standard.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-standard.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-standard.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-standard.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-standard.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-to-be-deprecated.h">ldap/c-sdk/include/ldap-to-be-deprecated.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-to-be-deprecated.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-to-be-deprecated.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-to-be-deprecated.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-to-be-deprecated.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap-to-be-deprecated.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap.h">ldap/c-sdk/include/ldap.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap_ssl.h">ldap/c-sdk/include/ldap_ssl.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap_ssl.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap_ssl.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap_ssl.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap_ssl.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldap_ssl.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaplog.h">ldap/c-sdk/include/ldaplog.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaplog.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaplog.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaplog.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaplog.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaplog.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldappr.h">ldap/c-sdk/include/ldappr.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldappr.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldappr.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldappr.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldappr.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldappr.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaprot.h">ldap/c-sdk/include/ldaprot.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaprot.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaprot.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaprot.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaprot.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldaprot.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldif.h">ldap/c-sdk/include/ldif.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldif.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldif.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldif.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldif.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/ldif.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/portable.h">ldap/c-sdk/include/portable.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/portable.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/portable.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/portable.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/portable.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/portable.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/proto-ntutil.h">ldap/c-sdk/include/proto-ntutil.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/proto-ntutil.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/proto-ntutil.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/proto-ntutil.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/proto-ntutil.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/proto-ntutil.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/regex.h">ldap/c-sdk/include/regex.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/regex.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/regex.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/regex.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/regex.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/regex.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/srchpref.h">ldap/c-sdk/include/srchpref.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/srchpref.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/srchpref.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/srchpref.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/srchpref.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/include/srchpref.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/liblber/lber-int.h">ldap/c-sdk/libraries/liblber/lber-int.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/liblber/lber-int.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/liblber/lber-int.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/liblber/lber-int.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/liblber/lber-int.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/liblber/lber-int.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libldap/ldap-int.h">ldap/c-sdk/libraries/libldap/ldap-int.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libldap/ldap-int.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libldap/ldap-int.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libldap/ldap-int.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libldap/ldap-int.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libldap/ldap-int.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libprldap/ldappr-int.h">ldap/c-sdk/libraries/libprldap/ldappr-int.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libprldap/ldappr-int.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libprldap/ldappr-int.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libprldap/ldappr-int.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libprldap/ldappr-int.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/c-sdk/libraries/libprldap/ldappr-int.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.cpp">ldap/xpcom/src/nsLDAPBERElement.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.h">ldap/xpcom/src/nsLDAPBERElement.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERElement.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.cpp">ldap/xpcom/src/nsLDAPBERValue.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.h">ldap/xpcom/src/nsLDAPBERValue.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPBERValue.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.cpp">ldap/xpcom/src/nsLDAPControl.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.h">ldap/xpcom/src/nsLDAPControl.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPControl.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPMessage.cpp">ldap/xpcom/src/nsLDAPMessage.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPMessage.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPMessage.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPMessage.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPMessage.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPMessage.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPModification.cpp">ldap/xpcom/src/nsLDAPModification.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPModification.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPModification.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPModification.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPModification.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPModification.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPOperation.h">ldap/xpcom/src/nsLDAPOperation.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPOperation.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPOperation.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPOperation.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPOperation.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPOperation.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPProtocolModule.cpp">ldap/xpcom/src/nsLDAPProtocolModule.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPProtocolModule.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPProtocolModule.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPProtocolModule.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPProtocolModule.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPProtocolModule.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">ldap/xpcom/src/nsLDAPSecurityGlue.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.cpp">ldap/xpcom/src/nsLDAPServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.cpp">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.cpp">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.cpp">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.cpp">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.h">ldap/xpcom/src/nsLDAPServer.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPServer.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPService.h">ldap/xpcom/src/nsLDAPService.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPService.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPService.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPService.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPService.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPService.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSyncQuery.h">ldap/xpcom/src/nsLDAPSyncQuery.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSyncQuery.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSyncQuery.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSyncQuery.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSyncQuery.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPSyncQuery.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPURL.h">ldap/xpcom/src/nsLDAPURL.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPURL.h">file</a> |
<a href="/comm-central/annotate/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPURL.h">annotate</a> |
<a href="/comm-central/diff/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPURL.h">diff</a> |
<a href="/comm-central/comparison/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPURL.h">comparison</a> |
<a href="/comm-central/log/961aa136630db53e2f0371e445b5f05e554a573a/ldap/xpcom/src/nsLDAPURL.h">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/ldap/c-sdk/include/disptmpl.h</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/ldap/c-sdk/include/disptmpl.h</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l1.4"></a><span id="l1.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l1.5"></a><span id="l1.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l1.6"></a><span id="l1.6" class="difflineminus">- * </span>
<a href="#l1.7"></a><span id="l1.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l1.8"></a><span id="l1.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l1.9"></a><span id="l1.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l1.10"></a><span id="l1.10" class="difflineplus">+ *</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l1.14"></a><span id="l1.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">- * </span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+ *</span>
<a href="#l1.17"></a><span id="l1.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l1.18"></a><span id="l1.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l1.19"></a><span id="l1.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l1.20"></a><span id="l1.20">  * License.</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">- * </span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+ *</span>
<a href="#l1.23"></a><span id="l1.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l1.24"></a><span id="l1.24">  * March 31, 1998.</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">- * </span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+ *</span>
<a href="#l1.27"></a><span id="l1.27">  * The Initial Developer of the Original Code is</span>
<a href="#l1.28"></a><span id="l1.28">  * Netscape Communications Corporation.</span>
<a href="#l1.29"></a><span id="l1.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l1.30"></a><span id="l1.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">- * </span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+ *</span>
<a href="#l1.33"></a><span id="l1.33">  * Contributor(s):</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineminus">- * </span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+ *</span>
<a href="#l1.36"></a><span id="l1.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l1.37"></a><span id="l1.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l1.38"></a><span id="l1.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l1.39"></a><span id="l1.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l1.40"></a><span id="l1.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l1.41"></a><span id="l1.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l1.42"></a><span id="l1.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l1.43"></a><span id="l1.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l1.44"></a><span id="l1.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l1.45"></a><span id="l1.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l1.46"></a><span id="l1.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">- * </span>
<a href="#l1.48"></a><span id="l1.48" class="difflineplus">+ *</span>
<a href="#l1.49"></a><span id="l1.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l1.50"></a><span id="l1.50"> </span>
<a href="#l1.51"></a><span id="l1.51"> /*</span>
<a href="#l1.52"></a><span id="l1.52">  * Copyright (c) 1993, 1994 Regents of the University of Michigan.</span>
<a href="#l1.53"></a><span id="l1.53">  * All rights reserved.</span>
<a href="#l1.54"></a><span id="l1.54">  *</span>
<a href="#l1.55"></a><span id="l1.55">  * Redistribution and use in source and binary forms are permitted</span>
<a href="#l1.56"></a><span id="l1.56">  * provided that this notice is preserved and that due credit is given</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineat">@@ -55,17 +55,17 @@</span>
<a href="#l1.58"></a><span id="l1.58"> #ifdef __cplusplus</span>
<a href="#l1.59"></a><span id="l1.59"> extern &quot;C&quot; {</span>
<a href="#l1.60"></a><span id="l1.60"> #endif</span>
<a href="#l1.61"></a><span id="l1.61"> </span>
<a href="#l1.62"></a><span id="l1.62"> /* calling conventions used by library */</span>
<a href="#l1.63"></a><span id="l1.63"> #ifndef LDAP_CALL</span>
<a href="#l1.64"></a><span id="l1.64"> #if defined( _WINDOWS ) || defined( _WIN32 )</span>
<a href="#l1.65"></a><span id="l1.65"> #define LDAP_C __cdecl</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-#ifndef _WIN32 </span>
<a href="#l1.67"></a><span id="l1.67" class="difflineplus">+#ifndef _WIN32</span>
<a href="#l1.68"></a><span id="l1.68"> #define __stdcall _far _pascal</span>
<a href="#l1.69"></a><span id="l1.69"> #define LDAP_CALLBACK _loadds</span>
<a href="#l1.70"></a><span id="l1.70"> #else</span>
<a href="#l1.71"></a><span id="l1.71"> #define LDAP_CALLBACK</span>
<a href="#l1.72"></a><span id="l1.72"> #endif /* _WIN32 */</span>
<a href="#l1.73"></a><span id="l1.73"> #define LDAP_PASCAL __stdcall</span>
<a href="#l1.74"></a><span id="l1.74"> #define LDAP_CALL LDAP_PASCAL</span>
<a href="#l1.75"></a><span id="l1.75"> #else /* _WINDOWS */</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineat">@@ -89,17 +89,17 @@ extern &quot;C&quot; {</span>
<a href="#l1.77"></a><span id="l1.77"> </span>
<a href="#l1.78"></a><span id="l1.78"> </span>
<a href="#l1.79"></a><span id="l1.79"> /*</span>
<a href="#l1.80"></a><span id="l1.80">  * syntax options (confined to second most significant byte)</span>
<a href="#l1.81"></a><span id="l1.81">  */</span>
<a href="#l1.82"></a><span id="l1.82"> #define LDAP_SYN_OPT_DEFER		0x00010000L</span>
<a href="#l1.83"></a><span id="l1.83"> </span>
<a href="#l1.84"></a><span id="l1.84"> </span>
<a href="#l1.85"></a><span id="l1.85" class="difflineminus">-/* </span>
<a href="#l1.86"></a><span id="l1.86" class="difflineplus">+/*</span>
<a href="#l1.87"></a><span id="l1.87">  * display template item syntax ids (defined by common agreement)</span>
<a href="#l1.88"></a><span id="l1.88">  * these are the valid values for the ti_syntaxid of the tmplitem</span>
<a href="#l1.89"></a><span id="l1.89">  * struct (defined below).  A general type is encoded in the</span>
<a href="#l1.90"></a><span id="l1.90">  * most-significant 8 bits, and some options are encoded in the next</span>
<a href="#l1.91"></a><span id="l1.91">  * 8 bits.  The lower 16 bits are reserved for the distinct types.</span>
<a href="#l1.92"></a><span id="l1.92">  */</span>
<a href="#l1.93"></a><span id="l1.93"> #define LDAP_SYN_CASEIGNORESTR	( 1 | LDAP_SYN_TYPE_TEXT )</span>
<a href="#l1.94"></a><span id="l1.94"> #define LDAP_SYN_MULTILINESTR	( 2 | LDAP_SYN_TYPE_TEXT )</span>
<a href="#l1.95"></a><span id="l1.95" class="difflineat">@@ -133,17 +133,17 @@ extern &quot;C&quot; {</span>
<a href="#l1.96"></a><span id="l1.96"> /*</span>
<a href="#l1.97"></a><span id="l1.97">  * use calculated label width (based on length of longest label in</span>
<a href="#l1.98"></a><span id="l1.98">  * template) instead of contant width</span>
<a href="#l1.99"></a><span id="l1.99">  */</span>
<a href="#l1.100"></a><span id="l1.100"> #define LDAP_DISP_OPT_AUTOLABELWIDTH	0x00000001L</span>
<a href="#l1.101"></a><span id="l1.101"> #define LDAP_DISP_OPT_HTMLBODYONLY	0x00000002L</span>
<a href="#l1.102"></a><span id="l1.102"> </span>
<a href="#l1.103"></a><span id="l1.103"> /*</span>
<a href="#l1.104"></a><span id="l1.104" class="difflineminus">- * perform search actions (applies to ldap_entry2text_search only) </span>
<a href="#l1.105"></a><span id="l1.105" class="difflineplus">+ * perform search actions (applies to ldap_entry2text_search only)</span>
<a href="#l1.106"></a><span id="l1.106">  */</span>
<a href="#l1.107"></a><span id="l1.107"> #define LDAP_DISP_OPT_DOSEARCHACTIONS	0x00000002L</span>
<a href="#l1.108"></a><span id="l1.108"> </span>
<a href="#l1.109"></a><span id="l1.109"> /*</span>
<a href="#l1.110"></a><span id="l1.110">  * include additional info. relevant to &quot;non leaf&quot; entries only</span>
<a href="#l1.111"></a><span id="l1.111">  * used by ldap_entry2html and ldap_entry2html_search to include &quot;Browse&quot;</span>
<a href="#l1.112"></a><span id="l1.112">  * and &quot;Move Up&quot; HREFs</span>
<a href="#l1.113"></a><span id="l1.113">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/ldap/c-sdk/include/iutil.h</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/ldap/c-sdk/include/iutil.h</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l2.4"></a><span id="l2.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l2.5"></a><span id="l2.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineminus">- * </span>
<a href="#l2.7"></a><span id="l2.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l2.8"></a><span id="l2.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l2.9"></a><span id="l2.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l2.10"></a><span id="l2.10" class="difflineplus">+ *</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l2.14"></a><span id="l2.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">- * </span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+ *</span>
<a href="#l2.17"></a><span id="l2.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l2.18"></a><span id="l2.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l2.19"></a><span id="l2.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l2.20"></a><span id="l2.20">  * License.</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">- * </span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+ *</span>
<a href="#l2.23"></a><span id="l2.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l2.24"></a><span id="l2.24">  * March 31, 1998.</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineminus">- * </span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+ *</span>
<a href="#l2.27"></a><span id="l2.27">  * The Initial Developer of the Original Code is</span>
<a href="#l2.28"></a><span id="l2.28">  * Netscape Communications Corporation.</span>
<a href="#l2.29"></a><span id="l2.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l2.30"></a><span id="l2.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">- * </span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+ *</span>
<a href="#l2.33"></a><span id="l2.33">  * Contributor(s):</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">- * </span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+ *</span>
<a href="#l2.36"></a><span id="l2.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l2.37"></a><span id="l2.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l2.38"></a><span id="l2.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l2.39"></a><span id="l2.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l2.40"></a><span id="l2.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l2.41"></a><span id="l2.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l2.42"></a><span id="l2.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l2.43"></a><span id="l2.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l2.44"></a><span id="l2.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l2.45"></a><span id="l2.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l2.46"></a><span id="l2.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">- * </span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+ *</span>
<a href="#l2.49"></a><span id="l2.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l2.50"></a><span id="l2.50"> </span>
<a href="#l2.51"></a><span id="l2.51"> /*</span>
<a href="#l2.52"></a><span id="l2.52">  * Interface for libiutil the innosoft migration library</span>
<a href="#l2.53"></a><span id="l2.53">  *</span>
<a href="#l2.54"></a><span id="l2.54">  */</span>
<a href="#l2.55"></a><span id="l2.55"> </span>
<a href="#l2.56"></a><span id="l2.56"> #ifndef _IUTIL_H</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/ldap/c-sdk/include/lber.h</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/ldap/c-sdk/include/lber.h</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l3.4"></a><span id="l3.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l3.5"></a><span id="l3.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineminus">- * </span>
<a href="#l3.7"></a><span id="l3.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l3.8"></a><span id="l3.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l3.9"></a><span id="l3.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+ *</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l3.14"></a><span id="l3.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">- * </span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+ *</span>
<a href="#l3.17"></a><span id="l3.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l3.18"></a><span id="l3.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l3.19"></a><span id="l3.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l3.20"></a><span id="l3.20">  * License.</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">- * </span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+ *</span>
<a href="#l3.23"></a><span id="l3.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l3.24"></a><span id="l3.24">  * March 31, 1998.</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">- * </span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+ *</span>
<a href="#l3.27"></a><span id="l3.27">  * The Initial Developer of the Original Code is</span>
<a href="#l3.28"></a><span id="l3.28">  * Netscape Communications Corporation.</span>
<a href="#l3.29"></a><span id="l3.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l3.30"></a><span id="l3.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">- * </span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+ *</span>
<a href="#l3.33"></a><span id="l3.33">  * Contributor(s):</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">- * </span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+ *</span>
<a href="#l3.36"></a><span id="l3.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l3.37"></a><span id="l3.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l3.38"></a><span id="l3.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l3.39"></a><span id="l3.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l3.40"></a><span id="l3.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l3.41"></a><span id="l3.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l3.42"></a><span id="l3.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l3.43"></a><span id="l3.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l3.44"></a><span id="l3.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l3.45"></a><span id="l3.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l3.46"></a><span id="l3.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">- * </span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+ *</span>
<a href="#l3.49"></a><span id="l3.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l3.50"></a><span id="l3.50"> /* lber.h - header file for ber_* functions */</span>
<a href="#l3.51"></a><span id="l3.51"> #ifndef _LBER_H</span>
<a href="#l3.52"></a><span id="l3.52"> #define _LBER_H</span>
<a href="#l3.53"></a><span id="l3.53"> </span>
<a href="#l3.54"></a><span id="l3.54"> #ifdef __cplusplus</span>
<a href="#l3.55"></a><span id="l3.55"> extern &quot;C&quot; {</span>
<a href="#l3.56"></a><span id="l3.56"> #endif</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineat">@@ -88,17 +88,17 @@ extern &quot;C&quot; {</span>
<a href="#l3.58"></a><span id="l3.58"> #define LBER_OPT_BYTES_TO_WRITE		0x10</span>
<a href="#l3.59"></a><span id="l3.59"> #define LBER_OPT_MEMALLOC_FN_PTRS	0x20</span>
<a href="#l3.60"></a><span id="l3.60"> #define LBER_OPT_DEBUG_LEVEL		0x40</span>
<a href="#l3.61"></a><span id="l3.61"> #define LBER_OPT_BUFSIZE			0x80</span>
<a href="#l3.62"></a><span id="l3.62"> </span>
<a href="#l3.63"></a><span id="l3.63"> /*</span>
<a href="#l3.64"></a><span id="l3.64">  * LBER_USE_DER is defined for compatibility with the C LDAP API RFC.</span>
<a href="#l3.65"></a><span id="l3.65">  * In our implementation, we recognize it (instead of the numerically</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">- * identical LBER_OPT_REMAINING_BYTES) in calls to ber_alloc_t() and </span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+ * identical LBER_OPT_REMAINING_BYTES) in calls to ber_alloc_t() and</span>
<a href="#l3.68"></a><span id="l3.68">  * ber_init_w_nullchar() only.  Callers of ber_set_option() or</span>
<a href="#l3.69"></a><span id="l3.69">  * ber_get_option() must use LBER_OPT_USE_DER instead.  Sorry!</span>
<a href="#l3.70"></a><span id="l3.70">  */</span>
<a href="#l3.71"></a><span id="l3.71"> #define LBER_USE_DER			0x01</span>
<a href="#l3.72"></a><span id="l3.72"> </span>
<a href="#l3.73"></a><span id="l3.73"> /* Sockbuf set/get options */</span>
<a href="#l3.74"></a><span id="l3.74"> #define LBER_SOCKBUF_OPT_TO_FILE			0x001</span>
<a href="#l3.75"></a><span id="l3.75"> #define LBER_SOCKBUF_OPT_TO_FILE_ONLY		0x002</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineat">@@ -140,17 +140,17 @@ typedef long LBER_SOCKET;</span>
<a href="#l3.77"></a><span id="l3.77"> #else /* macintosh */</span>
<a href="#l3.78"></a><span id="l3.78"> typedef void *LBER_SOCKET;</span>
<a href="#l3.79"></a><span id="l3.79"> #endif /* macintosh */</span>
<a href="#l3.80"></a><span id="l3.80"> </span>
<a href="#l3.81"></a><span id="l3.81"> /* calling conventions used by library */</span>
<a href="#l3.82"></a><span id="l3.82"> #ifndef LDAP_CALL</span>
<a href="#l3.83"></a><span id="l3.83"> #if defined( _WINDOWS ) || defined( _WIN32 )</span>
<a href="#l3.84"></a><span id="l3.84"> #define LDAP_C __cdecl</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineminus">-#ifndef _WIN32 </span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+#ifndef _WIN32</span>
<a href="#l3.87"></a><span id="l3.87"> #define __stdcall _far _pascal</span>
<a href="#l3.88"></a><span id="l3.88"> #define LDAP_CALLBACK _loadds</span>
<a href="#l3.89"></a><span id="l3.89"> #else</span>
<a href="#l3.90"></a><span id="l3.90"> #define LDAP_CALLBACK</span>
<a href="#l3.91"></a><span id="l3.91"> #endif /* _WIN32 */</span>
<a href="#l3.92"></a><span id="l3.92"> #define LDAP_PASCAL __stdcall</span>
<a href="#l3.93"></a><span id="l3.93"> #define LDAP_CALL LDAP_PASCAL</span>
<a href="#l3.94"></a><span id="l3.94"> #else /* _WINDOWS */</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineat">@@ -194,17 +194,17 @@ typedef int (LDAP_C LDAP_CALLBACK LDAP_I</span>
<a href="#l3.96"></a><span id="l3.96"> typedef int (LDAP_C LDAP_CALLBACK LDAP_IOF_WRITE_CALLBACK)( LBER_SOCKET s,</span>
<a href="#l3.97"></a><span id="l3.97"> 	const void *buf, int len );</span>
<a href="#l3.98"></a><span id="l3.98"> typedef int (LDAP_C LDAP_CALLBACK LDAP_X_EXTIOF_READ_CALLBACK)( int s,</span>
<a href="#l3.99"></a><span id="l3.99"> 	void *buf, int bufsize, struct lextiof_socket_private *socketarg );</span>
<a href="#l3.100"></a><span id="l3.100"> typedef int (LDAP_C LDAP_CALLBACK LDAP_X_EXTIOF_WRITE_CALLBACK)( int s,</span>
<a href="#l3.101"></a><span id="l3.101"> 	const void *buf, int len, struct lextiof_socket_private *socketarg );</span>
<a href="#l3.102"></a><span id="l3.102"> typedef int (LDAP_C LDAP_CALLBACK LDAP_X_EXTIOF_WRITEV_CALLBACK)(int s,</span>
<a href="#l3.103"></a><span id="l3.103"> 	const ldap_x_iovec iov[], int iovcnt, struct lextiof_socket_private *socketarg);</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineminus">-						     </span>
<a href="#l3.105"></a><span id="l3.105" class="difflineplus">+						</span>
<a href="#l3.106"></a><span id="l3.106"> </span>
<a href="#l3.107"></a><span id="l3.107"> /*</span>
<a href="#l3.108"></a><span id="l3.108">  * Structure for use with LBER_SOCKBUF_OPT_EXT_IO_FNS:</span>
<a href="#l3.109"></a><span id="l3.109">  */</span>
<a href="#l3.110"></a><span id="l3.110"> struct lber_x_ext_io_fns {</span>
<a href="#l3.111"></a><span id="l3.111"> 	    /* lbextiofn_size should always be set to LBER_X_EXTIO_FNS_SIZE */</span>
<a href="#l3.112"></a><span id="l3.112"> 	int				lbextiofn_size;</span>
<a href="#l3.113"></a><span id="l3.113"> 	LDAP_X_EXTIOF_READ_CALLBACK	*lbextiofn_read;</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineat">@@ -232,31 +232,31 @@ struct lber_memalloc_fns {</span>
<a href="#l3.115"></a><span id="l3.115"> 	LDAP_REALLOC_CALLBACK	*lbermem_realloc;</span>
<a href="#l3.116"></a><span id="l3.116"> 	LDAP_FREE_CALLBACK	*lbermem_free;</span>
<a href="#l3.117"></a><span id="l3.117"> };</span>
<a href="#l3.118"></a><span id="l3.118"> </span>
<a href="#l3.119"></a><span id="l3.119"> /*</span>
<a href="#l3.120"></a><span id="l3.120">  * decode routines</span>
<a href="#l3.121"></a><span id="l3.121">  */</span>
<a href="#l3.122"></a><span id="l3.122"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_tag( BerElement *ber );</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineminus">-LDAP_API(ber_tag_t) LDAP_CALL ber_skip_tag( BerElement *ber, </span>
<a href="#l3.124"></a><span id="l3.124" class="difflineplus">+LDAP_API(ber_tag_t) LDAP_CALL ber_skip_tag( BerElement *ber,</span>
<a href="#l3.125"></a><span id="l3.125"> 	ber_len_t *len );</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineminus">-LDAP_API(ber_tag_t) LDAP_CALL ber_peek_tag( BerElement *ber, </span>
<a href="#l3.127"></a><span id="l3.127" class="difflineplus">+LDAP_API(ber_tag_t) LDAP_CALL ber_peek_tag( BerElement *ber,</span>
<a href="#l3.128"></a><span id="l3.128"> 	ber_len_t *len );</span>
<a href="#l3.129"></a><span id="l3.129"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_int( BerElement *ber, ber_int_t *num );</span>
<a href="#l3.130"></a><span id="l3.130"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_stringb( BerElement *ber, char *buf,</span>
<a href="#l3.131"></a><span id="l3.131"> 	ber_len_t *len );</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineminus">-LDAP_API(ber_tag_t) LDAP_CALL ber_get_stringa( BerElement *ber, </span>
<a href="#l3.133"></a><span id="l3.133" class="difflineplus">+LDAP_API(ber_tag_t) LDAP_CALL ber_get_stringa( BerElement *ber,</span>
<a href="#l3.134"></a><span id="l3.134"> 	char **buf );</span>
<a href="#l3.135"></a><span id="l3.135"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_stringal( BerElement *ber,</span>
<a href="#l3.136"></a><span id="l3.136"> 	struct berval **bv );</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineminus">-LDAP_API(ber_tag_t) LDAP_CALL ber_get_bitstringa( BerElement *ber, </span>
<a href="#l3.138"></a><span id="l3.138" class="difflineplus">+LDAP_API(ber_tag_t) LDAP_CALL ber_get_bitstringa( BerElement *ber,</span>
<a href="#l3.139"></a><span id="l3.139"> 	char **buf, ber_len_t *len );</span>
<a href="#l3.140"></a><span id="l3.140"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_null( BerElement *ber );</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineminus">-LDAP_API(ber_tag_t) LDAP_CALL ber_get_boolean( BerElement *ber, </span>
<a href="#l3.142"></a><span id="l3.142" class="difflineplus">+LDAP_API(ber_tag_t) LDAP_CALL ber_get_boolean( BerElement *ber,</span>
<a href="#l3.143"></a><span id="l3.143"> 	ber_int_t *boolval );</span>
<a href="#l3.144"></a><span id="l3.144"> LDAP_API(ber_tag_t) LDAP_CALL ber_first_element( BerElement *ber,</span>
<a href="#l3.145"></a><span id="l3.145"> 	ber_len_t *len, char **last );</span>
<a href="#l3.146"></a><span id="l3.146"> LDAP_API(ber_tag_t) LDAP_CALL ber_next_element( BerElement *ber,</span>
<a href="#l3.147"></a><span id="l3.147"> 	ber_len_t *len, char *last );</span>
<a href="#l3.148"></a><span id="l3.148"> LDAP_API(ber_tag_t) LDAP_C ber_scanf( BerElement *ber, const char *fmt,</span>
<a href="#l3.149"></a><span id="l3.149"> 	... );</span>
<a href="#l3.150"></a><span id="l3.150"> LDAP_API(void) LDAP_CALL ber_bvfree( struct berval *bv );</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineat">@@ -265,28 +265,28 @@ LDAP_API(void) LDAP_CALL ber_svecfree( c</span>
<a href="#l3.152"></a><span id="l3.152"> LDAP_API(struct berval *) LDAP_CALL ber_bvdup( const struct berval *bv );</span>
<a href="#l3.153"></a><span id="l3.153"> LDAP_API(void) LDAP_CALL ber_set_string_translators( BerElement *ber,</span>
<a href="#l3.154"></a><span id="l3.154"> 	BERTranslateProc encode_proc, BERTranslateProc decode_proc );</span>
<a href="#l3.155"></a><span id="l3.155"> LDAP_API(BerElement *) LDAP_CALL ber_init( const struct berval *bv );</span>
<a href="#l3.156"></a><span id="l3.156"> </span>
<a href="#l3.157"></a><span id="l3.157"> /*</span>
<a href="#l3.158"></a><span id="l3.158">  * encoding routines</span>
<a href="#l3.159"></a><span id="l3.159">  */</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_put_enum( BerElement *ber, ber_int_t num, </span>
<a href="#l3.161"></a><span id="l3.161" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_put_enum( BerElement *ber, ber_int_t num,</span>
<a href="#l3.162"></a><span id="l3.162"> 	ber_tag_t tag );</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_put_int( BerElement *ber, ber_int_t num, </span>
<a href="#l3.164"></a><span id="l3.164" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_put_int( BerElement *ber, ber_int_t num,</span>
<a href="#l3.165"></a><span id="l3.165"> 	ber_tag_t tag );</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_put_ostring( BerElement *ber, char *str, </span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_put_ostring( BerElement *ber, char *str,</span>
<a href="#l3.168"></a><span id="l3.168"> 	ber_len_t len, ber_tag_t tag );</span>
<a href="#l3.169"></a><span id="l3.169"> LDAP_API(int) LDAP_CALL ber_put_string( BerElement *ber, char *str,</span>
<a href="#l3.170"></a><span id="l3.170"> 	ber_tag_t tag );</span>
<a href="#l3.171"></a><span id="l3.171"> LDAP_API(int) LDAP_CALL ber_put_bitstring( BerElement *ber, char *str,</span>
<a href="#l3.172"></a><span id="l3.172"> 	ber_len_t bitlen, ber_tag_t tag );</span>
<a href="#l3.173"></a><span id="l3.173"> LDAP_API(int) LDAP_CALL ber_put_null( BerElement *ber, ber_tag_t tag );</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_put_boolean( BerElement *ber, </span>
<a href="#l3.175"></a><span id="l3.175" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_put_boolean( BerElement *ber,</span>
<a href="#l3.176"></a><span id="l3.176"> 	ber_int_t boolval, ber_tag_t tag );</span>
<a href="#l3.177"></a><span id="l3.177"> LDAP_API(int) LDAP_CALL ber_start_seq( BerElement *ber, ber_tag_t tag );</span>
<a href="#l3.178"></a><span id="l3.178"> LDAP_API(int) LDAP_CALL ber_start_set( BerElement *ber, ber_tag_t tag );</span>
<a href="#l3.179"></a><span id="l3.179"> LDAP_API(int) LDAP_CALL ber_put_seq( BerElement *ber );</span>
<a href="#l3.180"></a><span id="l3.180"> LDAP_API(int) LDAP_CALL ber_put_set( BerElement *ber );</span>
<a href="#l3.181"></a><span id="l3.181"> LDAP_API(int) LDAP_C ber_printf( BerElement *ber, const char *fmt, ... );</span>
<a href="#l3.182"></a><span id="l3.182"> LDAP_API(int) LDAP_CALL ber_flatten( BerElement *ber,</span>
<a href="#l3.183"></a><span id="l3.183"> 	struct berval **bvPtr );</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineat">@@ -305,35 +305,35 @@ LDAP_API(BerElement*) LDAP_CALL ber_dup(</span>
<a href="#l3.185"></a><span id="l3.185"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_next( Sockbuf *sb, ber_len_t *len,</span>
<a href="#l3.186"></a><span id="l3.186"> 	BerElement *ber );</span>
<a href="#l3.187"></a><span id="l3.187"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_next_buffer( void *buffer,</span>
<a href="#l3.188"></a><span id="l3.188"> 	size_t buffer_size, ber_len_t *len, BerElement *ber,</span>
<a href="#l3.189"></a><span id="l3.189"> 	ber_len_t *Bytes_Scanned );</span>
<a href="#l3.190"></a><span id="l3.190"> LDAP_API(ber_tag_t) LDAP_CALL ber_get_next_buffer_ext( void *buffer,</span>
<a href="#l3.191"></a><span id="l3.191"> 	size_t buffer_size, ber_len_t *len, BerElement *ber,</span>
<a href="#l3.192"></a><span id="l3.192"> 	ber_len_t *Bytes_Scanned, Sockbuf *sb );</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineminus">-LDAP_API(ber_int_t) LDAP_CALL ber_read( BerElement *ber, char *buf, </span>
<a href="#l3.194"></a><span id="l3.194" class="difflineplus">+LDAP_API(ber_int_t) LDAP_CALL ber_read( BerElement *ber, char *buf,</span>
<a href="#l3.195"></a><span id="l3.195"> 	ber_len_t len );</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineminus">-LDAP_API(ber_int_t) LDAP_CALL ber_write( BerElement *ber, char *buf, </span>
<a href="#l3.197"></a><span id="l3.197" class="difflineplus">+LDAP_API(ber_int_t) LDAP_CALL ber_write( BerElement *ber, char *buf,</span>
<a href="#l3.198"></a><span id="l3.198"> 	ber_len_t len, int nosos );</span>
<a href="#l3.199"></a><span id="l3.199"> LDAP_API(void) LDAP_CALL ber_init_w_nullchar( BerElement *ber, int options );</span>
<a href="#l3.200"></a><span id="l3.200"> LDAP_API(void) LDAP_CALL ber_reset( BerElement *ber, int was_writing );</span>
<a href="#l3.201"></a><span id="l3.201"> LDAP_API(size_t) LDAP_CALL ber_get_buf_datalen( BerElement *ber );</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_stack_init(BerElement *ber, int options, </span>
<a href="#l3.203"></a><span id="l3.203" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_stack_init(BerElement *ber, int options,</span>
<a href="#l3.204"></a><span id="l3.204"> 	char * buf, size_t size);</span>
<a href="#l3.205"></a><span id="l3.205"> LDAP_API(char*) LDAP_CALL ber_get_buf_databegin (BerElement * ber);</span>
<a href="#l3.206"></a><span id="l3.206"> LDAP_API(void) LDAP_CALL ber_sockbuf_free_data(Sockbuf *p);</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_set_option( BerElement *ber, int option, </span>
<a href="#l3.208"></a><span id="l3.208" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_set_option( BerElement *ber, int option,</span>
<a href="#l3.209"></a><span id="l3.209"> 	void *value );</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_get_option( BerElement *ber, int option, </span>
<a href="#l3.211"></a><span id="l3.211" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_get_option( BerElement *ber, int option,</span>
<a href="#l3.212"></a><span id="l3.212"> 	void *value );</span>
<a href="#l3.213"></a><span id="l3.213"> LDAP_API(Sockbuf*) LDAP_CALL ber_sockbuf_alloc( void );</span>
<a href="#l3.214"></a><span id="l3.214"> LDAP_API(void) LDAP_CALL ber_sockbuf_free( Sockbuf* p );</span>
<a href="#l3.215"></a><span id="l3.215" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_sockbuf_set_option( Sockbuf *sb, int option, </span>
<a href="#l3.216"></a><span id="l3.216" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_sockbuf_set_option( Sockbuf *sb, int option,</span>
<a href="#l3.217"></a><span id="l3.217"> 	void *value );</span>
<a href="#l3.218"></a><span id="l3.218" class="difflineminus">-LDAP_API(int) LDAP_CALL ber_sockbuf_get_option( Sockbuf *sb, int option, </span>
<a href="#l3.219"></a><span id="l3.219" class="difflineplus">+LDAP_API(int) LDAP_CALL ber_sockbuf_get_option( Sockbuf *sb, int option,</span>
<a href="#l3.220"></a><span id="l3.220"> 	void *value );</span>
<a href="#l3.221"></a><span id="l3.221"> </span>
<a href="#l3.222"></a><span id="l3.222"> #ifdef __cplusplus</span>
<a href="#l3.223"></a><span id="l3.223"> }</span>
<a href="#l3.224"></a><span id="l3.224"> #endif</span>
<a href="#l3.225"></a><span id="l3.225"> #endif /* _LBER_H */</span>
<a href="#l3.226"></a><span id="l3.226"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/ldap/c-sdk/include/lcache.h</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/ldap/c-sdk/include/lcache.h</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1,58 +1,58 @@</span>
<a href="#l4.4"></a><span id="l4.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l4.5"></a><span id="l4.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">- * </span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l4.10"></a><span id="l4.10" class="difflineplus">+ *</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l4.14"></a><span id="l4.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">- * </span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+ *</span>
<a href="#l4.17"></a><span id="l4.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l4.18"></a><span id="l4.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l4.19"></a><span id="l4.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l4.20"></a><span id="l4.20">  * License.</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">- * </span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+ *</span>
<a href="#l4.23"></a><span id="l4.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l4.24"></a><span id="l4.24">  * March 31, 1998.</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">- * </span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+ *</span>
<a href="#l4.27"></a><span id="l4.27">  * The Initial Developer of the Original Code is</span>
<a href="#l4.28"></a><span id="l4.28">  * Netscape Communications Corporation.</span>
<a href="#l4.29"></a><span id="l4.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l4.30"></a><span id="l4.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">- * </span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+ *</span>
<a href="#l4.33"></a><span id="l4.33">  * Contributor(s):</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">- * </span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+ *</span>
<a href="#l4.36"></a><span id="l4.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l4.37"></a><span id="l4.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l4.38"></a><span id="l4.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l4.39"></a><span id="l4.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l4.40"></a><span id="l4.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l4.41"></a><span id="l4.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l4.42"></a><span id="l4.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l4.43"></a><span id="l4.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l4.44"></a><span id="l4.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l4.45"></a><span id="l4.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l4.46"></a><span id="l4.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">- * </span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+ *</span>
<a href="#l4.49"></a><span id="l4.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l4.50"></a><span id="l4.50"> </span>
<a href="#l4.51"></a><span id="l4.51"> /* lcache.h - ldap persistent cache */</span>
<a href="#l4.52"></a><span id="l4.52"> #ifndef _LCACHE_H</span>
<a href="#l4.53"></a><span id="l4.53"> #define _LCACHE_H</span>
<a href="#l4.54"></a><span id="l4.54"> </span>
<a href="#l4.55"></a><span id="l4.55"> #ifdef __cplusplus</span>
<a href="#l4.56"></a><span id="l4.56"> extern &quot;C&quot; {</span>
<a href="#l4.57"></a><span id="l4.57"> #endif</span>
<a href="#l4.58"></a><span id="l4.58"> </span>
<a href="#l4.59"></a><span id="l4.59"> /* calling conventions used by library */</span>
<a href="#l4.60"></a><span id="l4.60"> #ifndef LDAP_CALL</span>
<a href="#l4.61"></a><span id="l4.61"> #if defined( _WINDOWS ) || defined( _WIN32 )</span>
<a href="#l4.62"></a><span id="l4.62"> #define LDAP_C __cdecl</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-#ifndef _WIN32 </span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+#ifndef _WIN32</span>
<a href="#l4.65"></a><span id="l4.65"> #define __stdcall _far _pascal</span>
<a href="#l4.66"></a><span id="l4.66"> #define LDAP_CALLBACK _loadds</span>
<a href="#l4.67"></a><span id="l4.67"> #else</span>
<a href="#l4.68"></a><span id="l4.68"> #define LDAP_CALLBACK</span>
<a href="#l4.69"></a><span id="l4.69"> #endif /* _WIN32 */</span>
<a href="#l4.70"></a><span id="l4.70"> #define LDAP_PASCAL __stdcall</span>
<a href="#l4.71"></a><span id="l4.71"> #define LDAP_CALL LDAP_PASCAL</span>
<a href="#l4.72"></a><span id="l4.72"> #else /* _WINDOWS */</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineat">@@ -72,17 +72,17 @@ LDAP_API(int) LDAP_C lcache_search( LDAP</span>
<a href="#l4.74"></a><span id="l4.74"> 	int attrsonly );</span>
<a href="#l4.75"></a><span id="l4.75"> LDAP_API(int) LDAP_C lcache_compare( LDAP *ld, int msgid, unsigned long tag,</span>
<a href="#l4.76"></a><span id="l4.76"> 	const char *dn, const char *attr, struct berval *val );</span>
<a href="#l4.77"></a><span id="l4.77"> LDAP_API(int) LDAP_C lcache_add( LDAP *ld, int msgid, unsigned long tag,</span>
<a href="#l4.78"></a><span id="l4.78"> 	const char *dn, LDAPMod **entry );</span>
<a href="#l4.79"></a><span id="l4.79"> LDAP_API(int) LDAP_C lcache_delete( LDAP *ld, int msgid, unsigned long tag,</span>
<a href="#l4.80"></a><span id="l4.80"> 	const char *dn );</span>
<a href="#l4.81"></a><span id="l4.81"> LDAP_API(int) LDAP_C lcache_rename( LDAP *ld, int msgid, unsigned long tag,</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineminus">-	const char *dn, const char *newrdn, const char *newparent, </span>
<a href="#l4.83"></a><span id="l4.83" class="difflineplus">+	const char *dn, const char *newrdn, const char *newparent,</span>
<a href="#l4.84"></a><span id="l4.84"> 	int deleteoldrdn );</span>
<a href="#l4.85"></a><span id="l4.85"> LDAP_API(int) LDAP_C lcache_modify( LDAP *ld, int msgid, unsigned long tag,</span>
<a href="#l4.86"></a><span id="l4.86"> 	const char *dn, LDAPMod **mods );</span>
<a href="#l4.87"></a><span id="l4.87"> LDAP_API(int) LDAP_C lcache_modrdn( LDAP *ld, int msgid, unsigned long tag,</span>
<a href="#l4.88"></a><span id="l4.88"> 	const char *dn, const char *newrdn, int deleteoldrdn );</span>
<a href="#l4.89"></a><span id="l4.89"> LDAP_API(int) LDAP_C lcache_result( LDAP *ld, int msgid, int all,</span>
<a href="#l4.90"></a><span id="l4.90"> 	struct timeval *timeout, LDAPMessage **result );</span>
<a href="#l4.91"></a><span id="l4.91"> LDAP_API(int) LDAP_C lcache_flush( LDAP *ld, char *dn, char *filter );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap-deprecated.h</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap-deprecated.h</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l5.4"></a><span id="l5.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l5.5"></a><span id="l5.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">- * </span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+ *</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l5.14"></a><span id="l5.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">- * </span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+ *</span>
<a href="#l5.17"></a><span id="l5.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l5.18"></a><span id="l5.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l5.19"></a><span id="l5.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l5.20"></a><span id="l5.20">  * License.</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">- * </span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+ *</span>
<a href="#l5.23"></a><span id="l5.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l5.24"></a><span id="l5.24">  * March 31, 1998.</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">- * </span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+ *</span>
<a href="#l5.27"></a><span id="l5.27">  * The Initial Developer of the Original Code is</span>
<a href="#l5.28"></a><span id="l5.28">  * Netscape Communications Corporation.</span>
<a href="#l5.29"></a><span id="l5.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l5.30"></a><span id="l5.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">- * </span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+ *</span>
<a href="#l5.33"></a><span id="l5.33">  * Contributor(s):</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">- * </span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+ *</span>
<a href="#l5.36"></a><span id="l5.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l5.37"></a><span id="l5.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l5.38"></a><span id="l5.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l5.39"></a><span id="l5.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l5.40"></a><span id="l5.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l5.41"></a><span id="l5.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l5.42"></a><span id="l5.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l5.43"></a><span id="l5.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l5.44"></a><span id="l5.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l5.45"></a><span id="l5.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l5.46"></a><span id="l5.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">- * </span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+ *</span>
<a href="#l5.49"></a><span id="l5.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l5.50"></a><span id="l5.50"> </span>
<a href="#l5.51"></a><span id="l5.51"> /* ldap-deprecated.h - deprecated functions and declarations</span>
<a href="#l5.52"></a><span id="l5.52">  *</span>
<a href="#l5.53"></a><span id="l5.53">  * A deprecated API is an API that we recommend you no longer use,</span>
<a href="#l5.54"></a><span id="l5.54">  * due to improvements in the LDAP C SDK. While deprecated APIs are</span>
<a href="#l5.55"></a><span id="l5.55">  * currently still implemented, they may be removed in future</span>
<a href="#l5.56"></a><span id="l5.56">  * implementations, and we recommend using other APIs.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap-extension.h</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap-extension.h</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l6.4"></a><span id="l6.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l6.5"></a><span id="l6.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">- * </span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+ *</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l6.14"></a><span id="l6.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">- * </span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+ *</span>
<a href="#l6.17"></a><span id="l6.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l6.18"></a><span id="l6.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l6.19"></a><span id="l6.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l6.20"></a><span id="l6.20">  * License.</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">- * </span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+ *</span>
<a href="#l6.23"></a><span id="l6.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l6.24"></a><span id="l6.24">  * March 31, 1998.</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">- * </span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+ *</span>
<a href="#l6.27"></a><span id="l6.27">  * The Initial Developer of the Original Code is</span>
<a href="#l6.28"></a><span id="l6.28">  * Netscape Communications Corporation.</span>
<a href="#l6.29"></a><span id="l6.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l6.30"></a><span id="l6.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">- * </span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+ *</span>
<a href="#l6.33"></a><span id="l6.33">  * Contributor(s):</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">- * </span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+ *</span>
<a href="#l6.36"></a><span id="l6.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l6.37"></a><span id="l6.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l6.38"></a><span id="l6.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l6.39"></a><span id="l6.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l6.40"></a><span id="l6.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l6.41"></a><span id="l6.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l6.42"></a><span id="l6.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l6.43"></a><span id="l6.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l6.44"></a><span id="l6.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l6.45"></a><span id="l6.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l6.46"></a><span id="l6.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">- * </span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+ *</span>
<a href="#l6.49"></a><span id="l6.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l6.50"></a><span id="l6.50"> </span>
<a href="#l6.51"></a><span id="l6.51"> /* ldap-extension.h - extensions to the ldap c api specification */</span>
<a href="#l6.52"></a><span id="l6.52"> </span>
<a href="#l6.53"></a><span id="l6.53"> #ifndef _LDAP_EXTENSION_H</span>
<a href="#l6.54"></a><span id="l6.54"> #define _LDAP_EXTENSION_H</span>
<a href="#l6.55"></a><span id="l6.55"> </span>
<a href="#l6.56"></a><span id="l6.56"> #ifdef __cplusplus</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineat">@@ -140,17 +140,17 @@ extern &quot;C&quot; {</span>
<a href="#l6.58"></a><span id="l6.58"> /* Password Policy Control to get account availability */	</span>
<a href="#l6.59"></a><span id="l6.59"> #define LDAP_CONTROL_ACCOUNT_USABLE     &quot;1.3.6.1.4.1.42.2.27.9.5.8&quot;</span>
<a href="#l6.60"></a><span id="l6.60"> </span>
<a href="#l6.61"></a><span id="l6.61"> /* &quot;Who am I?&quot; Extended Operation */	</span>
<a href="#l6.62"></a><span id="l6.62"> #define LDAP_EXOP_WHO_AM_I				&quot;1.3.6.1.4.1.4203.1.11.3&quot;</span>
<a href="#l6.63"></a><span id="l6.63"> </span>
<a href="#l6.64"></a><span id="l6.64"> LDAP_API(void) LDAP_CALL ldap_ber_free( BerElement *ber, int freebuf );</span>
<a href="#l6.65"></a><span id="l6.65"> </span>
<a href="#l6.66"></a><span id="l6.66" class="difflineminus">-LDAP_API(LDAPControl *) LDAP_CALL ldap_find_control( const char *oid, </span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+LDAP_API(LDAPControl *) LDAP_CALL ldap_find_control( const char *oid,</span>
<a href="#l6.68"></a><span id="l6.68"> 		LDAPControl **ctrls );</span>
<a href="#l6.69"></a><span id="l6.69"> </span>
<a href="#l6.70"></a><span id="l6.70"> /*</span>
<a href="#l6.71"></a><span id="l6.71">  * Server side sorting of search results (an LDAPv3 extension --</span>
<a href="#l6.72"></a><span id="l6.72">  * LDAP_API_FEATURE_SERVER_SIDE_SORT)</span>
<a href="#l6.73"></a><span id="l6.73">  */</span>
<a href="#l6.74"></a><span id="l6.74"> typedef struct LDAPsortkey {    /* structure for a sort-key */</span>
<a href="#l6.75"></a><span id="l6.75">         char *  sk_attrtype;</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineat">@@ -196,44 +196,44 @@ LDAP_API(int) LDAP_CALL ldap_create_sort</span>
<a href="#l6.77"></a><span id="l6.77">         LDAPControl **ctrlp );</span>
<a href="#l6.78"></a><span id="l6.78"> LDAP_API(int) LDAP_CALL ldap_parse_sort_control( LDAP *ld,</span>
<a href="#l6.79"></a><span id="l6.79">         LDAPControl **ctrls, ber_int_t *result, char **attribute );</span>
<a href="#l6.80"></a><span id="l6.80"> </span>
<a href="#l6.81"></a><span id="l6.81"> LDAP_API(void) LDAP_CALL ldap_free_sort_keylist( LDAPsortkey **sortKeyList );</span>
<a href="#l6.82"></a><span id="l6.82"> LDAP_API(int) LDAP_CALL ldap_create_sort_keylist( LDAPsortkey ***sortKeyList,</span>
<a href="#l6.83"></a><span id="l6.83">         const char *string_rep );</span>
<a href="#l6.84"></a><span id="l6.84"> </span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_create_userstatus_control( </span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_create_userstatus_control(</span>
<a href="#l6.87"></a><span id="l6.87"> 		LDAP *ld, const char ctl_iscritical, LDAPControl **ctrlp );</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_parse_userstatus_control( LDAP *ld, </span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_parse_userstatus_control( LDAP *ld,</span>
<a href="#l6.90"></a><span id="l6.90"> 		LDAPControl **ctrlp, LDAPuserstatus *us );</span>
<a href="#l6.91"></a><span id="l6.91"> </span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_create_passwordpolicy_control( LDAP *ld, </span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_create_passwordpolicy_control( LDAP *ld,</span>
<a href="#l6.94"></a><span id="l6.94"> 		LDAPControl **ctrlp );</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_create_passwordpolicy_control_ext( LDAP *ld, </span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_create_passwordpolicy_control_ext( LDAP *ld,</span>
<a href="#l6.97"></a><span id="l6.97"> 		const char ctl_iscritical, LDAPControl **ctrlp );</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_parse_passwordpolicy_control( LDAP *ld, </span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_parse_passwordpolicy_control( LDAP *ld,</span>
<a href="#l6.100"></a><span id="l6.100"> 		LDAPControl *ctrlp, ber_int_t *expirep, ber_int_t *gracep,</span>
<a href="#l6.101"></a><span id="l6.101"> 		LDAPPasswordPolicyError *errorp );</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_parse_passwordpolicy_control_ext ( LDAP *ld, </span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_parse_passwordpolicy_control_ext ( LDAP *ld,</span>
<a href="#l6.104"></a><span id="l6.104"> 		LDAPControl **ctrlp, ber_int_t *expirep, ber_int_t *gracep,</span>
<a href="#l6.105"></a><span id="l6.105"> 		LDAPPasswordPolicyError *errorp );</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-LDAP_API(const char *) LDAP_CALL ldap_passwordpolicy_err2txt( </span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+LDAP_API(const char *) LDAP_CALL ldap_passwordpolicy_err2txt(</span>
<a href="#l6.108"></a><span id="l6.108"> 		LDAPPasswordPolicyError err );</span>
<a href="#l6.109"></a><span id="l6.109"> </span>
<a href="#l6.110"></a><span id="l6.110" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_create_authzid_control( LDAP *ld, </span>
<a href="#l6.111"></a><span id="l6.111" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_create_authzid_control( LDAP *ld,</span>
<a href="#l6.112"></a><span id="l6.112"> 		const char ctl_iscritical, LDAPControl **ctrlp );</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_parse_authzid_control( LDAP *ld, </span>
<a href="#l6.114"></a><span id="l6.114" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_parse_authzid_control( LDAP *ld,</span>
<a href="#l6.115"></a><span id="l6.115"> 		LDAPControl **ctrlp, char **authzid );</span>
<a href="#l6.116"></a><span id="l6.116"> </span>
<a href="#l6.117"></a><span id="l6.117" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_whoami( LDAP *ld, LDAPControl **serverctrls, </span>
<a href="#l6.118"></a><span id="l6.118" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_whoami( LDAP *ld, LDAPControl **serverctrls,</span>
<a href="#l6.119"></a><span id="l6.119"> 		LDAPControl **clientctrls, int *msgidp );</span>
<a href="#l6.120"></a><span id="l6.120"> LDAP_API(int) LDAP_CALL ldap_whoami_s( LDAP *ld, struct berval **authzid,</span>
<a href="#l6.121"></a><span id="l6.121"> 		LDAPControl **serverctrls, LDAPControl **clientctrls );</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_parse_whoami( LDAP *ld, LDAPMessage *result, </span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_parse_whoami( LDAP *ld, LDAPMessage *result,</span>
<a href="#l6.124"></a><span id="l6.124"> 		struct berval **authzid );</span>
<a href="#l6.125"></a><span id="l6.125"> </span>
<a href="#l6.126"></a><span id="l6.126"> LDAP_API(int) LDAP_CALL ldap_create_geteffectiveRights_control( LDAP *ld,</span>
<a href="#l6.127"></a><span id="l6.127">         const char *authzid, const char **attrlist,  const char ctl_iscritical,</span>
<a href="#l6.128"></a><span id="l6.128"> 		LDAPControl **ctrlp );</span>
<a href="#l6.129"></a><span id="l6.129"> </span>
<a href="#l6.130"></a><span id="l6.130"> /*</span>
<a href="#l6.131"></a><span id="l6.131">  * Virtual list view (an LDAPv3 extension -- LDAP_API_FEATURE_VIRTUAL_LIST_VIEW)</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineat">@@ -332,17 +332,17 @@ typedef struct ldap_url_desc {</span>
<a href="#l6.133"></a><span id="l6.133"> #define LDAP_URL_ERR_PARAM      5       /* bad parameter to an URL function */</span>
<a href="#l6.134"></a><span id="l6.134"> #define LDAP_URL_UNRECOGNIZED_CRITICAL_EXTENSION	6</span>
<a href="#l6.135"></a><span id="l6.135"> </span>
<a href="#l6.136"></a><span id="l6.136"> /*</span>
<a href="#l6.137"></a><span id="l6.137">  * URL functions:</span>
<a href="#l6.138"></a><span id="l6.138">  */</span>
<a href="#l6.139"></a><span id="l6.139"> LDAP_API(int) LDAP_CALL ldap_is_ldap_url( const char *url );</span>
<a href="#l6.140"></a><span id="l6.140"> LDAP_API(int) LDAP_CALL ldap_url_parse( const char *url, LDAPURLDesc **ludpp );</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_url_parse_no_defaults( const char *url, </span>
<a href="#l6.142"></a><span id="l6.142" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_url_parse_no_defaults( const char *url,</span>
<a href="#l6.143"></a><span id="l6.143">         LDAPURLDesc **ludpp, int dn_required);</span>
<a href="#l6.144"></a><span id="l6.144"> LDAP_API(void) LDAP_CALL ldap_free_urldesc( LDAPURLDesc *ludp );</span>
<a href="#l6.145"></a><span id="l6.145"> LDAP_API(int) LDAP_CALL ldap_url_search( LDAP *ld, const char *url,</span>
<a href="#l6.146"></a><span id="l6.146">         int attrsonly );</span>
<a href="#l6.147"></a><span id="l6.147"> LDAP_API(int) LDAP_CALL ldap_url_search_s( LDAP *ld, const char *url,</span>
<a href="#l6.148"></a><span id="l6.148">         int attrsonly, LDAPMessage **res );</span>
<a href="#l6.149"></a><span id="l6.149"> LDAP_API(int) LDAP_CALL ldap_url_search_st( LDAP *ld, const char *url,</span>
<a href="#l6.150"></a><span id="l6.150">         int attrsonly, struct timeval *timeout, LDAPMessage **res );</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineat">@@ -644,17 +644,17 @@ LDAP_API(void) LDAP_CALL ldap_memcache_d</span>
<a href="#l6.152"></a><span id="l6.152"> LDAP_API(void) LDAP_CALL ldap_memcache_update( LDAPMemCache *cache );</span>
<a href="#l6.153"></a><span id="l6.153"> </span>
<a href="#l6.154"></a><span id="l6.154"> /*</span>
<a href="#l6.155"></a><span id="l6.155">  * Timeout value for nonblocking connect call</span>
<a href="#l6.156"></a><span id="l6.156">  */</span>
<a href="#l6.157"></a><span id="l6.157"> #define LDAP_X_OPT_CONNECT_TIMEOUT    (LDAP_OPT_PRIVATE_EXTENSION_BASE + 0x0F01)</span>
<a href="#l6.158"></a><span id="l6.158">         /* 0x4000 + 0x0F01 = 0x4F01 = 20225 - API extension */</span>
<a href="#l6.159"></a><span id="l6.159"> </span>
<a href="#l6.160"></a><span id="l6.160" class="difflineminus">-/* </span>
<a href="#l6.161"></a><span id="l6.161" class="difflineplus">+/*</span>
<a href="#l6.162"></a><span id="l6.162">  * Socket buffer structure associated to the LDAP connection</span>
<a href="#l6.163"></a><span id="l6.163">  */</span>
<a href="#l6.164"></a><span id="l6.164"> #define LDAP_X_OPT_SOCKBUF            (LDAP_OPT_PRIVATE_EXTENSION_BASE + 0x0F03)</span>
<a href="#l6.165"></a><span id="l6.165"> 	/* 0x4000 + 0x0F03 = 0x4F03 = 20227 - API extension */</span>
<a href="#l6.166"></a><span id="l6.166"> </span>
<a href="#l6.167"></a><span id="l6.167"> /*</span>
<a href="#l6.168"></a><span id="l6.168">  * Memory allocation callback functions (an API extension --</span>
<a href="#l6.169"></a><span id="l6.169">  * LDAP_API_FEATURE_X_MEMALLOC_FUNCTIONS).  These are global and can</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineat">@@ -834,17 +834,17 @@ LDAP_API(int) LDAP_CALL ldap_passwd( LDA</span>
<a href="#l6.171"></a><span id="l6.171"> </span>
<a href="#l6.172"></a><span id="l6.172"> LDAP_API(int) LDAP_CALL ldap_passwd_s( LDAP *ld, struct berval *userid,</span>
<a href="#l6.173"></a><span id="l6.173"> 	struct berval *oldpasswd, struct berval *newpasswd,</span>
<a href="#l6.174"></a><span id="l6.174"> 	struct berval *genpasswd, LDAPControl **serverctrls,</span>
<a href="#l6.175"></a><span id="l6.175"> 	LDAPControl **clientctrls );</span>
<a href="#l6.176"></a><span id="l6.176"> </span>
<a href="#l6.177"></a><span id="l6.177"> LDAP_API(int) LDAP_CALL ldap_parse_passwd( LDAP *ld, LDAPMessage *result,</span>
<a href="#l6.178"></a><span id="l6.178"> 	struct berval *genpasswd );</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineminus">-    </span>
<a href="#l6.180"></a><span id="l6.180" class="difflineplus">+</span>
<a href="#l6.181"></a><span id="l6.181"> /*</span>
<a href="#l6.182"></a><span id="l6.182">  * in reslist.c</span>
<a href="#l6.183"></a><span id="l6.183">  */</span>
<a href="#l6.184"></a><span id="l6.184"> LDAP_API(LDAPMessage *) LDAP_CALL ldap_delete_result_entry( LDAPMessage **list, LDAPMessage *e );</span>
<a href="#l6.185"></a><span id="l6.185"> LDAP_API(void) LDAP_CALL ldap_add_result_entry( LDAPMessage **list, LDAPMessage *e );</span>
<a href="#l6.186"></a><span id="l6.186"> </span>
<a href="#l6.187"></a><span id="l6.187"> #ifdef __cplusplus</span>
<a href="#l6.188"></a><span id="l6.188"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap-platform.h</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap-platform.h</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -1,55 +1,55 @@</span>
<a href="#l7.4"></a><span id="l7.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.5"></a><span id="l7.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">- * </span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+ *</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l7.14"></a><span id="l7.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">- * </span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+ *</span>
<a href="#l7.17"></a><span id="l7.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.18"></a><span id="l7.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.19"></a><span id="l7.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l7.20"></a><span id="l7.20">  * License.</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">- * </span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+ *</span>
<a href="#l7.23"></a><span id="l7.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l7.24"></a><span id="l7.24">  * March 31, 1998.</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">- * </span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+ *</span>
<a href="#l7.27"></a><span id="l7.27">  * The Initial Developer of the Original Code is</span>
<a href="#l7.28"></a><span id="l7.28">  * Netscape Communications Corporation.</span>
<a href="#l7.29"></a><span id="l7.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l7.30"></a><span id="l7.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">- * </span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+ *</span>
<a href="#l7.33"></a><span id="l7.33">  * Contributor(s):</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">- * </span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+ *</span>
<a href="#l7.36"></a><span id="l7.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.37"></a><span id="l7.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l7.38"></a><span id="l7.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.39"></a><span id="l7.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.40"></a><span id="l7.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.41"></a><span id="l7.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.42"></a><span id="l7.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.43"></a><span id="l7.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.44"></a><span id="l7.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l7.45"></a><span id="l7.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.46"></a><span id="l7.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">- * </span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+ *</span>
<a href="#l7.49"></a><span id="l7.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l7.50"></a><span id="l7.50"> </span>
<a href="#l7.51"></a><span id="l7.51"> /* ldap-platform.h - platform transparency */</span>
<a href="#l7.52"></a><span id="l7.52"> </span>
<a href="#l7.53"></a><span id="l7.53"> #ifndef _LDAP_PLATFORM_H</span>
<a href="#l7.54"></a><span id="l7.54"> #define _LDAP_PLATFORM_H</span>
<a href="#l7.55"></a><span id="l7.55"> </span>
<a href="#l7.56"></a><span id="l7.56"> #ifdef __cplusplus</span>
<a href="#l7.57"></a><span id="l7.57"> extern &quot;C&quot; {</span>
<a href="#l7.58"></a><span id="l7.58"> #endif</span>
<a href="#l7.59"></a><span id="l7.59"> </span>
<a href="#l7.60"></a><span id="l7.60" class="difflineminus">-#if defined (WIN32) || defined (_WIN32) || defined( _CONSOLE ) </span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+#if defined (WIN32) || defined (_WIN32) || defined( _CONSOLE )</span>
<a href="#l7.62"></a><span id="l7.62"> #include &lt;windows.h&gt;</span>
<a href="#l7.63"></a><span id="l7.63"> #  if defined( _WINDOWS )</span>
<a href="#l7.64"></a><span id="l7.64"> #  include &lt;winsock.h&gt;</span>
<a href="#l7.65"></a><span id="l7.65"> #  endif</span>
<a href="#l7.66"></a><span id="l7.66"> #elif defined(macintosh)</span>
<a href="#l7.67"></a><span id="l7.67"> #ifndef LDAP_TYPE_TIMEVAL_DEFINED</span>
<a href="#l7.68"></a><span id="l7.68"> #include &lt;utime.h&gt;</span>
<a href="#l7.69"></a><span id="l7.69"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap-standard.h</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap-standard.h</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,49 +1,49 @@</span>
<a href="#l8.4"></a><span id="l8.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.5"></a><span id="l8.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">- * </span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l8.10"></a><span id="l8.10" class="difflineplus">+ *</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l8.14"></a><span id="l8.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">- * </span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+ *</span>
<a href="#l8.17"></a><span id="l8.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.18"></a><span id="l8.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.19"></a><span id="l8.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l8.20"></a><span id="l8.20">  * License.</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">- * </span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+ *</span>
<a href="#l8.23"></a><span id="l8.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l8.24"></a><span id="l8.24">  * March 31, 1998.</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">- * </span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+ *</span>
<a href="#l8.27"></a><span id="l8.27">  * The Initial Developer of the Original Code is</span>
<a href="#l8.28"></a><span id="l8.28">  * Netscape Communications Corporation.</span>
<a href="#l8.29"></a><span id="l8.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l8.30"></a><span id="l8.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">- * </span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+ *</span>
<a href="#l8.33"></a><span id="l8.33">  * Contributor(s):</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">- * </span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+ *</span>
<a href="#l8.36"></a><span id="l8.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.37"></a><span id="l8.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l8.38"></a><span id="l8.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.39"></a><span id="l8.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.40"></a><span id="l8.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.41"></a><span id="l8.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.42"></a><span id="l8.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.43"></a><span id="l8.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.44"></a><span id="l8.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.45"></a><span id="l8.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.46"></a><span id="l8.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">- * </span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+ *</span>
<a href="#l8.49"></a><span id="l8.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l8.50"></a><span id="l8.50"> </span>
<a href="#l8.51"></a><span id="l8.51"> /* ldap-standard.h - standards base header file for libldap */</span>
<a href="#l8.52"></a><span id="l8.52"> /* This file contain the defines and function prototypes matching */</span>
<a href="#l8.53"></a><span id="l8.53"> /* very closely to the latest LDAP C API draft */</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineminus">- </span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+</span>
<a href="#l8.56"></a><span id="l8.56"> #ifndef _LDAP_STANDARD_H</span>
<a href="#l8.57"></a><span id="l8.57"> #define _LDAP_STANDARD_H</span>
<a href="#l8.58"></a><span id="l8.58"> </span>
<a href="#l8.59"></a><span id="l8.59"> #ifdef __cplusplus</span>
<a href="#l8.60"></a><span id="l8.60"> extern &quot;C&quot; {</span>
<a href="#l8.61"></a><span id="l8.61"> #endif</span>
<a href="#l8.62"></a><span id="l8.62"> </span>
<a href="#l8.63"></a><span id="l8.63"> #include &quot;ldap-platform.h&quot;</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineat">@@ -298,21 +298,21 @@ LDAP_API(int) LDAP_CALL ldap_unbind_s( L</span>
<a href="#l8.65"></a><span id="l8.65"> LDAP_API(int) LDAP_CALL ldap_abandon( LDAP *ld, int msgid );</span>
<a href="#l8.66"></a><span id="l8.66"> LDAP_API(int) LDAP_CALL ldap_add( LDAP *ld, const char *dn, LDAPMod **attrs );</span>
<a href="#l8.67"></a><span id="l8.67"> LDAP_API(int) LDAP_CALL ldap_add_s( LDAP *ld, const char *dn, LDAPMod **attrs );</span>
<a href="#l8.68"></a><span id="l8.68"> LDAP_API(int) LDAP_CALL ldap_simple_bind( LDAP *ld, const char *who,</span>
<a href="#l8.69"></a><span id="l8.69"> 	const char *passwd );</span>
<a href="#l8.70"></a><span id="l8.70"> LDAP_API(int) LDAP_CALL ldap_simple_bind_s( LDAP *ld, const char *who,</span>
<a href="#l8.71"></a><span id="l8.71"> 	const char *passwd );</span>
<a href="#l8.72"></a><span id="l8.72"> LDAP_API(int) LDAP_CALL ldap_modify( LDAP *ld, const char *dn, LDAPMod **mods );</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_modify_s( LDAP *ld, const char *dn, </span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_modify_s( LDAP *ld, const char *dn,</span>
<a href="#l8.75"></a><span id="l8.75"> 	LDAPMod **mods );</span>
<a href="#l8.76"></a><span id="l8.76"> LDAP_API(int) LDAP_CALL ldap_compare( LDAP *ld, const char *dn,</span>
<a href="#l8.77"></a><span id="l8.77"> 	const char *attr, const char *value );</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineminus">-LDAP_API(int) LDAP_CALL ldap_compare_s( LDAP *ld, const char *dn, </span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+LDAP_API(int) LDAP_CALL ldap_compare_s( LDAP *ld, const char *dn,</span>
<a href="#l8.80"></a><span id="l8.80"> 	const char *attr, const char *value );</span>
<a href="#l8.81"></a><span id="l8.81"> LDAP_API(int) LDAP_CALL ldap_delete( LDAP *ld, const char *dn );</span>
<a href="#l8.82"></a><span id="l8.82"> LDAP_API(int) LDAP_CALL ldap_delete_s( LDAP *ld, const char *dn );</span>
<a href="#l8.83"></a><span id="l8.83"> LDAP_API(int) LDAP_CALL ldap_search( LDAP *ld, const char *base, int scope,</span>
<a href="#l8.84"></a><span id="l8.84"> 	const char *filter, char **attrs, int attrsonly );</span>
<a href="#l8.85"></a><span id="l8.85"> LDAP_API(int) LDAP_CALL ldap_search_s( LDAP *ld, const char *base, int scope,</span>
<a href="#l8.86"></a><span id="l8.86"> 	const char *filter, char **attrs, int attrsonly, LDAPMessage **res );</span>
<a href="#l8.87"></a><span id="l8.87"> LDAP_API(int) LDAP_CALL ldap_search_st( LDAP *ld, const char *base, int scope,</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineat">@@ -332,26 +332,26 @@ LDAP_API(int) LDAP_CALL ldap_msgfree( LD</span>
<a href="#l8.89"></a><span id="l8.89"> LDAP_API(int) LDAP_CALL ldap_msgid( LDAPMessage *lm );</span>
<a href="#l8.90"></a><span id="l8.90"> LDAP_API(int) LDAP_CALL ldap_msgtype( LDAPMessage *lm );</span>
<a href="#l8.91"></a><span id="l8.91"> </span>
<a href="#l8.92"></a><span id="l8.92"> </span>
<a href="#l8.93"></a><span id="l8.93"> /*</span>
<a href="#l8.94"></a><span id="l8.94">  * Routines to parse/deal with results and errors returned</span>
<a href="#l8.95"></a><span id="l8.95">  */</span>
<a href="#l8.96"></a><span id="l8.96"> LDAP_API(char *) LDAP_CALL ldap_err2string( int err );</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineminus">-LDAP_API(LDAPMessage *) LDAP_CALL ldap_first_entry( LDAP *ld, </span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+LDAP_API(LDAPMessage *) LDAP_CALL ldap_first_entry( LDAP *ld,</span>
<a href="#l8.99"></a><span id="l8.99"> 	LDAPMessage *chain );</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineminus">-LDAP_API(LDAPMessage *) LDAP_CALL ldap_next_entry( LDAP *ld, </span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+LDAP_API(LDAPMessage *) LDAP_CALL ldap_next_entry( LDAP *ld,</span>
<a href="#l8.102"></a><span id="l8.102"> 	LDAPMessage *entry );</span>
<a href="#l8.103"></a><span id="l8.103"> LDAP_API(int) LDAP_CALL ldap_count_entries( LDAP *ld, LDAPMessage *chain );</span>
<a href="#l8.104"></a><span id="l8.104"> LDAP_API(char *) LDAP_CALL ldap_get_dn( LDAP *ld, LDAPMessage *entry );</span>
<a href="#l8.105"></a><span id="l8.105"> LDAP_API(char *) LDAP_CALL ldap_dn2ufn( const char *dn );</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineminus">-LDAP_API(char **) LDAP_CALL ldap_explode_dn( const char *dn, </span>
<a href="#l8.107"></a><span id="l8.107" class="difflineplus">+LDAP_API(char **) LDAP_CALL ldap_explode_dn( const char *dn,</span>
<a href="#l8.108"></a><span id="l8.108"> 	const int notypes );</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineminus">-LDAP_API(char **) LDAP_CALL ldap_explode_rdn( const char *rdn, </span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+LDAP_API(char **) LDAP_CALL ldap_explode_rdn( const char *rdn,</span>
<a href="#l8.111"></a><span id="l8.111"> 	const int notypes );</span>
<a href="#l8.112"></a><span id="l8.112"> LDAP_API(char *) LDAP_CALL ldap_first_attribute( LDAP *ld, LDAPMessage *entry,</span>
<a href="#l8.113"></a><span id="l8.113"> 	BerElement **ber );</span>
<a href="#l8.114"></a><span id="l8.114"> LDAP_API(char *) LDAP_CALL ldap_next_attribute( LDAP *ld, LDAPMessage *entry,</span>
<a href="#l8.115"></a><span id="l8.115"> 	BerElement *ber );</span>
<a href="#l8.116"></a><span id="l8.116"> LDAP_API(char **) LDAP_CALL ldap_get_values( LDAP *ld, LDAPMessage *entry,</span>
<a href="#l8.117"></a><span id="l8.117"> 	const char *target );</span>
<a href="#l8.118"></a><span id="l8.118"> LDAP_API(struct berval **) LDAP_CALL ldap_get_values_len( LDAP *ld,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap-to-be-deprecated.h</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap-to-be-deprecated.h</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -1,48 +1,48 @@</span>
<a href="#l9.4"></a><span id="l9.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l9.5"></a><span id="l9.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">- * </span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+ *</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l9.14"></a><span id="l9.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">- * </span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+ *</span>
<a href="#l9.17"></a><span id="l9.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l9.18"></a><span id="l9.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l9.19"></a><span id="l9.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l9.20"></a><span id="l9.20">  * License.</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">- * </span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+ *</span>
<a href="#l9.23"></a><span id="l9.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l9.24"></a><span id="l9.24">  * March 31, 1998.</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">- * </span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+ *</span>
<a href="#l9.27"></a><span id="l9.27">  * The Initial Developer of the Original Code is</span>
<a href="#l9.28"></a><span id="l9.28">  * Netscape Communications Corporation.</span>
<a href="#l9.29"></a><span id="l9.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l9.30"></a><span id="l9.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">- * </span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+ *</span>
<a href="#l9.33"></a><span id="l9.33">  * Contributor(s):</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">- * </span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+ *</span>
<a href="#l9.36"></a><span id="l9.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.37"></a><span id="l9.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l9.38"></a><span id="l9.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.39"></a><span id="l9.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.40"></a><span id="l9.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.41"></a><span id="l9.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.42"></a><span id="l9.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.43"></a><span id="l9.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l9.44"></a><span id="l9.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l9.45"></a><span id="l9.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.46"></a><span id="l9.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">- * </span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+ *</span>
<a href="#l9.49"></a><span id="l9.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l9.50"></a><span id="l9.50"> </span>
<a href="#l9.51"></a><span id="l9.51"> /* ldap-to-be-deprecated.h - functions and declaration which will be</span>
<a href="#l9.52"></a><span id="l9.52">  * deprecated in a future release.</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">- * </span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+ *</span>
<a href="#l9.55"></a><span id="l9.55">  * A deprecated API is an API that we recommend you no longer use,</span>
<a href="#l9.56"></a><span id="l9.56">  * due to improvements in the LDAP C SDK. While deprecated APIs are</span>
<a href="#l9.57"></a><span id="l9.57">  * currently still implemented, they may be removed in future</span>
<a href="#l9.58"></a><span id="l9.58">  * implementations, and we recommend using other APIs.</span>
<a href="#l9.59"></a><span id="l9.59">  *</span>
<a href="#l9.60"></a><span id="l9.60">  * This header file will act as a first warning before moving functions</span>
<a href="#l9.61"></a><span id="l9.61">  * into an unsupported/deprecated state.  If your favorite application</span>
<a href="#l9.62"></a><span id="l9.62">  * depend on any declaration and defines, and there is a good reason</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineat">@@ -68,17 +68,17 @@ extern &quot;C&quot; {</span>
<a href="#l9.64"></a><span id="l9.64">  * I/O callback functions (note that types for the read and write callbacks</span>
<a href="#l9.65"></a><span id="l9.65">  * are actually in lber.h):</span>
<a href="#l9.66"></a><span id="l9.66">  */</span>
<a href="#l9.67"></a><span id="l9.67"> typedef int	(LDAP_C LDAP_CALLBACK LDAP_IOF_SELECT_CALLBACK)( int nfds,</span>
<a href="#l9.68"></a><span id="l9.68"> 	fd_set *readfds, fd_set *writefds, fd_set *errorfds,</span>
<a href="#l9.69"></a><span id="l9.69"> 	struct timeval *timeout );</span>
<a href="#l9.70"></a><span id="l9.70"> typedef LBER_SOCKET (LDAP_C LDAP_CALLBACK LDAP_IOF_SOCKET_CALLBACK)(</span>
<a href="#l9.71"></a><span id="l9.71"> 	int domain, int type, int protocol );</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-typedef int	(LDAP_C LDAP_CALLBACK LDAP_IOF_IOCTL_CALLBACK)( LBER_SOCKET s, </span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+typedef int	(LDAP_C LDAP_CALLBACK LDAP_IOF_IOCTL_CALLBACK)( LBER_SOCKET s,</span>
<a href="#l9.74"></a><span id="l9.74"> 	int option, ... );</span>
<a href="#l9.75"></a><span id="l9.75"> typedef int	(LDAP_C LDAP_CALLBACK LDAP_IOF_CONNECT_CALLBACK )(</span>
<a href="#l9.76"></a><span id="l9.76"> 	LBER_SOCKET s, struct sockaddr *name, int namelen );</span>
<a href="#l9.77"></a><span id="l9.77"> typedef int	(LDAP_C LDAP_CALLBACK LDAP_IOF_CLOSE_CALLBACK )(</span>
<a href="#l9.78"></a><span id="l9.78"> 	LBER_SOCKET s );</span>
<a href="#l9.79"></a><span id="l9.79"> typedef int	(LDAP_C LDAP_CALLBACK LDAP_IOF_SSL_ENABLE_CALLBACK )(</span>
<a href="#l9.80"></a><span id="l9.80"> 	LBER_SOCKET s );</span>
<a href="#l9.81"></a><span id="l9.81"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap.h</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap.h</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1,51 +1,51 @@</span>
<a href="#l10.4"></a><span id="l10.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l10.5"></a><span id="l10.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">- * </span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+ *</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l10.14"></a><span id="l10.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">- * </span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+ *</span>
<a href="#l10.17"></a><span id="l10.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l10.18"></a><span id="l10.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l10.19"></a><span id="l10.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l10.20"></a><span id="l10.20">  * License.</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">- * </span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+ *</span>
<a href="#l10.23"></a><span id="l10.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l10.24"></a><span id="l10.24">  * March 31, 1998.</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineminus">- * </span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+ *</span>
<a href="#l10.27"></a><span id="l10.27">  * The Initial Developer of the Original Code is</span>
<a href="#l10.28"></a><span id="l10.28">  * Netscape Communications Corporation.</span>
<a href="#l10.29"></a><span id="l10.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l10.30"></a><span id="l10.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">- * </span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+ *</span>
<a href="#l10.33"></a><span id="l10.33">  * Contributor(s):</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">- * </span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+ *</span>
<a href="#l10.36"></a><span id="l10.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l10.37"></a><span id="l10.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l10.38"></a><span id="l10.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l10.39"></a><span id="l10.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l10.40"></a><span id="l10.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l10.41"></a><span id="l10.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l10.42"></a><span id="l10.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l10.43"></a><span id="l10.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.44"></a><span id="l10.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.45"></a><span id="l10.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.46"></a><span id="l10.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">- * </span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+ *</span>
<a href="#l10.49"></a><span id="l10.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l10.50"></a><span id="l10.50"> </span>
<a href="#l10.51"></a><span id="l10.51"> /* ldap.h - general header file for libldap */</span>
<a href="#l10.52"></a><span id="l10.52"> </span>
<a href="#l10.53"></a><span id="l10.53"> #ifndef _LDAP_H</span>
<a href="#l10.54"></a><span id="l10.54"> #define _LDAP_H</span>
<a href="#l10.55"></a><span id="l10.55"> </span>
<a href="#l10.56"></a><span id="l10.56" class="difflineminus">-/* Standard LDAP API functions and declarations */ </span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+/* Standard LDAP API functions and declarations */</span>
<a href="#l10.58"></a><span id="l10.58"> #include &quot;ldap-standard.h&quot;</span>
<a href="#l10.59"></a><span id="l10.59"> </span>
<a href="#l10.60"></a><span id="l10.60"> /* Extensions to the LDAP standard */</span>
<a href="#l10.61"></a><span id="l10.61"> #include &quot;ldap-extension.h&quot;</span>
<a href="#l10.62"></a><span id="l10.62"> </span>
<a href="#l10.63"></a><span id="l10.63"> /* A deprecated API is an API that we recommend you no longer use,</span>
<a href="#l10.64"></a><span id="l10.64">  * due to improvements in the LDAP C SDK. While deprecated APIs are</span>
<a href="#l10.65"></a><span id="l10.65">  * currently still implemented, they may be removed in future</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/ldap/c-sdk/include/ldap_ssl.h</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldap_ssl.h</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1,59 +1,59 @@</span>
<a href="#l11.4"></a><span id="l11.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l11.5"></a><span id="l11.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">- * </span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+ *</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l11.14"></a><span id="l11.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">- * </span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+ *</span>
<a href="#l11.17"></a><span id="l11.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l11.18"></a><span id="l11.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l11.19"></a><span id="l11.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l11.20"></a><span id="l11.20">  * License.</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">- * </span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+ *</span>
<a href="#l11.23"></a><span id="l11.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l11.24"></a><span id="l11.24">  * March 31, 1998.</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">- * </span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+ *</span>
<a href="#l11.27"></a><span id="l11.27">  * The Initial Developer of the Original Code is</span>
<a href="#l11.28"></a><span id="l11.28">  * Netscape Communications Corporation.</span>
<a href="#l11.29"></a><span id="l11.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l11.30"></a><span id="l11.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">- * </span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+ *</span>
<a href="#l11.33"></a><span id="l11.33">  * Contributor(s):</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">- * </span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+ *</span>
<a href="#l11.36"></a><span id="l11.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l11.37"></a><span id="l11.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l11.38"></a><span id="l11.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l11.39"></a><span id="l11.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l11.40"></a><span id="l11.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l11.41"></a><span id="l11.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l11.42"></a><span id="l11.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l11.43"></a><span id="l11.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l11.44"></a><span id="l11.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l11.45"></a><span id="l11.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l11.46"></a><span id="l11.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">- * </span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+ *</span>
<a href="#l11.49"></a><span id="l11.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l11.50"></a><span id="l11.50"> </span>
<a href="#l11.51"></a><span id="l11.51"> #if !defined(LDAP_SSL_H)</span>
<a href="#l11.52"></a><span id="l11.52"> #define LDAP_SSL_H</span>
<a href="#l11.53"></a><span id="l11.53"> </span>
<a href="#l11.54"></a><span id="l11.54"> /* ldap_ssl.h - prototypes for LDAP over SSL functions */</span>
<a href="#l11.55"></a><span id="l11.55"> </span>
<a href="#l11.56"></a><span id="l11.56"> #ifdef __cplusplus</span>
<a href="#l11.57"></a><span id="l11.57"> extern &quot;C&quot; {</span>
<a href="#l11.58"></a><span id="l11.58"> #endif</span>
<a href="#l11.59"></a><span id="l11.59"> </span>
<a href="#l11.60"></a><span id="l11.60"> /*</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">- * these three defines resolve the SSL strength </span>
<a href="#l11.62"></a><span id="l11.62" class="difflineplus">+ * these three defines resolve the SSL strength</span>
<a href="#l11.63"></a><span id="l11.63">  * setting auth weak, diables all cert checking</span>
<a href="#l11.64"></a><span id="l11.64">  * the CNCHECK tests for the man in the middle hack</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">- */ </span>
<a href="#l11.66"></a><span id="l11.66" class="difflineplus">+ */</span>
<a href="#l11.67"></a><span id="l11.67"> #define LDAPSSL_AUTH_WEAK       0</span>
<a href="#l11.68"></a><span id="l11.68"> #define LDAPSSL_AUTH_CERT       1</span>
<a href="#l11.69"></a><span id="l11.69"> #define LDAPSSL_AUTH_CNCHECK    2</span>
<a href="#l11.70"></a><span id="l11.70"> </span>
<a href="#l11.71"></a><span id="l11.71"> /*</span>
<a href="#l11.72"></a><span id="l11.72">  * an ExtendedRequest [LDAPv3] specifying the OID for the</span>
<a href="#l11.73"></a><span id="l11.73">  * Start TLS operation: RFC 2830</span>
<a href="#l11.74"></a><span id="l11.74">  */</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineat">@@ -86,37 +86,37 @@ int LDAP_CALL ldap_start_tls_s( LDAP *ld</span>
<a href="#l11.76"></a><span id="l11.76"> int LDAP_CALL ldapssl_install_routines( LDAP *ld );</span>
<a href="#l11.77"></a><span id="l11.77"> </span>
<a href="#l11.78"></a><span id="l11.78"> </span>
<a href="#l11.79"></a><span id="l11.79"> /* The next four functions initialize the security code for SSL</span>
<a href="#l11.80"></a><span id="l11.80">  * The first one ldapssl_client_init() does initialization for SSL only</span>
<a href="#l11.81"></a><span id="l11.81">  * The next one supports server authentication using clientauth_init()</span>
<a href="#l11.82"></a><span id="l11.82">  * and allows the caller to specify the ssl strength to use in order to</span>
<a href="#l11.83"></a><span id="l11.83">  * verify the servers's certificate.</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineminus">- * The next one supports ldapssl_clientauth_init() intializes security </span>
<a href="#l11.85"></a><span id="l11.85" class="difflineplus">+ * The next one supports ldapssl_clientauth_init() intializes security</span>
<a href="#l11.86"></a><span id="l11.86">  * for SSL for client authentication.  The third function initializes</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineminus">- * security for doing SSL with client authentication, and PKCS, that is, </span>
<a href="#l11.88"></a><span id="l11.88" class="difflineplus">+ * security for doing SSL with client authentication, and PKCS, that is,</span>
<a href="#l11.89"></a><span id="l11.89">  * the third function initializes the security module database (secmod.db).</span>
<a href="#l11.90"></a><span id="l11.90">  * The parameters are as follows:</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">- * const char *certdbpath - path to the cert file.  This can be a shortcut </span>
<a href="#l11.92"></a><span id="l11.92" class="difflineplus">+ * const char *certdbpath - path to the cert file.  This can be a shortcut</span>
<a href="#l11.93"></a><span id="l11.93">  *     to the directory name, if so cert7.db will be postfixed to the string.</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineminus">- * void *certdbhandle - Normally this is NULL.  This memory will need </span>
<a href="#l11.95"></a><span id="l11.95" class="difflineplus">+ * void *certdbhandle - Normally this is NULL.  This memory will need</span>
<a href="#l11.96"></a><span id="l11.96">  *     to be freed.</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineminus">- * int needkeydb - boolean.  Must be !=0 if client Authentification </span>
<a href="#l11.98"></a><span id="l11.98" class="difflineplus">+ * int needkeydb - boolean.  Must be !=0 if client Authentification</span>
<a href="#l11.99"></a><span id="l11.99">  *     is required</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineminus">- * char *keydbpath - path to the key database.  This can be a shortcut </span>
<a href="#l11.101"></a><span id="l11.101" class="difflineplus">+ * char *keydbpath - path to the key database.  This can be a shortcut</span>
<a href="#l11.102"></a><span id="l11.102">  *     to the directory name, if so key3.db will be postfixed to the string.</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineminus">- * void *keydbhandle - Normally this is NULL, This memory will need </span>
<a href="#l11.104"></a><span id="l11.104" class="difflineminus">- *     to be freed </span>
<a href="#l11.105"></a><span id="l11.105" class="difflineminus">- * int needsecmoddb - boolean.  Must be !=0 to assure that the correct </span>
<a href="#l11.106"></a><span id="l11.106" class="difflineplus">+ * void *keydbhandle - Normally this is NULL, This memory will need</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineplus">+ *     to be freed</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineplus">+ * int needsecmoddb - boolean.  Must be !=0 to assure that the correct</span>
<a href="#l11.109"></a><span id="l11.109">  *     security module is loaded into memory</span>
<a href="#l11.110"></a><span id="l11.110">  * char *secmodpath - path to the secmod.  This can be a shortcut to the</span>
<a href="#l11.111"></a><span id="l11.111">  *    directory name, if so secmod.db will be postfixed to the string.</span>
<a href="#l11.112"></a><span id="l11.112">  *</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineminus">- *  These three functions are mutually exclusive.  You can only call </span>
<a href="#l11.114"></a><span id="l11.114" class="difflineplus">+ *  These three functions are mutually exclusive.  You can only call</span>
<a href="#l11.115"></a><span id="l11.115">  *     one.  This means that, for a given process, you must call the</span>
<a href="#l11.116"></a><span id="l11.116">  *     appropriate initialization function for the life of the process.</span>
<a href="#l11.117"></a><span id="l11.117">  */</span>
<a href="#l11.118"></a><span id="l11.118"> </span>
<a href="#l11.119"></a><span id="l11.119"> </span>
<a href="#l11.120"></a><span id="l11.120"> /*</span>
<a href="#l11.121"></a><span id="l11.121">  * Initialize the secure parts (Security and SSL) of the runtime for use</span>
<a href="#l11.122"></a><span id="l11.122">  * by a client application.  This is only called once.</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineat">@@ -131,75 +131,75 @@ int LDAP_CALL ldapssl_client_init(</span>
<a href="#l11.124"></a><span id="l11.124">  * by a client application using server authentication.  This is only</span>
<a href="#l11.125"></a><span id="l11.125">  * called once.</span>
<a href="#l11.126"></a><span id="l11.126">  *</span>
<a href="#l11.127"></a><span id="l11.127">  * ldapssl_serverauth_init() is a server-authentication only version of</span>
<a href="#l11.128"></a><span id="l11.128">  * ldapssl_clientauth_init().  This function allows the sslstrength</span>
<a href="#l11.129"></a><span id="l11.129">  * to be passed in.  The sslstrength can take one of the following</span>
<a href="#l11.130"></a><span id="l11.130">  * values:</span>
<a href="#l11.131"></a><span id="l11.131">  *</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineminus">- *      LDAPSSL_AUTH_WEAK: indicate that you accept the server's </span>
<a href="#l11.133"></a><span id="l11.133" class="difflineplus">+ *      LDAPSSL_AUTH_WEAK: indicate that you accept the server's</span>
<a href="#l11.134"></a><span id="l11.134">  *                         certificate without checking the CA who</span>
<a href="#l11.135"></a><span id="l11.135">  *                         issued the certificate</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineminus">- *      LDAPSSL_AUTH_CERT: indicates that you accept the server's </span>
<a href="#l11.137"></a><span id="l11.137" class="difflineplus">+ *      LDAPSSL_AUTH_CERT: indicates that you accept the server's</span>
<a href="#l11.138"></a><span id="l11.138">  *                         certificate only if you trust the CA who</span>
<a href="#l11.139"></a><span id="l11.139">  *                         issued the certificate</span>
<a href="#l11.140"></a><span id="l11.140">  *      LDAPSSL_AUTH_CNCHECK:</span>
<a href="#l11.141"></a><span id="l11.141">  *                         indicates that you accept the server's</span>
<a href="#l11.142"></a><span id="l11.142">  *                         certificate only if you trust the CA who</span>
<a href="#l11.143"></a><span id="l11.143">  *                         issued the certificate and if the value</span>
<a href="#l11.144"></a><span id="l11.144">  *                         of the cn attribute is the DNS hostname</span>
<a href="#l11.145"></a><span id="l11.145">  *                         of the server.  If this option is selected,</span>
<a href="#l11.146"></a><span id="l11.146">  *			   please ensure that the &quot;defhost&quot; parameter</span>
<a href="#l11.147"></a><span id="l11.147" class="difflineminus">- *			   passed to ldapssl_init() consist of only </span>
<a href="#l11.148"></a><span id="l11.148" class="difflineplus">+ *			   passed to ldapssl_init() consist of only</span>
<a href="#l11.149"></a><span id="l11.149">  *			   one hostname and not a list of hosts.</span>
<a href="#l11.150"></a><span id="l11.150">  *			   Furthermore, the port number must be passed</span>
<a href="#l11.151"></a><span id="l11.151">  *			   via the &quot;defport&quot; parameter, and cannot</span>
<a href="#l11.152"></a><span id="l11.152" class="difflineminus">- *			   be passed via a host:port option. </span>
<a href="#l11.153"></a><span id="l11.153" class="difflineplus">+ *			   be passed via a host:port option.</span>
<a href="#l11.154"></a><span id="l11.154">  *</span>
<a href="#l11.155"></a><span id="l11.155">  * Returns 0 if all goes well.</span>
<a href="#l11.156"></a><span id="l11.156">  */</span>
<a href="#l11.157"></a><span id="l11.157"> </span>
<a href="#l11.158"></a><span id="l11.158"> int LDAP_CALL ldapssl_serverauth_init(</span>
<a href="#l11.159"></a><span id="l11.159">     const char *certdbpath, void *certdbhandle, const int sslstrength );</span>
<a href="#l11.160"></a><span id="l11.160"> </span>
<a href="#l11.161"></a><span id="l11.161"> /*</span>
<a href="#l11.162"></a><span id="l11.162">  * Initialize the secure parts (Security and SSL) of the runtime for use</span>
<a href="#l11.163"></a><span id="l11.163">  * by a client application that may want to do SSL client authentication.</span>
<a href="#l11.164"></a><span id="l11.164">  * Returns 0 if all goes well.</span>
<a href="#l11.165"></a><span id="l11.165">  */</span>
<a href="#l11.166"></a><span id="l11.166"> </span>
<a href="#l11.167"></a><span id="l11.167" class="difflineminus">-int LDAP_CALL ldapssl_clientauth_init( </span>
<a href="#l11.168"></a><span id="l11.168" class="difflineminus">-    const char *certdbpath, void *certdbhandle, </span>
<a href="#l11.169"></a><span id="l11.169" class="difflineplus">+int LDAP_CALL ldapssl_clientauth_init(</span>
<a href="#l11.170"></a><span id="l11.170" class="difflineplus">+    const char *certdbpath, void *certdbhandle,</span>
<a href="#l11.171"></a><span id="l11.171">     const int needkeydb, const char *keydbpath, void *keydbhandle );</span>
<a href="#l11.172"></a><span id="l11.172"> </span>
<a href="#l11.173"></a><span id="l11.173"> /*</span>
<a href="#l11.174"></a><span id="l11.174">  * Initialize the secure parts (Security and SSL) of the runtime for use</span>
<a href="#l11.175"></a><span id="l11.175">  * by a client application that may want to do SSL client authentication.</span>
<a href="#l11.176"></a><span id="l11.176">  *</span>
<a href="#l11.177"></a><span id="l11.177">  * Please see the description of the sslstrength value in the</span>
<a href="#l11.178"></a><span id="l11.178">  * ldapssl_serverauth_init() function above and note the potential</span>
<a href="#l11.179"></a><span id="l11.179" class="difflineminus">- * problems which can be caused by passing in wrong host &amp; portname </span>
<a href="#l11.180"></a><span id="l11.180" class="difflineplus">+ * problems which can be caused by passing in wrong host &amp; portname</span>
<a href="#l11.181"></a><span id="l11.181">  * values.  The same warning applies to the ldapssl_advclientauth_init()</span>
<a href="#l11.182"></a><span id="l11.182">  * function.</span>
<a href="#l11.183"></a><span id="l11.183">  *</span>
<a href="#l11.184"></a><span id="l11.184">  * Returns 0 if all goes well.</span>
<a href="#l11.185"></a><span id="l11.185">  */</span>
<a href="#l11.186"></a><span id="l11.186"> </span>
<a href="#l11.187"></a><span id="l11.187" class="difflineminus">-int LDAP_CALL ldapssl_advclientauth_init( </span>
<a href="#l11.188"></a><span id="l11.188" class="difflineminus">-    const char *certdbpath, void *certdbhandle, </span>
<a href="#l11.189"></a><span id="l11.189" class="difflineminus">-    const int needkeydb, const char *keydbpath, void *keydbhandle,  </span>
<a href="#l11.190"></a><span id="l11.190" class="difflineminus">-    const int needsecmoddb, const char *secmoddbpath, </span>
<a href="#l11.191"></a><span id="l11.191" class="difflineplus">+int LDAP_CALL ldapssl_advclientauth_init(</span>
<a href="#l11.192"></a><span id="l11.192" class="difflineplus">+    const char *certdbpath, void *certdbhandle,</span>
<a href="#l11.193"></a><span id="l11.193" class="difflineplus">+    const int needkeydb, const char *keydbpath, void *keydbhandle,</span>
<a href="#l11.194"></a><span id="l11.194" class="difflineplus">+    const int needsecmoddb, const char *secmoddbpath,</span>
<a href="#l11.195"></a><span id="l11.195">     const int sslstrength );</span>
<a href="#l11.196"></a><span id="l11.196"> </span>
<a href="#l11.197"></a><span id="l11.197"> </span>
<a href="#l11.198"></a><span id="l11.198"> </span>
<a href="#l11.199"></a><span id="l11.199"> /*</span>
<a href="#l11.200"></a><span id="l11.200">  * get a meaningful error string back from the security library</span>
<a href="#l11.201"></a><span id="l11.201" class="difflineminus">- * this function should be called, if ldap_err2string doesn't </span>
<a href="#l11.202"></a><span id="l11.202" class="difflineplus">+ * this function should be called, if ldap_err2string doesn't</span>
<a href="#l11.203"></a><span id="l11.203">  * identify the error code.</span>
<a href="#l11.204"></a><span id="l11.204">  */</span>
<a href="#l11.205"></a><span id="l11.205"> const char * LDAP_CALL ldapssl_err2string( const int prerrno );</span>
<a href="#l11.206"></a><span id="l11.206"> </span>
<a href="#l11.207"></a><span id="l11.207"> </span>
<a href="#l11.208"></a><span id="l11.208"> /*</span>
<a href="#l11.209"></a><span id="l11.209">  * Enable SSL client authentication on the given ld.</span>
<a href="#l11.210"></a><span id="l11.210">  * Returns 0 if all goes well.</span>
<a href="#l11.211"></a><span id="l11.211" class="difflineat">@@ -210,17 +210,17 @@ int LDAP_CALL ldapssl_enable_clientauth(</span>
<a href="#l11.212"></a><span id="l11.212"> /*</span>
<a href="#l11.213"></a><span id="l11.213">  * Set the SSL strength for an existing SSL-enabled LDAP session handle.</span>
<a href="#l11.214"></a><span id="l11.214">  *</span>
<a href="#l11.215"></a><span id="l11.215">  * See the description of ldapssl_serverauth_init() above for valid</span>
<a href="#l11.216"></a><span id="l11.216">  * sslstrength values. If ld is NULL, the default for new LDAP session</span>
<a href="#l11.217"></a><span id="l11.217">  * handles is set.</span>
<a href="#l11.218"></a><span id="l11.218">  *</span>
<a href="#l11.219"></a><span id="l11.219">  * Returns 0 if all goes well.</span>
<a href="#l11.220"></a><span id="l11.220" class="difflineminus">- */ </span>
<a href="#l11.221"></a><span id="l11.221" class="difflineplus">+ */</span>
<a href="#l11.222"></a><span id="l11.222"> int LDAP_CALL ldapssl_set_strength( LDAP *ld, int sslstrength );</span>
<a href="#l11.223"></a><span id="l11.223"> </span>
<a href="#l11.224"></a><span id="l11.224"> </span>
<a href="#l11.225"></a><span id="l11.225"> /*</span>
<a href="#l11.226"></a><span id="l11.226">  * Set or get SSL options for an existing SSL-enabled LDAP session handle.</span>
<a href="#l11.227"></a><span id="l11.227">  * If ld is NULL, the default options used for all future LDAP SSL sessions</span>
<a href="#l11.228"></a><span id="l11.228">  * are the ones affected. The option values are specific to the underlying</span>
<a href="#l11.229"></a><span id="l11.229">  * SSL provider; see ssl.h within the Network Security Services (NSS)</span>
<a href="#l11.230"></a><span id="l11.230" class="difflineat">@@ -237,17 +237,17 @@ int LDAP_CALL ldapssl_get_option( LDAP *</span>
<a href="#l11.231"></a><span id="l11.231"> /*</span>
<a href="#l11.232"></a><span id="l11.232">  * Import the file descriptor corresponding to the socket of an already</span>
<a href="#l11.233"></a><span id="l11.233">  * open LDAP connection into SSL, and update the socket and session</span>
<a href="#l11.234"></a><span id="l11.234">  * information accordingly. Returns 0 if all goes well.</span>
<a href="#l11.235"></a><span id="l11.235">  */</span>
<a href="#l11.236"></a><span id="l11.236"> int LDAP_CALL ldapssl_import_fd ( LDAP *ld, int secure );</span>
<a href="#l11.237"></a><span id="l11.237"> </span>
<a href="#l11.238"></a><span id="l11.238"> /*</span>
<a href="#l11.239"></a><span id="l11.239" class="difflineminus">- * Reset an LDAP session from SSL to a non-secure status. Basically, </span>
<a href="#l11.240"></a><span id="l11.240" class="difflineplus">+ * Reset an LDAP session from SSL to a non-secure status. Basically,</span>
<a href="#l11.241"></a><span id="l11.241">  * this function undoes the work done by ldapssl_install_routines.</span>
<a href="#l11.242"></a><span id="l11.242">  * Returns 0 if all goes well.</span>
<a href="#l11.243"></a><span id="l11.243">  */</span>
<a href="#l11.244"></a><span id="l11.244"> int LDAP_CALL ldapssl_reset_to_nonsecure ( LDAP *ld );</span>
<a href="#l11.245"></a><span id="l11.245"> </span>
<a href="#l11.246"></a><span id="l11.246"> #ifdef __cplusplus</span>
<a href="#l11.247"></a><span id="l11.247"> }</span>
<a href="#l11.248"></a><span id="l11.248"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/ldap/c-sdk/include/ldaplog.h</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldaplog.h</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l12.4"></a><span id="l12.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l12.5"></a><span id="l12.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">- * </span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l12.8"></a><span id="l12.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l12.9"></a><span id="l12.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+ *</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l12.14"></a><span id="l12.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">- * </span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+ *</span>
<a href="#l12.17"></a><span id="l12.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l12.18"></a><span id="l12.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l12.19"></a><span id="l12.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l12.20"></a><span id="l12.20">  * License.</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">- * </span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+ *</span>
<a href="#l12.23"></a><span id="l12.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l12.24"></a><span id="l12.24">  * March 31, 1998.</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">- * </span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+ *</span>
<a href="#l12.27"></a><span id="l12.27">  * The Initial Developer of the Original Code is</span>
<a href="#l12.28"></a><span id="l12.28">  * Netscape Communications Corporation.</span>
<a href="#l12.29"></a><span id="l12.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l12.30"></a><span id="l12.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">- * </span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+ *</span>
<a href="#l12.33"></a><span id="l12.33">  * Contributor(s):</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">- * </span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+ *</span>
<a href="#l12.36"></a><span id="l12.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l12.37"></a><span id="l12.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l12.38"></a><span id="l12.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l12.39"></a><span id="l12.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l12.40"></a><span id="l12.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l12.41"></a><span id="l12.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l12.42"></a><span id="l12.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l12.43"></a><span id="l12.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l12.44"></a><span id="l12.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l12.45"></a><span id="l12.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l12.46"></a><span id="l12.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">- * </span>
<a href="#l12.48"></a><span id="l12.48" class="difflineplus">+ *</span>
<a href="#l12.49"></a><span id="l12.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l12.50"></a><span id="l12.50"> </span>
<a href="#l12.51"></a><span id="l12.51"> #ifndef _LDAPLOG_H</span>
<a href="#l12.52"></a><span id="l12.52"> #define _LDAPLOG_H</span>
<a href="#l12.53"></a><span id="l12.53"> </span>
<a href="#l12.54"></a><span id="l12.54"> #ifdef __cplusplus</span>
<a href="#l12.55"></a><span id="l12.55"> extern &quot;C&quot; {</span>
<a href="#l12.56"></a><span id="l12.56"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/ldap/c-sdk/include/ldappr.h</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldappr.h</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l13.4"></a><span id="l13.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l13.5"></a><span id="l13.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">- * </span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+ *</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l13.14"></a><span id="l13.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">- * </span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+ *</span>
<a href="#l13.17"></a><span id="l13.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l13.18"></a><span id="l13.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l13.19"></a><span id="l13.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l13.20"></a><span id="l13.20">  * License.</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">- * </span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+ *</span>
<a href="#l13.23"></a><span id="l13.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l13.24"></a><span id="l13.24">  * March 31, 1998.</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineminus">- * </span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+ *</span>
<a href="#l13.27"></a><span id="l13.27">  * The Initial Developer of the Original Code is</span>
<a href="#l13.28"></a><span id="l13.28">  * Netscape Communications Corporation.</span>
<a href="#l13.29"></a><span id="l13.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l13.30"></a><span id="l13.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineminus">- * </span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+ *</span>
<a href="#l13.33"></a><span id="l13.33">  * Contributor(s):</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineminus">- * </span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+ *</span>
<a href="#l13.36"></a><span id="l13.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l13.37"></a><span id="l13.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l13.38"></a><span id="l13.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l13.39"></a><span id="l13.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l13.40"></a><span id="l13.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l13.41"></a><span id="l13.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l13.42"></a><span id="l13.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l13.43"></a><span id="l13.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l13.44"></a><span id="l13.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l13.45"></a><span id="l13.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l13.46"></a><span id="l13.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineminus">- * </span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+ *</span>
<a href="#l13.49"></a><span id="l13.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l13.50"></a><span id="l13.50"> </span>
<a href="#l13.51"></a><span id="l13.51"> #ifndef LDAP_PR_H</span>
<a href="#l13.52"></a><span id="l13.52"> #define LDAP_PR_H</span>
<a href="#l13.53"></a><span id="l13.53"> </span>
<a href="#l13.54"></a><span id="l13.54"> #include &quot;nspr.h&quot;</span>
<a href="#l13.55"></a><span id="l13.55"> </span>
<a href="#l13.56"></a><span id="l13.56"> /*</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineat">@@ -250,17 +250,17 @@ int LDAP_CALL prldap_get_default_socket_</span>
<a href="#l13.58"></a><span id="l13.58">  * If ld is NULL, LDAP_PARAM_ERROR is returned.</span>
<a href="#l13.59"></a><span id="l13.59">  *</span>
<a href="#l13.60"></a><span id="l13.60">  * Returns an LDAP API error code (LDAP_SUCCESS if all goes well, in</span>
<a href="#l13.61"></a><span id="l13.61">  * which case the fields in the structure that soip points to are filled in).</span>
<a href="#l13.62"></a><span id="l13.62">  */</span>
<a href="#l13.63"></a><span id="l13.63"> int LDAP_CALL prldap_set_default_socket_info( LDAP *ld, PRLDAPSocketInfo *soip );</span>
<a href="#l13.64"></a><span id="l13.64"> </span>
<a href="#l13.65"></a><span id="l13.65"> /* Function: prldap_is_installed()</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineminus">- * Check if NSPR routine is installed </span>
<a href="#l13.67"></a><span id="l13.67" class="difflineplus">+ * Check if NSPR routine is installed</span>
<a href="#l13.68"></a><span id="l13.68">  */</span>
<a href="#l13.69"></a><span id="l13.69"> PRBool prldap_is_installed( LDAP *ld );</span>
<a href="#l13.70"></a><span id="l13.70"> </span>
<a href="#l13.71"></a><span id="l13.71"> /* Function: prldap_import_connection().</span>
<a href="#l13.72"></a><span id="l13.72">  * Given a ldap handle with connection already done with ldap_init()</span>
<a href="#l13.73"></a><span id="l13.73">  * installs NSPR routines and imports the original connection info.</span>
<a href="#l13.74"></a><span id="l13.74">  *</span>
<a href="#l13.75"></a><span id="l13.75">  * Returns an LDAP API error code (LDAP_SUCCESS if all goes well).</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/ldap/c-sdk/include/ldaprot.h</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldaprot.h</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l14.4"></a><span id="l14.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l14.5"></a><span id="l14.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">- * </span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+ *</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l14.14"></a><span id="l14.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">- * </span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+ *</span>
<a href="#l14.17"></a><span id="l14.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l14.18"></a><span id="l14.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l14.19"></a><span id="l14.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l14.20"></a><span id="l14.20">  * License.</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineminus">- * </span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+ *</span>
<a href="#l14.23"></a><span id="l14.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l14.24"></a><span id="l14.24">  * March 31, 1998.</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">- * </span>
<a href="#l14.26"></a><span id="l14.26" class="difflineplus">+ *</span>
<a href="#l14.27"></a><span id="l14.27">  * The Initial Developer of the Original Code is</span>
<a href="#l14.28"></a><span id="l14.28">  * Netscape Communications Corporation.</span>
<a href="#l14.29"></a><span id="l14.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l14.30"></a><span id="l14.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">- * </span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+ *</span>
<a href="#l14.33"></a><span id="l14.33">  * Contributor(s):</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineminus">- * </span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+ *</span>
<a href="#l14.36"></a><span id="l14.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l14.37"></a><span id="l14.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l14.38"></a><span id="l14.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l14.39"></a><span id="l14.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l14.40"></a><span id="l14.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l14.41"></a><span id="l14.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l14.42"></a><span id="l14.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l14.43"></a><span id="l14.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l14.44"></a><span id="l14.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l14.45"></a><span id="l14.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l14.46"></a><span id="l14.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineminus">- * </span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+ *</span>
<a href="#l14.49"></a><span id="l14.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l14.50"></a><span id="l14.50"> </span>
<a href="#l14.51"></a><span id="l14.51"> #ifndef _LDAPROT_H</span>
<a href="#l14.52"></a><span id="l14.52"> #define _LDAPROT_H</span>
<a href="#l14.53"></a><span id="l14.53"> </span>
<a href="#l14.54"></a><span id="l14.54"> #ifdef __cplusplus</span>
<a href="#l14.55"></a><span id="l14.55"> extern &quot;C&quot; {</span>
<a href="#l14.56"></a><span id="l14.56"> #endif</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineat">@@ -55,17 +55,17 @@ extern &quot;C&quot; {</span>
<a href="#l14.58"></a><span id="l14.58"> </span>
<a href="#l14.59"></a><span id="l14.59"> #define LDAP_URL_PREFIX		&quot;ldap://&quot;</span>
<a href="#l14.60"></a><span id="l14.60"> #define LDAP_URL_PREFIX_LEN	7</span>
<a href="#l14.61"></a><span id="l14.61"> #define LDAPS_URL_PREFIX	&quot;ldaps://&quot;</span>
<a href="#l14.62"></a><span id="l14.62"> #define LDAPS_URL_PREFIX_LEN	8</span>
<a href="#l14.63"></a><span id="l14.63"> #define LDAP_REF_STR		&quot;Referral:\n&quot;</span>
<a href="#l14.64"></a><span id="l14.64"> #define LDAP_REF_STR_LEN	10</span>
<a href="#l14.65"></a><span id="l14.65"> </span>
<a href="#l14.66"></a><span id="l14.66" class="difflineminus">-/* </span>
<a href="#l14.67"></a><span id="l14.67" class="difflineplus">+/*</span>
<a href="#l14.68"></a><span id="l14.68">  * specific LDAP instantiations of BER types we know about</span>
<a href="#l14.69"></a><span id="l14.69">  */</span>
<a href="#l14.70"></a><span id="l14.70"> </span>
<a href="#l14.71"></a><span id="l14.71"> /* general stuff */</span>
<a href="#l14.72"></a><span id="l14.72"> #define LDAP_TAG_MESSAGE	0x30L	/* tag is 16 + constructed bit */</span>
<a href="#l14.73"></a><span id="l14.73"> #define OLD_LDAP_TAG_MESSAGE	0x10L	/* forgot the constructed bit  */</span>
<a href="#l14.74"></a><span id="l14.74"> #define LDAP_TAG_MSGID		0x02L   /* INTEGER */</span>
<a href="#l14.75"></a><span id="l14.75"> #define LDAP_TAG_LDAPDN		0x04L	/* OCTET STRING */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/ldap/c-sdk/include/ldif.h</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/ldap/c-sdk/include/ldif.h</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l15.4"></a><span id="l15.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l15.5"></a><span id="l15.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">- * </span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l15.10"></a><span id="l15.10" class="difflineplus">+ *</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l15.14"></a><span id="l15.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">- * </span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+ *</span>
<a href="#l15.17"></a><span id="l15.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l15.18"></a><span id="l15.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l15.19"></a><span id="l15.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l15.20"></a><span id="l15.20">  * License.</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">- * </span>
<a href="#l15.22"></a><span id="l15.22" class="difflineplus">+ *</span>
<a href="#l15.23"></a><span id="l15.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l15.24"></a><span id="l15.24">  * March 31, 1998.</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">- * </span>
<a href="#l15.26"></a><span id="l15.26" class="difflineplus">+ *</span>
<a href="#l15.27"></a><span id="l15.27">  * The Initial Developer of the Original Code is</span>
<a href="#l15.28"></a><span id="l15.28">  * Netscape Communications Corporation.</span>
<a href="#l15.29"></a><span id="l15.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l15.30"></a><span id="l15.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">- * </span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+ *</span>
<a href="#l15.33"></a><span id="l15.33">  * Contributor(s):</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineminus">- * </span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+ *</span>
<a href="#l15.36"></a><span id="l15.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l15.37"></a><span id="l15.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l15.38"></a><span id="l15.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l15.39"></a><span id="l15.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l15.40"></a><span id="l15.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l15.41"></a><span id="l15.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l15.42"></a><span id="l15.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l15.43"></a><span id="l15.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l15.44"></a><span id="l15.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l15.45"></a><span id="l15.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l15.46"></a><span id="l15.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">- * </span>
<a href="#l15.48"></a><span id="l15.48" class="difflineplus">+ *</span>
<a href="#l15.49"></a><span id="l15.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l15.50"></a><span id="l15.50"> </span>
<a href="#l15.51"></a><span id="l15.51"> /*</span>
<a href="#l15.52"></a><span id="l15.52">  * Copyright (c) 1996 Regents of the University of Michigan.</span>
<a href="#l15.53"></a><span id="l15.53">  * All rights reserved.</span>
<a href="#l15.54"></a><span id="l15.54">  *</span>
<a href="#l15.55"></a><span id="l15.55">  * Redistribution and use in source and binary forms are permitted</span>
<a href="#l15.56"></a><span id="l15.56">  * provided that this notice is preserved and that due credit is given</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineat">@@ -78,17 +78,17 @@ extern &quot;C&quot; {</span>
<a href="#l15.58"></a><span id="l15.58">  * first newline + base64 value + continued lines.  Each continued line</span>
<a href="#l15.59"></a><span id="l15.59">  * needs room for a newline and a leading space character.</span>
<a href="#l15.60"></a><span id="l15.60">  */</span>
<a href="#l15.61"></a><span id="l15.61"> #define LDIF_SIZE_NEEDED(tlen,vlen) \</span>
<a href="#l15.62"></a><span id="l15.62">     ((tlen) + 4 + LDIF_BASE64_LEN(vlen) \</span>
<a href="#l15.63"></a><span id="l15.63">     + ((LDIF_BASE64_LEN(vlen) + tlen + 3) / LDIF_MAX_LINE_WIDTH * 2 ))</span>
<a href="#l15.64"></a><span id="l15.64"> </span>
<a href="#l15.65"></a><span id="l15.65"> /*</span>
<a href="#l15.66"></a><span id="l15.66" class="difflineminus">- * Options for ldif_put_type_and_value_with_options() and </span>
<a href="#l15.67"></a><span id="l15.67" class="difflineplus">+ * Options for ldif_put_type_and_value_with_options() and</span>
<a href="#l15.68"></a><span id="l15.68">  * ldif_type_and_value_with_options().</span>
<a href="#l15.69"></a><span id="l15.69">  */</span>
<a href="#l15.70"></a><span id="l15.70"> #define LDIF_OPT_NOWRAP			0x01UL</span>
<a href="#l15.71"></a><span id="l15.71"> #define LDIF_OPT_VALUE_IS_URL		0x02UL</span>
<a href="#l15.72"></a><span id="l15.72"> #define LDIF_OPT_MINIMAL_ENCODING	0x04UL</span>
<a href="#l15.73"></a><span id="l15.73"> </span>
<a href="#l15.74"></a><span id="l15.74"> int ldif_parse_line( char *line, char **type, char **value, int *vlen);</span>
<a href="#l15.75"></a><span id="l15.75"> char * ldif_getline( char **next );</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/ldap/c-sdk/include/portable.h</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/ldap/c-sdk/include/portable.h</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l16.4"></a><span id="l16.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l16.5"></a><span id="l16.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">- * </span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+ *</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l16.14"></a><span id="l16.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">- * </span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+ *</span>
<a href="#l16.17"></a><span id="l16.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l16.18"></a><span id="l16.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l16.19"></a><span id="l16.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l16.20"></a><span id="l16.20">  * License.</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">- * </span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+ *</span>
<a href="#l16.23"></a><span id="l16.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l16.24"></a><span id="l16.24">  * March 31, 1998.</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">- * </span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+ *</span>
<a href="#l16.27"></a><span id="l16.27">  * The Initial Developer of the Original Code is</span>
<a href="#l16.28"></a><span id="l16.28">  * Netscape Communications Corporation.</span>
<a href="#l16.29"></a><span id="l16.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l16.30"></a><span id="l16.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">- * </span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+ *</span>
<a href="#l16.33"></a><span id="l16.33">  * Contributor(s):</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">- * </span>
<a href="#l16.35"></a><span id="l16.35" class="difflineplus">+ *</span>
<a href="#l16.36"></a><span id="l16.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l16.37"></a><span id="l16.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l16.38"></a><span id="l16.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l16.39"></a><span id="l16.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l16.40"></a><span id="l16.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l16.41"></a><span id="l16.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l16.42"></a><span id="l16.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l16.43"></a><span id="l16.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l16.44"></a><span id="l16.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l16.45"></a><span id="l16.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l16.46"></a><span id="l16.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">- * </span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+ *</span>
<a href="#l16.49"></a><span id="l16.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l16.50"></a><span id="l16.50"> </span>
<a href="#l16.51"></a><span id="l16.51"> /*</span>
<a href="#l16.52"></a><span id="l16.52">  * Copyright (c) 1994 Regents of the University of Michigan.</span>
<a href="#l16.53"></a><span id="l16.53">  * All rights reserved.</span>
<a href="#l16.54"></a><span id="l16.54">  *</span>
<a href="#l16.55"></a><span id="l16.55">  * Redistribution and use in source and binary forms are permitted</span>
<a href="#l16.56"></a><span id="l16.56">  * provided that this notice is preserved and that due credit is given</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineat">@@ -136,32 +136,32 @@</span>
<a href="#l16.58"></a><span id="l16.58"> #define HAVE_SETPWFILE</span>
<a href="#l16.59"></a><span id="l16.59"> #endif</span>
<a href="#l16.60"></a><span id="l16.60"> #endif</span>
<a href="#l16.61"></a><span id="l16.61"> </span>
<a href="#l16.62"></a><span id="l16.62"> /*</span>
<a href="#l16.63"></a><span id="l16.63">  * Are sys_errlist and sys_nerr declared in stdio.h?</span>
<a href="#l16.64"></a><span id="l16.64">  */</span>
<a href="#l16.65"></a><span id="l16.65"> #ifndef SYSERRLIST_IN_STDIO</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineminus">-#if defined( freebsd ) </span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+#if defined( freebsd )</span>
<a href="#l16.68"></a><span id="l16.68"> #define SYSERRLIST_IN_STDIO</span>
<a href="#l16.69"></a><span id="l16.69"> #endif</span>
<a href="#l16.70"></a><span id="l16.70"> #endif</span>
<a href="#l16.71"></a><span id="l16.71"> </span>
<a href="#l16.72"></a><span id="l16.72"> </span>
<a href="#l16.73"></a><span id="l16.73"> /*</span>
<a href="#l16.74"></a><span id="l16.74">  * Is snprintf() part of the standard C runtime library?</span>
<a href="#l16.75"></a><span id="l16.75">  */</span>
<a href="#l16.76"></a><span id="l16.76"> #if defined(_WINDOWS)</span>
<a href="#l16.77"></a><span id="l16.77"> #define snprintf _snprintf</span>
<a href="#l16.78"></a><span id="l16.78"> #endif</span>
<a href="#l16.79"></a><span id="l16.79"> </span>
<a href="#l16.80"></a><span id="l16.80"> </span>
<a href="#l16.81"></a><span id="l16.81"> /*</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineminus">- * Async IO.  Use a non blocking implementation of connect() and </span>
<a href="#l16.83"></a><span id="l16.83" class="difflineplus">+ * Async IO.  Use a non blocking implementation of connect() and</span>
<a href="#l16.84"></a><span id="l16.84">  * dns functions</span>
<a href="#l16.85"></a><span id="l16.85">  */</span>
<a href="#l16.86"></a><span id="l16.86"> #if !defined(LDAP_ASYNC_IO)</span>
<a href="#l16.87"></a><span id="l16.87"> #if !defined(_WINDOWS) &amp;&amp; !defined(macintosh)</span>
<a href="#l16.88"></a><span id="l16.88"> #define LDAP_ASYNC_IO</span>
<a href="#l16.89"></a><span id="l16.89"> #endif /* _WINDOWS */</span>
<a href="#l16.90"></a><span id="l16.90"> #endif</span>
<a href="#l16.91"></a><span id="l16.91"> </span>
<a href="#l16.92"></a><span id="l16.92" class="difflineat">@@ -186,17 +186,17 @@</span>
<a href="#l16.93"></a><span id="l16.93"> </span>
<a href="#l16.94"></a><span id="l16.94"> </span>
<a href="#l16.95"></a><span id="l16.95"> /*</span>
<a href="#l16.96"></a><span id="l16.96">  * for connect() -- must we block signals when calling connect()?  This</span>
<a href="#l16.97"></a><span id="l16.97">  * is necessary on some buggy UNIXes.</span>
<a href="#l16.98"></a><span id="l16.98">  */</span>
<a href="#l16.99"></a><span id="l16.99"> #if !defined(NSLDAPI_CONNECT_MUST_NOT_BE_INTERRUPTED) &amp;&amp; \</span>
<a href="#l16.100"></a><span id="l16.100"> 	( defined(AIX) || defined(IRIX) || defined(HPUX) || defined(SUNOS4) \</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineminus">-	|| defined(SOLARIS) || defined(OSF1) ||defined(freebsd)) </span>
<a href="#l16.102"></a><span id="l16.102" class="difflineplus">+	|| defined(SOLARIS) || defined(OSF1) ||defined(freebsd))</span>
<a href="#l16.103"></a><span id="l16.103"> #define NSLDAPI_CONNECT_MUST_NOT_BE_INTERRUPTED</span>
<a href="#l16.104"></a><span id="l16.104"> #endif</span>
<a href="#l16.105"></a><span id="l16.105"> </span>
<a href="#l16.106"></a><span id="l16.106"> /*</span>
<a href="#l16.107"></a><span id="l16.107">  * On most platforms, sigprocmask() works fine even in multithreaded code.</span>
<a href="#l16.108"></a><span id="l16.108">  * But not everywhere.</span>
<a href="#l16.109"></a><span id="l16.109">  */</span>
<a href="#l16.110"></a><span id="l16.110"> #ifdef AIX</span>
<a href="#l16.111"></a><span id="l16.111" class="difflineat">@@ -257,17 +257,17 @@ int strncasecmp(const char *, const char</span>
<a href="#l16.112"></a><span id="l16.112"> #define STRTOK( s1, s2, l )		strtok( s1, s2 )</span>
<a href="#l16.113"></a><span id="l16.113"> #elif defined(XP_BEOS)</span>
<a href="#l16.114"></a><span id="l16.114"> #define GETHOSTBYNAME( n, r, b, l, e )  gethostbyname( n )</span>
<a href="#l16.115"></a><span id="l16.115"> #define NSLDAPI_CTIME( c, b, l )                ctime_r( c, b )</span>
<a href="#l16.116"></a><span id="l16.116"> #define STRTOK( s1, s2, l )		strtok_r( s1, s2, l )</span>
<a href="#l16.117"></a><span id="l16.117"> #define HAVE_STRTOK_R</span>
<a href="#l16.118"></a><span id="l16.118"> #else /* UNIX */</span>
<a href="#l16.119"></a><span id="l16.119"> #if (defined(AIX) &amp;&amp; defined(_THREAD_SAFE)) || defined(OSF1)</span>
<a href="#l16.120"></a><span id="l16.120" class="difflineminus">-#define NSLDAPI_NETDB_BUF_SIZE	 sizeof(struct protoent_data) </span>
<a href="#l16.121"></a><span id="l16.121" class="difflineplus">+#define NSLDAPI_NETDB_BUF_SIZE	 sizeof(struct protoent_data)</span>
<a href="#l16.122"></a><span id="l16.122"> #else</span>
<a href="#l16.123"></a><span id="l16.123"> #define NSLDAPI_NETDB_BUF_SIZE	1024</span>
<a href="#l16.124"></a><span id="l16.124"> #endif</span>
<a href="#l16.125"></a><span id="l16.125"> </span>
<a href="#l16.126"></a><span id="l16.126"> #if defined(sgi) || defined(HPUX9) || defined(SCOOS) || \</span>
<a href="#l16.127"></a><span id="l16.127">     defined(UNIXWARE) || defined(SUNOS4) || defined(SNI) || defined(BSDI) || \</span>
<a href="#l16.128"></a><span id="l16.128">     defined(NCR) || defined(OSF1) || defined(NEC) || defined(VMS) || \</span>
<a href="#l16.129"></a><span id="l16.129">     ( defined(HPUX10) &amp;&amp; !defined(_REENTRANT)) || defined(HPUX11) || \</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/ldap/c-sdk/include/proto-ntutil.h</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/ldap/c-sdk/include/proto-ntutil.h</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -1,94 +1,94 @@</span>
<a href="#l17.4"></a><span id="l17.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l17.5"></a><span id="l17.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">- * </span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l17.10"></a><span id="l17.10" class="difflineplus">+ *</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l17.14"></a><span id="l17.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">- * </span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+ *</span>
<a href="#l17.17"></a><span id="l17.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l17.18"></a><span id="l17.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l17.19"></a><span id="l17.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l17.20"></a><span id="l17.20">  * License.</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">- * </span>
<a href="#l17.22"></a><span id="l17.22" class="difflineplus">+ *</span>
<a href="#l17.23"></a><span id="l17.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l17.24"></a><span id="l17.24">  * March 31, 1998.</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">- * </span>
<a href="#l17.26"></a><span id="l17.26" class="difflineplus">+ *</span>
<a href="#l17.27"></a><span id="l17.27">  * The Initial Developer of the Original Code is</span>
<a href="#l17.28"></a><span id="l17.28">  * Netscape Communications Corporation.</span>
<a href="#l17.29"></a><span id="l17.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l17.30"></a><span id="l17.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">- * </span>
<a href="#l17.32"></a><span id="l17.32" class="difflineplus">+ *</span>
<a href="#l17.33"></a><span id="l17.33">  * Contributor(s):</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">- * </span>
<a href="#l17.35"></a><span id="l17.35" class="difflineplus">+ *</span>
<a href="#l17.36"></a><span id="l17.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l17.37"></a><span id="l17.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l17.38"></a><span id="l17.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l17.39"></a><span id="l17.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l17.40"></a><span id="l17.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l17.41"></a><span id="l17.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l17.42"></a><span id="l17.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l17.43"></a><span id="l17.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l17.44"></a><span id="l17.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l17.45"></a><span id="l17.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l17.46"></a><span id="l17.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">- * </span>
<a href="#l17.48"></a><span id="l17.48" class="difflineplus">+ *</span>
<a href="#l17.49"></a><span id="l17.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l17.50"></a><span id="l17.50"> </span>
<a href="#l17.51"></a><span id="l17.51"> /******************************************************</span>
<a href="#l17.52"></a><span id="l17.52">  *</span>
<a href="#l17.53"></a><span id="l17.53">  *  proto-ntutil.h - Prototypes for utility functions used</span>
<a href="#l17.54"></a><span id="l17.54">  *  throughout slapd on NT.</span>
<a href="#l17.55"></a><span id="l17.55">  *</span>
<a href="#l17.56"></a><span id="l17.56">  ******************************************************/</span>
<a href="#l17.57"></a><span id="l17.57"> #if defined( _WINDOWS )</span>
<a href="#l17.58"></a><span id="l17.58"> </span>
<a href="#l17.59"></a><span id="l17.59"> #ifndef _PROTO_NTUTIL</span>
<a href="#l17.60"></a><span id="l17.60"> #define _PROTO_NTUTIL</span>
<a href="#l17.61"></a><span id="l17.61"> </span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-/* </span>
<a href="#l17.63"></a><span id="l17.63" class="difflineplus">+/*</span>
<a href="#l17.64"></a><span id="l17.64">  *</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">- * ntreg.c  </span>
<a href="#l17.66"></a><span id="l17.66" class="difflineplus">+ * ntreg.c</span>
<a href="#l17.67"></a><span id="l17.67">  *</span>
<a href="#l17.68"></a><span id="l17.68">  */</span>
<a href="#l17.69"></a><span id="l17.69"> extern int SlapdGetRegSZ( LPTSTR lpszRegKey, LPSTR lpszValueName, LPTSTR lpszValue );</span>
<a href="#l17.70"></a><span id="l17.70"> </span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-/* </span>
<a href="#l17.72"></a><span id="l17.72" class="difflineplus">+/*</span>
<a href="#l17.73"></a><span id="l17.73">  *</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">- * getopt.c  </span>
<a href="#l17.75"></a><span id="l17.75" class="difflineplus">+ * getopt.c</span>
<a href="#l17.76"></a><span id="l17.76">  *</span>
<a href="#l17.77"></a><span id="l17.77">  */</span>
<a href="#l17.78"></a><span id="l17.78"> extern int getopt (int argc, char *const *argv, const char *optstring);</span>
<a href="#l17.79"></a><span id="l17.79"> </span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-/* </span>
<a href="#l17.81"></a><span id="l17.81" class="difflineplus">+/*</span>
<a href="#l17.82"></a><span id="l17.82">  *</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">- * ntevent.c  </span>
<a href="#l17.84"></a><span id="l17.84" class="difflineplus">+ * ntevent.c</span>
<a href="#l17.85"></a><span id="l17.85">  *</span>
<a href="#l17.86"></a><span id="l17.86">  */</span>
<a href="#l17.87"></a><span id="l17.87"> extern BOOL MultipleInstances();</span>
<a href="#l17.88"></a><span id="l17.88"> extern BOOL SlapdIsAService();</span>
<a href="#l17.89"></a><span id="l17.89"> extern void InitializeSlapdLogging( LPTSTR lpszRegLocation, LPTSTR lpszEventLogName, LPTSTR lpszMessageFile );</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineminus">-extern void ReportSlapdEvent(WORD wEventType, DWORD dwIdEvent, WORD wNumInsertStrings, </span>
<a href="#l17.91"></a><span id="l17.91" class="difflineplus">+extern void ReportSlapdEvent(WORD wEventType, DWORD dwIdEvent, WORD wNumInsertStrings,</span>
<a href="#l17.92"></a><span id="l17.92"> 						char *pszStrings);</span>
<a href="#l17.93"></a><span id="l17.93"> extern BOOL ReportSlapdStatusToSCMgr(</span>
<a href="#l17.94"></a><span id="l17.94"> 					SERVICE_STATUS *serviceStatus,</span>
<a href="#l17.95"></a><span id="l17.95"> 					SERVICE_STATUS_HANDLE serviceStatusHandle,</span>
<a href="#l17.96"></a><span id="l17.96"> 					HANDLE Event,</span>
<a href="#l17.97"></a><span id="l17.97"> 					DWORD dwCurrentState,</span>
<a href="#l17.98"></a><span id="l17.98">                     DWORD dwWin32ExitCode,</span>
<a href="#l17.99"></a><span id="l17.99">                     DWORD dwCheckPoint,</span>
<a href="#l17.100"></a><span id="l17.100">                     DWORD dwWaitHint);</span>
<a href="#l17.101"></a><span id="l17.101"> extern void WINAPI SlapdServiceCtrlHandler(DWORD dwOpcode);</span>
<a href="#l17.102"></a><span id="l17.102"> extern BOOL SlapdGetServerNameFromCmdline(char *szServerName, char *szCmdLine);</span>
<a href="#l17.103"></a><span id="l17.103"> </span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-/* </span>
<a href="#l17.105"></a><span id="l17.105" class="difflineplus">+/*</span>
<a href="#l17.106"></a><span id="l17.106">  *</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">- * ntgetpassword.c  </span>
<a href="#l17.108"></a><span id="l17.108" class="difflineplus">+ * ntgetpassword.c</span>
<a href="#l17.109"></a><span id="l17.109">  *</span>
<a href="#l17.110"></a><span id="l17.110">  */</span>
<a href="#l17.111"></a><span id="l17.111"> #ifdef NET_SSL</span>
<a href="#l17.112"></a><span id="l17.112"> extern char *Slapd_GetPassword();</span>
<a href="#l17.113"></a><span id="l17.113"> #ifdef FORTEZZA</span>
<a href="#l17.114"></a><span id="l17.114"> extern char *Slapd_GetFortezzaPIN();</span>
<a href="#l17.115"></a><span id="l17.115"> #endif</span>
<a href="#l17.116"></a><span id="l17.116"> extern void CenterDialog(HWND hwndParent, HWND hwndDialog);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/ldap/c-sdk/include/regex.h</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/ldap/c-sdk/include/regex.h</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l18.4"></a><span id="l18.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l18.5"></a><span id="l18.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">- * </span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+ *</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l18.14"></a><span id="l18.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">- * </span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+ *</span>
<a href="#l18.17"></a><span id="l18.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l18.18"></a><span id="l18.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l18.19"></a><span id="l18.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l18.20"></a><span id="l18.20">  * License.</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">- * </span>
<a href="#l18.22"></a><span id="l18.22" class="difflineplus">+ *</span>
<a href="#l18.23"></a><span id="l18.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l18.24"></a><span id="l18.24">  * March 31, 1998.</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">- * </span>
<a href="#l18.26"></a><span id="l18.26" class="difflineplus">+ *</span>
<a href="#l18.27"></a><span id="l18.27">  * The Initial Developer of the Original Code is</span>
<a href="#l18.28"></a><span id="l18.28">  * Netscape Communications Corporation.</span>
<a href="#l18.29"></a><span id="l18.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l18.30"></a><span id="l18.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">- * </span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+ *</span>
<a href="#l18.33"></a><span id="l18.33">  * Contributor(s):</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">- * </span>
<a href="#l18.35"></a><span id="l18.35" class="difflineplus">+ *</span>
<a href="#l18.36"></a><span id="l18.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l18.37"></a><span id="l18.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l18.38"></a><span id="l18.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l18.39"></a><span id="l18.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l18.40"></a><span id="l18.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l18.41"></a><span id="l18.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l18.42"></a><span id="l18.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l18.43"></a><span id="l18.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l18.44"></a><span id="l18.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l18.45"></a><span id="l18.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l18.46"></a><span id="l18.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l18.47"></a><span id="l18.47" class="difflineminus">- * </span>
<a href="#l18.48"></a><span id="l18.48" class="difflineplus">+ *</span>
<a href="#l18.49"></a><span id="l18.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l18.50"></a><span id="l18.50"> </span>
<a href="#l18.51"></a><span id="l18.51"> #if defined( macintosh ) || defined( DOS ) || defined( _WINDOWS ) || defined( NEED_BSDREGEX ) || defined( XP_OS2 )</span>
<a href="#l18.52"></a><span id="l18.52"> /*</span>
<a href="#l18.53"></a><span id="l18.53">  * Copyright (c) 1993 Regents of the University of Michigan.</span>
<a href="#l18.54"></a><span id="l18.54">  * All rights reserved.</span>
<a href="#l18.55"></a><span id="l18.55">  *</span>
<a href="#l18.56"></a><span id="l18.56">  * Redistribution and use in source and binary forms are permitted</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineat">@@ -51,17 +51,17 @@</span>
<a href="#l18.58"></a><span id="l18.58">  * regex.h -- includes for regular expression matching routines</span>
<a href="#l18.59"></a><span id="l18.59">  * 13 August 1993 Mark C Smith</span>
<a href="#l18.60"></a><span id="l18.60">  */</span>
<a href="#l18.61"></a><span id="l18.61"> </span>
<a href="#l18.62"></a><span id="l18.62"> #ifdef __cplusplus</span>
<a href="#l18.63"></a><span id="l18.63"> extern &quot;C&quot; {</span>
<a href="#l18.64"></a><span id="l18.64"> #endif</span>
<a href="#l18.65"></a><span id="l18.65"> </span>
<a href="#l18.66"></a><span id="l18.66" class="difflineminus">-#include &quot;ldap.h&quot; </span>
<a href="#l18.67"></a><span id="l18.67" class="difflineplus">+#include &quot;ldap.h&quot;</span>
<a href="#l18.68"></a><span id="l18.68"> </span>
<a href="#l18.69"></a><span id="l18.69"> #if !defined( NEEDPROTOS ) &amp;&amp; defined( __STDC__ )</span>
<a href="#l18.70"></a><span id="l18.70"> #define NEEDPROTOS</span>
<a href="#l18.71"></a><span id="l18.71"> #endif</span>
<a href="#l18.72"></a><span id="l18.72"> </span>
<a href="#l18.73"></a><span id="l18.73"> #ifdef _SLDAPD_H_	/* server build: no need to use LDAP_CALL stuff */</span>
<a href="#l18.74"></a><span id="l18.74"> #ifdef LDAP_CALL</span>
<a href="#l18.75"></a><span id="l18.75"> #undef LDAP_CALL</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/ldap/c-sdk/include/srchpref.h</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/ldap/c-sdk/include/srchpref.h</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l19.4"></a><span id="l19.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l19.5"></a><span id="l19.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">- * </span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l19.10"></a><span id="l19.10" class="difflineplus">+ *</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l19.14"></a><span id="l19.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">- * </span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+ *</span>
<a href="#l19.17"></a><span id="l19.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l19.18"></a><span id="l19.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l19.19"></a><span id="l19.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l19.20"></a><span id="l19.20">  * License.</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">- * </span>
<a href="#l19.22"></a><span id="l19.22" class="difflineplus">+ *</span>
<a href="#l19.23"></a><span id="l19.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l19.24"></a><span id="l19.24">  * March 31, 1998.</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">- * </span>
<a href="#l19.26"></a><span id="l19.26" class="difflineplus">+ *</span>
<a href="#l19.27"></a><span id="l19.27">  * The Initial Developer of the Original Code is</span>
<a href="#l19.28"></a><span id="l19.28">  * Netscape Communications Corporation.</span>
<a href="#l19.29"></a><span id="l19.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l19.30"></a><span id="l19.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">- * </span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+ *</span>
<a href="#l19.33"></a><span id="l19.33">  * Contributor(s):</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">- * </span>
<a href="#l19.35"></a><span id="l19.35" class="difflineplus">+ *</span>
<a href="#l19.36"></a><span id="l19.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l19.37"></a><span id="l19.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l19.38"></a><span id="l19.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l19.39"></a><span id="l19.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l19.40"></a><span id="l19.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l19.41"></a><span id="l19.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l19.42"></a><span id="l19.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l19.43"></a><span id="l19.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l19.44"></a><span id="l19.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l19.45"></a><span id="l19.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l19.46"></a><span id="l19.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">- * </span>
<a href="#l19.48"></a><span id="l19.48" class="difflineplus">+ *</span>
<a href="#l19.49"></a><span id="l19.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l19.50"></a><span id="l19.50"> </span>
<a href="#l19.51"></a><span id="l19.51"> /*</span>
<a href="#l19.52"></a><span id="l19.52">  * Copyright (c) 1993, 1994 Regents of the University of Michigan.</span>
<a href="#l19.53"></a><span id="l19.53">  * All rights reserved.</span>
<a href="#l19.54"></a><span id="l19.54">  *</span>
<a href="#l19.55"></a><span id="l19.55">  * Redistribution and use in source and binary forms are permitted</span>
<a href="#l19.56"></a><span id="l19.56">  * provided that this notice is preserved and that due credit is given</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineat">@@ -56,17 +56,17 @@</span>
<a href="#l19.58"></a><span id="l19.58"> #ifdef __cplusplus</span>
<a href="#l19.59"></a><span id="l19.59"> extern &quot;C&quot; {</span>
<a href="#l19.60"></a><span id="l19.60"> #endif</span>
<a href="#l19.61"></a><span id="l19.61"> </span>
<a href="#l19.62"></a><span id="l19.62"> /* calling conventions used by library */</span>
<a href="#l19.63"></a><span id="l19.63"> #ifndef LDAP_CALL</span>
<a href="#l19.64"></a><span id="l19.64"> #if defined( _WINDOWS ) || defined( _WIN32 )</span>
<a href="#l19.65"></a><span id="l19.65"> #define LDAP_C __cdecl</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-#ifndef _WIN32 </span>
<a href="#l19.67"></a><span id="l19.67" class="difflineplus">+#ifndef _WIN32</span>
<a href="#l19.68"></a><span id="l19.68"> #define __stdcall _far _pascal</span>
<a href="#l19.69"></a><span id="l19.69"> #define LDAP_CALLBACK _loadds</span>
<a href="#l19.70"></a><span id="l19.70"> #else</span>
<a href="#l19.71"></a><span id="l19.71"> #define LDAP_CALLBACK</span>
<a href="#l19.72"></a><span id="l19.72"> #endif /* _WIN32 */</span>
<a href="#l19.73"></a><span id="l19.73"> #define LDAP_PASCAL __stdcall</span>
<a href="#l19.74"></a><span id="l19.74"> #define LDAP_CALL LDAP_PASCAL</span>
<a href="#l19.75"></a><span id="l19.75"> #else /* _WINDOWS */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/ldap/c-sdk/libraries/liblber/lber-int.h</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/liblber/lber-int.h</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l20.4"></a><span id="l20.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l20.5"></a><span id="l20.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">- * </span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l20.10"></a><span id="l20.10" class="difflineplus">+ *</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l20.14"></a><span id="l20.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">- * </span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+ *</span>
<a href="#l20.17"></a><span id="l20.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l20.18"></a><span id="l20.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l20.19"></a><span id="l20.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l20.20"></a><span id="l20.20">  * License.</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">- * </span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+ *</span>
<a href="#l20.23"></a><span id="l20.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l20.24"></a><span id="l20.24">  * March 31, 1998.</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">- * </span>
<a href="#l20.26"></a><span id="l20.26" class="difflineplus">+ *</span>
<a href="#l20.27"></a><span id="l20.27">  * The Initial Developer of the Original Code is</span>
<a href="#l20.28"></a><span id="l20.28">  * Netscape Communications Corporation.</span>
<a href="#l20.29"></a><span id="l20.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l20.30"></a><span id="l20.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">- * </span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+ *</span>
<a href="#l20.33"></a><span id="l20.33">  * Contributor(s):</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">- * </span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+ *</span>
<a href="#l20.36"></a><span id="l20.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l20.37"></a><span id="l20.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l20.38"></a><span id="l20.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l20.39"></a><span id="l20.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l20.40"></a><span id="l20.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l20.41"></a><span id="l20.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l20.42"></a><span id="l20.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l20.43"></a><span id="l20.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l20.44"></a><span id="l20.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l20.45"></a><span id="l20.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l20.46"></a><span id="l20.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineminus">- * </span>
<a href="#l20.48"></a><span id="l20.48" class="difflineplus">+ *</span>
<a href="#l20.49"></a><span id="l20.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l20.50"></a><span id="l20.50"> </span>
<a href="#l20.51"></a><span id="l20.51"> /*</span>
<a href="#l20.52"></a><span id="l20.52">  * Copyright (c) 1990 Regents of the University of Michigan.</span>
<a href="#l20.53"></a><span id="l20.53">  * All rights reserved.</span>
<a href="#l20.54"></a><span id="l20.54">  *</span>
<a href="#l20.55"></a><span id="l20.55">  * Redistribution and use in source and binary forms are permitted</span>
<a href="#l20.56"></a><span id="l20.56">  * provided that this notice is preserved and that due credit is given</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineat">@@ -260,20 +260,20 @@ void lber_bprint( char *data, int len );</span>
<a href="#l20.58"></a><span id="l20.58"> #endif</span>
<a href="#l20.59"></a><span id="l20.59"> void ber_err_print( char *data );</span>
<a href="#l20.60"></a><span id="l20.60"> void *nslberi_malloc( size_t size );</span>
<a href="#l20.61"></a><span id="l20.61"> void *nslberi_calloc( size_t nelem, size_t elsize );</span>
<a href="#l20.62"></a><span id="l20.62"> void *nslberi_realloc( void *ptr, size_t size );</span>
<a href="#l20.63"></a><span id="l20.63"> void nslberi_free( void *ptr );</span>
<a href="#l20.64"></a><span id="l20.64"> int nslberi_ber_realloc( BerElement *ber, ber_len_t len );</span>
<a href="#l20.65"></a><span id="l20.65"> </span>
<a href="#l20.66"></a><span id="l20.66" class="difflineminus">-/* blame: dboreham </span>
<a href="#l20.67"></a><span id="l20.67" class="difflineplus">+/* blame: dboreham</span>
<a href="#l20.68"></a><span id="l20.68">  * slapd spends much of its time doing memcpy's for the ber code.</span>
<a href="#l20.69"></a><span id="l20.69">  * Most of these are single-byte, so we special-case those and speed</span>
<a href="#l20.70"></a><span id="l20.70" class="difflineminus">- * things up considerably. </span>
<a href="#l20.71"></a><span id="l20.71" class="difflineplus">+ * things up considerably.</span>
<a href="#l20.72"></a><span id="l20.72">  */</span>
<a href="#l20.73"></a><span id="l20.73"> </span>
<a href="#l20.74"></a><span id="l20.74"> #ifdef sunos4</span>
<a href="#l20.75"></a><span id="l20.75"> #define THEMEMCPY( d, s, n )	bcopy( s, d, n )</span>
<a href="#l20.76"></a><span id="l20.76"> #else /* sunos4 */</span>
<a href="#l20.77"></a><span id="l20.77"> #define THEMEMCPY( d, s, n )	memmove( d, s, n )</span>
<a href="#l20.78"></a><span id="l20.78"> #endif /* sunos4 */</span>
<a href="#l20.79"></a><span id="l20.79"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/ldap/c-sdk/libraries/libldap/ldap-int.h</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/libldap/ldap-int.h</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l21.4"></a><span id="l21.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l21.5"></a><span id="l21.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineminus">- * </span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l21.8"></a><span id="l21.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l21.10"></a><span id="l21.10" class="difflineplus">+ *</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l21.14"></a><span id="l21.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">- * </span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+ *</span>
<a href="#l21.17"></a><span id="l21.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l21.18"></a><span id="l21.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l21.19"></a><span id="l21.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l21.20"></a><span id="l21.20">  * License.</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">- * </span>
<a href="#l21.22"></a><span id="l21.22" class="difflineplus">+ *</span>
<a href="#l21.23"></a><span id="l21.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l21.24"></a><span id="l21.24">  * March 31, 1998.</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineminus">- * </span>
<a href="#l21.26"></a><span id="l21.26" class="difflineplus">+ *</span>
<a href="#l21.27"></a><span id="l21.27">  * The Initial Developer of the Original Code is</span>
<a href="#l21.28"></a><span id="l21.28">  * Netscape Communications Corporation.</span>
<a href="#l21.29"></a><span id="l21.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l21.30"></a><span id="l21.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">- * </span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+ *</span>
<a href="#l21.33"></a><span id="l21.33">  * Contributor(s):</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">- * </span>
<a href="#l21.35"></a><span id="l21.35" class="difflineplus">+ *</span>
<a href="#l21.36"></a><span id="l21.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l21.37"></a><span id="l21.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l21.38"></a><span id="l21.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l21.39"></a><span id="l21.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l21.40"></a><span id="l21.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l21.41"></a><span id="l21.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l21.42"></a><span id="l21.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l21.43"></a><span id="l21.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l21.44"></a><span id="l21.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l21.45"></a><span id="l21.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l21.46"></a><span id="l21.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineminus">- * </span>
<a href="#l21.48"></a><span id="l21.48" class="difflineplus">+ *</span>
<a href="#l21.49"></a><span id="l21.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l21.50"></a><span id="l21.50"> #ifndef _LDAPINT_H</span>
<a href="#l21.51"></a><span id="l21.51"> #define _LDAPINT_H</span>
<a href="#l21.52"></a><span id="l21.52"> </span>
<a href="#l21.53"></a><span id="l21.53"> #include &lt;stdio.h&gt;</span>
<a href="#l21.54"></a><span id="l21.54"> #include &lt;string.h&gt;</span>
<a href="#l21.55"></a><span id="l21.55"> #include &lt;stdlib.h&gt;</span>
<a href="#l21.56"></a><span id="l21.56"> #include &lt;errno.h&gt;</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineat">@@ -131,35 +131,35 @@</span>
<a href="#l21.58"></a><span id="l21.58"> </span>
<a href="#l21.59"></a><span id="l21.59"> /* default limit on nesting of referrals */</span>
<a href="#l21.60"></a><span id="l21.60"> #define LDAP_DEFAULT_REFHOPLIMIT	5</span>
<a href="#l21.61"></a><span id="l21.61"> #ifdef LDAP_DNS</span>
<a href="#l21.62"></a><span id="l21.62"> #define LDAP_DX_REF_STR		&quot;dx://&quot;</span>
<a href="#l21.63"></a><span id="l21.63"> #define LDAP_DX_REF_STR_LEN	5</span>
<a href="#l21.64"></a><span id="l21.64"> #endif /* LDAP_DNS */</span>
<a href="#l21.65"></a><span id="l21.65"> </span>
<a href="#l21.66"></a><span id="l21.66" class="difflineminus">-typedef enum { </span>
<a href="#l21.67"></a><span id="l21.67" class="difflineminus">-    LDAP_CACHE_LOCK, </span>
<a href="#l21.68"></a><span id="l21.68" class="difflineminus">-    LDAP_MEMCACHE_LOCK, </span>
<a href="#l21.69"></a><span id="l21.69" class="difflineplus">+typedef enum {</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineplus">+    LDAP_CACHE_LOCK,</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineplus">+    LDAP_MEMCACHE_LOCK,</span>
<a href="#l21.72"></a><span id="l21.72">     LDAP_MSGID_LOCK,</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineminus">-    LDAP_REQ_LOCK, </span>
<a href="#l21.74"></a><span id="l21.74" class="difflineminus">-    LDAP_RESP_LOCK, </span>
<a href="#l21.75"></a><span id="l21.75" class="difflineminus">-    LDAP_ABANDON_LOCK, </span>
<a href="#l21.76"></a><span id="l21.76" class="difflineplus">+    LDAP_REQ_LOCK,</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineplus">+    LDAP_RESP_LOCK,</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineplus">+    LDAP_ABANDON_LOCK,</span>
<a href="#l21.79"></a><span id="l21.79">     LDAP_CTRL_LOCK,</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineminus">-    LDAP_OPTION_LOCK, </span>
<a href="#l21.81"></a><span id="l21.81" class="difflineminus">-    LDAP_ERR_LOCK, </span>
<a href="#l21.82"></a><span id="l21.82" class="difflineminus">-    LDAP_CONN_LOCK, </span>
<a href="#l21.83"></a><span id="l21.83" class="difflineplus">+    LDAP_OPTION_LOCK,</span>
<a href="#l21.84"></a><span id="l21.84" class="difflineplus">+    LDAP_ERR_LOCK,</span>
<a href="#l21.85"></a><span id="l21.85" class="difflineplus">+    LDAP_CONN_LOCK,</span>
<a href="#l21.86"></a><span id="l21.86">     LDAP_IOSTATUS_LOCK,		/* serializes access to ld-&gt;ld_iostatus */</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineminus">-    LDAP_RESULT_LOCK, </span>
<a href="#l21.88"></a><span id="l21.88" class="difflineminus">-    LDAP_PEND_LOCK, </span>
<a href="#l21.89"></a><span id="l21.89" class="difflineminus">-    LDAP_THREADID_LOCK, </span>
<a href="#l21.90"></a><span id="l21.90" class="difflineplus">+    LDAP_RESULT_LOCK,</span>
<a href="#l21.91"></a><span id="l21.91" class="difflineplus">+    LDAP_PEND_LOCK,</span>
<a href="#l21.92"></a><span id="l21.92" class="difflineplus">+    LDAP_THREADID_LOCK,</span>
<a href="#l21.93"></a><span id="l21.93"> #ifdef LDAP_SASLIO_HOOKS</span>
<a href="#l21.94"></a><span id="l21.94">     LDAP_SASL_LOCK,</span>
<a href="#l21.95"></a><span id="l21.95"> #endif</span>
<a href="#l21.96"></a><span id="l21.96" class="difflineminus">-    LDAP_MAX_LOCK </span>
<a href="#l21.97"></a><span id="l21.97" class="difflineplus">+    LDAP_MAX_LOCK</span>
<a href="#l21.98"></a><span id="l21.98"> } LDAPLock;</span>
<a href="#l21.99"></a><span id="l21.99"> </span>
<a href="#l21.100"></a><span id="l21.100"> /*</span>
<a href="#l21.101"></a><span id="l21.101">  * This structure represents both ldap messages and ldap responses.</span>
<a href="#l21.102"></a><span id="l21.102">  * These are really the same, except in the case of search responses,</span>
<a href="#l21.103"></a><span id="l21.103">  * where a response has multiple messages.</span>
<a href="#l21.104"></a><span id="l21.104">  */</span>
<a href="#l21.105"></a><span id="l21.105"> </span>
<a href="#l21.106"></a><span id="l21.106" class="difflineat">@@ -456,17 +456,17 @@ struct ldap {</span>
<a href="#l21.107"></a><span id="l21.107">             } else { \</span>
<a href="#l21.108"></a><span id="l21.108">                 (ld)-&gt;ld_mutex_lock_fn(ld-&gt;ld_mutex[lock]); \</span>
<a href="#l21.109"></a><span id="l21.109">                 (ld)-&gt;ld_mutex_threadid[lock] = ld-&gt;ld_threadid_fn(); \</span>
<a href="#l21.110"></a><span id="l21.110">                 (ld)-&gt;ld_mutex_refcnt[lock] = 1; \</span>
<a href="#l21.111"></a><span id="l21.111">             } \</span>
<a href="#l21.112"></a><span id="l21.112">         } else { \</span>
<a href="#l21.113"></a><span id="l21.113">             (ld)-&gt;ld_mutex_lock_fn(ld-&gt;ld_mutex[lock]); \</span>
<a href="#l21.114"></a><span id="l21.114">         } \</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineminus">-    } </span>
<a href="#l21.116"></a><span id="l21.116" class="difflineplus">+    }</span>
<a href="#l21.117"></a><span id="l21.117"> </span>
<a href="#l21.118"></a><span id="l21.118"> #define LDAP_MUTEX_UNLOCK(ld, lock) \</span>
<a href="#l21.119"></a><span id="l21.119">     if ((ld)-&gt;ld_mutex_lock_fn != NULL &amp;&amp; ld-&gt;ld_mutex != NULL) { \</span>
<a href="#l21.120"></a><span id="l21.120">         if ((ld)-&gt;ld_threadid_fn != NULL) { \</span>
<a href="#l21.121"></a><span id="l21.121">             if ((ld)-&gt;ld_mutex_threadid[lock] == (ld)-&gt;ld_threadid_fn()) { \</span>
<a href="#l21.122"></a><span id="l21.122">                 (ld)-&gt;ld_mutex_refcnt[lock]--; \</span>
<a href="#l21.123"></a><span id="l21.123">                 if ((ld)-&gt;ld_mutex_refcnt[lock] &lt;= 0) { \</span>
<a href="#l21.124"></a><span id="l21.124">                     (ld)-&gt;ld_mutex_threadid[lock] = (void *) -1; \</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineat">@@ -559,32 +559,32 @@ struct ldap {</span>
<a href="#l21.126"></a><span id="l21.126">  */</span>
<a href="#l21.127"></a><span id="l21.127"> #define LDAP_IS_CLDAP( ld )	( ld-&gt;ld_sbp-&gt;sb_naddr &gt; 0 )</span>
<a href="#l21.128"></a><span id="l21.128"> </span>
<a href="#l21.129"></a><span id="l21.129"> /*</span>
<a href="#l21.130"></a><span id="l21.130">  * Some Unix error defs. Under CW 7, we can't define OTUNIXERRORS because</span>
<a href="#l21.131"></a><span id="l21.131">  * it generates many conflicts with errno.h. Define what we need here.</span>
<a href="#l21.132"></a><span id="l21.132">  * These need to be in sync with OpenTransport.h</span>
<a href="#l21.133"></a><span id="l21.133">  */</span>
<a href="#l21.134"></a><span id="l21.134" class="difflineminus">- </span>
<a href="#l21.135"></a><span id="l21.135" class="difflineplus">+</span>
<a href="#l21.136"></a><span id="l21.136"> #if defined(macintosh)</span>
<a href="#l21.137"></a><span id="l21.137"> #define EWOULDBLOCK     35</span>
<a href="#l21.138"></a><span id="l21.138"> #define EHOSTUNREACH    65</span>
<a href="#l21.139"></a><span id="l21.139"> #endif</span>
<a href="#l21.140"></a><span id="l21.140"> </span>
<a href="#l21.141"></a><span id="l21.141"> /*</span>
<a href="#l21.142"></a><span id="l21.142">  * handy macro to check errno &quot;e&quot; for an &quot;in progress&quot; sort of error</span>
<a href="#l21.143"></a><span id="l21.143">  */</span>
<a href="#l21.144"></a><span id="l21.144"> #if defined(macintosh) || defined(_WINDOWS)</span>
<a href="#l21.145"></a><span id="l21.145"> #define NSLDAPI_ERRNO_IO_INPROGRESS( e )  ((e) == EWOULDBLOCK || (e) == EAGAIN)</span>
<a href="#l21.146"></a><span id="l21.146"> #else</span>
<a href="#l21.147"></a><span id="l21.147"> #ifdef EAGAIN</span>
<a href="#l21.148"></a><span id="l21.148"> #define NSLDAPI_ERRNO_IO_INPROGRESS( e )  ((e) == EWOULDBLOCK || (e) == EINPROGRESS || (e) == EAGAIN)</span>
<a href="#l21.149"></a><span id="l21.149"> #else /* EAGAIN */</span>
<a href="#l21.150"></a><span id="l21.150" class="difflineminus">-#define NSLDAPI_ERRNO_IO_INPROGRESS( e )  ((e) == EWOULDBLOCK || (e) == EINPROGRESS) </span>
<a href="#l21.151"></a><span id="l21.151" class="difflineplus">+#define NSLDAPI_ERRNO_IO_INPROGRESS( e )  ((e) == EWOULDBLOCK || (e) == EINPROGRESS)</span>
<a href="#l21.152"></a><span id="l21.152"> #endif /* EAGAIN */</span>
<a href="#l21.153"></a><span id="l21.153"> #endif /* macintosh || _WINDOWS*/</span>
<a href="#l21.154"></a><span id="l21.154"> </span>
<a href="#l21.155"></a><span id="l21.155"> /*</span>
<a href="#l21.156"></a><span id="l21.156">  * macro to return the LDAP protocol version we are using</span>
<a href="#l21.157"></a><span id="l21.157">  */</span>
<a href="#l21.158"></a><span id="l21.158"> #define NSLDAPI_LDAP_VERSION( ld )	( (ld)-&gt;ld_defconn == NULL ? \</span>
<a href="#l21.159"></a><span id="l21.159"> 					(ld)-&gt;ld_version : \</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/ldap/c-sdk/libraries/libprldap/ldappr-int.h</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/ldap/c-sdk/libraries/libprldap/ldappr-int.h</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1,43 +1,43 @@</span>
<a href="#l22.4"></a><span id="l22.4"> /* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l22.5"></a><span id="l22.5">  * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineminus">- * </span>
<a href="#l22.7"></a><span id="l22.7" class="difflineminus">- * The contents of this file are subject to the Mozilla Public License Version </span>
<a href="#l22.8"></a><span id="l22.8" class="difflineminus">- * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with </span>
<a href="#l22.9"></a><span id="l22.9" class="difflineminus">- * the License. You may obtain a copy of the License at </span>
<a href="#l22.10"></a><span id="l22.10" class="difflineplus">+ *</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l22.14"></a><span id="l22.14">  * http://www.mozilla.org/MPL/</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">- * </span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+ *</span>
<a href="#l22.17"></a><span id="l22.17">  * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l22.18"></a><span id="l22.18">  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l22.19"></a><span id="l22.19">  * for the specific language governing rights and limitations under the</span>
<a href="#l22.20"></a><span id="l22.20">  * License.</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineminus">- * </span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+ *</span>
<a href="#l22.23"></a><span id="l22.23">  * The Original Code is Mozilla Communicator client code, released</span>
<a href="#l22.24"></a><span id="l22.24">  * March 31, 1998.</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineminus">- * </span>
<a href="#l22.26"></a><span id="l22.26" class="difflineplus">+ *</span>
<a href="#l22.27"></a><span id="l22.27">  * The Initial Developer of the Original Code is</span>
<a href="#l22.28"></a><span id="l22.28">  * Netscape Communications Corporation.</span>
<a href="#l22.29"></a><span id="l22.29">  * Portions created by the Initial Developer are Copyright (C) 1998-1999</span>
<a href="#l22.30"></a><span id="l22.30">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">- * </span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+ *</span>
<a href="#l22.33"></a><span id="l22.33">  * Contributor(s):</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">- * </span>
<a href="#l22.35"></a><span id="l22.35" class="difflineplus">+ *</span>
<a href="#l22.36"></a><span id="l22.36">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l22.37"></a><span id="l22.37">  * either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l22.38"></a><span id="l22.38">  * or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l22.39"></a><span id="l22.39">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l22.40"></a><span id="l22.40">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l22.41"></a><span id="l22.41">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l22.42"></a><span id="l22.42">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l22.43"></a><span id="l22.43">  * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l22.44"></a><span id="l22.44">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l22.45"></a><span id="l22.45">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l22.46"></a><span id="l22.46">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineminus">- * </span>
<a href="#l22.48"></a><span id="l22.48" class="difflineplus">+ *</span>
<a href="#l22.49"></a><span id="l22.49">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l22.50"></a><span id="l22.50"> </span>
<a href="#l22.51"></a><span id="l22.51"> /*</span>
<a href="#l22.52"></a><span id="l22.52">  * Internal header for libprldap -- glue NSPR (Netscape Portable Runtime)</span>
<a href="#l22.53"></a><span id="l22.53">  * to libldap.</span>
<a href="#l22.54"></a><span id="l22.54">  *</span>
<a href="#l22.55"></a><span id="l22.55">  */</span>
<a href="#l22.56"></a><span id="l22.56"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPBERElement.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPBERElement.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l23.4"></a><span id="l23.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l23.5"></a><span id="l23.5" class="difflineminus">- * </span>
<a href="#l23.6"></a><span id="l23.6" class="difflineplus">+ *</span>
<a href="#l23.7"></a><span id="l23.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l23.8"></a><span id="l23.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l23.9"></a><span id="l23.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l23.10"></a><span id="l23.10"> </span>
<a href="#l23.11"></a><span id="l23.11"> #include &quot;nsLDAPBERElement.h&quot;</span>
<a href="#l23.12"></a><span id="l23.12"> #include &quot;nsString.h&quot;</span>
<a href="#l23.13"></a><span id="l23.13"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l23.14"></a><span id="l23.14"> #include &quot;nsLDAPBERValue.h&quot;</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineat">@@ -27,30 +27,30 @@ nsLDAPBERElement::~nsLDAPBERElement()</span>
<a href="#l23.16"></a><span id="l23.16">   return;</span>
<a href="#l23.17"></a><span id="l23.17"> }</span>
<a href="#l23.18"></a><span id="l23.18"> </span>
<a href="#l23.19"></a><span id="l23.19"> NS_IMETHODIMP</span>
<a href="#l23.20"></a><span id="l23.20"> nsLDAPBERElement::Init(nsILDAPBERValue *aValue)</span>
<a href="#l23.21"></a><span id="l23.21"> {</span>
<a href="#l23.22"></a><span id="l23.22">   if (aValue) {</span>
<a href="#l23.23"></a><span id="l23.23">     return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-  } </span>
<a href="#l23.25"></a><span id="l23.25" class="difflineplus">+  }</span>
<a href="#l23.26"></a><span id="l23.26"> </span>
<a href="#l23.27"></a><span id="l23.27">   mElement = ber_alloc_t(LBER_USE_DER);</span>
<a href="#l23.28"></a><span id="l23.28">   return mElement ? NS_OK : NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l23.29"></a><span id="l23.29"> }</span>
<a href="#l23.30"></a><span id="l23.30"> </span>
<a href="#l23.31"></a><span id="l23.31"> /* void putString (in AUTF8String aString, in unsigned long aTag); */</span>
<a href="#l23.32"></a><span id="l23.32"> NS_IMETHODIMP</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineminus">-nsLDAPBERElement::PutString(const nsACString &amp; aString, uint32_t aTag, </span>
<a href="#l23.34"></a><span id="l23.34" class="difflineplus">+nsLDAPBERElement::PutString(const nsACString &amp; aString, uint32_t aTag,</span>
<a href="#l23.35"></a><span id="l23.35">                             uint32_t *aBytesWritten)</span>
<a href="#l23.36"></a><span id="l23.36"> {</span>
<a href="#l23.37"></a><span id="l23.37">   // XXX if the string translation feature of the C SDK is ever used,</span>
<a href="#l23.38"></a><span id="l23.38">   // this const_cast will break</span>
<a href="#l23.39"></a><span id="l23.39" class="difflineminus">-  int i = ber_put_ostring(mElement, </span>
<a href="#l23.40"></a><span id="l23.40" class="difflineplus">+  int i = ber_put_ostring(mElement,</span>
<a href="#l23.41"></a><span id="l23.41">                           const_cast&lt;char *&gt;(PromiseFlatCString(aString).get()),</span>
<a href="#l23.42"></a><span id="l23.42">                           aString.Length(), aTag);</span>
<a href="#l23.43"></a><span id="l23.43"> </span>
<a href="#l23.44"></a><span id="l23.44">   if (i &lt; 0) {</span>
<a href="#l23.45"></a><span id="l23.45">     return NS_ERROR_FAILURE;</span>
<a href="#l23.46"></a><span id="l23.46">   }</span>
<a href="#l23.47"></a><span id="l23.47"> </span>
<a href="#l23.48"></a><span id="l23.48">   *aBytesWritten = i;</span>
<a href="#l23.49"></a><span id="l23.49" class="difflineat">@@ -94,17 +94,17 @@ NS_IMETHODIMP nsLDAPBERElement::GetAsVal</span>
<a href="#l23.50"></a><span id="l23.50">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l23.51"></a><span id="l23.51">   }</span>
<a href="#l23.52"></a><span id="l23.52"> </span>
<a href="#l23.53"></a><span id="l23.53">   struct berval *bv;</span>
<a href="#l23.54"></a><span id="l23.54">   if ( ber_flatten(mElement, &amp;bv) &lt; 0 ) {</span>
<a href="#l23.55"></a><span id="l23.55">     return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l23.56"></a><span id="l23.56">   }</span>
<a href="#l23.57"></a><span id="l23.57"> </span>
<a href="#l23.58"></a><span id="l23.58" class="difflineminus">-  nsresult rv = berValue-&gt;Set(bv-&gt;bv_len, </span>
<a href="#l23.59"></a><span id="l23.59" class="difflineplus">+  nsresult rv = berValue-&gt;Set(bv-&gt;bv_len,</span>
<a href="#l23.60"></a><span id="l23.60">                               reinterpret_cast&lt;uint8_t *&gt;(bv-&gt;bv_val));</span>
<a href="#l23.61"></a><span id="l23.61"> </span>
<a href="#l23.62"></a><span id="l23.62">   // whether or not we've succeeded, we're done with the ldap c sdk struct</span>
<a href="#l23.63"></a><span id="l23.63">   ber_bvfree(bv);</span>
<a href="#l23.64"></a><span id="l23.64"> </span>
<a href="#l23.65"></a><span id="l23.65">   // as of this writing, this error can only be NS_ERROR_OUT_OF_MEMORY</span>
<a href="#l23.66"></a><span id="l23.66">   if (NS_FAILED(rv)) {</span>
<a href="#l23.67"></a><span id="l23.67">     return rv;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPBERElement.h</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPBERElement.h</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l24.4"></a><span id="l24.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineminus">- * </span>
<a href="#l24.6"></a><span id="l24.6" class="difflineplus">+ *</span>
<a href="#l24.7"></a><span id="l24.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l24.8"></a><span id="l24.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l24.9"></a><span id="l24.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11"> #include &quot;lber.h&quot;</span>
<a href="#l24.12"></a><span id="l24.12"> #include &quot;nsILDAPBERElement.h&quot;</span>
<a href="#l24.13"></a><span id="l24.13"> </span>
<a href="#l24.14"></a><span id="l24.14"> // 070af769-b7f5-40e7-81be-196155ead84c</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPBERValue.cpp</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPBERValue.cpp</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l25.4"></a><span id="l25.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineminus">- * </span>
<a href="#l25.6"></a><span id="l25.6" class="difflineplus">+ *</span>
<a href="#l25.7"></a><span id="l25.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l25.8"></a><span id="l25.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l25.9"></a><span id="l25.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11"> #include &quot;nsLDAPBERValue.h&quot;</span>
<a href="#l25.12"></a><span id="l25.12"> #include &quot;nsMemory.h&quot;</span>
<a href="#l25.13"></a><span id="l25.13"> #include &quot;nsString.h&quot;</span>
<a href="#l25.14"></a><span id="l25.14"> </span>
<a href="#l25.15"></a><span id="l25.15" class="difflineat">@@ -16,58 +16,58 @@ nsLDAPBERValue::nsLDAPBERValue() : mValu</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17"> nsLDAPBERValue::~nsLDAPBERValue()</span>
<a href="#l25.18"></a><span id="l25.18"> {</span>
<a href="#l25.19"></a><span id="l25.19">     if (mValue) {</span>
<a href="#l25.20"></a><span id="l25.20">         free(mValue);</span>
<a href="#l25.21"></a><span id="l25.21">     }</span>
<a href="#l25.22"></a><span id="l25.22"> }</span>
<a href="#l25.23"></a><span id="l25.23"> </span>
<a href="#l25.24"></a><span id="l25.24" class="difflineminus">-// void get (out unsigned long aCount, </span>
<a href="#l25.25"></a><span id="l25.25" class="difflineplus">+// void get (out unsigned long aCount,</span>
<a href="#l25.26"></a><span id="l25.26"> //           [array, size_is (aCount), retval] out octet aRetVal); */</span>
<a href="#l25.27"></a><span id="l25.27" class="difflineminus">-NS_IMETHODIMP </span>
<a href="#l25.28"></a><span id="l25.28" class="difflineplus">+NS_IMETHODIMP</span>
<a href="#l25.29"></a><span id="l25.29"> nsLDAPBERValue::Get(uint32_t *aCount, uint8_t **aRetVal)</span>
<a href="#l25.30"></a><span id="l25.30"> {</span>
<a href="#l25.31"></a><span id="l25.31">     // if mSize = 0, return a count of a 0 and a null pointer</span>
<a href="#l25.32"></a><span id="l25.32"> </span>
<a href="#l25.33"></a><span id="l25.33">     if (mSize) {</span>
<a href="#l25.34"></a><span id="l25.34">         // get a buffer to hold a copy of the data</span>
<a href="#l25.35"></a><span id="l25.35">         //</span>
<a href="#l25.36"></a><span id="l25.36">         uint8_t *array = static_cast&lt;uint8_t *&gt;(moz_xmalloc(mSize));</span>
<a href="#l25.37"></a><span id="l25.37"> </span>
<a href="#l25.38"></a><span id="l25.38">         if (!array) {</span>
<a href="#l25.39"></a><span id="l25.39">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l25.40"></a><span id="l25.40">         }</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineminus">-    </span>
<a href="#l25.42"></a><span id="l25.42" class="difflineplus">+</span>
<a href="#l25.43"></a><span id="l25.43">         // copy and return</span>
<a href="#l25.44"></a><span id="l25.44">         //</span>
<a href="#l25.45"></a><span id="l25.45">         memcpy(array, mValue, mSize);</span>
<a href="#l25.46"></a><span id="l25.46">         *aRetVal = array;</span>
<a href="#l25.47"></a><span id="l25.47">     } else {</span>
<a href="#l25.48"></a><span id="l25.48">         *aRetVal = 0;</span>
<a href="#l25.49"></a><span id="l25.49">     }</span>
<a href="#l25.50"></a><span id="l25.50"> </span>
<a href="#l25.51"></a><span id="l25.51">     *aCount = mSize;</span>
<a href="#l25.52"></a><span id="l25.52">     return NS_OK;</span>
<a href="#l25.53"></a><span id="l25.53"> }</span>
<a href="#l25.54"></a><span id="l25.54"> </span>
<a href="#l25.55"></a><span id="l25.55" class="difflineminus">-// void set(in unsigned long aCount, </span>
<a href="#l25.56"></a><span id="l25.56" class="difflineplus">+// void set(in unsigned long aCount,</span>
<a href="#l25.57"></a><span id="l25.57"> //          [array, size_is(aCount)] in octet aValue);</span>
<a href="#l25.58"></a><span id="l25.58"> NS_IMETHODIMP</span>
<a href="#l25.59"></a><span id="l25.59"> nsLDAPBERValue::Set(uint32_t aCount, uint8_t *aValue)</span>
<a href="#l25.60"></a><span id="l25.60"> {</span>
<a href="#l25.61"></a><span id="l25.61">     // get rid of any old value being held here</span>
<a href="#l25.62"></a><span id="l25.62">     //</span>
<a href="#l25.63"></a><span id="l25.63">     if (mValue) {</span>
<a href="#l25.64"></a><span id="l25.64">         free(mValue);</span>
<a href="#l25.65"></a><span id="l25.65">     }</span>
<a href="#l25.66"></a><span id="l25.66"> </span>
<a href="#l25.67"></a><span id="l25.67">     // if this is a non-zero value, allocate a buffer and copy</span>
<a href="#l25.68"></a><span id="l25.68">     //</span>
<a href="#l25.69"></a><span id="l25.69" class="difflineminus">-    if (aCount) { </span>
<a href="#l25.70"></a><span id="l25.70" class="difflineplus">+    if (aCount) {</span>
<a href="#l25.71"></a><span id="l25.71">         // get a buffer to hold a copy of this data</span>
<a href="#l25.72"></a><span id="l25.72">         //</span>
<a href="#l25.73"></a><span id="l25.73">         mValue = static_cast&lt;uint8_t *&gt;(moz_xmalloc(aCount));</span>
<a href="#l25.74"></a><span id="l25.74">         if (!mValue) {</span>
<a href="#l25.75"></a><span id="l25.75">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l25.76"></a><span id="l25.76">         }</span>
<a href="#l25.77"></a><span id="l25.77"> </span>
<a href="#l25.78"></a><span id="l25.78">         // copy the data and return</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPBERValue.h</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPBERValue.h</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l26.4"></a><span id="l26.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineminus">- * </span>
<a href="#l26.6"></a><span id="l26.6" class="difflineplus">+ *</span>
<a href="#l26.7"></a><span id="l26.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l26.8"></a><span id="l26.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l26.9"></a><span id="l26.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l26.10"></a><span id="l26.10"> </span>
<a href="#l26.11"></a><span id="l26.11"> #ifndef _nsLDAPBERValue_h_</span>
<a href="#l26.12"></a><span id="l26.12"> #define _nsLDAPBERValue_h_</span>
<a href="#l26.13"></a><span id="l26.13"> </span>
<a href="#l26.14"></a><span id="l26.14"> #include &quot;ldap.h&quot;</span>
<a href="#l26.15"></a><span id="l26.15" class="difflineat">@@ -18,21 +18,21 @@</span>
<a href="#l26.16"></a><span id="l26.16"> </span>
<a href="#l26.17"></a><span id="l26.17"> class nsLDAPBERValue : public nsILDAPBERValue</span>
<a href="#l26.18"></a><span id="l26.18"> {</span>
<a href="#l26.19"></a><span id="l26.19"> public:</span>
<a href="#l26.20"></a><span id="l26.20">     NS_DECL_THREADSAFE_ISUPPORTS</span>
<a href="#l26.21"></a><span id="l26.21">     NS_DECL_NSILDAPBERVALUE</span>
<a href="#l26.22"></a><span id="l26.22"> </span>
<a href="#l26.23"></a><span id="l26.23">     nsLDAPBERValue();</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineminus">-    </span>
<a href="#l26.25"></a><span id="l26.25" class="difflineplus">+</span>
<a href="#l26.26"></a><span id="l26.26"> protected:</span>
<a href="#l26.27"></a><span id="l26.27">     virtual ~nsLDAPBERValue();</span>
<a href="#l26.28"></a><span id="l26.28"> </span>
<a href="#l26.29"></a><span id="l26.29" class="difflineminus">-    /** </span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+    /**</span>
<a href="#l26.31"></a><span id="l26.31">      * nsLDAPControl needs to be able to grovel through this without an</span>
<a href="#l26.32"></a><span id="l26.32">      * an extra copy</span>
<a href="#l26.33"></a><span id="l26.33">      */</span>
<a href="#l26.34"></a><span id="l26.34">     friend class nsLDAPControl;</span>
<a href="#l26.35"></a><span id="l26.35"> </span>
<a href="#l26.36"></a><span id="l26.36">     uint8_t *mValue;    // pointer to an array</span>
<a href="#l26.37"></a><span id="l26.37">     uint32_t mSize;	    // size of the value, in bytes</span>
<a href="#l26.38"></a><span id="l26.38"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPControl.cpp</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPControl.cpp</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l27.4"></a><span id="l27.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineminus">- * </span>
<a href="#l27.6"></a><span id="l27.6" class="difflineplus">+ *</span>
<a href="#l27.7"></a><span id="l27.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l27.8"></a><span id="l27.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l27.9"></a><span id="l27.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11"> #include &quot;nsLDAPControl.h&quot;</span>
<a href="#l27.12"></a><span id="l27.12"> #include &quot;prmem.h&quot;</span>
<a href="#l27.13"></a><span id="l27.13"> #include &quot;plstr.h&quot;</span>
<a href="#l27.14"></a><span id="l27.14"> #include &quot;nsLDAPBERValue.h&quot;</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineat">@@ -43,17 +43,17 @@ nsLDAPControl::GetValue(nsILDAPBERValue </span>
<a href="#l27.16"></a><span id="l27.16"> NS_IMETHODIMP</span>
<a href="#l27.17"></a><span id="l27.17"> nsLDAPControl::SetValue(nsILDAPBERValue * aValue)</span>
<a href="#l27.18"></a><span id="l27.18"> {</span>
<a href="#l27.19"></a><span id="l27.19">   mValue = aValue;</span>
<a href="#l27.20"></a><span id="l27.20">   return NS_OK;</span>
<a href="#l27.21"></a><span id="l27.21"> }</span>
<a href="#l27.22"></a><span id="l27.22"> </span>
<a href="#l27.23"></a><span id="l27.23"> /* attribute boolean isCritical; */</span>
<a href="#l27.24"></a><span id="l27.24" class="difflineminus">-NS_IMETHODIMP </span>
<a href="#l27.25"></a><span id="l27.25" class="difflineplus">+NS_IMETHODIMP</span>
<a href="#l27.26"></a><span id="l27.26"> nsLDAPControl::GetIsCritical(bool *aIsCritical)</span>
<a href="#l27.27"></a><span id="l27.27"> {</span>
<a href="#l27.28"></a><span id="l27.28">   *aIsCritical = mIsCritical;</span>
<a href="#l27.29"></a><span id="l27.29">   return NS_OK;</span>
<a href="#l27.30"></a><span id="l27.30"> }</span>
<a href="#l27.31"></a><span id="l27.31"> NS_IMETHODIMP</span>
<a href="#l27.32"></a><span id="l27.32"> nsLDAPControl::SetIsCritical(bool aIsCritical)</span>
<a href="#l27.33"></a><span id="l27.33"> {</span>
<a href="#l27.34"></a><span id="l27.34" class="difflineat">@@ -87,17 +87,17 @@ nsLDAPControl::ToLDAPControl(LDAPControl</span>
<a href="#l27.35"></a><span id="l27.35"> </span>
<a href="#l27.36"></a><span id="l27.36">   if (!mValue) {</span>
<a href="#l27.37"></a><span id="l27.37">     // no data associated with this control</span>
<a href="#l27.38"></a><span id="l27.38">     ctl-&gt;ldctl_value.bv_len = 0;</span>
<a href="#l27.39"></a><span id="l27.39">     ctl-&gt;ldctl_value.bv_val = 0;</span>
<a href="#l27.40"></a><span id="l27.40">   } else {</span>
<a href="#l27.41"></a><span id="l27.41"> </span>
<a href="#l27.42"></a><span id="l27.42">     // just to make the code below a bit more readable</span>
<a href="#l27.43"></a><span id="l27.43" class="difflineminus">-    nsLDAPBERValue *nsBerVal = </span>
<a href="#l27.44"></a><span id="l27.44" class="difflineplus">+    nsLDAPBERValue *nsBerVal =</span>
<a href="#l27.45"></a><span id="l27.45">       static_cast&lt;nsLDAPBERValue *&gt;(static_cast&lt;nsILDAPBERValue *&gt;</span>
<a href="#l27.46"></a><span id="l27.46">                              (mValue.get()));</span>
<a href="#l27.47"></a><span id="l27.47">     ctl-&gt;ldctl_value.bv_len = nsBerVal-&gt;mSize;</span>
<a href="#l27.48"></a><span id="l27.48"> </span>
<a href="#l27.49"></a><span id="l27.49">     if (!nsBerVal-&gt;mSize) {</span>
<a href="#l27.50"></a><span id="l27.50">       // a zero-length value is associated with this control</span>
<a href="#l27.51"></a><span id="l27.51">       return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l27.52"></a><span id="l27.52">     } else {</span>
<a href="#l27.53"></a><span id="l27.53" class="difflineat">@@ -105,17 +105,17 @@ nsLDAPControl::ToLDAPControl(LDAPControl</span>
<a href="#l27.54"></a><span id="l27.54">       // same for the berval itself</span>
<a href="#l27.55"></a><span id="l27.55">       ctl-&gt;ldctl_value.bv_len = nsBerVal-&gt;mSize;</span>
<a href="#l27.56"></a><span id="l27.56">       ctl-&gt;ldctl_value.bv_val = static_cast&lt;char *&gt;</span>
<a href="#l27.57"></a><span id="l27.57">                                            (PR_Malloc(nsBerVal-&gt;mSize));</span>
<a href="#l27.58"></a><span id="l27.58">       if (!ctl-&gt;ldctl_value.bv_val) {</span>
<a href="#l27.59"></a><span id="l27.59">         ldap_control_free(ctl);</span>
<a href="#l27.60"></a><span id="l27.60">         return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l27.61"></a><span id="l27.61">       }</span>
<a href="#l27.62"></a><span id="l27.62" class="difflineminus">-  </span>
<a href="#l27.63"></a><span id="l27.63" class="difflineplus">+</span>
<a href="#l27.64"></a><span id="l27.64">       memcpy(ctl-&gt;ldctl_value.bv_val, nsBerVal-&gt;mValue,</span>
<a href="#l27.65"></a><span id="l27.65">              ctl-&gt;ldctl_value.bv_len);</span>
<a href="#l27.66"></a><span id="l27.66">     }</span>
<a href="#l27.67"></a><span id="l27.67">   }</span>
<a href="#l27.68"></a><span id="l27.68"> </span>
<a href="#l27.69"></a><span id="l27.69">   *control = ctl;</span>
<a href="#l27.70"></a><span id="l27.70"> </span>
<a href="#l27.71"></a><span id="l27.71">   return NS_OK;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPControl.h</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPControl.h</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l28.4"></a><span id="l28.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l28.5"></a><span id="l28.5" class="difflineminus">- * </span>
<a href="#l28.6"></a><span id="l28.6" class="difflineplus">+ *</span>
<a href="#l28.7"></a><span id="l28.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l28.8"></a><span id="l28.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l28.9"></a><span id="l28.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11"> #include &quot;nsILDAPControl.h&quot;</span>
<a href="#l28.12"></a><span id="l28.12"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l28.13"></a><span id="l28.13"> #include &quot;nsILDAPBERValue.h&quot;</span>
<a href="#l28.14"></a><span id="l28.14"> #include &quot;nsString.h&quot;</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineat">@@ -20,17 +20,17 @@ class nsLDAPControl final : public nsILD</span>
<a href="#l28.16"></a><span id="l28.16"> public:</span>
<a href="#l28.17"></a><span id="l28.17">   NS_DECL_ISUPPORTS</span>
<a href="#l28.18"></a><span id="l28.18">   NS_DECL_NSILDAPCONTROL</span>
<a href="#l28.19"></a><span id="l28.19"> </span>
<a href="#l28.20"></a><span id="l28.20">   nsLDAPControl();</span>
<a href="#l28.21"></a><span id="l28.21"> </span>
<a href="#l28.22"></a><span id="l28.22">   /**</span>
<a href="#l28.23"></a><span id="l28.23">    * return a pointer to C-SDK compatible LDAPControl structure.  Note that</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineminus">-   * this is allocated with NS_Alloc and must be freed with NS_Free, both by </span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+   * this is allocated with NS_Alloc and must be freed with NS_Free, both by</span>
<a href="#l28.26"></a><span id="l28.26">    * ldap_control_free() and friends.</span>
<a href="#l28.27"></a><span id="l28.27">    *</span>
<a href="#l28.28"></a><span id="l28.28">    * @exception null pointer return if allocation failed</span>
<a href="#l28.29"></a><span id="l28.29">    */</span>
<a href="#l28.30"></a><span id="l28.30">   nsresult ToLDAPControl(LDAPControl **aControl);</span>
<a href="#l28.31"></a><span id="l28.31"> </span>
<a href="#l28.32"></a><span id="l28.32"> private:</span>
<a href="#l28.33"></a><span id="l28.33">   ~nsLDAPControl();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPMessage.cpp</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPMessage.cpp</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l29.4"></a><span id="l29.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l29.5"></a><span id="l29.5" class="difflineminus">- * </span>
<a href="#l29.6"></a><span id="l29.6" class="difflineplus">+ *</span>
<a href="#l29.7"></a><span id="l29.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l29.8"></a><span id="l29.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l29.9"></a><span id="l29.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l29.10"></a><span id="l29.10"> </span>
<a href="#l29.11"></a><span id="l29.11"> #include &quot;nsLDAPInternal.h&quot;</span>
<a href="#l29.12"></a><span id="l29.12"> #include &quot;nsLDAPMessage.h&quot;</span>
<a href="#l29.13"></a><span id="l29.13"> #include &quot;nspr.h&quot;</span>
<a href="#l29.14"></a><span id="l29.14"> #include &quot;nsDebug.h&quot;</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineat">@@ -26,17 +26,17 @@ NS_INTERFACE_MAP_BEGIN(nsLDAPMessage)</span>
<a href="#l29.16"></a><span id="l29.16">   NS_INTERFACE_MAP_ENTRY_AMBIGUOUS(nsISupports, nsILDAPMessage)</span>
<a href="#l29.17"></a><span id="l29.17">   NS_IMPL_QUERY_CLASSINFO(nsLDAPMessage)</span>
<a href="#l29.18"></a><span id="l29.18"> NS_INTERFACE_MAP_END</span>
<a href="#l29.19"></a><span id="l29.19"> NS_IMPL_CI_INTERFACE_GETTER(nsLDAPMessage, nsILDAPMessage)</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21"> </span>
<a href="#l29.22"></a><span id="l29.22"> // constructor</span>
<a href="#l29.23"></a><span id="l29.23"> //</span>
<a href="#l29.24"></a><span id="l29.24" class="difflineminus">-nsLDAPMessage::nsLDAPMessage() </span>
<a href="#l29.25"></a><span id="l29.25" class="difflineplus">+nsLDAPMessage::nsLDAPMessage()</span>
<a href="#l29.26"></a><span id="l29.26">     : mMsgHandle(0),</span>
<a href="#l29.27"></a><span id="l29.27">       mErrorCode(LDAP_SUCCESS),</span>
<a href="#l29.28"></a><span id="l29.28">       mMatchedDn(0),</span>
<a href="#l29.29"></a><span id="l29.29">       mErrorMessage(0),</span>
<a href="#l29.30"></a><span id="l29.30">       mReferrals(0),</span>
<a href="#l29.31"></a><span id="l29.31">       mServerControls(0)</span>
<a href="#l29.32"></a><span id="l29.32"> {</span>
<a href="#l29.33"></a><span id="l29.33"> }</span>
<a href="#l29.34"></a><span id="l29.34" class="difflineat">@@ -44,17 +44,17 @@ nsLDAPMessage::nsLDAPMessage()</span>
<a href="#l29.35"></a><span id="l29.35"> // destructor</span>
<a href="#l29.36"></a><span id="l29.36"> //</span>
<a href="#l29.37"></a><span id="l29.37"> nsLDAPMessage::~nsLDAPMessage(void)</span>
<a href="#l29.38"></a><span id="l29.38"> {</span>
<a href="#l29.39"></a><span id="l29.39">     if (mMsgHandle) {</span>
<a href="#l29.40"></a><span id="l29.40">         int rc = ldap_msgfree(mMsgHandle);</span>
<a href="#l29.41"></a><span id="l29.41"> </span>
<a href="#l29.42"></a><span id="l29.42"> // If you are having problems compiling the following code on a Solaris</span>
<a href="#l29.43"></a><span id="l29.43" class="difflineminus">-// machine with the Forte 6 Update 1 compilers, then you need to make </span>
<a href="#l29.44"></a><span id="l29.44" class="difflineplus">+// machine with the Forte 6 Update 1 compilers, then you need to make</span>
<a href="#l29.45"></a><span id="l29.45"> // sure you have applied all the required patches. See:</span>
<a href="#l29.46"></a><span id="l29.46"> // http://www.mozilla.org/unix/solaris-build.html for more details.</span>
<a href="#l29.47"></a><span id="l29.47"> </span>
<a href="#l29.48"></a><span id="l29.48">         switch(rc) {</span>
<a href="#l29.49"></a><span id="l29.49">         case LDAP_RES_BIND:</span>
<a href="#l29.50"></a><span id="l29.50">         case LDAP_RES_SEARCH_ENTRY:</span>
<a href="#l29.51"></a><span id="l29.51">         case LDAP_RES_SEARCH_RESULT:</span>
<a href="#l29.52"></a><span id="l29.52">         case LDAP_RES_MODIFY:</span>
<a href="#l29.53"></a><span id="l29.53" class="difflineat">@@ -64,25 +64,25 @@ nsLDAPMessage::~nsLDAPMessage(void)</span>
<a href="#l29.54"></a><span id="l29.54">         case LDAP_RES_COMPARE:</span>
<a href="#l29.55"></a><span id="l29.55">         case LDAP_RES_SEARCH_REFERENCE:</span>
<a href="#l29.56"></a><span id="l29.56">         case LDAP_RES_EXTENDED:</span>
<a href="#l29.57"></a><span id="l29.57">         case LDAP_RES_ANY:</span>
<a href="#l29.58"></a><span id="l29.58">             // success</span>
<a href="#l29.59"></a><span id="l29.59">             break;</span>
<a href="#l29.60"></a><span id="l29.60"> </span>
<a href="#l29.61"></a><span id="l29.61">         case LDAP_SUCCESS:</span>
<a href="#l29.62"></a><span id="l29.62" class="difflineminus">-            // timed out (dunno why LDAP_SUCCESS is used to indicate this) </span>
<a href="#l29.63"></a><span id="l29.63" class="difflineminus">-            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning, </span>
<a href="#l29.64"></a><span id="l29.64" class="difflineplus">+            // timed out (dunno why LDAP_SUCCESS is used to indicate this)</span>
<a href="#l29.65"></a><span id="l29.65" class="difflineplus">+            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning,</span>
<a href="#l29.66"></a><span id="l29.66">                    (&quot;nsLDAPMessage::~nsLDAPMessage: ldap_msgfree() &quot;</span>
<a href="#l29.67"></a><span id="l29.67">                     &quot;timed out\n&quot;));</span>
<a href="#l29.68"></a><span id="l29.68">             break;</span>
<a href="#l29.69"></a><span id="l29.69"> </span>
<a href="#l29.70"></a><span id="l29.70">         default:</span>
<a href="#l29.71"></a><span id="l29.71">             // other failure</span>
<a href="#l29.72"></a><span id="l29.72" class="difflineminus">-            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning, </span>
<a href="#l29.73"></a><span id="l29.73" class="difflineplus">+            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning,</span>
<a href="#l29.74"></a><span id="l29.74">                    (&quot;nsLDAPMessage::~nsLDAPMessage: ldap_msgfree() &quot;</span>
<a href="#l29.75"></a><span id="l29.75">                     &quot;failed: %s\n&quot;, ldap_err2string(rc)));</span>
<a href="#l29.76"></a><span id="l29.76">             break;</span>
<a href="#l29.77"></a><span id="l29.77">         }</span>
<a href="#l29.78"></a><span id="l29.78">     }</span>
<a href="#l29.79"></a><span id="l29.79"> </span>
<a href="#l29.80"></a><span id="l29.80">     if (mMatchedDn) {</span>
<a href="#l29.81"></a><span id="l29.81">         ldap_memfree(mMatchedDn);</span>
<a href="#l29.82"></a><span id="l29.82" class="difflineat">@@ -97,44 +97,44 @@ nsLDAPMessage::~nsLDAPMessage(void)</span>
<a href="#l29.83"></a><span id="l29.83">     }</span>
<a href="#l29.84"></a><span id="l29.84"> </span>
<a href="#l29.85"></a><span id="l29.85">     if (mServerControls) {</span>
<a href="#l29.86"></a><span id="l29.86">         ldap_controls_free(mServerControls);</span>
<a href="#l29.87"></a><span id="l29.87">     }</span>
<a href="#l29.88"></a><span id="l29.88"> </span>
<a href="#l29.89"></a><span id="l29.89"> }</span>
<a href="#l29.90"></a><span id="l29.90"> </span>
<a href="#l29.91"></a><span id="l29.91" class="difflineminus">-/** </span>
<a href="#l29.92"></a><span id="l29.92" class="difflineplus">+/**</span>
<a href="#l29.93"></a><span id="l29.93">  * Initializes a message.</span>
<a href="#l29.94"></a><span id="l29.94">  *</span>
<a href="#l29.95"></a><span id="l29.95">  * @param aConnection           The nsLDAPConnection this message is on</span>
<a href="#l29.96"></a><span id="l29.96">  * @param aMsgHandle            The native LDAPMessage to be wrapped.</span>
<a href="#l29.97"></a><span id="l29.97" class="difflineminus">- * </span>
<a href="#l29.98"></a><span id="l29.98" class="difflineplus">+ *</span>
<a href="#l29.99"></a><span id="l29.99">  * @exception NS_ERROR_ILLEGAL_VALUE        null pointer passed in</span>
<a href="#l29.100"></a><span id="l29.100">  * @exception NS_ERROR_UNEXPECTED           internal err; shouldn't happen</span>
<a href="#l29.101"></a><span id="l29.101">  * @exception NS_ERROR_LDAP_DECODING_ERROR  problem during BER decoding</span>
<a href="#l29.102"></a><span id="l29.102">  * @exception NS_ERROR_OUT_OF_MEMORY        ran out of memory</span>
<a href="#l29.103"></a><span id="l29.103">  */</span>
<a href="#l29.104"></a><span id="l29.104" class="difflineminus">-nsresult </span>
<a href="#l29.105"></a><span id="l29.105" class="difflineplus">+nsresult</span>
<a href="#l29.106"></a><span id="l29.106"> nsLDAPMessage::Init(nsILDAPConnection *aConnection, LDAPMessage *aMsgHandle)</span>
<a href="#l29.107"></a><span id="l29.107"> {</span>
<a href="#l29.108"></a><span id="l29.108" class="difflineminus">-    int parseResult; </span>
<a href="#l29.109"></a><span id="l29.109" class="difflineplus">+    int parseResult;</span>
<a href="#l29.110"></a><span id="l29.110"> </span>
<a href="#l29.111"></a><span id="l29.111">     if (!aConnection || !aMsgHandle) {</span>
<a href="#l29.112"></a><span id="l29.112">         NS_WARNING(&quot;Null pointer passed in to nsLDAPMessage::Init()&quot;);</span>
<a href="#l29.113"></a><span id="l29.113">         return NS_ERROR_ILLEGAL_VALUE;</span>
<a href="#l29.114"></a><span id="l29.114">     }</span>
<a href="#l29.115"></a><span id="l29.115"> </span>
<a href="#l29.116"></a><span id="l29.116">     // initialize the appropriate member vars</span>
<a href="#l29.117"></a><span id="l29.117">     //</span>
<a href="#l29.118"></a><span id="l29.118">     mConnection = aConnection;</span>
<a href="#l29.119"></a><span id="l29.119">     mMsgHandle = aMsgHandle;</span>
<a href="#l29.120"></a><span id="l29.120"> </span>
<a href="#l29.121"></a><span id="l29.121">     // cache the connection handle.  we're violating the XPCOM type-system</span>
<a href="#l29.122"></a><span id="l29.122" class="difflineminus">-    // here since we're a friend of the connection class and in the </span>
<a href="#l29.123"></a><span id="l29.123" class="difflineplus">+    // here since we're a friend of the connection class and in the</span>
<a href="#l29.124"></a><span id="l29.124">     // same module.</span>
<a href="#l29.125"></a><span id="l29.125">     //</span>
<a href="#l29.126"></a><span id="l29.126">     mConnectionHandle = static_cast&lt;nsLDAPConnection *&gt;(aConnection)-&gt;mConnectionHandle;</span>
<a href="#l29.127"></a><span id="l29.127"> </span>
<a href="#l29.128"></a><span id="l29.128">     // do any useful message parsing</span>
<a href="#l29.129"></a><span id="l29.129">     //</span>
<a href="#l29.130"></a><span id="l29.130">     const int msgType = ldap_msgtype(mMsgHandle);</span>
<a href="#l29.131"></a><span id="l29.131">     if ( msgType == -1) {</span>
<a href="#l29.132"></a><span id="l29.132" class="difflineat">@@ -158,32 +158,32 @@ nsLDAPMessage::Init(nsILDAPConnection *a</span>
<a href="#l29.133"></a><span id="l29.133"> </span>
<a href="#l29.134"></a><span id="l29.134">     case LDAP_RES_BIND:</span>
<a href="#l29.135"></a><span id="l29.135">     case LDAP_RES_SEARCH_RESULT:</span>
<a href="#l29.136"></a><span id="l29.136">     case LDAP_RES_MODIFY:</span>
<a href="#l29.137"></a><span id="l29.137">     case LDAP_RES_ADD:</span>
<a href="#l29.138"></a><span id="l29.138">     case LDAP_RES_DELETE:</span>
<a href="#l29.139"></a><span id="l29.139">     case LDAP_RES_MODRDN:</span>
<a href="#l29.140"></a><span id="l29.140">     case LDAP_RES_COMPARE:</span>
<a href="#l29.141"></a><span id="l29.141" class="difflineminus">-        parseResult = ldap_parse_result(mConnectionHandle, </span>
<a href="#l29.142"></a><span id="l29.142" class="difflineplus">+        parseResult = ldap_parse_result(mConnectionHandle,</span>
<a href="#l29.143"></a><span id="l29.143">                                         mMsgHandle, &amp;mErrorCode, &amp;mMatchedDn,</span>
<a href="#l29.144"></a><span id="l29.144" class="difflineminus">-                                        &amp;mErrorMessage,&amp;mReferrals, </span>
<a href="#l29.145"></a><span id="l29.145" class="difflineplus">+                                        &amp;mErrorMessage,&amp;mReferrals,</span>
<a href="#l29.146"></a><span id="l29.146">                                         &amp;mServerControls, 0);</span>
<a href="#l29.147"></a><span id="l29.147">         switch (parseResult) {</span>
<a href="#l29.148"></a><span id="l29.148" class="difflineminus">-        case LDAP_SUCCESS: </span>
<a href="#l29.149"></a><span id="l29.149" class="difflineplus">+        case LDAP_SUCCESS:</span>
<a href="#l29.150"></a><span id="l29.150">             // we're good</span>
<a href="#l29.151"></a><span id="l29.151">             break;</span>
<a href="#l29.152"></a><span id="l29.152"> </span>
<a href="#l29.153"></a><span id="l29.153">         case LDAP_DECODING_ERROR:</span>
<a href="#l29.154"></a><span id="l29.154">             NS_WARNING(&quot;nsLDAPMessage::Init(): ldap_parse_result() hit a &quot;</span>
<a href="#l29.155"></a><span id="l29.155">                        &quot;decoding error&quot;);</span>
<a href="#l29.156"></a><span id="l29.156">             return NS_ERROR_LDAP_DECODING_ERROR;</span>
<a href="#l29.157"></a><span id="l29.157"> </span>
<a href="#l29.158"></a><span id="l29.158">         case LDAP_NO_MEMORY:</span>
<a href="#l29.159"></a><span id="l29.159" class="difflineminus">-            NS_WARNING(&quot;nsLDAPMessage::Init(): ldap_parse_result() ran out &quot; </span>
<a href="#l29.160"></a><span id="l29.160" class="difflineplus">+            NS_WARNING(&quot;nsLDAPMessage::Init(): ldap_parse_result() ran out &quot;</span>
<a href="#l29.161"></a><span id="l29.161">                        &quot;of memory&quot;);</span>
<a href="#l29.162"></a><span id="l29.162">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.163"></a><span id="l29.163"> </span>
<a href="#l29.164"></a><span id="l29.164">         case LDAP_PARAM_ERROR:</span>
<a href="#l29.165"></a><span id="l29.165">         case LDAP_MORE_RESULTS_TO_RETURN:</span>
<a href="#l29.166"></a><span id="l29.166">         case LDAP_NO_RESULTS_RETURNED:</span>
<a href="#l29.167"></a><span id="l29.167">         default:</span>
<a href="#l29.168"></a><span id="l29.168">             NS_ERROR(&quot;nsLDAPMessage::Init(): ldap_parse_result returned &quot;</span>
<a href="#l29.169"></a><span id="l29.169" class="difflineat">@@ -230,25 +230,25 @@ nsLDAPMessage::GetType(int32_t *aType)</span>
<a href="#l29.170"></a><span id="l29.170">     if (*aType == -1) {</span>
<a href="#l29.171"></a><span id="l29.171">         return NS_ERROR_UNEXPECTED;</span>
<a href="#l29.172"></a><span id="l29.172">     };</span>
<a href="#l29.173"></a><span id="l29.173"> </span>
<a href="#l29.174"></a><span id="l29.174">     return NS_OK;</span>
<a href="#l29.175"></a><span id="l29.175"> }</span>
<a href="#l29.176"></a><span id="l29.176"> </span>
<a href="#l29.177"></a><span id="l29.177"> // we don't get to use exceptions, so we'll fake it.  this is an error</span>
<a href="#l29.178"></a><span id="l29.178" class="difflineminus">-// handler for IterateAttributes().  </span>
<a href="#l29.179"></a><span id="l29.179" class="difflineplus">+// handler for IterateAttributes().</span>
<a href="#l29.180"></a><span id="l29.180"> //</span>
<a href="#l29.181"></a><span id="l29.181"> nsresult</span>
<a href="#l29.182"></a><span id="l29.182" class="difflineminus">-nsLDAPMessage::IterateAttrErrHandler(int32_t aLderrno, uint32_t *aAttrCount, </span>
<a href="#l29.183"></a><span id="l29.183" class="difflineplus">+nsLDAPMessage::IterateAttrErrHandler(int32_t aLderrno, uint32_t *aAttrCount,</span>
<a href="#l29.184"></a><span id="l29.184">                                      char** *aAttributes, BerElement *position)</span>
<a href="#l29.185"></a><span id="l29.185"> {</span>
<a href="#l29.186"></a><span id="l29.186"> </span>
<a href="#l29.187"></a><span id="l29.187" class="difflineminus">-    // if necessary, free the position holder used by </span>
<a href="#l29.188"></a><span id="l29.188" class="difflineminus">-    // ldap_{first,next}_attribute()  </span>
<a href="#l29.189"></a><span id="l29.189" class="difflineplus">+    // if necessary, free the position holder used by</span>
<a href="#l29.190"></a><span id="l29.190" class="difflineplus">+    // ldap_{first,next}_attribute()</span>
<a href="#l29.191"></a><span id="l29.191">     //</span>
<a href="#l29.192"></a><span id="l29.192">     if (position) {</span>
<a href="#l29.193"></a><span id="l29.193">         ldap_ber_free(position, 0);</span>
<a href="#l29.194"></a><span id="l29.194">     }</span>
<a href="#l29.195"></a><span id="l29.195"> </span>
<a href="#l29.196"></a><span id="l29.196">     // deallocate any entries in the array that have been allocated, then</span>
<a href="#l29.197"></a><span id="l29.197">     // the array itself</span>
<a href="#l29.198"></a><span id="l29.198">     //</span>
<a href="#l29.199"></a><span id="l29.199" class="difflineat">@@ -279,32 +279,32 @@ nsLDAPMessage::IterateAttrErrHandler(int</span>
<a href="#l29.200"></a><span id="l29.200">     }</span>
<a href="#l29.201"></a><span id="l29.201"> </span>
<a href="#l29.202"></a><span id="l29.202">     NS_WARNING(&quot;nsLDAPMessage::IterateAttributes(): LDAP C SDK returned &quot;</span>
<a href="#l29.203"></a><span id="l29.203">                &quot;unexpected value; possible bug or memory corruption&quot;);</span>
<a href="#l29.204"></a><span id="l29.204">     return NS_ERROR_UNEXPECTED;</span>
<a href="#l29.205"></a><span id="l29.205"> }</span>
<a href="#l29.206"></a><span id="l29.206"> </span>
<a href="#l29.207"></a><span id="l29.207"> </span>
<a href="#l29.208"></a><span id="l29.208" class="difflineminus">-// wrapper for ldap_first_attribute </span>
<a href="#l29.209"></a><span id="l29.209" class="difflineplus">+// wrapper for ldap_first_attribute</span>
<a href="#l29.210"></a><span id="l29.210"> //</span>
<a href="#l29.211"></a><span id="l29.211"> NS_IMETHODIMP</span>
<a href="#l29.212"></a><span id="l29.212"> nsLDAPMessage::GetAttributes(uint32_t *aAttrCount, char** *aAttributes)</span>
<a href="#l29.213"></a><span id="l29.213"> {</span>
<a href="#l29.214"></a><span id="l29.214">     return IterateAttributes(aAttrCount, aAttributes, true);</span>
<a href="#l29.215"></a><span id="l29.215"> }</span>
<a href="#l29.216"></a><span id="l29.216"> </span>
<a href="#l29.217"></a><span id="l29.217"> // if getP is true, we get the attributes by recursing once</span>
<a href="#l29.218"></a><span id="l29.218"> // (without getP set) in order to fill in *attrCount, then allocate</span>
<a href="#l29.219"></a><span id="l29.219" class="difflineminus">-// and fill in the *aAttributes.  </span>
<a href="#l29.220"></a><span id="l29.220" class="difflineminus">-// </span>
<a href="#l29.221"></a><span id="l29.221" class="difflineplus">+// and fill in the *aAttributes.</span>
<a href="#l29.222"></a><span id="l29.222" class="difflineplus">+//</span>
<a href="#l29.223"></a><span id="l29.223"> // if getP is false, just fill in *attrCount and return</span>
<a href="#l29.224"></a><span id="l29.224" class="difflineminus">-// </span>
<a href="#l29.225"></a><span id="l29.225" class="difflineplus">+//</span>
<a href="#l29.226"></a><span id="l29.226"> nsresult</span>
<a href="#l29.227"></a><span id="l29.227" class="difflineminus">-nsLDAPMessage::IterateAttributes(uint32_t *aAttrCount, char** *aAttributes, </span>
<a href="#l29.228"></a><span id="l29.228" class="difflineplus">+nsLDAPMessage::IterateAttributes(uint32_t *aAttrCount, char** *aAttributes,</span>
<a href="#l29.229"></a><span id="l29.229">                  bool getP)</span>
<a href="#l29.230"></a><span id="l29.230"> {</span>
<a href="#l29.231"></a><span id="l29.231">     BerElement *position;</span>
<a href="#l29.232"></a><span id="l29.232">     nsresult rv;</span>
<a href="#l29.233"></a><span id="l29.233"> </span>
<a href="#l29.234"></a><span id="l29.234">     if (!aAttrCount || !aAttributes ) {</span>
<a href="#l29.235"></a><span id="l29.235">         return NS_ERROR_INVALID_POINTER;</span>
<a href="#l29.236"></a><span id="l29.236">     }</span>
<a href="#l29.237"></a><span id="l29.237" class="difflineat">@@ -322,86 +322,86 @@ nsLDAPMessage::IterateAttributes(uint32_</span>
<a href="#l29.238"></a><span id="l29.238"> </span>
<a href="#l29.239"></a><span id="l29.239">         // create an array of the appropriate size</span>
<a href="#l29.240"></a><span id="l29.240">         //</span>
<a href="#l29.241"></a><span id="l29.241">         *aAttributes = static_cast&lt;char **&gt;(moz_xmalloc(*aAttrCount *</span>
<a href="#l29.242"></a><span id="l29.242">                                                       sizeof(char *)));</span>
<a href="#l29.243"></a><span id="l29.243">         if (!*aAttributes) {</span>
<a href="#l29.244"></a><span id="l29.244">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.245"></a><span id="l29.245">         }</span>
<a href="#l29.246"></a><span id="l29.246" class="difflineminus">-    } </span>
<a href="#l29.247"></a><span id="l29.247" class="difflineplus">+    }</span>
<a href="#l29.248"></a><span id="l29.248"> </span>
<a href="#l29.249"></a><span id="l29.249">     // get the first attribute</span>
<a href="#l29.250"></a><span id="l29.250">     //</span>
<a href="#l29.251"></a><span id="l29.251" class="difflineminus">-    char *attr = ldap_first_attribute(mConnectionHandle, </span>
<a href="#l29.252"></a><span id="l29.252" class="difflineminus">-                                      mMsgHandle, </span>
<a href="#l29.253"></a><span id="l29.253" class="difflineplus">+    char *attr = ldap_first_attribute(mConnectionHandle,</span>
<a href="#l29.254"></a><span id="l29.254" class="difflineplus">+                                      mMsgHandle,</span>
<a href="#l29.255"></a><span id="l29.255">                                       &amp;position);</span>
<a href="#l29.256"></a><span id="l29.256">     if (!attr) {</span>
<a href="#l29.257"></a><span id="l29.257">         return IterateAttrErrHandler(ldap_get_lderrno(mConnectionHandle, 0, 0),</span>
<a href="#l29.258"></a><span id="l29.258">                                      aAttrCount, aAttributes, position);</span>
<a href="#l29.259"></a><span id="l29.259">     }</span>
<a href="#l29.260"></a><span id="l29.260"> </span>
<a href="#l29.261"></a><span id="l29.261">     // if we're getting attributes, try and fill in the first field</span>
<a href="#l29.262"></a><span id="l29.262">     //</span>
<a href="#l29.263"></a><span id="l29.263">     if (getP) {</span>
<a href="#l29.264"></a><span id="l29.264">         (*aAttributes)[0] = NS_strdup(attr);</span>
<a href="#l29.265"></a><span id="l29.265">         if (!(*aAttributes)[0]) {</span>
<a href="#l29.266"></a><span id="l29.266">             ldap_memfree(attr);</span>
<a href="#l29.267"></a><span id="l29.267">             free(*aAttributes);</span>
<a href="#l29.268"></a><span id="l29.268">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.269"></a><span id="l29.269">         }</span>
<a href="#l29.270"></a><span id="l29.270"> </span>
<a href="#l29.271"></a><span id="l29.271" class="difflineminus">-        // note that we start counting again, in order to keep our place in </span>
<a href="#l29.272"></a><span id="l29.272" class="difflineplus">+        // note that we start counting again, in order to keep our place in</span>
<a href="#l29.273"></a><span id="l29.273">         // the array so that we can unwind gracefully and avoid leakage if</span>
<a href="#l29.274"></a><span id="l29.274">         // we hit an error as we're filling in the array</span>
<a href="#l29.275"></a><span id="l29.275">         //</span>
<a href="#l29.276"></a><span id="l29.276">         *aAttrCount = 1;</span>
<a href="#l29.277"></a><span id="l29.277">     } else {</span>
<a href="#l29.278"></a><span id="l29.278"> </span>
<a href="#l29.279"></a><span id="l29.279">         // otherwise just update the count</span>
<a href="#l29.280"></a><span id="l29.280">         //</span>
<a href="#l29.281"></a><span id="l29.281">         *aAttrCount = 1;</span>
<a href="#l29.282"></a><span id="l29.282">     }</span>
<a href="#l29.283"></a><span id="l29.283">     ldap_memfree(attr);</span>
<a href="#l29.284"></a><span id="l29.284"> </span>
<a href="#l29.285"></a><span id="l29.285">     while (1) {</span>
<a href="#l29.286"></a><span id="l29.286" class="difflineminus">-    </span>
<a href="#l29.287"></a><span id="l29.287" class="difflineplus">+</span>
<a href="#l29.288"></a><span id="l29.288">         // get the next attribute</span>
<a href="#l29.289"></a><span id="l29.289">         //</span>
<a href="#l29.290"></a><span id="l29.290">         attr = ldap_next_attribute(mConnectionHandle, mMsgHandle, position);</span>
<a href="#l29.291"></a><span id="l29.291"> </span>
<a href="#l29.292"></a><span id="l29.292">         // check to see if there is an error, or if we're just done iterating</span>
<a href="#l29.293"></a><span id="l29.293">         //</span>
<a href="#l29.294"></a><span id="l29.294">         if (!attr) {</span>
<a href="#l29.295"></a><span id="l29.295" class="difflineminus">-            </span>
<a href="#l29.296"></a><span id="l29.296" class="difflineplus">+ </span>
<a href="#l29.297"></a><span id="l29.297">             // bail out if there's an error</span>
<a href="#l29.298"></a><span id="l29.298">             //</span>
<a href="#l29.299"></a><span id="l29.299">             int32_t lderrno = ldap_get_lderrno(mConnectionHandle, 0, 0);</span>
<a href="#l29.300"></a><span id="l29.300">             if (lderrno != LDAP_SUCCESS) {</span>
<a href="#l29.301"></a><span id="l29.301" class="difflineminus">-                return IterateAttrErrHandler(lderrno, aAttrCount, aAttributes, </span>
<a href="#l29.302"></a><span id="l29.302" class="difflineplus">+                return IterateAttrErrHandler(lderrno, aAttrCount, aAttributes,</span>
<a href="#l29.303"></a><span id="l29.303">                                              position);</span>
<a href="#l29.304"></a><span id="l29.304">             }</span>
<a href="#l29.305"></a><span id="l29.305"> </span>
<a href="#l29.306"></a><span id="l29.306">             // otherwise, there are no more attributes; we're done with</span>
<a href="#l29.307"></a><span id="l29.307">             // the while loop</span>
<a href="#l29.308"></a><span id="l29.308">             //</span>
<a href="#l29.309"></a><span id="l29.309">             break;</span>
<a href="#l29.310"></a><span id="l29.310"> </span>
<a href="#l29.311"></a><span id="l29.311">         } else if (getP) {</span>
<a href="#l29.312"></a><span id="l29.312"> </span>
<a href="#l29.313"></a><span id="l29.313" class="difflineminus">-            // if ldap_next_attribute did return successfully, and </span>
<a href="#l29.314"></a><span id="l29.314" class="difflineplus">+            // if ldap_next_attribute did return successfully, and</span>
<a href="#l29.315"></a><span id="l29.315">             // we're supposed to fill in a value, do so.</span>
<a href="#l29.316"></a><span id="l29.316">             //</span>
<a href="#l29.317"></a><span id="l29.317">             (*aAttributes)[*aAttrCount] = NS_strdup(attr);</span>
<a href="#l29.318"></a><span id="l29.318">             if (!(*aAttributes)[*aAttrCount]) {</span>
<a href="#l29.319"></a><span id="l29.319">                 ldap_memfree(attr);</span>
<a href="#l29.320"></a><span id="l29.320" class="difflineminus">-                return IterateAttrErrHandler(LDAP_NO_MEMORY, aAttrCount, </span>
<a href="#l29.321"></a><span id="l29.321" class="difflineplus">+                return IterateAttrErrHandler(LDAP_NO_MEMORY, aAttrCount,</span>
<a href="#l29.322"></a><span id="l29.322">                                              aAttributes, position);</span>
<a href="#l29.323"></a><span id="l29.323">             }</span>
<a href="#l29.324"></a><span id="l29.324" class="difflineminus">-       </span>
<a href="#l29.325"></a><span id="l29.325" class="difflineplus">+</span>
<a href="#l29.326"></a><span id="l29.326">         }</span>
<a href="#l29.327"></a><span id="l29.327">         ldap_memfree(attr);</span>
<a href="#l29.328"></a><span id="l29.328"> </span>
<a href="#l29.329"></a><span id="l29.329">         // we're done using *aAttrCount as a c-style array index (ie starting</span>
<a href="#l29.330"></a><span id="l29.330">         // at 0).  update it to reflect the number of elements now in the array</span>
<a href="#l29.331"></a><span id="l29.331">         //</span>
<a href="#l29.332"></a><span id="l29.332">         *aAttrCount += 1;</span>
<a href="#l29.333"></a><span id="l29.333">     }</span>
<a href="#l29.334"></a><span id="l29.334" class="difflineat">@@ -443,39 +443,39 @@ NS_IMETHODIMP nsLDAPMessage::GetDn(nsACS</span>
<a href="#l29.335"></a><span id="l29.335">     ldap_memfree(rawDn);</span>
<a href="#l29.336"></a><span id="l29.336"> </span>
<a href="#l29.337"></a><span id="l29.337">     return NS_OK;</span>
<a href="#l29.338"></a><span id="l29.338"> }</span>
<a href="#l29.339"></a><span id="l29.339"> </span>
<a href="#l29.340"></a><span id="l29.340"> // wrapper for ldap_get_values()</span>
<a href="#l29.341"></a><span id="l29.341"> //</span>
<a href="#l29.342"></a><span id="l29.342"> NS_IMETHODIMP</span>
<a href="#l29.343"></a><span id="l29.343" class="difflineminus">-nsLDAPMessage::GetValues(const char *aAttr, uint32_t *aCount, </span>
<a href="#l29.344"></a><span id="l29.344" class="difflineplus">+nsLDAPMessage::GetValues(const char *aAttr, uint32_t *aCount,</span>
<a href="#l29.345"></a><span id="l29.345">                          char16_t ***aValues)</span>
<a href="#l29.346"></a><span id="l29.346"> {</span>
<a href="#l29.347"></a><span id="l29.347">     char **values;</span>
<a href="#l29.348"></a><span id="l29.348" class="difflineminus">-    </span>
<a href="#l29.349"></a><span id="l29.349" class="difflineplus">+</span>
<a href="#l29.350"></a><span id="l29.350"> #if defined(DEBUG)</span>
<a href="#l29.351"></a><span id="l29.351">     // We only want this being logged for debug builds so as not to affect performance too much.</span>
<a href="#l29.352"></a><span id="l29.352">     MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Debug,</span>
<a href="#l29.353"></a><span id="l29.353">            (&quot;nsLDAPMessage::GetValues(): called with aAttr = '%s'&quot;, aAttr));</span>
<a href="#l29.354"></a><span id="l29.354"> #endif</span>
<a href="#l29.355"></a><span id="l29.355"> </span>
<a href="#l29.356"></a><span id="l29.356">     values = ldap_get_values(mConnectionHandle, mMsgHandle, aAttr);</span>
<a href="#l29.357"></a><span id="l29.357"> </span>
<a href="#l29.358"></a><span id="l29.358">     // bail out if there was a problem</span>
<a href="#l29.359"></a><span id="l29.359">     //</span>
<a href="#l29.360"></a><span id="l29.360">     if (!values) {</span>
<a href="#l29.361"></a><span id="l29.361">         int32_t lderrno = ldap_get_lderrno(mConnectionHandle, 0, 0);</span>
<a href="#l29.362"></a><span id="l29.362"> </span>
<a href="#l29.363"></a><span id="l29.363">         if ( lderrno == LDAP_DECODING_ERROR ) {</span>
<a href="#l29.364"></a><span id="l29.364" class="difflineminus">-            // this may not be an error; it could just be that the </span>
<a href="#l29.365"></a><span id="l29.365" class="difflineplus">+            // this may not be an error; it could just be that the</span>
<a href="#l29.366"></a><span id="l29.366">             // caller has asked for an attribute that doesn't exist.</span>
<a href="#l29.367"></a><span id="l29.367">             //</span>
<a href="#l29.368"></a><span id="l29.368" class="difflineminus">-            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning, </span>
<a href="#l29.369"></a><span id="l29.369" class="difflineplus">+            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning,</span>
<a href="#l29.370"></a><span id="l29.370">                    (&quot;nsLDAPMessage::GetValues(): ldap_get_values returned &quot;</span>
<a href="#l29.371"></a><span id="l29.371">                     &quot;LDAP_DECODING_ERROR&quot;));</span>
<a href="#l29.372"></a><span id="l29.372">             return NS_ERROR_LDAP_DECODING_ERROR;</span>
<a href="#l29.373"></a><span id="l29.373"> </span>
<a href="#l29.374"></a><span id="l29.374">         } else if ( lderrno == LDAP_PARAM_ERROR ) {</span>
<a href="#l29.375"></a><span id="l29.375">             NS_ERROR(&quot;nsLDAPMessage::GetValues(): internal error: 1&quot;);</span>
<a href="#l29.376"></a><span id="l29.376">             return NS_ERROR_UNEXPECTED;</span>
<a href="#l29.377"></a><span id="l29.377"> </span>
<a href="#l29.378"></a><span id="l29.378" class="difflineat">@@ -492,68 +492,68 @@ nsLDAPMessage::GetValues(const char *aAt</span>
<a href="#l29.379"></a><span id="l29.379">     // create an array of the appropriate size</span>
<a href="#l29.380"></a><span id="l29.380">     //</span>
<a href="#l29.381"></a><span id="l29.381">     *aValues = static_cast&lt;char16_t **&gt;(moz_xmalloc(numVals * sizeof(char16_t *)));</span>
<a href="#l29.382"></a><span id="l29.382">     if (!*aValues) {</span>
<a href="#l29.383"></a><span id="l29.383">         ldap_value_free(values);</span>
<a href="#l29.384"></a><span id="l29.384">         return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.385"></a><span id="l29.385">     }</span>
<a href="#l29.386"></a><span id="l29.386"> </span>
<a href="#l29.387"></a><span id="l29.387" class="difflineminus">-    // clone the array (except for the trailing NULL entry) using the </span>
<a href="#l29.388"></a><span id="l29.388" class="difflineplus">+    // clone the array (except for the trailing NULL entry) using the</span>
<a href="#l29.389"></a><span id="l29.389">     // shared allocator for XPCOM correctness</span>
<a href="#l29.390"></a><span id="l29.390">     //</span>
<a href="#l29.391"></a><span id="l29.391">     uint32_t i;</span>
<a href="#l29.392"></a><span id="l29.392">     for ( i = 0 ; i &lt; numVals ; i++ ) {</span>
<a href="#l29.393"></a><span id="l29.393">         nsDependentCString sValue(values[i]);</span>
<a href="#l29.394"></a><span id="l29.394">         if (IsUTF8(sValue))</span>
<a href="#l29.395"></a><span id="l29.395">             (*aValues)[i] = ToNewUnicode(NS_ConvertUTF8toUTF16(sValue));</span>
<a href="#l29.396"></a><span id="l29.396">         else</span>
<a href="#l29.397"></a><span id="l29.397">             (*aValues)[i] = ToNewUnicode(NS_ConvertASCIItoUTF16(sValue));</span>
<a href="#l29.398"></a><span id="l29.398">         if ( ! (*aValues)[i] ) {</span>
<a href="#l29.399"></a><span id="l29.399">             NS_FREE_XPCOM_ALLOCATED_POINTER_ARRAY(i, aValues);</span>
<a href="#l29.400"></a><span id="l29.400">             ldap_value_free(values);</span>
<a href="#l29.401"></a><span id="l29.401">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.402"></a><span id="l29.402">         }</span>
<a href="#l29.403"></a><span id="l29.403">     }</span>
<a href="#l29.404"></a><span id="l29.404"> </span>
<a href="#l29.405"></a><span id="l29.405" class="difflineminus">-    // now free our value array since we already cloned the values array </span>
<a href="#l29.406"></a><span id="l29.406" class="difflineplus">+    // now free our value array since we already cloned the values array</span>
<a href="#l29.407"></a><span id="l29.407">     // to the 'aValues' results array.</span>
<a href="#l29.408"></a><span id="l29.408">     ldap_value_free(values);</span>
<a href="#l29.409"></a><span id="l29.409"> </span>
<a href="#l29.410"></a><span id="l29.410">     *aCount = numVals;</span>
<a href="#l29.411"></a><span id="l29.411">     return NS_OK;</span>
<a href="#l29.412"></a><span id="l29.412"> }</span>
<a href="#l29.413"></a><span id="l29.413"> </span>
<a href="#l29.414"></a><span id="l29.414"> // wrapper for get_values_len</span>
<a href="#l29.415"></a><span id="l29.415"> //</span>
<a href="#l29.416"></a><span id="l29.416" class="difflineminus">-NS_IMETHODIMP </span>
<a href="#l29.417"></a><span id="l29.417" class="difflineplus">+NS_IMETHODIMP</span>
<a href="#l29.418"></a><span id="l29.418"> nsLDAPMessage::GetBinaryValues(const char *aAttr, uint32_t *aCount,</span>
<a href="#l29.419"></a><span id="l29.419">                                nsILDAPBERValue ***aValues)</span>
<a href="#l29.420"></a><span id="l29.420"> {</span>
<a href="#l29.421"></a><span id="l29.421">     struct berval **values;</span>
<a href="#l29.422"></a><span id="l29.422"> </span>
<a href="#l29.423"></a><span id="l29.423"> #if defined(DEBUG)</span>
<a href="#l29.424"></a><span id="l29.424">     // We only want this being logged for debug builds so as not to affect performance too much.</span>
<a href="#l29.425"></a><span id="l29.425">     MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Debug,</span>
<a href="#l29.426"></a><span id="l29.426" class="difflineminus">-           (&quot;nsLDAPMessage::GetBinaryValues(): called with aAttr = '%s'&quot;, </span>
<a href="#l29.427"></a><span id="l29.427" class="difflineplus">+           (&quot;nsLDAPMessage::GetBinaryValues(): called with aAttr = '%s'&quot;,</span>
<a href="#l29.428"></a><span id="l29.428">             aAttr));</span>
<a href="#l29.429"></a><span id="l29.429"> #endif</span>
<a href="#l29.430"></a><span id="l29.430"> </span>
<a href="#l29.431"></a><span id="l29.431">     values = ldap_get_values_len(mConnectionHandle, mMsgHandle, aAttr);</span>
<a href="#l29.432"></a><span id="l29.432"> </span>
<a href="#l29.433"></a><span id="l29.433">     // bail out if there was a problem</span>
<a href="#l29.434"></a><span id="l29.434">     //</span>
<a href="#l29.435"></a><span id="l29.435">     if (!values) {</span>
<a href="#l29.436"></a><span id="l29.436">         int32_t lderrno = ldap_get_lderrno(mConnectionHandle, 0, 0);</span>
<a href="#l29.437"></a><span id="l29.437"> </span>
<a href="#l29.438"></a><span id="l29.438">         if ( lderrno == LDAP_DECODING_ERROR ) {</span>
<a href="#l29.439"></a><span id="l29.439" class="difflineminus">-            // this may not be an error; it could just be that the </span>
<a href="#l29.440"></a><span id="l29.440" class="difflineplus">+            // this may not be an error; it could just be that the</span>
<a href="#l29.441"></a><span id="l29.441">             // caller has asked for an attribute that doesn't exist.</span>
<a href="#l29.442"></a><span id="l29.442">             //</span>
<a href="#l29.443"></a><span id="l29.443" class="difflineminus">-            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning, </span>
<a href="#l29.444"></a><span id="l29.444" class="difflineplus">+            MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Warning,</span>
<a href="#l29.445"></a><span id="l29.445">                    (&quot;nsLDAPMessage::GetBinaryValues(): ldap_get_values &quot;</span>
<a href="#l29.446"></a><span id="l29.446">                     &quot;returned LDAP_DECODING_ERROR&quot;));</span>
<a href="#l29.447"></a><span id="l29.447">             return NS_ERROR_LDAP_DECODING_ERROR;</span>
<a href="#l29.448"></a><span id="l29.448"> </span>
<a href="#l29.449"></a><span id="l29.449">         } else if ( lderrno == LDAP_PARAM_ERROR ) {</span>
<a href="#l29.450"></a><span id="l29.450">             NS_ERROR(&quot;nsLDAPMessage::GetBinaryValues(): internal error: 1&quot;);</span>
<a href="#l29.451"></a><span id="l29.451">             return NS_ERROR_UNEXPECTED;</span>
<a href="#l29.452"></a><span id="l29.452"> </span>
<a href="#l29.453"></a><span id="l29.453" class="difflineat">@@ -564,24 +564,24 @@ nsLDAPMessage::GetBinaryValues(const cha</span>
<a href="#l29.454"></a><span id="l29.454">     }</span>
<a href="#l29.455"></a><span id="l29.455"> </span>
<a href="#l29.456"></a><span id="l29.456">     // count the values</span>
<a href="#l29.457"></a><span id="l29.457">     //</span>
<a href="#l29.458"></a><span id="l29.458">     uint32_t numVals = ldap_count_values_len(values);</span>
<a href="#l29.459"></a><span id="l29.459"> </span>
<a href="#l29.460"></a><span id="l29.460">     // create the out array</span>
<a href="#l29.461"></a><span id="l29.461">     //</span>
<a href="#l29.462"></a><span id="l29.462" class="difflineminus">-    *aValues = </span>
<a href="#l29.463"></a><span id="l29.463" class="difflineplus">+    *aValues =</span>
<a href="#l29.464"></a><span id="l29.464">         static_cast&lt;nsILDAPBERValue **&gt;(moz_xmalloc(numVals * sizeof(nsILDAPBERValue)));</span>
<a href="#l29.465"></a><span id="l29.465">     if (!aValues) {</span>
<a href="#l29.466"></a><span id="l29.466">         ldap_value_free_len(values);</span>
<a href="#l29.467"></a><span id="l29.467">         return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.468"></a><span id="l29.468">     }</span>
<a href="#l29.469"></a><span id="l29.469"> </span>
<a href="#l29.470"></a><span id="l29.470" class="difflineminus">-    // clone the array (except for the trailing NULL entry) using the </span>
<a href="#l29.471"></a><span id="l29.471" class="difflineplus">+    // clone the array (except for the trailing NULL entry) using the</span>
<a href="#l29.472"></a><span id="l29.472">     // shared allocator for XPCOM correctness</span>
<a href="#l29.473"></a><span id="l29.473">     //</span>
<a href="#l29.474"></a><span id="l29.474">     uint32_t i;</span>
<a href="#l29.475"></a><span id="l29.475">     nsresult rv;</span>
<a href="#l29.476"></a><span id="l29.476">     for ( i = 0 ; i &lt; numVals ; i++ ) {</span>
<a href="#l29.477"></a><span id="l29.477"> </span>
<a href="#l29.478"></a><span id="l29.478">         // create an nsBERValue object</span>
<a href="#l29.479"></a><span id="l29.479">         //</span>
<a href="#l29.480"></a><span id="l29.480" class="difflineat">@@ -591,17 +591,17 @@ nsLDAPMessage::GetBinaryValues(const cha</span>
<a href="#l29.481"></a><span id="l29.481">                      &quot; creating nsLDAPBERValue object&quot;);</span>
<a href="#l29.482"></a><span id="l29.482">             NS_FREE_XPCOM_ALLOCATED_POINTER_ARRAY(i, aValues);</span>
<a href="#l29.483"></a><span id="l29.483">             ldap_value_free_len(values);</span>
<a href="#l29.484"></a><span id="l29.484">             return NS_ERROR_OUT_OF_MEMORY;</span>
<a href="#l29.485"></a><span id="l29.485">         }</span>
<a href="#l29.486"></a><span id="l29.486"> </span>
<a href="#l29.487"></a><span id="l29.487">         // copy the value from the struct into the nsBERValue</span>
<a href="#l29.488"></a><span id="l29.488">         //</span>
<a href="#l29.489"></a><span id="l29.489" class="difflineminus">-        rv = berValue-&gt;Set(values[i]-&gt;bv_len, </span>
<a href="#l29.490"></a><span id="l29.490" class="difflineplus">+        rv = berValue-&gt;Set(values[i]-&gt;bv_len,</span>
<a href="#l29.491"></a><span id="l29.491">                            reinterpret_cast&lt;uint8_t *&gt;(values[i]-&gt;bv_val));</span>
<a href="#l29.492"></a><span id="l29.492">         if (NS_FAILED(rv)) {</span>
<a href="#l29.493"></a><span id="l29.493">             NS_ERROR(&quot;nsLDAPMessage::GetBinaryValues(): error setting&quot;</span>
<a href="#l29.494"></a><span id="l29.494">                      &quot; nsBERValue&quot;);</span>
<a href="#l29.495"></a><span id="l29.495">             ldap_value_free_len(values);</span>
<a href="#l29.496"></a><span id="l29.496">             return rv == NS_ERROR_OUT_OF_MEMORY ? rv : NS_ERROR_UNEXPECTED;</span>
<a href="#l29.497"></a><span id="l29.497">         }</span>
<a href="#l29.498"></a><span id="l29.498"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPModification.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPModification.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -148,11 +148,11 @@ nsLDAPModification::SetUpModificationOne</span>
<a href="#l30.4"></a><span id="l30.4">   nsresult rv;</span>
<a href="#l30.5"></a><span id="l30.5"> </span>
<a href="#l30.6"></a><span id="l30.6">   if (!mValues)</span>
<a href="#l30.7"></a><span id="l30.7">     mValues = do_CreateInstance(NS_ARRAY_CONTRACTID, &amp;rv);</span>
<a href="#l30.8"></a><span id="l30.8">   else</span>
<a href="#l30.9"></a><span id="l30.9">     rv = mValues-&gt;Clear();</span>
<a href="#l30.10"></a><span id="l30.10"> </span>
<a href="#l30.11"></a><span id="l30.11">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-  </span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+</span>
<a href="#l30.14"></a><span id="l30.14">   return mValues-&gt;AppendElement(aValue);</span>
<a href="#l30.15"></a><span id="l30.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPOperation.h</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPOperation.h</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l31.4"></a><span id="l31.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l31.5"></a><span id="l31.5" class="difflineminus">- * </span>
<a href="#l31.6"></a><span id="l31.6" class="difflineplus">+ *</span>
<a href="#l31.7"></a><span id="l31.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l31.8"></a><span id="l31.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l31.9"></a><span id="l31.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l31.10"></a><span id="l31.10"> </span>
<a href="#l31.11"></a><span id="l31.11"> #ifndef _nsLDAPOperation_h_</span>
<a href="#l31.12"></a><span id="l31.12"> #define _nsLDAPOperation_h_</span>
<a href="#l31.13"></a><span id="l31.13"> </span>
<a href="#l31.14"></a><span id="l31.14"> #include &quot;ldap.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPProtocolModule.cpp</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPProtocolModule.cpp</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l32.4"></a><span id="l32.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l32.5"></a><span id="l32.5" class="difflineminus">- * </span>
<a href="#l32.6"></a><span id="l32.6" class="difflineplus">+ *</span>
<a href="#l32.7"></a><span id="l32.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l32.8"></a><span id="l32.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l32.9"></a><span id="l32.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11"> #include &quot;nsIClassInfoImpl.h&quot;</span>
<a href="#l32.12"></a><span id="l32.12"> #include &quot;mozilla/ModuleUtils.h&quot;</span>
<a href="#l32.13"></a><span id="l32.13"> </span>
<a href="#l32.14"></a><span id="l32.14"> #include &quot;nsLDAPInternal.h&quot;</span>
<a href="#l32.15"></a><span id="l32.15" class="difflineat">@@ -100,20 +100,20 @@ nsLDAPInitialize()</span>
<a href="#l32.16"></a><span id="l32.16"> </span>
<a href="#l32.17"></a><span id="l32.17">     if (rv != LDAP_SUCCESS) {</span>
<a href="#l32.18"></a><span id="l32.18">         MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Error,</span>
<a href="#l32.19"></a><span id="l32.19">                (&quot;nsLDAPInitialize(): pr_ldap_install_routines() failed: %s\n&quot;,</span>
<a href="#l32.20"></a><span id="l32.20">                ldap_err2string(rv)));</span>
<a href="#l32.21"></a><span id="l32.21">         return NS_ERROR_FAILURE;</span>
<a href="#l32.22"></a><span id="l32.22">     }</span>
<a href="#l32.23"></a><span id="l32.23"> </span>
<a href="#l32.24"></a><span id="l32.24" class="difflineminus">-    // Never block for more than 10000 milliseconds (ie 10 seconds) doing any </span>
<a href="#l32.25"></a><span id="l32.25" class="difflineplus">+    // Never block for more than 10000 milliseconds (ie 10 seconds) doing any</span>
<a href="#l32.26"></a><span id="l32.26">     // sort of I/O operation.</span>
<a href="#l32.27"></a><span id="l32.27">     //</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineminus">-    rv = prldap_set_session_option(0, 0, PRLDAP_OPT_IO_MAX_TIMEOUT, </span>
<a href="#l32.29"></a><span id="l32.29" class="difflineplus">+    rv = prldap_set_session_option(0, 0, PRLDAP_OPT_IO_MAX_TIMEOUT,</span>
<a href="#l32.30"></a><span id="l32.30">                                    10000);</span>
<a href="#l32.31"></a><span id="l32.31">     if (rv != LDAP_SUCCESS) {</span>
<a href="#l32.32"></a><span id="l32.32">         MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Error,</span>
<a href="#l32.33"></a><span id="l32.33">                (&quot;nsLDAPInitialize(): error setting PRLDAP_OPT_IO_MAX_TIMEOUT:&quot;</span>
<a href="#l32.34"></a><span id="l32.34">                 &quot; %s\n&quot;, ldap_err2string(rv)));</span>
<a href="#l32.35"></a><span id="l32.35">         return NS_ERROR_FAILURE;</span>
<a href="#l32.36"></a><span id="l32.36">     }</span>
<a href="#l32.37"></a><span id="l32.37"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPSecurityGlue.cpp</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPSecurityGlue.cpp</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -78,20 +78,20 @@ nsLDAPSSLClose(int s, struct lextiof_soc</span>
<a href="#l33.4"></a><span id="l33.4">                  (&amp;socketInfo.soinfo_appdata));</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6">     // call the real close function</span>
<a href="#l33.7"></a><span id="l33.7">     //</span>
<a href="#l33.8"></a><span id="l33.8">     return (*(sessionClosure-&gt;realClose))(s, socketarg);</span>
<a href="#l33.9"></a><span id="l33.9"> }</span>
<a href="#l33.10"></a><span id="l33.10"> </span>
<a href="#l33.11"></a><span id="l33.11"> // Replacement connection function.  Calls the real connect function,</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-// </span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+//</span>
<a href="#l33.14"></a><span id="l33.14"> extern &quot;C&quot; int LDAP_CALLBACK</span>
<a href="#l33.15"></a><span id="l33.15"> nsLDAPSSLConnect(const char *hostlist, int defport, int timeout,</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineminus">-		 unsigned long options, </span>
<a href="#l33.17"></a><span id="l33.17" class="difflineplus">+		 unsigned long options,</span>
<a href="#l33.18"></a><span id="l33.18"> 		 struct lextiof_session_private *sessionarg,</span>
<a href="#l33.19"></a><span id="l33.19"> 		 struct lextiof_socket_private **socketargp )</span>
<a href="#l33.20"></a><span id="l33.20"> {</span>
<a href="#l33.21"></a><span id="l33.21">     PRLDAPSocketInfo socketInfo;</span>
<a href="#l33.22"></a><span id="l33.22">     PRLDAPSessionInfo sessionInfo;</span>
<a href="#l33.23"></a><span id="l33.23">     nsLDAPSSLSocketClosure *socketClosure = nullptr;</span>
<a href="#l33.24"></a><span id="l33.24">     nsLDAPSSLSessionClosure *sessionClosure;</span>
<a href="#l33.25"></a><span id="l33.25">     int	intfd = -1;</span>
<a href="#l33.26"></a><span id="l33.26" class="difflineat">@@ -99,37 +99,37 @@ nsLDAPSSLConnect(const char *hostlist, i</span>
<a href="#l33.27"></a><span id="l33.27">     nsCOMPtr &lt;nsISocketProvider&gt; tlsSocketProvider;</span>
<a href="#l33.28"></a><span id="l33.28">     nsCOMPtr &lt;nsISSLSocketControl&gt; sslSocketControl;</span>
<a href="#l33.29"></a><span id="l33.29">     nsresult rv;</span>
<a href="#l33.30"></a><span id="l33.30"> </span>
<a href="#l33.31"></a><span id="l33.31">     // Ensure secure option is set.  Also, clear secure bit in options</span>
<a href="#l33.32"></a><span id="l33.32">     // the we pass to the standard connect() function (since it doesn't know</span>
<a href="#l33.33"></a><span id="l33.33">     // how to handle the secure option).</span>
<a href="#l33.34"></a><span id="l33.34">     //</span>
<a href="#l33.35"></a><span id="l33.35" class="difflineminus">-    NS_ASSERTION(options &amp; LDAP_X_EXTIOF_OPT_SECURE, </span>
<a href="#l33.36"></a><span id="l33.36" class="difflineplus">+    NS_ASSERTION(options &amp; LDAP_X_EXTIOF_OPT_SECURE,</span>
<a href="#l33.37"></a><span id="l33.37"> 		 &quot;nsLDAPSSLConnect(): called for non-secure connection&quot;);</span>
<a href="#l33.38"></a><span id="l33.38">     options &amp;= ~LDAP_X_EXTIOF_OPT_SECURE;</span>
<a href="#l33.39"></a><span id="l33.39"> </span>
<a href="#l33.40"></a><span id="l33.40">     // Retrieve session info. so we can store a pointer to our session info.</span>
<a href="#l33.41"></a><span id="l33.41">     // in our socket info. later.</span>
<a href="#l33.42"></a><span id="l33.42">     //</span>
<a href="#l33.43"></a><span id="l33.43">     memset(&amp;sessionInfo, 0, sizeof(sessionInfo));</span>
<a href="#l33.44"></a><span id="l33.44">     sessionInfo.seinfo_size = PRLDAP_SESSIONINFO_SIZE;</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-    if (prldap_get_session_info(nullptr, sessionarg, &amp;sessionInfo) </span>
<a href="#l33.46"></a><span id="l33.46" class="difflineplus">+    if (prldap_get_session_info(nullptr, sessionarg, &amp;sessionInfo)</span>
<a href="#l33.47"></a><span id="l33.47"> 	!= LDAP_SUCCESS) {</span>
<a href="#l33.48"></a><span id="l33.48"> 	NS_ERROR(&quot;nsLDAPSSLConnect(): unable to get session info&quot;);</span>
<a href="#l33.49"></a><span id="l33.49">         return -1;</span>
<a href="#l33.50"></a><span id="l33.50">     }</span>
<a href="#l33.51"></a><span id="l33.51">     sessionClosure = reinterpret_cast&lt;nsLDAPSSLSessionClosure *&gt;</span>
<a href="#l33.52"></a><span id="l33.52">                                      (sessionInfo.seinfo_appdata);</span>
<a href="#l33.53"></a><span id="l33.53" class="difflineminus">-    </span>
<a href="#l33.54"></a><span id="l33.54" class="difflineplus">+</span>
<a href="#l33.55"></a><span id="l33.55">     // Call the real connect() callback to make the TCP connection.  If it</span>
<a href="#l33.56"></a><span id="l33.56">     // succeeds, *socketargp is set.</span>
<a href="#l33.57"></a><span id="l33.57">     //</span>
<a href="#l33.58"></a><span id="l33.58" class="difflineminus">-    intfd = (*(sessionClosure-&gt;realConnect))(hostlist, defport, timeout, </span>
<a href="#l33.59"></a><span id="l33.59" class="difflineplus">+    intfd = (*(sessionClosure-&gt;realConnect))(hostlist, defport, timeout,</span>
<a href="#l33.60"></a><span id="l33.60"> 					     options, sessionarg, socketargp);</span>
<a href="#l33.61"></a><span id="l33.61">     if ( intfd &lt; 0 ) {</span>
<a href="#l33.62"></a><span id="l33.62"> 	MOZ_LOG(gLDAPLogModule, mozilla::LogLevel::Debug,</span>
<a href="#l33.63"></a><span id="l33.63"> 	       (&quot;nsLDAPSSLConnect(): standard connect() function returned %d&quot;,</span>
<a href="#l33.64"></a><span id="l33.64"> 		intfd));</span>
<a href="#l33.65"></a><span id="l33.65">         return intfd;</span>
<a href="#l33.66"></a><span id="l33.66">     }</span>
<a href="#l33.67"></a><span id="l33.67"> </span>
<a href="#l33.68"></a><span id="l33.68" class="difflineat">@@ -150,19 +150,19 @@ nsLDAPSSLConnect(const char *hostlist, i</span>
<a href="#l33.69"></a><span id="l33.69"> 				       sizeof(nsLDAPSSLSocketClosure)));</span>
<a href="#l33.70"></a><span id="l33.70">     if (!socketClosure) {</span>
<a href="#l33.71"></a><span id="l33.71"> 	NS_WARNING(&quot;nsLDAPSSLConnect(): unable to allocate socket closure&quot;);</span>
<a href="#l33.72"></a><span id="l33.72"> 	goto close_socket_and_exit_with_error;</span>
<a href="#l33.73"></a><span id="l33.73">     }</span>
<a href="#l33.74"></a><span id="l33.74">     memset(socketClosure, 0, sizeof(nsLDAPSSLSocketClosure));</span>
<a href="#l33.75"></a><span id="l33.75">     socketClosure-&gt;sessionClosure = sessionClosure;</span>
<a href="#l33.76"></a><span id="l33.76"> </span>
<a href="#l33.77"></a><span id="l33.77" class="difflineminus">-    // Add the NSPR layer for SSL provided by PSM to this socket. </span>
<a href="#l33.78"></a><span id="l33.78" class="difflineplus">+    // Add the NSPR layer for SSL provided by PSM to this socket.</span>
<a href="#l33.79"></a><span id="l33.79">     //</span>
<a href="#l33.80"></a><span id="l33.80" class="difflineminus">-    tlsSocketProvider = do_GetService(NS_STARTTLSSOCKETPROVIDER_CONTRACTID, </span>
<a href="#l33.81"></a><span id="l33.81" class="difflineplus">+    tlsSocketProvider = do_GetService(NS_STARTTLSSOCKETPROVIDER_CONTRACTID,</span>
<a href="#l33.82"></a><span id="l33.82"> 				      &amp;rv);</span>
<a href="#l33.83"></a><span id="l33.83">     if (NS_FAILED(rv)) {</span>
<a href="#l33.84"></a><span id="l33.84"> 	NS_ERROR(&quot;nsLDAPSSLConnect(): unable to get socket provider service&quot;);</span>
<a href="#l33.85"></a><span id="l33.85">         goto close_socket_and_exit_with_error;</span>
<a href="#l33.86"></a><span id="l33.86">     }</span>
<a href="#l33.87"></a><span id="l33.87">     // XXXdmose: Note that hostlist can be a list of hosts (in the</span>
<a href="#l33.88"></a><span id="l33.88">     // current XPCOM SDK code, it will always be a list of IP</span>
<a href="#l33.89"></a><span id="l33.89">     // addresses).  Because of this, we need to use</span>
<a href="#l33.90"></a><span id="l33.90" class="difflineat">@@ -261,17 +261,17 @@ nsLDAPSSLDisposeHandle(LDAP *ld, struct </span>
<a href="#l33.91"></a><span id="l33.91">     memset(&amp;sessionInfo, 0, sizeof(sessionInfo));</span>
<a href="#l33.92"></a><span id="l33.92">     sessionInfo.seinfo_size = PRLDAP_SESSIONINFO_SIZE;</span>
<a href="#l33.93"></a><span id="l33.93">     if (prldap_get_session_info(ld, nullptr, &amp;sessionInfo) == LDAP_SUCCESS) {</span>
<a href="#l33.94"></a><span id="l33.94"> 	sessionClosure = reinterpret_cast&lt;nsLDAPSSLSessionClosure *&gt;</span>
<a href="#l33.95"></a><span id="l33.95">                                   (sessionInfo.seinfo_appdata);</span>
<a href="#l33.96"></a><span id="l33.96"> 	disposehdl_fn = sessionClosure-&gt;realDisposeHandle;</span>
<a href="#l33.97"></a><span id="l33.97"> 	nsLDAPSSLFreeSessionClosure(&amp;sessionClosure);</span>
<a href="#l33.98"></a><span id="l33.98"> 	(*disposehdl_fn)(ld, sessionarg);</span>
<a href="#l33.99"></a><span id="l33.99" class="difflineminus">-    } </span>
<a href="#l33.100"></a><span id="l33.100" class="difflineplus">+    }</span>
<a href="#l33.101"></a><span id="l33.101"> }</span>
<a href="#l33.102"></a><span id="l33.102"> </span>
<a href="#l33.103"></a><span id="l33.103"> // Installs appropriate routines and data for making this connection</span>
<a href="#l33.104"></a><span id="l33.104"> // handle SSL.  The aHostName is ultimately passed to PSM and is used to</span>
<a href="#l33.105"></a><span id="l33.105"> // validate certificates.</span>
<a href="#l33.106"></a><span id="l33.106"> //</span>
<a href="#l33.107"></a><span id="l33.107"> nsresult</span>
<a href="#l33.108"></a><span id="l33.108"> nsLDAPInstallSSL( LDAP *ld, const char *aHostName)</span>
<a href="#l33.109"></a><span id="l33.109" class="difflineat">@@ -289,17 +289,17 @@ nsLDAPInstallSSL( LDAP *ld, const char *</span>
<a href="#l33.110"></a><span id="l33.110">     }</span>
<a href="#l33.111"></a><span id="l33.111">     memset(sessionClosure, 0, sizeof(nsLDAPSSLSessionClosure));</span>
<a href="#l33.112"></a><span id="l33.112"> </span>
<a href="#l33.113"></a><span id="l33.113">     // Override a few functions, saving a pointer to the original function</span>
<a href="#l33.114"></a><span id="l33.114">     // in each case so we can call it from our SSL savvy functions.</span>
<a href="#l33.115"></a><span id="l33.115">     //</span>
<a href="#l33.116"></a><span id="l33.116">     memset(&amp;iofns, 0, sizeof(iofns));</span>
<a href="#l33.117"></a><span id="l33.117">     iofns.lextiof_size = LDAP_X_EXTIO_FNS_SIZE;</span>
<a href="#l33.118"></a><span id="l33.118" class="difflineminus">-    if (ldap_get_option(ld, LDAP_X_OPT_EXTIO_FN_PTRS, </span>
<a href="#l33.119"></a><span id="l33.119" class="difflineplus">+    if (ldap_get_option(ld, LDAP_X_OPT_EXTIO_FN_PTRS,</span>
<a href="#l33.120"></a><span id="l33.120"> 			static_cast&lt;void *&gt;(&amp;iofns)) != LDAP_SUCCESS) {</span>
<a href="#l33.121"></a><span id="l33.121"> 	NS_ERROR(&quot;nsLDAPInstallSSL(): unexpected error getting&quot;</span>
<a href="#l33.122"></a><span id="l33.122"> 		 &quot; LDAP_X_OPT_EXTIO_FN_PTRS&quot;);</span>
<a href="#l33.123"></a><span id="l33.123"> 	nsLDAPSSLFreeSessionClosure(&amp;sessionClosure);</span>
<a href="#l33.124"></a><span id="l33.124">         return NS_ERROR_UNEXPECTED;</span>
<a href="#l33.125"></a><span id="l33.125">     }</span>
<a href="#l33.126"></a><span id="l33.126"> </span>
<a href="#l33.127"></a><span id="l33.127">     // Make a copy of the hostname to pass to AddToSocket later</span>
<a href="#l33.128"></a><span id="l33.128" class="difflineat">@@ -315,17 +315,17 @@ nsLDAPInstallSSL( LDAP *ld, const char *</span>
<a href="#l33.129"></a><span id="l33.129">     //</span>
<a href="#l33.130"></a><span id="l33.130">     sessionClosure-&gt;realClose = iofns.lextiof_close;</span>
<a href="#l33.131"></a><span id="l33.131">     iofns.lextiof_close = nsLDAPSSLClose;</span>
<a href="#l33.132"></a><span id="l33.132">     sessionClosure-&gt;realConnect = iofns.lextiof_connect;</span>
<a href="#l33.133"></a><span id="l33.133">     iofns.lextiof_connect = nsLDAPSSLConnect;</span>
<a href="#l33.134"></a><span id="l33.134">     sessionClosure-&gt;realDisposeHandle = iofns.lextiof_disposehandle;</span>
<a href="#l33.135"></a><span id="l33.135">     iofns.lextiof_disposehandle = nsLDAPSSLDisposeHandle;</span>
<a href="#l33.136"></a><span id="l33.136"> </span>
<a href="#l33.137"></a><span id="l33.137" class="difflineminus">-    if (ldap_set_option(ld, LDAP_X_OPT_EXTIO_FN_PTRS, </span>
<a href="#l33.138"></a><span id="l33.138" class="difflineplus">+    if (ldap_set_option(ld, LDAP_X_OPT_EXTIO_FN_PTRS,</span>
<a href="#l33.139"></a><span id="l33.139"> 			static_cast&lt;void *&gt;(&amp;iofns)) != LDAP_SUCCESS) {</span>
<a href="#l33.140"></a><span id="l33.140"> 	NS_ERROR(&quot;nsLDAPInstallSSL(): error setting LDAP_X_OPT_EXTIO_FN_PTRS&quot;);</span>
<a href="#l33.141"></a><span id="l33.141"> 	nsLDAPSSLFreeSessionClosure(&amp;sessionClosure);</span>
<a href="#l33.142"></a><span id="l33.142">         return NS_ERROR_FAILURE;</span>
<a href="#l33.143"></a><span id="l33.143">     }</span>
<a href="#l33.144"></a><span id="l33.144"> </span>
<a href="#l33.145"></a><span id="l33.145">     // Store session info. for later retrieval.</span>
<a href="#l33.146"></a><span id="l33.146">     //</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPServer.cpp</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPServer.cpp</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l34.4"></a><span id="l34.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l34.5"></a><span id="l34.5" class="difflineminus">- * </span>
<a href="#l34.6"></a><span id="l34.6" class="difflineplus">+ *</span>
<a href="#l34.7"></a><span id="l34.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l34.8"></a><span id="l34.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l34.9"></a><span id="l34.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11"> #include &quot;nsLDAPServer.h&quot;</span>
<a href="#l34.12"></a><span id="l34.12"> </span>
<a href="#l34.13"></a><span id="l34.13"> NS_IMPL_ISUPPORTS(nsLDAPServer, nsILDAPServer)</span>
<a href="#l34.14"></a><span id="l34.14"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPServer.h</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPServer.h</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l35.4"></a><span id="l35.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l35.5"></a><span id="l35.5" class="difflineminus">- * </span>
<a href="#l35.6"></a><span id="l35.6" class="difflineplus">+ *</span>
<a href="#l35.7"></a><span id="l35.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l35.8"></a><span id="l35.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l35.9"></a><span id="l35.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l35.10"></a><span id="l35.10"> </span>
<a href="#l35.11"></a><span id="l35.11"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l35.12"></a><span id="l35.12"> #include &quot;nsString.h&quot;</span>
<a href="#l35.13"></a><span id="l35.13"> #include &quot;nsILDAPServer.h&quot;</span>
<a href="#l35.14"></a><span id="l35.14"> #include &quot;nsILDAPURL.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPService.h</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPService.h</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l36.4"></a><span id="l36.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l36.5"></a><span id="l36.5" class="difflineminus">- * </span>
<a href="#l36.6"></a><span id="l36.6" class="difflineplus">+ *</span>
<a href="#l36.7"></a><span id="l36.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l36.8"></a><span id="l36.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l36.9"></a><span id="l36.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l36.10"></a><span id="l36.10"> </span>
<a href="#l36.11"></a><span id="l36.11"> #include &quot;ldap.h&quot;</span>
<a href="#l36.12"></a><span id="l36.12"> #include &quot;nsString.h&quot;</span>
<a href="#l36.13"></a><span id="l36.13"> #include &quot;nsCOMArray.h&quot;</span>
<a href="#l36.14"></a><span id="l36.14"> #include &quot;nsDataHashtable.h&quot;</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineat">@@ -12,17 +12,17 @@</span>
<a href="#l36.16"></a><span id="l36.16"> #include &quot;nsILDAPMessage.h&quot;</span>
<a href="#l36.17"></a><span id="l36.17"> #include &quot;nsILDAPMessageListener.h&quot;</span>
<a href="#l36.18"></a><span id="l36.18"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l36.19"></a><span id="l36.19"> #include &quot;nsILDAPServer.h&quot;</span>
<a href="#l36.20"></a><span id="l36.20"> #include &quot;nsILDAPConnection.h&quot;</span>
<a href="#l36.21"></a><span id="l36.21"> #include &quot;nsILDAPMessage.h&quot;</span>
<a href="#l36.22"></a><span id="l36.22"> #include &quot;mozilla/Mutex.h&quot;</span>
<a href="#l36.23"></a><span id="l36.23"> </span>
<a href="#l36.24"></a><span id="l36.24" class="difflineminus">-// 6a89ae33-7a90-430d-888c-0dede53a951a </span>
<a href="#l36.25"></a><span id="l36.25" class="difflineplus">+// 6a89ae33-7a90-430d-888c-0dede53a951a</span>
<a href="#l36.26"></a><span id="l36.26"> //</span>
<a href="#l36.27"></a><span id="l36.27"> #define NS_LDAPSERVICE_CID \</span>
<a href="#l36.28"></a><span id="l36.28"> { \</span>
<a href="#l36.29"></a><span id="l36.29">   0x6a89ae33, 0x7a90, 0x430d, \</span>
<a href="#l36.30"></a><span id="l36.30">   {0x88, 0x8c, 0x0d, 0xed, 0xe5, 0x3a, 0x95, 0x1a} \</span>
<a href="#l36.31"></a><span id="l36.31"> }</span>
<a href="#l36.32"></a><span id="l36.32"> </span>
<a href="#l36.33"></a><span id="l36.33"> // This is a little &quot;helper&quot; class, we use to store information</span>
<a href="#l36.34"></a><span id="l36.34" class="difflineat">@@ -65,52 +65,51 @@ class nsLDAPServiceEntry</span>
<a href="#l36.35"></a><span id="l36.35">     bool mDelete;           // This entry is due for deletion</span>
<a href="#l36.36"></a><span id="l36.36">     bool mRebinding;        // Keep state if we are rebinding or not</span>
<a href="#l36.37"></a><span id="l36.37"> </span>
<a href="#l36.38"></a><span id="l36.38">     nsCOMPtr&lt;nsILDAPServer&gt; mServer;</span>
<a href="#l36.39"></a><span id="l36.39">     nsCOMPtr&lt;nsILDAPConnection&gt; mConnection;</span>
<a href="#l36.40"></a><span id="l36.40">     nsCOMPtr&lt;nsILDAPMessage&gt; mMessage;</span>
<a href="#l36.41"></a><span id="l36.41"> </span>
<a href="#l36.42"></a><span id="l36.42">     // Array holding all the pending callbacks (listeners) for this entry</span>
<a href="#l36.43"></a><span id="l36.43" class="difflineminus">-    nsCOMArray&lt;nsILDAPMessageListener&gt; mListeners;  </span>
<a href="#l36.44"></a><span id="l36.44" class="difflineplus">+    nsCOMArray&lt;nsILDAPMessageListener&gt; mListeners;</span>
<a href="#l36.45"></a><span id="l36.45"> };</span>
<a href="#l36.46"></a><span id="l36.46"> </span>
<a href="#l36.47"></a><span id="l36.47"> // This is the interface we're implementing.</span>
<a href="#l36.48"></a><span id="l36.48"> //</span>
<a href="#l36.49"></a><span id="l36.49"> class nsLDAPService : public nsILDAPService, public nsILDAPMessageListener</span>
<a href="#l36.50"></a><span id="l36.50"> {</span>
<a href="#l36.51"></a><span id="l36.51" class="difflineminus">-  public: </span>
<a href="#l36.52"></a><span id="l36.52" class="difflineplus">+  public:</span>
<a href="#l36.53"></a><span id="l36.53">     // interface decls</span>
<a href="#l36.54"></a><span id="l36.54">     //</span>
<a href="#l36.55"></a><span id="l36.55">     NS_DECL_THREADSAFE_ISUPPORTS</span>
<a href="#l36.56"></a><span id="l36.56">     NS_DECL_NSILDAPSERVICE</span>
<a href="#l36.57"></a><span id="l36.57">     NS_DECL_NSILDAPMESSAGELISTENER</span>
<a href="#l36.58"></a><span id="l36.58"> </span>
<a href="#l36.59"></a><span id="l36.59">     // constructor and destructor</span>
<a href="#l36.60"></a><span id="l36.60">     //</span>
<a href="#l36.61"></a><span id="l36.61">     nsLDAPService();</span>
<a href="#l36.62"></a><span id="l36.62" class="difflineminus">-    </span>
<a href="#l36.63"></a><span id="l36.63" class="difflineplus">+</span>
<a href="#l36.64"></a><span id="l36.64">     nsresult Init();</span>
<a href="#l36.65"></a><span id="l36.65"> </span>
<a href="#l36.66"></a><span id="l36.66">   protected:</span>
<a href="#l36.67"></a><span id="l36.67">     virtual ~nsLDAPService();</span>
<a href="#l36.68"></a><span id="l36.68">     nsresult EstablishConnection(nsLDAPServiceEntry *,</span>
<a href="#l36.69"></a><span id="l36.69">                                  nsILDAPMessageListener *);</span>
<a href="#l36.70"></a><span id="l36.70"> </span>
<a href="#l36.71"></a><span id="l36.71" class="difflineminus">-    // kinda like strtok_r, but with iterators.  for use by </span>
<a href="#l36.72"></a><span id="l36.72" class="difflineplus">+    // kinda like strtok_r, but with iterators.  for use by</span>
<a href="#l36.73"></a><span id="l36.73">     // createFilter</span>
<a href="#l36.74"></a><span id="l36.74">     //</span>
<a href="#l36.75"></a><span id="l36.75">     char *NextToken(const char **aIter, const char **aIterEnd);</span>
<a href="#l36.76"></a><span id="l36.76"> </span>
<a href="#l36.77"></a><span id="l36.77">     // count how many tokens are in this string; for use by</span>
<a href="#l36.78"></a><span id="l36.78">     // createFilter; note that unlike with NextToken, these params</span>
<a href="#l36.79"></a><span id="l36.79">     // are copies, not references.</span>
<a href="#l36.80"></a><span id="l36.80">     //</span>
<a href="#l36.81"></a><span id="l36.81">     uint32_t CountTokens(const char * aIter, const char * aIterEnd);</span>
<a href="#l36.82"></a><span id="l36.82" class="difflineminus">-                   </span>
<a href="#l36.83"></a><span id="l36.83" class="difflineminus">-    </span>
<a href="#l36.84"></a><span id="l36.84" class="difflineplus">+</span>
<a href="#l36.85"></a><span id="l36.85">     mozilla::Mutex mLock;       // Lock mechanism</span>
<a href="#l36.86"></a><span id="l36.86"> </span>
<a href="#l36.87"></a><span id="l36.87">     // Hash table holding server entries</span>
<a href="#l36.88"></a><span id="l36.88">     nsDataHashtable&lt;nsStringHashKey, nsLDAPServiceEntry*&gt; mServers;</span>
<a href="#l36.89"></a><span id="l36.89">     // Hash table holding &quot;reverse&quot; lookups from connection to server</span>
<a href="#l36.90"></a><span id="l36.90">     nsDataHashtable&lt;nsVoidPtrHashKey, nsLDAPServiceEntry*&gt; mConnections;</span>
<a href="#l36.91"></a><span id="l36.91"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPSyncQuery.h</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPSyncQuery.h</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -36,23 +36,23 @@ class nsLDAPSyncQuery : public nsILDAPSy</span>
<a href="#l37.4"></a><span id="l37.4">     nsCOMPtr&lt;nsILDAPOperation&gt; mOperation;   // current ldap op</span>
<a href="#l37.5"></a><span id="l37.5">     nsCOMPtr&lt;nsILDAPURL&gt; mServerURL;         // LDAP URL</span>
<a href="#l37.6"></a><span id="l37.6">     bool mFinished;                        // control variable for eventQ</span>
<a href="#l37.7"></a><span id="l37.7">     nsString mResults;                       // values to return</span>
<a href="#l37.8"></a><span id="l37.8">     uint32_t mProtocolVersion;               // LDAP version to use</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10">     nsresult InitConnection();</span>
<a href="#l37.11"></a><span id="l37.11">     // check that we bound ok and start then call StartLDAPSearch</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-    nsresult OnLDAPBind(nsILDAPMessage *aMessage); </span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+    nsresult OnLDAPBind(nsILDAPMessage *aMessage);</span>
<a href="#l37.14"></a><span id="l37.14"> </span>
<a href="#l37.15"></a><span id="l37.15">     // add to the results set</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineminus">-    nsresult OnLDAPSearchEntry(nsILDAPMessage *aMessage); </span>
<a href="#l37.17"></a><span id="l37.17" class="difflineplus">+    nsresult OnLDAPSearchEntry(nsILDAPMessage *aMessage);</span>
<a href="#l37.18"></a><span id="l37.18"> </span>
<a href="#l37.19"></a><span id="l37.19"> </span>
<a href="#l37.20"></a><span id="l37.20" class="difflineminus">-    nsresult OnLDAPSearchResult(nsILDAPMessage *aMessage); </span>
<a href="#l37.21"></a><span id="l37.21" class="difflineplus">+    nsresult OnLDAPSearchResult(nsILDAPMessage *aMessage);</span>
<a href="#l37.22"></a><span id="l37.22"> </span>
<a href="#l37.23"></a><span id="l37.23">     // kick off a search</span>
<a href="#l37.24"></a><span id="l37.24">     nsresult StartLDAPSearch();</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineminus">-    </span>
<a href="#l37.26"></a><span id="l37.26" class="difflineplus">+</span>
<a href="#l37.27"></a><span id="l37.27">     // Clean up after the LDAP Query is done.</span>
<a href="#l37.28"></a><span id="l37.28">     void FinishLDAPQuery();</span>
<a href="#l37.29"></a><span id="l37.29"> };</span>
<a href="#l37.30"></a><span id="l37.30"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/ldap/xpcom/src/nsLDAPURL.h</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/ldap/xpcom/src/nsLDAPURL.h</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -1,10 +1,10 @@</span>
<a href="#l38.4"></a><span id="l38.4"> /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l38.5"></a><span id="l38.5" class="difflineminus">- * </span>
<a href="#l38.6"></a><span id="l38.6" class="difflineplus">+ *</span>
<a href="#l38.7"></a><span id="l38.7">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l38.8"></a><span id="l38.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l38.9"></a><span id="l38.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l38.10"></a><span id="l38.10"> </span>
<a href="#l38.11"></a><span id="l38.11"> #include &quot;ldap.h&quot;</span>
<a href="#l38.12"></a><span id="l38.12"> #include &quot;nsString.h&quot;</span>
<a href="#l38.13"></a><span id="l38.13"> #include &quot;nsILDAPURL.h&quot;</span>
<a href="#l38.14"></a><span id="l38.14"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineat">@@ -14,17 +14,17 @@</span>
<a href="#l38.16"></a><span id="l38.16"> #define NS_LDAPURL_CID \</span>
<a href="#l38.17"></a><span id="l38.17"> { 0xcb7c67f8, 0x0053, 0x4072, \</span>
<a href="#l38.18"></a><span id="l38.18">   { 0x89, 0xe9, 0x50, 0x1c, 0xbd, 0x1b, 0x35, 0xab}}</span>
<a href="#l38.19"></a><span id="l38.19"> </span>
<a href="#l38.20"></a><span id="l38.20"> /**</span>
<a href="#l38.21"></a><span id="l38.21">  * nsLDAPURL</span>
<a href="#l38.22"></a><span id="l38.22">  *</span>
<a href="#l38.23"></a><span id="l38.23">  * nsLDAPURL uses an nsStandardURL stored in mBaseURL as its main url formatter.</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineminus">- * </span>
<a href="#l38.25"></a><span id="l38.25" class="difflineplus">+ *</span>
<a href="#l38.26"></a><span id="l38.26">  * This is done to ensure that the pre-path sections of the URI are correctly</span>
<a href="#l38.27"></a><span id="l38.27">  * formatted and to re-use the functions for nsIURI as appropriate.</span>
<a href="#l38.28"></a><span id="l38.28">  *</span>
<a href="#l38.29"></a><span id="l38.29">  * Handling of the path sections of the URI are done within nsLDAPURL/parts of</span>
<a href="#l38.30"></a><span id="l38.30">  * the LDAP c-sdk. nsLDAPURL holds the individual sections of the path of the</span>
<a href="#l38.31"></a><span id="l38.31">  * URI locally (to allow convenient get/set), but always updates the mBaseURL</span>
<a href="#l38.32"></a><span id="l38.32">  * when one changes to ensure that mBaseURL.spec and the local data are kept</span>
<a href="#l38.33"></a><span id="l38.33">  * consistent.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

