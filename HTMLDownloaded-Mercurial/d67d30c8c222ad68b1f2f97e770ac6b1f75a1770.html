<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20045:d67d30c8c222ad68b1f2f97e770ac6b1f75a1770</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ d67d30c8c222ad68b1f2f97e770ac6b1f75a1770" />
<meta property="og:url" content="/comm-central/rev/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - enable space-in-parens rule. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / d67d30c8c222ad68b1f2f97e770ac6b1f75a1770 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">shortlog</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">files</a> |
changeset |
<a href="/comm-central/raw-rev/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">raw</a>  | <a href="/comm-central/archive/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable space-in-parens rule. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 11:19:19 +0200</td></tr>

<tr>
 <td>changeset 20045</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">d67d30c8c222ad68b1f2f97e770ac6b1f75a1770</a></td>
</tr>



<tr>
<td>parent 20044</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/332b96ae958ea1363628fb66362bd7533e2b613c">332b96ae958ea1363628fb66362bd7533e2b613c</a>
</td>
</tr>

<tr>
<td>child 20046</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f3dc3e4a87d4590884873d9248b3e6f6a01f0165">f3dc3e4a87d4590884873d9248b3e6f6a01f0165</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=d67d30c8c222ad68b1f2f97e770ac6b1f75a1770">12297</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Fri, 16 Sep 2016 20:17:21 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f3dc3e4a87d4 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&newProject=comm-central&newRevision=a7312b12f00f6b39084b768a6252669ed641d0b4&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&newProject=comm-central&newRevision=a7312b12f00f6b39084b768a6252669ed641d0b4&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f3dc3e4a87d4590884873d9248b3e6f6a01f0165&newProject=comm-central&newRevision=a7312b12f00f6b39084b768a6252669ed641d0b4&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - enable space-in-parens rule. r=MakeMyDay

MozReview-Commit-ID: 7vXJhppuzrj</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/agenda-listbox.js">calendar/base/content/agenda-listbox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/agenda-listbox.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/agenda-listbox.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/agenda-listbox.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/agenda-listbox.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/agenda-listbox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-month-view.xml">calendar/base/content/calendar-month-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-month-view.xml">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-month-view.xml">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-month-view.xml">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-month-view.xml">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-month-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.js">calendar/base/content/calendar-task-tree.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-ui-utils.js">calendar/base/content/calendar-ui-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-ui-utils.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-ui-utils.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-ui-utils.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-ui-utils.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/calendar-ui-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/import-export.js">calendar/base/content/import-export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/import-export.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/import-export.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/import-export.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/import-export.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/import-export.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/widgets/minimonth.xml">calendar/base/content/widgets/minimonth.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/widgets/minimonth.xml">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/widgets/minimonth.xml">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/widgets/minimonth.xml">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/widgets/minimonth.xml">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/content/widgets/minimonth.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/modules/calProviderUtils.jsm">calendar/base/modules/calProviderUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/modules/calProviderUtils.jsm">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/modules/calProviderUtils.jsm">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/modules/calProviderUtils.jsm">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/modules/calProviderUtils.jsm">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/modules/calProviderUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calDateTimeFormatter.js">calendar/base/src/calDateTimeFormatter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calDateTimeFormatter.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calDateTimeFormatter.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calDateTimeFormatter.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calDateTimeFormatter.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calDateTimeFormatter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/import-export/calOutlookCSVImportExport.js">calendar/import-export/calOutlookCSVImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/import-export/calOutlookCSVImportExport.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/import-export/calOutlookCSVImportExport.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/import-export/calOutlookCSVImportExport.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/import-export/calOutlookCSVImportExport.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/import-export/calOutlookCSVImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapCalendarItems.js">calendar/providers/wcap/calWcapCalendarItems.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapCalendarItems.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapCalendarItems.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapCalendarItems.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapCalendarItems.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapCalendarItems.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapRequest.js">calendar/providers/wcap/calWcapRequest.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapRequest.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapRequest.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapRequest.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapRequest.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/providers/wcap/calWcapRequest.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/datetimepickers/datetimepickers.xml">calendar/resources/content/datetimepickers/datetimepickers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/datetimepickers/datetimepickers.xml">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/datetimepickers/datetimepickers.xml">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/datetimepickers/datetimepickers.xml">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/datetimepickers/datetimepickers.xml">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/datetimepickers/datetimepickers.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/mouseoverPreviews.js">calendar/resources/content/mouseoverPreviews.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/mouseoverPreviews.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/mouseoverPreviews.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/mouseoverPreviews.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/mouseoverPreviews.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/mouseoverPreviews.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publish.js">calendar/resources/content/publish.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publish.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publish.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publish.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publish.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publish.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publishDialog.js">calendar/resources/content/publishDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publishDialog.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publishDialog.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publishDialog.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publishDialog.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/resources/content/publishDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/test/mozmill/shared-modules/calendar-utils.js">calendar/test/mozmill/shared-modules/calendar-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/test/mozmill/shared-modules/calendar-utils.js">file</a> |
<a href="/comm-central/annotate/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/test/mozmill/shared-modules/calendar-utils.js">annotate</a> |
<a href="/comm-central/diff/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/test/mozmill/shared-modules/calendar-utils.js">diff</a> |
<a href="/comm-central/comparison/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/test/mozmill/shared-modules/calendar-utils.js">comparison</a> |
<a href="/comm-central/log/d67d30c8c222ad68b1f2f97e770ac6b1f75a1770/calendar/test/mozmill/shared-modules/calendar-utils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -164,16 +164,19 @@</span>
<a href="#l1.4"></a><span id="l1.4"> </span>
<a href="#l1.5"></a><span id="l1.5">     // Disallow use of assignment in return statement. It is preferable for a</span>
<a href="#l1.6"></a><span id="l1.6">     // single line of code to have only one easily predictable effect.</span>
<a href="#l1.7"></a><span id="l1.7">     &quot;no-return-assign&quot;: 2,</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">     // Disallow padding within blocks.</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;padded-blocks&quot;: [2, &quot;never&quot;],</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Disallow spaces inside parentheses.</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    &quot;space-in-parens&quot;: [2, &quot;never&quot;],</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+</span>
<a href="#l1.15"></a><span id="l1.15">     // Will enable these rules later</span>
<a href="#l1.16"></a><span id="l1.16">     &quot;block-spacing&quot;: 0,</span>
<a href="#l1.17"></a><span id="l1.17">     &quot;no-lonely-if&quot;: 0,</span>
<a href="#l1.18"></a><span id="l1.18">     &quot;space-before-blocks&quot;: 0,</span>
<a href="#l1.19"></a><span id="l1.19">     &quot;computed-property-spacing&quot;: 0,</span>
<a href="#l1.20"></a><span id="l1.20">     &quot;consistent-return&quot;: 0,</span>
<a href="#l1.21"></a><span id="l1.21">     &quot;no-redeclare&quot;: 0,</span>
<a href="#l1.22"></a><span id="l1.22">     &quot;no-empty&quot;: 0,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/agenda-listbox.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/agenda-listbox.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -383,17 +383,17 @@ function isBefore(aItem, aCompItem, aPer</span>
<a href="#l2.4"></a><span id="l2.4">         } else if (itemDate.isDate) {</span>
<a href="#l2.5"></a><span id="l2.5">             if (aItem.startDate.compare(itemDate) == 0) {</span>
<a href="#l2.6"></a><span id="l2.6">                 // starting day of an all-day events spannig multiple days</span>
<a href="#l2.7"></a><span id="l2.7">                 return (!compItemDate.isDate || aCompItem.duration.days != 1);</span>
<a href="#l2.8"></a><span id="l2.8">             } else if (aItem.endDate.compare(itemDateEndDate) == 0) {</span>
<a href="#l2.9"></a><span id="l2.9">                 // ending day of an all-day events spannig multiple days</span>
<a href="#l2.10"></a><span id="l2.10">                 return (!compItemDate.isDate ||</span>
<a href="#l2.11"></a><span id="l2.11">                         (aCompItem.duration.days != 1 &amp;&amp;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-                          aCompItem.startDate.compare(compItemDate) != 0 ));</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+                          aCompItem.startDate.compare(compItemDate) != 0));</span>
<a href="#l2.14"></a><span id="l2.14">             } else {</span>
<a href="#l2.15"></a><span id="l2.15">                 // intermediate day of an all-day events spannig multiple days</span>
<a href="#l2.16"></a><span id="l2.16">                 return (!compItemDate.isDate);</span>
<a href="#l2.17"></a><span id="l2.17">             }</span>
<a href="#l2.18"></a><span id="l2.18">         } else if (aCompItem.startDate.isDate) {</span>
<a href="#l2.19"></a><span id="l2.19">             return false;</span>
<a href="#l2.20"></a><span id="l2.20">         }</span>
<a href="#l2.21"></a><span id="l2.21">     }</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineat">@@ -436,17 +436,17 @@ function comparisonDate(aItem, aPeriod) </span>
<a href="#l2.23"></a><span id="l2.23">         // End at midnight -&gt; end date in the day where midnight occurs</span>
<a href="#l2.24"></a><span id="l2.24">         endDateToReturn.day--;</span>
<a href="#l2.25"></a><span id="l2.25">         endDateToReturn.hour = 23;</span>
<a href="#l2.26"></a><span id="l2.26">         endDateToReturn.minute = 59;</span>
<a href="#l2.27"></a><span id="l2.27">         endDateToReturn.second = 59;</span>
<a href="#l2.28"></a><span id="l2.28">     }</span>
<a href="#l2.29"></a><span id="l2.29">     endDate.isDate = true;</span>
<a href="#l2.30"></a><span id="l2.30">     if (startDate.compare(endDate) != 0 &amp;&amp;</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-         startDate.compare(periodStartDate) &lt; 0 ) {</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+         startDate.compare(periodStartDate) &lt; 0) {</span>
<a href="#l2.33"></a><span id="l2.33">         // returns a end date when the item is a multiday event AND</span>
<a href="#l2.34"></a><span id="l2.34">         // it starts before the given period</span>
<a href="#l2.35"></a><span id="l2.35">         return endDateToReturn;</span>
<a href="#l2.36"></a><span id="l2.36">     }</span>
<a href="#l2.37"></a><span id="l2.37">     return aItem.startDate.clone();</span>
<a href="#l2.38"></a><span id="l2.38"> }</span>
<a href="#l2.39"></a><span id="l2.39"> </span>
<a href="#l2.40"></a><span id="l2.40"> /**</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineat">@@ -798,17 +798,17 @@ function showsToday(aStartDate) {</span>
<a href="#l2.42"></a><span id="l2.42"> </span>
<a href="#l2.43"></a><span id="l2.43"> /**</span>
<a href="#l2.44"></a><span id="l2.44">  * Moves the selection. Moves down unless the next item is a period item, in</span>
<a href="#l2.45"></a><span id="l2.45">  * which case the selection moves up.</span>
<a href="#l2.46"></a><span id="l2.46">  */</span>
<a href="#l2.47"></a><span id="l2.47"> agendaListbox.moveSelection =</span>
<a href="#l2.48"></a><span id="l2.48"> function moveSelection() {</span>
<a href="#l2.49"></a><span id="l2.49">     var selindex = this.agendaListboxControl.selectedIndex;</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-    if ( !this.isEventListItem(this.agendaListboxControl.selectedItem.nextSibling)) {</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+    if (!this.isEventListItem(this.agendaListboxControl.selectedItem.nextSibling)) {</span>
<a href="#l2.52"></a><span id="l2.52">         this.agendaListboxControl.goUp();</span>
<a href="#l2.53"></a><span id="l2.53">     } else {</span>
<a href="#l2.54"></a><span id="l2.54">         this.agendaListboxControl.goDown();</span>
<a href="#l2.55"></a><span id="l2.55">     }</span>
<a href="#l2.56"></a><span id="l2.56"> }</span>
<a href="#l2.57"></a><span id="l2.57"> </span>
<a href="#l2.58"></a><span id="l2.58"> /**</span>
<a href="#l2.59"></a><span id="l2.59">  * Gets an array of selected items. If a period node is selected, it is not</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -154,17 +154,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">             },</span>
<a href="#l3.5"></a><span id="l3.5"> </span>
<a href="#l3.6"></a><span id="l3.6">             onError: function onError(aCalendar, aErrNo, aMessage) { },</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">             onPropertyChanged: function(aCalendar, aName, aValue, aOldValue) {</span>
<a href="#l3.9"></a><span id="l3.9">                 switch (aName) {</span>
<a href="#l3.10"></a><span id="l3.10">                     case &quot;suppressAlarms&quot;:</span>
<a href="#l3.11"></a><span id="l3.11">                         if (!Preferences.get(&quot;calendar.alarms.indicator.show&quot;, true) ||</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                            aCalendar.getProperty(&quot;capabilities.alarms.popup.supported&quot;) === false ) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+                            aCalendar.getProperty(&quot;capabilities.alarms.popup.supported&quot;) === false) {</span>
<a href="#l3.14"></a><span id="l3.14">                             break;</span>
<a href="#l3.15"></a><span id="l3.15">                         }</span>
<a href="#l3.16"></a><span id="l3.16">                         // else fall through</span>
<a href="#l3.17"></a><span id="l3.17">                     case &quot;readOnly&quot;:</span>
<a href="#l3.18"></a><span id="l3.18">                     case &quot;disabled&quot;:</span>
<a href="#l3.19"></a><span id="l3.19">                         // XXXvv we can be smarter about how we handle this stuff</span>
<a href="#l3.20"></a><span id="l3.20">                         this.calView.refresh();</span>
<a href="#l3.21"></a><span id="l3.21">                         break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-month-view.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-view.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -87,17 +87,17 @@</span>
<a href="#l4.4"></a><span id="l4.4">               var timezone = this.calendarView ? this.calendarView.mTimezone :</span>
<a href="#l4.5"></a><span id="l4.5">                              calendarDefaultTimezone();</span>
<a href="#l4.6"></a><span id="l4.6">               var parentDate = ensureDateTime(this.parentBox.date);</span>
<a href="#l4.7"></a><span id="l4.7">               var startTime = val.startDate.getInTimezone(timezone);</span>
<a href="#l4.8"></a><span id="l4.8">               var endTime = val.endDate.getInTimezone(timezone);</span>
<a href="#l4.9"></a><span id="l4.9">               var nextDay = parentDate.clone();</span>
<a href="#l4.10"></a><span id="l4.10">               nextDay.day++;</span>
<a href="#l4.11"></a><span id="l4.11">               var comp = endTime.compare(nextDay);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-              if (startTime.compare( parentDate) == -1 ) {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+              if (startTime.compare(parentDate) == -1) {</span>
<a href="#l4.14"></a><span id="l4.14">                 if (comp == 1) {</span>
<a href="#l4.15"></a><span id="l4.15">                   label.value = &quot;↔&quot;;</span>
<a href="#l4.16"></a><span id="l4.16">                 } else if (comp == 0) {</span>
<a href="#l4.17"></a><span id="l4.17">                   label.value = &quot;↤&quot;;</span>
<a href="#l4.18"></a><span id="l4.18">                 } else {</span>
<a href="#l4.19"></a><span id="l4.19">                   label.value = &quot;⇥ &quot; + df.formatTime(endTime);</span>
<a href="#l4.20"></a><span id="l4.20">                 }</span>
<a href="#l4.21"></a><span id="l4.21">               } else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -123,17 +123,17 @@ function changeMenuForTask(aEvent) {</span>
<a href="#l5.4"></a><span id="l5.4">  */</span>
<a href="#l5.5"></a><span id="l5.5"> function contextChangeTaskProgress(aEvent, aProgress) {</span>
<a href="#l5.6"></a><span id="l5.6">     if (gTabmail &amp;&amp; gTabmail.currentTabInfo.mode.type == &quot;calendarTask&quot;) {</span>
<a href="#l5.7"></a><span id="l5.7">         editToDoStatus(aProgress);</span>
<a href="#l5.8"></a><span id="l5.8">     } else {</span>
<a href="#l5.9"></a><span id="l5.9">         startBatchTransaction();</span>
<a href="#l5.10"></a><span id="l5.10">         let tasks = getSelectedTasks(aEvent);</span>
<a href="#l5.11"></a><span id="l5.11">         for (let task of tasks) {</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-            let newTask = task.clone().QueryInterface( Components.interfaces.calITodo );</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+            let newTask = task.clone().QueryInterface(Components.interfaces.calITodo);</span>
<a href="#l5.14"></a><span id="l5.14">             newTask.percentComplete = aProgress;</span>
<a href="#l5.15"></a><span id="l5.15">             switch (aProgress) {</span>
<a href="#l5.16"></a><span id="l5.16">                 case 0:</span>
<a href="#l5.17"></a><span id="l5.17">                     newTask.isCompleted = false;</span>
<a href="#l5.18"></a><span id="l5.18">                     break;</span>
<a href="#l5.19"></a><span id="l5.19">                 case 100:</span>
<a href="#l5.20"></a><span id="l5.20">                     newTask.isCompleted = true;</span>
<a href="#l5.21"></a><span id="l5.21">                     break;</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -154,17 +154,17 @@ function contextChangeTaskProgress(aEven</span>
<a href="#l5.23"></a><span id="l5.23">  *</span>
<a href="#l5.24"></a><span id="l5.24">  * @param aEvent      The DOM event that triggered this command.</span>
<a href="#l5.25"></a><span id="l5.25">  */</span>
<a href="#l5.26"></a><span id="l5.26"> function contextChangeTaskCalendar(aEvent) {</span>
<a href="#l5.27"></a><span id="l5.27">    startBatchTransaction();</span>
<a href="#l5.28"></a><span id="l5.28">    var tasks = getSelectedTasks(aEvent);</span>
<a href="#l5.29"></a><span id="l5.29">    for (var t = 0; t &lt; tasks.length; t++) {</span>
<a href="#l5.30"></a><span id="l5.30">        var task = tasks[t];</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-       var newTask = task.clone().QueryInterface( Components.interfaces.calITodo );</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+       var newTask = task.clone().QueryInterface(Components.interfaces.calITodo);</span>
<a href="#l5.33"></a><span id="l5.33">        newTask.calendar = aEvent.target.calendar;</span>
<a href="#l5.34"></a><span id="l5.34">        doTransaction('modify', newTask, newTask.calendar, task, null);</span>
<a href="#l5.35"></a><span id="l5.35">     }</span>
<a href="#l5.36"></a><span id="l5.36">     endBatchTransaction();</span>
<a href="#l5.37"></a><span id="l5.37"> }</span>
<a href="#l5.38"></a><span id="l5.38"> </span>
<a href="#l5.39"></a><span id="l5.39"> /**</span>
<a href="#l5.40"></a><span id="l5.40">  * Handler function to change the priority of the selected tasks, or of</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineat">@@ -176,17 +176,17 @@ function contextChangeTaskCalendar(aEven</span>
<a href="#l5.42"></a><span id="l5.42"> function contextChangeTaskPriority(aEvent, aPriority) {</span>
<a href="#l5.43"></a><span id="l5.43">     let tabType = gTabmail &amp;&amp; gTabmail.currentTabInfo.mode.type;</span>
<a href="#l5.44"></a><span id="l5.44">     if (tabType == &quot;calendarTask&quot; || tabType == &quot;calendarEvent&quot;) {</span>
<a href="#l5.45"></a><span id="l5.45">         editConfigState({ priority: aPriority });</span>
<a href="#l5.46"></a><span id="l5.46">     } else {</span>
<a href="#l5.47"></a><span id="l5.47">         startBatchTransaction();</span>
<a href="#l5.48"></a><span id="l5.48">         var tasks = getSelectedTasks(aEvent);</span>
<a href="#l5.49"></a><span id="l5.49">         for (let task of tasks) {</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-            let newTask = task.clone().QueryInterface( Components.interfaces.calITodo );</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+            let newTask = task.clone().QueryInterface(Components.interfaces.calITodo);</span>
<a href="#l5.52"></a><span id="l5.52">             newTask.priority = aPriority;</span>
<a href="#l5.53"></a><span id="l5.53">             doTransaction('modify', newTask, newTask.calendar, task, null);</span>
<a href="#l5.54"></a><span id="l5.54">         }</span>
<a href="#l5.55"></a><span id="l5.55">         endBatchTransaction();</span>
<a href="#l5.56"></a><span id="l5.56">     }</span>
<a href="#l5.57"></a><span id="l5.57"> }</span>
<a href="#l5.58"></a><span id="l5.58"> </span>
<a href="#l5.59"></a><span id="l5.59"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -304,17 +304,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">                       let dueIn = PluralForm.get(dur.hours, calGetString(&quot;calendar&quot;, &quot;dueInHours&quot;));</span>
<a href="#l6.5"></a><span id="l6.5">                       return dueIn.replace(&quot;#1&quot;, dur.hours);</span>
<a href="#l6.6"></a><span id="l6.6">                   } else {</span>
<a href="#l6.7"></a><span id="l6.7">                       // Less than one hour</span>
<a href="#l6.8"></a><span id="l6.8">                       return calGetString(&quot;calendar&quot;, &quot;dueInLessThanOneHour&quot;);</span>
<a href="#l6.9"></a><span id="l6.9">                   }</span>
<a href="#l6.10"></a><span id="l6.10">               } else if (!aTask.completedDate || !aTask.completedDate.isValid) {</span>
<a href="#l6.11"></a><span id="l6.11">                   // Overdue task</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-                  let minutes = Math.ceil( -dur.inSeconds / 60);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+                  let minutes = Math.ceil(-dur.inSeconds / 60);</span>
<a href="#l6.14"></a><span id="l6.14">                   if (minutes &gt;= 1440) { // 1 day or more</span>
<a href="#l6.15"></a><span id="l6.15">                       let dueIn = PluralForm.get(dur.days, calGetString(&quot;calendar&quot;, &quot;dueInDays&quot;));</span>
<a href="#l6.16"></a><span id="l6.16">                       return &quot;-&quot; + dueIn.replace(&quot;#1&quot;, dur.days);</span>
<a href="#l6.17"></a><span id="l6.17">                   } else if (minutes &gt;= 60) { // 1 hour or more</span>
<a href="#l6.18"></a><span id="l6.18">                       let dueIn = PluralForm.get(dur.hours, calGetString(&quot;calendar&quot;, &quot;dueInHours&quot;));</span>
<a href="#l6.19"></a><span id="l6.19">                       return &quot;-&quot; + dueIn.replace(&quot;#1&quot;, dur.hours);</span>
<a href="#l6.20"></a><span id="l6.20">                   } else {</span>
<a href="#l6.21"></a><span id="l6.21">                       // Less than one hour</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineat">@@ -707,17 +707,17 @@</span>
<a href="#l6.23"></a><span id="l6.23"> </span>
<a href="#l6.24"></a><span id="l6.24">           // The progress mode for a given cell. This method is only called for</span>
<a href="#l6.25"></a><span id="l6.25">           // columns of type |progressmeter|.</span>
<a href="#l6.26"></a><span id="l6.26">           getProgressMode: function mTV_getProgressMode(aRow, aCol) {</span>
<a href="#l6.27"></a><span id="l6.27">               switch (aCol.element.getAttribute(&quot;itemproperty&quot;)) {</span>
<a href="#l6.28"></a><span id="l6.28">                   case &quot;percentComplete&quot;:</span>
<a href="#l6.29"></a><span id="l6.29">                       var task = this.binding.mTaskArray[aRow];</span>
<a href="#l6.30"></a><span id="l6.30">                       if (aCol.element.boxObject.width &gt; 75 &amp;&amp;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-                          task.percentComplete &gt; 0 ) {</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+                          task.percentComplete &gt; 0) {</span>
<a href="#l6.33"></a><span id="l6.33">                           // XXX Would be nice if we could use relative widths,</span>
<a href="#l6.34"></a><span id="l6.34">                           // i.e &quot;15ex&quot;, but there is no scriptable interface.</span>
<a href="#l6.35"></a><span id="l6.35">                           return Components.interfaces.nsITreeView.PROGRESS_NORMAL;</span>
<a href="#l6.36"></a><span id="l6.36">                       }</span>
<a href="#l6.37"></a><span id="l6.37">                       break;</span>
<a href="#l6.38"></a><span id="l6.38">               }</span>
<a href="#l6.39"></a><span id="l6.39"> </span>
<a href="#l6.40"></a><span id="l6.40">               return Components.interfaces.nsITreeView.PROGRESS_NONE;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -196,17 +196,17 @@ function enableElementWithLock(elementId</span>
<a href="#l7.4"></a><span id="l7.4"> /**</span>
<a href="#l7.5"></a><span id="l7.5">  * Unchecks the commands of the child elements of a DOM-tree-node i.e of a menu</span>
<a href="#l7.6"></a><span id="l7.6">  *</span>
<a href="#l7.7"></a><span id="l7.7">  * @param aEvent    The event from which the target is taken to retrieve the</span>
<a href="#l7.8"></a><span id="l7.8">  *                    child elements</span>
<a href="#l7.9"></a><span id="l7.9">  */</span>
<a href="#l7.10"></a><span id="l7.10"> function uncheckChildNodes(aEvent) {</span>
<a href="#l7.11"></a><span id="l7.11">     var liveList = aEvent.target.getElementsByAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    for (var i = liveList.length - 1; i &gt;= 0; i-- ) {</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    for (var i = liveList.length - 1; i &gt;= 0; i--) {</span>
<a href="#l7.14"></a><span id="l7.14">         var commandName = liveList.item(i).getAttribute(&quot;command&quot;);</span>
<a href="#l7.15"></a><span id="l7.15">         var command = document.getElementById(commandName);</span>
<a href="#l7.16"></a><span id="l7.16">         if (command) {</span>
<a href="#l7.17"></a><span id="l7.17">             command.setAttribute(&quot;checked&quot;, &quot;false&quot;);</span>
<a href="#l7.18"></a><span id="l7.18">         }</span>
<a href="#l7.19"></a><span id="l7.19">     }</span>
<a href="#l7.20"></a><span id="l7.20"> }</span>
<a href="#l7.21"></a><span id="l7.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -220,17 +220,17 @@ function initializeControls(rule) {</span>
<a href="#l8.4"></a><span id="l8.4">     }</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6">     /* load up the duration of the event radiogroup */</span>
<a href="#l8.7"></a><span id="l8.7">     if (rule.isByCount) {</span>
<a href="#l8.8"></a><span id="l8.8">         if (rule.count == -1) {</span>
<a href="#l8.9"></a><span id="l8.9">             setElementValue(&quot;recurrence-duration&quot;, &quot;forever&quot;);</span>
<a href="#l8.10"></a><span id="l8.10">         } else {</span>
<a href="#l8.11"></a><span id="l8.11">             setElementValue(&quot;recurrence-duration&quot;, &quot;ntimes&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-            setElementValue(&quot;repeat-ntimes-count&quot;, rule.count );</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+            setElementValue(&quot;repeat-ntimes-count&quot;, rule.count);</span>
<a href="#l8.14"></a><span id="l8.14">         }</span>
<a href="#l8.15"></a><span id="l8.15">     } else {</span>
<a href="#l8.16"></a><span id="l8.16">         let untilDate = rule.untilDate;</span>
<a href="#l8.17"></a><span id="l8.17">         if (!untilDate) {</span>
<a href="#l8.18"></a><span id="l8.18">             setElementValue(&quot;recurrence-duration&quot;, &quot;forever&quot;);</span>
<a href="#l8.19"></a><span id="l8.19">         } else {</span>
<a href="#l8.20"></a><span id="l8.20">             gUntilDate = untilDate.getInTimezone(gStartTime.timezone); // calIRecurrenceRule::untilDate is always UTC or floating</span>
<a href="#l8.21"></a><span id="l8.21">             // Change the until date to start date if the rule has a forbidden</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/import-export.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/import-export.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -78,17 +78,17 @@ function loadEventsFromFile(aCalendar) {</span>
<a href="#l9.4"></a><span id="l9.4">         const nsIFileInputStream = Components.interfaces.nsIFileInputStream;</span>
<a href="#l9.5"></a><span id="l9.5">         const nsIScriptableInputStream = Components.interfaces.nsIScriptableInputStream;</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">         let inputStream = Components.classes[&quot;@mozilla.org/network/file-input-stream;1&quot;]</span>
<a href="#l9.8"></a><span id="l9.8">                                     .createInstance(nsIFileInputStream);</span>
<a href="#l9.9"></a><span id="l9.9">         let items = [];</span>
<a href="#l9.10"></a><span id="l9.10"> </span>
<a href="#l9.11"></a><span id="l9.11">         try {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-            inputStream.init( fp.file, MODE_RDONLY, parseInt(&quot;0444&quot;, 8), {});</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+            inputStream.init(fp.file, MODE_RDONLY, parseInt(&quot;0444&quot;, 8), {});</span>
<a href="#l9.14"></a><span id="l9.14">             items = importer.importFromStream(inputStream, {});</span>
<a href="#l9.15"></a><span id="l9.15">         } catch (ex) {</span>
<a href="#l9.16"></a><span id="l9.16">             switch (ex.result) {</span>
<a href="#l9.17"></a><span id="l9.17">                 case Components.interfaces.calIErrors.INVALID_TIMEZONE:</span>
<a href="#l9.18"></a><span id="l9.18">                     showError(calGetString(&quot;calendar&quot;, &quot;timezoneError&quot;, [filePath]));</span>
<a href="#l9.19"></a><span id="l9.19">                     break;</span>
<a href="#l9.20"></a><span id="l9.20">                 default:</span>
<a href="#l9.21"></a><span id="l9.21">                     showError(calGetString(&quot;calendar&quot;, &quot;unableToRead&quot;) + filePath + &quot;\n&quot; + ex);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -437,17 +437,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">           this.mToday = false;</span>
<a href="#l10.5"></a><span id="l10.5">           this.mSelected = false;</span>
<a href="#l10.6"></a><span id="l10.6">           this.mExtra = false;</span>
<a href="#l10.7"></a><span id="l10.7">           this.mValue = new Date() // Default to &quot;today&quot;</span>
<a href="#l10.8"></a><span id="l10.8">           // save references for convenience</span>
<a href="#l10.9"></a><span id="l10.9">           if (this.hasAttribute(&quot;readonly&quot;)) {</span>
<a href="#l10.10"></a><span id="l10.10">               this.mIsReadOnly = this.getAttribute(&quot;readonly&quot;) == &quot;true&quot;;</span>
<a href="#l10.11"></a><span id="l10.11">           }</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-          this.refreshDisplay( );</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+          this.refreshDisplay();</span>
<a href="#l10.14"></a><span id="l10.14">           if (this.hasAttribute(&quot;freebusy&quot;)) {</span>
<a href="#l10.15"></a><span id="l10.15">               this._setFreeBusy(this.getAttribute(&quot;freebusy&quot;) == &quot;true&quot;);</span>
<a href="#l10.16"></a><span id="l10.16">           }</span>
<a href="#l10.17"></a><span id="l10.17">           this.mShowWeekNumber = Preferences.get(&quot;calendar.view-minimonth.showWeekNumber&quot;, true);</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">           // Add pref observer</span>
<a href="#l10.20"></a><span id="l10.20">           let branch = Services.prefs.getBranch(&quot;&quot;);</span>
<a href="#l10.21"></a><span id="l10.21">           branch.addObserver(&quot;calendar.&quot;, this, false);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/modules/calProviderUtils.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/modules/calProviderUtils.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -342,17 +342,17 @@ cal.fromRFC3339 = function fromRFC3339(a</span>
<a href="#l11.4"></a><span id="l11.4">     } else if (matches[9] == null) {</span>
<a href="#l11.5"></a><span id="l11.5">         // We have no timezone info, only a date. We have no way to</span>
<a href="#l11.6"></a><span id="l11.6">         // know what timezone we are in, so lets assume we are in the</span>
<a href="#l11.7"></a><span id="l11.7">         // timezone of our local calendar, or whatever was passed.</span>
<a href="#l11.8"></a><span id="l11.8"> </span>
<a href="#l11.9"></a><span id="l11.9">         dateTime.timezone = aTimezone;</span>
<a href="#l11.10"></a><span id="l11.10">     } else {</span>
<a href="#l11.11"></a><span id="l11.11">         let offset_in_s = (matches[11] == &quot;-&quot; ? -1 : 1) *</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-            ( (matches[12] * 3600) + (matches[13] * 60) );</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+            ((matches[12] * 3600) + (matches[13] * 60));</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">         // try local timezone first</span>
<a href="#l11.16"></a><span id="l11.16">         dateTime.timezone = aTimezone;</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18">         // If offset does not match, go through timezones. This will</span>
<a href="#l11.19"></a><span id="l11.19">         // give you the first tz in the alphabet and kill daylight</span>
<a href="#l11.20"></a><span id="l11.20">         // savings time, but we have no other choice</span>
<a href="#l11.21"></a><span id="l11.21">         if (dateTime.timezoneOffset != offset_in_s) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/src/calDateTimeFormatter.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/src/calDateTimeFormatter.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -170,17 +170,17 @@ calDateTimeFormatter.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">         // TODO do we need l10n for this?</span>
<a href="#l12.5"></a><span id="l12.5">         // TODO should we check for the same day? The caller should know what</span>
<a href="#l12.6"></a><span id="l12.6">         // he is doing...</span>
<a href="#l12.7"></a><span id="l12.7">         return this.formatTime(aStartDate) + &quot;\u2013&quot; + this.formatTime(aEndDate);</span>
<a href="#l12.8"></a><span id="l12.8">     },</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10">     formatInterval: function formatInterval(aStartDate, aEndDate) {</span>
<a href="#l12.11"></a><span id="l12.11">         // Check for tasks without start and/or due date</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        if (aEndDate == null &amp;&amp; aStartDate == null ) {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+        if (aEndDate == null &amp;&amp; aStartDate == null) {</span>
<a href="#l12.14"></a><span id="l12.14">             return calGetString(&quot;calendar&quot;, &quot;datetimeIntervalTaskWithoutDate&quot;);</span>
<a href="#l12.15"></a><span id="l12.15">         } else if (aEndDate == null) {</span>
<a href="#l12.16"></a><span id="l12.16">             let startDateString = this.formatDate(aStartDate);</span>
<a href="#l12.17"></a><span id="l12.17">             let startTime = this.formatTime(aStartDate);</span>
<a href="#l12.18"></a><span id="l12.18">             return calGetString(&quot;calendar&quot;, &quot;datetimeIntervalTaskWithoutDueDate&quot;, [startDateString, startTime]);</span>
<a href="#l12.19"></a><span id="l12.19">         } else if (aStartDate == null) {</span>
<a href="#l12.20"></a><span id="l12.20">             let endDateString = this.formatDate(aEndDate);</span>
<a href="#l12.21"></a><span id="l12.21">             let endTime = this.formatTime(aEndDate);</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -271,26 +271,26 @@ calDateTimeFormatter.prototype = {</span>
<a href="#l12.23"></a><span id="l12.23">     },</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25">     formatItemTimeInterval: function formatItemTimeInterval(aItem) {</span>
<a href="#l12.26"></a><span id="l12.26">         return this.formatTimeInterval.apply(this, this._getItemDates(aItem));</span>
<a href="#l12.27"></a><span id="l12.27">     },</span>
<a href="#l12.28"></a><span id="l12.28"> </span>
<a href="#l12.29"></a><span id="l12.29">     monthName: function monthName(aMonthIndex) {</span>
<a href="#l12.30"></a><span id="l12.30">         let oneBasedMonthIndex = aMonthIndex + 1;</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-        return this.mDateStringBundle.GetStringFromName(&quot;month.&quot; + oneBasedMonthIndex + &quot;.name&quot; );</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+        return this.mDateStringBundle.GetStringFromName(&quot;month.&quot; + oneBasedMonthIndex + &quot;.name&quot;);</span>
<a href="#l12.33"></a><span id="l12.33">     },</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35">     shortMonthName: function shortMonthName(aMonthIndex) {</span>
<a href="#l12.36"></a><span id="l12.36">         let oneBasedMonthIndex = aMonthIndex + 1;</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-        return this.mDateStringBundle.GetStringFromName(&quot;month.&quot; + oneBasedMonthIndex + &quot;.Mmm&quot; );</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+        return this.mDateStringBundle.GetStringFromName(&quot;month.&quot; + oneBasedMonthIndex + &quot;.Mmm&quot;);</span>
<a href="#l12.39"></a><span id="l12.39">     },</span>
<a href="#l12.40"></a><span id="l12.40"> </span>
<a href="#l12.41"></a><span id="l12.41">     dayName: function dayName(aDayIndex) {</span>
<a href="#l12.42"></a><span id="l12.42">         let oneBasedDayIndex = aDayIndex + 1;</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-        return this.mDateStringBundle.GetStringFromName(&quot;day.&quot; + oneBasedDayIndex + &quot;.name&quot; );</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+        return this.mDateStringBundle.GetStringFromName(&quot;day.&quot; + oneBasedDayIndex + &quot;.name&quot;);</span>
<a href="#l12.45"></a><span id="l12.45">     },</span>
<a href="#l12.46"></a><span id="l12.46"> </span>
<a href="#l12.47"></a><span id="l12.47">     shortDayName: function shortDayName(aDayIndex) {</span>
<a href="#l12.48"></a><span id="l12.48">         let oneBasedDayIndex = aDayIndex + 1;</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-        return this.mDateStringBundle.GetStringFromName(&quot;day.&quot; + oneBasedDayIndex + &quot;.Mmm&quot; );</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+        return this.mDateStringBundle.GetStringFromName(&quot;day.&quot; + oneBasedDayIndex + &quot;.Mmm&quot;);</span>
<a href="#l12.51"></a><span id="l12.51">     }</span>
<a href="#l12.52"></a><span id="l12.52"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1424,17 +1424,17 @@ function applyAttributeToMenuChildren(aE</span>
<a href="#l13.4"></a><span id="l13.4">  */</span>
<a href="#l13.5"></a><span id="l13.5"> function isPropertyValueSame(aObjects, aPropertyName) {</span>
<a href="#l13.6"></a><span id="l13.6">     var value = null;</span>
<a href="#l13.7"></a><span id="l13.7">     for (var i = 0; i &lt; aObjects.length; i++) {</span>
<a href="#l13.8"></a><span id="l13.8">         if (!value) {</span>
<a href="#l13.9"></a><span id="l13.9">             value = aObjects[0][aPropertyName];</span>
<a href="#l13.10"></a><span id="l13.10">         }</span>
<a href="#l13.11"></a><span id="l13.11">         var compValue = aObjects[i][aPropertyName];</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        if (compValue != value ) {</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        if (compValue != value) {</span>
<a href="#l13.14"></a><span id="l13.14">             return false;</span>
<a href="#l13.15"></a><span id="l13.15">         }</span>
<a href="#l13.16"></a><span id="l13.16">     }</span>
<a href="#l13.17"></a><span id="l13.17">     return true;</span>
<a href="#l13.18"></a><span id="l13.18"> }</span>
<a href="#l13.19"></a><span id="l13.19"> </span>
<a href="#l13.20"></a><span id="l13.20"> /**</span>
<a href="#l13.21"></a><span id="l13.21">  * returns a parentnode - or the overgiven node - with the given localName,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -127,17 +127,17 @@ calOutlookCSVImporter.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">     importFromStream: function csv_importFromStream(aStream, aCount) {</span>
<a href="#l14.5"></a><span id="l14.5">         let scriptableInputStream = Components.classes[&quot;@mozilla.org/scriptableinputstream;1&quot;]</span>
<a href="#l14.6"></a><span id="l14.6">                                               .createInstance(Components.interfaces.nsIScriptableInputStream);</span>
<a href="#l14.7"></a><span id="l14.7">         scriptableInputStream.init(aStream);</span>
<a href="#l14.8"></a><span id="l14.8">         let str = scriptableInputStream.read(-1);</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10">         // parse header line of quoted comma separated column names.</span>
<a href="#l14.11"></a><span id="l14.11">         let trimEndQuotesRegExp = /^&quot;(.*)&quot;$/m;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        let trimResults = trimEndQuotesRegExp.exec( str );</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        let trimResults = trimEndQuotesRegExp.exec(str);</span>
<a href="#l14.14"></a><span id="l14.14">         let header = trimResults &amp;&amp; trimResults[1].split(/&quot;,&quot;/);</span>
<a href="#l14.15"></a><span id="l14.15">         if (header == null) {</span>
<a href="#l14.16"></a><span id="l14.16">             aCount.value = 0;</span>
<a href="#l14.17"></a><span id="l14.17">             return [];</span>
<a href="#l14.18"></a><span id="l14.18">         }</span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20">         // strip header from string</span>
<a href="#l14.21"></a><span id="l14.21">         str = str.slice(trimResults[0].length);</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -293,17 +293,17 @@ calOutlookCSVImporter.prototype = {</span>
<a href="#l14.23"></a><span id="l14.23">                         // We now have a timed startDate and an endDate. If the</span>
<a href="#l14.24"></a><span id="l14.24">                         // end time is invalid set it to 23:59:00</span>
<a href="#l14.25"></a><span id="l14.25">                         if (eDate.isDate) {</span>
<a href="#l14.26"></a><span id="l14.26">                             eDate.isDate = false;</span>
<a href="#l14.27"></a><span id="l14.27">                             eDate.hour = 23;</span>
<a href="#l14.28"></a><span id="l14.28">                             eDate.minute = 59;</span>
<a href="#l14.29"></a><span id="l14.29">                         }</span>
<a href="#l14.30"></a><span id="l14.30">                         // Correct the duration to 0 seconds if it is negative.</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-                        if (eDate.subtractDate(sDate).isNegative ) {</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+                        if (eDate.subtractDate(sDate).isNegative) {</span>
<a href="#l14.33"></a><span id="l14.33">                             eDate = sDate.clone();</span>
<a href="#l14.34"></a><span id="l14.34">                         }</span>
<a href="#l14.35"></a><span id="l14.35">                     }</span>
<a href="#l14.36"></a><span id="l14.36">                 }</span>
<a href="#l14.37"></a><span id="l14.37">                 event.startDate = sDate;</span>
<a href="#l14.38"></a><span id="l14.38">                 event.endDate = eDate;</span>
<a href="#l14.39"></a><span id="l14.39"> </span>
<a href="#l14.40"></a><span id="l14.40">                 // Exists an alarm true/false column?</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1371,17 +1371,17 @@ calDavCalendar.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">             }</span>
<a href="#l15.5"></a><span id="l15.5">         }</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">         // Call getUpdatedItems right away if its the first refresh</span>
<a href="#l15.8"></a><span id="l15.8">         // *OR* if webdav Sync is enabled (It is redundant to send a request</span>
<a href="#l15.9"></a><span id="l15.9">         // to get the collection tag (getctag) on a calendar if it supports</span>
<a href="#l15.10"></a><span id="l15.10">         // webdav sync, the sync request will only return data if something</span>
<a href="#l15.11"></a><span id="l15.11">         // changed).</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-        if (!this.mCtag || !this.mFirstRefreshDone || this.mHasWebdavSyncSupport ) {</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+        if (!this.mCtag || !this.mFirstRefreshDone || this.mHasWebdavSyncSupport) {</span>
<a href="#l15.14"></a><span id="l15.14">             this.getUpdatedItems(this.calendarUri, aChangeLogListener);</span>
<a href="#l15.15"></a><span id="l15.15">             return;</span>
<a href="#l15.16"></a><span id="l15.16">         }</span>
<a href="#l15.17"></a><span id="l15.17">         let thisCalendar = this;</span>
<a href="#l15.18"></a><span id="l15.18">         let queryXml =</span>
<a href="#l15.19"></a><span id="l15.19">             xmlHeader +</span>
<a href="#l15.20"></a><span id="l15.20">             '&lt;D:propfind xmlns:D=&quot;DAV:&quot; xmlns:CS=&quot;http://calendarserver.org/ns/&quot;&gt;' +</span>
<a href="#l15.21"></a><span id="l15.21">               '&lt;D:prop&gt;' +</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -2410,17 +2410,17 @@ calDavCalendar.prototype = {</span>
<a href="#l15.23"></a><span id="l15.23"> </span>
<a href="#l15.24"></a><span id="l15.24">         // the caller prepends MAILTO: to calid strings containing @</span>
<a href="#l15.25"></a><span id="l15.25">         // but apple needs that to be mailto:</span>
<a href="#l15.26"></a><span id="l15.26">         var aCalIdParts = aCalId.split(&quot;:&quot;);</span>
<a href="#l15.27"></a><span id="l15.27">         aCalIdParts[0] = aCalIdParts[0].toLowerCase();</span>
<a href="#l15.28"></a><span id="l15.28"> </span>
<a href="#l15.29"></a><span id="l15.29">         if (aCalIdParts[0] != &quot;mailto&quot;</span>
<a href="#l15.30"></a><span id="l15.30">             &amp;&amp; aCalIdParts[0] != &quot;http&quot;</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-            &amp;&amp; aCalIdParts[0] != &quot;https&quot; ) {</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+            &amp;&amp; aCalIdParts[0] != &quot;https&quot;) {</span>
<a href="#l15.33"></a><span id="l15.33">             aListener.onResult(null, null);</span>
<a href="#l15.34"></a><span id="l15.34">             return;</span>
<a href="#l15.35"></a><span id="l15.35">         }</span>
<a href="#l15.36"></a><span id="l15.36">         var mailto_aCalId = aCalIdParts.join(&quot;:&quot;);</span>
<a href="#l15.37"></a><span id="l15.37"> </span>
<a href="#l15.38"></a><span id="l15.38">         var thisCalendar = this;</span>
<a href="#l15.39"></a><span id="l15.39"> </span>
<a href="#l15.40"></a><span id="l15.40">         var organizer = this.calendarUserAddress;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1021,17 +1021,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l16.4"></a><span id="l16.4">     },</span>
<a href="#l16.5"></a><span id="l16.5"> </span>
<a href="#l16.6"></a><span id="l16.6">     modifyOfflineItem: function(aItem, aListener) {</span>
<a href="#l16.7"></a><span id="l16.7">         let this_ = this;</span>
<a href="#l16.8"></a><span id="l16.8">         let opListener = {</span>
<a href="#l16.9"></a><span id="l16.9">             QueryInterface: XPCOMUtils.generateQI([Components.interfaces.calIOperationListener]),</span>
<a href="#l16.10"></a><span id="l16.10">             onGetResult: function (calendar, status, itemType, detail, count, items) {</span>
<a href="#l16.11"></a><span id="l16.11">             },</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-            onOperationComplete: function(calendar, status, opType, id, oldOfflineJournalFlag ) {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+            onOperationComplete: function(calendar, status, opType, id, oldOfflineJournalFlag) {</span>
<a href="#l16.14"></a><span id="l16.14">                 let newOfflineJournalFlag = cICL.OFFLINE_FLAG_MODIFIED_RECORD;</span>
<a href="#l16.15"></a><span id="l16.15">                 if (oldOfflineJournalFlag == cICL.OFFLINE_FLAG_CREATED_RECORD || oldOfflineJournalFlag == cICL.OFFLINE_FLAG_DELETED_RECORD) {</span>
<a href="#l16.16"></a><span id="l16.16">                     // Do nothing since a flag of &quot;created&quot; or &quot;deleted&quot; exists</span>
<a href="#l16.17"></a><span id="l16.17">                 } else {</span>
<a href="#l16.18"></a><span id="l16.18">                     this_.setOfflineJournalFlag(aItem, newOfflineJournalFlag);</span>
<a href="#l16.19"></a><span id="l16.19">                 }</span>
<a href="#l16.20"></a><span id="l16.20">                 this_.notifyOperationComplete(aListener,</span>
<a href="#l16.21"></a><span id="l16.21">                                               Components.results.NS_OK,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -65,19 +65,19 @@ function calWcapCalendar_getRecurrencePa</span>
<a href="#l17.4"></a><span id="l17.4">                                  &quot;don\'t know how to handle this recurrence item: &quot; + rItem.valueAsIcalString);</span>
<a href="#l17.5"></a><span id="l17.5">             }</span>
<a href="#l17.6"></a><span id="l17.6">         }</span>
<a href="#l17.7"></a><span id="l17.7">     }</span>
<a href="#l17.8"></a><span id="l17.8"> };</span>
<a href="#l17.9"></a><span id="l17.9"> </span>
<a href="#l17.10"></a><span id="l17.10"> function sameStringSet(list, list_) {</span>
<a href="#l17.11"></a><span id="l17.11">     return (list.length == list_.length &amp;&amp;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-            list.every( function everyFunc(x) {</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+            list.every(function everyFunc(x) {</span>
<a href="#l17.14"></a><span id="l17.14">                     return list_.some(</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-                        function someFunc(y) { return x == y; } );</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineplus">+                        function someFunc(y) { return x == y; });</span>
<a href="#l17.17"></a><span id="l17.17">                 }));</span>
<a href="#l17.18"></a><span id="l17.18"> }</span>
<a href="#l17.19"></a><span id="l17.19"> </span>
<a href="#l17.20"></a><span id="l17.20"> calWcapCalendar.prototype.encodeRecurrenceParams =</span>
<a href="#l17.21"></a><span id="l17.21">     function calWcapCalendar_encodeRecurrenceParams(item, oldItem, excludeExdates) {</span>
<a href="#l17.22"></a><span id="l17.22">     var rrules = {};</span>
<a href="#l17.23"></a><span id="l17.23">     var rdates = {};</span>
<a href="#l17.24"></a><span id="l17.24">     var exrules = {};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapRequest.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapRequest.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -88,45 +88,45 @@ calWcapRequest.prototype = {</span>
<a href="#l18.4"></a><span id="l18.4">         }</span>
<a href="#l18.5"></a><span id="l18.5">         ret += (&quot;, isPending=&quot; + this.isPending);</span>
<a href="#l18.6"></a><span id="l18.6">         ret += (&quot;, status=&quot; + errorToString(this.status));</span>
<a href="#l18.7"></a><span id="l18.7">         return ret;</span>
<a href="#l18.8"></a><span id="l18.8">     },</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10">     attachSubRequest: function calWcapRequest_attachSubRequest(req) {</span>
<a href="#l18.11"></a><span id="l18.11">         if (req) {</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-            if (!this.m_attachedRequests.some( function(req_) { return req.id == req_.id; } )) {</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+            if (!this.m_attachedRequests.some(function(req_) { return req.id == req_.id; })) {</span>
<a href="#l18.14"></a><span id="l18.14">                 if (req.isPending) {</span>
<a href="#l18.15"></a><span id="l18.15">                     this.m_attachedRequests.push(req);</span>
<a href="#l18.16"></a><span id="l18.16">                     req.parentRequest = this;</span>
<a href="#l18.17"></a><span id="l18.17">                     log(&quot;attachSubRequest()&quot;, this);</span>
<a href="#l18.18"></a><span id="l18.18">                 } else if (!this.m_locked &amp;&amp; this.m_attachedRequests.length == 0) {</span>
<a href="#l18.19"></a><span id="l18.19">                     this.execRespFunc(req.status);</span>
<a href="#l18.20"></a><span id="l18.20">                 }</span>
<a href="#l18.21"></a><span id="l18.21">             } else {</span>
<a href="#l18.22"></a><span id="l18.22">                 logError(&quot;request already attached: &quot; + req.id, this);</span>
<a href="#l18.23"></a><span id="l18.23">             }</span>
<a href="#l18.24"></a><span id="l18.24">         }</span>
<a href="#l18.25"></a><span id="l18.25">     },</span>
<a href="#l18.26"></a><span id="l18.26"> </span>
<a href="#l18.27"></a><span id="l18.27">     detachSubRequest: function calWcapRequest_detachSubRequest(req, err) {</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineminus">-        this.m_attachedRequests = this.m_attachedRequests.filter( function(req_) { return req.id != req_.id; } );</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineplus">+        this.m_attachedRequests = this.m_attachedRequests.filter(function(req_) { return req.id != req_.id; });</span>
<a href="#l18.30"></a><span id="l18.30">         if (err) {</span>
<a href="#l18.31"></a><span id="l18.31">             // first failing sub request stops parent request:</span>
<a href="#l18.32"></a><span id="l18.32">             this.execRespFunc(err);</span>
<a href="#l18.33"></a><span id="l18.33">         } else if (!this.m_locked &amp;&amp; this.m_attachedRequests.length == 0) {</span>
<a href="#l18.34"></a><span id="l18.34">             // assures that respFunc is executed after all sub requests have been completed:</span>
<a href="#l18.35"></a><span id="l18.35">             this.execRespFunc();</span>
<a href="#l18.36"></a><span id="l18.36">         }</span>
<a href="#l18.37"></a><span id="l18.37">     },</span>
<a href="#l18.38"></a><span id="l18.38"> </span>
<a href="#l18.39"></a><span id="l18.39">     cancelAllSubRequests: function calWcapRequest_cancelAllSubRequests(status) {</span>
<a href="#l18.40"></a><span id="l18.40">         var attachedRequests = this.m_attachedRequests;</span>
<a href="#l18.41"></a><span id="l18.41">         this.m_attachedRequests = [];</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineminus">-        attachedRequests.forEach( function(req) { req.cancel(null); } );</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineplus">+        attachedRequests.forEach(function(req) { req.cancel(null); });</span>
<a href="#l18.44"></a><span id="l18.44">     },</span>
<a href="#l18.45"></a><span id="l18.45"> </span>
<a href="#l18.46"></a><span id="l18.46">     detachFromParent: function calWcapRequest_detachFromParent(err) {</span>
<a href="#l18.47"></a><span id="l18.47">         var parentRequest = this.m_parentRequest;</span>
<a href="#l18.48"></a><span id="l18.48">         if (parentRequest) {</span>
<a href="#l18.49"></a><span id="l18.49">             this.m_parentRequest = null;</span>
<a href="#l18.50"></a><span id="l18.50">             parentRequest.detachSubRequest(this, err);</span>
<a href="#l18.51"></a><span id="l18.51">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -7,17 +7,17 @@</span>
<a href="#l19.4"></a><span id="l19.4">    - file, You can obtain one at http://mozilla.org/MPL/2.0/. --&gt;</span>
<a href="#l19.5"></a><span id="l19.5"> </span>
<a href="#l19.6"></a><span id="l19.6"> &lt;!--</span>
<a href="#l19.7"></a><span id="l19.7">     This defines &lt;datepicker/&gt; &lt;timepicker/&gt; and &lt;datetimepicker/&gt;</span>
<a href="#l19.8"></a><span id="l19.8">     which all descend from datetimepicker-base to get date/time parsing</span>
<a href="#l19.9"></a><span id="l19.9">     and consistent behavior.</span>
<a href="#l19.10"></a><span id="l19.10">     It relies on &lt;minimonth/&gt; for the date picker's drop down.</span>
<a href="#l19.11"></a><span id="l19.11">     You can be notified of change event as follows:</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-      &lt;datepicker id=&quot;my-date-picker&quot; onchange=&quot;myDatePick( this );&quot;/&gt;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+      &lt;datepicker id=&quot;my-date-picker&quot; onchange=&quot;myDatePick(this);&quot;/&gt;</span>
<a href="#l19.14"></a><span id="l19.14">     May get/set value in javascript with</span>
<a href="#l19.15"></a><span id="l19.15">       document.getElementById(&quot;my-date-picker&quot;).value = new Date();</span>
<a href="#l19.16"></a><span id="l19.16">     May disable/enable in javascript with</span>
<a href="#l19.17"></a><span id="l19.17">       document.getElementById(&quot;my-date-picker&quot;).disabled = true;</span>
<a href="#l19.18"></a><span id="l19.18">     May also disable/enable a datetimepicker's component</span>
<a href="#l19.19"></a><span id="l19.19">       datepicker or timepicker individually with</span>
<a href="#l19.20"></a><span id="l19.20">       document.getElementById(&quot;my-datetimepicker&quot;).datepickerdisabled = true;</span>
<a href="#l19.21"></a><span id="l19.21">       document.getElementById(&quot;my-datetimepicker&quot;).timepickerdisabled = true;</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineat">@@ -1122,21 +1122,21 @@</span>
<a href="#l19.23"></a><span id="l19.23">             } else {</span>
<a href="#l19.24"></a><span id="l19.24">               this.mSelectedTime = new Date();</span>
<a href="#l19.25"></a><span id="l19.25">             }</span>
<a href="#l19.26"></a><span id="l19.26"> </span>
<a href="#l19.27"></a><span id="l19.27">             // select the hour item</span>
<a href="#l19.28"></a><span id="l19.28">             var hours24 = this.mSelectedTime.getHours();</span>
<a href="#l19.29"></a><span id="l19.29">             var hourItemId = &quot;time-picker-hour-box-&quot; + hours24;</span>
<a href="#l19.30"></a><span id="l19.30">             var hourItem = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, hourItemId);</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-            this.selectHourItem( hourItem );</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineplus">+            this.selectHourItem(hourItem);</span>
<a href="#l19.33"></a><span id="l19.33"> </span>
<a href="#l19.34"></a><span id="l19.34">             // Show the five minute view if we are an even five minutes,</span>
<a href="#l19.35"></a><span id="l19.35">             // otherwise one minute view</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineminus">-            var minutesByFive = this.calcNearestFiveMinutes( this.mSelectedTime );</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineplus">+            var minutesByFive = this.calcNearestFiveMinutes(this.mSelectedTime);</span>
<a href="#l19.38"></a><span id="l19.38"> </span>
<a href="#l19.39"></a><span id="l19.39">             if (minutesByFive == this.mSelectedTime.getMinutes()) {</span>
<a href="#l19.40"></a><span id="l19.40">               this.clickLess();</span>
<a href="#l19.41"></a><span id="l19.41">             } else {</span>
<a href="#l19.42"></a><span id="l19.42">               this.clickMore();</span>
<a href="#l19.43"></a><span id="l19.43">             }</span>
<a href="#l19.44"></a><span id="l19.44">           ]]&gt;</span>
<a href="#l19.45"></a><span id="l19.45">         &lt;/body&gt;</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineat">@@ -1152,33 +1152,33 @@</span>
<a href="#l19.47"></a><span id="l19.47">         &lt;/body&gt;</span>
<a href="#l19.48"></a><span id="l19.48">       &lt;/method&gt;</span>
<a href="#l19.49"></a><span id="l19.49"> </span>
<a href="#l19.50"></a><span id="l19.50">       &lt;!-- Called when the more tab is clicked, and possibly at startup --&gt;</span>
<a href="#l19.51"></a><span id="l19.51">       &lt;method name=&quot;clickMore&quot;&gt;</span>
<a href="#l19.52"></a><span id="l19.52">         &lt;body&gt;</span>
<a href="#l19.53"></a><span id="l19.53">           &lt;![CDATA[</span>
<a href="#l19.54"></a><span id="l19.54">             // switch to one minute view</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineminus">-            this.switchMinuteView( this.kMINUTE_VIEW_ONE );</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineplus">+            this.switchMinuteView(this.kMINUTE_VIEW_ONE);</span>
<a href="#l19.57"></a><span id="l19.57"> </span>
<a href="#l19.58"></a><span id="l19.58">             // select minute box corresponding to the time</span>
<a href="#l19.59"></a><span id="l19.59">             var minutes = this.mSelectedTime.getMinutes();</span>
<a href="#l19.60"></a><span id="l19.60">             var oneMinuteItemId = &quot;time-picker-one-minute-box-&quot; + minutes;</span>
<a href="#l19.61"></a><span id="l19.61">             var oneMinuteItem = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, oneMinuteItemId);</span>
<a href="#l19.62"></a><span id="l19.62">             this.selectMinuteItem(oneMinuteItem);</span>
<a href="#l19.63"></a><span id="l19.63">           ]]&gt;</span>
<a href="#l19.64"></a><span id="l19.64">         &lt;/body&gt;</span>
<a href="#l19.65"></a><span id="l19.65">       &lt;/method&gt;</span>
<a href="#l19.66"></a><span id="l19.66"> </span>
<a href="#l19.67"></a><span id="l19.67">       &lt;!-- Called when the less tab is clicked, and possibly at startup --&gt;</span>
<a href="#l19.68"></a><span id="l19.68">       &lt;method name=&quot;clickLess&quot;&gt;</span>
<a href="#l19.69"></a><span id="l19.69">         &lt;body&gt;</span>
<a href="#l19.70"></a><span id="l19.70">           &lt;![CDATA[</span>
<a href="#l19.71"></a><span id="l19.71">             // switch to five minute view</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineminus">-            this.switchMinuteView( this.kMINUTE_VIEW_FIVE );</span>
<a href="#l19.73"></a><span id="l19.73" class="difflineplus">+            this.switchMinuteView(this.kMINUTE_VIEW_FIVE);</span>
<a href="#l19.74"></a><span id="l19.74"> </span>
<a href="#l19.75"></a><span id="l19.75">             // select closest five minute box,</span>
<a href="#l19.76"></a><span id="l19.76">             // BUT leave the selected time at what may NOT be an even five minutes</span>
<a href="#l19.77"></a><span id="l19.77">             // So that If they click more again the proper non-even-five minute</span>
<a href="#l19.78"></a><span id="l19.78">             // box will be selected</span>
<a href="#l19.79"></a><span id="l19.79">             var minutesByFive = this.calcNearestFiveMinutes(this.mSelectedTime);</span>
<a href="#l19.80"></a><span id="l19.80">             var fiveMinuteItemId = &quot;time-picker-five-minute-box-&quot; + minutesByFive;</span>
<a href="#l19.81"></a><span id="l19.81">             var fiveMinuteItem = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, fiveMinuteItemId);</span>
<a href="#l19.82"></a><span id="l19.82" class="difflineat">@@ -1189,20 +1189,20 @@</span>
<a href="#l19.83"></a><span id="l19.83"> </span>
<a href="#l19.84"></a><span id="l19.84">       &lt;!-- Called when one of the hour boxes is clicked --&gt;</span>
<a href="#l19.85"></a><span id="l19.85">       &lt;method name=&quot;clickHour&quot;&gt;</span>
<a href="#l19.86"></a><span id="l19.86">         &lt;parameter name=&quot;hourItem&quot;/&gt;</span>
<a href="#l19.87"></a><span id="l19.87">         &lt;parameter name=&quot;hourNumber&quot;/&gt;</span>
<a href="#l19.88"></a><span id="l19.88">         &lt;body&gt;</span>
<a href="#l19.89"></a><span id="l19.89">           &lt;![CDATA[</span>
<a href="#l19.90"></a><span id="l19.90">             // select the item</span>
<a href="#l19.91"></a><span id="l19.91" class="difflineminus">-            this.selectHourItem( hourItem );</span>
<a href="#l19.92"></a><span id="l19.92" class="difflineplus">+            this.selectHourItem(hourItem);</span>
<a href="#l19.93"></a><span id="l19.93"> </span>
<a href="#l19.94"></a><span id="l19.94">             // Change the hour in the selected time.</span>
<a href="#l19.95"></a><span id="l19.95" class="difflineminus">-            this.mSelectedTime.setHours( hourNumber );</span>
<a href="#l19.96"></a><span id="l19.96" class="difflineplus">+            this.mSelectedTime.setHours(hourNumber);</span>
<a href="#l19.97"></a><span id="l19.97"> </span>
<a href="#l19.98"></a><span id="l19.98">             this.hasChanged = true;</span>
<a href="#l19.99"></a><span id="l19.99">           ]]&gt;</span>
<a href="#l19.100"></a><span id="l19.100">         &lt;/body&gt;</span>
<a href="#l19.101"></a><span id="l19.101">       &lt;/method&gt;</span>
<a href="#l19.102"></a><span id="l19.102"> </span>
<a href="#l19.103"></a><span id="l19.103">       &lt;!-- Called when one of the hour boxes is double clicked</span>
<a href="#l19.104"></a><span id="l19.104">            Sets the time to the selected hour, on the hour, and closes the popup --&gt;</span>
<a href="#l19.105"></a><span id="l19.105" class="difflineat">@@ -1238,17 +1238,17 @@</span>
<a href="#l19.106"></a><span id="l19.106">       &lt;/method&gt;</span>
<a href="#l19.107"></a><span id="l19.107"> </span>
<a href="#l19.108"></a><span id="l19.108">       &lt;!-- Called by clickMinute when one of the minute boxes is clicked,</span>
<a href="#l19.109"></a><span id="l19.109">            Sets the value property and calls the client's onchange. --&gt;</span>
<a href="#l19.110"></a><span id="l19.110">       &lt;method name=&quot;timeSelected&quot;&gt;</span>
<a href="#l19.111"></a><span id="l19.111">         &lt;body&gt;</span>
<a href="#l19.112"></a><span id="l19.112">           &lt;![CDATA[</span>
<a href="#l19.113"></a><span id="l19.113">             // Copy picked time to avoid problems changing Date object in place</span>
<a href="#l19.114"></a><span id="l19.114" class="difflineminus">-            var pickedTime = new Date( this.mSelectedTime );</span>
<a href="#l19.115"></a><span id="l19.115" class="difflineplus">+            var pickedTime = new Date(this.mSelectedTime);</span>
<a href="#l19.116"></a><span id="l19.116"> </span>
<a href="#l19.117"></a><span id="l19.117">             // put the picked time in the value property, and update</span>
<a href="#l19.118"></a><span id="l19.118">             this.mPicker.update(pickedTime, true);</span>
<a href="#l19.119"></a><span id="l19.119">             // select changed value so no cursor appears (can't type to it).</span>
<a href="#l19.120"></a><span id="l19.120">             this.mPicker.select();</span>
<a href="#l19.121"></a><span id="l19.121">           ]]&gt;</span>
<a href="#l19.122"></a><span id="l19.122">         &lt;/body&gt;</span>
<a href="#l19.123"></a><span id="l19.123">       &lt;/method&gt;</span>
<a href="#l19.124"></a><span id="l19.124" class="difflineat">@@ -1257,54 +1257,54 @@</span>
<a href="#l19.125"></a><span id="l19.125">       &lt;method name=&quot;switchMinuteView&quot;&gt;</span>
<a href="#l19.126"></a><span id="l19.126">         &lt;parameter name=&quot;view&quot;/&gt;</span>
<a href="#l19.127"></a><span id="l19.127">         &lt;body&gt;</span>
<a href="#l19.128"></a><span id="l19.128">           &lt;![CDATA[</span>
<a href="#l19.129"></a><span id="l19.129">             var fiveMinuteBox = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;time-picker-five-minute-grid-box&quot;);</span>
<a href="#l19.130"></a><span id="l19.130">             var oneMinuteBox = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;time-picker-one-minute-grid-box&quot;);</span>
<a href="#l19.131"></a><span id="l19.131"> </span>
<a href="#l19.132"></a><span id="l19.132">             if (view == this.kMINUTE_VIEW_ONE) {</span>
<a href="#l19.133"></a><span id="l19.133" class="difflineminus">-              fiveMinuteBox.setAttribute( &quot;hidden&quot;, true );</span>
<a href="#l19.134"></a><span id="l19.134" class="difflineminus">-              oneMinuteBox.setAttribute( &quot;hidden&quot;, false );</span>
<a href="#l19.135"></a><span id="l19.135" class="difflineplus">+              fiveMinuteBox.setAttribute(&quot;hidden&quot;, true);</span>
<a href="#l19.136"></a><span id="l19.136" class="difflineplus">+              oneMinuteBox.setAttribute(&quot;hidden&quot;, false);</span>
<a href="#l19.137"></a><span id="l19.137">             } else {</span>
<a href="#l19.138"></a><span id="l19.138" class="difflineminus">-              fiveMinuteBox.setAttribute( &quot;hidden&quot;, false );</span>
<a href="#l19.139"></a><span id="l19.139" class="difflineminus">-              oneMinuteBox.setAttribute( &quot;hidden&quot;, true );</span>
<a href="#l19.140"></a><span id="l19.140" class="difflineplus">+              fiveMinuteBox.setAttribute(&quot;hidden&quot;, false);</span>
<a href="#l19.141"></a><span id="l19.141" class="difflineplus">+              oneMinuteBox.setAttribute(&quot;hidden&quot;, true);</span>
<a href="#l19.142"></a><span id="l19.142">             }</span>
<a href="#l19.143"></a><span id="l19.143">           ]]&gt;</span>
<a href="#l19.144"></a><span id="l19.144">         &lt;/body&gt;</span>
<a href="#l19.145"></a><span id="l19.145">       &lt;/method&gt;</span>
<a href="#l19.146"></a><span id="l19.146"> </span>
<a href="#l19.147"></a><span id="l19.147">       &lt;!-- Helper function to select an hour item --&gt;</span>
<a href="#l19.148"></a><span id="l19.148">       &lt;method name=&quot;selectHourItem&quot;&gt;</span>
<a href="#l19.149"></a><span id="l19.149">         &lt;parameter name=&quot;hourItem&quot;/&gt;</span>
<a href="#l19.150"></a><span id="l19.150">         &lt;body&gt;</span>
<a href="#l19.151"></a><span id="l19.151">           &lt;![CDATA[</span>
<a href="#l19.152"></a><span id="l19.152">             // clear old selection, if there is one</span>
<a href="#l19.153"></a><span id="l19.153">             if (this.mSelectedHourItem != null) {</span>
<a href="#l19.154"></a><span id="l19.154" class="difflineminus">-              this.mSelectedHourItem.removeAttribute( &quot;selected&quot; );</span>
<a href="#l19.155"></a><span id="l19.155" class="difflineplus">+              this.mSelectedHourItem.removeAttribute(&quot;selected&quot;);</span>
<a href="#l19.156"></a><span id="l19.156">             }</span>
<a href="#l19.157"></a><span id="l19.157">             // set selected attribute, to cause the selected style to apply</span>
<a href="#l19.158"></a><span id="l19.158" class="difflineminus">-            hourItem.setAttribute( &quot;selected&quot;, &quot;true&quot; );</span>
<a href="#l19.159"></a><span id="l19.159" class="difflineplus">+            hourItem.setAttribute(&quot;selected&quot;, &quot;true&quot;);</span>
<a href="#l19.160"></a><span id="l19.160">             // remember the selected item so we can deselect it</span>
<a href="#l19.161"></a><span id="l19.161">             this.mSelectedHourItem = hourItem;</span>
<a href="#l19.162"></a><span id="l19.162">           ]]&gt;</span>
<a href="#l19.163"></a><span id="l19.163">         &lt;/body&gt;</span>
<a href="#l19.164"></a><span id="l19.164">       &lt;/method&gt;</span>
<a href="#l19.165"></a><span id="l19.165"> </span>
<a href="#l19.166"></a><span id="l19.166">       &lt;!-- Helper function to select an minute item --&gt;</span>
<a href="#l19.167"></a><span id="l19.167">       &lt;method name=&quot;selectMinuteItem&quot;&gt;</span>
<a href="#l19.168"></a><span id="l19.168">         &lt;parameter name=&quot;minuteItem&quot;/&gt;</span>
<a href="#l19.169"></a><span id="l19.169">         &lt;body&gt;</span>
<a href="#l19.170"></a><span id="l19.170">           &lt;![CDATA[</span>
<a href="#l19.171"></a><span id="l19.171">             // clear old selection, if there is one</span>
<a href="#l19.172"></a><span id="l19.172">             if (this.mSelectedMinuteItem != null) {</span>
<a href="#l19.173"></a><span id="l19.173" class="difflineminus">-              this.mSelectedMinuteItem.removeAttribute( &quot;selected&quot; );</span>
<a href="#l19.174"></a><span id="l19.174" class="difflineplus">+              this.mSelectedMinuteItem.removeAttribute(&quot;selected&quot;);</span>
<a href="#l19.175"></a><span id="l19.175">             }</span>
<a href="#l19.176"></a><span id="l19.176">             // set selected attribute, to cause the selected style to apply</span>
<a href="#l19.177"></a><span id="l19.177" class="difflineminus">-            minuteItem.setAttribute( &quot;selected&quot;, &quot;true&quot; );</span>
<a href="#l19.178"></a><span id="l19.178" class="difflineplus">+            minuteItem.setAttribute(&quot;selected&quot;, &quot;true&quot;);</span>
<a href="#l19.179"></a><span id="l19.179">             // remember the selected item so we can deselect it</span>
<a href="#l19.180"></a><span id="l19.180">             this.mSelectedMinuteItem = minuteItem;</span>
<a href="#l19.181"></a><span id="l19.181">           ]]&gt;</span>
<a href="#l19.182"></a><span id="l19.182">         &lt;/body&gt;</span>
<a href="#l19.183"></a><span id="l19.183">       &lt;/method&gt;</span>
<a href="#l19.184"></a><span id="l19.184">       &lt;method name=&quot;moveMinutes&quot;&gt;</span>
<a href="#l19.185"></a><span id="l19.185">         &lt;parameter name=&quot;aNumber&quot;/&gt;</span>
<a href="#l19.186"></a><span id="l19.186">         &lt;body&gt;</span>
<a href="#l19.187"></a><span id="l19.187" class="difflineat">@@ -1381,17 +1381,17 @@</span>
<a href="#l19.188"></a><span id="l19.188">       &lt;/method&gt;</span>
<a href="#l19.189"></a><span id="l19.189"> </span>
<a href="#l19.190"></a><span id="l19.190">       &lt;!-- Helper function to calulate the nearest even five minutes --&gt;</span>
<a href="#l19.191"></a><span id="l19.191">       &lt;method name=&quot;calcNearestFiveMinutes&quot;&gt;</span>
<a href="#l19.192"></a><span id="l19.192">         &lt;parameter name=&quot;time&quot;/&gt;</span>
<a href="#l19.193"></a><span id="l19.193">         &lt;body&gt;</span>
<a href="#l19.194"></a><span id="l19.194">           &lt;![CDATA[</span>
<a href="#l19.195"></a><span id="l19.195">             var minutes = time.getMinutes();</span>
<a href="#l19.196"></a><span id="l19.196" class="difflineminus">-            var minutesByFive = Math.round( minutes / 5 ) * 5;</span>
<a href="#l19.197"></a><span id="l19.197" class="difflineplus">+            var minutesByFive = Math.round(minutes / 5) * 5;</span>
<a href="#l19.198"></a><span id="l19.198"> </span>
<a href="#l19.199"></a><span id="l19.199">             if (minutesByFive &gt; 59) {</span>
<a href="#l19.200"></a><span id="l19.200">               minutesByFive = 55;</span>
<a href="#l19.201"></a><span id="l19.201">             }</span>
<a href="#l19.202"></a><span id="l19.202">             return minutesByFive;</span>
<a href="#l19.203"></a><span id="l19.203">           ]]&gt;</span>
<a href="#l19.204"></a><span id="l19.204">         &lt;/body&gt;</span>
<a href="#l19.205"></a><span id="l19.205">       &lt;/method&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/resources/content/mouseoverPreviews.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/resources/content/mouseoverPreviews.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -13,17 +13,17 @@</span>
<a href="#l20.4"></a><span id="l20.4"> </span>
<a href="#l20.5"></a><span id="l20.5"> /** PUBLIC</span>
<a href="#l20.6"></a><span id="l20.6">  *</span>
<a href="#l20.7"></a><span id="l20.7">  *  This changes the mouseover preview based on the start and end dates</span>
<a href="#l20.8"></a><span id="l20.8">  *  of an occurrence of a (one-time or recurring) calEvent or calToDo.</span>
<a href="#l20.9"></a><span id="l20.9">  *  Used by all grid views.</span>
<a href="#l20.10"></a><span id="l20.10">  */</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-function onMouseOverItem( occurrenceBoxMouseEvent ) {</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+function onMouseOverItem(occurrenceBoxMouseEvent) {</span>
<a href="#l20.14"></a><span id="l20.14">   if (&quot;occurrence&quot; in occurrenceBoxMouseEvent.currentTarget) {</span>
<a href="#l20.15"></a><span id="l20.15">     // occurrence of repeating event or todo</span>
<a href="#l20.16"></a><span id="l20.16">       var occurrence = occurrenceBoxMouseEvent.currentTarget.occurrence;</span>
<a href="#l20.17"></a><span id="l20.17">       const toolTip = document.getElementById(&quot;itemTooltip&quot;);</span>
<a href="#l20.18"></a><span id="l20.18">       return showToolTip(toolTip, occurrence);</span>
<a href="#l20.19"></a><span id="l20.19">   }</span>
<a href="#l20.20"></a><span id="l20.20">   return false;</span>
<a href="#l20.21"></a><span id="l20.21"> }</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -45,17 +45,17 @@ function showToolTip(aToolTip, aItem) {</span>
<a href="#l20.23"></a><span id="l20.23">     return false;</span>
<a href="#l20.24"></a><span id="l20.24"> }</span>
<a href="#l20.25"></a><span id="l20.25"> </span>
<a href="#l20.26"></a><span id="l20.26"> /**</span>
<a href="#l20.27"></a><span id="l20.27">  *  Called when a user hovers over a todo element and the text for the mouse over is changed.</span>
<a href="#l20.28"></a><span id="l20.28">  */</span>
<a href="#l20.29"></a><span id="l20.29"> function getPreviewForTask(toDoItem) {</span>
<a href="#l20.30"></a><span id="l20.30">   if (toDoItem) {</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-    const vbox = document.createElement( &quot;vbox&quot; );</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+    const vbox = document.createElement(&quot;vbox&quot;);</span>
<a href="#l20.33"></a><span id="l20.33">     vbox.setAttribute(&quot;class&quot;, &quot;tooltipBox&quot;);</span>
<a href="#l20.34"></a><span id="l20.34">     // tooltip appears above or below pointer, so may have as little as</span>
<a href="#l20.35"></a><span id="l20.35">     // one half the screen height available (avoid top going off screen).</span>
<a href="#l20.36"></a><span id="l20.36">     vbox.maxHeight = Math.floor(screen.height / 2);</span>
<a href="#l20.37"></a><span id="l20.37">     boxInitializeHeaderGrid(vbox);</span>
<a href="#l20.38"></a><span id="l20.38"> </span>
<a href="#l20.39"></a><span id="l20.39">     var hasHeader = false;</span>
<a href="#l20.40"></a><span id="l20.40"> </span>
<a href="#l20.41"></a><span id="l20.41" class="difflineat">@@ -124,32 +124,32 @@ function getPreviewForTask(toDoItem) {</span>
<a href="#l20.42"></a><span id="l20.42">     if (description) {</span>
<a href="#l20.43"></a><span id="l20.43">       // display wrapped description lines like body of message below headers</span>
<a href="#l20.44"></a><span id="l20.44">       if (hasHeader) {</span>
<a href="#l20.45"></a><span id="l20.45">         boxAppendBodySeparator(vbox);</span>
<a href="#l20.46"></a><span id="l20.46">       }</span>
<a href="#l20.47"></a><span id="l20.47">       boxAppendBody(vbox, description);</span>
<a href="#l20.48"></a><span id="l20.48">     }</span>
<a href="#l20.49"></a><span id="l20.49"> </span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-    return ( vbox );</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineplus">+    return (vbox);</span>
<a href="#l20.52"></a><span id="l20.52">   } else {</span>
<a href="#l20.53"></a><span id="l20.53">     return null;</span>
<a href="#l20.54"></a><span id="l20.54">   }</span>
<a href="#l20.55"></a><span id="l20.55"> }</span>
<a href="#l20.56"></a><span id="l20.56"> </span>
<a href="#l20.57"></a><span id="l20.57"> /**</span>
<a href="#l20.58"></a><span id="l20.58">  *  Called when mouse moves over a different, or</span>
<a href="#l20.59"></a><span id="l20.59">  *  when mouse moves over event in event list.</span>
<a href="#l20.60"></a><span id="l20.60">  *  The instStartDate is date of instance displayed at event box</span>
<a href="#l20.61"></a><span id="l20.61">  *  (recurring or multiday events may be displayed by more than one event box</span>
<a href="#l20.62"></a><span id="l20.62">  *  for different days), or null if should compute next instance from now.</span>
<a href="#l20.63"></a><span id="l20.63">  */</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineminus">-function getPreviewForEvent( aEvent) {</span>
<a href="#l20.65"></a><span id="l20.65" class="difflineplus">+function getPreviewForEvent(aEvent) {</span>
<a href="#l20.66"></a><span id="l20.66">   var event = aEvent;</span>
<a href="#l20.67"></a><span id="l20.67" class="difflineminus">-  const vbox = document.createElement( &quot;vbox&quot; );</span>
<a href="#l20.68"></a><span id="l20.68" class="difflineplus">+  const vbox = document.createElement(&quot;vbox&quot;);</span>
<a href="#l20.69"></a><span id="l20.69">   vbox.setAttribute(&quot;class&quot;, &quot;tooltipBox&quot;);</span>
<a href="#l20.70"></a><span id="l20.70">   // tooltip appears above or below pointer, so may have as little as</span>
<a href="#l20.71"></a><span id="l20.71">   // one half the screen height available (avoid top going off screen).</span>
<a href="#l20.72"></a><span id="l20.72">   vbox.maxHeight = Math.floor(screen.height / 2);</span>
<a href="#l20.73"></a><span id="l20.73">   boxInitializeHeaderGrid(vbox);</span>
<a href="#l20.74"></a><span id="l20.74"> </span>
<a href="#l20.75"></a><span id="l20.75">   if (event) {</span>
<a href="#l20.76"></a><span id="l20.76">     if (event.title) {</span>
<a href="#l20.77"></a><span id="l20.77" class="difflineat">@@ -184,41 +184,41 @@ function getPreviewForEvent( aEvent) {</span>
<a href="#l20.78"></a><span id="l20.78">     }</span>
<a href="#l20.79"></a><span id="l20.79"> </span>
<a href="#l20.80"></a><span id="l20.80">     var description = event.getProperty(&quot;DESCRIPTION&quot;);</span>
<a href="#l20.81"></a><span id="l20.81">     if (description) {</span>
<a href="#l20.82"></a><span id="l20.82">       boxAppendBodySeparator(vbox);</span>
<a href="#l20.83"></a><span id="l20.83">       // display wrapped description lines, like body of message below headers</span>
<a href="#l20.84"></a><span id="l20.84">       boxAppendBody(vbox, description);</span>
<a href="#l20.85"></a><span id="l20.85">     }</span>
<a href="#l20.86"></a><span id="l20.86" class="difflineminus">-    return ( vbox );</span>
<a href="#l20.87"></a><span id="l20.87" class="difflineplus">+    return (vbox);</span>
<a href="#l20.88"></a><span id="l20.88">   } else {</span>
<a href="#l20.89"></a><span id="l20.89">       return null;</span>
<a href="#l20.90"></a><span id="l20.90">   }</span>
<a href="#l20.91"></a><span id="l20.91"> }</span>
<a href="#l20.92"></a><span id="l20.92"> </span>
<a href="#l20.93"></a><span id="l20.93"> </span>
<a href="#l20.94"></a><span id="l20.94"> /** String for event status: (none), Tentative, Confirmed, or Cancelled **/</span>
<a href="#l20.95"></a><span id="l20.95"> function getEventStatusString(calendarEvent) {</span>
<a href="#l20.96"></a><span id="l20.96" class="difflineminus">-  switch ( calendarEvent.status ) {</span>
<a href="#l20.97"></a><span id="l20.97" class="difflineplus">+  switch (calendarEvent.status) {</span>
<a href="#l20.98"></a><span id="l20.98">     // Event status value keywords are specified in RFC2445sec4.8.1.11</span>
<a href="#l20.99"></a><span id="l20.99">     case &quot;TENTATIVE&quot;:</span>
<a href="#l20.100"></a><span id="l20.100">       return calGetString('calendar', &quot;statusTentative&quot;);</span>
<a href="#l20.101"></a><span id="l20.101">     case &quot;CONFIRMED&quot;:</span>
<a href="#l20.102"></a><span id="l20.102">       return calGetString('calendar', &quot;statusConfirmed&quot;);</span>
<a href="#l20.103"></a><span id="l20.103">     case &quot;CANCELLED&quot;:</span>
<a href="#l20.104"></a><span id="l20.104">       return calGetString('calendar', &quot;eventStatusCancelled&quot;);</span>
<a href="#l20.105"></a><span id="l20.105">      default:</span>
<a href="#l20.106"></a><span id="l20.106">         return &quot;&quot;;</span>
<a href="#l20.107"></a><span id="l20.107">   }</span>
<a href="#l20.108"></a><span id="l20.108"> }</span>
<a href="#l20.109"></a><span id="l20.109"> </span>
<a href="#l20.110"></a><span id="l20.110"> /** String for todo status: (none), NeedsAction, InProcess, Cancelled, or Completed **/</span>
<a href="#l20.111"></a><span id="l20.111"> function getToDoStatusString(iCalToDo) {</span>
<a href="#l20.112"></a><span id="l20.112" class="difflineminus">-  switch ( iCalToDo.status ) {</span>
<a href="#l20.113"></a><span id="l20.113" class="difflineplus">+  switch (iCalToDo.status) {</span>
<a href="#l20.114"></a><span id="l20.114">     // Todo status keywords are specified in RFC2445sec4.8.1.11</span>
<a href="#l20.115"></a><span id="l20.115">     case &quot;NEEDS-ACTION&quot;:</span>
<a href="#l20.116"></a><span id="l20.116">       return calGetString('calendar', &quot;statusNeedsAction&quot;);</span>
<a href="#l20.117"></a><span id="l20.117">     case &quot;IN-PROCESS&quot;:</span>
<a href="#l20.118"></a><span id="l20.118">       return calGetString('calendar', &quot;statusInProcess&quot;);</span>
<a href="#l20.119"></a><span id="l20.119">     case &quot;CANCELLED&quot;:</span>
<a href="#l20.120"></a><span id="l20.120">       return calGetString('calendar', &quot;todoStatusCancelled&quot;);</span>
<a href="#l20.121"></a><span id="l20.121">     case &quot;COMPLETED&quot;:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/resources/content/publish.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/resources/content/publish.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -12,17 +12,17 @@ Components.utils.import(&quot;resource://gre/</span>
<a href="#l21.4"></a><span id="l21.4">  * Show publish dialog, ask for URL and publish all selected items.</span>
<a href="#l21.5"></a><span id="l21.5">  */</span>
<a href="#l21.6"></a><span id="l21.6"> function publishCalendarData() {</span>
<a href="#l21.7"></a><span id="l21.7">    var args = {};</span>
<a href="#l21.8"></a><span id="l21.8"> </span>
<a href="#l21.9"></a><span id="l21.9">    args.onOk = self.publishCalendarDataDialogResponse;</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">    openDialog(&quot;chrome://calendar/content/publishDialog.xul&quot;, &quot;caPublishEvents&quot;,</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-              &quot;chrome,titlebar,modal,resizable&quot;, args );</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+              &quot;chrome,titlebar,modal,resizable&quot;, args);</span>
<a href="#l21.14"></a><span id="l21.14"> }</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16"> /**</span>
<a href="#l21.17"></a><span id="l21.17">  * publishCalendarDataDialogResponse</span>
<a href="#l21.18"></a><span id="l21.18">  * Callback method for publishCalendarData() that is called when the user</span>
<a href="#l21.19"></a><span id="l21.19">  * presses the OK button in the publish dialog.</span>
<a href="#l21.20"></a><span id="l21.20">  */</span>
<a href="#l21.21"></a><span id="l21.21"> function publishCalendarDataDialogResponse(CalendarPublishObject, aProgressDialog) {</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -69,17 +69,17 @@ function publishEntireCalendar(aCalendar</span>
<a href="#l21.23"></a><span id="l21.23">     // restore the remote ics path preference from the calendar passed in</span>
<a href="#l21.24"></a><span id="l21.24">     let remotePath = aCalendar.getProperty(&quot;remote-ics-path&quot;);</span>
<a href="#l21.25"></a><span id="l21.25">     if (remotePath &amp;&amp; remotePath.length &amp;&amp; remotePath.length &gt; 0) {</span>
<a href="#l21.26"></a><span id="l21.26">         publishObject.remotePath = remotePath;</span>
<a href="#l21.27"></a><span id="l21.27">     }</span>
<a href="#l21.28"></a><span id="l21.28"> </span>
<a href="#l21.29"></a><span id="l21.29">     args.publishObject = publishObject;</span>
<a href="#l21.30"></a><span id="l21.30">     openDialog(&quot;chrome://calendar/content/publishDialog.xul&quot;, &quot;caPublishEvents&quot;,</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-               &quot;chrome,titlebar,modal,resizable&quot;, args );</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+               &quot;chrome,titlebar,modal,resizable&quot;, args);</span>
<a href="#l21.33"></a><span id="l21.33"> </span>
<a href="#l21.34"></a><span id="l21.34">     return;</span>
<a href="#l21.35"></a><span id="l21.35"> }</span>
<a href="#l21.36"></a><span id="l21.36"> </span>
<a href="#l21.37"></a><span id="l21.37"> /**</span>
<a href="#l21.38"></a><span id="l21.38">  * publishEntireCalendarDialogResponse</span>
<a href="#l21.39"></a><span id="l21.39">  * Callback method for publishEntireCalendar() that is called when the user</span>
<a href="#l21.40"></a><span id="l21.40">  * presses the OK button in the publish dialog.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/resources/content/publishDialog.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/resources/content/publishDialog.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -13,60 +13,60 @@ function loadCalendarPublishDialog() {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">    var args = window.arguments[0];</span>
<a href="#l22.6"></a><span id="l22.6"> </span>
<a href="#l22.7"></a><span id="l22.7">    gOnOkFunction = args.onOk;</span>
<a href="#l22.8"></a><span id="l22.8"> </span>
<a href="#l22.9"></a><span id="l22.9">    if (args.publishObject) {</span>
<a href="#l22.10"></a><span id="l22.10">       gPublishObject = args.publishObject;</span>
<a href="#l22.11"></a><span id="l22.11">       if (args.publishObject.remotePath) {</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-          document.getElementById( &quot;publish-remotePath-textbox&quot; ).value = args.publishObject.remotePath;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+          document.getElementById(&quot;publish-remotePath-textbox&quot;).value = args.publishObject.remotePath;</span>
<a href="#l22.14"></a><span id="l22.14">       }</span>
<a href="#l22.15"></a><span id="l22.15">    } else {</span>
<a href="#l22.16"></a><span id="l22.16">       gPublishObject = {};</span>
<a href="#l22.17"></a><span id="l22.17">    }</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineminus">-   document.getElementById( &quot;calendar-publishwindow&quot; ).getButton( &quot;accept&quot; ).setAttribute( &quot;label&quot;, publishButtonLabel );</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineplus">+   document.getElementById(&quot;calendar-publishwindow&quot;).getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;, publishButtonLabel);</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21" class="difflineminus">-   checkURLField( );</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineplus">+   checkURLField();</span>
<a href="#l22.23"></a><span id="l22.23"> </span>
<a href="#l22.24"></a><span id="l22.24" class="difflineminus">-   var firstFocus = document.getElementById( &quot;publish-remotePath-textbox&quot; );</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineplus">+   var firstFocus = document.getElementById(&quot;publish-remotePath-textbox&quot;);</span>
<a href="#l22.26"></a><span id="l22.26">    firstFocus.focus();</span>
<a href="#l22.27"></a><span id="l22.27"> }</span>
<a href="#l22.28"></a><span id="l22.28"> </span>
<a href="#l22.29"></a><span id="l22.29"> </span>
<a href="#l22.30"></a><span id="l22.30"> </span>
<a href="#l22.31"></a><span id="l22.31"> /**</span>
<a href="#l22.32"></a><span id="l22.32"> *   Called when the OK button is clicked.</span>
<a href="#l22.33"></a><span id="l22.33"> */</span>
<a href="#l22.34"></a><span id="l22.34"> </span>
<a href="#l22.35"></a><span id="l22.35"> function onOKCommand() {</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineminus">-   gPublishObject.remotePath = document.getElementById( &quot;publish-remotePath-textbox&quot; ).value;</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineplus">+   gPublishObject.remotePath = document.getElementById(&quot;publish-remotePath-textbox&quot;).value;</span>
<a href="#l22.38"></a><span id="l22.38"> </span>
<a href="#l22.39"></a><span id="l22.39">    // call caller's on OK function</span>
<a href="#l22.40"></a><span id="l22.40">    gOnOkFunction(gPublishObject, progressDialog);</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineminus">-   document.getElementById( &quot;calendar-publishwindow&quot; ).getButton( &quot;accept&quot; ).setAttribute( &quot;label&quot;, closeButtonLabel );</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineminus">-   document.getElementById( &quot;calendar-publishwindow&quot; ).setAttribute( &quot;ondialogaccept&quot;, &quot;closeDialog()&quot; );</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineminus">-   return ( false );</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineplus">+   document.getElementById(&quot;calendar-publishwindow&quot;).getButton(&quot;accept&quot;).setAttribute(&quot;label&quot;, closeButtonLabel);</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineplus">+   document.getElementById(&quot;calendar-publishwindow&quot;).setAttribute(&quot;ondialogaccept&quot;, &quot;closeDialog()&quot;);</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineplus">+   return false;</span>
<a href="#l22.47"></a><span id="l22.47"> }</span>
<a href="#l22.48"></a><span id="l22.48"> </span>
<a href="#l22.49"></a><span id="l22.49"> </span>
<a href="#l22.50"></a><span id="l22.50"> function checkURLField() {</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineminus">-   if (document.getElementById( &quot;publish-remotePath-textbox&quot; ).value.length == 0) {</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineminus">-      document.getElementById( &quot;calendar-publishwindow&quot; ).getButton( &quot;accept&quot; ).setAttribute( &quot;disabled&quot;, &quot;true&quot; );</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineplus">+   if (document.getElementById(&quot;publish-remotePath-textbox&quot;).value.length == 0) {</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineplus">+      document.getElementById(&quot;calendar-publishwindow&quot;).getButton(&quot;accept&quot;).setAttribute(&quot;disabled&quot;, &quot;true&quot;);</span>
<a href="#l22.55"></a><span id="l22.55">    } else {</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineminus">-      document.getElementById( &quot;calendar-publishwindow&quot; ).getButton( &quot;accept&quot; ).removeAttribute( &quot;disabled&quot; );</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineplus">+      document.getElementById(&quot;calendar-publishwindow&quot;).getButton(&quot;accept&quot;).removeAttribute(&quot;disabled&quot;);</span>
<a href="#l22.58"></a><span id="l22.58">    }</span>
<a href="#l22.59"></a><span id="l22.59"> }</span>
<a href="#l22.60"></a><span id="l22.60"> </span>
<a href="#l22.61"></a><span id="l22.61"> function closeDialog() {</span>
<a href="#l22.62"></a><span id="l22.62">    self.close();</span>
<a href="#l22.63"></a><span id="l22.63"> }</span>
<a href="#l22.64"></a><span id="l22.64"> </span>
<a href="#l22.65"></a><span id="l22.65"> var progressDialog = {</span>
<a href="#l22.66"></a><span id="l22.66">     onStartUpload: function() {</span>
<a href="#l22.67"></a><span id="l22.67" class="difflineminus">-        document.getElementById( &quot;publish-progressmeter&quot; ).setAttribute( &quot;mode&quot;, &quot;undetermined&quot; );</span>
<a href="#l22.68"></a><span id="l22.68" class="difflineplus">+        document.getElementById(&quot;publish-progressmeter&quot;).setAttribute(&quot;mode&quot;, &quot;undetermined&quot;);</span>
<a href="#l22.69"></a><span id="l22.69">     },</span>
<a href="#l22.70"></a><span id="l22.70"> </span>
<a href="#l22.71"></a><span id="l22.71">     onStopUpload: function() {</span>
<a href="#l22.72"></a><span id="l22.72" class="difflineminus">-        document.getElementById( &quot;publish-progressmeter&quot; ).setAttribute( &quot;mode&quot;, &quot;determined&quot; );</span>
<a href="#l22.73"></a><span id="l22.73" class="difflineplus">+        document.getElementById(&quot;publish-progressmeter&quot;).setAttribute(&quot;mode&quot;, &quot;determined&quot;);</span>
<a href="#l22.74"></a><span id="l22.74">     }</span>
<a href="#l22.75"></a><span id="l22.75"> };</span>
<a href="#l22.76"></a><span id="l22.76"> progressDialog.wrappedJSObject = progressDialog;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/test/mozmill/shared-modules/calendar-utils.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/test/mozmill/shared-modules/calendar-utils.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -592,17 +592,17 @@ function setData(controller, data) {</span>
<a href="#l23.4"></a><span id="l23.4">   let currentStatus = (new elementslib.ID(controller.window.document, &quot;todo-status&quot;)).getNode().value;</span>
<a href="#l23.5"></a><span id="l23.5"> </span>
<a href="#l23.6"></a><span id="l23.6">   // completed on</span>
<a href="#l23.7"></a><span id="l23.7">   if (data.completed != undefined &amp;&amp; data.completed.constructor.name == 'Date' &amp;&amp; !isEvent) {</span>
<a href="#l23.8"></a><span id="l23.8">     let completeddate = dateService.FormatDate(&quot;&quot;, dateService.dateFormatShort,</span>
<a href="#l23.9"></a><span id="l23.9">       data.completed.getFullYear(), data.completed.getMonth() + 1,</span>
<a href="#l23.10"></a><span id="l23.10">       data.completed.getDate());</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    if ( currentStatus == &quot;COMPLETED&quot;) {</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    if (currentStatus == &quot;COMPLETED&quot;) {</span>
<a href="#l23.14"></a><span id="l23.14">       if (!mac) {</span>
<a href="#l23.15"></a><span id="l23.15">         controller.keypress(completedDateInput, 'a', {ctrlKey: true});</span>
<a href="#l23.16"></a><span id="l23.16">         controller.type(completedDateInput, completeddate);</span>
<a href="#l23.17"></a><span id="l23.17">       } else {</span>
<a href="#l23.18"></a><span id="l23.18">         completedDateInput.getNode().value = completeddate;</span>
<a href="#l23.19"></a><span id="l23.19">       }</span>
<a href="#l23.20"></a><span id="l23.20">     }</span>
<a href="#l23.21"></a><span id="l23.21">   }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

