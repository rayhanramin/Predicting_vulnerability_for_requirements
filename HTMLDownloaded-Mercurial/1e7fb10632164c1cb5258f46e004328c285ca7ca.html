<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 11755:1e7fb10632164c1cb5258f46e004328c285ca7ca</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 1e7fb10632164c1cb5258f46e004328c285ca7ca" />
<meta property="og:url" content="/comm-central/rev/1e7fb10632164c1cb5258f46e004328c285ca7ca" />
<meta property="og:description" content="Bug 734034 - When deferring an account, automatically defer its junk target folders and those pointing to it. r=IanN, r=mconley, ui-r=bwinton" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 1e7fb10632164c1cb5258f46e004328c285ca7ca 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/1e7fb10632164c1cb5258f46e004328c285ca7ca">shortlog</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/1e7fb10632164c1cb5258f46e004328c285ca7ca">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca">files</a> |
changeset |
<a href="/comm-central/raw-rev/1e7fb10632164c1cb5258f46e004328c285ca7ca">raw</a>  | <a href="/comm-central/archive/1e7fb10632164c1cb5258f46e004328c285ca7ca.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=734034">Bug 734034</a> - When deferring an account, automatically defer its junk target folders and those pointing to it. r=IanN, r=mconley, ui-r=bwinton
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#99;&#101;&#109;&#97;&#110;&#32;&#60;&#97;&#99;&#101;&#108;&#105;&#115;&#116;&#115;&#64;&#97;&#116;&#108;&#97;&#115;&#46;&#115;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 30 Dec 2012 19:35:14 -0500</td></tr>

<tr>
 <td>changeset 11755</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/1e7fb10632164c1cb5258f46e004328c285ca7ca">1e7fb10632164c1cb5258f46e004328c285ca7ca</a></td>
</tr>



<tr>
<td>parent 11754</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/7f228f4d067286fa189a65c44ec2d0ecb03b88d5">7f228f4d067286fa189a65c44ec2d0ecb03b88d5</a>
</td>
</tr>

<tr>
<td>child 11756</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ca7a389c26dc13bc6c24ae5449ee462ce5dcd6a5">ca7a389c26dc13bc6c24ae5449ee462ce5dcd6a5</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=1e7fb10632164c1cb5258f46e004328c285ca7ca">8758</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Mon, 31 Dec 2012 00:34:56 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@5b5991b1bef9 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5b5991b1bef9a1d4652d0a5ba7b47a5b1f59f484">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=5b5991b1bef9a1d4652d0a5ba7b47a5b1f59f484&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5b5991b1bef9a1d4652d0a5ba7b47a5b1f59f484&newProject=comm-central&newRevision=7f228f4d067286fa189a65c44ec2d0ecb03b88d5&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5b5991b1bef9a1d4652d0a5ba7b47a5b1f59f484&newProject=comm-central&newRevision=7f228f4d067286fa189a65c44ec2d0ecb03b88d5&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=5b5991b1bef9a1d4652d0a5ba7b47a5b1f59f484&newProject=comm-central&newRevision=7f228f4d067286fa189a65c44ec2d0ecb03b88d5&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28IanN%29&revcount=50">IanN</a>, <a href="/comm-central/log?rev=reviewer%28mconley%29&revcount=50">mconley</a>, <a href="/comm-central/log?rev=reviewer%28bwinton%29&revcount=50">bwinton</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=734034">734034</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=734034">Bug 734034</a> - When deferring an account, automatically defer its junk target folders and those pointing to it. r=IanN, r=mconley, ui-r=bwinton</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mail/locales/en-US/chrome/messenger/prefs.properties">mail/locales/en-US/chrome/messenger/prefs.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca/mail/locales/en-US/chrome/messenger/prefs.properties">file</a> |
<a href="/comm-central/annotate/1e7fb10632164c1cb5258f46e004328c285ca7ca/mail/locales/en-US/chrome/messenger/prefs.properties">annotate</a> |
<a href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mail/locales/en-US/chrome/messenger/prefs.properties">diff</a> |
<a href="/comm-central/comparison/1e7fb10632164c1cb5258f46e004328c285ca7ca/mail/locales/en-US/chrome/messenger/prefs.properties">comparison</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca/mail/locales/en-US/chrome/messenger/prefs.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-junk.js">mailnews/base/prefs/content/am-junk.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-junk.js">file</a> |
<a href="/comm-central/annotate/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-junk.js">annotate</a> |
<a href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-junk.js">diff</a> |
<a href="/comm-central/comparison/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-junk.js">comparison</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-junk.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server-advanced.js">mailnews/base/prefs/content/am-server-advanced.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server-advanced.js">file</a> |
<a href="/comm-central/annotate/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server-advanced.js">annotate</a> |
<a href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server-advanced.js">diff</a> |
<a href="/comm-central/comparison/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server-advanced.js">comparison</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server-advanced.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server.js">mailnews/base/prefs/content/am-server.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server.js">file</a> |
<a href="/comm-central/annotate/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server.js">annotate</a> |
<a href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server.js">diff</a> |
<a href="/comm-central/comparison/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server.js">comparison</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/am-server.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/amUtils.js">mailnews/base/prefs/content/amUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/amUtils.js">file</a> |
<a href="/comm-central/annotate/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/amUtils.js">annotate</a> |
<a href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/amUtils.js">diff</a> |
<a href="/comm-central/comparison/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/amUtils.js">comparison</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca/mailnews/base/prefs/content/amUtils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/suite/locales/en-US/chrome/mailnews/pref/prefs.properties">suite/locales/en-US/chrome/mailnews/pref/prefs.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/1e7fb10632164c1cb5258f46e004328c285ca7ca/suite/locales/en-US/chrome/mailnews/pref/prefs.properties">file</a> |
<a href="/comm-central/annotate/1e7fb10632164c1cb5258f46e004328c285ca7ca/suite/locales/en-US/chrome/mailnews/pref/prefs.properties">annotate</a> |
<a href="/comm-central/diff/1e7fb10632164c1cb5258f46e004328c285ca7ca/suite/locales/en-US/chrome/mailnews/pref/prefs.properties">diff</a> |
<a href="/comm-central/comparison/1e7fb10632164c1cb5258f46e004328c285ca7ca/suite/locales/en-US/chrome/mailnews/pref/prefs.properties">comparison</a> |
<a href="/comm-central/log/1e7fb10632164c1cb5258f46e004328c285ca7ca/suite/locales/en-US/chrome/mailnews/pref/prefs.properties">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/prefs.properties</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/prefs.properties</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -27,17 +27,18 @@ WizardContinue=Cancel</span>
<a href="#l1.4"></a><span id="l1.4"> enterValidServerName=Please enter a valid server name.</span>
<a href="#l1.5"></a><span id="l1.5"> failedRemoveAccount=Failed to remove this account.</span>
<a href="#l1.6"></a><span id="l1.6"> #LOCALIZATION NOTE: confirmRemoveAccount: %S is the account pretty name</span>
<a href="#l1.7"></a><span id="l1.7"> confirmRemoveAccount=Are you sure you want to remove the account &quot;%S&quot;?</span>
<a href="#l1.8"></a><span id="l1.8"> confirmRemoveAccountTitle=Remove Account</span>
<a href="#l1.9"></a><span id="l1.9"> #LOCALIZATION NOTE: accountName: %1$S is server name, %2$S is user name</span>
<a href="#l1.10"></a><span id="l1.10"> accountName=%1$S - %2$S</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-confirmDeferAccount=If you store this account's new mail in a different account's Inbox, you will no longer be able to access already downloaded e-mail for this account. If you have mail in this account, please copy it to another account first. If you have filters that filter mail into this account, you should disable them or change the destination folder. If any accounts have special folders in this account (Sent, Drafts, Templates), you should change them to be in another account. Do you still want to store this account's e-mail in a different account?</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+# LOCALIZATION NOTE: confirmDeferAccountWarning: do not localize &quot;\n\n&quot;, it means a new empty line in the string.</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+confirmDeferAccountWarning=If you store this account's new mail in a different account's Inbox, you will no longer be able to access already downloaded e-mail for this account. If you have mail in this account, please copy it to another account first.\n\nIf you have filters that filter mail into this account, you should disable them or change the destination folder. If any accounts have special folders in this account (Sent, Drafts, Templates, Archives, Junk), you should change them to be in another account.\n\nDo you still want to store this account's e-mail in a different account?</span>
<a href="#l1.15"></a><span id="l1.15"> confirmDeferAccountTitle=Defer Account?</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17"> directoryAlreadyUsedByOtherAccount=The directory specified in the Local Directory setting is already used by the &quot;%S&quot; account. Please pick a different directory.</span>
<a href="#l1.18"></a><span id="l1.18"> directoryParentUsedByOtherAccount=A parent directory of the directory specified in the Local Directory setting is already used by the &quot;%S&quot; account. Please pick a different directory.</span>
<a href="#l1.19"></a><span id="l1.19"> directoryChildUsedByOtherAccount=A subdirectory of the directory specified in the Local Directory setting is already used by the &quot;%S&quot; account. Please pick a different directory.</span>
<a href="#l1.20"></a><span id="l1.20"> #Provide default example values for sample email address</span>
<a href="#l1.21"></a><span id="l1.21"> exampleEmailUserName=user</span>
<a href="#l1.22"></a><span id="l1.22"> exampleEmailDomain=example.net</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-junk.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-junk.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -5,19 +5,16 @@</span>
<a href="#l2.4"></a><span id="l2.4">  */</span>
<a href="#l2.5"></a><span id="l2.5"> Components.utils.import(&quot;resource:///modules/mailServices.js&quot;);</span>
<a href="#l2.6"></a><span id="l2.6"> Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> let gDeferredToAccount = &quot;&quot;;</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10"> function onInit(aPageId, aServerId)</span>
<a href="#l2.11"></a><span id="l2.11"> {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  const kMoveFolderJunk = 0;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-  const kMoveFolderOther = 1;</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-</span>
<a href="#l2.15"></a><span id="l2.15">   // manually adjust several pref UI elements</span>
<a href="#l2.16"></a><span id="l2.16">   document.getElementById('server.spamLevel.visible').setAttribute(&quot;checked&quot;,</span>
<a href="#l2.17"></a><span id="l2.17">     document.getElementById('server.spamLevel').value &gt; 0);</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">   let deferredToURI = null;</span>
<a href="#l2.20"></a><span id="l2.20">   if (gDeferredToAccount)</span>
<a href="#l2.21"></a><span id="l2.21">     deferredToURI = MailServices.accounts</span>
<a href="#l2.22"></a><span id="l2.22">                                 .getAccount(gDeferredToAccount)</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineat">@@ -26,44 +23,31 @@ function onInit(aPageId, aServerId)</span>
<a href="#l2.24"></a><span id="l2.24">   let spamActionTargetAccountElement =</span>
<a href="#l2.25"></a><span id="l2.25">     document.getElementById(&quot;server.spamActionTargetAccount&quot;);</span>
<a href="#l2.26"></a><span id="l2.26">   let spamActionTargetFolderElement =</span>
<a href="#l2.27"></a><span id="l2.27">     document.getElementById(&quot;server.spamActionTargetFolder&quot;);</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29">   let spamActionTargetAccount = spamActionTargetAccountElement.value;</span>
<a href="#l2.30"></a><span id="l2.30">   let spamActionTargetFolder = spamActionTargetFolderElement.value;</span>
<a href="#l2.31"></a><span id="l2.31"> </span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-  // check if folder targets are valid</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-  spamActionTargetAccount = checkJunkTargetFolder(spamActionTargetAccount, true);</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-  spamActionTargetFolder = checkJunkTargetFolder(spamActionTargetFolder, false);</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-  let moveCheckbox = document.getElementById(&quot;server.moveOnSpam&quot;);</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-  let moveTargetModeValue = document.getElementById(&quot;server.moveTargetMode&quot;).value;</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-  if (!spamActionTargetAccount) {</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-    // spamActionTargetAccount is not valid,</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-    // reset to default behavior to NOT move junk messages...</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineminus">-    if (moveTargetModeValue == kMoveFolderJunk)</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineminus">-      moveCheckbox.setAttribute(&quot;checked&quot;, false);</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+  let moveOnSpamCheckbox = document.getElementById(&quot;server.moveOnSpam&quot;);</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+  let moveOnSpamValue = moveOnSpamCheckbox.checked;</span>
<a href="#l2.46"></a><span id="l2.46"> </span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-    // ... and find a good default target.</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-    spamActionTargetAccount = chooseJunkTargetFolder(deferredToURI || aServerId, true);</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-    spamActionTargetAccountElement.value = spamActionTargetAccount;</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-  }</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+  // Check if there are any invalid junk targets and fix them.</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+  [ spamActionTargetAccount, spamActionTargetFolder, moveOnSpamValue ] =</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+    sanitizeJunkTargets(spamActionTargetAccount,</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+                        spamActionTargetFolder,</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+                        deferredToURI || aServerId,</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+                        document.getElementById(&quot;server.moveTargetMode&quot;).value,</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+                        GetMsgFolderFromUri(aServerId, false).server.spamSettings,</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+                        moveOnSpamValue);</span>
<a href="#l2.59"></a><span id="l2.59"> </span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-  if (!spamActionTargetFolder) {</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-    // spamActionTargetFolder is not valid,</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-    // reset to default behavior to NOT move junk messages...</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-    if (moveTargetModeValue == kMoveFolderOther)</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-      moveCheckbox.setAttribute(&quot;checked&quot;, false);</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-    // ... and find a good default target.</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineminus">-    spamActionTargetFolder = chooseJunkTargetFolder(deferredToURI || aServerId, false);</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-    spamActionTargetFolderElement.value = spamActionTargetFolder;</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-  }</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+  spamActionTargetAccountElement.value = spamActionTargetAccount;</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineplus">+  spamActionTargetFolderElement.value = spamActionTargetFolder;</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+  moveOnSpamCheckbox.checked = moveOnSpamValue;</span>
<a href="#l2.73"></a><span id="l2.73"> </span>
<a href="#l2.74"></a><span id="l2.74">   let server = GetMsgFolderFromUri(spamActionTargetAccount, false);</span>
<a href="#l2.75"></a><span id="l2.75">   document.getElementById(&quot;actionTargetAccount&quot;)</span>
<a href="#l2.76"></a><span id="l2.76">           .setAttribute(&quot;label&quot;, prettyFolderName(server));</span>
<a href="#l2.77"></a><span id="l2.77">   document.getElementById(&quot;actionAccountPopup&quot;).selectFolder(server);</span>
<a href="#l2.78"></a><span id="l2.78"> </span>
<a href="#l2.79"></a><span id="l2.79">   let folder = null;</span>
<a href="#l2.80"></a><span id="l2.80">   try {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-server-advanced.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-server-advanced.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -104,17 +104,17 @@ function onOk()</span>
<a href="#l3.4"></a><span id="l3.4">   {</span>
<a href="#l3.5"></a><span id="l3.5">     var radioGroup = document.getElementById(&quot;folderStorage&quot;);</span>
<a href="#l3.6"></a><span id="l3.6">     var gPrefsBundle = document.getElementById(&quot;bundle_prefs&quot;);</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">     // if this account wasn't deferred, and is now...</span>
<a href="#l3.9"></a><span id="l3.9">     if (radioGroup.value != 1 &amp;&amp; !gFirstDeferredAccount.length)</span>
<a href="#l3.10"></a><span id="l3.10">     {</span>
<a href="#l3.11"></a><span id="l3.11">       var confirmDeferAccount =</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        gPrefsBundle.getString(&quot;confirmDeferAccount&quot;);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+        gPrefsBundle.getString(&quot;confirmDeferAccountWarning&quot;);</span>
<a href="#l3.14"></a><span id="l3.14"> </span>
<a href="#l3.15"></a><span id="l3.15">       var confirmTitle = gPrefsBundle.getString(&quot;confirmDeferAccountTitle&quot;);</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">       if (!Services.prompt.confirm(window, confirmTitle, confirmDeferAccount))</span>
<a href="#l3.18"></a><span id="l3.18">         return false;</span>
<a href="#l3.19"></a><span id="l3.19">     }</span>
<a href="#l3.20"></a><span id="l3.20">     switch (radioGroup.value)</span>
<a href="#l3.21"></a><span id="l3.21">     {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/base/prefs/content/am-server.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/base/prefs/content/am-server.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1,13 +1,14 @@</span>
<a href="#l4.4"></a><span id="l4.4"> /* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l4.5"></a><span id="l4.5">  * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.6"></a><span id="l4.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.7"></a><span id="l4.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9" class="difflineplus">+Components.utils.import(&quot;resource:///modules/iteratorUtils.jsm&quot;);</span>
<a href="#l4.10"></a><span id="l4.10"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12"> var gServer;</span>
<a href="#l4.13"></a><span id="l4.13"> </span>
<a href="#l4.14"></a><span id="l4.14"> function onInit(aPageId, aServerId) </span>
<a href="#l4.15"></a><span id="l4.15"> {</span>
<a href="#l4.16"></a><span id="l4.16">   initServerType();</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18" class="difflineat">@@ -133,19 +134,66 @@ function onAdvanced()</span>
<a href="#l4.19"></a><span id="l4.19">     document.getElementById(&quot;imap.serverDirectory&quot;).setAttribute(&quot;value&quot;, serverSettings.serverDirectory);</span>
<a href="#l4.20"></a><span id="l4.20">     document.getElementById(&quot;imap.otherUsersNamespace&quot;).setAttribute(&quot;value&quot;, serverSettings.otherUsersNamespace);</span>
<a href="#l4.21"></a><span id="l4.21">     document.getElementById(&quot;imap.overrideNamespaces&quot;).checked = serverSettings.overrideNamespaces;</span>
<a href="#l4.22"></a><span id="l4.22">   }</span>
<a href="#l4.23"></a><span id="l4.23">   else if (serverType == &quot;pop3&quot;)</span>
<a href="#l4.24"></a><span id="l4.24">   {</span>
<a href="#l4.25"></a><span id="l4.25">     document.getElementById(&quot;pop3.deferGetNewMail&quot;).checked = serverSettings.deferGetNewMail;</span>
<a href="#l4.26"></a><span id="l4.26">     document.getElementById(&quot;pop3.deferredToAccount&quot;).setAttribute(&quot;value&quot;, serverSettings.deferredToAccount);</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-    var pop3Server = gServer.QueryInterface(Components.interfaces.nsIPop3IncomingServer);</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+    let pop3Server = gServer.QueryInterface(Components.interfaces.nsIPop3IncomingServer);</span>
<a href="#l4.29"></a><span id="l4.29">     // we're explicitly setting this so we'll go through the SetDeferredToAccount method</span>
<a href="#l4.30"></a><span id="l4.30">     pop3Server.deferredToAccount = serverSettings.deferredToAccount;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+    // Setting the server to be deferred causes a rebuild of the account tree,</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+    // losing the current selection. Reselect the current server again as it</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+    // didn't really disappear.</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+    parent.selectServer(parent.getCurrentAccount().incomingServer, parent.currentPageId);</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+    // Iterate over all accounts to see if any of their junk targets are now</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+    // invalid (pointed to the account that is now deferred).</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+    // If any such target is found it is reset to a new safe folder</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+    // (the deferred to account or Local Folders). If junk was really moved</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+    // to that folder (moveOnSpam = true) then moving junk is disabled</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+    // (so that the user notices it and checks the settings).</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+    // This is the same sanitization as in am-junk.js, just applied to all POP accounts.</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+    let deferredURI = serverSettings.deferredToAccount &amp;&amp;</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+                      MailServices.accounts.getAccount(serverSettings.deferredToAccount)</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+                                           .incomingServer.serverURI;</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineplus">+</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineplus">+    for each (let account in fixIterator(MailServices.accounts.accounts,</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+                                         Components.interfaces.nsIMsgAccount)) {</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+      let accountValues = parent.getValueArrayFor(account);</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+      let type = parent.getAccountValue(account, accountValues, &quot;server&quot;, &quot;type&quot;,</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+                                        null, false);</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+      // Try to keep this list of account types not having Junk settings</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+      // synchronized with the list in AccountManager.js.</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+      if (type != &quot;nntp&quot; &amp;&amp; type != &quot;rss&quot; &amp;&amp; type != &quot;im&quot;) {</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+        let spamActionTargetAccount = parent.getAccountValue(account, accountValues,</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+          &quot;server&quot;, &quot;spamActionTargetAccount&quot;, &quot;string&quot;, true);</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+        let spamActionTargetFolder =  parent.getAccountValue(account, accountValues,</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+          &quot;server&quot;, &quot;spamActionTargetFolder&quot;, &quot;string&quot;, true);</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+        let moveOnSpam = parent.getAccountValue(account, accountValues,</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+          &quot;server&quot;, &quot;moveOnSpam&quot;, &quot;bool&quot;, true);</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+        // Check if there are any invalid junk targets and fix them.</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineplus">+        [ spamActionTargetAccount, spamActionTargetFolder, moveOnSpam ] =</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+          sanitizeJunkTargets(spamActionTargetAccount,</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+                              spamActionTargetFolder,</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineplus">+                              deferredURI || account.incomingServer.serverURI,</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineplus">+                              parent.getAccountValue(account, accountValues, &quot;server&quot;, &quot;moveTargetMode&quot;, &quot;int&quot;, true),</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+                              account.incomingServer.spamSettings,</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+                              moveOnSpam);</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+        parent.setAccountValue(accountValues, &quot;server&quot;, &quot;moveOnSpam&quot;, moveOnSpam);</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+        parent.setAccountValue(accountValues, &quot;server&quot;, &quot;spamActionTargetAccount&quot;,</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+                               spamActionTargetAccount);</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+        parent.setAccountValue(accountValues, &quot;server&quot;, &quot;spamActionTargetFolder&quot;,</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+                               spamActionTargetFolder);</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+      }</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+    }</span>
<a href="#l4.78"></a><span id="l4.78">   }</span>
<a href="#l4.79"></a><span id="l4.79"> }</span>
<a href="#l4.80"></a><span id="l4.80"> </span>
<a href="#l4.81"></a><span id="l4.81"> function secureSelect(aLoading)</span>
<a href="#l4.82"></a><span id="l4.82"> {</span>
<a href="#l4.83"></a><span id="l4.83">     var socketType = document.getElementById(&quot;server.socketType&quot;).value;</span>
<a href="#l4.84"></a><span id="l4.84">     var serverType = document.getElementById(&quot;server.type&quot;).value;</span>
<a href="#l4.85"></a><span id="l4.85">     var protocolInfo = Components.classes[&quot;@mozilla.org/messenger/protocol/info;1?type=&quot; + serverType]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/base/prefs/content/amUtils.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/base/prefs/content/amUtils.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -102,16 +102,67 @@ function chooseJunkTargetFolder(aTargetU</span>
<a href="#l5.4"></a><span id="l5.4">   }</span>
<a href="#l5.5"></a><span id="l5.5">   if (!server)</span>
<a href="#l5.6"></a><span id="l5.6">     server = MailServices.accounts.localFoldersServer;</span>
<a href="#l5.7"></a><span id="l5.7"> </span>
<a href="#l5.8"></a><span id="l5.8">   return server.serverURI + (!aIsServer ? &quot;/Junk&quot; : &quot;&quot;);</span>
<a href="#l5.9"></a><span id="l5.9"> }</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> /**</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+ * Fixes junk target folders if they point to an invalid/unusable (e.g. deferred)</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+ * folder/account. Only returns the new safe values. It is up to the caller</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+ * to push them to the proper elements/prefs.</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+ *</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+ * @param aSpamActionTargetAccount  The value of the server.*.spamActionTargetAccount pref value (URI).</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+ * @param aSpamActionTargetFolder   The value of the server.*.spamActionTargetFolder pref value (URI).</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+ * @param aProposedTarget           The URI of a new target to try.</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+ * @param aMoveTargetModeValue      The value of the server.*.moveTargetMode pref value (0/1).</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+ * @param aServerSpamSettings       The nsISpamSettings object of any server</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+ *                                  (used just for the MOVE_TARGET_MODE_* constants).</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+ * @param aMoveOnSpam               The server.*.moveOnSpam pref value (bool).</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+ *</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+ * @return  an array containing:</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+ *          newTargetAccount new safe junk target account</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+ *          newTargetAccount new safe junk target folder</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+ *          newMoveOnSpam    new moveOnSpam value</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+ */</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+function sanitizeJunkTargets(aSpamActionTargetAccount,</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+                             aSpamActionTargetFolder,</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+                             aProposedTarget,</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+                             aMoveTargetModeValue,</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+                             aServerSpamSettings,</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+                             aMoveOnSpam)</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+{</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+  // Check if folder targets are valid.</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+  aSpamActionTargetAccount = checkJunkTargetFolder(aSpamActionTargetAccount, true);</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+  if (!aSpamActionTargetAccount) {</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+    // If aSpamActionTargetAccount is not valid,</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+    // reset to default behavior to NOT move junk messages...</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+    if (aMoveTargetModeValue == aServerSpamSettings.MOVE_TARGET_MODE_ACCOUNT)</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+      aMoveOnSpam = false;</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+    // ... and find a good default target.</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+    aSpamActionTargetAccount = chooseJunkTargetFolder(aProposedTarget, true);</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+  }</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+  aSpamActionTargetFolder = checkJunkTargetFolder(aSpamActionTargetFolder, false);</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+  if (!aSpamActionTargetFolder) {</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+    // If aSpamActionTargetFolder is not valid,</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+    // reset to default behavior to NOT move junk messages...</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+    if (aMoveTargetModeValue == aServerSpamSettings.MOVE_TARGET_MODE_FOLDER)</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+      aMoveOnSpam = false;</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+    // ... and find a good default target.</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+    aSpamActionTargetFolder = chooseJunkTargetFolder(aProposedTarget, false);</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+  }</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+  return [ aSpamActionTargetAccount, aSpamActionTargetFolder, aMoveOnSpam ];</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+}</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+/**</span>
<a href="#l5.63"></a><span id="l5.63">  * Opens Preferences (Options) dialog on the Advanced pane, General tab</span>
<a href="#l5.64"></a><span id="l5.64">  * so that the user sees where the global receipts settings can be found.</span>
<a href="#l5.65"></a><span id="l5.65">  *</span>
<a href="#l5.66"></a><span id="l5.66">  * @param aTBPaneId     Thunderbird pref paneID to open.</span>
<a href="#l5.67"></a><span id="l5.67">  * @param aTBTabId      Thunderbird tabID to open.</span>
<a href="#l5.68"></a><span id="l5.68">  * @param aTBOtherArgs  Other arguments to send to the pref tab.</span>
<a href="#l5.69"></a><span id="l5.69">  * @param aSMPaneId     Seamonkey pref pane to open.</span>
<a href="#l5.70"></a><span id="l5.70">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/suite/locales/en-US/chrome/mailnews/pref/prefs.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/mailnews/pref/prefs.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -28,17 +28,18 @@ WizardContinue=Cancel</span>
<a href="#l6.4"></a><span id="l6.4"> enterValidServerName=Please enter a valid server name.</span>
<a href="#l6.5"></a><span id="l6.5"> failedRemoveAccount=Failed to remove this account.</span>
<a href="#l6.6"></a><span id="l6.6"> #LOCALIZATION NOTE: confirmRemoveAccount: %S is the account pretty name</span>
<a href="#l6.7"></a><span id="l6.7"> confirmRemoveAccount=Are you sure you want to remove the account &quot;%S&quot;?</span>
<a href="#l6.8"></a><span id="l6.8"> confirmRemoveAccountTitle=Remove Account</span>
<a href="#l6.9"></a><span id="l6.9"> #LOCALIZATION NOTE: accountName: %1$S is server name, %2$S is user name</span>
<a href="#l6.10"></a><span id="l6.10"> accountName=%1$S - %2$S</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-confirmDeferAccount=If you store this account's new mail in a different account's Inbox, you will no longer be able to access already downloaded e-mail for this account. If you have mail in this account, please copy it to another account first. If you have filters that filter mail into this account, you should disable them or change the destination folder. If any accounts have special folders in this account (Sent, Drafts, Templates), you should change them to be in another account. Do you still want to store this account's e-mail in a different account?</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+# LOCALIZATION NOTE: confirmDeferAccountWarning: do not localize &quot;\n\n&quot;, it means a new empty line in the string.</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+confirmDeferAccountWarning=If you store this account's new mail in a different account's Inbox, you will no longer be able to access already downloaded e-mail for this account. If you have mail in this account, please copy it to another account first.\n\nIf you have filters that filter mail into this account, you should disable them or change the destination folder. If any accounts have special folders in this account (Sent, Drafts, Templates, Archives, Junk), you should change them to be in another account.\n\nDo you still want to store this account's e-mail in a different account?</span>
<a href="#l6.15"></a><span id="l6.15"> confirmDeferAccountTitle=Defer Account?</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17"> directoryAlreadyUsedByOtherAccount=The directory specified in the Local Directory setting is already used by the &quot;%S&quot; account. Please pick a different directory.</span>
<a href="#l6.18"></a><span id="l6.18"> directoryParentUsedByOtherAccount=A parent directory of the directory specified in the Local Directory setting is already used by the &quot;%S&quot; account. Please pick a different directory.</span>
<a href="#l6.19"></a><span id="l6.19"> directoryChildUsedByOtherAccount=A subdirectory of the directory specified in the Local Directory setting is already used by the &quot;%S&quot; account. Please pick a different directory.</span>
<a href="#l6.20"></a><span id="l6.20"> #Provide default example values for sample email address</span>
<a href="#l6.21"></a><span id="l6.21"> exampleEmailUserName=user</span>
<a href="#l6.22"></a><span id="l6.22"> exampleEmailDomain=example.net</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

