<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 19763:6411f1e060275bc9dee673ac67a9019fbb5c7719</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 6411f1e060275bc9dee673ac67a9019fbb5c7719" />
<meta property="og:url" content="/comm-central/rev/6411f1e060275bc9dee673ac67a9019fbb5c7719" />
<meta property="og:description" content="Bug 914753: Make Emacs file variable header lines correct, or at least consistent. DONTBUILD r=ehsan" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 6411f1e060275bc9dee673ac67a9019fbb5c7719 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/6411f1e060275bc9dee673ac67a9019fbb5c7719">shortlog</a> |
<a href="/comm-central/log/6411f1e060275bc9dee673ac67a9019fbb5c7719">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/6411f1e060275bc9dee673ac67a9019fbb5c7719">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/6411f1e060275bc9dee673ac67a9019fbb5c7719">files</a> |
changeset |
<a href="/comm-central/raw-rev/6411f1e060275bc9dee673ac67a9019fbb5c7719">raw</a>  | <a href="/comm-central/archive/6411f1e060275bc9dee673ac67a9019fbb5c7719.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=914753">Bug 914753</a>: Make Emacs file variable header lines correct, or at least consistent. DONTBUILD r=ehsan
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#105;&#109;&#32;&#66;&#108;&#97;&#110;&#100;&#121;&#32;&#60;&#106;&#105;&#109;&#98;&#64;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 24 Jun 2014 22:12:07 -0700</td></tr>

<tr>
 <td>changeset 19763</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/6411f1e060275bc9dee673ac67a9019fbb5c7719">6411f1e060275bc9dee673ac67a9019fbb5c7719</a></td>
</tr>



<tr>
<td>parent 19762</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3ca9312b8a4407e169a99bd271981c5d95d05885">3ca9312b8a4407e169a99bd271981c5d95d05885</a>
</td>
</tr>

<tr>
<td>child 19764</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1ce50fa00124420cbf510050585695a688ae53c6">1ce50fa00124420cbf510050585695a688ae53c6</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=6411f1e060275bc9dee673ac67a9019fbb5c7719">12112</a></td></tr>
<tr><td>push user</td><td>iann_cvs@blueyonder.co.uk</td></tr>
<tr><td>push date</td><td class="date age">Wed, 27 Jul 2016 00:38:30 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@fa786e755299 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=fa786e755299c9f591f094d38f40349f3382f389">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=fa786e755299c9f591f094d38f40349f3382f389&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fa786e755299c9f591f094d38f40349f3382f389&newProject=comm-central&newRevision=90cfebf9066300eb67e60ecff464b118c723f45e&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fa786e755299c9f591f094d38f40349f3382f389&newProject=comm-central&newRevision=90cfebf9066300eb67e60ecff464b118c723f45e&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=fa786e755299c9f591f094d38f40349f3382f389&newProject=comm-central&newRevision=90cfebf9066300eb67e60ecff464b118c723f45e&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28ehsan%29&revcount=50">ehsan</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=914753">914753</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=914753">Bug 914753</a>: Make Emacs file variable header lines correct, or at least consistent. DONTBUILD r=ehsan

The -*- file variable lines -*- establish per-file settings that Emacs will
pick up. This patch makes the following changes to those lines (and touches
nothing else):

 - Never set the buffer's mode.

   Years ago, Emacs did not have a good JavaScript mode, so it made sense
   to use Java or C++ mode in .js files. However, Emacs has had js-mode for
   years now; it's perfectly serviceable, and is available and enabled by
   default in all major Emacs packagings.

   Selecting a mode in the -*- file variable line -*- is almost always the
   wrong thing to do anyway. It overrides Emacs's default choice, which is
   (now) reasonable; and even worse, it overrides settings the user might
   have made in their '.emacs' file for that file extension. It's only
   useful when there's something specific about that particular file that
   makes a particular mode appropriate.

 - Correctly propagate settings that establish the correct indentation
   level for this file: c-basic-offset and js2-basic-offset should be
   js-indent-level. Whatever value they're given should be preserved;
   different parts of our tree use different indentation styles.

 - We don't use tabs in Mozilla JS code. Always set indent-tabs-mode: nil.
   Remove tab-width: settings, at least in files that don't contain tab
   characters.

 - Remove js2-mode settings that belong in the user's .emacs file, like
   js2-skip-preprocessor-directives.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/console.js">suite/common/console/console.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/console.js">file</a> |
<a href="/comm-central/annotate/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/console.js">annotate</a> |
<a href="/comm-central/diff/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/console.js">diff</a> |
<a href="/comm-central/comparison/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/console.js">comparison</a> |
<a href="/comm-central/log/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/console.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/jsconsole-clhandler.js">suite/common/console/jsconsole-clhandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/jsconsole-clhandler.js">file</a> |
<a href="/comm-central/annotate/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/jsconsole-clhandler.js">annotate</a> |
<a href="/comm-central/diff/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/jsconsole-clhandler.js">diff</a> |
<a href="/comm-central/comparison/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/jsconsole-clhandler.js">comparison</a> |
<a href="/comm-central/log/6411f1e060275bc9dee673ac67a9019fbb5c7719/suite/common/console/jsconsole-clhandler.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/common/console/console.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/common/console/console.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,9 +1,9 @@</span>
<a href="#l1.4"></a><span id="l1.4" class="difflineminus">-// -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l1.5"></a><span id="l1.5" class="difflineplus">+// -*- indent-tabs-mode: nil; js-indent-level: 2 -*-</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.8"></a><span id="l1.8">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.9"></a><span id="l1.9">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l1.12"></a><span id="l1.12"> </span>
<a href="#l1.13"></a><span id="l1.13"> var gConsole, gConsoleBundle, gTextBoxEval, gEvaluator, gCodeToEvaluate;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/common/console/jsconsole-clhandler.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/common/console/jsconsole-clhandler.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,9 +1,9 @@</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineminus">-/* -*- Mode: C++; tab-width: 8; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+/* -*- indent-tabs-mode: nil; js-indent-level: 4 -*- */</span>
<a href="#l2.6"></a><span id="l2.6"> /* vim:sw=4:sr:sta:et:sts: */</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.9"></a><span id="l2.9">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.10"></a><span id="l2.10">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12"> const Cc = Components.classes;</span>
<a href="#l2.13"></a><span id="l2.13"> const Ci = Components.interfaces;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

