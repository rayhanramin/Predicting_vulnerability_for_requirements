<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 15799:694f62f8834a5d4d32d2cb7a2478141d854b7cb3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 694f62f8834a5d4d32d2cb7a2478141d854b7cb3" />
<meta property="og:url" content="/comm-central/rev/694f62f8834a5d4d32d2cb7a2478141d854b7cb3" />
<meta property="og:description" content="Bug 970605 - Use node.remove(), especially instead of node.parentNode.removeChild(node): im. r=florian" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 694f62f8834a5d4d32d2cb7a2478141d854b7cb3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/694f62f8834a5d4d32d2cb7a2478141d854b7cb3">shortlog</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/694f62f8834a5d4d32d2cb7a2478141d854b7cb3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3">files</a> |
changeset |
<a href="/comm-central/raw-rev/694f62f8834a5d4d32d2cb7a2478141d854b7cb3">raw</a>  | <a href="/comm-central/archive/694f62f8834a5d4d32d2cb7a2478141d854b7cb3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=970605">Bug 970605</a> - Use node.remove(), especially instead of node.parentNode.removeChild(node): im. r=florian
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 25 Feb 2014 14:52:37 +0100</td></tr>

<tr>
 <td>changeset 15799</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/694f62f8834a5d4d32d2cb7a2478141d854b7cb3">694f62f8834a5d4d32d2cb7a2478141d854b7cb3</a></td>
</tr>



<tr>
<td>parent 15798</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/0d5a6b079e1a36e07a20eb314410f233d7e3d8e8">0d5a6b079e1a36e07a20eb314410f233d7e3d8e8</a>
</td>
</tr>

<tr>
<td>child 15800</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/875250f407aac2b0d11cfe12425430909069fdec">875250f407aac2b0d11cfe12425430909069fdec</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=694f62f8834a5d4d32d2cb7a2478141d854b7cb3">9896</a></td></tr>
<tr><td>push user</td><td>ryanvm@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 25 Feb 2014 18:36:59 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@44bf03090cf6 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=44bf03090cf6d1b376c78ab9db8cdb0e69eff0d4">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=44bf03090cf6d1b376c78ab9db8cdb0e69eff0d4&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=44bf03090cf6d1b376c78ab9db8cdb0e69eff0d4&newProject=comm-central&newRevision=0d5a6b079e1a36e07a20eb314410f233d7e3d8e8&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=44bf03090cf6d1b376c78ab9db8cdb0e69eff0d4&newProject=comm-central&newRevision=0d5a6b079e1a36e07a20eb314410f233d7e3d8e8&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=44bf03090cf6d1b376c78ab9db8cdb0e69eff0d4&newProject=comm-central&newRevision=0d5a6b079e1a36e07a20eb314410f233d7e3d8e8&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28florian%29&revcount=50">florian</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=970605">970605</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=970605">Bug 970605</a> - Use node.remove(), especially instead of node.parentNode.removeChild(node): im. r=florian</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/content/convbrowser.xml">chat/content/convbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/content/convbrowser.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/content/convbrowser.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/content/convbrowser.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/content/convbrowser.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/content/convbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/modules/imThemes.jsm">chat/modules/imThemes.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/modules/imThemes.jsm">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/modules/imThemes.jsm">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/modules/imThemes.jsm">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/modules/imThemes.jsm">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/chat/modules/imThemes.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accountWizard.js">im/content/accountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accountWizard.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accountWizard.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accountWizard.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accountWizard.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accounts.js">im/content/accounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accounts.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accounts.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accounts.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accounts.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/accounts.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/blist.js">im/content/blist.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/blist.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/blist.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/blist.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/blist.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/blist.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddy.xml">im/content/buddy.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddy.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddy.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddy.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddy.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddy.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddytooltip.xml">im/content/buddytooltip.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddytooltip.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddytooltip.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddytooltip.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddytooltip.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/buddytooltip.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/contact.xml">im/content/contact.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/contact.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/contact.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/contact.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/contact.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/contact.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conv.xml">im/content/conv.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conv.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conv.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conv.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conv.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conv.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conversation.xml">im/content/conversation.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conversation.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conversation.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conversation.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conversation.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/conversation.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/group.xml">im/content/group.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/group.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/group.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/group.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/group.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/group.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/joinchat.js">im/content/joinchat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/joinchat.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/joinchat.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/joinchat.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/joinchat.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/joinchat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/newtab.xml">im/content/newtab.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/newtab.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/newtab.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/newtab.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/newtab.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/newtab.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/nsContextMenu.js">im/content/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/applications.js">im/content/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/messagestyle.js">im/content/preferences/messagestyle.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/messagestyle.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/messagestyle.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/messagestyle.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/messagestyle.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/messagestyle.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/smileys.js">im/content/preferences/smileys.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/smileys.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/smileys.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/smileys.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/smileys.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/preferences/smileys.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/proxies.js">im/content/proxies.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/proxies.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/proxies.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/proxies.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/proxies.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/proxies.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/tabbrowser.xml">im/content/tabbrowser.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/tabbrowser.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/tabbrowser.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/tabbrowser.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/tabbrowser.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/content/tabbrowser.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/modules/ibTagMenu.jsm">im/modules/ibTagMenu.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/modules/ibTagMenu.jsm">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/modules/ibTagMenu.jsm">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/modules/ibTagMenu.jsm">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/modules/ibTagMenu.jsm">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/im/modules/ibTagMenu.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/am-im.js">mail/components/im/content/am-im.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/am-im.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/am-im.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/am-im.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/am-im.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/am-im.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccountWizard.js">mail/components/im/content/imAccountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccountWizard.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccountWizard.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccountWizard.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccountWizard.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccounts.js">mail/components/im/content/imAccounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccounts.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccounts.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccounts.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccounts.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imAccounts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imContextMenu.js">mail/components/im/content/imContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imContextMenu.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imContextMenu.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imContextMenu.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imContextMenu.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imbuddytooltip.xml">mail/components/im/content/imbuddytooltip.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imbuddytooltip.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imbuddytooltip.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imbuddytooltip.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imbuddytooltip.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imbuddytooltip.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imcontact.xml">mail/components/im/content/imcontact.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imcontact.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imcontact.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imcontact.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imcontact.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imcontact.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconv.xml">mail/components/im/content/imconv.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconv.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconv.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconv.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconv.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconv.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconversation.xml">mail/components/im/content/imconversation.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconversation.xml">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconversation.xml">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconversation.xml">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconversation.xml">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/imconversation.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/joinchat.js">mail/components/im/content/joinchat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/joinchat.js">file</a> |
<a href="/comm-central/annotate/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/joinchat.js">annotate</a> |
<a href="/comm-central/diff/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/joinchat.js">diff</a> |
<a href="/comm-central/comparison/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/joinchat.js">comparison</a> |
<a href="/comm-central/log/694f62f8834a5d4d32d2cb7a2478141d854b7cb3/mail/components/im/content/joinchat.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/chat/content/convbrowser.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/chat/content/convbrowser.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -261,17 +261,17 @@</span>
<a href="#l1.4"></a><span id="l1.4">             if (this.mDragDropHandler)</span>
<a href="#l1.5"></a><span id="l1.5">               this.mDragDropHandler.detach();</span>
<a href="#l1.6"></a><span id="l1.6">             this.mDragDropHandler = null;</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8">             this._fastFind = null;</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10">             if (this._autoScrollNeedsCleanup) {</span>
<a href="#l1.11"></a><span id="l1.11">               // we polluted the global scope, so clean it up</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-              this._autoScrollPopup.parentNode.removeChild(this._autoScrollPopup);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+              this._autoScrollPopup.remove();</span>
<a href="#l1.14"></a><span id="l1.14">             }</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">             this.uninitMagicCopy();</span>
<a href="#l1.17"></a><span id="l1.17">           ]]&gt;</span>
<a href="#l1.18"></a><span id="l1.18">         &lt;/body&gt;</span>
<a href="#l1.19"></a><span id="l1.19">       &lt;/method&gt;</span>
<a href="#l1.20"></a><span id="l1.20"> </span>
<a href="#l1.21"></a><span id="l1.21">       &lt;field name=&quot;_autoScrollEnabled&quot;&gt;true&lt;/field&gt;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -585,42 +585,42 @@</span>
<a href="#l1.23"></a><span id="l1.23">             let documentFragment = range.createContextualFragment(ruler.nextMsgHtml);</span>
<a href="#l1.24"></a><span id="l1.24">             for (let root = documentFragment.firstChild; root; root = root.nextSibling)</span>
<a href="#l1.25"></a><span id="l1.25">               root._originalMsg = ruler._originalMsg;</span>
<a href="#l1.26"></a><span id="l1.26">             moveToParent.insertBefore(documentFragment, moveTo);</span>
<a href="#l1.27"></a><span id="l1.27"> </span>
<a href="#l1.28"></a><span id="l1.28">             // If this added an insert node, insert the next messages there.</span>
<a href="#l1.29"></a><span id="l1.29">             let insert = doc.getElementById(&quot;insert&quot;);</span>
<a href="#l1.30"></a><span id="l1.30">             if (insert) {</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-              moveToParent.removeChild(moveTo);</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+              moveTo.remove();</span>
<a href="#l1.33"></a><span id="l1.33">               moveTo = insert;</span>
<a href="#l1.34"></a><span id="l1.34">               moveToParent = moveTo.parentNode;</span>
<a href="#l1.35"></a><span id="l1.35">             }</span>
<a href="#l1.36"></a><span id="l1.36"> </span>
<a href="#l1.37"></a><span id="l1.37">             // Move remaining messages from the message block following the ruler.</span>
<a href="#l1.38"></a><span id="l1.38">             let nextMessagesStart = doc.getElementById(&quot;next-messages-start&quot;);</span>
<a href="#l1.39"></a><span id="l1.39">             if (nextMessagesStart) {</span>
<a href="#l1.40"></a><span id="l1.40">               range = doc.createRange();</span>
<a href="#l1.41"></a><span id="l1.41">               range.setStartAfter(nextMessagesStart);</span>
<a href="#l1.42"></a><span id="l1.42">               range.setEndBefore(doc.getElementById(&quot;next-messages-end&quot;));</span>
<a href="#l1.43"></a><span id="l1.43">               moveToParent.insertBefore(range.extractContents(), moveTo);</span>
<a href="#l1.44"></a><span id="l1.44">             }</span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">-            moveToParent.removeChild(moveTo);</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineplus">+            moveTo.remove();</span>
<a href="#l1.47"></a><span id="l1.47"> </span>
<a href="#l1.48"></a><span id="l1.48">             // Restore existing insert node.</span>
<a href="#l1.49"></a><span id="l1.49">             if (actualInsert)</span>
<a href="#l1.50"></a><span id="l1.50">               actualInsert.id = &quot;insert&quot;;</span>
<a href="#l1.51"></a><span id="l1.51"> </span>
<a href="#l1.52"></a><span id="l1.52">             // Delete surplus message block.</span>
<a href="#l1.53"></a><span id="l1.53">             range = doc.createRange();</span>
<a href="#l1.54"></a><span id="l1.54">             range.setStartAfter(ruler);</span>
<a href="#l1.55"></a><span id="l1.55">             range.setEndAfter(doc.getElementById(&quot;end-of-split-block&quot;));</span>
<a href="#l1.56"></a><span id="l1.56">             range.deleteContents();</span>
<a href="#l1.57"></a><span id="l1.57">           }</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineminus">-          ruler.parentNode.removeChild(ruler);</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineplus">+          ruler.remove();</span>
<a href="#l1.60"></a><span id="l1.60">         ]]&gt;</span>
<a href="#l1.61"></a><span id="l1.61">         &lt;/body&gt;</span>
<a href="#l1.62"></a><span id="l1.62">       &lt;/method&gt;</span>
<a href="#l1.63"></a><span id="l1.63"> </span>
<a href="#l1.64"></a><span id="l1.64">       &lt;method name=&quot;_getSections&quot;&gt;</span>
<a href="#l1.65"></a><span id="l1.65">         &lt;body&gt;</span>
<a href="#l1.66"></a><span id="l1.66">         &lt;![CDATA[</span>
<a href="#l1.67"></a><span id="l1.67">           // If a section is displayed below this point, we assume not enough of</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/chat/modules/imThemes.jsm</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/chat/modules/imThemes.jsm</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -510,17 +510,17 @@ function getHTMLForMessage(aMsg, aTheme,</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5">   return replaceKeywordsInHTML(html, replacements, aMsg);</span>
<a href="#l2.6"></a><span id="l2.6"> }</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8"> function insertHTMLForMessage(aMsg, aHTML, aDoc, aIsNext)</span>
<a href="#l2.9"></a><span id="l2.9"> {</span>
<a href="#l2.10"></a><span id="l2.10">   let insert = aDoc.getElementById(&quot;insert&quot;);</span>
<a href="#l2.11"></a><span id="l2.11">   if (insert &amp;&amp; !aIsNext) {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    insert.parentNode.removeChild(insert);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    insert.remove();</span>
<a href="#l2.14"></a><span id="l2.14">     insert = null;</span>
<a href="#l2.15"></a><span id="l2.15">   }</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">   let range = aDoc.createRange();</span>
<a href="#l2.18"></a><span id="l2.18">   let parent = insert ? insert.parentNode : aDoc.getElementById(&quot;Chat&quot;);</span>
<a href="#l2.19"></a><span id="l2.19">   range.selectNode(parent);</span>
<a href="#l2.20"></a><span id="l2.20">   let documentFragment = range.createContextualFragment(aHTML);</span>
<a href="#l2.21"></a><span id="l2.21">   let result = documentFragment.firstChild;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/im/content/accountWizard.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/im/content/accountWizard.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -126,18 +126,18 @@ var accountWizard = {</span>
<a href="#l3.4"></a><span id="l3.4">       usernameInfo =</span>
<a href="#l3.5"></a><span id="l3.5">         bundle.getFormattedString(&quot;accountUsernameInfo&quot;, [this.proto.name]);</span>
<a href="#l3.6"></a><span id="l3.6">     }</span>
<a href="#l3.7"></a><span id="l3.7">     document.getElementById(&quot;usernameInfo&quot;).textContent = usernameInfo;</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9">     let vbox = document.getElementById(&quot;userNameBox&quot;);</span>
<a href="#l3.10"></a><span id="l3.10">     // remove anything that may be there for another protocol</span>
<a href="#l3.11"></a><span id="l3.11">     let child;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    while ((child = vbox.firstChild))</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-      vbox.removeChild(child);</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+    while (vbox.hasChildNodes())</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+      vbox.lastChild.remove();</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">     let splits = [];</span>
<a href="#l3.18"></a><span id="l3.18">     for (let split in this.getProtoUserSplits())</span>
<a href="#l3.19"></a><span id="l3.19">       splits.push(split);</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21">     let label = bundle.getString(&quot;accountUsername&quot;);</span>
<a href="#l3.22"></a><span id="l3.22">     this.userNameBoxes = [this.insertUsernameField(&quot;name&quot;, label, vbox)];</span>
<a href="#l3.23"></a><span id="l3.23">     this.userNameBoxes[0].emptyText = emptyText;</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineat">@@ -273,18 +273,18 @@ var accountWizard = {</span>
<a href="#l3.25"></a><span id="l3.25">     vbox.appendChild(menulist);</span>
<a href="#l3.26"></a><span id="l3.26">     return vbox;</span>
<a href="#l3.27"></a><span id="l3.27">   },</span>
<a href="#l3.28"></a><span id="l3.28"> </span>
<a href="#l3.29"></a><span id="l3.29">   populateProtoSpecificBox: function aw_populate() {</span>
<a href="#l3.30"></a><span id="l3.30">     let id = this.proto.id;</span>
<a href="#l3.31"></a><span id="l3.31">     let rows = document.getElementById(&quot;protoSpecific&quot;);</span>
<a href="#l3.32"></a><span id="l3.32">     let child;</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-    while ((child = rows.firstChild))</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-      rows.removeChild(child);</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+    while (rows.hasChildNodes())</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+      rows.lastChild.remove();</span>
<a href="#l3.37"></a><span id="l3.37">     let visible = false;</span>
<a href="#l3.38"></a><span id="l3.38">     for (let opt in this.getProtoOptions()) {</span>
<a href="#l3.39"></a><span id="l3.39">       let text = opt.label;</span>
<a href="#l3.40"></a><span id="l3.40">       let name = id + &quot;-&quot; + opt.name;</span>
<a href="#l3.41"></a><span id="l3.41">       switch (opt.type) {</span>
<a href="#l3.42"></a><span id="l3.42">       case opt.typeBool:</span>
<a href="#l3.43"></a><span id="l3.43">         let chk = document.createElement(&quot;checkbox&quot;);</span>
<a href="#l3.44"></a><span id="l3.44">         chk.setAttribute(&quot;label&quot;, text);</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineat">@@ -338,18 +338,18 @@ var accountWizard = {</span>
<a href="#l3.46"></a><span id="l3.46"> </span>
<a href="#l3.47"></a><span id="l3.47">     return row;</span>
<a href="#l3.48"></a><span id="l3.48">   },</span>
<a href="#l3.49"></a><span id="l3.49"> </span>
<a href="#l3.50"></a><span id="l3.50">   showSummary: function aw_showSummary() {</span>
<a href="#l3.51"></a><span id="l3.51">     let rows = document.getElementById(&quot;summaryRows&quot;);</span>
<a href="#l3.52"></a><span id="l3.52">     let bundle = document.getElementById(&quot;accountsBundle&quot;);</span>
<a href="#l3.53"></a><span id="l3.53">     let child;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-    while ((child = rows.firstChild))</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineminus">-      rows.removeChild(child);</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+    while (rows.hasChildNodes())</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+      rows.lastChild.remove();</span>
<a href="#l3.58"></a><span id="l3.58"> </span>
<a href="#l3.59"></a><span id="l3.59">     let label = bundle.getString(&quot;accountProtocol&quot;);</span>
<a href="#l3.60"></a><span id="l3.60">     rows.appendChild(this.createSummaryRow(label, this.proto.name));</span>
<a href="#l3.61"></a><span id="l3.61">     this.username = this.getUsername();</span>
<a href="#l3.62"></a><span id="l3.62">     label = bundle.getString(&quot;accountUsername&quot;);</span>
<a href="#l3.63"></a><span id="l3.63">     rows.appendChild(this.createSummaryRow(label, this.username));</span>
<a href="#l3.64"></a><span id="l3.64">     if (!this.proto.noPassword) {</span>
<a href="#l3.65"></a><span id="l3.65">       this.password = this.getValue(&quot;password&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/im/content/accounts.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/im/content/accounts.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -133,26 +133,26 @@ var gAccountManager = {</span>
<a href="#l4.4"></a><span id="l4.4">       elt.build(aObject);</span>
<a href="#l4.5"></a><span id="l4.5">       if (this.accountList.getRowCount() == 1)</span>
<a href="#l4.6"></a><span id="l4.6">         this.accountList.selectedIndex = 0;</span>
<a href="#l4.7"></a><span id="l4.7">     }</span>
<a href="#l4.8"></a><span id="l4.8">     else if (aTopic == &quot;account-removed&quot;) {</span>
<a href="#l4.9"></a><span id="l4.9">       var elt = document.getElementById(aObject.id);</span>
<a href="#l4.10"></a><span id="l4.10">       elt.destroy();</span>
<a href="#l4.11"></a><span id="l4.11">       if (!elt.selected) {</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-        this.accountList.removeChild(elt);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+        elt.remove();</span>
<a href="#l4.14"></a><span id="l4.14">         return;</span>
<a href="#l4.15"></a><span id="l4.15">       }</span>
<a href="#l4.16"></a><span id="l4.16">       // The currently selected element is removed,</span>
<a href="#l4.17"></a><span id="l4.17">       // ensure another element gets selected (if the list is not empty)</span>
<a href="#l4.18"></a><span id="l4.18">       var selectedIndex = this.accountList.selectedIndex;</span>
<a href="#l4.19"></a><span id="l4.19">       // Prevent errors if the timer is active and the account deleted</span>
<a href="#l4.20"></a><span id="l4.20">       clearTimeout(this.disableTimerID);</span>
<a href="#l4.21"></a><span id="l4.21">       this.disableTimerID = 0;</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-      this.accountList.removeChild(elt);</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+      elt.remove();</span>
<a href="#l4.24"></a><span id="l4.24">       var count = this.accountList.getRowCount();</span>
<a href="#l4.25"></a><span id="l4.25">       if (!count) {</span>
<a href="#l4.26"></a><span id="l4.26">         document.getElementById(&quot;accountsDesk&quot;).selectedIndex = 0;</span>
<a href="#l4.27"></a><span id="l4.27">         return;</span>
<a href="#l4.28"></a><span id="l4.28">       }</span>
<a href="#l4.29"></a><span id="l4.29">       if (selectedIndex == count)</span>
<a href="#l4.30"></a><span id="l4.30">         --selectedIndex;</span>
<a href="#l4.31"></a><span id="l4.31">       this.accountList.selectedIndex = selectedIndex;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/im/content/blist.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/im/content/blist.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -184,17 +184,17 @@ buddyListContextMenu.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">   },</span>
<a href="#l5.5"></a><span id="l5.5">   visibleTagsPopupShowing: function blcm_visibleTagsPopupShowing() {</span>
<a href="#l5.6"></a><span id="l5.6">     if (this.onBuddy || this.onContact || this.onConv)</span>
<a href="#l5.7"></a><span id="l5.7">       return;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">     let popup = document.getElementById(&quot;context-visible-tags-popup&quot;);</span>
<a href="#l5.10"></a><span id="l5.10">     let item;</span>
<a href="#l5.11"></a><span id="l5.11">     while ((item = popup.firstChild) &amp;&amp; item.localName != &quot;menuseparator&quot;)</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      popup.removeChild(item);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+      item.remove();</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15">     Services.tags.getTags()</span>
<a href="#l5.16"></a><span id="l5.16">             .forEach(function (aTag) {</span>
<a href="#l5.17"></a><span id="l5.17">       item = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l5.18"></a><span id="l5.18">       item.setAttribute(&quot;label&quot;, aTag.name);</span>
<a href="#l5.19"></a><span id="l5.19">       item.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l5.20"></a><span id="l5.20">       let id = aTag.id;</span>
<a href="#l5.21"></a><span id="l5.21">       item.groupId = id;</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineat">@@ -712,17 +712,17 @@ var buddyList = {</span>
<a href="#l5.23"></a><span id="l5.23">               .setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l5.24"></a><span id="l5.24">     }</span>
<a href="#l5.25"></a><span id="l5.25"> </span>
<a href="#l5.26"></a><span id="l5.26">     let blistBox = document.getElementById(&quot;buddylistbox&quot;);</span>
<a href="#l5.27"></a><span id="l5.27">     blistBox.removeGroup = function(aGroupElt) {</span>
<a href="#l5.28"></a><span id="l5.28">       let index = buddyList._displayedGroups.indexOf(aGroupElt);</span>
<a href="#l5.29"></a><span id="l5.29">       if (index != -1)</span>
<a href="#l5.30"></a><span id="l5.30">         buddyList._displayedGroups.splice(index, 1);</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-      this.removeChild(aGroupElt);</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+      aGroupElt.remove();</span>
<a href="#l5.33"></a><span id="l5.33">     };</span>
<a href="#l5.34"></a><span id="l5.34">     let showOtherContacts = false;</span>
<a href="#l5.35"></a><span id="l5.35">     Services.tags.getTags().forEach(function (aTag) {</span>
<a href="#l5.36"></a><span id="l5.36">       if (Services.tags.isTagHidden(aTag))</span>
<a href="#l5.37"></a><span id="l5.37">         showOtherContacts = true;</span>
<a href="#l5.38"></a><span id="l5.38">       else</span>
<a href="#l5.39"></a><span id="l5.39">         buddyList.displayGroup(aTag);</span>
<a href="#l5.40"></a><span id="l5.40">     });</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineat">@@ -786,17 +786,17 @@ var buddyList = {</span>
<a href="#l5.42"></a><span id="l5.42">       else</span>
<a href="#l5.43"></a><span id="l5.43">         ref = this._displayedGroups[index];</span>
<a href="#l5.44"></a><span id="l5.44">     }</span>
<a href="#l5.45"></a><span id="l5.45">     blistBox.insertBefore(groupElt, ref);</span>
<a href="#l5.46"></a><span id="l5.46"> </span>
<a href="#l5.47"></a><span id="l5.47">     if (this._showOffline)</span>
<a href="#l5.48"></a><span id="l5.48">       groupElt._showOffline = true;</span>
<a href="#l5.49"></a><span id="l5.49">     if (!groupElt.build(aTag))</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-      blistBox.removeChild(groupElt);</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+      groupElt.remove();</span>
<a href="#l5.52"></a><span id="l5.52">     else if (index !== undefined)</span>
<a href="#l5.53"></a><span id="l5.53">       this._displayedGroups.splice(index, 0, groupElt);</span>
<a href="#l5.54"></a><span id="l5.54">   },</span>
<a href="#l5.55"></a><span id="l5.55">   _showOtherContactsRequested: false,</span>
<a href="#l5.56"></a><span id="l5.56">   showOtherContacts: function bl_showOtherContacts() {</span>
<a href="#l5.57"></a><span id="l5.57">     if (this._showOtherContactsRequested)</span>
<a href="#l5.58"></a><span id="l5.58">       return;</span>
<a href="#l5.59"></a><span id="l5.59">     this._showOtherContactsRequested = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/im/content/buddy.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/im/content/buddy.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -101,32 +101,32 @@</span>
<a href="#l6.4"></a><span id="l6.4">       &lt;body&gt;</span>
<a href="#l6.5"></a><span id="l6.5">       &lt;![CDATA[</span>
<a href="#l6.6"></a><span id="l6.6">         let state = this.state;</span>
<a href="#l6.7"></a><span id="l6.7">         if (state == &quot;showing&quot;) {</span>
<a href="#l6.8"></a><span id="l6.8">           this.update();</span>
<a href="#l6.9"></a><span id="l6.9">           this.state = &quot;visible&quot;;</span>
<a href="#l6.10"></a><span id="l6.10">         }</span>
<a href="#l6.11"></a><span id="l6.11">         else if (state == &quot;collapsing&quot;)</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-          this.parentNode.removeChild(this);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+          this.remove();</span>
<a href="#l6.14"></a><span id="l6.14">       ]]&gt;</span>
<a href="#l6.15"></a><span id="l6.15">       &lt;/body&gt;</span>
<a href="#l6.16"></a><span id="l6.16">      &lt;/method&gt;</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18">      &lt;method name=&quot;removeNode&quot;&gt;</span>
<a href="#l6.19"></a><span id="l6.19">       &lt;body&gt;</span>
<a href="#l6.20"></a><span id="l6.20">       &lt;![CDATA[</span>
<a href="#l6.21"></a><span id="l6.21">         if (!(&quot;buddy&quot; in this))</span>
<a href="#l6.22"></a><span id="l6.22">           return;</span>
<a href="#l6.23"></a><span id="l6.23">         this.buddy.removeObserver(this);</span>
<a href="#l6.24"></a><span id="l6.24">         delete this.buddy;</span>
<a href="#l6.25"></a><span id="l6.25">         if (this.state == &quot;visible&quot;) // FIXME check the heigh instead</span>
<a href="#l6.26"></a><span id="l6.26">           this.state = &quot;collapsing&quot;;</span>
<a href="#l6.27"></a><span id="l6.27">         else</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-          this.parentNode.removeChild(this);</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+          this.remove();</span>
<a href="#l6.30"></a><span id="l6.30">       ]]&gt;</span>
<a href="#l6.31"></a><span id="l6.31">       &lt;/body&gt;</span>
<a href="#l6.32"></a><span id="l6.32">      &lt;/method&gt;</span>
<a href="#l6.33"></a><span id="l6.33"> </span>
<a href="#l6.34"></a><span id="l6.34">      &lt;method name=&quot;remove&quot;&gt;</span>
<a href="#l6.35"></a><span id="l6.35">       &lt;body&gt;</span>
<a href="#l6.36"></a><span id="l6.36">       &lt;![CDATA[</span>
<a href="#l6.37"></a><span id="l6.37">         this.buddy.remove();</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineat">@@ -266,15 +266,15 @@</span>
<a href="#l6.39"></a><span id="l6.39">       &lt;xul:image class=&quot;dummyBuddyIcon&quot;/&gt;</span>
<a href="#l6.40"></a><span id="l6.40">       &lt;xul:label crop=&quot;end&quot; flex=&quot;1&quot; class=&quot;buddyDisplayName dummyBuddyLabel&quot;</span>
<a href="#l6.41"></a><span id="l6.41">                  value=&quot;&amp;contactDropTarget2;&quot; tooltiptext=&quot;&amp;contactDropTarget2;&quot;/&gt;</span>
<a href="#l6.42"></a><span id="l6.42">     &lt;/content&gt;</span>
<a href="#l6.43"></a><span id="l6.43">     &lt;implementation&gt;</span>
<a href="#l6.44"></a><span id="l6.44">      &lt;method name=&quot;removeNode&quot;&gt;</span>
<a href="#l6.45"></a><span id="l6.45">       &lt;body&gt;</span>
<a href="#l6.46"></a><span id="l6.46">       &lt;![CDATA[</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-        this.parentNode.removeChild(this);</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+        this.remove();</span>
<a href="#l6.49"></a><span id="l6.49">       ]]&gt;</span>
<a href="#l6.50"></a><span id="l6.50">       &lt;/body&gt;</span>
<a href="#l6.51"></a><span id="l6.51">      &lt;/method&gt;</span>
<a href="#l6.52"></a><span id="l6.52">     &lt;/implementation&gt;</span>
<a href="#l6.53"></a><span id="l6.53">   &lt;/binding&gt;</span>
<a href="#l6.54"></a><span id="l6.54"> &lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/im/content/buddytooltip.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/im/content/buddytooltip.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -138,19 +138,18 @@</span>
<a href="#l7.4"></a><span id="l7.4">          msg.textContent = aMessage;</span>
<a href="#l7.5"></a><span id="l7.5">        ]]&gt;</span>
<a href="#l7.6"></a><span id="l7.6">        &lt;/body&gt;</span>
<a href="#l7.7"></a><span id="l7.7">      &lt;/method&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9">      &lt;method name=&quot;reset&quot;&gt;</span>
<a href="#l7.10"></a><span id="l7.10">        &lt;body&gt;</span>
<a href="#l7.11"></a><span id="l7.11">        &lt;![CDATA[</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-         var row;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-         while ((row = this.rows.firstChild))</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-           this.rows.removeChild(row);</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+         while (this.rows.hasChildNodes())</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+           this.rows.lastChild.remove();</span>
<a href="#l7.17"></a><span id="l7.17">        ]]&gt;</span>
<a href="#l7.18"></a><span id="l7.18">        &lt;/body&gt;</span>
<a href="#l7.19"></a><span id="l7.19">      &lt;/method&gt;</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21">      &lt;method name=&quot;addRow&quot;&gt;</span>
<a href="#l7.22"></a><span id="l7.22">        &lt;parameter name=&quot;aLabel&quot;/&gt;</span>
<a href="#l7.23"></a><span id="l7.23">        &lt;parameter name=&quot;aValue&quot;/&gt;</span>
<a href="#l7.24"></a><span id="l7.24">        &lt;body&gt;</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineat">@@ -452,19 +451,18 @@</span>
<a href="#l7.26"></a><span id="l7.26">        this.removeAttribute(&quot;left&quot;);</span>
<a href="#l7.27"></a><span id="l7.27">        if (&quot;observedUserInfo&quot; in this &amp;&amp; this.observedUserInfo) {</span>
<a href="#l7.28"></a><span id="l7.28">          Services.obs.removeObserver(this, &quot;user-info-received&quot;);</span>
<a href="#l7.29"></a><span id="l7.29">          delete this.observedUserInfo;</span>
<a href="#l7.30"></a><span id="l7.30">        }</span>
<a href="#l7.31"></a><span id="l7.31"> </span>
<a href="#l7.32"></a><span id="l7.32">        let buddies = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;,</span>
<a href="#l7.33"></a><span id="l7.33">                                                              &quot;buddies&quot;);</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-       let buddy;</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-       while ((buddy = buddies.firstChild))</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-         buddies.removeChild(buddy);</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+       while (buddies.hasChildNodes())</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+         buddies.lastChild.remove();</span>
<a href="#l7.39"></a><span id="l7.39"> </span>
<a href="#l7.40"></a><span id="l7.40">        // Since Mozilla 22, tooltips don't seem to shrink automatically after</span>
<a href="#l7.41"></a><span id="l7.41">        // being shown once at a large size. Not sure if it's temporary or not.</span>
<a href="#l7.42"></a><span id="l7.42">        this.removeAttribute(&quot;width&quot;);</span>
<a href="#l7.43"></a><span id="l7.43">        this.removeAttribute(&quot;height&quot;);</span>
<a href="#l7.44"></a><span id="l7.44">        ]]&gt;</span>
<a href="#l7.45"></a><span id="l7.45">      &lt;/handler&gt;</span>
<a href="#l7.46"></a><span id="l7.46">     &lt;/handlers&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/im/content/contact.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/im/content/contact.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -101,17 +101,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">                onget=&quot;return !!this.getAttribute('collapsed');&quot;&gt;</span>
<a href="#l8.5"></a><span id="l8.5">        &lt;setter&gt;</span>
<a href="#l8.6"></a><span id="l8.6">          &lt;![CDATA[</span>
<a href="#l8.7"></a><span id="l8.7">            if (val) {</span>
<a href="#l8.8"></a><span id="l8.8">              let state = this.state;</span>
<a href="#l8.9"></a><span id="l8.9">              if (state == &quot;fading&quot; || state == &quot;collapsing&quot;) {</span>
<a href="#l8.10"></a><span id="l8.10">                if (state == &quot;fading&quot;)</span>
<a href="#l8.11"></a><span id="l8.11">                  this.destroy();</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-               this.parentNode.removeChild(this);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+               this.remove();</span>
<a href="#l8.14"></a><span id="l8.14">                return;</span>
<a href="#l8.15"></a><span id="l8.15">              }</span>
<a href="#l8.16"></a><span id="l8.16">              this.setAttribute(&quot;collapsed&quot;, val);</span>
<a href="#l8.17"></a><span id="l8.17">              this.state = &quot;collapsed&quot;;</span>
<a href="#l8.18"></a><span id="l8.18">            }</span>
<a href="#l8.19"></a><span id="l8.19">            else {</span>
<a href="#l8.20"></a><span id="l8.20">              this.removeAttribute(&quot;collapsed&quot;);</span>
<a href="#l8.21"></a><span id="l8.21">              this.state = &quot;visible&quot;;</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -184,17 +184,17 @@</span>
<a href="#l8.23"></a><span id="l8.23">                   this.childNodes.length == 2) {</span>
<a href="#l8.24"></a><span id="l8.24">            let buddyElt = document.createElement(&quot;buddy&quot;);</span>
<a href="#l8.25"></a><span id="l8.25">            buddyElt.setAttribute(&quot;dummy&quot;, &quot;true&quot;);</span>
<a href="#l8.26"></a><span id="l8.26">            this.appendChild(buddyElt);</span>
<a href="#l8.27"></a><span id="l8.27">          }</span>
<a href="#l8.28"></a><span id="l8.28">          else if (aTopic == &quot;buddy-moved-into-contact&quot; &amp;&amp; this.hasAttribute(&quot;open&quot;)) {</span>
<a href="#l8.29"></a><span id="l8.29">            let buddyElt = document.createElement(&quot;buddy&quot;);</span>
<a href="#l8.30"></a><span id="l8.30">            if (this.childNodes.length &gt; 1 &amp;&amp; this.childNodes[1].hasAttribute(&quot;dummy&quot;))</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-             this.removeChild(this.childNodes[1]);</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+             this.childNodes[1].remove();</span>
<a href="#l8.33"></a><span id="l8.33">            this.appendChild(buddyElt);</span>
<a href="#l8.34"></a><span id="l8.34">            buddyElt.build(aSubject, this);</span>
<a href="#l8.35"></a><span id="l8.35">          }</span>
<a href="#l8.36"></a><span id="l8.36">          else if (aTopic == &quot;buddy-position-changed&quot; &amp;&amp; this.hasAttribute(&quot;open&quot;)) {</span>
<a href="#l8.37"></a><span id="l8.37">            let id = aSubject.id;</span>
<a href="#l8.38"></a><span id="l8.38">            for (let i = 0; i &lt; this.childNodes.length; ++i) {</span>
<a href="#l8.39"></a><span id="l8.39">              if (this.childNodes[i].buddy.id == id) {</span>
<a href="#l8.40"></a><span id="l8.40">                this.childNodes[i].removeNode();</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineat">@@ -257,17 +257,17 @@</span>
<a href="#l8.42"></a><span id="l8.42">           this.state = &quot;collapsing&quot;;</span>
<a href="#l8.43"></a><span id="l8.43">           this.destroy();</span>
<a href="#l8.44"></a><span id="l8.44">         }</span>
<a href="#l8.45"></a><span id="l8.45">         else if (state == &quot;collapsing&quot;) {</span>
<a href="#l8.46"></a><span id="l8.46">           // Ignore events of 'fading' transitions if the timer's already fired.</span>
<a href="#l8.47"></a><span id="l8.47">           if (aEvent &amp;&amp; (&quot;propertyName&quot; in aEvent) &amp;&amp;</span>
<a href="#l8.48"></a><span id="l8.48">               aEvent.propertyName != &quot;height&quot;)</span>
<a href="#l8.49"></a><span id="l8.49">             return;</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-          this.parentNode.removeChild(this);</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+          this.remove();</span>
<a href="#l8.52"></a><span id="l8.52">         }</span>
<a href="#l8.53"></a><span id="l8.53">       ]]&gt;</span>
<a href="#l8.54"></a><span id="l8.54">       &lt;/body&gt;</span>
<a href="#l8.55"></a><span id="l8.55">      &lt;/method&gt;</span>
<a href="#l8.56"></a><span id="l8.56"> </span>
<a href="#l8.57"></a><span id="l8.57">      &lt;method name=&quot;destroy&quot;&gt;</span>
<a href="#l8.58"></a><span id="l8.58">       &lt;body&gt;</span>
<a href="#l8.59"></a><span id="l8.59">       &lt;![CDATA[</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineat">@@ -283,17 +283,17 @@</span>
<a href="#l8.61"></a><span id="l8.61">       &lt;body&gt;</span>
<a href="#l8.62"></a><span id="l8.62">       &lt;![CDATA[</span>
<a href="#l8.63"></a><span id="l8.63">         let state = this.state;</span>
<a href="#l8.64"></a><span id="l8.64">         if (this.hasAttribute(&quot;collapsed&quot;) ||</span>
<a href="#l8.65"></a><span id="l8.65">             window.getComputedStyle(this).height == &quot;0px&quot;) {</span>
<a href="#l8.66"></a><span id="l8.66">           // If the contact is not visible, remove it immediately (without animation)</span>
<a href="#l8.67"></a><span id="l8.67">           this.destroy();</span>
<a href="#l8.68"></a><span id="l8.68">           this.state = &quot;collapsed&quot;; // will remove pending animation timers.</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineminus">-          this.parentNode.removeChild(this);</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+          this.remove();</span>
<a href="#l8.71"></a><span id="l8.71">         }</span>
<a href="#l8.72"></a><span id="l8.72">         else if (state == &quot;showing&quot; || aNoFading) {</span>
<a href="#l8.73"></a><span id="l8.73">           // We are still doing the expand animation, or we don't want</span>
<a href="#l8.74"></a><span id="l8.74">           // the fading animation because we aren't actually removing the</span>
<a href="#l8.75"></a><span id="l8.75">           // contact, but only reordering contacts within the group.</span>
<a href="#l8.76"></a><span id="l8.76">           this.state = &quot;collapsing&quot;;</span>
<a href="#l8.77"></a><span id="l8.77">           this.destroy();</span>
<a href="#l8.78"></a><span id="l8.78">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/im/content/conv.xml</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/im/content/conv.xml</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -121,17 +121,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">       &lt;/body&gt;</span>
<a href="#l9.5"></a><span id="l9.5">      &lt;/method&gt;</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">      &lt;method name=&quot;removeNode&quot;&gt;</span>
<a href="#l9.8"></a><span id="l9.8">       &lt;body&gt;</span>
<a href="#l9.9"></a><span id="l9.9">       &lt;![CDATA[</span>
<a href="#l9.10"></a><span id="l9.10">         this.conv.removeObserver(this);</span>
<a href="#l9.11"></a><span id="l9.11">         delete this.parentNode.listedConvs[this.conv.id];</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        this.parentNode.removeChild(this);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+        this.remove();</span>
<a href="#l9.14"></a><span id="l9.14">         delete this.conv;</span>
<a href="#l9.15"></a><span id="l9.15">       ]]&gt;</span>
<a href="#l9.16"></a><span id="l9.16">       &lt;/body&gt;</span>
<a href="#l9.17"></a><span id="l9.17">      &lt;/method&gt;</span>
<a href="#l9.18"></a><span id="l9.18"> </span>
<a href="#l9.19"></a><span id="l9.19">      &lt;method name=&quot;openConversation&quot;&gt;</span>
<a href="#l9.20"></a><span id="l9.20">       &lt;body&gt;</span>
<a href="#l9.21"></a><span id="l9.21">        &lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/im/content/conversation.xml</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/im/content/conversation.xml</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1353,17 +1353,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">           var item = this.buddies[aOldName];</span>
<a href="#l10.5"></a><span id="l10.5">           item.chatBuddy = aBuddy;</span>
<a href="#l10.6"></a><span id="l10.6">           delete this.buddies[aOldName];</span>
<a href="#l10.7"></a><span id="l10.7">           this.buddies[name] = item;</span>
<a href="#l10.8"></a><span id="l10.8">           item.setAttribute(&quot;label&quot;, name);</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">           // Move this item to the right position if its name changed</span>
<a href="#l10.11"></a><span id="l10.11">           this._nicks.splice(this._nicks.indexOf(aOldName.toLowerCase()), 1);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-          this.nicklistElt.removeChild(item);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+          item.remove();</span>
<a href="#l10.14"></a><span id="l10.14">           this.addNick(item);</span>
<a href="#l10.15"></a><span id="l10.15">         ]]&gt;</span>
<a href="#l10.16"></a><span id="l10.16">         &lt;/body&gt;</span>
<a href="#l10.17"></a><span id="l10.17">       &lt;/method&gt;</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">       &lt;method name=&quot;removeBuddy&quot;&gt;</span>
<a href="#l10.20"></a><span id="l10.20">         &lt;parameter name=&quot;aName&quot;/&gt;</span>
<a href="#l10.21"></a><span id="l10.21">         &lt;body&gt;</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineat">@@ -1372,17 +1372,17 @@</span>
<a href="#l10.23"></a><span id="l10.23">             throw &quot;Cannot remove a buddy that was not in the room: &quot; + aName;</span>
<a href="#l10.24"></a><span id="l10.24">           var item = this.buddies[aName];</span>
<a href="#l10.25"></a><span id="l10.25">           this.partedBuddies[aName] = {partTime: Date.now()};</span>
<a href="#l10.26"></a><span id="l10.26">           if (item.activeTimer) {</span>
<a href="#l10.27"></a><span id="l10.27">             clearTimeout(item.activeTimer);</span>
<a href="#l10.28"></a><span id="l10.28">             this.partedBuddies[aName].lastMsgTime = item.lastMsgTime;</span>
<a href="#l10.29"></a><span id="l10.29">           }</span>
<a href="#l10.30"></a><span id="l10.30">           this._nicks.splice(this._nicks.indexOf(aName.toLowerCase()), 1);</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-          this.nicklistElt.removeChild(item);</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+          item.remove();</span>
<a href="#l10.33"></a><span id="l10.33">           delete this.buddies[aName];</span>
<a href="#l10.34"></a><span id="l10.34">         ]]&gt;</span>
<a href="#l10.35"></a><span id="l10.35">         &lt;/body&gt;</span>
<a href="#l10.36"></a><span id="l10.36">       &lt;/method&gt;</span>
<a href="#l10.37"></a><span id="l10.37"> </span>
<a href="#l10.38"></a><span id="l10.38">       &lt;field name=&quot;_nickEscape&quot;&gt;/[[\]{}()*+?.\\^$|]/g&lt;/field&gt;</span>
<a href="#l10.39"></a><span id="l10.39">       &lt;method name=&quot;trackNick&quot;&gt;</span>
<a href="#l10.40"></a><span id="l10.40">         &lt;parameter name=&quot;aNick&quot;/&gt;</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineat">@@ -2191,17 +2191,17 @@</span>
<a href="#l10.42"></a><span id="l10.42">       &lt;/method&gt;</span>
<a href="#l10.43"></a><span id="l10.43"> </span>
<a href="#l10.44"></a><span id="l10.44">       &lt;method name=&quot;hideAllTargets&quot;&gt;</span>
<a href="#l10.45"></a><span id="l10.45">         &lt;body&gt;</span>
<a href="#l10.46"></a><span id="l10.46">         &lt;![CDATA[</span>
<a href="#l10.47"></a><span id="l10.47">           let popup = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;,</span>
<a href="#l10.48"></a><span id="l10.48">                                                               &quot;all-targets-popup&quot;);</span>
<a href="#l10.49"></a><span id="l10.49">           while (popup.hasChildNodes())</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-            popup.removeChild(popup.lastChild);</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+            popup.lastChild.remove();</span>
<a href="#l10.52"></a><span id="l10.52">           popup.removeEventListener(&quot;command&quot;, this.changeTargetCommand);</span>
<a href="#l10.53"></a><span id="l10.53">         ]]&gt;</span>
<a href="#l10.54"></a><span id="l10.54">         &lt;/body&gt;</span>
<a href="#l10.55"></a><span id="l10.55">       &lt;/method&gt;</span>
<a href="#l10.56"></a><span id="l10.56">     &lt;/implementation&gt;</span>
<a href="#l10.57"></a><span id="l10.57">   &lt;/binding&gt;</span>
<a href="#l10.58"></a><span id="l10.58"> </span>
<a href="#l10.59"></a><span id="l10.59">   &lt;binding id=&quot;conv-info-small&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/im/content/group.xml</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/im/content/group.xml</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -96,17 +96,17 @@</span>
<a href="#l11.4"></a><span id="l11.4">              this.tag.getContacts().filter(function (c) !c.online)</span>
<a href="#l11.5"></a><span id="l11.5">                                    .forEach(this.addContact, this);</span>
<a href="#l11.6"></a><span id="l11.6">              this._updateGroupLabel();</span>
<a href="#l11.7"></a><span id="l11.7">            }</span>
<a href="#l11.8"></a><span id="l11.8">            else {</span>
<a href="#l11.9"></a><span id="l11.9">              this.contacts.filter(function (b) !b.contact.online)</span>
<a href="#l11.10"></a><span id="l11.10">                           .forEach(function (b) {</span>
<a href="#l11.11"></a><span id="l11.11">                b.destroy();</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-               b.parentNode.removeChild(b);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+               b.remove();</span>
<a href="#l11.14"></a><span id="l11.14">              }, this);</span>
<a href="#l11.15"></a><span id="l11.15">            }</span>
<a href="#l11.16"></a><span id="l11.16">            return val;</span>
<a href="#l11.17"></a><span id="l11.17">          ]]&gt;</span>
<a href="#l11.18"></a><span id="l11.18">        &lt;/setter&gt;</span>
<a href="#l11.19"></a><span id="l11.19">      &lt;/property&gt;</span>
<a href="#l11.20"></a><span id="l11.20"> </span>
<a href="#l11.21"></a><span id="l11.21">      &lt;field name=&quot;_selectListener&quot;&gt;null&lt;/field&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/im/content/joinchat.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/im/content/joinchat.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -23,17 +23,17 @@ var joinChat = {</span>
<a href="#l12.4"></a><span id="l12.4">       throw &quot;No connected MUC enabled account!&quot;;</span>
<a href="#l12.5"></a><span id="l12.5">     }</span>
<a href="#l12.6"></a><span id="l12.6">     accountList.selectedIndex = 0;</span>
<a href="#l12.7"></a><span id="l12.7">   },</span>
<a href="#l12.8"></a><span id="l12.8"> </span>
<a href="#l12.9"></a><span id="l12.9">   onAccountSelect: function jc_onAccountSelect() {</span>
<a href="#l12.10"></a><span id="l12.10">     let ab = document.getElementById(&quot;separatorRow1&quot;);</span>
<a href="#l12.11"></a><span id="l12.11">     while (ab.nextSibling &amp;&amp; ab.nextSibling.id != &quot;separatorRow2&quot;)</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-      ab.parentNode.removeChild(ab.nextSibling);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+      ab.nextSibling.remove();</span>
<a href="#l12.14"></a><span id="l12.14"> </span>
<a href="#l12.15"></a><span id="l12.15">     let acc = document.getElementById(&quot;accountlist&quot;).selectedItem.account;</span>
<a href="#l12.16"></a><span id="l12.16">     let sep = document.getElementById(&quot;separatorRow2&quot;);</span>
<a href="#l12.17"></a><span id="l12.17">     let defaultValues = acc.getChatRoomDefaultFieldValues();</span>
<a href="#l12.18"></a><span id="l12.18">     joinChat._values = defaultValues;</span>
<a href="#l12.19"></a><span id="l12.19">     joinChat._fields = [];</span>
<a href="#l12.20"></a><span id="l12.20">     joinChat._account = acc;</span>
<a href="#l12.21"></a><span id="l12.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/im/content/newtab.xml</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/im/content/newtab.xml</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -295,17 +295,17 @@</span>
<a href="#l13.4"></a><span id="l13.4">           return elt;</span>
<a href="#l13.5"></a><span id="l13.5">         ]]&gt;</span>
<a href="#l13.6"></a><span id="l13.6">         &lt;/body&gt;</span>
<a href="#l13.7"></a><span id="l13.7">       &lt;/method&gt;</span>
<a href="#l13.8"></a><span id="l13.8"> </span>
<a href="#l13.9"></a><span id="l13.9">       &lt;method name=&quot;popListItem&quot;&gt;</span>
<a href="#l13.10"></a><span id="l13.10">         &lt;body&gt;</span>
<a href="#l13.11"></a><span id="l13.11">         &lt;![CDATA[</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-          this.listbox.removeChild(this.listbox.lastChild);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+          this.listbox.lastChild.remove();</span>
<a href="#l13.14"></a><span id="l13.14">           this.listItems.pop();</span>
<a href="#l13.15"></a><span id="l13.15">         ]]&gt;</span>
<a href="#l13.16"></a><span id="l13.16">         &lt;/body&gt;</span>
<a href="#l13.17"></a><span id="l13.17">       &lt;/method&gt;</span>
<a href="#l13.18"></a><span id="l13.18"> </span>
<a href="#l13.19"></a><span id="l13.19">       &lt;method name=&quot;startConversation&quot;&gt;</span>
<a href="#l13.20"></a><span id="l13.20">         &lt;parameter name=&quot;aNewtabItem&quot;/&gt;</span>
<a href="#l13.21"></a><span id="l13.21">         &lt;body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/im/content/nsContextMenu.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/im/content/nsContextMenu.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -43,17 +43,17 @@ function nsContextMenu(aXulMenu, aBrowse</span>
<a href="#l14.4"></a><span id="l14.4"> </span>
<a href="#l14.5"></a><span id="l14.5"> // Prototype for nsContextMenu &quot;class.&quot;</span>
<a href="#l14.6"></a><span id="l14.6"> nsContextMenu.prototype = {</span>
<a href="#l14.7"></a><span id="l14.7">   cleanup: function() {</span>
<a href="#l14.8"></a><span id="l14.8">     let elt = document.getElementById(&quot;context-sep-selectall&quot;).nextSibling;</span>
<a href="#l14.9"></a><span id="l14.9">     // remove the action menuitems added last time we opened the popup</span>
<a href="#l14.10"></a><span id="l14.10">     while (elt &amp;&amp; elt.localName != &quot;menuseparator&quot;) {</span>
<a href="#l14.11"></a><span id="l14.11">       let tmp = elt.nextSibling;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-      elt.parentNode.removeChild(elt);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+      elt.remove();</span>
<a href="#l14.14"></a><span id="l14.14">       elt = tmp;</span>
<a href="#l14.15"></a><span id="l14.15">     }</span>
<a href="#l14.16"></a><span id="l14.16">   },</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">   // Initialize context menu.</span>
<a href="#l14.19"></a><span id="l14.19">   initMenu: function CM_initMenu(aPopup, aBrowser) {</span>
<a href="#l14.20"></a><span id="l14.20">     this.menu = aPopup;</span>
<a href="#l14.21"></a><span id="l14.21">     this.browser = aBrowser;</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -289,17 +289,17 @@ nsContextMenu.prototype = {</span>
<a href="#l14.23"></a><span id="l14.23">                  &quot;_blank&quot;, &quot;chrome,dialog,modal,centerscreen&quot;);</span>
<a href="#l14.24"></a><span id="l14.24">     }</span>
<a href="#l14.25"></a><span id="l14.25">   },</span>
<a href="#l14.26"></a><span id="l14.26"> </span>
<a href="#l14.27"></a><span id="l14.27">   buildSearchEngineList: function() {</span>
<a href="#l14.28"></a><span id="l14.28">     let popup = document.getElementById(&quot;context-popup-searchselect-with&quot;);</span>
<a href="#l14.29"></a><span id="l14.29">     // remove the menuitems added last time we opened the popup</span>
<a href="#l14.30"></a><span id="l14.30">     while (popup.firstChild &amp;&amp; popup.firstChild.localName != &quot;menuseparator&quot;)</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-      popup.removeChild(popup.firstChild);</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+      popup.firstChild.remove();</span>
<a href="#l14.33"></a><span id="l14.33"> </span>
<a href="#l14.34"></a><span id="l14.34">     let engines = Services.search.getVisibleEngines({});</span>
<a href="#l14.35"></a><span id="l14.35"> </span>
<a href="#l14.36"></a><span id="l14.36">     for (let i = engines.length - 1; i &gt;= 0; --i) {</span>
<a href="#l14.37"></a><span id="l14.37">       let menuitem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l14.38"></a><span id="l14.38">       let name = engines[i].name;</span>
<a href="#l14.39"></a><span id="l14.39">       menuitem.setAttribute(&quot;label&quot;, name);</span>
<a href="#l14.40"></a><span id="l14.40">       menuitem.setAttribute(&quot;class&quot;, &quot;menuitem-iconic&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/im/content/preferences/applications.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/im/content/preferences/applications.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -482,17 +482,17 @@ var gApplicationsPane = {</span>
<a href="#l15.4"></a><span id="l15.4">       else</span>
<a href="#l15.5"></a><span id="l15.5">         this._visibleTypeDescriptionCount[handlerInfo.description] = 1;</span>
<a href="#l15.6"></a><span id="l15.6">     }</span>
<a href="#l15.7"></a><span id="l15.7">   },</span>
<a href="#l15.8"></a><span id="l15.8"> </span>
<a href="#l15.9"></a><span id="l15.9">   _rebuildView: function() {</span>
<a href="#l15.10"></a><span id="l15.10">     // Clear the list of entries.</span>
<a href="#l15.11"></a><span id="l15.11">     while (this._list.childNodes.length &gt; 1)</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-      this._list.removeChild(this._list.lastChild);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+      this._list.lastChild.remove();</span>
<a href="#l15.14"></a><span id="l15.14"> </span>
<a href="#l15.15"></a><span id="l15.15">     var visibleTypes = this._visibleTypes;</span>
<a href="#l15.16"></a><span id="l15.16"> </span>
<a href="#l15.17"></a><span id="l15.17">     // If the user is filtering the list, then only show matching types.</span>
<a href="#l15.18"></a><span id="l15.18">     if (this._filter.value)</span>
<a href="#l15.19"></a><span id="l15.19">       visibleTypes = visibleTypes.filter(this._matchesFilter, this);</span>
<a href="#l15.20"></a><span id="l15.20"> </span>
<a href="#l15.21"></a><span id="l15.21">     for each (let visibleType in visibleTypes) {</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -653,17 +653,17 @@ var gApplicationsPane = {</span>
<a href="#l15.23"></a><span id="l15.23">     var typeItem = this._list.selectedItem;</span>
<a href="#l15.24"></a><span id="l15.24">     var handlerInfo = this._handledTypes[typeItem.type];</span>
<a href="#l15.25"></a><span id="l15.25">     var menu =</span>
<a href="#l15.26"></a><span id="l15.26">       document.getAnonymousElementByAttribute(typeItem, &quot;class&quot;, &quot;actionsMenu&quot;);</span>
<a href="#l15.27"></a><span id="l15.27">     var menuPopup = menu.menupopup;</span>
<a href="#l15.28"></a><span id="l15.28"> </span>
<a href="#l15.29"></a><span id="l15.29">     // Clear out existing items.</span>
<a href="#l15.30"></a><span id="l15.30">     while (menuPopup.hasChildNodes())</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-      menuPopup.removeChild(menuPopup.lastChild);</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+      menuPopup.lastChild.remove();</span>
<a href="#l15.33"></a><span id="l15.33"> </span>
<a href="#l15.34"></a><span id="l15.34">     {</span>
<a href="#l15.35"></a><span id="l15.35">       var askMenuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l15.36"></a><span id="l15.36">       askMenuItem.setAttribute(&quot;alwaysAsk&quot;, &quot;true&quot;);</span>
<a href="#l15.37"></a><span id="l15.37">       let label = this._prefsBundle.getString(&quot;alwaysAsk&quot;);</span>
<a href="#l15.38"></a><span id="l15.38">       askMenuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l15.39"></a><span id="l15.39">       askMenuItem.setAttribute(&quot;tooltiptext&quot;, label);</span>
<a href="#l15.40"></a><span id="l15.40">       askMenuItem.setAttribute(APP_ICON_ATTR_NAME, &quot;ask&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/im/content/preferences/messagestyle.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/im/content/preferences/messagestyle.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -98,17 +98,17 @@ var previewObserver = {</span>
<a href="#l16.4"></a><span id="l16.4">     }</span>
<a href="#l16.5"></a><span id="l16.5">     catch(e) {</span>
<a href="#l16.6"></a><span id="l16.6">       document.getElementById(&quot;previewDeck&quot;).selectedIndex = 0;</span>
<a href="#l16.7"></a><span id="l16.7">       return;</span>
<a href="#l16.8"></a><span id="l16.8">     }</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10">     let menulist = document.getElementById(&quot;themevariant&quot;);</span>
<a href="#l16.11"></a><span id="l16.11">     if (menulist.firstChild)</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-      menulist.removeChild(menulist.firstChild);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+      menulist.firstChild.remove();</span>
<a href="#l16.14"></a><span id="l16.14">     let popup = menulist.appendChild(document.createElement(&quot;menupopup&quot;));</span>
<a href="#l16.15"></a><span id="l16.15">     let variants = getThemeVariants(this.theme);</span>
<a href="#l16.16"></a><span id="l16.16"> </span>
<a href="#l16.17"></a><span id="l16.17">     let defaultVariant = &quot;&quot;;</span>
<a href="#l16.18"></a><span id="l16.18">     if ((&quot;DefaultVariant&quot; in this.theme.metadata) &amp;&amp;</span>
<a href="#l16.19"></a><span id="l16.19">         variants.indexOf(this.theme.metadata.DefaultVariant) != -1)</span>
<a href="#l16.20"></a><span id="l16.20">       defaultVariant = this.theme.metadata.DefaultVariant.replace(/_/g, &quot; &quot;);</span>
<a href="#l16.21"></a><span id="l16.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/im/content/preferences/smileys.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/im/content/preferences/smileys.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -20,17 +20,17 @@ var smileysPreview = {</span>
<a href="#l17.4"></a><span id="l17.4">       return;</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6">     let themeName = document.getElementById(&quot;emoticons-themename&quot;).value;</span>
<a href="#l17.7"></a><span id="l17.7">     this.smileyList = getSmileyList(themeName);</span>
<a href="#l17.8"></a><span id="l17.8">     let list = document.getElementById(&quot;smileysPreview&quot;);</span>
<a href="#l17.9"></a><span id="l17.9">     let item = list.firstChild.nextSibling;</span>
<a href="#l17.10"></a><span id="l17.10">     while (item) {</span>
<a href="#l17.11"></a><span id="l17.11">       let next = item.nextSibling;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      list.removeChild(item);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      item.remove();</span>
<a href="#l17.14"></a><span id="l17.14">       item = next;</span>
<a href="#l17.15"></a><span id="l17.15">     }</span>
<a href="#l17.16"></a><span id="l17.16"> </span>
<a href="#l17.17"></a><span id="l17.17">     if (this.smileyList) {</span>
<a href="#l17.18"></a><span id="l17.18">       for each (let smiley in this.smileyList) {</span>
<a href="#l17.19"></a><span id="l17.19">         let item = document.createElement(&quot;smiley&quot;);</span>
<a href="#l17.20"></a><span id="l17.20">         item.setAttribute(&quot;smileyImage&quot;, smiley.src);</span>
<a href="#l17.21"></a><span id="l17.21">         item.setAttribute(&quot;smileyTextCodes&quot;, smiley.textCodes.join(&quot; &quot;));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/im/content/proxies.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/im/content/proxies.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -21,17 +21,17 @@ var gProxies = {</span>
<a href="#l18.4"></a><span id="l18.4">       proxyInfo.type = Ci.purpleIProxyInfo.useGlobal;</span>
<a href="#l18.5"></a><span id="l18.5">       document.getElementById(&quot;useGlobal&quot;).proxy = proxyInfo;</span>
<a href="#l18.6"></a><span id="l18.6">       var globalProxy = pcs.globalProxy;</span>
<a href="#l18.7"></a><span id="l18.7">       document.getElementById(&quot;globalProxy&quot;).textContent =</span>
<a href="#l18.8"></a><span id="l18.8">         this.getProxyDescription(globalProxy);</span>
<a href="#l18.9"></a><span id="l18.9">     }</span>
<a href="#l18.10"></a><span id="l18.10">     else {</span>
<a href="#l18.11"></a><span id="l18.11">       let global = document.getElementById(&quot;useGlobal&quot;);</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-      global.parentNode.removeChild(global);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+      global.remove();</span>
<a href="#l18.14"></a><span id="l18.14">       document.getElementById(&quot;useAsGlobalSettings&quot;).collapsed = true;</span>
<a href="#l18.15"></a><span id="l18.15">       document.getElementById(&quot;proxyDialogHeader&quot;).collapsed = true;</span>
<a href="#l18.16"></a><span id="l18.16">     }</span>
<a href="#l18.17"></a><span id="l18.17"> </span>
<a href="#l18.18"></a><span id="l18.18">     proxyInfo = new proxyInfoCtr();</span>
<a href="#l18.19"></a><span id="l18.19">     proxyInfo.type = Ci.purpleIProxyInfo.noProxy;</span>
<a href="#l18.20"></a><span id="l18.20">     document.getElementById(&quot;noProxy&quot;).proxy = proxyInfo;</span>
<a href="#l18.21"></a><span id="l18.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/im/content/tabbrowser.xml</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/im/content/tabbrowser.xml</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -705,32 +705,32 @@</span>
<a href="#l19.4"></a><span id="l19.4">             if (&quot;destroy&quot; in panel)</span>
<a href="#l19.5"></a><span id="l19.5">               panel.destroy();</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7">             // Invalidate caches, as the tab is removed from the tab container.</span>
<a href="#l19.8"></a><span id="l19.8">             this._conversations = null;</span>
<a href="#l19.9"></a><span id="l19.9">             this._tabPanels = null;</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">             // Remove the tab ...</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-            this.tabContainer.removeChild(aTab);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+            aTab.remove();</span>
<a href="#l19.14"></a><span id="l19.14"> </span>
<a href="#l19.15"></a><span id="l19.15">             // ... and fix up the _tPos properties immediately.</span>
<a href="#l19.16"></a><span id="l19.16">             for (let i = aTab._tPos; i &lt; this.mTabs.length; i++)</span>
<a href="#l19.17"></a><span id="l19.17">               this.mTabs[i]._tPos = i;</span>
<a href="#l19.18"></a><span id="l19.18"> </span>
<a href="#l19.19"></a><span id="l19.19">             // update first-tab/last-tab/beforeselected/afterselected attributes</span>
<a href="#l19.20"></a><span id="l19.20">             if (this.selectedTab) // can be null if we removed the last tab</span>
<a href="#l19.21"></a><span id="l19.21">               this.selectedTab._selected = true;</span>
<a href="#l19.22"></a><span id="l19.22"> </span>
<a href="#l19.23"></a><span id="l19.23">             // This will unload the document. An unload handler could remove</span>
<a href="#l19.24"></a><span id="l19.24">             // dependant tabs, so it's important that the tabbrowser is now in</span>
<a href="#l19.25"></a><span id="l19.25">             // a consistent state (tab removed, tab positions updated, etc.).</span>
<a href="#l19.26"></a><span id="l19.26">             // Also, it's important that another tab has been selected before</span>
<a href="#l19.27"></a><span id="l19.27">             // the panel is removed; otherwise, a random sibling panel can flash.</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineminus">-            this.mPanelContainer.removeChild(panel);</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineplus">+            panel.remove();</span>
<a href="#l19.30"></a><span id="l19.30"> </span>
<a href="#l19.31"></a><span id="l19.31">             // As the panel is removed, the removal of a dependent document can</span>
<a href="#l19.32"></a><span id="l19.32">             // cause the whole window to close. So at this point, it's possible</span>
<a href="#l19.33"></a><span id="l19.33">             // that the binding is destructed.</span>
<a href="#l19.34"></a><span id="l19.34">             if (this.mTabBox)</span>
<a href="#l19.35"></a><span id="l19.35">               this.mTabBox.selectedPanel = this.selectedPanel;</span>
<a href="#l19.36"></a><span id="l19.36"> </span>
<a href="#l19.37"></a><span id="l19.37">             if (aCloseWindow)</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineat">@@ -1825,17 +1825,17 @@</span>
<a href="#l19.39"></a><span id="l19.39">       &lt;/method&gt;</span>
<a href="#l19.40"></a><span id="l19.40"> </span>
<a href="#l19.41"></a><span id="l19.41">       &lt;method name=&quot;_tabOnTabClose&quot;&gt;</span>
<a href="#l19.42"></a><span id="l19.42">         &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l19.43"></a><span id="l19.43"> </span>
<a href="#l19.44"></a><span id="l19.44">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l19.45"></a><span id="l19.45">           var menuItem = aEvent.target.mCorrespondingMenuitem;</span>
<a href="#l19.46"></a><span id="l19.46">           if (menuItem)</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">-            this.removeChild(menuItem);</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineplus">+            menuItem.remove();</span>
<a href="#l19.49"></a><span id="l19.49">         ]]&gt;&lt;/body&gt;</span>
<a href="#l19.50"></a><span id="l19.50">       &lt;/method&gt;</span>
<a href="#l19.51"></a><span id="l19.51"> </span>
<a href="#l19.52"></a><span id="l19.52">       &lt;method name=&quot;handleEvent&quot;&gt;</span>
<a href="#l19.53"></a><span id="l19.53">         &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l19.54"></a><span id="l19.54">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l19.55"></a><span id="l19.55">           if (!aEvent.isTrusted)</span>
<a href="#l19.56"></a><span id="l19.56">             return;</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineat">@@ -1932,17 +1932,17 @@</span>
<a href="#l19.58"></a><span id="l19.58">       &lt;handler event=&quot;popuphiding&quot;&gt;</span>
<a href="#l19.59"></a><span id="l19.59">       &lt;![CDATA[</span>
<a href="#l19.60"></a><span id="l19.60">         // clear out the menu popup and remove the listeners</span>
<a href="#l19.61"></a><span id="l19.61">         while (this.hasChildNodes()) {</span>
<a href="#l19.62"></a><span id="l19.62">           var menuItem = this.lastChild;</span>
<a href="#l19.63"></a><span id="l19.63">           menuItem.removeEventListener(&quot;command&quot;, this, false);</span>
<a href="#l19.64"></a><span id="l19.64">           menuItem.tab.removeEventListener(&quot;TabClose&quot;, this, false);</span>
<a href="#l19.65"></a><span id="l19.65">           menuItem.tab.mCorrespondingMenuitem = null;</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-          this.removeChild(menuItem);</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineplus">+          menuItem.remove();</span>
<a href="#l19.68"></a><span id="l19.68">         }</span>
<a href="#l19.69"></a><span id="l19.69">         var tabcontainer = document.getBindingParent(this);</span>
<a href="#l19.70"></a><span id="l19.70">         tabcontainer.mTabstrip.removeEventListener(&quot;scroll&quot;, this, false);</span>
<a href="#l19.71"></a><span id="l19.71">         tabcontainer.removeEventListener(&quot;TabOpen&quot;, this, false);</span>
<a href="#l19.72"></a><span id="l19.72">         window.XULBrowserWindow.setOverLink(&quot;&quot;, null);</span>
<a href="#l19.73"></a><span id="l19.73">       ]]&gt;&lt;/handler&gt;</span>
<a href="#l19.74"></a><span id="l19.74"> </span>
<a href="#l19.75"></a><span id="l19.75">       &lt;handler event=&quot;DOMMenuItemActive&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/im/modules/ibTagMenu.jsm</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/im/modules/ibTagMenu.jsm</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -27,17 +27,17 @@ TagMenu.prototype = {</span>
<a href="#l20.4"></a><span id="l20.4">   target: null,</span>
<a href="#l20.5"></a><span id="l20.5">   tagsPopupShowing: function() {</span>
<a href="#l20.6"></a><span id="l20.6">     if (!this.parent.onContact &amp;&amp; !this.parent.onBuddy &amp;&amp; !this.parent.onNick)</span>
<a href="#l20.7"></a><span id="l20.7">       return;</span>
<a href="#l20.8"></a><span id="l20.8"> </span>
<a href="#l20.9"></a><span id="l20.9">     let popup = this.document.getElementById(&quot;context-tags-popup&quot;);</span>
<a href="#l20.10"></a><span id="l20.10">     let item;</span>
<a href="#l20.11"></a><span id="l20.11">     while ((item = popup.firstChild) &amp;&amp; item.localName != &quot;menuseparator&quot;)</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-      popup.removeChild(item);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+      item.remove();</span>
<a href="#l20.14"></a><span id="l20.14"> </span>
<a href="#l20.15"></a><span id="l20.15">     if (this.target) {</span>
<a href="#l20.16"></a><span id="l20.16">       var tags = this.target.contact.getTags();</span>
<a href="#l20.17"></a><span id="l20.17">       var groupId = this.target.group.groupId;</span>
<a href="#l20.18"></a><span id="l20.18">     }</span>
<a href="#l20.19"></a><span id="l20.19"> </span>
<a href="#l20.20"></a><span id="l20.20">     let allTags = Services.tags.getTags().reverse();</span>
<a href="#l20.21"></a><span id="l20.21">     for (let tag of allTags) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/components/im/content/am-im.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/components/im/content/am-im.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -101,19 +101,18 @@ var account = {</span>
<a href="#l21.4"></a><span id="l21.4">       popup.appendChild(item);</span>
<a href="#l21.5"></a><span id="l21.5">     }</span>
<a href="#l21.6"></a><span id="l21.6">     box.appendChild(menulist);</span>
<a href="#l21.7"></a><span id="l21.7">     return box;</span>
<a href="#l21.8"></a><span id="l21.8">   },</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10">   populateProtoSpecificBox: function account_populate() {</span>
<a href="#l21.11"></a><span id="l21.11">     var gbox = document.getElementById(&quot;protoSpecific&quot;);</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    let child;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-    while ((child = gbox.firstChild))</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-      gbox.removeChild(child);</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+    while (gbox.hasChildNodes())</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+      gbox.lastChild.remove();</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18">     let options = this.proto.getOptions();</span>
<a href="#l21.19"></a><span id="l21.19">     while (options.hasMoreElements()) {</span>
<a href="#l21.20"></a><span id="l21.20">       let opt = options.getNext();</span>
<a href="#l21.21"></a><span id="l21.21">       var text = opt.label;</span>
<a href="#l21.22"></a><span id="l21.22">       var name = &quot;server.&quot; + opt.name;</span>
<a href="#l21.23"></a><span id="l21.23">       switch (opt.type) {</span>
<a href="#l21.24"></a><span id="l21.24">       case opt.typeBool:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/components/im/content/imAccountWizard.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/components/im/content/imAccountWizard.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -122,19 +122,18 @@ var accountWizard = {</span>
<a href="#l22.4"></a><span id="l22.4">     else {</span>
<a href="#l22.5"></a><span id="l22.5">       usernameInfo =</span>
<a href="#l22.6"></a><span id="l22.6">         bundle.getFormattedString(&quot;accountUsernameInfo&quot;, [this.proto.name]);</span>
<a href="#l22.7"></a><span id="l22.7">     }</span>
<a href="#l22.8"></a><span id="l22.8">     document.getElementById(&quot;usernameInfo&quot;).textContent = usernameInfo;</span>
<a href="#l22.9"></a><span id="l22.9"> </span>
<a href="#l22.10"></a><span id="l22.10">     var vbox = document.getElementById(&quot;userNameBox&quot;);</span>
<a href="#l22.11"></a><span id="l22.11">     // remove anything that may be there for another protocol</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    var child;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-    while ((child = vbox.firstChild))</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-      vbox.removeChild(child);</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+    while (vbox.hasChildNodes())</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+      vbox.lastChild.remove();</span>
<a href="#l22.17"></a><span id="l22.17"> </span>
<a href="#l22.18"></a><span id="l22.18">     var splits = [];</span>
<a href="#l22.19"></a><span id="l22.19">     for (let split in this.getProtoUserSplits())</span>
<a href="#l22.20"></a><span id="l22.20">       splits.push(split);</span>
<a href="#l22.21"></a><span id="l22.21"> </span>
<a href="#l22.22"></a><span id="l22.22">     var label = bundle.getString(&quot;accountUsername&quot;);</span>
<a href="#l22.23"></a><span id="l22.23">     this.userNameBoxes = [this.insertUsernameField(&quot;name&quot;, label, vbox)];</span>
<a href="#l22.24"></a><span id="l22.24">     this.userNameBoxes[0].emptyText = emptyText;</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineat">@@ -214,19 +213,18 @@ var accountWizard = {</span>
<a href="#l22.26"></a><span id="l22.26">     }</span>
<a href="#l22.27"></a><span id="l22.27">     vbox.appendChild(menulist);</span>
<a href="#l22.28"></a><span id="l22.28">     return vbox;</span>
<a href="#l22.29"></a><span id="l22.29">   },</span>
<a href="#l22.30"></a><span id="l22.30"> </span>
<a href="#l22.31"></a><span id="l22.31">   populateProtoSpecificBox: function aw_populate() {</span>
<a href="#l22.32"></a><span id="l22.32">     var id = this.proto.id;</span>
<a href="#l22.33"></a><span id="l22.33">     var rows = document.getElementById(&quot;protoSpecific&quot;);</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">-    var child;</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineminus">-    while ((child = rows.firstChild))</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineminus">-      rows.removeChild(child);</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineplus">+    while (rows.hasChildNodes())</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineplus">+      rows.lastChild.remove();</span>
<a href="#l22.39"></a><span id="l22.39">     var visible = false;</span>
<a href="#l22.40"></a><span id="l22.40">     for (let opt in this.getProtoOptions()) {</span>
<a href="#l22.41"></a><span id="l22.41">       var text = opt.label;</span>
<a href="#l22.42"></a><span id="l22.42">       var name = id + &quot;-&quot; + opt.name;</span>
<a href="#l22.43"></a><span id="l22.43">       switch (opt.type) {</span>
<a href="#l22.44"></a><span id="l22.44">       case opt.typeBool:</span>
<a href="#l22.45"></a><span id="l22.45">         var chk = document.createElement(&quot;checkbox&quot;);</span>
<a href="#l22.46"></a><span id="l22.46">         chk.setAttribute(&quot;label&quot;, text);</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineat">@@ -279,19 +277,18 @@ var accountWizard = {</span>
<a href="#l22.48"></a><span id="l22.48">     row.appendChild(textbox);</span>
<a href="#l22.49"></a><span id="l22.49"> </span>
<a href="#l22.50"></a><span id="l22.50">     return row;</span>
<a href="#l22.51"></a><span id="l22.51">   },</span>
<a href="#l22.52"></a><span id="l22.52"> </span>
<a href="#l22.53"></a><span id="l22.53">   showSummary: function aw_showSummary() {</span>
<a href="#l22.54"></a><span id="l22.54">     var rows = document.getElementById(&quot;summaryRows&quot;);</span>
<a href="#l22.55"></a><span id="l22.55">     var bundle = document.getElementById(&quot;accountsBundle&quot;);</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineminus">-    var child;</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineminus">-    while ((child = rows.firstChild))</span>
<a href="#l22.58"></a><span id="l22.58" class="difflineminus">-      rows.removeChild(child);</span>
<a href="#l22.59"></a><span id="l22.59" class="difflineplus">+    while (rows.hasChildNodes())</span>
<a href="#l22.60"></a><span id="l22.60" class="difflineplus">+      rows.lastChild.remove();</span>
<a href="#l22.61"></a><span id="l22.61"> </span>
<a href="#l22.62"></a><span id="l22.62">     var label = document.getElementById(&quot;protoLabel&quot;).value;</span>
<a href="#l22.63"></a><span id="l22.63">     rows.appendChild(this.createSummaryRow(label, this.proto.name));</span>
<a href="#l22.64"></a><span id="l22.64">     this.username = this.getUsername();</span>
<a href="#l22.65"></a><span id="l22.65">     label = bundle.getString(&quot;accountUsername&quot;);</span>
<a href="#l22.66"></a><span id="l22.66">     rows.appendChild(this.createSummaryRow(label, this.username));</span>
<a href="#l22.67"></a><span id="l22.67">     if (!this.proto.noPassword) {</span>
<a href="#l22.68"></a><span id="l22.68">       this.password = this.getValue(&quot;password&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/components/im/content/imAccounts.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/components/im/content/imAccounts.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -137,26 +137,26 @@ var gAccountManager = {</span>
<a href="#l23.4"></a><span id="l23.4">       elt.build(aObject);</span>
<a href="#l23.5"></a><span id="l23.5">       if (this.accountList.getRowCount() == 1)</span>
<a href="#l23.6"></a><span id="l23.6">         this.accountList.selectedIndex = 0;</span>
<a href="#l23.7"></a><span id="l23.7">     }</span>
<a href="#l23.8"></a><span id="l23.8">     else if (aTopic == &quot;account-removed&quot;) {</span>
<a href="#l23.9"></a><span id="l23.9">       var elt = document.getElementById(aObject.id);</span>
<a href="#l23.10"></a><span id="l23.10">       elt.destroy();</span>
<a href="#l23.11"></a><span id="l23.11">       if (!elt.selected) {</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-        this.accountList.removeChild(elt);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+        elt.remove();</span>
<a href="#l23.14"></a><span id="l23.14">         return;</span>
<a href="#l23.15"></a><span id="l23.15">       }</span>
<a href="#l23.16"></a><span id="l23.16">       // The currently selected element is removed,</span>
<a href="#l23.17"></a><span id="l23.17">       // ensure another element gets selected (if the list is not empty)</span>
<a href="#l23.18"></a><span id="l23.18">       var selectedIndex = this.accountList.selectedIndex;</span>
<a href="#l23.19"></a><span id="l23.19">       // Prevent errors if the timer is active and the account deleted</span>
<a href="#l23.20"></a><span id="l23.20">       clearTimeout(this.disableTimerID);</span>
<a href="#l23.21"></a><span id="l23.21">       this.disableTimerID = 0;</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineminus">-      this.accountList.removeChild(elt);</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineplus">+      elt.remove();</span>
<a href="#l23.24"></a><span id="l23.24">       var count = this.accountList.getRowCount();</span>
<a href="#l23.25"></a><span id="l23.25">       if (!count) {</span>
<a href="#l23.26"></a><span id="l23.26">         document.getElementById(&quot;accountsDesk&quot;).selectedIndex = 0;</span>
<a href="#l23.27"></a><span id="l23.27">         return;</span>
<a href="#l23.28"></a><span id="l23.28">       }</span>
<a href="#l23.29"></a><span id="l23.29">       if (selectedIndex == count)</span>
<a href="#l23.30"></a><span id="l23.30">         --selectedIndex;</span>
<a href="#l23.31"></a><span id="l23.31">       this.accountList.selectedIndex = selectedIndex;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/components/im/content/imContextMenu.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/components/im/content/imContextMenu.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -31,17 +31,17 @@ function imContextMenu(aXulMenu) {</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5"> // Prototype for nsContextMenu &quot;class.&quot;</span>
<a href="#l24.6"></a><span id="l24.6"> imContextMenu.prototype = {</span>
<a href="#l24.7"></a><span id="l24.7">   cleanup: function() {</span>
<a href="#l24.8"></a><span id="l24.8">     let elt = document.getElementById(&quot;context-sep-messageactions&quot;).nextSibling;</span>
<a href="#l24.9"></a><span id="l24.9">     // remove the action menuitems added last time we opened the popup</span>
<a href="#l24.10"></a><span id="l24.10">     while (elt &amp;&amp; elt.localName != &quot;menuseparator&quot;) {</span>
<a href="#l24.11"></a><span id="l24.11">       let tmp = elt.nextSibling;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-      elt.parentNode.removeChild(elt);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+      elt.remove();</span>
<a href="#l24.14"></a><span id="l24.14">       elt = tmp;</span>
<a href="#l24.15"></a><span id="l24.15">     }</span>
<a href="#l24.16"></a><span id="l24.16">   },</span>
<a href="#l24.17"></a><span id="l24.17"> </span>
<a href="#l24.18"></a><span id="l24.18">   // Initialize context menu.</span>
<a href="#l24.19"></a><span id="l24.19">   initMenu: function CM_initMenu(aPopup) {</span>
<a href="#l24.20"></a><span id="l24.20">     this.menu = aPopup;</span>
<a href="#l24.21"></a><span id="l24.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/components/im/content/imbuddytooltip.xml</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/components/im/content/imbuddytooltip.xml</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -168,19 +168,18 @@</span>
<a href="#l25.4"></a><span id="l25.4">          msg.textContent = aMessage;</span>
<a href="#l25.5"></a><span id="l25.5">        ]]&gt;</span>
<a href="#l25.6"></a><span id="l25.6">        &lt;/body&gt;</span>
<a href="#l25.7"></a><span id="l25.7">      &lt;/method&gt;</span>
<a href="#l25.8"></a><span id="l25.8"> </span>
<a href="#l25.9"></a><span id="l25.9">      &lt;method name=&quot;reset&quot;&gt;</span>
<a href="#l25.10"></a><span id="l25.10">        &lt;body&gt;</span>
<a href="#l25.11"></a><span id="l25.11">        &lt;![CDATA[</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-         var row;</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-         while ((row = this.rows.firstChild))</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineminus">-           this.rows.removeChild(row);</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+         while (this.rows.hasChildNodes())</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+           this.rows.lastChild.remove();</span>
<a href="#l25.17"></a><span id="l25.17">        ]]&gt;</span>
<a href="#l25.18"></a><span id="l25.18">        &lt;/body&gt;</span>
<a href="#l25.19"></a><span id="l25.19">      &lt;/method&gt;</span>
<a href="#l25.20"></a><span id="l25.20"> </span>
<a href="#l25.21"></a><span id="l25.21">      &lt;method name=&quot;addRow&quot;&gt;</span>
<a href="#l25.22"></a><span id="l25.22">        &lt;parameter name=&quot;aLabel&quot;/&gt;</span>
<a href="#l25.23"></a><span id="l25.23">        &lt;parameter name=&quot;aValue&quot;/&gt;</span>
<a href="#l25.24"></a><span id="l25.24">        &lt;body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/components/im/content/imcontact.xml</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/components/im/content/imcontact.xml</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -77,17 +77,17 @@</span>
<a href="#l26.4"></a><span id="l26.4">        &lt;/body&gt;</span>
<a href="#l26.5"></a><span id="l26.5">      &lt;/method&gt;</span>
<a href="#l26.6"></a><span id="l26.6"> </span>
<a href="#l26.7"></a><span id="l26.7">      &lt;method name=&quot;destroy&quot;&gt;</span>
<a href="#l26.8"></a><span id="l26.8">       &lt;body&gt;</span>
<a href="#l26.9"></a><span id="l26.9">       &lt;![CDATA[</span>
<a href="#l26.10"></a><span id="l26.10">         this.contact.removeObserver(this);</span>
<a href="#l26.11"></a><span id="l26.11">         delete this.contact;</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-        this.parentNode.removeChild(this);</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+        this.remove();</span>
<a href="#l26.14"></a><span id="l26.14">       ]]&gt;</span>
<a href="#l26.15"></a><span id="l26.15">       &lt;/body&gt;</span>
<a href="#l26.16"></a><span id="l26.16">      &lt;/method&gt;</span>
<a href="#l26.17"></a><span id="l26.17"> </span>
<a href="#l26.18"></a><span id="l26.18">      &lt;method name=&quot;update&quot;&gt;</span>
<a href="#l26.19"></a><span id="l26.19">       &lt;body&gt;</span>
<a href="#l26.20"></a><span id="l26.20">       &lt;![CDATA[</span>
<a href="#l26.21"></a><span id="l26.21">         this.setAttribute(&quot;displayname&quot;, this.contact.displayName);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/components/im/content/imconv.xml</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/components/im/content/imconv.xml</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -158,17 +158,17 @@</span>
<a href="#l27.4"></a><span id="l27.4"> </span>
<a href="#l27.5"></a><span id="l27.5">      &lt;method name=&quot;destroy&quot;&gt;</span>
<a href="#l27.6"></a><span id="l27.6">       &lt;body&gt;</span>
<a href="#l27.7"></a><span id="l27.7">       &lt;![CDATA[</span>
<a href="#l27.8"></a><span id="l27.8">         if (this.conv)</span>
<a href="#l27.9"></a><span id="l27.9">           this.conv.removeObserver(this);</span>
<a href="#l27.10"></a><span id="l27.10">         if (this.convView) {</span>
<a href="#l27.11"></a><span id="l27.11">           this.convView.destroy();</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-          this.convView.parentNode.removeChild(this.convView);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+          this.convView.remove();</span>
<a href="#l27.14"></a><span id="l27.14">         }</span>
<a href="#l27.15"></a><span id="l27.15"> </span>
<a href="#l27.16"></a><span id="l27.16">         // If the conversation we are destroying was selected, we should</span>
<a href="#l27.17"></a><span id="l27.17">         // select something else, but the 'select' event handler of</span>
<a href="#l27.18"></a><span id="l27.18">         // the listbox will choke while updating the Chat tab title if</span>
<a href="#l27.19"></a><span id="l27.19">         // there are conversation nodes associated with a conversation</span>
<a href="#l27.20"></a><span id="l27.20">         // that no longer exists from the chat core's point of view, so</span>
<a href="#l27.21"></a><span id="l27.21">         // we do the actual selection change only after this conversation</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineat">@@ -178,17 +178,17 @@</span>
<a href="#l27.23"></a><span id="l27.23">         if (list.selectedItem == this)</span>
<a href="#l27.24"></a><span id="l27.24">           newSelectedItem = this.previousSibling;</span>
<a href="#l27.25"></a><span id="l27.25"> </span>
<a href="#l27.26"></a><span id="l27.26">         if (this.log) {</span>
<a href="#l27.27"></a><span id="l27.27">           this.hidden = true;</span>
<a href="#l27.28"></a><span id="l27.28">           delete this.log;</span>
<a href="#l27.29"></a><span id="l27.29">         }</span>
<a href="#l27.30"></a><span id="l27.30">         else {</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-          list.removeChild(this);</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+          this.remove();</span>
<a href="#l27.33"></a><span id="l27.33">           delete this.conv;</span>
<a href="#l27.34"></a><span id="l27.34">         }</span>
<a href="#l27.35"></a><span id="l27.35">         if (newSelectedItem)</span>
<a href="#l27.36"></a><span id="l27.36">           list.selectedItem = newSelectedItem;</span>
<a href="#l27.37"></a><span id="l27.37">       ]]&gt;</span>
<a href="#l27.38"></a><span id="l27.38">       &lt;/body&gt;</span>
<a href="#l27.39"></a><span id="l27.39">      &lt;/method&gt;</span>
<a href="#l27.40"></a><span id="l27.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/components/im/content/imconversation.xml</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/components/im/content/imconversation.xml</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -953,29 +953,28 @@</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5">          var item = this.buddies[aOldName];</span>
<a href="#l28.6"></a><span id="l28.6">          item.chatBuddy = aBuddy;</span>
<a href="#l28.7"></a><span id="l28.7">          delete this.buddies[aOldName];</span>
<a href="#l28.8"></a><span id="l28.8">          this.buddies[name] = item;</span>
<a href="#l28.9"></a><span id="l28.9">          item.setAttribute(&quot;label&quot;, name);</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">          // Move this item to the right position if its name changed</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-         document.getElementById(&quot;nicklist&quot;).removeChild(item);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+         item.remove();</span>
<a href="#l28.14"></a><span id="l28.14">          this.addNick(item);</span>
<a href="#l28.15"></a><span id="l28.15">        ]]&gt;</span>
<a href="#l28.16"></a><span id="l28.16">        &lt;/body&gt;</span>
<a href="#l28.17"></a><span id="l28.17">      &lt;/method&gt;</span>
<a href="#l28.18"></a><span id="l28.18">      &lt;method name=&quot;removeBuddy&quot;&gt;</span>
<a href="#l28.19"></a><span id="l28.19">        &lt;parameter name=&quot;aName&quot;/&gt;</span>
<a href="#l28.20"></a><span id="l28.20">        &lt;body&gt;</span>
<a href="#l28.21"></a><span id="l28.21">        &lt;![CDATA[</span>
<a href="#l28.22"></a><span id="l28.22">          if (!this._hasBuddy(aName))</span>
<a href="#l28.23"></a><span id="l28.23">            throw &quot;Cannot remove a buddy that was not in the room&quot;;</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineminus">-         var item = this.buddies[aName];</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineminus">-         item.parentNode.removeChild(item);</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+         this.buddies[aName].remove();</span>
<a href="#l28.27"></a><span id="l28.27">          delete this.buddies[aName];</span>
<a href="#l28.28"></a><span id="l28.28">          if (this._isBuddyActive(aName))</span>
<a href="#l28.29"></a><span id="l28.29">            delete this._activeBuddies[aName];</span>
<a href="#l28.30"></a><span id="l28.30">        ]]&gt;</span>
<a href="#l28.31"></a><span id="l28.31">        &lt;/body&gt;</span>
<a href="#l28.32"></a><span id="l28.32">      &lt;/method&gt;</span>
<a href="#l28.33"></a><span id="l28.33"> </span>
<a href="#l28.34"></a><span id="l28.34">      &lt;method name=&quot;updateTopic&quot;&gt;</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineat">@@ -1126,18 +1125,18 @@</span>
<a href="#l28.36"></a><span id="l28.36">        &lt;/body&gt;</span>
<a href="#l28.37"></a><span id="l28.37">      &lt;/method&gt;</span>
<a href="#l28.38"></a><span id="l28.38"> </span>
<a href="#l28.39"></a><span id="l28.39">      &lt;method name=&quot;showParticipants&quot;&gt;</span>
<a href="#l28.40"></a><span id="l28.40">        &lt;body&gt;</span>
<a href="#l28.41"></a><span id="l28.41">        &lt;![CDATA[</span>
<a href="#l28.42"></a><span id="l28.42">          if (this._conv.isChat) {</span>
<a href="#l28.43"></a><span id="l28.43">            let nicklist = document.getElementById(&quot;nicklist&quot;);</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineminus">-           while (nicklist.firstChild)</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineminus">-             nicklist.removeChild(nicklist.firstChild);</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineplus">+           while (nicklist.hasChildNodes())</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineplus">+             nicklist.lastChild.remove();</span>
<a href="#l28.48"></a><span id="l28.48">            // Populate the nicklist</span>
<a href="#l28.49"></a><span id="l28.49">            this.buddies = {};</span>
<a href="#l28.50"></a><span id="l28.50">            let nicks = fixIterator(this.conv.getParticipants());</span>
<a href="#l28.51"></a><span id="l28.51">            for (let n in nicks)</span>
<a href="#l28.52"></a><span id="l28.52">              this.addBuddy(n);</span>
<a href="#l28.53"></a><span id="l28.53">            this.updateParticipantCount();</span>
<a href="#l28.54"></a><span id="l28.54">          }</span>
<a href="#l28.55"></a><span id="l28.55">        ]]&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/components/im/content/joinchat.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/components/im/content/joinchat.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -25,17 +25,17 @@ var joinChat = {</span>
<a href="#l29.4"></a><span id="l29.4">       throw &quot;No connected MUC enabled account!&quot;;</span>
<a href="#l29.5"></a><span id="l29.5">     }</span>
<a href="#l29.6"></a><span id="l29.6">     accountList.selectedIndex = 0;</span>
<a href="#l29.7"></a><span id="l29.7">   },</span>
<a href="#l29.8"></a><span id="l29.8"> </span>
<a href="#l29.9"></a><span id="l29.9">   onAccountSelect: function jc_onAccountSelect() {</span>
<a href="#l29.10"></a><span id="l29.10">     let ab = document.getElementById(&quot;separatorRow1&quot;);</span>
<a href="#l29.11"></a><span id="l29.11">     while (ab.nextSibling &amp;&amp; ab.nextSibling.id != &quot;separatorRow2&quot;)</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-      ab.parentNode.removeChild(ab.nextSibling);</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+      ab.nextSibling.remove();</span>
<a href="#l29.14"></a><span id="l29.14"> </span>
<a href="#l29.15"></a><span id="l29.15">     let acc = document.getElementById(&quot;accountlist&quot;).selectedItem.account;</span>
<a href="#l29.16"></a><span id="l29.16">     let sep = document.getElementById(&quot;separatorRow2&quot;);</span>
<a href="#l29.17"></a><span id="l29.17">     let defaultValues = acc.getChatRoomDefaultFieldValues();</span>
<a href="#l29.18"></a><span id="l29.18">     joinChat._values = defaultValues;</span>
<a href="#l29.19"></a><span id="l29.19">     joinChat._fields = [];</span>
<a href="#l29.20"></a><span id="l29.20">     joinChat._account = acc;</span>
<a href="#l29.21"></a><span id="l29.21"> </span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

