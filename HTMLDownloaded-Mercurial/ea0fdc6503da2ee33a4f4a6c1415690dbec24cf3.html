<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 26348:ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3" />
<meta property="og:url" content="/comm-central/rev/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3" />
<meta property="og:description" content="Bug 1540009 - Improve alarm sound selection UI; r=Fallen" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">shortlog</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">files</a> |
changeset |
<a href="/comm-central/raw-rev/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">raw</a>  | <a href="/comm-central/archive/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1540009">Bug 1540009</a> - Improve alarm sound selection UI; r=Fallen
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#71;&#101;&#111;&#102;&#102;&#32;&#76;&#97;&#110;&#107;&#111;&#119;&#32;&#60;&#103;&#101;&#111;&#102;&#102;&#64;&#100;&#97;&#114;&#107;&#116;&#114;&#111;&#106;&#97;&#110;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 16 Apr 2019 10:50:08 +1200</td></tr>

<tr>
 <td>changeset 26348</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3</a></td>
</tr>



<tr>
<td>parent 26347</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/d6abc17e8bc5829da3e0837b52ab9bb5c29deb27">d6abc17e8bc5829da3e0837b52ab9bb5c29deb27</a>
</td>
</tr>

<tr>
<td>child 26349</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/8eb6c4b7ccd499a0335a4ed0f4481801e973dc2e">8eb6c4b7ccd499a0335a4ed0f4481801e973dc2e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3">15797</a></td></tr>
<tr><td>push user</td><td>geoff@darktrojan.net</td></tr>
<tr><td>push date</td><td class="date age">Mon, 15 Apr 2019 23:08:46 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@b86fe81c7f28 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b86fe81c7f28052942963eb2a87894b8b0917bc7">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b86fe81c7f28052942963eb2a87894b8b0917bc7&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b86fe81c7f28052942963eb2a87894b8b0917bc7&newProject=comm-central&newRevision=ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b86fe81c7f28052942963eb2a87894b8b0917bc7&newProject=comm-central&newRevision=ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b86fe81c7f28052942963eb2a87894b8b0917bc7&newProject=comm-central&newRevision=ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Fallen%29&revcount=50">Fallen</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1540009">1540009</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1540009">Bug 1540009</a> - Improve alarm sound selection UI; r=Fallen</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.inc.xul">calendar/base/content/preferences/alarms.inc.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.inc.xul">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.inc.xul">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.inc.xul">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.inc.xul">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.inc.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.js">calendar/base/content/preferences/alarms.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.js">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.js">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.js">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.js">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/content/preferences/alarms.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/src/calAlarmMonitor.js">calendar/base/src/calAlarmMonitor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/src/calAlarmMonitor.js">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/src/calAlarmMonitor.js">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/src/calAlarmMonitor.js">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/src/calAlarmMonitor.js">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/base/src/calAlarmMonitor.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/lightning.js">calendar/lightning/content/lightning.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/lightning.js">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/lightning.js">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/lightning.js">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/lightning.js">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/lightning.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/messenger-overlay-preferences.xul">calendar/lightning/content/messenger-overlay-preferences.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/messenger-overlay-preferences.xul">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/messenger-overlay-preferences.xul">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/messenger-overlay-preferences.xul">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/messenger-overlay-preferences.xul">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/lightning/content/messenger-overlay-preferences.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/calendar.properties">calendar/locales/en-US/chrome/calendar/calendar.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/calendar.properties">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/calendar.properties">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/calendar.properties">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/calendar.properties">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/calendar.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd">calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/chat.js">mail/components/preferences/chat.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/chat.js">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/chat.js">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/chat.js">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/chat.js">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/chat.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">mail/locales/en-US/chrome/messenger/preferences/preferences.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">file</a> |
<a href="/comm-central/annotate/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">annotate</a> |
<a href="/comm-central/diff/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">diff</a> |
<a href="/comm-central/comparison/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">comparison</a> |
<a href="/comm-central/log/ea0fdc6503da2ee33a4f4a6c1415690dbec24cf3/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/preferences/alarms.inc.xul</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/preferences/alarms.inc.xul</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -1,47 +1,59 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l1.5"></a><span id="l1.5"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l1.6"></a><span id="l1.6"> # file, you can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l1.7"></a><span id="l1.7">     &lt;vbox id=&quot;calPreferencesBoxAlarms&quot;&gt;</span>
<a href="#l1.8"></a><span id="l1.8">         &lt;groupbox&gt;</span>
<a href="#l1.9"></a><span id="l1.9">             &lt;label&gt;&lt;html:h2&gt;&amp;pref.alarmgoesoff.label;&lt;/html:h2&gt;&lt;/label&gt;</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineminus">-            &lt;hbox id=&quot;alarm-sound-box&quot;&gt;</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineminus">-                &lt;vbox&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+            &lt;vbox id=&quot;alarm-sound-box&quot;&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+                &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l1.14"></a><span id="l1.14">                     &lt;checkbox id=&quot;alarmSoundCheckbox&quot;</span>
<a href="#l1.15"></a><span id="l1.15">                               preference=&quot;calendar.alarms.playsound&quot;</span>
<a href="#l1.16"></a><span id="l1.16">                               label=&quot;&amp;pref.playasound;&quot;</span>
<a href="#l1.17"></a><span id="l1.17">                               accesskey=&quot;&amp;pref.calendar.alarms.playsound.accessKey;&quot;/&gt;</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-                &lt;/vbox&gt;</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineminus">-                &lt;vbox id=&quot;alarm-sound-table&quot;&gt;</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+                    &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+                    &lt;button id=&quot;calendar.prefs.alarm.sound.play&quot;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+                            label=&quot;&amp;pref.calendar.alarms.sound.play.label;&quot;</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+                            accesskey=&quot;&amp;pref.calendar.alarms.sound.play.accessKey;&quot;</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineplus">+                            oncommand=&quot;gAlarmsPane.previewAlarm()&quot;/&gt;</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+                &lt;radiogroup id=&quot;alarmSoundType&quot;</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+                            class=&quot;indent&quot;</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+                            orient=&quot;vertical&quot;</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+                            preference=&quot;calendar.alarms.soundType&quot;</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+                            aria-labelledby=&quot;alarmSoundCheckbox&quot;&gt;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+                    &lt;hbox&gt;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+                        &lt;radio id=&quot;alarmSoundSystem&quot;</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+                               value=&quot;0&quot;</span>
<a href="#l1.34"></a><span id="l1.34" class="difflineplus">+                               label=&quot;&amp;pref.calendar.alarms.sound.useDefault.label;&quot;</span>
<a href="#l1.35"></a><span id="l1.35" class="difflineplus">+                               accesskey=&quot;&amp;pref.calendar.alarms.sound.useDefault.accessKey;&quot;/&gt;</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineplus">+                    &lt;/hbox&gt;</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+                    &lt;hbox&gt;</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+                        &lt;radio id=&quot;alarmSoundCustom&quot;</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineplus">+                               value=&quot;1&quot;</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineplus">+                               label=&quot;&amp;pref.calendar.alarms.sound.useCustom.label;&quot;</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineplus">+                               accesskey=&quot;&amp;pref.calendar.alarms.sound.useCustom.accessKey;&quot;/&gt;</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+                    &lt;/hbox&gt;</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+                &lt;/radiogroup&gt;</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineplus">+                &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l1.45"></a><span id="l1.45">                     &lt;textbox id=&quot;alarmSoundFileField&quot;</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-                              type=&quot;filefield&quot;</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineminus">-                              readonly=&quot;true&quot;</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-                              preference=&quot;calendar.alarms.soundURL&quot;</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-                              preference-editable=&quot;true&quot;</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-                              onsyncfrompreference=&quot;return gAlarmsPane.readSoundLocation();&quot;/&gt;</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-                    &lt;hbox id=&quot;alarm-sound-buttons-box&quot;&gt;</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-                        &lt;button id=&quot;calendar.prefs.alarm.sound.useDefault&quot;</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-                                flex=&quot;1&quot;</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-                                label=&quot;&amp;pref.calendar.alarms.sound.useDefault.label;&quot;</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-                                accesskey=&quot;&amp;pref.calendar.alarms.sound.useDefault.accessKey;&quot;</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-                                oncommand=&quot;gAlarmsPane.useDefaultSound()&quot;/&gt;</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineminus">-                        &lt;button id=&quot;calendar.prefs.alarm.sound.browse&quot;</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineminus">-                                flex=&quot;1&quot;</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-                                label=&quot;&amp;pref.calendar.alarms.sound.browse.label;&quot;</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-                                accesskey=&quot;&amp;pref.calendar.alarms.sound.browse.accessKey;&quot;</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-                                oncommand=&quot;gAlarmsPane.browseAlarm()&quot;/&gt;</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-                        &lt;button id=&quot;calendar.prefs.alarm.sound.play&quot;</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-                                flex=&quot;1&quot;</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineminus">-                                label=&quot;&amp;pref.calendar.alarms.sound.play.label;&quot;</span>
<a href="#l1.65"></a><span id="l1.65" class="difflineminus">-                                accesskey=&quot;&amp;pref.calendar.alarms.sound.play.accessKey;&quot;</span>
<a href="#l1.66"></a><span id="l1.66" class="difflineminus">-                                oncommand=&quot;gAlarmsPane.previewAlarm()&quot;/&gt;</span>
<a href="#l1.67"></a><span id="l1.67" class="difflineminus">-                    &lt;/hbox&gt;</span>
<a href="#l1.68"></a><span id="l1.68" class="difflineminus">-                &lt;/vbox&gt;</span>
<a href="#l1.69"></a><span id="l1.69" class="difflineminus">-            &lt;/hbox&gt;</span>
<a href="#l1.70"></a><span id="l1.70" class="difflineplus">+                             type=&quot;filefield&quot;</span>
<a href="#l1.71"></a><span id="l1.71" class="difflineplus">+                             class=&quot;indent&quot;</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineplus">+                             readonly=&quot;true&quot;</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineplus">+                             flex=&quot;1&quot;</span>
<a href="#l1.74"></a><span id="l1.74" class="difflineplus">+                             preference=&quot;calendar.alarms.soundURL&quot;</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineplus">+                             preference-editable=&quot;true&quot;</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineplus">+                             onsyncfrompreference=&quot;return gAlarmsPane.readSoundLocation();&quot;/&gt;</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineplus">+                    &lt;button id=&quot;calendar.prefs.alarm.sound.browse&quot;</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineplus">+                            label=&quot;&amp;pref.calendar.alarms.sound.browse.label;&quot;</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineplus">+                            accesskey=&quot;&amp;pref.calendar.alarms.sound.browse.accessKey;&quot;</span>
<a href="#l1.80"></a><span id="l1.80" class="difflineplus">+                            oncommand=&quot;gAlarmsPane.browseAlarm()&quot;/&gt;</span>
<a href="#l1.81"></a><span id="l1.81" class="difflineplus">+                &lt;/hbox&gt;</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineplus">+            &lt;/vbox&gt;</span>
<a href="#l1.83"></a><span id="l1.83">             &lt;hbox align=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l1.84"></a><span id="l1.84">                 &lt;checkbox id=&quot;alarmshow&quot;</span>
<a href="#l1.85"></a><span id="l1.85">                           preference=&quot;calendar.alarms.show&quot;</span>
<a href="#l1.86"></a><span id="l1.86">                           label=&quot;&amp;pref.showalarmbox;&quot;</span>
<a href="#l1.87"></a><span id="l1.87">                           accesskey=&quot;&amp;pref.calendar.alarms.showAlarmBox.accessKey;&quot;/&gt;</span>
<a href="#l1.88"></a><span id="l1.88">             &lt;/hbox&gt;</span>
<a href="#l1.89"></a><span id="l1.89">             &lt;hbox align=&quot;center&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l1.90"></a><span id="l1.90">                 &lt;checkbox id=&quot;missedalarms&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/preferences/alarms.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/preferences/alarms.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -6,16 +6,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> /* import-globals-from ../../../lightning/content/messenger-overlay-preferences.js */</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7"> var { Services } = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> Preferences.addAll([</span>
<a href="#l2.10"></a><span id="l2.10">     { id: &quot;calendar.alarms.playsound&quot;, type: &quot;bool&quot; },</span>
<a href="#l2.11"></a><span id="l2.11">     { id: &quot;calendar.alarms.soundURL&quot;, type: &quot;string&quot; },</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+    { id: &quot;calendar.alarms.soundType&quot;, type: &quot;int&quot; },</span>
<a href="#l2.13"></a><span id="l2.13">     { id: &quot;calendar.alarms.show&quot;, type: &quot;bool&quot; },</span>
<a href="#l2.14"></a><span id="l2.14">     { id: &quot;calendar.alarms.showmissed&quot;, type: &quot;bool&quot; },</span>
<a href="#l2.15"></a><span id="l2.15">     { id: &quot;calendar.alarms.onforevents&quot;, type: &quot;int&quot; },</span>
<a href="#l2.16"></a><span id="l2.16">     { id: &quot;calendar.alarms.onfortodos&quot;, type: &quot;int&quot; },</span>
<a href="#l2.17"></a><span id="l2.17">     { id: &quot;calendar.alarms.eventalarmlen&quot;, type: &quot;int&quot; },</span>
<a href="#l2.18"></a><span id="l2.18">     { id: &quot;calendar.alarms.eventalarmunit&quot;, type: &quot;string&quot; },</span>
<a href="#l2.19"></a><span id="l2.19">     { id: &quot;calendar.alarms.todoalarmlen&quot;, type: &quot;int&quot; },</span>
<a href="#l2.20"></a><span id="l2.20">     { id: &quot;calendar.alarms.todoalarmunit&quot;, type: &quot;string&quot; },</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -85,40 +86,51 @@ var gAlarmsPane = {</span>
<a href="#l2.22"></a><span id="l2.22">     },</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24">     /**</span>
<a href="#l2.25"></a><span id="l2.25">      * Opens a filepicker to open a local sound for the alarm.</span>
<a href="#l2.26"></a><span id="l2.26">      */</span>
<a href="#l2.27"></a><span id="l2.27">     browseAlarm: function() {</span>
<a href="#l2.28"></a><span id="l2.28">         let picker = Cc[&quot;@mozilla.org/filepicker;1&quot;].createInstance(Ci.nsIFilePicker);</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-        let bundlePreferences = document.getElementById(&quot;bundleCalendarPreferences&quot;);</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-        let title = bundlePreferences.getString(&quot;Open&quot;);</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-        let wildmat = &quot;*.wav&quot;;</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-        let label = bundlePreferences.getFormattedString(&quot;filterWav&quot;, [wildmat], 1);</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+        // If we already have a sound file, then use the path for that sound file</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+        // as the initial path in the dialog.</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+        let currentValue = Preferences.get(&quot;calendar.alarms.soundURL&quot;).value;</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+        if (currentValue &amp;&amp; currentValue.startsWith(&quot;file://&quot;)) {</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+            let localFile = Services.io.newURI(currentValue).QueryInterface(Ci.nsIFileURL).file;</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+            picker.displayDirectory = localFile.parent;</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+        }</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+        let title = document.getElementById(&quot;bundlePreferences&quot;)</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+                            .getString(&quot;soundFilePickerTitle&quot;);</span>
<a href="#l2.44"></a><span id="l2.44"> </span>
<a href="#l2.45"></a><span id="l2.45">         picker.init(window, title, Ci.nsIFilePicker.modeOpen);</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-        picker.appendFilter(label, wildmat);</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+        picker.appendFilters(Ci.nsIFilePicker.filterAudio);</span>
<a href="#l2.48"></a><span id="l2.48">         picker.appendFilters(Ci.nsIFilePicker.filterAll);</span>
<a href="#l2.49"></a><span id="l2.49"> </span>
<a href="#l2.50"></a><span id="l2.50">         picker.open(rv =&gt; {</span>
<a href="#l2.51"></a><span id="l2.51">             if (rv != Ci.nsIFilePicker.returnOK || !picker.file) {</span>
<a href="#l2.52"></a><span id="l2.52">                 return;</span>
<a href="#l2.53"></a><span id="l2.53">             }</span>
<a href="#l2.54"></a><span id="l2.54">             Preferences.get(&quot;calendar.alarms.soundURL&quot;).value = picker.fileURL.spec;</span>
<a href="#l2.55"></a><span id="l2.55">             document.getElementById(&quot;alarmSoundCheckbox&quot;).checked = true;</span>
<a href="#l2.56"></a><span id="l2.56">             this.readSoundLocation();</span>
<a href="#l2.57"></a><span id="l2.57">         });</span>
<a href="#l2.58"></a><span id="l2.58">     },</span>
<a href="#l2.59"></a><span id="l2.59"> </span>
<a href="#l2.60"></a><span id="l2.60">     /**</span>
<a href="#l2.61"></a><span id="l2.61">      * Plays the alarm sound currently selected.</span>
<a href="#l2.62"></a><span id="l2.62">      */</span>
<a href="#l2.63"></a><span id="l2.63">     previewAlarm: function() {</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-        let soundUrl = document.getElementById(&quot;alarmSoundFileField&quot;).value;</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+        let soundUrl;</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+        if (Preferences.get(&quot;calendar.alarms.soundType&quot;).value == 0) {</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+            soundUrl = &quot;chrome://calendar/content/sound.wav&quot;;</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+        } else {</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+            soundUrl = Preferences.get(&quot;calendar.alarms.soundURL&quot;).value;</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+        }</span>
<a href="#l2.71"></a><span id="l2.71">         let soundIfc = Cc[&quot;@mozilla.org/sound;1&quot;].createInstance(Ci.nsISound);</span>
<a href="#l2.72"></a><span id="l2.72">         let url;</span>
<a href="#l2.73"></a><span id="l2.73">         try {</span>
<a href="#l2.74"></a><span id="l2.74">             soundIfc.init();</span>
<a href="#l2.75"></a><span id="l2.75">             if (soundUrl &amp;&amp; soundUrl.length &amp;&amp; soundUrl.length &gt; 0) {</span>
<a href="#l2.76"></a><span id="l2.76">                 url = Services.io.newURI(soundUrl);</span>
<a href="#l2.77"></a><span id="l2.77">                 soundIfc.play(url);</span>
<a href="#l2.78"></a><span id="l2.78">             } else {</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineat">@@ -131,24 +143,23 @@ var gAlarmsPane = {</span>
<a href="#l2.80"></a><span id="l2.80"> </span>
<a href="#l2.81"></a><span id="l2.81">     /**</span>
<a href="#l2.82"></a><span id="l2.82">      * Handler function to call when the calendar.alarms.playsound preference</span>
<a href="#l2.83"></a><span id="l2.83">      * has been changed. Updates the disabled state of fields that depend on</span>
<a href="#l2.84"></a><span id="l2.84">      * playing a sound.</span>
<a href="#l2.85"></a><span id="l2.85">      */</span>
<a href="#l2.86"></a><span id="l2.86">     alarmsPlaySoundPrefChanged: function() {</span>
<a href="#l2.87"></a><span id="l2.87">         let alarmsPlaySoundPref = Preferences.get(&quot;calendar.alarms.playsound&quot;);</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineplus">+        let alarmsSoundType = Preferences.get(&quot;calendar.alarms.soundType&quot;);</span>
<a href="#l2.89"></a><span id="l2.89"> </span>
<a href="#l2.90"></a><span id="l2.90" class="difflineminus">-        let items = [</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-            document.getElementById(&quot;alarmSoundFileField&quot;),</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineminus">-            document.getElementById(&quot;calendar.prefs.alarm.sound.useDefault&quot;),</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-            document.getElementById(&quot;calendar.prefs.alarm.sound.browse&quot;),</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-            document.getElementById(&quot;calendar.prefs.alarm.sound.play&quot;)</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-        ];</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+        for (let item of [&quot;alarmSoundType&quot;, &quot;calendar.prefs.alarm.sound.play&quot;]) {</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+            document.getElementById(item).disabled = !alarmsPlaySoundPref.value;</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+        }</span>
<a href="#l2.99"></a><span id="l2.99"> </span>
<a href="#l2.100"></a><span id="l2.100" class="difflineminus">-        for (let item of items) {</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-            item.disabled = !alarmsPlaySoundPref.value;</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+        for (let item of [&quot;alarmSoundFileField&quot;, &quot;calendar.prefs.alarm.sound.browse&quot;]) {</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineplus">+            document.getElementById(item).disabled = alarmsSoundType.value != 1;</span>
<a href="#l2.104"></a><span id="l2.104">         }</span>
<a href="#l2.105"></a><span id="l2.105">     }</span>
<a href="#l2.106"></a><span id="l2.106"> };</span>
<a href="#l2.107"></a><span id="l2.107"> </span>
<a href="#l2.108"></a><span id="l2.108"> Preferences.get(&quot;calendar.alarms.playsound&quot;).on(&quot;change&quot;, gAlarmsPane.alarmsPlaySoundPrefChanged);</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+Preferences.get(&quot;calendar.alarms.soundType&quot;).on(&quot;change&quot;, gAlarmsPane.alarmsPlaySoundPrefChanged);</span>
<a href="#l2.110"></a><span id="l2.110"> Preferences.get(&quot;calendar.alarms.soundURL&quot;).on(&quot;change&quot;, gAlarmsPane.readSoundLocation);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/src/calAlarmMonitor.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/src/calAlarmMonitor.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -92,17 +92,22 @@ calAlarmMonitor.prototype = {</span>
<a href="#l3.4"></a><span id="l3.4">             } else {</span>
<a href="#l3.5"></a><span id="l3.5">                 // Otherwise increase the counter</span>
<a href="#l3.6"></a><span id="l3.6">                 this.mAlarmSoundCount++;</span>
<a href="#l3.7"></a><span id="l3.7">             }</span>
<a href="#l3.8"></a><span id="l3.8"> </span>
<a href="#l3.9"></a><span id="l3.9">             if (maxAlarmSoundCount &gt; this.mAlarmSoundCount) {</span>
<a href="#l3.10"></a><span id="l3.10">                 // Only ring the alarm sound if we haven't hit the max count.</span>
<a href="#l3.11"></a><span id="l3.11">                 try {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                    let soundURL = Services.prefs.getStringPref(&quot;calendar.alarms.soundURL&quot;, null);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+                    let soundURL;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+                    if (Services.prefs.getIntPref(&quot;calendar.alarms.soundType&quot;, 0) == 0) {</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+                        soundURL = &quot;chrome://calendar/content/sound.wav&quot;;</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+                    } else {</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+                        soundURL = Services.prefs.getStringPref(&quot;calendar.alarms.soundURL&quot;, null);</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+                    }</span>
<a href="#l3.19"></a><span id="l3.19">                     if (soundURL &amp;&amp; soundURL.length &gt; 0) {</span>
<a href="#l3.20"></a><span id="l3.20">                         soundURL = Services.io.newURI(soundURL);</span>
<a href="#l3.21"></a><span id="l3.21">                         this.mSound.play(soundURL);</span>
<a href="#l3.22"></a><span id="l3.22">                     } else {</span>
<a href="#l3.23"></a><span id="l3.23">                         this.mSound.beep();</span>
<a href="#l3.24"></a><span id="l3.24">                     }</span>
<a href="#l3.25"></a><span id="l3.25">                 } catch (exc) {</span>
<a href="#l3.26"></a><span id="l3.26">                     cal.ERROR(&quot;Error playing alarm sound: &quot; + exc);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/lightning/content/lightning.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/lightning/content/lightning.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -33,16 +33,17 @@ pref(&quot;calendar.events.defaultTransparenc</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5"> // number of days in &quot;Soon&quot; section</span>
<a href="#l4.6"></a><span id="l4.6"> pref(&quot;calendar.agendaListbox.soondays&quot;, 5);</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> // alarm settings</span>
<a href="#l4.9"></a><span id="l4.9"> pref(&quot;calendar.alarms.show&quot;, true);</span>
<a href="#l4.10"></a><span id="l4.10"> pref(&quot;calendar.alarms.showmissed&quot;, true);</span>
<a href="#l4.11"></a><span id="l4.11"> pref(&quot;calendar.alarms.playsound&quot;, true);</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+pref(&quot;calendar.alarms.soundType&quot;, 0);</span>
<a href="#l4.13"></a><span id="l4.13"> pref(&quot;calendar.alarms.soundURL&quot;, &quot;chrome://calendar/content/sound.wav&quot;);</span>
<a href="#l4.14"></a><span id="l4.14"> pref(&quot;calendar.alarms.defaultsnoozelength&quot;, 5);</span>
<a href="#l4.15"></a><span id="l4.15"> pref(&quot;calendar.alarms.indicator.show&quot;, true);</span>
<a href="#l4.16"></a><span id="l4.16"> pref(&quot;calendar.alarms.indicator.totaltime&quot;, 3600);</span>
<a href="#l4.17"></a><span id="l4.17"> </span>
<a href="#l4.18"></a><span id="l4.18"> // default alarm settings for new event</span>
<a href="#l4.19"></a><span id="l4.19"> pref(&quot;calendar.alarms.onforevents&quot;, 0);</span>
<a href="#l4.20"></a><span id="l4.20"> pref(&quot;calendar.alarms.eventalarmlen&quot;, 15);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-preferences.xul</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-preferences.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -28,19 +28,16 @@</span>
<a href="#l5.4"></a><span id="l5.4"> &lt;?xml-stylesheet href=&quot;chrome://lightning/skin/lightning.css&quot;?&gt;</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6"> &lt;overlay xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l5.7"></a><span id="l5.7">          xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8">     &lt;prefpane id=&quot;paneLightning&quot;</span>
<a href="#l5.9"></a><span id="l5.9">               flex=&quot;1&quot;</span>
<a href="#l5.10"></a><span id="l5.10">               insertbefore=&quot;paneAdvanced&quot;</span>
<a href="#l5.11"></a><span id="l5.11">               label=&quot;&amp;lightning.preferencesLabel;&quot;&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        &lt;stringbundle id=&quot;bundleCalendarPreferences&quot;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-                      src=&quot;chrome://calendar/locale/calendar.properties&quot;/&gt;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-</span>
<a href="#l5.15"></a><span id="l5.15">         &lt;tabbox id=&quot;calPreferencesTabbox&quot;</span>
<a href="#l5.16"></a><span id="l5.16">                 flex=&quot;1&quot;&gt;</span>
<a href="#l5.17"></a><span id="l5.17">             &lt;tabs&gt;</span>
<a href="#l5.18"></a><span id="l5.18">                 &lt;tab id=&quot;calPreferencesTabGeneral&quot;</span>
<a href="#l5.19"></a><span id="l5.19">                      label=&quot;&amp;paneGeneral.title;&quot;/&gt;</span>
<a href="#l5.20"></a><span id="l5.20">                 &lt;tab id=&quot;calPreferencesTabAlarms&quot;</span>
<a href="#l5.21"></a><span id="l5.21">                      label=&quot;&amp;paneAlarms.title;&quot;/&gt;</span>
<a href="#l5.22"></a><span id="l5.22">                 &lt;tab id=&quot;calPreferencesTabCategories&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/locales/en-US/chrome/calendar/calendar.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/locales/en-US/chrome/calendar/calendar.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -277,17 +277,16 @@ filepickerTitleImport=Import</span>
<a href="#l6.4"></a><span id="l6.4"> filepickerTitleExport=Export</span>
<a href="#l6.5"></a><span id="l6.5"> </span>
<a href="#l6.6"></a><span id="l6.6"> # Filters for export/import/open file picker.  %1$S will be replaced with</span>
<a href="#l6.7"></a><span id="l6.7"> # wildmat used to filter files by extension, such as (*.html; *.htm).</span>
<a href="#l6.8"></a><span id="l6.8"> filterIcs=iCalendar (%1$S)</span>
<a href="#l6.9"></a><span id="l6.9"> filterXml=XML Document (%1$S)</span>
<a href="#l6.10"></a><span id="l6.10"> filterHtml=Web Page (%1$S)</span>
<a href="#l6.11"></a><span id="l6.11"> filterOutlookCsv=Outlook Comma Separated Values (%1$S)</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-filterWav=Waveform Audio (%1$S)</span>
<a href="#l6.13"></a><span id="l6.13"> </span>
<a href="#l6.14"></a><span id="l6.14"> # Remote calendar errors</span>
<a href="#l6.15"></a><span id="l6.15"> genericErrorTitle=An error has occurred</span>
<a href="#l6.16"></a><span id="l6.16"> httpPutError=Publishing the calendar file failed.\nStatus code: %1$S: %2$S</span>
<a href="#l6.17"></a><span id="l6.17"> otherPutError=Publishing the calendar file failed.\nStatus code: 0x%1$S</span>
<a href="#l6.18"></a><span id="l6.18"> </span>
<a href="#l6.19"></a><span id="l6.19"> # LOCALIZATION NOTE (readOnlyMode):</span>
<a href="#l6.20"></a><span id="l6.20"> # used for an message like 'There has been an error reading data for calendar: Home. It has been...'</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/locales/en-US/chrome/calendar/preferences/alarms.dtd</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -7,16 +7,18 @@</span>
<a href="#l7.4"></a><span id="l7.4">    - your editor isn't using UTF-8 encoding and may munge up the document!</span>
<a href="#l7.5"></a><span id="l7.5">   --&gt;</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7"> &lt;!ENTITY pref.alarmgoesoff.label &quot;When a Reminder is Due:&quot;&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> &lt;!ENTITY pref.playasound &quot;Play a sound&quot;&gt;</span>
<a href="#l7.9"></a><span id="l7.9"> &lt;!ENTITY pref.calendar.alarms.playsound.accessKey &quot;s&quot;&gt;</span>
<a href="#l7.10"></a><span id="l7.10"> &lt;!ENTITY pref.calendar.alarms.sound.useDefault.label &quot;Use default sound&quot;&gt;</span>
<a href="#l7.11"></a><span id="l7.11"> &lt;!ENTITY pref.calendar.alarms.sound.useDefault.accessKey &quot;d&quot;&gt;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+&lt;!ENTITY pref.calendar.alarms.sound.useCustom.label &quot;Use the following sound file&quot;&gt;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+&lt;!ENTITY pref.calendar.alarms.sound.useCustom.accessKey &quot;U&quot;&gt;</span>
<a href="#l7.14"></a><span id="l7.14"> &lt;!ENTITY pref.calendar.alarms.sound.browse.label &quot;Browse…&quot;&gt;</span>
<a href="#l7.15"></a><span id="l7.15"> &lt;!ENTITY pref.calendar.alarms.sound.browse.accessKey &quot;B&quot;&gt;</span>
<a href="#l7.16"></a><span id="l7.16"> &lt;!ENTITY pref.calendar.alarms.sound.play.label &quot;Play&quot;&gt;</span>
<a href="#l7.17"></a><span id="l7.17"> &lt;!ENTITY pref.calendar.alarms.sound.play.accessKey &quot;P&quot;&gt;</span>
<a href="#l7.18"></a><span id="l7.18"> &lt;!ENTITY pref.showalarmbox &quot;Show the reminder dialog&quot;&gt;</span>
<a href="#l7.19"></a><span id="l7.19"> &lt;!ENTITY pref.calendar.alarms.showAlarmBox.accessKey &quot;x&quot;&gt;</span>
<a href="#l7.20"></a><span id="l7.20"> &lt;!ENTITY pref.missedalarms2 &quot;Show missed reminders for writable calendars&quot;&gt;</span>
<a href="#l7.21"></a><span id="l7.21"> &lt;!ENTITY pref.calendar.alarms.missedAlarms.accessKey &quot;m&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/preferences/chat.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/preferences/chat.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -148,26 +148,18 @@ var gChatPane = {</span>
<a href="#l8.4"></a><span id="l8.4">     let localFile = this.convertURLToLocalFile(</span>
<a href="#l8.5"></a><span id="l8.5">       document.getElementById(&quot;chatSoundUrlLocation&quot;).value);</span>
<a href="#l8.6"></a><span id="l8.6">     if (localFile)</span>
<a href="#l8.7"></a><span id="l8.7">       fp.displayDirectory = localFile.parent;</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9">     // XXX todo, persist the last sound directory and pass it in</span>
<a href="#l8.10"></a><span id="l8.10">     fp.init(window, document.getElementById(&quot;bundlePreferences&quot;)</span>
<a href="#l8.11"></a><span id="l8.11">                             .getString(&quot;soundFilePickerTitle&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-    // On Mac, allow AIFF and CAF files too</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-    let bundlePrefs = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-    let soundFilesText = bundlePrefs.getString(&quot;soundFilesDescription&quot;);</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-    if (AppConstants.platform == &quot;macosx&quot;)</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-      fp.appendFilter(soundFilesText, &quot;*.wav; *.aif; *.aiff; *.caf&quot;);</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-    else if (AppConstants.platform == &quot;linux&quot;)</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-      fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-    else</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-      fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+    fp.appendFilters(Ci.nsIFilePicker.filterAudio);</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+    fp.appendFilters(Ci.nsIFilePicker.filterAll);</span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25">     fp.open(rv =&gt; {</span>
<a href="#l8.26"></a><span id="l8.26">       if (rv != nsIFilePicker.returnOK) {</span>
<a href="#l8.27"></a><span id="l8.27">         return;</span>
<a href="#l8.28"></a><span id="l8.28">       }</span>
<a href="#l8.29"></a><span id="l8.29"> </span>
<a href="#l8.30"></a><span id="l8.30">       // convert the nsIFile into a nsIFile url</span>
<a href="#l8.31"></a><span id="l8.31">       Preferences.get(&quot;mail.chat.play_sound.url&quot;).value = fp.fileURL.spec;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -132,26 +132,18 @@ var gGeneralPane = {</span>
<a href="#l9.4"></a><span id="l9.4">     // if we already have a sound file, then use the path for that sound file</span>
<a href="#l9.5"></a><span id="l9.5">     // as the initial path in the dialog.</span>
<a href="#l9.6"></a><span id="l9.6">     var localFile = this.convertURLToLocalFile(document.getElementById(&quot;soundUrlLocation&quot;).value);</span>
<a href="#l9.7"></a><span id="l9.7">     if (localFile)</span>
<a href="#l9.8"></a><span id="l9.8">       fp.displayDirectory = localFile.parent;</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10">     // XXX todo, persist the last sound directory and pass it in</span>
<a href="#l9.11"></a><span id="l9.11">     fp.init(window, document.getElementById(&quot;bundlePreferences&quot;).getString(&quot;soundFilePickerTitle&quot;), nsIFilePicker.modeOpen);</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-    // On Mac, allow AIFF and CAF files too</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-    var bundlePrefs = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-    var soundFilesText = bundlePrefs.getString(&quot;soundFilesDescription&quot;);</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-    if (AppConstants.platform == &quot;macosx&quot;)</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-      fp.appendFilter(soundFilesText, &quot;*.wav; *.aif; *.aiff; *.caf; *.mp3&quot;);</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-    else if (AppConstants.platform == &quot;linux&quot;)</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-      fp.appendFilter(soundFilesText, &quot;*.wav; *.ogg&quot;);</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">-    else</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-      fp.appendFilter(soundFilesText, &quot;*.wav&quot;);</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+    fp.appendFilters(Ci.nsIFilePicker.filterAudio);</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+    fp.appendFilters(Ci.nsIFilePicker.filterAll);</span>
<a href="#l9.24"></a><span id="l9.24"> </span>
<a href="#l9.25"></a><span id="l9.25">     fp.open(rv =&gt; {</span>
<a href="#l9.26"></a><span id="l9.26">       if (rv != nsIFilePicker.returnOK || !fp.file) {</span>
<a href="#l9.27"></a><span id="l9.27">         return;</span>
<a href="#l9.28"></a><span id="l9.28">       }</span>
<a href="#l9.29"></a><span id="l9.29">       // convert the nsIFile into a nsIFile url</span>
<a href="#l9.30"></a><span id="l9.30">       Preferences.get(&quot;mail.biff.play_sound.url&quot;).value = fp.fileURL.spec;</span>
<a href="#l9.31"></a><span id="l9.31">       this.readSoundLocation(); // XXX We shouldn't have to be doing this by hand</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/preferences/preferences.properties</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/preferences/preferences.properties</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -49,17 +49,16 @@ typeDetailsWithTypeOrExt=(%1$S)</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5"> # LOCALIZATION NOTE (typeDetailsWithTypeAndExt):</span>
<a href="#l10.6"></a><span id="l10.6"> # %1$S = type (for example &quot;application/pdf&quot;)</span>
<a href="#l10.7"></a><span id="l10.7"> # %2$S = extensions (for example &quot;.pdf, .pdfx&quot;)</span>
<a href="#l10.8"></a><span id="l10.8"> typeDetailsWithTypeAndExt=(%1$S: %2$S)</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10"> #### Sound Notifications</span>
<a href="#l10.11"></a><span id="l10.11"> soundFilePickerTitle=Choose Sound</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-soundFilesDescription=Sound Files</span>
<a href="#l10.13"></a><span id="l10.13"> </span>
<a href="#l10.14"></a><span id="l10.14"> #### Attachment Reminder</span>
<a href="#l10.15"></a><span id="l10.15"> attachmentReminderNewDialogTitle=New Keyword</span>
<a href="#l10.16"></a><span id="l10.16"> attachmentReminderNewText=Keyword:</span>
<a href="#l10.17"></a><span id="l10.17"> attachmentReminderEditDialogTitle=Edit Keyword</span>
<a href="#l10.18"></a><span id="l10.18"> attachmentReminderEditText=Keyword:</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20"> #### Remote content</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

