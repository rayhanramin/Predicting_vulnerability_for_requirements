<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 24448:16a4b760e352c04120cb741dd203051451f00c78</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 16a4b760e352c04120cb741dd203051451f00c78" />
<meta property="og:url" content="/comm-central/rev/16a4b760e352c04120cb741dd203051451f00c78" />
<meta property="og:description" content="Bug 1481326 - fix some clang-cl warnings and allow others. rs=bustage-fix" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 16a4b760e352c04120cb741dd203051451f00c78 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/16a4b760e352c04120cb741dd203051451f00c78">shortlog</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/16a4b760e352c04120cb741dd203051451f00c78">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78">files</a> |
changeset |
<a href="/comm-central/raw-rev/16a4b760e352c04120cb741dd203051451f00c78">raw</a>  | <a href="/comm-central/archive/16a4b760e352c04120cb741dd203051451f00c78.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1481326">Bug 1481326</a> - fix some clang-cl warnings and allow others. rs=bustage-fix
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#114;&#103;&#32;&#75;&#32;&#60;&#106;&#111;&#114;&#103;&#107;&#64;&#106;&#111;&#114;&#103;&#107;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 07 Aug 2018 09:47:31 +0200</td></tr>

<tr>
 <td>changeset 24448</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/16a4b760e352c04120cb741dd203051451f00c78">16a4b760e352c04120cb741dd203051451f00c78</a></td>
</tr>



<tr>
<td>parent 24447</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/8bb5aae0f741091bb00c83828b22a2c934635e83">8bb5aae0f741091bb00c83828b22a2c934635e83</a>
</td>
</tr>

<tr>
<td>child 24449</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/f67c130b8d329df8c79c9ca35b5f2ae3822a9776">f67c130b8d329df8c79c9ca35b5f2ae3822a9776</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=16a4b760e352c04120cb741dd203051451f00c78">14708</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 07 Aug 2018 07:49:20 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@16a4b760e352 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=16a4b760e352c04120cb741dd203051451f00c78">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=16a4b760e352c04120cb741dd203051451f00c78&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=16a4b760e352c04120cb741dd203051451f00c78&newProject=comm-central&newRevision=6013dd4ea2e53c4daa00aa3c87c2b0b92f62b951&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=16a4b760e352c04120cb741dd203051451f00c78&newProject=comm-central&newRevision=6013dd4ea2e53c4daa00aa3c87c2b0b92f62b951&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=16a4b760e352c04120cb741dd203051451f00c78&newProject=comm-central&newRevision=6013dd4ea2e53c4daa00aa3c87c2b0b92f62b951&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bustage-fix%29&revcount=50">bustage-fix</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1481326">1481326</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1481326">Bug 1481326</a> - fix some clang-cl warnings and allow others. rs=bustage-fix</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/db/mork/src/moz.build">db/mork/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/db/mork/src/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/db/mork/src/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/db/mork/src/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/db/mork/src/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/db/mork/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/build/nsMailComps.cpp">mail/components/build/nsMailComps.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mail/components/build/nsMailComps.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mail/components/build/nsMailComps.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/build/nsMailComps.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/build/nsMailComps.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/build/nsMailComps.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/moz.build">mail/components/migration/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.cpp">mail/components/migration/src/nsOEProfileMigrator.cpp</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.h">mail/components/migration/src/nsOEProfileMigrator.h</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.h">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.h">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/migration/src/nsOEProfileMigrator.h">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/moz.build">mail/components/search/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/wsenable/moz.build">mail/components/search/wsenable/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/wsenable/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/wsenable/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/wsenable/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/wsenable/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/search/wsenable/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/moz.build">mail/components/shell/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/nsMailWinIntegration.cpp">mail/components/shell/nsMailWinIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/nsMailWinIntegration.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/nsMailWinIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/nsMailWinIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/nsMailWinIntegration.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mail/components/shell/nsMailWinIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">mailnews/addrbook/src/nsAbOutlookDirFactory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">mailnews/addrbook/src/nsAbOutlookDirectory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbOutlookDirectory.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbWinHelper.cpp">mailnews/addrbook/src/nsAbWinHelper.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbWinHelper.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbWinHelper.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbWinHelper.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbWinHelper.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsAbWinHelper.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsMapiAddressBook.cpp">mailnews/addrbook/src/nsMapiAddressBook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsMapiAddressBook.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsMapiAddressBook.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsMapiAddressBook.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsMapiAddressBook.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsMapiAddressBook.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsWabAddressBook.cpp">mailnews/addrbook/src/nsWabAddressBook.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsWabAddressBook.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsWabAddressBook.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsWabAddressBook.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsWabAddressBook.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/addrbook/src/nsWabAddressBook.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.cpp">mailnews/base/src/nsMessengerWinIntegration.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.h">mailnews/base/src/nsMessengerWinIntegration.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.h">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.h">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.h">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.h">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMessengerWinIntegration.h">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMsgSearchDBView.cpp">mailnews/base/src/nsMsgSearchDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMsgSearchDBView.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMsgSearchDBView.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMsgSearchDBView.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMsgSearchDBView.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/base/src/nsMsgSearchDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/compose/src/moz.build">mailnews/compose/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/compose/src/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/compose/src/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/compose/src/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/compose/src/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/compose/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/imap/src/nsImapUtils.cpp">mailnews/imap/src/nsImapUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/imap/src/nsImapUtils.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/imap/src/nsImapUtils.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/imap/src/nsImapUtils.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/imap/src/nsImapUtils.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/imap/src/nsImapUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiApi.cpp">mailnews/import/outlook/src/MapiApi.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiApi.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiApi.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiApi.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiApi.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiApi.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiMessage.cpp">mailnews/import/outlook/src/MapiMessage.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiMessage.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiMessage.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiMessage.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiMessage.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/MapiMessage.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/moz.build">mailnews/import/outlook/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookCompose.cpp">mailnews/import/outlook/src/nsOutlookCompose.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookCompose.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookCompose.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookCompose.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookCompose.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookCompose.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookMail.cpp">mailnews/import/outlook/src/nsOutlookMail.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookMail.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookMail.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookMail.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookMail.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/outlook/src/nsOutlookMail.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/moz.build">mailnews/import/winlivemail/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/nsWMImport.cpp">mailnews/import/winlivemail/nsWMImport.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/nsWMImport.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/nsWMImport.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/nsWMImport.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/nsWMImport.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/import/winlivemail/nsWMImport.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapiDll/moz.build">mailnews/mapi/mapiDll/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapiDll/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapiDll/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapiDll/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapiDll/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapiDll/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/build/moz.build">mailnews/mapi/mapihook/build/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/build/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/build/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/build/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/build/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/build/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/moz.build">mailnews/mapi/mapihook/src/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/moz.build">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/moz.build">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/moz.build">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/moz.build">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.cpp">mailnews/mapi/mapihook/src/msgMapiMain.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.cpp">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.cpp">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.cpp">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.cpp">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.h">mailnews/mapi/mapihook/src/msgMapiMain.h</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.h">file</a> |
<a href="/comm-central/annotate/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.h">annotate</a> |
<a href="/comm-central/diff/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.h">diff</a> |
<a href="/comm-central/comparison/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.h">comparison</a> |
<a href="/comm-central/log/16a4b760e352c04120cb741dd203051451f00c78/mailnews/mapi/mapihook/src/msgMapiMain.h">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/db/mork/src/moz.build</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/db/mork/src/moz.build</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -48,8 +48,10 @@ SOURCES += [</span>
<a href="#l1.4"></a><span id="l1.4">     'orkinHeap.cpp',</span>
<a href="#l1.5"></a><span id="l1.5"> ]</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l1.8"></a><span id="l1.8">     SOURCES += ['morkSearchRowCursor.cpp']</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> FINAL_LIBRARY = 'mork'</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/components/build/nsMailComps.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/components/build/nsMailComps.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -12,19 +12,16 @@</span>
<a href="#l2.4"></a><span id="l2.4"> using namespace mozilla::mail;</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> NS_GENERIC_FACTORY_CONSTRUCTOR(DirectoryProvider)</span>
<a href="#l2.7"></a><span id="l2.7"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsProfileMigrator)</span>
<a href="#l2.8"></a><span id="l2.8"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsSeamonkeyProfileMigrator)</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10"> #ifdef XP_WIN32</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-#include &quot;nsOEProfileMigrator.h&quot;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-NS_GENERIC_FACTORY_CONSTRUCTOR(nsOEProfileMigrator)</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-</span>
<a href="#l2.15"></a><span id="l2.15"> #include &quot;nsOutlookProfileMigrator.h&quot;</span>
<a href="#l2.16"></a><span id="l2.16"> NS_GENERIC_FACTORY_CONSTRUCTOR(nsOutlookProfileMigrator)</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18"> #include &quot;nsMailWinIntegration.h&quot;</span>
<a href="#l2.19"></a><span id="l2.19"> NS_GENERIC_FACTORY_CONSTRUCTOR_INIT(nsWindowsShellService, Init)</span>
<a href="#l2.20"></a><span id="l2.20"> #endif</span>
<a href="#l2.21"></a><span id="l2.21"> </span>
<a href="#l2.22"></a><span id="l2.22"> #ifdef MOZ_WIDGET_GTK</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/components/migration/src/moz.build</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/components/migration/src/moz.build</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -7,17 +7,16 @@ SOURCES += [</span>
<a href="#l3.4"></a><span id="l3.4">     'nsMailProfileMigratorUtils.cpp',</span>
<a href="#l3.5"></a><span id="l3.5">     'nsNetscapeProfileMigratorBase.cpp',</span>
<a href="#l3.6"></a><span id="l3.6">     'nsProfileMigrator.cpp',</span>
<a href="#l3.7"></a><span id="l3.7">     'nsSeamonkeyProfileMigrator.cpp',</span>
<a href="#l3.8"></a><span id="l3.8"> ]</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> if CONFIG['OS_ARCH'] == 'WINNT':</span>
<a href="#l3.11"></a><span id="l3.11">     SOURCES += [</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        'nsOEProfileMigrator.cpp',</span>
<a href="#l3.13"></a><span id="l3.13">         'nsOutlookProfileMigrator.cpp',</span>
<a href="#l3.14"></a><span id="l3.14">         'nsProfileMigratorBase.cpp',</span>
<a href="#l3.15"></a><span id="l3.15">     ]</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17"> if CONFIG['MOZ_WIDGET_TOOLKIT'] == 'cocoa':</span>
<a href="#l3.18"></a><span id="l3.18">     SOURCES += [</span>
<a href="#l3.19"></a><span id="l3.19">         'nsProfileMigratorBase.cpp',</span>
<a href="#l3.20"></a><span id="l3.20">     ]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/mail/components/migration/src/nsOEProfileMigrator.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,136 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">-</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineminus">-#include &quot;nsMailProfileMigratorUtils.h&quot;</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineminus">-#include &quot;nsDirectoryServiceDefs.h&quot;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-#include &quot;nsIObserverService.h&quot;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-#include &quot;nsIServiceManager.h&quot;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-#include &quot;nsISupportsPrimitives.h&quot;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-#include &quot;nsOEProfileMigrator.h&quot;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-#include &quot;nsIProfileMigrator.h&quot;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-#include &quot;nsIImportSettings.h&quot;</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-#include &quot;nsIFile.h&quot;</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-#include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-NS_IMPL_ISUPPORTS(nsOEProfileMigrator, nsIMailProfileMigrator, nsITimerCallback)</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-nsOEProfileMigrator::nsOEProfileMigrator()</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-{</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineminus">-  mProcessingMailFolders = false;</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-  // get the import service</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-  mImportModule = do_CreateInstance(&quot;@mozilla.org/import/import-oe;1&quot;);</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-}</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-nsOEProfileMigrator::~nsOEProfileMigrator()</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-{</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-}</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-nsresult nsOEProfileMigrator::ContinueImport()</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-{</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-  return Notify(nullptr);</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineminus">-}</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-///////////////////////////////////////////////////////////////////////////////</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineminus">-// nsITimerCallback</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-nsOEProfileMigrator::Notify(nsITimer *timer)</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-{</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-  int32_t progress;</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-  mGenericImporter-&gt;GetProgress(&amp;progress);</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-  nsAutoString index;</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-  index.AppendInt( progress );</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_PROGRESS, index.get());</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-  if (progress == 100) // are we done yet?</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-  {</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-    if (mProcessingMailFolders)</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-      return FinishCopyingMailFolders();</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineminus">-    else</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-      return FinishCopyingAddressBookData();</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-  }</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineminus">-  else</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineminus">-  {</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-    // fire a timer to handle the next one.</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineminus">-    mFileIOTimer = do_CreateInstance(&quot;@mozilla.org/timer;1&quot;);</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineminus">-    if (mFileIOTimer)</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineminus">-      mFileIOTimer-&gt;InitWithCallback(static_cast&lt;nsITimerCallback *&gt;(this), 100, nsITimer::TYPE_ONE_SHOT);</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineminus">-  }</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineminus">-  return NS_OK;</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-}</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineminus">-</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineminus">-///////////////////////////////////////////////////////////////////////////////</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineminus">-// nsIMailProfileMigrator</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineminus">-nsOEProfileMigrator::Migrate(uint16_t aItems, nsIProfileStartup* aStartup, const char16_t* aProfile)</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineminus">-{</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineminus">-  nsresult rv = NS_OK;</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineminus">-</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineminus">-  if (aStartup)</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineminus">-  {</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineminus">-    rv = aStartup-&gt;DoStartup();</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineminus">-    NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineminus">-  }</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineminus">-</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-  NOTIFY_OBSERVERS(MIGRATION_STARTED, nullptr);</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineminus">-  rv = ImportSettings(mImportModule);</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-  // now import address books</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineminus">-  // this routine will asynchronously import address book data and it will then kick off</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineminus">-  // the final migration step, copying the mail folders over.</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineminus">-  rv = ImportAddressBook(mImportModule);</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineminus">-</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineminus">-  // don't broadcast an on end migration here. We aren't done until our asynch import process says we are done.</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineminus">-  return rv;</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineminus">-}</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineminus">-</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineminus">-nsOEProfileMigrator::GetMigrateData(const char16_t* aProfile,</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineminus">-                                           bool aReplace,</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineminus">-                                           uint16_t* aResult)</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineminus">-{</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineminus">-  // There's no harm in assuming everything is available.</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineminus">-  *aResult = nsIMailProfileMigrator::ACCOUNT_SETTINGS | nsIMailProfileMigrator::ADDRESSBOOK_DATA |</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineminus">-             nsIMailProfileMigrator::MAILDATA;</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineminus">-  return NS_OK;</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-}</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineminus">-nsOEProfileMigrator::GetSourceExists(bool* aResult)</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineminus">-{</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineminus">-  *aResult = false;</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineminus">-</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineminus">-  nsCOMPtr&lt;nsISupports&gt; supports;</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineminus">-  mImportModule-&gt;GetImportInterface(NS_IMPORT_SETTINGS_STR, getter_AddRefs(supports));</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineminus">-  nsCOMPtr&lt;nsIImportSettings&gt; importSettings = do_QueryInterface(supports);</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineminus">-</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineminus">-  if (importSettings)</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineminus">-  {</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineminus">-    nsString description;</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-    nsCOMPtr&lt;nsIFile&gt; location;</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-    importSettings-&gt;AutoLocate(getter_Copies(description), getter_AddRefs(location), aResult);</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineminus">-  }</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineminus">-  return NS_OK;</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineminus">-}</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineminus">-nsOEProfileMigrator::GetSourceHasMultipleProfiles(bool* aResult)</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineminus">-{</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineminus">-  *aResult = false;</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineminus">-  return NS_OK;</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineminus">-}</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineminus">-</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineminus">-NS_IMETHODIMP</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineminus">-nsOEProfileMigrator::GetSourceProfiles(nsIArray** aResult)</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineminus">-{</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineminus">-  *aResult = nullptr;</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineminus">-  return NS_OK;</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineminus">-}</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/mail/components/migration/src/nsOEProfileMigrator.h</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,32 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">-</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineminus">-#ifndef oeprofilemigrator___h___</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineminus">-#define oeprofilemigrator___h___</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-#include &quot;nsIMailProfileMigrator.h&quot;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-#include &quot;nsITimer.h&quot;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-#include &quot;nsProfileMigratorBase.h&quot;</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">-class nsIFile;</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-class nsIPrefBranch;</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-class nsIPrefService;</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-class nsOEProfileMigrator : public nsIMailProfileMigrator,</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-                            public nsITimerCallback,</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-                            public nsProfileMigratorBase</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineminus">-{</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">-public:</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineminus">-  NS_DECL_NSIMAILPROFILEMIGRATOR</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineminus">-  NS_DECL_ISUPPORTS</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineminus">-  NS_DECL_NSITIMERCALLBACK</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineminus">-  nsOEProfileMigrator();</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-  virtual nsresult ContinueImport();</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-private:</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-  virtual ~nsOEProfileMigrator();</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-};</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-#endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/components/search/moz.build</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/components/search/moz.build</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -14,8 +14,11 @@ elif CONFIG['MOZ_WIDGET_TOOLKIT'] == 'wi</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5"> DIRS += ['public']</span>
<a href="#l6.6"></a><span id="l6.6"> </span>
<a href="#l6.7"></a><span id="l6.7"> EXTRA_PP_JS_MODULES += [</span>
<a href="#l6.8"></a><span id="l6.8">     'SearchIntegration.js',</span>
<a href="#l6.9"></a><span id="l6.9"> ]</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11"> JAR_MANIFESTS += ['jar.mn']</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/components/search/wsenable/moz.build</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/components/search/wsenable/moz.build</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -13,8 +13,12 @@ OS_LIBS += [</span>
<a href="#l7.4"></a><span id="l7.4">     'ole32',</span>
<a href="#l7.5"></a><span id="l7.5">     'shell32',</span>
<a href="#l7.6"></a><span id="l7.6"> ]</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8"> RCINCLUDE = 'WSEnable.rc'</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10"> # This isn't XPCOM code, but it wants to use STL so disable STL wrappers</span>
<a href="#l7.11"></a><span id="l7.11"> DisableStlWrapping()</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/components/shell/moz.build</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/components/shell/moz.build</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -28,8 +28,11 @@ if CONFIG['MOZ_WIDGET_TOOLKIT'] == 'coco</span>
<a href="#l8.4"></a><span id="l8.4"> EXTRA_COMPONENTS += [</span>
<a href="#l8.5"></a><span id="l8.5">     'nsSetDefaultMail.js',</span>
<a href="#l8.6"></a><span id="l8.6">     'shell.manifest',</span>
<a href="#l8.7"></a><span id="l8.7"> ]</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9"> FINAL_LIBRARY = 'mailcomps'</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11"> CXXFLAGS += CONFIG['TK_CFLAGS']</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/components/shell/nsMailWinIntegration.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/components/shell/nsMailWinIntegration.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -97,24 +97,16 @@ static SETTING gNewsSettings[] = {</span>
<a href="#l9.4"></a><span id="l9.4">    // Protocol Handler Class - for Vista and above</span>
<a href="#l9.5"></a><span id="l9.5">   { MAKE_KEY_NAME1(CLS_NEWSURL, SOP), &quot;&quot;, VAL_MAIL_OPEN, APP_PATH_SUBSTITUTION },</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">   // Protocol Handlers</span>
<a href="#l9.8"></a><span id="l9.8">   { MAKE_KEY_NAME1(&quot;news&quot;, SOP), &quot;&quot;, VAL_MAIL_OPEN, APP_PATH_SUBSTITUTION },</span>
<a href="#l9.9"></a><span id="l9.9">   { MAKE_KEY_NAME1(&quot;nntp&quot;, SOP), &quot;&quot;, VAL_MAIL_OPEN, APP_PATH_SUBSTITUTION },</span>
<a href="#l9.10"></a><span id="l9.10"> };</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-static SETTING gFeedSettings[] = {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-   // Protocol Handler Class - for Vista and above</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-  { MAKE_KEY_NAME1(CLS_FEEDURL, SOP), &quot;&quot;, VAL_MAIL_OPEN, APP_PATH_SUBSTITUTION },</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-  // Protocol Handlers</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-  { MAKE_KEY_NAME1(&quot;feed&quot;, SOP), &quot;&quot;, VAL_MAIL_OPEN, APP_PATH_SUBSTITUTION },</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-};</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-</span>
<a href="#l9.20"></a><span id="l9.20"> nsresult</span>
<a href="#l9.21"></a><span id="l9.21"> GetHelperPath(nsAutoString&amp; aPath)</span>
<a href="#l9.22"></a><span id="l9.22"> {</span>
<a href="#l9.23"></a><span id="l9.23">   nsresult rv;</span>
<a href="#l9.24"></a><span id="l9.24">   nsCOMPtr&lt;nsIProperties&gt; directoryService =</span>
<a href="#l9.25"></a><span id="l9.25">     do_GetService(NS_DIRECTORY_SERVICE_CONTRACTID, &amp;rv);</span>
<a href="#l9.26"></a><span id="l9.26">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l9.27"></a><span id="l9.27"> </span>
<a href="#l9.28"></a><span id="l9.28" class="difflineat">@@ -205,17 +197,16 @@ nsWindowsShellService::IsDefaultClient(b</span>
<a href="#l9.29"></a><span id="l9.29">     // indicate that this app is the default.</span>
<a href="#l9.30"></a><span id="l9.30">     if (*aIsDefaultClient)</span>
<a href="#l9.31"></a><span id="l9.31">       IsDefaultClientVista(nsIShellService::NEWS, aIsDefaultClient);</span>
<a href="#l9.32"></a><span id="l9.32">   }</span>
<a href="#l9.33"></a><span id="l9.33">   // RSS / feed protocol shell integration is not working so return true</span>
<a href="#l9.34"></a><span id="l9.34">   // until it is fixed (bug 445823).</span>
<a href="#l9.35"></a><span id="l9.35">   if (aApps &amp; nsIShellService::RSS)</span>
<a href="#l9.36"></a><span id="l9.36">     *aIsDefaultClient &amp;= true;</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-//    *aIsDefaultClient &amp;= TestForDefault(gFeedSettings, sizeof(gFeedSettings)/sizeof(SETTING));</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39">   return NS_OK;</span>
<a href="#l9.40"></a><span id="l9.40"> }</span>
<a href="#l9.41"></a><span id="l9.41"> </span>
<a href="#l9.42"></a><span id="l9.42"> NS_IMETHODIMP</span>
<a href="#l9.43"></a><span id="l9.43"> nsWindowsShellService::SetDefaultClient(bool aForAllUsers, uint16_t aApps)</span>
<a href="#l9.44"></a><span id="l9.44"> {</span>
<a href="#l9.45"></a><span id="l9.45">   nsAutoString appHelperPath;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbOutlookDirFactory.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -9,21 +9,16 @@</span>
<a href="#l10.4"></a><span id="l10.4"> #include &quot;nsEnumeratorUtils.h&quot;</span>
<a href="#l10.5"></a><span id="l10.5"> #include &quot;nsServiceManagerUtils.h&quot;</span>
<a href="#l10.6"></a><span id="l10.6"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l10.7"></a><span id="l10.7"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l10.8"></a><span id="l10.8"> #include &quot;nsArrayEnumerator.h&quot;</span>
<a href="#l10.9"></a><span id="l10.9"> #include &quot;nsAbBaseCID.h&quot;</span>
<a href="#l10.10"></a><span id="l10.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-static mozilla::LazyLogModule gAbOutlookDirFactoryLog(&quot;AbOutlookDirFactory&quot;);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-#define PRINTF(args) MOZ_LOG(gAbOutlookDirFactoryLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-</span>
<a href="#l10.17"></a><span id="l10.17"> NS_IMPL_ISUPPORTS(nsAbOutlookDirFactory, nsIAbDirFactory)</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19"> nsAbOutlookDirFactory::nsAbOutlookDirFactory(void)</span>
<a href="#l10.20"></a><span id="l10.20"> {</span>
<a href="#l10.21"></a><span id="l10.21"> }</span>
<a href="#l10.22"></a><span id="l10.22"> </span>
<a href="#l10.23"></a><span id="l10.23"> nsAbOutlookDirFactory::~nsAbOutlookDirFactory(void)</span>
<a href="#l10.24"></a><span id="l10.24"> {</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineat">@@ -46,17 +41,16 @@ nsAbOutlookDirFactory::GetDirectories(co</span>
<a href="#l10.26"></a><span id="l10.26">   nsAbWinType abType = getAbWinType(kOutlookDirectoryScheme,</span>
<a href="#l10.27"></a><span id="l10.27">                                     nsCString(aURI).get(), stub, entry);</span>
<a href="#l10.28"></a><span id="l10.28"> </span>
<a href="#l10.29"></a><span id="l10.29">   if (abType == nsAbWinType_Unknown) {</span>
<a href="#l10.30"></a><span id="l10.30">     return NS_ERROR_FAILURE;</span>
<a href="#l10.31"></a><span id="l10.31">   }</span>
<a href="#l10.32"></a><span id="l10.32">   nsAbWinHelperGuard mapiAddBook(abType);</span>
<a href="#l10.33"></a><span id="l10.33">   nsMapiEntryArray folders;</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-  ULONG nbFolders = 0;</span>
<a href="#l10.35"></a><span id="l10.35">   nsCOMPtr&lt;nsIMutableArray&gt; directories(do_CreateInstance(NS_ARRAY_CONTRACTID));</span>
<a href="#l10.36"></a><span id="l10.36">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l10.37"></a><span id="l10.37">   if (!mapiAddBook-&gt;IsOK() || !mapiAddBook-&gt;GetFolders(folders)) {</span>
<a href="#l10.38"></a><span id="l10.38">     return NS_ERROR_FAILURE;</span>
<a href="#l10.39"></a><span id="l10.39">   }</span>
<a href="#l10.40"></a><span id="l10.40"> </span>
<a href="#l10.41"></a><span id="l10.41">   nsCOMPtr&lt;nsIAbManager&gt; abManager(do_GetService(NS_ABMANAGER_CONTRACTID, &amp;rv));</span>
<a href="#l10.42"></a><span id="l10.42">   NS_ENSURE_SUCCESS(rv, rv);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbOutlookDirectory.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbOutlookDirectory.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -259,17 +259,17 @@ static nsresult ExtractCardEntry(nsIAbCa</span>
<a href="#l11.4"></a><span id="l11.4"> static nsresult ExtractDirectoryEntry(nsIAbDirectory *aDirectory, nsCString&amp; aEntry)</span>
<a href="#l11.5"></a><span id="l11.5"> {</span>
<a href="#l11.6"></a><span id="l11.6">   aEntry.Truncate();</span>
<a href="#l11.7"></a><span id="l11.7">   nsCString uri;</span>
<a href="#l11.8"></a><span id="l11.8">   nsresult rv = aDirectory-&gt;GetURI(uri);</span>
<a href="#l11.9"></a><span id="l11.9">   NS_ENSURE_SUCCESS(rv, rv);</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">   nsAutoCString stub;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-  nsAbWinType objType = getAbWinType(kOutlookDirectoryScheme, uri.get(), stub, aEntry);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+  getAbWinType(kOutlookDirectoryScheme, uri.get(), stub, aEntry);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">   return NS_OK;</span>
<a href="#l11.16"></a><span id="l11.16"> }</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18"> NS_IMETHODIMP nsAbOutlookDirectory::DeleteCards(nsIArray *aCardList)</span>
<a href="#l11.19"></a><span id="l11.19"> {</span>
<a href="#l11.20"></a><span id="l11.20">     if (mIsQueryURI) { return NS_ERROR_NOT_IMPLEMENTED ; }</span>
<a href="#l11.21"></a><span id="l11.21">     if (!aCardList) { return NS_ERROR_NULL_POINTER ; }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbWinHelper.cpp</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbWinHelper.cpp</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -67,22 +67,16 @@ nsMapiEntry::~nsMapiEntry(void)</span>
<a href="#l12.4"></a><span id="l12.4"> }</span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6"> void nsMapiEntry::Assign(ULONG aByteCount, LPENTRYID aEntryId)</span>
<a href="#l12.7"></a><span id="l12.7"> {</span>
<a href="#l12.8"></a><span id="l12.8">     assignEntryID(mEntryId, aEntryId, aByteCount) ;</span>
<a href="#l12.9"></a><span id="l12.9">     mByteCount = aByteCount ;</span>
<a href="#l12.10"></a><span id="l12.10"> }</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-static char UnsignedToChar(unsigned char aUnsigned)</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-{</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-    if (aUnsigned &lt; 0xA) { return '0' + aUnsigned ; }</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-    return 'A' + aUnsigned - 0xA ;</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-}</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-</span>
<a href="#l12.18"></a><span id="l12.18"> static char kBase64Encoding[] = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.&quot; ;</span>
<a href="#l12.19"></a><span id="l12.19"> static const int kARank = 0 ;</span>
<a href="#l12.20"></a><span id="l12.20"> static const int kaRank = 26 ;</span>
<a href="#l12.21"></a><span id="l12.21"> static const int k0Rank = 52 ;</span>
<a href="#l12.22"></a><span id="l12.22"> static const unsigned char kMinusRank = 62 ;</span>
<a href="#l12.23"></a><span id="l12.23"> static const unsigned char kDotRank = 63 ;</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25"> static void UnsignedToBase64(unsigned char *&amp; aUnsigned,</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineat">@@ -108,22 +102,16 @@ static void UnsignedToBase64(unsigned ch</span>
<a href="#l12.27"></a><span id="l12.27">             }</span>
<a href="#l12.28"></a><span id="l12.28">         }</span>
<a href="#l12.29"></a><span id="l12.29">         else {</span>
<a href="#l12.30"></a><span id="l12.30">             aString.Append(kBase64Encoding[remain0]) ;</span>
<a href="#l12.31"></a><span id="l12.31">         }</span>
<a href="#l12.32"></a><span id="l12.32">     }</span>
<a href="#l12.33"></a><span id="l12.33"> }</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35" class="difflineminus">-static unsigned char CharToUnsigned(char aChar)</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineminus">-{</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-    if (aChar &gt;= '0' &amp;&amp; aChar &lt;= '9') { return static_cast&lt;unsigned char&gt;(aChar) - '0' ; }</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineminus">-    return static_cast&lt;unsigned char&gt;(aChar) - 'A' + 0xA ;</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineminus">-}</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineminus">-</span>
<a href="#l12.41"></a><span id="l12.41"> // This function must return the rank in kBase64Encoding of the</span>
<a href="#l12.42"></a><span id="l12.42"> // character provided.</span>
<a href="#l12.43"></a><span id="l12.43"> static unsigned char Base64To6Bits(char aBase64)</span>
<a href="#l12.44"></a><span id="l12.44"> {</span>
<a href="#l12.45"></a><span id="l12.45">     if (aBase64 &gt;= 'A' &amp;&amp; aBase64 &lt;= 'Z') {</span>
<a href="#l12.46"></a><span id="l12.46">         return static_cast&lt;unsigned char&gt;(aBase64 - 'A' + kARank) ;</span>
<a href="#l12.47"></a><span id="l12.47">     }</span>
<a href="#l12.48"></a><span id="l12.48">     if (aBase64 &gt;= 'a' &amp;&amp; aBase64 &lt;= 'z') {</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineat">@@ -956,17 +944,16 @@ nsAbWinHelperGuard::~nsAbWinHelperGuard(</span>
<a href="#l12.50"></a><span id="l12.50"> </span>
<a href="#l12.51"></a><span id="l12.51"> const char *kOutlookDirectoryScheme = &quot;moz-aboutlookdirectory://&quot; ;</span>
<a href="#l12.52"></a><span id="l12.52"> const int kOutlookDirSchemeLength = 21 ;</span>
<a href="#l12.53"></a><span id="l12.53"> const char *kOutlookStub = &quot;op/&quot; ;</span>
<a href="#l12.54"></a><span id="l12.54"> const int kOutlookStubLength = 3 ;</span>
<a href="#l12.55"></a><span id="l12.55"> const char *kOutlookExpStub = &quot;oe/&quot; ;</span>
<a href="#l12.56"></a><span id="l12.56"> const int kOutlookExpStubLength = 3 ;</span>
<a href="#l12.57"></a><span id="l12.57"> const char *kOutlookCardScheme = &quot;moz-aboutlookcard://&quot; ;</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineminus">-const int kOutlookCardSchemeLength = 16 ;</span>
<a href="#l12.59"></a><span id="l12.59"> </span>
<a href="#l12.60"></a><span id="l12.60"> nsAbWinType getAbWinType(const char *aScheme, const char *aUri, nsCString&amp; aStub, nsCString&amp; aEntry)</span>
<a href="#l12.61"></a><span id="l12.61"> {</span>
<a href="#l12.62"></a><span id="l12.62">     aStub.Truncate() ;</span>
<a href="#l12.63"></a><span id="l12.63">     aEntry.Truncate() ;</span>
<a href="#l12.64"></a><span id="l12.64">     uint32_t schemeLength = strlen(aScheme) ;</span>
<a href="#l12.65"></a><span id="l12.65"> </span>
<a href="#l12.66"></a><span id="l12.66">     if (strncmp(aUri, aScheme, schemeLength) == 0) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mailnews/addrbook/src/nsMapiAddressBook.cpp</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsMapiAddressBook.cpp</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -1,15 +1,16 @@</span>
<a href="#l13.4"></a><span id="l13.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l13.5"></a><span id="l13.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l13.6"></a><span id="l13.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l13.7"></a><span id="l13.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l13.8"></a><span id="l13.8"> #include &quot;nsMapiAddressBook.h&quot;</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+#include &quot;mozilla/DebugOnly.h&quot;</span>
<a href="#l13.12"></a><span id="l13.12"> </span>
<a href="#l13.13"></a><span id="l13.13"> static mozilla::LazyLogModule gMapiAddressBookLog(&quot;MAPIAddressBook&quot;);</span>
<a href="#l13.14"></a><span id="l13.14"> </span>
<a href="#l13.15"></a><span id="l13.15"> #define PRINTF(args) MOZ_LOG(gMapiAddressBookLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l13.16"></a><span id="l13.16"> </span>
<a href="#l13.17"></a><span id="l13.17"> using namespace mozilla;</span>
<a href="#l13.18"></a><span id="l13.18"> </span>
<a href="#l13.19"></a><span id="l13.19"> HMODULE nsMapiAddressBook::mLibrary = NULL ;</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineat">@@ -96,17 +97,17 @@ void nsMapiAddressBook::FreeMapiLibrary(</span>
<a href="#l13.21"></a><span id="l13.21">             mLibrary = NULL ;</span>
<a href="#l13.22"></a><span id="l13.22">         }</span>
<a href="#l13.23"></a><span id="l13.23">     }</span>
<a href="#l13.24"></a><span id="l13.24"> }</span>
<a href="#l13.25"></a><span id="l13.25"> </span>
<a href="#l13.26"></a><span id="l13.26"> nsMapiAddressBook::nsMapiAddressBook(void)</span>
<a href="#l13.27"></a><span id="l13.27"> : nsAbWinHelper()</span>
<a href="#l13.28"></a><span id="l13.28"> {</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineminus">-    BOOL result = Initialize() ;</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+    mozilla::DebugOnly&lt;BOOL&gt; result = Initialize() ;</span>
<a href="#l13.31"></a><span id="l13.31"> </span>
<a href="#l13.32"></a><span id="l13.32">     NS_ASSERTION(result == TRUE, &quot;Couldn't initialize Mapi Helper&quot;) ;</span>
<a href="#l13.33"></a><span id="l13.33">     MOZ_COUNT_CTOR(nsMapiAddressBook) ;</span>
<a href="#l13.34"></a><span id="l13.34"> }</span>
<a href="#l13.35"></a><span id="l13.35"> </span>
<a href="#l13.36"></a><span id="l13.36"> nsMapiAddressBook::~nsMapiAddressBook(void)</span>
<a href="#l13.37"></a><span id="l13.37"> {</span>
<a href="#l13.38"></a><span id="l13.38">     MutexAutoLock guard(*mMutex) ;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mailnews/addrbook/src/nsWabAddressBook.cpp</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsWabAddressBook.cpp</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l14.4"></a><span id="l14.4"> /* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l14.5"></a><span id="l14.5"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l14.6"></a><span id="l14.6">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l14.7"></a><span id="l14.7">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l14.8"></a><span id="l14.8"> </span>
<a href="#l14.9"></a><span id="l14.9"> #include &lt;tchar.h&gt;</span>
<a href="#l14.10"></a><span id="l14.10"> #include &quot;nsWabAddressBook.h&quot;</span>
<a href="#l14.11"></a><span id="l14.11"> #include &quot;mozilla/Logging.h&quot;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+#include &quot;mozilla/DebugOnly.h&quot;</span>
<a href="#l14.13"></a><span id="l14.13"> </span>
<a href="#l14.14"></a><span id="l14.14"> using namespace mozilla;</span>
<a href="#l14.15"></a><span id="l14.15"> </span>
<a href="#l14.16"></a><span id="l14.16"> static LazyLogModule gWabAddressBookLog(&quot;WABAddressBook&quot;);</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18"> #define PRINTF(args) MOZ_LOG(gWabAddressBookLog, mozilla::LogLevel::Debug, args)</span>
<a href="#l14.19"></a><span id="l14.19"> </span>
<a href="#l14.20"></a><span id="l14.20"> HMODULE nsWabAddressBook::mLibrary = NULL ;</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineat">@@ -76,17 +77,17 @@ void nsWabAddressBook::FreeWabLibrary(vo</span>
<a href="#l14.22"></a><span id="l14.22">             mLibrary = NULL ;</span>
<a href="#l14.23"></a><span id="l14.23">         }</span>
<a href="#l14.24"></a><span id="l14.24">     }</span>
<a href="#l14.25"></a><span id="l14.25"> }</span>
<a href="#l14.26"></a><span id="l14.26"> </span>
<a href="#l14.27"></a><span id="l14.27"> nsWabAddressBook::nsWabAddressBook(void)</span>
<a href="#l14.28"></a><span id="l14.28"> : nsAbWinHelper()</span>
<a href="#l14.29"></a><span id="l14.29"> {</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-    BOOL result = Initialize() ;</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+    mozilla::DebugOnly&lt;BOOL&gt; result = Initialize() ;</span>
<a href="#l14.32"></a><span id="l14.32"> </span>
<a href="#l14.33"></a><span id="l14.33">     NS_ASSERTION(result == TRUE, &quot;Couldn't initialize Wab Helper&quot;) ;</span>
<a href="#l14.34"></a><span id="l14.34">     MOZ_COUNT_CTOR(nsWabAddressBook) ;</span>
<a href="#l14.35"></a><span id="l14.35"> }</span>
<a href="#l14.36"></a><span id="l14.36"> </span>
<a href="#l14.37"></a><span id="l14.37"> nsWabAddressBook::~nsWabAddressBook(void)</span>
<a href="#l14.38"></a><span id="l14.38"> {</span>
<a href="#l14.39"></a><span id="l14.39">     MutexAutoLock guard(*mMutex) ;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerWinIntegration.cpp</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerWinIntegration.cpp</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -1,9 +1,9 @@</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineminus">-/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineplus">+/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */</span>
<a href="#l15.6"></a><span id="l15.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l15.7"></a><span id="l15.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l15.8"></a><span id="l15.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10"> #include &lt;windows.h&gt;</span>
<a href="#l15.11"></a><span id="l15.11"> #include &lt;shellapi.h&gt;</span>
<a href="#l15.12"></a><span id="l15.12"> </span>
<a href="#l15.13"></a><span id="l15.13"> #include &quot;nsMessengerWinIntegration.h&quot;</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineat">@@ -41,16 +41,17 @@</span>
<a href="#l15.15"></a><span id="l15.15"> #include &quot;nsISupportsPrimitives.h&quot;</span>
<a href="#l15.16"></a><span id="l15.16"> #include &quot;nsIInterfaceRequestorUtils.h&quot;</span>
<a href="#l15.17"></a><span id="l15.17"> #include &quot;nsIWeakReferenceUtils.h&quot;</span>
<a href="#l15.18"></a><span id="l15.18"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l15.19"></a><span id="l15.19"> #include &quot;nsNativeCharsetUtils.h&quot;</span>
<a href="#l15.20"></a><span id="l15.20"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l15.21"></a><span id="l15.21"> #include &quot;mozilla/LookAndFeel.h&quot;</span>
<a href="#l15.22"></a><span id="l15.22"> #include &quot;mozilla/Services.h&quot;</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineplus">+#include &quot;mozilla/DebugOnly.h&quot;</span>
<a href="#l15.24"></a><span id="l15.24"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l15.25"></a><span id="l15.25"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l15.26"></a><span id="l15.26"> </span>
<a href="#l15.27"></a><span id="l15.27"> #include &quot;nsToolkitCompsCID.h&quot;</span>
<a href="#l15.28"></a><span id="l15.28"> #include &lt;stdlib.h&gt;</span>
<a href="#l15.29"></a><span id="l15.29"> #define PROFILE_COMMANDLINE_ARG u&quot; -profile &quot;</span>
<a href="#l15.30"></a><span id="l15.30"> </span>
<a href="#l15.31"></a><span id="l15.31"> #define NOTIFICATIONCLASSNAME &quot;MailBiffNotificationMessageWindow&quot;</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineat">@@ -252,17 +253,17 @@ nsMessengerWinIntegration::nsMessengerWi</span>
<a href="#l15.33"></a><span id="l15.33"> nsMessengerWinIntegration::~nsMessengerWinIntegration()</span>
<a href="#l15.34"></a><span id="l15.34"> {</span>
<a href="#l15.35"></a><span id="l15.35">   if (mUnreadCountUpdateTimer) {</span>
<a href="#l15.36"></a><span id="l15.36">     mUnreadCountUpdateTimer-&gt;Cancel();</span>
<a href="#l15.37"></a><span id="l15.37">     mUnreadCountUpdateTimer = nullptr;</span>
<a href="#l15.38"></a><span id="l15.38">   }</span>
<a href="#l15.39"></a><span id="l15.39"> </span>
<a href="#l15.40"></a><span id="l15.40">   // one last attempt, update the registry</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineminus">-  nsresult rv = UpdateRegistryWithCurrent();</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineplus">+  mozilla::DebugOnly&lt;nsresult&gt; rv = UpdateRegistryWithCurrent();</span>
<a href="#l15.43"></a><span id="l15.43">   NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to update registry on shutdown&quot;);</span>
<a href="#l15.44"></a><span id="l15.44">   DestroyBiffIcon();</span>
<a href="#l15.45"></a><span id="l15.45"> }</span>
<a href="#l15.46"></a><span id="l15.46"> </span>
<a href="#l15.47"></a><span id="l15.47"> NS_IMPL_ADDREF(nsMessengerWinIntegration)</span>
<a href="#l15.48"></a><span id="l15.48"> NS_IMPL_RELEASE(nsMessengerWinIntegration)</span>
<a href="#l15.49"></a><span id="l15.49"> </span>
<a href="#l15.50"></a><span id="l15.50"> NS_INTERFACE_MAP_BEGIN(nsMessengerWinIntegration)</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineat">@@ -291,17 +292,17 @@ NOTIFYICONDATAW sBiffIconData = { (DWORD</span>
<a href="#l15.52"></a><span id="l15.52">                                   2,</span>
<a href="#l15.53"></a><span id="l15.53">                                   NIF_ICON | NIF_MESSAGE | NIF_TIP | NIF_INFO,</span>
<a href="#l15.54"></a><span id="l15.54">                                   WM_USER,</span>
<a href="#l15.55"></a><span id="l15.55">                                   0,</span>
<a href="#l15.56"></a><span id="l15.56">                                   L&quot;&quot;,</span>
<a href="#l15.57"></a><span id="l15.57">                                   0,</span>
<a href="#l15.58"></a><span id="l15.58">                                   0,</span>
<a href="#l15.59"></a><span id="l15.59">                                   L&quot;&quot;,</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineminus">-                                  30000,</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineplus">+                                  { 30000 },</span>
<a href="#l15.62"></a><span id="l15.62">                                   L&quot;&quot;,</span>
<a href="#l15.63"></a><span id="l15.63">                                   NIIF_USER | NIIF_NOSOUND };</span>
<a href="#l15.64"></a><span id="l15.64"> // allow for the null terminator</span>
<a href="#l15.65"></a><span id="l15.65"> static const uint32_t kMaxTooltipSize = sizeof(sBiffIconData.szTip) /</span>
<a href="#l15.66"></a><span id="l15.66">                                         sizeof(sBiffIconData.szTip[0]) - 1;</span>
<a href="#l15.67"></a><span id="l15.67"> static const uint32_t kMaxBalloonSize = sizeof(sBiffIconData.szInfo) /</span>
<a href="#l15.68"></a><span id="l15.68">                                         sizeof(sBiffIconData.szInfo[0]) - 1;</span>
<a href="#l15.69"></a><span id="l15.69"> static const uint32_t kMaxBalloonTitle = sizeof(sBiffIconData.szInfoTitle) /</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineat">@@ -585,17 +586,17 @@ nsresult nsMessengerWinIntegration::Aler</span>
<a href="#l15.71"></a><span id="l15.71"> }</span>
<a href="#l15.72"></a><span id="l15.72"> </span>
<a href="#l15.73"></a><span id="l15.73"> #ifdef MOZ_SUITE</span>
<a href="#l15.74"></a><span id="l15.74"> nsresult nsMessengerWinIntegration::AlertClickedSimple()</span>
<a href="#l15.75"></a><span id="l15.75"> {</span>
<a href="#l15.76"></a><span id="l15.76">   mSuppressBiffIcon = true;</span>
<a href="#l15.77"></a><span id="l15.77">   return NS_OK;</span>
<a href="#l15.78"></a><span id="l15.78"> }</span>
<a href="#l15.79"></a><span id="l15.79" class="difflineminus">-#endif MOZ_SUITE</span>
<a href="#l15.80"></a><span id="l15.80" class="difflineplus">+#endif</span>
<a href="#l15.81"></a><span id="l15.81"> </span>
<a href="#l15.82"></a><span id="l15.82"> NS_IMETHODIMP</span>
<a href="#l15.83"></a><span id="l15.83"> nsMessengerWinIntegration::Observe(nsISupports* aSubject, const char* aTopic, const char16_t* aData)</span>
<a href="#l15.84"></a><span id="l15.84"> {</span>
<a href="#l15.85"></a><span id="l15.85">   if (strcmp(aTopic, &quot;alertfinished&quot;) == 0)</span>
<a href="#l15.86"></a><span id="l15.86">       return AlertFinished();</span>
<a href="#l15.87"></a><span id="l15.87"> </span>
<a href="#l15.88"></a><span id="l15.88">   if (strcmp(aTopic, &quot;alertclickcallback&quot;) == 0)</span>
<a href="#l15.89"></a><span id="l15.89" class="difflineat">@@ -924,17 +925,17 @@ nsMessengerWinIntegration::OnItemIntProp</span>
<a href="#l15.90"></a><span id="l15.90"> }</span>
<a href="#l15.91"></a><span id="l15.91"> </span>
<a href="#l15.92"></a><span id="l15.92"> void</span>
<a href="#l15.93"></a><span id="l15.93"> nsMessengerWinIntegration::OnUnreadCountUpdateTimer(nsITimer *timer, void *osIntegration)</span>
<a href="#l15.94"></a><span id="l15.94"> {</span>
<a href="#l15.95"></a><span id="l15.95">   nsMessengerWinIntegration *winIntegration = (nsMessengerWinIntegration*)osIntegration;</span>
<a href="#l15.96"></a><span id="l15.96"> </span>
<a href="#l15.97"></a><span id="l15.97">   winIntegration-&gt;mUnreadTimerActive = false;</span>
<a href="#l15.98"></a><span id="l15.98" class="difflineminus">-  nsresult rv = winIntegration-&gt;UpdateUnreadCount();</span>
<a href="#l15.99"></a><span id="l15.99" class="difflineplus">+  mozilla::DebugOnly&lt;nsresult&gt; rv = winIntegration-&gt;UpdateUnreadCount();</span>
<a href="#l15.100"></a><span id="l15.100">   NS_ASSERTION(NS_SUCCEEDED(rv), &quot;updating unread count failed&quot;);</span>
<a href="#l15.101"></a><span id="l15.101"> }</span>
<a href="#l15.102"></a><span id="l15.102"> </span>
<a href="#l15.103"></a><span id="l15.103"> nsresult</span>
<a href="#l15.104"></a><span id="l15.104"> nsMessengerWinIntegration::RemoveCurrentFromRegistry()</span>
<a href="#l15.105"></a><span id="l15.105"> {</span>
<a href="#l15.106"></a><span id="l15.106">   // If Windows XP, open the registry and get rid of old account registry entries</span>
<a href="#l15.107"></a><span id="l15.107">   // If there is a email prefix, get it and use it to build the registry key.</span>
<a href="#l15.108"></a><span id="l15.108" class="difflineat">@@ -1011,19 +1012,19 @@ nsMessengerWinIntegration::UpdateRegistr</span>
<a href="#l15.109"></a><span id="l15.109">     if (!mEmailPrefix.IsEmpty()) {</span>
<a href="#l15.110"></a><span id="l15.110">       pBuffer.Assign(mEmailPrefix);</span>
<a href="#l15.111"></a><span id="l15.111">       pBuffer.Append(NS_ConvertASCIItoUTF16(mEmail));</span>
<a href="#l15.112"></a><span id="l15.112">     }</span>
<a href="#l15.113"></a><span id="l15.113">     else</span>
<a href="#l15.114"></a><span id="l15.114">       CopyASCIItoUTF16(mEmail, pBuffer);</span>
<a href="#l15.115"></a><span id="l15.115"> </span>
<a href="#l15.116"></a><span id="l15.116">     // Write the info into the registry</span>
<a href="#l15.117"></a><span id="l15.117" class="difflineminus">-    HRESULT hr = SHSetUnreadMailCountW(pBuffer.get(),</span>
<a href="#l15.118"></a><span id="l15.118" class="difflineminus">-                                       mCurrentUnreadCount,</span>
<a href="#l15.119"></a><span id="l15.119" class="difflineminus">-                                       commandLinerForAppLaunch.get());</span>
<a href="#l15.120"></a><span id="l15.120" class="difflineplus">+    SHSetUnreadMailCountW(pBuffer.get(),</span>
<a href="#l15.121"></a><span id="l15.121" class="difflineplus">+                          mCurrentUnreadCount,</span>
<a href="#l15.122"></a><span id="l15.122" class="difflineplus">+                          commandLinerForAppLaunch.get());</span>
<a href="#l15.123"></a><span id="l15.123">   }</span>
<a href="#l15.124"></a><span id="l15.124"> </span>
<a href="#l15.125"></a><span id="l15.125">   // do this last</span>
<a href="#l15.126"></a><span id="l15.126">   mLastUnreadCountWrittenToRegistry = mCurrentUnreadCount;</span>
<a href="#l15.127"></a><span id="l15.127"> </span>
<a href="#l15.128"></a><span id="l15.128">   return NS_OK;</span>
<a href="#l15.129"></a><span id="l15.129"> }</span>
<a href="#l15.130"></a><span id="l15.130"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mailnews/base/src/nsMessengerWinIntegration.h</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mailnews/base/src/nsMessengerWinIntegration.h</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -1,9 +1,9 @@</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineminus">-/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineplus">+/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 2 -*- */</span>
<a href="#l16.6"></a><span id="l16.6"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l16.7"></a><span id="l16.7">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l16.8"></a><span id="l16.8">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> #ifndef __nsMessengerWinIntegration_h</span>
<a href="#l16.11"></a><span id="l16.11"> #define __nsMessengerWinIntegration_h</span>
<a href="#l16.12"></a><span id="l16.12"> </span>
<a href="#l16.13"></a><span id="l16.13"> #include &lt;windows.h&gt;</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineat">@@ -55,17 +55,16 @@ private:</span>
<a href="#l16.15"></a><span id="l16.15">   void FillToolTipInfo();</span>
<a href="#l16.16"></a><span id="l16.16">   void GenericShellNotify(DWORD aMessage);</span>
<a href="#l16.17"></a><span id="l16.17">   void DestroyBiffIcon();</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19">   nsresult GetFirstFolderWithNewMail(nsACString&amp; aFolderURI);</span>
<a href="#l16.20"></a><span id="l16.20"> </span>
<a href="#l16.21"></a><span id="l16.21">   nsresult GetStringBundle(nsIStringBundle **aBundle);</span>
<a href="#l16.22"></a><span id="l16.22">   nsCOMPtr&lt;nsIMutableArray&gt; mFoldersWithNewMail;  // keep track of all the root folders with pending new mail</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-  uint32_t mCurrentBiffState;</span>
<a href="#l16.24"></a><span id="l16.24"> </span>
<a href="#l16.25"></a><span id="l16.25">   bool mBiffIconVisible;</span>
<a href="#l16.26"></a><span id="l16.26">   bool mBiffIconInitialized;</span>
<a href="#l16.27"></a><span id="l16.27">   bool mSuppressBiffIcon;</span>
<a href="#l16.28"></a><span id="l16.28">   bool mAlertInProgress;</span>
<a href="#l16.29"></a><span id="l16.29"> </span>
<a href="#l16.30"></a><span id="l16.30">   // &quot;might&quot; because we don't know until we check</span>
<a href="#l16.31"></a><span id="l16.31">   // what type of server is associated with the default account</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mailnews/base/src/nsMsgSearchDBView.cpp</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgSearchDBView.cpp</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -282,17 +282,17 @@ nsMsgSearchDBView::OnHdrDeleted(nsIMsgDB</span>
<a href="#l17.4"></a><span id="l17.4"> NS_IMETHODIMP</span>
<a href="#l17.5"></a><span id="l17.5"> nsMsgSearchDBView::OnHdrFlagsChanged(nsIMsgDBHdr *aHdrChanged,</span>
<a href="#l17.6"></a><span id="l17.6">                                      uint32_t aOldFlags,</span>
<a href="#l17.7"></a><span id="l17.7">                                      uint32_t aNewFlags,</span>
<a href="#l17.8"></a><span id="l17.8">                                      nsIDBChangeListener *aInstigator)</span>
<a href="#l17.9"></a><span id="l17.9"> {</span>
<a href="#l17.10"></a><span id="l17.10">   // Defer to base class if we're grouped or not threaded at all.</span>
<a href="#l17.11"></a><span id="l17.11">   if (m_viewFlags &amp; nsMsgViewFlagsType::kGroupBySort ||</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      !(m_viewFlags &amp;&amp; nsMsgViewFlagsType::kThreadedDisplay))</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      !(m_viewFlags &amp; nsMsgViewFlagsType::kThreadedDisplay))</span>
<a href="#l17.14"></a><span id="l17.14">   {</span>
<a href="#l17.15"></a><span id="l17.15">     return nsMsgGroupView::OnHdrFlagsChanged(aHdrChanged, aOldFlags,</span>
<a href="#l17.16"></a><span id="l17.16">                                              aNewFlags, aInstigator);</span>
<a href="#l17.17"></a><span id="l17.17">   }</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19">   nsCOMPtr &lt;nsIMsgThread&gt; thread;</span>
<a href="#l17.20"></a><span id="l17.20">   bool foundMessageId;</span>
<a href="#l17.21"></a><span id="l17.21">   // Check if the hdr that changed is in a xf thread, and if the read flag</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mailnews/compose/src/moz.build</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mailnews/compose/src/moz.build</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -52,8 +52,10 @@ EXTRA_COMPONENTS += [</span>
<a href="#l18.4"></a><span id="l18.4"> ]</span>
<a href="#l18.5"></a><span id="l18.5"> </span>
<a href="#l18.6"></a><span id="l18.6"> LOCAL_INCLUDES += [</span>
<a href="#l18.7"></a><span id="l18.7">   '/%s/dom/base' % CONFIG['mozreltopsrcdir'],</span>
<a href="#l18.8"></a><span id="l18.8"> ]</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10"> FINAL_LIBRARY = 'mail'</span>
<a href="#l18.11"></a><span id="l18.11"> </span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mailnews/imap/src/nsImapUtils.cpp</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mailnews/imap/src/nsImapUtils.cpp</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -170,17 +170,17 @@ NS_IMETHODIMP nsImapMailboxSpec::GetAllo</span>
<a href="#l19.4"></a><span id="l19.4"> NS_IMETHODIMP nsImapMailboxSpec::SetAllocatedPathName(const nsACString &amp;aAllocatedPathName)</span>
<a href="#l19.5"></a><span id="l19.5"> {</span>
<a href="#l19.6"></a><span id="l19.6">   mAllocatedPathName = aAllocatedPathName;</span>
<a href="#l19.7"></a><span id="l19.7">   return NS_OK;</span>
<a href="#l19.8"></a><span id="l19.8"> }</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10"> NS_IMETHODIMP nsImapMailboxSpec::GetUnicharPathName(nsAString &amp;aUnicharPathName)</span>
<a href="#l19.11"></a><span id="l19.11"> {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  aUnicharPathName = aUnicharPathName;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  aUnicharPathName = mUnicharPathName;</span>
<a href="#l19.14"></a><span id="l19.14">   return NS_OK;</span>
<a href="#l19.15"></a><span id="l19.15"> }</span>
<a href="#l19.16"></a><span id="l19.16"> </span>
<a href="#l19.17"></a><span id="l19.17"> NS_IMETHODIMP nsImapMailboxSpec::SetUnicharPathName(const nsAString &amp;aUnicharPathName)</span>
<a href="#l19.18"></a><span id="l19.18"> {</span>
<a href="#l19.19"></a><span id="l19.19">   mUnicharPathName = aUnicharPathName;</span>
<a href="#l19.20"></a><span id="l19.20">   return NS_OK;</span>
<a href="#l19.21"></a><span id="l19.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mailnews/import/outlook/src/MapiApi.cpp</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mailnews/import/outlook/src/MapiApi.cpp</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -1423,17 +1423,17 @@ void CMapiApi::ReportStringProp(const ch</span>
<a href="#l20.4"></a><span id="l20.4"> }</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6"> void CMapiApi::GetPropTagName(ULONG tag, nsCString&amp; s)</span>
<a href="#l20.7"></a><span id="l20.7"> {</span>
<a href="#l20.8"></a><span id="l20.8">   char numStr[256];</span>
<a href="#l20.9"></a><span id="l20.9">   PR_snprintf(numStr, 256, &quot;0x%lx, %ld&quot;, tag, tag);</span>
<a href="#l20.10"></a><span id="l20.10">   s = numStr;</span>
<a href="#l20.11"></a><span id="l20.11">   switch(tag) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-#include &quot;mapitagstrs.cpp&quot;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+#include &quot;MapiTagStrs.cpp&quot;</span>
<a href="#l20.14"></a><span id="l20.14">   }</span>
<a href="#l20.15"></a><span id="l20.15">   s += &quot;, data: &quot;;</span>
<a href="#l20.16"></a><span id="l20.16">   switch(PROP_TYPE(tag)) {</span>
<a href="#l20.17"></a><span id="l20.17">     case PT_UNSPECIFIED: s += &quot;PT_UNSPECIFIED&quot;; break;</span>
<a href="#l20.18"></a><span id="l20.18">     case PT_NULL: s += &quot;PT_NULL&quot;; break;</span>
<a href="#l20.19"></a><span id="l20.19">     case PT_I2: s += &quot;PT_I2&quot;; break;</span>
<a href="#l20.20"></a><span id="l20.20">     case PT_LONG: s += &quot;PT_LONG&quot;; break;</span>
<a href="#l20.21"></a><span id="l20.21">     case PT_R4: s += &quot;PT_R4&quot;; break;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineat">@@ -1723,39 +1723,37 @@ CMsgStore::CMsgStore(ULONG cbEid, LPENTR</span>
<a href="#l20.23"></a><span id="l20.23"> </span>
<a href="#l20.24"></a><span id="l20.24"> CMsgStore::~CMsgStore()</span>
<a href="#l20.25"></a><span id="l20.25"> {</span>
<a href="#l20.26"></a><span id="l20.26">   if (m_lpEid)</span>
<a href="#l20.27"></a><span id="l20.27">     delete m_lpEid;</span>
<a href="#l20.28"></a><span id="l20.28"> </span>
<a href="#l20.29"></a><span id="l20.29">   if (m_lpMdb) {</span>
<a href="#l20.30"></a><span id="l20.30">     ULONG flags = LOGOFF_NO_WAIT;</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-    HRESULT hr = m_lpMdb-&gt;StoreLogoff(&amp;flags);</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+    m_lpMdb-&gt;StoreLogoff(&amp;flags);</span>
<a href="#l20.33"></a><span id="l20.33">     m_lpMdb-&gt;Release();</span>
<a href="#l20.34"></a><span id="l20.34">     m_lpMdb = NULL;</span>
<a href="#l20.35"></a><span id="l20.35">   }</span>
<a href="#l20.36"></a><span id="l20.36"> }</span>
<a href="#l20.37"></a><span id="l20.37"> </span>
<a href="#l20.38"></a><span id="l20.38"> void CMsgStore::SetEntryID(ULONG cbEid, LPENTRYID lpEid)</span>
<a href="#l20.39"></a><span id="l20.39"> {</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-  HRESULT    hr;</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">-</span>
<a href="#l20.42"></a><span id="l20.42">   if (m_lpEid)</span>
<a href="#l20.43"></a><span id="l20.43">     delete m_lpEid;</span>
<a href="#l20.44"></a><span id="l20.44"> </span>
<a href="#l20.45"></a><span id="l20.45">   m_lpEid = NULL;</span>
<a href="#l20.46"></a><span id="l20.46">   if (cbEid) {</span>
<a href="#l20.47"></a><span id="l20.47">     m_lpEid = new BYTE[cbEid];</span>
<a href="#l20.48"></a><span id="l20.48">     memcpy(m_lpEid, lpEid, cbEid);</span>
<a href="#l20.49"></a><span id="l20.49">   }</span>
<a href="#l20.50"></a><span id="l20.50">   m_cbEid = cbEid;</span>
<a href="#l20.51"></a><span id="l20.51"> </span>
<a href="#l20.52"></a><span id="l20.52">   if (m_lpMdb) {</span>
<a href="#l20.53"></a><span id="l20.53">     ULONG flags = LOGOFF_NO_WAIT;</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineminus">-    hr = m_lpMdb-&gt;StoreLogoff(&amp;flags);</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineplus">+    m_lpMdb-&gt;StoreLogoff(&amp;flags);</span>
<a href="#l20.56"></a><span id="l20.56">     m_lpMdb-&gt;Release();</span>
<a href="#l20.57"></a><span id="l20.57">     m_lpMdb = NULL;</span>
<a href="#l20.58"></a><span id="l20.58">   }</span>
<a href="#l20.59"></a><span id="l20.59"> }</span>
<a href="#l20.60"></a><span id="l20.60"> </span>
<a href="#l20.61"></a><span id="l20.61"> BOOL CMsgStore::Open(LPMAPISESSION pSession, LPMDB *ppMdb)</span>
<a href="#l20.62"></a><span id="l20.62"> {</span>
<a href="#l20.63"></a><span id="l20.63">   if (m_lpMdb) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/import/outlook/src/MapiMessage.cpp</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/import/outlook/src/MapiMessage.cpp</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -833,17 +833,16 @@ bool CMapiMessage::GetTmpFile(/*out*/ ns</span>
<a href="#l21.4"></a><span id="l21.4">     return false;</span>
<a href="#l21.5"></a><span id="l21.5"> </span>
<a href="#l21.6"></a><span id="l21.6">   tmpFile.forget(aResult);</span>
<a href="#l21.7"></a><span id="l21.7">   return true;</span>
<a href="#l21.8"></a><span id="l21.8"> }</span>
<a href="#l21.9"></a><span id="l21.9"> </span>
<a href="#l21.10"></a><span id="l21.10"> bool CMapiMessage::CopyMsgAttachToFile(LPATTACH lpAttach, /*out*/ nsIFile **tmp_file)</span>
<a href="#l21.11"></a><span id="l21.11"> {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  bool bResult = true;</span>
<a href="#l21.13"></a><span id="l21.13">   LPMESSAGE  lpMsg;</span>
<a href="#l21.14"></a><span id="l21.14">   HRESULT hr = lpAttach-&gt;OpenProperty(PR_ATTACH_DATA_OBJ, &amp;IID_IMessage, 0, 0,</span>
<a href="#l21.15"></a><span id="l21.15">                                       reinterpret_cast&lt;LPUNKNOWN *&gt;(&amp;lpMsg));</span>
<a href="#l21.16"></a><span id="l21.16">   if (HR_FAILED(hr))</span>
<a href="#l21.17"></a><span id="l21.17">     return false;</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19">   if (!GetTmpFile(tmp_file))</span>
<a href="#l21.20"></a><span id="l21.20">     return false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/import/outlook/src/moz.build</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/import/outlook/src/moz.build</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -17,8 +17,10 @@ SOURCES += [</span>
<a href="#l22.4"></a><span id="l22.4"> ]</span>
<a href="#l22.5"></a><span id="l22.5"> </span>
<a href="#l22.6"></a><span id="l22.6"> FINAL_LIBRARY = 'import'</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8"> LOCAL_INCLUDES += [</span>
<a href="#l22.9"></a><span id="l22.9">     '../../src'</span>
<a href="#l22.10"></a><span id="l22.10"> ]</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookCompose.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookCompose.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -35,17 +35,16 @@</span>
<a href="#l23.4"></a><span id="l23.4"> </span>
<a href="#l23.5"></a><span id="l23.5"> #include &quot;nsAutoPtr.h&quot;</span>
<a href="#l23.6"></a><span id="l23.6"> #include &quot;nsIThread.h&quot;</span>
<a href="#l23.7"></a><span id="l23.7"> #include &quot;nsThreadUtils.h&quot;</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9"> #include &quot;nsMsgMessageFlags.h&quot;</span>
<a href="#l23.10"></a><span id="l23.10"> #include &quot;nsMsgLocalFolderHdrs.h&quot;</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-static NS_DEFINE_CID(kMsgSendCID, NS_MSGSEND_CID);</span>
<a href="#l23.13"></a><span id="l23.13"> static NS_DEFINE_CID(kMsgCompFieldsCID, NS_MSGCOMPFIELDS_CID);</span>
<a href="#l23.14"></a><span id="l23.14"> </span>
<a href="#l23.15"></a><span id="l23.15"> #ifdef IMPORT_DEBUG</span>
<a href="#l23.16"></a><span id="l23.16"> static const char *p_test_headers =</span>
<a href="#l23.17"></a><span id="l23.17"> &quot;Received: from netppl.invalid (IDENT:monitor@get.freebsd.because.microsoftsucks.invalid [209.3.31.115])\n\</span>
<a href="#l23.18"></a><span id="l23.18">  by mail4.sirius.invalid (8.9.1/8.9.1) with SMTP id PAA27232;\n\</span>
<a href="#l23.19"></a><span id="l23.19">  Mon, 17 May 1999 15:27:43 -0700 (PDT)\n\</span>
<a href="#l23.20"></a><span id="l23.20"> Message-ID: &lt;ikGD3jRTsKklU.Ggm2HmE2A1Jsqd0p@netppl.invalid&gt;\n\</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mailnews/import/outlook/src/nsOutlookMail.cpp</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mailnews/import/outlook/src/nsOutlookMail.cpp</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -11,17 +11,17 @@</span>
<a href="#l24.4"></a><span id="l24.4"> #include &quot;nscore.h&quot;</span>
<a href="#l24.5"></a><span id="l24.5"> #include &quot;nsMsgUtils.h&quot;</span>
<a href="#l24.6"></a><span id="l24.6"> #include &quot;nsIImportService.h&quot;</span>
<a href="#l24.7"></a><span id="l24.7"> #include &quot;nsIImportFieldMap.h&quot;</span>
<a href="#l24.8"></a><span id="l24.8"> #include &quot;nsIImportMailboxDescriptor.h&quot;</span>
<a href="#l24.9"></a><span id="l24.9"> #include &quot;nsIImportABDescriptor.h&quot;</span>
<a href="#l24.10"></a><span id="l24.10"> #include &quot;nsIMutableArray.h&quot;</span>
<a href="#l24.11"></a><span id="l24.11"> #include &quot;nsOutlookStringBundle.h&quot;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-#include &quot;nsABBaseCID.h&quot;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+#include &quot;nsAbBaseCID.h&quot;</span>
<a href="#l24.14"></a><span id="l24.14"> #include &quot;nsIAbCard.h&quot;</span>
<a href="#l24.15"></a><span id="l24.15"> #include &quot;mdb.h&quot;</span>
<a href="#l24.16"></a><span id="l24.16"> #include &quot;ImportDebug.h&quot;</span>
<a href="#l24.17"></a><span id="l24.17"> #include &quot;nsOutlookMail.h&quot;</span>
<a href="#l24.18"></a><span id="l24.18"> #include &quot;nsUnicharUtils.h&quot;</span>
<a href="#l24.19"></a><span id="l24.19"> #include &quot;nsIOutputStream.h&quot;</span>
<a href="#l24.20"></a><span id="l24.20"> #include &quot;nsIMsgPluggableStore.h&quot;</span>
<a href="#l24.21"></a><span id="l24.21"> #include &quot;nsIMsgHdr.h&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mailnews/import/winlivemail/moz.build</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mailnews/import/winlivemail/moz.build</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -6,8 +6,11 @@</span>
<a href="#l25.4"></a><span id="l25.4"> SOURCES += [</span>
<a href="#l25.5"></a><span id="l25.5">     'nsWMImport.cpp',</span>
<a href="#l25.6"></a><span id="l25.6">     'nsWMSettings.cpp',</span>
<a href="#l25.7"></a><span id="l25.7">     'nsWMStringBundle.cpp',</span>
<a href="#l25.8"></a><span id="l25.8">     'nsWMUtils.cpp',</span>
<a href="#l25.9"></a><span id="l25.9"> ]</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11"> FINAL_LIBRARY = 'import'</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mailnews/import/winlivemail/nsWMImport.cpp</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mailnews/import/winlivemail/nsWMImport.cpp</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -52,17 +52,16 @@ public:</span>
<a href="#l26.4"></a><span id="l26.4"> public:</span>
<a href="#l26.5"></a><span id="l26.5">   static void ReportSuccess(nsString&amp; name, int32_t count, nsString *pStream);</span>
<a href="#l26.6"></a><span id="l26.6">   static void ReportError(int32_t errorNum, nsString&amp; name, nsString *pStream);</span>
<a href="#l26.7"></a><span id="l26.7">   static void AddLinebreak(nsString *pStream);</span>
<a href="#l26.8"></a><span id="l26.8">   static void SetLogs(nsString&amp; success, nsString&amp; error, char16_t **pError, char16_t **pSuccess);</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10"> private:</span>
<a href="#l26.11"></a><span id="l26.11">   virtual ~ImportWMMailImpl();</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  uint32_t m_bytesDone;</span>
<a href="#l26.13"></a><span id="l26.13"> };</span>
<a href="#l26.14"></a><span id="l26.14"> </span>
<a href="#l26.15"></a><span id="l26.15"> nsWMImport::nsWMImport()</span>
<a href="#l26.16"></a><span id="l26.16"> {</span>
<a href="#l26.17"></a><span id="l26.17">   IMPORT_LOG0(&quot;nsWMImport Module Created\n&quot;);</span>
<a href="#l26.18"></a><span id="l26.18">   nsWMStringBundle::GetStringBundle();</span>
<a href="#l26.19"></a><span id="l26.19"> }</span>
<a href="#l26.20"></a><span id="l26.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mailnews/mapi/mapiDll/moz.build</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mailnews/mapi/mapiDll/moz.build</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -15,8 +15,11 @@ SOURCES += [</span>
<a href="#l27.4"></a><span id="l27.4"> OS_LIBS += [</span>
<a href="#l27.5"></a><span id="l27.5">     'ole32',</span>
<a href="#l27.6"></a><span id="l27.6"> ]</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8"> DEFINES['UNICODE'] = True</span>
<a href="#l27.9"></a><span id="l27.9"> DEFINES['_UNICODE'] = True</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11"> DEFFILE = SRCDIR + '/Mapi32.def'</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mailnews/mapi/mapihook/build/moz.build</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/build/moz.build</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -29,8 +29,11 @@ DEFFILE = SRCDIR + '/MapiProxy.def'</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5"> # The Windows MIDL code generator creates things like:</span>
<a href="#l28.6"></a><span id="l28.6"> #</span>
<a href="#l28.7"></a><span id="l28.7"> #   #endif !_MIDL_USE_GUIDDEF_</span>
<a href="#l28.8"></a><span id="l28.8"> #</span>
<a href="#l28.9"></a><span id="l28.9"> # which clang-cl complains about.  MSVC doesn't, so turn this warning off.</span>
<a href="#l28.10"></a><span id="l28.10"> if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l28.11"></a><span id="l28.11">     CFLAGS += ['-Wno-extra-tokens']</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineplus">+</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/moz.build</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/moz.build</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -16,8 +16,11 @@ SOURCES += [</span>
<a href="#l29.4"></a><span id="l29.4"> FINAL_LIBRARY = 'xul'</span>
<a href="#l29.5"></a><span id="l29.5"> </span>
<a href="#l29.6"></a><span id="l29.6"> OS_LIBS += [</span>
<a href="#l29.7"></a><span id="l29.7">     'ole32',</span>
<a href="#l29.8"></a><span id="l29.8"> ]</span>
<a href="#l29.9"></a><span id="l29.9"> </span>
<a href="#l29.10"></a><span id="l29.10"> DEFINES['UNICODE'] = True</span>
<a href="#l29.11"></a><span id="l29.11"> DEFINES['_UNICODE'] = True</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineplus">+</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+if CONFIG['CC_TYPE'] == 'clang-cl':</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineplus">+    AllowCompilerWarnings()  # workaround for bug 1090497 / bug 1481326</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiMain.cpp</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiMain.cpp</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -263,19 +263,17 @@ HRESULT nsMAPIConfiguration::GetMAPIErro</span>
<a href="#l30.4"></a><span id="l30.4"> </span>
<a href="#l30.5"></a><span id="l30.5">   return hr;</span>
<a href="#l30.6"></a><span id="l30.6"> }</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8"> </span>
<a href="#l30.9"></a><span id="l30.9"> nsMAPISession::nsMAPISession(uint32_t aHwnd, const char16_t *aUserName,</span>
<a href="#l30.10"></a><span id="l30.10">                              const char16_t *aPassword,</span>
<a href="#l30.11"></a><span id="l30.11">                              bool aForceDownLoad, const char *aKey)</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-: m_bIsForcedDownLoad(aForceDownLoad),</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineminus">-  m_hAppHandle(aHwnd),</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineminus">-  m_nShared(1),</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineplus">+: m_nShared(1),</span>
<a href="#l30.16"></a><span id="l30.16">   m_pIdKey(aKey)</span>
<a href="#l30.17"></a><span id="l30.17"> {</span>
<a href="#l30.18"></a><span id="l30.18">   m_listContext = NULL;</span>
<a href="#l30.19"></a><span id="l30.19">   m_pProfileName.Assign(aUserName);</span>
<a href="#l30.20"></a><span id="l30.20">   m_pPassword.Assign(aPassword);</span>
<a href="#l30.21"></a><span id="l30.21"> }</span>
<a href="#l30.22"></a><span id="l30.22"> </span>
<a href="#l30.23"></a><span id="l30.23"> nsMAPISession::~nsMAPISession()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mailnews/mapi/mapihook/src/msgMapiMain.h</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mailnews/mapi/mapihook/src/msgMapiMain.h</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -53,24 +53,20 @@ public :</span>
<a href="#l31.4"></a><span id="l31.4">   static HRESULT GetMAPIErrorFromNSError (nsresult res) ;</span>
<a href="#l31.5"></a><span id="l31.5"> };</span>
<a href="#l31.6"></a><span id="l31.6"> </span>
<a href="#l31.7"></a><span id="l31.7"> class nsMAPISession</span>
<a href="#l31.8"></a><span id="l31.8"> {</span>
<a href="#l31.9"></a><span id="l31.9">   friend class nsMAPIConfiguration;</span>
<a href="#l31.10"></a><span id="l31.10"> </span>
<a href="#l31.11"></a><span id="l31.11">   private :</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    bool     m_bIsForcedDownLoad;</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-    bool     m_bApp_or_Service;</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-    uint32_t m_hAppHandle;</span>
<a href="#l31.15"></a><span id="l31.15">     uint32_t m_nShared;</span>
<a href="#l31.16"></a><span id="l31.16">     nsCString m_pIdKey;</span>
<a href="#l31.17"></a><span id="l31.17">     nsString m_pProfileName;</span>
<a href="#l31.18"></a><span id="l31.18">     nsString m_pPassword;</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-    int32_t m_messageIndex;</span>
<a href="#l31.20"></a><span id="l31.20">     void   *m_listContext; // used by findNext</span>
<a href="#l31.21"></a><span id="l31.21"> </span>
<a href="#l31.22"></a><span id="l31.22">   public :</span>
<a href="#l31.23"></a><span id="l31.23">     nsMAPISession(uint32_t aHwnd, const char16_t *aUserName, \</span>
<a href="#l31.24"></a><span id="l31.24">                   const char16_t *aPassword, \</span>
<a href="#l31.25"></a><span id="l31.25">                   bool aForceDownLoad, const char *aKey);</span>
<a href="#l31.26"></a><span id="l31.26">     uint32_t IncrementSession();</span>
<a href="#l31.27"></a><span id="l31.27">     uint32_t DecrementSession();</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:32Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

