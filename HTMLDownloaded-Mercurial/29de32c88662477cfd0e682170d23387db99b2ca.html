<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 11434:29de32c88662477cfd0e682170d23387db99b2ca</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 29de32c88662477cfd0e682170d23387db99b2ca" />
<meta property="og:url" content="/comm-central/rev/29de32c88662477cfd0e682170d23387db99b2ca" />
<meta property="og:description" content="Bug 803835 - Part 2: Regression tests for quoted fields in CSV files. r=mconley." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 29de32c88662477cfd0e682170d23387db99b2ca 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/29de32c88662477cfd0e682170d23387db99b2ca">shortlog</a> |
<a href="/comm-central/log/29de32c88662477cfd0e682170d23387db99b2ca">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/29de32c88662477cfd0e682170d23387db99b2ca">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/29de32c88662477cfd0e682170d23387db99b2ca">files</a> |
changeset |
<a href="/comm-central/raw-rev/29de32c88662477cfd0e682170d23387db99b2ca">raw</a>  | <a href="/comm-central/archive/29de32c88662477cfd0e682170d23387db99b2ca.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=803835">Bug 803835</a> - Part 2: Regression tests for quoted fields in CSV files. r=mconley.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#114;&#107;&#32;&#66;&#97;&#110;&#110;&#101;&#114;&#32;&#60;&#109;&#98;&#97;&#110;&#110;&#101;&#114;&#64;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 02 Nov 2012 13:34:20 -0400</td></tr>

<tr>
 <td>changeset 11434</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/29de32c88662477cfd0e682170d23387db99b2ca">29de32c88662477cfd0e682170d23387db99b2ca</a></td>
</tr>



<tr>
<td>parent 11433</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/169d801ecfb5ed099116318ab329f7cf4898f283">169d801ecfb5ed099116318ab329f7cf4898f283</a>
</td>
</tr>

<tr>
<td>child 11435</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/22d170a632bee64938bf593c71cb3f3f507c3e11">22d170a632bee64938bf593c71cb3f3f507c3e11</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=29de32c88662477cfd0e682170d23387db99b2ca">8546</a></td></tr>
<tr><td>push user</td><td>mconley@mozilla.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 02 Nov 2012 17:34:50 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@29de32c88662 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=29de32c88662477cfd0e682170d23387db99b2ca">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=29de32c88662477cfd0e682170d23387db99b2ca&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=29de32c88662477cfd0e682170d23387db99b2ca&newProject=comm-central&newRevision=169d801ecfb5ed099116318ab329f7cf4898f283&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=29de32c88662477cfd0e682170d23387db99b2ca&newProject=comm-central&newRevision=169d801ecfb5ed099116318ab329f7cf4898f283&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=29de32c88662477cfd0e682170d23387db99b2ca&newProject=comm-central&newRevision=169d801ecfb5ed099116318ab329f7cf4898f283&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mconley%29&revcount=50">mconley</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=803835">803835</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=803835">Bug 803835</a> - Part 2: Regression tests for quoted fields in CSV files. r=mconley.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/addressbook.json">mailnews/import/test/unit/resources/addressbook.json</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/addressbook.json">file</a> |
<a href="/comm-central/annotate/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/addressbook.json">annotate</a> |
<a href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/addressbook.json">diff</a> |
<a href="/comm-central/comparison/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/addressbook.json">comparison</a> |
<a href="/comm-central/log/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/addressbook.json">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/quote.csv">mailnews/import/test/unit/resources/quote.csv</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/quote.csv">file</a> |
<a href="/comm-central/annotate/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/quote.csv">annotate</a> |
<a href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/quote.csv">diff</a> |
<a href="/comm-central/comparison/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/quote.csv">comparison</a> |
<a href="/comm-central/log/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/resources/quote.csv">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/test_csv_import_quote.js">mailnews/import/test/unit/test_csv_import_quote.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/test_csv_import_quote.js">file</a> |
<a href="/comm-central/annotate/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/test_csv_import_quote.js">annotate</a> |
<a href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/test_csv_import_quote.js">diff</a> |
<a href="/comm-central/comparison/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/test_csv_import_quote.js">comparison</a> |
<a href="/comm-central/log/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/test_csv_import_quote.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/xpcshell.ini">mailnews/import/test/unit/xpcshell.ini</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/xpcshell.ini">file</a> |
<a href="/comm-central/annotate/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/xpcshell.ini">annotate</a> |
<a href="/comm-central/diff/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/xpcshell.ini">diff</a> |
<a href="/comm-central/comparison/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/xpcshell.ini">comparison</a> |
<a href="/comm-central/log/29de32c88662477cfd0e682170d23387db99b2ca/mailnews/import/test/unit/xpcshell.ini">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/import/test/unit/resources/addressbook.json</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/import/test/unit/resources/addressbook.json</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -62,16 +62,24 @@</span>
<a href="#l1.4"></a><span id="l1.4">   ],</span>
<a href="#l1.5"></a><span id="l1.5">   &quot;shiftjis_csv&quot; :</span>
<a href="#l1.6"></a><span id="l1.6">   [</span>
<a href="#l1.7"></a><span id="l1.7">     {</span>
<a href="#l1.8"></a><span id="l1.8">       &quot;DisplayName&quot;      : &quot;名無しの権兵衛&quot;,</span>
<a href="#l1.9"></a><span id="l1.9">       &quot;PrimaryEmail&quot;     : &quot;名無しの権兵衛@host.invalid&quot;</span>
<a href="#l1.10"></a><span id="l1.10">     }</span>
<a href="#l1.11"></a><span id="l1.11">   ],</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+  &quot;quote_csv&quot; :</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  [</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    {</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+      &quot;DisplayName&quot;      : &quot;Acer America&quot;,</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+      &quot;Work Phone&quot;       : &quot;(800) 000-0000&quot;,</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+      &quot;Organization&quot;     : &quot;Acer America&quot;</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+    } </span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+  ],</span>
<a href="#l1.20"></a><span id="l1.20">   &quot;vcard_import&quot; :</span>
<a href="#l1.21"></a><span id="l1.21">   [</span>
<a href="#l1.22"></a><span id="l1.22">     {</span>
<a href="#l1.23"></a><span id="l1.23">       &quot;DisplayName&quot;      : &quot;John Doe&quot;,</span>
<a href="#l1.24"></a><span id="l1.24">       &quot;FirstName&quot;        : &quot;John&quot;,</span>
<a href="#l1.25"></a><span id="l1.25">       &quot;LastName&quot;         : &quot;Doe&quot;,</span>
<a href="#l1.26"></a><span id="l1.26">       &quot;PrimaryEmail&quot;     : &quot;john.doe@genericemail.com&quot;</span>
<a href="#l1.27"></a><span id="l1.27">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">new file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- /dev/null</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ b/mailnews/import/test/unit/resources/quote.csv</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -0,0 +1,2 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+First Name,Last Name,Display Name,Nickname,Primary Email,Secondary Email,Screen Name,Work Phone,Home Phone,Fax Number,Pager Number,Mobile Number,Home Address,Home Address 2,Home City,Home State,Home ZipCode,Home Country,Work Address,Work Address 2,Work City,Work State,Work ZipCode,Work Country,Job Title,Department,Organization,Web Page 1,Web Page 2,Birth Year,Birth Month,Birth Day,Custom 1,Custom 2,Custom 3,Custom 4,Notes</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+,,&quot;Acer America&quot;,,,,,&quot;(800) 000-0000&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,,,&quot;Acer America&quot;,,,,,,,,,,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/mailnews/import/test/unit/test_csv_import_quote.js</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,13 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+/**</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+ * Tests importing quoted csv address books.</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+ */</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+function run_test()</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+{</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+  // Due to the import code using nsIAbManager off the main thread, we need</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+  // to ensure that it is initialized before we start the main test.</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+  let abMgr = MailServices.ab;</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+  let file = do_get_file(&quot;resources/quote.csv&quot;);</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+  new AbImportHelper(file, &quot;csv&quot;, &quot;quote&quot;,</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+                     &quot;quote_csv&quot;).beginImport();</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/import/test/unit/xpcshell.ini</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/import/test/unit/xpcshell.ini</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1,16 +1,17 @@</span>
<a href="#l4.4"></a><span id="l4.4"> [DEFAULT]</span>
<a href="#l4.5"></a><span id="l4.5"> head = head_import.js</span>
<a href="#l4.6"></a><span id="l4.6"> tail = tail_import.js</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> [test_bug_263304.js]</span>
<a href="#l4.9"></a><span id="l4.9"> [test_bug_437556.js]</span>
<a href="#l4.10"></a><span id="l4.10"> [test_csv_GetSample.js]</span>
<a href="#l4.11"></a><span id="l4.11"> [test_csv_import.js]</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+[test_csv_import_quote.js]</span>
<a href="#l4.13"></a><span id="l4.13"> [test_ldif_import.js]</span>
<a href="#l4.14"></a><span id="l4.14"> [test_oe_settings.js]</span>
<a href="#l4.15"></a><span id="l4.15"> run-if = os == 'win'</span>
<a href="#l4.16"></a><span id="l4.16"> [test_outlook_settings.js]</span>
<a href="#l4.17"></a><span id="l4.17"> run-if = os == 'win'</span>
<a href="#l4.18"></a><span id="l4.18"> [test_shiftjis_csv.js]</span>
<a href="#l4.19"></a><span id="l4.19"> [test_utf16_csv.js]</span>
<a href="#l4.20"></a><span id="l4.20"> [test_vcard_import.js]</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

