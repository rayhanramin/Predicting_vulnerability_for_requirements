<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 7452:7c7f54344b22d1ca15febe4e546a7761cccd8243</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 7c7f54344b22d1ca15febe4e546a7761cccd8243" />
<meta property="og:url" content="/comm-central/rev/7c7f54344b22d1ca15febe4e546a7761cccd8243" />
<meta property="og:description" content="Bug 282068 - RFE: Ability to collapse attachment pane; r=bwinton ui-r=clarkbw" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 7c7f54344b22d1ca15febe4e546a7761cccd8243 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/7c7f54344b22d1ca15febe4e546a7761cccd8243">shortlog</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/7c7f54344b22d1ca15febe4e546a7761cccd8243">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243">files</a> |
changeset |
<a href="/comm-central/raw-rev/7c7f54344b22d1ca15febe4e546a7761cccd8243">raw</a>  | <a href="/comm-central/archive/7c7f54344b22d1ca15febe4e546a7761cccd8243.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=282068">Bug 282068</a> - RFE: Ability to collapse attachment pane; r=bwinton ui-r=clarkbw
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#105;&#109;&#32;&#80;&#111;&#114;&#116;&#101;&#114;&#32;&#60;&#115;&#113;&#117;&#105;&#98;&#98;&#108;&#121;&#102;&#108;&#97;&#98;&#98;&#101;&#116;&#121;&#100;&#111;&#111;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 28 Mar 2011 12:27:35 -0500</td></tr>

<tr>
 <td>changeset 7452</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/7c7f54344b22d1ca15febe4e546a7761cccd8243">7c7f54344b22d1ca15febe4e546a7761cccd8243</a></td>
</tr>



<tr>
<td>parent 7451</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/aec474601cb418977bd03a21eccc82575fc62eea">aec474601cb418977bd03a21eccc82575fc62eea</a>
</td>
</tr>

<tr>
<td>child 7453</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/586c2360de484ac7d3dab893a38b5d905370a082">586c2360de484ac7d3dab893a38b5d905370a082</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=7c7f54344b22d1ca15febe4e546a7761cccd8243">5716</a></td></tr>
<tr><td>push user</td><td>squibblyflabbetydoo@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Tue, 29 Mar 2011 00:20:07 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@586c2360de48 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=586c2360de484ac7d3dab893a38b5d905370a082">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=586c2360de484ac7d3dab893a38b5d905370a082&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=586c2360de484ac7d3dab893a38b5d905370a082&newProject=comm-central&newRevision=7c7f54344b22d1ca15febe4e546a7761cccd8243&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=586c2360de484ac7d3dab893a38b5d905370a082&newProject=comm-central&newRevision=7c7f54344b22d1ca15febe4e546a7761cccd8243&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=586c2360de484ac7d3dab893a38b5d905370a082&newProject=comm-central&newRevision=7c7f54344b22d1ca15febe4e546a7761cccd8243&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bwinton%29&revcount=50">bwinton</a>, <a href="/comm-central/log?rev=reviewer%28clarkbw%29&revcount=50">clarkbw</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=282068">282068</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=282068">Bug 282068</a> - RFE: Ability to collapse attachment pane; r=bwinton ui-r=clarkbw</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/mailCore.js">mail/base/content/mailCore.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/mailCore.js">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/mailCore.js">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/mailCore.js">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/mailCore.js">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/mailCore.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messageWindow.xul">mail/base/content/messageWindow.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messageWindow.xul">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messageWindow.xul">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messageWindow.xul">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messageWindow.xul">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messageWindow.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messenger.xul">mail/base/content/messenger.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messenger.xul">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messenger.xul">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messenger.xul">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messenger.xul">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/messenger.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.xul">mail/base/content/msgHdrViewOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.xul">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.xul">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.xul">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.xul">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/base/content/msgHdrViewOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/messenger.properties">mail/locales/en-US/chrome/messenger/messenger.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/messenger.properties">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/messenger.properties">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/messenger.properties">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/messenger.properties">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/messenger.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd">mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment-size.js">mail/test/mozmill/attachment/test-attachment-size.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment-size.js">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment-size.js">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment-size.js">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment-size.js">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment-size.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment.js">mail/test/mozmill/attachment/test-attachment.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment.js">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment.js">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment.js">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment.js">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/test/mozmill/attachment/test-attachment.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/gnomestripe/mail/messageHeader.css">mail/themes/gnomestripe/mail/messageHeader.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/gnomestripe/mail/messageHeader.css">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/gnomestripe/mail/messageHeader.css">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/gnomestripe/mail/messageHeader.css">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/gnomestripe/mail/messageHeader.css">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/gnomestripe/mail/messageHeader.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/icons/download.png">mail/themes/pinstripe/mail/icons/download.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/icons/download.png">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/icons/download.png">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/icons/download.png">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/icons/download.png">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/icons/download.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/messageHeader.css">mail/themes/pinstripe/mail/messageHeader.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/messageHeader.css">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/messageHeader.css">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/messageHeader.css">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/messageHeader.css">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/pinstripe/mail/messageHeader.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/jar.mn">mail/themes/qute/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/jar.mn">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/jar.mn">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/jar.mn">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/jar.mn">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/icons/download.png">mail/themes/qute/mail/icons/download.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/icons/download.png">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/icons/download.png">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/icons/download.png">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/icons/download.png">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/icons/download.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader-aero.css">mail/themes/qute/mail/messageHeader-aero.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader-aero.css">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader-aero.css">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader-aero.css">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader-aero.css">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader-aero.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader.css">mail/themes/qute/mail/messageHeader.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader.css">file</a> |
<a href="/comm-central/annotate/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader.css">annotate</a> |
<a href="/comm-central/diff/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader.css">diff</a> |
<a href="/comm-central/comparison/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader.css">comparison</a> |
<a href="/comm-central/log/7c7f54344b22d1ca15febe4e546a7761cccd8243/mail/themes/qute/mail/messageHeader.css">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/mailCore.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/mailCore.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -113,17 +113,20 @@ function overlayOnLoad()</span>
<a href="#l1.4"></a><span id="l1.4">   // If they have a mode of full and a labelalign of true,</span>
<a href="#l1.5"></a><span id="l1.5">   // then pretend the mode is textbesideicon when populating the popup.</span>
<a href="#l1.6"></a><span id="l1.6">   let toolbox = null;</span>
<a href="#l1.7"></a><span id="l1.7">   if (&quot;arguments&quot; in window &amp;&amp; window.arguments[0])</span>
<a href="#l1.8"></a><span id="l1.8">     toolbox = window.arguments[0];</span>
<a href="#l1.9"></a><span id="l1.9">   else if (window.frameElement &amp;&amp; &quot;toolbox&quot; in window.frameElement)</span>
<a href="#l1.10"></a><span id="l1.10">     toolbox = window.frameElement.toolbox;</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  document.getElementById(&quot;CustomizeToolbarWindow&quot;).setAttribute(&quot;toolboxId&quot;, toolbox.id);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  let toolbarWindow = document.getElementById(&quot;CustomizeToolbarWindow&quot;);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+  toolbarWindow.setAttribute(&quot;toolboxId&quot;, toolbox.id);</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+  if (toolbox.getAttribute(&quot;inlinetoolbox&quot;) == &quot;true&quot;)</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+    toolbarWindow.setAttribute(&quot;inlinetoolbox&quot;, &quot;true&quot;);</span>
<a href="#l1.17"></a><span id="l1.17">   toolbox.setAttribute(&quot;doCustomization&quot;, &quot;true&quot;);</span>
<a href="#l1.18"></a><span id="l1.18"> </span>
<a href="#l1.19"></a><span id="l1.19">   let mode = toolbox.getAttribute(&quot;mode&quot;);</span>
<a href="#l1.20"></a><span id="l1.20">   let align = toolbox.getAttribute(&quot;labelalign&quot;);</span>
<a href="#l1.21"></a><span id="l1.21">   if (mode == &quot;full&quot; &amp;&amp; align == &quot;end&quot;)</span>
<a href="#l1.22"></a><span id="l1.22">     toolbox.setAttribute(&quot;mode&quot;, &quot;textbesideicon&quot;);</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24">   onLoad();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/messageWindow.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/messageWindow.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -150,16 +150,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5">     &lt;menupopup id=&quot;messageIdContext&quot;/&gt;</span>
<a href="#l2.6"></a><span id="l2.6"> </span>
<a href="#l2.7"></a><span id="l2.7">     &lt;menupopup id=&quot;mailContext&quot;/&gt;</span>
<a href="#l2.8"></a><span id="l2.8">   &lt;/popupset&gt;</span>
<a href="#l2.9"></a><span id="l2.9"> </span>
<a href="#l2.10"></a><span id="l2.10">   &lt;menupopup id=&quot;attachmentListContext&quot;/&gt;</span>
<a href="#l2.11"></a><span id="l2.11">   &lt;menupopup id=&quot;header-toolbar-context-menu&quot;/&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+  &lt;menupopup id=&quot;attachment-toolbar-context-menu&quot;/&gt;</span>
<a href="#l2.13"></a><span id="l2.13">   &lt;menupopup id=&quot;copyUrlPopup&quot;/&gt;</span>
<a href="#l2.14"></a><span id="l2.14">   &lt;menupopup id=&quot;toolbar-context-menu&quot;/&gt;</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16">   &lt;toolbox id=&quot;mail-toolbox&quot; class=&quot;toolbox-top&quot;&gt;</span>
<a href="#l2.17"></a><span id="l2.17">   &lt;/toolbox&gt;</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">   &lt;tooltip id=&quot;aHTMLTooltip&quot; onpopupshowing=&quot;return FillInHTMLTooltip(document.tooltipNode);&quot;/&gt;</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -175,17 +176,17 @@</span>
<a href="#l2.22"></a><span id="l2.22"> </span>
<a href="#l2.23"></a><span id="l2.23">     &lt;!-- message view --&gt;</span>
<a href="#l2.24"></a><span id="l2.24">     &lt;browser id=&quot;messagepane&quot; context=&quot;mailContext&quot; tooltip=&quot;aHTMLTooltip&quot;</span>
<a href="#l2.25"></a><span id="l2.25">              style=&quot;height: 0px; min-height: 1px&quot; flex=&quot;1&quot; name=&quot;messagepane&quot;</span>
<a href="#l2.26"></a><span id="l2.26">              disablesecurity=&quot;true&quot; disablehistory=&quot;true&quot; type=&quot;content-primary&quot;</span>
<a href="#l2.27"></a><span id="l2.27">              onresize=&quot;return messagePaneOnResize(event);&quot; autofind=&quot;false&quot;</span>
<a href="#l2.28"></a><span id="l2.28">              src=&quot;about:blank&quot; onclick=&quot;return contentAreaClick(event);&quot; /&gt;</span>
<a href="#l2.29"></a><span id="l2.29">     &lt;splitter id=&quot;attachment-splitter&quot; collapse=&quot;after&quot; resizebefore=&quot;closest&quot; resizeafter=&quot;closest&quot; collapsed=&quot;true&quot;/&gt;</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-    &lt;hbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+    &lt;vbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l2.32"></a><span id="l2.32">     &lt;findbar id=&quot;FindToolbar&quot; browserid=&quot;messagepane&quot;/&gt;</span>
<a href="#l2.33"></a><span id="l2.33">   &lt;/vbox&gt;</span>
<a href="#l2.34"></a><span id="l2.34">   &lt;panel id=&quot;customizeToolbarSheetPopup&quot; noautohide=&quot;true&quot;&gt;</span>
<a href="#l2.35"></a><span id="l2.35">     &lt;iframe id=&quot;customizeToolbarSheetIFrame&quot;</span>
<a href="#l2.36"></a><span id="l2.36">             style=&quot;&amp;dialog.style;&quot;</span>
<a href="#l2.37"></a><span id="l2.37">             hidden=&quot;true&quot;/&gt;</span>
<a href="#l2.38"></a><span id="l2.38">   &lt;/panel&gt;</span>
<a href="#l2.39"></a><span id="l2.39"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/messenger.xul</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/messenger.xul</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -160,16 +160,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> &lt;popupset id=&quot;mainPopupSet&quot;&gt;</span>
<a href="#l3.5"></a><span id="l3.5">   &lt;panel id=&quot;editContactPanel&quot;/&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> &lt;/popupset&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> &lt;menupopup id=&quot;mailContext&quot;/&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> &lt;menupopup id=&quot;folderPaneContext&quot;/&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;menupopup id=&quot;attachmentListContext&quot;/&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;menupopup id=&quot;header-toolbar-context-menu&quot;/&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+&lt;menupopup id=&quot;attachment-toolbar-context-menu&quot;/&gt;</span>
<a href="#l3.13"></a><span id="l3.13"> &lt;menupopup id=&quot;copyUrlPopup&quot;/&gt;</span>
<a href="#l3.14"></a><span id="l3.14"> &lt;menupopup id=&quot;toolbar-context-menu&quot;/&gt;</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> &lt;tooltip id=&quot;attachmentListTooltip&quot;/&gt;</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18"> &lt;menupopup id=&quot;emailAddressPopup&quot; position=&quot;after_start&quot; class=&quot;emailAddressPopup&quot;</span>
<a href="#l3.19"></a><span id="l3.19">            onpopupshowing=&quot;setupEmailAddressPopup(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup')); goUpdateCommand('cmd_createFilterFromPopup')&quot;</span>
<a href="#l3.20"></a><span id="l3.20">            onpopuphiding=&quot;hideEmailNewsPopup(findEmailNodeFromPopupNode(document.popupNode, 'emailAddressPopup'));&quot;&gt;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineat">@@ -446,17 +447,17 @@</span>
<a href="#l3.22"></a><span id="l3.22">                                src=&quot;about:blank&quot;</span>
<a href="#l3.23"></a><span id="l3.23">                                onresize=&quot;return messagePaneOnResize(event);&quot;</span>
<a href="#l3.24"></a><span id="l3.24">                                disablesecurity=&quot;true&quot;</span>
<a href="#l3.25"></a><span id="l3.25">                                onclick=&quot;return contentAreaClick(event);&quot;/&gt;</span>
<a href="#l3.26"></a><span id="l3.26">                     &lt;/hbox&gt;</span>
<a href="#l3.27"></a><span id="l3.27">                     &lt;splitter id=&quot;attachment-splitter&quot; collapse=&quot;after&quot;</span>
<a href="#l3.28"></a><span id="l3.28">                               resizebefore=&quot;closest&quot; resizeafter=&quot;closest&quot;</span>
<a href="#l3.29"></a><span id="l3.29">                               collapsed=&quot;true&quot;/&gt;</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-                    &lt;hbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+                    &lt;vbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l3.32"></a><span id="l3.32">                     &lt;findbar id=&quot;FindToolbar&quot; browserid=&quot;messagepane&quot;/&gt;</span>
<a href="#l3.33"></a><span id="l3.33">                   &lt;/vbox&gt;</span>
<a href="#l3.34"></a><span id="l3.34">                 &lt;/vbox&gt;</span>
<a href="#l3.35"></a><span id="l3.35">               &lt;/box&gt;</span>
<a href="#l3.36"></a><span id="l3.36">             &lt;/vbox&gt;</span>
<a href="#l3.37"></a><span id="l3.37">           &lt;/box&gt;</span>
<a href="#l3.38"></a><span id="l3.38">         &lt;/box&gt; &lt;!-- end of mailContent --&gt;</span>
<a href="#l3.39"></a><span id="l3.39">       &lt;/tabpanels&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -270,34 +270,49 @@ function OnLoadMsgHeaderPane()</span>
<a href="#l4.4"></a><span id="l4.4">   openInTab.hidden = openInNewWindow.hidden = opensAreHidden;</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">   // dispatch an event letting any listeners know that we have loaded the message pane</span>
<a href="#l4.7"></a><span id="l4.7">   var event = document.createEvent('Events');</span>
<a href="#l4.8"></a><span id="l4.8">   event.initEvent('messagepane-loaded', false, true);</span>
<a href="#l4.9"></a><span id="l4.9">   var headerViewElement = document.getElementById(&quot;msgHeaderView&quot;);</span>
<a href="#l4.10"></a><span id="l4.10">   headerViewElement.dispatchEvent(event);</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  var toolbox = document.getElementById(&quot;header-view-toolbox&quot;);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  initInlineToolbox(&quot;header-view-toolbox&quot;, &quot;header-view-toolbar&quot;,</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+                    &quot;CustomizeHeaderToolbar&quot;);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+  initInlineToolbox(&quot;attachment-view-toolbox&quot;, &quot;attachment-view-toolbar&quot;,</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+                    &quot;CustomizeAttachmentToolbar&quot;);</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+}</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+/**</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+ * Initialize an inline toolbox and its toolbar to have the appropriate</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+ * attributes necessary for customization and persistence.</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+ *</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+ * @param toolboxId the id for the toolbox to initialize</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+ * @param toolbarId the id for the toolbar to initialize</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+ * @param popupId the id for the menupopup to initialize</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+ */</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+function initInlineToolbox(toolboxId, toolbarId, popupId) {</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+  let toolbox = document.getElementById(toolboxId);</span>
<a href="#l4.29"></a><span id="l4.29">   toolbox.customizeDone = function(aEvent) {</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-    MailToolboxCustomizeDone(aEvent, &quot;CustomizeHeaderToolbar&quot;);</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+    MailToolboxCustomizeDone(aEvent, popupId);</span>
<a href="#l4.32"></a><span id="l4.32">   };</span>
<a href="#l4.33"></a><span id="l4.33"> </span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-  var toolbarset = document.getElementById('customToolbars');</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+  let toolbarset = document.getElementById(&quot;customToolbars&quot;);</span>
<a href="#l4.36"></a><span id="l4.36">   toolbox.toolbarset = toolbarset;</span>
<a href="#l4.37"></a><span id="l4.37"> </span>
<a href="#l4.38"></a><span id="l4.38">   // Check whether we did an upgrade to a customizable header pane.</span>
<a href="#l4.39"></a><span id="l4.39">   // If yes, set the header pane toolbar mode to icons besides text</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-  var toolbar = document.getElementById(&quot;header-view-toolbar&quot;);</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+  let toolbar = document.getElementById(toolbarId);</span>
<a href="#l4.42"></a><span id="l4.42">   if (toolbox &amp;&amp; toolbar) {</span>
<a href="#l4.43"></a><span id="l4.43">     if (!toolbox.getAttribute(&quot;mode&quot;)) {</span>
<a href="#l4.44"></a><span id="l4.44"> </span>
<a href="#l4.45"></a><span id="l4.45">       /* set toolbox attributes to default values */</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-      var mode = toolbox.getAttribute(&quot;defaultmode&quot;);</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-      var align = toolbox.getAttribute(&quot;defaultlabelalign&quot;);</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-      var iconsize = toolbox.getAttribute(&quot;defaulticonsize&quot;);</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+      let mode = toolbox.getAttribute(&quot;defaultmode&quot;);</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+      let align = toolbox.getAttribute(&quot;defaultlabelalign&quot;);</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+      let iconsize = toolbox.getAttribute(&quot;defaulticonsize&quot;);</span>
<a href="#l4.52"></a><span id="l4.52">       toolbox.setAttribute(&quot;mode&quot;, mode);</span>
<a href="#l4.53"></a><span id="l4.53">       toolbox.setAttribute(&quot;labelalign&quot;, align);</span>
<a href="#l4.54"></a><span id="l4.54">       toolbox.setAttribute(&quot;iconsize&quot;, iconsize);</span>
<a href="#l4.55"></a><span id="l4.55">       toolbox.ownerDocument.persist(toolbox.id, &quot;mode&quot;);</span>
<a href="#l4.56"></a><span id="l4.56">       toolbox.ownerDocument.persist(toolbox.id, &quot;iconsize&quot;);</span>
<a href="#l4.57"></a><span id="l4.57">       toolbox.ownerDocument.persist(toolbox.id, &quot;labelalign&quot;);</span>
<a href="#l4.58"></a><span id="l4.58"> </span>
<a href="#l4.59"></a><span id="l4.59">       /* set toolbar attributes to default values */</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineat">@@ -1769,16 +1784,57 @@ function onShowAttachmentContextMenu()</span>
<a href="#l4.61"></a><span id="l4.61">   else</span>
<a href="#l4.62"></a><span id="l4.62">   {</span>
<a href="#l4.63"></a><span id="l4.63">     saveAllMenu.setAttribute('disabled', anyDeleted);</span>
<a href="#l4.64"></a><span id="l4.64">     detachAllMenu.setAttribute('disabled', !canDetach || anyDeleted || anyDetached);</span>
<a href="#l4.65"></a><span id="l4.65">     deleteAllMenu.setAttribute('disabled', !canDetach || anyDeleted || anyDetached);</span>
<a href="#l4.66"></a><span id="l4.66">   }</span>
<a href="#l4.67"></a><span id="l4.67"> }</span>
<a href="#l4.68"></a><span id="l4.68"> </span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+/**</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+ * Enable/disable menu items as appropriate for the single-attachment save all</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+ * toolbar button.</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+ */</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+function onShowSaveAttachmentMenuSingle()</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+{</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+  let openItem   = document.getElementById('button-openAttachment');</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+  let saveItem   = document.getElementById('button-saveAttachment');</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+  let detachItem = document.getElementById('button-detachAttachment');</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineplus">+  let deleteItem = document.getElementById('button-deleteAttachment');</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+  let detached = currentAttachments[0].isExternalAttachment;</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+  let deleted  = currentAttachments[0].contentType == 'text/x-moz-deleted';</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineplus">+  let canDetach = CanDetachAttachments() &amp;&amp; !deleted &amp;&amp; !detached;</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineplus">+</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineplus">+  openItem.setAttribute('disabled', deleted);</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineplus">+  saveItem.setAttribute('disabled', deleted);</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineplus">+  detachItem.setAttribute('disabled', !canDetach);</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineplus">+  deleteItem.setAttribute('disabled', !canDetach);</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineplus">+}</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineplus">+/**</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineplus">+ * Enable/disable menu items as appropriate for the multiple-attachment save all</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineplus">+ * toolbar button.</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineplus">+ */</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineplus">+function onShowSaveAttachmentMenuMultiple()</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineplus">+{</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineplus">+  let saveAllItem   = document.getElementById('button-saveAllAttachments');</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineplus">+  let detachAllItem = document.getElementById('button-detachAllAttachments');</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineplus">+  let deleteAllItem = document.getElementById('button-deleteAllAttachments');</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineplus">+</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineplus">+  let anyDetached = currentAttachments.some(function(i) i.isExternalAttachment);</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineplus">+  let anyDeleted  = currentAttachments.some(function(i) i.contentType ==</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineplus">+                                            'text/x-moz-deleted');</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineplus">+  let canDetach = CanDetachAttachments() &amp;&amp; !anyDeleted &amp;&amp; !anyDetached;</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineplus">+</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineplus">+  saveAllItem.setAttribute('disabled', anyDeleted);</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineplus">+  detachAllItem.setAttribute('disabled', !canDetach);</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineplus">+  deleteAllItem.setAttribute('disabled', !canDetach);</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineplus">+}</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineplus">+</span>
<a href="#l4.110"></a><span id="l4.110"> function MessageIdClick(node, event)</span>
<a href="#l4.111"></a><span id="l4.111"> {</span>
<a href="#l4.112"></a><span id="l4.112">   if (event.button == 0)</span>
<a href="#l4.113"></a><span id="l4.113">   {</span>
<a href="#l4.114"></a><span id="l4.114">     var messageId = GetMessageIdFromNode(node, true);</span>
<a href="#l4.115"></a><span id="l4.115">     OpenMessageForMessageId(messageId);</span>
<a href="#l4.116"></a><span id="l4.116">   }</span>
<a href="#l4.117"></a><span id="l4.117"> }</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineat">@@ -1819,82 +1875,139 @@ function createAttachmentDisplayName(aAt</span>
<a href="#l4.119"></a><span id="l4.119">   // whitespace will be taken care of by the crop=&quot;center&quot; attribute.</span>
<a href="#l4.120"></a><span id="l4.120">   // We must not change the actual filename, though.</span>
<a href="#l4.121"></a><span id="l4.121">   return aAttachment.displayName.trimRight();</span>
<a href="#l4.122"></a><span id="l4.122"> }</span>
<a href="#l4.123"></a><span id="l4.123"> </span>
<a href="#l4.124"></a><span id="l4.124"> function displayAttachmentsForExpandedView()</span>
<a href="#l4.125"></a><span id="l4.125"> {</span>
<a href="#l4.126"></a><span id="l4.126">   var numAttachments = currentAttachments.length;</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-  var expandedAttachmentBox = document.getElementById('attachmentView');</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineplus">+  var totalSize = 0;</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineplus">+  var attachmentView = document.getElementById('attachmentView');</span>
<a href="#l4.130"></a><span id="l4.130">   var attachmentSplitter = document.getElementById('attachment-splitter');</span>
<a href="#l4.131"></a><span id="l4.131"> </span>
<a href="#l4.132"></a><span id="l4.132">   if (numAttachments &lt;= 0)</span>
<a href="#l4.133"></a><span id="l4.133">   {</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineminus">-    expandedAttachmentBox.collapsed = true;</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineplus">+    attachmentView.collapsed = true;</span>
<a href="#l4.136"></a><span id="l4.136">     attachmentSplitter.collapsed = true;</span>
<a href="#l4.137"></a><span id="l4.137">   }</span>
<a href="#l4.138"></a><span id="l4.138">   else if (!gBuildAttachmentsForCurrentMsg)</span>
<a href="#l4.139"></a><span id="l4.139">   {</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineminus">-    // IMPORTANT: make sure we uncollapse the attachment box BEFORE we start adding</span>
<a href="#l4.141"></a><span id="l4.141" class="difflineminus">-    // our attachments to the view. Otherwise, layout doesn't calculate the correct height for</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineminus">-    // the attachment view and we end up with a box that is too tall.</span>
<a href="#l4.143"></a><span id="l4.143" class="difflineminus">-    expandedAttachmentBox.collapsed = false;</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineminus">-    attachmentSplitter.collapsed = false;</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineplus">+    attachmentView.collapsed = false;</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineplus">+</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineplus">+    var attachmentList = document.getElementById('attachmentList');</span>
<a href="#l4.148"></a><span id="l4.148"> </span>
<a href="#l4.149"></a><span id="l4.149">     var showLargeAttView = Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l4.150"></a><span id="l4.150">                              .getService(Components.interfaces.nsIPrefBranch2)</span>
<a href="#l4.151"></a><span id="l4.151">                              .getBoolPref(&quot;mailnews.attachments.display.largeView&quot;)</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineminus">-    if (showLargeAttView)</span>
<a href="#l4.153"></a><span id="l4.153" class="difflineminus">-      expandedAttachmentBox.setAttribute(&quot;largeView&quot;, &quot;true&quot;);</span>
<a href="#l4.154"></a><span id="l4.154" class="difflineplus">+    attachmentList.setAttribute(&quot;largeView&quot;, showLargeAttView);</span>
<a href="#l4.155"></a><span id="l4.155"> </span>
<a href="#l4.156"></a><span id="l4.156" class="difflineminus">-    // Remove height attribute, or the attachments box could be drawn badly:</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineminus">-    expandedAttachmentBox.removeAttribute(&quot;height&quot;);</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineplus">+    toggleAttachmentList(false);</span>
<a href="#l4.159"></a><span id="l4.159"> </span>
<a href="#l4.160"></a><span id="l4.160" class="difflineminus">-    var attachmentList = document.getElementById('attachmentList');</span>
<a href="#l4.161"></a><span id="l4.161">     for each (let [, attachment] in Iterator(currentAttachments))</span>
<a href="#l4.162"></a><span id="l4.162">     {</span>
<a href="#l4.163"></a><span id="l4.163">       // Create a new attachment widget</span>
<a href="#l4.164"></a><span id="l4.164">       var displayName = createAttachmentDisplayName(attachment);</span>
<a href="#l4.165"></a><span id="l4.165">       var nameAndSize = displayName;</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineminus">-      if (attachment.size != null)</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineplus">+      if (attachment.size != null) {</span>
<a href="#l4.168"></a><span id="l4.168">         nameAndSize += &quot; (&quot;+messenger.formatFileSize(attachment.size)+&quot;)&quot;;</span>
<a href="#l4.169"></a><span id="l4.169" class="difflineminus">-      var attachmentView = attachmentList.appendItem(nameAndSize);</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineplus">+        totalSize += attachment.size;</span>
<a href="#l4.171"></a><span id="l4.171" class="difflineplus">+      }</span>
<a href="#l4.172"></a><span id="l4.172" class="difflineplus">+      var item = attachmentList.appendItem(nameAndSize);</span>
<a href="#l4.173"></a><span id="l4.173"> </span>
<a href="#l4.174"></a><span id="l4.174" class="difflineminus">-      attachmentView.setAttribute(&quot;class&quot;, &quot;descriptionitem-iconic&quot;);</span>
<a href="#l4.175"></a><span id="l4.175" class="difflineplus">+      item.setAttribute(&quot;class&quot;, &quot;descriptionitem-iconic&quot;);</span>
<a href="#l4.176"></a><span id="l4.176" class="difflineplus">+</span>
<a href="#l4.177"></a><span id="l4.177" class="difflineplus">+      setApplicationIconForAttachment(attachment, item, showLargeAttView);</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineplus">+      item.setAttribute(&quot;tooltiptext&quot;, attachment.displayName);</span>
<a href="#l4.179"></a><span id="l4.179" class="difflineplus">+      item.setAttribute(&quot;context&quot;, &quot;attachmentListContext&quot;);</span>
<a href="#l4.180"></a><span id="l4.180"> </span>
<a href="#l4.181"></a><span id="l4.181" class="difflineminus">-      if (showLargeAttView)</span>
<a href="#l4.182"></a><span id="l4.182" class="difflineminus">-        attachmentView.setAttribute(&quot;largeView&quot;, &quot;true&quot;);</span>
<a href="#l4.183"></a><span id="l4.183" class="difflineplus">+      item.attachment = cloneAttachment(attachment);</span>
<a href="#l4.184"></a><span id="l4.184" class="difflineplus">+      item.setAttribute(&quot;attachmentUrl&quot;, attachment.url);</span>
<a href="#l4.185"></a><span id="l4.185" class="difflineplus">+      item.setAttribute(&quot;attachmentContentType&quot;, attachment.contentType);</span>
<a href="#l4.186"></a><span id="l4.186" class="difflineplus">+      item.setAttribute(&quot;attachmentUri&quot;, attachment.uri);</span>
<a href="#l4.187"></a><span id="l4.187" class="difflineplus">+      item.setAttribute(&quot;attachmentSize&quot;, attachment.size);</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineplus">+</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineplus">+      attachmentList.appendChild(item);</span>
<a href="#l4.190"></a><span id="l4.190" class="difflineplus">+    } // for each attachment</span>
<a href="#l4.191"></a><span id="l4.191"> </span>
<a href="#l4.192"></a><span id="l4.192" class="difflineminus">-      setApplicationIconForAttachment(attachment, attachmentView, showLargeAttView);</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineminus">-      attachmentView.setAttribute(&quot;tooltiptext&quot;, attachment.displayName);</span>
<a href="#l4.194"></a><span id="l4.194" class="difflineminus">-      attachmentView.setAttribute(&quot;context&quot;, &quot;attachmentListContext&quot;);</span>
<a href="#l4.195"></a><span id="l4.195" class="difflineplus">+    var words = gMessengerBundle.getString(&quot;attachmentCount&quot;);</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineplus">+    var count = PluralForm.get(currentAttachments.length, words)</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineplus">+                          .replace(&quot;#1&quot;, currentAttachments.length);</span>
<a href="#l4.198"></a><span id="l4.198" class="difflineplus">+</span>
<a href="#l4.199"></a><span id="l4.199" class="difflineplus">+    // Show the appropriate toolbar button and label based on the number of</span>
<a href="#l4.200"></a><span id="l4.200" class="difflineplus">+    // attachments.</span>
<a href="#l4.201"></a><span id="l4.201" class="difflineplus">+    if (numAttachments == 1)</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineplus">+    {</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineplus">+      var countAndName = gMessengerBundle.getFormattedString(</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineplus">+        &quot;attachmentCountAndName&quot;, [count, createAttachmentDisplayName(</span>
<a href="#l4.205"></a><span id="l4.205" class="difflineplus">+            currentAttachments[0])]);</span>
<a href="#l4.206"></a><span id="l4.206"> </span>
<a href="#l4.207"></a><span id="l4.207" class="difflineminus">-      attachmentView.attachment = cloneAttachment(attachment);</span>
<a href="#l4.208"></a><span id="l4.208" class="difflineminus">-      attachmentView.setAttribute(&quot;attachmentUrl&quot;, attachment.url);</span>
<a href="#l4.209"></a><span id="l4.209" class="difflineminus">-      attachmentView.setAttribute(&quot;attachmentContentType&quot;, attachment.contentType);</span>
<a href="#l4.210"></a><span id="l4.210" class="difflineminus">-      attachmentView.setAttribute(&quot;attachmentUri&quot;, attachment.uri);</span>
<a href="#l4.211"></a><span id="l4.211" class="difflineminus">-      attachmentView.setAttribute(&quot;attachmentSize&quot;, attachment.size);</span>
<a href="#l4.212"></a><span id="l4.212" class="difflineplus">+      document.getElementById(&quot;attachmentSaveAllSingle&quot;).hidden = false;</span>
<a href="#l4.213"></a><span id="l4.213" class="difflineplus">+      document.getElementById(&quot;attachmentSaveAllMultiple&quot;).hidden = true;</span>
<a href="#l4.214"></a><span id="l4.214" class="difflineplus">+      document.getElementById(&quot;attachmentCount&quot;).setAttribute(&quot;value&quot;, countAndName);</span>
<a href="#l4.215"></a><span id="l4.215" class="difflineplus">+    }</span>
<a href="#l4.216"></a><span id="l4.216" class="difflineplus">+    else</span>
<a href="#l4.217"></a><span id="l4.217" class="difflineplus">+    {</span>
<a href="#l4.218"></a><span id="l4.218" class="difflineplus">+      document.getElementById(&quot;attachmentSaveAllSingle&quot;).hidden = true;</span>
<a href="#l4.219"></a><span id="l4.219" class="difflineplus">+      document.getElementById(&quot;attachmentSaveAllMultiple&quot;).hidden = false;</span>
<a href="#l4.220"></a><span id="l4.220" class="difflineplus">+      document.getElementById(&quot;attachmentCount&quot;).setAttribute(&quot;value&quot;, count);</span>
<a href="#l4.221"></a><span id="l4.221" class="difflineplus">+    }</span>
<a href="#l4.222"></a><span id="l4.222" class="difflineplus">+</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineplus">+    document.getElementById(&quot;attachmentSize&quot;).setAttribute(</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineplus">+      &quot;value&quot;, messenger.formatFileSize(totalSize));</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineplus">+</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineplus">+    gBuildAttachmentsForCurrentMsg = true;</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineplus">+  }</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineplus">+}</span>
<a href="#l4.229"></a><span id="l4.229"> </span>
<a href="#l4.230"></a><span id="l4.230" class="difflineminus">-      var item = attachmentList.appendChild(attachmentView);</span>
<a href="#l4.231"></a><span id="l4.231" class="difflineminus">-    } // for each attachment</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineminus">-    gBuildAttachmentsForCurrentMsg = true;</span>
<a href="#l4.233"></a><span id="l4.233" class="difflineplus">+/**</span>
<a href="#l4.234"></a><span id="l4.234" class="difflineplus">+ * Expand/collapse the attachment list. When expanding it, automatically resize</span>
<a href="#l4.235"></a><span id="l4.235" class="difflineplus">+ * it to an appropriate height (1/4 the message pane or smaller).</span>
<a href="#l4.236"></a><span id="l4.236" class="difflineplus">+ *</span>
<a href="#l4.237"></a><span id="l4.237" class="difflineplus">+ * @param expanded True if the attachment list should be expanded, false</span>
<a href="#l4.238"></a><span id="l4.238" class="difflineplus">+ *                 otherwise. If not specified, expand/collapse based on the</span>
<a href="#l4.239"></a><span id="l4.239" class="difflineplus">+ *                 state of |attachmentToggle|.</span>
<a href="#l4.240"></a><span id="l4.240" class="difflineplus">+ */</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineplus">+function toggleAttachmentList(expanded)</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineplus">+{</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineplus">+  var attachmentToggle      = document.getElementById(&quot;attachmentToggle&quot;);</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineplus">+  var attachmentView        = document.getElementById(&quot;attachmentView&quot;);</span>
<a href="#l4.245"></a><span id="l4.245" class="difflineplus">+  var attachmentSplitter    = document.getElementById(&quot;attachment-splitter&quot;);</span>
<a href="#l4.246"></a><span id="l4.246" class="difflineplus">+  var attachmentListWrapper = document.getElementById(&quot;attachmentListWrapper&quot;);</span>
<a href="#l4.247"></a><span id="l4.247"> </span>
<a href="#l4.248"></a><span id="l4.248" class="difflineminus">-    // Switch overflow off (via css attribute selector) temporarily to get the preferred window height:</span>
<a href="#l4.249"></a><span id="l4.249" class="difflineminus">-    var attachmentContainer = document.getElementById('attachmentView');</span>
<a href="#l4.250"></a><span id="l4.250" class="difflineminus">-    attachmentContainer.setAttribute(&quot;attachmentOverflow&quot;, &quot;false&quot;);</span>
<a href="#l4.251"></a><span id="l4.251" class="difflineminus">-    var attachmentHeight = expandedAttachmentBox.boxObject.height;</span>
<a href="#l4.252"></a><span id="l4.252" class="difflineminus">-    attachmentContainer.setAttribute(&quot;attachmentOverflow&quot;, &quot;true&quot;);</span>
<a href="#l4.253"></a><span id="l4.253" class="difflineplus">+  if (expanded === undefined)</span>
<a href="#l4.254"></a><span id="l4.254" class="difflineplus">+    expanded = attachmentToggle.checked;</span>
<a href="#l4.255"></a><span id="l4.255" class="difflineplus">+  else</span>
<a href="#l4.256"></a><span id="l4.256" class="difflineplus">+    attachmentToggle.checked = expanded;</span>
<a href="#l4.257"></a><span id="l4.257" class="difflineplus">+</span>
<a href="#l4.258"></a><span id="l4.258" class="difflineplus">+  if (expanded) {</span>
<a href="#l4.259"></a><span id="l4.259" class="difflineplus">+    attachmentListWrapper.collapsed = false;</span>
<a href="#l4.260"></a><span id="l4.260" class="difflineplus">+    attachmentSplitter.collapsed = false;</span>
<a href="#l4.261"></a><span id="l4.261" class="difflineplus">+</span>
<a href="#l4.262"></a><span id="l4.262" class="difflineplus">+    var attachmentHeight = attachmentView.boxObject.height;</span>
<a href="#l4.263"></a><span id="l4.263"> </span>
<a href="#l4.264"></a><span id="l4.264">     // If the attachments box takes up too much of the message pane, downsize:</span>
<a href="#l4.265"></a><span id="l4.265" class="difflineminus">-    var maxAttachmentHeight = document.getElementById('messagepanebox').boxObject.height / 4;</span>
<a href="#l4.266"></a><span id="l4.266" class="difflineminus">-    if (attachmentHeight &gt; maxAttachmentHeight)</span>
<a href="#l4.267"></a><span id="l4.267" class="difflineminus">-      attachmentHeight = maxAttachmentHeight;</span>
<a href="#l4.268"></a><span id="l4.268" class="difflineminus">-    expandedAttachmentBox.setAttribute(&quot;height&quot;, attachmentHeight);</span>
<a href="#l4.269"></a><span id="l4.269" class="difflineminus">- }</span>
<a href="#l4.270"></a><span id="l4.270" class="difflineplus">+    var maxAttachmentHeight = document.getElementById(&quot;messagepanebox&quot;)</span>
<a href="#l4.271"></a><span id="l4.271" class="difflineplus">+                                      .boxObject.height / 4;</span>
<a href="#l4.272"></a><span id="l4.272" class="difflineplus">+</span>
<a href="#l4.273"></a><span id="l4.273" class="difflineplus">+    attachmentListWrapper.setAttribute(&quot;attachmentOverflow&quot;, &quot;true&quot;);</span>
<a href="#l4.274"></a><span id="l4.274" class="difflineplus">+    attachmentView.setAttribute(&quot;height&quot;, Math.min(attachmentHeight,</span>
<a href="#l4.275"></a><span id="l4.275" class="difflineplus">+                                                   maxAttachmentHeight));</span>
<a href="#l4.276"></a><span id="l4.276" class="difflineplus">+    attachmentView.setAttribute(&quot;maxheight&quot;, attachmentHeight);</span>
<a href="#l4.277"></a><span id="l4.277" class="difflineplus">+  }</span>
<a href="#l4.278"></a><span id="l4.278" class="difflineplus">+  else {</span>
<a href="#l4.279"></a><span id="l4.279" class="difflineplus">+    attachmentListWrapper.collapsed = true;</span>
<a href="#l4.280"></a><span id="l4.280" class="difflineplus">+    attachmentSplitter.collapsed = true;</span>
<a href="#l4.281"></a><span id="l4.281" class="difflineplus">+    attachmentView.removeAttribute(&quot;height&quot;);</span>
<a href="#l4.282"></a><span id="l4.282" class="difflineplus">+    attachmentView.removeAttribute(&quot;maxheight&quot;);</span>
<a href="#l4.283"></a><span id="l4.283" class="difflineplus">+</span>
<a href="#l4.284"></a><span id="l4.284" class="difflineplus">+    // Switch overflow off so that when we expand again we can get the</span>
<a href="#l4.285"></a><span id="l4.285" class="difflineplus">+    // preferred size. (Doing this when expanding hits a race condition.)</span>
<a href="#l4.286"></a><span id="l4.286" class="difflineplus">+    attachmentListWrapper.setAttribute(&quot;attachmentOverflow&quot;, &quot;false&quot;);</span>
<a href="#l4.287"></a><span id="l4.287" class="difflineplus">+  }</span>
<a href="#l4.288"></a><span id="l4.288"> }</span>
<a href="#l4.289"></a><span id="l4.289"> </span>
<a href="#l4.290"></a><span id="l4.290"> /**</span>
<a href="#l4.291"></a><span id="l4.291">  * Show a nice icon next to the attachment.</span>
<a href="#l4.292"></a><span id="l4.292">  * @param attachment the nsIMsgAttachment object to show icon for</span>
<a href="#l4.293"></a><span id="l4.293">  * @param listitem the listitem currently showing the attachment</span>
<a href="#l4.294"></a><span id="l4.294">  * @param largeView boolean value: 32x32 vs. 16x16 size icon</span>
<a href="#l4.295"></a><span id="l4.295">  */</span>
<a href="#l4.296"></a><span id="l4.296" class="difflineat">@@ -2297,9 +2410,8 @@ ConversationOpener.prototype = {</span>
<a href="#l4.297"></a><span id="l4.297">       }</span>
<a href="#l4.298"></a><span id="l4.298">     } catch (e) {</span>
<a href="#l4.299"></a><span id="l4.299">       logException(e);</span>
<a href="#l4.300"></a><span id="l4.300">     }</span>
<a href="#l4.301"></a><span id="l4.301">   }</span>
<a href="#l4.302"></a><span id="l4.302"> }</span>
<a href="#l4.303"></a><span id="l4.303"> </span>
<a href="#l4.304"></a><span id="l4.304"> var gConversationOpener = new ConversationOpener();</span>
<a href="#l4.305"></a><span id="l4.305" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.xul</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -75,70 +75,79 @@</span>
<a href="#l5.4"></a><span id="l5.4"> &lt;/menupopup&gt;</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6"> &lt;menupopup id=&quot;attachmentListContext&quot; onpopupshowing=&quot;return onShowAttachmentContextMenu();&quot;&gt;</span>
<a href="#l5.7"></a><span id="l5.7">   &lt;menuitem id=&quot;context-openAttachment&quot; label=&quot;&amp;openAttachmentCmd.label;&quot; accesskey=&quot;&amp;openAttachmentCmd.accesskey;&quot;</span>
<a href="#l5.8"></a><span id="l5.8">             oncommand=&quot;HandleSelectedAttachments('open');&quot;/&gt;</span>
<a href="#l5.9"></a><span id="l5.9">   &lt;menuitem id=&quot;context-saveAttachment&quot; label=&quot;&amp;saveAsAttachmentCmd.label;&quot; accesskey=&quot;&amp;saveAsAttachmentCmd.accesskey;&quot;</span>
<a href="#l5.10"></a><span id="l5.10">             oncommand=&quot;HandleSelectedAttachments('saveAs');&quot;/&gt;</span>
<a href="#l5.11"></a><span id="l5.11">   &lt;menuseparator id=&quot;context-menu-separator&quot;/&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-  &lt;menuitem id=&quot;context-detachAttachment&quot; label=&quot;&amp;detachAttachmentCmd.label;&quot; </span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+  &lt;menuitem id=&quot;context-detachAttachment&quot; label=&quot;&amp;detachAttachmentCmd.label;&quot; accesskey=&quot;&amp;detachAttachmentCmd.accesskey;&quot;</span>
<a href="#l5.14"></a><span id="l5.14">             oncommand=&quot;HandleSelectedAttachments('detach');&quot;/&gt;</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-  &lt;menuitem id=&quot;context-deleteAttachment&quot; label=&quot;&amp;deleteAttachmentCmd.label;&quot; </span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+  &lt;menuitem id=&quot;context-deleteAttachment&quot; label=&quot;&amp;deleteAttachmentCmd.label;&quot; accesskey=&quot;&amp;deleteAttachmentCmd.accesskey;&quot;</span>
<a href="#l5.17"></a><span id="l5.17">             oncommand=&quot;HandleSelectedAttachments('delete');&quot;/&gt;</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-  &lt;menuitem id=&quot;context-saveAllAttachments&quot; oncommand=&quot;HandleAllAttachments('save');&quot; </span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+  &lt;menuitem id=&quot;context-saveAllAttachments&quot; oncommand=&quot;HandleAllAttachments('save');&quot;</span>
<a href="#l5.20"></a><span id="l5.20">     label=&quot;&amp;saveAllAttachmentsCmd.label;&quot; accesskey=&quot;&amp;saveAllAttachmentsCmd.accesskey;&quot;/&gt;</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-  &lt;menuitem id=&quot;context-detachAllAttachments&quot; oncommand=&quot;HandleAllAttachments('detach');&quot; </span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+  &lt;menuitem id=&quot;context-detachAllAttachments&quot; oncommand=&quot;HandleAllAttachments('detach');&quot;</span>
<a href="#l5.23"></a><span id="l5.23">     label=&quot;&amp;detachAllAttachmentsCmd.label;&quot;/&gt;</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineminus">-  &lt;menuitem id=&quot;context-deleteAllAttachments&quot; oncommand=&quot;HandleAllAttachments('delete');&quot; </span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+  &lt;menuitem id=&quot;context-deleteAllAttachments&quot; oncommand=&quot;HandleAllAttachments('delete');&quot;</span>
<a href="#l5.26"></a><span id="l5.26">     label=&quot;&amp;deleteAllAttachmentsCmd.label;&quot;/&gt;</span>
<a href="#l5.27"></a><span id="l5.27"> &lt;/menupopup&gt;</span>
<a href="#l5.28"></a><span id="l5.28"> </span>
<a href="#l5.29"></a><span id="l5.29"> &lt;menupopup id=&quot;attachmentMenuList&quot;&gt;</span>
<a href="#l5.30"></a><span id="l5.30">   &lt;menuseparator/&gt;</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-  &lt;menuitem id=&quot;file-openAllAttachments&quot; label=&quot;&amp;openAllAttachmentsCmd.label;&quot; </span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+  &lt;menuitem id=&quot;file-openAllAttachments&quot; label=&quot;&amp;openAllAttachmentsCmd.label;&quot;</span>
<a href="#l5.33"></a><span id="l5.33">             accesskey=&quot;&amp;openAllAttachmentsCmd.accesskey;&quot;</span>
<a href="#l5.34"></a><span id="l5.34">             oncommand=&quot;HandleAllAttachments('open');&quot; /&gt;</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-  &lt;menuitem id=&quot;file-saveAllAttachments&quot; label=&quot;&amp;saveAllAttachmentsCmd.label;&quot; </span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+  &lt;menuitem id=&quot;file-saveAllAttachments&quot; label=&quot;&amp;saveAllAttachmentsCmd.label;&quot;</span>
<a href="#l5.37"></a><span id="l5.37">     accesskey=&quot;&amp;saveAllAttachmentsCmd.accesskey;&quot; oncommand=&quot;HandleAllAttachments('save');&quot;/&gt;</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-  &lt;menuitem id=&quot;file-detachAllAttachments&quot; label=&quot;&amp;detachAllAttachmentsCmd.label;&quot; </span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+  &lt;menuitem id=&quot;file-detachAllAttachments&quot; label=&quot;&amp;detachAllAttachmentsCmd.label;&quot;</span>
<a href="#l5.40"></a><span id="l5.40">     accesskey=&quot;&amp;detachAllAttachmentsCmd.accesskey;&quot; oncommand=&quot;HandleAllAttachments('detach');&quot; /&gt;</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-  &lt;menuitem id=&quot;file-deleteAllAttachments&quot; label=&quot;&amp;deleteAllAttachmentsCmd.label;&quot; </span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+  &lt;menuitem id=&quot;file-deleteAllAttachments&quot; label=&quot;&amp;deleteAllAttachmentsCmd.label;&quot;</span>
<a href="#l5.43"></a><span id="l5.43">     accesskey=&quot;&amp;deleteAllAttachmentsCmd.accesskey;&quot; oncommand=&quot;HandleAllAttachments('delete');&quot; /&gt;</span>
<a href="#l5.44"></a><span id="l5.44"> &lt;/menupopup&gt;</span>
<a href="#l5.45"></a><span id="l5.45"> </span>
<a href="#l5.46"></a><span id="l5.46"> &lt;menupopup id=&quot;header-toolbar-context-menu&quot;&gt;</span>
<a href="#l5.47"></a><span id="l5.47">   &lt;menuitem id=&quot;CustomizeHeaderToolbar&quot;</span>
<a href="#l5.48"></a><span id="l5.48">             oncommand=&quot;CustomizeMailToolbar('header-view-toolbox', 'CustomizeHeaderToolbar')&quot;</span>
<a href="#l5.49"></a><span id="l5.49">             label=&quot;&amp;customizeToolbar.label;&quot;</span>
<a href="#l5.50"></a><span id="l5.50">             accesskey=&quot;&amp;customizeToolbar.accesskey;&quot;/&gt;</span>
<a href="#l5.51"></a><span id="l5.51"> &lt;/menupopup&gt;</span>
<a href="#l5.52"></a><span id="l5.52"> </span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+&lt;menupopup id=&quot;attachment-toolbar-context-menu&quot;&gt;</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+  &lt;menuitem id=&quot;CustomizeAttachmentToolbar&quot;</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+            oncommand=&quot;CustomizeMailToolbar('attachment-view-toolbox', 'CustomizeAttachmentToolbar')&quot;</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+            label=&quot;&amp;customizeToolbar.label;&quot;</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+            accesskey=&quot;&amp;customizeToolbar.accesskey;&quot;/&gt;</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+&lt;/menupopup&gt;</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+</span>
<a href="#l5.60"></a><span id="l5.60"> &lt;menupopup id=&quot;copyUrlPopup&quot; popupanchor=&quot;bottomleft&quot;&gt;</span>
<a href="#l5.61"></a><span id="l5.61">   &lt;menuitem label=&quot;&amp;copyLinkCmd.label;&quot; accesskey=&quot;&amp;copyLinkCmd.accesskey;&quot; oncommand=&quot;CopyWebsiteAddress(document.popupNode)&quot;/&gt;</span>
<a href="#l5.62"></a><span id="l5.62"> &lt;/menupopup&gt;</span>
<a href="#l5.63"></a><span id="l5.63"> </span>
<a href="#l5.64"></a><span id="l5.64"> &lt;hbox id=&quot;msgHeaderView&quot; collapsed=&quot;true&quot; class=&quot;main-header-area&quot;&gt;</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineminus">-  &lt;deck id=&quot;msgHeaderViewDeck&quot; selectedIndex=&quot;0&quot; </span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+  &lt;deck id=&quot;msgHeaderViewDeck&quot; selectedIndex=&quot;0&quot;</span>
<a href="#l5.67"></a><span id="l5.67">         persist=&quot;selectedIndex&quot; flex=&quot;1&quot;</span>
<a href="#l5.68"></a><span id="l5.68">         context=&quot;header-toolbar-context-menu&quot;&gt;</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-  </span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+</span>
<a href="#l5.71"></a><span id="l5.71">     &lt;!-- the message pane consists of 3 'boxes'. Box #2 is the expanded headers view (the default view) --&gt;</span>
<a href="#l5.72"></a><span id="l5.72">     &lt;vbox id=&quot;expandedHeaderView&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l5.73"></a><span id="l5.73"> </span>
<a href="#l5.74"></a><span id="l5.74">       &lt;!-- a convenience box for ease of extension overlaying --&gt;</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineminus">-      &lt;vbox id=&quot;expandedHeadersBox&quot; flex=&quot;1&quot;&gt; </span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+      &lt;vbox id=&quot;expandedHeadersBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l5.77"></a><span id="l5.77"> </span>
<a href="#l5.78"></a><span id="l5.78">         &lt;html:div id=&quot;expandedHeadersTopBox&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l5.79"></a><span id="l5.79"> </span>
<a href="#l5.80"></a><span id="l5.80">           &lt;toolbox id=&quot;header-view-toolbox&quot;</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+                   class=&quot;inline-toolbox&quot;</span>
<a href="#l5.82"></a><span id="l5.82">                    defaulticonsize=&quot;small&quot;</span>
<a href="#l5.83"></a><span id="l5.83">                    minwidth=&quot;50px&quot;</span>
<a href="#l5.84"></a><span id="l5.84">                    defaultlabelalign=&quot;end&quot;</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineminus">-                   defaultmode=&quot;full&quot;&gt;</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+                   defaultmode=&quot;full&quot;</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+                   inlinetoolbox=&quot;true&quot;&gt;</span>
<a href="#l5.88"></a><span id="l5.88">             &lt;toolbarpalette id=&quot;header-view-toolbar-palette&quot;&gt;</span>
<a href="#l5.89"></a><span id="l5.89">               &lt;!-- XXXdmose need to move these commands to a controller, either</span>
<a href="#l5.90"></a><span id="l5.90">                    on the header view, the message pane, or the default</span>
<a href="#l5.91"></a><span id="l5.91">                    controller --&gt;</span>
<a href="#l5.92"></a><span id="l5.92"> </span>
<a href="#l5.93"></a><span id="l5.93">               &lt;!-- XXXdmose need to audit our shortcut/a11y setup and make sure</span>
<a href="#l5.94"></a><span id="l5.94">                    these buttons are doing the right thing --&gt;</span>
<a href="#l5.95"></a><span id="l5.95"> </span>
<a href="#l5.96"></a><span id="l5.96" class="difflineat">@@ -240,18 +249,19 @@</span>
<a href="#l5.97"></a><span id="l5.97">                               observes=&quot;button_reply&quot;</span>
<a href="#l5.98"></a><span id="l5.98">                               oncommand=&quot;MsgReplyMessage(event); event.stopPropagation();</span>
<a href="#l5.99"></a><span id="l5.99">                                          RestoreFocusAfterHdrButton();&quot;/&gt;</span>
<a href="#l5.100"></a><span id="l5.100">                   &lt;/menupopup&gt;</span>
<a href="#l5.101"></a><span id="l5.101">                 &lt;/toolbarbutton&gt;</span>
<a href="#l5.102"></a><span id="l5.102">               &lt;/toolbaritem&gt;</span>
<a href="#l5.103"></a><span id="l5.103">             &lt;/toolbarpalette&gt;</span>
<a href="#l5.104"></a><span id="l5.104"> </span>
<a href="#l5.105"></a><span id="l5.105" class="difflineminus">-            &lt;toolbar id=&quot;header-view-toolbar&quot; align=&quot;start&quot; customizable=&quot;true&quot;</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineminus">-                     mode=&quot;full&quot; context=&quot;header-toolbar-context-menu&quot;</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineplus">+            &lt;toolbar id=&quot;header-view-toolbar&quot; class=&quot;inline-toolbar&quot; align=&quot;start&quot;</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+                     customizable=&quot;true&quot; mode=&quot;full&quot;</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineplus">+                     context=&quot;header-toolbar-context-menu&quot;</span>
<a href="#l5.110"></a><span id="l5.110">                      defaulticonsize=&quot;small&quot; defaultmode=&quot;full&quot;</span>
<a href="#l5.111"></a><span id="l5.111">                      defaultset=&quot;hdrReplyToSenderButton,hdrSmartReplyButton,hdrForwardButton,hdrArchiveButton,hdrJunkButton,hdrTrashButton&quot;/&gt;</span>
<a href="#l5.112"></a><span id="l5.112">           &lt;/toolbox&gt;</span>
<a href="#l5.113"></a><span id="l5.113"> </span>
<a href="#l5.114"></a><span id="l5.114">           &lt;!-- Theoretically, we should be able to replace this grid with just</span>
<a href="#l5.115"></a><span id="l5.115">                an hbox.  Unfortunately, doing that makes it very hard to sync</span>
<a href="#l5.116"></a><span id="l5.116">                the column sizes between the name columns, because for currently</span>
<a href="#l5.117"></a><span id="l5.117">                unclear reasons, the .clientWidth of a column is wider than the</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineat">@@ -441,17 +451,93 @@</span>
<a href="#l5.119"></a><span id="l5.119">   &lt;label id=&quot;editMessageDescription&quot; control=&quot;editMessageButton&quot;</span>
<a href="#l5.120"></a><span id="l5.120">          value=&quot;&amp;editMessageDescription.label;&quot;/&gt;</span>
<a href="#l5.121"></a><span id="l5.121">   &lt;button id=&quot;editMessageButton&quot; label=&quot;&amp;editMessageButton.label;&quot;</span>
<a href="#l5.122"></a><span id="l5.122">           oncommand=&quot;MsgComposeDraftMessage()&quot;/&gt;</span>
<a href="#l5.123"></a><span id="l5.123"> &lt;/hbox&gt;</span>
<a href="#l5.124"></a><span id="l5.124"> </span>
<a href="#l5.125"></a><span id="l5.125"> &lt;!-- the message pane consists of 4 'boxes'. Box #4 is the attachment box which</span>
<a href="#l5.126"></a><span id="l5.126">      can be toggled into a slim or an expanded view --&gt;</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineminus">-&lt;hbox id=&quot;attachmentView&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineminus">-  &lt;description selectable=&quot;true&quot; id=&quot;attachmentList&quot; flex=&quot;1&quot;</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineminus">-               seltype=&quot;multiple&quot; disableKeyNavigation=&quot;true&quot;</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineminus">-               onclick=&quot;attachmentListClick(event);&quot; ondraggesture=&quot;nsDragAndDrop.startDrag(event,attachmentAreaDNDObserver);&quot;</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineminus">-               ondragover=&quot;nsDragAndDrop.dragOver(event, attachmentAreaDNDObserver);&quot; context=&quot;attachmentListContext&quot;&gt;</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineminus">-  &lt;/description&gt;</span>
<a href="#l5.133"></a><span id="l5.133" class="difflineminus">-&lt;/hbox&gt;</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineplus">+&lt;vbox id=&quot;attachmentView&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineplus">+  &lt;hbox align=&quot;center&quot; context=&quot;attachment-toolbar-context-menu&quot; width=&quot;200&quot;&gt;</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineplus">+    &lt;button type=&quot;checkbox&quot; id=&quot;attachmentToggle&quot; oncommand=&quot;toggleAttachmentList();&quot;/&gt;</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineplus">+    &lt;image id=&quot;attachmentIcon&quot;/&gt;</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineplus">+    &lt;label id=&quot;attachmentCount&quot; crop=&quot;center&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineplus">+    &lt;label id=&quot;attachmentSize&quot;/&gt;</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineplus">+    &lt;!-- Use a very large flex value here so that attachmentCount doesn't take</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineplus">+         up more space than necessary, but still crops itself if there's not</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineplus">+         enough space. --&gt;</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineplus">+    &lt;spacer flex=&quot;9999&quot;/&gt;</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineplus">+</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineplus">+    &lt;toolbox id=&quot;attachment-view-toolbox&quot;</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineplus">+             class=&quot;inline-toolbox&quot;</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineplus">+             defaulticonsize=&quot;small&quot;</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineplus">+             minwidth=&quot;50px&quot;</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineplus">+             defaultlabelalign=&quot;end&quot;</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineplus">+             defaultmode=&quot;full&quot;</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineplus">+             inlinetoolbox=&quot;true&quot;&gt;</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineplus">+      &lt;toolbarpalette id=&quot;attachment-view-toolbar-palette&quot;&gt;</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineplus">+        &lt;toolbaritem id=&quot;attachmentSaveAll&quot;&gt;</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineplus">+          &lt;toolbarbutton type=&quot;menu-button&quot; id=&quot;attachmentSaveAllSingle&quot;</span>
<a href="#l5.155"></a><span id="l5.155" class="difflineplus">+                         class=&quot;toolbarbutton-1 msgHeaderView-button&quot;</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineplus">+                         label=&quot;&amp;saveAttachmentButton.label;&quot;</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineplus">+                         tooltiptext=&quot;&amp;saveAttachmentButton.tooltip;&quot;</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineplus">+                         oncommand=&quot;HandleAllAttachments('saveAs'); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.159"></a><span id="l5.159" class="difflineplus">+                         hidden=&quot;true&quot;&gt;</span>
<a href="#l5.160"></a><span id="l5.160" class="difflineplus">+            &lt;menupopup onpopupshowing=&quot;onShowSaveAttachmentMenuSingle();&quot;&gt;</span>
<a href="#l5.161"></a><span id="l5.161" class="difflineplus">+              &lt;menuitem id=&quot;button-openAttachment&quot;</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('open'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.163"></a><span id="l5.163" class="difflineplus">+                        label=&quot;&amp;openAttachmentMenuItem.label;&quot;</span>
<a href="#l5.164"></a><span id="l5.164" class="difflineplus">+                        accesskey=&quot;&amp;openAttachmentMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.165"></a><span id="l5.165" class="difflineplus">+              &lt;menuitem id=&quot;button-saveAttachment&quot;</span>
<a href="#l5.166"></a><span id="l5.166" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('saveAs'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineplus">+                        label=&quot;&amp;saveAsAttachmentMenuItem.label;&quot;</span>
<a href="#l5.168"></a><span id="l5.168" class="difflineplus">+                        accesskey=&quot;&amp;saveAsAttachmentMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.169"></a><span id="l5.169" class="difflineplus">+              &lt;menuitem id=&quot;button-detachAttachment&quot;</span>
<a href="#l5.170"></a><span id="l5.170" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('detach'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineplus">+                        label=&quot;&amp;detachAttachmentMenuItem.label;&quot;</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineplus">+                        accesskey=&quot;&amp;detachAttachmentMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.173"></a><span id="l5.173" class="difflineplus">+              &lt;menuitem id=&quot;button-deleteAttachment&quot;</span>
<a href="#l5.174"></a><span id="l5.174" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('delete'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.175"></a><span id="l5.175" class="difflineplus">+                        label=&quot;&amp;deleteAttachmentMenuItem.label;&quot;</span>
<a href="#l5.176"></a><span id="l5.176" class="difflineplus">+                        accesskey=&quot;&amp;deleteAttachmentMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.177"></a><span id="l5.177" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l5.178"></a><span id="l5.178" class="difflineplus">+          &lt;/toolbarbutton&gt;</span>
<a href="#l5.179"></a><span id="l5.179" class="difflineplus">+          &lt;toolbarbutton type=&quot;menu-button&quot; id=&quot;attachmentSaveAllMultiple&quot;</span>
<a href="#l5.180"></a><span id="l5.180" class="difflineplus">+                         class=&quot;toolbarbutton-1 msgHeaderView-button&quot;</span>
<a href="#l5.181"></a><span id="l5.181" class="difflineplus">+                         label=&quot;&amp;saveAllAttachmentsButton.label;&quot;</span>
<a href="#l5.182"></a><span id="l5.182" class="difflineplus">+                         tooltiptext=&quot;&amp;saveAllAttachmentsButton.tooltip;&quot;</span>
<a href="#l5.183"></a><span id="l5.183" class="difflineplus">+                         oncommand=&quot;HandleAllAttachments('save'); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.184"></a><span id="l5.184" class="difflineplus">+                         hidden=&quot;true&quot;&gt;</span>
<a href="#l5.185"></a><span id="l5.185" class="difflineplus">+            &lt;menupopup onpopupshowing=&quot;onShowSaveAttachmentMenuMultiple();&quot;&gt;</span>
<a href="#l5.186"></a><span id="l5.186" class="difflineplus">+              &lt;menuitem id=&quot;button-saveAllAttachments&quot;</span>
<a href="#l5.187"></a><span id="l5.187" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('save'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.188"></a><span id="l5.188" class="difflineplus">+                        label=&quot;&amp;saveAllAttachmentsMenuItem.label;&quot;</span>
<a href="#l5.189"></a><span id="l5.189" class="difflineplus">+                        accesskey=&quot;&amp;saveAllAttachmentsMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineplus">+              &lt;menuitem id=&quot;button-detachAllAttachments&quot;</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('detach'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.192"></a><span id="l5.192" class="difflineplus">+                        label=&quot;&amp;detachAllAttachmentsMenuItem.label;&quot;</span>
<a href="#l5.193"></a><span id="l5.193" class="difflineplus">+                        accesskey=&quot;&amp;detachAllAttachmentsMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.194"></a><span id="l5.194" class="difflineplus">+              &lt;menuitem id=&quot;button-deleteAllAttachments&quot;</span>
<a href="#l5.195"></a><span id="l5.195" class="difflineplus">+                        oncommand=&quot;HandleAllAttachments('delete'); event.stopPropagation(); RestoreFocusAfterHdrButton();&quot;</span>
<a href="#l5.196"></a><span id="l5.196" class="difflineplus">+                        label=&quot;&amp;deleteAllAttachmentsMenuItem.label;&quot;</span>
<a href="#l5.197"></a><span id="l5.197" class="difflineplus">+                        accesskey=&quot;&amp;deleteAllAttachmentsMenuItem.accesskey;&quot;/&gt;</span>
<a href="#l5.198"></a><span id="l5.198" class="difflineplus">+            &lt;/menupopup&gt;</span>
<a href="#l5.199"></a><span id="l5.199" class="difflineplus">+          &lt;/toolbarbutton&gt;</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineplus">+        &lt;/toolbaritem&gt;</span>
<a href="#l5.201"></a><span id="l5.201" class="difflineplus">+      &lt;/toolbarpalette&gt;</span>
<a href="#l5.202"></a><span id="l5.202" class="difflineplus">+      &lt;toolbar id=&quot;attachment-view-toolbar&quot; class=&quot;inline-toolbar&quot; align=&quot;start&quot;</span>
<a href="#l5.203"></a><span id="l5.203" class="difflineplus">+               customizable=&quot;true&quot; mode=&quot;full&quot;</span>
<a href="#l5.204"></a><span id="l5.204" class="difflineplus">+               context=&quot;attachment-toolbar-context-menu&quot;</span>
<a href="#l5.205"></a><span id="l5.205" class="difflineplus">+               defaulticonsize=&quot;small&quot; defaultmode=&quot;full&quot;</span>
<a href="#l5.206"></a><span id="l5.206" class="difflineplus">+               defaultset=&quot;attachmentSaveAll&quot;/&gt;</span>
<a href="#l5.207"></a><span id="l5.207" class="difflineplus">+    &lt;/toolbox&gt;</span>
<a href="#l5.208"></a><span id="l5.208" class="difflineplus">+  &lt;/hbox&gt;</span>
<a href="#l5.209"></a><span id="l5.209" class="difflineplus">+  &lt;box id=&quot;attachmentListWrapper&quot; flex=&quot;1&quot; collapsed=&quot;true&quot;&gt;</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineplus">+    &lt;description selectable=&quot;true&quot; id=&quot;attachmentList&quot; flex=&quot;1&quot;</span>
<a href="#l5.211"></a><span id="l5.211" class="difflineplus">+                 seltype=&quot;multiple&quot;</span>
<a href="#l5.212"></a><span id="l5.212" class="difflineplus">+                 onclick=&quot;attachmentListClick(event);&quot; ondraggesture=&quot;nsDragAndDrop.startDrag(event,attachmentAreaDNDObserver);&quot;</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineplus">+                 ondragover=&quot;nsDragAndDrop.dragOver(event, attachmentAreaDNDObserver);&quot; context=&quot;attachmentListContext&quot;&gt;</span>
<a href="#l5.214"></a><span id="l5.214" class="difflineplus">+    &lt;/description&gt;</span>
<a href="#l5.215"></a><span id="l5.215" class="difflineplus">+  &lt;/box&gt;</span>
<a href="#l5.216"></a><span id="l5.216" class="difflineplus">+&lt;/vbox&gt;</span>
<a href="#l5.217"></a><span id="l5.217"> </span>
<a href="#l5.218"></a><span id="l5.218"> &lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/messenger.properties</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/messenger.properties</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -340,16 +340,26 @@ detachLabel=Detach</span>
<a href="#l6.4"></a><span id="l6.4"> detachLabelAccesskey=D</span>
<a href="#l6.5"></a><span id="l6.5"> deleteLabel=Delete</span>
<a href="#l6.6"></a><span id="l6.6"> deleteLabelAccesskey=E</span>
<a href="#l6.7"></a><span id="l6.7"> deleteAttachments=The following attachments will be permanently deleted from this message:\n%S\nThis action cannot be undone. Do you wish to continue?</span>
<a href="#l6.8"></a><span id="l6.8"> detachAttachments=The following attachments have been successfully saved and will now be permanently deleted from this message:\n%S\nThis action cannot be undone. Do you wish to continue?</span>
<a href="#l6.9"></a><span id="l6.9"> deleteAttachmentFailure=Failed to delete the selected attachments.</span>
<a href="#l6.10"></a><span id="l6.10"> emptyAttachment=This attachment appears to be empty.\nPlease check with the person who sent this.\nOften company firewalls or antivirus programs will destroy attachments.</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+# LOCALIZATION NOTE (attachmentCount): Semi-colon list of plural forms.</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+# See: http://developer.mozilla.org/en/Localization_and_Plurals</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+# #1 number of attachments</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+attachmentCount=#1 attachment;#1 attachments</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+# LOCALIZATION NOTE (attachmentCountAndName): This is the format for the</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+# attachment header when a message has only one attachment. %1$S is the</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+# attachment count, and %2$S is the attachment's filename.</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+attachmentCountAndName=%1$S: %2$S</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+</span>
<a href="#l6.22"></a><span id="l6.22"> # This is the format for prepending accesskeys to the</span>
<a href="#l6.23"></a><span id="l6.23"> # each of the attachments in the file|attachments menu:</span>
<a href="#l6.24"></a><span id="l6.24"> #   ie: 1 file.txt</span>
<a href="#l6.25"></a><span id="l6.25"> #       2 another file.txt</span>
<a href="#l6.26"></a><span id="l6.26"> attachmentDisplayNameFormat=%S %S</span>
<a href="#l6.27"></a><span id="l6.27"> </span>
<a href="#l6.28"></a><span id="l6.28"> # This is the heading for the attachment summary when printing an email</span>
<a href="#l6.29"></a><span id="l6.29"> attachmentsPrintHeader=Attachments:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/msgHdrViewOverlay.dtd</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -94,29 +94,52 @@</span>
<a href="#l7.4"></a><span id="l7.4"> &lt;!ENTITY markAsUnreadMenuItem.accesskey &quot;r&quot;&gt;</span>
<a href="#l7.5"></a><span id="l7.5"> &lt;!ENTITY saveAsMenuItem.label &quot;save as&quot;&gt;</span>
<a href="#l7.6"></a><span id="l7.6"> &lt;!ENTITY saveAsMenuItem.accesskey &quot;s&quot;&gt;</span>
<a href="#l7.7"></a><span id="l7.7"> &lt;!ENTITY viewSourceMenuItem.label &quot;view source&quot;&gt;</span>
<a href="#l7.8"></a><span id="l7.8"> &lt;!ENTITY viewSourceMenuItem.accesskey &quot;v&quot;&gt;</span>
<a href="#l7.9"></a><span id="l7.9"> &lt;!ENTITY otherActionsPrint.label &quot;print&quot;&gt;</span>
<a href="#l7.10"></a><span id="l7.10"> &lt;!ENTITY otherActionsPrint.accesskey &quot;p&quot;&gt;</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+&lt;!-- Attachment context menu items --&gt;</span>
<a href="#l7.13"></a><span id="l7.13"> &lt;!ENTITY openAttachmentCmd.label    &quot;Open&quot;&gt;</span>
<a href="#l7.14"></a><span id="l7.14"> &lt;!ENTITY openAttachmentCmd.accesskey    &quot;O&quot;&gt;</span>
<a href="#l7.15"></a><span id="l7.15"> &lt;!ENTITY saveAsAttachmentCmd.label    &quot;Save As&quot;&gt;</span>
<a href="#l7.16"></a><span id="l7.16"> &lt;!ENTITY saveAsAttachmentCmd.accesskey    &quot;A&quot;&gt;</span>
<a href="#l7.17"></a><span id="l7.17"> &lt;!ENTITY detachAttachmentCmd.label    &quot;Detach&quot;&gt;</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+&lt;!ENTITY detachAttachmentCmd.accesskey    &quot;T&quot;&gt;</span>
<a href="#l7.19"></a><span id="l7.19"> &lt;!ENTITY deleteAttachmentCmd.label    &quot;Delete&quot;&gt;</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+&lt;!ENTITY deleteAttachmentCmd.accesskey    &quot;L&quot;&gt;</span>
<a href="#l7.21"></a><span id="l7.21"> &lt;!ENTITY openAllAttachmentsCmd.label    &quot;Open All&quot;&gt;</span>
<a href="#l7.22"></a><span id="l7.22"> &lt;!ENTITY openAllAttachmentsCmd.accesskey    &quot;O&quot;&gt;</span>
<a href="#l7.23"></a><span id="l7.23"> &lt;!ENTITY saveAllAttachmentsCmd.label    &quot;Save All&quot;&gt;</span>
<a href="#l7.24"></a><span id="l7.24"> &lt;!ENTITY saveAllAttachmentsCmd.accesskey    &quot;S&quot;&gt;</span>
<a href="#l7.25"></a><span id="l7.25"> &lt;!ENTITY detachAllAttachmentsCmd.label    &quot;Detach All&quot;&gt;</span>
<a href="#l7.26"></a><span id="l7.26"> &lt;!ENTITY detachAllAttachmentsCmd.accesskey    &quot;D&quot;&gt;</span>
<a href="#l7.27"></a><span id="l7.27"> &lt;!ENTITY deleteAllAttachmentsCmd.label    &quot;Delete All&quot;&gt;</span>
<a href="#l7.28"></a><span id="l7.28"> &lt;!ENTITY deleteAllAttachmentsCmd.accesskey    &quot;E&quot;&gt;</span>
<a href="#l7.29"></a><span id="l7.29"> </span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+&lt;!-- Attachment toolbar items --&gt;</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+&lt;!ENTITY saveAttachmentButton.label       &quot;save&quot;&gt;</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+&lt;!ENTITY saveAttachmentButton.tooltip     &quot;save the attached file&quot;&gt;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+&lt;!ENTITY saveAllAttachmentsButton.label   &quot;save all&quot;&gt;</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+&lt;!ENTITY saveAllAttachmentsButton.tooltip &quot;save all the attached files&quot;&gt;</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+&lt;!ENTITY openAttachmentMenuItem.label     &quot;open&quot;&gt;</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+&lt;!ENTITY openAttachmentMenuItem.accesskey    &quot;o&quot;&gt;</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+&lt;!ENTITY saveAsAttachmentMenuItem.label    &quot;save as&quot;&gt;</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+&lt;!ENTITY saveAsAttachmentMenuItem.accesskey    &quot;s&quot;&gt;</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+&lt;!ENTITY detachAttachmentMenuItem.label    &quot;detach&quot;&gt;</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+&lt;!ENTITY detachAttachmentMenuItem.accesskey    &quot;d&quot;&gt;</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+&lt;!ENTITY deleteAttachmentMenuItem.label    &quot;delete&quot;&gt;</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+&lt;!ENTITY deleteAttachmentMenuItem.accesskey    &quot;e&quot;&gt;</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+&lt;!ENTITY saveAllAttachmentsMenuItem.label    &quot;save all&quot;&gt;</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+&lt;!ENTITY saveAllAttachmentsMenuItem.accesskey    &quot;s&quot;&gt;</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+&lt;!ENTITY detachAllAttachmentsMenuItem.label    &quot;detach all&quot;&gt;</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+&lt;!ENTITY detachAllAttachmentsMenuItem.accesskey    &quot;d&quot;&gt;</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+&lt;!ENTITY deleteAllAttachmentsMenuItem.label    &quot;delete all&quot;&gt;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+&lt;!ENTITY deleteAllAttachmentsMenuItem.accesskey    &quot;e&quot;&gt;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+</span>
<a href="#l7.50"></a><span id="l7.50"> &lt;!ENTITY copyLinkCmd.label        &quot;Copy Link Location&quot;&gt;</span>
<a href="#l7.51"></a><span id="l7.51"> &lt;!ENTITY copyLinkCmd.accesskey    &quot;C&quot;&gt;</span>
<a href="#l7.52"></a><span id="l7.52"> </span>
<a href="#l7.53"></a><span id="l7.53"> &lt;!ENTITY CopyMessageId.label &quot;Copy Message-ID&quot;&gt;</span>
<a href="#l7.54"></a><span id="l7.54"> &lt;!ENTITY OpenMessageForMsgId.label &quot;Open Message For ID&quot;&gt;</span>
<a href="#l7.55"></a><span id="l7.55"> &lt;!ENTITY OpenBrowserWithMsgId.label &quot;Open Browser With Message-ID&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/test/mozmill/attachment/test-attachment-size.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/test/mozmill/attachment/test-attachment-size.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -14,17 +14,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">  * The Original Code is mozilla.org code.</span>
<a href="#l8.5"></a><span id="l8.5">  *</span>
<a href="#l8.6"></a><span id="l8.6">  * The Initial Developer of the Original Code is</span>
<a href="#l8.7"></a><span id="l8.7">  * Mozilla Messaging.</span>
<a href="#l8.8"></a><span id="l8.8">  * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l8.9"></a><span id="l8.9">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l8.10"></a><span id="l8.10">  *</span>
<a href="#l8.11"></a><span id="l8.11">  * Contributor(s):</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">- *   Jim Porter &lt;jvporter@wisc.edu&gt;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+ *   Jim Porter &lt;squibblyflabbetydoo@gmail.com&gt;</span>
<a href="#l8.14"></a><span id="l8.14">  *</span>
<a href="#l8.15"></a><span id="l8.15">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.16"></a><span id="l8.16">  * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l8.17"></a><span id="l8.17">  * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.18"></a><span id="l8.18">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.19"></a><span id="l8.19">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.20"></a><span id="l8.20">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.21"></a><span id="l8.21">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -60,17 +60,84 @@ const imageAttachment =</span>
<a href="#l8.23"></a><span id="l8.23">   'FlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA' +</span>
<a href="#l8.24"></a><span id="l8.24">   'A5SURBVCiRY/z//z8DKYCJJNXkaGBgYGD4D8NQ5zUgiTVAxeBqSLaBkVRPM0KtIhrQ3km0jwe' +</span>
<a href="#l8.25"></a><span id="l8.25">   'SNQAAlmAY+71EgFoAAAAASUVORK5CYII=';</span>
<a href="#l8.26"></a><span id="l8.26"> const imageSize = 188;</span>
<a href="#l8.27"></a><span id="l8.27"> </span>
<a href="#l8.28"></a><span id="l8.28"> const detachedName = './attachment.txt';</span>
<a href="#l8.29"></a><span id="l8.29"> const missingName = './nonexistent.txt';</span>
<a href="#l8.30"></a><span id="l8.30"> const deletedName = 'deleted.txt';</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-var detachedSize;</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+// create some messages that have various types of attachments</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+var messages = [</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+  { name: 'text_attachment',</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+    attachments: [{ body: textAttachment,</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+                    filename: 'ubik.txt',</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+    attachmentSizes: [textAttachment.length],</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+  },</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+  { name: 'binary_attachment',</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+    attachments: [{ body: binaryAttachment,</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+                    contentType: 'application/x-ubik',</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+                    filename: 'ubik',</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+    attachmentSizes: [binaryAttachment.length],</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+  },</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+  { name: 'image_attachment',</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+    attachments: [{ body: imageAttachment,</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+                    contentType: 'image/png',</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+                    filename: 'lines.png',</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+                    encoding: 'base64',</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+    attachmentSizes: [imageSize],</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+  },</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+  { name: 'detached_attachment',</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+    bodyPart: null,</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+    attachmentSizes: [null],</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+  },</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+  { name: 'detached_attachment_with_missing_file',</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+    bodyPart: null,</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+    attachmentSizes: [null],</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+  },</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+  { name: 'deleted_attachment',</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+    bodyPart: null,</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+    attachmentSizes: [null],</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+  },</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+  { name: 'multiple_attachments',</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+    attachments: [{ body: textAttachment,</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+                    filename: 'ubik.txt',</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+                    format: '' },</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+                  { body: binaryAttachment,</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+                    contentType: 'application/x-ubik',</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+                    filename: 'ubik',</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+    attachmentSizes: [textAttachment.length, binaryAttachment.length],</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+  },</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+  { name: 'multiple_attachments_one_detached',</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+    bodyPart: null,</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+    attachments: [{ body: textAttachment,</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+                    filename: 'ubik.txt',</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+    attachmentSizes: [null, textAttachment.length],</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+  },</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+  { name: 'multiple_attachments_one_detached_with_missing_file',</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+    bodyPart: null,</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+    attachments: [{ body: textAttachment,</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineplus">+                    filename: 'ubik.txt',</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineplus">+    attachmentSizes: [null, textAttachment.length],</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineplus">+  },</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineplus">+  { name: 'multiple_attachments_one_deleted',</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineplus">+    bodyPart: null,</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineplus">+    attachments: [{ body: textAttachment,</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineplus">+                    filename: 'ubik.txt',</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineplus">+                    format: '' }],</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+    attachmentSizes: [null, binaryAttachment.length],</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+  },</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+];</span>
<a href="#l8.100"></a><span id="l8.100"> </span>
<a href="#l8.101"></a><span id="l8.101"> function setupModule(module) {</span>
<a href="#l8.102"></a><span id="l8.102">   let fdh = collector.getModule('folder-display-helpers');</span>
<a href="#l8.103"></a><span id="l8.103">   fdh.installInto(module);</span>
<a href="#l8.104"></a><span id="l8.104">   let wh = collector.getModule('window-helpers');</span>
<a href="#l8.105"></a><span id="l8.105">   wh.installInto(module);</span>
<a href="#l8.106"></a><span id="l8.106"> </span>
<a href="#l8.107"></a><span id="l8.107">   messenger = Components.classes['@mozilla.org/messenger;1']</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineat">@@ -80,65 +147,55 @@ function setupModule(module) {</span>
<a href="#l8.109"></a><span id="l8.109">    * counts the trailing newline for an attachment MIME part. Most of the time,</span>
<a href="#l8.110"></a><span id="l8.110">    * assuming attachment has N bytes (no matter what's inside, newlines or</span>
<a href="#l8.111"></a><span id="l8.111">    * not), libmime will return N + 1 bytes. On Linux and Mac, this always</span>
<a href="#l8.112"></a><span id="l8.112">    * holds. However, on Windows, if the attachment is not encoded (that is, is</span>
<a href="#l8.113"></a><span id="l8.113">    * inline text), libmime will return N + 2 bytes.</span>
<a href="#l8.114"></a><span id="l8.114">    */</span>
<a href="#l8.115"></a><span id="l8.115">   epsilon = ('@mozilla.org/windows-registry-key;1' in Components.classes) ? 2 : 1;</span>
<a href="#l8.116"></a><span id="l8.116"> </span>
<a href="#l8.117"></a><span id="l8.117" class="difflineminus">-  folder = create_folder('AttachmentSizeA');</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineplus">+  // set up our detached/deleted attachments</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineplus">+  var thisFilePath = os.getFileForPath(__file__);</span>
<a href="#l8.120"></a><span id="l8.120"> </span>
<a href="#l8.121"></a><span id="l8.121" class="difflineminus">-  // set up our detached/deleted attachments</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineminus">-  let thisFilePath = os.getFileForPath(__file__);</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineplus">+  var detachedFile = os.getFileForPath(os.abspath(detachedName, thisFilePath));</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineplus">+  var detached = createBodyPart(</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineplus">+    'Here is a file',</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineplus">+    [createDeletedAttachment(detachedFile, 'text/plain', true)]</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineplus">+  );</span>
<a href="#l8.128"></a><span id="l8.128"> </span>
<a href="#l8.129"></a><span id="l8.129" class="difflineminus">-  let detachedFile = os.getFileForPath(os.abspath(detachedName, thisFilePath));</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineminus">-  let detached = {</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineminus">-    body: 'Here is a file',</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineminus">-    attachments: [ createDeletedAttachment(detachedFile, 'text/plain', true)] };</span>
<a href="#l8.133"></a><span id="l8.133" class="difflineminus">-  detachedSize = detachedFile.fileSize;</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineplus">+  var missingFile = os.getFileForPath(os.abspath(missingName, thisFilePath));</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+  var missing = createBodyPart(</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineplus">+    'Here is a file (but you deleted the external file, you silly oaf!)',</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+     [createDeletedAttachment(missingFile, 'text/plain', true)]</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineplus">+  );</span>
<a href="#l8.139"></a><span id="l8.139"> </span>
<a href="#l8.140"></a><span id="l8.140" class="difflineminus">-  let missingFile = os.getFileForPath(os.abspath(missingName, thisFilePath));</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineminus">-  let missing = {</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineminus">-    body: 'Here is a file (but you deleted the external file, you silly oaf!)',</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineminus">-    attachments: [ createDeletedAttachment(missingFile, 'text/plain', true)] };</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineminus">-</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineminus">-  let deleted = {</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineminus">-    body: 'Here is a file that you deleted',</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineminus">-    attachments: [ createDeletedAttachment(deletedName, 'text/plain')] };</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineplus">+  var deleted = createBodyPart(</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineplus">+    'Here is a file that you deleted',</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineplus">+    [ createDeletedAttachment(deletedName, 'text/plain')]</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineplus">+  );</span>
<a href="#l8.152"></a><span id="l8.152"> </span>
<a href="#l8.153"></a><span id="l8.153" class="difflineminus">-  // create some messages that have various types of attachments</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineminus">-  let messages = [</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineminus">-    // text attachment</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineminus">-    { attachments: [{ body: textAttachment,</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineminus">-                      filename: 'ubik.txt',</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineminus">-                      format: '' }]},</span>
<a href="#l8.159"></a><span id="l8.159" class="difflineminus">-    // binary attachment</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineminus">-    { attachments: [{ body: binaryAttachment,</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineminus">-                      contentType: 'application/x-ubik',</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineminus">-                      filename: 'ubik',</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineminus">-                      format: '' }]},</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineminus">-    // (inline) image attachment</span>
<a href="#l8.165"></a><span id="l8.165" class="difflineminus">-    { attachments: [{ body: imageAttachment,</span>
<a href="#l8.166"></a><span id="l8.166" class="difflineminus">-                      contentType: 'image/png',</span>
<a href="#l8.167"></a><span id="l8.167" class="difflineminus">-                      filename: 'lines.png',</span>
<a href="#l8.168"></a><span id="l8.168" class="difflineminus">-                      encoding: 'base64',</span>
<a href="#l8.169"></a><span id="l8.169" class="difflineminus">-                      format: '' }]},</span>
<a href="#l8.170"></a><span id="l8.170" class="difflineminus">-    // detached attachment</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineminus">-    { bodyPart: createBodyPart(detached.body,</span>
<a href="#l8.172"></a><span id="l8.172" class="difflineminus">-                               detached.attachments) },</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-    // detached attachment with missing file</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineminus">-    { bodyPart: createBodyPart(missing.body,</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineminus">-                               missing.attachments) },</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineminus">-    // deleted attachment</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineminus">-    { bodyPart: createBodyPart(deleted.body,</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineminus">-                               deleted.attachments) },</span>
<a href="#l8.179"></a><span id="l8.179" class="difflineminus">-    ];</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineplus">+  folder = create_folder('AttachmentSizeA');</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineplus">+  for (let i = 0; i &lt; messages.length; i++) {</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineplus">+    // First, add any missing info to the message object.</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineplus">+    switch(messages[i].name) {</span>
<a href="#l8.184"></a><span id="l8.184" class="difflineplus">+      case 'detached_attachment':</span>
<a href="#l8.185"></a><span id="l8.185" class="difflineplus">+      case 'multiple_attachments_one_detached':</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineplus">+        messages[i].bodyPart = detached;</span>
<a href="#l8.187"></a><span id="l8.187" class="difflineplus">+        messages[i].attachmentSizes[0] = detachedFile.fileSize;</span>
<a href="#l8.188"></a><span id="l8.188" class="difflineplus">+        break;</span>
<a href="#l8.189"></a><span id="l8.189" class="difflineplus">+      case 'detached_attachment_with_missing_file':</span>
<a href="#l8.190"></a><span id="l8.190" class="difflineplus">+      case 'multiple_attachments_one_detached_with_missing_file':</span>
<a href="#l8.191"></a><span id="l8.191" class="difflineplus">+        messages[i].bodyPart = missing;</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineplus">+        break;</span>
<a href="#l8.193"></a><span id="l8.193" class="difflineplus">+      case 'deleted_attachment':</span>
<a href="#l8.194"></a><span id="l8.194" class="difflineplus">+      case 'multiple_attachments_one_deleted':</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineplus">+        messages[i].bodyPart = deleted;</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineplus">+        break;</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineplus">+    }</span>
<a href="#l8.198"></a><span id="l8.198"> </span>
<a href="#l8.199"></a><span id="l8.199" class="difflineminus">-  for (let i=0; i&lt;messages.length; i++) {</span>
<a href="#l8.200"></a><span id="l8.200">     add_message_to_folder(folder, create_message(messages[i]));</span>
<a href="#l8.201"></a><span id="l8.201">   }</span>
<a href="#l8.202"></a><span id="l8.202"> }</span>
<a href="#l8.203"></a><span id="l8.203"> </span>
<a href="#l8.204"></a><span id="l8.204"> /**</span>
<a href="#l8.205"></a><span id="l8.205">  * Create a body part with attachments for the message generator</span>
<a href="#l8.206"></a><span id="l8.206">  * @param body the text of the main body of the message</span>
<a href="#l8.207"></a><span id="l8.207">  * @param attachments an array of attachment objects (as strings)</span>
<a href="#l8.208"></a><span id="l8.208" class="difflineat">@@ -146,17 +203,17 @@ function setupModule(module) {</span>
<a href="#l8.209"></a><span id="l8.209">  * @return an object suitable for passing as the |bodyPart| for create_message</span>
<a href="#l8.210"></a><span id="l8.210">  */</span>
<a href="#l8.211"></a><span id="l8.211"> function createBodyPart(body, attachments, boundary)</span>
<a href="#l8.212"></a><span id="l8.212"> {</span>
<a href="#l8.213"></a><span id="l8.213">   if (!boundary)</span>
<a href="#l8.214"></a><span id="l8.214">     boundary = '------------CHOPCHOP';</span>
<a href="#l8.215"></a><span id="l8.215"> </span>
<a href="#l8.216"></a><span id="l8.216">   return {</span>
<a href="#l8.217"></a><span id="l8.217" class="difflineminus">-    contentTypeHeaderValue: </span>
<a href="#l8.218"></a><span id="l8.218" class="difflineplus">+    contentTypeHeaderValue:</span>
<a href="#l8.219"></a><span id="l8.219">       'multipart/mixed;\r\n boundary=&quot;' + boundary + '&quot;',</span>
<a href="#l8.220"></a><span id="l8.220">     toMessageString: function() {</span>
<a href="#l8.221"></a><span id="l8.221">       let str = 'This is a multi-part message in MIME format.\r\n' +</span>
<a href="#l8.222"></a><span id="l8.222">                 '--' + boundary + '\r\n' +</span>
<a href="#l8.223"></a><span id="l8.223">                 'Content-Type: text/plain; charset=ISO-8859-1; format=flowed\r\n' +</span>
<a href="#l8.224"></a><span id="l8.224">                 'Content-Transfer-Encoding: 7bit\r\n\r\n' + body + '\r\n\r\n';</span>
<a href="#l8.225"></a><span id="l8.225">       for (let i = 0; i &lt; attachments.length; i++) {</span>
<a href="#l8.226"></a><span id="l8.226">         str += '--' + boundary + '\r\n' +</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineat">@@ -205,20 +262,22 @@ function createDeletedAttachment(file, t</span>
<a href="#l8.228"></a><span id="l8.228">          'Content-Disposition: attachment;\r\n' +</span>
<a href="#l8.229"></a><span id="l8.229">          ' filename=&quot;' + file + '&quot;\r\n\r\n';</span>
<a href="#l8.230"></a><span id="l8.230"> </span>
<a href="#l8.231"></a><span id="l8.231">   return str;</span>
<a href="#l8.232"></a><span id="l8.232"> }</span>
<a href="#l8.233"></a><span id="l8.233"> </span>
<a href="#l8.234"></a><span id="l8.234"> /**</span>
<a href="#l8.235"></a><span id="l8.235">  * Make sure that the attachment's size is what we expect</span>
<a href="#l8.236"></a><span id="l8.236" class="difflineplus">+ * @param index the attachment's index, starting at 0</span>
<a href="#l8.237"></a><span id="l8.237">  * @param expectedSize the expected size of the attachment, in bytes</span>
<a href="#l8.238"></a><span id="l8.238">  */</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineminus">-function check_attachment_size(expectedSize) {</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineminus">-  let node = mc.e('attachmentList', {tagName: 'descriptionitem'});</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineplus">+function check_attachment_size(index, expectedSize) {</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineplus">+  let list = mc.e('attachmentList');</span>
<a href="#l8.243"></a><span id="l8.243" class="difflineplus">+  let node = list.getElementsByTagName('descriptionitem')[index];</span>
<a href="#l8.244"></a><span id="l8.244"> </span>
<a href="#l8.245"></a><span id="l8.245">   // First, let's check that the 'attachmentSize' attribute is correct</span>
<a href="#l8.246"></a><span id="l8.246">   let size = parseInt(node.getAttribute('attachmentSize'));</span>
<a href="#l8.247"></a><span id="l8.247">   if (Math.abs(size - expectedSize) &gt; epsilon)</span>
<a href="#l8.248"></a><span id="l8.248">     throw new Error('Reported attachment size ('+size+') not within epsilon ' +</span>
<a href="#l8.249"></a><span id="l8.249">                     'of actual attachment size ('+expectedSize+')');</span>
<a href="#l8.250"></a><span id="l8.250"> </span>
<a href="#l8.251"></a><span id="l8.251">   // Next, make sure that the formatted size in the label is correct</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineat">@@ -226,61 +285,75 @@ function check_attachment_size(expectedS</span>
<a href="#l8.253"></a><span id="l8.253">   let expectedFormattedSize = messenger.formatFileSize(size);</span>
<a href="#l8.254"></a><span id="l8.254">   if (formattedSize != expectedFormattedSize)</span>
<a href="#l8.255"></a><span id="l8.255">     throw new Error('Formatted attachment size ('+formattedSize+') does not ' +</span>
<a href="#l8.256"></a><span id="l8.256">                     'match expected value ('+expectedFormattedSize+')');</span>
<a href="#l8.257"></a><span id="l8.257"> }</span>
<a href="#l8.258"></a><span id="l8.258"> </span>
<a href="#l8.259"></a><span id="l8.259"> /**</span>
<a href="#l8.260"></a><span id="l8.260">  * Make sure that the attachment's size is not displayed</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineplus">+ * @param index the attachment's index, starting at 0</span>
<a href="#l8.262"></a><span id="l8.262">  */</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineminus">-function check_no_attachment_size() {</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineminus">-  let node = mc.e('attachmentList', {tagName: 'descriptionitem'});</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineplus">+function check_no_attachment_size(index) {</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineplus">+  let list = mc.e('attachmentList');</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineplus">+  let node = list.getElementsByTagName('descriptionitem')[index];</span>
<a href="#l8.268"></a><span id="l8.268"> </span>
<a href="#l8.269"></a><span id="l8.269">   if (node.getAttribute('attachmentSize') != '')</span>
<a href="#l8.270"></a><span id="l8.270">     throw new Error('attachmentSize attribute of deleted attachment should ' +</span>
<a href="#l8.271"></a><span id="l8.271">                     'be null!');</span>
<a href="#l8.272"></a><span id="l8.272"> </span>
<a href="#l8.273"></a><span id="l8.273">   if (/\((.*?)\)$/.exec(node.getAttribute('label')))</span>
<a href="#l8.274"></a><span id="l8.274">     throw new Error('Attachment size should not be displayed!');</span>
<a href="#l8.275"></a><span id="l8.275"> }</span>
<a href="#l8.276"></a><span id="l8.276"> </span>
<a href="#l8.277"></a><span id="l8.277" class="difflineminus">-function test_text_attachment() {</span>
<a href="#l8.278"></a><span id="l8.278" class="difflineminus">-  be_in_folder(folder);</span>
<a href="#l8.279"></a><span id="l8.279" class="difflineminus">-  let curMessage = select_click_row(0);</span>
<a href="#l8.280"></a><span id="l8.280" class="difflineplus">+/**</span>
<a href="#l8.281"></a><span id="l8.281" class="difflineplus">+ * Make sure that the total size of all attachments is what we expect.</span>
<a href="#l8.282"></a><span id="l8.282" class="difflineplus">+ * @param count the expected number of attachments</span>
<a href="#l8.283"></a><span id="l8.283" class="difflineplus">+ */</span>
<a href="#l8.284"></a><span id="l8.284" class="difflineplus">+function check_total_attachment_size(count) {</span>
<a href="#l8.285"></a><span id="l8.285" class="difflineplus">+  let list = mc.e('attachmentList');</span>
<a href="#l8.286"></a><span id="l8.286" class="difflineplus">+  let nodes = list.getElementsByTagName('descriptionitem');</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineplus">+  let sizeNode = mc.e('attachmentSize');</span>
<a href="#l8.288"></a><span id="l8.288"> </span>
<a href="#l8.289"></a><span id="l8.289" class="difflineminus">-  check_attachment_size(textAttachment.length);</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineminus">-}</span>
<a href="#l8.291"></a><span id="l8.291" class="difflineplus">+  if (nodes.length != count)</span>
<a href="#l8.292"></a><span id="l8.292" class="difflineplus">+    throw new Error('Saw '+nodes.length+' attachments, but expected '+count);</span>
<a href="#l8.293"></a><span id="l8.293"> </span>
<a href="#l8.294"></a><span id="l8.294" class="difflineminus">-function test_binary_attachment() {</span>
<a href="#l8.295"></a><span id="l8.295" class="difflineminus">-  be_in_folder(folder);</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineminus">-  let curMessage = select_click_row(1);</span>
<a href="#l8.297"></a><span id="l8.297" class="difflineplus">+  let size = 0;</span>
<a href="#l8.298"></a><span id="l8.298" class="difflineplus">+  for (let i = 0; i &lt; nodes.length; i++) {</span>
<a href="#l8.299"></a><span id="l8.299" class="difflineplus">+    let currSize = parseInt(nodes[i].getAttribute(&quot;attachmentSize&quot;));</span>
<a href="#l8.300"></a><span id="l8.300" class="difflineplus">+    if (currSize)</span>
<a href="#l8.301"></a><span id="l8.301" class="difflineplus">+      size += currSize;</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineplus">+  }</span>
<a href="#l8.303"></a><span id="l8.303"> </span>
<a href="#l8.304"></a><span id="l8.304" class="difflineminus">-  check_attachment_size(binaryAttachment.length);</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineminus">-}</span>
<a href="#l8.306"></a><span id="l8.306" class="difflineminus">-</span>
<a href="#l8.307"></a><span id="l8.307" class="difflineminus">-function test_image_attachment() {</span>
<a href="#l8.308"></a><span id="l8.308" class="difflineminus">-  be_in_folder(folder);</span>
<a href="#l8.309"></a><span id="l8.309" class="difflineminus">-  let curMessage = select_click_row(2);</span>
<a href="#l8.310"></a><span id="l8.310" class="difflineminus">-</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineminus">-  check_attachment_size(imageSize);</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineplus">+  // Next, make sure that the formatted size in the label is correct</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineplus">+  let formattedSize = sizeNode.getAttribute('value');</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineplus">+  let expectedFormattedSize = messenger.formatFileSize(size);</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineplus">+  if (formattedSize != expectedFormattedSize)</span>
<a href="#l8.316"></a><span id="l8.316" class="difflineplus">+    throw new Error('Formatted attachment size ('+formattedSize+') does not ' +</span>
<a href="#l8.317"></a><span id="l8.317" class="difflineplus">+                    'match expected value ('+expectedFormattedSize+')');</span>
<a href="#l8.318"></a><span id="l8.318"> }</span>
<a href="#l8.319"></a><span id="l8.319"> </span>
<a href="#l8.320"></a><span id="l8.320" class="difflineminus">-function test_detached_attachment() {</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineplus">+/**</span>
<a href="#l8.322"></a><span id="l8.322" class="difflineplus">+ * Make sure that the individual and total attachment sizes for this message</span>
<a href="#l8.323"></a><span id="l8.323" class="difflineplus">+ * are as expected</span>
<a href="#l8.324"></a><span id="l8.324" class="difflineplus">+ * @param index the index of the message to check in the thread pane</span>
<a href="#l8.325"></a><span id="l8.325" class="difflineplus">+ */</span>
<a href="#l8.326"></a><span id="l8.326" class="difflineplus">+function help_test_attachment_size(index) {</span>
<a href="#l8.327"></a><span id="l8.327">   be_in_folder(folder);</span>
<a href="#l8.328"></a><span id="l8.328" class="difflineminus">-  let curMessage = select_click_row(3);</span>
<a href="#l8.329"></a><span id="l8.329" class="difflineplus">+  let curMessage = select_click_row(index);</span>
<a href="#l8.330"></a><span id="l8.330"> </span>
<a href="#l8.331"></a><span id="l8.331" class="difflineminus">-  check_attachment_size(detachedSize);</span>
<a href="#l8.332"></a><span id="l8.332" class="difflineplus">+  let expectedSizes = messages[index].attachmentSizes;</span>
<a href="#l8.333"></a><span id="l8.333" class="difflineplus">+  for (let i = 0; i &lt; expectedSizes.length; i++) {</span>
<a href="#l8.334"></a><span id="l8.334" class="difflineplus">+    if(expectedSizes[i] == null)</span>
<a href="#l8.335"></a><span id="l8.335" class="difflineplus">+      check_no_attachment_size(i);</span>
<a href="#l8.336"></a><span id="l8.336" class="difflineplus">+    else</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineplus">+      check_attachment_size(i, expectedSizes[i]);</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineplus">+  }</span>
<a href="#l8.339"></a><span id="l8.339" class="difflineplus">+  check_total_attachment_size(expectedSizes.length);</span>
<a href="#l8.340"></a><span id="l8.340"> }</span>
<a href="#l8.341"></a><span id="l8.341"> </span>
<a href="#l8.342"></a><span id="l8.342" class="difflineminus">-function test_detached_attachment_with_no_external_file() {</span>
<a href="#l8.343"></a><span id="l8.343" class="difflineminus">-  be_in_folder(folder);</span>
<a href="#l8.344"></a><span id="l8.344" class="difflineminus">-  let curMessage = select_click_row(4);</span>
<a href="#l8.345"></a><span id="l8.345" class="difflineminus">-</span>
<a href="#l8.346"></a><span id="l8.346" class="difflineminus">-  check_no_attachment_size();</span>
<a href="#l8.347"></a><span id="l8.347" class="difflineplus">+// Generate a test for each message in |messages|.</span>
<a href="#l8.348"></a><span id="l8.348" class="difflineplus">+for each (let [i, message] in Iterator(messages)) {</span>
<a href="#l8.349"></a><span id="l8.349" class="difflineplus">+  let index = i; // make a copy to avoid passing a reference to i</span>
<a href="#l8.350"></a><span id="l8.350" class="difflineplus">+  this[&quot;test_&quot; + message.name] = function() {</span>
<a href="#l8.351"></a><span id="l8.351" class="difflineplus">+    help_test_attachment_size(index);</span>
<a href="#l8.352"></a><span id="l8.352" class="difflineplus">+  };</span>
<a href="#l8.353"></a><span id="l8.353"> }</span>
<a href="#l8.354"></a><span id="l8.354" class="difflineminus">-</span>
<a href="#l8.355"></a><span id="l8.355" class="difflineminus">-function test_deleted_attachment() {</span>
<a href="#l8.356"></a><span id="l8.356" class="difflineminus">-  be_in_folder(folder);</span>
<a href="#l8.357"></a><span id="l8.357" class="difflineminus">-  let curMessage = select_click_row(5);</span>
<a href="#l8.358"></a><span id="l8.358" class="difflineminus">-</span>
<a href="#l8.359"></a><span id="l8.359" class="difflineminus">-  check_no_attachment_size();</span>
<a href="#l8.360"></a><span id="l8.360" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/test/mozmill/attachment/test-attachment.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/test/mozmill/attachment/test-attachment.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -16,16 +16,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">  * The Initial Developer of the Original Code is</span>
<a href="#l9.5"></a><span id="l9.5">  * Mozilla Foundation.</span>
<a href="#l9.6"></a><span id="l9.6">  * Portions created by the Initial Developer are Copyright (C) 2010</span>
<a href="#l9.7"></a><span id="l9.7">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l9.8"></a><span id="l9.8">  *</span>
<a href="#l9.9"></a><span id="l9.9">  * Contributor(s):</span>
<a href="#l9.10"></a><span id="l9.10">  *   Jie Zhang &lt;jzhang918@gmail.com&gt;</span>
<a href="#l9.11"></a><span id="l9.11">  *   Blake Winton &lt;bwinton@latte.ca&gt;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+ *   Jim Porter &lt;squibblyflabbetydoo@gmail.com&gt;</span>
<a href="#l9.13"></a><span id="l9.13">  *</span>
<a href="#l9.14"></a><span id="l9.14">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.15"></a><span id="l9.15">  * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l9.16"></a><span id="l9.16">  * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.17"></a><span id="l9.17">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.18"></a><span id="l9.18">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.19"></a><span id="l9.19">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.20"></a><span id="l9.20">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -39,195 +40,182 @@</span>
<a href="#l9.22"></a><span id="l9.22"> /**</span>
<a href="#l9.23"></a><span id="l9.23">  * Checks various attachments display correctly</span>
<a href="#l9.24"></a><span id="l9.24">  */</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26"> var MODULE_NAME = 'test-attachment';</span>
<a href="#l9.27"></a><span id="l9.27"> </span>
<a href="#l9.28"></a><span id="l9.28"> var RELATIVE_ROOT = '../shared-modules';</span>
<a href="#l9.29"></a><span id="l9.29"> var MODULE_REQUIRES = ['folder-display-helpers', 'compose-helpers'];</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-var jumlib = {};</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-Components.utils.import(&quot;resource://mozmill/modules/jum.js&quot;, jumlib);</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+</span>
<a href="#l9.33"></a><span id="l9.33"> var elib = {};</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">-Components.utils.import('resource://mozmill/modules/elementslib.js', elib);</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+Cu.import('resource://mozmill/modules/elementslib.js', elib);</span>
<a href="#l9.36"></a><span id="l9.36"> var EventUtils = {};</span>
<a href="#l9.37"></a><span id="l9.37"> Cu.import('resource://mozmill/stdlib/EventUtils.js', EventUtils);</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">-var folder = null;</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineminus">-var composeHelper = null;</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-var gMsgNo = 0;</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+var folder;</span>
<a href="#l9.44"></a><span id="l9.44"> </span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-/**</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">- * The TESTS array is constructed from objects containing the following:</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">- *</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">- * type:            The type of the test being run.</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">- * attachment:      The attachment to be inserted into the body of the message</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">- *                  under test.</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineminus">- */</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-const TESTS = [</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-  {</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-    type: &quot;txt&quot;,</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-    attachment: 'Content-Type: text/plain; name=&quot;test.txt&quot;\n' +</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-'Content-Disposition: attachment; filename=&quot;test.txt&quot;\n' +</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-'Content-Transfer-Encoding: base64\n' +</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-'\n' +</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-'VGhpcyBpcyBhY3R1YWxseSBwbGFpbiB0ZXh0LgoK\n',</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-  },</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-  {</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-    type: &quot;unknown&quot;,</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-    attachment: 'Content-Type: application/octet-stream; name=&quot;test.xxyyzz&quot;\n' +</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-'Content-Disposition: attachment; filename=&quot;test.xxyyzz&quot;\n' +</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-'Content-Transfer-Encoding: base64\n' +</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-'X-Attachment-Id: f_g6gfk9os0\n' +</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-'\n' +</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-'VGhpcyBpcyBhY3R1YWxseSBwbGFpbiB0ZXh0LgoK\n',</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-  }</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-];</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+const textAttachment =</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+  &quot;One of these days... people like me will rise up and overthrow you, and &quot; +</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+  &quot;the end of tyranny by the homeostatic machine will have arrived. The day &quot; +</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+  &quot;of human values and compassion and simple warmth will return, and when &quot; +</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+  &quot;that happens someone like myself who has gone through an ordeal and who &quot; +</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+  &quot;genuinely needs hot coffee to pick him up and keep him functioning when &quot; +</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+  &quot;he has to function will get the hot coffee whether he happens to have a &quot; +</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+  &quot;poscred readily available or not.&quot;;</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+const binaryAttachment = textAttachment;</span>
<a href="#l9.81"></a><span id="l9.81"> </span>
<a href="#l9.82"></a><span id="l9.82"> var setupModule = function (module) {</span>
<a href="#l9.83"></a><span id="l9.83">   let fdh = collector.getModule('folder-display-helpers');</span>
<a href="#l9.84"></a><span id="l9.84">   fdh.installInto(module);</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineminus">-  composeHelper = collector.getModule('compose-helpers');</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+  let composeHelper = collector.getModule('compose-helpers');</span>
<a href="#l9.87"></a><span id="l9.87">   composeHelper.installInto(module);</span>
<a href="#l9.88"></a><span id="l9.88"> </span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-  folder = create_folder(&quot;generalContentPolicy&quot;);</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+  folder = create_folder(&quot;AttachmentA&quot;);</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+  // create some messages that have various types of attachments</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+  messages = [</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+    // no attachment</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+    {},</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+    // text attachment</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+    { attachments: [{ body: textAttachment,</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+                      filename: 'ubik.txt',</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineplus">+                      format: '' }],</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineplus">+    },</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineplus">+    // binary attachment</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineplus">+    { attachments: [{ body: binaryAttachment,</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineplus">+                      contentType: 'application/octet-stream',</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineplus">+                      filename: 'ubik.xxyyzz',</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineplus">+                      format: '' }],</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineplus">+    },</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineplus">+    // multiple attachments</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+    { attachments: [{ body: textAttachment,</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+                      filename: 'ubik.txt',</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+                      format: '' },</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+                    { body: binaryAttachment,</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineplus">+                      contentType: 'application/octet-stream',</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineplus">+                      filename: 'ubik.xxyyzz',</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineplus">+                      format: '' }],</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineplus">+    },</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineplus">+  ];</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineplus">+</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineplus">+  for (let i = 0; i &lt; messages.length; i++)</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineplus">+    add_message_to_folder(folder, create_message(messages[i]));</span>
<a href="#l9.120"></a><span id="l9.120"> };</span>
<a href="#l9.121"></a><span id="l9.121"> </span>
<a href="#l9.122"></a><span id="l9.122" class="difflineminus">-function addToFolder(aSubject, aAttachments, aFolder) {</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineminus">-</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineminus">-  let msgId = Components.classes[&quot;@mozilla.org/uuid-generator;1&quot;]</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineminus">-                          .getService(Components.interfaces.nsIUUIDGenerator)</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineminus">-                          .generateUUID() +&quot;@mozillamessaging.invalid&quot;;</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineplus">+function test_attachment_view_collapsed() {</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineplus">+  be_in_folder(folder);</span>
<a href="#l9.129"></a><span id="l9.129"> </span>
<a href="#l9.130"></a><span id="l9.130" class="difflineminus">-  aAttachments = [&quot;Content-Type: text/plain; charset=ISO-8859-1\n\n\n\n&quot;]</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineminus">-                   .concat(aAttachments);</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineminus">-  let source = &quot;From - Sat Nov  1 12:39:54 2008\n&quot; +</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineminus">-               &quot;X-Mozilla-Status: 0001\n&quot; +</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineminus">-               &quot;X-Mozilla-Status2: 00000000\n&quot; +</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineminus">-               &quot;Message-ID: &lt;&quot; + msgId + &quot;&gt;\n&quot; +</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineminus">-               &quot;Date: Wed, 11 Jun 2008 20:32:02 -0400\n&quot; +</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineminus">-               &quot;From: Tester &lt;tests@mozillamessaging.invalid&gt;\n&quot; +</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineminus">-               &quot;User-Agent: Thunderbird 3.0a2pre (Macintosh/2008052122)\n&quot; +</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineminus">-               &quot;MIME-Version: 1.0\n&quot; +</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineminus">-               &quot;To: recipient@mozillamessaging.invalid\n&quot; +</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineminus">-               &quot;Subject: &quot; + aSubject + &quot;\n&quot; +</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineminus">-               &quot;Content-Type: multipart/mixed; boundary=0015174be8a60dc5b10481218b29\n&quot; +</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineminus">-               &quot;\n--0015174be8a60dc5b10481218b29\n&quot; +</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineminus">-               aAttachments.join(&quot;--0015174be8a60dc5b10481218b29\n&quot;) +</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineminus">-               &quot;--0015174be8a60dc5b10481218b29--&quot;</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineplus">+  select_click_row(0);</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineplus">+  assert_selected_and_displayed(0);</span>
<a href="#l9.148"></a><span id="l9.148"> </span>
<a href="#l9.149"></a><span id="l9.149" class="difflineminus">-  aFolder.QueryInterface(Components.interfaces.nsIMsgLocalMailFolder);</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineminus">-  aFolder.gettingNewMessages = true;</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineminus">-</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineminus">-  aFolder.addMessage(source);</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineminus">-  aFolder.gettingNewMessages = false;</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineminus">-</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineminus">-  return aFolder.msgDatabase.getMsgHdrForMessageID(msgId);</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineplus">+  if (!mc.e(&quot;attachmentView&quot;).collapsed)</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineplus">+    throw new Error(&quot;Attachment pane expanded when it shouldn't be!&quot;);</span>
<a href="#l9.158"></a><span id="l9.158"> }</span>
<a href="#l9.159"></a><span id="l9.159"> </span>
<a href="#l9.160"></a><span id="l9.160" class="difflineminus">-function addMsgToFolderAndCheckAttachment(folder, type, attachment) {</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineminus">-  let msgDbHdr = addToFolder(type + &quot;attachment test message &quot; + gMsgNo,</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineminus">-                             attachment, folder);</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineminus">-</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineminus">-  // select the newly created message</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineminus">-  let msgHdr = select_click_row(gMsgNo);</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineplus">+function test_attachment_view_expanded() {</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineplus">+  be_in_folder(folder);</span>
<a href="#l9.168"></a><span id="l9.168"> </span>
<a href="#l9.169"></a><span id="l9.169" class="difflineminus">-  if (msgDbHdr != msgHdr)</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineminus">-    throw new Error(&quot;Selected Message Header is not the same as generated header&quot;);</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineplus">+  for (let i = 1; i &lt; messages.length; i++) {</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineplus">+    select_click_row(i);</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineplus">+    assert_selected_and_displayed(i);</span>
<a href="#l9.174"></a><span id="l9.174"> </span>
<a href="#l9.175"></a><span id="l9.175" class="difflineminus">-  assert_selected_and_displayed(gMsgNo);</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineminus">-  if (mc.eid(&quot;attachmentView&quot;).node.collapsed)</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineminus">-    throw new Error(&quot;attachment with `&quot; + type +</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineminus">-                    &quot;' extension file name has no attachment&quot;);</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineminus">-</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineminus">-  ++gMsgNo;</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineminus">-  return gMsgNo-1;</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineplus">+    if (mc.e(&quot;attachmentView&quot;).collapsed)</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineplus">+      throw new Error(&quot;Attachment pane collapsed (on message #&quot;+i+</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineplus">+                      &quot; when it shouldn't be!&quot;);</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineplus">+  }</span>
<a href="#l9.186"></a><span id="l9.186"> }</span>
<a href="#l9.187"></a><span id="l9.187"> </span>
<a href="#l9.188"></a><span id="l9.188" class="difflineminus">-function test_attachment() {</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineminus">-  let folderTab = mc.tabmail.currentTabInfo;</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineplus">+function test_attachment_list_expansion() {</span>
<a href="#l9.191"></a><span id="l9.191">   be_in_folder(folder);</span>
<a href="#l9.192"></a><span id="l9.192"> </span>
<a href="#l9.193"></a><span id="l9.193" class="difflineminus">-  assert_nothing_selected();</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineplus">+  select_click_row(1);</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineplus">+</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineplus">+  assert_true(mc.e(&quot;attachmentListWrapper&quot;).collapsed,</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineplus">+              &quot;Attachment list should start out collapsed!&quot;);</span>
<a href="#l9.198"></a><span id="l9.198"> </span>
<a href="#l9.199"></a><span id="l9.199" class="difflineminus">-  for (let i = 0; i &lt; TESTS.length; ++i) {</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineminus">-    // Check for attachment in mail</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineminus">-    addMsgToFolderAndCheckAttachment(folder, TESTS[i].type, TESTS[i].attachment);</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineminus">-  }</span>
<a href="#l9.203"></a><span id="l9.203" class="difflineplus">+  mc.click(mc.eid(&quot;attachmentToggle&quot;));</span>
<a href="#l9.204"></a><span id="l9.204" class="difflineplus">+  assert_true(!mc.e(&quot;attachmentListWrapper&quot;).collapsed,</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineplus">+              &quot;Attachment list should be expanded after toggling!&quot;);</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineplus">+</span>
<a href="#l9.207"></a><span id="l9.207" class="difflineplus">+  mc.click(mc.eid(&quot;attachmentToggle&quot;));</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineplus">+  assert_true(mc.e(&quot;attachmentListWrapper&quot;).collapsed,</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineplus">+              &quot;Attachment list should be collapsed after toggling again!&quot;);</span>
<a href="#l9.210"></a><span id="l9.210"> }</span>
<a href="#l9.211"></a><span id="l9.211"> </span>
<a href="#l9.212"></a><span id="l9.212"> function test_selected_attachments_are_cleared() {</span>
<a href="#l9.213"></a><span id="l9.213">   be_in_folder(folder);</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineminus">-  // Add a message with one attachment.</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineminus">-  let single = addMsgToFolderAndCheckAttachment(folder, &quot;single&quot;,</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineminus">-                                                TESTS[0].attachment);</span>
<a href="#l9.217"></a><span id="l9.217"> </span>
<a href="#l9.218"></a><span id="l9.218" class="difflineminus">-  // Add and select a message with two attachments.</span>
<a href="#l9.219"></a><span id="l9.219" class="difflineminus">-  let multiple = addMsgToFolderAndCheckAttachment(folder, &quot;multiple&quot;,</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineminus">-                                                  [TESTS[0].attachment,</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineminus">-                                                   TESTS[1].attachment]);</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineplus">+  // First, select the message with two attachments.</span>
<a href="#l9.223"></a><span id="l9.223" class="difflineplus">+  select_click_row(3);</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineplus">+</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineplus">+  // Expand the attachment list.</span>
<a href="#l9.226"></a><span id="l9.226" class="difflineplus">+  mc.click(mc.eid(&quot;attachmentToggle&quot;));</span>
<a href="#l9.227"></a><span id="l9.227"> </span>
<a href="#l9.228"></a><span id="l9.228">   // Select both the attachments.</span>
<a href="#l9.229"></a><span id="l9.229">   let attachmentList = mc.e(&quot;attachmentList&quot;);</span>
<a href="#l9.230"></a><span id="l9.230">   assert_equals(attachmentList.selectedItems.length, 0,</span>
<a href="#l9.231"></a><span id="l9.231">                 &quot;We had selected items on first load, when we shouldn't have!&quot;);</span>
<a href="#l9.232"></a><span id="l9.232"> </span>
<a href="#l9.233"></a><span id="l9.233">   // We can just click on the first element, but the second one needs a</span>
<a href="#l9.234"></a><span id="l9.234">   // ctrl-click (or cmd-click for those Mac-heads among us).</span>
<a href="#l9.235"></a><span id="l9.235">   mc.click(new elib.Elem(attachmentList.children[0]));</span>
<a href="#l9.236"></a><span id="l9.236">   EventUtils.synthesizeMouse(attachmentList.children[1], 5, 5,</span>
<a href="#l9.237"></a><span id="l9.237">                              {accelKey: true}, mc.window);</span>
<a href="#l9.238"></a><span id="l9.238"> </span>
<a href="#l9.239"></a><span id="l9.239" class="difflineminus">-  assert_equals(mc.e(&quot;attachmentList&quot;).selectedItems.length, 2,</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineplus">+  assert_equals(attachmentList.selectedItems.length, 2,</span>
<a href="#l9.241"></a><span id="l9.241">                 &quot;We had the wrong number of selected items after selecting some!&quot;);</span>
<a href="#l9.242"></a><span id="l9.242"> </span>
<a href="#l9.243"></a><span id="l9.243" class="difflineminus">-  // Switch to the message with one attachments, and make sure there are no</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineplus">+  // Switch to the message with one attachment, and make sure there are no</span>
<a href="#l9.245"></a><span id="l9.245">   // selected attachments.</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineminus">-  select_click_row(single);</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineminus">-  assert_equals(mc.e(&quot;attachmentList&quot;).selectedItems.length, 0,</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineplus">+  select_click_row(2);</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineplus">+</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineplus">+  // Expand the attachment list again.</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineplus">+  mc.click(mc.eid(&quot;attachmentToggle&quot;));</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineplus">+</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineplus">+  assert_equals(attachmentList.selectedItems.length, 0,</span>
<a href="#l9.254"></a><span id="l9.254">                 &quot;We had selected items after loading a new message!&quot;);</span>
<a href="#l9.255"></a><span id="l9.255"> }</span>
<a href="#l9.256"></a><span id="l9.256"> </span>
<a href="#l9.257"></a><span id="l9.257" class="difflineminus">-function test_attachments_menu() {</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineplus">+function test_attachments_compose_menu() {</span>
<a href="#l9.259"></a><span id="l9.259">   be_in_folder(folder);</span>
<a href="#l9.260"></a><span id="l9.260"> </span>
<a href="#l9.261"></a><span id="l9.261" class="difflineminus">-  // Add and select a message with two attachments.</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineminus">-  let multiple = addMsgToFolderAndCheckAttachment(folder, &quot;multiple&quot;,</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineminus">-                                                  [TESTS[0].attachment,</span>
<a href="#l9.264"></a><span id="l9.264" class="difflineminus">-                                                   TESTS[1].attachment]);</span>
<a href="#l9.265"></a><span id="l9.265" class="difflineminus">-  select_click_row(multiple);</span>
<a href="#l9.266"></a><span id="l9.266" class="difflineplus">+  // First, select the message with two attachments.</span>
<a href="#l9.267"></a><span id="l9.267" class="difflineplus">+  select_click_row(3);</span>
<a href="#l9.268"></a><span id="l9.268"> </span>
<a href="#l9.269"></a><span id="l9.269" class="difflineminus">-  let cwc = composeHelper.open_compose_with_forward();</span>
<a href="#l9.270"></a><span id="l9.270" class="difflineplus">+  let cwc = open_compose_with_forward();</span>
<a href="#l9.271"></a><span id="l9.271">   let attachment = cwc.e(&quot;attachmentBucket&quot;);</span>
<a href="#l9.272"></a><span id="l9.272"> </span>
<a href="#l9.273"></a><span id="l9.273">   // Focus the attachmentBucket</span>
<a href="#l9.274"></a><span id="l9.274">   attachment.focus();</span>
<a href="#l9.275"></a><span id="l9.275">   assert_equals(cwc.e(&quot;cmd_delete&quot;).getAttribute(&quot;label&quot;), &quot;Remove Attachments&quot;,</span>
<a href="#l9.276"></a><span id="l9.276">                 &quot;attachmentBucket is focused!&quot;);</span>
<a href="#l9.277"></a><span id="l9.277"> </span>
<a href="#l9.278"></a><span id="l9.278">   // Select 1 attachment, and</span>
<a href="#l9.279"></a><span id="l9.279">   // focus the subject to see the label change and to execute isCommandEnabled</span>
<a href="#l9.280"></a><span id="l9.280">   cwc.click(new elib.Elem(attachment.children[0]));</span>
<a href="#l9.281"></a><span id="l9.281">   cwc.e(&quot;msgSubject&quot;).focus();</span>
<a href="#l9.282"></a><span id="l9.282">   assert_equals(cwc.e(&quot;cmd_delete&quot;).getAttribute(&quot;label&quot;), &quot;Delete&quot;,</span>
<a href="#l9.283"></a><span id="l9.283" class="difflineminus">-		&quot;attachmentBucket is not focused!&quot;);</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineplus">+                &quot;attachmentBucket is not focused!&quot;);</span>
<a href="#l9.285"></a><span id="l9.285"> </span>
<a href="#l9.286"></a><span id="l9.286">   // Focus back to the attachmentBucket</span>
<a href="#l9.287"></a><span id="l9.287">   attachment.focus();</span>
<a href="#l9.288"></a><span id="l9.288">   assert_equals(cwc.e(&quot;cmd_delete&quot;).getAttribute(&quot;label&quot;), &quot;Remove Attachment&quot;,</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineminus">-	        &quot;Only 1 attachment is selected!&quot;);</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineplus">+                &quot;Only 1 attachment is selected!&quot;);</span>
<a href="#l9.291"></a><span id="l9.291"> </span>
<a href="#l9.292"></a><span id="l9.292">   // Select 2 attachments, and focus the identity for the same purpose</span>
<a href="#l9.293"></a><span id="l9.293">   attachment.focus();</span>
<a href="#l9.294"></a><span id="l9.294">   cwc.click(new elib.Elem(attachment.children[1]));</span>
<a href="#l9.295"></a><span id="l9.295">   EventUtils.synthesizeMouse(attachment.children[0], 0, 0,</span>
<a href="#l9.296"></a><span id="l9.296">                              {accelKey: true}, cwc.window);</span>
<a href="#l9.297"></a><span id="l9.297">   cwc.e(&quot;msgIdentity&quot;).focus();</span>
<a href="#l9.298"></a><span id="l9.298">   assert_equals(cwc.e(&quot;cmd_delete&quot;).getAttribute(&quot;label&quot;), &quot;Delete&quot;,</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineminus">-		&quot;attachmentBucket is not focused!&quot;);</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineplus">+                &quot;attachmentBucket is not focused!&quot;);</span>
<a href="#l9.301"></a><span id="l9.301"> </span>
<a href="#l9.302"></a><span id="l9.302">   // Focus back to the attachmentBucket</span>
<a href="#l9.303"></a><span id="l9.303">   attachment.focus();</span>
<a href="#l9.304"></a><span id="l9.304">   assert_equals(cwc.e(&quot;cmd_delete&quot;).getAttribute(&quot;label&quot;), &quot;Remove Attachments&quot;,</span>
<a href="#l9.305"></a><span id="l9.305" class="difflineminus">-  	        &quot;Multiple attachments are selected!&quot;);</span>
<a href="#l9.306"></a><span id="l9.306" class="difflineplus">+                &quot;Multiple attachments are selected!&quot;);</span>
<a href="#l9.307"></a><span id="l9.307"> </span>
<a href="#l9.308"></a><span id="l9.308" class="difflineminus">-  composeHelper.close_compose_window(cwc);</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineplus">+  close_compose_window(cwc);</span>
<a href="#l9.310"></a><span id="l9.310"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/themes/gnomestripe/mail/messageHeader.css</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/themes/gnomestripe/mail/messageHeader.css</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -80,113 +80,122 @@ html|div#expandedHeadersTopBox {</span>
<a href="#l10.4"></a><span id="l10.4"> </span>
<a href="#l10.5"></a><span id="l10.5"> #otherActionsButton {</span>
<a href="#l10.6"></a><span id="l10.6">   margin-bottom: .1em;</span>
<a href="#l10.7"></a><span id="l10.7">   padding-top: 0px;</span>
<a href="#l10.8"></a><span id="l10.8"> }</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10"> /* ::::: expanded header pane ::::: */</span>
<a href="#l10.11"></a><span id="l10.11"> </span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-#header-view-toolbox {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+.inline-toolbox {</span>
<a href="#l10.14"></a><span id="l10.14">   -moz-appearance: none;</span>
<a href="#l10.15"></a><span id="l10.15">   -moz-padding-end: 6px;</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-  padding-top: 3px;</span>
<a href="#l10.17"></a><span id="l10.17"> }</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+.inline-toolbar {</span>
<a href="#l10.21"></a><span id="l10.21">   -moz-appearance: none;</span>
<a href="#l10.22"></a><span id="l10.22">   min-height: 0;</span>
<a href="#l10.23"></a><span id="l10.23">   padding: 0;</span>
<a href="#l10.24"></a><span id="l10.24"> }</span>
<a href="#l10.25"></a><span id="l10.25"> </span>
<a href="#l10.26"></a><span id="l10.26"> /* We use pixels here because the height of the button is in pixels. */</span>
<a href="#l10.27"></a><span id="l10.27"> #expandedHeaderRows {</span>
<a href="#l10.28"></a><span id="l10.28">   padding-top: 14px;</span>
<a href="#l10.29"></a><span id="l10.29"> }</span>
<a href="#l10.30"></a><span id="l10.30"> </span>
<a href="#l10.31"></a><span id="l10.31"> #expandedsubjectBox &gt; .headerValue {</span>
<a href="#l10.32"></a><span id="l10.32">   font-weight: bold;</span>
<a href="#l10.33"></a><span id="l10.33"> }</span>
<a href="#l10.34"></a><span id="l10.34"> </span>
<a href="#l10.35"></a><span id="l10.35"> /* ::::: edit message bar ::::: */</span>
<a href="#l10.36"></a><span id="l10.36"> </span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-#editMessageBox</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineminus">-{</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineplus">+#editMessageBox {</span>
<a href="#l10.40"></a><span id="l10.40">   min-width: 1px;</span>
<a href="#l10.41"></a><span id="l10.41">   border-bottom-left-radius: 0.2em;</span>
<a href="#l10.42"></a><span id="l10.42">   border-bottom-right-radius: 0.2em;</span>
<a href="#l10.43"></a><span id="l10.43"> }</span>
<a href="#l10.44"></a><span id="l10.44"> </span>
<a href="#l10.45"></a><span id="l10.45" class="difflineminus">-#editMessageDescription</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineminus">-{</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineplus">+#editMessageDescription {</span>
<a href="#l10.48"></a><span id="l10.48">   font-style: italic;</span>
<a href="#l10.49"></a><span id="l10.49">   font-weight: bolder;</span>
<a href="#l10.50"></a><span id="l10.50"> }</span>
<a href="#l10.51"></a><span id="l10.51"> </span>
<a href="#l10.52"></a><span id="l10.52"> /* ::::: attachment view ::::: */</span>
<a href="#l10.53"></a><span id="l10.53"> </span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-#attachmentList</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineminus">-{</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+#attachmentList {</span>
<a href="#l10.57"></a><span id="l10.57">   margin: 0px;</span>
<a href="#l10.58"></a><span id="l10.58">   background-color: -moz-Field;</span>
<a href="#l10.59"></a><span id="l10.59">   color: -moz-FieldText;</span>
<a href="#l10.60"></a><span id="l10.60"> }</span>
<a href="#l10.61"></a><span id="l10.61"> </span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+#attachmentToggle {</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+  -moz-appearance: treetwisty;</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+}</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+#attachmentToggle[checked=&quot;true&quot;] {</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+  -moz-appearance: treetwistyopen;</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+}</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+#attachmentIcon {</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/filterbar.png&quot;);</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+  -moz-image-region: rect(0px, 80px, 16px, 64px);</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+  -moz-margin-start: 5px;</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+}</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+#attachmentCount {</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+  -moz-margin-start: 0;</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+}</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+#attachmentSize {</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+  color: #888a85; /* the same color as .headerName */</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+}</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineplus">+#attachmentSaveAllSingle,</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineplus">+#attachmentSaveAllMultiple {</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-save?size=menu&quot;);</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineplus">+}</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineplus">+</span>
<a href="#l10.89"></a><span id="l10.89"> /* XXX: Move all of the description attributes to the toolkit */</span>
<a href="#l10.90"></a><span id="l10.90"> </span>
<a href="#l10.91"></a><span id="l10.91" class="difflineminus">-description[selectable=&quot;true&quot;]</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineminus">-{</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineplus">+description[selectable=&quot;true&quot;] {</span>
<a href="#l10.94"></a><span id="l10.94">   margin: 1px 5px 4px;</span>
<a href="#l10.95"></a><span id="l10.95"> }</span>
<a href="#l10.96"></a><span id="l10.96"> </span>
<a href="#l10.97"></a><span id="l10.97" class="difflineminus">-descriptionitem</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineminus">-{</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineplus">+descriptionitem {</span>
<a href="#l10.100"></a><span id="l10.100">   border: 1px solid transparent;</span>
<a href="#l10.101"></a><span id="l10.101">   margin: 1px;</span>
<a href="#l10.102"></a><span id="l10.102"> }</span>
<a href="#l10.103"></a><span id="l10.103"> </span>
<a href="#l10.104"></a><span id="l10.104" class="difflineminus">-description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;][current=&quot;true&quot;] </span>
<a href="#l10.105"></a><span id="l10.105" class="difflineminus">-{</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[current=&quot;true&quot;]  {</span>
<a href="#l10.107"></a><span id="l10.107">   border: 1px dotted #F5DB95;</span>
<a href="#l10.108"></a><span id="l10.108"> }</span>
<a href="#l10.109"></a><span id="l10.109"> </span>
<a href="#l10.110"></a><span id="l10.110" class="difflineminus">-descriptionitem[selected=&quot;true&quot;] </span>
<a href="#l10.111"></a><span id="l10.111" class="difflineminus">-{</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineplus">+descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l10.113"></a><span id="l10.113">   background-color: -moz-Dialog;</span>
<a href="#l10.114"></a><span id="l10.114">   color: -moz-DialogText;</span>
<a href="#l10.115"></a><span id="l10.115"> }</span>
<a href="#l10.116"></a><span id="l10.116"> </span>
<a href="#l10.117"></a><span id="l10.117" class="difflineminus">-description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;] </span>
<a href="#l10.118"></a><span id="l10.118" class="difflineminus">-{</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l10.120"></a><span id="l10.120">   background-color: Highlight;</span>
<a href="#l10.121"></a><span id="l10.121">   color: HighlightText;</span>
<a href="#l10.122"></a><span id="l10.122"> }</span>
<a href="#l10.123"></a><span id="l10.123"> </span>
<a href="#l10.124"></a><span id="l10.124" class="difflineminus">-.attachmentBox </span>
<a href="#l10.125"></a><span id="l10.125" class="difflineminus">-{</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineplus">+.attachmentBox {</span>
<a href="#l10.127"></a><span id="l10.127">   width: 15em;</span>
<a href="#l10.128"></a><span id="l10.128"> }</span>
<a href="#l10.129"></a><span id="l10.129"> </span>
<a href="#l10.130"></a><span id="l10.130" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;] .attachmentBox</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineminus">-{</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineplus">+#attachmentList[largeView=&quot;true&quot;] .attachmentBox {</span>
<a href="#l10.133"></a><span id="l10.133">   -moz-box-orient: vertical;</span>
<a href="#l10.134"></a><span id="l10.134"> }</span>
<a href="#l10.135"></a><span id="l10.135"> </span>
<a href="#l10.136"></a><span id="l10.136" class="difflineminus">-#attachmentView</span>
<a href="#l10.137"></a><span id="l10.137" class="difflineminus">-{</span>
<a href="#l10.138"></a><span id="l10.138" class="difflineplus">+#attachmentView {</span>
<a href="#l10.139"></a><span id="l10.139">   border-top: 1px solid ThreeDShadow;</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineminus">-  min-height: 30px;</span>
<a href="#l10.141"></a><span id="l10.141"> }</span>
<a href="#l10.142"></a><span id="l10.142"> </span>
<a href="#l10.143"></a><span id="l10.143" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;]</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineminus">-{</span>
<a href="#l10.145"></a><span id="l10.145" class="difflineminus">-  min-height: 55px;</span>
<a href="#l10.146"></a><span id="l10.146" class="difflineminus">-}</span>
<a href="#l10.147"></a><span id="l10.147" class="difflineminus">-</span>
<a href="#l10.148"></a><span id="l10.148" class="difflineminus">-#attachmentView[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l10.149"></a><span id="l10.149" class="difflineplus">+#attachmentListWrapper[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l10.150"></a><span id="l10.150">   overflow: auto;</span>
<a href="#l10.151"></a><span id="l10.151"> }</span>
<a href="#l10.152"></a><span id="l10.152"> </span>
<a href="#l10.153"></a><span id="l10.153"> /* ::::: msg header captions ::::: */</span>
<a href="#l10.154"></a><span id="l10.154"> </span>
<a href="#l10.155"></a><span id="l10.155"> #msgHeaderView {</span>
<a href="#l10.156"></a><span id="l10.156">   font-size: 100%;</span>
<a href="#l10.157"></a><span id="l10.157">   padding: 0 !important;</span>
<a href="#l10.158"></a><span id="l10.158" class="difflineat">@@ -210,16 +219,40 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l10.159"></a><span id="l10.159">   padding: 0 !important;</span>
<a href="#l10.160"></a><span id="l10.160">   list-style-image: none; /* overrides the rule from primaryToolbar.css */</span>
<a href="#l10.161"></a><span id="l10.161"> }</span>
<a href="#l10.162"></a><span id="l10.162"> </span>
<a href="#l10.163"></a><span id="l10.163"> .msgHeaderView-button[disabled=&quot;true&quot;] {</span>
<a href="#l10.164"></a><span id="l10.164">   display: none;</span>
<a href="#l10.165"></a><span id="l10.165"> }</span>
<a href="#l10.166"></a><span id="l10.166"> </span>
<a href="#l10.167"></a><span id="l10.167" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] {</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineplus">+  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineplus">+  -moz-appearance: dualbutton !important;</span>
<a href="#l10.170"></a><span id="l10.170" class="difflineplus">+}</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineplus">+</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineplus">+  -moz-appearance: button;</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineplus">+  min-width: 1em;</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineplus">+  min-height: 1ex;</span>
<a href="#l10.176"></a><span id="l10.176" class="difflineplus">+  margin: 0;</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineplus">+  /* important required to override messenger.css rule */</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineplus">+  padding: 0 !important;</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineplus">+}</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineplus">+</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-dropmarker {</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineplus">+  -moz-margin-start: 2px;</span>
<a href="#l10.183"></a><span id="l10.183" class="difflineplus">+  -moz-margin-end: 2px;</span>
<a href="#l10.184"></a><span id="l10.184" class="difflineplus">+}</span>
<a href="#l10.185"></a><span id="l10.185" class="difflineplus">+</span>
<a href="#l10.186"></a><span id="l10.186" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-dropmarker[open=&quot;true&quot;] {</span>
<a href="#l10.187"></a><span id="l10.187" class="difflineplus">+  margin-top: 0px;</span>
<a href="#l10.188"></a><span id="l10.188" class="difflineplus">+  -moz-margin-end: 2px;</span>
<a href="#l10.189"></a><span id="l10.189" class="difflineplus">+}</span>
<a href="#l10.190"></a><span id="l10.190" class="difflineplus">+</span>
<a href="#l10.191"></a><span id="l10.191"> /* toolbar[mode=&quot;text&quot;] is necessary so that we end up with more specificity</span>
<a href="#l10.192"></a><span id="l10.192">  * than the !important rule in toolkit's toolbar.css.</span>
<a href="#l10.193"></a><span id="l10.193">  */</span>
<a href="#l10.194"></a><span id="l10.194"> toolbar[mode=&quot;text&quot;] .msgHeaderView-button .toolbarbutton-text,</span>
<a href="#l10.195"></a><span id="l10.195"> toolbar[mode=&quot;text&quot;] toolbarpaletteitem .msgHeaderView-button .toolbarbutton-text {</span>
<a href="#l10.196"></a><span id="l10.196">   margin: 0 !important;</span>
<a href="#l10.197"></a><span id="l10.197">   padding-top: 1px !important;</span>
<a href="#l10.198"></a><span id="l10.198">   padding-bottom: 2px !important;</span>
<a href="#l10.199"></a><span id="l10.199" class="difflineat">@@ -248,25 +281,21 @@ toolbarpaletteitem &gt; #hdrReplyToSenderBu</span>
<a href="#l10.200"></a><span id="l10.200"> }</span>
<a href="#l10.201"></a><span id="l10.201"> </span>
<a href="#l10.202"></a><span id="l10.202"> toolbar[iconsize=&quot;small&quot;] .hdrReplyToSenderButton {</span>
<a href="#l10.203"></a><span id="l10.203">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l10.204"></a><span id="l10.204">   -moz-image-region: rect(0px 64px 16px 48px);</span>
<a href="#l10.205"></a><span id="l10.205"> }</span>
<a href="#l10.206"></a><span id="l10.206"> </span>
<a href="#l10.207"></a><span id="l10.207"> .hdrReplyButton {</span>
<a href="#l10.208"></a><span id="l10.208" class="difflineminus">-  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l10.209"></a><span id="l10.209" class="difflineminus">-  -moz-appearance: dualbutton !important;</span>
<a href="#l10.210"></a><span id="l10.210">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l10.211"></a><span id="l10.211">   -moz-image-region: rect(0px 96px 24px 72px);</span>
<a href="#l10.212"></a><span id="l10.212"> }</span>
<a href="#l10.213"></a><span id="l10.213"> </span>
<a href="#l10.214"></a><span id="l10.214"> toolbar[iconsize=&quot;small&quot;] .hdrReplyButton {</span>
<a href="#l10.215"></a><span id="l10.215" class="difflineminus">-  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l10.216"></a><span id="l10.216" class="difflineminus">-  -moz-appearance: dualbutton !important;</span>
<a href="#l10.217"></a><span id="l10.217">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l10.218"></a><span id="l10.218">   -moz-image-region: rect(0px 64px 16px 48px);</span>
<a href="#l10.219"></a><span id="l10.219"> }</span>
<a href="#l10.220"></a><span id="l10.220"> </span>
<a href="#l10.221"></a><span id="l10.221"> .hdrReplyAllButton {</span>
<a href="#l10.222"></a><span id="l10.222">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l10.223"></a><span id="l10.223">   -moz-image-region: rect(0px 120px 24px 96px);</span>
<a href="#l10.224"></a><span id="l10.224"> }</span>
<a href="#l10.225"></a><span id="l10.225" class="difflineat">@@ -281,35 +310,16 @@ toolbar[iconsize=&quot;small&quot;] .hdrReplyAllBu</span>
<a href="#l10.226"></a><span id="l10.226">   -moz-image-region: rect(0px 144px 24px 120px);</span>
<a href="#l10.227"></a><span id="l10.227"> }</span>
<a href="#l10.228"></a><span id="l10.228"> </span>
<a href="#l10.229"></a><span id="l10.229"> toolbar[iconsize=&quot;small&quot;] .hdrReplyListButton {</span>
<a href="#l10.230"></a><span id="l10.230">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l10.231"></a><span id="l10.231">   -moz-image-region: rect(0px 96px 16px 80px);</span>
<a href="#l10.232"></a><span id="l10.232"> }</span>
<a href="#l10.233"></a><span id="l10.233"> </span>
<a href="#l10.234"></a><span id="l10.234" class="difflineminus">-.hdrReplyButton &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l10.235"></a><span id="l10.235" class="difflineminus">-  -moz-appearance: button;</span>
<a href="#l10.236"></a><span id="l10.236" class="difflineminus">-  min-width: 1em;</span>
<a href="#l10.237"></a><span id="l10.237" class="difflineminus">-  min-height: 1ex;</span>
<a href="#l10.238"></a><span id="l10.238" class="difflineminus">-  margin: 0;</span>
<a href="#l10.239"></a><span id="l10.239" class="difflineminus">-  /* important required to override messenger.css rule */</span>
<a href="#l10.240"></a><span id="l10.240" class="difflineminus">-  padding: 0 !important;</span>
<a href="#l10.241"></a><span id="l10.241" class="difflineminus">-}</span>
<a href="#l10.242"></a><span id="l10.242" class="difflineminus">-</span>
<a href="#l10.243"></a><span id="l10.243" class="difflineminus">-.hdrReplyButton &gt; .toolbarbutton-menubutton-dropmarker {</span>
<a href="#l10.244"></a><span id="l10.244" class="difflineminus">-  -moz-margin-start: 2px;</span>
<a href="#l10.245"></a><span id="l10.245" class="difflineminus">-  -moz-margin-end: 2px;</span>
<a href="#l10.246"></a><span id="l10.246" class="difflineminus">-}</span>
<a href="#l10.247"></a><span id="l10.247" class="difflineminus">-</span>
<a href="#l10.248"></a><span id="l10.248" class="difflineminus">-.hdrReplyButton &gt; .toolbarbutton-menubutton-dropmarker[open=&quot;true&quot;] {</span>
<a href="#l10.249"></a><span id="l10.249" class="difflineminus">-  margin-top: 0px;</span>
<a href="#l10.250"></a><span id="l10.250" class="difflineminus">-  -moz-margin-end: 2px;</span>
<a href="#l10.251"></a><span id="l10.251" class="difflineminus">-}</span>
<a href="#l10.252"></a><span id="l10.252" class="difflineminus">-</span>
<a href="#l10.253"></a><span id="l10.253"> .hdrForwardButton {</span>
<a href="#l10.254"></a><span id="l10.254">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l10.255"></a><span id="l10.255">   -moz-image-region: rect(0px 168px 24px 144px);</span>
<a href="#l10.256"></a><span id="l10.256"> }</span>
<a href="#l10.257"></a><span id="l10.257"> </span>
<a href="#l10.258"></a><span id="l10.258"> toolbar[iconsize=&quot;small&quot;] .hdrForwardButton {</span>
<a href="#l10.259"></a><span id="l10.259">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l10.260"></a><span id="l10.260">   -moz-image-region: rect(0px 112px 16px 96px);</span>
<a href="#l10.261"></a><span id="l10.261" class="difflineat">@@ -343,39 +353,39 @@ toolbar[iconsize=&quot;small&quot;] .hdrJunkButton</span>
<a href="#l10.262"></a><span id="l10.262"> .hdrTrashButton {</span>
<a href="#l10.263"></a><span id="l10.263">   list-style-image: url(&quot;moz-icon://stock/gtk-delete?size=toolbar&quot;);</span>
<a href="#l10.264"></a><span id="l10.264"> }</span>
<a href="#l10.265"></a><span id="l10.265"> </span>
<a href="#l10.266"></a><span id="l10.266"> toolbar[iconsize=&quot;small&quot;] .hdrTrashButton {</span>
<a href="#l10.267"></a><span id="l10.267">   list-style-image: url(&quot;moz-icon://stock/gtk-delete?size=menu&quot;);</span>
<a href="#l10.268"></a><span id="l10.268"> }</span>
<a href="#l10.269"></a><span id="l10.269"> </span>
<a href="#l10.270"></a><span id="l10.270" class="difflineminus">-#header-view-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l10.271"></a><span id="l10.271" class="difflineminus">-#header-view-toolbar toolbarseparator {</span>
<a href="#l10.272"></a><span id="l10.272" class="difflineplus">+.inline-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l10.273"></a><span id="l10.273" class="difflineplus">+.inline-toolbar toolbarseparator {</span>
<a href="#l10.274"></a><span id="l10.274">   height: 26px;</span>
<a href="#l10.275"></a><span id="l10.275"> }</span>
<a href="#l10.276"></a><span id="l10.276"> </span>
<a href="#l10.277"></a><span id="l10.277" class="difflineminus">-#header-view-toolbar toolbarspacer {</span>
<a href="#l10.278"></a><span id="l10.278" class="difflineplus">+.inline-toolbar toolbarspacer {</span>
<a href="#l10.279"></a><span id="l10.279">   height: 20px;</span>
<a href="#l10.280"></a><span id="l10.280"> }</span>
<a href="#l10.281"></a><span id="l10.281"> </span>
<a href="#l10.282"></a><span id="l10.282" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #wrapper-spring {</span>
<a href="#l10.283"></a><span id="l10.283" class="difflineplus">+window[inlinetoolbox] #wrapper-spring {</span>
<a href="#l10.284"></a><span id="l10.284">   display: none;</span>
<a href="#l10.285"></a><span id="l10.285"> }</span>
<a href="#l10.286"></a><span id="l10.286"> </span>
<a href="#l10.287"></a><span id="l10.287" class="difflineminus">-#header-view-toolbox[doCustomization] {</span>
<a href="#l10.288"></a><span id="l10.288" class="difflineplus">+.inline-toolbox[doCustomization] {</span>
<a href="#l10.289"></a><span id="l10.289">   background: grey;</span>
<a href="#l10.290"></a><span id="l10.290"> }</span>
<a href="#l10.291"></a><span id="l10.291"> </span>
<a href="#l10.292"></a><span id="l10.292" class="difflineminus">-#header-view-toolbox[doCustomization] #header-view-toolbar {</span>
<a href="#l10.293"></a><span id="l10.293" class="difflineplus">+.inline-toolbox[doCustomization] .inline-toolbar {</span>
<a href="#l10.294"></a><span id="l10.294">   min-width: 100px;</span>
<a href="#l10.295"></a><span id="l10.295">   min-height: 10px;</span>
<a href="#l10.296"></a><span id="l10.296"> }</span>
<a href="#l10.297"></a><span id="l10.297"> </span>
<a href="#l10.298"></a><span id="l10.298" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l10.299"></a><span id="l10.299" class="difflineplus">+.inline-toolbar {</span>
<a href="#l10.300"></a><span id="l10.300">   -moz-box-pack: end;</span>
<a href="#l10.301"></a><span id="l10.301"> }</span>
<a href="#l10.302"></a><span id="l10.302"> </span>
<a href="#l10.303"></a><span id="l10.303"> /*</span>
<a href="#l10.304"></a><span id="l10.304"> .hdrTrashButton &gt; .toolbarbutton-icon {</span>
<a href="#l10.305"></a><span id="l10.305">   -moz-margin-end: 0px;</span>
<a href="#l10.306"></a><span id="l10.306"> }</span>
<a href="#l10.307"></a><span id="l10.307"> */</span>
<a href="#l10.308"></a><span id="l10.308" class="difflineat">@@ -650,22 +660,22 @@ mail-emailaddress[selected=&quot;true&quot;] .emai</span>
<a href="#l10.309"></a><span id="l10.309"> mail-multi-emailHeaderField,</span>
<a href="#l10.310"></a><span id="l10.310"> mail-headerfield,</span>
<a href="#l10.311"></a><span id="l10.311"> mail-newsgroups-headerfield {</span>
<a href="#l10.312"></a><span id="l10.312">   margin: 0;</span>
<a href="#l10.313"></a><span id="l10.313">   padding: 0;</span>
<a href="#l10.314"></a><span id="l10.314">   -moz-box-align: baseline;</span>
<a href="#l10.315"></a><span id="l10.315"> }</span>
<a href="#l10.316"></a><span id="l10.316"> </span>
<a href="#l10.317"></a><span id="l10.317" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #smallicons,</span>
<a href="#l10.318"></a><span id="l10.318" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] button[icon=&quot;add&quot;] {</span>
<a href="#l10.319"></a><span id="l10.319" class="difflineplus">+window[inlinetoolbox] #smallicons,</span>
<a href="#l10.320"></a><span id="l10.320" class="difflineplus">+window[inlinetoolbox] button[icon=&quot;add&quot;] {</span>
<a href="#l10.321"></a><span id="l10.321">   display: none;</span>
<a href="#l10.322"></a><span id="l10.322"> }</span>
<a href="#l10.323"></a><span id="l10.323"> </span>
<a href="#l10.324"></a><span id="l10.324" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #modelist menuitem:first-child {</span>
<a href="#l10.325"></a><span id="l10.325" class="difflineplus">+window[inlinetoolbox] #modelist menuitem:first-child {</span>
<a href="#l10.326"></a><span id="l10.326">   display: none;</span>
<a href="#l10.327"></a><span id="l10.327"> }</span>
<a href="#l10.328"></a><span id="l10.328"> </span>
<a href="#l10.329"></a><span id="l10.329"> mail-headerfield &gt; .headerValue {</span>
<a href="#l10.330"></a><span id="l10.330">   -moz-user-focus: normal;</span>
<a href="#l10.331"></a><span id="l10.331">   -moz-user-select: text;</span>
<a href="#l10.332"></a><span id="l10.332">   word-wrap: break-word;</span>
<a href="#l10.333"></a><span id="l10.333"> }</span>
<a href="#l10.334"></a><span id="l10.334" class="difflineat">@@ -677,13 +687,14 @@ mail-headerfield &gt; .headerValue {</span>
<a href="#l10.335"></a><span id="l10.335"> }</span>
<a href="#l10.336"></a><span id="l10.336"> </span>
<a href="#l10.337"></a><span id="l10.337"> .hdrTrashButton &gt; .button-box &gt; .button-icon {</span>
<a href="#l10.338"></a><span id="l10.338">   list-style-image: url(&quot;moz-icon://stock/gtk-delete?size=menu&quot;);</span>
<a href="#l10.339"></a><span id="l10.339"> }</span>
<a href="#l10.340"></a><span id="l10.340"> </span>
<a href="#l10.341"></a><span id="l10.341"> #header-view-toolbox {</span>
<a href="#l10.342"></a><span id="l10.342">   float: right;</span>
<a href="#l10.343"></a><span id="l10.343" class="difflineplus">+  padding-top: 3px;</span>
<a href="#l10.344"></a><span id="l10.344"> }</span>
<a href="#l10.345"></a><span id="l10.345"> </span>
<a href="#l10.346"></a><span id="l10.346"> #header-view-toolbox:-moz-locale-dir(rtl) {</span>
<a href="#l10.347"></a><span id="l10.347">   float: left;</span>
<a href="#l10.348"></a><span id="l10.348"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a70946874bc1c96f0593171337c9e4d9e1affcc7</span>
<a href="#l11.3"></a><span id="l11.3">GIT binary patch
literal 538
zc$@(m0_FXQP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2ipP(
z4;vMHQZniQ00EjwL_t(I%cYV}YZ_4$#m{|z&lt;c%|#pkhlX{SJbVxX3!V69Nh%3c8bG
zAe7Qovq-)`Tq-01vv8TkfV$5r`63l588U=H(D8MXKV~wT(mc4E`_B7u?s=EA*7(Q~
z;f86NoO6D|7|SmA7mLM}=Xv|@0#d2e#%wmrN-04^006Buf*{z7a=^lkOeQ0gQZP*u
z@p$~X48x#*8i6qeAq0eYxmuUg8vqeS0#-p*I*?NSAApF!Ie+6I2!coeC6h@Wi^YC(
z&amp;eKE$!!VFYB%qXfCG&gt;qCuIpktodN*n^ZD&amp;~Jl^5H@5A%FPm{@H+qP|HSr(L15JG@+
z{#;T@D5YRo7Hr%0o6Y8FE|&lt;HZ$JxHN+wIn1FgRq4iFcOop&lt;b__luD&amp;@0DovHoG+bD
z=bPg=Kh{7Vs@3Xou~&lt;9&lt;a0dVsN_VT&lt;?Y4%);ddg6g~Ih}wc2r^P`G${90dS?tzNI!
zbR6gB62xmX8o%=S{3QVQmHO$AL-o1e?;n-RWw%nPj7Ou&lt;f!2C6N=s|jG!0-Ezzo1O
cfcq%XUtgcGR?)EsX8-^I07*qoM6N&lt;$f{s||cK`qY</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/themes/pinstripe/mail/messageHeader.css</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/themes/pinstripe/mail/messageHeader.css</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -59,22 +59,21 @@</span>
<a href="#l12.4"></a><span id="l12.4"> }</span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6"> /* ::::: msg header buttons ::::: */</span>
<a href="#l12.7"></a><span id="l12.7"> .headerContainer</span>
<a href="#l12.8"></a><span id="l12.8"> {</span>
<a href="#l12.9"></a><span id="l12.9">   min-width: 1px;</span>
<a href="#l12.10"></a><span id="l12.10"> }</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-#header-view-toolbox {</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+.inline-toolbox {</span>
<a href="#l12.14"></a><span id="l12.14">   -moz-padding-end: 6px;</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-  padding-top: 3px;</span>
<a href="#l12.16"></a><span id="l12.16"> }</span>
<a href="#l12.17"></a><span id="l12.17"> </span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+.inline-toolbar {</span>
<a href="#l12.20"></a><span id="l12.20">   -moz-appearance: none;</span>
<a href="#l12.21"></a><span id="l12.21"> }</span>
<a href="#l12.22"></a><span id="l12.22"> </span>
<a href="#l12.23"></a><span id="l12.23"> #expandedHeaderRows &gt; row,</span>
<a href="#l12.24"></a><span id="l12.24"> #expandedHeader2Rows &gt; row {</span>
<a href="#l12.25"></a><span id="l12.25"> /* Ensure that the header names and values are aligned with each other. */</span>
<a href="#l12.26"></a><span id="l12.26">   -moz-box-align: baseline;</span>
<a href="#l12.27"></a><span id="l12.27"> }</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineat">@@ -128,98 +127,109 @@ html|div#expandedHeadersTopBox {</span>
<a href="#l12.29"></a><span id="l12.29"> /* ::::: expanded header pane ::::: */</span>
<a href="#l12.30"></a><span id="l12.30"> </span>
<a href="#l12.31"></a><span id="l12.31"> #expandedsubjectBox &gt; .headerValue {</span>
<a href="#l12.32"></a><span id="l12.32">   font-weight: bold;</span>
<a href="#l12.33"></a><span id="l12.33"> }</span>
<a href="#l12.34"></a><span id="l12.34"> </span>
<a href="#l12.35"></a><span id="l12.35"> /* ::::: edit message bar ::::: */</span>
<a href="#l12.36"></a><span id="l12.36"> </span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-#editMessageBox</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineminus">-{</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+#editMessageBox {</span>
<a href="#l12.40"></a><span id="l12.40">   min-width: 1px;</span>
<a href="#l12.41"></a><span id="l12.41">   border-bottom-left-radius: 0.2em;</span>
<a href="#l12.42"></a><span id="l12.42">   border-bottom-right-radius: 0.2em;</span>
<a href="#l12.43"></a><span id="l12.43"> }</span>
<a href="#l12.44"></a><span id="l12.44"> </span>
<a href="#l12.45"></a><span id="l12.45" class="difflineminus">-#editMessageDescription</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineminus">-{</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineplus">+#editMessageDescription {</span>
<a href="#l12.48"></a><span id="l12.48">   font-style: italic;</span>
<a href="#l12.49"></a><span id="l12.49">   font-weight: bolder;</span>
<a href="#l12.50"></a><span id="l12.50"> }</span>
<a href="#l12.51"></a><span id="l12.51"> </span>
<a href="#l12.52"></a><span id="l12.52"> /* ::::: attachment view ::::: */</span>
<a href="#l12.53"></a><span id="l12.53"> </span>
<a href="#l12.54"></a><span id="l12.54" class="difflineminus">-#attachmentList</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineminus">-{</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineplus">+#attachmentList {</span>
<a href="#l12.57"></a><span id="l12.57">   margin: 0px;</span>
<a href="#l12.58"></a><span id="l12.58"> }</span>
<a href="#l12.59"></a><span id="l12.59"> </span>
<a href="#l12.60"></a><span id="l12.60" class="difflineplus">+#attachmentToggle {</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineplus">+  -moz-appearance: treetwisty;</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineplus">+}</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineplus">+</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineplus">+#attachmentToggle[checked=&quot;true&quot;] {</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineplus">+  -moz-appearance: treetwistyopen;</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineplus">+}</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineplus">+</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineplus">+#attachmentIcon {</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/attachment.png&quot;);</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineplus">+  -moz-margin-start: 5px;</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineplus">+}</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineplus">+</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineplus">+#attachmentCount {</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineplus">+  -moz-margin-start: 0;</span>
<a href="#l12.75"></a><span id="l12.75" class="difflineplus">+  -moz-margin-end: 5px;</span>
<a href="#l12.76"></a><span id="l12.76" class="difflineplus">+}</span>
<a href="#l12.77"></a><span id="l12.77" class="difflineplus">+</span>
<a href="#l12.78"></a><span id="l12.78" class="difflineplus">+#attachmentSize {</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineplus">+  color: #888a85; /* the same color as .headerName */</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineplus">+}</span>
<a href="#l12.81"></a><span id="l12.81" class="difflineplus">+</span>
<a href="#l12.82"></a><span id="l12.82" class="difflineplus">+#attachmentSaveAllSingle,</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineplus">+#attachmentSaveAllMultiple {</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/download.png&quot;);</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineplus">+}</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineplus">+</span>
<a href="#l12.87"></a><span id="l12.87"> /* XXX: Move all of the description attributes to the toolkit */</span>
<a href="#l12.88"></a><span id="l12.88"> </span>
<a href="#l12.89"></a><span id="l12.89"> description {</span>
<a href="#l12.90"></a><span id="l12.90">   margin: 0;</span>
<a href="#l12.91"></a><span id="l12.91"> }</span>
<a href="#l12.92"></a><span id="l12.92"> </span>
<a href="#l12.93"></a><span id="l12.93" class="difflineminus">-descriptionitem</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineminus">-{</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineplus">+descriptionitem {</span>
<a href="#l12.96"></a><span id="l12.96">   padding: 0px;</span>
<a href="#l12.97"></a><span id="l12.97">   margin: 1px;</span>
<a href="#l12.98"></a><span id="l12.98">   text-decoration: underline;</span>
<a href="#l12.99"></a><span id="l12.99">   color: blue;</span>
<a href="#l12.100"></a><span id="l12.100">   border: none !important;</span>
<a href="#l12.101"></a><span id="l12.101"> }</span>
<a href="#l12.102"></a><span id="l12.102"> </span>
<a href="#l12.103"></a><span id="l12.103" class="difflineminus">-description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;][current=&quot;true&quot;] </span>
<a href="#l12.104"></a><span id="l12.104" class="difflineminus">-{</span>
<a href="#l12.105"></a><span id="l12.105" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;][current=&quot;true&quot;] {</span>
<a href="#l12.106"></a><span id="l12.106">   border: 1px solid #B8B8B8;</span>
<a href="#l12.107"></a><span id="l12.107">   background-color: #C8C8C8;</span>
<a href="#l12.108"></a><span id="l12.108"> }</span>
<a href="#l12.109"></a><span id="l12.109"> </span>
<a href="#l12.110"></a><span id="l12.110" class="difflineminus">-descriptionitem[selected=&quot;true&quot;] </span>
<a href="#l12.111"></a><span id="l12.111" class="difflineminus">-{</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineplus">+descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l12.113"></a><span id="l12.113">   border: 1px solid #B8B8B8;</span>
<a href="#l12.114"></a><span id="l12.114">   background-color: #C8C8C8;</span>
<a href="#l12.115"></a><span id="l12.115"> }</span>
<a href="#l12.116"></a><span id="l12.116"> </span>
<a href="#l12.117"></a><span id="l12.117" class="difflineminus">-description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;] </span>
<a href="#l12.118"></a><span id="l12.118" class="difflineminus">-{</span>
<a href="#l12.119"></a><span id="l12.119" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l12.120"></a><span id="l12.120">   border: 1px solid #B8B8B8;</span>
<a href="#l12.121"></a><span id="l12.121">   background-color: #C8C8C8;</span>
<a href="#l12.122"></a><span id="l12.122"> }</span>
<a href="#l12.123"></a><span id="l12.123"> </span>
<a href="#l12.124"></a><span id="l12.124"> .descriptioncell-icon {</span>
<a href="#l12.125"></a><span id="l12.125"> }</span>
<a href="#l12.126"></a><span id="l12.126"> </span>
<a href="#l12.127"></a><span id="l12.127" class="difflineminus">-.attachmentBox </span>
<a href="#l12.128"></a><span id="l12.128" class="difflineminus">-{</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineplus">+.attachmentBox {</span>
<a href="#l12.130"></a><span id="l12.130">   width: 15em;</span>
<a href="#l12.131"></a><span id="l12.131"> }</span>
<a href="#l12.132"></a><span id="l12.132"> </span>
<a href="#l12.133"></a><span id="l12.133" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;] .attachmentBox</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineminus">-{</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineplus">+#attachmentView[largeView=&quot;true&quot;] .attachmentBox{</span>
<a href="#l12.136"></a><span id="l12.136">   -moz-box-orient: vertical;</span>
<a href="#l12.137"></a><span id="l12.137"> }</span>
<a href="#l12.138"></a><span id="l12.138"> </span>
<a href="#l12.139"></a><span id="l12.139" class="difflineminus">-#attachmentView</span>
<a href="#l12.140"></a><span id="l12.140" class="difflineminus">-{</span>
<a href="#l12.141"></a><span id="l12.141" class="difflineplus">+#attachmentView {</span>
<a href="#l12.142"></a><span id="l12.142">   background-color: #E6E6E6;</span>
<a href="#l12.143"></a><span id="l12.143">   border: 1px solid #C8C8C8;</span>
<a href="#l12.144"></a><span id="l12.144">   border-radius: 7px;</span>
<a href="#l12.145"></a><span id="l12.145" class="difflineminus">-  margin: 0px 6px 6px;</span>
<a href="#l12.146"></a><span id="l12.146" class="difflineplus">+  margin: 4px;</span>
<a href="#l12.147"></a><span id="l12.147">   padding: 4px;  </span>
<a href="#l12.148"></a><span id="l12.148" class="difflineminus">-  min-height: 30px;</span>
<a href="#l12.149"></a><span id="l12.149"> }</span>
<a href="#l12.150"></a><span id="l12.150"> </span>
<a href="#l12.151"></a><span id="l12.151" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;]</span>
<a href="#l12.152"></a><span id="l12.152" class="difflineminus">-{</span>
<a href="#l12.153"></a><span id="l12.153" class="difflineminus">-  min-height: 60px;</span>
<a href="#l12.154"></a><span id="l12.154" class="difflineminus">-}</span>
<a href="#l12.155"></a><span id="l12.155" class="difflineminus">-</span>
<a href="#l12.156"></a><span id="l12.156" class="difflineminus">-#attachmentView[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l12.157"></a><span id="l12.157" class="difflineplus">+#attachmentListWrapper[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l12.158"></a><span id="l12.158">   overflow: auto;</span>
<a href="#l12.159"></a><span id="l12.159"> }</span>
<a href="#l12.160"></a><span id="l12.160"> </span>
<a href="#l12.161"></a><span id="l12.161"> #attachment-splitter {</span>
<a href="#l12.162"></a><span id="l12.162">   min-height: 7px;</span>
<a href="#l12.163"></a><span id="l12.163">   border-top: 1px solid #C8C8C8;</span>
<a href="#l12.164"></a><span id="l12.164">   background-color: #E6E6E6;</span>
<a href="#l12.165"></a><span id="l12.165"> }</span>
<a href="#l12.166"></a><span id="l12.166" class="difflineat">@@ -263,16 +273,37 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l12.167"></a><span id="l12.167"> }</span>
<a href="#l12.168"></a><span id="l12.168"> </span>
<a href="#l12.169"></a><span id="l12.169"> .msgHeaderView-button:active,</span>
<a href="#l12.170"></a><span id="l12.170"> .msgHeaderView-button[type=&quot;menu-button&quot;][open] {</span>
<a href="#l12.171"></a><span id="l12.171">   background-color: rgb(186,186,186);</span>
<a href="#l12.172"></a><span id="l12.172">   box-shadow: 0 4px 3px 0 rgb(140,140,140) inset;</span>
<a href="#l12.173"></a><span id="l12.173"> }</span>
<a href="#l12.174"></a><span id="l12.174"> </span>
<a href="#l12.175"></a><span id="l12.175" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l12.176"></a><span id="l12.176" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l12.177"></a><span id="l12.177" class="difflineplus">+  padding: 0;</span>
<a href="#l12.178"></a><span id="l12.178" class="difflineplus">+  margin: 0;</span>
<a href="#l12.179"></a><span id="l12.179" class="difflineplus">+  -moz-padding-start: 0px;</span>
<a href="#l12.180"></a><span id="l12.180" class="difflineplus">+  -moz-padding-end: 0px;</span>
<a href="#l12.181"></a><span id="l12.181" class="difflineplus">+  -moz-margin-start: 0px;</span>
<a href="#l12.182"></a><span id="l12.182" class="difflineplus">+  -moz-margin-end: 0px;</span>
<a href="#l12.183"></a><span id="l12.183" class="difflineplus">+  padding-bottom: 2px !important;</span>
<a href="#l12.184"></a><span id="l12.184" class="difflineplus">+  min-width: 1em;</span>
<a href="#l12.185"></a><span id="l12.185" class="difflineplus">+  min-height: 1ex;</span>
<a href="#l12.186"></a><span id="l12.186" class="difflineplus">+}</span>
<a href="#l12.187"></a><span id="l12.187" class="difflineplus">+</span>
<a href="#l12.188"></a><span id="l12.188" class="difflineplus">+/* The default toolbarbutton CSS makes the dropmarker really tiny in icon mode;</span>
<a href="#l12.189"></a><span id="l12.189" class="difflineplus">+ * make the click target easier to hit.</span>
<a href="#l12.190"></a><span id="l12.190" class="difflineplus">+ */</span>
<a href="#l12.191"></a><span id="l12.191" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-dropmarker {</span>
<a href="#l12.192"></a><span id="l12.192" class="difflineplus">+  -moz-margin-start: 3px;</span>
<a href="#l12.193"></a><span id="l12.193" class="difflineplus">+  -moz-margin-end: 4px;</span>
<a href="#l12.194"></a><span id="l12.194" class="difflineplus">+}</span>
<a href="#l12.195"></a><span id="l12.195" class="difflineplus">+</span>
<a href="#l12.196"></a><span id="l12.196"> .msgHeaderView-flat-button {</span>
<a href="#l12.197"></a><span id="l12.197">   min-width: 1px;</span>
<a href="#l12.198"></a><span id="l12.198">   -moz-appearance: none;</span>
<a href="#l12.199"></a><span id="l12.199">   font-size: 90%;</span>
<a href="#l12.200"></a><span id="l12.200">   color: black;</span>
<a href="#l12.201"></a><span id="l12.201">   margin-top: 1px;</span>
<a href="#l12.202"></a><span id="l12.202">   margin-bottom: 2px;</span>
<a href="#l12.203"></a><span id="l12.203">   -moz-margin-start: 0px;</span>
<a href="#l12.204"></a><span id="l12.204" class="difflineat">@@ -352,37 +383,16 @@ toolbarpaletteitem &gt; #hdrReplyToSenderBu</span>
<a href="#l12.205"></a><span id="l12.205"> }</span>
<a href="#l12.206"></a><span id="l12.206"> </span>
<a href="#l12.207"></a><span id="l12.207"> .hdrReplyAllButton {</span>
<a href="#l12.208"></a><span id="l12.208">   /* large icons are only needed for customization dialog, so use here also small icons */</span>
<a href="#l12.209"></a><span id="l12.209">   list-style-image: url(&quot;chrome://messenger/skin/icons/message-header-toolbar.png&quot;);</span>
<a href="#l12.210"></a><span id="l12.210">   -moz-image-region: rect(0px, 32px, 16px, 16px);</span>
<a href="#l12.211"></a><span id="l12.211"> }</span>
<a href="#l12.212"></a><span id="l12.212"> </span>
<a href="#l12.213"></a><span id="l12.213" class="difflineminus">-.hdrReplyButton &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l12.214"></a><span id="l12.214" class="difflineminus">-  -moz-appearance: none;</span>
<a href="#l12.215"></a><span id="l12.215" class="difflineminus">-  padding: 0;</span>
<a href="#l12.216"></a><span id="l12.216" class="difflineminus">-  margin: 0;</span>
<a href="#l12.217"></a><span id="l12.217" class="difflineminus">-  -moz-padding-start: 0px;</span>
<a href="#l12.218"></a><span id="l12.218" class="difflineminus">-  -moz-padding-end: 0px;</span>
<a href="#l12.219"></a><span id="l12.219" class="difflineminus">-  -moz-margin-start: 0px;</span>
<a href="#l12.220"></a><span id="l12.220" class="difflineminus">-  -moz-margin-end: 0px;</span>
<a href="#l12.221"></a><span id="l12.221" class="difflineminus">-  padding-bottom: 2px !important;</span>
<a href="#l12.222"></a><span id="l12.222" class="difflineminus">-  min-width: 1em;</span>
<a href="#l12.223"></a><span id="l12.223" class="difflineminus">-  min-height: 1ex;</span>
<a href="#l12.224"></a><span id="l12.224" class="difflineminus">-}</span>
<a href="#l12.225"></a><span id="l12.225" class="difflineminus">-</span>
<a href="#l12.226"></a><span id="l12.226" class="difflineminus">-/* The default toolbarbutton CSS makes the dropmarker really tiny in icon mode;</span>
<a href="#l12.227"></a><span id="l12.227" class="difflineminus">- * make the click target easier to hit.</span>
<a href="#l12.228"></a><span id="l12.228" class="difflineminus">- */</span>
<a href="#l12.229"></a><span id="l12.229" class="difflineminus">-.hdrReplyButton &gt; .toolbarbutton-menubutton-dropmarker {</span>
<a href="#l12.230"></a><span id="l12.230" class="difflineminus">-  -moz-margin-start: 3px;</span>
<a href="#l12.231"></a><span id="l12.231" class="difflineminus">-  -moz-margin-end: 4px;</span>
<a href="#l12.232"></a><span id="l12.232" class="difflineminus">-}</span>
<a href="#l12.233"></a><span id="l12.233" class="difflineminus">-</span>
<a href="#l12.234"></a><span id="l12.234"> .hdrForwardButton {</span>
<a href="#l12.235"></a><span id="l12.235">   /* large icons are only needed for customization dialog, so use here also small icons */</span>
<a href="#l12.236"></a><span id="l12.236">   list-style-image: url(&quot;chrome://messenger/skin/icons/message-header-toolbar.png&quot;);</span>
<a href="#l12.237"></a><span id="l12.237">   -moz-image-region: rect(0px, 64px, 16px, 48px);</span>
<a href="#l12.238"></a><span id="l12.238"> }</span>
<a href="#l12.239"></a><span id="l12.239"> </span>
<a href="#l12.240"></a><span id="l12.240"> .hdrArchiveButton {</span>
<a href="#l12.241"></a><span id="l12.241">   /* large icons are only needed for customization dialog, so use here also small icons */</span>
<a href="#l12.242"></a><span id="l12.242" class="difflineat">@@ -402,39 +412,39 @@ toolbarpaletteitem &gt; #hdrReplyToSenderBu</span>
<a href="#l12.243"></a><span id="l12.243"> }</span>
<a href="#l12.244"></a><span id="l12.244"> </span>
<a href="#l12.245"></a><span id="l12.245"> .hdrTrashButton {</span>
<a href="#l12.246"></a><span id="l12.246">   /* large icons are only needed for customization dialog, so use here also small icons */</span>
<a href="#l12.247"></a><span id="l12.247">   list-style-image: url(&quot;chrome://messenger/skin/icons/message-header-toolbar.png&quot;);</span>
<a href="#l12.248"></a><span id="l12.248">   -moz-image-region: rect(0px, 80px, 16px, 64px);</span>
<a href="#l12.249"></a><span id="l12.249"> }</span>
<a href="#l12.250"></a><span id="l12.250"> </span>
<a href="#l12.251"></a><span id="l12.251" class="difflineminus">-#header-view-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l12.252"></a><span id="l12.252" class="difflineminus">-#header-view-toolbar toolbarseparator {</span>
<a href="#l12.253"></a><span id="l12.253" class="difflineplus">+.inline-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l12.254"></a><span id="l12.254" class="difflineplus">+.inline-toolbar toolbarseparator {</span>
<a href="#l12.255"></a><span id="l12.255">   height: 26px;</span>
<a href="#l12.256"></a><span id="l12.256"> }</span>
<a href="#l12.257"></a><span id="l12.257"> </span>
<a href="#l12.258"></a><span id="l12.258" class="difflineminus">-#header-view-toolbar toolbarspacer {</span>
<a href="#l12.259"></a><span id="l12.259" class="difflineplus">+.inline-toolbar toolbarspacer {</span>
<a href="#l12.260"></a><span id="l12.260">   height: 20px;</span>
<a href="#l12.261"></a><span id="l12.261"> }</span>
<a href="#l12.262"></a><span id="l12.262"> </span>
<a href="#l12.263"></a><span id="l12.263" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #wrapper-spring {</span>
<a href="#l12.264"></a><span id="l12.264" class="difflineplus">+window[inlinetoolbox] #wrapper-spring {</span>
<a href="#l12.265"></a><span id="l12.265">   display: none;</span>
<a href="#l12.266"></a><span id="l12.266"> }</span>
<a href="#l12.267"></a><span id="l12.267"> </span>
<a href="#l12.268"></a><span id="l12.268" class="difflineminus">-#header-view-toolbox[doCustomization] {</span>
<a href="#l12.269"></a><span id="l12.269" class="difflineplus">+.inline-toolbox[doCustomization] {</span>
<a href="#l12.270"></a><span id="l12.270">   background: grey;</span>
<a href="#l12.271"></a><span id="l12.271"> }</span>
<a href="#l12.272"></a><span id="l12.272"> </span>
<a href="#l12.273"></a><span id="l12.273" class="difflineminus">-#header-view-toolbox[doCustomization] #header-view-toolbar {</span>
<a href="#l12.274"></a><span id="l12.274" class="difflineplus">+.inline-toolbox[doCustomization] .inline-toolbar {</span>
<a href="#l12.275"></a><span id="l12.275">   min-width: 100px;</span>
<a href="#l12.276"></a><span id="l12.276">   min-height: 10px;</span>
<a href="#l12.277"></a><span id="l12.277"> }</span>
<a href="#l12.278"></a><span id="l12.278"> </span>
<a href="#l12.279"></a><span id="l12.279" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l12.280"></a><span id="l12.280" class="difflineplus">+.inline-toolbar {</span>
<a href="#l12.281"></a><span id="l12.281">   -moz-box-pack: end;</span>
<a href="#l12.282"></a><span id="l12.282">   min-width: 50px !important;</span>
<a href="#l12.283"></a><span id="l12.283">   min-height: 14px !important;</span>
<a href="#l12.284"></a><span id="l12.284"> }</span>
<a href="#l12.285"></a><span id="l12.285"> </span>
<a href="#l12.286"></a><span id="l12.286"> </span>
<a href="#l12.287"></a><span id="l12.287"> .msgHeaderView-flat-button:hover {</span>
<a href="#l12.288"></a><span id="l12.288">   background-color: rgb(230,231,227);</span>
<a href="#l12.289"></a><span id="l12.289" class="difflineat">@@ -676,30 +686,31 @@ mail-emailaddress[selected=&quot;true&quot;] .emai</span>
<a href="#l12.290"></a><span id="l12.290"> mail-multi-emailHeaderField,</span>
<a href="#l12.291"></a><span id="l12.291"> mail-headerfield,</span>
<a href="#l12.292"></a><span id="l12.292"> mail-newsgroups-headerfield {</span>
<a href="#l12.293"></a><span id="l12.293">   margin: 0;</span>
<a href="#l12.294"></a><span id="l12.294">   padding: 0;</span>
<a href="#l12.295"></a><span id="l12.295">   -moz-box-align: baseline;</span>
<a href="#l12.296"></a><span id="l12.296"> }</span>
<a href="#l12.297"></a><span id="l12.297"> </span>
<a href="#l12.298"></a><span id="l12.298" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #smallicons,</span>
<a href="#l12.299"></a><span id="l12.299" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] button[icon=&quot;add&quot;] {</span>
<a href="#l12.300"></a><span id="l12.300" class="difflineplus">+window[inlinetoolbox] #smallicons,</span>
<a href="#l12.301"></a><span id="l12.301" class="difflineplus">+window[inlinetoolbox] button[icon=&quot;add&quot;] {</span>
<a href="#l12.302"></a><span id="l12.302">   display: none;</span>
<a href="#l12.303"></a><span id="l12.303"> }</span>
<a href="#l12.304"></a><span id="l12.304"> </span>
<a href="#l12.305"></a><span id="l12.305" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #modelist menuitem:first-child {</span>
<a href="#l12.306"></a><span id="l12.306" class="difflineplus">+window[inlinetoolbox] #modelist menuitem:first-child {</span>
<a href="#l12.307"></a><span id="l12.307">   display: none;</span>
<a href="#l12.308"></a><span id="l12.308"> }</span>
<a href="#l12.309"></a><span id="l12.309"> </span>
<a href="#l12.310"></a><span id="l12.310"> mail-headerfield &gt; .headerValue {</span>
<a href="#l12.311"></a><span id="l12.311">   -moz-user-focus: normal;</span>
<a href="#l12.312"></a><span id="l12.312">   -moz-user-select: text;</span>
<a href="#l12.313"></a><span id="l12.313">   word-wrap: break-word;</span>
<a href="#l12.314"></a><span id="l12.314"> }</span>
<a href="#l12.315"></a><span id="l12.315"> </span>
<a href="#l12.316"></a><span id="l12.316"> #header-view-toolbox {</span>
<a href="#l12.317"></a><span id="l12.317">   float: right;</span>
<a href="#l12.318"></a><span id="l12.318" class="difflineplus">+  padding-top: 3px;</span>
<a href="#l12.319"></a><span id="l12.319"> }</span>
<a href="#l12.320"></a><span id="l12.320"> </span>
<a href="#l12.321"></a><span id="l12.321"> #header-view-toolbox:-moz-locale-dir(rtl) {</span>
<a href="#l12.322"></a><span id="l12.322">   float: left;</span>
<a href="#l12.323"></a><span id="l12.323"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/themes/qute/jar.mn</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/themes/qute/jar.mn</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -447,14 +447,15 @@ classic.jar:</span>
<a href="#l13.4"></a><span id="l13.4">   skin/classic/aero/messenger/icons/arrow/arrow-up-dim.png         (mail/icons/arrow/arrow-up-dim.png)</span>
<a href="#l13.5"></a><span id="l13.5">   skin/classic/aero/messenger/icons/arrow/arrow-down-dim.png       (mail/icons/arrow/arrow-down-dim.png)</span>
<a href="#l13.6"></a><span id="l13.6">   skin/classic/aero/messenger/icons/arrow/foldercycler-arrow-left.png        (mail/icons/arrow/foldercycler-arrow-left.png)</span>
<a href="#l13.7"></a><span id="l13.7">   skin/classic/aero/messenger/icons/arrow/foldercycler-arrow-right.png       (mail/icons/arrow/foldercycler-arrow-right.png)</span>
<a href="#l13.8"></a><span id="l13.8">   skin/classic/aero/messenger/icons/filter.png                     (mail/icons/filter.png)</span>
<a href="#l13.9"></a><span id="l13.9">   skin/classic/aero/messenger/icons/xp-pin-grey.png                (mail/icons/xp-pin-grey.png)</span>
<a href="#l13.10"></a><span id="l13.10">   skin/classic/aero/messenger/icons/xp-pin-red.png                 (mail/icons/xp-pin-red.png)</span>
<a href="#l13.11"></a><span id="l13.11">   skin/classic/aero/messenger/tagbg.png                            (mail/tagbg.png)</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+  skin/classic/aero/messenger/icons/download.png                   (mail/icons/download.png)</span>
<a href="#l13.13"></a><span id="l13.13"> % skin messenger-newsblog classic/1.0 %skin/classic/aero/messenger-newsblog/ os=WINNT osversion&gt;=6</span>
<a href="#l13.14"></a><span id="l13.14">   skin/classic/aero/messenger-newsblog/feed-subscriptions.css      (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l13.15"></a><span id="l13.15">   skin/classic/aero/messenger-newsblog/icons/rss-feed.png          (mail/newsblog/rss-feed-aero.png)</span>
<a href="#l13.16"></a><span id="l13.16">   skin/classic/aero/messenger-newsblog/icons/server-rss.png        (mail/newsblog/server-rss-aero.png)</span>
<a href="#l13.17"></a><span id="l13.17"> </span>
<a href="#l13.18"></a><span id="l13.18"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..19938e937fc5e5e737b10152120ab9a541aff3d9</span>
<a href="#l14.3"></a><span id="l14.3">GIT binary patch
literal 744
zc$@*~0vG*&gt;P)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00001b5ch_0Itp)
z=&gt;Px#24YJ`L;(K){{a7&gt;y{D4^000SaNLh0L01FcU01FcV0GgZ_00007bV*G`2ipP(
z4;&amp;NPZ~+(q00L-9L_t(I%YBp2OBGQR$3J)G-kCQ(ZQfHUOB5?hs7+`&gt;wTepoRf(0j
zDT-P}pad@bE5a7hqJJTfR{bz4l2$=2Ou&lt;wvsGdnVD$;w;nLD?|dzy-NR`;I!J)gt&lt;
za*mkJ1Z)To*bAiDJ^~;EWY-dMi@*cYjSc%BhKY2utqRXNj8M7Y{fEif+rZ-g01iOe
zz5~s52kVhif`Ld!e3_YQ-l*9LAOKRn&amp;#tmEgb)ZIHU{5MZPM%nC?utYk`f^V27_e`
z(iYpAvI9V(9JSuc#0J~4cLXGh&lt;|&amp;|}08qHjzput|j8tmvS^*d!0&lt;sdQDMHpGS(?Ok
zT@V6e3`T2`$#sbfR2R=HVmcEv9j&amp;Vw_A2+*l=?nZd#b2EbdXdkUGTsdVy#&amp;S7MPlv
zVlFes%JLF=dH(CC*&amp;mnfzJbBYgqKh&amp;*+0z&lt;4M*&amp;n+FEw`J_*-BDT$Oe!m^N3kxHj1
zPnDB!?C{3TTaS)4Hhr}F1_t%1lP8vi(Tg+F)5raE+Ab+6K`94YN-WC;0YV704p|O&lt;
z=X&lt;Yo4_&amp;=&gt;{dp9d83`=qLOs^g(~IXOqLJ65{Ux5~O3%X*7O{yjCMFj}EX@DRcXhT6
zUF^Q}G#Bb|U`ZC;T+D@ftn*@5tQ-}OycxY)?bNx+WGN&lt;$30L#{n$Kh}bhO=X?&gt;zr3
zUnmX$y*39C5adHW-qPA(K=A7AyZ+r()t)gibKk#ZJ6q4)JKNIsA|L9Bwc@RVq=8^H
z(i1JM?KqAK9}hpdgMrK4T@Oy5Irnlk+FT4EwyZON4WwLUANCy80FYe`C-b5HT--#x
aQT!Jjfayh)&amp;-l{-0000&lt;MNUMnLSTZw(L_T4</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/themes/qute/mail/messageHeader-aero.css</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/themes/qute/mail/messageHeader-aero.css</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -78,25 +78,24 @@ html|div#expandedHeadersTopBox {</span>
<a href="#l15.4"></a><span id="l15.4"> </span>
<a href="#l15.5"></a><span id="l15.5"> #otherActionsButton {</span>
<a href="#l15.6"></a><span id="l15.6">   margin-bottom: .1em;</span>
<a href="#l15.7"></a><span id="l15.7">   padding-top: 0px;</span>
<a href="#l15.8"></a><span id="l15.8"> }</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10"> /* ::::: expanded header pane ::::: */</span>
<a href="#l15.11"></a><span id="l15.11"> </span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-#header-view-toolbox {</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+.inline-toolbox {</span>
<a href="#l15.14"></a><span id="l15.14">   border-top-width: 0;</span>
<a href="#l15.15"></a><span id="l15.15">   -moz-appearance: none;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-  padding-top: 3px;</span>
<a href="#l15.17"></a><span id="l15.17">   background-color: transparent;</span>
<a href="#l15.18"></a><span id="l15.18"> }</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20"> /* toolbars are optimized to look like OS-provided widgets; override this */</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineplus">+.inline-toolbar {</span>
<a href="#l15.23"></a><span id="l15.23">   -moz-appearance: none;</span>
<a href="#l15.24"></a><span id="l15.24">   padding: 0;</span>
<a href="#l15.25"></a><span id="l15.25">   border-bottom-width: 0;</span>
<a href="#l15.26"></a><span id="l15.26"> }</span>
<a href="#l15.27"></a><span id="l15.27"> </span>
<a href="#l15.28"></a><span id="l15.28"> /* We use pixels here because the height of the button is in pixels. */</span>
<a href="#l15.29"></a><span id="l15.29"> #expandedHeaderRows {</span>
<a href="#l15.30"></a><span id="l15.30">   padding-top: 14px;</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineat">@@ -122,29 +121,54 @@ html|div#expandedHeadersTopBox {</span>
<a href="#l15.32"></a><span id="l15.32"> /* ::::: attachment view ::::: */</span>
<a href="#l15.33"></a><span id="l15.33"> </span>
<a href="#l15.34"></a><span id="l15.34"> #attachmentList {</span>
<a href="#l15.35"></a><span id="l15.35">   margin: 0px;</span>
<a href="#l15.36"></a><span id="l15.36">   background-color: -moz-Field;</span>
<a href="#l15.37"></a><span id="l15.37">   color: -moz-FieldText;</span>
<a href="#l15.38"></a><span id="l15.38"> }</span>
<a href="#l15.39"></a><span id="l15.39"> </span>
<a href="#l15.40"></a><span id="l15.40" class="difflineplus">+#attachmentToggle {</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineplus">+  -moz-appearance: treetwisty;</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineplus">+}</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineplus">+</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineplus">+#attachmentToggle[checked=&quot;true&quot;] {</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineplus">+  -moz-appearance: treetwistyopen;</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineplus">+}</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineplus">+</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineplus">+#attachmentIcon {</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/attachment-col.png&quot;);</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineplus">+  -moz-margin-start: 5px;</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineplus">+}</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineplus">+</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineplus">+#attachmentCount {</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineplus">+  -moz-margin-start: 0;</span>
<a href="#l15.55"></a><span id="l15.55" class="difflineplus">+}</span>
<a href="#l15.56"></a><span id="l15.56" class="difflineplus">+</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineplus">+#attachmentSize {</span>
<a href="#l15.58"></a><span id="l15.58" class="difflineplus">+  color: #888a85; /* the same color as .headerName */</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineplus">+}</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineplus">+</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineplus">+#attachmentSaveAllSingle,</span>
<a href="#l15.62"></a><span id="l15.62" class="difflineplus">+#attachmentSaveAllMultiple {</span>
<a href="#l15.63"></a><span id="l15.63" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/download.png&quot;);</span>
<a href="#l15.64"></a><span id="l15.64" class="difflineplus">+}</span>
<a href="#l15.65"></a><span id="l15.65" class="difflineplus">+</span>
<a href="#l15.66"></a><span id="l15.66"> /* XXX: Move all of the description attributes to the toolkit */</span>
<a href="#l15.67"></a><span id="l15.67"> </span>
<a href="#l15.68"></a><span id="l15.68"> description[selectable=&quot;true&quot;] {</span>
<a href="#l15.69"></a><span id="l15.69">   margin: 1px 5px 4px;</span>
<a href="#l15.70"></a><span id="l15.70"> }</span>
<a href="#l15.71"></a><span id="l15.71"> </span>
<a href="#l15.72"></a><span id="l15.72"> descriptionitem {</span>
<a href="#l15.73"></a><span id="l15.73">   border: 1px solid transparent;</span>
<a href="#l15.74"></a><span id="l15.74">   margin: 1px;</span>
<a href="#l15.75"></a><span id="l15.75"> }</span>
<a href="#l15.76"></a><span id="l15.76"> </span>
<a href="#l15.77"></a><span id="l15.77" class="difflineminus">-description[selectable=&quot;true&quot;]:focus</span>
<a href="#l15.78"></a><span id="l15.78" class="difflineminus">-&gt; descriptionitem[selected=&quot;true&quot;][current=&quot;true&quot;] {</span>
<a href="#l15.79"></a><span id="l15.79" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[current=&quot;true&quot;] {</span>
<a href="#l15.80"></a><span id="l15.80">   border: 1px dotted #F5DB95;</span>
<a href="#l15.81"></a><span id="l15.81"> }</span>
<a href="#l15.82"></a><span id="l15.82"> </span>
<a href="#l15.83"></a><span id="l15.83"> descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l15.84"></a><span id="l15.84">   background-color: -moz-Dialog;</span>
<a href="#l15.85"></a><span id="l15.85">   color: -moz-DialogText;</span>
<a href="#l15.86"></a><span id="l15.86"> }</span>
<a href="#l15.87"></a><span id="l15.87"> </span>
<a href="#l15.88"></a><span id="l15.88" class="difflineat">@@ -158,24 +182,19 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l15.89"></a><span id="l15.89"> }</span>
<a href="#l15.90"></a><span id="l15.90"> </span>
<a href="#l15.91"></a><span id="l15.91"> #attachmentView[largeView=&quot;true&quot;] .attachmentBox {</span>
<a href="#l15.92"></a><span id="l15.92">   -moz-box-orient: vertical;</span>
<a href="#l15.93"></a><span id="l15.93"> }</span>
<a href="#l15.94"></a><span id="l15.94"> </span>
<a href="#l15.95"></a><span id="l15.95"> #attachmentView {</span>
<a href="#l15.96"></a><span id="l15.96">   border-top: 1px solid ThreeDShadow;</span>
<a href="#l15.97"></a><span id="l15.97" class="difflineminus">-  min-height: 30px;</span>
<a href="#l15.98"></a><span id="l15.98"> }</span>
<a href="#l15.99"></a><span id="l15.99"> </span>
<a href="#l15.100"></a><span id="l15.100" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;] {</span>
<a href="#l15.101"></a><span id="l15.101" class="difflineminus">-  min-height: 55px;</span>
<a href="#l15.102"></a><span id="l15.102" class="difflineminus">-}</span>
<a href="#l15.103"></a><span id="l15.103" class="difflineminus">-</span>
<a href="#l15.104"></a><span id="l15.104" class="difflineminus">-#attachmentView[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l15.105"></a><span id="l15.105" class="difflineplus">+#attachmentListWrapper[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l15.106"></a><span id="l15.106">   overflow: auto;</span>
<a href="#l15.107"></a><span id="l15.107"> }</span>
<a href="#l15.108"></a><span id="l15.108"> </span>
<a href="#l15.109"></a><span id="l15.109"> /* ::::: msg header captions ::::: */</span>
<a href="#l15.110"></a><span id="l15.110"> </span>
<a href="#l15.111"></a><span id="l15.111"> #msgHeaderView {</span>
<a href="#l15.112"></a><span id="l15.112">   padding: 0 !important;</span>
<a href="#l15.113"></a><span id="l15.113">   margin: 0 !important;</span>
<a href="#l15.114"></a><span id="l15.114" class="difflineat">@@ -217,16 +236,36 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l15.115"></a><span id="l15.115">  /* Needed to make the buttons w/o icons the same height as those with icons */</span>
<a href="#l15.116"></a><span id="l15.116">   min-height: 16px;</span>
<a href="#l15.117"></a><span id="l15.117"> }</span>
<a href="#l15.118"></a><span id="l15.118"> </span>
<a href="#l15.119"></a><span id="l15.119"> .msgHeaderView-button[disabled=&quot;true&quot;] {</span>
<a href="#l15.120"></a><span id="l15.120">   display: none;</span>
<a href="#l15.121"></a><span id="l15.121"> }</span>
<a href="#l15.122"></a><span id="l15.122"> </span>
<a href="#l15.123"></a><span id="l15.123" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] {</span>
<a href="#l15.124"></a><span id="l15.124" class="difflineplus">+  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l15.125"></a><span id="l15.125" class="difflineplus">+  -moz-appearance: dualbutton !important;</span>
<a href="#l15.126"></a><span id="l15.126" class="difflineplus">+  -moz-margin-end: 0 !important;</span>
<a href="#l15.127"></a><span id="l15.127" class="difflineplus">+  /* Need to override both rules from messenger.css and msgHeaderView-button */</span>
<a href="#l15.128"></a><span id="l15.128" class="difflineplus">+  padding: 0 !important;</span>
<a href="#l15.129"></a><span id="l15.129" class="difflineplus">+}</span>
<a href="#l15.130"></a><span id="l15.130" class="difflineplus">+</span>
<a href="#l15.131"></a><span id="l15.131" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l15.132"></a><span id="l15.132" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l15.133"></a><span id="l15.133" class="difflineplus">+  min-width: 1em;</span>
<a href="#l15.134"></a><span id="l15.134" class="difflineplus">+  min-height: 1ex;</span>
<a href="#l15.135"></a><span id="l15.135" class="difflineplus">+  margin: 0px;</span>
<a href="#l15.136"></a><span id="l15.136" class="difflineplus">+  /* important required to override messenger.css rules */</span>
<a href="#l15.137"></a><span id="l15.137" class="difflineplus">+  -moz-padding-start: 3px !important;</span>
<a href="#l15.138"></a><span id="l15.138" class="difflineplus">+  -moz-padding-end: 3px !important;</span>
<a href="#l15.139"></a><span id="l15.139" class="difflineplus">+  padding-top: 2px !important;</span>
<a href="#l15.140"></a><span id="l15.140" class="difflineplus">+  padding-bottom: 2px !important;</span>
<a href="#l15.141"></a><span id="l15.141" class="difflineplus">+}</span>
<a href="#l15.142"></a><span id="l15.142" class="difflineplus">+</span>
<a href="#l15.143"></a><span id="l15.143"> /* toolbar[mode=&quot;text&quot;] is necessary so that we end up with more specificity</span>
<a href="#l15.144"></a><span id="l15.144"> *  than the !important rule in toolkit's toolbar.css.</span>
<a href="#l15.145"></a><span id="l15.145"> */</span>
<a href="#l15.146"></a><span id="l15.146"> toolbar[mode=&quot;text&quot;] .msgHeaderView-button .toolbarbutton-text,</span>
<a href="#l15.147"></a><span id="l15.147"> toolbar[mode=&quot;text&quot;] toolbarpaletteitem</span>
<a href="#l15.148"></a><span id="l15.148"> .msgHeaderView-button .toolbarbutton-text {</span>
<a href="#l15.149"></a><span id="l15.149">   margin: 0 !important;</span>
<a href="#l15.150"></a><span id="l15.150">   padding-top: 1px !important;</span>
<a href="#l15.151"></a><span id="l15.151" class="difflineat">@@ -263,23 +302,18 @@ toolbarpaletteitem &gt; #hdrReplyToSenderBu</span>
<a href="#l15.152"></a><span id="l15.152"> }</span>
<a href="#l15.153"></a><span id="l15.153"> </span>
<a href="#l15.154"></a><span id="l15.154"> .hdrReplyToSenderButton {</span>
<a href="#l15.155"></a><span id="l15.155">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l15.156"></a><span id="l15.156">   -moz-image-region: rect(0px, 72px, 18px, 54px);</span>
<a href="#l15.157"></a><span id="l15.157"> }</span>
<a href="#l15.158"></a><span id="l15.158"> </span>
<a href="#l15.159"></a><span id="l15.159"> .hdrReplyButton {</span>
<a href="#l15.160"></a><span id="l15.160" class="difflineminus">-  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l15.161"></a><span id="l15.161" class="difflineminus">-  -moz-appearance: dualbutton !important;</span>
<a href="#l15.162"></a><span id="l15.162">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l15.163"></a><span id="l15.163">   -moz-image-region: rect(0px, 72px, 18px, 54px);</span>
<a href="#l15.164"></a><span id="l15.164" class="difflineminus">-  -moz-margin-end: 0 !important;</span>
<a href="#l15.165"></a><span id="l15.165" class="difflineminus">-  /* Need to override both rules from messenger.css and msgHeaderView-button */</span>
<a href="#l15.166"></a><span id="l15.166" class="difflineminus">-  padding: 0 !important;</span>
<a href="#l15.167"></a><span id="l15.167"> }</span>
<a href="#l15.168"></a><span id="l15.168"> </span>
<a href="#l15.169"></a><span id="l15.169"> .hdrReplyAllButton {</span>
<a href="#l15.170"></a><span id="l15.170">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l15.171"></a><span id="l15.171">   -moz-image-region: rect(0px, 90px, 18px, 72px);</span>
<a href="#l15.172"></a><span id="l15.172"> }</span>
<a href="#l15.173"></a><span id="l15.173"> </span>
<a href="#l15.174"></a><span id="l15.174"> .hdrReplyListButton {</span>
<a href="#l15.175"></a><span id="l15.175" class="difflineat">@@ -319,48 +353,48 @@ toolbarpaletteitem &gt; #hdrReplyToSenderBu</span>
<a href="#l15.176"></a><span id="l15.176">   opacity: 0;</span>
<a href="#l15.177"></a><span id="l15.177"> }</span>
<a href="#l15.178"></a><span id="l15.178"> </span>
<a href="#l15.179"></a><span id="l15.179"> .hdrTrashButton {</span>
<a href="#l15.180"></a><span id="l15.180">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l15.181"></a><span id="l15.181">   -moz-image-region: rect(0px, 144px, 18px, 126px);</span>
<a href="#l15.182"></a><span id="l15.182"> }</span>
<a href="#l15.183"></a><span id="l15.183"> </span>
<a href="#l15.184"></a><span id="l15.184" class="difflineminus">-#header-view-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l15.185"></a><span id="l15.185" class="difflineminus">-#header-view-toolbar toolbarseparator {</span>
<a href="#l15.186"></a><span id="l15.186" class="difflineplus">+.inline-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l15.187"></a><span id="l15.187" class="difflineplus">+.inline-toolbar toolbarseparator {</span>
<a href="#l15.188"></a><span id="l15.188">   height: 30px;</span>
<a href="#l15.189"></a><span id="l15.189">   -moz-margin-start: 1px; /* make it symetrical */</span>
<a href="#l15.190"></a><span id="l15.190"> }</span>
<a href="#l15.191"></a><span id="l15.191"> </span>
<a href="#l15.192"></a><span id="l15.192" class="difflineminus">-#header-view-toolbar toolbarspacer {</span>
<a href="#l15.193"></a><span id="l15.193" class="difflineplus">+.inline-toolbar toolbarspacer {</span>
<a href="#l15.194"></a><span id="l15.194">   height: 24px;</span>
<a href="#l15.195"></a><span id="l15.195"> }</span>
<a href="#l15.196"></a><span id="l15.196"> </span>
<a href="#l15.197"></a><span id="l15.197" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l15.198"></a><span id="l15.198" class="difflineplus">+.inline-toolbar {</span>
<a href="#l15.199"></a><span id="l15.199">   -moz-box-pack: end;</span>
<a href="#l15.200"></a><span id="l15.200"> }</span>
<a href="#l15.201"></a><span id="l15.201"> </span>
<a href="#l15.202"></a><span id="l15.202" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #smallicons,</span>
<a href="#l15.203"></a><span id="l15.203" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] button[icon=&quot;add&quot;] {</span>
<a href="#l15.204"></a><span id="l15.204" class="difflineplus">+window[inlinetoolbox] #smallicons,</span>
<a href="#l15.205"></a><span id="l15.205" class="difflineplus">+window[inlinetoolbox] button[icon=&quot;add&quot;] {</span>
<a href="#l15.206"></a><span id="l15.206">   display: none;</span>
<a href="#l15.207"></a><span id="l15.207"> }</span>
<a href="#l15.208"></a><span id="l15.208"> </span>
<a href="#l15.209"></a><span id="l15.209" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #modelist menuitem:first-child {</span>
<a href="#l15.210"></a><span id="l15.210" class="difflineplus">+window[inlinetoolbox] #modelist menuitem:first-child {</span>
<a href="#l15.211"></a><span id="l15.211">   display: none;</span>
<a href="#l15.212"></a><span id="l15.212"> }</span>
<a href="#l15.213"></a><span id="l15.213"> </span>
<a href="#l15.214"></a><span id="l15.214" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #wrapper-spring {</span>
<a href="#l15.215"></a><span id="l15.215" class="difflineplus">+window[inlinetoolbox] #wrapper-spring {</span>
<a href="#l15.216"></a><span id="l15.216">   display: none;</span>
<a href="#l15.217"></a><span id="l15.217"> }</span>
<a href="#l15.218"></a><span id="l15.218"> </span>
<a href="#l15.219"></a><span id="l15.219" class="difflineminus">-#header-view-toolbox[doCustomization] {</span>
<a href="#l15.220"></a><span id="l15.220" class="difflineplus">+.inline-toolbox[doCustomization] {</span>
<a href="#l15.221"></a><span id="l15.221">   background: grey;</span>
<a href="#l15.222"></a><span id="l15.222"> }</span>
<a href="#l15.223"></a><span id="l15.223"> </span>
<a href="#l15.224"></a><span id="l15.224" class="difflineminus">-#header-view-toolbox[doCustomization] #header-view-toolbar {</span>
<a href="#l15.225"></a><span id="l15.225" class="difflineplus">+.inline-toolbox[doCustomization] .inline-toolbar {</span>
<a href="#l15.226"></a><span id="l15.226">   min-width: 100px;</span>
<a href="#l15.227"></a><span id="l15.227">   min-height: 10px;</span>
<a href="#l15.228"></a><span id="l15.228"> }</span>
<a href="#l15.229"></a><span id="l15.229"> </span>
<a href="#l15.230"></a><span id="l15.230"> .msgHeaderView-button,</span>
<a href="#l15.231"></a><span id="l15.231"> toolbarpaletteitem .msgHeaderView-button {</span>
<a href="#l15.232"></a><span id="l15.232">   -moz-appearance: none;</span>
<a href="#l15.233"></a><span id="l15.233">   min-height: 24px;</span>
<a href="#l15.234"></a><span id="l15.234" class="difflineat">@@ -655,13 +689,14 @@ mail-headerfield &gt; .headerValue {</span>
<a href="#l15.235"></a><span id="l15.235"> </span>
<a href="#l15.236"></a><span id="l15.236"> .hdrTrashButton &gt; .button-box &gt; .button-icon {</span>
<a href="#l15.237"></a><span id="l15.237">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l15.238"></a><span id="l15.238">   -moz-image-region: rect(1px, 144px, 17px, 127px);</span>
<a href="#l15.239"></a><span id="l15.239"> }</span>
<a href="#l15.240"></a><span id="l15.240"> </span>
<a href="#l15.241"></a><span id="l15.241"> #header-view-toolbox {</span>
<a href="#l15.242"></a><span id="l15.242">   float: right;</span>
<a href="#l15.243"></a><span id="l15.243" class="difflineplus">+  padding-top: 3px;</span>
<a href="#l15.244"></a><span id="l15.244"> }</span>
<a href="#l15.245"></a><span id="l15.245"> </span>
<a href="#l15.246"></a><span id="l15.246"> #header-view-toolbox:-moz-locale-dir(rtl) {</span>
<a href="#l15.247"></a><span id="l15.247">   float: left;</span>
<a href="#l15.248"></a><span id="l15.248"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/themes/qute/mail/messageHeader.css</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/themes/qute/mail/messageHeader.css</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -80,114 +80,123 @@ html|div#expandedHeadersTopBox {</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5"> #otherActionsButton {</span>
<a href="#l16.6"></a><span id="l16.6">   margin-bottom: .1em;</span>
<a href="#l16.7"></a><span id="l16.7">   padding-top: 0px;</span>
<a href="#l16.8"></a><span id="l16.8"> }</span>
<a href="#l16.9"></a><span id="l16.9"> </span>
<a href="#l16.10"></a><span id="l16.10"> /* ::::: expanded header pane ::::: */</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-#header-view-toolbox {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+.inline-toolbox {</span>
<a href="#l16.14"></a><span id="l16.14">   border-top-width: 0;</span>
<a href="#l16.15"></a><span id="l16.15">   -moz-appearance: none;</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-  padding-top: 3px;</span>
<a href="#l16.17"></a><span id="l16.17"> }</span>
<a href="#l16.18"></a><span id="l16.18"> </span>
<a href="#l16.19"></a><span id="l16.19"> /* toolbars are optimized to look like OS-provided widgets; override this */</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+.inline-toolbar {</span>
<a href="#l16.22"></a><span id="l16.22">   -moz-appearance: none;</span>
<a href="#l16.23"></a><span id="l16.23">   padding: 0;</span>
<a href="#l16.24"></a><span id="l16.24">   border-bottom-width: 0;</span>
<a href="#l16.25"></a><span id="l16.25"> }</span>
<a href="#l16.26"></a><span id="l16.26"> </span>
<a href="#l16.27"></a><span id="l16.27"> /* We use pixels here because the height of the button is in pixels. */</span>
<a href="#l16.28"></a><span id="l16.28"> #expandedHeaderRows {</span>
<a href="#l16.29"></a><span id="l16.29">   padding-top: 14px;</span>
<a href="#l16.30"></a><span id="l16.30"> }</span>
<a href="#l16.31"></a><span id="l16.31"> </span>
<a href="#l16.32"></a><span id="l16.32"> #expandedsubjectBox &gt; .headerValue {</span>
<a href="#l16.33"></a><span id="l16.33">   font-weight: bold;</span>
<a href="#l16.34"></a><span id="l16.34"> }</span>
<a href="#l16.35"></a><span id="l16.35"> </span>
<a href="#l16.36"></a><span id="l16.36"> /* ::::: edit message bar ::::: */</span>
<a href="#l16.37"></a><span id="l16.37"> </span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-#editMessageBox</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-{</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+#editMessageBox {</span>
<a href="#l16.41"></a><span id="l16.41">   min-width: 1px;</span>
<a href="#l16.42"></a><span id="l16.42">   border-bottom-left-radius: 0.2em;</span>
<a href="#l16.43"></a><span id="l16.43">   border-bottom-right-radius: 0.2em;</span>
<a href="#l16.44"></a><span id="l16.44"> }</span>
<a href="#l16.45"></a><span id="l16.45"> </span>
<a href="#l16.46"></a><span id="l16.46" class="difflineminus">-#editMessageDescription</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">-{</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+#editMessageDescription {</span>
<a href="#l16.49"></a><span id="l16.49">   font-style: italic;</span>
<a href="#l16.50"></a><span id="l16.50">   font-weight: bolder;</span>
<a href="#l16.51"></a><span id="l16.51"> }</span>
<a href="#l16.52"></a><span id="l16.52"> </span>
<a href="#l16.53"></a><span id="l16.53"> /* ::::: attachment view ::::: */</span>
<a href="#l16.54"></a><span id="l16.54"> </span>
<a href="#l16.55"></a><span id="l16.55" class="difflineminus">-#attachmentList</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineminus">-{</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+#attachmentList {</span>
<a href="#l16.58"></a><span id="l16.58">   margin: 0px;</span>
<a href="#l16.59"></a><span id="l16.59">   background-color: -moz-Field;</span>
<a href="#l16.60"></a><span id="l16.60">   color: -moz-FieldText;</span>
<a href="#l16.61"></a><span id="l16.61"> }</span>
<a href="#l16.62"></a><span id="l16.62"> </span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+#attachmentToggle {</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+  -moz-appearance: treetwisty;</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+}</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineplus">+</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineplus">+#attachmentToggle[checked=&quot;true&quot;] {</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineplus">+  -moz-appearance: treetwistyopen;</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineplus">+}</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineplus">+</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineplus">+#attachmentIcon {</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/attachment-col.png&quot;);</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineplus">+  -moz-margin-start: 5px;</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineplus">+}</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineplus">+</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineplus">+#attachmentCount {</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineplus">+  -moz-margin-start: 0;</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineplus">+}</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineplus">+</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineplus">+#attachmentSize {</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineplus">+  color: #888a85; /* the same color as .headerName */</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineplus">+}</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineplus">+</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineplus">+#attachmentSaveAllSingle,</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineplus">+#attachmentSaveAllMultiple {</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineplus">+  -moz-image-region: rect(0px 192px 16px 176px);</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineplus">+}</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineplus">+</span>
<a href="#l16.90"></a><span id="l16.90"> /* XXX: Move all of the description attributes to the toolkit */</span>
<a href="#l16.91"></a><span id="l16.91"> </span>
<a href="#l16.92"></a><span id="l16.92" class="difflineminus">-description[selectable=&quot;true&quot;]</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineminus">-{</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineplus">+description[selectable=&quot;true&quot;] {</span>
<a href="#l16.95"></a><span id="l16.95">   margin: 1px 5px 4px;</span>
<a href="#l16.96"></a><span id="l16.96"> }</span>
<a href="#l16.97"></a><span id="l16.97"> </span>
<a href="#l16.98"></a><span id="l16.98" class="difflineminus">-descriptionitem</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineminus">-{</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineplus">+descriptionitem {</span>
<a href="#l16.101"></a><span id="l16.101">   border: 1px solid transparent;</span>
<a href="#l16.102"></a><span id="l16.102">   margin: 1px;</span>
<a href="#l16.103"></a><span id="l16.103"> }</span>
<a href="#l16.104"></a><span id="l16.104"> </span>
<a href="#l16.105"></a><span id="l16.105" class="difflineminus">-description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;][current=&quot;true&quot;]</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineminus">-{</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[current=&quot;true&quot;] {</span>
<a href="#l16.108"></a><span id="l16.108">   border: 1px dotted #F5DB95;</span>
<a href="#l16.109"></a><span id="l16.109"> }</span>
<a href="#l16.110"></a><span id="l16.110"> </span>
<a href="#l16.111"></a><span id="l16.111" class="difflineminus">-descriptionitem[selected=&quot;true&quot;]</span>
<a href="#l16.112"></a><span id="l16.112" class="difflineminus">-{</span>
<a href="#l16.113"></a><span id="l16.113" class="difflineplus">+descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l16.114"></a><span id="l16.114">   background-color: -moz-Dialog;</span>
<a href="#l16.115"></a><span id="l16.115">   color: -moz-DialogText;</span>
<a href="#l16.116"></a><span id="l16.116"> }</span>
<a href="#l16.117"></a><span id="l16.117"> </span>
<a href="#l16.118"></a><span id="l16.118" class="difflineminus">-description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;]</span>
<a href="#l16.119"></a><span id="l16.119" class="difflineminus">-{</span>
<a href="#l16.120"></a><span id="l16.120" class="difflineplus">+description[selectable=&quot;true&quot;]:focus &gt; descriptionitem[selected=&quot;true&quot;] {</span>
<a href="#l16.121"></a><span id="l16.121">   background-color: Highlight;</span>
<a href="#l16.122"></a><span id="l16.122">   color: HighlightText;</span>
<a href="#l16.123"></a><span id="l16.123"> }</span>
<a href="#l16.124"></a><span id="l16.124"> </span>
<a href="#l16.125"></a><span id="l16.125" class="difflineminus">-.attachmentBox</span>
<a href="#l16.126"></a><span id="l16.126" class="difflineminus">-{</span>
<a href="#l16.127"></a><span id="l16.127" class="difflineplus">+.attachmentBox {</span>
<a href="#l16.128"></a><span id="l16.128">   width: 15em;</span>
<a href="#l16.129"></a><span id="l16.129"> }</span>
<a href="#l16.130"></a><span id="l16.130"> </span>
<a href="#l16.131"></a><span id="l16.131" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;] .attachmentBox</span>
<a href="#l16.132"></a><span id="l16.132" class="difflineminus">-{</span>
<a href="#l16.133"></a><span id="l16.133" class="difflineplus">+#attachmentView[largeView=&quot;true&quot;] .attachmentBox {</span>
<a href="#l16.134"></a><span id="l16.134">   -moz-box-orient: vertical;</span>
<a href="#l16.135"></a><span id="l16.135"> }</span>
<a href="#l16.136"></a><span id="l16.136"> </span>
<a href="#l16.137"></a><span id="l16.137" class="difflineminus">-#attachmentView</span>
<a href="#l16.138"></a><span id="l16.138" class="difflineminus">-{</span>
<a href="#l16.139"></a><span id="l16.139" class="difflineplus">+#attachmentView {</span>
<a href="#l16.140"></a><span id="l16.140">   border-top: 1px solid ThreeDShadow;</span>
<a href="#l16.141"></a><span id="l16.141" class="difflineminus">-  min-height: 30px;</span>
<a href="#l16.142"></a><span id="l16.142"> }</span>
<a href="#l16.143"></a><span id="l16.143"> </span>
<a href="#l16.144"></a><span id="l16.144" class="difflineminus">-#attachmentView[largeView=&quot;true&quot;]</span>
<a href="#l16.145"></a><span id="l16.145" class="difflineminus">-{</span>
<a href="#l16.146"></a><span id="l16.146" class="difflineminus">-  min-height: 55px;</span>
<a href="#l16.147"></a><span id="l16.147" class="difflineminus">-}</span>
<a href="#l16.148"></a><span id="l16.148" class="difflineminus">-</span>
<a href="#l16.149"></a><span id="l16.149" class="difflineminus">-#attachmentView[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l16.150"></a><span id="l16.150" class="difflineplus">+#attachmentListWrapper[attachmentOverflow=&quot;true&quot;] {</span>
<a href="#l16.151"></a><span id="l16.151">   overflow: auto;</span>
<a href="#l16.152"></a><span id="l16.152"> }</span>
<a href="#l16.153"></a><span id="l16.153"> </span>
<a href="#l16.154"></a><span id="l16.154"> /* ::::: msg header captions ::::: */</span>
<a href="#l16.155"></a><span id="l16.155"> </span>
<a href="#l16.156"></a><span id="l16.156"> #msgHeaderView {</span>
<a href="#l16.157"></a><span id="l16.157">   padding: 0 !important;</span>
<a href="#l16.158"></a><span id="l16.158">   margin: 0 !important;</span>
<a href="#l16.159"></a><span id="l16.159" class="difflineat">@@ -223,16 +232,37 @@ description[selectable=&quot;true&quot;]:focus &gt; d</span>
<a href="#l16.160"></a><span id="l16.160">   /* Needed to make the buttons w/o icons the same height as those with icons */</span>
<a href="#l16.161"></a><span id="l16.161">   min-height: 16px;</span>
<a href="#l16.162"></a><span id="l16.162"> }</span>
<a href="#l16.163"></a><span id="l16.163"> </span>
<a href="#l16.164"></a><span id="l16.164"> .msgHeaderView-button[disabled=&quot;true&quot;] {</span>
<a href="#l16.165"></a><span id="l16.165">   display: none;</span>
<a href="#l16.166"></a><span id="l16.166"> }</span>
<a href="#l16.167"></a><span id="l16.167"> </span>
<a href="#l16.168"></a><span id="l16.168" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] {</span>
<a href="#l16.169"></a><span id="l16.169" class="difflineplus">+  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l16.170"></a><span id="l16.170" class="difflineplus">+  -moz-appearance: dualbutton !important;</span>
<a href="#l16.171"></a><span id="l16.171" class="difflineplus">+  -moz-margin-end: 0 !important;</span>
<a href="#l16.172"></a><span id="l16.172" class="difflineplus">+</span>
<a href="#l16.173"></a><span id="l16.173" class="difflineplus">+  /* Need to override both rules from messenger.css and msgHeaderView-button */</span>
<a href="#l16.174"></a><span id="l16.174" class="difflineplus">+  padding: 0 !important;</span>
<a href="#l16.175"></a><span id="l16.175" class="difflineplus">+}</span>
<a href="#l16.176"></a><span id="l16.176" class="difflineplus">+</span>
<a href="#l16.177"></a><span id="l16.177" class="difflineplus">+.msgHeaderView-button[type=&quot;menu-button&quot;] &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l16.178"></a><span id="l16.178" class="difflineplus">+  -moz-appearance: button;</span>
<a href="#l16.179"></a><span id="l16.179" class="difflineplus">+  min-width: 1em;</span>
<a href="#l16.180"></a><span id="l16.180" class="difflineplus">+  min-height: 1ex;</span>
<a href="#l16.181"></a><span id="l16.181" class="difflineplus">+  margin: 0px;</span>
<a href="#l16.182"></a><span id="l16.182" class="difflineplus">+  /* important required to override messenger.css rules */</span>
<a href="#l16.183"></a><span id="l16.183" class="difflineplus">+  -moz-padding-start: 4px !important;</span>
<a href="#l16.184"></a><span id="l16.184" class="difflineplus">+  -moz-padding-end: 3px !important;</span>
<a href="#l16.185"></a><span id="l16.185" class="difflineplus">+  padding-top: 3px !important;</span>
<a href="#l16.186"></a><span id="l16.186" class="difflineplus">+  padding-bottom: 2px !important;</span>
<a href="#l16.187"></a><span id="l16.187" class="difflineplus">+}</span>
<a href="#l16.188"></a><span id="l16.188" class="difflineplus">+</span>
<a href="#l16.189"></a><span id="l16.189"> /* toolbar[mode=&quot;text&quot;] is necessary so that we end up with more specificity</span>
<a href="#l16.190"></a><span id="l16.190">  * than the !important rule in toolkit's toolbar.css.</span>
<a href="#l16.191"></a><span id="l16.191">  */</span>
<a href="#l16.192"></a><span id="l16.192"> toolbar[mode=&quot;text&quot;] .msgHeaderView-button .toolbarbutton-text,</span>
<a href="#l16.193"></a><span id="l16.193"> toolbar[mode=&quot;text&quot;] toolbarpaletteitem .msgHeaderView-button .toolbarbutton-text {</span>
<a href="#l16.194"></a><span id="l16.194">   margin: 0 !important;</span>
<a href="#l16.195"></a><span id="l16.195">   padding-top: 1px !important;</span>
<a href="#l16.196"></a><span id="l16.196">   padding-bottom: 0px !important;</span>
<a href="#l16.197"></a><span id="l16.197" class="difflineat">@@ -263,24 +293,18 @@ toolbarpaletteitem &gt; #hdrReplyToSenderBu</span>
<a href="#l16.198"></a><span id="l16.198"> }</span>
<a href="#l16.199"></a><span id="l16.199"> </span>
<a href="#l16.200"></a><span id="l16.200"> toolbar[iconsize=&quot;small&quot;] .hdrReplyToSenderButton {</span>
<a href="#l16.201"></a><span id="l16.201">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.202"></a><span id="l16.202">   -moz-image-region: rect(0px 64px 16px 48px);</span>
<a href="#l16.203"></a><span id="l16.203"> }</span>
<a href="#l16.204"></a><span id="l16.204"> </span>
<a href="#l16.205"></a><span id="l16.205"> .hdrReplyButton {</span>
<a href="#l16.206"></a><span id="l16.206" class="difflineminus">-  /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l16.207"></a><span id="l16.207" class="difflineminus">-  -moz-appearance: dualbutton !important;</span>
<a href="#l16.208"></a><span id="l16.208">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l16.209"></a><span id="l16.209">   -moz-image-region: rect(0px 96px 24px 72px);</span>
<a href="#l16.210"></a><span id="l16.210" class="difflineminus">-  -moz-margin-end: 0 !important;</span>
<a href="#l16.211"></a><span id="l16.211" class="difflineminus">-  </span>
<a href="#l16.212"></a><span id="l16.212" class="difflineminus">-  /* Need to override both rules from messenger.css and msgHeaderView-button */</span>
<a href="#l16.213"></a><span id="l16.213" class="difflineminus">-  padding: 0 !important;</span>
<a href="#l16.214"></a><span id="l16.214"> }</span>
<a href="#l16.215"></a><span id="l16.215"> </span>
<a href="#l16.216"></a><span id="l16.216"> toolbar[iconsize=&quot;small&quot;] .hdrReplyButton {</span>
<a href="#l16.217"></a><span id="l16.217">   /* important required to override -moz-appearance from msgHdrView-button */</span>
<a href="#l16.218"></a><span id="l16.218">   /*-moz-appearance: dualbutton !important; */</span>
<a href="#l16.219"></a><span id="l16.219">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.220"></a><span id="l16.220">   -moz-image-region: rect(0px 64px 16px 48px);</span>
<a href="#l16.221"></a><span id="l16.221">   /*-moz-margin-end: 0 !important;</span>
<a href="#l16.222"></a><span id="l16.222" class="difflineat">@@ -304,28 +328,16 @@ toolbar[iconsize=&quot;small&quot;] .hdrReplyAllBu</span>
<a href="#l16.223"></a><span id="l16.223">   -moz-image-region: rect(0px 168px 24px 144px);</span>
<a href="#l16.224"></a><span id="l16.224"> }</span>
<a href="#l16.225"></a><span id="l16.225"> </span>
<a href="#l16.226"></a><span id="l16.226"> toolbar[iconsize=&quot;small&quot;] .hdrReplyListButton {</span>
<a href="#l16.227"></a><span id="l16.227">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.228"></a><span id="l16.228">   -moz-image-region: rect(0px 112px 16px 96px);</span>
<a href="#l16.229"></a><span id="l16.229"> }</span>
<a href="#l16.230"></a><span id="l16.230"> </span>
<a href="#l16.231"></a><span id="l16.231" class="difflineminus">-.hdrReplyButton &gt; .toolbarbutton-menubutton-button {</span>
<a href="#l16.232"></a><span id="l16.232" class="difflineminus">-  -moz-appearance: button;</span>
<a href="#l16.233"></a><span id="l16.233" class="difflineminus">-  min-width: 1em;</span>
<a href="#l16.234"></a><span id="l16.234" class="difflineminus">-  min-height: 1ex;</span>
<a href="#l16.235"></a><span id="l16.235" class="difflineminus">-  margin: 0px;</span>
<a href="#l16.236"></a><span id="l16.236" class="difflineminus">-  /* important required to override messenger.css rules */</span>
<a href="#l16.237"></a><span id="l16.237" class="difflineminus">-  -moz-padding-start: 4px !important;</span>
<a href="#l16.238"></a><span id="l16.238" class="difflineminus">-  -moz-padding-end: 3px !important;</span>
<a href="#l16.239"></a><span id="l16.239" class="difflineminus">-  padding-top: 3px !important;</span>
<a href="#l16.240"></a><span id="l16.240" class="difflineminus">-  padding-bottom: 2px !important;</span>
<a href="#l16.241"></a><span id="l16.241" class="difflineminus">-}</span>
<a href="#l16.242"></a><span id="l16.242" class="difflineminus">-</span>
<a href="#l16.243"></a><span id="l16.243"> .hdrForwardButton {</span>
<a href="#l16.244"></a><span id="l16.244">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar.png&quot;);</span>
<a href="#l16.245"></a><span id="l16.245">   -moz-image-region: rect(0px 144px 24px 120px);</span>
<a href="#l16.246"></a><span id="l16.246"> }</span>
<a href="#l16.247"></a><span id="l16.247"> </span>
<a href="#l16.248"></a><span id="l16.248"> toolbar[iconsize=&quot;small&quot;] .hdrForwardButton {</span>
<a href="#l16.249"></a><span id="l16.249">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.250"></a><span id="l16.250">   -moz-image-region: rect(0px 96px 16px 80px);</span>
<a href="#l16.251"></a><span id="l16.251" class="difflineat">@@ -361,48 +373,48 @@ toolbar[iconsize=&quot;small&quot;] .hdrJunkButton</span>
<a href="#l16.252"></a><span id="l16.252">   -moz-image-region: rect(0px 192px 24px 168px);</span>
<a href="#l16.253"></a><span id="l16.253"> }</span>
<a href="#l16.254"></a><span id="l16.254"> </span>
<a href="#l16.255"></a><span id="l16.255"> toolbar[iconsize=&quot;small&quot;] .hdrTrashButton {</span>
<a href="#l16.256"></a><span id="l16.256">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.257"></a><span id="l16.257">   -moz-image-region: rect(0px 128px 16px 112px);</span>
<a href="#l16.258"></a><span id="l16.258"> }</span>
<a href="#l16.259"></a><span id="l16.259"> </span>
<a href="#l16.260"></a><span id="l16.260" class="difflineminus">-#header-view-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l16.261"></a><span id="l16.261" class="difflineminus">-#header-view-toolbar toolbarseparator {</span>
<a href="#l16.262"></a><span id="l16.262" class="difflineplus">+.inline-toolbar toolbarpaletteitem toolbarseparator,</span>
<a href="#l16.263"></a><span id="l16.263" class="difflineplus">+.inline-toolbar toolbarseparator {</span>
<a href="#l16.264"></a><span id="l16.264">   height: 30px;</span>
<a href="#l16.265"></a><span id="l16.265">   -moz-margin-start: 1px; /* make it symetrical */</span>
<a href="#l16.266"></a><span id="l16.266"> }</span>
<a href="#l16.267"></a><span id="l16.267"> </span>
<a href="#l16.268"></a><span id="l16.268" class="difflineminus">-#header-view-toolbar toolbarspacer {</span>
<a href="#l16.269"></a><span id="l16.269" class="difflineplus">+.inline-toolbar toolbarspacer {</span>
<a href="#l16.270"></a><span id="l16.270">   height: 24px;</span>
<a href="#l16.271"></a><span id="l16.271"> }</span>
<a href="#l16.272"></a><span id="l16.272"> </span>
<a href="#l16.273"></a><span id="l16.273" class="difflineminus">-#header-view-toolbar {</span>
<a href="#l16.274"></a><span id="l16.274" class="difflineplus">+.inline-toolbar {</span>
<a href="#l16.275"></a><span id="l16.275">   -moz-box-pack: end;</span>
<a href="#l16.276"></a><span id="l16.276"> }</span>
<a href="#l16.277"></a><span id="l16.277"> </span>
<a href="#l16.278"></a><span id="l16.278" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #smallicons,</span>
<a href="#l16.279"></a><span id="l16.279" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] button[icon=&quot;add&quot;] {</span>
<a href="#l16.280"></a><span id="l16.280" class="difflineplus">+window[inlinetoolbox] #smallicons,</span>
<a href="#l16.281"></a><span id="l16.281" class="difflineplus">+window[inlinetoolbox] button[icon=&quot;add&quot;] {</span>
<a href="#l16.282"></a><span id="l16.282">   display: none;</span>
<a href="#l16.283"></a><span id="l16.283"> }</span>
<a href="#l16.284"></a><span id="l16.284"> </span>
<a href="#l16.285"></a><span id="l16.285" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #modelist menuitem:first-child {</span>
<a href="#l16.286"></a><span id="l16.286" class="difflineplus">+window[inlinetoolbox] #modelist menuitem:first-child {</span>
<a href="#l16.287"></a><span id="l16.287">   display: none;</span>
<a href="#l16.288"></a><span id="l16.288"> }</span>
<a href="#l16.289"></a><span id="l16.289"> </span>
<a href="#l16.290"></a><span id="l16.290" class="difflineminus">-window[toolboxId=&quot;header-view-toolbox&quot;] #wrapper-spring {</span>
<a href="#l16.291"></a><span id="l16.291" class="difflineplus">+window[inlinetoolbox] #wrapper-spring {</span>
<a href="#l16.292"></a><span id="l16.292">   display: none;</span>
<a href="#l16.293"></a><span id="l16.293"> }</span>
<a href="#l16.294"></a><span id="l16.294"> </span>
<a href="#l16.295"></a><span id="l16.295" class="difflineminus">-#header-view-toolbox[doCustomization] {</span>
<a href="#l16.296"></a><span id="l16.296" class="difflineplus">+.inline-toolbox[doCustomization] {</span>
<a href="#l16.297"></a><span id="l16.297">   background: grey;</span>
<a href="#l16.298"></a><span id="l16.298"> }</span>
<a href="#l16.299"></a><span id="l16.299"> </span>
<a href="#l16.300"></a><span id="l16.300" class="difflineminus">-#header-view-toolbox[doCustomization] #header-view-toolbar {</span>
<a href="#l16.301"></a><span id="l16.301" class="difflineplus">+.inline-toolbox[doCustomization] #attachment-view-toolbar {</span>
<a href="#l16.302"></a><span id="l16.302">   min-width: 100px;</span>
<a href="#l16.303"></a><span id="l16.303">   min-height: 10px;</span>
<a href="#l16.304"></a><span id="l16.304"> }</span>
<a href="#l16.305"></a><span id="l16.305"> </span>
<a href="#l16.306"></a><span id="l16.306"> .msgHeaderView-button,</span>
<a href="#l16.307"></a><span id="l16.307"> toolbarpaletteitem .msgHeaderView-button {</span>
<a href="#l16.308"></a><span id="l16.308">   min-height: 27px;</span>
<a href="#l16.309"></a><span id="l16.309"> }</span>
<a href="#l16.310"></a><span id="l16.310" class="difflineat">@@ -695,13 +707,14 @@ mail-headerfield &gt; .headerValue {</span>
<a href="#l16.311"></a><span id="l16.311"> </span>
<a href="#l16.312"></a><span id="l16.312"> .hdrTrashButton &gt; .button-box &gt; .button-icon {</span>
<a href="#l16.313"></a><span id="l16.313">   list-style-image: url(&quot;chrome://messenger/skin/icons/mail-toolbar-small.png&quot;);</span>
<a href="#l16.314"></a><span id="l16.314">   -moz-image-region: rect(0px 128px 16px 112px);</span>
<a href="#l16.315"></a><span id="l16.315"> }</span>
<a href="#l16.316"></a><span id="l16.316"> </span>
<a href="#l16.317"></a><span id="l16.317"> #header-view-toolbox {</span>
<a href="#l16.318"></a><span id="l16.318">   float: right;</span>
<a href="#l16.319"></a><span id="l16.319" class="difflineplus">+  padding-top: 3px;</span>
<a href="#l16.320"></a><span id="l16.320"> }</span>
<a href="#l16.321"></a><span id="l16.321"> </span>
<a href="#l16.322"></a><span id="l16.322"> #header-view-toolbox:-moz-locale-dir(rtl) {</span>
<a href="#l16.323"></a><span id="l16.323">   float: left;</span>
<a href="#l16.324"></a><span id="l16.324"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

