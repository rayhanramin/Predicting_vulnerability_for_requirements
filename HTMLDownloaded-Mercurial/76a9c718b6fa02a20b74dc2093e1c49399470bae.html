<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 2965:76a9c718b6fa02a20b74dc2093e1c49399470bae</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 76a9c718b6fa02a20b74dc2093e1c49399470bae" />
<meta property="og:url" content="/comm-central/rev/76a9c718b6fa02a20b74dc2093e1c49399470bae" />
<meta property="og:description" content="Bug 446291: improved attachment preferences pane. ui-r=clarkbw, r=philor" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 76a9c718b6fa02a20b74dc2093e1c49399470bae 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/76a9c718b6fa02a20b74dc2093e1c49399470bae">shortlog</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/76a9c718b6fa02a20b74dc2093e1c49399470bae">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae">files</a> |
changeset |
<a href="/comm-central/raw-rev/76a9c718b6fa02a20b74dc2093e1c49399470bae">raw</a>  | <a href="/comm-central/archive/76a9c718b6fa02a20b74dc2093e1c49399470bae.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=446291">Bug 446291</a>: improved attachment preferences pane. ui-r=clarkbw, r=philor
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#103;&#110;&#117;&#115;&#32;&#77;&#101;&#108;&#105;&#110;&#32;&#60;&#109;&#107;&#109;&#101;&#108;&#105;&#110;&#43;&#109;&#111;&#122;&#105;&#108;&#108;&#97;&#64;&#105;&#107;&#105;&#46;&#102;&#105;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 29 Jun 2009 13:12:55 +0300</td></tr>

<tr>
 <td>changeset 2965</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/76a9c718b6fa02a20b74dc2093e1c49399470bae">76a9c718b6fa02a20b74dc2093e1c49399470bae</a></td>
</tr>



<tr>
<td>parent 2964</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/23e14af0a02ba6b4eebc2601ba2579d11b833ff9">23e14af0a02ba6b4eebc2601ba2579d11b833ff9</a>
</td>
</tr>

<tr>
<td>child 2966</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/370680198decbf7d8d7e2e240dc3b0d6fd56aa39">370680198decbf7d8d7e2e240dc3b0d6fd56aa39</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=76a9c718b6fa02a20b74dc2093e1c49399470bae">2405</a></td></tr>
<tr><td>push user</td><td>mkmelin@iki.fi</td></tr>
<tr><td>push date</td><td class="date age">Mon, 29 Jun 2009 10:13:09 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@76a9c718b6fa [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=76a9c718b6fa02a20b74dc2093e1c49399470bae">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=76a9c718b6fa02a20b74dc2093e1c49399470bae&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=76a9c718b6fa02a20b74dc2093e1c49399470bae&newProject=comm-central&newRevision=76a9c718b6fa02a20b74dc2093e1c49399470bae&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=76a9c718b6fa02a20b74dc2093e1c49399470bae&newProject=comm-central&newRevision=76a9c718b6fa02a20b74dc2093e1c49399470bae&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=76a9c718b6fa02a20b74dc2093e1c49399470bae&newProject=comm-central&newRevision=76a9c718b6fa02a20b74dc2093e1c49399470bae&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28clarkbw%29&revcount=50">clarkbw</a>, <a href="/comm-central/log?rev=reviewer%28philor%29&revcount=50">philor</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=446291">446291</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=446291">Bug 446291</a>: improved attachment preferences pane. ui-r=clarkbw, r=philor</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/app/profile/all-thunderbird.js">mail/app/profile/all-thunderbird.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/app/profile/all-thunderbird.js">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/app/profile/all-thunderbird.js">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/app/profile/all-thunderbird.js">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/app/profile/all-thunderbird.js">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/app/profile/all-thunderbird.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.js">mail/components/preferences/applicationManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.js">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.js">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.js">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.js">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.xul">mail/components/preferences/applicationManager.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.xul">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.xul">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.xul">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.xul">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applicationManager.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.xul">mail/components/preferences/applications.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.xul">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.xul">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.xul">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.xul">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/applications.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.js">mail/components/preferences/changeaction.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.js">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.js">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.xul">mail/components/preferences/changeaction.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.xul">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.xul">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/changeaction.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.js">mail/components/preferences/downloadactions.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.js">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.js">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.xul">mail/components/preferences/downloadactions.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.xul">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.xul">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloadactions.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.js">mail/components/preferences/downloads.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.js">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.js">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.js">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.js">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.xul">mail/components/preferences/downloads.xul</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.xul">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.xul">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/downloads.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.css">mail/components/preferences/handlers.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.xml">mail/components/preferences/handlers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.xml">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.xml">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.xml">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.xml">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/handlers.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/jar.mn">mail/components/preferences/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/jar.mn">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/jar.mn">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/jar.mn">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/jar.mn">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/preferences.xul">mail/components/preferences/preferences.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/preferences.xul">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/preferences.xul">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/preferences.xul">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/preferences.xul">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/components/preferences/preferences.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd">mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties">mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applications.dtd">mail/locales/en-US/chrome/messenger/preferences/applications.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applications.dtd">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applications.dtd">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applications.dtd">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applications.dtd">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/applications.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/changeaction.dtd">mail/locales/en-US/chrome/messenger/preferences/changeaction.dtd</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/changeaction.dtd">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/changeaction.dtd">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/changeaction.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloadactions.dtd">mail/locales/en-US/chrome/messenger/preferences/downloadactions.dtd</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloadactions.dtd">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloadactions.dtd">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloadactions.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloads.dtd">mail/locales/en-US/chrome/messenger/preferences/downloads.dtd</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloads.dtd">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloads.dtd">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/downloads.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd">mail/locales/en-US/chrome/messenger/preferences/preferences.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">mail/locales/en-US/chrome/messenger/preferences/preferences.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/en-US/chrome/messenger/preferences/preferences.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/jar.mn">mail/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/jar.mn">mail/themes/gnomestripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/jar.mn">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/jar.mn">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/alwaysAsk.png">mail/themes/gnomestripe/mail/preferences/alwaysAsk.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/alwaysAsk.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/alwaysAsk.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/alwaysAsk.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/alwaysAsk.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/alwaysAsk.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/applications.css">mail/themes/gnomestripe/mail/preferences/applications.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/applications.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/applications.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/applications.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/applications.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/applications.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/preferences.css">mail/themes/gnomestripe/mail/preferences/preferences.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/preferences.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/preferences.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/preferences.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/preferences.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/gnomestripe/mail/preferences/preferences.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/jar.mn">mail/themes/pinstripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/jar.mn">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/jar.mn">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/alwaysAsk.png">mail/themes/pinstripe/mail/preferences/alwaysAsk.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/alwaysAsk.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/alwaysAsk.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/alwaysAsk.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/alwaysAsk.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/alwaysAsk.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/application.png">mail/themes/pinstripe/mail/preferences/application.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/application.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/application.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/application.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/application.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/application.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/applications.css">mail/themes/pinstripe/mail/preferences/applications.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/applications.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/applications.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/applications.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/applications.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/applications.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/preferences.css">mail/themes/pinstripe/mail/preferences/preferences.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/preferences.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/preferences.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/preferences.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/preferences.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/preferences.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/saveFile.png">mail/themes/pinstripe/mail/preferences/saveFile.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/saveFile.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/saveFile.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/saveFile.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/saveFile.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/pinstripe/mail/preferences/saveFile.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/jar.mn">mail/themes/qute/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/jar.mn">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/jar.mn">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/jar.mn">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/jar.mn">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/alwaysAsk.png">mail/themes/qute/mail/preferences/alwaysAsk.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/alwaysAsk.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/alwaysAsk.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/alwaysAsk.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/alwaysAsk.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/alwaysAsk.png">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/application.png">mail/themes/qute/mail/preferences/application.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/application.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/application.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/application.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/application.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/application.png">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/applications.css">mail/themes/qute/mail/preferences/applications.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/applications.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/applications.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/applications.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/applications.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/applications.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/preferences.css">mail/themes/qute/mail/preferences/preferences.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/preferences.css">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/preferences.css">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/preferences.css">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/preferences.css">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/preferences.css">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/saveFile.png">mail/themes/qute/mail/preferences/saveFile.png</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/saveFile.png">file</a> |
<a href="/comm-central/annotate/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/saveFile.png">annotate</a> |
<a href="/comm-central/diff/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/saveFile.png">diff</a> |
<a href="/comm-central/comparison/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/saveFile.png">comparison</a> |
<a href="/comm-central/log/76a9c718b6fa02a20b74dc2093e1c49399470bae/mail/themes/qute/mail/preferences/saveFile.png">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/app/profile/all-thunderbird.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -201,16 +201,19 @@ pref(&quot;browser.preferences.instantApply&quot;,</span>
<a href="#l1.4"></a><span id="l1.4"> pref(&quot;browser.preferences.instantApply&quot;, true);</span>
<a href="#l1.5"></a><span id="l1.5"> #endif</span>
<a href="#l1.6"></a><span id="l1.6"> #ifdef XP_MACOSX</span>
<a href="#l1.7"></a><span id="l1.7"> pref(&quot;browser.preferences.animateFadeIn&quot;, true);</span>
<a href="#l1.8"></a><span id="l1.8"> #else</span>
<a href="#l1.9"></a><span id="l1.9"> pref(&quot;browser.preferences.animateFadeIn&quot;, false);</span>
<a href="#l1.10"></a><span id="l1.10"> #endif</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+pref(&quot;browser.download.show_plugins_in_list&quot;, false);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+pref(&quot;browser.download.hide_plugins_without_extensions&quot;, true);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+</span>
<a href="#l1.15"></a><span id="l1.15"> pref(&quot;accessibility.typeaheadfind&quot;, false);</span>
<a href="#l1.16"></a><span id="l1.16"> pref(&quot;accessibility.typeaheadfind.timeout&quot;, 5000);</span>
<a href="#l1.17"></a><span id="l1.17"> pref(&quot;accessibility.typeaheadfind.linksonly&quot;, false);</span>
<a href="#l1.18"></a><span id="l1.18"> pref(&quot;accessibility.typeaheadfind.flashBar&quot;, 1);</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> pref(&quot;mail.close_message_window.on_delete&quot;, false);</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22"> /////////////////////////////////////////////////////////////////</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">new file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- /dev/null</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ b/mail/components/preferences/applicationManager.js</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -0,0 +1,125 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineplus">+#</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+#</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+# License.</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+#</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+# The Original Code is mozilla.org Code.</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+#</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+# Mozilla Corporation.</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+#</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+# Contributor(s):</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+#   Florian Queze &lt;florian@queze.net&gt; (Original author)</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+#</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+#</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+var gAppManagerDialog = {</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+  _removed: [],</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+  init: function appManager_init() {</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+    this.handlerInfo = window.arguments[0];</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+    var bundle = document.getElementById(&quot;appManagerBundle&quot;);</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+    var description = gApplicationsPane._describeType(this.handlerInfo);</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+    var key = (this.handlerInfo.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo) ?</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+                &quot;handleFile&quot; : &quot;handleProtocol&quot;;</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+    var contentText = bundle.getFormattedString(key, [description]);</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+    contentText = bundle.getFormattedString(&quot;descriptionApplications&quot;, [contentText]);</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+    document.getElementById(&quot;appDescription&quot;).textContent = contentText;</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineplus">+    var list = document.getElementById(&quot;appList&quot;);</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineplus">+    var apps = this.handlerInfo.possibleApplicationHandlers.enumerate();</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+    while (apps.hasMoreElements()) {</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+      let app = apps.getNext();</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineplus">+      if (!gApplicationsPane.isValidHandlerApp(app))</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineplus">+        continue;</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineplus">+</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineplus">+      app.QueryInterface(Components.interfaces.nsIHandlerApp);</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineplus">+      var item = list.appendItem(app.name);</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineplus">+      item.setAttribute(&quot;image&quot;, gApplicationsPane._getIconURLForHandlerApp(app));</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineplus">+      item.className = &quot;listitem-iconic&quot;;</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineplus">+      item.app = app;</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+    }</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineplus">+    list.selectedIndex = 0;</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineplus">+  },</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineplus">+</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineplus">+  onOK: function appManager_onOK() {</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineplus">+    if (!this._removed.length) {</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineplus">+      // return early to avoid calling the |store| method.</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineplus">+      return;</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+    }</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+    for (var i = 0; i &lt; this._removed.length; ++i)</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+      this.handlerInfo.removePossibleApplicationHandler(this._removed[i]);</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+    this.handlerInfo.store();</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+  },</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineplus">+</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineplus">+  onCancel: function appManager_onCancel() {</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineplus">+    // do nothing</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineplus">+  },</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineplus">+</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineplus">+  remove: function appManager_remove() {</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineplus">+    var list = document.getElementById(&quot;appList&quot;);</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineplus">+    this._removed.push(list.selectedItem.app);</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineplus">+    var index = list.selectedIndex;</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineplus">+    list.removeItemAt(index);</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineplus">+    if (list.getRowCount() == 0) {</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineplus">+      // The list is now empty, make the bottom part disappear</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+      document.getElementById(&quot;appDetails&quot;).hidden = true;</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineplus">+    }</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineplus">+    else {</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineplus">+      // Select the item at the same index, if we removed the last</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineplus">+      // item of the list, select the previous item</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineplus">+      if (index == list.getRowCount())</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineplus">+        --index;</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineplus">+      list.selectedIndex = index;</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineplus">+    }</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineplus">+  },</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineplus">+</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineplus">+  onSelect: function appManager_onSelect() {</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineplus">+    var list = document.getElementById(&quot;appList&quot;);</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineplus">+    if (!list.selectedItem) {</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineplus">+      document.getElementById(&quot;remove&quot;).disabled = true;</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineplus">+      return;</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineplus">+    }</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineplus">+    document.getElementById(&quot;remove&quot;).disabled = false;</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineplus">+    var app = list.selectedItem.app;</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineplus">+    var address = &quot;&quot;;</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineplus">+    if (app instanceof Components.interfaces.nsILocalHandlerApp)</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineplus">+      address = app.executable.path;</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineplus">+    else if (app instanceof Components.interfaces.nsIWebHandlerApp)</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineplus">+      address = app.uriTemplate;</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineplus">+    else if (app instanceof Components.interfaces.nsIWebContentHandlerInfo)</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineplus">+      address = app.uri;</span>
<a href="#l2.123"></a><span id="l2.123" class="difflineplus">+    document.getElementById(&quot;appLocation&quot;).value = address;</span>
<a href="#l2.124"></a><span id="l2.124" class="difflineplus">+    var bundle = document.getElementById(&quot;appManagerBundle&quot;);</span>
<a href="#l2.125"></a><span id="l2.125" class="difflineplus">+    var appType = (app instanceof Components.interfaces.nsILocalHandlerApp) ?</span>
<a href="#l2.126"></a><span id="l2.126" class="difflineplus">+                    &quot;descriptionLocalApp&quot; : &quot;descriptionWebApp&quot;;</span>
<a href="#l2.127"></a><span id="l2.127" class="difflineplus">+    document.getElementById(&quot;appType&quot;).value = bundle.getString(appType);</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineplus">+  }</span>
<a href="#l2.129"></a><span id="l2.129" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/mail/components/preferences/applicationManager.xul</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,91 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+#</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+#</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+# License.</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+#</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+# The Original Code is mozilla.org Code.</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+#</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+# Mozilla Corporation.</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+#</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+# Contributor(s):</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+#   Florian Queze &lt;florian@queze.net&gt; (Original author)</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+#   Magnus Melin &lt;mkmelin+mozilla@iki.fi&gt;</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+#</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+#</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot;?&gt;</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+&lt;!DOCTYPE dialog SYSTEM &quot;chrome://messenger/locale/preferences/applicationManager.dtd&quot;&gt;</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+&lt;dialog id=&quot;appManager&quot;</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+        xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+        buttons=&quot;accept,cancel&quot;</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+        onload=&quot;gAppManagerDialog.init();&quot;</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+        ondialogaccept=&quot;gAppManagerDialog.onOK();&quot;</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+        ondialogcancel=&quot;gAppManagerDialog.onCancel();&quot;</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+        title=&quot;&amp;appManager.title;&quot;</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+        style=&quot;&amp;appManager.style;&quot;</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+        persist=&quot;screenX screenY&quot;&gt;</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+          src=&quot;chrome://messenger/content/preferences/applications.js&quot;/&gt;</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+  &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+          src=&quot;chrome://messenger/content/preferences/applicationManager.js&quot;/&gt;</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+  &lt;commandset id=&quot;appManagerCommandSet&quot;&gt;</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+    &lt;command id=&quot;cmd_delete&quot;</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+             oncommand=&quot;gAppManagerDialog.remove();&quot;</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+             disabled=&quot;true&quot;/&gt;</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+  &lt;/commandset&gt;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+  &lt;keyset id=&quot;appManagerKeyset&quot;&gt;</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+    &lt;key id=&quot;delete&quot; keycode=&quot;VK_DELETE&quot; command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+  &lt;/keyset&gt;</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+  &lt;stringbundleset id=&quot;appManagerBundleset&quot;&gt;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+    &lt;stringbundle id=&quot;appManagerBundle&quot;</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+                  src=&quot;chrome://messenger/locale/preferences/applicationManager.properties&quot;/&gt;</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+  &lt;/stringbundleset&gt;</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+  &lt;description id=&quot;appDescription&quot;/&gt;</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+  &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+  &lt;hbox flex=&quot;1&quot;&gt;</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+    &lt;listbox id=&quot;appList&quot; onselect=&quot;gAppManagerDialog.onSelect();&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+    &lt;vbox&gt;</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+      &lt;button id=&quot;remove&quot;</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+              label=&quot;&amp;remove.label;&quot;</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+              accesskey=&quot;&amp;remove.accesskey;&quot;</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+              command=&quot;cmd_delete&quot;/&gt;</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+      &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+    &lt;/vbox&gt;</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+  &lt;/hbox&gt;</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+  &lt;vbox id=&quot;appDetails&quot;&gt;</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+    &lt;label id=&quot;appType&quot;/&gt;</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+    &lt;textbox id=&quot;appLocation&quot; readonly=&quot;true&quot; class=&quot;plain&quot;/&gt;</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+  &lt;/vbox&gt;</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+&lt;/dialog&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100755</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,1370 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+/*</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+# -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineplus">+#</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+#</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+# License.</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+#</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+# The Original Code is the Download Actions Manager.</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+#</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+# Ben Goodger.</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 2000</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+#</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+# Contributor(s):</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+#   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+#   Jeff Walden &lt;jwalden+code@mit.edu&gt;</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+#   Asaf Romano &lt;mozilla.mano@sent.com&gt;</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+#   Myk Melez &lt;myk@mozilla.org&gt;</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+#   Florian Queze &lt;florian@queze.net&gt;</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+#   Will Guaraldi &lt;will.guaraldi@pculture.org&gt;</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+#   Magnus Melin &lt;mkmelin+mozilla@iki.fi&gt;</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+#</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineplus">+#</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+ */</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+//****************************************************************************//</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+// Constants &amp; Enumeration Values</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+const PREF_DISABLED_PLUGIN_TYPES = &quot;plugin.disable_full_page_plugin_for_types&quot;;</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+// Preferences that affect which entries to show in the list.</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+const PREF_SHOW_PLUGINS_IN_LIST = &quot;browser.download.show_plugins_in_list&quot;;</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+const PREF_HIDE_PLUGINS_WITHOUT_EXTENSIONS =</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+  &quot;browser.download.hide_plugins_without_extensions&quot;;</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+// The nsHandlerInfoAction enumeration values in nsIHandlerInfo identify</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+// the actions the application can take with content of various types.</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineplus">+// But since nsIHandlerInfo doesn't support plugins, there's no value</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+// identifying the &quot;use plugin&quot; action, so we use this constant instead.</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+const kActionUsePlugin = 5;</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineplus">+</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineplus">+/*</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+#ifdef MOZ_WIDGET_GTK2</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+*/</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+const ICON_URL_APP      = &quot;moz-icon://dummy.exe?size=16&quot;;</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+/*</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+#else</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+*/</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+const ICON_URL_APP      = &quot;chrome://messenger/skin/preferences/application.png&quot;;</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+/*</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+#endif</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+*/</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineplus">+</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+// For CSS. Can be one of &quot;ask&quot;, &quot;save&quot;, &quot;plugin&quot; or &quot;feed&quot;. If absent, the icon URL</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+// was set by us to a custom handler icon and CSS should not try to override it.</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+const APP_ICON_ATTR_NAME = &quot;appHandlerIcon&quot;;</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineplus">+</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineplus">+//****************************************************************************//</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineplus">+// Utilities</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineplus">+</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineplus">+function getDisplayNameForFile(aFile) {</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineplus">+/*</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineplus">+*/</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineplus">+  if (aFile instanceof Components.interfaces.nsILocalFileWin) {</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineplus">+    try {</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineplus">+      return aFile.getVersionInfoField(&quot;FileDescription&quot;);</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineplus">+    }</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineplus">+    catch(ex) {</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineplus">+      // fall through to the file name</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineplus">+    }</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineplus">+  }</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineplus">+/*</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineplus">+#endif</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineplus">+*/</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineplus">+  if (aFile instanceof Components.interfaces.nsILocalFileMac) {</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineplus">+    try {</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineplus">+      return aFile.bundleDisplayName;</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineplus">+    }</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineplus">+    catch(ex) {</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineplus">+      // fall through to the file name</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineplus">+    }</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineplus">+  }</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineplus">+/*</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineplus">+#endif</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineplus">+*/</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineplus">+  return aFile.leafName;</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineplus">+}</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineplus">+</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineplus">+function getLocalHandlerApp(aFile) {</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineplus">+  var localHandlerApp = Components.classes[&quot;@mozilla.org/uriloader/local-handler-app;1&quot;]</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineplus">+                                  .createInstance(Components.interfaces.nsILocalHandlerApp);</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineplus">+  localHandlerApp.name = getDisplayNameForFile(aFile);</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineplus">+  localHandlerApp.executable = aFile;</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineplus">+</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineplus">+  return localHandlerApp;</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineplus">+}</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineplus">+</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineplus">+/**</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineplus">+ * An enumeration of items in a JS array.</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineplus">+ *</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineplus">+ * FIXME: use ArrayConverter once it lands (bug 380839).</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineplus">+ *</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineplus">+ * @constructor</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineplus">+ */</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineplus">+function ArrayEnumerator(aItems) {</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineplus">+  this._index = 0;</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineplus">+  this._contents = aItems;</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineplus">+}</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineplus">+</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineplus">+ArrayEnumerator.prototype = {</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineplus">+  _index: 0,</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineplus">+</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineplus">+  hasMoreElements: function() {</span>
<a href="#l4.141"></a><span id="l4.141" class="difflineplus">+    return this._index &lt; this._contents.length;</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineplus">+  },</span>
<a href="#l4.143"></a><span id="l4.143" class="difflineplus">+</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineplus">+  getNext: function() {</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineplus">+    return this._contents[this._index++];</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineplus">+  }</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineplus">+};</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineplus">+</span>
<a href="#l4.149"></a><span id="l4.149" class="difflineplus">+//****************************************************************************//</span>
<a href="#l4.150"></a><span id="l4.150" class="difflineplus">+// HandlerInfoWrapper</span>
<a href="#l4.151"></a><span id="l4.151" class="difflineplus">+</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineplus">+/**</span>
<a href="#l4.153"></a><span id="l4.153" class="difflineplus">+ * This object wraps nsIHandlerInfo with some additional functionality</span>
<a href="#l4.154"></a><span id="l4.154" class="difflineplus">+ * the Applications prefpane needs to display and allow modification of</span>
<a href="#l4.155"></a><span id="l4.155" class="difflineplus">+ * the list of handled types.</span>
<a href="#l4.156"></a><span id="l4.156" class="difflineplus">+ *</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineplus">+ * We create an instance of this wrapper for each entry we might display</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineplus">+ * in the prefpane, and we compose the instances from various sources,</span>
<a href="#l4.159"></a><span id="l4.159" class="difflineplus">+ * including navigator.plugins and the handler service.</span>
<a href="#l4.160"></a><span id="l4.160" class="difflineplus">+ *</span>
<a href="#l4.161"></a><span id="l4.161" class="difflineplus">+ * We don't implement all the original nsIHandlerInfo functionality,</span>
<a href="#l4.162"></a><span id="l4.162" class="difflineplus">+ * just the stuff that the prefpane needs.</span>
<a href="#l4.163"></a><span id="l4.163" class="difflineplus">+ *</span>
<a href="#l4.164"></a><span id="l4.164" class="difflineplus">+ * In theory, all of the custom functionality in this wrapper should get</span>
<a href="#l4.165"></a><span id="l4.165" class="difflineplus">+ * pushed down into nsIHandlerInfo eventually.</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineplus">+ */</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineplus">+function HandlerInfoWrapper(aType, aHandlerInfo) {</span>
<a href="#l4.168"></a><span id="l4.168" class="difflineplus">+  this._type = aType;</span>
<a href="#l4.169"></a><span id="l4.169" class="difflineplus">+  this.wrappedHandlerInfo = aHandlerInfo;</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineplus">+}</span>
<a href="#l4.171"></a><span id="l4.171" class="difflineplus">+</span>
<a href="#l4.172"></a><span id="l4.172" class="difflineplus">+HandlerInfoWrapper.prototype = {</span>
<a href="#l4.173"></a><span id="l4.173" class="difflineplus">+  // The wrapped nsIHandlerInfo object.  In general, this object is private,</span>
<a href="#l4.174"></a><span id="l4.174" class="difflineplus">+  // but there are a couple cases where callers access it directly for things</span>
<a href="#l4.175"></a><span id="l4.175" class="difflineplus">+  // we haven't (yet?) implemented, so we make it a public property.</span>
<a href="#l4.176"></a><span id="l4.176" class="difflineplus">+  wrappedHandlerInfo: null,</span>
<a href="#l4.177"></a><span id="l4.177" class="difflineplus">+</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.179"></a><span id="l4.179" class="difflineplus">+  // Convenience Utils</span>
<a href="#l4.180"></a><span id="l4.180" class="difflineplus">+</span>
<a href="#l4.181"></a><span id="l4.181" class="difflineplus">+  _handlerSvc: Components.classes[&quot;@mozilla.org/uriloader/handler-service;1&quot;]</span>
<a href="#l4.182"></a><span id="l4.182" class="difflineplus">+                         .getService(Components.interfaces.nsIHandlerService),</span>
<a href="#l4.183"></a><span id="l4.183" class="difflineplus">+</span>
<a href="#l4.184"></a><span id="l4.184" class="difflineplus">+  _prefSvc: Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l4.185"></a><span id="l4.185" class="difflineplus">+                      .getService(Components.interfaces.nsIPrefBranch2),</span>
<a href="#l4.186"></a><span id="l4.186" class="difflineplus">+</span>
<a href="#l4.187"></a><span id="l4.187" class="difflineplus">+  _categoryMgr: Components.classes[&quot;@mozilla.org/categorymanager;1&quot;]</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineplus">+                          .getService(Components.interfaces.nsICategoryManager),</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineplus">+</span>
<a href="#l4.190"></a><span id="l4.190" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.191"></a><span id="l4.191" class="difflineplus">+  // nsIHandlerInfo</span>
<a href="#l4.192"></a><span id="l4.192" class="difflineplus">+</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineplus">+  // The MIME type or protocol scheme.</span>
<a href="#l4.194"></a><span id="l4.194" class="difflineplus">+  _type: null,</span>
<a href="#l4.195"></a><span id="l4.195" class="difflineplus">+  get type() {</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineplus">+    return this._type;</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineplus">+  },</span>
<a href="#l4.198"></a><span id="l4.198" class="difflineplus">+</span>
<a href="#l4.199"></a><span id="l4.199" class="difflineplus">+  get description() {</span>
<a href="#l4.200"></a><span id="l4.200" class="difflineplus">+    if (this.wrappedHandlerInfo.description)</span>
<a href="#l4.201"></a><span id="l4.201" class="difflineplus">+      return this.wrappedHandlerInfo.description;</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineplus">+</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineplus">+    if (this.primaryExtension) {</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineplus">+      var extension = this.primaryExtension.toUpperCase();</span>
<a href="#l4.205"></a><span id="l4.205" class="difflineplus">+      return document.getElementById(&quot;bundlePreferences&quot;)</span>
<a href="#l4.206"></a><span id="l4.206" class="difflineplus">+                     .getFormattedString(&quot;fileEnding&quot;, [extension]);</span>
<a href="#l4.207"></a><span id="l4.207" class="difflineplus">+    }</span>
<a href="#l4.208"></a><span id="l4.208" class="difflineplus">+    return this.type;</span>
<a href="#l4.209"></a><span id="l4.209" class="difflineplus">+  },</span>
<a href="#l4.210"></a><span id="l4.210" class="difflineplus">+</span>
<a href="#l4.211"></a><span id="l4.211" class="difflineplus">+  get preferredApplicationHandler() {</span>
<a href="#l4.212"></a><span id="l4.212" class="difflineplus">+    return this.wrappedHandlerInfo.preferredApplicationHandler;</span>
<a href="#l4.213"></a><span id="l4.213" class="difflineplus">+  },</span>
<a href="#l4.214"></a><span id="l4.214" class="difflineplus">+</span>
<a href="#l4.215"></a><span id="l4.215" class="difflineplus">+  set preferredApplicationHandler(aNewValue) {</span>
<a href="#l4.216"></a><span id="l4.216" class="difflineplus">+    this.wrappedHandlerInfo.preferredApplicationHandler = aNewValue;</span>
<a href="#l4.217"></a><span id="l4.217" class="difflineplus">+</span>
<a href="#l4.218"></a><span id="l4.218" class="difflineplus">+    // Make sure the preferred handler is in the set of possible handlers.</span>
<a href="#l4.219"></a><span id="l4.219" class="difflineplus">+    if (aNewValue)</span>
<a href="#l4.220"></a><span id="l4.220" class="difflineplus">+      this.addPossibleApplicationHandler(aNewValue)</span>
<a href="#l4.221"></a><span id="l4.221" class="difflineplus">+  },</span>
<a href="#l4.222"></a><span id="l4.222" class="difflineplus">+</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineplus">+  get possibleApplicationHandlers() {</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineplus">+    return this.wrappedHandlerInfo.possibleApplicationHandlers;</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineplus">+  },</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineplus">+</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineplus">+  addPossibleApplicationHandler: function(aNewHandler) {</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineplus">+    try {</span>
<a href="#l4.229"></a><span id="l4.229" class="difflineplus">+      if (this.possibleApplicationHandlers.indexOf(0, aNewHandler) != -1)</span>
<a href="#l4.230"></a><span id="l4.230" class="difflineplus">+        return;</span>
<a href="#l4.231"></a><span id="l4.231" class="difflineplus">+    } catch (e) { }</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineplus">+    this.possibleApplicationHandlers.appendElement(aNewHandler, false);</span>
<a href="#l4.233"></a><span id="l4.233" class="difflineplus">+  },</span>
<a href="#l4.234"></a><span id="l4.234" class="difflineplus">+</span>
<a href="#l4.235"></a><span id="l4.235" class="difflineplus">+  removePossibleApplicationHandler: function(aHandler) {</span>
<a href="#l4.236"></a><span id="l4.236" class="difflineplus">+    var defaultApp = this.preferredApplicationHandler;</span>
<a href="#l4.237"></a><span id="l4.237" class="difflineplus">+    if (defaultApp &amp;&amp; aHandler.equals(defaultApp)) {</span>
<a href="#l4.238"></a><span id="l4.238" class="difflineplus">+      // If the app we remove was the default app, we must make sure</span>
<a href="#l4.239"></a><span id="l4.239" class="difflineplus">+      // it won't be used anymore</span>
<a href="#l4.240"></a><span id="l4.240" class="difflineplus">+      this.alwaysAskBeforeHandling = true;</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineplus">+      this.preferredApplicationHandler = null;</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineplus">+    }</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineplus">+</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineplus">+    try {</span>
<a href="#l4.245"></a><span id="l4.245" class="difflineplus">+      var handlerIdx = this.possibleApplicationHandlers.indexOf(0, aHandler);</span>
<a href="#l4.246"></a><span id="l4.246" class="difflineplus">+      this.possibleApplicationHandlers.removeElementAt(handlerIdx);</span>
<a href="#l4.247"></a><span id="l4.247" class="difflineplus">+    } catch (e) { }</span>
<a href="#l4.248"></a><span id="l4.248" class="difflineplus">+  },</span>
<a href="#l4.249"></a><span id="l4.249" class="difflineplus">+</span>
<a href="#l4.250"></a><span id="l4.250" class="difflineplus">+  get hasDefaultHandler() {</span>
<a href="#l4.251"></a><span id="l4.251" class="difflineplus">+    return this.wrappedHandlerInfo.hasDefaultHandler;</span>
<a href="#l4.252"></a><span id="l4.252" class="difflineplus">+  },</span>
<a href="#l4.253"></a><span id="l4.253" class="difflineplus">+</span>
<a href="#l4.254"></a><span id="l4.254" class="difflineplus">+  get defaultDescription() {</span>
<a href="#l4.255"></a><span id="l4.255" class="difflineplus">+    return this.wrappedHandlerInfo.defaultDescription;</span>
<a href="#l4.256"></a><span id="l4.256" class="difflineplus">+  },</span>
<a href="#l4.257"></a><span id="l4.257" class="difflineplus">+</span>
<a href="#l4.258"></a><span id="l4.258" class="difflineplus">+  // What to do with content of this type.</span>
<a href="#l4.259"></a><span id="l4.259" class="difflineplus">+  get preferredAction() {</span>
<a href="#l4.260"></a><span id="l4.260" class="difflineplus">+    // If we have an enabled plugin, then the action is to use that plugin.</span>
<a href="#l4.261"></a><span id="l4.261" class="difflineplus">+    if (this.plugin &amp;&amp; !this.isDisabledPluginType)</span>
<a href="#l4.262"></a><span id="l4.262" class="difflineplus">+      return kActionUsePlugin;</span>
<a href="#l4.263"></a><span id="l4.263" class="difflineplus">+</span>
<a href="#l4.264"></a><span id="l4.264" class="difflineplus">+    // If the action is to use a helper app, but we don't have a preferred</span>
<a href="#l4.265"></a><span id="l4.265" class="difflineplus">+    // handler app, then switch to using the system default, if any; otherwise</span>
<a href="#l4.266"></a><span id="l4.266" class="difflineplus">+    // fall back to saving to disk, which is the default action in nsMIMEInfo.</span>
<a href="#l4.267"></a><span id="l4.267" class="difflineplus">+    // Note: &quot;save to disk&quot; is an invalid value for protocol info objects,</span>
<a href="#l4.268"></a><span id="l4.268" class="difflineplus">+    // but the alwaysAskBeforeHandling getter will detect that situation</span>
<a href="#l4.269"></a><span id="l4.269" class="difflineplus">+    // and always return true in that case to override this invalid value.</span>
<a href="#l4.270"></a><span id="l4.270" class="difflineplus">+    if (this.wrappedHandlerInfo.preferredAction ==</span>
<a href="#l4.271"></a><span id="l4.271" class="difflineplus">+          Components.interfaces.nsIHandlerInfo.useHelperApp &amp;&amp;</span>
<a href="#l4.272"></a><span id="l4.272" class="difflineplus">+        !gApplicationsPane.isValidHandlerApp(this.preferredApplicationHandler)) {</span>
<a href="#l4.273"></a><span id="l4.273" class="difflineplus">+      if (this.wrappedHandlerInfo.hasDefaultHandler)</span>
<a href="#l4.274"></a><span id="l4.274" class="difflineplus">+        return Components.interfaces.nsIHandlerInfo.useSystemDefault;</span>
<a href="#l4.275"></a><span id="l4.275" class="difflineplus">+      else</span>
<a href="#l4.276"></a><span id="l4.276" class="difflineplus">+        return Components.interfaces.nsIHandlerInfo.saveToDisk;</span>
<a href="#l4.277"></a><span id="l4.277" class="difflineplus">+    }</span>
<a href="#l4.278"></a><span id="l4.278" class="difflineplus">+</span>
<a href="#l4.279"></a><span id="l4.279" class="difflineplus">+    return this.wrappedHandlerInfo.preferredAction;</span>
<a href="#l4.280"></a><span id="l4.280" class="difflineplus">+  },</span>
<a href="#l4.281"></a><span id="l4.281" class="difflineplus">+</span>
<a href="#l4.282"></a><span id="l4.282" class="difflineplus">+  set preferredAction(aNewValue) {</span>
<a href="#l4.283"></a><span id="l4.283" class="difflineplus">+    // We don't modify the preferred action if the new action is to use a plugin</span>
<a href="#l4.284"></a><span id="l4.284" class="difflineplus">+    // because handler info objects don't understand our custom &quot;use plugin&quot;</span>
<a href="#l4.285"></a><span id="l4.285" class="difflineplus">+    // value.  Also, leaving it untouched means that we can automatically revert</span>
<a href="#l4.286"></a><span id="l4.286" class="difflineplus">+    // to the old setting if the user ever removes the plugin.</span>
<a href="#l4.287"></a><span id="l4.287" class="difflineplus">+</span>
<a href="#l4.288"></a><span id="l4.288" class="difflineplus">+    if (aNewValue != kActionUsePlugin)</span>
<a href="#l4.289"></a><span id="l4.289" class="difflineplus">+      this.wrappedHandlerInfo.preferredAction = aNewValue;</span>
<a href="#l4.290"></a><span id="l4.290" class="difflineplus">+  },</span>
<a href="#l4.291"></a><span id="l4.291" class="difflineplus">+</span>
<a href="#l4.292"></a><span id="l4.292" class="difflineplus">+  get alwaysAskBeforeHandling() {</span>
<a href="#l4.293"></a><span id="l4.293" class="difflineplus">+    // If this type is handled only by a plugin, we can't trust the value</span>
<a href="#l4.294"></a><span id="l4.294" class="difflineplus">+    // in the handler info object, since it'll be a default based on the absence</span>
<a href="#l4.295"></a><span id="l4.295" class="difflineplus">+    // of any user configuration, and the default in that case is to always ask,</span>
<a href="#l4.296"></a><span id="l4.296" class="difflineplus">+    // even though we never ask for content handled by a plugin, so special case</span>
<a href="#l4.297"></a><span id="l4.297" class="difflineplus">+    // plugin-handled types by returning false here.</span>
<a href="#l4.298"></a><span id="l4.298" class="difflineplus">+    if (this.plugin &amp;&amp; this.handledOnlyByPlugin)</span>
<a href="#l4.299"></a><span id="l4.299" class="difflineplus">+      return false;</span>
<a href="#l4.300"></a><span id="l4.300" class="difflineplus">+</span>
<a href="#l4.301"></a><span id="l4.301" class="difflineplus">+    // If this is a protocol type and the preferred action is &quot;save to disk&quot;,</span>
<a href="#l4.302"></a><span id="l4.302" class="difflineplus">+    // which is invalid for such types, then return true here to override that</span>
<a href="#l4.303"></a><span id="l4.303" class="difflineplus">+    // action.  This could happen when the preferred action is to use a helper</span>
<a href="#l4.304"></a><span id="l4.304" class="difflineplus">+    // app, but the preferredApplicationHandler is invalid, and there isn't</span>
<a href="#l4.305"></a><span id="l4.305" class="difflineplus">+    // a default handler, so the preferredAction getter returns save to disk</span>
<a href="#l4.306"></a><span id="l4.306" class="difflineplus">+    // instead.</span>
<a href="#l4.307"></a><span id="l4.307" class="difflineplus">+    if (!(this.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo) &amp;&amp;</span>
<a href="#l4.308"></a><span id="l4.308" class="difflineplus">+        this.preferredAction == Components.interfaces.nsIHandlerInfo.saveToDisk)</span>
<a href="#l4.309"></a><span id="l4.309" class="difflineplus">+      return true;</span>
<a href="#l4.310"></a><span id="l4.310" class="difflineplus">+</span>
<a href="#l4.311"></a><span id="l4.311" class="difflineplus">+    return this.wrappedHandlerInfo.alwaysAskBeforeHandling;</span>
<a href="#l4.312"></a><span id="l4.312" class="difflineplus">+  },</span>
<a href="#l4.313"></a><span id="l4.313" class="difflineplus">+</span>
<a href="#l4.314"></a><span id="l4.314" class="difflineplus">+  set alwaysAskBeforeHandling(aNewValue) {</span>
<a href="#l4.315"></a><span id="l4.315" class="difflineplus">+    this.wrappedHandlerInfo.alwaysAskBeforeHandling = aNewValue;</span>
<a href="#l4.316"></a><span id="l4.316" class="difflineplus">+  },</span>
<a href="#l4.317"></a><span id="l4.317" class="difflineplus">+</span>
<a href="#l4.318"></a><span id="l4.318" class="difflineplus">+</span>
<a href="#l4.319"></a><span id="l4.319" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.320"></a><span id="l4.320" class="difflineplus">+  // nsIMIMEInfo</span>
<a href="#l4.321"></a><span id="l4.321" class="difflineplus">+</span>
<a href="#l4.322"></a><span id="l4.322" class="difflineplus">+  // The primary file extension associated with this type, if any.</span>
<a href="#l4.323"></a><span id="l4.323" class="difflineplus">+  //</span>
<a href="#l4.324"></a><span id="l4.324" class="difflineplus">+  // XXX Plugin objects contain an array of MimeType objects with &quot;suffixes&quot;</span>
<a href="#l4.325"></a><span id="l4.325" class="difflineplus">+  // properties; if this object has an associated plugin, shouldn't we check</span>
<a href="#l4.326"></a><span id="l4.326" class="difflineplus">+  // those properties for an extension?</span>
<a href="#l4.327"></a><span id="l4.327" class="difflineplus">+  get primaryExtension() {</span>
<a href="#l4.328"></a><span id="l4.328" class="difflineplus">+    try {</span>
<a href="#l4.329"></a><span id="l4.329" class="difflineplus">+      if (this.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo &amp;&amp;</span>
<a href="#l4.330"></a><span id="l4.330" class="difflineplus">+          this.wrappedHandlerInfo.primaryExtension)</span>
<a href="#l4.331"></a><span id="l4.331" class="difflineplus">+        return this.wrappedHandlerInfo.primaryExtension;</span>
<a href="#l4.332"></a><span id="l4.332" class="difflineplus">+    } catch(ex) {}</span>
<a href="#l4.333"></a><span id="l4.333" class="difflineplus">+</span>
<a href="#l4.334"></a><span id="l4.334" class="difflineplus">+    return null;</span>
<a href="#l4.335"></a><span id="l4.335" class="difflineplus">+  },</span>
<a href="#l4.336"></a><span id="l4.336" class="difflineplus">+</span>
<a href="#l4.337"></a><span id="l4.337" class="difflineplus">+</span>
<a href="#l4.338"></a><span id="l4.338" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.339"></a><span id="l4.339" class="difflineplus">+  // Plugin Handling</span>
<a href="#l4.340"></a><span id="l4.340" class="difflineplus">+</span>
<a href="#l4.341"></a><span id="l4.341" class="difflineplus">+  // A plugin that can handle this type, if any.</span>
<a href="#l4.342"></a><span id="l4.342" class="difflineplus">+  //</span>
<a href="#l4.343"></a><span id="l4.343" class="difflineplus">+  // Note: just because we have one doesn't mean it *will* handle the type.</span>
<a href="#l4.344"></a><span id="l4.344" class="difflineplus">+  // That depends on whether or not the type is in the list of types for which</span>
<a href="#l4.345"></a><span id="l4.345" class="difflineplus">+  // plugin handling is disabled.</span>
<a href="#l4.346"></a><span id="l4.346" class="difflineplus">+  plugin: null,</span>
<a href="#l4.347"></a><span id="l4.347" class="difflineplus">+</span>
<a href="#l4.348"></a><span id="l4.348" class="difflineplus">+  // Whether or not this type is only handled by a plugin or is also handled</span>
<a href="#l4.349"></a><span id="l4.349" class="difflineplus">+  // by some user-configured action as specified in the handler info object.</span>
<a href="#l4.350"></a><span id="l4.350" class="difflineplus">+  //</span>
<a href="#l4.351"></a><span id="l4.351" class="difflineplus">+  // Note: we can't just check if there's a handler info object for this type,</span>
<a href="#l4.352"></a><span id="l4.352" class="difflineplus">+  // because OS and user configuration is mixed up in the handler info object,</span>
<a href="#l4.353"></a><span id="l4.353" class="difflineplus">+  // so we always need to retrieve it for the OS info and can't tell whether</span>
<a href="#l4.354"></a><span id="l4.354" class="difflineplus">+  // it represents only OS-default information or user-configured information.</span>
<a href="#l4.355"></a><span id="l4.355" class="difflineplus">+  //</span>
<a href="#l4.356"></a><span id="l4.356" class="difflineplus">+  // FIXME: once handler info records are broken up into OS-provided records</span>
<a href="#l4.357"></a><span id="l4.357" class="difflineplus">+  // and user-configured records, stop using this boolean flag and simply</span>
<a href="#l4.358"></a><span id="l4.358" class="difflineplus">+  // check for the presence of a user-configured record to determine whether</span>
<a href="#l4.359"></a><span id="l4.359" class="difflineplus">+  // or not this type is only handled by a plugin.  Filed as bug 395142.</span>
<a href="#l4.360"></a><span id="l4.360" class="difflineplus">+  handledOnlyByPlugin: undefined,</span>
<a href="#l4.361"></a><span id="l4.361" class="difflineplus">+</span>
<a href="#l4.362"></a><span id="l4.362" class="difflineplus">+  get isDisabledPluginType() {</span>
<a href="#l4.363"></a><span id="l4.363" class="difflineplus">+    return this._getDisabledPluginTypes().indexOf(this.type) != -1;</span>
<a href="#l4.364"></a><span id="l4.364" class="difflineplus">+  },</span>
<a href="#l4.365"></a><span id="l4.365" class="difflineplus">+</span>
<a href="#l4.366"></a><span id="l4.366" class="difflineplus">+  _getDisabledPluginTypes: function() {</span>
<a href="#l4.367"></a><span id="l4.367" class="difflineplus">+    var types = &quot;&quot;;</span>
<a href="#l4.368"></a><span id="l4.368" class="difflineplus">+</span>
<a href="#l4.369"></a><span id="l4.369" class="difflineplus">+    if (this._prefSvc.prefHasUserValue(PREF_DISABLED_PLUGIN_TYPES))</span>
<a href="#l4.370"></a><span id="l4.370" class="difflineplus">+      types = this._prefSvc.getCharPref(PREF_DISABLED_PLUGIN_TYPES);</span>
<a href="#l4.371"></a><span id="l4.371" class="difflineplus">+</span>
<a href="#l4.372"></a><span id="l4.372" class="difflineplus">+    // Only split if the string isn't empty so we don't end up with an array</span>
<a href="#l4.373"></a><span id="l4.373" class="difflineplus">+    // containing a single empty string.</span>
<a href="#l4.374"></a><span id="l4.374" class="difflineplus">+    return types ? types.split(&quot;,&quot;) : [];</span>
<a href="#l4.375"></a><span id="l4.375" class="difflineplus">+  },</span>
<a href="#l4.376"></a><span id="l4.376" class="difflineplus">+</span>
<a href="#l4.377"></a><span id="l4.377" class="difflineplus">+  disablePluginType: function() {</span>
<a href="#l4.378"></a><span id="l4.378" class="difflineplus">+    var disabledPluginTypes = this._getDisabledPluginTypes();</span>
<a href="#l4.379"></a><span id="l4.379" class="difflineplus">+</span>
<a href="#l4.380"></a><span id="l4.380" class="difflineplus">+    if (disabledPluginTypes.indexOf(this.type) == -1)</span>
<a href="#l4.381"></a><span id="l4.381" class="difflineplus">+      disabledPluginTypes.push(this.type);</span>
<a href="#l4.382"></a><span id="l4.382" class="difflineplus">+</span>
<a href="#l4.383"></a><span id="l4.383" class="difflineplus">+    this._prefSvc.setCharPref(PREF_DISABLED_PLUGIN_TYPES,</span>
<a href="#l4.384"></a><span id="l4.384" class="difflineplus">+                              disabledPluginTypes.join(&quot;,&quot;));</span>
<a href="#l4.385"></a><span id="l4.385" class="difflineplus">+</span>
<a href="#l4.386"></a><span id="l4.386" class="difflineplus">+    // Update the category manager so existing browser windows update.</span>
<a href="#l4.387"></a><span id="l4.387" class="difflineplus">+    this._categoryMgr.deleteCategoryEntry(&quot;Gecko-Content-Viewers&quot;,</span>
<a href="#l4.388"></a><span id="l4.388" class="difflineplus">+                                          this.type,</span>
<a href="#l4.389"></a><span id="l4.389" class="difflineplus">+                                          false);</span>
<a href="#l4.390"></a><span id="l4.390" class="difflineplus">+  },</span>
<a href="#l4.391"></a><span id="l4.391" class="difflineplus">+</span>
<a href="#l4.392"></a><span id="l4.392" class="difflineplus">+  enablePluginType: function() {</span>
<a href="#l4.393"></a><span id="l4.393" class="difflineplus">+    var disabledPluginTypes = this._getDisabledPluginTypes();</span>
<a href="#l4.394"></a><span id="l4.394" class="difflineplus">+</span>
<a href="#l4.395"></a><span id="l4.395" class="difflineplus">+    var type = this.type;</span>
<a href="#l4.396"></a><span id="l4.396" class="difflineplus">+    disabledPluginTypes = disabledPluginTypes.filter(function(v) v != type);</span>
<a href="#l4.397"></a><span id="l4.397" class="difflineplus">+</span>
<a href="#l4.398"></a><span id="l4.398" class="difflineplus">+    this._prefSvc.setCharPref(PREF_DISABLED_PLUGIN_TYPES,</span>
<a href="#l4.399"></a><span id="l4.399" class="difflineplus">+                              disabledPluginTypes.join(&quot;,&quot;));</span>
<a href="#l4.400"></a><span id="l4.400" class="difflineplus">+</span>
<a href="#l4.401"></a><span id="l4.401" class="difflineplus">+    // Update the category manager so existing browser windows update.</span>
<a href="#l4.402"></a><span id="l4.402" class="difflineplus">+    this._categoryMgr.</span>
<a href="#l4.403"></a><span id="l4.403" class="difflineplus">+      addCategoryEntry(&quot;Gecko-Content-Viewers&quot;,</span>
<a href="#l4.404"></a><span id="l4.404" class="difflineplus">+                       this.type,</span>
<a href="#l4.405"></a><span id="l4.405" class="difflineplus">+                       &quot;@mozilla.org/content/plugin/document-loader-factory;1&quot;,</span>
<a href="#l4.406"></a><span id="l4.406" class="difflineplus">+                       false,</span>
<a href="#l4.407"></a><span id="l4.407" class="difflineplus">+                       true);</span>
<a href="#l4.408"></a><span id="l4.408" class="difflineplus">+  },</span>
<a href="#l4.409"></a><span id="l4.409" class="difflineplus">+</span>
<a href="#l4.410"></a><span id="l4.410" class="difflineplus">+</span>
<a href="#l4.411"></a><span id="l4.411" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.412"></a><span id="l4.412" class="difflineplus">+  // Storage</span>
<a href="#l4.413"></a><span id="l4.413" class="difflineplus">+</span>
<a href="#l4.414"></a><span id="l4.414" class="difflineplus">+  store: function() {</span>
<a href="#l4.415"></a><span id="l4.415" class="difflineplus">+    this._handlerSvc.store(this.wrappedHandlerInfo);</span>
<a href="#l4.416"></a><span id="l4.416" class="difflineplus">+  },</span>
<a href="#l4.417"></a><span id="l4.417" class="difflineplus">+</span>
<a href="#l4.418"></a><span id="l4.418" class="difflineplus">+</span>
<a href="#l4.419"></a><span id="l4.419" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.420"></a><span id="l4.420" class="difflineplus">+  // Icons</span>
<a href="#l4.421"></a><span id="l4.421" class="difflineplus">+</span>
<a href="#l4.422"></a><span id="l4.422" class="difflineplus">+  get smallIcon() {</span>
<a href="#l4.423"></a><span id="l4.423" class="difflineplus">+    return this._getIcon(16);</span>
<a href="#l4.424"></a><span id="l4.424" class="difflineplus">+  },</span>
<a href="#l4.425"></a><span id="l4.425" class="difflineplus">+</span>
<a href="#l4.426"></a><span id="l4.426" class="difflineplus">+  get largeIcon() {</span>
<a href="#l4.427"></a><span id="l4.427" class="difflineplus">+    return this._getIcon(32);</span>
<a href="#l4.428"></a><span id="l4.428" class="difflineplus">+  },</span>
<a href="#l4.429"></a><span id="l4.429" class="difflineplus">+</span>
<a href="#l4.430"></a><span id="l4.430" class="difflineplus">+  _getIcon: function(aSize) {</span>
<a href="#l4.431"></a><span id="l4.431" class="difflineplus">+    if (this.primaryExtension)</span>
<a href="#l4.432"></a><span id="l4.432" class="difflineplus">+      return &quot;moz-icon://goat.&quot; + this.primaryExtension + &quot;?size=&quot; + aSize;</span>
<a href="#l4.433"></a><span id="l4.433" class="difflineplus">+</span>
<a href="#l4.434"></a><span id="l4.434" class="difflineplus">+    if (this.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo)</span>
<a href="#l4.435"></a><span id="l4.435" class="difflineplus">+      return &quot;moz-icon://goat?size=&quot; + aSize + &quot;&amp;contentType=&quot; + this.type;</span>
<a href="#l4.436"></a><span id="l4.436" class="difflineplus">+</span>
<a href="#l4.437"></a><span id="l4.437" class="difflineplus">+    // FIXME: consider returning some generic icon when we can't get a URL for</span>
<a href="#l4.438"></a><span id="l4.438" class="difflineplus">+    // one (for example in the case of protocol schemes).  Filed as bug 395141.</span>
<a href="#l4.439"></a><span id="l4.439" class="difflineplus">+    return null;</span>
<a href="#l4.440"></a><span id="l4.440" class="difflineplus">+  }</span>
<a href="#l4.441"></a><span id="l4.441" class="difflineplus">+};</span>
<a href="#l4.442"></a><span id="l4.442" class="difflineplus">+</span>
<a href="#l4.443"></a><span id="l4.443" class="difflineplus">+//****************************************************************************//</span>
<a href="#l4.444"></a><span id="l4.444" class="difflineplus">+// Prefpane Controller</span>
<a href="#l4.445"></a><span id="l4.445" class="difflineplus">+</span>
<a href="#l4.446"></a><span id="l4.446" class="difflineplus">+var gApplicationsPane = {</span>
<a href="#l4.447"></a><span id="l4.447" class="difflineplus">+  // The set of types the app knows how to handle.  A hash of HandlerInfoWrapper</span>
<a href="#l4.448"></a><span id="l4.448" class="difflineplus">+  // objects, indexed by type.</span>
<a href="#l4.449"></a><span id="l4.449" class="difflineplus">+  _handledTypes: {},</span>
<a href="#l4.450"></a><span id="l4.450" class="difflineplus">+</span>
<a href="#l4.451"></a><span id="l4.451" class="difflineplus">+  // The list of types we can show, sorted by the sort column/direction.</span>
<a href="#l4.452"></a><span id="l4.452" class="difflineplus">+  // An array of HandlerInfoWrapper objects.  We build this list when we first</span>
<a href="#l4.453"></a><span id="l4.453" class="difflineplus">+  // load the data and then rebuild it when users change a pref that affects</span>
<a href="#l4.454"></a><span id="l4.454" class="difflineplus">+  // what types we can show or change the sort column/direction.</span>
<a href="#l4.455"></a><span id="l4.455" class="difflineplus">+  // Note: this isn't necessarily the list of types we *will* show; if the user</span>
<a href="#l4.456"></a><span id="l4.456" class="difflineplus">+  // provides a filter string, we'll only show the subset of types in this list</span>
<a href="#l4.457"></a><span id="l4.457" class="difflineplus">+  // that match that string.</span>
<a href="#l4.458"></a><span id="l4.458" class="difflineplus">+  _visibleTypes: [],</span>
<a href="#l4.459"></a><span id="l4.459" class="difflineplus">+</span>
<a href="#l4.460"></a><span id="l4.460" class="difflineplus">+  // A count of the number of times each visible type description appears.</span>
<a href="#l4.461"></a><span id="l4.461" class="difflineplus">+  // We use these counts to determine whether or not to annotate descriptions</span>
<a href="#l4.462"></a><span id="l4.462" class="difflineplus">+  // with their types to distinguish duplicate descriptions from each other.</span>
<a href="#l4.463"></a><span id="l4.463" class="difflineplus">+  // A hash of integer counts, indexed by string description.</span>
<a href="#l4.464"></a><span id="l4.464" class="difflineplus">+  _visibleTypeDescriptionCount: [],</span>
<a href="#l4.465"></a><span id="l4.465" class="difflineplus">+</span>
<a href="#l4.466"></a><span id="l4.466" class="difflineplus">+</span>
<a href="#l4.467"></a><span id="l4.467" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.468"></a><span id="l4.468" class="difflineplus">+  // Convenience &amp; Performance Shortcuts</span>
<a href="#l4.469"></a><span id="l4.469" class="difflineplus">+</span>
<a href="#l4.470"></a><span id="l4.470" class="difflineplus">+  // These get defined by init().</span>
<a href="#l4.471"></a><span id="l4.471" class="difflineplus">+  _brandShortName : null,</span>
<a href="#l4.472"></a><span id="l4.472" class="difflineplus">+  _prefsBundle    : null,</span>
<a href="#l4.473"></a><span id="l4.473" class="difflineplus">+  _list           : null,</span>
<a href="#l4.474"></a><span id="l4.474" class="difflineplus">+  _filter         : null,</span>
<a href="#l4.475"></a><span id="l4.475" class="difflineplus">+</span>
<a href="#l4.476"></a><span id="l4.476" class="difflineplus">+  _prefSvc      : Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l4.477"></a><span id="l4.477" class="difflineplus">+                            .getService(Components.interfaces.nsIPrefBranch2),</span>
<a href="#l4.478"></a><span id="l4.478" class="difflineplus">+</span>
<a href="#l4.479"></a><span id="l4.479" class="difflineplus">+  _mimeSvc      : Components.classes[&quot;@mozilla.org/mime;1&quot;]</span>
<a href="#l4.480"></a><span id="l4.480" class="difflineplus">+                            .getService(Components.interfaces.nsIMIMEService),</span>
<a href="#l4.481"></a><span id="l4.481" class="difflineplus">+</span>
<a href="#l4.482"></a><span id="l4.482" class="difflineplus">+  _helperAppSvc : Components.classes[&quot;@mozilla.org/uriloader/external-helper-app-service;1&quot;]</span>
<a href="#l4.483"></a><span id="l4.483" class="difflineplus">+                            .getService(Components.interfaces.nsIExternalHelperAppService),</span>
<a href="#l4.484"></a><span id="l4.484" class="difflineplus">+</span>
<a href="#l4.485"></a><span id="l4.485" class="difflineplus">+  _handlerSvc   : Components.classes[&quot;@mozilla.org/uriloader/handler-service;1&quot;]</span>
<a href="#l4.486"></a><span id="l4.486" class="difflineplus">+                            .getService(Components.interfaces.nsIHandlerService),</span>
<a href="#l4.487"></a><span id="l4.487" class="difflineplus">+</span>
<a href="#l4.488"></a><span id="l4.488" class="difflineplus">+  _ioSvc        : Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l4.489"></a><span id="l4.489" class="difflineplus">+                            .getService(Components.interfaces.nsIIOService),</span>
<a href="#l4.490"></a><span id="l4.490" class="difflineplus">+</span>
<a href="#l4.491"></a><span id="l4.491" class="difflineplus">+</span>
<a href="#l4.492"></a><span id="l4.492" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.493"></a><span id="l4.493" class="difflineplus">+  // Initialization &amp; Destruction</span>
<a href="#l4.494"></a><span id="l4.494" class="difflineplus">+</span>
<a href="#l4.495"></a><span id="l4.495" class="difflineplus">+  init: function() {</span>
<a href="#l4.496"></a><span id="l4.496" class="difflineplus">+    // Initialize shortcuts to some commonly accessed elements &amp; values.</span>
<a href="#l4.497"></a><span id="l4.497" class="difflineplus">+    this._brandShortName =</span>
<a href="#l4.498"></a><span id="l4.498" class="difflineplus">+      document.getElementById(&quot;bundleBrand&quot;).getString(&quot;brandShortName&quot;);</span>
<a href="#l4.499"></a><span id="l4.499" class="difflineplus">+    this._prefsBundle = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l4.500"></a><span id="l4.500" class="difflineplus">+    this._list = document.getElementById(&quot;handlersView&quot;);</span>
<a href="#l4.501"></a><span id="l4.501" class="difflineplus">+    this._filter = document.getElementById(&quot;filter&quot;);</span>
<a href="#l4.502"></a><span id="l4.502" class="difflineplus">+</span>
<a href="#l4.503"></a><span id="l4.503" class="difflineplus">+    // Observe preferences that influence what we display so we can rebuild</span>
<a href="#l4.504"></a><span id="l4.504" class="difflineplus">+    // the view when they change.</span>
<a href="#l4.505"></a><span id="l4.505" class="difflineplus">+    this._prefSvc.addObserver(PREF_SHOW_PLUGINS_IN_LIST, this, false);</span>
<a href="#l4.506"></a><span id="l4.506" class="difflineplus">+    this._prefSvc.addObserver(PREF_HIDE_PLUGINS_WITHOUT_EXTENSIONS, this, false);</span>
<a href="#l4.507"></a><span id="l4.507" class="difflineplus">+</span>
<a href="#l4.508"></a><span id="l4.508" class="difflineplus">+    // Listen for window unload so we can remove our preference observers.</span>
<a href="#l4.509"></a><span id="l4.509" class="difflineplus">+    window.addEventListener(&quot;unload&quot;, this, false);</span>
<a href="#l4.510"></a><span id="l4.510" class="difflineplus">+</span>
<a href="#l4.511"></a><span id="l4.511" class="difflineplus">+    // Figure out how we should be sorting the list.  We persist sort settings</span>
<a href="#l4.512"></a><span id="l4.512" class="difflineplus">+    // across sessions, so we can't assume the default sort column/direction.</span>
<a href="#l4.513"></a><span id="l4.513" class="difflineplus">+    // XXX should we be using the XUL sort service instead?</span>
<a href="#l4.514"></a><span id="l4.514" class="difflineplus">+    this._sortColumn = document.getElementById(&quot;typeColumn&quot;)</span>
<a href="#l4.515"></a><span id="l4.515" class="difflineplus">+    if (document.getElementById(&quot;actionColumn&quot;).hasAttribute(&quot;sortDirection&quot;)) {</span>
<a href="#l4.516"></a><span id="l4.516" class="difflineplus">+      this._sortColumn = document.getElementById(&quot;actionColumn&quot;);</span>
<a href="#l4.517"></a><span id="l4.517" class="difflineplus">+      // The typeColumn element always has a sortDirection attribute,</span>
<a href="#l4.518"></a><span id="l4.518" class="difflineplus">+      // either because it was persisted or because the default value</span>
<a href="#l4.519"></a><span id="l4.519" class="difflineplus">+      // from the xul file was used.  If we are sorting on the other</span>
<a href="#l4.520"></a><span id="l4.520" class="difflineplus">+      // column, we should remove it.</span>
<a href="#l4.521"></a><span id="l4.521" class="difflineplus">+      document.getElementById(&quot;typeColumn&quot;).removeAttribute(&quot;sortDirection&quot;);</span>
<a href="#l4.522"></a><span id="l4.522" class="difflineplus">+    }</span>
<a href="#l4.523"></a><span id="l4.523" class="difflineplus">+</span>
<a href="#l4.524"></a><span id="l4.524" class="difflineplus">+    // By doing this in a timeout, we let the preferences dialog resize itself</span>
<a href="#l4.525"></a><span id="l4.525" class="difflineplus">+    // to an appropriate size before we add a bunch of items to the list.</span>
<a href="#l4.526"></a><span id="l4.526" class="difflineplus">+    // Otherwise, if there are many items, and the Applications prefpane</span>
<a href="#l4.527"></a><span id="l4.527" class="difflineplus">+    // is the one that gets displayed when the user first opens the dialog,</span>
<a href="#l4.528"></a><span id="l4.528" class="difflineplus">+    // the dialog might stretch too much in an attempt to fit them all in.</span>
<a href="#l4.529"></a><span id="l4.529" class="difflineplus">+    // XXX Shouldn't we perhaps just set a max-height on the richlistbox?</span>
<a href="#l4.530"></a><span id="l4.530" class="difflineplus">+    var _delayedPaneLoad = function(self) {</span>
<a href="#l4.531"></a><span id="l4.531" class="difflineplus">+      self._loadData();</span>
<a href="#l4.532"></a><span id="l4.532" class="difflineplus">+      self._rebuildVisibleTypes();</span>
<a href="#l4.533"></a><span id="l4.533" class="difflineplus">+      self._sortVisibleTypes();</span>
<a href="#l4.534"></a><span id="l4.534" class="difflineplus">+      self.rebuildView();</span>
<a href="#l4.535"></a><span id="l4.535" class="difflineplus">+</span>
<a href="#l4.536"></a><span id="l4.536" class="difflineplus">+      // Notify observers that the UI is now ready</span>
<a href="#l4.537"></a><span id="l4.537" class="difflineplus">+      Components.classes[&quot;@mozilla.org/observer-service;1&quot;]</span>
<a href="#l4.538"></a><span id="l4.538" class="difflineplus">+                .getService(Components.interfaces.nsIObserverService)</span>
<a href="#l4.539"></a><span id="l4.539" class="difflineplus">+                .notifyObservers(window, &quot;app-handler-pane-loaded&quot;, null);</span>
<a href="#l4.540"></a><span id="l4.540" class="difflineplus">+    }</span>
<a href="#l4.541"></a><span id="l4.541" class="difflineplus">+    setTimeout(_delayedPaneLoad, 0, this);</span>
<a href="#l4.542"></a><span id="l4.542" class="difflineplus">+  },</span>
<a href="#l4.543"></a><span id="l4.543" class="difflineplus">+</span>
<a href="#l4.544"></a><span id="l4.544" class="difflineplus">+  destroy: function() {</span>
<a href="#l4.545"></a><span id="l4.545" class="difflineplus">+    window.removeEventListener(&quot;unload&quot;, this, false);</span>
<a href="#l4.546"></a><span id="l4.546" class="difflineplus">+    this._prefSvc.removeObserver(PREF_SHOW_PLUGINS_IN_LIST, this);</span>
<a href="#l4.547"></a><span id="l4.547" class="difflineplus">+    this._prefSvc.removeObserver(PREF_HIDE_PLUGINS_WITHOUT_EXTENSIONS, this);</span>
<a href="#l4.548"></a><span id="l4.548" class="difflineplus">+  },</span>
<a href="#l4.549"></a><span id="l4.549" class="difflineplus">+</span>
<a href="#l4.550"></a><span id="l4.550" class="difflineplus">+</span>
<a href="#l4.551"></a><span id="l4.551" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.552"></a><span id="l4.552" class="difflineplus">+  // nsISupports</span>
<a href="#l4.553"></a><span id="l4.553" class="difflineplus">+</span>
<a href="#l4.554"></a><span id="l4.554" class="difflineplus">+  QueryInterface: function(aIID) {</span>
<a href="#l4.555"></a><span id="l4.555" class="difflineplus">+    if (aIID.equals(Components.interfaces.nsIObserver) ||</span>
<a href="#l4.556"></a><span id="l4.556" class="difflineplus">+        aIID.equals(Components.interfaces.nsIDOMEventListener ||</span>
<a href="#l4.557"></a><span id="l4.557" class="difflineplus">+        aIID.equals(Components.interfaces.nsISupports)))</span>
<a href="#l4.558"></a><span id="l4.558" class="difflineplus">+      return this;</span>
<a href="#l4.559"></a><span id="l4.559" class="difflineplus">+</span>
<a href="#l4.560"></a><span id="l4.560" class="difflineplus">+    throw Components.results.NS_ERROR_NO_INTERFACE;</span>
<a href="#l4.561"></a><span id="l4.561" class="difflineplus">+  },</span>
<a href="#l4.562"></a><span id="l4.562" class="difflineplus">+</span>
<a href="#l4.563"></a><span id="l4.563" class="difflineplus">+</span>
<a href="#l4.564"></a><span id="l4.564" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.565"></a><span id="l4.565" class="difflineplus">+  // nsIObserver</span>
<a href="#l4.566"></a><span id="l4.566" class="difflineplus">+</span>
<a href="#l4.567"></a><span id="l4.567" class="difflineplus">+  observe: function (aSubject, aTopic, aData) {</span>
<a href="#l4.568"></a><span id="l4.568" class="difflineplus">+    // Rebuild the list when there are changes to preferences that influence</span>
<a href="#l4.569"></a><span id="l4.569" class="difflineplus">+    // whether or not to show certain entries in the list.</span>
<a href="#l4.570"></a><span id="l4.570" class="difflineplus">+    if (aTopic == &quot;nsPref:changed&quot; &amp;&amp; !this._storingAction) {</span>
<a href="#l4.571"></a><span id="l4.571" class="difflineplus">+      // These two prefs alter the list of visible types, so we have to rebuild</span>
<a href="#l4.572"></a><span id="l4.572" class="difflineplus">+      // that list when they change.</span>
<a href="#l4.573"></a><span id="l4.573" class="difflineplus">+      if (aData == PREF_SHOW_PLUGINS_IN_LIST ||</span>
<a href="#l4.574"></a><span id="l4.574" class="difflineplus">+          aData == PREF_HIDE_PLUGINS_WITHOUT_EXTENSIONS) {</span>
<a href="#l4.575"></a><span id="l4.575" class="difflineplus">+        this._rebuildVisibleTypes();</span>
<a href="#l4.576"></a><span id="l4.576" class="difflineplus">+        this._sortVisibleTypes();</span>
<a href="#l4.577"></a><span id="l4.577" class="difflineplus">+      }</span>
<a href="#l4.578"></a><span id="l4.578" class="difflineplus">+</span>
<a href="#l4.579"></a><span id="l4.579" class="difflineplus">+      // All the prefs we observe can affect what we display, so we rebuild</span>
<a href="#l4.580"></a><span id="l4.580" class="difflineplus">+      // the view when any of them changes.</span>
<a href="#l4.581"></a><span id="l4.581" class="difflineplus">+      this.rebuildView();</span>
<a href="#l4.582"></a><span id="l4.582" class="difflineplus">+    }</span>
<a href="#l4.583"></a><span id="l4.583" class="difflineplus">+  },</span>
<a href="#l4.584"></a><span id="l4.584" class="difflineplus">+</span>
<a href="#l4.585"></a><span id="l4.585" class="difflineplus">+</span>
<a href="#l4.586"></a><span id="l4.586" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.587"></a><span id="l4.587" class="difflineplus">+  // nsIDOMEventListener</span>
<a href="#l4.588"></a><span id="l4.588" class="difflineplus">+</span>
<a href="#l4.589"></a><span id="l4.589" class="difflineplus">+  handleEvent: function(aEvent) {</span>
<a href="#l4.590"></a><span id="l4.590" class="difflineplus">+    if (aEvent.type == &quot;unload&quot;)</span>
<a href="#l4.591"></a><span id="l4.591" class="difflineplus">+      this.destroy();</span>
<a href="#l4.592"></a><span id="l4.592" class="difflineplus">+  },</span>
<a href="#l4.593"></a><span id="l4.593" class="difflineplus">+</span>
<a href="#l4.594"></a><span id="l4.594" class="difflineplus">+</span>
<a href="#l4.595"></a><span id="l4.595" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.596"></a><span id="l4.596" class="difflineplus">+  // Composed Model Construction</span>
<a href="#l4.597"></a><span id="l4.597" class="difflineplus">+</span>
<a href="#l4.598"></a><span id="l4.598" class="difflineplus">+  _loadData: function() {</span>
<a href="#l4.599"></a><span id="l4.599" class="difflineplus">+    this._loadPluginHandlers();</span>
<a href="#l4.600"></a><span id="l4.600" class="difflineplus">+    this._loadApplicationHandlers();</span>
<a href="#l4.601"></a><span id="l4.601" class="difflineplus">+  },</span>
<a href="#l4.602"></a><span id="l4.602" class="difflineplus">+</span>
<a href="#l4.603"></a><span id="l4.603" class="difflineplus">+  /**</span>
<a href="#l4.604"></a><span id="l4.604" class="difflineplus">+   * Load the set of handlers defined by plugins.</span>
<a href="#l4.605"></a><span id="l4.605" class="difflineplus">+   *</span>
<a href="#l4.606"></a><span id="l4.606" class="difflineplus">+   * Note: if there's more than one plugin for a given MIME type, we assume</span>
<a href="#l4.607"></a><span id="l4.607" class="difflineplus">+   * the last one is the one that the application will use.  That may not be</span>
<a href="#l4.608"></a><span id="l4.608" class="difflineplus">+   * correct, but it's how we've been doing it for years.</span>
<a href="#l4.609"></a><span id="l4.609" class="difflineplus">+   *</span>
<a href="#l4.610"></a><span id="l4.610" class="difflineplus">+   * Perhaps we should instead query navigator.mimeTypes for the set of types</span>
<a href="#l4.611"></a><span id="l4.611" class="difflineplus">+   * supported by the application and then get the plugin from each MIME type's</span>
<a href="#l4.612"></a><span id="l4.612" class="difflineplus">+   * enabledPlugin property.  But if there's a plugin for a type, we need</span>
<a href="#l4.613"></a><span id="l4.613" class="difflineplus">+   * to know about it even if it isn't enabled, since we're going to give</span>
<a href="#l4.614"></a><span id="l4.614" class="difflineplus">+   * the user an option to enable it.</span>
<a href="#l4.615"></a><span id="l4.615" class="difflineplus">+   *</span>
<a href="#l4.616"></a><span id="l4.616" class="difflineplus">+   * I'll also note that my reading of nsPluginTag::RegisterWithCategoryManager</span>
<a href="#l4.617"></a><span id="l4.617" class="difflineplus">+   * suggests that enabledPlugin is only determined during registration</span>
<a href="#l4.618"></a><span id="l4.618" class="difflineplus">+   * and does not get updated when plugin.disable_full_page_plugin_for_types</span>
<a href="#l4.619"></a><span id="l4.619" class="difflineplus">+   * changes (unless modification of that preference spawns reregistration).</span>
<a href="#l4.620"></a><span id="l4.620" class="difflineplus">+   * So even if we could use enabledPlugin to get the plugin that would be used,</span>
<a href="#l4.621"></a><span id="l4.621" class="difflineplus">+   * we'd still need to check the pref ourselves to find out if it's enabled.</span>
<a href="#l4.622"></a><span id="l4.622" class="difflineplus">+   */</span>
<a href="#l4.623"></a><span id="l4.623" class="difflineplus">+  _loadPluginHandlers: function() {</span>
<a href="#l4.624"></a><span id="l4.624" class="difflineplus">+    for (let i = 0; i &lt; navigator.plugins.length; ++i) {</span>
<a href="#l4.625"></a><span id="l4.625" class="difflineplus">+      let plugin = navigator.plugins[i];</span>
<a href="#l4.626"></a><span id="l4.626" class="difflineplus">+      for (let j = 0; j &lt; plugin.length; ++j) {</span>
<a href="#l4.627"></a><span id="l4.627" class="difflineplus">+        let type = plugin[j].type;</span>
<a href="#l4.628"></a><span id="l4.628" class="difflineplus">+</span>
<a href="#l4.629"></a><span id="l4.629" class="difflineplus">+        let handlerInfoWrapper;</span>
<a href="#l4.630"></a><span id="l4.630" class="difflineplus">+        if (type in this._handledTypes)</span>
<a href="#l4.631"></a><span id="l4.631" class="difflineplus">+          handlerInfoWrapper = this._handledTypes[type];</span>
<a href="#l4.632"></a><span id="l4.632" class="difflineplus">+        else {</span>
<a href="#l4.633"></a><span id="l4.633" class="difflineplus">+          let wrappedHandlerInfo =</span>
<a href="#l4.634"></a><span id="l4.634" class="difflineplus">+            this._mimeSvc.getFromTypeAndExtension(type, null);</span>
<a href="#l4.635"></a><span id="l4.635" class="difflineplus">+          handlerInfoWrapper = new HandlerInfoWrapper(type, wrappedHandlerInfo);</span>
<a href="#l4.636"></a><span id="l4.636" class="difflineplus">+          handlerInfoWrapper.handledOnlyByPlugin = true;</span>
<a href="#l4.637"></a><span id="l4.637" class="difflineplus">+          this._handledTypes[type] = handlerInfoWrapper;</span>
<a href="#l4.638"></a><span id="l4.638" class="difflineplus">+        }</span>
<a href="#l4.639"></a><span id="l4.639" class="difflineplus">+</span>
<a href="#l4.640"></a><span id="l4.640" class="difflineplus">+        handlerInfoWrapper.plugin = plugin;</span>
<a href="#l4.641"></a><span id="l4.641" class="difflineplus">+      }</span>
<a href="#l4.642"></a><span id="l4.642" class="difflineplus">+    }</span>
<a href="#l4.643"></a><span id="l4.643" class="difflineplus">+  },</span>
<a href="#l4.644"></a><span id="l4.644" class="difflineplus">+</span>
<a href="#l4.645"></a><span id="l4.645" class="difflineplus">+  /**</span>
<a href="#l4.646"></a><span id="l4.646" class="difflineplus">+   * Load the set of handlers defined by the application datastore.</span>
<a href="#l4.647"></a><span id="l4.647" class="difflineplus">+   */</span>
<a href="#l4.648"></a><span id="l4.648" class="difflineplus">+  _loadApplicationHandlers: function() {</span>
<a href="#l4.649"></a><span id="l4.649" class="difflineplus">+    var wrappedHandlerInfos = this._handlerSvc.enumerate();</span>
<a href="#l4.650"></a><span id="l4.650" class="difflineplus">+    while (wrappedHandlerInfos.hasMoreElements()) {</span>
<a href="#l4.651"></a><span id="l4.651" class="difflineplus">+      let wrappedHandlerInfo =</span>
<a href="#l4.652"></a><span id="l4.652" class="difflineplus">+        wrappedHandlerInfos.getNext().QueryInterface(Components.interfaces.nsIHandlerInfo);</span>
<a href="#l4.653"></a><span id="l4.653" class="difflineplus">+      let type = wrappedHandlerInfo.type;</span>
<a href="#l4.654"></a><span id="l4.654" class="difflineplus">+</span>
<a href="#l4.655"></a><span id="l4.655" class="difflineplus">+      let handlerInfoWrapper;</span>
<a href="#l4.656"></a><span id="l4.656" class="difflineplus">+      if (type in this._handledTypes) {</span>
<a href="#l4.657"></a><span id="l4.657" class="difflineplus">+        handlerInfoWrapper = this._handledTypes[type];</span>
<a href="#l4.658"></a><span id="l4.658" class="difflineplus">+      }</span>
<a href="#l4.659"></a><span id="l4.659" class="difflineplus">+      else {</span>
<a href="#l4.660"></a><span id="l4.660" class="difflineplus">+        handlerInfoWrapper = new HandlerInfoWrapper(type, wrappedHandlerInfo);</span>
<a href="#l4.661"></a><span id="l4.661" class="difflineplus">+        this._handledTypes[type] = handlerInfoWrapper;</span>
<a href="#l4.662"></a><span id="l4.662" class="difflineplus">+      }</span>
<a href="#l4.663"></a><span id="l4.663" class="difflineplus">+</span>
<a href="#l4.664"></a><span id="l4.664" class="difflineplus">+      handlerInfoWrapper.handledOnlyByPlugin = false;</span>
<a href="#l4.665"></a><span id="l4.665" class="difflineplus">+    }</span>
<a href="#l4.666"></a><span id="l4.666" class="difflineplus">+  },</span>
<a href="#l4.667"></a><span id="l4.667" class="difflineplus">+</span>
<a href="#l4.668"></a><span id="l4.668" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.669"></a><span id="l4.669" class="difflineplus">+  // View Construction</span>
<a href="#l4.670"></a><span id="l4.670" class="difflineplus">+</span>
<a href="#l4.671"></a><span id="l4.671" class="difflineplus">+  _rebuildVisibleTypes: function() {</span>
<a href="#l4.672"></a><span id="l4.672" class="difflineplus">+    // Reset the list of visible types and the visible type description counts.</span>
<a href="#l4.673"></a><span id="l4.673" class="difflineplus">+    this._visibleTypes = [];</span>
<a href="#l4.674"></a><span id="l4.674" class="difflineplus">+    this._visibleTypeDescriptionCount = [];</span>
<a href="#l4.675"></a><span id="l4.675" class="difflineplus">+</span>
<a href="#l4.676"></a><span id="l4.676" class="difflineplus">+    // Get the preferences that help determine what types to show.</span>
<a href="#l4.677"></a><span id="l4.677" class="difflineplus">+    var showPlugins = this._prefSvc.getBoolPref(PREF_SHOW_PLUGINS_IN_LIST);</span>
<a href="#l4.678"></a><span id="l4.678" class="difflineplus">+    var hidePluginsWithoutExtensions =</span>
<a href="#l4.679"></a><span id="l4.679" class="difflineplus">+      this._prefSvc.getBoolPref(PREF_HIDE_PLUGINS_WITHOUT_EXTENSIONS);</span>
<a href="#l4.680"></a><span id="l4.680" class="difflineplus">+</span>
<a href="#l4.681"></a><span id="l4.681" class="difflineplus">+    for (let type in this._handledTypes) {</span>
<a href="#l4.682"></a><span id="l4.682" class="difflineplus">+      let handlerInfo = this._handledTypes[type];</span>
<a href="#l4.683"></a><span id="l4.683" class="difflineplus">+</span>
<a href="#l4.684"></a><span id="l4.684" class="difflineplus">+      // Hide plugins without associated extensions if so prefed so we don't</span>
<a href="#l4.685"></a><span id="l4.685" class="difflineplus">+      // show a whole bunch of obscure types handled by plugins on Mac.</span>
<a href="#l4.686"></a><span id="l4.686" class="difflineplus">+      // Note: though protocol types don't have extensions, we still show them;</span>
<a href="#l4.687"></a><span id="l4.687" class="difflineplus">+      // the pref is only meant to be applied to MIME types, since plugins are</span>
<a href="#l4.688"></a><span id="l4.688" class="difflineplus">+      // only associated with MIME types.</span>
<a href="#l4.689"></a><span id="l4.689" class="difflineplus">+      // FIXME: should we also check the &quot;suffixes&quot; property of the plugin?</span>
<a href="#l4.690"></a><span id="l4.690" class="difflineplus">+      // Filed as bug 395135.</span>
<a href="#l4.691"></a><span id="l4.691" class="difflineplus">+      if (hidePluginsWithoutExtensions &amp;&amp; handlerInfo.handledOnlyByPlugin &amp;&amp;</span>
<a href="#l4.692"></a><span id="l4.692" class="difflineplus">+          handlerInfo.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo &amp;&amp;</span>
<a href="#l4.693"></a><span id="l4.693" class="difflineplus">+          !handlerInfo.primaryExtension)</span>
<a href="#l4.694"></a><span id="l4.694" class="difflineplus">+        continue;</span>
<a href="#l4.695"></a><span id="l4.695" class="difflineplus">+</span>
<a href="#l4.696"></a><span id="l4.696" class="difflineplus">+      // Hide types handled only by plugins if so prefed.</span>
<a href="#l4.697"></a><span id="l4.697" class="difflineplus">+      if (handlerInfo.handledOnlyByPlugin &amp;&amp; !showPlugins)</span>
<a href="#l4.698"></a><span id="l4.698" class="difflineplus">+        continue;</span>
<a href="#l4.699"></a><span id="l4.699" class="difflineplus">+</span>
<a href="#l4.700"></a><span id="l4.700" class="difflineplus">+      // We couldn't find any reason to exclude the type, so include it.</span>
<a href="#l4.701"></a><span id="l4.701" class="difflineplus">+      this._visibleTypes.push(handlerInfo);</span>
<a href="#l4.702"></a><span id="l4.702" class="difflineplus">+</span>
<a href="#l4.703"></a><span id="l4.703" class="difflineplus">+      if (handlerInfo.description in this._visibleTypeDescriptionCount)</span>
<a href="#l4.704"></a><span id="l4.704" class="difflineplus">+        this._visibleTypeDescriptionCount[handlerInfo.description]++;</span>
<a href="#l4.705"></a><span id="l4.705" class="difflineplus">+      else</span>
<a href="#l4.706"></a><span id="l4.706" class="difflineplus">+        this._visibleTypeDescriptionCount[handlerInfo.description] = 1;</span>
<a href="#l4.707"></a><span id="l4.707" class="difflineplus">+    }</span>
<a href="#l4.708"></a><span id="l4.708" class="difflineplus">+  },</span>
<a href="#l4.709"></a><span id="l4.709" class="difflineplus">+</span>
<a href="#l4.710"></a><span id="l4.710" class="difflineplus">+  rebuildView: function() {</span>
<a href="#l4.711"></a><span id="l4.711" class="difflineplus">+    // Clear the list of entries.</span>
<a href="#l4.712"></a><span id="l4.712" class="difflineplus">+    while (this._list.childNodes.length &gt; 1)</span>
<a href="#l4.713"></a><span id="l4.713" class="difflineplus">+      this._list.removeChild(this._list.lastChild);</span>
<a href="#l4.714"></a><span id="l4.714" class="difflineplus">+</span>
<a href="#l4.715"></a><span id="l4.715" class="difflineplus">+    var visibleTypes = this._visibleTypes;</span>
<a href="#l4.716"></a><span id="l4.716" class="difflineplus">+</span>
<a href="#l4.717"></a><span id="l4.717" class="difflineplus">+    // If the user is filtering the list, then only show matching types.</span>
<a href="#l4.718"></a><span id="l4.718" class="difflineplus">+    if (this._filter.value)</span>
<a href="#l4.719"></a><span id="l4.719" class="difflineplus">+      visibleTypes = visibleTypes.filter(this._matchesFilter, this);</span>
<a href="#l4.720"></a><span id="l4.720" class="difflineplus">+</span>
<a href="#l4.721"></a><span id="l4.721" class="difflineplus">+    for each (let visibleType in visibleTypes) {</span>
<a href="#l4.722"></a><span id="l4.722" class="difflineplus">+      let item = document.createElement(&quot;richlistitem&quot;);</span>
<a href="#l4.723"></a><span id="l4.723" class="difflineplus">+      item.setAttribute(&quot;type&quot;, visibleType.type);</span>
<a href="#l4.724"></a><span id="l4.724" class="difflineplus">+      item.setAttribute(&quot;typeDescription&quot;, this._describeType(visibleType));</span>
<a href="#l4.725"></a><span id="l4.725" class="difflineplus">+      if (visibleType.smallIcon)</span>
<a href="#l4.726"></a><span id="l4.726" class="difflineplus">+        item.setAttribute(&quot;typeIcon&quot;, visibleType.smallIcon);</span>
<a href="#l4.727"></a><span id="l4.727" class="difflineplus">+      item.setAttribute(&quot;actionDescription&quot;,</span>
<a href="#l4.728"></a><span id="l4.728" class="difflineplus">+                        this._describePreferredAction(visibleType));</span>
<a href="#l4.729"></a><span id="l4.729" class="difflineplus">+</span>
<a href="#l4.730"></a><span id="l4.730" class="difflineplus">+      if (!this._setIconClassForPreferredAction(visibleType, item)) {</span>
<a href="#l4.731"></a><span id="l4.731" class="difflineplus">+        item.setAttribute(&quot;actionIcon&quot;,</span>
<a href="#l4.732"></a><span id="l4.732" class="difflineplus">+                          this._getIconURLForPreferredAction(visibleType));</span>
<a href="#l4.733"></a><span id="l4.733" class="difflineplus">+      }</span>
<a href="#l4.734"></a><span id="l4.734" class="difflineplus">+</span>
<a href="#l4.735"></a><span id="l4.735" class="difflineplus">+      this._list.appendChild(item);</span>
<a href="#l4.736"></a><span id="l4.736" class="difflineplus">+    }</span>
<a href="#l4.737"></a><span id="l4.737" class="difflineplus">+</span>
<a href="#l4.738"></a><span id="l4.738" class="difflineplus">+    this._selectLastSelectedType();</span>
<a href="#l4.739"></a><span id="l4.739" class="difflineplus">+  },</span>
<a href="#l4.740"></a><span id="l4.740" class="difflineplus">+</span>
<a href="#l4.741"></a><span id="l4.741" class="difflineplus">+  _matchesFilter: function(aType) {</span>
<a href="#l4.742"></a><span id="l4.742" class="difflineplus">+    var filterValue = this._filter.value.toLowerCase();</span>
<a href="#l4.743"></a><span id="l4.743" class="difflineplus">+    return this._describeType(aType).toLowerCase().indexOf(filterValue) != -1 ||</span>
<a href="#l4.744"></a><span id="l4.744" class="difflineplus">+           this._describePreferredAction(aType).toLowerCase().indexOf(filterValue) != -1;</span>
<a href="#l4.745"></a><span id="l4.745" class="difflineplus">+  },</span>
<a href="#l4.746"></a><span id="l4.746" class="difflineplus">+</span>
<a href="#l4.747"></a><span id="l4.747" class="difflineplus">+  /**</span>
<a href="#l4.748"></a><span id="l4.748" class="difflineplus">+   * Describe, in a human-readable fashion, the type represented by the given</span>
<a href="#l4.749"></a><span id="l4.749" class="difflineplus">+   * handler info object.  Normally this is just the description provided by</span>
<a href="#l4.750"></a><span id="l4.750" class="difflineplus">+   * the info object, but if more than one object presents the same description,</span>
<a href="#l4.751"></a><span id="l4.751" class="difflineplus">+   * then we annotate the duplicate descriptions with the type itself to help</span>
<a href="#l4.752"></a><span id="l4.752" class="difflineplus">+   * users distinguish between those types.</span>
<a href="#l4.753"></a><span id="l4.753" class="difflineplus">+   *</span>
<a href="#l4.754"></a><span id="l4.754" class="difflineplus">+   * @param aHandlerInfo {nsIHandlerInfo} the type being described</span>
<a href="#l4.755"></a><span id="l4.755" class="difflineplus">+   * @return {string} a description of the type</span>
<a href="#l4.756"></a><span id="l4.756" class="difflineplus">+   */</span>
<a href="#l4.757"></a><span id="l4.757" class="difflineplus">+  _describeType: function(aHandlerInfo) {</span>
<a href="#l4.758"></a><span id="l4.758" class="difflineplus">+    if (this._visibleTypeDescriptionCount[aHandlerInfo.description] &gt; 1)</span>
<a href="#l4.759"></a><span id="l4.759" class="difflineplus">+      return this._prefsBundle.getFormattedString(&quot;typeDescriptionWithType&quot;,</span>
<a href="#l4.760"></a><span id="l4.760" class="difflineplus">+                                                  [aHandlerInfo.description,</span>
<a href="#l4.761"></a><span id="l4.761" class="difflineplus">+                                                   aHandlerInfo.type]);</span>
<a href="#l4.762"></a><span id="l4.762" class="difflineplus">+</span>
<a href="#l4.763"></a><span id="l4.763" class="difflineplus">+    return aHandlerInfo.description;</span>
<a href="#l4.764"></a><span id="l4.764" class="difflineplus">+  },</span>
<a href="#l4.765"></a><span id="l4.765" class="difflineplus">+</span>
<a href="#l4.766"></a><span id="l4.766" class="difflineplus">+  /**</span>
<a href="#l4.767"></a><span id="l4.767" class="difflineplus">+   * Describe, in a human-readable fashion, the preferred action to take on</span>
<a href="#l4.768"></a><span id="l4.768" class="difflineplus">+   * the type represented by the given handler info object.</span>
<a href="#l4.769"></a><span id="l4.769" class="difflineplus">+   *</span>
<a href="#l4.770"></a><span id="l4.770" class="difflineplus">+   * XXX Should this be part of the HandlerInfoWrapper interface?  It would</span>
<a href="#l4.771"></a><span id="l4.771" class="difflineplus">+   * violate the separation of model and view, but it might make more sense</span>
<a href="#l4.772"></a><span id="l4.772" class="difflineplus">+   * nonetheless (f.e. it would make sortTypes easier).</span>
<a href="#l4.773"></a><span id="l4.773" class="difflineplus">+   *</span>
<a href="#l4.774"></a><span id="l4.774" class="difflineplus">+   * @param aHandlerInfo {nsIHandlerInfo} the type whose preferred action</span>
<a href="#l4.775"></a><span id="l4.775" class="difflineplus">+   *                                      is being described</span>
<a href="#l4.776"></a><span id="l4.776" class="difflineplus">+   * @return {string} a description of the action</span>
<a href="#l4.777"></a><span id="l4.777" class="difflineplus">+   */</span>
<a href="#l4.778"></a><span id="l4.778" class="difflineplus">+  _describePreferredAction: function(aHandlerInfo) {</span>
<a href="#l4.779"></a><span id="l4.779" class="difflineplus">+    // alwaysAskBeforeHandling overrides the preferred action, so if that flag</span>
<a href="#l4.780"></a><span id="l4.780" class="difflineplus">+    // is set, then describe that behavior instead.  For most types, this is</span>
<a href="#l4.781"></a><span id="l4.781" class="difflineplus">+    // the &quot;alwaysAsk&quot; string, but for the feed type we show something special.</span>
<a href="#l4.782"></a><span id="l4.782" class="difflineplus">+    if (aHandlerInfo.alwaysAskBeforeHandling)</span>
<a href="#l4.783"></a><span id="l4.783" class="difflineplus">+        return this._prefsBundle.getString(&quot;alwaysAsk&quot;);</span>
<a href="#l4.784"></a><span id="l4.784" class="difflineplus">+</span>
<a href="#l4.785"></a><span id="l4.785" class="difflineplus">+    switch (aHandlerInfo.preferredAction) {</span>
<a href="#l4.786"></a><span id="l4.786" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.saveToDisk:</span>
<a href="#l4.787"></a><span id="l4.787" class="difflineplus">+        return this._prefsBundle.getString(&quot;saveFile&quot;);</span>
<a href="#l4.788"></a><span id="l4.788" class="difflineplus">+</span>
<a href="#l4.789"></a><span id="l4.789" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.useHelperApp:</span>
<a href="#l4.790"></a><span id="l4.790" class="difflineplus">+        var preferredApp = aHandlerInfo.preferredApplicationHandler;</span>
<a href="#l4.791"></a><span id="l4.791" class="difflineplus">+        var name;</span>
<a href="#l4.792"></a><span id="l4.792" class="difflineplus">+        if (preferredApp instanceof Components.interfaces.nsILocalHandlerApp)</span>
<a href="#l4.793"></a><span id="l4.793" class="difflineplus">+          name = getDisplayNameForFile(preferredApp.executable);</span>
<a href="#l4.794"></a><span id="l4.794" class="difflineplus">+        else</span>
<a href="#l4.795"></a><span id="l4.795" class="difflineplus">+          name = preferredApp.name;</span>
<a href="#l4.796"></a><span id="l4.796" class="difflineplus">+        return this._prefsBundle.getFormattedString(&quot;useApp&quot;, [name]);</span>
<a href="#l4.797"></a><span id="l4.797" class="difflineplus">+</span>
<a href="#l4.798"></a><span id="l4.798" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.handleInternally:</span>
<a href="#l4.799"></a><span id="l4.799" class="difflineplus">+        // For other types, handleInternally looks like either useHelperApp</span>
<a href="#l4.800"></a><span id="l4.800" class="difflineplus">+        // or useSystemDefault depending on whether or not there's a preferred</span>
<a href="#l4.801"></a><span id="l4.801" class="difflineplus">+        // handler app.</span>
<a href="#l4.802"></a><span id="l4.802" class="difflineplus">+        if (this.isValidHandlerApp(aHandlerInfo.preferredApplicationHandler))</span>
<a href="#l4.803"></a><span id="l4.803" class="difflineplus">+          return aHandlerInfo.preferredApplicationHandler.name;</span>
<a href="#l4.804"></a><span id="l4.804" class="difflineplus">+</span>
<a href="#l4.805"></a><span id="l4.805" class="difflineplus">+        return aHandlerInfo.defaultDescription;</span>
<a href="#l4.806"></a><span id="l4.806" class="difflineplus">+</span>
<a href="#l4.807"></a><span id="l4.807" class="difflineplus">+        // XXX Why don't we say the app will handle the type internally?</span>
<a href="#l4.808"></a><span id="l4.808" class="difflineplus">+        // Is it because the app can't actually do that?  But if that's true,</span>
<a href="#l4.809"></a><span id="l4.809" class="difflineplus">+        // then why would a preferredAction ever get set to this value</span>
<a href="#l4.810"></a><span id="l4.810" class="difflineplus">+        // in the first place?</span>
<a href="#l4.811"></a><span id="l4.811" class="difflineplus">+</span>
<a href="#l4.812"></a><span id="l4.812" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.useSystemDefault:</span>
<a href="#l4.813"></a><span id="l4.813" class="difflineplus">+        return this._prefsBundle.getFormattedString(&quot;useDefault&quot;,</span>
<a href="#l4.814"></a><span id="l4.814" class="difflineplus">+                                                    [aHandlerInfo.defaultDescription]);</span>
<a href="#l4.815"></a><span id="l4.815" class="difflineplus">+</span>
<a href="#l4.816"></a><span id="l4.816" class="difflineplus">+      case kActionUsePlugin:</span>
<a href="#l4.817"></a><span id="l4.817" class="difflineplus">+        return this._prefsBundle.getFormattedString(&quot;usePluginIn&quot;,</span>
<a href="#l4.818"></a><span id="l4.818" class="difflineplus">+                                                    [aHandlerInfo.plugin.name,</span>
<a href="#l4.819"></a><span id="l4.819" class="difflineplus">+                                                     this._brandShortName]);</span>
<a href="#l4.820"></a><span id="l4.820" class="difflineplus">+    }</span>
<a href="#l4.821"></a><span id="l4.821" class="difflineplus">+  },</span>
<a href="#l4.822"></a><span id="l4.822" class="difflineplus">+</span>
<a href="#l4.823"></a><span id="l4.823" class="difflineplus">+  _selectLastSelectedType: function() {</span>
<a href="#l4.824"></a><span id="l4.824" class="difflineplus">+    // If the list is disabled by the pref.downloads.disable_button.edit_actions</span>
<a href="#l4.825"></a><span id="l4.825" class="difflineplus">+    // preference being locked, then don't select the type, as that would cause</span>
<a href="#l4.826"></a><span id="l4.826" class="difflineplus">+    // it to appear selected, with a different background and an actions menu</span>
<a href="#l4.827"></a><span id="l4.827" class="difflineplus">+    // that makes it seem like you can choose an action for the type.</span>
<a href="#l4.828"></a><span id="l4.828" class="difflineplus">+    if (this._list.disabled)</span>
<a href="#l4.829"></a><span id="l4.829" class="difflineplus">+      return;</span>
<a href="#l4.830"></a><span id="l4.830" class="difflineplus">+</span>
<a href="#l4.831"></a><span id="l4.831" class="difflineplus">+    var lastSelectedType = this._list.getAttribute(&quot;lastSelectedType&quot;);</span>
<a href="#l4.832"></a><span id="l4.832" class="difflineplus">+    if (!lastSelectedType)</span>
<a href="#l4.833"></a><span id="l4.833" class="difflineplus">+      return;</span>
<a href="#l4.834"></a><span id="l4.834" class="difflineplus">+</span>
<a href="#l4.835"></a><span id="l4.835" class="difflineplus">+    var item = this._list.getElementsByAttribute(&quot;type&quot;, lastSelectedType)[0];</span>
<a href="#l4.836"></a><span id="l4.836" class="difflineplus">+    if (!item)</span>
<a href="#l4.837"></a><span id="l4.837" class="difflineplus">+      return;</span>
<a href="#l4.838"></a><span id="l4.838" class="difflineplus">+</span>
<a href="#l4.839"></a><span id="l4.839" class="difflineplus">+    this._list.selectedItem = item;</span>
<a href="#l4.840"></a><span id="l4.840" class="difflineplus">+  },</span>
<a href="#l4.841"></a><span id="l4.841" class="difflineplus">+</span>
<a href="#l4.842"></a><span id="l4.842" class="difflineplus">+  /**</span>
<a href="#l4.843"></a><span id="l4.843" class="difflineplus">+   * Whether or not the given handler app is valid.</span>
<a href="#l4.844"></a><span id="l4.844" class="difflineplus">+   * @param aHandlerApp {nsIHandlerApp} the handler app in question</span>
<a href="#l4.845"></a><span id="l4.845" class="difflineplus">+   * @return {boolean} whether or not it's valid</span>
<a href="#l4.846"></a><span id="l4.846" class="difflineplus">+   */</span>
<a href="#l4.847"></a><span id="l4.847" class="difflineplus">+  isValidHandlerApp: function(aHandlerApp) {</span>
<a href="#l4.848"></a><span id="l4.848" class="difflineplus">+    if (!aHandlerApp)</span>
<a href="#l4.849"></a><span id="l4.849" class="difflineplus">+      return false;</span>
<a href="#l4.850"></a><span id="l4.850" class="difflineplus">+</span>
<a href="#l4.851"></a><span id="l4.851" class="difflineplus">+    if (aHandlerApp instanceof Components.interfaces.nsILocalHandlerApp)</span>
<a href="#l4.852"></a><span id="l4.852" class="difflineplus">+      return this._isValidHandlerExecutable(aHandlerApp.executable);</span>
<a href="#l4.853"></a><span id="l4.853" class="difflineplus">+</span>
<a href="#l4.854"></a><span id="l4.854" class="difflineplus">+    if (aHandlerApp instanceof Components.interfaces.nsIWebHandlerApp)</span>
<a href="#l4.855"></a><span id="l4.855" class="difflineplus">+      return aHandlerApp.uriTemplate;</span>
<a href="#l4.856"></a><span id="l4.856" class="difflineplus">+</span>
<a href="#l4.857"></a><span id="l4.857" class="difflineplus">+    if (aHandlerApp instanceof Components.interfaces.nsIWebContentHandlerInfo)</span>
<a href="#l4.858"></a><span id="l4.858" class="difflineplus">+      return aHandlerApp.uri;</span>
<a href="#l4.859"></a><span id="l4.859" class="difflineplus">+</span>
<a href="#l4.860"></a><span id="l4.860" class="difflineplus">+    return false;</span>
<a href="#l4.861"></a><span id="l4.861" class="difflineplus">+  },</span>
<a href="#l4.862"></a><span id="l4.862" class="difflineplus">+</span>
<a href="#l4.863"></a><span id="l4.863" class="difflineplus">+  _isValidHandlerExecutable: function(aExecutable) {</span>
<a href="#l4.864"></a><span id="l4.864" class="difflineplus">+    return aExecutable &amp;&amp;</span>
<a href="#l4.865"></a><span id="l4.865" class="difflineplus">+           aExecutable.exists() &amp;&amp;</span>
<a href="#l4.866"></a><span id="l4.866" class="difflineplus">+           aExecutable.isExecutable() &amp;&amp;</span>
<a href="#l4.867"></a><span id="l4.867" class="difflineplus">+// XXXben - we need to compare this with the running instance executable</span>
<a href="#l4.868"></a><span id="l4.868" class="difflineplus">+//          just don't know how to do that via script...</span>
<a href="#l4.869"></a><span id="l4.869" class="difflineplus">+// XXXmano TBD: can probably add this to nsIShellService</span>
<a href="#l4.870"></a><span id="l4.870" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l4.871"></a><span id="l4.871" class="difflineplus">+#expand    aExecutable.leafName != &quot;__MOZ_APP_NAME__.exe&quot;;</span>
<a href="#l4.872"></a><span id="l4.872" class="difflineplus">+#else</span>
<a href="#l4.873"></a><span id="l4.873" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l4.874"></a><span id="l4.874" class="difflineplus">+#expand    aExecutable.leafName != &quot;__MOZ_APP_DISPLAYNAME__.app&quot;;</span>
<a href="#l4.875"></a><span id="l4.875" class="difflineplus">+#else</span>
<a href="#l4.876"></a><span id="l4.876" class="difflineplus">+#expand    aExecutable.leafName != &quot;__MOZ_APP_NAME__-bin&quot;;</span>
<a href="#l4.877"></a><span id="l4.877" class="difflineplus">+#endif</span>
<a href="#l4.878"></a><span id="l4.878" class="difflineplus">+#endif</span>
<a href="#l4.879"></a><span id="l4.879" class="difflineplus">+  },</span>
<a href="#l4.880"></a><span id="l4.880" class="difflineplus">+</span>
<a href="#l4.881"></a><span id="l4.881" class="difflineplus">+  /**</span>
<a href="#l4.882"></a><span id="l4.882" class="difflineplus">+   * Rebuild the actions menu for the selected entry.  Gets called by</span>
<a href="#l4.883"></a><span id="l4.883" class="difflineplus">+   * the richlistitem constructor when an entry in the list gets selected.</span>
<a href="#l4.884"></a><span id="l4.884" class="difflineplus">+   */</span>
<a href="#l4.885"></a><span id="l4.885" class="difflineplus">+  rebuildActionsMenu: function() {</span>
<a href="#l4.886"></a><span id="l4.886" class="difflineplus">+    var typeItem = this._list.selectedItem;</span>
<a href="#l4.887"></a><span id="l4.887" class="difflineplus">+    var handlerInfo = this._handledTypes[typeItem.type];</span>
<a href="#l4.888"></a><span id="l4.888" class="difflineplus">+    var menu =</span>
<a href="#l4.889"></a><span id="l4.889" class="difflineplus">+      document.getAnonymousElementByAttribute(typeItem, &quot;class&quot;, &quot;actionsMenu&quot;);</span>
<a href="#l4.890"></a><span id="l4.890" class="difflineplus">+    var menuPopup = menu.menupopup;</span>
<a href="#l4.891"></a><span id="l4.891" class="difflineplus">+</span>
<a href="#l4.892"></a><span id="l4.892" class="difflineplus">+    // Clear out existing items.</span>
<a href="#l4.893"></a><span id="l4.893" class="difflineplus">+    while (menuPopup.hasChildNodes())</span>
<a href="#l4.894"></a><span id="l4.894" class="difflineplus">+      menuPopup.removeChild(menuPopup.lastChild);</span>
<a href="#l4.895"></a><span id="l4.895" class="difflineplus">+</span>
<a href="#l4.896"></a><span id="l4.896" class="difflineplus">+    var askMenuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.897"></a><span id="l4.897" class="difflineplus">+    askMenuItem.setAttribute(&quot;alwaysAsk&quot;, &quot;true&quot;);</span>
<a href="#l4.898"></a><span id="l4.898" class="difflineplus">+    {</span>
<a href="#l4.899"></a><span id="l4.899" class="difflineplus">+      let label = this._prefsBundle.getString(&quot;alwaysAsk&quot;);</span>
<a href="#l4.900"></a><span id="l4.900" class="difflineplus">+      askMenuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l4.901"></a><span id="l4.901" class="difflineplus">+      askMenuItem.setAttribute(&quot;tooltiptext&quot;, label);</span>
<a href="#l4.902"></a><span id="l4.902" class="difflineplus">+      askMenuItem.setAttribute(APP_ICON_ATTR_NAME, &quot;ask&quot;);</span>
<a href="#l4.903"></a><span id="l4.903" class="difflineplus">+      menuPopup.appendChild(askMenuItem);</span>
<a href="#l4.904"></a><span id="l4.904" class="difflineplus">+    }</span>
<a href="#l4.905"></a><span id="l4.905" class="difflineplus">+</span>
<a href="#l4.906"></a><span id="l4.906" class="difflineplus">+    // Create a menu item for saving to disk.</span>
<a href="#l4.907"></a><span id="l4.907" class="difflineplus">+    // Note: this option isn't available to protocol types, since we don't know</span>
<a href="#l4.908"></a><span id="l4.908" class="difflineplus">+    // what it means to save a URL having a certain scheme to disk.</span>
<a href="#l4.909"></a><span id="l4.909" class="difflineplus">+    if ((handlerInfo.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo)) {</span>
<a href="#l4.910"></a><span id="l4.910" class="difflineplus">+      var saveMenuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.911"></a><span id="l4.911" class="difflineplus">+      saveMenuItem.setAttribute(&quot;action&quot;, Components.interfaces.nsIHandlerInfo.saveToDisk);</span>
<a href="#l4.912"></a><span id="l4.912" class="difflineplus">+      let label = this._prefsBundle.getString(&quot;saveFile&quot;);</span>
<a href="#l4.913"></a><span id="l4.913" class="difflineplus">+      saveMenuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l4.914"></a><span id="l4.914" class="difflineplus">+      saveMenuItem.setAttribute(&quot;tooltiptext&quot;, label);</span>
<a href="#l4.915"></a><span id="l4.915" class="difflineplus">+      saveMenuItem.setAttribute(APP_ICON_ATTR_NAME, &quot;save&quot;);</span>
<a href="#l4.916"></a><span id="l4.916" class="difflineplus">+      menuPopup.appendChild(saveMenuItem);</span>
<a href="#l4.917"></a><span id="l4.917" class="difflineplus">+    }</span>
<a href="#l4.918"></a><span id="l4.918" class="difflineplus">+</span>
<a href="#l4.919"></a><span id="l4.919" class="difflineplus">+    // Add a separator to distinguish these items from the helper app items</span>
<a href="#l4.920"></a><span id="l4.920" class="difflineplus">+    // that follow them.</span>
<a href="#l4.921"></a><span id="l4.921" class="difflineplus">+    let menuItem = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l4.922"></a><span id="l4.922" class="difflineplus">+    menuPopup.appendChild(menuItem);</span>
<a href="#l4.923"></a><span id="l4.923" class="difflineplus">+</span>
<a href="#l4.924"></a><span id="l4.924" class="difflineplus">+    // Create a menu item for the OS default application, if any.</span>
<a href="#l4.925"></a><span id="l4.925" class="difflineplus">+    if (handlerInfo.hasDefaultHandler) {</span>
<a href="#l4.926"></a><span id="l4.926" class="difflineplus">+      var defaultMenuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.927"></a><span id="l4.927" class="difflineplus">+      defaultMenuItem.setAttribute(&quot;action&quot;, Components.interfaces.nsIHandlerInfo.useSystemDefault);</span>
<a href="#l4.928"></a><span id="l4.928" class="difflineplus">+      let label = this._prefsBundle.getFormattedString(&quot;useDefault&quot;,</span>
<a href="#l4.929"></a><span id="l4.929" class="difflineplus">+                                                       [handlerInfo.defaultDescription]);</span>
<a href="#l4.930"></a><span id="l4.930" class="difflineplus">+      defaultMenuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l4.931"></a><span id="l4.931" class="difflineplus">+      defaultMenuItem.setAttribute(&quot;tooltiptext&quot;, handlerInfo.defaultDescription);</span>
<a href="#l4.932"></a><span id="l4.932" class="difflineplus">+      defaultMenuItem.setAttribute(&quot;image&quot;, this._getIconURLForSystemDefault(handlerInfo));</span>
<a href="#l4.933"></a><span id="l4.933" class="difflineplus">+</span>
<a href="#l4.934"></a><span id="l4.934" class="difflineplus">+      menuPopup.appendChild(defaultMenuItem);</span>
<a href="#l4.935"></a><span id="l4.935" class="difflineplus">+    }</span>
<a href="#l4.936"></a><span id="l4.936" class="difflineplus">+</span>
<a href="#l4.937"></a><span id="l4.937" class="difflineplus">+    // Create menu items for possible handlers.</span>
<a href="#l4.938"></a><span id="l4.938" class="difflineplus">+    let preferredApp = handlerInfo.preferredApplicationHandler;</span>
<a href="#l4.939"></a><span id="l4.939" class="difflineplus">+    let possibleApps = handlerInfo.possibleApplicationHandlers.enumerate();</span>
<a href="#l4.940"></a><span id="l4.940" class="difflineplus">+    var possibleAppMenuItems = [];</span>
<a href="#l4.941"></a><span id="l4.941" class="difflineplus">+    while (possibleApps.hasMoreElements()) {</span>
<a href="#l4.942"></a><span id="l4.942" class="difflineplus">+      let possibleApp = possibleApps.getNext();</span>
<a href="#l4.943"></a><span id="l4.943" class="difflineplus">+      if (!this.isValidHandlerApp(possibleApp))</span>
<a href="#l4.944"></a><span id="l4.944" class="difflineplus">+        continue;</span>
<a href="#l4.945"></a><span id="l4.945" class="difflineplus">+</span>
<a href="#l4.946"></a><span id="l4.946" class="difflineplus">+      let menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.947"></a><span id="l4.947" class="difflineplus">+      menuItem.setAttribute(&quot;action&quot;, Components.interfaces.nsIHandlerInfo.useHelperApp);</span>
<a href="#l4.948"></a><span id="l4.948" class="difflineplus">+      let label;</span>
<a href="#l4.949"></a><span id="l4.949" class="difflineplus">+      if (possibleApp instanceof Components.interfaces.nsILocalHandlerApp)</span>
<a href="#l4.950"></a><span id="l4.950" class="difflineplus">+        label = getDisplayNameForFile(possibleApp.executable);</span>
<a href="#l4.951"></a><span id="l4.951" class="difflineplus">+      else</span>
<a href="#l4.952"></a><span id="l4.952" class="difflineplus">+        label = possibleApp.name;</span>
<a href="#l4.953"></a><span id="l4.953" class="difflineplus">+      label = this._prefsBundle.getFormattedString(&quot;useApp&quot;, [label]);</span>
<a href="#l4.954"></a><span id="l4.954" class="difflineplus">+      menuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l4.955"></a><span id="l4.955" class="difflineplus">+      menuItem.setAttribute(&quot;tooltiptext&quot;, label);</span>
<a href="#l4.956"></a><span id="l4.956" class="difflineplus">+      menuItem.setAttribute(&quot;image&quot;, this._getIconURLForHandlerApp(possibleApp));</span>
<a href="#l4.957"></a><span id="l4.957" class="difflineplus">+</span>
<a href="#l4.958"></a><span id="l4.958" class="difflineplus">+      // Attach the handler app object to the menu item so we can use it</span>
<a href="#l4.959"></a><span id="l4.959" class="difflineplus">+      // to make changes to the datastore when the user selects the item.</span>
<a href="#l4.960"></a><span id="l4.960" class="difflineplus">+      menuItem.handlerApp = possibleApp;</span>
<a href="#l4.961"></a><span id="l4.961" class="difflineplus">+</span>
<a href="#l4.962"></a><span id="l4.962" class="difflineplus">+      menuPopup.appendChild(menuItem);</span>
<a href="#l4.963"></a><span id="l4.963" class="difflineplus">+      possibleAppMenuItems.push(menuItem);</span>
<a href="#l4.964"></a><span id="l4.964" class="difflineplus">+    }</span>
<a href="#l4.965"></a><span id="l4.965" class="difflineplus">+</span>
<a href="#l4.966"></a><span id="l4.966" class="difflineplus">+    // Create a menu item for the plugin.</span>
<a href="#l4.967"></a><span id="l4.967" class="difflineplus">+    if (handlerInfo.plugin) {</span>
<a href="#l4.968"></a><span id="l4.968" class="difflineplus">+      var pluginMenuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.969"></a><span id="l4.969" class="difflineplus">+      pluginMenuItem.setAttribute(&quot;action&quot;, kActionUsePlugin);</span>
<a href="#l4.970"></a><span id="l4.970" class="difflineplus">+      let label = this._prefsBundle.getFormattedString(&quot;usePluginIn&quot;,</span>
<a href="#l4.971"></a><span id="l4.971" class="difflineplus">+                                                       [handlerInfo.plugin.name,</span>
<a href="#l4.972"></a><span id="l4.972" class="difflineplus">+                                                        this._brandShortName]);</span>
<a href="#l4.973"></a><span id="l4.973" class="difflineplus">+      pluginMenuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l4.974"></a><span id="l4.974" class="difflineplus">+      pluginMenuItem.setAttribute(&quot;tooltiptext&quot;, label);</span>
<a href="#l4.975"></a><span id="l4.975" class="difflineplus">+      pluginMenuItem.setAttribute(APP_ICON_ATTR_NAME, &quot;plugin&quot;);</span>
<a href="#l4.976"></a><span id="l4.976" class="difflineplus">+      menuPopup.appendChild(pluginMenuItem);</span>
<a href="#l4.977"></a><span id="l4.977" class="difflineplus">+    }</span>
<a href="#l4.978"></a><span id="l4.978" class="difflineplus">+</span>
<a href="#l4.979"></a><span id="l4.979" class="difflineplus">+    // Create a menu item for selecting a local application.</span>
<a href="#l4.980"></a><span id="l4.980" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l4.981"></a><span id="l4.981" class="difflineplus">+    // On Windows, selecting an application to open another application</span>
<a href="#l4.982"></a><span id="l4.982" class="difflineplus">+    // would be meaningless so we special case executables.</span>
<a href="#l4.983"></a><span id="l4.983" class="difflineplus">+    var executableType = Components.classes[&quot;@mozilla.org/mime;1&quot;]</span>
<a href="#l4.984"></a><span id="l4.984" class="difflineplus">+                                   .getService(Components.interfaces.nsIMIMEService)</span>
<a href="#l4.985"></a><span id="l4.985" class="difflineplus">+                                   .getTypeFromExtension(&quot;exe&quot;);</span>
<a href="#l4.986"></a><span id="l4.986" class="difflineplus">+    if (handlerInfo.type != executableType)</span>
<a href="#l4.987"></a><span id="l4.987" class="difflineplus">+#endif</span>
<a href="#l4.988"></a><span id="l4.988" class="difflineplus">+    {</span>
<a href="#l4.989"></a><span id="l4.989" class="difflineplus">+      let menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.990"></a><span id="l4.990" class="difflineplus">+      menuItem.setAttribute(&quot;oncommand&quot;, &quot;gApplicationsPane.chooseApp(event)&quot;);</span>
<a href="#l4.991"></a><span id="l4.991" class="difflineplus">+      let label = this._prefsBundle.getString(&quot;useOtherApp&quot;);</span>
<a href="#l4.992"></a><span id="l4.992" class="difflineplus">+      menuItem.setAttribute(&quot;label&quot;, label);</span>
<a href="#l4.993"></a><span id="l4.993" class="difflineplus">+      menuItem.setAttribute(&quot;tooltiptext&quot;, label);</span>
<a href="#l4.994"></a><span id="l4.994" class="difflineplus">+      menuPopup.appendChild(menuItem);</span>
<a href="#l4.995"></a><span id="l4.995" class="difflineplus">+    }</span>
<a href="#l4.996"></a><span id="l4.996" class="difflineplus">+</span>
<a href="#l4.997"></a><span id="l4.997" class="difflineplus">+    // Create a menu item for managing applications.</span>
<a href="#l4.998"></a><span id="l4.998" class="difflineplus">+    if (possibleAppMenuItems.length) {</span>
<a href="#l4.999"></a><span id="l4.999" class="difflineplus">+      let menuItem = document.createElement(&quot;menuseparator&quot;);</span>
<a href="#l4.1000"></a><span id="l4.1000" class="difflineplus">+      menuPopup.appendChild(menuItem);</span>
<a href="#l4.1001"></a><span id="l4.1001" class="difflineplus">+      menuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l4.1002"></a><span id="l4.1002" class="difflineplus">+      menuItem.setAttribute(&quot;oncommand&quot;, &quot;gApplicationsPane.manageApp(event)&quot;);</span>
<a href="#l4.1003"></a><span id="l4.1003" class="difflineplus">+      menuItem.setAttribute(&quot;label&quot;, this._prefsBundle.getString(&quot;manageApp&quot;));</span>
<a href="#l4.1004"></a><span id="l4.1004" class="difflineplus">+      menuPopup.appendChild(menuItem);</span>
<a href="#l4.1005"></a><span id="l4.1005" class="difflineplus">+    }</span>
<a href="#l4.1006"></a><span id="l4.1006" class="difflineplus">+</span>
<a href="#l4.1007"></a><span id="l4.1007" class="difflineplus">+    // Select the item corresponding to the preferred action.  If the always</span>
<a href="#l4.1008"></a><span id="l4.1008" class="difflineplus">+    // ask flag is set, it overrides the preferred action.  Otherwise we pick</span>
<a href="#l4.1009"></a><span id="l4.1009" class="difflineplus">+    // the item identified by the preferred action (when the preferred action</span>
<a href="#l4.1010"></a><span id="l4.1010" class="difflineplus">+    // is to use a helper app, we have to pick the specific helper app item).</span>
<a href="#l4.1011"></a><span id="l4.1011" class="difflineplus">+    if (handlerInfo.alwaysAskBeforeHandling)</span>
<a href="#l4.1012"></a><span id="l4.1012" class="difflineplus">+      menu.selectedItem = askMenuItem;</span>
<a href="#l4.1013"></a><span id="l4.1013" class="difflineplus">+    else switch (handlerInfo.preferredAction) {</span>
<a href="#l4.1014"></a><span id="l4.1014" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.handleInternally:</span>
<a href="#l4.1015"></a><span id="l4.1015" class="difflineplus">+        menu.selectedItem = internalMenuItem;</span>
<a href="#l4.1016"></a><span id="l4.1016" class="difflineplus">+        break;</span>
<a href="#l4.1017"></a><span id="l4.1017" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.useSystemDefault:</span>
<a href="#l4.1018"></a><span id="l4.1018" class="difflineplus">+        menu.selectedItem = defaultMenuItem;</span>
<a href="#l4.1019"></a><span id="l4.1019" class="difflineplus">+        break;</span>
<a href="#l4.1020"></a><span id="l4.1020" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.useHelperApp:</span>
<a href="#l4.1021"></a><span id="l4.1021" class="difflineplus">+        if (preferredApp)</span>
<a href="#l4.1022"></a><span id="l4.1022" class="difflineplus">+          menu.selectedItem =</span>
<a href="#l4.1023"></a><span id="l4.1023" class="difflineplus">+            possibleAppMenuItems.filter(function(v) v.handlerApp.equals(preferredApp))[0];</span>
<a href="#l4.1024"></a><span id="l4.1024" class="difflineplus">+        break;</span>
<a href="#l4.1025"></a><span id="l4.1025" class="difflineplus">+      case kActionUsePlugin:</span>
<a href="#l4.1026"></a><span id="l4.1026" class="difflineplus">+        menu.selectedItem = pluginMenuItem;</span>
<a href="#l4.1027"></a><span id="l4.1027" class="difflineplus">+        break;</span>
<a href="#l4.1028"></a><span id="l4.1028" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.saveToDisk:</span>
<a href="#l4.1029"></a><span id="l4.1029" class="difflineplus">+        menu.selectedItem = saveMenuItem;</span>
<a href="#l4.1030"></a><span id="l4.1030" class="difflineplus">+        break;</span>
<a href="#l4.1031"></a><span id="l4.1031" class="difflineplus">+    }</span>
<a href="#l4.1032"></a><span id="l4.1032" class="difflineplus">+  },</span>
<a href="#l4.1033"></a><span id="l4.1033" class="difflineplus">+</span>
<a href="#l4.1034"></a><span id="l4.1034" class="difflineplus">+</span>
<a href="#l4.1035"></a><span id="l4.1035" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.1036"></a><span id="l4.1036" class="difflineplus">+  // Sorting &amp; Filtering</span>
<a href="#l4.1037"></a><span id="l4.1037" class="difflineplus">+</span>
<a href="#l4.1038"></a><span id="l4.1038" class="difflineplus">+  _sortColumn: null,</span>
<a href="#l4.1039"></a><span id="l4.1039" class="difflineplus">+</span>
<a href="#l4.1040"></a><span id="l4.1040" class="difflineplus">+  /**</span>
<a href="#l4.1041"></a><span id="l4.1041" class="difflineplus">+   * Sort the list when the user clicks on a column header.</span>
<a href="#l4.1042"></a><span id="l4.1042" class="difflineplus">+   */</span>
<a href="#l4.1043"></a><span id="l4.1043" class="difflineplus">+  sort: function (event) {</span>
<a href="#l4.1044"></a><span id="l4.1044" class="difflineplus">+    var column = event.target;</span>
<a href="#l4.1045"></a><span id="l4.1045" class="difflineplus">+</span>
<a href="#l4.1046"></a><span id="l4.1046" class="difflineplus">+    // If the user clicked on a new sort column, remove the direction indicator</span>
<a href="#l4.1047"></a><span id="l4.1047" class="difflineplus">+    // from the old column.</span>
<a href="#l4.1048"></a><span id="l4.1048" class="difflineplus">+    if (this._sortColumn &amp;&amp; this._sortColumn != column)</span>
<a href="#l4.1049"></a><span id="l4.1049" class="difflineplus">+      this._sortColumn.removeAttribute(&quot;sortDirection&quot;);</span>
<a href="#l4.1050"></a><span id="l4.1050" class="difflineplus">+</span>
<a href="#l4.1051"></a><span id="l4.1051" class="difflineplus">+    this._sortColumn = column;</span>
<a href="#l4.1052"></a><span id="l4.1052" class="difflineplus">+</span>
<a href="#l4.1053"></a><span id="l4.1053" class="difflineplus">+    // Set (or switch) the sort direction indicator.</span>
<a href="#l4.1054"></a><span id="l4.1054" class="difflineplus">+    if (column.getAttribute(&quot;sortDirection&quot;) == &quot;ascending&quot;)</span>
<a href="#l4.1055"></a><span id="l4.1055" class="difflineplus">+      column.setAttribute(&quot;sortDirection&quot;, &quot;descending&quot;);</span>
<a href="#l4.1056"></a><span id="l4.1056" class="difflineplus">+    else</span>
<a href="#l4.1057"></a><span id="l4.1057" class="difflineplus">+      column.setAttribute(&quot;sortDirection&quot;, &quot;ascending&quot;);</span>
<a href="#l4.1058"></a><span id="l4.1058" class="difflineplus">+</span>
<a href="#l4.1059"></a><span id="l4.1059" class="difflineplus">+    this._sortVisibleTypes();</span>
<a href="#l4.1060"></a><span id="l4.1060" class="difflineplus">+    this.rebuildView();</span>
<a href="#l4.1061"></a><span id="l4.1061" class="difflineplus">+  },</span>
<a href="#l4.1062"></a><span id="l4.1062" class="difflineplus">+</span>
<a href="#l4.1063"></a><span id="l4.1063" class="difflineplus">+  /**</span>
<a href="#l4.1064"></a><span id="l4.1064" class="difflineplus">+   * Sort the list of visible types by the current sort column/direction.</span>
<a href="#l4.1065"></a><span id="l4.1065" class="difflineplus">+   */</span>
<a href="#l4.1066"></a><span id="l4.1066" class="difflineplus">+  _sortVisibleTypes: function() {</span>
<a href="#l4.1067"></a><span id="l4.1067" class="difflineplus">+    if (!this._sortColumn)</span>
<a href="#l4.1068"></a><span id="l4.1068" class="difflineplus">+      return;</span>
<a href="#l4.1069"></a><span id="l4.1069" class="difflineplus">+</span>
<a href="#l4.1070"></a><span id="l4.1070" class="difflineplus">+    var t = this;</span>
<a href="#l4.1071"></a><span id="l4.1071" class="difflineplus">+</span>
<a href="#l4.1072"></a><span id="l4.1072" class="difflineplus">+    function sortByType(a, b) {</span>
<a href="#l4.1073"></a><span id="l4.1073" class="difflineplus">+      return t._describeType(a).toLowerCase()</span>
<a href="#l4.1074"></a><span id="l4.1074" class="difflineplus">+              .localeCompare(t._describeType(b).toLowerCase());</span>
<a href="#l4.1075"></a><span id="l4.1075" class="difflineplus">+    }</span>
<a href="#l4.1076"></a><span id="l4.1076" class="difflineplus">+</span>
<a href="#l4.1077"></a><span id="l4.1077" class="difflineplus">+    function sortByAction(a, b) {</span>
<a href="#l4.1078"></a><span id="l4.1078" class="difflineplus">+      return t._describePreferredAction(a).toLowerCase()</span>
<a href="#l4.1079"></a><span id="l4.1079" class="difflineplus">+              .localeCompare(t._describePreferredAction(b).toLowerCase());</span>
<a href="#l4.1080"></a><span id="l4.1080" class="difflineplus">+    }</span>
<a href="#l4.1081"></a><span id="l4.1081" class="difflineplus">+</span>
<a href="#l4.1082"></a><span id="l4.1082" class="difflineplus">+    switch (this._sortColumn.getAttribute(&quot;value&quot;)) {</span>
<a href="#l4.1083"></a><span id="l4.1083" class="difflineplus">+      case &quot;type&quot;:</span>
<a href="#l4.1084"></a><span id="l4.1084" class="difflineplus">+        this._visibleTypes.sort(sortByType);</span>
<a href="#l4.1085"></a><span id="l4.1085" class="difflineplus">+        break;</span>
<a href="#l4.1086"></a><span id="l4.1086" class="difflineplus">+      case &quot;action&quot;:</span>
<a href="#l4.1087"></a><span id="l4.1087" class="difflineplus">+        this._visibleTypes.sort(sortByAction);</span>
<a href="#l4.1088"></a><span id="l4.1088" class="difflineplus">+        break;</span>
<a href="#l4.1089"></a><span id="l4.1089" class="difflineplus">+    }</span>
<a href="#l4.1090"></a><span id="l4.1090" class="difflineplus">+</span>
<a href="#l4.1091"></a><span id="l4.1091" class="difflineplus">+    if (this._sortColumn.getAttribute(&quot;sortDirection&quot;) == &quot;descending&quot;)</span>
<a href="#l4.1092"></a><span id="l4.1092" class="difflineplus">+      this._visibleTypes.reverse();</span>
<a href="#l4.1093"></a><span id="l4.1093" class="difflineplus">+  },</span>
<a href="#l4.1094"></a><span id="l4.1094" class="difflineplus">+</span>
<a href="#l4.1095"></a><span id="l4.1095" class="difflineplus">+  focusFilterBox: function() {</span>
<a href="#l4.1096"></a><span id="l4.1096" class="difflineplus">+    this._filter.focus();</span>
<a href="#l4.1097"></a><span id="l4.1097" class="difflineplus">+    this._filter.select();</span>
<a href="#l4.1098"></a><span id="l4.1098" class="difflineplus">+  },</span>
<a href="#l4.1099"></a><span id="l4.1099" class="difflineplus">+</span>
<a href="#l4.1100"></a><span id="l4.1100" class="difflineplus">+  //**************************************************************************//</span>
<a href="#l4.1101"></a><span id="l4.1101" class="difflineplus">+  // Changes</span>
<a href="#l4.1102"></a><span id="l4.1102" class="difflineplus">+</span>
<a href="#l4.1103"></a><span id="l4.1103" class="difflineplus">+  onSelectAction: function(aActionItem) {</span>
<a href="#l4.1104"></a><span id="l4.1104" class="difflineplus">+    this._storingAction = true;</span>
<a href="#l4.1105"></a><span id="l4.1105" class="difflineplus">+</span>
<a href="#l4.1106"></a><span id="l4.1106" class="difflineplus">+    try {</span>
<a href="#l4.1107"></a><span id="l4.1107" class="difflineplus">+      this._storeAction(aActionItem);</span>
<a href="#l4.1108"></a><span id="l4.1108" class="difflineplus">+    }</span>
<a href="#l4.1109"></a><span id="l4.1109" class="difflineplus">+    finally {</span>
<a href="#l4.1110"></a><span id="l4.1110" class="difflineplus">+      this._storingAction = false;</span>
<a href="#l4.1111"></a><span id="l4.1111" class="difflineplus">+    }</span>
<a href="#l4.1112"></a><span id="l4.1112" class="difflineplus">+  },</span>
<a href="#l4.1113"></a><span id="l4.1113" class="difflineplus">+</span>
<a href="#l4.1114"></a><span id="l4.1114" class="difflineplus">+  _storeAction: function(aActionItem) {</span>
<a href="#l4.1115"></a><span id="l4.1115" class="difflineplus">+    var typeItem = this._list.selectedItem;</span>
<a href="#l4.1116"></a><span id="l4.1116" class="difflineplus">+    var handlerInfo = this._handledTypes[typeItem.type];</span>
<a href="#l4.1117"></a><span id="l4.1117" class="difflineplus">+</span>
<a href="#l4.1118"></a><span id="l4.1118" class="difflineplus">+    if (aActionItem.hasAttribute(&quot;alwaysAsk&quot;)) {</span>
<a href="#l4.1119"></a><span id="l4.1119" class="difflineplus">+      handlerInfo.alwaysAskBeforeHandling = true;</span>
<a href="#l4.1120"></a><span id="l4.1120" class="difflineplus">+    }</span>
<a href="#l4.1121"></a><span id="l4.1121" class="difflineplus">+    else if (aActionItem.hasAttribute(&quot;action&quot;)) {</span>
<a href="#l4.1122"></a><span id="l4.1122" class="difflineplus">+      let action = parseInt(aActionItem.getAttribute(&quot;action&quot;));</span>
<a href="#l4.1123"></a><span id="l4.1123" class="difflineplus">+</span>
<a href="#l4.1124"></a><span id="l4.1124" class="difflineplus">+      // Set the plugin state if we're enabling or disabling a plugin.</span>
<a href="#l4.1125"></a><span id="l4.1125" class="difflineplus">+      if (action == kActionUsePlugin)</span>
<a href="#l4.1126"></a><span id="l4.1126" class="difflineplus">+        handlerInfo.enablePluginType();</span>
<a href="#l4.1127"></a><span id="l4.1127" class="difflineplus">+      else if (handlerInfo.plugin &amp;&amp; !handlerInfo.isDisabledPluginType)</span>
<a href="#l4.1128"></a><span id="l4.1128" class="difflineplus">+        handlerInfo.disablePluginType();</span>
<a href="#l4.1129"></a><span id="l4.1129" class="difflineplus">+</span>
<a href="#l4.1130"></a><span id="l4.1130" class="difflineplus">+      // Set the preferred application handler.</span>
<a href="#l4.1131"></a><span id="l4.1131" class="difflineplus">+      // We leave the existing preferred app in the list when we set</span>
<a href="#l4.1132"></a><span id="l4.1132" class="difflineplus">+      // the preferred action to something other than useHelperApp so that</span>
<a href="#l4.1133"></a><span id="l4.1133" class="difflineplus">+      // legacy datastores that don't have the preferred app in the list</span>
<a href="#l4.1134"></a><span id="l4.1134" class="difflineplus">+      // of possible apps still include the preferred app in the list of apps</span>
<a href="#l4.1135"></a><span id="l4.1135" class="difflineplus">+      // the user can choose to handle the type.</span>
<a href="#l4.1136"></a><span id="l4.1136" class="difflineplus">+      if (action == Components.interfaces.nsIHandlerInfo.useHelperApp)</span>
<a href="#l4.1137"></a><span id="l4.1137" class="difflineplus">+        handlerInfo.preferredApplicationHandler = aActionItem.handlerApp;</span>
<a href="#l4.1138"></a><span id="l4.1138" class="difflineplus">+</span>
<a href="#l4.1139"></a><span id="l4.1139" class="difflineplus">+      // Set the &quot;always ask&quot; flag.</span>
<a href="#l4.1140"></a><span id="l4.1140" class="difflineplus">+      handlerInfo.alwaysAskBeforeHandling = false;</span>
<a href="#l4.1141"></a><span id="l4.1141" class="difflineplus">+</span>
<a href="#l4.1142"></a><span id="l4.1142" class="difflineplus">+      // Set the preferred action.</span>
<a href="#l4.1143"></a><span id="l4.1143" class="difflineplus">+      handlerInfo.preferredAction = action;</span>
<a href="#l4.1144"></a><span id="l4.1144" class="difflineplus">+    }</span>
<a href="#l4.1145"></a><span id="l4.1145" class="difflineplus">+</span>
<a href="#l4.1146"></a><span id="l4.1146" class="difflineplus">+    handlerInfo.store();</span>
<a href="#l4.1147"></a><span id="l4.1147" class="difflineplus">+</span>
<a href="#l4.1148"></a><span id="l4.1148" class="difflineplus">+    // Make sure the handler info object is flagged to indicate that there is</span>
<a href="#l4.1149"></a><span id="l4.1149" class="difflineplus">+    // now some user configuration for the type.</span>
<a href="#l4.1150"></a><span id="l4.1150" class="difflineplus">+    handlerInfo.handledOnlyByPlugin = false;</span>
<a href="#l4.1151"></a><span id="l4.1151" class="difflineplus">+</span>
<a href="#l4.1152"></a><span id="l4.1152" class="difflineplus">+    // Update the action label and image to reflect the new preferred action.</span>
<a href="#l4.1153"></a><span id="l4.1153" class="difflineplus">+    typeItem.setAttribute(&quot;actionDescription&quot;,</span>
<a href="#l4.1154"></a><span id="l4.1154" class="difflineplus">+                          this._describePreferredAction(handlerInfo));</span>
<a href="#l4.1155"></a><span id="l4.1155" class="difflineplus">+    if (!this._setIconClassForPreferredAction(handlerInfo, typeItem)) {</span>
<a href="#l4.1156"></a><span id="l4.1156" class="difflineplus">+      typeItem.setAttribute(&quot;actionIcon&quot;,</span>
<a href="#l4.1157"></a><span id="l4.1157" class="difflineplus">+                            this._getIconURLForPreferredAction(handlerInfo));</span>
<a href="#l4.1158"></a><span id="l4.1158" class="difflineplus">+    }</span>
<a href="#l4.1159"></a><span id="l4.1159" class="difflineplus">+  },</span>
<a href="#l4.1160"></a><span id="l4.1160" class="difflineplus">+</span>
<a href="#l4.1161"></a><span id="l4.1161" class="difflineplus">+  manageApp: function(aEvent) {</span>
<a href="#l4.1162"></a><span id="l4.1162" class="difflineplus">+    // Don't let the normal &quot;on select action&quot; handler get this event,</span>
<a href="#l4.1163"></a><span id="l4.1163" class="difflineplus">+    // as we handle it specially ourselves.</span>
<a href="#l4.1164"></a><span id="l4.1164" class="difflineplus">+    aEvent.stopPropagation();</span>
<a href="#l4.1165"></a><span id="l4.1165" class="difflineplus">+</span>
<a href="#l4.1166"></a><span id="l4.1166" class="difflineplus">+    var typeItem = this._list.selectedItem;</span>
<a href="#l4.1167"></a><span id="l4.1167" class="difflineplus">+    var handlerInfo = this._handledTypes[typeItem.type];</span>
<a href="#l4.1168"></a><span id="l4.1168" class="difflineplus">+</span>
<a href="#l4.1169"></a><span id="l4.1169" class="difflineplus">+    document.documentElement.openSubDialog(</span>
<a href="#l4.1170"></a><span id="l4.1170" class="difflineplus">+      &quot;chrome://messenger/content/preferences/applicationManager.xul&quot;,</span>
<a href="#l4.1171"></a><span id="l4.1171" class="difflineplus">+      &quot;&quot;, handlerInfo);</span>
<a href="#l4.1172"></a><span id="l4.1172" class="difflineplus">+</span>
<a href="#l4.1173"></a><span id="l4.1173" class="difflineplus">+    // Rebuild the actions menu so that we revert to the previous selection,</span>
<a href="#l4.1174"></a><span id="l4.1174" class="difflineplus">+    // or &quot;Always ask&quot; if the previous default application has been removed</span>
<a href="#l4.1175"></a><span id="l4.1175" class="difflineplus">+    this.rebuildActionsMenu();</span>
<a href="#l4.1176"></a><span id="l4.1176" class="difflineplus">+</span>
<a href="#l4.1177"></a><span id="l4.1177" class="difflineplus">+    // update the richlistitem too. Will be visible when selecting another row</span>
<a href="#l4.1178"></a><span id="l4.1178" class="difflineplus">+    typeItem.setAttribute(&quot;actionDescription&quot;,</span>
<a href="#l4.1179"></a><span id="l4.1179" class="difflineplus">+                          this._describePreferredAction(handlerInfo));</span>
<a href="#l4.1180"></a><span id="l4.1180" class="difflineplus">+    if (!this._setIconClassForPreferredAction(handlerInfo, typeItem)) {</span>
<a href="#l4.1181"></a><span id="l4.1181" class="difflineplus">+      typeItem.setAttribute(&quot;actionIcon&quot;,</span>
<a href="#l4.1182"></a><span id="l4.1182" class="difflineplus">+                            this._getIconURLForPreferredAction(handlerInfo));</span>
<a href="#l4.1183"></a><span id="l4.1183" class="difflineplus">+    }</span>
<a href="#l4.1184"></a><span id="l4.1184" class="difflineplus">+  },</span>
<a href="#l4.1185"></a><span id="l4.1185" class="difflineplus">+</span>
<a href="#l4.1186"></a><span id="l4.1186" class="difflineplus">+  chooseApp: function(aEvent) {</span>
<a href="#l4.1187"></a><span id="l4.1187" class="difflineplus">+    // Don't let the normal &quot;on select action&quot; handler get this event,</span>
<a href="#l4.1188"></a><span id="l4.1188" class="difflineplus">+    // as we handle it specially ourselves.</span>
<a href="#l4.1189"></a><span id="l4.1189" class="difflineplus">+    aEvent.stopPropagation();</span>
<a href="#l4.1190"></a><span id="l4.1190" class="difflineplus">+</span>
<a href="#l4.1191"></a><span id="l4.1191" class="difflineplus">+    var handlerApp;</span>
<a href="#l4.1192"></a><span id="l4.1192" class="difflineplus">+</span>
<a href="#l4.1193"></a><span id="l4.1193" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l4.1194"></a><span id="l4.1194" class="difflineplus">+    var params = {};</span>
<a href="#l4.1195"></a><span id="l4.1195" class="difflineplus">+    var handlerInfo = this._handledTypes[this._list.selectedItem.type];</span>
<a href="#l4.1196"></a><span id="l4.1196" class="difflineplus">+</span>
<a href="#l4.1197"></a><span id="l4.1197" class="difflineplus">+    params.mimeInfo = handlerInfo.wrappedHandlerInfo;</span>
<a href="#l4.1198"></a><span id="l4.1198" class="difflineplus">+</span>
<a href="#l4.1199"></a><span id="l4.1199" class="difflineplus">+    params.title         = this._prefsBundle.getString(&quot;fpTitleChooseApp&quot;);</span>
<a href="#l4.1200"></a><span id="l4.1200" class="difflineplus">+    params.description   = handlerInfo.description;</span>
<a href="#l4.1201"></a><span id="l4.1201" class="difflineplus">+    params.filename      = null;</span>
<a href="#l4.1202"></a><span id="l4.1202" class="difflineplus">+    params.handlerApp    = null;</span>
<a href="#l4.1203"></a><span id="l4.1203" class="difflineplus">+</span>
<a href="#l4.1204"></a><span id="l4.1204" class="difflineplus">+    window.openDialog(&quot;chrome://global/content/appPicker.xul&quot;, null,</span>
<a href="#l4.1205"></a><span id="l4.1205" class="difflineplus">+                      &quot;chrome,modal,centerscreen,titlebar,dialog=yes&quot;,</span>
<a href="#l4.1206"></a><span id="l4.1206" class="difflineplus">+                      params);</span>
<a href="#l4.1207"></a><span id="l4.1207" class="difflineplus">+</span>
<a href="#l4.1208"></a><span id="l4.1208" class="difflineplus">+    if (params.handlerApp &amp;&amp;</span>
<a href="#l4.1209"></a><span id="l4.1209" class="difflineplus">+        params.handlerApp.executable &amp;&amp;</span>
<a href="#l4.1210"></a><span id="l4.1210" class="difflineplus">+        params.handlerApp.executable.isFile()) {</span>
<a href="#l4.1211"></a><span id="l4.1211" class="difflineplus">+      handlerApp = params.handlerApp;</span>
<a href="#l4.1212"></a><span id="l4.1212" class="difflineplus">+</span>
<a href="#l4.1213"></a><span id="l4.1213" class="difflineplus">+      // Add the app to the type's list of possible handlers.</span>
<a href="#l4.1214"></a><span id="l4.1214" class="difflineplus">+      handlerInfo.addPossibleApplicationHandler(handlerApp);</span>
<a href="#l4.1215"></a><span id="l4.1215" class="difflineplus">+    }</span>
<a href="#l4.1216"></a><span id="l4.1216" class="difflineplus">+#else</span>
<a href="#l4.1217"></a><span id="l4.1217" class="difflineplus">+    var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;].createInstance(Components.interfaces.nsIFilePicker);</span>
<a href="#l4.1218"></a><span id="l4.1218" class="difflineplus">+    var winTitle = this._prefsBundle.getString(&quot;fpTitleChooseApp&quot;);</span>
<a href="#l4.1219"></a><span id="l4.1219" class="difflineplus">+    fp.init(window, winTitle, Components.interfaces.nsIFilePicker.modeOpen);</span>
<a href="#l4.1220"></a><span id="l4.1220" class="difflineplus">+    fp.appendFilters(Components.interfaces.nsIFilePicker.filterApps);</span>
<a href="#l4.1221"></a><span id="l4.1221" class="difflineplus">+</span>
<a href="#l4.1222"></a><span id="l4.1222" class="difflineplus">+    // Prompt the user to pick an app.  If they pick one, and it's a valid</span>
<a href="#l4.1223"></a><span id="l4.1223" class="difflineplus">+    // selection, then add it to the list of possible handlers.</span>
<a href="#l4.1224"></a><span id="l4.1224" class="difflineplus">+    if (fp.show() == Components.interfaces.nsIFilePicker.returnOK &amp;&amp; fp.file &amp;&amp;</span>
<a href="#l4.1225"></a><span id="l4.1225" class="difflineplus">+        this._isValidHandlerExecutable(fp.file)) {</span>
<a href="#l4.1226"></a><span id="l4.1226" class="difflineplus">+      handlerApp = Components.classes[&quot;@mozilla.org/uriloader/local-handler-app;1&quot;]</span>
<a href="#l4.1227"></a><span id="l4.1227" class="difflineplus">+                             .createInstance(Components.interfaces.nsILocalHandlerApp);</span>
<a href="#l4.1228"></a><span id="l4.1228" class="difflineplus">+      handlerApp.name = getDisplayNameForFile(fp.file);</span>
<a href="#l4.1229"></a><span id="l4.1229" class="difflineplus">+      handlerApp.executable = fp.file;</span>
<a href="#l4.1230"></a><span id="l4.1230" class="difflineplus">+</span>
<a href="#l4.1231"></a><span id="l4.1231" class="difflineplus">+      // Add the app to the type's list of possible handlers.</span>
<a href="#l4.1232"></a><span id="l4.1232" class="difflineplus">+      let handlerInfo = this._handledTypes[this._list.selectedItem.type];</span>
<a href="#l4.1233"></a><span id="l4.1233" class="difflineplus">+      handlerInfo.addPossibleApplicationHandler(handlerApp);</span>
<a href="#l4.1234"></a><span id="l4.1234" class="difflineplus">+    }</span>
<a href="#l4.1235"></a><span id="l4.1235" class="difflineplus">+#endif</span>
<a href="#l4.1236"></a><span id="l4.1236" class="difflineplus">+</span>
<a href="#l4.1237"></a><span id="l4.1237" class="difflineplus">+    // Rebuild the actions menu whether the user picked an app or canceled.</span>
<a href="#l4.1238"></a><span id="l4.1238" class="difflineplus">+    // If they picked an app, we want to add the app to the menu and select it.</span>
<a href="#l4.1239"></a><span id="l4.1239" class="difflineplus">+    // If they canceled, we want to go back to their previous selection.</span>
<a href="#l4.1240"></a><span id="l4.1240" class="difflineplus">+    this.rebuildActionsMenu();</span>
<a href="#l4.1241"></a><span id="l4.1241" class="difflineplus">+</span>
<a href="#l4.1242"></a><span id="l4.1242" class="difflineplus">+    // If the user picked a new app from the menu, select it.</span>
<a href="#l4.1243"></a><span id="l4.1243" class="difflineplus">+    if (handlerApp) {</span>
<a href="#l4.1244"></a><span id="l4.1244" class="difflineplus">+      let typeItem = this._list.selectedItem;</span>
<a href="#l4.1245"></a><span id="l4.1245" class="difflineplus">+      let actionsMenu =</span>
<a href="#l4.1246"></a><span id="l4.1246" class="difflineplus">+        document.getAnonymousElementByAttribute(typeItem, &quot;class&quot;, &quot;actionsMenu&quot;);</span>
<a href="#l4.1247"></a><span id="l4.1247" class="difflineplus">+      let menuItems = actionsMenu.menupopup.childNodes;</span>
<a href="#l4.1248"></a><span id="l4.1248" class="difflineplus">+      for (let i = 0; i &lt; menuItems.length; i++) {</span>
<a href="#l4.1249"></a><span id="l4.1249" class="difflineplus">+        let menuItem = menuItems[i];</span>
<a href="#l4.1250"></a><span id="l4.1250" class="difflineplus">+        if (menuItem.handlerApp &amp;&amp; menuItem.handlerApp.equals(handlerApp)) {</span>
<a href="#l4.1251"></a><span id="l4.1251" class="difflineplus">+          actionsMenu.selectedIndex = i;</span>
<a href="#l4.1252"></a><span id="l4.1252" class="difflineplus">+          this.onSelectAction(menuItem);</span>
<a href="#l4.1253"></a><span id="l4.1253" class="difflineplus">+          break;</span>
<a href="#l4.1254"></a><span id="l4.1254" class="difflineplus">+        }</span>
<a href="#l4.1255"></a><span id="l4.1255" class="difflineplus">+      }</span>
<a href="#l4.1256"></a><span id="l4.1256" class="difflineplus">+    }</span>
<a href="#l4.1257"></a><span id="l4.1257" class="difflineplus">+  },</span>
<a href="#l4.1258"></a><span id="l4.1258" class="difflineplus">+</span>
<a href="#l4.1259"></a><span id="l4.1259" class="difflineplus">+  // Mark which item in the list was last selected so we can reselect it</span>
<a href="#l4.1260"></a><span id="l4.1260" class="difflineplus">+  // when we rebuild the list or when the user returns to the prefpane.</span>
<a href="#l4.1261"></a><span id="l4.1261" class="difflineplus">+  onSelectionChanged: function() {</span>
<a href="#l4.1262"></a><span id="l4.1262" class="difflineplus">+    if (this._list.selectedItem)</span>
<a href="#l4.1263"></a><span id="l4.1263" class="difflineplus">+      this._list.setAttribute(&quot;lastSelectedType&quot;,</span>
<a href="#l4.1264"></a><span id="l4.1264" class="difflineplus">+                              this._list.selectedItem.getAttribute(&quot;type&quot;));</span>
<a href="#l4.1265"></a><span id="l4.1265" class="difflineplus">+  },</span>
<a href="#l4.1266"></a><span id="l4.1266" class="difflineplus">+</span>
<a href="#l4.1267"></a><span id="l4.1267" class="difflineplus">+  _setIconClassForPreferredAction: function(aHandlerInfo, aElement) {</span>
<a href="#l4.1268"></a><span id="l4.1268" class="difflineplus">+    // If this returns true, the attribute that CSS sniffs for was set to something</span>
<a href="#l4.1269"></a><span id="l4.1269" class="difflineplus">+    // so you shouldn't manually set an icon URI.</span>
<a href="#l4.1270"></a><span id="l4.1270" class="difflineplus">+    // This removes the existing actionIcon attribute if any, even if returning false.</span>
<a href="#l4.1271"></a><span id="l4.1271" class="difflineplus">+    aElement.removeAttribute(&quot;actionIcon&quot;);</span>
<a href="#l4.1272"></a><span id="l4.1272" class="difflineplus">+</span>
<a href="#l4.1273"></a><span id="l4.1273" class="difflineplus">+    if (aHandlerInfo.alwaysAskBeforeHandling) {</span>
<a href="#l4.1274"></a><span id="l4.1274" class="difflineplus">+      aElement.setAttribute(APP_ICON_ATTR_NAME, &quot;ask&quot;);</span>
<a href="#l4.1275"></a><span id="l4.1275" class="difflineplus">+      return true;</span>
<a href="#l4.1276"></a><span id="l4.1276" class="difflineplus">+    }</span>
<a href="#l4.1277"></a><span id="l4.1277" class="difflineplus">+</span>
<a href="#l4.1278"></a><span id="l4.1278" class="difflineplus">+    switch (aHandlerInfo.preferredAction) {</span>
<a href="#l4.1279"></a><span id="l4.1279" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.saveToDisk:</span>
<a href="#l4.1280"></a><span id="l4.1280" class="difflineplus">+        aElement.setAttribute(APP_ICON_ATTR_NAME, &quot;save&quot;);</span>
<a href="#l4.1281"></a><span id="l4.1281" class="difflineplus">+        return true;</span>
<a href="#l4.1282"></a><span id="l4.1282" class="difflineplus">+</span>
<a href="#l4.1283"></a><span id="l4.1283" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.handleInternally:</span>
<a href="#l4.1284"></a><span id="l4.1284" class="difflineplus">+        break;</span>
<a href="#l4.1285"></a><span id="l4.1285" class="difflineplus">+</span>
<a href="#l4.1286"></a><span id="l4.1286" class="difflineplus">+      case kActionUsePlugin:</span>
<a href="#l4.1287"></a><span id="l4.1287" class="difflineplus">+        aElement.setAttribute(APP_ICON_ATTR_NAME, &quot;plugin&quot;);</span>
<a href="#l4.1288"></a><span id="l4.1288" class="difflineplus">+        return true;</span>
<a href="#l4.1289"></a><span id="l4.1289" class="difflineplus">+    }</span>
<a href="#l4.1290"></a><span id="l4.1290" class="difflineplus">+    aElement.removeAttribute(APP_ICON_ATTR_NAME);</span>
<a href="#l4.1291"></a><span id="l4.1291" class="difflineplus">+    return false;</span>
<a href="#l4.1292"></a><span id="l4.1292" class="difflineplus">+  },</span>
<a href="#l4.1293"></a><span id="l4.1293" class="difflineplus">+</span>
<a href="#l4.1294"></a><span id="l4.1294" class="difflineplus">+  _getIconURLForPreferredAction: function(aHandlerInfo) {</span>
<a href="#l4.1295"></a><span id="l4.1295" class="difflineplus">+    switch (aHandlerInfo.preferredAction) {</span>
<a href="#l4.1296"></a><span id="l4.1296" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.useSystemDefault:</span>
<a href="#l4.1297"></a><span id="l4.1297" class="difflineplus">+        return this._getIconURLForSystemDefault(aHandlerInfo);</span>
<a href="#l4.1298"></a><span id="l4.1298" class="difflineplus">+</span>
<a href="#l4.1299"></a><span id="l4.1299" class="difflineplus">+      case Components.interfaces.nsIHandlerInfo.useHelperApp:</span>
<a href="#l4.1300"></a><span id="l4.1300" class="difflineplus">+        let (preferredApp = aHandlerInfo.preferredApplicationHandler) {</span>
<a href="#l4.1301"></a><span id="l4.1301" class="difflineplus">+          if (this.isValidHandlerApp(preferredApp))</span>
<a href="#l4.1302"></a><span id="l4.1302" class="difflineplus">+            return this._getIconURLForHandlerApp(preferredApp);</span>
<a href="#l4.1303"></a><span id="l4.1303" class="difflineplus">+        }</span>
<a href="#l4.1304"></a><span id="l4.1304" class="difflineplus">+        break;</span>
<a href="#l4.1305"></a><span id="l4.1305" class="difflineplus">+</span>
<a href="#l4.1306"></a><span id="l4.1306" class="difflineplus">+      // This should never happen, but if preferredAction is set to some weird</span>
<a href="#l4.1307"></a><span id="l4.1307" class="difflineplus">+      // value, then fall back to the generic application icon.</span>
<a href="#l4.1308"></a><span id="l4.1308" class="difflineplus">+      default:</span>
<a href="#l4.1309"></a><span id="l4.1309" class="difflineplus">+        return ICON_URL_APP;</span>
<a href="#l4.1310"></a><span id="l4.1310" class="difflineplus">+    }</span>
<a href="#l4.1311"></a><span id="l4.1311" class="difflineplus">+  },</span>
<a href="#l4.1312"></a><span id="l4.1312" class="difflineplus">+</span>
<a href="#l4.1313"></a><span id="l4.1313" class="difflineplus">+  _getIconURLForHandlerApp: function(aHandlerApp) {</span>
<a href="#l4.1314"></a><span id="l4.1314" class="difflineplus">+    if (aHandlerApp instanceof Components.interfaces.nsILocalHandlerApp)</span>
<a href="#l4.1315"></a><span id="l4.1315" class="difflineplus">+      return this._getIconURLForFile(aHandlerApp.executable);</span>
<a href="#l4.1316"></a><span id="l4.1316" class="difflineplus">+</span>
<a href="#l4.1317"></a><span id="l4.1317" class="difflineplus">+    if (aHandlerApp instanceof Components.interfaces.nsIWebHandlerApp)</span>
<a href="#l4.1318"></a><span id="l4.1318" class="difflineplus">+      return this._getIconURLForWebApp(aHandlerApp.uriTemplate);</span>
<a href="#l4.1319"></a><span id="l4.1319" class="difflineplus">+</span>
<a href="#l4.1320"></a><span id="l4.1320" class="difflineplus">+    if (aHandlerApp instanceof Components.interfaces.nsIWebContentHandlerInfo)</span>
<a href="#l4.1321"></a><span id="l4.1321" class="difflineplus">+      return this._getIconURLForWebApp(aHandlerApp.uri)</span>
<a href="#l4.1322"></a><span id="l4.1322" class="difflineplus">+</span>
<a href="#l4.1323"></a><span id="l4.1323" class="difflineplus">+    // We know nothing about other kinds of handler apps.</span>
<a href="#l4.1324"></a><span id="l4.1324" class="difflineplus">+    return &quot;&quot;;</span>
<a href="#l4.1325"></a><span id="l4.1325" class="difflineplus">+  },</span>
<a href="#l4.1326"></a><span id="l4.1326" class="difflineplus">+</span>
<a href="#l4.1327"></a><span id="l4.1327" class="difflineplus">+  _getIconURLForFile: function(aFile) {</span>
<a href="#l4.1328"></a><span id="l4.1328" class="difflineplus">+    var fph = this._ioSvc.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l4.1329"></a><span id="l4.1329" class="difflineplus">+                  .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l4.1330"></a><span id="l4.1330" class="difflineplus">+    var urlSpec = fph.getURLSpecFromFile(aFile);</span>
<a href="#l4.1331"></a><span id="l4.1331" class="difflineplus">+</span>
<a href="#l4.1332"></a><span id="l4.1332" class="difflineplus">+    return &quot;moz-icon://&quot; + urlSpec + &quot;?size=16&quot;;</span>
<a href="#l4.1333"></a><span id="l4.1333" class="difflineplus">+  },</span>
<a href="#l4.1334"></a><span id="l4.1334" class="difflineplus">+</span>
<a href="#l4.1335"></a><span id="l4.1335" class="difflineplus">+  _getIconURLForWebApp: function(aWebAppURITemplate) {</span>
<a href="#l4.1336"></a><span id="l4.1336" class="difflineplus">+    var uri = this._ioSvc.newURI(aWebAppURITemplate, null, null);</span>
<a href="#l4.1337"></a><span id="l4.1337" class="difflineplus">+</span>
<a href="#l4.1338"></a><span id="l4.1338" class="difflineplus">+    // Unfortunately we can't use the favicon service to get the favicon,</span>
<a href="#l4.1339"></a><span id="l4.1339" class="difflineplus">+    // because the service looks in the annotations table for a record with</span>
<a href="#l4.1340"></a><span id="l4.1340" class="difflineplus">+    // the exact URL we give it, and users won't have such records for URLs</span>
<a href="#l4.1341"></a><span id="l4.1341" class="difflineplus">+    // they don't visit, and users won't visit the web app's URL template,</span>
<a href="#l4.1342"></a><span id="l4.1342" class="difflineplus">+    // they'll only visit URLs derived from that template (i.e. with %s</span>
<a href="#l4.1343"></a><span id="l4.1343" class="difflineplus">+    // in the template replaced by the URL of the content being handled).</span>
<a href="#l4.1344"></a><span id="l4.1344" class="difflineplus">+</span>
<a href="#l4.1345"></a><span id="l4.1345" class="difflineplus">+    if (/^https?/.test(uri.scheme))</span>
<a href="#l4.1346"></a><span id="l4.1346" class="difflineplus">+      return uri.prePath + &quot;/favicon.ico&quot;;</span>
<a href="#l4.1347"></a><span id="l4.1347" class="difflineplus">+</span>
<a href="#l4.1348"></a><span id="l4.1348" class="difflineplus">+    return /^https?/.test(uri.scheme) ? uri.resolve(&quot;/favicon.ico&quot;) : &quot;&quot;;</span>
<a href="#l4.1349"></a><span id="l4.1349" class="difflineplus">+  },</span>
<a href="#l4.1350"></a><span id="l4.1350" class="difflineplus">+</span>
<a href="#l4.1351"></a><span id="l4.1351" class="difflineplus">+  _getIconURLForSystemDefault: function(aHandlerInfo) {</span>
<a href="#l4.1352"></a><span id="l4.1352" class="difflineplus">+    // Handler info objects for MIME types on some OSes implement a property bag</span>
<a href="#l4.1353"></a><span id="l4.1353" class="difflineplus">+    // interface from which we can get an icon for the default app, so if we're</span>
<a href="#l4.1354"></a><span id="l4.1354" class="difflineplus">+    // dealing with a MIME type on one of those OSes, then try to get the icon.</span>
<a href="#l4.1355"></a><span id="l4.1355" class="difflineplus">+    if (&quot;wrappedHandlerInfo&quot; in aHandlerInfo) {</span>
<a href="#l4.1356"></a><span id="l4.1356" class="difflineplus">+      let wrappedHandlerInfo = aHandlerInfo.wrappedHandlerInfo;</span>
<a href="#l4.1357"></a><span id="l4.1357" class="difflineplus">+</span>
<a href="#l4.1358"></a><span id="l4.1358" class="difflineplus">+      if (wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo &amp;&amp;</span>
<a href="#l4.1359"></a><span id="l4.1359" class="difflineplus">+          wrappedHandlerInfo instanceof Components.interfaces.nsIPropertyBag) {</span>
<a href="#l4.1360"></a><span id="l4.1360" class="difflineplus">+        try {</span>
<a href="#l4.1361"></a><span id="l4.1361" class="difflineplus">+          let url = wrappedHandlerInfo.getProperty(&quot;defaultApplicationIconURL&quot;);</span>
<a href="#l4.1362"></a><span id="l4.1362" class="difflineplus">+          if (url)</span>
<a href="#l4.1363"></a><span id="l4.1363" class="difflineplus">+            return url + &quot;?size=16&quot;;</span>
<a href="#l4.1364"></a><span id="l4.1364" class="difflineplus">+        }</span>
<a href="#l4.1365"></a><span id="l4.1365" class="difflineplus">+        catch(ex) { }</span>
<a href="#l4.1366"></a><span id="l4.1366" class="difflineplus">+      }</span>
<a href="#l4.1367"></a><span id="l4.1367" class="difflineplus">+    }</span>
<a href="#l4.1368"></a><span id="l4.1368" class="difflineplus">+</span>
<a href="#l4.1369"></a><span id="l4.1369" class="difflineplus">+    // If this isn't a MIME type object on an OS that supports retrieving</span>
<a href="#l4.1370"></a><span id="l4.1370" class="difflineplus">+    // the icon, or if we couldn't retrieve the icon for some other reason,</span>
<a href="#l4.1371"></a><span id="l4.1371" class="difflineplus">+    // then use a generic icon.</span>
<a href="#l4.1372"></a><span id="l4.1372" class="difflineplus">+    return ICON_URL_APP;</span>
<a href="#l4.1373"></a><span id="l4.1373" class="difflineplus">+  }</span>
<a href="#l4.1374"></a><span id="l4.1374" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100755</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- /dev/null</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ b/mail/components/preferences/applications.xul</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -0,0 +1,146 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+   - Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+   -</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+   - The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+   - 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+   - the License. You may obtain a copy of the License at</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+   - http://www.mozilla.org/MPL/</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+   -</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+   - Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+   - for the specific language governing rights and limitations under the</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+   - License.</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+   -</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+   - The Original Code is the Firefox Preferences System.</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+   -</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+   - The Initial Developer of the Original Code is</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+   - Ben Goodger.</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+   - Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+   - the Initial Developer. All Rights Reserved.</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+   -</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+   - Contributor(s):</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+   -   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+   -   Jeff Walden &lt;jwalden+code@mit.edu&gt;.</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+   -   Asaf Romano &lt;mozilla.mano@sent.com&gt;</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+   -   Myk Melez &lt;myk@mozilla.org&gt;</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+   -   Magnus Melin &lt;mkmelin+mozilla@iki.fi&gt;</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+   -</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+   - Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+   - either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+   - the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+   - in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+   - of those above. If you wish to allow use of your version of this file only</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+   - under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+   - use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+   - decision by deleting the provisions above and replace them with the notice</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+   - and other provisions required by the LGPL or the GPL. If you do not delete</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+   - the provisions above, a recipient may use your version of this file under</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+   - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+   -</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+   - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+&lt;!DOCTYPE overlay [</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+  &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+  &lt;!ENTITY % applicationsDTD SYSTEM &quot;chrome://messenger/locale/preferences/applications.dtd&quot;&gt;</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+  %brandDTD;</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+  %applicationsDTD;</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+]&gt;</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+&lt;overlay id=&quot;ApplicationsPaneOverlay&quot;</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+  &lt;prefpane id=&quot;paneApplications&quot;</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+            onpaneload=&quot;gApplicationsPane.init();&quot;</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+            flex=&quot;1&quot;&gt;</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+    &lt;preferences id=&quot;downloadDirPreferences&quot;&gt;</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+      &lt;preference id=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+                  name=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+                  type=&quot;bool&quot;/&gt;</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+      &lt;preference id=&quot;browser.download.folderList&quot;</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+                  name=&quot;browser.download.folderList&quot;</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+                  type=&quot;int&quot;/&gt;</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+      &lt;preference id=&quot;browser.download.downloadDir&quot;</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+                  name=&quot;browser.download.downloadDir&quot;</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+                  type=&quot;file&quot;/&gt;</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+      &lt;preference id=&quot;browser.download.dir&quot;</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+                  name=&quot;browser.download.dir&quot;</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+                  type=&quot;file&quot;</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineplus">+                  onchange=&quot;gDownloadDirSection.readDownloadDirPref();&quot;/&gt;</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+      &lt;preference id=&quot;pref.downloads.disable_button.edit_actions&quot;</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+                  name=&quot;pref.downloads.disable_button.edit_actions&quot;</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+                  type=&quot;bool&quot;/&gt;</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineplus">+    &lt;/preferences&gt;</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+            src=&quot;chrome://messenger/content/preferences/applications.js&quot;/&gt;</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineplus">+</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineplus">+    &lt;keyset&gt;</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineplus">+      &lt;key key=&quot;&amp;focusSearch1.key;&quot; modifiers=&quot;accel&quot;</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineplus">+           oncommand=&quot;gApplicationsPane.focusFilterBox();&quot;/&gt;</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+      &lt;key key=&quot;&amp;focusSearch2.key;&quot; modifiers=&quot;accel&quot;</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+           oncommand=&quot;gApplicationsPane.focusFilterBox();&quot;/&gt;</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+    &lt;/keyset&gt;</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+    &lt;hbox&gt;</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+      &lt;textbox id=&quot;filter&quot; flex=&quot;1&quot;</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+               type=&quot;search&quot;</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+               emptytext=&quot;&amp;filter.emptytext;&quot;</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+               aria-controls=&quot;handlersView&quot;</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+               oncommand=&quot;gApplicationsPane.rebuildView();&quot;/&gt;</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+    &lt;/hbox&gt;</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+    &lt;richlistbox id=&quot;handlersView&quot; orient=&quot;vertical&quot; persist=&quot;lastSelectedType&quot;</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineplus">+                 preference=&quot;pref.downloads.disable_button.edit_actions&quot;</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineplus">+                 onselect=&quot;gApplicationsPane.onSelectionChanged();&quot;&gt;</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineplus">+      &lt;listheader equalsize=&quot;always&quot; style=&quot;border: 0; padding: 0; -moz-appearance: none;&quot;&gt;</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineplus">+        &lt;treecol id=&quot;typeColumn&quot; label=&quot;&amp;typeColumn.label;&quot; value=&quot;type&quot;</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineplus">+                 accesskey=&quot;&amp;typeColumn.accesskey;&quot; persist=&quot;sortDirection&quot;</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineplus">+                 flex=&quot;1&quot; onclick=&quot;gApplicationsPane.sort(event);&quot;</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineplus">+                 sortDirection=&quot;ascending&quot;/&gt;</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineplus">+        &lt;treecol id=&quot;actionColumn&quot; label=&quot;&amp;actionColumn2.label;&quot; value=&quot;action&quot;</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineplus">+                 accesskey=&quot;&amp;actionColumn2.accesskey;&quot; persist=&quot;sortDirection&quot;</span>
<a href="#l5.110"></a><span id="l5.110" class="difflineplus">+                 flex=&quot;1&quot; onclick=&quot;gApplicationsPane.sort(event);&quot;/&gt;</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineplus">+      &lt;/listheader&gt;</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineplus">+    &lt;/richlistbox&gt;</span>
<a href="#l5.113"></a><span id="l5.113" class="difflineplus">+</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineplus">+    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineplus">+</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineplus">+    &lt;script type=&quot;application/javascript&quot;</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineplus">+            src=&quot;chrome://messenger/content/preferences/downloads.js&quot;/&gt;</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineplus">+</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineplus">+    &lt;vbox align=&quot;start&quot;&gt;</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineplus">+      &lt;radiogroup id=&quot;saveWhere&quot; flex=&quot;1&quot;</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineplus">+                  preference=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineplus">+                  onsyncfrompreference=&quot;return gDownloadDirSection.onReadUseDownloadDir();&quot;&gt;</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineplus">+      &lt;hbox id=&quot;saveToRow&quot;&gt;</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineplus">+        &lt;radio id=&quot;saveTo&quot; value=&quot;true&quot;</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineplus">+               label=&quot;&amp;saveTo.label;&quot;</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineplus">+               accesskey=&quot;&amp;saveTo.accesskey;&quot;</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineplus">+               aria-labelledby=&quot;saveTo downloadFolder&quot;/&gt;</span>
<a href="#l5.128"></a><span id="l5.128" class="difflineplus">+        &lt;filefield id=&quot;downloadFolder&quot; flex=&quot;1&quot;</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineplus">+                   preference=&quot;browser.download.folderList&quot;</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineplus">+                   preference-editable=&quot;true&quot;</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineplus">+                   aria-labelledby=&quot;saveTo&quot;</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineplus">+                   onsyncfrompreference=&quot;return gDownloadDirSection.readDownloadDirPref();&quot;</span>
<a href="#l5.133"></a><span id="l5.133" class="difflineplus">+                   onsynctopreference=&quot;return gDownloadDirSection.writeFolderList();&quot;/&gt;</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineplus">+        &lt;button id=&quot;chooseFolder&quot; oncommand=&quot;gDownloadDirSection.chooseFolder();&quot;</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineplus">+#ifdef XP_MACOSX</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineplus">+                accesskey=&quot;&amp;chooseFolderMac.accesskey;&quot;</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineplus">+                label=&quot;&amp;chooseFolderMac.label;&quot;</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineplus">+#else</span>
<a href="#l5.139"></a><span id="l5.139" class="difflineplus">+                accesskey=&quot;&amp;chooseFolderWin.accesskey;&quot;</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineplus">+                label=&quot;&amp;chooseFolderWin.label;&quot;</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineplus">+#endif</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineplus">+                preference=&quot;browser.download.folderList&quot;</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineplus">+                onsynctopreference=&quot;return gDownloadDirSection.writeFolderList();&quot;/&gt;</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineplus">+      &lt;/hbox&gt;</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineplus">+      &lt;radio id=&quot;alwaysAsk&quot; value=&quot;false&quot;</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineplus">+             label=&quot;&amp;alwaysAsk.label;&quot; accesskey=&quot;&amp;alwaysAsk.accesskey;&quot;/&gt;</span>
<a href="#l5.147"></a><span id="l5.147" class="difflineplus">+      &lt;/radiogroup&gt;</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineplus">+    &lt;/vbox&gt;</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineplus">+  &lt;/prefpane&gt;</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineplus">+&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/mail/components/preferences/changeaction.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,224 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-#</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-#</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-# License.</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-#</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-# The Original Code is the Download Actions Manager.</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-#</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-# Ben Goodger.</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2000-2005</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-#</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-# Contributor(s):</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-#   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-#</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-#</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-var gChangeActionDialog = {</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-  _item             : null,</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-  _bundle           : null,</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-  _lastSelectedMode : null,</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-  _lastSelectedSave : null,</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-  init: function ()</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-  {</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-    this._item = window.arguments[0];</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-    this._bundle = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-    </span>
<a href="#l6.54"></a><span id="l6.54" class="difflineminus">-    var typeField = document.getElementById(&quot;typeField&quot;);</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineminus">-    typeField.value = this._item.typeName;</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineminus">-    </span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-    var extensionField = document.getElementById(&quot;extensionField&quot;);</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-    var ext = &quot;.&quot; + this._item.extension.toLowerCase();</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-    var contentType = this._item.type;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-    extensionField.value = this._bundle.getFormattedString(&quot;extensionStringFormat&quot;, [ext, contentType]);</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineminus">-    </span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-    var typeIcon = document.getElementById(&quot;typeIcon&quot;);</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineminus">-    typeIcon.src = this._item.bigIcon;</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineminus">-    // Custom App Handler Path - this must be set before we set the selected</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineminus">-    // radio button because the selection event handler for the radio group</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineminus">-    // requires the extapp handler field to be non-empty for the extapp radio</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineminus">-    // button to be selected. </span>
<a href="#l6.69"></a><span id="l6.69" class="difflineminus">-    var customApp = document.getElementById(&quot;customApp&quot;);</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineminus">-    if (this._item.customHandler)</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineminus">-      customApp.file = this._item.customHandler;</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineminus">-    else</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-      customApp.file = null;</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineminus">-</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineminus">-    var defaultApp = document.getElementById(&quot;defaultApp&quot;);</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineminus">-    var defaultAppIcon = null;</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineminus">-    var fallbackIconURL = &quot;moz-icon://goat?contentType=&quot; + this._item.type + &quot;&amp;size=16&quot;;</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineminus">-    if (this._item.mimeInfo instanceof Components.interfaces.nsIPropertyBag) {</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-      try {</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-        defaultAppIcon = this._item.mimeInfo.getProperty(&quot;defaultApplicationIconURL&quot;);</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineminus">-      }</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-      catch (e) { }</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineminus">-      if (defaultAppIcon)</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineminus">-        defaultAppIcon += &quot;?size=16&quot;;</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-    }</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineminus">-    defaultApp.image = defaultAppIcon || fallbackIconURL;</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineminus">-    defaultApp.label = this._item.mimeInfo.defaultDescription;</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-     </span>
<a href="#l6.89"></a><span id="l6.89" class="difflineminus">-    // Selected Action Radiogroup</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineminus">-    var handlerGroup = document.getElementById(&quot;handlerGroup&quot;);</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineminus">-    if (this._item.handleMode == FILEACTION_OPEN_DEFAULT)</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-      handlerGroup.selectedItem = document.getElementById(&quot;openDefault&quot;);</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineminus">-    else if (this._item.handleMode == FILEACTION_SAVE_TO_DISK)</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineminus">-      handlerGroup.selectedItem = document.getElementById(&quot;saveToDisk&quot;);</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-    else</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineminus">-      handlerGroup.selectedItem = document.getElementById(&quot;openApplication&quot;);</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineminus">-</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineminus">-    this._lastSelectedMode = handlerGroup.selectedItem;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineminus">-    </span>
<a href="#l6.100"></a><span id="l6.100" class="difflineminus">-    // Figure out the last selected Save As mode</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-    var saveToOptions = document.getElementById(&quot;saveToOptions&quot;);</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-    this._lastSelectedSave = saveToOptions.selectedItem;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineminus">-</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineminus">-    // We don't let users open .exe files or random binary data directly </span>
<a href="#l6.105"></a><span id="l6.105" class="difflineminus">-    // from the browser at the moment because of security concerns. </span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-    var mimeType = this._item.mimeInfo.MIMEType;</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineminus">-    if (mimeType == &quot;application/octet-stream&quot; ||</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineminus">-        mimeType == &quot;application/x-msdownload&quot;) {</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineminus">-      document.getElementById(&quot;openApplication&quot;).disabled = true;</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineminus">-      document.getElementById(&quot;openDefault&quot;).disabled = true;</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineminus">-      handlerGroup.selectedItem = document.getElementById(&quot;saveToDisk&quot;);</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineminus">-    }</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineminus">-  },</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineminus">-  </span>
<a href="#l6.115"></a><span id="l6.115" class="difflineminus">-  onAccept: function ()</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineminus">-  {</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineminus">-    var contentType = this._item.mimeInfo.MIMEType;</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineminus">-    var handlerGroup = document.getElementById(&quot;handlerGroup&quot;);</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineminus">-    switch (handlerGroup.selectedItem.value) {</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineminus">-    case &quot;system&quot;:</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineminus">-      this._item.handledOnlyByPlugin = false;</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineminus">-      this._item.handleMode = FILEACTION_OPEN_DEFAULT;</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineminus">-      var defaultDescr = this._item.mimeInfo.defaultDescription;</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineminus">-      this._item.action = this._bundle.getFormattedString(&quot;openWith&quot;, [defaultDescr]);</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineminus">-      break;</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineminus">-    case &quot;app&quot;:</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineminus">-      this._item.handledOnlyByPlugin = false;</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineminus">-      this._item.handleMode = FILEACTION_OPEN_CUSTOM;</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineminus">-      var customApp = document.getElementById(&quot;customApp&quot;);</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineminus">-      this._item.action = this._bundle.getFormattedString(&quot;openWith&quot;, [customApp.label]);        </span>
<a href="#l6.131"></a><span id="l6.131" class="difflineminus">-      break;  </span>
<a href="#l6.132"></a><span id="l6.132" class="difflineminus">-    case &quot;save&quot;:</span>
<a href="#l6.133"></a><span id="l6.133" class="difflineminus">-      this._item.handledOnlyByPlugin = false;</span>
<a href="#l6.134"></a><span id="l6.134" class="difflineminus">-      this._item.handleMode = FILEACTION_SAVE_TO_DISK;</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineminus">-      this._item.action = this._bundle.getString(&quot;saveToDisk&quot;);</span>
<a href="#l6.136"></a><span id="l6.136" class="difflineminus">-      break;  </span>
<a href="#l6.137"></a><span id="l6.137" class="difflineminus">-    }</span>
<a href="#l6.138"></a><span id="l6.138" class="difflineminus">-    </span>
<a href="#l6.139"></a><span id="l6.139" class="difflineminus">-    // The opener uses the modifications to the FileAction item to update the</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineminus">-    // datasource.</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineminus">-    return true;</span>
<a href="#l6.142"></a><span id="l6.142" class="difflineminus">-  },</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineminus">-  </span>
<a href="#l6.144"></a><span id="l6.144" class="difflineminus">-  doEnabling: function (aSelectedItem)</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineminus">-  {</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineminus">-    var defaultApp            = document.getElementById(&quot;defaultApp&quot;);</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineminus">-    var saveToDefault         = document.getElementById(&quot;saveToDefault&quot;);</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineminus">-    var saveToCustom          = document.getElementById(&quot;saveToCustom&quot;);</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineminus">-    var customDownloadFolder  = document.getElementById(&quot;customDownloadFolder&quot;);</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineminus">-    var chooseCustomDownloadFolder = document.getElementById(&quot;chooseCustomDownloadFolder&quot;);</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineminus">-    var saveToAskMe           = document.getElementById(&quot;saveToAskMe&quot;);</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineminus">-    var changeApp             = document.getElementById(&quot;changeApp&quot;);</span>
<a href="#l6.153"></a><span id="l6.153" class="difflineminus">-    var customApp             = document.getElementById(&quot;customApp&quot;);</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineminus">-    </span>
<a href="#l6.155"></a><span id="l6.155" class="difflineminus">-    switch (aSelectedItem.id) {</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineminus">-    case &quot;openDefault&quot;:</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineminus">-      changeApp.disabled = customApp.disabled = saveToDefault.disabled = saveToCustom.disabled = customDownloadFolder.disabled = chooseCustomDownloadFolder.disabled = saveToAskMe.disabled = true;</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineminus">-      defaultApp.disabled = false;</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineminus">-      break;</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineminus">-    case &quot;openApplication&quot;:</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineminus">-      defaultApp.disabled = saveToDefault.disabled = saveToCustom.disabled = customDownloadFolder.disabled = chooseCustomDownloadFolder.disabled = saveToAskMe.disabled =  true;</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineminus">-      changeApp.disabled = customApp.disabled = false;</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineminus">-      if (!customApp.file &amp;&amp; !this.changeApp()) {</span>
<a href="#l6.164"></a><span id="l6.164" class="difflineminus">-        this._lastSelectedMode.click();</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineminus">-        return;</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineminus">-      }</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineminus">-      break;</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineminus">-    case &quot;saveToDisk&quot;:</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineminus">-      changeApp.disabled = customApp.disabled = defaultApp.disabled = true;</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineminus">-      var saveToOptions = document.getElementById(&quot;saveToOptions&quot;);</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineminus">-      customDownloadFolder.disabled = chooseCustomDownloadFolder.disabled = !(saveToOptions.selectedItem.id == &quot;saveToCustom&quot;);</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineminus">-      saveToDefault.disabled = saveToCustom.disabled = saveToAskMe.disabled = false;</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineminus">-      break;</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineminus">-    }</span>
<a href="#l6.175"></a><span id="l6.175" class="difflineminus">-    this._lastSelectedMode = aSelectedItem;</span>
<a href="#l6.176"></a><span id="l6.176" class="difflineminus">-  },</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineminus">-  </span>
<a href="#l6.178"></a><span id="l6.178" class="difflineminus">-  doSaveToDiskEnabling: function (aSelectedItem)</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineminus">-  {</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineminus">-    var isSaveToCustom = aSelectedItem.id == &quot;saveToCustom&quot;;</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineminus">-    var customDownloadFolder = document.getElementById(&quot;customDownloadFolder&quot;);</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineminus">-    var chooseCustomDownloadFolder = document.getElementById(&quot;chooseCustomDownloadFolder&quot;);</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineminus">-    chooseCustomDownloadFolder.disabled = customDownloadFolder.disabled = !isSaveToCustom;</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineminus">-    </span>
<a href="#l6.185"></a><span id="l6.185" class="difflineminus">-    if (isSaveToCustom &amp;&amp; </span>
<a href="#l6.186"></a><span id="l6.186" class="difflineminus">-        !customDownloadFolder.file &amp;&amp; !this.changeCustomFolder()) {</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineminus">-      this._lastSelectedSave.click();</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineminus">-      return;</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineminus">-    }</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineminus">-    this._lastSelectedSave = aSelectedItem;</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineminus">-  },</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineminus">-  </span>
<a href="#l6.193"></a><span id="l6.193" class="difflineminus">-  changeApp: function ()</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineminus">-  {</span>
<a href="#l6.195"></a><span id="l6.195" class="difflineminus">-    const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineminus">-    var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l6.197"></a><span id="l6.197" class="difflineminus">-                       .createInstance(nsIFilePicker);</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineminus">-    var winTitle = this._bundle.getString(&quot;fpTitleChooseApp&quot;);</span>
<a href="#l6.199"></a><span id="l6.199" class="difflineminus">-    fp.init(window, winTitle, nsIFilePicker.modeOpen);</span>
<a href="#l6.200"></a><span id="l6.200" class="difflineminus">-    fp.appendFilters(nsIFilePicker.filterApps);</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineminus">-    if (fp.show() == nsIFilePicker.returnOK &amp;&amp; fp.file) {</span>
<a href="#l6.202"></a><span id="l6.202" class="difflineminus">-      var customApp = document.getElementById(&quot;customApp&quot;);</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineminus">-      customApp.file = fp.file;</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineminus">-      this._item.customHandler = fp.file;      </span>
<a href="#l6.205"></a><span id="l6.205" class="difflineminus">-      return true;</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineminus">-    }</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineminus">-    return false;</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineminus">-  },</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineminus">-  </span>
<a href="#l6.210"></a><span id="l6.210" class="difflineminus">-  changeCustomFolder: function ()</span>
<a href="#l6.211"></a><span id="l6.211" class="difflineminus">-  {</span>
<a href="#l6.212"></a><span id="l6.212" class="difflineminus">-    const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l6.213"></a><span id="l6.213" class="difflineminus">-    var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l6.214"></a><span id="l6.214" class="difflineminus">-                       .createInstance(nsIFilePicker);</span>
<a href="#l6.215"></a><span id="l6.215" class="difflineminus">-</span>
<a href="#l6.216"></a><span id="l6.216" class="difflineminus">-    // extract the window title</span>
<a href="#l6.217"></a><span id="l6.217" class="difflineminus">-    var winTitle = this._bundle.getString(&quot;fpTitleChooseDL&quot;);</span>
<a href="#l6.218"></a><span id="l6.218" class="difflineminus">-    fp.init(window, winTitle, nsIFilePicker.modeGetFolder);</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineminus">-    if (fp.show() == nsIFilePicker.returnOK &amp;&amp; fp.file) {</span>
<a href="#l6.220"></a><span id="l6.220" class="difflineminus">-      var customDownloadFolder = document.getElementById(&quot;customDownloadFolder&quot;);</span>
<a href="#l6.221"></a><span id="l6.221" class="difflineminus">-      customDownloadFolder.file = fp.file;</span>
<a href="#l6.222"></a><span id="l6.222" class="difflineminus">-      customDownloadFolder.label = fp.file.path;</span>
<a href="#l6.223"></a><span id="l6.223" class="difflineminus">-      return true;</span>
<a href="#l6.224"></a><span id="l6.224" class="difflineminus">-    }</span>
<a href="#l6.225"></a><span id="l6.225" class="difflineminus">-    return false;</span>
<a href="#l6.226"></a><span id="l6.226" class="difflineminus">-  },</span>
<a href="#l6.227"></a><span id="l6.227" class="difflineminus">-};</span>
<a href="#l6.228"></a><span id="l6.228" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/mail/components/preferences/changeaction.xul</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,103 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">-</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">-# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-#</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-#</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-# License.</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-#</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">-# The Original Code is the Download Actions Manager.</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-#</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineminus">-# Ben Goodger.</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2000-2005</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineminus">-#</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineminus">-# Contributor(s):</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineminus">-#   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineminus">-#</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineminus">-#</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineminus">-</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot;?&gt;</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://mozapps/content/preferences/preferences.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/preferences/preferences.css&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineminus">-</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineminus">-&lt;!DOCTYPE window SYSTEM &quot;chrome://messenger/locale/preferences/changeaction.dtd&quot;&gt;</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineminus">-&lt;dialog id=&quot;ChangeActionDialog&quot; title=&quot;&amp;changeAction.title;&quot;</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineminus">-        xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineminus">-        onload=&quot;gChangeActionDialog.init();&quot; </span>
<a href="#l7.54"></a><span id="l7.54" class="difflineminus">-        ondialogaccept=&quot;return gChangeActionDialog.onAccept();&quot; </span>
<a href="#l7.55"></a><span id="l7.55" class="difflineminus">-        style=&quot;width: &amp;window.width;;&quot;</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineminus">-        persist=&quot;screenX screenY&quot;&gt;</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineminus">-</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/preferences/actionsshared.js&quot;/&gt;</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/preferences/changeaction.js&quot;/&gt;</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineminus">-  </span>
<a href="#l7.61"></a><span id="l7.61" class="difflineminus">-  &lt;stringbundle id=&quot;bundlePreferences&quot; src=&quot;chrome://messenger/locale/preferences/preferences.properties&quot;/&gt;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineminus">-</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineminus">-  &lt;hbox id=&quot;changeActionHeader&quot; align=&quot;center&quot; class=&quot;indent&quot;&gt;</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineminus">-    &lt;image id=&quot;typeIcon&quot;/&gt;</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineminus">-    &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineminus">-      &lt;label id=&quot;typeField&quot; crop=&quot;right&quot;/&gt;</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineminus">-      &lt;label id=&quot;extensionField&quot; crop=&quot;right&quot;/&gt;</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineminus">-    &lt;/vbox&gt;</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineminus">-  &lt;/hbox&gt;</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineminus">-  &lt;vbox id=&quot;changeActionContent&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineminus">-    &lt;label control=&quot;handlerGroup&quot;&gt;&amp;whenDownloading.label;&lt;/label&gt;</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineminus">-    &lt;radiogroup id=&quot;handlerGroup&quot; onselect=&quot;gChangeActionDialog.doEnabling(this.selectedItem);&quot; </span>
<a href="#l7.73"></a><span id="l7.73" class="difflineminus">-                flex=&quot;1&quot; aria-describedby=&quot;changeActionHeader&quot;&gt;</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineminus">-      &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineminus">-      &lt;radio id=&quot;openDefault&quot; value=&quot;system&quot; </span>
<a href="#l7.76"></a><span id="l7.76" class="difflineminus">-             label=&quot;&amp;openDefault.label;&quot; accesskey=&quot;&amp;openDefault.accesskey;&quot;/&gt;</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineminus">-      &lt;filefield class=&quot;indent&quot; id=&quot;defaultApp&quot; disabled=&quot;true&quot; aria-labelledby=&quot;openDefault&quot;/&gt;</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineminus">-      &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineminus">-      &lt;radio id=&quot;openApplication&quot; value=&quot;app&quot; </span>
<a href="#l7.80"></a><span id="l7.80" class="difflineminus">-             label=&quot;&amp;openApplication.label;&quot; accesskey=&quot;&amp;openApplication.accesskey;&quot;/&gt;</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineminus">-      &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineminus">-        &lt;filefield id=&quot;customApp&quot; class=&quot;indent&quot; flex=&quot;1&quot; disabled=&quot;true&quot; aria-labelledby=&quot;openApplication&quot;/&gt;</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineminus">-        &lt;button id=&quot;changeApp&quot; oncommand=&quot;gChangeActionDialog.changeApp();&quot; </span>
<a href="#l7.84"></a><span id="l7.84" class="difflineminus">-                label=&quot;&amp;changeApp.label;&quot; accesskey=&quot;&amp;changeApp.accesskey;&quot;</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineminus">-                disabled=&quot;true&quot;/&gt;</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineminus">-      &lt;/hbox&gt;</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineminus">-      &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineminus">-      &lt;radio id=&quot;saveToDisk&quot; value=&quot;save&quot; </span>
<a href="#l7.89"></a><span id="l7.89" class="difflineminus">-             label=&quot;&amp;saveToDisk.label;&quot; accesskey=&quot;&amp;saveToDisk.accesskey;&quot;/&gt;</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineminus">-      &lt;radiogroup id=&quot;saveToOptions&quot; class=&quot;indent&quot; onselect=&quot;gChangeActionDialog.doSaveToDiskEnabling(this.selectedItem);&quot;</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineminus">-                  hidden=&quot;true&quot; aria-labelledby=&quot;saveToDisk&quot;&gt;</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineminus">-        &lt;radio id=&quot;saveToDefault&quot; value=&quot;default&quot; selected=&quot;true&quot;</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineminus">-               label=&quot;&amp;saveToDefaultFolder.label;&quot; accesskey=&quot;&amp;saveToDefaultFolder.accesskey;&quot;/&gt;</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineminus">-        &lt;radio id=&quot;saveToCustom&quot; value=&quot;custom&quot;</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineminus">-               label=&quot;&amp;saveToThisFolder.label;&quot; accesskey=&quot;&amp;saveToThisFolder.accesskey;&quot;/&gt;</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineminus">-        &lt;hbox align=&quot;center&quot; class=&quot;indent&quot;&gt;</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineminus">-          &lt;filefield id=&quot;customDownloadFolder&quot; flex=&quot;1&quot; aria-labelledby=&quot;saveToCustom&quot;/&gt;</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineminus">-          &lt;button id=&quot;chooseCustomDownloadFolder&quot; oncommand=&quot;gChangeActionDialog.changeCustomFolder();&quot;</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineminus">-                  label=&quot;&amp;chooseFolder.label;&quot; accesskey=&quot;&amp;chooseFolder.accesskey;&quot;/&gt;</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineminus">-        &lt;/hbox&gt;</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineminus">-        &lt;radio id=&quot;saveToAskMe&quot; value=&quot;ask&quot;</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineminus">-               label=&quot;&amp;saveToAskMe.label;&quot; accesskey=&quot;&amp;saveToAskMe.accesskey;&quot;/&gt;</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineminus">-      &lt;/radiogroup&gt;</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineminus">-    &lt;/radiogroup&gt;</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineminus">-  &lt;/vbox&gt;</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineminus">-&lt;/dialog&gt;</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/mail/components/preferences/downloadactions.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,777 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">-#</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-#</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-# License.</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-#</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-# The Original Code is the Download Actions Manager.</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-#</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-# Ben Goodger.</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2000-2005</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-#</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-# Contributor(s):</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-#   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-#</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineminus">-#</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineminus">-</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineminus">-const kRootTypePrefix = &quot;urn:mimetype:&quot;;</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineminus">-</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineminus">-///////////////////////////////////////////////////////////////////////////////</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineminus">-// MIME Types Datasource RDF Utils</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineminus">-function NC_URI(aProperty)</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineminus">-{</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineminus">-  return &quot;http://home.netscape.com/NC-rdf#&quot; + aProperty;</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-}</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineminus">-</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineminus">-function MIME_URI(aType)</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineminus">-{</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineminus">-  return &quot;urn:mimetype:&quot; + aType;</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-}</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-function HANDLER_URI(aHandler)</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineminus">-{</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineminus">-  return &quot;urn:mimetype:handler:&quot; + aHandler;</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineminus">-}</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineminus">-</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineminus">-function APP_URI(aType)</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineminus">-{</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineminus">-  return &quot;urn:mimetype:externalApplication:&quot; + aType;</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineminus">-}</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineminus">-</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineminus">-var gDownloadActionsWindow = {  </span>
<a href="#l8.68"></a><span id="l8.68" class="difflineminus">-  _tree         : null,</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineminus">-  _editButton   : null,</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineminus">-  _removeButton : null,</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineminus">-  _actions      : [],</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineminus">-  _plugins      : {},</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineminus">-  _bundle       : null,</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineminus">-  _pref         : Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineminus">-                            .getService(Components.interfaces.nsIPrefBranch),</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineminus">-  _mimeSvc      : Components.classes[&quot;@mozilla.org/mime;1&quot;]</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineminus">-                            .getService(Components.interfaces.nsIMIMEService),</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineminus">-  _excludingPlugins           : false,</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineminus">-  _excludingMissingExtensions : false,</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineminus">-  </span>
<a href="#l8.81"></a><span id="l8.81" class="difflineminus">-  init: function ()</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineminus">-  {</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineminus">-    (this._editButton = document.getElementById(&quot;editFileHandler&quot;)).disabled = true;</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineminus">-    (this._removeButton = document.getElementById(&quot;removeFileHandler&quot;)).disabled = true;    </span>
<a href="#l8.85"></a><span id="l8.85" class="difflineminus">-   </span>
<a href="#l8.86"></a><span id="l8.86" class="difflineminus">-    // Initialize the File Type list</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineminus">-    this._bundle = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineminus">-    this._tree = document.getElementById(&quot;fileHandlersList&quot;);</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineminus">-    this._loadView();</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineminus">-    // Determine any exclusions being applied - e.g. don't show types for which</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineminus">-    // only a plugin handler exists, don't show types lacking extensions, etc. </span>
<a href="#l8.92"></a><span id="l8.92" class="difflineminus">-    this._view._rowCount = this._updateExclusions();    </span>
<a href="#l8.93"></a><span id="l8.93" class="difflineminus">-    this._tree.treeBoxObject.view = this._view;  </span>
<a href="#l8.94"></a><span id="l8.94" class="difflineminus">-</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineminus">-    var indexToSelect = parseInt(this._tree.getAttribute(&quot;lastSelected&quot;));</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineminus">-    if (indexToSelect &lt; this._tree.view.rowCount)</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineminus">-      this._tree.view.selection.select(indexToSelect);</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineminus">-    this._tree.focus();    </span>
<a href="#l8.99"></a><span id="l8.99" class="difflineminus">-  },</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineminus">-  </span>
<a href="#l8.101"></a><span id="l8.101" class="difflineminus">-  _loadView: function ()</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineminus">-  {</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineminus">-    // Reset ALL the collections and state flags, because we can call this after</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineminus">-    // the window has initially displayed by resetting the filter. </span>
<a href="#l8.105"></a><span id="l8.105" class="difflineminus">-    this._actions = [];</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineminus">-    this._plugins = {};</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineminus">-    this._view._filtered = false;</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineminus">-    this._view._filterSet = [];</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineminus">-    this._view._usingExclusionSet = false;</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineminus">-    this._view._exclusionSet = [];</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineminus">-    this._view._filterValue = &quot;&quot;;</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineminus">-</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineminus">-    this._loadPluginData();</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineminus">-    this._loadMIMERegistryData();</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineminus">-  },</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineminus">-  </span>
<a href="#l8.117"></a><span id="l8.117" class="difflineminus">-  _updateRowCount: function (aNewRowCount)</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineminus">-  {</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineminus">-    var oldCount = this._view._rowCount;</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineminus">-    this._view._rowCount = 0;</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineminus">-    this._tree.treeBoxObject.rowCountChanged(0, -oldCount);</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineminus">-    this._view._rowCount = aNewRowCount;</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineminus">-    this._tree.treeBoxObject.rowCountChanged(0, aNewRowCount);</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineminus">-  },</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineminus">-  </span>
<a href="#l8.126"></a><span id="l8.126" class="difflineminus">-  uninit: function ()</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineminus">-  {</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineminus">-  },</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineminus">-  </span>
<a href="#l8.130"></a><span id="l8.130" class="difflineminus">-  _updateExclusions: function ()</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineminus">-  {</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineminus">-    this._excludingPlugins = true;</span>
<a href="#l8.133"></a><span id="l8.133" class="difflineminus">-    this._excludingMissingExtensions = true;    </span>
<a href="#l8.134"></a><span id="l8.134" class="difflineminus">-    this._view._exclusionSet = [].concat(this._actions);</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineminus">-    if (this._excludingMissingExtensions) {</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineminus">-      this._view._usingExclusionSet = true;</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineminus">-      for (var i = 0; i &lt; this._view._exclusionSet.length;) {</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineminus">-        if (!this._view._exclusionSet[i].hasExtension)</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineminus">-          this._view._exclusionSet.splice(i, 1);</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineminus">-        else</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineminus">-          ++i;</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineminus">-      }</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineminus">-    }</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineminus">-    if (this._excludingPlugins) {</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineminus">-      this._view._usingExclusionSet = true;</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineminus">-      for (i = 0; i &lt; this._view._exclusionSet.length;) {</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineminus">-        if (this._view._exclusionSet[i].handledOnlyByPlugin)</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineminus">-          this._view._exclusionSet.splice(i, 1);</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineminus">-        else</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineminus">-          ++i        </span>
<a href="#l8.151"></a><span id="l8.151" class="difflineminus">-      }      </span>
<a href="#l8.152"></a><span id="l8.152" class="difflineminus">-    }</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineminus">-</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineminus">-    return this._view._usingExclusionSet ? this._view._exclusionSet.length </span>
<a href="#l8.155"></a><span id="l8.155" class="difflineminus">-                                         : this._view._filtered ? this._view._filterSet.length </span>
<a href="#l8.156"></a><span id="l8.156" class="difflineminus">-                                                                : this._actions.length;</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineminus">-  },   </span>
<a href="#l8.158"></a><span id="l8.158" class="difflineminus">-  </span>
<a href="#l8.159"></a><span id="l8.159" class="difflineminus">-  _loadPluginData: function ()</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineminus">-  {</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineminus">-  },</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineminus">-</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineminus">-  _createAction: function (aMIMEType, aActionName, </span>
<a href="#l8.164"></a><span id="l8.164" class="difflineminus">-                           aIsEditable, aHandleMode, aCustomHandler,</span>
<a href="#l8.165"></a><span id="l8.165" class="difflineminus">-                           aPluginAvailable, aPluginEnabled, </span>
<a href="#l8.166"></a><span id="l8.166" class="difflineminus">-                           aHandledOnlyByPlugin)</span>
<a href="#l8.167"></a><span id="l8.167" class="difflineminus">-  {</span>
<a href="#l8.168"></a><span id="l8.168" class="difflineminus">-    var newAction = !(aMIMEType in this._plugins);</span>
<a href="#l8.169"></a><span id="l8.169" class="difflineminus">-    var action = newAction ? new FileAction() : this._plugins[aMIMEType];</span>
<a href="#l8.170"></a><span id="l8.170" class="difflineminus">-    action.type = aMIMEType;</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineminus">-    var info = this._mimeSvc.getFromTypeAndExtension(action.type, null);</span>
<a href="#l8.172"></a><span id="l8.172" class="difflineminus">-    </span>
<a href="#l8.173"></a><span id="l8.173" class="difflineminus">-    // File Extension</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineminus">-    try {</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineminus">-      action.extension = info.primaryExtension;</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineminus">-    }</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineminus">-    catch (e) {</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineminus">-      action.extension = this._bundle.getString(&quot;extensionNone&quot;);</span>
<a href="#l8.179"></a><span id="l8.179" class="difflineminus">-      action.hasExtension = false;</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineminus">-    }</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineminus">-    </span>
<a href="#l8.182"></a><span id="l8.182" class="difflineminus">-    // Large and Small Icon</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineminus">-    try {</span>
<a href="#l8.184"></a><span id="l8.184" class="difflineminus">-      action.smallIcon = &quot;moz-icon://goat.&quot; + info.primaryExtension + &quot;?size=16&quot;;</span>
<a href="#l8.185"></a><span id="l8.185" class="difflineminus">-      action.bigIcon = &quot;moz-icon://goat.&quot; + info.primaryExtension + &quot;?size=32&quot;;</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineminus">-    }</span>
<a href="#l8.187"></a><span id="l8.187" class="difflineminus">-    catch (e) {</span>
<a href="#l8.188"></a><span id="l8.188" class="difflineminus">-      action.smallIcon = &quot;moz-icon://goat?size=16&amp;contentType=&quot; + info.MIMEType;</span>
<a href="#l8.189"></a><span id="l8.189" class="difflineminus">-      action.bigIcon = &quot;moz-icon://goat?contentType=&quot; + info.MIMEType + &quot;&amp;size=32&quot;;</span>
<a href="#l8.190"></a><span id="l8.190" class="difflineminus">-    }</span>
<a href="#l8.191"></a><span id="l8.191" class="difflineminus">-</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineminus">-    // Pretty Type Name</span>
<a href="#l8.193"></a><span id="l8.193" class="difflineminus">-    if (info.description == &quot;&quot;) {</span>
<a href="#l8.194"></a><span id="l8.194" class="difflineminus">-      try {</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineminus">-        action.typeName = this._bundle.getFormattedString(&quot;fileEnding&quot;, [info.primaryExtension.toUpperCase()]);</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineminus">-      }</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineminus">-      catch (e) { </span>
<a href="#l8.198"></a><span id="l8.198" class="difflineminus">-        // Wow, this sucks, just show the MIME type as a last ditch effort to display</span>
<a href="#l8.199"></a><span id="l8.199" class="difflineminus">-        // the type of file that this is. </span>
<a href="#l8.200"></a><span id="l8.200" class="difflineminus">-        action.typeName = info.MIMEType;</span>
<a href="#l8.201"></a><span id="l8.201" class="difflineminus">-      }</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineminus">-    }</span>
<a href="#l8.203"></a><span id="l8.203" class="difflineminus">-    else</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineminus">-      action.typeName = info.description;</span>
<a href="#l8.205"></a><span id="l8.205" class="difflineminus">-</span>
<a href="#l8.206"></a><span id="l8.206" class="difflineminus">-    // Pretty Action Name</span>
<a href="#l8.207"></a><span id="l8.207" class="difflineminus">-    if (aActionName)</span>
<a href="#l8.208"></a><span id="l8.208" class="difflineminus">-      action.action         = aActionName;</span>
<a href="#l8.209"></a><span id="l8.209" class="difflineminus">-    action.pluginAvailable  = aPluginAvailable;</span>
<a href="#l8.210"></a><span id="l8.210" class="difflineminus">-    action.pluginEnabled    = aPluginEnabled;</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineminus">-    action.editable         = aIsEditable;</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineminus">-    action.handleMode       = aHandleMode;</span>
<a href="#l8.213"></a><span id="l8.213" class="difflineminus">-    action.customHandler    = aCustomHandler;</span>
<a href="#l8.214"></a><span id="l8.214" class="difflineminus">-    action.mimeInfo         = info;</span>
<a href="#l8.215"></a><span id="l8.215" class="difflineminus">-    action.handledOnlyByPlugin  = aHandledOnlyByPlugin</span>
<a href="#l8.216"></a><span id="l8.216" class="difflineminus">-    </span>
<a href="#l8.217"></a><span id="l8.217" class="difflineminus">-    if (newAction &amp;&amp; !(action.handledOnlyByPlugin &amp;&amp; !action.pluginEnabled)) {</span>
<a href="#l8.218"></a><span id="l8.218" class="difflineminus">-      this._actions.push(action);</span>
<a href="#l8.219"></a><span id="l8.219" class="difflineminus">-      this._plugins[action.type] = action;</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineminus">-    }      </span>
<a href="#l8.221"></a><span id="l8.221" class="difflineminus">-    return action;</span>
<a href="#l8.222"></a><span id="l8.222" class="difflineminus">-  },</span>
<a href="#l8.223"></a><span id="l8.223" class="difflineminus">-  </span>
<a href="#l8.224"></a><span id="l8.224" class="difflineminus">-  _loadMIMEDS: function ()</span>
<a href="#l8.225"></a><span id="l8.225" class="difflineminus">-  {</span>
<a href="#l8.226"></a><span id="l8.226" class="difflineminus">-    var fileLocator = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineminus">-                                .getService(Components.interfaces.nsIProperties);</span>
<a href="#l8.228"></a><span id="l8.228" class="difflineminus">-    </span>
<a href="#l8.229"></a><span id="l8.229" class="difflineminus">-    var file = fileLocator.get(&quot;UMimTyp&quot;, Components.interfaces.nsIFile);</span>
<a href="#l8.230"></a><span id="l8.230" class="difflineminus">-</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineminus">-    var ioService = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineminus">-                              .getService(Components.interfaces.nsIIOService);</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineminus">-    var fileHandler = ioService.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l8.234"></a><span id="l8.234" class="difflineminus">-                               .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l8.235"></a><span id="l8.235" class="difflineminus">-    this._mimeDS = this._rdf.GetDataSourceBlocking(fileHandler.getURLSpecFromFile(file));</span>
<a href="#l8.236"></a><span id="l8.236" class="difflineminus">-  },</span>
<a href="#l8.237"></a><span id="l8.237" class="difflineminus">-  </span>
<a href="#l8.238"></a><span id="l8.238" class="difflineminus">-  _getLiteralValue: function (aResource, aProperty)</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineminus">-  {</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineminus">-    var property = this._rdf.GetResource(NC_URI(aProperty));</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineminus">-    var value = this._mimeDS.GetTarget(aResource, property, true);</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineminus">-    if (value)</span>
<a href="#l8.243"></a><span id="l8.243" class="difflineminus">-      return value.QueryInterface(Components.interfaces.nsIRDFLiteral).Value;</span>
<a href="#l8.244"></a><span id="l8.244" class="difflineminus">-    return &quot;&quot;;</span>
<a href="#l8.245"></a><span id="l8.245" class="difflineminus">-  },</span>
<a href="#l8.246"></a><span id="l8.246" class="difflineminus">-  </span>
<a href="#l8.247"></a><span id="l8.247" class="difflineminus">-  _getChildResource: function (aResource, aProperty)</span>
<a href="#l8.248"></a><span id="l8.248" class="difflineminus">-  {</span>
<a href="#l8.249"></a><span id="l8.249" class="difflineminus">-    var property = this._rdf.GetResource(NC_URI(aProperty));</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineminus">-    return this._mimeDS.GetTarget(aResource, property, true);</span>
<a href="#l8.251"></a><span id="l8.251" class="difflineminus">-  },</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineminus">-  </span>
<a href="#l8.253"></a><span id="l8.253" class="difflineminus">-  _getDisplayNameForFile: function (aFile)</span>
<a href="#l8.254"></a><span id="l8.254" class="difflineminus">-  {</span>
<a href="#l8.255"></a><span id="l8.255" class="difflineminus">-#ifdef XP_WIN</span>
<a href="#l8.256"></a><span id="l8.256" class="difflineminus">-    if (aFile instanceof Components.interfaces.nsILocalFileWin) {</span>
<a href="#l8.257"></a><span id="l8.257" class="difflineminus">-      try {</span>
<a href="#l8.258"></a><span id="l8.258" class="difflineminus">-        return aFile.getVersionInfoField(&quot;FileDescription&quot;); </span>
<a href="#l8.259"></a><span id="l8.259" class="difflineminus">-      }</span>
<a href="#l8.260"></a><span id="l8.260" class="difflineminus">-      catch (e) {</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineminus">-        // fall through to the filename</span>
<a href="#l8.262"></a><span id="l8.262" class="difflineminus">-      }</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineminus">-    }</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineminus">-#endif</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineminus">-    // XXXben - Read the bundle name on OS X.</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineminus">-    var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineminus">-                        .getService(Components.interfaces.nsIIOService);</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineminus">-    var url = ios.newFileURI(aFile).QueryInterface(Components.interfaces.nsIURL);</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineminus">-    return url.fileName;</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineminus">-  },  </span>
<a href="#l8.271"></a><span id="l8.271" class="difflineminus">-  </span>
<a href="#l8.272"></a><span id="l8.272" class="difflineminus">-  _loadMIMERegistryData: function ()</span>
<a href="#l8.273"></a><span id="l8.273" class="difflineminus">-  {</span>
<a href="#l8.274"></a><span id="l8.274" class="difflineminus">-    this._rdf = Components.classes[&quot;@mozilla.org/rdf/rdf-service;1&quot;]</span>
<a href="#l8.275"></a><span id="l8.275" class="difflineminus">-                          .getService(Components.interfaces.nsIRDFService);</span>
<a href="#l8.276"></a><span id="l8.276" class="difflineminus">-    this._loadMIMEDS();                          </span>
<a href="#l8.277"></a><span id="l8.277" class="difflineminus">-                          </span>
<a href="#l8.278"></a><span id="l8.278" class="difflineminus">-    var root = this._rdf.GetResource(&quot;urn:mimetypes:root&quot;);</span>
<a href="#l8.279"></a><span id="l8.279" class="difflineminus">-    var container = Components.classes[&quot;@mozilla.org/rdf/container;1&quot;]</span>
<a href="#l8.280"></a><span id="l8.280" class="difflineminus">-                              .createInstance(Components.interfaces.nsIRDFContainer);</span>
<a href="#l8.281"></a><span id="l8.281" class="difflineminus">-    container.Init(this._mimeDS, root);</span>
<a href="#l8.282"></a><span id="l8.282" class="difflineminus">-    </span>
<a href="#l8.283"></a><span id="l8.283" class="difflineminus">-    var elements = container.GetElements();</span>
<a href="#l8.284"></a><span id="l8.284" class="difflineminus">-    while (elements.hasMoreElements()) {</span>
<a href="#l8.285"></a><span id="l8.285" class="difflineminus">-      var type = elements.getNext();</span>
<a href="#l8.286"></a><span id="l8.286" class="difflineminus">-      if (!(type instanceof Components.interfaces.nsIRDFResource))</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineminus">-        break;</span>
<a href="#l8.288"></a><span id="l8.288" class="difflineminus">-      var editable = this._getLiteralValue(type, &quot;editable&quot;) == &quot;true&quot;;</span>
<a href="#l8.289"></a><span id="l8.289" class="difflineminus">-      if (!editable)</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineminus">-        continue;</span>
<a href="#l8.291"></a><span id="l8.291" class="difflineminus">-      </span>
<a href="#l8.292"></a><span id="l8.292" class="difflineminus">-      var handler = this._getChildResource(type, &quot;handlerProp&quot;);</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineminus">-      var alwaysAsk = this._getLiteralValue(handler, &quot;alwaysAsk&quot;) == &quot;true&quot;;</span>
<a href="#l8.294"></a><span id="l8.294" class="difflineminus">-      if (alwaysAsk)</span>
<a href="#l8.295"></a><span id="l8.295" class="difflineminus">-        continue;</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineminus">-      var saveToDisk        = this._getLiteralValue(handler, &quot;saveToDisk&quot;) == &quot;true&quot;;</span>
<a href="#l8.297"></a><span id="l8.297" class="difflineminus">-      var useSystemDefault  = this._getLiteralValue(handler, &quot;useSystemDefault&quot;) == &quot;true&quot;;</span>
<a href="#l8.298"></a><span id="l8.298" class="difflineminus">-      var editable          = this._getLiteralValue(type, &quot;editable&quot;) == &quot;true&quot;;</span>
<a href="#l8.299"></a><span id="l8.299" class="difflineminus">-      var handledInternally = this._getLiteralValue(handler, &quot;handleInternal&quot;) == &quot;true&quot;;</span>
<a href="#l8.300"></a><span id="l8.300" class="difflineminus">-      var externalApp       = this._getChildResource(handler, &quot;externalApplication&quot;);</span>
<a href="#l8.301"></a><span id="l8.301" class="difflineminus">-      var externalAppPath   = this._getLiteralValue(externalApp, &quot;path&quot;);</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineminus">-      try {</span>
<a href="#l8.303"></a><span id="l8.303" class="difflineminus">-        var customHandler = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l8.304"></a><span id="l8.304" class="difflineminus">-                                      .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineminus">-        customHandler.initWithPath(externalAppPath);</span>
<a href="#l8.306"></a><span id="l8.306" class="difflineminus">-      }</span>
<a href="#l8.307"></a><span id="l8.307" class="difflineminus">-      catch (e) {</span>
<a href="#l8.308"></a><span id="l8.308" class="difflineminus">-        customHandler = null;</span>
<a href="#l8.309"></a><span id="l8.309" class="difflineminus">-      }      </span>
<a href="#l8.310"></a><span id="l8.310" class="difflineminus">-      if (customHandler &amp;&amp; !customHandler.exists())</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineminus">-        customHandler = null;</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineminus">-      var mimeType = this._getLiteralValue(type, &quot;value&quot;);</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineminus">-      var typeInfo = this._mimeSvc.getFromTypeAndExtension(mimeType, null);</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineminus">-</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineminus">-      // Determine the pretty name of the associated action.</span>
<a href="#l8.316"></a><span id="l8.316" class="difflineminus">-      var actionName = &quot;&quot;;</span>
<a href="#l8.317"></a><span id="l8.317" class="difflineminus">-      var handleMode = 0;</span>
<a href="#l8.318"></a><span id="l8.318" class="difflineminus">-      if (saveToDisk) {</span>
<a href="#l8.319"></a><span id="l8.319" class="difflineminus">-        // Save the file to disk</span>
<a href="#l8.320"></a><span id="l8.320" class="difflineminus">-        actionName = this._bundle.getString(&quot;saveToDisk&quot;);</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineminus">-        handleMode = FILEACTION_SAVE_TO_DISK;</span>
<a href="#l8.322"></a><span id="l8.322" class="difflineminus">-      }</span>
<a href="#l8.323"></a><span id="l8.323" class="difflineminus">-      else if (useSystemDefault) {</span>
<a href="#l8.324"></a><span id="l8.324" class="difflineminus">-        // Use the System Default handler</span>
<a href="#l8.325"></a><span id="l8.325" class="difflineminus">-        actionName = this._bundle.getFormattedString(&quot;openWith&quot;, </span>
<a href="#l8.326"></a><span id="l8.326" class="difflineminus">-                                                     [typeInfo.defaultDescription]);</span>
<a href="#l8.327"></a><span id="l8.327" class="difflineminus">-        handleMode = FILEACTION_OPEN_DEFAULT;</span>
<a href="#l8.328"></a><span id="l8.328" class="difflineminus">-      }</span>
<a href="#l8.329"></a><span id="l8.329" class="difflineminus">-      else {</span>
<a href="#l8.330"></a><span id="l8.330" class="difflineminus">-        // Custom Handler</span>
<a href="#l8.331"></a><span id="l8.331" class="difflineminus">-        if (customHandler) {</span>
<a href="#l8.332"></a><span id="l8.332" class="difflineminus">-          actionName = this._bundle.getFormattedString(&quot;openWith&quot;, </span>
<a href="#l8.333"></a><span id="l8.333" class="difflineminus">-                                                       [this._getDisplayNameForFile(customHandler)]);</span>
<a href="#l8.334"></a><span id="l8.334" class="difflineminus">-          handleMode = FILEACTION_OPEN_CUSTOM;</span>
<a href="#l8.335"></a><span id="l8.335" class="difflineminus">-        }</span>
<a href="#l8.336"></a><span id="l8.336" class="difflineminus">-        else {</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineminus">-          // Corrupt datasource, invalid custom handler path. Revert to default.</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineminus">-          actionName = this._bundle.getFormattedString(&quot;openWith&quot;, </span>
<a href="#l8.339"></a><span id="l8.339" class="difflineminus">-                                                       [typeInfo.defaultDescription]);</span>
<a href="#l8.340"></a><span id="l8.340" class="difflineminus">-          handleMode = FILEACTION_OPEN_DEFAULT;</span>
<a href="#l8.341"></a><span id="l8.341" class="difflineminus">-        }</span>
<a href="#l8.342"></a><span id="l8.342" class="difflineminus">-      }</span>
<a href="#l8.343"></a><span id="l8.343" class="difflineminus">-</span>
<a href="#l8.344"></a><span id="l8.344" class="difflineminus">-      if (handledInternally)</span>
<a href="#l8.345"></a><span id="l8.345" class="difflineminus">-        handleMode = FILEACTION_OPEN_INTERNALLY;</span>
<a href="#l8.346"></a><span id="l8.346" class="difflineminus">-      </span>
<a href="#l8.347"></a><span id="l8.347" class="difflineminus">-      var pluginAvailable = mimeType in this._plugins &amp;&amp; this._plugins[mimeType].pluginAvailable;</span>
<a href="#l8.348"></a><span id="l8.348" class="difflineminus">-      var pluginEnabled = pluginAvailable &amp;&amp; this._plugins[mimeType].pluginEnabled;</span>
<a href="#l8.349"></a><span id="l8.349" class="difflineminus">-      if (pluginEnabled) {</span>
<a href="#l8.350"></a><span id="l8.350" class="difflineminus">-        handleMode = FILEACTION_OPEN_PLUGIN;</span>
<a href="#l8.351"></a><span id="l8.351" class="difflineminus">-        actionName = null;</span>
<a href="#l8.352"></a><span id="l8.352" class="difflineminus">-      }</span>
<a href="#l8.353"></a><span id="l8.353" class="difflineminus">-      var action = this._createAction(mimeType, actionName, editable, handleMode, </span>
<a href="#l8.354"></a><span id="l8.354" class="difflineminus">-                                      customHandler, pluginAvailable, pluginEnabled,</span>
<a href="#l8.355"></a><span id="l8.355" class="difflineminus">-                                      false);</span>
<a href="#l8.356"></a><span id="l8.356" class="difflineminus">-    }</span>
<a href="#l8.357"></a><span id="l8.357" class="difflineminus">-  },</span>
<a href="#l8.358"></a><span id="l8.358" class="difflineminus">-  </span>
<a href="#l8.359"></a><span id="l8.359" class="difflineminus">-  _view: {</span>
<a href="#l8.360"></a><span id="l8.360" class="difflineminus">-    _filtered           : false,</span>
<a href="#l8.361"></a><span id="l8.361" class="difflineminus">-    _filterSet          : [],</span>
<a href="#l8.362"></a><span id="l8.362" class="difflineminus">-    _usingExclusionSet  : false,</span>
<a href="#l8.363"></a><span id="l8.363" class="difflineminus">-    _exclusionSet       : [],</span>
<a href="#l8.364"></a><span id="l8.364" class="difflineminus">-    _filterValue        : &quot;&quot;,</span>
<a href="#l8.365"></a><span id="l8.365" class="difflineminus">-</span>
<a href="#l8.366"></a><span id="l8.366" class="difflineminus">-    _rowCount: 0,</span>
<a href="#l8.367"></a><span id="l8.367" class="difflineminus">-    get rowCount() </span>
<a href="#l8.368"></a><span id="l8.368" class="difflineminus">-    { </span>
<a href="#l8.369"></a><span id="l8.369" class="difflineminus">-      return this._rowCount; </span>
<a href="#l8.370"></a><span id="l8.370" class="difflineminus">-    },</span>
<a href="#l8.371"></a><span id="l8.371" class="difflineminus">-    </span>
<a href="#l8.372"></a><span id="l8.372" class="difflineminus">-    get activeCollection ()</span>
<a href="#l8.373"></a><span id="l8.373" class="difflineminus">-    {</span>
<a href="#l8.374"></a><span id="l8.374" class="difflineminus">-      return this._filtered ? this._filterSet </span>
<a href="#l8.375"></a><span id="l8.375" class="difflineminus">-                            : this._usingExclusionSet ? this._exclusionSet </span>
<a href="#l8.376"></a><span id="l8.376" class="difflineminus">-                                                      : gDownloadActionsWindow._actions;</span>
<a href="#l8.377"></a><span id="l8.377" class="difflineminus">-    },</span>
<a href="#l8.378"></a><span id="l8.378" class="difflineminus">-</span>
<a href="#l8.379"></a><span id="l8.379" class="difflineminus">-    getItemAtIndex: function (aIndex)</span>
<a href="#l8.380"></a><span id="l8.380" class="difflineminus">-    {</span>
<a href="#l8.381"></a><span id="l8.381" class="difflineminus">-      return this.activeCollection[aIndex];</span>
<a href="#l8.382"></a><span id="l8.382" class="difflineminus">-    },</span>
<a href="#l8.383"></a><span id="l8.383" class="difflineminus">-    </span>
<a href="#l8.384"></a><span id="l8.384" class="difflineminus">-    getCellText: function (aIndex, aColumn)</span>
<a href="#l8.385"></a><span id="l8.385" class="difflineminus">-    {</span>
<a href="#l8.386"></a><span id="l8.386" class="difflineminus">-      switch (aColumn.id) {</span>
<a href="#l8.387"></a><span id="l8.387" class="difflineminus">-      case &quot;fileExtension&quot;:</span>
<a href="#l8.388"></a><span id="l8.388" class="difflineminus">-        return this.getItemAtIndex(aIndex).extension.toUpperCase();</span>
<a href="#l8.389"></a><span id="l8.389" class="difflineminus">-      case &quot;fileType&quot;:</span>
<a href="#l8.390"></a><span id="l8.390" class="difflineminus">-        return this.getItemAtIndex(aIndex).typeName;</span>
<a href="#l8.391"></a><span id="l8.391" class="difflineminus">-      case &quot;fileMIMEType&quot;:</span>
<a href="#l8.392"></a><span id="l8.392" class="difflineminus">-        return this.getItemAtIndex(aIndex).type;</span>
<a href="#l8.393"></a><span id="l8.393" class="difflineminus">-      case &quot;fileHandler&quot;:</span>
<a href="#l8.394"></a><span id="l8.394" class="difflineminus">-        return this.getItemAtIndex(aIndex).action;</span>
<a href="#l8.395"></a><span id="l8.395" class="difflineminus">-      }</span>
<a href="#l8.396"></a><span id="l8.396" class="difflineminus">-      return &quot;&quot;;</span>
<a href="#l8.397"></a><span id="l8.397" class="difflineminus">-    },</span>
<a href="#l8.398"></a><span id="l8.398" class="difflineminus">-    getImageSrc: function (aIndex, aColumn) </span>
<a href="#l8.399"></a><span id="l8.399" class="difflineminus">-    {</span>
<a href="#l8.400"></a><span id="l8.400" class="difflineminus">-      if (aColumn.id == &quot;fileExtension&quot;) </span>
<a href="#l8.401"></a><span id="l8.401" class="difflineminus">-        return this.getItemAtIndex(aIndex).smallIcon;</span>
<a href="#l8.402"></a><span id="l8.402" class="difflineminus">-      return &quot;&quot;;</span>
<a href="#l8.403"></a><span id="l8.403" class="difflineminus">-    },</span>
<a href="#l8.404"></a><span id="l8.404" class="difflineminus">-    _selection: null, </span>
<a href="#l8.405"></a><span id="l8.405" class="difflineminus">-    get selection () { return this._selection; },</span>
<a href="#l8.406"></a><span id="l8.406" class="difflineminus">-    set selection (val) { this._selection = val; return val; },</span>
<a href="#l8.407"></a><span id="l8.407" class="difflineminus">-    getRowProperties: function (aIndex, aProperties) {},</span>
<a href="#l8.408"></a><span id="l8.408" class="difflineminus">-    getCellProperties: function (aIndex, aColumn, aProperties) {},</span>
<a href="#l8.409"></a><span id="l8.409" class="difflineminus">-    getColumnProperties: function (aColumn, aProperties) {},</span>
<a href="#l8.410"></a><span id="l8.410" class="difflineminus">-    isContainer: function (aIndex) { return false; },</span>
<a href="#l8.411"></a><span id="l8.411" class="difflineminus">-    isContainerOpen: function (aIndex) { return false; },</span>
<a href="#l8.412"></a><span id="l8.412" class="difflineminus">-    isContainerEmpty: function (aIndex) { return false; },</span>
<a href="#l8.413"></a><span id="l8.413" class="difflineminus">-    isSeparator: function (aIndex) { return false; },</span>
<a href="#l8.414"></a><span id="l8.414" class="difflineminus">-    isSorted: function (aIndex) { return false; },</span>
<a href="#l8.415"></a><span id="l8.415" class="difflineminus">-    canDrop: function (aIndex, aOrientation) { return false; },</span>
<a href="#l8.416"></a><span id="l8.416" class="difflineminus">-    drop: function (aIndex, aOrientation) {},</span>
<a href="#l8.417"></a><span id="l8.417" class="difflineminus">-    getParentIndex: function (aIndex) { return -1; },</span>
<a href="#l8.418"></a><span id="l8.418" class="difflineminus">-    hasNextSibling: function (aParentIndex, aIndex) { return false; },</span>
<a href="#l8.419"></a><span id="l8.419" class="difflineminus">-    getLevel: function (aIndex) { return 0; },</span>
<a href="#l8.420"></a><span id="l8.420" class="difflineminus">-    getProgressMode: function (aIndex, aColumn) {},    </span>
<a href="#l8.421"></a><span id="l8.421" class="difflineminus">-    getCellValue: function (aIndex, aColumn) {},</span>
<a href="#l8.422"></a><span id="l8.422" class="difflineminus">-    setTree: function (aTree) {},    </span>
<a href="#l8.423"></a><span id="l8.423" class="difflineminus">-    toggleOpenState: function (aIndex) { },</span>
<a href="#l8.424"></a><span id="l8.424" class="difflineminus">-    cycleHeader: function (aColumn) {},    </span>
<a href="#l8.425"></a><span id="l8.425" class="difflineminus">-    selectionChanged: function () {},    </span>
<a href="#l8.426"></a><span id="l8.426" class="difflineminus">-    cycleCell: function (aIndex, aColumn) {},    </span>
<a href="#l8.427"></a><span id="l8.427" class="difflineminus">-    isEditable: function (aIndex, aColumn) { return false; },</span>
<a href="#l8.428"></a><span id="l8.428" class="difflineminus">-    isSelectable: function (aIndex, aColumn) { return false; },</span>
<a href="#l8.429"></a><span id="l8.429" class="difflineminus">-    setCellValue: function (aIndex, aColumn, aValue) {},    </span>
<a href="#l8.430"></a><span id="l8.430" class="difflineminus">-    setCellText: function (aIndex, aColumn, aValue) {},    </span>
<a href="#l8.431"></a><span id="l8.431" class="difflineminus">-    performAction: function (aAction) {},  </span>
<a href="#l8.432"></a><span id="l8.432" class="difflineminus">-    performActionOnRow: function (aAction, aIndex) {},    </span>
<a href="#l8.433"></a><span id="l8.433" class="difflineminus">-    performActionOnCell: function (aAction, aindex, aColumn) {}</span>
<a href="#l8.434"></a><span id="l8.434" class="difflineminus">-  },</span>
<a href="#l8.435"></a><span id="l8.435" class="difflineminus">-</span>
<a href="#l8.436"></a><span id="l8.436" class="difflineminus">-  removeFileHandler: function ()</span>
<a href="#l8.437"></a><span id="l8.437" class="difflineminus">-  {</span>
<a href="#l8.438"></a><span id="l8.438" class="difflineminus">-    var selection = this._tree.view.selection; </span>
<a href="#l8.439"></a><span id="l8.439" class="difflineminus">-    if (selection.count &lt; 1)</span>
<a href="#l8.440"></a><span id="l8.440" class="difflineminus">-      return;</span>
<a href="#l8.441"></a><span id="l8.441" class="difflineminus">-      </span>
<a href="#l8.442"></a><span id="l8.442" class="difflineminus">-    var promptService = Components.classes[&quot;@mozilla.org/embedcomp/prompt-service;1&quot;]</span>
<a href="#l8.443"></a><span id="l8.443" class="difflineminus">-                                  .getService(Components.interfaces.nsIPromptService);</span>
<a href="#l8.444"></a><span id="l8.444" class="difflineminus">-    var flags = promptService.BUTTON_TITLE_IS_STRING * promptService.BUTTON_POS_0;</span>
<a href="#l8.445"></a><span id="l8.445" class="difflineminus">-    flags += promptService.BUTTON_TITLE_CANCEL * promptService.BUTTON_POS_1;</span>
<a href="#l8.446"></a><span id="l8.446" class="difflineminus">-</span>
<a href="#l8.447"></a><span id="l8.447" class="difflineminus">-    var title = this._bundle.getString(&quot;removeTitle&quot; + (selection.count &gt; 1 ? &quot;Multiple&quot; : &quot;Single&quot;));</span>
<a href="#l8.448"></a><span id="l8.448" class="difflineminus">-    var message = this._bundle.getString(&quot;removeMessage&quot; + (selection.count &gt; 1 ? &quot;Multiple&quot; : &quot;Single&quot;));</span>
<a href="#l8.449"></a><span id="l8.449" class="difflineminus">-    var button = this._bundle.getString(&quot;removeButton&quot; + (selection.count &gt; 1 ? &quot;Multiple&quot; : &quot;Single&quot;));</span>
<a href="#l8.450"></a><span id="l8.450" class="difflineminus">-    rv = promptService.confirmEx(window, title, message, flags, button, </span>
<a href="#l8.451"></a><span id="l8.451" class="difflineminus">-                                 null, null, null, { value: 0 });</span>
<a href="#l8.452"></a><span id="l8.452" class="difflineminus">-    if (rv != 0)</span>
<a href="#l8.453"></a><span id="l8.453" class="difflineminus">-      return;     </span>
<a href="#l8.454"></a><span id="l8.454" class="difflineminus">-</span>
<a href="#l8.455"></a><span id="l8.455" class="difflineminus">-    var rangeCount = selection.getRangeCount();</span>
<a href="#l8.456"></a><span id="l8.456" class="difflineminus">-    var lastSelected = 0;</span>
<a href="#l8.457"></a><span id="l8.457" class="difflineminus">-    var mimeDSDirty = false;</span>
<a href="#l8.458"></a><span id="l8.458" class="difflineminus">-    for (var i = 0; i &lt; rangeCount; ++i) {</span>
<a href="#l8.459"></a><span id="l8.459" class="difflineminus">-      var min = { }; var max = { };</span>
<a href="#l8.460"></a><span id="l8.460" class="difflineminus">-      selection.getRangeAt(i, min, max);</span>
<a href="#l8.461"></a><span id="l8.461" class="difflineminus">-      for (var j = min.value; j &lt;= max.value; ++j) {</span>
<a href="#l8.462"></a><span id="l8.462" class="difflineminus">-        var item = this._view.getItemAtIndex(j);</span>
<a href="#l8.463"></a><span id="l8.463" class="difflineminus">-        if (!item.handledOnlyByPlugin) {</span>
<a href="#l8.464"></a><span id="l8.464" class="difflineminus">-          // There is data for this type in the MIME registry, so make sure we</span>
<a href="#l8.465"></a><span id="l8.465" class="difflineminus">-          // remove it from the MIME registry. We don't disable the plugin here because</span>
<a href="#l8.466"></a><span id="l8.466" class="difflineminus">-          // if we do there's currently no way through the UI to re-enable it. We may</span>
<a href="#l8.467"></a><span id="l8.467" class="difflineminus">-          // come up with some sort of solution for that at a later date. </span>
<a href="#l8.468"></a><span id="l8.468" class="difflineminus">-          var typeRes = this._rdf.GetResource(MIME_URI(item.type));</span>
<a href="#l8.469"></a><span id="l8.469" class="difflineminus">-          var handlerRes = this._getChildResource(typeRes, &quot;handlerProp&quot;);</span>
<a href="#l8.470"></a><span id="l8.470" class="difflineminus">-          var extAppRes = this._getChildResource(handlerRes, &quot;externalApplication&quot;);</span>
<a href="#l8.471"></a><span id="l8.471" class="difflineminus">-          this._cleanResource(extAppRes);</span>
<a href="#l8.472"></a><span id="l8.472" class="difflineminus">-          this._cleanResource(handlerRes);</span>
<a href="#l8.473"></a><span id="l8.473" class="difflineminus">-          this._cleanResource(typeRes); </span>
<a href="#l8.474"></a><span id="l8.474" class="difflineminus">-          mimeDSDirty = true;         </span>
<a href="#l8.475"></a><span id="l8.475" class="difflineminus">-        }</span>
<a href="#l8.476"></a><span id="l8.476" class="difflineminus">-        lastSelected = (j + 1) &gt;= this._view.rowCount ? j-1 : j;</span>
<a href="#l8.477"></a><span id="l8.477" class="difflineminus">-      }</span>
<a href="#l8.478"></a><span id="l8.478" class="difflineminus">-    }</span>
<a href="#l8.479"></a><span id="l8.479" class="difflineminus">-    if (mimeDSDirty &amp;&amp; </span>
<a href="#l8.480"></a><span id="l8.480" class="difflineminus">-        this._mimeDS instanceof Components.interfaces.nsIRDFRemoteDataSource)</span>
<a href="#l8.481"></a><span id="l8.481" class="difflineminus">-      this._mimeDS.Flush();</span>
<a href="#l8.482"></a><span id="l8.482" class="difflineminus">-    </span>
<a href="#l8.483"></a><span id="l8.483" class="difflineminus">-    // Just reload the list to make sure deletions are respected</span>
<a href="#l8.484"></a><span id="l8.484" class="difflineminus">-    this._loadView();</span>
<a href="#l8.485"></a><span id="l8.485" class="difflineminus">-    this._updateRowCount(this._updateExclusions());</span>
<a href="#l8.486"></a><span id="l8.486" class="difflineminus">-</span>
<a href="#l8.487"></a><span id="l8.487" class="difflineminus">-    selection.select(lastSelected);</span>
<a href="#l8.488"></a><span id="l8.488" class="difflineminus">-  },</span>
<a href="#l8.489"></a><span id="l8.489" class="difflineminus">-  </span>
<a href="#l8.490"></a><span id="l8.490" class="difflineminus">-  _cleanResource: function (aResource)</span>
<a href="#l8.491"></a><span id="l8.491" class="difflineminus">-  {</span>
<a href="#l8.492"></a><span id="l8.492" class="difflineminus">-    var labels = this._mimeDS.ArcLabelsOut(aResource);</span>
<a href="#l8.493"></a><span id="l8.493" class="difflineminus">-    while (labels.hasMoreElements()) {</span>
<a href="#l8.494"></a><span id="l8.494" class="difflineminus">-      var arc = labels.getNext();</span>
<a href="#l8.495"></a><span id="l8.495" class="difflineminus">-      if (!(arc instanceof Components.interfaces.nsIRDFResource))</span>
<a href="#l8.496"></a><span id="l8.496" class="difflineminus">-        break;</span>
<a href="#l8.497"></a><span id="l8.497" class="difflineminus">-      var target = this._mimeDS.GetTarget(aResource, arc, true);</span>
<a href="#l8.498"></a><span id="l8.498" class="difflineminus">-      this._mimeDS.Unassert(aResource, arc, target);</span>
<a href="#l8.499"></a><span id="l8.499" class="difflineminus">-    }</span>
<a href="#l8.500"></a><span id="l8.500" class="difflineminus">-  },</span>
<a href="#l8.501"></a><span id="l8.501" class="difflineminus">-  </span>
<a href="#l8.502"></a><span id="l8.502" class="difflineminus">-  _disablePluginForItem: function (aItem)</span>
<a href="#l8.503"></a><span id="l8.503" class="difflineminus">-  {</span>
<a href="#l8.504"></a><span id="l8.504" class="difflineminus">-  },</span>
<a href="#l8.505"></a><span id="l8.505" class="difflineminus">-  </span>
<a href="#l8.506"></a><span id="l8.506" class="difflineminus">-  _enablePluginForItem: function (aItem)</span>
<a href="#l8.507"></a><span id="l8.507" class="difflineminus">-  {</span>
<a href="#l8.508"></a><span id="l8.508" class="difflineminus">-  },</span>
<a href="#l8.509"></a><span id="l8.509" class="difflineminus">-  </span>
<a href="#l8.510"></a><span id="l8.510" class="difflineminus">-  _ensureMIMERegistryEntry: function (aItem)</span>
<a href="#l8.511"></a><span id="l8.511" class="difflineminus">-  {</span>
<a href="#l8.512"></a><span id="l8.512" class="difflineminus">-    var root = this._rdf.GetResource(&quot;urn:mimetypes:root&quot;);</span>
<a href="#l8.513"></a><span id="l8.513" class="difflineminus">-    var container = Components.classes[&quot;@mozilla.org/rdf/container;1&quot;]</span>
<a href="#l8.514"></a><span id="l8.514" class="difflineminus">-                              .createInstance(Components.interfaces.nsIRDFContainer);</span>
<a href="#l8.515"></a><span id="l8.515" class="difflineminus">-    container.Init(this._mimeDS, root);</span>
<a href="#l8.516"></a><span id="l8.516" class="difflineminus">-    </span>
<a href="#l8.517"></a><span id="l8.517" class="difflineminus">-    var itemResource = this._rdf.GetResource(MIME_URI(aItem.type));</span>
<a href="#l8.518"></a><span id="l8.518" class="difflineminus">-    var handlerResource = null;</span>
<a href="#l8.519"></a><span id="l8.519" class="difflineminus">-    if (container.IndexOf(itemResource) == -1) {</span>
<a href="#l8.520"></a><span id="l8.520" class="difflineminus">-      container.AppendElement(itemResource);</span>
<a href="#l8.521"></a><span id="l8.521" class="difflineminus">-      this._setLiteralValue(itemResource, &quot;editable&quot;, &quot;true&quot;);</span>
<a href="#l8.522"></a><span id="l8.522" class="difflineminus">-      this._setLiteralValue(itemResource, &quot;value&quot;, aItem.type);</span>
<a href="#l8.523"></a><span id="l8.523" class="difflineminus">-      </span>
<a href="#l8.524"></a><span id="l8.524" class="difflineminus">-      handlerResource = this._rdf.GetResource(HANDLER_URI(aItem.type));</span>
<a href="#l8.525"></a><span id="l8.525" class="difflineminus">-      this._setLiteralValue(handlerResource, &quot;alwaysAsk&quot;, &quot;false&quot;);</span>
<a href="#l8.526"></a><span id="l8.526" class="difflineminus">-      var handlerProp = this._rdf.GetResource(NC_URI(&quot;handlerProp&quot;));</span>
<a href="#l8.527"></a><span id="l8.527" class="difflineminus">-      this._mimeDS.Assert(itemResource, handlerProp, handlerResource, true);</span>
<a href="#l8.528"></a><span id="l8.528" class="difflineminus">-      </span>
<a href="#l8.529"></a><span id="l8.529" class="difflineminus">-      var extAppResource = this._rdf.GetResource(APP_URI(aItem.type));</span>
<a href="#l8.530"></a><span id="l8.530" class="difflineminus">-      this._setLiteralValue(extAppResource, &quot;path&quot;, &quot;&quot;);</span>
<a href="#l8.531"></a><span id="l8.531" class="difflineminus">-      var extAppProp = this._rdf.GetResource(NC_URI(&quot;externalApplication&quot;));</span>
<a href="#l8.532"></a><span id="l8.532" class="difflineminus">-      this._mimeDS.Assert(handlerResource, extAppProp, extAppResource, true);</span>
<a href="#l8.533"></a><span id="l8.533" class="difflineminus">-    }</span>
<a href="#l8.534"></a><span id="l8.534" class="difflineminus">-    else</span>
<a href="#l8.535"></a><span id="l8.535" class="difflineminus">-      handlerResource = this._getChildResource(itemResource, &quot;handlerProp&quot;);</span>
<a href="#l8.536"></a><span id="l8.536" class="difflineminus">-        </span>
<a href="#l8.537"></a><span id="l8.537" class="difflineminus">-    return handlerResource;</span>
<a href="#l8.538"></a><span id="l8.538" class="difflineminus">-  },</span>
<a href="#l8.539"></a><span id="l8.539" class="difflineminus">-  </span>
<a href="#l8.540"></a><span id="l8.540" class="difflineminus">-  _setLiteralValue: function (aResource, aProperty, aValue)</span>
<a href="#l8.541"></a><span id="l8.541" class="difflineminus">-  {</span>
<a href="#l8.542"></a><span id="l8.542" class="difflineminus">-    var property = this._rdf.GetResource(NC_URI(aProperty));</span>
<a href="#l8.543"></a><span id="l8.543" class="difflineminus">-    var newValue = this._rdf.GetLiteral(aValue);</span>
<a href="#l8.544"></a><span id="l8.544" class="difflineminus">-    var oldValue = this._mimeDS.GetTarget(aResource, property, true);</span>
<a href="#l8.545"></a><span id="l8.545" class="difflineminus">-    if (oldValue)</span>
<a href="#l8.546"></a><span id="l8.546" class="difflineminus">-      this._mimeDS.Change(aResource, property, oldValue, newValue);</span>
<a href="#l8.547"></a><span id="l8.547" class="difflineminus">-    else</span>
<a href="#l8.548"></a><span id="l8.548" class="difflineminus">-      this._mimeDS.Assert(aResource, property, newValue, true);</span>
<a href="#l8.549"></a><span id="l8.549" class="difflineminus">-  },</span>
<a href="#l8.550"></a><span id="l8.550" class="difflineminus">-  </span>
<a href="#l8.551"></a><span id="l8.551" class="difflineminus">-  editFileHandler: function ()</span>
<a href="#l8.552"></a><span id="l8.552" class="difflineminus">-  {</span>
<a href="#l8.553"></a><span id="l8.553" class="difflineminus">-    var selection = this._tree.view.selection; </span>
<a href="#l8.554"></a><span id="l8.554" class="difflineminus">-    if (selection.count != 1)</span>
<a href="#l8.555"></a><span id="l8.555" class="difflineminus">-      return;</span>
<a href="#l8.556"></a><span id="l8.556" class="difflineminus">-</span>
<a href="#l8.557"></a><span id="l8.557" class="difflineminus">-    var item = this._view.getItemAtIndex(selection.currentIndex);</span>
<a href="#l8.558"></a><span id="l8.558" class="difflineminus">-    openDialog(&quot;chrome://messenger/content/preferences/changeaction.xul&quot;, </span>
<a href="#l8.559"></a><span id="l8.559" class="difflineminus">-               &quot;_blank&quot;, &quot;modal,centerscreen&quot;, item);</span>
<a href="#l8.560"></a><span id="l8.560" class="difflineminus">-    </span>
<a href="#l8.561"></a><span id="l8.561" class="difflineminus">-    // Update the database</span>
<a href="#l8.562"></a><span id="l8.562" class="difflineminus">-    switch (item.handleMode) {</span>
<a href="#l8.563"></a><span id="l8.563" class="difflineminus">-    case FILEACTION_OPEN_PLUGIN:</span>
<a href="#l8.564"></a><span id="l8.564" class="difflineminus">-      this._enablePluginForItem(item);</span>
<a href="#l8.565"></a><span id="l8.565" class="difflineminus">-      // We don't need to adjust the database because plugin settings always</span>
<a href="#l8.566"></a><span id="l8.566" class="difflineminus">-      // supercede whatever is in the db, leaving it untouched allows the last</span>
<a href="#l8.567"></a><span id="l8.567" class="difflineminus">-      // user setting(s) to be preserved if they ever revert.</span>
<a href="#l8.568"></a><span id="l8.568" class="difflineminus">-      break;</span>
<a href="#l8.569"></a><span id="l8.569" class="difflineminus">-    case FILEACTION_OPEN_DEFAULT:</span>
<a href="#l8.570"></a><span id="l8.570" class="difflineminus">-      this._disablePluginForItem(item);</span>
<a href="#l8.571"></a><span id="l8.571" class="difflineminus">-      var handlerRes = this._ensureMIMERegistryEntry(item);</span>
<a href="#l8.572"></a><span id="l8.572" class="difflineminus">-      this._setLiteralValue(handlerRes, &quot;useSystemDefault&quot;, &quot;true&quot;);</span>
<a href="#l8.573"></a><span id="l8.573" class="difflineminus">-      this._setLiteralValue(handlerRes, &quot;saveToDisk&quot;, &quot;false&quot;);</span>
<a href="#l8.574"></a><span id="l8.574" class="difflineminus">-      break;</span>
<a href="#l8.575"></a><span id="l8.575" class="difflineminus">-    case FILEACTION_OPEN_CUSTOM:</span>
<a href="#l8.576"></a><span id="l8.576" class="difflineminus">-      this._disablePluginForItem(item);</span>
<a href="#l8.577"></a><span id="l8.577" class="difflineminus">-      var handlerRes = this._ensureMIMERegistryEntry(item);</span>
<a href="#l8.578"></a><span id="l8.578" class="difflineminus">-      this._setLiteralValue(handlerRes, &quot;useSystemDefault&quot;, &quot;false&quot;);</span>
<a href="#l8.579"></a><span id="l8.579" class="difflineminus">-      this._setLiteralValue(handlerRes, &quot;saveToDisk&quot;, &quot;false&quot;);</span>
<a href="#l8.580"></a><span id="l8.580" class="difflineminus">-      var extAppRes = this._getChildResource(handlerRes, &quot;externalApplication&quot;);</span>
<a href="#l8.581"></a><span id="l8.581" class="difflineminus">-      this._setLiteralValue(extAppRes, &quot;path&quot;, item.customHandler.path);</span>
<a href="#l8.582"></a><span id="l8.582" class="difflineminus">-      break;</span>
<a href="#l8.583"></a><span id="l8.583" class="difflineminus">-    case FILEACTION_SAVE_TO_DISK:</span>
<a href="#l8.584"></a><span id="l8.584" class="difflineminus">-      this._disablePluginForItem(item);</span>
<a href="#l8.585"></a><span id="l8.585" class="difflineminus">-      var handlerRes = this._ensureMIMERegistryEntry(item);</span>
<a href="#l8.586"></a><span id="l8.586" class="difflineminus">-      this._setLiteralValue(handlerRes, &quot;useSystemDefault&quot;, &quot;false&quot;);</span>
<a href="#l8.587"></a><span id="l8.587" class="difflineminus">-      this._setLiteralValue(handlerRes, &quot;saveToDisk&quot;, &quot;true&quot;);</span>
<a href="#l8.588"></a><span id="l8.588" class="difflineminus">-      break;</span>
<a href="#l8.589"></a><span id="l8.589" class="difflineminus">-    }</span>
<a href="#l8.590"></a><span id="l8.590" class="difflineminus">-    </span>
<a href="#l8.591"></a><span id="l8.591" class="difflineminus">-    if (this._mimeDS instanceof Components.interfaces.nsIRDFRemoteDataSource)</span>
<a href="#l8.592"></a><span id="l8.592" class="difflineminus">-      this._mimeDS.Flush();</span>
<a href="#l8.593"></a><span id="l8.593" class="difflineminus">-    </span>
<a href="#l8.594"></a><span id="l8.594" class="difflineminus">-    // Update the view</span>
<a href="#l8.595"></a><span id="l8.595" class="difflineminus">-    this._tree.treeBoxObject.invalidateRow(selection.currentIndex);    </span>
<a href="#l8.596"></a><span id="l8.596" class="difflineminus">-  },</span>
<a href="#l8.597"></a><span id="l8.597" class="difflineminus">-  </span>
<a href="#l8.598"></a><span id="l8.598" class="difflineminus">-  onSelectionChanged: function ()</span>
<a href="#l8.599"></a><span id="l8.599" class="difflineminus">-  {</span>
<a href="#l8.600"></a><span id="l8.600" class="difflineminus">-    if (this._tree.view.rowCount == 0)</span>
<a href="#l8.601"></a><span id="l8.601" class="difflineminus">-      return;</span>
<a href="#l8.602"></a><span id="l8.602" class="difflineminus">-      </span>
<a href="#l8.603"></a><span id="l8.603" class="difflineminus">-    var selection = this._tree.view.selection; </span>
<a href="#l8.604"></a><span id="l8.604" class="difflineminus">-    var selected = selection.count;</span>
<a href="#l8.605"></a><span id="l8.605" class="difflineminus">-    this._removeButton.disabled = selected == 0;</span>
<a href="#l8.606"></a><span id="l8.606" class="difflineminus">-    this._editButton.disabled = selected != 1;</span>
<a href="#l8.607"></a><span id="l8.607" class="difflineminus">-    var stringKey = selected &gt; 1 ? &quot;removeButtonMultiple&quot; : &quot;removeButtonSingle&quot;;</span>
<a href="#l8.608"></a><span id="l8.608" class="difflineminus">-    this._removeButton.label = this._bundle.getString(stringKey);</span>
<a href="#l8.609"></a><span id="l8.609" class="difflineminus">-    </span>
<a href="#l8.610"></a><span id="l8.610" class="difflineminus">-    var canRemove = true;</span>
<a href="#l8.611"></a><span id="l8.611" class="difflineminus">-    var canEdit = true;</span>
<a href="#l8.612"></a><span id="l8.612" class="difflineminus">-    </span>
<a href="#l8.613"></a><span id="l8.613" class="difflineminus">-    var rangeCount = selection.getRangeCount();</span>
<a href="#l8.614"></a><span id="l8.614" class="difflineminus">-    var min = { }, max = { };</span>
<a href="#l8.615"></a><span id="l8.615" class="difflineminus">-    var setLastSelected = false;</span>
<a href="#l8.616"></a><span id="l8.616" class="difflineminus">-    for (var i = 0; i &lt; rangeCount; ++i) {</span>
<a href="#l8.617"></a><span id="l8.617" class="difflineminus">-      selection.getRangeAt(i, min, max);</span>
<a href="#l8.618"></a><span id="l8.618" class="difflineminus">-      </span>
<a href="#l8.619"></a><span id="l8.619" class="difflineminus">-      for (var j = min.value; j &lt;= max.value; ++j) {</span>
<a href="#l8.620"></a><span id="l8.620" class="difflineminus">-        if (!setLastSelected) {</span>
<a href="#l8.621"></a><span id="l8.621" class="difflineminus">-          // Set the last selected index to the first item in the selection</span>
<a href="#l8.622"></a><span id="l8.622" class="difflineminus">-          this._tree.setAttribute(&quot;lastSelected&quot;, j);</span>
<a href="#l8.623"></a><span id="l8.623" class="difflineminus">-          setLastSelected = true;</span>
<a href="#l8.624"></a><span id="l8.624" class="difflineminus">-        }</span>
<a href="#l8.625"></a><span id="l8.625" class="difflineminus">-</span>
<a href="#l8.626"></a><span id="l8.626" class="difflineminus">-        var item = this._view.getItemAtIndex(j);</span>
<a href="#l8.627"></a><span id="l8.627" class="difflineminus">-        if (item &amp;&amp; </span>
<a href="#l8.628"></a><span id="l8.628" class="difflineminus">-            (!item.editable || item.handleMode == FILEACTION_OPEN_INTERNALLY))</span>
<a href="#l8.629"></a><span id="l8.629" class="difflineminus">-          canEdit = false;</span>
<a href="#l8.630"></a><span id="l8.630" class="difflineminus">-        </span>
<a href="#l8.631"></a><span id="l8.631" class="difflineminus">-        if (item &amp;&amp; </span>
<a href="#l8.632"></a><span id="l8.632" class="difflineminus">-            (!item.editable || item.handleMode == FILEACTION_OPEN_INTERNALLY ||</span>
<a href="#l8.633"></a><span id="l8.633" class="difflineminus">-             item.handledOnlyByPlugin))</span>
<a href="#l8.634"></a><span id="l8.634" class="difflineminus">-          canRemove = false;</span>
<a href="#l8.635"></a><span id="l8.635" class="difflineminus">-      }</span>
<a href="#l8.636"></a><span id="l8.636" class="difflineminus">-    }</span>
<a href="#l8.637"></a><span id="l8.637" class="difflineminus">-    </span>
<a href="#l8.638"></a><span id="l8.638" class="difflineminus">-    if (!canRemove)</span>
<a href="#l8.639"></a><span id="l8.639" class="difflineminus">-      this._removeButton.disabled = true;</span>
<a href="#l8.640"></a><span id="l8.640" class="difflineminus">-    if (!canEdit)</span>
<a href="#l8.641"></a><span id="l8.641" class="difflineminus">-      this._editButton.disabled = true;</span>
<a href="#l8.642"></a><span id="l8.642" class="difflineminus">-  },</span>
<a href="#l8.643"></a><span id="l8.643" class="difflineminus">-  </span>
<a href="#l8.644"></a><span id="l8.644" class="difflineminus">-  _lastSortProperty : &quot;&quot;,</span>
<a href="#l8.645"></a><span id="l8.645" class="difflineminus">-  _lastSortAscending: false,</span>
<a href="#l8.646"></a><span id="l8.646" class="difflineminus">-  sort: function (aProperty) </span>
<a href="#l8.647"></a><span id="l8.647" class="difflineminus">-  {</span>
<a href="#l8.648"></a><span id="l8.648" class="difflineminus">-    var ascending = (aProperty == this._lastSortProperty) ? !this._lastSortAscending : true;</span>
<a href="#l8.649"></a><span id="l8.649" class="difflineminus">-    function sortByProperty(a, b) </span>
<a href="#l8.650"></a><span id="l8.650" class="difflineminus">-    {</span>
<a href="#l8.651"></a><span id="l8.651" class="difflineminus">-      return a[aProperty].toLowerCase().localeCompare(b[aProperty].toLowerCase());</span>
<a href="#l8.652"></a><span id="l8.652" class="difflineminus">-    }</span>
<a href="#l8.653"></a><span id="l8.653" class="difflineminus">-    function sortByExtension(a, b)</span>
<a href="#l8.654"></a><span id="l8.654" class="difflineminus">-    {</span>
<a href="#l8.655"></a><span id="l8.655" class="difflineminus">-      if (!a.hasExtension &amp;&amp; b.hasExtension)</span>
<a href="#l8.656"></a><span id="l8.656" class="difflineminus">-        return 1;</span>
<a href="#l8.657"></a><span id="l8.657" class="difflineminus">-      if (!b.hasExtension &amp;&amp; a.hasExtension)</span>
<a href="#l8.658"></a><span id="l8.658" class="difflineminus">-        return -1;</span>
<a href="#l8.659"></a><span id="l8.659" class="difflineminus">-      return a.extension.toLowerCase().localeCompare(b.extension.toLowerCase());</span>
<a href="#l8.660"></a><span id="l8.660" class="difflineminus">-    }</span>
<a href="#l8.661"></a><span id="l8.661" class="difflineminus">-    // Sort the Filtered List, if in Filtered mode</span>
<a href="#l8.662"></a><span id="l8.662" class="difflineminus">-    if (!this._view._filtered) { </span>
<a href="#l8.663"></a><span id="l8.663" class="difflineminus">-      this._view.activeCollection.sort(aProperty == &quot;extension&quot; ? sortByExtension : sortByProperty);</span>
<a href="#l8.664"></a><span id="l8.664" class="difflineminus">-      if (!ascending)</span>
<a href="#l8.665"></a><span id="l8.665" class="difflineminus">-        this._view.activeCollection.reverse();</span>
<a href="#l8.666"></a><span id="l8.666" class="difflineminus">-    }</span>
<a href="#l8.667"></a><span id="l8.667" class="difflineminus">-</span>
<a href="#l8.668"></a><span id="l8.668" class="difflineminus">-    this._view.selection.clearSelection();</span>
<a href="#l8.669"></a><span id="l8.669" class="difflineminus">-    this._view.selection.select(0);</span>
<a href="#l8.670"></a><span id="l8.670" class="difflineminus">-    this._tree.treeBoxObject.invalidate();</span>
<a href="#l8.671"></a><span id="l8.671" class="difflineminus">-    this._tree.treeBoxObject.ensureRowIsVisible(0);</span>
<a href="#l8.672"></a><span id="l8.672" class="difflineminus">-</span>
<a href="#l8.673"></a><span id="l8.673" class="difflineminus">-    this._lastSortAscending = ascending;</span>
<a href="#l8.674"></a><span id="l8.674" class="difflineminus">-    this._lastSortProperty = aProperty;</span>
<a href="#l8.675"></a><span id="l8.675" class="difflineminus">-  },</span>
<a href="#l8.676"></a><span id="l8.676" class="difflineminus">-  </span>
<a href="#l8.677"></a><span id="l8.677" class="difflineminus">-  clearFilter: function ()</span>
<a href="#l8.678"></a><span id="l8.678" class="difflineminus">-  {    </span>
<a href="#l8.679"></a><span id="l8.679" class="difflineminus">-    // Clear the Filter and the Tree Display</span>
<a href="#l8.680"></a><span id="l8.680" class="difflineminus">-    document.getElementById(&quot;filter&quot;).value = &quot;&quot;;</span>
<a href="#l8.681"></a><span id="l8.681" class="difflineminus">-    this._view._filtered = false;</span>
<a href="#l8.682"></a><span id="l8.682" class="difflineminus">-    this._view._filterSet = [];</span>
<a href="#l8.683"></a><span id="l8.683" class="difflineminus">-</span>
<a href="#l8.684"></a><span id="l8.684" class="difflineminus">-    // Just reload the list to make sure deletions are respected</span>
<a href="#l8.685"></a><span id="l8.685" class="difflineminus">-    this._loadView();</span>
<a href="#l8.686"></a><span id="l8.686" class="difflineminus">-    this._updateRowCount(this._updateExclusions());</span>
<a href="#l8.687"></a><span id="l8.687" class="difflineminus">-</span>
<a href="#l8.688"></a><span id="l8.688" class="difflineminus">-    // Restore selection</span>
<a href="#l8.689"></a><span id="l8.689" class="difflineminus">-    this._view.selection.clearSelection();</span>
<a href="#l8.690"></a><span id="l8.690" class="difflineminus">-    for (i = 0; i &lt; this._lastSelectedRanges.length; ++i) {</span>
<a href="#l8.691"></a><span id="l8.691" class="difflineminus">-      var range = this._lastSelectedRanges[i];</span>
<a href="#l8.692"></a><span id="l8.692" class="difflineminus">-      this._view.selection.rangedSelect(range.min, range.max, true);</span>
<a href="#l8.693"></a><span id="l8.693" class="difflineminus">-    }</span>
<a href="#l8.694"></a><span id="l8.694" class="difflineminus">-    this._lastSelectedRanges = [];</span>
<a href="#l8.695"></a><span id="l8.695" class="difflineminus">-</span>
<a href="#l8.696"></a><span id="l8.696" class="difflineminus">-    document.getElementById(&quot;actionsIntro&quot;).value = this._bundle.getString(&quot;actionsAll&quot;);</span>
<a href="#l8.697"></a><span id="l8.697" class="difflineminus">-    document.getElementById(&quot;clearFilter&quot;).disabled = true;</span>
<a href="#l8.698"></a><span id="l8.698" class="difflineminus">-  },</span>
<a href="#l8.699"></a><span id="l8.699" class="difflineminus">-  </span>
<a href="#l8.700"></a><span id="l8.700" class="difflineminus">-  _actionMatchesFilter: function (aAction)</span>
<a href="#l8.701"></a><span id="l8.701" class="difflineminus">-  {</span>
<a href="#l8.702"></a><span id="l8.702" class="difflineminus">-    return aAction.extension.toLowerCase().indexOf(this._view._filterValue) != -1 ||</span>
<a href="#l8.703"></a><span id="l8.703" class="difflineminus">-           aAction.typeName.toLowerCase().indexOf(this._view._filterValue) != -1 || </span>
<a href="#l8.704"></a><span id="l8.704" class="difflineminus">-           aAction.type.toLowerCase().indexOf(this._view._filterValue) != -1 ||</span>
<a href="#l8.705"></a><span id="l8.705" class="difflineminus">-           aAction.action.toLowerCase().indexOf(this._view._filterValue) != -1;</span>
<a href="#l8.706"></a><span id="l8.706" class="difflineminus">-  },</span>
<a href="#l8.707"></a><span id="l8.707" class="difflineminus">-  </span>
<a href="#l8.708"></a><span id="l8.708" class="difflineminus">-  _filterActions: function (aFilterValue)</span>
<a href="#l8.709"></a><span id="l8.709" class="difflineminus">-  {</span>
<a href="#l8.710"></a><span id="l8.710" class="difflineminus">-    this._view._filterValue = aFilterValue;</span>
<a href="#l8.711"></a><span id="l8.711" class="difflineminus">-    var actions = [];</span>
<a href="#l8.712"></a><span id="l8.712" class="difflineminus">-    var collection = this._view._usingExclusionSet ? this._view._exclusionSet : this._actions;</span>
<a href="#l8.713"></a><span id="l8.713" class="difflineminus">-    for (var i = 0; i &lt; collection.length; ++i) {</span>
<a href="#l8.714"></a><span id="l8.714" class="difflineminus">-      var action = collection[i];</span>
<a href="#l8.715"></a><span id="l8.715" class="difflineminus">-      if (this._actionMatchesFilter(action)) </span>
<a href="#l8.716"></a><span id="l8.716" class="difflineminus">-        actions.push(action);</span>
<a href="#l8.717"></a><span id="l8.717" class="difflineminus">-    }</span>
<a href="#l8.718"></a><span id="l8.718" class="difflineminus">-    return actions;</span>
<a href="#l8.719"></a><span id="l8.719" class="difflineminus">-  },</span>
<a href="#l8.720"></a><span id="l8.720" class="difflineminus">-  </span>
<a href="#l8.721"></a><span id="l8.721" class="difflineminus">-  _lastSelectedRanges: [],</span>
<a href="#l8.722"></a><span id="l8.722" class="difflineminus">-  _saveState: function ()</span>
<a href="#l8.723"></a><span id="l8.723" class="difflineminus">-  {</span>
<a href="#l8.724"></a><span id="l8.724" class="difflineminus">-    // Save selection</span>
<a href="#l8.725"></a><span id="l8.725" class="difflineminus">-    var seln = this._view.selection;</span>
<a href="#l8.726"></a><span id="l8.726" class="difflineminus">-    this._lastSelectedRanges = [];</span>
<a href="#l8.727"></a><span id="l8.727" class="difflineminus">-    var rangeCount = seln.getRangeCount();</span>
<a href="#l8.728"></a><span id="l8.728" class="difflineminus">-    for (var i = 0; i &lt; rangeCount; ++i) {</span>
<a href="#l8.729"></a><span id="l8.729" class="difflineminus">-      var min = {}; var max = {};</span>
<a href="#l8.730"></a><span id="l8.730" class="difflineminus">-      seln.getRangeAt(i, min, max);</span>
<a href="#l8.731"></a><span id="l8.731" class="difflineminus">-      this._lastSelectedRanges.push({ min: min.value, max: max.value });</span>
<a href="#l8.732"></a><span id="l8.732" class="difflineminus">-    }</span>
<a href="#l8.733"></a><span id="l8.733" class="difflineminus">-  },</span>
<a href="#l8.734"></a><span id="l8.734" class="difflineminus">-  </span>
<a href="#l8.735"></a><span id="l8.735" class="difflineminus">-  _filterTimeout: -1,</span>
<a href="#l8.736"></a><span id="l8.736" class="difflineminus">-  onFilterInput: function ()</span>
<a href="#l8.737"></a><span id="l8.737" class="difflineminus">-  {</span>
<a href="#l8.738"></a><span id="l8.738" class="difflineminus">-    if (this._filterTimeout != -1)</span>
<a href="#l8.739"></a><span id="l8.739" class="difflineminus">-      clearTimeout(this._filterTimeout);</span>
<a href="#l8.740"></a><span id="l8.740" class="difflineminus">-   </span>
<a href="#l8.741"></a><span id="l8.741" class="difflineminus">-    function filterActions()</span>
<a href="#l8.742"></a><span id="l8.742" class="difflineminus">-    {</span>
<a href="#l8.743"></a><span id="l8.743" class="difflineminus">-      var filter = document.getElementById(&quot;filter&quot;).value;</span>
<a href="#l8.744"></a><span id="l8.744" class="difflineminus">-      if (filter == &quot;&quot;) {</span>
<a href="#l8.745"></a><span id="l8.745" class="difflineminus">-        gDownloadActionsWindow.clearFilter();</span>
<a href="#l8.746"></a><span id="l8.746" class="difflineminus">-        return;</span>
<a href="#l8.747"></a><span id="l8.747" class="difflineminus">-      }        </span>
<a href="#l8.748"></a><span id="l8.748" class="difflineminus">-      var view = gDownloadActionsWindow._view;</span>
<a href="#l8.749"></a><span id="l8.749" class="difflineminus">-      view._filterSet = gDownloadActionsWindow._filterActions(filter);</span>
<a href="#l8.750"></a><span id="l8.750" class="difflineminus">-      if (!view._filtered) {</span>
<a href="#l8.751"></a><span id="l8.751" class="difflineminus">-        // Save Display Info for the Non-Filtered mode when we first</span>
<a href="#l8.752"></a><span id="l8.752" class="difflineminus">-        // enter Filtered mode. </span>
<a href="#l8.753"></a><span id="l8.753" class="difflineminus">-        gDownloadActionsWindow._saveState();</span>
<a href="#l8.754"></a><span id="l8.754" class="difflineminus">-        view._filtered = true;</span>
<a href="#l8.755"></a><span id="l8.755" class="difflineminus">-      }</span>
<a href="#l8.756"></a><span id="l8.756" class="difflineminus">-</span>
<a href="#l8.757"></a><span id="l8.757" class="difflineminus">-      // Clear the display</span>
<a href="#l8.758"></a><span id="l8.758" class="difflineminus">-      gDownloadActionsWindow._updateRowCount(view._filterSet.length);</span>
<a href="#l8.759"></a><span id="l8.759" class="difflineminus">-      </span>
<a href="#l8.760"></a><span id="l8.760" class="difflineminus">-      view.selection.select(0);</span>
<a href="#l8.761"></a><span id="l8.761" class="difflineminus">-      document.getElementById(&quot;actionsIntro&quot;).value = gDownloadActionsWindow._bundle.getString(&quot;actionsFiltered&quot;);</span>
<a href="#l8.762"></a><span id="l8.762" class="difflineminus">-      document.getElementById(&quot;clearFilter&quot;).disabled = false;</span>
<a href="#l8.763"></a><span id="l8.763" class="difflineminus">-    }</span>
<a href="#l8.764"></a><span id="l8.764" class="difflineminus">-    window.filterActions = filterActions;</span>
<a href="#l8.765"></a><span id="l8.765" class="difflineminus">-    this._filterTimeout = setTimeout(filterActions, 500);</span>
<a href="#l8.766"></a><span id="l8.766" class="difflineminus">-  },</span>
<a href="#l8.767"></a><span id="l8.767" class="difflineminus">-  </span>
<a href="#l8.768"></a><span id="l8.768" class="difflineminus">-  onFilterKeyPress: function (aEvent)</span>
<a href="#l8.769"></a><span id="l8.769" class="difflineminus">-  {</span>
<a href="#l8.770"></a><span id="l8.770" class="difflineminus">-    if (aEvent.keyCode == 27) // ESC key</span>
<a href="#l8.771"></a><span id="l8.771" class="difflineminus">-      this.clearFilter();</span>
<a href="#l8.772"></a><span id="l8.772" class="difflineminus">-  },</span>
<a href="#l8.773"></a><span id="l8.773" class="difflineminus">-  </span>
<a href="#l8.774"></a><span id="l8.774" class="difflineminus">-  focusFilterBox: function ()</span>
<a href="#l8.775"></a><span id="l8.775" class="difflineminus">-  { </span>
<a href="#l8.776"></a><span id="l8.776" class="difflineminus">-    var filter = document.getElementById(&quot;filter&quot;);</span>
<a href="#l8.777"></a><span id="l8.777" class="difflineminus">-    filter.focus();</span>
<a href="#l8.778"></a><span id="l8.778" class="difflineminus">-    filter.select();</span>
<a href="#l8.779"></a><span id="l8.779" class="difflineminus">-  }  </span>
<a href="#l8.780"></a><span id="l8.780" class="difflineminus">-};</span>
<a href="#l8.781"></a><span id="l8.781" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/mail/components/preferences/downloadactions.xul</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,129 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">-</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">-#</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-#</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-# License.</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">-#</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-# The Original Code is the Firefox Preferences System.</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-#</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-# Ben Goodger.</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineminus">-#</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">-# Contributor(s):</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineminus">-#   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-#</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-#</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot;?&gt;</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">-&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/preferences/preferences.css&quot;?&gt;</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">-</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">-&lt;!DOCTYPE prefwindow [</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">-  &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-  &lt;!ENTITY % downloadactionsDTD SYSTEM &quot;chrome://messenger/locale/preferences/downloadactions.dtd&quot;&gt;</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineminus">-  %brandDTD;</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-  %downloadactionsDTD;</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-]&gt;</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-&lt;window id=&quot;DownloadActionsWindow&quot; class=&quot;windowDialog&quot;</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-        windowtype=&quot;Preferences:DownloadActions&quot;</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-        xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-        onload=&quot;gDownloadActionsWindow.init();&quot;</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-        onunload=&quot;gDownloadActionsWindow.uninit();&quot;</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-        title=&quot;&amp;downloadactionsWindow.title;&quot;</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-        width=&quot;&amp;window.width;&quot; height=&quot;&amp;window.height;&quot; persist=&quot;width height screenX screenY&quot;&gt;</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/preferences/actionsshared.js&quot;/&gt;</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-  &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/preferences/downloadactions.js&quot;/&gt;</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-  &lt;stringbundle id=&quot;bundlePreferences&quot; src=&quot;chrome://messenger/locale/preferences/preferences.properties&quot;/&gt;</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-  &lt;keyset&gt;</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-    &lt;key key=&quot;&amp;windowClose.key;&quot; modifiers=&quot;accel&quot; oncommand=&quot;window.close();&quot;/&gt;</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-    &lt;key key=&quot;&amp;focusSearch1.key;&quot; modifiers=&quot;accel&quot; oncommand=&quot;gDownloadActionsWindow.focusFilterBox();&quot;/&gt;</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-    &lt;key key=&quot;&amp;focusSearch2.key;&quot; modifiers=&quot;accel&quot; oncommand=&quot;gDownloadActionsWindow.focusFilterBox();&quot;/&gt;</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">-  &lt;/keyset&gt;</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">-           </span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-  &lt;vbox flex=&quot;1&quot; class=&quot;contentPane&quot;&gt;</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineminus">-    &lt;hbox align=&quot;center&quot;&gt;</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineminus">-      &lt;label accesskey=&quot;&amp;filter.accesskey;&quot; control=&quot;filter&quot;&gt;&amp;filter.label;&lt;/label&gt;</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineminus">-      &lt;textbox id=&quot;filter&quot; flex=&quot;1&quot; oninput=&quot;gDownloadActionsWindow.onFilterInput();&quot; </span>
<a href="#l9.78"></a><span id="l9.78" class="difflineminus">-              onkeypress=&quot;gDownloadActionsWindow.onFilterKeyPress(event);&quot;/&gt;</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineminus">-      &lt;button id=&quot;clearFilter&quot; label=&quot;&amp;clear.label;&quot; accesskey=&quot;&amp;clear.accesskey;&quot; </span>
<a href="#l9.80"></a><span id="l9.80" class="difflineminus">-              oncommand=&quot;gDownloadActionsWindow.clearFilter();&quot; disabled=&quot;true&quot;/&gt;</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineminus">-    &lt;/hbox&gt;</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineminus">-    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineminus">-    &lt;label id=&quot;actionsIntro&quot; control=&quot;fileHandlersList&quot;&gt;</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineminus">-      &amp;fileTypesDescription.label;</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineminus">-    &lt;/label&gt;</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineminus">-    &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineminus">-    &lt;tree id=&quot;fileHandlersList&quot; flex=&quot;1&quot;</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineminus">-          lastSelected=&quot;0&quot; persist=&quot;lastSelected&quot;</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-          onselect=&quot;gDownloadActionsWindow.onSelectionChanged();&quot;</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineminus">-          ondblclick=&quot;gDownloadActionsWindow.editFileHandler();&quot;&gt;</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineminus">-      &lt;treechildren id=&quot;extensionChildren&quot;/&gt;</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineminus">-      &lt;treecols&gt;</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineminus">-        &lt;treecol id=&quot;fileExtension&quot; ignoreincolumnpicker=&quot;true&quot;</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineminus">-                  class=&quot;sortDirectionIndicator&quot; persist=&quot;width&quot;</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineminus">-                  label=&quot;&amp;fileExtensionColumn.label;&quot; accesskey=&quot;&amp;fileExtensionColumn.accesskey;&quot;</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineminus">-                  onclick=&quot;gDownloadActionsWindow.sort('extension');&quot;/&gt;</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineminus">-        &lt;treecol id=&quot;fileType&quot; flex=&quot;1&quot;</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineminus">-                  class=&quot;sortDirectionIndicator&quot; persist=&quot;width&quot;</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineminus">-                  label=&quot;&amp;fileTypeColumn.label;&quot; accesskey=&quot;&amp;fileTypeColumn.accesskey;&quot;</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineminus">-                  onclick=&quot;gDownloadActionsWindow.sort('typeName');&quot;/&gt;</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineminus">-        &lt;splitter class=&quot;tree-splitter&quot; /&gt;</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineminus">-        &lt;treecol id=&quot;fileMIMEType&quot; flex=&quot;1&quot; hidden=&quot;true&quot;</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineminus">-                  class=&quot;sortDirectionIndicator&quot; persist=&quot;width&quot;</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-                  label=&quot;&amp;fileMIMETypeColumn.label;&quot; accesskey=&quot;&amp;fileMIMETypeColumn.accesskey;&quot;</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-                  onclick=&quot;gDownloadActionsWindow.sort('type');&quot;/&gt;</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-        &lt;splitter class=&quot;tree-splitter&quot; /&gt;</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-        &lt;treecol id=&quot;fileHandler&quot; flex=&quot;1&quot;</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineminus">-                  class=&quot;sortDirectionIndicator&quot; persist=&quot;width&quot;</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineminus">-                  label=&quot;&amp;fileHandlerColumn.label;&quot; accesskey=&quot;&amp;fileHandlerColumn.accesskey;&quot;</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineminus">-                  onclick=&quot;gDownloadActionsWindow.sort('action');&quot;/&gt;                </span>
<a href="#l9.111"></a><span id="l9.111" class="difflineminus">-        &lt;splitter class=&quot;tree-splitter&quot; /&gt;</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineminus">-      &lt;/treecols&gt;</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineminus">-    &lt;/tree&gt;</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineminus">-  &lt;/vbox&gt;</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineminus">-  &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineminus">-  &lt;hbox&gt;</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineminus">-    &lt;hbox flex=&quot;1&quot; class=&quot;actionButtons&quot;&gt;</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineminus">-      &lt;button id=&quot;removeFileHandler&quot;</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineminus">-              label=&quot;&amp;remove.label;&quot; accesskey=&quot;&amp;remove.accesskey;&quot;</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineminus">-              oncommand=&quot;gDownloadActionsWindow.removeFileHandler();&quot;/&gt;</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineminus">-      &lt;button id=&quot;editFileHandler&quot;</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineminus">-              label=&quot;&amp;edit.label;&quot; accesskey=&quot;&amp;edit.accesskey;&quot;</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineminus">-              oncommand=&quot;gDownloadActionsWindow.editFileHandler();&quot;/&gt;</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineminus">-      &lt;spacer flex=&quot;1&quot;/&gt;</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineminus">-#ifndef XP_MACOSX</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineminus">-      &lt;button oncommand=&quot;close();&quot;</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineminus">-              label=&quot;&amp;button.close.label;&quot; accesskey=&quot;&amp;button.close.accesskey;&quot;/&gt;</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineminus">-#endif</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineminus">-    &lt;/hbox&gt;</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineminus">-    &lt;resizer dir=&quot;bottomright&quot;/&gt;</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineminus">-  &lt;/hbox&gt;</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineminus">-&lt;/window&gt;</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/components/preferences/downloads.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/components/preferences/downloads.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -17,86 +17,87 @@</span>
<a href="#l10.4"></a><span id="l10.4"> # The Initial Developer of the Original Code is</span>
<a href="#l10.5"></a><span id="l10.5"> # Ben Goodger.</span>
<a href="#l10.6"></a><span id="l10.6"> # Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l10.7"></a><span id="l10.7"> # the Initial Developer. All Rights Reserved.</span>
<a href="#l10.8"></a><span id="l10.8"> #</span>
<a href="#l10.9"></a><span id="l10.9"> # Contributor(s):</span>
<a href="#l10.10"></a><span id="l10.10"> #   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l10.11"></a><span id="l10.11"> #   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+#   Magnus Melin &lt;mkmelin+mozilla@iki.fi&gt;</span>
<a href="#l10.13"></a><span id="l10.13"> #</span>
<a href="#l10.14"></a><span id="l10.14"> # Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l10.15"></a><span id="l10.15"> # either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l10.16"></a><span id="l10.16"> # the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l10.17"></a><span id="l10.17"> # in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l10.18"></a><span id="l10.18"> # of those above. If you wish to allow use of your version of this file only</span>
<a href="#l10.19"></a><span id="l10.19"> # under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l10.20"></a><span id="l10.20"> # use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l10.21"></a><span id="l10.21"> # decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.22"></a><span id="l10.22"> # and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.23"></a><span id="l10.23"> # the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.24"></a><span id="l10.24"> # the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.25"></a><span id="l10.25"> #</span>
<a href="#l10.26"></a><span id="l10.26"> # ***** END LICENSE BLOCK *****</span>
<a href="#l10.27"></a><span id="l10.27"> </span>
<a href="#l10.28"></a><span id="l10.28" class="difflineminus">-var gDownloadsPane = {</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+var gDownloadDirSection = {</span>
<a href="#l10.30"></a><span id="l10.30">   chooseFolder: function ()</span>
<a href="#l10.31"></a><span id="l10.31">   {</span>
<a href="#l10.32"></a><span id="l10.32">     const nsIFilePicker = Components.interfaces.nsIFilePicker;</span>
<a href="#l10.33"></a><span id="l10.33">     var fp = Components.classes[&quot;@mozilla.org/filepicker;1&quot;]</span>
<a href="#l10.34"></a><span id="l10.34">                        .createInstance(nsIFilePicker);</span>
<a href="#l10.35"></a><span id="l10.35">     var bundlePreferences = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-    var title = bundlePreferences.getString(&quot;chooseDownloadFolderTitle&quot;);</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+    var title = bundlePreferences.getString(&quot;chooseAttachmentsFolderTitle&quot;);</span>
<a href="#l10.38"></a><span id="l10.38">     fp.init(window, title, nsIFilePicker.modeGetFolder);</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-    </span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+</span>
<a href="#l10.41"></a><span id="l10.41">     const nsILocalFile = Components.interfaces.nsILocalFile;</span>
<a href="#l10.42"></a><span id="l10.42">     var customDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l10.43"></a><span id="l10.43">     if (customDirPref.value)</span>
<a href="#l10.44"></a><span id="l10.44">       fp.displayDirectory = customDirPref.value;</span>
<a href="#l10.45"></a><span id="l10.45">     fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l10.46"></a><span id="l10.46">     if (fp.show() == nsIFilePicker.returnOK) {</span>
<a href="#l10.47"></a><span id="l10.47">       var file = fp.file.QueryInterface(nsILocalFile);</span>
<a href="#l10.48"></a><span id="l10.48">       var currentDirPref = document.getElementById(&quot;browser.download.downloadDir&quot;);</span>
<a href="#l10.49"></a><span id="l10.49">       customDirPref.value = currentDirPref.value = file;</span>
<a href="#l10.50"></a><span id="l10.50">       var folderListPref = document.getElementById(&quot;browser.download.folderList&quot;);</span>
<a href="#l10.51"></a><span id="l10.51">       folderListPref.value = this._fileToIndex(file);</span>
<a href="#l10.52"></a><span id="l10.52">     }</span>
<a href="#l10.53"></a><span id="l10.53">   },</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-  </span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+</span>
<a href="#l10.56"></a><span id="l10.56">   onReadUseDownloadDir: function ()</span>
<a href="#l10.57"></a><span id="l10.57">   {</span>
<a href="#l10.58"></a><span id="l10.58">     var downloadFolder = document.getElementById(&quot;downloadFolder&quot;);</span>
<a href="#l10.59"></a><span id="l10.59">     var chooseFolder = document.getElementById(&quot;chooseFolder&quot;);</span>
<a href="#l10.60"></a><span id="l10.60">     var preference = document.getElementById(&quot;browser.download.useDownloadDir&quot;);</span>
<a href="#l10.61"></a><span id="l10.61">     downloadFolder.disabled = !preference.value;</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineminus">-    chooseFolder.disabled = !preference.value;      </span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+    chooseFolder.disabled = !preference.value;</span>
<a href="#l10.64"></a><span id="l10.64">     return undefined;</span>
<a href="#l10.65"></a><span id="l10.65">   },</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineminus">-  </span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+</span>
<a href="#l10.68"></a><span id="l10.68">   _fileToIndex: function (aFile)</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">-  { </span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+  {</span>
<a href="#l10.71"></a><span id="l10.71">     if (!aFile || aFile.equals(this._getDownloadsFolder(&quot;Desktop&quot;)))</span>
<a href="#l10.72"></a><span id="l10.72">       return 0;</span>
<a href="#l10.73"></a><span id="l10.73">     else if (aFile.equals(this._getDownloadsFolder(&quot;Downloads&quot;)))</span>
<a href="#l10.74"></a><span id="l10.74">       return 1;</span>
<a href="#l10.75"></a><span id="l10.75">     return 2;</span>
<a href="#l10.76"></a><span id="l10.76">   },</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineminus">-  </span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+</span>
<a href="#l10.79"></a><span id="l10.79">   _indexToFile: function (aIndex)</span>
<a href="#l10.80"></a><span id="l10.80">   {</span>
<a href="#l10.81"></a><span id="l10.81">     switch (aIndex) {</span>
<a href="#l10.82"></a><span id="l10.82">     case 0: </span>
<a href="#l10.83"></a><span id="l10.83">       return this._getDownloadsFolder(&quot;Desktop&quot;);</span>
<a href="#l10.84"></a><span id="l10.84">     case 1:</span>
<a href="#l10.85"></a><span id="l10.85">       return this._getDownloadsFolder(&quot;Downloads&quot;);</span>
<a href="#l10.86"></a><span id="l10.86">     }</span>
<a href="#l10.87"></a><span id="l10.87">     var customDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l10.88"></a><span id="l10.88">     return customDirPref.value;</span>
<a href="#l10.89"></a><span id="l10.89">   },</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineminus">-  </span>
<a href="#l10.91"></a><span id="l10.91" class="difflineplus">+</span>
<a href="#l10.92"></a><span id="l10.92">   _getSpecialFolderKey: function (aFolderType)</span>
<a href="#l10.93"></a><span id="l10.93">   {</span>
<a href="#l10.94"></a><span id="l10.94">     if (aFolderType == &quot;Desktop&quot;)</span>
<a href="#l10.95"></a><span id="l10.95">       return &quot;Desk&quot;;</span>
<a href="#l10.96"></a><span id="l10.96"> </span>
<a href="#l10.97"></a><span id="l10.97">     if (aFolderType != &quot;Downloads&quot;)</span>
<a href="#l10.98"></a><span id="l10.98">       throw &quot;ASSERTION FAILED: folder type should be 'Desktop' or 'Downloads'&quot;;</span>
<a href="#l10.99"></a><span id="l10.99"> </span>
<a href="#l10.100"></a><span id="l10.100" class="difflineat">@@ -110,75 +111,49 @@ var gDownloadsPane = {</span>
<a href="#l10.101"></a><span id="l10.101"> #endif</span>
<a href="#l10.102"></a><span id="l10.102"> #endif</span>
<a href="#l10.103"></a><span id="l10.103">   },</span>
<a href="#l10.104"></a><span id="l10.104"> </span>
<a href="#l10.105"></a><span id="l10.105">   _getDownloadsFolder: function (aFolder)</span>
<a href="#l10.106"></a><span id="l10.106">   {</span>
<a href="#l10.107"></a><span id="l10.107">     var fileLocator = Components.classes[&quot;@mozilla.org/file/directory_service;1&quot;]</span>
<a href="#l10.108"></a><span id="l10.108">                                 .getService(Components.interfaces.nsIProperties);</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineminus">-    var dir = fileLocator.get(this._getSpecialFolderKey(aFolder), </span>
<a href="#l10.110"></a><span id="l10.110" class="difflineplus">+    var dir = fileLocator.get(this._getSpecialFolderKey(aFolder),</span>
<a href="#l10.111"></a><span id="l10.111">                               Components.interfaces.nsILocalFile);</span>
<a href="#l10.112"></a><span id="l10.112">     if (aFolder != &quot;Desktop&quot;)</span>
<a href="#l10.113"></a><span id="l10.113">       dir.append(&quot;My Downloads&quot;);</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineminus">-      </span>
<a href="#l10.115"></a><span id="l10.115" class="difflineplus">+</span>
<a href="#l10.116"></a><span id="l10.116">     return dir;</span>
<a href="#l10.117"></a><span id="l10.117">   },</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineminus">-  </span>
<a href="#l10.119"></a><span id="l10.119" class="difflineminus">-  _getDisplayNameOfFile: function (aFolder)</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineminus">-  {</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineminus">-    // TODO: would like to add support for 'Downloads on Macintosh HD' </span>
<a href="#l10.122"></a><span id="l10.122" class="difflineminus">-    //       for OS X users.</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineminus">-    return aFolder ? aFolder.path : &quot;&quot;;</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineminus">-  },</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineminus">-  </span>
<a href="#l10.126"></a><span id="l10.126" class="difflineplus">+</span>
<a href="#l10.127"></a><span id="l10.127">   readDownloadDirPref: function ()</span>
<a href="#l10.128"></a><span id="l10.128">   {</span>
<a href="#l10.129"></a><span id="l10.129">     var folderListPref = document.getElementById(&quot;browser.download.folderList&quot;);</span>
<a href="#l10.130"></a><span id="l10.130">     var bundlePreferences = document.getElementById(&quot;bundlePreferences&quot;);</span>
<a href="#l10.131"></a><span id="l10.131">     var downloadFolder = document.getElementById(&quot;downloadFolder&quot;);</span>
<a href="#l10.132"></a><span id="l10.132"> </span>
<a href="#l10.133"></a><span id="l10.133">     var customDirPref = document.getElementById(&quot;browser.download.dir&quot;);</span>
<a href="#l10.134"></a><span id="l10.134">     var customIndex = customDirPref.value ? this._fileToIndex(customDirPref.value) : 0;</span>
<a href="#l10.135"></a><span id="l10.135">     if (folderListPref.value == 0 || customIndex == 0)</span>
<a href="#l10.136"></a><span id="l10.136">       downloadFolder.label = bundlePreferences.getString(&quot;desktopFolderName&quot;);</span>
<a href="#l10.137"></a><span id="l10.137">     else if (folderListPref.value == 1 || customIndex == 1) </span>
<a href="#l10.138"></a><span id="l10.138">       downloadFolder.label = bundlePreferences.getString(&quot;myDownloadsFolderName&quot;);</span>
<a href="#l10.139"></a><span id="l10.139">     else</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineminus">-      downloadFolder.label = this._getDisplayNameOfFile(customDirPref.value);</span>
<a href="#l10.141"></a><span id="l10.141" class="difflineminus">-    </span>
<a href="#l10.142"></a><span id="l10.142" class="difflineplus">+      downloadFolder.label = customDirPref.value ? customDirPref.value.path : &quot;&quot;;</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineplus">+</span>
<a href="#l10.144"></a><span id="l10.144">     var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l10.145"></a><span id="l10.145">                         .getService(Components.interfaces.nsIIOService);</span>
<a href="#l10.146"></a><span id="l10.146">     var fph = ios.getProtocolHandler(&quot;file&quot;)</span>
<a href="#l10.147"></a><span id="l10.147">                  .QueryInterface(Components.interfaces.nsIFileProtocolHandler);</span>
<a href="#l10.148"></a><span id="l10.148">     var currentDirPref = document.getElementById(&quot;browser.download.downloadDir&quot;);</span>
<a href="#l10.149"></a><span id="l10.149">     var downloadDir = currentDirPref.value || this._indexToFile(folderListPref.value);</span>
<a href="#l10.150"></a><span id="l10.150">     var urlspec = fph.getURLSpecFromFile(downloadDir);</span>
<a href="#l10.151"></a><span id="l10.151">     downloadFolder.image = &quot;moz-icon://&quot; + urlspec + &quot;?size=16&quot;;</span>
<a href="#l10.152"></a><span id="l10.152" class="difflineminus">-    </span>
<a href="#l10.153"></a><span id="l10.153" class="difflineplus">+</span>
<a href="#l10.154"></a><span id="l10.154">     return undefined;</span>
<a href="#l10.155"></a><span id="l10.155">   },</span>
<a href="#l10.156"></a><span id="l10.156" class="difflineminus">-  </span>
<a href="#l10.157"></a><span id="l10.157" class="difflineplus">+</span>
<a href="#l10.158"></a><span id="l10.158">   writeFolderList: function ()</span>
<a href="#l10.159"></a><span id="l10.159">   {</span>
<a href="#l10.160"></a><span id="l10.160">     var currentDirPref = document.getElementById(&quot;browser.download.downloadDir&quot;);</span>
<a href="#l10.161"></a><span id="l10.161">     return this._fileToIndex(currentDirPref.value);</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineminus">-  },</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineminus">-  </span>
<a href="#l10.164"></a><span id="l10.164" class="difflineminus">-  showWhenStartingPrefChanged: function ()</span>
<a href="#l10.165"></a><span id="l10.165" class="difflineminus">-  {</span>
<a href="#l10.166"></a><span id="l10.166" class="difflineminus">-    document.getElementById(&quot;browser.download.manager.closeWhenDone&quot;)</span>
<a href="#l10.167"></a><span id="l10.167" class="difflineminus">-            .disabled = !document.getElementById(&quot;browser.download.manager.showWhenStarting&quot;).value;</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineminus">-  },</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineminus">-  </span>
<a href="#l10.170"></a><span id="l10.170" class="difflineminus">-  readShowWhenStartingPref: function ()</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineminus">-  {</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineminus">-    this.showWhenStartingPrefChanged();</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineminus">-    return undefined;</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineminus">-  },</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineminus">-  </span>
<a href="#l10.176"></a><span id="l10.176" class="difflineminus">-  showFileTypeActions: function ()</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineminus">-  {</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineminus">-    document.documentElement.openWindow(&quot;Preferences:DownloadActions&quot;,</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineminus">-                                        &quot;chrome://messenger/content/preferences/downloadactions.xul&quot;,</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineminus">-                                        &quot;&quot;, null);</span>
<a href="#l10.181"></a><span id="l10.181">   }</span>
<a href="#l10.182"></a><span id="l10.182"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/mail/components/preferences/downloads.xul</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,112 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">-</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">-# -*- Mode: Java; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-#</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-# the License. You may obtain a copy of the License at</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-# http://www.mozilla.org/MPL/</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-#</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-# for the specific language governing rights and limitations under the</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-# License.</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-#</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-# The Original Code is the Thunderbird Preferences System.</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-#</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineminus">-# The Initial Developer of the Original Code is</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-# Ben Goodger.</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-# Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-# the Initial Developer. All Rights Reserved.</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineminus">-#</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-# Contributor(s):</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-#   Ben Goodger &lt;ben@mozilla.org&gt;</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-#   Scott MacGregor &lt;mscott@mozilla.org&gt;</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-#</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineminus">-# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineminus">-# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineminus">-# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineminus">-# the provisions above, a recipient may use your version of this file under</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-#</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-# ***** END LICENSE BLOCK *****</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineminus">-&lt;!DOCTYPE overlay [</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-&lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineminus">-&lt;!ENTITY % downloadsDTD SYSTEM &quot;chrome://messenger/locale/preferences/downloads.dtd&quot;&gt;</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-%brandDTD;</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-%downloadsDTD;</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-]&gt;</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineminus">-</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineminus">-&lt;overlay id=&quot;DownloadsPaneOverlay&quot;</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineminus">-         xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineminus">-</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineminus">-  &lt;prefpane id=&quot;paneDownloads&quot;&gt;</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineminus">-    &lt;preferences id=&quot;downloadsPreferences&quot;&gt;</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineminus">-      &lt;preference id=&quot;browser.download.useDownloadDir&quot;    name=&quot;browser.download.useDownloadDir&quot;    type=&quot;bool&quot;/&gt;</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineminus">-      &lt;preference id=&quot;browser.download.folderList&quot;        name=&quot;browser.download.folderList&quot;        type=&quot;int&quot;/&gt;</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-      &lt;preference id=&quot;browser.download.downloadDir&quot;       name=&quot;browser.download.downloadDir&quot;       type=&quot;file&quot;/&gt;</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">-      &lt;preference id=&quot;browser.download.dir&quot;</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-                  name=&quot;browser.download.dir&quot;</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-                  type=&quot;file&quot;</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-                  onchange=&quot;gDownloadsPane.readDownloadDirPref();&quot;/&gt;</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">-      &lt;preference id=&quot;pref.downloads.disable_button.edit_actions&quot;</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-                  name=&quot;pref.downloads.disable_button.edit_actions&quot;</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineminus">-                  type=&quot;bool&quot;/&gt;</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineminus">-    &lt;/preferences&gt;</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-    </span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-    &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/preferences/downloads.js&quot;/&gt;</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineminus">-    </span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-    &lt;stringbundle id=&quot;bundlePreferences&quot; src=&quot;chrome://messenger/locale/preferences/preferences.properties&quot;/&gt;</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-    &lt;groupbox&gt;</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineminus">-      &lt;caption label=&quot;&amp;askOnSave.label;&quot;/&gt;</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineminus">-      </span>
<a href="#l11.77"></a><span id="l11.77" class="difflineminus">-      &lt;radiogroup id=&quot;askOnSave&quot; flex=&quot;1&quot;</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineminus">-                  preference=&quot;browser.download.useDownloadDir&quot;</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineminus">-                  onsyncfrompreference=&quot;return gDownloadsPane.onReadUseDownloadDir();&quot;&gt;</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineminus">-        &lt;radio id=&quot;alwaysAsk&quot; label=&quot;&amp;alwaysAsk.label;&quot; accesskey=&quot;&amp;alwaysAsk.accesskey;&quot; value=&quot;false&quot;/&gt;</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineminus">-        &lt;vbox flex=&quot;1&quot;&gt;</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineminus">-          &lt;radio id=&quot;neverAsk&quot; label=&quot;&amp;neverAsk.label;&quot; accesskey=&quot;&amp;neverAsk.accesskey;&quot; value=&quot;true&quot;/&gt;</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineminus">-          &lt;hbox class=&quot;indent&quot; align=&quot;center&quot;&gt;</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineminus">-            &lt;filefield id=&quot;downloadFolder&quot; flex=&quot;1&quot;</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineminus">-                       preference=&quot;browser.download.folderList&quot;</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineminus">-                       preference-editable=&quot;true&quot;</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineminus">-                       onsyncfrompreference=&quot;return gDownloadsPane.readDownloadDirPref();&quot;</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineminus">-                       onsynctopreference=&quot;return gDownloadsPane.writeFolderList()&quot;/&gt;</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineminus">-            &lt;button id=&quot;chooseFolder&quot; oncommand=&quot;gDownloadsPane.chooseFolder();&quot;</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineminus">-                    preference=&quot;browser.download.folderList&quot;</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-                    onsynctopreference=&quot;return gDownloadsPane.writeFolderList()&quot;</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-#ifdef XP_MACOSX</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineminus">-                    accesskey=&quot;&amp;chooseFolderMac.accesskey;&quot; label=&quot;&amp;chooseFolderMac.label;&quot;/&gt;</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineminus">-#else</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineminus">-                    accesskey=&quot;&amp;chooseFolderWin.accesskey;&quot; label=&quot;&amp;chooseFolderWin.label;&quot;/&gt;</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineminus">-#endif</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineminus">-          &lt;/hbox&gt;</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineminus">-        &lt;/vbox&gt;</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineminus">-      &lt;/radiogroup&gt;</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineminus">-    &lt;/groupbox&gt;</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineminus">-    </span>
<a href="#l11.102"></a><span id="l11.102" class="difflineminus">-    &lt;groupbox&gt;</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineminus">-      &lt;caption label=&quot;&amp;fileTypes.label;&quot;/&gt;</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineminus">-      </span>
<a href="#l11.105"></a><span id="l11.105" class="difflineminus">-      &lt;description control=&quot;configureActions&quot;&gt;&amp;fileTypesDescription.label;&lt;/description&gt;</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineminus">-      &lt;separator class=&quot;thin&quot;/&gt;</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineminus">-      &lt;hbox&gt;</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineminus">-        &lt;button id=&quot;configureActions&quot; label=&quot;&amp;configureActions.label;&quot;</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineminus">-                accesskey=&quot;&amp;configureActions.accesskey;&quot;</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineminus">-                oncommand=&quot;gDownloadsPane.showFileTypeActions();&quot;</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineminus">-                preference=&quot;pref.downloads.disable_button.edit_actions&quot;/&gt;</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineminus">-      &lt;/hbox&gt;</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineminus">-    &lt;/groupbox&gt;</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineminus">-  &lt;/prefpane&gt;</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineminus">-</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineminus">-&lt;/overlay&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100755</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/mail/components/preferences/handlers.css</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,54 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+ *</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+ *</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+ * License.</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+ *</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+ * The Original Code is the Mozilla browser.</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+ *</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+ * The Initial Developer of the Original Code is Mozilla.</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2007</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+ *</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineplus">+ * Contributor(s):</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+ *   Myk Melez &lt;myk@mozilla.org&gt;</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+ *   Magnus Melin &lt;mkmelin+mozilla@iki.fi&gt;</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+ *</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineplus">+ *</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineplus">+</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineplus">+richlistitem {</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineplus">+  -moz-binding: url(&quot;chrome://messenger/content/preferences/handlers.xml#handler&quot;);</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineplus">+}</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineplus">+</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineplus">+richlistitem[selected=&quot;true&quot;] {</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineplus">+  -moz-binding: url(&quot;chrome://messenger/content/preferences/handlers.xml#handler-selected&quot;);</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineplus">+}</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineplus">+</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineplus">+.actionsMenu &gt; menupopup &gt; menuitem &gt; .menu-iconic-left {</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineplus">+  /**</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineplus">+    * Make the icons appear.</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineplus">+    * Note: we display the icon box for every item whether or not it has an icon</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineplus">+    * so the labels of all the items align vertically.</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineplus">+    */</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineplus">+  display: -moz-box;</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineplus">+  min-width: 16px;</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100755</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/mail/components/preferences/handlers.xml</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,101 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+   - Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+   -</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+   - The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+   - 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+   - the License. You may obtain a copy of the License at</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+   - http://www.mozilla.org/MPL/</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+   -</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+   - Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+   - for the specific language governing rights and limitations under the</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+   - License.</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+   -</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+   - The Original Code is the Mozilla browser.</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+   -</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+   - The Initial Developer of the Original Code is Mozilla.</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+   - Portions created by the Initial Developer are Copyright (C) 2007</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+   - the Initial Developer. All Rights Reserved.</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+   -</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+   - Contributor(s):</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+   -   Myk Melez &lt;myk@mozilla.org&gt;</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+   -</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+   - Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineplus">+   - either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+   - the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+   - in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+   - of those above. If you wish to allow use of your version of this file only</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineplus">+   - under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+   - use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+   - decision by deleting the provisions above and replace them with the notice</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+   - and other provisions required by the LGPL or the GPL. If you do not delete</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineplus">+   - the provisions above, a recipient may use your version of this file under</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+   - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+   -</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineplus">+   - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineplus">+</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineplus">+&lt;!DOCTYPE overlay [</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+  &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineplus">+  &lt;!ENTITY % applicationsDTD SYSTEM &quot;chrome://messenger/locale/preferences/applications.dtd&quot;&gt;</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineplus">+  %brandDTD;</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+  %applicationsDTD;</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineplus">+]&gt;</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineplus">+&lt;bindings id=&quot;handlerBindings&quot;</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineplus">+          xmlns=&quot;http://www.mozilla.org/xbl&quot;</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+          xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineplus">+          xmlns:xbl=&quot;http://www.mozilla.org/xbl&quot;&gt;</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineplus">+</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineplus">+  &lt;binding id=&quot;handler-base&quot; extends=&quot;chrome://global/content/bindings/richlistbox.xml#richlistitem&quot;&gt;</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l13.56"></a><span id="l13.56" class="difflineplus">+      &lt;property name=&quot;type&quot; readonly=&quot;true&quot;&gt;</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineplus">+        &lt;getter&gt;</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineplus">+          return this.getAttribute(&quot;type&quot;);</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineplus">+        &lt;/getter&gt;</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineplus">+      &lt;/property&gt;</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineplus">+</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineplus">+  &lt;binding id=&quot;handler&quot; extends=&quot;chrome://messenger/content/preferences/handlers.xml#handler-base&quot;&gt;</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineplus">+      &lt;xul:hbox flex=&quot;1&quot; equalsize=&quot;always&quot;&gt;</span>
<a href="#l13.67"></a><span id="l13.67" class="difflineplus">+        &lt;xul:hbox flex=&quot;1&quot; align=&quot;center&quot; xbl:inherits=&quot;tooltiptext=typeDescription&quot;&gt;</span>
<a href="#l13.68"></a><span id="l13.68" class="difflineplus">+          &lt;xul:image src=&quot;moz-icon://goat?size=16&quot; class=&quot;typeIcon&quot;</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineplus">+                     xbl:inherits=&quot;src=typeIcon&quot; height=&quot;16&quot; width=&quot;16&quot;/&gt;</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineplus">+          &lt;xul:label flex=&quot;1&quot; crop=&quot;end&quot; xbl:inherits=&quot;value=typeDescription&quot;/&gt;</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineplus">+        &lt;xul:hbox flex=&quot;1&quot; align=&quot;center&quot; xbl:inherits=&quot;tooltiptext=actionDescription&quot;&gt;</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineplus">+          &lt;xul:image xbl:inherits=&quot;src=actionIcon&quot; height=&quot;16&quot; width=&quot;16&quot; class=&quot;actionIcon&quot;/&gt;</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineplus">+          &lt;xul:label flex=&quot;1&quot; crop=&quot;end&quot; xbl:inherits=&quot;value=actionDescription&quot;/&gt;</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l13.79"></a><span id="l13.79" class="difflineplus">+</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineplus">+  &lt;binding id=&quot;handler-selected&quot; extends=&quot;chrome://messenger/content/preferences/handlers.xml#handler-base&quot;&gt;</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineplus">+    &lt;content&gt;</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineplus">+      &lt;xul:hbox flex=&quot;1&quot; equalsize=&quot;always&quot;&gt;</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineplus">+        &lt;xul:hbox flex=&quot;1&quot; align=&quot;center&quot; xbl:inherits=&quot;tooltiptext=typeDescription&quot;&gt;</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineplus">+          &lt;xul:image src=&quot;moz-icon://goat?size=16&quot; class=&quot;typeIcon&quot;</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineplus">+                     xbl:inherits=&quot;src=typeIcon&quot; height=&quot;16&quot; width=&quot;16&quot;/&gt;</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineplus">+          &lt;xul:label flex=&quot;1&quot; crop=&quot;end&quot; xbl:inherits=&quot;value=typeDescription&quot;/&gt;</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineplus">+        &lt;xul:hbox flex=&quot;1&quot;&gt;</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineplus">+          &lt;xul:menulist class=&quot;actionsMenu&quot; flex=&quot;1&quot; crop=&quot;end&quot; selectedIndex=&quot;1&quot;</span>
<a href="#l13.90"></a><span id="l13.90" class="difflineplus">+                        xbl:inherits=&quot;tooltiptext=actionDescription&quot;</span>
<a href="#l13.91"></a><span id="l13.91" class="difflineplus">+                        oncommand=&quot;gApplicationsPane.onSelectAction(event.originalTarget)&quot;&gt;</span>
<a href="#l13.92"></a><span id="l13.92" class="difflineplus">+            &lt;xul:menupopup/&gt;</span>
<a href="#l13.93"></a><span id="l13.93" class="difflineplus">+          &lt;/xul:menulist&gt;</span>
<a href="#l13.94"></a><span id="l13.94" class="difflineplus">+        &lt;/xul:hbox&gt;</span>
<a href="#l13.95"></a><span id="l13.95" class="difflineplus">+      &lt;/xul:hbox&gt;</span>
<a href="#l13.96"></a><span id="l13.96" class="difflineplus">+    &lt;/content&gt;</span>
<a href="#l13.97"></a><span id="l13.97" class="difflineplus">+</span>
<a href="#l13.98"></a><span id="l13.98" class="difflineplus">+    &lt;implementation&gt;</span>
<a href="#l13.99"></a><span id="l13.99" class="difflineplus">+      &lt;constructor&gt;</span>
<a href="#l13.100"></a><span id="l13.100" class="difflineplus">+        gApplicationsPane.rebuildActionsMenu();</span>
<a href="#l13.101"></a><span id="l13.101" class="difflineplus">+      &lt;/constructor&gt;</span>
<a href="#l13.102"></a><span id="l13.102" class="difflineplus">+    &lt;/implementation&gt;</span>
<a href="#l13.103"></a><span id="l13.103" class="difflineplus">+</span>
<a href="#l13.104"></a><span id="l13.104" class="difflineplus">+  &lt;/binding&gt;</span>
<a href="#l13.105"></a><span id="l13.105" class="difflineplus">+&lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/components/preferences/jar.mn</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/components/preferences/jar.mn</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -13,20 +13,21 @@ messenger.jar:</span>
<a href="#l14.4"></a><span id="l14.4"> *   content/messenger/preferences/junkLog.xul</span>
<a href="#l14.5"></a><span id="l14.5"> *   content/messenger/preferences/junkLog.js</span>
<a href="#l14.6"></a><span id="l14.6"> *   content/messenger/preferences/advanced.js</span>
<a href="#l14.7"></a><span id="l14.7"> *   content/messenger/preferences/advanced.xul</span>
<a href="#l14.8"></a><span id="l14.8"> *   content/messenger/preferences/receipts.xul</span>
<a href="#l14.9"></a><span id="l14.9"> *   content/messenger/preferences/connection.js</span>
<a href="#l14.10"></a><span id="l14.10"> *   content/messenger/preferences/connection.xul</span>
<a href="#l14.11"></a><span id="l14.11"> *   content/messenger/preferences/downloads.js</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-*   content/messenger/preferences/downloads.xul</span>
<a href="#l14.13"></a><span id="l14.13"> *   content/messenger/preferences/attachmentReminder.js</span>
<a href="#l14.14"></a><span id="l14.14"> *   content/messenger/preferences/attachmentReminder.xul</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-*   content/messenger/preferences/downloadactions.js</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-*   content/messenger/preferences/downloadactions.xul</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+*   content/messenger/preferences/applications.xul</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+*   content/messenger/preferences/applications.js</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+*   content/messenger/preferences/applicationManager.xul</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineplus">+*   content/messenger/preferences/applicationManager.js</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineplus">+*   content/messenger/preferences/handlers.xml</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+*   content/messenger/preferences/handlers.css</span>
<a href="#l14.23"></a><span id="l14.23"> *   content/messenger/preferences/actionsshared.js</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineminus">-*   content/messenger/preferences/changeaction.js</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineminus">-*   content/messenger/preferences/changeaction.xul</span>
<a href="#l14.26"></a><span id="l14.26"> *   content/messenger/preferences/fonts.js</span>
<a href="#l14.27"></a><span id="l14.27"> *   content/messenger/preferences/fonts.xul</span>
<a href="#l14.28"></a><span id="l14.28"> *   content/messenger/preferences/notifications.xul</span>
<a href="#l14.29"></a><span id="l14.29"> *   content/messenger/preferences/offline.xul</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/components/preferences/preferences.xul</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/components/preferences/preferences.xul</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -17,17 +17,18 @@</span>
<a href="#l15.4"></a><span id="l15.4"> # The Original Code is the Thunderbird Preferences System.</span>
<a href="#l15.5"></a><span id="l15.5"> #</span>
<a href="#l15.6"></a><span id="l15.6"> # The Initial Developer of the Original Code is</span>
<a href="#l15.7"></a><span id="l15.7"> # Scott MacGregor.</span>
<a href="#l15.8"></a><span id="l15.8"> # Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l15.9"></a><span id="l15.9"> # the Initial Developer. All Rights Reserved.</span>
<a href="#l15.10"></a><span id="l15.10"> #</span>
<a href="#l15.11"></a><span id="l15.11"> # Contributor(s):</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-#   Scott MacGregor &lt;mscott@mozilla.org</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+#   Scott MacGregor &lt;mscott@mozilla.org&gt;</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineplus">+#   Magnus Melin &lt;mkmelin+mozilla@iki.fi&gt;</span>
<a href="#l15.15"></a><span id="l15.15"> #</span>
<a href="#l15.16"></a><span id="l15.16"> # Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l15.17"></a><span id="l15.17"> # either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l15.18"></a><span id="l15.18"> # the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l15.19"></a><span id="l15.19"> # in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l15.20"></a><span id="l15.20"> # of those above. If you wish to allow use of your version of this file only</span>
<a href="#l15.21"></a><span id="l15.21"> # under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l15.22"></a><span id="l15.22"> # use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineat">@@ -38,16 +39,24 @@</span>
<a href="#l15.24"></a><span id="l15.24"> #</span>
<a href="#l15.25"></a><span id="l15.25"> # ***** END LICENSE BLOCK *****</span>
<a href="#l15.26"></a><span id="l15.26"> </span>
<a href="#l15.27"></a><span id="l15.27"> &lt;?xml-stylesheet href=&quot;chrome://global/skin/global.css&quot;?&gt;</span>
<a href="#l15.28"></a><span id="l15.28"> &lt;?xml-stylesheet href=&quot;chrome://messenger/skin/preferences/preferences.css&quot;?&gt;</span>
<a href="#l15.29"></a><span id="l15.29"> &lt;?xml-stylesheet href=&quot;chrome://mozapps/content/preferences/preferences.css&quot;?&gt;</span>
<a href="#l15.30"></a><span id="l15.30"> &lt;?xml-stylesheet href=&quot;chrome://messenger/content/messenger.css&quot;?&gt;</span>
<a href="#l15.31"></a><span id="l15.31"> </span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+&lt;!-- XXX This should be in applications.xul, but bug 393953 means putting it</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineplus">+   - there causes the Applications pane not to work the first time you open</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineplus">+   - the Preferences dialog in a browsing session, so we work around the problem</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineplus">+   - by putting it here instead.</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+   --&gt;</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://messenger/content/preferences/handlers.css&quot;?&gt;</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://messenger/skin/preferences/applications.css&quot;?&gt;</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineplus">+</span>
<a href="#l15.40"></a><span id="l15.40"> &lt;!DOCTYPE prefwindow [</span>
<a href="#l15.41"></a><span id="l15.41"> &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l15.42"></a><span id="l15.42"> &lt;!ENTITY % preferencesDTD SYSTEM &quot;chrome://messenger/locale/preferences/preferences.dtd&quot;&gt;</span>
<a href="#l15.43"></a><span id="l15.43"> %brandDTD;</span>
<a href="#l15.44"></a><span id="l15.44"> %preferencesDTD;</span>
<a href="#l15.45"></a><span id="l15.45"> ]&gt;</span>
<a href="#l15.46"></a><span id="l15.46"> </span>
<a href="#l15.47"></a><span id="l15.47"> #ifdef XP_WIN</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineat">@@ -74,22 +83,25 @@</span>
<a href="#l15.49"></a><span id="l15.49">             style=&quot;&amp;prefWindow.styleWindows;&quot;&gt;</span>
<a href="#l15.50"></a><span id="l15.50"> #else</span>
<a href="#l15.51"></a><span id="l15.51"> #ifdef XP_MACOSX</span>
<a href="#l15.52"></a><span id="l15.52">             style=&quot;&amp;prefWindow.styleMac;&quot;&gt;</span>
<a href="#l15.53"></a><span id="l15.53"> #else</span>
<a href="#l15.54"></a><span id="l15.54">             style=&quot;&amp;prefWindow.styleGNOME;&quot;&gt;</span>
<a href="#l15.55"></a><span id="l15.55"> #endif</span>
<a href="#l15.56"></a><span id="l15.56"> #endif</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineminus">-  </span>
<a href="#l15.58"></a><span id="l15.58" class="difflineplus">+  &lt;stringbundle id=&quot;bundleBrand&quot; src=&quot;chrome://branding/locale/brand.properties&quot;/&gt;</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineplus">+  &lt;stringbundle id=&quot;bundlePreferences&quot;</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineplus">+                src=&quot;chrome://messenger/locale/preferences/preferences.properties&quot;/&gt;</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineplus">+</span>
<a href="#l15.62"></a><span id="l15.62">   &lt;prefpane id=&quot;paneGeneral&quot; label=&quot;&amp;paneGeneral.title;&quot;</span>
<a href="#l15.63"></a><span id="l15.63">             src=&quot;chrome://messenger/content/preferences/general.xul&quot;/&gt;</span>
<a href="#l15.64"></a><span id="l15.64">   &lt;prefpane id=&quot;paneDisplay&quot; label=&quot;&amp;paneDisplay.title;&quot;</span>
<a href="#l15.65"></a><span id="l15.65">             src=&quot;chrome://messenger/content/preferences/display.xul&quot;/&gt;</span>
<a href="#l15.66"></a><span id="l15.66">   &lt;prefpane id=&quot;paneCompose&quot; label=&quot;&amp;paneComposition.title;&quot;</span>
<a href="#l15.67"></a><span id="l15.67">             src=&quot;chrome://messenger/content/preferences/compose.xul&quot;/&gt;</span>
<a href="#l15.68"></a><span id="l15.68">   &lt;prefpane id=&quot;paneSecurity&quot; label=&quot;&amp;paneSecurity.title;&quot;</span>
<a href="#l15.69"></a><span id="l15.69">             src=&quot;chrome://messenger/content/preferences/security.xul&quot;/&gt;</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineminus">-  &lt;prefpane id=&quot;paneDownloads&quot; label=&quot;&amp;paneAttachments.title;&quot;</span>
<a href="#l15.71"></a><span id="l15.71" class="difflineminus">-            src=&quot;chrome://messenger/content/preferences/downloads.xul&quot;/&gt;</span>
<a href="#l15.72"></a><span id="l15.72" class="difflineplus">+  &lt;prefpane id=&quot;paneApplications&quot; label=&quot;&amp;paneAttachments.title;&quot;</span>
<a href="#l15.73"></a><span id="l15.73" class="difflineplus">+            src=&quot;chrome://messenger/content/preferences/applications.xul&quot;/&gt;</span>
<a href="#l15.74"></a><span id="l15.74">   &lt;prefpane id=&quot;paneAdvanced&quot; label=&quot;&amp;paneAdvanced.title;&quot;</span>
<a href="#l15.75"></a><span id="l15.75">             src=&quot;chrome://messenger/content/preferences/advanced.xul&quot;/&gt;</span>
<a href="#l15.76"></a><span id="l15.76"> &lt;/prefwindow&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">new file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- /dev/null</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/preferences/applicationManager.dtd</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -0,0 +1,4 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineplus">+&lt;!ENTITY appManager.title     &quot;Application Details&quot;&gt;</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineplus">+&lt;!ENTITY appManager.style     &quot;width: 30em; min-height: 20em;&quot;&gt;</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineplus">+&lt;!ENTITY remove.label         &quot;Remove&quot;&gt;</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineplus">+&lt;!ENTITY remove.accesskey     &quot;R&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">new file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- /dev/null</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/preferences/applicationManager.properties</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -0,0 +1,9 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineplus">+# LOCALIZATION NOTE</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineplus">+# in descriptionApplications, %S will be replaced by one of the 3 following strings</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineplus">+descriptionApplications=The following applications can be used to handle %S.</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineplus">+</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineplus">+handleProtocol=%S links</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineplus">+handleFile=%S content</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineplus">+</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineplus">+descriptionWebApp=This web application is hosted at:</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+descriptionLocalApp=This application is located at:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">new file mode 100755</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- /dev/null</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/preferences/applications.dtd</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -0,0 +1,19 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineplus">+&lt;!ENTITY  typeColumn.label            &quot;Content Type&quot;&gt;</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineplus">+&lt;!ENTITY  typeColumn.accesskey        &quot;T&quot;&gt;</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineplus">+</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+&lt;!ENTITY  actionColumn2.label         &quot;Action&quot;&gt;</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineplus">+&lt;!ENTITY  actionColumn2.accesskey     &quot;A&quot;&gt;</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineplus">+&lt;!ENTITY  focusSearch1.key            &quot;f&quot;&gt;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+&lt;!ENTITY  focusSearch2.key            &quot;k&quot;&gt;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+&lt;!ENTITY  filter.emptytext            &quot;Search&quot;&gt;</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+&lt;!ENTITY saveTo.label                 &quot;Save files to&quot;&gt;</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+&lt;!ENTITY saveTo.accesskey             &quot;S&quot;&gt;</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineplus">+&lt;!ENTITY alwaysAsk.label              &quot;Always ask me where to save files&quot;&gt;</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineplus">+&lt;!ENTITY alwaysAsk.accesskey          &quot;A&quot;&gt;</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineplus">+&lt;!ENTITY chooseFolderWin.label        &quot;Browse…&quot;&gt;</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineplus">+&lt;!ENTITY chooseFolderWin.accesskey    &quot;B&quot;&gt;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineplus">+&lt;!ENTITY chooseFolderMac.label        &quot;Choose…&quot;&gt;</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineplus">+&lt;!ENTITY chooseFolderMac.accesskey    &quot;C&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">deleted file mode 100644</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/preferences/changeaction.dtd</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineplus">+++ /dev/null</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineat">@@ -1,21 +0,0 @@</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">-&lt;!ENTITY  changeAction.title                  &quot;Change Action&quot;&gt;</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">-&lt;!ENTITY  window.width                         &quot;36em&quot;&gt;</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">-</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">-&lt;!ENTITY  whenDownloading.label               &quot;When downloading files like this:&quot;&gt;</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">-</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineminus">-&lt;!ENTITY  openDefault.label                   &quot;Open them with the default application:&quot;&gt;</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineminus">-&lt;!ENTITY  openDefault.accesskey               &quot;O&quot;&gt;</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-&lt;!ENTITY  openApplication.label               &quot;Open them with this application:&quot;&gt;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-&lt;!ENTITY  openApplication.accesskey           &quot;e&quot;&gt;</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineminus">-&lt;!ENTITY  changeApp.label                     &quot;Browse…&quot;&gt;</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-&lt;!ENTITY  changeApp.accesskey                 &quot;B&quot;&gt;</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-&lt;!ENTITY  saveToDisk.label                    &quot;Save them on my computer&quot;&gt;</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-&lt;!ENTITY  saveToDisk.accesskey                &quot;S&quot;&gt;</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-&lt;!ENTITY  saveToDefaultFolder.label           &quot;in the default download folder&quot;&gt;</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-&lt;!ENTITY  saveToDefaultFolder.accesskey       &quot;d&quot;&gt;</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-&lt;!ENTITY  saveToThisFolder.label              &quot;in this folder:&quot;&gt;</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-&lt;!ENTITY  saveToThisFolder.accesskey          &quot;h&quot;&gt;</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineminus">-&lt;!ENTITY  chooseFolder.label                  &quot;Browse…&quot;&gt;</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineminus">-&lt;!ENTITY  chooseFolder.accesskey              &quot;w&quot;&gt;</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-&lt;!ENTITY  saveToAskMe.label                   &quot;ask me where to save the file&quot;&gt;</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-&lt;!ENTITY  saveToAskMe.accesskey               &quot;a&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/preferences/downloadactions.dtd</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,32 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-&lt;!ENTITY  downloadactionsWindow.title         &quot;Download Actions&quot;&gt;</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">-&lt;!ENTITY  window.width                         &quot;480&quot;&gt;</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">-&lt;!ENTITY  window.height                        &quot;310&quot;&gt;</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-&lt;!ENTITY  fileTypesDescription.label          &quot;Automatically perform the associated Action with each of the following file types:&quot;&gt;</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineminus">-&lt;!ENTITY  fileHandlerColumn.label             &quot;Action&quot;&gt;</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-&lt;!ENTITY  fileHandlerColumn.accesskey         &quot;A&quot;&gt;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-&lt;!ENTITY  fileTypeColumn.label                &quot;File Type&quot;&gt;</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-&lt;!ENTITY  fileTypeColumn.accesskey            &quot;T&quot;&gt;</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-&lt;!ENTITY  fileMIMETypeColumn.label            &quot;MIME Type&quot;&gt;</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-&lt;!ENTITY  fileMIMETypeColumn.accesskey        &quot;M&quot;&gt;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-&lt;!ENTITY  fileExtensionColumn.label           &quot;Extension&quot;&gt;</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-&lt;!ENTITY  fileExtensionColumn.accesskey       &quot;E&quot;&gt;</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineminus">-&lt;!ENTITY  remove.label                        &quot;Remove Action&quot;&gt;</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">-&lt;!ENTITY  remove.accesskey                    &quot;R&quot;&gt;</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-&lt;!ENTITY  edit.label                          &quot;Change Action…&quot;&gt;</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-&lt;!ENTITY  edit.accesskey                      &quot;C&quot;&gt;</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-&lt;!ENTITY  windowClose.key                     &quot;w&quot;&gt;</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-&lt;!ENTITY  focusSearch1.key                    &quot;f&quot;&gt;</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-&lt;!ENTITY  focusSearch2.key                    &quot;k&quot;&gt;</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-&lt;!ENTITY  filter.label                        &quot;Search:&quot;&gt;</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-&lt;!ENTITY  filter.accesskey                    &quot;S&quot;&gt;</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-&lt;!ENTITY  clear.label                         &quot;Clear&quot;&gt;</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-&lt;!ENTITY  clear.accesskey                     &quot;l&quot;&gt;</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-&lt;!ENTITY  button.close.label                  &quot;Close&quot;&gt;</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-&lt;!ENTITY  button.close.accesskey              &quot;o&quot;&gt;</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">deleted file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/preferences/downloads.dtd</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ /dev/null</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -1,15 +0,0 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineminus">-&lt;!ENTITY askOnSave.label              &quot;Attachments Folder&quot;&gt;</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineminus">-&lt;!ENTITY alwaysAsk.label              &quot;Ask me where to save every file&quot;&gt;</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">-&lt;!ENTITY alwaysAsk.accesskey          &quot;A&quot;&gt;</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineminus">-&lt;!ENTITY neverAsk.label               &quot;Save all attachments to this folder:&quot;&gt;</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">-&lt;!ENTITY neverAsk.accesskey           &quot;S&quot;&gt;</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineminus">-&lt;!ENTITY chooseFolderWin.label        &quot;Browse…&quot;&gt;</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">-&lt;!ENTITY chooseFolderWin.accesskey    &quot;B&quot;&gt;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-&lt;!ENTITY chooseFolderMac.label        &quot;Choose…&quot;&gt;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-&lt;!ENTITY chooseFolderMac.accesskey    &quot;C&quot;&gt;</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-&lt;!ENTITY fileTypes.label              &quot;Download Actions&quot;&gt;</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-&lt;!ENTITY configureActions.label       &quot;View &amp;amp; Edit Actions…&quot;&gt;</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-&lt;!ENTITY configureActions.accesskey   &quot;V&quot;&gt;</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-&lt;!ENTITY fileTypesDescription.label   &quot;&amp;brandShortName; can automatically save or open attachments of certain types.&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/preferences/preferences.dtd</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -1,9 +1,8 @@</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineminus">-</span>
<a href="#l22.5"></a><span id="l22.5"> &lt;!ENTITY  prefWindow.titleWin     &quot;Options&quot;&gt;</span>
<a href="#l22.6"></a><span id="l22.6"> &lt;!ENTITY  prefWindow.titleGNOME   &quot;&amp;brandShortName; Preferences&quot;&gt;</span>
<a href="#l22.7"></a><span id="l22.7"> &lt;!ENTITY  prefWindow.styleWindows &quot;width: 44em; min-height: 38.5em;&quot;&gt;</span>
<a href="#l22.8"></a><span id="l22.8"> &lt;!ENTITY  prefWindow.styleMac     &quot;width: 47em;&quot;&gt;</span>
<a href="#l22.9"></a><span id="l22.9"> &lt;!ENTITY  prefWindow.styleGNOME   &quot;width: 42em; min-height: 38em;&quot;&gt;</span>
<a href="#l22.10"></a><span id="l22.10"> </span>
<a href="#l22.11"></a><span id="l22.11"> &lt;!ENTITY paneGeneral.title        &quot;General&quot;&gt;</span>
<a href="#l22.12"></a><span id="l22.12"> &lt;!ENTITY paneDisplay.title        &quot;Display&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/preferences/preferences.properties</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/preferences/preferences.properties</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -10,36 +10,41 @@ domainDuplicationError=The domain name %</span>
<a href="#l23.4"></a><span id="l23.4"> </span>
<a href="#l23.5"></a><span id="l23.5"> #### Junk</span>
<a href="#l23.6"></a><span id="l23.6"> confirmResetJunkTrainingTitle=Confirm</span>
<a href="#l23.7"></a><span id="l23.7"> confirmResetJunkTrainingText=Are you sure you want to reset the adaptive filter training data?</span>
<a href="#l23.8"></a><span id="l23.8"> </span>
<a href="#l23.9"></a><span id="l23.9"> #### Downloads</span>
<a href="#l23.10"></a><span id="l23.10"> desktopFolderName=Desktop</span>
<a href="#l23.11"></a><span id="l23.11"> myDownloadsFolderName=My Downloads</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-chooseDownloadFolderTitle=Choose Download Folder:</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+chooseAttachmentsFolderTitle=Choose Folder</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineplus">+</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineplus">+#### Applications</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineplus">+</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineplus">+fileEnding=%S file</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineplus">+saveFile=Save File</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineplus">+</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineplus">+# LOCALIZATION NOTE (useApp, useDefault): %S = Application name</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineplus">+useApp=Use %S</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+useDefault=Use %S (default)</span>
<a href="#l23.23"></a><span id="l23.23"> </span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-#### Download Actions</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-extensionNone=(NONE)</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-removeButtonSingle=Remove Action</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineminus">-removeButtonMultiple=Remove Actions</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineminus">-removeTitleSingle=Remove Action</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineminus">-removeTitleMultiple=Remove Actions</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineminus">-removeMessageSingle=The selected Action will no longer be performed when files of the affected types are downloaded. Are you sure you want to remove this Action?</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-removeMessageMultiple=The selected Actions will no longer be performed when files of the affected types are downloaded. Are you sure you want to remove these Actions?</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineminus">-fileEnding=%S file</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineminus">-saveToDisk=Save to Disk</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineminus">-openWith=Open with %S</span>
<a href="#l23.35"></a><span id="l23.35" class="difflineminus">-actionsFiltered=The following Actions match your search:</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineminus">-actionsAll=Automatically perform the associated Action with each of the following file types:</span>
<a href="#l23.37"></a><span id="l23.37" class="difflineplus">+useOtherApp=Use other…</span>
<a href="#l23.38"></a><span id="l23.38" class="difflineplus">+fpTitleChooseApp=Select Helper Application</span>
<a href="#l23.39"></a><span id="l23.39" class="difflineplus">+manageApp=Application Details…</span>
<a href="#l23.40"></a><span id="l23.40" class="difflineplus">+alwaysAsk=Always ask</span>
<a href="#l23.41"></a><span id="l23.41"> </span>
<a href="#l23.42"></a><span id="l23.42" class="difflineminus">-#### Change Action</span>
<a href="#l23.43"></a><span id="l23.43" class="difflineminus">-extensionStringFormat=%S, %S</span>
<a href="#l23.44"></a><span id="l23.44" class="difflineminus">-fpTitleChooseApp=Select Helper Application</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineminus">-fpTitleChooseDL=Select Download Folder</span>
<a href="#l23.46"></a><span id="l23.46" class="difflineplus">+# LOCALIZATION NOTE (usePluginIn):</span>
<a href="#l23.47"></a><span id="l23.47" class="difflineplus">+# %1$S = plugin name (for example &quot;QuickTime Plugin-in 7.2&quot;)</span>
<a href="#l23.48"></a><span id="l23.48" class="difflineplus">+# %2$S = brandShortName from brand.properties (for example &quot;Shredder&quot;)</span>
<a href="#l23.49"></a><span id="l23.49" class="difflineplus">+usePluginIn=Use %1$S (in %2$S)</span>
<a href="#l23.50"></a><span id="l23.50" class="difflineplus">+</span>
<a href="#l23.51"></a><span id="l23.51" class="difflineplus">+# LOCALIZATION NOTE (typeDescriptionWithType):</span>
<a href="#l23.52"></a><span id="l23.52" class="difflineplus">+# %1$S = type description (for example &quot;Portable Document Format&quot;)</span>
<a href="#l23.53"></a><span id="l23.53" class="difflineplus">+# %2$S = type (for example &quot;application/pdf&quot;)</span>
<a href="#l23.54"></a><span id="l23.54" class="difflineplus">+typeDescriptionWithType=%1$S (%2$S)</span>
<a href="#l23.55"></a><span id="l23.55"> </span>
<a href="#l23.56"></a><span id="l23.56"> #### Sound Notifications</span>
<a href="#l23.57"></a><span id="l23.57"> soundFilePickerTitle=Choose Sound</span>
<a href="#l23.58"></a><span id="l23.58"> </span>
<a href="#l23.59"></a><span id="l23.59"> #### Shell Service</span>
<a href="#l23.60"></a><span id="l23.60"> alreadyDefaultClientTitle=Default Client</span>
<a href="#l23.61"></a><span id="l23.61"> alreadyDefault=%S is already set as your default mail client.</span>
<a href="#l23.62"></a><span id="l23.62"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/locales/jar.mn</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/locales/jar.mn</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -120,19 +120,19 @@</span>
<a href="#l24.4"></a><span id="l24.4">   locale/@AB_CD@/messenger/preferences/compose.dtd                      (%chrome/messenger/preferences/compose.dtd)</span>
<a href="#l24.5"></a><span id="l24.5">   locale/@AB_CD@/messenger/preferences/sendoptions.dtd                  (%chrome/messenger/preferences/sendoptions.dtd)</span>
<a href="#l24.6"></a><span id="l24.6">   locale/@AB_CD@/messenger/preferences/security.dtd                     (%chrome/messenger/preferences/security.dtd)</span>
<a href="#l24.7"></a><span id="l24.7">   locale/@AB_CD@/messenger/preferences/junkLog.dtd                      (%chrome/messenger/preferences/junkLog.dtd)</span>
<a href="#l24.8"></a><span id="l24.8">   locale/@AB_CD@/messenger/preferences/advanced.dtd                     (%chrome/messenger/preferences/advanced.dtd)</span>
<a href="#l24.9"></a><span id="l24.9">   locale/@AB_CD@/messenger/preferences/attachmentReminder.dtd           (%chrome/messenger/preferences/attachmentReminder.dtd)</span>
<a href="#l24.10"></a><span id="l24.10">   locale/@AB_CD@/messenger/preferences/receipts.dtd                     (%chrome/messenger/preferences/receipts.dtd)</span>
<a href="#l24.11"></a><span id="l24.11">   locale/@AB_CD@/messenger/preferences/connection.dtd                   (%chrome/messenger/preferences/connection.dtd)</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  locale/@AB_CD@/messenger/preferences/downloads.dtd                    (%chrome/messenger/preferences/downloads.dtd)</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-  locale/@AB_CD@/messenger/preferences/downloadactions.dtd              (%chrome/messenger/preferences/downloadactions.dtd)</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-  locale/@AB_CD@/messenger/preferences/changeaction.dtd                 (%chrome/messenger/preferences/changeaction.dtd)</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+  locale/@AB_CD@/messenger/preferences/applications.dtd                 (%chrome/messenger/preferences/applications.dtd)</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+  locale/@AB_CD@/messenger/preferences/applicationManager.dtd           (%chrome/messenger/preferences/applicationManager.dtd)</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+  locale/@AB_CD@/messenger/preferences/applicationManager.properties    (%chrome/messenger/preferences/applicationManager.properties)</span>
<a href="#l24.18"></a><span id="l24.18">   locale/@AB_CD@/messenger/preferences/fonts.dtd                        (%chrome/messenger/preferences/fonts.dtd)</span>
<a href="#l24.19"></a><span id="l24.19">   locale/@AB_CD@/messenger/preferences/offline.dtd                      (%chrome/messenger/preferences/offline.dtd)</span>
<a href="#l24.20"></a><span id="l24.20">   locale/@AB_CD@/messenger/preferences/notifications.dtd                (%chrome/messenger/preferences/notifications.dtd)</span>
<a href="#l24.21"></a><span id="l24.21">   locale/@AB_CD@/messenger/preferences/preferences.properties           (%chrome/messenger/preferences/preferences.properties)</span>
<a href="#l24.22"></a><span id="l24.22">   locale/@AB_CD@/messenger/migration/migration.dtd                      (%chrome/messenger/migration/migration.dtd)</span>
<a href="#l24.23"></a><span id="l24.23">   locale/@AB_CD@/messenger/migration/migration.properties               (%chrome/messenger/migration/migration.properties)</span>
<a href="#l24.24"></a><span id="l24.24">   locale/@AB_CD@/messenger/searchIntegrationWin.dtd                     (%chrome/messenger/searchIntegrationWin.dtd)</span>
<a href="#l24.25"></a><span id="l24.25">   locale/@AB_CD@/messenger/searchIntegrationMac.dtd                     (%chrome/messenger/searchIntegrationMac.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/themes/gnomestripe/jar.mn</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/themes/gnomestripe/jar.mn</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -63,22 +63,24 @@ classic.jar:</span>
<a href="#l25.4"></a><span id="l25.4">   skin/classic/messenger/messengercompose/editorOverlay.css    (mail/compose/editorOverlay.css)</span>
<a href="#l25.5"></a><span id="l25.5">   skin/classic/messenger/messengercompose/compose-toolbar.png  (mail/compose/compose-toolbar.png)</span>
<a href="#l25.6"></a><span id="l25.6">   skin/classic/messenger/messengercompose/compose-toolbar-small.png   (mail/compose/compose-toolbar-small.png)</span>
<a href="#l25.7"></a><span id="l25.7">   skin/classic/messenger/messengercompose/format-buttons.png  (mail/compose/format-buttons.png)</span>
<a href="#l25.8"></a><span id="l25.8"> % skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l25.9"></a><span id="l25.9">   skin/classic/messenger-newsblog/feed-subscriptions.css      (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l25.10"></a><span id="l25.10">   skin/classic/messenger-newsblog/icons/rss-feed.png          (mail/newsblog/rss-feed.png)</span>
<a href="#l25.11"></a><span id="l25.11">   skin/classic/messenger-newsblog/icons/server-rss.png        (mail/newsblog/server-rss.png)</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+  skin/classic/messenger/preferences/alwaysAsk.png            (mail/preferences/alwaysAsk.png)</span>
<a href="#l25.13"></a><span id="l25.13">   skin/classic/messenger/preferences/preferences.css          (mail/preferences/preferences.css)</span>
<a href="#l25.14"></a><span id="l25.14">   skin/classic/messenger/preferences/general.png              (mail/preferences/general.png)</span>
<a href="#l25.15"></a><span id="l25.15">   skin/classic/messenger/preferences/display.png              (mail/preferences/display.png)</span>
<a href="#l25.16"></a><span id="l25.16">   skin/classic/messenger/preferences/composition.png          (mail/preferences/composition.png)</span>
<a href="#l25.17"></a><span id="l25.17">   skin/classic/messenger/preferences/security.png             (mail/preferences/security.png)</span>
<a href="#l25.18"></a><span id="l25.18">   skin/classic/messenger/preferences/attachments.png          (mail/preferences/attachments.png)</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineplus">+  skin/classic/messenger/preferences/applications.css         (mail/preferences/applications.css)</span>
<a href="#l25.20"></a><span id="l25.20">   skin/classic/messenger/preferences/advanced.png             (mail/preferences/advanced.png)</span>
<a href="#l25.21"></a><span id="l25.21">   skin/classic/messenger/preferences/background.png           (mail/preferences/background.png)</span>
<a href="#l25.22"></a><span id="l25.22">   skin/classic/messenger/preferences/hover.png                (mail/preferences/hover.png)</span>
<a href="#l25.23"></a><span id="l25.23">   skin/classic/messenger/preferences/selected.png             (mail/preferences/selected.png)</span>
<a href="#l25.24"></a><span id="l25.24">   skin/classic/messenger/smime/msgCompSMIMEOverlay.css        (mail/smime/msgCompSMIMEOverlay.css)</span>
<a href="#l25.25"></a><span id="l25.25">   skin/classic/messenger/smime/msgHdrViewSMIMEOverlay.css     (mail/smime/msgHdrViewSMIMEOverlay.css)</span>
<a href="#l25.26"></a><span id="l25.26">   skin/classic/messenger/smime/msgReadSMIMEOverlay.css        (mail/smime/msgReadSMIMEOverlay.css)</span>
<a href="#l25.27"></a><span id="l25.27">   skin/classic/messenger/smime/msgReadSecurityInfo.css        (mail/smime/msgReadSecurityInfo.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">new file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..45256d4e76b2aabb4c32889dc03bca3f9e5f80f4</span>
<a href="#l26.3"></a><span id="l26.3">GIT binary patch
literal 575
zc$@)00&gt;J%=P)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00004b3#c}2nYxW
zd&lt;bNS00009a7bBm000fw000fw0YWI7cmMzZ8FWQhbW?9;ba!ELWdL_~cP?peYja~^
zaAhuUa%Y?FJQ@H10lY~&gt;K~y-6jZ;Bu6HyTUW;0n+wH}KgNH0%8^ybZrh!-ssjN~2)
zJ+#!G)S!5cB&amp;+xbM6lpN3RyuKQS{!EE!0xm=F*%*@UoDmn`HXNgW1(hHj)qK^1e4S
z-#7CfRlM@F&gt;$+7D$y;j~W5977VP?PE?UvYe-RjKk*@7{K2sBPU6v~Z8qfr0w9xNhx
zV+@5yM^M$V3J?*DF(e{+w$?I%V69DDTKU?&gt;&gt;P7$nxOHg~OV&gt;{SRiKJ~4m;7IRhx*n
z&gt;pxH{PN7zuLVfcm#2zR32=UN#K!HDh9$826X8jlLT%G`_rdo^(*a4C=z~}7%K`X?&lt;
z&amp;2vM1gpn3Ha*SuSZOmOiJH(}07#w1TfOn;&lt;$dJO?(c6g?sM?{Jeewm}o}_ZI0wNMs
zWzevSwWl{?dx@@&amp;^JkSr!p!XN?e7*Yn2Xd74{_LTVe-@&amp;Oyo|2DE(!sD)#nwm6?62
zc;)GAHtXe1&lt;nAsm+;adR?1Xr|@=AgrNc|iA&amp;VH}gD?$7Ft$1ZsRc$s8&lt;oSzgv*MMn
zMBM)((c$B#dS~bR&amp;YFl6OAj8mMvnd;#07{b-1@e){P6yxm*XTx_zeR~Eq)WNar6KH
N002ovPDHLkV1hx51f&gt;7~</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">new file mode 100644</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineminus">--- /dev/null</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineplus">+++ b/mail/themes/gnomestripe/mail/preferences/applications.css</span>
<a href="#l27.4"></a><span id="l27.4" class="difflineat">@@ -0,0 +1,92 @@</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l27.6"></a><span id="l27.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l27.7"></a><span id="l27.7" class="difflineplus">+ *</span>
<a href="#l27.8"></a><span id="l27.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l27.9"></a><span id="l27.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l27.10"></a><span id="l27.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l27.11"></a><span id="l27.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineplus">+ *</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineplus">+ * License.</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineplus">+ *</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineplus">+ * The Original Code is the Firefox Preferences System.</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineplus">+ *</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineplus">+ * The Initial Developer of the Original Code is Mozilla Corporation.</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineplus">+ *</span>
<a href="#l27.24"></a><span id="l27.24" class="difflineplus">+ * Contributor(s):</span>
<a href="#l27.25"></a><span id="l27.25" class="difflineplus">+ *   Florian Queze &lt;florian@mozilla.com&gt;</span>
<a href="#l27.26"></a><span id="l27.26" class="difflineplus">+ *</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l27.28"></a><span id="l27.28" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l27.29"></a><span id="l27.29" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l27.30"></a><span id="l27.30" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l27.32"></a><span id="l27.32" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l27.33"></a><span id="l27.33" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l27.34"></a><span id="l27.34" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l27.35"></a><span id="l27.35" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l27.36"></a><span id="l27.36" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l27.37"></a><span id="l27.37" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l27.38"></a><span id="l27.38" class="difflineplus">+ *</span>
<a href="#l27.39"></a><span id="l27.39" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l27.40"></a><span id="l27.40" class="difflineplus">+</span>
<a href="#l27.41"></a><span id="l27.41" class="difflineplus">+/**</span>
<a href="#l27.42"></a><span id="l27.42" class="difflineplus">+ * Line up the actions menu with action labels above and below it.</span>
<a href="#l27.43"></a><span id="l27.43" class="difflineplus">+ * Equalize the distance from the left side of the action box to the left side</span>
<a href="#l27.44"></a><span id="l27.44" class="difflineplus">+ * of the icon for both the menu and the non-menu versions of the action box.</span>
<a href="#l27.45"></a><span id="l27.45" class="difflineplus">+ * Also make sure the labels are the same distance away from the icons.</span>
<a href="#l27.46"></a><span id="l27.46" class="difflineplus">+ */</span>
<a href="#l27.47"></a><span id="l27.47" class="difflineplus">+.actionsMenu {</span>
<a href="#l27.48"></a><span id="l27.48" class="difflineplus">+  margin-top: -1px;</span>
<a href="#l27.49"></a><span id="l27.49" class="difflineplus">+  margin-bottom: -1px;</span>
<a href="#l27.50"></a><span id="l27.50" class="difflineplus">+  -moz-margin-start: -1px;</span>
<a href="#l27.51"></a><span id="l27.51" class="difflineplus">+  -moz-margin-end: 0;</span>
<a href="#l27.52"></a><span id="l27.52" class="difflineplus">+}</span>
<a href="#l27.53"></a><span id="l27.53" class="difflineplus">+</span>
<a href="#l27.54"></a><span id="l27.54" class="difflineplus">+.typeIcon,</span>
<a href="#l27.55"></a><span id="l27.55" class="difflineplus">+.actionIcon {</span>
<a href="#l27.56"></a><span id="l27.56" class="difflineplus">+  margin: 0px 3px;</span>
<a href="#l27.57"></a><span id="l27.57" class="difflineplus">+}</span>
<a href="#l27.58"></a><span id="l27.58" class="difflineplus">+</span>
<a href="#l27.59"></a><span id="l27.59" class="difflineplus">+richlistitem label {</span>
<a href="#l27.60"></a><span id="l27.60" class="difflineplus">+  -moz-margin-start: 1px;</span>
<a href="#l27.61"></a><span id="l27.61" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l27.62"></a><span id="l27.62" class="difflineplus">+}</span>
<a href="#l27.63"></a><span id="l27.63" class="difflineplus">+</span>
<a href="#l27.64"></a><span id="l27.64" class="difflineplus">+richlistitem {</span>
<a href="#l27.65"></a><span id="l27.65" class="difflineplus">+  min-height: 25px;</span>
<a href="#l27.66"></a><span id="l27.66" class="difflineplus">+}</span>
<a href="#l27.67"></a><span id="l27.67" class="difflineplus">+</span>
<a href="#l27.68"></a><span id="l27.68" class="difflineplus">+richlistitem[appHandlerIcon=&quot;ask&quot;],</span>
<a href="#l27.69"></a><span id="l27.69" class="difflineplus">+menuitem[appHandlerIcon=&quot;ask&quot;] {</span>
<a href="#l27.70"></a><span id="l27.70" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/preferences/alwaysAsk.png&quot;);</span>
<a href="#l27.71"></a><span id="l27.71" class="difflineplus">+}</span>
<a href="#l27.72"></a><span id="l27.72" class="difflineplus">+</span>
<a href="#l27.73"></a><span id="l27.73" class="difflineplus">+richlistitem[appHandlerIcon=&quot;save&quot;],</span>
<a href="#l27.74"></a><span id="l27.74" class="difflineplus">+menuitem[appHandlerIcon=&quot;save&quot;] {</span>
<a href="#l27.75"></a><span id="l27.75" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-save?size=menu&quot;);</span>
<a href="#l27.76"></a><span id="l27.76" class="difflineplus">+}</span>
<a href="#l27.77"></a><span id="l27.77" class="difflineplus">+</span>
<a href="#l27.78"></a><span id="l27.78" class="difflineplus">+richlistitem[appHandlerIcon=&quot;plugin&quot;],</span>
<a href="#l27.79"></a><span id="l27.79" class="difflineplus">+menuitem[appHandlerIcon=&quot;plugin&quot;] {</span>
<a href="#l27.80"></a><span id="l27.80" class="difflineplus">+  list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l27.81"></a><span id="l27.81" class="difflineplus">+}</span>
<a href="#l27.82"></a><span id="l27.82" class="difflineplus">+</span>
<a href="#l27.83"></a><span id="l27.83" class="difflineplus">+.actionsMenu .menulist-icon {</span>
<a href="#l27.84"></a><span id="l27.84" class="difflineplus">+  -moz-margin-end: 1px;</span>
<a href="#l27.85"></a><span id="l27.85" class="difflineplus">+  height: 16px;</span>
<a href="#l27.86"></a><span id="l27.86" class="difflineplus">+  width: 16px;</span>
<a href="#l27.87"></a><span id="l27.87" class="difflineplus">+}</span>
<a href="#l27.88"></a><span id="l27.88" class="difflineplus">+</span>
<a href="#l27.89"></a><span id="l27.89" class="difflineplus">+.actionsMenu &gt; menupopup &gt; menuitem &gt; .menu-iconic-left {</span>
<a href="#l27.90"></a><span id="l27.90" class="difflineplus">+  -moz-padding-start: 0;</span>
<a href="#l27.91"></a><span id="l27.91" class="difflineplus">+  -moz-padding-end: 4px !important;</span>
<a href="#l27.92"></a><span id="l27.92" class="difflineplus">+}</span>
<a href="#l27.93"></a><span id="l27.93" class="difflineplus">+</span>
<a href="#l27.94"></a><span id="l27.94" class="difflineplus">+.actionsMenu &gt; menupopup &gt; menuitem {</span>
<a href="#l27.95"></a><span id="l27.95" class="difflineplus">+  -moz-padding-start: 3px;</span>
<a href="#l27.96"></a><span id="l27.96" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/themes/gnomestripe/mail/preferences/preferences.css</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/themes/gnomestripe/mail/preferences/preferences.css</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -47,23 +47,32 @@ radio[pane=paneDisplay] {</span>
<a href="#l28.4"></a><span id="l28.4">   list-style-image: url(&quot;chrome://messenger/skin/preferences/display.png&quot;);</span>
<a href="#l28.5"></a><span id="l28.5"> }</span>
<a href="#l28.6"></a><span id="l28.6"> radio[pane=paneCompose] {</span>
<a href="#l28.7"></a><span id="l28.7">   list-style-image: url(&quot;chrome://messenger/skin/preferences/composition.png&quot;);</span>
<a href="#l28.8"></a><span id="l28.8"> }</span>
<a href="#l28.9"></a><span id="l28.9"> radio[pane=paneSecurity] {</span>
<a href="#l28.10"></a><span id="l28.10">   list-style-image: url(&quot;chrome://messenger/skin/preferences/security.png&quot;);</span>
<a href="#l28.11"></a><span id="l28.11"> }</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-radio[pane=paneDownloads] {</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+radio[pane=paneApplications] {</span>
<a href="#l28.14"></a><span id="l28.14">   list-style-image: url(&quot;chrome://messenger/skin/preferences/attachments.png&quot;);</span>
<a href="#l28.15"></a><span id="l28.15"> }</span>
<a href="#l28.16"></a><span id="l28.16"> radio[pane=paneAdvanced] {</span>
<a href="#l28.17"></a><span id="l28.17">   list-style-image: url(&quot;chrome://messenger/skin/preferences/advanced.png&quot;);</span>
<a href="#l28.18"></a><span id="l28.18"> }</span>
<a href="#l28.19"></a><span id="l28.19"> </span>
<a href="#l28.20"></a><span id="l28.20" class="difflineplus">+/* Attachments Pane */</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineplus">+#MailPreferences[animated=&quot;true&quot;] #handlersView {</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineplus">+  height: 25em;</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineplus">+}</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineplus">+</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineplus">+#MailPreferences[animated=&quot;false&quot;] #handlersView {</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+  -moz-box-flex: 1;</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineplus">+}</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineplus">+</span>
<a href="#l28.29"></a><span id="l28.29"> /* File Field Widget */</span>
<a href="#l28.30"></a><span id="l28.30"> filefield {</span>
<a href="#l28.31"></a><span id="l28.31">   margin: 2px 4px;</span>
<a href="#l28.32"></a><span id="l28.32">   -moz-appearance: textfield;</span>
<a href="#l28.33"></a><span id="l28.33"> }</span>
<a href="#l28.34"></a><span id="l28.34"> </span>
<a href="#l28.35"></a><span id="l28.35"> .fileFieldContentBox {</span>
<a href="#l28.36"></a><span id="l28.36">   background-color: -moz-Dialog;</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineat">@@ -105,89 +114,16 @@ filefield[disabled=&quot;true&quot;] .fileFieldIco</span>
<a href="#l28.38"></a><span id="l28.38"> .contentPane {</span>
<a href="#l28.39"></a><span id="l28.39">   margin: 9px 8px 5px;</span>
<a href="#l28.40"></a><span id="l28.40"> }</span>
<a href="#l28.41"></a><span id="l28.41"> </span>
<a href="#l28.42"></a><span id="l28.42"> .actionButtons {</span>
<a href="#l28.43"></a><span id="l28.43">   margin: 0px 3px 6px !important;</span>
<a href="#l28.44"></a><span id="l28.44"> }</span>
<a href="#l28.45"></a><span id="l28.45"> </span>
<a href="#l28.46"></a><span id="l28.46" class="difflineminus">-/* Download Actions Manager */</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineminus">-#fileExtension {</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineminus">-  width: 5em; </span>
<a href="#l28.49"></a><span id="l28.49" class="difflineminus">-}</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineminus">-</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineminus">-#extensionChildren::-moz-tree-image(fileExtension) {</span>
<a href="#l28.52"></a><span id="l28.52" class="difflineminus">-  margin-top: 0px;</span>
<a href="#l28.53"></a><span id="l28.53" class="difflineminus">-  margin-bottom: 0px;</span>
<a href="#l28.54"></a><span id="l28.54" class="difflineminus">-  -moz-margin-start: 0px;</span>
<a href="#l28.55"></a><span id="l28.55" class="difflineminus">-  -moz-margin-end: 5px;</span>
<a href="#l28.56"></a><span id="l28.56" class="difflineminus">-}</span>
<a href="#l28.57"></a><span id="l28.57" class="difflineminus">-</span>
<a href="#l28.58"></a><span id="l28.58" class="difflineminus">-#typeField {</span>
<a href="#l28.59"></a><span id="l28.59" class="difflineminus">-  font-weight: bold; </span>
<a href="#l28.60"></a><span id="l28.60" class="difflineminus">-}</span>
<a href="#l28.61"></a><span id="l28.61" class="difflineminus">-</span>
<a href="#l28.62"></a><span id="l28.62" class="difflineminus">-/* Change Action Dialog */</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineminus">-#typeIcon {</span>
<a href="#l28.64"></a><span id="l28.64" class="difflineminus">-  width: 32px;</span>
<a href="#l28.65"></a><span id="l28.65" class="difflineminus">-  height: 32px;</span>
<a href="#l28.66"></a><span id="l28.66" class="difflineminus">-  -moz-margin-end: 3px;</span>
<a href="#l28.67"></a><span id="l28.67" class="difflineminus">-}</span>
<a href="#l28.68"></a><span id="l28.68" class="difflineminus">-</span>
<a href="#l28.69"></a><span id="l28.69" class="difflineminus">-#typeField {</span>
<a href="#l28.70"></a><span id="l28.70" class="difflineminus">-  background-color: transparent;</span>
<a href="#l28.71"></a><span id="l28.71" class="difflineminus">-  margin-top: 1px !important;</span>
<a href="#l28.72"></a><span id="l28.72" class="difflineminus">-  margin-bottom: 2px !important;</span>
<a href="#l28.73"></a><span id="l28.73" class="difflineminus">-  -moz-margin-start: 6px !important;</span>
<a href="#l28.74"></a><span id="l28.74" class="difflineminus">-  -moz-margin-end: 5px !important;</span>
<a href="#l28.75"></a><span id="l28.75" class="difflineminus">-}</span>
<a href="#l28.76"></a><span id="l28.76" class="difflineminus">-</span>
<a href="#l28.77"></a><span id="l28.77" class="difflineminus">-#extensionField {</span>
<a href="#l28.78"></a><span id="l28.78" class="difflineminus">-  color: GrayText;</span>
<a href="#l28.79"></a><span id="l28.79" class="difflineminus">-  font-weight: bold;</span>
<a href="#l28.80"></a><span id="l28.80" class="difflineminus">-}</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineminus">-</span>
<a href="#l28.82"></a><span id="l28.82" class="difflineminus">-#ChangeActionDialog {</span>
<a href="#l28.83"></a><span id="l28.83" class="difflineminus">-  padding: 0px;</span>
<a href="#l28.84"></a><span id="l28.84" class="difflineminus">-}</span>
<a href="#l28.85"></a><span id="l28.85" class="difflineminus">-</span>
<a href="#l28.86"></a><span id="l28.86" class="difflineminus">-#ChangeActionDialog .dialog-button-box {</span>
<a href="#l28.87"></a><span id="l28.87" class="difflineminus">-  padding-top: 8px;</span>
<a href="#l28.88"></a><span id="l28.88" class="difflineminus">-  padding-bottom: 10px;</span>
<a href="#l28.89"></a><span id="l28.89" class="difflineminus">-  -moz-padding-start: 8px;</span>
<a href="#l28.90"></a><span id="l28.90" class="difflineminus">-  -moz-padding-end: 10px;</span>
<a href="#l28.91"></a><span id="l28.91" class="difflineminus">-}</span>
<a href="#l28.92"></a><span id="l28.92" class="difflineminus">-</span>
<a href="#l28.93"></a><span id="l28.93" class="difflineminus">-#changeActionHeader {</span>
<a href="#l28.94"></a><span id="l28.94" class="difflineminus">-  border-bottom: 2px groove ThreeDFace;</span>
<a href="#l28.95"></a><span id="l28.95" class="difflineminus">-  margin: 0px;</span>
<a href="#l28.96"></a><span id="l28.96" class="difflineminus">-  padding: 10px;</span>
<a href="#l28.97"></a><span id="l28.97" class="difflineminus">-  background-color: -moz-Field;</span>
<a href="#l28.98"></a><span id="l28.98" class="difflineminus">-  color: -moz-FieldText;  </span>
<a href="#l28.99"></a><span id="l28.99" class="difflineminus">-}</span>
<a href="#l28.100"></a><span id="l28.100" class="difflineminus">-</span>
<a href="#l28.101"></a><span id="l28.101" class="difflineminus">-#changeActionContent {</span>
<a href="#l28.102"></a><span id="l28.102" class="difflineminus">-  padding-top: 8px;</span>
<a href="#l28.103"></a><span id="l28.103" class="difflineminus">-  padding-bottom: 10px;</span>
<a href="#l28.104"></a><span id="l28.104" class="difflineminus">-  -moz-padding-start: 9px;</span>
<a href="#l28.105"></a><span id="l28.105" class="difflineminus">-  -moz-padding-end: 10px;</span>
<a href="#l28.106"></a><span id="l28.106" class="difflineminus">-}</span>
<a href="#l28.107"></a><span id="l28.107" class="difflineminus">-</span>
<a href="#l28.108"></a><span id="l28.108" class="difflineminus">-#defaultAppIcon {</span>
<a href="#l28.109"></a><span id="l28.109" class="difflineminus">-  width: 16px;</span>
<a href="#l28.110"></a><span id="l28.110" class="difflineminus">-  height: 16px;</span>
<a href="#l28.111"></a><span id="l28.111" class="difflineminus">-  -moz-margin-start: 2px;</span>
<a href="#l28.112"></a><span id="l28.112" class="difflineminus">-}</span>
<a href="#l28.113"></a><span id="l28.113" class="difflineminus">-</span>
<a href="#l28.114"></a><span id="l28.114" class="difflineminus">-#defaultAppName {</span>
<a href="#l28.115"></a><span id="l28.115" class="difflineminus">-  -moz-margin-start: 6px !important; </span>
<a href="#l28.116"></a><span id="l28.116" class="difflineminus">-  font-weight: bold;</span>
<a href="#l28.117"></a><span id="l28.117" class="difflineminus">-}</span>
<a href="#l28.118"></a><span id="l28.118" class="difflineminus">-</span>
<a href="#l28.119"></a><span id="l28.119"> /* override the color style for tag items when they </span>
<a href="#l28.120"></a><span id="l28.120">    have selection */</span>
<a href="#l28.121"></a><span id="l28.121"> #tagList listitem[selected=&quot;true&quot;] {</span>
<a href="#l28.122"></a><span id="l28.122">   color: -moz-DialogText !important;</span>
<a href="#l28.123"></a><span id="l28.123"> }</span>
<a href="#l28.124"></a><span id="l28.124"> </span>
<a href="#l28.125"></a><span id="l28.125"> #tagList:focus &gt; listitem[selected=&quot;true&quot;] {</span>
<a href="#l28.126"></a><span id="l28.126">   color: HighlightText !important;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/themes/pinstripe/jar.mn</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/themes/pinstripe/jar.mn</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -89,17 +89,21 @@ classic.jar:</span>
<a href="#l29.4"></a><span id="l29.4">   skin/classic/messenger/messengercompose/right-button-base.png   (mail/compose/right-button-base.png)</span>
<a href="#l29.5"></a><span id="l29.5">   skin/classic/messenger/messengercompose/right-button-disabled.png        (mail/compose/right-button-disabled.png)</span>
<a href="#l29.6"></a><span id="l29.6">   skin/classic/messenger/messengercompose/right-button-pressed.png         (mail/compose/right-button-pressed.png)</span>
<a href="#l29.7"></a><span id="l29.7">   skin/classic/messenger/messengercompose/small-button-base.png   (mail/compose/small-button-base.png)</span>
<a href="#l29.8"></a><span id="l29.8">   skin/classic/messenger/messengercompose/small-button-disabled.png        (mail/compose/small-button-disabled.png)</span>
<a href="#l29.9"></a><span id="l29.9">   skin/classic/messenger/messengercompose/small-button-pressed.png         (mail/compose/small-button-pressed.png)</span>
<a href="#l29.10"></a><span id="l29.10"> % skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l29.11"></a><span id="l29.11">   skin/classic/messenger-newsblog/feed-subscriptions.css         (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineplus">+  skin/classic/messenger/preferences/alwaysAsk.png               (mail/preferences/alwaysAsk.png)</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  skin/classic/messenger/preferences/application.png             (mail/preferences/application.png)</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineplus">+  skin/classic/messenger/preferences/saveFile.png                (mail/preferences/saveFile.png)</span>
<a href="#l29.15"></a><span id="l29.15">   skin/classic/messenger/preferences/preferences.css             (mail/preferences/preferences.css)</span>
<a href="#l29.16"></a><span id="l29.16" class="difflineplus">+  skin/classic/messenger/preferences/applications.css            (mail/preferences/applications.css)</span>
<a href="#l29.17"></a><span id="l29.17">   skin/classic/messenger/preferences/mail-options.png            (mail/preferences/mail-options.png)</span>
<a href="#l29.18"></a><span id="l29.18">   skin/classic/messenger/preferences/radio-selected-bg.png       (mail/preferences/radio-selected-bg.png)</span>
<a href="#l29.19"></a><span id="l29.19">   skin/classic/messenger/smime/msgCompSMIMEOverlay.css           (mail/smime/msgCompSMIMEOverlay.css)</span>
<a href="#l29.20"></a><span id="l29.20">   skin/classic/messenger/smime/msgHdrViewSMIMEOverlay.css        (mail/smime/msgHdrViewSMIMEOverlay.css)</span>
<a href="#l29.21"></a><span id="l29.21">   skin/classic/messenger/smime/msgReadSMIMEOverlay.css           (mail/smime/msgReadSMIMEOverlay.css)</span>
<a href="#l29.22"></a><span id="l29.22">   skin/classic/messenger/smime/msgReadSecurityInfo.css           (mail/smime/msgReadSecurityInfo.css)</span>
<a href="#l29.23"></a><span id="l29.23">   skin/classic/messenger/smime/msgCompSecurityInfo.css           (mail/smime/msgCompSecurityInfo.css)</span>
<a href="#l29.24"></a><span id="l29.24">   skin/classic/messenger/smime/certFetchingStatus.css            (mail/smime/certFetchingStatus.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">new file mode 100644</span>
<a href="#l30.2"></a><span id="l30.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..c792d148871ee5790ecb55d5f0d9ab739980f087</span>
<a href="#l30.3"></a><span id="l30.3">GIT binary patch
literal 530
zc$@(e0`2{YP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV00004XF*Lt006_W
z*OX`400009a7bBm000XU000XU0RWnu7ytkPv`IukR5;6}lS@kiVHAd4&lt;Tj#p^e&lt;Wj
z?fMgL+5|$&amp;RuSQa5$_jBH(qKTwF+_(w2C0xSYiv6@-kjV%!pCE&amp;7kr&amp;=L5eKC4&amp;w;
zbC`3^`_9an865y!JRUd3VzE!J*NbU&lt;J|7m&lt;XqGgj)zKjs3@VZ&amp;VLTrHiCV1&amp;(r^Qh
z$HN+mqHr#*b1)u1GU9gyULOnwY?d_Kz~ypbG#a7b?{hA1M7-u?B%Z&amp;pfAlibqgm3-
z8T5KRbi3Ud&amp;aNaJSl?%Aa|TYQ6T{&amp;UolXbscAFu~GKA9&lt;cK6aqBqcPPO%6SZ!{PWb
zu-olWRTYg!1NC~Hv$=B*Z}e@ZMvwt%xPi@PW6PoK64h#z&lt;%g#NUeY2zpJbXP4L1-3
zfi0(8E&lt;+SW&amp;c^mFg6BzApYG8tX}E#g?N;daX^F*R5v5XzXS!;u)ndH~G)o$85RFDp
zv_+~`s}-qK3i*5&lt;l}d#zGMmlPmj{c*0_s!N7O0Yj8)%`|SkqWHo6YQ1WilB=A`t`v
zfsarqbV$7^XjVUMz{6xRAsi0F@AprHs~Ri11+maT`(c&amp;}e&gt;E@|3|q^Da|Zw68#suu
UO@_C&lt;*#H0l07*qoM6N&lt;$g1?yCjQ{`u</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">new file mode 100644</span>
<a href="#l31.2"></a><span id="l31.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..b4c1ca7d02bda83358e519639632ab55fafd6077</span>
<a href="#l31.3"></a><span id="l31.3">GIT binary patch
literal 795
zc$@(n1LXXPP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU!y-7qtRCwBqlV40y0Tjj$a76;FYoNj=
z!2%I=12OW?bZfPy*@L3iw6~UQy}0EA8Y|W+HFetRCAF&lt;t*4nJ*YRy%Xq;wkALUJh@
z2r8L~h+fd)6%a~$=&gt;g1d`?mA&amp;?e}obcOVoBK{z+J+%9`sQEqN*ZYhYA*)|a(C&gt;RXV
za|lEp`u^pE`ddwsNV%|pwtF3ovZS&lt;Tr&amp;tQY1!rRX+*rr;oAtCk0qPnWCCBN4^Cy&lt;j
z1RR*ik&lt;)Tu4r^tU4YztvfFz-)DWNcjrC*u_k7?285Q{f?F&lt;c~dQmas1QRnUoxT?NZ
zmJ#zh8*`7r1a}MOGZ|Wg&amp;;LPmwgSLtV~Q|StFq=YEi9m&gt;Rz=Iph*t4&lt;F{po_5)iv)
z+3s-EkD90Ny3*3H)Z{GS7&lt;ID!{&lt;Z3V0mz?o-PxH!o6@WdzJ#&gt;#3)rz+Fl{EgsZ8n_
zDwPT^^ai}DyaHzGz9A{BF{QFr#fyuJTi*fXX7c3@yN#DFIs_=$3+q-Z^qJTok&amp;5|j
zR(v&amp;%&lt;M37g9UL4P@CB*x#xR8vQJW$=j{!j&lt;eHOvyrvPvd&lt;QL_GZ{`))tn)xkECZRC
z1O7k|=(GdCWkiFnzZZ_l3xLC{0(5N!oOUBn=s`gGKTQTIE9Ie($3n3GFu*(G!3}nD
zlw&lt;IV2?&amp;J0E81?{oR2^n&lt;x1G;Vkx5SdkfB0N?_G8&gt;qS@`!Bk3$K;Ri~he?YEGkbFs
z%8Tlra5ukE*U&amp;B$iWCc)XUNLLFhm_K93&amp;p*u|;m@PguYLpto~I?sv5HM5?XTVrlKH
zKDUU@&gt;7Z1EBFRDfDdNCKE%Lm(GoUe0Mocb773`v}N1c}CsMy{tF*`txCIRl&lt;1fpjR
z$26aVtvZA2&lt;m0Y~7Wj`a5?$Ht;tY}Ykpts?bO?%zOLBL6*Kn50OA9VtD0xy;B&amp;Yor
ZU;u{MV3Zvrsb2s9002ovPDHLkV1nrhZFv9y</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">new file mode 100644</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineminus">--- /dev/null</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineplus">+++ b/mail/themes/pinstripe/mail/preferences/applications.css</span>
<a href="#l32.4"></a><span id="l32.4" class="difflineat">@@ -0,0 +1,85 @@</span>
<a href="#l32.5"></a><span id="l32.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l32.6"></a><span id="l32.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l32.7"></a><span id="l32.7" class="difflineplus">+ *</span>
<a href="#l32.8"></a><span id="l32.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l32.9"></a><span id="l32.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l32.10"></a><span id="l32.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l32.11"></a><span id="l32.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineplus">+ *</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l32.14"></a><span id="l32.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l32.15"></a><span id="l32.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l32.16"></a><span id="l32.16" class="difflineplus">+ * License.</span>
<a href="#l32.17"></a><span id="l32.17" class="difflineplus">+ *</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineplus">+ * The Original Code is the Firefox Preferences System.</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineplus">+ *</span>
<a href="#l32.20"></a><span id="l32.20" class="difflineplus">+ * The Initial Developer of the Original Code is Mozilla Corporation.</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l32.23"></a><span id="l32.23" class="difflineplus">+ *</span>
<a href="#l32.24"></a><span id="l32.24" class="difflineplus">+ * Contributor(s):</span>
<a href="#l32.25"></a><span id="l32.25" class="difflineplus">+ *   Florian Queze &lt;florian@mozilla.com&gt;</span>
<a href="#l32.26"></a><span id="l32.26" class="difflineplus">+ *</span>
<a href="#l32.27"></a><span id="l32.27" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l32.28"></a><span id="l32.28" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l32.29"></a><span id="l32.29" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l32.30"></a><span id="l32.30" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l32.33"></a><span id="l32.33" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l32.34"></a><span id="l32.34" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l32.35"></a><span id="l32.35" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l32.38"></a><span id="l32.38" class="difflineplus">+ *</span>
<a href="#l32.39"></a><span id="l32.39" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l32.40"></a><span id="l32.40" class="difflineplus">+</span>
<a href="#l32.41"></a><span id="l32.41" class="difflineplus">+/**</span>
<a href="#l32.42"></a><span id="l32.42" class="difflineplus">+ * Line up the actions menu with action labels above and below it.</span>
<a href="#l32.43"></a><span id="l32.43" class="difflineplus">+ * Equalize the distance from the left side of the action box to the left side</span>
<a href="#l32.44"></a><span id="l32.44" class="difflineplus">+ * of the icon for both the menu and the non-menu versions of the action box.</span>
<a href="#l32.45"></a><span id="l32.45" class="difflineplus">+ * Also make sure the labels are the same distance away from the icons.</span>
<a href="#l32.46"></a><span id="l32.46" class="difflineplus">+ */</span>
<a href="#l32.47"></a><span id="l32.47" class="difflineplus">+.actionsMenu {</span>
<a href="#l32.48"></a><span id="l32.48" class="difflineplus">+  -moz-margin-start: -2px;</span>
<a href="#l32.49"></a><span id="l32.49" class="difflineplus">+  margin-top: 0;</span>
<a href="#l32.50"></a><span id="l32.50" class="difflineplus">+  margin-bottom: -1px;</span>
<a href="#l32.51"></a><span id="l32.51" class="difflineplus">+}</span>
<a href="#l32.52"></a><span id="l32.52" class="difflineplus">+</span>
<a href="#l32.53"></a><span id="l32.53" class="difflineplus">+.typeIcon,</span>
<a href="#l32.54"></a><span id="l32.54" class="difflineplus">+.actionIcon {</span>
<a href="#l32.55"></a><span id="l32.55" class="difflineplus">+  margin: 0px 3px;</span>
<a href="#l32.56"></a><span id="l32.56" class="difflineplus">+}</span>
<a href="#l32.57"></a><span id="l32.57" class="difflineplus">+</span>
<a href="#l32.58"></a><span id="l32.58" class="difflineplus">+richlistitem label {</span>
<a href="#l32.59"></a><span id="l32.59" class="difflineplus">+  -moz-margin-start: 1px;</span>
<a href="#l32.60"></a><span id="l32.60" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l32.61"></a><span id="l32.61" class="difflineplus">+}</span>
<a href="#l32.62"></a><span id="l32.62" class="difflineplus">+</span>
<a href="#l32.63"></a><span id="l32.63" class="difflineplus">+richlistitem {</span>
<a href="#l32.64"></a><span id="l32.64" class="difflineplus">+  min-height: 22px;</span>
<a href="#l32.65"></a><span id="l32.65" class="difflineplus">+}</span>
<a href="#l32.66"></a><span id="l32.66" class="difflineplus">+</span>
<a href="#l32.67"></a><span id="l32.67" class="difflineplus">+richlistitem[appHandlerIcon=&quot;ask&quot;],</span>
<a href="#l32.68"></a><span id="l32.68" class="difflineplus">+menuitem[appHandlerIcon=&quot;ask&quot;] {</span>
<a href="#l32.69"></a><span id="l32.69" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/preferences/alwaysAsk.png&quot;);</span>
<a href="#l32.70"></a><span id="l32.70" class="difflineplus">+}</span>
<a href="#l32.71"></a><span id="l32.71" class="difflineplus">+</span>
<a href="#l32.72"></a><span id="l32.72" class="difflineplus">+richlistitem[appHandlerIcon=&quot;save&quot;],</span>
<a href="#l32.73"></a><span id="l32.73" class="difflineplus">+menuitem[appHandlerIcon=&quot;save&quot;] {</span>
<a href="#l32.74"></a><span id="l32.74" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/preferences/saveFile.png&quot;);</span>
<a href="#l32.75"></a><span id="l32.75" class="difflineplus">+}</span>
<a href="#l32.76"></a><span id="l32.76" class="difflineplus">+</span>
<a href="#l32.77"></a><span id="l32.77" class="difflineplus">+richlistitem[appHandlerIcon=&quot;plugin&quot;],</span>
<a href="#l32.78"></a><span id="l32.78" class="difflineplus">+menuitem[appHandlerIcon=&quot;plugin&quot;] {</span>
<a href="#l32.79"></a><span id="l32.79" class="difflineplus">+  list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l32.80"></a><span id="l32.80" class="difflineplus">+}</span>
<a href="#l32.81"></a><span id="l32.81" class="difflineplus">+</span>
<a href="#l32.82"></a><span id="l32.82" class="difflineplus">+.actionsMenu .menulist-icon {</span>
<a href="#l32.83"></a><span id="l32.83" class="difflineplus">+  -moz-margin-end: 1px;</span>
<a href="#l32.84"></a><span id="l32.84" class="difflineplus">+}</span>
<a href="#l32.85"></a><span id="l32.85" class="difflineplus">+</span>
<a href="#l32.86"></a><span id="l32.86" class="difflineplus">+.actionsMenu &gt; menupopup &gt; menuitem &gt; .menu-iconic-left {</span>
<a href="#l32.87"></a><span id="l32.87" class="difflineplus">+  -moz-padding-start: 3px;</span>
<a href="#l32.88"></a><span id="l32.88" class="difflineplus">+  -moz-padding-end: 1px;</span>
<a href="#l32.89"></a><span id="l32.89" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/themes/pinstripe/mail/preferences/preferences.css</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/themes/pinstripe/mail/preferences/preferences.css</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -103,62 +103,53 @@ radio[pane=paneCompose]:active {</span>
<a href="#l33.4"></a><span id="l33.4"> radio[pane=paneSecurity] {</span>
<a href="#l33.5"></a><span id="l33.5">   -moz-image-region: rect(0px 128px 32px 96px);</span>
<a href="#l33.6"></a><span id="l33.6"> }</span>
<a href="#l33.7"></a><span id="l33.7"> </span>
<a href="#l33.8"></a><span id="l33.8"> radio[pane=paneSecurity]:active {</span>
<a href="#l33.9"></a><span id="l33.9">   -moz-image-region: rect(32px 128px 64px 96px);</span>
<a href="#l33.10"></a><span id="l33.10"> }</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-radio[pane=paneDownloads] {</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+radio[pane=paneApplications] {</span>
<a href="#l33.14"></a><span id="l33.14">   -moz-image-region: rect(0px 160px 32px 128px);</span>
<a href="#l33.15"></a><span id="l33.15"> }</span>
<a href="#l33.16"></a><span id="l33.16"> </span>
<a href="#l33.17"></a><span id="l33.17" class="difflineminus">-radio[pane=paneDownloads]:active {</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineplus">+radio[pane=paneApplications]:active {</span>
<a href="#l33.19"></a><span id="l33.19">   -moz-image-region: rect(32px 160px 64px 128px);</span>
<a href="#l33.20"></a><span id="l33.20"> }</span>
<a href="#l33.21"></a><span id="l33.21"> </span>
<a href="#l33.22"></a><span id="l33.22"> radio[pane=paneAdvanced] {</span>
<a href="#l33.23"></a><span id="l33.23">   -moz-image-region: rect(0px, 256px, 32px, 224px)</span>
<a href="#l33.24"></a><span id="l33.24"> }</span>
<a href="#l33.25"></a><span id="l33.25"> </span>
<a href="#l33.26"></a><span id="l33.26"> radio[pane=paneAdvanced]:active {</span>
<a href="#l33.27"></a><span id="l33.27">   -moz-image-region: rect(32px, 256px, 64px, 224px)</span>
<a href="#l33.28"></a><span id="l33.28"> }</span>
<a href="#l33.29"></a><span id="l33.29"> </span>
<a href="#l33.30"></a><span id="l33.30" class="difflineplus">+/* Attachments Pane */</span>
<a href="#l33.31"></a><span id="l33.31" class="difflineplus">+#MailPreferences[animated=&quot;true&quot;] #handlersView {</span>
<a href="#l33.32"></a><span id="l33.32" class="difflineplus">+  height: 25em;</span>
<a href="#l33.33"></a><span id="l33.33" class="difflineplus">+}</span>
<a href="#l33.34"></a><span id="l33.34" class="difflineplus">+</span>
<a href="#l33.35"></a><span id="l33.35" class="difflineplus">+#MailPreferences[animated=&quot;false&quot;] #handlersView {</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineplus">+  -moz-box-flex: 1;</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineplus">+}</span>
<a href="#l33.38"></a><span id="l33.38" class="difflineplus">+</span>
<a href="#l33.39"></a><span id="l33.39"> #browserStartupHomepage {</span>
<a href="#l33.40"></a><span id="l33.40">   padding-top: 2px;</span>
<a href="#l33.41"></a><span id="l33.41">   padding-bottom: 3px;</span>
<a href="#l33.42"></a><span id="l33.42">   -moz-padding-start: 4px;</span>
<a href="#l33.43"></a><span id="l33.43">   -moz-padding-end: 2px;</span>
<a href="#l33.44"></a><span id="l33.44"> }</span>
<a href="#l33.45"></a><span id="l33.45"> </span>
<a href="#l33.46"></a><span id="l33.46"> #downloadFolderIcon {</span>
<a href="#l33.47"></a><span id="l33.47">   width: 16px;</span>
<a href="#l33.48"></a><span id="l33.48">   height: 16px;</span>
<a href="#l33.49"></a><span id="l33.49"> }</span>
<a href="#l33.50"></a><span id="l33.50"> </span>
<a href="#l33.51"></a><span id="l33.51" class="difflineminus">-#downloadFolderContainer {</span>
<a href="#l33.52"></a><span id="l33.52" class="difflineminus">-  margin-top: 2px;</span>
<a href="#l33.53"></a><span id="l33.53" class="difflineminus">-  margin-bottom: 2px;</span>
<a href="#l33.54"></a><span id="l33.54" class="difflineminus">-  -moz-margin-start: 27px;</span>
<a href="#l33.55"></a><span id="l33.55" class="difflineminus">-  -moz-margin-end: 4px;</span>
<a href="#l33.56"></a><span id="l33.56" class="difflineminus">-  -moz-appearance: textfield;</span>
<a href="#l33.57"></a><span id="l33.57" class="difflineminus">-}</span>
<a href="#l33.58"></a><span id="l33.58" class="difflineminus">-</span>
<a href="#l33.59"></a><span id="l33.59" class="difflineminus">-#downloadFolderContainer2 {</span>
<a href="#l33.60"></a><span id="l33.60" class="difflineminus">-  background-color: -moz-Dialog;</span>
<a href="#l33.61"></a><span id="l33.61" class="difflineminus">-  color: -moz-DialogText;</span>
<a href="#l33.62"></a><span id="l33.62" class="difflineminus">-  margin: 1px;</span>
<a href="#l33.63"></a><span id="l33.63" class="difflineminus">-  padding-top: 0px;</span>
<a href="#l33.64"></a><span id="l33.64" class="difflineminus">-  padding-bottom: 0px;</span>
<a href="#l33.65"></a><span id="l33.65" class="difflineminus">-  -moz-padding-start: 3px;</span>
<a href="#l33.66"></a><span id="l33.66" class="difflineminus">-  -moz-padding-end: 0px;</span>
<a href="#l33.67"></a><span id="l33.67" class="difflineminus">-}</span>
<a href="#l33.68"></a><span id="l33.68" class="difflineminus">-</span>
<a href="#l33.69"></a><span id="l33.69"> #downloadFolder {</span>
<a href="#l33.70"></a><span id="l33.70">   -moz-appearance: none;</span>
<a href="#l33.71"></a><span id="l33.71">   background-color: transparent;</span>
<a href="#l33.72"></a><span id="l33.72">   border: none;</span>
<a href="#l33.73"></a><span id="l33.73">   padding: 1px 0px 0px;</span>
<a href="#l33.74"></a><span id="l33.74"> }</span>
<a href="#l33.75"></a><span id="l33.75"> </span>
<a href="#l33.76"></a><span id="l33.76"> prefpane .groupbox-body {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1">new file mode 100644</span>
<a href="#l34.2"></a><span id="l34.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..7177f8df3001e84c14d6e86e5bf327bb510f3cd1</span>
<a href="#l34.3"></a><span id="l34.3">GIT binary patch
literal 570
zc$@(`0&gt;%A_P)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBUz+(|@1RCwB)lfQ4;P!Pwz2LAv|OGP50
zcwmZJRe~W4OWQx8OCn`R{*A1eqC|?6`~my}RrXFD+Nl#umv%^1Awg)VGGM?MFgAAX
zp8aSj3{6k^TKCR(pLg&amp;4tN?gPdXE3I?&lt;zeijYi|LSS*$wQ`zhF+O=Bkm;u@Od|vK$
zyN}vhRaM?F%Ye*uIz^|`K^TVrS`5pw*v&amp;A&amp;2!a6pejmY$y_MwlosWwHYbjQ**HJ2!
z*fm543&gt;XXs`1CEk0vOsMTCLVnjB~kW(Sh&amp;#@H`KdyK~HDvlYnI)gNEibrcE(aE&lt;Ih
z0IJoh2+}}BqGI~+&lt;6RJ?LTD3H_~~&gt;Snx-uQ^rRgz9M*U|Ms72NH&lt;`o$mB6D6a=Bc*
zjv{#kT&gt;ui=!fe}y@kGHGwph&gt;gDIz=G`7hI#I*{f#4z&gt;$AykIESLDt30F+rDYEkKh1
z9^}S;4_odC11`+OM+oT%siPa*;s(VJuV5I41ZXLqSF_pt$q?6d@$saMXXewj7pQ$&lt;
ziX6`68m?97aX@-2FBysZw61@jR{HJ`ZZxD&gt;I5^pP_m$$m_&amp;4C@lKl5#qEd&lt;FNpDDJ
z1c^?69P*2^B$k(7K}va0Nc|`eA-km4$@(+t3uz&lt;)((VNq0K^{Rm*!FE?*IS*07*qo
IM6N&lt;$g1FxUSO5S3</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/themes/qute/jar.mn</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/themes/qute/jar.mn</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -89,22 +89,26 @@ classic.jar:</span>
<a href="#l35.4"></a><span id="l35.4">   skin/classic/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l35.5"></a><span id="l35.5">   skin/classic/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l35.6"></a><span id="l35.6">   skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l35.7"></a><span id="l35.7">   skin/classic/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l35.8"></a><span id="l35.8">   skin/classic/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose.css)</span>
<a href="#l35.9"></a><span id="l35.9">   skin/classic/messenger/messengercompose/compose-toolbar.png  (mail/compose/compose-toolbar.png)</span>
<a href="#l35.10"></a><span id="l35.10">   skin/classic/messenger/messengercompose/compose-toolbar-small.png   (mail/compose/compose-toolbar-small.png)</span>
<a href="#l35.11"></a><span id="l35.11">   skin/classic/messenger/messengercompose/format-buttons.png  (mail/compose/format-buttons.png)</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineplus">+  skin/classic/messenger/preferences/alwaysAsk.png            (mail/preferences/alwaysAsk.png)</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  skin/classic/messenger/preferences/application.png          (mail/preferences/application.png)</span>
<a href="#l35.14"></a><span id="l35.14">   skin/classic/messenger/preferences/preferences.css          (mail/preferences/preferences.css)</span>
<a href="#l35.15"></a><span id="l35.15">   skin/classic/messenger/preferences/general.png              (mail/preferences/general.png)</span>
<a href="#l35.16"></a><span id="l35.16">   skin/classic/messenger/preferences/display.png              (mail/preferences/display.png)</span>
<a href="#l35.17"></a><span id="l35.17">   skin/classic/messenger/preferences/composition.png          (mail/preferences/composition.png)</span>
<a href="#l35.18"></a><span id="l35.18">   skin/classic/messenger/preferences/security.png             (mail/preferences/security.png)</span>
<a href="#l35.19"></a><span id="l35.19">   skin/classic/messenger/preferences/attachments.png          (mail/preferences/attachments.png)</span>
<a href="#l35.20"></a><span id="l35.20" class="difflineplus">+  skin/classic/messenger/preferences/applications.css         (mail/preferences/applications.css)</span>
<a href="#l35.21"></a><span id="l35.21" class="difflineplus">+  skin/classic/messenger/preferences/saveFile.png             (mail/preferences/saveFile.png)</span>
<a href="#l35.22"></a><span id="l35.22">   skin/classic/messenger/preferences/advanced.png             (mail/preferences/advanced.png)</span>
<a href="#l35.23"></a><span id="l35.23">   skin/classic/messenger/preferences/background.png           (mail/preferences/background.png)</span>
<a href="#l35.24"></a><span id="l35.24">   skin/classic/messenger/preferences/hover.png                (mail/preferences/hover.png)</span>
<a href="#l35.25"></a><span id="l35.25">   skin/classic/messenger/preferences/selected.png             (mail/preferences/selected.png)</span>
<a href="#l35.26"></a><span id="l35.26">   skin/classic/messenger/smime/msgCompSMIMEOverlay.css        (mail/smime/msgCompSMIMEOverlay.css)</span>
<a href="#l35.27"></a><span id="l35.27">   skin/classic/messenger/smime/msgHdrViewSMIMEOverlay.css     (mail/smime/msgHdrViewSMIMEOverlay.css)</span>
<a href="#l35.28"></a><span id="l35.28">   skin/classic/messenger/smime/msgReadSMIMEOverlay.css        (mail/smime/msgReadSMIMEOverlay.css)</span>
<a href="#l35.29"></a><span id="l35.29">   skin/classic/messenger/smime/msgReadSecurityInfo.css        (mail/smime/msgReadSecurityInfo.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">new file mode 100644</span>
<a href="#l36.2"></a><span id="l36.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..ddd4cb2130b28944644838a11f4050da251dfbc6</span>
<a href="#l36.3"></a><span id="l36.3">GIT binary patch
literal 446
zc$@*g0YUzWP)&lt;h;3K|Lk000e1NJLTq000mG000mO0{{R3C@l|D0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBUyu~1A@MgRZ*hL56~sJ^Sd%&gt;if34{y&amp;l
zhSxWT*ie?;VW8lAujYQS=7x`=iM7?2!0emC?w-T$r^xZI&amp;hWL-@VC#{yw&gt;r()%U&gt;H
z_rcip!`S!3+4siV_s84!%H8+M-T2Pm_|D+?&amp;fxja;r7zw`P1Y1*X8-w&lt;@(p=`rGLG
z-01q?&gt;iXd7`{3*P;OqP3?fc~J`{nNY&gt;G1pM@cilV{Oa=h?eqNb_5Jbn{q*&lt;!_xb($
z`~7INcsKw600eYWPE!DXzu%b;G{pb_0Fy~XK~xwS1;If|!%!3ez)5)sF@dTp1;HD5
z|GShfnvI~F7Ji^j``&gt;dW3=;s&gt;3ez{XldmWKep;aFaN#_@_X~lleSIEpx84!RdY!Wj
zJrSr!*73f3$&amp;Ns;N8WcIm4!fVS@V#YiNKaUo2jx8oPXacr@R7TU7(FuScPhH_GN5&lt;
ofWC|kAmH@e00dSIfItDjKePZ;0q=p3p#T5?07*qoM6N&lt;$f+EuPmH+?%</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">new file mode 100644</span>
<a href="#l37.2"></a><span id="l37.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..ff2ecc2f351ef37d250264aa2bb273de08518165</span>
<a href="#l37.3"></a><span id="l37.3">GIT binary patch
literal 441
zc$@*b0Y?6bP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBUzTS-JgRCwB?ld(?2Fc5~%sR=_DiXuQr
zNPrju-B_6ciT401BwmD_0WtFiz|O#o)PaGGN^Gbt0~Kw2clhi$NfARKmYh2~ci;VI
z%Zizy&amp;QR;ey_2Xhx{9L7%t&lt;C&amp;06jMpd#bk1x~yY_)m?&amp;qZ|zUjhp%6tTKo6hOcs9)
zNZOmw-q7%H`!eNs8W(Uld4hw%r3Z}Ppa0eWe6j;N9=*Zi%@K6_&lt;Czmb^a?D+44v~k
z(6W)H+mKo-H-ZF!_F}{mF&amp;J5+x5lm!!TFg4*r5YeZWCF7jj@RYOeKW4gql#q&amp;ZZf7
zfKQT5_JQaV4EkWHEWSYnS%|aiPu=nWk?tT|fly^FKvK?kh4MCv7Rde-*_cBdF!b!s
zB*-o;&lt;$y&gt;&amp;SW!TEe?_(G{GqG&gt;6oFW&amp;%xWr`oGNxUKuQ2`E?;&gt;y0meZ|I80TxlmpcA
j-gT|#sOmoFZvh4XI{Y{EXY5e800000NkvXXu0mjfIC{Zy</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1">new file mode 100644</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineminus">--- /dev/null</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineplus">+++ b/mail/themes/qute/mail/preferences/applications.css</span>
<a href="#l38.4"></a><span id="l38.4" class="difflineat">@@ -0,0 +1,90 @@</span>
<a href="#l38.5"></a><span id="l38.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l38.6"></a><span id="l38.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l38.7"></a><span id="l38.7" class="difflineplus">+ *</span>
<a href="#l38.8"></a><span id="l38.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l38.9"></a><span id="l38.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l38.10"></a><span id="l38.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l38.11"></a><span id="l38.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineplus">+ *</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineplus">+ * License.</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineplus">+ *</span>
<a href="#l38.18"></a><span id="l38.18" class="difflineplus">+ * The Original Code is the Firefox Preferences System.</span>
<a href="#l38.19"></a><span id="l38.19" class="difflineplus">+ *</span>
<a href="#l38.20"></a><span id="l38.20" class="difflineplus">+ * The Initial Developer of the Original Code is Mozilla Corporation.</span>
<a href="#l38.21"></a><span id="l38.21" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2005</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l38.23"></a><span id="l38.23" class="difflineplus">+ *</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineplus">+ * Contributor(s):</span>
<a href="#l38.25"></a><span id="l38.25" class="difflineplus">+ *   Florian Queze &lt;florian@mozilla.com&gt;</span>
<a href="#l38.26"></a><span id="l38.26" class="difflineplus">+ *</span>
<a href="#l38.27"></a><span id="l38.27" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l38.28"></a><span id="l38.28" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l38.29"></a><span id="l38.29" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l38.30"></a><span id="l38.30" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l38.33"></a><span id="l38.33" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l38.35"></a><span id="l38.35" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineplus">+ *</span>
<a href="#l38.39"></a><span id="l38.39" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l38.40"></a><span id="l38.40" class="difflineplus">+</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineplus">+/**</span>
<a href="#l38.42"></a><span id="l38.42" class="difflineplus">+ * Line up the actions menu with action labels above and below it.</span>
<a href="#l38.43"></a><span id="l38.43" class="difflineplus">+ * Equalize the distance from the left side of the action box to the left side</span>
<a href="#l38.44"></a><span id="l38.44" class="difflineplus">+ * of the icon for both the menu and the non-menu versions of the action box.</span>
<a href="#l38.45"></a><span id="l38.45" class="difflineplus">+ * Also make sure the labels are the same distance away from the icons.</span>
<a href="#l38.46"></a><span id="l38.46" class="difflineplus">+ */</span>
<a href="#l38.47"></a><span id="l38.47" class="difflineplus">+.actionsMenu {</span>
<a href="#l38.48"></a><span id="l38.48" class="difflineplus">+  margin-top: 0;</span>
<a href="#l38.49"></a><span id="l38.49" class="difflineplus">+  margin-bottom: 0;</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineplus">+  -moz-margin-start: -2px;</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineplus">+  -moz-margin-end: 0;</span>
<a href="#l38.52"></a><span id="l38.52" class="difflineplus">+}</span>
<a href="#l38.53"></a><span id="l38.53" class="difflineplus">+</span>
<a href="#l38.54"></a><span id="l38.54" class="difflineplus">+.typeIcon,</span>
<a href="#l38.55"></a><span id="l38.55" class="difflineplus">+.actionIcon {</span>
<a href="#l38.56"></a><span id="l38.56" class="difflineplus">+  margin: 0px 3px;</span>
<a href="#l38.57"></a><span id="l38.57" class="difflineplus">+}</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineplus">+</span>
<a href="#l38.59"></a><span id="l38.59" class="difflineplus">+richlistitem label {</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineplus">+  -moz-margin-start: 1px;</span>
<a href="#l38.61"></a><span id="l38.61" class="difflineplus">+  margin-top: 2px;</span>
<a href="#l38.62"></a><span id="l38.62" class="difflineplus">+}</span>
<a href="#l38.63"></a><span id="l38.63" class="difflineplus">+</span>
<a href="#l38.64"></a><span id="l38.64" class="difflineplus">+richlistitem {</span>
<a href="#l38.65"></a><span id="l38.65" class="difflineplus">+  min-height: 22px;</span>
<a href="#l38.66"></a><span id="l38.66" class="difflineplus">+}</span>
<a href="#l38.67"></a><span id="l38.67" class="difflineplus">+</span>
<a href="#l38.68"></a><span id="l38.68" class="difflineplus">+richlistitem[appHandlerIcon=&quot;ask&quot;],</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineplus">+menuitem[appHandlerIcon=&quot;ask&quot;] {</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/preferences/alwaysAsk.png&quot;);</span>
<a href="#l38.71"></a><span id="l38.71" class="difflineplus">+}</span>
<a href="#l38.72"></a><span id="l38.72" class="difflineplus">+</span>
<a href="#l38.73"></a><span id="l38.73" class="difflineplus">+richlistitem[appHandlerIcon=&quot;save&quot;],</span>
<a href="#l38.74"></a><span id="l38.74" class="difflineplus">+menuitem[appHandlerIcon=&quot;save&quot;] {</span>
<a href="#l38.75"></a><span id="l38.75" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/preferences/saveFile.png&quot;);</span>
<a href="#l38.76"></a><span id="l38.76" class="difflineplus">+}</span>
<a href="#l38.77"></a><span id="l38.77" class="difflineplus">+</span>
<a href="#l38.78"></a><span id="l38.78" class="difflineplus">+richlistitem[appHandlerIcon=&quot;plugin&quot;],</span>
<a href="#l38.79"></a><span id="l38.79" class="difflineplus">+menuitem[appHandlerIcon=&quot;plugin&quot;] {</span>
<a href="#l38.80"></a><span id="l38.80" class="difflineplus">+  list-style-image: url(&quot;chrome://mozapps/skin/plugins/pluginGeneric-16.png&quot;);</span>
<a href="#l38.81"></a><span id="l38.81" class="difflineplus">+}</span>
<a href="#l38.82"></a><span id="l38.82" class="difflineplus">+</span>
<a href="#l38.83"></a><span id="l38.83" class="difflineplus">+.actionsMenu .menulist-icon {</span>
<a href="#l38.84"></a><span id="l38.84" class="difflineplus">+  -moz-margin-end: 3px;</span>
<a href="#l38.85"></a><span id="l38.85" class="difflineplus">+}</span>
<a href="#l38.86"></a><span id="l38.86" class="difflineplus">+</span>
<a href="#l38.87"></a><span id="l38.87" class="difflineplus">+.actionsMenu &gt; menupopup &gt; menuitem &gt; .menu-iconic-left {</span>
<a href="#l38.88"></a><span id="l38.88" class="difflineplus">+  -moz-padding-start: 0px;</span>
<a href="#l38.89"></a><span id="l38.89" class="difflineplus">+  -moz-padding-end: 2px;</span>
<a href="#l38.90"></a><span id="l38.90" class="difflineplus">+}</span>
<a href="#l38.91"></a><span id="l38.91" class="difflineplus">+</span>
<a href="#l38.92"></a><span id="l38.92" class="difflineplus">+.actionsMenu &gt; menupopup &gt; menuitem {</span>
<a href="#l38.93"></a><span id="l38.93" class="difflineplus">+  -moz-padding-start: 4px;</span>
<a href="#l38.94"></a><span id="l38.94" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/themes/qute/mail/preferences/preferences.css</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/themes/qute/mail/preferences/preferences.css</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -77,23 +77,32 @@ radio[pane=paneDisplay] {</span>
<a href="#l39.4"></a><span id="l39.4">   list-style-image: url(&quot;chrome://messenger/skin/preferences/display.png&quot;);</span>
<a href="#l39.5"></a><span id="l39.5"> }</span>
<a href="#l39.6"></a><span id="l39.6"> radio[pane=paneCompose] {</span>
<a href="#l39.7"></a><span id="l39.7">   list-style-image: url(&quot;chrome://messenger/skin/preferences/composition.png&quot;);</span>
<a href="#l39.8"></a><span id="l39.8"> }</span>
<a href="#l39.9"></a><span id="l39.9"> radio[pane=paneSecurity] {</span>
<a href="#l39.10"></a><span id="l39.10">   list-style-image: url(&quot;chrome://messenger/skin/preferences/security.png&quot;);</span>
<a href="#l39.11"></a><span id="l39.11"> }</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-radio[pane=paneDownloads] {</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+radio[pane=paneApplications] {</span>
<a href="#l39.14"></a><span id="l39.14">   list-style-image: url(&quot;chrome://messenger/skin/preferences/attachments.png&quot;);</span>
<a href="#l39.15"></a><span id="l39.15"> }</span>
<a href="#l39.16"></a><span id="l39.16"> radio[pane=paneAdvanced] {</span>
<a href="#l39.17"></a><span id="l39.17">   list-style-image: url(&quot;chrome://messenger/skin/preferences/advanced.png&quot;);</span>
<a href="#l39.18"></a><span id="l39.18"> }</span>
<a href="#l39.19"></a><span id="l39.19"> </span>
<a href="#l39.20"></a><span id="l39.20" class="difflineplus">+/* Attachments Pane */</span>
<a href="#l39.21"></a><span id="l39.21" class="difflineplus">+#MailPreferences[animated=&quot;true&quot;] #handlersView {</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineplus">+  height: 25em;</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineplus">+}</span>
<a href="#l39.24"></a><span id="l39.24" class="difflineplus">+</span>
<a href="#l39.25"></a><span id="l39.25" class="difflineplus">+#MailPreferences[animated=&quot;false&quot;] #handlersView {</span>
<a href="#l39.26"></a><span id="l39.26" class="difflineplus">+  -moz-box-flex: 1;</span>
<a href="#l39.27"></a><span id="l39.27" class="difflineplus">+}</span>
<a href="#l39.28"></a><span id="l39.28" class="difflineplus">+</span>
<a href="#l39.29"></a><span id="l39.29"> /* File Field Widget */</span>
<a href="#l39.30"></a><span id="l39.30"> filefield {</span>
<a href="#l39.31"></a><span id="l39.31">   margin: 2px 4px;</span>
<a href="#l39.32"></a><span id="l39.32">   -moz-appearance: textfield;</span>
<a href="#l39.33"></a><span id="l39.33"> }</span>
<a href="#l39.34"></a><span id="l39.34"> </span>
<a href="#l39.35"></a><span id="l39.35"> .fileFieldContentBox {</span>
<a href="#l39.36"></a><span id="l39.36">   background-color: -moz-Dialog;</span>
<a href="#l39.37"></a><span id="l39.37" class="difflineat">@@ -135,89 +144,16 @@ filefield[disabled=&quot;true&quot;] .fileFieldIco</span>
<a href="#l39.38"></a><span id="l39.38"> .contentPane {</span>
<a href="#l39.39"></a><span id="l39.39">   margin: 9px 8px 5px;</span>
<a href="#l39.40"></a><span id="l39.40"> }</span>
<a href="#l39.41"></a><span id="l39.41"> </span>
<a href="#l39.42"></a><span id="l39.42"> .actionButtons {</span>
<a href="#l39.43"></a><span id="l39.43">   margin: 0px 3px 6px !important;</span>
<a href="#l39.44"></a><span id="l39.44"> }</span>
<a href="#l39.45"></a><span id="l39.45"> </span>
<a href="#l39.46"></a><span id="l39.46" class="difflineminus">-/* Download Actions Manager */</span>
<a href="#l39.47"></a><span id="l39.47" class="difflineminus">-#fileExtension {</span>
<a href="#l39.48"></a><span id="l39.48" class="difflineminus">-  width: 5em; </span>
<a href="#l39.49"></a><span id="l39.49" class="difflineminus">-}</span>
<a href="#l39.50"></a><span id="l39.50" class="difflineminus">-</span>
<a href="#l39.51"></a><span id="l39.51" class="difflineminus">-#extensionChildren::-moz-tree-image(fileExtension) {</span>
<a href="#l39.52"></a><span id="l39.52" class="difflineminus">-  margin-top: 0px;</span>
<a href="#l39.53"></a><span id="l39.53" class="difflineminus">-  margin-bottom: 0px;</span>
<a href="#l39.54"></a><span id="l39.54" class="difflineminus">-  -moz-margin-start: 0px;</span>
<a href="#l39.55"></a><span id="l39.55" class="difflineminus">-  -moz-margin-end: 5px;</span>
<a href="#l39.56"></a><span id="l39.56" class="difflineminus">-}</span>
<a href="#l39.57"></a><span id="l39.57" class="difflineminus">-</span>
<a href="#l39.58"></a><span id="l39.58" class="difflineminus">-#typeField {</span>
<a href="#l39.59"></a><span id="l39.59" class="difflineminus">-  font-weight: bold; </span>
<a href="#l39.60"></a><span id="l39.60" class="difflineminus">-}</span>
<a href="#l39.61"></a><span id="l39.61" class="difflineminus">-</span>
<a href="#l39.62"></a><span id="l39.62" class="difflineminus">-/* Change Action Dialog */</span>
<a href="#l39.63"></a><span id="l39.63" class="difflineminus">-#typeIcon {</span>
<a href="#l39.64"></a><span id="l39.64" class="difflineminus">-  width: 32px;</span>
<a href="#l39.65"></a><span id="l39.65" class="difflineminus">-  height: 32px;</span>
<a href="#l39.66"></a><span id="l39.66" class="difflineminus">-  -moz-margin-end: 3px;</span>
<a href="#l39.67"></a><span id="l39.67" class="difflineminus">-}</span>
<a href="#l39.68"></a><span id="l39.68" class="difflineminus">-</span>
<a href="#l39.69"></a><span id="l39.69" class="difflineminus">-#typeField {</span>
<a href="#l39.70"></a><span id="l39.70" class="difflineminus">-  background-color: transparent;</span>
<a href="#l39.71"></a><span id="l39.71" class="difflineminus">-  margin-top: 1px !important;</span>
<a href="#l39.72"></a><span id="l39.72" class="difflineminus">-  margin-bottom: 2px !important;</span>
<a href="#l39.73"></a><span id="l39.73" class="difflineminus">-  -moz-margin-start: 6px !important;</span>
<a href="#l39.74"></a><span id="l39.74" class="difflineminus">-  -moz-margin-end: 5px !important;</span>
<a href="#l39.75"></a><span id="l39.75" class="difflineminus">-}</span>
<a href="#l39.76"></a><span id="l39.76" class="difflineminus">-</span>
<a href="#l39.77"></a><span id="l39.77" class="difflineminus">-#extensionField {</span>
<a href="#l39.78"></a><span id="l39.78" class="difflineminus">-  color: GrayText;</span>
<a href="#l39.79"></a><span id="l39.79" class="difflineminus">-  font-weight: bold;</span>
<a href="#l39.80"></a><span id="l39.80" class="difflineminus">-}</span>
<a href="#l39.81"></a><span id="l39.81" class="difflineminus">-</span>
<a href="#l39.82"></a><span id="l39.82" class="difflineminus">-#ChangeActionDialog {</span>
<a href="#l39.83"></a><span id="l39.83" class="difflineminus">-  padding: 0px;</span>
<a href="#l39.84"></a><span id="l39.84" class="difflineminus">-}</span>
<a href="#l39.85"></a><span id="l39.85" class="difflineminus">-</span>
<a href="#l39.86"></a><span id="l39.86" class="difflineminus">-#ChangeActionDialog .dialog-button-box {</span>
<a href="#l39.87"></a><span id="l39.87" class="difflineminus">-  padding-top: 8px;</span>
<a href="#l39.88"></a><span id="l39.88" class="difflineminus">-  padding-bottom: 10px;</span>
<a href="#l39.89"></a><span id="l39.89" class="difflineminus">-  -moz-padding-start: 8px;</span>
<a href="#l39.90"></a><span id="l39.90" class="difflineminus">-  -moz-padding-end: 10px;</span>
<a href="#l39.91"></a><span id="l39.91" class="difflineminus">-}</span>
<a href="#l39.92"></a><span id="l39.92" class="difflineminus">-</span>
<a href="#l39.93"></a><span id="l39.93" class="difflineminus">-#changeActionHeader {</span>
<a href="#l39.94"></a><span id="l39.94" class="difflineminus">-  border-bottom: 2px groove ThreeDFace;</span>
<a href="#l39.95"></a><span id="l39.95" class="difflineminus">-  margin: 0px;</span>
<a href="#l39.96"></a><span id="l39.96" class="difflineminus">-  padding: 10px;</span>
<a href="#l39.97"></a><span id="l39.97" class="difflineminus">-  background-color: -moz-Field;</span>
<a href="#l39.98"></a><span id="l39.98" class="difflineminus">-  color: -moz-FieldText;  </span>
<a href="#l39.99"></a><span id="l39.99" class="difflineminus">-}</span>
<a href="#l39.100"></a><span id="l39.100" class="difflineminus">-</span>
<a href="#l39.101"></a><span id="l39.101" class="difflineminus">-#changeActionContent {</span>
<a href="#l39.102"></a><span id="l39.102" class="difflineminus">-  padding-top: 8px;</span>
<a href="#l39.103"></a><span id="l39.103" class="difflineminus">-  padding-bottom: 10px;</span>
<a href="#l39.104"></a><span id="l39.104" class="difflineminus">-  -moz-padding-start: 9px;</span>
<a href="#l39.105"></a><span id="l39.105" class="difflineminus">-  -moz-padding-end: 10px;</span>
<a href="#l39.106"></a><span id="l39.106" class="difflineminus">-}</span>
<a href="#l39.107"></a><span id="l39.107" class="difflineminus">-</span>
<a href="#l39.108"></a><span id="l39.108" class="difflineminus">-#defaultAppIcon {</span>
<a href="#l39.109"></a><span id="l39.109" class="difflineminus">-  width: 16px;</span>
<a href="#l39.110"></a><span id="l39.110" class="difflineminus">-  height: 16px;</span>
<a href="#l39.111"></a><span id="l39.111" class="difflineminus">-  -moz-margin-start: 2px;</span>
<a href="#l39.112"></a><span id="l39.112" class="difflineminus">-}</span>
<a href="#l39.113"></a><span id="l39.113" class="difflineminus">-</span>
<a href="#l39.114"></a><span id="l39.114" class="difflineminus">-#defaultAppName {</span>
<a href="#l39.115"></a><span id="l39.115" class="difflineminus">-  -moz-margin-start: 6px !important; </span>
<a href="#l39.116"></a><span id="l39.116" class="difflineminus">-  font-weight: bold;</span>
<a href="#l39.117"></a><span id="l39.117" class="difflineminus">-}</span>
<a href="#l39.118"></a><span id="l39.118" class="difflineminus">-</span>
<a href="#l39.119"></a><span id="l39.119"> /* override the color style for tag items when they </span>
<a href="#l39.120"></a><span id="l39.120">    have selection */</span>
<a href="#l39.121"></a><span id="l39.121"> #tagList listitem[selected=&quot;true&quot;] {</span>
<a href="#l39.122"></a><span id="l39.122">   color: -moz-DialogText !important;</span>
<a href="#l39.123"></a><span id="l39.123"> }</span>
<a href="#l39.124"></a><span id="l39.124"> </span>
<a href="#l39.125"></a><span id="l39.125"> #tagList:focus &gt; listitem[selected=&quot;true&quot;] {</span>
<a href="#l39.126"></a><span id="l39.126">   color: HighlightText !important;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1">new file mode 100644</span>
<a href="#l40.2"></a><span id="l40.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..c210e8473f4c7ee9958a80b94965d522a15e4584</span>
<a href="#l40.3"></a><span id="l40.3">GIT binary patch
literal 791
zc$@(j1L*vTP)&lt;h;3K|Lk000e1NJLTq000mG000mO1^@s6AM^iV0000PbVXQnQ*UN;
zcVTj606}DLVr3vnZDD6+Qe|Oed2z{QJOBU!xk*GpRCwBqQ%^_~Q5gTt%-fxvo!LKb
z?rOAaD+Y&gt;x@L-W5v_-X*SQwRo7G!}+*r7v4b;+W_n?%u`Hav9c804u_P+mF)ff1Ry
z&gt;bSe1uDdfkyF1gH5w&lt;Lae(=3FZ@z!O?|a{448y&gt;7Xq_a6w&amp;H-U5KByaeUf7Swj&lt;a9
zy2j$f&gt;1g@&lt;CiY=lJ1fBO@bKNnrnX1A;RMUF@K?IZ26OUE`FrB&amp;E2CH}LdmTnvG8Rq
z7K`1t0tBk|9_r~igYR=J1VKPstAxk#f3ro7oX6tgB67JkC`#rqP0X-#5vr?$^)5+5
zq|=Xq_W?AGyHUz)txj8z(0#8NgU_R27y_@is*e74vUCah{ej&amp;a;ZZ06H;;`W5b`40
zb+YW7p_FU-WY`0F^mSdMWpWT*z5rE)%`^=jPX%8r5&amp;T#H`s!|&gt;s2X_r?ip%YcUjI^
zWfe&lt;reK^-Xh)Adx*=!aLUbIu+CX+#&lt;%k84H0FH*6`KIA`&lt;tVzVujA8XdeeEzhu(uD
zI2yhTP1C3?1Djni$?YSO%h#afotRG)5vU~KD(uK9z}e&lt;eY^)o2J@o&lt;?4vgSb;}xi?
zx&gt;-^t1Kw_fDEXR+$Lnvg*&amp;N8{^DvCf#t9CfRAO;8a);it0~gzGSbFn{&amp;FnnS({mP*
zRMA2h5T7is!0j#|l}cGge@e9e64L234OoIX0|m3w6snr1CG!#~m2^W8oQTKcG&gt;9AF
za2U0&lt;wbmXAdhp=k#Fp#q@9#%4nM5LyFxlv=0YfAlM+ZZ(6lQ%UU0v6~(H0Xzwn%V~
zAE8hP(;ug)o)d|hTU$=0mZ~~CJ0Qz4bu&gt;qHg9ciIoD?96LOHuAikO&gt;U!tCrU+B^2+
zXY%thGc+_bz&amp;pIRiA{8y143yTW}{58Kwqm)#rQ3ZsViui^}M&lt;|&amp;g}G@{};am7y$KC
V4iS|FcUu4e002ovPDHLkV1njJbGZNj</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

