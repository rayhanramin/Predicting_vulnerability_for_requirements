<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 18275:ab6c50b76ed3909054735301c7ea32c9f5f753da</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ ab6c50b76ed3909054735301c7ea32c9f5f753da" />
<meta property="og:url" content="/comm-central/rev/ab6c50b76ed3909054735301c7ea32c9f5f753da" />
<meta property="og:description" content="Bug 1151472 - Remove use of expression closure in calendar/. r=Fallen" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / ab6c50b76ed3909054735301c7ea32c9f5f753da 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/ab6c50b76ed3909054735301c7ea32c9f5f753da">shortlog</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/ab6c50b76ed3909054735301c7ea32c9f5f753da">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da">files</a> |
changeset |
<a href="/comm-central/raw-rev/ab6c50b76ed3909054735301c7ea32c9f5f753da">raw</a>  | <a href="/comm-central/archive/ab6c50b76ed3909054735301c7ea32c9f5f753da.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151472">Bug 1151472</a> - Remove use of expression closure in calendar/. r=Fallen
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#84;&#111;&#111;&#114;&#117;&#32;&#70;&#117;&#106;&#105;&#115;&#97;&#119;&#97;&#32;&#60;&#97;&#114;&#97;&#105;&#95;&#97;&#64;&#109;&#97;&#99;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 16 Aug 2015 06:50:46 +0900</td></tr>

<tr>
 <td>changeset 18275</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/ab6c50b76ed3909054735301c7ea32c9f5f753da">ab6c50b76ed3909054735301c7ea32c9f5f753da</a></td>
</tr>



<tr>
<td>parent 18274</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/82a4180e351fe45de2255efd09f03517f88ead65">82a4180e351fe45de2255efd09f03517f88ead65</a>
</td>
</tr>

<tr>
<td>child 18276</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/670ecad50bcb11baa9a97099a334eb54eaf2292d">670ecad50bcb11baa9a97099a334eb54eaf2292d</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=ab6c50b76ed3909054735301c7ea32c9f5f753da">11217</a></td></tr>
<tr><td>push user</td><td>arai_a@mac.com</td></tr>
<tr><td>push date</td><td class="date age">Sat, 15 Aug 2015 21:51:06 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@ab6c50b76ed3 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ab6c50b76ed3909054735301c7ea32c9f5f753da">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=ab6c50b76ed3909054735301c7ea32c9f5f753da&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ab6c50b76ed3909054735301c7ea32c9f5f753da&newProject=comm-central&newRevision=ab6c50b76ed3909054735301c7ea32c9f5f753da&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ab6c50b76ed3909054735301c7ea32c9f5f753da&newProject=comm-central&newRevision=ab6c50b76ed3909054735301c7ea32c9f5f753da&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=ab6c50b76ed3909054735301c7ea32c9f5f753da&newProject=comm-central&newRevision=ab6c50b76ed3909054735301c7ea32c9f5f753da&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Fallen%29&revcount=50">Fallen</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151472">1151472</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1151472">Bug 1151472</a> - Remove use of expression closure in calendar/. r=Fallen</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDateTime.js">calendar/base/backend/icaljs/calDateTime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDateTime.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDateTime.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDateTime.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDateTime.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDateTime.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDuration.js">calendar/base/backend/icaljs/calDuration.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDuration.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDuration.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDuration.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDuration.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calDuration.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calICSService.js">calendar/base/backend/icaljs/calICSService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calICSService.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calICSService.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calICSService.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calICSService.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calICSService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calPeriod.js">calendar/base/backend/icaljs/calPeriod.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calPeriod.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calPeriod.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calPeriod.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calPeriod.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calPeriod.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calRecurrenceRule.js">calendar/base/backend/icaljs/calRecurrenceRule.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calRecurrenceRule.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calRecurrenceRule.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calRecurrenceRule.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calRecurrenceRule.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/backend/icaljs/calRecurrenceRule.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-ui-utils.js">calendar/base/content/calendar-ui-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-ui-utils.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-ui-utils.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-ui-utils.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-ui-utils.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-ui-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-unifinder.js">calendar/base/content/calendar-unifinder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-unifinder.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-unifinder.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-unifinder.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-unifinder.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-unifinder.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-views.js">calendar/base/content/calendar-views.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-views.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-views.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-views.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-views.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/calendar-views.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-creation.js">calendar/base/content/dialogs/calendar-creation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-creation.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-creation.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-creation.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-creation.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-creation.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-dialog-utils.js">calendar/base/content/dialogs/calendar-dialog-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-dialog-utils.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-dialog-utils.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-dialog-utils.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-dialog-utils.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-dialog-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-reminder.js">calendar/base/content/dialogs/calendar-event-dialog-reminder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-reminder.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-reminder.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-reminder.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-reminder.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-event-dialog-reminder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js">calendar/base/content/dialogs/calendar-providerUninstall-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-list-tree.xml">calendar/base/content/widgets/calendar-list-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-list-tree.xml">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-list-tree.xml">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-list-tree.xml">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-list-tree.xml">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-list-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-widgets.xml">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-widgets.xml">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calExtract.jsm">calendar/base/modules/calExtract.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calExtract.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calExtract.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calExtract.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calExtract.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calExtract.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calItipUtils.jsm">calendar/base/modules/calItipUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calItipUtils.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calItipUtils.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calItipUtils.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calItipUtils.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calItipUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calPrintUtils.jsm">calendar/base/modules/calPrintUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calPrintUtils.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calPrintUtils.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calPrintUtils.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calPrintUtils.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/calPrintUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/ical.js">calendar/base/modules/ical.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/ical.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/ical.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/ical.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/ical.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/modules/ical.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCachedCalendar.js">calendar/base/src/calCachedCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCachedCalendar.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCachedCalendar.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCachedCalendar.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCachedCalendar.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCachedCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calItemBase.js">calendar/base/src/calItemBase.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calItemBase.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calItemBase.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calItemBase.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calItemBase.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calItemBase.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calProtocolHandler.js">calendar/base/src/calProtocolHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calProtocolHandler.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calProtocolHandler.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calRecurrenceDate.js">calendar/base/src/calRecurrenceDate.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calRecurrenceDate.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calRecurrenceDate.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calRecurrenceDate.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calRecurrenceDate.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calRecurrenceDate.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezone.js">calendar/base/src/calTimezone.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezone.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezone.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezone.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezone.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezone.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calUtils.js">calendar/base/src/calUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calUtils.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calUtils.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calUtils.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calUtils.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/base/src/calUtils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calListFormatter.js">calendar/import-export/calListFormatter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calListFormatter.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calListFormatter.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calListFormatter.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calListFormatter.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calListFormatter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calMonthGridPrinter.js">calendar/import-export/calMonthGridPrinter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calMonthGridPrinter.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calMonthGridPrinter.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calMonthGridPrinter.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calMonthGridPrinter.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calMonthGridPrinter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calOutlookCSVImportExport.js">calendar/import-export/calOutlookCSVImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calOutlookCSVImportExport.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calOutlookCSVImportExport.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calOutlookCSVImportExport.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calOutlookCSVImportExport.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calOutlookCSVImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calWeekPrinter.js">calendar/import-export/calWeekPrinter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calWeekPrinter.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calWeekPrinter.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calWeekPrinter.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calWeekPrinter.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/import-export/calWeekPrinter.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/itip/calItipEmailTransport.js">calendar/itip/calItipEmailTransport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/itip/calItipEmailTransport.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/itip/calItipEmailTransport.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/itip/calItipEmailTransport.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/itip/calItipEmailTransport.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/itip/calItipEmailTransport.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/components/calItipProtocolHandler.js">calendar/lightning/components/calItipProtocolHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/components/calItipProtocolHandler.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/components/calItipProtocolHandler.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/components/calItipProtocolHandler.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/components/calItipProtocolHandler.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/components/calItipProtocolHandler.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/imip-bar.js">calendar/lightning/content/imip-bar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/imip-bar.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/imip-bar.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/imip-bar.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/imip-bar.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/imip-bar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/composite/calCompositeCalendar.js">calendar/providers/composite/calCompositeCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/composite/calCompositeCalendar.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/composite/calCompositeCalendar.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/composite/calCompositeCalendar.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/composite/calCompositeCalendar.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/composite/calCompositeCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/components/calGoogleCalendar.js">calendar/providers/gdata/components/calGoogleCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/components/calGoogleCalendar.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/components/calGoogleCalendar.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/components/calGoogleCalendar.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/components/calGoogleCalendar.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/components/calGoogleCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-creation.js">calendar/providers/gdata/content/gdata-calendar-creation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-creation.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-creation.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-creation.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-creation.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-creation.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-event-dialog.js">calendar/providers/gdata/content/gdata-calendar-event-dialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-event-dialog.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-event-dialog.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-event-dialog.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-event-dialog.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-event-dialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-properties.js">calendar/providers/gdata/content/gdata-calendar-properties.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-properties.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-properties.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-properties.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-properties.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/content/gdata-calendar-properties.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/OAuth2.jsm">calendar/providers/gdata/modules/OAuth2.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/OAuth2.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/OAuth2.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/OAuth2.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/OAuth2.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/OAuth2.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataRequest.jsm">calendar/providers/gdata/modules/gdataRequest.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataRequest.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataRequest.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataRequest.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataRequest.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataRequest.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataSession.jsm">calendar/providers/gdata/modules/gdataSession.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataSession.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataSession.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataSession.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataSession.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataSession.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataUtils.jsm">calendar/providers/gdata/modules/gdataUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataUtils.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataUtils.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataUtils.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataUtils.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/gdataUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Calendar.jsm">calendar/providers/gdata/modules/shim/Calendar.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Calendar.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Calendar.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Calendar.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Calendar.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Calendar.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Http.jsm">calendar/providers/gdata/modules/shim/Http.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Http.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Http.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Http.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Http.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Http.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Loader.jsm">calendar/providers/gdata/modules/shim/Loader.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Loader.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Loader.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Loader.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Loader.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Loader.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Preferences.jsm">calendar/providers/gdata/modules/shim/Preferences.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Preferences.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Preferences.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Preferences.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Preferences.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Preferences.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Promise.jsm">calendar/providers/gdata/modules/shim/Promise.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Promise.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Promise.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Promise.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Promise.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/Promise.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/PromiseExtras.jsm">calendar/providers/gdata/modules/shim/PromiseExtras.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/PromiseExtras.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/PromiseExtras.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/PromiseExtras.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/PromiseExtras.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/gdata/modules/shim/PromiseExtras.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/storage/calStorageUpgrade.jsm">calendar/providers/storage/calStorageUpgrade.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/storage/calStorageUpgrade.jsm">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/storage/calStorageUpgrade.jsm">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/storage/calStorageUpgrade.jsm">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/storage/calStorageUpgrade.jsm">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/storage/calStorageUpgrade.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/wcap/calWcapCalendarItems.js">calendar/providers/wcap/calWcapCalendarItems.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/wcap/calWcapCalendarItems.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/wcap/calWcapCalendarItems.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/wcap/calWcapCalendarItems.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/wcap/calWcapCalendarItems.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/providers/wcap/calWcapCalendarItems.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/resources/content/calendarCreation.js">calendar/resources/content/calendarCreation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/resources/content/calendarCreation.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/resources/content/calendarCreation.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/resources/content/calendarCreation.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/resources/content/calendarCreation.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/resources/content/calendarCreation.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/mozmill/testLocalICS.js">calendar/test/mozmill/testLocalICS.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/mozmill/testLocalICS.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/mozmill/testLocalICS.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/mozmill/testLocalICS.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/mozmill/testLocalICS.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/mozmill/testLocalICS.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarm.js">calendar/test/unit/test_alarm.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarm.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarm.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarm.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarm.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarm.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarmservice.js">calendar/test/unit/test_alarmservice.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarmservice.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarmservice.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarmservice.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarmservice.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_alarmservice.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_calmgr.js">calendar/test/unit/test_calmgr.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_calmgr.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_calmgr.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_calmgr.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_calmgr.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_calmgr.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_deleted_items.js">calendar/test/unit/test_deleted_items.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_deleted_items.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_deleted_items.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_deleted_items.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_deleted_items.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_deleted_items.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_gdata_provider.js">calendar/test/unit/test_gdata_provider.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_gdata_provider.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_gdata_provider.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_gdata_provider.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_gdata_provider.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_gdata_provider.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_hashedarray.js">calendar/test/unit/test_hashedarray.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_hashedarray.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_hashedarray.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_hashedarray.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_hashedarray.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_hashedarray.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_items.js">calendar/test/unit/test_items.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_items.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_items.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_items.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_items.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_items.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_recur.js">calendar/test/unit/test_recur.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_recur.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_recur.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_recur.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_recur.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_recur.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_utils.js">calendar/test/unit/test_utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_utils.js">file</a> |
<a href="/comm-central/annotate/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_utils.js">annotate</a> |
<a href="/comm-central/diff/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_utils.js">diff</a> |
<a href="/comm-central/comparison/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_utils.js">comparison</a> |
<a href="/comm-central/log/ab6c50b76ed3909054735301c7ea32c9f5f753da/calendar/test/unit/test_utils.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calDateTime.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calDateTime.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -21,66 +21,66 @@ calDateTime.prototype = {</span>
<a href="#l1.4"></a><span id="l1.4">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l1.5"></a><span id="l1.5">         contractID: &quot;@mozilla.org/calendar/datetime;1&quot;,</span>
<a href="#l1.6"></a><span id="l1.6">         classDescription: &quot;Describes a Date/Time Object&quot;,</span>
<a href="#l1.7"></a><span id="l1.7">         classID: calDateTimeClassID,</span>
<a href="#l1.8"></a><span id="l1.8">         interfaces: calDateTimeInterfaces</span>
<a href="#l1.9"></a><span id="l1.9">     }),</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">     isMutable: true,</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    makeImmutable: function() this.isMutable = false,</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-    clone: function() new calDateTime(this.innerObject.clone()),</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    makeImmutable: function () { this.isMutable = false; },</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+    clone: function() { return new calDateTime(this.innerObject.clone()); },</span>
<a href="#l1.16"></a><span id="l1.16"> </span>
<a href="#l1.17"></a><span id="l1.17">     isValid: true,</span>
<a href="#l1.18"></a><span id="l1.18">     innerObject: null,</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-    get nativeTime() this.innerObject.toUnixTime() * UNIX_TIME_TO_PRTIME,</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-    set nativeTime(val) this.innerObject.fromUnixTime(val / UNIX_TIME_TO_PRTIME),</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+    get nativeTime() { return this.innerObject.toUnixTime() * UNIX_TIME_TO_PRTIME; },</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+    set nativeTime(val) { this.innerObject.fromUnixTime(val / UNIX_TIME_TO_PRTIME); },</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25" class="difflineminus">-    get year() this.innerObject.year,</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineminus">-    set year(val) this.innerObject.year = val,</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+    get year() { return this.innerObject.year; },</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+    set year(val) { this.innerObject.year = val; },</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-    get month() this.innerObject.month - 1,</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-    set month(val) this.innerObject.month = val + 1,</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+    get month() { return this.innerObject.month - 1; },</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+    set month(val) { this.innerObject.month = val + 1; },</span>
<a href="#l1.34"></a><span id="l1.34"> </span>
<a href="#l1.35"></a><span id="l1.35" class="difflineminus">-    get day() this.innerObject.day,</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-    set day(val) this.innerObject.day = val,</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+    get day() { return this.innerObject.day; },</span>
<a href="#l1.38"></a><span id="l1.38" class="difflineplus">+    set day(val) { this.innerObject.day = val; },</span>
<a href="#l1.39"></a><span id="l1.39"> </span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-    get hour() this.innerObject.hour,</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineminus">-    set hour(val) this.innerObject.hour = val,</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+    get hour() { return this.innerObject.hour; },</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+    set hour(val) { this.innerObject.hour = val; },</span>
<a href="#l1.44"></a><span id="l1.44"> </span>
<a href="#l1.45"></a><span id="l1.45" class="difflineminus">-    get minute() this.innerObject.minute,</span>
<a href="#l1.46"></a><span id="l1.46" class="difflineminus">-    set minute(val) this.innerObject.minute = val,</span>
<a href="#l1.47"></a><span id="l1.47" class="difflineplus">+    get minute() { return this.innerObject.minute; },</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineplus">+    set minute(val) { this.innerObject.minute = val; },</span>
<a href="#l1.49"></a><span id="l1.49"> </span>
<a href="#l1.50"></a><span id="l1.50" class="difflineminus">-    get second() this.innerObject.second,</span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-    set second(val) this.innerObject.second = val,</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineplus">+    get second() { return this.innerObject.second; },</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineplus">+    set second(val) { this.innerObject.second = val; },</span>
<a href="#l1.54"></a><span id="l1.54"> </span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-    get timezone() new calICALJSTimezone(this.innerObject.zone),</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineminus">-    set timezone(val) unwrapSetter(ICAL.Timezone, val, function(val) {</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+    get timezone() { return new calICALJSTimezone(this.innerObject.zone); },</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+    set timezone(val) { unwrapSetter(ICAL.Timezone, val, function(val) {</span>
<a href="#l1.59"></a><span id="l1.59">         return this.innerObject.zone = val;</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-    }, this),</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+    }, this); },</span>
<a href="#l1.62"></a><span id="l1.62"> </span>
<a href="#l1.63"></a><span id="l1.63">     resetTo: function (yr,mo,dy,hr,mi,sc,tz) {</span>
<a href="#l1.64"></a><span id="l1.64">         this.innerObject.fromData({</span>
<a href="#l1.65"></a><span id="l1.65">             year: yr, month: mo + 1, day: dy,</span>
<a href="#l1.66"></a><span id="l1.66">             hour: hr, minute: mi, second: sc,</span>
<a href="#l1.67"></a><span id="l1.67">         });</span>
<a href="#l1.68"></a><span id="l1.68">         this.timezone = tz;</span>
<a href="#l1.69"></a><span id="l1.69">     },</span>
<a href="#l1.70"></a><span id="l1.70"> </span>
<a href="#l1.71"></a><span id="l1.71" class="difflineminus">-    reset: function() this.innerObject.reset(),</span>
<a href="#l1.72"></a><span id="l1.72" class="difflineplus">+    reset: function() { this.innerObject.reset(); },</span>
<a href="#l1.73"></a><span id="l1.73"> </span>
<a href="#l1.74"></a><span id="l1.74" class="difflineminus">-    get timezoneOffset() this.innerObject.utcOffset(),</span>
<a href="#l1.75"></a><span id="l1.75" class="difflineminus">-    get isDate() this.innerObject.isDate,</span>
<a href="#l1.76"></a><span id="l1.76" class="difflineminus">-    set isDate(val) this.innerObject.isDate = val,</span>
<a href="#l1.77"></a><span id="l1.77" class="difflineplus">+    get timezoneOffset() { return this.innerObject.utcOffset(); },</span>
<a href="#l1.78"></a><span id="l1.78" class="difflineplus">+    get isDate() { return this.innerObject.isDate; },</span>
<a href="#l1.79"></a><span id="l1.79" class="difflineplus">+    set isDate(val) { this.innerObject.isDate = val; },</span>
<a href="#l1.80"></a><span id="l1.80"> </span>
<a href="#l1.81"></a><span id="l1.81" class="difflineminus">-    get weekday() this.innerObject.dayOfWeek() - 1,</span>
<a href="#l1.82"></a><span id="l1.82" class="difflineminus">-    get yearday() this.innerObject.dayOfYear(),</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineplus">+    get weekday() { return this.innerObject.dayOfWeek() - 1; },</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineplus">+    get yearday() { return this.innerObject.dayOfYear(); },</span>
<a href="#l1.85"></a><span id="l1.85"> </span>
<a href="#l1.86"></a><span id="l1.86" class="difflineminus">-    toString: function() this.innerObject.toString(),</span>
<a href="#l1.87"></a><span id="l1.87" class="difflineplus">+    toString: function() { return this.innerObject.toString(); },</span>
<a href="#l1.88"></a><span id="l1.88"> </span>
<a href="#l1.89"></a><span id="l1.89">     getInTimezone: unwrap(ICAL.Timezone, function(val) {</span>
<a href="#l1.90"></a><span id="l1.90">         return new calDateTime(this.innerObject.convertToZone(val));</span>
<a href="#l1.91"></a><span id="l1.91">     }),</span>
<a href="#l1.92"></a><span id="l1.92"> </span>
<a href="#l1.93"></a><span id="l1.93">     addDuration: unwrap(ICAL.Duration, function(val) {</span>
<a href="#l1.94"></a><span id="l1.94">         this.innerObject.addDuration(val);</span>
<a href="#l1.95"></a><span id="l1.95">     }),</span>
<a href="#l1.96"></a><span id="l1.96" class="difflineat">@@ -104,24 +104,24 @@ calDateTime.prototype = {</span>
<a href="#l1.97"></a><span id="l1.97">             // Lightning expects 20120101 and 20120101T010101 to be equal</span>
<a href="#l1.98"></a><span id="l1.98">             return a.compareDateOnlyTz(b, a.zone);</span>
<a href="#l1.99"></a><span id="l1.99">         } else {</span>
<a href="#l1.100"></a><span id="l1.100">             // If both are dates or date-times, then just do the normal compare</span>
<a href="#l1.101"></a><span id="l1.101">             return a.compare(b);</span>
<a href="#l1.102"></a><span id="l1.102">         }</span>
<a href="#l1.103"></a><span id="l1.103">     }),</span>
<a href="#l1.104"></a><span id="l1.104"> </span>
<a href="#l1.105"></a><span id="l1.105" class="difflineminus">-    get startOfWeek() new calDateTime(this.innerObject.startOfWeek()),</span>
<a href="#l1.106"></a><span id="l1.106" class="difflineminus">-    get endOfWeek() new calDateTime(this.innerObject.endOfWeek()),</span>
<a href="#l1.107"></a><span id="l1.107" class="difflineminus">-    get startOfMonth() new calDateTime(this.innerObject.startOfMonth()),</span>
<a href="#l1.108"></a><span id="l1.108" class="difflineminus">-    get endOfMonth() new calDateTime(this.innerObject.endOfMonth()),</span>
<a href="#l1.109"></a><span id="l1.109" class="difflineminus">-    get startOfYear() new calDateTime(this.innerObject.startOfYear()),</span>
<a href="#l1.110"></a><span id="l1.110" class="difflineminus">-    get endOfYear() new calDateTime(this.innerObject.endOfYear()),</span>
<a href="#l1.111"></a><span id="l1.111" class="difflineplus">+    get startOfWeek() { return new calDateTime(this.innerObject.startOfWeek()); },</span>
<a href="#l1.112"></a><span id="l1.112" class="difflineplus">+    get endOfWeek() { return new calDateTime(this.innerObject.endOfWeek()); },</span>
<a href="#l1.113"></a><span id="l1.113" class="difflineplus">+    get startOfMonth() { return new calDateTime(this.innerObject.startOfMonth()); },</span>
<a href="#l1.114"></a><span id="l1.114" class="difflineplus">+    get endOfMonth() { return new calDateTime(this.innerObject.endOfMonth()); },</span>
<a href="#l1.115"></a><span id="l1.115" class="difflineplus">+    get startOfYear() { return new calDateTime(this.innerObject.startOfYear()); },</span>
<a href="#l1.116"></a><span id="l1.116" class="difflineplus">+    get endOfYear() { return new calDateTime(this.innerObject.endOfYear()); },</span>
<a href="#l1.117"></a><span id="l1.117"> </span>
<a href="#l1.118"></a><span id="l1.118" class="difflineminus">-    get icalString() this.innerObject.toICALString(),</span>
<a href="#l1.119"></a><span id="l1.119" class="difflineplus">+    get icalString() { return this.innerObject.toICALString(); },</span>
<a href="#l1.120"></a><span id="l1.120">     set icalString(val) {</span>
<a href="#l1.121"></a><span id="l1.121">         let jcalString;</span>
<a href="#l1.122"></a><span id="l1.122">         if (val.length &gt; 10) {</span>
<a href="#l1.123"></a><span id="l1.123">            jcalString = ICAL.design.value[&quot;date-time&quot;].fromICAL(val);</span>
<a href="#l1.124"></a><span id="l1.124">         } else {</span>
<a href="#l1.125"></a><span id="l1.125">            jcalString = ICAL.design.value.date.fromICAL(val);</span>
<a href="#l1.126"></a><span id="l1.126">         }</span>
<a href="#l1.127"></a><span id="l1.127">         this.innerObject = ICAL.Time.fromString(jcalString);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calDuration.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calDuration.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -17,51 +17,51 @@ calDuration.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">     classID: calDurationClassID,</span>
<a href="#l2.5"></a><span id="l2.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l2.6"></a><span id="l2.6">         contractID: &quot;@mozilla.org/calendar/duration;1&quot;,</span>
<a href="#l2.7"></a><span id="l2.7">         classDescription: &quot;Calendar Duration Object&quot;,</span>
<a href="#l2.8"></a><span id="l2.8">         classID: calDurationClassID,</span>
<a href="#l2.9"></a><span id="l2.9">         interfaces: calDurationInterfaces</span>
<a href="#l2.10"></a><span id="l2.10">     }),</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    get icalDuration() this.innerObject,</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-    set icalDuration(val) this.innerObject = val,</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+    get icalDuration() { return this.innerObject; },</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+    set icalDuration(val) { this.innerObject = val; },</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">     isMutable: true,</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-    makeImmutable: function() this.isMutable = false,</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-    clone: function() new calDuration(this.innerObject.clone()),</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+    makeImmutable: function() { this.isMutable = false; },</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+    clone: function() { return new calDuration(this.innerObject.clone()); },</span>
<a href="#l2.22"></a><span id="l2.22"> </span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-    get isNegative() this.innerObject.isNegative,</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineminus">-    set isNegative(val) this.innerObject.isNegative = val,</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+    get isNegative() { return this.innerObject.isNegative; },</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+    set isNegative(val) { this.innerObject.isNegative = val; },</span>
<a href="#l2.27"></a><span id="l2.27"> </span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-    get weeks() this.innerObject.weeks,</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-    set weeks(val) this.innerObject.weeks = val,</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+    get weeks() { return this.innerObject.weeks; },</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+    set weeks(val) { this.innerObject.weeks = val; },</span>
<a href="#l2.32"></a><span id="l2.32"> </span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-    get days() this.innerObject.days,</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-    set days(val) this.innerObject.days = val,</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+    get days() { return this.innerObject.days; },</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+    set days(val) { this.innerObject.days = val; },</span>
<a href="#l2.37"></a><span id="l2.37"> </span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-    get hours() this.innerObject.hours,</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-    set hours(val) this.innerObject.hours = val,</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+    get hours() { return this.innerObject.hours; },</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+    set hours(val) { this.innerObject.hours = val; },</span>
<a href="#l2.42"></a><span id="l2.42"> </span>
<a href="#l2.43"></a><span id="l2.43" class="difflineminus">-    get minutes() this.innerObject.minutes,</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineminus">-    set minutes(val) this.innerObject.minutes = val,</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+    get minutes() { return this.innerObject.minutes; },</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+    set minutes(val) { this.innerObject.minutes = val; },</span>
<a href="#l2.47"></a><span id="l2.47"> </span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-    get seconds() this.innerObject.seconds,</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-    set seconds(val) this.innerObject.seconds = val,</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+    get seconds() { return this.innerObject.seconds; },</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+    set seconds(val) { this.innerObject.seconds = val; },</span>
<a href="#l2.52"></a><span id="l2.52"> </span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-    get inSeconds() this.innerObject.toSeconds(),</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineminus">-    set inSeconds(val) this.innerObject.fromSeconds(val),</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineplus">+    get inSeconds() { return this.innerObject.toSeconds(); },</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineplus">+    set inSeconds(val) { this.innerObject.fromSeconds(val); },</span>
<a href="#l2.57"></a><span id="l2.57"> </span>
<a href="#l2.58"></a><span id="l2.58">     addDuration: unwrap(ICAL.Duration, function(val) {</span>
<a href="#l2.59"></a><span id="l2.59">         this.innerObject.fromSeconds(this.innerObject.toSeconds() + val.toSeconds());</span>
<a href="#l2.60"></a><span id="l2.60">     }),</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62">     compare: unwrap(ICAL.Duration, function(val) {</span>
<a href="#l2.63"></a><span id="l2.63">         return this.innerObject.compare(val);</span>
<a href="#l2.64"></a><span id="l2.64">     }),</span>
<a href="#l2.65"></a><span id="l2.65"> </span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-    reset: function() this.innerObject.reset(),</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineminus">-    normalize: function() this.innerObject.normalize(),</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-    toString: function() this.innerObject.toString(),</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+    reset: function() { this.innerObject.reset(); },</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+    normalize: function() { this.innerObject.normalize(); },</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineplus">+    toString: function() { return this.innerObject.toString(); },</span>
<a href="#l2.72"></a><span id="l2.72"> </span>
<a href="#l2.73"></a><span id="l2.73" class="difflineminus">-    get icalString() this.innerObject.toString(),</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineminus">-    set icalString(val) this.innerObject = ICAL.Duration.fromString(val)</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineplus">+    get icalString() { return this.innerObject.toString(); },</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineplus">+    set icalString(val) { this.innerObject = ICAL.Duration.fromString(val); }</span>
<a href="#l2.77"></a><span id="l2.77"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calICSService.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calICSService.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -18,22 +18,22 @@ calIcalProperty.prototype = {</span>
<a href="#l3.4"></a><span id="l3.4">     classID: calIcalPropertyClassID,</span>
<a href="#l3.5"></a><span id="l3.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l3.6"></a><span id="l3.6">         contractID: &quot;@mozilla.org/calendar/ical-property;1&quot;,</span>
<a href="#l3.7"></a><span id="l3.7">         classDescription: &quot;Wrapper for a libical property&quot;,</span>
<a href="#l3.8"></a><span id="l3.8">         classID: calIcalPropertyClassID,</span>
<a href="#l3.9"></a><span id="l3.9">         interfaces: calIcalPropertyInterfaces</span>
<a href="#l3.10"></a><span id="l3.10">     }),</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    get icalString() this.innerObject.toICAL() + ICAL.newLineChar,</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-    get icalProperty() this.innerObject,</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-    set icalProperty(val) this.innerObject = val,</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+    get icalString() { return this.innerObject.toICAL() + ICAL.newLineChar; },</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+    get icalProperty() { return this.innerObject; },</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+    set icalProperty(val) { this.innerObject = val; },</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-    get parent() this.innerObject.parent,</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-    toString: function() this.innerObject.toICAL(),</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+    get parent() { return this.innerObject.parent; },</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+    toString: function() { return this.innerObject.toICAL(); },</span>
<a href="#l3.23"></a><span id="l3.23"> </span>
<a href="#l3.24"></a><span id="l3.24">     get value() {</span>
<a href="#l3.25"></a><span id="l3.25">         // Unescaped value for properties of TEXT or X- type, escaped otherwise.</span>
<a href="#l3.26"></a><span id="l3.26">         // In both cases, innerObject.type is &quot;text&quot;.</span>
<a href="#l3.27"></a><span id="l3.27">         if (this.innerObject.type == &quot;text&quot;) {</span>
<a href="#l3.28"></a><span id="l3.28">             return this.innerObject.getValues().join(&quot;,&quot;)</span>
<a href="#l3.29"></a><span id="l3.29">         }</span>
<a href="#l3.30"></a><span id="l3.30">         return this.valueAsIcalString;</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineat">@@ -60,32 +60,32 @@ calIcalProperty.prototype = {</span>
<a href="#l3.32"></a><span id="l3.32">     },</span>
<a href="#l3.33"></a><span id="l3.33"> </span>
<a href="#l3.34"></a><span id="l3.34">     get valueAsDatetime() {</span>
<a href="#l3.35"></a><span id="l3.35">         let val = this.innerObject.getFirstValue();</span>
<a href="#l3.36"></a><span id="l3.36">         let isIcalTime = val &amp;&amp; (typeof val == &quot;object&quot;) &amp;&amp;</span>
<a href="#l3.37"></a><span id="l3.37">                          (&quot;icalclass&quot; in val) &amp;&amp; val.icalclass == &quot;icaltime&quot;;</span>
<a href="#l3.38"></a><span id="l3.38">         return (isIcalTime ? new calDateTime(val) : null);</span>
<a href="#l3.39"></a><span id="l3.39">     },</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-    set valueAsDatetime(val) unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+    set valueAsDatetime(val) { unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l3.42"></a><span id="l3.42">         if (val &amp;&amp; val.zone &amp;&amp;</span>
<a href="#l3.43"></a><span id="l3.43">             val.zone != ICAL.Timezone.utcTimezone &amp;&amp;</span>
<a href="#l3.44"></a><span id="l3.44">             val.zone != ICAL.Timezone.localTimezone) {</span>
<a href="#l3.45"></a><span id="l3.45">             this.innerObject.setParameter(&quot;TZID&quot;, val.zone.tzid);</span>
<a href="#l3.46"></a><span id="l3.46">             if (this.parent) {</span>
<a href="#l3.47"></a><span id="l3.47">                 let tzref = wrapGetter(calICALJSTimezone, val.zone);</span>
<a href="#l3.48"></a><span id="l3.48">                 this.parent.addTimezoneReference(tzref);</span>
<a href="#l3.49"></a><span id="l3.49">             }</span>
<a href="#l3.50"></a><span id="l3.50">         } else {</span>
<a href="#l3.51"></a><span id="l3.51">             this.innerObject.removeParameter(&quot;TZID&quot;);</span>
<a href="#l3.52"></a><span id="l3.52">         }</span>
<a href="#l3.53"></a><span id="l3.53">         this.innerObject.setValue(val);</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-    }, this),</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+    }, this); },</span>
<a href="#l3.56"></a><span id="l3.56"> </span>
<a href="#l3.57"></a><span id="l3.57" class="difflineminus">-    get propertyName() this.innerObject.name.toUpperCase(),</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+    get propertyName() { return this.innerObject.name.toUpperCase(); },</span>
<a href="#l3.59"></a><span id="l3.59"> </span>
<a href="#l3.60"></a><span id="l3.60">     getParameter: function(name) {</span>
<a href="#l3.61"></a><span id="l3.61">         // Unfortuantely getting the &quot;VALUE&quot; parameter won't work, since in</span>
<a href="#l3.62"></a><span id="l3.62">         // jCal it has been translated to the value type id.</span>
<a href="#l3.63"></a><span id="l3.63">         if (name == &quot;VALUE&quot;) {</span>
<a href="#l3.64"></a><span id="l3.64">             let propname = this.innerObject.name.toLowerCase();</span>
<a href="#l3.65"></a><span id="l3.65">             if (propname in ICAL.design.property) {</span>
<a href="#l3.66"></a><span id="l3.66">                 let details = ICAL.design.property[propname];</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineat">@@ -213,23 +213,23 @@ calIcalComponent.prototype = {</span>
<a href="#l3.68"></a><span id="l3.68">     classID: calIcalComponentClassID,</span>
<a href="#l3.69"></a><span id="l3.69">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l3.70"></a><span id="l3.70">         contractID: &quot;@mozilla.org/calendar/ical-component;1&quot;,</span>
<a href="#l3.71"></a><span id="l3.71">         classDescription: &quot;Wrapper for a icaljs component&quot;,</span>
<a href="#l3.72"></a><span id="l3.72">         classID: calIcalComponentClassID,</span>
<a href="#l3.73"></a><span id="l3.73">         interfaces: calIcalComponentInterfaces</span>
<a href="#l3.74"></a><span id="l3.74">     }),</span>
<a href="#l3.75"></a><span id="l3.75"> </span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-    clone: function() new calIcalComponent(new ICAL.Component(this.innerObject.toJSON())),</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+    clone: function() { return new calIcalComponent(new ICAL.Component(this.innerObject.toJSON())); },</span>
<a href="#l3.78"></a><span id="l3.78"> </span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-    get parent() wrapGetter(calIcalComponent, this.innerObject.parent),</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+    get parent() { return wrapGetter(calIcalComponent, this.innerObject.parent); },</span>
<a href="#l3.81"></a><span id="l3.81"> </span>
<a href="#l3.82"></a><span id="l3.82" class="difflineminus">-    get icalTimezone() this.innerObject.name == &quot;vtimezone&quot; ? this.innerObject : null,</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-    get icalComponent() this.innerObject,</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineminus">-    set icalComponent(val) this.innerObject = val,</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+    get icalTimezone() { return this.innerObject.name == &quot;vtimezone&quot; ? this.innerObject : null; },</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+    get icalComponent() { return this.innerObject; },</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+    set icalComponent(val) { this.innerObject = val; },</span>
<a href="#l3.88"></a><span id="l3.88"> </span>
<a href="#l3.89"></a><span id="l3.89">     componentIterator: null,</span>
<a href="#l3.90"></a><span id="l3.90">     getFirstSubcomponent: function(kind) {</span>
<a href="#l3.91"></a><span id="l3.91">         if (kind == &quot;ANY&quot;) {</span>
<a href="#l3.92"></a><span id="l3.92">             kind = null;</span>
<a href="#l3.93"></a><span id="l3.93">         } else if (kind) {</span>
<a href="#l3.94"></a><span id="l3.94">             kind = kind.toLowerCase();</span>
<a href="#l3.95"></a><span id="l3.95">         }</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineat">@@ -250,98 +250,98 @@ calIcalComponent.prototype = {</span>
<a href="#l3.97"></a><span id="l3.97">                 this.componentIterator = null;</span>
<a href="#l3.98"></a><span id="l3.98">                 return null;</span>
<a href="#l3.99"></a><span id="l3.99">             }</span>
<a href="#l3.100"></a><span id="l3.100">         } else {</span>
<a href="#l3.101"></a><span id="l3.101">             return this.getFirstSubcomponent(kind);</span>
<a href="#l3.102"></a><span id="l3.102">         }</span>
<a href="#l3.103"></a><span id="l3.103">     },</span>
<a href="#l3.104"></a><span id="l3.104"> </span>
<a href="#l3.105"></a><span id="l3.105" class="difflineminus">-    get componentType() this.innerObject.name.toUpperCase(),</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineplus">+    get componentType() { return this.innerObject.name.toUpperCase(); },</span>
<a href="#l3.107"></a><span id="l3.107"> </span>
<a href="#l3.108"></a><span id="l3.108" class="difflineminus">-    get uid() this.innerObject.getFirstPropertyValue(&quot;uid&quot;),</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineminus">-    set uid(val) this.innerObject.updatePropertyWithValue(&quot;uid&quot;, val),</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineplus">+    get uid() { return this.innerObject.getFirstPropertyValue(&quot;uid&quot;); },</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineplus">+    set uid(val) { this.innerObject.updatePropertyWithValue(&quot;uid&quot;, val); },</span>
<a href="#l3.112"></a><span id="l3.112"> </span>
<a href="#l3.113"></a><span id="l3.113" class="difflineminus">-    get prodid() this.innerObject.getFirstPropertyValue(&quot;prodid&quot;),</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineminus">-    set prodid(val) this.innerObject.updatePropertyWithValue(&quot;prodid&quot;, val),</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineplus">+    get prodid() { return this.innerObject.getFirstPropertyValue(&quot;prodid&quot;); },</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineplus">+    set prodid(val) { this.innerObject.updatePropertyWithValue(&quot;prodid&quot;, val); },</span>
<a href="#l3.117"></a><span id="l3.117"> </span>
<a href="#l3.118"></a><span id="l3.118" class="difflineminus">-    get version() this.innerObject.getFirstPropertyValue(&quot;version&quot;),</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineminus">-    set version(val) this.innerObject.updatePropertyWithValue(&quot;version&quot;, val),</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineplus">+    get version() { return this.innerObject.getFirstPropertyValue(&quot;version&quot;); },</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineplus">+    set version(val) { this.innerObject.updatePropertyWithValue(&quot;version&quot;, val); },</span>
<a href="#l3.122"></a><span id="l3.122"> </span>
<a href="#l3.123"></a><span id="l3.123" class="difflineminus">-    get method() this.innerObject.getFirstPropertyValue(&quot;method&quot;),</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineminus">-    set method(val) this.innerObject.updatePropertyWithValue(&quot;method&quot;, val),</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineplus">+    get method() { return this.innerObject.getFirstPropertyValue(&quot;method&quot;); },</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineplus">+    set method(val) { this.innerObject.updatePropertyWithValue(&quot;method&quot;, val); },</span>
<a href="#l3.127"></a><span id="l3.127"> </span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-    get status() this.innerObject.getFirstPropertyValue(&quot;status&quot;),</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineminus">-    set status(val) this.innerObject.updatePropertyWithValue(&quot;status&quot;, val),</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineplus">+    get status() { return this.innerObject.getFirstPropertyValue(&quot;status&quot;); },</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineplus">+    set status(val) { this.innerObject.updatePropertyWithValue(&quot;status&quot;, val); },</span>
<a href="#l3.132"></a><span id="l3.132"> </span>
<a href="#l3.133"></a><span id="l3.133" class="difflineminus">-    get summary() this.innerObject.getFirstPropertyValue(&quot;summary&quot;),</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineminus">-    set summary(val) this.innerObject.updatePropertyWithValue(&quot;summary&quot;, val),</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineplus">+    get summary() { return this.innerObject.getFirstPropertyValue(&quot;summary&quot;); },</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineplus">+    set summary(val) { this.innerObject.updatePropertyWithValue(&quot;summary&quot;, val); },</span>
<a href="#l3.137"></a><span id="l3.137"> </span>
<a href="#l3.138"></a><span id="l3.138" class="difflineminus">-    get description() this.innerObject.getFirstPropertyValue(&quot;description&quot;),</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineminus">-    set description(val) this.innerObject.updatePropertyWithValue(&quot;description&quot;, val),</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineplus">+    get description() { return this.innerObject.getFirstPropertyValue(&quot;description&quot;); },</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineplus">+    set description(val) { this.innerObject.updatePropertyWithValue(&quot;description&quot;, val); },</span>
<a href="#l3.142"></a><span id="l3.142"> </span>
<a href="#l3.143"></a><span id="l3.143" class="difflineminus">-    get location() this.innerObject.getFirstPropertyValue(&quot;location&quot;),</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineminus">-    set location(val) this.innerObject.updatePropertyWithValue(&quot;location&quot;, val),</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineplus">+    get location() { return this.innerObject.getFirstPropertyValue(&quot;location&quot;); },</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineplus">+    set location(val) { this.innerObject.updatePropertyWithValue(&quot;location&quot;, val); },</span>
<a href="#l3.147"></a><span id="l3.147"> </span>
<a href="#l3.148"></a><span id="l3.148" class="difflineminus">-    get categories() this.innerObject.getFirstPropertyValue(&quot;categories&quot;),</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineminus">-    set categories(val) this.innerObject.updatePropertyWithValue(&quot;categories&quot;, val),</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineplus">+    get categories() { return this.innerObject.getFirstPropertyValue(&quot;categories&quot;); },</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineplus">+    set categories(val) { this.innerObject.updatePropertyWithValue(&quot;categories&quot;, val); },</span>
<a href="#l3.152"></a><span id="l3.152"> </span>
<a href="#l3.153"></a><span id="l3.153" class="difflineminus">-    get URL() this.innerObject.getFirstPropertyValue(&quot;url&quot;),</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineminus">-    set URL(val) this.innerObject.updatePropertyWithValue(&quot;url&quot;, val),</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineplus">+    get URL() { return this.innerObject.getFirstPropertyValue(&quot;url&quot;); },</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineplus">+    set URL(val) { this.innerObject.updatePropertyWithValue(&quot;url&quot;, val); },</span>
<a href="#l3.157"></a><span id="l3.157"> </span>
<a href="#l3.158"></a><span id="l3.158">     get priority() {</span>
<a href="#l3.159"></a><span id="l3.159">         // If there is no value for this integer property, then we must return</span>
<a href="#l3.160"></a><span id="l3.160">         // the designated INVALID_VALUE.</span>
<a href="#l3.161"></a><span id="l3.161">         const INVALID_VALUE = Components.interfaces.calIIcalComponent.INVALID_VALUE;</span>
<a href="#l3.162"></a><span id="l3.162">         let prop = this.innerObject.getFirstProperty(&quot;priority&quot;);</span>
<a href="#l3.163"></a><span id="l3.163">         let val = prop ? prop.getFirstValue() : null;</span>
<a href="#l3.164"></a><span id="l3.164">         return (val === null ?  INVALID_VALUE : val);</span>
<a href="#l3.165"></a><span id="l3.165">     },</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineminus">-    set priority(val) this.innerObject.updatePropertyWithValue(&quot;priority&quot;, val),</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineplus">+    set priority(val) { this.innerObject.updatePropertyWithValue(&quot;priority&quot;, val); },</span>
<a href="#l3.168"></a><span id="l3.168"> </span>
<a href="#l3.169"></a><span id="l3.169">     _setTimeAttr: function(propName, val) {</span>
<a href="#l3.170"></a><span id="l3.170">         let prop = this.innerObject.updatePropertyWithValue(propName, val);</span>
<a href="#l3.171"></a><span id="l3.171">         if (val &amp;&amp; val.zone &amp;&amp;</span>
<a href="#l3.172"></a><span id="l3.172">             val.zone != ICAL.Timezone.utcTimezone &amp;&amp;</span>
<a href="#l3.173"></a><span id="l3.173">             val.zone != ICAL.Timezone.localTimezone) {</span>
<a href="#l3.174"></a><span id="l3.174">             prop.setParameter(&quot;TZID&quot;, val.zone.tzid);</span>
<a href="#l3.175"></a><span id="l3.175">             this.addTimezoneReference(wrapGetter(calICALJSTimezone, val.zone));</span>
<a href="#l3.176"></a><span id="l3.176">         } else {</span>
<a href="#l3.177"></a><span id="l3.177">             prop.removeParameter(&quot;TZID&quot;);</span>
<a href="#l3.178"></a><span id="l3.178">         }</span>
<a href="#l3.179"></a><span id="l3.179">     },</span>
<a href="#l3.180"></a><span id="l3.180"> </span>
<a href="#l3.181"></a><span id="l3.181" class="difflineminus">-    get startTime() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;dtstart&quot;)),</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineminus">-    set startTime(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;dtstart&quot;), this),</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineplus">+    get startTime() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;dtstart&quot;)); },</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineplus">+    set startTime(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;dtstart&quot;), this); },</span>
<a href="#l3.185"></a><span id="l3.185"> </span>
<a href="#l3.186"></a><span id="l3.186" class="difflineminus">-    get endTime() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;dtend&quot;)),</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineminus">-    set endTime(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;dtend&quot;), this),</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineplus">+    get endTime() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;dtend&quot;)); },</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineplus">+    set endTime(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;dtend&quot;), this); },</span>
<a href="#l3.190"></a><span id="l3.190"> </span>
<a href="#l3.191"></a><span id="l3.191" class="difflineminus">-    get duration() wrapGetter(calDuration, this.innerObject.getFirstPropertyValue(&quot;duration&quot;)),</span>
<a href="#l3.192"></a><span id="l3.192" class="difflineplus">+    get duration() { return wrapGetter(calDuration, this.innerObject.getFirstPropertyValue(&quot;duration&quot;)); },</span>
<a href="#l3.193"></a><span id="l3.193"> </span>
<a href="#l3.194"></a><span id="l3.194" class="difflineminus">-    get dueTime() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;due&quot;)),</span>
<a href="#l3.195"></a><span id="l3.195" class="difflineminus">-    set dueTime(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;due&quot;), this),</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineplus">+    get dueTime() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;due&quot;)); },</span>
<a href="#l3.197"></a><span id="l3.197" class="difflineplus">+    set dueTime(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;due&quot;), this); },</span>
<a href="#l3.198"></a><span id="l3.198"> </span>
<a href="#l3.199"></a><span id="l3.199" class="difflineminus">-    get stampTime() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;dtstamp&quot;)),</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineminus">-    set stampTime(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;dtstamp&quot;), this),</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineplus">+    get stampTime() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;dtstamp&quot;)); },</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineplus">+    set stampTime(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;dtstamp&quot;), this); },</span>
<a href="#l3.203"></a><span id="l3.203"> </span>
<a href="#l3.204"></a><span id="l3.204" class="difflineminus">-    get createdTime() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;created&quot;)),</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineminus">-    set createdTime(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;created&quot;), this),</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineplus">+    get createdTime() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;created&quot;)); },</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineplus">+    set createdTime(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;created&quot;), this); },</span>
<a href="#l3.208"></a><span id="l3.208"> </span>
<a href="#l3.209"></a><span id="l3.209" class="difflineminus">-    get completedTime() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;completed&quot;)),</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineminus">-    set completedTime(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;completed&quot;), this),</span>
<a href="#l3.211"></a><span id="l3.211" class="difflineplus">+    get completedTime() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;completed&quot;)); },</span>
<a href="#l3.212"></a><span id="l3.212" class="difflineplus">+    set completedTime(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;completed&quot;), this); },</span>
<a href="#l3.213"></a><span id="l3.213"> </span>
<a href="#l3.214"></a><span id="l3.214" class="difflineminus">-    get lastModified() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;last-modified&quot;)),</span>
<a href="#l3.215"></a><span id="l3.215" class="difflineminus">-    set lastModified(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;last-modified&quot;), this),</span>
<a href="#l3.216"></a><span id="l3.216" class="difflineplus">+    get lastModified() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;last-modified&quot;)); },</span>
<a href="#l3.217"></a><span id="l3.217" class="difflineplus">+    set lastModified(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;last-modified&quot;), this); },</span>
<a href="#l3.218"></a><span id="l3.218"> </span>
<a href="#l3.219"></a><span id="l3.219" class="difflineminus">-    get recurrenceId() wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;recurrence-id&quot;)),</span>
<a href="#l3.220"></a><span id="l3.220" class="difflineminus">-    set recurrenceId(val) unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;recurrence-id&quot;), this),</span>
<a href="#l3.221"></a><span id="l3.221" class="difflineplus">+    get recurrenceId() { return wrapGetter(calDateTime, this.innerObject.getFirstPropertyValue(&quot;recurrence-id&quot;)); },</span>
<a href="#l3.222"></a><span id="l3.222" class="difflineplus">+    set recurrenceId(val) { unwrapSetter(ICAL.Time, val, this._setTimeAttr.bind(this, &quot;recurrence-id&quot;), this); },</span>
<a href="#l3.223"></a><span id="l3.223"> </span>
<a href="#l3.224"></a><span id="l3.224" class="difflineminus">-    serializeToICS: function() this.innerObject.toString() + ICAL.newLineChar,</span>
<a href="#l3.225"></a><span id="l3.225" class="difflineminus">-    toString: function() this.innerObject.toString(),</span>
<a href="#l3.226"></a><span id="l3.226" class="difflineplus">+    serializeToICS: function() { return this.innerObject.toString() + ICAL.newLineChar; },</span>
<a href="#l3.227"></a><span id="l3.227" class="difflineplus">+    toString: function() { return this.innerObject.toString(); },</span>
<a href="#l3.228"></a><span id="l3.228"> </span>
<a href="#l3.229"></a><span id="l3.229">     addSubcomponent: function(comp) {</span>
<a href="#l3.230"></a><span id="l3.230">         comp.getReferencedTimezones({}).forEach(this.addTimezoneReference, this);</span>
<a href="#l3.231"></a><span id="l3.231">         let jscomp = unwrapSingle(ICAL.Component, comp);</span>
<a href="#l3.232"></a><span id="l3.232">         this.innerObject.addSubcomponent(jscomp);</span>
<a href="#l3.233"></a><span id="l3.233">     },</span>
<a href="#l3.234"></a><span id="l3.234"> </span>
<a href="#l3.235"></a><span id="l3.235">     propertyIterator: null,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calPeriod.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calPeriod.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -20,38 +20,38 @@ calPeriod.prototype = {</span>
<a href="#l4.4"></a><span id="l4.4">         classDescription: &quot;A period between two dates&quot;,</span>
<a href="#l4.5"></a><span id="l4.5">         classID: calPeriodClassID,</span>
<a href="#l4.6"></a><span id="l4.6">         interfaces: calPeriodInterfaces</span>
<a href="#l4.7"></a><span id="l4.7">     }),</span>
<a href="#l4.8"></a><span id="l4.8"> </span>
<a href="#l4.9"></a><span id="l4.9">     isMutable: true,</span>
<a href="#l4.10"></a><span id="l4.10">     innerObject: null,</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-    get icalPeriod() this.innerObject,</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-    set icalPeriod(val) this.innerObject = val,</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+    get icalPeriod() { return this.innerObject; },</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+    set icalPeriod(val) { this.innerObject = val; },</span>
<a href="#l4.16"></a><span id="l4.16"> </span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-    makeImmutable: function() this.isMutable = false,</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-    clone: function() new calPeriod(this.innerObject.clone()),</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+    makeImmutable: function() { this.isMutable = false; },</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+    clone: function() { return new calPeriod(this.innerObject.clone()); },</span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-    get start() wrapGetter(calDateTime, this.innerObject.start),</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-    set start(val) unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+    get start() { return wrapGetter(calDateTime, this.innerObject.start); },</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+    set start(val) { unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l4.26"></a><span id="l4.26">         this.innerObject.start = val;</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-    }, this),</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+    }, this); },</span>
<a href="#l4.29"></a><span id="l4.29"> </span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-    get end() wrapGetter(calDateTime, this.innerObject.getEnd()),</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-    set end(val) unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+    get end() { return wrapGetter(calDateTime, this.innerObject.getEnd()); },</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+    set end(val) { unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l4.34"></a><span id="l4.34">         if (this.innerObject.duration) {</span>
<a href="#l4.35"></a><span id="l4.35">             this.innerObject.duration = null;</span>
<a href="#l4.36"></a><span id="l4.36">         }</span>
<a href="#l4.37"></a><span id="l4.37">         this.innerObject.end = val;</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-    }, this),</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+    }, this); },</span>
<a href="#l4.40"></a><span id="l4.40"> </span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-    get duration() wrapGetter(calDuration, this.innerObject.getDuration()),</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+    get duration() { return wrapGetter(calDuration, this.innerObject.getDuration()); },</span>
<a href="#l4.43"></a><span id="l4.43"> </span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-    get icalString() this.innerObject.toICALString(),</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+    get icalString() { return this.innerObject.toICALString(); },</span>
<a href="#l4.46"></a><span id="l4.46">     set icalString(val) {</span>
<a href="#l4.47"></a><span id="l4.47">         let str = ICAL.parse._parseValue(val, &quot;period&quot;);</span>
<a href="#l4.48"></a><span id="l4.48">         this.innerObject = ICAL.Period.fromString(str);</span>
<a href="#l4.49"></a><span id="l4.49">         return val;</span>
<a href="#l4.50"></a><span id="l4.50">     },</span>
<a href="#l4.51"></a><span id="l4.51"> </span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-    toString: function() this.innerObject.toString()</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+    toString: function() { return this.innerObject.toString(); }</span>
<a href="#l4.54"></a><span id="l4.54"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/backend/icaljs/calRecurrenceRule.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/backend/icaljs/calRecurrenceRule.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -21,21 +21,21 @@ calRecurrenceRule.prototype = {</span>
<a href="#l5.4"></a><span id="l5.4">         classDescription: &quot;Calendar Recurrence Rule&quot;,</span>
<a href="#l5.5"></a><span id="l5.5">         classID: calRecurrenceRuleClassID,</span>
<a href="#l5.6"></a><span id="l5.6">         interfaces: calRecurrenceRuleInterfaces</span>
<a href="#l5.7"></a><span id="l5.7">     }),</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">     innerObject: null,</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11">     isMutable: true,</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    makeImmutable: function() this.isMutable = false,</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-    clone: function() new calRecurrenceRule(new ICAL.Recur(this.innerObject)),</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+    makeImmutable: function() { this.isMutable = false; },</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+    clone: function() { return new calRecurrenceRule(new ICAL.Recur(this.innerObject)); },</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17">     isNegative: false, // We don't support EXRULE anymore</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">-    get isFinite() this.innerObject.isFinite(),</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+    get isFinite() { return this.innerObject.isFinite(); },</span>
<a href="#l5.20"></a><span id="l5.20"> </span>
<a href="#l5.21"></a><span id="l5.21">     getNextOccurrence: function(aStartTime, aRecId) {</span>
<a href="#l5.22"></a><span id="l5.22">         aStartTime = unwrapSingle(ICAL.Time, aStartTime);</span>
<a href="#l5.23"></a><span id="l5.23">         aRecId = unwrapSingle(ICAL.Time, aRecId);</span>
<a href="#l5.24"></a><span id="l5.24">         return wrapGetter(calDateTime, this.innerObject.getNextOccurrence(aStartTime, aRecId));</span>
<a href="#l5.25"></a><span id="l5.25">     },</span>
<a href="#l5.26"></a><span id="l5.26"> </span>
<a href="#l5.27"></a><span id="l5.27">     getOccurrences: function(aStartTime, aRangeStart, aRangeEnd, aMaxCount, aCount) {</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineat">@@ -90,62 +90,62 @@ calRecurrenceRule.prototype = {</span>
<a href="#l5.29"></a><span id="l5.29">                 break;</span>
<a href="#l5.30"></a><span id="l5.30">             }</span>
<a href="#l5.31"></a><span id="l5.31">         }</span>
<a href="#l5.32"></a><span id="l5.32"> </span>
<a href="#l5.33"></a><span id="l5.33">         aCount.value = occurrences.length;</span>
<a href="#l5.34"></a><span id="l5.34">         return occurrences;</span>
<a href="#l5.35"></a><span id="l5.35">     },</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-    get icalString() &quot;RRULE:&quot; + this.innerObject.toString() + ICAL.newLineChar,</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">-    set icalString(val) this.innerObject = ICAL.Recur.fromString(val.replace(/^RRULE:/i, &quot;&quot;)),</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+    get icalString() { return &quot;RRULE:&quot; + this.innerObject.toString() + ICAL.newLineChar; },</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+    set icalString(val) { this.innerObject = ICAL.Recur.fromString(val.replace(/^RRULE:/i, &quot;&quot;)); },</span>
<a href="#l5.41"></a><span id="l5.41"> </span>
<a href="#l5.42"></a><span id="l5.42">     get icalProperty() {</span>
<a href="#l5.43"></a><span id="l5.43">         let prop = new ICAL.Property(&quot;rrule&quot;);</span>
<a href="#l5.44"></a><span id="l5.44">         prop.setValue(this.innerObject);</span>
<a href="#l5.45"></a><span id="l5.45">         return new calIcalProperty(prop);</span>
<a href="#l5.46"></a><span id="l5.46">     },</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-    set icalProperty(val) unwrapSetter(ICAL.Property, val, function(val) {</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+    set icalProperty(val) { unwrapSetter(ICAL.Property, val, function(val) {</span>
<a href="#l5.49"></a><span id="l5.49">         this.innerObject = val.getFirstValue();</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-    }, this),</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+    }, this); },</span>
<a href="#l5.52"></a><span id="l5.52"> </span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-    get type() this.innerObject.freq,</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-    set type(val) this.innerObject.freq = val,</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+    get type() { return this.innerObject.freq; },</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+    set type(val) { this.innerObject.freq = val; },</span>
<a href="#l5.57"></a><span id="l5.57"> </span>
<a href="#l5.58"></a><span id="l5.58" class="difflineminus">-    get interval() this.innerObject.interval,</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineminus">-    set interval(val) this.innerObject.interval = val,</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+    get interval() { return this.innerObject.interval; },</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+    set interval(val) { this.innerObject.interval = val; },</span>
<a href="#l5.62"></a><span id="l5.62"> </span>
<a href="#l5.63"></a><span id="l5.63">     get count() {</span>
<a href="#l5.64"></a><span id="l5.64">         if (!this.isByCount) {</span>
<a href="#l5.65"></a><span id="l5.65">             throw Components.results.NS_ERROR_FAILURE;</span>
<a href="#l5.66"></a><span id="l5.66">         }</span>
<a href="#l5.67"></a><span id="l5.67">         return this.innerObject.count || -1;</span>
<a href="#l5.68"></a><span id="l5.68">     },</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-    set count(val) this.innerObject.count = (val &amp;&amp; val &gt; 0 ? val : null),</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+    set count(val) { this.innerObject.count = (val &amp;&amp; val &gt; 0 ? val : null); },</span>
<a href="#l5.71"></a><span id="l5.71"> </span>
<a href="#l5.72"></a><span id="l5.72">     get untilDate() {</span>
<a href="#l5.73"></a><span id="l5.73">         if (this.innerObject.until) {</span>
<a href="#l5.74"></a><span id="l5.74">             return new calDateTime(this.innerObject.until);</span>
<a href="#l5.75"></a><span id="l5.75">         } else {</span>
<a href="#l5.76"></a><span id="l5.76">             return null;</span>
<a href="#l5.77"></a><span id="l5.77">         }</span>
<a href="#l5.78"></a><span id="l5.78">     },</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineminus">-    set untilDate(val) unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+    set untilDate(val) { unwrapSetter(ICAL.Time, val, function(val) {</span>
<a href="#l5.81"></a><span id="l5.81">         if (val.timezone != ICAL.Timezone.utcTimezone &amp;&amp;</span>
<a href="#l5.82"></a><span id="l5.82">             val.timezone != ICAL.Timezone.localTimezone) {</span>
<a href="#l5.83"></a><span id="l5.83">             val = val.convertToZone(ICAL.Timezone.utcTimezone);</span>
<a href="#l5.84"></a><span id="l5.84">         }</span>
<a href="#l5.85"></a><span id="l5.85"> </span>
<a href="#l5.86"></a><span id="l5.86">         this.innerObject.until = val;</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineminus">-    }, this),</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+    }, this); },</span>
<a href="#l5.89"></a><span id="l5.89"> </span>
<a href="#l5.90"></a><span id="l5.90" class="difflineminus">-    get isByCount() this.innerObject.isByCount(),</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+    get isByCount() { return this.innerObject.isByCount(); },</span>
<a href="#l5.92"></a><span id="l5.92"> </span>
<a href="#l5.93"></a><span id="l5.93" class="difflineminus">-    get weekStart() this.innerObject.wkst - 1,</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineminus">-    set weekStart(val) this.innerObject.wkst = val + 1,</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+    get weekStart() { return this.innerObject.wkst - 1; },</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+    set weekStart(val) { this.innerObject.wkst = val + 1; },</span>
<a href="#l5.97"></a><span id="l5.97"> </span>
<a href="#l5.98"></a><span id="l5.98">     getComponent: function(aType, aCount) {</span>
<a href="#l5.99"></a><span id="l5.99">         let values = this.innerObject.getComponent(aType);</span>
<a href="#l5.100"></a><span id="l5.100">         if (aType == &quot;BYDAY&quot;) {</span>
<a href="#l5.101"></a><span id="l5.101">             // BYDAY values are alphanumeric: SU, MO, TU, etc..</span>
<a href="#l5.102"></a><span id="l5.102">             for (let i = 0; i &lt; values.length; i++) {</span>
<a href="#l5.103"></a><span id="l5.103">                 let match = /^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/.exec(values[i]);</span>
<a href="#l5.104"></a><span id="l5.104">                 if (!match) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -725,17 +725,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">               xulColumn.setAttribute(&quot;orient&quot;, otherorient);</span>
<a href="#l6.5"></a><span id="l6.5">               xulColumn.setAttribute(&quot;flex&quot;, &quot;1&quot;);</span>
<a href="#l6.6"></a><span id="l6.6">               xulColumn.setAttribute(&quot;style&quot;, &quot;min-width: 1px; min-height: 1px;&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">               stack.appendChild(xulColumn);</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9">               let numBlocksInserted = 0;</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">               // column count determined by layer with no special span columns</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-              if (layer.every(function (e) !e.specialSpan)) {</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+              if (layer.every(e =&gt; !e.specialSpan)) {</span>
<a href="#l6.14"></a><span id="l6.14">                   columnCount = layer.length;</span>
<a href="#l6.15"></a><span id="l6.15">               }</span>
<a href="#l6.16"></a><span id="l6.16">               spanTotal = 0;</span>
<a href="#l6.17"></a><span id="l6.17"> </span>
<a href="#l6.18"></a><span id="l6.18">               // Each layer contains a list of the columns that</span>
<a href="#l6.19"></a><span id="l6.19">               // need to be created for a span.</span>
<a href="#l6.20"></a><span id="l6.20">               for each (let column in layer) {</span>
<a href="#l6.21"></a><span id="l6.21">                   let innerColumn = createXULElement(&quot;box&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -619,23 +619,23 @@ function setupAttendanceMenu(aMenu, aIte</span>
<a href="#l7.4"></a><span id="l7.4">                 attendee = item.organizer;</span>
<a href="#l7.5"></a><span id="l7.5">             }</span>
<a href="#l7.6"></a><span id="l7.6">         }</span>
<a href="#l7.7"></a><span id="l7.7">         return attendee &amp;&amp; attendee.participationStatus;</span>
<a href="#l7.8"></a><span id="l7.8">     }</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">     goUpdateCommand(&quot;calendar_attendance_command&quot;);</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    let allSingle = aItems.every(function(x) !x.recurrenceId);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    let allSingle = aItems.every(x =&gt; !x.recurrenceId);</span>
<a href="#l7.14"></a><span id="l7.14">     setElementValue(aMenu, allSingle ? &quot;single&quot; : &quot;recurring&quot;, &quot;itemType&quot;);</span>
<a href="#l7.15"></a><span id="l7.15"> </span>
<a href="#l7.16"></a><span id="l7.16">     let firstStatusOccurrences = aItems.length &amp;&amp; getInvStat(aItems[0]);</span>
<a href="#l7.17"></a><span id="l7.17">     let firstStatusParents = aItems.length &amp;&amp; getInvStat(aItems[0].parentItem);</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-    let sameStatusOccurrences = aItems.every(function (x) getInvStat(x) == firstStatusOccurrences);</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-    let sameStatusParents = aItems.every(function (x) getInvStat(x.parentItem) == firstStatusParents)</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+    let sameStatusOccurrences = aItems.every(x =&gt; getInvStat(x) == firstStatusOccurrences);</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+    let sameStatusParents = aItems.every(x =&gt; getInvStat(x.parentItem) == firstStatusParents);</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23">     let occurrenceChildren = aMenu.getElementsByAttribute(&quot;value&quot;, firstStatusOccurrences);</span>
<a href="#l7.24"></a><span id="l7.24">     let parentsChildren = aMenu.getElementsByAttribute(&quot;value&quot;, firstStatusParents);</span>
<a href="#l7.25"></a><span id="l7.25"> </span>
<a href="#l7.26"></a><span id="l7.26">     if (sameStatusOccurrences &amp;&amp; occurrenceChildren[0]) {</span>
<a href="#l7.27"></a><span id="l7.27">         occurrenceChildren[0].setAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l7.28"></a><span id="l7.28">     }</span>
<a href="#l7.29"></a><span id="l7.29"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-unifinder.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-unifinder.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -702,17 +702,17 @@ var unifinderTreeView = {</span>
<a href="#l8.4"></a><span id="l8.4">         }</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6">         // Task categories</span>
<a href="#l8.7"></a><span id="l8.7">         properties = properties.concat(item.getCategories({})</span>
<a href="#l8.8"></a><span id="l8.8">                                            .map(formatStringForCSSRule));</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">         return properties.join(&quot; &quot;);</span>
<a href="#l8.11"></a><span id="l8.11">     },</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    getColumnProperties: function uTV_getColumnProperties(aCol) &quot;&quot;,</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+    getColumnProperties: function uTV_getColumnProperties(aCol) { return &quot;&quot;; },</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15">     isContainer: function uTV_isContainer() {</span>
<a href="#l8.16"></a><span id="l8.16">         return false;</span>
<a href="#l8.17"></a><span id="l8.17">     },</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19">     isContainerOpen: function uTV_isContainerOpen(aRow) {</span>
<a href="#l8.20"></a><span id="l8.20">         return false;</span>
<a href="#l8.21"></a><span id="l8.21">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/calendar-views.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -212,17 +212,17 @@ function switchToView(aViewType) {</span>
<a href="#l9.4"></a><span id="l9.4">      &quot;appmenu_calendar-go-menu-previous&quot;].forEach(function(x) {</span>
<a href="#l9.5"></a><span id="l9.5">             setupViewNode(x, &quot;label&quot;);</span>
<a href="#l9.6"></a><span id="l9.6">             setupViewNode(x, &quot;accesskey&quot;)</span>
<a href="#l9.7"></a><span id="l9.7">      });</span>
<a href="#l9.8"></a><span id="l9.8"> </span>
<a href="#l9.9"></a><span id="l9.9">     // Set up the labels for the view navigation</span>
<a href="#l9.10"></a><span id="l9.10">     [&quot;previous-view-button&quot;,</span>
<a href="#l9.11"></a><span id="l9.11">      &quot;today-view-button&quot;,</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-     &quot;next-view-button&quot;].forEach(function(x) setupViewNode(x, &quot;tooltiptext&quot;));</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+     &quot;next-view-button&quot;].forEach(x =&gt; setupViewNode(x, &quot;tooltiptext&quot;));</span>
<a href="#l9.14"></a><span id="l9.14"> </span>
<a href="#l9.15"></a><span id="l9.15">     try {</span>
<a href="#l9.16"></a><span id="l9.16">         selectedDay = viewDeck.selectedPanel.selectedDay;</span>
<a href="#l9.17"></a><span id="l9.17">         currentSelection = viewDeck.selectedPanel.getSelectedItems({});</span>
<a href="#l9.18"></a><span id="l9.18">     } catch (ex) {</span>
<a href="#l9.19"></a><span id="l9.19">         // This dies if no view has even been chosen this session, but that's</span>
<a href="#l9.20"></a><span id="l9.20">         // ok because we'll just use now() below.</span>
<a href="#l9.21"></a><span id="l9.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-creation.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-creation.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -16,17 +16,17 @@ function openLocalCalendar() {</span>
<a href="#l10.4"></a><span id="l10.4">     fp.appendFilters(nsIFilePicker.filterAll);</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">     if (fp.show() != nsIFilePicker.returnOK) {</span>
<a href="#l10.7"></a><span id="l10.7">         return;</span>
<a href="#l10.8"></a><span id="l10.8">     }</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">     let calMgr = getCalendarManager();</span>
<a href="#l10.11"></a><span id="l10.11">     let calendars = calMgr.getCalendars({});</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-    if (calendars.some(function(x) x.uri == fp.fileURL)) {</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+    if (calendars.some(x =&gt; x.uri == fp.fileURL)) {</span>
<a href="#l10.14"></a><span id="l10.14">         // The calendar already exists, select it and return.</span>
<a href="#l10.15"></a><span id="l10.15">         document.getElementById(&quot;calendar-list-tree-widget&quot;)</span>
<a href="#l10.16"></a><span id="l10.16">                 .tree.view.selection.select(index);</span>
<a href="#l10.17"></a><span id="l10.17">         return;</span>
<a href="#l10.18"></a><span id="l10.18">     }</span>
<a href="#l10.19"></a><span id="l10.19"> </span>
<a href="#l10.20"></a><span id="l10.20">     let openCalendar = calMgr.createCalendar(&quot;ics&quot;, fp.fileURL);</span>
<a href="#l10.21"></a><span id="l10.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -129,17 +129,17 @@ function updateReminderDetails() {</span>
<a href="#l11.4"></a><span id="l11.4">     let calendar = getCurrentCalendar();</span>
<a href="#l11.5"></a><span id="l11.5">     let actionValues = calendar.getProperty(&quot;capabilities.alarms.actionValues&quot;) || [&quot;DISPLAY&quot;];</span>
<a href="#l11.6"></a><span id="l11.6">     let actionMap = {};</span>
<a href="#l11.7"></a><span id="l11.7">     for each (var action in actionValues) {</span>
<a href="#l11.8"></a><span id="l11.8">         actionMap[action] = true;</span>
<a href="#l11.9"></a><span id="l11.9">     }</span>
<a href="#l11.10"></a><span id="l11.10"> </span>
<a href="#l11.11"></a><span id="l11.11">     // Filter out any unsupported action types.</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    reminders = reminders.filter(function(x) x.action in actionMap);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    reminders = reminders.filter(x =&gt; x.action in actionMap);</span>
<a href="#l11.14"></a><span id="l11.14"> </span>
<a href="#l11.15"></a><span id="l11.15">     if (reminderList.value == &quot;custom&quot;) {</span>
<a href="#l11.16"></a><span id="l11.16">         // Depending on how many alarms we have, show either the &quot;Multiple Alarms&quot;</span>
<a href="#l11.17"></a><span id="l11.17">         // label or the single reminder label.</span>
<a href="#l11.18"></a><span id="l11.18">         setElementValue(reminderMultipleLabel,</span>
<a href="#l11.19"></a><span id="l11.19">                         reminders.length &lt; 2 &amp;&amp; &quot;true&quot;,</span>
<a href="#l11.20"></a><span id="l11.20">                         &quot;hidden&quot;);</span>
<a href="#l11.21"></a><span id="l11.21">         setElementValue(reminderSingleLabel,</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineat">@@ -270,32 +270,32 @@ function saveReminder(item) {</span>
<a href="#l11.23"></a><span id="l11.23">         let reminders;</span>
<a href="#l11.24"></a><span id="l11.24"> </span>
<a href="#l11.25"></a><span id="l11.25">         if (menuitem.reminders) {</span>
<a href="#l11.26"></a><span id="l11.26">             // Custom reminder entries carry their own reminder object with</span>
<a href="#l11.27"></a><span id="l11.27">             // them. Make sure to clone in case these are the original item's</span>
<a href="#l11.28"></a><span id="l11.28">             // reminders.</span>
<a href="#l11.29"></a><span id="l11.29"> </span>
<a href="#l11.30"></a><span id="l11.30">             // XXX do we need to clone here?</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-            reminders = menuitem.reminders.map(function(x) x.clone());</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+            reminders = menuitem.reminders.map(x =&gt; x.clone());</span>
<a href="#l11.33"></a><span id="l11.33">         } else {</span>
<a href="#l11.34"></a><span id="l11.34">             // Pre-defined entries specify the necessary information</span>
<a href="#l11.35"></a><span id="l11.35">             // as attributes attached to the menuitem elements.</span>
<a href="#l11.36"></a><span id="l11.36">             reminders = [createReminderFromMenuitem(menuitem)];</span>
<a href="#l11.37"></a><span id="l11.37">         }</span>
<a href="#l11.38"></a><span id="l11.38"> </span>
<a href="#l11.39"></a><span id="l11.39">         let alarmCaps = item.calendar.getProperty(&quot;capabilities.alarms.actionValues&quot;) ||</span>
<a href="#l11.40"></a><span id="l11.40">                         [&quot;DISPLAY&quot;];</span>
<a href="#l11.41"></a><span id="l11.41">         let alarmActions = {};</span>
<a href="#l11.42"></a><span id="l11.42">         for each (let action in alarmCaps) {</span>
<a href="#l11.43"></a><span id="l11.43">             alarmActions[action] = true;</span>
<a href="#l11.44"></a><span id="l11.44">         }</span>
<a href="#l11.45"></a><span id="l11.45"> </span>
<a href="#l11.46"></a><span id="l11.46">         // Make sure only alarms are saved that work in the given calendar.</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-        reminders.filter(function(x) x.action in alarmActions)</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+        reminders.filter(x =&gt; x.action in alarmActions)</span>
<a href="#l11.49"></a><span id="l11.49">                  .forEach(item.addAlarm, item);</span>
<a href="#l11.50"></a><span id="l11.50">     }</span>
<a href="#l11.51"></a><span id="l11.51"> </span>
<a href="#l11.52"></a><span id="l11.52">     // Compare alarms to see if something changed.</span>
<a href="#l11.53"></a><span id="l11.53">     for each (let alarm in item.getAlarms({})) {</span>
<a href="#l11.54"></a><span id="l11.54">         let ics = alarm.icalString;</span>
<a href="#l11.55"></a><span id="l11.55">         if (ics in oldAlarmMap) {</span>
<a href="#l11.56"></a><span id="l11.56">             // The new alarm is also in the old set, remember this</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineat">@@ -417,31 +417,31 @@ function commonUpdateReminder(aSuppressD</span>
<a href="#l11.58"></a><span id="l11.58"> </span>
<a href="#l11.59"></a><span id="l11.59">         let menuitem = reminderList.selectedItem;</span>
<a href="#l11.60"></a><span id="l11.60">         if (menuitem.value != 'none') {</span>
<a href="#l11.61"></a><span id="l11.61">             // In case a reminder is selected, retrieve the array of alarms from</span>
<a href="#l11.62"></a><span id="l11.62">             // it, or create one from the currently selected menuitem.</span>
<a href="#l11.63"></a><span id="l11.63">             let reminders = menuitem.reminders || [createReminderFromMenuitem(menuitem)];</span>
<a href="#l11.64"></a><span id="l11.64"> </span>
<a href="#l11.65"></a><span id="l11.65">             // If a reminder is related to the entry date...</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-            if (reminders.some(function(x) x.related == x.ALARM_RELATED_START)) {</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+            if (reminders.some(x =&gt; x.related == x.ALARM_RELATED_START)) {</span>
<a href="#l11.68"></a><span id="l11.68">                 // ...automatically check 'has entrydate'.</span>
<a href="#l11.69"></a><span id="l11.69">                 if (!getElementValue(&quot;todo-has-entrydate&quot;, &quot;checked&quot;)) {</span>
<a href="#l11.70"></a><span id="l11.70">                     setElementValue(&quot;todo-has-entrydate&quot;, &quot;true&quot;, &quot;checked&quot;);</span>
<a href="#l11.71"></a><span id="l11.71"> </span>
<a href="#l11.72"></a><span id="l11.72">                     // Make sure gStartTime is properly initialized</span>
<a href="#l11.73"></a><span id="l11.73">                     updateEntryDate();</span>
<a href="#l11.74"></a><span id="l11.74">                 }</span>
<a href="#l11.75"></a><span id="l11.75"> </span>
<a href="#l11.76"></a><span id="l11.76">                 // Disable the checkbox to indicate that we need the entry-date.</span>
<a href="#l11.77"></a><span id="l11.77">                 disableElementWithLock(&quot;todo-has-entrydate&quot;, &quot;reminder-lock&quot;);</span>
<a href="#l11.78"></a><span id="l11.78">             }</span>
<a href="#l11.79"></a><span id="l11.79"> </span>
<a href="#l11.80"></a><span id="l11.80">             // If a reminder is related to the due date...</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineminus">-            if (reminders.some(function(x) x.related == x.ALARM_RELATED_END)) {</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineplus">+            if (reminders.some(x =&gt; x.related == x.ALARM_RELATED_END)) {</span>
<a href="#l11.83"></a><span id="l11.83">                 // ...automatically check 'has duedate'.</span>
<a href="#l11.84"></a><span id="l11.84">                 if (!getElementValue(&quot;todo-has-duedate&quot;, &quot;checked&quot;)) {</span>
<a href="#l11.85"></a><span id="l11.85">                     setElementValue(&quot;todo-has-duedate&quot;, &quot;true&quot;, &quot;checked&quot;);</span>
<a href="#l11.86"></a><span id="l11.86"> </span>
<a href="#l11.87"></a><span id="l11.87">                     // Make sure gStartTime is properly initialized</span>
<a href="#l11.88"></a><span id="l11.88">                     updateDueDate();</span>
<a href="#l11.89"></a><span id="l11.89">                 }</span>
<a href="#l11.90"></a><span id="l11.90"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -95,17 +95,17 @@ function initializeControls(rule) {</span>
<a href="#l12.4"></a><span id="l12.4">             }</span>
<a href="#l12.5"></a><span id="l12.5">             document.getElementById(&quot;yearly-group&quot;).selectedIndex = 0;</span>
<a href="#l12.6"></a><span id="l12.6">             setElementValue(&quot;yearly-days&quot;, aByMonthDay);</span>
<a href="#l12.7"></a><span id="l12.7">         }</span>
<a href="#l12.8"></a><span id="l12.8">     }</span>
<a href="#l12.9"></a><span id="l12.9"> </span>
<a href="#l12.10"></a><span id="l12.10">     function everyWeekDay(aByDay) {</span>
<a href="#l12.11"></a><span id="l12.11">         // Checks if aByDay contains only values from 1 to 7 with any order.</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        let mask = aByDay.reduce(function(v, c) v | (1 &lt;&lt; c), 1);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+        let mask = aByDay.reduce((v, c) =&gt; v | (1 &lt;&lt; c), 1);</span>
<a href="#l12.14"></a><span id="l12.14">         return aByDay.length == 7 &amp;&amp; mask == Math.pow(2, 8) - 1;</span>
<a href="#l12.15"></a><span id="l12.15">     }</span>
<a href="#l12.16"></a><span id="l12.16"> </span>
<a href="#l12.17"></a><span id="l12.17">     switch (rule.type) {</span>
<a href="#l12.18"></a><span id="l12.18">         case &quot;DAILY&quot;:</span>
<a href="#l12.19"></a><span id="l12.19">             document.getElementById(&quot;period-list&quot;).selectedIndex = 0;</span>
<a href="#l12.20"></a><span id="l12.20">             setElementValue(&quot;daily-days&quot;, rule.interval);</span>
<a href="#l12.21"></a><span id="l12.21">             break;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-reminder.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-reminder.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -12,17 +12,17 @@ let allowedActionsMap = {};</span>
<a href="#l13.4"></a><span id="l13.4"> /**</span>
<a href="#l13.5"></a><span id="l13.5">  * Sets up the reminder dialog.</span>
<a href="#l13.6"></a><span id="l13.6">  */</span>
<a href="#l13.7"></a><span id="l13.7"> function onLoad() {</span>
<a href="#l13.8"></a><span id="l13.8">     let calendar = window.arguments[0].calendar;</span>
<a href="#l13.9"></a><span id="l13.9"> </span>
<a href="#l13.10"></a><span id="l13.10">     // Make sure the origin menulist uses the right labels, depending on if the</span>
<a href="#l13.11"></a><span id="l13.11">     // dialog is showing an event or task.</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-    function _sn(x) cal.calGetString(&quot;calendar-alarms&quot;, getItemBundleStringName(x));</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    function _sn(x) { return cal.calGetString(&quot;calendar-alarms&quot;, getItemBundleStringName(x)); }</span>
<a href="#l13.14"></a><span id="l13.14"> </span>
<a href="#l13.15"></a><span id="l13.15">     setElementValue(&quot;reminder-before-start-menuitem&quot;,</span>
<a href="#l13.16"></a><span id="l13.16">                     _sn(&quot;reminderCustomOriginBeginBefore&quot;),</span>
<a href="#l13.17"></a><span id="l13.17">                     &quot;label&quot;);</span>
<a href="#l13.18"></a><span id="l13.18"> </span>
<a href="#l13.19"></a><span id="l13.19">     setElementValue(&quot;reminder-after-start-menuitem&quot;,</span>
<a href="#l13.20"></a><span id="l13.20">                     _sn(&quot;reminderCustomOriginBeginAfter&quot;),</span>
<a href="#l13.21"></a><span id="l13.21">                     &quot;label&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-providerUninstall-dialog.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -4,17 +4,17 @@</span>
<a href="#l14.4"></a><span id="l14.4"> </span>
<a href="#l14.5"></a><span id="l14.5"> Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7"> function onLoad() {</span>
<a href="#l14.8"></a><span id="l14.8">     let extension = window.arguments[0].extension;</span>
<a href="#l14.9"></a><span id="l14.9">     document.getElementById(&quot;provider-name-label&quot;).value = extension.name;</span>
<a href="#l14.10"></a><span id="l14.10"> </span>
<a href="#l14.11"></a><span id="l14.11">     let calendars = cal.getCalendarManager().getCalendars({})</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-                       .filter(function(x) x.providerID == extension.id);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+                       .filter(x =&gt; x.providerID == extension.id);</span>
<a href="#l14.14"></a><span id="l14.14"> </span>
<a href="#l14.15"></a><span id="l14.15">     document.getElementById(&quot;calendar-list-tree&quot;).calendars = calendars;</span>
<a href="#l14.16"></a><span id="l14.16"> }</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18"> function onAccept() {</span>
<a href="#l14.19"></a><span id="l14.19">     // Tell our caller that the extension should be uninstalled.</span>
<a href="#l14.20"></a><span id="l14.20">     let args = window.arguments[0];</span>
<a href="#l14.21"></a><span id="l14.21">     args.shouldUninstall = true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-list-tree.xml</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-list-tree.xml</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -373,17 +373,17 @@</span>
<a href="#l15.4"></a><span id="l15.4">           this.mCompositeCalendar = val;</span>
<a href="#l15.5"></a><span id="l15.5">           this.mCompositeCalendar.addObserver(this.compositeObserver);</span>
<a href="#l15.6"></a><span id="l15.6">           return val;</span>
<a href="#l15.7"></a><span id="l15.7">         ]]&gt;&lt;/setter&gt;</span>
<a href="#l15.8"></a><span id="l15.8">       &lt;/property&gt;</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">       &lt;property name=&quot;sortOrder&quot;</span>
<a href="#l15.11"></a><span id="l15.11">                 readonly=&quot;true&quot;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-                onget=&quot;return this.mCalendarList.map(function(x) x.id);&quot;/&gt;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+                onget=&quot;return this.mCalendarList.map(x =&gt; x.id);&quot;/&gt;</span>
<a href="#l15.14"></a><span id="l15.14">       &lt;property name=&quot;selectedCalendars&quot;</span>
<a href="#l15.15"></a><span id="l15.15">                 readonly=&quot;true&quot;</span>
<a href="#l15.16"></a><span id="l15.16">                 onget=&quot;return this.compositeCalendar.getCalendars({});&quot;/&gt;</span>
<a href="#l15.17"></a><span id="l15.17">       &lt;property name=&quot;allowDrag&quot;</span>
<a href="#l15.18"></a><span id="l15.18">                 onget=&quot;return (this.getAttribute('allowdrag') == 'true');&quot;</span>
<a href="#l15.19"></a><span id="l15.19">                 onset=&quot;return setBooleanAttribute(this, 'allowdrag', val);&quot;/&gt;</span>
<a href="#l15.20"></a><span id="l15.20">       &lt;property name=&quot;writable&quot;</span>
<a href="#l15.21"></a><span id="l15.21">                 onget=&quot;return (this.getAttribute('writable') == 'true');&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -52,17 +52,17 @@</span>
<a href="#l16.4"></a><span id="l16.4">             let categoryListbox = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;categories-listbox&quot;);</span>
<a href="#l16.5"></a><span id="l16.5">             if (this.maxCount == 1) {</span>
<a href="#l16.6"></a><span id="l16.6">                 let selectedItem = categoryListbox.selectedItem;</span>
<a href="#l16.7"></a><span id="l16.7">                 return selectedItem ? [selectedItem.getAttribute(&quot;value&quot;)] : [];</span>
<a href="#l16.8"></a><span id="l16.8">             } else {</span>
<a href="#l16.9"></a><span id="l16.9">                 let checkedNodes = categoryListbox.getElementsByAttribute(&quot;checked&quot;, &quot;true&quot;);</span>
<a href="#l16.10"></a><span id="l16.10">                 let sliceEnd = this.maxCount &gt; 0 ? this.maxCount : checkedNodes.length;</span>
<a href="#l16.11"></a><span id="l16.11">                 return Array.slice(checkedNodes, 0, sliceEnd)</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-                            .map(function(x) x.getAttribute(&quot;value&quot;));</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+                            .map(x =&gt; x.getAttribute(&quot;value&quot;));</span>
<a href="#l16.14"></a><span id="l16.14">             }</span>
<a href="#l16.15"></a><span id="l16.15">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l16.16"></a><span id="l16.16">       &lt;/property&gt;</span>
<a href="#l16.17"></a><span id="l16.17">       &lt;property name=&quot;maxCount&quot;&gt;</span>
<a href="#l16.18"></a><span id="l16.18">         &lt;getter&gt;&lt;![CDATA[</span>
<a href="#l16.19"></a><span id="l16.19">             return this._maxCount;</span>
<a href="#l16.20"></a><span id="l16.20">         ]]&gt;&lt;/getter&gt;</span>
<a href="#l16.21"></a><span id="l16.21">         &lt;setter&gt;&lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/modules/calExtract.jsm</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/modules/calExtract.jsm</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -778,44 +778,44 @@ Extractor.prototype = {</span>
<a href="#l17.4"></a><span id="l17.4"> </span>
<a href="#l17.5"></a><span id="l17.5">     /**</span>
<a href="#l17.6"></a><span id="l17.6">     * Guesses start time from list of guessed datetimes</span>
<a href="#l17.7"></a><span id="l17.7">     *</span>
<a href="#l17.8"></a><span id="l17.8">     * @param isTask    whether start time should be guessed for task or event</span>
<a href="#l17.9"></a><span id="l17.9">     * @return          datetime object for start time</span>
<a href="#l17.10"></a><span id="l17.10">     */</span>
<a href="#l17.11"></a><span id="l17.11">     guessStart: function guessStart(isTask) {</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-        let startTimes = this.collected.filter(function(val) val.relation == &quot;start&quot;);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+        let startTimes = this.collected.filter(val =&gt; val.relation == &quot;start&quot;);</span>
<a href="#l17.14"></a><span id="l17.14">         if (startTimes.length == 0) {</span>
<a href="#l17.15"></a><span id="l17.15">             return {};</span>
<a href="#l17.16"></a><span id="l17.16">         }</span>
<a href="#l17.17"></a><span id="l17.17"> </span>
<a href="#l17.18"></a><span id="l17.18">         for (let val in startTimes) {</span>
<a href="#l17.19"></a><span id="l17.19">             cal.LOG(&quot;[calExtract] Start: &quot; + JSON.stringify(startTimes[val]));</span>
<a href="#l17.20"></a><span id="l17.20">         }</span>
<a href="#l17.21"></a><span id="l17.21"> </span>
<a href="#l17.22"></a><span id="l17.22">         let guess = {};</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">-        let wDayInit = startTimes.filter(function(val) val.day != null &amp;&amp; val.start === undefined);</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineplus">+        let wDayInit = startTimes.filter(val =&gt; val.day != null &amp;&amp; val.start === undefined);</span>
<a href="#l17.25"></a><span id="l17.25"> </span>
<a href="#l17.26"></a><span id="l17.26">         // with tasks we don't try to guess start but assume email date</span>
<a href="#l17.27"></a><span id="l17.27">         if (isTask) {</span>
<a href="#l17.28"></a><span id="l17.28">             guess.year = wDayInit[0].year;</span>
<a href="#l17.29"></a><span id="l17.29">             guess.month = wDayInit[0].month;</span>
<a href="#l17.30"></a><span id="l17.30">             guess.day = wDayInit[0].day;</span>
<a href="#l17.31"></a><span id="l17.31">             guess.hour = wDayInit[0].hour;</span>
<a href="#l17.32"></a><span id="l17.32">             guess.minute = wDayInit[0].minute;</span>
<a href="#l17.33"></a><span id="l17.33">             return guess;</span>
<a href="#l17.34"></a><span id="l17.34">         }</span>
<a href="#l17.35"></a><span id="l17.35"> </span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-        let wDay = startTimes.filter(function(val) val.day != null &amp;&amp; val.start !== undefined);</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">-        let wDayNA = wDay.filter(function(val) val.ambiguous === undefined);</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineplus">+        let wDay = startTimes.filter(val =&gt; val.day != null &amp;&amp; val.start !== undefined);</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineplus">+        let wDayNA = wDay.filter(val =&gt; val.ambiguous === undefined);</span>
<a href="#l17.40"></a><span id="l17.40"> </span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-        let wMinute = startTimes.filter(function(val) val.minute != null &amp;&amp; val.start !== undefined);</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-        let wMinuteNA = wMinute.filter(function(val) val.ambiguous === undefined);</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">-        let wMinuteInit = startTimes.filter(function(val) val.minute != null &amp;&amp; val.start === undefined);</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineplus">+        let wMinute = startTimes.filter(val =&gt; val.minute != null &amp;&amp; val.start !== undefined);</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineplus">+        let wMinuteNA = wMinute.filter(val =&gt; val.ambiguous === undefined);</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineplus">+        let wMinuteInit = startTimes.filter(val =&gt; val.minute != null &amp;&amp; val.start === undefined);</span>
<a href="#l17.47"></a><span id="l17.47"> </span>
<a href="#l17.48"></a><span id="l17.48">         if (wMinuteNA.length != 0) {</span>
<a href="#l17.49"></a><span id="l17.49">             guess.hour = wMinuteNA[0].hour;</span>
<a href="#l17.50"></a><span id="l17.50">             guess.minute = wMinuteNA[0].minute;</span>
<a href="#l17.51"></a><span id="l17.51">         } else if (wMinute.length != 0) {</span>
<a href="#l17.52"></a><span id="l17.52">             guess.hour = wMinute[0].hour;</span>
<a href="#l17.53"></a><span id="l17.53">             guess.minute = wMinute[0].minute;</span>
<a href="#l17.54"></a><span id="l17.54">         }</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineat">@@ -855,29 +855,29 @@ Extractor.prototype = {</span>
<a href="#l17.56"></a><span id="l17.56">     * Guesses end time from list of guessed datetimes relative to start time</span>
<a href="#l17.57"></a><span id="l17.57">     *</span>
<a href="#l17.58"></a><span id="l17.58">     * @param start     start time to consider when guessing</span>
<a href="#l17.59"></a><span id="l17.59">     * @param isTask    whether start time should be guessed for task or event</span>
<a href="#l17.60"></a><span id="l17.60">     * @return          datetime object for end time</span>
<a href="#l17.61"></a><span id="l17.61">     */</span>
<a href="#l17.62"></a><span id="l17.62">     guessEnd: function guessEnd(start, isTask) {</span>
<a href="#l17.63"></a><span id="l17.63">         let guess = {};</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-        let endTimes = this.collected.filter(function(val) val.relation == &quot;end&quot;);</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-        let durations = this.collected.filter(function(val) val.relation == &quot;duration&quot;);</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineplus">+        let endTimes = this.collected.filter(val =&gt; val.relation == &quot;end&quot;);</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineplus">+        let durations = this.collected.filter(val =&gt; val.relation == &quot;duration&quot;);</span>
<a href="#l17.68"></a><span id="l17.68">         if (endTimes.length == 0 &amp;&amp; durations.length == 0) {</span>
<a href="#l17.69"></a><span id="l17.69">             return {};</span>
<a href="#l17.70"></a><span id="l17.70">         } else {</span>
<a href="#l17.71"></a><span id="l17.71">             for (val in endTimes) {</span>
<a href="#l17.72"></a><span id="l17.72">                 cal.LOG(&quot;[calExtract] End: &quot; + JSON.stringify(endTimes[val]));</span>
<a href="#l17.73"></a><span id="l17.73">             }</span>
<a href="#l17.74"></a><span id="l17.74"> </span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-            let wDay = endTimes.filter(function(val) val.day != null);</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-            let wDayNA = wDay.filter(function(val) val.ambiguous === undefined);</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-            let wMinute = endTimes.filter(function(val) val.minute != null);</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-            let wMinuteNA = wMinute.filter(function(val) val.ambiguous === undefined);</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineplus">+            let wDay = endTimes.filter(val =&gt; val.day != null);</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineplus">+            let wDayNA = wDay.filter(val =&gt; val.ambiguous === undefined);</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineplus">+            let wMinute = endTimes.filter(val =&gt; val.minute != null);</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineplus">+            let wMinuteNA = wMinute.filter(val =&gt; val.ambiguous === undefined);</span>
<a href="#l17.83"></a><span id="l17.83"> </span>
<a href="#l17.84"></a><span id="l17.84">             // first set non-ambiguous dates</span>
<a href="#l17.85"></a><span id="l17.85">             let pos = isTask == true ? 0 : wDayNA.length - 1;</span>
<a href="#l17.86"></a><span id="l17.86">             if (wDayNA.length != 0) {</span>
<a href="#l17.87"></a><span id="l17.87">                 guess.year = wDayNA[pos].year;</span>
<a href="#l17.88"></a><span id="l17.88">                 guess.month = wDayNA[pos].month;</span>
<a href="#l17.89"></a><span id="l17.89">                 guess.day = wDayNA[pos].day;</span>
<a href="#l17.90"></a><span id="l17.90">             // then ambiguous dates</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/base/modules/calItipUtils.jsm</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -805,17 +805,17 @@ cal.itip = {</span>
<a href="#l18.4"></a><span id="l18.4">      * @param aItems        List of items to be contained in the new itipItem</span>
<a href="#l18.5"></a><span id="l18.5">      * @param aProps        List of properties to be different in the new itipItem</span>
<a href="#l18.6"></a><span id="l18.6">      */</span>
<a href="#l18.7"></a><span id="l18.7">     getModifiedItipItem: function cal_getModifiedItipItem(aItipItem, aItems, aProps) {</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9">         let itipItem = Components.classes[&quot;@mozilla.org/calendar/itip-item;1&quot;]</span>
<a href="#l18.10"></a><span id="l18.10">                                  .createInstance(Components.interfaces.calIItipItem);</span>
<a href="#l18.11"></a><span id="l18.11">         let serializedItems = &quot;&quot;;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        (aItems || []).forEach(function(item) serializedItems += cal.getSerializedItem(item));</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+        (aItems || []).forEach(item =&gt; serializedItems += cal.getSerializedItem(item));</span>
<a href="#l18.14"></a><span id="l18.14">         itipItem.init(serializedItems);</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">         let props = aProps || {};</span>
<a href="#l18.17"></a><span id="l18.17">         itipItem.autoResponse = (&quot;autoResponse&quot; in props) ? props.autoResponse : aItipItem.autoResponse;</span>
<a href="#l18.18"></a><span id="l18.18">         itipItem.identity = (&quot;identity&quot; in props) ? props.identity : aItipItem.identity;</span>
<a href="#l18.19"></a><span id="l18.19">         itipItem.isSend = (&quot;isSend&quot; in props) ? props.isSend : aItipItem.isSend;</span>
<a href="#l18.20"></a><span id="l18.20">         itipItem.localStatus = (&quot;localStatus&quot; in props) ? props.localStatus : aItipItem.localStatus;</span>
<a href="#l18.21"></a><span id="l18.21">         itipItem.receivedMethod = (&quot;receivedMethod&quot; in props) ? props.receivedMethod : aItipItem.receivedMethod;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/base/modules/calPrintUtils.jsm</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/base/modules/calPrintUtils.jsm</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -144,17 +144,17 @@ cal.print = {</span>
<a href="#l19.4"></a><span id="l19.4">         // Fill in details of the task</span>
<a href="#l19.5"></a><span id="l19.5">         if (item.isCompleted) {</span>
<a href="#l19.6"></a><span id="l19.6">             taskNode.querySelector(&quot;.task-checkbox&quot;).setAttribute(&quot;checked&quot;, &quot;checked&quot;);</span>
<a href="#l19.7"></a><span id="l19.7">         }</span>
<a href="#l19.8"></a><span id="l19.8"> </span>
<a href="#l19.9"></a><span id="l19.9">         taskNode.querySelector(&quot;.task-title&quot;).textContent = item.title;</span>
<a href="#l19.10"></a><span id="l19.10"> </span>
<a href="#l19.11"></a><span id="l19.11">         let collator = cal.createLocaleCollator();</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-        cal.binaryInsertNode(taskContainer, taskNode, item, function(a, b) collator.compareString(0, a, b), function(node) node.item.title);</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+        cal.binaryInsertNode(taskContainer, taskNode, item, (a, b) =&gt; collator.compareString(0, a, b), node =&gt; node.item.title);</span>
<a href="#l19.14"></a><span id="l19.14">     },</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16">     /**</span>
<a href="#l19.17"></a><span id="l19.17">      * Get time interval string for the given item. Returns an empty string for all-day items.</span>
<a href="#l19.18"></a><span id="l19.18">      *</span>
<a href="#l19.19"></a><span id="l19.19">      * @param aItem     The item providing the interval</span>
<a href="#l19.20"></a><span id="l19.20">      * @return          The string describing the interval</span>
<a href="#l19.21"></a><span id="l19.21">      */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/base/modules/ical.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/base/modules/ical.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -14,17 +14,17 @@</span>
<a href="#l20.4"></a><span id="l20.4"> </span>
<a href="#l20.5"></a><span id="l20.5"> var EXPORTED_SYMBOLS = [&quot;ICAL&quot;, &quot;unwrap&quot;, &quot;unwrapSetter&quot;, &quot;unwrapSingle&quot;, &quot;wrapGetter&quot;];</span>
<a href="#l20.6"></a><span id="l20.6"> </span>
<a href="#l20.7"></a><span id="l20.7"> function wrapGetter(type, val) {</span>
<a href="#l20.8"></a><span id="l20.8">     return val ? new type(val) : null;</span>
<a href="#l20.9"></a><span id="l20.9"> }</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11"> function unwrap(type, innerFunc) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    return function(val) unwrapSetter.call(this, type, val, innerFunc);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    return function(val) { return unwrapSetter.call(this, type, val, innerFunc); };</span>
<a href="#l20.14"></a><span id="l20.14"> }</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16"> function unwrapSetter(type, val, innerFunc, thisObj) {</span>
<a href="#l20.17"></a><span id="l20.17">     return innerFunc.call(thisObj || this, unwrapSingle(type, val));</span>
<a href="#l20.18"></a><span id="l20.18"> }</span>
<a href="#l20.19"></a><span id="l20.19"> </span>
<a href="#l20.20"></a><span id="l20.20"> function unwrapSingle(type, val) {</span>
<a href="#l20.21"></a><span id="l20.21">     if (!val || !val.wrappedJSObject) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/base/src/calCachedCalendar.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/base/src/calCachedCalendar.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -427,17 +427,17 @@ calCachedCalendar.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">                                     // Item has already been deleted from the server, no need to change anything.</span>
<a href="#l21.5"></a><span id="l21.5">                                 }</span>
<a href="#l21.6"></a><span id="l21.6">                                 break;</span>
<a href="#l21.7"></a><span id="l21.7">                         }</span>
<a href="#l21.8"></a><span id="l21.8">                     },</span>
<a href="#l21.9"></a><span id="l21.9">                     function completed() {</span>
<a href="#l21.10"></a><span id="l21.10">                         this_.offlineCachedItems = {};</span>
<a href="#l21.11"></a><span id="l21.11">                         this_.offlineCachedItemFlags = {};</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-                        this_.playbackOfflineItems(function() emptyQueue(aStatus));</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+                        this_.playbackOfflineItems(() =&gt; emptyQueue(aStatus));</span>
<a href="#l21.14"></a><span id="l21.14">                     });</span>
<a href="#l21.15"></a><span id="l21.15">                 } else {</span>
<a href="#l21.16"></a><span id="l21.16">                     this_.playbackOfflineItems(function() {this_.mCachedObserver.onLoad(this_.mCachedCalendar);});</span>
<a href="#l21.17"></a><span id="l21.17">                     emptyQueue(aStatus);</span>
<a href="#l21.18"></a><span id="l21.18">                 }</span>
<a href="#l21.19"></a><span id="l21.19">             }</span>
<a href="#l21.20"></a><span id="l21.20">         };</span>
<a href="#l21.21"></a><span id="l21.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -31,19 +31,19 @@ calCalendarManager.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l22.5"></a><span id="l22.5">         classID: calCalendarManagerClassID,</span>
<a href="#l22.6"></a><span id="l22.6">         contractID: &quot;@mozilla.org/calendar/manager;1&quot;,</span>
<a href="#l22.7"></a><span id="l22.7">         classDescription: &quot;Calendar Manager&quot;,</span>
<a href="#l22.8"></a><span id="l22.8">         interfaces: calCalendarManagerInterfaces,</span>
<a href="#l22.9"></a><span id="l22.9">         flags: Components.interfaces.nsIClassInfo.SINGLETON</span>
<a href="#l22.10"></a><span id="l22.10">     }),</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    get networkCalendarCount() this.mNetworkCalendarCount,</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-    get readOnlyCalendarCount() this.mReadonlyCalendarCount,</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-    get calendarCount() this.mCalendarCount,</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineplus">+    get networkCalendarCount() { return this.mNetworkCalendarCount; },</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineplus">+    get readOnlyCalendarCount() { return this.mReadonlyCalendarCount; },</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineplus">+    get calendarCount() { return this.mCalendarCount; },</span>
<a href="#l22.18"></a><span id="l22.18"> </span>
<a href="#l22.19"></a><span id="l22.19">     // calIStartupService:</span>
<a href="#l22.20"></a><span id="l22.20">     startup: function ccm_startup(aCompleteListener) {</span>
<a href="#l22.21"></a><span id="l22.21">         AddonManager.addAddonListener(gCalendarManagerAddonListener);</span>
<a href="#l22.22"></a><span id="l22.22">         this.checkAndMigrateDB();</span>
<a href="#l22.23"></a><span id="l22.23">         this.mCache = null;</span>
<a href="#l22.24"></a><span id="l22.24">         this.mCalObservers = null;</span>
<a href="#l22.25"></a><span id="l22.25">         this.mRefreshTimer = {};</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineat">@@ -753,24 +753,24 @@ calCalendarManager.prototype = {</span>
<a href="#l22.27"></a><span id="l22.27">     deleteCalendarPref_: function(calendar, name) {</span>
<a href="#l22.28"></a><span id="l22.28">         cal.ASSERT(calendar, &quot;Invalid Calendar!&quot;);</span>
<a href="#l22.29"></a><span id="l22.29">         cal.ASSERT(calendar.id !== null, &quot;Calendar id needs to be set!&quot;);</span>
<a href="#l22.30"></a><span id="l22.30">         cal.ASSERT(name &amp;&amp; name.length &gt; 0, &quot;Pref Name must be non-empty!&quot;);</span>
<a href="#l22.31"></a><span id="l22.31">         Services.prefs.deleteBranch(getPrefBranchFor(calendar.id) + name);</span>
<a href="#l22.32"></a><span id="l22.32">     },</span>
<a href="#l22.33"></a><span id="l22.33"> </span>
<a href="#l22.34"></a><span id="l22.34">     mObservers: null,</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineminus">-    addObserver: function(aObserver) this.mObservers.add(aObserver),</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineminus">-    removeObserver: function(aObserver) this.mObservers.remove(aObserver),</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineminus">-    notifyObservers: function(functionName, args) this.mObservers.notify(functionName, args),</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineplus">+    addObserver: function(aObserver) { return this.mObservers.add(aObserver); },</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineplus">+    removeObserver: function(aObserver) { return this.mObservers.remove(aObserver); },</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineplus">+    notifyObservers: function(functionName, args) { return this.mObservers.notify(functionName, args); },</span>
<a href="#l22.41"></a><span id="l22.41"> </span>
<a href="#l22.42"></a><span id="l22.42">     mCalendarObservers: null,</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineminus">-    addCalendarObserver: function(aObserver) this.mCalendarObservers.add(aObserver),</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineminus">-    removeCalendarObserver: function(aObserver) this.mCalendarObservers.remove(aObserver),</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineminus">-    notifyCalendarObservers: function(functionName, args) this.mCalendarObservers.notify(functionName, args)</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineplus">+    addCalendarObserver: function(aObserver) { return this.mCalendarObservers.add(aObserver); },</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineplus">+    removeCalendarObserver: function(aObserver) { return this.mCalendarObservers.remove(aObserver); },</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineplus">+    notifyCalendarObservers: function(functionName, args) { return this.mCalendarObservers.notify(functionName, args); }</span>
<a href="#l22.49"></a><span id="l22.49"> };</span>
<a href="#l22.50"></a><span id="l22.50"> </span>
<a href="#l22.51"></a><span id="l22.51"> function equalMessage(msg1, msg2) {</span>
<a href="#l22.52"></a><span id="l22.52">     if (msg1.GetString(0) == msg2.GetString(0) &amp;&amp;</span>
<a href="#l22.53"></a><span id="l22.53">         msg1.GetString(1) == msg2.GetString(1) &amp;&amp;</span>
<a href="#l22.54"></a><span id="l22.54">         msg1.GetString(2) == msg2.GetString(2)) {</span>
<a href="#l22.55"></a><span id="l22.55">         return true;</span>
<a href="#l22.56"></a><span id="l22.56">     }</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineat">@@ -791,22 +791,22 @@ calMgrCalendarObserver.prototype = {</span>
<a href="#l22.58"></a><span id="l22.58">     calMgr: null,</span>
<a href="#l22.59"></a><span id="l22.59"> </span>
<a href="#l22.60"></a><span id="l22.60">     QueryInterface: XPCOMUtils.generateQI([</span>
<a href="#l22.61"></a><span id="l22.61">         Components.interfaces.nsIWindowMediatorListener,</span>
<a href="#l22.62"></a><span id="l22.62">         Components.interfaces.calIObserver</span>
<a href="#l22.63"></a><span id="l22.63">     ]),</span>
<a href="#l22.64"></a><span id="l22.64"> </span>
<a href="#l22.65"></a><span id="l22.65">     // calIObserver:</span>
<a href="#l22.66"></a><span id="l22.66" class="difflineminus">-    onStartBatch: function() this.calMgr.notifyCalendarObservers(&quot;onStartBatch&quot;, arguments),</span>
<a href="#l22.67"></a><span id="l22.67" class="difflineminus">-    onEndBatch: function() this.calMgr.notifyCalendarObservers(&quot;onEndBatch&quot;, arguments),</span>
<a href="#l22.68"></a><span id="l22.68" class="difflineminus">-    onLoad: function(calendar) this.calMgr.notifyCalendarObservers(&quot;onLoad&quot;, arguments),</span>
<a href="#l22.69"></a><span id="l22.69" class="difflineminus">-    onAddItem: function(aItem) this.calMgr.notifyCalendarObservers(&quot;onAddItem&quot;, arguments),</span>
<a href="#l22.70"></a><span id="l22.70" class="difflineminus">-    onModifyItem: function(aNewItem, aOldItem) this.calMgr.notifyCalendarObservers(&quot;onModifyItem&quot;, arguments),</span>
<a href="#l22.71"></a><span id="l22.71" class="difflineminus">-    onDeleteItem: function(aDeletedItem) this.calMgr.notifyCalendarObservers(&quot;onDeleteItem&quot;, arguments),</span>
<a href="#l22.72"></a><span id="l22.72" class="difflineplus">+    onStartBatch: function() { return this.calMgr.notifyCalendarObservers(&quot;onStartBatch&quot;, arguments); },</span>
<a href="#l22.73"></a><span id="l22.73" class="difflineplus">+    onEndBatch: function() { return this.calMgr.notifyCalendarObservers(&quot;onEndBatch&quot;, arguments); },</span>
<a href="#l22.74"></a><span id="l22.74" class="difflineplus">+    onLoad: function(calendar) { return this.calMgr.notifyCalendarObservers(&quot;onLoad&quot;, arguments); },</span>
<a href="#l22.75"></a><span id="l22.75" class="difflineplus">+    onAddItem: function(aItem) { return this.calMgr.notifyCalendarObservers(&quot;onAddItem&quot;, arguments); },</span>
<a href="#l22.76"></a><span id="l22.76" class="difflineplus">+    onModifyItem: function(aNewItem, aOldItem) { return this.calMgr.notifyCalendarObservers(&quot;onModifyItem&quot;, arguments); },</span>
<a href="#l22.77"></a><span id="l22.77" class="difflineplus">+    onDeleteItem: function(aDeletedItem) { return this.calMgr.notifyCalendarObservers(&quot;onDeleteItem&quot;, arguments); },</span>
<a href="#l22.78"></a><span id="l22.78">     onError: function(aCalendar, aErrNo, aMessage) {</span>
<a href="#l22.79"></a><span id="l22.79">         this.calMgr.notifyCalendarObservers(&quot;onError&quot;, arguments);</span>
<a href="#l22.80"></a><span id="l22.80">         this.announceError(aCalendar, aErrNo, aMessage);</span>
<a href="#l22.81"></a><span id="l22.81">     },</span>
<a href="#l22.82"></a><span id="l22.82"> </span>
<a href="#l22.83"></a><span id="l22.83">     onPropertyChanged: function(aCalendar, aName, aValue, aOldValue) {</span>
<a href="#l22.84"></a><span id="l22.84">         this.calMgr.notifyCalendarObservers(&quot;onPropertyChanged&quot;, arguments);</span>
<a href="#l22.85"></a><span id="l22.85">         switch (aName) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/base/src/calItemBase.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/base/src/calItemBase.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -588,17 +588,17 @@ calItemBase.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4">             }</span>
<a href="#l23.5"></a><span id="l23.5">         }</span>
<a href="#l23.6"></a><span id="l23.6">     },</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8">     // void addAttachment(in calIAttachment attachment);</span>
<a href="#l23.9"></a><span id="l23.9">     addAttachment: function cIB_addAttachment(attachment) {</span>
<a href="#l23.10"></a><span id="l23.10">         this.modify();</span>
<a href="#l23.11"></a><span id="l23.11">         this.mAttachments = this.getAttachments({});</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-        if (!this.mAttachments.some(function(x) x.hashId == attachment.hashId)) {</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+        if (!this.mAttachments.some(x =&gt; x.hashId == attachment.hashId)) {</span>
<a href="#l23.14"></a><span id="l23.14">             this.mAttachments.push(attachment);</span>
<a href="#l23.15"></a><span id="l23.15">         }</span>
<a href="#l23.16"></a><span id="l23.16">     },</span>
<a href="#l23.17"></a><span id="l23.17"> </span>
<a href="#l23.18"></a><span id="l23.18">     // void removeAllAttachments();</span>
<a href="#l23.19"></a><span id="l23.19">     removeAllAttachments: function cIB_removeAllAttachments() {</span>
<a href="#l23.20"></a><span id="l23.20">         this.modify();</span>
<a href="#l23.21"></a><span id="l23.21">         this.mAttachments = [];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/base/src/calProtocolHandler.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/base/src/calProtocolHandler.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -22,18 +22,18 @@ function calProtocolHandlerWebcals() {</span>
<a href="#l24.4"></a><span id="l24.4">  */</span>
<a href="#l24.5"></a><span id="l24.5"> function calProtocolHandler(scheme) {</span>
<a href="#l24.6"></a><span id="l24.6">     this.scheme = scheme;</span>
<a href="#l24.7"></a><span id="l24.7">     this.mHttpProtocol = Services.io.getProtocolHandler(this.scheme == &quot;webcal&quot; ? &quot;http&quot; : &quot;https&quot;);</span>
<a href="#l24.8"></a><span id="l24.8">     this.wrappedJSObject = this;</span>
<a href="#l24.9"></a><span id="l24.9"> }</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11"> calProtocolHandler.prototype = {</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    get defaultPort() this.mHttpProtocol.defaultPort,</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-    get protocolFlags() this.mHttpProtocol.protocolFlags,</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineplus">+    get defaultPort() { return this.mHttpProtocol.defaultPort; },</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+    get protocolFlags() { return this.mHttpProtocol.protocolFlags; },</span>
<a href="#l24.16"></a><span id="l24.16"> </span>
<a href="#l24.17"></a><span id="l24.17">     newURI: function cph_newURI(aSpec, anOriginalCharset, aBaseURI) {</span>
<a href="#l24.18"></a><span id="l24.18">         var uri = Components.classes[&quot;@mozilla.org/network/standard-url;1&quot;].</span>
<a href="#l24.19"></a><span id="l24.19">                              createInstance(Components.interfaces.nsIStandardURL);</span>
<a href="#l24.20"></a><span id="l24.20">         uri.init(Components.interfaces.nsIStandardURL.URLTYPE_STANDARD,</span>
<a href="#l24.21"></a><span id="l24.21">                  this.mHttpProtocol.defaultPort, aSpec, anOriginalCharset, aBaseURI);</span>
<a href="#l24.22"></a><span id="l24.22">         return uri;</span>
<a href="#l24.23"></a><span id="l24.23">     },</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineat">@@ -60,17 +60,17 @@ calProtocolHandler.prototype = {</span>
<a href="#l24.25"></a><span id="l24.25">                                                      Components.interfaces.nsILoadInfo.SEC_NORMAL,</span>
<a href="#l24.26"></a><span id="l24.26">                                                      Components.interfaces.nsIContentPolicy.TYPE_OTHER);</span>
<a href="#l24.27"></a><span id="l24.27">         }</span>
<a href="#l24.28"></a><span id="l24.28">         channel.originalURI = aUri;</span>
<a href="#l24.29"></a><span id="l24.29">         return channel;</span>
<a href="#l24.30"></a><span id="l24.30">     },</span>
<a href="#l24.31"></a><span id="l24.31"> </span>
<a href="#l24.32"></a><span id="l24.32">     // We are not overriding any special ports</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineminus">-    allowPort: function cph_allowPort(aPort, aScheme) false</span>
<a href="#l24.34"></a><span id="l24.34" class="difflineplus">+    allowPort: function cph_allowPort(aPort, aScheme) { return false; }</span>
<a href="#l24.35"></a><span id="l24.35"> };</span>
<a href="#l24.36"></a><span id="l24.36"> </span>
<a href="#l24.37"></a><span id="l24.37"> const calProtocolHandlerWebcalClassID = Components.ID(&quot;{1153c73a-39be-46aa-9ba9-656d188865ca}&quot;);</span>
<a href="#l24.38"></a><span id="l24.38"> const calProtocolHandlerWebcalInterfaces = [Components.interfaces.nsIProtocolHandler];</span>
<a href="#l24.39"></a><span id="l24.39"> calProtocolHandlerWebcal.prototype = {</span>
<a href="#l24.40"></a><span id="l24.40">     __proto__: calProtocolHandler.prototype,</span>
<a href="#l24.41"></a><span id="l24.41">     classID: calProtocolHandlerWebcalClassID,</span>
<a href="#l24.42"></a><span id="l24.42">     QueryInterface: XPCOMUtils.generateQI(calProtocolHandlerWebcalInterfaces),</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/base/src/calRecurrenceDate.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/base/src/calRecurrenceDate.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -37,25 +37,25 @@ calRecurrenceDate.prototype = {</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5">     clone: function clone() {</span>
<a href="#l25.6"></a><span id="l25.6">         let other = new calRecurrenceDate();</span>
<a href="#l25.7"></a><span id="l25.7">         other.mDate = (this.mDate ? this.mDate.clone() : null);</span>
<a href="#l25.8"></a><span id="l25.8">         other.mIsNegative = this.mIsNegative;</span>
<a href="#l25.9"></a><span id="l25.9">         return other;</span>
<a href="#l25.10"></a><span id="l25.10">     },</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-    get isNegative() this.mIsNegative,</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+    get isNegative() { return this.mIsNegative; },</span>
<a href="#l25.14"></a><span id="l25.14">     set isNegative(val) {</span>
<a href="#l25.15"></a><span id="l25.15">         this.ensureMutable();</span>
<a href="#l25.16"></a><span id="l25.16">         return (this.mIsNegative = val);</span>
<a href="#l25.17"></a><span id="l25.17">     },</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19" class="difflineminus">-    get isFinite() true,</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineplus">+    get isFinite() { return true; },</span>
<a href="#l25.21"></a><span id="l25.21"> </span>
<a href="#l25.22"></a><span id="l25.22" class="difflineminus">-    get date() this.mDate,</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineplus">+    get date() { return this.mDate; },</span>
<a href="#l25.24"></a><span id="l25.24">     set date(val) {</span>
<a href="#l25.25"></a><span id="l25.25">         this.ensureMutable();</span>
<a href="#l25.26"></a><span id="l25.26">         return (this.mDate = val);</span>
<a href="#l25.27"></a><span id="l25.27">     },</span>
<a href="#l25.28"></a><span id="l25.28"> </span>
<a href="#l25.29"></a><span id="l25.29">     getNextOccurrence: function getNextOccurrence(aStartTime, aOccurrenceTime) {</span>
<a href="#l25.30"></a><span id="l25.30">         if (this.mDate &amp;&amp; this.mDate.compare(aStartTime) &gt; 0) {</span>
<a href="#l25.31"></a><span id="l25.31">             return this.mDate;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/base/src/calTimezone.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/base/src/calTimezone.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -20,47 +20,47 @@ calICALJSTimezone.prototype = {</span>
<a href="#l26.4"></a><span id="l26.4">         contractID: &quot;@mozilla.org/calendar/timezone;1&quot;,</span>
<a href="#l26.5"></a><span id="l26.5">         classDescription: &quot;Calendar Timezone&quot;,</span>
<a href="#l26.6"></a><span id="l26.6">         classID: calTimezoneClassID,</span>
<a href="#l26.7"></a><span id="l26.7">         interfaces: calTimezoneInterfaces</span>
<a href="#l26.8"></a><span id="l26.8">     }),</span>
<a href="#l26.9"></a><span id="l26.9"> </span>
<a href="#l26.10"></a><span id="l26.10">     innerObject: null,</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-    get provider() cal.getTimezoneService(),</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+    get provider() { return cal.getTimezoneService(); },</span>
<a href="#l26.14"></a><span id="l26.14">     get icalComponent() {</span>
<a href="#l26.15"></a><span id="l26.15">         let innerComp = this.innerObject.component;</span>
<a href="#l26.16"></a><span id="l26.16">         let comp = null;</span>
<a href="#l26.17"></a><span id="l26.17">         if (innerComp) {</span>
<a href="#l26.18"></a><span id="l26.18">             comp = cal.getIcsService().createIcalComponent(&quot;VTIMEZONE&quot;);</span>
<a href="#l26.19"></a><span id="l26.19">             comp.icalComponent = innerComp;</span>
<a href="#l26.20"></a><span id="l26.20">         }</span>
<a href="#l26.21"></a><span id="l26.21">         return comp;</span>
<a href="#l26.22"></a><span id="l26.22">     },</span>
<a href="#l26.23"></a><span id="l26.23" class="difflineminus">-    get tzid() this.innerObject.tzid,</span>
<a href="#l26.24"></a><span id="l26.24" class="difflineminus">-    get isFloating() this.innerObject == ICAL.Timezone.localTimezone,</span>
<a href="#l26.25"></a><span id="l26.25" class="difflineminus">-    get isUTC() this.innerObject == ICAL.Timezone.utcTimezone,</span>
<a href="#l26.26"></a><span id="l26.26" class="difflineminus">-    get latitude() this.innerObject.latitude,</span>
<a href="#l26.27"></a><span id="l26.27" class="difflineminus">-    get longitude() this.innerObject.longitude,</span>
<a href="#l26.28"></a><span id="l26.28" class="difflineplus">+    get tzid() { return this.innerObject.tzid; },</span>
<a href="#l26.29"></a><span id="l26.29" class="difflineplus">+    get isFloating() { return this.innerObject == ICAL.Timezone.localTimezone; },</span>
<a href="#l26.30"></a><span id="l26.30" class="difflineplus">+    get isUTC() { return this.innerObject == ICAL.Timezone.utcTimezone; },</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineplus">+    get latitude() { return this.innerObject.latitude; },</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+    get longitude() { return this.innerObject.longitude; },</span>
<a href="#l26.33"></a><span id="l26.33">     get displayName() {</span>
<a href="#l26.34"></a><span id="l26.34">         let bundle = ICAL.Timezone.cal_tz_bundle;</span>
<a href="#l26.35"></a><span id="l26.35">         let stringName = &quot;pref.timezone.&quot; + this.tzid.replace(/\//g, &quot;.&quot;);</span>
<a href="#l26.36"></a><span id="l26.36">         let displayName = this.tzid;</span>
<a href="#l26.37"></a><span id="l26.37">         try {</span>
<a href="#l26.38"></a><span id="l26.38">             displayName = bundle.GetStringFromName(stringName);</span>
<a href="#l26.39"></a><span id="l26.39">         } catch (e) {</span>
<a href="#l26.40"></a><span id="l26.40">             // Just use the TZID if the string is mising.</span>
<a href="#l26.41"></a><span id="l26.41">         }</span>
<a href="#l26.42"></a><span id="l26.42">         this.__defineGetter__(&quot;displayName&quot;, function() {</span>
<a href="#l26.43"></a><span id="l26.43">             return displayName;</span>
<a href="#l26.44"></a><span id="l26.44">         });</span>
<a href="#l26.45"></a><span id="l26.45">         return displayName;</span>
<a href="#l26.46"></a><span id="l26.46">     },</span>
<a href="#l26.47"></a><span id="l26.47"> </span>
<a href="#l26.48"></a><span id="l26.48" class="difflineminus">-    toString: function() this.innerObject.toString()</span>
<a href="#l26.49"></a><span id="l26.49" class="difflineplus">+    tostring: function() { return this.innerObject.toString(); }</span>
<a href="#l26.50"></a><span id="l26.50"> };</span>
<a href="#l26.51"></a><span id="l26.51"> </span>
<a href="#l26.52"></a><span id="l26.52"> function calLibicalTimezone(tzid, component, latitude, longitude) {</span>
<a href="#l26.53"></a><span id="l26.53">     this.wrappedJSObject = this;</span>
<a href="#l26.54"></a><span id="l26.54">     this.tzid = tzid;</span>
<a href="#l26.55"></a><span id="l26.55">     this.mComponent = component;</span>
<a href="#l26.56"></a><span id="l26.56">     this.mUTC = false;</span>
<a href="#l26.57"></a><span id="l26.57">     this.isFloating = false;</span>
<a href="#l26.58"></a><span id="l26.58" class="difflineat">@@ -76,17 +76,17 @@ calLibicalTimezone.prototype = {</span>
<a href="#l26.59"></a><span id="l26.59">         classID: calTimezoneClassID,</span>
<a href="#l26.60"></a><span id="l26.60">         interfaces: calTimezoneInterfaces</span>
<a href="#l26.61"></a><span id="l26.61">     }),</span>
<a href="#l26.62"></a><span id="l26.62"> </span>
<a href="#l26.63"></a><span id="l26.63">     toString: function calLibicalTimezone_toString() {</span>
<a href="#l26.64"></a><span id="l26.64">         return (this.icalComponent ? this.icalComponent.toString() : this.tzid);</span>
<a href="#l26.65"></a><span id="l26.65">     },</span>
<a href="#l26.66"></a><span id="l26.66"> </span>
<a href="#l26.67"></a><span id="l26.67" class="difflineminus">-    get isUTC() this.mUTC,</span>
<a href="#l26.68"></a><span id="l26.68" class="difflineplus">+    get isUTC() { return this.mUTC; },</span>
<a href="#l26.69"></a><span id="l26.69"> </span>
<a href="#l26.70"></a><span id="l26.70">     get icalComponent() {</span>
<a href="#l26.71"></a><span id="l26.71">         var comp = this.mComponent;</span>
<a href="#l26.72"></a><span id="l26.72">         if (comp &amp;&amp; (typeof(comp) == &quot;string&quot;)) {</span>
<a href="#l26.73"></a><span id="l26.73">             this.mComponent = cal.getIcsService().parseICS(&quot;BEGIN:VCALENDAR\r\n&quot; + comp + &quot;\r\nEND:VCALENDAR\r\n&quot;, null)</span>
<a href="#l26.74"></a><span id="l26.74">                                                  .getFirstSubcomponent(&quot;VTIMEZONE&quot;);</span>
<a href="#l26.75"></a><span id="l26.75">         }</span>
<a href="#l26.76"></a><span id="l26.76">         return this.mComponent;</span>
<a href="#l26.77"></a><span id="l26.77" class="difflineat">@@ -100,10 +100,10 @@ calLibicalTimezone.prototype = {</span>
<a href="#l26.78"></a><span id="l26.78">                 // don't assert here, but gracefully fall back to TZID:</span>
<a href="#l26.79"></a><span id="l26.79">                 cal.LOG(&quot;Timezone property lookup failed! Falling back to &quot; + this.tzid + &quot;\n&quot; + exc);</span>
<a href="#l26.80"></a><span id="l26.80">                 this.mDisplayName = this.tzid;</span>
<a href="#l26.81"></a><span id="l26.81">             }</span>
<a href="#l26.82"></a><span id="l26.82">         }</span>
<a href="#l26.83"></a><span id="l26.83">         return this.mDisplayName;</span>
<a href="#l26.84"></a><span id="l26.84">     },</span>
<a href="#l26.85"></a><span id="l26.85"> </span>
<a href="#l26.86"></a><span id="l26.86" class="difflineminus">-    get provider() cal.getTimezoneService()</span>
<a href="#l26.87"></a><span id="l26.87" class="difflineplus">+    get provider() { return cal.getTimezoneService(); }</span>
<a href="#l26.88"></a><span id="l26.88"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -56,17 +56,17 @@ calTimezoneService.prototype = {</span>
<a href="#l27.4"></a><span id="l27.4">         classID: calTimezoneServiceClassID,</span>
<a href="#l27.5"></a><span id="l27.5">         contractID: &quot;@mozilla.org/calendar/timezone-service;1&quot;,</span>
<a href="#l27.6"></a><span id="l27.6">         classDescription: &quot;Calendar Timezone Service&quot;,</span>
<a href="#l27.7"></a><span id="l27.7">         interfaces: calTimezoneServiceInterfaces,</span>
<a href="#l27.8"></a><span id="l27.8">         flags: Components.interfaces.nsIClassInfo.SINGLETON</span>
<a href="#l27.9"></a><span id="l27.9">     }),</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11">     // ical.js TimezoneService methods</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    has: function(id) this.getTimezone(id) != null,</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    has: function(id) { return this.getTimezone(id) != null; },</span>
<a href="#l27.14"></a><span id="l27.14">     get: function(id) {</span>
<a href="#l27.15"></a><span id="l27.15">         return id ? unwrapSingle(ICAL.Timezone, this.getTimezone(id)) : null;</span>
<a href="#l27.16"></a><span id="l27.16">     },</span>
<a href="#l27.17"></a><span id="l27.17">     remove: function() {},</span>
<a href="#l27.18"></a><span id="l27.18">     register: function() {},</span>
<a href="#l27.19"></a><span id="l27.19"> </span>
<a href="#l27.20"></a><span id="l27.20">     // calIStartupService:</span>
<a href="#l27.21"></a><span id="l27.21">     startup: function startup(aCompleteListener) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/base/src/calUtils.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/base/src/calUtils.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -596,17 +596,17 @@ function hashColor(str) {</span>
<a href="#l28.4"></a><span id="l28.4">                           &quot;#33CC00&quot;, &quot;#00CCCC&quot;, &quot;#3366FF&quot;, &quot;#6633FF&quot;, &quot;#CC33CC&quot;,</span>
<a href="#l28.5"></a><span id="l28.5">                           &quot;#666666&quot;, &quot;#990000&quot;, &quot;#CC6600&quot;, &quot;#CC9933&quot;, &quot;#999900&quot;,</span>
<a href="#l28.6"></a><span id="l28.6">                           &quot;#009900&quot;, &quot;#339999&quot;, &quot;#3333FF&quot;, &quot;#6600CC&quot;, &quot;#993399&quot;,</span>
<a href="#l28.7"></a><span id="l28.7">                           &quot;#333333&quot;, &quot;#660000&quot;, &quot;#993300&quot;, &quot;#996633&quot;, &quot;#666600&quot;,</span>
<a href="#l28.8"></a><span id="l28.8">                           &quot;#006600&quot;, &quot;#336666&quot;, &quot;#000099&quot;, &quot;#333399&quot;, &quot;#663366&quot;,</span>
<a href="#l28.9"></a><span id="l28.9">                           &quot;#000000&quot;, &quot;#330000&quot;, &quot;#663300&quot;, &quot;#663333&quot;, &quot;#333300&quot;,</span>
<a href="#l28.10"></a><span id="l28.10">                           &quot;#003300&quot;, &quot;#003333&quot;, &quot;#000066&quot;, &quot;#330099&quot;, &quot;#330033&quot;];</span>
<a href="#l28.11"></a><span id="l28.11"> </span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    let sum = Array.map(str || &quot; &quot;, function(e) e.charCodeAt(0)).reduce(function(a,b) a + b);</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+    let sum = Array.map(str || &quot; &quot;, e =&gt; e.charCodeAt(0)).reduce((a, b) =&gt; a + b);</span>
<a href="#l28.14"></a><span id="l28.14">     return colorPalette[sum % colorPalette.length];</span>
<a href="#l28.15"></a><span id="l28.15"> }</span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17"> /**</span>
<a href="#l28.18"></a><span id="l28.18">  * Convert categories string to list of category names.</span>
<a href="#l28.19"></a><span id="l28.19">  *</span>
<a href="#l28.20"></a><span id="l28.20">  * Stored categories may include escaped commas within a name.</span>
<a href="#l28.21"></a><span id="l28.21">  * Split categories string at commas, but not at escaped commas (\,).</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineat">@@ -1162,17 +1162,17 @@ function getProgressAtom(aTask) {</span>
<a href="#l28.23"></a><span id="l28.23"> function calInterfaceBag(iid) {</span>
<a href="#l28.24"></a><span id="l28.24">     this.init(iid);</span>
<a href="#l28.25"></a><span id="l28.25"> }</span>
<a href="#l28.26"></a><span id="l28.26"> calInterfaceBag.prototype = {</span>
<a href="#l28.27"></a><span id="l28.27">     mIid: null,</span>
<a href="#l28.28"></a><span id="l28.28">     mInterfaces: null,</span>
<a href="#l28.29"></a><span id="l28.29"> </span>
<a href="#l28.30"></a><span id="l28.30">     // Iterating the inteface bag iterates the interfaces it contains</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-    [Symbol.iterator]: function() this.mInterfaces[Symbol.iterator](),</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineplus">+    [Symbol.iterator]: function() { return this.mInterfaces[Symbol.iterator](); },</span>
<a href="#l28.33"></a><span id="l28.33"> </span>
<a href="#l28.34"></a><span id="l28.34">     /// internal:</span>
<a href="#l28.35"></a><span id="l28.35">     init: function calInterfaceBag_init(iid) {</span>
<a href="#l28.36"></a><span id="l28.36">         this.mIid = iid;</span>
<a href="#l28.37"></a><span id="l28.37">         this.mInterfaces = [];</span>
<a href="#l28.38"></a><span id="l28.38">     },</span>
<a href="#l28.39"></a><span id="l28.39"> </span>
<a href="#l28.40"></a><span id="l28.40">     /// external:</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineat">@@ -1801,17 +1801,17 @@ function binaryInsertNode(parentNode, in</span>
<a href="#l28.42"></a><span id="l28.42"> </span>
<a href="#l28.43"></a><span id="l28.43">         // Only add the node if duplicates should not be discarded, or if</span>
<a href="#l28.44"></a><span id="l28.44">         // they should and the childNode[newIndex] == node.</span>
<a href="#l28.45"></a><span id="l28.45">         let node = parentNode.childNodes[newIndex];</span>
<a href="#l28.46"></a><span id="l28.46">         parentNode.insertBefore(insertNode, node);</span>
<a href="#l28.47"></a><span id="l28.47">     }</span>
<a href="#l28.48"></a><span id="l28.48">     return newIndex;</span>
<a href="#l28.49"></a><span id="l28.49"> }</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineminus">-binaryInsertNode.defaultAccessor = function(n) n.item;</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineplus">+binaryInsertNode.defaultAccessor = n =&gt; n.item;</span>
<a href="#l28.52"></a><span id="l28.52"> </span>
<a href="#l28.53"></a><span id="l28.53"> /**</span>
<a href="#l28.54"></a><span id="l28.54">  * Insert an item into the given array, using binary search. See binarySearch</span>
<a href="#l28.55"></a><span id="l28.55">  * for a note on how the comptor works.</span>
<a href="#l28.56"></a><span id="l28.56">  *</span>
<a href="#l28.57"></a><span id="l28.57">  * @param itemArray             The array to insert into.</span>
<a href="#l28.58"></a><span id="l28.58">  * @param item                  The item to insert into the array.</span>
<a href="#l28.59"></a><span id="l28.59">  * @param comptor               A comparation function that can compare two items.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/import-export/calListFormatter.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/import-export/calListFormatter.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -20,16 +20,16 @@ calListFormatter.prototype = {</span>
<a href="#l29.4"></a><span id="l29.4"> </span>
<a href="#l29.5"></a><span id="l29.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l29.6"></a><span id="l29.6">         classID: calListFormatterClassID,</span>
<a href="#l29.7"></a><span id="l29.7">         contractID: &quot;@mozilla.org/calendar/printformatter;1?type=list&quot;,</span>
<a href="#l29.8"></a><span id="l29.8">         classDescription: &quot;Calendar List Print Formatter&quot;,</span>
<a href="#l29.9"></a><span id="l29.9">         interfaces: calListFormatterInterfaces</span>
<a href="#l29.10"></a><span id="l29.10">     }),</span>
<a href="#l29.11"></a><span id="l29.11"> </span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-    get name() cal.calGetString(&quot;calendar&quot;, &quot;formatListName&quot;),</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+    get name() { return cal.calGetString(&quot;calendar&quot;, &quot;formatListName&quot;); },</span>
<a href="#l29.14"></a><span id="l29.14"> </span>
<a href="#l29.15"></a><span id="l29.15">     formatToHtml: function list_formatToHtml(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l29.16"></a><span id="l29.16">         let htmlexporter = Components.classes[&quot;@mozilla.org/calendar/export;1?type=htmllist&quot;]</span>
<a href="#l29.17"></a><span id="l29.17">                                      .createInstance(Components.interfaces.calIExporter);</span>
<a href="#l29.18"></a><span id="l29.18">         htmlexporter.exportToStream(aStream, aCount, aItems, aTitle);</span>
<a href="#l29.19"></a><span id="l29.19">     }</span>
<a href="#l29.20"></a><span id="l29.20"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/import-export/calMonthGridPrinter.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/import-export/calMonthGridPrinter.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -24,17 +24,17 @@ calMonthPrinter.prototype = {</span>
<a href="#l30.4"></a><span id="l30.4"> </span>
<a href="#l30.5"></a><span id="l30.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l30.6"></a><span id="l30.6">         classID: calMonthPrinterClassID,</span>
<a href="#l30.7"></a><span id="l30.7">         contractID: &quot;@mozilla.org/calendar/printformatter;1?type=monthgrid&quot;,</span>
<a href="#l30.8"></a><span id="l30.8">         classDescription: &quot;Calendar Month Grid Print Formatter&quot;,</span>
<a href="#l30.9"></a><span id="l30.9">         interfaces: calMonthPrinterInterfaces</span>
<a href="#l30.10"></a><span id="l30.10">     }),</span>
<a href="#l30.11"></a><span id="l30.11"> </span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    get name() cal.calGetString(&quot;calendar&quot;, &quot;monthPrinterName&quot;),</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    get name() { return cal.calGetString(&quot;calendar&quot;, &quot;monthPrinterName&quot;); },</span>
<a href="#l30.14"></a><span id="l30.14"> </span>
<a href="#l30.15"></a><span id="l30.15">     formatToHtml: function monthPrint_format(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l30.16"></a><span id="l30.16">         let document = cal.xml.parseFile(&quot;chrome://calendar-common/skin/printing/calMonthGridPrinter.html&quot;);</span>
<a href="#l30.17"></a><span id="l30.17">         let defaultTimezone = cal.calendarDefaultTimezone();</span>
<a href="#l30.18"></a><span id="l30.18"> </span>
<a href="#l30.19"></a><span id="l30.19">         // Set page title</span>
<a href="#l30.20"></a><span id="l30.20">         document.getElementById(&quot;title&quot;).textContent = aTitle;</span>
<a href="#l30.21"></a><span id="l30.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -431,19 +431,19 @@ calOutlookCSVExporter.prototype = {</span>
<a href="#l31.4"></a><span id="l31.4">         classDescription: &quot;Calendar Outlook CSV Exporter&quot;,</span>
<a href="#l31.5"></a><span id="l31.5">         interfaces: calOutlookCSVExporterInterfaces</span>
<a href="#l31.6"></a><span id="l31.6">     }),</span>
<a href="#l31.7"></a><span id="l31.7"> </span>
<a href="#l31.8"></a><span id="l31.8">     getFileTypes: getOutlookCsvFileTypes,</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10">     exportToStream: function csv_exportToStream(aStream, aCount, aItems) {</span>
<a href="#l31.11"></a><span id="l31.11">         // Helper functions</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-        function dateString(aDateTime) cal.dateTimeToJsDate(aDateTime).toLocaleFormat(localeEn.dateFormat);</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-        function timeString(aDateTime) cal.dateTimeToJsDate(aDateTime).toLocaleFormat(localeEn.timeFormat);</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-        function txtString(aString) aString || &quot;&quot;;</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineplus">+        function dateString(aDateTime) { return cal.dateTimeToJsDate(aDateTime).toLocaleFormat(localeEn.dateFormat); }</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineplus">+        function timeString(aDateTime) { return cal.dateTimeToJsDate(aDateTime).toLocaleFormat(localeEn.timeFormat); }</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineplus">+        function txtString(aString) { return aString || &quot;&quot;; }</span>
<a href="#l31.18"></a><span id="l31.18"> </span>
<a href="#l31.19"></a><span id="l31.19">         let str = &quot;&quot;;</span>
<a href="#l31.20"></a><span id="l31.20">         let headers = [];</span>
<a href="#l31.21"></a><span id="l31.21">         // Not using a loop here, since we need to be sure the order here matches</span>
<a href="#l31.22"></a><span id="l31.22">         // with the orders the field data is added later on</span>
<a href="#l31.23"></a><span id="l31.23">         headers.push(localeEn['headTitle']);</span>
<a href="#l31.24"></a><span id="l31.24">         headers.push(localeEn['headStartDate']);</span>
<a href="#l31.25"></a><span id="l31.25">         headers.push(localeEn['headStartTime']);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/import-export/calWeekPrinter.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/import-export/calWeekPrinter.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -24,17 +24,17 @@ calWeekPrinter.prototype = {</span>
<a href="#l32.4"></a><span id="l32.4"> </span>
<a href="#l32.5"></a><span id="l32.5">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l32.6"></a><span id="l32.6">         classID: calWeekPrinterClassID,</span>
<a href="#l32.7"></a><span id="l32.7">         contractID: &quot;@mozilla.org/calendar/printformatter;1?type=weekplan&quot;,</span>
<a href="#l32.8"></a><span id="l32.8">         classDescription: &quot;Calendar Week Print Formatter&quot;,</span>
<a href="#l32.9"></a><span id="l32.9">         interfaces: calWeekPrinterInterfaces</span>
<a href="#l32.10"></a><span id="l32.10">     }),</span>
<a href="#l32.11"></a><span id="l32.11"> </span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-    get name() cal.calGetString(&quot;calendar&quot;, &quot;weekPrinterName&quot;),</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+    get name() { return cal.calGetString(&quot;calendar&quot;, &quot;weekPrinterName&quot;); },</span>
<a href="#l32.14"></a><span id="l32.14"> </span>
<a href="#l32.15"></a><span id="l32.15">     formatToHtml: function weekPrint_format(aStream, aStart, aEnd, aCount, aItems, aTitle) {</span>
<a href="#l32.16"></a><span id="l32.16">         let document = cal.xml.parseFile(&quot;chrome://calendar-common/skin/printing/calWeekPrinter.html&quot;);</span>
<a href="#l32.17"></a><span id="l32.17">         let defaultTimezone = cal.calendarDefaultTimezone();</span>
<a href="#l32.18"></a><span id="l32.18"> </span>
<a href="#l32.19"></a><span id="l32.19">         // Set page title</span>
<a href="#l32.20"></a><span id="l32.20">         document.getElementById(&quot;title&quot;).textContent = aTitle;</span>
<a href="#l32.21"></a><span id="l32.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/calendar/itip/calItipEmailTransport.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/calendar/itip/calItipEmailTransport.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -34,18 +34,18 @@ calItipEmailTransport.prototype = {</span>
<a href="#l33.4"></a><span id="l33.4">         interfaces: calItipEmailTransportInterfaces,</span>
<a href="#l33.5"></a><span id="l33.5">     }),</span>
<a href="#l33.6"></a><span id="l33.6"> </span>
<a href="#l33.7"></a><span id="l33.7">     mHasXpcomMail: false,</span>
<a href="#l33.8"></a><span id="l33.8">     mDefaultAccount: null,</span>
<a href="#l33.9"></a><span id="l33.9">     mDefaultIdentity: null,</span>
<a href="#l33.10"></a><span id="l33.10">     mDefaultSmtpServer: null,</span>
<a href="#l33.11"></a><span id="l33.11"> </span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-    get scheme() &quot;mailto&quot;,</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineminus">-    get type() &quot;email&quot;,</span>
<a href="#l33.14"></a><span id="l33.14" class="difflineplus">+    get scheme() { return &quot;mailto&quot;; },</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineplus">+    get type() { return &quot;email&quot;; },</span>
<a href="#l33.16"></a><span id="l33.16"> </span>
<a href="#l33.17"></a><span id="l33.17">     mSenderAddress: null,</span>
<a href="#l33.18"></a><span id="l33.18">     get senderAddress() {</span>
<a href="#l33.19"></a><span id="l33.19">         return this.mSenderAddress;</span>
<a href="#l33.20"></a><span id="l33.20">     },</span>
<a href="#l33.21"></a><span id="l33.21">     set senderAddress(aValue) {</span>
<a href="#l33.22"></a><span id="l33.22">         return (this.mSenderAddress = aValue);</span>
<a href="#l33.23"></a><span id="l33.23">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/calendar/lightning/components/calItipProtocolHandler.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/calendar/lightning/components/calItipProtocolHandler.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -67,17 +67,17 @@ ItipProtocolHandler.prototype = {</span>
<a href="#l34.4"></a><span id="l34.4">     classInfo: XPCOMUtils.generateCI({</span>
<a href="#l34.5"></a><span id="l34.5">         classID: ItipProtocolHandlerClassID,</span>
<a href="#l34.6"></a><span id="l34.6">         contractID: &quot;@mozilla.org/network/protocol;1?name=&quot; + ITIP_HANDLER_PROTOCOL,</span>
<a href="#l34.7"></a><span id="l34.7">         classDescription: &quot;iTIP Protocol Handler&quot;,</span>
<a href="#l34.8"></a><span id="l34.8">         interfaces: ItipProtocolHandlerInterfaces</span>
<a href="#l34.9"></a><span id="l34.9">     }),</span>
<a href="#l34.10"></a><span id="l34.10"> </span>
<a href="#l34.11"></a><span id="l34.11">     protocolFlags: CI.nsIProtocolHandler.URI_NORELATIVE | CI.nsIProtocolHandler.URI_DANGEROUS_TO_LOAD,</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-    allowPort: function () false,</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+    allowPort: () =&gt; false,</span>
<a href="#l34.14"></a><span id="l34.14">     isSecure: false,</span>
<a href="#l34.15"></a><span id="l34.15">     newURI: function (spec, charSet, baseURI) {</span>
<a href="#l34.16"></a><span id="l34.16">         let cls = Components.classes[&quot;@mozilla.org/network/standard-url;1&quot;];</span>
<a href="#l34.17"></a><span id="l34.17">         let url = cls.createInstance(CI.nsIStandardURL);</span>
<a href="#l34.18"></a><span id="l34.18">         url.init(CI.nsIStandardURL.URLTYPE_STANDARD, 0, spec, charSet, baseURI);</span>
<a href="#l34.19"></a><span id="l34.19">         dump(&quot;Creating new URI for &quot; + spec + &quot;\n&quot;);</span>
<a href="#l34.20"></a><span id="l34.20">         return url.QueryInterface(CI.nsIURI);</span>
<a href="#l34.21"></a><span id="l34.21">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/calendar/lightning/content/imip-bar.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/calendar/lightning/content/imip-bar.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -114,17 +114,17 @@ var ltnImipBar = {</span>
<a href="#l35.4"></a><span id="l35.4">     },</span>
<a href="#l35.5"></a><span id="l35.5"> </span>
<a href="#l35.6"></a><span id="l35.6">     /**</span>
<a href="#l35.7"></a><span id="l35.7">      * Resets all buttons and its menuitems, all buttons are hidden thereafter</span>
<a href="#l35.8"></a><span id="l35.8">      */</span>
<a href="#l35.9"></a><span id="l35.9">     resetButtons: function ltnResetImipButtons() {</span>
<a href="#l35.10"></a><span id="l35.10">         let buttons = ltnImipBar.getButtons();</span>
<a href="#l35.11"></a><span id="l35.11">         buttons.forEach(hideElement);</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-        buttons.forEach(function(aButton) ltnImipBar.getMenuItems(aButton).forEach(showElement));</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+        buttons.forEach(aButton =&gt; ltnImipBar.getMenuItems(aButton).forEach(showElement));</span>
<a href="#l35.14"></a><span id="l35.14">     },</span>
<a href="#l35.15"></a><span id="l35.15"> </span>
<a href="#l35.16"></a><span id="l35.16">     /**</span>
<a href="#l35.17"></a><span id="l35.17">      * Provides a list of all available buttons</span>
<a href="#l35.18"></a><span id="l35.18">      */</span>
<a href="#l35.19"></a><span id="l35.19">     getButtons: function ltnGetButtons() {</span>
<a href="#l35.20"></a><span id="l35.20">         let buttons = [];</span>
<a href="#l35.21"></a><span id="l35.21">         let nl = document.getElementById(&quot;imip-view-toolbar&quot;)</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -156,20 +156,20 @@ var ltnImipBar = {</span>
<a href="#l35.23"></a><span id="l35.23">     /**</span>
<a href="#l35.24"></a><span id="l35.24">      * Checks and converts button types based on available menuitems of the buttons</span>
<a href="#l35.25"></a><span id="l35.25">      * to avoid dropdowns which are empty or only replicating the default button action</span>
<a href="#l35.26"></a><span id="l35.26">      * Should be called once the buttons are set up</span>
<a href="#l35.27"></a><span id="l35.27">      */</span>
<a href="#l35.28"></a><span id="l35.28">     conformButtonType: function ltnConformButtonType() {</span>
<a href="#l35.29"></a><span id="l35.29">         // check only needed on visible and not simple buttons</span>
<a href="#l35.30"></a><span id="l35.30">         let buttons = ltnImipBar.getButtons()</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-                                .filter(function(aElement) aElement.hasAttribute(&quot;type&quot;) &amp;&amp; !aElement.hidden);</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+                                .filter(aElement =&gt; aElement.hasAttribute(&quot;type&quot;) &amp;&amp; !aElement.hidden);</span>
<a href="#l35.33"></a><span id="l35.33">         // change button if appropriate</span>
<a href="#l35.34"></a><span id="l35.34">         for (let button of buttons) {</span>
<a href="#l35.35"></a><span id="l35.35" class="difflineminus">-            let items = ltnImipBar.getMenuItems(button).filter(function(aItem) !aItem.hidden);</span>
<a href="#l35.36"></a><span id="l35.36" class="difflineplus">+            let items = ltnImipBar.getMenuItems(button).filter(aItem =&gt; !aItem.hidden);</span>
<a href="#l35.37"></a><span id="l35.37">             if (button.type == &quot;menu&quot; &amp;&amp; items.length == 0) {</span>
<a href="#l35.38"></a><span id="l35.38">                 // hide non functional buttons</span>
<a href="#l35.39"></a><span id="l35.39">                 button.hidden = true;</span>
<a href="#l35.40"></a><span id="l35.40">             } else if (button.type == &quot;menu-button&quot;) {</span>
<a href="#l35.41"></a><span id="l35.41">                 if (items.length == 0 ||</span>
<a href="#l35.42"></a><span id="l35.42">                     (items.length == 1 &amp;&amp;</span>
<a href="#l35.43"></a><span id="l35.43">                      button.hasAttribute(&quot;oncommand&quot;) &amp;&amp;</span>
<a href="#l35.44"></a><span id="l35.44">                      items[0].hasAttribute(&quot;oncommand&quot;) &amp;&amp;</span>
<a href="#l35.45"></a><span id="l35.45" class="difflineat">@@ -201,19 +201,19 @@ var ltnImipBar = {</span>
<a href="#l35.46"></a><span id="l35.46">             ltnImipBar.actionFunc = actionFunc;</span>
<a href="#l35.47"></a><span id="l35.47">             ltnImipBar.foundItems = foundItems;</span>
<a href="#l35.48"></a><span id="l35.48">         }</span>
<a href="#l35.49"></a><span id="l35.49"> </span>
<a href="#l35.50"></a><span id="l35.50">         imipBar.setAttribute(&quot;label&quot;, data.label);</span>
<a href="#l35.51"></a><span id="l35.51">         // let's reset all buttons first</span>
<a href="#l35.52"></a><span id="l35.52">         ltnImipBar.resetButtons();</span>
<a href="#l35.53"></a><span id="l35.53">         // menu items are visible by default, let's hide what's not available</span>
<a href="#l35.54"></a><span id="l35.54" class="difflineminus">-        data.hideMenuItems.forEach(function(aElementId) hideElement(document.getElementById(aElementId)));</span>
<a href="#l35.55"></a><span id="l35.55" class="difflineplus">+        data.hideMenuItems.forEach(aElementId =&gt; hideElement(document.getElementById(aElementId)));</span>
<a href="#l35.56"></a><span id="l35.56">         // buttons are hidden by default, let's make required buttons visible</span>
<a href="#l35.57"></a><span id="l35.57" class="difflineminus">-        data.buttons.forEach(function(aElementId) showElement(document.getElementById(aElementId)));</span>
<a href="#l35.58"></a><span id="l35.58" class="difflineplus">+        data.buttons.forEach(aElementId =&gt; showElement(document.getElementById(aElementId)));</span>
<a href="#l35.59"></a><span id="l35.59">         // adjust button style if necessary</span>
<a href="#l35.60"></a><span id="l35.60">         ltnImipBar.conformButtonType();</span>
<a href="#l35.61"></a><span id="l35.61">         if (Preferences.get('calendar.itip.displayInvitationChanges', false)) {</span>
<a href="#l35.62"></a><span id="l35.62">             // display event modifications if any</span>
<a href="#l35.63"></a><span id="l35.63">             ltnImipBar.displayModifications();</span>
<a href="#l35.64"></a><span id="l35.64">         } else if (msgWindow &amp;&amp; ltnImipBar.msgOverlay) {</span>
<a href="#l35.65"></a><span id="l35.65">             msgWindow.displayHTMLInMessagePane('', ltnImipBar.msgOverlay, false);</span>
<a href="#l35.66"></a><span id="l35.66">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -75,20 +75,20 @@ var calendarTabType = {</span>
<a href="#l36.4"></a><span id="l36.4">         aState.title = ltnGetString(&quot;lightning&quot;, &quot;tabTitleCalendar&quot;);</span>
<a href="#l36.5"></a><span id="l36.5">         aTabmail.openTab('calendar', aState);</span>
<a href="#l36.6"></a><span id="l36.6">       },</span>
<a href="#l36.7"></a><span id="l36.7"> </span>
<a href="#l36.8"></a><span id="l36.8">       onTitleChanged: function(aTab) {</span>
<a href="#l36.9"></a><span id="l36.9">         aTab.title = ltnGetString(&quot;lightning&quot;, &quot;tabTitleCalendar&quot;);</span>
<a href="#l36.10"></a><span id="l36.10">       },</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-      supportsCommand: function (aCommand, aTab) calendarController2.supportsCommand(aCommand),</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineminus">-      isCommandEnabled: function (aCommand, aTab) calendarController2.isCommandEnabled(aCommand),</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineminus">-      doCommand: function(aCommand, aTab) calendarController2.doCommand(aCommand),</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineminus">-      onEvent: function(aEvent, aTab) calendarController2.onEvent(aEvent)</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineplus">+      supportsCommand: (aCommand, aTab) =&gt; calendarController2.supportsCommand(aCommand),</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineplus">+      isCommandEnabled: (aCommand, aTab) =&gt; calendarController2.isCommandEnabled(aCommand),</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineplus">+      doCommand: (aCommand, aTab) =&gt; calendarController2.doCommand(aCommand),</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineplus">+      onEvent: (aEvent, aTab) =&gt; calendarController2.onEvent(aEvent)</span>
<a href="#l36.20"></a><span id="l36.20">     },</span>
<a href="#l36.21"></a><span id="l36.21"> </span>
<a href="#l36.22"></a><span id="l36.22">     tasks: {</span>
<a href="#l36.23"></a><span id="l36.23">       type: &quot;tasks&quot;,</span>
<a href="#l36.24"></a><span id="l36.24">       maxTabs: 1,</span>
<a href="#l36.25"></a><span id="l36.25">       openTab: function(aTab, aArgs) {</span>
<a href="#l36.26"></a><span id="l36.26">         aTab.title = aArgs[&quot;title&quot;];</span>
<a href="#l36.27"></a><span id="l36.27">         if (!(&quot;background&quot; in aArgs) || !aArgs[&quot;background&quot;]) {</span>
<a href="#l36.28"></a><span id="l36.28" class="difflineat">@@ -120,20 +120,20 @@ var calendarTabType = {</span>
<a href="#l36.29"></a><span id="l36.29">         aState.title = ltnGetString(&quot;lightning&quot;, &quot;tabTitleTasks&quot;);</span>
<a href="#l36.30"></a><span id="l36.30">         aTabmail.openTab('tasks', aState);</span>
<a href="#l36.31"></a><span id="l36.31">       },</span>
<a href="#l36.32"></a><span id="l36.32"> </span>
<a href="#l36.33"></a><span id="l36.33">       onTitleChanged: function(aTab) {</span>
<a href="#l36.34"></a><span id="l36.34">         aTab.title = ltnGetString(&quot;lightning&quot;, &quot;tabTitleTasks&quot;);</span>
<a href="#l36.35"></a><span id="l36.35">       },</span>
<a href="#l36.36"></a><span id="l36.36"> </span>
<a href="#l36.37"></a><span id="l36.37" class="difflineminus">-      supportsCommand: function (aCommand, aTab) calendarController2.supportsCommand(aCommand),</span>
<a href="#l36.38"></a><span id="l36.38" class="difflineminus">-      isCommandEnabled: function (aCommand, aTab) calendarController2.isCommandEnabled(aCommand),</span>
<a href="#l36.39"></a><span id="l36.39" class="difflineminus">-      doCommand: function(aCommand, aTab) calendarController2.doCommand(aCommand),</span>
<a href="#l36.40"></a><span id="l36.40" class="difflineminus">-      onEvent: function(aEvent, aTab) calendarController2.onEvent(aEvent)</span>
<a href="#l36.41"></a><span id="l36.41" class="difflineplus">+      supportsCommand: (aCommand, aTab) =&gt; calendarController2.supportsCommand(aCommand),</span>
<a href="#l36.42"></a><span id="l36.42" class="difflineplus">+      isCommandEnabled: (aCommand, aTab) =&gt; calendarController2.isCommandEnabled(aCommand),</span>
<a href="#l36.43"></a><span id="l36.43" class="difflineplus">+      doCommand: (aCommand, aTab) =&gt; calendarController2.doCommand(aCommand),</span>
<a href="#l36.44"></a><span id="l36.44" class="difflineplus">+      onEvent: (aEvent, aTab) =&gt; calendarController2.onEvent(aEvent)</span>
<a href="#l36.45"></a><span id="l36.45">     }</span>
<a href="#l36.46"></a><span id="l36.46">   },</span>
<a href="#l36.47"></a><span id="l36.47"> </span>
<a href="#l36.48"></a><span id="l36.48">   /* because calendar does some direct menu manipulation, we need to change</span>
<a href="#l36.49"></a><span id="l36.49">    *  to the mail mode to clean up after those hacks.</span>
<a href="#l36.50"></a><span id="l36.50">    */</span>
<a href="#l36.51"></a><span id="l36.51">   saveTabState: function(aTab) {</span>
<a href="#l36.52"></a><span id="l36.52">     ltnSwitch2Mail();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -2068,17 +2068,17 @@ calDavCalendar.prototype = {</span>
<a href="#l37.4"></a><span id="l37.4">                 thisCalendar.completeCheckServerInfo(aChangeLogListener,</span>
<a href="#l37.5"></a><span id="l37.5">                                                      Components.results.NS_ERROR_FAILURE);</span>
<a href="#l37.6"></a><span id="l37.6">                 return;</span>
<a href="#l37.7"></a><span id="l37.7">             }</span>
<a href="#l37.8"></a><span id="l37.8"> </span>
<a href="#l37.9"></a><span id="l37.9">             let pcs = caldavXPath(multistatus, &quot;/D:multistatus/D:response/D:propstat/D:prop/D:principal-collection-set/D:href/text()&quot;);</span>
<a href="#l37.10"></a><span id="l37.10">             let nsList = [];</span>
<a href="#l37.11"></a><span id="l37.11">             if (pcs) {</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-                nsList = pcs.map(function(x) thisCalendar.ensureDecodedPath(x));</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+                nsList = pcs.map(x =&gt; thisCalendar.ensureDecodedPath(x));</span>
<a href="#l37.14"></a><span id="l37.14">             }</span>
<a href="#l37.15"></a><span id="l37.15"> </span>
<a href="#l37.16"></a><span id="l37.16">             thisCalendar.checkPrincipalsNameSpace(nsList, aChangeLogListener);</span>
<a href="#l37.17"></a><span id="l37.17">         };</span>
<a href="#l37.18"></a><span id="l37.18"> </span>
<a href="#l37.19"></a><span id="l37.19">         this.sendHttpRequest(homeSet, queryXml, MIME_TEXT_XML, null, (channel) =&gt; {</span>
<a href="#l37.20"></a><span id="l37.20">             channel.setRequestHeader(&quot;Depth&quot;, &quot;0&quot;, false);</span>
<a href="#l37.21"></a><span id="l37.21">             channel.requestMethod = &quot;PROPFIND&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/calendar/providers/composite/calCompositeCalendar.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -95,18 +95,18 @@ calCompositeCalendar.prototype = {</span>
<a href="#l38.4"></a><span id="l38.4">         contractID: &quot;@mozilla.org/calendar/calendar;1?type=composite&quot;,</span>
<a href="#l38.5"></a><span id="l38.5">         classDescription: &quot;Composite Calendar Provider&quot;,</span>
<a href="#l38.6"></a><span id="l38.6">         interfaces: calCompositeCalendarInterfaces,</span>
<a href="#l38.7"></a><span id="l38.7">     }),</span>
<a href="#l38.8"></a><span id="l38.8"> </span>
<a href="#l38.9"></a><span id="l38.9">     //</span>
<a href="#l38.10"></a><span id="l38.10">     // calICalendarProvider interface</span>
<a href="#l38.11"></a><span id="l38.11">     //</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-    get prefChromeOverlay() null,</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-    get displayName() cal.calGetString(&quot;calendar&quot;, &quot;compositeName&quot;),</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineplus">+    get prefChromeOverlay() { return null; },</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineplus">+    get displayName() { return cal.calGetString(&quot;calendar&quot;, &quot;compositeName&quot;); },</span>
<a href="#l38.16"></a><span id="l38.16"> </span>
<a href="#l38.17"></a><span id="l38.17">     createCalendar: function comp_createCal() {</span>
<a href="#l38.18"></a><span id="l38.18">         throw NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l38.19"></a><span id="l38.19">     },</span>
<a href="#l38.20"></a><span id="l38.20"> </span>
<a href="#l38.21"></a><span id="l38.21">     deleteCalendar: function comp_deleteCal(calendar, listener) {</span>
<a href="#l38.22"></a><span id="l38.22">         // You shouldn't be able to delete from the composite calendar.</span>
<a href="#l38.23"></a><span id="l38.23">         throw NS_ERROR_NOT_IMPLEMENTED;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/calendar/providers/gdata/components/calGoogleCalendar.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/calendar/providers/gdata/components/calGoogleCalendar.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -95,45 +95,45 @@ calGoogleCalendar.prototype = {</span>
<a href="#l39.4"></a><span id="l39.4">     ensureWritable: function() {</span>
<a href="#l39.5"></a><span id="l39.5">         // Check if calendar is readonly</span>
<a href="#l39.6"></a><span id="l39.6">         if (this.readOnly) {</span>
<a href="#l39.7"></a><span id="l39.7">             const cIE = Components.interfaces.calIErrors;</span>
<a href="#l39.8"></a><span id="l39.8">             throw new Components.Exception(&quot;&quot;, cIE.CAL_IS_READONLY);</span>
<a href="#l39.9"></a><span id="l39.9">         }</span>
<a href="#l39.10"></a><span id="l39.10">     },</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    get isDefaultCalendar() this.mCalendarName ? !this.mCalendarName.endsWith(&quot;@group.calendar.google.com&quot;) : false,</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+    get isDefaultCalendar() { return this.mCalendarName ? !this.mCalendarName.endsWith(&quot;@group.calendar.google.com&quot;) : false; },</span>
<a href="#l39.14"></a><span id="l39.14"> </span>
<a href="#l39.15"></a><span id="l39.15">     /*</span>
<a href="#l39.16"></a><span id="l39.16">      * implement calICalendar</span>
<a href="#l39.17"></a><span id="l39.17">      */</span>
<a href="#l39.18"></a><span id="l39.18" class="difflineminus">-    get type() &quot;gdata&quot;,</span>
<a href="#l39.19"></a><span id="l39.19" class="difflineminus">-    get providerID() &quot;{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}&quot;,</span>
<a href="#l39.20"></a><span id="l39.20" class="difflineminus">-    get canRefresh() true,</span>
<a href="#l39.21"></a><span id="l39.21" class="difflineplus">+    get type() { return &quot;gdata&quot;; },</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineplus">+    get providerID() { return &quot;{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}&quot;; },</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineplus">+    get canRefresh() { return true; },</span>
<a href="#l39.24"></a><span id="l39.24"> </span>
<a href="#l39.25"></a><span id="l39.25" class="difflineminus">-    get id() this.mID,</span>
<a href="#l39.26"></a><span id="l39.26" class="difflineplus">+    get id() { return this.mID; },</span>
<a href="#l39.27"></a><span id="l39.27">     set id(val) {</span>
<a href="#l39.28"></a><span id="l39.28">         let setter = this.__proto__.__proto__.__lookupSetter__(&quot;id&quot;);</span>
<a href="#l39.29"></a><span id="l39.29">         val = setter.call(this, val);</span>
<a href="#l39.30"></a><span id="l39.30"> </span>
<a href="#l39.31"></a><span id="l39.31">         if (this.id &amp;&amp; this.uri) {</span>
<a href="#l39.32"></a><span id="l39.32">             this.ensureSession();</span>
<a href="#l39.33"></a><span id="l39.33">         }</span>
<a href="#l39.34"></a><span id="l39.34">         return val;</span>
<a href="#l39.35"></a><span id="l39.35">     },</span>
<a href="#l39.36"></a><span id="l39.36"> </span>
<a href="#l39.37"></a><span id="l39.37" class="difflineminus">-    get uri() this.mUri,</span>
<a href="#l39.38"></a><span id="l39.38" class="difflineplus">+    get uri() { return this.mUri; },</span>
<a href="#l39.39"></a><span id="l39.39">     set uri(aUri) {</span>
<a href="#l39.40"></a><span id="l39.40">         const protocols = [&quot;http&quot;, &quot;https&quot;, &quot;webcal&quot;, &quot;webcals&quot;];</span>
<a href="#l39.41"></a><span id="l39.41">         this.mUri = aUri;</span>
<a href="#l39.42"></a><span id="l39.42">         if (aUri &amp;&amp; aUri.schemeIs(&quot;googleapi&quot;)) {</span>
<a href="#l39.43"></a><span id="l39.43">             // new format:  googleapi://session-id/?calendar=calhash@group.calendar.google.com&amp;tasks=taskhash</span>
<a href="#l39.44"></a><span id="l39.44">             let [fullUser, path] = aUri.path.substr(2).split(&quot;/&quot;, 2);</span>
<a href="#l39.45"></a><span id="l39.45">             let parameters = new Map(path.substr(1).split(&quot;&amp;&quot;).filter(Boolean)</span>
<a href="#l39.46"></a><span id="l39.46" class="difflineminus">-                             .map(function(x) x.split(&quot;=&quot;, 2).map(decodeURIComponent)));</span>
<a href="#l39.47"></a><span id="l39.47" class="difflineplus">+                             .map(function(x) { return x.split(&quot;=&quot;, 2).map(decodeURIComponent); }));</span>
<a href="#l39.48"></a><span id="l39.48"> </span>
<a href="#l39.49"></a><span id="l39.49">             if (parameters.size == 0) {</span>
<a href="#l39.50"></a><span id="l39.50">                 this.mCalendarName = fullUser;</span>
<a href="#l39.51"></a><span id="l39.51">                 this.mTasklistName = this.isDefaultCalendar ? &quot;@default&quot; : null;</span>
<a href="#l39.52"></a><span id="l39.52">             } else {</span>
<a href="#l39.53"></a><span id="l39.53">                 this.mCalendarName = parameters.get(&quot;calendar&quot;);</span>
<a href="#l39.54"></a><span id="l39.54">                 this.mTasklistName = parameters.get(&quot;tasks&quot;);</span>
<a href="#l39.55"></a><span id="l39.55">             }</span>
<a href="#l39.56"></a><span id="l39.56" class="difflineat">@@ -334,17 +334,17 @@ calGoogleCalendar.prototype = {</span>
<a href="#l39.57"></a><span id="l39.57">     },</span>
<a href="#l39.58"></a><span id="l39.58"> </span>
<a href="#l39.59"></a><span id="l39.59">     addItemOrUseCache: calendarShim.addItemOrUseCache,</span>
<a href="#l39.60"></a><span id="l39.60">     adoptItemOrUseCache: calendarShim.adoptItemOrUseCache,</span>
<a href="#l39.61"></a><span id="l39.61">     modifyItemOrUseCache: calendarShim.modifyItemOrUseCache,</span>
<a href="#l39.62"></a><span id="l39.62">     deleteItemOrUseCache: calendarShim.deleteItemOrUseCache,</span>
<a href="#l39.63"></a><span id="l39.63">     notifyPureOperationComplete: calendarShim.notifyPureOperationComplete,</span>
<a href="#l39.64"></a><span id="l39.64"> </span>
<a href="#l39.65"></a><span id="l39.65" class="difflineminus">-    addItem: function(aItem, aListener) this.adoptItem(aItem.clone(), aListener),</span>
<a href="#l39.66"></a><span id="l39.66" class="difflineplus">+    addItem: function(aItem, aListener) { return this.adoptItem(aItem.clone(), aListener); },</span>
<a href="#l39.67"></a><span id="l39.67">     adoptItem: function(aItem, aListener) {</span>
<a href="#l39.68"></a><span id="l39.68">         function stackContains(part, max) {</span>
<a href="#l39.69"></a><span id="l39.69">             if (max === undefined) max = 8;</span>
<a href="#l39.70"></a><span id="l39.70">             let stack = Components.stack.caller;</span>
<a href="#l39.71"></a><span id="l39.71">             while (stack &amp;&amp; --max) {</span>
<a href="#l39.72"></a><span id="l39.72">                 if (stack.filename &amp;&amp; stack.filename.endsWith(part)) {</span>
<a href="#l39.73"></a><span id="l39.73">                     return true;</span>
<a href="#l39.74"></a><span id="l39.74">                 }</span>
<a href="#l39.75"></a><span id="l39.75" class="difflineat">@@ -598,17 +598,17 @@ calGoogleCalendar.prototype = {</span>
<a href="#l39.76"></a><span id="l39.76"> </span>
<a href="#l39.77"></a><span id="l39.77">     refresh: function() {</span>
<a href="#l39.78"></a><span id="l39.78">         this.mObservers.notify(&quot;onLoad&quot;, [this]);</span>
<a href="#l39.79"></a><span id="l39.79">     },</span>
<a href="#l39.80"></a><span id="l39.80"> </span>
<a href="#l39.81"></a><span id="l39.81">     /**</span>
<a href="#l39.82"></a><span id="l39.82">      * Implement calIChangeLog</span>
<a href="#l39.83"></a><span id="l39.83">      */</span>
<a href="#l39.84"></a><span id="l39.84" class="difflineminus">-    get offlineStorage() this.mOfflineStorage,</span>
<a href="#l39.85"></a><span id="l39.85" class="difflineplus">+    get offlineStorage() { return this.mOfflineStorage; },</span>
<a href="#l39.86"></a><span id="l39.86">     set offlineStorage(val) {</span>
<a href="#l39.87"></a><span id="l39.87">         this.mOfflineStorage = val;</span>
<a href="#l39.88"></a><span id="l39.88">         let cacheVersion = this.getProperty(&quot;cache.version&quot;);</span>
<a href="#l39.89"></a><span id="l39.89">         let resetPromise;</span>
<a href="#l39.90"></a><span id="l39.90">         if (cacheVersion &amp;&amp; cacheVersion != this.CACHE_DB_VERSION) {</span>
<a href="#l39.91"></a><span id="l39.91">             cal.LOG(&quot;[calGoogleCalendar] Migrating cache from &quot; +</span>
<a href="#l39.92"></a><span id="l39.92">                     cacheVersion + &quot; to &quot; + this.CACHE_DB_VERSION);</span>
<a href="#l39.93"></a><span id="l39.93">             this.resetSync()</span>
<a href="#l39.94"></a><span id="l39.94" class="difflineat">@@ -675,17 +675,17 @@ calGoogleCalendar.prototype = {</span>
<a href="#l39.95"></a><span id="l39.95">         let calendarPromise = Promise.resolve();</span>
<a href="#l39.96"></a><span id="l39.96">         if (this.mCalendarName &amp;&amp; this.checkThrottle(&quot;calendarList&quot;)) {</span>
<a href="#l39.97"></a><span id="l39.97">             let calendarRequest = new calGoogleRequest();</span>
<a href="#l39.98"></a><span id="l39.98">             calendarRequest.calendar = this;</span>
<a href="#l39.99"></a><span id="l39.99">             calendarRequest.type = calendarRequest.GET;</span>
<a href="#l39.100"></a><span id="l39.100">             calendarRequest.uri = this.createUsersURI(&quot;calendarList&quot;, this.mCalendarName)</span>
<a href="#l39.101"></a><span id="l39.101">             calendarPromise = this.session.asyncItemRequest(calendarRequest).then(function(aData) {</span>
<a href="#l39.102"></a><span id="l39.102">                 if (aData.defaultReminders) {</span>
<a href="#l39.103"></a><span id="l39.103" class="difflineminus">-                    this.defaultReminders = aData.defaultReminders.map(function(x) JSONToAlarm(x, true));</span>
<a href="#l39.104"></a><span id="l39.104" class="difflineplus">+                    this.defaultReminders = aData.defaultReminders.map(function(x) { return JSONToAlarm(x, true); });</span>
<a href="#l39.105"></a><span id="l39.105">                 } else {</span>
<a href="#l39.106"></a><span id="l39.106">                     this.defaultReminders = [];</span>
<a href="#l39.107"></a><span id="l39.107">                 }</span>
<a href="#l39.108"></a><span id="l39.108"> </span>
<a href="#l39.109"></a><span id="l39.109">                 for each (let k in [&quot;accessRole&quot;, &quot;backgroundColor&quot;, &quot;description&quot;,</span>
<a href="#l39.110"></a><span id="l39.110">                                     &quot;foregroundColor&quot;, &quot;location&quot;, &quot;primary&quot;,</span>
<a href="#l39.111"></a><span id="l39.111">                                     &quot;summary&quot;, &quot;summaryOverride&quot;, &quot;timeZone&quot;]) {</span>
<a href="#l39.112"></a><span id="l39.112">                     this.setProperty(&quot;settings.&quot; + k, aData[k]);</span>
<a href="#l39.113"></a><span id="l39.113" class="difflineat">@@ -775,12 +775,12 @@ calGoogleCalendar.prototype = {</span>
<a href="#l39.114"></a><span id="l39.114">         }.bind(this));</span>
<a href="#l39.115"></a><span id="l39.115">     },</span>
<a href="#l39.116"></a><span id="l39.116"> </span>
<a href="#l39.117"></a><span id="l39.117">     /**</span>
<a href="#l39.118"></a><span id="l39.118">      * Implement calISchedulingSupport. Most is taken care of by the base</span>
<a href="#l39.119"></a><span id="l39.119">      * provider, but we want to advertise that we will always take care of</span>
<a href="#l39.120"></a><span id="l39.120">      * notifications.</span>
<a href="#l39.121"></a><span id="l39.121">      */</span>
<a href="#l39.122"></a><span id="l39.122" class="difflineminus">-    canNotify: function(aMethod, aItem) true</span>
<a href="#l39.123"></a><span id="l39.123" class="difflineplus">+    canNotify: function(aMethod, aItem) { return true; }</span>
<a href="#l39.124"></a><span id="l39.124"> };</span>
<a href="#l39.125"></a><span id="l39.125"> </span>
<a href="#l39.126"></a><span id="l39.126"> var NSGetFactory = XPCOMUtils.generateNSGetFactory([calGoogleCalendar]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/calendar/providers/gdata/content/gdata-calendar-creation.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/calendar/providers/gdata/content/gdata-calendar-creation.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -105,17 +105,17 @@ CuImport(&quot;resource://gre/modules/Promise</span>
<a href="#l40.4"></a><span id="l40.4">             let sessionGroup = document.getElementById(&quot;gdata-session-group&quot;);</span>
<a href="#l40.5"></a><span id="l40.5">             let sessionName = document.getElementById(&quot;gdata-session-name&quot;);</span>
<a href="#l40.6"></a><span id="l40.6">             let sessionNameIsValid = document.getAnonymousElementByAttribute(sessionName, &quot;anonid&quot;, &quot;input&quot;).validity.valid;</span>
<a href="#l40.7"></a><span id="l40.7">             // TODO for some reason the validity doesn't work on windows. Here is a hack:</span>
<a href="#l40.8"></a><span id="l40.8">             sessionNameIsValid = !!sessionName.value.match(/^[^\/]+@[^\/]+\.[^\/]+$/);</span>
<a href="#l40.9"></a><span id="l40.9">             wizard.canAdvance = sessionGroup.value || (sessionName.value &amp;&amp; sessionNameIsValid);</span>
<a href="#l40.10"></a><span id="l40.10">         } else if (currentPageId == &quot;gdata-calendars&quot;) {</span>
<a href="#l40.11"></a><span id="l40.11">             let calendarList = document.getElementById(&quot;calendar-list&quot;);</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-            let calendars = calendarList.selectedCalendars.filter(function(x) !x.getProperty(&quot;disabled&quot;) &amp;&amp; !x.readOnly);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+            let calendars = calendarList.selectedCalendars.filter(function(x) { return !x.getProperty(&quot;disabled&quot;) &amp;&amp; !x.readOnly; });</span>
<a href="#l40.14"></a><span id="l40.14">             wizard.canAdvance = !!calendars.length;</span>
<a href="#l40.15"></a><span id="l40.15">         } else {</span>
<a href="#l40.16"></a><span id="l40.16">             protofunc();</span>
<a href="#l40.17"></a><span id="l40.17">         }</span>
<a href="#l40.18"></a><span id="l40.18">     });</span>
<a href="#l40.19"></a><span id="l40.19"> </span>
<a href="#l40.20"></a><span id="l40.20">     this.gdataSessionShow = trycatch(function() {</span>
<a href="#l40.21"></a><span id="l40.21">         let sessionMgr = getGoogleSessionManager();</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -210,17 +210,17 @@ CuImport(&quot;resource://gre/modules/Promise</span>
<a href="#l40.23"></a><span id="l40.23">             calendarListWidget.calendars = calendars;</span>
<a href="#l40.24"></a><span id="l40.24">         }.bind(this), function(e) {</span>
<a href="#l40.25"></a><span id="l40.25">             Components.utils.reportError(e);</span>
<a href="#l40.26"></a><span id="l40.26">         }.bind(this));</span>
<a href="#l40.27"></a><span id="l40.27">     });</span>
<a href="#l40.28"></a><span id="l40.28"> </span>
<a href="#l40.29"></a><span id="l40.29">     this.gdataCalendarsAdvance = trycatch(function() {</span>
<a href="#l40.30"></a><span id="l40.30">         let calendarList = document.getElementById(&quot;calendar-list&quot;);</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-        let calendars = calendarList.selectedCalendars.filter(function(x) !x.getProperty(&quot;disabled&quot;) &amp;&amp; !x.readOnly);</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+        let calendars = calendarList.selectedCalendars.filter(function(x) { return !x.getProperty(&quot;disabled&quot;) &amp;&amp; !x.readOnly; });</span>
<a href="#l40.33"></a><span id="l40.33">         let calMgr = cal.getCalendarManager();</span>
<a href="#l40.34"></a><span id="l40.34"> </span>
<a href="#l40.35"></a><span id="l40.35">         if (Services.vc.compare(Services.appinfo.platformVersion, &quot;9.0&quot;) &lt; 0) {</span>
<a href="#l40.36"></a><span id="l40.36">             // This version didn't allow creating calendars with an id set, we</span>
<a href="#l40.37"></a><span id="l40.37">             // will have to hack it in.</span>
<a href="#l40.38"></a><span id="l40.38">             calendars.forEach(gdataRegisterCalendar);</span>
<a href="#l40.39"></a><span id="l40.39">         } else {</span>
<a href="#l40.40"></a><span id="l40.40">             calendars.forEach(calMgr.registerCalendar, calMgr);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/calendar/providers/gdata/content/gdata-calendar-event-dialog.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/calendar/providers/gdata/content/gdata-calendar-event-dialog.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -179,17 +179,17 @@ Components.utils.import(&quot;resource://gdat</span>
<a href="#l41.4"></a><span id="l41.4">         let calendar = getCurrentCalendar().getProperty(&quot;cache.uncachedCalendar&quot;);</span>
<a href="#l41.5"></a><span id="l41.5">         let unwrappedCal = calendar &amp;&amp; calendar.wrappedJSObject;</span>
<a href="#l41.6"></a><span id="l41.6">         let defaultReminders = unwrappedCal.defaultReminders ? unwrappedCal.defaultReminders.concat([]) : [];</span>
<a href="#l41.7"></a><span id="l41.7">         defaultItem.reminders = defaultReminders;</span>
<a href="#l41.8"></a><span id="l41.8"> </span>
<a href="#l41.9"></a><span id="l41.9">         let rv = null;</span>
<a href="#l41.10"></a><span id="l41.10">         let usesDefault;</span>
<a href="#l41.11"></a><span id="l41.11">         if (reminders.length) {</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-            usesDefault = reminders.every(function(x) x.hasProperty(&quot;X-DEFAULT-ALARM&quot;));</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+            usesDefault = reminders.every(function(x) { return x.hasProperty(&quot;X-DEFAULT-ALARM&quot;); });</span>
<a href="#l41.14"></a><span id="l41.14">         } else {</span>
<a href="#l41.15"></a><span id="l41.15">             usesDefault = window.calendarItem.getProperty(&quot;X-DEFAULT-ALARM&quot;) == &quot;TRUE&quot;;</span>
<a href="#l41.16"></a><span id="l41.16">         }</span>
<a href="#l41.17"></a><span id="l41.17"> </span>
<a href="#l41.18"></a><span id="l41.18">         if (calendar.type == &quot;gdata&quot; &amp;&amp; (window.mode == &quot;new&quot; || usesDefault)) {</span>
<a href="#l41.19"></a><span id="l41.19">             // If all reminders are default reminders, then select the menuitem.</span>
<a href="#l41.20"></a><span id="l41.20">             reminderList.value = &quot;default&quot;;</span>
<a href="#l41.21"></a><span id="l41.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/calendar/providers/gdata/content/gdata-calendar-properties.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/calendar/providers/gdata/content/gdata-calendar-properties.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -15,17 +15,17 @@</span>
<a href="#l42.4"></a><span id="l42.4">             // Disable setting read-only if the calendar is readonly anyway</span>
<a href="#l42.5"></a><span id="l42.5">             document.getElementById(&quot;read-only&quot;).disabled = isDisabled || (isEventsCalendar &amp;&amp; isReader);</span>
<a href="#l42.6"></a><span id="l42.6"> </span>
<a href="#l42.7"></a><span id="l42.7">             // Don't allow setting refresh interval to 30 minutes or less</span>
<a href="#l42.8"></a><span id="l42.8">             let refInterval = document.getElementById(&quot;calendar-refreshInterval-menupopup&quot;);</span>
<a href="#l42.9"></a><span id="l42.9">             Array.slice(refInterval.childNodes).filter(function(n) {</span>
<a href="#l42.10"></a><span id="l42.10">                 let nv = parseInt(n.getAttribute(&quot;value&quot;), 10);</span>
<a href="#l42.11"></a><span id="l42.11">                 return nv &lt; 30 &amp;&amp; nv != 0;</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-            }).forEach(function(n) refInterval.removeChild(n));</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+            }).forEach(function(n) { refInterval.removeChild(n); });</span>
<a href="#l42.14"></a><span id="l42.14"> </span>
<a href="#l42.15"></a><span id="l42.15">             // Old Lightning doesn't hide the cache label</span>
<a href="#l42.16"></a><span id="l42.16">             let oldCacheLabel = document.getElementById(&quot;cache&quot;);</span>
<a href="#l42.17"></a><span id="l42.17">             if (oldCacheLabel) {</span>
<a href="#l42.18"></a><span id="l42.18">                 oldCacheLabel.setAttribute(&quot;hidden&quot;, &quot;true&quot;);</span>
<a href="#l42.19"></a><span id="l42.19">             }</span>
<a href="#l42.20"></a><span id="l42.20">         }</span>
<a href="#l42.21"></a><span id="l42.21">         return rv;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/calendar/providers/gdata/modules/OAuth2.jsm</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/OAuth2.jsm</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -113,17 +113,17 @@ OAuth2.prototype = {</span>
<a href="#l43.4"></a><span id="l43.4">         if (this.scope) {</span>
<a href="#l43.5"></a><span id="l43.5">             params.push([&quot;scope&quot;, this.scope]);</span>
<a href="#l43.6"></a><span id="l43.6">         }</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8">         // Add extra parameters, if they exist</span>
<a href="#l43.9"></a><span id="l43.9">         Array.prototype.push.apply(params, this.extraAuthParams);</span>
<a href="#l43.10"></a><span id="l43.10"> </span>
<a href="#l43.11"></a><span id="l43.11">         // Now map the parameters to a string</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-        params = params.map(function([k,v]) k + &quot;=&quot; + encodeURIComponent(v)).join(&quot;&amp;&quot;);</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+        params = params.map(function([k, v]) { return k + &quot;=&quot; + encodeURIComponent(v); }).join(&quot;&amp;&quot;);</span>
<a href="#l43.14"></a><span id="l43.14"> </span>
<a href="#l43.15"></a><span id="l43.15">         this._browserRequest = {</span>
<a href="#l43.16"></a><span id="l43.16">             account: this,</span>
<a href="#l43.17"></a><span id="l43.17">             url: this.authURI + &quot;?&quot; + params,</span>
<a href="#l43.18"></a><span id="l43.18">             description: this.requestWindowDescription,</span>
<a href="#l43.19"></a><span id="l43.19">             _active: true,</span>
<a href="#l43.20"></a><span id="l43.20">             iconURI: &quot;&quot;,</span>
<a href="#l43.21"></a><span id="l43.21">             cancelled: function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataRequest.jsm</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataRequest.jsm</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -121,17 +121,17 @@ calGoogleRequest.prototype = {</span>
<a href="#l44.4"></a><span id="l44.4">         }</span>
<a href="#l44.5"></a><span id="l44.5">     },</span>
<a href="#l44.6"></a><span id="l44.6"> </span>
<a href="#l44.7"></a><span id="l44.7">     /**</span>
<a href="#l44.8"></a><span id="l44.8">      * attribute type</span>
<a href="#l44.9"></a><span id="l44.9">      * The type of this reqest. Must be one of</span>
<a href="#l44.10"></a><span id="l44.10">      * GET, ADD, MODIFY, DELETE</span>
<a href="#l44.11"></a><span id="l44.11">      */</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-    get type() this.method,</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+    get type() { return this.method; },</span>
<a href="#l44.14"></a><span id="l44.14"> </span>
<a href="#l44.15"></a><span id="l44.15">     set type(v) {</span>
<a href="#l44.16"></a><span id="l44.16">         let valid = [this.GET, this.ADD, this.MODIFY, this.PATCH, this.DELETE];</span>
<a href="#l44.17"></a><span id="l44.17">         if (valid.indexOf(v) &lt; 0) {</span>
<a href="#l44.18"></a><span id="l44.18">             throw new Components.Exception(&quot;Invalid request type: &quot; + v,</span>
<a href="#l44.19"></a><span id="l44.19">                                             Components.results.NS_ERROR_ILLEGAL_VALUE);</span>
<a href="#l44.20"></a><span id="l44.20">         }</span>
<a href="#l44.21"></a><span id="l44.21">         return (this.method = v);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataSession.jsm</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataSession.jsm</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -47,17 +47,17 @@ var calGoogleSessionManager = {</span>
<a href="#l45.4"></a><span id="l45.4"> </span>
<a href="#l45.5"></a><span id="l45.5">         if (aCalendar.type != &quot;gdata&quot;) {</span>
<a href="#l45.6"></a><span id="l45.6">             return;</span>
<a href="#l45.7"></a><span id="l45.7">         }</span>
<a href="#l45.8"></a><span id="l45.8"> </span>
<a href="#l45.9"></a><span id="l45.9">         if (uri.schemeIs(&quot;googleapi&quot;)) {</span>
<a href="#l45.10"></a><span id="l45.10">             let [fullUser, path] = uri.path.substr(2).split(&quot;/&quot;, 2);</span>
<a href="#l45.11"></a><span id="l45.11">             id = fullUser || cal.getUUID();</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-        } else if (host == &quot;www.google.com&quot; &amp;&amp; uri.path.startsWith(&quot;/calendar/feeds&quot;) &amp;&amp; protocols.some(function(s) uri.schemeIs(s))) {</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+        } else if (host == &quot;www.google.com&quot; &amp;&amp; uri.path.startsWith(&quot;/calendar/feeds&quot;) &amp;&amp; protocols.some(function(s) { return uri.schemeIs(s); })) {</span>
<a href="#l45.14"></a><span id="l45.14">             let googleCalendarName = aCalendar.getProperty(&quot;googleCalendarName&quot;);</span>
<a href="#l45.15"></a><span id="l45.15">             let googleUser = Preferences.get(&quot;calendar.google.calPrefs.&quot; + googleCalendarName  + &quot;.googleUser&quot;);</span>
<a href="#l45.16"></a><span id="l45.16">             id = googleUser || googleCalendarName || cal.getUUID();</span>
<a href="#l45.17"></a><span id="l45.17">         }</span>
<a href="#l45.18"></a><span id="l45.18"> </span>
<a href="#l45.19"></a><span id="l45.19">         return id ? this.getSessionById(id, aCreate) : null;</span>
<a href="#l45.20"></a><span id="l45.20">     },</span>
<a href="#l45.21"></a><span id="l45.21"> </span>
<a href="#l45.22"></a><span id="l45.22" class="difflineat">@@ -68,17 +68,17 @@ var calGoogleSessionManager = {</span>
<a href="#l45.23"></a><span id="l45.23">         } else if (aCreate) {</span>
<a href="#l45.24"></a><span id="l45.24">             cal.LOG(&quot;[calGoogleSessionManager] Creating session &quot; + aSessionId);</span>
<a href="#l45.25"></a><span id="l45.25">             gdataSessionMap.set(aSessionId, new calGoogleSession(aSessionId));</span>
<a href="#l45.26"></a><span id="l45.26">         }</span>
<a href="#l45.27"></a><span id="l45.27"> </span>
<a href="#l45.28"></a><span id="l45.28">         return gdataSessionMap.get(aSessionId);</span>
<a href="#l45.29"></a><span id="l45.29">     }</span>
<a href="#l45.30"></a><span id="l45.30"> };</span>
<a href="#l45.31"></a><span id="l45.31" class="difflineminus">-function getGoogleSessionManager() calGoogleSessionManager;</span>
<a href="#l45.32"></a><span id="l45.32" class="difflineplus">+function getGoogleSessionManager() { return calGoogleSessionManager; }</span>
<a href="#l45.33"></a><span id="l45.33"> </span>
<a href="#l45.34"></a><span id="l45.34"> /**</span>
<a href="#l45.35"></a><span id="l45.35">  * calGoogleSession</span>
<a href="#l45.36"></a><span id="l45.36">  * This Implements a Session object to communicate with google</span>
<a href="#l45.37"></a><span id="l45.37">  *</span>
<a href="#l45.38"></a><span id="l45.38">  * @constructor</span>
<a href="#l45.39"></a><span id="l45.39">  * @class</span>
<a href="#l45.40"></a><span id="l45.40">  * @param aId       The ID for the new session.</span>
<a href="#l45.41"></a><span id="l45.41" class="difflineat">@@ -93,17 +93,17 @@ function calGoogleSession(aId) {</span>
<a href="#l45.42"></a><span id="l45.42">     cal.getFreeBusyService().addProvider(this);</span>
<a href="#l45.43"></a><span id="l45.43"> }</span>
<a href="#l45.44"></a><span id="l45.44"> </span>
<a href="#l45.45"></a><span id="l45.45"> calGoogleSession.prototype = {</span>
<a href="#l45.46"></a><span id="l45.46">     mId: null,</span>
<a href="#l45.47"></a><span id="l45.47">     mSessionID: null,</span>
<a href="#l45.48"></a><span id="l45.48">     mLoginPromise: null,</span>
<a href="#l45.49"></a><span id="l45.49"> </span>
<a href="#l45.50"></a><span id="l45.50" class="difflineminus">-    get id() this.mId,</span>
<a href="#l45.51"></a><span id="l45.51" class="difflineplus">+    get id() { return this.mId; },</span>
<a href="#l45.52"></a><span id="l45.52"> </span>
<a href="#l45.53"></a><span id="l45.53">     notifyQuotaExceeded: function() {</span>
<a href="#l45.54"></a><span id="l45.54">         let now = new Date();</span>
<a href="#l45.55"></a><span id="l45.55">         let tt = (now - this.mLastNotified);</span>
<a href="#l45.56"></a><span id="l45.56">         if (!this.mLastNotified || (now - this.mLastNotified) &gt; NOTIFY_TIMEOUT) {</span>
<a href="#l45.57"></a><span id="l45.57">             this.mLastNotified = now;</span>
<a href="#l45.58"></a><span id="l45.58">             let title = getProviderString(&quot;extensions.{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}.name&quot;);</span>
<a href="#l45.59"></a><span id="l45.59">             let quotaString = getProviderString(&quot;quotaExceeded&quot;, this.id);</span>
<a href="#l45.60"></a><span id="l45.60" class="difflineat">@@ -190,19 +190,19 @@ calGoogleSession.prototype = {</span>
<a href="#l45.61"></a><span id="l45.61">             if (!found || found.capability != nIPM.DENY_ACTION) {</span>
<a href="#l45.62"></a><span id="l45.62">                 Services.perms.remove(&quot;google.com&quot;, &quot;cookie&quot;);</span>
<a href="#l45.63"></a><span id="l45.63">                 let uri = Services.io.newURI(&quot;http://google.com&quot;, null, null);</span>
<a href="#l45.64"></a><span id="l45.64">                 Services.perms.add(uri, &quot;cookie&quot;, nIPM.ALLOW_ACTION, nIPM.EXPIRE_SESSION);</span>
<a href="#l45.65"></a><span id="l45.65">             }</span>
<a href="#l45.66"></a><span id="l45.66">         }</span>
<a href="#l45.67"></a><span id="l45.67">     },</span>
<a href="#l45.68"></a><span id="l45.68"> </span>
<a href="#l45.69"></a><span id="l45.69" class="difflineminus">-    get accessToken() this.oauth.accessToken,</span>
<a href="#l45.70"></a><span id="l45.70" class="difflineminus">-    get refreshToken() this.oauth.refreshToken,</span>
<a href="#l45.71"></a><span id="l45.71" class="difflineminus">-    set refreshToken(val) this.oauth.refreshToken = val,</span>
<a href="#l45.72"></a><span id="l45.72" class="difflineplus">+    get accessToken() { return this.oauth.accessToken; },</span>
<a href="#l45.73"></a><span id="l45.73" class="difflineplus">+    get refreshToken() { return this.oauth.refreshToken; },</span>
<a href="#l45.74"></a><span id="l45.74" class="difflineplus">+    set refreshToken(val) { this.oauth.refreshToken = val; },</span>
<a href="#l45.75"></a><span id="l45.75"> </span>
<a href="#l45.76"></a><span id="l45.76">     /**</span>
<a href="#l45.77"></a><span id="l45.77">      * Resets the access token, it will be re-retrieved on the next request.</span>
<a href="#l45.78"></a><span id="l45.78">      */</span>
<a href="#l45.79"></a><span id="l45.79">     invalidate: function cGS_invalidate() {</span>
<a href="#l45.80"></a><span id="l45.80">         cal.LOG(&quot;[calGoogleSession] Invalidating session, will reauthenticate on next request&quot;);</span>
<a href="#l45.81"></a><span id="l45.81">         this.oauth.accessToken = null;</span>
<a href="#l45.82"></a><span id="l45.82">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/calendar/providers/gdata/modules/gdataUtils.jsm</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/gdataUtils.jsm</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -79,17 +79,17 @@ function migrateItemMetadata(aOfflineSto</span>
<a href="#l46.4"></a><span id="l46.4">     if (aNewItem.status == &quot;CANCELLED&quot;) {</span>
<a href="#l46.5"></a><span id="l46.5">         deleteItemMetadata(aOfflineStorage, aNewItem);</span>
<a href="#l46.6"></a><span id="l46.6">     } else {</span>
<a href="#l46.7"></a><span id="l46.7">         saveItemMetadata(aOfflineStorage, aNewItem.hashId, aMetadata);</span>
<a href="#l46.8"></a><span id="l46.8">     }</span>
<a href="#l46.9"></a><span id="l46.9"> </span>
<a href="#l46.10"></a><span id="l46.10">     // If an exception was turned into an EXDATE, we need to clear its metadata</span>
<a href="#l46.11"></a><span id="l46.11">     if (aOldItem.recurrenceInfo &amp;&amp; aNewItem.recurrenceInfo) {</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-        let newExIds = new Set(aNewItem.recurrenceInfo.getExceptionIds({}).map(function(x) x.icalString));</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+        let newExIds = new Set(aNewItem.recurrenceInfo.getExceptionIds({}).map(function(x) { return x.icalString; }));</span>
<a href="#l46.14"></a><span id="l46.14">         for each (let exId in aOldItem.recurrenceInfo.getExceptionIds({})) {</span>
<a href="#l46.15"></a><span id="l46.15">             if (!newExIds.has(exId.icalString)) {</span>
<a href="#l46.16"></a><span id="l46.16">                 let ex = aOldItem.recurrenceInfo.getExceptionFor(exId);</span>
<a href="#l46.17"></a><span id="l46.17">                 deleteItemMetadata(aOfflineStorage, ex);</span>
<a href="#l46.18"></a><span id="l46.18">             }</span>
<a href="#l46.19"></a><span id="l46.19">         }</span>
<a href="#l46.20"></a><span id="l46.20">     }</span>
<a href="#l46.21"></a><span id="l46.21"> }</span>
<a href="#l46.22"></a><span id="l46.22" class="difflineat">@@ -934,17 +934,17 @@ ItemSaver.prototype = {</span>
<a href="#l46.23"></a><span id="l46.23">             if (!aData.items || !aData.items.length) {</span>
<a href="#l46.24"></a><span id="l46.24">                 cal.LOG(&quot;[calGoogleCalendar] No events have been changed on &quot; + this.calendar.name);</span>
<a href="#l46.25"></a><span id="l46.25">                 return;</span>
<a href="#l46.26"></a><span id="l46.26">             } else {</span>
<a href="#l46.27"></a><span id="l46.27">                 cal.LOG(&quot;[calGoogleCalendar] Parsing &quot; + aData.items.length + &quot; received events&quot;);</span>
<a href="#l46.28"></a><span id="l46.28">             }</span>
<a href="#l46.29"></a><span id="l46.29"> </span>
<a href="#l46.30"></a><span id="l46.30">             let exceptionItems = [];</span>
<a href="#l46.31"></a><span id="l46.31" class="difflineminus">-            let defaultReminders = (aData.defaultReminders || []).map(function(x) JSONToAlarm(x, true));</span>
<a href="#l46.32"></a><span id="l46.32" class="difflineplus">+            let defaultReminders = (aData.defaultReminders || []).map(function(x) { return JSONToAlarm(x, true); });</span>
<a href="#l46.33"></a><span id="l46.33"> </span>
<a href="#l46.34"></a><span id="l46.34">             let tzs = cal.getTimezoneService();</span>
<a href="#l46.35"></a><span id="l46.35">             let defaultTimezone = (aData.timeZone ? tzs.getTimezone(aData.timeZone) :</span>
<a href="#l46.36"></a><span id="l46.36">                                     cal.calendarDefaultTimezone());</span>
<a href="#l46.37"></a><span id="l46.37"> </span>
<a href="#l46.38"></a><span id="l46.38">             // In the first pass, we go through the data and sort into master items and</span>
<a href="#l46.39"></a><span id="l46.39">             // exception items, as the master item might be after the exception in the</span>
<a href="#l46.40"></a><span id="l46.40">             // stream.</span>
<a href="#l46.41"></a><span id="l46.41" class="difflineat">@@ -1237,12 +1237,12 @@ function monkeyPatch(obj, x, func) {</span>
<a href="#l46.42"></a><span id="l46.42"> function spinEventLoop() {</span>
<a href="#l46.43"></a><span id="l46.43">     let diff = new Date() - spinEventLoop.lastSpin;</span>
<a href="#l46.44"></a><span id="l46.44">     if (diff &lt; Preferences.get(&quot;calendar.threading.latency&quot;, 250)) {</span>
<a href="#l46.45"></a><span id="l46.45">         return Promise.resolve(false);</span>
<a href="#l46.46"></a><span id="l46.46">     }</span>
<a href="#l46.47"></a><span id="l46.47">     spinEventLoop.lastSpin = new Date();</span>
<a href="#l46.48"></a><span id="l46.48"> </span>
<a href="#l46.49"></a><span id="l46.49">     let deferred = PromiseUtils.defer();</span>
<a href="#l46.50"></a><span id="l46.50" class="difflineminus">-    Services.tm.currentThread.dispatch({ run: function() deferred.resolve(true) }, 0);</span>
<a href="#l46.51"></a><span id="l46.51" class="difflineplus">+    Services.tm.currentThread.dispatch({ run: function() { return deferred.resolve(true); } }, 0);</span>
<a href="#l46.52"></a><span id="l46.52">     return deferred.promise;</span>
<a href="#l46.53"></a><span id="l46.53"> }</span>
<a href="#l46.54"></a><span id="l46.54"> spinEventLoop.lastSpin = new Date();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/calendar/providers/gdata/modules/shim/Calendar.jsm</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/shim/Calendar.jsm</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -254,16 +254,16 @@ function promisifyCalendar(aCalendar) {</span>
<a href="#l47.4"></a><span id="l47.4">                     }.bind(this);</span>
<a href="#l47.5"></a><span id="l47.5">                 default:</span>
<a href="#l47.6"></a><span id="l47.6">                     return target[name];</span>
<a href="#l47.7"></a><span id="l47.7">             }</span>
<a href="#l47.8"></a><span id="l47.8">         }</span>
<a href="#l47.9"></a><span id="l47.9">     };</span>
<a href="#l47.10"></a><span id="l47.10">     return {</span>
<a href="#l47.11"></a><span id="l47.11">         // Backwards compat, we can use |new Proxy(aCalendar, promisifyProxyHandler);| in the future.</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-        adoptItem: function(aItem) promisifyProxyHandler.get(aCalendar, &quot;adoptItem&quot;).apply(this, arguments),</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineminus">-        addItem: function(aItem) promisifyProxyHandler.get(aCalendar, &quot;addItem&quot;).apply(this, arguments),</span>
<a href="#l47.14"></a><span id="l47.14" class="difflineminus">-        modifyItem: function(aItem) promisifyProxyHandler.get(aCalendar, &quot;modifyItem&quot;).apply(this, arguments),</span>
<a href="#l47.15"></a><span id="l47.15" class="difflineminus">-        deleteItem: function(aItem) promisifyProxyHandler.get(aCalendar, &quot;deleteItem&quot;).apply(this, arguments),</span>
<a href="#l47.16"></a><span id="l47.16" class="difflineminus">-        getItem: function(aItem) promisifyProxyHandler.get(aCalendar, &quot;getItem&quot;).apply(this, arguments),</span>
<a href="#l47.17"></a><span id="l47.17" class="difflineminus">-        getItems: function(aItems) promisifyProxyHandler.get(aCalendar, &quot;getItems&quot;).apply(this, arguments),</span>
<a href="#l47.18"></a><span id="l47.18" class="difflineplus">+        adoptItem: function(aItem) { return promisifyProxyHandler.get(aCalendar, &quot;adoptItem&quot;).apply(this, arguments); },</span>
<a href="#l47.19"></a><span id="l47.19" class="difflineplus">+        addItem: function(aItem) { return promisifyProxyHandler.get(aCalendar, &quot;addItem&quot;).apply(this, arguments); },</span>
<a href="#l47.20"></a><span id="l47.20" class="difflineplus">+        modifyItem: function(aItem) { return promisifyProxyHandler.get(aCalendar, &quot;modifyItem&quot;).apply(this, arguments); },</span>
<a href="#l47.21"></a><span id="l47.21" class="difflineplus">+        deleteItem: function(aItem) { return promisifyProxyHandler.get(aCalendar, &quot;deleteItem&quot;).apply(this, arguments); },</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineplus">+        getItem: function(aItem) { return promisifyProxyHandler.get(aCalendar, &quot;getItem&quot;).apply(this, arguments); },</span>
<a href="#l47.23"></a><span id="l47.23" class="difflineplus">+        getItems: function(aItems) { return promisifyProxyHandler.get(aCalendar, &quot;getItems&quot;).apply(this, arguments); },</span>
<a href="#l47.24"></a><span id="l47.24">     };</span>
<a href="#l47.25"></a><span id="l47.25"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/calendar/providers/gdata/modules/shim/Http.jsm</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/shim/Http.jsm</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -1,18 +1,19 @@</span>
<a href="#l48.4"></a><span id="l48.4"> /* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l48.5"></a><span id="l48.5">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l48.6"></a><span id="l48.6">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l48.7"></a><span id="l48.7"> </span>
<a href="#l48.8"></a><span id="l48.8"> var EXPORTED_SYMBOLS = [&quot;percentEncode&quot;, &quot;httpRequest&quot;];</span>
<a href="#l48.9"></a><span id="l48.9"> </span>
<a href="#l48.10"></a><span id="l48.10"> const {classes: Cc, interfaces: Ci, utils: Cu} = Components;</span>
<a href="#l48.11"></a><span id="l48.11"> </span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-function percentEncode(aString)</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineminus">-  encodeURIComponent(aString).replace(/[!'()]/g, escape).replace(/\*/g, &quot;%2A&quot;);</span>
<a href="#l48.14"></a><span id="l48.14" class="difflineplus">+function percentEncode(aString) {</span>
<a href="#l48.15"></a><span id="l48.15" class="difflineplus">+  return encodeURIComponent(aString).replace(/[!'()]/g, escape).replace(/\*/g, &quot;%2A&quot;);</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineplus">+}</span>
<a href="#l48.17"></a><span id="l48.17"> </span>
<a href="#l48.18"></a><span id="l48.18"> function httpRequest(aUrl, aOptions) {</span>
<a href="#l48.19"></a><span id="l48.19">   let xhr = Cc[&quot;@mozilla.org/xmlextras/xmlhttprequest;1&quot;]</span>
<a href="#l48.20"></a><span id="l48.20">               .createInstance(Ci.nsIXMLHttpRequest);</span>
<a href="#l48.21"></a><span id="l48.21">   xhr.mozBackgroundRequest = true; // no error dialogs</span>
<a href="#l48.22"></a><span id="l48.22">   xhr.open(aOptions.method || (aOptions.postData ? &quot;POST&quot; : &quot;GET&quot;), aUrl);</span>
<a href="#l48.23"></a><span id="l48.23">   xhr.channel.loadFlags = Ci.nsIChannel.LOAD_ANONYMOUS | // don't send cookies</span>
<a href="#l48.24"></a><span id="l48.24">                           Ci.nsIChannel.LOAD_BYPASS_CACHE |</span>
<a href="#l48.25"></a><span id="l48.25" class="difflineat">@@ -61,17 +62,17 @@ function httpRequest(aUrl, aOptions) {</span>
<a href="#l48.26"></a><span id="l48.26">     });</span>
<a href="#l48.27"></a><span id="l48.27">   }</span>
<a href="#l48.28"></a><span id="l48.28"> </span>
<a href="#l48.29"></a><span id="l48.29">   // Handle adding postData as defined above.</span>
<a href="#l48.30"></a><span id="l48.30">   let POSTData = aOptions.postData || &quot;&quot;;</span>
<a href="#l48.31"></a><span id="l48.31">   if (Array.isArray(POSTData)) {</span>
<a href="#l48.32"></a><span id="l48.32">     xhr.setRequestHeader(&quot;Content-Type&quot;,</span>
<a href="#l48.33"></a><span id="l48.33">                          &quot;application/x-www-form-urlencoded; charset=utf-8&quot;);</span>
<a href="#l48.34"></a><span id="l48.34" class="difflineminus">-    POSTData = POSTData.map(function(p) p[0] + &quot;=&quot; + percentEncode(p[1]))</span>
<a href="#l48.35"></a><span id="l48.35" class="difflineplus">+    POSTData = POSTData.map(function(p) { return p[0] + &quot;=&quot; + percentEncode(p[1]); })</span>
<a href="#l48.36"></a><span id="l48.36">                        .join(&quot;&amp;&quot;);</span>
<a href="#l48.37"></a><span id="l48.37">   }</span>
<a href="#l48.38"></a><span id="l48.38"> </span>
<a href="#l48.39"></a><span id="l48.39">   if (aOptions.logger) {</span>
<a href="#l48.40"></a><span id="l48.40">     aOptions.logger.log(&quot;sending request to &quot; + aUrl + &quot; (POSTData = &quot; +</span>
<a href="#l48.41"></a><span id="l48.41">                         POSTData + &quot;)&quot;);</span>
<a href="#l48.42"></a><span id="l48.42">   }</span>
<a href="#l48.43"></a><span id="l48.43">   xhr.send(POSTData);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/calendar/providers/gdata/modules/shim/Loader.jsm</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/shim/Loader.jsm</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -140,29 +140,29 @@ function Map(values) {</span>
<a href="#l49.4"></a><span id="l49.4">     this.data = Object.create(null);</span>
<a href="#l49.5"></a><span id="l49.5">     if (values) {</span>
<a href="#l49.6"></a><span id="l49.6">         for each (let [k,v] in values) {</span>
<a href="#l49.7"></a><span id="l49.7">             this.data[k] = v;</span>
<a href="#l49.8"></a><span id="l49.8">         }</span>
<a href="#l49.9"></a><span id="l49.9">     }</span>
<a href="#l49.10"></a><span id="l49.10"> }</span>
<a href="#l49.11"></a><span id="l49.11"> Map.prototype = {</span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-    has: function(k) k in this.data,</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineminus">-    set: function(k, v) this.data[k] = v,</span>
<a href="#l49.14"></a><span id="l49.14" class="difflineminus">-    get: function(k) this.data[k],</span>
<a href="#l49.15"></a><span id="l49.15" class="difflineminus">-    delete: function(k) delete this.data[k],</span>
<a href="#l49.16"></a><span id="l49.16" class="difflineminus">-    get size() Object.keys(this.data).length,</span>
<a href="#l49.17"></a><span id="l49.17" class="difflineplus">+    has: function(k) { return k in this.data; },</span>
<a href="#l49.18"></a><span id="l49.18" class="difflineplus">+    set: function(k, v) { return this.data[k] = v; },</span>
<a href="#l49.19"></a><span id="l49.19" class="difflineplus">+    get: function(k) { return this.data[k]; },</span>
<a href="#l49.20"></a><span id="l49.20" class="difflineplus">+    delete: function(k) { return delete this.data[k]; },</span>
<a href="#l49.21"></a><span id="l49.21" class="difflineplus">+    get size() { return Object.keys(this.data).length; },</span>
<a href="#l49.22"></a><span id="l49.22">     forEach: function(cb) {</span>
<a href="#l49.23"></a><span id="l49.23">         for (let k in this.data) {</span>
<a href="#l49.24"></a><span id="l49.24">             cb(this.data[k], k, this);</span>
<a href="#l49.25"></a><span id="l49.25">         }</span>
<a href="#l49.26"></a><span id="l49.26">     },</span>
<a href="#l49.27"></a><span id="l49.27"> </span>
<a href="#l49.28"></a><span id="l49.28" class="difflineminus">-    toSource: function() Object.prototype.toSource.call(this.data),</span>
<a href="#l49.29"></a><span id="l49.29" class="difflineminus">-    __iterator__: function() new Iterator(this.data)</span>
<a href="#l49.30"></a><span id="l49.30" class="difflineplus">+    toSource: function() { return Object.prototype.toSource.call(this.data); },</span>
<a href="#l49.31"></a><span id="l49.31" class="difflineplus">+    __iterator__: function() { return new Iterator(this.data); }</span>
<a href="#l49.32"></a><span id="l49.32"> };</span>
<a href="#l49.33"></a><span id="l49.33"> </span>
<a href="#l49.34"></a><span id="l49.34"> /**</span>
<a href="#l49.35"></a><span id="l49.35">  * Not a particularly fast implementation of Set, but since our keys can be</span>
<a href="#l49.36"></a><span id="l49.36">  * objects we can't just use normal js objects.</span>
<a href="#l49.37"></a><span id="l49.37">  */</span>
<a href="#l49.38"></a><span id="l49.38"> function Set(values) {</span>
<a href="#l49.39"></a><span id="l49.39">     this.data = [];</span>
<a href="#l49.40"></a><span id="l49.40" class="difflineat">@@ -173,35 +173,35 @@ function Set(values) {</span>
<a href="#l49.41"></a><span id="l49.41"> Set.prototype = {</span>
<a href="#l49.42"></a><span id="l49.42">     has: function(v) {</span>
<a href="#l49.43"></a><span id="l49.43">         for each (let dv in this.data) {</span>
<a href="#l49.44"></a><span id="l49.44">             if (v == dv) return true;</span>
<a href="#l49.45"></a><span id="l49.45">         }</span>
<a href="#l49.46"></a><span id="l49.46">         return false;</span>
<a href="#l49.47"></a><span id="l49.47">     },</span>
<a href="#l49.48"></a><span id="l49.48"> </span>
<a href="#l49.49"></a><span id="l49.49" class="difflineminus">-    get size() this.data.length,</span>
<a href="#l49.50"></a><span id="l49.50" class="difflineminus">-    add: function(v) this.has(v) ? null : this.data.push(v),</span>
<a href="#l49.51"></a><span id="l49.51" class="difflineminus">-    clear: function() this.data = [],</span>
<a href="#l49.52"></a><span id="l49.52" class="difflineplus">+    get size() { return this.data.length; },</span>
<a href="#l49.53"></a><span id="l49.53" class="difflineplus">+    add: function(v) { return this.has(v) ? null : this.data.push(v); },</span>
<a href="#l49.54"></a><span id="l49.54" class="difflineplus">+    clear: function() { return this.data = []; },</span>
<a href="#l49.55"></a><span id="l49.55">     delete: function(v) {</span>
<a href="#l49.56"></a><span id="l49.56">         for (let i = 0; i &lt; this.data.length; i++) {</span>
<a href="#l49.57"></a><span id="l49.57">             if (this.data[i] == v) {</span>
<a href="#l49.58"></a><span id="l49.58">                 this.data.splice(i, 1);</span>
<a href="#l49.59"></a><span id="l49.59">                 return;</span>
<a href="#l49.60"></a><span id="l49.60">             }</span>
<a href="#l49.61"></a><span id="l49.61">         }</span>
<a href="#l49.62"></a><span id="l49.62">     },</span>
<a href="#l49.63"></a><span id="l49.63"> </span>
<a href="#l49.64"></a><span id="l49.64">     forEach: function(cb) {</span>
<a href="#l49.65"></a><span id="l49.65">         for each (let v in this.data) {</span>
<a href="#l49.66"></a><span id="l49.66">             cb(v, v, this);</span>
<a href="#l49.67"></a><span id="l49.67">         }</span>
<a href="#l49.68"></a><span id="l49.68">     },</span>
<a href="#l49.69"></a><span id="l49.69"> </span>
<a href="#l49.70"></a><span id="l49.70" class="difflineminus">-    toSource: function() this.data.toSource(),</span>
<a href="#l49.71"></a><span id="l49.71" class="difflineplus">+    toSource: function() { return this.data.toSource(); },</span>
<a href="#l49.72"></a><span id="l49.72">     __iterator__: function() {</span>
<a href="#l49.73"></a><span id="l49.73">         for each (let v in this.data) {</span>
<a href="#l49.74"></a><span id="l49.74">             yield v;</span>
<a href="#l49.75"></a><span id="l49.75">         }</span>
<a href="#l49.76"></a><span id="l49.76">     }</span>
<a href="#l49.77"></a><span id="l49.77"> };</span>
<a href="#l49.78"></a><span id="l49.78"> </span>
<a href="#l49.79"></a><span id="l49.79"> if (!cal.hashColor) {</span>
<a href="#l49.80"></a><span id="l49.80" class="difflineat">@@ -219,12 +219,12 @@ if (!cal.hashColor) {</span>
<a href="#l49.81"></a><span id="l49.81">                               &quot;#33CC00&quot;, &quot;#00CCCC&quot;, &quot;#3366FF&quot;, &quot;#6633FF&quot;, &quot;#CC33CC&quot;,</span>
<a href="#l49.82"></a><span id="l49.82">                               &quot;#666666&quot;, &quot;#990000&quot;, &quot;#CC6600&quot;, &quot;#CC9933&quot;, &quot;#999900&quot;,</span>
<a href="#l49.83"></a><span id="l49.83">                               &quot;#009900&quot;, &quot;#339999&quot;, &quot;#3333FF&quot;, &quot;#6600CC&quot;, &quot;#993399&quot;,</span>
<a href="#l49.84"></a><span id="l49.84">                               &quot;#333333&quot;, &quot;#660000&quot;, &quot;#993300&quot;, &quot;#996633&quot;, &quot;#666600&quot;,</span>
<a href="#l49.85"></a><span id="l49.85">                               &quot;#006600&quot;, &quot;#336666&quot;, &quot;#000099&quot;, &quot;#333399&quot;, &quot;#663366&quot;,</span>
<a href="#l49.86"></a><span id="l49.86">                               &quot;#000000&quot;, &quot;#330000&quot;, &quot;#663300&quot;, &quot;#663333&quot;, &quot;#333300&quot;,</span>
<a href="#l49.87"></a><span id="l49.87">                               &quot;#003300&quot;, &quot;#003333&quot;, &quot;#000066&quot;, &quot;#330099&quot;, &quot;#330033&quot;];</span>
<a href="#l49.88"></a><span id="l49.88"> </span>
<a href="#l49.89"></a><span id="l49.89" class="difflineminus">-        let sum = Array.map(str || &quot; &quot;, function(e) e.charCodeAt(0)).reduce(function(a,b) a + b);</span>
<a href="#l49.90"></a><span id="l49.90" class="difflineplus">+        let sum = Array.map(str || &quot; &quot;, function(e) { return e.charCodeAt(0); }).reduce(function(a, b) { return a + b; });</span>
<a href="#l49.91"></a><span id="l49.91">         return colorPalette[sum % colorPalette.length];</span>
<a href="#l49.92"></a><span id="l49.92">     }</span>
<a href="#l49.93"></a><span id="l49.93"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/calendar/providers/gdata/modules/shim/Preferences.jsm</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/shim/Preferences.jsm</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -2,12 +2,12 @@</span>
<a href="#l50.4"></a><span id="l50.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l50.5"></a><span id="l50.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l50.6"></a><span id="l50.6"> </span>
<a href="#l50.7"></a><span id="l50.7"> var EXPORTED_SYMBOLS = [&quot;Preferences&quot;];</span>
<a href="#l50.8"></a><span id="l50.8"> </span>
<a href="#l50.9"></a><span id="l50.9"> Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l50.10"></a><span id="l50.10"> </span>
<a href="#l50.11"></a><span id="l50.11"> var Preferences = {</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-    has: function(k) !!cal.getPrefSafe(k),</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineminus">-    get: function(k, v) cal.getPrefSafe(k, v),</span>
<a href="#l50.14"></a><span id="l50.14" class="difflineminus">-    set: function(k, v) cal.setPref(k, v)</span>
<a href="#l50.15"></a><span id="l50.15" class="difflineplus">+    has: function(k) { return !!cal.getPrefSafe(k); },</span>
<a href="#l50.16"></a><span id="l50.16" class="difflineplus">+    get: function(k, v) { return cal.getPrefSafe(k, v); },</span>
<a href="#l50.17"></a><span id="l50.17" class="difflineplus">+    set: function(k, v) { return cal.setPref(k, v); }</span>
<a href="#l50.18"></a><span id="l50.18"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/calendar/providers/gdata/modules/shim/Promise.jsm</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/shim/Promise.jsm</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -144,13 +144,13 @@ Promise.prototype = {</span>
<a href="#l51.4"></a><span id="l51.4"> Promise.defer = function() {</span>
<a href="#l51.5"></a><span id="l51.5">     return new Deferred();</span>
<a href="#l51.6"></a><span id="l51.6"> };</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8"> Promise.resolve = function(aValue) {</span>
<a href="#l51.9"></a><span id="l51.9">     if (aValue instanceof Promise) {</span>
<a href="#l51.10"></a><span id="l51.10">         return aValue;</span>
<a href="#l51.11"></a><span id="l51.11">     }</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-    return new Promise(function(aResolve) aResolve(aValue));</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+    return new Promise(function(aResolve) { return aResolve(aValue); });</span>
<a href="#l51.14"></a><span id="l51.14"> };</span>
<a href="#l51.15"></a><span id="l51.15"> Promise.reject = function(aReason) {</span>
<a href="#l51.16"></a><span id="l51.16" class="difflineminus">-    return new Promise(function(_, aReject) aReject(aReason));</span>
<a href="#l51.17"></a><span id="l51.17" class="difflineplus">+    return new Promise(function(_, aReject) { return aReject(aReason); });</span>
<a href="#l51.18"></a><span id="l51.18"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l52.1"></a><span id="l52.1" class="difflineminus">--- a/calendar/providers/gdata/modules/shim/PromiseExtras.jsm</span>
<a href="#l52.2"></a><span id="l52.2" class="difflineplus">+++ b/calendar/providers/gdata/modules/shim/PromiseExtras.jsm</span>
<a href="#l52.3"></a><span id="l52.3" class="difflineat">@@ -38,17 +38,17 @@ if (typeof Promise.all == &quot;function&quot;) {</span>
<a href="#l52.4"></a><span id="l52.4">     if (!countdown) {</span>
<a href="#l52.5"></a><span id="l52.5">       return Promise.resolve(resolutionValues);</span>
<a href="#l52.6"></a><span id="l52.6">     }</span>
<a href="#l52.7"></a><span id="l52.7"> </span>
<a href="#l52.8"></a><span id="l52.8">     let deferred = PromiseUtils.defer();</span>
<a href="#l52.9"></a><span id="l52.9">     for (let i = 0; i &lt; values.length; i++) {</span>
<a href="#l52.10"></a><span id="l52.10">       let index = i;</span>
<a href="#l52.11"></a><span id="l52.11">       let value = values[i];</span>
<a href="#l52.12"></a><span id="l52.12" class="difflineminus">-      let resolver = function(val) checkForCompletion(val, index);</span>
<a href="#l52.13"></a><span id="l52.13" class="difflineplus">+      let resolver = function(val) { return checkForCompletion(val, index); };</span>
<a href="#l52.14"></a><span id="l52.14"> </span>
<a href="#l52.15"></a><span id="l52.15">       if (value &amp;&amp; typeof(value.then) == &quot;function&quot;) {</span>
<a href="#l52.16"></a><span id="l52.16">         value.then(resolver, deferred.reject);</span>
<a href="#l52.17"></a><span id="l52.17">       } else {</span>
<a href="#l52.18"></a><span id="l52.18">         // Given value is not a promise, forward it as a resolution value.</span>
<a href="#l52.19"></a><span id="l52.19">         resolver(value);</span>
<a href="#l52.20"></a><span id="l52.20">       }</span>
<a href="#l52.21"></a><span id="l52.21">     }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l53.1"></a><span id="l53.1" class="difflineminus">--- a/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l53.2"></a><span id="l53.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l53.3"></a><span id="l53.3" class="difflineat">@@ -1522,17 +1522,17 @@ upgrade.v22 = function upgrade_v22(db, v</span>
<a href="#l53.4"></a><span id="l53.4">         });</span>
<a href="#l53.5"></a><span id="l53.5">         migrateToIcalString(tbl, &quot;cal_attendees&quot;, &quot;translateAttendee&quot;,</span>
<a href="#l53.6"></a><span id="l53.6">                             [&quot;attendee_id&quot;, &quot;common_name&quot;, &quot;rsvp&quot;, &quot;role&quot;,</span>
<a href="#l53.7"></a><span id="l53.7">                              &quot;status&quot;, &quot;type&quot;, &quot;is_organizer&quot;, &quot;properties&quot;], db);</span>
<a href="#l53.8"></a><span id="l53.8"> </span>
<a href="#l53.9"></a><span id="l53.9">         // Update recurrence table to using icalString directly</span>
<a href="#l53.10"></a><span id="l53.10">         createFunction(db, &quot;translateRecurrence&quot;, 17, {</span>
<a href="#l53.11"></a><span id="l53.11">             onFunctionCall: function translateRecurrence(storArgs) {</span>
<a href="#l53.12"></a><span id="l53.12" class="difflineminus">-                function parseInt10(x) parseInt(x, 10);</span>
<a href="#l53.13"></a><span id="l53.13" class="difflineplus">+                function parseInt10(x) { return parseInt(x, 10); }</span>
<a href="#l53.14"></a><span id="l53.14">                 try {</span>
<a href="#l53.15"></a><span id="l53.15">                     let [aIndex, aType, aIsNegative, aDates, aCount,</span>
<a href="#l53.16"></a><span id="l53.16">                          aEndDate, aInterval, aSecond, aMinute, aHour,</span>
<a href="#l53.17"></a><span id="l53.17">                          aDay, aMonthday, aYearday, aWeekno, aMonth,</span>
<a href="#l53.18"></a><span id="l53.18">                          aSetPos, aTmpFlags] = mapStorageArgs(storArgs);</span>
<a href="#l53.19"></a><span id="l53.19"> </span>
<a href="#l53.20"></a><span id="l53.20">                     let ritem;</span>
<a href="#l53.21"></a><span id="l53.21">                     if (aType == &quot;x-date&quot;) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l54.1"></a><span id="l54.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l54.2"></a><span id="l54.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l54.3"></a><span id="l54.3" class="difflineat">@@ -138,17 +138,17 @@ calWcapCalendar.prototype.encodeRecurren</span>
<a href="#l54.4"></a><span id="l54.4">     // check with store(with no uid) upon adoptItem() which behaves strange</span>
<a href="#l54.5"></a><span id="l54.5">     // if rchange=0 is set!</span>
<a href="#l54.6"></a><span id="l54.6"> };</span>
<a href="#l54.7"></a><span id="l54.7"> </span>
<a href="#l54.8"></a><span id="l54.8"> calWcapCalendar.prototype.getAlarmParams =</span>
<a href="#l54.9"></a><span id="l54.9"> function calWcapCalendar_getAlarmParams(item) {</span>
<a href="#l54.10"></a><span id="l54.10">     let params = null;</span>
<a href="#l54.11"></a><span id="l54.11">     // xxx TODO ALARMSUPPORT check if WCAP supports multiple alarms</span>
<a href="#l54.12"></a><span id="l54.12" class="difflineminus">-    let alarms = item.getAlarms({}).filter(function(x) x.action == &quot;EMAIL&quot;);</span>
<a href="#l54.13"></a><span id="l54.13" class="difflineplus">+    let alarms = item.getAlarms({}).filter(x =&gt; x.action == &quot;EMAIL&quot;);</span>
<a href="#l54.14"></a><span id="l54.14">     let alarm = alarms.length &gt; 0 &amp;&amp; alarms[0];</span>
<a href="#l54.15"></a><span id="l54.15"> </span>
<a href="#l54.16"></a><span id="l54.16">     if (alarm) {</span>
<a href="#l54.17"></a><span id="l54.17">         let alarmStart = cal.alarms.calculateAlarmOffset(item, alarm);</span>
<a href="#l54.18"></a><span id="l54.18">         if (alarm.related == alarm.ALARM_RELATED_END) {</span>
<a href="#l54.19"></a><span id="l54.19">             // cs does not support explicit RELATED=END when</span>
<a href="#l54.20"></a><span id="l54.20">             // both start|entry and end|due are written</span>
<a href="#l54.21"></a><span id="l54.21">             let dur = item.duration;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l55.1"></a><span id="l55.1" class="difflineminus">--- a/calendar/resources/content/calendarCreation.js</span>
<a href="#l55.2"></a><span id="l55.2" class="difflineplus">+++ b/calendar/resources/content/calendarCreation.js</span>
<a href="#l55.3"></a><span id="l55.3" class="difflineat">@@ -217,17 +217,17 @@ function parseUri(aUri) {</span>
<a href="#l55.4"></a><span id="l55.4">         uri = makeURL(aUri);</span>
<a href="#l55.5"></a><span id="l55.5">     } catch (ex) {</span>
<a href="#l55.6"></a><span id="l55.6">         return [errorConstants.INVALID_URI, null];</span>
<a href="#l55.7"></a><span id="l55.7">     }</span>
<a href="#l55.8"></a><span id="l55.8"> </span>
<a href="#l55.9"></a><span id="l55.9">     let calManager = cal.getCalendarManager();</span>
<a href="#l55.10"></a><span id="l55.10">     let cals = calManager.getCalendars({});</span>
<a href="#l55.11"></a><span id="l55.11">     let type = document.getElementById('calendar-type').selectedItem.value;</span>
<a href="#l55.12"></a><span id="l55.12" class="difflineminus">-    if (type != 'local' &amp;&amp; cals.some(function (c) c.uri.spec == uri.spec)) {</span>
<a href="#l55.13"></a><span id="l55.13" class="difflineplus">+    if (type != 'local' &amp;&amp; cals.some(c =&gt; c.uri.spec == uri.spec)) {</span>
<a href="#l55.14"></a><span id="l55.14">         // If the calendar is not local, we check if there is already a calendar</span>
<a href="#l55.15"></a><span id="l55.15">         // with the same uri spec. Storage calendars all have the same uri, so</span>
<a href="#l55.16"></a><span id="l55.16">         // we have to specialcase them.</span>
<a href="#l55.17"></a><span id="l55.17">         return [errorConstants.ALREADY_EXISTS, null];</span>
<a href="#l55.18"></a><span id="l55.18">     }</span>
<a href="#l55.19"></a><span id="l55.19"> </span>
<a href="#l55.20"></a><span id="l55.20">     return [errorConstants.SUCCESS, uri];</span>
<a href="#l55.21"></a><span id="l55.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l56.1"></a><span id="l56.1" class="difflineminus">--- a/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l56.2"></a><span id="l56.2" class="difflineplus">+++ b/calendar/test/mozmill/testLocalICS.js</span>
<a href="#l56.3"></a><span id="l56.3" class="difflineat">@@ -58,17 +58,17 @@ var testLocalICS = function () {</span>
<a href="#l56.4"></a><span id="l56.4">   event.type(titleTextBox, title);</span>
<a href="#l56.5"></a><span id="l56.5">   </span>
<a href="#l56.6"></a><span id="l56.6">   // set calendar</span>
<a href="#l56.7"></a><span id="l56.7">   let itemCalendar = new elementslib.ID(event.window.document, &quot;item-calendar&quot;)</span>
<a href="#l56.8"></a><span id="l56.8">   event.select(itemCalendar, undefined, calendar);</span>
<a href="#l56.9"></a><span id="l56.9">   // HACK - Wait for the value to be selected. This is needed for platforms</span>
<a href="#l56.10"></a><span id="l56.10">   // like mac where selecting the menuitem is an asynchronous process, it might</span>
<a href="#l56.11"></a><span id="l56.11">   // be fixed in a later version of mozmill.</span>
<a href="#l56.12"></a><span id="l56.12" class="difflineminus">-  event.waitFor(function() itemCalendar.getNode().value == calendar);</span>
<a href="#l56.13"></a><span id="l56.13" class="difflineplus">+  event.waitFor(() =&gt; itemCalendar.getNode().value == calendar);</span>
<a href="#l56.14"></a><span id="l56.14">   </span>
<a href="#l56.15"></a><span id="l56.15">   // save</span>
<a href="#l56.16"></a><span id="l56.16">   event.click(new elementslib.ID(event.window.document, &quot;button-save&quot;));</span>
<a href="#l56.17"></a><span id="l56.17">   </span>
<a href="#l56.18"></a><span id="l56.18">   // assert presence in view</span>
<a href="#l56.19"></a><span id="l56.19">   let box = calUtils.getEventBoxPath(controller, &quot;day&quot;, calUtils.EVENT_BOX, undefined, 1, hour)</span>
<a href="#l56.20"></a><span id="l56.20">     + '/{&quot;tooltip&quot;:&quot;itemTooltip&quot;,&quot;calendar&quot;:&quot;' + calendar + '&quot;}';</span>
<a href="#l56.21"></a><span id="l56.21">   controller.waitForElement(new elementslib.Lookup(controller.window.document, box));</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l57.1"></a><span id="l57.1" class="difflineminus">--- a/calendar/test/unit/test_alarm.js</span>
<a href="#l57.2"></a><span id="l57.2" class="difflineplus">+++ b/calendar/test/unit/test_alarm.js</span>
<a href="#l57.3"></a><span id="l57.3" class="difflineat">@@ -493,24 +493,24 @@ function test_serialize() {</span>
<a href="#l57.4"></a><span id="l57.4">     let alarm = cal.createAlarm();</span>
<a href="#l57.5"></a><span id="l57.5">     let srv = cal.getIcsService();</span>
<a href="#l57.6"></a><span id="l57.6"> </span>
<a href="#l57.7"></a><span id="l57.7">     throws(function() {</span>
<a href="#l57.8"></a><span id="l57.8">         alarm.icalComponent = srv.createIcalComponent(&quot;BARF&quot;);</span>
<a href="#l57.9"></a><span id="l57.9">     }, /0x80070057/ , &quot;Invalid Argument&quot;);</span>
<a href="#l57.10"></a><span id="l57.10"> </span>
<a href="#l57.11"></a><span id="l57.11">     function addProp(k,v) { let p = srv.createIcalProperty(k); p.value = v; comp.addProperty(p) }</span>
<a href="#l57.12"></a><span id="l57.12" class="difflineminus">-    function addActionDisplay() addProp(&quot;ACTION&quot;, &quot;DISPLAY&quot;);</span>
<a href="#l57.13"></a><span id="l57.13" class="difflineminus">-    function addActionEmail() addProp(&quot;ACTION&quot;, &quot;EMAIL&quot;);</span>
<a href="#l57.14"></a><span id="l57.14" class="difflineminus">-    function addTrigger() addProp(&quot;TRIGGER&quot;, &quot;-PT15M&quot;);</span>
<a href="#l57.15"></a><span id="l57.15" class="difflineminus">-    function addDescr() addProp(&quot;DESCRIPTION&quot;, &quot;TEST&quot;);</span>
<a href="#l57.16"></a><span id="l57.16" class="difflineminus">-    function addDuration() addProp(&quot;DURATION&quot;, &quot;-PT15M&quot;);</span>
<a href="#l57.17"></a><span id="l57.17" class="difflineminus">-    function addRepeat() addProp(&quot;REPEAT&quot;, &quot;1&quot;);</span>
<a href="#l57.18"></a><span id="l57.18" class="difflineminus">-    function addAttendee() addProp(&quot;ATTENDEE&quot;, &quot;mailto:horst&quot;);</span>
<a href="#l57.19"></a><span id="l57.19" class="difflineminus">-    function addAttachment() addProp(&quot;ATTACH&quot;, &quot;data:yeah&quot;);</span>
<a href="#l57.20"></a><span id="l57.20" class="difflineplus">+    function addActionDisplay() { addProp(&quot;ACTION&quot;, &quot;DISPLAY&quot;); }</span>
<a href="#l57.21"></a><span id="l57.21" class="difflineplus">+    function addActionEmail() { addProp(&quot;ACTION&quot;, &quot;EMAIL&quot;); }</span>
<a href="#l57.22"></a><span id="l57.22" class="difflineplus">+    function addTrigger() { addProp(&quot;TRIGGER&quot;, &quot;-PT15M&quot;); }</span>
<a href="#l57.23"></a><span id="l57.23" class="difflineplus">+    function addDescr() { addProp(&quot;DESCRIPTION&quot;, &quot;TEST&quot;); }</span>
<a href="#l57.24"></a><span id="l57.24" class="difflineplus">+    function addDuration() { addProp(&quot;DURATION&quot;, &quot;-PT15M&quot;); }</span>
<a href="#l57.25"></a><span id="l57.25" class="difflineplus">+    function addRepeat() { addProp(&quot;REPEAT&quot;, &quot;1&quot;); }</span>
<a href="#l57.26"></a><span id="l57.26" class="difflineplus">+    function addAttendee() { addProp(&quot;ATTENDEE&quot;, &quot;mailto:horst&quot;); }</span>
<a href="#l57.27"></a><span id="l57.27" class="difflineplus">+    function addAttachment() { addProp(&quot;ATTACH&quot;, &quot;data:yeah&quot;); }</span>
<a href="#l57.28"></a><span id="l57.28"> </span>
<a href="#l57.29"></a><span id="l57.29">     // All is there, should not throw</span>
<a href="#l57.30"></a><span id="l57.30">     let comp = srv.createIcalComponent(&quot;VALARM&quot;);</span>
<a href="#l57.31"></a><span id="l57.31">     addActionDisplay(); addTrigger(); addDescr(); addDuration(); addRepeat();</span>
<a href="#l57.32"></a><span id="l57.32">     alarm.icalComponent = comp;</span>
<a href="#l57.33"></a><span id="l57.33">     alarm.toString();</span>
<a href="#l57.34"></a><span id="l57.34"> </span>
<a href="#l57.35"></a><span id="l57.35">     // Attachments and attendees</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l58.1"></a><span id="l58.1" class="difflineminus">--- a/calendar/test/unit/test_alarmservice.js</span>
<a href="#l58.2"></a><span id="l58.2" class="difflineplus">+++ b/calendar/test/unit/test_alarmservice.js</span>
<a href="#l58.3"></a><span id="l58.3" class="difflineat">@@ -4,17 +4,17 @@</span>
<a href="#l58.4"></a><span id="l58.4"> </span>
<a href="#l58.5"></a><span id="l58.5"> Components.utils.import(&quot;resource://calendar/modules/calUtils.jsm&quot;);</span>
<a href="#l58.6"></a><span id="l58.6"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l58.7"></a><span id="l58.7"> </span>
<a href="#l58.8"></a><span id="l58.8"> const EXPECT_NONE = 0;</span>
<a href="#l58.9"></a><span id="l58.9"> const EXPECT_FIRED = 1;</span>
<a href="#l58.10"></a><span id="l58.10"> const EXPECT_TIMER = 2;</span>
<a href="#l58.11"></a><span id="l58.11"> </span>
<a href="#l58.12"></a><span id="l58.12" class="difflineminus">-function do_check_xor(a, b) ok((a &amp;&amp; !b) || (!a &amp;&amp; b));</span>
<a href="#l58.13"></a><span id="l58.13" class="difflineplus">+function do_check_xor(a, b) { return ok((a &amp;&amp; !b) || (!a &amp;&amp; b)); }</span>
<a href="#l58.14"></a><span id="l58.14"> </span>
<a href="#l58.15"></a><span id="l58.15"> let alarmObserver = {</span>
<a href="#l58.16"></a><span id="l58.16">     service: null,</span>
<a href="#l58.17"></a><span id="l58.17">     firedMap: {},</span>
<a href="#l58.18"></a><span id="l58.18">     expectedMap: {},</span>
<a href="#l58.19"></a><span id="l58.19">     pendingOps: {},</span>
<a href="#l58.20"></a><span id="l58.20"> </span>
<a href="#l58.21"></a><span id="l58.21">     onAlarm: function obs_onAlarm(aItem, aAlarm) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l59.1"></a><span id="l59.1" class="difflineminus">--- a/calendar/test/unit/test_calmgr.js</span>
<a href="#l59.2"></a><span id="l59.2" class="difflineplus">+++ b/calendar/test/unit/test_calmgr.js</span>
<a href="#l59.3"></a><span id="l59.3" class="difflineat">@@ -39,24 +39,24 @@ function test_calobserver() {</span>
<a href="#l59.4"></a><span id="l59.4">     // First of all we need a local calendar to work on and some variables</span>
<a href="#l59.5"></a><span id="l59.5">     let calmgr = cal.getCalendarManager();</span>
<a href="#l59.6"></a><span id="l59.6">     let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l59.7"></a><span id="l59.7">     let memory2 = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-memory-calendar://&quot;, null, null));</span>
<a href="#l59.8"></a><span id="l59.8">     let calcounter, allcounter;</span>
<a href="#l59.9"></a><span id="l59.9"> </span>
<a href="#l59.10"></a><span id="l59.10">     // These observers will end up counting calls which we will use later on</span>
<a href="#l59.11"></a><span id="l59.11">     let calobs = cal.createAdapter(Components.interfaces.calIObserver, {</span>
<a href="#l59.12"></a><span id="l59.12" class="difflineminus">-        onAddItem: function(itm) calcounter.addItem++,</span>
<a href="#l59.13"></a><span id="l59.13" class="difflineminus">-        onModifyItem: function(itm) calcounter.modifyItem++,</span>
<a href="#l59.14"></a><span id="l59.14" class="difflineminus">-        onDeleteItem: function(itm) calcounter.deleteItem++</span>
<a href="#l59.15"></a><span id="l59.15" class="difflineplus">+        onAddItem: itm =&gt; calcounter.addItem++,</span>
<a href="#l59.16"></a><span id="l59.16" class="difflineplus">+        onModifyItem: itm =&gt; calcounter.modifyItem++,</span>
<a href="#l59.17"></a><span id="l59.17" class="difflineplus">+        onDeleteItem: itm =&gt; calcounter.deleteItem++</span>
<a href="#l59.18"></a><span id="l59.18">     });</span>
<a href="#l59.19"></a><span id="l59.19">     let allobs = cal.createAdapter(Components.interfaces.calIObserver, {</span>
<a href="#l59.20"></a><span id="l59.20" class="difflineminus">-        onAddItem: function(itm) allcounter.addItem++,</span>
<a href="#l59.21"></a><span id="l59.21" class="difflineminus">-        onModifyItem: function(itm) allcounter.modifyItem++,</span>
<a href="#l59.22"></a><span id="l59.22" class="difflineminus">-        onDeleteItem: function(itm) allcounter.deleteItem++</span>
<a href="#l59.23"></a><span id="l59.23" class="difflineplus">+        onAddItem: itm =&gt; allcounter.addItem++,</span>
<a href="#l59.24"></a><span id="l59.24" class="difflineplus">+        onModifyItem: itm =&gt; allcounter.modifyItem++,</span>
<a href="#l59.25"></a><span id="l59.25" class="difflineplus">+        onDeleteItem: itm =&gt; allcounter.deleteItem++</span>
<a href="#l59.26"></a><span id="l59.26">     });</span>
<a href="#l59.27"></a><span id="l59.27"> </span>
<a href="#l59.28"></a><span id="l59.28">     // Set up counters and observers</span>
<a href="#l59.29"></a><span id="l59.29">     resetCounters();</span>
<a href="#l59.30"></a><span id="l59.30">     calmgr.registerCalendar(memory);</span>
<a href="#l59.31"></a><span id="l59.31">     calmgr.registerCalendar(memory2);</span>
<a href="#l59.32"></a><span id="l59.32">     calmgr.addCalendarObserver(allobs);</span>
<a href="#l59.33"></a><span id="l59.33">     memory.addObserver(calobs);</span>
<a href="#l59.34"></a><span id="l59.34" class="difflineat">@@ -153,30 +153,30 @@ function test_registration() {</span>
<a href="#l59.35"></a><span id="l59.35">     checkRegistration(true, false, false);</span>
<a href="#l59.36"></a><span id="l59.36">     checkCalendarCount(0, 0, 1);</span>
<a href="#l59.37"></a><span id="l59.37"> </span>
<a href="#l59.38"></a><span id="l59.38">     // The calendar should now have an id</span>
<a href="#l59.39"></a><span id="l59.39">     notEqual(memory.id, null);</span>
<a href="#l59.40"></a><span id="l59.40"> </span>
<a href="#l59.41"></a><span id="l59.41">     // And be in the list of calendars</span>
<a href="#l59.42"></a><span id="l59.42">     equal(memory, calmgr.getCalendarById(memory.id));</span>
<a href="#l59.43"></a><span id="l59.43" class="difflineminus">-    ok(calmgr.getCalendars({}).some(function(x) x.id == memory.id));</span>
<a href="#l59.44"></a><span id="l59.44" class="difflineplus">+    ok(calmgr.getCalendars({}).some(x =&gt; x.id == memory.id));</span>
<a href="#l59.45"></a><span id="l59.45"> </span>
<a href="#l59.46"></a><span id="l59.46">     // Make it readonly and check if the observer caught it</span>
<a href="#l59.47"></a><span id="l59.47">     memory.setProperty(&quot;readOnly&quot;, true);</span>
<a href="#l59.48"></a><span id="l59.48">     equal(readOnly, true);</span>
<a href="#l59.49"></a><span id="l59.49"> </span>
<a href="#l59.50"></a><span id="l59.50">     // Now unregister it</span>
<a href="#l59.51"></a><span id="l59.51">     calmgr.unregisterCalendar(memory);</span>
<a href="#l59.52"></a><span id="l59.52">     checkRegistration(false, true, false);</span>
<a href="#l59.53"></a><span id="l59.53">     checkCalendarCount(0, 0, 0);</span>
<a href="#l59.54"></a><span id="l59.54"> </span>
<a href="#l59.55"></a><span id="l59.55">     // The calendar shouldn't be in the list of ids</span>
<a href="#l59.56"></a><span id="l59.56">     equal(calmgr.getCalendarById(memory.id), null);</span>
<a href="#l59.57"></a><span id="l59.57" class="difflineminus">-    ok(calmgr.getCalendars({}).every(function(x) x.id != memory.id));</span>
<a href="#l59.58"></a><span id="l59.58" class="difflineplus">+    ok(calmgr.getCalendars({}).every(x =&gt; x.id != memory.id));</span>
<a href="#l59.59"></a><span id="l59.59"> </span>
<a href="#l59.60"></a><span id="l59.60">     // And finally delete it</span>
<a href="#l59.61"></a><span id="l59.61">     calmgr.removeCalendar(memory, Ci.calICalendarManager.REMOVE_NO_UNREGISTER);</span>
<a href="#l59.62"></a><span id="l59.62">     checkRegistration(false, false, true);</span>
<a href="#l59.63"></a><span id="l59.63">     checkCalendarCount(0, 0, 0);</span>
<a href="#l59.64"></a><span id="l59.64"> </span>
<a href="#l59.65"></a><span id="l59.65">     // Now remove the observer again</span>
<a href="#l59.66"></a><span id="l59.66">     calmgr.removeObserver(mgrobs);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l60.1"></a><span id="l60.1" class="difflineminus">--- a/calendar/test/unit/test_deleted_items.js</span>
<a href="#l60.2"></a><span id="l60.2" class="difflineplus">+++ b/calendar/test/unit/test_deleted_items.js</span>
<a href="#l60.3"></a><span id="l60.3" class="difflineat">@@ -38,68 +38,68 @@ add_task(function test_deleted_items() {</span>
<a href="#l60.4"></a><span id="l60.4">     let delmgr = Components.classes[&quot;@mozilla.org/calendar/deleted-items-manager;1&quot;]</span>
<a href="#l60.5"></a><span id="l60.5">                            .getService(Components.interfaces.calIDeletedItems);</span>
<a href="#l60.6"></a><span id="l60.6">     // No items have been deleted, retrieving one should return null.</span>
<a href="#l60.7"></a><span id="l60.7">     equal(delmgr.getDeletedDate(&quot;random&quot;), null);</span>
<a href="#l60.8"></a><span id="l60.8">     equal(delmgr.getDeletedDate(&quot;random&quot;, &quot;random&quot;), null);</span>
<a href="#l60.9"></a><span id="l60.9"> </span>
<a href="#l60.10"></a><span id="l60.10">     // Make sure the cache is initially flushed and that this doesn't throw an</span>
<a href="#l60.11"></a><span id="l60.11">     // error.</span>
<a href="#l60.12"></a><span id="l60.12" class="difflineminus">-    yield check_delmgr_call(function() delmgr.flush());</span>
<a href="#l60.13"></a><span id="l60.13" class="difflineplus">+    yield check_delmgr_call(() =&gt; delmgr.flush());</span>
<a href="#l60.14"></a><span id="l60.14"> </span>
<a href="#l60.15"></a><span id="l60.15">     let memory = calmgr.createCalendar(&quot;memory&quot;, Services.io.newURI(&quot;moz-storage-calendar://&quot;, null, null));</span>
<a href="#l60.16"></a><span id="l60.16">     calmgr.registerCalendar(memory);</span>
<a href="#l60.17"></a><span id="l60.17"> </span>
<a href="#l60.18"></a><span id="l60.18">     let item = cal.createEvent();</span>
<a href="#l60.19"></a><span id="l60.19">     item.id = &quot;test-item-1&quot;;</span>
<a href="#l60.20"></a><span id="l60.20">     item.startDate = cal.now();</span>
<a href="#l60.21"></a><span id="l60.21">     item.endDate = cal.now();</span>
<a href="#l60.22"></a><span id="l60.22"> </span>
<a href="#l60.23"></a><span id="l60.23">     // Add the item, it still shouldn't be in the deleted database.</span>
<a href="#l60.24"></a><span id="l60.24" class="difflineminus">-    yield check_delmgr_call(function() memory.addItem(item, null));</span>
<a href="#l60.25"></a><span id="l60.25" class="difflineplus">+    yield check_delmgr_call(() =&gt; memory.addItem(item, null));</span>
<a href="#l60.26"></a><span id="l60.26">     equal(delmgr.getDeletedDate(item.id), null);</span>
<a href="#l60.27"></a><span id="l60.27">     equal(delmgr.getDeletedDate(item.id, memory.id), null);</span>
<a href="#l60.28"></a><span id="l60.28"> </span>
<a href="#l60.29"></a><span id="l60.29">     // We need to stop time so we have something to compare with.</span>
<a href="#l60.30"></a><span id="l60.30">     let referenceDate = cal.createDateTime(&quot;20120726T112045&quot;); referenceDate.timezone = cal.calendarDefaultTimezone();</span>
<a href="#l60.31"></a><span id="l60.31">     let futureDate = cal.createDateTime(&quot;20380101T000000&quot;);  futureDate.timezone = cal.calendarDefaultTimezone();</span>
<a href="#l60.32"></a><span id="l60.32">     let useFutureDate = false;</span>
<a href="#l60.33"></a><span id="l60.33">     let oldNowFunction = cal.now;</span>
<a href="#l60.34"></a><span id="l60.34">     cal.now = function test_specific_now() {</span>
<a href="#l60.35"></a><span id="l60.35">         return (useFutureDate ? futureDate : referenceDate).clone();</span>
<a href="#l60.36"></a><span id="l60.36">     }</span>
<a href="#l60.37"></a><span id="l60.37"> </span>
<a href="#l60.38"></a><span id="l60.38">     // Deleting an item should trigger it being marked for deletion.</span>
<a href="#l60.39"></a><span id="l60.39" class="difflineminus">-    yield check_delmgr_call(function() memory.deleteItem(item, null));</span>
<a href="#l60.40"></a><span id="l60.40" class="difflineplus">+    yield check_delmgr_call(() =&gt; memory.deleteItem(item, null));</span>
<a href="#l60.41"></a><span id="l60.41"> </span>
<a href="#l60.42"></a><span id="l60.42">     // Now check if it was deleted at our reference date.</span>
<a href="#l60.43"></a><span id="l60.43">     let deltime = delmgr.getDeletedDate(item.id);</span>
<a href="#l60.44"></a><span id="l60.44">     notEqual(deltime, null);</span>
<a href="#l60.45"></a><span id="l60.45">     equal(deltime.compare(referenceDate), 0);</span>
<a href="#l60.46"></a><span id="l60.46"> </span>
<a href="#l60.47"></a><span id="l60.47">     // The same with the calendar.</span>
<a href="#l60.48"></a><span id="l60.48">     deltime = delmgr.getDeletedDate(item.id, memory.id);</span>
<a href="#l60.49"></a><span id="l60.49">     notEqual(deltime, null);</span>
<a href="#l60.50"></a><span id="l60.50">     equal(deltime.compare(referenceDate), 0);</span>
<a href="#l60.51"></a><span id="l60.51"> </span>
<a href="#l60.52"></a><span id="l60.52">     // Item should not be found in other calendars.</span>
<a href="#l60.53"></a><span id="l60.53">     equal(delmgr.getDeletedDate(item.id, &quot;random&quot;), null);</span>
<a href="#l60.54"></a><span id="l60.54"> </span>
<a href="#l60.55"></a><span id="l60.55">     // Check if flushing works, we need to travel time for that.</span>
<a href="#l60.56"></a><span id="l60.56">     useFutureDate = true;</span>
<a href="#l60.57"></a><span id="l60.57" class="difflineminus">-    yield check_delmgr_call(function() delmgr.flush());</span>
<a href="#l60.58"></a><span id="l60.58" class="difflineplus">+    yield check_delmgr_call(() =&gt; delmgr.flush());</span>
<a href="#l60.59"></a><span id="l60.59">     equal(delmgr.getDeletedDate(item.id), null);</span>
<a href="#l60.60"></a><span id="l60.60">     equal(delmgr.getDeletedDate(item.id, memory.id), null);</span>
<a href="#l60.61"></a><span id="l60.61"> </span>
<a href="#l60.62"></a><span id="l60.62">     // Start over with our past time.</span>
<a href="#l60.63"></a><span id="l60.63">     useFutureDate = false;</span>
<a href="#l60.64"></a><span id="l60.64"> </span>
<a href="#l60.65"></a><span id="l60.65">     // Add, delete, add. Item should no longer be deleted.</span>
<a href="#l60.66"></a><span id="l60.66" class="difflineminus">-    yield check_delmgr_call(function() memory.addItem(item, null));</span>
<a href="#l60.67"></a><span id="l60.67" class="difflineplus">+    yield check_delmgr_call(() =&gt; memory.addItem(item, null));</span>
<a href="#l60.68"></a><span id="l60.68">     equal(delmgr.getDeletedDate(item.id), null);</span>
<a href="#l60.69"></a><span id="l60.69" class="difflineminus">-    yield check_delmgr_call(function() memory.deleteItem(item, null));</span>
<a href="#l60.70"></a><span id="l60.70" class="difflineplus">+    yield check_delmgr_call(() =&gt; memory.deleteItem(item, null));</span>
<a href="#l60.71"></a><span id="l60.71">     equal(delmgr.getDeletedDate(item.id).compare(referenceDate), 0);</span>
<a href="#l60.72"></a><span id="l60.72" class="difflineminus">-    yield check_delmgr_call(function() memory.addItem(item, null));</span>
<a href="#l60.73"></a><span id="l60.73" class="difflineplus">+    yield check_delmgr_call(() =&gt; memory.addItem(item, null));</span>
<a href="#l60.74"></a><span id="l60.74">     equal(delmgr.getDeletedDate(item.id), null);</span>
<a href="#l60.75"></a><span id="l60.75"> </span>
<a href="#l60.76"></a><span id="l60.76">     // Revert now function, in case more tests are written.</span>
<a href="#l60.77"></a><span id="l60.77">     cal.now = oldNowFunction;</span>
<a href="#l60.78"></a><span id="l60.78"> });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l61.1"></a><span id="l61.1" class="difflineminus">--- a/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l61.2"></a><span id="l61.2" class="difflineplus">+++ b/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l61.3"></a><span id="l61.3" class="difflineat">@@ -79,17 +79,17 @@ function GDataServer(calendarId, tasksId</span>
<a href="#l61.4"></a><span id="l61.4">             succ();</span>
<a href="#l61.5"></a><span id="l61.5">         }</span>
<a href="#l61.6"></a><span id="l61.6">     };</span>
<a href="#l61.7"></a><span id="l61.7"> }</span>
<a href="#l61.8"></a><span id="l61.8"> </span>
<a href="#l61.9"></a><span id="l61.9"> GDataServer.prototype = {</span>
<a href="#l61.10"></a><span id="l61.10">     items: null,</span>
<a href="#l61.11"></a><span id="l61.11"> </span>
<a href="#l61.12"></a><span id="l61.12" class="difflineminus">-    get baseUri() &quot;http://localhost:&quot; + this.server.identity.primaryPort + &quot;/&quot;,</span>
<a href="#l61.13"></a><span id="l61.13" class="difflineplus">+    get baseUri() { return &quot;http://localhost:&quot; + this.server.identity.primaryPort + &quot;/&quot;; },</span>
<a href="#l61.14"></a><span id="l61.14"> </span>
<a href="#l61.15"></a><span id="l61.15">     start: function() {</span>
<a href="#l61.16"></a><span id="l61.16">         this.server.start(-1);</span>
<a href="#l61.17"></a><span id="l61.17">         do_register_cleanup(() =&gt; this.server.stop(() =&gt; {}));</span>
<a href="#l61.18"></a><span id="l61.18">     },</span>
<a href="#l61.19"></a><span id="l61.19"> </span>
<a href="#l61.20"></a><span id="l61.20">     resetClient: function(client) {</span>
<a href="#l61.21"></a><span id="l61.21">         this.resetRequest();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l62.1"></a><span id="l62.1" class="difflineminus">--- a/calendar/test/unit/test_hashedarray.js</span>
<a href="#l62.2"></a><span id="l62.2" class="difflineplus">+++ b/calendar/test/unit/test_hashedarray.js</span>
<a href="#l62.3"></a><span id="l62.3" class="difflineat">@@ -65,17 +65,17 @@ function checkConsistancy(har, testItems</span>
<a href="#l62.4"></a><span id="l62.4"> </span>
<a href="#l62.5"></a><span id="l62.5"> /**</span>
<a href="#l62.6"></a><span id="l62.6">  * Useful for debugging, in case this test fails. Dumps the array showing the</span>
<a href="#l62.7"></a><span id="l62.7">  * title identifications.</span>
<a href="#l62.8"></a><span id="l62.8">  *</span>
<a href="#l62.9"></a><span id="l62.9">  * @param ar        The array to dump</span>
<a href="#l62.10"></a><span id="l62.10">  */</span>
<a href="#l62.11"></a><span id="l62.11"> function dumpArray(ar) {</span>
<a href="#l62.12"></a><span id="l62.12" class="difflineminus">-    dump(&quot;ARR: &quot; + ar.map(function(e) e.title).toSource() + &quot;\n&quot;);</span>
<a href="#l62.13"></a><span id="l62.13" class="difflineplus">+    dump(&quot;ARR: &quot; + ar.map(e =&gt; e.title).toSource() + &quot;\n&quot;);</span>
<a href="#l62.14"></a><span id="l62.14"> }</span>
<a href="#l62.15"></a><span id="l62.15"> </span>
<a href="#l62.16"></a><span id="l62.16"> /**</span>
<a href="#l62.17"></a><span id="l62.17">  * Man, this function is really hard to keep general enough, I'm almost tempted</span>
<a href="#l62.18"></a><span id="l62.18">  * to duplicate the code. It checks if the remove and modify operations work for</span>
<a href="#l62.19"></a><span id="l62.19">  * the given hashed array.</span>
<a href="#l62.20"></a><span id="l62.20">  *</span>
<a href="#l62.21"></a><span id="l62.21">  * @param har               The Hashed Array</span>
<a href="#l62.22"></a><span id="l62.22" class="difflineat">@@ -84,17 +84,17 @@ function dumpArray(ar) {</span>
<a href="#l62.23"></a><span id="l62.23">  *                            operation, but before checking consistancy.</span>
<a href="#l62.24"></a><span id="l62.24">  * @param itemAccessor      (optional) The function to access the item for an</span>
<a href="#l62.25"></a><span id="l62.25">  *                            array element.</span>
<a href="#l62.26"></a><span id="l62.26">  * @param itemCreator       (optional) Function to create a new item for the</span>
<a href="#l62.27"></a><span id="l62.27">  *                            array.</span>
<a href="#l62.28"></a><span id="l62.28">  */</span>
<a href="#l62.29"></a><span id="l62.29"> function testRemoveModify(har, testItems, postprocessFunc, itemAccessor, itemCreator) {</span>
<a href="#l62.30"></a><span id="l62.30">     postprocessFunc = postprocessFunc || function(a, b) { return [a,b]; };</span>
<a href="#l62.31"></a><span id="l62.31" class="difflineminus">-    itemCreator = itemCreator || function(title) hashedCreateItem(title);</span>
<a href="#l62.32"></a><span id="l62.32" class="difflineplus">+    itemCreator = itemCreator || (title =&gt; hashedCreateItem(title));</span>
<a href="#l62.33"></a><span id="l62.33">     itemAccessor = itemAccessor || function(o) { return o; }</span>
<a href="#l62.34"></a><span id="l62.34"> </span>
<a href="#l62.35"></a><span id="l62.35">     // Now, delete the second item and check again</span>
<a href="#l62.36"></a><span id="l62.36">     har.removeById(itemAccessor(testItems[1]).hashId);</span>
<a href="#l62.37"></a><span id="l62.37">     testItems.splice(1, 1);</span>
<a href="#l62.38"></a><span id="l62.38">     [har, testItems] = postprocessFunc(har, testItems);</span>
<a href="#l62.39"></a><span id="l62.39"> </span>
<a href="#l62.40"></a><span id="l62.40">     checkConsistancy(har, testItems, itemAccessor);</span>
<a href="#l62.41"></a><span id="l62.41" class="difflineat">@@ -169,17 +169,17 @@ function test_array_sorted() {</span>
<a href="#l62.42"></a><span id="l62.42">     testRemoveModify(har, testItemsSorted, sortedPostProcess);</span>
<a href="#l62.43"></a><span id="l62.43"> }</span>
<a href="#l62.44"></a><span id="l62.44"> </span>
<a href="#l62.45"></a><span id="l62.45"> /**</span>
<a href="#l62.46"></a><span id="l62.46">  * Tests cal.SortedHashedArray with a custom hashAccessor.</span>
<a href="#l62.47"></a><span id="l62.47">  */</span>
<a href="#l62.48"></a><span id="l62.48"> function test_hashAccessor() {</span>
<a href="#l62.49"></a><span id="l62.49">     let har, testItems, testItemsSorted;</span>
<a href="#l62.50"></a><span id="l62.50" class="difflineminus">-    let comptor = function(a,b) titleComptor(a.item, b.item);</span>
<a href="#l62.51"></a><span id="l62.51" class="difflineplus">+    let comptor = (a, b) =&gt; titleComptor(a.item, b.item);</span>
<a href="#l62.52"></a><span id="l62.52"> </span>
<a href="#l62.53"></a><span id="l62.53">     har = new cal.SortedHashedArray(comptor);</span>
<a href="#l62.54"></a><span id="l62.54">     har.hashAccessor = function(obj) {</span>
<a href="#l62.55"></a><span id="l62.55">         return obj.item.hashId;</span>
<a href="#l62.56"></a><span id="l62.56">     };</span>
<a href="#l62.57"></a><span id="l62.57"> </span>
<a href="#l62.58"></a><span id="l62.58">     function itemAccessor(obj) {</span>
<a href="#l62.59"></a><span id="l62.59">         if (!obj) do_throw(&quot;WTF?&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l63.1"></a><span id="l63.1" class="difflineminus">--- a/calendar/test/unit/test_items.js</span>
<a href="#l63.2"></a><span id="l63.2" class="difflineplus">+++ b/calendar/test/unit/test_items.js</span>
<a href="#l63.3"></a><span id="l63.3" class="difflineat">@@ -20,18 +20,18 @@ function really_run_test() {</span>
<a href="#l63.4"></a><span id="l63.4">     test_attachment();</span>
<a href="#l63.5"></a><span id="l63.5">     test_lastack();</span>
<a href="#l63.6"></a><span id="l63.6">     test_categories();</span>
<a href="#l63.7"></a><span id="l63.7">     test_alarm();</span>
<a href="#l63.8"></a><span id="l63.8"> }</span>
<a href="#l63.9"></a><span id="l63.9"> </span>
<a href="#l63.10"></a><span id="l63.10"> function test_aclmanager() {</span>
<a href="#l63.11"></a><span id="l63.11">     let mockCalendar = {</span>
<a href="#l63.12"></a><span id="l63.12" class="difflineminus">-        get superCalendar() this,</span>
<a href="#l63.13"></a><span id="l63.13" class="difflineminus">-        get aclManager() this,</span>
<a href="#l63.14"></a><span id="l63.14" class="difflineplus">+        get superCalendar() { return this; },</span>
<a href="#l63.15"></a><span id="l63.15" class="difflineplus">+        get aclManager() { return this; },</span>
<a href="#l63.16"></a><span id="l63.16"> </span>
<a href="#l63.17"></a><span id="l63.17">         getItemEntry: function(item) {</span>
<a href="#l63.18"></a><span id="l63.18">             if (item.id == &quot;withentry&quot;) {</span>
<a href="#l63.19"></a><span id="l63.19">                 return itemEntry;</span>
<a href="#l63.20"></a><span id="l63.20">             }</span>
<a href="#l63.21"></a><span id="l63.21">             return null;</span>
<a href="#l63.22"></a><span id="l63.22">         },</span>
<a href="#l63.23"></a><span id="l63.23">     };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l64.1"></a><span id="l64.1" class="difflineminus">--- a/calendar/test/unit/test_recur.js</span>
<a href="#l64.2"></a><span id="l64.2" class="difflineplus">+++ b/calendar/test/unit/test_recur.js</span>
<a href="#l64.3"></a><span id="l64.3" class="difflineat">@@ -33,17 +33,17 @@ function test_rules() {</span>
<a href="#l64.4"></a><span id="l64.4">         // Get recurrence dates</span>
<a href="#l64.5"></a><span id="l64.5">         let start = createDate(1990, 0, 1);</span>
<a href="#l64.6"></a><span id="l64.6">         let end = createDate(2020, 0, 1);</span>
<a href="#l64.7"></a><span id="l64.7">         let recdates = event.recurrenceInfo.getOccurrenceDates(start, end, 0, {});</span>
<a href="#l64.8"></a><span id="l64.8">         let occurrences = event.recurrenceInfo.getOccurrences(start, end, 0, {});</span>
<a href="#l64.9"></a><span id="l64.9"> </span>
<a href="#l64.10"></a><span id="l64.10">         // Check number of items</span>
<a href="#l64.11"></a><span id="l64.11">         dump(&quot;Expected &quot; + expected.length + &quot; occurrences\n&quot;);</span>
<a href="#l64.12"></a><span id="l64.12" class="difflineminus">-        dump(&quot;Got: &quot; + recdates.map(function(x) x.toString()) + &quot;\n&quot;);</span>
<a href="#l64.13"></a><span id="l64.13" class="difflineplus">+        dump(&quot;Got: &quot; + recdates.map(x =&gt; x.toString()) + &quot;\n&quot;);</span>
<a href="#l64.14"></a><span id="l64.14">         //equal(recdates.length, expected.length);</span>
<a href="#l64.15"></a><span id="l64.15">         let fmt = cal.getDateFormatter();</span>
<a href="#l64.16"></a><span id="l64.16"> </span>
<a href="#l64.17"></a><span id="l64.17">         for (let i = 0; i &lt; expected.length; i++) {</span>
<a href="#l64.18"></a><span id="l64.18">             // Check each date</span>
<a href="#l64.19"></a><span id="l64.19">             let ed = cal.createDateTime(expected[i]);</span>
<a href="#l64.20"></a><span id="l64.20">             dump(&quot;Expecting instance at &quot; + ed + &quot;(&quot; + fmt.dayName(ed.weekday) + &quot;)\n&quot;);</span>
<a href="#l64.21"></a><span id="l64.21">             dump(&quot;Recdate:&quot;);</span>
<a href="#l64.22"></a><span id="l64.22" class="difflineat">@@ -727,36 +727,36 @@ function test_idchange() {</span>
<a href="#l64.23"></a><span id="l64.23"> </span>
<a href="#l64.24"></a><span id="l64.24"> function test_failures() {</span>
<a href="#l64.25"></a><span id="l64.25">     let item = makeEvent(&quot;DTSTART:20020402T114500Z\r\n&quot; +</span>
<a href="#l64.26"></a><span id="l64.26">                          &quot;DTEND:20020402T124500Z\r\n&quot; +</span>
<a href="#l64.27"></a><span id="l64.27">                          &quot;RRULE:INTERVAL=2;FREQ=WEEKLY;COUNT=6;BYDAY=TU,WE\r\n&quot;);</span>
<a href="#l64.28"></a><span id="l64.28">     let rinfo = item.recurrenceInfo;</span>
<a href="#l64.29"></a><span id="l64.29">     let ritem = cal.createRecurrenceDate();</span>
<a href="#l64.30"></a><span id="l64.30"> </span>
<a href="#l64.31"></a><span id="l64.31" class="difflineminus">-    throws(function() rinfo.getRecurrenceItemAt(-1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.32"></a><span id="l64.32" class="difflineminus">-    throws(function() rinfo.getRecurrenceItemAt(1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.33"></a><span id="l64.33" class="difflineminus">-    throws(function() rinfo.deleteRecurrenceItemAt(-1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.34"></a><span id="l64.34" class="difflineminus">-    throws(function() rinfo.deleteRecurrenceItemAt(1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.35"></a><span id="l64.35" class="difflineminus">-    throws(function() rinfo.deleteRecurrenceItem(ritem), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.36"></a><span id="l64.36" class="difflineminus">-    throws(function() rinfo.insertRecurrenceItemAt(ritem, -1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.37"></a><span id="l64.37" class="difflineminus">-    throws(function() rinfo.insertRecurrenceItemAt(ritem, 2), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.38"></a><span id="l64.38" class="difflineminus">-    throws(function() rinfo.restoreOccurrenceAt(cal.createDateTime(&quot;20080101T010101&quot;)), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.39"></a><span id="l64.39" class="difflineminus">-    throws(function() cal.createRecurrenceInfo().isFinite, /Component not initialized/);</span>
<a href="#l64.40"></a><span id="l64.40" class="difflineplus">+    throws(() =&gt; rinfo.getRecurrenceItemAt(-1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.41"></a><span id="l64.41" class="difflineplus">+    throws(() =&gt; rinfo.getRecurrenceItemAt(1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.42"></a><span id="l64.42" class="difflineplus">+    throws(() =&gt; rinfo.deleteRecurrenceItemAt(-1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.43"></a><span id="l64.43" class="difflineplus">+    throws(() =&gt; rinfo.deleteRecurrenceItemAt(1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.44"></a><span id="l64.44" class="difflineplus">+    throws(() =&gt; rinfo.deleteRecurrenceItem(ritem), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.45"></a><span id="l64.45" class="difflineplus">+    throws(() =&gt; rinfo.insertRecurrenceItemAt(ritem, -1), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.46"></a><span id="l64.46" class="difflineplus">+    throws(() =&gt; rinfo.insertRecurrenceItemAt(ritem, 2), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.47"></a><span id="l64.47" class="difflineplus">+    throws(() =&gt; rinfo.restoreOccurrenceAt(cal.createDateTime(&quot;20080101T010101&quot;)), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.48"></a><span id="l64.48" class="difflineplus">+    throws(() =&gt; cal.createRecurrenceInfo().isFinite, /Component not initialized/);</span>
<a href="#l64.49"></a><span id="l64.49"> </span>
<a href="#l64.50"></a><span id="l64.50">     // modifyException with a different parent item</span>
<a href="#l64.51"></a><span id="l64.51">     let occ = rinfo.getOccurrenceFor(cal.createDateTime(&quot;20120102T114500Z&quot;));</span>
<a href="#l64.52"></a><span id="l64.52">     occ.calendar = {}</span>
<a href="#l64.53"></a><span id="l64.53">     occ.id = &quot;1234&quot;;</span>
<a href="#l64.54"></a><span id="l64.54">     occ.parentItem = occ;</span>
<a href="#l64.55"></a><span id="l64.55" class="difflineminus">-    throws(function() rinfo.modifyException(occ, true), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.56"></a><span id="l64.56" class="difflineplus">+    throws(() =&gt; rinfo.modifyException(occ, true), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.57"></a><span id="l64.57"> </span>
<a href="#l64.58"></a><span id="l64.58">     occ = rinfo.getOccurrenceFor(cal.createDateTime(&quot;20120102T114500Z&quot;));</span>
<a href="#l64.59"></a><span id="l64.59">     occ.recurrenceId = null;</span>
<a href="#l64.60"></a><span id="l64.60" class="difflineminus">-    throws(function() rinfo.modifyException(occ, true), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.61"></a><span id="l64.61" class="difflineplus">+    throws(() =&gt; rinfo.modifyException(occ, true), /Illegal value/, &quot;Invalid Argument&quot;);</span>
<a href="#l64.62"></a><span id="l64.62"> </span>
<a href="#l64.63"></a><span id="l64.63">     // Missing DTSTART/DUE but RRULE</span>
<a href="#l64.64"></a><span id="l64.64">     item = createEventFromIcalString(&quot;BEGIN:VCALENDAR\r\n&quot; +</span>
<a href="#l64.65"></a><span id="l64.65">         &quot;BEGIN:VTODO\r\n&quot; +</span>
<a href="#l64.66"></a><span id="l64.66">         &quot;RRULE:FREQ=DAILY\r\n&quot; +</span>
<a href="#l64.67"></a><span id="l64.67">         &quot;END:VTODO\r\n&quot; +</span>
<a href="#l64.68"></a><span id="l64.68">         &quot;END:VCALENDAR\r\n&quot;</span>
<a href="#l64.69"></a><span id="l64.69">     );</span>
<a href="#l64.70"></a><span id="l64.70" class="difflineat">@@ -772,17 +772,17 @@ function test_immutable() {</span>
<a href="#l64.71"></a><span id="l64.71">         &quot;RRULE:FREQ=DAILY\r\n&quot; +</span>
<a href="#l64.72"></a><span id="l64.72">         &quot;END:VTODO\r\n&quot; +</span>
<a href="#l64.73"></a><span id="l64.73">         &quot;END:VCALENDAR\r\n&quot;</span>
<a href="#l64.74"></a><span id="l64.74">     );</span>
<a href="#l64.75"></a><span id="l64.75">     ok(item.recurrenceInfo.isMutable);</span>
<a href="#l64.76"></a><span id="l64.76">     let rinfo2 = item.recurrenceInfo.clone();</span>
<a href="#l64.77"></a><span id="l64.77">     rinfo2.makeImmutable();</span>
<a href="#l64.78"></a><span id="l64.78">     rinfo2.makeImmutable(); // Doing so twice shouldn't throw</span>
<a href="#l64.79"></a><span id="l64.79" class="difflineminus">-    throws(function() rinfo2.appendRecurrenceItem(ritem), /Can not modify immutable data container/);</span>
<a href="#l64.80"></a><span id="l64.80" class="difflineplus">+    throws(() =&gt; rinfo2.appendRecurrenceItem(ritem), /Can not modify immutable data container/);</span>
<a href="#l64.81"></a><span id="l64.81">     ok(!rinfo2.isMutable);</span>
<a href="#l64.82"></a><span id="l64.82"> </span>
<a href="#l64.83"></a><span id="l64.83">     let ritem = cal.createRecurrenceDate();</span>
<a href="#l64.84"></a><span id="l64.84">     rinfo.appenRecurrenceItem(ritem);</span>
<a href="#l64.85"></a><span id="l64.85"> }</span>
<a href="#l64.86"></a><span id="l64.86"> </span>
<a href="#l64.87"></a><span id="l64.87"> function test_rrule_icalstring() {</span>
<a href="#l64.88"></a><span id="l64.88">     var recRule = createRecurrenceRule();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l65.1"></a><span id="l65.1" class="difflineminus">--- a/calendar/test/unit/test_utils.js</span>
<a href="#l65.2"></a><span id="l65.2" class="difflineplus">+++ b/calendar/test/unit/test_utils.js</span>
<a href="#l65.3"></a><span id="l65.3" class="difflineat">@@ -116,25 +116,25 @@ function test_getDefaultStartDate() {</span>
<a href="#l65.4"></a><span id="l65.4"> }</span>
<a href="#l65.5"></a><span id="l65.5"> </span>
<a href="#l65.6"></a><span id="l65.6"> function test_getStartEndProps() {</span>
<a href="#l65.7"></a><span id="l65.7">     equal(cal.calGetStartDateProp(cal.createEvent()), &quot;startDate&quot;);</span>
<a href="#l65.8"></a><span id="l65.8">     equal(cal.calGetEndDateProp(cal.createEvent()), &quot;endDate&quot;);</span>
<a href="#l65.9"></a><span id="l65.9">     equal(cal.calGetStartDateProp(cal.createTodo()), &quot;entryDate&quot;);</span>
<a href="#l65.10"></a><span id="l65.10">     equal(cal.calGetEndDateProp(cal.createTodo()), &quot;dueDate&quot;);</span>
<a href="#l65.11"></a><span id="l65.11"> </span>
<a href="#l65.12"></a><span id="l65.12" class="difflineminus">-    throws(function() cal.calGetStartDateProp(null),</span>
<a href="#l65.13"></a><span id="l65.13" class="difflineminus">-                    /2147500033/);</span>
<a href="#l65.14"></a><span id="l65.14" class="difflineminus">-   throws(function() cal.calGetEndDateProp(null),</span>
<a href="#l65.15"></a><span id="l65.15" class="difflineminus">-                    /2147500033/);</span>
<a href="#l65.16"></a><span id="l65.16" class="difflineplus">+    throws(() =&gt; cal.calGetStartDateProp(null),</span>
<a href="#l65.17"></a><span id="l65.17" class="difflineplus">+           /2147500033/);</span>
<a href="#l65.18"></a><span id="l65.18" class="difflineplus">+    throws(() =&gt; cal.calGetEndDateProp(null),</span>
<a href="#l65.19"></a><span id="l65.19" class="difflineplus">+           /2147500033/);</span>
<a href="#l65.20"></a><span id="l65.20"> }</span>
<a href="#l65.21"></a><span id="l65.21"> </span>
<a href="#l65.22"></a><span id="l65.22"> function test_calOperationGroup() {</span>
<a href="#l65.23"></a><span id="l65.23">     let cancelCalled = false;</span>
<a href="#l65.24"></a><span id="l65.24" class="difflineminus">-    function cancelFunc() cancelCalled = true;</span>
<a href="#l65.25"></a><span id="l65.25" class="difflineplus">+    function cancelFunc() { return cancelCalled = true; }</span>
<a href="#l65.26"></a><span id="l65.26"> </span>
<a href="#l65.27"></a><span id="l65.27">     let group = new cal.calOperationGroup(cancelFunc);</span>
<a href="#l65.28"></a><span id="l65.28"> </span>
<a href="#l65.29"></a><span id="l65.29">     ok(group.isEmpty);</span>
<a href="#l65.30"></a><span id="l65.30">     equal(group.id, cal.calOperationGroup.mOpGroupPrefix + &quot;0&quot;);</span>
<a href="#l65.31"></a><span id="l65.31">     equal(group.status, Components.results.NS_OK);</span>
<a href="#l65.32"></a><span id="l65.32">     equal(group.isPending, true);</span>
<a href="#l65.33"></a><span id="l65.33"> </span>
<a href="#l65.34"></a><span id="l65.34" class="difflineat">@@ -144,27 +144,27 @@ function test_calOperationGroup() {</span>
<a href="#l65.35"></a><span id="l65.35"> </span>
<a href="#l65.36"></a><span id="l65.36">     group.add(completedOp);</span>
<a href="#l65.37"></a><span id="l65.37">     ok(group.isEmpty);</span>
<a href="#l65.38"></a><span id="l65.38">     equal(group.isPending, true);</span>
<a href="#l65.39"></a><span id="l65.39"> </span>
<a href="#l65.40"></a><span id="l65.40">     let pendingOp1 = {</span>
<a href="#l65.41"></a><span id="l65.41">         id: 1,</span>
<a href="#l65.42"></a><span id="l65.42">         isPending: true,</span>
<a href="#l65.43"></a><span id="l65.43" class="difflineminus">-        cancel: function() this.cancelCalled = true</span>
<a href="#l65.44"></a><span id="l65.44" class="difflineplus">+        cancel: function() { return this.cancelCalled = true; }</span>
<a href="#l65.45"></a><span id="l65.45">     };</span>
<a href="#l65.46"></a><span id="l65.46"> </span>
<a href="#l65.47"></a><span id="l65.47">     group.add(pendingOp1);</span>
<a href="#l65.48"></a><span id="l65.48">     ok(!group.isEmpty);</span>
<a href="#l65.49"></a><span id="l65.49">     equal(group.isPending, true);</span>
<a href="#l65.50"></a><span id="l65.50"> </span>
<a href="#l65.51"></a><span id="l65.51">     let pendingOp2 = {</span>
<a href="#l65.52"></a><span id="l65.52">         id: 2,</span>
<a href="#l65.53"></a><span id="l65.53">         isPending: true,</span>
<a href="#l65.54"></a><span id="l65.54" class="difflineminus">-        cancel: function() this.cancelCalled = true</span>
<a href="#l65.55"></a><span id="l65.55" class="difflineplus">+        cancel: function() { return this.cancelCalled = true; }</span>
<a href="#l65.56"></a><span id="l65.56">     };</span>
<a href="#l65.57"></a><span id="l65.57"> </span>
<a href="#l65.58"></a><span id="l65.58">     group.add(pendingOp2);</span>
<a href="#l65.59"></a><span id="l65.59">     group.remove(pendingOp1);</span>
<a href="#l65.60"></a><span id="l65.60">     ok(!group.isEmpty);</span>
<a href="#l65.61"></a><span id="l65.61">     equal(group.isPending, true);</span>
<a href="#l65.62"></a><span id="l65.62"> </span>
<a href="#l65.63"></a><span id="l65.63">     group.cancel();</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

