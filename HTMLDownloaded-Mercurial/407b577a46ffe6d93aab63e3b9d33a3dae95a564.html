<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/4b0de666d1a4/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/4b0de666d1a4/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/4b0de666d1a4/mercurial.js"></script>

<meta property="og:image" content="/static/4b0de666d1a4/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 27590:407b577a46ffe6d93aab63e3b9d33a3dae95a564</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 407b577a46ffe6d93aab63e3b9d33a3dae95a564" />
<meta property="og:url" content="/comm-central/rev/407b577a46ffe6d93aab63e3b9d33a3dae95a564" />
<meta property="og:description" content="Bug 1578065 - Port Bug 433238 &quot;Password manager contextual menu password field manual fill&quot; to SeaMonkey. r=frg" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/4b0de666d1a4/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 407b577a46ffe6d93aab63e3b9d33a3dae95a564 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/407b577a46ffe6d93aab63e3b9d33a3dae95a564">shortlog</a> |
<a href="/comm-central/log/407b577a46ffe6d93aab63e3b9d33a3dae95a564">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/407b577a46ffe6d93aab63e3b9d33a3dae95a564">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/407b577a46ffe6d93aab63e3b9d33a3dae95a564">files</a> |
changeset |
<a href="/comm-central/raw-rev/407b577a46ffe6d93aab63e3b9d33a3dae95a564">raw</a>  | <a href="/comm-central/archive/407b577a46ffe6d93aab63e3b9d33a3dae95a564.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1578065">Bug 1578065</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=433238">Bug 433238</a> &quot;Password manager contextual menu password field manual fill&quot; to SeaMonkey. r=frg
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#73;&#97;&#110;&#32;&#78;&#101;&#97;&#108;&#32;&#60;&#105;&#97;&#110;&#110;&#95;&#99;&#118;&#115;&#64;&#98;&#108;&#117;&#101;&#121;&#111;&#110;&#100;&#101;&#114;&#46;&#99;&#111;&#46;&#117;&#107;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 15 Sep 2019 12:43:47 +0200</td></tr>

<tr>
 <td>changeset 27590</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/407b577a46ffe6d93aab63e3b9d33a3dae95a564">407b577a46ffe6d93aab63e3b9d33a3dae95a564</a></td>
</tr>



<tr>
<td>parent 27589</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/19a72d901dcbaae7c8bc8dbdd0e6d6c5992928e8">19a72d901dcbaae7c8bc8dbdd0e6d6c5992928e8</a>
</td>
</tr>

<tr>
<td>child 27591</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/5d889bf20fb6bc4dfe20a9b43f7d0fc7691e3ca1">5d889bf20fb6bc4dfe20a9b43f7d0fc7691e3ca1</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=407b577a46ffe6d93aab63e3b9d33a3dae95a564">16407</a></td></tr>
<tr><td>push user</td><td>frgrahl@gmx.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 15 Sep 2019 10:44:46 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@20fdbeecb553 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=20fdbeecb5531a7acb73526f73e0e853f68fc47e">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=20fdbeecb5531a7acb73526f73e0e853f68fc47e&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=20fdbeecb5531a7acb73526f73e0e853f68fc47e&newProject=comm-central&newRevision=19a72d901dcbaae7c8bc8dbdd0e6d6c5992928e8&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=20fdbeecb5531a7acb73526f73e0e853f68fc47e&newProject=comm-central&newRevision=19a72d901dcbaae7c8bc8dbdd0e6d6c5992928e8&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=20fdbeecb5531a7acb73526f73e0e853f68fc47e&newProject=comm-central&newRevision=19a72d901dcbaae7c8bc8dbdd0e6d6c5992928e8&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28frg%29&revcount=50">frg</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1578065">1578065</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=433238">433238</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1578065">Bug 1578065</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=433238">Bug 433238</a> &quot;Password manager contextual menu password field manual fill&quot; to SeaMonkey. r=frg</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/contentAreaContextOverlay.xul">suite/base/content/contentAreaContextOverlay.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/contentAreaContextOverlay.xul">file</a> |
<a href="/comm-central/annotate/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/contentAreaContextOverlay.xul">annotate</a> |
<a href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/contentAreaContextOverlay.xul">diff</a> |
<a href="/comm-central/comparison/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/contentAreaContextOverlay.xul">comparison</a> |
<a href="/comm-central/log/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/contentAreaContextOverlay.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/nsContextMenu.js">suite/base/content/nsContextMenu.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/nsContextMenu.js">file</a> |
<a href="/comm-central/annotate/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/nsContextMenu.js">annotate</a> |
<a href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/nsContextMenu.js">diff</a> |
<a href="/comm-central/comparison/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/nsContextMenu.js">comparison</a> |
<a href="/comm-central/log/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/base/content/nsContextMenu.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">suite/locales/en-US/chrome/common/contentAreaCommands.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">file</a> |
<a href="/comm-central/annotate/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">annotate</a> |
<a href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">diff</a> |
<a href="/comm-central/comparison/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">comparison</a> |
<a href="/comm-central/log/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/locales/en-US/chrome/common/contentAreaCommands.dtd">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/mailnews/content/mailContextMenus.js">suite/mailnews/content/mailContextMenus.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/mailnews/content/mailContextMenus.js">file</a> |
<a href="/comm-central/annotate/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/mailnews/content/mailContextMenus.js">annotate</a> |
<a href="/comm-central/diff/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/mailnews/content/mailContextMenus.js">diff</a> |
<a href="/comm-central/comparison/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/mailnews/content/mailContextMenus.js">comparison</a> |
<a href="/comm-central/log/407b577a46ffe6d93aab63e3b9d33a3dae95a564/suite/mailnews/content/mailContextMenus.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/base/content/contentAreaContextOverlay.xul</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/base/content/contentAreaContextOverlay.xul</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -369,16 +369,38 @@</span>
<a href="#l1.4"></a><span id="l1.4">       &lt;menuitem hidden=&quot;true&quot; id=&quot;context-bidi-text-direction-toggle&quot;</span>
<a href="#l1.5"></a><span id="l1.5">                 label=&quot;&amp;bidiSwitchTextDirectionItem.label;&quot;</span>
<a href="#l1.6"></a><span id="l1.6">                 accesskey=&quot;&amp;bidiSwitchTextDirectionItem.accesskey;&quot;</span>
<a href="#l1.7"></a><span id="l1.7">                 command=&quot;cmd_switchTextDirection&quot;/&gt;</span>
<a href="#l1.8"></a><span id="l1.8">       &lt;menuitem hidden=&quot;true&quot; id=&quot;context-bidi-page-direction-toggle&quot;</span>
<a href="#l1.9"></a><span id="l1.9">                 label=&quot;&amp;bidiSwitchPageDirectionItem.label;&quot;</span>
<a href="#l1.10"></a><span id="l1.10">                 accesskey=&quot;&amp;bidiSwitchPageDirectionItem.accesskey;&quot;</span>
<a href="#l1.11"></a><span id="l1.11">                 oncommand=&quot;SwitchDocumentDirection(window.content);&quot;/&gt;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+      &lt;menuseparator id=&quot;fill-login-separator&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+      &lt;menu id=&quot;fill-login&quot;</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+            label=&quot;&amp;fillLoginMenu.label;&quot;</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+            label-login=&quot;&amp;fillLoginMenu.label;&quot;</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+            label-password=&quot;&amp;fillPasswordMenu.label;&quot;</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+            label-username=&quot;&amp;fillUsernameMenu.label;&quot;</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+            accesskey=&quot;&amp;fillLoginMenu.accesskey;&quot;</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+            accesskey-login=&quot;&amp;fillLoginMenu.accesskey;&quot;</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+            accesskey-password=&quot;&amp;fillPasswordMenu.accesskey;&quot;</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+            accesskey-username=&quot;&amp;fillUsernameMenu.accesskey;&quot;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+            hidden=&quot;true&quot;&gt;</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+        &lt;menupopup id=&quot;fill-login-popup&quot;&gt;</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineplus">+          &lt;menuitem id=&quot;fill-login-no-logins&quot;</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+                    label=&quot;&amp;noLoginSuggestions.label;&quot;</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+                    disabled=&quot;true&quot;</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+                    hidden=&quot;true&quot;/&gt;</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+          &lt;menuseparator id=&quot;saved-logins-separator&quot;/&gt;</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+          &lt;menuitem id=&quot;fill-login-saved-passwords&quot;</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+                    label=&quot;&amp;viewSavedLogins.label;&quot;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+                    oncommand=&quot;gContextMenu.openPasswordManager();&quot;/&gt;</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+        &lt;/menupopup&gt;</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+      &lt;/menu&gt;</span>
<a href="#l1.34"></a><span id="l1.34">       &lt;menuseparator id=&quot;inspect-separator&quot;</span>
<a href="#l1.35"></a><span id="l1.35">                      hidden=&quot;true&quot;/&gt;</span>
<a href="#l1.36"></a><span id="l1.36">       &lt;menuitem id=&quot;context-inspect&quot;</span>
<a href="#l1.37"></a><span id="l1.37">                 hidden=&quot;true&quot;</span>
<a href="#l1.38"></a><span id="l1.38">                 label=&quot;&amp;devtoolsInspect.label;&quot;</span>
<a href="#l1.39"></a><span id="l1.39">                 accesskey=&quot;&amp;devtoolsInspect.accesskey;&quot;</span>
<a href="#l1.40"></a><span id="l1.40">                 oncommand=&quot;gContextMenu.inspectNode();&quot;/&gt;</span>
<a href="#l1.41"></a><span id="l1.41">     &lt;/menupopup&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/base/content/nsContextMenu.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/base/content/nsContextMenu.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -9,41 +9,46 @@</span>
<a href="#l2.4"></a><span id="l2.4"> |                                                                              |</span>
<a href="#l2.5"></a><span id="l2.5"> |   For usage, see references to this class in navigator.xul.                  |</span>
<a href="#l2.6"></a><span id="l2.6"> |                                                                              |</span>
<a href="#l2.7"></a><span id="l2.7"> |   Currently, this code is relatively useless for any other purpose.  In the  |</span>
<a href="#l2.8"></a><span id="l2.8"> |   longer term, this code will be restructured to make it more reusable.      |</span>
<a href="#l2.9"></a><span id="l2.9"> ------------------------------------------------------------------------------*/</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11"> var {XPCOMUtils} = ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-var {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-var gContextMenuContentData = null;</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+var {Services} = ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+var {LoginManagerContextMenu} =</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+  ChromeUtils.import(&quot;resource://gre/modules/LoginManagerContextMenu.jsm&quot;);</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19"> XPCOMUtils.defineLazyGetter(this, &quot;InlineSpellCheckerUI&quot;, () =&gt; {</span>
<a href="#l2.20"></a><span id="l2.20">   let { InlineSpellChecker } = ChromeUtils.import(</span>
<a href="#l2.21"></a><span id="l2.21">     &quot;resource://gre/modules/InlineSpellChecker.jsm&quot;</span>
<a href="#l2.22"></a><span id="l2.22">   );</span>
<a href="#l2.23"></a><span id="l2.23">   return new InlineSpellChecker();</span>
<a href="#l2.24"></a><span id="l2.24"> });</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26"> XPCOMUtils.defineLazyGetter(this, &quot;PageMenuParent&quot;, function() {</span>
<a href="#l2.27"></a><span id="l2.27">   let tmp = {};</span>
<a href="#l2.28"></a><span id="l2.28">   ChromeUtils.import(&quot;resource://gre/modules/PageMenu.jsm&quot;, tmp);</span>
<a href="#l2.29"></a><span id="l2.29">   return new tmp.PageMenuParent();</span>
<a href="#l2.30"></a><span id="l2.30"> });</span>
<a href="#l2.31"></a><span id="l2.31"> </span>
<a href="#l2.32"></a><span id="l2.32"> XPCOMUtils.defineLazyModuleGetters(this, {</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+  SpellCheckHelper: &quot;resource://gre/modules/InlineSpellChecker.jsm&quot;,</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+  findCssSelector: &quot;resource://gre/modules/css-selector.js&quot;,</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+  LoginHelper: &quot;resource://gre/modules/LoginHelper.jsm&quot;,</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+  LoginManagerContent: &quot;resource://gre/modules/LoginManagerContent.jsm&quot;,</span>
<a href="#l2.37"></a><span id="l2.37">   DevToolsShim: &quot;chrome://devtools-shim/content/DevToolsShim.jsm&quot;,</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-  findCssSelector: &quot;resource://gre/modules/css-selector.js&quot;,</span>
<a href="#l2.39"></a><span id="l2.39">   NetUtil: &quot;resource://gre/modules/NetUtil.jsm&quot;,</span>
<a href="#l2.40"></a><span id="l2.40">   ShellService: &quot;resource:///modules/ShellService.jsm&quot;,</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-  SpellCheckHelper: &quot;resource://gre/modules/InlineSpellChecker.jsm&quot;,</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+</span>
<a href="#l2.43"></a><span id="l2.43"> });</span>
<a href="#l2.44"></a><span id="l2.44"> </span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+var gContextMenuContentData = null;</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+</span>
<a href="#l2.47"></a><span id="l2.47"> function nsContextMenu(aXulMenu, aIsShift, aEvent) {</span>
<a href="#l2.48"></a><span id="l2.48">   this.shouldDisplay = true;</span>
<a href="#l2.49"></a><span id="l2.49">   this.initMenu(aXulMenu, aIsShift, aEvent);</span>
<a href="#l2.50"></a><span id="l2.50"> }</span>
<a href="#l2.51"></a><span id="l2.51"> </span>
<a href="#l2.52"></a><span id="l2.52"> // Prototype for nsContextMenu &quot;class.&quot;</span>
<a href="#l2.53"></a><span id="l2.53"> nsContextMenu.prototype = {</span>
<a href="#l2.54"></a><span id="l2.54">   initMenu: function(aXulMenu, aIsShift, aEvent) {</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineat">@@ -59,21 +64,21 @@ nsContextMenu.prototype = {</span>
<a href="#l2.56"></a><span id="l2.56">         Services.prefs.getBoolPref(&quot;javascript.enabled&quot;))</span>
<a href="#l2.57"></a><span id="l2.57">       this.hasPageMenu = PageMenuParent.buildAndAddToPopup(this.target, aXulMenu);</span>
<a href="#l2.58"></a><span id="l2.58"> </span>
<a href="#l2.59"></a><span id="l2.59">     this.isTextSelected = this.isTextSelection();</span>
<a href="#l2.60"></a><span id="l2.60">     this.isContentSelected = this.isContentSelection();</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62">     this.initPopupPrincipal();</span>
<a href="#l2.63"></a><span id="l2.63"> </span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-    // Initialize (disable/remove) menu items.</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-    this.initItems();</span>
<a href="#l2.66"></a><span id="l2.66">     // Initialize gContextMenuContentData.</span>
<a href="#l2.67"></a><span id="l2.67">     if (aEvent)</span>
<a href="#l2.68"></a><span id="l2.68">       this.initContentData(aEvent);</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+    // Initialize (disable/remove) menu items.</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineplus">+    this.initItems();</span>
<a href="#l2.71"></a><span id="l2.71">   },</span>
<a href="#l2.72"></a><span id="l2.72"> </span>
<a href="#l2.73"></a><span id="l2.73">   initContentData: function(aEvent) {</span>
<a href="#l2.74"></a><span id="l2.74">     var addonInfo = {};</span>
<a href="#l2.75"></a><span id="l2.75">     var subject = {</span>
<a href="#l2.76"></a><span id="l2.76">       event: aEvent,</span>
<a href="#l2.77"></a><span id="l2.77">       addonInfo: addonInfo,</span>
<a href="#l2.78"></a><span id="l2.78">     };</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineat">@@ -116,37 +121,40 @@ nsContextMenu.prototype = {</span>
<a href="#l2.80"></a><span id="l2.80">       charSet: doc.characterSet,</span>
<a href="#l2.81"></a><span id="l2.81">       referrer: doc.referrer,</span>
<a href="#l2.82"></a><span id="l2.82">       referrerPolicy: doc.referrerPolicy,</span>
<a href="#l2.83"></a><span id="l2.83">       contentType: contentType,</span>
<a href="#l2.84"></a><span id="l2.84">       contentDisposition: contentDisposition,</span>
<a href="#l2.85"></a><span id="l2.85">       frameOuterWindowID: doc.defaultView.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l2.86"></a><span id="l2.86">                                          .getInterface(Ci.nsIDOMWindowUtils)</span>
<a href="#l2.87"></a><span id="l2.87">                                          .outerWindowID,</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineplus">+      loginFillInfo: LoginManagerContent.getFieldContext(popupNode),</span>
<a href="#l2.89"></a><span id="l2.89">     };</span>
<a href="#l2.90"></a><span id="l2.90">   },</span>
<a href="#l2.91"></a><span id="l2.91"> </span>
<a href="#l2.92"></a><span id="l2.92">   hiding: function () {</span>
<a href="#l2.93"></a><span id="l2.93">     gContextMenuContentData = null;</span>
<a href="#l2.94"></a><span id="l2.94">     InlineSpellCheckerUI.clearSuggestionsFromMenu();</span>
<a href="#l2.95"></a><span id="l2.95">     InlineSpellCheckerUI.clearDictionaryListFromMenu();</span>
<a href="#l2.96"></a><span id="l2.96">     InlineSpellCheckerUI.uninit();</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineplus">+    LoginManagerContextMenu.clearLoginsFromMenu(document);</span>
<a href="#l2.98"></a><span id="l2.98">   },</span>
<a href="#l2.99"></a><span id="l2.99"> </span>
<a href="#l2.100"></a><span id="l2.100">   initItems: function() {</span>
<a href="#l2.101"></a><span id="l2.101">     this.initPageMenuSeparator();</span>
<a href="#l2.102"></a><span id="l2.102">     this.initOpenItems();</span>
<a href="#l2.103"></a><span id="l2.103">     this.initNavigationItems();</span>
<a href="#l2.104"></a><span id="l2.104">     this.initViewItems();</span>
<a href="#l2.105"></a><span id="l2.105">     this.initMiscItems();</span>
<a href="#l2.106"></a><span id="l2.106">     this.initSpellingItems();</span>
<a href="#l2.107"></a><span id="l2.107">     this.initSaveItems();</span>
<a href="#l2.108"></a><span id="l2.108">     this.initClipboardItems();</span>
<a href="#l2.109"></a><span id="l2.109">     this.initMetadataItems();</span>
<a href="#l2.110"></a><span id="l2.110">     this.initMediaPlayerItems();</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineplus">+    this.initPasswordManagerItems();</span>
<a href="#l2.112"></a><span id="l2.112">   },</span>
<a href="#l2.113"></a><span id="l2.113"> </span>
<a href="#l2.114"></a><span id="l2.114">   initPageMenuSeparator: function() {</span>
<a href="#l2.115"></a><span id="l2.115">     this.showItem(&quot;page-menu-separator&quot;, this.hasPageMenu);</span>
<a href="#l2.116"></a><span id="l2.116">   },</span>
<a href="#l2.117"></a><span id="l2.117"> </span>
<a href="#l2.118"></a><span id="l2.118">   initOpenItems: function() {</span>
<a href="#l2.119"></a><span id="l2.119">     var showOpen = this.onSaveableLink || (this.inDirList &amp;&amp; this.onLink);</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineat">@@ -498,16 +506,70 @@ nsContextMenu.prototype = {</span>
<a href="#l2.121"></a><span id="l2.121">         this.setItemAttr(&quot;context-video-fullscreen&quot;, &quot;disabled&quot;, hasError);</span>
<a href="#l2.122"></a><span id="l2.122">         this.setItemAttr(&quot;context-video-showstats&quot;, &quot;disabled&quot;, hasError);</span>
<a href="#l2.123"></a><span id="l2.123">         this.setItemAttr(&quot;context-video-hidestats&quot;, &quot;disabled&quot;, hasError);</span>
<a href="#l2.124"></a><span id="l2.124">       }</span>
<a href="#l2.125"></a><span id="l2.125">     }</span>
<a href="#l2.126"></a><span id="l2.126">     this.showItem(&quot;context-media-sep-commands&quot;, onMedia);</span>
<a href="#l2.127"></a><span id="l2.127">   },</span>
<a href="#l2.128"></a><span id="l2.128"> </span>
<a href="#l2.129"></a><span id="l2.129" class="difflineplus">+  initPasswordManagerItems: function() {</span>
<a href="#l2.130"></a><span id="l2.130" class="difflineplus">+    let fillMenu = document.getElementById(&quot;fill-login&quot;);</span>
<a href="#l2.131"></a><span id="l2.131" class="difflineplus">+    // If no fill Menu, probably mailContext so nothing to set up.</span>
<a href="#l2.132"></a><span id="l2.132" class="difflineplus">+    if (!fillMenu)</span>
<a href="#l2.133"></a><span id="l2.133" class="difflineplus">+      return;</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineplus">+</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineplus">+    let loginFillInfo = gContextMenuContentData &amp;&amp; gContextMenuContentData.loginFillInfo;</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineplus">+</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineplus">+    // If we could not find a password field we</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineplus">+    // don't want to show the form fill option.</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineplus">+    let showFill = loginFillInfo &amp;&amp; loginFillInfo.passwordField.found;</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineplus">+</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineplus">+    // Disable the fill option if the user has set a master password</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineplus">+    // or if the password field or target field are disabled.</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineplus">+    let disableFill = !loginFillInfo ||</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineplus">+                      !Services.logins ||</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineplus">+                      !Services.logins.isLoggedIn ||</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineplus">+                      loginFillInfo.passwordField.disabled ||</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineplus">+                      (!this.onPassword &amp;&amp; loginFillInfo.usernameField.disabled);</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineplus">+</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineplus">+    this.showItem(&quot;fill-login-separator&quot;, showFill);</span>
<a href="#l2.150"></a><span id="l2.150" class="difflineplus">+    this.showItem(&quot;fill-login&quot;, showFill);</span>
<a href="#l2.151"></a><span id="l2.151" class="difflineplus">+    this.setItemAttr(&quot;fill-login&quot;, &quot;disabled&quot;, disableFill);</span>
<a href="#l2.152"></a><span id="l2.152" class="difflineplus">+</span>
<a href="#l2.153"></a><span id="l2.153" class="difflineplus">+    // Set the correct label for the fill menu</span>
<a href="#l2.154"></a><span id="l2.154" class="difflineplus">+    if (this.onPassword) {</span>
<a href="#l2.155"></a><span id="l2.155" class="difflineplus">+      fillMenu.setAttribute(&quot;label&quot;, fillMenu.getAttribute(&quot;label-password&quot;));</span>
<a href="#l2.156"></a><span id="l2.156" class="difflineplus">+      fillMenu.setAttribute(&quot;accesskey&quot;, fillMenu.getAttribute(&quot;accesskey-password&quot;));</span>
<a href="#l2.157"></a><span id="l2.157" class="difflineplus">+    } else {</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineplus">+      fillMenu.setAttribute(&quot;label&quot;, fillMenu.getAttribute(&quot;label-login&quot;));</span>
<a href="#l2.159"></a><span id="l2.159" class="difflineplus">+      fillMenu.setAttribute(&quot;accesskey&quot;, fillMenu.getAttribute(&quot;accesskey-login&quot;));</span>
<a href="#l2.160"></a><span id="l2.160" class="difflineplus">+    }</span>
<a href="#l2.161"></a><span id="l2.161" class="difflineplus">+</span>
<a href="#l2.162"></a><span id="l2.162" class="difflineplus">+    if (!showFill || disableFill) {</span>
<a href="#l2.163"></a><span id="l2.163" class="difflineplus">+      return;</span>
<a href="#l2.164"></a><span id="l2.164" class="difflineplus">+    }</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineplus">+    let documentURI = gContextMenuContentData.documentURIObject;</span>
<a href="#l2.166"></a><span id="l2.166" class="difflineplus">+    let fragment = LoginManagerContextMenu.addLoginsToMenu(this.target, this.browser, documentURI);</span>
<a href="#l2.167"></a><span id="l2.167" class="difflineplus">+</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineplus">+    this.showItem(&quot;fill-login-no-logins&quot;, !fragment);</span>
<a href="#l2.169"></a><span id="l2.169" class="difflineplus">+</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineplus">+    if (!fragment) {</span>
<a href="#l2.171"></a><span id="l2.171" class="difflineplus">+      return;</span>
<a href="#l2.172"></a><span id="l2.172" class="difflineplus">+    }</span>
<a href="#l2.173"></a><span id="l2.173" class="difflineplus">+    let popup = document.getElementById(&quot;fill-login-popup&quot;);</span>
<a href="#l2.174"></a><span id="l2.174" class="difflineplus">+    let insertBeforeElement = document.getElementById(&quot;fill-login-no-logins&quot;);</span>
<a href="#l2.175"></a><span id="l2.175" class="difflineplus">+    popup.insertBefore(fragment, insertBeforeElement);</span>
<a href="#l2.176"></a><span id="l2.176" class="difflineplus">+  },</span>
<a href="#l2.177"></a><span id="l2.177" class="difflineplus">+</span>
<a href="#l2.178"></a><span id="l2.178" class="difflineplus">+  openPasswordManager: function() {</span>
<a href="#l2.179"></a><span id="l2.179" class="difflineplus">+    // LoginHelper.openPasswordManager(window, gContextMenuContentData.documentURIObject.host);</span>
<a href="#l2.180"></a><span id="l2.180" class="difflineplus">+    toDataManager(gContextMenuContentData.documentURIObject.host + '|passwords');</span>
<a href="#l2.181"></a><span id="l2.181" class="difflineplus">+  },</span>
<a href="#l2.182"></a><span id="l2.182" class="difflineplus">+</span>
<a href="#l2.183"></a><span id="l2.183">   /**</span>
<a href="#l2.184"></a><span id="l2.184">    * Retrieve the array of CSS selectors corresponding to the provided node. The first item</span>
<a href="#l2.185"></a><span id="l2.185">    * of the array is the selector of the node in its owner document. Additional items are</span>
<a href="#l2.186"></a><span id="l2.186">    * used if the node is inside a frame, each representing the CSS selector for finding the</span>
<a href="#l2.187"></a><span id="l2.187">    * frame element in its parent document.</span>
<a href="#l2.188"></a><span id="l2.188">    *</span>
<a href="#l2.189"></a><span id="l2.189">    * This format is expected by DevTools in order to handle the Inspect Node context menu</span>
<a href="#l2.190"></a><span id="l2.190">    * item.</span>
<a href="#l2.191"></a><span id="l2.191" class="difflineat">@@ -533,22 +595,16 @@ nsContextMenu.prototype = {</span>
<a href="#l2.192"></a><span id="l2.192">   },</span>
<a href="#l2.193"></a><span id="l2.193"> </span>
<a href="#l2.194"></a><span id="l2.194">   // Set various context menu attributes based on the state of the world.</span>
<a href="#l2.195"></a><span id="l2.195">   setTarget: function(aNode, aRangeParent, aRangeOffset) {</span>
<a href="#l2.196"></a><span id="l2.196">     // Currently &quot;isRemote&quot; is always false.</span>
<a href="#l2.197"></a><span id="l2.197">     //this.isRemote = gContextMenuContentData &amp;&amp; gContextMenuContentData.isRemote;</span>
<a href="#l2.198"></a><span id="l2.198"> </span>
<a href="#l2.199"></a><span id="l2.199">     const xulNS = &quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;;</span>
<a href="#l2.200"></a><span id="l2.200" class="difflineminus">-    if (aNode.nodeType == Node.DOCUMENT_NODE ||</span>
<a href="#l2.201"></a><span id="l2.201" class="difflineminus">-        // Not display on XUL element but relax for &lt;label class=&quot;text-link&quot;&gt;</span>
<a href="#l2.202"></a><span id="l2.202" class="difflineminus">-        (aNode.namespaceURI == xulNS &amp;&amp; !isXULTextLinkLabel(aNode))) {</span>
<a href="#l2.203"></a><span id="l2.203" class="difflineminus">-      this.shouldDisplay = false;</span>
<a href="#l2.204"></a><span id="l2.204" class="difflineminus">-      return;</span>
<a href="#l2.205"></a><span id="l2.205" class="difflineminus">-    }</span>
<a href="#l2.206"></a><span id="l2.206"> </span>
<a href="#l2.207"></a><span id="l2.207">     // Initialize contextual info.</span>
<a href="#l2.208"></a><span id="l2.208">     this.onImage               = false;</span>
<a href="#l2.209"></a><span id="l2.209">     this.onLoadedImage         = false;</span>
<a href="#l2.210"></a><span id="l2.210">     this.onCompletedImage      = false;</span>
<a href="#l2.211"></a><span id="l2.211">     this.onStandaloneImage     = false;</span>
<a href="#l2.212"></a><span id="l2.212">     this.onCanvas              = false;</span>
<a href="#l2.213"></a><span id="l2.213">     this.onVideo               = false;</span>
<a href="#l2.214"></a><span id="l2.214" class="difflineat">@@ -572,20 +628,28 @@ nsContextMenu.prototype = {</span>
<a href="#l2.215"></a><span id="l2.215">     this.hasBGImage            = false;</span>
<a href="#l2.216"></a><span id="l2.216">     this.bgImageURL            = &quot;&quot;;</span>
<a href="#l2.217"></a><span id="l2.217">     this.popupPrincipal        = null;</span>
<a href="#l2.218"></a><span id="l2.218">     this.autoDownload          = false;</span>
<a href="#l2.219"></a><span id="l2.219">     this.isTextSelected        = false;</span>
<a href="#l2.220"></a><span id="l2.220">     this.isContentSelected     = false;</span>
<a href="#l2.221"></a><span id="l2.221">     this.onEditableArea        = false;</span>
<a href="#l2.222"></a><span id="l2.222">     this.canSpellCheck         = false;</span>
<a href="#l2.223"></a><span id="l2.223" class="difflineplus">+    this.onPassword            = false;</span>
<a href="#l2.224"></a><span id="l2.224"> </span>
<a href="#l2.225"></a><span id="l2.225">     // Remember the node that was clicked.</span>
<a href="#l2.226"></a><span id="l2.226">     this.target = aNode;</span>
<a href="#l2.227"></a><span id="l2.227"> </span>
<a href="#l2.228"></a><span id="l2.228" class="difflineplus">+    if (aNode.nodeType == Node.DOCUMENT_NODE ||</span>
<a href="#l2.229"></a><span id="l2.229" class="difflineplus">+        // Not display on XUL element but relax for &lt;label class=&quot;text-link&quot;&gt;</span>
<a href="#l2.230"></a><span id="l2.230" class="difflineplus">+        (aNode.namespaceURI == xulNS &amp;&amp; !isXULTextLinkLabel(aNode))) {</span>
<a href="#l2.231"></a><span id="l2.231" class="difflineplus">+      this.shouldDisplay = false;</span>
<a href="#l2.232"></a><span id="l2.232" class="difflineplus">+      return;</span>
<a href="#l2.233"></a><span id="l2.233" class="difflineplus">+    }</span>
<a href="#l2.234"></a><span id="l2.234" class="difflineplus">+</span>
<a href="#l2.235"></a><span id="l2.235">     let editFlags = SpellCheckHelper.isEditable(this.target, window);</span>
<a href="#l2.236"></a><span id="l2.236">     this.browser = this.target.ownerDocument.defaultView</span>
<a href="#l2.237"></a><span id="l2.237">                               .QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l2.238"></a><span id="l2.238">                               .getInterface(Ci.nsIWebNavigation)</span>
<a href="#l2.239"></a><span id="l2.239">                               .QueryInterface(Ci.nsIDocShell)</span>
<a href="#l2.240"></a><span id="l2.240">                               .chromeEventHandler;</span>
<a href="#l2.241"></a><span id="l2.241"> </span>
<a href="#l2.242"></a><span id="l2.242">     this.autoDownload = Services.prefs.getBoolPref(&quot;browser.download.useDownloadDir&quot;);</span>
<a href="#l2.243"></a><span id="l2.243" class="difflineat">@@ -632,16 +696,17 @@ nsContextMenu.prototype = {</span>
<a href="#l2.244"></a><span id="l2.244">       else if (this.target instanceof HTMLAudioElement) {</span>
<a href="#l2.245"></a><span id="l2.245">         this.onAudio = true;</span>
<a href="#l2.246"></a><span id="l2.246">         this.mediaURL = this.target.currentSrc || this.target.src;</span>
<a href="#l2.247"></a><span id="l2.247">       }</span>
<a href="#l2.248"></a><span id="l2.248">       else if (editFlags &amp; (SpellCheckHelper.INPUT | SpellCheckHelper.TEXTAREA)) {</span>
<a href="#l2.249"></a><span id="l2.249">         this.onTextInput = (editFlags &amp; SpellCheckHelper.TEXTINPUT) !== 0;</span>
<a href="#l2.250"></a><span id="l2.250">         this.onNumeric = (editFlags &amp; SpellCheckHelper.NUMERIC) !== 0;</span>
<a href="#l2.251"></a><span id="l2.251">         this.onEditableArea = (editFlags &amp; SpellCheckHelper.EDITABLE) !== 0;</span>
<a href="#l2.252"></a><span id="l2.252" class="difflineplus">+        this.onPassword = (editFlags &amp; SpellCheckHelper.PASSWORD) !== 0;</span>
<a href="#l2.253"></a><span id="l2.253">         if (this.onEditableArea) {</span>
<a href="#l2.254"></a><span id="l2.254">           InlineSpellCheckerUI.init(this.target.editor);</span>
<a href="#l2.255"></a><span id="l2.255">           InlineSpellCheckerUI.initFromEvent(aRangeParent, aRangeOffset);</span>
<a href="#l2.256"></a><span id="l2.256">         }</span>
<a href="#l2.257"></a><span id="l2.257">         this.onKeywordField = (editFlags &amp; SpellCheckHelper.KEYWORD);</span>
<a href="#l2.258"></a><span id="l2.258">       }</span>
<a href="#l2.259"></a><span id="l2.259">       else if ( this.target instanceof HTMLHtmlElement ) {</span>
<a href="#l2.260"></a><span id="l2.260">         // pages with multiple &lt;body&gt;s are lame. we'll teach them a lesson.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/locales/en-US/chrome/common/contentAreaCommands.dtd</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/locales/en-US/chrome/common/contentAreaCommands.dtd</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -150,11 +150,21 @@ items are mutually exclusive. --&gt;</span>
<a href="#l3.4"></a><span id="l3.4"> &lt;!ENTITY spellIgnoreWord.accesskey      &quot;W&quot;&gt;</span>
<a href="#l3.5"></a><span id="l3.5"> &lt;!ENTITY spellCheckEnable.label         &quot;Check Spelling&quot;&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> &lt;!ENTITY spellCheckEnable.accesskey     &quot;S&quot;&gt;</span>
<a href="#l3.7"></a><span id="l3.7"> &lt;!ENTITY spellNoSuggestions.label       &quot;(No Spelling Suggestions)&quot;&gt;</span>
<a href="#l3.8"></a><span id="l3.8"> &lt;!ENTITY spellDictionaries.label        &quot;Languages&quot;&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> &lt;!ENTITY spellDictionaries.accesskey    &quot;L&quot;&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;!ENTITY spellAddDictionaries.label     &quot;Download More Dictionaries…&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;!ENTITY spellAddDictionaries.accesskey &quot;D&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+&lt;!ENTITY fillLoginMenu.label          &quot;Fill Login&quot;&gt;</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+&lt;!ENTITY fillLoginMenu.accesskey      &quot;F&quot;&gt;</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+&lt;!ENTITY fillPasswordMenu.label       &quot;Fill Password&quot;&gt;</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+&lt;!ENTITY fillPasswordMenu.accesskey   &quot;F&quot;&gt;</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+&lt;!ENTITY fillUsernameMenu.label       &quot;Fill Username&quot;&gt;</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+&lt;!ENTITY fillUsernameMenu.accesskey   &quot;F&quot;&gt;</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+&lt;!ENTITY noLoginSuggestions.label     &quot;(No Login Suggestions)&quot;&gt;</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+&lt;!ENTITY viewSavedLogins.label        &quot;View Saved Logins&quot;&gt;</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+</span>
<a href="#l3.22"></a><span id="l3.22"> &lt;!-- Developer Tools --&gt;</span>
<a href="#l3.23"></a><span id="l3.23"> &lt;!ENTITY devtoolsInspect.label          &quot;Inspect Element&quot;&gt;</span>
<a href="#l3.24"></a><span id="l3.24"> &lt;!ENTITY devtoolsInspect.accesskey      &quot;n&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/suite/mailnews/content/mailContextMenus.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/suite/mailnews/content/mailContextMenus.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -99,23 +99,23 @@ function InThreadPane(aTarget)</span>
<a href="#l4.4"></a><span id="l4.4">  * @param aTarget the target of the popup event</span>
<a href="#l4.5"></a><span id="l4.5">  * @return true always</span>
<a href="#l4.6"></a><span id="l4.6">  */</span>
<a href="#l4.7"></a><span id="l4.7"> function FillMailContextMenu(aTarget, aEvent)</span>
<a href="#l4.8"></a><span id="l4.8"> {</span>
<a href="#l4.9"></a><span id="l4.9">   var inThreadPane = InThreadPane(aTarget);</span>
<a href="#l4.10"></a><span id="l4.10">   gContextMenu = new nsContextMenu(aTarget);</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  // Need to call nsContextMenu's initItems to hide what is not used.</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-  gContextMenu.initItems();</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-</span>
<a href="#l4.15"></a><span id="l4.15">   // Initialize gContextMenuContentData.</span>
<a href="#l4.16"></a><span id="l4.16">   if (aEvent)</span>
<a href="#l4.17"></a><span id="l4.17">     gContextMenu.initContentData(aEvent);</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+  // Need to call nsContextMenu's initItems to hide what is not used.</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+  gContextMenu.initItems();</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+</span>
<a href="#l4.22"></a><span id="l4.22">   var numSelected = GetNumSelectedMessages();</span>
<a href="#l4.23"></a><span id="l4.23">   var oneOrMore = (numSelected &gt; 0);</span>
<a href="#l4.24"></a><span id="l4.24">   var single = (numSelected == 1);</span>
<a href="#l4.25"></a><span id="l4.25"> </span>
<a href="#l4.26"></a><span id="l4.26">   var isNewsgroup = gFolderDisplay.selectedMessageIsNews;</span>
<a href="#l4.27"></a><span id="l4.27"> </span>
<a href="#l4.28"></a><span id="l4.28">   // Clear the global var used to keep track if a 'Delete Message' or 'Move</span>
<a href="#l4.29"></a><span id="l4.29">   // To' command has been triggered via the thread pane context menu.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/4b0de666d1a4">4b0de666d1a4</a> at 2020-07-30T19:32:33Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

