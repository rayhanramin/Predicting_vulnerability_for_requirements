<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 1:66c9c3ea3cbed9214b524d4631cf7bc900e34b8b</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 66c9c3ea3cbed9214b524d4631cf7bc900e34b8b" />
<meta property="og:url" content="/comm-central/rev/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b" />
<meta property="og:description" content="bug 444686 - create/adapt build system for comm-central, creating the buildsystem, r=ted r=Callek r=Standard8" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 66c9c3ea3cbed9214b524d4631cf7bc900e34b8b 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">shortlog</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">files</a> |
changeset |
<a href="/comm-central/raw-rev/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">raw</a>  | <a href="/comm-central/archive/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=444686">bug 444686</a> - create/adapt build system for comm-central, creating the buildsystem, r=ted r=Callek r=Standard8
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#82;&#111;&#98;&#101;&#114;&#116;&#32;&#75;&#97;&#105;&#115;&#101;&#114;&#32;&#60;&#107;&#97;&#105;&#114;&#111;&#64;&#107;&#97;&#105;&#114;&#111;&#46;&#97;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 22 Jul 2008 14:27:55 +0200</td></tr>

<tr>
 <td>changeset 1</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">66c9c3ea3cbed9214b524d4631cf7bc900e34b8b</a></td>
</tr>



<tr>
<td>parent 0</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e4f4569d451a5e0d12a6aa33ebd916f979dd8faa">e4f4569d451a5e0d12a6aa33ebd916f979dd8faa</a>
</td>
</tr>

<tr>
<td>child 2</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c087100cf4cf306023db268640ada54ebb0d4e82">c087100cf4cf306023db268640ada54ebb0d4e82</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=66c9c3ea3cbed9214b524d4631cf7bc900e34b8b">2</a></td></tr>
<tr><td>push user</td><td>kairo@kairo.at</td></tr>
<tr><td>push date</td><td class="date age">Tue, 22 Jul 2008 12:32:18 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@201855946b54 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=201855946b54aa8dd10e5a289b12c622f44d372d">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=201855946b54aa8dd10e5a289b12c622f44d372d&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=201855946b54aa8dd10e5a289b12c622f44d372d&newProject=comm-central&newRevision=66c9c3ea3cbed9214b524d4631cf7bc900e34b8b&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=201855946b54aa8dd10e5a289b12c622f44d372d&newProject=comm-central&newRevision=66c9c3ea3cbed9214b524d4631cf7bc900e34b8b&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=201855946b54aa8dd10e5a289b12c622f44d372d&newProject=comm-central&newRevision=66c9c3ea3cbed9214b524d4631cf7bc900e34b8b&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28ted%29&revcount=50">ted</a>, <a href="/comm-central/log?rev=reviewer%28Callek%29&revcount=50">Callek</a>, <a href="/comm-central/log?rev=reviewer%28Standard8%29&revcount=50">Standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=444686">444686</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=444686">bug 444686</a> - create/adapt build system for comm-central, creating the buildsystem, r=ted r=Callek r=Standard8</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/.hgignore">.hgignore</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/.hgignore">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/.hgignore">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/.hgignore">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/.hgignore">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/.hgignore">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/Makefile.in">Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/Makefile.in">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/Makefile.in">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/Makefile.in">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/Makefile.in">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/aclocal.m4">aclocal.m4</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/aclocal.m4">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/aclocal.m4">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/aclocal.m4">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/aclocal.m4">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/aclocal.m4">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/allmakefiles.sh">allmakefiles.sh</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/allmakefiles.sh">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/allmakefiles.sh">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/allmakefiles.sh">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/allmakefiles.sh">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/allmakefiles.sh">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/build/macosx/universal/flight.mk">build/macosx/universal/flight.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/build/macosx/universal/flight.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/build/macosx/universal/flight.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/build/macosx/universal/flight.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/build/macosx/universal/flight.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/build/macosx/universal/flight.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.mk">client.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.py">client.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.py">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.py">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.py">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.py">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/client.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/autoconf.mk.in">config/autoconf.mk.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/autoconf.mk.in">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/autoconf.mk.in">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/autoconf.mk.in">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/autoconf.mk.in">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/autoconf.mk.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/config.mk">config/config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/config.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/config.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/config.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/config.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/rules.mk">config/rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/rules.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/rules.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/rules.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/rules.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/rules.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-config.mk">config/static-config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-config.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-config.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-config.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-config.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-rules.mk">config/static-rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-rules.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-rules.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-rules.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-rules.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/static-rules.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/version.mk">config/version.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/version.mk">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/version.mk">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/version.mk">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/version.mk">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/config/version.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/configure.in">file</a> |
<a href="/comm-central/annotate/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/configure.in">annotate</a> |
<a href="/comm-central/diff/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/configure.in">diff</a> |
<a href="/comm-central/comparison/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/configure.in">comparison</a> |
<a href="/comm-central/log/66c9c3ea3cbed9214b524d4631cf7bc900e34b8b/configure.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1">new file mode 100644</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineminus">--- /dev/null</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineplus">+++ b/.hgignore</span>
<a href="#l1.4"></a><span id="l1.4" class="difflineat">@@ -0,0 +1,25 @@</span>
<a href="#l1.5"></a><span id="l1.5" class="difflineplus">+# .hgignore - List of filenames hg should ignore</span>
<a href="#l1.6"></a><span id="l1.6" class="difflineplus">+</span>
<a href="#l1.7"></a><span id="l1.7" class="difflineplus">+# Filenames that should be ignored wherever they appear</span>
<a href="#l1.8"></a><span id="l1.8" class="difflineplus">+~$</span>
<a href="#l1.9"></a><span id="l1.9" class="difflineplus">+\.pyc$</span>
<a href="#l1.10"></a><span id="l1.10" class="difflineplus">+(^|/)TAGS$</span>
<a href="#l1.11"></a><span id="l1.11" class="difflineplus">+</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+# User files that may appear at the root</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+^\.mozconfig$</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+^mozconfig$</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+^\.mozconfig\.mk$</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+^\.mozconfig\.out$</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+^configure$</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+^config\.cache$</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+^config\.log$</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+^ID$</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+# Build directories</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineplus">+^obj-</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineplus">+^objdir-</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+# directories we check out from other repositories</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+^calendar$</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+^directory/c-sdk$</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+^mozilla$</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1">new file mode 100644</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineminus">--- /dev/null</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineplus">+++ b/Makefile.in</span>
<a href="#l2.4"></a><span id="l2.4" class="difflineat">@@ -0,0 +1,49 @@</span>
<a href="#l2.5"></a><span id="l2.5" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l2.6"></a><span id="l2.6" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l2.7"></a><span id="l2.7" class="difflineplus">+#</span>
<a href="#l2.8"></a><span id="l2.8" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l2.9"></a><span id="l2.9" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+#</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+# License.</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineplus">+#</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+#</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+# Netscape Communications Corporation.</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineplus">+#</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineplus">+# Contributor(s):</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineplus">+#</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+#</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+DEPTH		= .</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineplus">+topsrcdir	= @top_srcdir@</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineplus">+srcdir		= @srcdir@</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineplus">+VPATH		= @srcdir@</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineplus">+</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineplus">+include $(topsrcdir)/config/config.mk</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineplus">+</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineplus">+default install export libs clean realclean distclean alldep maybe_clobber_profiledbuild check rebase splitsymbols buildsymbols uploadsymbols signnss deliver::</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineplus">+	$(MAKE) -C mozilla $@</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineplus">+include $(topsrcdir)/$(MOZ_BUILD_APP)/build.mk</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineplus">+</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineplus">+include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/aclocal.m4</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,18 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+dnl</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+dnl Local autoconf macros used with mozilla</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+dnl The contents of this file are under the Public Domain.</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+dnl </span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+builtin(include, mozilla/build/autoconf/glib.m4)dnl</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+builtin(include, mozilla/build/autoconf/gtk.m4)dnl</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+builtin(include, mozilla/build/autoconf/libIDL.m4)dnl</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+builtin(include, mozilla/build/autoconf/libIDL-2.m4)dnl</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+builtin(include, mozilla/build/autoconf/nspr.m4)dnl</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+builtin(include, mozilla/build/autoconf/nss.m4)dnl</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+builtin(include, mozilla/build/autoconf/libart.m4)dnl</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+builtin(include, mozilla/build/autoconf/pkg.m4)dnl</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+builtin(include, mozilla/build/autoconf/freetype2.m4)dnl</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+builtin(include, mozilla/build/autoconf/codeset.m4)dnl</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+dnl</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+define(MOZ_TOPSRCDIR,mozilla)dnl MOZ_TOPSRCDIR is used in altoptions.m4</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+builtin(include, mozilla/build/autoconf/altoptions.m4)dnl</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100755</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/allmakefiles.sh</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,81 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+#! /bin/sh</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+#</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineplus">+#</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+#</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+# License.</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineplus">+#</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+#</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineplus">+# Netscape Communications Corporation.</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1999</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineplus">+#</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineplus">+# Contributor(s):</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineplus">+#</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineplus">+#</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineplus">+</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineplus">+# allmakefiles.sh - List of all makefiles.</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineplus">+#   Appends the list of makefiles to the variable, MAKEFILES.</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineplus">+#   There is no need to rerun autoconf after adding makefiles.</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineplus">+#   You only need to run configure.</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineplus">+</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineplus">+MAKEFILES=&quot;&quot;</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineplus">+</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineplus">+# add_makefiles - Shell function to add makefiles to MAKEFILES</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineplus">+add_makefiles() {</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineplus">+  MAKEFILES=&quot;$MAKEFILES $*&quot;</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineplus">+}</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineplus">+</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineplus">+if [ &quot;$srcdir&quot; = &quot;&quot; ]; then</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineplus">+  srcdir=.</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineplus">+fi</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineplus">+</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineplus">+#</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineplus">+# Common makefiles used by everyone</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineplus">+#</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineplus">+add_makefiles &quot;</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineplus">+Makefile</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineplus">+config/autoconf.mk</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineplus">+&quot;</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineplus">+</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineplus">+if [ &quot;$MOZ_LDAP_XPCOM&quot; ]; then</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineplus">+  . &quot;${srcdir}/directory/makefiles.sh&quot;</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineplus">+fi</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineplus">+</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineplus">+if [ &quot;$MOZ_MAIL_NEWS&quot; ]; then</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineplus">+  . &quot;${srcdir}/mailnews/makefiles.sh&quot;</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineplus">+fi</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineplus">+</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineplus">+if [ &quot;$MOZ_CALENDAR&quot; ]; then</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineplus">+  . &quot;${srcdir}/calendar/shared_makefiles.sh&quot;</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineplus">+  . &quot;${srcdir}/calendar/lightning/makefiles.sh&quot;</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineplus">+fi</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineplus">+</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineplus">+#</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineplus">+# Application-specific makefiles</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineplus">+#</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineplus">+if test -f &quot;${srcdir}/${MOZ_BUILD_APP}/makefiles.sh&quot;; then</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineplus">+  . &quot;${srcdir}/${MOZ_BUILD_APP}/makefiles.sh&quot;</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineplus">+fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">new file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- /dev/null</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ b/build/macosx/universal/flight.mk</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -0,0 +1,100 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineplus">+#</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+#</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+# License.</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+#</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineplus">+# The Original Code is the Mozilla Mac OS X Universal Binary Packaging System</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineplus">+#</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineplus">+# The Initial Developer of the Original Code is Google Inc.</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 2006</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineplus">+#</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineplus">+# Contributor(s):</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineplus">+#  Mark Mentovai &lt;mark@moxienet.com&gt; (Original Author)</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineplus">+#</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineplus">+#</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineplus">+</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineplus">+# BE CAREFUL!  This makefile handles a postflight_all rule for a</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineplus">+# multi-project build, so DON'T rely on anything that might differ between</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineplus">+# the two OBJDIRs.</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineplus">+</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineplus">+ifndef OBJDIR</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineplus">+OBJDIR_PPC = $(MOZ_OBJDIR)/ppc</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineplus">+OBJDIR_X86 = $(MOZ_OBJDIR)/i386</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineplus">+DIST_PPC = $(OBJDIR_PPC)/mozilla/dist</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineplus">+DIST_X86 = $(OBJDIR_X86)/mozilla/dist</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineplus">+DIST_UNI = $(DIST_PPC)/universal</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+OBJDIR = $(OBJDIR_PPC)</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+endif</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+include $(OBJDIR)/config/autoconf.mk</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+DIST = $(OBJDIR)/mozilla/dist</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+DBGTAG = Debug</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+else</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+DBGTAG =</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+endif</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+ifdef LIBXUL_SDK # {</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+APP_CONTENTS = Contents/Frameworks/XUL.framework</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+else # } {</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+APP_CONTENTS = Contents/MacOS</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+endif # } LIBXUL_SDK</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+MOZ_PKG_APPNAME = $(MOZ_APP_NAME)</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+APPNAME = $(MOZ_APP_DISPLAYNAME)$(DBGTAG).app</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+INSTALLER_DIR = $(MOZ_BUILD_APP)/installer</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+BUILDCONFIG_JAR = $(APP_CONTENTS)/chrome/toolkit.jar</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineplus">+</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineplus">+postflight_all:</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineplus">+# Build the universal package out of only the bits that would be released.</span>
<a href="#l5.77"></a><span id="l5.77" class="difflineplus">+# Call the packager to set this up.  Set UNIVERSAL_BINARY= to avoid producing</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineplus">+# a universal binary too early, before the unified bits have been staged.</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineplus">+# Set SIGN_NSS= to skip shlibsign.</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineplus">+	$(MAKE) -C $(OBJDIR_PPC)/$(INSTALLER_DIR) \</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineplus">+          UNIVERSAL_BINARY= SIGN_NSS= PKG_SKIP_STRIP=1 stage-package</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineplus">+	$(MAKE) -C $(OBJDIR_X86)/$(INSTALLER_DIR) \</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineplus">+          UNIVERSAL_BINARY= SIGN_NSS= PKG_SKIP_STRIP=1 stage-package</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineplus">+# Remove .chk files that may have been copied from the NSS build.  These will</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineplus">+# cause unify to warn or fail if present.  New .chk files that are</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineplus">+# appropriate for the merged libraries will be generated when the universal</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineplus">+# dmg is built.</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineplus">+	rm -f $(DIST_PPC)/$(MOZ_PKG_APPNAME)/$(APPNAME)/$(APP_CONTENTS)/*.chk \</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineplus">+	      $(DIST_X86)/$(MOZ_PKG_APPNAME)/$(APPNAME)/$(APP_CONTENTS)/*.chk</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineplus">+# The only difference betewen the two trees now should be the</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineplus">+# about:buildconfig page.  Fix it up.</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineplus">+	$(TOPSRCDIR)/mozilla/build/macosx/universal/fix-buildconfig \</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineplus">+	  $(DIST_PPC)/$(MOZ_PKG_APPNAME)/$(APPNAME)/$(BUILDCONFIG_JAR) \</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineplus">+	  $(DIST_X86)/$(MOZ_PKG_APPNAME)/$(APPNAME)/$(BUILDCONFIG_JAR)</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineplus">+	mkdir -p $(DIST_UNI)/$(MOZ_PKG_APPNAME)</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineplus">+	rm -f $(DIST_X86)/universal</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineplus">+	ln -s $(DIST_UNI) $(DIST_X86)/universal</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineplus">+	rm -rf $(DIST_UNI)/$(MOZ_PKG_APPNAME)/$(APPNAME)</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineplus">+	$(TOPSRCDIR)/mozilla/build/macosx/universal/unify \</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineplus">+	  $(DIST_PPC)/$(MOZ_PKG_APPNAME)/$(APPNAME) \</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineplus">+	  $(DIST_X86)/$(MOZ_PKG_APPNAME)/$(APPNAME) \</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineplus">+	  $(DIST_UNI)/$(MOZ_PKG_APPNAME)/$(APPNAME)</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineplus">+# A universal .dmg can now be produced by making in either architecture's</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineplus">+# INSTALLER_DIR.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/client.mk</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,386 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+#</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+#</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+# License.</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+#</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+#</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+# Netscape Communications Corporation.</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+#</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+# Contributor(s):</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+#   Stephen Lamm</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+#   Benjamin Smedberg &lt;bsmedberg@covad.net&gt;</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+#   Chase Phillips &lt;chase@mozilla.org&gt;</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+#   Mark Mentovai &lt;mark@moxienet.com&gt;</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+#   Robert Kaiser &lt;kairo@kairo.at&gt;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+#</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+#</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+# Build a comm application (Mozilla calendar, mail or suite).</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+#</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+# To build a tree,</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+#    1. hg clone http://hg.mozilla.org/comm-central comm</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+#    2. cd comm</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+#    3. python client.py checkout</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+#    4. create your .mozconfig file with</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+#       ac_add_options --enable-application=suite</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+#         (or mail, or calendar)</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+#    5. gmake -f client.mk</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+#</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+# Other targets (gmake -f client.mk [targets...]),</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+#    build</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+#    clean</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+#    distclean</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+#</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+# See http://developer.mozilla.org/en/docs/Build_Documentation for </span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+# more information.</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+#</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+# Options:</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+#   MOZ_BUILD_PROJECTS   - Build multiple projects in subdirectories</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+#                          of MOZ_OBJDIR</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+#   MOZ_OBJDIR           - Destination object directory</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+#   MOZ_MAKE_FLAGS       - Flags to pass to $(MAKE)</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+#   MOZ_PREFLIGHT_ALL  } - Makefiles to run before any project in</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+#   MOZ_PREFLIGHT      }   MOZ_BUILD_PROJECTS, before each project, after</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+#   MOZ_POSTFLIGHT     }   each project, and after all projects; these</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+#   MOZ_POSTFLIGHT_ALL }   variables contain space-separated lists</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+#   MOZ_UNIFY_BDATE      - Set to use the same bdate for each project in</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+#                          MOZ_BUILD_PROJECTS</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+#</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+#######################################################################</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineplus">+# Defines</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineplus">+</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+comma := ,</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineplus">+CWD := $(shell pwd)</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+ifneq (1,$(words $(CWD)))</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+$(error The mozilla directory cannot be located in a path with spaces.)</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineplus">+endif</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+ifeq &quot;$(CWD)&quot; &quot;/&quot;</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineplus">+CWD   := /.</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+endif</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineplus">+</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineplus">+ifndef TOPSRCDIR</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+ifeq (,$(wildcard client.mk))</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+$(error Must run from the client.mk directory, or specify TOPSRCDIR)</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+endif</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineplus">+TOPSRCDIR = $(CWD)</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+endif</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineplus">+</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+ifeq (Darwin,$(shell uname -s))</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+AUTOCONF ?= autoconf213</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+else</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineplus">+AUTOCONF ?= autoconf-2.13</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+endif</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+MKDIR := mkdir</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+SH := /bin/sh</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineplus">+ifndef MAKE</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+MAKE := gmake</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineplus">+endif</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineplus">+PERL ?= perl</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineplus">+PYTHON ?= python</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineplus">+</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineplus">+CONFIG_GUESS_SCRIPT := $(wildcard $(TOPSRCDIR)/mozilla/build/autoconf/config.guess)</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+ifdef CONFIG_GUESS_SCRIPT</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineplus">+  CONFIG_GUESS = $(shell $(CONFIG_GUESS_SCRIPT))</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineplus">+endif</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineplus">+</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineplus">+</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineplus">+####################################</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineplus">+# Sanity checks</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineplus">+</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineplus">+ifneq (,$(filter MINGW%,$(shell uname -s)))</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineplus">+# check for CRLF line endings</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+ifneq (0,$(shell $(PERL) -e 'binmode(STDIN); while (&lt;STDIN&gt;) { if (/\r/) { print &quot;1&quot;; exit } } print &quot;0&quot;' &lt; $(TOPSRCDIR)/client.mk))</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineplus">+$(error This source tree appears to have Windows-style line endings. To \</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineplus">+convert it to Unix-style line endings, run \</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineplus">+&quot;python mozilla/build/win32/mozilla-dos2unix.py&quot;)</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineplus">+endif</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineplus">+endif</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineplus">+</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineplus">+####################################</span>
<a href="#l6.131"></a><span id="l6.131" class="difflineplus">+# Load mozconfig Options</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineplus">+</span>
<a href="#l6.133"></a><span id="l6.133" class="difflineplus">+# See build pages, http://www.mozilla.org/build/ for how to set up mozconfig.</span>
<a href="#l6.134"></a><span id="l6.134" class="difflineplus">+</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineplus">+MOZCONFIG_LOADER := mozilla/build/autoconf/mozconfig2client-mk</span>
<a href="#l6.136"></a><span id="l6.136" class="difflineplus">+MOZCONFIG_FINDER := mozilla/build/autoconf/mozconfig-find</span>
<a href="#l6.137"></a><span id="l6.137" class="difflineplus">+MOZCONFIG_MODULES := mozilla/build/unix/uniq.pl</span>
<a href="#l6.138"></a><span id="l6.138" class="difflineplus">+</span>
<a href="#l6.139"></a><span id="l6.139" class="difflineplus">+run_for_side_effects := \</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineplus">+  $(shell $(TOPSRCDIR)/$(MOZCONFIG_LOADER) $(TOPSRCDIR) $(TOPSRCDIR)/.mozconfig.mk &gt; $(TOPSRCDIR)/.mozconfig.out)</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineplus">+</span>
<a href="#l6.142"></a><span id="l6.142" class="difflineplus">+include $(TOPSRCDIR)/.mozconfig.mk</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineplus">+</span>
<a href="#l6.144"></a><span id="l6.144" class="difflineplus">+ifdef MOZ_BUILD_PROJECTS</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineplus">+</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineplus">+ifndef MOZ_OBJDIR</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineplus">+  $(error When MOZ_BUILD_PROJECTS is set, you must set MOZ_OBJDIR)</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineplus">+endif</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineplus">+ifdef MOZ_CURRENT_PROJECT</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineplus">+  OBJDIR = $(MOZ_OBJDIR)/$(MOZ_CURRENT_PROJECT)</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineplus">+  MOZ_MAKE = $(MAKE) $(MOZ_MAKE_FLAGS) -C $(OBJDIR)</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineplus">+  BUILD_PROJECT_ARG = MOZ_BUILD_APP=$(MOZ_CURRENT_PROJECT)</span>
<a href="#l6.153"></a><span id="l6.153" class="difflineplus">+else</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineplus">+  OBJDIR = $(error Cannot find the OBJDIR when MOZ_CURRENT_PROJECT is not set.)</span>
<a href="#l6.155"></a><span id="l6.155" class="difflineplus">+  MOZ_MAKE = $(error Cannot build in the OBJDIR when MOZ_CURRENT_PROJECT is not set.)</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineplus">+endif</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineplus">+</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineplus">+else # MOZ_BUILD_PROJECTS</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineplus">+</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineplus">+ifdef MOZ_OBJDIR</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineplus">+  OBJDIR = $(MOZ_OBJDIR)</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineplus">+  MOZ_MAKE = $(MAKE) $(MOZ_MAKE_FLAGS) -C $(OBJDIR)</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineplus">+else</span>
<a href="#l6.164"></a><span id="l6.164" class="difflineplus">+  OBJDIR := $(TOPSRCDIR)</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineplus">+  MOZ_MAKE := $(MAKE) $(MOZ_MAKE_FLAGS)</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineplus">+endif</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineplus">+</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineplus">+endif # MOZ_BUILD_PROJECTS</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineplus">+</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineplus">+CONFIGURES := $(TOPSRCDIR)/configure $(TOPSRCDIR)/mozilla/configure</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineplus">+</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineplus">+#######################################################################</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineplus">+# Rules</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineplus">+</span>
<a href="#l6.175"></a><span id="l6.175" class="difflineplus">+# The default rule is build</span>
<a href="#l6.176"></a><span id="l6.176" class="difflineplus">+build::</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineplus">+</span>
<a href="#l6.178"></a><span id="l6.178" class="difflineplus">+# Print out any options loaded from mozconfig.</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineplus">+all build clean depend distclean export libs install realclean::</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineplus">+	@if test -f .mozconfig.out; then \</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineplus">+	  cat .mozconfig.out; \</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineplus">+	  rm -f .mozconfig.out; \</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineplus">+	else true; \</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineplus">+	fi</span>
<a href="#l6.185"></a><span id="l6.185" class="difflineplus">+</span>
<a href="#l6.186"></a><span id="l6.186" class="difflineplus">+# Windows equivalents</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineplus">+build_all: build</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineplus">+build_all_dep: alldep</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineplus">+build_all_depend: alldep</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineplus">+clobber clobber_all: clean</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineplus">+</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineplus">+# Do everything from scratch</span>
<a href="#l6.193"></a><span id="l6.193" class="difflineplus">+everything: clean build</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineplus">+</span>
<a href="#l6.195"></a><span id="l6.195" class="difflineplus">+#####################################################</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineplus">+# Build date unification</span>
<a href="#l6.197"></a><span id="l6.197" class="difflineplus">+</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineplus">+ifdef MOZ_UNIFY_BDATE</span>
<a href="#l6.199"></a><span id="l6.199" class="difflineplus">+ifndef MOZ_BUILD_DATE</span>
<a href="#l6.200"></a><span id="l6.200" class="difflineplus">+ifdef MOZ_BUILD_PROJECTS</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineplus">+MOZ_BUILD_DATE = $(shell $(PYTHON) $(TOPSRCDIR)/mozilla/toolkit/xre/make-platformini.py --print-buildid)</span>
<a href="#l6.202"></a><span id="l6.202" class="difflineplus">+export MOZ_BUILD_DATE</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineplus">+endif</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineplus">+endif</span>
<a href="#l6.205"></a><span id="l6.205" class="difflineplus">+endif</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineplus">+</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineplus">+#####################################################</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineplus">+# Preflight, before building any project</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineplus">+</span>
<a href="#l6.210"></a><span id="l6.210" class="difflineplus">+build alldep preflight_all::</span>
<a href="#l6.211"></a><span id="l6.211" class="difflineplus">+ifeq (,$(MOZ_CURRENT_PROJECT)$(if $(MOZ_PREFLIGHT_ALL),,1))</span>
<a href="#l6.212"></a><span id="l6.212" class="difflineplus">+# Don't run preflight_all for individual projects in multi-project builds</span>
<a href="#l6.213"></a><span id="l6.213" class="difflineplus">+# (when MOZ_CURRENT_PROJECT is set.)</span>
<a href="#l6.214"></a><span id="l6.214" class="difflineplus">+ifndef MOZ_BUILD_PROJECTS</span>
<a href="#l6.215"></a><span id="l6.215" class="difflineplus">+# Building a single project, OBJDIR is usable.</span>
<a href="#l6.216"></a><span id="l6.216" class="difflineplus">+	set -e; \</span>
<a href="#l6.217"></a><span id="l6.217" class="difflineplus">+	for mkfile in $(MOZ_PREFLIGHT_ALL); do \</span>
<a href="#l6.218"></a><span id="l6.218" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/$$mkfile preflight_all TOPSRCDIR=$(TOPSRCDIR) OBJDIR=$(OBJDIR) MOZ_OBJDIR=$(MOZ_OBJDIR); \</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineplus">+	done</span>
<a href="#l6.220"></a><span id="l6.220" class="difflineplus">+else</span>
<a href="#l6.221"></a><span id="l6.221" class="difflineplus">+# OBJDIR refers to the project-specific OBJDIR, which is not available at</span>
<a href="#l6.222"></a><span id="l6.222" class="difflineplus">+# this point when building multiple projects.  Only MOZ_OBJDIR is available.</span>
<a href="#l6.223"></a><span id="l6.223" class="difflineplus">+	set -e; \</span>
<a href="#l6.224"></a><span id="l6.224" class="difflineplus">+	for mkfile in $(MOZ_PREFLIGHT_ALL); do \</span>
<a href="#l6.225"></a><span id="l6.225" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/$$mkfile preflight_all TOPSRCDIR=$(TOPSRCDIR) MOZ_OBJDIR=$(MOZ_OBJDIR) MOZ_BUILD_PROJECTS=&quot;$(MOZ_BUILD_PROJECTS)&quot;; \</span>
<a href="#l6.226"></a><span id="l6.226" class="difflineplus">+	done</span>
<a href="#l6.227"></a><span id="l6.227" class="difflineplus">+endif</span>
<a href="#l6.228"></a><span id="l6.228" class="difflineplus">+endif</span>
<a href="#l6.229"></a><span id="l6.229" class="difflineplus">+</span>
<a href="#l6.230"></a><span id="l6.230" class="difflineplus">+# If we're building multiple projects, but haven't specified which project,</span>
<a href="#l6.231"></a><span id="l6.231" class="difflineplus">+# loop through them.</span>
<a href="#l6.232"></a><span id="l6.232" class="difflineplus">+</span>
<a href="#l6.233"></a><span id="l6.233" class="difflineplus">+ifeq (,$(MOZ_CURRENT_PROJECT)$(if $(MOZ_BUILD_PROJECTS),,1))</span>
<a href="#l6.234"></a><span id="l6.234" class="difflineplus">+configure depend build install export libs clean realclean distclean alldep preflight postflight maybe_clobber_profiledbuild::</span>
<a href="#l6.235"></a><span id="l6.235" class="difflineplus">+	set -e; \</span>
<a href="#l6.236"></a><span id="l6.236" class="difflineplus">+	for app in $(MOZ_BUILD_PROJECTS); do \</span>
<a href="#l6.237"></a><span id="l6.237" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/client.mk $@ MOZ_CURRENT_PROJECT=$$app; \</span>
<a href="#l6.238"></a><span id="l6.238" class="difflineplus">+	done</span>
<a href="#l6.239"></a><span id="l6.239" class="difflineplus">+</span>
<a href="#l6.240"></a><span id="l6.240" class="difflineplus">+else</span>
<a href="#l6.241"></a><span id="l6.241" class="difflineplus">+</span>
<a href="#l6.242"></a><span id="l6.242" class="difflineplus">+# MOZ_CURRENT_PROJECT: either doing a single-project build, or building an</span>
<a href="#l6.243"></a><span id="l6.243" class="difflineplus">+# individual project in a multi-project build.</span>
<a href="#l6.244"></a><span id="l6.244" class="difflineplus">+</span>
<a href="#l6.245"></a><span id="l6.245" class="difflineplus">+####################################</span>
<a href="#l6.246"></a><span id="l6.246" class="difflineplus">+# Configure</span>
<a href="#l6.247"></a><span id="l6.247" class="difflineplus">+</span>
<a href="#l6.248"></a><span id="l6.248" class="difflineplus">+CONFIG_STATUS = $(wildcard $(OBJDIR)/config.status)</span>
<a href="#l6.249"></a><span id="l6.249" class="difflineplus">+CONFIG_CACHE  = $(wildcard $(OBJDIR)/config.cache)</span>
<a href="#l6.250"></a><span id="l6.250" class="difflineplus">+</span>
<a href="#l6.251"></a><span id="l6.251" class="difflineplus">+EXTRA_CONFIG_DEPS := \</span>
<a href="#l6.252"></a><span id="l6.252" class="difflineplus">+	$(TOPSRCDIR)/aclocal.m4 \</span>
<a href="#l6.253"></a><span id="l6.253" class="difflineplus">+	$(TOPSRCDIR)/mozilla/aclocal.m4 \</span>
<a href="#l6.254"></a><span id="l6.254" class="difflineplus">+	$(wildcard $(TOPSRCDIR)/mozilla/build/autoconf/*.m4) \</span>
<a href="#l6.255"></a><span id="l6.255" class="difflineplus">+	$(NULL)</span>
<a href="#l6.256"></a><span id="l6.256" class="difflineplus">+</span>
<a href="#l6.257"></a><span id="l6.257" class="difflineplus">+$(TOPSRCDIR)/configure: $(TOPSRCDIR)/configure.in $(EXTRA_CONFIG_DEPS)</span>
<a href="#l6.258"></a><span id="l6.258" class="difflineplus">+	@echo Generating $@ using autoconf</span>
<a href="#l6.259"></a><span id="l6.259" class="difflineplus">+	cd $(TOPSRCDIR); $(AUTOCONF)</span>
<a href="#l6.260"></a><span id="l6.260" class="difflineplus">+</span>
<a href="#l6.261"></a><span id="l6.261" class="difflineplus">+$(TOPSRCDIR)/mozilla/configure: $(TOPSRCDIR)/mozilla/configure.in $(EXTRA_CONFIG_DEPS)</span>
<a href="#l6.262"></a><span id="l6.262" class="difflineplus">+	@echo Generating $@ using autoconf</span>
<a href="#l6.263"></a><span id="l6.263" class="difflineplus">+	cd $(TOPSRCDIR)/mozilla; $(AUTOCONF)</span>
<a href="#l6.264"></a><span id="l6.264" class="difflineplus">+</span>
<a href="#l6.265"></a><span id="l6.265" class="difflineplus">+CONFIG_STATUS_DEPS := \</span>
<a href="#l6.266"></a><span id="l6.266" class="difflineplus">+	$(TOPSRCDIR)/configure \</span>
<a href="#l6.267"></a><span id="l6.267" class="difflineplus">+	$(TOPSRCDIR)/allmakefiles.sh \</span>
<a href="#l6.268"></a><span id="l6.268" class="difflineplus">+	$(TOPSRCDIR)/.mozconfig.mk \</span>
<a href="#l6.269"></a><span id="l6.269" class="difflineplus">+	$(TOPSRCDIR)/mozilla/configure \</span>
<a href="#l6.270"></a><span id="l6.270" class="difflineplus">+	$(TOPSRCDIR)/mozilla/allmakefiles.sh \</span>
<a href="#l6.271"></a><span id="l6.271" class="difflineplus">+	$(wildcard $(TOPSRCDIR)/mozilla/nsprpub/configure) \</span>
<a href="#l6.272"></a><span id="l6.272" class="difflineplus">+	$(wildcard $(TOPSRCDIR)/mozilla/config/milestone.txt) \</span>
<a href="#l6.273"></a><span id="l6.273" class="difflineplus">+	$(wildcard $(TOPSRCDIR)/directory/c-sdk/configure) \</span>
<a href="#l6.274"></a><span id="l6.274" class="difflineplus">+	$(wildcard $(addsuffix confvars.sh,$(wildcard $(TOPSRCDIR)/*/))) \</span>
<a href="#l6.275"></a><span id="l6.275" class="difflineplus">+	$(NULL)</span>
<a href="#l6.276"></a><span id="l6.276" class="difflineplus">+</span>
<a href="#l6.277"></a><span id="l6.277" class="difflineplus">+# configure uses the program name to determine @srcdir@. Calling it without</span>
<a href="#l6.278"></a><span id="l6.278" class="difflineplus">+#   $(TOPSRCDIR) will set @srcdir@ to &quot;.&quot;; otherwise, it is set to the full</span>
<a href="#l6.279"></a><span id="l6.279" class="difflineplus">+#   path of $(TOPSRCDIR).</span>
<a href="#l6.280"></a><span id="l6.280" class="difflineplus">+ifeq ($(TOPSRCDIR),$(OBJDIR))</span>
<a href="#l6.281"></a><span id="l6.281" class="difflineplus">+  CONFIGURE = ./configure</span>
<a href="#l6.282"></a><span id="l6.282" class="difflineplus">+else</span>
<a href="#l6.283"></a><span id="l6.283" class="difflineplus">+  CONFIGURE = $(TOPSRCDIR)/configure</span>
<a href="#l6.284"></a><span id="l6.284" class="difflineplus">+endif</span>
<a href="#l6.285"></a><span id="l6.285" class="difflineplus">+</span>
<a href="#l6.286"></a><span id="l6.286" class="difflineplus">+configure:: $(CONFIGURES)</span>
<a href="#l6.287"></a><span id="l6.287" class="difflineplus">+ifdef MOZ_BUILD_PROJECTS</span>
<a href="#l6.288"></a><span id="l6.288" class="difflineplus">+	@if test ! -d $(MOZ_OBJDIR); then $(MKDIR) $(MOZ_OBJDIR); else true; fi</span>
<a href="#l6.289"></a><span id="l6.289" class="difflineplus">+	export MOZ_CURRENT_PROJECT</span>
<a href="#l6.290"></a><span id="l6.290" class="difflineplus">+endif</span>
<a href="#l6.291"></a><span id="l6.291" class="difflineplus">+	@if test ! -d $(OBJDIR); then $(MKDIR) $(OBJDIR); else true; fi</span>
<a href="#l6.292"></a><span id="l6.292" class="difflineplus">+	@echo cd $(OBJDIR);</span>
<a href="#l6.293"></a><span id="l6.293" class="difflineplus">+	@echo $(CONFIGURE) $(CONFIGURE_ARGS)</span>
<a href="#l6.294"></a><span id="l6.294" class="difflineplus">+	@cd $(OBJDIR) &amp;&amp; $(BUILD_PROJECT_ARG) $(CONFIGURE_ENV_ARGS) $(CONFIGURE) $(CONFIGURE_ARGS) \</span>
<a href="#l6.295"></a><span id="l6.295" class="difflineplus">+	  || ( echo &quot;*** Fix above errors and then restart with\</span>
<a href="#l6.296"></a><span id="l6.296" class="difflineplus">+               \&quot;$(MAKE) -f client.mk build\&quot;&quot; &amp;&amp; exit 1 )</span>
<a href="#l6.297"></a><span id="l6.297" class="difflineplus">+	@touch $(OBJDIR)/Makefile</span>
<a href="#l6.298"></a><span id="l6.298" class="difflineplus">+</span>
<a href="#l6.299"></a><span id="l6.299" class="difflineplus">+$(OBJDIR)/Makefile $(OBJDIR)/config.status: $(CONFIG_STATUS_DEPS)</span>
<a href="#l6.300"></a><span id="l6.300" class="difflineplus">+	@$(MAKE) -f $(TOPSRCDIR)/client.mk configure</span>
<a href="#l6.301"></a><span id="l6.301" class="difflineplus">+</span>
<a href="#l6.302"></a><span id="l6.302" class="difflineplus">+ifneq (,$(CONFIG_STATUS))</span>
<a href="#l6.303"></a><span id="l6.303" class="difflineplus">+$(OBJDIR)/config/autoconf.mk: $(TOPSRCDIR)/config/autoconf.mk.in</span>
<a href="#l6.304"></a><span id="l6.304" class="difflineplus">+	cd $(OBJDIR); \</span>
<a href="#l6.305"></a><span id="l6.305" class="difflineplus">+	  CONFIG_FILES=config/autoconf.mk ./config.status</span>
<a href="#l6.306"></a><span id="l6.306" class="difflineplus">+endif</span>
<a href="#l6.307"></a><span id="l6.307" class="difflineplus">+</span>
<a href="#l6.308"></a><span id="l6.308" class="difflineplus">+</span>
<a href="#l6.309"></a><span id="l6.309" class="difflineplus">+####################################</span>
<a href="#l6.310"></a><span id="l6.310" class="difflineplus">+# Depend</span>
<a href="#l6.311"></a><span id="l6.311" class="difflineplus">+</span>
<a href="#l6.312"></a><span id="l6.312" class="difflineplus">+depend:: $(OBJDIR)/Makefile $(OBJDIR)/config.status</span>
<a href="#l6.313"></a><span id="l6.313" class="difflineplus">+	$(MOZ_MAKE) export &amp;&amp; $(MOZ_MAKE) depend</span>
<a href="#l6.314"></a><span id="l6.314" class="difflineplus">+</span>
<a href="#l6.315"></a><span id="l6.315" class="difflineplus">+####################################</span>
<a href="#l6.316"></a><span id="l6.316" class="difflineplus">+# Preflight</span>
<a href="#l6.317"></a><span id="l6.317" class="difflineplus">+</span>
<a href="#l6.318"></a><span id="l6.318" class="difflineplus">+build alldep preflight::</span>
<a href="#l6.319"></a><span id="l6.319" class="difflineplus">+ifdef MOZ_PREFLIGHT</span>
<a href="#l6.320"></a><span id="l6.320" class="difflineplus">+	set -e; \</span>
<a href="#l6.321"></a><span id="l6.321" class="difflineplus">+	for mkfile in $(MOZ_PREFLIGHT); do \</span>
<a href="#l6.322"></a><span id="l6.322" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/$$mkfile preflight TOPSRCDIR=$(TOPSRCDIR) OBJDIR=$(OBJDIR) MOZ_OBJDIR=$(MOZ_OBJDIR); \</span>
<a href="#l6.323"></a><span id="l6.323" class="difflineplus">+	done</span>
<a href="#l6.324"></a><span id="l6.324" class="difflineplus">+endif</span>
<a href="#l6.325"></a><span id="l6.325" class="difflineplus">+</span>
<a href="#l6.326"></a><span id="l6.326" class="difflineplus">+####################################</span>
<a href="#l6.327"></a><span id="l6.327" class="difflineplus">+# Build it</span>
<a href="#l6.328"></a><span id="l6.328" class="difflineplus">+</span>
<a href="#l6.329"></a><span id="l6.329" class="difflineplus">+build::  $(OBJDIR)/Makefile $(OBJDIR)/config.status</span>
<a href="#l6.330"></a><span id="l6.330" class="difflineplus">+	$(MOZ_MAKE)</span>
<a href="#l6.331"></a><span id="l6.331" class="difflineplus">+</span>
<a href="#l6.332"></a><span id="l6.332" class="difflineplus">+####################################</span>
<a href="#l6.333"></a><span id="l6.333" class="difflineplus">+# Other targets</span>
<a href="#l6.334"></a><span id="l6.334" class="difflineplus">+</span>
<a href="#l6.335"></a><span id="l6.335" class="difflineplus">+# Pass these target onto the real build system</span>
<a href="#l6.336"></a><span id="l6.336" class="difflineplus">+install export libs clean realclean distclean alldep:: $(OBJDIR)/Makefile $(OBJDIR)/config.status</span>
<a href="#l6.337"></a><span id="l6.337" class="difflineplus">+	$(MOZ_MAKE) $@</span>
<a href="#l6.338"></a><span id="l6.338" class="difflineplus">+</span>
<a href="#l6.339"></a><span id="l6.339" class="difflineplus">+####################################</span>
<a href="#l6.340"></a><span id="l6.340" class="difflineplus">+# Postflight</span>
<a href="#l6.341"></a><span id="l6.341" class="difflineplus">+</span>
<a href="#l6.342"></a><span id="l6.342" class="difflineplus">+build alldep postflight::</span>
<a href="#l6.343"></a><span id="l6.343" class="difflineplus">+ifdef MOZ_POSTFLIGHT</span>
<a href="#l6.344"></a><span id="l6.344" class="difflineplus">+	set -e; \</span>
<a href="#l6.345"></a><span id="l6.345" class="difflineplus">+	for mkfile in $(MOZ_POSTFLIGHT); do \</span>
<a href="#l6.346"></a><span id="l6.346" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/$$mkfile postflight TOPSRCDIR=$(TOPSRCDIR) OBJDIR=$(OBJDIR) MOZ_OBJDIR=$(MOZ_OBJDIR); \</span>
<a href="#l6.347"></a><span id="l6.347" class="difflineplus">+	done</span>
<a href="#l6.348"></a><span id="l6.348" class="difflineplus">+endif</span>
<a href="#l6.349"></a><span id="l6.349" class="difflineplus">+</span>
<a href="#l6.350"></a><span id="l6.350" class="difflineplus">+endif # MOZ_CURRENT_PROJECT</span>
<a href="#l6.351"></a><span id="l6.351" class="difflineplus">+</span>
<a href="#l6.352"></a><span id="l6.352" class="difflineplus">+####################################</span>
<a href="#l6.353"></a><span id="l6.353" class="difflineplus">+# Postflight, after building all projects</span>
<a href="#l6.354"></a><span id="l6.354" class="difflineplus">+</span>
<a href="#l6.355"></a><span id="l6.355" class="difflineplus">+build alldep postflight_all::</span>
<a href="#l6.356"></a><span id="l6.356" class="difflineplus">+ifeq (,$(MOZ_CURRENT_PROJECT)$(if $(MOZ_POSTFLIGHT_ALL),,1))</span>
<a href="#l6.357"></a><span id="l6.357" class="difflineplus">+# Don't run postflight_all for individual projects in multi-project builds</span>
<a href="#l6.358"></a><span id="l6.358" class="difflineplus">+# (when MOZ_CURRENT_PROJECT is set.)</span>
<a href="#l6.359"></a><span id="l6.359" class="difflineplus">+ifndef MOZ_BUILD_PROJECTS</span>
<a href="#l6.360"></a><span id="l6.360" class="difflineplus">+# Building a single project, OBJDIR is usable.</span>
<a href="#l6.361"></a><span id="l6.361" class="difflineplus">+	set -e; \</span>
<a href="#l6.362"></a><span id="l6.362" class="difflineplus">+	for mkfile in $(MOZ_POSTFLIGHT_ALL); do \</span>
<a href="#l6.363"></a><span id="l6.363" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/$$mkfile postflight_all TOPSRCDIR=$(TOPSRCDIR) OBJDIR=$(OBJDIR) MOZ_OBJDIR=$(MOZ_OBJDIR); \</span>
<a href="#l6.364"></a><span id="l6.364" class="difflineplus">+	done</span>
<a href="#l6.365"></a><span id="l6.365" class="difflineplus">+else</span>
<a href="#l6.366"></a><span id="l6.366" class="difflineplus">+# OBJDIR refers to the project-specific OBJDIR, which is not available at</span>
<a href="#l6.367"></a><span id="l6.367" class="difflineplus">+# this point when building multiple projects.  Only MOZ_OBJDIR is available.</span>
<a href="#l6.368"></a><span id="l6.368" class="difflineplus">+	set -e; \</span>
<a href="#l6.369"></a><span id="l6.369" class="difflineplus">+	for mkfile in $(MOZ_POSTFLIGHT_ALL); do \</span>
<a href="#l6.370"></a><span id="l6.370" class="difflineplus">+	  $(MAKE) -f $(TOPSRCDIR)/$$mkfile postflight_all TOPSRCDIR=$(TOPSRCDIR) MOZ_OBJDIR=$(MOZ_OBJDIR) MOZ_BUILD_PROJECTS=&quot;$(MOZ_BUILD_PROJECTS)&quot;; \</span>
<a href="#l6.371"></a><span id="l6.371" class="difflineplus">+	done</span>
<a href="#l6.372"></a><span id="l6.372" class="difflineplus">+endif</span>
<a href="#l6.373"></a><span id="l6.373" class="difflineplus">+endif</span>
<a href="#l6.374"></a><span id="l6.374" class="difflineplus">+</span>
<a href="#l6.375"></a><span id="l6.375" class="difflineplus">+cleansrcdir:</span>
<a href="#l6.376"></a><span id="l6.376" class="difflineplus">+	@cd $(TOPSRCDIR); \</span>
<a href="#l6.377"></a><span id="l6.377" class="difflineplus">+	if [ -f Makefile ]; then \</span>
<a href="#l6.378"></a><span id="l6.378" class="difflineplus">+	  $(MAKE) distclean ; \</span>
<a href="#l6.379"></a><span id="l6.379" class="difflineplus">+	else \</span>
<a href="#l6.380"></a><span id="l6.380" class="difflineplus">+	  echo &quot;Removing object files from srcdir...&quot;; \</span>
<a href="#l6.381"></a><span id="l6.381" class="difflineplus">+	  rm -fr `find . -type d \( -name .deps -print -o -name CVS \</span>
<a href="#l6.382"></a><span id="l6.382" class="difflineplus">+	          -o -exec test ! -d {}/CVS \; \) -prune \</span>
<a href="#l6.383"></a><span id="l6.383" class="difflineplus">+	          -o \( -name '*.[ao]' -o -name '*.so' \) -type f -print`; \</span>
<a href="#l6.384"></a><span id="l6.384" class="difflineplus">+	   build/autoconf/clean-config.sh; \</span>
<a href="#l6.385"></a><span id="l6.385" class="difflineplus">+	fi;</span>
<a href="#l6.386"></a><span id="l6.386" class="difflineplus">+</span>
<a href="#l6.387"></a><span id="l6.387" class="difflineplus">+echo-variable-%:</span>
<a href="#l6.388"></a><span id="l6.388" class="difflineplus">+	@echo $($*)</span>
<a href="#l6.389"></a><span id="l6.389" class="difflineplus">+</span>
<a href="#l6.390"></a><span id="l6.390" class="difflineplus">+.PHONY: checkout real_checkout depend build export libs alldep install clean realclean distclean cleansrcdir pull_all build_all clobber clobber_all pull_and_build_all everything configure preflight_all preflight postflight postflight_all</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/client.py</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,173 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+#!/usr/bin/python</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+CVS_CO_TAG = 'HEAD'</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+EXTENSION_CO_TAG = 'HEAD'</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+LDAPCSDK_CO_TAG = 'LDAPCSDK_6_0_3_CLIENT_BRANCH'</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+CHATZILLA_CO_TAG = 'HEAD'</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+VENKMAN_CO_TAG = 'HEAD'</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+CVS_DIRS = ('calendar',)</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+EXTENSION_DIRS = ('extensions/typeaheadfind',</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+                  'extensions/wallet',</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+                  'extensions/webdav',)</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+LDAPCSDK_DIRS = ('directory/c-sdk',)</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+CHATZILLA_DIRS = ('extensions/irc',)</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+VENKMAN_DIRS = ('extensions/venkman',)</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+# URL of the default hg repository to clone for Mozilla.</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+DEFAULT_MOZILLA_REPO = 'http://hg.mozilla.org/mozilla-central/'</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+import os</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+import sys</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+import datetime</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+from optparse import OptionParser</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+topsrcdir = os.path.dirname(__file__)</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+if topsrcdir == '':</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+    topsrcdir = '.'</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+try:</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+    from subprocess import check_call</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+except ImportError:</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+    import subprocess</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+    def check_call(*popenargs, **kwargs):</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+        retcode = subprocess.call(*popenargs, **kwargs)</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+        if retcode:</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+            cmd = kwargs.get(&quot;args&quot;)</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+            if cmd is None:</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+                cmd = popenargs[0]</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+                raise Exception(&quot;Command '%s' returned non-zero exit status %i&quot; % (cmd, retcode))</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+def check_call_noisy(cmd, *args, **kwargs):</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+    print &quot;Executing command:&quot;, cmd</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+    check_call(cmd, *args, **kwargs)</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+def do_hg_pull(dir, repository, hg):</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+    fulldir = os.path.join(topsrcdir, dir)</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+    # clone if the dir doesn't exist, pull if it does</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+    if not os.path.exists(fulldir):</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+        fulldir = os.path.join(topsrcdir, dir)</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+        check_call_noisy([hg, 'clone', repository, fulldir])</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+    else:</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+        cmd = [hg, 'pull', '-u', '-R', fulldir]</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+        if repository is not None:</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+            cmd.append(repository)</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+        check_call_noisy(cmd)</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+    check_call([hg, 'parent', '-R', fulldir,</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+                '--template=Updated to revision {node}.\n'])</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+def do_cvs_checkout(modules, tag, cvsroot, cvs, checkoutdir):</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+    &quot;&quot;&quot;Check out a CVS directory into the mozilla/ subdirectory.</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+    modules is a list of directories to check out, e.g. ['extensions/irc']</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+    &quot;&quot;&quot;</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+    for module in modules:</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+        (parent, leaf) = os.path.split(module)</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+        print &quot;CVS checkout begin: &quot; + datetime.datetime.utcnow().strftime(&quot;%Y-%m-%d %H:%M:%S UTC&quot;)</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+        check_call_noisy([cvs, '-d', cvsroot, '-q',</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+                          'checkout', '-P', '-r', tag, '-d', leaf,</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+                          'mozilla/%s' % module],</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+                         cwd=os.path.join(topsrcdir, checkoutdir, parent))</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineplus">+        print &quot;CVS checkout end: &quot; + datetime.datetime.utcnow().strftime(&quot;%Y-%m-%d %H:%M:%S UTC&quot;)</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+o = OptionParser(usage=&quot;client.py [options] checkout&quot;)</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+o.add_option(&quot;-m&quot;, &quot;--comm-repo&quot;, dest=&quot;comm_repo&quot;,</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+             default=None,</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+             help=&quot;URL of comm (Calendar/Mail/Suite) repository to pull from (default: use hg default in .hg/hgrc)&quot;)</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+o.add_option(&quot;--skip-comm&quot;, dest=&quot;skip_comm&quot;,</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+             action=&quot;store_true&quot;, default=False,</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineplus">+             help=&quot;Skip pulling the comm (Calendar/Mail/Suite) repository.&quot;)</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineplus">+</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineplus">+o.add_option(&quot;-z&quot;, &quot;--mozilla-repo&quot;, dest=&quot;mozilla_repo&quot;,</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+             default=None,</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+             help=&quot;URL of Mozilla repository to pull from (default: use hg default in mozilla/.hg/hgrc; or if that file doesn't exist, use \&quot;&quot; + DEFAULT_MOZILLA_REPO + &quot;\&quot;.)&quot;)</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+o.add_option(&quot;--skip-mozilla&quot;, dest=&quot;skip_mozilla&quot;,</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+             action=&quot;store_true&quot;, default=False,</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+             help=&quot;Skip pulling the Mozilla repository.&quot;)</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+o.add_option(&quot;--skip-cvs&quot;, dest=&quot;skip_cvs&quot;,</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineplus">+             action=&quot;store_true&quot;, default=False,</span>
<a href="#l7.95"></a><span id="l7.95" class="difflineplus">+             help=&quot;Skip pulling the old directories from the Mozilla CVS repository.&quot;)</span>
<a href="#l7.96"></a><span id="l7.96" class="difflineplus">+o.add_option(&quot;--skip-chatzilla&quot;, dest=&quot;skip_chatzilla&quot;,</span>
<a href="#l7.97"></a><span id="l7.97" class="difflineplus">+             action=&quot;store_true&quot;, default=False,</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineplus">+             help=&quot;Skip pulling the ChatZilla repository.&quot;)</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+o.add_option(&quot;--skip-venkman&quot;, dest=&quot;skip_venkman&quot;,</span>
<a href="#l7.100"></a><span id="l7.100" class="difflineplus">+             action=&quot;store_true&quot;, default=False,</span>
<a href="#l7.101"></a><span id="l7.101" class="difflineplus">+             help=&quot;Skip pulling the Venkman repository.&quot;)</span>
<a href="#l7.102"></a><span id="l7.102" class="difflineplus">+o.add_option(&quot;--skip-calendar&quot;, dest=&quot;skip_calendar&quot;,</span>
<a href="#l7.103"></a><span id="l7.103" class="difflineplus">+             action=&quot;store_true&quot;, default=False,</span>
<a href="#l7.104"></a><span id="l7.104" class="difflineplus">+             help=&quot;Skip pulling the Calendar repository.&quot;)</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineplus">+</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+o.add_option(&quot;--hg&quot;, dest=&quot;hg&quot;, default=os.environ.get('HG', 'hg'),</span>
<a href="#l7.107"></a><span id="l7.107" class="difflineplus">+             help=&quot;The location of the hg binary&quot;)</span>
<a href="#l7.108"></a><span id="l7.108" class="difflineplus">+o.add_option(&quot;--cvs&quot;, dest=&quot;cvs&quot;, default=os.environ.get('CVS', 'cvs'),</span>
<a href="#l7.109"></a><span id="l7.109" class="difflineplus">+             help=&quot;The location of the cvs binary&quot;)</span>
<a href="#l7.110"></a><span id="l7.110" class="difflineplus">+o.add_option(&quot;--cvsroot&quot;, dest=&quot;cvsroot&quot;,</span>
<a href="#l7.111"></a><span id="l7.111" class="difflineplus">+             default=os.environ.get('CVSROOT', ':pserver:anonymous@cvs-mirror.mozilla.org:/cvsroot'),</span>
<a href="#l7.112"></a><span id="l7.112" class="difflineplus">+             help=&quot;The CVSROOT (default: :pserver:anonymous@cvs-mirror.mozilla.org:/cvsroot&quot;)</span>
<a href="#l7.113"></a><span id="l7.113" class="difflineplus">+</span>
<a href="#l7.114"></a><span id="l7.114" class="difflineplus">+</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineplus">+def fixup_repo_options(options):</span>
<a href="#l7.116"></a><span id="l7.116" class="difflineplus">+    &quot;&quot;&quot; Check options.comm_repo and options.mozilla_repo values;</span>
<a href="#l7.117"></a><span id="l7.117" class="difflineplus">+    populate mozilla_repo if needed.</span>
<a href="#l7.118"></a><span id="l7.118" class="difflineplus">+</span>
<a href="#l7.119"></a><span id="l7.119" class="difflineplus">+    options.comm_repo and options.mozilla_repo are normally None.</span>
<a href="#l7.120"></a><span id="l7.120" class="difflineplus">+    This is fine-- our &quot;hg pull&quot; commands will omit the repo URL.</span>
<a href="#l7.121"></a><span id="l7.121" class="difflineplus">+    The exception is the initial checkout, which does an &quot;hg clone&quot;</span>
<a href="#l7.122"></a><span id="l7.122" class="difflineplus">+    for Mozilla.  That command requires a repository URL.</span>
<a href="#l7.123"></a><span id="l7.123" class="difflineplus">+    &quot;&quot;&quot;</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineplus">+</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+    if (options.comm_repo is None</span>
<a href="#l7.126"></a><span id="l7.126" class="difflineplus">+            and not os.path.exists(os.path.join(topsrcdir, '.hg'))):</span>
<a href="#l7.127"></a><span id="l7.127" class="difflineplus">+        o.print_help()</span>
<a href="#l7.128"></a><span id="l7.128" class="difflineplus">+        print</span>
<a href="#l7.129"></a><span id="l7.129" class="difflineplus">+        print &quot;*** The -m option is required for the initial checkout.&quot;</span>
<a href="#l7.130"></a><span id="l7.130" class="difflineplus">+        sys.exit(2)</span>
<a href="#l7.131"></a><span id="l7.131" class="difflineplus">+</span>
<a href="#l7.132"></a><span id="l7.132" class="difflineplus">+    # Handle special case: initial checkout of Mozilla.</span>
<a href="#l7.133"></a><span id="l7.133" class="difflineplus">+    if (options.mozilla_repo is None</span>
<a href="#l7.134"></a><span id="l7.134" class="difflineplus">+            and not os.path.exists(os.path.join(topsrcdir, 'mozilla'))):</span>
<a href="#l7.135"></a><span id="l7.135" class="difflineplus">+        options.mozilla_repo = DEFAULT_MOZILLA_REPO</span>
<a href="#l7.136"></a><span id="l7.136" class="difflineplus">+</span>
<a href="#l7.137"></a><span id="l7.137" class="difflineplus">+try:</span>
<a href="#l7.138"></a><span id="l7.138" class="difflineplus">+    (options, (action,)) = o.parse_args()</span>
<a href="#l7.139"></a><span id="l7.139" class="difflineplus">+except ValueError:</span>
<a href="#l7.140"></a><span id="l7.140" class="difflineplus">+    o.print_help()</span>
<a href="#l7.141"></a><span id="l7.141" class="difflineplus">+    sys.exit(2)</span>
<a href="#l7.142"></a><span id="l7.142" class="difflineplus">+</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineplus">+fixup_repo_options(options)</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineplus">+</span>
<a href="#l7.145"></a><span id="l7.145" class="difflineplus">+if action in ('checkout', 'co'):</span>
<a href="#l7.146"></a><span id="l7.146" class="difflineplus">+    if not options.skip_comm:</span>
<a href="#l7.147"></a><span id="l7.147" class="difflineplus">+        do_hg_pull('.', options.comm_repo, options.hg)</span>
<a href="#l7.148"></a><span id="l7.148" class="difflineplus">+</span>
<a href="#l7.149"></a><span id="l7.149" class="difflineplus">+    if not options.skip_mozilla:</span>
<a href="#l7.150"></a><span id="l7.150" class="difflineplus">+        do_hg_pull('mozilla', options.mozilla_repo, options.hg)</span>
<a href="#l7.151"></a><span id="l7.151" class="difflineplus">+</span>
<a href="#l7.152"></a><span id="l7.152" class="difflineplus">+    if not options.skip_cvs:</span>
<a href="#l7.153"></a><span id="l7.153" class="difflineplus">+        do_cvs_checkout(CVS_DIRS, CVS_CO_TAG, options.cvsroot, options.cvs, '')</span>
<a href="#l7.154"></a><span id="l7.154" class="difflineplus">+        do_cvs_checkout(LDAPCSDK_DIRS, LDAPCSDK_CO_TAG, options.cvsroot, options.cvs, '')</span>
<a href="#l7.155"></a><span id="l7.155" class="difflineplus">+        if os.path.exists(os.path.join(topsrcdir, 'mozilla', 'extensions')):</span>
<a href="#l7.156"></a><span id="l7.156" class="difflineplus">+          do_cvs_checkout(EXTENSION_DIRS, EXTENSION_CO_TAG, options.cvsroot, options.cvs, 'mozilla')</span>
<a href="#l7.157"></a><span id="l7.157" class="difflineplus">+        else:</span>
<a href="#l7.158"></a><span id="l7.158" class="difflineplus">+          print &gt;&gt;sys.stderr, &quot;Warning: mozilla/extensions does not exist, built-in extensions could not be checked out.&quot;</span>
<a href="#l7.159"></a><span id="l7.159" class="difflineplus">+          pass</span>
<a href="#l7.160"></a><span id="l7.160" class="difflineplus">+</span>
<a href="#l7.161"></a><span id="l7.161" class="difflineplus">+    if not options.skip_chatzilla:</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineplus">+        if os.path.exists(os.path.join(topsrcdir, 'mozilla', 'extensions')):</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineplus">+          do_cvs_checkout(CHATZILLA_DIRS, CHATZILLA_CO_TAG, options.cvsroot, options.cvs, 'mozilla')</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineplus">+        else:</span>
<a href="#l7.165"></a><span id="l7.165" class="difflineplus">+          print &gt;&gt;sys.stderr, &quot;Warning: mozilla/extensions does not exist, ChatZilla could not be checked out.&quot;</span>
<a href="#l7.166"></a><span id="l7.166" class="difflineplus">+          pass</span>
<a href="#l7.167"></a><span id="l7.167" class="difflineplus">+</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineplus">+    if not options.skip_venkman:</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+        if os.path.exists(os.path.join(topsrcdir, 'mozilla', 'extensions')):</span>
<a href="#l7.170"></a><span id="l7.170" class="difflineplus">+          do_cvs_checkout(VENKMAN_DIRS, VENKMAN_CO_TAG, options.cvsroot, options.cvs, 'mozilla')</span>
<a href="#l7.171"></a><span id="l7.171" class="difflineplus">+        else:</span>
<a href="#l7.172"></a><span id="l7.172" class="difflineplus">+          print &gt;&gt;sys.stderr, &quot;Warning: mozilla/extensions does not exist, ChatZilla could not be checked out.&quot;</span>
<a href="#l7.173"></a><span id="l7.173" class="difflineplus">+          pass</span>
<a href="#l7.174"></a><span id="l7.174" class="difflineplus">+</span>
<a href="#l7.175"></a><span id="l7.175" class="difflineplus">+else:</span>
<a href="#l7.176"></a><span id="l7.176" class="difflineplus">+    o.print_help()</span>
<a href="#l7.177"></a><span id="l7.177" class="difflineplus">+    sys.exit(2)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/config/autoconf.mk.in</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,614 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+#</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineplus">+#</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+#</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+# License.</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+#</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+# The Original Code is this file as it was released upon August 6, 1998.</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+#</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+# Christopher Seawood.</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+#</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+# Contributor(s):</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+#   Benjamin Smedberg &lt;benjamin@smedbergs.us&gt;</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+#</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+# either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+# or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+#</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+# A netscape style .mk file for autoconf builds</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+INCLUDED_AUTOCONF_MK = 1</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+USE_AUTOCONF 	= 1</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+MOZILLA_CLIENT	= 1</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+COMM_BUILD = @COMM_BUILD@</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+MOZILLA_SRCDIR = @MOZILLA_SRCDIR@</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+MOZILLA_VERSION = @MOZILLA_VERSION@</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+THUNDERBIRD_VERSION	= @THUNDERBIRD_VERSION@</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+SUNBIRD_VERSION = @SUNBIRD_VERSION@</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+SEAMONKEY_VERSION	= @SEAMONKEY_VERSION@</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+MOZ_BUILD_APP = @MOZ_BUILD_APP@</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+MOZ_APP_NAME	= @MOZ_APP_NAME@</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+MOZ_APP_DISPLAYNAME = @MOZ_APP_DISPLAYNAME@</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+MOZ_APP_VERSION = @MOZ_APP_VERSION@</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+MOZ_PKG_SPECIAL = @MOZ_PKG_SPECIAL@</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+prefix		= @prefix@</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+exec_prefix	= @exec_prefix@</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+bindir		= @bindir@</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+includedir	= @includedir@/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+libdir		= @libdir@</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+datadir		= @datadir@</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+mandir		= @mandir@</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+idldir		= $(datadir)/idl/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+installdir	= $(libdir)/$(MOZ_APP_NAME)-$(MOZ_APP_VERSION)</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+sdkdir		= $(libdir)/$(MOZ_APP_NAME)-devel-$(MOZ_APP_VERSION)</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+MOZDEPTH	= $(DEPTH)/mozilla</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+DIST		= $(MOZDEPTH)/dist</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+LIBXUL_SDK      = @LIBXUL_SDK@</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+ifdef LIBXUL_SDK</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+LIBXUL_DIST = $(LIBXUL_SDK)</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+else</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+LIBXUL_DIST = $(DIST)</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+endif</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+XULRUNNER_STUB_NAME = @XULRUNNER_STUB_NAME@</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+MOZ_CHROME_FILE_FORMAT	= @MOZ_CHROME_FILE_FORMAT@</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineplus">+MOZ_WIDGET_TOOLKIT	= @MOZ_WIDGET_TOOLKIT@</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineplus">+MOZ_GFX_TOOLKIT		= @MOZ_GFX_TOOLKIT@</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineplus">+MOZ_X11			= @MOZ_X11@</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineplus">+</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineplus">+MOZ_JS_LIBS		   = @MOZ_JS_LIBS@</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineplus">+</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineplus">+MOZ_DEBUG	= @MOZ_DEBUG@</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineplus">+MOZ_DEBUG_MODULES = @MOZ_DEBUG_MODULES@</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineplus">+MOZ_PROFILE_MODULES = @MOZ_PROFILE_MODULES@</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+MOZ_DEBUG_ENABLE_DEFS		= @MOZ_DEBUG_ENABLE_DEFS@</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+MOZ_DEBUG_DISABLE_DEFS	= @MOZ_DEBUG_DISABLE_DEFS@</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+MOZ_DEBUG_FLAGS	= @MOZ_DEBUG_FLAGS@</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+MOZ_DEBUG_LDFLAGS=@MOZ_DEBUG_LDFLAGS@</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+MOZ_DBGRINFO_MODULES	= @MOZ_DBGRINFO_MODULES@</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineplus">+MOZ_JSDEBUGGER  = @MOZ_JSDEBUGGER@</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineplus">+MOZ_PERF_METRICS = @MOZ_PERF_METRICS@</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineplus">+MOZ_LEAKY	= @MOZ_LEAKY@</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineplus">+MOZ_MEMORY      = @MOZ_MEMORY@</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineplus">+MOZ_JPROF       = @MOZ_JPROF@</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineplus">+MOZ_SHARK       = @MOZ_SHARK@</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineplus">+DEHYDRA_PATH    = @DEHYDRA_PATH@</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineplus">+</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+MOZ_XPCTOOLS    = @MOZ_XPCTOOLS@</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineplus">+ENABLE_EAZEL_PROFILER=@ENABLE_EAZEL_PROFILER@</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineplus">+EAZEL_PROFILER_CFLAGS=@EAZEL_PROFILER_CFLAGS@</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineplus">+EAZEL_PROFILER_LIBS=@EAZEL_PROFILER_LIBS@</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineplus">+GC_LEAK_DETECTOR = @GC_LEAK_DETECTOR@</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineplus">+NS_TRACE_MALLOC = @NS_TRACE_MALLOC@</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineplus">+USE_ELF_DYNSTR_GC = @USE_ELF_DYNSTR_GC@</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineplus">+USE_PREBINDING = @USE_PREBINDING@</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineplus">+INCREMENTAL_LINKER = @INCREMENTAL_LINKER@</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineplus">+MACOSX_DEPLOYMENT_TARGET = @MACOSX_DEPLOYMENT_TARGET@</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineplus">+MOZ_MAIL_NEWS	= @MOZ_MAIL_NEWS@</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineplus">+MOZ_CALENDAR	= @MOZ_CALENDAR@</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineplus">+MOZ_PLAINTEXT_EDITOR_ONLY = @MOZ_PLAINTEXT_EDITOR_ONLY@</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineplus">+MOZ_COMPOSER = @MOZ_COMPOSER@</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineplus">+BUILD_STATIC_LIBS = @BUILD_STATIC_LIBS@</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineplus">+MOZ_ENABLE_LIBXUL = @MOZ_ENABLE_LIBXUL@</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineplus">+ENABLE_TESTS	= @ENABLE_TESTS@</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineplus">+IBMBIDI = @IBMBIDI@</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineplus">+MOZ_UNIVERSALCHARDET = @MOZ_UNIVERSALCHARDET@</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineplus">+SUNCTL = @SUNCTL@</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineplus">+ACCESSIBILITY = @ACCESSIBILITY@</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineplus">+MOZ_VIEW_SOURCE = @MOZ_VIEW_SOURCE@</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineplus">+MOZ_XPINSTALL = @MOZ_XPINSTALL@</span>
<a href="#l8.133"></a><span id="l8.133" class="difflineplus">+MOZ_JSLOADER  = @MOZ_JSLOADER@</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineplus">+MOZ_USE_NATIVE_UCONV = @MOZ_USE_NATIVE_UCONV@</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+MOZ_LDAP_XPCOM = @MOZ_LDAP_XPCOM@</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineplus">+MOZ_LDAP_XPCOM_EXPERIMENTAL = @MOZ_LDAP_XPCOM_EXPERIMENTAL@</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+MOZ_BRANDING_DIRECTORY = @MOZ_BRANDING_DIRECTORY@</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineplus">+XPCOM_USE_LEA = @XPCOM_USE_LEA@</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineplus">+JS_ULTRASPARC_OPTS = @JS_ULTRASPARC_OPTS@</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineplus">+JS_STATIC_BUILD = @JS_STATIC_BUILD@</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineplus">+MOZ_ENABLE_POSTSCRIPT = @MOZ_ENABLE_POSTSCRIPT@</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineplus">+MOZ_INSTALLER	= @MOZ_INSTALLER@</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineplus">+MOZ_UPDATER	= @MOZ_UPDATER@</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineplus">+MOZ_UPDATE_PACKAGING	= @MOZ_UPDATE_PACKAGING@</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineplus">+MOZ_NO_ACTIVEX_SUPPORT = @MOZ_NO_ACTIVEX_SUPPORT@</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineplus">+MOZ_ACTIVEX_SCRIPTING_SUPPORT = @MOZ_ACTIVEX_SCRIPTING_SUPPORT@</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineplus">+MOZ_DISABLE_VISTA_SDK_REQUIREMENTS = @MOZ_DISABLE_VISTA_SDK_REQUIREMENTS@</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineplus">+MOZ_DISABLE_PARENTAL_CONTROLS = @MOZ_DISABLE_PARENTAL_CONTROLS@</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineplus">+XPC_IDISPATCH_SUPPORT = @XPC_IDISPATCH_SUPPORT@</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineplus">+MOZ_SPELLCHECK = @MOZ_SPELLCHECK@</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineplus">+MOZ_XPFE_COMPONENTS = @MOZ_XPFE_COMPONENTS@</span>
<a href="#l8.152"></a><span id="l8.152" class="difflineplus">+MOZ_IPCD = @MOZ_IPCD@</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineplus">+MOZ_PROFILESHARING = @MOZ_PROFILESHARING@</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineplus">+MOZ_PROFILELOCKING = @MOZ_PROFILELOCKING@</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineplus">+MOZ_FEEDS = @MOZ_FEEDS@</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineplus">+MOZ_PLACES = @MOZ_PLACES@</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineplus">+MOZ_PLACES_BOOKMARKS = @MOZ_PLACES_BOOKMARKS@</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineplus">+MOZ_STORAGE = @MOZ_STORAGE@</span>
<a href="#l8.159"></a><span id="l8.159" class="difflineplus">+MOZ_SAFE_BROWSING = @MOZ_SAFE_BROWSING@</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineplus">+MOZ_URL_CLASSIFIER = @MOZ_URL_CLASSIFIER@</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineplus">+MOZ_ZIPWRITER = @MOZ_ZIPWRITER@</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineplus">+MOZ_MORK = @MOZ_MORK@</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineplus">+MOZ_MORKREADER = @MOZ_MORKREADER@</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineplus">+MOZ_NO_XPCOM_OBSOLETE = @MOZ_NO_XPCOM_OBSOLETE@</span>
<a href="#l8.165"></a><span id="l8.165" class="difflineplus">+MOZ_NO_FAST_LOAD = @MOZ_NO_FAST_LOAD@</span>
<a href="#l8.166"></a><span id="l8.166" class="difflineplus">+NS_PRINTING = @NS_PRINTING@</span>
<a href="#l8.167"></a><span id="l8.167" class="difflineplus">+MOZ_CRASHREPORTER = @MOZ_CRASHREPORTER@</span>
<a href="#l8.168"></a><span id="l8.168" class="difflineplus">+MOZ_MOCHITEST = @MOZ_MOCHITEST@</span>
<a href="#l8.169"></a><span id="l8.169" class="difflineplus">+MOZ_HELP_VIEWER = @MOZ_HELP_VIEWER@</span>
<a href="#l8.170"></a><span id="l8.170" class="difflineplus">+</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineplus">+TAR=@TAR@</span>
<a href="#l8.172"></a><span id="l8.172" class="difflineplus">+</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineplus">+# The MOZ_UI_LOCALE var is used to build a particular locale. Do *not*</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineplus">+# use the var to change any binary files. Do *not* use this var unless you</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineplus">+# write rules for the &quot;clean-locale&quot; and &quot;locale&quot; targets.</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineplus">+MOZ_UI_LOCALE = @MOZ_UI_LOCALE@</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineplus">+</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineplus">+MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS = @MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS@</span>
<a href="#l8.179"></a><span id="l8.179" class="difflineplus">+MOZ_COMPONENT_NSPR_LIBS=@MOZ_COMPONENT_NSPR_LIBS@</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineplus">+</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineplus">+MOZ_FIX_LINK_PATHS=@MOZ_FIX_LINK_PATHS@</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineplus">+</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineplus">+XPCOM_FROZEN_LDOPTS=@XPCOM_FROZEN_LDOPTS@</span>
<a href="#l8.184"></a><span id="l8.184" class="difflineplus">+XPCOM_LIBS=@XPCOM_LIBS@</span>
<a href="#l8.185"></a><span id="l8.185" class="difflineplus">+MOZ_TIMELINE=@MOZ_TIMELINE@</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineplus">+</span>
<a href="#l8.187"></a><span id="l8.187" class="difflineplus">+ENABLE_STRIP	= @ENABLE_STRIP@</span>
<a href="#l8.188"></a><span id="l8.188" class="difflineplus">+PKG_SKIP_STRIP	= @PKG_SKIP_STRIP@</span>
<a href="#l8.189"></a><span id="l8.189" class="difflineplus">+</span>
<a href="#l8.190"></a><span id="l8.190" class="difflineplus">+ClientWallet=1</span>
<a href="#l8.191"></a><span id="l8.191" class="difflineplus">+CookieManagement=1</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineplus">+SingleSignon=1</span>
<a href="#l8.193"></a><span id="l8.193" class="difflineplus">+</span>
<a href="#l8.194"></a><span id="l8.194" class="difflineplus">+MOZ_OJI		= @MOZ_OJI@</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineplus">+MOZ_PLUGINS	= @MOZ_PLUGINS@</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineplus">+</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineplus">+MOZ_POST_DSO_LIB_COMMAND = @MOZ_POST_DSO_LIB_COMMAND@</span>
<a href="#l8.198"></a><span id="l8.198" class="difflineplus">+MOZ_POST_PROGRAM_COMMAND = @MOZ_POST_PROGRAM_COMMAND@</span>
<a href="#l8.199"></a><span id="l8.199" class="difflineplus">+</span>
<a href="#l8.200"></a><span id="l8.200" class="difflineplus">+MOZ_BUILD_ROOT             = @MOZ_BUILD_ROOT@</span>
<a href="#l8.201"></a><span id="l8.201" class="difflineplus">+</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineplus">+MOZ_XUL                    = @MOZ_XUL@</span>
<a href="#l8.203"></a><span id="l8.203" class="difflineplus">+MOZ_RDF                    = @MOZ_RDF@</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineplus">+</span>
<a href="#l8.205"></a><span id="l8.205" class="difflineplus">+MOZ_AUTH_EXTENSION = @MOZ_AUTH_EXTENSION@</span>
<a href="#l8.206"></a><span id="l8.206" class="difflineplus">+</span>
<a href="#l8.207"></a><span id="l8.207" class="difflineplus">+MOZ_NATIVE_HUNSPELL = @SYSTEM_HUNSPELL@</span>
<a href="#l8.208"></a><span id="l8.208" class="difflineplus">+MOZ_HUNSPELL_LIBS = @MOZ_HUNSPELL_LIBS@</span>
<a href="#l8.209"></a><span id="l8.209" class="difflineplus">+MOZ_HUNSPELL_CFLAGS = @MOZ_HUNSPELL_CFLAGS@</span>
<a href="#l8.210"></a><span id="l8.210" class="difflineplus">+</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineplus">+MOZ_NATIVE_ZLIB	= @SYSTEM_ZLIB@</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineplus">+MOZ_NATIVE_BZ2	= @SYSTEM_BZ2@</span>
<a href="#l8.213"></a><span id="l8.213" class="difflineplus">+MOZ_NATIVE_JPEG	= @SYSTEM_JPEG@</span>
<a href="#l8.214"></a><span id="l8.214" class="difflineplus">+MOZ_NATIVE_PNG	= @SYSTEM_PNG@</span>
<a href="#l8.215"></a><span id="l8.215" class="difflineplus">+MOZ_TREE_CAIRO = @MOZ_TREE_CAIRO@</span>
<a href="#l8.216"></a><span id="l8.216" class="difflineplus">+</span>
<a href="#l8.217"></a><span id="l8.217" class="difflineplus">+MOZ_UPDATE_XTERM = @MOZ_UPDATE_XTERM@</span>
<a href="#l8.218"></a><span id="l8.218" class="difflineplus">+MOZ_PERMISSIONS = @MOZ_PERMISSIONS@</span>
<a href="#l8.219"></a><span id="l8.219" class="difflineplus">+</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineplus">+MOZ_PREF_EXTENSIONS = @MOZ_PREF_EXTENSIONS@</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineplus">+</span>
<a href="#l8.222"></a><span id="l8.222" class="difflineplus">+MOZ_CAIRO_LIBS = @MOZ_CAIRO_LIBS@</span>
<a href="#l8.223"></a><span id="l8.223" class="difflineplus">+</span>
<a href="#l8.224"></a><span id="l8.224" class="difflineplus">+MOZ_ENABLE_GNOMEUI = @MOZ_ENABLE_GNOMEUI@</span>
<a href="#l8.225"></a><span id="l8.225" class="difflineplus">+MOZ_GNOMEUI_CFLAGS = @MOZ_GNOMEUI_CFLAGS@</span>
<a href="#l8.226"></a><span id="l8.226" class="difflineplus">+MOZ_GNOMEUI_LIBS = @MOZ_GNOMEUI_LIBS@</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineplus">+</span>
<a href="#l8.228"></a><span id="l8.228" class="difflineplus">+MOZ_ENABLE_STARTUP_NOTIFICATION = @MOZ_ENABLE_STARTUP_NOTIFICATION@</span>
<a href="#l8.229"></a><span id="l8.229" class="difflineplus">+MOZ_STARTUP_NOTIFICATION_CFLAGS = @MOZ_STARTUP_NOTIFICATION_CFLAGS@</span>
<a href="#l8.230"></a><span id="l8.230" class="difflineplus">+MOZ_STARTUP_NOTIFICATION_LIBS = @MOZ_STARTUP_NOTIFICATION_LIBS@</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineplus">+</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineplus">+MOZ_GNOMEVFS_CFLAGS = @MOZ_GNOMEVFS_CFLAGS@</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineplus">+MOZ_GNOMEVFS_LIBS = @MOZ_GNOMEVFS_LIBS@</span>
<a href="#l8.234"></a><span id="l8.234" class="difflineplus">+</span>
<a href="#l8.235"></a><span id="l8.235" class="difflineplus">+MOZ_ENABLE_GCONF = @MOZ_ENABLE_GCONF@</span>
<a href="#l8.236"></a><span id="l8.236" class="difflineplus">+MOZ_GCONF_CFLAGS = @MOZ_GCONF_CFLAGS@</span>
<a href="#l8.237"></a><span id="l8.237" class="difflineplus">+MOZ_GCONF_LIBS = @MOZ_GCONF_LIBS@</span>
<a href="#l8.238"></a><span id="l8.238" class="difflineplus">+</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineplus">+MOZ_LIBGNOME_CFLAGS = @MOZ_LIBGNOME_CFLAGS@</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineplus">+MOZ_LIBGNOME_LIBS = @MOZ_LIBGNOME_LIBS@</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineplus">+</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineplus">+MOZ_ENABLE_GNOME_COMPONENT = @MOZ_ENABLE_GNOME_COMPONENT@</span>
<a href="#l8.243"></a><span id="l8.243" class="difflineplus">+</span>
<a href="#l8.244"></a><span id="l8.244" class="difflineplus">+MOZ_INSURE = @MOZ_INSURE@</span>
<a href="#l8.245"></a><span id="l8.245" class="difflineplus">+MOZ_INSURIFYING = @MOZ_INSURIFYING@</span>
<a href="#l8.246"></a><span id="l8.246" class="difflineplus">+MOZ_INSURE_DIRS = @MOZ_INSURE_DIRS@</span>
<a href="#l8.247"></a><span id="l8.247" class="difflineplus">+MOZ_INSURE_EXCLUDE_DIRS = @MOZ_INSURE_EXCLUDE_DIRS@</span>
<a href="#l8.248"></a><span id="l8.248" class="difflineplus">+</span>
<a href="#l8.249"></a><span id="l8.249" class="difflineplus">+MOZ_NATIVE_NSPR = @MOZ_NATIVE_NSPR@</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineplus">+MOZ_NATIVE_NSS = @MOZ_NATIVE_NSS@</span>
<a href="#l8.251"></a><span id="l8.251" class="difflineplus">+</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineplus">+CROSS_COMPILE   = @CROSS_COMPILE@</span>
<a href="#l8.253"></a><span id="l8.253" class="difflineplus">+</span>
<a href="#l8.254"></a><span id="l8.254" class="difflineplus">+OS_CPPFLAGS	= @CPPFLAGS@</span>
<a href="#l8.255"></a><span id="l8.255" class="difflineplus">+OS_CFLAGS	= $(OS_CPPFLAGS) @CFLAGS@</span>
<a href="#l8.256"></a><span id="l8.256" class="difflineplus">+OS_CXXFLAGS	= $(OS_CPPFLAGS) @CXXFLAGS@</span>
<a href="#l8.257"></a><span id="l8.257" class="difflineplus">+OS_LDFLAGS	= @LDFLAGS@</span>
<a href="#l8.258"></a><span id="l8.258" class="difflineplus">+</span>
<a href="#l8.259"></a><span id="l8.259" class="difflineplus">+OS_COMPILE_CFLAGS = $(OS_CPPFLAGS) @COMPILE_CFLAGS@</span>
<a href="#l8.260"></a><span id="l8.260" class="difflineplus">+OS_COMPILE_CXXFLAGS = $(OS_CPPFLAGS) @COMPILE_CXXFLAGS@</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineplus">+</span>
<a href="#l8.262"></a><span id="l8.262" class="difflineplus">+OS_INCLUDES	= $(NSPR_CFLAGS) $(JPEG_CFLAGS) $(PNG_CFLAGS) $(ZLIB_CFLAGS) $(LCMS_CFLAGS)</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineplus">+OS_LIBS		= @LIBS@</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineplus">+ACDEFINES	= @MOZ_DEFINES@</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineplus">+</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineplus">+WARNINGS_AS_ERRORS = @WARNINGS_AS_ERRORS@</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineplus">+</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineplus">+MOZ_OPTIMIZE	= @MOZ_OPTIMIZE@</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+MOZ_OPTIMIZE_FLAGS = @MOZ_OPTIMIZE_FLAGS@</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineplus">+MOZ_OPTIMIZE_LDFLAGS = @MOZ_OPTIMIZE_LDFLAGS@</span>
<a href="#l8.271"></a><span id="l8.271" class="difflineplus">+MOZ_OPTIMIZE_SIZE_TWEAK = @MOZ_OPTIMIZE_SIZE_TWEAK@</span>
<a href="#l8.272"></a><span id="l8.272" class="difflineplus">+</span>
<a href="#l8.273"></a><span id="l8.273" class="difflineplus">+MOZ_RTTI_FLAGS_ON = @_MOZ_RTTI_FLAGS_ON@</span>
<a href="#l8.274"></a><span id="l8.274" class="difflineplus">+</span>
<a href="#l8.275"></a><span id="l8.275" class="difflineplus">+MOZ_PROFILE_GUIDED_OPTIMIZE_DISABLE = @MOZ_PROFILE_GUIDED_OPTIMIZE_DISABLE@</span>
<a href="#l8.276"></a><span id="l8.276" class="difflineplus">+PROFILE_GEN_CFLAGS = @PROFILE_GEN_CFLAGS@</span>
<a href="#l8.277"></a><span id="l8.277" class="difflineplus">+PROFILE_GEN_LDFLAGS = @PROFILE_GEN_LDFLAGS@</span>
<a href="#l8.278"></a><span id="l8.278" class="difflineplus">+PROFILE_USE_CFLAGS = @PROFILE_USE_CFLAGS@</span>
<a href="#l8.279"></a><span id="l8.279" class="difflineplus">+PROFILE_USE_LDFLAGS = @PROFILE_USE_LDFLAGS@</span>
<a href="#l8.280"></a><span id="l8.280" class="difflineplus">+</span>
<a href="#l8.281"></a><span id="l8.281" class="difflineplus">+XCFLAGS		= @XCFLAGS@</span>
<a href="#l8.282"></a><span id="l8.282" class="difflineplus">+XLDFLAGS	= @XLDFLAGS@</span>
<a href="#l8.283"></a><span id="l8.283" class="difflineplus">+XLIBS		= @XLIBS@</span>
<a href="#l8.284"></a><span id="l8.284" class="difflineplus">+</span>
<a href="#l8.285"></a><span id="l8.285" class="difflineplus">+WIN_TOP_SRC	= @WIN_TOP_SRC@</span>
<a href="#l8.286"></a><span id="l8.286" class="difflineplus">+CYGWIN_WRAPPER	= @CYGWIN_WRAPPER@</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineplus">+AS_PERL         = @AS_PERL@</span>
<a href="#l8.288"></a><span id="l8.288" class="difflineplus">+CYGDRIVE_MOUNT	= @CYGDRIVE_MOUNT@</span>
<a href="#l8.289"></a><span id="l8.289" class="difflineplus">+AR		= @AR@</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineplus">+AR_FLAGS	= @AR_FLAGS@</span>
<a href="#l8.291"></a><span id="l8.291" class="difflineplus">+AR_EXTRACT	= @AR_EXTRACT@</span>
<a href="#l8.292"></a><span id="l8.292" class="difflineplus">+AR_LIST		= @AR_LIST@</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineplus">+AR_DELETE	= @AR_DELETE@</span>
<a href="#l8.294"></a><span id="l8.294" class="difflineplus">+AS		= @AS@</span>
<a href="#l8.295"></a><span id="l8.295" class="difflineplus">+ASFLAGS		= @ASFLAGS@</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineplus">+AS_DASH_C_FLAG	= @AS_DASH_C_FLAG@</span>
<a href="#l8.297"></a><span id="l8.297" class="difflineplus">+LD		= @LD@</span>
<a href="#l8.298"></a><span id="l8.298" class="difflineplus">+RC		= @RC@</span>
<a href="#l8.299"></a><span id="l8.299" class="difflineplus">+RCFLAGS		= @RCFLAGS@</span>
<a href="#l8.300"></a><span id="l8.300" class="difflineplus">+WINDRES		= @WINDRES@</span>
<a href="#l8.301"></a><span id="l8.301" class="difflineplus">+USE_SHORT_LIBNAME = @USE_SHORT_LIBNAME@</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineplus">+IMPLIB		= @IMPLIB@</span>
<a href="#l8.303"></a><span id="l8.303" class="difflineplus">+FILTER		= @FILTER@</span>
<a href="#l8.304"></a><span id="l8.304" class="difflineplus">+BIN_FLAGS	= @BIN_FLAGS@</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineplus">+MIDL		= @MIDL@</span>
<a href="#l8.306"></a><span id="l8.306" class="difflineplus">+MIDL_FLAGS	= @MIDL_FLAGS@</span>
<a href="#l8.307"></a><span id="l8.307" class="difflineplus">+_MSC_VER	= @_MSC_VER@</span>
<a href="#l8.308"></a><span id="l8.308" class="difflineplus">+</span>
<a href="#l8.309"></a><span id="l8.309" class="difflineplus">+DLL_PREFIX	= @DLL_PREFIX@</span>
<a href="#l8.310"></a><span id="l8.310" class="difflineplus">+LIB_PREFIX	= @LIB_PREFIX@</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineplus">+OBJ_SUFFIX	= @OBJ_SUFFIX@</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineplus">+LIB_SUFFIX	= @LIB_SUFFIX@</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineplus">+DLL_SUFFIX	= @DLL_SUFFIX@</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineplus">+BIN_SUFFIX	= @BIN_SUFFIX@</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineplus">+ASM_SUFFIX	= @ASM_SUFFIX@</span>
<a href="#l8.316"></a><span id="l8.316" class="difflineplus">+IMPORT_LIB_SUFFIX = @IMPORT_LIB_SUFFIX@</span>
<a href="#l8.317"></a><span id="l8.317" class="difflineplus">+USE_N32		= @USE_N32@</span>
<a href="#l8.318"></a><span id="l8.318" class="difflineplus">+HAVE_64BIT_OS	= @HAVE_64BIT_OS@</span>
<a href="#l8.319"></a><span id="l8.319" class="difflineplus">+</span>
<a href="#l8.320"></a><span id="l8.320" class="difflineplus">+# Temp hack.  It is not my intention to leave this crap in here for ever.</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineplus">+# Im talking to fur right now to solve the problem without introducing </span>
<a href="#l8.322"></a><span id="l8.322" class="difflineplus">+# NS_USE_NATIVE to the build system -ramiro.</span>
<a href="#l8.323"></a><span id="l8.323" class="difflineplus">+NS_USE_NATIVE = @NS_USE_NATIVE@</span>
<a href="#l8.324"></a><span id="l8.324" class="difflineplus">+</span>
<a href="#l8.325"></a><span id="l8.325" class="difflineplus">+CC		    = @CC@</span>
<a href="#l8.326"></a><span id="l8.326" class="difflineplus">+CXX		    = @CXX@</span>
<a href="#l8.327"></a><span id="l8.327" class="difflineplus">+</span>
<a href="#l8.328"></a><span id="l8.328" class="difflineplus">+GNU_AS		= @GNU_AS@</span>
<a href="#l8.329"></a><span id="l8.329" class="difflineplus">+GNU_LD		= @GNU_LD@</span>
<a href="#l8.330"></a><span id="l8.330" class="difflineplus">+GNU_CC		= @GNU_CC@</span>
<a href="#l8.331"></a><span id="l8.331" class="difflineplus">+GNU_CXX		= @GNU_CXX@</span>
<a href="#l8.332"></a><span id="l8.332" class="difflineplus">+HAVE_GCC3_ABI	= @HAVE_GCC3_ABI@</span>
<a href="#l8.333"></a><span id="l8.333" class="difflineplus">+INTEL_CC	= @INTEL_CC@</span>
<a href="#l8.334"></a><span id="l8.334" class="difflineplus">+INTEL_CXX	= @INTEL_CXX@</span>
<a href="#l8.335"></a><span id="l8.335" class="difflineplus">+</span>
<a href="#l8.336"></a><span id="l8.336" class="difflineplus">+HOST_CC		= @HOST_CC@</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineplus">+HOST_CXX	= @HOST_CXX@</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineplus">+HOST_CFLAGS	= @HOST_CFLAGS@</span>
<a href="#l8.339"></a><span id="l8.339" class="difflineplus">+HOST_CXXFLAGS	= @HOST_CXXFLAGS@</span>
<a href="#l8.340"></a><span id="l8.340" class="difflineplus">+HOST_OPTIMIZE_FLAGS = @HOST_OPTIMIZE_FLAGS@</span>
<a href="#l8.341"></a><span id="l8.341" class="difflineplus">+HOST_NSPR_MDCPUCFG = @HOST_NSPR_MDCPUCFG@</span>
<a href="#l8.342"></a><span id="l8.342" class="difflineplus">+HOST_AR		= @HOST_AR@</span>
<a href="#l8.343"></a><span id="l8.343" class="difflineplus">+HOST_AR_FLAGS	= @HOST_AR_FLAGS@</span>
<a href="#l8.344"></a><span id="l8.344" class="difflineplus">+HOST_LD		= @HOST_LD@</span>
<a href="#l8.345"></a><span id="l8.345" class="difflineplus">+HOST_RANLIB	= @HOST_RANLIB@</span>
<a href="#l8.346"></a><span id="l8.346" class="difflineplus">+HOST_BIN_SUFFIX	= @HOST_BIN_SUFFIX@</span>
<a href="#l8.347"></a><span id="l8.347" class="difflineplus">+</span>
<a href="#l8.348"></a><span id="l8.348" class="difflineplus">+HOST_LIBIDL_CONFIG = @HOST_LIBIDL_CONFIG@</span>
<a href="#l8.349"></a><span id="l8.349" class="difflineplus">+HOST_LIBIDL_CFLAGS = @HOST_LIBIDL_CFLAGS@</span>
<a href="#l8.350"></a><span id="l8.350" class="difflineplus">+HOST_LIBIDL_LIBS   = @HOST_LIBIDL_LIBS@</span>
<a href="#l8.351"></a><span id="l8.351" class="difflineplus">+</span>
<a href="#l8.352"></a><span id="l8.352" class="difflineplus">+HOST_OS_ARCH	= @HOST_OS_ARCH@</span>
<a href="#l8.353"></a><span id="l8.353" class="difflineplus">+host_cpu	= @host_cpu@</span>
<a href="#l8.354"></a><span id="l8.354" class="difflineplus">+host_vendor	= @host_vendor@</span>
<a href="#l8.355"></a><span id="l8.355" class="difflineplus">+host_os		= @host_os@</span>
<a href="#l8.356"></a><span id="l8.356" class="difflineplus">+</span>
<a href="#l8.357"></a><span id="l8.357" class="difflineplus">+TARGET_NSPR_MDCPUCFG = @TARGET_NSPR_MDCPUCFG@</span>
<a href="#l8.358"></a><span id="l8.358" class="difflineplus">+TARGET_CPU	= @TARGET_CPU@</span>
<a href="#l8.359"></a><span id="l8.359" class="difflineplus">+TARGET_VENDOR	= @TARGET_VENDOR@</span>
<a href="#l8.360"></a><span id="l8.360" class="difflineplus">+TARGET_OS	= @TARGET_OS@</span>
<a href="#l8.361"></a><span id="l8.361" class="difflineplus">+TARGET_MD_ARCH	= @TARGET_MD_ARCH@</span>
<a href="#l8.362"></a><span id="l8.362" class="difflineplus">+TARGET_XPCOM_ABI = @TARGET_XPCOM_ABI@</span>
<a href="#l8.363"></a><span id="l8.363" class="difflineplus">+</span>
<a href="#l8.364"></a><span id="l8.364" class="difflineplus">+AUTOCONF	= @AUTOCONF@</span>
<a href="#l8.365"></a><span id="l8.365" class="difflineplus">+PERL		= @PERL@</span>
<a href="#l8.366"></a><span id="l8.366" class="difflineplus">+PYTHON		= @PYTHON@</span>
<a href="#l8.367"></a><span id="l8.367" class="difflineplus">+RANLIB		= @RANLIB@</span>
<a href="#l8.368"></a><span id="l8.368" class="difflineplus">+WHOAMI		= @WHOAMI@</span>
<a href="#l8.369"></a><span id="l8.369" class="difflineplus">+UNZIP		= @UNZIP@</span>
<a href="#l8.370"></a><span id="l8.370" class="difflineplus">+ZIP		= @ZIP@</span>
<a href="#l8.371"></a><span id="l8.371" class="difflineplus">+XARGS		= @XARGS@</span>
<a href="#l8.372"></a><span id="l8.372" class="difflineplus">+STRIP		= @STRIP@</span>
<a href="#l8.373"></a><span id="l8.373" class="difflineplus">+DOXYGEN		= @DOXYGEN@</span>
<a href="#l8.374"></a><span id="l8.374" class="difflineplus">+MAKE		= @MAKE@</span>
<a href="#l8.375"></a><span id="l8.375" class="difflineplus">+PBBUILD_BIN	= @PBBUILD@</span>
<a href="#l8.376"></a><span id="l8.376" class="difflineplus">+SDP		= @SDP@</span>
<a href="#l8.377"></a><span id="l8.377" class="difflineplus">+NSINSTALL_BIN	= @NSINSTALL_BIN@</span>
<a href="#l8.378"></a><span id="l8.378" class="difflineplus">+</span>
<a href="#l8.379"></a><span id="l8.379" class="difflineplus">+ifdef MOZ_NATIVE_JPEG</span>
<a href="#l8.380"></a><span id="l8.380" class="difflineplus">+JPEG_CFLAGS	= @JPEG_CFLAGS@</span>
<a href="#l8.381"></a><span id="l8.381" class="difflineplus">+JPEG_LIBS	= @JPEG_LIBS@</span>
<a href="#l8.382"></a><span id="l8.382" class="difflineplus">+JPEG_REQUIRES	=</span>
<a href="#l8.383"></a><span id="l8.383" class="difflineplus">+else</span>
<a href="#l8.384"></a><span id="l8.384" class="difflineplus">+JPEG_CFLAGS	= @MOZ_JPEG_CFLAGS@</span>
<a href="#l8.385"></a><span id="l8.385" class="difflineplus">+JPEG_LIBS	= @MOZ_JPEG_LIBS@</span>
<a href="#l8.386"></a><span id="l8.386" class="difflineplus">+JPEG_REQUIRES	= jpeg</span>
<a href="#l8.387"></a><span id="l8.387" class="difflineplus">+endif</span>
<a href="#l8.388"></a><span id="l8.388" class="difflineplus">+</span>
<a href="#l8.389"></a><span id="l8.389" class="difflineplus">+ifdef MOZ_NATIVE_ZLIB</span>
<a href="#l8.390"></a><span id="l8.390" class="difflineplus">+ZLIB_CFLAGS	= @ZLIB_CFLAGS@</span>
<a href="#l8.391"></a><span id="l8.391" class="difflineplus">+ZLIB_LIBS	= @ZLIB_LIBS@</span>
<a href="#l8.392"></a><span id="l8.392" class="difflineplus">+ZLIB_REQUIRES	=</span>
<a href="#l8.393"></a><span id="l8.393" class="difflineplus">+else</span>
<a href="#l8.394"></a><span id="l8.394" class="difflineplus">+ZLIB_CFLAGS	= @MOZ_ZLIB_CFLAGS@</span>
<a href="#l8.395"></a><span id="l8.395" class="difflineplus">+ifdef MOZ_ENABLE_LIBXUL</span>
<a href="#l8.396"></a><span id="l8.396" class="difflineplus">+MOZ_ZLIB_LIBS = @MOZ_ZLIB_LIBS@</span>
<a href="#l8.397"></a><span id="l8.397" class="difflineplus">+else</span>
<a href="#l8.398"></a><span id="l8.398" class="difflineplus">+ZLIB_LIBS = @MOZ_ZLIB_LIBS@</span>
<a href="#l8.399"></a><span id="l8.399" class="difflineplus">+endif</span>
<a href="#l8.400"></a><span id="l8.400" class="difflineplus">+ZLIB_REQUIRES	= zlib</span>
<a href="#l8.401"></a><span id="l8.401" class="difflineplus">+endif</span>
<a href="#l8.402"></a><span id="l8.402" class="difflineplus">+</span>
<a href="#l8.403"></a><span id="l8.403" class="difflineplus">+ifdef MOZ_NATIVE_BZ2</span>
<a href="#l8.404"></a><span id="l8.404" class="difflineplus">+BZ2_CFLAGS	= @BZ2_CFLAGS@</span>
<a href="#l8.405"></a><span id="l8.405" class="difflineplus">+BZ2_LIBS	= @BZ2_LIBS@</span>
<a href="#l8.406"></a><span id="l8.406" class="difflineplus">+BZ2_REQUIRES	=</span>
<a href="#l8.407"></a><span id="l8.407" class="difflineplus">+else</span>
<a href="#l8.408"></a><span id="l8.408" class="difflineplus">+BZ2_CFLAGS	= @MOZ_BZ2_CFLAGS@</span>
<a href="#l8.409"></a><span id="l8.409" class="difflineplus">+BZ2_LIBS	= @MOZ_BZ2_LIBS@</span>
<a href="#l8.410"></a><span id="l8.410" class="difflineplus">+BZ2_REQUIRES	= libbz2</span>
<a href="#l8.411"></a><span id="l8.411" class="difflineplus">+endif</span>
<a href="#l8.412"></a><span id="l8.412" class="difflineplus">+</span>
<a href="#l8.413"></a><span id="l8.413" class="difflineplus">+ifdef MOZ_NATIVE_PNG</span>
<a href="#l8.414"></a><span id="l8.414" class="difflineplus">+PNG_CFLAGS	= @PNG_CFLAGS@</span>
<a href="#l8.415"></a><span id="l8.415" class="difflineplus">+PNG_LIBS	= @PNG_LIBS@</span>
<a href="#l8.416"></a><span id="l8.416" class="difflineplus">+PNG_REQUIRES	=</span>
<a href="#l8.417"></a><span id="l8.417" class="difflineplus">+else</span>
<a href="#l8.418"></a><span id="l8.418" class="difflineplus">+PNG_CFLAGS	= @MOZ_PNG_CFLAGS@</span>
<a href="#l8.419"></a><span id="l8.419" class="difflineplus">+PNG_LIBS	= @MOZ_PNG_LIBS@</span>
<a href="#l8.420"></a><span id="l8.420" class="difflineplus">+PNG_REQUIRES	= png</span>
<a href="#l8.421"></a><span id="l8.421" class="difflineplus">+endif</span>
<a href="#l8.422"></a><span id="l8.422" class="difflineplus">+</span>
<a href="#l8.423"></a><span id="l8.423" class="difflineplus">+MOZ_NATIVE_LCMS	= @MOZ_NATIVE_LCMS@</span>
<a href="#l8.424"></a><span id="l8.424" class="difflineplus">+LCMS_CFLAGS	= @LCMS_CFLAGS@</span>
<a href="#l8.425"></a><span id="l8.425" class="difflineplus">+LCMS_LIBS	= @LCMS_LIBS@</span>
<a href="#l8.426"></a><span id="l8.426" class="difflineplus">+ifdef MOZ_NATIVE_LCMS</span>
<a href="#l8.427"></a><span id="l8.427" class="difflineplus">+LCMS_REQUIRES	=</span>
<a href="#l8.428"></a><span id="l8.428" class="difflineplus">+else</span>
<a href="#l8.429"></a><span id="l8.429" class="difflineplus">+LCMS_REQUIRES	= lcms</span>
<a href="#l8.430"></a><span id="l8.430" class="difflineplus">+endif</span>
<a href="#l8.431"></a><span id="l8.431" class="difflineplus">+</span>
<a href="#l8.432"></a><span id="l8.432" class="difflineplus">+MOZ_NATIVE_SQLITE = @MOZ_NATIVE_SQLITE@</span>
<a href="#l8.433"></a><span id="l8.433" class="difflineplus">+SQLITE_CFLAGS     = @SQLITE_CFLAGS@</span>
<a href="#l8.434"></a><span id="l8.434" class="difflineplus">+SQLITE_LIBS       = @SQLITE_LIBS@</span>
<a href="#l8.435"></a><span id="l8.435" class="difflineplus">+</span>
<a href="#l8.436"></a><span id="l8.436" class="difflineplus">+NSPR_CONFIG	= @NSPR_CONFIG@</span>
<a href="#l8.437"></a><span id="l8.437" class="difflineplus">+NSPR_CFLAGS	= @NSPR_CFLAGS@</span>
<a href="#l8.438"></a><span id="l8.438" class="difflineplus">+NSPR_LIBS	= @NSPR_LIBS@</span>
<a href="#l8.439"></a><span id="l8.439" class="difflineplus">+</span>
<a href="#l8.440"></a><span id="l8.440" class="difflineplus">+NSS_CONFIG	= @NSS_CONFIG@</span>
<a href="#l8.441"></a><span id="l8.441" class="difflineplus">+NSS_CFLAGS	= @NSS_CFLAGS@</span>
<a href="#l8.442"></a><span id="l8.442" class="difflineplus">+NSS_LIBS	= @NSS_LIBS@</span>
<a href="#l8.443"></a><span id="l8.443" class="difflineplus">+NSS_DEP_LIBS	= @NSS_DEP_LIBS@</span>
<a href="#l8.444"></a><span id="l8.444" class="difflineplus">+</span>
<a href="#l8.445"></a><span id="l8.445" class="difflineplus">+LDAP_CFLAGS	= @LDAP_CFLAGS@</span>
<a href="#l8.446"></a><span id="l8.446" class="difflineplus">+LDAP_LIBS	= @LDAP_LIBS@</span>
<a href="#l8.447"></a><span id="l8.447" class="difflineplus">+XPCOM_GLUE_LDOPTS = @XPCOM_GLUE_LDOPTS@</span>
<a href="#l8.448"></a><span id="l8.448" class="difflineplus">+XPCOM_STANDALONE_GLUE_LDOPTS = @XPCOM_STANDALONE_GLUE_LDOPTS@</span>
<a href="#l8.449"></a><span id="l8.449" class="difflineplus">+MOZ_XPCOM_OBSOLETE_LIBS = @MOZ_XPCOM_OBSOLETE_LIBS@</span>
<a href="#l8.450"></a><span id="l8.450" class="difflineplus">+</span>
<a href="#l8.451"></a><span id="l8.451" class="difflineplus">+USE_DEPENDENT_LIBS = @USE_DEPENDENT_LIBS@</span>
<a href="#l8.452"></a><span id="l8.452" class="difflineplus">+</span>
<a href="#l8.453"></a><span id="l8.453" class="difflineplus">+# UNIX98 iconv support</span>
<a href="#l8.454"></a><span id="l8.454" class="difflineplus">+LIBICONV = @LIBICONV@</span>
<a href="#l8.455"></a><span id="l8.455" class="difflineplus">+</span>
<a href="#l8.456"></a><span id="l8.456" class="difflineplus">+# MKSHLIB_FORCE_ALL is used to force the linker to include all object</span>
<a href="#l8.457"></a><span id="l8.457" class="difflineplus">+# files present in an archive. MKSHLIB_UNFORCE_ALL reverts the linker</span>
<a href="#l8.458"></a><span id="l8.458" class="difflineplus">+# to normal behavior. Makefile's that create shared libraries out of</span>
<a href="#l8.459"></a><span id="l8.459" class="difflineplus">+# archives use these flags to force in all of the .o files in the</span>
<a href="#l8.460"></a><span id="l8.460" class="difflineplus">+# archives into the shared library.</span>
<a href="#l8.461"></a><span id="l8.461" class="difflineplus">+WRAP_MALLOC_LIB         = @WRAP_MALLOC_LIB@</span>
<a href="#l8.462"></a><span id="l8.462" class="difflineplus">+WRAP_MALLOC_CFLAGS      = @WRAP_MALLOC_CFLAGS@</span>
<a href="#l8.463"></a><span id="l8.463" class="difflineplus">+DSO_CFLAGS              = @DSO_CFLAGS@</span>
<a href="#l8.464"></a><span id="l8.464" class="difflineplus">+DSO_PIC_CFLAGS          = @DSO_PIC_CFLAGS@</span>
<a href="#l8.465"></a><span id="l8.465" class="difflineplus">+MKSHLIB                 = @MKSHLIB@</span>
<a href="#l8.466"></a><span id="l8.466" class="difflineplus">+MKCSHLIB                = @MKCSHLIB@</span>
<a href="#l8.467"></a><span id="l8.467" class="difflineplus">+MKSHLIB_FORCE_ALL       = @MKSHLIB_FORCE_ALL@</span>
<a href="#l8.468"></a><span id="l8.468" class="difflineplus">+MKSHLIB_UNFORCE_ALL     = @MKSHLIB_UNFORCE_ALL@</span>
<a href="#l8.469"></a><span id="l8.469" class="difflineplus">+DSO_LDOPTS              = @DSO_LDOPTS@</span>
<a href="#l8.470"></a><span id="l8.470" class="difflineplus">+DLL_SUFFIX              = @DLL_SUFFIX@</span>
<a href="#l8.471"></a><span id="l8.471" class="difflineplus">+</span>
<a href="#l8.472"></a><span id="l8.472" class="difflineplus">+NO_LD_ARCHIVE_FLAGS     = @NO_LD_ARCHIVE_FLAGS@</span>
<a href="#l8.473"></a><span id="l8.473" class="difflineplus">+</span>
<a href="#l8.474"></a><span id="l8.474" class="difflineplus">+GTK_CONFIG	= @GTK_CONFIG@</span>
<a href="#l8.475"></a><span id="l8.475" class="difflineplus">+TK_CFLAGS	= @TK_CFLAGS@</span>
<a href="#l8.476"></a><span id="l8.476" class="difflineplus">+TK_LIBS		= @TK_LIBS@</span>
<a href="#l8.477"></a><span id="l8.477" class="difflineplus">+</span>
<a href="#l8.478"></a><span id="l8.478" class="difflineplus">+MOZ_TOOLKIT_REGISTRY_CFLAGS = \</span>
<a href="#l8.479"></a><span id="l8.479" class="difflineplus">+	$(TK_CFLAGS)</span>
<a href="#l8.480"></a><span id="l8.480" class="difflineplus">+</span>
<a href="#l8.481"></a><span id="l8.481" class="difflineplus">+CAIRO_FT_CFLAGS		= @CAIRO_FT_CFLAGS@</span>
<a href="#l8.482"></a><span id="l8.482" class="difflineplus">+</span>
<a href="#l8.483"></a><span id="l8.483" class="difflineplus">+MOZ_ENABLE_CAIRO_FT	= @MOZ_ENABLE_CAIRO_FT@</span>
<a href="#l8.484"></a><span id="l8.484" class="difflineplus">+MOZ_ENABLE_GLITZ        = @MOZ_ENABLE_GLITZ@</span>
<a href="#l8.485"></a><span id="l8.485" class="difflineplus">+MOZ_ENABLE_GTK2		= @MOZ_ENABLE_GTK2@</span>
<a href="#l8.486"></a><span id="l8.486" class="difflineplus">+MOZ_ENABLE_PHOTON	= @MOZ_ENABLE_PHOTON@</span>
<a href="#l8.487"></a><span id="l8.487" class="difflineplus">+MOZ_ENABLE_COCOA	= @MOZ_ENABLE_COCOA@</span>
<a href="#l8.488"></a><span id="l8.488" class="difflineplus">+MOZ_ENABLE_XREMOTE	= @MOZ_ENABLE_XREMOTE@</span>
<a href="#l8.489"></a><span id="l8.489" class="difflineplus">+</span>
<a href="#l8.490"></a><span id="l8.490" class="difflineplus">+MOZ_GTK2_CFLAGS		= @MOZ_GTK2_CFLAGS@</span>
<a href="#l8.491"></a><span id="l8.491" class="difflineplus">+MOZ_GTK2_LIBS		= @MOZ_GTK2_LIBS@</span>
<a href="#l8.492"></a><span id="l8.492" class="difflineplus">+</span>
<a href="#l8.493"></a><span id="l8.493" class="difflineplus">+MOZ_DBUS_GLIB_CFLAGS    = @MOZ_DBUS_GLIB_CFLAGS@</span>
<a href="#l8.494"></a><span id="l8.494" class="difflineplus">+MOZ_DBUS_GLIB_LIBS      = @MOZ_DBUS_GLIB_LIBS@</span>
<a href="#l8.495"></a><span id="l8.495" class="difflineplus">+MOZ_ENABLE_DBUS         = @MOZ_ENABLE_DBUS@</span>
<a href="#l8.496"></a><span id="l8.496" class="difflineplus">+</span>
<a href="#l8.497"></a><span id="l8.497" class="difflineplus">+MOZ_GTHREAD_CFLAGS      = @MOZ_GTHREAD_CFLAGS@</span>
<a href="#l8.498"></a><span id="l8.498" class="difflineplus">+MOZ_GTHREAD_LIBS        = @MOZ_GTHREAD_LIBS@</span>
<a href="#l8.499"></a><span id="l8.499" class="difflineplus">+</span>
<a href="#l8.500"></a><span id="l8.500" class="difflineplus">+FT2_CFLAGS             = @FT2_CFLAGS@</span>
<a href="#l8.501"></a><span id="l8.501" class="difflineplus">+FT2_LIBS               = @FT2_LIBS@</span>
<a href="#l8.502"></a><span id="l8.502" class="difflineplus">+</span>
<a href="#l8.503"></a><span id="l8.503" class="difflineplus">+MOZ_XFT_CFLAGS		= @MOZ_XFT_CFLAGS@</span>
<a href="#l8.504"></a><span id="l8.504" class="difflineplus">+MOZ_XFT_LIBS		= @MOZ_XFT_LIBS@</span>
<a href="#l8.505"></a><span id="l8.505" class="difflineplus">+MOZ_PANGO_CFLAGS        = @MOZ_PANGO_CFLAGS@</span>
<a href="#l8.506"></a><span id="l8.506" class="difflineplus">+MOZ_PANGO_LIBS          = @MOZ_PANGO_LIBS@</span>
<a href="#l8.507"></a><span id="l8.507" class="difflineplus">+</span>
<a href="#l8.508"></a><span id="l8.508" class="difflineplus">+MOZ_XIE_LIBS		= @MOZ_XIE_LIBS@</span>
<a href="#l8.509"></a><span id="l8.509" class="difflineplus">+XT_LIBS			= @XT_LIBS@</span>
<a href="#l8.510"></a><span id="l8.510" class="difflineplus">+</span>
<a href="#l8.511"></a><span id="l8.511" class="difflineplus">+GLIB_CFLAGS	= @GLIB_CFLAGS@</span>
<a href="#l8.512"></a><span id="l8.512" class="difflineplus">+GLIB_LIBS	= @GLIB_LIBS@</span>
<a href="#l8.513"></a><span id="l8.513" class="difflineplus">+GLIB_GMODULE_LIBS	= @GLIB_GMODULE_LIBS@</span>
<a href="#l8.514"></a><span id="l8.514" class="difflineplus">+LIBIDL_CFLAGS = @LIBIDL_CFLAGS@</span>
<a href="#l8.515"></a><span id="l8.515" class="difflineplus">+LIBIDL_LIBS = @LIBIDL_LIBS@</span>
<a href="#l8.516"></a><span id="l8.516" class="difflineplus">+STATIC_LIBIDL = @STATIC_LIBIDL@</span>
<a href="#l8.517"></a><span id="l8.517" class="difflineplus">+</span>
<a href="#l8.518"></a><span id="l8.518" class="difflineplus">+MOZ_NATIVE_MAKEDEPEND	= @SYSTEM_MAKEDEPEND@</span>
<a href="#l8.519"></a><span id="l8.519" class="difflineplus">+</span>
<a href="#l8.520"></a><span id="l8.520" class="difflineplus">+# Used for LD_LIBRARY_PATH</span>
<a href="#l8.521"></a><span id="l8.521" class="difflineplus">+LIBS_PATH       = @LIBS_PATH@</span>
<a href="#l8.522"></a><span id="l8.522" class="difflineplus">+</span>
<a href="#l8.523"></a><span id="l8.523" class="difflineplus">+MOZ_AUTO_DEPS	= @MOZ_AUTO_DEPS@</span>
<a href="#l8.524"></a><span id="l8.524" class="difflineplus">+COMPILER_DEPEND = @COMPILER_DEPEND@</span>
<a href="#l8.525"></a><span id="l8.525" class="difflineplus">+MDDEPDIR        := @MDDEPDIR@</span>
<a href="#l8.526"></a><span id="l8.526" class="difflineplus">+</span>
<a href="#l8.527"></a><span id="l8.527" class="difflineplus">+MOZ_DEMANGLE_SYMBOLS = @MOZ_DEMANGLE_SYMBOLS@</span>
<a href="#l8.528"></a><span id="l8.528" class="difflineplus">+</span>
<a href="#l8.529"></a><span id="l8.529" class="difflineplus">+# XXX - these need to be cleaned up and have real checks added -cls</span>
<a href="#l8.530"></a><span id="l8.530" class="difflineplus">+CM_BLDTYPE=dbg</span>
<a href="#l8.531"></a><span id="l8.531" class="difflineplus">+AWT_11=1</span>
<a href="#l8.532"></a><span id="l8.532" class="difflineplus">+MOZ_BITS=32</span>
<a href="#l8.533"></a><span id="l8.533" class="difflineplus">+OS_TARGET=@OS_TARGET@</span>
<a href="#l8.534"></a><span id="l8.534" class="difflineplus">+OS_ARCH=@OS_ARCH@</span>
<a href="#l8.535"></a><span id="l8.535" class="difflineplus">+OS_RELEASE=@OS_RELEASE@</span>
<a href="#l8.536"></a><span id="l8.536" class="difflineplus">+OS_TEST=@OS_TEST@</span>
<a href="#l8.537"></a><span id="l8.537" class="difflineplus">+</span>
<a href="#l8.538"></a><span id="l8.538" class="difflineplus">+TARGET_DEVICE = @TARGET_DEVICE@</span>
<a href="#l8.539"></a><span id="l8.539" class="difflineplus">+</span>
<a href="#l8.540"></a><span id="l8.540" class="difflineplus">+# For AIX build</span>
<a href="#l8.541"></a><span id="l8.541" class="difflineplus">+AIX_OBJMODEL = @AIX_OBJMODEL@</span>
<a href="#l8.542"></a><span id="l8.542" class="difflineplus">+</span>
<a href="#l8.543"></a><span id="l8.543" class="difflineplus">+# For OS/2 build</span>
<a href="#l8.544"></a><span id="l8.544" class="difflineplus">+MOZ_OS2_TOOLS = @MOZ_OS2_TOOLS@</span>
<a href="#l8.545"></a><span id="l8.545" class="difflineplus">+MOZ_OS2_USE_DECLSPEC = @MOZ_OS2_USE_DECLSPEC@</span>
<a href="#l8.546"></a><span id="l8.546" class="difflineplus">+MOZ_OS2_HIGH_MEMORY = @MOZ_OS2_HIGH_MEMORY@</span>
<a href="#l8.547"></a><span id="l8.547" class="difflineplus">+</span>
<a href="#l8.548"></a><span id="l8.548" class="difflineplus">+HAVE_XIE=@HAVE_XIE@</span>
<a href="#l8.549"></a><span id="l8.549" class="difflineplus">+</span>
<a href="#l8.550"></a><span id="l8.550" class="difflineplus">+MOZ_MOVEMAIL=@MOZ_MOVEMAIL@</span>
<a href="#l8.551"></a><span id="l8.551" class="difflineplus">+MOZ_PSM=@MOZ_PSM@</span>
<a href="#l8.552"></a><span id="l8.552" class="difflineplus">+</span>
<a href="#l8.553"></a><span id="l8.553" class="difflineplus">+# Gssapi (krb5) libraries and headers for the Negotiate auth method</span>
<a href="#l8.554"></a><span id="l8.554" class="difflineplus">+GSSAPI_INCLUDES = @GSSAPI_INCLUDES@</span>
<a href="#l8.555"></a><span id="l8.555" class="difflineplus">+USE_GSSAPI	= @USE_GSSAPI@</span>
<a href="#l8.556"></a><span id="l8.556" class="difflineplus">+</span>
<a href="#l8.557"></a><span id="l8.557" class="difflineplus">+MOZILLA_OFFICIAL = @MOZILLA_OFFICIAL@</span>
<a href="#l8.558"></a><span id="l8.558" class="difflineplus">+BUILD_OFFICIAL = @BUILD_OFFICIAL@</span>
<a href="#l8.559"></a><span id="l8.559" class="difflineplus">+MOZ_MILESTONE_RELEASE = @MOZ_MILESTONE_RELEASE@</span>
<a href="#l8.560"></a><span id="l8.560" class="difflineplus">+</span>
<a href="#l8.561"></a><span id="l8.561" class="difflineplus">+# Win32 options</span>
<a href="#l8.562"></a><span id="l8.562" class="difflineplus">+MOZ_PROFILE	= @MOZ_PROFILE@</span>
<a href="#l8.563"></a><span id="l8.563" class="difflineplus">+MOZ_BROWSE_INFO	= @MOZ_BROWSE_INFO@</span>
<a href="#l8.564"></a><span id="l8.564" class="difflineplus">+MOZ_TOOLS_DIR	= @MOZ_TOOLS_DIR@</span>
<a href="#l8.565"></a><span id="l8.565" class="difflineplus">+MOZ_DEBUG_SYMBOLS = @MOZ_DEBUG_SYMBOLS@</span>
<a href="#l8.566"></a><span id="l8.566" class="difflineplus">+MOZ_QUANTIFY	= @MOZ_QUANTIFY@</span>
<a href="#l8.567"></a><span id="l8.567" class="difflineplus">+MSMANIFEST_TOOL = @MSMANIFEST_TOOL@</span>
<a href="#l8.568"></a><span id="l8.568" class="difflineplus">+WIN32_REDIST_DIR = @WIN32_REDIST_DIR@</span>
<a href="#l8.569"></a><span id="l8.569" class="difflineplus">+WIN32_CRT_SRC_DIR = @WIN32_CRT_SRC_DIR@</span>
<a href="#l8.570"></a><span id="l8.570" class="difflineplus">+WIN32_CUSTOM_CRT_DIR = @WIN32_CUSTOM_CRT_DIR@</span>
<a href="#l8.571"></a><span id="l8.571" class="difflineplus">+# These are for custom CRT building</span>
<a href="#l8.572"></a><span id="l8.572" class="difflineplus">+ifdef MOZ_MEMORY</span>
<a href="#l8.573"></a><span id="l8.573" class="difflineplus">+ifneq (,$(WIN32_CRT_SRC_DIR)$(WIN32_CUSTOM_CRT_DIR))</span>
<a href="#l8.574"></a><span id="l8.574" class="difflineplus">+export LIB = @MOZ_LIB@</span>
<a href="#l8.575"></a><span id="l8.575" class="difflineplus">+export PATH = @MOZ_PATH@</span>
<a href="#l8.576"></a><span id="l8.576" class="difflineplus">+DLLFLAGS = @DLLFLAGS@</span>
<a href="#l8.577"></a><span id="l8.577" class="difflineplus">+endif</span>
<a href="#l8.578"></a><span id="l8.578" class="difflineplus">+endif</span>
<a href="#l8.579"></a><span id="l8.579" class="difflineplus">+</span>
<a href="#l8.580"></a><span id="l8.580" class="difflineplus">+# python options.</span>
<a href="#l8.581"></a><span id="l8.581" class="difflineplus">+MOZ_PYTHON_EXTENSIONS = @MOZ_PYTHON_EXTENSIONS@</span>
<a href="#l8.582"></a><span id="l8.582" class="difflineplus">+MOZ_PYTHON = @MOZ_PYTHON@</span>
<a href="#l8.583"></a><span id="l8.583" class="difflineplus">+MOZ_PYTHON_PREFIX = @MOZ_PYTHON_PREFIX@</span>
<a href="#l8.584"></a><span id="l8.584" class="difflineplus">+MOZ_PYTHON_INCLUDES = @MOZ_PYTHON_INCLUDES@</span>
<a href="#l8.585"></a><span id="l8.585" class="difflineplus">+MOZ_PYTHON_LIBS = @MOZ_PYTHON_LIBS@</span>
<a href="#l8.586"></a><span id="l8.586" class="difflineplus">+MOZ_PYTHON_DEBUG_SUFFIX = @MOZ_PYTHON_DEBUG_SUFFIX@</span>
<a href="#l8.587"></a><span id="l8.587" class="difflineplus">+MOZ_PYTHON_DLL_SUFFIX = @MOZ_PYTHON_DLL_SUFFIX@</span>
<a href="#l8.588"></a><span id="l8.588" class="difflineplus">+MOZ_PYTHON_VER_DOTTED = @MOZ_PYTHON_VER_DOTTED@</span>
<a href="#l8.589"></a><span id="l8.589" class="difflineplus">+MOZ_PYTHON_VER = @MOZ_PYTHON_VER@</span>
<a href="#l8.590"></a><span id="l8.590" class="difflineplus">+</span>
<a href="#l8.591"></a><span id="l8.591" class="difflineplus">+# Codesighs tools option, enables win32 mapfiles.</span>
<a href="#l8.592"></a><span id="l8.592" class="difflineplus">+MOZ_MAPINFO	= @MOZ_MAPINFO@</span>
<a href="#l8.593"></a><span id="l8.593" class="difflineplus">+</span>
<a href="#l8.594"></a><span id="l8.594" class="difflineplus">+MOZ_XUL_APP	= @MOZ_XUL_APP@</span>
<a href="#l8.595"></a><span id="l8.595" class="difflineplus">+MOZ_THUNDERBIRD = @MOZ_THUNDERBIRD@</span>
<a href="#l8.596"></a><span id="l8.596" class="difflineplus">+MOZ_STATIC_MAIL_BUILD = @MOZ_STATIC_MAIL_BUILD@</span>
<a href="#l8.597"></a><span id="l8.597" class="difflineplus">+MOZ_SUNBIRD	= @MOZ_SUNBIRD@</span>
<a href="#l8.598"></a><span id="l8.598" class="difflineplus">+MOZ_SUITE	= @MOZ_SUITE@</span>
<a href="#l8.599"></a><span id="l8.599" class="difflineplus">+WINCE		= @WINCE@</span>
<a href="#l8.600"></a><span id="l8.600" class="difflineplus">+</span>
<a href="#l8.601"></a><span id="l8.601" class="difflineplus">+MOZ_DISTRIBUTION_ID = @MOZ_DISTRIBUTION_ID@</span>
<a href="#l8.602"></a><span id="l8.602" class="difflineplus">+</span>
<a href="#l8.603"></a><span id="l8.603" class="difflineplus">+MACOS_SDK_DIR	= @MACOS_SDK_DIR@</span>
<a href="#l8.604"></a><span id="l8.604" class="difflineplus">+NEXT_ROOT	= @NEXT_ROOT@</span>
<a href="#l8.605"></a><span id="l8.605" class="difflineplus">+GCC_VERSION	= @GCC_VERSION@</span>
<a href="#l8.606"></a><span id="l8.606" class="difflineplus">+XCODEBUILD_VERSION= @XCODEBUILD_VERSION@</span>
<a href="#l8.607"></a><span id="l8.607" class="difflineplus">+HAS_XCODE_2_1	= @HAS_XCODE_2_1@</span>
<a href="#l8.608"></a><span id="l8.608" class="difflineplus">+UNIVERSAL_BINARY= @UNIVERSAL_BINARY@</span>
<a href="#l8.609"></a><span id="l8.609" class="difflineplus">+HAVE_DTRACE= @HAVE_DTRACE@</span>
<a href="#l8.610"></a><span id="l8.610" class="difflineplus">+</span>
<a href="#l8.611"></a><span id="l8.611" class="difflineplus">+VISIBILITY_FLAGS = @VISIBILITY_FLAGS@</span>
<a href="#l8.612"></a><span id="l8.612" class="difflineplus">+WRAP_SYSTEM_INCLUDES = @WRAP_SYSTEM_INCLUDES@</span>
<a href="#l8.613"></a><span id="l8.613" class="difflineplus">+</span>
<a href="#l8.614"></a><span id="l8.614" class="difflineplus">+MOZ_V1_STRING_ABI = @MOZ_V1_STRING_ABI@</span>
<a href="#l8.615"></a><span id="l8.615" class="difflineplus">+</span>
<a href="#l8.616"></a><span id="l8.616" class="difflineplus">+MOZ_EMBEDDING_LEVEL_DEFAULT = @MOZ_EMBEDDING_LEVEL_DEFAULT@</span>
<a href="#l8.617"></a><span id="l8.617" class="difflineplus">+MOZ_EMBEDDING_LEVEL_BASIC = @MOZ_EMBEDDING_LEVEL_BASIC@</span>
<a href="#l8.618"></a><span id="l8.618" class="difflineplus">+MOZ_EMBEDDING_LEVEL_MINIMAL = @MOZ_EMBEDDING_LEVEL_MINIMAL@</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">new file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- /dev/null</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ b/config/config.mk</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -0,0 +1,890 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineplus">+#</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineplus">+#</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+#</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+# License.</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+#</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+#</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+# Netscape Communications Corporation.</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+#</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+# Contributor(s):</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+#   Benjamin Smedberg &lt;benjamin@smedbergs.us&gt;</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+#</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+# either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+# or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineplus">+#</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineplus">+#</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineplus">+# config.mk</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineplus">+#</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineplus">+# Determines the platform and builds the macros needed to load the</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineplus">+# appropriate platform-specific .mk file, then defines all (most?)</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineplus">+# of the generic macros.</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineplus">+#</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineplus">+</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+# Define an include-at-most-once flag</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineplus">+INCLUDED_CONFIG_MK = 1</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineplus">+</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineplus">+EXIT_ON_ERROR = set -e; # Shell loops continue past errors without this.</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineplus">+</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineplus">+ifndef topsrcdir</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineplus">+topsrcdir	= $(DEPTH)</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineplus">+endif</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineplus">+</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineplus">+ifndef INCLUDED_AUTOCONF_MK</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineplus">+include $(DEPTH)/config/autoconf.mk</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineplus">+endif</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineplus">+ifndef INCLUDED_INSURE_MK</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineplus">+ifdef MOZ_INSURIFYING</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineplus">+include $(MOZILLA_SRCDIR)/config/insure.mk</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineplus">+endif</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineplus">+endif</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineplus">+</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineplus">+COMMA = ,</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineplus">+</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineplus">+# Sanity check some variables</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineplus">+CHECK_VARS := \</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineplus">+ XPI_NAME \</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineplus">+ LIBRARY_NAME \</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineplus">+ MODULE \</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineplus">+ DEPTH \</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineplus">+ SHORT_LIBNAME \</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineplus">+ XPI_PKGNAME \</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineplus">+ INSTALL_EXTENSION_ID \</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineplus">+ $(NULL)</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineplus">+</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineplus">+# checks for internal spaces or trailing spaces in the variable</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineplus">+# named by $x</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineplus">+check-variable = $(if $(filter-out 0 1,$(words $($(x))z)),$(error Spaces are not allowed in $(x)))</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineplus">+</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineplus">+$(foreach x,$(CHECK_VARS),$(check-variable))</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineplus">+</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineplus">+# FINAL_TARGET specifies the location into which we copy end-user-shipped</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineplus">+# build products (typelibs, components, chrome).</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineplus">+#</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineplus">+# It will usually be the well-loved $(DIST)/bin, today, but can also be an</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineplus">+# XPI-contents staging directory for ambitious and right-thinking extensions.</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineplus">+FINAL_TARGET = $(if $(XPI_NAME),$(DIST)/xpi-stage/$(XPI_NAME),$(DIST)/bin)</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineplus">+</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineplus">+# MAKE_JARS_TARGET is a staging area for make-jars.pl.  When packaging in</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineplus">+# the jar format, make-jars leaves behind a directory structure that's not</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineplus">+# needed in $(FINAL_TARGET).  For both, flat, and symlink, the directory</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineplus">+# structure contains the chrome, so leave it in $(FINAL_TARGET).</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineplus">+ifeq (jar,$(MOZ_CHROME_FILE_FORMAT))</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineplus">+MAKE_JARS_TARGET = $(if $(XPI_NAME),$(FINAL_TARGET).stage,$(DIST)/chrome-stage)</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineplus">+else</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineplus">+MAKE_JARS_TARGET = $(FINAL_TARGET)</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineplus">+endif</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineplus">+</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineplus">+#</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineplus">+# The VERSION_NUMBER is suffixed onto the end of the DLLs we ship.</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineplus">+# Since the longest of these is 5 characters without the suffix,</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineplus">+# be sure to not set VERSION_NUMBER to anything longer than 3 </span>
<a href="#l9.109"></a><span id="l9.109" class="difflineplus">+# characters for Win16's sake.</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineplus">+#</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineplus">+VERSION_NUMBER		= 50</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineplus">+</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineplus">+ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineplus">+win_srcdir      := $(subst $(topsrcdir),$(WIN_TOP_SRC),$(srcdir))</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineplus">+BUILD_TOOLS     = $(WIN_TOP_SRC)/mozilla/build/unix</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineplus">+else</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineplus">+win_srcdir      := $(srcdir)</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineplus">+BUILD_TOOLS     = $(MOZILLA_SRCDIR)/build/unix</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineplus">+endif</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineplus">+</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineplus">+CONFIG_TOOLS	= $(MOZ_BUILD_ROOT)/mozilla/config</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineplus">+AUTOCONF_TOOLS	= $(MOZILLA_SRCDIR)/build/autoconf</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineplus">+</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineplus">+ifeq ($(OS_ARCH),QNX)</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineplus">+ifeq ($(OS_TARGET),NTO)</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineplus">+LD		:= qcc -Vgcc_ntox86 -nostdlib</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineplus">+else</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineplus">+LD		:= $(CC)</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineplus">+endif</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineplus">+endif</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineplus">+ifeq ($(OS_ARCH),BeOS)</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineplus">+BEOS_ADDON_WORKAROUND	= 1</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineplus">+endif</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineplus">+</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineplus">+#</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineplus">+# Strip off the excessively long version numbers on these platforms,</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineplus">+# but save the version to allow multiple versions of the same base</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineplus">+# platform to be built in the same tree.</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineplus">+#</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineplus">+ifneq (,$(filter FreeBSD HP-UX IRIX Linux NetBSD OpenBSD OSF1 SunOS,$(OS_ARCH)))</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineplus">+OS_RELEASE	:= $(basename $(OS_RELEASE))</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineplus">+</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineplus">+# Allow the user to ignore the OS_VERSION, which is usually irrelevant.</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineplus">+ifdef WANT_MOZILLA_CONFIG_OS_VERSION</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineplus">+OS_VERS		:= $(suffix $(OS_RELEASE))</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineplus">+OS_VERSION	:= $(shell echo $(OS_VERS) | sed 's/-.*//')</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineplus">+endif</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineplus">+</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineplus">+endif</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineplus">+</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineplus">+OS_CONFIG	:= $(OS_ARCH)$(OS_RELEASE)</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineplus">+</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineplus">+FINAL_LINK_LIBS = $(MOZDEPTH)/config/final-link-libs</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineplus">+FINAL_LINK_COMPS = $(MOZDEPTH)/config/final-link-comps</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineplus">+FINAL_LINK_COMP_NAMES = $(MOZDEPTH)/config/final-link-comp-names</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineplus">+</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineplus">+MOZ_UNICHARUTIL_LIBS = $(LIBXUL_DIST)/lib/$(LIB_PREFIX)unicharutil_s.$(LIB_SUFFIX)</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineplus">+MOZ_WIDGET_SUPPORT_LIBS    = $(DIST)/lib/$(LIB_PREFIX)widgetsupport_s.$(LIB_SUFFIX)</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineplus">+</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineplus">+# determine debug-related options</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineplus">+_DEBUG_CFLAGS :=</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineplus">+_DEBUG_LDFLAGS :=</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineplus">+</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineplus">+ifndef MOZ_DEBUG</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineplus">+  # global debugging is disabled </span>
<a href="#l9.166"></a><span id="l9.166" class="difflineplus">+  # check if it was explicitly enabled for this module</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineplus">+  ifneq (, $(findstring $(MODULE), $(MOZ_DEBUG_MODULES)))</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineplus">+    MOZ_DEBUG:=1</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineplus">+  endif</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineplus">+else</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineplus">+  # global debugging is enabled</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineplus">+  # check if it was explicitly disabled for this module</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineplus">+  ifneq (, $(findstring ^$(MODULE), $(MOZ_DEBUG_MODULES)))</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineplus">+    MOZ_DEBUG:=</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineplus">+  endif</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineplus">+endif</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineplus">+</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineplus">+  _DEBUG_CFLAGS += $(MOZ_DEBUG_ENABLE_DEFS)</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineplus">+  XULPPFLAGS += $(MOZ_DEBUG_ENABLE_DEFS)</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineplus">+else</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineplus">+  _DEBUG_CFLAGS += $(MOZ_DEBUG_DISABLE_DEFS)</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineplus">+  XULPPFLAGS += $(MOZ_DEBUG_DISABLE_DEFS)</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineplus">+endif</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineplus">+</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineplus">+# determine if -g should be passed to the compiler, based on</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineplus">+# the current module, and the value of MOZ_DBGRINFO_MODULES</span>
<a href="#l9.188"></a><span id="l9.188" class="difflineplus">+</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineplus">+  MOZ_DBGRINFO_MODULES += ALL_MODULES</span>
<a href="#l9.191"></a><span id="l9.191" class="difflineplus">+  pattern := ALL_MODULES ^ALL_MODULES</span>
<a href="#l9.192"></a><span id="l9.192" class="difflineplus">+else</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineplus">+  MOZ_DBGRINFO_MODULES += ^ALL_MODULES</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineplus">+  pattern := ALL_MODULES ^ALL_MODULES</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineplus">+endif</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineplus">+</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineplus">+ifdef MODULE</span>
<a href="#l9.198"></a><span id="l9.198" class="difflineplus">+  # our current Makefile specifies a module name - add it to our pattern</span>
<a href="#l9.199"></a><span id="l9.199" class="difflineplus">+  pattern += $(MODULE) ^$(MODULE)</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineplus">+endif</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineplus">+</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineplus">+# start by finding the first relevant module name </span>
<a href="#l9.203"></a><span id="l9.203" class="difflineplus">+# (remember that the order of the module names in MOZ_DBGRINFO_MODULES </span>
<a href="#l9.204"></a><span id="l9.204" class="difflineplus">+# is reversed from the order the user specified to configure - </span>
<a href="#l9.205"></a><span id="l9.205" class="difflineplus">+# this allows the user to put general names at the beginning</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineplus">+# of the list, and to override them with explicit module names later </span>
<a href="#l9.207"></a><span id="l9.207" class="difflineplus">+# in the list)</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineplus">+</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineplus">+first_match:=$(firstword $(filter $(pattern), $(MOZ_DBGRINFO_MODULES)))</span>
<a href="#l9.210"></a><span id="l9.210" class="difflineplus">+</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineplus">+ifeq ($(first_match), $(MODULE))</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineplus">+  # the user specified explicitly that </span>
<a href="#l9.213"></a><span id="l9.213" class="difflineplus">+  # this module should be compiled with -g</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineplus">+  _DEBUG_CFLAGS += $(MOZ_DEBUG_FLAGS)</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineplus">+  _DEBUG_LDFLAGS += $(MOZ_DEBUG_LDFLAGS)</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineplus">+else</span>
<a href="#l9.217"></a><span id="l9.217" class="difflineplus">+  ifeq ($(first_match), ^$(MODULE))</span>
<a href="#l9.218"></a><span id="l9.218" class="difflineplus">+    # the user specified explicitly that this module </span>
<a href="#l9.219"></a><span id="l9.219" class="difflineplus">+    # should not be compiled with -g (nothing to do)</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineplus">+  else</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineplus">+    ifeq ($(first_match), ALL_MODULES)</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineplus">+      # the user didn't mention this module explicitly, </span>
<a href="#l9.223"></a><span id="l9.223" class="difflineplus">+      # but wanted all modules to be compiled with -g</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineplus">+      _DEBUG_CFLAGS += $(MOZ_DEBUG_FLAGS)</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineplus">+      _DEBUG_LDFLAGS += $(MOZ_DEBUG_LDFLAGS)      </span>
<a href="#l9.226"></a><span id="l9.226" class="difflineplus">+    else</span>
<a href="#l9.227"></a><span id="l9.227" class="difflineplus">+      ifeq ($(first_match), ^ALL_MODULES)</span>
<a href="#l9.228"></a><span id="l9.228" class="difflineplus">+        # the user didn't mention this module explicitly, </span>
<a href="#l9.229"></a><span id="l9.229" class="difflineplus">+        # but wanted all modules to be compiled without -g (nothing to do)</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineplus">+      endif</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineplus">+    endif</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineplus">+  endif</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineplus">+endif</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineplus">+</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineplus">+</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineplus">+# append debug flags </span>
<a href="#l9.237"></a><span id="l9.237" class="difflineplus">+# (these might have been above when processing MOZ_DBGRINFO_MODULES)</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineplus">+OS_CFLAGS += $(_DEBUG_CFLAGS)</span>
<a href="#l9.239"></a><span id="l9.239" class="difflineplus">+OS_CXXFLAGS += $(_DEBUG_CFLAGS)</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineplus">+OS_LDFLAGS += $(_DEBUG_LDFLAGS)</span>
<a href="#l9.241"></a><span id="l9.241" class="difflineplus">+</span>
<a href="#l9.242"></a><span id="l9.242" class="difflineplus">+# MOZ_PROFILE equivs for win32</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineplus">+ifeq ($(OS_ARCH)_$(GNU_CC),WINNT_)</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l9.245"></a><span id="l9.245" class="difflineplus">+ifneq (,$(MOZ_BROWSE_INFO)$(MOZ_BSCFILE))</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineplus">+OS_CFLAGS += -FR</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineplus">+OS_CXXFLAGS += -FR</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineplus">+endif</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineplus">+else # ! MOZ_DEBUG</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineplus">+</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineplus">+# MOZ_DEBUG_SYMBOLS generates debug symbols in separate PDB files.</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineplus">+# Used for generating an optimized build with debugging symbols.</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineplus">+# Used in the Windows nightlies to generate symbols for crash reporting.</span>
<a href="#l9.254"></a><span id="l9.254" class="difflineplus">+ifdef MOZ_DEBUG_SYMBOLS</span>
<a href="#l9.255"></a><span id="l9.255" class="difflineplus">+OS_CXXFLAGS += -Zi -UDEBUG -DNDEBUG</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineplus">+OS_CFLAGS += -Zi -UDEBUG -DNDEBUG</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineplus">+OS_LDFLAGS += -DEBUG -OPT:REF -OPT:nowin98</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineplus">+endif</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineplus">+</span>
<a href="#l9.260"></a><span id="l9.260" class="difflineplus">+ifdef MOZ_QUANTIFY</span>
<a href="#l9.261"></a><span id="l9.261" class="difflineplus">+# -FIXED:NO is needed for Quantify to work, but it increases the size</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineplus">+# of executables, so only use it if building for Quantify.</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineplus">+WIN32_EXE_LDFLAGS += -FIXED:NO</span>
<a href="#l9.264"></a><span id="l9.264" class="difflineplus">+</span>
<a href="#l9.265"></a><span id="l9.265" class="difflineplus">+# We need -OPT:NOICF to prevent identical methods from being merged together.</span>
<a href="#l9.266"></a><span id="l9.266" class="difflineplus">+# Otherwise, Quantify doesn't know which method was actually called when it's</span>
<a href="#l9.267"></a><span id="l9.267" class="difflineplus">+# showing you the profile.</span>
<a href="#l9.268"></a><span id="l9.268" class="difflineplus">+OS_LDFLAGS += -OPT:NOICF</span>
<a href="#l9.269"></a><span id="l9.269" class="difflineplus">+endif</span>
<a href="#l9.270"></a><span id="l9.270" class="difflineplus">+</span>
<a href="#l9.271"></a><span id="l9.271" class="difflineplus">+#</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineplus">+# Handle trace-malloc in optimized builds.</span>
<a href="#l9.273"></a><span id="l9.273" class="difflineplus">+# No opt to give sane callstacks.</span>
<a href="#l9.274"></a><span id="l9.274" class="difflineplus">+#</span>
<a href="#l9.275"></a><span id="l9.275" class="difflineplus">+ifdef NS_TRACE_MALLOC</span>
<a href="#l9.276"></a><span id="l9.276" class="difflineplus">+MOZ_OPTIMIZE_FLAGS=-Zi -Od -UDEBUG -DNDEBUG</span>
<a href="#l9.277"></a><span id="l9.277" class="difflineplus">+OS_LDFLAGS = -DEBUG -PDB:NONE -OPT:REF -OPT:nowin98</span>
<a href="#l9.278"></a><span id="l9.278" class="difflineplus">+endif # NS_TRACE_MALLOC</span>
<a href="#l9.279"></a><span id="l9.279" class="difflineplus">+</span>
<a href="#l9.280"></a><span id="l9.280" class="difflineplus">+endif # MOZ_DEBUG</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineplus">+endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineplus">+</span>
<a href="#l9.283"></a><span id="l9.283" class="difflineplus">+#</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineplus">+# Build using PIC by default</span>
<a href="#l9.285"></a><span id="l9.285" class="difflineplus">+# Do not use PIC if not building a shared lib (see exceptions below)</span>
<a href="#l9.286"></a><span id="l9.286" class="difflineplus">+#</span>
<a href="#l9.287"></a><span id="l9.287" class="difflineplus">+</span>
<a href="#l9.288"></a><span id="l9.288" class="difflineplus">+ifndef BUILD_STATIC_LIBS</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineplus">+_ENABLE_PIC=1</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineplus">+endif</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineplus">+ifneq (,$(FORCE_SHARED_LIB)$(FORCE_USE_PIC))</span>
<a href="#l9.292"></a><span id="l9.292" class="difflineplus">+_ENABLE_PIC=1</span>
<a href="#l9.293"></a><span id="l9.293" class="difflineplus">+endif</span>
<a href="#l9.294"></a><span id="l9.294" class="difflineplus">+</span>
<a href="#l9.295"></a><span id="l9.295" class="difflineplus">+# In Firefox, all components are linked into either libxul or the static</span>
<a href="#l9.296"></a><span id="l9.296" class="difflineplus">+# meta-component, and should be compiled with PIC.</span>
<a href="#l9.297"></a><span id="l9.297" class="difflineplus">+ifdef MOZ_META_COMPONENT</span>
<a href="#l9.298"></a><span id="l9.298" class="difflineplus">+_ENABLE_PIC=1</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineplus">+endif</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineplus">+</span>
<a href="#l9.301"></a><span id="l9.301" class="difflineplus">+# If module is going to be merged into the nsStaticModule, </span>
<a href="#l9.302"></a><span id="l9.302" class="difflineplus">+# make sure that the entry points are translated and </span>
<a href="#l9.303"></a><span id="l9.303" class="difflineplus">+# the module is built static.</span>
<a href="#l9.304"></a><span id="l9.304" class="difflineplus">+</span>
<a href="#l9.305"></a><span id="l9.305" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l9.306"></a><span id="l9.306" class="difflineplus">+ifdef EXPORT_LIBRARY</span>
<a href="#l9.307"></a><span id="l9.307" class="difflineplus">+ifneq (,$(BUILD_STATIC_LIBS))</span>
<a href="#l9.308"></a><span id="l9.308" class="difflineplus">+ifdef MODULE_NAME</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineplus">+DEFINES += -DXPCOM_TRANSLATE_NSGM_ENTRY_POINT=1</span>
<a href="#l9.310"></a><span id="l9.310" class="difflineplus">+FORCE_STATIC_LIB=1</span>
<a href="#l9.311"></a><span id="l9.311" class="difflineplus">+endif</span>
<a href="#l9.312"></a><span id="l9.312" class="difflineplus">+endif</span>
<a href="#l9.313"></a><span id="l9.313" class="difflineplus">+endif</span>
<a href="#l9.314"></a><span id="l9.314" class="difflineplus">+endif</span>
<a href="#l9.315"></a><span id="l9.315" class="difflineplus">+</span>
<a href="#l9.316"></a><span id="l9.316" class="difflineplus">+# Determine if module being compiled is destined </span>
<a href="#l9.317"></a><span id="l9.317" class="difflineplus">+# to be merged into libxul</span>
<a href="#l9.318"></a><span id="l9.318" class="difflineplus">+</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineplus">+ifdef MOZ_ENABLE_LIBXUL</span>
<a href="#l9.320"></a><span id="l9.320" class="difflineplus">+ifdef LIBXUL_LIBRARY</span>
<a href="#l9.321"></a><span id="l9.321" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l9.322"></a><span id="l9.322" class="difflineplus">+ifdef MODULE_NAME</span>
<a href="#l9.323"></a><span id="l9.323" class="difflineplus">+DEFINES += -DXPCOM_TRANSLATE_NSGM_ENTRY_POINT=1</span>
<a href="#l9.324"></a><span id="l9.324" class="difflineplus">+else</span>
<a href="#l9.325"></a><span id="l9.325" class="difflineplus">+$(error Component makefile does not specify MODULE_NAME.)</span>
<a href="#l9.326"></a><span id="l9.326" class="difflineplus">+endif</span>
<a href="#l9.327"></a><span id="l9.327" class="difflineplus">+endif</span>
<a href="#l9.328"></a><span id="l9.328" class="difflineplus">+FORCE_STATIC_LIB=1</span>
<a href="#l9.329"></a><span id="l9.329" class="difflineplus">+_ENABLE_PIC=1</span>
<a href="#l9.330"></a><span id="l9.330" class="difflineplus">+SHORT_LIBNAME=</span>
<a href="#l9.331"></a><span id="l9.331" class="difflineplus">+endif</span>
<a href="#l9.332"></a><span id="l9.332" class="difflineplus">+endif</span>
<a href="#l9.333"></a><span id="l9.333" class="difflineplus">+</span>
<a href="#l9.334"></a><span id="l9.334" class="difflineplus">+# If we are building this component into an extension/xulapp, it cannot be</span>
<a href="#l9.335"></a><span id="l9.335" class="difflineplus">+# statically linked. In the future we may want to add a xulapp meta-component</span>
<a href="#l9.336"></a><span id="l9.336" class="difflineplus">+# build option.</span>
<a href="#l9.337"></a><span id="l9.337" class="difflineplus">+</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineplus">+ifdef XPI_NAME</span>
<a href="#l9.339"></a><span id="l9.339" class="difflineplus">+_ENABLE_PIC=1</span>
<a href="#l9.340"></a><span id="l9.340" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l9.341"></a><span id="l9.341" class="difflineplus">+EXPORT_LIBRARY=</span>
<a href="#l9.342"></a><span id="l9.342" class="difflineplus">+FORCE_STATIC_LIB=</span>
<a href="#l9.343"></a><span id="l9.343" class="difflineplus">+FORCE_SHARED_LIB=1</span>
<a href="#l9.344"></a><span id="l9.344" class="difflineplus">+endif</span>
<a href="#l9.345"></a><span id="l9.345" class="difflineplus">+endif</span>
<a href="#l9.346"></a><span id="l9.346" class="difflineplus">+</span>
<a href="#l9.347"></a><span id="l9.347" class="difflineplus">+#</span>
<a href="#l9.348"></a><span id="l9.348" class="difflineplus">+# Disable PIC if necessary</span>
<a href="#l9.349"></a><span id="l9.349" class="difflineplus">+#</span>
<a href="#l9.350"></a><span id="l9.350" class="difflineplus">+</span>
<a href="#l9.351"></a><span id="l9.351" class="difflineplus">+ifndef _ENABLE_PIC</span>
<a href="#l9.352"></a><span id="l9.352" class="difflineplus">+DSO_CFLAGS=</span>
<a href="#l9.353"></a><span id="l9.353" class="difflineplus">+ifeq ($(OS_ARCH)_$(HAVE_GCC3_ABI),Darwin_1)</span>
<a href="#l9.354"></a><span id="l9.354" class="difflineplus">+DSO_PIC_CFLAGS=-mdynamic-no-pic</span>
<a href="#l9.355"></a><span id="l9.355" class="difflineplus">+else</span>
<a href="#l9.356"></a><span id="l9.356" class="difflineplus">+DSO_PIC_CFLAGS=</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineplus">+endif</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineplus">+endif</span>
<a href="#l9.359"></a><span id="l9.359" class="difflineplus">+</span>
<a href="#l9.360"></a><span id="l9.360" class="difflineplus">+# This comes from configure</span>
<a href="#l9.361"></a><span id="l9.361" class="difflineplus">+ifdef MOZ_PROFILE_GUIDED_OPTIMIZE_DISABLE</span>
<a href="#l9.362"></a><span id="l9.362" class="difflineplus">+NO_PROFILE_GUIDED_OPTIMIZE = 1</span>
<a href="#l9.363"></a><span id="l9.363" class="difflineplus">+endif</span>
<a href="#l9.364"></a><span id="l9.364" class="difflineplus">+</span>
<a href="#l9.365"></a><span id="l9.365" class="difflineplus">+# Enable profile-based feedback</span>
<a href="#l9.366"></a><span id="l9.366" class="difflineplus">+ifndef NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l9.367"></a><span id="l9.367" class="difflineplus">+ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l9.368"></a><span id="l9.368" class="difflineplus">+# No sense in profiling tools</span>
<a href="#l9.369"></a><span id="l9.369" class="difflineplus">+ifndef INTERNAL_TOOLS</span>
<a href="#l9.370"></a><span id="l9.370" class="difflineplus">+OS_CFLAGS += $(PROFILE_GEN_CFLAGS)</span>
<a href="#l9.371"></a><span id="l9.371" class="difflineplus">+OS_CXXFLAGS += $(PROFILE_GEN_CFLAGS)</span>
<a href="#l9.372"></a><span id="l9.372" class="difflineplus">+OS_LDFLAGS += $(PROFILE_GEN_LDFLAGS)</span>
<a href="#l9.373"></a><span id="l9.373" class="difflineplus">+ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l9.374"></a><span id="l9.374" class="difflineplus">+AR_FLAGS += -LTCG</span>
<a href="#l9.375"></a><span id="l9.375" class="difflineplus">+endif</span>
<a href="#l9.376"></a><span id="l9.376" class="difflineplus">+endif # INTERNAL_TOOLS</span>
<a href="#l9.377"></a><span id="l9.377" class="difflineplus">+endif # MOZ_PROFILE_GENERATE</span>
<a href="#l9.378"></a><span id="l9.378" class="difflineplus">+</span>
<a href="#l9.379"></a><span id="l9.379" class="difflineplus">+ifdef MOZ_PROFILE_USE</span>
<a href="#l9.380"></a><span id="l9.380" class="difflineplus">+ifndef INTERNAL_TOOLS</span>
<a href="#l9.381"></a><span id="l9.381" class="difflineplus">+OS_CFLAGS += $(PROFILE_USE_CFLAGS)</span>
<a href="#l9.382"></a><span id="l9.382" class="difflineplus">+OS_CXXFLAGS += $(PROFILE_USE_CFLAGS)</span>
<a href="#l9.383"></a><span id="l9.383" class="difflineplus">+OS_LDFLAGS += $(PROFILE_USE_LDFLAGS)</span>
<a href="#l9.384"></a><span id="l9.384" class="difflineplus">+ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l9.385"></a><span id="l9.385" class="difflineplus">+AR_FLAGS += -LTCG</span>
<a href="#l9.386"></a><span id="l9.386" class="difflineplus">+endif</span>
<a href="#l9.387"></a><span id="l9.387" class="difflineplus">+endif # INTERNAL_TOOLS</span>
<a href="#l9.388"></a><span id="l9.388" class="difflineplus">+endif # MOZ_PROFILE_USE</span>
<a href="#l9.389"></a><span id="l9.389" class="difflineplus">+endif # NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l9.390"></a><span id="l9.390" class="difflineplus">+</span>
<a href="#l9.391"></a><span id="l9.391" class="difflineplus">+</span>
<a href="#l9.392"></a><span id="l9.392" class="difflineplus">+# Does the makefile specifies the internal XPCOM API linkage?</span>
<a href="#l9.393"></a><span id="l9.393" class="difflineplus">+ifneq (,$(MOZILLA_INTERNAL_API)$(LIBXUL_LIBRARY))</span>
<a href="#l9.394"></a><span id="l9.394" class="difflineplus">+DEFINES += -DMOZILLA_INTERNAL_API</span>
<a href="#l9.395"></a><span id="l9.395" class="difflineplus">+endif</span>
<a href="#l9.396"></a><span id="l9.396" class="difflineplus">+</span>
<a href="#l9.397"></a><span id="l9.397" class="difflineplus">+# Force XPCOM/widget/gfx methods to be _declspec(dllexport) when we're</span>
<a href="#l9.398"></a><span id="l9.398" class="difflineplus">+# building libxul libraries</span>
<a href="#l9.399"></a><span id="l9.399" class="difflineplus">+ifdef MOZ_ENABLE_LIBXUL</span>
<a href="#l9.400"></a><span id="l9.400" class="difflineplus">+ifdef LIBXUL_LIBRARY</span>
<a href="#l9.401"></a><span id="l9.401" class="difflineplus">+DEFINES += \</span>
<a href="#l9.402"></a><span id="l9.402" class="difflineplus">+		-D_IMPL_NS_COM \</span>
<a href="#l9.403"></a><span id="l9.403" class="difflineplus">+		-DEXPORT_XPT_API \</span>
<a href="#l9.404"></a><span id="l9.404" class="difflineplus">+		-DEXPORT_XPTC_API \</span>
<a href="#l9.405"></a><span id="l9.405" class="difflineplus">+		-D_IMPL_NS_COM_OBSOLETE \</span>
<a href="#l9.406"></a><span id="l9.406" class="difflineplus">+		-D_IMPL_NS_GFX \</span>
<a href="#l9.407"></a><span id="l9.407" class="difflineplus">+		-D_IMPL_NS_WIDGET \</span>
<a href="#l9.408"></a><span id="l9.408" class="difflineplus">+		-DIMPL_XREAPI \</span>
<a href="#l9.409"></a><span id="l9.409" class="difflineplus">+		-DIMPL_NS_NET \</span>
<a href="#l9.410"></a><span id="l9.410" class="difflineplus">+		-DIMPL_THEBES \</span>
<a href="#l9.411"></a><span id="l9.411" class="difflineplus">+		$(NULL)</span>
<a href="#l9.412"></a><span id="l9.412" class="difflineplus">+</span>
<a href="#l9.413"></a><span id="l9.413" class="difflineplus">+ifndef MOZ_NATIVE_ZLIB</span>
<a href="#l9.414"></a><span id="l9.414" class="difflineplus">+DEFINES += -DZLIB_INTERNAL</span>
<a href="#l9.415"></a><span id="l9.415" class="difflineplus">+endif</span>
<a href="#l9.416"></a><span id="l9.416" class="difflineplus">+endif</span>
<a href="#l9.417"></a><span id="l9.417" class="difflineplus">+endif</span>
<a href="#l9.418"></a><span id="l9.418" class="difflineplus">+</span>
<a href="#l9.419"></a><span id="l9.419" class="difflineplus">+# Force _all_ exported methods to be |_declspec(dllexport)| when we're</span>
<a href="#l9.420"></a><span id="l9.420" class="difflineplus">+# building them into the executable.</span>
<a href="#l9.421"></a><span id="l9.421" class="difflineplus">+</span>
<a href="#l9.422"></a><span id="l9.422" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE OS2, $(OS_ARCH)))</span>
<a href="#l9.423"></a><span id="l9.423" class="difflineplus">+ifdef BUILD_STATIC_LIBS</span>
<a href="#l9.424"></a><span id="l9.424" class="difflineplus">+DEFINES += \</span>
<a href="#l9.425"></a><span id="l9.425" class="difflineplus">+        -D_IMPL_NS_GFX \</span>
<a href="#l9.426"></a><span id="l9.426" class="difflineplus">+        -D_IMPL_NS_MSG_BASE \</span>
<a href="#l9.427"></a><span id="l9.427" class="difflineplus">+        -D_IMPL_NS_WIDGET \</span>
<a href="#l9.428"></a><span id="l9.428" class="difflineplus">+        $(NULL)</span>
<a href="#l9.429"></a><span id="l9.429" class="difflineplus">+endif</span>
<a href="#l9.430"></a><span id="l9.430" class="difflineplus">+endif</span>
<a href="#l9.431"></a><span id="l9.431" class="difflineplus">+</span>
<a href="#l9.432"></a><span id="l9.432" class="difflineplus">+# Flags passed to make-jars.pl</span>
<a href="#l9.433"></a><span id="l9.433" class="difflineplus">+</span>
<a href="#l9.434"></a><span id="l9.434" class="difflineplus">+MAKE_JARS_FLAGS = \</span>
<a href="#l9.435"></a><span id="l9.435" class="difflineplus">+	-s $(srcdir) -t $(topsrcdir) -z $(ZIP) -p $(MOZILLA_DIR)/config/preprocessor.pl \</span>
<a href="#l9.436"></a><span id="l9.436" class="difflineplus">+	-f $(MOZ_CHROME_FILE_FORMAT) \</span>
<a href="#l9.437"></a><span id="l9.437" class="difflineplus">+	$(NULL)</span>
<a href="#l9.438"></a><span id="l9.438" class="difflineplus">+</span>
<a href="#l9.439"></a><span id="l9.439" class="difflineplus">+ifdef NO_JAR_AUTO_REG</span>
<a href="#l9.440"></a><span id="l9.440" class="difflineplus">+MAKE_JARS_FLAGS += -a</span>
<a href="#l9.441"></a><span id="l9.441" class="difflineplus">+endif</span>
<a href="#l9.442"></a><span id="l9.442" class="difflineplus">+</span>
<a href="#l9.443"></a><span id="l9.443" class="difflineplus">+ifdef USE_EXTENSION_MANIFEST</span>
<a href="#l9.444"></a><span id="l9.444" class="difflineplus">+MAKE_JARS_FLAGS += -e</span>
<a href="#l9.445"></a><span id="l9.445" class="difflineplus">+endif</span>
<a href="#l9.446"></a><span id="l9.446" class="difflineplus">+</span>
<a href="#l9.447"></a><span id="l9.447" class="difflineplus">+ifeq ($(OS_TARGET),WIN95)</span>
<a href="#l9.448"></a><span id="l9.448" class="difflineplus">+MAKE_JARS_FLAGS += -l</span>
<a href="#l9.449"></a><span id="l9.449" class="difflineplus">+endif</span>
<a href="#l9.450"></a><span id="l9.450" class="difflineplus">+</span>
<a href="#l9.451"></a><span id="l9.451" class="difflineplus">+ifneq (,$(filter gtk2,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l9.452"></a><span id="l9.452" class="difflineplus">+MAKE_JARS_FLAGS += -x</span>
<a href="#l9.453"></a><span id="l9.453" class="difflineplus">+endif</span>
<a href="#l9.454"></a><span id="l9.454" class="difflineplus">+</span>
<a href="#l9.455"></a><span id="l9.455" class="difflineplus">+ifdef CROSS_COMPILE</span>
<a href="#l9.456"></a><span id="l9.456" class="difflineplus">+MAKE_JARS_FLAGS += -o $(OS_ARCH)</span>
<a href="#l9.457"></a><span id="l9.457" class="difflineplus">+endif</span>
<a href="#l9.458"></a><span id="l9.458" class="difflineplus">+</span>
<a href="#l9.459"></a><span id="l9.459" class="difflineplus">+TAR_CREATE_FLAGS = -cvhf</span>
<a href="#l9.460"></a><span id="l9.460" class="difflineplus">+</span>
<a href="#l9.461"></a><span id="l9.461" class="difflineplus">+ifeq ($(OS_ARCH),BSD_OS)</span>
<a href="#l9.462"></a><span id="l9.462" class="difflineplus">+TAR_CREATE_FLAGS = -cvLf</span>
<a href="#l9.463"></a><span id="l9.463" class="difflineplus">+endif</span>
<a href="#l9.464"></a><span id="l9.464" class="difflineplus">+</span>
<a href="#l9.465"></a><span id="l9.465" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l9.466"></a><span id="l9.466" class="difflineplus">+TAR_CREATE_FLAGS = -cvf</span>
<a href="#l9.467"></a><span id="l9.467" class="difflineplus">+endif</span>
<a href="#l9.468"></a><span id="l9.468" class="difflineplus">+</span>
<a href="#l9.469"></a><span id="l9.469" class="difflineplus">+#</span>
<a href="#l9.470"></a><span id="l9.470" class="difflineplus">+# Personal makefile customizations go in these optional make include files.</span>
<a href="#l9.471"></a><span id="l9.471" class="difflineplus">+#</span>
<a href="#l9.472"></a><span id="l9.472" class="difflineplus">+MY_CONFIG	:= $(DEPTH)/config/myconfig.mk</span>
<a href="#l9.473"></a><span id="l9.473" class="difflineplus">+MY_RULES	:= $(DEPTH)/config/myrules.mk</span>
<a href="#l9.474"></a><span id="l9.474" class="difflineplus">+</span>
<a href="#l9.475"></a><span id="l9.475" class="difflineplus">+#</span>
<a href="#l9.476"></a><span id="l9.476" class="difflineplus">+# Default command macros; can be overridden in &lt;arch&gt;.mk.</span>
<a href="#l9.477"></a><span id="l9.477" class="difflineplus">+#</span>
<a href="#l9.478"></a><span id="l9.478" class="difflineplus">+CCC		= $(CXX)</span>
<a href="#l9.479"></a><span id="l9.479" class="difflineplus">+NFSPWD		= $(CONFIG_TOOLS)/nfspwd</span>
<a href="#l9.480"></a><span id="l9.480" class="difflineplus">+PURIFY		= purify $(PURIFYOPTIONS)</span>
<a href="#l9.481"></a><span id="l9.481" class="difflineplus">+QUANTIFY	= quantify $(QUANTIFYOPTIONS)</span>
<a href="#l9.482"></a><span id="l9.482" class="difflineplus">+ifdef CROSS_COMPILE</span>
<a href="#l9.483"></a><span id="l9.483" class="difflineplus">+XPIDL_COMPILE 	= $(CYGWIN_WRAPPER) $(LIBXUL_DIST)/host/bin/host_xpidl$(HOST_BIN_SUFFIX)</span>
<a href="#l9.484"></a><span id="l9.484" class="difflineplus">+XPIDL_LINK	= $(CYGWIN_WRAPPER) $(LIBXUL_DIST)/host/bin/host_xpt_link$(HOST_BIN_SUFFIX)</span>
<a href="#l9.485"></a><span id="l9.485" class="difflineplus">+else</span>
<a href="#l9.486"></a><span id="l9.486" class="difflineplus">+XPIDL_COMPILE 	= $(CYGWIN_WRAPPER) $(LIBXUL_DIST)/bin/xpidl$(BIN_SUFFIX)</span>
<a href="#l9.487"></a><span id="l9.487" class="difflineplus">+XPIDL_LINK	= $(CYGWIN_WRAPPER) $(LIBXUL_DIST)/bin/xpt_link$(BIN_SUFFIX)</span>
<a href="#l9.488"></a><span id="l9.488" class="difflineplus">+endif</span>
<a href="#l9.489"></a><span id="l9.489" class="difflineplus">+</span>
<a href="#l9.490"></a><span id="l9.490" class="difflineplus">+REQ_INCLUDES	= -I$(srcdir) -I. $(foreach d,$(REQUIRES),-I$(DIST)/include/$d) -I$(DIST)/include </span>
<a href="#l9.491"></a><span id="l9.491" class="difflineplus">+ifdef LIBXUL_SDK</span>
<a href="#l9.492"></a><span id="l9.492" class="difflineplus">+REQ_INCLUDES_SDK = $(foreach d,$(REQUIRES),-I$(LIBXUL_SDK)/include/$d) -I$(LIBXUL_SDK)/include</span>
<a href="#l9.493"></a><span id="l9.493" class="difflineplus">+endif</span>
<a href="#l9.494"></a><span id="l9.494" class="difflineplus">+</span>
<a href="#l9.495"></a><span id="l9.495" class="difflineplus">+INCLUDES	= $(LOCAL_INCLUDES) $(REQ_INCLUDES) $(REQ_INCLUDES_SDK) -I$(PUBLIC) $(OS_INCLUDES)</span>
<a href="#l9.496"></a><span id="l9.496" class="difflineplus">+</span>
<a href="#l9.497"></a><span id="l9.497" class="difflineplus">+ifndef MOZILLA_INTERNAL_API</span>
<a href="#l9.498"></a><span id="l9.498" class="difflineplus">+INCLUDES	+= -I$(LIBXUL_DIST)/sdk/include</span>
<a href="#l9.499"></a><span id="l9.499" class="difflineplus">+endif</span>
<a href="#l9.500"></a><span id="l9.500" class="difflineplus">+</span>
<a href="#l9.501"></a><span id="l9.501" class="difflineplus">+# The entire tree should be subject to static analysis using the XPCOM</span>
<a href="#l9.502"></a><span id="l9.502" class="difflineplus">+# script. Additional scripts may be added by specific subdirectories.</span>
<a href="#l9.503"></a><span id="l9.503" class="difflineplus">+</span>
<a href="#l9.504"></a><span id="l9.504" class="difflineplus">+DEHYDRA_SCRIPT = $(MOZILLA_SRCDIR)/xpcom/analysis/static-checking.js</span>
<a href="#l9.505"></a><span id="l9.505" class="difflineplus">+</span>
<a href="#l9.506"></a><span id="l9.506" class="difflineplus">+DEHYDRA_MODULES = \</span>
<a href="#l9.507"></a><span id="l9.507" class="difflineplus">+  $(MOZILLA_SRCDIR)/xpcom/analysis/final.js \</span>
<a href="#l9.508"></a><span id="l9.508" class="difflineplus">+  $(NULL)</span>
<a href="#l9.509"></a><span id="l9.509" class="difflineplus">+</span>
<a href="#l9.510"></a><span id="l9.510" class="difflineplus">+TREEHYDRA_MODULES = \</span>
<a href="#l9.511"></a><span id="l9.511" class="difflineplus">+  $(MOZILLA_SRCDIR)/xpcom/analysis/outparams.js \</span>
<a href="#l9.512"></a><span id="l9.512" class="difflineplus">+  $(MOZILLA_SRCDIR)/xpcom/analysis/stack.js \</span>
<a href="#l9.513"></a><span id="l9.513" class="difflineplus">+  $(NULL)</span>
<a href="#l9.514"></a><span id="l9.514" class="difflineplus">+</span>
<a href="#l9.515"></a><span id="l9.515" class="difflineplus">+DEHYDRA_ARGS = \</span>
<a href="#l9.516"></a><span id="l9.516" class="difflineplus">+  --topsrcdir=$(topsrcdir) \</span>
<a href="#l9.517"></a><span id="l9.517" class="difflineplus">+  --objdir=$(DEPTH) \</span>
<a href="#l9.518"></a><span id="l9.518" class="difflineplus">+  --dehydra-modules=$(subst $(NULL) ,$(COMMA),$(strip $(DEHYDRA_MODULES))) \</span>
<a href="#l9.519"></a><span id="l9.519" class="difflineplus">+  --treehydra-modules=$(subst $(NULL) ,$(COMMA),$(strip $(TREEHYDRA_MODULES))) \</span>
<a href="#l9.520"></a><span id="l9.520" class="difflineplus">+  $(NULL)</span>
<a href="#l9.521"></a><span id="l9.521" class="difflineplus">+</span>
<a href="#l9.522"></a><span id="l9.522" class="difflineplus">+DEHYDRA_FLAGS = -fplugin=$(DEHYDRA_PATH) -fplugin-arg=&quot;$(DEHYDRA_SCRIPT) $(DEHYDRA_ARGS)&quot;</span>
<a href="#l9.523"></a><span id="l9.523" class="difflineplus">+</span>
<a href="#l9.524"></a><span id="l9.524" class="difflineplus">+ifdef DEHYDRA_PATH</span>
<a href="#l9.525"></a><span id="l9.525" class="difflineplus">+OS_CXXFLAGS += $(DEHYDRA_FLAGS)</span>
<a href="#l9.526"></a><span id="l9.526" class="difflineplus">+endif</span>
<a href="#l9.527"></a><span id="l9.527" class="difflineplus">+</span>
<a href="#l9.528"></a><span id="l9.528" class="difflineplus">+CFLAGS		= $(OS_CFLAGS)</span>
<a href="#l9.529"></a><span id="l9.529" class="difflineplus">+CXXFLAGS	= $(OS_CXXFLAGS)</span>
<a href="#l9.530"></a><span id="l9.530" class="difflineplus">+LDFLAGS		= $(OS_LDFLAGS) $(MOZ_FIX_LINK_PATHS)</span>
<a href="#l9.531"></a><span id="l9.531" class="difflineplus">+</span>
<a href="#l9.532"></a><span id="l9.532" class="difflineplus">+# Allow each module to override the *default* optimization settings</span>
<a href="#l9.533"></a><span id="l9.533" class="difflineplus">+# by setting MODULE_OPTIMIZE_FLAGS if the developer has not given</span>
<a href="#l9.534"></a><span id="l9.534" class="difflineplus">+# arguments to --enable-optimize</span>
<a href="#l9.535"></a><span id="l9.535" class="difflineplus">+ifdef MOZ_OPTIMIZE</span>
<a href="#l9.536"></a><span id="l9.536" class="difflineplus">+ifeq (1,$(MOZ_OPTIMIZE))</span>
<a href="#l9.537"></a><span id="l9.537" class="difflineplus">+ifdef MODULE_OPTIMIZE_FLAGS</span>
<a href="#l9.538"></a><span id="l9.538" class="difflineplus">+CFLAGS		+= $(MODULE_OPTIMIZE_FLAGS)</span>
<a href="#l9.539"></a><span id="l9.539" class="difflineplus">+CXXFLAGS	+= $(MODULE_OPTIMIZE_FLAGS)</span>
<a href="#l9.540"></a><span id="l9.540" class="difflineplus">+else</span>
<a href="#l9.541"></a><span id="l9.541" class="difflineplus">+CFLAGS		+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l9.542"></a><span id="l9.542" class="difflineplus">+CXXFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l9.543"></a><span id="l9.543" class="difflineplus">+endif # MODULE_OPTIMIZE_FLAGS</span>
<a href="#l9.544"></a><span id="l9.544" class="difflineplus">+else</span>
<a href="#l9.545"></a><span id="l9.545" class="difflineplus">+CFLAGS		+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l9.546"></a><span id="l9.546" class="difflineplus">+CXXFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l9.547"></a><span id="l9.547" class="difflineplus">+endif # MOZ_OPTIMIZE == 1</span>
<a href="#l9.548"></a><span id="l9.548" class="difflineplus">+LDFLAGS		+= $(MOZ_OPTIMIZE_LDFLAGS)</span>
<a href="#l9.549"></a><span id="l9.549" class="difflineplus">+endif # MOZ_OPTIMIZE</span>
<a href="#l9.550"></a><span id="l9.550" class="difflineplus">+</span>
<a href="#l9.551"></a><span id="l9.551" class="difflineplus">+ifdef CROSS_COMPILE</span>
<a href="#l9.552"></a><span id="l9.552" class="difflineplus">+HOST_CFLAGS	+= $(HOST_OPTIMIZE_FLAGS)</span>
<a href="#l9.553"></a><span id="l9.553" class="difflineplus">+else</span>
<a href="#l9.554"></a><span id="l9.554" class="difflineplus">+ifdef MOZ_OPTIMIZE</span>
<a href="#l9.555"></a><span id="l9.555" class="difflineplus">+ifeq (1,$(MOZ_OPTIMIZE))</span>
<a href="#l9.556"></a><span id="l9.556" class="difflineplus">+ifdef MODULE_OPTIMIZE_FLAGS</span>
<a href="#l9.557"></a><span id="l9.557" class="difflineplus">+HOST_CFLAGS	+= $(MODULE_OPTIMIZE_FLAGS)</span>
<a href="#l9.558"></a><span id="l9.558" class="difflineplus">+else</span>
<a href="#l9.559"></a><span id="l9.559" class="difflineplus">+HOST_CFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l9.560"></a><span id="l9.560" class="difflineplus">+endif # MODULE_OPTIMIZE_FLAGS</span>
<a href="#l9.561"></a><span id="l9.561" class="difflineplus">+else</span>
<a href="#l9.562"></a><span id="l9.562" class="difflineplus">+HOST_CFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l9.563"></a><span id="l9.563" class="difflineplus">+endif # MOZ_OPTIMIZE == 1</span>
<a href="#l9.564"></a><span id="l9.564" class="difflineplus">+endif # MOZ_OPTIMIZE</span>
<a href="#l9.565"></a><span id="l9.565" class="difflineplus">+endif # CROSS_COMPILE</span>
<a href="#l9.566"></a><span id="l9.566" class="difflineplus">+</span>
<a href="#l9.567"></a><span id="l9.567" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l9.568"></a><span id="l9.568" class="difflineplus">+ifdef USE_STATIC_LIBS</span>
<a href="#l9.569"></a><span id="l9.569" class="difflineplus">+RTL_FLAGS += -Gd-</span>
<a href="#l9.570"></a><span id="l9.570" class="difflineplus">+else # !USE_STATIC_LIBS</span>
<a href="#l9.571"></a><span id="l9.571" class="difflineplus">+RTL_FLAGS += -Gd+</span>
<a href="#l9.572"></a><span id="l9.572" class="difflineplus">+endif</span>
<a href="#l9.573"></a><span id="l9.573" class="difflineplus">+endif</span>
<a href="#l9.574"></a><span id="l9.574" class="difflineplus">+</span>
<a href="#l9.575"></a><span id="l9.575" class="difflineplus">+</span>
<a href="#l9.576"></a><span id="l9.576" class="difflineplus">+ifeq ($(OS_ARCH)_$(GNU_CC),WINNT_)</span>
<a href="#l9.577"></a><span id="l9.577" class="difflineplus">+#// Currently, unless USE_STATIC_LIBS is defined, the multithreaded</span>
<a href="#l9.578"></a><span id="l9.578" class="difflineplus">+#// DLL version of the RTL is used...</span>
<a href="#l9.579"></a><span id="l9.579" class="difflineplus">+#//</span>
<a href="#l9.580"></a><span id="l9.580" class="difflineplus">+#//------------------------------------------------------------------------</span>
<a href="#l9.581"></a><span id="l9.581" class="difflineplus">+ifdef USE_STATIC_LIBS</span>
<a href="#l9.582"></a><span id="l9.582" class="difflineplus">+RTL_FLAGS=-MT          # Statically linked multithreaded RTL</span>
<a href="#l9.583"></a><span id="l9.583" class="difflineplus">+ifneq (,$(MOZ_DEBUG)$(NS_TRACE_MALLOC))</span>
<a href="#l9.584"></a><span id="l9.584" class="difflineplus">+ifndef MOZ_NO_DEBUG_RTL</span>
<a href="#l9.585"></a><span id="l9.585" class="difflineplus">+RTL_FLAGS=-MTd         # Statically linked multithreaded MSVC4.0 debug RTL</span>
<a href="#l9.586"></a><span id="l9.586" class="difflineplus">+endif</span>
<a href="#l9.587"></a><span id="l9.587" class="difflineplus">+endif # MOZ_DEBUG || NS_TRACE_MALLOC</span>
<a href="#l9.588"></a><span id="l9.588" class="difflineplus">+</span>
<a href="#l9.589"></a><span id="l9.589" class="difflineplus">+else # !USE_STATIC_LIBS</span>
<a href="#l9.590"></a><span id="l9.590" class="difflineplus">+</span>
<a href="#l9.591"></a><span id="l9.591" class="difflineplus">+RTL_FLAGS=-MD          # Dynamically linked, multithreaded RTL</span>
<a href="#l9.592"></a><span id="l9.592" class="difflineplus">+ifneq (,$(MOZ_DEBUG)$(NS_TRACE_MALLOC))</span>
<a href="#l9.593"></a><span id="l9.593" class="difflineplus">+ifndef MOZ_NO_DEBUG_RTL</span>
<a href="#l9.594"></a><span id="l9.594" class="difflineplus">+RTL_FLAGS=-MDd         # Dynamically linked, multithreaded MSVC4.0 debug RTL</span>
<a href="#l9.595"></a><span id="l9.595" class="difflineplus">+endif </span>
<a href="#l9.596"></a><span id="l9.596" class="difflineplus">+endif # MOZ_DEBUG || NS_TRACE_MALLOC</span>
<a href="#l9.597"></a><span id="l9.597" class="difflineplus">+endif # USE_STATIC_LIBS</span>
<a href="#l9.598"></a><span id="l9.598" class="difflineplus">+endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l9.599"></a><span id="l9.599" class="difflineplus">+</span>
<a href="#l9.600"></a><span id="l9.600" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l9.601"></a><span id="l9.601" class="difflineplus">+# Darwin doesn't cross-compile, so just set both types of flags here.</span>
<a href="#l9.602"></a><span id="l9.602" class="difflineplus">+HOST_CMFLAGS += -fobjc-exceptions</span>
<a href="#l9.603"></a><span id="l9.603" class="difflineplus">+HOST_CMMFLAGS += -fobjc-exceptions</span>
<a href="#l9.604"></a><span id="l9.604" class="difflineplus">+OS_COMPILE_CMFLAGS += -fobjc-exceptions</span>
<a href="#l9.605"></a><span id="l9.605" class="difflineplus">+OS_COMPILE_CMMFLAGS += -fobjc-exceptions</span>
<a href="#l9.606"></a><span id="l9.606" class="difflineplus">+endif</span>
<a href="#l9.607"></a><span id="l9.607" class="difflineplus">+</span>
<a href="#l9.608"></a><span id="l9.608" class="difflineplus">+COMPILE_CFLAGS	= $(VISIBILITY_FLAGS) $(DEFINES) $(INCLUDES) $(XCFLAGS) $(PROFILER_CFLAGS) $(DSO_CFLAGS) $(DSO_PIC_CFLAGS) $(CFLAGS) $(RTL_FLAGS) $(OS_COMPILE_CFLAGS)</span>
<a href="#l9.609"></a><span id="l9.609" class="difflineplus">+COMPILE_CXXFLAGS = $(VISIBILITY_FLAGS) $(DEFINES) $(INCLUDES) $(XCFLAGS) $(PROFILER_CFLAGS) $(DSO_CFLAGS) $(DSO_PIC_CFLAGS)  $(CXXFLAGS) $(RTL_FLAGS) $(OS_COMPILE_CXXFLAGS)</span>
<a href="#l9.610"></a><span id="l9.610" class="difflineplus">+COMPILE_CMFLAGS = $(OS_COMPILE_CMFLAGS)</span>
<a href="#l9.611"></a><span id="l9.611" class="difflineplus">+COMPILE_CMMFLAGS = $(OS_COMPILE_CMMFLAGS)</span>
<a href="#l9.612"></a><span id="l9.612" class="difflineplus">+</span>
<a href="#l9.613"></a><span id="l9.613" class="difflineplus">+ifndef CROSS_COMPILE</span>
<a href="#l9.614"></a><span id="l9.614" class="difflineplus">+HOST_CFLAGS += $(RTL_FLAGS)</span>
<a href="#l9.615"></a><span id="l9.615" class="difflineplus">+endif</span>
<a href="#l9.616"></a><span id="l9.616" class="difflineplus">+</span>
<a href="#l9.617"></a><span id="l9.617" class="difflineplus">+#</span>
<a href="#l9.618"></a><span id="l9.618" class="difflineplus">+# Name of the binary code directories</span>
<a href="#l9.619"></a><span id="l9.619" class="difflineplus">+#</span>
<a href="#l9.620"></a><span id="l9.620" class="difflineplus">+# Override defaults</span>
<a href="#l9.621"></a><span id="l9.621" class="difflineplus">+</span>
<a href="#l9.622"></a><span id="l9.622" class="difflineplus">+# We need to know where to find the libraries we</span>
<a href="#l9.623"></a><span id="l9.623" class="difflineplus">+# put on the link line for binaries, and should</span>
<a href="#l9.624"></a><span id="l9.624" class="difflineplus">+# we link statically or dynamic?  Assuming dynamic for now.</span>
<a href="#l9.625"></a><span id="l9.625" class="difflineplus">+</span>
<a href="#l9.626"></a><span id="l9.626" class="difflineplus">+ifneq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l9.627"></a><span id="l9.627" class="difflineplus">+ifneq (WINNT_,$(OS_ARCH)_$(GNU_CC))</span>
<a href="#l9.628"></a><span id="l9.628" class="difflineplus">+ifneq (,$(filter-out WINCE,$(OS_ARCH)))</span>
<a href="#l9.629"></a><span id="l9.629" class="difflineplus">+LIBS_DIR	= -L$(DIST)/bin -L$(DIST)/lib</span>
<a href="#l9.630"></a><span id="l9.630" class="difflineplus">+ifdef LIBXUL_SDK</span>
<a href="#l9.631"></a><span id="l9.631" class="difflineplus">+LIBS_DIR	+= -L$(LIBXUL_SDK)/bin -L$(LIBXUL_SDK)/lib</span>
<a href="#l9.632"></a><span id="l9.632" class="difflineplus">+endif</span>
<a href="#l9.633"></a><span id="l9.633" class="difflineplus">+endif</span>
<a href="#l9.634"></a><span id="l9.634" class="difflineplus">+endif</span>
<a href="#l9.635"></a><span id="l9.635" class="difflineplus">+endif</span>
<a href="#l9.636"></a><span id="l9.636" class="difflineplus">+</span>
<a href="#l9.637"></a><span id="l9.637" class="difflineplus">+# Default location of include files</span>
<a href="#l9.638"></a><span id="l9.638" class="difflineplus">+IDL_DIR		= $(DIST)/idl</span>
<a href="#l9.639"></a><span id="l9.639" class="difflineplus">+ifdef MODULE</span>
<a href="#l9.640"></a><span id="l9.640" class="difflineplus">+PUBLIC		= $(DIST)/include/$(MODULE)</span>
<a href="#l9.641"></a><span id="l9.641" class="difflineplus">+else</span>
<a href="#l9.642"></a><span id="l9.642" class="difflineplus">+PUBLIC		= $(DIST)/include</span>
<a href="#l9.643"></a><span id="l9.643" class="difflineplus">+endif</span>
<a href="#l9.644"></a><span id="l9.644" class="difflineplus">+</span>
<a href="#l9.645"></a><span id="l9.645" class="difflineplus">+XPIDL_FLAGS = -I$(srcdir) -I$(IDL_DIR)</span>
<a href="#l9.646"></a><span id="l9.646" class="difflineplus">+ifdef LIBXUL_SDK</span>
<a href="#l9.647"></a><span id="l9.647" class="difflineplus">+XPIDL_FLAGS += -I$(LIBXUL_SDK)/idl</span>
<a href="#l9.648"></a><span id="l9.648" class="difflineplus">+endif</span>
<a href="#l9.649"></a><span id="l9.649" class="difflineplus">+</span>
<a href="#l9.650"></a><span id="l9.650" class="difflineplus">+SDK_PUBLIC  = $(DIST)/sdk/include</span>
<a href="#l9.651"></a><span id="l9.651" class="difflineplus">+SDK_IDL_DIR = $(DIST)/sdk/idl</span>
<a href="#l9.652"></a><span id="l9.652" class="difflineplus">+SDK_LIB_DIR = $(DIST)/sdk/lib</span>
<a href="#l9.653"></a><span id="l9.653" class="difflineplus">+SDK_BIN_DIR = $(DIST)/sdk/bin</span>
<a href="#l9.654"></a><span id="l9.654" class="difflineplus">+</span>
<a href="#l9.655"></a><span id="l9.655" class="difflineplus">+DEPENDENCIES	= .md</span>
<a href="#l9.656"></a><span id="l9.656" class="difflineplus">+</span>
<a href="#l9.657"></a><span id="l9.657" class="difflineplus">+MOZ_COMPONENT_LIBS=$(XPCOM_LIBS) $(MOZ_COMPONENT_NSPR_LIBS)</span>
<a href="#l9.658"></a><span id="l9.658" class="difflineplus">+</span>
<a href="#l9.659"></a><span id="l9.659" class="difflineplus">+ifdef GC_LEAK_DETECTOR</span>
<a href="#l9.660"></a><span id="l9.660" class="difflineplus">+XPCOM_LIBS += -lboehm</span>
<a href="#l9.661"></a><span id="l9.661" class="difflineplus">+endif</span>
<a href="#l9.662"></a><span id="l9.662" class="difflineplus">+</span>
<a href="#l9.663"></a><span id="l9.663" class="difflineplus">+ifeq (xpconnect, $(findstring xpconnect, $(BUILD_MODULES)))</span>
<a href="#l9.664"></a><span id="l9.664" class="difflineplus">+DEFINES +=  -DXPCONNECT_STANDALONE</span>
<a href="#l9.665"></a><span id="l9.665" class="difflineplus">+endif</span>
<a href="#l9.666"></a><span id="l9.666" class="difflineplus">+</span>
<a href="#l9.667"></a><span id="l9.667" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l9.668"></a><span id="l9.668" class="difflineplus">+ELF_DYNSTR_GC	= echo</span>
<a href="#l9.669"></a><span id="l9.669" class="difflineplus">+else</span>
<a href="#l9.670"></a><span id="l9.670" class="difflineplus">+ELF_DYNSTR_GC	= :</span>
<a href="#l9.671"></a><span id="l9.671" class="difflineplus">+endif</span>
<a href="#l9.672"></a><span id="l9.672" class="difflineplus">+</span>
<a href="#l9.673"></a><span id="l9.673" class="difflineplus">+ifndef CROSS_COMPILE</span>
<a href="#l9.674"></a><span id="l9.674" class="difflineplus">+ifdef USE_ELF_DYNSTR_GC</span>
<a href="#l9.675"></a><span id="l9.675" class="difflineplus">+ifdef MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS</span>
<a href="#l9.676"></a><span id="l9.676" class="difflineplus">+ELF_DYNSTR_GC 	= $(MOZDEPTH)/config/elf-dynstr-gc</span>
<a href="#l9.677"></a><span id="l9.677" class="difflineplus">+endif</span>
<a href="#l9.678"></a><span id="l9.678" class="difflineplus">+endif</span>
<a href="#l9.679"></a><span id="l9.679" class="difflineplus">+endif</span>
<a href="#l9.680"></a><span id="l9.680" class="difflineplus">+</span>
<a href="#l9.681"></a><span id="l9.681" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l9.682"></a><span id="l9.682" class="difflineplus">+ifdef USE_PREBINDING</span>
<a href="#l9.683"></a><span id="l9.683" class="difflineplus">+export LD_PREBIND=1</span>
<a href="#l9.684"></a><span id="l9.684" class="difflineplus">+export LD_SEG_ADDR_TABLE=$(shell cd $(MOZILLA_SRCDIR); pwd)/config/prebind-address-table</span>
<a href="#l9.685"></a><span id="l9.685" class="difflineplus">+endif # USE_PREBINDING</span>
<a href="#l9.686"></a><span id="l9.686" class="difflineplus">+ifdef NEXT_ROOT</span>
<a href="#l9.687"></a><span id="l9.687" class="difflineplus">+export NEXT_ROOT</span>
<a href="#l9.688"></a><span id="l9.688" class="difflineplus">+PBBUILD = NEXT_ROOT= $(PBBUILD_BIN)</span>
<a href="#l9.689"></a><span id="l9.689" class="difflineplus">+else # NEXT_ROOT</span>
<a href="#l9.690"></a><span id="l9.690" class="difflineplus">+PBBUILD = $(PBBUILD_BIN)</span>
<a href="#l9.691"></a><span id="l9.691" class="difflineplus">+endif # NEXT_ROOT</span>
<a href="#l9.692"></a><span id="l9.692" class="difflineplus">+PBBUILD_SETTINGS = GCC_VERSION=&quot;$(GCC_VERSION)&quot; SYMROOT=build ARCHS=&quot;$(OS_TEST)&quot;</span>
<a href="#l9.693"></a><span id="l9.693" class="difflineplus">+ifdef MACOS_SDK_DIR</span>
<a href="#l9.694"></a><span id="l9.694" class="difflineplus">+PBBUILD_SETTINGS += SDKROOT=&quot;$(MACOS_SDK_DIR)&quot;</span>
<a href="#l9.695"></a><span id="l9.695" class="difflineplus">+endif # MACOS_SDK_DIR</span>
<a href="#l9.696"></a><span id="l9.696" class="difflineplus">+ifdef MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l9.697"></a><span id="l9.697" class="difflineplus">+export MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l9.698"></a><span id="l9.698" class="difflineplus">+PBBUILD_SETTINGS += MACOSX_DEPLOYMENT_TARGET=&quot;$(MACOSX_DEPLOYMENT_TARGET)&quot;</span>
<a href="#l9.699"></a><span id="l9.699" class="difflineplus">+endif # MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l9.700"></a><span id="l9.700" class="difflineplus">+ifdef MOZ_OPTIMIZE</span>
<a href="#l9.701"></a><span id="l9.701" class="difflineplus">+ifeq (2,$(MOZ_OPTIMIZE))</span>
<a href="#l9.702"></a><span id="l9.702" class="difflineplus">+# Only override project defaults if the config specified explicit settings</span>
<a href="#l9.703"></a><span id="l9.703" class="difflineplus">+PBBUILD_SETTINGS += GCC_MODEL_TUNING= OPTIMIZATION_CFLAGS=&quot;$(MOZ_OPTIMIZE_FLAGS)&quot;</span>
<a href="#l9.704"></a><span id="l9.704" class="difflineplus">+endif # MOZ_OPTIMIZE=2</span>
<a href="#l9.705"></a><span id="l9.705" class="difflineplus">+endif # MOZ_OPTIMIZE</span>
<a href="#l9.706"></a><span id="l9.706" class="difflineplus">+ifeq (1,$(HAS_XCODE_2_1))</span>
<a href="#l9.707"></a><span id="l9.707" class="difflineplus">+# Xcode 2.1 puts its build products in a directory corresponding to the</span>
<a href="#l9.708"></a><span id="l9.708" class="difflineplus">+# selected build style/configuration.</span>
<a href="#l9.709"></a><span id="l9.709" class="difflineplus">+XCODE_PRODUCT_DIR = build/$(BUILDSTYLE)</span>
<a href="#l9.710"></a><span id="l9.710" class="difflineplus">+else</span>
<a href="#l9.711"></a><span id="l9.711" class="difflineplus">+XCODE_PRODUCT_DIR = build</span>
<a href="#l9.712"></a><span id="l9.712" class="difflineplus">+endif # HAS_XCODE_2_1=1</span>
<a href="#l9.713"></a><span id="l9.713" class="difflineplus">+endif # OS_ARCH=Darwin</span>
<a href="#l9.714"></a><span id="l9.714" class="difflineplus">+</span>
<a href="#l9.715"></a><span id="l9.715" class="difflineplus">+</span>
<a href="#l9.716"></a><span id="l9.716" class="difflineplus">+ifdef MOZ_NATIVE_MAKEDEPEND</span>
<a href="#l9.717"></a><span id="l9.717" class="difflineplus">+MKDEPEND_DIR	=</span>
<a href="#l9.718"></a><span id="l9.718" class="difflineplus">+MKDEPEND	= $(CYGWIN_WRAPPER) $(MOZ_NATIVE_MAKEDEPEND)</span>
<a href="#l9.719"></a><span id="l9.719" class="difflineplus">+else</span>
<a href="#l9.720"></a><span id="l9.720" class="difflineplus">+MKDEPEND_DIR	= $(CONFIG_TOOLS)/mkdepend</span>
<a href="#l9.721"></a><span id="l9.721" class="difflineplus">+MKDEPEND	= $(CYGWIN_WRAPPER) $(MKDEPEND_DIR)/mkdepend$(BIN_SUFFIX)</span>
<a href="#l9.722"></a><span id="l9.722" class="difflineplus">+endif</span>
<a href="#l9.723"></a><span id="l9.723" class="difflineplus">+</span>
<a href="#l9.724"></a><span id="l9.724" class="difflineplus">+# Set link flags according to whether we want a console.</span>
<a href="#l9.725"></a><span id="l9.725" class="difflineplus">+ifdef MOZ_WINCONSOLE</span>
<a href="#l9.726"></a><span id="l9.726" class="difflineplus">+ifeq ($(MOZ_WINCONSOLE),1)</span>
<a href="#l9.727"></a><span id="l9.727" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),EMX)</span>
<a href="#l9.728"></a><span id="l9.728" class="difflineplus">+BIN_FLAGS	+= -Zlinker -PM:VIO</span>
<a href="#l9.729"></a><span id="l9.729" class="difflineplus">+endif</span>
<a href="#l9.730"></a><span id="l9.730" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l9.731"></a><span id="l9.731" class="difflineplus">+ifdef GNU_CC</span>
<a href="#l9.732"></a><span id="l9.732" class="difflineplus">+WIN32_EXE_LDFLAGS	+= -mconsole</span>
<a href="#l9.733"></a><span id="l9.733" class="difflineplus">+else</span>
<a href="#l9.734"></a><span id="l9.734" class="difflineplus">+WIN32_EXE_LDFLAGS	+= -SUBSYSTEM:CONSOLE</span>
<a href="#l9.735"></a><span id="l9.735" class="difflineplus">+endif</span>
<a href="#l9.736"></a><span id="l9.736" class="difflineplus">+endif</span>
<a href="#l9.737"></a><span id="l9.737" class="difflineplus">+else # MOZ_WINCONSOLE</span>
<a href="#l9.738"></a><span id="l9.738" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l9.739"></a><span id="l9.739" class="difflineplus">+LDFLAGS += -PM:PM</span>
<a href="#l9.740"></a><span id="l9.740" class="difflineplus">+endif</span>
<a href="#l9.741"></a><span id="l9.741" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),EMX)</span>
<a href="#l9.742"></a><span id="l9.742" class="difflineplus">+BIN_FLAGS	+= -Zlinker -PM:PM</span>
<a href="#l9.743"></a><span id="l9.743" class="difflineplus">+endif</span>
<a href="#l9.744"></a><span id="l9.744" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l9.745"></a><span id="l9.745" class="difflineplus">+ifdef GNU_CC</span>
<a href="#l9.746"></a><span id="l9.746" class="difflineplus">+WIN32_EXE_LDFLAGS	+= -mwindows</span>
<a href="#l9.747"></a><span id="l9.747" class="difflineplus">+else</span>
<a href="#l9.748"></a><span id="l9.748" class="difflineplus">+WIN32_EXE_LDFLAGS	+= -SUBSYSTEM:WINDOWS</span>
<a href="#l9.749"></a><span id="l9.749" class="difflineplus">+endif</span>
<a href="#l9.750"></a><span id="l9.750" class="difflineplus">+endif</span>
<a href="#l9.751"></a><span id="l9.751" class="difflineplus">+endif</span>
<a href="#l9.752"></a><span id="l9.752" class="difflineplus">+endif</span>
<a href="#l9.753"></a><span id="l9.753" class="difflineplus">+</span>
<a href="#l9.754"></a><span id="l9.754" class="difflineplus">+# Flags needed to link against the component library</span>
<a href="#l9.755"></a><span id="l9.755" class="difflineplus">+ifdef MOZ_COMPONENTLIB</span>
<a href="#l9.756"></a><span id="l9.756" class="difflineplus">+MOZ_COMPONENTLIB_EXTRA_DSO_LIBS = mozcomps xpcom_compat</span>
<a href="#l9.757"></a><span id="l9.757" class="difflineplus">+</span>
<a href="#l9.758"></a><span id="l9.758" class="difflineplus">+# Tell the linker where NSS is, if we're building crypto</span>
<a href="#l9.759"></a><span id="l9.759" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l9.760"></a><span id="l9.760" class="difflineplus">+ifeq (,$(findstring crypto,$(MOZ_META_COMPONENTS)))</span>
<a href="#l9.761"></a><span id="l9.761" class="difflineplus">+MOZ_COMPONENTLIB_EXTRA_LIBS = $(foreach library, $(patsubst -l%, $(LIB_PREFIX)%$(DLL_SUFFIX), $(filter -l%, $(NSS_LIBS))), -dylib_file @executable_path/$(library):$(DIST)/bin/$(library))</span>
<a href="#l9.762"></a><span id="l9.762" class="difflineplus">+endif</span>
<a href="#l9.763"></a><span id="l9.763" class="difflineplus">+endif</span>
<a href="#l9.764"></a><span id="l9.764" class="difflineplus">+endif</span>
<a href="#l9.765"></a><span id="l9.765" class="difflineplus">+</span>
<a href="#l9.766"></a><span id="l9.766" class="difflineplus">+# If we're building a component on MSVC, we don't want to generate an</span>
<a href="#l9.767"></a><span id="l9.767" class="difflineplus">+# import lib, because that import lib will collide with the name of a</span>
<a href="#l9.768"></a><span id="l9.768" class="difflineplus">+# static version of the same library.</span>
<a href="#l9.769"></a><span id="l9.769" class="difflineplus">+ifeq ($(GNU_LD)$(OS_ARCH),WINNT)</span>
<a href="#l9.770"></a><span id="l9.770" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l9.771"></a><span id="l9.771" class="difflineplus">+LDFLAGS += -IMPLIB:fake.lib</span>
<a href="#l9.772"></a><span id="l9.772" class="difflineplus">+DELETE_AFTER_LINK = fake.lib fake.exp</span>
<a href="#l9.773"></a><span id="l9.773" class="difflineplus">+endif</span>
<a href="#l9.774"></a><span id="l9.774" class="difflineplus">+endif</span>
<a href="#l9.775"></a><span id="l9.775" class="difflineplus">+</span>
<a href="#l9.776"></a><span id="l9.776" class="difflineplus">+#</span>
<a href="#l9.777"></a><span id="l9.777" class="difflineplus">+# Include any personal overrides the user might think are needed.</span>
<a href="#l9.778"></a><span id="l9.778" class="difflineplus">+#</span>
<a href="#l9.779"></a><span id="l9.779" class="difflineplus">+-include $(topsrcdir)/$(MOZ_BUILD_APP)/app-config.mk</span>
<a href="#l9.780"></a><span id="l9.780" class="difflineplus">+-include $(MY_CONFIG)</span>
<a href="#l9.781"></a><span id="l9.781" class="difflineplus">+</span>
<a href="#l9.782"></a><span id="l9.782" class="difflineplus">+######################################################################</span>
<a href="#l9.783"></a><span id="l9.783" class="difflineplus">+# Now test variables that might have been set or overridden by $(MY_CONFIG).</span>
<a href="#l9.784"></a><span id="l9.784" class="difflineplus">+</span>
<a href="#l9.785"></a><span id="l9.785" class="difflineplus">+DEFINES		+= -DOSTYPE=\&quot;$(OS_CONFIG)\&quot;</span>
<a href="#l9.786"></a><span id="l9.786" class="difflineplus">+DEFINES		+= -DOSARCH=$(OS_ARCH)</span>
<a href="#l9.787"></a><span id="l9.787" class="difflineplus">+</span>
<a href="#l9.788"></a><span id="l9.788" class="difflineplus">+# For profiling</span>
<a href="#l9.789"></a><span id="l9.789" class="difflineplus">+ifdef ENABLE_EAZEL_PROFILER</span>
<a href="#l9.790"></a><span id="l9.790" class="difflineplus">+ifndef INTERNAL_TOOLS</span>
<a href="#l9.791"></a><span id="l9.791" class="difflineplus">+ifneq ($(LIBRARY_NAME), xpt)</span>
<a href="#l9.792"></a><span id="l9.792" class="difflineplus">+ifneq (, $(findstring $(shell $(MOZILLA_SRCDIR)/build/unix/print-depth-path.sh | awk -F/ '{ print $$2; }'), $(MOZ_PROFILE_MODULES)))</span>
<a href="#l9.793"></a><span id="l9.793" class="difflineplus">+PROFILER_CFLAGS	= $(EAZEL_PROFILER_CFLAGS) -DENABLE_EAZEL_PROFILER</span>
<a href="#l9.794"></a><span id="l9.794" class="difflineplus">+PROFILER_LIBS	= $(EAZEL_PROFILER_LIBS)</span>
<a href="#l9.795"></a><span id="l9.795" class="difflineplus">+endif</span>
<a href="#l9.796"></a><span id="l9.796" class="difflineplus">+endif</span>
<a href="#l9.797"></a><span id="l9.797" class="difflineplus">+endif</span>
<a href="#l9.798"></a><span id="l9.798" class="difflineplus">+endif</span>
<a href="#l9.799"></a><span id="l9.799" class="difflineplus">+</span>
<a href="#l9.800"></a><span id="l9.800" class="difflineplus">+######################################################################</span>
<a href="#l9.801"></a><span id="l9.801" class="difflineplus">+</span>
<a href="#l9.802"></a><span id="l9.802" class="difflineplus">+GARBAGE		+= $(DEPENDENCIES) $(MKDEPENDENCIES) $(MKDEPENDENCIES).bak core $(wildcard core.[0-9]*) $(wildcard *.err) $(wildcard *.pure) $(wildcard *_pure_*.o) Templates.DB</span>
<a href="#l9.803"></a><span id="l9.803" class="difflineplus">+</span>
<a href="#l9.804"></a><span id="l9.804" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l9.805"></a><span id="l9.805" class="difflineplus">+ifndef NSDISTMODE</span>
<a href="#l9.806"></a><span id="l9.806" class="difflineplus">+NSDISTMODE=absolute_symlink</span>
<a href="#l9.807"></a><span id="l9.807" class="difflineplus">+endif</span>
<a href="#l9.808"></a><span id="l9.808" class="difflineplus">+PWD := $(shell pwd)</span>
<a href="#l9.809"></a><span id="l9.809" class="difflineplus">+endif</span>
<a href="#l9.810"></a><span id="l9.810" class="difflineplus">+</span>
<a href="#l9.811"></a><span id="l9.811" class="difflineplus">+ifdef NSINSTALL_BIN</span>
<a href="#l9.812"></a><span id="l9.812" class="difflineplus">+NSINSTALL	= $(CYGWIN_WRAPPER) $(NSINSTALL_BIN)</span>
<a href="#l9.813"></a><span id="l9.813" class="difflineplus">+else</span>
<a href="#l9.814"></a><span id="l9.814" class="difflineplus">+ifeq (WINNT,$(CROSS_COMPILE)$(OS_ARCH))</span>
<a href="#l9.815"></a><span id="l9.815" class="difflineplus">+NSINSTALL	= $(CYGWIN_WRAPPER) $(MOZ_TOOLS_DIR)/bin/nsinstall</span>
<a href="#l9.816"></a><span id="l9.816" class="difflineplus">+else</span>
<a href="#l9.817"></a><span id="l9.817" class="difflineplus">+ifeq (OS2,$(CROSS_COMPILE)$(OS_ARCH))</span>
<a href="#l9.818"></a><span id="l9.818" class="difflineplus">+NSINSTALL	= $(MOZ_TOOLS_DIR)/nsinstall</span>
<a href="#l9.819"></a><span id="l9.819" class="difflineplus">+else</span>
<a href="#l9.820"></a><span id="l9.820" class="difflineplus">+NSINSTALL	= $(CONFIG_TOOLS)/nsinstall</span>
<a href="#l9.821"></a><span id="l9.821" class="difflineplus">+endif # OS2</span>
<a href="#l9.822"></a><span id="l9.822" class="difflineplus">+endif # WINNT</span>
<a href="#l9.823"></a><span id="l9.823" class="difflineplus">+endif # NSINSTALL_BIN</span>
<a href="#l9.824"></a><span id="l9.824" class="difflineplus">+</span>
<a href="#l9.825"></a><span id="l9.825" class="difflineplus">+</span>
<a href="#l9.826"></a><span id="l9.826" class="difflineplus">+ifeq (,$(CROSS_COMPILE)$(filter-out WINNT OS2, $(OS_ARCH)))</span>
<a href="#l9.827"></a><span id="l9.827" class="difflineplus">+INSTALL		= $(NSINSTALL)</span>
<a href="#l9.828"></a><span id="l9.828" class="difflineplus">+else</span>
<a href="#l9.829"></a><span id="l9.829" class="difflineplus">+ifeq ($(NSDISTMODE),copy)</span>
<a href="#l9.830"></a><span id="l9.830" class="difflineplus">+# copy files, but preserve source mtime</span>
<a href="#l9.831"></a><span id="l9.831" class="difflineplus">+INSTALL		= $(NSINSTALL) -t</span>
<a href="#l9.832"></a><span id="l9.832" class="difflineplus">+else</span>
<a href="#l9.833"></a><span id="l9.833" class="difflineplus">+ifeq ($(NSDISTMODE),absolute_symlink)</span>
<a href="#l9.834"></a><span id="l9.834" class="difflineplus">+# install using absolute symbolic links</span>
<a href="#l9.835"></a><span id="l9.835" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l9.836"></a><span id="l9.836" class="difflineplus">+INSTALL		= $(NSINSTALL) -L $(PWD)</span>
<a href="#l9.837"></a><span id="l9.837" class="difflineplus">+else</span>
<a href="#l9.838"></a><span id="l9.838" class="difflineplus">+INSTALL		= $(NSINSTALL) -L `$(NFSPWD)`</span>
<a href="#l9.839"></a><span id="l9.839" class="difflineplus">+endif # Darwin</span>
<a href="#l9.840"></a><span id="l9.840" class="difflineplus">+else</span>
<a href="#l9.841"></a><span id="l9.841" class="difflineplus">+# install using relative symbolic links</span>
<a href="#l9.842"></a><span id="l9.842" class="difflineplus">+INSTALL		= $(NSINSTALL) -R</span>
<a href="#l9.843"></a><span id="l9.843" class="difflineplus">+endif # absolute_symlink</span>
<a href="#l9.844"></a><span id="l9.844" class="difflineplus">+endif # copy</span>
<a href="#l9.845"></a><span id="l9.845" class="difflineplus">+endif # WINNT/OS2</span>
<a href="#l9.846"></a><span id="l9.846" class="difflineplus">+</span>
<a href="#l9.847"></a><span id="l9.847" class="difflineplus">+ifeq (,$(filter-out WINCE,$(OS_ARCH)))</span>
<a href="#l9.848"></a><span id="l9.848" class="difflineplus">+NSINSTALL	= $(CYGWIN_WRAPPER) nsinstall</span>
<a href="#l9.849"></a><span id="l9.849" class="difflineplus">+INSTALL     = $(CYGWIN_WRAPPER) nsinstall </span>
<a href="#l9.850"></a><span id="l9.850" class="difflineplus">+endif</span>
<a href="#l9.851"></a><span id="l9.851" class="difflineplus">+</span>
<a href="#l9.852"></a><span id="l9.852" class="difflineplus">+# Use nsinstall in copy mode to install files on the system</span>
<a href="#l9.853"></a><span id="l9.853" class="difflineplus">+SYSINSTALL	= $(NSINSTALL) -t</span>
<a href="#l9.854"></a><span id="l9.854" class="difflineplus">+</span>
<a href="#l9.855"></a><span id="l9.855" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l9.856"></a><span id="l9.856" class="difflineplus">+ifneq (,$(CYGDRIVE_MOUNT))</span>
<a href="#l9.857"></a><span id="l9.857" class="difflineplus">+export CYGDRIVE_MOUNT</span>
<a href="#l9.858"></a><span id="l9.858" class="difflineplus">+endif</span>
<a href="#l9.859"></a><span id="l9.859" class="difflineplus">+endif</span>
<a href="#l9.860"></a><span id="l9.860" class="difflineplus">+</span>
<a href="#l9.861"></a><span id="l9.861" class="difflineplus">+#</span>
<a href="#l9.862"></a><span id="l9.862" class="difflineplus">+# Localization build automation</span>
<a href="#l9.863"></a><span id="l9.863" class="difflineplus">+#</span>
<a href="#l9.864"></a><span id="l9.864" class="difflineplus">+</span>
<a href="#l9.865"></a><span id="l9.865" class="difflineplus">+# Because you might wish to &quot;make locales AB_CD=ab-CD&quot;, we don't hardcode</span>
<a href="#l9.866"></a><span id="l9.866" class="difflineplus">+# MOZ_UI_LOCALE directly, but use an intermediate variable that can be</span>
<a href="#l9.867"></a><span id="l9.867" class="difflineplus">+# overridden by the command line. (Besides, AB_CD is prettier).</span>
<a href="#l9.868"></a><span id="l9.868" class="difflineplus">+AB_CD = $(MOZ_UI_LOCALE)</span>
<a href="#l9.869"></a><span id="l9.869" class="difflineplus">+</span>
<a href="#l9.870"></a><span id="l9.870" class="difflineplus">+EXPAND_LOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(topsrcdir)/$(1)/en-US,$(topsrcdir)/../l10n/$(AB_CD)/$(subst /locales,,$(1)))</span>
<a href="#l9.871"></a><span id="l9.871" class="difflineplus">+EXPAND_MOZLOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(MOZILLA_SRCDIR)/$(1)/en-US,$(MOZILLA_SRCDIR)/../l10n/$(AB_CD)/$(subst /locales,,$(1)))</span>
<a href="#l9.872"></a><span id="l9.872" class="difflineplus">+</span>
<a href="#l9.873"></a><span id="l9.873" class="difflineplus">+ifdef relativesrcdir</span>
<a href="#l9.874"></a><span id="l9.874" class="difflineplus">+LOCALE_SRCDIR = $(call EXPAND_LOCALE_SRCDIR,$(relativesrcdir))</span>
<a href="#l9.875"></a><span id="l9.875" class="difflineplus">+endif</span>
<a href="#l9.876"></a><span id="l9.876" class="difflineplus">+</span>
<a href="#l9.877"></a><span id="l9.877" class="difflineplus">+ifdef LOCALE_SRCDIR</span>
<a href="#l9.878"></a><span id="l9.878" class="difflineplus">+MAKE_JARS_FLAGS += -c $(LOCALE_SRCDIR)</span>
<a href="#l9.879"></a><span id="l9.879" class="difflineplus">+endif</span>
<a href="#l9.880"></a><span id="l9.880" class="difflineplus">+</span>
<a href="#l9.881"></a><span id="l9.881" class="difflineplus">+ifeq (,$(filter WINCE WINNT OS2,$(OS_ARCH)))</span>
<a href="#l9.882"></a><span id="l9.882" class="difflineplus">+RUN_TEST_PROGRAM = $(DIST)/bin/run-mozilla.sh</span>
<a href="#l9.883"></a><span id="l9.883" class="difflineplus">+endif</span>
<a href="#l9.884"></a><span id="l9.884" class="difflineplus">+</span>
<a href="#l9.885"></a><span id="l9.885" class="difflineplus">+#</span>
<a href="#l9.886"></a><span id="l9.886" class="difflineplus">+# Java macros</span>
<a href="#l9.887"></a><span id="l9.887" class="difflineplus">+#</span>
<a href="#l9.888"></a><span id="l9.888" class="difflineplus">+</span>
<a href="#l9.889"></a><span id="l9.889" class="difflineplus">+# Make sure any compiled classes work with at least JVM 1.4</span>
<a href="#l9.890"></a><span id="l9.890" class="difflineplus">+JAVAC_FLAGS += -source 1.4</span>
<a href="#l9.891"></a><span id="l9.891" class="difflineplus">+</span>
<a href="#l9.892"></a><span id="l9.892" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l9.893"></a><span id="l9.893" class="difflineplus">+JAVAC_FLAGS += -g</span>
<a href="#l9.894"></a><span id="l9.894" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/config/rules.mk</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,2242 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+# vim:set ts=8 sw=8 sts=8 noet:</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+#</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+#</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+#</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+# License.</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+#</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+#</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+# Netscape Communications Corporation.</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+#</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+# Contributor(s):</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+#  Chase Phillips &lt;chase@mozilla.org&gt;</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+#  Benjamin Smedberg &lt;benjamin@smedbergs.us&gt;</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+#  Jeff Walden &lt;jwalden+code@mit.edu&gt;</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+#</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+# either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+# or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineplus">+#</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineplus">+ifndef topsrcdir</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineplus">+topsrcdir		= $(DEPTH)</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineplus">+endif</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+ifndef MOZILLA_DIR</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+MOZILLA_DIR = $(MOZILLA_SRCDIR)</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+endif</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineplus">+</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineplus">+ifndef INCLUDED_CONFIG_MK</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineplus">+include $(topsrcdir)/config/config.mk</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+endif</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+ifndef INCLUDED_VERSION_MK</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+include $(topsrcdir)/config/version.mk</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+endif</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+REPORT_BUILD = @echo $(notdir $&lt;)</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+EXEC			=</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+else</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+EXEC			= exec</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+endif</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+# ELOG prints out failed command when building silently (gmake -s).</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+ifneq (,$(findstring -s,$(MAKEFLAGS)))</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+  ELOG := $(EXEC) sh $(BUILD_TOOLS)/print-failed-commands.sh</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+else</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+  ELOG :=</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+endif</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+_LIBNAME_RELATIVE_PATHS=1</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+else</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+ifndef GNU_CC</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+_LIBNAME_RELATIVE_PATHS=1</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+endif</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+endif</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineplus">+endif</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineplus">+</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineplus">+PWD := $(shell pwd)</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineplus">+_VPATH_SRCS = $(if $(filter /%,$&lt;),$&lt;,$(PWD)/$&lt;)</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineplus">+else</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineplus">+_VPATH_SRCS = $&lt;</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineplus">+endif</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineplus">+</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineplus">+# Add $(DIST)/lib to VPATH so that -lfoo dependencies are followed</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineplus">+VPATH += $(DIST)/lib</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineplus">+ifdef LIBXUL_SDK</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineplus">+VPATH += $(LIBXUL_SDK)/lib</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineplus">+endif</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineplus">+</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineplus">+# EXPAND_LIBNAME - $(call EXPAND_LIBNAME,foo)</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineplus">+# expands to foo.lib on platforms with import libs and -lfoo otherwise</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineplus">+</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineplus">+# EXPAND_LIBNAME_PATH - $(call EXPAND_LIBNAME_PATH,foo,dir)</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineplus">+# expands to dir/foo.lib on platforms with import libs and</span>
<a href="#l10.104"></a><span id="l10.104" class="difflineplus">+# -Ldir -lfoo otherwise</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineplus">+</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineplus">+# EXPAND_MOZLIBNAME - $(call EXPAND_MOZLIBNAME,foo)</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineplus">+# expands to $(DIST)/lib/foo.lib on platforms with import libs and</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineplus">+# -lfoo otherwise</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineplus">+</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineplus">+ifdef _LIBNAME_RELATIVE_PATHS</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineplus">+EXPAND_LIBNAME = $(foreach lib,$(1),$(LIB_PREFIX)$(lib).$(LIB_SUFFIX))</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineplus">+EXPAND_LIBNAME_PATH = $(foreach lib,$(1),$(2)/$(LIB_PREFIX)$(lib).$(LIB_SUFFIX))</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineplus">+EXPAND_MOZLIBNAME = $(foreach lib,$(1),$(DIST)/lib/$(LIB_PREFIX)$(lib).$(LIB_SUFFIX))</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineplus">+else</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineplus">+EXPAND_LIBNAME = $(addprefix -l,$(1))</span>
<a href="#l10.116"></a><span id="l10.116" class="difflineplus">+EXPAND_LIBNAME_PATH = -L$(2) $(addprefix -l,$(1))</span>
<a href="#l10.117"></a><span id="l10.117" class="difflineplus">+EXPAND_MOZLIBNAME = $(addprefix -l,$(1))</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineplus">+endif</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineplus">+</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineplus">+ifdef EXTRA_DSO_LIBS</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineplus">+EXTRA_DSO_LIBS	:= $(call EXPAND_MOZLIBNAME,$(EXTRA_DSO_LIBS))</span>
<a href="#l10.122"></a><span id="l10.122" class="difflineplus">+endif</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineplus">+</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineplus">+#</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineplus">+# Library rules</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineplus">+#</span>
<a href="#l10.127"></a><span id="l10.127" class="difflineplus">+# If BUILD_STATIC_LIBS or FORCE_STATIC_LIB is set, build a static library.</span>
<a href="#l10.128"></a><span id="l10.128" class="difflineplus">+# Otherwise, build a shared library.</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineplus">+#</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineplus">+</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineplus">+ifndef LIBRARY</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineplus">+ifdef LIBRARY_NAME</span>
<a href="#l10.133"></a><span id="l10.133" class="difflineplus">+ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.134"></a><span id="l10.134" class="difflineplus">+ifdef SHORT_LIBNAME</span>
<a href="#l10.135"></a><span id="l10.135" class="difflineplus">+LIBRARY_NAME		:= $(SHORT_LIBNAME)</span>
<a href="#l10.136"></a><span id="l10.136" class="difflineplus">+endif</span>
<a href="#l10.137"></a><span id="l10.137" class="difflineplus">+endif</span>
<a href="#l10.138"></a><span id="l10.138" class="difflineplus">+LIBRARY			:= $(LIB_PREFIX)$(LIBRARY_NAME).$(LIB_SUFFIX)</span>
<a href="#l10.139"></a><span id="l10.139" class="difflineplus">+endif</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineplus">+endif</span>
<a href="#l10.141"></a><span id="l10.141" class="difflineplus">+</span>
<a href="#l10.142"></a><span id="l10.142" class="difflineplus">+ifndef HOST_LIBRARY</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineplus">+ifdef HOST_LIBRARY_NAME</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineplus">+HOST_LIBRARY		:= $(LIB_PREFIX)$(HOST_LIBRARY_NAME).$(LIB_SUFFIX)</span>
<a href="#l10.145"></a><span id="l10.145" class="difflineplus">+endif</span>
<a href="#l10.146"></a><span id="l10.146" class="difflineplus">+endif</span>
<a href="#l10.147"></a><span id="l10.147" class="difflineplus">+</span>
<a href="#l10.148"></a><span id="l10.148" class="difflineplus">+ifdef LIBRARY</span>
<a href="#l10.149"></a><span id="l10.149" class="difflineplus">+ifneq (_1,$(FORCE_SHARED_LIB)_$(BUILD_STATIC_LIBS))</span>
<a href="#l10.150"></a><span id="l10.150" class="difflineplus">+ifdef MKSHLIB</span>
<a href="#l10.151"></a><span id="l10.151" class="difflineplus">+</span>
<a href="#l10.152"></a><span id="l10.152" class="difflineplus">+ifdef LIB_IS_C_ONLY</span>
<a href="#l10.153"></a><span id="l10.153" class="difflineplus">+MKSHLIB			= $(MKCSHLIB)</span>
<a href="#l10.154"></a><span id="l10.154" class="difflineplus">+endif</span>
<a href="#l10.155"></a><span id="l10.155" class="difflineplus">+</span>
<a href="#l10.156"></a><span id="l10.156" class="difflineplus">+ifdef MAKE_FRAMEWORK</span>
<a href="#l10.157"></a><span id="l10.157" class="difflineplus">+SHARED_LIBRARY		:= $(LIBRARY_NAME)</span>
<a href="#l10.158"></a><span id="l10.158" class="difflineplus">+else</span>
<a href="#l10.159"></a><span id="l10.159" class="difflineplus">+SHARED_LIBRARY		:= $(DLL_PREFIX)$(LIBRARY_NAME)$(DLL_SUFFIX)</span>
<a href="#l10.160"></a><span id="l10.160" class="difflineplus">+endif</span>
<a href="#l10.161"></a><span id="l10.161" class="difflineplus">+</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineplus">+DEF_FILE		:= $(SHARED_LIBRARY:.dll=.def)</span>
<a href="#l10.164"></a><span id="l10.164" class="difflineplus">+endif</span>
<a href="#l10.165"></a><span id="l10.165" class="difflineplus">+</span>
<a href="#l10.166"></a><span id="l10.166" class="difflineplus">+ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.167"></a><span id="l10.167" class="difflineplus">+IMPORT_LIBRARY		:= $(LIB_PREFIX)$(LIBRARY_NAME).$(IMPORT_LIB_SUFFIX)</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineplus">+endif</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineplus">+</span>
<a href="#l10.170"></a><span id="l10.170" class="difflineplus">+ifdef MOZ_ENABLE_LIBXUL</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineplus">+EMBED_MANIFEST_AT=2</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineplus">+endif</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineplus">+</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineplus">+endif # MKSHLIB</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineplus">+endif # FORCE_SHARED_LIB &amp;&amp; !BUILD_STATIC_LIBS</span>
<a href="#l10.176"></a><span id="l10.176" class="difflineplus">+endif # LIBRARY</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineplus">+</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineplus">+ifeq (,$(BUILD_STATIC_LIBS)$(FORCE_STATIC_LIB))</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineplus">+LIBRARY			:= $(NULL)</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineplus">+endif</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineplus">+</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineplus">+ifeq (_1,$(FORCE_SHARED_LIB)_$(BUILD_STATIC_LIBS))</span>
<a href="#l10.183"></a><span id="l10.183" class="difflineplus">+SHARED_LIBRARY		:= $(NULL)</span>
<a href="#l10.184"></a><span id="l10.184" class="difflineplus">+DEF_FILE		:= $(NULL)</span>
<a href="#l10.185"></a><span id="l10.185" class="difflineplus">+IMPORT_LIBRARY		:= $(NULL)</span>
<a href="#l10.186"></a><span id="l10.186" class="difflineplus">+endif</span>
<a href="#l10.187"></a><span id="l10.187" class="difflineplus">+</span>
<a href="#l10.188"></a><span id="l10.188" class="difflineplus">+ifdef FORCE_STATIC_LIB</span>
<a href="#l10.189"></a><span id="l10.189" class="difflineplus">+ifndef FORCE_SHARED_LIB</span>
<a href="#l10.190"></a><span id="l10.190" class="difflineplus">+SHARED_LIBRARY		:= $(NULL)</span>
<a href="#l10.191"></a><span id="l10.191" class="difflineplus">+DEF_FILE		:= $(NULL)</span>
<a href="#l10.192"></a><span id="l10.192" class="difflineplus">+IMPORT_LIBRARY		:= $(NULL)</span>
<a href="#l10.193"></a><span id="l10.193" class="difflineplus">+endif</span>
<a href="#l10.194"></a><span id="l10.194" class="difflineplus">+endif</span>
<a href="#l10.195"></a><span id="l10.195" class="difflineplus">+</span>
<a href="#l10.196"></a><span id="l10.196" class="difflineplus">+ifdef FORCE_SHARED_LIB</span>
<a href="#l10.197"></a><span id="l10.197" class="difflineplus">+ifndef FORCE_STATIC_LIB</span>
<a href="#l10.198"></a><span id="l10.198" class="difflineplus">+LIBRARY			:= $(NULL)</span>
<a href="#l10.199"></a><span id="l10.199" class="difflineplus">+endif</span>
<a href="#l10.200"></a><span id="l10.200" class="difflineplus">+endif</span>
<a href="#l10.201"></a><span id="l10.201" class="difflineplus">+</span>
<a href="#l10.202"></a><span id="l10.202" class="difflineplus">+ifdef JAVA_LIBRARY_NAME</span>
<a href="#l10.203"></a><span id="l10.203" class="difflineplus">+JAVA_LIBRARY := $(JAVA_LIBRARY_NAME).jar</span>
<a href="#l10.204"></a><span id="l10.204" class="difflineplus">+endif</span>
<a href="#l10.205"></a><span id="l10.205" class="difflineplus">+</span>
<a href="#l10.206"></a><span id="l10.206" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.207"></a><span id="l10.207" class="difflineplus">+ifndef GNU_CC</span>
<a href="#l10.208"></a><span id="l10.208" class="difflineplus">+</span>
<a href="#l10.209"></a><span id="l10.209" class="difflineplus">+# Previously when possible we wrote to $LIBRARY_NAME.pdb.  This broke parallel</span>
<a href="#l10.210"></a><span id="l10.210" class="difflineplus">+# make builds on Windows.  Now we just write to a pdb file per compiled file.</span>
<a href="#l10.211"></a><span id="l10.211" class="difflineplus">+# See bug 286179 &lt;https://bugzilla.mozilla.org/show_bug.cgi?id=286179&gt; for</span>
<a href="#l10.212"></a><span id="l10.212" class="difflineplus">+# details. -- chase@mozilla.org</span>
<a href="#l10.213"></a><span id="l10.213" class="difflineplus">+#</span>
<a href="#l10.214"></a><span id="l10.214" class="difflineplus">+# Changes to the PDBFILE naming scheme should also be reflected in HOST_PDBFILE</span>
<a href="#l10.215"></a><span id="l10.215" class="difflineplus">+# </span>
<a href="#l10.216"></a><span id="l10.216" class="difflineplus">+ifdef LIBRARY_NAME</span>
<a href="#l10.217"></a><span id="l10.217" class="difflineplus">+PDBFILE=$(LIBRARY_NAME).pdb</span>
<a href="#l10.218"></a><span id="l10.218" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l10.219"></a><span id="l10.219" class="difflineplus">+CODFILE=$(LIBRARY_NAME).cod</span>
<a href="#l10.220"></a><span id="l10.220" class="difflineplus">+endif</span>
<a href="#l10.221"></a><span id="l10.221" class="difflineplus">+else</span>
<a href="#l10.222"></a><span id="l10.222" class="difflineplus">+PDBFILE=$(basename $(@F)).pdb</span>
<a href="#l10.223"></a><span id="l10.223" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l10.224"></a><span id="l10.224" class="difflineplus">+CODFILE=$(basename $(@F)).cod</span>
<a href="#l10.225"></a><span id="l10.225" class="difflineplus">+endif</span>
<a href="#l10.226"></a><span id="l10.226" class="difflineplus">+endif # LIBRARY_NAME</span>
<a href="#l10.227"></a><span id="l10.227" class="difflineplus">+</span>
<a href="#l10.228"></a><span id="l10.228" class="difflineplus">+ifdef MOZ_MAPINFO</span>
<a href="#l10.229"></a><span id="l10.229" class="difflineplus">+ifdef LIBRARY_NAME</span>
<a href="#l10.230"></a><span id="l10.230" class="difflineplus">+MAPFILE=$(LIBRARY_NAME).map</span>
<a href="#l10.231"></a><span id="l10.231" class="difflineplus">+else</span>
<a href="#l10.232"></a><span id="l10.232" class="difflineplus">+MAPFILE=$(basename $(@F)).map</span>
<a href="#l10.233"></a><span id="l10.233" class="difflineplus">+endif # LIBRARY_NAME</span>
<a href="#l10.234"></a><span id="l10.234" class="difflineplus">+endif # MOZ_MAPINFO</span>
<a href="#l10.235"></a><span id="l10.235" class="difflineplus">+</span>
<a href="#l10.236"></a><span id="l10.236" class="difflineplus">+ifdef DEFFILE</span>
<a href="#l10.237"></a><span id="l10.237" class="difflineplus">+OS_LDFLAGS += -DEF:$(DEFFILE)</span>
<a href="#l10.238"></a><span id="l10.238" class="difflineplus">+EXTRA_DEPS += $(DEFFILE)</span>
<a href="#l10.239"></a><span id="l10.239" class="difflineplus">+endif</span>
<a href="#l10.240"></a><span id="l10.240" class="difflineplus">+</span>
<a href="#l10.241"></a><span id="l10.241" class="difflineplus">+ifdef MAPFILE</span>
<a href="#l10.242"></a><span id="l10.242" class="difflineplus">+OS_LDFLAGS += -MAP:$(MAPFILE)</span>
<a href="#l10.243"></a><span id="l10.243" class="difflineplus">+#CFLAGS += -Fm$(MAPFILE)</span>
<a href="#l10.244"></a><span id="l10.244" class="difflineplus">+#CXXFLAGS += -Fm$(MAPFILE)</span>
<a href="#l10.245"></a><span id="l10.245" class="difflineplus">+endif</span>
<a href="#l10.246"></a><span id="l10.246" class="difflineplus">+</span>
<a href="#l10.247"></a><span id="l10.247" class="difflineplus">+#ifdef CODFILE</span>
<a href="#l10.248"></a><span id="l10.248" class="difflineplus">+#CFLAGS += -Fa$(CODFILE) -FAsc</span>
<a href="#l10.249"></a><span id="l10.249" class="difflineplus">+#CFLAGS += -Fa$(CODFILE) -FAsc</span>
<a href="#l10.250"></a><span id="l10.250" class="difflineplus">+#endif</span>
<a href="#l10.251"></a><span id="l10.251" class="difflineplus">+</span>
<a href="#l10.252"></a><span id="l10.252" class="difflineplus">+endif # !GNU_CC</span>
<a href="#l10.253"></a><span id="l10.253" class="difflineplus">+</span>
<a href="#l10.254"></a><span id="l10.254" class="difflineplus">+ifdef ENABLE_CXX_EXCEPTIONS</span>
<a href="#l10.255"></a><span id="l10.255" class="difflineplus">+ifdef GNU_CC</span>
<a href="#l10.256"></a><span id="l10.256" class="difflineplus">+CXXFLAGS		+= -fexceptions</span>
<a href="#l10.257"></a><span id="l10.257" class="difflineplus">+else</span>
<a href="#l10.258"></a><span id="l10.258" class="difflineplus">+ifeq (,$(filter-out 1200 1300 1310,$(_MSC_VER)))</span>
<a href="#l10.259"></a><span id="l10.259" class="difflineplus">+CXXFLAGS		+= -GX</span>
<a href="#l10.260"></a><span id="l10.260" class="difflineplus">+else</span>
<a href="#l10.261"></a><span id="l10.261" class="difflineplus">+CXXFLAGS		+= -EHsc</span>
<a href="#l10.262"></a><span id="l10.262" class="difflineplus">+endif # _MSC_VER</span>
<a href="#l10.263"></a><span id="l10.263" class="difflineplus">+endif # GNU_CC</span>
<a href="#l10.264"></a><span id="l10.264" class="difflineplus">+endif # ENABLE_CXX_EXCEPTIONS</span>
<a href="#l10.265"></a><span id="l10.265" class="difflineplus">+endif # WINNT</span>
<a href="#l10.266"></a><span id="l10.266" class="difflineplus">+</span>
<a href="#l10.267"></a><span id="l10.267" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE,$(HOST_OS_ARCH)))</span>
<a href="#l10.268"></a><span id="l10.268" class="difflineplus">+HOST_PDBFILE=$(basename $(@F)).pdb</span>
<a href="#l10.269"></a><span id="l10.269" class="difflineplus">+endif</span>
<a href="#l10.270"></a><span id="l10.270" class="difflineplus">+</span>
<a href="#l10.271"></a><span id="l10.271" class="difflineplus">+ifndef TARGETS</span>
<a href="#l10.272"></a><span id="l10.272" class="difflineplus">+TARGETS			= $(LIBRARY) $(SHARED_LIBRARY) $(PROGRAM) $(SIMPLE_PROGRAMS) $(HOST_LIBRARY) $(HOST_PROGRAM) $(HOST_SIMPLE_PROGRAMS) $(JAVA_LIBRARY)</span>
<a href="#l10.273"></a><span id="l10.273" class="difflineplus">+endif</span>
<a href="#l10.274"></a><span id="l10.274" class="difflineplus">+</span>
<a href="#l10.275"></a><span id="l10.275" class="difflineplus">+ifndef OBJS</span>
<a href="#l10.276"></a><span id="l10.276" class="difflineplus">+_OBJS			= \</span>
<a href="#l10.277"></a><span id="l10.277" class="difflineplus">+	$(JRI_STUB_CFILES) \</span>
<a href="#l10.278"></a><span id="l10.278" class="difflineplus">+	$(addsuffix .$(OBJ_SUFFIX), $(JMC_GEN)) \</span>
<a href="#l10.279"></a><span id="l10.279" class="difflineplus">+	$(CSRCS:.c=.$(OBJ_SUFFIX)) \</span>
<a href="#l10.280"></a><span id="l10.280" class="difflineplus">+	$(patsubst %.cc,%.$(OBJ_SUFFIX),$(CPPSRCS:.cpp=.$(OBJ_SUFFIX))) \</span>
<a href="#l10.281"></a><span id="l10.281" class="difflineplus">+	$(CMSRCS:.m=.$(OBJ_SUFFIX)) \</span>
<a href="#l10.282"></a><span id="l10.282" class="difflineplus">+	$(CMMSRCS:.mm=.$(OBJ_SUFFIX)) \</span>
<a href="#l10.283"></a><span id="l10.283" class="difflineplus">+	$(ASFILES:.$(ASM_SUFFIX)=.$(OBJ_SUFFIX))</span>
<a href="#l10.284"></a><span id="l10.284" class="difflineplus">+OBJS	= $(strip $(_OBJS))</span>
<a href="#l10.285"></a><span id="l10.285" class="difflineplus">+endif</span>
<a href="#l10.286"></a><span id="l10.286" class="difflineplus">+</span>
<a href="#l10.287"></a><span id="l10.287" class="difflineplus">+ifndef HOST_OBJS</span>
<a href="#l10.288"></a><span id="l10.288" class="difflineplus">+_HOST_OBJS		= \</span>
<a href="#l10.289"></a><span id="l10.289" class="difflineplus">+        $(addprefix host_,$(HOST_CSRCS:.c=.$(OBJ_SUFFIX))) \</span>
<a href="#l10.290"></a><span id="l10.290" class="difflineplus">+	$(addprefix host_,$(patsubst %.cc,%.$(OBJ_SUFFIX),$(HOST_CPPSRCS:.cpp=.$(OBJ_SUFFIX)))) \</span>
<a href="#l10.291"></a><span id="l10.291" class="difflineplus">+	$(addprefix host_,$(HOST_CMSRCS:.m=.$(OBJ_SUFFIX))) \</span>
<a href="#l10.292"></a><span id="l10.292" class="difflineplus">+	$(addprefix host_,$(HOST_CMMSRCS:.mm=.$(OBJ_SUFFIX)))</span>
<a href="#l10.293"></a><span id="l10.293" class="difflineplus">+HOST_OBJS = $(strip $(_HOST_OBJS))</span>
<a href="#l10.294"></a><span id="l10.294" class="difflineplus">+endif</span>
<a href="#l10.295"></a><span id="l10.295" class="difflineplus">+</span>
<a href="#l10.296"></a><span id="l10.296" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.297"></a><span id="l10.297" class="difflineplus">+LIBOBJS			:= $(OBJS)</span>
<a href="#l10.298"></a><span id="l10.298" class="difflineplus">+else</span>
<a href="#l10.299"></a><span id="l10.299" class="difflineplus">+LIBOBJS			:= $(addprefix \&quot;, $(OBJS))</span>
<a href="#l10.300"></a><span id="l10.300" class="difflineplus">+LIBOBJS			:= $(addsuffix \&quot;, $(LIBOBJS))</span>
<a href="#l10.301"></a><span id="l10.301" class="difflineplus">+endif</span>
<a href="#l10.302"></a><span id="l10.302" class="difflineplus">+</span>
<a href="#l10.303"></a><span id="l10.303" class="difflineplus">+ifndef MOZ_AUTO_DEPS</span>
<a href="#l10.304"></a><span id="l10.304" class="difflineplus">+ifneq (,$(OBJS)$(XPIDLSRCS)$(SDK_XPIDLSRCS)$(SIMPLE_PROGRAMS))</span>
<a href="#l10.305"></a><span id="l10.305" class="difflineplus">+MDDEPFILES		= $(addprefix $(MDDEPDIR)/,$(OBJS:.$(OBJ_SUFFIX)=.pp))</span>
<a href="#l10.306"></a><span id="l10.306" class="difflineplus">+ifndef NO_GEN_XPT</span>
<a href="#l10.307"></a><span id="l10.307" class="difflineplus">+MDDEPFILES		+= $(addprefix $(MDDEPDIR)/,$(XPIDLSRCS:.idl=.xpt)) \</span>
<a href="#l10.308"></a><span id="l10.308" class="difflineplus">+			   $(addprefix $(MDDEPDIR)/,$(SDK_XPIDLSRCS:.idl=.xpt))</span>
<a href="#l10.309"></a><span id="l10.309" class="difflineplus">+endif</span>
<a href="#l10.310"></a><span id="l10.310" class="difflineplus">+endif</span>
<a href="#l10.311"></a><span id="l10.311" class="difflineplus">+endif</span>
<a href="#l10.312"></a><span id="l10.312" class="difflineplus">+</span>
<a href="#l10.313"></a><span id="l10.313" class="difflineplus">+ALL_TRASH = \</span>
<a href="#l10.314"></a><span id="l10.314" class="difflineplus">+	$(GARBAGE) $(TARGETS) $(OBJS) $(PROGOBJS) LOGS TAGS a.out \</span>
<a href="#l10.315"></a><span id="l10.315" class="difflineplus">+	$(OBJS:.$(OBJ_SUFFIX)=.s) $(OBJS:.$(OBJ_SUFFIX)=.ii) \</span>
<a href="#l10.316"></a><span id="l10.316" class="difflineplus">+	$(OBJS:.$(OBJ_SUFFIX)=.i) \</span>
<a href="#l10.317"></a><span id="l10.317" class="difflineplus">+	$(HOST_PROGOBJS) $(HOST_OBJS) $(IMPORT_LIBRARY) $(DEF_FILE)\</span>
<a href="#l10.318"></a><span id="l10.318" class="difflineplus">+	$(EXE_DEF_FILE) so_locations _gen _stubs $(wildcard *.res) $(wildcard *.RES) \</span>
<a href="#l10.319"></a><span id="l10.319" class="difflineplus">+	$(wildcard *.pdb) $(CODFILE) $(MAPFILE) $(IMPORT_LIBRARY) \</span>
<a href="#l10.320"></a><span id="l10.320" class="difflineplus">+	$(SHARED_LIBRARY:$(DLL_SUFFIX)=.exp) $(wildcard *.ilk) \</span>
<a href="#l10.321"></a><span id="l10.321" class="difflineplus">+	$(PROGRAM:$(BIN_SUFFIX)=.exp) $(SIMPLE_PROGRAMS:$(BIN_SUFFIX)=.exp) \</span>
<a href="#l10.322"></a><span id="l10.322" class="difflineplus">+	$(PROGRAM:$(BIN_SUFFIX)=.lib) $(SIMPLE_PROGRAMS:$(BIN_SUFFIX)=.lib) \</span>
<a href="#l10.323"></a><span id="l10.323" class="difflineplus">+	$(SIMPLE_PROGRAMS:$(BIN_SUFFIX)=.$(OBJ_SUFFIX)) \</span>
<a href="#l10.324"></a><span id="l10.324" class="difflineplus">+	$(wildcard gts_tmp_*) $(LIBRARY:%.a=.%.timestamp)</span>
<a href="#l10.325"></a><span id="l10.325" class="difflineplus">+ALL_TRASH_DIRS = \</span>
<a href="#l10.326"></a><span id="l10.326" class="difflineplus">+	$(GARBAGE_DIRS) /no-such-file</span>
<a href="#l10.327"></a><span id="l10.327" class="difflineplus">+</span>
<a href="#l10.328"></a><span id="l10.328" class="difflineplus">+ifdef SIMPLE_PROGRAMS</span>
<a href="#l10.329"></a><span id="l10.329" class="difflineplus">+GARBAGE			+= $(SIMPLE_PROGRAMS:%=%.$(OBJ_SUFFIX))</span>
<a href="#l10.330"></a><span id="l10.330" class="difflineplus">+endif</span>
<a href="#l10.331"></a><span id="l10.331" class="difflineplus">+</span>
<a href="#l10.332"></a><span id="l10.332" class="difflineplus">+ifdef HOST_SIMPLE_PROGRAMS</span>
<a href="#l10.333"></a><span id="l10.333" class="difflineplus">+GARBAGE			+= $(HOST_SIMPLE_PROGRAMS:%=%.$(OBJ_SUFFIX))</span>
<a href="#l10.334"></a><span id="l10.334" class="difflineplus">+endif</span>
<a href="#l10.335"></a><span id="l10.335" class="difflineplus">+</span>
<a href="#l10.336"></a><span id="l10.336" class="difflineplus">+#</span>
<a href="#l10.337"></a><span id="l10.337" class="difflineplus">+# the Solaris WorkShop template repository cache.  it occasionally can get</span>
<a href="#l10.338"></a><span id="l10.338" class="difflineplus">+# out of sync, so targets like clobber should kill it.</span>
<a href="#l10.339"></a><span id="l10.339" class="difflineplus">+#</span>
<a href="#l10.340"></a><span id="l10.340" class="difflineplus">+ifeq ($(OS_ARCH),SunOS)</span>
<a href="#l10.341"></a><span id="l10.341" class="difflineplus">+ifeq ($(GNU_CXX),)</span>
<a href="#l10.342"></a><span id="l10.342" class="difflineplus">+GARBAGE_DIRS += SunWS_cache</span>
<a href="#l10.343"></a><span id="l10.343" class="difflineplus">+endif</span>
<a href="#l10.344"></a><span id="l10.344" class="difflineplus">+endif</span>
<a href="#l10.345"></a><span id="l10.345" class="difflineplus">+</span>
<a href="#l10.346"></a><span id="l10.346" class="difflineplus">+ifeq ($(OS_ARCH),OpenVMS)</span>
<a href="#l10.347"></a><span id="l10.347" class="difflineplus">+GARBAGE			+= $(wildcard *.*_defines)</span>
<a href="#l10.348"></a><span id="l10.348" class="difflineplus">+ifdef SHARED_LIBRARY</span>
<a href="#l10.349"></a><span id="l10.349" class="difflineplus">+VMS_SYMVEC_FILE		= $(SHARED_LIBRARY:$(DLL_SUFFIX)=_symvec.opt)</span>
<a href="#l10.350"></a><span id="l10.350" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l10.351"></a><span id="l10.351" class="difflineplus">+VMS_SYMVEC_FILE_MODULE	= $(MOZILLA_SRCDIR)/build/unix/vms/$(notdir $(SHARED_LIBRARY:$(DLL_SUFFIX)=_dbg_symvec.opt))</span>
<a href="#l10.352"></a><span id="l10.352" class="difflineplus">+else</span>
<a href="#l10.353"></a><span id="l10.353" class="difflineplus">+VMS_SYMVEC_FILE_MODULE	= $(MOZILLA_SRCDIR)/build/unix/vms/$(notdir $(SHARED_LIBRARY:$(DLL_SUFFIX)=_symvec.opt))</span>
<a href="#l10.354"></a><span id="l10.354" class="difflineplus">+endif</span>
<a href="#l10.355"></a><span id="l10.355" class="difflineplus">+VMS_SYMVEC_FILE_COMP	= $(MOZILLA_SRCDIR)/build/unix/vms/component_symvec.opt</span>
<a href="#l10.356"></a><span id="l10.356" class="difflineplus">+GARBAGE			+= $(VMS_SYMVEC_FILE)</span>
<a href="#l10.357"></a><span id="l10.357" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.358"></a><span id="l10.358" class="difflineplus">+DSO_LDOPTS := $(filter-out -auto_symvec,$(DSO_LDOPTS)) $(VMS_SYMVEC_FILE)</span>
<a href="#l10.359"></a><span id="l10.359" class="difflineplus">+endif</span>
<a href="#l10.360"></a><span id="l10.360" class="difflineplus">+endif</span>
<a href="#l10.361"></a><span id="l10.361" class="difflineplus">+endif</span>
<a href="#l10.362"></a><span id="l10.362" class="difflineplus">+</span>
<a href="#l10.363"></a><span id="l10.363" class="difflineplus">+XPIDL_GEN_DIR		= _xpidlgen</span>
<a href="#l10.364"></a><span id="l10.364" class="difflineplus">+</span>
<a href="#l10.365"></a><span id="l10.365" class="difflineplus">+ifdef MOZ_UPDATE_XTERM</span>
<a href="#l10.366"></a><span id="l10.366" class="difflineplus">+# Its good not to have a newline at the end of the titlebar string because it</span>
<a href="#l10.367"></a><span id="l10.367" class="difflineplus">+# makes the make -s output easier to read.  Echo -n does not work on all</span>
<a href="#l10.368"></a><span id="l10.368" class="difflineplus">+# platforms, but we can trick sed into doing it.</span>
<a href="#l10.369"></a><span id="l10.369" class="difflineplus">+UPDATE_TITLE = sed -e &quot;s!Y!$@ in $(shell $(BUILD_TOOLS)/print-depth-path.sh)/$(dir)!&quot; $(MOZILLA_DIR)/config/xterm.str;</span>
<a href="#l10.370"></a><span id="l10.370" class="difflineplus">+endif</span>
<a href="#l10.371"></a><span id="l10.371" class="difflineplus">+</span>
<a href="#l10.372"></a><span id="l10.372" class="difflineplus">+LOOP_OVER_DIRS = \</span>
<a href="#l10.373"></a><span id="l10.373" class="difflineplus">+    @$(EXIT_ON_ERROR) \</span>
<a href="#l10.374"></a><span id="l10.374" class="difflineplus">+    $(foreach dir,$(DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; ) true</span>
<a href="#l10.375"></a><span id="l10.375" class="difflineplus">+</span>
<a href="#l10.376"></a><span id="l10.376" class="difflineplus">+LOOP_OVER_STATIC_DIRS = \</span>
<a href="#l10.377"></a><span id="l10.377" class="difflineplus">+    @$(EXIT_ON_ERROR) \</span>
<a href="#l10.378"></a><span id="l10.378" class="difflineplus">+    $(foreach dir,$(STATIC_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; ) true</span>
<a href="#l10.379"></a><span id="l10.379" class="difflineplus">+</span>
<a href="#l10.380"></a><span id="l10.380" class="difflineplus">+LOOP_OVER_TOOL_DIRS = \</span>
<a href="#l10.381"></a><span id="l10.381" class="difflineplus">+    @$(EXIT_ON_ERROR) \</span>
<a href="#l10.382"></a><span id="l10.382" class="difflineplus">+    $(foreach dir,$(TOOL_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) $@; ) true</span>
<a href="#l10.383"></a><span id="l10.383" class="difflineplus">+</span>
<a href="#l10.384"></a><span id="l10.384" class="difflineplus">+#</span>
<a href="#l10.385"></a><span id="l10.385" class="difflineplus">+# Now we can differentiate between objects used to build a library, and</span>
<a href="#l10.386"></a><span id="l10.386" class="difflineplus">+# objects used to build an executable in the same directory.</span>
<a href="#l10.387"></a><span id="l10.387" class="difflineplus">+#</span>
<a href="#l10.388"></a><span id="l10.388" class="difflineplus">+ifndef PROGOBJS</span>
<a href="#l10.389"></a><span id="l10.389" class="difflineplus">+PROGOBJS		= $(OBJS)</span>
<a href="#l10.390"></a><span id="l10.390" class="difflineplus">+endif</span>
<a href="#l10.391"></a><span id="l10.391" class="difflineplus">+</span>
<a href="#l10.392"></a><span id="l10.392" class="difflineplus">+ifndef HOST_PROGOBJS</span>
<a href="#l10.393"></a><span id="l10.393" class="difflineplus">+HOST_PROGOBJS		= $(HOST_OBJS)</span>
<a href="#l10.394"></a><span id="l10.394" class="difflineplus">+endif</span>
<a href="#l10.395"></a><span id="l10.395" class="difflineplus">+</span>
<a href="#l10.396"></a><span id="l10.396" class="difflineplus">+# MAKE_DIRS: List of directories to build while looping over directories.</span>
<a href="#l10.397"></a><span id="l10.397" class="difflineplus">+ifneq (,$(OBJS)$(XPIDLSRCS)$(SDK_XPIDLSRCS)$(SIMPLE_PROGRAMS))</span>
<a href="#l10.398"></a><span id="l10.398" class="difflineplus">+MAKE_DIRS		+= $(MDDEPDIR)</span>
<a href="#l10.399"></a><span id="l10.399" class="difflineplus">+GARBAGE_DIRS		+= $(MDDEPDIR)</span>
<a href="#l10.400"></a><span id="l10.400" class="difflineplus">+endif</span>
<a href="#l10.401"></a><span id="l10.401" class="difflineplus">+</span>
<a href="#l10.402"></a><span id="l10.402" class="difflineplus">+#</span>
<a href="#l10.403"></a><span id="l10.403" class="difflineplus">+# Tags: emacs (etags), vi (ctags)</span>
<a href="#l10.404"></a><span id="l10.404" class="difflineplus">+# TAG_PROGRAM := ctags -L -</span>
<a href="#l10.405"></a><span id="l10.405" class="difflineplus">+#</span>
<a href="#l10.406"></a><span id="l10.406" class="difflineplus">+TAG_PROGRAM		= xargs etags -a</span>
<a href="#l10.407"></a><span id="l10.407" class="difflineplus">+</span>
<a href="#l10.408"></a><span id="l10.408" class="difflineplus">+#</span>
<a href="#l10.409"></a><span id="l10.409" class="difflineplus">+# Turn on C++ linking if we have any .cpp or .mm files</span>
<a href="#l10.410"></a><span id="l10.410" class="difflineplus">+# (moved this from config.mk so that config.mk can be included </span>
<a href="#l10.411"></a><span id="l10.411" class="difflineplus">+#  before the CPPSRCS are defined)</span>
<a href="#l10.412"></a><span id="l10.412" class="difflineplus">+#</span>
<a href="#l10.413"></a><span id="l10.413" class="difflineplus">+ifneq ($(CPPSRCS)$(CMMSRCS),)</span>
<a href="#l10.414"></a><span id="l10.414" class="difflineplus">+CPP_PROG_LINK		= 1</span>
<a href="#l10.415"></a><span id="l10.415" class="difflineplus">+endif</span>
<a href="#l10.416"></a><span id="l10.416" class="difflineplus">+</span>
<a href="#l10.417"></a><span id="l10.417" class="difflineplus">+#</span>
<a href="#l10.418"></a><span id="l10.418" class="difflineplus">+# Make sure to wrap static libs inside linker specific flags to turn on &amp; off</span>
<a href="#l10.419"></a><span id="l10.419" class="difflineplus">+# inclusion of all symbols inside the static libs</span>
<a href="#l10.420"></a><span id="l10.420" class="difflineplus">+#</span>
<a href="#l10.421"></a><span id="l10.421" class="difflineplus">+ifndef NO_LD_ARCHIVE_FLAGS</span>
<a href="#l10.422"></a><span id="l10.422" class="difflineplus">+ifdef SHARED_LIBRARY_LIBS</span>
<a href="#l10.423"></a><span id="l10.423" class="difflineplus">+EXTRA_DSO_LDOPTS := $(MKSHLIB_FORCE_ALL) $(SHARED_LIBRARY_LIBS) $(MKSHLIB_UNFORCE_ALL) $(EXTRA_DSO_LDOPTS)</span>
<a href="#l10.424"></a><span id="l10.424" class="difflineplus">+endif</span>
<a href="#l10.425"></a><span id="l10.425" class="difflineplus">+endif</span>
<a href="#l10.426"></a><span id="l10.426" class="difflineplus">+</span>
<a href="#l10.427"></a><span id="l10.427" class="difflineplus">+#</span>
<a href="#l10.428"></a><span id="l10.428" class="difflineplus">+# This will strip out symbols that the component should not be </span>
<a href="#l10.429"></a><span id="l10.429" class="difflineplus">+# exporting from the .dynsym section.</span>
<a href="#l10.430"></a><span id="l10.430" class="difflineplus">+#</span>
<a href="#l10.431"></a><span id="l10.431" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.432"></a><span id="l10.432" class="difflineplus">+EXTRA_DSO_LDOPTS += $(MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS)</span>
<a href="#l10.433"></a><span id="l10.433" class="difflineplus">+endif # IS_COMPONENT</span>
<a href="#l10.434"></a><span id="l10.434" class="difflineplus">+</span>
<a href="#l10.435"></a><span id="l10.435" class="difflineplus">+#</span>
<a href="#l10.436"></a><span id="l10.436" class="difflineplus">+# Enforce the requirement that MODULE_NAME must be set </span>
<a href="#l10.437"></a><span id="l10.437" class="difflineplus">+# for components in static builds</span>
<a href="#l10.438"></a><span id="l10.438" class="difflineplus">+#</span>
<a href="#l10.439"></a><span id="l10.439" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.440"></a><span id="l10.440" class="difflineplus">+ifdef EXPORT_LIBRARY</span>
<a href="#l10.441"></a><span id="l10.441" class="difflineplus">+ifndef FORCE_SHARED_LIB</span>
<a href="#l10.442"></a><span id="l10.442" class="difflineplus">+ifndef MODULE_NAME</span>
<a href="#l10.443"></a><span id="l10.443" class="difflineplus">+$(error MODULE_NAME is required for components which may be used in static builds)</span>
<a href="#l10.444"></a><span id="l10.444" class="difflineplus">+endif</span>
<a href="#l10.445"></a><span id="l10.445" class="difflineplus">+endif</span>
<a href="#l10.446"></a><span id="l10.446" class="difflineplus">+endif</span>
<a href="#l10.447"></a><span id="l10.447" class="difflineplus">+endif</span>
<a href="#l10.448"></a><span id="l10.448" class="difflineplus">+</span>
<a href="#l10.449"></a><span id="l10.449" class="difflineplus">+#</span>
<a href="#l10.450"></a><span id="l10.450" class="difflineplus">+# MacOS X specific stuff</span>
<a href="#l10.451"></a><span id="l10.451" class="difflineplus">+#</span>
<a href="#l10.452"></a><span id="l10.452" class="difflineplus">+</span>
<a href="#l10.453"></a><span id="l10.453" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l10.454"></a><span id="l10.454" class="difflineplus">+ifdef SHARED_LIBRARY</span>
<a href="#l10.455"></a><span id="l10.455" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.456"></a><span id="l10.456" class="difflineplus">+EXTRA_DSO_LDOPTS	+= -bundle</span>
<a href="#l10.457"></a><span id="l10.457" class="difflineplus">+else</span>
<a href="#l10.458"></a><span id="l10.458" class="difflineplus">+EXTRA_DSO_LDOPTS	+= -dynamiclib -install_name @executable_path/$(SHARED_LIBRARY) -compatibility_version 1 -current_version 1 -single_module</span>
<a href="#l10.459"></a><span id="l10.459" class="difflineplus">+endif</span>
<a href="#l10.460"></a><span id="l10.460" class="difflineplus">+endif</span>
<a href="#l10.461"></a><span id="l10.461" class="difflineplus">+endif</span>
<a href="#l10.462"></a><span id="l10.462" class="difflineplus">+</span>
<a href="#l10.463"></a><span id="l10.463" class="difflineplus">+#</span>
<a href="#l10.464"></a><span id="l10.464" class="difflineplus">+# On NetBSD a.out systems, use -Bsymbolic.  This fixes what would otherwise be</span>
<a href="#l10.465"></a><span id="l10.465" class="difflineplus">+# fatal symbol name clashes between components.</span>
<a href="#l10.466"></a><span id="l10.466" class="difflineplus">+#</span>
<a href="#l10.467"></a><span id="l10.467" class="difflineplus">+ifeq ($(OS_ARCH),NetBSD)</span>
<a href="#l10.468"></a><span id="l10.468" class="difflineplus">+ifeq ($(DLL_SUFFIX),.so.1.0)</span>
<a href="#l10.469"></a><span id="l10.469" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.470"></a><span id="l10.470" class="difflineplus">+EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l10.471"></a><span id="l10.471" class="difflineplus">+endif</span>
<a href="#l10.472"></a><span id="l10.472" class="difflineplus">+endif</span>
<a href="#l10.473"></a><span id="l10.473" class="difflineplus">+endif</span>
<a href="#l10.474"></a><span id="l10.474" class="difflineplus">+</span>
<a href="#l10.475"></a><span id="l10.475" class="difflineplus">+ifeq ($(OS_ARCH),FreeBSD)</span>
<a href="#l10.476"></a><span id="l10.476" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.477"></a><span id="l10.477" class="difflineplus">+EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l10.478"></a><span id="l10.478" class="difflineplus">+endif</span>
<a href="#l10.479"></a><span id="l10.479" class="difflineplus">+endif</span>
<a href="#l10.480"></a><span id="l10.480" class="difflineplus">+</span>
<a href="#l10.481"></a><span id="l10.481" class="difflineplus">+ifeq ($(OS_ARCH),NetBSD)</span>
<a href="#l10.482"></a><span id="l10.482" class="difflineplus">+ifneq (,$(filter arc cobalt hpcmips mipsco newsmips pmax sgimips,$(OS_TEST)))</span>
<a href="#l10.483"></a><span id="l10.483" class="difflineplus">+ifeq ($(MODULE),layout)</span>
<a href="#l10.484"></a><span id="l10.484" class="difflineplus">+OS_CFLAGS += -Wa,-xgot</span>
<a href="#l10.485"></a><span id="l10.485" class="difflineplus">+OS_CXXFLAGS += -Wa,-xgot</span>
<a href="#l10.486"></a><span id="l10.486" class="difflineplus">+endif</span>
<a href="#l10.487"></a><span id="l10.487" class="difflineplus">+endif</span>
<a href="#l10.488"></a><span id="l10.488" class="difflineplus">+endif</span>
<a href="#l10.489"></a><span id="l10.489" class="difflineplus">+</span>
<a href="#l10.490"></a><span id="l10.490" class="difflineplus">+ifeq ($(OS_ARCH),Linux)</span>
<a href="#l10.491"></a><span id="l10.491" class="difflineplus">+ifneq (,$(filter mips mipsel,$(OS_TEST)))</span>
<a href="#l10.492"></a><span id="l10.492" class="difflineplus">+ifeq ($(MODULE),layout)</span>
<a href="#l10.493"></a><span id="l10.493" class="difflineplus">+OS_CFLAGS += -Wa,-xgot</span>
<a href="#l10.494"></a><span id="l10.494" class="difflineplus">+OS_CXXFLAGS += -Wa,-xgot</span>
<a href="#l10.495"></a><span id="l10.495" class="difflineplus">+endif</span>
<a href="#l10.496"></a><span id="l10.496" class="difflineplus">+endif</span>
<a href="#l10.497"></a><span id="l10.497" class="difflineplus">+endif</span>
<a href="#l10.498"></a><span id="l10.498" class="difflineplus">+</span>
<a href="#l10.499"></a><span id="l10.499" class="difflineplus">+#</span>
<a href="#l10.500"></a><span id="l10.500" class="difflineplus">+# HP-UXBeOS specific section: for COMPONENTS only, add -Bsymbolic flag</span>
<a href="#l10.501"></a><span id="l10.501" class="difflineplus">+# which uses internal symbols first</span>
<a href="#l10.502"></a><span id="l10.502" class="difflineplus">+#</span>
<a href="#l10.503"></a><span id="l10.503" class="difflineplus">+ifeq ($(OS_ARCH),HP-UX)</span>
<a href="#l10.504"></a><span id="l10.504" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.505"></a><span id="l10.505" class="difflineplus">+ifeq ($(GNU_CC)$(GNU_CXX),)</span>
<a href="#l10.506"></a><span id="l10.506" class="difflineplus">+EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l10.507"></a><span id="l10.507" class="difflineplus">+ifneq ($(HAS_EXTRAEXPORTS),1)</span>
<a href="#l10.508"></a><span id="l10.508" class="difflineplus">+MKSHLIB  += -Wl,+eNSGetModule -Wl,+eerrno</span>
<a href="#l10.509"></a><span id="l10.509" class="difflineplus">+MKCSHLIB += +eNSGetModule +eerrno</span>
<a href="#l10.510"></a><span id="l10.510" class="difflineplus">+ifneq ($(OS_TEST),ia64)</span>
<a href="#l10.511"></a><span id="l10.511" class="difflineplus">+MKSHLIB  += -Wl,+e_shlInit</span>
<a href="#l10.512"></a><span id="l10.512" class="difflineplus">+MKCSHLIB += +e_shlInit</span>
<a href="#l10.513"></a><span id="l10.513" class="difflineplus">+endif # !ia64</span>
<a href="#l10.514"></a><span id="l10.514" class="difflineplus">+endif # !HAS_EXTRAEXPORTS</span>
<a href="#l10.515"></a><span id="l10.515" class="difflineplus">+endif # non-gnu compilers</span>
<a href="#l10.516"></a><span id="l10.516" class="difflineplus">+endif # IS_COMPONENT</span>
<a href="#l10.517"></a><span id="l10.517" class="difflineplus">+endif # HP-UX</span>
<a href="#l10.518"></a><span id="l10.518" class="difflineplus">+</span>
<a href="#l10.519"></a><span id="l10.519" class="difflineplus">+ifeq ($(OS_ARCH),AIX)</span>
<a href="#l10.520"></a><span id="l10.520" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.521"></a><span id="l10.521" class="difflineplus">+ifneq ($(HAS_EXTRAEXPORTS),1)</span>
<a href="#l10.522"></a><span id="l10.522" class="difflineplus">+MKSHLIB += -bE:$(MOZILLA_DIR)/build/unix/aix.exp -bnoexpall</span>
<a href="#l10.523"></a><span id="l10.523" class="difflineplus">+MKCSHLIB += -bE:$(MOZILLA_DIR)/build/unix/aix.exp -bnoexpall</span>
<a href="#l10.524"></a><span id="l10.524" class="difflineplus">+endif # HAS_EXTRAEXPORTS</span>
<a href="#l10.525"></a><span id="l10.525" class="difflineplus">+endif # IS_COMPONENT</span>
<a href="#l10.526"></a><span id="l10.526" class="difflineplus">+endif # AIX</span>
<a href="#l10.527"></a><span id="l10.527" class="difflineplus">+</span>
<a href="#l10.528"></a><span id="l10.528" class="difflineplus">+#</span>
<a href="#l10.529"></a><span id="l10.529" class="difflineplus">+# OSF1: add -B symbolic flag for components</span>
<a href="#l10.530"></a><span id="l10.530" class="difflineplus">+#</span>
<a href="#l10.531"></a><span id="l10.531" class="difflineplus">+ifeq ($(OS_ARCH),OSF1)</span>
<a href="#l10.532"></a><span id="l10.532" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.533"></a><span id="l10.533" class="difflineplus">+ifeq ($(GNU_CC)$(GNU_CXX),)</span>
<a href="#l10.534"></a><span id="l10.534" class="difflineplus">+EXTRA_DSO_LDOPTS += -B symbolic</span>
<a href="#l10.535"></a><span id="l10.535" class="difflineplus">+endif  </span>
<a href="#l10.536"></a><span id="l10.536" class="difflineplus">+endif  </span>
<a href="#l10.537"></a><span id="l10.537" class="difflineplus">+endif</span>
<a href="#l10.538"></a><span id="l10.538" class="difflineplus">+</span>
<a href="#l10.539"></a><span id="l10.539" class="difflineplus">+#</span>
<a href="#l10.540"></a><span id="l10.540" class="difflineplus">+# Linux: add -Bsymbolic flag for components</span>
<a href="#l10.541"></a><span id="l10.541" class="difflineplus">+# </span>
<a href="#l10.542"></a><span id="l10.542" class="difflineplus">+ifeq ($(OS_ARCH),Linux)</span>
<a href="#l10.543"></a><span id="l10.543" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.544"></a><span id="l10.544" class="difflineplus">+EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l10.545"></a><span id="l10.545" class="difflineplus">+endif</span>
<a href="#l10.546"></a><span id="l10.546" class="difflineplus">+endif </span>
<a href="#l10.547"></a><span id="l10.547" class="difflineplus">+</span>
<a href="#l10.548"></a><span id="l10.548" class="difflineplus">+#</span>
<a href="#l10.549"></a><span id="l10.549" class="difflineplus">+# MINGW32</span>
<a href="#l10.550"></a><span id="l10.550" class="difflineplus">+#</span>
<a href="#l10.551"></a><span id="l10.551" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l10.552"></a><span id="l10.552" class="difflineplus">+ifdef GNU_CC</span>
<a href="#l10.553"></a><span id="l10.553" class="difflineplus">+ifndef IS_COMPONENT</span>
<a href="#l10.554"></a><span id="l10.554" class="difflineplus">+DSO_LDOPTS += -Wl,--out-implib -Wl,$(IMPORT_LIBRARY)</span>
<a href="#l10.555"></a><span id="l10.555" class="difflineplus">+endif</span>
<a href="#l10.556"></a><span id="l10.556" class="difflineplus">+endif</span>
<a href="#l10.557"></a><span id="l10.557" class="difflineplus">+endif</span>
<a href="#l10.558"></a><span id="l10.558" class="difflineplus">+</span>
<a href="#l10.559"></a><span id="l10.559" class="difflineplus">+ifeq ($(USE_TVFS),1)</span>
<a href="#l10.560"></a><span id="l10.560" class="difflineplus">+IFLAGS1 = -rb</span>
<a href="#l10.561"></a><span id="l10.561" class="difflineplus">+IFLAGS2 = -rb</span>
<a href="#l10.562"></a><span id="l10.562" class="difflineplus">+else</span>
<a href="#l10.563"></a><span id="l10.563" class="difflineplus">+IFLAGS1 = -m 644</span>
<a href="#l10.564"></a><span id="l10.564" class="difflineplus">+IFLAGS2 = -m 755</span>
<a href="#l10.565"></a><span id="l10.565" class="difflineplus">+endif</span>
<a href="#l10.566"></a><span id="l10.566" class="difflineplus">+</span>
<a href="#l10.567"></a><span id="l10.567" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.568"></a><span id="l10.568" class="difflineplus">+OUTOPTION = -Fo# eol</span>
<a href="#l10.569"></a><span id="l10.569" class="difflineplus">+else</span>
<a href="#l10.570"></a><span id="l10.570" class="difflineplus">+ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l10.571"></a><span id="l10.571" class="difflineplus">+OUTOPTION = -Fo# eol</span>
<a href="#l10.572"></a><span id="l10.572" class="difflineplus">+else</span>
<a href="#l10.573"></a><span id="l10.573" class="difflineplus">+OUTOPTION = -o # eol</span>
<a href="#l10.574"></a><span id="l10.574" class="difflineplus">+endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l10.575"></a><span id="l10.575" class="difflineplus">+endif # VACPP</span>
<a href="#l10.576"></a><span id="l10.576" class="difflineplus">+ifneq (,$(filter WINCE,$(OS_ARCH)))</span>
<a href="#l10.577"></a><span id="l10.577" class="difflineplus">+OUTOPTION = -Fo# eol</span>
<a href="#l10.578"></a><span id="l10.578" class="difflineplus">+endif</span>
<a href="#l10.579"></a><span id="l10.579" class="difflineplus">+</span>
<a href="#l10.580"></a><span id="l10.580" class="difflineplus">+ifeq ($(OS_TARGET), WINCE)</span>
<a href="#l10.581"></a><span id="l10.581" class="difflineplus">+OUTOPTION = -Fo# eol</span>
<a href="#l10.582"></a><span id="l10.582" class="difflineplus">+HOST_OUTOPTION = -Fo# eol</span>
<a href="#l10.583"></a><span id="l10.583" class="difflineplus">+else</span>
<a href="#l10.584"></a><span id="l10.584" class="difflineplus">+</span>
<a href="#l10.585"></a><span id="l10.585" class="difflineplus">+ifeq (,$(CROSS_COMPILE))</span>
<a href="#l10.586"></a><span id="l10.586" class="difflineplus">+HOST_OUTOPTION = $(OUTOPTION)</span>
<a href="#l10.587"></a><span id="l10.587" class="difflineplus">+else</span>
<a href="#l10.588"></a><span id="l10.588" class="difflineplus">+HOST_OUTOPTION = -o # eol</span>
<a href="#l10.589"></a><span id="l10.589" class="difflineplus">+endif</span>
<a href="#l10.590"></a><span id="l10.590" class="difflineplus">+</span>
<a href="#l10.591"></a><span id="l10.591" class="difflineplus">+endif</span>
<a href="#l10.592"></a><span id="l10.592" class="difflineplus">+################################################################################</span>
<a href="#l10.593"></a><span id="l10.593" class="difflineplus">+</span>
<a href="#l10.594"></a><span id="l10.594" class="difflineplus">+# SUBMAKEFILES: List of Makefiles for next level down.</span>
<a href="#l10.595"></a><span id="l10.595" class="difflineplus">+#   This is used to update or create the Makefiles before invoking them.</span>
<a href="#l10.596"></a><span id="l10.596" class="difflineplus">+SUBMAKEFILES += $(addsuffix /Makefile, $(DIRS) $(TOOL_DIRS))</span>
<a href="#l10.597"></a><span id="l10.597" class="difflineplus">+</span>
<a href="#l10.598"></a><span id="l10.598" class="difflineplus">+# The root makefile doesn't want to do a plain export/libs, because</span>
<a href="#l10.599"></a><span id="l10.599" class="difflineplus">+# of the tiers and because of libxul. Suppress the default rules in favor</span>
<a href="#l10.600"></a><span id="l10.600" class="difflineplus">+# of something else. Makefiles which use this var *must* provide a sensible</span>
<a href="#l10.601"></a><span id="l10.601" class="difflineplus">+# default rule before including rules.mk</span>
<a href="#l10.602"></a><span id="l10.602" class="difflineplus">+ifndef SUPPRESS_DEFAULT_RULES</span>
<a href="#l10.603"></a><span id="l10.603" class="difflineplus">+ifdef TIERS</span>
<a href="#l10.604"></a><span id="l10.604" class="difflineplus">+</span>
<a href="#l10.605"></a><span id="l10.605" class="difflineplus">+DIRS += $(foreach tier,$(TIERS),$(tier_$(tier)_dirs))</span>
<a href="#l10.606"></a><span id="l10.606" class="difflineplus">+STATIC_DIRS += $(foreach tier,$(TIERS),$(tier_$(tier)_staticdirs))</span>
<a href="#l10.607"></a><span id="l10.607" class="difflineplus">+</span>
<a href="#l10.608"></a><span id="l10.608" class="difflineplus">+default all alldep::</span>
<a href="#l10.609"></a><span id="l10.609" class="difflineplus">+	$(EXIT_ON_ERROR) \</span>
<a href="#l10.610"></a><span id="l10.610" class="difflineplus">+	$(foreach tier,$(TIERS),$(MAKE) tier_$(tier); ) true</span>
<a href="#l10.611"></a><span id="l10.611" class="difflineplus">+</span>
<a href="#l10.612"></a><span id="l10.612" class="difflineplus">+else</span>
<a href="#l10.613"></a><span id="l10.613" class="difflineplus">+</span>
<a href="#l10.614"></a><span id="l10.614" class="difflineplus">+default all::</span>
<a href="#l10.615"></a><span id="l10.615" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.616"></a><span id="l10.616" class="difflineplus">+	$(foreach dir,$(STATIC_DIRS),$(MAKE) -C $(dir); ) true</span>
<a href="#l10.617"></a><span id="l10.617" class="difflineplus">+	$(MAKE) export</span>
<a href="#l10.618"></a><span id="l10.618" class="difflineplus">+	$(MAKE) libs</span>
<a href="#l10.619"></a><span id="l10.619" class="difflineplus">+	$(MAKE) tools</span>
<a href="#l10.620"></a><span id="l10.620" class="difflineplus">+</span>
<a href="#l10.621"></a><span id="l10.621" class="difflineplus">+# Do depend as well</span>
<a href="#l10.622"></a><span id="l10.622" class="difflineplus">+alldep:: </span>
<a href="#l10.623"></a><span id="l10.623" class="difflineplus">+	$(MAKE) export</span>
<a href="#l10.624"></a><span id="l10.624" class="difflineplus">+	$(MAKE) depend</span>
<a href="#l10.625"></a><span id="l10.625" class="difflineplus">+	$(MAKE) libs</span>
<a href="#l10.626"></a><span id="l10.626" class="difflineplus">+	$(MAKE) tools</span>
<a href="#l10.627"></a><span id="l10.627" class="difflineplus">+</span>
<a href="#l10.628"></a><span id="l10.628" class="difflineplus">+endif # TIERS</span>
<a href="#l10.629"></a><span id="l10.629" class="difflineplus">+endif # SUPPRESS_DEFAULT_RULES</span>
<a href="#l10.630"></a><span id="l10.630" class="difflineplus">+</span>
<a href="#l10.631"></a><span id="l10.631" class="difflineplus">+ifeq ($(filter s,$(MAKEFLAGS)),)</span>
<a href="#l10.632"></a><span id="l10.632" class="difflineplus">+ECHO := echo</span>
<a href="#l10.633"></a><span id="l10.633" class="difflineplus">+QUIET :=</span>
<a href="#l10.634"></a><span id="l10.634" class="difflineplus">+else</span>
<a href="#l10.635"></a><span id="l10.635" class="difflineplus">+ECHO := true</span>
<a href="#l10.636"></a><span id="l10.636" class="difflineplus">+QUIET := -q</span>
<a href="#l10.637"></a><span id="l10.637" class="difflineplus">+endif</span>
<a href="#l10.638"></a><span id="l10.638" class="difflineplus">+</span>
<a href="#l10.639"></a><span id="l10.639" class="difflineplus">+MAKE_TIER_SUBMAKEFILES = +$(if $(tier_$*_dirs),$(MAKE) $(addsuffix /Makefile,$(tier_$*_dirs)))</span>
<a href="#l10.640"></a><span id="l10.640" class="difflineplus">+</span>
<a href="#l10.641"></a><span id="l10.641" class="difflineplus">+export_tier_%: </span>
<a href="#l10.642"></a><span id="l10.642" class="difflineplus">+	@$(ECHO) &quot;$@&quot;</span>
<a href="#l10.643"></a><span id="l10.643" class="difflineplus">+	@$(MAKE_TIER_SUBMAKEFILES)</span>
<a href="#l10.644"></a><span id="l10.644" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.645"></a><span id="l10.645" class="difflineplus">+	$(foreach dir,$(tier_$*_dirs),$(MAKE) -C $(dir) export; ) true</span>
<a href="#l10.646"></a><span id="l10.646" class="difflineplus">+</span>
<a href="#l10.647"></a><span id="l10.647" class="difflineplus">+libs_tier_%:</span>
<a href="#l10.648"></a><span id="l10.648" class="difflineplus">+	@$(ECHO) &quot;$@&quot;</span>
<a href="#l10.649"></a><span id="l10.649" class="difflineplus">+	@$(MAKE_TIER_SUBMAKEFILES)</span>
<a href="#l10.650"></a><span id="l10.650" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.651"></a><span id="l10.651" class="difflineplus">+	$(foreach dir,$(tier_$*_dirs),$(MAKE) -C $(dir) libs; ) true</span>
<a href="#l10.652"></a><span id="l10.652" class="difflineplus">+</span>
<a href="#l10.653"></a><span id="l10.653" class="difflineplus">+tools_tier_%:</span>
<a href="#l10.654"></a><span id="l10.654" class="difflineplus">+	@$(ECHO) &quot;$@&quot;</span>
<a href="#l10.655"></a><span id="l10.655" class="difflineplus">+	@$(MAKE_TIER_SUBMAKEFILES)</span>
<a href="#l10.656"></a><span id="l10.656" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.657"></a><span id="l10.657" class="difflineplus">+	$(foreach dir,$(tier_$*_dirs),$(MAKE) -C $(dir) tools; ) true</span>
<a href="#l10.658"></a><span id="l10.658" class="difflineplus">+</span>
<a href="#l10.659"></a><span id="l10.659" class="difflineplus">+$(foreach tier,$(TIERS),tier_$(tier))::</span>
<a href="#l10.660"></a><span id="l10.660" class="difflineplus">+	@$(ECHO) &quot;$@: $($@_staticdirs) $($@_dirs)&quot;</span>
<a href="#l10.661"></a><span id="l10.661" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.662"></a><span id="l10.662" class="difflineplus">+	$(foreach dir,$($@_staticdirs),$(MAKE) -C $(dir); ) true</span>
<a href="#l10.663"></a><span id="l10.663" class="difflineplus">+	$(MAKE) export_$@</span>
<a href="#l10.664"></a><span id="l10.664" class="difflineplus">+	$(MAKE) libs_$@</span>
<a href="#l10.665"></a><span id="l10.665" class="difflineplus">+</span>
<a href="#l10.666"></a><span id="l10.666" class="difflineplus">+# Do everything from scratch</span>
<a href="#l10.667"></a><span id="l10.667" class="difflineplus">+everything::</span>
<a href="#l10.668"></a><span id="l10.668" class="difflineplus">+	$(MAKE) clean</span>
<a href="#l10.669"></a><span id="l10.669" class="difflineplus">+	$(MAKE) alldep</span>
<a href="#l10.670"></a><span id="l10.670" class="difflineplus">+</span>
<a href="#l10.671"></a><span id="l10.671" class="difflineplus">+# Add dummy depend target for tinderboxes</span>
<a href="#l10.672"></a><span id="l10.672" class="difflineplus">+depend::</span>
<a href="#l10.673"></a><span id="l10.673" class="difflineplus">+</span>
<a href="#l10.674"></a><span id="l10.674" class="difflineplus">+ifdef ALL_PLATFORMS</span>
<a href="#l10.675"></a><span id="l10.675" class="difflineplus">+all_platforms:: $(NFSPWD)</span>
<a href="#l10.676"></a><span id="l10.676" class="difflineplus">+	@d=`$(NFSPWD)`;							\</span>
<a href="#l10.677"></a><span id="l10.677" class="difflineplus">+	if test ! -d LOGS; then rm -rf LOGS; mkdir LOGS; else true; fi;	\</span>
<a href="#l10.678"></a><span id="l10.678" class="difflineplus">+	for h in $(PLATFORM_HOSTS); do					\</span>
<a href="#l10.679"></a><span id="l10.679" class="difflineplus">+		echo &quot;On $$h: $(MAKE) $(ALL_PLATFORMS) &gt;&amp; LOGS/$$h.log&quot;;\</span>
<a href="#l10.680"></a><span id="l10.680" class="difflineplus">+		rsh $$h -n &quot;(chdir $$d;					\</span>
<a href="#l10.681"></a><span id="l10.681" class="difflineplus">+			     $(MAKE) $(ALL_PLATFORMS) &gt;&amp; LOGS/$$h.log;	\</span>
<a href="#l10.682"></a><span id="l10.682" class="difflineplus">+			     echo DONE) &amp;&quot; 2&gt;&amp;1 &gt; LOGS/$$h.pid &amp;	\</span>
<a href="#l10.683"></a><span id="l10.683" class="difflineplus">+		sleep 1;						\</span>
<a href="#l10.684"></a><span id="l10.684" class="difflineplus">+	done</span>
<a href="#l10.685"></a><span id="l10.685" class="difflineplus">+</span>
<a href="#l10.686"></a><span id="l10.686" class="difflineplus">+$(NFSPWD):</span>
<a href="#l10.687"></a><span id="l10.687" class="difflineplus">+	cd $(@D); $(MAKE) $(@F)</span>
<a href="#l10.688"></a><span id="l10.688" class="difflineplus">+endif</span>
<a href="#l10.689"></a><span id="l10.689" class="difflineplus">+</span>
<a href="#l10.690"></a><span id="l10.690" class="difflineplus">+# Target to only regenerate makefiles</span>
<a href="#l10.691"></a><span id="l10.691" class="difflineplus">+makefiles: $(SUBMAKEFILES)</span>
<a href="#l10.692"></a><span id="l10.692" class="difflineplus">+ifneq (,$(DIRS)$(TOOL_DIRS))</span>
<a href="#l10.693"></a><span id="l10.693" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.694"></a><span id="l10.694" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.695"></a><span id="l10.695" class="difflineplus">+endif</span>
<a href="#l10.696"></a><span id="l10.696" class="difflineplus">+</span>
<a href="#l10.697"></a><span id="l10.697" class="difflineplus">+export:: $(SUBMAKEFILES) $(MAKE_DIRS) $(if $(EXPORTS)$(XPIDLSRCS)$(SDK_HEADERS)$(SDK_XPIDLSRCS),$(PUBLIC)) $(if $(SDK_HEADERS)$(SDK_XPIDLSRCS),$(SDK_PUBLIC)) $(if $(XPIDLSRCS),$(IDL_DIR)) $(if $(SDK_XPIDLSRCS),$(SDK_IDL_DIR))</span>
<a href="#l10.698"></a><span id="l10.698" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.699"></a><span id="l10.699" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.700"></a><span id="l10.700" class="difflineplus">+</span>
<a href="#l10.701"></a><span id="l10.701" class="difflineplus">+tools:: $(SUBMAKEFILES) $(MAKE_DIRS)</span>
<a href="#l10.702"></a><span id="l10.702" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.703"></a><span id="l10.703" class="difflineplus">+ifdef TOOL_DIRS</span>
<a href="#l10.704"></a><span id="l10.704" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.705"></a><span id="l10.705" class="difflineplus">+	$(foreach dir,$(TOOL_DIRS),$(UPDATE_TITLE) $(MAKE) -C $(dir) libs; ) true</span>
<a href="#l10.706"></a><span id="l10.706" class="difflineplus">+endif</span>
<a href="#l10.707"></a><span id="l10.707" class="difflineplus">+</span>
<a href="#l10.708"></a><span id="l10.708" class="difflineplus">+#</span>
<a href="#l10.709"></a><span id="l10.709" class="difflineplus">+# Rule to create list of libraries for final link</span>
<a href="#l10.710"></a><span id="l10.710" class="difflineplus">+#</span>
<a href="#l10.711"></a><span id="l10.711" class="difflineplus">+export::</span>
<a href="#l10.712"></a><span id="l10.712" class="difflineplus">+ifdef LIBRARY_NAME</span>
<a href="#l10.713"></a><span id="l10.713" class="difflineplus">+ifdef EXPORT_LIBRARY</span>
<a href="#l10.714"></a><span id="l10.714" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.715"></a><span id="l10.715" class="difflineplus">+ifdef BUILD_STATIC_LIBS</span>
<a href="#l10.716"></a><span id="l10.716" class="difflineplus">+	@$(PERL) -I$(MOZILLA_DIR)/config $(MOZILLA_DIR)/config/build-list.pl $(FINAL_LINK_COMPS) $(LIBRARY_NAME)</span>
<a href="#l10.717"></a><span id="l10.717" class="difflineplus">+ifdef MODULE_NAME</span>
<a href="#l10.718"></a><span id="l10.718" class="difflineplus">+	@$(PERL) -I$(MOZILLA_DIR)/config $(MOZILLA_DIR)/config/build-list.pl $(FINAL_LINK_COMP_NAMES) $(MODULE_NAME)</span>
<a href="#l10.719"></a><span id="l10.719" class="difflineplus">+endif</span>
<a href="#l10.720"></a><span id="l10.720" class="difflineplus">+endif</span>
<a href="#l10.721"></a><span id="l10.721" class="difflineplus">+else</span>
<a href="#l10.722"></a><span id="l10.722" class="difflineplus">+	$(PERL) -I$(MOZILLA_DIR)/config $(MOZILLA_DIR)/config/build-list.pl $(FINAL_LINK_LIBS) $(LIBRARY_NAME)</span>
<a href="#l10.723"></a><span id="l10.723" class="difflineplus">+endif # IS_COMPONENT</span>
<a href="#l10.724"></a><span id="l10.724" class="difflineplus">+endif # EXPORT_LIBRARY</span>
<a href="#l10.725"></a><span id="l10.725" class="difflineplus">+endif # LIBRARY_NAME</span>
<a href="#l10.726"></a><span id="l10.726" class="difflineplus">+</span>
<a href="#l10.727"></a><span id="l10.727" class="difflineplus">+# Create dependencies on static (and shared EXTRA_DSO_LIBS) libraries</span>
<a href="#l10.728"></a><span id="l10.728" class="difflineplus">+LIBS_DEPS = $(filter %.$(LIB_SUFFIX), $(LIBS))</span>
<a href="#l10.729"></a><span id="l10.729" class="difflineplus">+HOST_LIBS_DEPS = $(filter %.$(LIB_SUFFIX), $(HOST_LIBS))</span>
<a href="#l10.730"></a><span id="l10.730" class="difflineplus">+DSO_LDOPTS_DEPS = $(EXTRA_DSO_LIBS) $(filter %.$(LIB_SUFFIX), $(EXTRA_DSO_LDOPTS))</span>
<a href="#l10.731"></a><span id="l10.731" class="difflineplus">+</span>
<a href="#l10.732"></a><span id="l10.732" class="difflineplus">+##############################################</span>
<a href="#l10.733"></a><span id="l10.733" class="difflineplus">+libs:: $(SUBMAKEFILES) $(MAKE_DIRS) $(HOST_LIBRARY) $(LIBRARY) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(HOST_PROGRAM) $(PROGRAM) $(HOST_SIMPLE_PROGRAMS) $(SIMPLE_PROGRAMS) $(JAVA_LIBRARY)</span>
<a href="#l10.734"></a><span id="l10.734" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.735"></a><span id="l10.735" class="difflineplus">+ifdef LIBRARY</span>
<a href="#l10.736"></a><span id="l10.736" class="difflineplus">+ifdef EXPORT_LIBRARY # Stage libs that will be linked into a static build</span>
<a href="#l10.737"></a><span id="l10.737" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.738"></a><span id="l10.738" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(LIBRARY) $(MOZDEPTH)/staticlib/components</span>
<a href="#l10.739"></a><span id="l10.739" class="difflineplus">+else</span>
<a href="#l10.740"></a><span id="l10.740" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(LIBRARY) $(MOZDEPTH)/staticlib</span>
<a href="#l10.741"></a><span id="l10.741" class="difflineplus">+endif</span>
<a href="#l10.742"></a><span id="l10.742" class="difflineplus">+endif # EXPORT_LIBRARY</span>
<a href="#l10.743"></a><span id="l10.743" class="difflineplus">+ifdef DIST_INSTALL</span>
<a href="#l10.744"></a><span id="l10.744" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.745"></a><span id="l10.745" class="difflineplus">+	$(error Shipping static component libs makes no sense.)</span>
<a href="#l10.746"></a><span id="l10.746" class="difflineplus">+else</span>
<a href="#l10.747"></a><span id="l10.747" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(LIBRARY) $(DIST)/lib</span>
<a href="#l10.748"></a><span id="l10.748" class="difflineplus">+endif</span>
<a href="#l10.749"></a><span id="l10.749" class="difflineplus">+endif # DIST_INSTALL</span>
<a href="#l10.750"></a><span id="l10.750" class="difflineplus">+endif # LIBRARY</span>
<a href="#l10.751"></a><span id="l10.751" class="difflineplus">+ifdef SHARED_LIBRARY</span>
<a href="#l10.752"></a><span id="l10.752" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.753"></a><span id="l10.753" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(FINAL_TARGET)/components</span>
<a href="#l10.754"></a><span id="l10.754" class="difflineplus">+	$(ELF_DYNSTR_GC) $(FINAL_TARGET)/components/$(SHARED_LIBRARY)</span>
<a href="#l10.755"></a><span id="l10.755" class="difflineplus">+ifdef BEOS_ADDON_WORKAROUND</span>
<a href="#l10.756"></a><span id="l10.756" class="difflineplus">+	( cd $(FINAL_TARGET)/components &amp;&amp; $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )</span>
<a href="#l10.757"></a><span id="l10.757" class="difflineplus">+endif</span>
<a href="#l10.758"></a><span id="l10.758" class="difflineplus">+else # ! IS_COMPONENT</span>
<a href="#l10.759"></a><span id="l10.759" class="difflineplus">+ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.760"></a><span id="l10.760" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(DIST)/lib</span>
<a href="#l10.761"></a><span id="l10.761" class="difflineplus">+else</span>
<a href="#l10.762"></a><span id="l10.762" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/lib</span>
<a href="#l10.763"></a><span id="l10.763" class="difflineplus">+endif</span>
<a href="#l10.764"></a><span id="l10.764" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(FINAL_TARGET)</span>
<a href="#l10.765"></a><span id="l10.765" class="difflineplus">+ifdef BEOS_ADDON_WORKAROUND</span>
<a href="#l10.766"></a><span id="l10.766" class="difflineplus">+	( cd $(FINAL_TARGET) &amp;&amp; $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )</span>
<a href="#l10.767"></a><span id="l10.767" class="difflineplus">+endif</span>
<a href="#l10.768"></a><span id="l10.768" class="difflineplus">+endif # IS_COMPONENT</span>
<a href="#l10.769"></a><span id="l10.769" class="difflineplus">+endif # SHARED_LIBRARY</span>
<a href="#l10.770"></a><span id="l10.770" class="difflineplus">+ifdef PROGRAM</span>
<a href="#l10.771"></a><span id="l10.771" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(PROGRAM) $(FINAL_TARGET)</span>
<a href="#l10.772"></a><span id="l10.772" class="difflineplus">+endif</span>
<a href="#l10.773"></a><span id="l10.773" class="difflineplus">+ifdef SIMPLE_PROGRAMS</span>
<a href="#l10.774"></a><span id="l10.774" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(SIMPLE_PROGRAMS) $(FINAL_TARGET)</span>
<a href="#l10.775"></a><span id="l10.775" class="difflineplus">+endif</span>
<a href="#l10.776"></a><span id="l10.776" class="difflineplus">+ifdef HOST_PROGRAM</span>
<a href="#l10.777"></a><span id="l10.777" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(HOST_PROGRAM) $(DIST)/host/bin</span>
<a href="#l10.778"></a><span id="l10.778" class="difflineplus">+endif</span>
<a href="#l10.779"></a><span id="l10.779" class="difflineplus">+ifdef HOST_SIMPLE_PROGRAMS</span>
<a href="#l10.780"></a><span id="l10.780" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $(HOST_SIMPLE_PROGRAMS) $(DIST)/host/bin</span>
<a href="#l10.781"></a><span id="l10.781" class="difflineplus">+endif</span>
<a href="#l10.782"></a><span id="l10.782" class="difflineplus">+ifdef HOST_LIBRARY</span>
<a href="#l10.783"></a><span id="l10.783" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(HOST_LIBRARY) $(DIST)/host/lib</span>
<a href="#l10.784"></a><span id="l10.784" class="difflineplus">+endif</span>
<a href="#l10.785"></a><span id="l10.785" class="difflineplus">+ifdef JAVA_LIBRARY</span>
<a href="#l10.786"></a><span id="l10.786" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.787"></a><span id="l10.787" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(JAVA_LIBRARY) $(FINAL_TARGET)/components</span>
<a href="#l10.788"></a><span id="l10.788" class="difflineplus">+else</span>
<a href="#l10.789"></a><span id="l10.789" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(JAVA_LIBRARY) $(FINAL_TARGET)</span>
<a href="#l10.790"></a><span id="l10.790" class="difflineplus">+endif</span>
<a href="#l10.791"></a><span id="l10.791" class="difflineplus">+endif # JAVA_LIBRARY</span>
<a href="#l10.792"></a><span id="l10.792" class="difflineplus">+endif # !NO_DIST_INSTALL</span>
<a href="#l10.793"></a><span id="l10.793" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.794"></a><span id="l10.794" class="difflineplus">+</span>
<a href="#l10.795"></a><span id="l10.795" class="difflineplus">+##############################################</span>
<a href="#l10.796"></a><span id="l10.796" class="difflineplus">+</span>
<a href="#l10.797"></a><span id="l10.797" class="difflineplus">+ifndef NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l10.798"></a><span id="l10.798" class="difflineplus">+ifneq (,$(MOZ_PROFILE_GENERATE)$(MOZ_PROFILE_USE))</span>
<a href="#l10.799"></a><span id="l10.799" class="difflineplus">+ifeq ($(OS_ARCH)_$(GNU_CC)$(INTERNAL_TOOLS), WINNT_)</span>
<a href="#l10.800"></a><span id="l10.800" class="difflineplus">+# Force re-linking when building with PGO, since</span>
<a href="#l10.801"></a><span id="l10.801" class="difflineplus">+# the MSVC linker does all the work.  We force re-link</span>
<a href="#l10.802"></a><span id="l10.802" class="difflineplus">+# in both stages so you can do depend builds with PGO.</span>
<a href="#l10.803"></a><span id="l10.803" class="difflineplus">+ifdef SHARED_LIBRARY</span>
<a href="#l10.804"></a><span id="l10.804" class="difflineplus">+$(SHARED_LIBRARY): FORCE</span>
<a href="#l10.805"></a><span id="l10.805" class="difflineplus">+BINARY_BASENAME = $(SHARED_LIBRARY:$(DLL_SUFFIX)=)</span>
<a href="#l10.806"></a><span id="l10.806" class="difflineplus">+endif</span>
<a href="#l10.807"></a><span id="l10.807" class="difflineplus">+ifdef PROGRAM</span>
<a href="#l10.808"></a><span id="l10.808" class="difflineplus">+$(PROGRAM): FORCE</span>
<a href="#l10.809"></a><span id="l10.809" class="difflineplus">+BINARY_BASENAME = $(PROGRAM:$(BIN_SUFFIX)=)</span>
<a href="#l10.810"></a><span id="l10.810" class="difflineplus">+endif</span>
<a href="#l10.811"></a><span id="l10.811" class="difflineplus">+</span>
<a href="#l10.812"></a><span id="l10.812" class="difflineplus">+ifdef MOZ_PROFILE_USE</span>
<a href="#l10.813"></a><span id="l10.813" class="difflineplus">+# In the second pass, we need to merge the pgc files into the pgd file.</span>
<a href="#l10.814"></a><span id="l10.814" class="difflineplus">+# The compiler would do this for us automatically if they were in the right</span>
<a href="#l10.815"></a><span id="l10.815" class="difflineplus">+# place, but they're in dist/bin.</span>
<a href="#l10.816"></a><span id="l10.816" class="difflineplus">+ifdef BINARY_BASENAME</span>
<a href="#l10.817"></a><span id="l10.817" class="difflineplus">+export::</span>
<a href="#l10.818"></a><span id="l10.818" class="difflineplus">+	$(PYTHON) $(MOZILLA_SRCDIR)/build/win32/pgomerge.py \</span>
<a href="#l10.819"></a><span id="l10.819" class="difflineplus">+	  $(BINARY_BASENAME) $(DIST)/bin</span>
<a href="#l10.820"></a><span id="l10.820" class="difflineplus">+endif</span>
<a href="#l10.821"></a><span id="l10.821" class="difflineplus">+endif # MOZ_PROFILE_USE</span>
<a href="#l10.822"></a><span id="l10.822" class="difflineplus">+endif # WINNT_</span>
<a href="#l10.823"></a><span id="l10.823" class="difflineplus">+endif # MOZ_PROFILE_GENERATE || MOZ_PROFILE_USE</span>
<a href="#l10.824"></a><span id="l10.824" class="difflineplus">+endif # NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l10.825"></a><span id="l10.825" class="difflineplus">+</span>
<a href="#l10.826"></a><span id="l10.826" class="difflineplus">+##############################################</span>
<a href="#l10.827"></a><span id="l10.827" class="difflineplus">+</span>
<a href="#l10.828"></a><span id="l10.828" class="difflineplus">+checkout:</span>
<a href="#l10.829"></a><span id="l10.829" class="difflineplus">+	$(PYTHON) $(topsrcdir)/client.py checkout</span>
<a href="#l10.830"></a><span id="l10.830" class="difflineplus">+</span>
<a href="#l10.831"></a><span id="l10.831" class="difflineplus">+run_viewer: $(FINAL_TARGET)/viewer</span>
<a href="#l10.832"></a><span id="l10.832" class="difflineplus">+	cd $(FINAL_TARGET); \</span>
<a href="#l10.833"></a><span id="l10.833" class="difflineplus">+	MOZILLA_FIVE_HOME=`pwd` \</span>
<a href="#l10.834"></a><span id="l10.834" class="difflineplus">+	LD_LIBRARY_PATH=&quot;.:$(LIBS_PATH):$$LD_LIBRARY_PATH&quot; \</span>
<a href="#l10.835"></a><span id="l10.835" class="difflineplus">+	viewer</span>
<a href="#l10.836"></a><span id="l10.836" class="difflineplus">+</span>
<a href="#l10.837"></a><span id="l10.837" class="difflineplus">+clean clobber realclean clobber_all:: $(SUBMAKEFILES)</span>
<a href="#l10.838"></a><span id="l10.838" class="difflineplus">+	-rm -f $(ALL_TRASH)</span>
<a href="#l10.839"></a><span id="l10.839" class="difflineplus">+	-rm -rf $(ALL_TRASH_DIRS)</span>
<a href="#l10.840"></a><span id="l10.840" class="difflineplus">+	+-$(LOOP_OVER_DIRS)</span>
<a href="#l10.841"></a><span id="l10.841" class="difflineplus">+	+-$(LOOP_OVER_STATIC_DIRS)</span>
<a href="#l10.842"></a><span id="l10.842" class="difflineplus">+	+-$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.843"></a><span id="l10.843" class="difflineplus">+</span>
<a href="#l10.844"></a><span id="l10.844" class="difflineplus">+distclean:: $(SUBMAKEFILES)</span>
<a href="#l10.845"></a><span id="l10.845" class="difflineplus">+	+-$(LOOP_OVER_DIRS)</span>
<a href="#l10.846"></a><span id="l10.846" class="difflineplus">+	+-$(LOOP_OVER_STATIC_DIRS)</span>
<a href="#l10.847"></a><span id="l10.847" class="difflineplus">+	+-$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.848"></a><span id="l10.848" class="difflineplus">+	-rm -rf $(ALL_TRASH_DIRS) </span>
<a href="#l10.849"></a><span id="l10.849" class="difflineplus">+	-rm -f $(ALL_TRASH)  \</span>
<a href="#l10.850"></a><span id="l10.850" class="difflineplus">+	Makefile .HSancillary \</span>
<a href="#l10.851"></a><span id="l10.851" class="difflineplus">+	$(wildcard *.$(OBJ_SUFFIX)) $(wildcard *.ho) $(wildcard host_*.o*) \</span>
<a href="#l10.852"></a><span id="l10.852" class="difflineplus">+	$(wildcard *.$(LIB_SUFFIX)) $(wildcard *$(DLL_SUFFIX)) \</span>
<a href="#l10.853"></a><span id="l10.853" class="difflineplus">+	$(wildcard *.$(IMPORT_LIB_SUFFIX))</span>
<a href="#l10.854"></a><span id="l10.854" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.855"></a><span id="l10.855" class="difflineplus">+	-rm -f $(PROGRAM:.exe=.map)</span>
<a href="#l10.856"></a><span id="l10.856" class="difflineplus">+endif</span>
<a href="#l10.857"></a><span id="l10.857" class="difflineplus">+</span>
<a href="#l10.858"></a><span id="l10.858" class="difflineplus">+alltags:</span>
<a href="#l10.859"></a><span id="l10.859" class="difflineplus">+	rm -f TAGS</span>
<a href="#l10.860"></a><span id="l10.860" class="difflineplus">+	find $(topsrcdir) -name dist -prune -o \( -name '*.[hc]' -o -name '*.cp' -o -name '*.cpp' -o -name '*.idl' \) -print | $(TAG_PROGRAM)</span>
<a href="#l10.861"></a><span id="l10.861" class="difflineplus">+</span>
<a href="#l10.862"></a><span id="l10.862" class="difflineplus">+#</span>
<a href="#l10.863"></a><span id="l10.863" class="difflineplus">+# PROGRAM = Foo</span>
<a href="#l10.864"></a><span id="l10.864" class="difflineplus">+# creates OBJS, links with LIBS to create Foo</span>
<a href="#l10.865"></a><span id="l10.865" class="difflineplus">+#</span>
<a href="#l10.866"></a><span id="l10.866" class="difflineplus">+$(PROGRAM): $(PROGOBJS) $(LIBS_DEPS) $(EXTRA_DEPS) $(EXE_DEF_FILE) $(RESFILE) Makefile Makefile.in</span>
<a href="#l10.867"></a><span id="l10.867" class="difflineplus">+ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l10.868"></a><span id="l10.868" class="difflineplus">+	$(LD) -NOLOGO -OUT:$@ $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(PROGOBJS) $(RESFILE) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l10.869"></a><span id="l10.869" class="difflineplus">+else</span>
<a href="#l10.870"></a><span id="l10.870" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.871"></a><span id="l10.871" class="difflineplus">+	$(LD) -OUT:$@ $(LDFLAGS) $(PROGOBJS) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS) $(EXE_DEF_FILE) -ST:0x100000</span>
<a href="#l10.872"></a><span id="l10.872" class="difflineplus">+else</span>
<a href="#l10.873"></a><span id="l10.873" class="difflineplus">+</span>
<a href="#l10.874"></a><span id="l10.874" class="difflineplus">+ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l10.875"></a><span id="l10.875" class="difflineplus">+	$(LD) -NOLOGO -OUT:$@ -PDB:$(PDBFILE) $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(PROGOBJS) $(RESFILE) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l10.876"></a><span id="l10.876" class="difflineplus">+ifdef MSMANIFEST_TOOL</span>
<a href="#l10.877"></a><span id="l10.877" class="difflineplus">+	@if test -f $@.manifest; then \</span>
<a href="#l10.878"></a><span id="l10.878" class="difflineplus">+		if test -f &quot;$(srcdir)/$@.manifest&quot;; then \</span>
<a href="#l10.879"></a><span id="l10.879" class="difflineplus">+			mt.exe -NOLOGO -MANIFEST &quot;$(win_srcdir)/$@.manifest&quot; $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l10.880"></a><span id="l10.880" class="difflineplus">+		else \</span>
<a href="#l10.881"></a><span id="l10.881" class="difflineplus">+			mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l10.882"></a><span id="l10.882" class="difflineplus">+		fi; \</span>
<a href="#l10.883"></a><span id="l10.883" class="difflineplus">+		rm -f $@.manifest; \</span>
<a href="#l10.884"></a><span id="l10.884" class="difflineplus">+	fi</span>
<a href="#l10.885"></a><span id="l10.885" class="difflineplus">+endif	# MSVC with manifest tool</span>
<a href="#l10.886"></a><span id="l10.886" class="difflineplus">+else</span>
<a href="#l10.887"></a><span id="l10.887" class="difflineplus">+ifeq ($(CPP_PROG_LINK),1)</span>
<a href="#l10.888"></a><span id="l10.888" class="difflineplus">+	$(CCC) -o $@ $(CXXFLAGS) $(WRAP_MALLOC_CFLAGS) $(PROGOBJS) $(RESFILE) $(WIN32_EXE_LDFLAGS) $(SOLARIS_JEMALLOC_LDFLAGS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(BIN_FLAGS) $(WRAP_MALLOC_LIB) $(PROFILER_LIBS) $(EXE_DEF_FILE)</span>
<a href="#l10.889"></a><span id="l10.889" class="difflineplus">+else # ! CPP_PROG_LINK</span>
<a href="#l10.890"></a><span id="l10.890" class="difflineplus">+	$(CC) -o $@ $(CFLAGS) $(PROGOBJS) $(RESFILE) $(WIN32_EXE_LDFLAGS) $(SOLARIS_JEMALLOC_LDFLAGS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(BIN_FLAGS) $(EXE_DEF_FILE)</span>
<a href="#l10.891"></a><span id="l10.891" class="difflineplus">+endif # CPP_PROG_LINK</span>
<a href="#l10.892"></a><span id="l10.892" class="difflineplus">+endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l10.893"></a><span id="l10.893" class="difflineplus">+endif # OS2</span>
<a href="#l10.894"></a><span id="l10.894" class="difflineplus">+endif # WINCE</span>
<a href="#l10.895"></a><span id="l10.895" class="difflineplus">+</span>
<a href="#l10.896"></a><span id="l10.896" class="difflineplus">+ifdef ENABLE_STRIP</span>
<a href="#l10.897"></a><span id="l10.897" class="difflineplus">+	$(STRIP) $@</span>
<a href="#l10.898"></a><span id="l10.898" class="difflineplus">+endif</span>
<a href="#l10.899"></a><span id="l10.899" class="difflineplus">+ifdef MOZ_POST_PROGRAM_COMMAND</span>
<a href="#l10.900"></a><span id="l10.900" class="difflineplus">+	$(MOZ_POST_PROGRAM_COMMAND) $@</span>
<a href="#l10.901"></a><span id="l10.901" class="difflineplus">+endif</span>
<a href="#l10.902"></a><span id="l10.902" class="difflineplus">+ifeq ($(OS_ARCH),BeOS)</span>
<a href="#l10.903"></a><span id="l10.903" class="difflineplus">+ifdef BEOS_PROGRAM_RESOURCE</span>
<a href="#l10.904"></a><span id="l10.904" class="difflineplus">+	xres -o $@ $(BEOS_PROGRAM_RESOURCE)</span>
<a href="#l10.905"></a><span id="l10.905" class="difflineplus">+	mimeset $@</span>
<a href="#l10.906"></a><span id="l10.906" class="difflineplus">+endif</span>
<a href="#l10.907"></a><span id="l10.907" class="difflineplus">+endif # BeOS</span>
<a href="#l10.908"></a><span id="l10.908" class="difflineplus">+</span>
<a href="#l10.909"></a><span id="l10.909" class="difflineplus">+$(HOST_PROGRAM): $(HOST_PROGOBJS) $(HOST_LIBS_DEPS) $(HOST_EXTRA_DEPS) Makefile Makefile.in</span>
<a href="#l10.910"></a><span id="l10.910" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.911"></a><span id="l10.911" class="difflineplus">+	$(LD) -OUT:$@ $(LDFLAGS) $(HOST_OBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS) -ST:0x100000</span>
<a href="#l10.912"></a><span id="l10.912" class="difflineplus">+else</span>
<a href="#l10.913"></a><span id="l10.913" class="difflineplus">+ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l10.914"></a><span id="l10.914" class="difflineplus">+	$(HOST_LD) -NOLOGO -OUT:$@ $(HOST_OBJS) $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.915"></a><span id="l10.915" class="difflineplus">+else</span>
<a href="#l10.916"></a><span id="l10.916" class="difflineplus">+ifeq (_WINNT,$(GNU_CC)_$(HOST_OS_ARCH))</span>
<a href="#l10.917"></a><span id="l10.917" class="difflineplus">+	$(HOST_LD) -NOLOGO -OUT:$@ -PDB:$(PDBFILE) $(HOST_OBJS) $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.918"></a><span id="l10.918" class="difflineplus">+ifdef MSMANIFEST_TOOL</span>
<a href="#l10.919"></a><span id="l10.919" class="difflineplus">+	@if test -f $@.manifest; then \</span>
<a href="#l10.920"></a><span id="l10.920" class="difflineplus">+		mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l10.921"></a><span id="l10.921" class="difflineplus">+		rm -f $@.manifest; \</span>
<a href="#l10.922"></a><span id="l10.922" class="difflineplus">+	fi</span>
<a href="#l10.923"></a><span id="l10.923" class="difflineplus">+endif	# MSVC with manifest tool</span>
<a href="#l10.924"></a><span id="l10.924" class="difflineplus">+else</span>
<a href="#l10.925"></a><span id="l10.925" class="difflineplus">+ifeq ($(CPP_PROG_LINK),1)</span>
<a href="#l10.926"></a><span id="l10.926" class="difflineplus">+	$(HOST_CXX) -o $@ $(HOST_CXXFLAGS) $(HOST_LDFLAGS) $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.927"></a><span id="l10.927" class="difflineplus">+else</span>
<a href="#l10.928"></a><span id="l10.928" class="difflineplus">+	$(HOST_CC) -o $@ $(HOST_CFLAGS) $(HOST_LDFLAGS) $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.929"></a><span id="l10.929" class="difflineplus">+endif # CPP_PROG_LINK</span>
<a href="#l10.930"></a><span id="l10.930" class="difflineplus">+endif</span>
<a href="#l10.931"></a><span id="l10.931" class="difflineplus">+endif</span>
<a href="#l10.932"></a><span id="l10.932" class="difflineplus">+endif</span>
<a href="#l10.933"></a><span id="l10.933" class="difflineplus">+</span>
<a href="#l10.934"></a><span id="l10.934" class="difflineplus">+#</span>
<a href="#l10.935"></a><span id="l10.935" class="difflineplus">+# This is an attempt to support generation of multiple binaries</span>
<a href="#l10.936"></a><span id="l10.936" class="difflineplus">+# in one directory, it assumes everything to compile Foo is in</span>
<a href="#l10.937"></a><span id="l10.937" class="difflineplus">+# Foo.o (from either Foo.c or Foo.cpp).</span>
<a href="#l10.938"></a><span id="l10.938" class="difflineplus">+#</span>
<a href="#l10.939"></a><span id="l10.939" class="difflineplus">+# SIMPLE_PROGRAMS = Foo Bar</span>
<a href="#l10.940"></a><span id="l10.940" class="difflineplus">+# creates Foo.o Bar.o, links with LIBS to create Foo, Bar.</span>
<a href="#l10.941"></a><span id="l10.941" class="difflineplus">+#</span>
<a href="#l10.942"></a><span id="l10.942" class="difflineplus">+$(SIMPLE_PROGRAMS): %$(BIN_SUFFIX): %.$(OBJ_SUFFIX) $(LIBS_DEPS) $(EXTRA_DEPS) Makefile Makefile.in</span>
<a href="#l10.943"></a><span id="l10.943" class="difflineplus">+ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l10.944"></a><span id="l10.944" class="difflineplus">+	$(LD) -nologo  -entry:main -out:$@ $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l10.945"></a><span id="l10.945" class="difflineplus">+else</span>
<a href="#l10.946"></a><span id="l10.946" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.947"></a><span id="l10.947" class="difflineplus">+	$(LD) -Out:$@ $&lt; $(LDFLAGS) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(WRAP_MALLOC_LIB) $(PROFILER_LIBS)</span>
<a href="#l10.948"></a><span id="l10.948" class="difflineplus">+else</span>
<a href="#l10.949"></a><span id="l10.949" class="difflineplus">+ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l10.950"></a><span id="l10.950" class="difflineplus">+	$(LD) -nologo -out:$@ -pdb:$(PDBFILE) $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l10.951"></a><span id="l10.951" class="difflineplus">+ifdef MSMANIFEST_TOOL</span>
<a href="#l10.952"></a><span id="l10.952" class="difflineplus">+	@if test -f $@.manifest; then \</span>
<a href="#l10.953"></a><span id="l10.953" class="difflineplus">+		mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l10.954"></a><span id="l10.954" class="difflineplus">+		rm -f $@.manifest; \</span>
<a href="#l10.955"></a><span id="l10.955" class="difflineplus">+	fi</span>
<a href="#l10.956"></a><span id="l10.956" class="difflineplus">+endif	# MSVC with manifest tool</span>
<a href="#l10.957"></a><span id="l10.957" class="difflineplus">+else</span>
<a href="#l10.958"></a><span id="l10.958" class="difflineplus">+ifeq ($(CPP_PROG_LINK),1)</span>
<a href="#l10.959"></a><span id="l10.959" class="difflineplus">+	$(CCC) $(WRAP_MALLOC_CFLAGS) $(CXXFLAGS) -o $@ $&lt; $(WIN32_EXE_LDFLAGS) $(SOLARIS_JEMALLOC_LDFLAGS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(WRAP_MALLOC_LIB) $(PROFILER_LIBS) $(BIN_FLAGS)</span>
<a href="#l10.960"></a><span id="l10.960" class="difflineplus">+else</span>
<a href="#l10.961"></a><span id="l10.961" class="difflineplus">+	$(CC) $(WRAP_MALLOC_CFLAGS) $(CFLAGS) $(OUTOPTION)$@ $&lt; $(WIN32_EXE_LDFLAGS) $(SOLARIS_JEMALLOC_LDFLAGS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(WRAP_MALLOC_LIB) $(PROFILER_LIBS) $(BIN_FLAGS)</span>
<a href="#l10.962"></a><span id="l10.962" class="difflineplus">+endif # CPP_PROG_LINK</span>
<a href="#l10.963"></a><span id="l10.963" class="difflineplus">+endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l10.964"></a><span id="l10.964" class="difflineplus">+endif # OS/2 VACPP</span>
<a href="#l10.965"></a><span id="l10.965" class="difflineplus">+endif # WINCE</span>
<a href="#l10.966"></a><span id="l10.966" class="difflineplus">+</span>
<a href="#l10.967"></a><span id="l10.967" class="difflineplus">+ifdef ENABLE_STRIP</span>
<a href="#l10.968"></a><span id="l10.968" class="difflineplus">+	$(STRIP) $@</span>
<a href="#l10.969"></a><span id="l10.969" class="difflineplus">+endif</span>
<a href="#l10.970"></a><span id="l10.970" class="difflineplus">+ifdef MOZ_POST_PROGRAM_COMMAND</span>
<a href="#l10.971"></a><span id="l10.971" class="difflineplus">+	$(MOZ_POST_PROGRAM_COMMAND) $@</span>
<a href="#l10.972"></a><span id="l10.972" class="difflineplus">+endif</span>
<a href="#l10.973"></a><span id="l10.973" class="difflineplus">+</span>
<a href="#l10.974"></a><span id="l10.974" class="difflineplus">+$(HOST_SIMPLE_PROGRAMS): host_%$(HOST_BIN_SUFFIX): host_%.$(OBJ_SUFFIX) $(HOST_LIBS_DEPS) $(HOST_EXTRA_DEPS) Makefile Makefile.in</span>
<a href="#l10.975"></a><span id="l10.975" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.976"></a><span id="l10.976" class="difflineplus">+	$(HOST_LD) -OUT:$@ $&lt; $(LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS) -ST:0x100000</span>
<a href="#l10.977"></a><span id="l10.977" class="difflineplus">+else</span>
<a href="#l10.978"></a><span id="l10.978" class="difflineplus">+ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l10.979"></a><span id="l10.979" class="difflineplus">+	$(HOST_LD) -NOLOGO -OUT:$@ $(WIN32_EXE_LDFLAGS) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.980"></a><span id="l10.980" class="difflineplus">+else</span>
<a href="#l10.981"></a><span id="l10.981" class="difflineplus">+ifeq (WINNT_,$(HOST_OS_ARCH)_$(GNU_CC))</span>
<a href="#l10.982"></a><span id="l10.982" class="difflineplus">+	$(HOST_LD) -NOLOGO -OUT:$@ -PDB:$(PDBFILE) $&lt; $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.983"></a><span id="l10.983" class="difflineplus">+else</span>
<a href="#l10.984"></a><span id="l10.984" class="difflineplus">+ifneq (,$(HOST_CPPSRCS)$(USE_HOST_CXX))</span>
<a href="#l10.985"></a><span id="l10.985" class="difflineplus">+	$(HOST_CXX) $(HOST_OUTOPTION)$@ $(HOST_CXXFLAGS) $(INCLUDES) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.986"></a><span id="l10.986" class="difflineplus">+else</span>
<a href="#l10.987"></a><span id="l10.987" class="difflineplus">+	$(HOST_CC) $(HOST_OUTOPTION)$@ $(HOST_CFLAGS) $(INCLUDES) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l10.988"></a><span id="l10.988" class="difflineplus">+endif</span>
<a href="#l10.989"></a><span id="l10.989" class="difflineplus">+endif</span>
<a href="#l10.990"></a><span id="l10.990" class="difflineplus">+endif</span>
<a href="#l10.991"></a><span id="l10.991" class="difflineplus">+endif</span>
<a href="#l10.992"></a><span id="l10.992" class="difflineplus">+</span>
<a href="#l10.993"></a><span id="l10.993" class="difflineplus">+#</span>
<a href="#l10.994"></a><span id="l10.994" class="difflineplus">+# Purify target.  Solaris/sparc only to start.</span>
<a href="#l10.995"></a><span id="l10.995" class="difflineplus">+# Purify does not recognize &quot;egcs&quot; or &quot;c++&quot; so we go with </span>
<a href="#l10.996"></a><span id="l10.996" class="difflineplus">+# &quot;gcc&quot; and &quot;g++&quot; for now.</span>
<a href="#l10.997"></a><span id="l10.997" class="difflineplus">+#</span>
<a href="#l10.998"></a><span id="l10.998" class="difflineplus">+pure:	$(PROGRAM)</span>
<a href="#l10.999"></a><span id="l10.999" class="difflineplus">+ifeq ($(CPP_PROG_LINK),1)</span>
<a href="#l10.1000"></a><span id="l10.1000" class="difflineplus">+	$(PURIFY) $(CCC) -o $^.pure $(CXXFLAGS) $(PROGOBJS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS)</span>
<a href="#l10.1001"></a><span id="l10.1001" class="difflineplus">+else</span>
<a href="#l10.1002"></a><span id="l10.1002" class="difflineplus">+	$(PURIFY) $(CC) -o $^.pure $(CFLAGS) $(PROGOBJS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS)</span>
<a href="#l10.1003"></a><span id="l10.1003" class="difflineplus">+endif</span>
<a href="#l10.1004"></a><span id="l10.1004" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1005"></a><span id="l10.1005" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $^.pure $(FINAL_TARGET)</span>
<a href="#l10.1006"></a><span id="l10.1006" class="difflineplus">+endif</span>
<a href="#l10.1007"></a><span id="l10.1007" class="difflineplus">+</span>
<a href="#l10.1008"></a><span id="l10.1008" class="difflineplus">+quantify: $(PROGRAM)</span>
<a href="#l10.1009"></a><span id="l10.1009" class="difflineplus">+ifeq ($(CPP_PROG_LINK),1)</span>
<a href="#l10.1010"></a><span id="l10.1010" class="difflineplus">+	$(QUANTIFY) $(CCC) -o $^.quantify $(CXXFLAGS) $(PROGOBJS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS)</span>
<a href="#l10.1011"></a><span id="l10.1011" class="difflineplus">+else</span>
<a href="#l10.1012"></a><span id="l10.1012" class="difflineplus">+	$(QUANTIFY) $(CC) -o $^.quantify $(CFLAGS) $(PROGOBJS) $(LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS)</span>
<a href="#l10.1013"></a><span id="l10.1013" class="difflineplus">+endif</span>
<a href="#l10.1014"></a><span id="l10.1014" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1015"></a><span id="l10.1015" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $^.quantify $(FINAL_TARGET)</span>
<a href="#l10.1016"></a><span id="l10.1016" class="difflineplus">+endif</span>
<a href="#l10.1017"></a><span id="l10.1017" class="difflineplus">+</span>
<a href="#l10.1018"></a><span id="l10.1018" class="difflineplus">+#</span>
<a href="#l10.1019"></a><span id="l10.1019" class="difflineplus">+# This allows us to create static versions of the shared libraries</span>
<a href="#l10.1020"></a><span id="l10.1020" class="difflineplus">+# that are built using other static libraries.  Confused...?</span>
<a href="#l10.1021"></a><span id="l10.1021" class="difflineplus">+#</span>
<a href="#l10.1022"></a><span id="l10.1022" class="difflineplus">+ifdef SHARED_LIBRARY_LIBS</span>
<a href="#l10.1023"></a><span id="l10.1023" class="difflineplus">+ifeq (,$(GNU_LD)$(filter-out OS2 WINNT WINCE, $(OS_ARCH)))</span>
<a href="#l10.1024"></a><span id="l10.1024" class="difflineplus">+ifneq (,$(BUILD_STATIC_LIBS)$(FORCE_STATIC_LIB))</span>
<a href="#l10.1025"></a><span id="l10.1025" class="difflineplus">+LOBJS	+= $(SHARED_LIBRARY_LIBS)</span>
<a href="#l10.1026"></a><span id="l10.1026" class="difflineplus">+endif</span>
<a href="#l10.1027"></a><span id="l10.1027" class="difflineplus">+else</span>
<a href="#l10.1028"></a><span id="l10.1028" class="difflineplus">+ifneq (,$(filter OSF1 BSD_OS FreeBSD NetBSD OpenBSD SunOS Darwin,$(OS_ARCH)))</span>
<a href="#l10.1029"></a><span id="l10.1029" class="difflineplus">+CLEANUP1	:= | egrep -v '(________64ELEL_|__.SYMDEF)'</span>
<a href="#l10.1030"></a><span id="l10.1030" class="difflineplus">+CLEANUP2	:= rm -f ________64ELEL_ __.SYMDEF</span>
<a href="#l10.1031"></a><span id="l10.1031" class="difflineplus">+else</span>
<a href="#l10.1032"></a><span id="l10.1032" class="difflineplus">+CLEANUP2	:= true</span>
<a href="#l10.1033"></a><span id="l10.1033" class="difflineplus">+endif</span>
<a href="#l10.1034"></a><span id="l10.1034" class="difflineplus">+SUB_LOBJS	= $(shell for lib in $(SHARED_LIBRARY_LIBS); do $(AR_LIST) $${lib} $(CLEANUP1); done;)</span>
<a href="#l10.1035"></a><span id="l10.1035" class="difflineplus">+endif</span>
<a href="#l10.1036"></a><span id="l10.1036" class="difflineplus">+endif</span>
<a href="#l10.1037"></a><span id="l10.1037" class="difflineplus">+ifdef MOZILLA_PROBE_LIBS</span>
<a href="#l10.1038"></a><span id="l10.1038" class="difflineplus">+PROBE_LOBJS	= $(shell for lib in $(MOZILLA_PROBE_LIBS); do $(AR_LIST) $${lib} $(CLEANUP1); done;)</span>
<a href="#l10.1039"></a><span id="l10.1039" class="difflineplus">+endif</span>
<a href="#l10.1040"></a><span id="l10.1040" class="difflineplus">+ifdef DTRACE_PROBE_OBJ</span>
<a href="#l10.1041"></a><span id="l10.1041" class="difflineplus">+EXTRA_DEPS += $(DTRACE_PROBE_OBJ)</span>
<a href="#l10.1042"></a><span id="l10.1042" class="difflineplus">+endif</span>
<a href="#l10.1043"></a><span id="l10.1043" class="difflineplus">+</span>
<a href="#l10.1044"></a><span id="l10.1044" class="difflineplus">+$(LIBRARY): $(OBJS) $(LOBJS) $(SHARED_LIBRARY_LIBS) $(EXTRA_DEPS) Makefile Makefile.in</span>
<a href="#l10.1045"></a><span id="l10.1045" class="difflineplus">+	rm -f $@</span>
<a href="#l10.1046"></a><span id="l10.1046" class="difflineplus">+ifneq (,$(GNU_LD)$(filter-out OS2 WINNT WINCE, $(OS_ARCH)))</span>
<a href="#l10.1047"></a><span id="l10.1047" class="difflineplus">+ifdef SHARED_LIBRARY_LIBS</span>
<a href="#l10.1048"></a><span id="l10.1048" class="difflineplus">+	@rm -f $(SUB_LOBJS)</span>
<a href="#l10.1049"></a><span id="l10.1049" class="difflineplus">+	@for lib in $(SHARED_LIBRARY_LIBS); do $(AR_EXTRACT) $${lib}; $(CLEANUP2); done</span>
<a href="#l10.1050"></a><span id="l10.1050" class="difflineplus">+endif</span>
<a href="#l10.1051"></a><span id="l10.1051" class="difflineplus">+endif</span>
<a href="#l10.1052"></a><span id="l10.1052" class="difflineplus">+	$(AR) $(AR_FLAGS) $(OBJS) $(LOBJS) $(SUB_LOBJS)</span>
<a href="#l10.1053"></a><span id="l10.1053" class="difflineplus">+	$(RANLIB) $@</span>
<a href="#l10.1054"></a><span id="l10.1054" class="difflineplus">+	@rm -f foodummyfilefoo $(SUB_LOBJS)</span>
<a href="#l10.1055"></a><span id="l10.1055" class="difflineplus">+</span>
<a href="#l10.1056"></a><span id="l10.1056" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE, $(OS_ARCH)))</span>
<a href="#l10.1057"></a><span id="l10.1057" class="difflineplus">+$(IMPORT_LIBRARY): $(SHARED_LIBRARY)</span>
<a href="#l10.1058"></a><span id="l10.1058" class="difflineplus">+endif</span>
<a href="#l10.1059"></a><span id="l10.1059" class="difflineplus">+</span>
<a href="#l10.1060"></a><span id="l10.1060" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l10.1061"></a><span id="l10.1061" class="difflineplus">+$(DEF_FILE): $(OBJS) $(SHARED_LIBRARY_LIBS)</span>
<a href="#l10.1062"></a><span id="l10.1062" class="difflineplus">+	rm -f $@</span>
<a href="#l10.1063"></a><span id="l10.1063" class="difflineplus">+	echo LIBRARY $(LIBRARY_NAME) INITINSTANCE TERMINSTANCE &gt; $@</span>
<a href="#l10.1064"></a><span id="l10.1064" class="difflineplus">+	echo PROTMODE &gt;&gt; $@</span>
<a href="#l10.1065"></a><span id="l10.1065" class="difflineplus">+	echo CODE    LOADONCALL MOVEABLE DISCARDABLE &gt;&gt; $@</span>
<a href="#l10.1066"></a><span id="l10.1066" class="difflineplus">+	echo DATA    PRELOAD MOVEABLE MULTIPLE NONSHARED &gt;&gt; $@</span>
<a href="#l10.1067"></a><span id="l10.1067" class="difflineplus">+	echo EXPORTS &gt;&gt; $@</span>
<a href="#l10.1068"></a><span id="l10.1068" class="difflineplus">+ifeq ($(IS_COMPONENT),1)</span>
<a href="#l10.1069"></a><span id="l10.1069" class="difflineplus">+ifeq ($(HAS_EXTRAEXPORTS),1)</span>
<a href="#l10.1070"></a><span id="l10.1070" class="difflineplus">+ifndef MOZ_OS2_USE_DECLSPEC</span>
<a href="#l10.1071"></a><span id="l10.1071" class="difflineplus">+	$(FILTER) $(OBJS) $(SHARED_LIBRARY_LIBS) &gt;&gt; $@</span>
<a href="#l10.1072"></a><span id="l10.1072" class="difflineplus">+endif	</span>
<a href="#l10.1073"></a><span id="l10.1073" class="difflineplus">+else</span>
<a href="#l10.1074"></a><span id="l10.1074" class="difflineplus">+	echo    _NSGetModule &gt;&gt; $@</span>
<a href="#l10.1075"></a><span id="l10.1075" class="difflineplus">+endif</span>
<a href="#l10.1076"></a><span id="l10.1076" class="difflineplus">+else</span>
<a href="#l10.1077"></a><span id="l10.1077" class="difflineplus">+ifndef MOZ_OS2_USE_DECLSPEC</span>
<a href="#l10.1078"></a><span id="l10.1078" class="difflineplus">+	$(FILTER) $(OBJS) $(SHARED_LIBRARY_LIBS) &gt;&gt; $@</span>
<a href="#l10.1079"></a><span id="l10.1079" class="difflineplus">+endif	</span>
<a href="#l10.1080"></a><span id="l10.1080" class="difflineplus">+endif</span>
<a href="#l10.1081"></a><span id="l10.1081" class="difflineplus">+	$(ADD_TO_DEF_FILE)</span>
<a href="#l10.1082"></a><span id="l10.1082" class="difflineplus">+</span>
<a href="#l10.1083"></a><span id="l10.1083" class="difflineplus">+ifdef MOZ_OS2_USE_DECLSPEC</span>
<a href="#l10.1084"></a><span id="l10.1084" class="difflineplus">+$(IMPORT_LIBRARY): $(SHARED_LIBRARY)</span>
<a href="#l10.1085"></a><span id="l10.1085" class="difflineplus">+else</span>
<a href="#l10.1086"></a><span id="l10.1086" class="difflineplus">+$(IMPORT_LIBRARY): $(DEF_FILE)</span>
<a href="#l10.1087"></a><span id="l10.1087" class="difflineplus">+endif</span>
<a href="#l10.1088"></a><span id="l10.1088" class="difflineplus">+	rm -f $@</span>
<a href="#l10.1089"></a><span id="l10.1089" class="difflineplus">+	$(IMPLIB) $@ $^</span>
<a href="#l10.1090"></a><span id="l10.1090" class="difflineplus">+	$(RANLIB) $@</span>
<a href="#l10.1091"></a><span id="l10.1091" class="difflineplus">+endif # OS/2</span>
<a href="#l10.1092"></a><span id="l10.1092" class="difflineplus">+</span>
<a href="#l10.1093"></a><span id="l10.1093" class="difflineplus">+$(HOST_LIBRARY): $(HOST_OBJS) Makefile</span>
<a href="#l10.1094"></a><span id="l10.1094" class="difflineplus">+	rm -f $@</span>
<a href="#l10.1095"></a><span id="l10.1095" class="difflineplus">+	$(HOST_AR) $(HOST_AR_FLAGS) $(HOST_OBJS)</span>
<a href="#l10.1096"></a><span id="l10.1096" class="difflineplus">+	$(HOST_RANLIB) $@</span>
<a href="#l10.1097"></a><span id="l10.1097" class="difflineplus">+</span>
<a href="#l10.1098"></a><span id="l10.1098" class="difflineplus">+ifdef NO_LD_ARCHIVE_FLAGS</span>
<a href="#l10.1099"></a><span id="l10.1099" class="difflineplus">+SUB_SHLOBJS = $(SUB_LOBJS)</span>
<a href="#l10.1100"></a><span id="l10.1100" class="difflineplus">+endif</span>
<a href="#l10.1101"></a><span id="l10.1101" class="difflineplus">+</span>
<a href="#l10.1102"></a><span id="l10.1102" class="difflineplus">+ifdef HAVE_DTRACE</span>
<a href="#l10.1103"></a><span id="l10.1103" class="difflineplus">+ifndef XP_MACOSX</span>
<a href="#l10.1104"></a><span id="l10.1104" class="difflineplus">+ifdef DTRACE_PROBE_OBJ</span>
<a href="#l10.1105"></a><span id="l10.1105" class="difflineplus">+ifndef DTRACE_LIB_DEPENDENT</span>
<a href="#l10.1106"></a><span id="l10.1106" class="difflineplus">+$(DTRACE_PROBE_OBJ): $(OBJS)</span>
<a href="#l10.1107"></a><span id="l10.1107" class="difflineplus">+	dtrace -G -C -32 -s $(MOZILLA_DTRACE_SRC) -o $(DTRACE_PROBE_OBJ) $(OBJS)</span>
<a href="#l10.1108"></a><span id="l10.1108" class="difflineplus">+endif</span>
<a href="#l10.1109"></a><span id="l10.1109" class="difflineplus">+endif</span>
<a href="#l10.1110"></a><span id="l10.1110" class="difflineplus">+endif</span>
<a href="#l10.1111"></a><span id="l10.1111" class="difflineplus">+endif</span>
<a href="#l10.1112"></a><span id="l10.1112" class="difflineplus">+</span>
<a href="#l10.1113"></a><span id="l10.1113" class="difflineplus">+# On Darwin (Mac OS X), dwarf2 debugging uses debug info left in .o files,</span>
<a href="#l10.1114"></a><span id="l10.1114" class="difflineplus">+# so instead of deleting .o files after repacking them into a dylib, we make</span>
<a href="#l10.1115"></a><span id="l10.1115" class="difflineplus">+# symlinks back to the originals. The symlinks are a no-op for stabs debugging,</span>
<a href="#l10.1116"></a><span id="l10.1116" class="difflineplus">+# so no need to conditionalize on OS version or debugging format.</span>
<a href="#l10.1117"></a><span id="l10.1117" class="difflineplus">+</span>
<a href="#l10.1118"></a><span id="l10.1118" class="difflineplus">+$(SHARED_LIBRARY): $(OBJS) $(LOBJS) $(DEF_FILE) $(RESFILE) $(SHARED_LIBRARY_LIBS) $(EXTRA_DEPS) $(DSO_LDOPTS_DEPS) Makefile Makefile.in</span>
<a href="#l10.1119"></a><span id="l10.1119" class="difflineplus">+ifndef INCREMENTAL_LINKER</span>
<a href="#l10.1120"></a><span id="l10.1120" class="difflineplus">+	rm -f $@</span>
<a href="#l10.1121"></a><span id="l10.1121" class="difflineplus">+endif</span>
<a href="#l10.1122"></a><span id="l10.1122" class="difflineplus">+ifneq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.1123"></a><span id="l10.1123" class="difflineplus">+ifeq ($(OS_ARCH),OpenVMS)</span>
<a href="#l10.1124"></a><span id="l10.1124" class="difflineplus">+	@if test ! -f $(VMS_SYMVEC_FILE); then \</span>
<a href="#l10.1125"></a><span id="l10.1125" class="difflineplus">+	  if test -f $(VMS_SYMVEC_FILE_MODULE); then \</span>
<a href="#l10.1126"></a><span id="l10.1126" class="difflineplus">+	    echo Creating specific component options file $(VMS_SYMVEC_FILE); \</span>
<a href="#l10.1127"></a><span id="l10.1127" class="difflineplus">+	    cp $(VMS_SYMVEC_FILE_MODULE) $(VMS_SYMVEC_FILE); \</span>
<a href="#l10.1128"></a><span id="l10.1128" class="difflineplus">+	  fi; \</span>
<a href="#l10.1129"></a><span id="l10.1129" class="difflineplus">+	fi</span>
<a href="#l10.1130"></a><span id="l10.1130" class="difflineplus">+ifdef IS_COMPONENT</span>
<a href="#l10.1131"></a><span id="l10.1131" class="difflineplus">+	@if test ! -f $(VMS_SYMVEC_FILE); then \</span>
<a href="#l10.1132"></a><span id="l10.1132" class="difflineplus">+	  echo Creating generic component options file $(VMS_SYMVEC_FILE); \</span>
<a href="#l10.1133"></a><span id="l10.1133" class="difflineplus">+	  cp $(VMS_SYMVEC_FILE_COMP) $(VMS_SYMVEC_FILE); \</span>
<a href="#l10.1134"></a><span id="l10.1134" class="difflineplus">+	fi</span>
<a href="#l10.1135"></a><span id="l10.1135" class="difflineplus">+endif</span>
<a href="#l10.1136"></a><span id="l10.1136" class="difflineplus">+endif</span>
<a href="#l10.1137"></a><span id="l10.1137" class="difflineplus">+ifdef NO_LD_ARCHIVE_FLAGS</span>
<a href="#l10.1138"></a><span id="l10.1138" class="difflineplus">+ifdef SHARED_LIBRARY_LIBS</span>
<a href="#l10.1139"></a><span id="l10.1139" class="difflineplus">+	@rm -f $(SUB_SHLOBJS)</span>
<a href="#l10.1140"></a><span id="l10.1140" class="difflineplus">+	@for lib in $(SHARED_LIBRARY_LIBS); do $(AR_EXTRACT) $${lib}; $(CLEANUP2); done</span>
<a href="#l10.1141"></a><span id="l10.1141" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l10.1142"></a><span id="l10.1142" class="difflineplus">+	@echo Making symlinks to the original object files in the archive libraries $(SHARED_LIBRARY_LIBS)</span>
<a href="#l10.1143"></a><span id="l10.1143" class="difflineplus">+	@for lib in $(SHARED_LIBRARY_LIBS); do \</span>
<a href="#l10.1144"></a><span id="l10.1144" class="difflineplus">+		libdir=`echo $$lib|sed -e 's,/[^/]*\.a,,'`; \</span>
<a href="#l10.1145"></a><span id="l10.1145" class="difflineplus">+		ofiles=`$(AR_LIST) $${lib}`; \</span>
<a href="#l10.1146"></a><span id="l10.1146" class="difflineplus">+		for ofile in $$ofiles; do \</span>
<a href="#l10.1147"></a><span id="l10.1147" class="difflineplus">+			if [ -f $$libdir/$$ofile ]; then \</span>
<a href="#l10.1148"></a><span id="l10.1148" class="difflineplus">+				rm -f $$ofile; \</span>
<a href="#l10.1149"></a><span id="l10.1149" class="difflineplus">+				ln -s $$libdir/$$ofile $$ofile; \</span>
<a href="#l10.1150"></a><span id="l10.1150" class="difflineplus">+			fi; \</span>
<a href="#l10.1151"></a><span id="l10.1151" class="difflineplus">+		done; \</span>
<a href="#l10.1152"></a><span id="l10.1152" class="difflineplus">+	done</span>
<a href="#l10.1153"></a><span id="l10.1153" class="difflineplus">+endif</span>
<a href="#l10.1154"></a><span id="l10.1154" class="difflineplus">+endif # SHARED_LIBRARY_LIBS</span>
<a href="#l10.1155"></a><span id="l10.1155" class="difflineplus">+endif # NO_LD_ARCHIVE_FLAGS</span>
<a href="#l10.1156"></a><span id="l10.1156" class="difflineplus">+ifdef DTRACE_LIB_DEPENDENT</span>
<a href="#l10.1157"></a><span id="l10.1157" class="difflineplus">+	@rm -f $(PROBE_LOBJS)</span>
<a href="#l10.1158"></a><span id="l10.1158" class="difflineplus">+	@for lib in $(MOZILLA_PROBE_LIBS); do $(AR_EXTRACT) $${lib}; $(CLEANUP2); done</span>
<a href="#l10.1159"></a><span id="l10.1159" class="difflineplus">+ifndef XP_MACOSX</span>
<a href="#l10.1160"></a><span id="l10.1160" class="difflineplus">+	dtrace -G -C -32 -s $(MOZILLA_DTRACE_SRC) -o  $(DTRACE_PROBE_OBJ) $(PROBE_LOBJS)</span>
<a href="#l10.1161"></a><span id="l10.1161" class="difflineplus">+endif</span>
<a href="#l10.1162"></a><span id="l10.1162" class="difflineplus">+	@for lib in $(MOZILLA_PROBE_LIBS); do \</span>
<a href="#l10.1163"></a><span id="l10.1163" class="difflineplus">+		ofiles=`$(AR_LIST) $${lib}`; \</span>
<a href="#l10.1164"></a><span id="l10.1164" class="difflineplus">+		$(AR_DELETE) $${lib} $$ofiles; \</span>
<a href="#l10.1165"></a><span id="l10.1165" class="difflineplus">+	done</span>
<a href="#l10.1166"></a><span id="l10.1166" class="difflineplus">+	$(MKSHLIB) $(SHLIB_LDSTARTFILE) $(OBJS) $(LOBJS) $(SUB_SHLOBJS) $(DTRACE_PROBE_OBJ) $(PROBE_LOBJS) $(RESFILE) $(LDFLAGS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE) $(SHLIB_LDENDFILE)</span>
<a href="#l10.1167"></a><span id="l10.1167" class="difflineplus">+	@rm -f $(PROBE_LOBJS)</span>
<a href="#l10.1168"></a><span id="l10.1168" class="difflineplus">+	@rm -f $(DTRACE_PROBE_OBJ)</span>
<a href="#l10.1169"></a><span id="l10.1169" class="difflineplus">+	@for lib in $(MOZILLA_PROBE_LIBS); do \</span>
<a href="#l10.1170"></a><span id="l10.1170" class="difflineplus">+		if [ -L $${lib} ]; then rm -f `readlink $${lib}`; fi; \</span>
<a href="#l10.1171"></a><span id="l10.1171" class="difflineplus">+	done</span>
<a href="#l10.1172"></a><span id="l10.1172" class="difflineplus">+	@rm -f $(MOZILLA_PROBE_LIBS)</span>
<a href="#l10.1173"></a><span id="l10.1173" class="difflineplus">+</span>
<a href="#l10.1174"></a><span id="l10.1174" class="difflineplus">+else</span>
<a href="#l10.1175"></a><span id="l10.1175" class="difflineplus">+	$(MKSHLIB) $(SHLIB_LDSTARTFILE) $(OBJS) $(DTRACE_PROBE_OBJ) $(LOBJS) $(SUB_SHLOBJS) $(RESFILE) $(LDFLAGS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE) $(SHLIB_LDENDFILE)</span>
<a href="#l10.1176"></a><span id="l10.1176" class="difflineplus">+endif # DTRACE_LIB_DEPENDENT</span>
<a href="#l10.1177"></a><span id="l10.1177" class="difflineplus">+</span>
<a href="#l10.1178"></a><span id="l10.1178" class="difflineplus">+ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l10.1179"></a><span id="l10.1179" class="difflineplus">+ifdef MSMANIFEST_TOOL</span>
<a href="#l10.1180"></a><span id="l10.1180" class="difflineplus">+ifdef EMBED_MANIFEST_AT</span>
<a href="#l10.1181"></a><span id="l10.1181" class="difflineplus">+	@if test -f $@.manifest; then \</span>
<a href="#l10.1182"></a><span id="l10.1182" class="difflineplus">+		mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;$(EMBED_MANIFEST_AT); \</span>
<a href="#l10.1183"></a><span id="l10.1183" class="difflineplus">+		rm -f $@.manifest; \</span>
<a href="#l10.1184"></a><span id="l10.1184" class="difflineplus">+	fi</span>
<a href="#l10.1185"></a><span id="l10.1185" class="difflineplus">+endif   # EMBED_MANIFEST_AT</span>
<a href="#l10.1186"></a><span id="l10.1186" class="difflineplus">+endif	# MSVC with manifest tool</span>
<a href="#l10.1187"></a><span id="l10.1187" class="difflineplus">+endif	# WINNT &amp;&amp; !GCC</span>
<a href="#l10.1188"></a><span id="l10.1188" class="difflineplus">+ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l10.1189"></a><span id="l10.1189" class="difflineplus">+else # non-Darwin</span>
<a href="#l10.1190"></a><span id="l10.1190" class="difflineplus">+	@rm -f $(SUB_SHLOBJS)</span>
<a href="#l10.1191"></a><span id="l10.1191" class="difflineplus">+endif # Darwin</span>
<a href="#l10.1192"></a><span id="l10.1192" class="difflineplus">+	@rm -f foodummyfilefoo $(DELETE_AFTER_LINK)</span>
<a href="#l10.1193"></a><span id="l10.1193" class="difflineplus">+else # os2 vacpp</span>
<a href="#l10.1194"></a><span id="l10.1194" class="difflineplus">+	$(MKSHLIB) -O:$@ -DLL -INC:_dllentry $(LDFLAGS) $(OBJS) $(LOBJS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE)</span>
<a href="#l10.1195"></a><span id="l10.1195" class="difflineplus">+endif # !os2 vacpp</span>
<a href="#l10.1196"></a><span id="l10.1196" class="difflineplus">+	chmod +x $@</span>
<a href="#l10.1197"></a><span id="l10.1197" class="difflineplus">+ifdef ENABLE_STRIP</span>
<a href="#l10.1198"></a><span id="l10.1198" class="difflineplus">+	$(STRIP) $@</span>
<a href="#l10.1199"></a><span id="l10.1199" class="difflineplus">+endif</span>
<a href="#l10.1200"></a><span id="l10.1200" class="difflineplus">+ifdef MOZ_POST_DSO_LIB_COMMAND</span>
<a href="#l10.1201"></a><span id="l10.1201" class="difflineplus">+	$(MOZ_POST_DSO_LIB_COMMAND) $@</span>
<a href="#l10.1202"></a><span id="l10.1202" class="difflineplus">+endif</span>
<a href="#l10.1203"></a><span id="l10.1203" class="difflineplus">+</span>
<a href="#l10.1204"></a><span id="l10.1204" class="difflineplus">+ifdef MOZ_AUTO_DEPS</span>
<a href="#l10.1205"></a><span id="l10.1205" class="difflineplus">+ifdef COMPILER_DEPEND</span>
<a href="#l10.1206"></a><span id="l10.1206" class="difflineplus">+ifeq (__SunOS,$(GNU_CC)_$(GNU_CXX)_$(OS_ARCH))</span>
<a href="#l10.1207"></a><span id="l10.1207" class="difflineplus">+_MDDEPFILE = $(MDDEPDIR)/$(@F).pp</span>
<a href="#l10.1208"></a><span id="l10.1208" class="difflineplus">+</span>
<a href="#l10.1209"></a><span id="l10.1209" class="difflineplus">+define MAKE_DEPS_AUTO_CC</span>
<a href="#l10.1210"></a><span id="l10.1210" class="difflineplus">+if test -d $(@D); then \</span>
<a href="#l10.1211"></a><span id="l10.1211" class="difflineplus">+	echo &quot;Building deps for $&lt; using Sun Studio cc&quot;; \</span>
<a href="#l10.1212"></a><span id="l10.1212" class="difflineplus">+	$(CC) $(COMPILE_CFLAGS) -xM  $&lt; &gt;$(_MDDEPFILE) ; \</span>
<a href="#l10.1213"></a><span id="l10.1213" class="difflineplus">+fi</span>
<a href="#l10.1214"></a><span id="l10.1214" class="difflineplus">+endef</span>
<a href="#l10.1215"></a><span id="l10.1215" class="difflineplus">+define MAKE_DEPS_AUTO_CXX</span>
<a href="#l10.1216"></a><span id="l10.1216" class="difflineplus">+if test -d $(@D); then \</span>
<a href="#l10.1217"></a><span id="l10.1217" class="difflineplus">+	echo &quot;Building deps for $&lt; using Sun Studio CC&quot;; \</span>
<a href="#l10.1218"></a><span id="l10.1218" class="difflineplus">+	$(CXX) $(COMPILE_CXXFLAGS) -xM $&lt; &gt;$(_MDDEPFILE) ; \</span>
<a href="#l10.1219"></a><span id="l10.1219" class="difflineplus">+fi</span>
<a href="#l10.1220"></a><span id="l10.1220" class="difflineplus">+endef</span>
<a href="#l10.1221"></a><span id="l10.1221" class="difflineplus">+endif # Sun Studio on Solaris</span>
<a href="#l10.1222"></a><span id="l10.1222" class="difflineplus">+else # COMPILER_DEPEND</span>
<a href="#l10.1223"></a><span id="l10.1223" class="difflineplus">+#</span>
<a href="#l10.1224"></a><span id="l10.1224" class="difflineplus">+# Generate dependencies on the fly</span>
<a href="#l10.1225"></a><span id="l10.1225" class="difflineplus">+#</span>
<a href="#l10.1226"></a><span id="l10.1226" class="difflineplus">+_MDDEPFILE = $(MDDEPDIR)/$(@F).pp</span>
<a href="#l10.1227"></a><span id="l10.1227" class="difflineplus">+</span>
<a href="#l10.1228"></a><span id="l10.1228" class="difflineplus">+define MAKE_DEPS_AUTO</span>
<a href="#l10.1229"></a><span id="l10.1229" class="difflineplus">+if test -d $(@D); then \</span>
<a href="#l10.1230"></a><span id="l10.1230" class="difflineplus">+	echo &quot;Building deps for $&lt;&quot;; \</span>
<a href="#l10.1231"></a><span id="l10.1231" class="difflineplus">+	$(MKDEPEND) -o'.$(OBJ_SUFFIX)' -f- $(DEFINES) $(ACDEFINES) $(INCLUDES) $&lt; 2&gt;/dev/null | sed -e &quot;s|^[^ ]*/||&quot; &gt; $(_MDDEPFILE) ; \</span>
<a href="#l10.1232"></a><span id="l10.1232" class="difflineplus">+fi</span>
<a href="#l10.1233"></a><span id="l10.1233" class="difflineplus">+endef</span>
<a href="#l10.1234"></a><span id="l10.1234" class="difflineplus">+</span>
<a href="#l10.1235"></a><span id="l10.1235" class="difflineplus">+MAKE_DEPS_AUTO_CC = $(MAKE_DEPS_AUTO)</span>
<a href="#l10.1236"></a><span id="l10.1236" class="difflineplus">+MAKE_DEPS_AUTO_CXX = $(MAKE_DEPS_AUTO)</span>
<a href="#l10.1237"></a><span id="l10.1237" class="difflineplus">+</span>
<a href="#l10.1238"></a><span id="l10.1238" class="difflineplus">+endif # COMPILER_DEPEND</span>
<a href="#l10.1239"></a><span id="l10.1239" class="difflineplus">+</span>
<a href="#l10.1240"></a><span id="l10.1240" class="difflineplus">+endif # MOZ_AUTO_DEPS</span>
<a href="#l10.1241"></a><span id="l10.1241" class="difflineplus">+</span>
<a href="#l10.1242"></a><span id="l10.1242" class="difflineplus">+ifdef MOZ_MEMORY</span>
<a href="#l10.1243"></a><span id="l10.1243" class="difflineplus">+ifeq ($(OS_ARCH),SunOS)</span>
<a href="#l10.1244"></a><span id="l10.1244" class="difflineplus">+SOLARIS_JEMALLOC_LDFLAGS = $(call EXPAND_LIBNAME_PATH,jemalloc,$(DIST)/lib)</span>
<a href="#l10.1245"></a><span id="l10.1245" class="difflineplus">+endif</span>
<a href="#l10.1246"></a><span id="l10.1246" class="difflineplus">+endif</span>
<a href="#l10.1247"></a><span id="l10.1247" class="difflineplus">+</span>
<a href="#l10.1248"></a><span id="l10.1248" class="difflineplus">+# Rules for building native targets must come first because of the host_ prefix</span>
<a href="#l10.1249"></a><span id="l10.1249" class="difflineplus">+host_%.$(OBJ_SUFFIX): %.c Makefile Makefile.in</span>
<a href="#l10.1250"></a><span id="l10.1250" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1251"></a><span id="l10.1251" class="difflineplus">+	$(ELOG) $(HOST_CC) $(HOST_OUTOPTION)$@ -c $(HOST_CFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1252"></a><span id="l10.1252" class="difflineplus">+</span>
<a href="#l10.1253"></a><span id="l10.1253" class="difflineplus">+host_%.$(OBJ_SUFFIX): %.cpp Makefile Makefile.in</span>
<a href="#l10.1254"></a><span id="l10.1254" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1255"></a><span id="l10.1255" class="difflineplus">+	$(ELOG) $(HOST_CXX) $(HOST_OUTOPTION)$@ -c $(HOST_CXXFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1256"></a><span id="l10.1256" class="difflineplus">+</span>
<a href="#l10.1257"></a><span id="l10.1257" class="difflineplus">+host_%.$(OBJ_SUFFIX): %.cc Makefile Makefile.in</span>
<a href="#l10.1258"></a><span id="l10.1258" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1259"></a><span id="l10.1259" class="difflineplus">+	$(ELOG) $(HOST_CXX) $(HOST_OUTOPTION)$@ -c $(HOST_CXXFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1260"></a><span id="l10.1260" class="difflineplus">+</span>
<a href="#l10.1261"></a><span id="l10.1261" class="difflineplus">+host_%.$(OBJ_SUFFIX): %.m Makefile Makefile.in</span>
<a href="#l10.1262"></a><span id="l10.1262" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1263"></a><span id="l10.1263" class="difflineplus">+	$(ELOG) $(HOST_CC) $(HOST_OUTOPTION)$@ -c $(HOST_CFLAGS) $(HOST_CMFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1264"></a><span id="l10.1264" class="difflineplus">+</span>
<a href="#l10.1265"></a><span id="l10.1265" class="difflineplus">+host_%.$(OBJ_SUFFIX): %.mm Makefile Makefile.in</span>
<a href="#l10.1266"></a><span id="l10.1266" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1267"></a><span id="l10.1267" class="difflineplus">+	$(ELOG) $(HOST_CXX) $(HOST_OUTOPTION)$@ -c $(HOST_CXXFLAGS) $(HOST_CMMFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1268"></a><span id="l10.1268" class="difflineplus">+</span>
<a href="#l10.1269"></a><span id="l10.1269" class="difflineplus">+%: %.c Makefile Makefile.in</span>
<a href="#l10.1270"></a><span id="l10.1270" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1271"></a><span id="l10.1271" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l10.1272"></a><span id="l10.1272" class="difflineplus">+	$(ELOG) $(CC) $(CFLAGS) $(LDFLAGS) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l10.1273"></a><span id="l10.1273" class="difflineplus">+</span>
<a href="#l10.1274"></a><span id="l10.1274" class="difflineplus">+%.$(OBJ_SUFFIX): %.c Makefile Makefile.in</span>
<a href="#l10.1275"></a><span id="l10.1275" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1276"></a><span id="l10.1276" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l10.1277"></a><span id="l10.1277" class="difflineplus">+	$(ELOG) $(CC) $(OUTOPTION)$@ -c $(COMPILE_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1278"></a><span id="l10.1278" class="difflineplus">+</span>
<a href="#l10.1279"></a><span id="l10.1279" class="difflineplus">+moc_%.cpp: %.h Makefile Makefile.in</span>
<a href="#l10.1280"></a><span id="l10.1280" class="difflineplus">+	$(MOC) $&lt; $(OUTOPTION)$@ </span>
<a href="#l10.1281"></a><span id="l10.1281" class="difflineplus">+</span>
<a href="#l10.1282"></a><span id="l10.1282" class="difflineplus">+ifdef ASFILES</span>
<a href="#l10.1283"></a><span id="l10.1283" class="difflineplus">+# The AS_DASH_C_FLAG is needed cause not all assemblers (Solaris) accept</span>
<a href="#l10.1284"></a><span id="l10.1284" class="difflineplus">+# a '-c' flag.</span>
<a href="#l10.1285"></a><span id="l10.1285" class="difflineplus">+%.$(OBJ_SUFFIX): %.$(ASM_SUFFIX) Makefile Makefile.in</span>
<a href="#l10.1286"></a><span id="l10.1286" class="difflineplus">+ifeq ($(MOZ_OS2_TOOLS),VACPP)</span>
<a href="#l10.1287"></a><span id="l10.1287" class="difflineplus">+	$(AS) -Fdo:./$(OBJDIR) -Feo:.$(OBJ_SUFFIX) $(ASFLAGS) $(AS_DASH_C_FLAG) $&lt;</span>
<a href="#l10.1288"></a><span id="l10.1288" class="difflineplus">+else</span>
<a href="#l10.1289"></a><span id="l10.1289" class="difflineplus">+	$(AS) -o $@ $(ASFLAGS) $(AS_DASH_C_FLAG) $(_VPATH_SRCS)</span>
<a href="#l10.1290"></a><span id="l10.1290" class="difflineplus">+endif</span>
<a href="#l10.1291"></a><span id="l10.1291" class="difflineplus">+endif</span>
<a href="#l10.1292"></a><span id="l10.1292" class="difflineplus">+</span>
<a href="#l10.1293"></a><span id="l10.1293" class="difflineplus">+%.$(OBJ_SUFFIX): %.S Makefile Makefile.in</span>
<a href="#l10.1294"></a><span id="l10.1294" class="difflineplus">+	$(AS) -o $@ $(ASFLAGS) -c $&lt;</span>
<a href="#l10.1295"></a><span id="l10.1295" class="difflineplus">+</span>
<a href="#l10.1296"></a><span id="l10.1296" class="difflineplus">+%: %.cpp Makefile Makefile.in</span>
<a href="#l10.1297"></a><span id="l10.1297" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l10.1298"></a><span id="l10.1298" class="difflineplus">+	$(CCC) $(OUTOPTION)$@ $(CXXFLAGS) $(_VPATH_SRCS) $(LDFLAGS)</span>
<a href="#l10.1299"></a><span id="l10.1299" class="difflineplus">+</span>
<a href="#l10.1300"></a><span id="l10.1300" class="difflineplus">+#</span>
<a href="#l10.1301"></a><span id="l10.1301" class="difflineplus">+# Please keep the next two rules in sync.</span>
<a href="#l10.1302"></a><span id="l10.1302" class="difflineplus">+#</span>
<a href="#l10.1303"></a><span id="l10.1303" class="difflineplus">+%.$(OBJ_SUFFIX): %.cc Makefile Makefile.in</span>
<a href="#l10.1304"></a><span id="l10.1304" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1305"></a><span id="l10.1305" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l10.1306"></a><span id="l10.1306" class="difflineplus">+	$(ELOG) $(CCC) $(OUTOPTION)$@ -c $(COMPILE_CXXFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1307"></a><span id="l10.1307" class="difflineplus">+</span>
<a href="#l10.1308"></a><span id="l10.1308" class="difflineplus">+%.$(OBJ_SUFFIX): %.cpp Makefile Makefile.in</span>
<a href="#l10.1309"></a><span id="l10.1309" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1310"></a><span id="l10.1310" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l10.1311"></a><span id="l10.1311" class="difflineplus">+ifdef STRICT_CPLUSPLUS_SUFFIX</span>
<a href="#l10.1312"></a><span id="l10.1312" class="difflineplus">+	echo &quot;#line 1 \&quot;$*.cpp\&quot;&quot; | cat - $*.cpp &gt; t_$*.cc</span>
<a href="#l10.1313"></a><span id="l10.1313" class="difflineplus">+	$(ELOG) $(CCC) -o $@ -c $(COMPILE_CXXFLAGS) t_$*.cc</span>
<a href="#l10.1314"></a><span id="l10.1314" class="difflineplus">+	rm -f t_$*.cc</span>
<a href="#l10.1315"></a><span id="l10.1315" class="difflineplus">+else</span>
<a href="#l10.1316"></a><span id="l10.1316" class="difflineplus">+	$(ELOG) $(CCC) $(OUTOPTION)$@ -c $(COMPILE_CXXFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1317"></a><span id="l10.1317" class="difflineplus">+endif #STRICT_CPLUSPLUS_SUFFIX</span>
<a href="#l10.1318"></a><span id="l10.1318" class="difflineplus">+</span>
<a href="#l10.1319"></a><span id="l10.1319" class="difflineplus">+$(OBJ_PREFIX)%.$(OBJ_SUFFIX): %.mm Makefile Makefile.in</span>
<a href="#l10.1320"></a><span id="l10.1320" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1321"></a><span id="l10.1321" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l10.1322"></a><span id="l10.1322" class="difflineplus">+	$(ELOG) $(CCC) -o $@ -c $(COMPILE_CXXFLAGS) $(COMPILE_CMMFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1323"></a><span id="l10.1323" class="difflineplus">+</span>
<a href="#l10.1324"></a><span id="l10.1324" class="difflineplus">+$(OBJ_PREFIX)%.$(OBJ_SUFFIX): %.m Makefile Makefile.in</span>
<a href="#l10.1325"></a><span id="l10.1325" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1326"></a><span id="l10.1326" class="difflineplus">+	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l10.1327"></a><span id="l10.1327" class="difflineplus">+	$(ELOG) $(CC) -o $@ -c $(COMPILE_CFLAGS) $(COMPILE_CMFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1328"></a><span id="l10.1328" class="difflineplus">+</span>
<a href="#l10.1329"></a><span id="l10.1329" class="difflineplus">+%.s: %.cpp</span>
<a href="#l10.1330"></a><span id="l10.1330" class="difflineplus">+	$(CCC) -S $(COMPILE_CXXFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1331"></a><span id="l10.1331" class="difflineplus">+</span>
<a href="#l10.1332"></a><span id="l10.1332" class="difflineplus">+%.s: %.cc</span>
<a href="#l10.1333"></a><span id="l10.1333" class="difflineplus">+	$(CCC) -S $(COMPILE_CXXFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1334"></a><span id="l10.1334" class="difflineplus">+</span>
<a href="#l10.1335"></a><span id="l10.1335" class="difflineplus">+%.s: %.c</span>
<a href="#l10.1336"></a><span id="l10.1336" class="difflineplus">+	$(CC) -S $(COMPILE_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l10.1337"></a><span id="l10.1337" class="difflineplus">+</span>
<a href="#l10.1338"></a><span id="l10.1338" class="difflineplus">+%.i: %.cpp</span>
<a href="#l10.1339"></a><span id="l10.1339" class="difflineplus">+	$(CCC) -C -E $(COMPILE_CXXFLAGS) $(_VPATH_SRCS) &gt; $*.i</span>
<a href="#l10.1340"></a><span id="l10.1340" class="difflineplus">+</span>
<a href="#l10.1341"></a><span id="l10.1341" class="difflineplus">+%.i: %.cc</span>
<a href="#l10.1342"></a><span id="l10.1342" class="difflineplus">+	$(CCC) -C -E $(COMPILE_CXXFLAGS) $(_VPATH_SRCS) &gt; $*.i</span>
<a href="#l10.1343"></a><span id="l10.1343" class="difflineplus">+</span>
<a href="#l10.1344"></a><span id="l10.1344" class="difflineplus">+%.i: %.c</span>
<a href="#l10.1345"></a><span id="l10.1345" class="difflineplus">+	$(CC) -C -E $(COMPILE_CFLAGS) $(_VPATH_SRCS) &gt; $*.i</span>
<a href="#l10.1346"></a><span id="l10.1346" class="difflineplus">+</span>
<a href="#l10.1347"></a><span id="l10.1347" class="difflineplus">+%.i: %.mm</span>
<a href="#l10.1348"></a><span id="l10.1348" class="difflineplus">+	$(CCC) -C -E $(COMPILE_CXXFLAGS) $(COMPILE_CMMFLAGS) $(_VPATH_SRCS) &gt; $*.i</span>
<a href="#l10.1349"></a><span id="l10.1349" class="difflineplus">+</span>
<a href="#l10.1350"></a><span id="l10.1350" class="difflineplus">+%.res: %.rc</span>
<a href="#l10.1351"></a><span id="l10.1351" class="difflineplus">+	@echo Creating Resource file: $@</span>
<a href="#l10.1352"></a><span id="l10.1352" class="difflineplus">+ifeq ($(OS_ARCH),OS2)</span>
<a href="#l10.1353"></a><span id="l10.1353" class="difflineplus">+	$(RC) $(RCFLAGS:-D%=-d %) -i $(subst /,\,$(srcdir)) -r $&lt; $@</span>
<a href="#l10.1354"></a><span id="l10.1354" class="difflineplus">+else</span>
<a href="#l10.1355"></a><span id="l10.1355" class="difflineplus">+ifdef GNU_CC</span>
<a href="#l10.1356"></a><span id="l10.1356" class="difflineplus">+	$(RC) $(RCFLAGS) $(filter-out -U%,$(DEFINES)) $(INCLUDES:-I%=--include-dir %) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l10.1357"></a><span id="l10.1357" class="difflineplus">+else</span>
<a href="#l10.1358"></a><span id="l10.1358" class="difflineplus">+	$(RC) $(RCFLAGS) -r $(DEFINES) $(INCLUDES) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l10.1359"></a><span id="l10.1359" class="difflineplus">+endif</span>
<a href="#l10.1360"></a><span id="l10.1360" class="difflineplus">+endif</span>
<a href="#l10.1361"></a><span id="l10.1361" class="difflineplus">+</span>
<a href="#l10.1362"></a><span id="l10.1362" class="difflineplus">+# need 3 separate lines for OS/2</span>
<a href="#l10.1363"></a><span id="l10.1363" class="difflineplus">+%: %.pl</span>
<a href="#l10.1364"></a><span id="l10.1364" class="difflineplus">+	rm -f $@</span>
<a href="#l10.1365"></a><span id="l10.1365" class="difflineplus">+	cp $&lt; $@</span>
<a href="#l10.1366"></a><span id="l10.1366" class="difflineplus">+	chmod +x $@</span>
<a href="#l10.1367"></a><span id="l10.1367" class="difflineplus">+</span>
<a href="#l10.1368"></a><span id="l10.1368" class="difflineplus">+%: %.sh</span>
<a href="#l10.1369"></a><span id="l10.1369" class="difflineplus">+	rm -f $@; cp $&lt; $@; chmod +x $@</span>
<a href="#l10.1370"></a><span id="l10.1370" class="difflineplus">+</span>
<a href="#l10.1371"></a><span id="l10.1371" class="difflineplus">+# Cancel these implicit rules</span>
<a href="#l10.1372"></a><span id="l10.1372" class="difflineplus">+#</span>
<a href="#l10.1373"></a><span id="l10.1373" class="difflineplus">+%: %,v</span>
<a href="#l10.1374"></a><span id="l10.1374" class="difflineplus">+</span>
<a href="#l10.1375"></a><span id="l10.1375" class="difflineplus">+%: RCS/%,v</span>
<a href="#l10.1376"></a><span id="l10.1376" class="difflineplus">+</span>
<a href="#l10.1377"></a><span id="l10.1377" class="difflineplus">+%: s.%</span>
<a href="#l10.1378"></a><span id="l10.1378" class="difflineplus">+</span>
<a href="#l10.1379"></a><span id="l10.1379" class="difflineplus">+%: SCCS/s.%</span>
<a href="#l10.1380"></a><span id="l10.1380" class="difflineplus">+</span>
<a href="#l10.1381"></a><span id="l10.1381" class="difflineplus">+###############################################################################</span>
<a href="#l10.1382"></a><span id="l10.1382" class="difflineplus">+# Java rules</span>
<a href="#l10.1383"></a><span id="l10.1383" class="difflineplus">+###############################################################################</span>
<a href="#l10.1384"></a><span id="l10.1384" class="difflineplus">+ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l10.1385"></a><span id="l10.1385" class="difflineplus">+SEP := ;</span>
<a href="#l10.1386"></a><span id="l10.1386" class="difflineplus">+else</span>
<a href="#l10.1387"></a><span id="l10.1387" class="difflineplus">+SEP := :</span>
<a href="#l10.1388"></a><span id="l10.1388" class="difflineplus">+endif</span>
<a href="#l10.1389"></a><span id="l10.1389" class="difflineplus">+</span>
<a href="#l10.1390"></a><span id="l10.1390" class="difflineplus">+EMPTY :=</span>
<a href="#l10.1391"></a><span id="l10.1391" class="difflineplus">+SPACE := $(EMPTY) $(EMPTY)</span>
<a href="#l10.1392"></a><span id="l10.1392" class="difflineplus">+</span>
<a href="#l10.1393"></a><span id="l10.1393" class="difflineplus">+# Cygwin and MSYS have their own special path form, but javac expects the source</span>
<a href="#l10.1394"></a><span id="l10.1394" class="difflineplus">+# and class paths to be in the DOS form (i.e. e:/builds/...).  This function</span>
<a href="#l10.1395"></a><span id="l10.1395" class="difflineplus">+# does the appropriate conversion on Windows, but is a noop on other systems.</span>
<a href="#l10.1396"></a><span id="l10.1396" class="difflineplus">+ifeq (,$(filter-out WINNT WINCE, $(HOST_OS_ARCH)))</span>
<a href="#l10.1397"></a><span id="l10.1397" class="difflineplus">+ifdef CYGWIN_WRAPPER</span>
<a href="#l10.1398"></a><span id="l10.1398" class="difflineplus">+normalizepath = $(foreach p,$(1),$(shell cygpath -m $(p)))</span>
<a href="#l10.1399"></a><span id="l10.1399" class="difflineplus">+else</span>
<a href="#l10.1400"></a><span id="l10.1400" class="difflineplus">+# assume MSYS</span>
<a href="#l10.1401"></a><span id="l10.1401" class="difflineplus">+#  We use 'pwd -W' to get DOS form of the path.  However, since the given path</span>
<a href="#l10.1402"></a><span id="l10.1402" class="difflineplus">+#  could be a file or a non-existent path, we cannot call 'pwd -W' directly</span>
<a href="#l10.1403"></a><span id="l10.1403" class="difflineplus">+#  on the path.  Instead, we extract the root path (i.e. &quot;c:/&quot;), call 'pwd -W'</span>
<a href="#l10.1404"></a><span id="l10.1404" class="difflineplus">+#  on it, then merge with the rest of the path.</span>
<a href="#l10.1405"></a><span id="l10.1405" class="difflineplus">+root-path = $(shell echo $(1) | sed -e &quot;s|\(/[^/]*\)/\?\(.*\)|\1|&quot;)</span>
<a href="#l10.1406"></a><span id="l10.1406" class="difflineplus">+non-root-path = $(shell echo $(1) | sed -e &quot;s|\(/[^/]*\)/\?\(.*\)|\2|&quot;)</span>
<a href="#l10.1407"></a><span id="l10.1407" class="difflineplus">+normalizepath = $(foreach p,$(1),$(if $(filter /%,$(1)),$(shell cd $(call root-path,$(1)) &amp;&amp; pwd -W)$(call non-root-path,$(1)),$(1)))</span>
<a href="#l10.1408"></a><span id="l10.1408" class="difflineplus">+endif</span>
<a href="#l10.1409"></a><span id="l10.1409" class="difflineplus">+else</span>
<a href="#l10.1410"></a><span id="l10.1410" class="difflineplus">+normalizepath = $(1)</span>
<a href="#l10.1411"></a><span id="l10.1411" class="difflineplus">+endif</span>
<a href="#l10.1412"></a><span id="l10.1412" class="difflineplus">+</span>
<a href="#l10.1413"></a><span id="l10.1413" class="difflineplus">+_srcdir = $(call normalizepath,$(srcdir))</span>
<a href="#l10.1414"></a><span id="l10.1414" class="difflineplus">+ifdef JAVA_SOURCEPATH</span>
<a href="#l10.1415"></a><span id="l10.1415" class="difflineplus">+SP = $(subst $(SPACE),$(SEP),$(call normalizepath,$(strip $(JAVA_SOURCEPATH))))</span>
<a href="#l10.1416"></a><span id="l10.1416" class="difflineplus">+_JAVA_SOURCEPATH = &quot;.$(SEP)$(_srcdir)$(SEP)$(SP)&quot;</span>
<a href="#l10.1417"></a><span id="l10.1417" class="difflineplus">+else</span>
<a href="#l10.1418"></a><span id="l10.1418" class="difflineplus">+_JAVA_SOURCEPATH = &quot;.$(SEP)$(_srcdir)&quot;</span>
<a href="#l10.1419"></a><span id="l10.1419" class="difflineplus">+endif</span>
<a href="#l10.1420"></a><span id="l10.1420" class="difflineplus">+</span>
<a href="#l10.1421"></a><span id="l10.1421" class="difflineplus">+ifdef JAVA_CLASSPATH</span>
<a href="#l10.1422"></a><span id="l10.1422" class="difflineplus">+CP = $(subst $(SPACE),$(SEP),$(call normalizepath,$(strip $(JAVA_CLASSPATH))))</span>
<a href="#l10.1423"></a><span id="l10.1423" class="difflineplus">+_JAVA_CLASSPATH = &quot;.$(SEP)$(CP)&quot;</span>
<a href="#l10.1424"></a><span id="l10.1424" class="difflineplus">+else</span>
<a href="#l10.1425"></a><span id="l10.1425" class="difflineplus">+_JAVA_CLASSPATH = .</span>
<a href="#l10.1426"></a><span id="l10.1426" class="difflineplus">+endif</span>
<a href="#l10.1427"></a><span id="l10.1427" class="difflineplus">+</span>
<a href="#l10.1428"></a><span id="l10.1428" class="difflineplus">+_JAVA_DIR = _java</span>
<a href="#l10.1429"></a><span id="l10.1429" class="difflineplus">+$(_JAVA_DIR)::</span>
<a href="#l10.1430"></a><span id="l10.1430" class="difflineplus">+	$(NSINSTALL) -D $@</span>
<a href="#l10.1431"></a><span id="l10.1431" class="difflineplus">+</span>
<a href="#l10.1432"></a><span id="l10.1432" class="difflineplus">+$(_JAVA_DIR)/%.class: %.java Makefile Makefile.in $(_JAVA_DIR)</span>
<a href="#l10.1433"></a><span id="l10.1433" class="difflineplus">+	$(CYGWIN_WRAPPER) $(JAVAC) $(JAVAC_FLAGS) -classpath $(_JAVA_CLASSPATH) \</span>
<a href="#l10.1434"></a><span id="l10.1434" class="difflineplus">+			-sourcepath $(_JAVA_SOURCEPATH) -d $(_JAVA_DIR) $(_VPATH_SRCS)</span>
<a href="#l10.1435"></a><span id="l10.1435" class="difflineplus">+</span>
<a href="#l10.1436"></a><span id="l10.1436" class="difflineplus">+$(JAVA_LIBRARY): $(addprefix $(_JAVA_DIR)/,$(JAVA_SRCS:.java=.class)) Makefile Makefile.in</span>
<a href="#l10.1437"></a><span id="l10.1437" class="difflineplus">+	$(JAR) cf $@ -C $(_JAVA_DIR) .</span>
<a href="#l10.1438"></a><span id="l10.1438" class="difflineplus">+</span>
<a href="#l10.1439"></a><span id="l10.1439" class="difflineplus">+GARBAGE_DIRS += $(_JAVA_DIR)</span>
<a href="#l10.1440"></a><span id="l10.1440" class="difflineplus">+</span>
<a href="#l10.1441"></a><span id="l10.1441" class="difflineplus">+###############################################################################</span>
<a href="#l10.1442"></a><span id="l10.1442" class="difflineplus">+# Update Makefiles</span>
<a href="#l10.1443"></a><span id="l10.1443" class="difflineplus">+###############################################################################</span>
<a href="#l10.1444"></a><span id="l10.1444" class="difflineplus">+</span>
<a href="#l10.1445"></a><span id="l10.1445" class="difflineplus">+# In GNU make 3.80, makefiles must use the /cygdrive syntax, even if we're</span>
<a href="#l10.1446"></a><span id="l10.1446" class="difflineplus">+# processing them with AS perl. See bug 232003</span>
<a href="#l10.1447"></a><span id="l10.1447" class="difflineplus">+ifdef AS_PERL</span>
<a href="#l10.1448"></a><span id="l10.1448" class="difflineplus">+CYGWIN_TOPSRCDIR = -nowrap -p $(topsrcdir) -wrap</span>
<a href="#l10.1449"></a><span id="l10.1449" class="difflineplus">+endif</span>
<a href="#l10.1450"></a><span id="l10.1450" class="difflineplus">+</span>
<a href="#l10.1451"></a><span id="l10.1451" class="difflineplus">+# Note: Passing depth to make-makefile is optional.</span>
<a href="#l10.1452"></a><span id="l10.1452" class="difflineplus">+#       It saves the script some work, though.</span>
<a href="#l10.1453"></a><span id="l10.1453" class="difflineplus">+Makefile: Makefile.in</span>
<a href="#l10.1454"></a><span id="l10.1454" class="difflineplus">+	@$(PERL) $(AUTOCONF_TOOLS)/make-makefile -t $(topsrcdir) -d $(DEPTH) $(CYGWIN_TOPSRCDIR)</span>
<a href="#l10.1455"></a><span id="l10.1455" class="difflineplus">+</span>
<a href="#l10.1456"></a><span id="l10.1456" class="difflineplus">+ifdef SUBMAKEFILES</span>
<a href="#l10.1457"></a><span id="l10.1457" class="difflineplus">+# VPATH does not work on some machines in this case, so add $(srcdir)</span>
<a href="#l10.1458"></a><span id="l10.1458" class="difflineplus">+$(SUBMAKEFILES): % : $(srcdir)/%.in</span>
<a href="#l10.1459"></a><span id="l10.1459" class="difflineplus">+	$(PERL) $(AUTOCONF_TOOLS)/make-makefile -t $(topsrcdir) -d $(DEPTH) $(CYGWIN_TOPSRCDIR) $@</span>
<a href="#l10.1460"></a><span id="l10.1460" class="difflineplus">+endif</span>
<a href="#l10.1461"></a><span id="l10.1461" class="difflineplus">+</span>
<a href="#l10.1462"></a><span id="l10.1462" class="difflineplus">+ifdef AUTOUPDATE_CONFIGURE</span>
<a href="#l10.1463"></a><span id="l10.1463" class="difflineplus">+$(topsrcdir)/configure: $(topsrcdir)/configure.in</span>
<a href="#l10.1464"></a><span id="l10.1464" class="difflineplus">+	(cd $(topsrcdir) &amp;&amp; $(AUTOCONF)) &amp;&amp; (cd $(DEPTH) &amp;&amp; ./config.status --recheck)</span>
<a href="#l10.1465"></a><span id="l10.1465" class="difflineplus">+endif</span>
<a href="#l10.1466"></a><span id="l10.1466" class="difflineplus">+</span>
<a href="#l10.1467"></a><span id="l10.1467" class="difflineplus">+###############################################################################</span>
<a href="#l10.1468"></a><span id="l10.1468" class="difflineplus">+# Bunch of things that extend the 'export' rule (in order):</span>
<a href="#l10.1469"></a><span id="l10.1469" class="difflineplus">+###############################################################################</span>
<a href="#l10.1470"></a><span id="l10.1470" class="difflineplus">+</span>
<a href="#l10.1471"></a><span id="l10.1471" class="difflineplus">+################################################################################</span>
<a href="#l10.1472"></a><span id="l10.1472" class="difflineplus">+# Copy each element of EXPORTS to $(PUBLIC)</span>
<a href="#l10.1473"></a><span id="l10.1473" class="difflineplus">+</span>
<a href="#l10.1474"></a><span id="l10.1474" class="difflineplus">+ifneq ($(EXPORTS)$(XPIDLSRCS)$(SDK_HEADERS)$(SDK_XPIDLSRCS),)</span>
<a href="#l10.1475"></a><span id="l10.1475" class="difflineplus">+$(SDK_PUBLIC) $(PUBLIC)::</span>
<a href="#l10.1476"></a><span id="l10.1476" class="difflineplus">+	@if test ! -d $@; then $(ECHO) Creating $@; rm -rf $@; $(NSINSTALL) -D $@; else true; fi</span>
<a href="#l10.1477"></a><span id="l10.1477" class="difflineplus">+endif</span>
<a href="#l10.1478"></a><span id="l10.1478" class="difflineplus">+</span>
<a href="#l10.1479"></a><span id="l10.1479" class="difflineplus">+ifdef MOZ_JAVAXPCOM</span>
<a href="#l10.1480"></a><span id="l10.1480" class="difflineplus">+ifneq ($(XPIDLSRCS)$(SDK_XPIDLSRCS),)</span>
<a href="#l10.1481"></a><span id="l10.1481" class="difflineplus">+$(JAVA_DIST_DIR)::</span>
<a href="#l10.1482"></a><span id="l10.1482" class="difflineplus">+	$(NSINSTALL) -D $@</span>
<a href="#l10.1483"></a><span id="l10.1483" class="difflineplus">+endif</span>
<a href="#l10.1484"></a><span id="l10.1484" class="difflineplus">+endif</span>
<a href="#l10.1485"></a><span id="l10.1485" class="difflineplus">+</span>
<a href="#l10.1486"></a><span id="l10.1486" class="difflineplus">+ifneq ($(XPI_NAME),)</span>
<a href="#l10.1487"></a><span id="l10.1487" class="difflineplus">+export::</span>
<a href="#l10.1488"></a><span id="l10.1488" class="difflineplus">+	@if test ! -d $(FINAL_TARGET); then echo Creating $(FINAL_TARGET); rm -fr $(FINAL_TARGET); $(NSINSTALL) -D $(FINAL_TARGET); else true; fi</span>
<a href="#l10.1489"></a><span id="l10.1489" class="difflineplus">+endif</span>
<a href="#l10.1490"></a><span id="l10.1490" class="difflineplus">+</span>
<a href="#l10.1491"></a><span id="l10.1491" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1492"></a><span id="l10.1492" class="difflineplus">+ifneq ($(EXPORTS),)</span>
<a href="#l10.1493"></a><span id="l10.1493" class="difflineplus">+export:: $(EXPORTS) $(PUBLIC)</span>
<a href="#l10.1494"></a><span id="l10.1494" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1495"></a><span id="l10.1495" class="difflineplus">+endif </span>
<a href="#l10.1496"></a><span id="l10.1496" class="difflineplus">+</span>
<a href="#l10.1497"></a><span id="l10.1497" class="difflineplus">+ifneq ($(SDK_HEADERS),)</span>
<a href="#l10.1498"></a><span id="l10.1498" class="difflineplus">+export:: $(SDK_HEADERS) $(SDK_PUBLIC)</span>
<a href="#l10.1499"></a><span id="l10.1499" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1500"></a><span id="l10.1500" class="difflineplus">+</span>
<a href="#l10.1501"></a><span id="l10.1501" class="difflineplus">+export:: $(SDK_HEADERS) $(PUBLIC)</span>
<a href="#l10.1502"></a><span id="l10.1502" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1503"></a><span id="l10.1503" class="difflineplus">+endif </span>
<a href="#l10.1504"></a><span id="l10.1504" class="difflineplus">+endif # NO_DIST_INSTALL</span>
<a href="#l10.1505"></a><span id="l10.1505" class="difflineplus">+</span>
<a href="#l10.1506"></a><span id="l10.1506" class="difflineplus">+################################################################################</span>
<a href="#l10.1507"></a><span id="l10.1507" class="difflineplus">+# Copy each element of PREF_JS_EXPORTS</span>
<a href="#l10.1508"></a><span id="l10.1508" class="difflineplus">+</span>
<a href="#l10.1509"></a><span id="l10.1509" class="difflineplus">+ifdef GRE_MODULE</span>
<a href="#l10.1510"></a><span id="l10.1510" class="difflineplus">+PREF_DIR = greprefs</span>
<a href="#l10.1511"></a><span id="l10.1511" class="difflineplus">+else</span>
<a href="#l10.1512"></a><span id="l10.1512" class="difflineplus">+ifneq (,$(XPI_NAME)$(LIBXUL_SDK))</span>
<a href="#l10.1513"></a><span id="l10.1513" class="difflineplus">+PREF_DIR = defaults/preferences</span>
<a href="#l10.1514"></a><span id="l10.1514" class="difflineplus">+else</span>
<a href="#l10.1515"></a><span id="l10.1515" class="difflineplus">+PREF_DIR = defaults/pref</span>
<a href="#l10.1516"></a><span id="l10.1516" class="difflineplus">+endif</span>
<a href="#l10.1517"></a><span id="l10.1517" class="difflineplus">+endif</span>
<a href="#l10.1518"></a><span id="l10.1518" class="difflineplus">+</span>
<a href="#l10.1519"></a><span id="l10.1519" class="difflineplus">+ifneq ($(PREF_JS_EXPORTS),)</span>
<a href="#l10.1520"></a><span id="l10.1520" class="difflineplus">+# on win32, pref files need CRLF line endings... see bug 206029</span>
<a href="#l10.1521"></a><span id="l10.1521" class="difflineplus">+ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l10.1522"></a><span id="l10.1522" class="difflineplus">+PREF_PPFLAGS = --line-endings=crlf</span>
<a href="#l10.1523"></a><span id="l10.1523" class="difflineplus">+endif</span>
<a href="#l10.1524"></a><span id="l10.1524" class="difflineplus">+</span>
<a href="#l10.1525"></a><span id="l10.1525" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1526"></a><span id="l10.1526" class="difflineplus">+libs:: $(PREF_JS_EXPORTS)</span>
<a href="#l10.1527"></a><span id="l10.1527" class="difflineplus">+	if test ! -d $(FINAL_TARGET)/$(PREF_DIR); then $(NSINSTALL) -D $(FINAL_TARGET)/$(PREF_DIR); fi</span>
<a href="#l10.1528"></a><span id="l10.1528" class="difflineplus">+	$(EXIT_ON_ERROR)  \</span>
<a href="#l10.1529"></a><span id="l10.1529" class="difflineplus">+	for i in $(PREF_JS_EXPORTS); do \</span>
<a href="#l10.1530"></a><span id="l10.1530" class="difflineplus">+	  dest=$(FINAL_TARGET)/$(PREF_DIR)/`basename $$i`; \</span>
<a href="#l10.1531"></a><span id="l10.1531" class="difflineplus">+	  $(RM) -f $$dest; \</span>
<a href="#l10.1532"></a><span id="l10.1532" class="difflineplus">+	  $(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py $(PREF_PPFLAGS) $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) $$i &gt; $$dest; \</span>
<a href="#l10.1533"></a><span id="l10.1533" class="difflineplus">+	done</span>
<a href="#l10.1534"></a><span id="l10.1534" class="difflineplus">+endif</span>
<a href="#l10.1535"></a><span id="l10.1535" class="difflineplus">+endif</span>
<a href="#l10.1536"></a><span id="l10.1536" class="difflineplus">+</span>
<a href="#l10.1537"></a><span id="l10.1537" class="difflineplus">+################################################################################</span>
<a href="#l10.1538"></a><span id="l10.1538" class="difflineplus">+# Copy each element of AUTOCFG_JS_EXPORTS to $(FINAL_TARGET)/defaults/autoconfig</span>
<a href="#l10.1539"></a><span id="l10.1539" class="difflineplus">+</span>
<a href="#l10.1540"></a><span id="l10.1540" class="difflineplus">+ifneq ($(AUTOCFG_JS_EXPORTS),)</span>
<a href="#l10.1541"></a><span id="l10.1541" class="difflineplus">+$(FINAL_TARGET)/defaults/autoconfig::</span>
<a href="#l10.1542"></a><span id="l10.1542" class="difflineplus">+	@if test ! -d $@; then echo Creating $@; rm -rf $@; $(NSINSTALL) -D $@; else true; fi</span>
<a href="#l10.1543"></a><span id="l10.1543" class="difflineplus">+</span>
<a href="#l10.1544"></a><span id="l10.1544" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1545"></a><span id="l10.1545" class="difflineplus">+export:: $(AUTOCFG_JS_EXPORTS) $(FINAL_TARGET)/defaults/autoconfig</span>
<a href="#l10.1546"></a><span id="l10.1546" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1547"></a><span id="l10.1547" class="difflineplus">+endif</span>
<a href="#l10.1548"></a><span id="l10.1548" class="difflineplus">+</span>
<a href="#l10.1549"></a><span id="l10.1549" class="difflineplus">+endif </span>
<a href="#l10.1550"></a><span id="l10.1550" class="difflineplus">+################################################################################</span>
<a href="#l10.1551"></a><span id="l10.1551" class="difflineplus">+# Export the elements of $(XPIDLSRCS) &amp; $(SDK_XPIDLSRCS), </span>
<a href="#l10.1552"></a><span id="l10.1552" class="difflineplus">+# generating .h and .xpt files and moving them to the appropriate places.</span>
<a href="#l10.1553"></a><span id="l10.1553" class="difflineplus">+</span>
<a href="#l10.1554"></a><span id="l10.1554" class="difflineplus">+ifneq ($(XPIDLSRCS)$(SDK_XPIDLSRCS),)</span>
<a href="#l10.1555"></a><span id="l10.1555" class="difflineplus">+</span>
<a href="#l10.1556"></a><span id="l10.1556" class="difflineplus">+export:: $(patsubst %.idl,$(XPIDL_GEN_DIR)/%.h, $(XPIDLSRCS))</span>
<a href="#l10.1557"></a><span id="l10.1557" class="difflineplus">+</span>
<a href="#l10.1558"></a><span id="l10.1558" class="difflineplus">+ifndef XPIDL_MODULE</span>
<a href="#l10.1559"></a><span id="l10.1559" class="difflineplus">+XPIDL_MODULE		= $(MODULE)</span>
<a href="#l10.1560"></a><span id="l10.1560" class="difflineplus">+endif</span>
<a href="#l10.1561"></a><span id="l10.1561" class="difflineplus">+</span>
<a href="#l10.1562"></a><span id="l10.1562" class="difflineplus">+ifeq ($(XPIDL_MODULE),) # we need $(XPIDL_MODULE) to make $(XPIDL_MODULE).xpt</span>
<a href="#l10.1563"></a><span id="l10.1563" class="difflineplus">+export:: FORCE</span>
<a href="#l10.1564"></a><span id="l10.1564" class="difflineplus">+	@echo</span>
<a href="#l10.1565"></a><span id="l10.1565" class="difflineplus">+	@echo &quot;*** Error processing XPIDLSRCS:&quot;</span>
<a href="#l10.1566"></a><span id="l10.1566" class="difflineplus">+	@echo &quot;Please define MODULE or XPIDL_MODULE when defining XPIDLSRCS,&quot;</span>
<a href="#l10.1567"></a><span id="l10.1567" class="difflineplus">+	@echo &quot;so we have a module name to use when creating MODULE.xpt.&quot;</span>
<a href="#l10.1568"></a><span id="l10.1568" class="difflineplus">+	@echo; sleep 2; false</span>
<a href="#l10.1569"></a><span id="l10.1569" class="difflineplus">+endif</span>
<a href="#l10.1570"></a><span id="l10.1570" class="difflineplus">+</span>
<a href="#l10.1571"></a><span id="l10.1571" class="difflineplus">+$(SDK_IDL_DIR) $(IDL_DIR)::</span>
<a href="#l10.1572"></a><span id="l10.1572" class="difflineplus">+	@if test ! -d $@; then echo Creating $@; rm -rf $@; $(NSINSTALL) -D $@; else true; fi</span>
<a href="#l10.1573"></a><span id="l10.1573" class="difflineplus">+</span>
<a href="#l10.1574"></a><span id="l10.1574" class="difflineplus">+# generate .h files from into $(XPIDL_GEN_DIR), then export to $(PUBLIC);</span>
<a href="#l10.1575"></a><span id="l10.1575" class="difflineplus">+# warn against overriding existing .h file. </span>
<a href="#l10.1576"></a><span id="l10.1576" class="difflineplus">+$(XPIDL_GEN_DIR)/.done:</span>
<a href="#l10.1577"></a><span id="l10.1577" class="difflineplus">+	@if test ! -d $(XPIDL_GEN_DIR); then echo Creating $(XPIDL_GEN_DIR)/.done; rm -rf $(XPIDL_GEN_DIR); mkdir $(XPIDL_GEN_DIR); fi</span>
<a href="#l10.1578"></a><span id="l10.1578" class="difflineplus">+	@touch $@</span>
<a href="#l10.1579"></a><span id="l10.1579" class="difflineplus">+</span>
<a href="#l10.1580"></a><span id="l10.1580" class="difflineplus">+# don't depend on $(XPIDL_GEN_DIR), because the modification date changes</span>
<a href="#l10.1581"></a><span id="l10.1581" class="difflineplus">+# with any addition to the directory, regenerating all .h files -&gt; everything.</span>
<a href="#l10.1582"></a><span id="l10.1582" class="difflineplus">+</span>
<a href="#l10.1583"></a><span id="l10.1583" class="difflineplus">+$(XPIDL_GEN_DIR)/%.h: %.idl $(XPIDL_COMPILE) $(XPIDL_GEN_DIR)/.done</span>
<a href="#l10.1584"></a><span id="l10.1584" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1585"></a><span id="l10.1585" class="difflineplus">+	$(ELOG) $(XPIDL_COMPILE) -m header -w $(XPIDL_FLAGS) -o $(XPIDL_GEN_DIR)/$* $(_VPATH_SRCS)</span>
<a href="#l10.1586"></a><span id="l10.1586" class="difflineplus">+	@if test -n &quot;$(findstring $*.h, $(EXPORTS) $(SDK_HEADERS))&quot;; \</span>
<a href="#l10.1587"></a><span id="l10.1587" class="difflineplus">+	  then echo &quot;*** WARNING: file $*.h generated from $*.idl overrides $(srcdir)/$*.h&quot;; else true; fi</span>
<a href="#l10.1588"></a><span id="l10.1588" class="difflineplus">+</span>
<a href="#l10.1589"></a><span id="l10.1589" class="difflineplus">+ifndef NO_GEN_XPT</span>
<a href="#l10.1590"></a><span id="l10.1590" class="difflineplus">+# generate intermediate .xpt files into $(XPIDL_GEN_DIR), then link</span>
<a href="#l10.1591"></a><span id="l10.1591" class="difflineplus">+# into $(XPIDL_MODULE).xpt and export it to $(FINAL_TARGET)/components.</span>
<a href="#l10.1592"></a><span id="l10.1592" class="difflineplus">+$(XPIDL_GEN_DIR)/%.xpt: %.idl $(XPIDL_COMPILE) $(XPIDL_GEN_DIR)/.done</span>
<a href="#l10.1593"></a><span id="l10.1593" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1594"></a><span id="l10.1594" class="difflineplus">+	$(ELOG) $(XPIDL_COMPILE) -m typelib -w $(XPIDL_FLAGS) -e $@ -d $(MDDEPDIR)/$*.pp $(_VPATH_SRCS)</span>
<a href="#l10.1595"></a><span id="l10.1595" class="difflineplus">+</span>
<a href="#l10.1596"></a><span id="l10.1596" class="difflineplus">+# no need to link together if XPIDLSRCS contains only XPIDL_MODULE</span>
<a href="#l10.1597"></a><span id="l10.1597" class="difflineplus">+ifneq ($(XPIDL_MODULE).idl,$(strip $(XPIDLSRCS)))</span>
<a href="#l10.1598"></a><span id="l10.1598" class="difflineplus">+$(XPIDL_GEN_DIR)/$(XPIDL_MODULE).xpt: $(patsubst %.idl,$(XPIDL_GEN_DIR)/%.xpt,$(XPIDLSRCS) $(SDK_XPIDLSRCS)) Makefile.in Makefile $(XPIDL_LINK)</span>
<a href="#l10.1599"></a><span id="l10.1599" class="difflineplus">+	$(XPIDL_LINK) $(XPIDL_GEN_DIR)/$(XPIDL_MODULE).xpt $(patsubst %.idl,$(XPIDL_GEN_DIR)/%.xpt,$(XPIDLSRCS) $(SDK_XPIDLSRCS)) </span>
<a href="#l10.1600"></a><span id="l10.1600" class="difflineplus">+endif # XPIDL_MODULE.xpt != XPIDLSRCS</span>
<a href="#l10.1601"></a><span id="l10.1601" class="difflineplus">+</span>
<a href="#l10.1602"></a><span id="l10.1602" class="difflineplus">+libs:: $(XPIDL_GEN_DIR)/$(XPIDL_MODULE).xpt</span>
<a href="#l10.1603"></a><span id="l10.1603" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1604"></a><span id="l10.1604" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $(XPIDL_GEN_DIR)/$(XPIDL_MODULE).xpt $(FINAL_TARGET)/components</span>
<a href="#l10.1605"></a><span id="l10.1605" class="difflineplus">+endif</span>
<a href="#l10.1606"></a><span id="l10.1606" class="difflineplus">+</span>
<a href="#l10.1607"></a><span id="l10.1607" class="difflineplus">+endif # NO_GEN_XPT</span>
<a href="#l10.1608"></a><span id="l10.1608" class="difflineplus">+</span>
<a href="#l10.1609"></a><span id="l10.1609" class="difflineplus">+GARBAGE_DIRS		+= $(XPIDL_GEN_DIR)</span>
<a href="#l10.1610"></a><span id="l10.1610" class="difflineplus">+</span>
<a href="#l10.1611"></a><span id="l10.1611" class="difflineplus">+endif # XPIDLSRCS || SDK_XPIDLSRCS</span>
<a href="#l10.1612"></a><span id="l10.1612" class="difflineplus">+</span>
<a href="#l10.1613"></a><span id="l10.1613" class="difflineplus">+ifneq ($(XPIDLSRCS),)</span>
<a href="#l10.1614"></a><span id="l10.1614" class="difflineplus">+# export .idl files to $(IDL_DIR)</span>
<a href="#l10.1615"></a><span id="l10.1615" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1616"></a><span id="l10.1616" class="difflineplus">+export:: $(XPIDLSRCS) $(IDL_DIR)</span>
<a href="#l10.1617"></a><span id="l10.1617" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1618"></a><span id="l10.1618" class="difflineplus">+</span>
<a href="#l10.1619"></a><span id="l10.1619" class="difflineplus">+export:: $(patsubst %.idl,$(XPIDL_GEN_DIR)/%.h, $(XPIDLSRCS)) $(PUBLIC)</span>
<a href="#l10.1620"></a><span id="l10.1620" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^ </span>
<a href="#l10.1621"></a><span id="l10.1621" class="difflineplus">+endif # NO_DIST_INSTALL</span>
<a href="#l10.1622"></a><span id="l10.1622" class="difflineplus">+</span>
<a href="#l10.1623"></a><span id="l10.1623" class="difflineplus">+endif # XPIDLSRCS</span>
<a href="#l10.1624"></a><span id="l10.1624" class="difflineplus">+</span>
<a href="#l10.1625"></a><span id="l10.1625" class="difflineplus">+</span>
<a href="#l10.1626"></a><span id="l10.1626" class="difflineplus">+</span>
<a href="#l10.1627"></a><span id="l10.1627" class="difflineplus">+#</span>
<a href="#l10.1628"></a><span id="l10.1628" class="difflineplus">+# General rules for exporting idl files.</span>
<a href="#l10.1629"></a><span id="l10.1629" class="difflineplus">+#</span>
<a href="#l10.1630"></a><span id="l10.1630" class="difflineplus">+# WORK-AROUND ONLY, for mozilla/tools/module-deps/bootstrap.pl build.</span>
<a href="#l10.1631"></a><span id="l10.1631" class="difflineplus">+# Bug to fix idl dependency problems w/o this extra build pass is</span>
<a href="#l10.1632"></a><span id="l10.1632" class="difflineplus">+#   http://bugzilla.mozilla.org/show_bug.cgi?id=145777</span>
<a href="#l10.1633"></a><span id="l10.1633" class="difflineplus">+#</span>
<a href="#l10.1634"></a><span id="l10.1634" class="difflineplus">+$(IDL_DIR)::</span>
<a href="#l10.1635"></a><span id="l10.1635" class="difflineplus">+	@if test ! -d $@; then echo Creating $@; rm -rf $@; $(NSINSTALL) -D $@; else true; fi</span>
<a href="#l10.1636"></a><span id="l10.1636" class="difflineplus">+</span>
<a href="#l10.1637"></a><span id="l10.1637" class="difflineplus">+export-idl:: $(SUBMAKEFILES) $(MAKE_DIRS)</span>
<a href="#l10.1638"></a><span id="l10.1638" class="difflineplus">+</span>
<a href="#l10.1639"></a><span id="l10.1639" class="difflineplus">+ifneq ($(XPIDLSRCS)$(SDK_XPIDLSRCS),)</span>
<a href="#l10.1640"></a><span id="l10.1640" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1641"></a><span id="l10.1641" class="difflineplus">+export-idl:: $(XPIDLSRCS) $(SDK_XPIDLSRCS) $(IDL_DIR)</span>
<a href="#l10.1642"></a><span id="l10.1642" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1643"></a><span id="l10.1643" class="difflineplus">+endif</span>
<a href="#l10.1644"></a><span id="l10.1644" class="difflineplus">+endif</span>
<a href="#l10.1645"></a><span id="l10.1645" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.1646"></a><span id="l10.1646" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.1647"></a><span id="l10.1647" class="difflineplus">+</span>
<a href="#l10.1648"></a><span id="l10.1648" class="difflineplus">+</span>
<a href="#l10.1649"></a><span id="l10.1649" class="difflineplus">+</span>
<a href="#l10.1650"></a><span id="l10.1650" class="difflineplus">+</span>
<a href="#l10.1651"></a><span id="l10.1651" class="difflineplus">+ifneq ($(SDK_XPIDLSRCS),)</span>
<a href="#l10.1652"></a><span id="l10.1652" class="difflineplus">+# export .idl files to $(IDL_DIR) &amp; $(SDK_IDL_DIR)</span>
<a href="#l10.1653"></a><span id="l10.1653" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1654"></a><span id="l10.1654" class="difflineplus">+export:: $(SDK_XPIDLSRCS) $(IDL_DIR)</span>
<a href="#l10.1655"></a><span id="l10.1655" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1656"></a><span id="l10.1656" class="difflineplus">+</span>
<a href="#l10.1657"></a><span id="l10.1657" class="difflineplus">+export:: $(SDK_XPIDLSRCS) $(SDK_IDL_DIR)</span>
<a href="#l10.1658"></a><span id="l10.1658" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1659"></a><span id="l10.1659" class="difflineplus">+</span>
<a href="#l10.1660"></a><span id="l10.1660" class="difflineplus">+export:: $(patsubst %.idl,$(XPIDL_GEN_DIR)/%.h, $(SDK_XPIDLSRCS)) $(PUBLIC)</span>
<a href="#l10.1661"></a><span id="l10.1661" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1662"></a><span id="l10.1662" class="difflineplus">+</span>
<a href="#l10.1663"></a><span id="l10.1663" class="difflineplus">+export:: $(patsubst %.idl,$(XPIDL_GEN_DIR)/%.h, $(SDK_XPIDLSRCS)) $(SDK_PUBLIC)</span>
<a href="#l10.1664"></a><span id="l10.1664" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^</span>
<a href="#l10.1665"></a><span id="l10.1665" class="difflineplus">+endif</span>
<a href="#l10.1666"></a><span id="l10.1666" class="difflineplus">+</span>
<a href="#l10.1667"></a><span id="l10.1667" class="difflineplus">+endif # SDK_XPIDLSRCS</span>
<a href="#l10.1668"></a><span id="l10.1668" class="difflineplus">+</span>
<a href="#l10.1669"></a><span id="l10.1669" class="difflineplus">+</span>
<a href="#l10.1670"></a><span id="l10.1670" class="difflineplus">+</span>
<a href="#l10.1671"></a><span id="l10.1671" class="difflineplus">+ifdef MOZ_JAVAXPCOM</span>
<a href="#l10.1672"></a><span id="l10.1672" class="difflineplus">+ifneq ($(XPIDLSRCS)$(SDK_XPIDLSRCS),)</span>
<a href="#l10.1673"></a><span id="l10.1673" class="difflineplus">+</span>
<a href="#l10.1674"></a><span id="l10.1674" class="difflineplus">+JAVA_XPIDLSRCS = $(XPIDLSRCS) $(SDK_XPIDLSRCS)</span>
<a href="#l10.1675"></a><span id="l10.1675" class="difflineplus">+</span>
<a href="#l10.1676"></a><span id="l10.1676" class="difflineplus">+# A single IDL file can contain multiple interfaces, which result in multiple</span>
<a href="#l10.1677"></a><span id="l10.1677" class="difflineplus">+# Java interface files.  So use hidden dependency files.</span>
<a href="#l10.1678"></a><span id="l10.1678" class="difflineplus">+JAVADEPFILES = $(addprefix $(JAVA_GEN_DIR)/.,$(JAVA_XPIDLSRCS:.idl=.java.pp))</span>
<a href="#l10.1679"></a><span id="l10.1679" class="difflineplus">+</span>
<a href="#l10.1680"></a><span id="l10.1680" class="difflineplus">+$(JAVA_GEN_DIR):</span>
<a href="#l10.1681"></a><span id="l10.1681" class="difflineplus">+	$(NSINSTALL) -D $@</span>
<a href="#l10.1682"></a><span id="l10.1682" class="difflineplus">+GARBAGE_DIRS += $(JAVA_GEN_DIR)</span>
<a href="#l10.1683"></a><span id="l10.1683" class="difflineplus">+</span>
<a href="#l10.1684"></a><span id="l10.1684" class="difflineplus">+# generate .java files into _javagen/[package name dirs]</span>
<a href="#l10.1685"></a><span id="l10.1685" class="difflineplus">+_JAVA_GEN_DIR = $(JAVA_GEN_DIR)/$(JAVA_IFACES_PKG_NAME)</span>
<a href="#l10.1686"></a><span id="l10.1686" class="difflineplus">+$(_JAVA_GEN_DIR):</span>
<a href="#l10.1687"></a><span id="l10.1687" class="difflineplus">+	$(NSINSTALL) -D $@</span>
<a href="#l10.1688"></a><span id="l10.1688" class="difflineplus">+</span>
<a href="#l10.1689"></a><span id="l10.1689" class="difflineplus">+$(JAVA_GEN_DIR)/.%.java.pp: %.idl $(XPIDL_COMPILE) $(_JAVA_GEN_DIR)</span>
<a href="#l10.1690"></a><span id="l10.1690" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.1691"></a><span id="l10.1691" class="difflineplus">+	$(ELOG) $(XPIDL_COMPILE) -m java -w -I$(srcdir) -I$(IDL_DIR) -o $(_JAVA_GEN_DIR)/$* $(_VPATH_SRCS)</span>
<a href="#l10.1692"></a><span id="l10.1692" class="difflineplus">+	@touch $@</span>
<a href="#l10.1693"></a><span id="l10.1693" class="difflineplus">+</span>
<a href="#l10.1694"></a><span id="l10.1694" class="difflineplus">+# &quot;Install&quot; generated Java interfaces.  We segregate them based on the XPI_NAME.</span>
<a href="#l10.1695"></a><span id="l10.1695" class="difflineplus">+# If XPI_NAME is not set, install into the &quot;default&quot; directory.</span>
<a href="#l10.1696"></a><span id="l10.1696" class="difflineplus">+ifneq ($(XPI_NAME),)</span>
<a href="#l10.1697"></a><span id="l10.1697" class="difflineplus">+JAVA_INSTALL_DIR = $(JAVA_DIST_DIR)/$(XPI_NAME)</span>
<a href="#l10.1698"></a><span id="l10.1698" class="difflineplus">+else</span>
<a href="#l10.1699"></a><span id="l10.1699" class="difflineplus">+JAVA_INSTALL_DIR = $(JAVA_DIST_DIR)/default</span>
<a href="#l10.1700"></a><span id="l10.1700" class="difflineplus">+endif</span>
<a href="#l10.1701"></a><span id="l10.1701" class="difflineplus">+</span>
<a href="#l10.1702"></a><span id="l10.1702" class="difflineplus">+$(JAVA_INSTALL_DIR):</span>
<a href="#l10.1703"></a><span id="l10.1703" class="difflineplus">+	$(NSINSTALL) -D $@</span>
<a href="#l10.1704"></a><span id="l10.1704" class="difflineplus">+</span>
<a href="#l10.1705"></a><span id="l10.1705" class="difflineplus">+export:: $(JAVA_DIST_DIR) $(JAVADEPFILES) $(JAVA_INSTALL_DIR)</span>
<a href="#l10.1706"></a><span id="l10.1706" class="difflineplus">+	(cd $(JAVA_GEN_DIR) &amp;&amp; tar $(TAR_CREATE_FLAGS) - .) | (cd $(JAVA_INSTALL_DIR) &amp;&amp; tar -xf -)</span>
<a href="#l10.1707"></a><span id="l10.1707" class="difflineplus">+</span>
<a href="#l10.1708"></a><span id="l10.1708" class="difflineplus">+endif # XPIDLSRCS || SDK_XPIDLSRCS</span>
<a href="#l10.1709"></a><span id="l10.1709" class="difflineplus">+endif # MOZ_JAVAXPCOM</span>
<a href="#l10.1710"></a><span id="l10.1710" class="difflineplus">+</span>
<a href="#l10.1711"></a><span id="l10.1711" class="difflineplus">+################################################################################</span>
<a href="#l10.1712"></a><span id="l10.1712" class="difflineplus">+# Copy each element of EXTRA_COMPONENTS to $(FINAL_TARGET)/components</span>
<a href="#l10.1713"></a><span id="l10.1713" class="difflineplus">+ifdef EXTRA_COMPONENTS</span>
<a href="#l10.1714"></a><span id="l10.1714" class="difflineplus">+libs:: $(EXTRA_COMPONENTS)</span>
<a href="#l10.1715"></a><span id="l10.1715" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1716"></a><span id="l10.1716" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^ $(FINAL_TARGET)/components</span>
<a href="#l10.1717"></a><span id="l10.1717" class="difflineplus">+endif</span>
<a href="#l10.1718"></a><span id="l10.1718" class="difflineplus">+</span>
<a href="#l10.1719"></a><span id="l10.1719" class="difflineplus">+endif</span>
<a href="#l10.1720"></a><span id="l10.1720" class="difflineplus">+</span>
<a href="#l10.1721"></a><span id="l10.1721" class="difflineplus">+ifdef EXTRA_PP_COMPONENTS</span>
<a href="#l10.1722"></a><span id="l10.1722" class="difflineplus">+libs:: $(EXTRA_PP_COMPONENTS)</span>
<a href="#l10.1723"></a><span id="l10.1723" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1724"></a><span id="l10.1724" class="difflineplus">+	$(EXIT_ON_ERROR) \</span>
<a href="#l10.1725"></a><span id="l10.1725" class="difflineplus">+	$(NSINSTALL) -D $(FINAL_TARGET)/components; \</span>
<a href="#l10.1726"></a><span id="l10.1726" class="difflineplus">+	for i in $^; do \</span>
<a href="#l10.1727"></a><span id="l10.1727" class="difflineplus">+	  dest=$(FINAL_TARGET)/components/`basename $$i`; \</span>
<a href="#l10.1728"></a><span id="l10.1728" class="difflineplus">+	  $(RM) -f $$dest; \</span>
<a href="#l10.1729"></a><span id="l10.1729" class="difflineplus">+	  $(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) $$i &gt; $$dest; \</span>
<a href="#l10.1730"></a><span id="l10.1730" class="difflineplus">+	done</span>
<a href="#l10.1731"></a><span id="l10.1731" class="difflineplus">+endif</span>
<a href="#l10.1732"></a><span id="l10.1732" class="difflineplus">+</span>
<a href="#l10.1733"></a><span id="l10.1733" class="difflineplus">+endif</span>
<a href="#l10.1734"></a><span id="l10.1734" class="difflineplus">+</span>
<a href="#l10.1735"></a><span id="l10.1735" class="difflineplus">+################################################################################</span>
<a href="#l10.1736"></a><span id="l10.1736" class="difflineplus">+# Copy each element of EXTRA_JS_MODULES to $(FINAL_TARGET)/modules</span>
<a href="#l10.1737"></a><span id="l10.1737" class="difflineplus">+ifdef EXTRA_JS_MODULES</span>
<a href="#l10.1738"></a><span id="l10.1738" class="difflineplus">+libs:: $(EXTRA_JS_MODULES)</span>
<a href="#l10.1739"></a><span id="l10.1739" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1740"></a><span id="l10.1740" class="difflineplus">+	$(INSTALL) $(IFLAGS1) $^ $(FINAL_TARGET)/modules</span>
<a href="#l10.1741"></a><span id="l10.1741" class="difflineplus">+endif</span>
<a href="#l10.1742"></a><span id="l10.1742" class="difflineplus">+</span>
<a href="#l10.1743"></a><span id="l10.1743" class="difflineplus">+endif</span>
<a href="#l10.1744"></a><span id="l10.1744" class="difflineplus">+</span>
<a href="#l10.1745"></a><span id="l10.1745" class="difflineplus">+ifdef EXTRA_PP_JS_MODULES</span>
<a href="#l10.1746"></a><span id="l10.1746" class="difflineplus">+libs:: $(EXTRA_PP_JS_MODULES)</span>
<a href="#l10.1747"></a><span id="l10.1747" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1748"></a><span id="l10.1748" class="difflineplus">+	$(EXIT_ON_ERROR) \</span>
<a href="#l10.1749"></a><span id="l10.1749" class="difflineplus">+	$(NSINSTALL) -D $(FINAL_TARGET)/modules; \</span>
<a href="#l10.1750"></a><span id="l10.1750" class="difflineplus">+	for i in $^; do \</span>
<a href="#l10.1751"></a><span id="l10.1751" class="difflineplus">+	  dest=$(FINAL_TARGET)/modules/`basename $$i`; \</span>
<a href="#l10.1752"></a><span id="l10.1752" class="difflineplus">+	  $(RM) -f $$dest; \</span>
<a href="#l10.1753"></a><span id="l10.1753" class="difflineplus">+	  $(PYTHON) $(MOZILLA_SRCDIR)/config/Preprocessor.py $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) $$i &gt; $$dest; \</span>
<a href="#l10.1754"></a><span id="l10.1754" class="difflineplus">+	done</span>
<a href="#l10.1755"></a><span id="l10.1755" class="difflineplus">+endif</span>
<a href="#l10.1756"></a><span id="l10.1756" class="difflineplus">+</span>
<a href="#l10.1757"></a><span id="l10.1757" class="difflineplus">+endif</span>
<a href="#l10.1758"></a><span id="l10.1758" class="difflineplus">+</span>
<a href="#l10.1759"></a><span id="l10.1759" class="difflineplus">+################################################################################</span>
<a href="#l10.1760"></a><span id="l10.1760" class="difflineplus">+# SDK</span>
<a href="#l10.1761"></a><span id="l10.1761" class="difflineplus">+</span>
<a href="#l10.1762"></a><span id="l10.1762" class="difflineplus">+ifneq (,$(SDK_LIBRARY))</span>
<a href="#l10.1763"></a><span id="l10.1763" class="difflineplus">+$(SDK_LIB_DIR)::</span>
<a href="#l10.1764"></a><span id="l10.1764" class="difflineplus">+	@if test ! -d $@; then echo Creating $@; rm -rf $@; $(NSINSTALL) -D $@; else true; fi</span>
<a href="#l10.1765"></a><span id="l10.1765" class="difflineplus">+</span>
<a href="#l10.1766"></a><span id="l10.1766" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1767"></a><span id="l10.1767" class="difflineplus">+libs:: $(SDK_LIBRARY) $(SDK_LIB_DIR)</span>
<a href="#l10.1768"></a><span id="l10.1768" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $^</span>
<a href="#l10.1769"></a><span id="l10.1769" class="difflineplus">+endif</span>
<a href="#l10.1770"></a><span id="l10.1770" class="difflineplus">+</span>
<a href="#l10.1771"></a><span id="l10.1771" class="difflineplus">+endif # SDK_LIBRARY</span>
<a href="#l10.1772"></a><span id="l10.1772" class="difflineplus">+</span>
<a href="#l10.1773"></a><span id="l10.1773" class="difflineplus">+ifneq (,$(SDK_BINARY))</span>
<a href="#l10.1774"></a><span id="l10.1774" class="difflineplus">+$(SDK_BIN_DIR)::</span>
<a href="#l10.1775"></a><span id="l10.1775" class="difflineplus">+	@if test ! -d $@; then echo Creating $@; rm -rf $@; $(NSINSTALL) -D $@; else true; fi</span>
<a href="#l10.1776"></a><span id="l10.1776" class="difflineplus">+</span>
<a href="#l10.1777"></a><span id="l10.1777" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1778"></a><span id="l10.1778" class="difflineplus">+libs:: $(SDK_BINARY) $(SDK_BIN_DIR)</span>
<a href="#l10.1779"></a><span id="l10.1779" class="difflineplus">+	$(INSTALL) $(IFLAGS2) $^</span>
<a href="#l10.1780"></a><span id="l10.1780" class="difflineplus">+endif</span>
<a href="#l10.1781"></a><span id="l10.1781" class="difflineplus">+</span>
<a href="#l10.1782"></a><span id="l10.1782" class="difflineplus">+endif # SDK_BINARY</span>
<a href="#l10.1783"></a><span id="l10.1783" class="difflineplus">+</span>
<a href="#l10.1784"></a><span id="l10.1784" class="difflineplus">+################################################################################</span>
<a href="#l10.1785"></a><span id="l10.1785" class="difflineplus">+# CHROME PACKAGING</span>
<a href="#l10.1786"></a><span id="l10.1786" class="difflineplus">+</span>
<a href="#l10.1787"></a><span id="l10.1787" class="difflineplus">+JAR_MANIFEST := $(srcdir)/jar.mn</span>
<a href="#l10.1788"></a><span id="l10.1788" class="difflineplus">+</span>
<a href="#l10.1789"></a><span id="l10.1789" class="difflineplus">+chrome::</span>
<a href="#l10.1790"></a><span id="l10.1790" class="difflineplus">+	$(MAKE) realchrome</span>
<a href="#l10.1791"></a><span id="l10.1791" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.1792"></a><span id="l10.1792" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.1793"></a><span id="l10.1793" class="difflineplus">+</span>
<a href="#l10.1794"></a><span id="l10.1794" class="difflineplus">+libs realchrome:: $(CHROME_DEPS)</span>
<a href="#l10.1795"></a><span id="l10.1795" class="difflineplus">+ifndef NO_DIST_INSTALL</span>
<a href="#l10.1796"></a><span id="l10.1796" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1797"></a><span id="l10.1797" class="difflineplus">+	if test -f $(JAR_MANIFEST); then \</span>
<a href="#l10.1798"></a><span id="l10.1798" class="difflineplus">+	  if test ! -d $(FINAL_TARGET)/chrome; then $(NSINSTALL) -D $(FINAL_TARGET)/chrome; fi; \</span>
<a href="#l10.1799"></a><span id="l10.1799" class="difflineplus">+	  if test ! -d $(MAKE_JARS_TARGET)/chrome; then $(NSINSTALL) -D $(MAKE_JARS_TARGET)/chrome; fi; \</span>
<a href="#l10.1800"></a><span id="l10.1800" class="difflineplus">+	  $(PYTHON) $(MOZILLA_DIR)/config/Preprocessor.py $(XULPPFLAGS) $(DEFINES) $(ACDEFINES) \</span>
<a href="#l10.1801"></a><span id="l10.1801" class="difflineplus">+	    $(JAR_MANIFEST) | \</span>
<a href="#l10.1802"></a><span id="l10.1802" class="difflineplus">+	  $(PERL) -I$(MOZILLA_DIR)/config $(MOZILLA_DIR)/config/make-jars.pl \</span>
<a href="#l10.1803"></a><span id="l10.1803" class="difflineplus">+	    $(QUIET) -d $(MAKE_JARS_TARGET)/chrome -j $(FINAL_TARGET)/chrome \</span>
<a href="#l10.1804"></a><span id="l10.1804" class="difflineplus">+	    $(MAKE_JARS_FLAGS) -- &quot;$(XULPPFLAGS) $(DEFINES) $(ACDEFINES)&quot;; \</span>
<a href="#l10.1805"></a><span id="l10.1805" class="difflineplus">+	fi</span>
<a href="#l10.1806"></a><span id="l10.1806" class="difflineplus">+endif</span>
<a href="#l10.1807"></a><span id="l10.1807" class="difflineplus">+</span>
<a href="#l10.1808"></a><span id="l10.1808" class="difflineplus">+ifneq ($(DIST_FILES),)</span>
<a href="#l10.1809"></a><span id="l10.1809" class="difflineplus">+libs:: $(DIST_FILES)</span>
<a href="#l10.1810"></a><span id="l10.1810" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1811"></a><span id="l10.1811" class="difflineplus">+	for f in $(DIST_FILES); do \</span>
<a href="#l10.1812"></a><span id="l10.1812" class="difflineplus">+	  dest=$(FINAL_TARGET)/`basename $$f`; \</span>
<a href="#l10.1813"></a><span id="l10.1813" class="difflineplus">+	  $(RM) -f $$dest; \</span>
<a href="#l10.1814"></a><span id="l10.1814" class="difflineplus">+	  $(PYTHON) $(MOZILLA_DIR)/config/Preprocessor.py \</span>
<a href="#l10.1815"></a><span id="l10.1815" class="difflineplus">+	    $(XULAPP_DEFINES) $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) \</span>
<a href="#l10.1816"></a><span id="l10.1816" class="difflineplus">+	    $(srcdir)/$$f &gt; $$dest; \</span>
<a href="#l10.1817"></a><span id="l10.1817" class="difflineplus">+	done</span>
<a href="#l10.1818"></a><span id="l10.1818" class="difflineplus">+endif</span>
<a href="#l10.1819"></a><span id="l10.1819" class="difflineplus">+</span>
<a href="#l10.1820"></a><span id="l10.1820" class="difflineplus">+ifneq ($(DIST_CHROME_FILES),)</span>
<a href="#l10.1821"></a><span id="l10.1821" class="difflineplus">+libs:: $(DIST_CHROME_FILES)</span>
<a href="#l10.1822"></a><span id="l10.1822" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1823"></a><span id="l10.1823" class="difflineplus">+	for f in $(DIST_CHROME_FILES); do \</span>
<a href="#l10.1824"></a><span id="l10.1824" class="difflineplus">+	  dest=$(FINAL_TARGET)/chrome/`basename $$f`; \</span>
<a href="#l10.1825"></a><span id="l10.1825" class="difflineplus">+	  $(RM) -f $$dest; \</span>
<a href="#l10.1826"></a><span id="l10.1826" class="difflineplus">+	  $(PYTHON) $(MOZILLA_DIR)/config/Preprocessor.py \</span>
<a href="#l10.1827"></a><span id="l10.1827" class="difflineplus">+	    $(XULAPP_DEFINES) $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) \</span>
<a href="#l10.1828"></a><span id="l10.1828" class="difflineplus">+	    $(srcdir)/$$f &gt; $$dest; \</span>
<a href="#l10.1829"></a><span id="l10.1829" class="difflineplus">+	done</span>
<a href="#l10.1830"></a><span id="l10.1830" class="difflineplus">+endif</span>
<a href="#l10.1831"></a><span id="l10.1831" class="difflineplus">+</span>
<a href="#l10.1832"></a><span id="l10.1832" class="difflineplus">+ifneq ($(XPI_PKGNAME),)</span>
<a href="#l10.1833"></a><span id="l10.1833" class="difflineplus">+libs realchrome::</span>
<a href="#l10.1834"></a><span id="l10.1834" class="difflineplus">+ifdef STRIP_XPI</span>
<a href="#l10.1835"></a><span id="l10.1835" class="difflineplus">+ifndef MOZ_DEBUG</span>
<a href="#l10.1836"></a><span id="l10.1836" class="difflineplus">+	@echo &quot;Stripping $(XPI_PKGNAME) package directory...&quot;</span>
<a href="#l10.1837"></a><span id="l10.1837" class="difflineplus">+	@echo $(FINAL_TARGET)</span>
<a href="#l10.1838"></a><span id="l10.1838" class="difflineplus">+	@cd $(FINAL_TARGET) &amp;&amp; find . ! -type d \</span>
<a href="#l10.1839"></a><span id="l10.1839" class="difflineplus">+			! -name &quot;*.js&quot; \</span>
<a href="#l10.1840"></a><span id="l10.1840" class="difflineplus">+			! -name &quot;*.xpt&quot; \</span>
<a href="#l10.1841"></a><span id="l10.1841" class="difflineplus">+			! -name &quot;*.gif&quot; \</span>
<a href="#l10.1842"></a><span id="l10.1842" class="difflineplus">+			! -name &quot;*.jpg&quot; \</span>
<a href="#l10.1843"></a><span id="l10.1843" class="difflineplus">+			! -name &quot;*.png&quot; \</span>
<a href="#l10.1844"></a><span id="l10.1844" class="difflineplus">+			! -name &quot;*.xpm&quot; \</span>
<a href="#l10.1845"></a><span id="l10.1845" class="difflineplus">+			! -name &quot;*.txt&quot; \</span>
<a href="#l10.1846"></a><span id="l10.1846" class="difflineplus">+			! -name &quot;*.rdf&quot; \</span>
<a href="#l10.1847"></a><span id="l10.1847" class="difflineplus">+			! -name &quot;*.sh&quot; \</span>
<a href="#l10.1848"></a><span id="l10.1848" class="difflineplus">+			! -name &quot;*.properties&quot; \</span>
<a href="#l10.1849"></a><span id="l10.1849" class="difflineplus">+			! -name &quot;*.dtd&quot; \</span>
<a href="#l10.1850"></a><span id="l10.1850" class="difflineplus">+			! -name &quot;*.html&quot; \</span>
<a href="#l10.1851"></a><span id="l10.1851" class="difflineplus">+			! -name &quot;*.xul&quot; \</span>
<a href="#l10.1852"></a><span id="l10.1852" class="difflineplus">+			! -name &quot;*.css&quot; \</span>
<a href="#l10.1853"></a><span id="l10.1853" class="difflineplus">+			! -name &quot;*.xml&quot; \</span>
<a href="#l10.1854"></a><span id="l10.1854" class="difflineplus">+			! -name &quot;*.jar&quot; \</span>
<a href="#l10.1855"></a><span id="l10.1855" class="difflineplus">+			! -name &quot;*.dat&quot; \</span>
<a href="#l10.1856"></a><span id="l10.1856" class="difflineplus">+			! -name &quot;*.tbl&quot; \</span>
<a href="#l10.1857"></a><span id="l10.1857" class="difflineplus">+			! -name &quot;*.src&quot; \</span>
<a href="#l10.1858"></a><span id="l10.1858" class="difflineplus">+			! -name &quot;*.reg&quot; \</span>
<a href="#l10.1859"></a><span id="l10.1859" class="difflineplus">+			$(PLATFORM_EXCLUDE_LIST) \</span>
<a href="#l10.1860"></a><span id="l10.1860" class="difflineplus">+			-exec $(STRIP) $(STRIP_FLAGS) {} &gt;/dev/null 2&gt;&amp;1 \;</span>
<a href="#l10.1861"></a><span id="l10.1861" class="difflineplus">+endif</span>
<a href="#l10.1862"></a><span id="l10.1862" class="difflineplus">+endif</span>
<a href="#l10.1863"></a><span id="l10.1863" class="difflineplus">+	@echo &quot;Packaging $(XPI_PKGNAME).xpi...&quot;</span>
<a href="#l10.1864"></a><span id="l10.1864" class="difflineplus">+	cd $(FINAL_TARGET) &amp;&amp; $(ZIP) -qr ../$(XPI_PKGNAME).xpi *</span>
<a href="#l10.1865"></a><span id="l10.1865" class="difflineplus">+endif</span>
<a href="#l10.1866"></a><span id="l10.1866" class="difflineplus">+</span>
<a href="#l10.1867"></a><span id="l10.1867" class="difflineplus">+ifdef INSTALL_EXTENSION_ID</span>
<a href="#l10.1868"></a><span id="l10.1868" class="difflineplus">+ifndef XPI_NAME</span>
<a href="#l10.1869"></a><span id="l10.1869" class="difflineplus">+$(error XPI_NAME must be set for INSTALL_EXTENSION_ID)</span>
<a href="#l10.1870"></a><span id="l10.1870" class="difflineplus">+endif</span>
<a href="#l10.1871"></a><span id="l10.1871" class="difflineplus">+</span>
<a href="#l10.1872"></a><span id="l10.1872" class="difflineplus">+libs::</span>
<a href="#l10.1873"></a><span id="l10.1873" class="difflineplus">+	$(RM) -rf &quot;$(DIST)/bin/extensions/$(INSTALL_EXTENSION_ID)&quot;</span>
<a href="#l10.1874"></a><span id="l10.1874" class="difflineplus">+	$(NSINSTALL) -D &quot;$(DIST)/bin/extensions/$(INSTALL_EXTENSION_ID)&quot;</span>
<a href="#l10.1875"></a><span id="l10.1875" class="difflineplus">+	cd $(FINAL_TARGET) &amp;&amp; tar $(TAR_CREATE_FLAGS) - . | (cd &quot;../../bin/extensions/$(INSTALL_EXTENSION_ID)&quot; &amp;&amp; tar -xf -)</span>
<a href="#l10.1876"></a><span id="l10.1876" class="difflineplus">+</span>
<a href="#l10.1877"></a><span id="l10.1877" class="difflineplus">+endif</span>
<a href="#l10.1878"></a><span id="l10.1878" class="difflineplus">+</span>
<a href="#l10.1879"></a><span id="l10.1879" class="difflineplus">+ifneq (,$(filter flat symlink,$(MOZ_CHROME_FILE_FORMAT)))</span>
<a href="#l10.1880"></a><span id="l10.1880" class="difflineplus">+_JAR_REGCHROME_DISABLE_JAR=1</span>
<a href="#l10.1881"></a><span id="l10.1881" class="difflineplus">+else</span>
<a href="#l10.1882"></a><span id="l10.1882" class="difflineplus">+_JAR_REGCHROME_DISABLE_JAR=0</span>
<a href="#l10.1883"></a><span id="l10.1883" class="difflineplus">+endif</span>
<a href="#l10.1884"></a><span id="l10.1884" class="difflineplus">+</span>
<a href="#l10.1885"></a><span id="l10.1885" class="difflineplus">+REGCHROME = $(PERL) -I$(MOZILLA_DIR)/config $(MOZILLA_DIR)/config/add-chrome.pl \</span>
<a href="#l10.1886"></a><span id="l10.1886" class="difflineplus">+	$(if $(filter gtk2,$(MOZ_WIDGET_TOOLKIT)),-x) \</span>
<a href="#l10.1887"></a><span id="l10.1887" class="difflineplus">+	$(if $(CROSS_COMPILE),-o $(OS_ARCH)) $(FINAL_TARGET)/chrome/installed-chrome.txt \</span>
<a href="#l10.1888"></a><span id="l10.1888" class="difflineplus">+	$(_JAR_REGCHROME_DISABLE_JAR)</span>
<a href="#l10.1889"></a><span id="l10.1889" class="difflineplus">+</span>
<a href="#l10.1890"></a><span id="l10.1890" class="difflineplus">+REGCHROME_INSTALL = $(PERL) -I$(MOZILLA_DIR)/config $(MOZILLA_DIR)/config/add-chrome.pl \</span>
<a href="#l10.1891"></a><span id="l10.1891" class="difflineplus">+	$(if $(filter gtk2,$(MOZ_WIDGET_TOOLKIT)),-x) \</span>
<a href="#l10.1892"></a><span id="l10.1892" class="difflineplus">+	$(if $(CROSS_COMPILE),-o $(OS_ARCH)) $(DESTDIR)$(mozappdir)/chrome/installed-chrome.txt \</span>
<a href="#l10.1893"></a><span id="l10.1893" class="difflineplus">+	$(_JAR_REGCHROME_DISABLE_JAR)</span>
<a href="#l10.1894"></a><span id="l10.1894" class="difflineplus">+</span>
<a href="#l10.1895"></a><span id="l10.1895" class="difflineplus">+</span>
<a href="#l10.1896"></a><span id="l10.1896" class="difflineplus">+################################################################################</span>
<a href="#l10.1897"></a><span id="l10.1897" class="difflineplus">+# Testing frameworks support</span>
<a href="#l10.1898"></a><span id="l10.1898" class="difflineplus">+################################################################################</span>
<a href="#l10.1899"></a><span id="l10.1899" class="difflineplus">+</span>
<a href="#l10.1900"></a><span id="l10.1900" class="difflineplus">+ifdef ENABLE_TESTS</span>
<a href="#l10.1901"></a><span id="l10.1901" class="difflineplus">+</span>
<a href="#l10.1902"></a><span id="l10.1902" class="difflineplus">+ifdef XPCSHELL_TESTS</span>
<a href="#l10.1903"></a><span id="l10.1903" class="difflineplus">+ifndef MODULE</span>
<a href="#l10.1904"></a><span id="l10.1904" class="difflineplus">+$(error Must define MODULE when defining XPCSHELL_TESTS.)</span>
<a href="#l10.1905"></a><span id="l10.1905" class="difflineplus">+endif</span>
<a href="#l10.1906"></a><span id="l10.1906" class="difflineplus">+</span>
<a href="#l10.1907"></a><span id="l10.1907" class="difflineplus">+# Test file installation</span>
<a href="#l10.1908"></a><span id="l10.1908" class="difflineplus">+libs::</span>
<a href="#l10.1909"></a><span id="l10.1909" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1910"></a><span id="l10.1910" class="difflineplus">+	for testdir in $(XPCSHELL_TESTS); do \</span>
<a href="#l10.1911"></a><span id="l10.1911" class="difflineplus">+	  $(INSTALL) \</span>
<a href="#l10.1912"></a><span id="l10.1912" class="difflineplus">+	    $(srcdir)/$$testdir/*.js \</span>
<a href="#l10.1913"></a><span id="l10.1913" class="difflineplus">+	    $(MOZDEPTH)/_tests/xpcshell-simple/$(MODULE)/$$testdir; \</span>
<a href="#l10.1914"></a><span id="l10.1914" class="difflineplus">+	done</span>
<a href="#l10.1915"></a><span id="l10.1915" class="difflineplus">+</span>
<a href="#l10.1916"></a><span id="l10.1916" class="difflineplus">+# Path formats on Windows are hard.  We require a topsrcdir formatted so that</span>
<a href="#l10.1917"></a><span id="l10.1917" class="difflineplus">+# it may be passed to nsILocalFile.initWithPath (in other words, an absolute</span>
<a href="#l10.1918"></a><span id="l10.1918" class="difflineplus">+# path of the form X:\path\to\topsrcdir), which we store in NATIVE_TOPSRCDIR.</span>
<a href="#l10.1919"></a><span id="l10.1919" class="difflineplus">+# We require a forward-slashed path to topsrcdir so that it may be combined</span>
<a href="#l10.1920"></a><span id="l10.1920" class="difflineplus">+# with a relative forward-slashed path for loading scripts, both dynamically</span>
<a href="#l10.1921"></a><span id="l10.1921" class="difflineplus">+# and statically for head/test/tail JS files.  Of course, on non-Windows none</span>
<a href="#l10.1922"></a><span id="l10.1922" class="difflineplus">+# of this matters, and things will work correctly because everything's</span>
<a href="#l10.1923"></a><span id="l10.1923" class="difflineplus">+# forward-slashed, everywhere, always.</span>
<a href="#l10.1924"></a><span id="l10.1924" class="difflineplus">+ifdef CYGWIN_WRAPPER</span>
<a href="#l10.1925"></a><span id="l10.1925" class="difflineplus">+NATIVE_TOPSRCDIR   := `cygpath -wa $(MOZILLA_SRCDIR)`</span>
<a href="#l10.1926"></a><span id="l10.1926" class="difflineplus">+FWDSLASH_TOPSRCDIR := `cygpath -ma $(MOZILLA_SRCDIR)`</span>
<a href="#l10.1927"></a><span id="l10.1927" class="difflineplus">+else</span>
<a href="#l10.1928"></a><span id="l10.1928" class="difflineplus">+FWDSLASH_TOPSRCDIR := $(MOZILLA_SRCDIR)</span>
<a href="#l10.1929"></a><span id="l10.1929" class="difflineplus">+ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l10.1930"></a><span id="l10.1930" class="difflineplus">+NATIVE_TOPSRCDIR   := $(subst /,\\,$(WIN_TOP_SRC)/mozilla)</span>
<a href="#l10.1931"></a><span id="l10.1931" class="difflineplus">+else </span>
<a href="#l10.1932"></a><span id="l10.1932" class="difflineplus">+NATIVE_TOPSRCDIR   := $(MOZILLA_SRCDIR)</span>
<a href="#l10.1933"></a><span id="l10.1933" class="difflineplus">+endif</span>
<a href="#l10.1934"></a><span id="l10.1934" class="difflineplus">+endif # CYGWIN_WRAPPER</span>
<a href="#l10.1935"></a><span id="l10.1935" class="difflineplus">+</span>
<a href="#l10.1936"></a><span id="l10.1936" class="difflineplus">+# Test execution</span>
<a href="#l10.1937"></a><span id="l10.1937" class="difflineplus">+check::</span>
<a href="#l10.1938"></a><span id="l10.1938" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1939"></a><span id="l10.1939" class="difflineplus">+	for testdir in $(XPCSHELL_TESTS); do \</span>
<a href="#l10.1940"></a><span id="l10.1940" class="difflineplus">+	  $(RUN_TEST_PROGRAM) \</span>
<a href="#l10.1941"></a><span id="l10.1941" class="difflineplus">+	    $(MOZILLA_SRCDIR)/tools/test-harness/xpcshell-simple/test_all.sh \</span>
<a href="#l10.1942"></a><span id="l10.1942" class="difflineplus">+	      $(DIST)/bin/xpcshell \</span>
<a href="#l10.1943"></a><span id="l10.1943" class="difflineplus">+	      $(FWDSLASH_TOPSRCDIR) \</span>
<a href="#l10.1944"></a><span id="l10.1944" class="difflineplus">+	      $(NATIVE_TOPSRCDIR) \</span>
<a href="#l10.1945"></a><span id="l10.1945" class="difflineplus">+	      $(MOZDEPTH)/_tests/xpcshell-simple/$(MODULE)/$$testdir; \</span>
<a href="#l10.1946"></a><span id="l10.1946" class="difflineplus">+	done</span>
<a href="#l10.1947"></a><span id="l10.1947" class="difflineplus">+</span>
<a href="#l10.1948"></a><span id="l10.1948" class="difflineplus">+# Test execution</span>
<a href="#l10.1949"></a><span id="l10.1949" class="difflineplus">+check-interactive::</span>
<a href="#l10.1950"></a><span id="l10.1950" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1951"></a><span id="l10.1951" class="difflineplus">+	$(RUN_TEST_PROGRAM) \</span>
<a href="#l10.1952"></a><span id="l10.1952" class="difflineplus">+	  $(MOZILLA_SRCDIR)/tools/test-harness/xpcshell-simple/test_one.sh \</span>
<a href="#l10.1953"></a><span id="l10.1953" class="difflineplus">+	    $(DIST)/bin/xpcshell \</span>
<a href="#l10.1954"></a><span id="l10.1954" class="difflineplus">+	    $(FWDSLASH_TOPSRCDIR) \</span>
<a href="#l10.1955"></a><span id="l10.1955" class="difflineplus">+	    $(NATIVE_TOPSRCDIR) \</span>
<a href="#l10.1956"></a><span id="l10.1956" class="difflineplus">+	    $(MOZDEPTH)/_tests/xpcshell-simple/$(MODULE)/$$testdir \</span>
<a href="#l10.1957"></a><span id="l10.1957" class="difflineplus">+	    $(SOLO_FILE) 1;</span>
<a href="#l10.1958"></a><span id="l10.1958" class="difflineplus">+</span>
<a href="#l10.1959"></a><span id="l10.1959" class="difflineplus">+# Test execution</span>
<a href="#l10.1960"></a><span id="l10.1960" class="difflineplus">+check-one::</span>
<a href="#l10.1961"></a><span id="l10.1961" class="difflineplus">+	@$(EXIT_ON_ERROR) \</span>
<a href="#l10.1962"></a><span id="l10.1962" class="difflineplus">+	$(RUN_TEST_PROGRAM) \</span>
<a href="#l10.1963"></a><span id="l10.1963" class="difflineplus">+	  $(MOZILLA_SRCDIR)/tools/test-harness/xpcshell-simple/test_one.sh \</span>
<a href="#l10.1964"></a><span id="l10.1964" class="difflineplus">+	    $(DIST)/bin/xpcshell \</span>
<a href="#l10.1965"></a><span id="l10.1965" class="difflineplus">+	    $(FWDSLASH_TOPSRCDIR) \</span>
<a href="#l10.1966"></a><span id="l10.1966" class="difflineplus">+	    $(NATIVE_TOPSRCDIR) \</span>
<a href="#l10.1967"></a><span id="l10.1967" class="difflineplus">+	    $(MOZDEPTH)/_tests/xpcshell-simple/$(MODULE)/$$testdir \</span>
<a href="#l10.1968"></a><span id="l10.1968" class="difflineplus">+	    $(SOLO_FILE) 0;</span>
<a href="#l10.1969"></a><span id="l10.1969" class="difflineplus">+</span>
<a href="#l10.1970"></a><span id="l10.1970" class="difflineplus">+endif # XPCSHELL_TESTS</span>
<a href="#l10.1971"></a><span id="l10.1971" class="difflineplus">+</span>
<a href="#l10.1972"></a><span id="l10.1972" class="difflineplus">+endif # ENABLE_TESTS</span>
<a href="#l10.1973"></a><span id="l10.1973" class="difflineplus">+</span>
<a href="#l10.1974"></a><span id="l10.1974" class="difflineplus">+</span>
<a href="#l10.1975"></a><span id="l10.1975" class="difflineplus">+#############################################################################</span>
<a href="#l10.1976"></a><span id="l10.1976" class="difflineplus">+# Dependency system</span>
<a href="#l10.1977"></a><span id="l10.1977" class="difflineplus">+#############################################################################</span>
<a href="#l10.1978"></a><span id="l10.1978" class="difflineplus">+ifdef COMPILER_DEPEND</span>
<a href="#l10.1979"></a><span id="l10.1979" class="difflineplus">+depend::</span>
<a href="#l10.1980"></a><span id="l10.1980" class="difflineplus">+	@echo &quot;$(MAKE): No need to run depend target.\</span>
<a href="#l10.1981"></a><span id="l10.1981" class="difflineplus">+			Using compiler-based depend.&quot; 1&gt;&amp;2</span>
<a href="#l10.1982"></a><span id="l10.1982" class="difflineplus">+ifeq ($(GNU_CC)$(GNU_CXX),)</span>
<a href="#l10.1983"></a><span id="l10.1983" class="difflineplus">+# Non-GNU compilers</span>
<a href="#l10.1984"></a><span id="l10.1984" class="difflineplus">+	@echo &quot;`echo '$(MAKE):'|sed 's/./ /g'`&quot;\</span>
<a href="#l10.1985"></a><span id="l10.1985" class="difflineplus">+	'(Compiler-based depend was turned on by &quot;--enable-md&quot;.)' 1&gt;&amp;2</span>
<a href="#l10.1986"></a><span id="l10.1986" class="difflineplus">+else</span>
<a href="#l10.1987"></a><span id="l10.1987" class="difflineplus">+# GNU compilers</span>
<a href="#l10.1988"></a><span id="l10.1988" class="difflineplus">+	@space=&quot;`echo '$(MAKE): '|sed 's/./ /g'`&quot;;\</span>
<a href="#l10.1989"></a><span id="l10.1989" class="difflineplus">+	echo &quot;$$space&quot;'Since you are using a GNU compiler,\</span>
<a href="#l10.1990"></a><span id="l10.1990" class="difflineplus">+		it is on by default.' 1&gt;&amp;2; \</span>
<a href="#l10.1991"></a><span id="l10.1991" class="difflineplus">+	echo &quot;$$space&quot;'To turn it off, pass --disable-md to configure.' 1&gt;&amp;2</span>
<a href="#l10.1992"></a><span id="l10.1992" class="difflineplus">+endif</span>
<a href="#l10.1993"></a><span id="l10.1993" class="difflineplus">+</span>
<a href="#l10.1994"></a><span id="l10.1994" class="difflineplus">+else # ! COMPILER_DEPEND</span>
<a href="#l10.1995"></a><span id="l10.1995" class="difflineplus">+</span>
<a href="#l10.1996"></a><span id="l10.1996" class="difflineplus">+ifndef MOZ_AUTO_DEPS</span>
<a href="#l10.1997"></a><span id="l10.1997" class="difflineplus">+</span>
<a href="#l10.1998"></a><span id="l10.1998" class="difflineplus">+define MAKE_DEPS_NOAUTO</span>
<a href="#l10.1999"></a><span id="l10.1999" class="difflineplus">+	$(MKDEPEND) -w1024 -o'.$(OBJ_SUFFIX)' -f- $(DEFINES) $(ACDEFINES) $(INCLUDES) $&lt; 2&gt;/dev/null | sed -e &quot;s|^[^ ]*/||&quot; &gt; $@</span>
<a href="#l10.2000"></a><span id="l10.2000" class="difflineplus">+endef</span>
<a href="#l10.2001"></a><span id="l10.2001" class="difflineplus">+</span>
<a href="#l10.2002"></a><span id="l10.2002" class="difflineplus">+$(MDDEPDIR)/%.pp: %.c</span>
<a href="#l10.2003"></a><span id="l10.2003" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.2004"></a><span id="l10.2004" class="difflineplus">+	@$(MAKE_DEPS_NOAUTO)</span>
<a href="#l10.2005"></a><span id="l10.2005" class="difflineplus">+</span>
<a href="#l10.2006"></a><span id="l10.2006" class="difflineplus">+$(MDDEPDIR)/%.pp: %.cpp</span>
<a href="#l10.2007"></a><span id="l10.2007" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.2008"></a><span id="l10.2008" class="difflineplus">+	@$(MAKE_DEPS_NOAUTO)</span>
<a href="#l10.2009"></a><span id="l10.2009" class="difflineplus">+</span>
<a href="#l10.2010"></a><span id="l10.2010" class="difflineplus">+$(MDDEPDIR)/%.pp: %.s</span>
<a href="#l10.2011"></a><span id="l10.2011" class="difflineplus">+	$(REPORT_BUILD)</span>
<a href="#l10.2012"></a><span id="l10.2012" class="difflineplus">+	@$(MAKE_DEPS_NOAUTO)</span>
<a href="#l10.2013"></a><span id="l10.2013" class="difflineplus">+</span>
<a href="#l10.2014"></a><span id="l10.2014" class="difflineplus">+ifneq (,$(OBJS)$(XPIDLSRCS)$(SDK_XPIDLSRCS)$(SIMPLE_PROGRAMS))</span>
<a href="#l10.2015"></a><span id="l10.2015" class="difflineplus">+depend:: $(SUBMAKEFILES) $(MAKE_DIRS) $(MDDEPFILES)</span>
<a href="#l10.2016"></a><span id="l10.2016" class="difflineplus">+else</span>
<a href="#l10.2017"></a><span id="l10.2017" class="difflineplus">+depend:: $(SUBMAKEFILES)</span>
<a href="#l10.2018"></a><span id="l10.2018" class="difflineplus">+endif</span>
<a href="#l10.2019"></a><span id="l10.2019" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2020"></a><span id="l10.2020" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.2021"></a><span id="l10.2021" class="difflineplus">+</span>
<a href="#l10.2022"></a><span id="l10.2022" class="difflineplus">+dependclean:: $(SUBMAKEFILES)</span>
<a href="#l10.2023"></a><span id="l10.2023" class="difflineplus">+	rm -f $(MDDEPFILES)</span>
<a href="#l10.2024"></a><span id="l10.2024" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2025"></a><span id="l10.2025" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span>
<a href="#l10.2026"></a><span id="l10.2026" class="difflineplus">+</span>
<a href="#l10.2027"></a><span id="l10.2027" class="difflineplus">+endif # MOZ_AUTO_DEPS</span>
<a href="#l10.2028"></a><span id="l10.2028" class="difflineplus">+</span>
<a href="#l10.2029"></a><span id="l10.2029" class="difflineplus">+endif # COMPILER_DEPEND</span>
<a href="#l10.2030"></a><span id="l10.2030" class="difflineplus">+</span>
<a href="#l10.2031"></a><span id="l10.2031" class="difflineplus">+</span>
<a href="#l10.2032"></a><span id="l10.2032" class="difflineplus">+#############################################################################</span>
<a href="#l10.2033"></a><span id="l10.2033" class="difflineplus">+# MDDEPDIR is the subdirectory where all the dependency files are placed.</span>
<a href="#l10.2034"></a><span id="l10.2034" class="difflineplus">+#   This uses a make rule (instead of a macro) to support parallel</span>
<a href="#l10.2035"></a><span id="l10.2035" class="difflineplus">+#   builds (-jN). If this were done in the LOOP_OVER_DIRS macro, two</span>
<a href="#l10.2036"></a><span id="l10.2036" class="difflineplus">+#   processes could simultaneously try to create the same directory.</span>
<a href="#l10.2037"></a><span id="l10.2037" class="difflineplus">+#</span>
<a href="#l10.2038"></a><span id="l10.2038" class="difflineplus">+$(MDDEPDIR):</span>
<a href="#l10.2039"></a><span id="l10.2039" class="difflineplus">+	@if test ! -d $@; then echo Creating $@; rm -rf $@; mkdir $@; else true; fi</span>
<a href="#l10.2040"></a><span id="l10.2040" class="difflineplus">+</span>
<a href="#l10.2041"></a><span id="l10.2041" class="difflineplus">+ifneq (,$(filter-out all chrome default export realchrome tools clean clobber clobber_all distclean realclean,$(MAKECMDGOALS)))</span>
<a href="#l10.2042"></a><span id="l10.2042" class="difflineplus">+ifneq (,$(OBJS)$(XPIDLSRCS)$(SDK_XPIDLSRCS)$(SIMPLE_PROGRAMS))</span>
<a href="#l10.2043"></a><span id="l10.2043" class="difflineplus">+MDDEPEND_FILES		:= $(strip $(wildcard $(MDDEPDIR)/*.pp))</span>
<a href="#l10.2044"></a><span id="l10.2044" class="difflineplus">+</span>
<a href="#l10.2045"></a><span id="l10.2045" class="difflineplus">+ifneq (,$(MDDEPEND_FILES))</span>
<a href="#l10.2046"></a><span id="l10.2046" class="difflineplus">+ifdef PERL</span>
<a href="#l10.2047"></a><span id="l10.2047" class="difflineplus">+# The script mddepend.pl checks the dependencies and writes to stdout</span>
<a href="#l10.2048"></a><span id="l10.2048" class="difflineplus">+# one rule to force out-of-date objects. For example,</span>
<a href="#l10.2049"></a><span id="l10.2049" class="difflineplus">+#   foo.o boo.o: FORCE</span>
<a href="#l10.2050"></a><span id="l10.2050" class="difflineplus">+# The script has an advantage over including the *.pp files directly</span>
<a href="#l10.2051"></a><span id="l10.2051" class="difflineplus">+# because it handles the case when header files are removed from the build.</span>
<a href="#l10.2052"></a><span id="l10.2052" class="difflineplus">+# 'make' would complain that there is no way to build missing headers.</span>
<a href="#l10.2053"></a><span id="l10.2053" class="difflineplus">+ifeq (,$(MAKE_RESTARTS))</span>
<a href="#l10.2054"></a><span id="l10.2054" class="difflineplus">+$(MDDEPDIR)/.all.pp: FORCE</span>
<a href="#l10.2055"></a><span id="l10.2055" class="difflineplus">+	@$(PERL) $(BUILD_TOOLS)/mddepend.pl $@ $(MDDEPEND_FILES)</span>
<a href="#l10.2056"></a><span id="l10.2056" class="difflineplus">+endif</span>
<a href="#l10.2057"></a><span id="l10.2057" class="difflineplus">+-include $(MDDEPDIR)/.all.pp</span>
<a href="#l10.2058"></a><span id="l10.2058" class="difflineplus">+else</span>
<a href="#l10.2059"></a><span id="l10.2059" class="difflineplus">+include $(MDDEPEND_FILES)</span>
<a href="#l10.2060"></a><span id="l10.2060" class="difflineplus">+endif</span>
<a href="#l10.2061"></a><span id="l10.2061" class="difflineplus">+endif</span>
<a href="#l10.2062"></a><span id="l10.2062" class="difflineplus">+</span>
<a href="#l10.2063"></a><span id="l10.2063" class="difflineplus">+endif</span>
<a href="#l10.2064"></a><span id="l10.2064" class="difflineplus">+endif</span>
<a href="#l10.2065"></a><span id="l10.2065" class="difflineplus">+#############################################################################</span>
<a href="#l10.2066"></a><span id="l10.2066" class="difflineplus">+</span>
<a href="#l10.2067"></a><span id="l10.2067" class="difflineplus">+-include $(topsrcdir)/$(MOZ_BUILD_APP)/app-rules.mk</span>
<a href="#l10.2068"></a><span id="l10.2068" class="difflineplus">+-include $(MY_RULES)</span>
<a href="#l10.2069"></a><span id="l10.2069" class="difflineplus">+</span>
<a href="#l10.2070"></a><span id="l10.2070" class="difflineplus">+#</span>
<a href="#l10.2071"></a><span id="l10.2071" class="difflineplus">+# This speeds up gmake's processing if these files don't exist.</span>
<a href="#l10.2072"></a><span id="l10.2072" class="difflineplus">+#</span>
<a href="#l10.2073"></a><span id="l10.2073" class="difflineplus">+$(MY_CONFIG) $(MY_RULES):</span>
<a href="#l10.2074"></a><span id="l10.2074" class="difflineplus">+	@touch $@</span>
<a href="#l10.2075"></a><span id="l10.2075" class="difflineplus">+</span>
<a href="#l10.2076"></a><span id="l10.2076" class="difflineplus">+#</span>
<a href="#l10.2077"></a><span id="l10.2077" class="difflineplus">+# Generate Emacs tags in a file named TAGS if ETAGS was set in $(MY_CONFIG)</span>
<a href="#l10.2078"></a><span id="l10.2078" class="difflineplus">+# or in $(MY_RULES)</span>
<a href="#l10.2079"></a><span id="l10.2079" class="difflineplus">+#</span>
<a href="#l10.2080"></a><span id="l10.2080" class="difflineplus">+ifdef ETAGS</span>
<a href="#l10.2081"></a><span id="l10.2081" class="difflineplus">+ifneq ($(CSRCS)$(CPPSRCS)$(HEADERS),)</span>
<a href="#l10.2082"></a><span id="l10.2082" class="difflineplus">+all:: TAGS</span>
<a href="#l10.2083"></a><span id="l10.2083" class="difflineplus">+TAGS:: $(CSRCS) $(CPPSRCS) $(HEADERS)</span>
<a href="#l10.2084"></a><span id="l10.2084" class="difflineplus">+	$(ETAGS) $(CSRCS) $(CPPSRCS) $(HEADERS)</span>
<a href="#l10.2085"></a><span id="l10.2085" class="difflineplus">+endif</span>
<a href="#l10.2086"></a><span id="l10.2086" class="difflineplus">+endif</span>
<a href="#l10.2087"></a><span id="l10.2087" class="difflineplus">+</span>
<a href="#l10.2088"></a><span id="l10.2088" class="difflineplus">+################################################################################</span>
<a href="#l10.2089"></a><span id="l10.2089" class="difflineplus">+# Special gmake rules.</span>
<a href="#l10.2090"></a><span id="l10.2090" class="difflineplus">+################################################################################</span>
<a href="#l10.2091"></a><span id="l10.2091" class="difflineplus">+</span>
<a href="#l10.2092"></a><span id="l10.2092" class="difflineplus">+</span>
<a href="#l10.2093"></a><span id="l10.2093" class="difflineplus">+#</span>
<a href="#l10.2094"></a><span id="l10.2094" class="difflineplus">+# Disallow parallel builds with MSVC &lt; 8</span>
<a href="#l10.2095"></a><span id="l10.2095" class="difflineplus">+#</span>
<a href="#l10.2096"></a><span id="l10.2096" class="difflineplus">+ifneq (,$(filter 1200 1300 1310,$(_MSC_VER)))</span>
<a href="#l10.2097"></a><span id="l10.2097" class="difflineplus">+.NOTPARALLEL:</span>
<a href="#l10.2098"></a><span id="l10.2098" class="difflineplus">+endif</span>
<a href="#l10.2099"></a><span id="l10.2099" class="difflineplus">+</span>
<a href="#l10.2100"></a><span id="l10.2100" class="difflineplus">+#</span>
<a href="#l10.2101"></a><span id="l10.2101" class="difflineplus">+# Re-define the list of default suffixes, so gmake won't have to churn through</span>
<a href="#l10.2102"></a><span id="l10.2102" class="difflineplus">+# hundreds of built-in suffix rules for stuff we don't need.</span>
<a href="#l10.2103"></a><span id="l10.2103" class="difflineplus">+#</span>
<a href="#l10.2104"></a><span id="l10.2104" class="difflineplus">+.SUFFIXES:</span>
<a href="#l10.2105"></a><span id="l10.2105" class="difflineplus">+</span>
<a href="#l10.2106"></a><span id="l10.2106" class="difflineplus">+#</span>
<a href="#l10.2107"></a><span id="l10.2107" class="difflineplus">+# Fake targets.  Always run these rules, even if a file/directory with that</span>
<a href="#l10.2108"></a><span id="l10.2108" class="difflineplus">+# name already exists.</span>
<a href="#l10.2109"></a><span id="l10.2109" class="difflineplus">+#</span>
<a href="#l10.2110"></a><span id="l10.2110" class="difflineplus">+.PHONY: all all_platforms alltags boot checkout chrome realchrome clean clobber clobber_all export install libs makefiles realclean run_viewer run_apprunner tools $(DIRS) $(TOOL_DIRS) FORCE check check-interactive check-one</span>
<a href="#l10.2111"></a><span id="l10.2111" class="difflineplus">+</span>
<a href="#l10.2112"></a><span id="l10.2112" class="difflineplus">+# Used as a dependency to force targets to rebuild</span>
<a href="#l10.2113"></a><span id="l10.2113" class="difflineplus">+FORCE:</span>
<a href="#l10.2114"></a><span id="l10.2114" class="difflineplus">+</span>
<a href="#l10.2115"></a><span id="l10.2115" class="difflineplus">+# Delete target if error occurs when building target</span>
<a href="#l10.2116"></a><span id="l10.2116" class="difflineplus">+.DELETE_ON_ERROR:</span>
<a href="#l10.2117"></a><span id="l10.2117" class="difflineplus">+</span>
<a href="#l10.2118"></a><span id="l10.2118" class="difflineplus">+# Properly set LIBPATTERNS for the platform</span>
<a href="#l10.2119"></a><span id="l10.2119" class="difflineplus">+.LIBPATTERNS = $(if $(IMPORT_LIB_SUFFIX),$(LIB_PREFIX)%.$(IMPORT_LIB_SUFFIX)) $(LIB_PREFIX)%.$(LIB_SUFFIX) $(DLL_PREFIX)%$(DLL_SUFFIX) </span>
<a href="#l10.2120"></a><span id="l10.2120" class="difflineplus">+</span>
<a href="#l10.2121"></a><span id="l10.2121" class="difflineplus">+tags: TAGS</span>
<a href="#l10.2122"></a><span id="l10.2122" class="difflineplus">+</span>
<a href="#l10.2123"></a><span id="l10.2123" class="difflineplus">+TAGS: $(SUBMAKEFILES) $(CSRCS) $(CPPSRCS) $(wildcard *.h)</span>
<a href="#l10.2124"></a><span id="l10.2124" class="difflineplus">+	-etags $(CSRCS) $(CPPSRCS) $(wildcard *.h)</span>
<a href="#l10.2125"></a><span id="l10.2125" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2126"></a><span id="l10.2126" class="difflineplus">+</span>
<a href="#l10.2127"></a><span id="l10.2127" class="difflineplus">+echo-variable-%:</span>
<a href="#l10.2128"></a><span id="l10.2128" class="difflineplus">+	@echo $($*)</span>
<a href="#l10.2129"></a><span id="l10.2129" class="difflineplus">+</span>
<a href="#l10.2130"></a><span id="l10.2130" class="difflineplus">+echo-tiers:</span>
<a href="#l10.2131"></a><span id="l10.2131" class="difflineplus">+	@echo $(TIERS)</span>
<a href="#l10.2132"></a><span id="l10.2132" class="difflineplus">+</span>
<a href="#l10.2133"></a><span id="l10.2133" class="difflineplus">+echo-dirs:</span>
<a href="#l10.2134"></a><span id="l10.2134" class="difflineplus">+	@echo $(DIRS)</span>
<a href="#l10.2135"></a><span id="l10.2135" class="difflineplus">+</span>
<a href="#l10.2136"></a><span id="l10.2136" class="difflineplus">+echo-module:</span>
<a href="#l10.2137"></a><span id="l10.2137" class="difflineplus">+	@echo $(MODULE)</span>
<a href="#l10.2138"></a><span id="l10.2138" class="difflineplus">+</span>
<a href="#l10.2139"></a><span id="l10.2139" class="difflineplus">+echo-requires:</span>
<a href="#l10.2140"></a><span id="l10.2140" class="difflineplus">+	@echo $(REQUIRES)</span>
<a href="#l10.2141"></a><span id="l10.2141" class="difflineplus">+</span>
<a href="#l10.2142"></a><span id="l10.2142" class="difflineplus">+echo-requires-recursive::</span>
<a href="#l10.2143"></a><span id="l10.2143" class="difflineplus">+ifdef _REPORT_ALL_DIRS</span>
<a href="#l10.2144"></a><span id="l10.2144" class="difflineplus">+	@echo $(subst $(topsrcdir)/,,$(srcdir)): $(MODULE): $(REQUIRES)</span>
<a href="#l10.2145"></a><span id="l10.2145" class="difflineplus">+else</span>
<a href="#l10.2146"></a><span id="l10.2146" class="difflineplus">+	@$(if $(REQUIRES),echo $(subst $(topsrcdir)/,,$(srcdir)): $(MODULE): $(REQUIRES))</span>
<a href="#l10.2147"></a><span id="l10.2147" class="difflineplus">+endif</span>
<a href="#l10.2148"></a><span id="l10.2148" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2149"></a><span id="l10.2149" class="difflineplus">+</span>
<a href="#l10.2150"></a><span id="l10.2150" class="difflineplus">+echo-depth-path:</span>
<a href="#l10.2151"></a><span id="l10.2151" class="difflineplus">+	@$(MOZILLA_SRCDIR)/build/unix/print-depth-path.sh</span>
<a href="#l10.2152"></a><span id="l10.2152" class="difflineplus">+</span>
<a href="#l10.2153"></a><span id="l10.2153" class="difflineplus">+echo-module-name:</span>
<a href="#l10.2154"></a><span id="l10.2154" class="difflineplus">+	@$(MOZILLA_SRCDIR)/build/package/rpm/print-module-name.sh</span>
<a href="#l10.2155"></a><span id="l10.2155" class="difflineplus">+</span>
<a href="#l10.2156"></a><span id="l10.2156" class="difflineplus">+echo-module-filelist:</span>
<a href="#l10.2157"></a><span id="l10.2157" class="difflineplus">+	@$(MOZILLA_SRCDIR)/build/package/rpm/print-module-filelist.sh</span>
<a href="#l10.2158"></a><span id="l10.2158" class="difflineplus">+</span>
<a href="#l10.2159"></a><span id="l10.2159" class="difflineplus">+showtargs:</span>
<a href="#l10.2160"></a><span id="l10.2160" class="difflineplus">+ifneq (,$(filter $(PROGRAM) $(HOST_PROGRAM) $(SIMPLE_PROGRAMS) $(HOST_LIBRARY) $(LIBRARY) $(SHARED_LIBRARY),$(TARGETS)))</span>
<a href="#l10.2161"></a><span id="l10.2161" class="difflineplus">+	@echo --------------------------------------------------------------------------------</span>
<a href="#l10.2162"></a><span id="l10.2162" class="difflineplus">+	@echo &quot;PROGRAM             = $(PROGRAM)&quot;</span>
<a href="#l10.2163"></a><span id="l10.2163" class="difflineplus">+	@echo &quot;SIMPLE_PROGRAMS     = $(SIMPLE_PROGRAMS)&quot;</span>
<a href="#l10.2164"></a><span id="l10.2164" class="difflineplus">+	@echo &quot;LIBRARY             = $(LIBRARY)&quot;</span>
<a href="#l10.2165"></a><span id="l10.2165" class="difflineplus">+	@echo &quot;SHARED_LIBRARY      = $(SHARED_LIBRARY)&quot;</span>
<a href="#l10.2166"></a><span id="l10.2166" class="difflineplus">+	@echo &quot;SHARED_LIBRARY_LIBS = $(SHARED_LIBRARY_LIBS)&quot;</span>
<a href="#l10.2167"></a><span id="l10.2167" class="difflineplus">+	@echo &quot;LIBS                = $(LIBS)&quot;</span>
<a href="#l10.2168"></a><span id="l10.2168" class="difflineplus">+	@echo &quot;DEF_FILE            = $(DEF_FILE)&quot;</span>
<a href="#l10.2169"></a><span id="l10.2169" class="difflineplus">+	@echo &quot;IMPORT_LIBRARY      = $(IMPORT_LIBRARY)&quot;</span>
<a href="#l10.2170"></a><span id="l10.2170" class="difflineplus">+	@echo &quot;STATIC_LIBS         = $(STATIC_LIBS)&quot;</span>
<a href="#l10.2171"></a><span id="l10.2171" class="difflineplus">+	@echo &quot;SHARED_LIBS         = $(SHARED_LIBS)&quot;</span>
<a href="#l10.2172"></a><span id="l10.2172" class="difflineplus">+	@echo &quot;EXTRA_DSO_LIBS      = $(EXTRA_DSO_LIBS)&quot;</span>
<a href="#l10.2173"></a><span id="l10.2173" class="difflineplus">+	@echo &quot;EXTRA_DSO_LDOPTS    = $(EXTRA_DSO_LDOPTS)&quot;</span>
<a href="#l10.2174"></a><span id="l10.2174" class="difflineplus">+	@echo &quot;DEPENDENT_LIBS      = $(DEPENDENT_LIBS)&quot;</span>
<a href="#l10.2175"></a><span id="l10.2175" class="difflineplus">+	@echo --------------------------------------------------------------------------------</span>
<a href="#l10.2176"></a><span id="l10.2176" class="difflineplus">+endif</span>
<a href="#l10.2177"></a><span id="l10.2177" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2178"></a><span id="l10.2178" class="difflineplus">+</span>
<a href="#l10.2179"></a><span id="l10.2179" class="difflineplus">+showbuild:</span>
<a href="#l10.2180"></a><span id="l10.2180" class="difflineplus">+	@echo &quot;MOZ_BUILD_ROOT     = $(MOZ_BUILD_ROOT)&quot;</span>
<a href="#l10.2181"></a><span id="l10.2181" class="difflineplus">+	@echo &quot;MOZ_WIDGET_TOOLKIT = $(MOZ_WIDGET_TOOLKIT)&quot;</span>
<a href="#l10.2182"></a><span id="l10.2182" class="difflineplus">+	@echo &quot;CC                 = $(CC)&quot;</span>
<a href="#l10.2183"></a><span id="l10.2183" class="difflineplus">+	@echo &quot;CXX                = $(CXX)&quot;</span>
<a href="#l10.2184"></a><span id="l10.2184" class="difflineplus">+	@echo &quot;CCC                = $(CCC)&quot;</span>
<a href="#l10.2185"></a><span id="l10.2185" class="difflineplus">+	@echo &quot;CPP                = $(CPP)&quot;</span>
<a href="#l10.2186"></a><span id="l10.2186" class="difflineplus">+	@echo &quot;LD                 = $(LD)&quot;</span>
<a href="#l10.2187"></a><span id="l10.2187" class="difflineplus">+	@echo &quot;AR                 = $(AR)&quot;</span>
<a href="#l10.2188"></a><span id="l10.2188" class="difflineplus">+	@echo &quot;IMPLIB             = $(IMPLIB)&quot;</span>
<a href="#l10.2189"></a><span id="l10.2189" class="difflineplus">+	@echo &quot;FILTER             = $(FILTER)&quot;</span>
<a href="#l10.2190"></a><span id="l10.2190" class="difflineplus">+	@echo &quot;MKSHLIB            = $(MKSHLIB)&quot;</span>
<a href="#l10.2191"></a><span id="l10.2191" class="difflineplus">+	@echo &quot;MKCSHLIB           = $(MKCSHLIB)&quot;</span>
<a href="#l10.2192"></a><span id="l10.2192" class="difflineplus">+	@echo &quot;RC                 = $(RC)&quot;</span>
<a href="#l10.2193"></a><span id="l10.2193" class="difflineplus">+	@echo &quot;CFLAGS             = $(CFLAGS)&quot;</span>
<a href="#l10.2194"></a><span id="l10.2194" class="difflineplus">+	@echo &quot;OS_CFLAGS          = $(OS_CFLAGS)&quot;</span>
<a href="#l10.2195"></a><span id="l10.2195" class="difflineplus">+	@echo &quot;COMPILE_CFLAGS     = $(COMPILE_CFLAGS)&quot;</span>
<a href="#l10.2196"></a><span id="l10.2196" class="difflineplus">+	@echo &quot;CXXFLAGS           = $(CXXFLAGS)&quot;</span>
<a href="#l10.2197"></a><span id="l10.2197" class="difflineplus">+	@echo &quot;OS_CXXFLAGS        = $(OS_CXXFLAGS)&quot;</span>
<a href="#l10.2198"></a><span id="l10.2198" class="difflineplus">+	@echo &quot;COMPILE_CXXFLAGS   = $(COMPILE_CXXFLAGS)&quot;</span>
<a href="#l10.2199"></a><span id="l10.2199" class="difflineplus">+	@echo &quot;COMPILE_CMFLAGS    = $(COMPILE_CMFLAGS)&quot;</span>
<a href="#l10.2200"></a><span id="l10.2200" class="difflineplus">+	@echo &quot;COMPILE_CMMFLAGS   = $(COMPILE_CMMFLAGS)&quot;</span>
<a href="#l10.2201"></a><span id="l10.2201" class="difflineplus">+	@echo &quot;LDFLAGS            = $(LDFLAGS)&quot;</span>
<a href="#l10.2202"></a><span id="l10.2202" class="difflineplus">+	@echo &quot;OS_LDFLAGS         = $(OS_LDFLAGS)&quot;</span>
<a href="#l10.2203"></a><span id="l10.2203" class="difflineplus">+	@echo &quot;DSO_LDOPTS         = $(DSO_LDOPTS)&quot;</span>
<a href="#l10.2204"></a><span id="l10.2204" class="difflineplus">+	@echo &quot;OS_INCLUDES        = $(OS_INCLUDES)&quot;</span>
<a href="#l10.2205"></a><span id="l10.2205" class="difflineplus">+	@echo &quot;OS_LIBS            = $(OS_LIBS)&quot;</span>
<a href="#l10.2206"></a><span id="l10.2206" class="difflineplus">+	@echo &quot;EXTRA_LIBS         = $(EXTRA_LIBS)&quot;</span>
<a href="#l10.2207"></a><span id="l10.2207" class="difflineplus">+	@echo &quot;BIN_FLAGS          = $(BIN_FLAGS)&quot;</span>
<a href="#l10.2208"></a><span id="l10.2208" class="difflineplus">+	@echo &quot;INCLUDES           = $(INCLUDES)&quot;</span>
<a href="#l10.2209"></a><span id="l10.2209" class="difflineplus">+	@echo &quot;DEFINES            = $(DEFINES)&quot;</span>
<a href="#l10.2210"></a><span id="l10.2210" class="difflineplus">+	@echo &quot;ACDEFINES          = $(ACDEFINES)&quot;</span>
<a href="#l10.2211"></a><span id="l10.2211" class="difflineplus">+	@echo &quot;BIN_SUFFIX         = $(BIN_SUFFIX)&quot;</span>
<a href="#l10.2212"></a><span id="l10.2212" class="difflineplus">+	@echo &quot;LIB_SUFFIX         = $(LIB_SUFFIX)&quot;</span>
<a href="#l10.2213"></a><span id="l10.2213" class="difflineplus">+	@echo &quot;DLL_SUFFIX         = $(DLL_SUFFIX)&quot;</span>
<a href="#l10.2214"></a><span id="l10.2214" class="difflineplus">+	@echo &quot;IMPORT_LIB_SUFFIX  = $(IMPORT_LIB_SUFFIX)&quot;</span>
<a href="#l10.2215"></a><span id="l10.2215" class="difflineplus">+	@echo &quot;INSTALL            = $(INSTALL)&quot;</span>
<a href="#l10.2216"></a><span id="l10.2216" class="difflineplus">+</span>
<a href="#l10.2217"></a><span id="l10.2217" class="difflineplus">+showhost:</span>
<a href="#l10.2218"></a><span id="l10.2218" class="difflineplus">+	@echo &quot;HOST_CC            = $(HOST_CC)&quot;</span>
<a href="#l10.2219"></a><span id="l10.2219" class="difflineplus">+	@echo &quot;HOST_CXX           = $(HOST_CXX)&quot;</span>
<a href="#l10.2220"></a><span id="l10.2220" class="difflineplus">+	@echo &quot;HOST_CFLAGS        = $(HOST_CFLAGS)&quot;</span>
<a href="#l10.2221"></a><span id="l10.2221" class="difflineplus">+	@echo &quot;HOST_LDFLAGS       = $(HOST_LDFLAGS)&quot;</span>
<a href="#l10.2222"></a><span id="l10.2222" class="difflineplus">+	@echo &quot;HOST_LIBS          = $(HOST_LIBS)&quot;</span>
<a href="#l10.2223"></a><span id="l10.2223" class="difflineplus">+	@echo &quot;HOST_EXTRA_LIBS    = $(HOST_EXTRA_LIBS)&quot;</span>
<a href="#l10.2224"></a><span id="l10.2224" class="difflineplus">+	@echo &quot;HOST_EXTRA_DEPS    = $(HOST_EXTRA_DEPS)&quot;</span>
<a href="#l10.2225"></a><span id="l10.2225" class="difflineplus">+	@echo &quot;HOST_PROGRAM       = $(HOST_PROGRAM)&quot;</span>
<a href="#l10.2226"></a><span id="l10.2226" class="difflineplus">+	@echo &quot;HOST_OBJS          = $(HOST_OBJS)&quot;</span>
<a href="#l10.2227"></a><span id="l10.2227" class="difflineplus">+	@echo &quot;HOST_PROGOBJS      = $(HOST_PROGOBJS)&quot;</span>
<a href="#l10.2228"></a><span id="l10.2228" class="difflineplus">+	@echo &quot;HOST_LIBRARY       = $(HOST_LIBRARY)&quot;</span>
<a href="#l10.2229"></a><span id="l10.2229" class="difflineplus">+</span>
<a href="#l10.2230"></a><span id="l10.2230" class="difflineplus">+showbuildmods::</span>
<a href="#l10.2231"></a><span id="l10.2231" class="difflineplus">+	@echo &quot;Build Modules	= $(BUILD_MODULES)&quot;</span>
<a href="#l10.2232"></a><span id="l10.2232" class="difflineplus">+	@echo &quot;Module dirs	= $(BUILD_MODULE_DIRS)&quot;</span>
<a href="#l10.2233"></a><span id="l10.2233" class="difflineplus">+</span>
<a href="#l10.2234"></a><span id="l10.2234" class="difflineplus">+zipmakes:</span>
<a href="#l10.2235"></a><span id="l10.2235" class="difflineplus">+ifneq (,$(filter $(PROGRAM) $(SIMPLE_PROGRAMS) $(LIBRARY) $(SHARED_LIBRARY),$(TARGETS)))</span>
<a href="#l10.2236"></a><span id="l10.2236" class="difflineplus">+	zip $(DEPTH)/makefiles $(subst $(topsrcdir),$(MOZ_SRC)/mozilla,$(srcdir)/Makefile.in)</span>
<a href="#l10.2237"></a><span id="l10.2237" class="difflineplus">+endif</span>
<a href="#l10.2238"></a><span id="l10.2238" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2239"></a><span id="l10.2239" class="difflineplus">+</span>
<a href="#l10.2240"></a><span id="l10.2240" class="difflineplus">+documentation:</span>
<a href="#l10.2241"></a><span id="l10.2241" class="difflineplus">+	@cd $(DEPTH)</span>
<a href="#l10.2242"></a><span id="l10.2242" class="difflineplus">+	$(DOXYGEN) $(DEPTH)/config/doxygen.cfg</span>
<a href="#l10.2243"></a><span id="l10.2243" class="difflineplus">+</span>
<a href="#l10.2244"></a><span id="l10.2244" class="difflineplus">+check:: $(SUBMAKEFILES) $(MAKE_DIRS)</span>
<a href="#l10.2245"></a><span id="l10.2245" class="difflineplus">+	+$(LOOP_OVER_DIRS)</span>
<a href="#l10.2246"></a><span id="l10.2246" class="difflineplus">+	+$(LOOP_OVER_TOOL_DIRS)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- /dev/null</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ b/config/static-config.mk</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -0,0 +1,124 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineplus">+#</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineplus">+#</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+#</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineplus">+# License.</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineplus">+#</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+# The Original Code is mozilla.org code.</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineplus">+#</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+# The Initial Developer of the Original Code is</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineplus">+# Netscape Communications Corporation.</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineplus">+#</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineplus">+# Contributor(s):</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineplus">+#</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineplus">+# either of the GNU General Public License Version 2 or later (the &quot;GPL&quot;),</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineplus">+# or the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineplus">+#</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineplus">+</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineplus">+# Static components makefile</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineplus">+# 	Include this makefile after config/config.mk &amp; before config/rules.mk</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineplus">+#	This makefile will provide the defines for statically linking</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineplus">+#	all of the components into the binary.</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineplus">+</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineplus">+STATIC_CPPSRCS	+= nsStaticComponents.cpp</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineplus">+STATIC_DEFINES	+= -D_BUILD_STATIC_BIN=1</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineplus">+STATIC_REQUIRES += \</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineplus">+	xpcom \</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineplus">+	string \</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineplus">+	$(NULL)</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineplus">+</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineplus">+STATIC_EXTRA_LIBS += \</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineplus">+	$(addsuffix .$(LIB_SUFFIX),$(addprefix $(MOZDEPTH)/staticlib/components/$(LIB_PREFIX),$(shell cat $(FINAL_LINK_COMPS)))) \</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineplus">+	$(addsuffix .$(LIB_SUFFIX),$(addprefix $(MOZDEPTH)/staticlib/$(LIB_PREFIX),$(shell cat $(FINAL_LINK_LIBS)))) \</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineplus">+	$(NULL)</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineplus">+</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineplus">+STATIC_COMPONENT_LIST = $(shell cat $(FINAL_LINK_COMP_NAMES))</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineplus">+</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineplus">+STATIC_EXTRA_DEPS	+= $(FINAL_LINK_COMPS) $(FINAL_LINK_LIBS) $(addsuffix .$(LIB_SUFFIX),$(addprefix $(MOZDEPTH)/staticlib/components/$(LIB_PREFIX),$(shell cat $(FINAL_LINK_COMPS)))) $(addsuffix .$(LIB_SUFFIX),$(addprefix $(MOZDEPTH)/staticlib/$(LIB_PREFIX),$(shell cat $(FINAL_LINK_LIBS))))</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineplus">+</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineplus">+STATIC_EXTRA_DEPS	+= \</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineplus">+	$(topsrcdir)/config/static-config.mk \</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineplus">+	$(topsrcdir)/config/static-rules.mk \</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineplus">+	$(NULL)</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineplus">+</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineplus">+ifdef MOZ_PSM</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineplus">+STATIC_EXTRA_DEPS	+= $(NSS_DEP_LIBS)</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineplus">+endif</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineplus">+</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineplus">+STATIC_EXTRA_LIBS	+= \</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineplus">+		$(PNG_LIBS) \</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineplus">+		$(JPEG_LIBS) \</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineplus">+		$(ZLIB_LIBS) \</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineplus">+		$(LCMS_LIBS) \</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineplus">+		$(NULL)</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineplus">+</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineplus">+ifdef MOZ_PSM</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineplus">+STATIC_EXTRA_LIBS	+= \</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineplus">+		$(NSS_LIBS) \</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineplus">+		$(NULL)</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineplus">+endif</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineplus">+</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineplus">+ifdef MOZ_LDAP_XPCOM</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineplus">+STATIC_EXTRA_LIBS	+= \</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineplus">+		$(LDAP_LIBS) \</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineplus">+		$(NULL)</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineplus">+endif</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineplus">+</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(MOZ_CAIRO_LIBS)</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineplus">+</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineplus">+ifdef MOZ_ENABLE_GTK2</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(XLDFLAGS) $(XT_LIBS) -lgthread-2.0</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(MOZ_XFT_LIBS)</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(MOZ_PANGO_LIBS)</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineplus">+endif</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineplus">+</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineplus">+ifdef MOZ_STORAGE</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(SQLITE_LIBS)</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineplus">+endif</span>
<a href="#l11.102"></a><span id="l11.102" class="difflineplus">+</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineplus">+ifdef MOZ_ENABLE_STARTUP_NOTIFICATION</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(MOZ_STARTUP_NOTIFICATION_LIBS)</span>
<a href="#l11.105"></a><span id="l11.105" class="difflineplus">+endif</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineplus">+</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineplus">+# Component Makefile always brings in this.</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineplus">+# STATIC_EXTRA_LIBS	+= $(TK_LIBS)</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineplus">+</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineplus">+# Some random modules require this</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineplus">+ifndef MOZ_NO_XPCOM_OBSOLETE</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineplus">+STATIC_EXTRA_LIBS	+= $(MOZ_XPCOM_OBSOLETE_LIBS)</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineplus">+endif</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineplus">+</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineplus">+STATIC_EXTRA_LIBS += $(call EXPAND_LIBNAME,comctl32 comdlg32 uuid shell32 ole32 oleaut32 version winspool imm32)</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineplus">+# XXX temporary workaround until link ordering issue is solved</span>
<a href="#l11.118"></a><span id="l11.118" class="difflineplus">+ifdef GNU_CC</span>
<a href="#l11.119"></a><span id="l11.119" class="difflineplus">+STATIC_EXTRA_LIBS += $(call EXPAND_LIBNAME,winmm wsock32 gdi32)</span>
<a href="#l11.120"></a><span id="l11.120" class="difflineplus">+endif</span>
<a href="#l11.121"></a><span id="l11.121" class="difflineplus">+STATIC_EXTRA_LIBS += $(call EXPAND_LIBNAME, usp10)</span>
<a href="#l11.122"></a><span id="l11.122" class="difflineplus">+endif</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineplus">+</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineplus">+ifeq ($(OS_ARCH),AIX)</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineplus">+STATIC_EXTRA_LIBS += $(call EXPAND_LIBNAME,odm cfg)</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineplus">+endif</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineplus">+</span>
<a href="#l11.128"></a><span id="l11.128" class="difflineplus">+LOCAL_INCLUDES += -I$(topsrcdir)/config</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/config/static-rules.mk</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,25 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+ifdef _NO_AUTO_VARS</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+_TARGET = $(srcdir)/$(@F)</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineplus">+else</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineplus">+_TARGET = $@</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineplus">+endif</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineplus">+</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineplus">+$(warning FINAL_LINK_COMP_NAMES = $(FINAL_LINK_COMP_NAMES))</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+$(warning FINAL_LINK_COMPS = $(FINAL_LINK_COMPS))</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineplus">+</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+nsStaticComponents.cpp: $(MOZILLA_SRCDIR)/config/nsStaticComponents.cpp.in Makefile Makefile.in $(FINAL_LINK_COMP_NAMES)</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+	rm -f $@</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+	cat $&lt; | \</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineplus">+	sed -e &quot;s|%MODULE_LIST%|$(foreach m, $(STATIC_COMPONENT_LIST),MODULE($(m)))|&quot; \</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineplus">+	&gt; $(_TARGET)</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineplus">+</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineplus">+GARBAGE += nsStaticComponents.cpp</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineplus">+</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineplus">+ifeq ($(OS_ARCH),IRIX)</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineplus">+LDFLAGS	+= -Wl,-LD_LAYOUT:lgot_buffer=80</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineplus">+endif</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineplus">+</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineplus">+ifneq (,$(filter mac cocoa,$(MOZ_WIDGET_TOOLKIT)))</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineplus">+LIBS	+= -framework QuickTime -framework IOKit -lcrypto</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/config/version.mk</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,85 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+# ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+# Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+#</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+# The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+# 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+# the License. You may obtain a copy of the License at</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+# http://www.mozilla.org/MPL/</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+#</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+# Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+# for the specific language governing rights and limitations under the</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+# License.</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+#</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+# The Original Code is the Win32 Version System.</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+#</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+# The Initial Developer of the Original Code is Netscape Communications Corporation</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+# Portions created by the Initial Developer are Copyright (C) 2002</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+# the Initial Developer. All Rights Reserved.</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+#</span>
<a href="#l13.24"></a><span id="l13.24" class="difflineplus">+# Contributor(s):</span>
<a href="#l13.25"></a><span id="l13.25" class="difflineplus">+#</span>
<a href="#l13.26"></a><span id="l13.26" class="difflineplus">+# Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l13.27"></a><span id="l13.27" class="difflineplus">+# either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineplus">+# the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l13.29"></a><span id="l13.29" class="difflineplus">+# in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l13.30"></a><span id="l13.30" class="difflineplus">+# of those above. If you wish to allow use of your version of this file only</span>
<a href="#l13.31"></a><span id="l13.31" class="difflineplus">+# under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l13.32"></a><span id="l13.32" class="difflineplus">+# use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l13.33"></a><span id="l13.33" class="difflineplus">+# decision by deleting the provisions above and replace them with the notice</span>
<a href="#l13.34"></a><span id="l13.34" class="difflineplus">+# and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l13.35"></a><span id="l13.35" class="difflineplus">+# the provisions above, a recipient may use your version of this file under</span>
<a href="#l13.36"></a><span id="l13.36" class="difflineplus">+# the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineplus">+#</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+# ***** END LICENSE BLOCK *****</span>
<a href="#l13.39"></a><span id="l13.39" class="difflineplus">+</span>
<a href="#l13.40"></a><span id="l13.40" class="difflineplus">+ifndef INCLUDED_VERSION_MK</span>
<a href="#l13.41"></a><span id="l13.41" class="difflineplus">+INCLUDED_VERSION_MK=1</span>
<a href="#l13.42"></a><span id="l13.42" class="difflineplus">+</span>
<a href="#l13.43"></a><span id="l13.43" class="difflineplus">+# Windows gmake build:</span>
<a href="#l13.44"></a><span id="l13.44" class="difflineplus">+# Build default .rc file if $(RESFILE) isn't defined.</span>
<a href="#l13.45"></a><span id="l13.45" class="difflineplus">+# TODO:</span>
<a href="#l13.46"></a><span id="l13.46" class="difflineplus">+# PBI      : Private build info.  Not used currently.</span>
<a href="#l13.47"></a><span id="l13.47" class="difflineplus">+#            Guessing the best way would be to set an env var.</span>
<a href="#l13.48"></a><span id="l13.48" class="difflineplus">+# BINARY   : Binary name.  Not used currently.</span>
<a href="#l13.49"></a><span id="l13.49" class="difflineplus">+ifeq ($(MOZ_WIDGET_TOOLKIT),windows)</span>
<a href="#l13.50"></a><span id="l13.50" class="difflineplus">+ifndef RESFILE</span>
<a href="#l13.51"></a><span id="l13.51" class="difflineplus">+RCFILE=./module.rc</span>
<a href="#l13.52"></a><span id="l13.52" class="difflineplus">+RESFILE=./module.res</span>
<a href="#l13.53"></a><span id="l13.53" class="difflineplus">+_RC_STRING = -QUIET 1 -DEPTH $(MOZDEPTH) -TOPSRCDIR $(MOZILLA_SRCDIR) -BITS $(MOZ_BITS) -OBJDIR . -SRCDIR $(srcdir) -DISPNAME $(MOZ_APP_DISPLAYNAME)</span>
<a href="#l13.54"></a><span id="l13.54" class="difflineplus">+ifneq ($(BUILD_OFFICIAL)_$(MOZILLA_OFFICIAL),_)</span>
<a href="#l13.55"></a><span id="l13.55" class="difflineplus">+_RC_STRING += -OFFICIAL 1</span>
<a href="#l13.56"></a><span id="l13.56" class="difflineplus">+endif</span>
<a href="#l13.57"></a><span id="l13.57" class="difflineplus">+ifdef MOZ_DEBUG</span>
<a href="#l13.58"></a><span id="l13.58" class="difflineplus">+_RC_STRING += -DEBUG 1</span>
<a href="#l13.59"></a><span id="l13.59" class="difflineplus">+endif</span>
<a href="#l13.60"></a><span id="l13.60" class="difflineplus">+ifdef MODULE</span>
<a href="#l13.61"></a><span id="l13.61" class="difflineplus">+_RC_STRING += -MODNAME $(MODULE)</span>
<a href="#l13.62"></a><span id="l13.62" class="difflineplus">+endif</span>
<a href="#l13.63"></a><span id="l13.63" class="difflineplus">+ifdef PROGRAM</span>
<a href="#l13.64"></a><span id="l13.64" class="difflineplus">+_RC_STRING += -BINARY $(PROGRAM)</span>
<a href="#l13.65"></a><span id="l13.65" class="difflineplus">+else</span>
<a href="#l13.66"></a><span id="l13.66" class="difflineplus">+ifdef _PROGRAM</span>
<a href="#l13.67"></a><span id="l13.67" class="difflineplus">+_RC_STRING += -BINARY $(_PROGRAM)</span>
<a href="#l13.68"></a><span id="l13.68" class="difflineplus">+else</span>
<a href="#l13.69"></a><span id="l13.69" class="difflineplus">+ifdef SHARED_LIBRARY</span>
<a href="#l13.70"></a><span id="l13.70" class="difflineplus">+_RC_STRING += -BINARY $(SHARED_LIBRARY)</span>
<a href="#l13.71"></a><span id="l13.71" class="difflineplus">+endif</span>
<a href="#l13.72"></a><span id="l13.72" class="difflineplus">+endif</span>
<a href="#l13.73"></a><span id="l13.73" class="difflineplus">+endif</span>
<a href="#l13.74"></a><span id="l13.74" class="difflineplus">+ifdef RCINCLUDE</span>
<a href="#l13.75"></a><span id="l13.75" class="difflineplus">+_RC_STRING += -RCINCLUDE $(srcdir)/$(RCINCLUDE)</span>
<a href="#l13.76"></a><span id="l13.76" class="difflineplus">+endif</span>
<a href="#l13.77"></a><span id="l13.77" class="difflineplus">+</span>
<a href="#l13.78"></a><span id="l13.78" class="difflineplus">+GARBAGE += $(RESFILE) $(RCFILE)</span>
<a href="#l13.79"></a><span id="l13.79" class="difflineplus">+</span>
<a href="#l13.80"></a><span id="l13.80" class="difflineplus">+#dummy target so $(RCFILE) doesn't become the default =P</span>
<a href="#l13.81"></a><span id="l13.81" class="difflineplus">+all::</span>
<a href="#l13.82"></a><span id="l13.82" class="difflineplus">+</span>
<a href="#l13.83"></a><span id="l13.83" class="difflineplus">+$(RCFILE): $(RCINCLUDE) $(MOZILLA_SRCDIR)/config/version_win.pl</span>
<a href="#l13.84"></a><span id="l13.84" class="difflineplus">+	$(PERL) $(MOZILLA_SRCDIR)/config/version_win.pl $(_RC_STRING)</span>
<a href="#l13.85"></a><span id="l13.85" class="difflineplus">+</span>
<a href="#l13.86"></a><span id="l13.86" class="difflineplus">+endif  # RESFILE</span>
<a href="#l13.87"></a><span id="l13.87" class="difflineplus">+endif  # Windows</span>
<a href="#l13.88"></a><span id="l13.88" class="difflineplus">+</span>
<a href="#l13.89"></a><span id="l13.89" class="difflineplus">+endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">new file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- /dev/null</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ b/configure.in</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -0,0 +1,7902 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineplus">+dnl -*- Mode: Autoconf; tab-width: 4; indent-tabs-mode: nil; -*-</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineplus">+dnl vi: set tabstop=4 shiftwidth=4 expandtab:</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineplus">+dnl ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineplus">+dnl Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineplus">+dnl</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineplus">+dnl The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineplus">+dnl 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineplus">+dnl the License. You may obtain a copy of the License at</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+dnl http://www.mozilla.org/MPL/</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+dnl</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+dnl Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineplus">+dnl WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l14.17"></a><span id="l14.17" class="difflineplus">+dnl for the specific language governing rights and limitations under the</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+dnl License.</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+dnl</span>
<a href="#l14.20"></a><span id="l14.20" class="difflineplus">+dnl The Original Code is this file as it was released upon August 6, 1998.</span>
<a href="#l14.21"></a><span id="l14.21" class="difflineplus">+dnl</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineplus">+dnl The Initial Developer of the Original Code is</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineplus">+dnl Christopher Seawood.</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineplus">+dnl Portions created by the Initial Developer are Copyright (C) 1998-2001</span>
<a href="#l14.25"></a><span id="l14.25" class="difflineplus">+dnl the Initial Developer. All Rights Reserved.</span>
<a href="#l14.26"></a><span id="l14.26" class="difflineplus">+dnl</span>
<a href="#l14.27"></a><span id="l14.27" class="difflineplus">+dnl Contributor(s):</span>
<a href="#l14.28"></a><span id="l14.28" class="difflineplus">+dnl   Jamie Zawinski &lt;jwz@jwz.org&gt;</span>
<a href="#l14.29"></a><span id="l14.29" class="difflineplus">+dnl   gettimeofday args check</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineplus">+dnl   Christopher Blizzard &lt;blizzard@appliedtheory.com&gt;</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineplus">+dnl   gnomefe update &amp; enable-pthreads</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+dnl   Ramiro Estrugo &lt;ramiro@netscape.com&gt;</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+dnl   X11 makedepend support</span>
<a href="#l14.34"></a><span id="l14.34" class="difflineplus">+dnl   Insure support.</span>
<a href="#l14.35"></a><span id="l14.35" class="difflineplus">+dnl   Henry Sobotka &lt;sobotka@axess.com&gt;</span>
<a href="#l14.36"></a><span id="l14.36" class="difflineplus">+dnl   OS/2 support</span>
<a href="#l14.37"></a><span id="l14.37" class="difflineplus">+dnl   Dan Mosedale &lt;dmose@mozilla.org&gt;</span>
<a href="#l14.38"></a><span id="l14.38" class="difflineplus">+dnl   LDAP support</span>
<a href="#l14.39"></a><span id="l14.39" class="difflineplus">+dnl   Seth Spitzer &lt;sspitzer@netscape.com&gt;</span>
<a href="#l14.40"></a><span id="l14.40" class="difflineplus">+dnl   xpctools support</span>
<a href="#l14.41"></a><span id="l14.41" class="difflineplus">+dnl   Benjamin Smedberg &lt;benjamin@smedbergs.us&gt;</span>
<a href="#l14.42"></a><span id="l14.42" class="difflineplus">+dnl   Howard Chu &lt;hyc@symas.com&gt;</span>
<a href="#l14.43"></a><span id="l14.43" class="difflineplus">+dnl   MSYS support</span>
<a href="#l14.44"></a><span id="l14.44" class="difflineplus">+dnl   Mark Mentovai &lt;mark@moxienet.com&gt;:</span>
<a href="#l14.45"></a><span id="l14.45" class="difflineplus">+dnl   Mac OS X 10.4 support</span>
<a href="#l14.46"></a><span id="l14.46" class="difflineplus">+dnl   Giorgio Maone &lt;g.maone@informaction.com&gt;</span>
<a href="#l14.47"></a><span id="l14.47" class="difflineplus">+dnl   MSVC l10n compatible version check</span>
<a href="#l14.48"></a><span id="l14.48" class="difflineplus">+dnl   Ben Turner &lt;mozilla@songbirdnest.com&gt;</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineplus">+dnl   comm-central adaptations</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineplus">+dnl   Robert Kaiser &lt;kairo@kairo.at&gt;</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+dnl</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineplus">+dnl Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l14.53"></a><span id="l14.53" class="difflineplus">+dnl either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l14.54"></a><span id="l14.54" class="difflineplus">+dnl the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l14.55"></a><span id="l14.55" class="difflineplus">+dnl in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineplus">+dnl of those above. If you wish to allow use of your version of this file only</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+dnl under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l14.58"></a><span id="l14.58" class="difflineplus">+dnl use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l14.59"></a><span id="l14.59" class="difflineplus">+dnl decision by deleting the provisions above and replace them with the notice</span>
<a href="#l14.60"></a><span id="l14.60" class="difflineplus">+dnl and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l14.61"></a><span id="l14.61" class="difflineplus">+dnl the provisions above, a recipient may use your version of this file under</span>
<a href="#l14.62"></a><span id="l14.62" class="difflineplus">+dnl the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l14.63"></a><span id="l14.63" class="difflineplus">+dnl</span>
<a href="#l14.64"></a><span id="l14.64" class="difflineplus">+dnl ***** END LICENSE BLOCK *****</span>
<a href="#l14.65"></a><span id="l14.65" class="difflineplus">+</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineplus">+dnl Process this file with autoconf to produce a configure script.</span>
<a href="#l14.67"></a><span id="l14.67" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.68"></a><span id="l14.68" class="difflineplus">+</span>
<a href="#l14.69"></a><span id="l14.69" class="difflineplus">+AC_PREREQ(2.13)</span>
<a href="#l14.70"></a><span id="l14.70" class="difflineplus">+AC_INIT(config/config.mk)</span>
<a href="#l14.71"></a><span id="l14.71" class="difflineplus">+MOZILLA_SRCDIR=$topsrcdir/mozilla</span>
<a href="#l14.72"></a><span id="l14.72" class="difflineplus">+AC_CONFIG_AUX_DIR(${MOZILLA_SRCDIR}/build/autoconf)</span>
<a href="#l14.73"></a><span id="l14.73" class="difflineplus">+AC_CANONICAL_SYSTEM</span>
<a href="#l14.74"></a><span id="l14.74" class="difflineplus">+TARGET_CPU=&quot;${target_cpu}&quot;</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineplus">+TARGET_VENDOR=&quot;${target_vendor}&quot;</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+TARGET_OS=&quot;${target_os}&quot;</span>
<a href="#l14.77"></a><span id="l14.77" class="difflineplus">+</span>
<a href="#l14.78"></a><span id="l14.78" class="difflineplus">+dnl comm-central-specific options</span>
<a href="#l14.79"></a><span id="l14.79" class="difflineplus">+dnl (MOZILLA_SRCDIR would fit here, but is needed to find autoconf tools)</span>
<a href="#l14.80"></a><span id="l14.80" class="difflineplus">+COMM_BUILD=1</span>
<a href="#l14.81"></a><span id="l14.81" class="difflineplus">+AC_SUBST(COMM_BUILD)</span>
<a href="#l14.82"></a><span id="l14.82" class="difflineplus">+AC_SUBST(MOZILLA_SRCDIR)</span>
<a href="#l14.83"></a><span id="l14.83" class="difflineplus">+dnl export this, so the var is set for mozilla/configure</span>
<a href="#l14.84"></a><span id="l14.84" class="difflineplus">+export MOZCONFIG=`$_AUTOCONF_TOOLS_DIR/mozconfig-find $topsrcdir`</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineplus">+</span>
<a href="#l14.86"></a><span id="l14.86" class="difflineplus">+MOZ_DEB_TIMESTAMP=`date +&quot;%a, %d  %b %Y %T %z&quot;   2&gt;&amp;1` </span>
<a href="#l14.87"></a><span id="l14.87" class="difflineplus">+AC_SUBST(MOZ_DEB_TIMESTAMP)</span>
<a href="#l14.88"></a><span id="l14.88" class="difflineplus">+</span>
<a href="#l14.89"></a><span id="l14.89" class="difflineplus">+</span>
<a href="#l14.90"></a><span id="l14.90" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.91"></a><span id="l14.91" class="difflineplus">+dnl =</span>
<a href="#l14.92"></a><span id="l14.92" class="difflineplus">+dnl = Don't change the following two lines.  Doing so breaks:</span>
<a href="#l14.93"></a><span id="l14.93" class="difflineplus">+dnl =</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineplus">+dnl = CFLAGS=&quot;-foo&quot; ./configure</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineplus">+dnl =</span>
<a href="#l14.96"></a><span id="l14.96" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.97"></a><span id="l14.97" class="difflineplus">+CFLAGS=&quot;${CFLAGS=}&quot;</span>
<a href="#l14.98"></a><span id="l14.98" class="difflineplus">+CPPFLAGS=&quot;${CPPFLAGS=}&quot;</span>
<a href="#l14.99"></a><span id="l14.99" class="difflineplus">+CXXFLAGS=&quot;${CXXFLAGS=}&quot;</span>
<a href="#l14.100"></a><span id="l14.100" class="difflineplus">+LDFLAGS=&quot;${LDFLAGS=}&quot;</span>
<a href="#l14.101"></a><span id="l14.101" class="difflineplus">+HOST_CFLAGS=&quot;${HOST_CFLAGS=}&quot;</span>
<a href="#l14.102"></a><span id="l14.102" class="difflineplus">+HOST_CXXFLAGS=&quot;${HOST_CXXFLAGS=}&quot;</span>
<a href="#l14.103"></a><span id="l14.103" class="difflineplus">+HOST_LDFLAGS=&quot;${HOST_LDFLAGS=}&quot;</span>
<a href="#l14.104"></a><span id="l14.104" class="difflineplus">+</span>
<a href="#l14.105"></a><span id="l14.105" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.106"></a><span id="l14.106" class="difflineplus">+dnl = Preserve certain environment flags passed to configure</span>
<a href="#l14.107"></a><span id="l14.107" class="difflineplus">+dnl = We want sub projects to receive the same flags</span>
<a href="#l14.108"></a><span id="l14.108" class="difflineplus">+dnl = untainted by this configure script</span>
<a href="#l14.109"></a><span id="l14.109" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.110"></a><span id="l14.110" class="difflineplus">+_SUBDIR_CC=&quot;$CC&quot;</span>
<a href="#l14.111"></a><span id="l14.111" class="difflineplus">+_SUBDIR_CXX=&quot;$CXX&quot;</span>
<a href="#l14.112"></a><span id="l14.112" class="difflineplus">+_SUBDIR_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.113"></a><span id="l14.113" class="difflineplus">+_SUBDIR_CPPFLAGS=&quot;$CPPFLAGS&quot;</span>
<a href="#l14.114"></a><span id="l14.114" class="difflineplus">+_SUBDIR_CXXFLAGS=&quot;$CXXFLAGS&quot;</span>
<a href="#l14.115"></a><span id="l14.115" class="difflineplus">+_SUBDIR_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l14.116"></a><span id="l14.116" class="difflineplus">+_SUBDIR_HOST_CC=&quot;$HOST_CC&quot;</span>
<a href="#l14.117"></a><span id="l14.117" class="difflineplus">+_SUBDIR_HOST_CFLAGS=&quot;$HOST_CFLAGS&quot;</span>
<a href="#l14.118"></a><span id="l14.118" class="difflineplus">+_SUBDIR_HOST_CXXFLAGS=&quot;$HOST_CXXFLAGS&quot;</span>
<a href="#l14.119"></a><span id="l14.119" class="difflineplus">+_SUBDIR_HOST_LDFLAGS=&quot;$HOST_LDFLAGS&quot;</span>
<a href="#l14.120"></a><span id="l14.120" class="difflineplus">+_SUBDIR_CONFIG_ARGS=&quot;$ac_configure_args&quot;</span>
<a href="#l14.121"></a><span id="l14.121" class="difflineplus">+</span>
<a href="#l14.122"></a><span id="l14.122" class="difflineplus">+dnl Set the version number of the libs included with mozilla</span>
<a href="#l14.123"></a><span id="l14.123" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.124"></a><span id="l14.124" class="difflineplus">+MOZJPEG=62</span>
<a href="#l14.125"></a><span id="l14.125" class="difflineplus">+MOZPNG=10217</span>
<a href="#l14.126"></a><span id="l14.126" class="difflineplus">+MOZZLIB=0x1230</span>
<a href="#l14.127"></a><span id="l14.127" class="difflineplus">+NSPR_VERSION=4</span>
<a href="#l14.128"></a><span id="l14.128" class="difflineplus">+NSS_VERSION=3</span>
<a href="#l14.129"></a><span id="l14.129" class="difflineplus">+</span>
<a href="#l14.130"></a><span id="l14.130" class="difflineplus">+dnl Set the minimum version of toolkit libs used by mozilla</span>
<a href="#l14.131"></a><span id="l14.131" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.132"></a><span id="l14.132" class="difflineplus">+GLIB_VERSION=1.2.0</span>
<a href="#l14.133"></a><span id="l14.133" class="difflineplus">+LIBIDL_VERSION=0.6.3</span>
<a href="#l14.134"></a><span id="l14.134" class="difflineplus">+PERL_VERSION=5.006</span>
<a href="#l14.135"></a><span id="l14.135" class="difflineplus">+LIBART_VERSION=2.3.4</span>
<a href="#l14.136"></a><span id="l14.136" class="difflineplus">+CAIRO_VERSION=1.6.0</span>
<a href="#l14.137"></a><span id="l14.137" class="difflineplus">+GLITZ_VERSION=0.4.0</span>
<a href="#l14.138"></a><span id="l14.138" class="difflineplus">+PANGO_VERSION=1.10.0</span>
<a href="#l14.139"></a><span id="l14.139" class="difflineplus">+GTK2_VERSION=2.10.0</span>
<a href="#l14.140"></a><span id="l14.140" class="difflineplus">+MAKE_VERSION=3.78</span>
<a href="#l14.141"></a><span id="l14.141" class="difflineplus">+WINDRES_VERSION=2.14.90</span>
<a href="#l14.142"></a><span id="l14.142" class="difflineplus">+W32API_VERSION=3.8</span>
<a href="#l14.143"></a><span id="l14.143" class="difflineplus">+GNOMEVFS_VERSION=2.0</span>
<a href="#l14.144"></a><span id="l14.144" class="difflineplus">+GNOMEUI_VERSION=2.2.0</span>
<a href="#l14.145"></a><span id="l14.145" class="difflineplus">+GCONF_VERSION=1.2.1</span>
<a href="#l14.146"></a><span id="l14.146" class="difflineplus">+LIBGNOME_VERSION=2.0</span>
<a href="#l14.147"></a><span id="l14.147" class="difflineplus">+STARTUP_NOTIFICATION_VERSION=0.8</span>
<a href="#l14.148"></a><span id="l14.148" class="difflineplus">+DBUS_VERSION=0.60</span>
<a href="#l14.149"></a><span id="l14.149" class="difflineplus">+LCMS_VERSION=1.17</span>
<a href="#l14.150"></a><span id="l14.150" class="difflineplus">+SQLITE_VERSION=3.5.4</span>
<a href="#l14.151"></a><span id="l14.151" class="difflineplus">+</span>
<a href="#l14.152"></a><span id="l14.152" class="difflineplus">+MSMANIFEST_TOOL=</span>
<a href="#l14.153"></a><span id="l14.153" class="difflineplus">+</span>
<a href="#l14.154"></a><span id="l14.154" class="difflineplus">+dnl Set various checks</span>
<a href="#l14.155"></a><span id="l14.155" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.156"></a><span id="l14.156" class="difflineplus">+MISSING_X=</span>
<a href="#l14.157"></a><span id="l14.157" class="difflineplus">+AC_PROG_AWK</span>
<a href="#l14.158"></a><span id="l14.158" class="difflineplus">+</span>
<a href="#l14.159"></a><span id="l14.159" class="difflineplus">+dnl Initialize the Pthread test variables early so they can be</span>
<a href="#l14.160"></a><span id="l14.160" class="difflineplus">+dnl  overridden by each platform.</span>
<a href="#l14.161"></a><span id="l14.161" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.162"></a><span id="l14.162" class="difflineplus">+USE_PTHREADS=</span>
<a href="#l14.163"></a><span id="l14.163" class="difflineplus">+_PTHREAD_LDFLAGS=&quot;&quot;</span>
<a href="#l14.164"></a><span id="l14.164" class="difflineplus">+</span>
<a href="#l14.165"></a><span id="l14.165" class="difflineplus">+dnl Do not allow a separate objdir build if a srcdir build exists.</span>
<a href="#l14.166"></a><span id="l14.166" class="difflineplus">+dnl ==============================================================</span>
<a href="#l14.167"></a><span id="l14.167" class="difflineplus">+_topsrcdir=`cd \`dirname $0\`; pwd`</span>
<a href="#l14.168"></a><span id="l14.168" class="difflineplus">+_objdir=`pwd`</span>
<a href="#l14.169"></a><span id="l14.169" class="difflineplus">+</span>
<a href="#l14.170"></a><span id="l14.170" class="difflineplus">+if test &quot;$_topsrcdir&quot; != &quot;$_objdir&quot;</span>
<a href="#l14.171"></a><span id="l14.171" class="difflineplus">+then</span>
<a href="#l14.172"></a><span id="l14.172" class="difflineplus">+  # Check for a couple representative files in the source tree</span>
<a href="#l14.173"></a><span id="l14.173" class="difflineplus">+  _conflict_files=</span>
<a href="#l14.174"></a><span id="l14.174" class="difflineplus">+  for file in $_topsrcdir/Makefile $_topsrcdir/config/autoconf.mk; do</span>
<a href="#l14.175"></a><span id="l14.175" class="difflineplus">+    if test -f $file; then</span>
<a href="#l14.176"></a><span id="l14.176" class="difflineplus">+      _conflict_files=&quot;$_conflict_files $file&quot;</span>
<a href="#l14.177"></a><span id="l14.177" class="difflineplus">+    fi</span>
<a href="#l14.178"></a><span id="l14.178" class="difflineplus">+  done</span>
<a href="#l14.179"></a><span id="l14.179" class="difflineplus">+  if test &quot;$_conflict_files&quot;; then</span>
<a href="#l14.180"></a><span id="l14.180" class="difflineplus">+    echo &quot;***&quot;</span>
<a href="#l14.181"></a><span id="l14.181" class="difflineplus">+    echo &quot;*   Your source tree contains these files:&quot;</span>
<a href="#l14.182"></a><span id="l14.182" class="difflineplus">+    for file in $_conflict_files; do</span>
<a href="#l14.183"></a><span id="l14.183" class="difflineplus">+      echo &quot;*         $file&quot;</span>
<a href="#l14.184"></a><span id="l14.184" class="difflineplus">+    done</span>
<a href="#l14.185"></a><span id="l14.185" class="difflineplus">+    cat 1&gt;&amp;2 &lt;&lt;-EOF</span>
<a href="#l14.186"></a><span id="l14.186" class="difflineplus">+	*   This indicates that you previously built in the source tree.</span>
<a href="#l14.187"></a><span id="l14.187" class="difflineplus">+	*   A source tree build can confuse the separate objdir build.</span>
<a href="#l14.188"></a><span id="l14.188" class="difflineplus">+	*</span>
<a href="#l14.189"></a><span id="l14.189" class="difflineplus">+	*   To clean up the source tree:</span>
<a href="#l14.190"></a><span id="l14.190" class="difflineplus">+	*     1. cd $_topsrcdir</span>
<a href="#l14.191"></a><span id="l14.191" class="difflineplus">+	*     2. gmake distclean</span>
<a href="#l14.192"></a><span id="l14.192" class="difflineplus">+	***</span>
<a href="#l14.193"></a><span id="l14.193" class="difflineplus">+	EOF</span>
<a href="#l14.194"></a><span id="l14.194" class="difflineplus">+    exit 1</span>
<a href="#l14.195"></a><span id="l14.195" class="difflineplus">+    break</span>
<a href="#l14.196"></a><span id="l14.196" class="difflineplus">+  fi</span>
<a href="#l14.197"></a><span id="l14.197" class="difflineplus">+fi</span>
<a href="#l14.198"></a><span id="l14.198" class="difflineplus">+MOZ_BUILD_ROOT=`pwd`</span>
<a href="#l14.199"></a><span id="l14.199" class="difflineplus">+</span>
<a href="#l14.200"></a><span id="l14.200" class="difflineplus">+dnl Default to MSVC for win32</span>
<a href="#l14.201"></a><span id="l14.201" class="difflineplus">+dnl ==============================================================</span>
<a href="#l14.202"></a><span id="l14.202" class="difflineplus">+if test -z &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l14.203"></a><span id="l14.203" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.204"></a><span id="l14.204" class="difflineplus">+*-cygwin*|*-mingw*|*-msvc*|*-mks*)</span>
<a href="#l14.205"></a><span id="l14.205" class="difflineplus">+    MAKE_VERSION=3.79</span>
<a href="#l14.206"></a><span id="l14.206" class="difflineplus">+    if test -z &quot;$CC&quot;; then CC=cl; fi</span>
<a href="#l14.207"></a><span id="l14.207" class="difflineplus">+    if test -z &quot;$CXX&quot;; then CXX=cl; fi</span>
<a href="#l14.208"></a><span id="l14.208" class="difflineplus">+    if test -z &quot;$CPP&quot;; then CPP=&quot;cl -E -nologo&quot;; fi</span>
<a href="#l14.209"></a><span id="l14.209" class="difflineplus">+    if test -z &quot;$CXXCPP&quot;; then CXXCPP=&quot;cl -TP -E -nologo&quot;; ac_cv_prog_CXXCPP=&quot;$CXXCPP&quot;; fi</span>
<a href="#l14.210"></a><span id="l14.210" class="difflineplus">+    if test -z &quot;$LD&quot;; then LD=link; fi</span>
<a href="#l14.211"></a><span id="l14.211" class="difflineplus">+    if test -z &quot;$AS&quot;; then AS=ml; fi</span>
<a href="#l14.212"></a><span id="l14.212" class="difflineplus">+    if test -z &quot;$MIDL&quot;; then MIDL=midl; fi</span>
<a href="#l14.213"></a><span id="l14.213" class="difflineplus">+    ;;</span>
<a href="#l14.214"></a><span id="l14.214" class="difflineplus">+esac</span>
<a href="#l14.215"></a><span id="l14.215" class="difflineplus">+fi</span>
<a href="#l14.216"></a><span id="l14.216" class="difflineplus">+</span>
<a href="#l14.217"></a><span id="l14.217" class="difflineplus">+COMPILE_ENVIRONMENT=1</span>
<a href="#l14.218"></a><span id="l14.218" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(compile-environment,</span>
<a href="#l14.219"></a><span id="l14.219" class="difflineplus">+[  --disable-compile-environment</span>
<a href="#l14.220"></a><span id="l14.220" class="difflineplus">+                           Disable compiler/library checks.],</span>
<a href="#l14.221"></a><span id="l14.221" class="difflineplus">+    COMPILE_ENVIRONMENT=1,</span>
<a href="#l14.222"></a><span id="l14.222" class="difflineplus">+    COMPILE_ENVIRONMENT= )</span>
<a href="#l14.223"></a><span id="l14.223" class="difflineplus">+</span>
<a href="#l14.224"></a><span id="l14.224" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.225"></a><span id="l14.225" class="difflineplus">+dnl Checks for compilers.</span>
<a href="#l14.226"></a><span id="l14.226" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.227"></a><span id="l14.227" class="difflineplus">+dnl Set CROSS_COMPILE in the environment when running configure</span>
<a href="#l14.228"></a><span id="l14.228" class="difflineplus">+dnl to use the cross-compile setup for now</span>
<a href="#l14.229"></a><span id="l14.229" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.230"></a><span id="l14.230" class="difflineplus">+</span>
<a href="#l14.231"></a><span id="l14.231" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.232"></a><span id="l14.232" class="difflineplus">+</span>
<a href="#l14.233"></a><span id="l14.233" class="difflineplus">+dnl Do some special WinCE toolchain stuff</span>
<a href="#l14.234"></a><span id="l14.234" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.235"></a><span id="l14.235" class="difflineplus">+*wince)</span>
<a href="#l14.236"></a><span id="l14.236" class="difflineplus">+    echo -----------------------------------------------------------------------------</span>
<a href="#l14.237"></a><span id="l14.237" class="difflineplus">+    echo Building Windows CE Shunt Library and Tool Chain</span>
<a href="#l14.238"></a><span id="l14.238" class="difflineplus">+    echo -----------------------------------------------------------------------------</span>
<a href="#l14.239"></a><span id="l14.239" class="difflineplus">+</span>
<a href="#l14.240"></a><span id="l14.240" class="difflineplus">+    ac_exeext=.exe</span>
<a href="#l14.241"></a><span id="l14.241" class="difflineplus">+</span>
<a href="#l14.242"></a><span id="l14.242" class="difflineplus">+    echo -n &quot;#define TOPSRCDIR \&quot;&quot; &gt; $srcdir/build/wince/tools/topsrcdir.h</span>
<a href="#l14.243"></a><span id="l14.243" class="difflineplus">+    echo `cd &quot;$_topsrcdir&quot; &amp;&amp; pwd -W | tr '\n' '\&quot;'` &gt;&gt; $srcdir/build/wince/tools/topsrcdir.h</span>
<a href="#l14.244"></a><span id="l14.244" class="difflineplus">+    make -C $srcdir/build/wince/tools</span>
<a href="#l14.245"></a><span id="l14.245" class="difflineplus">+    echo -----------------------------------------------------------------------------</span>
<a href="#l14.246"></a><span id="l14.246" class="difflineplus">+    ;;</span>
<a href="#l14.247"></a><span id="l14.247" class="difflineplus">+esac</span>
<a href="#l14.248"></a><span id="l14.248" class="difflineplus">+</span>
<a href="#l14.249"></a><span id="l14.249" class="difflineplus">+if test -n &quot;$CROSS_COMPILE&quot; &amp;&amp; test &quot;$target&quot; != &quot;$host&quot;; then</span>
<a href="#l14.250"></a><span id="l14.250" class="difflineplus">+    echo &quot;cross compiling from $host to $target&quot;</span>
<a href="#l14.251"></a><span id="l14.251" class="difflineplus">+    cross_compiling=yes</span>
<a href="#l14.252"></a><span id="l14.252" class="difflineplus">+</span>
<a href="#l14.253"></a><span id="l14.253" class="difflineplus">+    _SAVE_CC=&quot;$CC&quot;</span>
<a href="#l14.254"></a><span id="l14.254" class="difflineplus">+    _SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.255"></a><span id="l14.255" class="difflineplus">+    _SAVE_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l14.256"></a><span id="l14.256" class="difflineplus">+</span>
<a href="#l14.257"></a><span id="l14.257" class="difflineplus">+    AC_MSG_CHECKING([for host c compiler])</span>
<a href="#l14.258"></a><span id="l14.258" class="difflineplus">+    AC_CHECK_PROGS(HOST_CC, $HOST_CC gcc cc /usr/ucb/cc cl icc, &quot;&quot;)</span>
<a href="#l14.259"></a><span id="l14.259" class="difflineplus">+    if test -z &quot;$HOST_CC&quot;; then</span>
<a href="#l14.260"></a><span id="l14.260" class="difflineplus">+        AC_MSG_ERROR([no acceptable c compiler found in \$PATH])</span>
<a href="#l14.261"></a><span id="l14.261" class="difflineplus">+    fi</span>
<a href="#l14.262"></a><span id="l14.262" class="difflineplus">+    AC_MSG_RESULT([$HOST_CC])</span>
<a href="#l14.263"></a><span id="l14.263" class="difflineplus">+    AC_MSG_CHECKING([for host c++ compiler])</span>
<a href="#l14.264"></a><span id="l14.264" class="difflineplus">+    AC_CHECK_PROGS(HOST_CXX, $HOST_CXX $CCC c++ g++ gcc CC cxx cc++ cl icc, &quot;&quot;)</span>
<a href="#l14.265"></a><span id="l14.265" class="difflineplus">+    if test -z &quot;$HOST_CXX&quot;; then</span>
<a href="#l14.266"></a><span id="l14.266" class="difflineplus">+        AC_MSG_ERROR([no acceptable c++ compiler found in \$PATH])</span>
<a href="#l14.267"></a><span id="l14.267" class="difflineplus">+    fi</span>
<a href="#l14.268"></a><span id="l14.268" class="difflineplus">+    AC_MSG_RESULT([$HOST_CXX])</span>
<a href="#l14.269"></a><span id="l14.269" class="difflineplus">+</span>
<a href="#l14.270"></a><span id="l14.270" class="difflineplus">+    if test -z &quot;$HOST_CFLAGS&quot;; then</span>
<a href="#l14.271"></a><span id="l14.271" class="difflineplus">+        HOST_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.272"></a><span id="l14.272" class="difflineplus">+    fi</span>
<a href="#l14.273"></a><span id="l14.273" class="difflineplus">+    if test -z &quot;$HOST_CXXFLAGS&quot;; then</span>
<a href="#l14.274"></a><span id="l14.274" class="difflineplus">+        HOST_CXXFLAGS=&quot;$CXXFLAGS&quot;</span>
<a href="#l14.275"></a><span id="l14.275" class="difflineplus">+    fi</span>
<a href="#l14.276"></a><span id="l14.276" class="difflineplus">+    if test -z &quot;$HOST_LDFLAGS&quot;; then</span>
<a href="#l14.277"></a><span id="l14.277" class="difflineplus">+        HOST_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l14.278"></a><span id="l14.278" class="difflineplus">+    fi</span>
<a href="#l14.279"></a><span id="l14.279" class="difflineplus">+    AC_CHECK_PROGS(HOST_RANLIB, $HOST_RANLIB ranlib, ranlib, :)</span>
<a href="#l14.280"></a><span id="l14.280" class="difflineplus">+    AC_CHECK_PROGS(HOST_AR, $HOST_AR ar, ar, :)</span>
<a href="#l14.281"></a><span id="l14.281" class="difflineplus">+    CC=&quot;$HOST_CC&quot;</span>
<a href="#l14.282"></a><span id="l14.282" class="difflineplus">+    CFLAGS=&quot;$HOST_CFLAGS&quot;</span>
<a href="#l14.283"></a><span id="l14.283" class="difflineplus">+    LDFLAGS=&quot;$HOST_LDFLAGS&quot;</span>
<a href="#l14.284"></a><span id="l14.284" class="difflineplus">+</span>
<a href="#l14.285"></a><span id="l14.285" class="difflineplus">+    AC_MSG_CHECKING([whether the host c compiler ($HOST_CC $HOST_CFLAGS $HOST_LDFLAGS) works])</span>
<a href="#l14.286"></a><span id="l14.286" class="difflineplus">+    AC_TRY_COMPILE([], [return(0);], </span>
<a href="#l14.287"></a><span id="l14.287" class="difflineplus">+	[ac_cv_prog_hostcc_works=1 AC_MSG_RESULT([yes])],</span>
<a href="#l14.288"></a><span id="l14.288" class="difflineplus">+	AC_MSG_ERROR([installation or configuration problem: host compiler $HOST_CC cannot create executables.]) )</span>
<a href="#l14.289"></a><span id="l14.289" class="difflineplus">+</span>
<a href="#l14.290"></a><span id="l14.290" class="difflineplus">+    CC=&quot;$HOST_CXX&quot;</span>
<a href="#l14.291"></a><span id="l14.291" class="difflineplus">+    CFLAGS=&quot;$HOST_CXXFLAGS&quot;</span>
<a href="#l14.292"></a><span id="l14.292" class="difflineplus">+</span>
<a href="#l14.293"></a><span id="l14.293" class="difflineplus">+    AC_MSG_CHECKING([whether the host c++ compiler ($HOST_CXX $HOST_CXXFLAGS $HOST_LDFLAGS) works])</span>
<a href="#l14.294"></a><span id="l14.294" class="difflineplus">+    AC_TRY_COMPILE([], [return(0);], </span>
<a href="#l14.295"></a><span id="l14.295" class="difflineplus">+	[ac_cv_prog_hostcxx_works=1 AC_MSG_RESULT([yes])],</span>
<a href="#l14.296"></a><span id="l14.296" class="difflineplus">+	AC_MSG_ERROR([installation or configuration problem: host compiler $HOST_CXX cannot create executables.]) )</span>
<a href="#l14.297"></a><span id="l14.297" class="difflineplus">+    </span>
<a href="#l14.298"></a><span id="l14.298" class="difflineplus">+    CC=$_SAVE_CC</span>
<a href="#l14.299"></a><span id="l14.299" class="difflineplus">+    CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.300"></a><span id="l14.300" class="difflineplus">+    LDFLAGS=$_SAVE_LDFLAGS</span>
<a href="#l14.301"></a><span id="l14.301" class="difflineplus">+</span>
<a href="#l14.302"></a><span id="l14.302" class="difflineplus">+    case &quot;$build:$target&quot; in</span>
<a href="#l14.303"></a><span id="l14.303" class="difflineplus">+      powerpc-apple-darwin8*:i?86-apple-darwin*)</span>
<a href="#l14.304"></a><span id="l14.304" class="difflineplus">+        dnl The Darwin cross compiler doesn't necessarily point itself at a</span>
<a href="#l14.305"></a><span id="l14.305" class="difflineplus">+        dnl root that has libraries for the proper architecture, it defaults</span>
<a href="#l14.306"></a><span id="l14.306" class="difflineplus">+        dnl to the system root.  The libraries in the system root on current</span>
<a href="#l14.307"></a><span id="l14.307" class="difflineplus">+        dnl versions of PPC OS X 10.4 aren't fat, so these target compiler</span>
<a href="#l14.308"></a><span id="l14.308" class="difflineplus">+        dnl checks will fail.  Fake a working SDK in that case.</span>
<a href="#l14.309"></a><span id="l14.309" class="difflineplus">+        _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.310"></a><span id="l14.310" class="difflineplus">+        _SAVE_CXXFLAGS=$CXXLAGS</span>
<a href="#l14.311"></a><span id="l14.311" class="difflineplus">+        CFLAGS=&quot;-isysroot /Developer/SDKs/MacOSX10.4u.sdk $CFLAGS&quot;</span>
<a href="#l14.312"></a><span id="l14.312" class="difflineplus">+        CXXFLAGS=&quot;-isysroot /Developer/SDKs/MacOSX10.4u.sdk $CXXFLAGS&quot;</span>
<a href="#l14.313"></a><span id="l14.313" class="difflineplus">+        ;;</span>
<a href="#l14.314"></a><span id="l14.314" class="difflineplus">+    esac</span>
<a href="#l14.315"></a><span id="l14.315" class="difflineplus">+</span>
<a href="#l14.316"></a><span id="l14.316" class="difflineplus">+    AC_CHECK_PROGS(CC, $CC &quot;${target_alias}-gcc&quot; &quot;${target}-gcc&quot;, :)</span>
<a href="#l14.317"></a><span id="l14.317" class="difflineplus">+    unset ac_cv_prog_CC</span>
<a href="#l14.318"></a><span id="l14.318" class="difflineplus">+    AC_PROG_CC</span>
<a href="#l14.319"></a><span id="l14.319" class="difflineplus">+    AC_CHECK_PROGS(CXX, $CXX &quot;${target_alias}-g++&quot; &quot;${target}-g++&quot;, :)</span>
<a href="#l14.320"></a><span id="l14.320" class="difflineplus">+    unset ac_cv_prog_CXX</span>
<a href="#l14.321"></a><span id="l14.321" class="difflineplus">+    AC_PROG_CXX</span>
<a href="#l14.322"></a><span id="l14.322" class="difflineplus">+</span>
<a href="#l14.323"></a><span id="l14.323" class="difflineplus">+    case &quot;$build:$target&quot; in</span>
<a href="#l14.324"></a><span id="l14.324" class="difflineplus">+      powerpc-apple-darwin8*:i?86-apple-darwin*)</span>
<a href="#l14.325"></a><span id="l14.325" class="difflineplus">+        dnl Revert the changes made above.  From this point on, the target</span>
<a href="#l14.326"></a><span id="l14.326" class="difflineplus">+        dnl compiler will never be used without applying the SDK to CFLAGS</span>
<a href="#l14.327"></a><span id="l14.327" class="difflineplus">+        dnl (see --with-macos-sdk below).</span>
<a href="#l14.328"></a><span id="l14.328" class="difflineplus">+        CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.329"></a><span id="l14.329" class="difflineplus">+        CXXFLAGS=$_SAVE_CXXFLAGS</span>
<a href="#l14.330"></a><span id="l14.330" class="difflineplus">+        ;;</span>
<a href="#l14.331"></a><span id="l14.331" class="difflineplus">+    esac</span>
<a href="#l14.332"></a><span id="l14.332" class="difflineplus">+</span>
<a href="#l14.333"></a><span id="l14.333" class="difflineplus">+    AC_CHECK_PROGS(RANLIB, $RANLIB &quot;${target_alias}-ranlib&quot; &quot;${target}-ranlib&quot;, :)</span>
<a href="#l14.334"></a><span id="l14.334" class="difflineplus">+    AC_CHECK_PROGS(AR, $AR &quot;${target_alias}-ar&quot; &quot;${target}-ar&quot;, :)</span>
<a href="#l14.335"></a><span id="l14.335" class="difflineplus">+    AC_PATH_PROGS(AS, $AS &quot;${target_alias}-as&quot; &quot;${target}-as&quot;, :)</span>
<a href="#l14.336"></a><span id="l14.336" class="difflineplus">+    AC_CHECK_PROGS(LD, $LD &quot;${target_alias}-ld&quot; &quot;${target}-ld&quot;, :)</span>
<a href="#l14.337"></a><span id="l14.337" class="difflineplus">+    AC_CHECK_PROGS(STRIP, $STRIP &quot;${target_alias}-strip&quot; &quot;${target}-strip&quot;, :)</span>
<a href="#l14.338"></a><span id="l14.338" class="difflineplus">+    AC_CHECK_PROGS(WINDRES, $WINDRES &quot;${target_alias}-windres&quot; &quot;${target}-windres&quot;, :)</span>
<a href="#l14.339"></a><span id="l14.339" class="difflineplus">+    AC_DEFINE(CROSS_COMPILE)</span>
<a href="#l14.340"></a><span id="l14.340" class="difflineplus">+else</span>
<a href="#l14.341"></a><span id="l14.341" class="difflineplus">+    AC_PROG_CC</span>
<a href="#l14.342"></a><span id="l14.342" class="difflineplus">+    AC_PROG_CXX</span>
<a href="#l14.343"></a><span id="l14.343" class="difflineplus">+    AC_PROG_RANLIB</span>
<a href="#l14.344"></a><span id="l14.344" class="difflineplus">+    AC_PATH_PROGS(AS, $AS as, $CC)</span>
<a href="#l14.345"></a><span id="l14.345" class="difflineplus">+    AC_CHECK_PROGS(AR, ar, :)</span>
<a href="#l14.346"></a><span id="l14.346" class="difflineplus">+    AC_CHECK_PROGS(LD, ld, :)</span>
<a href="#l14.347"></a><span id="l14.347" class="difflineplus">+    AC_CHECK_PROGS(STRIP, strip, :)</span>
<a href="#l14.348"></a><span id="l14.348" class="difflineplus">+    AC_CHECK_PROGS(WINDRES, windres, :)</span>
<a href="#l14.349"></a><span id="l14.349" class="difflineplus">+    if test -z &quot;$HOST_CC&quot;; then</span>
<a href="#l14.350"></a><span id="l14.350" class="difflineplus">+        HOST_CC=&quot;$CC&quot;</span>
<a href="#l14.351"></a><span id="l14.351" class="difflineplus">+    fi</span>
<a href="#l14.352"></a><span id="l14.352" class="difflineplus">+    if test -z &quot;$HOST_CFLAGS&quot;; then</span>
<a href="#l14.353"></a><span id="l14.353" class="difflineplus">+        HOST_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.354"></a><span id="l14.354" class="difflineplus">+    fi</span>
<a href="#l14.355"></a><span id="l14.355" class="difflineplus">+    if test -z &quot;$HOST_CXX&quot;; then</span>
<a href="#l14.356"></a><span id="l14.356" class="difflineplus">+        HOST_CXX=&quot;$CXX&quot;</span>
<a href="#l14.357"></a><span id="l14.357" class="difflineplus">+    fi</span>
<a href="#l14.358"></a><span id="l14.358" class="difflineplus">+    if test -z &quot;$HOST_CXXFLAGS&quot;; then</span>
<a href="#l14.359"></a><span id="l14.359" class="difflineplus">+        HOST_CXXFLAGS=&quot;$CXXFLAGS&quot;</span>
<a href="#l14.360"></a><span id="l14.360" class="difflineplus">+    fi</span>
<a href="#l14.361"></a><span id="l14.361" class="difflineplus">+    if test -z &quot;$HOST_LDFLAGS&quot;; then</span>
<a href="#l14.362"></a><span id="l14.362" class="difflineplus">+        HOST_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l14.363"></a><span id="l14.363" class="difflineplus">+    fi</span>
<a href="#l14.364"></a><span id="l14.364" class="difflineplus">+    if test -z &quot;$HOST_RANLIB&quot;; then</span>
<a href="#l14.365"></a><span id="l14.365" class="difflineplus">+        HOST_RANLIB=&quot;$RANLIB&quot;</span>
<a href="#l14.366"></a><span id="l14.366" class="difflineplus">+    fi</span>
<a href="#l14.367"></a><span id="l14.367" class="difflineplus">+    if test -z &quot;$HOST_AR&quot;; then</span>
<a href="#l14.368"></a><span id="l14.368" class="difflineplus">+       HOST_AR=&quot;$AR&quot;</span>
<a href="#l14.369"></a><span id="l14.369" class="difflineplus">+    fi</span>
<a href="#l14.370"></a><span id="l14.370" class="difflineplus">+fi</span>
<a href="#l14.371"></a><span id="l14.371" class="difflineplus">+</span>
<a href="#l14.372"></a><span id="l14.372" class="difflineplus">+GNU_AS=</span>
<a href="#l14.373"></a><span id="l14.373" class="difflineplus">+GNU_LD=</span>
<a href="#l14.374"></a><span id="l14.374" class="difflineplus">+GNU_CC=</span>
<a href="#l14.375"></a><span id="l14.375" class="difflineplus">+GNU_CXX=</span>
<a href="#l14.376"></a><span id="l14.376" class="difflineplus">+CC_VERSION='N/A'</span>
<a href="#l14.377"></a><span id="l14.377" class="difflineplus">+CXX_VERSION='N/A'</span>
<a href="#l14.378"></a><span id="l14.378" class="difflineplus">+if test &quot;$GCC&quot; = &quot;yes&quot;; then</span>
<a href="#l14.379"></a><span id="l14.379" class="difflineplus">+    GNU_CC=1</span>
<a href="#l14.380"></a><span id="l14.380" class="difflineplus">+    CC_VERSION=`$CC -v 2&gt;&amp;1 | grep 'gcc version'`</span>
<a href="#l14.381"></a><span id="l14.381" class="difflineplus">+fi</span>
<a href="#l14.382"></a><span id="l14.382" class="difflineplus">+if test &quot;$GXX&quot; = &quot;yes&quot;; then</span>
<a href="#l14.383"></a><span id="l14.383" class="difflineplus">+    GNU_CXX=1</span>
<a href="#l14.384"></a><span id="l14.384" class="difflineplus">+    CXX_VERSION=`$CXX -v 2&gt;&amp;1 | grep 'gcc version'`</span>
<a href="#l14.385"></a><span id="l14.385" class="difflineplus">+fi</span>
<a href="#l14.386"></a><span id="l14.386" class="difflineplus">+if test &quot;`echo | $AS -v 2&gt;&amp;1 | grep -c GNU`&quot; != &quot;0&quot;; then</span>
<a href="#l14.387"></a><span id="l14.387" class="difflineplus">+    GNU_AS=1</span>
<a href="#l14.388"></a><span id="l14.388" class="difflineplus">+fi</span>
<a href="#l14.389"></a><span id="l14.389" class="difflineplus">+if test &quot;`echo | $LD -v 2&gt;&amp;1 | grep -c GNU`&quot; != &quot;0&quot;; then</span>
<a href="#l14.390"></a><span id="l14.390" class="difflineplus">+    GNU_LD=1</span>
<a href="#l14.391"></a><span id="l14.391" class="difflineplus">+fi</span>
<a href="#l14.392"></a><span id="l14.392" class="difflineplus">+if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.393"></a><span id="l14.393" class="difflineplus">+    if `$CC -print-prog-name=ld` -v 2&gt;&amp;1 | grep -c GNU &gt;/dev/null; then</span>
<a href="#l14.394"></a><span id="l14.394" class="difflineplus">+        GCC_USE_GNU_LD=1</span>
<a href="#l14.395"></a><span id="l14.395" class="difflineplus">+    fi</span>
<a href="#l14.396"></a><span id="l14.396" class="difflineplus">+fi</span>
<a href="#l14.397"></a><span id="l14.397" class="difflineplus">+</span>
<a href="#l14.398"></a><span id="l14.398" class="difflineplus">+INTEL_CC=</span>
<a href="#l14.399"></a><span id="l14.399" class="difflineplus">+INTEL_CXX=</span>
<a href="#l14.400"></a><span id="l14.400" class="difflineplus">+if test &quot;$GCC&quot; = yes; then</span>
<a href="#l14.401"></a><span id="l14.401" class="difflineplus">+   if test &quot;`$CC -help 2&gt;&amp;1 | grep -c 'Intel(R) C Compiler'`&quot; != &quot;0&quot;; then</span>
<a href="#l14.402"></a><span id="l14.402" class="difflineplus">+     INTEL_CC=1</span>
<a href="#l14.403"></a><span id="l14.403" class="difflineplus">+   fi</span>
<a href="#l14.404"></a><span id="l14.404" class="difflineplus">+fi</span>
<a href="#l14.405"></a><span id="l14.405" class="difflineplus">+</span>
<a href="#l14.406"></a><span id="l14.406" class="difflineplus">+if test &quot;$GXX&quot; = yes; then</span>
<a href="#l14.407"></a><span id="l14.407" class="difflineplus">+   if test &quot;`$CXX -help 2&gt;&amp;1 | grep -c 'Intel(R) C++ Compiler'`&quot; != &quot;0&quot;; then</span>
<a href="#l14.408"></a><span id="l14.408" class="difflineplus">+     INTEL_CXX=1</span>
<a href="#l14.409"></a><span id="l14.409" class="difflineplus">+   fi</span>
<a href="#l14.410"></a><span id="l14.410" class="difflineplus">+fi</span>
<a href="#l14.411"></a><span id="l14.411" class="difflineplus">+</span>
<a href="#l14.412"></a><span id="l14.412" class="difflineplus">+dnl Special win32 checks</span>
<a href="#l14.413"></a><span id="l14.413" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.414"></a><span id="l14.414" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.415"></a><span id="l14.415" class="difflineplus">+*-wince)</span>
<a href="#l14.416"></a><span id="l14.416" class="difflineplus">+    WINVER=500</span>
<a href="#l14.417"></a><span id="l14.417" class="difflineplus">+    ;;</span>
<a href="#l14.418"></a><span id="l14.418" class="difflineplus">+*)</span>
<a href="#l14.419"></a><span id="l14.419" class="difflineplus">+    if test -n &quot;$GNU_CC&quot;; then  </span>
<a href="#l14.420"></a><span id="l14.420" class="difflineplus">+        WINVER=501</span>
<a href="#l14.421"></a><span id="l14.421" class="difflineplus">+    else    </span>
<a href="#l14.422"></a><span id="l14.422" class="difflineplus">+        WINVER=500</span>
<a href="#l14.423"></a><span id="l14.423" class="difflineplus">+    fi</span>
<a href="#l14.424"></a><span id="l14.424" class="difflineplus">+    ;;</span>
<a href="#l14.425"></a><span id="l14.425" class="difflineplus">+esac</span>
<a href="#l14.426"></a><span id="l14.426" class="difflineplus">+</span>
<a href="#l14.427"></a><span id="l14.427" class="difflineplus">+MOZ_ARG_WITH_STRING(windows-version,</span>
<a href="#l14.428"></a><span id="l14.428" class="difflineplus">+[  --with-windows-version=WINVER</span>
<a href="#l14.429"></a><span id="l14.429" class="difflineplus">+                          Minimum Windows version (WINVER) to support</span>
<a href="#l14.430"></a><span id="l14.430" class="difflineplus">+                              400: Windows 95</span>
<a href="#l14.431"></a><span id="l14.431" class="difflineplus">+                              500: Windows 2000</span>
<a href="#l14.432"></a><span id="l14.432" class="difflineplus">+                              501: Windows XP],</span>
<a href="#l14.433"></a><span id="l14.433" class="difflineplus">+  WINVER=$withval)</span>
<a href="#l14.434"></a><span id="l14.434" class="difflineplus">+</span>
<a href="#l14.435"></a><span id="l14.435" class="difflineplus">+case &quot;$WINVER&quot; in</span>
<a href="#l14.436"></a><span id="l14.436" class="difflineplus">+400|500|501)</span>
<a href="#l14.437"></a><span id="l14.437" class="difflineplus">+    ;;</span>
<a href="#l14.438"></a><span id="l14.438" class="difflineplus">+</span>
<a href="#l14.439"></a><span id="l14.439" class="difflineplus">+*)</span>
<a href="#l14.440"></a><span id="l14.440" class="difflineplus">+    AC_MSG_ERROR([Invalid value --with-windows-version, must be 400, 500 or 501]);</span>
<a href="#l14.441"></a><span id="l14.441" class="difflineplus">+    ;;</span>
<a href="#l14.442"></a><span id="l14.442" class="difflineplus">+</span>
<a href="#l14.443"></a><span id="l14.443" class="difflineplus">+esac</span>
<a href="#l14.444"></a><span id="l14.444" class="difflineplus">+</span>
<a href="#l14.445"></a><span id="l14.445" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.446"></a><span id="l14.446" class="difflineplus">+*-cygwin*|*-mingw*|*-msvc*|*-mks*|*-wince)</span>
<a href="#l14.447"></a><span id="l14.447" class="difflineplus">+    if test &quot;$GCC&quot; != &quot;yes&quot;; then</span>
<a href="#l14.448"></a><span id="l14.448" class="difflineplus">+        # Check to see if we are really running in a msvc environemnt</span>
<a href="#l14.449"></a><span id="l14.449" class="difflineplus">+        _WIN32_MSVC=1</span>
<a href="#l14.450"></a><span id="l14.450" class="difflineplus">+        AC_CHECK_PROGS(MIDL, midl)</span>
<a href="#l14.451"></a><span id="l14.451" class="difflineplus">+</span>
<a href="#l14.452"></a><span id="l14.452" class="difflineplus">+        # Make sure compilers are valid</span>
<a href="#l14.453"></a><span id="l14.453" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -TC -nologo&quot;</span>
<a href="#l14.454"></a><span id="l14.454" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -TP -nologo&quot;</span>
<a href="#l14.455"></a><span id="l14.455" class="difflineplus">+        AC_LANG_SAVE</span>
<a href="#l14.456"></a><span id="l14.456" class="difflineplus">+        AC_LANG_C</span>
<a href="#l14.457"></a><span id="l14.457" class="difflineplus">+        AC_TRY_COMPILE([#include &lt;stdio.h&gt;],</span>
<a href="#l14.458"></a><span id="l14.458" class="difflineplus">+            [ printf(&quot;Hello World\n&quot;); ],,</span>
<a href="#l14.459"></a><span id="l14.459" class="difflineplus">+            AC_MSG_ERROR([\$(CC) test failed.  You must have MS VC++ in your path to build.]) )</span>
<a href="#l14.460"></a><span id="l14.460" class="difflineplus">+</span>
<a href="#l14.461"></a><span id="l14.461" class="difflineplus">+        AC_LANG_CPLUSPLUS</span>
<a href="#l14.462"></a><span id="l14.462" class="difflineplus">+        AC_TRY_COMPILE([#include &lt;new.h&gt;],</span>
<a href="#l14.463"></a><span id="l14.463" class="difflineplus">+            [ unsigned *test = new unsigned(42); ],,</span>
<a href="#l14.464"></a><span id="l14.464" class="difflineplus">+            AC_MSG_ERROR([\$(CXX) test failed.  You must have MS VC++ in your path to build.]) )</span>
<a href="#l14.465"></a><span id="l14.465" class="difflineplus">+        AC_LANG_RESTORE</span>
<a href="#l14.466"></a><span id="l14.466" class="difflineplus">+        </span>
<a href="#l14.467"></a><span id="l14.467" class="difflineplus">+        changequote(,)</span>
<a href="#l14.468"></a><span id="l14.468" class="difflineplus">+        _MSVC_VER_FILTER='s|.* ([0-9]+\.[0-9]+\.[0-9]+(\.[0-9]+)?).*|\1|p'</span>
<a href="#l14.469"></a><span id="l14.469" class="difflineplus">+        changequote([,])</span>
<a href="#l14.470"></a><span id="l14.470" class="difflineplus">+        </span>
<a href="#l14.471"></a><span id="l14.471" class="difflineplus">+        # Determine compiler version</span>
<a href="#l14.472"></a><span id="l14.472" class="difflineplus">+        CC_VERSION=`&quot;${CC}&quot; -v 2&gt;&amp;1 | sed -nre &quot;$_MSVC_VER_FILTER&quot;`</span>
<a href="#l14.473"></a><span id="l14.473" class="difflineplus">+        _CC_MAJOR_VERSION=`echo ${CC_VERSION} | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.474"></a><span id="l14.474" class="difflineplus">+        _CC_MINOR_VERSION=`echo ${CC_VERSION} | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.475"></a><span id="l14.475" class="difflineplus">+        _CC_RELEASE=`echo ${CC_VERSION} | $AWK -F\. '{ print $3 }'`</span>
<a href="#l14.476"></a><span id="l14.476" class="difflineplus">+        _CC_BUILD=`echo ${CC_VERSION} | $AWK -F\. '{ print $4 }'`</span>
<a href="#l14.477"></a><span id="l14.477" class="difflineplus">+        _MSC_VER=${_CC_MAJOR_VERSION}${_CC_MINOR_VERSION}</span>
<a href="#l14.478"></a><span id="l14.478" class="difflineplus">+</span>
<a href="#l14.479"></a><span id="l14.479" class="difflineplus">+        CXX_VERSION=`&quot;${CXX}&quot; -v 2&gt;&amp;1 | sed -nre &quot;$_MSVC_VER_FILTER&quot;`</span>
<a href="#l14.480"></a><span id="l14.480" class="difflineplus">+        _CXX_MAJOR_VERSION=`echo ${CXX_VERSION} | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.481"></a><span id="l14.481" class="difflineplus">+</span>
<a href="#l14.482"></a><span id="l14.482" class="difflineplus">+        if test &quot;$_CC_MAJOR_VERSION&quot; != &quot;$_CXX_MAJOR_VERSION&quot;; then</span>
<a href="#l14.483"></a><span id="l14.483" class="difflineplus">+            AC_MSG_ERROR([The major versions of \$CC and \$CXX do not match.])</span>
<a href="#l14.484"></a><span id="l14.484" class="difflineplus">+        fi</span>
<a href="#l14.485"></a><span id="l14.485" class="difflineplus">+        if test &quot;$_CC_MAJOR_VERSION&quot; = &quot;12&quot;; then</span>
<a href="#l14.486"></a><span id="l14.486" class="difflineplus">+            _CC_SUITE=6</span>
<a href="#l14.487"></a><span id="l14.487" class="difflineplus">+        elif test &quot;$_CC_MAJOR_VERSION&quot; = &quot;13&quot;; then</span>
<a href="#l14.488"></a><span id="l14.488" class="difflineplus">+            _CC_SUITE=7</span>
<a href="#l14.489"></a><span id="l14.489" class="difflineplus">+        elif test &quot;$_CC_MAJOR_VERSION&quot; = &quot;14&quot;; then</span>
<a href="#l14.490"></a><span id="l14.490" class="difflineplus">+            _CC_SUITE=8</span>
<a href="#l14.491"></a><span id="l14.491" class="difflineplus">+            CXXFLAGS=&quot;$CXXFLAGS -Zc:wchar_t-&quot;</span>
<a href="#l14.492"></a><span id="l14.492" class="difflineplus">+            dnl -DYNAMICBASE is only supported on VC8SP1 or newer,</span>
<a href="#l14.493"></a><span id="l14.493" class="difflineplus">+            dnl so be very specific here!</span>
<a href="#l14.494"></a><span id="l14.494" class="difflineplus">+            dnl VC8 is 14.00.50727.42, VC8SP1 is 14.00.50727.762</span>
<a href="#l14.495"></a><span id="l14.495" class="difflineplus">+            if test $_CC_RELEASE -gt 50727; then</span>
<a href="#l14.496"></a><span id="l14.496" class="difflineplus">+               _USE_DYNAMICBASE=1</span>
<a href="#l14.497"></a><span id="l14.497" class="difflineplus">+            elif test $_CC_BUILD -ge 762; then</span>
<a href="#l14.498"></a><span id="l14.498" class="difflineplus">+               _USE_DYNAMICBASE=1</span>
<a href="#l14.499"></a><span id="l14.499" class="difflineplus">+            fi</span>
<a href="#l14.500"></a><span id="l14.500" class="difflineplus">+            AC_DEFINE(_CRT_SECURE_NO_DEPRECATE)</span>
<a href="#l14.501"></a><span id="l14.501" class="difflineplus">+            AC_DEFINE(_CRT_NONSTDC_NO_DEPRECATE)</span>
<a href="#l14.502"></a><span id="l14.502" class="difflineplus">+        elif test &quot;$_CC_MAJOR_VERSION&quot; = &quot;15&quot;; then</span>
<a href="#l14.503"></a><span id="l14.503" class="difflineplus">+            _CC_SUITE=9</span>
<a href="#l14.504"></a><span id="l14.504" class="difflineplus">+            CXXFLAGS=&quot;$CXXFLAGS -Zc:wchar_t-&quot;</span>
<a href="#l14.505"></a><span id="l14.505" class="difflineplus">+            LDFLAGS=&quot;$LDFLAGS -MANIFESTUAC:NO&quot;</span>
<a href="#l14.506"></a><span id="l14.506" class="difflineplus">+            _USE_DYNAMICBASE=1</span>
<a href="#l14.507"></a><span id="l14.507" class="difflineplus">+            AC_DEFINE(_CRT_SECURE_NO_WARNINGS)</span>
<a href="#l14.508"></a><span id="l14.508" class="difflineplus">+            AC_DEFINE(_CRT_NONSTDC_NO_WARNINGS)</span>
<a href="#l14.509"></a><span id="l14.509" class="difflineplus">+        else</span>
<a href="#l14.510"></a><span id="l14.510" class="difflineplus">+            AC_MSG_ERROR([This version of the MSVC compiler, $CC_VERSION , is unsupported.])</span>
<a href="#l14.511"></a><span id="l14.511" class="difflineplus">+        fi</span>
<a href="#l14.512"></a><span id="l14.512" class="difflineplus">+</span>
<a href="#l14.513"></a><span id="l14.513" class="difflineplus">+        _MOZ_RTTI_FLAGS_ON='-GR'</span>
<a href="#l14.514"></a><span id="l14.514" class="difflineplus">+        _MOZ_RTTI_FLAGS_OFF='-GR-'</span>
<a href="#l14.515"></a><span id="l14.515" class="difflineplus">+        _MOZ_EXCEPTIONS_FLAGS_ON='-EHsc'</span>
<a href="#l14.516"></a><span id="l14.516" class="difflineplus">+        _MOZ_EXCEPTIONS_FLAGS_OFF=''</span>
<a href="#l14.517"></a><span id="l14.517" class="difflineplus">+</span>
<a href="#l14.518"></a><span id="l14.518" class="difflineplus">+        if test -n &quot;$WIN32_REDIST_DIR&quot;; then</span>
<a href="#l14.519"></a><span id="l14.519" class="difflineplus">+            WIN32_REDIST_DIR=`cd &quot;$WIN32_REDIST_DIR&quot; &amp;&amp; pwd`</span>
<a href="#l14.520"></a><span id="l14.520" class="difflineplus">+        fi</span>
<a href="#l14.521"></a><span id="l14.521" class="difflineplus">+	</span>
<a href="#l14.522"></a><span id="l14.522" class="difflineplus">+        # bug #249782</span>
<a href="#l14.523"></a><span id="l14.523" class="difflineplus">+        # ensure that mt.exe is Microsoft (R) Manifest Tool and not magnetic tape manipulation utility (or something else)</span>
<a href="#l14.524"></a><span id="l14.524" class="difflineplus">+        if test &quot;$_CC_SUITE&quot; -ge &quot;8&quot;; then</span>
<a href="#l14.525"></a><span id="l14.525" class="difflineplus">+                changequote(,)</span>
<a href="#l14.526"></a><span id="l14.526" class="difflineplus">+                _MSMT_VER_FILTER='s|.* \([0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\).*|\1|p'</span>
<a href="#l14.527"></a><span id="l14.527" class="difflineplus">+                changequote([,])</span>
<a href="#l14.528"></a><span id="l14.528" class="difflineplus">+</span>
<a href="#l14.529"></a><span id="l14.529" class="difflineplus">+                MSMT_TOOL=`mt 2&gt;&amp;1|grep 'Microsoft (R) Manifest Tool'`</span>
<a href="#l14.530"></a><span id="l14.530" class="difflineplus">+                if test -n &quot;$MSMT_TOOL&quot;; then</span>
<a href="#l14.531"></a><span id="l14.531" class="difflineplus">+                        MSMANIFEST_TOOL_VERSION=`echo ${MSMT_TOOL}|sed -ne &quot;$_MSMT_VER_FILTER&quot;`</span>
<a href="#l14.532"></a><span id="l14.532" class="difflineplus">+                        if test -z &quot;$MSMANIFEST_TOOL_VERSION&quot;; then</span>
<a href="#l14.533"></a><span id="l14.533" class="difflineplus">+                                AC_MSG_WARN([Unknown version of the Microsoft (R) Manifest Tool.])</span>
<a href="#l14.534"></a><span id="l14.534" class="difflineplus">+                        fi</span>
<a href="#l14.535"></a><span id="l14.535" class="difflineplus">+                        MSMANIFEST_TOOL=1</span>
<a href="#l14.536"></a><span id="l14.536" class="difflineplus">+                        unset MSMT_TOOL</span>
<a href="#l14.537"></a><span id="l14.537" class="difflineplus">+                else</span>
<a href="#l14.538"></a><span id="l14.538" class="difflineplus">+                        AC_MSG_ERROR([Microsoft (R) Manifest Tool must be in your \$PATH.])</span>
<a href="#l14.539"></a><span id="l14.539" class="difflineplus">+                fi</span>
<a href="#l14.540"></a><span id="l14.540" class="difflineplus">+        fi</span>
<a href="#l14.541"></a><span id="l14.541" class="difflineplus">+</span>
<a href="#l14.542"></a><span id="l14.542" class="difflineplus">+        # Check linker version</span>
<a href="#l14.543"></a><span id="l14.543" class="difflineplus">+        _LD_FULL_VERSION=`&quot;${LD}&quot; -v 2&gt;&amp;1 | sed -nre &quot;$_MSVC_VER_FILTER&quot;`</span>
<a href="#l14.544"></a><span id="l14.544" class="difflineplus">+        _LD_MAJOR_VERSION=`echo ${_LD_FULL_VERSION} | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.545"></a><span id="l14.545" class="difflineplus">+        if test &quot;$_LD_MAJOR_VERSION&quot; != &quot;$_CC_SUITE&quot;; then</span>
<a href="#l14.546"></a><span id="l14.546" class="difflineplus">+            AC_MSG_ERROR([The linker major version, $_LD_FULL_VERSION,  does not match the compiler suite version, $_CC_SUITE.])</span>
<a href="#l14.547"></a><span id="l14.547" class="difflineplus">+        fi</span>
<a href="#l14.548"></a><span id="l14.548" class="difflineplus">+        INCREMENTAL_LINKER=1</span>
<a href="#l14.549"></a><span id="l14.549" class="difflineplus">+</span>
<a href="#l14.550"></a><span id="l14.550" class="difflineplus">+        # Check midl version</span>
<a href="#l14.551"></a><span id="l14.551" class="difflineplus">+        _MIDL_FULL_VERSION=`&quot;${MIDL}&quot; -v 2&gt;&amp;1 | sed -nre &quot;$_MSVC_VER_FILTER&quot;`</span>
<a href="#l14.552"></a><span id="l14.552" class="difflineplus">+        _MIDL_MAJOR_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.553"></a><span id="l14.553" class="difflineplus">+        _MIDL_MINOR_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.554"></a><span id="l14.554" class="difflineplus">+        _MIDL_REV_VERSION=`echo ${_MIDL_FULL_VERSION} | $AWK -F\. '{ print $3 }'`</span>
<a href="#l14.555"></a><span id="l14.555" class="difflineplus">+         # Add flags if necessary</span>
<a href="#l14.556"></a><span id="l14.556" class="difflineplus">+         AC_MSG_CHECKING([for midl flags])</span>
<a href="#l14.557"></a><span id="l14.557" class="difflineplus">+         if test \( &quot;$_MIDL_MAJOR_VERSION&quot; -gt &quot;6&quot; \) -o \( &quot;$_MIDL_MAJOR_VERSION&quot; = &quot;6&quot; -a &quot;$_MIDL_MINOR_VERSION&quot; -gt &quot;0&quot; \) -o \( &quot;$_MIDL_MAJOR_VERSION&quot; = &quot;6&quot; -a &quot;$_MIDL_MINOR_VERSION&quot; = &quot;00&quot; -a &quot;$_MIDL_REV_VERSION&quot; -gt &quot;359&quot; \); then</span>
<a href="#l14.558"></a><span id="l14.558" class="difflineplus">+             # Starting with MIDL version 6.0.359, the MIDL compiler</span>
<a href="#l14.559"></a><span id="l14.559" class="difflineplus">+             # generates /Oicf /robust stubs by default, which is not</span>
<a href="#l14.560"></a><span id="l14.560" class="difflineplus">+             # compatible with versions of Windows older than Win2k.</span>
<a href="#l14.561"></a><span id="l14.561" class="difflineplus">+             # This switches us back to the old behaviour. When we drop</span>
<a href="#l14.562"></a><span id="l14.562" class="difflineplus">+             # support for Windows older than Win2k, we should remove</span>
<a href="#l14.563"></a><span id="l14.563" class="difflineplus">+             # this.</span>
<a href="#l14.564"></a><span id="l14.564" class="difflineplus">+             MIDL_FLAGS=&quot;${MIDL_FLAGS} -no_robust&quot;</span>
<a href="#l14.565"></a><span id="l14.565" class="difflineplus">+             AC_MSG_RESULT([need -no_robust])</span>
<a href="#l14.566"></a><span id="l14.566" class="difflineplus">+         else</span>
<a href="#l14.567"></a><span id="l14.567" class="difflineplus">+             MIDL_FLAGS=&quot;${MIDL_FLAGS}&quot;</span>
<a href="#l14.568"></a><span id="l14.568" class="difflineplus">+             AC_MSG_RESULT([none needed])</span>
<a href="#l14.569"></a><span id="l14.569" class="difflineplus">+        fi</span>
<a href="#l14.570"></a><span id="l14.570" class="difflineplus">+        </span>
<a href="#l14.571"></a><span id="l14.571" class="difflineplus">+        unset _MSVC_VER_FILTER</span>
<a href="#l14.572"></a><span id="l14.572" class="difflineplus">+        </span>
<a href="#l14.573"></a><span id="l14.573" class="difflineplus">+    else</span>
<a href="#l14.574"></a><span id="l14.574" class="difflineplus">+        # Check w32api version</span>
<a href="#l14.575"></a><span id="l14.575" class="difflineplus">+        _W32API_MAJOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.576"></a><span id="l14.576" class="difflineplus">+        _W32API_MINOR_VERSION=`echo $W32API_VERSION | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.577"></a><span id="l14.577" class="difflineplus">+        AC_MSG_CHECKING([for w32api version &gt;= $W32API_VERSION])</span>
<a href="#l14.578"></a><span id="l14.578" class="difflineplus">+        AC_TRY_COMPILE([#include &lt;w32api.h&gt;],</span>
<a href="#l14.579"></a><span id="l14.579" class="difflineplus">+            #if (__W32API_MAJOR_VERSION &lt; $_W32API_MAJOR_VERSION) || \</span>
<a href="#l14.580"></a><span id="l14.580" class="difflineplus">+                (__W32API_MAJOR_VERSION == $_W32API_MAJOR_VERSION &amp;&amp; \</span>
<a href="#l14.581"></a><span id="l14.581" class="difflineplus">+                 __W32API_MINOR_VERSION &lt; $_W32API_MINOR_VERSION)</span>
<a href="#l14.582"></a><span id="l14.582" class="difflineplus">+                #error &quot;test failed.&quot;</span>
<a href="#l14.583"></a><span id="l14.583" class="difflineplus">+            #endif</span>
<a href="#l14.584"></a><span id="l14.584" class="difflineplus">+            , [ res=yes ], [ res=no ])</span>
<a href="#l14.585"></a><span id="l14.585" class="difflineplus">+        AC_MSG_RESULT([$res])</span>
<a href="#l14.586"></a><span id="l14.586" class="difflineplus">+        if test &quot;$res&quot; != &quot;yes&quot;; then</span>
<a href="#l14.587"></a><span id="l14.587" class="difflineplus">+            AC_MSG_ERROR([w32api version $W32API_VERSION or higher required.])</span>
<a href="#l14.588"></a><span id="l14.588" class="difflineplus">+        fi</span>
<a href="#l14.589"></a><span id="l14.589" class="difflineplus">+        # Check windres version</span>
<a href="#l14.590"></a><span id="l14.590" class="difflineplus">+        AC_MSG_CHECKING([for windres version &gt;= $WINDRES_VERSION])</span>
<a href="#l14.591"></a><span id="l14.591" class="difflineplus">+        _WINDRES_VERSION=`${WINDRES} --version 2&gt;&amp;1 | grep -i windres 2&gt;/dev/null | $AWK '{ print $3 }'`</span>
<a href="#l14.592"></a><span id="l14.592" class="difflineplus">+        AC_MSG_RESULT([$_WINDRES_VERSION])</span>
<a href="#l14.593"></a><span id="l14.593" class="difflineplus">+        _WINDRES_MAJOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.594"></a><span id="l14.594" class="difflineplus">+        _WINDRES_MINOR_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.595"></a><span id="l14.595" class="difflineplus">+        _WINDRES_RELEASE_VERSION=`echo $_WINDRES_VERSION | $AWK -F\. '{ print $3 }'`</span>
<a href="#l14.596"></a><span id="l14.596" class="difflineplus">+        WINDRES_MAJOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.597"></a><span id="l14.597" class="difflineplus">+        WINDRES_MINOR_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.598"></a><span id="l14.598" class="difflineplus">+        WINDRES_RELEASE_VERSION=`echo $WINDRES_VERSION | $AWK -F\. '{ print $3 }'`</span>
<a href="#l14.599"></a><span id="l14.599" class="difflineplus">+        if test &quot;$_WINDRES_MAJOR_VERSION&quot; -lt &quot;$WINDRES_MAJOR_VERSION&quot; -o \</span>
<a href="#l14.600"></a><span id="l14.600" class="difflineplus">+                &quot;$_WINDRES_MAJOR_VERSION&quot; -eq &quot;$WINDRES_MAJOR_VERSION&quot; -a \</span>
<a href="#l14.601"></a><span id="l14.601" class="difflineplus">+                &quot;$_WINDRES_MINOR_VERSION&quot; -lt &quot;$WINDRES_MINOR_VERSION&quot; -o \</span>
<a href="#l14.602"></a><span id="l14.602" class="difflineplus">+                &quot;$_WINDRES_MAJOR_VERSION&quot; -eq &quot;$WINDRES_MAJOR_VERSION&quot; -a \</span>
<a href="#l14.603"></a><span id="l14.603" class="difflineplus">+                &quot;$_WINDRES_MINOR_VERSION&quot; -eq &quot;$WINDRES_MINOR_VERSION&quot; -a \</span>
<a href="#l14.604"></a><span id="l14.604" class="difflineplus">+                &quot;$_WINDRES_RELEASE_VERSION&quot; -lt &quot;$WINDRES_RELEASE_VERSION&quot;</span>
<a href="#l14.605"></a><span id="l14.605" class="difflineplus">+        then</span>
<a href="#l14.606"></a><span id="l14.606" class="difflineplus">+            AC_MSG_ERROR([windres version $WINDRES_VERSION or higher is required to build.])</span>
<a href="#l14.607"></a><span id="l14.607" class="difflineplus">+        fi</span>
<a href="#l14.608"></a><span id="l14.608" class="difflineplus">+    fi # !GNU_CC</span>
<a href="#l14.609"></a><span id="l14.609" class="difflineplus">+</span>
<a href="#l14.610"></a><span id="l14.610" class="difflineplus">+    AC_DEFINE_UNQUOTED(WINVER,0x$WINVER)</span>
<a href="#l14.611"></a><span id="l14.611" class="difflineplus">+    AC_DEFINE_UNQUOTED(_WIN32_WINNT,0x$WINVER)</span>
<a href="#l14.612"></a><span id="l14.612" class="difflineplus">+    # Require OS features provided by IE 5.0</span>
<a href="#l14.613"></a><span id="l14.613" class="difflineplus">+    AC_DEFINE_UNQUOTED(_WIN32_IE,0x0500)</span>
<a href="#l14.614"></a><span id="l14.614" class="difflineplus">+    ;;</span>
<a href="#l14.615"></a><span id="l14.615" class="difflineplus">+esac</span>
<a href="#l14.616"></a><span id="l14.616" class="difflineplus">+</span>
<a href="#l14.617"></a><span id="l14.617" class="difflineplus">+dnl Test breaks icc on OS/2 &amp;&amp; MSVC</span>
<a href="#l14.618"></a><span id="l14.618" class="difflineplus">+if test &quot;$CC&quot; != &quot;icc&quot; -a -z &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l14.619"></a><span id="l14.619" class="difflineplus">+    AC_PROG_CC_C_O</span>
<a href="#l14.620"></a><span id="l14.620" class="difflineplus">+    if grep &quot;NO_MINUS_C_MINUS_O 1&quot; ./confdefs.h &gt;/dev/null; then</span>
<a href="#l14.621"></a><span id="l14.621" class="difflineplus">+        USING_HCC=1</span>
<a href="#l14.622"></a><span id="l14.622" class="difflineplus">+        _OLDCC=$CC</span>
<a href="#l14.623"></a><span id="l14.623" class="difflineplus">+        _OLDCXX=$CXX</span>
<a href="#l14.624"></a><span id="l14.624" class="difflineplus">+        CC=&quot;${srcdir}/build/hcc '$CC'&quot;</span>
<a href="#l14.625"></a><span id="l14.625" class="difflineplus">+        CXX=&quot;${srcdir}/build/hcpp '$CXX'&quot;</span>
<a href="#l14.626"></a><span id="l14.626" class="difflineplus">+    fi</span>
<a href="#l14.627"></a><span id="l14.627" class="difflineplus">+fi</span>
<a href="#l14.628"></a><span id="l14.628" class="difflineplus">+</span>
<a href="#l14.629"></a><span id="l14.629" class="difflineplus">+AC_PROG_CPP</span>
<a href="#l14.630"></a><span id="l14.630" class="difflineplus">+AC_PROG_CXXCPP</span>
<a href="#l14.631"></a><span id="l14.631" class="difflineplus">+</span>
<a href="#l14.632"></a><span id="l14.632" class="difflineplus">+if test -n &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l14.633"></a><span id="l14.633" class="difflineplus">+    SKIP_PATH_CHECKS=1</span>
<a href="#l14.634"></a><span id="l14.634" class="difflineplus">+    SKIP_COMPILER_CHECKS=1</span>
<a href="#l14.635"></a><span id="l14.635" class="difflineplus">+    SKIP_LIBRARY_CHECKS=1</span>
<a href="#l14.636"></a><span id="l14.636" class="difflineplus">+fi</span>
<a href="#l14.637"></a><span id="l14.637" class="difflineplus">+</span>
<a href="#l14.638"></a><span id="l14.638" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.639"></a><span id="l14.639" class="difflineplus">+</span>
<a href="#l14.640"></a><span id="l14.640" class="difflineplus">+AC_SUBST(MIDL_FLAGS)</span>
<a href="#l14.641"></a><span id="l14.641" class="difflineplus">+AC_SUBST(_MSC_VER)</span>
<a href="#l14.642"></a><span id="l14.642" class="difflineplus">+</span>
<a href="#l14.643"></a><span id="l14.643" class="difflineplus">+AC_SUBST(GNU_AS)</span>
<a href="#l14.644"></a><span id="l14.644" class="difflineplus">+AC_SUBST(GNU_LD)</span>
<a href="#l14.645"></a><span id="l14.645" class="difflineplus">+AC_SUBST(GNU_CC)</span>
<a href="#l14.646"></a><span id="l14.646" class="difflineplus">+AC_SUBST(GNU_CXX)</span>
<a href="#l14.647"></a><span id="l14.647" class="difflineplus">+AC_SUBST(INTEL_CC)</span>
<a href="#l14.648"></a><span id="l14.648" class="difflineplus">+AC_SUBST(INTEL_CXX)</span>
<a href="#l14.649"></a><span id="l14.649" class="difflineplus">+</span>
<a href="#l14.650"></a><span id="l14.650" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.651"></a><span id="l14.651" class="difflineplus">+dnl Checks for programs.</span>
<a href="#l14.652"></a><span id="l14.652" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.653"></a><span id="l14.653" class="difflineplus">+AC_PROG_INSTALL</span>
<a href="#l14.654"></a><span id="l14.654" class="difflineplus">+AC_PROG_LN_S</span>
<a href="#l14.655"></a><span id="l14.655" class="difflineplus">+AC_PATH_PROGS(PERL, $PERL perl5 perl )</span>
<a href="#l14.656"></a><span id="l14.656" class="difflineplus">+if test -z &quot;$PERL&quot; || test &quot;$PERL&quot; = &quot;:&quot;; then</span>
<a href="#l14.657"></a><span id="l14.657" class="difflineplus">+    AC_MSG_ERROR([perl not found in \$PATH])</span>
<a href="#l14.658"></a><span id="l14.658" class="difflineplus">+fi</span>
<a href="#l14.659"></a><span id="l14.659" class="difflineplus">+</span>
<a href="#l14.660"></a><span id="l14.660" class="difflineplus">+if test -z &quot;$TINDERBOX_SKIP_PERL_VERSION_CHECK&quot;; then</span>
<a href="#l14.661"></a><span id="l14.661" class="difflineplus">+AC_MSG_CHECKING([for minimum required perl version &gt;= $PERL_VERSION])</span>
<a href="#l14.662"></a><span id="l14.662" class="difflineplus">+_perl_version=`PERL_VERSION=$PERL_VERSION $PERL -e 'print &quot;$]&quot;; if ($] &gt;= $ENV{PERL_VERSION}) { exit(0); } else { exit(1); }' 2&gt;&amp;5`</span>
<a href="#l14.663"></a><span id="l14.663" class="difflineplus">+_perl_res=$?</span>
<a href="#l14.664"></a><span id="l14.664" class="difflineplus">+AC_MSG_RESULT([$_perl_version])</span>
<a href="#l14.665"></a><span id="l14.665" class="difflineplus">+</span>
<a href="#l14.666"></a><span id="l14.666" class="difflineplus">+if test &quot;$_perl_res&quot; != 0; then</span>
<a href="#l14.667"></a><span id="l14.667" class="difflineplus">+    AC_MSG_ERROR([Perl $PERL_VERSION or higher is required.])</span>
<a href="#l14.668"></a><span id="l14.668" class="difflineplus">+fi</span>
<a href="#l14.669"></a><span id="l14.669" class="difflineplus">+fi</span>
<a href="#l14.670"></a><span id="l14.670" class="difflineplus">+</span>
<a href="#l14.671"></a><span id="l14.671" class="difflineplus">+AC_MSG_CHECKING([for full perl installation])</span>
<a href="#l14.672"></a><span id="l14.672" class="difflineplus">+_perl_archlib=`$PERL -e 'use Config; if ( -d $Config{archlib} ) { exit(0); } else { exit(1); }' 2&gt;&amp;5`</span>
<a href="#l14.673"></a><span id="l14.673" class="difflineplus">+_perl_res=$?</span>
<a href="#l14.674"></a><span id="l14.674" class="difflineplus">+if test &quot;$_perl_res&quot; != 0; then</span>
<a href="#l14.675"></a><span id="l14.675" class="difflineplus">+    AC_MSG_RESULT([no])</span>
<a href="#l14.676"></a><span id="l14.676" class="difflineplus">+    AC_MSG_ERROR([Cannot find Config.pm or \$Config{archlib}.  A full perl installation is required.])</span>
<a href="#l14.677"></a><span id="l14.677" class="difflineplus">+else</span>
<a href="#l14.678"></a><span id="l14.678" class="difflineplus">+    AC_MSG_RESULT([yes])    </span>
<a href="#l14.679"></a><span id="l14.679" class="difflineplus">+fi</span>
<a href="#l14.680"></a><span id="l14.680" class="difflineplus">+</span>
<a href="#l14.681"></a><span id="l14.681" class="difflineplus">+AC_PATH_PROGS(PYTHON, $PYTHON python)</span>
<a href="#l14.682"></a><span id="l14.682" class="difflineplus">+if test -z &quot;$PYTHON&quot;; then</span>
<a href="#l14.683"></a><span id="l14.683" class="difflineplus">+    AC_MSG_ERROR([python was not found in \$PATH])</span>
<a href="#l14.684"></a><span id="l14.684" class="difflineplus">+fi</span>
<a href="#l14.685"></a><span id="l14.685" class="difflineplus">+echo PYTHON=&quot;$PYTHON&quot;</span>
<a href="#l14.686"></a><span id="l14.686" class="difflineplus">+</span>
<a href="#l14.687"></a><span id="l14.687" class="difflineplus">+AC_PATH_PROGS(NSINSTALL_BIN, nsinstall )</span>
<a href="#l14.688"></a><span id="l14.688" class="difflineplus">+if test -z &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.689"></a><span id="l14.689" class="difflineplus">+if test -z &quot;$NSINSTALL_BIN&quot; || test &quot;$NSINSTALL_BIN&quot; = &quot;:&quot;; then</span>
<a href="#l14.690"></a><span id="l14.690" class="difflineplus">+    NSINSTALL_BIN='$(PYTHON) $(MOZILLA_SRCDIR)/config/nsinstall.py'</span>
<a href="#l14.691"></a><span id="l14.691" class="difflineplus">+fi</span>
<a href="#l14.692"></a><span id="l14.692" class="difflineplus">+fi</span>
<a href="#l14.693"></a><span id="l14.693" class="difflineplus">+AC_SUBST(NSINSTALL_BIN)</span>
<a href="#l14.694"></a><span id="l14.694" class="difflineplus">+</span>
<a href="#l14.695"></a><span id="l14.695" class="difflineplus">+AC_PATH_PROG(DOXYGEN, doxygen, :)</span>
<a href="#l14.696"></a><span id="l14.696" class="difflineplus">+AC_PATH_PROG(WHOAMI, whoami, :)</span>
<a href="#l14.697"></a><span id="l14.697" class="difflineplus">+AC_PATH_PROG(AUTOCONF, autoconf, :)</span>
<a href="#l14.698"></a><span id="l14.698" class="difflineplus">+AC_PATH_PROG(UNZIP, unzip, :)</span>
<a href="#l14.699"></a><span id="l14.699" class="difflineplus">+AC_PATH_PROGS(ZIP, zip)</span>
<a href="#l14.700"></a><span id="l14.700" class="difflineplus">+if test -z &quot;$ZIP&quot; || test &quot;$ZIP&quot; = &quot;:&quot;; then</span>
<a href="#l14.701"></a><span id="l14.701" class="difflineplus">+    AC_MSG_ERROR([zip not found in \$PATH])</span>
<a href="#l14.702"></a><span id="l14.702" class="difflineplus">+fi</span>
<a href="#l14.703"></a><span id="l14.703" class="difflineplus">+AC_PATH_PROG(SYSTEM_MAKEDEPEND, makedepend)</span>
<a href="#l14.704"></a><span id="l14.704" class="difflineplus">+AC_PATH_PROG(XARGS, xargs)</span>
<a href="#l14.705"></a><span id="l14.705" class="difflineplus">+if test -z &quot;$XARGS&quot; || test &quot;$XARGS&quot; = &quot;:&quot;; then</span>
<a href="#l14.706"></a><span id="l14.706" class="difflineplus">+    AC_MSG_ERROR([xargs not found in \$PATH .])</span>
<a href="#l14.707"></a><span id="l14.707" class="difflineplus">+fi</span>
<a href="#l14.708"></a><span id="l14.708" class="difflineplus">+</span>
<a href="#l14.709"></a><span id="l14.709" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.710"></a><span id="l14.710" class="difflineplus">+</span>
<a href="#l14.711"></a><span id="l14.711" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.712"></a><span id="l14.712" class="difflineplus">+dnl = Mac OS X toolchain support</span>
<a href="#l14.713"></a><span id="l14.713" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.714"></a><span id="l14.714" class="difflineplus">+</span>
<a href="#l14.715"></a><span id="l14.715" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.716"></a><span id="l14.716" class="difflineplus">+darwin*)</span>
<a href="#l14.717"></a><span id="l14.717" class="difflineplus">+    dnl Current known valid versions for GCC_VERSION are 2.95.2 3.1 3.3 4.0.</span>
<a href="#l14.718"></a><span id="l14.718" class="difflineplus">+    dnl 4.0 identifies itself as 4.0.x, so strip the decidecimal for</span>
<a href="#l14.719"></a><span id="l14.719" class="difflineplus">+    dnl the environment and includedir purposes (when using an SDK, below),</span>
<a href="#l14.720"></a><span id="l14.720" class="difflineplus">+    dnl but remember the full version number for the libdir (SDK).</span>
<a href="#l14.721"></a><span id="l14.721" class="difflineplus">+    changequote(,)</span>
<a href="#l14.722"></a><span id="l14.722" class="difflineplus">+    GCC_VERSION_FULL=`echo $CXX_VERSION | $PERL -pe 's/^.*gcc version ([^ ]*).*/$1/'`</span>
<a href="#l14.723"></a><span id="l14.723" class="difflineplus">+    GCC_VERSION=`echo $GCC_VERSION_FULL | $PERL -pe '(split(/\./))[0]&gt;=4&amp;&amp;s/(^\d*\.\d*).*/$1/;'`</span>
<a href="#l14.724"></a><span id="l14.724" class="difflineplus">+    changequote([,])</span>
<a href="#l14.725"></a><span id="l14.725" class="difflineplus">+    if test &quot;$GCC_VERSION_FULL&quot; = &quot;4.0.0&quot; ; then</span>
<a href="#l14.726"></a><span id="l14.726" class="difflineplus">+        dnl Bug 280479, but this keeps popping up in bug 292530 too because</span>
<a href="#l14.727"></a><span id="l14.727" class="difflineplus">+        dnl 4.0.0/4061 is the default compiler in Tiger.</span>
<a href="#l14.728"></a><span id="l14.728" class="difflineplus">+        changequote(,)</span>
<a href="#l14.729"></a><span id="l14.729" class="difflineplus">+        GCC_BUILD=`echo $CXX_VERSION | $PERL -pe 's/^.*build ([^ )]*).*/$1/'`</span>
<a href="#l14.730"></a><span id="l14.730" class="difflineplus">+        changequote([,])</span>
<a href="#l14.731"></a><span id="l14.731" class="difflineplus">+        if test &quot;$GCC_BUILD&quot; = &quot;4061&quot; ; then</span>
<a href="#l14.732"></a><span id="l14.732" class="difflineplus">+            AC_MSG_ERROR([You are attempting to use Apple gcc 4.0 build 4061.</span>
<a href="#l14.733"></a><span id="l14.733" class="difflineplus">+This compiler was supplied with Xcode 2.0, and contains bugs that prevent it</span>
<a href="#l14.734"></a><span id="l14.734" class="difflineplus">+from building Mozilla. Upgrade to Xcode 2.1 or later.])</span>
<a href="#l14.735"></a><span id="l14.735" class="difflineplus">+        fi</span>
<a href="#l14.736"></a><span id="l14.736" class="difflineplus">+    fi</span>
<a href="#l14.737"></a><span id="l14.737" class="difflineplus">+</span>
<a href="#l14.738"></a><span id="l14.738" class="difflineplus">+    dnl xcodebuild needs GCC_VERSION defined in the environment, since it</span>
<a href="#l14.739"></a><span id="l14.739" class="difflineplus">+    dnl doesn't respect the CC/CXX setting.  With GCC_VERSION set, it will use</span>
<a href="#l14.740"></a><span id="l14.740" class="difflineplus">+    dnl /usr/bin/g(cc|++)-$GCC_VERSION.</span>
<a href="#l14.741"></a><span id="l14.741" class="difflineplus">+    AC_PATH_PROGS(PBBUILD, pbbuild xcodebuild pbxbuild)</span>
<a href="#l14.742"></a><span id="l14.742" class="difflineplus">+</span>
<a href="#l14.743"></a><span id="l14.743" class="difflineplus">+    case &quot;$PBBUILD&quot; in</span>
<a href="#l14.744"></a><span id="l14.744" class="difflineplus">+      *xcodebuild*)</span>
<a href="#l14.745"></a><span id="l14.745" class="difflineplus">+        changequote(,)</span>
<a href="#l14.746"></a><span id="l14.746" class="difflineplus">+        XCODEBUILD_VERSION=`$PBBUILD -version 2&gt;/dev/null | xargs | sed -e 's/.*DevToolsCore-\([0-9]*\).*/\1/'`</span>
<a href="#l14.747"></a><span id="l14.747" class="difflineplus">+        changequote([,])</span>
<a href="#l14.748"></a><span id="l14.748" class="difflineplus">+        if test -n &quot;$XCODEBUILD_VERSION&quot; &amp;&amp; test &quot;$XCODEBUILD_VERSION&quot; -ge 620 ; then</span>
<a href="#l14.749"></a><span id="l14.749" class="difflineplus">+          HAS_XCODE_2_1=1;</span>
<a href="#l14.750"></a><span id="l14.750" class="difflineplus">+        fi</span>
<a href="#l14.751"></a><span id="l14.751" class="difflineplus">+      ;;</span>
<a href="#l14.752"></a><span id="l14.752" class="difflineplus">+    esac</span>
<a href="#l14.753"></a><span id="l14.753" class="difflineplus">+</span>
<a href="#l14.754"></a><span id="l14.754" class="difflineplus">+    dnl sdp was formerly in /Developer/Tools.  As of Mac OS X 10.4 (Darwin 8),</span>
<a href="#l14.755"></a><span id="l14.755" class="difflineplus">+    dnl it has moved into /usr/bin.</span>
<a href="#l14.756"></a><span id="l14.756" class="difflineplus">+    AC_PATH_PROG(SDP, sdp, :, [$PATH:/usr/bin:/Developer/Tools])</span>
<a href="#l14.757"></a><span id="l14.757" class="difflineplus">+    ;;</span>
<a href="#l14.758"></a><span id="l14.758" class="difflineplus">+esac</span>
<a href="#l14.759"></a><span id="l14.759" class="difflineplus">+</span>
<a href="#l14.760"></a><span id="l14.760" class="difflineplus">+AC_SUBST(GCC_VERSION)</span>
<a href="#l14.761"></a><span id="l14.761" class="difflineplus">+AC_SUBST(XCODEBUILD_VERSION)</span>
<a href="#l14.762"></a><span id="l14.762" class="difflineplus">+AC_SUBST(HAS_XCODE_2_1)</span>
<a href="#l14.763"></a><span id="l14.763" class="difflineplus">+</span>
<a href="#l14.764"></a><span id="l14.764" class="difflineplus">+dnl The universal machinery sets UNIVERSAL_BINARY to inform packager.mk</span>
<a href="#l14.765"></a><span id="l14.765" class="difflineplus">+dnl that a universal binary is being produced.</span>
<a href="#l14.766"></a><span id="l14.766" class="difflineplus">+AC_SUBST(UNIVERSAL_BINARY)</span>
<a href="#l14.767"></a><span id="l14.767" class="difflineplus">+</span>
<a href="#l14.768"></a><span id="l14.768" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.769"></a><span id="l14.769" class="difflineplus">+dnl Check for MacOS deployment target version</span>
<a href="#l14.770"></a><span id="l14.770" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.771"></a><span id="l14.771" class="difflineplus">+</span>
<a href="#l14.772"></a><span id="l14.772" class="difflineplus">+MOZ_ARG_ENABLE_STRING(macos-target,</span>
<a href="#l14.773"></a><span id="l14.773" class="difflineplus">+                      [  --enable-macos-target=VER (default=10.4)</span>
<a href="#l14.774"></a><span id="l14.774" class="difflineplus">+                          Set the minimum MacOS version needed at runtime],</span>
<a href="#l14.775"></a><span id="l14.775" class="difflineplus">+                      [_MACOSX_DEPLOYMENT_TARGET=$enableval])</span>
<a href="#l14.776"></a><span id="l14.776" class="difflineplus">+</span>
<a href="#l14.777"></a><span id="l14.777" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.778"></a><span id="l14.778" class="difflineplus">+*-darwin*)</span>
<a href="#l14.779"></a><span id="l14.779" class="difflineplus">+    if test -n &quot;$_MACOSX_DEPLOYMENT_TARGET&quot; ; then</span>
<a href="#l14.780"></a><span id="l14.780" class="difflineplus">+        dnl Use the specified value</span>
<a href="#l14.781"></a><span id="l14.781" class="difflineplus">+        export MACOSX_DEPLOYMENT_TARGET=$_MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l14.782"></a><span id="l14.782" class="difflineplus">+        AC_DEFINE_UNQUOTED(__ENVIRONMENT_MAC_OS_X_VERION_MIN_REQUIRED__,$_MACOSX_DEPLOYMENT_TARGET)</span>
<a href="#l14.783"></a><span id="l14.783" class="difflineplus">+    elif test -z &quot;$MACOSX_DEPLOYMENT_TARGET&quot; ; then</span>
<a href="#l14.784"></a><span id="l14.784" class="difflineplus">+        dnl No value specified on the command line or in the environment,</span>
<a href="#l14.785"></a><span id="l14.785" class="difflineplus">+        dnl use the lesser of the application's minimum or the architecture's</span>
<a href="#l14.786"></a><span id="l14.786" class="difflineplus">+        dnl minimum.</span>
<a href="#l14.787"></a><span id="l14.787" class="difflineplus">+        export MACOSX_DEPLOYMENT_TARGET=10.4</span>
<a href="#l14.788"></a><span id="l14.788" class="difflineplus">+    fi</span>
<a href="#l14.789"></a><span id="l14.789" class="difflineplus">+    ;;</span>
<a href="#l14.790"></a><span id="l14.790" class="difflineplus">+esac</span>
<a href="#l14.791"></a><span id="l14.791" class="difflineplus">+</span>
<a href="#l14.792"></a><span id="l14.792" class="difflineplus">+AC_SUBST(MACOSX_DEPLOYMENT_TARGET)</span>
<a href="#l14.793"></a><span id="l14.793" class="difflineplus">+</span>
<a href="#l14.794"></a><span id="l14.794" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.795"></a><span id="l14.795" class="difflineplus">+dnl = Mac OS X SDK support</span>
<a href="#l14.796"></a><span id="l14.796" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.797"></a><span id="l14.797" class="difflineplus">+MACOS_SDK_DIR=</span>
<a href="#l14.798"></a><span id="l14.798" class="difflineplus">+NEXT_ROOT=</span>
<a href="#l14.799"></a><span id="l14.799" class="difflineplus">+MOZ_ARG_WITH_STRING(macos-sdk,</span>
<a href="#l14.800"></a><span id="l14.800" class="difflineplus">+[  --with-macos-sdk=dir   Location of platform SDK to use (Mac OS X only)],</span>
<a href="#l14.801"></a><span id="l14.801" class="difflineplus">+    MACOS_SDK_DIR=$withval)</span>
<a href="#l14.802"></a><span id="l14.802" class="difflineplus">+</span>
<a href="#l14.803"></a><span id="l14.803" class="difflineplus">+dnl MACOS_SDK_DIR will be set to the SDK location whenever one is in use.</span>
<a href="#l14.804"></a><span id="l14.804" class="difflineplus">+dnl NEXT_ROOT will be set and exported only if it's needed.</span>
<a href="#l14.805"></a><span id="l14.805" class="difflineplus">+AC_SUBST(MACOS_SDK_DIR)</span>
<a href="#l14.806"></a><span id="l14.806" class="difflineplus">+AC_SUBST(NEXT_ROOT)</span>
<a href="#l14.807"></a><span id="l14.807" class="difflineplus">+</span>
<a href="#l14.808"></a><span id="l14.808" class="difflineplus">+if test &quot;$MACOS_SDK_DIR&quot;; then</span>
<a href="#l14.809"></a><span id="l14.809" class="difflineplus">+  dnl Sync this section with the ones in NSPR and NSS.</span>
<a href="#l14.810"></a><span id="l14.810" class="difflineplus">+  dnl Changes to the cross environment here need to be accounted for in</span>
<a href="#l14.811"></a><span id="l14.811" class="difflineplus">+  dnl the libIDL checks (below) and xpidl build.</span>
<a href="#l14.812"></a><span id="l14.812" class="difflineplus">+</span>
<a href="#l14.813"></a><span id="l14.813" class="difflineplus">+  if test ! -d &quot;$MACOS_SDK_DIR&quot;; then</span>
<a href="#l14.814"></a><span id="l14.814" class="difflineplus">+    AC_MSG_ERROR([SDK not found.  When using --with-macos-sdk, you must</span>
<a href="#l14.815"></a><span id="l14.815" class="difflineplus">+specify a valid SDK.  SDKs are installed when the optional cross-development</span>
<a href="#l14.816"></a><span id="l14.816" class="difflineplus">+tools are selected during the Xcode/Developer Tools installation.])</span>
<a href="#l14.817"></a><span id="l14.817" class="difflineplus">+  fi</span>
<a href="#l14.818"></a><span id="l14.818" class="difflineplus">+</span>
<a href="#l14.819"></a><span id="l14.819" class="difflineplus">+  GCC_VERSION_MAJOR=`echo $GCC_VERSION_FULL | $PERL -pe 's/(^\d*).*/$1/;'`</span>
<a href="#l14.820"></a><span id="l14.820" class="difflineplus">+  if test &quot;$GCC_VERSION_MAJOR&quot; -lt &quot;4&quot; ; then</span>
<a href="#l14.821"></a><span id="l14.821" class="difflineplus">+    SDK_C_INCLUDE=&quot;-isystem ${MACOS_SDK_DIR}/usr/include/gcc/darwin/${GCC_VERSION} -isystem ${MACOS_SDK_DIR}/usr/include -F${MACOS_SDK_DIR}/System/Library/Frameworks&quot;</span>
<a href="#l14.822"></a><span id="l14.822" class="difflineplus">+    if test -d &quot;${MACOS_SDK_DIR}/Library/Frameworks&quot; ; then</span>
<a href="#l14.823"></a><span id="l14.823" class="difflineplus">+      SDK_C_INCLUDE=&quot;$SDK_C_INCLUDE -F${MACOS_SDK_DIR}/Library/Frameworks&quot;</span>
<a href="#l14.824"></a><span id="l14.824" class="difflineplus">+    fi</span>
<a href="#l14.825"></a><span id="l14.825" class="difflineplus">+    SDK_CXX_INCLUDE=&quot;-I${MACOS_SDK_DIR}/usr/include/gcc/darwin/${GCC_VERSION}/c++ -I${MACOS_SDK_DIR}/usr/include/gcc/darwin/${GCC_VERSION}/c++/ppc-darwin -I${MACOS_SDK_DIR}/usr/include/gcc/darwin/${GCC_VERSION}/c++/backward&quot;</span>
<a href="#l14.826"></a><span id="l14.826" class="difflineplus">+</span>
<a href="#l14.827"></a><span id="l14.827" class="difflineplus">+    CFLAGS=&quot;$CFLAGS -nostdinc ${SDK_C_INCLUDE}&quot;</span>
<a href="#l14.828"></a><span id="l14.828" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -nostdinc -nostdinc++ ${SDK_CXX_INCLUDE} ${SDK_C_INCLUDE}&quot;</span>
<a href="#l14.829"></a><span id="l14.829" class="difflineplus">+</span>
<a href="#l14.830"></a><span id="l14.830" class="difflineplus">+    dnl CPP/CXXCPP needs to be set for AC_CHECK_HEADER.</span>
<a href="#l14.831"></a><span id="l14.831" class="difflineplus">+    CPP=&quot;$CPP -nostdinc ${SDK_C_INCLUDE}&quot;</span>
<a href="#l14.832"></a><span id="l14.832" class="difflineplus">+    CXXCPP=&quot;$CXXCPP -nostdinc -nostdinc++ ${SDK_CXX_INCLUDE} ${SDK_C_INCLUDE}&quot;</span>
<a href="#l14.833"></a><span id="l14.833" class="difflineplus">+</span>
<a href="#l14.834"></a><span id="l14.834" class="difflineplus">+    dnl ld support for -syslibroot is compiler-agnostic, but only available</span>
<a href="#l14.835"></a><span id="l14.835" class="difflineplus">+    dnl on Tiger.  Although it's possible to switch on the build host's</span>
<a href="#l14.836"></a><span id="l14.836" class="difflineplus">+    dnl OS release to use ld -syslibroot when available, ld -syslibroot will</span>
<a href="#l14.837"></a><span id="l14.837" class="difflineplus">+    dnl cause warnings as long as NEXT_ROOT is set.  NEXT_ROOT should be</span>
<a href="#l14.838"></a><span id="l14.838" class="difflineplus">+    dnl set because both the compiler and linker use it.</span>
<a href="#l14.839"></a><span id="l14.839" class="difflineplus">+    LIBS=&quot;-L${MACOS_SDK_DIR}/usr/lib/gcc/darwin -L${MACOS_SDK_DIR}/usr/lib/gcc/darwin/${GCC_VERSION_FULL} -L${MACOS_SDK_DIR}/usr/lib $LIBS&quot;</span>
<a href="#l14.840"></a><span id="l14.840" class="difflineplus">+    export NEXT_ROOT=$MACOS_SDK_DIR</span>
<a href="#l14.841"></a><span id="l14.841" class="difflineplus">+</span>
<a href="#l14.842"></a><span id="l14.842" class="difflineplus">+    if test -n &quot;$CROSS_COMPILE&quot; ; then</span>
<a href="#l14.843"></a><span id="l14.843" class="difflineplus">+      dnl NEXT_ROOT will be in the environment, but it shouldn't be set for</span>
<a href="#l14.844"></a><span id="l14.844" class="difflineplus">+      dnl the build host.  HOST_CXX is presently unused.</span>
<a href="#l14.845"></a><span id="l14.845" class="difflineplus">+      HOST_CC=&quot;NEXT_ROOT= $HOST_CC&quot;</span>
<a href="#l14.846"></a><span id="l14.846" class="difflineplus">+      HOST_CXX=&quot;NEXT_ROOT= $HOST_CXX&quot;</span>
<a href="#l14.847"></a><span id="l14.847" class="difflineplus">+    fi</span>
<a href="#l14.848"></a><span id="l14.848" class="difflineplus">+  else</span>
<a href="#l14.849"></a><span id="l14.849" class="difflineplus">+    dnl gcc &gt;= 4.0 uses different paths than above, but knows how to find</span>
<a href="#l14.850"></a><span id="l14.850" class="difflineplus">+    dnl them itself.</span>
<a href="#l14.851"></a><span id="l14.851" class="difflineplus">+    CFLAGS=&quot;$CFLAGS -isysroot ${MACOS_SDK_DIR}&quot;</span>
<a href="#l14.852"></a><span id="l14.852" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -isysroot ${MACOS_SDK_DIR}&quot;</span>
<a href="#l14.853"></a><span id="l14.853" class="difflineplus">+</span>
<a href="#l14.854"></a><span id="l14.854" class="difflineplus">+    dnl CPP/CXXCPP needs to be set for AC_CHECK_HEADER.</span>
<a href="#l14.855"></a><span id="l14.855" class="difflineplus">+    CPP=&quot;$CPP -isysroot ${MACOS_SDK_DIR}&quot;</span>
<a href="#l14.856"></a><span id="l14.856" class="difflineplus">+    CXXCPP=&quot;$CXXCPP -isysroot ${MACOS_SDK_DIR}&quot;</span>
<a href="#l14.857"></a><span id="l14.857" class="difflineplus">+</span>
<a href="#l14.858"></a><span id="l14.858" class="difflineplus">+    if test &quot;$GCC_VERSION_FULL&quot; = &quot;4.0.0&quot; ; then</span>
<a href="#l14.859"></a><span id="l14.859" class="difflineplus">+      dnl If gcc &gt;= 4.0, we're guaranteed to be on Tiger, which has an ld</span>
<a href="#l14.860"></a><span id="l14.860" class="difflineplus">+      dnl that supports -syslibroot.  Don't set NEXT_ROOT because it will</span>
<a href="#l14.861"></a><span id="l14.861" class="difflineplus">+      dnl be ignored and cause warnings when -syslibroot is specified.</span>
<a href="#l14.862"></a><span id="l14.862" class="difflineplus">+      dnl gcc 4.0.1 will pass -syslibroot to ld automatically based on</span>
<a href="#l14.863"></a><span id="l14.863" class="difflineplus">+      dnl the -isysroot it receives, so this is only needed with 4.0.0.</span>
<a href="#l14.864"></a><span id="l14.864" class="difflineplus">+      LDFLAGS=&quot;$LDFLAGS -Wl,-syslibroot,${MACOS_SDK_DIR}&quot;</span>
<a href="#l14.865"></a><span id="l14.865" class="difflineplus">+    fi</span>
<a href="#l14.866"></a><span id="l14.866" class="difflineplus">+  fi</span>
<a href="#l14.867"></a><span id="l14.867" class="difflineplus">+</span>
<a href="#l14.868"></a><span id="l14.868" class="difflineplus">+  AC_LANG_SAVE</span>
<a href="#l14.869"></a><span id="l14.869" class="difflineplus">+  AC_MSG_CHECKING([for valid compiler/Mac OS X SDK combination])</span>
<a href="#l14.870"></a><span id="l14.870" class="difflineplus">+  AC_LANG_CPLUSPLUS</span>
<a href="#l14.871"></a><span id="l14.871" class="difflineplus">+  AC_TRY_COMPILE([#include &lt;new&gt;</span>
<a href="#l14.872"></a><span id="l14.872" class="difflineplus">+                 int main() { return 0; }],</span>
<a href="#l14.873"></a><span id="l14.873" class="difflineplus">+   result=yes,</span>
<a href="#l14.874"></a><span id="l14.874" class="difflineplus">+   result=no)</span>
<a href="#l14.875"></a><span id="l14.875" class="difflineplus">+  AC_LANG_RESTORE</span>
<a href="#l14.876"></a><span id="l14.876" class="difflineplus">+  AC_MSG_RESULT($result)</span>
<a href="#l14.877"></a><span id="l14.877" class="difflineplus">+</span>
<a href="#l14.878"></a><span id="l14.878" class="difflineplus">+  if test &quot;$result&quot; = &quot;no&quot; ; then</span>
<a href="#l14.879"></a><span id="l14.879" class="difflineplus">+    AC_MSG_ERROR([The selected compiler and Mac OS X SDK are incompatible.])</span>
<a href="#l14.880"></a><span id="l14.880" class="difflineplus">+  fi</span>
<a href="#l14.881"></a><span id="l14.881" class="difflineplus">+fi</span>
<a href="#l14.882"></a><span id="l14.882" class="difflineplus">+</span>
<a href="#l14.883"></a><span id="l14.883" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.884"></a><span id="l14.884" class="difflineplus">+</span>
<a href="#l14.885"></a><span id="l14.885" class="difflineplus">+dnl Be sure the make we use is GNU make.</span>
<a href="#l14.886"></a><span id="l14.886" class="difflineplus">+dnl on win32, gmake.exe is the generally the wrong version</span>
<a href="#l14.887"></a><span id="l14.887" class="difflineplus">+case &quot;$host_os&quot; in</span>
<a href="#l14.888"></a><span id="l14.888" class="difflineplus">+cygwin*|mingw*|mks*|msvc*)</span>
<a href="#l14.889"></a><span id="l14.889" class="difflineplus">+    AC_PATH_PROGS(MAKE, $MAKE make gmake, :)</span>
<a href="#l14.890"></a><span id="l14.890" class="difflineplus">+    ;;</span>
<a href="#l14.891"></a><span id="l14.891" class="difflineplus">+*)</span>
<a href="#l14.892"></a><span id="l14.892" class="difflineplus">+    AC_PATH_PROGS(MAKE, $MAKE gmake make, :)</span>
<a href="#l14.893"></a><span id="l14.893" class="difflineplus">+    ;;</span>
<a href="#l14.894"></a><span id="l14.894" class="difflineplus">+esac</span>
<a href="#l14.895"></a><span id="l14.895" class="difflineplus">+_make_try=`$MAKE --version 2&gt;/dev/null | grep GNU`</span>
<a href="#l14.896"></a><span id="l14.896" class="difflineplus">+if test ! &quot;$_make_try&quot;</span>
<a href="#l14.897"></a><span id="l14.897" class="difflineplus">+then</span>
<a href="#l14.898"></a><span id="l14.898" class="difflineplus">+	echo</span>
<a href="#l14.899"></a><span id="l14.899" class="difflineplus">+	echo &quot;*** $MAKE is not GNU Make.  You will not be able to build Mozilla without GNU Make.&quot;</span>
<a href="#l14.900"></a><span id="l14.900" class="difflineplus">+	echo</span>
<a href="#l14.901"></a><span id="l14.901" class="difflineplus">+	exit 1</span>
<a href="#l14.902"></a><span id="l14.902" class="difflineplus">+fi</span>
<a href="#l14.903"></a><span id="l14.903" class="difflineplus">+dnl Now exit if version if &lt; MAKE_VERSION</span>
<a href="#l14.904"></a><span id="l14.904" class="difflineplus">+rm -f dummy.mk</span>
<a href="#l14.905"></a><span id="l14.905" class="difflineplus">+echo 'all: ; @echo $(MAKE_VERSION)' &gt; dummy.mk</span>
<a href="#l14.906"></a><span id="l14.906" class="difflineplus">+_make_vers=`$MAKE --no-print-directory -f dummy.mk all 2&gt;/dev/null`</span>
<a href="#l14.907"></a><span id="l14.907" class="difflineplus">+rm -f dummy.mk</span>
<a href="#l14.908"></a><span id="l14.908" class="difflineplus">+_MAKE_MAJOR_VERSION=`echo $_make_vers | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.909"></a><span id="l14.909" class="difflineplus">+_MAKE_MINOR_VERSION=`echo $_make_vers | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.910"></a><span id="l14.910" class="difflineplus">+MAKE_MAJOR_VERSION=`echo $MAKE_VERSION | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.911"></a><span id="l14.911" class="difflineplus">+MAKE_MINOR_VERSION=`echo $MAKE_VERSION | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.912"></a><span id="l14.912" class="difflineplus">+if test &quot;$_MAKE_MAJOR_VERSION&quot; -lt &quot;$MAKE_MAJOR_VERSION&quot; || \</span>
<a href="#l14.913"></a><span id="l14.913" class="difflineplus">+   test &quot;$_MAKE_MAJOR_VERSION&quot; = &quot;$MAKE_MAJOR_VERSION&quot; -a \</span>
<a href="#l14.914"></a><span id="l14.914" class="difflineplus">+        &quot;$_MAKE_MINOR_VERSION&quot; -lt &quot;$MAKE_MINOR_VERSION&quot;; then</span>
<a href="#l14.915"></a><span id="l14.915" class="difflineplus">+   AC_MSG_ERROR([GNU Make $MAKE_VERSION or higher is required to build Mozilla.])</span>
<a href="#l14.916"></a><span id="l14.916" class="difflineplus">+fi</span>
<a href="#l14.917"></a><span id="l14.917" class="difflineplus">+AC_SUBST(MAKE)</span>
<a href="#l14.918"></a><span id="l14.918" class="difflineplus">+</span>
<a href="#l14.919"></a><span id="l14.919" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.920"></a><span id="l14.920" class="difflineplus">+</span>
<a href="#l14.921"></a><span id="l14.921" class="difflineplus">+AC_PATH_XTRA</span>
<a href="#l14.922"></a><span id="l14.922" class="difflineplus">+</span>
<a href="#l14.923"></a><span id="l14.923" class="difflineplus">+dnl Check in X11 include directory too.</span>
<a href="#l14.924"></a><span id="l14.924" class="difflineplus">+if test &quot;$no_x&quot; != &quot;yes&quot;; then</span>
<a href="#l14.925"></a><span id="l14.925" class="difflineplus">+    CPPFLAGS=&quot;$CPPFLAGS $X_CFLAGS&quot;</span>
<a href="#l14.926"></a><span id="l14.926" class="difflineplus">+fi</span>
<a href="#l14.927"></a><span id="l14.927" class="difflineplus">+</span>
<a href="#l14.928"></a><span id="l14.928" class="difflineplus">+XCFLAGS=&quot;$X_CFLAGS&quot;</span>
<a href="#l14.929"></a><span id="l14.929" class="difflineplus">+</span>
<a href="#l14.930"></a><span id="l14.930" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.931"></a><span id="l14.931" class="difflineplus">+</span>
<a href="#l14.932"></a><span id="l14.932" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.933"></a><span id="l14.933" class="difflineplus">+dnl set the defaults first</span>
<a href="#l14.934"></a><span id="l14.934" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.935"></a><span id="l14.935" class="difflineplus">+AS_BIN=$AS</span>
<a href="#l14.936"></a><span id="l14.936" class="difflineplus">+AR_FLAGS='cr $@'</span>
<a href="#l14.937"></a><span id="l14.937" class="difflineplus">+AR_LIST='$(AR) t'</span>
<a href="#l14.938"></a><span id="l14.938" class="difflineplus">+AR_EXTRACT='$(AR) x'</span>
<a href="#l14.939"></a><span id="l14.939" class="difflineplus">+AR_DELETE='$(AR) d'</span>
<a href="#l14.940"></a><span id="l14.940" class="difflineplus">+AS='$(CC)'</span>
<a href="#l14.941"></a><span id="l14.941" class="difflineplus">+AS_DASH_C_FLAG='-c'</span>
<a href="#l14.942"></a><span id="l14.942" class="difflineplus">+DLL_PREFIX=lib</span>
<a href="#l14.943"></a><span id="l14.943" class="difflineplus">+LIB_PREFIX=lib</span>
<a href="#l14.944"></a><span id="l14.944" class="difflineplus">+DLL_SUFFIX=.so</span>
<a href="#l14.945"></a><span id="l14.945" class="difflineplus">+OBJ_SUFFIX=o</span>
<a href="#l14.946"></a><span id="l14.946" class="difflineplus">+LIB_SUFFIX=a</span>
<a href="#l14.947"></a><span id="l14.947" class="difflineplus">+ASM_SUFFIX=s</span>
<a href="#l14.948"></a><span id="l14.948" class="difflineplus">+IMPORT_LIB_SUFFIX=</span>
<a href="#l14.949"></a><span id="l14.949" class="difflineplus">+TARGET_MD_ARCH=unix</span>
<a href="#l14.950"></a><span id="l14.950" class="difflineplus">+DIRENT_INO=d_ino</span>
<a href="#l14.951"></a><span id="l14.951" class="difflineplus">+CYGWIN_WRAPPER=</span>
<a href="#l14.952"></a><span id="l14.952" class="difflineplus">+WIN_TOP_SRC=</span>
<a href="#l14.953"></a><span id="l14.953" class="difflineplus">+MOZ_USER_DIR=&quot;.mozilla&quot;</span>
<a href="#l14.954"></a><span id="l14.954" class="difflineplus">+HOST_AR='$(AR)'</span>
<a href="#l14.955"></a><span id="l14.955" class="difflineplus">+HOST_AR_FLAGS='$(AR_FLAGS)'</span>
<a href="#l14.956"></a><span id="l14.956" class="difflineplus">+</span>
<a href="#l14.957"></a><span id="l14.957" class="difflineplus">+MOZ_JPEG_CFLAGS=</span>
<a href="#l14.958"></a><span id="l14.958" class="difflineplus">+MOZ_JPEG_LIBS='$(call EXPAND_LIBNAME_PATH,mozjpeg,$(DEPTH)/mozilla/jpeg)'</span>
<a href="#l14.959"></a><span id="l14.959" class="difflineplus">+MOZ_ZLIB_CFLAGS=</span>
<a href="#l14.960"></a><span id="l14.960" class="difflineplus">+MOZ_ZLIB_LIBS='$(call EXPAND_LIBNAME_PATH,mozz,$(DEPTH)/mozilla/modules/zlib/src)'</span>
<a href="#l14.961"></a><span id="l14.961" class="difflineplus">+MOZ_BZ2_CFLAGS=</span>
<a href="#l14.962"></a><span id="l14.962" class="difflineplus">+MOZ_BZ2_LIBS='$(call EXPAND_LIBNAME_PATH,bz2,$(DEPTH)/mozilla/modules/libbz2/src)'</span>
<a href="#l14.963"></a><span id="l14.963" class="difflineplus">+MOZ_PNG_CFLAGS=</span>
<a href="#l14.964"></a><span id="l14.964" class="difflineplus">+MOZ_PNG_LIBS='$(call EXPAND_LIBNAME_PATH,mozpng,$(DEPTH)/mozilla/modules/libimg/png)'</span>
<a href="#l14.965"></a><span id="l14.965" class="difflineplus">+</span>
<a href="#l14.966"></a><span id="l14.966" class="difflineplus">+MOZ_JS_LIBS='-L$(LIBXUL_DIST)/bin -lmozjs'</span>
<a href="#l14.967"></a><span id="l14.967" class="difflineplus">+DYNAMIC_XPCOM_LIBS='-L$(LIBXUL_DIST)/bin -lxpcom -lxpcom_core'</span>
<a href="#l14.968"></a><span id="l14.968" class="difflineplus">+MOZ_FIX_LINK_PATHS='-Wl,-rpath-link,$(LIBXUL_DIST)/bin'</span>
<a href="#l14.969"></a><span id="l14.969" class="difflineplus">+XPCOM_FROZEN_LDOPTS='-L$(LIBXUL_DIST)/bin -lxpcom'</span>
<a href="#l14.970"></a><span id="l14.970" class="difflineplus">+LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) -lxul'</span>
<a href="#l14.971"></a><span id="l14.971" class="difflineplus">+XPCOM_GLUE_LDOPTS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue_s.$(LIB_SUFFIX) $(XPCOM_FROZEN_LDOPTS)'</span>
<a href="#l14.972"></a><span id="l14.972" class="difflineplus">+XPCOM_STANDALONE_GLUE_LDOPTS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)xpcomglue.$(LIB_SUFFIX)'</span>
<a href="#l14.973"></a><span id="l14.973" class="difflineplus">+</span>
<a href="#l14.974"></a><span id="l14.974" class="difflineplus">+MOZ_COMPONENT_NSPR_LIBS='-L$(LIBXUL_DIST)/bin $(NSPR_LIBS)'</span>
<a href="#l14.975"></a><span id="l14.975" class="difflineplus">+MOZ_XPCOM_OBSOLETE_LIBS='-L$(LIBXUL_DIST)/lib -lxpcom_compat'</span>
<a href="#l14.976"></a><span id="l14.976" class="difflineplus">+</span>
<a href="#l14.977"></a><span id="l14.977" class="difflineplus">+USE_DEPENDENT_LIBS=1</span>
<a href="#l14.978"></a><span id="l14.978" class="difflineplus">+</span>
<a href="#l14.979"></a><span id="l14.979" class="difflineplus">+_PLATFORM_DEFAULT_TOOLKIT=cairo-gtk2</span>
<a href="#l14.980"></a><span id="l14.980" class="difflineplus">+MOZ_GFX_TOOLKIT='$(MOZ_WIDGET_TOOLKIT)'</span>
<a href="#l14.981"></a><span id="l14.981" class="difflineplus">+</span>
<a href="#l14.982"></a><span id="l14.982" class="difflineplus">+MOZ_ENABLE_POSTSCRIPT=1 </span>
<a href="#l14.983"></a><span id="l14.983" class="difflineplus">+</span>
<a href="#l14.984"></a><span id="l14.984" class="difflineplus">+if test -n &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l14.985"></a><span id="l14.985" class="difflineplus">+    OS_TARGET=&quot;${target_os}&quot;</span>
<a href="#l14.986"></a><span id="l14.986" class="difflineplus">+    OS_ARCH=`echo $target_os | sed -e 's|/|_|g'`</span>
<a href="#l14.987"></a><span id="l14.987" class="difflineplus">+    OS_RELEASE=</span>
<a href="#l14.988"></a><span id="l14.988" class="difflineplus">+    case &quot;${target_os}&quot; in</span>
<a href="#l14.989"></a><span id="l14.989" class="difflineplus">+        linux*)       OS_ARCH=Linux OS_TARGET=Linux ;;</span>
<a href="#l14.990"></a><span id="l14.990" class="difflineplus">+        kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD OS_TARGET=GNU_kFreeBSD ;;</span>
<a href="#l14.991"></a><span id="l14.991" class="difflineplus">+        solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;</span>
<a href="#l14.992"></a><span id="l14.992" class="difflineplus">+        mingw*)       OS_ARCH=WINNT ;;</span>
<a href="#l14.993"></a><span id="l14.993" class="difflineplus">+        wince*)       OS_ARCH=WINCE ;;</span>
<a href="#l14.994"></a><span id="l14.994" class="difflineplus">+        darwin*)      OS_ARCH=Darwin OS_TARGET=Darwin ;;</span>
<a href="#l14.995"></a><span id="l14.995" class="difflineplus">+    esac</span>
<a href="#l14.996"></a><span id="l14.996" class="difflineplus">+else</span>
<a href="#l14.997"></a><span id="l14.997" class="difflineplus">+    OS_TARGET=`uname -s`</span>
<a href="#l14.998"></a><span id="l14.998" class="difflineplus">+    OS_ARCH=`uname -s | sed -e 's|/|_|g'`</span>
<a href="#l14.999"></a><span id="l14.999" class="difflineplus">+    OS_RELEASE=`uname -r`</span>
<a href="#l14.1000"></a><span id="l14.1000" class="difflineplus">+fi</span>
<a href="#l14.1001"></a><span id="l14.1001" class="difflineplus">+</span>
<a href="#l14.1002"></a><span id="l14.1002" class="difflineplus">+# Before this used `uname -m` when not cross compiling</span>
<a href="#l14.1003"></a><span id="l14.1003" class="difflineplus">+# but that breaks when you have a 64 bit kernel with a 32 bit userland.</span>
<a href="#l14.1004"></a><span id="l14.1004" class="difflineplus">+OS_TEST=&quot;${target_cpu}&quot;</span>
<a href="#l14.1005"></a><span id="l14.1005" class="difflineplus">+</span>
<a href="#l14.1006"></a><span id="l14.1006" class="difflineplus">+_COMPILER_PREFIX=</span>
<a href="#l14.1007"></a><span id="l14.1007" class="difflineplus">+</span>
<a href="#l14.1008"></a><span id="l14.1008" class="difflineplus">+HOST_OS_ARCH=`echo $host_os | sed -e 's|/|_|g'`</span>
<a href="#l14.1009"></a><span id="l14.1009" class="difflineplus">+</span>
<a href="#l14.1010"></a><span id="l14.1010" class="difflineplus">+#######################################################################</span>
<a href="#l14.1011"></a><span id="l14.1011" class="difflineplus">+# Master &quot;Core Components&quot; macros for getting the OS target           #</span>
<a href="#l14.1012"></a><span id="l14.1012" class="difflineplus">+#######################################################################</span>
<a href="#l14.1013"></a><span id="l14.1013" class="difflineplus">+</span>
<a href="#l14.1014"></a><span id="l14.1014" class="difflineplus">+#</span>
<a href="#l14.1015"></a><span id="l14.1015" class="difflineplus">+# Note: OS_TARGET should be specified on the command line for gmake.</span>
<a href="#l14.1016"></a><span id="l14.1016" class="difflineplus">+# When OS_TARGET=WIN95 is specified, then a Windows 95 target is built.</span>
<a href="#l14.1017"></a><span id="l14.1017" class="difflineplus">+# The difference between the Win95 target and the WinNT target is that</span>
<a href="#l14.1018"></a><span id="l14.1018" class="difflineplus">+# the WinNT target uses Windows NT specific features not available</span>
<a href="#l14.1019"></a><span id="l14.1019" class="difflineplus">+# in Windows 95. The Win95 target will run on Windows NT, but (supposedly)</span>
<a href="#l14.1020"></a><span id="l14.1020" class="difflineplus">+# at lesser performance (the Win95 target uses threads; the WinNT target</span>
<a href="#l14.1021"></a><span id="l14.1021" class="difflineplus">+# uses fibers).</span>
<a href="#l14.1022"></a><span id="l14.1022" class="difflineplus">+#</span>
<a href="#l14.1023"></a><span id="l14.1023" class="difflineplus">+# When OS_TARGET=WIN16 is specified, then a Windows 3.11 (16bit) target</span>
<a href="#l14.1024"></a><span id="l14.1024" class="difflineplus">+# is built. See: win16_3.11.mk for lots more about the Win16 target.</span>
<a href="#l14.1025"></a><span id="l14.1025" class="difflineplus">+#</span>
<a href="#l14.1026"></a><span id="l14.1026" class="difflineplus">+# If OS_TARGET is not specified, it defaults to $(OS_ARCH), i.e., no</span>
<a href="#l14.1027"></a><span id="l14.1027" class="difflineplus">+# cross-compilation.</span>
<a href="#l14.1028"></a><span id="l14.1028" class="difflineplus">+#</span>
<a href="#l14.1029"></a><span id="l14.1029" class="difflineplus">+</span>
<a href="#l14.1030"></a><span id="l14.1030" class="difflineplus">+#</span>
<a href="#l14.1031"></a><span id="l14.1031" class="difflineplus">+# The following hack allows one to build on a WIN95 machine (as if</span>
<a href="#l14.1032"></a><span id="l14.1032" class="difflineplus">+# s/he were cross-compiling on a WINNT host for a WIN95 target).</span>
<a href="#l14.1033"></a><span id="l14.1033" class="difflineplus">+# It also accomodates for MKS's uname.exe.  If you never intend</span>
<a href="#l14.1034"></a><span id="l14.1034" class="difflineplus">+# to do development on a WIN95 machine, you don't need this hack.</span>
<a href="#l14.1035"></a><span id="l14.1035" class="difflineplus">+#</span>
<a href="#l14.1036"></a><span id="l14.1036" class="difflineplus">+case &quot;$OS_ARCH&quot; in</span>
<a href="#l14.1037"></a><span id="l14.1037" class="difflineplus">+WIN95)</span>
<a href="#l14.1038"></a><span id="l14.1038" class="difflineplus">+    OS_ARCH=WINNT</span>
<a href="#l14.1039"></a><span id="l14.1039" class="difflineplus">+    OS_TARGET=WIN95</span>
<a href="#l14.1040"></a><span id="l14.1040" class="difflineplus">+    ;;</span>
<a href="#l14.1041"></a><span id="l14.1041" class="difflineplus">+Windows_95)</span>
<a href="#l14.1042"></a><span id="l14.1042" class="difflineplus">+    OS_ARCH=Windows_NT</span>
<a href="#l14.1043"></a><span id="l14.1043" class="difflineplus">+    OS_TARGET=WIN95</span>
<a href="#l14.1044"></a><span id="l14.1044" class="difflineplus">+    ;;</span>
<a href="#l14.1045"></a><span id="l14.1045" class="difflineplus">+Windows_98)</span>
<a href="#l14.1046"></a><span id="l14.1046" class="difflineplus">+    OS_ARCH=Windows_NT</span>
<a href="#l14.1047"></a><span id="l14.1047" class="difflineplus">+    OS_TARGET=WIN95</span>
<a href="#l14.1048"></a><span id="l14.1048" class="difflineplus">+    ;;</span>
<a href="#l14.1049"></a><span id="l14.1049" class="difflineplus">+CYGWIN_9*|CYGWIN_ME*)</span>
<a href="#l14.1050"></a><span id="l14.1050" class="difflineplus">+    OS_ARCH='CYGWIN_NT-4.0'</span>
<a href="#l14.1051"></a><span id="l14.1051" class="difflineplus">+    OS_TARGET=WIN95</span>
<a href="#l14.1052"></a><span id="l14.1052" class="difflineplus">+    ;;</span>
<a href="#l14.1053"></a><span id="l14.1053" class="difflineplus">+esac</span>
<a href="#l14.1054"></a><span id="l14.1054" class="difflineplus">+</span>
<a href="#l14.1055"></a><span id="l14.1055" class="difflineplus">+#</span>
<a href="#l14.1056"></a><span id="l14.1056" class="difflineplus">+# Define and override various archtecture-specific variables, including</span>
<a href="#l14.1057"></a><span id="l14.1057" class="difflineplus">+# HOST_OS_ARCH</span>
<a href="#l14.1058"></a><span id="l14.1058" class="difflineplus">+# OS_ARCH</span>
<a href="#l14.1059"></a><span id="l14.1059" class="difflineplus">+# OS_TEST</span>
<a href="#l14.1060"></a><span id="l14.1060" class="difflineplus">+# OS_TARGET</span>
<a href="#l14.1061"></a><span id="l14.1061" class="difflineplus">+# OS_RELEASE</span>
<a href="#l14.1062"></a><span id="l14.1062" class="difflineplus">+# OS_MINOR_RELEASE</span>
<a href="#l14.1063"></a><span id="l14.1063" class="difflineplus">+#</span>
<a href="#l14.1064"></a><span id="l14.1064" class="difflineplus">+</span>
<a href="#l14.1065"></a><span id="l14.1065" class="difflineplus">+case &quot;$HOST_OS_ARCH&quot; in</span>
<a href="#l14.1066"></a><span id="l14.1066" class="difflineplus">+cygwin*|mingw*|mks*|msvc*)</span>
<a href="#l14.1067"></a><span id="l14.1067" class="difflineplus">+    HOST_OS_ARCH=WINNT</span>
<a href="#l14.1068"></a><span id="l14.1068" class="difflineplus">+    ;;</span>
<a href="#l14.1069"></a><span id="l14.1069" class="difflineplus">+linux*)</span>
<a href="#l14.1070"></a><span id="l14.1070" class="difflineplus">+    HOST_OS_ARCH=Linux</span>
<a href="#l14.1071"></a><span id="l14.1071" class="difflineplus">+    ;;</span>
<a href="#l14.1072"></a><span id="l14.1072" class="difflineplus">+solaris*)</span>
<a href="#l14.1073"></a><span id="l14.1073" class="difflineplus">+    HOST_OS_ARCH=SunOS</span>
<a href="#l14.1074"></a><span id="l14.1074" class="difflineplus">+    ;;</span>
<a href="#l14.1075"></a><span id="l14.1075" class="difflineplus">+BSD_386)</span>
<a href="#l14.1076"></a><span id="l14.1076" class="difflineplus">+    HOST_OS_ARCH=BSD</span>
<a href="#l14.1077"></a><span id="l14.1077" class="difflineplus">+    ;;</span>
<a href="#l14.1078"></a><span id="l14.1078" class="difflineplus">+dgux)</span>
<a href="#l14.1079"></a><span id="l14.1079" class="difflineplus">+    HOST_OS_ARCH=DGUX</span>
<a href="#l14.1080"></a><span id="l14.1080" class="difflineplus">+    ;;</span>
<a href="#l14.1081"></a><span id="l14.1081" class="difflineplus">+IRIX64)</span>
<a href="#l14.1082"></a><span id="l14.1082" class="difflineplus">+    HOST_OS_ARCH=IRIX</span>
<a href="#l14.1083"></a><span id="l14.1083" class="difflineplus">+    ;;</span>
<a href="#l14.1084"></a><span id="l14.1084" class="difflineplus">+UNIX_SV)</span>
<a href="#l14.1085"></a><span id="l14.1085" class="difflineplus">+    if &quot;`cat /etc/bcheckrc | grep -c NCR 2&gt;/dev/null`&quot; != &quot;0&quot;; then</span>
<a href="#l14.1086"></a><span id="l14.1086" class="difflineplus">+        HOST_OS_ARCH=NCR</span>
<a href="#l14.1087"></a><span id="l14.1087" class="difflineplus">+    else</span>
<a href="#l14.1088"></a><span id="l14.1088" class="difflineplus">+        HOST_OS_ARCH=UNIXWARE</span>
<a href="#l14.1089"></a><span id="l14.1089" class="difflineplus">+    fi</span>
<a href="#l14.1090"></a><span id="l14.1090" class="difflineplus">+    ;;</span>
<a href="#l14.1091"></a><span id="l14.1091" class="difflineplus">+ncr)</span>
<a href="#l14.1092"></a><span id="l14.1092" class="difflineplus">+    HOST_OS_ARCH=NCR</span>
<a href="#l14.1093"></a><span id="l14.1093" class="difflineplus">+    ;;</span>
<a href="#l14.1094"></a><span id="l14.1094" class="difflineplus">+UNIX_SYSTEM_V)</span>
<a href="#l14.1095"></a><span id="l14.1095" class="difflineplus">+    HOST_OS_ARCH=NEC</span>
<a href="#l14.1096"></a><span id="l14.1096" class="difflineplus">+    ;;</span>
<a href="#l14.1097"></a><span id="l14.1097" class="difflineplus">+OSF1)</span>
<a href="#l14.1098"></a><span id="l14.1098" class="difflineplus">+    ;;</span>
<a href="#l14.1099"></a><span id="l14.1099" class="difflineplus">+*OpenVMS*)</span>
<a href="#l14.1100"></a><span id="l14.1100" class="difflineplus">+    HOST_OS_ARCH=OpenVMS</span>
<a href="#l14.1101"></a><span id="l14.1101" class="difflineplus">+    ;;</span>
<a href="#l14.1102"></a><span id="l14.1102" class="difflineplus">+OS_2)</span>
<a href="#l14.1103"></a><span id="l14.1103" class="difflineplus">+    HOST_OS_ARCH=OS2</span>
<a href="#l14.1104"></a><span id="l14.1104" class="difflineplus">+    ;;</span>
<a href="#l14.1105"></a><span id="l14.1105" class="difflineplus">+QNX)</span>
<a href="#l14.1106"></a><span id="l14.1106" class="difflineplus">+    ;;</span>
<a href="#l14.1107"></a><span id="l14.1107" class="difflineplus">+SCO_SV)</span>
<a href="#l14.1108"></a><span id="l14.1108" class="difflineplus">+    HOST_OS_ARCH=SCOOS</span>
<a href="#l14.1109"></a><span id="l14.1109" class="difflineplus">+    ;;</span>
<a href="#l14.1110"></a><span id="l14.1110" class="difflineplus">+SINIX-N | SINIX-Y | SINIX-Z |ReliantUNIX-M)</span>
<a href="#l14.1111"></a><span id="l14.1111" class="difflineplus">+    HOST_OS_ARCH=SINIX</span>
<a href="#l14.1112"></a><span id="l14.1112" class="difflineplus">+    ;;</span>
<a href="#l14.1113"></a><span id="l14.1113" class="difflineplus">+UnixWare)</span>
<a href="#l14.1114"></a><span id="l14.1114" class="difflineplus">+    HOST_OS_ARCH=UNIXWARE</span>
<a href="#l14.1115"></a><span id="l14.1115" class="difflineplus">+    ;;</span>
<a href="#l14.1116"></a><span id="l14.1116" class="difflineplus">+esac</span>
<a href="#l14.1117"></a><span id="l14.1117" class="difflineplus">+</span>
<a href="#l14.1118"></a><span id="l14.1118" class="difflineplus">+case &quot;$OS_ARCH&quot; in</span>
<a href="#l14.1119"></a><span id="l14.1119" class="difflineplus">+WINNT)</span>
<a href="#l14.1120"></a><span id="l14.1120" class="difflineplus">+    OS_TEST=`uname -p`</span>
<a href="#l14.1121"></a><span id="l14.1121" class="difflineplus">+    ;;</span>
<a href="#l14.1122"></a><span id="l14.1122" class="difflineplus">+Windows_NT)</span>
<a href="#l14.1123"></a><span id="l14.1123" class="difflineplus">+#</span>
<a href="#l14.1124"></a><span id="l14.1124" class="difflineplus">+# If uname -s returns &quot;Windows_NT&quot;, we assume that we are using</span>
<a href="#l14.1125"></a><span id="l14.1125" class="difflineplus">+# the uname.exe in MKS toolkit.</span>
<a href="#l14.1126"></a><span id="l14.1126" class="difflineplus">+#</span>
<a href="#l14.1127"></a><span id="l14.1127" class="difflineplus">+# The -r option of MKS uname only returns the major version number.</span>
<a href="#l14.1128"></a><span id="l14.1128" class="difflineplus">+# So we need to use its -v option to get the minor version number.</span>
<a href="#l14.1129"></a><span id="l14.1129" class="difflineplus">+# Moreover, it doesn't have the -p option, so we need to use uname -m.</span>
<a href="#l14.1130"></a><span id="l14.1130" class="difflineplus">+#</span>
<a href="#l14.1131"></a><span id="l14.1131" class="difflineplus">+    OS_ARCH=WINNT</span>
<a href="#l14.1132"></a><span id="l14.1132" class="difflineplus">+    OS_TARGET=WINNT</span>
<a href="#l14.1133"></a><span id="l14.1133" class="difflineplus">+    OS_MINOR_RELEASE=`uname -v`</span>
<a href="#l14.1134"></a><span id="l14.1134" class="difflineplus">+    if test &quot;$OS_MINOR_RELEASE&quot; = &quot;00&quot;; then</span>
<a href="#l14.1135"></a><span id="l14.1135" class="difflineplus">+        OS_MINOR_RELEASE=0</span>
<a href="#l14.1136"></a><span id="l14.1136" class="difflineplus">+    fi</span>
<a href="#l14.1137"></a><span id="l14.1137" class="difflineplus">+    OS_RELEASE=&quot;${OS_RELEASE}.${OS_MINOR_RELEASE}&quot;</span>
<a href="#l14.1138"></a><span id="l14.1138" class="difflineplus">+    ;;</span>
<a href="#l14.1139"></a><span id="l14.1139" class="difflineplus">+CYGWIN32_NT|CYGWIN_NT*|MINGW*_NT*)</span>
<a href="#l14.1140"></a><span id="l14.1140" class="difflineplus">+#</span>
<a href="#l14.1141"></a><span id="l14.1141" class="difflineplus">+# If uname -s returns &quot;CYGWIN_NT-4.0&quot;, we assume that we are using</span>
<a href="#l14.1142"></a><span id="l14.1142" class="difflineplus">+# the uname.exe in the Cygwin tools.</span>
<a href="#l14.1143"></a><span id="l14.1143" class="difflineplus">+# Prior to the Beta 20 release, Cygwin was called GNU-Win32.</span>
<a href="#l14.1144"></a><span id="l14.1144" class="difflineplus">+# If uname -s returns &quot;CYGWIN32/NT&quot;, we assume that we are using</span>
<a href="#l14.1145"></a><span id="l14.1145" class="difflineplus">+# the uname.exe in the GNU-Win32 tools.</span>
<a href="#l14.1146"></a><span id="l14.1146" class="difflineplus">+# If uname -s returns MINGW32_NT-5.1, we assume that we are using</span>
<a href="#l14.1147"></a><span id="l14.1147" class="difflineplus">+# the uname.exe in the MSYS tools.</span>
<a href="#l14.1148"></a><span id="l14.1148" class="difflineplus">+#</span>
<a href="#l14.1149"></a><span id="l14.1149" class="difflineplus">+    OS_RELEASE=`expr $OS_ARCH : '.*NT-\(.*\)'`</span>
<a href="#l14.1150"></a><span id="l14.1150" class="difflineplus">+    OS_ARCH=WINNT</span>
<a href="#l14.1151"></a><span id="l14.1151" class="difflineplus">+    OS_TARGET=WINNT</span>
<a href="#l14.1152"></a><span id="l14.1152" class="difflineplus">+    ;;</span>
<a href="#l14.1153"></a><span id="l14.1153" class="difflineplus">+AIX)</span>
<a href="#l14.1154"></a><span id="l14.1154" class="difflineplus">+    OS_RELEASE=`uname -v`.`uname -r`</span>
<a href="#l14.1155"></a><span id="l14.1155" class="difflineplus">+    OS_TEST=`uname -p`</span>
<a href="#l14.1156"></a><span id="l14.1156" class="difflineplus">+    ;;</span>
<a href="#l14.1157"></a><span id="l14.1157" class="difflineplus">+BSD_386)</span>
<a href="#l14.1158"></a><span id="l14.1158" class="difflineplus">+    OS_ARCH=BSD</span>
<a href="#l14.1159"></a><span id="l14.1159" class="difflineplus">+    ;;</span>
<a href="#l14.1160"></a><span id="l14.1160" class="difflineplus">+dgux)</span>
<a href="#l14.1161"></a><span id="l14.1161" class="difflineplus">+    OS_ARCH=DGUX</span>
<a href="#l14.1162"></a><span id="l14.1162" class="difflineplus">+    ;;</span>
<a href="#l14.1163"></a><span id="l14.1163" class="difflineplus">+IRIX64)</span>
<a href="#l14.1164"></a><span id="l14.1164" class="difflineplus">+    OS_ARCH=IRIX</span>
<a href="#l14.1165"></a><span id="l14.1165" class="difflineplus">+    ;;</span>
<a href="#l14.1166"></a><span id="l14.1166" class="difflineplus">+UNIX_SV)</span>
<a href="#l14.1167"></a><span id="l14.1167" class="difflineplus">+    if &quot;`cat /etc/bcheckrc | grep -c NCR 2&gt;/dev/null`&quot; != &quot;0&quot;; then</span>
<a href="#l14.1168"></a><span id="l14.1168" class="difflineplus">+        OS_ARCH=NCR</span>
<a href="#l14.1169"></a><span id="l14.1169" class="difflineplus">+    else</span>
<a href="#l14.1170"></a><span id="l14.1170" class="difflineplus">+        OS_ARCH=UNIXWARE</span>
<a href="#l14.1171"></a><span id="l14.1171" class="difflineplus">+        OS_RELEASE=`uname -v`</span>
<a href="#l14.1172"></a><span id="l14.1172" class="difflineplus">+    fi</span>
<a href="#l14.1173"></a><span id="l14.1173" class="difflineplus">+    ;;</span>
<a href="#l14.1174"></a><span id="l14.1174" class="difflineplus">+ncr)</span>
<a href="#l14.1175"></a><span id="l14.1175" class="difflineplus">+    OS_ARCH=NCR</span>
<a href="#l14.1176"></a><span id="l14.1176" class="difflineplus">+    ;;</span>
<a href="#l14.1177"></a><span id="l14.1177" class="difflineplus">+UNIX_SYSTEM_V)</span>
<a href="#l14.1178"></a><span id="l14.1178" class="difflineplus">+    OS_ARCH=NEC</span>
<a href="#l14.1179"></a><span id="l14.1179" class="difflineplus">+    ;;</span>
<a href="#l14.1180"></a><span id="l14.1180" class="difflineplus">+OSF1)</span>
<a href="#l14.1181"></a><span id="l14.1181" class="difflineplus">+    case `uname -v` in</span>
<a href="#l14.1182"></a><span id="l14.1182" class="difflineplus">+    148)</span>
<a href="#l14.1183"></a><span id="l14.1183" class="difflineplus">+        OS_RELEASE=V3.2C</span>
<a href="#l14.1184"></a><span id="l14.1184" class="difflineplus">+        ;;</span>
<a href="#l14.1185"></a><span id="l14.1185" class="difflineplus">+    564)</span>
<a href="#l14.1186"></a><span id="l14.1186" class="difflineplus">+        OS_RELEASE=V4.0B</span>
<a href="#l14.1187"></a><span id="l14.1187" class="difflineplus">+        ;;</span>
<a href="#l14.1188"></a><span id="l14.1188" class="difflineplus">+    878)</span>
<a href="#l14.1189"></a><span id="l14.1189" class="difflineplus">+        OS_RELEASE=V4.0D</span>
<a href="#l14.1190"></a><span id="l14.1190" class="difflineplus">+        ;;</span>
<a href="#l14.1191"></a><span id="l14.1191" class="difflineplus">+    esac</span>
<a href="#l14.1192"></a><span id="l14.1192" class="difflineplus">+    ;;</span>
<a href="#l14.1193"></a><span id="l14.1193" class="difflineplus">+*OpenVMS*)</span>
<a href="#l14.1194"></a><span id="l14.1194" class="difflineplus">+    OS_ARCH=OpenVMS</span>
<a href="#l14.1195"></a><span id="l14.1195" class="difflineplus">+    OS_RELEASE=`uname -v`</span>
<a href="#l14.1196"></a><span id="l14.1196" class="difflineplus">+    OS_TEST=`uname -p`</span>
<a href="#l14.1197"></a><span id="l14.1197" class="difflineplus">+    ;;</span>
<a href="#l14.1198"></a><span id="l14.1198" class="difflineplus">+OS_2)</span>
<a href="#l14.1199"></a><span id="l14.1199" class="difflineplus">+    OS_ARCH=OS2</span>
<a href="#l14.1200"></a><span id="l14.1200" class="difflineplus">+    OS_TARGET=OS2</span>
<a href="#l14.1201"></a><span id="l14.1201" class="difflineplus">+    OS_RELEASE=`uname -v`</span>
<a href="#l14.1202"></a><span id="l14.1202" class="difflineplus">+    ;;</span>
<a href="#l14.1203"></a><span id="l14.1203" class="difflineplus">+QNX)</span>
<a href="#l14.1204"></a><span id="l14.1204" class="difflineplus">+    if test &quot;$OS_TARGET&quot; != &quot;NTO&quot;; then</span>
<a href="#l14.1205"></a><span id="l14.1205" class="difflineplus">+        changequote(,)</span>
<a href="#l14.1206"></a><span id="l14.1206" class="difflineplus">+        OS_RELEASE=`uname -v | sed 's/^\([0-9]\)\([0-9]*\)$/\1.\2/'`</span>
<a href="#l14.1207"></a><span id="l14.1207" class="difflineplus">+        changequote([,])</span>
<a href="#l14.1208"></a><span id="l14.1208" class="difflineplus">+    fi</span>
<a href="#l14.1209"></a><span id="l14.1209" class="difflineplus">+    OS_TEST=x86</span>
<a href="#l14.1210"></a><span id="l14.1210" class="difflineplus">+    ;;</span>
<a href="#l14.1211"></a><span id="l14.1211" class="difflineplus">+SCO_SV)</span>
<a href="#l14.1212"></a><span id="l14.1212" class="difflineplus">+    OS_ARCH=SCOOS</span>
<a href="#l14.1213"></a><span id="l14.1213" class="difflineplus">+    OS_RELEASE=5.0</span>
<a href="#l14.1214"></a><span id="l14.1214" class="difflineplus">+    ;;</span>
<a href="#l14.1215"></a><span id="l14.1215" class="difflineplus">+SINIX-N | SINIX-Y | SINIX-Z |ReliantUNIX-M)</span>
<a href="#l14.1216"></a><span id="l14.1216" class="difflineplus">+    OS_ARCH=SINIX</span>
<a href="#l14.1217"></a><span id="l14.1217" class="difflineplus">+    OS_TEST=`uname -p`</span>
<a href="#l14.1218"></a><span id="l14.1218" class="difflineplus">+    ;;</span>
<a href="#l14.1219"></a><span id="l14.1219" class="difflineplus">+UnixWare)</span>
<a href="#l14.1220"></a><span id="l14.1220" class="difflineplus">+    OS_ARCH=UNIXWARE</span>
<a href="#l14.1221"></a><span id="l14.1221" class="difflineplus">+    OS_RELEASE=`uname -v`</span>
<a href="#l14.1222"></a><span id="l14.1222" class="difflineplus">+    ;;</span>
<a href="#l14.1223"></a><span id="l14.1223" class="difflineplus">+WINCE)</span>
<a href="#l14.1224"></a><span id="l14.1224" class="difflineplus">+    OS_ARCH=WINCE</span>
<a href="#l14.1225"></a><span id="l14.1225" class="difflineplus">+    OS_TARGET=WINCE</span>
<a href="#l14.1226"></a><span id="l14.1226" class="difflineplus">+    ;;</span>
<a href="#l14.1227"></a><span id="l14.1227" class="difflineplus">+Darwin)</span>
<a href="#l14.1228"></a><span id="l14.1228" class="difflineplus">+    case &quot;${target_cpu}&quot; in</span>
<a href="#l14.1229"></a><span id="l14.1229" class="difflineplus">+    powerpc*)</span>
<a href="#l14.1230"></a><span id="l14.1230" class="difflineplus">+        OS_TEST=ppc</span>
<a href="#l14.1231"></a><span id="l14.1231" class="difflineplus">+        ;;</span>
<a href="#l14.1232"></a><span id="l14.1232" class="difflineplus">+    i*86*)</span>
<a href="#l14.1233"></a><span id="l14.1233" class="difflineplus">+        OS_TEST=i386 </span>
<a href="#l14.1234"></a><span id="l14.1234" class="difflineplus">+        ;;</span>
<a href="#l14.1235"></a><span id="l14.1235" class="difflineplus">+    *)</span>
<a href="#l14.1236"></a><span id="l14.1236" class="difflineplus">+        if test -z &quot;$CROSS_COMPILE&quot; ; then</span>
<a href="#l14.1237"></a><span id="l14.1237" class="difflineplus">+            OS_TEST=`uname -p`</span>
<a href="#l14.1238"></a><span id="l14.1238" class="difflineplus">+        fi</span>
<a href="#l14.1239"></a><span id="l14.1239" class="difflineplus">+        ;;</span>
<a href="#l14.1240"></a><span id="l14.1240" class="difflineplus">+    esac</span>
<a href="#l14.1241"></a><span id="l14.1241" class="difflineplus">+    ;;</span>
<a href="#l14.1242"></a><span id="l14.1242" class="difflineplus">+esac</span>
<a href="#l14.1243"></a><span id="l14.1243" class="difflineplus">+</span>
<a href="#l14.1244"></a><span id="l14.1244" class="difflineplus">+if test &quot;$OS_ARCH&quot; = &quot;NCR&quot;; then</span>
<a href="#l14.1245"></a><span id="l14.1245" class="difflineplus">+    changequote(,)</span>
<a href="#l14.1246"></a><span id="l14.1246" class="difflineplus">+    OS_RELEASE=`awk '{print $3}' /etc/.relid | sed 's/^\([0-9]\)\(.\)\(..\)\(.*\)$/\2.\3/'`</span>
<a href="#l14.1247"></a><span id="l14.1247" class="difflineplus">+    changequote([,])</span>
<a href="#l14.1248"></a><span id="l14.1248" class="difflineplus">+fi</span>
<a href="#l14.1249"></a><span id="l14.1249" class="difflineplus">+</span>
<a href="#l14.1250"></a><span id="l14.1250" class="difflineplus">+# Only set CPU_ARCH if we recognize the value of OS_TEST</span>
<a href="#l14.1251"></a><span id="l14.1251" class="difflineplus">+</span>
<a href="#l14.1252"></a><span id="l14.1252" class="difflineplus">+case &quot;$OS_TEST&quot; in</span>
<a href="#l14.1253"></a><span id="l14.1253" class="difflineplus">+*86 | i86pc)</span>
<a href="#l14.1254"></a><span id="l14.1254" class="difflineplus">+    CPU_ARCH=x86</span>
<a href="#l14.1255"></a><span id="l14.1255" class="difflineplus">+    ;;</span>
<a href="#l14.1256"></a><span id="l14.1256" class="difflineplus">+</span>
<a href="#l14.1257"></a><span id="l14.1257" class="difflineplus">+powerpc* | ppc)</span>
<a href="#l14.1258"></a><span id="l14.1258" class="difflineplus">+    CPU_ARCH=ppc</span>
<a href="#l14.1259"></a><span id="l14.1259" class="difflineplus">+    ;;</span>
<a href="#l14.1260"></a><span id="l14.1260" class="difflineplus">+</span>
<a href="#l14.1261"></a><span id="l14.1261" class="difflineplus">+Alpha | alpha | ALPHA)</span>
<a href="#l14.1262"></a><span id="l14.1262" class="difflineplus">+    CPU_ARCH=Alpha</span>
<a href="#l14.1263"></a><span id="l14.1263" class="difflineplus">+    ;;</span>
<a href="#l14.1264"></a><span id="l14.1264" class="difflineplus">+</span>
<a href="#l14.1265"></a><span id="l14.1265" class="difflineplus">+hppa* | parisc)</span>
<a href="#l14.1266"></a><span id="l14.1266" class="difflineplus">+    CPU_ARCH=hppa</span>
<a href="#l14.1267"></a><span id="l14.1267" class="difflineplus">+    ;;</span>
<a href="#l14.1268"></a><span id="l14.1268" class="difflineplus">+</span>
<a href="#l14.1269"></a><span id="l14.1269" class="difflineplus">+sun4u | sparc*)</span>
<a href="#l14.1270"></a><span id="l14.1270" class="difflineplus">+    CPU_ARCH=sparc</span>
<a href="#l14.1271"></a><span id="l14.1271" class="difflineplus">+    ;;</span>
<a href="#l14.1272"></a><span id="l14.1272" class="difflineplus">+</span>
<a href="#l14.1273"></a><span id="l14.1273" class="difflineplus">+x86_64 | ia64)</span>
<a href="#l14.1274"></a><span id="l14.1274" class="difflineplus">+    CPU_ARCH=&quot;$OS_TEST&quot;</span>
<a href="#l14.1275"></a><span id="l14.1275" class="difflineplus">+    ;;</span>
<a href="#l14.1276"></a><span id="l14.1276" class="difflineplus">+esac</span>
<a href="#l14.1277"></a><span id="l14.1277" class="difflineplus">+</span>
<a href="#l14.1278"></a><span id="l14.1278" class="difflineplus">+if test -z &quot;$OS_TARGET&quot;; then</span>
<a href="#l14.1279"></a><span id="l14.1279" class="difflineplus">+    OS_TARGET=$OS_ARCH</span>
<a href="#l14.1280"></a><span id="l14.1280" class="difflineplus">+fi</span>
<a href="#l14.1281"></a><span id="l14.1281" class="difflineplus">+if test &quot;$OS_TARGET&quot; = &quot;WIN95&quot;; then</span>
<a href="#l14.1282"></a><span id="l14.1282" class="difflineplus">+    OS_RELEASE=&quot;4.0&quot;</span>
<a href="#l14.1283"></a><span id="l14.1283" class="difflineplus">+fi</span>
<a href="#l14.1284"></a><span id="l14.1284" class="difflineplus">+if test &quot;$OS_TARGET&quot; = &quot;WIN16&quot;; then</span>
<a href="#l14.1285"></a><span id="l14.1285" class="difflineplus">+    OS_RELEASE=</span>
<a href="#l14.1286"></a><span id="l14.1286" class="difflineplus">+fi</span>
<a href="#l14.1287"></a><span id="l14.1287" class="difflineplus">+OS_CONFIG=&quot;${OS_TARGET}${OS_RELEASE}&quot;</span>
<a href="#l14.1288"></a><span id="l14.1288" class="difflineplus">+</span>
<a href="#l14.1289"></a><span id="l14.1289" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1290"></a><span id="l14.1290" class="difflineplus">+dnl GNU specific defaults</span>
<a href="#l14.1291"></a><span id="l14.1291" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1292"></a><span id="l14.1292" class="difflineplus">+if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1293"></a><span id="l14.1293" class="difflineplus">+    # FIXME: Let us build with strict aliasing. bug 414641.</span>
<a href="#l14.1294"></a><span id="l14.1294" class="difflineplus">+    CFLAGS=&quot;$CFLAGS -fno-strict-aliasing&quot;</span>
<a href="#l14.1295"></a><span id="l14.1295" class="difflineplus">+    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-h,$@ -o $@'</span>
<a href="#l14.1296"></a><span id="l14.1296" class="difflineplus">+    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-h,$@ -o $@'</span>
<a href="#l14.1297"></a><span id="l14.1297" class="difflineplus">+    DSO_LDOPTS='-shared'</span>
<a href="#l14.1298"></a><span id="l14.1298" class="difflineplus">+    if test &quot;$GCC_USE_GNU_LD&quot;; then</span>
<a href="#l14.1299"></a><span id="l14.1299" class="difflineplus">+        # Don't allow undefined symbols in libraries</span>
<a href="#l14.1300"></a><span id="l14.1300" class="difflineplus">+        DSO_LDOPTS=&quot;$DSO_LDOPTS -Wl,-z,defs&quot;</span>
<a href="#l14.1301"></a><span id="l14.1301" class="difflineplus">+    fi</span>
<a href="#l14.1302"></a><span id="l14.1302" class="difflineplus">+    WARNINGS_AS_ERRORS='-Werror'</span>
<a href="#l14.1303"></a><span id="l14.1303" class="difflineplus">+    DSO_CFLAGS=''</span>
<a href="#l14.1304"></a><span id="l14.1304" class="difflineplus">+    DSO_PIC_CFLAGS='-fPIC'</span>
<a href="#l14.1305"></a><span id="l14.1305" class="difflineplus">+    _MOZ_RTTI_FLAGS_ON=${_COMPILER_PREFIX}-frtti</span>
<a href="#l14.1306"></a><span id="l14.1306" class="difflineplus">+    _MOZ_RTTI_FLAGS_OFF=${_COMPILER_PREFIX}-fno-rtti</span>
<a href="#l14.1307"></a><span id="l14.1307" class="difflineplus">+    _MOZ_EXCEPTIONS_FLAGS_ON='-fhandle-exceptions'</span>
<a href="#l14.1308"></a><span id="l14.1308" class="difflineplus">+    _MOZ_EXCEPTIONS_FLAGS_OFF='-fno-handle-exceptions'</span>
<a href="#l14.1309"></a><span id="l14.1309" class="difflineplus">+</span>
<a href="#l14.1310"></a><span id="l14.1310" class="difflineplus">+    # Turn on GNU specific features</span>
<a href="#l14.1311"></a><span id="l14.1311" class="difflineplus">+    # -Wall - turn on all warnings</span>
<a href="#l14.1312"></a><span id="l14.1312" class="difflineplus">+    # -pedantic - make compiler warn about non-ANSI stuff, and</span>
<a href="#l14.1313"></a><span id="l14.1313" class="difflineplus">+    #             be a little bit stricter</span>
<a href="#l14.1314"></a><span id="l14.1314" class="difflineplus">+    # Warnings slamm took out for now (these were giving more noise than help):</span>
<a href="#l14.1315"></a><span id="l14.1315" class="difflineplus">+    # -Wbad-function-cast - warns when casting a function to a new return type</span>
<a href="#l14.1316"></a><span id="l14.1316" class="difflineplus">+    # -Wconversion - complained when char's or short's were used a function args</span>
<a href="#l14.1317"></a><span id="l14.1317" class="difflineplus">+    # -Wshadow - removed because it generates more noise than help --pete</span>
<a href="#l14.1318"></a><span id="l14.1318" class="difflineplus">+    _WARNINGS_CFLAGS=&quot;${_WARNINGS_CFLAGS} -Wall -W -Wno-unused -Wpointer-arith&quot;</span>
<a href="#l14.1319"></a><span id="l14.1319" class="difflineplus">+    if test -z &quot;$INTEL_CC&quot;; then</span>
<a href="#l14.1320"></a><span id="l14.1320" class="difflineplus">+       # Don't use -Wcast-align with ICC</span>
<a href="#l14.1321"></a><span id="l14.1321" class="difflineplus">+       case &quot;$CPU_ARCH&quot; in</span>
<a href="#l14.1322"></a><span id="l14.1322" class="difflineplus">+           # And don't use it on hppa, ia64, sparc, since it's noisy there</span>
<a href="#l14.1323"></a><span id="l14.1323" class="difflineplus">+           hppa | ia64 | sparc)</span>
<a href="#l14.1324"></a><span id="l14.1324" class="difflineplus">+           ;;</span>
<a href="#l14.1325"></a><span id="l14.1325" class="difflineplus">+           *)</span>
<a href="#l14.1326"></a><span id="l14.1326" class="difflineplus">+        _WARNINGS_CFLAGS=&quot;${_WARNINGS_CFLAGS} -Wcast-align&quot;</span>
<a href="#l14.1327"></a><span id="l14.1327" class="difflineplus">+           ;;</span>
<a href="#l14.1328"></a><span id="l14.1328" class="difflineplus">+       esac</span>
<a href="#l14.1329"></a><span id="l14.1329" class="difflineplus">+    fi</span>
<a href="#l14.1330"></a><span id="l14.1330" class="difflineplus">+</span>
<a href="#l14.1331"></a><span id="l14.1331" class="difflineplus">+    dnl Turn pedantic on but disable the warnings for long long</span>
<a href="#l14.1332"></a><span id="l14.1332" class="difflineplus">+    _PEDANTIC=1</span>
<a href="#l14.1333"></a><span id="l14.1333" class="difflineplus">+</span>
<a href="#l14.1334"></a><span id="l14.1334" class="difflineplus">+    if test -z &quot;$INTEL_CC&quot;; then</span>
<a href="#l14.1335"></a><span id="l14.1335" class="difflineplus">+      _IGNORE_LONG_LONG_WARNINGS=1</span>
<a href="#l14.1336"></a><span id="l14.1336" class="difflineplus">+      _WARNINGS_CFLAGS=&quot;${_WARNINGS_CFLAGS} -W&quot;</span>
<a href="#l14.1337"></a><span id="l14.1337" class="difflineplus">+    else</span>
<a href="#l14.1338"></a><span id="l14.1338" class="difflineplus">+      _IGNORE_LONG_LONG_WARNINGS=</span>
<a href="#l14.1339"></a><span id="l14.1339" class="difflineplus">+    fi</span>
<a href="#l14.1340"></a><span id="l14.1340" class="difflineplus">+</span>
<a href="#l14.1341"></a><span id="l14.1341" class="difflineplus">+</span>
<a href="#l14.1342"></a><span id="l14.1342" class="difflineplus">+    _DEFINES_CFLAGS='-include $(DEPTH)/mozilla-config.h -DMOZILLA_CLIENT'</span>
<a href="#l14.1343"></a><span id="l14.1343" class="difflineplus">+    _USE_CPP_INCLUDE_FLAG=1</span>
<a href="#l14.1344"></a><span id="l14.1344" class="difflineplus">+else</span>
<a href="#l14.1345"></a><span id="l14.1345" class="difflineplus">+    MKSHLIB='$(LD) $(DSO_LDOPTS) -h $@ -o $@'</span>
<a href="#l14.1346"></a><span id="l14.1346" class="difflineplus">+    MKCSHLIB='$(LD) $(DSO_LDOPTS) -h $@ -o $@'</span>
<a href="#l14.1347"></a><span id="l14.1347" class="difflineplus">+</span>
<a href="#l14.1348"></a><span id="l14.1348" class="difflineplus">+    DSO_LDOPTS='-shared'</span>
<a href="#l14.1349"></a><span id="l14.1349" class="difflineplus">+    if test &quot;$GNU_LD&quot;; then</span>
<a href="#l14.1350"></a><span id="l14.1350" class="difflineplus">+        # Don't allow undefined symbols in libraries</span>
<a href="#l14.1351"></a><span id="l14.1351" class="difflineplus">+        DSO_LDOPTS=&quot;$DSO_LDOPTS -z defs&quot;</span>
<a href="#l14.1352"></a><span id="l14.1352" class="difflineplus">+    fi</span>
<a href="#l14.1353"></a><span id="l14.1353" class="difflineplus">+</span>
<a href="#l14.1354"></a><span id="l14.1354" class="difflineplus">+    DSO_CFLAGS=''</span>
<a href="#l14.1355"></a><span id="l14.1355" class="difflineplus">+    DSO_PIC_CFLAGS='-KPIC'</span>
<a href="#l14.1356"></a><span id="l14.1356" class="difflineplus">+    _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'</span>
<a href="#l14.1357"></a><span id="l14.1357" class="difflineplus">+fi</span>
<a href="#l14.1358"></a><span id="l14.1358" class="difflineplus">+</span>
<a href="#l14.1359"></a><span id="l14.1359" class="difflineplus">+if test &quot;$GNU_CXX&quot;; then</span>
<a href="#l14.1360"></a><span id="l14.1360" class="difflineplus">+    # FIXME: Let us build with strict aliasing. bug 414641.</span>
<a href="#l14.1361"></a><span id="l14.1361" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -fno-strict-aliasing&quot;</span>
<a href="#l14.1362"></a><span id="l14.1362" class="difflineplus">+    # Turn on GNU specific features</span>
<a href="#l14.1363"></a><span id="l14.1363" class="difflineplus">+    _WARNINGS_CXXFLAGS=&quot;${_WARNINGS_CXXFLAGS} -Wall -Wconversion -Wpointer-arith -Woverloaded-virtual -Wsynth -Wno-ctor-dtor-privacy -Wno-non-virtual-dtor&quot;</span>
<a href="#l14.1364"></a><span id="l14.1364" class="difflineplus">+    if test -z &quot;$INTEL_CC&quot;; then</span>
<a href="#l14.1365"></a><span id="l14.1365" class="difflineplus">+       # Don't use -Wcast-align with ICC</span>
<a href="#l14.1366"></a><span id="l14.1366" class="difflineplus">+       case &quot;$CPU_ARCH&quot; in</span>
<a href="#l14.1367"></a><span id="l14.1367" class="difflineplus">+           # And don't use it on hppa, ia64, sparc, since it's noisy there</span>
<a href="#l14.1368"></a><span id="l14.1368" class="difflineplus">+           hppa | ia64 | sparc)</span>
<a href="#l14.1369"></a><span id="l14.1369" class="difflineplus">+           ;;</span>
<a href="#l14.1370"></a><span id="l14.1370" class="difflineplus">+           *)</span>
<a href="#l14.1371"></a><span id="l14.1371" class="difflineplus">+        _WARNINGS_CXXFLAGS=&quot;${_WARNINGS_CXXFLAGS} -Wcast-align&quot;</span>
<a href="#l14.1372"></a><span id="l14.1372" class="difflineplus">+           ;;</span>
<a href="#l14.1373"></a><span id="l14.1373" class="difflineplus">+       esac</span>
<a href="#l14.1374"></a><span id="l14.1374" class="difflineplus">+    fi</span>
<a href="#l14.1375"></a><span id="l14.1375" class="difflineplus">+</span>
<a href="#l14.1376"></a><span id="l14.1376" class="difflineplus">+    _DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -include $(DEPTH)/mozilla-config.h'</span>
<a href="#l14.1377"></a><span id="l14.1377" class="difflineplus">+    _USE_CPP_INCLUDE_FLAG=1</span>
<a href="#l14.1378"></a><span id="l14.1378" class="difflineplus">+else</span>
<a href="#l14.1379"></a><span id="l14.1379" class="difflineplus">+    _DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -D_MOZILLA_CONFIG_H_ $(ACDEFINES)'</span>
<a href="#l14.1380"></a><span id="l14.1380" class="difflineplus">+fi</span>
<a href="#l14.1381"></a><span id="l14.1381" class="difflineplus">+</span>
<a href="#l14.1382"></a><span id="l14.1382" class="difflineplus">+dnl gcc can come with its own linker so it is better to use the pass-thru calls</span>
<a href="#l14.1383"></a><span id="l14.1383" class="difflineplus">+dnl MKSHLIB_FORCE_ALL is used to force the linker to include all object</span>
<a href="#l14.1384"></a><span id="l14.1384" class="difflineplus">+dnl files present in an archive. MKSHLIB_UNFORCE_ALL reverts the linker to</span>
<a href="#l14.1385"></a><span id="l14.1385" class="difflineplus">+dnl normal behavior.</span>
<a href="#l14.1386"></a><span id="l14.1386" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1387"></a><span id="l14.1387" class="difflineplus">+MKSHLIB_FORCE_ALL=</span>
<a href="#l14.1388"></a><span id="l14.1388" class="difflineplus">+MKSHLIB_UNFORCE_ALL=</span>
<a href="#l14.1389"></a><span id="l14.1389" class="difflineplus">+</span>
<a href="#l14.1390"></a><span id="l14.1390" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.1391"></a><span id="l14.1391" class="difflineplus">+if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1392"></a><span id="l14.1392" class="difflineplus">+  AC_MSG_CHECKING(whether ld has archive extraction flags)</span>
<a href="#l14.1393"></a><span id="l14.1393" class="difflineplus">+  AC_CACHE_VAL(ac_cv_mkshlib_force_and_unforce,</span>
<a href="#l14.1394"></a><span id="l14.1394" class="difflineplus">+   [_SAVE_LDFLAGS=$LDFLAGS; _SAVE_LIBS=$LIBS</span>
<a href="#l14.1395"></a><span id="l14.1395" class="difflineplus">+    ac_cv_mkshlib_force_and_unforce=&quot;no&quot;</span>
<a href="#l14.1396"></a><span id="l14.1396" class="difflineplus">+    exec 3&lt;&amp;0 &lt;&lt;LOOP_INPUT</span>
<a href="#l14.1397"></a><span id="l14.1397" class="difflineplus">+	force=&quot;-Wl,--whole-archive&quot;;   unforce=&quot;-Wl,--no-whole-archive&quot;</span>
<a href="#l14.1398"></a><span id="l14.1398" class="difflineplus">+	force=&quot;-Wl,-z -Wl,allextract&quot;; unforce=&quot;-Wl,-z -Wl,defaultextract&quot;</span>
<a href="#l14.1399"></a><span id="l14.1399" class="difflineplus">+	force=&quot;-Wl,-all&quot;;              unforce=&quot;-Wl,-none&quot;</span>
<a href="#l14.1400"></a><span id="l14.1400" class="difflineplus">+LOOP_INPUT</span>
<a href="#l14.1401"></a><span id="l14.1401" class="difflineplus">+    while read line</span>
<a href="#l14.1402"></a><span id="l14.1402" class="difflineplus">+    do</span>
<a href="#l14.1403"></a><span id="l14.1403" class="difflineplus">+      eval $line</span>
<a href="#l14.1404"></a><span id="l14.1404" class="difflineplus">+      LDFLAGS=$force</span>
<a href="#l14.1405"></a><span id="l14.1405" class="difflineplus">+      LIBS=$unforce</span>
<a href="#l14.1406"></a><span id="l14.1406" class="difflineplus">+      AC_TRY_LINK(,, ac_cv_mkshlib_force_and_unforce=$line; break)</span>
<a href="#l14.1407"></a><span id="l14.1407" class="difflineplus">+    done</span>
<a href="#l14.1408"></a><span id="l14.1408" class="difflineplus">+    exec 0&lt;&amp;3 3&lt;&amp;-</span>
<a href="#l14.1409"></a><span id="l14.1409" class="difflineplus">+    LDFLAGS=$_SAVE_LDFLAGS; LIBS=$_SAVE_LIBS</span>
<a href="#l14.1410"></a><span id="l14.1410" class="difflineplus">+   ])</span>
<a href="#l14.1411"></a><span id="l14.1411" class="difflineplus">+  if test &quot;$ac_cv_mkshlib_force_and_unforce&quot; = &quot;no&quot;; then</span>
<a href="#l14.1412"></a><span id="l14.1412" class="difflineplus">+    AC_MSG_RESULT(no)</span>
<a href="#l14.1413"></a><span id="l14.1413" class="difflineplus">+  else</span>
<a href="#l14.1414"></a><span id="l14.1414" class="difflineplus">+    AC_MSG_RESULT(yes)</span>
<a href="#l14.1415"></a><span id="l14.1415" class="difflineplus">+    eval $ac_cv_mkshlib_force_and_unforce</span>
<a href="#l14.1416"></a><span id="l14.1416" class="difflineplus">+    MKSHLIB_FORCE_ALL=$force</span>
<a href="#l14.1417"></a><span id="l14.1417" class="difflineplus">+    MKSHLIB_UNFORCE_ALL=$unforce</span>
<a href="#l14.1418"></a><span id="l14.1418" class="difflineplus">+  fi</span>
<a href="#l14.1419"></a><span id="l14.1419" class="difflineplus">+fi # GNU_CC</span>
<a href="#l14.1420"></a><span id="l14.1420" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.1421"></a><span id="l14.1421" class="difflineplus">+</span>
<a href="#l14.1422"></a><span id="l14.1422" class="difflineplus">+dnl =================================================================</span>
<a href="#l14.1423"></a><span id="l14.1423" class="difflineplus">+dnl Set up and test static assertion macros used to avoid AC_TRY_RUN,</span>
<a href="#l14.1424"></a><span id="l14.1424" class="difflineplus">+dnl which is bad when cross compiling.</span>
<a href="#l14.1425"></a><span id="l14.1425" class="difflineplus">+dnl =================================================================</span>
<a href="#l14.1426"></a><span id="l14.1426" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.1427"></a><span id="l14.1427" class="difflineplus">+configure_static_assert_macros='</span>
<a href="#l14.1428"></a><span id="l14.1428" class="difflineplus">+#define CONFIGURE_STATIC_ASSERT(condition) CONFIGURE_STATIC_ASSERT_IMPL(condition, __LINE__)</span>
<a href="#l14.1429"></a><span id="l14.1429" class="difflineplus">+#define CONFIGURE_STATIC_ASSERT_IMPL(condition, line) CONFIGURE_STATIC_ASSERT_IMPL2(condition, line)</span>
<a href="#l14.1430"></a><span id="l14.1430" class="difflineplus">+#define CONFIGURE_STATIC_ASSERT_IMPL2(condition, line) typedef int static_assert_line_##line[(condition) ? 1 : -1]</span>
<a href="#l14.1431"></a><span id="l14.1431" class="difflineplus">+'</span>
<a href="#l14.1432"></a><span id="l14.1432" class="difflineplus">+</span>
<a href="#l14.1433"></a><span id="l14.1433" class="difflineplus">+dnl test that the macros actually work:</span>
<a href="#l14.1434"></a><span id="l14.1434" class="difflineplus">+AC_MSG_CHECKING(that static assertion macros used in autoconf tests work)</span>
<a href="#l14.1435"></a><span id="l14.1435" class="difflineplus">+AC_CACHE_VAL(ac_cv_static_assertion_macros_work,</span>
<a href="#l14.1436"></a><span id="l14.1436" class="difflineplus">+ [AC_LANG_SAVE</span>
<a href="#l14.1437"></a><span id="l14.1437" class="difflineplus">+  AC_LANG_C</span>
<a href="#l14.1438"></a><span id="l14.1438" class="difflineplus">+  ac_cv_static_assertion_macros_work=&quot;yes&quot;</span>
<a href="#l14.1439"></a><span id="l14.1439" class="difflineplus">+  AC_TRY_COMPILE([$configure_static_assert_macros],</span>
<a href="#l14.1440"></a><span id="l14.1440" class="difflineplus">+                 [CONFIGURE_STATIC_ASSERT(1)],</span>
<a href="#l14.1441"></a><span id="l14.1441" class="difflineplus">+                 ,</span>
<a href="#l14.1442"></a><span id="l14.1442" class="difflineplus">+                 ac_cv_static_assertion_macros_work=&quot;no&quot;)</span>
<a href="#l14.1443"></a><span id="l14.1443" class="difflineplus">+  AC_TRY_COMPILE([$configure_static_assert_macros],</span>
<a href="#l14.1444"></a><span id="l14.1444" class="difflineplus">+                 [CONFIGURE_STATIC_ASSERT(0)],</span>
<a href="#l14.1445"></a><span id="l14.1445" class="difflineplus">+                 ac_cv_static_assertion_macros_work=&quot;no&quot;,</span>
<a href="#l14.1446"></a><span id="l14.1446" class="difflineplus">+                 )</span>
<a href="#l14.1447"></a><span id="l14.1447" class="difflineplus">+  AC_LANG_CPLUSPLUS</span>
<a href="#l14.1448"></a><span id="l14.1448" class="difflineplus">+  AC_TRY_COMPILE([$configure_static_assert_macros],</span>
<a href="#l14.1449"></a><span id="l14.1449" class="difflineplus">+                 [CONFIGURE_STATIC_ASSERT(1)],</span>
<a href="#l14.1450"></a><span id="l14.1450" class="difflineplus">+                 ,</span>
<a href="#l14.1451"></a><span id="l14.1451" class="difflineplus">+                 ac_cv_static_assertion_macros_work=&quot;no&quot;)</span>
<a href="#l14.1452"></a><span id="l14.1452" class="difflineplus">+  AC_TRY_COMPILE([$configure_static_assert_macros],</span>
<a href="#l14.1453"></a><span id="l14.1453" class="difflineplus">+                 [CONFIGURE_STATIC_ASSERT(0)],</span>
<a href="#l14.1454"></a><span id="l14.1454" class="difflineplus">+                 ac_cv_static_assertion_macros_work=&quot;no&quot;,</span>
<a href="#l14.1455"></a><span id="l14.1455" class="difflineplus">+                 )</span>
<a href="#l14.1456"></a><span id="l14.1456" class="difflineplus">+  AC_LANG_RESTORE</span>
<a href="#l14.1457"></a><span id="l14.1457" class="difflineplus">+ ])</span>
<a href="#l14.1458"></a><span id="l14.1458" class="difflineplus">+AC_MSG_RESULT(&quot;$ac_cv_static_assertion_macros_work&quot;)</span>
<a href="#l14.1459"></a><span id="l14.1459" class="difflineplus">+if test &quot;$ac_cv_static_assertion_macros_work&quot; = &quot;no&quot;; then</span>
<a href="#l14.1460"></a><span id="l14.1460" class="difflineplus">+    AC_MSG_ERROR([Compiler cannot compile macros used in autoconf tests.])</span>
<a href="#l14.1461"></a><span id="l14.1461" class="difflineplus">+fi</span>
<a href="#l14.1462"></a><span id="l14.1462" class="difflineplus">+</span>
<a href="#l14.1463"></a><span id="l14.1463" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.1464"></a><span id="l14.1464" class="difflineplus">+</span>
<a href="#l14.1465"></a><span id="l14.1465" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1466"></a><span id="l14.1466" class="difflineplus">+dnl Checking for 64-bit OS</span>
<a href="#l14.1467"></a><span id="l14.1467" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1468"></a><span id="l14.1468" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.1469"></a><span id="l14.1469" class="difflineplus">+AC_LANG_SAVE</span>
<a href="#l14.1470"></a><span id="l14.1470" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.1471"></a><span id="l14.1471" class="difflineplus">+AC_MSG_CHECKING(for 64-bit OS)</span>
<a href="#l14.1472"></a><span id="l14.1472" class="difflineplus">+AC_TRY_COMPILE([$configure_static_assert_macros],</span>
<a href="#l14.1473"></a><span id="l14.1473" class="difflineplus">+               [CONFIGURE_STATIC_ASSERT(sizeof(long) == 8)],</span>
<a href="#l14.1474"></a><span id="l14.1474" class="difflineplus">+               result=&quot;yes&quot;, result=&quot;no&quot;)</span>
<a href="#l14.1475"></a><span id="l14.1475" class="difflineplus">+AC_MSG_RESULT(&quot;$result&quot;)</span>
<a href="#l14.1476"></a><span id="l14.1476" class="difflineplus">+if test &quot;$result&quot; = &quot;yes&quot;; then</span>
<a href="#l14.1477"></a><span id="l14.1477" class="difflineplus">+    AC_DEFINE(HAVE_64BIT_OS)</span>
<a href="#l14.1478"></a><span id="l14.1478" class="difflineplus">+    HAVE_64BIT_OS=1</span>
<a href="#l14.1479"></a><span id="l14.1479" class="difflineplus">+fi</span>
<a href="#l14.1480"></a><span id="l14.1480" class="difflineplus">+AC_SUBST(HAVE_64BIT_OS)</span>
<a href="#l14.1481"></a><span id="l14.1481" class="difflineplus">+AC_LANG_RESTORE</span>
<a href="#l14.1482"></a><span id="l14.1482" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.1483"></a><span id="l14.1483" class="difflineplus">+</span>
<a href="#l14.1484"></a><span id="l14.1484" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1485"></a><span id="l14.1485" class="difflineplus">+dnl Enable high-memory support on OS/2 by default.</span>
<a href="#l14.1486"></a><span id="l14.1486" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1487"></a><span id="l14.1487" class="difflineplus">+MOZ_OS2_HIGH_MEMORY=1</span>
<a href="#l14.1488"></a><span id="l14.1488" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(os2-high-mem,</span>
<a href="#l14.1489"></a><span id="l14.1489" class="difflineplus">+[  --disable-os2-high-mem  Disable high-memory support on OS/2],</span>
<a href="#l14.1490"></a><span id="l14.1490" class="difflineplus">+    MOZ_OS2_HIGH_MEMORY=,</span>
<a href="#l14.1491"></a><span id="l14.1491" class="difflineplus">+    MOZ_OS2_HIGH_MEMORY=1 )</span>
<a href="#l14.1492"></a><span id="l14.1492" class="difflineplus">+AC_SUBST(MOZ_OS2_HIGH_MEMORY)</span>
<a href="#l14.1493"></a><span id="l14.1493" class="difflineplus">+</span>
<a href="#l14.1494"></a><span id="l14.1494" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1495"></a><span id="l14.1495" class="difflineplus">+dnl System overrides of the defaults for host</span>
<a href="#l14.1496"></a><span id="l14.1496" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1497"></a><span id="l14.1497" class="difflineplus">+case &quot;$host&quot; in</span>
<a href="#l14.1498"></a><span id="l14.1498" class="difflineplus">+*-beos*)</span>
<a href="#l14.1499"></a><span id="l14.1499" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_BEOS -DBeOS -DBEOS -D_POSIX_SOURCE -DNO_X11&quot;</span>
<a href="#l14.1500"></a><span id="l14.1500" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_beos.cfg\&quot;'</span>
<a href="#l14.1501"></a><span id="l14.1501" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O3}&quot;</span>
<a href="#l14.1502"></a><span id="l14.1502" class="difflineplus">+    ;;</span>
<a href="#l14.1503"></a><span id="l14.1503" class="difflineplus">+</span>
<a href="#l14.1504"></a><span id="l14.1504" class="difflineplus">+*cygwin*|*mingw*|*mks*|*msvc*|*wince)</span>
<a href="#l14.1505"></a><span id="l14.1505" class="difflineplus">+    if test -n &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l14.1506"></a><span id="l14.1506" class="difflineplus">+        HOST_AR=lib</span>
<a href="#l14.1507"></a><span id="l14.1507" class="difflineplus">+        HOST_AR_FLAGS='-NOLOGO -OUT:&quot;$@&quot;'</span>
<a href="#l14.1508"></a><span id="l14.1508" class="difflineplus">+        HOST_CFLAGS=&quot;$HOST_CFLAGS -TC -nologo -Fd\$(HOST_PDBFILE)&quot;</span>
<a href="#l14.1509"></a><span id="l14.1509" class="difflineplus">+        HOST_RANLIB='echo ranlib'</span>
<a href="#l14.1510"></a><span id="l14.1510" class="difflineplus">+    else</span>
<a href="#l14.1511"></a><span id="l14.1511" class="difflineplus">+        HOST_CFLAGS=&quot;$HOST_CFLAGS -mno-cygwin&quot;</span>
<a href="#l14.1512"></a><span id="l14.1512" class="difflineplus">+    fi</span>
<a href="#l14.1513"></a><span id="l14.1513" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_WIN32 -DXP_WIN -DWIN32 -D_WIN32 -DNO_X11&quot;</span>
<a href="#l14.1514"></a><span id="l14.1514" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_winnt.cfg\&quot;'</span>
<a href="#l14.1515"></a><span id="l14.1515" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O2}&quot;</span>
<a href="#l14.1516"></a><span id="l14.1516" class="difflineplus">+    HOST_BIN_SUFFIX=.exe</span>
<a href="#l14.1517"></a><span id="l14.1517" class="difflineplus">+    case &quot;$host&quot; in</span>
<a href="#l14.1518"></a><span id="l14.1518" class="difflineplus">+    *mingw*)</span>
<a href="#l14.1519"></a><span id="l14.1519" class="difflineplus">+    dnl MinGW/MSYS does not need CYGWIN_WRAPPER</span>
<a href="#l14.1520"></a><span id="l14.1520" class="difflineplus">+        ;;</span>
<a href="#l14.1521"></a><span id="l14.1521" class="difflineplus">+    *)</span>
<a href="#l14.1522"></a><span id="l14.1522" class="difflineplus">+        CYGWIN_WRAPPER=&quot;${srcdir}/build/cygwin-wrapper&quot;</span>
<a href="#l14.1523"></a><span id="l14.1523" class="difflineplus">+        if test &quot;`echo ${srcdir} | grep -c ^/ 2&gt;/dev/null`&quot; = 0; then</span>
<a href="#l14.1524"></a><span id="l14.1524" class="difflineplus">+            _pwd=`pwd`</span>
<a href="#l14.1525"></a><span id="l14.1525" class="difflineplus">+            CYGWIN_WRAPPER=&quot;${_pwd}/${srcdir}/build/cygwin-wrapper&quot;</span>
<a href="#l14.1526"></a><span id="l14.1526" class="difflineplus">+        fi</span>
<a href="#l14.1527"></a><span id="l14.1527" class="difflineplus">+        if test &quot;`${PERL} -v | grep -c cygwin  2&gt;/dev/null`&quot; = 0; then</span>
<a href="#l14.1528"></a><span id="l14.1528" class="difflineplus">+            AS_PERL=1</span>
<a href="#l14.1529"></a><span id="l14.1529" class="difflineplus">+            PERL=&quot;${CYGWIN_WRAPPER} $PERL&quot;</span>
<a href="#l14.1530"></a><span id="l14.1530" class="difflineplus">+        fi</span>
<a href="#l14.1531"></a><span id="l14.1531" class="difflineplus">+</span>
<a href="#l14.1532"></a><span id="l14.1532" class="difflineplus">+        if test &quot;`${PYTHON} -c 'import sys; print sys.platform;'`&quot; != &quot;cygwin&quot;; then</span>
<a href="#l14.1533"></a><span id="l14.1533" class="difflineplus">+            PYTHON=&quot;${CYGWIN_WRAPPER} $PYTHON&quot;</span>
<a href="#l14.1534"></a><span id="l14.1534" class="difflineplus">+        fi</span>
<a href="#l14.1535"></a><span id="l14.1535" class="difflineplus">+        ;;</span>
<a href="#l14.1536"></a><span id="l14.1536" class="difflineplus">+    esac</span>
<a href="#l14.1537"></a><span id="l14.1537" class="difflineplus">+    ;;</span>
<a href="#l14.1538"></a><span id="l14.1538" class="difflineplus">+</span>
<a href="#l14.1539"></a><span id="l14.1539" class="difflineplus">+*-darwin*)</span>
<a href="#l14.1540"></a><span id="l14.1540" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_UNIX -DXP_MACOSX -DNO_X11&quot;</span>
<a href="#l14.1541"></a><span id="l14.1541" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_darwin.cfg\&quot;'</span>
<a href="#l14.1542"></a><span id="l14.1542" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O3}&quot;</span>
<a href="#l14.1543"></a><span id="l14.1543" class="difflineplus">+    MOZ_FIX_LINK_PATHS='-Wl,-executable_path,$(LIBXUL_DIST)/bin'</span>
<a href="#l14.1544"></a><span id="l14.1544" class="difflineplus">+    LIBXUL_LIBS='$(XPCOM_FROZEN_LDOPTS) $(LIBXUL_DIST)/bin/XUL -lobjc'</span>
<a href="#l14.1545"></a><span id="l14.1545" class="difflineplus">+    ;;</span>
<a href="#l14.1546"></a><span id="l14.1546" class="difflineplus">+</span>
<a href="#l14.1547"></a><span id="l14.1547" class="difflineplus">+*-linux*|*-kfreebsd*-gnu)</span>
<a href="#l14.1548"></a><span id="l14.1548" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_UNIX&quot;</span>
<a href="#l14.1549"></a><span id="l14.1549" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_linux.cfg\&quot;'</span>
<a href="#l14.1550"></a><span id="l14.1550" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O3}&quot;</span>
<a href="#l14.1551"></a><span id="l14.1551" class="difflineplus">+    ;;</span>
<a href="#l14.1552"></a><span id="l14.1552" class="difflineplus">+</span>
<a href="#l14.1553"></a><span id="l14.1553" class="difflineplus">+*os2*)</span>
<a href="#l14.1554"></a><span id="l14.1554" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_OS2 -DNO_X11 -Zomf&quot;</span>
<a href="#l14.1555"></a><span id="l14.1555" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_os2.cfg\&quot;'</span>
<a href="#l14.1556"></a><span id="l14.1556" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O2}&quot;</span>
<a href="#l14.1557"></a><span id="l14.1557" class="difflineplus">+    HOST_BIN_SUFFIX=.exe</span>
<a href="#l14.1558"></a><span id="l14.1558" class="difflineplus">+    MOZ_FIX_LINK_PATHS=</span>
<a href="#l14.1559"></a><span id="l14.1559" class="difflineplus">+    ;;</span>
<a href="#l14.1560"></a><span id="l14.1560" class="difflineplus">+</span>
<a href="#l14.1561"></a><span id="l14.1561" class="difflineplus">+*-osf*)</span>
<a href="#l14.1562"></a><span id="l14.1562" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_UNIX&quot;</span>
<a href="#l14.1563"></a><span id="l14.1563" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_osf1.cfg\&quot;'</span>
<a href="#l14.1564"></a><span id="l14.1564" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O2}&quot;</span>
<a href="#l14.1565"></a><span id="l14.1565" class="difflineplus">+    ;;</span>
<a href="#l14.1566"></a><span id="l14.1566" class="difflineplus">+</span>
<a href="#l14.1567"></a><span id="l14.1567" class="difflineplus">+*)</span>
<a href="#l14.1568"></a><span id="l14.1568" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_UNIX&quot;</span>
<a href="#l14.1569"></a><span id="l14.1569" class="difflineplus">+    HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O2}&quot;</span>
<a href="#l14.1570"></a><span id="l14.1570" class="difflineplus">+    ;;</span>
<a href="#l14.1571"></a><span id="l14.1571" class="difflineplus">+esac</span>
<a href="#l14.1572"></a><span id="l14.1572" class="difflineplus">+</span>
<a href="#l14.1573"></a><span id="l14.1573" class="difflineplus">+dnl Get mozilla version from central milestone file</span>
<a href="#l14.1574"></a><span id="l14.1574" class="difflineplus">+MOZILLA_VERSION=`$PERL $MOZILLA_SRCDIR/config/milestone.pl -topsrcdir $MOZILLA_SRCDIR`</span>
<a href="#l14.1575"></a><span id="l14.1575" class="difflineplus">+</span>
<a href="#l14.1576"></a><span id="l14.1576" class="difflineplus">+dnl Get version of various core apps from the version files.</span>
<a href="#l14.1577"></a><span id="l14.1577" class="difflineplus">+THUNDERBIRD_VERSION=`cat $topsrcdir/mail/config/version.txt`</span>
<a href="#l14.1578"></a><span id="l14.1578" class="difflineplus">+SUNBIRD_VERSION=`cat $topsrcdir/calendar/sunbird/config/version.txt`</span>
<a href="#l14.1579"></a><span id="l14.1579" class="difflineplus">+SEAMONKEY_VERSION=`cat $topsrcdir/suite/config/version.txt`</span>
<a href="#l14.1580"></a><span id="l14.1580" class="difflineplus">+</span>
<a href="#l14.1581"></a><span id="l14.1581" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZILLA_VERSION,&quot;$MOZILLA_VERSION&quot;)</span>
<a href="#l14.1582"></a><span id="l14.1582" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZILLA_VERSION_U,$MOZILLA_VERSION)</span>
<a href="#l14.1583"></a><span id="l14.1583" class="difflineplus">+</span>
<a href="#l14.1584"></a><span id="l14.1584" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1585"></a><span id="l14.1585" class="difflineplus">+dnl System overrides of the defaults for target</span>
<a href="#l14.1586"></a><span id="l14.1586" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.1587"></a><span id="l14.1587" class="difflineplus">+</span>
<a href="#l14.1588"></a><span id="l14.1588" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.1589"></a><span id="l14.1589" class="difflineplus">+*-aix*)</span>
<a href="#l14.1590"></a><span id="l14.1590" class="difflineplus">+    AC_DEFINE(AIX)</span>
<a href="#l14.1591"></a><span id="l14.1591" class="difflineplus">+    if test ! &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1592"></a><span id="l14.1592" class="difflineplus">+        if test ! &quot;$HAVE_64BIT_OS&quot;; then</span>
<a href="#l14.1593"></a><span id="l14.1593" class="difflineplus">+            # Compiling with Visual Age C++ object model compat is the</span>
<a href="#l14.1594"></a><span id="l14.1594" class="difflineplus">+            # default. To compile with object model ibm, add </span>
<a href="#l14.1595"></a><span id="l14.1595" class="difflineplus">+            # AIX_OBJMODEL=ibm to .mozconfig.</span>
<a href="#l14.1596"></a><span id="l14.1596" class="difflineplus">+            if test &quot;$AIX_OBJMODEL&quot; = &quot;ibm&quot;; then</span>
<a href="#l14.1597"></a><span id="l14.1597" class="difflineplus">+                CXXFLAGS=&quot;$CXXFLAGS -qobjmodel=ibm&quot;</span>
<a href="#l14.1598"></a><span id="l14.1598" class="difflineplus">+            else</span>
<a href="#l14.1599"></a><span id="l14.1599" class="difflineplus">+                AIX_OBJMODEL=compat</span>
<a href="#l14.1600"></a><span id="l14.1600" class="difflineplus">+            fi</span>
<a href="#l14.1601"></a><span id="l14.1601" class="difflineplus">+        else</span>
<a href="#l14.1602"></a><span id="l14.1602" class="difflineplus">+            AIX_OBJMODEL=compat</span>
<a href="#l14.1603"></a><span id="l14.1603" class="difflineplus">+        fi</span>
<a href="#l14.1604"></a><span id="l14.1604" class="difflineplus">+        AC_SUBST(AIX_OBJMODEL)</span>
<a href="#l14.1605"></a><span id="l14.1605" class="difflineplus">+        DSO_LDOPTS='-qmkshrobj=1'</span>
<a href="#l14.1606"></a><span id="l14.1606" class="difflineplus">+        DSO_CFLAGS='-qflag=w:w'</span>
<a href="#l14.1607"></a><span id="l14.1607" class="difflineplus">+        DSO_PIC_CFLAGS=</span>
<a href="#l14.1608"></a><span id="l14.1608" class="difflineplus">+        LDFLAGS=&quot;$LDFLAGS -Wl,-brtl -blibpath:/usr/lib:/lib&quot;</span>
<a href="#l14.1609"></a><span id="l14.1609" class="difflineplus">+        AC_MSG_WARN([Clearing MOZ_FIX_LINK_PATHS till we can fix bug 332075.])</span>
<a href="#l14.1610"></a><span id="l14.1610" class="difflineplus">+        MOZ_FIX_LINK_PATHS=</span>
<a href="#l14.1611"></a><span id="l14.1611" class="difflineplus">+        MKSHLIB='$(CXX) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1612"></a><span id="l14.1612" class="difflineplus">+        MKCSHLIB='$(CC) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1613"></a><span id="l14.1613" class="difflineplus">+        if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.1614"></a><span id="l14.1614" class="difflineplus">+            AC_LANG_SAVE</span>
<a href="#l14.1615"></a><span id="l14.1615" class="difflineplus">+            AC_LANG_CPLUSPLUS</span>
<a href="#l14.1616"></a><span id="l14.1616" class="difflineplus">+            AC_MSG_CHECKING([for VisualAge C++ compiler version &gt;= 5.0.2.0])</span>
<a href="#l14.1617"></a><span id="l14.1617" class="difflineplus">+            AC_TRY_COMPILE([],</span>
<a href="#l14.1618"></a><span id="l14.1618" class="difflineplus">+                [#if (__IBMCPP__ &lt; 502)</span>
<a href="#l14.1619"></a><span id="l14.1619" class="difflineplus">+                 #error &quot;Bad compiler&quot;</span>
<a href="#l14.1620"></a><span id="l14.1620" class="difflineplus">+                 #endif],</span>
<a href="#l14.1621"></a><span id="l14.1621" class="difflineplus">+                _BAD_COMPILER=,_BAD_COMPILER=1)</span>
<a href="#l14.1622"></a><span id="l14.1622" class="difflineplus">+            if test -n &quot;$_BAD_COMPILER&quot;; then</span>
<a href="#l14.1623"></a><span id="l14.1623" class="difflineplus">+                AC_MSG_RESULT([no])    </span>
<a href="#l14.1624"></a><span id="l14.1624" class="difflineplus">+                AC_MSG_ERROR([VisualAge C++ version 5.0.2.0 or higher is required to build.])</span>
<a href="#l14.1625"></a><span id="l14.1625" class="difflineplus">+            else</span>
<a href="#l14.1626"></a><span id="l14.1626" class="difflineplus">+                AC_MSG_RESULT([yes])    </span>
<a href="#l14.1627"></a><span id="l14.1627" class="difflineplus">+            fi</span>
<a href="#l14.1628"></a><span id="l14.1628" class="difflineplus">+            AC_LANG_RESTORE</span>
<a href="#l14.1629"></a><span id="l14.1629" class="difflineplus">+            TARGET_COMPILER_ABI=&quot;ibmc&quot;</span>
<a href="#l14.1630"></a><span id="l14.1630" class="difflineplus">+            CC_VERSION=`lslpp -Lcq vac.C 2&gt;/dev/null | awk -F: '{ print $3 }'`</span>
<a href="#l14.1631"></a><span id="l14.1631" class="difflineplus">+            CXX_VERSION=`lslpp -Lcq vacpp.cmp.core 2&gt;/dev/null | awk -F: '{ print $3 }'`</span>
<a href="#l14.1632"></a><span id="l14.1632" class="difflineplus">+        fi</span>
<a href="#l14.1633"></a><span id="l14.1633" class="difflineplus">+    fi</span>
<a href="#l14.1634"></a><span id="l14.1634" class="difflineplus">+    case &quot;${target_os}&quot; in</span>
<a href="#l14.1635"></a><span id="l14.1635" class="difflineplus">+    aix4.1*)</span>
<a href="#l14.1636"></a><span id="l14.1636" class="difflineplus">+        DLL_SUFFIX='_shr.a'</span>
<a href="#l14.1637"></a><span id="l14.1637" class="difflineplus">+        ;;</span>
<a href="#l14.1638"></a><span id="l14.1638" class="difflineplus">+    esac</span>
<a href="#l14.1639"></a><span id="l14.1639" class="difflineplus">+    if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.1640"></a><span id="l14.1640" class="difflineplus">+        AC_CHECK_HEADERS(sys/inttypes.h)</span>
<a href="#l14.1641"></a><span id="l14.1641" class="difflineplus">+    fi</span>
<a href="#l14.1642"></a><span id="l14.1642" class="difflineplus">+    AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.1643"></a><span id="l14.1643" class="difflineplus">+    ;;</span>
<a href="#l14.1644"></a><span id="l14.1644" class="difflineplus">+</span>
<a href="#l14.1645"></a><span id="l14.1645" class="difflineplus">+*-beos*)</span>
<a href="#l14.1646"></a><span id="l14.1646" class="difflineplus">+    no_x=yes</span>
<a href="#l14.1647"></a><span id="l14.1647" class="difflineplus">+    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_LDOPTS) -Wl,-h,$@ -o $@'</span>
<a href="#l14.1648"></a><span id="l14.1648" class="difflineplus">+    _PLATFORM_DEFAULT_TOOLKIT=&quot;cairo-beos&quot;</span>
<a href="#l14.1649"></a><span id="l14.1649" class="difflineplus">+    DSO_LDOPTS='-nostart'</span>
<a href="#l14.1650"></a><span id="l14.1650" class="difflineplus">+    TK_LIBS='-lbe -lroot'</span>
<a href="#l14.1651"></a><span id="l14.1651" class="difflineplus">+    LIBS=&quot;$LIBS -lbe&quot;</span>
<a href="#l14.1652"></a><span id="l14.1652" class="difflineplus">+    if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.1653"></a><span id="l14.1653" class="difflineplus">+        AC_CHECK_LIB(bind,main,LIBS=&quot;$LIBS -lbind&quot;)</span>
<a href="#l14.1654"></a><span id="l14.1654" class="difflineplus">+        AC_CHECK_LIB(zeta,main,LIBS=&quot;$LIBS -lzeta&quot;)</span>
<a href="#l14.1655"></a><span id="l14.1655" class="difflineplus">+    fi</span>
<a href="#l14.1656"></a><span id="l14.1656" class="difflineplus">+    _WARNINGS_CFLAGS=&quot;${_WARNINGS_CFLAGS} -Wno-multichar&quot;</span>
<a href="#l14.1657"></a><span id="l14.1657" class="difflineplus">+    _WARNINGS_CXXFLAGS=&quot;${_WARNINGS_CXXFLAGS} -Wno-multichar&quot;</span>
<a href="#l14.1658"></a><span id="l14.1658" class="difflineplus">+    _MOZ_USE_RTTI=1</span>
<a href="#l14.1659"></a><span id="l14.1659" class="difflineplus">+    USE_DEPENDENT_LIBS=</span>
<a href="#l14.1660"></a><span id="l14.1660" class="difflineplus">+    MOZ_USER_DIR=&quot;Mozilla&quot;</span>
<a href="#l14.1661"></a><span id="l14.1661" class="difflineplus">+    ;;</span>
<a href="#l14.1662"></a><span id="l14.1662" class="difflineplus">+</span>
<a href="#l14.1663"></a><span id="l14.1663" class="difflineplus">+*-bsdi*)</span>
<a href="#l14.1664"></a><span id="l14.1664" class="difflineplus">+    dnl -pedantic doesn't play well with BSDI's _very_ modified gcc (shlicc2)</span>
<a href="#l14.1665"></a><span id="l14.1665" class="difflineplus">+    _PEDANTIC=</span>
<a href="#l14.1666"></a><span id="l14.1666" class="difflineplus">+    _IGNORE_LONG_LONG_WARNINGS=</span>
<a href="#l14.1667"></a><span id="l14.1667" class="difflineplus">+    case $OS_RELEASE in</span>
<a href="#l14.1668"></a><span id="l14.1668" class="difflineplus">+	4.*|5.*)</span>
<a href="#l14.1669"></a><span id="l14.1669" class="difflineplus">+            STRIP=&quot;$STRIP -d&quot;</span>
<a href="#l14.1670"></a><span id="l14.1670" class="difflineplus">+            ;;</span>
<a href="#l14.1671"></a><span id="l14.1671" class="difflineplus">+	*)</span>
<a href="#l14.1672"></a><span id="l14.1672" class="difflineplus">+	    DSO_CFLAGS=''</span>
<a href="#l14.1673"></a><span id="l14.1673" class="difflineplus">+	    DSO_LDOPTS='-r'</span>
<a href="#l14.1674"></a><span id="l14.1674" class="difflineplus">+	    _WARNINGS_CFLAGS=&quot;-Wall&quot;</span>
<a href="#l14.1675"></a><span id="l14.1675" class="difflineplus">+	    _WARNINGS_CXXFLAGS=&quot;-Wall&quot;</span>
<a href="#l14.1676"></a><span id="l14.1676" class="difflineplus">+	    # The test above doesn't work properly, at least on 3.1.</span>
<a href="#l14.1677"></a><span id="l14.1677" class="difflineplus">+	    MKSHLIB_FORCE_ALL=''</span>
<a href="#l14.1678"></a><span id="l14.1678" class="difflineplus">+	    MKSHLIB_UNFORCE_ALL=''</span>
<a href="#l14.1679"></a><span id="l14.1679" class="difflineplus">+	;;</span>
<a href="#l14.1680"></a><span id="l14.1680" class="difflineplus">+    esac</span>
<a href="#l14.1681"></a><span id="l14.1681" class="difflineplus">+    ;;</span>
<a href="#l14.1682"></a><span id="l14.1682" class="difflineplus">+</span>
<a href="#l14.1683"></a><span id="l14.1683" class="difflineplus">+*-darwin*) </span>
<a href="#l14.1684"></a><span id="l14.1684" class="difflineplus">+    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1685"></a><span id="l14.1685" class="difflineplus">+    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1686"></a><span id="l14.1686" class="difflineplus">+    MOZ_OPTIMIZE_FLAGS=&quot;-O2&quot;</span>
<a href="#l14.1687"></a><span id="l14.1687" class="difflineplus">+    _PEDANTIC=</span>
<a href="#l14.1688"></a><span id="l14.1688" class="difflineplus">+    CFLAGS=&quot;$CFLAGS -fpascal-strings -fno-common&quot;</span>
<a href="#l14.1689"></a><span id="l14.1689" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -fpascal-strings -fno-common&quot;</span>
<a href="#l14.1690"></a><span id="l14.1690" class="difflineplus">+    DLL_SUFFIX=&quot;.dylib&quot;</span>
<a href="#l14.1691"></a><span id="l14.1691" class="difflineplus">+    DSO_LDOPTS=''</span>
<a href="#l14.1692"></a><span id="l14.1692" class="difflineplus">+    STRIP=&quot;$STRIP -x -S&quot;</span>
<a href="#l14.1693"></a><span id="l14.1693" class="difflineplus">+    _PLATFORM_DEFAULT_TOOLKIT='cairo-cocoa'</span>
<a href="#l14.1694"></a><span id="l14.1694" class="difflineplus">+    MOZ_ENABLE_POSTSCRIPT=</span>
<a href="#l14.1695"></a><span id="l14.1695" class="difflineplus">+    TARGET_NSPR_MDCPUCFG='\&quot;md/_darwin.cfg\&quot;'</span>
<a href="#l14.1696"></a><span id="l14.1696" class="difflineplus">+    LDFLAGS=&quot;$LDFLAGS -framework Cocoa&quot;</span>
<a href="#l14.1697"></a><span id="l14.1697" class="difflineplus">+    # The ExceptionHandling framework is needed for Objective-C exception</span>
<a href="#l14.1698"></a><span id="l14.1698" class="difflineplus">+    # logging code in nsObjCExceptions.h. Currently we only use that in debug</span>
<a href="#l14.1699"></a><span id="l14.1699" class="difflineplus">+    # builds.</span>
<a href="#l14.1700"></a><span id="l14.1700" class="difflineplus">+    MOZ_DEBUG_LDFLAGS=&quot;$MOZ_DEBUG_LDFLAGS -framework ExceptionHandling&quot;</span>
<a href="#l14.1701"></a><span id="l14.1701" class="difflineplus">+    # set MACOSX to generate lib/mac/MoreFiles/Makefile</span>
<a href="#l14.1702"></a><span id="l14.1702" class="difflineplus">+    MACOSX=1</span>
<a href="#l14.1703"></a><span id="l14.1703" class="difflineplus">+</span>
<a href="#l14.1704"></a><span id="l14.1704" class="difflineplus">+    dnl DTrace and -dead_strip don't interact well. See bug 403132.</span>
<a href="#l14.1705"></a><span id="l14.1705" class="difflineplus">+    dnl ===================================================================</span>
<a href="#l14.1706"></a><span id="l14.1706" class="difflineplus">+    if test &quot;x$enable_dtrace&quot; = &quot;xyes&quot;; then</span>
<a href="#l14.1707"></a><span id="l14.1707" class="difflineplus">+        echo &quot;Skipping -dead_strip because DTrace is enabled. See bug 403132.&quot;</span>
<a href="#l14.1708"></a><span id="l14.1708" class="difflineplus">+    else</span>
<a href="#l14.1709"></a><span id="l14.1709" class="difflineplus">+        dnl check for the presence of the -dead_strip linker flag</span>
<a href="#l14.1710"></a><span id="l14.1710" class="difflineplus">+        AC_MSG_CHECKING([for -dead_strip option to ld])</span>
<a href="#l14.1711"></a><span id="l14.1711" class="difflineplus">+        _SAVE_LDFLAGS=$LDFLAGS</span>
<a href="#l14.1712"></a><span id="l14.1712" class="difflineplus">+        LDFLAGS=&quot;$LDFLAGS -Wl,-dead_strip&quot;</span>
<a href="#l14.1713"></a><span id="l14.1713" class="difflineplus">+        AC_TRY_LINK(,[return 0;],_HAVE_DEAD_STRIP=1,_HAVE_DEAD_STRIP=)</span>
<a href="#l14.1714"></a><span id="l14.1714" class="difflineplus">+        if test -n &quot;$_HAVE_DEAD_STRIP&quot; ; then</span>
<a href="#l14.1715"></a><span id="l14.1715" class="difflineplus">+            AC_MSG_RESULT([yes])</span>
<a href="#l14.1716"></a><span id="l14.1716" class="difflineplus">+            MOZ_OPTIMIZE_LDFLAGS=&quot;-Wl,-dead_strip&quot;</span>
<a href="#l14.1717"></a><span id="l14.1717" class="difflineplus">+        else</span>
<a href="#l14.1718"></a><span id="l14.1718" class="difflineplus">+            AC_MSG_RESULT([no])</span>
<a href="#l14.1719"></a><span id="l14.1719" class="difflineplus">+        fi</span>
<a href="#l14.1720"></a><span id="l14.1720" class="difflineplus">+        </span>
<a href="#l14.1721"></a><span id="l14.1721" class="difflineplus">+        LDFLAGS=$_SAVE_LDFLAGS</span>
<a href="#l14.1722"></a><span id="l14.1722" class="difflineplus">+    fi</span>
<a href="#l14.1723"></a><span id="l14.1723" class="difflineplus">+    ;;</span>
<a href="#l14.1724"></a><span id="l14.1724" class="difflineplus">+</span>
<a href="#l14.1725"></a><span id="l14.1725" class="difflineplus">+*-freebsd*)</span>
<a href="#l14.1726"></a><span id="l14.1726" class="difflineplus">+    if test `test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo elf` != &quot;elf&quot;; then</span>
<a href="#l14.1727"></a><span id="l14.1727" class="difflineplus">+	DLL_SUFFIX=&quot;.so.1.0&quot;</span>
<a href="#l14.1728"></a><span id="l14.1728" class="difflineplus">+	DSO_LDOPTS=&quot;-shared&quot;</span>
<a href="#l14.1729"></a><span id="l14.1729" class="difflineplus">+    fi</span>
<a href="#l14.1730"></a><span id="l14.1730" class="difflineplus">+    if test ! &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1731"></a><span id="l14.1731" class="difflineplus">+	DSO_LDOPTS=&quot;-Bshareable $DSO_LDOPTS&quot;</span>
<a href="#l14.1732"></a><span id="l14.1732" class="difflineplus">+    fi</span>
<a href="#l14.1733"></a><span id="l14.1733" class="difflineplus">+# Can't have force w/o an unforce.</span>
<a href="#l14.1734"></a><span id="l14.1734" class="difflineplus">+#    # Hack for FreeBSD 2.2</span>
<a href="#l14.1735"></a><span id="l14.1735" class="difflineplus">+#    if test -z &quot;$MKSHLIB_FORCE_ALL&quot;; then</span>
<a href="#l14.1736"></a><span id="l14.1736" class="difflineplus">+#	MKSHLIB_FORCE_ALL='-Wl,-Bforcearchive'</span>
<a href="#l14.1737"></a><span id="l14.1737" class="difflineplus">+#	MKSHLIB_UNFORCE_ALL=''</span>
<a href="#l14.1738"></a><span id="l14.1738" class="difflineplus">+#    fi</span>
<a href="#l14.1739"></a><span id="l14.1739" class="difflineplus">+    ;; </span>
<a href="#l14.1740"></a><span id="l14.1740" class="difflineplus">+</span>
<a href="#l14.1741"></a><span id="l14.1741" class="difflineplus">+*-hpux*)</span>
<a href="#l14.1742"></a><span id="l14.1742" class="difflineplus">+    DLL_SUFFIX=&quot;.sl&quot;</span>
<a href="#l14.1743"></a><span id="l14.1743" class="difflineplus">+    if test ! &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1744"></a><span id="l14.1744" class="difflineplus">+    	DSO_LDOPTS='-b -Wl,+s'</span>
<a href="#l14.1745"></a><span id="l14.1745" class="difflineplus">+    	DSO_CFLAGS=&quot;&quot;</span>
<a href="#l14.1746"></a><span id="l14.1746" class="difflineplus">+    	DSO_PIC_CFLAGS=&quot;+Z&quot;</span>
<a href="#l14.1747"></a><span id="l14.1747" class="difflineplus">+    	MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_LDOPTS) -L$(LIBXUL_DIST)/bin -o $@'</span>
<a href="#l14.1748"></a><span id="l14.1748" class="difflineplus">+    	MKCSHLIB='$(LD) -b +s -L$(LIBXUL_DIST)/bin -o $@'</span>
<a href="#l14.1749"></a><span id="l14.1749" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -Wc,-ansi_for_scope,on&quot;</span>
<a href="#l14.1750"></a><span id="l14.1750" class="difflineplus">+    else</span>
<a href="#l14.1751"></a><span id="l14.1751" class="difflineplus">+        DSO_LDOPTS='-b -E +s'</span>
<a href="#l14.1752"></a><span id="l14.1752" class="difflineplus">+        MKSHLIB='$(LD) $(DSO_LDOPTS) -L$(LIBXUL_DIST)/bin -L$(LIBXUL_DIST)/lib -o $@'</span>
<a href="#l14.1753"></a><span id="l14.1753" class="difflineplus">+        MKCSHLIB='$(LD) $(DSO_LDOPTS) -L$(LIBXUL_DIST)/bin -L$(LIBXUL_DIST)/lib -o $@'</span>
<a href="#l14.1754"></a><span id="l14.1754" class="difflineplus">+    fi</span>
<a href="#l14.1755"></a><span id="l14.1755" class="difflineplus">+    MOZ_POST_PROGRAM_COMMAND='chatr +s enable'</span>
<a href="#l14.1756"></a><span id="l14.1756" class="difflineplus">+    AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.1757"></a><span id="l14.1757" class="difflineplus">+    ;;</span>
<a href="#l14.1758"></a><span id="l14.1758" class="difflineplus">+</span>
<a href="#l14.1759"></a><span id="l14.1759" class="difflineplus">+*-irix5*)</span>
<a href="#l14.1760"></a><span id="l14.1760" class="difflineplus">+    AC_DEFINE(IRIX)</span>
<a href="#l14.1761"></a><span id="l14.1761" class="difflineplus">+    DSO_LDOPTS='-elf -shared'</span>
<a href="#l14.1762"></a><span id="l14.1762" class="difflineplus">+</span>
<a href="#l14.1763"></a><span id="l14.1763" class="difflineplus">+    if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1764"></a><span id="l14.1764" class="difflineplus">+       MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1765"></a><span id="l14.1765" class="difflineplus">+       MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1766"></a><span id="l14.1766" class="difflineplus">+       MKSHLIB_FORCE_ALL='-Wl,-all'</span>
<a href="#l14.1767"></a><span id="l14.1767" class="difflineplus">+       MKSHLIB_UNFORCE_ALL='-Wl,-none'</span>
<a href="#l14.1768"></a><span id="l14.1768" class="difflineplus">+       CXXFLAGS=&quot;$CXXFLAGS -D_LANGUAGE_C_PLUS_PLUS&quot;</span>
<a href="#l14.1769"></a><span id="l14.1769" class="difflineplus">+    else</span>
<a href="#l14.1770"></a><span id="l14.1770" class="difflineplus">+       MKSHLIB='$(LD) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1771"></a><span id="l14.1771" class="difflineplus">+       MKCSHLIB='$(LD) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1772"></a><span id="l14.1772" class="difflineplus">+       MKSHLIB_FORCE_ALL='-all'</span>
<a href="#l14.1773"></a><span id="l14.1773" class="difflineplus">+       MKSHLIB_UNFORCE_ALL='-none'</span>
<a href="#l14.1774"></a><span id="l14.1774" class="difflineplus">+    fi</span>
<a href="#l14.1775"></a><span id="l14.1775" class="difflineplus">+    ;;</span>
<a href="#l14.1776"></a><span id="l14.1776" class="difflineplus">+</span>
<a href="#l14.1777"></a><span id="l14.1777" class="difflineplus">+*-irix6*)</span>
<a href="#l14.1778"></a><span id="l14.1778" class="difflineplus">+    AC_DEFINE(IRIX)</span>
<a href="#l14.1779"></a><span id="l14.1779" class="difflineplus">+    dnl the irix specific xptcinvoke code is written against the n32 ABI so we *must* </span>
<a href="#l14.1780"></a><span id="l14.1780" class="difflineplus">+    dnl compile and link using -n32</span>
<a href="#l14.1781"></a><span id="l14.1781" class="difflineplus">+    USE_N32=1</span>
<a href="#l14.1782"></a><span id="l14.1782" class="difflineplus">+    TARGET_COMPILER_ABI=n32</span>
<a href="#l14.1783"></a><span id="l14.1783" class="difflineplus">+    DSO_LDOPTS='-elf -shared'</span>
<a href="#l14.1784"></a><span id="l14.1784" class="difflineplus">+    MKSHLIB='$(CCC) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1785"></a><span id="l14.1785" class="difflineplus">+    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1786"></a><span id="l14.1786" class="difflineplus">+    _MOZ_EXCEPTIONS_FLAGS_OFF=&quot;-LANG:exceptions=OFF&quot;</span>
<a href="#l14.1787"></a><span id="l14.1787" class="difflineplus">+    _MOZ_EXCEPTIONS_FLAGS_ON=&quot;-LANG:exceptions=ON&quot;</span>
<a href="#l14.1788"></a><span id="l14.1788" class="difflineplus">+    if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1789"></a><span id="l14.1789" class="difflineplus">+       MKSHLIB_FORCE_ALL='-Wl,-all'</span>
<a href="#l14.1790"></a><span id="l14.1790" class="difflineplus">+       MKSHLIB_UNFORCE_ALL='-Wl,-none'</span>
<a href="#l14.1791"></a><span id="l14.1791" class="difflineplus">+       _WARNINGS_CFLAGS=&quot;-Wall&quot;</span>
<a href="#l14.1792"></a><span id="l14.1792" class="difflineplus">+       _WARNINGS_CXXFLAGS=&quot;-Wall&quot;</span>
<a href="#l14.1793"></a><span id="l14.1793" class="difflineplus">+       CXXFLAGS=&quot;$CXXFLAGS -D_LANGUAGE_C_PLUS_PLUS&quot;</span>
<a href="#l14.1794"></a><span id="l14.1794" class="difflineplus">+    else</span>
<a href="#l14.1795"></a><span id="l14.1795" class="difflineplus">+       MKSHLIB_FORCE_ALL='-all'</span>
<a href="#l14.1796"></a><span id="l14.1796" class="difflineplus">+       MKSHLIB_UNFORCE_ALL='-none'</span>
<a href="#l14.1797"></a><span id="l14.1797" class="difflineplus">+	   AR_LIST=&quot;$AR t&quot;</span>
<a href="#l14.1798"></a><span id="l14.1798" class="difflineplus">+	   AR_EXTRACT=&quot;$AR x&quot;</span>
<a href="#l14.1799"></a><span id="l14.1799" class="difflineplus">+	   AR_DELETE=&quot;$AR d&quot;</span>
<a href="#l14.1800"></a><span id="l14.1800" class="difflineplus">+	   AR='$(CXX) -ar'</span>
<a href="#l14.1801"></a><span id="l14.1801" class="difflineplus">+	   AR_FLAGS='-o $@'</span>
<a href="#l14.1802"></a><span id="l14.1802" class="difflineplus">+       CFLAGS=&quot;$CFLAGS -woff 3262 -G 4&quot;</span>
<a href="#l14.1803"></a><span id="l14.1803" class="difflineplus">+       CXXFLAGS=&quot;$CXXFLAGS -woff 3262 -G 4&quot;</span>
<a href="#l14.1804"></a><span id="l14.1804" class="difflineplus">+       if test -n &quot;$USE_N32&quot;; then</span>
<a href="#l14.1805"></a><span id="l14.1805" class="difflineplus">+	   ASFLAGS=&quot;$ASFLAGS -n32&quot;</span>
<a href="#l14.1806"></a><span id="l14.1806" class="difflineplus">+	   CFLAGS=&quot;$CFLAGS -n32&quot;</span>
<a href="#l14.1807"></a><span id="l14.1807" class="difflineplus">+	   CXXFLAGS=&quot;$CXXFLAGS -n32&quot;</span>
<a href="#l14.1808"></a><span id="l14.1808" class="difflineplus">+	   LDFLAGS=&quot;$LDFLAGS -n32&quot;</span>
<a href="#l14.1809"></a><span id="l14.1809" class="difflineplus">+       fi</span>
<a href="#l14.1810"></a><span id="l14.1810" class="difflineplus">+       AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.1811"></a><span id="l14.1811" class="difflineplus">+       AC_MSG_WARN([Clearing MOZ_FIX_LINK_PATHS for OSF/1 as fix for bug 333545 (till the reference bug 332075 is fixed.])</span>
<a href="#l14.1812"></a><span id="l14.1812" class="difflineplus">+       MOZ_FIX_LINK_PATHS=</span>
<a href="#l14.1813"></a><span id="l14.1813" class="difflineplus">+    fi</span>
<a href="#l14.1814"></a><span id="l14.1814" class="difflineplus">+    if test -z &quot;$GNU_CXX&quot;; then</span>
<a href="#l14.1815"></a><span id="l14.1815" class="difflineplus">+      MIPSPRO_CXX=1</span>
<a href="#l14.1816"></a><span id="l14.1816" class="difflineplus">+    fi</span>
<a href="#l14.1817"></a><span id="l14.1817" class="difflineplus">+    ;;</span>
<a href="#l14.1818"></a><span id="l14.1818" class="difflineplus">+</span>
<a href="#l14.1819"></a><span id="l14.1819" class="difflineplus">+*-*linux*)</span>
<a href="#l14.1820"></a><span id="l14.1820" class="difflineplus">+    if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1821"></a><span id="l14.1821" class="difflineplus">+        GCC_VERSION=`$CC -v 2&gt;&amp;1 | awk '/^gcc version/ { print $3 }'`</span>
<a href="#l14.1822"></a><span id="l14.1822" class="difflineplus">+        case $GCC_VERSION in</span>
<a href="#l14.1823"></a><span id="l14.1823" class="difflineplus">+        4.1.*|4.2.*)</span>
<a href="#l14.1824"></a><span id="l14.1824" class="difflineplus">+            # -Os is broken on gcc 4.1.x and 4.2.x, we need to tweak it to get good results.</span>
<a href="#l14.1825"></a><span id="l14.1825" class="difflineplus">+            MOZ_OPTIMIZE_SIZE_TWEAK=&quot;-finline-limit=50&quot;</span>
<a href="#l14.1826"></a><span id="l14.1826" class="difflineplus">+        esac</span>
<a href="#l14.1827"></a><span id="l14.1827" class="difflineplus">+    fi</span>
<a href="#l14.1828"></a><span id="l14.1828" class="difflineplus">+</span>
<a href="#l14.1829"></a><span id="l14.1829" class="difflineplus">+    TARGET_NSPR_MDCPUCFG='\&quot;md/_linux.cfg\&quot;'</span>
<a href="#l14.1830"></a><span id="l14.1830" class="difflineplus">+    MOZ_OPTIMIZE_FLAGS=&quot;-Os -freorder-blocks -fno-reorder-functions $MOZ_OPTIMIZE_SIZE_TWEAK&quot;</span>
<a href="#l14.1831"></a><span id="l14.1831" class="difflineplus">+    MOZ_DEBUG_FLAGS=&quot;-g -fno-inline&quot;  # most people on linux use gcc/gdb,</span>
<a href="#l14.1832"></a><span id="l14.1832" class="difflineplus">+                                      # and that combo is not yet good at</span>
<a href="#l14.1833"></a><span id="l14.1833" class="difflineplus">+                                      # debugging inlined functions (even</span>
<a href="#l14.1834"></a><span id="l14.1834" class="difflineplus">+                                      # when using DWARF2 as the debugging</span>
<a href="#l14.1835"></a><span id="l14.1835" class="difflineplus">+                                      # format)    </span>
<a href="#l14.1836"></a><span id="l14.1836" class="difflineplus">+</span>
<a href="#l14.1837"></a><span id="l14.1837" class="difflineplus">+    MOZ_MEMORY=1</span>
<a href="#l14.1838"></a><span id="l14.1838" class="difflineplus">+</span>
<a href="#l14.1839"></a><span id="l14.1839" class="difflineplus">+    case &quot;${target_cpu}&quot; in</span>
<a href="#l14.1840"></a><span id="l14.1840" class="difflineplus">+    alpha*)</span>
<a href="#l14.1841"></a><span id="l14.1841" class="difflineplus">+    	CFLAGS=&quot;$CFLAGS -mieee&quot;</span>
<a href="#l14.1842"></a><span id="l14.1842" class="difflineplus">+    	CXXFLAGS=&quot;$CXXFLAGS -mieee&quot;</span>
<a href="#l14.1843"></a><span id="l14.1843" class="difflineplus">+    ;;</span>
<a href="#l14.1844"></a><span id="l14.1844" class="difflineplus">+    i*86)</span>
<a href="#l14.1845"></a><span id="l14.1845" class="difflineplus">+    	USE_ELF_DYNSTR_GC=1</span>
<a href="#l14.1846"></a><span id="l14.1846" class="difflineplus">+        MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS=1</span>
<a href="#l14.1847"></a><span id="l14.1847" class="difflineplus">+    ;;</span>
<a href="#l14.1848"></a><span id="l14.1848" class="difflineplus">+    mips*)</span>
<a href="#l14.1849"></a><span id="l14.1849" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -Wa,-xgot&quot;</span>
<a href="#l14.1850"></a><span id="l14.1850" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -Wa,-xgot&quot;</span>
<a href="#l14.1851"></a><span id="l14.1851" class="difflineplus">+    ;;</span>
<a href="#l14.1852"></a><span id="l14.1852" class="difflineplus">+    esac</span>
<a href="#l14.1853"></a><span id="l14.1853" class="difflineplus">+    ;;</span>
<a href="#l14.1854"></a><span id="l14.1854" class="difflineplus">+</span>
<a href="#l14.1855"></a><span id="l14.1855" class="difflineplus">+*-wince*)</span>
<a href="#l14.1856"></a><span id="l14.1856" class="difflineplus">+</span>
<a href="#l14.1857"></a><span id="l14.1857" class="difflineplus">+    MOZ_TOOLS_DIR=`echo $MOZ_TOOLS`</span>
<a href="#l14.1858"></a><span id="l14.1858" class="difflineplus">+    AR_LIST=&quot;$AR -list&quot;</span>
<a href="#l14.1859"></a><span id="l14.1859" class="difflineplus">+    AR_EXTRACT=&quot;$AR -extract&quot;</span>
<a href="#l14.1860"></a><span id="l14.1860" class="difflineplus">+    AR_DELETE=&quot;$AR d&quot;</span>
<a href="#l14.1861"></a><span id="l14.1861" class="difflineplus">+    AR_FLAGS='-OUT:&quot;$@&quot;'</span>
<a href="#l14.1862"></a><span id="l14.1862" class="difflineplus">+</span>
<a href="#l14.1863"></a><span id="l14.1863" class="difflineplus">+    DSO_CFLAGS=</span>
<a href="#l14.1864"></a><span id="l14.1864" class="difflineplus">+    DSO_PIC_CFLAGS=</span>
<a href="#l14.1865"></a><span id="l14.1865" class="difflineplus">+    DLL_SUFFIX=.dll</span>
<a href="#l14.1866"></a><span id="l14.1866" class="difflineplus">+    BIN_SUFFIX='.exe'</span>
<a href="#l14.1867"></a><span id="l14.1867" class="difflineplus">+    RC=rc.exe</span>
<a href="#l14.1868"></a><span id="l14.1868" class="difflineplus">+    # certain versions of cygwin's makedepend barf on the </span>
<a href="#l14.1869"></a><span id="l14.1869" class="difflineplus">+    # #include &lt;string&gt; vs -I./dist/include/string issue so don't use it</span>
<a href="#l14.1870"></a><span id="l14.1870" class="difflineplus">+    SYSTEM_MAKEDEPEND=</span>
<a href="#l14.1871"></a><span id="l14.1871" class="difflineplus">+</span>
<a href="#l14.1872"></a><span id="l14.1872" class="difflineplus">+    HOST_CC=cl</span>
<a href="#l14.1873"></a><span id="l14.1873" class="difflineplus">+    HOST_CXX=cl</span>
<a href="#l14.1874"></a><span id="l14.1874" class="difflineplus">+    HOST_LD=link</span>
<a href="#l14.1875"></a><span id="l14.1875" class="difflineplus">+    HOST_AR='lib -OUT:$@'</span>
<a href="#l14.1876"></a><span id="l14.1876" class="difflineplus">+    HOST_RANLIB='echo ranlib'</span>
<a href="#l14.1877"></a><span id="l14.1877" class="difflineplus">+    HOST_CFLAGS=&quot;$HOST_CFLAGS -D_X86_&quot;</span>
<a href="#l14.1878"></a><span id="l14.1878" class="difflineplus">+        </span>
<a href="#l14.1879"></a><span id="l14.1879" class="difflineplus">+        </span>
<a href="#l14.1880"></a><span id="l14.1880" class="difflineplus">+    WARNINGS_AS_ERRORS='-WX'</span>
<a href="#l14.1881"></a><span id="l14.1881" class="difflineplus">+	MOZ_OPTIMIZE_FLAGS='-O1'</span>
<a href="#l14.1882"></a><span id="l14.1882" class="difflineplus">+    AR_FLAGS='-NOLOGO -OUT:&quot;$@&quot;'</span>
<a href="#l14.1883"></a><span id="l14.1883" class="difflineplus">+    ASM_SUFFIX=asm</span>
<a href="#l14.1884"></a><span id="l14.1884" class="difflineplus">+    CFLAGS=&quot;$CFLAGS -W3 -Gy -Fd\$(PDBFILE)&quot;</span>
<a href="#l14.1885"></a><span id="l14.1885" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -W3 -Gy -Fd\$(PDBFILE)&quot;</span>
<a href="#l14.1886"></a><span id="l14.1886" class="difflineplus">+    DLL_PREFIX=</span>
<a href="#l14.1887"></a><span id="l14.1887" class="difflineplus">+    DOXYGEN=:</span>
<a href="#l14.1888"></a><span id="l14.1888" class="difflineplus">+    DSO_LDOPTS=-SUBSYSTEM:WINDOWSCE</span>
<a href="#l14.1889"></a><span id="l14.1889" class="difflineplus">+    DYNAMIC_XPCOM_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcom_core.lib'</span>
<a href="#l14.1890"></a><span id="l14.1890" class="difflineplus">+    GARBAGE=</span>
<a href="#l14.1891"></a><span id="l14.1891" class="difflineplus">+    IMPORT_LIB_SUFFIX=lib</span>
<a href="#l14.1892"></a><span id="l14.1892" class="difflineplus">+    LIBS=&quot;$LIBS&quot;</span>
<a href="#l14.1893"></a><span id="l14.1893" class="difflineplus">+    LIBXUL_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib'</span>
<a href="#l14.1894"></a><span id="l14.1894" class="difflineplus">+    LIB_PREFIX=</span>
<a href="#l14.1895"></a><span id="l14.1895" class="difflineplus">+    LIB_SUFFIX=lib </span>
<a href="#l14.1896"></a><span id="l14.1896" class="difflineplus">+    MKCSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ $(DSO_LDOPTS)'</span>
<a href="#l14.1897"></a><span id="l14.1897" class="difflineplus">+    MKSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ $(DSO_LDOPTS)'</span>
<a href="#l14.1898"></a><span id="l14.1898" class="difflineplus">+    MKSHLIB_FORCE_ALL=</span>
<a href="#l14.1899"></a><span id="l14.1899" class="difflineplus">+    MKSHLIB_UNFORCE_ALL=</span>
<a href="#l14.1900"></a><span id="l14.1900" class="difflineplus">+    MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'</span>
<a href="#l14.1901"></a><span id="l14.1901" class="difflineplus">+    MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'</span>
<a href="#l14.1902"></a><span id="l14.1902" class="difflineplus">+    MOZ_DEBUG_FLAGS='-Zi'</span>
<a href="#l14.1903"></a><span id="l14.1903" class="difflineplus">+    MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'</span>
<a href="#l14.1904"></a><span id="l14.1904" class="difflineplus">+    MOZ_FIX_LINK_PATHS=</span>
<a href="#l14.1905"></a><span id="l14.1905" class="difflineplus">+    MOZ_JS_LIBS='$(LIBXUL_DIST)/lib/js$(MOZ_BITS)$(VERSION_NUMBER).lib'</span>
<a href="#l14.1906"></a><span id="l14.1906" class="difflineplus">+    MOZ_XPCOM_OBSOLETE_LIBS='$(LIBXUL_DIST)/lib/xpcom_compat.lib'</span>
<a href="#l14.1907"></a><span id="l14.1907" class="difflineplus">+    OBJ_SUFFIX=obj</span>
<a href="#l14.1908"></a><span id="l14.1908" class="difflineplus">+    RANLIB='echo not_ranlib'</span>
<a href="#l14.1909"></a><span id="l14.1909" class="difflineplus">+    STRIP='echo not_strip'</span>
<a href="#l14.1910"></a><span id="l14.1910" class="difflineplus">+    TARGET_NSPR_MDCPUCFG='\&quot;md/_wince.cfg\&quot;'</span>
<a href="#l14.1911"></a><span id="l14.1911" class="difflineplus">+    UNZIP=unzip</span>
<a href="#l14.1912"></a><span id="l14.1912" class="difflineplus">+    XARGS=xargs</span>
<a href="#l14.1913"></a><span id="l14.1913" class="difflineplus">+    XPCOM_FROZEN_LDOPTS='$(LIBXUL_DIST)/lib/xpcom.lib'</span>
<a href="#l14.1914"></a><span id="l14.1914" class="difflineplus">+    ZIP=zip</span>
<a href="#l14.1915"></a><span id="l14.1915" class="difflineplus">+    LIBIDL_CFLAGS=&quot;-I$MOZ_TOOLS_DIR/include ${GLIB_CFLAGS}&quot;</span>
<a href="#l14.1916"></a><span id="l14.1916" class="difflineplus">+    LIBIDL_LIBS=&quot;$MOZ_TOOLS_DIR/lib/libidl-0.6_s.lib $MOZ_TOOLS_DIR/lib/glib-1.2_s.lib&quot;</span>
<a href="#l14.1917"></a><span id="l14.1917" class="difflineplus">+    STATIC_LIBIDL=1</span>
<a href="#l14.1918"></a><span id="l14.1918" class="difflineplus">+</span>
<a href="#l14.1919"></a><span id="l14.1919" class="difflineplus">+    AC_DEFINE(HAVE_SNPRINTF)</span>
<a href="#l14.1920"></a><span id="l14.1920" class="difflineplus">+    AC_DEFINE(_WINDOWS)</span>
<a href="#l14.1921"></a><span id="l14.1921" class="difflineplus">+    AC_DEFINE(_WIN32)</span>
<a href="#l14.1922"></a><span id="l14.1922" class="difflineplus">+    AC_DEFINE(WIN32)</span>
<a href="#l14.1923"></a><span id="l14.1923" class="difflineplus">+    AC_DEFINE(XP_WIN)</span>
<a href="#l14.1924"></a><span id="l14.1924" class="difflineplus">+    AC_DEFINE(XP_WIN32)</span>
<a href="#l14.1925"></a><span id="l14.1925" class="difflineplus">+    AC_DEFINE(HW_THREADS)</span>
<a href="#l14.1926"></a><span id="l14.1926" class="difflineplus">+    AC_DEFINE(STDC_HEADERS)</span>
<a href="#l14.1927"></a><span id="l14.1927" class="difflineplus">+    AC_DEFINE(NEW_H, &lt;new&gt;)</span>
<a href="#l14.1928"></a><span id="l14.1928" class="difflineplus">+    AC_DEFINE(WIN32_LEAN_AND_MEAN)</span>
<a href="#l14.1929"></a><span id="l14.1929" class="difflineplus">+</span>
<a href="#l14.1930"></a><span id="l14.1930" class="difflineplus">+    TARGET_MD_ARCH=win32</span>
<a href="#l14.1931"></a><span id="l14.1931" class="difflineplus">+    _PLATFORM_DEFAULT_TOOLKIT='windows'</span>
<a href="#l14.1932"></a><span id="l14.1932" class="difflineplus">+    BIN_SUFFIX='.exe'</span>
<a href="#l14.1933"></a><span id="l14.1933" class="difflineplus">+    USE_SHORT_LIBNAME=1</span>
<a href="#l14.1934"></a><span id="l14.1934" class="difflineplus">+    MOZ_ENABLE_POSTSCRIPT=</span>
<a href="#l14.1935"></a><span id="l14.1935" class="difflineplus">+    MOZ_USER_DIR=&quot;Mozilla&quot;</span>
<a href="#l14.1936"></a><span id="l14.1936" class="difflineplus">+;;</span>
<a href="#l14.1937"></a><span id="l14.1937" class="difflineplus">+</span>
<a href="#l14.1938"></a><span id="l14.1938" class="difflineplus">+</span>
<a href="#l14.1939"></a><span id="l14.1939" class="difflineplus">+*-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l14.1940"></a><span id="l14.1940" class="difflineplus">+    DSO_CFLAGS=</span>
<a href="#l14.1941"></a><span id="l14.1941" class="difflineplus">+    DSO_PIC_CFLAGS=</span>
<a href="#l14.1942"></a><span id="l14.1942" class="difflineplus">+    DLL_SUFFIX=.dll</span>
<a href="#l14.1943"></a><span id="l14.1943" class="difflineplus">+    RC=rc.exe</span>
<a href="#l14.1944"></a><span id="l14.1944" class="difflineplus">+    # certain versions of cygwin's makedepend barf on the </span>
<a href="#l14.1945"></a><span id="l14.1945" class="difflineplus">+    # #include &lt;string&gt; vs -I./dist/include/string issue so don't use it</span>
<a href="#l14.1946"></a><span id="l14.1946" class="difflineplus">+    SYSTEM_MAKEDEPEND=</span>
<a href="#l14.1947"></a><span id="l14.1947" class="difflineplus">+    if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l14.1948"></a><span id="l14.1948" class="difflineplus">+        CC=&quot;$CC -mno-cygwin&quot;</span>
<a href="#l14.1949"></a><span id="l14.1949" class="difflineplus">+        CXX=&quot;$CXX -mno-cygwin&quot;</span>
<a href="#l14.1950"></a><span id="l14.1950" class="difflineplus">+        CPP=&quot;$CPP -mno-cygwin&quot;</span>
<a href="#l14.1951"></a><span id="l14.1951" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -mms-bitfields&quot;</span>
<a href="#l14.1952"></a><span id="l14.1952" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -mms-bitfields&quot;</span>
<a href="#l14.1953"></a><span id="l14.1953" class="difflineplus">+        DSO_LDOPTS='-shared'</span>
<a href="#l14.1954"></a><span id="l14.1954" class="difflineplus">+        MKSHLIB='$(CXX) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1955"></a><span id="l14.1955" class="difflineplus">+        MKCSHLIB='$(CC) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.1956"></a><span id="l14.1956" class="difflineplus">+        RC='$(WINDRES)'</span>
<a href="#l14.1957"></a><span id="l14.1957" class="difflineplus">+        # Use temp file for windres (bug 213281)</span>
<a href="#l14.1958"></a><span id="l14.1958" class="difflineplus">+        RCFLAGS='-O coff --use-temp-file'</span>
<a href="#l14.1959"></a><span id="l14.1959" class="difflineplus">+        # mingw doesn't require kernel32, user32, and advapi32 explicitly</span>
<a href="#l14.1960"></a><span id="l14.1960" class="difflineplus">+        LIBS=&quot;$LIBS -lgdi32 -lwinmm -lwsock32&quot;</span>
<a href="#l14.1961"></a><span id="l14.1961" class="difflineplus">+        MOZ_JS_LIBS='-L$(LIBXUL_DIST)/lib -ljs$(MOZ_BITS)$(VERSION_NUMBER)'</span>
<a href="#l14.1962"></a><span id="l14.1962" class="difflineplus">+        MOZ_FIX_LINK_PATHS=</span>
<a href="#l14.1963"></a><span id="l14.1963" class="difflineplus">+        DYNAMIC_XPCOM_LIBS='-L$(LIBXUL_DIST)/lib -lxpcom -lxpcom_core'</span>
<a href="#l14.1964"></a><span id="l14.1964" class="difflineplus">+        XPCOM_FROZEN_LDOPTS='-L$(LIBXUL_DIST)/lib -lxpcom'</span>
<a href="#l14.1965"></a><span id="l14.1965" class="difflineplus">+        DLL_PREFIX=</span>
<a href="#l14.1966"></a><span id="l14.1966" class="difflineplus">+        IMPORT_LIB_SUFFIX=dll.a</span>
<a href="#l14.1967"></a><span id="l14.1967" class="difflineplus">+    else</span>
<a href="#l14.1968"></a><span id="l14.1968" class="difflineplus">+        TARGET_COMPILER_ABI=msvc</span>
<a href="#l14.1969"></a><span id="l14.1969" class="difflineplus">+        HOST_CC='$(CC)'</span>
<a href="#l14.1970"></a><span id="l14.1970" class="difflineplus">+        HOST_CXX='$(CXX)'</span>
<a href="#l14.1971"></a><span id="l14.1971" class="difflineplus">+        HOST_LD='$(LD)'</span>
<a href="#l14.1972"></a><span id="l14.1972" class="difflineplus">+        AR='lib -NOLOGO -OUT:&quot;$@&quot;'</span>
<a href="#l14.1973"></a><span id="l14.1973" class="difflineplus">+        AR_FLAGS=</span>
<a href="#l14.1974"></a><span id="l14.1974" class="difflineplus">+        RANLIB='echo not_ranlib'</span>
<a href="#l14.1975"></a><span id="l14.1975" class="difflineplus">+        STRIP='echo not_strip'</span>
<a href="#l14.1976"></a><span id="l14.1976" class="difflineplus">+        XARGS=xargs</span>
<a href="#l14.1977"></a><span id="l14.1977" class="difflineplus">+        ZIP=zip</span>
<a href="#l14.1978"></a><span id="l14.1978" class="difflineplus">+        UNZIP=unzip</span>
<a href="#l14.1979"></a><span id="l14.1979" class="difflineplus">+        DOXYGEN=:</span>
<a href="#l14.1980"></a><span id="l14.1980" class="difflineplus">+        GARBAGE='$(OBJDIR)/vc20.pdb $(OBJDIR)/vc40.pdb'</span>
<a href="#l14.1981"></a><span id="l14.1981" class="difflineplus">+        OBJ_SUFFIX=obj</span>
<a href="#l14.1982"></a><span id="l14.1982" class="difflineplus">+        LIB_SUFFIX=lib</span>
<a href="#l14.1983"></a><span id="l14.1983" class="difflineplus">+        DLL_PREFIX=</span>
<a href="#l14.1984"></a><span id="l14.1984" class="difflineplus">+        LIB_PREFIX=</span>
<a href="#l14.1985"></a><span id="l14.1985" class="difflineplus">+        IMPORT_LIB_SUFFIX=lib</span>
<a href="#l14.1986"></a><span id="l14.1986" class="difflineplus">+        MKSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ -PDB:$(PDBFILE) $(DSO_LDOPTS)'</span>
<a href="#l14.1987"></a><span id="l14.1987" class="difflineplus">+        MKCSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ -PDB:$(PDBFILE) $(DSO_LDOPTS)'</span>
<a href="#l14.1988"></a><span id="l14.1988" class="difflineplus">+        MKSHLIB_FORCE_ALL=</span>
<a href="#l14.1989"></a><span id="l14.1989" class="difflineplus">+        MKSHLIB_UNFORCE_ALL=</span>
<a href="#l14.1990"></a><span id="l14.1990" class="difflineplus">+        DSO_LDOPTS=-SUBSYSTEM:WINDOWS</span>
<a href="#l14.1991"></a><span id="l14.1991" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -W3 -Gy -Fd\$(PDBFILE)&quot;</span>
<a href="#l14.1992"></a><span id="l14.1992" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -W3 -Gy -Fd\$(PDBFILE)&quot;</span>
<a href="#l14.1993"></a><span id="l14.1993" class="difflineplus">+        LIBS=&quot;$LIBS kernel32.lib user32.lib gdi32.lib winmm.lib wsock32.lib advapi32.lib&quot;</span>
<a href="#l14.1994"></a><span id="l14.1994" class="difflineplus">+        MOZ_DEBUG_FLAGS='-Zi'</span>
<a href="#l14.1995"></a><span id="l14.1995" class="difflineplus">+        MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'</span>
<a href="#l14.1996"></a><span id="l14.1996" class="difflineplus">+        WARNINGS_AS_ERRORS='-WX'</span>
<a href="#l14.1997"></a><span id="l14.1997" class="difflineplus">+    	MOZ_OPTIMIZE_FLAGS='-O1'</span>
<a href="#l14.1998"></a><span id="l14.1998" class="difflineplus">+        MOZ_JS_LIBS='$(LIBXUL_DIST)/lib/js$(MOZ_BITS)$(VERSION_NUMBER).lib'</span>
<a href="#l14.1999"></a><span id="l14.1999" class="difflineplus">+        MOZ_FIX_LINK_PATHS=</span>
<a href="#l14.2000"></a><span id="l14.2000" class="difflineplus">+        DYNAMIC_XPCOM_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcom_core.lib'</span>
<a href="#l14.2001"></a><span id="l14.2001" class="difflineplus">+        XPCOM_FROZEN_LDOPTS='$(LIBXUL_DIST)/lib/xpcom.lib'</span>
<a href="#l14.2002"></a><span id="l14.2002" class="difflineplus">+        LIBXUL_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib'</span>
<a href="#l14.2003"></a><span id="l14.2003" class="difflineplus">+        MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'</span>
<a href="#l14.2004"></a><span id="l14.2004" class="difflineplus">+        MOZ_XPCOM_OBSOLETE_LIBS='$(LIBXUL_DIST)/lib/xpcom_compat.lib'</span>
<a href="#l14.2005"></a><span id="l14.2005" class="difflineplus">+        if test $_MSC_VER -ge 1400; then</span>
<a href="#l14.2006"></a><span id="l14.2006" class="difflineplus">+            LDFLAGS=&quot;$LDFLAGS -NXCOMPAT -SAFESEH&quot;</span>
<a href="#l14.2007"></a><span id="l14.2007" class="difflineplus">+            dnl For profile-guided optimization</span>
<a href="#l14.2008"></a><span id="l14.2008" class="difflineplus">+            PROFILE_GEN_CFLAGS=&quot;-GL&quot;</span>
<a href="#l14.2009"></a><span id="l14.2009" class="difflineplus">+            PROFILE_GEN_LDFLAGS=&quot;-LTCG:PGINSTRUMENT&quot;</span>
<a href="#l14.2010"></a><span id="l14.2010" class="difflineplus">+            dnl XXX: PGO builds can fail with warnings treated as errors,</span>
<a href="#l14.2011"></a><span id="l14.2011" class="difflineplus">+            dnl specifically &quot;no profile data available&quot; appears to be</span>
<a href="#l14.2012"></a><span id="l14.2012" class="difflineplus">+            dnl treated as an error sometimes. This might be a consequence</span>
<a href="#l14.2013"></a><span id="l14.2013" class="difflineplus">+            dnl of using WARNINGS_AS_ERRORS in some modules, combined</span>
<a href="#l14.2014"></a><span id="l14.2014" class="difflineplus">+            dnl with the linker doing most of the work in the whole-program</span>
<a href="#l14.2015"></a><span id="l14.2015" class="difflineplus">+            dnl optimization/PGO case. I think it's probably a compiler bug,</span>
<a href="#l14.2016"></a><span id="l14.2016" class="difflineplus">+            dnl but we work around it here.</span>
<a href="#l14.2017"></a><span id="l14.2017" class="difflineplus">+            PROFILE_USE_CFLAGS=&quot;-GL -wd4624 -wd4952&quot;</span>
<a href="#l14.2018"></a><span id="l14.2018" class="difflineplus">+            dnl XXX: should be -LTCG:PGOPTIMIZE, but that fails on libxul.</span>
<a href="#l14.2019"></a><span id="l14.2019" class="difflineplus">+            dnl Probably also a compiler bug, but what can you do?</span>
<a href="#l14.2020"></a><span id="l14.2020" class="difflineplus">+            PROFILE_USE_LDFLAGS=&quot;-LTCG:PGUPDATE&quot;</span>
<a href="#l14.2021"></a><span id="l14.2021" class="difflineplus">+            if test -n &quot;$_USE_DYNAMICBASE&quot;; then</span>
<a href="#l14.2022"></a><span id="l14.2022" class="difflineplus">+               LDFLAGS=&quot;$LDFLAGS -DYNAMICBASE&quot;</span>
<a href="#l14.2023"></a><span id="l14.2023" class="difflineplus">+            fi</span>
<a href="#l14.2024"></a><span id="l14.2024" class="difflineplus">+        fi</span>
<a href="#l14.2025"></a><span id="l14.2025" class="difflineplus">+    fi</span>
<a href="#l14.2026"></a><span id="l14.2026" class="difflineplus">+    MOZ_JPEG_LIBS='$(call EXPAND_LIBNAME_PATH,jpeg$(MOZ_BITS)$(VERSION_NUMBER),$(DEPTH)/mozilla/jpeg)'</span>
<a href="#l14.2027"></a><span id="l14.2027" class="difflineplus">+    MOZ_PNG_LIBS='$(call EXPAND_LIBNAME_PATH,png,$(DEPTH)/mozilla/modules/libimg/png)'</span>
<a href="#l14.2028"></a><span id="l14.2028" class="difflineplus">+    AC_DEFINE(HAVE_SNPRINTF)</span>
<a href="#l14.2029"></a><span id="l14.2029" class="difflineplus">+    AC_DEFINE(_WINDOWS)</span>
<a href="#l14.2030"></a><span id="l14.2030" class="difflineplus">+    AC_DEFINE(_WIN32)</span>
<a href="#l14.2031"></a><span id="l14.2031" class="difflineplus">+    AC_DEFINE(WIN32)</span>
<a href="#l14.2032"></a><span id="l14.2032" class="difflineplus">+    AC_DEFINE(XP_WIN)</span>
<a href="#l14.2033"></a><span id="l14.2033" class="difflineplus">+    AC_DEFINE(XP_WIN32)</span>
<a href="#l14.2034"></a><span id="l14.2034" class="difflineplus">+    AC_DEFINE(HW_THREADS)</span>
<a href="#l14.2035"></a><span id="l14.2035" class="difflineplus">+    AC_DEFINE(STDC_HEADERS)</span>
<a href="#l14.2036"></a><span id="l14.2036" class="difflineplus">+    AC_DEFINE(NEW_H, &lt;new&gt;)</span>
<a href="#l14.2037"></a><span id="l14.2037" class="difflineplus">+    AC_DEFINE(WIN32_LEAN_AND_MEAN)</span>
<a href="#l14.2038"></a><span id="l14.2038" class="difflineplus">+    TARGET_MD_ARCH=win32</span>
<a href="#l14.2039"></a><span id="l14.2039" class="difflineplus">+    _PLATFORM_DEFAULT_TOOLKIT='cairo-windows'</span>
<a href="#l14.2040"></a><span id="l14.2040" class="difflineplus">+    BIN_SUFFIX='.exe'</span>
<a href="#l14.2041"></a><span id="l14.2041" class="difflineplus">+    USE_SHORT_LIBNAME=1</span>
<a href="#l14.2042"></a><span id="l14.2042" class="difflineplus">+    MOZ_ENABLE_POSTSCRIPT=</span>
<a href="#l14.2043"></a><span id="l14.2043" class="difflineplus">+    MOZ_USER_DIR=&quot;Mozilla&quot;</span>
<a href="#l14.2044"></a><span id="l14.2044" class="difflineplus">+</span>
<a href="#l14.2045"></a><span id="l14.2045" class="difflineplus">+    dnl Hardcode to win95 for now - cls</span>
<a href="#l14.2046"></a><span id="l14.2046" class="difflineplus">+    TARGET_NSPR_MDCPUCFG='\&quot;md/_win95.cfg\&quot;'</span>
<a href="#l14.2047"></a><span id="l14.2047" class="difflineplus">+</span>
<a href="#l14.2048"></a><span id="l14.2048" class="difflineplus">+    dnl set NO_X11 defines here as the general check is skipped on win32</span>
<a href="#l14.2049"></a><span id="l14.2049" class="difflineplus">+    no_x=yes</span>
<a href="#l14.2050"></a><span id="l14.2050" class="difflineplus">+    AC_DEFINE(NO_X11)</span>
<a href="#l14.2051"></a><span id="l14.2051" class="difflineplus">+</span>
<a href="#l14.2052"></a><span id="l14.2052" class="difflineplus">+    dnl MinGW/MSYS doesn't provide or need cygpath</span>
<a href="#l14.2053"></a><span id="l14.2053" class="difflineplus">+    case &quot;$host&quot; in</span>
<a href="#l14.2054"></a><span id="l14.2054" class="difflineplus">+    *-mingw*)</span>
<a href="#l14.2055"></a><span id="l14.2055" class="difflineplus">+	CYGPATH_W=echo</span>
<a href="#l14.2056"></a><span id="l14.2056" class="difflineplus">+	CYGPATH_S=cat</span>
<a href="#l14.2057"></a><span id="l14.2057" class="difflineplus">+	MOZ_BUILD_ROOT=`cd $MOZ_BUILD_ROOT &amp;&amp; pwd -W`</span>
<a href="#l14.2058"></a><span id="l14.2058" class="difflineplus">+	;;</span>
<a href="#l14.2059"></a><span id="l14.2059" class="difflineplus">+    *-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l14.2060"></a><span id="l14.2060" class="difflineplus">+	CYGPATH_W=&quot;cygpath -a -w&quot;</span>
<a href="#l14.2061"></a><span id="l14.2061" class="difflineplus">+	CYGPATH_S=&quot;sed -e s|\\\\|/|g&quot;</span>
<a href="#l14.2062"></a><span id="l14.2062" class="difflineplus">+	MOZ_BUILD_ROOT=`$CYGPATH_W $MOZ_BUILD_ROOT | $CYGPATH_S`</span>
<a href="#l14.2063"></a><span id="l14.2063" class="difflineplus">+	;;</span>
<a href="#l14.2064"></a><span id="l14.2064" class="difflineplus">+    esac</span>
<a href="#l14.2065"></a><span id="l14.2065" class="difflineplus">+    case &quot;$host&quot; in</span>
<a href="#l14.2066"></a><span id="l14.2066" class="difflineplus">+    *-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l14.2067"></a><span id="l14.2067" class="difflineplus">+</span>
<a href="#l14.2068"></a><span id="l14.2068" class="difflineplus">+    if test -z &quot;$MOZ_TOOLS&quot;; then</span>
<a href="#l14.2069"></a><span id="l14.2069" class="difflineplus">+        AC_MSG_ERROR([MOZ_TOOLS is not set])</span>
<a href="#l14.2070"></a><span id="l14.2070" class="difflineplus">+    fi</span>
<a href="#l14.2071"></a><span id="l14.2071" class="difflineplus">+</span>
<a href="#l14.2072"></a><span id="l14.2072" class="difflineplus">+    MOZ_TOOLS_DIR=`cd $MOZ_TOOLS &amp;&amp; pwd`</span>
<a href="#l14.2073"></a><span id="l14.2073" class="difflineplus">+    if test &quot;$?&quot; != &quot;0&quot; || test -z &quot;$MOZ_TOOLS_DIR&quot;; then</span>
<a href="#l14.2074"></a><span id="l14.2074" class="difflineplus">+        AC_MSG_ERROR([cd \$MOZ_TOOLS failed. MOZ_TOOLS ==? $MOZ_TOOLS])</span>
<a href="#l14.2075"></a><span id="l14.2075" class="difflineplus">+    fi</span>
<a href="#l14.2076"></a><span id="l14.2076" class="difflineplus">+    if test `echo ${PATH}: | grep -ic &quot;$MOZ_TOOLS_DIR/bin:&quot;` = 0; then</span>
<a href="#l14.2077"></a><span id="l14.2077" class="difflineplus">+        AC_MSG_ERROR([\$MOZ_TOOLS\\bin must be in your path.])</span>
<a href="#l14.2078"></a><span id="l14.2078" class="difflineplus">+    fi</span>
<a href="#l14.2079"></a><span id="l14.2079" class="difflineplus">+    MOZ_TOOLS_DIR=`$CYGPATH_W $MOZ_TOOLS_DIR | $CYGPATH_S`</span>
<a href="#l14.2080"></a><span id="l14.2080" class="difflineplus">+</span>
<a href="#l14.2081"></a><span id="l14.2081" class="difflineplus">+    if test -n &quot;$GLIB_PREFIX&quot;; then</span>
<a href="#l14.2082"></a><span id="l14.2082" class="difflineplus">+        _GLIB_PREFIX_DIR=`cd $GLIB_PREFIX &amp;&amp; pwd`</span>
<a href="#l14.2083"></a><span id="l14.2083" class="difflineplus">+        if test &quot;$?&quot; = &quot;0&quot;; then</span>
<a href="#l14.2084"></a><span id="l14.2084" class="difflineplus">+            if test `echo ${PATH}: | grep -ic &quot;$_GLIB_PREFIX_DIR/bin:&quot;` = 0; then</span>
<a href="#l14.2085"></a><span id="l14.2085" class="difflineplus">+                AC_MSG_ERROR([GLIB_PREFIX must be in your \$PATH.])</span>
<a href="#l14.2086"></a><span id="l14.2086" class="difflineplus">+            fi</span>
<a href="#l14.2087"></a><span id="l14.2087" class="difflineplus">+            _GLIB_PREFIX_DIR=`$CYGPATH_W $_GLIB_PREFIX_DIR | $CYGPATH_S`</span>
<a href="#l14.2088"></a><span id="l14.2088" class="difflineplus">+        else</span>
<a href="#l14.2089"></a><span id="l14.2089" class="difflineplus">+            AC_MSG_ERROR([GLIB_PREFIX is set but &quot;${GLIB_PREFIX}&quot; is not a directory.])</span>
<a href="#l14.2090"></a><span id="l14.2090" class="difflineplus">+        fi</span>
<a href="#l14.2091"></a><span id="l14.2091" class="difflineplus">+    else</span>
<a href="#l14.2092"></a><span id="l14.2092" class="difflineplus">+        _GLIB_PREFIX_DIR=$MOZ_TOOLS_DIR</span>
<a href="#l14.2093"></a><span id="l14.2093" class="difflineplus">+    fi</span>
<a href="#l14.2094"></a><span id="l14.2094" class="difflineplus">+    if test ! -f &quot;${_GLIB_PREFIX_DIR}/include/glib.h&quot;; then</span>
<a href="#l14.2095"></a><span id="l14.2095" class="difflineplus">+        AC_MSG_ERROR([Cannot find $_GLIB_PREFIX_DIR/include/glib.h .])</span>
<a href="#l14.2096"></a><span id="l14.2096" class="difflineplus">+    fi</span>
<a href="#l14.2097"></a><span id="l14.2097" class="difflineplus">+    GLIB_CFLAGS=&quot;-I${_GLIB_PREFIX_DIR}/include&quot;</span>
<a href="#l14.2098"></a><span id="l14.2098" class="difflineplus">+    if test -f &quot;${_GLIB_PREFIX_DIR}/lib/glib-1.2_s.lib&quot;; then</span>
<a href="#l14.2099"></a><span id="l14.2099" class="difflineplus">+        GLIB_LIBS=&quot;${_GLIB_PREFIX_DIR}/lib/glib-1.2_s.lib&quot;</span>
<a href="#l14.2100"></a><span id="l14.2100" class="difflineplus">+    elif test -f &quot;${_GLIB_PREFIX_DIR}/lib/glib-1.2.lib&quot;; then</span>
<a href="#l14.2101"></a><span id="l14.2101" class="difflineplus">+        GLIB_LIBS=&quot;${_GLIB_PREFIX_DIR}/lib/glib-1.2.lib&quot;</span>
<a href="#l14.2102"></a><span id="l14.2102" class="difflineplus">+    else</span>
<a href="#l14.2103"></a><span id="l14.2103" class="difflineplus">+        AC_MSG_ERROR([Cannot find $_GLIB_PREFIX_DIR/lib/glib-1.2.lib or $_GLIB_PREFIX_DIR/lib/glib-1.2_s.lib])</span>
<a href="#l14.2104"></a><span id="l14.2104" class="difflineplus">+    fi</span>
<a href="#l14.2105"></a><span id="l14.2105" class="difflineplus">+</span>
<a href="#l14.2106"></a><span id="l14.2106" class="difflineplus">+    if test -n &quot;$LIBIDL_PREFIX&quot;; then</span>
<a href="#l14.2107"></a><span id="l14.2107" class="difflineplus">+        _LIBIDL_PREFIX_DIR=`cd $LIBIDL_PREFIX &amp;&amp; pwd`</span>
<a href="#l14.2108"></a><span id="l14.2108" class="difflineplus">+        if test &quot;$?&quot; = &quot;0&quot;; then</span>
<a href="#l14.2109"></a><span id="l14.2109" class="difflineplus">+            if test `echo ${PATH}: | grep -ic &quot;$_LIBIDL_PREFIX_DIR/bin:&quot;` = 0; then</span>
<a href="#l14.2110"></a><span id="l14.2110" class="difflineplus">+                AC_MSG_ERROR([LIBIDL_PREFIX must be in your \$PATH.])</span>
<a href="#l14.2111"></a><span id="l14.2111" class="difflineplus">+            fi</span>
<a href="#l14.2112"></a><span id="l14.2112" class="difflineplus">+            _LIBIDL_PREFIX_DIR=`$CYGPATH_W $_LIBIDL_PREFIX_DIR | $CYGPATH_S`</span>
<a href="#l14.2113"></a><span id="l14.2113" class="difflineplus">+        else</span>
<a href="#l14.2114"></a><span id="l14.2114" class="difflineplus">+            AC_MSG_ERROR([LIBIDL_PREFIX is set but &quot;${LIBIDL_PREFIX}&quot; is not a directory.])</span>
<a href="#l14.2115"></a><span id="l14.2115" class="difflineplus">+        fi</span>
<a href="#l14.2116"></a><span id="l14.2116" class="difflineplus">+    else</span>
<a href="#l14.2117"></a><span id="l14.2117" class="difflineplus">+        _LIBIDL_PREFIX_DIR=$MOZ_TOOLS_DIR</span>
<a href="#l14.2118"></a><span id="l14.2118" class="difflineplus">+    fi        </span>
<a href="#l14.2119"></a><span id="l14.2119" class="difflineplus">+    if test ! -f &quot;${_LIBIDL_PREFIX_DIR}/include/libIDL/IDL.h&quot;; then</span>
<a href="#l14.2120"></a><span id="l14.2120" class="difflineplus">+        AC_MSG_ERROR([Cannot find $_LIBIDL_PREFIX_DIR/include/libIDL/IDL.h .])</span>
<a href="#l14.2121"></a><span id="l14.2121" class="difflineplus">+    fi</span>
<a href="#l14.2122"></a><span id="l14.2122" class="difflineplus">+    LIBIDL_CFLAGS=&quot;-I${_LIBIDL_PREFIX_DIR}/include ${GLIB_CFLAGS}&quot;</span>
<a href="#l14.2123"></a><span id="l14.2123" class="difflineplus">+    if test -f &quot;${_LIBIDL_PREFIX_DIR}/lib/libidl-0.6_s.lib&quot;; then</span>
<a href="#l14.2124"></a><span id="l14.2124" class="difflineplus">+        LIBIDL_LIBS=&quot;${_LIBIDL_PREFIX_DIR}/lib/libidl-0.6_s.lib&quot;</span>
<a href="#l14.2125"></a><span id="l14.2125" class="difflineplus">+        STATIC_LIBIDL=1</span>
<a href="#l14.2126"></a><span id="l14.2126" class="difflineplus">+    elif test -f &quot;${_LIBIDL_PREFIX_DIR}/lib/libidl-0.6.lib&quot;; then</span>
<a href="#l14.2127"></a><span id="l14.2127" class="difflineplus">+        LIBIDL_LIBS=&quot;${_LIBIDL_PREFIX_DIR}/lib/libidl-0.6.lib&quot;</span>
<a href="#l14.2128"></a><span id="l14.2128" class="difflineplus">+    else</span>
<a href="#l14.2129"></a><span id="l14.2129" class="difflineplus">+        AC_MSG_ERROR([Cannot find $_LIBIDL_PREFIX_DIR/lib/libidl-0.6.lib or $_LIBIDL_PREFIX_DIR/lib/libidl-0.6_s.lib])</span>
<a href="#l14.2130"></a><span id="l14.2130" class="difflineplus">+    fi</span>
<a href="#l14.2131"></a><span id="l14.2131" class="difflineplus">+    LIBIDL_LIBS=&quot;${LIBIDL_LIBS} ${GLIB_LIBS}&quot;</span>
<a href="#l14.2132"></a><span id="l14.2132" class="difflineplus">+    ;;</span>
<a href="#l14.2133"></a><span id="l14.2133" class="difflineplus">+</span>
<a href="#l14.2134"></a><span id="l14.2134" class="difflineplus">+    *) # else cross-compiling</span>
<a href="#l14.2135"></a><span id="l14.2135" class="difflineplus">+        if test -n &quot;$GLIB_PREFIX&quot;; then</span>
<a href="#l14.2136"></a><span id="l14.2136" class="difflineplus">+            GLIB_CFLAGS=&quot;-I${GLIB_PREFIX}/include&quot;</span>
<a href="#l14.2137"></a><span id="l14.2137" class="difflineplus">+            if test -f &quot;${GLIB_PREFIX}/lib/glib-1.2_s.lib&quot;; then</span>
<a href="#l14.2138"></a><span id="l14.2138" class="difflineplus">+                GLIB_LIBS=&quot;${GLIB_PREFIX}/lib/glib-1.2_s.lib&quot;</span>
<a href="#l14.2139"></a><span id="l14.2139" class="difflineplus">+            elif test -f &quot;${GLIB_PREFIX}/lib/glib-1.2.lib&quot;; then</span>
<a href="#l14.2140"></a><span id="l14.2140" class="difflineplus">+                GLIB_LIBS=&quot;${GLIB_PREFIX}/lib/glib-1.2.lib&quot;</span>
<a href="#l14.2141"></a><span id="l14.2141" class="difflineplus">+            else</span>
<a href="#l14.2142"></a><span id="l14.2142" class="difflineplus">+                AC_MSG_ERROR([Cannot find $GLIB_PREFIX/lib/glib-1.2.lib or $GLIB_PREFIX/lib/glib-1.2_s.lib])</span>
<a href="#l14.2143"></a><span id="l14.2143" class="difflineplus">+            fi</span>
<a href="#l14.2144"></a><span id="l14.2144" class="difflineplus">+        fi</span>
<a href="#l14.2145"></a><span id="l14.2145" class="difflineplus">+        if test -n &quot;$LIBIDL_PREFIX&quot;; then</span>
<a href="#l14.2146"></a><span id="l14.2146" class="difflineplus">+            LIBIDL_CFLAGS=&quot;-I${LIBIDL_PREFIX}/include ${GLIB_CFLAGS}&quot;</span>
<a href="#l14.2147"></a><span id="l14.2147" class="difflineplus">+            if test -f &quot;${LIBIDL_PREFIX}/lib/libIDL-0.6_s.lib&quot;; then</span>
<a href="#l14.2148"></a><span id="l14.2148" class="difflineplus">+                LIBIDL_LIBS=&quot;${LIBIDL_PREFIX}/lib/libIDL-0.6_s.lib&quot;</span>
<a href="#l14.2149"></a><span id="l14.2149" class="difflineplus">+                STATIC_LIBIDL=1</span>
<a href="#l14.2150"></a><span id="l14.2150" class="difflineplus">+            elif test -f &quot;${LIBIDL_PREFIX}/lib/libIDL-0.6.lib&quot;; then</span>
<a href="#l14.2151"></a><span id="l14.2151" class="difflineplus">+                LIBIDL_LIBS=&quot;${LIBIDL_PREFIX}/lib/libIDL-0.6.lib&quot;</span>
<a href="#l14.2152"></a><span id="l14.2152" class="difflineplus">+            else</span>
<a href="#l14.2153"></a><span id="l14.2153" class="difflineplus">+                AC_MSG_ERROR([Cannot find $LIBIDL_PREFIX/lib/libIDL-0.6.lib or $LIBIDL_PREFIX/lib/libIDL-0.6_s.lib])</span>
<a href="#l14.2154"></a><span id="l14.2154" class="difflineplus">+            fi</span>
<a href="#l14.2155"></a><span id="l14.2155" class="difflineplus">+        fi</span>
<a href="#l14.2156"></a><span id="l14.2156" class="difflineplus">+        LIBIDL_LIBS=&quot;${LIBIDL_LIBS} ${GLIB_LIBS}&quot;</span>
<a href="#l14.2157"></a><span id="l14.2157" class="difflineplus">+        ;;</span>
<a href="#l14.2158"></a><span id="l14.2158" class="difflineplus">+    esac </span>
<a href="#l14.2159"></a><span id="l14.2159" class="difflineplus">+</span>
<a href="#l14.2160"></a><span id="l14.2160" class="difflineplus">+</span>
<a href="#l14.2161"></a><span id="l14.2161" class="difflineplus">+    case &quot;$host_os&quot; in</span>
<a href="#l14.2162"></a><span id="l14.2162" class="difflineplus">+    cygwin*|msvc*|mks*)</span>
<a href="#l14.2163"></a><span id="l14.2163" class="difflineplus">+        AC_MSG_WARN([Using a cygwin build environment is unsupported. Configure cannot check for the presence of necessary headers. Please upgrade to MozillaBuild; see http://developer.mozilla.org/en/docs/Windows_Build_Prerequisites])</span>
<a href="#l14.2164"></a><span id="l14.2164" class="difflineplus">+        ;;</span>
<a href="#l14.2165"></a><span id="l14.2165" class="difflineplus">+</span>
<a href="#l14.2166"></a><span id="l14.2166" class="difflineplus">+    *)</span>
<a href="#l14.2167"></a><span id="l14.2167" class="difflineplus">+        AC_CHECK_HEADERS(mmintrin.h oleacc.idl)</span>
<a href="#l14.2168"></a><span id="l14.2168" class="difflineplus">+</span>
<a href="#l14.2169"></a><span id="l14.2169" class="difflineplus">+        AC_LANG_SAVE</span>
<a href="#l14.2170"></a><span id="l14.2170" class="difflineplus">+        AC_LANG_CPLUSPLUS</span>
<a href="#l14.2171"></a><span id="l14.2171" class="difflineplus">+        AC_CHECK_HEADERS(atlbase.h wpcapi.h)</span>
<a href="#l14.2172"></a><span id="l14.2172" class="difflineplus">+        AC_LANG_RESTORE</span>
<a href="#l14.2173"></a><span id="l14.2173" class="difflineplus">+        ;;</span>
<a href="#l14.2174"></a><span id="l14.2174" class="difflineplus">+    esac</span>
<a href="#l14.2175"></a><span id="l14.2175" class="difflineplus">+</span>
<a href="#l14.2176"></a><span id="l14.2176" class="difflineplus">+    case &quot;$target&quot; in</span>
<a href="#l14.2177"></a><span id="l14.2177" class="difflineplus">+    i*86-*)</span>
<a href="#l14.2178"></a><span id="l14.2178" class="difflineplus">+    	AC_DEFINE(_X86_)</span>
<a href="#l14.2179"></a><span id="l14.2179" class="difflineplus">+	;;</span>
<a href="#l14.2180"></a><span id="l14.2180" class="difflineplus">+    alpha-*)</span>
<a href="#l14.2181"></a><span id="l14.2181" class="difflineplus">+    	AC_DEFINE(_ALPHA_)</span>
<a href="#l14.2182"></a><span id="l14.2182" class="difflineplus">+	;;</span>
<a href="#l14.2183"></a><span id="l14.2183" class="difflineplus">+    mips-*)</span>
<a href="#l14.2184"></a><span id="l14.2184" class="difflineplus">+    	AC_DEFINE(_MIPS_)</span>
<a href="#l14.2185"></a><span id="l14.2185" class="difflineplus">+	;;</span>
<a href="#l14.2186"></a><span id="l14.2186" class="difflineplus">+    *)</span>
<a href="#l14.2187"></a><span id="l14.2187" class="difflineplus">+    	AC_DEFINE(_CPU_ARCH_NOT_DEFINED)</span>
<a href="#l14.2188"></a><span id="l14.2188" class="difflineplus">+	;;</span>
<a href="#l14.2189"></a><span id="l14.2189" class="difflineplus">+    esac</span>
<a href="#l14.2190"></a><span id="l14.2190" class="difflineplus">+    ;;</span>
<a href="#l14.2191"></a><span id="l14.2191" class="difflineplus">+</span>
<a href="#l14.2192"></a><span id="l14.2192" class="difflineplus">+*-netbsd*)</span>
<a href="#l14.2193"></a><span id="l14.2193" class="difflineplus">+    DSO_CFLAGS=''</span>
<a href="#l14.2194"></a><span id="l14.2194" class="difflineplus">+    CFLAGS=&quot;$CFLAGS -Dunix&quot;</span>
<a href="#l14.2195"></a><span id="l14.2195" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -Dunix&quot;</span>
<a href="#l14.2196"></a><span id="l14.2196" class="difflineplus">+    if $CC -E - -dM &lt;/dev/null | grep __ELF__ &gt;/dev/null; then</span>
<a href="#l14.2197"></a><span id="l14.2197" class="difflineplus">+        DLL_SUFFIX=&quot;.so&quot;</span>
<a href="#l14.2198"></a><span id="l14.2198" class="difflineplus">+        DSO_PIC_CFLAGS='-fPIC -DPIC'</span>
<a href="#l14.2199"></a><span id="l14.2199" class="difflineplus">+        DSO_LDOPTS='-shared'</span>
<a href="#l14.2200"></a><span id="l14.2200" class="difflineplus">+	BIN_FLAGS='-Wl,--export-dynamic'</span>
<a href="#l14.2201"></a><span id="l14.2201" class="difflineplus">+    else</span>
<a href="#l14.2202"></a><span id="l14.2202" class="difflineplus">+    	DSO_PIC_CFLAGS='-fPIC -DPIC'</span>
<a href="#l14.2203"></a><span id="l14.2203" class="difflineplus">+    	DLL_SUFFIX=&quot;.so.1.0&quot;</span>
<a href="#l14.2204"></a><span id="l14.2204" class="difflineplus">+    	DSO_LDOPTS='-shared'</span>
<a href="#l14.2205"></a><span id="l14.2205" class="difflineplus">+    fi</span>
<a href="#l14.2206"></a><span id="l14.2206" class="difflineplus">+    # This will fail on a.out systems prior to 1.5.1_ALPHA.</span>
<a href="#l14.2207"></a><span id="l14.2207" class="difflineplus">+    MKSHLIB_FORCE_ALL='-Wl,--whole-archive'</span>
<a href="#l14.2208"></a><span id="l14.2208" class="difflineplus">+    MKSHLIB_UNFORCE_ALL='-Wl,--no-whole-archive'</span>
<a href="#l14.2209"></a><span id="l14.2209" class="difflineplus">+    if test &quot;$LIBRUNPATH&quot;; then</span>
<a href="#l14.2210"></a><span id="l14.2210" class="difflineplus">+	DSO_LDOPTS=&quot;-Wl,-R$LIBRUNPATH $DSO_LDOPTS&quot;</span>
<a href="#l14.2211"></a><span id="l14.2211" class="difflineplus">+    fi</span>
<a href="#l14.2212"></a><span id="l14.2212" class="difflineplus">+    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,lib$(LIBRARY_NAME)$(DLL_SUFFIX) -o $@'</span>
<a href="#l14.2213"></a><span id="l14.2213" class="difflineplus">+    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,lib$(LIBRARY_NAME)$(DLL_SUFFIX) -o $@'</span>
<a href="#l14.2214"></a><span id="l14.2214" class="difflineplus">+    ;;</span>
<a href="#l14.2215"></a><span id="l14.2215" class="difflineplus">+</span>
<a href="#l14.2216"></a><span id="l14.2216" class="difflineplus">+*-nto*) </span>
<a href="#l14.2217"></a><span id="l14.2217" class="difflineplus">+	AC_DEFINE(NTO)	</span>
<a href="#l14.2218"></a><span id="l14.2218" class="difflineplus">+	AC_DEFINE(_QNX_SOURCE)</span>
<a href="#l14.2219"></a><span id="l14.2219" class="difflineplus">+	AC_DEFINE(_i386)</span>
<a href="#l14.2220"></a><span id="l14.2220" class="difflineplus">+	OS_TARGET=NTO</span>
<a href="#l14.2221"></a><span id="l14.2221" class="difflineplus">+	WARNINGS_AS_ERRORS=''</span>
<a href="#l14.2222"></a><span id="l14.2222" class="difflineplus">+	MOZ_OPTIMIZE_FLAGS=&quot;-O&quot;</span>
<a href="#l14.2223"></a><span id="l14.2223" class="difflineplus">+	MOZ_DEBUG_FLAGS=&quot;-gstabs&quot;</span>
<a href="#l14.2224"></a><span id="l14.2224" class="difflineplus">+	USE_PTHREADS=1</span>
<a href="#l14.2225"></a><span id="l14.2225" class="difflineplus">+	_PEDANTIC=</span>
<a href="#l14.2226"></a><span id="l14.2226" class="difflineplus">+	LIBS=&quot;$LIBS -lsocket -lstdc++&quot;</span>
<a href="#l14.2227"></a><span id="l14.2227" class="difflineplus">+	_DEFINES_CFLAGS='-Wp,-include -Wp,$(DEPTH)/mozilla-config.h -DMOZILLA_CLIENT -D_POSIX_C_SOURCE=199506'</span>
<a href="#l14.2228"></a><span id="l14.2228" class="difflineplus">+	_DEFINES_CXXFLAGS='-DMOZILLA_CLIENT -Wp,-include -Wp,$(DEPTH)/mozilla-config.h -D_POSIX_C_SOURCE=199506'</span>
<a href="#l14.2229"></a><span id="l14.2229" class="difflineplus">+	if test &quot;$with_x&quot; != &quot;yes&quot;</span>
<a href="#l14.2230"></a><span id="l14.2230" class="difflineplus">+	then</span>
<a href="#l14.2231"></a><span id="l14.2231" class="difflineplus">+		_PLATFORM_DEFAULT_TOOLKIT=&quot;photon&quot;</span>
<a href="#l14.2232"></a><span id="l14.2232" class="difflineplus">+	    TK_CFLAGS='-I/usr/include/photon'</span>
<a href="#l14.2233"></a><span id="l14.2233" class="difflineplus">+		TK_LIBS='-lph'</span>
<a href="#l14.2234"></a><span id="l14.2234" class="difflineplus">+	fi</span>
<a href="#l14.2235"></a><span id="l14.2235" class="difflineplus">+	case &quot;${target_cpu}&quot; in</span>
<a href="#l14.2236"></a><span id="l14.2236" class="difflineplus">+	ppc*)</span>
<a href="#l14.2237"></a><span id="l14.2237" class="difflineplus">+	AC_DEFINE(HAVE_VA_LIST_AS_ARRAY)	</span>
<a href="#l14.2238"></a><span id="l14.2238" class="difflineplus">+	;;</span>
<a href="#l14.2239"></a><span id="l14.2239" class="difflineplus">+	esac</span>
<a href="#l14.2240"></a><span id="l14.2240" class="difflineplus">+	case &quot;${host_cpu}&quot; in</span>
<a href="#l14.2241"></a><span id="l14.2241" class="difflineplus">+	i*86)</span>
<a href="#l14.2242"></a><span id="l14.2242" class="difflineplus">+	USE_ELF_DYNSTR_GC=1</span>
<a href="#l14.2243"></a><span id="l14.2243" class="difflineplus">+	;;</span>
<a href="#l14.2244"></a><span id="l14.2244" class="difflineplus">+	esac</span>
<a href="#l14.2245"></a><span id="l14.2245" class="difflineplus">+	;;</span>
<a href="#l14.2246"></a><span id="l14.2246" class="difflineplus">+</span>
<a href="#l14.2247"></a><span id="l14.2247" class="difflineplus">+*-openbsd*)</span>
<a href="#l14.2248"></a><span id="l14.2248" class="difflineplus">+    DLL_SUFFIX=&quot;.so.1.0&quot;</span>
<a href="#l14.2249"></a><span id="l14.2249" class="difflineplus">+    DSO_CFLAGS=''</span>
<a href="#l14.2250"></a><span id="l14.2250" class="difflineplus">+    DSO_PIC_CFLAGS='-fPIC'</span>
<a href="#l14.2251"></a><span id="l14.2251" class="difflineplus">+    DSO_LDOPTS='-shared -fPIC'</span>
<a href="#l14.2252"></a><span id="l14.2252" class="difflineplus">+    if test &quot;$LIBRUNPATH&quot;; then</span>
<a href="#l14.2253"></a><span id="l14.2253" class="difflineplus">+	DSO_LDOPTS=&quot;-R$LIBRUNPATH $DSO_LDOPTS&quot;</span>
<a href="#l14.2254"></a><span id="l14.2254" class="difflineplus">+    fi</span>
<a href="#l14.2255"></a><span id="l14.2255" class="difflineplus">+    ;;</span>
<a href="#l14.2256"></a><span id="l14.2256" class="difflineplus">+</span>
<a href="#l14.2257"></a><span id="l14.2257" class="difflineplus">+*-openvms*) </span>
<a href="#l14.2258"></a><span id="l14.2258" class="difflineplus">+    AC_DEFINE(NO_PW_GECOS)</span>
<a href="#l14.2259"></a><span id="l14.2259" class="difflineplus">+    AC_DEFINE(NO_UDSOCK)</span>
<a href="#l14.2260"></a><span id="l14.2260" class="difflineplus">+    AC_DEFINE(POLL_WITH_XCONNECTIONNUMBER)</span>
<a href="#l14.2261"></a><span id="l14.2261" class="difflineplus">+    USE_PTHREADS=1</span>
<a href="#l14.2262"></a><span id="l14.2262" class="difflineplus">+    MKSHLIB_FORCE_ALL='-all'</span>
<a href="#l14.2263"></a><span id="l14.2263" class="difflineplus">+    MKSHLIB_UNFORCE_ALL='-none'</span>
<a href="#l14.2264"></a><span id="l14.2264" class="difflineplus">+    AS='as'</span>
<a href="#l14.2265"></a><span id="l14.2265" class="difflineplus">+    AS_DASH_C_FLAG='-Wc/names=as_is'</span>
<a href="#l14.2266"></a><span id="l14.2266" class="difflineplus">+    AR_FLAGS='c $@'</span>
<a href="#l14.2267"></a><span id="l14.2267" class="difflineplus">+    DSO_LDOPTS='-shared -auto_symvec'</span>
<a href="#l14.2268"></a><span id="l14.2268" class="difflineplus">+    DSO_PIC_CFLAGS=</span>
<a href="#l14.2269"></a><span id="l14.2269" class="difflineplus">+    MOZ_DEBUG_LDFLAGS='-g'</span>
<a href="#l14.2270"></a><span id="l14.2270" class="difflineplus">+    COMPAQ_CXX=1</span>
<a href="#l14.2271"></a><span id="l14.2271" class="difflineplus">+    CC_VERSION=`$CC -V 2&gt;&amp;1 | awk '/ C / { print $3 }'`</span>
<a href="#l14.2272"></a><span id="l14.2272" class="difflineplus">+    CXX_VERSION=`$CXX -V 2&gt;&amp;1 | awk '/ C\+\+ / { print $3 }'`</span>
<a href="#l14.2273"></a><span id="l14.2273" class="difflineplus">+    ;;</span>
<a href="#l14.2274"></a><span id="l14.2274" class="difflineplus">+</span>
<a href="#l14.2275"></a><span id="l14.2275" class="difflineplus">+</span>
<a href="#l14.2276"></a><span id="l14.2276" class="difflineplus">+*-os2*)</span>
<a href="#l14.2277"></a><span id="l14.2277" class="difflineplus">+    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.2278"></a><span id="l14.2278" class="difflineplus">+    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.2279"></a><span id="l14.2279" class="difflineplus">+    AC_DEFINE(XP_OS2)</span>
<a href="#l14.2280"></a><span id="l14.2280" class="difflineplus">+    USE_SHORT_LIBNAME=1</span>
<a href="#l14.2281"></a><span id="l14.2281" class="difflineplus">+    DLL_PREFIX=</span>
<a href="#l14.2282"></a><span id="l14.2282" class="difflineplus">+    LIB_PREFIX=</span>
<a href="#l14.2283"></a><span id="l14.2283" class="difflineplus">+    LIB_SUFFIX=lib</span>
<a href="#l14.2284"></a><span id="l14.2284" class="difflineplus">+    BIN_SUFFIX=&quot;.exe&quot;</span>
<a href="#l14.2285"></a><span id="l14.2285" class="difflineplus">+    DLL_SUFFIX=&quot;.dll&quot;</span>
<a href="#l14.2286"></a><span id="l14.2286" class="difflineplus">+    IMPORT_LIB_SUFFIX=lib</span>
<a href="#l14.2287"></a><span id="l14.2287" class="difflineplus">+    DSO_PIC_CFLAGS=</span>
<a href="#l14.2288"></a><span id="l14.2288" class="difflineplus">+    TARGET_MD_ARCH=os2</span>
<a href="#l14.2289"></a><span id="l14.2289" class="difflineplus">+    _PLATFORM_DEFAULT_TOOLKIT=&quot;cairo-os2&quot;</span>
<a href="#l14.2290"></a><span id="l14.2290" class="difflineplus">+    MOZ_ENABLE_POSTSCRIPT=</span>
<a href="#l14.2291"></a><span id="l14.2291" class="difflineplus">+    RC=rc.exe</span>
<a href="#l14.2292"></a><span id="l14.2292" class="difflineplus">+    RCFLAGS='-n'</span>
<a href="#l14.2293"></a><span id="l14.2293" class="difflineplus">+    MOZ_USER_DIR=&quot;Mozilla&quot;</span>
<a href="#l14.2294"></a><span id="l14.2294" class="difflineplus">+</span>
<a href="#l14.2295"></a><span id="l14.2295" class="difflineplus">+    if test &quot;$MOZTOOLS&quot;; then</span>
<a href="#l14.2296"></a><span id="l14.2296" class="difflineplus">+        MOZ_TOOLS_DIR=`echo $MOZTOOLS | sed -e 's|\\\\|/|g'`</span>
<a href="#l14.2297"></a><span id="l14.2297" class="difflineplus">+    else</span>
<a href="#l14.2298"></a><span id="l14.2298" class="difflineplus">+        AC_MSG_ERROR([MOZTOOLS is not set])</span>
<a href="#l14.2299"></a><span id="l14.2299" class="difflineplus">+    fi</span>
<a href="#l14.2300"></a><span id="l14.2300" class="difflineplus">+</span>
<a href="#l14.2301"></a><span id="l14.2301" class="difflineplus">+    # EMX/GCC build</span>
<a href="#l14.2302"></a><span id="l14.2302" class="difflineplus">+    if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2303"></a><span id="l14.2303" class="difflineplus">+        AC_DEFINE(OS2)</span>
<a href="#l14.2304"></a><span id="l14.2304" class="difflineplus">+        AC_DEFINE(XP_OS2_EMX)</span>
<a href="#l14.2305"></a><span id="l14.2305" class="difflineplus">+        AC_DEFINE(OS2EMX_PLAIN_CHAR)</span>
<a href="#l14.2306"></a><span id="l14.2306" class="difflineplus">+        AC_DEFINE(TCPV40HDRS)</span>
<a href="#l14.2307"></a><span id="l14.2307" class="difflineplus">+        AR=emxomfar</span>
<a href="#l14.2308"></a><span id="l14.2308" class="difflineplus">+        AR_FLAGS='r $@'</span>
<a href="#l14.2309"></a><span id="l14.2309" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -Zomf&quot;</span>
<a href="#l14.2310"></a><span id="l14.2310" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -Zomf&quot;</span>
<a href="#l14.2311"></a><span id="l14.2311" class="difflineplus">+        DSO_LDOPTS='-Zdll'</span>
<a href="#l14.2312"></a><span id="l14.2312" class="difflineplus">+        BIN_FLAGS='-Zlinker /ST:0x100000'</span>
<a href="#l14.2313"></a><span id="l14.2313" class="difflineplus">+        IMPLIB='emximp -o'</span>
<a href="#l14.2314"></a><span id="l14.2314" class="difflineplus">+        FILTER='emxexp -o'</span>
<a href="#l14.2315"></a><span id="l14.2315" class="difflineplus">+        LDFLAGS='-Zmap'</span>
<a href="#l14.2316"></a><span id="l14.2316" class="difflineplus">+        WARNINGS_AS_ERRORS='-Werror'</span>
<a href="#l14.2317"></a><span id="l14.2317" class="difflineplus">+        MOZ_DEBUG_FLAGS=&quot;-g -fno-inline&quot;</span>
<a href="#l14.2318"></a><span id="l14.2318" class="difflineplus">+        MOZ_OPTIMIZE_FLAGS=&quot;-O2&quot;</span>
<a href="#l14.2319"></a><span id="l14.2319" class="difflineplus">+        MOZ_OPTIMIZE_LDFLAGS=&quot;-s -Zlinker /EXEPACK:2 -Zlinker /PACKCODE -Zlinker /PACKDATA&quot;</span>
<a href="#l14.2320"></a><span id="l14.2320" class="difflineplus">+        MOZ_XPCOM_OBSOLETE_LIBS='-L$(LIBXUL_DIST)/lib $(LIBXUL_DIST)/lib/xpcomct.lib'</span>
<a href="#l14.2321"></a><span id="l14.2321" class="difflineplus">+        DYNAMIC_XPCOM_LIBS='-L$(LIBXUL_DIST)/lib $(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcomcor.lib'</span>
<a href="#l14.2322"></a><span id="l14.2322" class="difflineplus">+        LIBXUL_LIBS='-L$(LIBXUL_DIST)/lib $(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib'</span>
<a href="#l14.2323"></a><span id="l14.2323" class="difflineplus">+        if test -n &quot;$MOZ_OS2_HIGH_MEMORY&quot;; then</span>
<a href="#l14.2324"></a><span id="l14.2324" class="difflineplus">+          DSO_LDOPTS=&quot;$DSO_LDOPTS -Zhigh-mem&quot;</span>
<a href="#l14.2325"></a><span id="l14.2325" class="difflineplus">+          LDFLAGS=&quot;$LDFLAGS -Zhigh-mem&quot;</span>
<a href="#l14.2326"></a><span id="l14.2326" class="difflineplus">+          MOZ_OPTIMIZE_LDFLAGS=&quot;$MOZ_OPTIMIZE_LDFLAGS -Zhigh-mem&quot;</span>
<a href="#l14.2327"></a><span id="l14.2327" class="difflineplus">+          AC_DEFINE(MOZ_OS2_HIGH_MEMORY)</span>
<a href="#l14.2328"></a><span id="l14.2328" class="difflineplus">+        fi</span>
<a href="#l14.2329"></a><span id="l14.2329" class="difflineplus">+</span>
<a href="#l14.2330"></a><span id="l14.2330" class="difflineplus">+        # GCC for OS/2 currently predefines these, but we don't want them</span>
<a href="#l14.2331"></a><span id="l14.2331" class="difflineplus">+        _DEFINES_CFLAGS=&quot;$_DEFINES_CFLAGS -Uunix -U__unix -U__unix__&quot;</span>
<a href="#l14.2332"></a><span id="l14.2332" class="difflineplus">+        _DEFINES_CXXFLAGS=&quot;$_DEFINES_CXXFLAGS -Uunix -U__unix -U__unix__&quot;</span>
<a href="#l14.2333"></a><span id="l14.2333" class="difflineplus">+</span>
<a href="#l14.2334"></a><span id="l14.2334" class="difflineplus">+        AC_CACHE_CHECK(for __declspec(dllexport),</span>
<a href="#l14.2335"></a><span id="l14.2335" class="difflineplus">+           ac_os2_declspec,</span>
<a href="#l14.2336"></a><span id="l14.2336" class="difflineplus">+           [AC_TRY_COMPILE([__declspec(dllexport) void ac_os2_declspec(void) {}],</span>
<a href="#l14.2337"></a><span id="l14.2337" class="difflineplus">+                           [return 0;],</span>
<a href="#l14.2338"></a><span id="l14.2338" class="difflineplus">+                           ac_os2_declspec=&quot;yes&quot;,</span>
<a href="#l14.2339"></a><span id="l14.2339" class="difflineplus">+                           ac_os2_declspec=&quot;no&quot;)])</span>
<a href="#l14.2340"></a><span id="l14.2340" class="difflineplus">+        if test &quot;$ac_os2_declspec&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2341"></a><span id="l14.2341" class="difflineplus">+           FILTER='true'</span>
<a href="#l14.2342"></a><span id="l14.2342" class="difflineplus">+           MOZ_OS2_USE_DECLSPEC='1'</span>
<a href="#l14.2343"></a><span id="l14.2343" class="difflineplus">+        fi</span>
<a href="#l14.2344"></a><span id="l14.2344" class="difflineplus">+        </span>
<a href="#l14.2345"></a><span id="l14.2345" class="difflineplus">+    # Visual Age C++ build</span>
<a href="#l14.2346"></a><span id="l14.2346" class="difflineplus">+    elif test &quot;$VACPP&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2347"></a><span id="l14.2347" class="difflineplus">+        MOZ_BUILD_ROOT=`pwd -D`</span>
<a href="#l14.2348"></a><span id="l14.2348" class="difflineplus">+        OBJ_SUFFIX=obj</span>
<a href="#l14.2349"></a><span id="l14.2349" class="difflineplus">+        AR=-ilib</span>
<a href="#l14.2350"></a><span id="l14.2350" class="difflineplus">+        AR_FLAGS='/NOL /NOI /O:$(subst /,\\,$@)'</span>
<a href="#l14.2351"></a><span id="l14.2351" class="difflineplus">+        AR_LIST='/L'</span>
<a href="#l14.2352"></a><span id="l14.2352" class="difflineplus">+        AR_EXTRACT='-*'</span>
<a href="#l14.2353"></a><span id="l14.2353" class="difflineplus">+        AR_DELETE='-'</span>
<a href="#l14.2354"></a><span id="l14.2354" class="difflineplus">+        AS=alp</span>
<a href="#l14.2355"></a><span id="l14.2355" class="difflineplus">+        ASFLAGS='-Mb'</span>
<a href="#l14.2356"></a><span id="l14.2356" class="difflineplus">+        AS_DASH_C_FLAG=''</span>
<a href="#l14.2357"></a><span id="l14.2357" class="difflineplus">+        ASM_SUFFIX=asm</span>
<a href="#l14.2358"></a><span id="l14.2358" class="difflineplus">+        LD='-ilink'</span>
<a href="#l14.2359"></a><span id="l14.2359" class="difflineplus">+        CFLAGS=&quot;/Q /qlibansi /Gm+ /Su4 /Mp /Tl9&quot;</span>
<a href="#l14.2360"></a><span id="l14.2360" class="difflineplus">+        CXXFLAGS=&quot;/Q /qlibansi /Gm+ /Su4 /Mp /Tl9 /Gx+&quot;</span>
<a href="#l14.2361"></a><span id="l14.2361" class="difflineplus">+        MOZ_DEBUG_FLAGS=&quot;/Ti+&quot;</span>
<a href="#l14.2362"></a><span id="l14.2362" class="difflineplus">+        WARNINGS_AS_ERRORS='-WX'</span>
<a href="#l14.2363"></a><span id="l14.2363" class="difflineplus">+        MOZ_OPTIMIZE_FLAGS=&quot;/O+ /Gl+ /G5 /qarch=pentium&quot;</span>
<a href="#l14.2364"></a><span id="l14.2364" class="difflineplus">+        LDFLAGS=&quot;/NOL /M&quot;</span>
<a href="#l14.2365"></a><span id="l14.2365" class="difflineplus">+        MOZ_DEBUG_LDFLAGS=&quot;/DE&quot;</span>
<a href="#l14.2366"></a><span id="l14.2366" class="difflineplus">+        MOZ_OPTIMIZE_LDFLAGS=&quot;/OPTFUNC /EXEPACK:2 /PACKCODE /PACKDATA&quot;</span>
<a href="#l14.2367"></a><span id="l14.2367" class="difflineplus">+        DSO_LDOPTS=''</span>
<a href="#l14.2368"></a><span id="l14.2368" class="difflineplus">+        DSO_PIC_CFLAGS=</span>
<a href="#l14.2369"></a><span id="l14.2369" class="difflineplus">+        IMPLIB='implib /NOL /NOI'</span>
<a href="#l14.2370"></a><span id="l14.2370" class="difflineplus">+        FILTER='cppfilt -q -B -P'</span>
<a href="#l14.2371"></a><span id="l14.2371" class="difflineplus">+        AC_DEFINE(NO_ANSI_KEYWORDS)</span>
<a href="#l14.2372"></a><span id="l14.2372" class="difflineplus">+        AC_DEFINE(OS2,4)</span>
<a href="#l14.2373"></a><span id="l14.2373" class="difflineplus">+        AC_DEFINE(_X86_)</span>
<a href="#l14.2374"></a><span id="l14.2374" class="difflineplus">+        AC_DEFINE(XP_OS2_VACPP)</span>
<a href="#l14.2375"></a><span id="l14.2375" class="difflineplus">+        AC_DEFINE(TCPV40HDRS)</span>
<a href="#l14.2376"></a><span id="l14.2376" class="difflineplus">+        AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.2377"></a><span id="l14.2377" class="difflineplus">+        AC_DEFINE(STDC_HEADERS)</span>
<a href="#l14.2378"></a><span id="l14.2378" class="difflineplus">+        MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'</span>
<a href="#l14.2379"></a><span id="l14.2379" class="difflineplus">+        MKSHLIB='$(LD) $(DSO_LDOPTS)'</span>
<a href="#l14.2380"></a><span id="l14.2380" class="difflineplus">+        MKCSHLIB='$(LD) $(DSO_LDOPTS)'</span>
<a href="#l14.2381"></a><span id="l14.2381" class="difflineplus">+        MOZ_JS_LIBS='$(LIBXUL_DIST)/lib/mozjs.lib'</span>
<a href="#l14.2382"></a><span id="l14.2382" class="difflineplus">+        MOZ_XPCOM_OBSOLETE_LIBS='$(LIBXUL_DIST)/lib/xpcomct.lib'</span>
<a href="#l14.2383"></a><span id="l14.2383" class="difflineplus">+        DYNAMIC_XPCOM_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcomcor.lib'</span>
<a href="#l14.2384"></a><span id="l14.2384" class="difflineplus">+        LIBXUL_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib'</span>
<a href="#l14.2385"></a><span id="l14.2385" class="difflineplus">+    fi</span>
<a href="#l14.2386"></a><span id="l14.2386" class="difflineplus">+    ;;</span>
<a href="#l14.2387"></a><span id="l14.2387" class="difflineplus">+</span>
<a href="#l14.2388"></a><span id="l14.2388" class="difflineplus">+alpha*-*-osf*)</span>
<a href="#l14.2389"></a><span id="l14.2389" class="difflineplus">+    if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2390"></a><span id="l14.2390" class="difflineplus">+      MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,$@ -o $@'</span>
<a href="#l14.2391"></a><span id="l14.2391" class="difflineplus">+      MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -Wl,-soname,$@ -o $@'</span>
<a href="#l14.2392"></a><span id="l14.2392" class="difflineplus">+</span>
<a href="#l14.2393"></a><span id="l14.2393" class="difflineplus">+    else</span>
<a href="#l14.2394"></a><span id="l14.2394" class="difflineplus">+	MOZ_DEBUG_FLAGS='-g'</span>
<a href="#l14.2395"></a><span id="l14.2395" class="difflineplus">+	ASFLAGS='-I$(MOZILLA_SRCDIR)/xpcom/reflect/xptcall/public -g'</span>
<a href="#l14.2396"></a><span id="l14.2396" class="difflineplus">+	CFLAGS=&quot;$CFLAGS -ieee&quot;</span>
<a href="#l14.2397"></a><span id="l14.2397" class="difflineplus">+	CXXFLAGS=&quot;$CXXFLAGS &quot;'-noexceptions -ieee  -ptr $(DIST)/cxx_repository'</span>
<a href="#l14.2398"></a><span id="l14.2398" class="difflineplus">+	DSO_LDOPTS='-shared -msym -expect_unresolved \* -update_registry $(DIST)/so_locations'</span>
<a href="#l14.2399"></a><span id="l14.2399" class="difflineplus">+	DSO_CFLAGS=</span>
<a href="#l14.2400"></a><span id="l14.2400" class="difflineplus">+	DSO_PIC_CFLAGS=</span>
<a href="#l14.2401"></a><span id="l14.2401" class="difflineplus">+	MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -soname $@ -o $@'</span>
<a href="#l14.2402"></a><span id="l14.2402" class="difflineplus">+	MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_CFLAGS) $(DSO_LDOPTS) -soname $@ -o $@'</span>
<a href="#l14.2403"></a><span id="l14.2403" class="difflineplus">+	MKSHLIB_FORCE_ALL='-all'</span>
<a href="#l14.2404"></a><span id="l14.2404" class="difflineplus">+	MKSHLIB_UNFORCE_ALL='-none'</span>
<a href="#l14.2405"></a><span id="l14.2405" class="difflineplus">+	dnl Might fix the libxpcom.so breakage on this platform as well....</span>
<a href="#l14.2406"></a><span id="l14.2406" class="difflineplus">+	AC_DEFINE(NSCAP_DISABLE_TEST_DONTQUERY_CASES)</span>
<a href="#l14.2407"></a><span id="l14.2407" class="difflineplus">+	AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.2408"></a><span id="l14.2408" class="difflineplus">+    fi</span>
<a href="#l14.2409"></a><span id="l14.2409" class="difflineplus">+    if test -z &quot;$GNU_CXX&quot;; then</span>
<a href="#l14.2410"></a><span id="l14.2410" class="difflineplus">+      COMPAQ_CXX=1</span>
<a href="#l14.2411"></a><span id="l14.2411" class="difflineplus">+    fi</span>
<a href="#l14.2412"></a><span id="l14.2412" class="difflineplus">+    AC_DEFINE(NEED_USLEEP_PROTOTYPE)</span>
<a href="#l14.2413"></a><span id="l14.2413" class="difflineplus">+    ;;</span>
<a href="#l14.2414"></a><span id="l14.2414" class="difflineplus">+</span>
<a href="#l14.2415"></a><span id="l14.2415" class="difflineplus">+*-qnx*) </span>
<a href="#l14.2416"></a><span id="l14.2416" class="difflineplus">+    DIRENT_INO=d_stat.st_ino</span>
<a href="#l14.2417"></a><span id="l14.2417" class="difflineplus">+    dnl Solves the problems the QNX compiler has with nsCOMPtr.h.</span>
<a href="#l14.2418"></a><span id="l14.2418" class="difflineplus">+    AC_DEFINE(NSCAP_DISABLE_TEST_DONTQUERY_CASES)</span>
<a href="#l14.2419"></a><span id="l14.2419" class="difflineplus">+    AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.2420"></a><span id="l14.2420" class="difflineplus">+    dnl Explicit set STDC_HEADERS to workaround QNX 6.0's failing of std test</span>
<a href="#l14.2421"></a><span id="l14.2421" class="difflineplus">+    AC_DEFINE(STDC_HEADERS)</span>
<a href="#l14.2422"></a><span id="l14.2422" class="difflineplus">+    if test &quot;$no_x&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2423"></a><span id="l14.2423" class="difflineplus">+	    _PLATFORM_DEFAULT_TOOLKIT='photon'</span>
<a href="#l14.2424"></a><span id="l14.2424" class="difflineplus">+	    TK_CFLAGS='-I/usr/nto/include/photon'</span>
<a href="#l14.2425"></a><span id="l14.2425" class="difflineplus">+	    TK_LIBS='-lphoton -lphrender'</span>
<a href="#l14.2426"></a><span id="l14.2426" class="difflineplus">+    fi</span>
<a href="#l14.2427"></a><span id="l14.2427" class="difflineplus">+    ;;</span>
<a href="#l14.2428"></a><span id="l14.2428" class="difflineplus">+</span>
<a href="#l14.2429"></a><span id="l14.2429" class="difflineplus">+*-sco*) </span>
<a href="#l14.2430"></a><span id="l14.2430" class="difflineplus">+    AC_DEFINE(NSCAP_DISABLE_TEST_DONTQUERY_CASES)</span>
<a href="#l14.2431"></a><span id="l14.2431" class="difflineplus">+    AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.2432"></a><span id="l14.2432" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -I/usr/include/CC&quot;</span>
<a href="#l14.2433"></a><span id="l14.2433" class="difflineplus">+    if test ! &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2434"></a><span id="l14.2434" class="difflineplus">+       DSO_LDOPTS='-G'</span>
<a href="#l14.2435"></a><span id="l14.2435" class="difflineplus">+    fi</span>
<a href="#l14.2436"></a><span id="l14.2436" class="difflineplus">+    ;;</span>
<a href="#l14.2437"></a><span id="l14.2437" class="difflineplus">+</span>
<a href="#l14.2438"></a><span id="l14.2438" class="difflineplus">+dnl the qsort routine under solaris is faulty</span>
<a href="#l14.2439"></a><span id="l14.2439" class="difflineplus">+*-solaris*) </span>
<a href="#l14.2440"></a><span id="l14.2440" class="difflineplus">+    AC_DEFINE(SOLARIS)</span>
<a href="#l14.2441"></a><span id="l14.2441" class="difflineplus">+    TARGET_NSPR_MDCPUCFG='\&quot;md/_solaris.cfg\&quot;'</span>
<a href="#l14.2442"></a><span id="l14.2442" class="difflineplus">+    SYSTEM_MAKEDEPEND=</span>
<a href="#l14.2443"></a><span id="l14.2443" class="difflineplus">+    # $ORIGIN/.. is for shared libraries under components/ to locate shared</span>
<a href="#l14.2444"></a><span id="l14.2444" class="difflineplus">+    # libraries one level up (e.g. libnspr4.so)</span>
<a href="#l14.2445"></a><span id="l14.2445" class="difflineplus">+    LDFLAGS=&quot;$LDFLAGS -z ignore -R '\$\$ORIGIN:\$\$ORIGIN/..'&quot;</span>
<a href="#l14.2446"></a><span id="l14.2446" class="difflineplus">+    MOZ_MEMORY=1</span>
<a href="#l14.2447"></a><span id="l14.2447" class="difflineplus">+    if test -z &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2448"></a><span id="l14.2448" class="difflineplus">+       NS_USE_NATIVE=1</span>
<a href="#l14.2449"></a><span id="l14.2449" class="difflineplus">+       MOZ_FIX_LINK_PATHS='-R $(LIBXUL_DIST)/bin'</span>
<a href="#l14.2450"></a><span id="l14.2450" class="difflineplus">+       AC_DEFINE(NSCAP_DISABLE_DEBUG_PTR_TYPES)</span>
<a href="#l14.2451"></a><span id="l14.2451" class="difflineplus">+</span>
<a href="#l14.2452"></a><span id="l14.2452" class="difflineplus">+       if test &quot;$CPU_ARCH&quot; != &quot;sparc&quot;; then</span>
<a href="#l14.2453"></a><span id="l14.2453" class="difflineplus">+          CFLAGS=&quot;$CFLAGS -xlibmieee -xstrconst -xbuiltin=%all&quot;</span>
<a href="#l14.2454"></a><span id="l14.2454" class="difflineplus">+          CXXFLAGS=&quot;$CXXFLAGS -xlibmieee -xbuiltin=%all -features=tmplife -norunpath&quot;</span>
<a href="#l14.2455"></a><span id="l14.2455" class="difflineplus">+       else</span>
<a href="#l14.2456"></a><span id="l14.2456" class="difflineplus">+          # Do not use -xbuiltin on SPARC to get around a bug of compiler</span>
<a href="#l14.2457"></a><span id="l14.2457" class="difflineplus">+          CFLAGS=&quot;$CFLAGS -xlibmieee -xstrconst -xbuiltin=%none&quot;</span>
<a href="#l14.2458"></a><span id="l14.2458" class="difflineplus">+          CXXFLAGS=&quot;$CXXFLAGS -xlibmieee -xbuiltin=%none -features=tmplife -norunpath&quot;</span>
<a href="#l14.2459"></a><span id="l14.2459" class="difflineplus">+       fi</span>
<a href="#l14.2460"></a><span id="l14.2460" class="difflineplus">+</span>
<a href="#l14.2461"></a><span id="l14.2461" class="difflineplus">+       LDFLAGS=&quot;-xildoff -z lazyload -z combreloc $LDFLAGS&quot;</span>
<a href="#l14.2462"></a><span id="l14.2462" class="difflineplus">+       if test -z &quot;$CROSS_COMPILE&quot; &amp;&amp; test -f /usr/lib/ld/map.noexstk; then</span>
<a href="#l14.2463"></a><span id="l14.2463" class="difflineplus">+           _SAVE_LDFLAGS=$LDFLAGS</span>
<a href="#l14.2464"></a><span id="l14.2464" class="difflineplus">+           LDFLAGS=&quot;-M /usr/lib/ld/map.noexstk $LDFLAGS&quot; </span>
<a href="#l14.2465"></a><span id="l14.2465" class="difflineplus">+           AC_TRY_LINK([#include &lt;stdio.h&gt;],</span>
<a href="#l14.2466"></a><span id="l14.2466" class="difflineplus">+                       [printf(&quot;Hello World\n&quot;);],</span>
<a href="#l14.2467"></a><span id="l14.2467" class="difflineplus">+                       ,</span>
<a href="#l14.2468"></a><span id="l14.2468" class="difflineplus">+                       [LDFLAGS=$_SAVE_LDFLAGS])</span>
<a href="#l14.2469"></a><span id="l14.2469" class="difflineplus">+       fi</span>
<a href="#l14.2470"></a><span id="l14.2470" class="difflineplus">+       WARNINGS_AS_ERRORS='-Werror'</span>
<a href="#l14.2471"></a><span id="l14.2471" class="difflineplus">+       MOZ_OPTIMIZE_FLAGS=&quot;-xO4&quot;</span>
<a href="#l14.2472"></a><span id="l14.2472" class="difflineplus">+       MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_PIC_FLAGS) $(DSO_LDOPTS) -h $@ -o $@'</span>
<a href="#l14.2473"></a><span id="l14.2473" class="difflineplus">+       MKCSHLIB='$(CC) $(CFLAGS) $(DSO_PIC_FLAGS) -G -z muldefs -h $@ -o $@'</span>
<a href="#l14.2474"></a><span id="l14.2474" class="difflineplus">+       MKSHLIB_FORCE_ALL='-z allextract'</span>
<a href="#l14.2475"></a><span id="l14.2475" class="difflineplus">+       MKSHLIB_UNFORCE_ALL='-z defaultextract'</span>
<a href="#l14.2476"></a><span id="l14.2476" class="difflineplus">+       DSO_LDOPTS='-G -z muldefs'</span>
<a href="#l14.2477"></a><span id="l14.2477" class="difflineplus">+       AR_LIST=&quot;$AR t&quot;</span>
<a href="#l14.2478"></a><span id="l14.2478" class="difflineplus">+       AR_EXTRACT=&quot;$AR x&quot;</span>
<a href="#l14.2479"></a><span id="l14.2479" class="difflineplus">+       AR_DELETE=&quot;$AR d&quot;</span>
<a href="#l14.2480"></a><span id="l14.2480" class="difflineplus">+       AR='$(CXX) -xar'</span>
<a href="#l14.2481"></a><span id="l14.2481" class="difflineplus">+       AR_FLAGS='-o $@'</span>
<a href="#l14.2482"></a><span id="l14.2482" class="difflineplus">+       AS='/usr/ccs/bin/as'</span>
<a href="#l14.2483"></a><span id="l14.2483" class="difflineplus">+       ASFLAGS=&quot;$ASFLAGS -K PIC -L -P -D_ASM -D__STDC__=0&quot;</span>
<a href="#l14.2484"></a><span id="l14.2484" class="difflineplus">+       AS_DASH_C_FLAG=''</span>
<a href="#l14.2485"></a><span id="l14.2485" class="difflineplus">+       TARGET_COMPILER_ABI=&quot;sunc&quot;</span>
<a href="#l14.2486"></a><span id="l14.2486" class="difflineplus">+        CC_VERSION=`$CC -V 2&gt;&amp;1 | grep '^cc:' 2&gt;/dev/null | $AWK -F\: '{ print $2 }'`</span>
<a href="#l14.2487"></a><span id="l14.2487" class="difflineplus">+        CXX_VERSION=`$CXX -V 2&gt;&amp;1 | grep '^CC:' 2&gt;/dev/null | $AWK -F\: '{ print $2 }'`</span>
<a href="#l14.2488"></a><span id="l14.2488" class="difflineplus">+       AC_MSG_CHECKING([for Forte compiler version &gt;= WS6U2])</span>
<a href="#l14.2489"></a><span id="l14.2489" class="difflineplus">+       AC_LANG_SAVE</span>
<a href="#l14.2490"></a><span id="l14.2490" class="difflineplus">+       AC_LANG_CPLUSPLUS</span>
<a href="#l14.2491"></a><span id="l14.2491" class="difflineplus">+       AC_TRY_COMPILE([],</span>
<a href="#l14.2492"></a><span id="l14.2492" class="difflineplus">+           [#if (__SUNPRO_CC &lt; 0x530)</span>
<a href="#l14.2493"></a><span id="l14.2493" class="difflineplus">+           #error &quot;Denied&quot;</span>
<a href="#l14.2494"></a><span id="l14.2494" class="difflineplus">+           #endif],</span>
<a href="#l14.2495"></a><span id="l14.2495" class="difflineplus">+           _BAD_COMPILER=,_BAD_COMPILER=1)</span>
<a href="#l14.2496"></a><span id="l14.2496" class="difflineplus">+        if test -n &quot;$_BAD_COMPILER&quot;; then</span>
<a href="#l14.2497"></a><span id="l14.2497" class="difflineplus">+            _res=&quot;no&quot;</span>
<a href="#l14.2498"></a><span id="l14.2498" class="difflineplus">+            AC_MSG_ERROR([Forte version WS6U2 or higher is required to build. Your compiler version is $CC_VERSION .])</span>
<a href="#l14.2499"></a><span id="l14.2499" class="difflineplus">+        else</span>
<a href="#l14.2500"></a><span id="l14.2500" class="difflineplus">+            _res=&quot;yes&quot;</span>
<a href="#l14.2501"></a><span id="l14.2501" class="difflineplus">+        fi</span>
<a href="#l14.2502"></a><span id="l14.2502" class="difflineplus">+        AC_MSG_RESULT([$_res])</span>
<a href="#l14.2503"></a><span id="l14.2503" class="difflineplus">+        AC_LANG_RESTORE</span>
<a href="#l14.2504"></a><span id="l14.2504" class="difflineplus">+    else</span>
<a href="#l14.2505"></a><span id="l14.2505" class="difflineplus">+       ASFLAGS=&quot;$ASFLAGS -fPIC&quot;</span>
<a href="#l14.2506"></a><span id="l14.2506" class="difflineplus">+       DSO_LDOPTS='-G'</span>
<a href="#l14.2507"></a><span id="l14.2507" class="difflineplus">+       _WARNINGS_CFLAGS=''</span>
<a href="#l14.2508"></a><span id="l14.2508" class="difflineplus">+       _WARNINGS_CXXFLAGS=''</span>
<a href="#l14.2509"></a><span id="l14.2509" class="difflineplus">+       if test &quot;$OS_RELEASE&quot; = &quot;5.3&quot;; then</span>
<a href="#l14.2510"></a><span id="l14.2510" class="difflineplus">+	  AC_DEFINE(MUST_UNDEF_HAVE_BOOLEAN_AFTER_INCLUDES)</span>
<a href="#l14.2511"></a><span id="l14.2511" class="difflineplus">+       fi</span>
<a href="#l14.2512"></a><span id="l14.2512" class="difflineplus">+    fi</span>
<a href="#l14.2513"></a><span id="l14.2513" class="difflineplus">+    if test &quot;$OS_RELEASE&quot; = &quot;5.5.1&quot;; then</span>
<a href="#l14.2514"></a><span id="l14.2514" class="difflineplus">+       AC_DEFINE(NEED_USLEEP_PROTOTYPE)</span>
<a href="#l14.2515"></a><span id="l14.2515" class="difflineplus">+    fi</span>
<a href="#l14.2516"></a><span id="l14.2516" class="difflineplus">+    ;;</span>
<a href="#l14.2517"></a><span id="l14.2517" class="difflineplus">+</span>
<a href="#l14.2518"></a><span id="l14.2518" class="difflineplus">+*-sunos*) </span>
<a href="#l14.2519"></a><span id="l14.2519" class="difflineplus">+    DSO_LDOPTS='-Bdynamic'</span>
<a href="#l14.2520"></a><span id="l14.2520" class="difflineplus">+    MKSHLIB='-$(LD) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.2521"></a><span id="l14.2521" class="difflineplus">+    MKCSHLIB='-$(LD) $(DSO_LDOPTS) -o $@'</span>
<a href="#l14.2522"></a><span id="l14.2522" class="difflineplus">+    AC_DEFINE(SUNOS4)</span>
<a href="#l14.2523"></a><span id="l14.2523" class="difflineplus">+    AC_DEFINE(SPRINTF_RETURNS_STRING)</span>
<a href="#l14.2524"></a><span id="l14.2524" class="difflineplus">+    case &quot;$(target_os)&quot; in</span>
<a href="#l14.2525"></a><span id="l14.2525" class="difflineplus">+    sunos4.1*)</span>
<a href="#l14.2526"></a><span id="l14.2526" class="difflineplus">+        DLL_SUFFIX='.so.1.0'</span>
<a href="#l14.2527"></a><span id="l14.2527" class="difflineplus">+        ;;</span>
<a href="#l14.2528"></a><span id="l14.2528" class="difflineplus">+    esac</span>
<a href="#l14.2529"></a><span id="l14.2529" class="difflineplus">+    ;;</span>
<a href="#l14.2530"></a><span id="l14.2530" class="difflineplus">+</span>
<a href="#l14.2531"></a><span id="l14.2531" class="difflineplus">+*-sysv4.2uw7*) </span>
<a href="#l14.2532"></a><span id="l14.2532" class="difflineplus">+	NSPR_LIBS=&quot;-lnspr$NSPR_VERSION -lplc$NSPR_VERSION -lplds$NSPR_VERSION -L/usr/ccs/lib -lcrt&quot;</span>
<a href="#l14.2533"></a><span id="l14.2533" class="difflineplus">+    ;;</span>
<a href="#l14.2534"></a><span id="l14.2534" class="difflineplus">+</span>
<a href="#l14.2535"></a><span id="l14.2535" class="difflineplus">+*-os2*)</span>
<a href="#l14.2536"></a><span id="l14.2536" class="difflineplus">+    HOST_NSPR_MDCPUCFG='\&quot;md/_os2.cfg\&quot;'</span>
<a href="#l14.2537"></a><span id="l14.2537" class="difflineplus">+    ;;</span>
<a href="#l14.2538"></a><span id="l14.2538" class="difflineplus">+</span>
<a href="#l14.2539"></a><span id="l14.2539" class="difflineplus">+esac</span>
<a href="#l14.2540"></a><span id="l14.2540" class="difflineplus">+</span>
<a href="#l14.2541"></a><span id="l14.2541" class="difflineplus">+dnl Only one oddball right now (QNX), but this gives us flexibility</span>
<a href="#l14.2542"></a><span id="l14.2542" class="difflineplus">+dnl if any other platforms need to override this in the future.</span>
<a href="#l14.2543"></a><span id="l14.2543" class="difflineplus">+AC_DEFINE_UNQUOTED(D_INO,$DIRENT_INO)</span>
<a href="#l14.2544"></a><span id="l14.2544" class="difflineplus">+</span>
<a href="#l14.2545"></a><span id="l14.2545" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2546"></a><span id="l14.2546" class="difflineplus">+dnl Any platform that doesn't have MKSHLIB_FORCE_ALL defined</span>
<a href="#l14.2547"></a><span id="l14.2547" class="difflineplus">+dnl by now will not have any way to link most binaries (tests</span>
<a href="#l14.2548"></a><span id="l14.2548" class="difflineplus">+dnl as well as viewer, apprunner, etc.), because some symbols</span>
<a href="#l14.2549"></a><span id="l14.2549" class="difflineplus">+dnl will be left out of the &quot;composite&quot; .so's by ld as unneeded.</span>
<a href="#l14.2550"></a><span id="l14.2550" class="difflineplus">+dnl So, by defining NO_LD_ARCHIVE_FLAGS for these platforms,</span>
<a href="#l14.2551"></a><span id="l14.2551" class="difflineplus">+dnl they can link in the static libs that provide the missing</span>
<a href="#l14.2552"></a><span id="l14.2552" class="difflineplus">+dnl symbols.</span>
<a href="#l14.2553"></a><span id="l14.2553" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2554"></a><span id="l14.2554" class="difflineplus">+NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l14.2555"></a><span id="l14.2555" class="difflineplus">+if test -z &quot;$MKSHLIB_FORCE_ALL&quot; || test -z &quot;$MKSHLIB_UNFORCE_ALL&quot;; then</span>
<a href="#l14.2556"></a><span id="l14.2556" class="difflineplus">+    NO_LD_ARCHIVE_FLAGS=1</span>
<a href="#l14.2557"></a><span id="l14.2557" class="difflineplus">+fi</span>
<a href="#l14.2558"></a><span id="l14.2558" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.2559"></a><span id="l14.2559" class="difflineplus">+*-os2*)</span>
<a href="#l14.2560"></a><span id="l14.2560" class="difflineplus">+    NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l14.2561"></a><span id="l14.2561" class="difflineplus">+    ;;</span>
<a href="#l14.2562"></a><span id="l14.2562" class="difflineplus">+*-aix4.3*|*-aix5*)</span>
<a href="#l14.2563"></a><span id="l14.2563" class="difflineplus">+    NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l14.2564"></a><span id="l14.2564" class="difflineplus">+    ;;</span>
<a href="#l14.2565"></a><span id="l14.2565" class="difflineplus">+*-openvms*)</span>
<a href="#l14.2566"></a><span id="l14.2566" class="difflineplus">+    NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l14.2567"></a><span id="l14.2567" class="difflineplus">+    ;;</span>
<a href="#l14.2568"></a><span id="l14.2568" class="difflineplus">+*-msvc*|*-mks*|*-mingw*|*-cygwin*|*-wince)</span>
<a href="#l14.2569"></a><span id="l14.2569" class="difflineplus">+    if test -z &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2570"></a><span id="l14.2570" class="difflineplus">+        NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l14.2571"></a><span id="l14.2571" class="difflineplus">+    fi</span>
<a href="#l14.2572"></a><span id="l14.2572" class="difflineplus">+    ;;</span>
<a href="#l14.2573"></a><span id="l14.2573" class="difflineplus">+esac</span>
<a href="#l14.2574"></a><span id="l14.2574" class="difflineplus">+AC_SUBST(NO_LD_ARCHIVE_FLAGS)</span>
<a href="#l14.2575"></a><span id="l14.2575" class="difflineplus">+</span>
<a href="#l14.2576"></a><span id="l14.2576" class="difflineplus">+dnl</span>
<a href="#l14.2577"></a><span id="l14.2577" class="difflineplus">+dnl Indicate that platform requires special thread safe </span>
<a href="#l14.2578"></a><span id="l14.2578" class="difflineplus">+dnl locking when starting up the OJI JVM </span>
<a href="#l14.2579"></a><span id="l14.2579" class="difflineplus">+dnl (see mozilla/modules/oji/src/nsJVMManager.cpp)</span>
<a href="#l14.2580"></a><span id="l14.2580" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2581"></a><span id="l14.2581" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.2582"></a><span id="l14.2582" class="difflineplus">+    *-hpux*)      </span>
<a href="#l14.2583"></a><span id="l14.2583" class="difflineplus">+        AC_DEFINE(MOZ_OJI_REQUIRE_THREAD_SAFE_ON_STARTUP)</span>
<a href="#l14.2584"></a><span id="l14.2584" class="difflineplus">+        ;;</span>
<a href="#l14.2585"></a><span id="l14.2585" class="difflineplus">+esac</span>
<a href="#l14.2586"></a><span id="l14.2586" class="difflineplus">+</span>
<a href="#l14.2587"></a><span id="l14.2587" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2588"></a><span id="l14.2588" class="difflineplus">+dnl = Flags to strip unused symbols from .so components</span>
<a href="#l14.2589"></a><span id="l14.2589" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2590"></a><span id="l14.2590" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.2591"></a><span id="l14.2591" class="difflineplus">+    *-linux*|*-kfreebsd*-gnu)</span>
<a href="#l14.2592"></a><span id="l14.2592" class="difflineplus">+        MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'</span>
<a href="#l14.2593"></a><span id="l14.2593" class="difflineplus">+        ;;</span>
<a href="#l14.2594"></a><span id="l14.2594" class="difflineplus">+    *-solaris*)</span>
<a href="#l14.2595"></a><span id="l14.2595" class="difflineplus">+        if test -z &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2596"></a><span id="l14.2596" class="difflineplus">+         MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-M $(BUILD_TOOLS)/gnu-ld-scripts/components-mapfile'</span>
<a href="#l14.2597"></a><span id="l14.2597" class="difflineplus">+        else</span>
<a href="#l14.2598"></a><span id="l14.2598" class="difflineplus">+         if test -z &quot;$GCC_USE_GNU_LD&quot;; then</span>
<a href="#l14.2599"></a><span id="l14.2599" class="difflineplus">+          MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,-M -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-mapfile'</span>
<a href="#l14.2600"></a><span id="l14.2600" class="difflineplus">+         else</span>
<a href="#l14.2601"></a><span id="l14.2601" class="difflineplus">+          MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'</span>
<a href="#l14.2602"></a><span id="l14.2602" class="difflineplus">+         fi</span>
<a href="#l14.2603"></a><span id="l14.2603" class="difflineplus">+        fi</span>
<a href="#l14.2604"></a><span id="l14.2604" class="difflineplus">+        ;;</span>
<a href="#l14.2605"></a><span id="l14.2605" class="difflineplus">+    *-nto*) </span>
<a href="#l14.2606"></a><span id="l14.2606" class="difflineplus">+        MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'</span>
<a href="#l14.2607"></a><span id="l14.2607" class="difflineplus">+        ;;</span>
<a href="#l14.2608"></a><span id="l14.2608" class="difflineplus">+    *-darwin*)</span>
<a href="#l14.2609"></a><span id="l14.2609" class="difflineplus">+        MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,-exported_symbols_list -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-export-list'</span>
<a href="#l14.2610"></a><span id="l14.2610" class="difflineplus">+        ;;</span>
<a href="#l14.2611"></a><span id="l14.2611" class="difflineplus">+    *-cygwin*|*-mingw*|*-mks*|*-msvc|*-wince)</span>
<a href="#l14.2612"></a><span id="l14.2612" class="difflineplus">+        if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2613"></a><span id="l14.2613" class="difflineplus">+           MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'</span>
<a href="#l14.2614"></a><span id="l14.2614" class="difflineplus">+        fi</span>
<a href="#l14.2615"></a><span id="l14.2615" class="difflineplus">+        ;;</span>
<a href="#l14.2616"></a><span id="l14.2616" class="difflineplus">+esac</span>
<a href="#l14.2617"></a><span id="l14.2617" class="difflineplus">+</span>
<a href="#l14.2618"></a><span id="l14.2618" class="difflineplus">+if test -z &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.2619"></a><span id="l14.2619" class="difflineplus">+    SKIP_COMPILER_CHECKS=1</span>
<a href="#l14.2620"></a><span id="l14.2620" class="difflineplus">+    SKIP_LIBRARY_CHECKS=1</span>
<a href="#l14.2621"></a><span id="l14.2621" class="difflineplus">+fi</span>
<a href="#l14.2622"></a><span id="l14.2622" class="difflineplus">+</span>
<a href="#l14.2623"></a><span id="l14.2623" class="difflineplus">+if test -z &quot;$SKIP_COMPILER_CHECKS&quot;; then</span>
<a href="#l14.2624"></a><span id="l14.2624" class="difflineplus">+dnl Checks for typedefs, structures, and compiler characteristics.</span>
<a href="#l14.2625"></a><span id="l14.2625" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2626"></a><span id="l14.2626" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.2627"></a><span id="l14.2627" class="difflineplus">+AC_HEADER_STDC</span>
<a href="#l14.2628"></a><span id="l14.2628" class="difflineplus">+AC_C_CONST</span>
<a href="#l14.2629"></a><span id="l14.2629" class="difflineplus">+AC_TYPE_MODE_T</span>
<a href="#l14.2630"></a><span id="l14.2630" class="difflineplus">+AC_TYPE_OFF_T</span>
<a href="#l14.2631"></a><span id="l14.2631" class="difflineplus">+AC_TYPE_PID_T</span>
<a href="#l14.2632"></a><span id="l14.2632" class="difflineplus">+AC_TYPE_SIZE_T</span>
<a href="#l14.2633"></a><span id="l14.2633" class="difflineplus">+AC_STRUCT_ST_BLKSIZE</span>
<a href="#l14.2634"></a><span id="l14.2634" class="difflineplus">+AC_MSG_CHECKING(for siginfo_t)</span>
<a href="#l14.2635"></a><span id="l14.2635" class="difflineplus">+AC_CACHE_VAL(ac_cv_siginfo_t,</span>
<a href="#l14.2636"></a><span id="l14.2636" class="difflineplus">+ [AC_TRY_COMPILE([#define _POSIX_C_SOURCE 199506L</span>
<a href="#l14.2637"></a><span id="l14.2637" class="difflineplus">+                  #include &lt;signal.h&gt;],</span>
<a href="#l14.2638"></a><span id="l14.2638" class="difflineplus">+                 [siginfo_t* info;],</span>
<a href="#l14.2639"></a><span id="l14.2639" class="difflineplus">+                 [ac_cv_siginfo_t=true],</span>
<a href="#l14.2640"></a><span id="l14.2640" class="difflineplus">+                 [ac_cv_siginfo_t=false])])</span>
<a href="#l14.2641"></a><span id="l14.2641" class="difflineplus">+if test &quot;$ac_cv_siginfo_t&quot; = true ; then</span>
<a href="#l14.2642"></a><span id="l14.2642" class="difflineplus">+  AC_DEFINE(HAVE_SIGINFO_T)</span>
<a href="#l14.2643"></a><span id="l14.2643" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2644"></a><span id="l14.2644" class="difflineplus">+else</span>
<a href="#l14.2645"></a><span id="l14.2645" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2646"></a><span id="l14.2646" class="difflineplus">+fi</span>
<a href="#l14.2647"></a><span id="l14.2647" class="difflineplus">+</span>
<a href="#l14.2648"></a><span id="l14.2648" class="difflineplus">+dnl Visual Age for os/2 also defines size_t and off_t in certain </span>
<a href="#l14.2649"></a><span id="l14.2649" class="difflineplus">+dnl  header files.  These defines make Visual Age use the mozilla</span>
<a href="#l14.2650"></a><span id="l14.2650" class="difflineplus">+dnl  defines types.</span>
<a href="#l14.2651"></a><span id="l14.2651" class="difflineplus">+if test &quot;$VACPP&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2652"></a><span id="l14.2652" class="difflineplus">+   AC_DEFINE(__size_t)</span>
<a href="#l14.2653"></a><span id="l14.2653" class="difflineplus">+   AC_DEFINE(__off_t)</span>
<a href="#l14.2654"></a><span id="l14.2654" class="difflineplus">+fi</span>
<a href="#l14.2655"></a><span id="l14.2655" class="difflineplus">+</span>
<a href="#l14.2656"></a><span id="l14.2656" class="difflineplus">+dnl Check for int16_t, int32_t, int64_t, int64, uint, uint_t, and uint16_t.</span>
<a href="#l14.2657"></a><span id="l14.2657" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2658"></a><span id="l14.2658" class="difflineplus">+AC_MSG_CHECKING(for int16_t)</span>
<a href="#l14.2659"></a><span id="l14.2659" class="difflineplus">+AC_CACHE_VAL(ac_cv_int16_t,</span>
<a href="#l14.2660"></a><span id="l14.2660" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2661"></a><span id="l14.2661" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2662"></a><span id="l14.2662" class="difflineplus">+                 [int16_t foo = 0;],</span>
<a href="#l14.2663"></a><span id="l14.2663" class="difflineplus">+                 [ac_cv_int16_t=true],</span>
<a href="#l14.2664"></a><span id="l14.2664" class="difflineplus">+                 [ac_cv_int16_t=false])])</span>
<a href="#l14.2665"></a><span id="l14.2665" class="difflineplus">+if test &quot;$ac_cv_int16_t&quot; = true ; then</span>
<a href="#l14.2666"></a><span id="l14.2666" class="difflineplus">+  AC_DEFINE(HAVE_INT16_T)</span>
<a href="#l14.2667"></a><span id="l14.2667" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2668"></a><span id="l14.2668" class="difflineplus">+else</span>
<a href="#l14.2669"></a><span id="l14.2669" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2670"></a><span id="l14.2670" class="difflineplus">+fi</span>
<a href="#l14.2671"></a><span id="l14.2671" class="difflineplus">+AC_MSG_CHECKING(for int32_t)</span>
<a href="#l14.2672"></a><span id="l14.2672" class="difflineplus">+AC_CACHE_VAL(ac_cv_int32_t,</span>
<a href="#l14.2673"></a><span id="l14.2673" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2674"></a><span id="l14.2674" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2675"></a><span id="l14.2675" class="difflineplus">+                 [int32_t foo = 0;],</span>
<a href="#l14.2676"></a><span id="l14.2676" class="difflineplus">+                 [ac_cv_int32_t=true],</span>
<a href="#l14.2677"></a><span id="l14.2677" class="difflineplus">+                 [ac_cv_int32_t=false])])</span>
<a href="#l14.2678"></a><span id="l14.2678" class="difflineplus">+if test &quot;$ac_cv_int32_t&quot; = true ; then</span>
<a href="#l14.2679"></a><span id="l14.2679" class="difflineplus">+  AC_DEFINE(HAVE_INT32_T)</span>
<a href="#l14.2680"></a><span id="l14.2680" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2681"></a><span id="l14.2681" class="difflineplus">+else</span>
<a href="#l14.2682"></a><span id="l14.2682" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2683"></a><span id="l14.2683" class="difflineplus">+fi</span>
<a href="#l14.2684"></a><span id="l14.2684" class="difflineplus">+AC_MSG_CHECKING(for int64_t)</span>
<a href="#l14.2685"></a><span id="l14.2685" class="difflineplus">+AC_CACHE_VAL(ac_cv_int64_t,</span>
<a href="#l14.2686"></a><span id="l14.2686" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2687"></a><span id="l14.2687" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2688"></a><span id="l14.2688" class="difflineplus">+                 [int64_t foo = 0;],</span>
<a href="#l14.2689"></a><span id="l14.2689" class="difflineplus">+                 [ac_cv_int64_t=true],</span>
<a href="#l14.2690"></a><span id="l14.2690" class="difflineplus">+                 [ac_cv_int64_t=false])])</span>
<a href="#l14.2691"></a><span id="l14.2691" class="difflineplus">+if test &quot;$ac_cv_int64_t&quot; = true ; then</span>
<a href="#l14.2692"></a><span id="l14.2692" class="difflineplus">+  AC_DEFINE(HAVE_INT64_T)</span>
<a href="#l14.2693"></a><span id="l14.2693" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2694"></a><span id="l14.2694" class="difflineplus">+else</span>
<a href="#l14.2695"></a><span id="l14.2695" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2696"></a><span id="l14.2696" class="difflineplus">+fi</span>
<a href="#l14.2697"></a><span id="l14.2697" class="difflineplus">+AC_MSG_CHECKING(for int64)</span>
<a href="#l14.2698"></a><span id="l14.2698" class="difflineplus">+AC_CACHE_VAL(ac_cv_int64,</span>
<a href="#l14.2699"></a><span id="l14.2699" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2700"></a><span id="l14.2700" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2701"></a><span id="l14.2701" class="difflineplus">+                 [int64 foo = 0;],</span>
<a href="#l14.2702"></a><span id="l14.2702" class="difflineplus">+                 [ac_cv_int64=true],</span>
<a href="#l14.2703"></a><span id="l14.2703" class="difflineplus">+                 [ac_cv_int64=false])])</span>
<a href="#l14.2704"></a><span id="l14.2704" class="difflineplus">+if test &quot;$ac_cv_int64&quot; = true ; then</span>
<a href="#l14.2705"></a><span id="l14.2705" class="difflineplus">+  AC_DEFINE(HAVE_INT64)</span>
<a href="#l14.2706"></a><span id="l14.2706" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2707"></a><span id="l14.2707" class="difflineplus">+else</span>
<a href="#l14.2708"></a><span id="l14.2708" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2709"></a><span id="l14.2709" class="difflineplus">+fi</span>
<a href="#l14.2710"></a><span id="l14.2710" class="difflineplus">+AC_MSG_CHECKING(for uint)</span>
<a href="#l14.2711"></a><span id="l14.2711" class="difflineplus">+AC_CACHE_VAL(ac_cv_uint,</span>
<a href="#l14.2712"></a><span id="l14.2712" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2713"></a><span id="l14.2713" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2714"></a><span id="l14.2714" class="difflineplus">+                 [uint foo = 0;],</span>
<a href="#l14.2715"></a><span id="l14.2715" class="difflineplus">+                 [ac_cv_uint=true],</span>
<a href="#l14.2716"></a><span id="l14.2716" class="difflineplus">+                 [ac_cv_uint=false])])</span>
<a href="#l14.2717"></a><span id="l14.2717" class="difflineplus">+if test &quot;$ac_cv_uint&quot; = true ; then</span>
<a href="#l14.2718"></a><span id="l14.2718" class="difflineplus">+  AC_DEFINE(HAVE_UINT)</span>
<a href="#l14.2719"></a><span id="l14.2719" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2720"></a><span id="l14.2720" class="difflineplus">+else</span>
<a href="#l14.2721"></a><span id="l14.2721" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2722"></a><span id="l14.2722" class="difflineplus">+fi</span>
<a href="#l14.2723"></a><span id="l14.2723" class="difflineplus">+AC_MSG_CHECKING(for uint_t)</span>
<a href="#l14.2724"></a><span id="l14.2724" class="difflineplus">+AC_CACHE_VAL(ac_cv_uint_t,</span>
<a href="#l14.2725"></a><span id="l14.2725" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2726"></a><span id="l14.2726" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2727"></a><span id="l14.2727" class="difflineplus">+                 [uint_t foo = 0;],</span>
<a href="#l14.2728"></a><span id="l14.2728" class="difflineplus">+                 [ac_cv_uint_t=true],</span>
<a href="#l14.2729"></a><span id="l14.2729" class="difflineplus">+                 [ac_cv_uint_t=false])])</span>
<a href="#l14.2730"></a><span id="l14.2730" class="difflineplus">+if test &quot;$ac_cv_uint_t&quot; = true ; then</span>
<a href="#l14.2731"></a><span id="l14.2731" class="difflineplus">+  AC_DEFINE(HAVE_UINT_T)</span>
<a href="#l14.2732"></a><span id="l14.2732" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2733"></a><span id="l14.2733" class="difflineplus">+else</span>
<a href="#l14.2734"></a><span id="l14.2734" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2735"></a><span id="l14.2735" class="difflineplus">+fi</span>
<a href="#l14.2736"></a><span id="l14.2736" class="difflineplus">+AC_MSG_CHECKING(for uint16_t)</span>
<a href="#l14.2737"></a><span id="l14.2737" class="difflineplus">+AC_CACHE_VAL(ac_cv_uint16_t,</span>
<a href="#l14.2738"></a><span id="l14.2738" class="difflineplus">+ [AC_TRY_COMPILE([#include &lt;stdio.h&gt;</span>
<a href="#l14.2739"></a><span id="l14.2739" class="difflineplus">+                  #include &lt;sys/types.h&gt;],</span>
<a href="#l14.2740"></a><span id="l14.2740" class="difflineplus">+                 [uint16_t foo = 0;],</span>
<a href="#l14.2741"></a><span id="l14.2741" class="difflineplus">+                 [ac_cv_uint16_t=true],</span>
<a href="#l14.2742"></a><span id="l14.2742" class="difflineplus">+                 [ac_cv_uint16_t=false])])</span>
<a href="#l14.2743"></a><span id="l14.2743" class="difflineplus">+if test &quot;$ac_cv_uint16_t&quot; = true ; then</span>
<a href="#l14.2744"></a><span id="l14.2744" class="difflineplus">+  AC_DEFINE(HAVE_UINT16_T)</span>
<a href="#l14.2745"></a><span id="l14.2745" class="difflineplus">+  AC_MSG_RESULT(yes)</span>
<a href="#l14.2746"></a><span id="l14.2746" class="difflineplus">+else</span>
<a href="#l14.2747"></a><span id="l14.2747" class="difflineplus">+  AC_MSG_RESULT(no)</span>
<a href="#l14.2748"></a><span id="l14.2748" class="difflineplus">+fi</span>
<a href="#l14.2749"></a><span id="l14.2749" class="difflineplus">+</span>
<a href="#l14.2750"></a><span id="l14.2750" class="difflineplus">+dnl On the gcc trunk (as of 2001-02-09) _GNU_SOURCE, and thus __USE_GNU,</span>
<a href="#l14.2751"></a><span id="l14.2751" class="difflineplus">+dnl are defined when compiling C++ but not C.  Since the result of this</span>
<a href="#l14.2752"></a><span id="l14.2752" class="difflineplus">+dnl test is used only in C++, do it in C++.</span>
<a href="#l14.2753"></a><span id="l14.2753" class="difflineplus">+AC_LANG_CPLUSPLUS</span>
<a href="#l14.2754"></a><span id="l14.2754" class="difflineplus">+</span>
<a href="#l14.2755"></a><span id="l14.2755" class="difflineplus">+AC_MSG_CHECKING(for uname.domainname)</span>
<a href="#l14.2756"></a><span id="l14.2756" class="difflineplus">+AC_CACHE_VAL(ac_cv_have_uname_domainname_field,</span>
<a href="#l14.2757"></a><span id="l14.2757" class="difflineplus">+    [AC_TRY_COMPILE([#include &lt;sys/utsname.h&gt;],</span>
<a href="#l14.2758"></a><span id="l14.2758" class="difflineplus">+        [ struct utsname *res; char *domain; </span>
<a href="#l14.2759"></a><span id="l14.2759" class="difflineplus">+            (void)uname(res);  if (res != 0) { domain = res-&gt;domainname; } ],</span>
<a href="#l14.2760"></a><span id="l14.2760" class="difflineplus">+        [ac_cv_have_uname_domainname_field=true],</span>
<a href="#l14.2761"></a><span id="l14.2761" class="difflineplus">+        [ac_cv_have_uname_domainname_field=false])])</span>
<a href="#l14.2762"></a><span id="l14.2762" class="difflineplus">+</span>
<a href="#l14.2763"></a><span id="l14.2763" class="difflineplus">+if test &quot;$ac_cv_have_uname_domainname_field&quot; = &quot;true&quot;; then</span>
<a href="#l14.2764"></a><span id="l14.2764" class="difflineplus">+    AC_DEFINE(HAVE_UNAME_DOMAINNAME_FIELD)</span>
<a href="#l14.2765"></a><span id="l14.2765" class="difflineplus">+    AC_MSG_RESULT(yes)</span>
<a href="#l14.2766"></a><span id="l14.2766" class="difflineplus">+else</span>
<a href="#l14.2767"></a><span id="l14.2767" class="difflineplus">+    AC_MSG_RESULT(no)</span>
<a href="#l14.2768"></a><span id="l14.2768" class="difflineplus">+fi</span>
<a href="#l14.2769"></a><span id="l14.2769" class="difflineplus">+</span>
<a href="#l14.2770"></a><span id="l14.2770" class="difflineplus">+AC_MSG_CHECKING(for uname.__domainname)</span>
<a href="#l14.2771"></a><span id="l14.2771" class="difflineplus">+AC_CACHE_VAL(ac_cv_have_uname_us_domainname_field,</span>
<a href="#l14.2772"></a><span id="l14.2772" class="difflineplus">+    [AC_TRY_COMPILE([#include &lt;sys/utsname.h&gt;],</span>
<a href="#l14.2773"></a><span id="l14.2773" class="difflineplus">+        [ struct utsname *res; char *domain; </span>
<a href="#l14.2774"></a><span id="l14.2774" class="difflineplus">+            (void)uname(res);  if (res != 0) { domain = res-&gt;__domainname; } ],</span>
<a href="#l14.2775"></a><span id="l14.2775" class="difflineplus">+        [ac_cv_have_uname_us_domainname_field=true],</span>
<a href="#l14.2776"></a><span id="l14.2776" class="difflineplus">+        [ac_cv_have_uname_us_domainname_field=false])])</span>
<a href="#l14.2777"></a><span id="l14.2777" class="difflineplus">+</span>
<a href="#l14.2778"></a><span id="l14.2778" class="difflineplus">+if test &quot;$ac_cv_have_uname_us_domainname_field&quot; = &quot;true&quot;; then</span>
<a href="#l14.2779"></a><span id="l14.2779" class="difflineplus">+    AC_DEFINE(HAVE_UNAME_US_DOMAINNAME_FIELD)</span>
<a href="#l14.2780"></a><span id="l14.2780" class="difflineplus">+    AC_MSG_RESULT(yes)</span>
<a href="#l14.2781"></a><span id="l14.2781" class="difflineplus">+else</span>
<a href="#l14.2782"></a><span id="l14.2782" class="difflineplus">+    AC_MSG_RESULT(no)</span>
<a href="#l14.2783"></a><span id="l14.2783" class="difflineplus">+fi</span>
<a href="#l14.2784"></a><span id="l14.2784" class="difflineplus">+</span>
<a href="#l14.2785"></a><span id="l14.2785" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.2786"></a><span id="l14.2786" class="difflineplus">+</span>
<a href="#l14.2787"></a><span id="l14.2787" class="difflineplus">+dnl Check for usable wchar_t (2 bytes, unsigned)</span>
<a href="#l14.2788"></a><span id="l14.2788" class="difflineplus">+dnl (we really don't need the unsignedness check anymore)</span>
<a href="#l14.2789"></a><span id="l14.2789" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2790"></a><span id="l14.2790" class="difflineplus">+</span>
<a href="#l14.2791"></a><span id="l14.2791" class="difflineplus">+AC_CACHE_CHECK(for usable wchar_t (2 bytes, unsigned),</span>
<a href="#l14.2792"></a><span id="l14.2792" class="difflineplus">+    ac_cv_have_usable_wchar_v2,</span>
<a href="#l14.2793"></a><span id="l14.2793" class="difflineplus">+    [AC_TRY_COMPILE([#include &lt;stddef.h&gt;</span>
<a href="#l14.2794"></a><span id="l14.2794" class="difflineplus">+                     $configure_static_assert_macros],</span>
<a href="#l14.2795"></a><span id="l14.2795" class="difflineplus">+                    [CONFIGURE_STATIC_ASSERT(sizeof(wchar_t) == 2);</span>
<a href="#l14.2796"></a><span id="l14.2796" class="difflineplus">+                     CONFIGURE_STATIC_ASSERT((wchar_t)-1 &gt; (wchar_t) 0)],</span>
<a href="#l14.2797"></a><span id="l14.2797" class="difflineplus">+                    ac_cv_have_usable_wchar_v2=&quot;yes&quot;,</span>
<a href="#l14.2798"></a><span id="l14.2798" class="difflineplus">+                    ac_cv_have_usable_wchar_v2=&quot;no&quot;)])</span>
<a href="#l14.2799"></a><span id="l14.2799" class="difflineplus">+if test &quot;$ac_cv_have_usable_wchar_v2&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2800"></a><span id="l14.2800" class="difflineplus">+    AC_DEFINE(HAVE_CPP_2BYTE_WCHAR_T)</span>
<a href="#l14.2801"></a><span id="l14.2801" class="difflineplus">+    HAVE_CPP_2BYTE_WCHAR_T=1</span>
<a href="#l14.2802"></a><span id="l14.2802" class="difflineplus">+else</span>
<a href="#l14.2803"></a><span id="l14.2803" class="difflineplus">+dnl This is really gcc-only</span>
<a href="#l14.2804"></a><span id="l14.2804" class="difflineplus">+dnl Do this test using CXX only since some versions of gcc</span>
<a href="#l14.2805"></a><span id="l14.2805" class="difflineplus">+dnl 2.95-2.97 have a signed wchar_t in c++ only and some versions</span>
<a href="#l14.2806"></a><span id="l14.2806" class="difflineplus">+dnl only have short-wchar support for c++.</span>
<a href="#l14.2807"></a><span id="l14.2807" class="difflineplus">+dnl Note that we assume that mac &amp; win32 have short wchar (see nscore.h)</span>
<a href="#l14.2808"></a><span id="l14.2808" class="difflineplus">+</span>
<a href="#l14.2809"></a><span id="l14.2809" class="difflineplus">+    AC_LANG_SAVE</span>
<a href="#l14.2810"></a><span id="l14.2810" class="difflineplus">+    AC_LANG_CPLUSPLUS</span>
<a href="#l14.2811"></a><span id="l14.2811" class="difflineplus">+    _SAVE_CXXFLAGS=$CXXFLAGS</span>
<a href="#l14.2812"></a><span id="l14.2812" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS -fshort-wchar&quot;</span>
<a href="#l14.2813"></a><span id="l14.2813" class="difflineplus">+</span>
<a href="#l14.2814"></a><span id="l14.2814" class="difflineplus">+    AC_CACHE_CHECK(for compiler -fshort-wchar option, </span>
<a href="#l14.2815"></a><span id="l14.2815" class="difflineplus">+        ac_cv_have_usable_wchar_option_v2,</span>
<a href="#l14.2816"></a><span id="l14.2816" class="difflineplus">+        [AC_TRY_LINK([#include &lt;stddef.h&gt;</span>
<a href="#l14.2817"></a><span id="l14.2817" class="difflineplus">+                      $configure_static_assert_macros],</span>
<a href="#l14.2818"></a><span id="l14.2818" class="difflineplus">+                     [CONFIGURE_STATIC_ASSERT(sizeof(wchar_t) == 2);</span>
<a href="#l14.2819"></a><span id="l14.2819" class="difflineplus">+                      CONFIGURE_STATIC_ASSERT((wchar_t)-1 &gt; (wchar_t) 0)],</span>
<a href="#l14.2820"></a><span id="l14.2820" class="difflineplus">+                     ac_cv_have_usable_wchar_option_v2=&quot;yes&quot;,</span>
<a href="#l14.2821"></a><span id="l14.2821" class="difflineplus">+                     ac_cv_have_usable_wchar_option_v2=&quot;no&quot;)])</span>
<a href="#l14.2822"></a><span id="l14.2822" class="difflineplus">+</span>
<a href="#l14.2823"></a><span id="l14.2823" class="difflineplus">+    if test &quot;$ac_cv_have_usable_wchar_option_v2&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2824"></a><span id="l14.2824" class="difflineplus">+        AC_DEFINE(HAVE_CPP_2BYTE_WCHAR_T)</span>
<a href="#l14.2825"></a><span id="l14.2825" class="difflineplus">+        HAVE_CPP_2BYTE_WCHAR_T=1</span>
<a href="#l14.2826"></a><span id="l14.2826" class="difflineplus">+    else    </span>
<a href="#l14.2827"></a><span id="l14.2827" class="difflineplus">+        CXXFLAGS=$_SAVE_CXXFLAGS</span>
<a href="#l14.2828"></a><span id="l14.2828" class="difflineplus">+    fi</span>
<a href="#l14.2829"></a><span id="l14.2829" class="difflineplus">+    AC_LANG_RESTORE</span>
<a href="#l14.2830"></a><span id="l14.2830" class="difflineplus">+fi</span>
<a href="#l14.2831"></a><span id="l14.2831" class="difflineplus">+</span>
<a href="#l14.2832"></a><span id="l14.2832" class="difflineplus">+dnl Check for .hidden assembler directive and visibility attribute.</span>
<a href="#l14.2833"></a><span id="l14.2833" class="difflineplus">+dnl Borrowed from glibc configure.in</span>
<a href="#l14.2834"></a><span id="l14.2834" class="difflineplus">+dnl ===============================================================</span>
<a href="#l14.2835"></a><span id="l14.2835" class="difflineplus">+if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.2836"></a><span id="l14.2836" class="difflineplus">+  AC_CACHE_CHECK(for visibility(hidden) attribute,</span>
<a href="#l14.2837"></a><span id="l14.2837" class="difflineplus">+                 ac_cv_visibility_hidden,</span>
<a href="#l14.2838"></a><span id="l14.2838" class="difflineplus">+                 [cat &gt; conftest.c &lt;&lt;EOF</span>
<a href="#l14.2839"></a><span id="l14.2839" class="difflineplus">+                  int foo __attribute__ ((visibility (&quot;hidden&quot;))) = 1;</span>
<a href="#l14.2840"></a><span id="l14.2840" class="difflineplus">+EOF</span>
<a href="#l14.2841"></a><span id="l14.2841" class="difflineplus">+                  ac_cv_visibility_hidden=no</span>
<a href="#l14.2842"></a><span id="l14.2842" class="difflineplus">+                  if ${CC-cc} -Werror -S conftest.c -o conftest.s &gt;/dev/null 2&gt;&amp;1; then</span>
<a href="#l14.2843"></a><span id="l14.2843" class="difflineplus">+                    if egrep '\.(hidden|private_extern).*foo' conftest.s &gt;/dev/null; then</span>
<a href="#l14.2844"></a><span id="l14.2844" class="difflineplus">+                      ac_cv_visibility_hidden=yes</span>
<a href="#l14.2845"></a><span id="l14.2845" class="difflineplus">+                    fi</span>
<a href="#l14.2846"></a><span id="l14.2846" class="difflineplus">+                  fi</span>
<a href="#l14.2847"></a><span id="l14.2847" class="difflineplus">+                  rm -f conftest.[cs]</span>
<a href="#l14.2848"></a><span id="l14.2848" class="difflineplus">+                 ])</span>
<a href="#l14.2849"></a><span id="l14.2849" class="difflineplus">+  if test &quot;$ac_cv_visibility_hidden&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2850"></a><span id="l14.2850" class="difflineplus">+    AC_DEFINE(HAVE_VISIBILITY_HIDDEN_ATTRIBUTE)</span>
<a href="#l14.2851"></a><span id="l14.2851" class="difflineplus">+</span>
<a href="#l14.2852"></a><span id="l14.2852" class="difflineplus">+    AC_CACHE_CHECK(for visibility(default) attribute,</span>
<a href="#l14.2853"></a><span id="l14.2853" class="difflineplus">+                   ac_cv_visibility_default,</span>
<a href="#l14.2854"></a><span id="l14.2854" class="difflineplus">+                   [cat &gt; conftest.c &lt;&lt;EOF</span>
<a href="#l14.2855"></a><span id="l14.2855" class="difflineplus">+                    int foo __attribute__ ((visibility (&quot;default&quot;))) = 1;</span>
<a href="#l14.2856"></a><span id="l14.2856" class="difflineplus">+EOF</span>
<a href="#l14.2857"></a><span id="l14.2857" class="difflineplus">+                    ac_cv_visibility_default=no</span>
<a href="#l14.2858"></a><span id="l14.2858" class="difflineplus">+                    if ${CC-cc} -fvisibility=hidden -Werror -S conftest.c -o conftest.s &gt;/dev/null 2&gt;&amp;1; then</span>
<a href="#l14.2859"></a><span id="l14.2859" class="difflineplus">+                      if ! egrep '\.(hidden|private_extern).*foo' conftest.s &gt;/dev/null; then</span>
<a href="#l14.2860"></a><span id="l14.2860" class="difflineplus">+                        ac_cv_visibility_default=yes</span>
<a href="#l14.2861"></a><span id="l14.2861" class="difflineplus">+                      fi</span>
<a href="#l14.2862"></a><span id="l14.2862" class="difflineplus">+                    fi</span>
<a href="#l14.2863"></a><span id="l14.2863" class="difflineplus">+                    rm -f conftest.[cs]</span>
<a href="#l14.2864"></a><span id="l14.2864" class="difflineplus">+                   ])</span>
<a href="#l14.2865"></a><span id="l14.2865" class="difflineplus">+    if test &quot;$ac_cv_visibility_default&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2866"></a><span id="l14.2866" class="difflineplus">+      AC_DEFINE(HAVE_VISIBILITY_ATTRIBUTE)</span>
<a href="#l14.2867"></a><span id="l14.2867" class="difflineplus">+</span>
<a href="#l14.2868"></a><span id="l14.2868" class="difflineplus">+      AC_CACHE_CHECK(for visibility pragma support,</span>
<a href="#l14.2869"></a><span id="l14.2869" class="difflineplus">+                     ac_cv_visibility_pragma,</span>
<a href="#l14.2870"></a><span id="l14.2870" class="difflineplus">+                     [cat &gt; conftest.c &lt;&lt;EOF</span>
<a href="#l14.2871"></a><span id="l14.2871" class="difflineplus">+#pragma GCC visibility push(hidden)</span>
<a href="#l14.2872"></a><span id="l14.2872" class="difflineplus">+                      int foo_hidden = 1;</span>
<a href="#l14.2873"></a><span id="l14.2873" class="difflineplus">+#pragma GCC visibility push(default)</span>
<a href="#l14.2874"></a><span id="l14.2874" class="difflineplus">+                      int foo_default = 1;</span>
<a href="#l14.2875"></a><span id="l14.2875" class="difflineplus">+EOF</span>
<a href="#l14.2876"></a><span id="l14.2876" class="difflineplus">+                      ac_cv_visibility_pragma=no</span>
<a href="#l14.2877"></a><span id="l14.2877" class="difflineplus">+                      if ${CC-cc} -Werror -S conftest.c -o conftest.s &gt;/dev/null 2&gt;&amp;1; then</span>
<a href="#l14.2878"></a><span id="l14.2878" class="difflineplus">+                        if egrep '\.(hidden|private_extern).*foo_hidden' conftest.s &gt;/dev/null; then</span>
<a href="#l14.2879"></a><span id="l14.2879" class="difflineplus">+                          if ! egrep '\.(hidden|private_extern).*foo_default' conftest.s &gt; /dev/null; then</span>
<a href="#l14.2880"></a><span id="l14.2880" class="difflineplus">+                            ac_cv_visibility_pragma=yes</span>
<a href="#l14.2881"></a><span id="l14.2881" class="difflineplus">+                          fi</span>
<a href="#l14.2882"></a><span id="l14.2882" class="difflineplus">+                        fi</span>
<a href="#l14.2883"></a><span id="l14.2883" class="difflineplus">+                      fi</span>
<a href="#l14.2884"></a><span id="l14.2884" class="difflineplus">+                      rm -f conftest.[cs]</span>
<a href="#l14.2885"></a><span id="l14.2885" class="difflineplus">+                    ])</span>
<a href="#l14.2886"></a><span id="l14.2886" class="difflineplus">+      if test &quot;$ac_cv_visibility_pragma&quot; = &quot;yes&quot;; then</span>
<a href="#l14.2887"></a><span id="l14.2887" class="difflineplus">+        AC_CACHE_CHECK(For gcc visibility bug with class-level attributes (GCC bug 26905),</span>
<a href="#l14.2888"></a><span id="l14.2888" class="difflineplus">+                       ac_cv_have_visibility_class_bug,</span>
<a href="#l14.2889"></a><span id="l14.2889" class="difflineplus">+                       [cat &gt; conftest.c &lt;&lt;EOF</span>
<a href="#l14.2890"></a><span id="l14.2890" class="difflineplus">+#pragma GCC visibility push(hidden)</span>
<a href="#l14.2891"></a><span id="l14.2891" class="difflineplus">+struct __attribute__ ((visibility (&quot;default&quot;))) TestStruct {</span>
<a href="#l14.2892"></a><span id="l14.2892" class="difflineplus">+  static void Init();</span>
<a href="#l14.2893"></a><span id="l14.2893" class="difflineplus">+};</span>
<a href="#l14.2894"></a><span id="l14.2894" class="difflineplus">+__attribute__ ((visibility (&quot;default&quot;))) void TestFunc() {</span>
<a href="#l14.2895"></a><span id="l14.2895" class="difflineplus">+  TestStruct::Init();</span>
<a href="#l14.2896"></a><span id="l14.2896" class="difflineplus">+}</span>
<a href="#l14.2897"></a><span id="l14.2897" class="difflineplus">+EOF</span>
<a href="#l14.2898"></a><span id="l14.2898" class="difflineplus">+                       ac_cv_have_visibility_class_bug=no</span>
<a href="#l14.2899"></a><span id="l14.2899" class="difflineplus">+                       if ! ${CXX-g++} ${CXXFLAGS} ${DSO_PIC_CFLAGS} ${DSO_LDOPTS} -S -o conftest.S conftest.c &gt; /dev/null 2&gt;&amp;1 ; then</span>
<a href="#l14.2900"></a><span id="l14.2900" class="difflineplus">+                         ac_cv_have_visibility_class_bug=yes</span>
<a href="#l14.2901"></a><span id="l14.2901" class="difflineplus">+                       else</span>
<a href="#l14.2902"></a><span id="l14.2902" class="difflineplus">+                         if test `egrep -c '@PLT|\\$stub' conftest.S` = 0; then</span>
<a href="#l14.2903"></a><span id="l14.2903" class="difflineplus">+                           ac_cv_have_visibility_class_bug=yes</span>
<a href="#l14.2904"></a><span id="l14.2904" class="difflineplus">+                         fi</span>
<a href="#l14.2905"></a><span id="l14.2905" class="difflineplus">+                       fi</span>
<a href="#l14.2906"></a><span id="l14.2906" class="difflineplus">+                       rm -rf conftest.{c,S}</span>
<a href="#l14.2907"></a><span id="l14.2907" class="difflineplus">+                       ])</span>
<a href="#l14.2908"></a><span id="l14.2908" class="difflineplus">+</span>
<a href="#l14.2909"></a><span id="l14.2909" class="difflineplus">+        AC_CACHE_CHECK(For x86_64 gcc visibility bug with builtins (GCC bug 20297),</span>
<a href="#l14.2910"></a><span id="l14.2910" class="difflineplus">+                       ac_cv_have_visibility_builtin_bug,</span>
<a href="#l14.2911"></a><span id="l14.2911" class="difflineplus">+                       [cat &gt; conftest.c &lt;&lt;EOF</span>
<a href="#l14.2912"></a><span id="l14.2912" class="difflineplus">+#pragma GCC visibility push(hidden)</span>
<a href="#l14.2913"></a><span id="l14.2913" class="difflineplus">+#pragma GCC visibility push(default)</span>
<a href="#l14.2914"></a><span id="l14.2914" class="difflineplus">+#include &lt;string.h&gt;</span>
<a href="#l14.2915"></a><span id="l14.2915" class="difflineplus">+#pragma GCC visibility pop</span>
<a href="#l14.2916"></a><span id="l14.2916" class="difflineplus">+</span>
<a href="#l14.2917"></a><span id="l14.2917" class="difflineplus">+__attribute__ ((visibility (&quot;default&quot;))) void Func() {</span>
<a href="#l14.2918"></a><span id="l14.2918" class="difflineplus">+  char c[[100]];</span>
<a href="#l14.2919"></a><span id="l14.2919" class="difflineplus">+  memset(c, 0, sizeof(c));</span>
<a href="#l14.2920"></a><span id="l14.2920" class="difflineplus">+}</span>
<a href="#l14.2921"></a><span id="l14.2921" class="difflineplus">+EOF</span>
<a href="#l14.2922"></a><span id="l14.2922" class="difflineplus">+                       ac_cv_have_visibility_builtin_bug=no</span>
<a href="#l14.2923"></a><span id="l14.2923" class="difflineplus">+                       if ! ${CC-cc} ${CFLAGS} ${DSO_PIC_CFLAGS} ${DSO_LDOPTS} -O2 -S -o conftest.S conftest.c &gt; /dev/null 2&gt;&amp;1 ; then</span>
<a href="#l14.2924"></a><span id="l14.2924" class="difflineplus">+                         ac_cv_have_visibility_builtin_bug=yes</span>
<a href="#l14.2925"></a><span id="l14.2925" class="difflineplus">+                       else</span>
<a href="#l14.2926"></a><span id="l14.2926" class="difflineplus">+                         if test `grep -c &quot;@PLT&quot; conftest.S` = 0; then</span>
<a href="#l14.2927"></a><span id="l14.2927" class="difflineplus">+                           ac_cv_visibility_builtin_bug=yes</span>
<a href="#l14.2928"></a><span id="l14.2928" class="difflineplus">+                         fi</span>
<a href="#l14.2929"></a><span id="l14.2929" class="difflineplus">+                       fi</span>
<a href="#l14.2930"></a><span id="l14.2930" class="difflineplus">+                       rm -f conftest.{c,S}</span>
<a href="#l14.2931"></a><span id="l14.2931" class="difflineplus">+                       ])</span>
<a href="#l14.2932"></a><span id="l14.2932" class="difflineplus">+        if test &quot;$ac_cv_have_visibility_builtin_bug&quot; = &quot;no&quot; -a \</span>
<a href="#l14.2933"></a><span id="l14.2933" class="difflineplus">+                &quot;$ac_cv_have_visibility_class_bug&quot; = &quot;no&quot;; then</span>
<a href="#l14.2934"></a><span id="l14.2934" class="difflineplus">+          VISIBILITY_FLAGS='-I$(DIST)/include/system_wrappers -include $(MOZILLA_SRCDIR)/config/gcc_hidden.h'</span>
<a href="#l14.2935"></a><span id="l14.2935" class="difflineplus">+          WRAP_SYSTEM_INCLUDES=1</span>
<a href="#l14.2936"></a><span id="l14.2936" class="difflineplus">+        else</span>
<a href="#l14.2937"></a><span id="l14.2937" class="difflineplus">+          VISIBILITY_FLAGS='-fvisibility=hidden'</span>
<a href="#l14.2938"></a><span id="l14.2938" class="difflineplus">+        fi # have visibility pragma bug</span>
<a href="#l14.2939"></a><span id="l14.2939" class="difflineplus">+      fi   # have visibility pragma</span>
<a href="#l14.2940"></a><span id="l14.2940" class="difflineplus">+    fi     # have visibility(default) attribute</span>
<a href="#l14.2941"></a><span id="l14.2941" class="difflineplus">+  fi       # have visibility(hidden) attribute</span>
<a href="#l14.2942"></a><span id="l14.2942" class="difflineplus">+fi         # GNU_CC</span>
<a href="#l14.2943"></a><span id="l14.2943" class="difflineplus">+</span>
<a href="#l14.2944"></a><span id="l14.2944" class="difflineplus">+AC_SUBST(WRAP_SYSTEM_INCLUDES)</span>
<a href="#l14.2945"></a><span id="l14.2945" class="difflineplus">+AC_SUBST(VISIBILITY_FLAGS)</span>
<a href="#l14.2946"></a><span id="l14.2946" class="difflineplus">+</span>
<a href="#l14.2947"></a><span id="l14.2947" class="difflineplus">+dnl Checks for header files.</span>
<a href="#l14.2948"></a><span id="l14.2948" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.2949"></a><span id="l14.2949" class="difflineplus">+AC_HEADER_DIRENT</span>
<a href="#l14.2950"></a><span id="l14.2950" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.2951"></a><span id="l14.2951" class="difflineplus">+freebsd*)</span>
<a href="#l14.2952"></a><span id="l14.2952" class="difflineplus">+# for stuff like -lXshm</span>
<a href="#l14.2953"></a><span id="l14.2953" class="difflineplus">+    CPPFLAGS=&quot;${CPPFLAGS} ${X_CFLAGS}&quot;</span>
<a href="#l14.2954"></a><span id="l14.2954" class="difflineplus">+    ;;</span>
<a href="#l14.2955"></a><span id="l14.2955" class="difflineplus">+esac</span>
<a href="#l14.2956"></a><span id="l14.2956" class="difflineplus">+AC_CHECK_HEADERS(sys/byteorder.h compat.h getopt.h)</span>
<a href="#l14.2957"></a><span id="l14.2957" class="difflineplus">+AC_CHECK_HEADERS(sys/bitypes.h memory.h unistd.h)</span>
<a href="#l14.2958"></a><span id="l14.2958" class="difflineplus">+AC_CHECK_HEADERS(gnu/libc-version.h nl_types.h)</span>
<a href="#l14.2959"></a><span id="l14.2959" class="difflineplus">+AC_CHECK_HEADERS(malloc.h)</span>
<a href="#l14.2960"></a><span id="l14.2960" class="difflineplus">+AC_CHECK_HEADERS(X11/XKBlib.h)</span>
<a href="#l14.2961"></a><span id="l14.2961" class="difflineplus">+</span>
<a href="#l14.2962"></a><span id="l14.2962" class="difflineplus">+dnl These are all the places some variant of statfs can be hiding.</span>
<a href="#l14.2963"></a><span id="l14.2963" class="difflineplus">+AC_CHECK_HEADERS(sys/statvfs.h sys/statfs.h sys/vfs.h sys/mount.h)</span>
<a href="#l14.2964"></a><span id="l14.2964" class="difflineplus">+</span>
<a href="#l14.2965"></a><span id="l14.2965" class="difflineplus">+dnl Try for MMX support</span>
<a href="#l14.2966"></a><span id="l14.2966" class="difflineplus">+dnl NB - later gcc versions require -mmmx for this header to be successfully</span>
<a href="#l14.2967"></a><span id="l14.2967" class="difflineplus">+dnl included (or another option which implies it, such as -march=pentium-mmx)</span>
<a href="#l14.2968"></a><span id="l14.2968" class="difflineplus">+AC_CHECK_HEADERS(mmintrin.h)</span>
<a href="#l14.2969"></a><span id="l14.2969" class="difflineplus">+</span>
<a href="#l14.2970"></a><span id="l14.2970" class="difflineplus">+dnl Check whether the compiler supports the new-style C++ standard</span>
<a href="#l14.2971"></a><span id="l14.2971" class="difflineplus">+dnl library headers (i.e. &lt;new&gt;) or needs the old &quot;new.h&quot;</span>
<a href="#l14.2972"></a><span id="l14.2972" class="difflineplus">+AC_LANG_CPLUSPLUS</span>
<a href="#l14.2973"></a><span id="l14.2973" class="difflineplus">+NEW_H=new.h</span>
<a href="#l14.2974"></a><span id="l14.2974" class="difflineplus">+AC_CHECK_HEADER(new, [NEW_H=new])</span>
<a href="#l14.2975"></a><span id="l14.2975" class="difflineplus">+AC_DEFINE_UNQUOTED(NEW_H, &lt;$NEW_H&gt;)</span>
<a href="#l14.2976"></a><span id="l14.2976" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.2977"></a><span id="l14.2977" class="difflineplus">+</span>
<a href="#l14.2978"></a><span id="l14.2978" class="difflineplus">+AC_ARG_ENABLE(dtrace,</span>
<a href="#l14.2979"></a><span id="l14.2979" class="difflineplus">+              [  --enable-dtrace         build with dtrace support if available (default=no)],</span>
<a href="#l14.2980"></a><span id="l14.2980" class="difflineplus">+              [enable_dtrace=&quot;yes&quot;],)</span>
<a href="#l14.2981"></a><span id="l14.2981" class="difflineplus">+if test &quot;x$enable_dtrace&quot; = &quot;xyes&quot;; then</span>
<a href="#l14.2982"></a><span id="l14.2982" class="difflineplus">+  AC_CHECK_HEADER(sys/sdt.h, HAVE_DTRACE=1)</span>
<a href="#l14.2983"></a><span id="l14.2983" class="difflineplus">+  if test -n &quot;$HAVE_DTRACE&quot;; then</span>
<a href="#l14.2984"></a><span id="l14.2984" class="difflineplus">+      AC_DEFINE(INCLUDE_MOZILLA_DTRACE)</span>
<a href="#l14.2985"></a><span id="l14.2985" class="difflineplus">+  else</span>
<a href="#l14.2986"></a><span id="l14.2986" class="difflineplus">+      AC_MSG_ERROR([dtrace enabled but sys/sdt.h not found]);</span>
<a href="#l14.2987"></a><span id="l14.2987" class="difflineplus">+  fi</span>
<a href="#l14.2988"></a><span id="l14.2988" class="difflineplus">+fi</span>
<a href="#l14.2989"></a><span id="l14.2989" class="difflineplus">+AC_SUBST(HAVE_DTRACE)</span>
<a href="#l14.2990"></a><span id="l14.2990" class="difflineplus">+</span>
<a href="#l14.2991"></a><span id="l14.2991" class="difflineplus">+case $target in</span>
<a href="#l14.2992"></a><span id="l14.2992" class="difflineplus">+*-aix4.3*|*-aix5*)</span>
<a href="#l14.2993"></a><span id="l14.2993" class="difflineplus">+	;;</span>
<a href="#l14.2994"></a><span id="l14.2994" class="difflineplus">+*)</span>
<a href="#l14.2995"></a><span id="l14.2995" class="difflineplus">+	AC_CHECK_HEADERS(sys/cdefs.h)</span>
<a href="#l14.2996"></a><span id="l14.2996" class="difflineplus">+	;;</span>
<a href="#l14.2997"></a><span id="l14.2997" class="difflineplus">+esac</span>
<a href="#l14.2998"></a><span id="l14.2998" class="difflineplus">+</span>
<a href="#l14.2999"></a><span id="l14.2999" class="difflineplus">+dnl Checks for libraries.</span>
<a href="#l14.3000"></a><span id="l14.3000" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3001"></a><span id="l14.3001" class="difflineplus">+case $target in</span>
<a href="#l14.3002"></a><span id="l14.3002" class="difflineplus">+*-hpux11.*)</span>
<a href="#l14.3003"></a><span id="l14.3003" class="difflineplus">+	;;</span>
<a href="#l14.3004"></a><span id="l14.3004" class="difflineplus">+*)</span>
<a href="#l14.3005"></a><span id="l14.3005" class="difflineplus">+	AC_CHECK_LIB(c_r, gethostbyname_r)</span>
<a href="#l14.3006"></a><span id="l14.3006" class="difflineplus">+	;;</span>
<a href="#l14.3007"></a><span id="l14.3007" class="difflineplus">+esac</span>
<a href="#l14.3008"></a><span id="l14.3008" class="difflineplus">+</span>
<a href="#l14.3009"></a><span id="l14.3009" class="difflineplus">+dnl We don't want to link with libdl even if it's present on OS X, since</span>
<a href="#l14.3010"></a><span id="l14.3010" class="difflineplus">+dnl it's not used and not part of the default installation.</span>
<a href="#l14.3011"></a><span id="l14.3011" class="difflineplus">+dnl The same goes for BeOS.</span>
<a href="#l14.3012"></a><span id="l14.3012" class="difflineplus">+dnl We don't want to link against libm or libpthread on Darwin since</span>
<a href="#l14.3013"></a><span id="l14.3013" class="difflineplus">+dnl they both are just symlinks to libSystem and explicitly linking</span>
<a href="#l14.3014"></a><span id="l14.3014" class="difflineplus">+dnl against libSystem causes issues when debugging (see bug 299601).</span>
<a href="#l14.3015"></a><span id="l14.3015" class="difflineplus">+case $target in</span>
<a href="#l14.3016"></a><span id="l14.3016" class="difflineplus">+*-darwin*)</span>
<a href="#l14.3017"></a><span id="l14.3017" class="difflineplus">+    ;;</span>
<a href="#l14.3018"></a><span id="l14.3018" class="difflineplus">+*-beos*)</span>
<a href="#l14.3019"></a><span id="l14.3019" class="difflineplus">+    ;;</span>
<a href="#l14.3020"></a><span id="l14.3020" class="difflineplus">+*)</span>
<a href="#l14.3021"></a><span id="l14.3021" class="difflineplus">+    AC_CHECK_LIB(m, atan)</span>
<a href="#l14.3022"></a><span id="l14.3022" class="difflineplus">+    AC_CHECK_LIB(dl, dlopen,</span>
<a href="#l14.3023"></a><span id="l14.3023" class="difflineplus">+    AC_CHECK_HEADER(dlfcn.h, </span>
<a href="#l14.3024"></a><span id="l14.3024" class="difflineplus">+        LIBS=&quot;-ldl $LIBS&quot;</span>
<a href="#l14.3025"></a><span id="l14.3025" class="difflineplus">+        AC_DEFINE(HAVE_LIBDL)))</span>
<a href="#l14.3026"></a><span id="l14.3026" class="difflineplus">+    ;;</span>
<a href="#l14.3027"></a><span id="l14.3027" class="difflineplus">+esac</span>
<a href="#l14.3028"></a><span id="l14.3028" class="difflineplus">+</span>
<a href="#l14.3029"></a><span id="l14.3029" class="difflineplus">+_SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.3030"></a><span id="l14.3030" class="difflineplus">+CFLAGS=&quot;$CFLAGS -D_GNU_SOURCE&quot;</span>
<a href="#l14.3031"></a><span id="l14.3031" class="difflineplus">+AC_CHECK_FUNCS(dladdr)</span>
<a href="#l14.3032"></a><span id="l14.3032" class="difflineplus">+CFLAGS=&quot;$_SAVE_CFLAGS&quot;</span>
<a href="#l14.3033"></a><span id="l14.3033" class="difflineplus">+</span>
<a href="#l14.3034"></a><span id="l14.3034" class="difflineplus">+if test ! &quot;$GNU_CXX&quot;; then</span>
<a href="#l14.3035"></a><span id="l14.3035" class="difflineplus">+</span>
<a href="#l14.3036"></a><span id="l14.3036" class="difflineplus">+    case $target in</span>
<a href="#l14.3037"></a><span id="l14.3037" class="difflineplus">+    *-aix*)</span>
<a href="#l14.3038"></a><span id="l14.3038" class="difflineplus">+	AC_CHECK_LIB(C_r, demangle)</span>
<a href="#l14.3039"></a><span id="l14.3039" class="difflineplus">+	;;</span>
<a href="#l14.3040"></a><span id="l14.3040" class="difflineplus">+     *)</span>
<a href="#l14.3041"></a><span id="l14.3041" class="difflineplus">+	AC_CHECK_LIB(C, demangle)</span>
<a href="#l14.3042"></a><span id="l14.3042" class="difflineplus">+	;;</span>
<a href="#l14.3043"></a><span id="l14.3043" class="difflineplus">+     esac</span>
<a href="#l14.3044"></a><span id="l14.3044" class="difflineplus">+fi</span>
<a href="#l14.3045"></a><span id="l14.3045" class="difflineplus">+AC_CHECK_LIB(socket, socket)</span>
<a href="#l14.3046"></a><span id="l14.3046" class="difflineplus">+</span>
<a href="#l14.3047"></a><span id="l14.3047" class="difflineplus">+XLDFLAGS=&quot;$X_LIBS&quot;</span>
<a href="#l14.3048"></a><span id="l14.3048" class="difflineplus">+XLIBS=&quot;$X_EXTRA_LIBS&quot;</span>
<a href="#l14.3049"></a><span id="l14.3049" class="difflineplus">+</span>
<a href="#l14.3050"></a><span id="l14.3050" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3051"></a><span id="l14.3051" class="difflineplus">+dnl Checks for X libraries.</span>
<a href="#l14.3052"></a><span id="l14.3052" class="difflineplus">+dnl Ordering is important.</span>
<a href="#l14.3053"></a><span id="l14.3053" class="difflineplus">+dnl Xt is dependent upon SM as of X11R6</span>
<a href="#l14.3054"></a><span id="l14.3054" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3055"></a><span id="l14.3055" class="difflineplus">+if test &quot;$no_x&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3056"></a><span id="l14.3056" class="difflineplus">+    AC_DEFINE(NO_X11)</span>
<a href="#l14.3057"></a><span id="l14.3057" class="difflineplus">+else</span>
<a href="#l14.3058"></a><span id="l14.3058" class="difflineplus">+    AC_DEFINE_UNQUOTED(FUNCPROTO,15)</span>
<a href="#l14.3059"></a><span id="l14.3059" class="difflineplus">+	XLIBS=&quot;-lX11 $XLIBS&quot;</span>
<a href="#l14.3060"></a><span id="l14.3060" class="difflineplus">+	_SAVE_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l14.3061"></a><span id="l14.3061" class="difflineplus">+	LDFLAGS=&quot;$XLDFLAGS $LDFLAGS&quot;</span>
<a href="#l14.3062"></a><span id="l14.3062" class="difflineplus">+	AC_CHECK_LIB(X11, XDrawLines, [X11_LIBS=&quot;-lX11&quot;],</span>
<a href="#l14.3063"></a><span id="l14.3063" class="difflineplus">+		[MISSING_X=&quot;$MISSING_X -lX11&quot;], $XLIBS)</span>
<a href="#l14.3064"></a><span id="l14.3064" class="difflineplus">+	AC_CHECK_LIB(Xext, XextAddDisplay, [XEXT_LIBS=&quot;-lXext&quot;],</span>
<a href="#l14.3065"></a><span id="l14.3065" class="difflineplus">+		[MISSING_X=&quot;$MISSING_X -lXext&quot;], $XLIBS)</span>
<a href="#l14.3066"></a><span id="l14.3066" class="difflineplus">+   </span>
<a href="#l14.3067"></a><span id="l14.3067" class="difflineplus">+     </span>
<a href="#l14.3068"></a><span id="l14.3068" class="difflineplus">+	AC_CHECK_LIB(Xt, XtFree, [ XT_LIBS=&quot;-lXt&quot;], [</span>
<a href="#l14.3069"></a><span id="l14.3069" class="difflineplus">+        unset ac_cv_lib_Xt_XtFree</span>
<a href="#l14.3070"></a><span id="l14.3070" class="difflineplus">+	    AC_CHECK_LIB(ICE, IceFlush, [XT_LIBS=&quot;-lICE $XT_LIBS&quot;],, $XT_LIBS $XLIBS)</span>
<a href="#l14.3071"></a><span id="l14.3071" class="difflineplus">+	    AC_CHECK_LIB(SM, SmcCloseConnection, [XT_LIBS=&quot;-lSM $XT_LIBS&quot;],, $XT_LIBS $XLIBS) </span>
<a href="#l14.3072"></a><span id="l14.3072" class="difflineplus">+        AC_CHECK_LIB(Xt, XtFree, [ XT_LIBS=&quot;-lXt $XT_LIBS&quot;],</span>
<a href="#l14.3073"></a><span id="l14.3073" class="difflineplus">+		    [MISSING_X=&quot;$MISSING_X -lXt&quot;], $X_PRE_LIBS $XT_LIBS $XLIBS)</span>
<a href="#l14.3074"></a><span id="l14.3074" class="difflineplus">+        ])</span>
<a href="#l14.3075"></a><span id="l14.3075" class="difflineplus">+</span>
<a href="#l14.3076"></a><span id="l14.3076" class="difflineplus">+    # AIX needs the motif library linked before libXt to prevent</span>
<a href="#l14.3077"></a><span id="l14.3077" class="difflineplus">+    # crashes in plugins linked against Motif - Bug #98892</span>
<a href="#l14.3078"></a><span id="l14.3078" class="difflineplus">+    case &quot;${target_os}&quot; in</span>
<a href="#l14.3079"></a><span id="l14.3079" class="difflineplus">+    aix*)</span>
<a href="#l14.3080"></a><span id="l14.3080" class="difflineplus">+        XT_LIBS=&quot;-lXm $XT_LIBS&quot;</span>
<a href="#l14.3081"></a><span id="l14.3081" class="difflineplus">+        ;;</span>
<a href="#l14.3082"></a><span id="l14.3082" class="difflineplus">+    esac</span>
<a href="#l14.3083"></a><span id="l14.3083" class="difflineplus">+</span>
<a href="#l14.3084"></a><span id="l14.3084" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.3085"></a><span id="l14.3085" class="difflineplus">+    dnl = Check for XShm</span>
<a href="#l14.3086"></a><span id="l14.3086" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.3087"></a><span id="l14.3087" class="difflineplus">+    AC_CHECK_LIB(Xext, XShmCreateImage, _HAVE_XSHM_XEXT=1,,</span>
<a href="#l14.3088"></a><span id="l14.3088" class="difflineplus">+        $XLIBS $XEXT_LIBS)</span>
<a href="#l14.3089"></a><span id="l14.3089" class="difflineplus">+    AC_CHECK_HEADER(X11/extensions/XShm.h)</span>
<a href="#l14.3090"></a><span id="l14.3090" class="difflineplus">+    if test &quot;$ac_cv_header_X11_extensions_XShm_h&quot; = &quot;yes&quot; &amp;&amp;</span>
<a href="#l14.3091"></a><span id="l14.3091" class="difflineplus">+        test -n &quot;$_HAVE_XSHM_XEXT&quot;; then</span>
<a href="#l14.3092"></a><span id="l14.3092" class="difflineplus">+        AC_DEFINE(HAVE_XSHM)</span>
<a href="#l14.3093"></a><span id="l14.3093" class="difflineplus">+    fi</span>
<a href="#l14.3094"></a><span id="l14.3094" class="difflineplus">+</span>
<a href="#l14.3095"></a><span id="l14.3095" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.3096"></a><span id="l14.3096" class="difflineplus">+    dnl = Check for XIE</span>
<a href="#l14.3097"></a><span id="l14.3097" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.3098"></a><span id="l14.3098" class="difflineplus">+    AC_CHECK_LIB(XIE, XieFloGeometry, [MOZ_XIE_LIBS=&quot;-lXIE&quot;],,</span>
<a href="#l14.3099"></a><span id="l14.3099" class="difflineplus">+        $XLIBS $XEXT_LIBS)</span>
<a href="#l14.3100"></a><span id="l14.3100" class="difflineplus">+    AC_CHECK_HEADER(X11/extensions/XIElib.h)</span>
<a href="#l14.3101"></a><span id="l14.3101" class="difflineplus">+</span>
<a href="#l14.3102"></a><span id="l14.3102" class="difflineplus">+    if test &quot;$MOZ_XIE_LIBS&quot;; then</span>
<a href="#l14.3103"></a><span id="l14.3103" class="difflineplus">+	dnl ====================================================</span>
<a href="#l14.3104"></a><span id="l14.3104" class="difflineplus">+	dnl = If XIE is present and is desired, turn it on</span>
<a href="#l14.3105"></a><span id="l14.3105" class="difflineplus">+	dnl ====================================================</span>
<a href="#l14.3106"></a><span id="l14.3106" class="difflineplus">+	case $target in</span>
<a href="#l14.3107"></a><span id="l14.3107" class="difflineplus">+	    *-hpux*)</span>
<a href="#l14.3108"></a><span id="l14.3108" class="difflineplus">+		;;</span>
<a href="#l14.3109"></a><span id="l14.3109" class="difflineplus">+	    *)</span>
<a href="#l14.3110"></a><span id="l14.3110" class="difflineplus">+		HAVE_XIE=1</span>
<a href="#l14.3111"></a><span id="l14.3111" class="difflineplus">+		;;</span>
<a href="#l14.3112"></a><span id="l14.3112" class="difflineplus">+	esac</span>
<a href="#l14.3113"></a><span id="l14.3113" class="difflineplus">+    fi</span>
<a href="#l14.3114"></a><span id="l14.3114" class="difflineplus">+</span>
<a href="#l14.3115"></a><span id="l14.3115" class="difflineplus">+	LDFLAGS=&quot;$_SAVE_LDFLAGS&quot;</span>
<a href="#l14.3116"></a><span id="l14.3116" class="difflineplus">+</span>
<a href="#l14.3117"></a><span id="l14.3117" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.3118"></a><span id="l14.3118" class="difflineplus">+    dnl = Check for freetype2 and its functionality</span>
<a href="#l14.3119"></a><span id="l14.3119" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.3120"></a><span id="l14.3120" class="difflineplus">+    AC_CHECK_FT2(6.1.0, [_HAVE_FREETYPE2=1], [_HAVE_FREETYPE2=])</span>
<a href="#l14.3121"></a><span id="l14.3121" class="difflineplus">+</span>
<a href="#l14.3122"></a><span id="l14.3122" class="difflineplus">+    if test &quot;$_HAVE_FREETYPE2&quot;; then</span>
<a href="#l14.3123"></a><span id="l14.3123" class="difflineplus">+    	_SAVE_LIBS=&quot;$LIBS&quot;</span>
<a href="#l14.3124"></a><span id="l14.3124" class="difflineplus">+    	_SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.3125"></a><span id="l14.3125" class="difflineplus">+    	LIBS=&quot;$LIBS $FT2_LIBS&quot;</span>
<a href="#l14.3126"></a><span id="l14.3126" class="difflineplus">+    	CFLAGS=&quot;$CFLAGS $FT2_CFLAGS&quot;</span>
<a href="#l14.3127"></a><span id="l14.3127" class="difflineplus">+</span>
<a href="#l14.3128"></a><span id="l14.3128" class="difflineplus">+        AC_CACHE_CHECK(for FT_Bitmap_Size.y_ppem,</span>
<a href="#l14.3129"></a><span id="l14.3129" class="difflineplus">+            ac_cv_member_FT_Bitmap_Size_y_ppem,</span>
<a href="#l14.3130"></a><span id="l14.3130" class="difflineplus">+            [AC_TRY_COMPILE([#include &lt;ft2build.h&gt;</span>
<a href="#l14.3131"></a><span id="l14.3131" class="difflineplus">+                             #include FT_FREETYPE_H],</span>
<a href="#l14.3132"></a><span id="l14.3132" class="difflineplus">+                            [FT_Bitmap_Size s;</span>
<a href="#l14.3133"></a><span id="l14.3133" class="difflineplus">+                             if (sizeof s.y_ppem) return 0;</span>
<a href="#l14.3134"></a><span id="l14.3134" class="difflineplus">+                             return 1],</span>
<a href="#l14.3135"></a><span id="l14.3135" class="difflineplus">+                            ac_cv_member_FT_Bitmap_Size_y_ppem=yes,</span>
<a href="#l14.3136"></a><span id="l14.3136" class="difflineplus">+                            ac_cv_member_FT_Bitmap_Size_y_ppem=no)])</span>
<a href="#l14.3137"></a><span id="l14.3137" class="difflineplus">+        if test &quot;$ac_cv_member_FT_Bitmap_Size_y_ppem&quot; = yes; then</span>
<a href="#l14.3138"></a><span id="l14.3138" class="difflineplus">+            HAVE_FT_BITMAP_SIZE_Y_PPEM=1</span>
<a href="#l14.3139"></a><span id="l14.3139" class="difflineplus">+        else</span>
<a href="#l14.3140"></a><span id="l14.3140" class="difflineplus">+            HAVE_FT_BITMAP_SIZE_Y_PPEM=0</span>
<a href="#l14.3141"></a><span id="l14.3141" class="difflineplus">+        fi</span>
<a href="#l14.3142"></a><span id="l14.3142" class="difflineplus">+        AC_DEFINE_UNQUOTED(HAVE_FT_BITMAP_SIZE_Y_PPEM,</span>
<a href="#l14.3143"></a><span id="l14.3143" class="difflineplus">+                           $HAVE_FT_BITMAP_SIZE_Y_PPEM,</span>
<a href="#l14.3144"></a><span id="l14.3144" class="difflineplus">+                           [FT_Bitmap_Size structure includes y_ppem field])</span>
<a href="#l14.3145"></a><span id="l14.3145" class="difflineplus">+</span>
<a href="#l14.3146"></a><span id="l14.3146" class="difflineplus">+        AC_CHECK_FUNCS(FT_GlyphSlot_Embolden FT_Load_Sfnt_Table FT_Select_Size)</span>
<a href="#l14.3147"></a><span id="l14.3147" class="difflineplus">+</span>
<a href="#l14.3148"></a><span id="l14.3148" class="difflineplus">+    	LIBS=&quot;$_SAVE_LIBS&quot;</span>
<a href="#l14.3149"></a><span id="l14.3149" class="difflineplus">+    	CFLAGS=&quot;$_SAVE_CFLAGS&quot;</span>
<a href="#l14.3150"></a><span id="l14.3150" class="difflineplus">+    fi</span>
<a href="#l14.3151"></a><span id="l14.3151" class="difflineplus">+</span>
<a href="#l14.3152"></a><span id="l14.3152" class="difflineplus">+fi # $no_x</span>
<a href="#l14.3153"></a><span id="l14.3153" class="difflineplus">+</span>
<a href="#l14.3154"></a><span id="l14.3154" class="difflineplus">+AC_SUBST(XCFLAGS)</span>
<a href="#l14.3155"></a><span id="l14.3155" class="difflineplus">+AC_SUBST(XLDFLAGS)</span>
<a href="#l14.3156"></a><span id="l14.3156" class="difflineplus">+AC_SUBST(XLIBS)</span>
<a href="#l14.3157"></a><span id="l14.3157" class="difflineplus">+AC_SUBST(XT_LIBS)</span>
<a href="#l14.3158"></a><span id="l14.3158" class="difflineplus">+</span>
<a href="#l14.3159"></a><span id="l14.3159" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3160"></a><span id="l14.3160" class="difflineplus">+dnl = pthread support</span>
<a href="#l14.3161"></a><span id="l14.3161" class="difflineplus">+dnl = Start by checking whether the system support pthreads</span>
<a href="#l14.3162"></a><span id="l14.3162" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3163"></a><span id="l14.3163" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.3164"></a><span id="l14.3164" class="difflineplus">+darwin*)</span>
<a href="#l14.3165"></a><span id="l14.3165" class="difflineplus">+    USE_PTHREADS=1</span>
<a href="#l14.3166"></a><span id="l14.3166" class="difflineplus">+    ;;</span>
<a href="#l14.3167"></a><span id="l14.3167" class="difflineplus">+*)</span>
<a href="#l14.3168"></a><span id="l14.3168" class="difflineplus">+    MOZ_CHECK_PTHREADS(pthreads,</span>
<a href="#l14.3169"></a><span id="l14.3169" class="difflineplus">+        USE_PTHREADS=1 _PTHREAD_LDFLAGS=&quot;-lpthreads&quot;,</span>
<a href="#l14.3170"></a><span id="l14.3170" class="difflineplus">+        MOZ_CHECK_PTHREADS(pthread,</span>
<a href="#l14.3171"></a><span id="l14.3171" class="difflineplus">+            USE_PTHREADS=1 _PTHREAD_LDFLAGS=&quot;-lpthread&quot;,</span>
<a href="#l14.3172"></a><span id="l14.3172" class="difflineplus">+            MOZ_CHECK_PTHREADS(c_r,</span>
<a href="#l14.3173"></a><span id="l14.3173" class="difflineplus">+                USE_PTHREADS=1 _PTHREAD_LDFLAGS=&quot;-lc_r&quot;,</span>
<a href="#l14.3174"></a><span id="l14.3174" class="difflineplus">+                MOZ_CHECK_PTHREADS(c,</span>
<a href="#l14.3175"></a><span id="l14.3175" class="difflineplus">+                    USE_PTHREADS=1</span>
<a href="#l14.3176"></a><span id="l14.3176" class="difflineplus">+                )</span>
<a href="#l14.3177"></a><span id="l14.3177" class="difflineplus">+            )</span>
<a href="#l14.3178"></a><span id="l14.3178" class="difflineplus">+        )</span>
<a href="#l14.3179"></a><span id="l14.3179" class="difflineplus">+    )</span>
<a href="#l14.3180"></a><span id="l14.3180" class="difflineplus">+    ;;</span>
<a href="#l14.3181"></a><span id="l14.3181" class="difflineplus">+esac</span>
<a href="#l14.3182"></a><span id="l14.3182" class="difflineplus">+</span>
<a href="#l14.3183"></a><span id="l14.3183" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3184"></a><span id="l14.3184" class="difflineplus">+dnl Check the command line for --with-pthreads </span>
<a href="#l14.3185"></a><span id="l14.3185" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3186"></a><span id="l14.3186" class="difflineplus">+MOZ_ARG_WITH_BOOL(pthreads,</span>
<a href="#l14.3187"></a><span id="l14.3187" class="difflineplus">+[  --with-pthreads         Force use of system pthread library with NSPR ],</span>
<a href="#l14.3188"></a><span id="l14.3188" class="difflineplus">+[ if test &quot;$USE_PTHREADS&quot;x = x; then</span>
<a href="#l14.3189"></a><span id="l14.3189" class="difflineplus">+    AC_MSG_ERROR([ --with-pthreads specified for a system without pthread support ]);</span>
<a href="#l14.3190"></a><span id="l14.3190" class="difflineplus">+fi],</span>
<a href="#l14.3191"></a><span id="l14.3191" class="difflineplus">+    USE_PTHREADS=</span>
<a href="#l14.3192"></a><span id="l14.3192" class="difflineplus">+    _PTHREAD_LDFLAGS=</span>
<a href="#l14.3193"></a><span id="l14.3193" class="difflineplus">+)</span>
<a href="#l14.3194"></a><span id="l14.3194" class="difflineplus">+</span>
<a href="#l14.3195"></a><span id="l14.3195" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3196"></a><span id="l14.3196" class="difflineplus">+dnl Do the platform specific pthread hackery</span>
<a href="#l14.3197"></a><span id="l14.3197" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3198"></a><span id="l14.3198" class="difflineplus">+if test &quot;$USE_PTHREADS&quot;x != x</span>
<a href="#l14.3199"></a><span id="l14.3199" class="difflineplus">+then</span>
<a href="#l14.3200"></a><span id="l14.3200" class="difflineplus">+	dnl</span>
<a href="#l14.3201"></a><span id="l14.3201" class="difflineplus">+	dnl See if -pthread is supported.</span>
<a href="#l14.3202"></a><span id="l14.3202" class="difflineplus">+	dnl</span>
<a href="#l14.3203"></a><span id="l14.3203" class="difflineplus">+	rm -f conftest*</span>
<a href="#l14.3204"></a><span id="l14.3204" class="difflineplus">+	ac_cv_have_dash_pthread=no</span>
<a href="#l14.3205"></a><span id="l14.3205" class="difflineplus">+	AC_MSG_CHECKING(whether ${CC-cc} accepts -pthread)</span>
<a href="#l14.3206"></a><span id="l14.3206" class="difflineplus">+	echo 'int main() { return 0; }' | cat &gt; conftest.c</span>
<a href="#l14.3207"></a><span id="l14.3207" class="difflineplus">+	${CC-cc} -pthread -o conftest conftest.c &gt; conftest.out 2&gt;&amp;1</span>
<a href="#l14.3208"></a><span id="l14.3208" class="difflineplus">+	if test $? -eq 0; then</span>
<a href="#l14.3209"></a><span id="l14.3209" class="difflineplus">+		if test -z &quot;`egrep -i '(unrecognize|unknown)' conftest.out | grep pthread`&quot; &amp;&amp; test -z &quot;`egrep -i '(error|incorrect)' conftest.out`&quot; ; then</span>
<a href="#l14.3210"></a><span id="l14.3210" class="difflineplus">+			ac_cv_have_dash_pthread=yes</span>
<a href="#l14.3211"></a><span id="l14.3211" class="difflineplus">+	        case &quot;$target_os&quot; in</span>
<a href="#l14.3212"></a><span id="l14.3212" class="difflineplus">+	        freebsd*)</span>
<a href="#l14.3213"></a><span id="l14.3213" class="difflineplus">+# Freebsd doesn't use -pthread for compiles, it uses them for linking</span>
<a href="#l14.3214"></a><span id="l14.3214" class="difflineplus">+                ;;</span>
<a href="#l14.3215"></a><span id="l14.3215" class="difflineplus">+	        *)</span>
<a href="#l14.3216"></a><span id="l14.3216" class="difflineplus">+			    CFLAGS=&quot;$CFLAGS -pthread&quot;</span>
<a href="#l14.3217"></a><span id="l14.3217" class="difflineplus">+			    CXXFLAGS=&quot;$CXXFLAGS -pthread&quot;</span>
<a href="#l14.3218"></a><span id="l14.3218" class="difflineplus">+                ;;</span>
<a href="#l14.3219"></a><span id="l14.3219" class="difflineplus">+	        esac</span>
<a href="#l14.3220"></a><span id="l14.3220" class="difflineplus">+		fi</span>
<a href="#l14.3221"></a><span id="l14.3221" class="difflineplus">+	fi</span>
<a href="#l14.3222"></a><span id="l14.3222" class="difflineplus">+	rm -f conftest*</span>
<a href="#l14.3223"></a><span id="l14.3223" class="difflineplus">+    AC_MSG_RESULT($ac_cv_have_dash_pthread)</span>
<a href="#l14.3224"></a><span id="l14.3224" class="difflineplus">+</span>
<a href="#l14.3225"></a><span id="l14.3225" class="difflineplus">+	dnl</span>
<a href="#l14.3226"></a><span id="l14.3226" class="difflineplus">+	dnl See if -pthreads is supported.</span>
<a href="#l14.3227"></a><span id="l14.3227" class="difflineplus">+	dnl</span>
<a href="#l14.3228"></a><span id="l14.3228" class="difflineplus">+    ac_cv_have_dash_pthreads=no</span>
<a href="#l14.3229"></a><span id="l14.3229" class="difflineplus">+    if test &quot;$ac_cv_have_dash_pthread&quot; = &quot;no&quot;; then</span>
<a href="#l14.3230"></a><span id="l14.3230" class="difflineplus">+	    AC_MSG_CHECKING(whether ${CC-cc} accepts -pthreads)</span>
<a href="#l14.3231"></a><span id="l14.3231" class="difflineplus">+    	echo 'int main() { return 0; }' | cat &gt; conftest.c</span>
<a href="#l14.3232"></a><span id="l14.3232" class="difflineplus">+	    ${CC-cc} -pthreads -o conftest conftest.c &gt; conftest.out 2&gt;&amp;1</span>
<a href="#l14.3233"></a><span id="l14.3233" class="difflineplus">+    	if test $? -eq 0; then</span>
<a href="#l14.3234"></a><span id="l14.3234" class="difflineplus">+	    	if test -z &quot;`egrep -i '(unrecognize|unknown)' conftest.out | grep pthreads`&quot; &amp;&amp; test -z &quot;`egrep -i '(error|incorrect)' conftest.out`&quot; ; then</span>
<a href="#l14.3235"></a><span id="l14.3235" class="difflineplus">+			    ac_cv_have_dash_pthreads=yes</span>
<a href="#l14.3236"></a><span id="l14.3236" class="difflineplus">+			    CFLAGS=&quot;$CFLAGS -pthreads&quot;</span>
<a href="#l14.3237"></a><span id="l14.3237" class="difflineplus">+			    CXXFLAGS=&quot;$CXXFLAGS -pthreads&quot;</span>
<a href="#l14.3238"></a><span id="l14.3238" class="difflineplus">+		    fi</span>
<a href="#l14.3239"></a><span id="l14.3239" class="difflineplus">+	    fi</span>
<a href="#l14.3240"></a><span id="l14.3240" class="difflineplus">+	    rm -f conftest*</span>
<a href="#l14.3241"></a><span id="l14.3241" class="difflineplus">+    	AC_MSG_RESULT($ac_cv_have_dash_pthreads)</span>
<a href="#l14.3242"></a><span id="l14.3242" class="difflineplus">+    fi</span>
<a href="#l14.3243"></a><span id="l14.3243" class="difflineplus">+</span>
<a href="#l14.3244"></a><span id="l14.3244" class="difflineplus">+	case &quot;$target&quot; in</span>
<a href="#l14.3245"></a><span id="l14.3245" class="difflineplus">+	    *-*-freebsd*)</span>
<a href="#l14.3246"></a><span id="l14.3246" class="difflineplus">+			AC_DEFINE(_REENTRANT)</span>
<a href="#l14.3247"></a><span id="l14.3247" class="difflineplus">+			AC_DEFINE(_THREAD_SAFE)</span>
<a href="#l14.3248"></a><span id="l14.3248" class="difflineplus">+			dnl -pthread links in -lc_r, so don't specify it explicitly.</span>
<a href="#l14.3249"></a><span id="l14.3249" class="difflineplus">+			if test &quot;$ac_cv_have_dash_pthread&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3250"></a><span id="l14.3250" class="difflineplus">+				_PTHREAD_LDFLAGS=&quot;-pthread&quot;</span>
<a href="#l14.3251"></a><span id="l14.3251" class="difflineplus">+			else</span>
<a href="#l14.3252"></a><span id="l14.3252" class="difflineplus">+				_PTHREAD_LDFLAGS=&quot;-lc_r&quot;</span>
<a href="#l14.3253"></a><span id="l14.3253" class="difflineplus">+			fi</span>
<a href="#l14.3254"></a><span id="l14.3254" class="difflineplus">+			;;</span>
<a href="#l14.3255"></a><span id="l14.3255" class="difflineplus">+</span>
<a href="#l14.3256"></a><span id="l14.3256" class="difflineplus">+	    *-*-openbsd*|*-*-bsdi*)</span>
<a href="#l14.3257"></a><span id="l14.3257" class="difflineplus">+			AC_DEFINE(_REENTRANT)</span>
<a href="#l14.3258"></a><span id="l14.3258" class="difflineplus">+			AC_DEFINE(_THREAD_SAFE)</span>
<a href="#l14.3259"></a><span id="l14.3259" class="difflineplus">+			dnl -pthread links in -lc_r, so don't specify it explicitly.</span>
<a href="#l14.3260"></a><span id="l14.3260" class="difflineplus">+			if test &quot;$ac_cv_have_dash_pthread&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3261"></a><span id="l14.3261" class="difflineplus">+                _PTHREAD_LDFLAGS=&quot;-pthread&quot;</span>
<a href="#l14.3262"></a><span id="l14.3262" class="difflineplus">+			fi</span>
<a href="#l14.3263"></a><span id="l14.3263" class="difflineplus">+			;;</span>
<a href="#l14.3264"></a><span id="l14.3264" class="difflineplus">+</span>
<a href="#l14.3265"></a><span id="l14.3265" class="difflineplus">+	    *-*-linux*|*-*-kfreebsd*-gnu)</span>
<a href="#l14.3266"></a><span id="l14.3266" class="difflineplus">+			AC_DEFINE(_REENTRANT) </span>
<a href="#l14.3267"></a><span id="l14.3267" class="difflineplus">+			;;</span>
<a href="#l14.3268"></a><span id="l14.3268" class="difflineplus">+</span>
<a href="#l14.3269"></a><span id="l14.3269" class="difflineplus">+	    *-*-nto*) </span>
<a href="#l14.3270"></a><span id="l14.3270" class="difflineplus">+			AC_DEFINE(_REENTRANT) </span>
<a href="#l14.3271"></a><span id="l14.3271" class="difflineplus">+			;;</span>
<a href="#l14.3272"></a><span id="l14.3272" class="difflineplus">+</span>
<a href="#l14.3273"></a><span id="l14.3273" class="difflineplus">+	    *-aix4.3*|*-aix5*)</span>
<a href="#l14.3274"></a><span id="l14.3274" class="difflineplus">+			AC_DEFINE(_REENTRANT) </span>
<a href="#l14.3275"></a><span id="l14.3275" class="difflineplus">+			;;</span>
<a href="#l14.3276"></a><span id="l14.3276" class="difflineplus">+</span>
<a href="#l14.3277"></a><span id="l14.3277" class="difflineplus">+	    *-hpux11.*)</span>
<a href="#l14.3278"></a><span id="l14.3278" class="difflineplus">+			AC_DEFINE(_REENTRANT) </span>
<a href="#l14.3279"></a><span id="l14.3279" class="difflineplus">+			;;</span>
<a href="#l14.3280"></a><span id="l14.3280" class="difflineplus">+</span>
<a href="#l14.3281"></a><span id="l14.3281" class="difflineplus">+	    alpha*-*-osf*)</span>
<a href="#l14.3282"></a><span id="l14.3282" class="difflineplus">+			AC_DEFINE(_REENTRANT)</span>
<a href="#l14.3283"></a><span id="l14.3283" class="difflineplus">+			;;</span>
<a href="#l14.3284"></a><span id="l14.3284" class="difflineplus">+</span>
<a href="#l14.3285"></a><span id="l14.3285" class="difflineplus">+	    *-*-solaris*) </span>
<a href="#l14.3286"></a><span id="l14.3286" class="difflineplus">+    			AC_DEFINE(_REENTRANT) </span>
<a href="#l14.3287"></a><span id="l14.3287" class="difflineplus">+			if test ! &quot;$GNU_CC&quot;; then</span>
<a href="#l14.3288"></a><span id="l14.3288" class="difflineplus">+				CFLAGS=&quot;$CFLAGS -mt&quot; </span>
<a href="#l14.3289"></a><span id="l14.3289" class="difflineplus">+				CXXFLAGS=&quot;$CXXFLAGS -mt&quot; </span>
<a href="#l14.3290"></a><span id="l14.3290" class="difflineplus">+			fi</span>
<a href="#l14.3291"></a><span id="l14.3291" class="difflineplus">+			;;</span>
<a href="#l14.3292"></a><span id="l14.3292" class="difflineplus">+	esac</span>
<a href="#l14.3293"></a><span id="l14.3293" class="difflineplus">+    LDFLAGS=&quot;${_PTHREAD_LDFLAGS} ${LDFLAGS}&quot;</span>
<a href="#l14.3294"></a><span id="l14.3294" class="difflineplus">+fi</span>
<a href="#l14.3295"></a><span id="l14.3295" class="difflineplus">+</span>
<a href="#l14.3296"></a><span id="l14.3296" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3297"></a><span id="l14.3297" class="difflineplus">+dnl See if mmap sees writes</span>
<a href="#l14.3298"></a><span id="l14.3298" class="difflineplus">+dnl For cross compiling, just define it as no, which is a safe default</span>
<a href="#l14.3299"></a><span id="l14.3299" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3300"></a><span id="l14.3300" class="difflineplus">+AC_MSG_CHECKING(whether mmap() sees write()s)</span>
<a href="#l14.3301"></a><span id="l14.3301" class="difflineplus">+</span>
<a href="#l14.3302"></a><span id="l14.3302" class="difflineplus">+changequote(,)</span>
<a href="#l14.3303"></a><span id="l14.3303" class="difflineplus">+mmap_test_prog='</span>
<a href="#l14.3304"></a><span id="l14.3304" class="difflineplus">+    #include &lt;stdlib.h&gt;</span>
<a href="#l14.3305"></a><span id="l14.3305" class="difflineplus">+    #include &lt;unistd.h&gt;</span>
<a href="#l14.3306"></a><span id="l14.3306" class="difflineplus">+    #include &lt;sys/mman.h&gt;</span>
<a href="#l14.3307"></a><span id="l14.3307" class="difflineplus">+    #include &lt;sys/types.h&gt;</span>
<a href="#l14.3308"></a><span id="l14.3308" class="difflineplus">+    #include &lt;sys/stat.h&gt;</span>
<a href="#l14.3309"></a><span id="l14.3309" class="difflineplus">+    #include &lt;fcntl.h&gt;</span>
<a href="#l14.3310"></a><span id="l14.3310" class="difflineplus">+</span>
<a href="#l14.3311"></a><span id="l14.3311" class="difflineplus">+    char fname[] = &quot;conftest.file&quot;;</span>
<a href="#l14.3312"></a><span id="l14.3312" class="difflineplus">+    char zbuff[1024]; /* Fractional page is probably worst case */</span>
<a href="#l14.3313"></a><span id="l14.3313" class="difflineplus">+</span>
<a href="#l14.3314"></a><span id="l14.3314" class="difflineplus">+    int main() {</span>
<a href="#l14.3315"></a><span id="l14.3315" class="difflineplus">+	char *map;</span>
<a href="#l14.3316"></a><span id="l14.3316" class="difflineplus">+	int fd;</span>
<a href="#l14.3317"></a><span id="l14.3317" class="difflineplus">+	int i;</span>
<a href="#l14.3318"></a><span id="l14.3318" class="difflineplus">+	unlink(fname);</span>
<a href="#l14.3319"></a><span id="l14.3319" class="difflineplus">+	fd = open(fname, O_RDWR | O_CREAT, 0660);</span>
<a href="#l14.3320"></a><span id="l14.3320" class="difflineplus">+	if(fd&lt;0) return 1;</span>
<a href="#l14.3321"></a><span id="l14.3321" class="difflineplus">+	unlink(fname);</span>
<a href="#l14.3322"></a><span id="l14.3322" class="difflineplus">+	write(fd, zbuff, sizeof(zbuff));</span>
<a href="#l14.3323"></a><span id="l14.3323" class="difflineplus">+	lseek(fd, 0, SEEK_SET);</span>
<a href="#l14.3324"></a><span id="l14.3324" class="difflineplus">+	map = (char*)mmap(0, sizeof(zbuff), PROT_READ, MAP_SHARED, fd, 0);</span>
<a href="#l14.3325"></a><span id="l14.3325" class="difflineplus">+	if(map==(char*)-1) return 2;</span>
<a href="#l14.3326"></a><span id="l14.3326" class="difflineplus">+	for(i=0; fname[i]; i++) {</span>
<a href="#l14.3327"></a><span id="l14.3327" class="difflineplus">+	    int rc = write(fd, &amp;fname[i], 1);</span>
<a href="#l14.3328"></a><span id="l14.3328" class="difflineplus">+	    if(map[i]!=fname[i]) return 4;</span>
<a href="#l14.3329"></a><span id="l14.3329" class="difflineplus">+	}</span>
<a href="#l14.3330"></a><span id="l14.3330" class="difflineplus">+	return 0;</span>
<a href="#l14.3331"></a><span id="l14.3331" class="difflineplus">+    }</span>
<a href="#l14.3332"></a><span id="l14.3332" class="difflineplus">+'</span>
<a href="#l14.3333"></a><span id="l14.3333" class="difflineplus">+changequote([,])</span>
<a href="#l14.3334"></a><span id="l14.3334" class="difflineplus">+</span>
<a href="#l14.3335"></a><span id="l14.3335" class="difflineplus">+AC_TRY_RUN($mmap_test_prog , result=&quot;yes&quot;, result=&quot;no&quot;, result=&quot;yes&quot;)</span>
<a href="#l14.3336"></a><span id="l14.3336" class="difflineplus">+</span>
<a href="#l14.3337"></a><span id="l14.3337" class="difflineplus">+AC_MSG_RESULT(&quot;$result&quot;)</span>
<a href="#l14.3338"></a><span id="l14.3338" class="difflineplus">+</span>
<a href="#l14.3339"></a><span id="l14.3339" class="difflineplus">+if test &quot;$result&quot; = &quot;no&quot;; then</span>
<a href="#l14.3340"></a><span id="l14.3340" class="difflineplus">+    AC_DEFINE(MMAP_MISSES_WRITES)</span>
<a href="#l14.3341"></a><span id="l14.3341" class="difflineplus">+fi</span>
<a href="#l14.3342"></a><span id="l14.3342" class="difflineplus">+</span>
<a href="#l14.3343"></a><span id="l14.3343" class="difflineplus">+</span>
<a href="#l14.3344"></a><span id="l14.3344" class="difflineplus">+dnl Checks for library functions.</span>
<a href="#l14.3345"></a><span id="l14.3345" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3346"></a><span id="l14.3346" class="difflineplus">+AC_PROG_GCC_TRADITIONAL</span>
<a href="#l14.3347"></a><span id="l14.3347" class="difflineplus">+AC_FUNC_MEMCMP</span>
<a href="#l14.3348"></a><span id="l14.3348" class="difflineplus">+AC_CHECK_FUNCS(random strerror lchown fchmod snprintf statvfs memmove rint stat64 lstat64 truncate64 statvfs64)</span>
<a href="#l14.3349"></a><span id="l14.3349" class="difflineplus">+AC_CHECK_FUNCS(flockfile getpagesize)</span>
<a href="#l14.3350"></a><span id="l14.3350" class="difflineplus">+</span>
<a href="#l14.3351"></a><span id="l14.3351" class="difflineplus">+dnl localtime_r and strtok_r are only present on MacOS version 10.2 and higher</span>
<a href="#l14.3352"></a><span id="l14.3352" class="difflineplus">+if test -z &quot;$MACOS_DEPLOYMENT_TARGET&quot; || test &quot;$MACOS_DEPLOYMENT_TARGET&quot; -ge &quot;100200&quot;; then</span>
<a href="#l14.3353"></a><span id="l14.3353" class="difflineplus">+  AC_CHECK_FUNCS(localtime_r strtok_r)</span>
<a href="#l14.3354"></a><span id="l14.3354" class="difflineplus">+fi</span>
<a href="#l14.3355"></a><span id="l14.3355" class="difflineplus">+</span>
<a href="#l14.3356"></a><span id="l14.3356" class="difflineplus">+dnl check for wcrtomb/mbrtowc</span>
<a href="#l14.3357"></a><span id="l14.3357" class="difflineplus">+dnl =======================================================================</span>
<a href="#l14.3358"></a><span id="l14.3358" class="difflineplus">+if test -z &quot;$MACOS_DEPLOYMENT_TARGET&quot; || test &quot;$MACOS_DEPLOYMENT_TARGET&quot; -ge &quot;100300&quot;; then</span>
<a href="#l14.3359"></a><span id="l14.3359" class="difflineplus">+AC_LANG_SAVE</span>
<a href="#l14.3360"></a><span id="l14.3360" class="difflineplus">+AC_LANG_CPLUSPLUS</span>
<a href="#l14.3361"></a><span id="l14.3361" class="difflineplus">+AC_CACHE_CHECK(for wcrtomb,</span>
<a href="#l14.3362"></a><span id="l14.3362" class="difflineplus">+    ac_cv_have_wcrtomb,</span>
<a href="#l14.3363"></a><span id="l14.3363" class="difflineplus">+    [AC_TRY_LINK([#include &lt;wchar.h&gt;],</span>
<a href="#l14.3364"></a><span id="l14.3364" class="difflineplus">+                 [mbstate_t ps={0};wcrtomb(0,'f',&amp;ps);],</span>
<a href="#l14.3365"></a><span id="l14.3365" class="difflineplus">+                 ac_cv_have_wcrtomb=&quot;yes&quot;,</span>
<a href="#l14.3366"></a><span id="l14.3366" class="difflineplus">+                 ac_cv_have_wcrtomb=&quot;no&quot;)])</span>
<a href="#l14.3367"></a><span id="l14.3367" class="difflineplus">+if test &quot;$ac_cv_have_wcrtomb&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3368"></a><span id="l14.3368" class="difflineplus">+    AC_DEFINE(HAVE_WCRTOMB)</span>
<a href="#l14.3369"></a><span id="l14.3369" class="difflineplus">+fi</span>
<a href="#l14.3370"></a><span id="l14.3370" class="difflineplus">+AC_CACHE_CHECK(for mbrtowc,</span>
<a href="#l14.3371"></a><span id="l14.3371" class="difflineplus">+    ac_cv_have_mbrtowc,</span>
<a href="#l14.3372"></a><span id="l14.3372" class="difflineplus">+    [AC_TRY_LINK([#include &lt;wchar.h&gt;],</span>
<a href="#l14.3373"></a><span id="l14.3373" class="difflineplus">+                 [mbstate_t ps={0};mbrtowc(0,0,0,&amp;ps);],</span>
<a href="#l14.3374"></a><span id="l14.3374" class="difflineplus">+                 ac_cv_have_mbrtowc=&quot;yes&quot;,</span>
<a href="#l14.3375"></a><span id="l14.3375" class="difflineplus">+                 ac_cv_have_mbrtowc=&quot;no&quot;)])</span>
<a href="#l14.3376"></a><span id="l14.3376" class="difflineplus">+if test &quot;$ac_cv_have_mbrtowc&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3377"></a><span id="l14.3377" class="difflineplus">+    AC_DEFINE(HAVE_MBRTOWC)</span>
<a href="#l14.3378"></a><span id="l14.3378" class="difflineplus">+fi</span>
<a href="#l14.3379"></a><span id="l14.3379" class="difflineplus">+AC_LANG_RESTORE</span>
<a href="#l14.3380"></a><span id="l14.3380" class="difflineplus">+fi</span>
<a href="#l14.3381"></a><span id="l14.3381" class="difflineplus">+</span>
<a href="#l14.3382"></a><span id="l14.3382" class="difflineplus">+AC_CACHE_CHECK(</span>
<a href="#l14.3383"></a><span id="l14.3383" class="difflineplus">+    [for res_ninit()],</span>
<a href="#l14.3384"></a><span id="l14.3384" class="difflineplus">+    ac_cv_func_res_ninit,</span>
<a href="#l14.3385"></a><span id="l14.3385" class="difflineplus">+    [AC_TRY_LINK([</span>
<a href="#l14.3386"></a><span id="l14.3386" class="difflineplus">+        #ifdef linux</span>
<a href="#l14.3387"></a><span id="l14.3387" class="difflineplus">+        #define _BSD_SOURCE 1</span>
<a href="#l14.3388"></a><span id="l14.3388" class="difflineplus">+        #endif</span>
<a href="#l14.3389"></a><span id="l14.3389" class="difflineplus">+        #include &lt;resolv.h&gt;</span>
<a href="#l14.3390"></a><span id="l14.3390" class="difflineplus">+        ],</span>
<a href="#l14.3391"></a><span id="l14.3391" class="difflineplus">+        [int foo = res_ninit(&amp;_res);],</span>
<a href="#l14.3392"></a><span id="l14.3392" class="difflineplus">+        [ac_cv_func_res_ninit=yes],</span>
<a href="#l14.3393"></a><span id="l14.3393" class="difflineplus">+        [ac_cv_func_res_ninit=no])</span>
<a href="#l14.3394"></a><span id="l14.3394" class="difflineplus">+    ])</span>
<a href="#l14.3395"></a><span id="l14.3395" class="difflineplus">+</span>
<a href="#l14.3396"></a><span id="l14.3396" class="difflineplus">+if test &quot;$ac_cv_func_res_ninit&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3397"></a><span id="l14.3397" class="difflineplus">+    AC_DEFINE(HAVE_RES_NINIT)</span>
<a href="#l14.3398"></a><span id="l14.3398" class="difflineplus">+dnl must add the link line we do something as foolish as this... dougt</span>
<a href="#l14.3399"></a><span id="l14.3399" class="difflineplus">+dnl else</span>
<a href="#l14.3400"></a><span id="l14.3400" class="difflineplus">+dnl    AC_CHECK_LIB(bind, res_ninit, AC_DEFINE(HAVE_RES_NINIT),</span>
<a href="#l14.3401"></a><span id="l14.3401" class="difflineplus">+dnl        AC_CHECK_LIB(resolv, res_ninit, AC_DEFINE(HAVE_RES_NINIT)))</span>
<a href="#l14.3402"></a><span id="l14.3402" class="difflineplus">+fi</span>
<a href="#l14.3403"></a><span id="l14.3403" class="difflineplus">+</span>
<a href="#l14.3404"></a><span id="l14.3404" class="difflineplus">+AC_LANG_CPLUSPLUS</span>
<a href="#l14.3405"></a><span id="l14.3405" class="difflineplus">+AC_CACHE_CHECK(</span>
<a href="#l14.3406"></a><span id="l14.3406" class="difflineplus">+    [for gnu_get_libc_version()],</span>
<a href="#l14.3407"></a><span id="l14.3407" class="difflineplus">+    ac_cv_func_gnu_get_libc_version,</span>
<a href="#l14.3408"></a><span id="l14.3408" class="difflineplus">+    [AC_TRY_LINK([</span>
<a href="#l14.3409"></a><span id="l14.3409" class="difflineplus">+        #ifdef HAVE_GNU_LIBC_VERSION_H</span>
<a href="#l14.3410"></a><span id="l14.3410" class="difflineplus">+        #include &lt;gnu/libc-version.h&gt;</span>
<a href="#l14.3411"></a><span id="l14.3411" class="difflineplus">+        #endif</span>
<a href="#l14.3412"></a><span id="l14.3412" class="difflineplus">+        ],</span>
<a href="#l14.3413"></a><span id="l14.3413" class="difflineplus">+        [const char *glibc_version = gnu_get_libc_version();],</span>
<a href="#l14.3414"></a><span id="l14.3414" class="difflineplus">+        [ac_cv_func_gnu_get_libc_version=yes],</span>
<a href="#l14.3415"></a><span id="l14.3415" class="difflineplus">+        [ac_cv_func_gnu_get_libc_version=no] </span>
<a href="#l14.3416"></a><span id="l14.3416" class="difflineplus">+        )]</span>
<a href="#l14.3417"></a><span id="l14.3417" class="difflineplus">+    )</span>
<a href="#l14.3418"></a><span id="l14.3418" class="difflineplus">+</span>
<a href="#l14.3419"></a><span id="l14.3419" class="difflineplus">+if test &quot;$ac_cv_func_gnu_get_libc_version&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3420"></a><span id="l14.3420" class="difflineplus">+    AC_DEFINE(HAVE_GNU_GET_LIBC_VERSION)</span>
<a href="#l14.3421"></a><span id="l14.3421" class="difflineplus">+fi</span>
<a href="#l14.3422"></a><span id="l14.3422" class="difflineplus">+</span>
<a href="#l14.3423"></a><span id="l14.3423" class="difflineplus">+case $target_os in</span>
<a href="#l14.3424"></a><span id="l14.3424" class="difflineplus">+    os2*|msvc*|mks*|cygwin*|mingw*|darwin*|wince*|beos*)</span>
<a href="#l14.3425"></a><span id="l14.3425" class="difflineplus">+        ;;</span>
<a href="#l14.3426"></a><span id="l14.3426" class="difflineplus">+    *)</span>
<a href="#l14.3427"></a><span id="l14.3427" class="difflineplus">+    </span>
<a href="#l14.3428"></a><span id="l14.3428" class="difflineplus">+AC_CHECK_LIB(c, iconv, [_ICONV_LIBS=&quot;$_ICONV_LIBS&quot;],</span>
<a href="#l14.3429"></a><span id="l14.3429" class="difflineplus">+    AC_CHECK_LIB(iconv, iconv, [_ICONV_LIBS=&quot;$_ICONV_LIBS -liconv&quot;],</span>
<a href="#l14.3430"></a><span id="l14.3430" class="difflineplus">+        AC_CHECK_LIB(iconv, libiconv, [_ICONV_LIBS=&quot;$_ICONV_LIBS -liconv&quot;])))</span>
<a href="#l14.3431"></a><span id="l14.3431" class="difflineplus">+_SAVE_LIBS=$LIBS</span>
<a href="#l14.3432"></a><span id="l14.3432" class="difflineplus">+LIBS=&quot;$LIBS $_ICONV_LIBS&quot;</span>
<a href="#l14.3433"></a><span id="l14.3433" class="difflineplus">+AC_CACHE_CHECK(</span>
<a href="#l14.3434"></a><span id="l14.3434" class="difflineplus">+    [for iconv()],</span>
<a href="#l14.3435"></a><span id="l14.3435" class="difflineplus">+    ac_cv_func_iconv,</span>
<a href="#l14.3436"></a><span id="l14.3436" class="difflineplus">+    [AC_TRY_LINK([</span>
<a href="#l14.3437"></a><span id="l14.3437" class="difflineplus">+        #include &lt;stdlib.h&gt;</span>
<a href="#l14.3438"></a><span id="l14.3438" class="difflineplus">+        #include &lt;iconv.h&gt;</span>
<a href="#l14.3439"></a><span id="l14.3439" class="difflineplus">+        ],</span>
<a href="#l14.3440"></a><span id="l14.3440" class="difflineplus">+        [</span>
<a href="#l14.3441"></a><span id="l14.3441" class="difflineplus">+            iconv_t h = iconv_open(&quot;&quot;, &quot;&quot;);</span>
<a href="#l14.3442"></a><span id="l14.3442" class="difflineplus">+            iconv(h, NULL, NULL, NULL, NULL);</span>
<a href="#l14.3443"></a><span id="l14.3443" class="difflineplus">+            iconv_close(h);</span>
<a href="#l14.3444"></a><span id="l14.3444" class="difflineplus">+        ],</span>
<a href="#l14.3445"></a><span id="l14.3445" class="difflineplus">+        [ac_cv_func_iconv=yes],</span>
<a href="#l14.3446"></a><span id="l14.3446" class="difflineplus">+        [ac_cv_func_iconv=no] </span>
<a href="#l14.3447"></a><span id="l14.3447" class="difflineplus">+        )]</span>
<a href="#l14.3448"></a><span id="l14.3448" class="difflineplus">+    )</span>
<a href="#l14.3449"></a><span id="l14.3449" class="difflineplus">+if test &quot;$ac_cv_func_iconv&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3450"></a><span id="l14.3450" class="difflineplus">+    AC_DEFINE(HAVE_ICONV)</span>
<a href="#l14.3451"></a><span id="l14.3451" class="difflineplus">+    DYNAMIC_XPCOM_LIBS=&quot;$DYNAMIC_XPCOM_LIBS $_ICONV_LIBS&quot;</span>
<a href="#l14.3452"></a><span id="l14.3452" class="difflineplus">+    LIBXUL_LIBS=&quot;$LIBXUL_LIBS $_ICONV_LIBS&quot;</span>
<a href="#l14.3453"></a><span id="l14.3453" class="difflineplus">+    LIBICONV=&quot;$_ICONV_LIBS&quot;</span>
<a href="#l14.3454"></a><span id="l14.3454" class="difflineplus">+    AC_CACHE_CHECK(</span>
<a href="#l14.3455"></a><span id="l14.3455" class="difflineplus">+        [for iconv() with const input],</span>
<a href="#l14.3456"></a><span id="l14.3456" class="difflineplus">+        ac_cv_func_const_iconv,</span>
<a href="#l14.3457"></a><span id="l14.3457" class="difflineplus">+        [AC_TRY_COMPILE([</span>
<a href="#l14.3458"></a><span id="l14.3458" class="difflineplus">+            #include &lt;stdlib.h&gt;</span>
<a href="#l14.3459"></a><span id="l14.3459" class="difflineplus">+            #include &lt;iconv.h&gt;</span>
<a href="#l14.3460"></a><span id="l14.3460" class="difflineplus">+            ],</span>
<a href="#l14.3461"></a><span id="l14.3461" class="difflineplus">+            [</span>
<a href="#l14.3462"></a><span id="l14.3462" class="difflineplus">+                const char *input = &quot;testing&quot;;</span>
<a href="#l14.3463"></a><span id="l14.3463" class="difflineplus">+                iconv_t h = iconv_open(&quot;&quot;, &quot;&quot;);</span>
<a href="#l14.3464"></a><span id="l14.3464" class="difflineplus">+                iconv(h, &amp;input, NULL, NULL, NULL);</span>
<a href="#l14.3465"></a><span id="l14.3465" class="difflineplus">+                iconv_close(h);</span>
<a href="#l14.3466"></a><span id="l14.3466" class="difflineplus">+            ],</span>
<a href="#l14.3467"></a><span id="l14.3467" class="difflineplus">+            [ac_cv_func_const_iconv=yes],</span>
<a href="#l14.3468"></a><span id="l14.3468" class="difflineplus">+            [ac_cv_func_const_iconv=no] </span>
<a href="#l14.3469"></a><span id="l14.3469" class="difflineplus">+            )]</span>
<a href="#l14.3470"></a><span id="l14.3470" class="difflineplus">+        )</span>
<a href="#l14.3471"></a><span id="l14.3471" class="difflineplus">+    if test &quot;$ac_cv_func_const_iconv&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3472"></a><span id="l14.3472" class="difflineplus">+        AC_DEFINE(HAVE_ICONV_WITH_CONST_INPUT)</span>
<a href="#l14.3473"></a><span id="l14.3473" class="difflineplus">+    fi</span>
<a href="#l14.3474"></a><span id="l14.3474" class="difflineplus">+fi</span>
<a href="#l14.3475"></a><span id="l14.3475" class="difflineplus">+LIBS=$_SAVE_LIBS</span>
<a href="#l14.3476"></a><span id="l14.3476" class="difflineplus">+</span>
<a href="#l14.3477"></a><span id="l14.3477" class="difflineplus">+    ;;</span>
<a href="#l14.3478"></a><span id="l14.3478" class="difflineplus">+esac</span>
<a href="#l14.3479"></a><span id="l14.3479" class="difflineplus">+</span>
<a href="#l14.3480"></a><span id="l14.3480" class="difflineplus">+AM_LANGINFO_CODESET</span>
<a href="#l14.3481"></a><span id="l14.3481" class="difflineplus">+</span>
<a href="#l14.3482"></a><span id="l14.3482" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.3483"></a><span id="l14.3483" class="difflineplus">+</span>
<a href="#l14.3484"></a><span id="l14.3484" class="difflineplus">+dnl **********************</span>
<a href="#l14.3485"></a><span id="l14.3485" class="difflineplus">+dnl *** va_copy checks ***</span>
<a href="#l14.3486"></a><span id="l14.3486" class="difflineplus">+dnl **********************</span>
<a href="#l14.3487"></a><span id="l14.3487" class="difflineplus">+dnl we currently check for all three va_copy possibilities, so we get</span>
<a href="#l14.3488"></a><span id="l14.3488" class="difflineplus">+dnl all results in config.log for bug reports.</span>
<a href="#l14.3489"></a><span id="l14.3489" class="difflineplus">+AC_MSG_CHECKING(for an implementation of va_copy())</span>
<a href="#l14.3490"></a><span id="l14.3490" class="difflineplus">+AC_CACHE_VAL(ac_cv_va_copy,[</span>
<a href="#l14.3491"></a><span id="l14.3491" class="difflineplus">+    AC_TRY_RUN([</span>
<a href="#l14.3492"></a><span id="l14.3492" class="difflineplus">+        #include &lt;stdarg.h&gt;</span>
<a href="#l14.3493"></a><span id="l14.3493" class="difflineplus">+        void f (int i, ...) {</span>
<a href="#l14.3494"></a><span id="l14.3494" class="difflineplus">+            va_list args1, args2;</span>
<a href="#l14.3495"></a><span id="l14.3495" class="difflineplus">+            va_start (args1, i);</span>
<a href="#l14.3496"></a><span id="l14.3496" class="difflineplus">+            va_copy (args2, args1);</span>
<a href="#l14.3497"></a><span id="l14.3497" class="difflineplus">+            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)</span>
<a href="#l14.3498"></a><span id="l14.3498" class="difflineplus">+                exit (1);</span>
<a href="#l14.3499"></a><span id="l14.3499" class="difflineplus">+            va_end (args1); va_end (args2);</span>
<a href="#l14.3500"></a><span id="l14.3500" class="difflineplus">+        }</span>
<a href="#l14.3501"></a><span id="l14.3501" class="difflineplus">+        int main() { f (0, 42); return 0; }],</span>
<a href="#l14.3502"></a><span id="l14.3502" class="difflineplus">+        ac_cv_va_copy=yes,</span>
<a href="#l14.3503"></a><span id="l14.3503" class="difflineplus">+        ac_cv_va_copy=no,</span>
<a href="#l14.3504"></a><span id="l14.3504" class="difflineplus">+        ac_cv_va_copy=no</span>
<a href="#l14.3505"></a><span id="l14.3505" class="difflineplus">+    )</span>
<a href="#l14.3506"></a><span id="l14.3506" class="difflineplus">+])</span>
<a href="#l14.3507"></a><span id="l14.3507" class="difflineplus">+AC_MSG_RESULT($ac_cv_va_copy)</span>
<a href="#l14.3508"></a><span id="l14.3508" class="difflineplus">+AC_MSG_CHECKING(for an implementation of __va_copy())</span>
<a href="#l14.3509"></a><span id="l14.3509" class="difflineplus">+AC_CACHE_VAL(ac_cv___va_copy,[</span>
<a href="#l14.3510"></a><span id="l14.3510" class="difflineplus">+    AC_TRY_RUN([</span>
<a href="#l14.3511"></a><span id="l14.3511" class="difflineplus">+        #include &lt;stdarg.h&gt;</span>
<a href="#l14.3512"></a><span id="l14.3512" class="difflineplus">+        void f (int i, ...) {</span>
<a href="#l14.3513"></a><span id="l14.3513" class="difflineplus">+            va_list args1, args2;</span>
<a href="#l14.3514"></a><span id="l14.3514" class="difflineplus">+            va_start (args1, i);</span>
<a href="#l14.3515"></a><span id="l14.3515" class="difflineplus">+            __va_copy (args2, args1);</span>
<a href="#l14.3516"></a><span id="l14.3516" class="difflineplus">+            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)</span>
<a href="#l14.3517"></a><span id="l14.3517" class="difflineplus">+                exit (1);</span>
<a href="#l14.3518"></a><span id="l14.3518" class="difflineplus">+            va_end (args1); va_end (args2);</span>
<a href="#l14.3519"></a><span id="l14.3519" class="difflineplus">+        }</span>
<a href="#l14.3520"></a><span id="l14.3520" class="difflineplus">+        int main() { f (0, 42); return 0; }],</span>
<a href="#l14.3521"></a><span id="l14.3521" class="difflineplus">+        ac_cv___va_copy=yes,</span>
<a href="#l14.3522"></a><span id="l14.3522" class="difflineplus">+        ac_cv___va_copy=no,</span>
<a href="#l14.3523"></a><span id="l14.3523" class="difflineplus">+        ac_cv___va_copy=no</span>
<a href="#l14.3524"></a><span id="l14.3524" class="difflineplus">+    )</span>
<a href="#l14.3525"></a><span id="l14.3525" class="difflineplus">+])</span>
<a href="#l14.3526"></a><span id="l14.3526" class="difflineplus">+AC_MSG_RESULT($ac_cv___va_copy)</span>
<a href="#l14.3527"></a><span id="l14.3527" class="difflineplus">+AC_MSG_CHECKING(whether va_lists can be copied by value)</span>
<a href="#l14.3528"></a><span id="l14.3528" class="difflineplus">+AC_CACHE_VAL(ac_cv_va_val_copy,[</span>
<a href="#l14.3529"></a><span id="l14.3529" class="difflineplus">+    AC_TRY_RUN([</span>
<a href="#l14.3530"></a><span id="l14.3530" class="difflineplus">+        #include &lt;stdarg.h&gt;</span>
<a href="#l14.3531"></a><span id="l14.3531" class="difflineplus">+        void f (int i, ...) {</span>
<a href="#l14.3532"></a><span id="l14.3532" class="difflineplus">+            va_list args1, args2;</span>
<a href="#l14.3533"></a><span id="l14.3533" class="difflineplus">+            va_start (args1, i);</span>
<a href="#l14.3534"></a><span id="l14.3534" class="difflineplus">+            args2 = args1;</span>
<a href="#l14.3535"></a><span id="l14.3535" class="difflineplus">+            if (va_arg (args2, int) != 42 || va_arg (args1, int) != 42)</span>
<a href="#l14.3536"></a><span id="l14.3536" class="difflineplus">+                exit (1);</span>
<a href="#l14.3537"></a><span id="l14.3537" class="difflineplus">+            va_end (args1); va_end (args2);</span>
<a href="#l14.3538"></a><span id="l14.3538" class="difflineplus">+        }</span>
<a href="#l14.3539"></a><span id="l14.3539" class="difflineplus">+        int main() { f (0, 42); return 0; }],</span>
<a href="#l14.3540"></a><span id="l14.3540" class="difflineplus">+        ac_cv_va_val_copy=yes,</span>
<a href="#l14.3541"></a><span id="l14.3541" class="difflineplus">+        ac_cv_va_val_copy=no,</span>
<a href="#l14.3542"></a><span id="l14.3542" class="difflineplus">+        ac_cv_va_val_copy=yes</span>
<a href="#l14.3543"></a><span id="l14.3543" class="difflineplus">+    )</span>
<a href="#l14.3544"></a><span id="l14.3544" class="difflineplus">+])</span>
<a href="#l14.3545"></a><span id="l14.3545" class="difflineplus">+if test &quot;x$ac_cv_va_copy&quot; = &quot;xyes&quot;; then</span>
<a href="#l14.3546"></a><span id="l14.3546" class="difflineplus">+    AC_DEFINE(VA_COPY, va_copy)</span>
<a href="#l14.3547"></a><span id="l14.3547" class="difflineplus">+    AC_DEFINE(HAVE_VA_COPY)</span>
<a href="#l14.3548"></a><span id="l14.3548" class="difflineplus">+elif test &quot;x$ac_cv___va_copy&quot; = &quot;xyes&quot;; then</span>
<a href="#l14.3549"></a><span id="l14.3549" class="difflineplus">+    AC_DEFINE(VA_COPY, __va_copy)</span>
<a href="#l14.3550"></a><span id="l14.3550" class="difflineplus">+    AC_DEFINE(HAVE_VA_COPY)</span>
<a href="#l14.3551"></a><span id="l14.3551" class="difflineplus">+fi</span>
<a href="#l14.3552"></a><span id="l14.3552" class="difflineplus">+</span>
<a href="#l14.3553"></a><span id="l14.3553" class="difflineplus">+if test &quot;x$ac_cv_va_val_copy&quot; = &quot;xno&quot;; then</span>
<a href="#l14.3554"></a><span id="l14.3554" class="difflineplus">+   AC_DEFINE(HAVE_VA_LIST_AS_ARRAY)</span>
<a href="#l14.3555"></a><span id="l14.3555" class="difflineplus">+fi</span>
<a href="#l14.3556"></a><span id="l14.3556" class="difflineplus">+AC_MSG_RESULT($ac_cv_va_val_copy)</span>
<a href="#l14.3557"></a><span id="l14.3557" class="difflineplus">+</span>
<a href="#l14.3558"></a><span id="l14.3558" class="difflineplus">+dnl Check for dll-challenged libc's.</span>
<a href="#l14.3559"></a><span id="l14.3559" class="difflineplus">+dnl This check is apparently only needed for Linux.</span>
<a href="#l14.3560"></a><span id="l14.3560" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.3561"></a><span id="l14.3561" class="difflineplus">+	*-linux*)</span>
<a href="#l14.3562"></a><span id="l14.3562" class="difflineplus">+	    dnl ===================================================================</span>
<a href="#l14.3563"></a><span id="l14.3563" class="difflineplus">+	    _curdir=`pwd`</span>
<a href="#l14.3564"></a><span id="l14.3564" class="difflineplus">+	    export _curdir</span>
<a href="#l14.3565"></a><span id="l14.3565" class="difflineplus">+	    rm -rf conftest* _conftest</span>
<a href="#l14.3566"></a><span id="l14.3566" class="difflineplus">+	    mkdir _conftest</span>
<a href="#l14.3567"></a><span id="l14.3567" class="difflineplus">+	    cat &gt;&gt; conftest.C &lt;&lt;\EOF</span>
<a href="#l14.3568"></a><span id="l14.3568" class="difflineplus">+#include &lt;stdio.h&gt;</span>
<a href="#l14.3569"></a><span id="l14.3569" class="difflineplus">+#include &lt;link.h&gt;</span>
<a href="#l14.3570"></a><span id="l14.3570" class="difflineplus">+#include &lt;dlfcn.h&gt;</span>
<a href="#l14.3571"></a><span id="l14.3571" class="difflineplus">+#ifdef _dl_loaded</span>
<a href="#l14.3572"></a><span id="l14.3572" class="difflineplus">+void __dump_link_map(void) {</span>
<a href="#l14.3573"></a><span id="l14.3573" class="difflineplus">+  struct link_map *map = _dl_loaded;</span>
<a href="#l14.3574"></a><span id="l14.3574" class="difflineplus">+  while (NULL != map) {printf(&quot;0x%08x %s\n&quot;, map-&gt;l_addr, map-&gt;l_name); map = map-&gt;l_next;}</span>
<a href="#l14.3575"></a><span id="l14.3575" class="difflineplus">+}</span>
<a href="#l14.3576"></a><span id="l14.3576" class="difflineplus">+int main() {</span>
<a href="#l14.3577"></a><span id="l14.3577" class="difflineplus">+  dlopen(&quot;./conftest1.so&quot;,RTLD_LAZY);</span>
<a href="#l14.3578"></a><span id="l14.3578" class="difflineplus">+  dlopen(&quot;./../_conftest/conftest1.so&quot;,RTLD_LAZY);</span>
<a href="#l14.3579"></a><span id="l14.3579" class="difflineplus">+  dlopen(&quot;CURDIR/_conftest/conftest1.so&quot;,RTLD_LAZY);</span>
<a href="#l14.3580"></a><span id="l14.3580" class="difflineplus">+  dlopen(&quot;CURDIR/_conftest/../_conftest/conftest1.so&quot;,RTLD_LAZY);</span>
<a href="#l14.3581"></a><span id="l14.3581" class="difflineplus">+  __dump_link_map();</span>
<a href="#l14.3582"></a><span id="l14.3582" class="difflineplus">+}</span>
<a href="#l14.3583"></a><span id="l14.3583" class="difflineplus">+#else</span>
<a href="#l14.3584"></a><span id="l14.3584" class="difflineplus">+/* _dl_loaded isn't defined, so this should be either a libc5 (glibc1) system, or a glibc2 system that doesn't have the multiple load bug (i.e., RH6.0).*/</span>
<a href="#l14.3585"></a><span id="l14.3585" class="difflineplus">+int main() { printf(&quot;./conftest1.so\n&quot;); }</span>
<a href="#l14.3586"></a><span id="l14.3586" class="difflineplus">+#endif</span>
<a href="#l14.3587"></a><span id="l14.3587" class="difflineplus">+EOF</span>
<a href="#l14.3588"></a><span id="l14.3588" class="difflineplus">+</span>
<a href="#l14.3589"></a><span id="l14.3589" class="difflineplus">+	    $PERL -p -i -e &quot;s/CURDIR/\$ENV{_curdir}/g;&quot; conftest.C</span>
<a href="#l14.3590"></a><span id="l14.3590" class="difflineplus">+</span>
<a href="#l14.3591"></a><span id="l14.3591" class="difflineplus">+	    cat &gt;&gt; conftest1.C &lt;&lt;\EOF</span>
<a href="#l14.3592"></a><span id="l14.3592" class="difflineplus">+#include &lt;stdio.h&gt;</span>
<a href="#l14.3593"></a><span id="l14.3593" class="difflineplus">+void foo(void) {printf(&quot;foo in dll called\n&quot;);}</span>
<a href="#l14.3594"></a><span id="l14.3594" class="difflineplus">+EOF</span>
<a href="#l14.3595"></a><span id="l14.3595" class="difflineplus">+	    ${CXX-g++} -fPIC -c -g conftest1.C</span>
<a href="#l14.3596"></a><span id="l14.3596" class="difflineplus">+	    ${CXX-g++} -shared -Wl,-h -Wl,conftest1.so -o conftest1.so conftest1.o</span>
<a href="#l14.3597"></a><span id="l14.3597" class="difflineplus">+	    ${CXX-g++} -g conftest.C -o conftest -ldl</span>
<a href="#l14.3598"></a><span id="l14.3598" class="difflineplus">+	    cp -f conftest1.so conftest _conftest</span>
<a href="#l14.3599"></a><span id="l14.3599" class="difflineplus">+	    cd _conftest</span>
<a href="#l14.3600"></a><span id="l14.3600" class="difflineplus">+	    if test `./conftest | grep conftest1.so | wc -l` -gt 1</span>
<a href="#l14.3601"></a><span id="l14.3601" class="difflineplus">+	    then</span>
<a href="#l14.3602"></a><span id="l14.3602" class="difflineplus">+		echo</span>
<a href="#l14.3603"></a><span id="l14.3603" class="difflineplus">+		echo &quot;*** Your libc has a bug that can result in loading the same dynamic&quot;</span>
<a href="#l14.3604"></a><span id="l14.3604" class="difflineplus">+		echo &quot;*** library multiple times.  This bug is known to be fixed in glibc-2.0.7-32&quot;</span>
<a href="#l14.3605"></a><span id="l14.3605" class="difflineplus">+		echo &quot;*** or later.  However, if you choose not to upgrade, the only effect&quot;</span>
<a href="#l14.3606"></a><span id="l14.3606" class="difflineplus">+		echo &quot;*** will be excessive memory usage at runtime.&quot;</span>
<a href="#l14.3607"></a><span id="l14.3607" class="difflineplus">+		echo</span>
<a href="#l14.3608"></a><span id="l14.3608" class="difflineplus">+	    fi</span>
<a href="#l14.3609"></a><span id="l14.3609" class="difflineplus">+	    cd ${_curdir}</span>
<a href="#l14.3610"></a><span id="l14.3610" class="difflineplus">+	    rm -rf conftest* _conftest</span>
<a href="#l14.3611"></a><span id="l14.3611" class="difflineplus">+	    dnl ===================================================================</span>
<a href="#l14.3612"></a><span id="l14.3612" class="difflineplus">+	    ;;</span>
<a href="#l14.3613"></a><span id="l14.3613" class="difflineplus">+esac</span>
<a href="#l14.3614"></a><span id="l14.3614" class="difflineplus">+</span>
<a href="#l14.3615"></a><span id="l14.3615" class="difflineplus">+dnl ===================================================================</span>
<a href="#l14.3616"></a><span id="l14.3616" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3617"></a><span id="l14.3617" class="difflineplus">+dnl By default, turn rtti and exceptions off on g++/egcs</span>
<a href="#l14.3618"></a><span id="l14.3618" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3619"></a><span id="l14.3619" class="difflineplus">+if test &quot;$GNU_CXX&quot;; then</span>
<a href="#l14.3620"></a><span id="l14.3620" class="difflineplus">+</span>
<a href="#l14.3621"></a><span id="l14.3621" class="difflineplus">+  AC_MSG_CHECKING(for C++ exceptions flag)</span>
<a href="#l14.3622"></a><span id="l14.3622" class="difflineplus">+</span>
<a href="#l14.3623"></a><span id="l14.3623" class="difflineplus">+  dnl They changed -f[no-]handle-exceptions to -f[no-]exceptions in g++ 2.8</span>
<a href="#l14.3624"></a><span id="l14.3624" class="difflineplus">+  AC_CACHE_VAL(ac_cv_cxx_exceptions_flags,</span>
<a href="#l14.3625"></a><span id="l14.3625" class="difflineplus">+  [echo &quot;int main() { return 0; }&quot; | cat &gt; conftest.C</span>
<a href="#l14.3626"></a><span id="l14.3626" class="difflineplus">+</span>
<a href="#l14.3627"></a><span id="l14.3627" class="difflineplus">+  ${CXX-g++} ${CXXFLAGS} -c -fno-handle-exceptions conftest.C &gt; conftest.out 2&gt;&amp;1</span>
<a href="#l14.3628"></a><span id="l14.3628" class="difflineplus">+</span>
<a href="#l14.3629"></a><span id="l14.3629" class="difflineplus">+  if egrep &quot;warning.*renamed&quot; conftest.out &gt;/dev/null; then</span>
<a href="#l14.3630"></a><span id="l14.3630" class="difflineplus">+    ac_cv_cxx_exceptions_flags=${_COMPILER_PREFIX}-fno-exceptions</span>
<a href="#l14.3631"></a><span id="l14.3631" class="difflineplus">+  else</span>
<a href="#l14.3632"></a><span id="l14.3632" class="difflineplus">+    ac_cv_cxx_exceptions_flags=${_COMPILER_PREFIX}-fno-handle-exceptions</span>
<a href="#l14.3633"></a><span id="l14.3633" class="difflineplus">+  fi</span>
<a href="#l14.3634"></a><span id="l14.3634" class="difflineplus">+</span>
<a href="#l14.3635"></a><span id="l14.3635" class="difflineplus">+  rm -f conftest*])</span>
<a href="#l14.3636"></a><span id="l14.3636" class="difflineplus">+</span>
<a href="#l14.3637"></a><span id="l14.3637" class="difflineplus">+  AC_MSG_RESULT($ac_cv_cxx_exceptions_flags)</span>
<a href="#l14.3638"></a><span id="l14.3638" class="difflineplus">+  _MOZ_EXCEPTIONS_FLAGS_OFF=$ac_cv_cxx_exceptions_flags</span>
<a href="#l14.3639"></a><span id="l14.3639" class="difflineplus">+  _MOZ_EXCEPTIONS_FLAGS_ON=`echo $ac_cv_cxx_exceptions_flags | sed 's|no-||'`</span>
<a href="#l14.3640"></a><span id="l14.3640" class="difflineplus">+fi</span>
<a href="#l14.3641"></a><span id="l14.3641" class="difflineplus">+</span>
<a href="#l14.3642"></a><span id="l14.3642" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3643"></a><span id="l14.3643" class="difflineplus">+dnl Put your C++ language/feature checks below</span>
<a href="#l14.3644"></a><span id="l14.3644" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3645"></a><span id="l14.3645" class="difflineplus">+AC_LANG_CPLUSPLUS</span>
<a href="#l14.3646"></a><span id="l14.3646" class="difflineplus">+</span>
<a href="#l14.3647"></a><span id="l14.3647" class="difflineplus">+HAVE_GCC3_ABI=</span>
<a href="#l14.3648"></a><span id="l14.3648" class="difflineplus">+if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.3649"></a><span id="l14.3649" class="difflineplus">+  AC_CACHE_CHECK(for gcc 3.0 ABI,</span>
<a href="#l14.3650"></a><span id="l14.3650" class="difflineplus">+      ac_cv_gcc_three_abi,</span>
<a href="#l14.3651"></a><span id="l14.3651" class="difflineplus">+      [AC_TRY_COMPILE([],</span>
<a href="#l14.3652"></a><span id="l14.3652" class="difflineplus">+                      [</span>
<a href="#l14.3653"></a><span id="l14.3653" class="difflineplus">+#if defined(__GXX_ABI_VERSION) &amp;&amp; __GXX_ABI_VERSION &gt;= 100 /* G++ V3 ABI */</span>
<a href="#l14.3654"></a><span id="l14.3654" class="difflineplus">+  return 0;</span>
<a href="#l14.3655"></a><span id="l14.3655" class="difflineplus">+#else</span>
<a href="#l14.3656"></a><span id="l14.3656" class="difflineplus">+#error Not gcc3.</span>
<a href="#l14.3657"></a><span id="l14.3657" class="difflineplus">+#endif</span>
<a href="#l14.3658"></a><span id="l14.3658" class="difflineplus">+                      ],</span>
<a href="#l14.3659"></a><span id="l14.3659" class="difflineplus">+                      ac_cv_gcc_three_abi=&quot;yes&quot;,</span>
<a href="#l14.3660"></a><span id="l14.3660" class="difflineplus">+                      ac_cv_gcc_three_abi=&quot;no&quot;)])</span>
<a href="#l14.3661"></a><span id="l14.3661" class="difflineplus">+  if test &quot;$ac_cv_gcc_three_abi&quot; = &quot;yes&quot;; then</span>
<a href="#l14.3662"></a><span id="l14.3662" class="difflineplus">+      TARGET_COMPILER_ABI=&quot;${TARGET_COMPILER_ABI-gcc3}&quot;</span>
<a href="#l14.3663"></a><span id="l14.3663" class="difflineplus">+      HAVE_GCC3_ABI=1</span>
<a href="#l14.3664"></a><span id="l14.3664" class="difflineplus">+  else</span>
<a href="#l14.3665"></a><span id="l14.3665" class="difflineplus">+      TARGET_COMPILER_ABI=&quot;${TARGET_COMPILER_ABI-gcc2}&quot;</span>
<a href="#l14.3666"></a><span id="l14.3666" class="difflineplus">+  fi</span>
<a href="#l14.3667"></a><span id="l14.3667" class="difflineplus">+fi</span>
<a href="#l14.3668"></a><span id="l14.3668" class="difflineplus">+AC_SUBST(HAVE_GCC3_ABI)</span>
<a href="#l14.3669"></a><span id="l14.3669" class="difflineplus">+</span>
<a href="#l14.3670"></a><span id="l14.3670" class="difflineplus">+</span>
<a href="#l14.3671"></a><span id="l14.3671" class="difflineplus">+AC_CACHE_CHECK(for C++ \&quot;explicit\&quot; keyword,</span>
<a href="#l14.3672"></a><span id="l14.3672" class="difflineplus">+               ac_cv_cpp_explicit,</span>
<a href="#l14.3673"></a><span id="l14.3673" class="difflineplus">+               [AC_TRY_COMPILE(class X {</span>
<a href="#l14.3674"></a><span id="l14.3674" class="difflineplus">+                               public: explicit X(int i) : i_(i) {}</span>
<a href="#l14.3675"></a><span id="l14.3675" class="difflineplus">+                               private: int i_;</span>
<a href="#l14.3676"></a><span id="l14.3676" class="difflineplus">+                               };,</span>
<a href="#l14.3677"></a><span id="l14.3677" class="difflineplus">+                               X x(3);,</span>
<a href="#l14.3678"></a><span id="l14.3678" class="difflineplus">+                               ac_cv_cpp_explicit=yes,</span>
<a href="#l14.3679"></a><span id="l14.3679" class="difflineplus">+                               ac_cv_cpp_explicit=no)])</span>
<a href="#l14.3680"></a><span id="l14.3680" class="difflineplus">+if test &quot;$ac_cv_cpp_explicit&quot; = yes ; then</span>
<a href="#l14.3681"></a><span id="l14.3681" class="difflineplus">+   AC_DEFINE(HAVE_CPP_EXPLICIT)</span>
<a href="#l14.3682"></a><span id="l14.3682" class="difflineplus">+fi</span>
<a href="#l14.3683"></a><span id="l14.3683" class="difflineplus">+</span>
<a href="#l14.3684"></a><span id="l14.3684" class="difflineplus">+AC_CACHE_CHECK(for C++ \&quot;typename\&quot; keyword,</span>
<a href="#l14.3685"></a><span id="l14.3685" class="difflineplus">+               ac_cv_cpp_typename,</span>
<a href="#l14.3686"></a><span id="l14.3686" class="difflineplus">+               [AC_TRY_COMPILE(class param {</span>
<a href="#l14.3687"></a><span id="l14.3687" class="difflineplus">+                               public:</span>
<a href="#l14.3688"></a><span id="l14.3688" class="difflineplus">+                                   typedef unsigned long num_type;</span>
<a href="#l14.3689"></a><span id="l14.3689" class="difflineplus">+                               };</span>
<a href="#l14.3690"></a><span id="l14.3690" class="difflineplus">+</span>
<a href="#l14.3691"></a><span id="l14.3691" class="difflineplus">+                               template &lt;class T&gt; class tplt {</span>
<a href="#l14.3692"></a><span id="l14.3692" class="difflineplus">+                               public:</span>
<a href="#l14.3693"></a><span id="l14.3693" class="difflineplus">+                                   typedef typename T::num_type t_num_type;</span>
<a href="#l14.3694"></a><span id="l14.3694" class="difflineplus">+                                   t_num_type foo(typename T::num_type num) {</span>
<a href="#l14.3695"></a><span id="l14.3695" class="difflineplus">+                                       return num;</span>
<a href="#l14.3696"></a><span id="l14.3696" class="difflineplus">+                                   }</span>
<a href="#l14.3697"></a><span id="l14.3697" class="difflineplus">+                               };,</span>
<a href="#l14.3698"></a><span id="l14.3698" class="difflineplus">+                               tplt&lt;param&gt; A;</span>
<a href="#l14.3699"></a><span id="l14.3699" class="difflineplus">+                               A.foo(0);,</span>
<a href="#l14.3700"></a><span id="l14.3700" class="difflineplus">+                               ac_cv_cpp_typename=yes,</span>
<a href="#l14.3701"></a><span id="l14.3701" class="difflineplus">+                               ac_cv_cpp_typename=no)])</span>
<a href="#l14.3702"></a><span id="l14.3702" class="difflineplus">+if test &quot;$ac_cv_cpp_typename&quot; = yes ; then</span>
<a href="#l14.3703"></a><span id="l14.3703" class="difflineplus">+   AC_DEFINE(HAVE_CPP_TYPENAME)</span>
<a href="#l14.3704"></a><span id="l14.3704" class="difflineplus">+fi</span>
<a href="#l14.3705"></a><span id="l14.3705" class="difflineplus">+</span>
<a href="#l14.3706"></a><span id="l14.3706" class="difflineplus">+dnl Check for support of modern template specialization syntax</span>
<a href="#l14.3707"></a><span id="l14.3707" class="difflineplus">+dnl Test code and requirement from scc@netscape.com.</span>
<a href="#l14.3708"></a><span id="l14.3708" class="difflineplus">+dnl Autoconf cut-and-paste job by waterson@netscape.com</span>
<a href="#l14.3709"></a><span id="l14.3709" class="difflineplus">+AC_CACHE_CHECK(for modern C++ template specialization syntax support,</span>
<a href="#l14.3710"></a><span id="l14.3710" class="difflineplus">+               ac_cv_cpp_modern_specialize_template_syntax,</span>
<a href="#l14.3711"></a><span id="l14.3711" class="difflineplus">+               [AC_TRY_COMPILE(template &lt;class T&gt; struct X { int a; };</span>
<a href="#l14.3712"></a><span id="l14.3712" class="difflineplus">+                               class Y {};</span>
<a href="#l14.3713"></a><span id="l14.3713" class="difflineplus">+                               template &lt;&gt; struct X&lt;Y&gt; { double a; };,</span>
<a href="#l14.3714"></a><span id="l14.3714" class="difflineplus">+                               X&lt;int&gt; int_x;</span>
<a href="#l14.3715"></a><span id="l14.3715" class="difflineplus">+                               X&lt;Y&gt; y_x;,</span>
<a href="#l14.3716"></a><span id="l14.3716" class="difflineplus">+                               ac_cv_cpp_modern_specialize_template_syntax=yes,</span>
<a href="#l14.3717"></a><span id="l14.3717" class="difflineplus">+                               ac_cv_cpp_modern_specialize_template_syntax=no)])</span>
<a href="#l14.3718"></a><span id="l14.3718" class="difflineplus">+if test &quot;$ac_cv_cpp_modern_specialize_template_syntax&quot; = yes ; then</span>
<a href="#l14.3719"></a><span id="l14.3719" class="difflineplus">+  AC_DEFINE(HAVE_CPP_MODERN_SPECIALIZE_TEMPLATE_SYNTAX)</span>
<a href="#l14.3720"></a><span id="l14.3720" class="difflineplus">+fi</span>
<a href="#l14.3721"></a><span id="l14.3721" class="difflineplus">+</span>
<a href="#l14.3722"></a><span id="l14.3722" class="difflineplus">+</span>
<a href="#l14.3723"></a><span id="l14.3723" class="difflineplus">+dnl Some compilers support only full specialization, and some don't.</span>
<a href="#l14.3724"></a><span id="l14.3724" class="difflineplus">+AC_CACHE_CHECK(whether partial template specialization works,</span>
<a href="#l14.3725"></a><span id="l14.3725" class="difflineplus">+               ac_cv_cpp_partial_specialization,</span>
<a href="#l14.3726"></a><span id="l14.3726" class="difflineplus">+               [AC_TRY_COMPILE(template &lt;class T&gt; class Foo {};</span>
<a href="#l14.3727"></a><span id="l14.3727" class="difflineplus">+                               template &lt;class T&gt; class Foo&lt;T*&gt; {};,</span>
<a href="#l14.3728"></a><span id="l14.3728" class="difflineplus">+                               return 0;,</span>
<a href="#l14.3729"></a><span id="l14.3729" class="difflineplus">+                               ac_cv_cpp_partial_specialization=yes,</span>
<a href="#l14.3730"></a><span id="l14.3730" class="difflineplus">+                               ac_cv_cpp_partial_specialization=no)])</span>
<a href="#l14.3731"></a><span id="l14.3731" class="difflineplus">+if test &quot;$ac_cv_cpp_partial_specialization&quot; = yes ; then</span>
<a href="#l14.3732"></a><span id="l14.3732" class="difflineplus">+  AC_DEFINE(HAVE_CPP_PARTIAL_SPECIALIZATION)</span>
<a href="#l14.3733"></a><span id="l14.3733" class="difflineplus">+fi</span>
<a href="#l14.3734"></a><span id="l14.3734" class="difflineplus">+</span>
<a href="#l14.3735"></a><span id="l14.3735" class="difflineplus">+dnl Some compilers have limited support for operators with templates;</span>
<a href="#l14.3736"></a><span id="l14.3736" class="difflineplus">+dnl specifically, it is necessary to define derived operators when a base</span>
<a href="#l14.3737"></a><span id="l14.3737" class="difflineplus">+dnl class's operator declaration should suffice.</span>
<a href="#l14.3738"></a><span id="l14.3738" class="difflineplus">+AC_CACHE_CHECK(whether operators must be re-defined for templates derived from templates,</span>
<a href="#l14.3739"></a><span id="l14.3739" class="difflineplus">+               ac_cv_need_derived_template_operators,</span>
<a href="#l14.3740"></a><span id="l14.3740" class="difflineplus">+               [AC_TRY_COMPILE([template &lt;class T&gt; class Base { };</span>
<a href="#l14.3741"></a><span id="l14.3741" class="difflineplus">+                                template &lt;class T&gt;</span>
<a href="#l14.3742"></a><span id="l14.3742" class="difflineplus">+                                Base&lt;T&gt; operator+(const Base&lt;T&gt;&amp; lhs, const Base&lt;T&gt;&amp; rhs) { return lhs; }</span>
<a href="#l14.3743"></a><span id="l14.3743" class="difflineplus">+                                template &lt;class T&gt; class Derived : public Base&lt;T&gt; { };],</span>
<a href="#l14.3744"></a><span id="l14.3744" class="difflineplus">+                               [Derived&lt;char&gt; a, b;</span>
<a href="#l14.3745"></a><span id="l14.3745" class="difflineplus">+                                Base&lt;char&gt; c = a + b;</span>
<a href="#l14.3746"></a><span id="l14.3746" class="difflineplus">+                                return 0;],</span>
<a href="#l14.3747"></a><span id="l14.3747" class="difflineplus">+                               ac_cv_need_derived_template_operators=no,</span>
<a href="#l14.3748"></a><span id="l14.3748" class="difflineplus">+                               ac_cv_need_derived_template_operators=yes)])</span>
<a href="#l14.3749"></a><span id="l14.3749" class="difflineplus">+if test &quot;$ac_cv_need_derived_template_operators&quot; = yes ; then</span>
<a href="#l14.3750"></a><span id="l14.3750" class="difflineplus">+  AC_DEFINE(NEED_CPP_DERIVED_TEMPLATE_OPERATORS)</span>
<a href="#l14.3751"></a><span id="l14.3751" class="difflineplus">+fi</span>
<a href="#l14.3752"></a><span id="l14.3752" class="difflineplus">+</span>
<a href="#l14.3753"></a><span id="l14.3753" class="difflineplus">+</span>
<a href="#l14.3754"></a><span id="l14.3754" class="difflineplus">+dnl Some compilers have trouble detecting that a template class</span>
<a href="#l14.3755"></a><span id="l14.3755" class="difflineplus">+dnl that derives from another template is actually an instance</span>
<a href="#l14.3756"></a><span id="l14.3756" class="difflineplus">+dnl of the base class. This test checks for that.</span>
<a href="#l14.3757"></a><span id="l14.3757" class="difflineplus">+AC_CACHE_CHECK(whether we need to cast a derived template to pass as its base class,</span>
<a href="#l14.3758"></a><span id="l14.3758" class="difflineplus">+               ac_cv_need_cpp_template_cast_to_base,</span>
<a href="#l14.3759"></a><span id="l14.3759" class="difflineplus">+               [AC_TRY_COMPILE([template &lt;class T&gt; class Base { };</span>
<a href="#l14.3760"></a><span id="l14.3760" class="difflineplus">+                                template &lt;class T&gt; class Derived : public Base&lt;T&gt; { };</span>
<a href="#l14.3761"></a><span id="l14.3761" class="difflineplus">+                                template &lt;class T&gt; int foo(const Base&lt;T&gt;&amp;) { return 0; }],</span>
<a href="#l14.3762"></a><span id="l14.3762" class="difflineplus">+                               [Derived&lt;char&gt; bar; return foo(bar);],</span>
<a href="#l14.3763"></a><span id="l14.3763" class="difflineplus">+                               ac_cv_need_cpp_template_cast_to_base=no,</span>
<a href="#l14.3764"></a><span id="l14.3764" class="difflineplus">+                               ac_cv_need_cpp_template_cast_to_base=yes)])</span>
<a href="#l14.3765"></a><span id="l14.3765" class="difflineplus">+if test &quot;$ac_cv_need_cpp_template_cast_to_base&quot; = yes ; then</span>
<a href="#l14.3766"></a><span id="l14.3766" class="difflineplus">+  AC_DEFINE(NEED_CPP_TEMPLATE_CAST_TO_BASE)</span>
<a href="#l14.3767"></a><span id="l14.3767" class="difflineplus">+fi</span>
<a href="#l14.3768"></a><span id="l14.3768" class="difflineplus">+</span>
<a href="#l14.3769"></a><span id="l14.3769" class="difflineplus">+dnl Some compilers have trouble resolving the ambiguity between two</span>
<a href="#l14.3770"></a><span id="l14.3770" class="difflineplus">+dnl functions whose arguments differ only by cv-qualifications.</span>
<a href="#l14.3771"></a><span id="l14.3771" class="difflineplus">+AC_CACHE_CHECK(whether the compiler can resolve const ambiguities for templates,</span>
<a href="#l14.3772"></a><span id="l14.3772" class="difflineplus">+               ac_cv_can_resolve_const_ambiguity,</span>
<a href="#l14.3773"></a><span id="l14.3773" class="difflineplus">+               [AC_TRY_COMPILE([</span>
<a href="#l14.3774"></a><span id="l14.3774" class="difflineplus">+                                template &lt;class T&gt; class ptrClass {</span>
<a href="#l14.3775"></a><span id="l14.3775" class="difflineplus">+                                  public: T* ptr;</span>
<a href="#l14.3776"></a><span id="l14.3776" class="difflineplus">+                                };</span>
<a href="#l14.3777"></a><span id="l14.3777" class="difflineplus">+</span>
<a href="#l14.3778"></a><span id="l14.3778" class="difflineplus">+                                template &lt;class T&gt; T* a(ptrClass&lt;T&gt; *arg) {</span>
<a href="#l14.3779"></a><span id="l14.3779" class="difflineplus">+                                  return arg-&gt;ptr;</span>
<a href="#l14.3780"></a><span id="l14.3780" class="difflineplus">+                                }</span>
<a href="#l14.3781"></a><span id="l14.3781" class="difflineplus">+</span>
<a href="#l14.3782"></a><span id="l14.3782" class="difflineplus">+                                template &lt;class T&gt;</span>
<a href="#l14.3783"></a><span id="l14.3783" class="difflineplus">+                                const T* a(const ptrClass&lt;T&gt; *arg) {</span>
<a href="#l14.3784"></a><span id="l14.3784" class="difflineplus">+                                  return arg-&gt;ptr;</span>
<a href="#l14.3785"></a><span id="l14.3785" class="difflineplus">+                                }</span>
<a href="#l14.3786"></a><span id="l14.3786" class="difflineplus">+                               ],</span>
<a href="#l14.3787"></a><span id="l14.3787" class="difflineplus">+                               [ ptrClass&lt;int&gt; i;</span>
<a href="#l14.3788"></a><span id="l14.3788" class="difflineplus">+                                 a(&amp;i); ],</span>
<a href="#l14.3789"></a><span id="l14.3789" class="difflineplus">+                               ac_cv_can_resolve_const_ambiguity=yes,</span>
<a href="#l14.3790"></a><span id="l14.3790" class="difflineplus">+                               ac_cv_can_resolve_const_ambiguity=no)])</span>
<a href="#l14.3791"></a><span id="l14.3791" class="difflineplus">+if test &quot;$ac_cv_can_resolve_const_ambiguity&quot; = no ; then</span>
<a href="#l14.3792"></a><span id="l14.3792" class="difflineplus">+  AC_DEFINE(CANT_RESOLVE_CPP_CONST_AMBIGUITY)</span>
<a href="#l14.3793"></a><span id="l14.3793" class="difflineplus">+fi</span>
<a href="#l14.3794"></a><span id="l14.3794" class="difflineplus">+</span>
<a href="#l14.3795"></a><span id="l14.3795" class="difflineplus">+dnl</span>
<a href="#l14.3796"></a><span id="l14.3796" class="difflineplus">+dnl We don't do exceptions on unix.  The only reason this used to be here</span>
<a href="#l14.3797"></a><span id="l14.3797" class="difflineplus">+dnl is that mozilla/xpcom/tests/TestCOMPtr.cpp has a test which uses </span>
<a href="#l14.3798"></a><span id="l14.3798" class="difflineplus">+dnl exceptions.  But, we turn exceptions off by default and this test breaks.</span>
<a href="#l14.3799"></a><span id="l14.3799" class="difflineplus">+dnl So im commenting this out until someone writes some artificial </span>
<a href="#l14.3800"></a><span id="l14.3800" class="difflineplus">+dnl intelligence to detect not only if the compiler has exceptions, but if </span>
<a href="#l14.3801"></a><span id="l14.3801" class="difflineplus">+dnl they are enabled as well.</span>
<a href="#l14.3802"></a><span id="l14.3802" class="difflineplus">+dnl </span>
<a href="#l14.3803"></a><span id="l14.3803" class="difflineplus">+dnl AC_CACHE_CHECK(for C++ \&quot;exceptions\&quot;,</span>
<a href="#l14.3804"></a><span id="l14.3804" class="difflineplus">+dnl                ac_cv_cpp_exceptions,</span>
<a href="#l14.3805"></a><span id="l14.3805" class="difflineplus">+dnl                [AC_TRY_COMPILE(class X { public: X() {} };</span>
<a href="#l14.3806"></a><span id="l14.3806" class="difflineplus">+dnl                                static void F() { throw X(); },</span>
<a href="#l14.3807"></a><span id="l14.3807" class="difflineplus">+dnl                                try { F(); } catch(X &amp; e) { },</span>
<a href="#l14.3808"></a><span id="l14.3808" class="difflineplus">+dnl                                ac_cv_cpp_exceptions=yes,</span>
<a href="#l14.3809"></a><span id="l14.3809" class="difflineplus">+dnl                                ac_cv_cpp_exceptions=no)])</span>
<a href="#l14.3810"></a><span id="l14.3810" class="difflineplus">+dnl if test $ac_cv_cpp_exceptions = yes ; then</span>
<a href="#l14.3811"></a><span id="l14.3811" class="difflineplus">+dnl    AC_DEFINE(HAVE_CPP_EXCEPTIONS)</span>
<a href="#l14.3812"></a><span id="l14.3812" class="difflineplus">+dnl fi</span>
<a href="#l14.3813"></a><span id="l14.3813" class="difflineplus">+</span>
<a href="#l14.3814"></a><span id="l14.3814" class="difflineplus">+dnl Some compilers have marginal |using| support; for example, gcc-2.7.2.3</span>
<a href="#l14.3815"></a><span id="l14.3815" class="difflineplus">+dnl supports it well enough to allow us to use it to change access, but not</span>
<a href="#l14.3816"></a><span id="l14.3816" class="difflineplus">+dnl to resolve ambiguity. The next two tests determine how well the |using|</span>
<a href="#l14.3817"></a><span id="l14.3817" class="difflineplus">+dnl keyword is supported.</span>
<a href="#l14.3818"></a><span id="l14.3818" class="difflineplus">+dnl</span>
<a href="#l14.3819"></a><span id="l14.3819" class="difflineplus">+dnl Check to see if we can change access with |using|.  Test both a</span>
<a href="#l14.3820"></a><span id="l14.3820" class="difflineplus">+dnl legal and an illegal example.</span>
<a href="#l14.3821"></a><span id="l14.3821" class="difflineplus">+AC_CACHE_CHECK(whether the C++ \&quot;using\&quot; keyword can change access,</span>
<a href="#l14.3822"></a><span id="l14.3822" class="difflineplus">+               ac_cv_cpp_access_changing_using2,</span>
<a href="#l14.3823"></a><span id="l14.3823" class="difflineplus">+               [AC_TRY_COMPILE(</span>
<a href="#l14.3824"></a><span id="l14.3824" class="difflineplus">+                   class A { protected: int foo() { return 0; } };</span>
<a href="#l14.3825"></a><span id="l14.3825" class="difflineplus">+                   class B : public A { public: using A::foo; };,</span>
<a href="#l14.3826"></a><span id="l14.3826" class="difflineplus">+                   B b; return b.foo();,</span>
<a href="#l14.3827"></a><span id="l14.3827" class="difflineplus">+                   [AC_TRY_COMPILE(</span>
<a href="#l14.3828"></a><span id="l14.3828" class="difflineplus">+                       class A { public: int foo() { return 1; } };</span>
<a href="#l14.3829"></a><span id="l14.3829" class="difflineplus">+                       class B : public A { private: using A::foo; };,</span>
<a href="#l14.3830"></a><span id="l14.3830" class="difflineplus">+                       B b; return b.foo();,</span>
<a href="#l14.3831"></a><span id="l14.3831" class="difflineplus">+                       ac_cv_cpp_access_changing_using2=no,</span>
<a href="#l14.3832"></a><span id="l14.3832" class="difflineplus">+                       ac_cv_cpp_access_changing_using2=yes)],</span>
<a href="#l14.3833"></a><span id="l14.3833" class="difflineplus">+                   ac_cv_cpp_access_changing_using2=no)])</span>
<a href="#l14.3834"></a><span id="l14.3834" class="difflineplus">+if test &quot;$ac_cv_cpp_access_changing_using2&quot; = yes ; then</span>
<a href="#l14.3835"></a><span id="l14.3835" class="difflineplus">+   AC_DEFINE(HAVE_CPP_ACCESS_CHANGING_USING)</span>
<a href="#l14.3836"></a><span id="l14.3836" class="difflineplus">+fi</span>
<a href="#l14.3837"></a><span id="l14.3837" class="difflineplus">+</span>
<a href="#l14.3838"></a><span id="l14.3838" class="difflineplus">+dnl Check to see if we can resolve ambiguity with |using|.</span>
<a href="#l14.3839"></a><span id="l14.3839" class="difflineplus">+AC_CACHE_CHECK(whether the C++ \&quot;using\&quot; keyword resolves ambiguity,</span>
<a href="#l14.3840"></a><span id="l14.3840" class="difflineplus">+               ac_cv_cpp_ambiguity_resolving_using,</span>
<a href="#l14.3841"></a><span id="l14.3841" class="difflineplus">+               [AC_TRY_COMPILE(class X { </span>
<a href="#l14.3842"></a><span id="l14.3842" class="difflineplus">+                                 public: int go(const X&amp;) {return 3;}</span>
<a href="#l14.3843"></a><span id="l14.3843" class="difflineplus">+                                         int jo(const X&amp;) {return 3;}</span>
<a href="#l14.3844"></a><span id="l14.3844" class="difflineplus">+                               };</span>
<a href="#l14.3845"></a><span id="l14.3845" class="difflineplus">+                               class Y : public X {</span>
<a href="#l14.3846"></a><span id="l14.3846" class="difflineplus">+                                 public:  int go(int) {return 2;}</span>
<a href="#l14.3847"></a><span id="l14.3847" class="difflineplus">+                                          int jo(int) {return 2;}</span>
<a href="#l14.3848"></a><span id="l14.3848" class="difflineplus">+                                          using X::jo;</span>
<a href="#l14.3849"></a><span id="l14.3849" class="difflineplus">+                                 private: using X::go;</span>
<a href="#l14.3850"></a><span id="l14.3850" class="difflineplus">+                               };,</span>
<a href="#l14.3851"></a><span id="l14.3851" class="difflineplus">+                               X x; Y y; y.jo(x);,</span>
<a href="#l14.3852"></a><span id="l14.3852" class="difflineplus">+                               ac_cv_cpp_ambiguity_resolving_using=yes,</span>
<a href="#l14.3853"></a><span id="l14.3853" class="difflineplus">+                               ac_cv_cpp_ambiguity_resolving_using=no)])</span>
<a href="#l14.3854"></a><span id="l14.3854" class="difflineplus">+if test &quot;$ac_cv_cpp_ambiguity_resolving_using&quot; = yes ; then</span>
<a href="#l14.3855"></a><span id="l14.3855" class="difflineplus">+   AC_DEFINE(HAVE_CPP_AMBIGUITY_RESOLVING_USING)</span>
<a href="#l14.3856"></a><span id="l14.3856" class="difflineplus">+fi</span>
<a href="#l14.3857"></a><span id="l14.3857" class="difflineplus">+</span>
<a href="#l14.3858"></a><span id="l14.3858" class="difflineplus">+dnl Check to see if the |std| namespace is supported. If so, we'll want</span>
<a href="#l14.3859"></a><span id="l14.3859" class="difflineplus">+dnl to qualify any standard library calls with &quot;std::&quot; to ensure that</span>
<a href="#l14.3860"></a><span id="l14.3860" class="difflineplus">+dnl those functions can be resolved.</span>
<a href="#l14.3861"></a><span id="l14.3861" class="difflineplus">+AC_CACHE_CHECK(for \&quot;std::\&quot; namespace,</span>
<a href="#l14.3862"></a><span id="l14.3862" class="difflineplus">+               ac_cv_cpp_namespace_std,</span>
<a href="#l14.3863"></a><span id="l14.3863" class="difflineplus">+               [AC_TRY_COMPILE([#include &lt;algorithm&gt;],</span>
<a href="#l14.3864"></a><span id="l14.3864" class="difflineplus">+                               [return std::min(0, 1);],</span>
<a href="#l14.3865"></a><span id="l14.3865" class="difflineplus">+                               ac_cv_cpp_namespace_std=yes,</span>
<a href="#l14.3866"></a><span id="l14.3866" class="difflineplus">+                               ac_cv_cpp_namespace_std=no)])</span>
<a href="#l14.3867"></a><span id="l14.3867" class="difflineplus">+if test &quot;$ac_cv_cpp_namespace_std&quot; = yes ; then</span>
<a href="#l14.3868"></a><span id="l14.3868" class="difflineplus">+   AC_DEFINE(HAVE_CPP_NAMESPACE_STD)</span>
<a href="#l14.3869"></a><span id="l14.3869" class="difflineplus">+fi</span>
<a href="#l14.3870"></a><span id="l14.3870" class="difflineplus">+</span>
<a href="#l14.3871"></a><span id="l14.3871" class="difflineplus">+dnl Older compilers are overly ambitious with respect to using the standard</span>
<a href="#l14.3872"></a><span id="l14.3872" class="difflineplus">+dnl template library's |operator!=()| when |operator==()| is defined. In</span>
<a href="#l14.3873"></a><span id="l14.3873" class="difflineplus">+dnl which case, defining |operator!=()| in addition to |operator==()| causes</span>
<a href="#l14.3874"></a><span id="l14.3874" class="difflineplus">+dnl ambiguity at compile-time. This test checks for that case.</span>
<a href="#l14.3875"></a><span id="l14.3875" class="difflineplus">+AC_CACHE_CHECK(whether standard template operator!=() is ambiguous,</span>
<a href="#l14.3876"></a><span id="l14.3876" class="difflineplus">+               ac_cv_cpp_unambiguous_std_notequal,</span>
<a href="#l14.3877"></a><span id="l14.3877" class="difflineplus">+               [AC_TRY_COMPILE([#include &lt;algorithm&gt;</span>
<a href="#l14.3878"></a><span id="l14.3878" class="difflineplus">+                                struct T1 {};</span>
<a href="#l14.3879"></a><span id="l14.3879" class="difflineplus">+                                int operator==(const T1&amp;, const T1&amp;) { return 0; }</span>
<a href="#l14.3880"></a><span id="l14.3880" class="difflineplus">+                                int operator!=(const T1&amp;, const T1&amp;) { return 0; }],</span>
<a href="#l14.3881"></a><span id="l14.3881" class="difflineplus">+                               [T1 a,b; return a != b;],</span>
<a href="#l14.3882"></a><span id="l14.3882" class="difflineplus">+                               ac_cv_cpp_unambiguous_std_notequal=unambiguous,</span>
<a href="#l14.3883"></a><span id="l14.3883" class="difflineplus">+                               ac_cv_cpp_unambiguous_std_notequal=ambiguous)])</span>
<a href="#l14.3884"></a><span id="l14.3884" class="difflineplus">+if test &quot;$ac_cv_cpp_unambiguous_std_notequal&quot; = unambiguous ; then</span>
<a href="#l14.3885"></a><span id="l14.3885" class="difflineplus">+  AC_DEFINE(HAVE_CPP_UNAMBIGUOUS_STD_NOTEQUAL)</span>
<a href="#l14.3886"></a><span id="l14.3886" class="difflineplus">+fi</span>
<a href="#l14.3887"></a><span id="l14.3887" class="difflineplus">+</span>
<a href="#l14.3888"></a><span id="l14.3888" class="difflineplus">+</span>
<a href="#l14.3889"></a><span id="l14.3889" class="difflineplus">+AC_CACHE_CHECK(for C++ reinterpret_cast,</span>
<a href="#l14.3890"></a><span id="l14.3890" class="difflineplus">+               ac_cv_cpp_reinterpret_cast,</span>
<a href="#l14.3891"></a><span id="l14.3891" class="difflineplus">+               [AC_TRY_COMPILE(struct X { int i; };</span>
<a href="#l14.3892"></a><span id="l14.3892" class="difflineplus">+                               struct Y { int i; };,</span>
<a href="#l14.3893"></a><span id="l14.3893" class="difflineplus">+                               X x; X*const z = &amp;x;Y*y = reinterpret_cast&lt;Y*&gt;(z);,</span>
<a href="#l14.3894"></a><span id="l14.3894" class="difflineplus">+                               ac_cv_cpp_reinterpret_cast=yes,</span>
<a href="#l14.3895"></a><span id="l14.3895" class="difflineplus">+                               ac_cv_cpp_reinterpret_cast=no)])</span>
<a href="#l14.3896"></a><span id="l14.3896" class="difflineplus">+if test &quot;$ac_cv_cpp_reinterpret_cast&quot; = yes ; then</span>
<a href="#l14.3897"></a><span id="l14.3897" class="difflineplus">+   AC_DEFINE(HAVE_CPP_NEW_CASTS)</span>
<a href="#l14.3898"></a><span id="l14.3898" class="difflineplus">+fi</span>
<a href="#l14.3899"></a><span id="l14.3899" class="difflineplus">+</span>
<a href="#l14.3900"></a><span id="l14.3900" class="difflineplus">+dnl See if a dynamic_cast to void* gives the most derived object.</span>
<a href="#l14.3901"></a><span id="l14.3901" class="difflineplus">+AC_CACHE_CHECK(for C++ dynamic_cast to void*,</span>
<a href="#l14.3902"></a><span id="l14.3902" class="difflineplus">+               ac_cv_cpp_dynamic_cast_void_ptr,</span>
<a href="#l14.3903"></a><span id="l14.3903" class="difflineplus">+               [AC_TRY_RUN([class X { int i; public: virtual ~X() { } };</span>
<a href="#l14.3904"></a><span id="l14.3904" class="difflineplus">+                            class Y { int j; public: virtual ~Y() { } };</span>
<a href="#l14.3905"></a><span id="l14.3905" class="difflineplus">+                            class Z : public X, public Y { int k; };</span>
<a href="#l14.3906"></a><span id="l14.3906" class="difflineplus">+</span>
<a href="#l14.3907"></a><span id="l14.3907" class="difflineplus">+                            int main() {</span>
<a href="#l14.3908"></a><span id="l14.3908" class="difflineplus">+                                 Z mdo;</span>
<a href="#l14.3909"></a><span id="l14.3909" class="difflineplus">+                                 X *subx = (X*)&amp;mdo;</span>
<a href="#l14.3910"></a><span id="l14.3910" class="difflineplus">+                                 Y *suby = (Y*)&amp;mdo;</span>
<a href="#l14.3911"></a><span id="l14.3911" class="difflineplus">+                                 return !((((void*)&amp;mdo != (void*)subx) &amp;&amp;</span>
<a href="#l14.3912"></a><span id="l14.3912" class="difflineplus">+                                           ((void*)&amp;mdo == dynamic_cast&lt;void*&gt;(subx))) ||</span>
<a href="#l14.3913"></a><span id="l14.3913" class="difflineplus">+                                          (((void*)&amp;mdo != (void*)suby) &amp;&amp;</span>
<a href="#l14.3914"></a><span id="l14.3914" class="difflineplus">+                                           ((void*)&amp;mdo == dynamic_cast&lt;void*&gt;(suby))));</span>
<a href="#l14.3915"></a><span id="l14.3915" class="difflineplus">+                            }],</span>
<a href="#l14.3916"></a><span id="l14.3916" class="difflineplus">+                           ac_cv_cpp_dynamic_cast_void_ptr=yes,</span>
<a href="#l14.3917"></a><span id="l14.3917" class="difflineplus">+                           ac_cv_cpp_dynamic_cast_void_ptr=no,</span>
<a href="#l14.3918"></a><span id="l14.3918" class="difflineplus">+                           ac_cv_cpp_dynamic_cast_void_ptr=no)])</span>
<a href="#l14.3919"></a><span id="l14.3919" class="difflineplus">+if test &quot;$ac_cv_cpp_dynamic_cast_void_ptr&quot; = yes ; then</span>
<a href="#l14.3920"></a><span id="l14.3920" class="difflineplus">+   AC_DEFINE(HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR)</span>
<a href="#l14.3921"></a><span id="l14.3921" class="difflineplus">+fi</span>
<a href="#l14.3922"></a><span id="l14.3922" class="difflineplus">+</span>
<a href="#l14.3923"></a><span id="l14.3923" class="difflineplus">+</span>
<a href="#l14.3924"></a><span id="l14.3924" class="difflineplus">+dnl note that this one is reversed - if the test fails, then</span>
<a href="#l14.3925"></a><span id="l14.3925" class="difflineplus">+dnl we require implementations of unused virtual methods. Which</span>
<a href="#l14.3926"></a><span id="l14.3926" class="difflineplus">+dnl really blows because it means we'll have useless vtable</span>
<a href="#l14.3927"></a><span id="l14.3927" class="difflineplus">+dnl bloat.</span>
<a href="#l14.3928"></a><span id="l14.3928" class="difflineplus">+AC_CACHE_CHECK(whether C++ requires implementation of unused virtual methods,</span>
<a href="#l14.3929"></a><span id="l14.3929" class="difflineplus">+               ac_cv_cpp_unused_required,</span>
<a href="#l14.3930"></a><span id="l14.3930" class="difflineplus">+               [AC_TRY_LINK(class X {private: virtual void never_called();};,</span>
<a href="#l14.3931"></a><span id="l14.3931" class="difflineplus">+                               X x;,</span>
<a href="#l14.3932"></a><span id="l14.3932" class="difflineplus">+                               ac_cv_cpp_unused_required=no,</span>
<a href="#l14.3933"></a><span id="l14.3933" class="difflineplus">+                               ac_cv_cpp_unused_required=yes)])</span>
<a href="#l14.3934"></a><span id="l14.3934" class="difflineplus">+if test &quot;$ac_cv_cpp_unused_required&quot; = yes ; then</span>
<a href="#l14.3935"></a><span id="l14.3935" class="difflineplus">+   AC_DEFINE(NEED_CPP_UNUSED_IMPLEMENTATIONS)</span>
<a href="#l14.3936"></a><span id="l14.3936" class="difflineplus">+fi</span>
<a href="#l14.3937"></a><span id="l14.3937" class="difflineplus">+</span>
<a href="#l14.3938"></a><span id="l14.3938" class="difflineplus">+</span>
<a href="#l14.3939"></a><span id="l14.3939" class="difflineplus">+dnl Some compilers have trouble comparing a constant reference to a templatized</span>
<a href="#l14.3940"></a><span id="l14.3940" class="difflineplus">+dnl class to zero, and require an explicit operator==() to be defined that takes</span>
<a href="#l14.3941"></a><span id="l14.3941" class="difflineplus">+dnl an int. This test separates the strong from the weak.</span>
<a href="#l14.3942"></a><span id="l14.3942" class="difflineplus">+</span>
<a href="#l14.3943"></a><span id="l14.3943" class="difflineplus">+AC_CACHE_CHECK(for trouble comparing to zero near std::operator!=(),</span>
<a href="#l14.3944"></a><span id="l14.3944" class="difflineplus">+               ac_cv_trouble_comparing_to_zero,</span>
<a href="#l14.3945"></a><span id="l14.3945" class="difflineplus">+               [AC_TRY_COMPILE([#include &lt;algorithm&gt;</span>
<a href="#l14.3946"></a><span id="l14.3946" class="difflineplus">+                                template &lt;class T&gt; class Foo {};</span>
<a href="#l14.3947"></a><span id="l14.3947" class="difflineplus">+                                class T2;</span>
<a href="#l14.3948"></a><span id="l14.3948" class="difflineplus">+                                template &lt;class T&gt; int operator==(const T2*, const T&amp;) { return 0; }</span>
<a href="#l14.3949"></a><span id="l14.3949" class="difflineplus">+                                template &lt;class T&gt; int operator!=(const T2*, const T&amp;) { return 0; }],</span>
<a href="#l14.3950"></a><span id="l14.3950" class="difflineplus">+                               [Foo&lt;int&gt; f; return (0 != f);],</span>
<a href="#l14.3951"></a><span id="l14.3951" class="difflineplus">+                               ac_cv_trouble_comparing_to_zero=no,</span>
<a href="#l14.3952"></a><span id="l14.3952" class="difflineplus">+                               ac_cv_trouble_comparing_to_zero=yes)])</span>
<a href="#l14.3953"></a><span id="l14.3953" class="difflineplus">+if test &quot;$ac_cv_trouble_comparing_to_zero&quot; = yes ; then</span>
<a href="#l14.3954"></a><span id="l14.3954" class="difflineplus">+  AC_DEFINE(HAVE_CPP_TROUBLE_COMPARING_TO_ZERO)</span>
<a href="#l14.3955"></a><span id="l14.3955" class="difflineplus">+fi</span>
<a href="#l14.3956"></a><span id="l14.3956" class="difflineplus">+</span>
<a href="#l14.3957"></a><span id="l14.3957" class="difflineplus">+</span>
<a href="#l14.3958"></a><span id="l14.3958" class="difflineplus">+</span>
<a href="#l14.3959"></a><span id="l14.3959" class="difflineplus">+dnl End of C++ language/feature checks</span>
<a href="#l14.3960"></a><span id="l14.3960" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.3961"></a><span id="l14.3961" class="difflineplus">+</span>
<a href="#l14.3962"></a><span id="l14.3962" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3963"></a><span id="l14.3963" class="difflineplus">+dnl =  Internationalization checks</span>
<a href="#l14.3964"></a><span id="l14.3964" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3965"></a><span id="l14.3965" class="difflineplus">+dnl</span>
<a href="#l14.3966"></a><span id="l14.3966" class="difflineplus">+dnl Internationalization and Locale support is different</span>
<a href="#l14.3967"></a><span id="l14.3967" class="difflineplus">+dnl on various UNIX platforms.  Checks for specific i18n</span>
<a href="#l14.3968"></a><span id="l14.3968" class="difflineplus">+dnl features go here.</span>
<a href="#l14.3969"></a><span id="l14.3969" class="difflineplus">+</span>
<a href="#l14.3970"></a><span id="l14.3970" class="difflineplus">+dnl check for LC_MESSAGES</span>
<a href="#l14.3971"></a><span id="l14.3971" class="difflineplus">+AC_CACHE_CHECK(for LC_MESSAGES,</span>
<a href="#l14.3972"></a><span id="l14.3972" class="difflineplus">+		ac_cv_i18n_lc_messages,</span>
<a href="#l14.3973"></a><span id="l14.3973" class="difflineplus">+		[AC_TRY_COMPILE([#include &lt;locale.h&gt;],</span>
<a href="#l14.3974"></a><span id="l14.3974" class="difflineplus">+				[int category = LC_MESSAGES;],</span>
<a href="#l14.3975"></a><span id="l14.3975" class="difflineplus">+				ac_cv_i18n_lc_messages=yes,</span>
<a href="#l14.3976"></a><span id="l14.3976" class="difflineplus">+				ac_cv_i18n_lc_messages=no)])</span>
<a href="#l14.3977"></a><span id="l14.3977" class="difflineplus">+if test &quot;$ac_cv_i18n_lc_messages&quot; = yes; then</span>
<a href="#l14.3978"></a><span id="l14.3978" class="difflineplus">+   AC_DEFINE(HAVE_I18N_LC_MESSAGES)</span>
<a href="#l14.3979"></a><span id="l14.3979" class="difflineplus">+fi 	</span>
<a href="#l14.3980"></a><span id="l14.3980" class="difflineplus">+</span>
<a href="#l14.3981"></a><span id="l14.3981" class="difflineplus">+fi # SKIP_COMPILER_CHECKS</span>
<a href="#l14.3982"></a><span id="l14.3982" class="difflineplus">+</span>
<a href="#l14.3983"></a><span id="l14.3983" class="difflineplus">+TARGET_XPCOM_ABI=</span>
<a href="#l14.3984"></a><span id="l14.3984" class="difflineplus">+if test -n &quot;${CPU_ARCH}&quot; -a -n &quot;${TARGET_COMPILER_ABI}&quot;; then</span>
<a href="#l14.3985"></a><span id="l14.3985" class="difflineplus">+    TARGET_XPCOM_ABI=&quot;${CPU_ARCH}-${TARGET_COMPILER_ABI}&quot;</span>
<a href="#l14.3986"></a><span id="l14.3986" class="difflineplus">+fi</span>
<a href="#l14.3987"></a><span id="l14.3987" class="difflineplus">+</span>
<a href="#l14.3988"></a><span id="l14.3988" class="difflineplus">+dnl Mozilla specific options</span>
<a href="#l14.3989"></a><span id="l14.3989" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3990"></a><span id="l14.3990" class="difflineplus">+dnl The macros used for command line options</span>
<a href="#l14.3991"></a><span id="l14.3991" class="difflineplus">+dnl are defined in build/autoconf/altoptions.m4.</span>
<a href="#l14.3992"></a><span id="l14.3992" class="difflineplus">+</span>
<a href="#l14.3993"></a><span id="l14.3993" class="difflineplus">+</span>
<a href="#l14.3994"></a><span id="l14.3994" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3995"></a><span id="l14.3995" class="difflineplus">+dnl =</span>
<a href="#l14.3996"></a><span id="l14.3996" class="difflineplus">+dnl = Check for external package dependencies</span>
<a href="#l14.3997"></a><span id="l14.3997" class="difflineplus">+dnl =</span>
<a href="#l14.3998"></a><span id="l14.3998" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.3999"></a><span id="l14.3999" class="difflineplus">+MOZ_ARG_HEADER(External Packages)</span>
<a href="#l14.4000"></a><span id="l14.4000" class="difflineplus">+</span>
<a href="#l14.4001"></a><span id="l14.4001" class="difflineplus">+MOZ_ENABLE_LIBXUL=</span>
<a href="#l14.4002"></a><span id="l14.4002" class="difflineplus">+</span>
<a href="#l14.4003"></a><span id="l14.4003" class="difflineplus">+MOZ_ARG_WITH_STRING(libxul-sdk,</span>
<a href="#l14.4004"></a><span id="l14.4004" class="difflineplus">+[  --with-libxul-sdk=PFX   Use the libXUL SDK at &lt;PFX&gt;],</span>
<a href="#l14.4005"></a><span id="l14.4005" class="difflineplus">+  LIBXUL_SDK_DIR=$withval)</span>
<a href="#l14.4006"></a><span id="l14.4006" class="difflineplus">+</span>
<a href="#l14.4007"></a><span id="l14.4007" class="difflineplus">+if test &quot;$LIBXUL_SDK_DIR&quot; = &quot;yes&quot;; then</span>
<a href="#l14.4008"></a><span id="l14.4008" class="difflineplus">+    AC_MSG_ERROR([--with-libxul-sdk must specify a path])</span>
<a href="#l14.4009"></a><span id="l14.4009" class="difflineplus">+elif test -n &quot;$LIBXUL_SDK_DIR&quot; -a &quot;$LIBXUL_SDK_DIR&quot; != &quot;no&quot;; then</span>
<a href="#l14.4010"></a><span id="l14.4010" class="difflineplus">+    LIBXUL_SDK=`cd &quot;$LIBXUL_SDK_DIR&quot; &amp;&amp; pwd`</span>
<a href="#l14.4011"></a><span id="l14.4011" class="difflineplus">+</span>
<a href="#l14.4012"></a><span id="l14.4012" class="difflineplus">+    if test ! -f &quot;$LIBXUL_SDK/sdk/include/xpcom-config.h&quot;; then</span>
<a href="#l14.4013"></a><span id="l14.4013" class="difflineplus">+        AC_MSG_ERROR([$LIBXUL_SDK/sdk/include/xpcom-config.h doesn't exist])</span>
<a href="#l14.4014"></a><span id="l14.4014" class="difflineplus">+    fi</span>
<a href="#l14.4015"></a><span id="l14.4015" class="difflineplus">+</span>
<a href="#l14.4016"></a><span id="l14.4016" class="difflineplus">+    MOZ_ENABLE_LIBXUL=1</span>
<a href="#l14.4017"></a><span id="l14.4017" class="difflineplus">+fi</span>
<a href="#l14.4018"></a><span id="l14.4018" class="difflineplus">+AC_SUBST(LIBXUL_SDK)</span>
<a href="#l14.4019"></a><span id="l14.4019" class="difflineplus">+</span>
<a href="#l14.4020"></a><span id="l14.4020" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4021"></a><span id="l14.4021" class="difflineplus">+dnl = If NSPR was not detected in the system, </span>
<a href="#l14.4022"></a><span id="l14.4022" class="difflineplus">+dnl = use the one in the source tree (mozilla/nsprpub)</span>
<a href="#l14.4023"></a><span id="l14.4023" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4024"></a><span id="l14.4024" class="difflineplus">+MOZ_ARG_WITH_BOOL(system-nspr,</span>
<a href="#l14.4025"></a><span id="l14.4025" class="difflineplus">+[  --with-system-nspr      Use system installed NSPR],</span>
<a href="#l14.4026"></a><span id="l14.4026" class="difflineplus">+    _USE_SYSTEM_NSPR=1 )</span>
<a href="#l14.4027"></a><span id="l14.4027" class="difflineplus">+</span>
<a href="#l14.4028"></a><span id="l14.4028" class="difflineplus">+if test -n &quot;$_USE_SYSTEM_NSPR&quot;; then</span>
<a href="#l14.4029"></a><span id="l14.4029" class="difflineplus">+    AM_PATH_NSPR(4.7.0, [MOZ_NATIVE_NSPR=1], [MOZ_NATIVE_NSPR=])</span>
<a href="#l14.4030"></a><span id="l14.4030" class="difflineplus">+fi</span>
<a href="#l14.4031"></a><span id="l14.4031" class="difflineplus">+</span>
<a href="#l14.4032"></a><span id="l14.4032" class="difflineplus">+if test -n &quot;$MOZ_NATIVE_NSPR&quot;; then</span>
<a href="#l14.4033"></a><span id="l14.4033" class="difflineplus">+    _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.4034"></a><span id="l14.4034" class="difflineplus">+    CFLAGS=&quot;$CFLAGS $NSPR_CFLAGS&quot;</span>
<a href="#l14.4035"></a><span id="l14.4035" class="difflineplus">+    AC_TRY_COMPILE([#include &quot;prlog.h&quot;],</span>
<a href="#l14.4036"></a><span id="l14.4036" class="difflineplus">+                [#ifndef PR_STATIC_ASSERT</span>
<a href="#l14.4037"></a><span id="l14.4037" class="difflineplus">+                 #error PR_STATIC_ASSERT not defined</span>
<a href="#l14.4038"></a><span id="l14.4038" class="difflineplus">+                 #endif],</span>
<a href="#l14.4039"></a><span id="l14.4039" class="difflineplus">+                [MOZ_NATIVE_NSPR=1],</span>
<a href="#l14.4040"></a><span id="l14.4040" class="difflineplus">+                AC_MSG_ERROR([system NSPR does not support PR_STATIC_ASSERT]))</span>
<a href="#l14.4041"></a><span id="l14.4041" class="difflineplus">+    CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.4042"></a><span id="l14.4042" class="difflineplus">+else</span>
<a href="#l14.4043"></a><span id="l14.4043" class="difflineplus">+    NSPR_CFLAGS='`$(DEPTH)/mozilla/nsprpub/config/nspr-config --prefix=$(LIBXUL_DIST) --includedir=$(LIBXUL_DIST)/include/nspr --cflags`'</span>
<a href="#l14.4044"></a><span id="l14.4044" class="difflineplus">+    # explicitly set libs for Visual Age C++ for OS/2</span>
<a href="#l14.4045"></a><span id="l14.4045" class="difflineplus">+    if test &quot;$OS_ARCH&quot; = &quot;OS2&quot; -a &quot;$VACPP&quot; = &quot;yes&quot;; then</span>
<a href="#l14.4046"></a><span id="l14.4046" class="difflineplus">+        NSPR_LIBS='$(LIBXUL_DIST)/lib/nspr'$NSPR_VERSION'.lib $(LIBXUL_DIST)/lib/plc'$NSPR_VERSION'.lib $(LIBXUL_DIST)/lib/plds'$NSPR_VERSION'.lib '$_PTHREAD_LDFLAGS''</span>
<a href="#l14.4047"></a><span id="l14.4047" class="difflineplus">+    elif test &quot;$OS_ARCH&quot; = &quot;WINCE&quot;; then</span>
<a href="#l14.4048"></a><span id="l14.4048" class="difflineplus">+        NSPR_CFLAGS='-I$(LIBXUL_DIST)/include/nspr'</span>
<a href="#l14.4049"></a><span id="l14.4049" class="difflineplus">+        NSPR_LIBS='$(LIBXUL_DIST)/lib/nspr'$NSPR_VERSION'.lib $(LIBXUL_DIST)/lib/plc'$NSPR_VERSION'.lib $(LIBXUL_DIST)/lib/plds'$NSPR_VERSION'.lib '</span>
<a href="#l14.4050"></a><span id="l14.4050" class="difflineplus">+    elif test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l14.4051"></a><span id="l14.4051" class="difflineplus">+        NSPR_CFLAGS='-I$(LIBXUL_DIST)/include/nspr'</span>
<a href="#l14.4052"></a><span id="l14.4052" class="difflineplus">+        if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l14.4053"></a><span id="l14.4053" class="difflineplus">+            NSPR_LIBS=&quot;-L\$(LIBXUL_DIST)/lib -lnspr$NSPR_VERSION -lplc$NSPR_VERSION -lplds$NSPR_VERSION&quot;</span>
<a href="#l14.4054"></a><span id="l14.4054" class="difflineplus">+        else</span>
<a href="#l14.4055"></a><span id="l14.4055" class="difflineplus">+            NSPR_LIBS='$(LIBXUL_DIST)/lib/nspr'$NSPR_VERSION'.lib $(LIBXUL_DIST)/lib/plc'$NSPR_VERSION'.lib $(LIBXUL_DIST)/lib/plds'$NSPR_VERSION'.lib '</span>
<a href="#l14.4056"></a><span id="l14.4056" class="difflineplus">+        fi</span>
<a href="#l14.4057"></a><span id="l14.4057" class="difflineplus">+    else</span>
<a href="#l14.4058"></a><span id="l14.4058" class="difflineplus">+        NSPR_LIBS='`$(DEPTH)/mozilla/nsprpub/config/nspr-config --prefix=$(LIBXUL_DIST) --libdir=$(LIBXUL_DIST)/lib --libs`'</span>
<a href="#l14.4059"></a><span id="l14.4059" class="difflineplus">+    fi</span>
<a href="#l14.4060"></a><span id="l14.4060" class="difflineplus">+fi</span>
<a href="#l14.4061"></a><span id="l14.4061" class="difflineplus">+</span>
<a href="#l14.4062"></a><span id="l14.4062" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4063"></a><span id="l14.4063" class="difflineplus">+dnl = If NSS was not detected in the system, </span>
<a href="#l14.4064"></a><span id="l14.4064" class="difflineplus">+dnl = use the one in the source tree (mozilla/security/nss)</span>
<a href="#l14.4065"></a><span id="l14.4065" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4066"></a><span id="l14.4066" class="difflineplus">+</span>
<a href="#l14.4067"></a><span id="l14.4067" class="difflineplus">+MOZ_ARG_WITH_BOOL(system-nss,</span>
<a href="#l14.4068"></a><span id="l14.4068" class="difflineplus">+[  --with-system-nss      Use system installed NSS],</span>
<a href="#l14.4069"></a><span id="l14.4069" class="difflineplus">+    _USE_SYSTEM_NSS=1 )</span>
<a href="#l14.4070"></a><span id="l14.4070" class="difflineplus">+</span>
<a href="#l14.4071"></a><span id="l14.4071" class="difflineplus">+if test -n &quot;$_USE_SYSTEM_NSS&quot;; then</span>
<a href="#l14.4072"></a><span id="l14.4072" class="difflineplus">+    AM_PATH_NSS(3.12.0, [MOZ_NATIVE_NSS=1], [MOZ_NATIVE_NSS=])</span>
<a href="#l14.4073"></a><span id="l14.4073" class="difflineplus">+fi</span>
<a href="#l14.4074"></a><span id="l14.4074" class="difflineplus">+</span>
<a href="#l14.4075"></a><span id="l14.4075" class="difflineplus">+if test -n &quot;$MOZ_NATIVE_NSS&quot;; then</span>
<a href="#l14.4076"></a><span id="l14.4076" class="difflineplus">+   NSS_LIBS=&quot;$NSS_LIBS -lcrmf&quot;</span>
<a href="#l14.4077"></a><span id="l14.4077" class="difflineplus">+else</span>
<a href="#l14.4078"></a><span id="l14.4078" class="difflineplus">+   NSS_CFLAGS='-I$(LIBXUL_DIST)/include/nss'</span>
<a href="#l14.4079"></a><span id="l14.4079" class="difflineplus">+   NSS_DEP_LIBS=&quot;\</span>
<a href="#l14.4080"></a><span id="l14.4080" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)crmf.\$(LIB_SUFFIX) \</span>
<a href="#l14.4081"></a><span id="l14.4081" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)smime$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l14.4082"></a><span id="l14.4082" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)ssl$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l14.4083"></a><span id="l14.4083" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)nss$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l14.4084"></a><span id="l14.4084" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)nssutil$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l14.4085"></a><span id="l14.4085" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)softokn$NSS_VERSION\$(DLL_SUFFIX)&quot;</span>
<a href="#l14.4086"></a><span id="l14.4086" class="difflineplus">+</span>
<a href="#l14.4087"></a><span id="l14.4087" class="difflineplus">+   if test -z &quot;$GNU_CC&quot; &amp;&amp; test &quot;$OS_ARCH&quot; = &quot;WINNT&quot; -o &quot;$OS_ARCH&quot; = &quot;WINCE&quot; -o &quot;$OS_ARCH&quot; = &quot;OS2&quot;; then</span>
<a href="#l14.4088"></a><span id="l14.4088" class="difflineplus">+       NSS_LIBS=&quot;\</span>
<a href="#l14.4089"></a><span id="l14.4089" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)crmf.\$(LIB_SUFFIX) \</span>
<a href="#l14.4090"></a><span id="l14.4090" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)smime$NSS_VERSION.\$(IMPORT_LIB_SUFFIX) \</span>
<a href="#l14.4091"></a><span id="l14.4091" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)ssl$NSS_VERSION.\$(IMPORT_LIB_SUFFIX) \</span>
<a href="#l14.4092"></a><span id="l14.4092" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)nss$NSS_VERSION.\$(IMPORT_LIB_SUFFIX) \</span>
<a href="#l14.4093"></a><span id="l14.4093" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)nssutil$NSS_VERSION.\$(IMPORT_LIB_SUFFIX) \</span>
<a href="#l14.4094"></a><span id="l14.4094" class="difflineplus">+        \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)softokn$NSS_VERSION.\$(IMPORT_LIB_SUFFIX)&quot;</span>
<a href="#l14.4095"></a><span id="l14.4095" class="difflineplus">+   else</span>
<a href="#l14.4096"></a><span id="l14.4096" class="difflineplus">+       NSS_LIBS='$(LIBS_DIR)'&quot; -lcrmf -lsmime$NSS_VERSION -lssl$NSS_VERSION -lnss$NSS_VERSION -lnssutil$NSS_VERSION -lsoftokn$NSS_VERSION&quot;</span>
<a href="#l14.4097"></a><span id="l14.4097" class="difflineplus">+   fi</span>
<a href="#l14.4098"></a><span id="l14.4098" class="difflineplus">+fi</span>
<a href="#l14.4099"></a><span id="l14.4099" class="difflineplus">+</span>
<a href="#l14.4100"></a><span id="l14.4100" class="difflineplus">+if test -z &quot;$SKIP_LIBRARY_CHECKS&quot;; then</span>
<a href="#l14.4101"></a><span id="l14.4101" class="difflineplus">+dnl system JPEG support</span>
<a href="#l14.4102"></a><span id="l14.4102" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4103"></a><span id="l14.4103" class="difflineplus">+MOZ_ARG_WITH_STRING(system-jpeg,</span>
<a href="#l14.4104"></a><span id="l14.4104" class="difflineplus">+[  --with-system-jpeg[=PFX]</span>
<a href="#l14.4105"></a><span id="l14.4105" class="difflineplus">+                          Use system libjpeg [installed at prefix PFX]],</span>
<a href="#l14.4106"></a><span id="l14.4106" class="difflineplus">+    JPEG_DIR=$withval)</span>
<a href="#l14.4107"></a><span id="l14.4107" class="difflineplus">+</span>
<a href="#l14.4108"></a><span id="l14.4108" class="difflineplus">+_SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.4109"></a><span id="l14.4109" class="difflineplus">+_SAVE_LDFLAGS=$LDFLAGS</span>
<a href="#l14.4110"></a><span id="l14.4110" class="difflineplus">+_SAVE_LIBS=$LIBS</span>
<a href="#l14.4111"></a><span id="l14.4111" class="difflineplus">+if test -n &quot;${JPEG_DIR}&quot; -a &quot;${JPEG_DIR}&quot; != &quot;yes&quot;; then</span>
<a href="#l14.4112"></a><span id="l14.4112" class="difflineplus">+    CFLAGS=&quot;-I${JPEG_DIR}/include $CFLAGS&quot;</span>
<a href="#l14.4113"></a><span id="l14.4113" class="difflineplus">+    LDFLAGS=&quot;-L${JPEG_DIR}/lib $LDFLAGS&quot;</span>
<a href="#l14.4114"></a><span id="l14.4114" class="difflineplus">+fi</span>
<a href="#l14.4115"></a><span id="l14.4115" class="difflineplus">+if test -z &quot;$JPEG_DIR&quot; -o &quot;$JPEG_DIR&quot; = no; then</span>
<a href="#l14.4116"></a><span id="l14.4116" class="difflineplus">+    SYSTEM_JPEG=</span>
<a href="#l14.4117"></a><span id="l14.4117" class="difflineplus">+else</span>
<a href="#l14.4118"></a><span id="l14.4118" class="difflineplus">+    AC_CHECK_LIB(jpeg, jpeg_destroy_compress, [SYSTEM_JPEG=1 JPEG_LIBS=&quot;-ljpeg $JPEG_LIBS&quot;], SYSTEM_JPEG=, $JPEG_LIBS)</span>
<a href="#l14.4119"></a><span id="l14.4119" class="difflineplus">+fi</span>
<a href="#l14.4120"></a><span id="l14.4120" class="difflineplus">+</span>
<a href="#l14.4121"></a><span id="l14.4121" class="difflineplus">+if test &quot;$SYSTEM_JPEG&quot; = 1; then</span>
<a href="#l14.4122"></a><span id="l14.4122" class="difflineplus">+    LIBS=&quot;$JPEG_LIBS $LIBS&quot;</span>
<a href="#l14.4123"></a><span id="l14.4123" class="difflineplus">+    AC_TRY_COMPILE([ #include &lt;stdio.h&gt;</span>
<a href="#l14.4124"></a><span id="l14.4124" class="difflineplus">+                     #include &lt;sys/types.h&gt;</span>
<a href="#l14.4125"></a><span id="l14.4125" class="difflineplus">+                     #include &lt;jpeglib.h&gt; ],</span>
<a href="#l14.4126"></a><span id="l14.4126" class="difflineplus">+                   [ #if JPEG_LIB_VERSION &lt; $MOZJPEG</span>
<a href="#l14.4127"></a><span id="l14.4127" class="difflineplus">+                     #error &quot;Insufficient JPEG library version ($MOZJPEG required).&quot;</span>
<a href="#l14.4128"></a><span id="l14.4128" class="difflineplus">+                     #endif ],</span>
<a href="#l14.4129"></a><span id="l14.4129" class="difflineplus">+                   SYSTEM_JPEG=1,</span>
<a href="#l14.4130"></a><span id="l14.4130" class="difflineplus">+                   [SYSTEM_JPEG= JPEG_CFLAGS= JPEG_LIBS=]) </span>
<a href="#l14.4131"></a><span id="l14.4131" class="difflineplus">+fi </span>
<a href="#l14.4132"></a><span id="l14.4132" class="difflineplus">+CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.4133"></a><span id="l14.4133" class="difflineplus">+LDFLAGS=$_SAVE_LDFLAGS</span>
<a href="#l14.4134"></a><span id="l14.4134" class="difflineplus">+LIBS=$_SAVE_LIBS</span>
<a href="#l14.4135"></a><span id="l14.4135" class="difflineplus">+</span>
<a href="#l14.4136"></a><span id="l14.4136" class="difflineplus">+if test -n &quot;${JPEG_DIR}&quot; -a -d &quot;${JPEG_DIR}&quot; -a &quot;$SYSTEM_JPEG&quot; = 1; then</span>
<a href="#l14.4137"></a><span id="l14.4137" class="difflineplus">+    JPEG_CFLAGS=&quot;-I${JPEG_DIR}/include&quot;</span>
<a href="#l14.4138"></a><span id="l14.4138" class="difflineplus">+    JPEG_LIBS=&quot;-L${JPEG_DIR}/lib ${JPEG_LIBS}&quot;</span>
<a href="#l14.4139"></a><span id="l14.4139" class="difflineplus">+fi</span>
<a href="#l14.4140"></a><span id="l14.4140" class="difflineplus">+</span>
<a href="#l14.4141"></a><span id="l14.4141" class="difflineplus">+dnl system ZLIB support</span>
<a href="#l14.4142"></a><span id="l14.4142" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4143"></a><span id="l14.4143" class="difflineplus">+MOZ_ARG_WITH_STRING(system-zlib,</span>
<a href="#l14.4144"></a><span id="l14.4144" class="difflineplus">+[  --with-system-zlib[=PFX]</span>
<a href="#l14.4145"></a><span id="l14.4145" class="difflineplus">+                          Use system libz [installed at prefix PFX]],</span>
<a href="#l14.4146"></a><span id="l14.4146" class="difflineplus">+    ZLIB_DIR=$withval)</span>
<a href="#l14.4147"></a><span id="l14.4147" class="difflineplus">+</span>
<a href="#l14.4148"></a><span id="l14.4148" class="difflineplus">+_SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.4149"></a><span id="l14.4149" class="difflineplus">+_SAVE_LDFLAGS=$LDFLAGS</span>
<a href="#l14.4150"></a><span id="l14.4150" class="difflineplus">+_SAVE_LIBS=$LIBS</span>
<a href="#l14.4151"></a><span id="l14.4151" class="difflineplus">+if test -n &quot;${ZLIB_DIR}&quot; -a &quot;${ZLIB_DIR}&quot; != &quot;yes&quot;; then</span>
<a href="#l14.4152"></a><span id="l14.4152" class="difflineplus">+    CFLAGS=&quot;-I${ZLIB_DIR}/include $CFLAGS&quot;</span>
<a href="#l14.4153"></a><span id="l14.4153" class="difflineplus">+    LDFLAGS=&quot;-L${ZLIB_DIR}/lib $LDFLAGS&quot;</span>
<a href="#l14.4154"></a><span id="l14.4154" class="difflineplus">+fi</span>
<a href="#l14.4155"></a><span id="l14.4155" class="difflineplus">+if test -z &quot;$ZLIB_DIR&quot; -o &quot;$ZLIB_DIR&quot; = no; then</span>
<a href="#l14.4156"></a><span id="l14.4156" class="difflineplus">+    SYSTEM_ZLIB=</span>
<a href="#l14.4157"></a><span id="l14.4157" class="difflineplus">+else</span>
<a href="#l14.4158"></a><span id="l14.4158" class="difflineplus">+    AC_CHECK_LIB(z, gzread, [SYSTEM_ZLIB=1 ZLIB_LIBS=&quot;-lz $ZLIB_LIBS&quot;], </span>
<a href="#l14.4159"></a><span id="l14.4159" class="difflineplus">+	[SYSTEM_ZLIB= ZLIB_CFLAGS= ZLIB_LIBS=], $ZLIB_LIBS)</span>
<a href="#l14.4160"></a><span id="l14.4160" class="difflineplus">+fi</span>
<a href="#l14.4161"></a><span id="l14.4161" class="difflineplus">+if test &quot;$SYSTEM_ZLIB&quot; = 1; then</span>
<a href="#l14.4162"></a><span id="l14.4162" class="difflineplus">+    LIBS=&quot;$ZLIB_LIBS $LIBS&quot;</span>
<a href="#l14.4163"></a><span id="l14.4163" class="difflineplus">+    AC_TRY_COMPILE([ #include &lt;stdio.h&gt;</span>
<a href="#l14.4164"></a><span id="l14.4164" class="difflineplus">+                     #include &lt;string.h&gt;</span>
<a href="#l14.4165"></a><span id="l14.4165" class="difflineplus">+                     #include &lt;zlib.h&gt; ],</span>
<a href="#l14.4166"></a><span id="l14.4166" class="difflineplus">+                   [ #if ZLIB_VERNUM &lt; $MOZZLIB </span>
<a href="#l14.4167"></a><span id="l14.4167" class="difflineplus">+                     #error &quot;Insufficient zlib version ($MOZZLIB required).&quot;</span>
<a href="#l14.4168"></a><span id="l14.4168" class="difflineplus">+                     #endif ],</span>
<a href="#l14.4169"></a><span id="l14.4169" class="difflineplus">+                   SYSTEM_ZLIB=1,</span>
<a href="#l14.4170"></a><span id="l14.4170" class="difflineplus">+                   [SYSTEM_ZLIB= ZLIB_CFLAGS= ZLIB_LIBS=]) </span>
<a href="#l14.4171"></a><span id="l14.4171" class="difflineplus">+fi</span>
<a href="#l14.4172"></a><span id="l14.4172" class="difflineplus">+CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.4173"></a><span id="l14.4173" class="difflineplus">+LDFLAGS=$_SAVE_LDFLAGS</span>
<a href="#l14.4174"></a><span id="l14.4174" class="difflineplus">+LIBS=$_SAVE_LIBS</span>
<a href="#l14.4175"></a><span id="l14.4175" class="difflineplus">+</span>
<a href="#l14.4176"></a><span id="l14.4176" class="difflineplus">+if test &quot;${ZLIB_DIR}&quot; -a -d &quot;${ZLIB_DIR}&quot; -a &quot;$SYSTEM_ZLIB&quot; = 1; then</span>
<a href="#l14.4177"></a><span id="l14.4177" class="difflineplus">+    ZLIB_CFLAGS=&quot;-I${ZLIB_DIR}/include&quot;</span>
<a href="#l14.4178"></a><span id="l14.4178" class="difflineplus">+    ZLIB_LIBS=&quot;-L${ZLIB_DIR}/lib ${ZLIB_LIBS}&quot;</span>
<a href="#l14.4179"></a><span id="l14.4179" class="difflineplus">+fi</span>
<a href="#l14.4180"></a><span id="l14.4180" class="difflineplus">+</span>
<a href="#l14.4181"></a><span id="l14.4181" class="difflineplus">+dnl system BZIP2 Support</span>
<a href="#l14.4182"></a><span id="l14.4182" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4183"></a><span id="l14.4183" class="difflineplus">+MOZ_ARG_WITH_STRING(system-bz2,</span>
<a href="#l14.4184"></a><span id="l14.4184" class="difflineplus">+[  --with-system-bz2[=PFX]</span>
<a href="#l14.4185"></a><span id="l14.4185" class="difflineplus">+                          Use system libbz2 [installed at prefix PFX]],</span>
<a href="#l14.4186"></a><span id="l14.4186" class="difflineplus">+    BZ2_DIR=$withval)</span>
<a href="#l14.4187"></a><span id="l14.4187" class="difflineplus">+</span>
<a href="#l14.4188"></a><span id="l14.4188" class="difflineplus">+_SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.4189"></a><span id="l14.4189" class="difflineplus">+_SAVE_LDFLAGS=$LDFLAGS</span>
<a href="#l14.4190"></a><span id="l14.4190" class="difflineplus">+_SAVE_LIBS=$LIBS</span>
<a href="#l14.4191"></a><span id="l14.4191" class="difflineplus">+if test -n &quot;${BZ2_DIR}&quot; -a &quot;${BZ2_DIR}&quot; != &quot;yes&quot;; then</span>
<a href="#l14.4192"></a><span id="l14.4192" class="difflineplus">+    CFLAGS=&quot;-I${BZ2_DIR}/include $CFLAGS&quot;</span>
<a href="#l14.4193"></a><span id="l14.4193" class="difflineplus">+    LDFLAGS=&quot;-L${BZ2_DIR}/lib $LDFLAGS&quot;</span>
<a href="#l14.4194"></a><span id="l14.4194" class="difflineplus">+fi</span>
<a href="#l14.4195"></a><span id="l14.4195" class="difflineplus">+if test -z &quot;$BZ2_DIR&quot; -o &quot;$BZ2_DIR&quot; = no; then</span>
<a href="#l14.4196"></a><span id="l14.4196" class="difflineplus">+    SYSTEM_BZ2=</span>
<a href="#l14.4197"></a><span id="l14.4197" class="difflineplus">+else</span>
<a href="#l14.4198"></a><span id="l14.4198" class="difflineplus">+    AC_CHECK_LIB(bz2, BZ2_bzread, [SYSTEM_BZ2=1 BZ2_LIBS=&quot;-lbz2&quot;],</span>
<a href="#l14.4199"></a><span id="l14.4199" class="difflineplus">+	[SYSTEM_BZ2= BZ2_CFLAGS= BZ2_LIBS=], $BZ2_LIBS)</span>
<a href="#l14.4200"></a><span id="l14.4200" class="difflineplus">+fi</span>
<a href="#l14.4201"></a><span id="l14.4201" class="difflineplus">+CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.4202"></a><span id="l14.4202" class="difflineplus">+LDFLAGS=$_SAVE_LDFLAGS</span>
<a href="#l14.4203"></a><span id="l14.4203" class="difflineplus">+LIBS=$_SAVE_LIBS</span>
<a href="#l14.4204"></a><span id="l14.4204" class="difflineplus">+</span>
<a href="#l14.4205"></a><span id="l14.4205" class="difflineplus">+if test &quot;${BZ2_DIR}&quot; -a -d &quot;${BZ2_DIR}&quot; -a &quot;$SYSTEM_BZ2&quot; = 1; then</span>
<a href="#l14.4206"></a><span id="l14.4206" class="difflineplus">+    BZ2_CFLAGS=&quot;-I${BZ2_DIR}/include&quot;</span>
<a href="#l14.4207"></a><span id="l14.4207" class="difflineplus">+    BZ2_LIBS=&quot;-L${BZ2_DIR}/lib ${MOZ_BZ2_LIBS}&quot;</span>
<a href="#l14.4208"></a><span id="l14.4208" class="difflineplus">+fi</span>
<a href="#l14.4209"></a><span id="l14.4209" class="difflineplus">+</span>
<a href="#l14.4210"></a><span id="l14.4210" class="difflineplus">+dnl system PNG Support</span>
<a href="#l14.4211"></a><span id="l14.4211" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4212"></a><span id="l14.4212" class="difflineplus">+MOZ_ARG_WITH_STRING(system-png, </span>
<a href="#l14.4213"></a><span id="l14.4213" class="difflineplus">+[  --with-system-png[=PFX]</span>
<a href="#l14.4214"></a><span id="l14.4214" class="difflineplus">+                          Use system libpng [installed at prefix PFX]],</span>
<a href="#l14.4215"></a><span id="l14.4215" class="difflineplus">+    PNG_DIR=$withval)</span>
<a href="#l14.4216"></a><span id="l14.4216" class="difflineplus">+</span>
<a href="#l14.4217"></a><span id="l14.4217" class="difflineplus">+_SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.4218"></a><span id="l14.4218" class="difflineplus">+_SAVE_LDFLAGS=$LDFLAGS</span>
<a href="#l14.4219"></a><span id="l14.4219" class="difflineplus">+_SAVE_LIBS=$LIBS</span>
<a href="#l14.4220"></a><span id="l14.4220" class="difflineplus">+CFLAGS=&quot;$ZLIB_CFLAGS $CFLAGS&quot;</span>
<a href="#l14.4221"></a><span id="l14.4221" class="difflineplus">+LDFLAGS=&quot;$ZLIB_LIBS -lz $LDFLAGS&quot;</span>
<a href="#l14.4222"></a><span id="l14.4222" class="difflineplus">+if test -n &quot;${PNG_DIR}&quot; -a &quot;${PNG_DIR}&quot; != &quot;yes&quot;; then</span>
<a href="#l14.4223"></a><span id="l14.4223" class="difflineplus">+    CFLAGS=&quot;-I${PNG_DIR}/include $CFLAGS&quot;</span>
<a href="#l14.4224"></a><span id="l14.4224" class="difflineplus">+    LDFLAGS=&quot;-L${PNG_DIR}/lib $LDFLAGS&quot;</span>
<a href="#l14.4225"></a><span id="l14.4225" class="difflineplus">+fi</span>
<a href="#l14.4226"></a><span id="l14.4226" class="difflineplus">+if test -z &quot;$PNG_DIR&quot; -o &quot;$PNG_DIR&quot; = no; then</span>
<a href="#l14.4227"></a><span id="l14.4227" class="difflineplus">+    SYSTEM_PNG=</span>
<a href="#l14.4228"></a><span id="l14.4228" class="difflineplus">+else</span>
<a href="#l14.4229"></a><span id="l14.4229" class="difflineplus">+    _SAVE_PNG_LIBS=$PNG_LIBS</span>
<a href="#l14.4230"></a><span id="l14.4230" class="difflineplus">+    AC_CHECK_LIB(png, png_get_valid, [SYSTEM_PNG=1 PNG_LIBS=&quot;-lpng $PNG_LIBS&quot;],</span>
<a href="#l14.4231"></a><span id="l14.4231" class="difflineplus">+                 AC_MSG_ERROR([--with-system-png requested but no working libpng found]), </span>
<a href="#l14.4232"></a><span id="l14.4232" class="difflineplus">+                 $PNG_LIBS)</span>
<a href="#l14.4233"></a><span id="l14.4233" class="difflineplus">+    AC_CHECK_LIB(png, png_get_acTL, ,</span>
<a href="#l14.4234"></a><span id="l14.4234" class="difflineplus">+                 AC_MSG_ERROR([--with-system-png won't work because the system's libpng doesn't have APNG support]),</span>
<a href="#l14.4235"></a><span id="l14.4235" class="difflineplus">+                 $_SAVE_PNG_LIBS)</span>
<a href="#l14.4236"></a><span id="l14.4236" class="difflineplus">+fi</span>
<a href="#l14.4237"></a><span id="l14.4237" class="difflineplus">+if test &quot;$SYSTEM_PNG&quot; = 1; then</span>
<a href="#l14.4238"></a><span id="l14.4238" class="difflineplus">+    LIBS=&quot;$PNG_LIBS $LIBS&quot;</span>
<a href="#l14.4239"></a><span id="l14.4239" class="difflineplus">+    AC_TRY_COMPILE([ #include &lt;stdio.h&gt;</span>
<a href="#l14.4240"></a><span id="l14.4240" class="difflineplus">+                     #include &lt;sys/types.h&gt;</span>
<a href="#l14.4241"></a><span id="l14.4241" class="difflineplus">+                     #include &lt;png.h&gt; ],</span>
<a href="#l14.4242"></a><span id="l14.4242" class="difflineplus">+                   [ #if PNG_LIBPNG_VER &lt; $MOZPNG</span>
<a href="#l14.4243"></a><span id="l14.4243" class="difflineplus">+                     #error &quot;Insufficient libpng version ($MOZPNG required).&quot;</span>
<a href="#l14.4244"></a><span id="l14.4244" class="difflineplus">+                     #endif</span>
<a href="#l14.4245"></a><span id="l14.4245" class="difflineplus">+                     #ifndef PNG_UINT_31_MAX</span>
<a href="#l14.4246"></a><span id="l14.4246" class="difflineplus">+                     #error &quot;Insufficient libpng version.&quot;</span>
<a href="#l14.4247"></a><span id="l14.4247" class="difflineplus">+                     #endif ],</span>
<a href="#l14.4248"></a><span id="l14.4248" class="difflineplus">+                   SYSTEM_PNG=1,</span>
<a href="#l14.4249"></a><span id="l14.4249" class="difflineplus">+                   AC_MSG_ERROR([--with-system-png requested but no working libpng found]))</span>
<a href="#l14.4250"></a><span id="l14.4250" class="difflineplus">+fi</span>
<a href="#l14.4251"></a><span id="l14.4251" class="difflineplus">+CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.4252"></a><span id="l14.4252" class="difflineplus">+LDFLAGS=$_SAVE_LDFLAGS</span>
<a href="#l14.4253"></a><span id="l14.4253" class="difflineplus">+LIBS=$_SAVE_LIBS</span>
<a href="#l14.4254"></a><span id="l14.4254" class="difflineplus">+</span>
<a href="#l14.4255"></a><span id="l14.4255" class="difflineplus">+if test &quot;${PNG_DIR}&quot; -a -d &quot;${PNG_DIR}&quot; -a &quot;$SYSTEM_PNG&quot; = 1; then</span>
<a href="#l14.4256"></a><span id="l14.4256" class="difflineplus">+    PNG_CFLAGS=&quot;-I${PNG_DIR}/include&quot;</span>
<a href="#l14.4257"></a><span id="l14.4257" class="difflineplus">+    PNG_LIBS=&quot;-L${PNG_DIR}/lib ${PNG_LIBS}&quot;</span>
<a href="#l14.4258"></a><span id="l14.4258" class="difflineplus">+fi</span>
<a href="#l14.4259"></a><span id="l14.4259" class="difflineplus">+</span>
<a href="#l14.4260"></a><span id="l14.4260" class="difflineplus">+fi # SKIP_LIBRARY_CHECKS</span>
<a href="#l14.4261"></a><span id="l14.4261" class="difflineplus">+</span>
<a href="#l14.4262"></a><span id="l14.4262" class="difflineplus">+dnl system HunSpell Support</span>
<a href="#l14.4263"></a><span id="l14.4263" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4264"></a><span id="l14.4264" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(system-hunspell,</span>
<a href="#l14.4265"></a><span id="l14.4265" class="difflineplus">+[  --enable-system-hunspell  Use system hunspell (located with pkgconfig)],</span>
<a href="#l14.4266"></a><span id="l14.4266" class="difflineplus">+    SYSTEM_HUNSPELL=1 )</span>
<a href="#l14.4267"></a><span id="l14.4267" class="difflineplus">+</span>
<a href="#l14.4268"></a><span id="l14.4268" class="difflineplus">+if test -n &quot;$SYSTEM_HUNSPELL&quot;; then</span>
<a href="#l14.4269"></a><span id="l14.4269" class="difflineplus">+    PKG_CHECK_MODULES(MOZ_HUNSPELL, hunspell)</span>
<a href="#l14.4270"></a><span id="l14.4270" class="difflineplus">+fi</span>
<a href="#l14.4271"></a><span id="l14.4271" class="difflineplus">+</span>
<a href="#l14.4272"></a><span id="l14.4272" class="difflineplus">+AC_SUBST(SYSTEM_HUNSPELL)</span>
<a href="#l14.4273"></a><span id="l14.4273" class="difflineplus">+</span>
<a href="#l14.4274"></a><span id="l14.4274" class="difflineplus">+dnl check whether to enable glitz</span>
<a href="#l14.4275"></a><span id="l14.4275" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4276"></a><span id="l14.4276" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(glitz,</span>
<a href="#l14.4277"></a><span id="l14.4277" class="difflineplus">+[  --enable-glitz          Enable Glitz for use with Cairo],</span>
<a href="#l14.4278"></a><span id="l14.4278" class="difflineplus">+    MOZ_ENABLE_GLITZ=1,</span>
<a href="#l14.4279"></a><span id="l14.4279" class="difflineplus">+    MOZ_ENABLE_GLITZ= )</span>
<a href="#l14.4280"></a><span id="l14.4280" class="difflineplus">+if test &quot;$MOZ_ENABLE_GLITZ&quot;; then</span>
<a href="#l14.4281"></a><span id="l14.4281" class="difflineplus">+    AC_DEFINE(MOZ_ENABLE_GLITZ)</span>
<a href="#l14.4282"></a><span id="l14.4282" class="difflineplus">+fi</span>
<a href="#l14.4283"></a><span id="l14.4283" class="difflineplus">+</span>
<a href="#l14.4284"></a><span id="l14.4284" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4285"></a><span id="l14.4285" class="difflineplus">+dnl Java SDK support</span>
<a href="#l14.4286"></a><span id="l14.4286" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4287"></a><span id="l14.4287" class="difflineplus">+JAVA_INCLUDE_PATH=</span>
<a href="#l14.4288"></a><span id="l14.4288" class="difflineplus">+MOZ_ARG_WITH_STRING(java-include-path,</span>
<a href="#l14.4289"></a><span id="l14.4289" class="difflineplus">+[  --with-java-include-path=dir   Location of Java SDK headers],</span>
<a href="#l14.4290"></a><span id="l14.4290" class="difflineplus">+    JAVA_INCLUDE_PATH=$withval)</span>
<a href="#l14.4291"></a><span id="l14.4291" class="difflineplus">+</span>
<a href="#l14.4292"></a><span id="l14.4292" class="difflineplus">+JAVA_BIN_PATH=</span>
<a href="#l14.4293"></a><span id="l14.4293" class="difflineplus">+MOZ_ARG_WITH_STRING(java-bin-path,</span>
<a href="#l14.4294"></a><span id="l14.4294" class="difflineplus">+[  --with-java-bin-path=dir   Location of Java binaries (java, javac, jar)],</span>
<a href="#l14.4295"></a><span id="l14.4295" class="difflineplus">+    JAVA_BIN_PATH=$withval)</span>
<a href="#l14.4296"></a><span id="l14.4296" class="difflineplus">+</span>
<a href="#l14.4297"></a><span id="l14.4297" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4298"></a><span id="l14.4298" class="difflineplus">+dnl Use ARM userspace kernel helpers; tell NSPR to enable</span>
<a href="#l14.4299"></a><span id="l14.4299" class="difflineplus">+dnl their usage and use them in spidermonkey.</span>
<a href="#l14.4300"></a><span id="l14.4300" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4301"></a><span id="l14.4301" class="difflineplus">+MOZ_ARG_WITH_BOOL(arm-kuser,</span>
<a href="#l14.4302"></a><span id="l14.4302" class="difflineplus">+[  --with-arm-kuser         Use kuser helpers (Linux/ARM only -- requires kernel 2.6.13 or later)],</span>
<a href="#l14.4303"></a><span id="l14.4303" class="difflineplus">+    USE_ARM_KUSER=1,</span>
<a href="#l14.4304"></a><span id="l14.4304" class="difflineplus">+    USE_ARM_KUSER=)</span>
<a href="#l14.4305"></a><span id="l14.4305" class="difflineplus">+if test -n &quot;$USE_ARM_KUSER&quot;; then</span>
<a href="#l14.4306"></a><span id="l14.4306" class="difflineplus">+   AC_DEFINE(USE_ARM_KUSER)</span>
<a href="#l14.4307"></a><span id="l14.4307" class="difflineplus">+fi</span>
<a href="#l14.4308"></a><span id="l14.4308" class="difflineplus">+</span>
<a href="#l14.4309"></a><span id="l14.4309" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4310"></a><span id="l14.4310" class="difflineplus">+dnl =</span>
<a href="#l14.4311"></a><span id="l14.4311" class="difflineplus">+dnl = Application</span>
<a href="#l14.4312"></a><span id="l14.4312" class="difflineplus">+dnl =</span>
<a href="#l14.4313"></a><span id="l14.4313" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4314"></a><span id="l14.4314" class="difflineplus">+</span>
<a href="#l14.4315"></a><span id="l14.4315" class="difflineplus">+MOZ_ARG_HEADER(Application)</span>
<a href="#l14.4316"></a><span id="l14.4316" class="difflineplus">+</span>
<a href="#l14.4317"></a><span id="l14.4317" class="difflineplus">+BUILD_STATIC_LIBS=</span>
<a href="#l14.4318"></a><span id="l14.4318" class="difflineplus">+ENABLE_TESTS=1</span>
<a href="#l14.4319"></a><span id="l14.4319" class="difflineplus">+MOZ_ACTIVEX_SCRIPTING_SUPPORT=</span>
<a href="#l14.4320"></a><span id="l14.4320" class="difflineplus">+MOZ_BRANDING_DIRECTORY=</span>
<a href="#l14.4321"></a><span id="l14.4321" class="difflineplus">+MOZ_CALENDAR=</span>
<a href="#l14.4322"></a><span id="l14.4322" class="difflineplus">+MOZ_DBGRINFO_MODULES=</span>
<a href="#l14.4323"></a><span id="l14.4323" class="difflineplus">+MOZ_ENABLE_CANVAS=1</span>
<a href="#l14.4324"></a><span id="l14.4324" class="difflineplus">+MOZ_EXTENSIONS_ALL=&quot; wallet p3p venkman inspector irc typeaheadfind gnomevfs sroaming datetime finger cview layout-debug tasks sql xforms schema-validation reporter&quot;</span>
<a href="#l14.4325"></a><span id="l14.4325" class="difflineplus">+MOZ_FEEDS=1</span>
<a href="#l14.4326"></a><span id="l14.4326" class="difflineplus">+MOZ_IMG_DECODERS_DEFAULT=&quot;png gif jpeg bmp xbm icon&quot;</span>
<a href="#l14.4327"></a><span id="l14.4327" class="difflineplus">+MOZ_IMG_ENCODERS_DEFAULT=&quot;png jpeg&quot;</span>
<a href="#l14.4328"></a><span id="l14.4328" class="difflineplus">+MOZ_IPCD=</span>
<a href="#l14.4329"></a><span id="l14.4329" class="difflineplus">+MOZ_JAVAXPCOM=</span>
<a href="#l14.4330"></a><span id="l14.4330" class="difflineplus">+MOZ_JSDEBUGGER=1</span>
<a href="#l14.4331"></a><span id="l14.4331" class="difflineplus">+MOZ_JSLOADER=1</span>
<a href="#l14.4332"></a><span id="l14.4332" class="difflineplus">+MOZ_LDAP_XPCOM=</span>
<a href="#l14.4333"></a><span id="l14.4333" class="difflineplus">+MOZ_LIBART_CFLAGS=</span>
<a href="#l14.4334"></a><span id="l14.4334" class="difflineplus">+MOZ_LIBART_LIBS=</span>
<a href="#l14.4335"></a><span id="l14.4335" class="difflineplus">+MOZ_MAIL_NEWS=</span>
<a href="#l14.4336"></a><span id="l14.4336" class="difflineplus">+MOZ_MATHML=1</span>
<a href="#l14.4337"></a><span id="l14.4337" class="difflineplus">+MOZ_MOCHITEST=1</span>
<a href="#l14.4338"></a><span id="l14.4338" class="difflineplus">+MOZ_MORK=1</span>
<a href="#l14.4339"></a><span id="l14.4339" class="difflineplus">+MOZ_MORKREADER=</span>
<a href="#l14.4340"></a><span id="l14.4340" class="difflineplus">+MOZ_AUTH_EXTENSION=1</span>
<a href="#l14.4341"></a><span id="l14.4341" class="difflineplus">+MOZ_NO_ACTIVEX_SUPPORT=1</span>
<a href="#l14.4342"></a><span id="l14.4342" class="difflineplus">+MOZ_NO_INSPECTOR_APIS=</span>
<a href="#l14.4343"></a><span id="l14.4343" class="difflineplus">+MOZ_NO_XPCOM_OBSOLETE=</span>
<a href="#l14.4344"></a><span id="l14.4344" class="difflineplus">+MOZ_NO_FAST_LOAD=</span>
<a href="#l14.4345"></a><span id="l14.4345" class="difflineplus">+MOZ_OJI=</span>
<a href="#l14.4346"></a><span id="l14.4346" class="difflineplus">+MOZ_PERMISSIONS=1</span>
<a href="#l14.4347"></a><span id="l14.4347" class="difflineplus">+MOZ_PLACES=</span>
<a href="#l14.4348"></a><span id="l14.4348" class="difflineplus">+MOZ_PLAINTEXT_EDITOR_ONLY=</span>
<a href="#l14.4349"></a><span id="l14.4349" class="difflineplus">+MOZ_PLUGINS=1</span>
<a href="#l14.4350"></a><span id="l14.4350" class="difflineplus">+MOZ_PREF_EXTENSIONS=1</span>
<a href="#l14.4351"></a><span id="l14.4351" class="difflineplus">+MOZ_PROFILELOCKING=1</span>
<a href="#l14.4352"></a><span id="l14.4352" class="difflineplus">+MOZ_PROFILESHARING=1</span>
<a href="#l14.4353"></a><span id="l14.4353" class="difflineplus">+MOZ_PSM=1</span>
<a href="#l14.4354"></a><span id="l14.4354" class="difflineplus">+MOZ_PYTHON_EXTENSIONS=&quot;xpcom dom&quot;</span>
<a href="#l14.4355"></a><span id="l14.4355" class="difflineplus">+MOZ_PYTHON=</span>
<a href="#l14.4356"></a><span id="l14.4356" class="difflineplus">+MOZ_PYTHON_DEBUG_SUFFIX=</span>
<a href="#l14.4357"></a><span id="l14.4357" class="difflineplus">+MOZ_PYTHON_DLL_SUFFIX=</span>
<a href="#l14.4358"></a><span id="l14.4358" class="difflineplus">+MOZ_PYTHON_INCLUDES=</span>
<a href="#l14.4359"></a><span id="l14.4359" class="difflineplus">+MOZ_PYTHON_LIBS=</span>
<a href="#l14.4360"></a><span id="l14.4360" class="difflineplus">+MOZ_PYTHON_PREFIX=</span>
<a href="#l14.4361"></a><span id="l14.4361" class="difflineplus">+MOZ_PYTHON_VER=</span>
<a href="#l14.4362"></a><span id="l14.4362" class="difflineplus">+MOZ_PYTHON_VER_DOTTED=</span>
<a href="#l14.4363"></a><span id="l14.4363" class="difflineplus">+MOZ_RDF=1</span>
<a href="#l14.4364"></a><span id="l14.4364" class="difflineplus">+MOZ_REFLOW_PERF=</span>
<a href="#l14.4365"></a><span id="l14.4365" class="difflineplus">+MOZ_SAFE_BROWSING=</span>
<a href="#l14.4366"></a><span id="l14.4366" class="difflineplus">+MOZ_HELP_VIEWER=</span>
<a href="#l14.4367"></a><span id="l14.4367" class="difflineplus">+MOZ_SPELLCHECK=1</span>
<a href="#l14.4368"></a><span id="l14.4368" class="difflineplus">+MOZ_STATIC_MAIL_BUILD=</span>
<a href="#l14.4369"></a><span id="l14.4369" class="difflineplus">+MOZ_STORAGE=1</span>
<a href="#l14.4370"></a><span id="l14.4370" class="difflineplus">+MOZ_SVG=1</span>
<a href="#l14.4371"></a><span id="l14.4371" class="difflineplus">+MOZ_TIMELINE=</span>
<a href="#l14.4372"></a><span id="l14.4372" class="difflineplus">+MOZ_UI_LOCALE=en-US</span>
<a href="#l14.4373"></a><span id="l14.4373" class="difflineplus">+MOZ_UNIVERSALCHARDET=1</span>
<a href="#l14.4374"></a><span id="l14.4374" class="difflineplus">+MOZ_URL_CLASSIFIER=</span>
<a href="#l14.4375"></a><span id="l14.4375" class="difflineplus">+MOZ_USE_NATIVE_UCONV=</span>
<a href="#l14.4376"></a><span id="l14.4376" class="difflineplus">+MOZ_V1_STRING_ABI=</span>
<a href="#l14.4377"></a><span id="l14.4377" class="difflineplus">+MOZ_VIEW_SOURCE=1</span>
<a href="#l14.4378"></a><span id="l14.4378" class="difflineplus">+MOZ_XPFE_COMPONENTS=1</span>
<a href="#l14.4379"></a><span id="l14.4379" class="difflineplus">+MOZ_XPINSTALL=1</span>
<a href="#l14.4380"></a><span id="l14.4380" class="difflineplus">+MOZ_XSLT_STANDALONE=</span>
<a href="#l14.4381"></a><span id="l14.4381" class="difflineplus">+MOZ_XTF=1</span>
<a href="#l14.4382"></a><span id="l14.4382" class="difflineplus">+MOZ_XUL=1</span>
<a href="#l14.4383"></a><span id="l14.4383" class="difflineplus">+MOZ_XUL_APP=1</span>
<a href="#l14.4384"></a><span id="l14.4384" class="difflineplus">+MOZ_ZIPWRITER=1</span>
<a href="#l14.4385"></a><span id="l14.4385" class="difflineplus">+NS_PRINTING=1</span>
<a href="#l14.4386"></a><span id="l14.4386" class="difflineplus">+SUNCTL=</span>
<a href="#l14.4387"></a><span id="l14.4387" class="difflineplus">+JS_STATIC_BUILD=</span>
<a href="#l14.4388"></a><span id="l14.4388" class="difflineplus">+XPC_IDISPATCH_SUPPORT=</span>
<a href="#l14.4389"></a><span id="l14.4389" class="difflineplus">+</span>
<a href="#l14.4390"></a><span id="l14.4390" class="difflineplus">+</span>
<a href="#l14.4391"></a><span id="l14.4391" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.4392"></a><span id="l14.4392" class="difflineplus">+darwin*)</span>
<a href="#l14.4393"></a><span id="l14.4393" class="difflineplus">+    ACCESSIBILITY=</span>
<a href="#l14.4394"></a><span id="l14.4394" class="difflineplus">+    ;;</span>
<a href="#l14.4395"></a><span id="l14.4395" class="difflineplus">+*)</span>
<a href="#l14.4396"></a><span id="l14.4396" class="difflineplus">+    ACCESSIBILITY=1</span>
<a href="#l14.4397"></a><span id="l14.4397" class="difflineplus">+    ;;</span>
<a href="#l14.4398"></a><span id="l14.4398" class="difflineplus">+esac</span>
<a href="#l14.4399"></a><span id="l14.4399" class="difflineplus">+</span>
<a href="#l14.4400"></a><span id="l14.4400" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.4401"></a><span id="l14.4401" class="difflineplus">+    msvc*|mks*|cygwin*|mingw*)</span>
<a href="#l14.4402"></a><span id="l14.4402" class="difflineplus">+        if test -z &quot;$GNU_CC&quot;; then </span>
<a href="#l14.4403"></a><span id="l14.4403" class="difflineplus">+            XPC_IDISPATCH_SUPPORT=1</span>
<a href="#l14.4404"></a><span id="l14.4404" class="difflineplus">+            MOZ_NO_ACTIVEX_SUPPORT=</span>
<a href="#l14.4405"></a><span id="l14.4405" class="difflineplus">+            MOZ_ACTIVEX_SCRIPTING_SUPPORT=1</span>
<a href="#l14.4406"></a><span id="l14.4406" class="difflineplus">+        fi</span>
<a href="#l14.4407"></a><span id="l14.4407" class="difflineplus">+        ;;</span>
<a href="#l14.4408"></a><span id="l14.4408" class="difflineplus">+esac</span>
<a href="#l14.4409"></a><span id="l14.4409" class="difflineplus">+</span>
<a href="#l14.4410"></a><span id="l14.4410" class="difflineplus">+MOZ_ARG_ENABLE_STRING(application,</span>
<a href="#l14.4411"></a><span id="l14.4411" class="difflineplus">+[  --enable-application=APP</span>
<a href="#l14.4412"></a><span id="l14.4412" class="difflineplus">+                          Options include:</span>
<a href="#l14.4413"></a><span id="l14.4413" class="difflineplus">+                            suite (SeaMonkey)</span>
<a href="#l14.4414"></a><span id="l14.4414" class="difflineplus">+                            mail (Thunderbird)</span>
<a href="#l14.4415"></a><span id="l14.4415" class="difflineplus">+                            calendar (Sunbird)],</span>
<a href="#l14.4416"></a><span id="l14.4416" class="difflineplus">+[ MOZ_BUILD_APP=$enableval ] )</span>
<a href="#l14.4417"></a><span id="l14.4417" class="difflineplus">+</span>
<a href="#l14.4418"></a><span id="l14.4418" class="difflineplus">+MOZ_EMBEDDING_PROFILE=default</span>
<a href="#l14.4419"></a><span id="l14.4419" class="difflineplus">+MOZ_ARG_WITH_STRING(embedding-profile,</span>
<a href="#l14.4420"></a><span id="l14.4420" class="difflineplus">+[  --with-embedding-profile=default|basic|minimal</span>
<a href="#l14.4421"></a><span id="l14.4421" class="difflineplus">+                       see http://wiki.mozilla.org/Gecko:Small_Device_Support],</span>
<a href="#l14.4422"></a><span id="l14.4422" class="difflineplus">+[ MOZ_EMBEDDING_PROFILE=$withval ])</span>
<a href="#l14.4423"></a><span id="l14.4423" class="difflineplus">+</span>
<a href="#l14.4424"></a><span id="l14.4424" class="difflineplus">+case &quot;$MOZ_EMBEDDING_PROFILE&quot; in</span>
<a href="#l14.4425"></a><span id="l14.4425" class="difflineplus">+default)</span>
<a href="#l14.4426"></a><span id="l14.4426" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_DEFAULT=1</span>
<a href="#l14.4427"></a><span id="l14.4427" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_BASIC=1</span>
<a href="#l14.4428"></a><span id="l14.4428" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_MINIMAL=1</span>
<a href="#l14.4429"></a><span id="l14.4429" class="difflineplus">+  AC_DEFINE(MOZ_EMBEDDING_LEVEL_DEFAULT)</span>
<a href="#l14.4430"></a><span id="l14.4430" class="difflineplus">+  AC_DEFINE(MOZ_EMBEDDING_LEVEL_BASIC)</span>
<a href="#l14.4431"></a><span id="l14.4431" class="difflineplus">+  AC_DEFINE(MOZ_EMBEDDING_LEVEL_MINIMAL)</span>
<a href="#l14.4432"></a><span id="l14.4432" class="difflineplus">+  ;;</span>
<a href="#l14.4433"></a><span id="l14.4433" class="difflineplus">+</span>
<a href="#l14.4434"></a><span id="l14.4434" class="difflineplus">+basic)</span>
<a href="#l14.4435"></a><span id="l14.4435" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_DEFAULT=</span>
<a href="#l14.4436"></a><span id="l14.4436" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_BASIC=1</span>
<a href="#l14.4437"></a><span id="l14.4437" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_MINIMAL=1</span>
<a href="#l14.4438"></a><span id="l14.4438" class="difflineplus">+  AC_DEFINE(MOZ_EMBEDDING_LEVEL_BASIC)</span>
<a href="#l14.4439"></a><span id="l14.4439" class="difflineplus">+  AC_DEFINE(MOZ_EMBEDDING_LEVEL_MINIMAL)</span>
<a href="#l14.4440"></a><span id="l14.4440" class="difflineplus">+  ENABLE_TESTS=</span>
<a href="#l14.4441"></a><span id="l14.4441" class="difflineplus">+  MOZ_ACTIVEX_SCRIPTING_SUPPORT=</span>
<a href="#l14.4442"></a><span id="l14.4442" class="difflineplus">+  MOZ_COMPOSER=</span>
<a href="#l14.4443"></a><span id="l14.4443" class="difflineplus">+  MOZ_ENABLE_CANVAS=</span>
<a href="#l14.4444"></a><span id="l14.4444" class="difflineplus">+  MOZ_ENABLE_POSTSCRIPT=</span>
<a href="#l14.4445"></a><span id="l14.4445" class="difflineplus">+  MOZ_EXTENSIONS_DEFAULT=&quot; spatialnavigation&quot;</span>
<a href="#l14.4446"></a><span id="l14.4446" class="difflineplus">+  MOZ_IMG_DECODERS_DEFAULT=&quot;png gif jpeg&quot;</span>
<a href="#l14.4447"></a><span id="l14.4447" class="difflineplus">+  MOZ_IMG_ENCODERS_DEFAULT=</span>
<a href="#l14.4448"></a><span id="l14.4448" class="difflineplus">+  MOZ_IMG_ENCODERS=</span>
<a href="#l14.4449"></a><span id="l14.4449" class="difflineplus">+  MOZ_INSTALLER=</span>
<a href="#l14.4450"></a><span id="l14.4450" class="difflineplus">+  MOZ_JSDEBUGGER=</span>
<a href="#l14.4451"></a><span id="l14.4451" class="difflineplus">+  MOZ_LDAP_XPCOM=</span>
<a href="#l14.4452"></a><span id="l14.4452" class="difflineplus">+  MOZ_MAIL_NEWS=</span>
<a href="#l14.4453"></a><span id="l14.4453" class="difflineplus">+  MOZ_MATHML=</span>
<a href="#l14.4454"></a><span id="l14.4454" class="difflineplus">+  MOZ_AUTH_EXTENSION=</span>
<a href="#l14.4455"></a><span id="l14.4455" class="difflineplus">+  MOZ_NO_ACTIVEX_SUPPORT=1</span>
<a href="#l14.4456"></a><span id="l14.4456" class="difflineplus">+  MOZ_NO_INSPECTOR_APIS=1</span>
<a href="#l14.4457"></a><span id="l14.4457" class="difflineplus">+  MOZ_NO_XPCOM_OBSOLETE=1</span>
<a href="#l14.4458"></a><span id="l14.4458" class="difflineplus">+  MOZ_NO_FAST_LOAD=1</span>
<a href="#l14.4459"></a><span id="l14.4459" class="difflineplus">+  MOZ_OJI=</span>
<a href="#l14.4460"></a><span id="l14.4460" class="difflineplus">+  MOZ_PLAINTEXT_EDITOR_ONLY=1</span>
<a href="#l14.4461"></a><span id="l14.4461" class="difflineplus">+#  MOZ_PLUGINS=</span>
<a href="#l14.4462"></a><span id="l14.4462" class="difflineplus">+  MOZ_PREF_EXTENSIONS=</span>
<a href="#l14.4463"></a><span id="l14.4463" class="difflineplus">+  MOZ_PROFILELOCKING=</span>
<a href="#l14.4464"></a><span id="l14.4464" class="difflineplus">+  MOZ_PROFILESHARING=</span>
<a href="#l14.4465"></a><span id="l14.4465" class="difflineplus">+  MOZ_SPELLCHECK=</span>
<a href="#l14.4466"></a><span id="l14.4466" class="difflineplus">+  MOZ_SVG=</span>
<a href="#l14.4467"></a><span id="l14.4467" class="difflineplus">+  MOZ_UNIVERSALCHARDET=</span>
<a href="#l14.4468"></a><span id="l14.4468" class="difflineplus">+  MOZ_UPDATER=</span>
<a href="#l14.4469"></a><span id="l14.4469" class="difflineplus">+  MOZ_USE_NATIVE_UCONV=</span>
<a href="#l14.4470"></a><span id="l14.4470" class="difflineplus">+  MOZ_VIEW_SOURCE=</span>
<a href="#l14.4471"></a><span id="l14.4471" class="difflineplus">+  MOZ_XPFE_COMPONENTS=</span>
<a href="#l14.4472"></a><span id="l14.4472" class="difflineplus">+  MOZ_XPINSTALL=</span>
<a href="#l14.4473"></a><span id="l14.4473" class="difflineplus">+  MOZ_XTF=</span>
<a href="#l14.4474"></a><span id="l14.4474" class="difflineplus">+  MOZ_ZIPWRITER=</span>
<a href="#l14.4475"></a><span id="l14.4475" class="difflineplus">+  NECKO_DISK_CACHE=</span>
<a href="#l14.4476"></a><span id="l14.4476" class="difflineplus">+  NECKO_PROTOCOLS_DEFAULT=&quot;about data http file res&quot;</span>
<a href="#l14.4477"></a><span id="l14.4477" class="difflineplus">+  NECKO_SMALL_BUFFERS=1</span>
<a href="#l14.4478"></a><span id="l14.4478" class="difflineplus">+  NS_DISABLE_LOGGING=1</span>
<a href="#l14.4479"></a><span id="l14.4479" class="difflineplus">+  NS_PRINTING=</span>
<a href="#l14.4480"></a><span id="l14.4480" class="difflineplus">+  JS_STATIC_BUILD=1</span>
<a href="#l14.4481"></a><span id="l14.4481" class="difflineplus">+  ;;</span>
<a href="#l14.4482"></a><span id="l14.4482" class="difflineplus">+</span>
<a href="#l14.4483"></a><span id="l14.4483" class="difflineplus">+minimal)</span>
<a href="#l14.4484"></a><span id="l14.4484" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_DEFAULT=</span>
<a href="#l14.4485"></a><span id="l14.4485" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_BASIC=</span>
<a href="#l14.4486"></a><span id="l14.4486" class="difflineplus">+  MOZ_EMBEDDING_LEVEL_MINIMAL=1</span>
<a href="#l14.4487"></a><span id="l14.4487" class="difflineplus">+  AC_DEFINE(MOZ_EMBEDDING_LEVEL_MINIMAL)</span>
<a href="#l14.4488"></a><span id="l14.4488" class="difflineplus">+  ENABLE_TESTS=</span>
<a href="#l14.4489"></a><span id="l14.4489" class="difflineplus">+  MOZ_ACTIVEX_SCRIPTING_SUPPORT=</span>
<a href="#l14.4490"></a><span id="l14.4490" class="difflineplus">+  MOZ_COMPOSER=</span>
<a href="#l14.4491"></a><span id="l14.4491" class="difflineplus">+  MOZ_ENABLE_CANVAS=</span>
<a href="#l14.4492"></a><span id="l14.4492" class="difflineplus">+  MOZ_ENABLE_POSTSCRIPT=</span>
<a href="#l14.4493"></a><span id="l14.4493" class="difflineplus">+  MOZ_EXTENSIONS_DEFAULT=&quot; spatialnavigation&quot;</span>
<a href="#l14.4494"></a><span id="l14.4494" class="difflineplus">+  MOZ_IMG_DECODERS_DEFAULT=&quot;png gif jpeg&quot;</span>
<a href="#l14.4495"></a><span id="l14.4495" class="difflineplus">+  MOZ_IMG_ENCODERS_DEFAULT=</span>
<a href="#l14.4496"></a><span id="l14.4496" class="difflineplus">+  MOZ_IMG_ENCODERS=</span>
<a href="#l14.4497"></a><span id="l14.4497" class="difflineplus">+  MOZ_INSTALLER=</span>
<a href="#l14.4498"></a><span id="l14.4498" class="difflineplus">+  MOZ_JSDEBUGGER=</span>
<a href="#l14.4499"></a><span id="l14.4499" class="difflineplus">+  MOZ_LDAP_XPCOM=</span>
<a href="#l14.4500"></a><span id="l14.4500" class="difflineplus">+  MOZ_MAIL_NEWS=</span>
<a href="#l14.4501"></a><span id="l14.4501" class="difflineplus">+  MOZ_MATHML=</span>
<a href="#l14.4502"></a><span id="l14.4502" class="difflineplus">+  MOZ_AUTH_EXTENSION=</span>
<a href="#l14.4503"></a><span id="l14.4503" class="difflineplus">+  MOZ_NO_ACTIVEX_SUPPORT=1</span>
<a href="#l14.4504"></a><span id="l14.4504" class="difflineplus">+  MOZ_NO_INSPECTOR_APIS=1</span>
<a href="#l14.4505"></a><span id="l14.4505" class="difflineplus">+  MOZ_NO_XPCOM_OBSOLETE=1</span>
<a href="#l14.4506"></a><span id="l14.4506" class="difflineplus">+  MOZ_NO_FAST_LOAD=1</span>
<a href="#l14.4507"></a><span id="l14.4507" class="difflineplus">+  MOZ_OJI=</span>
<a href="#l14.4508"></a><span id="l14.4508" class="difflineplus">+  MOZ_PLAINTEXT_EDITOR_ONLY=1</span>
<a href="#l14.4509"></a><span id="l14.4509" class="difflineplus">+  MOZ_PLUGINS=</span>
<a href="#l14.4510"></a><span id="l14.4510" class="difflineplus">+  MOZ_PREF_EXTENSIONS=</span>
<a href="#l14.4511"></a><span id="l14.4511" class="difflineplus">+  MOZ_PROFILELOCKING=</span>
<a href="#l14.4512"></a><span id="l14.4512" class="difflineplus">+  MOZ_PROFILESHARING=</span>
<a href="#l14.4513"></a><span id="l14.4513" class="difflineplus">+  MOZ_SPELLCHECK=</span>
<a href="#l14.4514"></a><span id="l14.4514" class="difflineplus">+  MOZ_STORAGE=1</span>
<a href="#l14.4515"></a><span id="l14.4515" class="difflineplus">+  MOZ_PLACES=</span>
<a href="#l14.4516"></a><span id="l14.4516" class="difflineplus">+  MOZ_SVG=</span>
<a href="#l14.4517"></a><span id="l14.4517" class="difflineplus">+  MOZ_UNIVERSALCHARDET=</span>
<a href="#l14.4518"></a><span id="l14.4518" class="difflineplus">+  MOZ_UPDATER=</span>
<a href="#l14.4519"></a><span id="l14.4519" class="difflineplus">+  MOZ_USE_NATIVE_UCONV=1</span>
<a href="#l14.4520"></a><span id="l14.4520" class="difflineplus">+  MOZ_VIEW_SOURCE=</span>
<a href="#l14.4521"></a><span id="l14.4521" class="difflineplus">+  MOZ_XPFE_COMPONENTS=</span>
<a href="#l14.4522"></a><span id="l14.4522" class="difflineplus">+  MOZ_XPINSTALL=</span>
<a href="#l14.4523"></a><span id="l14.4523" class="difflineplus">+  MOZ_XTF=</span>
<a href="#l14.4524"></a><span id="l14.4524" class="difflineplus">+  MOZ_XUL=</span>
<a href="#l14.4525"></a><span id="l14.4525" class="difflineplus">+  MOZ_ZIPWRITER=</span>
<a href="#l14.4526"></a><span id="l14.4526" class="difflineplus">+  MOZ_RDF=</span>
<a href="#l14.4527"></a><span id="l14.4527" class="difflineplus">+  NECKO_DISK_CACHE=</span>
<a href="#l14.4528"></a><span id="l14.4528" class="difflineplus">+  NECKO_PROTOCOLS_DEFAULT=&quot;about data http file res&quot;</span>
<a href="#l14.4529"></a><span id="l14.4529" class="difflineplus">+  NECKO_SMALL_BUFFERS=1</span>
<a href="#l14.4530"></a><span id="l14.4530" class="difflineplus">+  NS_DISABLE_LOGGING=1</span>
<a href="#l14.4531"></a><span id="l14.4531" class="difflineplus">+  NS_PRINTING=</span>
<a href="#l14.4532"></a><span id="l14.4532" class="difflineplus">+  JS_STATIC_BUILD=1</span>
<a href="#l14.4533"></a><span id="l14.4533" class="difflineplus">+  ;;</span>
<a href="#l14.4534"></a><span id="l14.4534" class="difflineplus">+</span>
<a href="#l14.4535"></a><span id="l14.4535" class="difflineplus">+*)</span>
<a href="#l14.4536"></a><span id="l14.4536" class="difflineplus">+  AC_MSG_ERROR([Unrecognized value: --with-embedding-profile=$MOZ_EMBEDDING_PROFILE])</span>
<a href="#l14.4537"></a><span id="l14.4537" class="difflineplus">+  ;;</span>
<a href="#l14.4538"></a><span id="l14.4538" class="difflineplus">+esac</span>
<a href="#l14.4539"></a><span id="l14.4539" class="difflineplus">+</span>
<a href="#l14.4540"></a><span id="l14.4540" class="difflineplus">+AC_SUBST(MOZ_EMBEDDING_LEVEL_DEFAULT)</span>
<a href="#l14.4541"></a><span id="l14.4541" class="difflineplus">+AC_SUBST(MOZ_EMBEDDING_LEVEL_BASIC)</span>
<a href="#l14.4542"></a><span id="l14.4542" class="difflineplus">+AC_SUBST(MOZ_EMBEDDING_LEVEL_MINIMAL)</span>
<a href="#l14.4543"></a><span id="l14.4543" class="difflineplus">+</span>
<a href="#l14.4544"></a><span id="l14.4544" class="difflineplus">+MOZ_ARG_WITH_STRING(xulrunner-stub-name,</span>
<a href="#l14.4545"></a><span id="l14.4545" class="difflineplus">+[  --with-xulrunner-stub-name=appname   Create the xulrunner stub with the given name],</span>
<a href="#l14.4546"></a><span id="l14.4546" class="difflineplus">+  XULRUNNER_STUB_NAME=$withval)</span>
<a href="#l14.4547"></a><span id="l14.4547" class="difflineplus">+</span>
<a href="#l14.4548"></a><span id="l14.4548" class="difflineplus">+if test -z &quot;$XULRUNNER_STUB_NAME&quot;; then</span>
<a href="#l14.4549"></a><span id="l14.4549" class="difflineplus">+  case &quot;$target_os&quot; in</span>
<a href="#l14.4550"></a><span id="l14.4550" class="difflineplus">+  darwin*)</span>
<a href="#l14.4551"></a><span id="l14.4551" class="difflineplus">+    XULRUNNER_STUB_NAME=xulrunner</span>
<a href="#l14.4552"></a><span id="l14.4552" class="difflineplus">+    ;;</span>
<a href="#l14.4553"></a><span id="l14.4553" class="difflineplus">+  *)</span>
<a href="#l14.4554"></a><span id="l14.4554" class="difflineplus">+    XULRUNNER_STUB_NAME=xulrunner-stub</span>
<a href="#l14.4555"></a><span id="l14.4555" class="difflineplus">+  esac</span>
<a href="#l14.4556"></a><span id="l14.4556" class="difflineplus">+fi</span>
<a href="#l14.4557"></a><span id="l14.4557" class="difflineplus">+AC_SUBST(XULRUNNER_STUB_NAME)</span>
<a href="#l14.4558"></a><span id="l14.4558" class="difflineplus">+</span>
<a href="#l14.4559"></a><span id="l14.4559" class="difflineplus">+if test -z &quot;$MOZ_BUILD_APP&quot;; then</span>
<a href="#l14.4560"></a><span id="l14.4560" class="difflineplus">+  AC_MSG_ERROR([--enable-application=APP was not specified and is required.])</span>
<a href="#l14.4561"></a><span id="l14.4561" class="difflineplus">+else</span>
<a href="#l14.4562"></a><span id="l14.4562" class="difflineplus">+  # We have a valid application only if it has a build.mk file in its top</span>
<a href="#l14.4563"></a><span id="l14.4563" class="difflineplus">+  # directory.</span>
<a href="#l14.4564"></a><span id="l14.4564" class="difflineplus">+  if test ! -f &quot;${srcdir}/${MOZ_BUILD_APP}/build.mk&quot; ; then</span>
<a href="#l14.4565"></a><span id="l14.4565" class="difflineplus">+    AC_MSG_ERROR([--enable-application value not recognized (${MOZ_BUILD_APP}/build.mk does not exist).])</span>
<a href="#l14.4566"></a><span id="l14.4566" class="difflineplus">+  fi</span>
<a href="#l14.4567"></a><span id="l14.4567" class="difflineplus">+fi</span>
<a href="#l14.4568"></a><span id="l14.4568" class="difflineplus">+</span>
<a href="#l14.4569"></a><span id="l14.4569" class="difflineplus">+# Allow the application to influence configure with a confvars.sh script.</span>
<a href="#l14.4570"></a><span id="l14.4570" class="difflineplus">+</span>
<a href="#l14.4571"></a><span id="l14.4571" class="difflineplus">+AC_MSG_CHECKING([if app-specific confvars.sh exists])</span>
<a href="#l14.4572"></a><span id="l14.4572" class="difflineplus">+if test -f &quot;${srcdir}/${MOZ_BUILD_APP}/confvars.sh&quot; ; then</span>
<a href="#l14.4573"></a><span id="l14.4573" class="difflineplus">+  AC_MSG_RESULT([${srcdir}/${MOZ_BUILD_APP}/confvars.sh])</span>
<a href="#l14.4574"></a><span id="l14.4574" class="difflineplus">+  . &quot;${srcdir}/${MOZ_BUILD_APP}/confvars.sh&quot;</span>
<a href="#l14.4575"></a><span id="l14.4575" class="difflineplus">+else</span>
<a href="#l14.4576"></a><span id="l14.4576" class="difflineplus">+  AC_MSG_RESULT([no])</span>
<a href="#l14.4577"></a><span id="l14.4577" class="difflineplus">+fi</span>
<a href="#l14.4578"></a><span id="l14.4578" class="difflineplus">+</span>
<a href="#l14.4579"></a><span id="l14.4579" class="difflineplus">+# Now is a good time to test for logic errors, define mismatches, etc.</span>
<a href="#l14.4580"></a><span id="l14.4580" class="difflineplus">+case &quot;$MOZ_BUILD_APP&quot; in</span>
<a href="#l14.4581"></a><span id="l14.4581" class="difflineplus">+xulrunner)</span>
<a href="#l14.4582"></a><span id="l14.4582" class="difflineplus">+  if test &quot;$LIBXUL_SDK&quot;; then</span>
<a href="#l14.4583"></a><span id="l14.4583" class="difflineplus">+    AC_MSG_ERROR([Building XULRunner --with-libxul-sdk doesn't make sense; XULRunner provides the libxul SDK.])</span>
<a href="#l14.4584"></a><span id="l14.4584" class="difflineplus">+  fi</span>
<a href="#l14.4585"></a><span id="l14.4585" class="difflineplus">+  ;;</span>
<a href="#l14.4586"></a><span id="l14.4586" class="difflineplus">+*)</span>
<a href="#l14.4587"></a><span id="l14.4587" class="difflineplus">+  # Fix this case for folks who forget. Warn them.</span>
<a href="#l14.4588"></a><span id="l14.4588" class="difflineplus">+  if test -n &quot;$LIBXUL_SDK&quot; -a -z &quot;$MOZ_XUL_APP&quot;; then</span>
<a href="#l14.4589"></a><span id="l14.4589" class="difflineplus">+    AC_MSG_WARN([Setting MOZ_XUL_APP since LIBXUL_SDK was set. Add to confvars.sh!])</span>
<a href="#l14.4590"></a><span id="l14.4590" class="difflineplus">+    MOZ_XUL_APP=1</span>
<a href="#l14.4591"></a><span id="l14.4591" class="difflineplus">+  fi</span>
<a href="#l14.4592"></a><span id="l14.4592" class="difflineplus">+  ;;</span>
<a href="#l14.4593"></a><span id="l14.4593" class="difflineplus">+esac</span>
<a href="#l14.4594"></a><span id="l14.4594" class="difflineplus">+</span>
<a href="#l14.4595"></a><span id="l14.4595" class="difflineplus">+# Special cases where we need to AC_DEFINE something. Also a holdover for apps</span>
<a href="#l14.4596"></a><span id="l14.4596" class="difflineplus">+# that haven't made a confvars.sh yet. Don't add new stuff here, use</span>
<a href="#l14.4597"></a><span id="l14.4597" class="difflineplus">+# MOZ_BUILD_APP.</span>
<a href="#l14.4598"></a><span id="l14.4598" class="difflineplus">+case &quot;$MOZ_BUILD_APP&quot; in</span>
<a href="#l14.4599"></a><span id="l14.4599" class="difflineplus">+suite)</span>
<a href="#l14.4600"></a><span id="l14.4600" class="difflineplus">+  AC_DEFINE(MOZ_SUITE)</span>
<a href="#l14.4601"></a><span id="l14.4601" class="difflineplus">+  ;;</span>
<a href="#l14.4602"></a><span id="l14.4602" class="difflineplus">+</span>
<a href="#l14.4603"></a><span id="l14.4603" class="difflineplus">+mail)</span>
<a href="#l14.4604"></a><span id="l14.4604" class="difflineplus">+  AC_DEFINE(MOZ_THUNDERBIRD)</span>
<a href="#l14.4605"></a><span id="l14.4605" class="difflineplus">+  ;;</span>
<a href="#l14.4606"></a><span id="l14.4606" class="difflineplus">+</span>
<a href="#l14.4607"></a><span id="l14.4607" class="difflineplus">+calendar)</span>
<a href="#l14.4608"></a><span id="l14.4608" class="difflineplus">+  AC_DEFINE(MOZ_SUNBIRD)</span>
<a href="#l14.4609"></a><span id="l14.4609" class="difflineplus">+  ;;</span>
<a href="#l14.4610"></a><span id="l14.4610" class="difflineplus">+</span>
<a href="#l14.4611"></a><span id="l14.4611" class="difflineplus">+esac</span>
<a href="#l14.4612"></a><span id="l14.4612" class="difflineplus">+</span>
<a href="#l14.4613"></a><span id="l14.4613" class="difflineplus">+AC_SUBST(MOZ_BUILD_APP)</span>
<a href="#l14.4614"></a><span id="l14.4614" class="difflineplus">+AC_SUBST(MOZ_XUL_APP)</span>
<a href="#l14.4615"></a><span id="l14.4615" class="difflineplus">+AC_SUBST(MOZ_SUITE)</span>
<a href="#l14.4616"></a><span id="l14.4616" class="difflineplus">+AC_SUBST(MOZ_THUNDERBIRD)</span>
<a href="#l14.4617"></a><span id="l14.4617" class="difflineplus">+AC_SUBST(MOZ_SUNBIRD)</span>
<a href="#l14.4618"></a><span id="l14.4618" class="difflineplus">+</span>
<a href="#l14.4619"></a><span id="l14.4619" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZ_BUILD_APP,$MOZ_BUILD_APP)</span>
<a href="#l14.4620"></a><span id="l14.4620" class="difflineplus">+</span>
<a href="#l14.4621"></a><span id="l14.4621" class="difflineplus">+if test &quot;$MOZ_XUL_APP&quot;; then</span>
<a href="#l14.4622"></a><span id="l14.4622" class="difflineplus">+  MOZ_PROFILESHARING=</span>
<a href="#l14.4623"></a><span id="l14.4623" class="difflineplus">+  AC_DEFINE(MOZ_XUL_APP)</span>
<a href="#l14.4624"></a><span id="l14.4624" class="difflineplus">+fi</span>
<a href="#l14.4625"></a><span id="l14.4625" class="difflineplus">+</span>
<a href="#l14.4626"></a><span id="l14.4626" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4627"></a><span id="l14.4627" class="difflineplus">+dnl = </span>
<a href="#l14.4628"></a><span id="l14.4628" class="difflineplus">+dnl = Toolkit Options</span>
<a href="#l14.4629"></a><span id="l14.4629" class="difflineplus">+dnl = </span>
<a href="#l14.4630"></a><span id="l14.4630" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4631"></a><span id="l14.4631" class="difflineplus">+MOZ_ARG_HEADER(Toolkit Options)</span>
<a href="#l14.4632"></a><span id="l14.4632" class="difflineplus">+</span>
<a href="#l14.4633"></a><span id="l14.4633" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.4634"></a><span id="l14.4634" class="difflineplus">+    dnl = Select the default toolkit</span>
<a href="#l14.4635"></a><span id="l14.4635" class="difflineplus">+    dnl ========================================================</span>
<a href="#l14.4636"></a><span id="l14.4636" class="difflineplus">+	MOZ_ARG_ENABLE_STRING(default-toolkit,</span>
<a href="#l14.4637"></a><span id="l14.4637" class="difflineplus">+	[  --enable-default-toolkit=TK</span>
<a href="#l14.4638"></a><span id="l14.4638" class="difflineplus">+                          Select default toolkit</span>
<a href="#l14.4639"></a><span id="l14.4639" class="difflineplus">+                          Platform specific defaults:</span>
<a href="#l14.4640"></a><span id="l14.4640" class="difflineplus">+                            BeOS - cairo-beos</span>
<a href="#l14.4641"></a><span id="l14.4641" class="difflineplus">+                            Mac OS X - cairo-cocoa</span>
<a href="#l14.4642"></a><span id="l14.4642" class="difflineplus">+                            Neutrino/QNX - photon</span>
<a href="#l14.4643"></a><span id="l14.4643" class="difflineplus">+                            OS/2 - cairo-os2</span>
<a href="#l14.4644"></a><span id="l14.4644" class="difflineplus">+                            Win32 - cairo-windows</span>
<a href="#l14.4645"></a><span id="l14.4645" class="difflineplus">+                            WinCE - windows</span>
<a href="#l14.4646"></a><span id="l14.4646" class="difflineplus">+                            * - cairo-gtk2],</span>
<a href="#l14.4647"></a><span id="l14.4647" class="difflineplus">+    [ _DEFAULT_TOOLKIT=$enableval ],</span>
<a href="#l14.4648"></a><span id="l14.4648" class="difflineplus">+    [ _DEFAULT_TOOLKIT=$_PLATFORM_DEFAULT_TOOLKIT])</span>
<a href="#l14.4649"></a><span id="l14.4649" class="difflineplus">+</span>
<a href="#l14.4650"></a><span id="l14.4650" class="difflineplus">+    if test &quot;$_DEFAULT_TOOLKIT&quot; = &quot;photon&quot; \</span>
<a href="#l14.4651"></a><span id="l14.4651" class="difflineplus">+        -o &quot;$_DEFAULT_TOOLKIT&quot; = &quot;cairo-windows&quot; \</span>
<a href="#l14.4652"></a><span id="l14.4652" class="difflineplus">+        -o &quot;$_DEFAULT_TOOLKIT&quot; = &quot;cairo-gtk2&quot; \</span>
<a href="#l14.4653"></a><span id="l14.4653" class="difflineplus">+        -o &quot;$_DEFAULT_TOOLKIT&quot; = &quot;cairo-beos&quot; \</span>
<a href="#l14.4654"></a><span id="l14.4654" class="difflineplus">+        -o &quot;$_DEFAULT_TOOLKIT&quot; = &quot;cairo-os2&quot; \</span>
<a href="#l14.4655"></a><span id="l14.4655" class="difflineplus">+        -o &quot;$_DEFAULT_TOOLKIT&quot; = &quot;cairo-mac&quot; \</span>
<a href="#l14.4656"></a><span id="l14.4656" class="difflineplus">+        -o &quot;$_DEFAULT_TOOLKIT&quot; = &quot;cairo-cocoa&quot;</span>
<a href="#l14.4657"></a><span id="l14.4657" class="difflineplus">+    then</span>
<a href="#l14.4658"></a><span id="l14.4658" class="difflineplus">+        dnl nglayout only supports building with one toolkit,</span>
<a href="#l14.4659"></a><span id="l14.4659" class="difflineplus">+        dnl so ignore everything after the first comma (&quot;,&quot;).</span>
<a href="#l14.4660"></a><span id="l14.4660" class="difflineplus">+        MOZ_WIDGET_TOOLKIT=`echo &quot;$_DEFAULT_TOOLKIT&quot; | sed -e &quot;s/,.*$//&quot;`</span>
<a href="#l14.4661"></a><span id="l14.4661" class="difflineplus">+    else</span>
<a href="#l14.4662"></a><span id="l14.4662" class="difflineplus">+        if test &quot;$no_x&quot; != &quot;yes&quot;; then</span>
<a href="#l14.4663"></a><span id="l14.4663" class="difflineplus">+            AC_MSG_ERROR([Toolkit must be cairo-gtk2.])</span>
<a href="#l14.4664"></a><span id="l14.4664" class="difflineplus">+        else</span>
<a href="#l14.4665"></a><span id="l14.4665" class="difflineplus">+            AC_MSG_ERROR([Toolkit must be $_PLATFORM_DEFAULT_TOOLKIT (if supported).])</span>
<a href="#l14.4666"></a><span id="l14.4666" class="difflineplus">+        fi</span>
<a href="#l14.4667"></a><span id="l14.4667" class="difflineplus">+    fi</span>
<a href="#l14.4668"></a><span id="l14.4668" class="difflineplus">+</span>
<a href="#l14.4669"></a><span id="l14.4669" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZ_DEFAULT_TOOLKIT,&quot;$MOZ_WIDGET_TOOLKIT&quot;)</span>
<a href="#l14.4670"></a><span id="l14.4670" class="difflineplus">+</span>
<a href="#l14.4671"></a><span id="l14.4671" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4672"></a><span id="l14.4672" class="difflineplus">+dnl = Enable the toolkit as needed                         =</span>
<a href="#l14.4673"></a><span id="l14.4673" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4674"></a><span id="l14.4674" class="difflineplus">+</span>
<a href="#l14.4675"></a><span id="l14.4675" class="difflineplus">+case &quot;$MOZ_WIDGET_TOOLKIT&quot; in</span>
<a href="#l14.4676"></a><span id="l14.4676" class="difflineplus">+photon)</span>
<a href="#l14.4677"></a><span id="l14.4677" class="difflineplus">+	MOZ_ENABLE_PHOTON=1</span>
<a href="#l14.4678"></a><span id="l14.4678" class="difflineplus">+	AC_DEFINE(MOZ_WIDGET_PHOTON)</span>
<a href="#l14.4679"></a><span id="l14.4679" class="difflineplus">+    ;;</span>
<a href="#l14.4680"></a><span id="l14.4680" class="difflineplus">+</span>
<a href="#l14.4681"></a><span id="l14.4681" class="difflineplus">+cairo-windows)</span>
<a href="#l14.4682"></a><span id="l14.4682" class="difflineplus">+    MOZ_WIDGET_TOOLKIT=windows</span>
<a href="#l14.4683"></a><span id="l14.4683" class="difflineplus">+    MOZ_GFX_TOOLKIT=cairo</span>
<a href="#l14.4684"></a><span id="l14.4684" class="difflineplus">+    ;;</span>
<a href="#l14.4685"></a><span id="l14.4685" class="difflineplus">+</span>
<a href="#l14.4686"></a><span id="l14.4686" class="difflineplus">+cairo-gtk2)</span>
<a href="#l14.4687"></a><span id="l14.4687" class="difflineplus">+    MOZ_WIDGET_TOOLKIT=gtk2</span>
<a href="#l14.4688"></a><span id="l14.4688" class="difflineplus">+    MOZ_GFX_TOOLKIT=cairo</span>
<a href="#l14.4689"></a><span id="l14.4689" class="difflineplus">+    MOZ_ENABLE_GTK2=1</span>
<a href="#l14.4690"></a><span id="l14.4690" class="difflineplus">+    MOZ_ENABLE_XREMOTE=1</span>
<a href="#l14.4691"></a><span id="l14.4691" class="difflineplus">+    TK_CFLAGS='$(MOZ_GTK2_CFLAGS)'</span>
<a href="#l14.4692"></a><span id="l14.4692" class="difflineplus">+    TK_LIBS='$(MOZ_GTK2_LIBS)'</span>
<a href="#l14.4693"></a><span id="l14.4693" class="difflineplus">+    AC_DEFINE(MOZ_WIDGET_GTK2)</span>
<a href="#l14.4694"></a><span id="l14.4694" class="difflineplus">+    ;;</span>
<a href="#l14.4695"></a><span id="l14.4695" class="difflineplus">+cairo-beos)</span>
<a href="#l14.4696"></a><span id="l14.4696" class="difflineplus">+    MOZ_WIDGET_TOOLKIT=beos</span>
<a href="#l14.4697"></a><span id="l14.4697" class="difflineplus">+    MOZ_GFX_TOOLKIT=cairo</span>
<a href="#l14.4698"></a><span id="l14.4698" class="difflineplus">+    TK_CFLAGS='$(MOZ_CAIRO_CFLAGS)'</span>
<a href="#l14.4699"></a><span id="l14.4699" class="difflineplus">+    TK_LIBS='$(MOZ_CAIRO_LIBS)'</span>
<a href="#l14.4700"></a><span id="l14.4700" class="difflineplus">+    ;;</span>
<a href="#l14.4701"></a><span id="l14.4701" class="difflineplus">+</span>
<a href="#l14.4702"></a><span id="l14.4702" class="difflineplus">+cairo-os2)</span>
<a href="#l14.4703"></a><span id="l14.4703" class="difflineplus">+    MOZ_WIDGET_TOOLKIT=os2</span>
<a href="#l14.4704"></a><span id="l14.4704" class="difflineplus">+    MOZ_GFX_TOOLKIT=cairo</span>
<a href="#l14.4705"></a><span id="l14.4705" class="difflineplus">+    TK_CFLAGS='$(MOZ_CAIRO_CFLAGS)'</span>
<a href="#l14.4706"></a><span id="l14.4706" class="difflineplus">+    TK_LIBS='$(MOZ_CAIRO_LIBS)'</span>
<a href="#l14.4707"></a><span id="l14.4707" class="difflineplus">+    ;;</span>
<a href="#l14.4708"></a><span id="l14.4708" class="difflineplus">+</span>
<a href="#l14.4709"></a><span id="l14.4709" class="difflineplus">+cairo-mac|cairo-cocoa)</span>
<a href="#l14.4710"></a><span id="l14.4710" class="difflineplus">+    if test &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;cairo-cocoa&quot;; then</span>
<a href="#l14.4711"></a><span id="l14.4711" class="difflineplus">+        MOZ_WIDGET_TOOLKIT=cocoa</span>
<a href="#l14.4712"></a><span id="l14.4712" class="difflineplus">+        AC_DEFINE(MOZ_WIDGET_COCOA)</span>
<a href="#l14.4713"></a><span id="l14.4713" class="difflineplus">+        MOZ_ENABLE_COCOA=1</span>
<a href="#l14.4714"></a><span id="l14.4714" class="difflineplus">+    else</span>
<a href="#l14.4715"></a><span id="l14.4715" class="difflineplus">+        MOZ_WIDGET_TOOLKIT=mac</span>
<a href="#l14.4716"></a><span id="l14.4716" class="difflineplus">+    fi</span>
<a href="#l14.4717"></a><span id="l14.4717" class="difflineplus">+    MOZ_GFX_TOOLKIT=cairo</span>
<a href="#l14.4718"></a><span id="l14.4718" class="difflineplus">+    MOZ_USER_DIR=&quot;Mozilla&quot;</span>
<a href="#l14.4719"></a><span id="l14.4719" class="difflineplus">+    AC_DEFINE(XP_MACOSX)</span>
<a href="#l14.4720"></a><span id="l14.4720" class="difflineplus">+    AC_DEFINE(TARGET_CARBON)</span>
<a href="#l14.4721"></a><span id="l14.4721" class="difflineplus">+    AC_DEFINE(TARGET_API_MAC_CARBON)</span>
<a href="#l14.4722"></a><span id="l14.4722" class="difflineplus">+    TK_LIBS='-framework Carbon'</span>
<a href="#l14.4723"></a><span id="l14.4723" class="difflineplus">+    TK_CFLAGS=&quot;-I${MACOS_SDK_DIR}/Developer/Headers/FlatCarbon&quot;</span>
<a href="#l14.4724"></a><span id="l14.4724" class="difflineplus">+    CFLAGS=&quot;$CFLAGS $TK_CFLAGS&quot;</span>
<a href="#l14.4725"></a><span id="l14.4725" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS $TK_CFLAGS&quot;</span>
<a href="#l14.4726"></a><span id="l14.4726" class="difflineplus">+    ;;</span>
<a href="#l14.4727"></a><span id="l14.4727" class="difflineplus">+esac</span>
<a href="#l14.4728"></a><span id="l14.4728" class="difflineplus">+</span>
<a href="#l14.4729"></a><span id="l14.4729" class="difflineplus">+if test &quot;$MOZ_ENABLE_XREMOTE&quot;; then</span>
<a href="#l14.4730"></a><span id="l14.4730" class="difflineplus">+    AC_DEFINE(MOZ_ENABLE_XREMOTE)</span>
<a href="#l14.4731"></a><span id="l14.4731" class="difflineplus">+fi</span>
<a href="#l14.4732"></a><span id="l14.4732" class="difflineplus">+</span>
<a href="#l14.4733"></a><span id="l14.4733" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.4734"></a><span id="l14.4734" class="difflineplus">+if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.4735"></a><span id="l14.4735" class="difflineplus">+then</span>
<a href="#l14.4736"></a><span id="l14.4736" class="difflineplus">+    PKG_CHECK_MODULES(MOZ_GTK2, gtk+-2.0 &gt;= $GTK2_VERSION gtk+-unix-print-2.0 gdk-x11-2.0 glib-2.0 gobject-2.0)</span>
<a href="#l14.4737"></a><span id="l14.4737" class="difflineplus">+fi</span>
<a href="#l14.4738"></a><span id="l14.4738" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.4739"></a><span id="l14.4739" class="difflineplus">+</span>
<a href="#l14.4740"></a><span id="l14.4740" class="difflineplus">+AC_SUBST(MOZ_DEFAULT_TOOLKIT)</span>
<a href="#l14.4741"></a><span id="l14.4741" class="difflineplus">+</span>
<a href="#l14.4742"></a><span id="l14.4742" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4743"></a><span id="l14.4743" class="difflineplus">+dnl = startup-notification support module</span>
<a href="#l14.4744"></a><span id="l14.4744" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4745"></a><span id="l14.4745" class="difflineplus">+</span>
<a href="#l14.4746"></a><span id="l14.4746" class="difflineplus">+if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.4747"></a><span id="l14.4747" class="difflineplus">+then</span>
<a href="#l14.4748"></a><span id="l14.4748" class="difflineplus">+    MOZ_ENABLE_STARTUP_NOTIFICATION=</span>
<a href="#l14.4749"></a><span id="l14.4749" class="difflineplus">+</span>
<a href="#l14.4750"></a><span id="l14.4750" class="difflineplus">+    MOZ_ARG_ENABLE_BOOL(startup-notification,</span>
<a href="#l14.4751"></a><span id="l14.4751" class="difflineplus">+    [  --enable-startup-notification       Enable startup-notification support (default: disabled) ],</span>
<a href="#l14.4752"></a><span id="l14.4752" class="difflineplus">+        MOZ_ENABLE_STARTUP_NOTIFICATION=force,</span>
<a href="#l14.4753"></a><span id="l14.4753" class="difflineplus">+        MOZ_ENABLE_STARTUP_NOTIFICATION=)</span>
<a href="#l14.4754"></a><span id="l14.4754" class="difflineplus">+    if test &quot;$MOZ_ENABLE_STARTUP_NOTIFICATION&quot;</span>
<a href="#l14.4755"></a><span id="l14.4755" class="difflineplus">+    then</span>
<a href="#l14.4756"></a><span id="l14.4756" class="difflineplus">+        PKG_CHECK_MODULES(MOZ_STARTUP_NOTIFICATION,</span>
<a href="#l14.4757"></a><span id="l14.4757" class="difflineplus">+                          libstartup-notification-1.0 &gt;= $STARTUP_NOTIFICATION_VERSION,</span>
<a href="#l14.4758"></a><span id="l14.4758" class="difflineplus">+        [MOZ_ENABLE_STARTUP_NOTIFICATION=1], [</span>
<a href="#l14.4759"></a><span id="l14.4759" class="difflineplus">+            if test &quot;$MOZ_ENABLE_STARTUP_NOTIFICATION&quot; = &quot;force&quot;</span>
<a href="#l14.4760"></a><span id="l14.4760" class="difflineplus">+            then</span>
<a href="#l14.4761"></a><span id="l14.4761" class="difflineplus">+                AC_MSG_ERROR([* * * Could not find startup-notification &gt;= $STARTUP_NOTIFICATION_VERSION])</span>
<a href="#l14.4762"></a><span id="l14.4762" class="difflineplus">+            fi</span>
<a href="#l14.4763"></a><span id="l14.4763" class="difflineplus">+            MOZ_ENABLE_STARTUP_NOTIFICATION=</span>
<a href="#l14.4764"></a><span id="l14.4764" class="difflineplus">+        ])</span>
<a href="#l14.4765"></a><span id="l14.4765" class="difflineplus">+    fi</span>
<a href="#l14.4766"></a><span id="l14.4766" class="difflineplus">+</span>
<a href="#l14.4767"></a><span id="l14.4767" class="difflineplus">+    if test &quot;$MOZ_ENABLE_STARTUP_NOTIFICATION&quot;; then</span>
<a href="#l14.4768"></a><span id="l14.4768" class="difflineplus">+        AC_DEFINE(MOZ_ENABLE_STARTUP_NOTIFICATION)</span>
<a href="#l14.4769"></a><span id="l14.4769" class="difflineplus">+    fi</span>
<a href="#l14.4770"></a><span id="l14.4770" class="difflineplus">+</span>
<a href="#l14.4771"></a><span id="l14.4771" class="difflineplus">+    TK_LIBS=&quot;$TK_LIBS $MOZ_STARTUP_NOTIFICATION_LIBS&quot;</span>
<a href="#l14.4772"></a><span id="l14.4772" class="difflineplus">+fi</span>
<a href="#l14.4773"></a><span id="l14.4773" class="difflineplus">+AC_SUBST(MOZ_ENABLE_STARTUP_NOTIFICATION)</span>
<a href="#l14.4774"></a><span id="l14.4774" class="difflineplus">+AC_SUBST(MOZ_STARTUP_NOTIFICATION_CFLAGS)</span>
<a href="#l14.4775"></a><span id="l14.4775" class="difflineplus">+AC_SUBST(MOZ_STARTUP_NOTIFICATION_LIBS)</span>
<a href="#l14.4776"></a><span id="l14.4776" class="difflineplus">+</span>
<a href="#l14.4777"></a><span id="l14.4777" class="difflineplus">+AC_SUBST(GTK_CONFIG)</span>
<a href="#l14.4778"></a><span id="l14.4778" class="difflineplus">+AC_SUBST(TK_CFLAGS)</span>
<a href="#l14.4779"></a><span id="l14.4779" class="difflineplus">+AC_SUBST(TK_LIBS)</span>
<a href="#l14.4780"></a><span id="l14.4780" class="difflineplus">+</span>
<a href="#l14.4781"></a><span id="l14.4781" class="difflineplus">+AC_SUBST(MOZ_ENABLE_GTK2)</span>
<a href="#l14.4782"></a><span id="l14.4782" class="difflineplus">+AC_SUBST(MOZ_ENABLE_PHOTON)</span>
<a href="#l14.4783"></a><span id="l14.4783" class="difflineplus">+AC_SUBST(MOZ_ENABLE_COCOA)</span>
<a href="#l14.4784"></a><span id="l14.4784" class="difflineplus">+AC_SUBST(MOZ_ENABLE_GLITZ)</span>
<a href="#l14.4785"></a><span id="l14.4785" class="difflineplus">+AC_SUBST(MOZ_ENABLE_XREMOTE)</span>
<a href="#l14.4786"></a><span id="l14.4786" class="difflineplus">+AC_SUBST(MOZ_GTK2_CFLAGS)</span>
<a href="#l14.4787"></a><span id="l14.4787" class="difflineplus">+AC_SUBST(MOZ_GTK2_LIBS)</span>
<a href="#l14.4788"></a><span id="l14.4788" class="difflineplus">+</span>
<a href="#l14.4789"></a><span id="l14.4789" class="difflineplus">+AC_SUBST(MOC)</span>
<a href="#l14.4790"></a><span id="l14.4790" class="difflineplus">+</span>
<a href="#l14.4791"></a><span id="l14.4791" class="difflineplus">+if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.4792"></a><span id="l14.4792" class="difflineplus">+then</span>
<a href="#l14.4793"></a><span id="l14.4793" class="difflineplus">+    AC_DEFINE(MOZ_X11)</span>
<a href="#l14.4794"></a><span id="l14.4794" class="difflineplus">+    MOZ_X11=1</span>
<a href="#l14.4795"></a><span id="l14.4795" class="difflineplus">+fi</span>
<a href="#l14.4796"></a><span id="l14.4796" class="difflineplus">+AC_SUBST(MOZ_X11)</span>
<a href="#l14.4797"></a><span id="l14.4797" class="difflineplus">+</span>
<a href="#l14.4798"></a><span id="l14.4798" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4799"></a><span id="l14.4799" class="difflineplus">+dnl =</span>
<a href="#l14.4800"></a><span id="l14.4800" class="difflineplus">+dnl = Components &amp; Features</span>
<a href="#l14.4801"></a><span id="l14.4801" class="difflineplus">+dnl = </span>
<a href="#l14.4802"></a><span id="l14.4802" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4803"></a><span id="l14.4803" class="difflineplus">+MOZ_ARG_HEADER(Components and Features)</span>
<a href="#l14.4804"></a><span id="l14.4804" class="difflineplus">+</span>
<a href="#l14.4805"></a><span id="l14.4805" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4806"></a><span id="l14.4806" class="difflineplus">+dnl = Localization</span>
<a href="#l14.4807"></a><span id="l14.4807" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4808"></a><span id="l14.4808" class="difflineplus">+MOZ_ARG_ENABLE_STRING(ui-locale,</span>
<a href="#l14.4809"></a><span id="l14.4809" class="difflineplus">+[  --enable-ui-locale=ab-CD</span>
<a href="#l14.4810"></a><span id="l14.4810" class="difflineplus">+                          Select the user interface locale (default: en-US)],</span>
<a href="#l14.4811"></a><span id="l14.4811" class="difflineplus">+    MOZ_UI_LOCALE=$enableval )</span>
<a href="#l14.4812"></a><span id="l14.4812" class="difflineplus">+AC_SUBST(MOZ_UI_LOCALE)</span>
<a href="#l14.4813"></a><span id="l14.4813" class="difflineplus">+</span>
<a href="#l14.4814"></a><span id="l14.4814" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.4815"></a><span id="l14.4815" class="difflineplus">+dnl = Calendar client</span>
<a href="#l14.4816"></a><span id="l14.4816" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.4817"></a><span id="l14.4817" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(calendar,</span>
<a href="#l14.4818"></a><span id="l14.4818" class="difflineplus">+[  --enable-calendar      Enable building of the Lightning calendar extension],</span>
<a href="#l14.4819"></a><span id="l14.4819" class="difflineplus">+    MOZ_CALENDAR=1,</span>
<a href="#l14.4820"></a><span id="l14.4820" class="difflineplus">+    MOZ_CALENDAR= )</span>
<a href="#l14.4821"></a><span id="l14.4821" class="difflineplus">+AC_SUBST(MOZ_CALENDAR)</span>
<a href="#l14.4822"></a><span id="l14.4822" class="difflineplus">+</span>
<a href="#l14.4823"></a><span id="l14.4823" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.4824"></a><span id="l14.4824" class="difflineplus">+dnl = Mail &amp; News</span>
<a href="#l14.4825"></a><span id="l14.4825" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.4826"></a><span id="l14.4826" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(mailnews,</span>
<a href="#l14.4827"></a><span id="l14.4827" class="difflineplus">+[  --disable-mailnews      Disable building of mail &amp; news components],</span>
<a href="#l14.4828"></a><span id="l14.4828" class="difflineplus">+    MOZ_MAIL_NEWS=,</span>
<a href="#l14.4829"></a><span id="l14.4829" class="difflineplus">+    MOZ_MAIL_NEWS=1 )</span>
<a href="#l14.4830"></a><span id="l14.4830" class="difflineplus">+AC_SUBST(MOZ_MAIL_NEWS)</span>
<a href="#l14.4831"></a><span id="l14.4831" class="difflineplus">+</span>
<a href="#l14.4832"></a><span id="l14.4832" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.4833"></a><span id="l14.4833" class="difflineplus">+dnl = LDAP</span>
<a href="#l14.4834"></a><span id="l14.4834" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.4835"></a><span id="l14.4835" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(ldap,</span>
<a href="#l14.4836"></a><span id="l14.4836" class="difflineplus">+[  --disable-ldap          Disable LDAP support],</span>
<a href="#l14.4837"></a><span id="l14.4837" class="difflineplus">+    MOZ_LDAP_XPCOM=,</span>
<a href="#l14.4838"></a><span id="l14.4838" class="difflineplus">+    MOZ_LDAP_XPCOM=1)</span>
<a href="#l14.4839"></a><span id="l14.4839" class="difflineplus">+</span>
<a href="#l14.4840"></a><span id="l14.4840" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4841"></a><span id="l14.4841" class="difflineplus">+dnl = Trademarked Branding </span>
<a href="#l14.4842"></a><span id="l14.4842" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4843"></a><span id="l14.4843" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(official-branding,</span>
<a href="#l14.4844"></a><span id="l14.4844" class="difflineplus">+[  --enable-official-branding Enable Official mozilla.org Branding</span>
<a href="#l14.4845"></a><span id="l14.4845" class="difflineplus">+                          Do not distribute builds with</span>
<a href="#l14.4846"></a><span id="l14.4846" class="difflineplus">+                          --enable-official-branding unless you have</span>
<a href="#l14.4847"></a><span id="l14.4847" class="difflineplus">+                          permission to use trademarks per</span>
<a href="#l14.4848"></a><span id="l14.4848" class="difflineplus">+                          http://www.mozilla.org/foundation/trademarks/ .],</span>
<a href="#l14.4849"></a><span id="l14.4849" class="difflineplus">+[case &quot;$MOZ_BUILD_APP&quot; in</span>
<a href="#l14.4850"></a><span id="l14.4850" class="difflineplus">+calendar)</span>
<a href="#l14.4851"></a><span id="l14.4851" class="difflineplus">+    MOZ_BRANDING_DIRECTORY=other-licenses/branding/sunbird</span>
<a href="#l14.4852"></a><span id="l14.4852" class="difflineplus">+    MOZ_APP_DISPLAYNAME=Sunbird</span>
<a href="#l14.4853"></a><span id="l14.4853" class="difflineplus">+    ;;</span>
<a href="#l14.4854"></a><span id="l14.4854" class="difflineplus">+</span>
<a href="#l14.4855"></a><span id="l14.4855" class="difflineplus">+mail)</span>
<a href="#l14.4856"></a><span id="l14.4856" class="difflineplus">+    MOZ_BRANDING_DIRECTORY=other-licenses/branding/thunderbird</span>
<a href="#l14.4857"></a><span id="l14.4857" class="difflineplus">+    ;;</span>
<a href="#l14.4858"></a><span id="l14.4858" class="difflineplus">+</span>
<a href="#l14.4859"></a><span id="l14.4859" class="difflineplus">+*)]</span>
<a href="#l14.4860"></a><span id="l14.4860" class="difflineplus">+    AC_MSG_ERROR([Official branding is only available for Sunbird and Thunderbird.])</span>
<a href="#l14.4861"></a><span id="l14.4861" class="difflineplus">+esac</span>
<a href="#l14.4862"></a><span id="l14.4862" class="difflineplus">+)</span>
<a href="#l14.4863"></a><span id="l14.4863" class="difflineplus">+</span>
<a href="#l14.4864"></a><span id="l14.4864" class="difflineplus">+MOZ_ARG_WITH_STRING(branding,</span>
<a href="#l14.4865"></a><span id="l14.4865" class="difflineplus">+[  --with-branding=dir    Use branding from the specified directory.],</span>
<a href="#l14.4866"></a><span id="l14.4866" class="difflineplus">+    MOZ_BRANDING_DIRECTORY=$withval)</span>
<a href="#l14.4867"></a><span id="l14.4867" class="difflineplus">+</span>
<a href="#l14.4868"></a><span id="l14.4868" class="difflineplus">+REAL_BRANDING_DIRECTORY=&quot;${MOZ_BRANDING_DIRECTORY}&quot;</span>
<a href="#l14.4869"></a><span id="l14.4869" class="difflineplus">+if test -z &quot;$REAL_BRANDING_DIRECTORY&quot;; then</span>
<a href="#l14.4870"></a><span id="l14.4870" class="difflineplus">+  REAL_BRANDING_DIRECTORY=${MOZ_BUILD_APP}/branding/nightly</span>
<a href="#l14.4871"></a><span id="l14.4871" class="difflineplus">+fi</span>
<a href="#l14.4872"></a><span id="l14.4872" class="difflineplus">+</span>
<a href="#l14.4873"></a><span id="l14.4873" class="difflineplus">+if test -f &quot;$topsrcdir/$REAL_BRANDING_DIRECTORY/configure.sh&quot;; then</span>
<a href="#l14.4874"></a><span id="l14.4874" class="difflineplus">+  . &quot;$topsrcdir/$REAL_BRANDING_DIRECTORY/configure.sh&quot;</span>
<a href="#l14.4875"></a><span id="l14.4875" class="difflineplus">+fi</span>
<a href="#l14.4876"></a><span id="l14.4876" class="difflineplus">+</span>
<a href="#l14.4877"></a><span id="l14.4877" class="difflineplus">+AC_SUBST(MOZ_BRANDING_DIRECTORY)</span>
<a href="#l14.4878"></a><span id="l14.4878" class="difflineplus">+</span>
<a href="#l14.4879"></a><span id="l14.4879" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4880"></a><span id="l14.4880" class="difflineplus">+dnl = Distribution ID</span>
<a href="#l14.4881"></a><span id="l14.4881" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4882"></a><span id="l14.4882" class="difflineplus">+MOZ_ARG_WITH_STRING(distribution-id,</span>
<a href="#l14.4883"></a><span id="l14.4883" class="difflineplus">+[  --with-distribution-id=ID  Set distribution-specific id (default=org.mozilla)],</span>
<a href="#l14.4884"></a><span id="l14.4884" class="difflineplus">+[ val=`echo $withval`</span>
<a href="#l14.4885"></a><span id="l14.4885" class="difflineplus">+    MOZ_DISTRIBUTION_ID=&quot;$val&quot;])</span>
<a href="#l14.4886"></a><span id="l14.4886" class="difflineplus">+</span>
<a href="#l14.4887"></a><span id="l14.4887" class="difflineplus">+if test -z &quot;$MOZ_DISTRIBUTION_ID&quot;; then</span>
<a href="#l14.4888"></a><span id="l14.4888" class="difflineplus">+   MOZ_DISTRIBUTION_ID=&quot;org.mozilla&quot;</span>
<a href="#l14.4889"></a><span id="l14.4889" class="difflineplus">+fi</span>
<a href="#l14.4890"></a><span id="l14.4890" class="difflineplus">+</span>
<a href="#l14.4891"></a><span id="l14.4891" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZ_DISTRIBUTION_ID,&quot;$MOZ_DISTRIBUTION_ID&quot;)</span>
<a href="#l14.4892"></a><span id="l14.4892" class="difflineplus">+AC_SUBST(MOZ_DISTRIBUTION_ID)</span>
<a href="#l14.4893"></a><span id="l14.4893" class="difflineplus">+</span>
<a href="#l14.4894"></a><span id="l14.4894" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4895"></a><span id="l14.4895" class="difflineplus">+dnl = Xft and Pango</span>
<a href="#l14.4896"></a><span id="l14.4896" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4897"></a><span id="l14.4897" class="difflineplus">+if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.4898"></a><span id="l14.4898" class="difflineplus">+then</span>
<a href="#l14.4899"></a><span id="l14.4899" class="difflineplus">+    PKG_CHECK_MODULES(MOZ_XFT, xft)</span>
<a href="#l14.4900"></a><span id="l14.4900" class="difflineplus">+    AC_SUBST(MOZ_XFT_CFLAGS)</span>
<a href="#l14.4901"></a><span id="l14.4901" class="difflineplus">+    AC_SUBST(MOZ_XFT_LIBS)</span>
<a href="#l14.4902"></a><span id="l14.4902" class="difflineplus">+</span>
<a href="#l14.4903"></a><span id="l14.4903" class="difflineplus">+    PKG_CHECK_MODULES(_PANGOCHK, pango &gt;= $PANGO_VERSION)</span>
<a href="#l14.4904"></a><span id="l14.4904" class="difflineplus">+    PKG_CHECK_MODULES(MOZ_PANGO, pango &gt;= $PANGO_VERSION pangocairo &gt;= $PANGO_VERSION pangoft2 &gt;= $PANGO_VERSION)</span>
<a href="#l14.4905"></a><span id="l14.4905" class="difflineplus">+    AC_SUBST(MOZ_PANGO_CFLAGS)</span>
<a href="#l14.4906"></a><span id="l14.4906" class="difflineplus">+    AC_SUBST(MOZ_PANGO_LIBS)</span>
<a href="#l14.4907"></a><span id="l14.4907" class="difflineplus">+fi</span>
<a href="#l14.4908"></a><span id="l14.4908" class="difflineplus">+</span>
<a href="#l14.4909"></a><span id="l14.4909" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4910"></a><span id="l14.4910" class="difflineplus">+dnl = PostScript print module</span>
<a href="#l14.4911"></a><span id="l14.4911" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4912"></a><span id="l14.4912" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(postscript,</span>
<a href="#l14.4913"></a><span id="l14.4913" class="difflineplus">+[  --disable-postscript    Disable PostScript printing support ],</span>
<a href="#l14.4914"></a><span id="l14.4914" class="difflineplus">+    MOZ_ENABLE_POSTSCRIPT=,</span>
<a href="#l14.4915"></a><span id="l14.4915" class="difflineplus">+    MOZ_ENABLE_POSTSCRIPT=1 )</span>
<a href="#l14.4916"></a><span id="l14.4916" class="difflineplus">+</span>
<a href="#l14.4917"></a><span id="l14.4917" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4918"></a><span id="l14.4918" class="difflineplus">+dnl = GnomeVFS support module</span>
<a href="#l14.4919"></a><span id="l14.4919" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4920"></a><span id="l14.4920" class="difflineplus">+</span>
<a href="#l14.4921"></a><span id="l14.4921" class="difflineplus">+if test &quot;$MOZ_X11&quot;</span>
<a href="#l14.4922"></a><span id="l14.4922" class="difflineplus">+then</span>
<a href="#l14.4923"></a><span id="l14.4923" class="difflineplus">+    dnl build the gnomevfs extension by default only when the</span>
<a href="#l14.4924"></a><span id="l14.4924" class="difflineplus">+    dnl GTK2 toolkit is in use.</span>
<a href="#l14.4925"></a><span id="l14.4925" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.4926"></a><span id="l14.4926" class="difflineplus">+    then</span>
<a href="#l14.4927"></a><span id="l14.4927" class="difflineplus">+        MOZ_ENABLE_GNOMEVFS=1</span>
<a href="#l14.4928"></a><span id="l14.4928" class="difflineplus">+        MOZ_ENABLE_GCONF=1</span>
<a href="#l14.4929"></a><span id="l14.4929" class="difflineplus">+        MOZ_ENABLE_LIBGNOME=1</span>
<a href="#l14.4930"></a><span id="l14.4930" class="difflineplus">+    fi</span>
<a href="#l14.4931"></a><span id="l14.4931" class="difflineplus">+</span>
<a href="#l14.4932"></a><span id="l14.4932" class="difflineplus">+    MOZ_ARG_DISABLE_BOOL(gnomevfs,</span>
<a href="#l14.4933"></a><span id="l14.4933" class="difflineplus">+    [  --disable-gnomevfs      Disable GnomeVFS support ],</span>
<a href="#l14.4934"></a><span id="l14.4934" class="difflineplus">+        MOZ_ENABLE_GNOMEVFS=,</span>
<a href="#l14.4935"></a><span id="l14.4935" class="difflineplus">+        MOZ_ENABLE_GNOMEVFS=force)</span>
<a href="#l14.4936"></a><span id="l14.4936" class="difflineplus">+</span>
<a href="#l14.4937"></a><span id="l14.4937" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GNOMEVFS&quot;</span>
<a href="#l14.4938"></a><span id="l14.4938" class="difflineplus">+    then</span>
<a href="#l14.4939"></a><span id="l14.4939" class="difflineplus">+        PKG_CHECK_MODULES(MOZ_GNOMEVFS, gnome-vfs-2.0 &gt;= $GNOMEVFS_VERSION gnome-vfs-module-2.0 &gt;= $GNOMEVFS_VERSION,[</span>
<a href="#l14.4940"></a><span id="l14.4940" class="difflineplus">+            MOZ_GNOMEVFS_LIBS=`echo $MOZ_GNOMEVFS_LIBS | sed 's/-llinc\&gt;//'`</span>
<a href="#l14.4941"></a><span id="l14.4941" class="difflineplus">+            MOZ_ENABLE_GNOMEVFS=1</span>
<a href="#l14.4942"></a><span id="l14.4942" class="difflineplus">+        ],[</span>
<a href="#l14.4943"></a><span id="l14.4943" class="difflineplus">+            if test &quot;$MOZ_ENABLE_GNOMEVFS&quot; = &quot;force&quot;</span>
<a href="#l14.4944"></a><span id="l14.4944" class="difflineplus">+            then</span>
<a href="#l14.4945"></a><span id="l14.4945" class="difflineplus">+                AC_MSG_ERROR([* * * Could not find gnome-vfs-module-2.0 &gt;= $GNOMEVFS_VERSION])</span>
<a href="#l14.4946"></a><span id="l14.4946" class="difflineplus">+            fi</span>
<a href="#l14.4947"></a><span id="l14.4947" class="difflineplus">+            MOZ_ENABLE_GNOMEVFS=</span>
<a href="#l14.4948"></a><span id="l14.4948" class="difflineplus">+        ])</span>
<a href="#l14.4949"></a><span id="l14.4949" class="difflineplus">+    fi</span>
<a href="#l14.4950"></a><span id="l14.4950" class="difflineplus">+</span>
<a href="#l14.4951"></a><span id="l14.4951" class="difflineplus">+    AC_SUBST(MOZ_GNOMEVFS_CFLAGS)</span>
<a href="#l14.4952"></a><span id="l14.4952" class="difflineplus">+    AC_SUBST(MOZ_GNOMEVFS_LIBS)</span>
<a href="#l14.4953"></a><span id="l14.4953" class="difflineplus">+</span>
<a href="#l14.4954"></a><span id="l14.4954" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GCONF&quot;</span>
<a href="#l14.4955"></a><span id="l14.4955" class="difflineplus">+    then</span>
<a href="#l14.4956"></a><span id="l14.4956" class="difflineplus">+        PKG_CHECK_MODULES(MOZ_GCONF, gconf-2.0 &gt;= $GCONF_VERSION,[</span>
<a href="#l14.4957"></a><span id="l14.4957" class="difflineplus">+            MOZ_GCONF_LIBS=`echo $MOZ_GCONF_LIBS | sed 's/-llinc\&gt;//'`</span>
<a href="#l14.4958"></a><span id="l14.4958" class="difflineplus">+            MOZ_ENABLE_GCONF=1</span>
<a href="#l14.4959"></a><span id="l14.4959" class="difflineplus">+        ],[</span>
<a href="#l14.4960"></a><span id="l14.4960" class="difflineplus">+            MOZ_ENABLE_GCONF=</span>
<a href="#l14.4961"></a><span id="l14.4961" class="difflineplus">+        ])</span>
<a href="#l14.4962"></a><span id="l14.4962" class="difflineplus">+    fi</span>
<a href="#l14.4963"></a><span id="l14.4963" class="difflineplus">+</span>
<a href="#l14.4964"></a><span id="l14.4964" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GCONF&quot;; then</span>
<a href="#l14.4965"></a><span id="l14.4965" class="difflineplus">+        AC_DEFINE(MOZ_ENABLE_GCONF)</span>
<a href="#l14.4966"></a><span id="l14.4966" class="difflineplus">+    fi</span>
<a href="#l14.4967"></a><span id="l14.4967" class="difflineplus">+</span>
<a href="#l14.4968"></a><span id="l14.4968" class="difflineplus">+    AC_SUBST(MOZ_ENABLE_GCONF)</span>
<a href="#l14.4969"></a><span id="l14.4969" class="difflineplus">+    AC_SUBST(MOZ_GCONF_CFLAGS)</span>
<a href="#l14.4970"></a><span id="l14.4970" class="difflineplus">+    AC_SUBST(MOZ_GCONF_LIBS)</span>
<a href="#l14.4971"></a><span id="l14.4971" class="difflineplus">+</span>
<a href="#l14.4972"></a><span id="l14.4972" class="difflineplus">+    if test &quot;$MOZ_ENABLE_LIBGNOME&quot;</span>
<a href="#l14.4973"></a><span id="l14.4973" class="difflineplus">+    then</span>
<a href="#l14.4974"></a><span id="l14.4974" class="difflineplus">+        PKG_CHECK_MODULES(MOZ_LIBGNOME, libgnome-2.0 &gt;= $LIBGNOME_VERSION,[</span>
<a href="#l14.4975"></a><span id="l14.4975" class="difflineplus">+            MOZ_LIBGNOME_LIBS=`echo $MOZ_LIBGNOME_LIBS | sed 's/-llinc\&gt;//'`</span>
<a href="#l14.4976"></a><span id="l14.4976" class="difflineplus">+            MOZ_ENABLE_LIBGNOME=1</span>
<a href="#l14.4977"></a><span id="l14.4977" class="difflineplus">+        ],[</span>
<a href="#l14.4978"></a><span id="l14.4978" class="difflineplus">+            MOZ_ENABLE_LIBGNOME=</span>
<a href="#l14.4979"></a><span id="l14.4979" class="difflineplus">+        ])</span>
<a href="#l14.4980"></a><span id="l14.4980" class="difflineplus">+    fi</span>
<a href="#l14.4981"></a><span id="l14.4981" class="difflineplus">+</span>
<a href="#l14.4982"></a><span id="l14.4982" class="difflineplus">+    AC_SUBST(MOZ_LIBGNOME_CFLAGS)</span>
<a href="#l14.4983"></a><span id="l14.4983" class="difflineplus">+    AC_SUBST(MOZ_LIBGNOME_LIBS)</span>
<a href="#l14.4984"></a><span id="l14.4984" class="difflineplus">+</span>
<a href="#l14.4985"></a><span id="l14.4985" class="difflineplus">+    # The GNOME component is built if gtk2, gconf, gnome-vfs, and libgnome</span>
<a href="#l14.4986"></a><span id="l14.4986" class="difflineplus">+    # are all available.</span>
<a href="#l14.4987"></a><span id="l14.4987" class="difflineplus">+</span>
<a href="#l14.4988"></a><span id="l14.4988" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GTK2&quot; -a &quot;$MOZ_ENABLE_GCONF&quot; -a \</span>
<a href="#l14.4989"></a><span id="l14.4989" class="difflineplus">+            &quot;$MOZ_ENABLE_GNOMEVFS&quot; -a &quot;$MOZ_ENABLE_LIBGNOME&quot;; then</span>
<a href="#l14.4990"></a><span id="l14.4990" class="difflineplus">+      MOZ_ENABLE_GNOME_COMPONENT=1</span>
<a href="#l14.4991"></a><span id="l14.4991" class="difflineplus">+    else</span>
<a href="#l14.4992"></a><span id="l14.4992" class="difflineplus">+      MOZ_ENABLE_GNOME_COMPONENT=</span>
<a href="#l14.4993"></a><span id="l14.4993" class="difflineplus">+    fi</span>
<a href="#l14.4994"></a><span id="l14.4994" class="difflineplus">+</span>
<a href="#l14.4995"></a><span id="l14.4995" class="difflineplus">+    AC_SUBST(MOZ_ENABLE_GNOME_COMPONENT)</span>
<a href="#l14.4996"></a><span id="l14.4996" class="difflineplus">+fi</span>
<a href="#l14.4997"></a><span id="l14.4997" class="difflineplus">+</span>
<a href="#l14.4998"></a><span id="l14.4998" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.4999"></a><span id="l14.4999" class="difflineplus">+dnl = libgnomeui support module</span>
<a href="#l14.5000"></a><span id="l14.5000" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5001"></a><span id="l14.5001" class="difflineplus">+</span>
<a href="#l14.5002"></a><span id="l14.5002" class="difflineplus">+if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.5003"></a><span id="l14.5003" class="difflineplus">+then</span>
<a href="#l14.5004"></a><span id="l14.5004" class="difflineplus">+    MOZ_ENABLE_GNOMEUI=1</span>
<a href="#l14.5005"></a><span id="l14.5005" class="difflineplus">+</span>
<a href="#l14.5006"></a><span id="l14.5006" class="difflineplus">+    MOZ_ARG_DISABLE_BOOL(gnomeui,</span>
<a href="#l14.5007"></a><span id="l14.5007" class="difflineplus">+    [  --disable-gnomeui       Disable libgnomeui support (default: auto, optional at runtime) ],</span>
<a href="#l14.5008"></a><span id="l14.5008" class="difflineplus">+        MOZ_ENABLE_GNOMEUI=,</span>
<a href="#l14.5009"></a><span id="l14.5009" class="difflineplus">+        MOZ_ENABLE_GNOMEUI=force)</span>
<a href="#l14.5010"></a><span id="l14.5010" class="difflineplus">+</span>
<a href="#l14.5011"></a><span id="l14.5011" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GNOMEUI&quot;</span>
<a href="#l14.5012"></a><span id="l14.5012" class="difflineplus">+    then</span>
<a href="#l14.5013"></a><span id="l14.5013" class="difflineplus">+        PKG_CHECK_MODULES(MOZ_GNOMEUI, libgnomeui-2.0 &gt;= $GNOMEUI_VERSION,</span>
<a href="#l14.5014"></a><span id="l14.5014" class="difflineplus">+        [</span>
<a href="#l14.5015"></a><span id="l14.5015" class="difflineplus">+            MOZ_GNOMEUI_LIBS=`echo $MOZ_GNOMEUI_LIBS | sed 's/-llinc\&gt;//'`</span>
<a href="#l14.5016"></a><span id="l14.5016" class="difflineplus">+            MOZ_ENABLE_GNOMEUI=1</span>
<a href="#l14.5017"></a><span id="l14.5017" class="difflineplus">+        ],[</span>
<a href="#l14.5018"></a><span id="l14.5018" class="difflineplus">+            if test &quot;$MOZ_ENABLE_GNOMEUI&quot; = &quot;force&quot;</span>
<a href="#l14.5019"></a><span id="l14.5019" class="difflineplus">+            then</span>
<a href="#l14.5020"></a><span id="l14.5020" class="difflineplus">+                AC_MSG_ERROR([* * * Could not find libgnomeui-2.0 &gt;= $GNOMEUI_VERSION])</span>
<a href="#l14.5021"></a><span id="l14.5021" class="difflineplus">+            fi</span>
<a href="#l14.5022"></a><span id="l14.5022" class="difflineplus">+            MOZ_ENABLE_GNOMEUI=</span>
<a href="#l14.5023"></a><span id="l14.5023" class="difflineplus">+        ])</span>
<a href="#l14.5024"></a><span id="l14.5024" class="difflineplus">+    fi</span>
<a href="#l14.5025"></a><span id="l14.5025" class="difflineplus">+</span>
<a href="#l14.5026"></a><span id="l14.5026" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GNOMEUI&quot;; then</span>
<a href="#l14.5027"></a><span id="l14.5027" class="difflineplus">+        AC_DEFINE(MOZ_ENABLE_GNOMEUI)</span>
<a href="#l14.5028"></a><span id="l14.5028" class="difflineplus">+    fi</span>
<a href="#l14.5029"></a><span id="l14.5029" class="difflineplus">+fi</span>
<a href="#l14.5030"></a><span id="l14.5030" class="difflineplus">+AC_SUBST(MOZ_ENABLE_GNOMEUI)</span>
<a href="#l14.5031"></a><span id="l14.5031" class="difflineplus">+AC_SUBST(MOZ_GNOMEUI_CFLAGS)</span>
<a href="#l14.5032"></a><span id="l14.5032" class="difflineplus">+AC_SUBST(MOZ_GNOMEUI_LIBS)</span>
<a href="#l14.5033"></a><span id="l14.5033" class="difflineplus">+</span>
<a href="#l14.5034"></a><span id="l14.5034" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5035"></a><span id="l14.5035" class="difflineplus">+dnl = dbus support</span>
<a href="#l14.5036"></a><span id="l14.5036" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5037"></a><span id="l14.5037" class="difflineplus">+</span>
<a href="#l14.5038"></a><span id="l14.5038" class="difflineplus">+if test &quot;$MOZ_ENABLE_GTK2&quot;</span>
<a href="#l14.5039"></a><span id="l14.5039" class="difflineplus">+then</span>
<a href="#l14.5040"></a><span id="l14.5040" class="difflineplus">+    MOZ_ENABLE_DBUS=1</span>
<a href="#l14.5041"></a><span id="l14.5041" class="difflineplus">+</span>
<a href="#l14.5042"></a><span id="l14.5042" class="difflineplus">+    MOZ_ARG_DISABLE_BOOL(dbus,</span>
<a href="#l14.5043"></a><span id="l14.5043" class="difflineplus">+    [  --disable-dbus       Disable dbus support ],</span>
<a href="#l14.5044"></a><span id="l14.5044" class="difflineplus">+        MOZ_ENABLE_DBUS=,</span>
<a href="#l14.5045"></a><span id="l14.5045" class="difflineplus">+        MOZ_ENABLE_DBUS=1)</span>
<a href="#l14.5046"></a><span id="l14.5046" class="difflineplus">+</span>
<a href="#l14.5047"></a><span id="l14.5047" class="difflineplus">+    if test &quot;$MOZ_ENABLE_DBUS&quot;</span>
<a href="#l14.5048"></a><span id="l14.5048" class="difflineplus">+    then</span>
<a href="#l14.5049"></a><span id="l14.5049" class="difflineplus">+        PKG_CHECK_MODULES(MOZ_DBUS_GLIB, dbus-glib-1 &gt;= $DBUS_VERSION)</span>
<a href="#l14.5050"></a><span id="l14.5050" class="difflineplus">+        AC_DEFINE(MOZ_ENABLE_DBUS)</span>
<a href="#l14.5051"></a><span id="l14.5051" class="difflineplus">+    fi</span>
<a href="#l14.5052"></a><span id="l14.5052" class="difflineplus">+fi</span>
<a href="#l14.5053"></a><span id="l14.5053" class="difflineplus">+AC_SUBST(MOZ_ENABLE_DBUS)</span>
<a href="#l14.5054"></a><span id="l14.5054" class="difflineplus">+AC_SUBST(MOZ_DBUS_GLIB_CFLAGS)</span>
<a href="#l14.5055"></a><span id="l14.5055" class="difflineplus">+AC_SUBST(MOZ_DBUS_GLIB_LIBS)</span>
<a href="#l14.5056"></a><span id="l14.5056" class="difflineplus">+</span>
<a href="#l14.5057"></a><span id="l14.5057" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5058"></a><span id="l14.5058" class="difflineplus">+dnl = Build Personal Security Manager</span>
<a href="#l14.5059"></a><span id="l14.5059" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5060"></a><span id="l14.5060" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(crypto,</span>
<a href="#l14.5061"></a><span id="l14.5061" class="difflineplus">+[  --disable-crypto        Disable crypto support (Personal Security Manager)],</span>
<a href="#l14.5062"></a><span id="l14.5062" class="difflineplus">+    MOZ_PSM=,</span>
<a href="#l14.5063"></a><span id="l14.5063" class="difflineplus">+    MOZ_PSM=1 )</span>
<a href="#l14.5064"></a><span id="l14.5064" class="difflineplus">+</span>
<a href="#l14.5065"></a><span id="l14.5065" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5066"></a><span id="l14.5066" class="difflineplus">+dnl = JS Debugger XPCOM component (js/jsd)</span>
<a href="#l14.5067"></a><span id="l14.5067" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5068"></a><span id="l14.5068" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(jsd,</span>
<a href="#l14.5069"></a><span id="l14.5069" class="difflineplus">+[  --disable-jsd           Disable JavaScript debug library],</span>
<a href="#l14.5070"></a><span id="l14.5070" class="difflineplus">+    MOZ_JSDEBUGGER=,</span>
<a href="#l14.5071"></a><span id="l14.5071" class="difflineplus">+    MOZ_JSDEBUGGER=1)</span>
<a href="#l14.5072"></a><span id="l14.5072" class="difflineplus">+</span>
<a href="#l14.5073"></a><span id="l14.5073" class="difflineplus">+</span>
<a href="#l14.5074"></a><span id="l14.5074" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5075"></a><span id="l14.5075" class="difflineplus">+dnl = Disable plugin support</span>
<a href="#l14.5076"></a><span id="l14.5076" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5077"></a><span id="l14.5077" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(plugins,</span>
<a href="#l14.5078"></a><span id="l14.5078" class="difflineplus">+[  --disable-plugins       Disable plugins support],</span>
<a href="#l14.5079"></a><span id="l14.5079" class="difflineplus">+    MOZ_PLUGINS=,</span>
<a href="#l14.5080"></a><span id="l14.5080" class="difflineplus">+    MOZ_PLUGINS=1)</span>
<a href="#l14.5081"></a><span id="l14.5081" class="difflineplus">+</span>
<a href="#l14.5082"></a><span id="l14.5082" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5083"></a><span id="l14.5083" class="difflineplus">+dnl = Open JVM Interface (OJI) support</span>
<a href="#l14.5084"></a><span id="l14.5084" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5085"></a><span id="l14.5085" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(oji,</span>
<a href="#l14.5086"></a><span id="l14.5086" class="difflineplus">+[  --enable-oji           Enable Open JVM Integration support],</span>
<a href="#l14.5087"></a><span id="l14.5087" class="difflineplus">+    MOZ_OJI=1,</span>
<a href="#l14.5088"></a><span id="l14.5088" class="difflineplus">+    MOZ_OJI=)</span>
<a href="#l14.5089"></a><span id="l14.5089" class="difflineplus">+if test -n &quot;$MOZ_OJI&quot;; then</span>
<a href="#l14.5090"></a><span id="l14.5090" class="difflineplus">+    AC_DEFINE(OJI)</span>
<a href="#l14.5091"></a><span id="l14.5091" class="difflineplus">+fi</span>
<a href="#l14.5092"></a><span id="l14.5092" class="difflineplus">+</span>
<a href="#l14.5093"></a><span id="l14.5093" class="difflineplus">+dnl bi-directional support always on</span>
<a href="#l14.5094"></a><span id="l14.5094" class="difflineplus">+IBMBIDI=1</span>
<a href="#l14.5095"></a><span id="l14.5095" class="difflineplus">+AC_DEFINE(IBMBIDI)</span>
<a href="#l14.5096"></a><span id="l14.5096" class="difflineplus">+</span>
<a href="#l14.5097"></a><span id="l14.5097" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5098"></a><span id="l14.5098" class="difflineplus">+dnl complex text support off by default</span>
<a href="#l14.5099"></a><span id="l14.5099" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5100"></a><span id="l14.5100" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(ctl,</span>
<a href="#l14.5101"></a><span id="l14.5101" class="difflineplus">+[  --enable-ctl            Enable Thai Complex Script support],</span>
<a href="#l14.5102"></a><span id="l14.5102" class="difflineplus">+    SUNCTL=1,</span>
<a href="#l14.5103"></a><span id="l14.5103" class="difflineplus">+    SUNCTL= )</span>
<a href="#l14.5104"></a><span id="l14.5104" class="difflineplus">+</span>
<a href="#l14.5105"></a><span id="l14.5105" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5106"></a><span id="l14.5106" class="difflineplus">+dnl view source support on by default</span>
<a href="#l14.5107"></a><span id="l14.5107" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5108"></a><span id="l14.5108" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(view-source,</span>
<a href="#l14.5109"></a><span id="l14.5109" class="difflineplus">+[  --disable-view-source     Disable view source support],</span>
<a href="#l14.5110"></a><span id="l14.5110" class="difflineplus">+    MOZ_VIEW_SOURCE=,</span>
<a href="#l14.5111"></a><span id="l14.5111" class="difflineplus">+    MOZ_VIEW_SOURCE=1 )</span>
<a href="#l14.5112"></a><span id="l14.5112" class="difflineplus">+if test &quot;$MOZ_VIEW_SOURCE&quot;; then</span>
<a href="#l14.5113"></a><span id="l14.5113" class="difflineplus">+    AC_DEFINE(MOZ_VIEW_SOURCE)</span>
<a href="#l14.5114"></a><span id="l14.5114" class="difflineplus">+fi</span>
<a href="#l14.5115"></a><span id="l14.5115" class="difflineplus">+</span>
<a href="#l14.5116"></a><span id="l14.5116" class="difflineplus">+</span>
<a href="#l14.5117"></a><span id="l14.5117" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5118"></a><span id="l14.5118" class="difflineplus">+dnl accessibility support on by default on all platforms </span>
<a href="#l14.5119"></a><span id="l14.5119" class="difflineplus">+dnl except OS X.</span>
<a href="#l14.5120"></a><span id="l14.5120" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5121"></a><span id="l14.5121" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(accessibility,</span>
<a href="#l14.5122"></a><span id="l14.5122" class="difflineplus">+[  --disable-accessibility Disable accessibility support (off by default on OS X)],</span>
<a href="#l14.5123"></a><span id="l14.5123" class="difflineplus">+    ACCESSIBILITY=,</span>
<a href="#l14.5124"></a><span id="l14.5124" class="difflineplus">+    ACCESSIBILITY=1 )</span>
<a href="#l14.5125"></a><span id="l14.5125" class="difflineplus">+if test &quot;$ACCESSIBILITY&quot;; then</span>
<a href="#l14.5126"></a><span id="l14.5126" class="difflineplus">+    AC_DEFINE(ACCESSIBILITY)</span>
<a href="#l14.5127"></a><span id="l14.5127" class="difflineplus">+fi</span>
<a href="#l14.5128"></a><span id="l14.5128" class="difflineplus">+</span>
<a href="#l14.5129"></a><span id="l14.5129" class="difflineplus">+if test -n &quot;$ACCESSIBILITY&quot;; then</span>
<a href="#l14.5130"></a><span id="l14.5130" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.5131"></a><span id="l14.5131" class="difflineplus">+*-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l14.5132"></a><span id="l14.5132" class="difflineplus">+    if test &quot;$ac_cv_header_atlbase_h&quot; = &quot;no&quot;; then</span>
<a href="#l14.5133"></a><span id="l14.5133" class="difflineplus">+        AC_MSG_ERROR([System header atlbase.h is not available. See http://developer.mozilla.org/en/docs/atlbase.h for details on fixing this problem.])</span>
<a href="#l14.5134"></a><span id="l14.5134" class="difflineplus">+    fi</span>
<a href="#l14.5135"></a><span id="l14.5135" class="difflineplus">+    if test &quot;$ac_cv_header_oleacc_idl&quot; = &quot;no&quot;; then</span>
<a href="#l14.5136"></a><span id="l14.5136" class="difflineplus">+        AC_MSG_ERROR([System header oleacc.idl is not available. See http://developer.mozilla.org/en/docs/oleacc.idl for details on fixing this problem.])</span>
<a href="#l14.5137"></a><span id="l14.5137" class="difflineplus">+    fi</span>
<a href="#l14.5138"></a><span id="l14.5138" class="difflineplus">+    ;;</span>
<a href="#l14.5139"></a><span id="l14.5139" class="difflineplus">+esac</span>
<a href="#l14.5140"></a><span id="l14.5140" class="difflineplus">+fi</span>
<a href="#l14.5141"></a><span id="l14.5141" class="difflineplus">+</span>
<a href="#l14.5142"></a><span id="l14.5142" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5143"></a><span id="l14.5143" class="difflineplus">+dnl xpfe/components on by default</span>
<a href="#l14.5144"></a><span id="l14.5144" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5145"></a><span id="l14.5145" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xpfe-components,</span>
<a href="#l14.5146"></a><span id="l14.5146" class="difflineplus">+[  --disable-xpfe-components</span>
<a href="#l14.5147"></a><span id="l14.5147" class="difflineplus">+                          Disable xpfe components],</span>
<a href="#l14.5148"></a><span id="l14.5148" class="difflineplus">+    MOZ_XPFE_COMPONENTS=,</span>
<a href="#l14.5149"></a><span id="l14.5149" class="difflineplus">+    MOZ_XPFE_COMPONENTS=1 )</span>
<a href="#l14.5150"></a><span id="l14.5150" class="difflineplus">+</span>
<a href="#l14.5151"></a><span id="l14.5151" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5152"></a><span id="l14.5152" class="difflineplus">+dnl xpinstall support on by default</span>
<a href="#l14.5153"></a><span id="l14.5153" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5154"></a><span id="l14.5154" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xpinstall,</span>
<a href="#l14.5155"></a><span id="l14.5155" class="difflineplus">+[  --disable-xpinstall     Disable xpinstall support],</span>
<a href="#l14.5156"></a><span id="l14.5156" class="difflineplus">+    MOZ_XPINSTALL=,</span>
<a href="#l14.5157"></a><span id="l14.5157" class="difflineplus">+    MOZ_XPINSTALL=1 )</span>
<a href="#l14.5158"></a><span id="l14.5158" class="difflineplus">+if test &quot;$MOZ_XPINSTALL&quot;; then</span>
<a href="#l14.5159"></a><span id="l14.5159" class="difflineplus">+    AC_DEFINE(MOZ_XPINSTALL)</span>
<a href="#l14.5160"></a><span id="l14.5160" class="difflineplus">+fi</span>
<a href="#l14.5161"></a><span id="l14.5161" class="difflineplus">+</span>
<a href="#l14.5162"></a><span id="l14.5162" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5163"></a><span id="l14.5163" class="difflineplus">+dnl xpcom js loader support on by default</span>
<a href="#l14.5164"></a><span id="l14.5164" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5165"></a><span id="l14.5165" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(jsloader,</span>
<a href="#l14.5166"></a><span id="l14.5166" class="difflineplus">+[  --disable-jsloader      Disable xpcom js loader support],</span>
<a href="#l14.5167"></a><span id="l14.5167" class="difflineplus">+    MOZ_JSLOADER=,</span>
<a href="#l14.5168"></a><span id="l14.5168" class="difflineplus">+    MOZ_JSLOADER=1 )</span>
<a href="#l14.5169"></a><span id="l14.5169" class="difflineplus">+if test &quot;$MOZ_JSLOADER&quot;; then</span>
<a href="#l14.5170"></a><span id="l14.5170" class="difflineplus">+    AC_DEFINE(MOZ_JSLOADER)</span>
<a href="#l14.5171"></a><span id="l14.5171" class="difflineplus">+fi</span>
<a href="#l14.5172"></a><span id="l14.5172" class="difflineplus">+</span>
<a href="#l14.5173"></a><span id="l14.5173" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5174"></a><span id="l14.5174" class="difflineplus">+dnl Disable printing</span>
<a href="#l14.5175"></a><span id="l14.5175" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5176"></a><span id="l14.5176" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(printing,</span>
<a href="#l14.5177"></a><span id="l14.5177" class="difflineplus">+[  --disable-printing  Disable printing support],</span>
<a href="#l14.5178"></a><span id="l14.5178" class="difflineplus">+    NS_PRINTING=,</span>
<a href="#l14.5179"></a><span id="l14.5179" class="difflineplus">+    NS_PRINTING=1 )</span>
<a href="#l14.5180"></a><span id="l14.5180" class="difflineplus">+</span>
<a href="#l14.5181"></a><span id="l14.5181" class="difflineplus">+if test &quot;$NS_PRINTING&quot;; then</span>
<a href="#l14.5182"></a><span id="l14.5182" class="difflineplus">+    AC_DEFINE(NS_PRINTING)</span>
<a href="#l14.5183"></a><span id="l14.5183" class="difflineplus">+    AC_DEFINE(NS_PRINT_PREVIEW)</span>
<a href="#l14.5184"></a><span id="l14.5184" class="difflineplus">+fi</span>
<a href="#l14.5185"></a><span id="l14.5185" class="difflineplus">+</span>
<a href="#l14.5186"></a><span id="l14.5186" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5187"></a><span id="l14.5187" class="difflineplus">+dnl use native unicode converters</span>
<a href="#l14.5188"></a><span id="l14.5188" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5189"></a><span id="l14.5189" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(native-uconv,</span>
<a href="#l14.5190"></a><span id="l14.5190" class="difflineplus">+[  --enable-native-uconv   Enable iconv support],</span>
<a href="#l14.5191"></a><span id="l14.5191" class="difflineplus">+    MOZ_USE_NATIVE_UCONV=1,</span>
<a href="#l14.5192"></a><span id="l14.5192" class="difflineplus">+    MOZ_USE_NATIVE_UCONV= )</span>
<a href="#l14.5193"></a><span id="l14.5193" class="difflineplus">+if test &quot;$MOZ_USE_NATIVE_UCONV&quot;; then</span>
<a href="#l14.5194"></a><span id="l14.5194" class="difflineplus">+    AC_DEFINE(MOZ_USE_NATIVE_UCONV)</span>
<a href="#l14.5195"></a><span id="l14.5195" class="difflineplus">+fi</span>
<a href="#l14.5196"></a><span id="l14.5196" class="difflineplus">+if test &quot;$OS_ARCH&quot; != &quot;WINCE&quot; -a &quot;$OS_ARCH&quot; != &quot;WINNT&quot; -a &quot;$MOZ_USE_NATIVE_UCONV&quot; -a &quot;$ac_cv_func_iconv&quot; != &quot;yes&quot;; then</span>
<a href="#l14.5197"></a><span id="l14.5197" class="difflineplus">+    AC_MSG_ERROR([iconv() not found.  Cannot enable native uconv support.])</span>
<a href="#l14.5198"></a><span id="l14.5198" class="difflineplus">+fi</span>
<a href="#l14.5199"></a><span id="l14.5199" class="difflineplus">+</span>
<a href="#l14.5200"></a><span id="l14.5200" class="difflineplus">+</span>
<a href="#l14.5201"></a><span id="l14.5201" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5202"></a><span id="l14.5202" class="difflineplus">+dnl Libeditor can be build as plaintext-only,</span>
<a href="#l14.5203"></a><span id="l14.5203" class="difflineplus">+dnl or as a full html and text editing component.</span>
<a href="#l14.5204"></a><span id="l14.5204" class="difflineplus">+dnl We build both by default.</span>
<a href="#l14.5205"></a><span id="l14.5205" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5206"></a><span id="l14.5206" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(plaintext-editor-only,</span>
<a href="#l14.5207"></a><span id="l14.5207" class="difflineplus">+[  --enable-plaintext-editor-only</span>
<a href="#l14.5208"></a><span id="l14.5208" class="difflineplus">+                          Allow only plaintext editing],</span>
<a href="#l14.5209"></a><span id="l14.5209" class="difflineplus">+    MOZ_PLAINTEXT_EDITOR_ONLY=1,</span>
<a href="#l14.5210"></a><span id="l14.5210" class="difflineplus">+    MOZ_PLAINTEXT_EDITOR_ONLY= )</span>
<a href="#l14.5211"></a><span id="l14.5211" class="difflineplus">+dnl Note the #define is MOZILLA, not MOZ, for compat with the Mac build.</span>
<a href="#l14.5212"></a><span id="l14.5212" class="difflineplus">+AC_SUBST(MOZ_PLAINTEXT_EDITOR_ONLY)</span>
<a href="#l14.5213"></a><span id="l14.5213" class="difflineplus">+</span>
<a href="#l14.5214"></a><span id="l14.5214" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5215"></a><span id="l14.5215" class="difflineplus">+dnl Composer is on by default.</span>
<a href="#l14.5216"></a><span id="l14.5216" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5217"></a><span id="l14.5217" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(composer,</span>
<a href="#l14.5218"></a><span id="l14.5218" class="difflineplus">+[  --disable-composer      Disable building of Composer],</span>
<a href="#l14.5219"></a><span id="l14.5219" class="difflineplus">+    MOZ_COMPOSER=,</span>
<a href="#l14.5220"></a><span id="l14.5220" class="difflineplus">+    MOZ_COMPOSER=1 )</span>
<a href="#l14.5221"></a><span id="l14.5221" class="difflineplus">+AC_SUBST(MOZ_COMPOSER)</span>
<a href="#l14.5222"></a><span id="l14.5222" class="difflineplus">+</span>
<a href="#l14.5223"></a><span id="l14.5223" class="difflineplus">+</span>
<a href="#l14.5224"></a><span id="l14.5224" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5225"></a><span id="l14.5225" class="difflineplus">+dnl = Drop XPCOM Obsolete library</span>
<a href="#l14.5226"></a><span id="l14.5226" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5227"></a><span id="l14.5227" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xpcom-obsolete,</span>
<a href="#l14.5228"></a><span id="l14.5228" class="difflineplus">+[  --disable-xpcom-obsolete           Disable XPCOM Obsolete Library],</span>
<a href="#l14.5229"></a><span id="l14.5229" class="difflineplus">+    MOZ_NO_XPCOM_OBSOLETE=1,</span>
<a href="#l14.5230"></a><span id="l14.5230" class="difflineplus">+    MOZ_NO_XPCOM_OBSOLETE=)</span>
<a href="#l14.5231"></a><span id="l14.5231" class="difflineplus">+</span>
<a href="#l14.5232"></a><span id="l14.5232" class="difflineplus">+if test -n &quot;$MOZ_NO_XPCOM_OBSOLETE&quot;; then</span>
<a href="#l14.5233"></a><span id="l14.5233" class="difflineplus">+    AC_DEFINE(MOZ_NO_XPCOM_OBSOLETE)</span>
<a href="#l14.5234"></a><span id="l14.5234" class="difflineplus">+fi</span>
<a href="#l14.5235"></a><span id="l14.5235" class="difflineplus">+</span>
<a href="#l14.5236"></a><span id="l14.5236" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5237"></a><span id="l14.5237" class="difflineplus">+dnl = Disable Fast Load</span>
<a href="#l14.5238"></a><span id="l14.5238" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5239"></a><span id="l14.5239" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xpcom-fastload,</span>
<a href="#l14.5240"></a><span id="l14.5240" class="difflineplus">+[  --disable-xpcom-fastload           Disable XPCOM fastload support],</span>
<a href="#l14.5241"></a><span id="l14.5241" class="difflineplus">+    MOZ_NO_FAST_LOAD=1,</span>
<a href="#l14.5242"></a><span id="l14.5242" class="difflineplus">+    MOZ_NO_FAST_LOAD=)</span>
<a href="#l14.5243"></a><span id="l14.5243" class="difflineplus">+</span>
<a href="#l14.5244"></a><span id="l14.5244" class="difflineplus">+AC_SUBST(MOZ_NO_FAST_LOAD)</span>
<a href="#l14.5245"></a><span id="l14.5245" class="difflineplus">+</span>
<a href="#l14.5246"></a><span id="l14.5246" class="difflineplus">+if test -n &quot;$MOZ_NO_FAST_LOAD&quot;; then</span>
<a href="#l14.5247"></a><span id="l14.5247" class="difflineplus">+    AC_DEFINE(MOZ_NO_FAST_LOAD)</span>
<a href="#l14.5248"></a><span id="l14.5248" class="difflineplus">+fi</span>
<a href="#l14.5249"></a><span id="l14.5249" class="difflineplus">+</span>
<a href="#l14.5250"></a><span id="l14.5250" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5251"></a><span id="l14.5251" class="difflineplus">+dnl Permissions System</span>
<a href="#l14.5252"></a><span id="l14.5252" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5253"></a><span id="l14.5253" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(permissions,</span>
<a href="#l14.5254"></a><span id="l14.5254" class="difflineplus">+[  --disable-permissions   Disable permissions (popup and cookie blocking)],</span>
<a href="#l14.5255"></a><span id="l14.5255" class="difflineplus">+    MOZ_PERMISSIONS=,</span>
<a href="#l14.5256"></a><span id="l14.5256" class="difflineplus">+    MOZ_PERMISSIONS=1</span>
<a href="#l14.5257"></a><span id="l14.5257" class="difflineplus">+)</span>
<a href="#l14.5258"></a><span id="l14.5258" class="difflineplus">+</span>
<a href="#l14.5259"></a><span id="l14.5259" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5260"></a><span id="l14.5260" class="difflineplus">+dnl NegotiateAuth</span>
<a href="#l14.5261"></a><span id="l14.5261" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5262"></a><span id="l14.5262" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(negotiateauth,</span>
<a href="#l14.5263"></a><span id="l14.5263" class="difflineplus">+[  --disable-negotiateauth Disable GSS-API negotiation ],</span>
<a href="#l14.5264"></a><span id="l14.5264" class="difflineplus">+    MOZ_AUTH_EXTENSION=,</span>
<a href="#l14.5265"></a><span id="l14.5265" class="difflineplus">+    MOZ_AUTH_EXTENSION=1 )</span>
<a href="#l14.5266"></a><span id="l14.5266" class="difflineplus">+</span>
<a href="#l14.5267"></a><span id="l14.5267" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5268"></a><span id="l14.5268" class="difflineplus">+dnl XTF</span>
<a href="#l14.5269"></a><span id="l14.5269" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5270"></a><span id="l14.5270" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xtf,</span>
<a href="#l14.5271"></a><span id="l14.5271" class="difflineplus">+[  --disable-xtf           Disable XTF (pluggable xml tags) support],</span>
<a href="#l14.5272"></a><span id="l14.5272" class="difflineplus">+    MOZ_XTF=,</span>
<a href="#l14.5273"></a><span id="l14.5273" class="difflineplus">+    MOZ_XTF=1 )</span>
<a href="#l14.5274"></a><span id="l14.5274" class="difflineplus">+if test &quot;$MOZ_XTF&quot;; then</span>
<a href="#l14.5275"></a><span id="l14.5275" class="difflineplus">+  AC_DEFINE(MOZ_XTF)</span>
<a href="#l14.5276"></a><span id="l14.5276" class="difflineplus">+fi</span>
<a href="#l14.5277"></a><span id="l14.5277" class="difflineplus">+</span>
<a href="#l14.5278"></a><span id="l14.5278" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5279"></a><span id="l14.5279" class="difflineplus">+dnl Inspector APIs</span>
<a href="#l14.5280"></a><span id="l14.5280" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5281"></a><span id="l14.5281" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(inspector-apis,</span>
<a href="#l14.5282"></a><span id="l14.5282" class="difflineplus">+[  --disable-inspector-apis Disable the DOM inspection APIs ],</span>
<a href="#l14.5283"></a><span id="l14.5283" class="difflineplus">+    MOZ_NO_INSPECTOR_APIS=1,</span>
<a href="#l14.5284"></a><span id="l14.5284" class="difflineplus">+    MOZ_NO_INSPECTOR_APIS= )</span>
<a href="#l14.5285"></a><span id="l14.5285" class="difflineplus">+</span>
<a href="#l14.5286"></a><span id="l14.5286" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5287"></a><span id="l14.5287" class="difflineplus">+dnl Pref extensions (autoconfig and system-pref)</span>
<a href="#l14.5288"></a><span id="l14.5288" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5289"></a><span id="l14.5289" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(pref-extensions,</span>
<a href="#l14.5290"></a><span id="l14.5290" class="difflineplus">+[  --disable-pref-extensions</span>
<a href="#l14.5291"></a><span id="l14.5291" class="difflineplus">+                          Disable pref extensions such as autoconfig and</span>
<a href="#l14.5292"></a><span id="l14.5292" class="difflineplus">+                          system-pref],</span>
<a href="#l14.5293"></a><span id="l14.5293" class="difflineplus">+  MOZ_PREF_EXTENSIONS=,</span>
<a href="#l14.5294"></a><span id="l14.5294" class="difflineplus">+  MOZ_PREF_EXTENSIONS=1 )</span>
<a href="#l14.5295"></a><span id="l14.5295" class="difflineplus">+</span>
<a href="#l14.5296"></a><span id="l14.5296" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5297"></a><span id="l14.5297" class="difflineplus">+dnl = Universalchardet</span>
<a href="#l14.5298"></a><span id="l14.5298" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5299"></a><span id="l14.5299" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(universalchardet,</span>
<a href="#l14.5300"></a><span id="l14.5300" class="difflineplus">+[  --disable-universalchardet</span>
<a href="#l14.5301"></a><span id="l14.5301" class="difflineplus">+                          Disable universal encoding detection],</span>
<a href="#l14.5302"></a><span id="l14.5302" class="difflineplus">+  MOZ_UNIVERSALCHARDET=,</span>
<a href="#l14.5303"></a><span id="l14.5303" class="difflineplus">+  MOZ_UNIVERSALCHARDET=1 )</span>
<a href="#l14.5304"></a><span id="l14.5304" class="difflineplus">+</span>
<a href="#l14.5305"></a><span id="l14.5305" class="difflineplus">+</span>
<a href="#l14.5306"></a><span id="l14.5306" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5307"></a><span id="l14.5307" class="difflineplus">+dnl = Build mochitest JS/DOM tests (on by default)</span>
<a href="#l14.5308"></a><span id="l14.5308" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5309"></a><span id="l14.5309" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(mochitest,</span>
<a href="#l14.5310"></a><span id="l14.5310" class="difflineplus">+[  --disable-mochitest        Disable mochitest harness],</span>
<a href="#l14.5311"></a><span id="l14.5311" class="difflineplus">+    MOZ_MOCHITEST=,</span>
<a href="#l14.5312"></a><span id="l14.5312" class="difflineplus">+    MOZ_MOCHITEST=1 )</span>
<a href="#l14.5313"></a><span id="l14.5313" class="difflineplus">+</span>
<a href="#l14.5314"></a><span id="l14.5314" class="difflineplus">+</span>
<a href="#l14.5315"></a><span id="l14.5315" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5316"></a><span id="l14.5316" class="difflineplus">+dnl experimental ldap features</span>
<a href="#l14.5317"></a><span id="l14.5317" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5318"></a><span id="l14.5318" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(ldap-experimental,</span>
<a href="#l14.5319"></a><span id="l14.5319" class="difflineplus">+[  --enable-ldap-experimental</span>
<a href="#l14.5320"></a><span id="l14.5320" class="difflineplus">+                          Enable LDAP experimental features],</span>
<a href="#l14.5321"></a><span id="l14.5321" class="difflineplus">+    MOZ_LDAP_XPCOM_EXPERIMENTAL=1,</span>
<a href="#l14.5322"></a><span id="l14.5322" class="difflineplus">+    MOZ_LDAP_XPCOM_EXPERIMENTAL=)</span>
<a href="#l14.5323"></a><span id="l14.5323" class="difflineplus">+</span>
<a href="#l14.5324"></a><span id="l14.5324" class="difflineplus">+</span>
<a href="#l14.5325"></a><span id="l14.5325" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5326"></a><span id="l14.5326" class="difflineplus">+dnl Installer</span>
<a href="#l14.5327"></a><span id="l14.5327" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5328"></a><span id="l14.5328" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.5329"></a><span id="l14.5329" class="difflineplus">+    aix*|solaris*|linux*|msvc*|mks*|cygwin*|mingw*|os2*|wince*)</span>
<a href="#l14.5330"></a><span id="l14.5330" class="difflineplus">+        MOZ_INSTALLER=1</span>
<a href="#l14.5331"></a><span id="l14.5331" class="difflineplus">+        ;;</span>
<a href="#l14.5332"></a><span id="l14.5332" class="difflineplus">+esac</span>
<a href="#l14.5333"></a><span id="l14.5333" class="difflineplus">+</span>
<a href="#l14.5334"></a><span id="l14.5334" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(installer,</span>
<a href="#l14.5335"></a><span id="l14.5335" class="difflineplus">+[  --disable-installer     Disable building of installer],</span>
<a href="#l14.5336"></a><span id="l14.5336" class="difflineplus">+    MOZ_INSTALLER=,</span>
<a href="#l14.5337"></a><span id="l14.5337" class="difflineplus">+    MOZ_INSTALLER=1 )</span>
<a href="#l14.5338"></a><span id="l14.5338" class="difflineplus">+if test -n &quot;$MOZ_INSTALLER&quot; -a -n &quot;$MOZ_XUL_APP&quot; -a &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l14.5339"></a><span id="l14.5339" class="difflineplus">+    # Disable installer for Windows builds that use the new toolkit if NSIS</span>
<a href="#l14.5340"></a><span id="l14.5340" class="difflineplus">+    # isn't in the path.</span>
<a href="#l14.5341"></a><span id="l14.5341" class="difflineplus">+    AC_PATH_PROGS(MAKENSIS, makensis)</span>
<a href="#l14.5342"></a><span id="l14.5342" class="difflineplus">+    if test -z &quot;$MAKENSIS&quot; || test &quot;$MAKENSIS&quot; = &quot;:&quot;; then</span>
<a href="#l14.5343"></a><span id="l14.5343" class="difflineplus">+        AC_MSG_ERROR([To build the installer makensis is required in your path. To build without the installer reconfigure using --disable-installer.])</span>
<a href="#l14.5344"></a><span id="l14.5344" class="difflineplus">+    fi</span>
<a href="#l14.5345"></a><span id="l14.5345" class="difflineplus">+    # The Windows build for NSIS requires the iconv command line utility to</span>
<a href="#l14.5346"></a><span id="l14.5346" class="difflineplus">+    # convert the charset of the locale files.</span>
<a href="#l14.5347"></a><span id="l14.5347" class="difflineplus">+    AC_PATH_PROGS(HOST_ICONV, $HOST_ICONV &quot;iconv&quot;, &quot;&quot;)</span>
<a href="#l14.5348"></a><span id="l14.5348" class="difflineplus">+    if test -z &quot;$HOST_ICONV&quot;; then</span>
<a href="#l14.5349"></a><span id="l14.5349" class="difflineplus">+        AC_MSG_ERROR([To build the installer iconv is required in your path. To build without the installer reconfigure using --disable-installer.])</span>
<a href="#l14.5350"></a><span id="l14.5350" class="difflineplus">+    fi</span>
<a href="#l14.5351"></a><span id="l14.5351" class="difflineplus">+fi</span>
<a href="#l14.5352"></a><span id="l14.5352" class="difflineplus">+</span>
<a href="#l14.5353"></a><span id="l14.5353" class="difflineplus">+# Automatically disable installer if xpinstall isn't built</span>
<a href="#l14.5354"></a><span id="l14.5354" class="difflineplus">+if test -z &quot;$MOZ_XPINSTALL&quot;; then</span>
<a href="#l14.5355"></a><span id="l14.5355" class="difflineplus">+    MOZ_INSTALLER=</span>
<a href="#l14.5356"></a><span id="l14.5356" class="difflineplus">+fi</span>
<a href="#l14.5357"></a><span id="l14.5357" class="difflineplus">+AC_SUBST(MOZ_INSTALLER)</span>
<a href="#l14.5358"></a><span id="l14.5358" class="difflineplus">+</span>
<a href="#l14.5359"></a><span id="l14.5359" class="difflineplus">+AC_MSG_CHECKING([for tar archiver])</span>
<a href="#l14.5360"></a><span id="l14.5360" class="difflineplus">+AC_CHECK_PROGS(TAR, gnutar gtar tar, &quot;&quot;)</span>
<a href="#l14.5361"></a><span id="l14.5361" class="difflineplus">+if test -z &quot;$TAR&quot;; then</span>
<a href="#l14.5362"></a><span id="l14.5362" class="difflineplus">+    AC_MSG_ERROR([no tar archiver found in \$PATH])</span>
<a href="#l14.5363"></a><span id="l14.5363" class="difflineplus">+fi</span>
<a href="#l14.5364"></a><span id="l14.5364" class="difflineplus">+AC_MSG_RESULT([$TAR])</span>
<a href="#l14.5365"></a><span id="l14.5365" class="difflineplus">+AC_SUBST(TAR)</span>
<a href="#l14.5366"></a><span id="l14.5366" class="difflineplus">+</span>
<a href="#l14.5367"></a><span id="l14.5367" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5368"></a><span id="l14.5368" class="difflineplus">+dnl Updater</span>
<a href="#l14.5369"></a><span id="l14.5369" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5370"></a><span id="l14.5370" class="difflineplus">+</span>
<a href="#l14.5371"></a><span id="l14.5371" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(updater,</span>
<a href="#l14.5372"></a><span id="l14.5372" class="difflineplus">+[  --disable-updater       Disable building of updater],</span>
<a href="#l14.5373"></a><span id="l14.5373" class="difflineplus">+    MOZ_UPDATER=,</span>
<a href="#l14.5374"></a><span id="l14.5374" class="difflineplus">+    MOZ_UPDATER=1 )</span>
<a href="#l14.5375"></a><span id="l14.5375" class="difflineplus">+# The Windows build requires the iconv command line utility</span>
<a href="#l14.5376"></a><span id="l14.5376" class="difflineplus">+# in order to build the updater.</span>
<a href="#l14.5377"></a><span id="l14.5377" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.5378"></a><span id="l14.5378" class="difflineplus">+    msvc*|mks*|cygwin*|mingw*|wince*)</span>
<a href="#l14.5379"></a><span id="l14.5379" class="difflineplus">+        if test -n &quot;$MOZ_UPDATER&quot;; then</span>
<a href="#l14.5380"></a><span id="l14.5380" class="difflineplus">+            AC_MSG_CHECKING([for iconv])</span>
<a href="#l14.5381"></a><span id="l14.5381" class="difflineplus">+            AC_CHECK_PROGS(HOST_ICONV, $HOST_ICONV &quot;iconv&quot;, &quot;&quot;)</span>
<a href="#l14.5382"></a><span id="l14.5382" class="difflineplus">+            if test -z &quot;$HOST_ICONV&quot;; then</span>
<a href="#l14.5383"></a><span id="l14.5383" class="difflineplus">+                AC_MSG_ERROR([iconv not found in \$PATH])</span>
<a href="#l14.5384"></a><span id="l14.5384" class="difflineplus">+            fi</span>
<a href="#l14.5385"></a><span id="l14.5385" class="difflineplus">+        fi</span>
<a href="#l14.5386"></a><span id="l14.5386" class="difflineplus">+        ;;</span>
<a href="#l14.5387"></a><span id="l14.5387" class="difflineplus">+esac</span>
<a href="#l14.5388"></a><span id="l14.5388" class="difflineplus">+AC_SUBST(MOZ_UPDATER)</span>
<a href="#l14.5389"></a><span id="l14.5389" class="difflineplus">+</span>
<a href="#l14.5390"></a><span id="l14.5390" class="difflineplus">+# app update channel is 'default' when not supplied.</span>
<a href="#l14.5391"></a><span id="l14.5391" class="difflineplus">+MOZ_ARG_ENABLE_STRING([update-channel],</span>
<a href="#l14.5392"></a><span id="l14.5392" class="difflineplus">+[  --enable-update-channel=CHANNEL</span>
<a href="#l14.5393"></a><span id="l14.5393" class="difflineplus">+                           Select application update channel (default=default)],</span>
<a href="#l14.5394"></a><span id="l14.5394" class="difflineplus">+    MOZ_UPDATE_CHANNEL=`echo $enableval | tr A-Z a-z`)</span>
<a href="#l14.5395"></a><span id="l14.5395" class="difflineplus">+</span>
<a href="#l14.5396"></a><span id="l14.5396" class="difflineplus">+if test -z &quot;$MOZ_UPDATE_CHANNEL&quot;; then</span>
<a href="#l14.5397"></a><span id="l14.5397" class="difflineplus">+    MOZ_UPDATE_CHANNEL=default</span>
<a href="#l14.5398"></a><span id="l14.5398" class="difflineplus">+fi</span>
<a href="#l14.5399"></a><span id="l14.5399" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZ_UPDATE_CHANNEL, $MOZ_UPDATE_CHANNEL)</span>
<a href="#l14.5400"></a><span id="l14.5400" class="difflineplus">+</span>
<a href="#l14.5401"></a><span id="l14.5401" class="difflineplus">+# tools/update-packaging is not checked out by default.</span>
<a href="#l14.5402"></a><span id="l14.5402" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(update-packaging,</span>
<a href="#l14.5403"></a><span id="l14.5403" class="difflineplus">+[  --enable-update-packaging</span>
<a href="#l14.5404"></a><span id="l14.5404" class="difflineplus">+                           Enable tools/update-packaging],</span>
<a href="#l14.5405"></a><span id="l14.5405" class="difflineplus">+    MOZ_UPDATE_PACKAGING=1,</span>
<a href="#l14.5406"></a><span id="l14.5406" class="difflineplus">+    MOZ_UPDATE_PACKAGING= )</span>
<a href="#l14.5407"></a><span id="l14.5407" class="difflineplus">+AC_SUBST(MOZ_UPDATE_PACKAGING)</span>
<a href="#l14.5408"></a><span id="l14.5408" class="difflineplus">+</span>
<a href="#l14.5409"></a><span id="l14.5409" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5410"></a><span id="l14.5410" class="difflineplus">+dnl ActiveX</span>
<a href="#l14.5411"></a><span id="l14.5411" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5412"></a><span id="l14.5412" class="difflineplus">+</span>
<a href="#l14.5413"></a><span id="l14.5413" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xpconnect-idispatch,</span>
<a href="#l14.5414"></a><span id="l14.5414" class="difflineplus">+[  --disable-xpconnect-idispatch</span>
<a href="#l14.5415"></a><span id="l14.5415" class="difflineplus">+                          Disable building of xpconnect support for IDispatch</span>
<a href="#l14.5416"></a><span id="l14.5416" class="difflineplus">+                          (win32 only)],</span>
<a href="#l14.5417"></a><span id="l14.5417" class="difflineplus">+    XPC_IDISPATCH_SUPPORT=,</span>
<a href="#l14.5418"></a><span id="l14.5418" class="difflineplus">+    XPC_IDISPATCH_SUPPORT=1)</span>
<a href="#l14.5419"></a><span id="l14.5419" class="difflineplus">+AC_SUBST(XPC_IDISPATCH_SUPPORT)</span>
<a href="#l14.5420"></a><span id="l14.5420" class="difflineplus">+</span>
<a href="#l14.5421"></a><span id="l14.5421" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(activex,</span>
<a href="#l14.5422"></a><span id="l14.5422" class="difflineplus">+[  --disable-activex       Disable building of ActiveX control (win32 only)],</span>
<a href="#l14.5423"></a><span id="l14.5423" class="difflineplus">+    MOZ_NO_ACTIVEX_SUPPORT=1,</span>
<a href="#l14.5424"></a><span id="l14.5424" class="difflineplus">+    MOZ_NO_ACTIVEX_SUPPORT= )</span>
<a href="#l14.5425"></a><span id="l14.5425" class="difflineplus">+AC_SUBST(MOZ_NO_ACTIVEX_SUPPORT)</span>
<a href="#l14.5426"></a><span id="l14.5426" class="difflineplus">+</span>
<a href="#l14.5427"></a><span id="l14.5427" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(activex-scripting,</span>
<a href="#l14.5428"></a><span id="l14.5428" class="difflineplus">+[  --disable-activex-scripting</span>
<a href="#l14.5429"></a><span id="l14.5429" class="difflineplus">+                          Disable building of ActiveX scripting support (win32)],</span>
<a href="#l14.5430"></a><span id="l14.5430" class="difflineplus">+    MOZ_ACTIVEX_SCRIPTING_SUPPORT=,</span>
<a href="#l14.5431"></a><span id="l14.5431" class="difflineplus">+    MOZ_ACTIVEX_SCRIPTING_SUPPORT=1)</span>
<a href="#l14.5432"></a><span id="l14.5432" class="difflineplus">+AC_SUBST(MOZ_ACTIVEX_SCRIPTING_SUPPORT)</span>
<a href="#l14.5433"></a><span id="l14.5433" class="difflineplus">+</span>
<a href="#l14.5434"></a><span id="l14.5434" class="difflineplus">+if test -n &quot;$MOZ_NO_ACTIVEX_SUPPORT&quot; -a -n &quot;$MOZ_ACTIVEX_SCRIPTING_SUPPORT&quot;;</span>
<a href="#l14.5435"></a><span id="l14.5435" class="difflineplus">+then</span>
<a href="#l14.5436"></a><span id="l14.5436" class="difflineplus">+    AC_MSG_ERROR([Cannot enable ActiveX scripting support when ActiveX support is disabled.])</span>
<a href="#l14.5437"></a><span id="l14.5437" class="difflineplus">+fi</span>
<a href="#l14.5438"></a><span id="l14.5438" class="difflineplus">+</span>
<a href="#l14.5439"></a><span id="l14.5439" class="difflineplus">+if test -n &quot;$XPC_IDISPATCH_SUPPORT&quot; -o -n &quot;$MOZ_ACTIVEX_SCRIPTING_SUPPORT&quot; -o -z &quot;$MOZ_NO_ACTIVEX_SUPPORT&quot;; then</span>
<a href="#l14.5440"></a><span id="l14.5440" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.5441"></a><span id="l14.5441" class="difflineplus">+*-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l14.5442"></a><span id="l14.5442" class="difflineplus">+    if test &quot;$ac_cv_header_atlbase_h&quot; = &quot;no&quot;; then</span>
<a href="#l14.5443"></a><span id="l14.5443" class="difflineplus">+        AC_MSG_ERROR([System header atlbase.h is not available. See http://developer.mozilla.org/en/docs/atlbase.h for details on fixing this problem.])</span>
<a href="#l14.5444"></a><span id="l14.5444" class="difflineplus">+    fi</span>
<a href="#l14.5445"></a><span id="l14.5445" class="difflineplus">+    ;;</span>
<a href="#l14.5446"></a><span id="l14.5446" class="difflineplus">+esac</span>
<a href="#l14.5447"></a><span id="l14.5447" class="difflineplus">+fi</span>
<a href="#l14.5448"></a><span id="l14.5448" class="difflineplus">+</span>
<a href="#l14.5449"></a><span id="l14.5449" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5450"></a><span id="l14.5450" class="difflineplus">+dnl leaky</span>
<a href="#l14.5451"></a><span id="l14.5451" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5452"></a><span id="l14.5452" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(leaky,</span>
<a href="#l14.5453"></a><span id="l14.5453" class="difflineplus">+[  --enable-leaky          Build leaky memory tool],</span>
<a href="#l14.5454"></a><span id="l14.5454" class="difflineplus">+    MOZ_LEAKY=1,</span>
<a href="#l14.5455"></a><span id="l14.5455" class="difflineplus">+    MOZ_LEAKY=)</span>
<a href="#l14.5456"></a><span id="l14.5456" class="difflineplus">+</span>
<a href="#l14.5457"></a><span id="l14.5457" class="difflineplus">+</span>
<a href="#l14.5458"></a><span id="l14.5458" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5459"></a><span id="l14.5459" class="difflineplus">+dnl xpctools</span>
<a href="#l14.5460"></a><span id="l14.5460" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5461"></a><span id="l14.5461" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(xpctools,</span>
<a href="#l14.5462"></a><span id="l14.5462" class="difflineplus">+[  --enable-xpctools       Build JS profiling tool],</span>
<a href="#l14.5463"></a><span id="l14.5463" class="difflineplus">+    MOZ_XPCTOOLS=1,</span>
<a href="#l14.5464"></a><span id="l14.5464" class="difflineplus">+    MOZ_XPCTOOLS= )</span>
<a href="#l14.5465"></a><span id="l14.5465" class="difflineplus">+</span>
<a href="#l14.5466"></a><span id="l14.5466" class="difflineplus">+</span>
<a href="#l14.5467"></a><span id="l14.5467" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5468"></a><span id="l14.5468" class="difflineplus">+dnl build the tests by default</span>
<a href="#l14.5469"></a><span id="l14.5469" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5470"></a><span id="l14.5470" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(tests,</span>
<a href="#l14.5471"></a><span id="l14.5471" class="difflineplus">+[  --disable-tests         Do not build test libraries &amp; programs],</span>
<a href="#l14.5472"></a><span id="l14.5472" class="difflineplus">+    ENABLE_TESTS=,</span>
<a href="#l14.5473"></a><span id="l14.5473" class="difflineplus">+    ENABLE_TESTS=1 )</span>
<a href="#l14.5474"></a><span id="l14.5474" class="difflineplus">+</span>
<a href="#l14.5475"></a><span id="l14.5475" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5476"></a><span id="l14.5476" class="difflineplus">+dnl parental controls (for Windows Vista)</span>
<a href="#l14.5477"></a><span id="l14.5477" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5478"></a><span id="l14.5478" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(parental-controls,</span>
<a href="#l14.5479"></a><span id="l14.5479" class="difflineplus">+[  --disable-parental-controls</span>
<a href="#l14.5480"></a><span id="l14.5480" class="difflineplus">+                           Do not build parental controls],</span>
<a href="#l14.5481"></a><span id="l14.5481" class="difflineplus">+   MOZ_DISABLE_PARENTAL_CONTROLS=1,</span>
<a href="#l14.5482"></a><span id="l14.5482" class="difflineplus">+   MOZ_DISABLE_PARENTAL_CONTROLS=)</span>
<a href="#l14.5483"></a><span id="l14.5483" class="difflineplus">+if test -n &quot;$MOZ_DISABLE_PARENTAL_CONTROLS&quot;; then</span>
<a href="#l14.5484"></a><span id="l14.5484" class="difflineplus">+    AC_DEFINE(MOZ_DISABLE_PARENTAL_CONTROLS)</span>
<a href="#l14.5485"></a><span id="l14.5485" class="difflineplus">+fi</span>
<a href="#l14.5486"></a><span id="l14.5486" class="difflineplus">+</span>
<a href="#l14.5487"></a><span id="l14.5487" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5488"></a><span id="l14.5488" class="difflineplus">+dnl Vista SDK specific api</span>
<a href="#l14.5489"></a><span id="l14.5489" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5490"></a><span id="l14.5490" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(vista-sdk-requirements,</span>
<a href="#l14.5491"></a><span id="l14.5491" class="difflineplus">+[  --disable-vista-sdk-requirements</span>
<a href="#l14.5492"></a><span id="l14.5492" class="difflineplus">+                           Do not build Vista SDK specific code],</span>
<a href="#l14.5493"></a><span id="l14.5493" class="difflineplus">+   MOZ_DISABLE_VISTA_SDK_REQUIREMENTS=1,</span>
<a href="#l14.5494"></a><span id="l14.5494" class="difflineplus">+   MOZ_DISABLE_VISTA_SDK_REQUIREMENTS=)</span>
<a href="#l14.5495"></a><span id="l14.5495" class="difflineplus">+if test -n &quot;$MOZ_DISABLE_VISTA_SDK_REQUIREMENTS&quot;; then</span>
<a href="#l14.5496"></a><span id="l14.5496" class="difflineplus">+    AC_MSG_WARN([Resulting builds will not be compatible with Windows Vista. (bug 428970)])</span>
<a href="#l14.5497"></a><span id="l14.5497" class="difflineplus">+    AC_DEFINE(MOZ_DISABLE_VISTA_SDK_REQUIREMENTS)</span>
<a href="#l14.5498"></a><span id="l14.5498" class="difflineplus">+    if test -z &quot;$MOZ_DISABLE_PARENTAL_CONTROLS&quot;; then</span>
<a href="#l14.5499"></a><span id="l14.5499" class="difflineplus">+        AC_DEFINE(MOZ_DISABLE_PARENTAL_CONTROLS)</span>
<a href="#l14.5500"></a><span id="l14.5500" class="difflineplus">+    fi</span>
<a href="#l14.5501"></a><span id="l14.5501" class="difflineplus">+    MOZ_DISABLE_PARENTAL_CONTROLS=1</span>
<a href="#l14.5502"></a><span id="l14.5502" class="difflineplus">+else</span>
<a href="#l14.5503"></a><span id="l14.5503" class="difflineplus">+case &quot;$target&quot; in</span>
<a href="#l14.5504"></a><span id="l14.5504" class="difflineplus">+*-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l14.5505"></a><span id="l14.5505" class="difflineplus">+    if test &quot;$ac_cv_header_wpcapi_h&quot; = &quot;no&quot;; then</span>
<a href="#l14.5506"></a><span id="l14.5506" class="difflineplus">+        AC_MSG_ERROR([System header wpcapi.h is not available. See updated http://developer.mozilla.org/en/docs/wpcapi.h for details on fixing this problem.])</span>
<a href="#l14.5507"></a><span id="l14.5507" class="difflineplus">+    fi</span>
<a href="#l14.5508"></a><span id="l14.5508" class="difflineplus">+    ;;</span>
<a href="#l14.5509"></a><span id="l14.5509" class="difflineplus">+esac</span>
<a href="#l14.5510"></a><span id="l14.5510" class="difflineplus">+fi</span>
<a href="#l14.5511"></a><span id="l14.5511" class="difflineplus">+AC_SUBST(MOZ_DISABLE_PARENTAL_CONTROLS)</span>
<a href="#l14.5512"></a><span id="l14.5512" class="difflineplus">+AC_SUBST(MOZ_DISABLE_VISTA_SDK_REQUIREMENTS)</span>
<a href="#l14.5513"></a><span id="l14.5513" class="difflineplus">+</span>
<a href="#l14.5514"></a><span id="l14.5514" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5515"></a><span id="l14.5515" class="difflineplus">+dnl =</span>
<a href="#l14.5516"></a><span id="l14.5516" class="difflineplus">+dnl = Module specific options</span>
<a href="#l14.5517"></a><span id="l14.5517" class="difflineplus">+dnl =</span>
<a href="#l14.5518"></a><span id="l14.5518" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5519"></a><span id="l14.5519" class="difflineplus">+MOZ_ARG_HEADER(Individual module options)</span>
<a href="#l14.5520"></a><span id="l14.5520" class="difflineplus">+</span>
<a href="#l14.5521"></a><span id="l14.5521" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5522"></a><span id="l14.5522" class="difflineplus">+dnl = Enable Lea malloc in xpcom. OFF by default.</span>
<a href="#l14.5523"></a><span id="l14.5523" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5524"></a><span id="l14.5524" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(xpcom-lea,</span>
<a href="#l14.5525"></a><span id="l14.5525" class="difflineplus">+[  --enable-xpcom-lea      Use Lea malloc in xpcom ],</span>
<a href="#l14.5526"></a><span id="l14.5526" class="difflineplus">+    XPCOM_USE_LEA=1,</span>
<a href="#l14.5527"></a><span id="l14.5527" class="difflineplus">+    XPCOM_USE_LEA= )</span>
<a href="#l14.5528"></a><span id="l14.5528" class="difflineplus">+if test -n &quot;$XPCOM_USE_LEA&quot;; then</span>
<a href="#l14.5529"></a><span id="l14.5529" class="difflineplus">+    AC_DEFINE(XPCOM_USE_LEA)</span>
<a href="#l14.5530"></a><span id="l14.5530" class="difflineplus">+fi</span>
<a href="#l14.5531"></a><span id="l14.5531" class="difflineplus">+</span>
<a href="#l14.5532"></a><span id="l14.5532" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5533"></a><span id="l14.5533" class="difflineplus">+dnl = Enable places (new history/bookmarks)</span>
<a href="#l14.5534"></a><span id="l14.5534" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5535"></a><span id="l14.5535" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(places,</span>
<a href="#l14.5536"></a><span id="l14.5536" class="difflineplus">+[  --enable-places        Enable 'places' bookmark/history implementation],</span>
<a href="#l14.5537"></a><span id="l14.5537" class="difflineplus">+    MOZ_PLACES=1,</span>
<a href="#l14.5538"></a><span id="l14.5538" class="difflineplus">+    MOZ_PLACES= )</span>
<a href="#l14.5539"></a><span id="l14.5539" class="difflineplus">+if test -n &quot;$MOZ_PLACES&quot;; then</span>
<a href="#l14.5540"></a><span id="l14.5540" class="difflineplus">+    AC_DEFINE(MOZ_PLACES)</span>
<a href="#l14.5541"></a><span id="l14.5541" class="difflineplus">+    if test -z &quot;$MOZ_MAIL_NEWS&quot;; then</span>
<a href="#l14.5542"></a><span id="l14.5542" class="difflineplus">+      MOZ_MORK=</span>
<a href="#l14.5543"></a><span id="l14.5543" class="difflineplus">+    fi</span>
<a href="#l14.5544"></a><span id="l14.5544" class="difflineplus">+    MOZ_MORKREADER=1</span>
<a href="#l14.5545"></a><span id="l14.5545" class="difflineplus">+else</span>
<a href="#l14.5546"></a><span id="l14.5546" class="difflineplus">+  if test &quot;$MOZ_BUILD_APP&quot; = &quot;browser&quot;; then</span>
<a href="#l14.5547"></a><span id="l14.5547" class="difflineplus">+    AC_MSG_ERROR([Cannot build Firefox with --disable-places.])</span>
<a href="#l14.5548"></a><span id="l14.5548" class="difflineplus">+  fi</span>
<a href="#l14.5549"></a><span id="l14.5549" class="difflineplus">+fi</span>
<a href="#l14.5550"></a><span id="l14.5550" class="difflineplus">+</span>
<a href="#l14.5551"></a><span id="l14.5551" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5552"></a><span id="l14.5552" class="difflineplus">+dnl = Disable feed handling components</span>
<a href="#l14.5553"></a><span id="l14.5553" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5554"></a><span id="l14.5554" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(feeds,</span>
<a href="#l14.5555"></a><span id="l14.5555" class="difflineplus">+[  --disable-feeds        Disable feed handling and processing components],</span>
<a href="#l14.5556"></a><span id="l14.5556" class="difflineplus">+    MOZ_FEEDS=,</span>
<a href="#l14.5557"></a><span id="l14.5557" class="difflineplus">+    MOZ_FEEDS=1 )</span>
<a href="#l14.5558"></a><span id="l14.5558" class="difflineplus">+if test -n &quot;$MOZ_FEEDS&quot;; then</span>
<a href="#l14.5559"></a><span id="l14.5559" class="difflineplus">+    AC_DEFINE(MOZ_FEEDS)</span>
<a href="#l14.5560"></a><span id="l14.5560" class="difflineplus">+else</span>
<a href="#l14.5561"></a><span id="l14.5561" class="difflineplus">+    if test &quot;$MOZ_BUILD_APP&quot; = &quot;browser&quot;; then</span>
<a href="#l14.5562"></a><span id="l14.5562" class="difflineplus">+        AC_MSG_ERROR([Cannot build Firefox with --disable-feeds.])</span>
<a href="#l14.5563"></a><span id="l14.5563" class="difflineplus">+    fi</span>
<a href="#l14.5564"></a><span id="l14.5564" class="difflineplus">+fi</span>
<a href="#l14.5565"></a><span id="l14.5565" class="difflineplus">+</span>
<a href="#l14.5566"></a><span id="l14.5566" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5567"></a><span id="l14.5567" class="difflineplus">+dnl = Enable mozStorage</span>
<a href="#l14.5568"></a><span id="l14.5568" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5569"></a><span id="l14.5569" class="difflineplus">+dnl Implicitly enabled by default if building calendar or places</span>
<a href="#l14.5570"></a><span id="l14.5570" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(storage,</span>
<a href="#l14.5571"></a><span id="l14.5571" class="difflineplus">+[  --enable-storage        Enable mozStorage module and related components],</span>
<a href="#l14.5572"></a><span id="l14.5572" class="difflineplus">+    MOZ_STORAGE=1,</span>
<a href="#l14.5573"></a><span id="l14.5573" class="difflineplus">+    MOZ_STORAGE= )</span>
<a href="#l14.5574"></a><span id="l14.5574" class="difflineplus">+if test -n &quot;$MOZ_STORAGE&quot;; then</span>
<a href="#l14.5575"></a><span id="l14.5575" class="difflineplus">+    AC_DEFINE(MOZ_STORAGE)</span>
<a href="#l14.5576"></a><span id="l14.5576" class="difflineplus">+fi</span>
<a href="#l14.5577"></a><span id="l14.5577" class="difflineplus">+</span>
<a href="#l14.5578"></a><span id="l14.5578" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5579"></a><span id="l14.5579" class="difflineplus">+dnl Check for sqlite</span>
<a href="#l14.5580"></a><span id="l14.5580" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5581"></a><span id="l14.5581" class="difflineplus">+</span>
<a href="#l14.5582"></a><span id="l14.5582" class="difflineplus">+MOZ_NATIVE_SQLITE=</span>
<a href="#l14.5583"></a><span id="l14.5583" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(system-sqlite,</span>
<a href="#l14.5584"></a><span id="l14.5584" class="difflineplus">+[  --enable-system-sqlite  Use system sqlite (located with pkgconfig)],</span>
<a href="#l14.5585"></a><span id="l14.5585" class="difflineplus">+MOZ_NATIVE_SQLITE=1,</span>
<a href="#l14.5586"></a><span id="l14.5586" class="difflineplus">+MOZ_NATIVE_SQLITE= )</span>
<a href="#l14.5587"></a><span id="l14.5587" class="difflineplus">+</span>
<a href="#l14.5588"></a><span id="l14.5588" class="difflineplus">+if test -z &quot;$MOZ_NATIVE_SQLITE&quot;</span>
<a href="#l14.5589"></a><span id="l14.5589" class="difflineplus">+then</span>
<a href="#l14.5590"></a><span id="l14.5590" class="difflineplus">+    SQLITE_CFLAGS=</span>
<a href="#l14.5591"></a><span id="l14.5591" class="difflineplus">+    SQLITE_LIBS='$(call EXPAND_LIBNAME_PATH,sqlite3,$(DIST)/lib)'</span>
<a href="#l14.5592"></a><span id="l14.5592" class="difflineplus">+else</span>
<a href="#l14.5593"></a><span id="l14.5593" class="difflineplus">+    PKG_CHECK_MODULES(SQLITE, sqlite3 &gt;= $SQLITE_VERSION)</span>
<a href="#l14.5594"></a><span id="l14.5594" class="difflineplus">+fi</span>
<a href="#l14.5595"></a><span id="l14.5595" class="difflineplus">+</span>
<a href="#l14.5596"></a><span id="l14.5596" class="difflineplus">+AC_SUBST(MOZ_NATIVE_SQLITE)</span>
<a href="#l14.5597"></a><span id="l14.5597" class="difflineplus">+</span>
<a href="#l14.5598"></a><span id="l14.5598" class="difflineplus">+dnl = Enable help viewer (off by default)</span>
<a href="#l14.5599"></a><span id="l14.5599" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5600"></a><span id="l14.5600" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(help-viewer,</span>
<a href="#l14.5601"></a><span id="l14.5601" class="difflineplus">+[  --enable-help-viewer        Enable help viewer],</span>
<a href="#l14.5602"></a><span id="l14.5602" class="difflineplus">+    MOZ_HELP_VIEWER=1,</span>
<a href="#l14.5603"></a><span id="l14.5603" class="difflineplus">+    MOZ_HELP_VIEWER= )</span>
<a href="#l14.5604"></a><span id="l14.5604" class="difflineplus">+if test -n &quot;$MOZ_HELP_VIEWER&quot;; then</span>
<a href="#l14.5605"></a><span id="l14.5605" class="difflineplus">+     AC_DEFINE(MOZ_HELP_VIEWER)</span>
<a href="#l14.5606"></a><span id="l14.5606" class="difflineplus">+fi</span>
<a href="#l14.5607"></a><span id="l14.5607" class="difflineplus">+AC_SUBST(MOZ_HELP_VIEWER)</span>
<a href="#l14.5608"></a><span id="l14.5608" class="difflineplus">+</span>
<a href="#l14.5609"></a><span id="l14.5609" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5610"></a><span id="l14.5610" class="difflineplus">+dnl = Enable safe browsing (anti-phishing)</span>
<a href="#l14.5611"></a><span id="l14.5611" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5612"></a><span id="l14.5612" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(safe-browsing,</span>
<a href="#l14.5613"></a><span id="l14.5613" class="difflineplus">+[  --enable-safe-browsing        Enable safe browsing (anti-phishing) implementation],</span>
<a href="#l14.5614"></a><span id="l14.5614" class="difflineplus">+    MOZ_SAFE_BROWSING=1,</span>
<a href="#l14.5615"></a><span id="l14.5615" class="difflineplus">+    MOZ_SAFE_BROWSING= )</span>
<a href="#l14.5616"></a><span id="l14.5616" class="difflineplus">+if test -n &quot;$MOZ_SAFE_BROWSING&quot;; then</span>
<a href="#l14.5617"></a><span id="l14.5617" class="difflineplus">+    AC_DEFINE(MOZ_SAFE_BROWSING)</span>
<a href="#l14.5618"></a><span id="l14.5618" class="difflineplus">+fi</span>
<a href="#l14.5619"></a><span id="l14.5619" class="difflineplus">+AC_SUBST(MOZ_SAFE_BROWSING)</span>
<a href="#l14.5620"></a><span id="l14.5620" class="difflineplus">+</span>
<a href="#l14.5621"></a><span id="l14.5621" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5622"></a><span id="l14.5622" class="difflineplus">+dnl = Enable url-classifier</span>
<a href="#l14.5623"></a><span id="l14.5623" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5624"></a><span id="l14.5624" class="difflineplus">+dnl Implicitly enabled by default if building with safe-browsing</span>
<a href="#l14.5625"></a><span id="l14.5625" class="difflineplus">+if test -n &quot;$MOZ_SAFE_BROWSING&quot;; then</span>
<a href="#l14.5626"></a><span id="l14.5626" class="difflineplus">+    MOZ_URL_CLASSIFIER=1</span>
<a href="#l14.5627"></a><span id="l14.5627" class="difflineplus">+fi</span>
<a href="#l14.5628"></a><span id="l14.5628" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(url-classifier,</span>
<a href="#l14.5629"></a><span id="l14.5629" class="difflineplus">+[  --enable-url-classifier        Enable url classifier module],</span>
<a href="#l14.5630"></a><span id="l14.5630" class="difflineplus">+    MOZ_URL_CLASSIFIER=1,</span>
<a href="#l14.5631"></a><span id="l14.5631" class="difflineplus">+    MOZ_URL_CLASSIFIER= )</span>
<a href="#l14.5632"></a><span id="l14.5632" class="difflineplus">+if test -n &quot;$MOZ_URL_CLASSIFIER&quot;; then</span>
<a href="#l14.5633"></a><span id="l14.5633" class="difflineplus">+    AC_DEFINE(MOZ_URL_CLASSIFIER)</span>
<a href="#l14.5634"></a><span id="l14.5634" class="difflineplus">+fi</span>
<a href="#l14.5635"></a><span id="l14.5635" class="difflineplus">+AC_SUBST(MOZ_URL_CLASSIFIER)</span>
<a href="#l14.5636"></a><span id="l14.5636" class="difflineplus">+</span>
<a href="#l14.5637"></a><span id="l14.5637" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5638"></a><span id="l14.5638" class="difflineplus">+dnl = Disable zipwriter</span>
<a href="#l14.5639"></a><span id="l14.5639" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5640"></a><span id="l14.5640" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(zipwriter,</span>
<a href="#l14.5641"></a><span id="l14.5641" class="difflineplus">+[  --disable-zipwriter             Disable zipwriter component],</span>
<a href="#l14.5642"></a><span id="l14.5642" class="difflineplus">+    MOZ_ZIPWRITER=,</span>
<a href="#l14.5643"></a><span id="l14.5643" class="difflineplus">+    MOZ_ZIPWRITER=1 )</span>
<a href="#l14.5644"></a><span id="l14.5644" class="difflineplus">+AC_SUBST(MOZ_ZIPWRITER)</span>
<a href="#l14.5645"></a><span id="l14.5645" class="difflineplus">+</span>
<a href="#l14.5646"></a><span id="l14.5646" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5647"></a><span id="l14.5647" class="difflineplus">+dnl = Enable Ultrasparc specific optimizations for JS</span>
<a href="#l14.5648"></a><span id="l14.5648" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5649"></a><span id="l14.5649" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(js-ultrasparc,</span>
<a href="#l14.5650"></a><span id="l14.5650" class="difflineplus">+[  --enable-js-ultrasparc  Use UltraSPARC optimizations in JS],</span>
<a href="#l14.5651"></a><span id="l14.5651" class="difflineplus">+    JS_ULTRASPARC_OPTS=1,</span>
<a href="#l14.5652"></a><span id="l14.5652" class="difflineplus">+    JS_ULTRASPARC_OPTS= )</span>
<a href="#l14.5653"></a><span id="l14.5653" class="difflineplus">+</span>
<a href="#l14.5654"></a><span id="l14.5654" class="difflineplus">+dnl only enable option for ultrasparcs</span>
<a href="#l14.5655"></a><span id="l14.5655" class="difflineplus">+if test `echo &quot;$target_os&quot; | grep -c \^solaris 2&gt;/dev/null` = 0 -o \</span>
<a href="#l14.5656"></a><span id="l14.5656" class="difflineplus">+    &quot;$OS_TEST&quot; != &quot;sun4u&quot;; then</span>
<a href="#l14.5657"></a><span id="l14.5657" class="difflineplus">+    JS_ULTRASPARC_OPTS=</span>
<a href="#l14.5658"></a><span id="l14.5658" class="difflineplus">+fi</span>
<a href="#l14.5659"></a><span id="l14.5659" class="difflineplus">+AC_SUBST(JS_ULTRASPARC_OPTS)</span>
<a href="#l14.5660"></a><span id="l14.5660" class="difflineplus">+</span>
<a href="#l14.5661"></a><span id="l14.5661" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5662"></a><span id="l14.5662" class="difflineplus">+dnl =</span>
<a href="#l14.5663"></a><span id="l14.5663" class="difflineplus">+dnl = Feature options that require extra sources to be pulled</span>
<a href="#l14.5664"></a><span id="l14.5664" class="difflineplus">+dnl =</span>
<a href="#l14.5665"></a><span id="l14.5665" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5666"></a><span id="l14.5666" class="difflineplus">+dnl MOZ_ARG_HEADER(Features that require extra sources)</span>
<a href="#l14.5667"></a><span id="l14.5667" class="difflineplus">+</span>
<a href="#l14.5668"></a><span id="l14.5668" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5669"></a><span id="l14.5669" class="difflineplus">+dnl =</span>
<a href="#l14.5670"></a><span id="l14.5670" class="difflineplus">+dnl = Debugging Options</span>
<a href="#l14.5671"></a><span id="l14.5671" class="difflineplus">+dnl = </span>
<a href="#l14.5672"></a><span id="l14.5672" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5673"></a><span id="l14.5673" class="difflineplus">+MOZ_ARG_HEADER(Debugging and Optimizations)</span>
<a href="#l14.5674"></a><span id="l14.5674" class="difflineplus">+</span>
<a href="#l14.5675"></a><span id="l14.5675" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5676"></a><span id="l14.5676" class="difflineplus">+dnl = Disable building with debug info.</span>
<a href="#l14.5677"></a><span id="l14.5677" class="difflineplus">+dnl = Debugging is OFF by default</span>
<a href="#l14.5678"></a><span id="l14.5678" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5679"></a><span id="l14.5679" class="difflineplus">+if test -z &quot;$MOZ_DEBUG_FLAGS&quot;</span>
<a href="#l14.5680"></a><span id="l14.5680" class="difflineplus">+then</span>
<a href="#l14.5681"></a><span id="l14.5681" class="difflineplus">+    case &quot;$target&quot; in</span>
<a href="#l14.5682"></a><span id="l14.5682" class="difflineplus">+    *-irix*)</span>
<a href="#l14.5683"></a><span id="l14.5683" class="difflineplus">+        if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.5684"></a><span id="l14.5684" class="difflineplus">+            GCC_VERSION=`$CC -v 2&gt;&amp;1 | awk '/version/ { print $3 }'`</span>
<a href="#l14.5685"></a><span id="l14.5685" class="difflineplus">+            case &quot;$GCC_VERSION&quot; in</span>
<a href="#l14.5686"></a><span id="l14.5686" class="difflineplus">+            2.95.*)</span>
<a href="#l14.5687"></a><span id="l14.5687" class="difflineplus">+                MOZ_DEBUG_FLAGS=&quot;&quot;</span>
<a href="#l14.5688"></a><span id="l14.5688" class="difflineplus">+                ;;</span>
<a href="#l14.5689"></a><span id="l14.5689" class="difflineplus">+            *)</span>
<a href="#l14.5690"></a><span id="l14.5690" class="difflineplus">+                MOZ_DEBUG_FLAGS=&quot;-g&quot;</span>
<a href="#l14.5691"></a><span id="l14.5691" class="difflineplus">+                ;;</span>
<a href="#l14.5692"></a><span id="l14.5692" class="difflineplus">+            esac</span>
<a href="#l14.5693"></a><span id="l14.5693" class="difflineplus">+        else</span>
<a href="#l14.5694"></a><span id="l14.5694" class="difflineplus">+            MOZ_DEBUG_FLAGS=&quot;-g&quot;</span>
<a href="#l14.5695"></a><span id="l14.5695" class="difflineplus">+        fi</span>
<a href="#l14.5696"></a><span id="l14.5696" class="difflineplus">+        ;;</span>
<a href="#l14.5697"></a><span id="l14.5697" class="difflineplus">+    *)</span>
<a href="#l14.5698"></a><span id="l14.5698" class="difflineplus">+    	MOZ_DEBUG_FLAGS=&quot;-g&quot;</span>
<a href="#l14.5699"></a><span id="l14.5699" class="difflineplus">+        ;;</span>
<a href="#l14.5700"></a><span id="l14.5700" class="difflineplus">+    esac</span>
<a href="#l14.5701"></a><span id="l14.5701" class="difflineplus">+fi</span>
<a href="#l14.5702"></a><span id="l14.5702" class="difflineplus">+</span>
<a href="#l14.5703"></a><span id="l14.5703" class="difflineplus">+MOZ_ARG_ENABLE_STRING(debug,</span>
<a href="#l14.5704"></a><span id="l14.5704" class="difflineplus">+[  --enable-debug[=DBG]    Enable building with developer debug info</span>
<a href="#l14.5705"></a><span id="l14.5705" class="difflineplus">+                          (Using compiler flags DBG)],</span>
<a href="#l14.5706"></a><span id="l14.5706" class="difflineplus">+[ if test &quot;$enableval&quot; != &quot;no&quot;; then</span>
<a href="#l14.5707"></a><span id="l14.5707" class="difflineplus">+    MOZ_DEBUG=1</span>
<a href="#l14.5708"></a><span id="l14.5708" class="difflineplus">+    if test -n &quot;$enableval&quot; &amp;&amp; test &quot;$enableval&quot; != &quot;yes&quot;; then</span>
<a href="#l14.5709"></a><span id="l14.5709" class="difflineplus">+        MOZ_DEBUG_FLAGS=`echo $enableval | sed -e 's|\\\ | |g'`</span>
<a href="#l14.5710"></a><span id="l14.5710" class="difflineplus">+    fi</span>
<a href="#l14.5711"></a><span id="l14.5711" class="difflineplus">+  else</span>
<a href="#l14.5712"></a><span id="l14.5712" class="difflineplus">+    MOZ_DEBUG=</span>
<a href="#l14.5713"></a><span id="l14.5713" class="difflineplus">+  fi ],</span>
<a href="#l14.5714"></a><span id="l14.5714" class="difflineplus">+  MOZ_DEBUG=)</span>
<a href="#l14.5715"></a><span id="l14.5715" class="difflineplus">+</span>
<a href="#l14.5716"></a><span id="l14.5716" class="difflineplus">+MOZ_DEBUG_ENABLE_DEFS=&quot;-DDEBUG -D_DEBUG&quot;</span>
<a href="#l14.5717"></a><span id="l14.5717" class="difflineplus">+ case &quot;${target_os}&quot; in</span>
<a href="#l14.5718"></a><span id="l14.5718" class="difflineplus">+    beos*)</span>
<a href="#l14.5719"></a><span id="l14.5719" class="difflineplus">+        MOZ_DEBUG_ENABLE_DEFS=&quot;$MOZ_DEBUG_ENABLE_DEFS -DDEBUG_${USER}&quot;</span>
<a href="#l14.5720"></a><span id="l14.5720" class="difflineplus">+        ;;</span>
<a href="#l14.5721"></a><span id="l14.5721" class="difflineplus">+    msvc*|mks*|cygwin*|mingw*|os2*|wince*)</span>
<a href="#l14.5722"></a><span id="l14.5722" class="difflineplus">+        MOZ_DEBUG_ENABLE_DEFS=&quot;$MOZ_DEBUG_ENABLE_DEFS -DDEBUG_`echo ${USERNAME} | sed -e 's| |_|g'`&quot;</span>
<a href="#l14.5723"></a><span id="l14.5723" class="difflineplus">+        ;;</span>
<a href="#l14.5724"></a><span id="l14.5724" class="difflineplus">+    *) </span>
<a href="#l14.5725"></a><span id="l14.5725" class="difflineplus">+        MOZ_DEBUG_ENABLE_DEFS=&quot;$MOZ_DEBUG_ENABLE_DEFS -DDEBUG_`$WHOAMI`&quot;</span>
<a href="#l14.5726"></a><span id="l14.5726" class="difflineplus">+        ;;</span>
<a href="#l14.5727"></a><span id="l14.5727" class="difflineplus">+  esac</span>
<a href="#l14.5728"></a><span id="l14.5728" class="difflineplus">+MOZ_DEBUG_ENABLE_DEFS=&quot;$MOZ_DEBUG_ENABLE_DEFS -DTRACING&quot;</span>
<a href="#l14.5729"></a><span id="l14.5729" class="difflineplus">+</span>
<a href="#l14.5730"></a><span id="l14.5730" class="difflineplus">+MOZ_DEBUG_DISABLE_DEFS=&quot;-DNDEBUG -DTRIMMED&quot;</span>
<a href="#l14.5731"></a><span id="l14.5731" class="difflineplus">+</span>
<a href="#l14.5732"></a><span id="l14.5732" class="difflineplus">+if test -n &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l14.5733"></a><span id="l14.5733" class="difflineplus">+    AC_MSG_CHECKING([for valid debug flags])</span>
<a href="#l14.5734"></a><span id="l14.5734" class="difflineplus">+    _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.5735"></a><span id="l14.5735" class="difflineplus">+    CFLAGS=&quot;$CFLAGS $MOZ_DEBUG_FLAGS&quot;</span>
<a href="#l14.5736"></a><span id="l14.5736" class="difflineplus">+    AC_TRY_COMPILE([#include &lt;stdio.h&gt;], </span>
<a href="#l14.5737"></a><span id="l14.5737" class="difflineplus">+        [printf(&quot;Hello World\n&quot;);],</span>
<a href="#l14.5738"></a><span id="l14.5738" class="difflineplus">+        _results=yes,</span>
<a href="#l14.5739"></a><span id="l14.5739" class="difflineplus">+        _results=no)</span>
<a href="#l14.5740"></a><span id="l14.5740" class="difflineplus">+    AC_MSG_RESULT([$_results])</span>
<a href="#l14.5741"></a><span id="l14.5741" class="difflineplus">+    if test &quot;$_results&quot; = &quot;no&quot;; then</span>
<a href="#l14.5742"></a><span id="l14.5742" class="difflineplus">+        AC_MSG_ERROR([These compiler flags are invalid: $MOZ_DEBUG_FLAGS])</span>
<a href="#l14.5743"></a><span id="l14.5743" class="difflineplus">+    fi</span>
<a href="#l14.5744"></a><span id="l14.5744" class="difflineplus">+    CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.5745"></a><span id="l14.5745" class="difflineplus">+fi</span>
<a href="#l14.5746"></a><span id="l14.5746" class="difflineplus">+</span>
<a href="#l14.5747"></a><span id="l14.5747" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5748"></a><span id="l14.5748" class="difflineplus">+dnl = Enable code optimization. ON by default.</span>
<a href="#l14.5749"></a><span id="l14.5749" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5750"></a><span id="l14.5750" class="difflineplus">+if test -z &quot;$MOZ_OPTIMIZE_FLAGS&quot;; then</span>
<a href="#l14.5751"></a><span id="l14.5751" class="difflineplus">+	MOZ_OPTIMIZE_FLAGS=&quot;-O&quot;</span>
<a href="#l14.5752"></a><span id="l14.5752" class="difflineplus">+fi</span>
<a href="#l14.5753"></a><span id="l14.5753" class="difflineplus">+</span>
<a href="#l14.5754"></a><span id="l14.5754" class="difflineplus">+MOZ_ARG_ENABLE_STRING(optimize,</span>
<a href="#l14.5755"></a><span id="l14.5755" class="difflineplus">+[  --disable-optimize      Disable compiler optimization</span>
<a href="#l14.5756"></a><span id="l14.5756" class="difflineplus">+  --enable-optimize=[OPT] Specify compiler optimization flags [OPT=-O]],</span>
<a href="#l14.5757"></a><span id="l14.5757" class="difflineplus">+[ if test &quot;$enableval&quot; != &quot;no&quot;; then</span>
<a href="#l14.5758"></a><span id="l14.5758" class="difflineplus">+    MOZ_OPTIMIZE=1</span>
<a href="#l14.5759"></a><span id="l14.5759" class="difflineplus">+    if test -n &quot;$enableval&quot; &amp;&amp; test &quot;$enableval&quot; != &quot;yes&quot;; then</span>
<a href="#l14.5760"></a><span id="l14.5760" class="difflineplus">+        MOZ_OPTIMIZE_FLAGS=`echo &quot;$enableval&quot; | sed -e 's|\\\ | |g'`</span>
<a href="#l14.5761"></a><span id="l14.5761" class="difflineplus">+        MOZ_OPTIMIZE=2</span>
<a href="#l14.5762"></a><span id="l14.5762" class="difflineplus">+    fi</span>
<a href="#l14.5763"></a><span id="l14.5763" class="difflineplus">+else</span>
<a href="#l14.5764"></a><span id="l14.5764" class="difflineplus">+    MOZ_OPTIMIZE=</span>
<a href="#l14.5765"></a><span id="l14.5765" class="difflineplus">+fi ], MOZ_OPTIMIZE=1)</span>
<a href="#l14.5766"></a><span id="l14.5766" class="difflineplus">+</span>
<a href="#l14.5767"></a><span id="l14.5767" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.5768"></a><span id="l14.5768" class="difflineplus">+if test -n &quot;$MOZ_OPTIMIZE&quot;; then</span>
<a href="#l14.5769"></a><span id="l14.5769" class="difflineplus">+    AC_MSG_CHECKING([for valid optimization flags])</span>
<a href="#l14.5770"></a><span id="l14.5770" class="difflineplus">+    _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.5771"></a><span id="l14.5771" class="difflineplus">+    CFLAGS=&quot;$CFLAGS $MOZ_OPTIMIZE_FLAGS&quot;</span>
<a href="#l14.5772"></a><span id="l14.5772" class="difflineplus">+    AC_TRY_COMPILE([#include &lt;stdio.h&gt;], </span>
<a href="#l14.5773"></a><span id="l14.5773" class="difflineplus">+        [printf(&quot;Hello World\n&quot;);],</span>
<a href="#l14.5774"></a><span id="l14.5774" class="difflineplus">+        _results=yes,</span>
<a href="#l14.5775"></a><span id="l14.5775" class="difflineplus">+        _results=no)</span>
<a href="#l14.5776"></a><span id="l14.5776" class="difflineplus">+    AC_MSG_RESULT([$_results])</span>
<a href="#l14.5777"></a><span id="l14.5777" class="difflineplus">+    if test &quot;$_results&quot; = &quot;no&quot;; then</span>
<a href="#l14.5778"></a><span id="l14.5778" class="difflineplus">+        AC_MSG_ERROR([These compiler flags are invalid: $MOZ_OPTIMIZE_FLAGS])</span>
<a href="#l14.5779"></a><span id="l14.5779" class="difflineplus">+    fi</span>
<a href="#l14.5780"></a><span id="l14.5780" class="difflineplus">+    CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.5781"></a><span id="l14.5781" class="difflineplus">+fi</span>
<a href="#l14.5782"></a><span id="l14.5782" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.5783"></a><span id="l14.5783" class="difflineplus">+</span>
<a href="#l14.5784"></a><span id="l14.5784" class="difflineplus">+AC_SUBST(MOZ_OPTIMIZE)</span>
<a href="#l14.5785"></a><span id="l14.5785" class="difflineplus">+AC_SUBST(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l14.5786"></a><span id="l14.5786" class="difflineplus">+AC_SUBST(MOZ_OPTIMIZE_LDFLAGS)</span>
<a href="#l14.5787"></a><span id="l14.5787" class="difflineplus">+AC_SUBST(MOZ_OPTIMIZE_SIZE_TWEAK)</span>
<a href="#l14.5788"></a><span id="l14.5788" class="difflineplus">+</span>
<a href="#l14.5789"></a><span id="l14.5789" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5790"></a><span id="l14.5790" class="difflineplus">+dnl = Enable/disable debug for specific modules only</span>
<a href="#l14.5791"></a><span id="l14.5791" class="difflineplus">+dnl =   module names beginning with ^ will be disabled </span>
<a href="#l14.5792"></a><span id="l14.5792" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5793"></a><span id="l14.5793" class="difflineplus">+MOZ_ARG_ENABLE_STRING(debug-modules,</span>
<a href="#l14.5794"></a><span id="l14.5794" class="difflineplus">+[  --enable-debug-modules  Enable/disable debug info for specific modules],</span>
<a href="#l14.5795"></a><span id="l14.5795" class="difflineplus">+[ MOZ_DEBUG_MODULES=`echo $enableval| sed 's/,/ /g'` ] )</span>
<a href="#l14.5796"></a><span id="l14.5796" class="difflineplus">+</span>
<a href="#l14.5797"></a><span id="l14.5797" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5798"></a><span id="l14.5798" class="difflineplus">+dnl = Enable/disable generation of debugger info for specific modules only</span>
<a href="#l14.5799"></a><span id="l14.5799" class="difflineplus">+dnl =    the special module name ALL_MODULES can be used to denote all modules</span>
<a href="#l14.5800"></a><span id="l14.5800" class="difflineplus">+dnl =    module names beginning with ^ will be disabled</span>
<a href="#l14.5801"></a><span id="l14.5801" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5802"></a><span id="l14.5802" class="difflineplus">+MOZ_ARG_ENABLE_STRING(debugger-info-modules,</span>
<a href="#l14.5803"></a><span id="l14.5803" class="difflineplus">+[  --enable-debugger-info-modules</span>
<a href="#l14.5804"></a><span id="l14.5804" class="difflineplus">+                          Enable/disable debugger info for specific modules],</span>
<a href="#l14.5805"></a><span id="l14.5805" class="difflineplus">+[ for i in `echo $enableval | sed 's/,/ /g'`; do</span>
<a href="#l14.5806"></a><span id="l14.5806" class="difflineplus">+      dnl note that the list of module names is reversed as it is copied</span>
<a href="#l14.5807"></a><span id="l14.5807" class="difflineplus">+      dnl this is important, as it will allow config.mk to interpret stuff like</span>
<a href="#l14.5808"></a><span id="l14.5808" class="difflineplus">+      dnl &quot;^ALL_MODULES xpcom&quot; properly</span>
<a href="#l14.5809"></a><span id="l14.5809" class="difflineplus">+      if test &quot;$i&quot; = &quot;no&quot;; then</span>
<a href="#l14.5810"></a><span id="l14.5810" class="difflineplus">+        i=&quot;^ALL_MODULES&quot;</span>
<a href="#l14.5811"></a><span id="l14.5811" class="difflineplus">+      fi</span>
<a href="#l14.5812"></a><span id="l14.5812" class="difflineplus">+      if test &quot;$i&quot; = &quot;yes&quot;; then</span>
<a href="#l14.5813"></a><span id="l14.5813" class="difflineplus">+        i=&quot;ALL_MODULES&quot;</span>
<a href="#l14.5814"></a><span id="l14.5814" class="difflineplus">+      fi</span>
<a href="#l14.5815"></a><span id="l14.5815" class="difflineplus">+      MOZ_DBGRINFO_MODULES=&quot;$i $MOZ_DBGRINFO_MODULES&quot;;</span>
<a href="#l14.5816"></a><span id="l14.5816" class="difflineplus">+    done ])</span>
<a href="#l14.5817"></a><span id="l14.5817" class="difflineplus">+</span>
<a href="#l14.5818"></a><span id="l14.5818" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5819"></a><span id="l14.5819" class="difflineplus">+dnl Enable garbage collector</span>
<a href="#l14.5820"></a><span id="l14.5820" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5821"></a><span id="l14.5821" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(boehm,</span>
<a href="#l14.5822"></a><span id="l14.5822" class="difflineplus">+[  --enable-boehm          Enable the Boehm Garbage Collector],</span>
<a href="#l14.5823"></a><span id="l14.5823" class="difflineplus">+    GC_LEAK_DETECTOR=1,</span>
<a href="#l14.5824"></a><span id="l14.5824" class="difflineplus">+    GC_LEAK_DETECTOR= )</span>
<a href="#l14.5825"></a><span id="l14.5825" class="difflineplus">+if test -n &quot;$GC_LEAK_DETECTOR&quot;; then</span>
<a href="#l14.5826"></a><span id="l14.5826" class="difflineplus">+    AC_DEFINE(GC_LEAK_DETECTOR)</span>
<a href="#l14.5827"></a><span id="l14.5827" class="difflineplus">+fi</span>
<a href="#l14.5828"></a><span id="l14.5828" class="difflineplus">+</span>
<a href="#l14.5829"></a><span id="l14.5829" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5830"></a><span id="l14.5830" class="difflineplus">+dnl Disable runtime logging checks</span>
<a href="#l14.5831"></a><span id="l14.5831" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5832"></a><span id="l14.5832" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(logging,</span>
<a href="#l14.5833"></a><span id="l14.5833" class="difflineplus">+[  --disable-logging       Disable logging facilities],</span>
<a href="#l14.5834"></a><span id="l14.5834" class="difflineplus">+    NS_DISABLE_LOGGING=1,</span>
<a href="#l14.5835"></a><span id="l14.5835" class="difflineplus">+    NS_DISABLE_LOGGING= )</span>
<a href="#l14.5836"></a><span id="l14.5836" class="difflineplus">+if test &quot;$NS_DISABLE_LOGGING&quot;; then</span>
<a href="#l14.5837"></a><span id="l14.5837" class="difflineplus">+    AC_DEFINE(NS_DISABLE_LOGGING)</span>
<a href="#l14.5838"></a><span id="l14.5838" class="difflineplus">+else</span>
<a href="#l14.5839"></a><span id="l14.5839" class="difflineplus">+    AC_DEFINE(MOZ_LOGGING)</span>
<a href="#l14.5840"></a><span id="l14.5840" class="difflineplus">+fi</span>
<a href="#l14.5841"></a><span id="l14.5841" class="difflineplus">+</span>
<a href="#l14.5842"></a><span id="l14.5842" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5843"></a><span id="l14.5843" class="difflineplus">+dnl = dnl This will enable logging of addref, release, ctor, dtor.</span>
<a href="#l14.5844"></a><span id="l14.5844" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5845"></a><span id="l14.5845" class="difflineplus">+_ENABLE_LOGREFCNT=42</span>
<a href="#l14.5846"></a><span id="l14.5846" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(logrefcnt,</span>
<a href="#l14.5847"></a><span id="l14.5847" class="difflineplus">+[  --enable-logrefcnt      Enable logging of refcounts (default=debug) ],</span>
<a href="#l14.5848"></a><span id="l14.5848" class="difflineplus">+    _ENABLE_LOGREFCNT=1,</span>
<a href="#l14.5849"></a><span id="l14.5849" class="difflineplus">+    _ENABLE_LOGREFCNT= )</span>
<a href="#l14.5850"></a><span id="l14.5850" class="difflineplus">+if test &quot;$_ENABLE_LOGREFCNT&quot; = &quot;1&quot;; then</span>
<a href="#l14.5851"></a><span id="l14.5851" class="difflineplus">+    AC_DEFINE(FORCE_BUILD_REFCNT_LOGGING)</span>
<a href="#l14.5852"></a><span id="l14.5852" class="difflineplus">+elif test -z &quot;$_ENABLE_LOGREFCNT&quot;; then</span>
<a href="#l14.5853"></a><span id="l14.5853" class="difflineplus">+    AC_DEFINE(NO_BUILD_REFCNT_LOGGING)</span>
<a href="#l14.5854"></a><span id="l14.5854" class="difflineplus">+fi</span>
<a href="#l14.5855"></a><span id="l14.5855" class="difflineplus">+</span>
<a href="#l14.5856"></a><span id="l14.5856" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5857"></a><span id="l14.5857" class="difflineplus">+dnl = Enable trace malloc</span>
<a href="#l14.5858"></a><span id="l14.5858" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5859"></a><span id="l14.5859" class="difflineplus">+NS_TRACE_MALLOC=${MOZ_TRACE_MALLOC}</span>
<a href="#l14.5860"></a><span id="l14.5860" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(trace-malloc,</span>
<a href="#l14.5861"></a><span id="l14.5861" class="difflineplus">+[  --enable-trace-malloc   Enable malloc tracing],</span>
<a href="#l14.5862"></a><span id="l14.5862" class="difflineplus">+    NS_TRACE_MALLOC=1,</span>
<a href="#l14.5863"></a><span id="l14.5863" class="difflineplus">+    NS_TRACE_MALLOC= )</span>
<a href="#l14.5864"></a><span id="l14.5864" class="difflineplus">+if test &quot;$NS_TRACE_MALLOC&quot;; then</span>
<a href="#l14.5865"></a><span id="l14.5865" class="difflineplus">+  # Please, Mr. Linker Man, don't take away our symbol names</span>
<a href="#l14.5866"></a><span id="l14.5866" class="difflineplus">+  MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS=</span>
<a href="#l14.5867"></a><span id="l14.5867" class="difflineplus">+  USE_ELF_DYNSTR_GC=</span>
<a href="#l14.5868"></a><span id="l14.5868" class="difflineplus">+  AC_DEFINE(NS_TRACE_MALLOC)</span>
<a href="#l14.5869"></a><span id="l14.5869" class="difflineplus">+fi</span>
<a href="#l14.5870"></a><span id="l14.5870" class="difflineplus">+AC_SUBST(NS_TRACE_MALLOC)</span>
<a href="#l14.5871"></a><span id="l14.5871" class="difflineplus">+</span>
<a href="#l14.5872"></a><span id="l14.5872" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5873"></a><span id="l14.5873" class="difflineplus">+dnl = Enable jemalloc</span>
<a href="#l14.5874"></a><span id="l14.5874" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5875"></a><span id="l14.5875" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(jemalloc,</span>
<a href="#l14.5876"></a><span id="l14.5876" class="difflineplus">+[  --enable-jemalloc       Replace memory allocator with jemalloc],</span>
<a href="#l14.5877"></a><span id="l14.5877" class="difflineplus">+    MOZ_MEMORY=1,</span>
<a href="#l14.5878"></a><span id="l14.5878" class="difflineplus">+    MOZ_MEMORY=)</span>
<a href="#l14.5879"></a><span id="l14.5879" class="difflineplus">+</span>
<a href="#l14.5880"></a><span id="l14.5880" class="difflineplus">+if test &quot;$NS_TRACE_MALLOC&quot;; then</span>
<a href="#l14.5881"></a><span id="l14.5881" class="difflineplus">+    MOZ_MEMORY=</span>
<a href="#l14.5882"></a><span id="l14.5882" class="difflineplus">+fi</span>
<a href="#l14.5883"></a><span id="l14.5883" class="difflineplus">+</span>
<a href="#l14.5884"></a><span id="l14.5884" class="difflineplus">+if test &quot;$MOZ_MEMORY&quot;; then</span>
<a href="#l14.5885"></a><span id="l14.5885" class="difflineplus">+</span>
<a href="#l14.5886"></a><span id="l14.5886" class="difflineplus">+  dnl Don't try to run compiler tests on Windows  </span>
<a href="#l14.5887"></a><span id="l14.5887" class="difflineplus">+  if test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l14.5888"></a><span id="l14.5888" class="difflineplus">+    if test -z &quot;$HAVE_64BIT_OS&quot;; then</span>
<a href="#l14.5889"></a><span id="l14.5889" class="difflineplus">+      AC_DEFINE_UNQUOTED([MOZ_MEMORY_SIZEOF_PTR_2POW], 2)</span>
<a href="#l14.5890"></a><span id="l14.5890" class="difflineplus">+    else</span>
<a href="#l14.5891"></a><span id="l14.5891" class="difflineplus">+      AC_DEFINE_UNQUOTED([MOZ_MEMORY_SIZEOF_PTR_2POW], 3)</span>
<a href="#l14.5892"></a><span id="l14.5892" class="difflineplus">+    fi</span>
<a href="#l14.5893"></a><span id="l14.5893" class="difflineplus">+  else</span>
<a href="#l14.5894"></a><span id="l14.5894" class="difflineplus">+    AC_CHECK_SIZEOF([int *], [4])</span>
<a href="#l14.5895"></a><span id="l14.5895" class="difflineplus">+    case &quot;${ac_cv_sizeof_int_p}&quot; in</span>
<a href="#l14.5896"></a><span id="l14.5896" class="difflineplus">+    4)</span>
<a href="#l14.5897"></a><span id="l14.5897" class="difflineplus">+      AC_DEFINE_UNQUOTED([MOZ_MEMORY_SIZEOF_PTR_2POW], 2)</span>
<a href="#l14.5898"></a><span id="l14.5898" class="difflineplus">+      ;;</span>
<a href="#l14.5899"></a><span id="l14.5899" class="difflineplus">+    8)</span>
<a href="#l14.5900"></a><span id="l14.5900" class="difflineplus">+      AC_DEFINE_UNQUOTED([MOZ_MEMORY_SIZEOF_PTR_2POW], 3)</span>
<a href="#l14.5901"></a><span id="l14.5901" class="difflineplus">+      ;;</span>
<a href="#l14.5902"></a><span id="l14.5902" class="difflineplus">+    *)</span>
<a href="#l14.5903"></a><span id="l14.5903" class="difflineplus">+      AC_MSG_ERROR([Unexpected pointer size])</span>
<a href="#l14.5904"></a><span id="l14.5904" class="difflineplus">+      ;;</span>
<a href="#l14.5905"></a><span id="l14.5905" class="difflineplus">+    esac</span>
<a href="#l14.5906"></a><span id="l14.5906" class="difflineplus">+  fi</span>
<a href="#l14.5907"></a><span id="l14.5907" class="difflineplus">+</span>
<a href="#l14.5908"></a><span id="l14.5908" class="difflineplus">+  AC_DEFINE(MOZ_MEMORY)</span>
<a href="#l14.5909"></a><span id="l14.5909" class="difflineplus">+  if test &quot;x$MOZ_DEBUG&quot; = &quot;x1&quot;; then</span>
<a href="#l14.5910"></a><span id="l14.5910" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_DEBUG)</span>
<a href="#l14.5911"></a><span id="l14.5911" class="difflineplus">+  fi</span>
<a href="#l14.5912"></a><span id="l14.5912" class="difflineplus">+  dnl The generic feature tests that determine how to compute ncpus are long and</span>
<a href="#l14.5913"></a><span id="l14.5913" class="difflineplus">+  dnl complicated.  Therefore, simply define special cpp variables for the</span>
<a href="#l14.5914"></a><span id="l14.5914" class="difflineplus">+  dnl platforms we have special knowledge of.</span>
<a href="#l14.5915"></a><span id="l14.5915" class="difflineplus">+  case &quot;${target_os}&quot; in</span>
<a href="#l14.5916"></a><span id="l14.5916" class="difflineplus">+  darwin*)</span>
<a href="#l14.5917"></a><span id="l14.5917" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_DARWIN)</span>
<a href="#l14.5918"></a><span id="l14.5918" class="difflineplus">+    ;;</span>
<a href="#l14.5919"></a><span id="l14.5919" class="difflineplus">+  *-freebsd*)</span>
<a href="#l14.5920"></a><span id="l14.5920" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_BSD)</span>
<a href="#l14.5921"></a><span id="l14.5921" class="difflineplus">+    ;;</span>
<a href="#l14.5922"></a><span id="l14.5922" class="difflineplus">+  *linux*)</span>
<a href="#l14.5923"></a><span id="l14.5923" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_LINUX)</span>
<a href="#l14.5924"></a><span id="l14.5924" class="difflineplus">+    ;;</span>
<a href="#l14.5925"></a><span id="l14.5925" class="difflineplus">+  netbsd*)</span>
<a href="#l14.5926"></a><span id="l14.5926" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_BSD)</span>
<a href="#l14.5927"></a><span id="l14.5927" class="difflineplus">+    ;;</span>
<a href="#l14.5928"></a><span id="l14.5928" class="difflineplus">+  solaris*)</span>
<a href="#l14.5929"></a><span id="l14.5929" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_SOLARIS)</span>
<a href="#l14.5930"></a><span id="l14.5930" class="difflineplus">+    ;;</span>
<a href="#l14.5931"></a><span id="l14.5931" class="difflineplus">+  msvc*|mks*|cygwin*|mingw*)</span>
<a href="#l14.5932"></a><span id="l14.5932" class="difflineplus">+    AC_DEFINE(MOZ_MEMORY_WINDOWS)</span>
<a href="#l14.5933"></a><span id="l14.5933" class="difflineplus">+    dnl XXX: should test for vc8sp1 here, otherwise patching the crt src</span>
<a href="#l14.5934"></a><span id="l14.5934" class="difflineplus">+    dnl will fail miserably</span>
<a href="#l14.5935"></a><span id="l14.5935" class="difflineplus">+    if test &quot;$_CC_SUITE&quot; -lt &quot;8&quot;; then</span>
<a href="#l14.5936"></a><span id="l14.5936" class="difflineplus">+        AC_MSG_ERROR([Building jemalloc requires Visual C++ 2005 or better])</span>
<a href="#l14.5937"></a><span id="l14.5937" class="difflineplus">+    fi</span>
<a href="#l14.5938"></a><span id="l14.5938" class="difflineplus">+    if test -z &quot;$WIN32_CRT_SRC_DIR&quot; -a -z &quot;$WIN32_CUSTOM_CRT_DIR&quot;; then</span>
<a href="#l14.5939"></a><span id="l14.5939" class="difflineplus">+      if test -z &quot;$VCINSTALLDIR&quot; -o ! -d &quot;$VCINSTALLDIR&quot;; then</span>
<a href="#l14.5940"></a><span id="l14.5940" class="difflineplus">+        AC_MSG_ERROR([When building jemalloc, either set WIN32_CRT_SRC_DIR to the path to the Visual C++ CRT source (usually VCINSTALLDIR\crt\src), or set WIN32_CUSTOM_CRT_DIR to the path to a folder containing a pre-built CRT DLL.])</span>
<a href="#l14.5941"></a><span id="l14.5941" class="difflineplus">+      else</span>
<a href="#l14.5942"></a><span id="l14.5942" class="difflineplus">+        WIN32_CRT_SRC_DIR=&quot;$VCINSTALLDIR\crt\src&quot;</span>
<a href="#l14.5943"></a><span id="l14.5943" class="difflineplus">+      fi</span>
<a href="#l14.5944"></a><span id="l14.5944" class="difflineplus">+    fi</span>
<a href="#l14.5945"></a><span id="l14.5945" class="difflineplus">+    if test -z &quot;$WIN32_CRT_SRC_DIR&quot;; then</span>
<a href="#l14.5946"></a><span id="l14.5946" class="difflineplus">+      # pre-built dll</span>
<a href="#l14.5947"></a><span id="l14.5947" class="difflineplus">+      WIN32_CUSTOM_CRT_DIR=`cd &quot;$WIN32_CUSTOM_CRT_DIR&quot; &amp;&amp; pwd`</span>
<a href="#l14.5948"></a><span id="l14.5948" class="difflineplus">+      _WIN_UNIX_CRT_PATH=&quot;$WIN32_CUSTOM_CRT_DIR&quot;</span>
<a href="#l14.5949"></a><span id="l14.5949" class="difflineplus">+    else</span>
<a href="#l14.5950"></a><span id="l14.5950" class="difflineplus">+      # CRT source directory</span>
<a href="#l14.5951"></a><span id="l14.5951" class="difflineplus">+      WIN32_CRT_SRC_DIR=`cd &quot;$WIN32_CRT_SRC_DIR&quot; &amp;&amp; pwd`</span>
<a href="#l14.5952"></a><span id="l14.5952" class="difflineplus">+      _CRT_BASE_DIR=`basename &quot;$WIN32_CRT_SRC_DIR&quot;`</span>
<a href="#l14.5953"></a><span id="l14.5953" class="difflineplus">+      _WIN_UNIX_CRT_PATH=&quot;$_objdir/mozilla/memory/jemalloc/$_CRT_BASE_DIR/build/intel&quot;</span>
<a href="#l14.5954"></a><span id="l14.5954" class="difflineplus">+    fi</span>
<a href="#l14.5955"></a><span id="l14.5955" class="difflineplus">+    dnl need win32 paths in LIB, hence this python abuse.  extra brackets</span>
<a href="#l14.5956"></a><span id="l14.5956" class="difflineplus">+    dnl are to avoid m4</span>
<a href="#l14.5957"></a><span id="l14.5957" class="difflineplus">+    _WIN_CRT_PATH=[`$PYTHON -c 'import sys, os.path; print os.path.normpath(sys.argv[1])' &quot;$_WIN_UNIX_CRT_PATH&quot;`]</span>
<a href="#l14.5958"></a><span id="l14.5958" class="difflineplus">+    MOZ_LIB=&quot;$_WIN_CRT_PATH;$LIB&quot;</span>
<a href="#l14.5959"></a><span id="l14.5959" class="difflineplus">+    dnl Needs to be in PATH too, since our tools will wind up linked against it.</span>
<a href="#l14.5960"></a><span id="l14.5960" class="difflineplus">+    dnl This needs to be unix style.</span>
<a href="#l14.5961"></a><span id="l14.5961" class="difflineplus">+    MOZ_PATH=&quot;$PATH:$_WIN_UNIX_CRT_PATH&quot;</span>
<a href="#l14.5962"></a><span id="l14.5962" class="difflineplus">+    dnl Statically link the C++ stdlib.  We only use this for Breakpad anyway.</span>
<a href="#l14.5963"></a><span id="l14.5963" class="difflineplus">+    AC_DEFINE(_STATIC_CPPLIB)</span>
<a href="#l14.5964"></a><span id="l14.5964" class="difflineplus">+    dnl Don't generate a manifest, since we're linking to a custom CRT.</span>
<a href="#l14.5965"></a><span id="l14.5965" class="difflineplus">+    LDFLAGS=&quot;$LDFLAGS -MANIFEST:NO&quot;</span>
<a href="#l14.5966"></a><span id="l14.5966" class="difflineplus">+    dnl Also pass this to NSPR/NSS</span>
<a href="#l14.5967"></a><span id="l14.5967" class="difflineplus">+    DLLFLAGS=&quot;$DLLFLAGS -MANIFEST:NO&quot;</span>
<a href="#l14.5968"></a><span id="l14.5968" class="difflineplus">+    export DLLFLAGS</span>
<a href="#l14.5969"></a><span id="l14.5969" class="difflineplus">+    ;;</span>
<a href="#l14.5970"></a><span id="l14.5970" class="difflineplus">+  *)</span>
<a href="#l14.5971"></a><span id="l14.5971" class="difflineplus">+    AC_MSG_ERROR([--enable-jemalloc not supported on ${target}])</span>
<a href="#l14.5972"></a><span id="l14.5972" class="difflineplus">+    ;;</span>
<a href="#l14.5973"></a><span id="l14.5973" class="difflineplus">+  esac</span>
<a href="#l14.5974"></a><span id="l14.5974" class="difflineplus">+</span>
<a href="#l14.5975"></a><span id="l14.5975" class="difflineplus">+  AC_ARG_WITH([valgrind],</span>
<a href="#l14.5976"></a><span id="l14.5976" class="difflineplus">+    [  --with-valgrind         Enable valgrind integration hooks],</span>
<a href="#l14.5977"></a><span id="l14.5977" class="difflineplus">+    [enable_valgrind=&quot;yes&quot;], [enable_valgrind=&quot;no&quot;])</span>
<a href="#l14.5978"></a><span id="l14.5978" class="difflineplus">+  AC_CHECK_HEADER([valgrind/valgrind.h], [], [enable_valgrind=&quot;no&quot;])</span>
<a href="#l14.5979"></a><span id="l14.5979" class="difflineplus">+  if test &quot;x$enable_valgrind&quot; = &quot;xyes&quot; ; then</span>
<a href="#l14.5980"></a><span id="l14.5980" class="difflineplus">+    AC_DEFINE(MOZ_VALGRIND)</span>
<a href="#l14.5981"></a><span id="l14.5981" class="difflineplus">+  fi</span>
<a href="#l14.5982"></a><span id="l14.5982" class="difflineplus">+fi</span>
<a href="#l14.5983"></a><span id="l14.5983" class="difflineplus">+AC_SUBST(MOZ_MEMORY)</span>
<a href="#l14.5984"></a><span id="l14.5984" class="difflineplus">+AC_SUBST(WIN32_CRT_SRC_DIR)</span>
<a href="#l14.5985"></a><span id="l14.5985" class="difflineplus">+AC_SUBST(WIN32_CUSTOM_CRT_DIR)</span>
<a href="#l14.5986"></a><span id="l14.5986" class="difflineplus">+AC_SUBST(MOZ_LIB)</span>
<a href="#l14.5987"></a><span id="l14.5987" class="difflineplus">+AC_SUBST(MOZ_PATH)</span>
<a href="#l14.5988"></a><span id="l14.5988" class="difflineplus">+dnl Need to set this for make because NSS doesn't have configure</span>
<a href="#l14.5989"></a><span id="l14.5989" class="difflineplus">+AC_SUBST(DLLFLAGS)</span>
<a href="#l14.5990"></a><span id="l14.5990" class="difflineplus">+</span>
<a href="#l14.5991"></a><span id="l14.5991" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5992"></a><span id="l14.5992" class="difflineplus">+dnl = Use malloc wrapper lib</span>
<a href="#l14.5993"></a><span id="l14.5993" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.5994"></a><span id="l14.5994" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(wrap-malloc,</span>
<a href="#l14.5995"></a><span id="l14.5995" class="difflineplus">+[  --enable-wrap-malloc    Wrap malloc calls (gnu linker only)],</span>
<a href="#l14.5996"></a><span id="l14.5996" class="difflineplus">+    _WRAP_MALLOC=1,</span>
<a href="#l14.5997"></a><span id="l14.5997" class="difflineplus">+    _WRAP_MALLOC= )</span>
<a href="#l14.5998"></a><span id="l14.5998" class="difflineplus">+</span>
<a href="#l14.5999"></a><span id="l14.5999" class="difflineplus">+if test -n &quot;$_WRAP_MALLOC&quot;; then</span>
<a href="#l14.6000"></a><span id="l14.6000" class="difflineplus">+    if test &quot;$GNU_CC&quot;; then</span>
<a href="#l14.6001"></a><span id="l14.6001" class="difflineplus">+    WRAP_MALLOC_CFLAGS=&quot;${LDFLAGS} -Wl,--wrap -Wl,malloc -Wl,--wrap -Wl,free -Wl,--wrap -Wl,realloc -Wl,--wrap -Wl,__builtin_new -Wl,--wrap -Wl,__builtin_vec_new -Wl,--wrap -Wl,__builtin_delete -Wl,--wrap -Wl,__builtin_vec_delete -Wl,--wrap -Wl,PR_Free -Wl,--wrap -Wl,PR_Malloc -Wl,--wrap -Wl,PR_Calloc -Wl,--wrap -Wl,PR_Realloc&quot;</span>
<a href="#l14.6002"></a><span id="l14.6002" class="difflineplus">+    MKSHLIB='$(CXX) $(DSO_LDOPTS) $(WRAP_MALLOC_CFLAGS) -o $@'</span>
<a href="#l14.6003"></a><span id="l14.6003" class="difflineplus">+    fi</span>
<a href="#l14.6004"></a><span id="l14.6004" class="difflineplus">+fi</span>
<a href="#l14.6005"></a><span id="l14.6005" class="difflineplus">+</span>
<a href="#l14.6006"></a><span id="l14.6006" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6007"></a><span id="l14.6007" class="difflineplus">+dnl = Location of malloc wrapper lib</span>
<a href="#l14.6008"></a><span id="l14.6008" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6009"></a><span id="l14.6009" class="difflineplus">+MOZ_ARG_WITH_STRING(wrap-malloc,</span>
<a href="#l14.6010"></a><span id="l14.6010" class="difflineplus">+[  --with-wrap-malloc=DIR  Location of malloc wrapper library],</span>
<a href="#l14.6011"></a><span id="l14.6011" class="difflineplus">+    WRAP_MALLOC_LIB=$withval)</span>
<a href="#l14.6012"></a><span id="l14.6012" class="difflineplus">+</span>
<a href="#l14.6013"></a><span id="l14.6013" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6014"></a><span id="l14.6014" class="difflineplus">+dnl = Use Electric Fence</span>
<a href="#l14.6015"></a><span id="l14.6015" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6016"></a><span id="l14.6016" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(efence,</span>
<a href="#l14.6017"></a><span id="l14.6017" class="difflineplus">+[  --enable-efence         Link with Electric Fence],</span>
<a href="#l14.6018"></a><span id="l14.6018" class="difflineplus">+    _ENABLE_EFENCE=1,</span>
<a href="#l14.6019"></a><span id="l14.6019" class="difflineplus">+    _ENABLE_EFENCE= )</span>
<a href="#l14.6020"></a><span id="l14.6020" class="difflineplus">+if test -n &quot;$_ENABLE_EFENCE&quot;; then</span>
<a href="#l14.6021"></a><span id="l14.6021" class="difflineplus">+    AC_CHECK_LIB(efence,malloc)</span>
<a href="#l14.6022"></a><span id="l14.6022" class="difflineplus">+fi</span>
<a href="#l14.6023"></a><span id="l14.6023" class="difflineplus">+</span>
<a href="#l14.6024"></a><span id="l14.6024" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6025"></a><span id="l14.6025" class="difflineplus">+dnl jprof</span>
<a href="#l14.6026"></a><span id="l14.6026" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6027"></a><span id="l14.6027" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(jprof,</span>
<a href="#l14.6028"></a><span id="l14.6028" class="difflineplus">+[  --enable-jprof          Enable jprof profiling tool (needs mozilla/tools/jprof)],</span>
<a href="#l14.6029"></a><span id="l14.6029" class="difflineplus">+    MOZ_JPROF=1,</span>
<a href="#l14.6030"></a><span id="l14.6030" class="difflineplus">+    MOZ_JPROF= )</span>
<a href="#l14.6031"></a><span id="l14.6031" class="difflineplus">+if test -n &quot;$MOZ_JPROF&quot;; then</span>
<a href="#l14.6032"></a><span id="l14.6032" class="difflineplus">+    AC_DEFINE(MOZ_JPROF)</span>
<a href="#l14.6033"></a><span id="l14.6033" class="difflineplus">+fi</span>
<a href="#l14.6034"></a><span id="l14.6034" class="difflineplus">+</span>
<a href="#l14.6035"></a><span id="l14.6035" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6036"></a><span id="l14.6036" class="difflineplus">+dnl shark</span>
<a href="#l14.6037"></a><span id="l14.6037" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6038"></a><span id="l14.6038" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(shark,</span>
<a href="#l14.6039"></a><span id="l14.6039" class="difflineplus">+[  --enable-shark          Enable shark remote profiling (needs CHUD framework)],</span>
<a href="#l14.6040"></a><span id="l14.6040" class="difflineplus">+    MOZ_SHARK=1,</span>
<a href="#l14.6041"></a><span id="l14.6041" class="difflineplus">+    MOZ_SHARK= )</span>
<a href="#l14.6042"></a><span id="l14.6042" class="difflineplus">+if test -n &quot;$MOZ_SHARK&quot;; then</span>
<a href="#l14.6043"></a><span id="l14.6043" class="difflineplus">+    AC_DEFINE(MOZ_SHARK)</span>
<a href="#l14.6044"></a><span id="l14.6044" class="difflineplus">+fi</span>
<a href="#l14.6045"></a><span id="l14.6045" class="difflineplus">+</span>
<a href="#l14.6046"></a><span id="l14.6046" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6047"></a><span id="l14.6047" class="difflineplus">+dnl = Enable static checking using gcc-dehydra</span>
<a href="#l14.6048"></a><span id="l14.6048" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6049"></a><span id="l14.6049" class="difflineplus">+</span>
<a href="#l14.6050"></a><span id="l14.6050" class="difflineplus">+MOZ_ARG_WITH_STRING(static-checking,</span>
<a href="#l14.6051"></a><span id="l14.6051" class="difflineplus">+[  --with-static-checking=path/to/gcc_dehydra.so</span>
<a href="#l14.6052"></a><span id="l14.6052" class="difflineplus">+                            Enable static checking of code using GCC-dehydra],</span>
<a href="#l14.6053"></a><span id="l14.6053" class="difflineplus">+    DEHYDRA_PATH=$withval,</span>
<a href="#l14.6054"></a><span id="l14.6054" class="difflineplus">+    DEHYDRA_PATH= )</span>
<a href="#l14.6055"></a><span id="l14.6055" class="difflineplus">+</span>
<a href="#l14.6056"></a><span id="l14.6056" class="difflineplus">+if test -n &quot;$DEHYDRA_PATH&quot;; then</span>
<a href="#l14.6057"></a><span id="l14.6057" class="difflineplus">+    if ! test -f &quot;$DEHYDRA_PATH&quot;; then</span>
<a href="#l14.6058"></a><span id="l14.6058" class="difflineplus">+        AC_MSG_ERROR([The dehydra plugin is not at the specified path.])</span>
<a href="#l14.6059"></a><span id="l14.6059" class="difflineplus">+    fi</span>
<a href="#l14.6060"></a><span id="l14.6060" class="difflineplus">+    AC_DEFINE(NS_STATIC_CHECKING)</span>
<a href="#l14.6061"></a><span id="l14.6061" class="difflineplus">+fi</span>
<a href="#l14.6062"></a><span id="l14.6062" class="difflineplus">+AC_SUBST(DEHYDRA_PATH)</span>
<a href="#l14.6063"></a><span id="l14.6063" class="difflineplus">+</span>
<a href="#l14.6064"></a><span id="l14.6064" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6065"></a><span id="l14.6065" class="difflineplus">+dnl = Enable stripping of libs &amp; executables</span>
<a href="#l14.6066"></a><span id="l14.6066" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6067"></a><span id="l14.6067" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(strip,</span>
<a href="#l14.6068"></a><span id="l14.6068" class="difflineplus">+[  --enable-strip          Enable stripping of libs &amp; executables ],</span>
<a href="#l14.6069"></a><span id="l14.6069" class="difflineplus">+    ENABLE_STRIP=1,</span>
<a href="#l14.6070"></a><span id="l14.6070" class="difflineplus">+    ENABLE_STRIP= )</span>
<a href="#l14.6071"></a><span id="l14.6071" class="difflineplus">+</span>
<a href="#l14.6072"></a><span id="l14.6072" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6073"></a><span id="l14.6073" class="difflineplus">+dnl = Enable stripping of libs &amp; executables when packaging</span>
<a href="#l14.6074"></a><span id="l14.6074" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6075"></a><span id="l14.6075" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(install-strip,</span>
<a href="#l14.6076"></a><span id="l14.6076" class="difflineplus">+[  --enable-install-strip  Enable stripping of libs &amp; executables when packaging ],</span>
<a href="#l14.6077"></a><span id="l14.6077" class="difflineplus">+    PKG_SKIP_STRIP= ,</span>
<a href="#l14.6078"></a><span id="l14.6078" class="difflineplus">+    PKG_SKIP_STRIP=1)</span>
<a href="#l14.6079"></a><span id="l14.6079" class="difflineplus">+</span>
<a href="#l14.6080"></a><span id="l14.6080" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6081"></a><span id="l14.6081" class="difflineplus">+dnl = --enable-elf-dynstr-gc</span>
<a href="#l14.6082"></a><span id="l14.6082" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6083"></a><span id="l14.6083" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(elf-dynstr-gc,</span>
<a href="#l14.6084"></a><span id="l14.6084" class="difflineplus">+[  --enable-elf-dynstr-gc  Enable elf dynstr garbage collector (opt builds only)],</span>
<a href="#l14.6085"></a><span id="l14.6085" class="difflineplus">+    USE_ELF_DYNSTR_GC=1,</span>
<a href="#l14.6086"></a><span id="l14.6086" class="difflineplus">+    USE_ELF_DYNSTR_GC= )</span>
<a href="#l14.6087"></a><span id="l14.6087" class="difflineplus">+</span>
<a href="#l14.6088"></a><span id="l14.6088" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6089"></a><span id="l14.6089" class="difflineplus">+dnl = --enable-old-abi-compat-wrappers</span>
<a href="#l14.6090"></a><span id="l14.6090" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6091"></a><span id="l14.6091" class="difflineplus">+dnl on x86 linux, the current builds of some popular plugins (notably</span>
<a href="#l14.6092"></a><span id="l14.6092" class="difflineplus">+dnl flashplayer and real) expect a few builtin symbols from libgcc</span>
<a href="#l14.6093"></a><span id="l14.6093" class="difflineplus">+dnl which were available in some older versions of gcc.  However,</span>
<a href="#l14.6094"></a><span id="l14.6094" class="difflineplus">+dnl they're _NOT_ available in newer versions of gcc (eg 3.1), so if</span>
<a href="#l14.6095"></a><span id="l14.6095" class="difflineplus">+dnl we want those plugin to work with a gcc-3.1 built binary, we need</span>
<a href="#l14.6096"></a><span id="l14.6096" class="difflineplus">+dnl to provide these symbols.  MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS defaults</span>
<a href="#l14.6097"></a><span id="l14.6097" class="difflineplus">+dnl to true on x86 linux, and false everywhere else.</span>
<a href="#l14.6098"></a><span id="l14.6098" class="difflineplus">+dnl</span>
<a href="#l14.6099"></a><span id="l14.6099" class="difflineplus">+</span>
<a href="#l14.6100"></a><span id="l14.6100" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(old-abi-compat-wrappers,</span>
<a href="#l14.6101"></a><span id="l14.6101" class="difflineplus">+[  --enable-old-abi-compat-wrappers</span>
<a href="#l14.6102"></a><span id="l14.6102" class="difflineplus">+                          Support old GCC ABI symbols to ease the pain </span>
<a href="#l14.6103"></a><span id="l14.6103" class="difflineplus">+                          of the linux compiler change],</span>
<a href="#l14.6104"></a><span id="l14.6104" class="difflineplus">+    MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS=1,</span>
<a href="#l14.6105"></a><span id="l14.6105" class="difflineplus">+    MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS= )</span>
<a href="#l14.6106"></a><span id="l14.6106" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.6107"></a><span id="l14.6107" class="difflineplus">+if test &quot;$MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS&quot;; then</span>
<a href="#l14.6108"></a><span id="l14.6108" class="difflineplus">+    AC_LANG_SAVE</span>
<a href="#l14.6109"></a><span id="l14.6109" class="difflineplus">+    AC_LANG_CPLUSPLUS</span>
<a href="#l14.6110"></a><span id="l14.6110" class="difflineplus">+    AC_CHECK_FUNCS(__builtin_vec_new __builtin_vec_delete __builtin_new __builtin_delete __pure_virtual)</span>
<a href="#l14.6111"></a><span id="l14.6111" class="difflineplus">+    AC_LANG_RESTORE</span>
<a href="#l14.6112"></a><span id="l14.6112" class="difflineplus">+    AC_DEFINE(MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS)</span>
<a href="#l14.6113"></a><span id="l14.6113" class="difflineplus">+fi</span>
<a href="#l14.6114"></a><span id="l14.6114" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.6115"></a><span id="l14.6115" class="difflineplus">+</span>
<a href="#l14.6116"></a><span id="l14.6116" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6117"></a><span id="l14.6117" class="difflineplus">+dnl = --enable-prebinding</span>
<a href="#l14.6118"></a><span id="l14.6118" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6119"></a><span id="l14.6119" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(prebinding,</span>
<a href="#l14.6120"></a><span id="l14.6120" class="difflineplus">+[  --enable-prebinding     Enable prebinding (Mac OS X only)],</span>
<a href="#l14.6121"></a><span id="l14.6121" class="difflineplus">+    USE_PREBINDING=1,</span>
<a href="#l14.6122"></a><span id="l14.6122" class="difflineplus">+    USE_PREBINDING= )</span>
<a href="#l14.6123"></a><span id="l14.6123" class="difflineplus">+</span>
<a href="#l14.6124"></a><span id="l14.6124" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6125"></a><span id="l14.6125" class="difflineplus">+dnl = </span>
<a href="#l14.6126"></a><span id="l14.6126" class="difflineplus">+dnl = Profiling and Instrumenting</span>
<a href="#l14.6127"></a><span id="l14.6127" class="difflineplus">+dnl = </span>
<a href="#l14.6128"></a><span id="l14.6128" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6129"></a><span id="l14.6129" class="difflineplus">+MOZ_ARG_HEADER(Profiling and Instrumenting)</span>
<a href="#l14.6130"></a><span id="l14.6130" class="difflineplus">+</span>
<a href="#l14.6131"></a><span id="l14.6131" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6132"></a><span id="l14.6132" class="difflineplus">+dnl = Enable timeline service, which provides lightweight</span>
<a href="#l14.6133"></a><span id="l14.6133" class="difflineplus">+dnl = instrumentation of mozilla for performance measurement.</span>
<a href="#l14.6134"></a><span id="l14.6134" class="difflineplus">+dnl = Timeline is off by default.</span>
<a href="#l14.6135"></a><span id="l14.6135" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6136"></a><span id="l14.6136" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(timeline,</span>
<a href="#l14.6137"></a><span id="l14.6137" class="difflineplus">+[  --enable-timeline       Enable timeline services ],</span>
<a href="#l14.6138"></a><span id="l14.6138" class="difflineplus">+    MOZ_TIMELINE=1,</span>
<a href="#l14.6139"></a><span id="l14.6139" class="difflineplus">+    MOZ_TIMELINE= )</span>
<a href="#l14.6140"></a><span id="l14.6140" class="difflineplus">+if test -n &quot;$MOZ_TIMELINE&quot;; then</span>
<a href="#l14.6141"></a><span id="l14.6141" class="difflineplus">+    AC_DEFINE(MOZ_TIMELINE)</span>
<a href="#l14.6142"></a><span id="l14.6142" class="difflineplus">+fi</span>
<a href="#l14.6143"></a><span id="l14.6143" class="difflineplus">+</span>
<a href="#l14.6144"></a><span id="l14.6144" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6145"></a><span id="l14.6145" class="difflineplus">+dnl Turn on reflow counting</span>
<a href="#l14.6146"></a><span id="l14.6146" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6147"></a><span id="l14.6147" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(reflow-perf,</span>
<a href="#l14.6148"></a><span id="l14.6148" class="difflineplus">+[  --enable-reflow-perf    Enable reflow performance tracing],</span>
<a href="#l14.6149"></a><span id="l14.6149" class="difflineplus">+    MOZ_REFLOW_PERF=1,</span>
<a href="#l14.6150"></a><span id="l14.6150" class="difflineplus">+    MOZ_REFLOW_PERF= )</span>
<a href="#l14.6151"></a><span id="l14.6151" class="difflineplus">+if test -n &quot;$MOZ_REFLOW_PREF&quot;; then</span>
<a href="#l14.6152"></a><span id="l14.6152" class="difflineplus">+    AC_DEFINE(MOZ_REFLOW_PREF)</span>
<a href="#l14.6153"></a><span id="l14.6153" class="difflineplus">+fi</span>
<a href="#l14.6154"></a><span id="l14.6154" class="difflineplus">+AC_SUBST(MOZ_REFLOW_PERF)</span>
<a href="#l14.6155"></a><span id="l14.6155" class="difflineplus">+</span>
<a href="#l14.6156"></a><span id="l14.6156" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6157"></a><span id="l14.6157" class="difflineplus">+dnl Enable performance metrics.</span>
<a href="#l14.6158"></a><span id="l14.6158" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6159"></a><span id="l14.6159" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(perf-metrics,</span>
<a href="#l14.6160"></a><span id="l14.6160" class="difflineplus">+[  --enable-perf-metrics   Enable performance metrics],</span>
<a href="#l14.6161"></a><span id="l14.6161" class="difflineplus">+    MOZ_PERF_METRICS=1,</span>
<a href="#l14.6162"></a><span id="l14.6162" class="difflineplus">+    MOZ_PERF_METRICS= )</span>
<a href="#l14.6163"></a><span id="l14.6163" class="difflineplus">+if test -n &quot;$MOZ_PERF_METRICS&quot;; then</span>
<a href="#l14.6164"></a><span id="l14.6164" class="difflineplus">+    AC_DEFINE(MOZ_PERF_METRICS)</span>
<a href="#l14.6165"></a><span id="l14.6165" class="difflineplus">+fi</span>
<a href="#l14.6166"></a><span id="l14.6166" class="difflineplus">+</span>
<a href="#l14.6167"></a><span id="l14.6167" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6168"></a><span id="l14.6168" class="difflineplus">+dnl Enable code size metrics.</span>
<a href="#l14.6169"></a><span id="l14.6169" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6170"></a><span id="l14.6170" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(codesighs,</span>
<a href="#l14.6171"></a><span id="l14.6171" class="difflineplus">+[  --enable-codesighs      Enable code size analysis tools],</span>
<a href="#l14.6172"></a><span id="l14.6172" class="difflineplus">+    _ENABLE_CODESIGHS=1,</span>
<a href="#l14.6173"></a><span id="l14.6173" class="difflineplus">+    _ENABLE_CODESIGHS= )</span>
<a href="#l14.6174"></a><span id="l14.6174" class="difflineplus">+if test -n &quot;$_ENABLE_CODESIGHS&quot;; then</span>
<a href="#l14.6175"></a><span id="l14.6175" class="difflineplus">+    if test -d $MOZILLA_SRCDIR/tools/codesighs; then </span>
<a href="#l14.6176"></a><span id="l14.6176" class="difflineplus">+        MOZ_MAPINFO=1</span>
<a href="#l14.6177"></a><span id="l14.6177" class="difflineplus">+    else</span>
<a href="#l14.6178"></a><span id="l14.6178" class="difflineplus">+        AC_MSG_ERROR([Codesighs directory $MOZILLA_SRCDIR/tools/codesighs required.])</span>
<a href="#l14.6179"></a><span id="l14.6179" class="difflineplus">+    fi</span>
<a href="#l14.6180"></a><span id="l14.6180" class="difflineplus">+fi</span>
<a href="#l14.6181"></a><span id="l14.6181" class="difflineplus">+</span>
<a href="#l14.6182"></a><span id="l14.6182" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6183"></a><span id="l14.6183" class="difflineplus">+dnl = Add support for Eazel profiler</span>
<a href="#l14.6184"></a><span id="l14.6184" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6185"></a><span id="l14.6185" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(eazel-profiler-support,</span>
<a href="#l14.6186"></a><span id="l14.6186" class="difflineplus">+[  --enable-eazel-profiler-support</span>
<a href="#l14.6187"></a><span id="l14.6187" class="difflineplus">+                          Enable Corel/Eazel profiler support],</span>
<a href="#l14.6188"></a><span id="l14.6188" class="difflineplus">+    ENABLE_EAZEL_PROFILER=1,</span>
<a href="#l14.6189"></a><span id="l14.6189" class="difflineplus">+    ENABLE_EAZEL_PROFILER= )</span>
<a href="#l14.6190"></a><span id="l14.6190" class="difflineplus">+if test -n &quot;$ENABLE_EAZEL_PROFILER&quot;; then</span>
<a href="#l14.6191"></a><span id="l14.6191" class="difflineplus">+    AC_DEFINE(ENABLE_EAZEL_PROFILER)</span>
<a href="#l14.6192"></a><span id="l14.6192" class="difflineplus">+    USE_ELF_DYNSTR_GC=</span>
<a href="#l14.6193"></a><span id="l14.6193" class="difflineplus">+    MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS=</span>
<a href="#l14.6194"></a><span id="l14.6194" class="difflineplus">+    EAZEL_PROFILER_CFLAGS=&quot;-g -O -gdwarf-2 -finstrument-functions -D__NO_STRING_INLINES  -D__NO_MATH_INLINES&quot;</span>
<a href="#l14.6195"></a><span id="l14.6195" class="difflineplus">+    EAZEL_PROFILER_LIBS=&quot;-lprofiler -lpthread&quot;</span>
<a href="#l14.6196"></a><span id="l14.6196" class="difflineplus">+fi</span>
<a href="#l14.6197"></a><span id="l14.6197" class="difflineplus">+</span>
<a href="#l14.6198"></a><span id="l14.6198" class="difflineplus">+MOZ_ARG_ENABLE_STRING(profile-modules,</span>
<a href="#l14.6199"></a><span id="l14.6199" class="difflineplus">+[  --enable-profile-modules</span>
<a href="#l14.6200"></a><span id="l14.6200" class="difflineplus">+                          Enable/disable profiling for specific modules],</span>
<a href="#l14.6201"></a><span id="l14.6201" class="difflineplus">+[ MOZ_PROFILE_MODULES=`echo $enableval| sed 's/,/ /g'` ] )</span>
<a href="#l14.6202"></a><span id="l14.6202" class="difflineplus">+</span>
<a href="#l14.6203"></a><span id="l14.6203" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(insure,</span>
<a href="#l14.6204"></a><span id="l14.6204" class="difflineplus">+[  --enable-insure         Enable insure++ instrumentation (linux only)],</span>
<a href="#l14.6205"></a><span id="l14.6205" class="difflineplus">+    _ENABLE_INSURE=1,</span>
<a href="#l14.6206"></a><span id="l14.6206" class="difflineplus">+    _ENABLE_INSURE= )</span>
<a href="#l14.6207"></a><span id="l14.6207" class="difflineplus">+if test -n &quot;$_ENABLE_INSURE&quot;; then</span>
<a href="#l14.6208"></a><span id="l14.6208" class="difflineplus">+    MOZ_INSURE=&quot;insure&quot;</span>
<a href="#l14.6209"></a><span id="l14.6209" class="difflineplus">+    MOZ_INSURIFYING=1</span>
<a href="#l14.6210"></a><span id="l14.6210" class="difflineplus">+    MOZ_INSURE_DIRS=&quot;.&quot;</span>
<a href="#l14.6211"></a><span id="l14.6211" class="difflineplus">+    MOZ_INSURE_EXCLUDE_DIRS=&quot;config&quot;</span>
<a href="#l14.6212"></a><span id="l14.6212" class="difflineplus">+fi</span>
<a href="#l14.6213"></a><span id="l14.6213" class="difflineplus">+</span>
<a href="#l14.6214"></a><span id="l14.6214" class="difflineplus">+MOZ_ARG_WITH_STRING(insure-dirs,</span>
<a href="#l14.6215"></a><span id="l14.6215" class="difflineplus">+[  --with-insure-dirs=DIRS</span>
<a href="#l14.6216"></a><span id="l14.6216" class="difflineplus">+                          Dirs to instrument with insure ],</span>
<a href="#l14.6217"></a><span id="l14.6217" class="difflineplus">+    MOZ_INSURE_DIRS=$withval )</span>
<a href="#l14.6218"></a><span id="l14.6218" class="difflineplus">+</span>
<a href="#l14.6219"></a><span id="l14.6219" class="difflineplus">+MOZ_ARG_WITH_STRING(insure-exclude-dirs,</span>
<a href="#l14.6220"></a><span id="l14.6220" class="difflineplus">+[  --with-insure-exclude-dirs=DIRS</span>
<a href="#l14.6221"></a><span id="l14.6221" class="difflineplus">+                          Dirs to not instrument with insure ],</span>
<a href="#l14.6222"></a><span id="l14.6222" class="difflineplus">+    MOZ_INSURE_EXCLUDE_DIRS=&quot;config $withval&quot; )</span>
<a href="#l14.6223"></a><span id="l14.6223" class="difflineplus">+</span>
<a href="#l14.6224"></a><span id="l14.6224" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6225"></a><span id="l14.6225" class="difflineplus">+dnl = Support for Quantify (Windows)</span>
<a href="#l14.6226"></a><span id="l14.6226" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6227"></a><span id="l14.6227" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(quantify,</span>
<a href="#l14.6228"></a><span id="l14.6228" class="difflineplus">+[  --enable-quantify      Enable Quantify support (Windows only) ],</span>
<a href="#l14.6229"></a><span id="l14.6229" class="difflineplus">+    MOZ_QUANTIFY=1,</span>
<a href="#l14.6230"></a><span id="l14.6230" class="difflineplus">+    MOZ_QUANTIFY= )</span>
<a href="#l14.6231"></a><span id="l14.6231" class="difflineplus">+</span>
<a href="#l14.6232"></a><span id="l14.6232" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6233"></a><span id="l14.6233" class="difflineplus">+dnl = Support for demangling undefined symbols</span>
<a href="#l14.6234"></a><span id="l14.6234" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6235"></a><span id="l14.6235" class="difflineplus">+if test -z &quot;$SKIP_LIBRARY_CHECKS&quot;; then</span>
<a href="#l14.6236"></a><span id="l14.6236" class="difflineplus">+    AC_LANG_SAVE</span>
<a href="#l14.6237"></a><span id="l14.6237" class="difflineplus">+    AC_LANG_CPLUSPLUS</span>
<a href="#l14.6238"></a><span id="l14.6238" class="difflineplus">+    AC_CHECK_FUNCS(__cxa_demangle, HAVE_DEMANGLE=1, HAVE_DEMANGLE=)</span>
<a href="#l14.6239"></a><span id="l14.6239" class="difflineplus">+    AC_LANG_RESTORE</span>
<a href="#l14.6240"></a><span id="l14.6240" class="difflineplus">+fi</span>
<a href="#l14.6241"></a><span id="l14.6241" class="difflineplus">+</span>
<a href="#l14.6242"></a><span id="l14.6242" class="difflineplus">+# Demangle only for debug or trace-malloc builds</span>
<a href="#l14.6243"></a><span id="l14.6243" class="difflineplus">+MOZ_DEMANGLE_SYMBOLS=</span>
<a href="#l14.6244"></a><span id="l14.6244" class="difflineplus">+if test &quot;$HAVE_DEMANGLE&quot; -a &quot;$HAVE_GCC3_ABI&quot; &amp;&amp; test &quot;$MOZ_DEBUG&quot; -o &quot;$NS_TRACE_MALLOC&quot;; then</span>
<a href="#l14.6245"></a><span id="l14.6245" class="difflineplus">+    MOZ_DEMANGLE_SYMBOLS=1</span>
<a href="#l14.6246"></a><span id="l14.6246" class="difflineplus">+    AC_DEFINE(MOZ_DEMANGLE_SYMBOLS)</span>
<a href="#l14.6247"></a><span id="l14.6247" class="difflineplus">+fi</span>
<a href="#l14.6248"></a><span id="l14.6248" class="difflineplus">+AC_SUBST(MOZ_DEMANGLE_SYMBOLS)</span>
<a href="#l14.6249"></a><span id="l14.6249" class="difflineplus">+</span>
<a href="#l14.6250"></a><span id="l14.6250" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6251"></a><span id="l14.6251" class="difflineplus">+dnl = Support for gcc stack unwinding (from gcc 3.3)</span>
<a href="#l14.6252"></a><span id="l14.6252" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6253"></a><span id="l14.6253" class="difflineplus">+if test &quot;$HAVE_GCC3_ABI&quot; &amp;&amp; test -z &quot;$SKIP_LIBRARY_CHECKS&quot;; then</span>
<a href="#l14.6254"></a><span id="l14.6254" class="difflineplus">+    AC_CHECK_HEADER(unwind.h, AC_CHECK_FUNCS(_Unwind_Backtrace))</span>
<a href="#l14.6255"></a><span id="l14.6255" class="difflineplus">+fi</span>
<a href="#l14.6256"></a><span id="l14.6256" class="difflineplus">+</span>
<a href="#l14.6257"></a><span id="l14.6257" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6258"></a><span id="l14.6258" class="difflineplus">+dnl =</span>
<a href="#l14.6259"></a><span id="l14.6259" class="difflineplus">+dnl = Misc. Options</span>
<a href="#l14.6260"></a><span id="l14.6260" class="difflineplus">+dnl = </span>
<a href="#l14.6261"></a><span id="l14.6261" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6262"></a><span id="l14.6262" class="difflineplus">+MOZ_ARG_HEADER(Misc. Options)</span>
<a href="#l14.6263"></a><span id="l14.6263" class="difflineplus">+</span>
<a href="#l14.6264"></a><span id="l14.6264" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6265"></a><span id="l14.6265" class="difflineplus">+dnl update xterm title</span>
<a href="#l14.6266"></a><span id="l14.6266" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6267"></a><span id="l14.6267" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(xterm-updates,</span>
<a href="#l14.6268"></a><span id="l14.6268" class="difflineplus">+[  --enable-xterm-updates  Update XTERM titles with current command.],</span>
<a href="#l14.6269"></a><span id="l14.6269" class="difflineplus">+    MOZ_UPDATE_XTERM=1,</span>
<a href="#l14.6270"></a><span id="l14.6270" class="difflineplus">+    MOZ_UPDATE_XTERM= )</span>
<a href="#l14.6271"></a><span id="l14.6271" class="difflineplus">+</span>
<a href="#l14.6272"></a><span id="l14.6272" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.6273"></a><span id="l14.6273" class="difflineplus">+dnl = Chrome format</span>
<a href="#l14.6274"></a><span id="l14.6274" class="difflineplus">+dnl =========================================================</span>
<a href="#l14.6275"></a><span id="l14.6275" class="difflineplus">+MOZ_ARG_ENABLE_STRING([chrome-format],</span>
<a href="#l14.6276"></a><span id="l14.6276" class="difflineplus">+[  --enable-chrome-format=jar|flat|both|symlink</span>
<a href="#l14.6277"></a><span id="l14.6277" class="difflineplus">+                          Select FORMAT of chrome files (default=jar)],</span>
<a href="#l14.6278"></a><span id="l14.6278" class="difflineplus">+    MOZ_CHROME_FILE_FORMAT=`echo $enableval | tr A-Z a-z`)</span>
<a href="#l14.6279"></a><span id="l14.6279" class="difflineplus">+</span>
<a href="#l14.6280"></a><span id="l14.6280" class="difflineplus">+if test -z &quot;$MOZ_CHROME_FILE_FORMAT&quot;; then</span>
<a href="#l14.6281"></a><span id="l14.6281" class="difflineplus">+    MOZ_CHROME_FILE_FORMAT=jar</span>
<a href="#l14.6282"></a><span id="l14.6282" class="difflineplus">+fi</span>
<a href="#l14.6283"></a><span id="l14.6283" class="difflineplus">+</span>
<a href="#l14.6284"></a><span id="l14.6284" class="difflineplus">+if test &quot;$MOZ_CHROME_FILE_FORMAT&quot; != &quot;jar&quot; &amp;&amp; </span>
<a href="#l14.6285"></a><span id="l14.6285" class="difflineplus">+    test &quot;$MOZ_CHROME_FILE_FORMAT&quot; != &quot;flat&quot; &amp;&amp;</span>
<a href="#l14.6286"></a><span id="l14.6286" class="difflineplus">+    test &quot;$MOZ_CHROME_FILE_FORMAT&quot; != &quot;symlink&quot; &amp;&amp;</span>
<a href="#l14.6287"></a><span id="l14.6287" class="difflineplus">+    test &quot;$MOZ_CHROME_FILE_FORMAT&quot; != &quot;both&quot;; then</span>
<a href="#l14.6288"></a><span id="l14.6288" class="difflineplus">+    AC_MSG_ERROR([--enable-chrome-format must be set to either jar, flat, both, or symlink])</span>
<a href="#l14.6289"></a><span id="l14.6289" class="difflineplus">+fi</span>
<a href="#l14.6290"></a><span id="l14.6290" class="difflineplus">+</span>
<a href="#l14.6291"></a><span id="l14.6291" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6292"></a><span id="l14.6292" class="difflineplus">+dnl = Define default location for MOZILLA_FIVE_HOME</span>
<a href="#l14.6293"></a><span id="l14.6293" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6294"></a><span id="l14.6294" class="difflineplus">+MOZ_ARG_WITH_STRING(default-mozilla-five-home,</span>
<a href="#l14.6295"></a><span id="l14.6295" class="difflineplus">+[  --with-default-mozilla-five-home</span>
<a href="#l14.6296"></a><span id="l14.6296" class="difflineplus">+                          Set the default value for MOZILLA_FIVE_HOME],</span>
<a href="#l14.6297"></a><span id="l14.6297" class="difflineplus">+[ val=`echo $withval`</span>
<a href="#l14.6298"></a><span id="l14.6298" class="difflineplus">+  AC_DEFINE_UNQUOTED(MOZ_DEFAULT_MOZILLA_FIVE_HOME,&quot;$val&quot;) ])</span>
<a href="#l14.6299"></a><span id="l14.6299" class="difflineplus">+</span>
<a href="#l14.6300"></a><span id="l14.6300" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6301"></a><span id="l14.6301" class="difflineplus">+dnl = Location of the mozilla user directory (default is ~/.mozilla).],</span>
<a href="#l14.6302"></a><span id="l14.6302" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6303"></a><span id="l14.6303" class="difflineplus">+MOZ_ARG_WITH_STRING(user-appdir,</span>
<a href="#l14.6304"></a><span id="l14.6304" class="difflineplus">+[  --with-user-appdir=DIR  Set user-specific appdir (default=.mozilla)],</span>
<a href="#l14.6305"></a><span id="l14.6305" class="difflineplus">+[ val=`echo $withval`</span>
<a href="#l14.6306"></a><span id="l14.6306" class="difflineplus">+if echo &quot;$val&quot; | grep &quot;\/&quot; &gt;/dev/null; then</span>
<a href="#l14.6307"></a><span id="l14.6307" class="difflineplus">+    AC_MSG_ERROR(&quot;Homedir must be single relative path.&quot;)</span>
<a href="#l14.6308"></a><span id="l14.6308" class="difflineplus">+else </span>
<a href="#l14.6309"></a><span id="l14.6309" class="difflineplus">+    MOZ_USER_DIR=&quot;$val&quot;</span>
<a href="#l14.6310"></a><span id="l14.6310" class="difflineplus">+fi])</span>
<a href="#l14.6311"></a><span id="l14.6311" class="difflineplus">+</span>
<a href="#l14.6312"></a><span id="l14.6312" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZ_USER_DIR,&quot;$MOZ_USER_DIR&quot;)</span>
<a href="#l14.6313"></a><span id="l14.6313" class="difflineplus">+</span>
<a href="#l14.6314"></a><span id="l14.6314" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6315"></a><span id="l14.6315" class="difflineplus">+dnl = Doxygen configuration</span>
<a href="#l14.6316"></a><span id="l14.6316" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6317"></a><span id="l14.6317" class="difflineplus">+dnl Use commas to specify multiple dirs to this arg</span>
<a href="#l14.6318"></a><span id="l14.6318" class="difflineplus">+MOZ_DOC_INPUT_DIRS='./dist/include ./dist/idl'</span>
<a href="#l14.6319"></a><span id="l14.6319" class="difflineplus">+MOZ_ARG_WITH_STRING(doc-input-dirs,</span>
<a href="#l14.6320"></a><span id="l14.6320" class="difflineplus">+[  --with-doc-input-dirs=DIRS</span>
<a href="#l14.6321"></a><span id="l14.6321" class="difflineplus">+                          Header/idl dirs to create docs from],</span>
<a href="#l14.6322"></a><span id="l14.6322" class="difflineplus">+[ MOZ_DOC_INPUT_DIRS=`echo &quot;$withval&quot; | sed &quot;s/,/ /g&quot;` ] )</span>
<a href="#l14.6323"></a><span id="l14.6323" class="difflineplus">+AC_SUBST(MOZ_DOC_INPUT_DIRS)</span>
<a href="#l14.6324"></a><span id="l14.6324" class="difflineplus">+</span>
<a href="#l14.6325"></a><span id="l14.6325" class="difflineplus">+dnl Use commas to specify multiple dirs to this arg</span>
<a href="#l14.6326"></a><span id="l14.6326" class="difflineplus">+MOZ_DOC_INCLUDE_DIRS='./dist/include ./dist/include/nspr'</span>
<a href="#l14.6327"></a><span id="l14.6327" class="difflineplus">+MOZ_ARG_WITH_STRING(doc-include-dirs,</span>
<a href="#l14.6328"></a><span id="l14.6328" class="difflineplus">+[  --with-doc-include-dirs=DIRS  </span>
<a href="#l14.6329"></a><span id="l14.6329" class="difflineplus">+                          Include dirs to preprocess doc headers],</span>
<a href="#l14.6330"></a><span id="l14.6330" class="difflineplus">+[ MOZ_DOC_INCLUDE_DIRS=`echo &quot;$withval&quot; | sed &quot;s/,/ /g&quot;` ] )</span>
<a href="#l14.6331"></a><span id="l14.6331" class="difflineplus">+AC_SUBST(MOZ_DOC_INCLUDE_DIRS)</span>
<a href="#l14.6332"></a><span id="l14.6332" class="difflineplus">+</span>
<a href="#l14.6333"></a><span id="l14.6333" class="difflineplus">+MOZ_DOC_OUTPUT_DIR='./dist/docs'</span>
<a href="#l14.6334"></a><span id="l14.6334" class="difflineplus">+MOZ_ARG_WITH_STRING(doc-output-dir,</span>
<a href="#l14.6335"></a><span id="l14.6335" class="difflineplus">+[  --with-doc-output-dir=DIR</span>
<a href="#l14.6336"></a><span id="l14.6336" class="difflineplus">+                          Dir to generate docs into],</span>
<a href="#l14.6337"></a><span id="l14.6337" class="difflineplus">+[ MOZ_DOC_OUTPUT_DIR=$withval ] )</span>
<a href="#l14.6338"></a><span id="l14.6338" class="difflineplus">+AC_SUBST(MOZ_DOC_OUTPUT_DIR)</span>
<a href="#l14.6339"></a><span id="l14.6339" class="difflineplus">+</span>
<a href="#l14.6340"></a><span id="l14.6340" class="difflineplus">+if test -z &quot;$SKIP_COMPILER_CHECKS&quot;; then</span>
<a href="#l14.6341"></a><span id="l14.6341" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6342"></a><span id="l14.6342" class="difflineplus">+dnl =</span>
<a href="#l14.6343"></a><span id="l14.6343" class="difflineplus">+dnl = Compiler Options</span>
<a href="#l14.6344"></a><span id="l14.6344" class="difflineplus">+dnl = </span>
<a href="#l14.6345"></a><span id="l14.6345" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6346"></a><span id="l14.6346" class="difflineplus">+MOZ_ARG_HEADER(Compiler Options)</span>
<a href="#l14.6347"></a><span id="l14.6347" class="difflineplus">+</span>
<a href="#l14.6348"></a><span id="l14.6348" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6349"></a><span id="l14.6349" class="difflineplus">+dnl Check for gcc -pipe support</span>
<a href="#l14.6350"></a><span id="l14.6350" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6351"></a><span id="l14.6351" class="difflineplus">+AC_MSG_CHECKING([for gcc -pipe support])</span>
<a href="#l14.6352"></a><span id="l14.6352" class="difflineplus">+if test -n &quot;$GNU_CC&quot; &amp;&amp; test -n &quot;$GNU_CXX&quot; &amp;&amp; test -n &quot;$GNU_AS&quot;; then</span>
<a href="#l14.6353"></a><span id="l14.6353" class="difflineplus">+    echo '#include &lt;stdio.h&gt;' &gt; dummy-hello.c</span>
<a href="#l14.6354"></a><span id="l14.6354" class="difflineplus">+    echo 'int main() { printf(&quot;Hello World\n&quot;); exit(0); }' &gt;&gt; dummy-hello.c</span>
<a href="#l14.6355"></a><span id="l14.6355" class="difflineplus">+    ${CC} -S dummy-hello.c -o dummy-hello.s 2&gt;&amp;5</span>
<a href="#l14.6356"></a><span id="l14.6356" class="difflineplus">+    cat dummy-hello.s | ${AS_BIN} -o dummy-hello.S - 2&gt;&amp;5</span>
<a href="#l14.6357"></a><span id="l14.6357" class="difflineplus">+    if test $? = 0; then</span>
<a href="#l14.6358"></a><span id="l14.6358" class="difflineplus">+        _res_as_stdin=&quot;yes&quot;</span>
<a href="#l14.6359"></a><span id="l14.6359" class="difflineplus">+    else</span>
<a href="#l14.6360"></a><span id="l14.6360" class="difflineplus">+        _res_as_stdin=&quot;no&quot;</span>
<a href="#l14.6361"></a><span id="l14.6361" class="difflineplus">+    fi</span>
<a href="#l14.6362"></a><span id="l14.6362" class="difflineplus">+    if test &quot;$_res_as_stdin&quot; = &quot;yes&quot;; then</span>
<a href="#l14.6363"></a><span id="l14.6363" class="difflineplus">+        _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.6364"></a><span id="l14.6364" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -pipe&quot;</span>
<a href="#l14.6365"></a><span id="l14.6365" class="difflineplus">+        AC_TRY_COMPILE( [ #include &lt;stdio.h&gt; ],</span>
<a href="#l14.6366"></a><span id="l14.6366" class="difflineplus">+            [printf(&quot;Hello World\n&quot;);],</span>
<a href="#l14.6367"></a><span id="l14.6367" class="difflineplus">+            [_res_gcc_pipe=&quot;yes&quot;],</span>
<a href="#l14.6368"></a><span id="l14.6368" class="difflineplus">+            [_res_gcc_pipe=&quot;no&quot;] )</span>
<a href="#l14.6369"></a><span id="l14.6369" class="difflineplus">+        CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.6370"></a><span id="l14.6370" class="difflineplus">+    fi</span>
<a href="#l14.6371"></a><span id="l14.6371" class="difflineplus">+    if test &quot;$_res_as_stdin&quot; = &quot;yes&quot; &amp;&amp; test &quot;$_res_gcc_pipe&quot; = &quot;yes&quot;; then</span>
<a href="#l14.6372"></a><span id="l14.6372" class="difflineplus">+        _res=&quot;yes&quot;;</span>
<a href="#l14.6373"></a><span id="l14.6373" class="difflineplus">+        CFLAGS=&quot;$CFLAGS -pipe&quot;</span>
<a href="#l14.6374"></a><span id="l14.6374" class="difflineplus">+        CXXFLAGS=&quot;$CXXFLAGS -pipe&quot;</span>
<a href="#l14.6375"></a><span id="l14.6375" class="difflineplus">+    else</span>
<a href="#l14.6376"></a><span id="l14.6376" class="difflineplus">+        _res=&quot;no&quot;</span>
<a href="#l14.6377"></a><span id="l14.6377" class="difflineplus">+    fi</span>
<a href="#l14.6378"></a><span id="l14.6378" class="difflineplus">+    rm -f dummy-hello.c dummy-hello.s dummy-hello.S dummy-hello a.out</span>
<a href="#l14.6379"></a><span id="l14.6379" class="difflineplus">+    AC_MSG_RESULT([$_res])</span>
<a href="#l14.6380"></a><span id="l14.6380" class="difflineplus">+else</span>
<a href="#l14.6381"></a><span id="l14.6381" class="difflineplus">+    AC_MSG_RESULT([no])</span>
<a href="#l14.6382"></a><span id="l14.6382" class="difflineplus">+fi</span>
<a href="#l14.6383"></a><span id="l14.6383" class="difflineplus">+</span>
<a href="#l14.6384"></a><span id="l14.6384" class="difflineplus">+dnl pass -Wno-long-long to the compiler</span>
<a href="#l14.6385"></a><span id="l14.6385" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(long-long-warning,</span>
<a href="#l14.6386"></a><span id="l14.6386" class="difflineplus">+[  --enable-long-long-warning </span>
<a href="#l14.6387"></a><span id="l14.6387" class="difflineplus">+                          Warn about use of non-ANSI long long type],</span>
<a href="#l14.6388"></a><span id="l14.6388" class="difflineplus">+    _IGNORE_LONG_LONG_WARNINGS=,</span>
<a href="#l14.6389"></a><span id="l14.6389" class="difflineplus">+    _IGNORE_LONG_LONG_WARNINGS=1)</span>
<a href="#l14.6390"></a><span id="l14.6390" class="difflineplus">+</span>
<a href="#l14.6391"></a><span id="l14.6391" class="difflineplus">+if test &quot;$_IGNORE_LONG_LONG_WARNINGS&quot;; then</span>
<a href="#l14.6392"></a><span id="l14.6392" class="difflineplus">+     _SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.6393"></a><span id="l14.6393" class="difflineplus">+     CFLAGS=&quot;$CFLAGS ${_COMPILER_PREFIX}-Wno-long-long&quot;</span>
<a href="#l14.6394"></a><span id="l14.6394" class="difflineplus">+     AC_MSG_CHECKING([whether compiler supports -Wno-long-long])</span>
<a href="#l14.6395"></a><span id="l14.6395" class="difflineplus">+     AC_TRY_COMPILE([], [return(0);], </span>
<a href="#l14.6396"></a><span id="l14.6396" class="difflineplus">+	[ _WARNINGS_CFLAGS=&quot;${_WARNINGS_CFLAGS} ${_COMPILER_PREFIX}-Wno-long-long&quot;</span>
<a href="#l14.6397"></a><span id="l14.6397" class="difflineplus">+	  _WARNINGS_CXXFLAGS=&quot;${_WARNINGS_CXXFLAGS} ${_COMPILER_PREFIX}-Wno-long-long&quot;</span>
<a href="#l14.6398"></a><span id="l14.6398" class="difflineplus">+	  result=&quot;yes&quot; ], result=&quot;no&quot;)</span>
<a href="#l14.6399"></a><span id="l14.6399" class="difflineplus">+     AC_MSG_RESULT([$result])</span>
<a href="#l14.6400"></a><span id="l14.6400" class="difflineplus">+     CFLAGS=&quot;$_SAVE_CFLAGS&quot;</span>
<a href="#l14.6401"></a><span id="l14.6401" class="difflineplus">+fi</span>
<a href="#l14.6402"></a><span id="l14.6402" class="difflineplus">+</span>
<a href="#l14.6403"></a><span id="l14.6403" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6404"></a><span id="l14.6404" class="difflineplus">+dnl Profile guided optimization</span>
<a href="#l14.6405"></a><span id="l14.6405" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6406"></a><span id="l14.6406" class="difflineplus">+dnl Test for profiling options</span>
<a href="#l14.6407"></a><span id="l14.6407" class="difflineplus">+dnl Under gcc 3.3, use -fprofile-arcs/-fbranch-probabilities</span>
<a href="#l14.6408"></a><span id="l14.6408" class="difflineplus">+dnl Under gcc 3.4+, use -fprofile-generate/-fprofile-use</span>
<a href="#l14.6409"></a><span id="l14.6409" class="difflineplus">+</span>
<a href="#l14.6410"></a><span id="l14.6410" class="difflineplus">+dnl Provide a switch to disable PGO even when called via profiledbuild.</span>
<a href="#l14.6411"></a><span id="l14.6411" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(profile-guided-optimization,</span>
<a href="#l14.6412"></a><span id="l14.6412" class="difflineplus">+[  --disable-profile-guided-optimization</span>
<a href="#l14.6413"></a><span id="l14.6413" class="difflineplus">+                           Don't build with PGO even if called via make profiledbuild],</span>
<a href="#l14.6414"></a><span id="l14.6414" class="difflineplus">+MOZ_PROFILE_GUIDED_OPTIMIZE_DISABLE=1,</span>
<a href="#l14.6415"></a><span id="l14.6415" class="difflineplus">+MOZ_PROFILE_GUIDED_OPTIMIZE_DISABLE=)</span>
<a href="#l14.6416"></a><span id="l14.6416" class="difflineplus">+</span>
<a href="#l14.6417"></a><span id="l14.6417" class="difflineplus">+AC_SUBST(MOZ_PROFILE_GUIDED_OPTIMIZE_DISABLE)</span>
<a href="#l14.6418"></a><span id="l14.6418" class="difflineplus">+</span>
<a href="#l14.6419"></a><span id="l14.6419" class="difflineplus">+_SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.6420"></a><span id="l14.6420" class="difflineplus">+CFLAGS=&quot;$CFLAGS -fprofile-generate&quot;</span>
<a href="#l14.6421"></a><span id="l14.6421" class="difflineplus">+</span>
<a href="#l14.6422"></a><span id="l14.6422" class="difflineplus">+AC_MSG_CHECKING([whether C compiler supports -fprofile-generate])</span>
<a href="#l14.6423"></a><span id="l14.6423" class="difflineplus">+AC_TRY_COMPILE([], [return 0;],</span>
<a href="#l14.6424"></a><span id="l14.6424" class="difflineplus">+               [ PROFILE_GEN_CFLAGS=&quot;-fprofile-generate&quot;</span>
<a href="#l14.6425"></a><span id="l14.6425" class="difflineplus">+                 result=&quot;yes&quot; ], result=&quot;no&quot;)</span>
<a href="#l14.6426"></a><span id="l14.6426" class="difflineplus">+AC_MSG_RESULT([$result])</span>
<a href="#l14.6427"></a><span id="l14.6427" class="difflineplus">+</span>
<a href="#l14.6428"></a><span id="l14.6428" class="difflineplus">+if test $result = &quot;yes&quot;; then</span>
<a href="#l14.6429"></a><span id="l14.6429" class="difflineplus">+  PROFILE_GEN_LDFLAGS=&quot;-fprofile-generate&quot;</span>
<a href="#l14.6430"></a><span id="l14.6430" class="difflineplus">+  PROFILE_USE_CFLAGS=&quot;-fprofile-use&quot;</span>
<a href="#l14.6431"></a><span id="l14.6431" class="difflineplus">+  PROFILE_USE_LDFLAGS=&quot;-fprofile-use&quot;</span>
<a href="#l14.6432"></a><span id="l14.6432" class="difflineplus">+else</span>
<a href="#l14.6433"></a><span id="l14.6433" class="difflineplus">+  CFLAGS=&quot;$_SAVE_CFLAGS -fprofile-arcs&quot;</span>
<a href="#l14.6434"></a><span id="l14.6434" class="difflineplus">+  AC_MSG_CHECKING([whether C compiler supports -fprofile-arcs])</span>
<a href="#l14.6435"></a><span id="l14.6435" class="difflineplus">+  AC_TRY_COMPILE([], [return 0;],</span>
<a href="#l14.6436"></a><span id="l14.6436" class="difflineplus">+                 [ PROFILE_GEN_CFLAGS=&quot;-fprofile-arcs&quot;</span>
<a href="#l14.6437"></a><span id="l14.6437" class="difflineplus">+                   result=&quot;yes&quot; ], result=&quot;no&quot;)</span>
<a href="#l14.6438"></a><span id="l14.6438" class="difflineplus">+  AC_MSG_RESULT([$result])</span>
<a href="#l14.6439"></a><span id="l14.6439" class="difflineplus">+  if test $result = &quot;yes&quot;; then</span>
<a href="#l14.6440"></a><span id="l14.6440" class="difflineplus">+    PROFILE_USE_CFLAGS=&quot;-fbranch-probabilities&quot;</span>
<a href="#l14.6441"></a><span id="l14.6441" class="difflineplus">+  fi</span>
<a href="#l14.6442"></a><span id="l14.6442" class="difflineplus">+  # don't really care, this is an old GCC</span>
<a href="#l14.6443"></a><span id="l14.6443" class="difflineplus">+  PROFILE_GEN_LDFLAGS=</span>
<a href="#l14.6444"></a><span id="l14.6444" class="difflineplus">+  PROFILE_USE_LDFLAGS=</span>
<a href="#l14.6445"></a><span id="l14.6445" class="difflineplus">+fi</span>
<a href="#l14.6446"></a><span id="l14.6446" class="difflineplus">+</span>
<a href="#l14.6447"></a><span id="l14.6447" class="difflineplus">+CFLAGS=&quot;$_SAVE_CFLAGS&quot;</span>
<a href="#l14.6448"></a><span id="l14.6448" class="difflineplus">+</span>
<a href="#l14.6449"></a><span id="l14.6449" class="difflineplus">+if test -n &quot;$INTEL_CC&quot;; then</span>
<a href="#l14.6450"></a><span id="l14.6450" class="difflineplus">+  PROFILE_GEN_CFLAGS=&quot;-prof-gen -prof-dir .&quot;</span>
<a href="#l14.6451"></a><span id="l14.6451" class="difflineplus">+  PROFILE_GEN_LDFLAGS=</span>
<a href="#l14.6452"></a><span id="l14.6452" class="difflineplus">+  PROFILE_USE_CFLAGS=&quot;-prof-use -prof-dir .&quot;</span>
<a href="#l14.6453"></a><span id="l14.6453" class="difflineplus">+  PROFILE_USE_LDFLAGS=</span>
<a href="#l14.6454"></a><span id="l14.6454" class="difflineplus">+fi</span>
<a href="#l14.6455"></a><span id="l14.6455" class="difflineplus">+</span>
<a href="#l14.6456"></a><span id="l14.6456" class="difflineplus">+dnl Sun Studio on Solaris</span>
<a href="#l14.6457"></a><span id="l14.6457" class="difflineplus">+if test -z &quot;$GNU_CC&quot; &amp;&amp; test -z &quot;$GNU_CXX&quot; &amp;&amp; test &quot;$OS_ARCH&quot; = &quot;SunOS&quot;; then</span>
<a href="#l14.6458"></a><span id="l14.6458" class="difflineplus">+  PROFILE_GEN_CFLAGS=&quot;-xprofile=collect:$_objdir/$enable_application&quot;</span>
<a href="#l14.6459"></a><span id="l14.6459" class="difflineplus">+  PROFILE_GEN_LDFLAGS=&quot;-xprofile=collect:$_objdir/$enable_application&quot;</span>
<a href="#l14.6460"></a><span id="l14.6460" class="difflineplus">+  if test &quot;$CPU_ARCH&quot; != &quot;sparc&quot;; then</span>
<a href="#l14.6461"></a><span id="l14.6461" class="difflineplus">+    PROFILE_USE_CFLAGS=&quot;-xprofile=use:$_objdir/$enable_application&quot;</span>
<a href="#l14.6462"></a><span id="l14.6462" class="difflineplus">+    PROFILE_USE_LDFLAGS=&quot;-xprofile=use:$_objdir/$enable_application&quot;</span>
<a href="#l14.6463"></a><span id="l14.6463" class="difflineplus">+  else</span>
<a href="#l14.6464"></a><span id="l14.6464" class="difflineplus">+    PROFILE_USE_CFLAGS=&quot;-xlinkopt=2 -xprofile=use:$_objdir/$enable_application&quot;</span>
<a href="#l14.6465"></a><span id="l14.6465" class="difflineplus">+    PROFILE_USE_LDFLAGS=&quot;-xlinkopt=2 -xprofile=use:$_objdir/$enable_application&quot;</span>
<a href="#l14.6466"></a><span id="l14.6466" class="difflineplus">+  fi</span>
<a href="#l14.6467"></a><span id="l14.6467" class="difflineplus">+fi</span>
<a href="#l14.6468"></a><span id="l14.6468" class="difflineplus">+</span>
<a href="#l14.6469"></a><span id="l14.6469" class="difflineplus">+AC_SUBST(PROFILE_GEN_CFLAGS)</span>
<a href="#l14.6470"></a><span id="l14.6470" class="difflineplus">+AC_SUBST(PROFILE_GEN_LDFLAGS)</span>
<a href="#l14.6471"></a><span id="l14.6471" class="difflineplus">+AC_SUBST(PROFILE_USE_CFLAGS)</span>
<a href="#l14.6472"></a><span id="l14.6472" class="difflineplus">+AC_SUBST(PROFILE_USE_LDFLAGS)</span>
<a href="#l14.6473"></a><span id="l14.6473" class="difflineplus">+</span>
<a href="#l14.6474"></a><span id="l14.6474" class="difflineplus">+AC_LANG_CPLUSPLUS</span>
<a href="#l14.6475"></a><span id="l14.6475" class="difflineplus">+</span>
<a href="#l14.6476"></a><span id="l14.6476" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6477"></a><span id="l14.6477" class="difflineplus">+dnl Test for -pedantic bustage</span>
<a href="#l14.6478"></a><span id="l14.6478" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6479"></a><span id="l14.6479" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(pedantic,</span>
<a href="#l14.6480"></a><span id="l14.6480" class="difflineplus">+[  --disable-pedantic      Issue all warnings demanded by strict ANSI C ],</span>
<a href="#l14.6481"></a><span id="l14.6481" class="difflineplus">+_PEDANTIC= )</span>
<a href="#l14.6482"></a><span id="l14.6482" class="difflineplus">+if test &quot;$_PEDANTIC&quot;; then</span>
<a href="#l14.6483"></a><span id="l14.6483" class="difflineplus">+    _SAVE_CXXFLAGS=$CXXFLAGS</span>
<a href="#l14.6484"></a><span id="l14.6484" class="difflineplus">+    CXXFLAGS=&quot;$CXXFLAGS ${_WARNINGS_CXXFLAGS} ${_COMPILER_PREFIX}-pedantic&quot;</span>
<a href="#l14.6485"></a><span id="l14.6485" class="difflineplus">+    AC_MSG_CHECKING([whether C++ compiler has -pedantic long long bug])</span>
<a href="#l14.6486"></a><span id="l14.6486" class="difflineplus">+    AC_TRY_COMPILE([$configure_static_assert_macros],</span>
<a href="#l14.6487"></a><span id="l14.6487" class="difflineplus">+                   [CONFIGURE_STATIC_ASSERT(sizeof(long long) == 8)],</span>
<a href="#l14.6488"></a><span id="l14.6488" class="difflineplus">+                   result=&quot;no&quot;, result=&quot;yes&quot; )</span>
<a href="#l14.6489"></a><span id="l14.6489" class="difflineplus">+    AC_MSG_RESULT([$result])</span>
<a href="#l14.6490"></a><span id="l14.6490" class="difflineplus">+    CXXFLAGS=&quot;$_SAVE_CXXFLAGS&quot;</span>
<a href="#l14.6491"></a><span id="l14.6491" class="difflineplus">+</span>
<a href="#l14.6492"></a><span id="l14.6492" class="difflineplus">+    case &quot;$result&quot; in</span>
<a href="#l14.6493"></a><span id="l14.6493" class="difflineplus">+    no)</span>
<a href="#l14.6494"></a><span id="l14.6494" class="difflineplus">+        _WARNINGS_CFLAGS=&quot;${_WARNINGS_CFLAGS} ${_COMPILER_PREFIX}-pedantic&quot;</span>
<a href="#l14.6495"></a><span id="l14.6495" class="difflineplus">+        _WARNINGS_CXXFLAGS=&quot;${_WARNINGS_CXXFLAGS} ${_COMPILER_PREFIX}-pedantic&quot;</span>
<a href="#l14.6496"></a><span id="l14.6496" class="difflineplus">+        ;;</span>
<a href="#l14.6497"></a><span id="l14.6497" class="difflineplus">+    yes)</span>
<a href="#l14.6498"></a><span id="l14.6498" class="difflineplus">+        AC_MSG_ERROR([Your compiler appears to have a known bug where long long is miscompiled when using -pedantic.  Reconfigure using --disable-pedantic. ])</span>
<a href="#l14.6499"></a><span id="l14.6499" class="difflineplus">+        ;;</span>
<a href="#l14.6500"></a><span id="l14.6500" class="difflineplus">+    esac</span>
<a href="#l14.6501"></a><span id="l14.6501" class="difflineplus">+fi</span>
<a href="#l14.6502"></a><span id="l14.6502" class="difflineplus">+</span>
<a href="#l14.6503"></a><span id="l14.6503" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6504"></a><span id="l14.6504" class="difflineplus">+dnl Test for correct temporary object destruction order</span>
<a href="#l14.6505"></a><span id="l14.6505" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6506"></a><span id="l14.6506" class="difflineplus">+dnl We want to make sure the compiler follows the C++ spec here as </span>
<a href="#l14.6507"></a><span id="l14.6507" class="difflineplus">+dnl xpcom and the string classes depend on it (bug 235381).</span>
<a href="#l14.6508"></a><span id="l14.6508" class="difflineplus">+AC_MSG_CHECKING([for correct temporary object destruction order])</span>
<a href="#l14.6509"></a><span id="l14.6509" class="difflineplus">+AC_TRY_RUN([ class A {</span>
<a href="#l14.6510"></a><span id="l14.6510" class="difflineplus">+             public:  A(int&amp; x) : mValue(x) {}</span>
<a href="#l14.6511"></a><span id="l14.6511" class="difflineplus">+                      ~A() { mValue--; }</span>
<a href="#l14.6512"></a><span id="l14.6512" class="difflineplus">+                      operator char**() { return 0; }</span>
<a href="#l14.6513"></a><span id="l14.6513" class="difflineplus">+             private:  int&amp; mValue;</span>
<a href="#l14.6514"></a><span id="l14.6514" class="difflineplus">+             };</span>
<a href="#l14.6515"></a><span id="l14.6515" class="difflineplus">+             void func(char **arg) {}</span>
<a href="#l14.6516"></a><span id="l14.6516" class="difflineplus">+             int m=2;</span>
<a href="#l14.6517"></a><span id="l14.6517" class="difflineplus">+             void test() {</span>
<a href="#l14.6518"></a><span id="l14.6518" class="difflineplus">+                  func(A(m));</span>
<a href="#l14.6519"></a><span id="l14.6519" class="difflineplus">+                  if (m==1) m = 0;</span>
<a href="#l14.6520"></a><span id="l14.6520" class="difflineplus">+             }</span>
<a href="#l14.6521"></a><span id="l14.6521" class="difflineplus">+             int main() {</span>
<a href="#l14.6522"></a><span id="l14.6522" class="difflineplus">+                 test();</span>
<a href="#l14.6523"></a><span id="l14.6523" class="difflineplus">+                 return(m);</span>
<a href="#l14.6524"></a><span id="l14.6524" class="difflineplus">+             }</span>
<a href="#l14.6525"></a><span id="l14.6525" class="difflineplus">+             ],</span>
<a href="#l14.6526"></a><span id="l14.6526" class="difflineplus">+     result=&quot;yes&quot;, result=&quot;no&quot;, result=&quot;maybe&quot;)</span>
<a href="#l14.6527"></a><span id="l14.6527" class="difflineplus">+AC_MSG_RESULT([$result])</span>
<a href="#l14.6528"></a><span id="l14.6528" class="difflineplus">+</span>
<a href="#l14.6529"></a><span id="l14.6529" class="difflineplus">+if test &quot;$result&quot; = &quot;no&quot;; then</span>
<a href="#l14.6530"></a><span id="l14.6530" class="difflineplus">+    AC_MSG_ERROR([Your compiler does not follow the C++ specification for temporary object destruction order.])</span>
<a href="#l14.6531"></a><span id="l14.6531" class="difflineplus">+fi</span>
<a href="#l14.6532"></a><span id="l14.6532" class="difflineplus">+</span>
<a href="#l14.6533"></a><span id="l14.6533" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6534"></a><span id="l14.6534" class="difflineplus">+dnl Autoconf test for gcc 2.7.2.x (and maybe others?) so that we don't</span>
<a href="#l14.6535"></a><span id="l14.6535" class="difflineplus">+dnl provide non-const forms of the operator== for comparing nsCOMPtrs to</span>
<a href="#l14.6536"></a><span id="l14.6536" class="difflineplus">+dnl raw pointers in nsCOMPtr.h.  (VC++ has the same bug.)</span>
<a href="#l14.6537"></a><span id="l14.6537" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6538"></a><span id="l14.6538" class="difflineplus">+_SAVE_CXXFLAGS=$CXXFLAGS</span>
<a href="#l14.6539"></a><span id="l14.6539" class="difflineplus">+CXXFLAGS=&quot;$CXXFLAGS ${_WARNINGS_CXXFLAGS}&quot;</span>
<a href="#l14.6540"></a><span id="l14.6540" class="difflineplus">+AC_CACHE_CHECK(for correct overload resolution with const and templates,</span>
<a href="#l14.6541"></a><span id="l14.6541" class="difflineplus">+    ac_nscap_nonconst_opeq_bug,</span>
<a href="#l14.6542"></a><span id="l14.6542" class="difflineplus">+    [AC_TRY_COMPILE([</span>
<a href="#l14.6543"></a><span id="l14.6543" class="difflineplus">+                      template &lt;class T&gt;</span>
<a href="#l14.6544"></a><span id="l14.6544" class="difflineplus">+                      class Pointer</span>
<a href="#l14.6545"></a><span id="l14.6545" class="difflineplus">+                        {</span>
<a href="#l14.6546"></a><span id="l14.6546" class="difflineplus">+                        public:</span>
<a href="#l14.6547"></a><span id="l14.6547" class="difflineplus">+                          T* myPtr;</span>
<a href="#l14.6548"></a><span id="l14.6548" class="difflineplus">+                        };</span>
<a href="#l14.6549"></a><span id="l14.6549" class="difflineplus">+                      </span>
<a href="#l14.6550"></a><span id="l14.6550" class="difflineplus">+                      template &lt;class T, class U&gt;</span>
<a href="#l14.6551"></a><span id="l14.6551" class="difflineplus">+                      int operator==(const Pointer&lt;T&gt;&amp; rhs, U* lhs)</span>
<a href="#l14.6552"></a><span id="l14.6552" class="difflineplus">+                        {</span>
<a href="#l14.6553"></a><span id="l14.6553" class="difflineplus">+                          return rhs.myPtr == lhs;</span>
<a href="#l14.6554"></a><span id="l14.6554" class="difflineplus">+                        }</span>
<a href="#l14.6555"></a><span id="l14.6555" class="difflineplus">+                      </span>
<a href="#l14.6556"></a><span id="l14.6556" class="difflineplus">+                      template &lt;class T, class U&gt;</span>
<a href="#l14.6557"></a><span id="l14.6557" class="difflineplus">+                      int operator==(const Pointer&lt;T&gt;&amp; rhs, const U* lhs)</span>
<a href="#l14.6558"></a><span id="l14.6558" class="difflineplus">+                        {</span>
<a href="#l14.6559"></a><span id="l14.6559" class="difflineplus">+                          return rhs.myPtr == lhs;</span>
<a href="#l14.6560"></a><span id="l14.6560" class="difflineplus">+                        }</span>
<a href="#l14.6561"></a><span id="l14.6561" class="difflineplus">+                    ],</span>
<a href="#l14.6562"></a><span id="l14.6562" class="difflineplus">+                    [</span>
<a href="#l14.6563"></a><span id="l14.6563" class="difflineplus">+                      Pointer&lt;int&gt; foo;</span>
<a href="#l14.6564"></a><span id="l14.6564" class="difflineplus">+                      const int* bar;</span>
<a href="#l14.6565"></a><span id="l14.6565" class="difflineplus">+                      return foo == bar;</span>
<a href="#l14.6566"></a><span id="l14.6566" class="difflineplus">+                    ],</span>
<a href="#l14.6567"></a><span id="l14.6567" class="difflineplus">+                    ac_nscap_nonconst_opeq_bug=&quot;no&quot;,</span>
<a href="#l14.6568"></a><span id="l14.6568" class="difflineplus">+                    ac_nscap_nonconst_opeq_bug=&quot;yes&quot;)])</span>
<a href="#l14.6569"></a><span id="l14.6569" class="difflineplus">+CXXFLAGS=&quot;$_SAVE_CXXFLAGS&quot;</span>
<a href="#l14.6570"></a><span id="l14.6570" class="difflineplus">+</span>
<a href="#l14.6571"></a><span id="l14.6571" class="difflineplus">+if test &quot;$ac_nscap_nonconst_opeq_bug&quot; = &quot;yes&quot; ; then</span>
<a href="#l14.6572"></a><span id="l14.6572" class="difflineplus">+    AC_DEFINE(NSCAP_DONT_PROVIDE_NONCONST_OPEQ)</span>
<a href="#l14.6573"></a><span id="l14.6573" class="difflineplus">+fi</span>
<a href="#l14.6574"></a><span id="l14.6574" class="difflineplus">+fi # SKIP_COMPILER_CHECKS</span>
<a href="#l14.6575"></a><span id="l14.6575" class="difflineplus">+</span>
<a href="#l14.6576"></a><span id="l14.6576" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6577"></a><span id="l14.6577" class="difflineplus">+dnl C++ rtti</span>
<a href="#l14.6578"></a><span id="l14.6578" class="difflineplus">+dnl Should be smarter and check that the compiler does indeed have rtti</span>
<a href="#l14.6579"></a><span id="l14.6579" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6580"></a><span id="l14.6580" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(cpp-rtti,</span>
<a href="#l14.6581"></a><span id="l14.6581" class="difflineplus">+[  --enable-cpp-rtti       Enable C++ RTTI ],</span>
<a href="#l14.6582"></a><span id="l14.6582" class="difflineplus">+[ _MOZ_USE_RTTI=1 ],</span>
<a href="#l14.6583"></a><span id="l14.6583" class="difflineplus">+[ _MOZ_USE_RTTI= ])</span>
<a href="#l14.6584"></a><span id="l14.6584" class="difflineplus">+</span>
<a href="#l14.6585"></a><span id="l14.6585" class="difflineplus">+if test &quot;$_MOZ_USE_RTTI&quot;; then</span>
<a href="#l14.6586"></a><span id="l14.6586" class="difflineplus">+   _MOZ_RTTI_FLAGS=$_MOZ_RTTI_FLAGS_ON</span>
<a href="#l14.6587"></a><span id="l14.6587" class="difflineplus">+else</span>
<a href="#l14.6588"></a><span id="l14.6588" class="difflineplus">+   _MOZ_RTTI_FLAGS=$_MOZ_RTTI_FLAGS_OFF</span>
<a href="#l14.6589"></a><span id="l14.6589" class="difflineplus">+fi</span>
<a href="#l14.6590"></a><span id="l14.6590" class="difflineplus">+</span>
<a href="#l14.6591"></a><span id="l14.6591" class="difflineplus">+AC_SUBST(_MOZ_RTTI_FLAGS_ON)</span>
<a href="#l14.6592"></a><span id="l14.6592" class="difflineplus">+</span>
<a href="#l14.6593"></a><span id="l14.6593" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6594"></a><span id="l14.6594" class="difflineplus">+dnl C++ exceptions (g++/egcs only - for now)</span>
<a href="#l14.6595"></a><span id="l14.6595" class="difflineplus">+dnl Should be smarter and check that the compiler does indeed have exceptions</span>
<a href="#l14.6596"></a><span id="l14.6596" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6597"></a><span id="l14.6597" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(cpp-exceptions,</span>
<a href="#l14.6598"></a><span id="l14.6598" class="difflineplus">+[  --enable-cpp-exceptions Enable C++ exceptions ],</span>
<a href="#l14.6599"></a><span id="l14.6599" class="difflineplus">+[ _MOZ_CPP_EXCEPTIONS=1 ],</span>
<a href="#l14.6600"></a><span id="l14.6600" class="difflineplus">+[ _MOZ_CPP_EXCEPTIONS= ])</span>
<a href="#l14.6601"></a><span id="l14.6601" class="difflineplus">+</span>
<a href="#l14.6602"></a><span id="l14.6602" class="difflineplus">+if test &quot;$_MOZ_CPP_EXCEPTIONS&quot;; then</span>
<a href="#l14.6603"></a><span id="l14.6603" class="difflineplus">+    _MOZ_EXCEPTIONS_FLAGS=$_MOZ_EXCEPTIONS_FLAGS_ON</span>
<a href="#l14.6604"></a><span id="l14.6604" class="difflineplus">+else</span>
<a href="#l14.6605"></a><span id="l14.6605" class="difflineplus">+    _MOZ_EXCEPTIONS_FLAGS=$_MOZ_EXCEPTIONS_FLAGS_OFF</span>
<a href="#l14.6606"></a><span id="l14.6606" class="difflineplus">+fi</span>
<a href="#l14.6607"></a><span id="l14.6607" class="difflineplus">+</span>
<a href="#l14.6608"></a><span id="l14.6608" class="difflineplus">+# Irix &amp; OSF native compilers do not like exception declarations </span>
<a href="#l14.6609"></a><span id="l14.6609" class="difflineplus">+# when exceptions are disabled</span>
<a href="#l14.6610"></a><span id="l14.6610" class="difflineplus">+if test -n &quot;$MIPSPRO_CXX&quot; -o -n &quot;$COMPAQ_CXX&quot; -o -n &quot;$VACPP&quot;; then</span>
<a href="#l14.6611"></a><span id="l14.6611" class="difflineplus">+    AC_DEFINE(CPP_THROW_NEW, [])</span>
<a href="#l14.6612"></a><span id="l14.6612" class="difflineplus">+else</span>
<a href="#l14.6613"></a><span id="l14.6613" class="difflineplus">+    AC_DEFINE(CPP_THROW_NEW, [throw()])</span>
<a href="#l14.6614"></a><span id="l14.6614" class="difflineplus">+fi</span>
<a href="#l14.6615"></a><span id="l14.6615" class="difflineplus">+AC_LANG_C</span>
<a href="#l14.6616"></a><span id="l14.6616" class="difflineplus">+</span>
<a href="#l14.6617"></a><span id="l14.6617" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6618"></a><span id="l14.6618" class="difflineplus">+dnl =</span>
<a href="#l14.6619"></a><span id="l14.6619" class="difflineplus">+dnl = Build depencency options</span>
<a href="#l14.6620"></a><span id="l14.6620" class="difflineplus">+dnl =</span>
<a href="#l14.6621"></a><span id="l14.6621" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6622"></a><span id="l14.6622" class="difflineplus">+MOZ_ARG_HEADER(Build dependencies)</span>
<a href="#l14.6623"></a><span id="l14.6623" class="difflineplus">+</span>
<a href="#l14.6624"></a><span id="l14.6624" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6625"></a><span id="l14.6625" class="difflineplus">+dnl = Do not auto generate dependency info</span>
<a href="#l14.6626"></a><span id="l14.6626" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6627"></a><span id="l14.6627" class="difflineplus">+MOZ_AUTO_DEPS=1</span>
<a href="#l14.6628"></a><span id="l14.6628" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(auto-deps,</span>
<a href="#l14.6629"></a><span id="l14.6629" class="difflineplus">+[  --disable-auto-deps     Do not automatically generate dependency info],</span>
<a href="#l14.6630"></a><span id="l14.6630" class="difflineplus">+    MOZ_AUTO_DEPS=,</span>
<a href="#l14.6631"></a><span id="l14.6631" class="difflineplus">+    MOZ_AUTO_DEPS=1)</span>
<a href="#l14.6632"></a><span id="l14.6632" class="difflineplus">+</span>
<a href="#l14.6633"></a><span id="l14.6633" class="difflineplus">+if test -n &quot;$MOZ_AUTO_DEPS&quot;; then</span>
<a href="#l14.6634"></a><span id="l14.6634" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6635"></a><span id="l14.6635" class="difflineplus">+dnl = Use mkdepend instead of $CC -MD for dependency generation</span>
<a href="#l14.6636"></a><span id="l14.6636" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6637"></a><span id="l14.6637" class="difflineplus">+_cpp_md_flag=</span>
<a href="#l14.6638"></a><span id="l14.6638" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(md,</span>
<a href="#l14.6639"></a><span id="l14.6639" class="difflineplus">+[  --disable-md            Do not use compiler-based dependencies ],</span>
<a href="#l14.6640"></a><span id="l14.6640" class="difflineplus">+  [_cpp_md_flag=],</span>
<a href="#l14.6641"></a><span id="l14.6641" class="difflineplus">+  [_cpp_md_flag=1],</span>
<a href="#l14.6642"></a><span id="l14.6642" class="difflineplus">+  [dnl Default is to turn on -MD if using GNU-compatible compilers</span>
<a href="#l14.6643"></a><span id="l14.6643" class="difflineplus">+   if test &quot;$GNU_CC&quot; -a &quot;$GNU_CXX&quot; -a &quot;$OS_ARCH&quot; != &quot;WINNT&quot; -a &quot;$OS_ARCH&quot; != &quot;WINCE&quot;; then</span>
<a href="#l14.6644"></a><span id="l14.6644" class="difflineplus">+     _cpp_md_flag=1</span>
<a href="#l14.6645"></a><span id="l14.6645" class="difflineplus">+   fi</span>
<a href="#l14.6646"></a><span id="l14.6646" class="difflineplus">+  dnl Default is to use -xM if using Sun Studio on Solaris</span>
<a href="#l14.6647"></a><span id="l14.6647" class="difflineplus">+   if test -z &quot;$GNU_CC&quot; &amp;&amp; test -z &quot;$GNU_CXX&quot; &amp;&amp; test &quot;$OS_ARCH&quot; = &quot;SunOS&quot;; then</span>
<a href="#l14.6648"></a><span id="l14.6648" class="difflineplus">+     _cpp_md_flag=1</span>
<a href="#l14.6649"></a><span id="l14.6649" class="difflineplus">+   fi])</span>
<a href="#l14.6650"></a><span id="l14.6650" class="difflineplus">+if test &quot;$_cpp_md_flag&quot;; then</span>
<a href="#l14.6651"></a><span id="l14.6651" class="difflineplus">+  COMPILER_DEPEND=1</span>
<a href="#l14.6652"></a><span id="l14.6652" class="difflineplus">+  if test &quot;$OS_ARCH&quot; = &quot;OpenVMS&quot;; then</span>
<a href="#l14.6653"></a><span id="l14.6653" class="difflineplus">+    _DEPEND_CFLAGS='$(subst =, ,$(filter-out %/.pp,-MM=-MD=-MF=$(MDDEPDIR)/$(*F).pp))'</span>
<a href="#l14.6654"></a><span id="l14.6654" class="difflineplus">+  else</span>
<a href="#l14.6655"></a><span id="l14.6655" class="difflineplus">+    _DEPEND_CFLAGS='$(filter-out %/.pp,-Wp,-MD,$(MDDEPDIR)/$(*F).pp)'</span>
<a href="#l14.6656"></a><span id="l14.6656" class="difflineplus">+  fi</span>
<a href="#l14.6657"></a><span id="l14.6657" class="difflineplus">+  dnl Sun Studio on Solaris use -xM instead of -MD, see config/rules.mk</span>
<a href="#l14.6658"></a><span id="l14.6658" class="difflineplus">+  if test -z &quot;$GNU_CC&quot; &amp;&amp; test -z &quot;$GNU_CXX&quot; &amp;&amp; test &quot;$OS_ARCH&quot; = &quot;SunOS&quot;; then</span>
<a href="#l14.6659"></a><span id="l14.6659" class="difflineplus">+    _DEPEND_CFLAGS=</span>
<a href="#l14.6660"></a><span id="l14.6660" class="difflineplus">+  fi</span>
<a href="#l14.6661"></a><span id="l14.6661" class="difflineplus">+else</span>
<a href="#l14.6662"></a><span id="l14.6662" class="difflineplus">+  COMPILER_DEPEND=</span>
<a href="#l14.6663"></a><span id="l14.6663" class="difflineplus">+  _USE_CPP_INCLUDE_FLAG=</span>
<a href="#l14.6664"></a><span id="l14.6664" class="difflineplus">+  _DEFINES_CFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'</span>
<a href="#l14.6665"></a><span id="l14.6665" class="difflineplus">+  _DEFINES_CXXFLAGS='$(ACDEFINES) -D_MOZILLA_CONFIG_H_ -DMOZILLA_CLIENT'</span>
<a href="#l14.6666"></a><span id="l14.6666" class="difflineplus">+fi</span>
<a href="#l14.6667"></a><span id="l14.6667" class="difflineplus">+fi # MOZ_AUTO_DEPS</span>
<a href="#l14.6668"></a><span id="l14.6668" class="difflineplus">+MDDEPDIR='.deps'</span>
<a href="#l14.6669"></a><span id="l14.6669" class="difflineplus">+AC_SUBST(MOZ_AUTO_DEPS)</span>
<a href="#l14.6670"></a><span id="l14.6670" class="difflineplus">+AC_SUBST(COMPILER_DEPEND)</span>
<a href="#l14.6671"></a><span id="l14.6671" class="difflineplus">+AC_SUBST(MDDEPDIR)</span>
<a href="#l14.6672"></a><span id="l14.6672" class="difflineplus">+</span>
<a href="#l14.6673"></a><span id="l14.6673" class="difflineplus">+</span>
<a href="#l14.6674"></a><span id="l14.6674" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6675"></a><span id="l14.6675" class="difflineplus">+dnl =</span>
<a href="#l14.6676"></a><span id="l14.6676" class="difflineplus">+dnl = Static Build Options</span>
<a href="#l14.6677"></a><span id="l14.6677" class="difflineplus">+dnl =</span>
<a href="#l14.6678"></a><span id="l14.6678" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6679"></a><span id="l14.6679" class="difflineplus">+MOZ_ARG_HEADER(Static build options)</span>
<a href="#l14.6680"></a><span id="l14.6680" class="difflineplus">+</span>
<a href="#l14.6681"></a><span id="l14.6681" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(static,</span>
<a href="#l14.6682"></a><span id="l14.6682" class="difflineplus">+[  --enable-static         Enable building of internal static libs],</span>
<a href="#l14.6683"></a><span id="l14.6683" class="difflineplus">+    BUILD_STATIC_LIBS=1,</span>
<a href="#l14.6684"></a><span id="l14.6684" class="difflineplus">+    BUILD_STATIC_LIBS=)</span>
<a href="#l14.6685"></a><span id="l14.6685" class="difflineplus">+</span>
<a href="#l14.6686"></a><span id="l14.6686" class="difflineplus">+dnl Disable libxul in debug builds, but not for xulrunner.</span>
<a href="#l14.6687"></a><span id="l14.6687" class="difflineplus">+if test -n &quot;$MOZ_DEBUG&quot; -a &quot;$MOZ_BUILD_APP&quot; != &quot;xulrunner&quot;; then</span>
<a href="#l14.6688"></a><span id="l14.6688" class="difflineplus">+   MOZ_ENABLE_LIBXUL=</span>
<a href="#l14.6689"></a><span id="l14.6689" class="difflineplus">+fi</span>
<a href="#l14.6690"></a><span id="l14.6690" class="difflineplus">+</span>
<a href="#l14.6691"></a><span id="l14.6691" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(libxul,</span>
<a href="#l14.6692"></a><span id="l14.6692" class="difflineplus">+[  --enable-libxul         Enable building of libxul],</span>
<a href="#l14.6693"></a><span id="l14.6693" class="difflineplus">+    MOZ_ENABLE_LIBXUL=1,</span>
<a href="#l14.6694"></a><span id="l14.6694" class="difflineplus">+    MOZ_ENABLE_LIBXUL=)</span>
<a href="#l14.6695"></a><span id="l14.6695" class="difflineplus">+</span>
<a href="#l14.6696"></a><span id="l14.6696" class="difflineplus">+if test -n &quot;$MOZ_ENABLE_LIBXUL&quot; -a -n &quot;$BUILD_STATIC_LIBS&quot;; then</span>
<a href="#l14.6697"></a><span id="l14.6697" class="difflineplus">+	AC_MSG_ERROR([--enable-libxul is not compatible with --enable-static])</span>
<a href="#l14.6698"></a><span id="l14.6698" class="difflineplus">+fi</span>
<a href="#l14.6699"></a><span id="l14.6699" class="difflineplus">+</span>
<a href="#l14.6700"></a><span id="l14.6700" class="difflineplus">+if test -n &quot;$MOZ_ENABLE_LIBXUL&quot; -a -z &quot;$MOZ_XUL_APP&quot;; then</span>
<a href="#l14.6701"></a><span id="l14.6701" class="difflineplus">+	AC_MSG_ERROR([--enable-libxul is only compatible with toolkit XUL applications.])</span>
<a href="#l14.6702"></a><span id="l14.6702" class="difflineplus">+fi</span>
<a href="#l14.6703"></a><span id="l14.6703" class="difflineplus">+</span>
<a href="#l14.6704"></a><span id="l14.6704" class="difflineplus">+if test -n &quot;$MOZ_ENABLE_LIBXUL&quot;; then</span>
<a href="#l14.6705"></a><span id="l14.6705" class="difflineplus">+    XPCOM_LIBS=&quot;$LIBXUL_LIBS&quot;</span>
<a href="#l14.6706"></a><span id="l14.6706" class="difflineplus">+    AC_DEFINE(MOZ_ENABLE_LIBXUL)</span>
<a href="#l14.6707"></a><span id="l14.6707" class="difflineplus">+else</span>
<a href="#l14.6708"></a><span id="l14.6708" class="difflineplus">+    if test -n &quot;$BUILD_STATIC_LIBS&quot;; then</span>
<a href="#l14.6709"></a><span id="l14.6709" class="difflineplus">+        AC_DEFINE(MOZ_STATIC_BUILD)</span>
<a href="#l14.6710"></a><span id="l14.6710" class="difflineplus">+    fi</span>
<a href="#l14.6711"></a><span id="l14.6711" class="difflineplus">+    XPCOM_LIBS=&quot;$DYNAMIC_XPCOM_LIBS&quot;</span>
<a href="#l14.6712"></a><span id="l14.6712" class="difflineplus">+fi</span>
<a href="#l14.6713"></a><span id="l14.6713" class="difflineplus">+</span>
<a href="#l14.6714"></a><span id="l14.6714" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6715"></a><span id="l14.6715" class="difflineplus">+dnl = Force JS to be a static lib</span>
<a href="#l14.6716"></a><span id="l14.6716" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6717"></a><span id="l14.6717" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(js-static-build,</span>
<a href="#l14.6718"></a><span id="l14.6718" class="difflineplus">+[  --enable-js-static-build  Force js to be a static lib],</span>
<a href="#l14.6719"></a><span id="l14.6719" class="difflineplus">+    JS_STATIC_BUILD=1,</span>
<a href="#l14.6720"></a><span id="l14.6720" class="difflineplus">+    JS_STATIC_BUILD= )</span>
<a href="#l14.6721"></a><span id="l14.6721" class="difflineplus">+</span>
<a href="#l14.6722"></a><span id="l14.6722" class="difflineplus">+AC_SUBST(JS_STATIC_BUILD)</span>
<a href="#l14.6723"></a><span id="l14.6723" class="difflineplus">+        </span>
<a href="#l14.6724"></a><span id="l14.6724" class="difflineplus">+if test -n &quot;$JS_STATIC_BUILD&quot;; then</span>
<a href="#l14.6725"></a><span id="l14.6725" class="difflineplus">+    AC_DEFINE(EXPORT_JS_API)</span>
<a href="#l14.6726"></a><span id="l14.6726" class="difflineplus">+</span>
<a href="#l14.6727"></a><span id="l14.6727" class="difflineplus">+if test -z &quot;$BUILD_STATIC_LIBS&quot;; then</span>
<a href="#l14.6728"></a><span id="l14.6728" class="difflineplus">+    AC_MSG_ERROR([--enable-js-static-build is only compatible with --enable-static])</span>
<a href="#l14.6729"></a><span id="l14.6729" class="difflineplus">+fi</span>
<a href="#l14.6730"></a><span id="l14.6730" class="difflineplus">+</span>
<a href="#l14.6731"></a><span id="l14.6731" class="difflineplus">+fi</span>
<a href="#l14.6732"></a><span id="l14.6732" class="difflineplus">+</span>
<a href="#l14.6733"></a><span id="l14.6733" class="difflineplus">+dnl Disable static mail in debug builds, but not with libxul sdk.</span>
<a href="#l14.6734"></a><span id="l14.6734" class="difflineplus">+if test -n &quot;$MOZ_DEBUG&quot; -a -z &quot;$LIBXUL_SDK&quot;; then</span>
<a href="#l14.6735"></a><span id="l14.6735" class="difflineplus">+   MOZ_STATIC_MAIL_BUILD=</span>
<a href="#l14.6736"></a><span id="l14.6736" class="difflineplus">+fi</span>
<a href="#l14.6737"></a><span id="l14.6737" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(static-mail,</span>
<a href="#l14.6738"></a><span id="l14.6738" class="difflineplus">+[  --enable-static-mail Enable static mail build support],</span>
<a href="#l14.6739"></a><span id="l14.6739" class="difflineplus">+    MOZ_STATIC_MAIL_BUILD=1,</span>
<a href="#l14.6740"></a><span id="l14.6740" class="difflineplus">+    MOZ_STATIC_MAIL_BUILD= )</span>
<a href="#l14.6741"></a><span id="l14.6741" class="difflineplus">+</span>
<a href="#l14.6742"></a><span id="l14.6742" class="difflineplus">+if test &quot;$MOZ_STATIC_MAIL_BUILD&quot;; then</span>
<a href="#l14.6743"></a><span id="l14.6743" class="difflineplus">+    AC_DEFINE(MOZ_STATIC_MAIL_BUILD)</span>
<a href="#l14.6744"></a><span id="l14.6744" class="difflineplus">+fi</span>
<a href="#l14.6745"></a><span id="l14.6745" class="difflineplus">+</span>
<a href="#l14.6746"></a><span id="l14.6746" class="difflineplus">+AC_SUBST(MOZ_STATIC_MAIL_BUILD)</span>
<a href="#l14.6747"></a><span id="l14.6747" class="difflineplus">+</span>
<a href="#l14.6748"></a><span id="l14.6748" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6749"></a><span id="l14.6749" class="difflineplus">+dnl =</span>
<a href="#l14.6750"></a><span id="l14.6750" class="difflineplus">+dnl = Standalone module options</span>
<a href="#l14.6751"></a><span id="l14.6751" class="difflineplus">+dnl = </span>
<a href="#l14.6752"></a><span id="l14.6752" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6753"></a><span id="l14.6753" class="difflineplus">+MOZ_ARG_HEADER(Standalone module options (Not for building Mozilla))</span>
<a href="#l14.6754"></a><span id="l14.6754" class="difflineplus">+</span>
<a href="#l14.6755"></a><span id="l14.6755" class="difflineplus">+dnl Check for GLib and libIDL.</span>
<a href="#l14.6756"></a><span id="l14.6756" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6757"></a><span id="l14.6757" class="difflineplus">+case &quot;$target_os&quot; in</span>
<a href="#l14.6758"></a><span id="l14.6758" class="difflineplus">+msvc*|mks*|cygwin*|mingw*|wince*)</span>
<a href="#l14.6759"></a><span id="l14.6759" class="difflineplus">+    SKIP_IDL_CHECK=&quot;yes&quot;</span>
<a href="#l14.6760"></a><span id="l14.6760" class="difflineplus">+    ;;</span>
<a href="#l14.6761"></a><span id="l14.6761" class="difflineplus">+*)</span>
<a href="#l14.6762"></a><span id="l14.6762" class="difflineplus">+    SKIP_IDL_CHECK=&quot;no&quot;</span>
<a href="#l14.6763"></a><span id="l14.6763" class="difflineplus">+    ;;</span>
<a href="#l14.6764"></a><span id="l14.6764" class="difflineplus">+esac</span>
<a href="#l14.6765"></a><span id="l14.6765" class="difflineplus">+</span>
<a href="#l14.6766"></a><span id="l14.6766" class="difflineplus">+if test -z &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.6767"></a><span id="l14.6767" class="difflineplus">+    SKIP_IDL_CHECK=&quot;yes&quot;</span>
<a href="#l14.6768"></a><span id="l14.6768" class="difflineplus">+fi</span>
<a href="#l14.6769"></a><span id="l14.6769" class="difflineplus">+</span>
<a href="#l14.6770"></a><span id="l14.6770" class="difflineplus">+dnl = Allow users to disable libIDL checking for standalone modules</span>
<a href="#l14.6771"></a><span id="l14.6771" class="difflineplus">+MOZ_ARG_WITHOUT_BOOL(libIDL,</span>
<a href="#l14.6772"></a><span id="l14.6772" class="difflineplus">+[  --without-libIDL        Skip check for libIDL (standalone modules only)],</span>
<a href="#l14.6773"></a><span id="l14.6773" class="difflineplus">+	SKIP_IDL_CHECK=&quot;yes&quot;)</span>
<a href="#l14.6774"></a><span id="l14.6774" class="difflineplus">+</span>
<a href="#l14.6775"></a><span id="l14.6775" class="difflineplus">+if test &quot;$SKIP_IDL_CHECK&quot; = &quot;no&quot;</span>
<a href="#l14.6776"></a><span id="l14.6776" class="difflineplus">+then</span>
<a href="#l14.6777"></a><span id="l14.6777" class="difflineplus">+    _LIBIDL_FOUND=</span>
<a href="#l14.6778"></a><span id="l14.6778" class="difflineplus">+    if test &quot;$MACOS_SDK_DIR&quot;; then </span>
<a href="#l14.6779"></a><span id="l14.6779" class="difflineplus">+      dnl xpidl, and therefore libIDL, is only needed on the build host.</span>
<a href="#l14.6780"></a><span id="l14.6780" class="difflineplus">+      dnl Don't build it against the SDK, as that causes problems.</span>
<a href="#l14.6781"></a><span id="l14.6781" class="difflineplus">+      _MACSAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.6782"></a><span id="l14.6782" class="difflineplus">+      _MACSAVE_LIBS=&quot;$LIBS&quot;</span>
<a href="#l14.6783"></a><span id="l14.6783" class="difflineplus">+      _MACSAVE_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l14.6784"></a><span id="l14.6784" class="difflineplus">+      _MACSAVE_NEXT_ROOT=&quot;$NEXT_ROOT&quot;</span>
<a href="#l14.6785"></a><span id="l14.6785" class="difflineplus">+      changequote(,)</span>
<a href="#l14.6786"></a><span id="l14.6786" class="difflineplus">+      CFLAGS=`echo $CFLAGS|sed -E -e &quot;s%((-I|-isystem )${MACOS_SDK_DIR}/usr/(include|lib/gcc)[^ ]*)|-F${MACOS_SDK_DIR}(/System)?/Library/Frameworks[^ ]*|-nostdinc[^ ]*|-isysroot ${MACOS_SDK_DIR}%%g&quot;`</span>
<a href="#l14.6787"></a><span id="l14.6787" class="difflineplus">+      LIBS=`echo $LIBS|sed -e &quot;s?-L${MACOS_SDK_DIR}/usr/lib[^ ]*??g&quot;`</span>
<a href="#l14.6788"></a><span id="l14.6788" class="difflineplus">+      LDFLAGS=`echo $LDFLAGS|sed -e &quot;s?-Wl,-syslibroot,${MACOS_SDK_DIR}??g&quot;`</span>
<a href="#l14.6789"></a><span id="l14.6789" class="difflineplus">+      changequote([,])</span>
<a href="#l14.6790"></a><span id="l14.6790" class="difflineplus">+      unset NEXT_ROOT</span>
<a href="#l14.6791"></a><span id="l14.6791" class="difflineplus">+    fi</span>
<a href="#l14.6792"></a><span id="l14.6792" class="difflineplus">+</span>
<a href="#l14.6793"></a><span id="l14.6793" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GTK2&quot;; then</span>
<a href="#l14.6794"></a><span id="l14.6794" class="difflineplus">+        PKG_CHECK_MODULES(LIBIDL, libIDL-2.0 &gt;= 0.8.0 glib-2.0 gobject-2.0, _LIBIDL_FOUND=1,_LIBIDL_FOUND=)</span>
<a href="#l14.6795"></a><span id="l14.6795" class="difflineplus">+    fi</span>
<a href="#l14.6796"></a><span id="l14.6796" class="difflineplus">+    dnl if no gtk/libIDL1 or gtk2/libIDL2 combination was found, fall back</span>
<a href="#l14.6797"></a><span id="l14.6797" class="difflineplus">+    dnl to either libIDL1 or libIDL2.</span>
<a href="#l14.6798"></a><span id="l14.6798" class="difflineplus">+    if test -z &quot;$_LIBIDL_FOUND&quot;; then</span>
<a href="#l14.6799"></a><span id="l14.6799" class="difflineplus">+        AM_PATH_LIBIDL($LIBIDL_VERSION,_LIBIDL_FOUND=1)</span>
<a href="#l14.6800"></a><span id="l14.6800" class="difflineplus">+        if test -z &quot;$_LIBIDL_FOUND&quot;; then</span>
<a href="#l14.6801"></a><span id="l14.6801" class="difflineplus">+            PKG_CHECK_MODULES(LIBIDL, libIDL-2.0 &gt;= 0.8.0,_LIBIDL_FOUND=1)</span>
<a href="#l14.6802"></a><span id="l14.6802" class="difflineplus">+        fi</span>
<a href="#l14.6803"></a><span id="l14.6803" class="difflineplus">+    fi</span>
<a href="#l14.6804"></a><span id="l14.6804" class="difflineplus">+    dnl</span>
<a href="#l14.6805"></a><span id="l14.6805" class="difflineplus">+    dnl If we don't have a libIDL config program &amp; not cross-compiling, </span>
<a href="#l14.6806"></a><span id="l14.6806" class="difflineplus">+    dnl     look for orbit-config instead.</span>
<a href="#l14.6807"></a><span id="l14.6807" class="difflineplus">+    dnl</span>
<a href="#l14.6808"></a><span id="l14.6808" class="difflineplus">+    if test -z &quot;$_LIBIDL_FOUND&quot; &amp;&amp; test -z &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l14.6809"></a><span id="l14.6809" class="difflineplus">+        AC_PATH_PROGS(ORBIT_CONFIG, $ORBIT_CONFIG orbit-config)</span>
<a href="#l14.6810"></a><span id="l14.6810" class="difflineplus">+        if test -n &quot;$ORBIT_CONFIG&quot;; then</span>
<a href="#l14.6811"></a><span id="l14.6811" class="difflineplus">+            AC_MSG_CHECKING([for ORBit libIDL usability])</span>
<a href="#l14.6812"></a><span id="l14.6812" class="difflineplus">+        	_ORBIT_CFLAGS=`${ORBIT_CONFIG} client --cflags`</span>
<a href="#l14.6813"></a><span id="l14.6813" class="difflineplus">+    	    _ORBIT_LIBS=`${ORBIT_CONFIG} client --libs`</span>
<a href="#l14.6814"></a><span id="l14.6814" class="difflineplus">+            _ORBIT_INC_PATH=`${PERL} -e '{ for $f (@ARGV) { print &quot;$f &quot; if ($f =~ m/^-I/); } }' -- ${_ORBIT_CFLAGS}`</span>
<a href="#l14.6815"></a><span id="l14.6815" class="difflineplus">+            _ORBIT_LIB_PATH=`${PERL} -e '{ for $f (@ARGV) { print &quot;$f &quot; if ($f =~ m/^-L/); } }' -- ${_ORBIT_LIBS}`</span>
<a href="#l14.6816"></a><span id="l14.6816" class="difflineplus">+            LIBIDL_CFLAGS=&quot;$_ORBIT_INC_PATH&quot;</span>
<a href="#l14.6817"></a><span id="l14.6817" class="difflineplus">+            LIBIDL_LIBS=&quot;$_ORBIT_LIB_PATH -lIDL -lglib&quot;</span>
<a href="#l14.6818"></a><span id="l14.6818" class="difflineplus">+            LIBIDL_CONFIG=</span>
<a href="#l14.6819"></a><span id="l14.6819" class="difflineplus">+            _SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l14.6820"></a><span id="l14.6820" class="difflineplus">+            _SAVE_LIBS=&quot;$LIBS&quot;</span>
<a href="#l14.6821"></a><span id="l14.6821" class="difflineplus">+            CFLAGS=&quot;$LIBIDL_CFLAGS $CFLAGS&quot;</span>
<a href="#l14.6822"></a><span id="l14.6822" class="difflineplus">+            LIBS=&quot;$LIBIDL_LIBS $LIBS&quot;</span>
<a href="#l14.6823"></a><span id="l14.6823" class="difflineplus">+            AC_TRY_RUN([</span>
<a href="#l14.6824"></a><span id="l14.6824" class="difflineplus">+#include &lt;stdlib.h&gt;</span>
<a href="#l14.6825"></a><span id="l14.6825" class="difflineplus">+#include &lt;libIDL/IDL.h&gt;</span>
<a href="#l14.6826"></a><span id="l14.6826" class="difflineplus">+int main() {</span>
<a href="#l14.6827"></a><span id="l14.6827" class="difflineplus">+  char *s;</span>
<a href="#l14.6828"></a><span id="l14.6828" class="difflineplus">+  s=strdup(IDL_get_libver_string());</span>
<a href="#l14.6829"></a><span id="l14.6829" class="difflineplus">+  if(s==NULL) {</span>
<a href="#l14.6830"></a><span id="l14.6830" class="difflineplus">+    exit(1);</span>
<a href="#l14.6831"></a><span id="l14.6831" class="difflineplus">+  }</span>
<a href="#l14.6832"></a><span id="l14.6832" class="difflineplus">+  exit(0);</span>
<a href="#l14.6833"></a><span id="l14.6833" class="difflineplus">+}</span>
<a href="#l14.6834"></a><span id="l14.6834" class="difflineplus">+            ], [_LIBIDL_FOUND=1</span>
<a href="#l14.6835"></a><span id="l14.6835" class="difflineplus">+                result=&quot;yes&quot;],</span>
<a href="#l14.6836"></a><span id="l14.6836" class="difflineplus">+               [LIBIDL_CFLAGS=</span>
<a href="#l14.6837"></a><span id="l14.6837" class="difflineplus">+                LIBIDL_LIBS=</span>
<a href="#l14.6838"></a><span id="l14.6838" class="difflineplus">+                result=&quot;no&quot;],</span>
<a href="#l14.6839"></a><span id="l14.6839" class="difflineplus">+               [_LIBIDL_FOUND=1</span>
<a href="#l14.6840"></a><span id="l14.6840" class="difflineplus">+                result=&quot;maybe&quot;] )</span>
<a href="#l14.6841"></a><span id="l14.6841" class="difflineplus">+            AC_MSG_RESULT($result)</span>
<a href="#l14.6842"></a><span id="l14.6842" class="difflineplus">+            CFLAGS=&quot;$_SAVE_CFLAGS&quot;</span>
<a href="#l14.6843"></a><span id="l14.6843" class="difflineplus">+            LIBS=&quot;$_SAVE_LIBS&quot;</span>
<a href="#l14.6844"></a><span id="l14.6844" class="difflineplus">+        fi</span>
<a href="#l14.6845"></a><span id="l14.6845" class="difflineplus">+    fi</span>
<a href="#l14.6846"></a><span id="l14.6846" class="difflineplus">+    if test -z &quot;$_LIBIDL_FOUND&quot;; then</span>
<a href="#l14.6847"></a><span id="l14.6847" class="difflineplus">+        AC_MSG_ERROR([libIDL not found.</span>
<a href="#l14.6848"></a><span id="l14.6848" class="difflineplus">+        libIDL $LIBIDL_VERSION or higher is required.])</span>
<a href="#l14.6849"></a><span id="l14.6849" class="difflineplus">+    fi</span>
<a href="#l14.6850"></a><span id="l14.6850" class="difflineplus">+    if test &quot;$MACOS_SDK_DIR&quot;; then</span>
<a href="#l14.6851"></a><span id="l14.6851" class="difflineplus">+      CFLAGS=&quot;$_MACSAVE_CFLAGS&quot;</span>
<a href="#l14.6852"></a><span id="l14.6852" class="difflineplus">+      LIBS=&quot;$_MACSAVE_LIBS&quot;</span>
<a href="#l14.6853"></a><span id="l14.6853" class="difflineplus">+      LDFLAGS=&quot;$_MACSAVE_LDFLAGS&quot;</span>
<a href="#l14.6854"></a><span id="l14.6854" class="difflineplus">+      if test -n &quot;$_MACSAVE_NEXT_ROOT&quot; ; then</span>
<a href="#l14.6855"></a><span id="l14.6855" class="difflineplus">+        export NEXT_ROOT=&quot;$_MACSAVE_NEXT_ROOT&quot;</span>
<a href="#l14.6856"></a><span id="l14.6856" class="difflineplus">+      fi</span>
<a href="#l14.6857"></a><span id="l14.6857" class="difflineplus">+    fi</span>
<a href="#l14.6858"></a><span id="l14.6858" class="difflineplus">+fi</span>
<a href="#l14.6859"></a><span id="l14.6859" class="difflineplus">+</span>
<a href="#l14.6860"></a><span id="l14.6860" class="difflineplus">+if test -n &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l14.6861"></a><span id="l14.6861" class="difflineplus">+     if test -z &quot;$HOST_LIBIDL_CONFIG&quot;; then</span>
<a href="#l14.6862"></a><span id="l14.6862" class="difflineplus">+        HOST_LIBIDL_CONFIG=&quot;$LIBIDL_CONFIG&quot;</span>
<a href="#l14.6863"></a><span id="l14.6863" class="difflineplus">+    fi</span>
<a href="#l14.6864"></a><span id="l14.6864" class="difflineplus">+    if test -n &quot;$HOST_LIBIDL_CONFIG&quot; &amp;&amp; test &quot;$HOST_LIBIDL_CONFIG&quot; != &quot;no&quot;; then</span>
<a href="#l14.6865"></a><span id="l14.6865" class="difflineplus">+        HOST_LIBIDL_CFLAGS=`${HOST_LIBIDL_CONFIG} --cflags`</span>
<a href="#l14.6866"></a><span id="l14.6866" class="difflineplus">+        HOST_LIBIDL_LIBS=`${HOST_LIBIDL_CONFIG} --libs`</span>
<a href="#l14.6867"></a><span id="l14.6867" class="difflineplus">+    else</span>
<a href="#l14.6868"></a><span id="l14.6868" class="difflineplus">+        HOST_LIBIDL_CFLAGS=&quot;$LIBIDL_CFLAGS&quot;</span>
<a href="#l14.6869"></a><span id="l14.6869" class="difflineplus">+        HOST_LIBIDL_LIBS=&quot;$LIBIDL_LIBS&quot;</span>
<a href="#l14.6870"></a><span id="l14.6870" class="difflineplus">+    fi</span>
<a href="#l14.6871"></a><span id="l14.6871" class="difflineplus">+fi</span>
<a href="#l14.6872"></a><span id="l14.6872" class="difflineplus">+</span>
<a href="#l14.6873"></a><span id="l14.6873" class="difflineplus">+if test -z &quot;$SKIP_PATH_CHECKS&quot;; then</span>
<a href="#l14.6874"></a><span id="l14.6874" class="difflineplus">+if test -z &quot;${GLIB_CFLAGS}&quot; || test -z &quot;${GLIB_LIBS}&quot; ; then</span>
<a href="#l14.6875"></a><span id="l14.6875" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GTK2&quot;; then</span>
<a href="#l14.6876"></a><span id="l14.6876" class="difflineplus">+        PKG_CHECK_MODULES(GLIB, glib-2.0 &gt;= 1.3.7 gobject-2.0)</span>
<a href="#l14.6877"></a><span id="l14.6877" class="difflineplus">+    else</span>
<a href="#l14.6878"></a><span id="l14.6878" class="difflineplus">+        AM_PATH_GLIB(${GLIB_VERSION})</span>
<a href="#l14.6879"></a><span id="l14.6879" class="difflineplus">+    fi</span>
<a href="#l14.6880"></a><span id="l14.6880" class="difflineplus">+fi</span>
<a href="#l14.6881"></a><span id="l14.6881" class="difflineplus">+fi</span>
<a href="#l14.6882"></a><span id="l14.6882" class="difflineplus">+</span>
<a href="#l14.6883"></a><span id="l14.6883" class="difflineplus">+if test -z &quot;${GLIB_GMODULE_LIBS}&quot; -a -n &quot;${GLIB_CONFIG}&quot;; then</span>
<a href="#l14.6884"></a><span id="l14.6884" class="difflineplus">+    GLIB_GMODULE_LIBS=`$GLIB_CONFIG gmodule --libs`</span>
<a href="#l14.6885"></a><span id="l14.6885" class="difflineplus">+fi</span>
<a href="#l14.6886"></a><span id="l14.6886" class="difflineplus">+</span>
<a href="#l14.6887"></a><span id="l14.6887" class="difflineplus">+AC_SUBST(LIBIDL_CFLAGS)</span>
<a href="#l14.6888"></a><span id="l14.6888" class="difflineplus">+AC_SUBST(LIBIDL_LIBS)</span>
<a href="#l14.6889"></a><span id="l14.6889" class="difflineplus">+AC_SUBST(STATIC_LIBIDL)</span>
<a href="#l14.6890"></a><span id="l14.6890" class="difflineplus">+AC_SUBST(GLIB_CFLAGS)</span>
<a href="#l14.6891"></a><span id="l14.6891" class="difflineplus">+AC_SUBST(GLIB_LIBS)</span>
<a href="#l14.6892"></a><span id="l14.6892" class="difflineplus">+AC_SUBST(GLIB_GMODULE_LIBS)</span>
<a href="#l14.6893"></a><span id="l14.6893" class="difflineplus">+AC_SUBST(HOST_LIBIDL_CONFIG)</span>
<a href="#l14.6894"></a><span id="l14.6894" class="difflineplus">+AC_SUBST(HOST_LIBIDL_CFLAGS)</span>
<a href="#l14.6895"></a><span id="l14.6895" class="difflineplus">+AC_SUBST(HOST_LIBIDL_LIBS)</span>
<a href="#l14.6896"></a><span id="l14.6896" class="difflineplus">+</span>
<a href="#l14.6897"></a><span id="l14.6897" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6898"></a><span id="l14.6898" class="difflineplus">+dnl Check for libart</span>
<a href="#l14.6899"></a><span id="l14.6899" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6900"></a><span id="l14.6900" class="difflineplus">+if test &quot;$MOZ_SVG_RENDERER_LIBART&quot;; then</span>
<a href="#l14.6901"></a><span id="l14.6901" class="difflineplus">+  if test ! -f $MOZILLA_SRCDIR/other-licenses/libart_lgpl/Makefile.in; then</span>
<a href="#l14.6902"></a><span id="l14.6902" class="difflineplus">+    AC_MSG_ERROR([You must check out the mozilla version of libart. Use</span>
<a href="#l14.6903"></a><span id="l14.6903" class="difflineplus">+mk_add_options MOZ_CO_MODULE=mozilla/other-licenses/libart_lgpl])</span>
<a href="#l14.6904"></a><span id="l14.6904" class="difflineplus">+  fi</span>
<a href="#l14.6905"></a><span id="l14.6905" class="difflineplus">+</span>
<a href="#l14.6906"></a><span id="l14.6906" class="difflineplus">+  dnl libart's configure hasn't been run yet, but we know what the</span>
<a href="#l14.6907"></a><span id="l14.6907" class="difflineplus">+  dnl answer should be anyway</span>
<a href="#l14.6908"></a><span id="l14.6908" class="difflineplus">+  MOZ_LIBART_CFLAGS='-I${DIST}/include/libart_lgpl'</span>
<a href="#l14.6909"></a><span id="l14.6909" class="difflineplus">+  case &quot;$target_os&quot; in</span>
<a href="#l14.6910"></a><span id="l14.6910" class="difflineplus">+  msvc*|mks*|cygwin*|mingw*|wince*)</span>
<a href="#l14.6911"></a><span id="l14.6911" class="difflineplus">+      MOZ_LIBART_LIBS='$(LIBXUL_DIST)/lib/$(LIB_PREFIX)moz_art_lgpl.$(IMPORT_LIB_SUFFIX)' </span>
<a href="#l14.6912"></a><span id="l14.6912" class="difflineplus">+      ;;</span>
<a href="#l14.6913"></a><span id="l14.6913" class="difflineplus">+  os2*)</span>
<a href="#l14.6914"></a><span id="l14.6914" class="difflineplus">+      MOZ_LIBART_LIBS='-lmoz_art -lm'</span>
<a href="#l14.6915"></a><span id="l14.6915" class="difflineplus">+      ;;</span>
<a href="#l14.6916"></a><span id="l14.6916" class="difflineplus">+  beos*)</span>
<a href="#l14.6917"></a><span id="l14.6917" class="difflineplus">+      MOZ_LIBART_LIBS='-lmoz_art_lgpl -lroot -lbe'</span>
<a href="#l14.6918"></a><span id="l14.6918" class="difflineplus">+      ;;</span>
<a href="#l14.6919"></a><span id="l14.6919" class="difflineplus">+  *)</span>
<a href="#l14.6920"></a><span id="l14.6920" class="difflineplus">+      MOZ_LIBART_LIBS='-lmoz_art_lgpl -lm'</span>
<a href="#l14.6921"></a><span id="l14.6921" class="difflineplus">+      ;;</span>
<a href="#l14.6922"></a><span id="l14.6922" class="difflineplus">+  esac</span>
<a href="#l14.6923"></a><span id="l14.6923" class="difflineplus">+  AC_FUNC_ALLOCA</span>
<a href="#l14.6924"></a><span id="l14.6924" class="difflineplus">+fi</span>
<a href="#l14.6925"></a><span id="l14.6925" class="difflineplus">+</span>
<a href="#l14.6926"></a><span id="l14.6926" class="difflineplus">+AC_SUBST(MOZ_LIBART_CFLAGS)</span>
<a href="#l14.6927"></a><span id="l14.6927" class="difflineplus">+AC_SUBST(MOZ_LIBART_LIBS)</span>
<a href="#l14.6928"></a><span id="l14.6928" class="difflineplus">+</span>
<a href="#l14.6929"></a><span id="l14.6929" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6930"></a><span id="l14.6930" class="difflineplus">+dnl Check for cairo</span>
<a href="#l14.6931"></a><span id="l14.6931" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.6932"></a><span id="l14.6932" class="difflineplus">+MOZ_CAIRO_CFLAGS='-I$(LIBXUL_DIST)/include/cairo'</span>
<a href="#l14.6933"></a><span id="l14.6933" class="difflineplus">+</span>
<a href="#l14.6934"></a><span id="l14.6934" class="difflineplus">+MOZ_TREE_CAIRO=1</span>
<a href="#l14.6935"></a><span id="l14.6935" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(system-cairo,</span>
<a href="#l14.6936"></a><span id="l14.6936" class="difflineplus">+[ --enable-system-cairo Use system cairo (located with pkgconfig)],</span>
<a href="#l14.6937"></a><span id="l14.6937" class="difflineplus">+MOZ_TREE_CAIRO=,</span>
<a href="#l14.6938"></a><span id="l14.6938" class="difflineplus">+MOZ_TREE_CAIRO=1 )</span>
<a href="#l14.6939"></a><span id="l14.6939" class="difflineplus">+</span>
<a href="#l14.6940"></a><span id="l14.6940" class="difflineplus">+# Check for headers defining standard int types.</span>
<a href="#l14.6941"></a><span id="l14.6941" class="difflineplus">+AC_CHECK_HEADERS(stdint.h inttypes.h sys/int_types.h)</span>
<a href="#l14.6942"></a><span id="l14.6942" class="difflineplus">+</span>
<a href="#l14.6943"></a><span id="l14.6943" class="difflineplus">+if test &quot;$MOZ_TREE_CAIRO&quot;; then</span>
<a href="#l14.6944"></a><span id="l14.6944" class="difflineplus">+    AC_DEFINE(MOZ_TREE_CAIRO)</span>
<a href="#l14.6945"></a><span id="l14.6945" class="difflineplus">+</span>
<a href="#l14.6946"></a><span id="l14.6946" class="difflineplus">+    # For now we assume that we will have a uint64_t available through</span>
<a href="#l14.6947"></a><span id="l14.6947" class="difflineplus">+    # one of the above headers or mozstdint.h.</span>
<a href="#l14.6948"></a><span id="l14.6948" class="difflineplus">+    AC_DEFINE(HAVE_UINT64_T)</span>
<a href="#l14.6949"></a><span id="l14.6949" class="difflineplus">+</span>
<a href="#l14.6950"></a><span id="l14.6950" class="difflineplus">+    # Define macros for cairo-features.h</span>
<a href="#l14.6951"></a><span id="l14.6951" class="difflineplus">+    if test &quot;$MOZ_X11&quot;; then</span>
<a href="#l14.6952"></a><span id="l14.6952" class="difflineplus">+        XLIB_SURFACE_FEATURE=&quot;#define CAIRO_HAS_XLIB_SURFACE 1&quot;</span>
<a href="#l14.6953"></a><span id="l14.6953" class="difflineplus">+        XLIB_XRENDER_SURFACE_FEATURE=&quot;#define CAIRO_HAS_XLIB_XRENDER_SURFACE 1&quot;</span>
<a href="#l14.6954"></a><span id="l14.6954" class="difflineplus">+        PS_SURFACE_FEATURE=&quot;#define CAIRO_HAS_PS_SURFACE 1&quot;</span>
<a href="#l14.6955"></a><span id="l14.6955" class="difflineplus">+        PDF_SURFACE_FEATURE=&quot;#define CAIRO_HAS_PDF_SURFACE 1&quot;</span>
<a href="#l14.6956"></a><span id="l14.6956" class="difflineplus">+        FT_FONT_FEATURE=&quot;#define CAIRO_HAS_FT_FONT 1&quot;</span>
<a href="#l14.6957"></a><span id="l14.6957" class="difflineplus">+        MOZ_ENABLE_CAIRO_FT=1</span>
<a href="#l14.6958"></a><span id="l14.6958" class="difflineplus">+        CAIRO_FT_CFLAGS=&quot;$FT2_CFLAGS&quot;</span>
<a href="#l14.6959"></a><span id="l14.6959" class="difflineplus">+    fi</span>
<a href="#l14.6960"></a><span id="l14.6960" class="difflineplus">+    if test &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;mac&quot; -o &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;cocoa&quot;; then</span>
<a href="#l14.6961"></a><span id="l14.6961" class="difflineplus">+        QUARTZ_SURFACE_FEATURE=&quot;#define CAIRO_HAS_QUARTZ_SURFACE 1&quot;</span>
<a href="#l14.6962"></a><span id="l14.6962" class="difflineplus">+        QUARTZ_IMAGE_SURFACE_FEATURE=&quot;#define CAIRO_HAS_QUARTZ_IMAGE_SURFACE 1&quot;</span>
<a href="#l14.6963"></a><span id="l14.6963" class="difflineplus">+        QUARTZ_FONT_FEATURE=&quot;#define CAIRO_HAS_QUARTZ_FONT 1&quot;</span>
<a href="#l14.6964"></a><span id="l14.6964" class="difflineplus">+    fi</span>
<a href="#l14.6965"></a><span id="l14.6965" class="difflineplus">+    if test &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;windows&quot;; then</span>
<a href="#l14.6966"></a><span id="l14.6966" class="difflineplus">+        WIN32_SURFACE_FEATURE=&quot;#define CAIRO_HAS_WIN32_SURFACE 1&quot;</span>
<a href="#l14.6967"></a><span id="l14.6967" class="difflineplus">+        WIN32_FONT_FEATURE=&quot;#define CAIRO_HAS_WIN32_FONT 1&quot;</span>
<a href="#l14.6968"></a><span id="l14.6968" class="difflineplus">+        PDF_SURFACE_FEATURE=&quot;#define CAIRO_HAS_PDF_SURFACE 1&quot;</span>
<a href="#l14.6969"></a><span id="l14.6969" class="difflineplus">+    fi</span>
<a href="#l14.6970"></a><span id="l14.6970" class="difflineplus">+    if test &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;os2&quot;; then</span>
<a href="#l14.6971"></a><span id="l14.6971" class="difflineplus">+        OS2_SURFACE_FEATURE=&quot;#define CAIRO_HAS_OS2_SURFACE 1&quot;</span>
<a href="#l14.6972"></a><span id="l14.6972" class="difflineplus">+        FT_FONT_FEATURE=&quot;#define CAIRO_HAS_FT_FONT 1&quot;</span>
<a href="#l14.6973"></a><span id="l14.6973" class="difflineplus">+        PDF_SURFACE_FEATURE=&quot;#define CAIRO_HAS_PDF_SURFACE 1&quot;</span>
<a href="#l14.6974"></a><span id="l14.6974" class="difflineplus">+        MOZ_ENABLE_CAIRO_FT=1</span>
<a href="#l14.6975"></a><span id="l14.6975" class="difflineplus">+        CAIRO_FT_CFLAGS=&quot;-I${MZFTCFGFT2}/include&quot;</span>
<a href="#l14.6976"></a><span id="l14.6976" class="difflineplus">+        CAIRO_FT_LIBS=&quot;-L${MZFTCFGFT2}/lib -lmozft -lmzfntcfg&quot;</span>
<a href="#l14.6977"></a><span id="l14.6977" class="difflineplus">+    fi</span>
<a href="#l14.6978"></a><span id="l14.6978" class="difflineplus">+    if test &quot;$MOZ_ENABLE_GLITZ&quot;; then</span>
<a href="#l14.6979"></a><span id="l14.6979" class="difflineplus">+        GLITZ_SURFACE_FEATURE=&quot;#define CAIRO_HAS_GLITZ_SURFACE 1&quot;</span>
<a href="#l14.6980"></a><span id="l14.6980" class="difflineplus">+    fi</span>
<a href="#l14.6981"></a><span id="l14.6981" class="difflineplus">+    if test &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;beos&quot;; then</span>
<a href="#l14.6982"></a><span id="l14.6982" class="difflineplus">+        PKG_CHECK_MODULES(CAIRO_FT, fontconfig freetype2)</span>
<a href="#l14.6983"></a><span id="l14.6983" class="difflineplus">+        BEOS_SURFACE_FEATURE=&quot;#define CAIRO_HAS_BEOS_SURFACE 1&quot;</span>
<a href="#l14.6984"></a><span id="l14.6984" class="difflineplus">+        FT_FONT_FEATURE=&quot;#define CAIRO_HAS_FT_FONT 1&quot;</span>
<a href="#l14.6985"></a><span id="l14.6985" class="difflineplus">+        MOZ_ENABLE_CAIRO_FT=1</span>
<a href="#l14.6986"></a><span id="l14.6986" class="difflineplus">+    fi</span>
<a href="#l14.6987"></a><span id="l14.6987" class="difflineplus">+    AC_SUBST(MOZ_ENABLE_CAIRO_FT)</span>
<a href="#l14.6988"></a><span id="l14.6988" class="difflineplus">+    AC_SUBST(CAIRO_FT_CFLAGS)</span>
<a href="#l14.6989"></a><span id="l14.6989" class="difflineplus">+</span>
<a href="#l14.6990"></a><span id="l14.6990" class="difflineplus">+    if test &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l14.6991"></a><span id="l14.6991" class="difflineplus">+      SANITY_CHECKING_FEATURE=&quot;#define CAIRO_DO_SANITY_CHECKING 1&quot;</span>
<a href="#l14.6992"></a><span id="l14.6992" class="difflineplus">+    else</span>
<a href="#l14.6993"></a><span id="l14.6993" class="difflineplus">+      SANITY_CHECKING_FEATURE=&quot;#undef CAIRO_DO_SANITY_CHECKING&quot;</span>
<a href="#l14.6994"></a><span id="l14.6994" class="difflineplus">+    fi</span>
<a href="#l14.6995"></a><span id="l14.6995" class="difflineplus">+</span>
<a href="#l14.6996"></a><span id="l14.6996" class="difflineplus">+    PNG_FUNCTIONS_FEATURE=&quot;#define CAIRO_HAS_PNG_FUNCTIONS 1&quot;</span>
<a href="#l14.6997"></a><span id="l14.6997" class="difflineplus">+</span>
<a href="#l14.6998"></a><span id="l14.6998" class="difflineplus">+    AC_SUBST(PS_SURFACE_FEATURE)</span>
<a href="#l14.6999"></a><span id="l14.6999" class="difflineplus">+    AC_SUBST(PDF_SURFACE_FEATURE)</span>
<a href="#l14.7000"></a><span id="l14.7000" class="difflineplus">+    AC_SUBST(SVG_SURFACE_FEATURE)</span>
<a href="#l14.7001"></a><span id="l14.7001" class="difflineplus">+    AC_SUBST(XLIB_SURFACE_FEATURE)</span>
<a href="#l14.7002"></a><span id="l14.7002" class="difflineplus">+    AC_SUBST(XLIB_XRENDER_SURFACE_FEATURE)</span>
<a href="#l14.7003"></a><span id="l14.7003" class="difflineplus">+    AC_SUBST(QUARTZ_SURFACE_FEATURE)</span>
<a href="#l14.7004"></a><span id="l14.7004" class="difflineplus">+    AC_SUBST(QUARTZ_IMAGE_SURFACE_FEATURE)</span>
<a href="#l14.7005"></a><span id="l14.7005" class="difflineplus">+    AC_SUBST(XCB_SURFACE_FEATURE)</span>
<a href="#l14.7006"></a><span id="l14.7006" class="difflineplus">+    AC_SUBST(WIN32_SURFACE_FEATURE)</span>
<a href="#l14.7007"></a><span id="l14.7007" class="difflineplus">+    AC_SUBST(OS2_SURFACE_FEATURE)</span>
<a href="#l14.7008"></a><span id="l14.7008" class="difflineplus">+    AC_SUBST(BEOS_SURFACE_FEATURE)</span>
<a href="#l14.7009"></a><span id="l14.7009" class="difflineplus">+    AC_SUBST(GLITZ_SURFACE_FEATURE)</span>
<a href="#l14.7010"></a><span id="l14.7010" class="difflineplus">+    AC_SUBST(DIRECTFB_SURFACE_FEATURE)</span>
<a href="#l14.7011"></a><span id="l14.7011" class="difflineplus">+    AC_SUBST(FT_FONT_FEATURE)</span>
<a href="#l14.7012"></a><span id="l14.7012" class="difflineplus">+    AC_SUBST(WIN32_FONT_FEATURE)</span>
<a href="#l14.7013"></a><span id="l14.7013" class="difflineplus">+    AC_SUBST(QUARTZ_FONT_FEATURE)</span>
<a href="#l14.7014"></a><span id="l14.7014" class="difflineplus">+    AC_SUBST(PNG_FUNCTIONS_FEATURE)</span>
<a href="#l14.7015"></a><span id="l14.7015" class="difflineplus">+</span>
<a href="#l14.7016"></a><span id="l14.7016" class="difflineplus">+    if test &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l14.7017"></a><span id="l14.7017" class="difflineplus">+        MOZ_CAIRO_LIBS='$(DEPTH)/mozilla/gfx/cairo/cairo/src/mozcairo.lib $(DEPTH)/mozilla/gfx/cairo/libpixman/src/mozlibpixman.lib'</span>
<a href="#l14.7018"></a><span id="l14.7018" class="difflineplus">+        if test &quot;$MOZ_ENABLE_GLITZ&quot;; then</span>
<a href="#l14.7019"></a><span id="l14.7019" class="difflineplus">+            MOZ_CAIRO_LIBS=&quot;$MOZ_CAIRO_LIBS &quot;'$(DEPTH)/mozilla/gfx/cairo/glitz/src/mozglitz.lib $(DEPTH)/mozilla/gfx/cairo/glitz/src/wgl/mozglitzwgl.lib'</span>
<a href="#l14.7020"></a><span id="l14.7020" class="difflineplus">+        fi</span>
<a href="#l14.7021"></a><span id="l14.7021" class="difflineplus">+    else</span>
<a href="#l14.7022"></a><span id="l14.7022" class="difflineplus">+        MOZ_CAIRO_LIBS='$(DEPTH)/mozilla/gfx/cairo/cairo/src/$(LIB_PREFIX)mozcairo.$(LIB_SUFFIX) $(DEPTH)/mozilla/gfx/cairo/libpixman/src/$(LIB_PREFIX)mozlibpixman.$(LIB_SUFFIX)'&quot; $CAIRO_FT_LIBS&quot;</span>
<a href="#l14.7023"></a><span id="l14.7023" class="difflineplus">+</span>
<a href="#l14.7024"></a><span id="l14.7024" class="difflineplus">+        if test &quot;$MOZ_X11&quot;; then</span>
<a href="#l14.7025"></a><span id="l14.7025" class="difflineplus">+            MOZ_CAIRO_LIBS=&quot;$MOZ_CAIRO_LIBS $XLDFLAGS -lXrender -lfreetype -lfontconfig&quot;</span>
<a href="#l14.7026"></a><span id="l14.7026" class="difflineplus">+        fi</span>
<a href="#l14.7027"></a><span id="l14.7027" class="difflineplus">+</span>
<a href="#l14.7028"></a><span id="l14.7028" class="difflineplus">+        if test &quot;$MOZ_ENABLE_GLITZ&quot;; then</span>
<a href="#l14.7029"></a><span id="l14.7029" class="difflineplus">+            MOZ_CAIRO_LIBS=&quot;$MOZ_CAIRO_LIBS &quot;'-L$(DEPTH)/mozilla/gfx/cairo/glitz/src -lmozglitz'</span>
<a href="#l14.7030"></a><span id="l14.7030" class="difflineplus">+            if test &quot;$MOZ_X11&quot;; then</span>
<a href="#l14.7031"></a><span id="l14.7031" class="difflineplus">+                MOZ_CAIRO_LIBS=&quot;$MOZ_CAIRO_LIBS &quot;'-L$(DEPTH)/mozilla/gfx/cairo/glitz/src/glx -lmozglitzglx -lGL'</span>
<a href="#l14.7032"></a><span id="l14.7032" class="difflineplus">+            fi</span>
<a href="#l14.7033"></a><span id="l14.7033" class="difflineplus">+            if test &quot;$MOZ_WIDGET_TOOLKIT&quot; = &quot;windows&quot;; then</span>
<a href="#l14.7034"></a><span id="l14.7034" class="difflineplus">+                MOZ_CAIRO_LIBS=&quot;$MOZ_CAIRO_LIBS &quot;'-L$(DEPTH)/mozilla/gfx/cairo/glitz/src/wgl -lmozglitzwgl'</span>
<a href="#l14.7035"></a><span id="l14.7035" class="difflineplus">+            fi</span>
<a href="#l14.7036"></a><span id="l14.7036" class="difflineplus">+        fi</span>
<a href="#l14.7037"></a><span id="l14.7037" class="difflineplus">+    fi</span>
<a href="#l14.7038"></a><span id="l14.7038" class="difflineplus">+else</span>
<a href="#l14.7039"></a><span id="l14.7039" class="difflineplus">+   PKG_CHECK_MODULES(CAIRO, cairo &gt;= $CAIRO_VERSION freetype2 fontconfig)</span>
<a href="#l14.7040"></a><span id="l14.7040" class="difflineplus">+   MOZ_CAIRO_CFLAGS=$CAIRO_CFLAGS</span>
<a href="#l14.7041"></a><span id="l14.7041" class="difflineplus">+   MOZ_CAIRO_LIBS=$CAIRO_LIBS</span>
<a href="#l14.7042"></a><span id="l14.7042" class="difflineplus">+   if test &quot;$MOZ_X11&quot;; then</span>
<a href="#l14.7043"></a><span id="l14.7043" class="difflineplus">+        PKG_CHECK_MODULES(CAIRO_XRENDER, cairo-xlib-xrender &gt;= $CAIRO_VERSION)</span>
<a href="#l14.7044"></a><span id="l14.7044" class="difflineplus">+        MOZ_CAIRO_LIBS=&quot;$MOZ_CAIRO_LIBS $XLDFLAGS $CAIRO_XRENDER_LIBS&quot;</span>
<a href="#l14.7045"></a><span id="l14.7045" class="difflineplus">+        MOZ_CAIRO_CFLAGS=&quot;$MOZ_CAIRO_CFLAGS $CAIRO_XRENDER_CFLAGS&quot;</span>
<a href="#l14.7046"></a><span id="l14.7046" class="difflineplus">+   fi</span>
<a href="#l14.7047"></a><span id="l14.7047" class="difflineplus">+fi</span>
<a href="#l14.7048"></a><span id="l14.7048" class="difflineplus">+</span>
<a href="#l14.7049"></a><span id="l14.7049" class="difflineplus">+AC_SUBST(MOZ_TREE_CAIRO)</span>
<a href="#l14.7050"></a><span id="l14.7050" class="difflineplus">+AC_SUBST(MOZ_CAIRO_CFLAGS)</span>
<a href="#l14.7051"></a><span id="l14.7051" class="difflineplus">+AC_SUBST(MOZ_CAIRO_LIBS)</span>
<a href="#l14.7052"></a><span id="l14.7052" class="difflineplus">+</span>
<a href="#l14.7053"></a><span id="l14.7053" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7054"></a><span id="l14.7054" class="difflineplus">+dnl Check for lcms</span>
<a href="#l14.7055"></a><span id="l14.7055" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7056"></a><span id="l14.7056" class="difflineplus">+</span>
<a href="#l14.7057"></a><span id="l14.7057" class="difflineplus">+MOZ_NATIVE_LCMS=</span>
<a href="#l14.7058"></a><span id="l14.7058" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(system-lcms,</span>
<a href="#l14.7059"></a><span id="l14.7059" class="difflineplus">+[ --enable-system-lcms Use system lcms (located with pkgconfig)],</span>
<a href="#l14.7060"></a><span id="l14.7060" class="difflineplus">+MOZ_NATIVE_LCMS=1,</span>
<a href="#l14.7061"></a><span id="l14.7061" class="difflineplus">+MOZ_NATIVE_LCMS= )</span>
<a href="#l14.7062"></a><span id="l14.7062" class="difflineplus">+</span>
<a href="#l14.7063"></a><span id="l14.7063" class="difflineplus">+if test -z &quot;$MOZ_NATIVE_LCMS&quot;</span>
<a href="#l14.7064"></a><span id="l14.7064" class="difflineplus">+then</span>
<a href="#l14.7065"></a><span id="l14.7065" class="difflineplus">+    LCMS_CFLAGS=</span>
<a href="#l14.7066"></a><span id="l14.7066" class="difflineplus">+    if test &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l14.7067"></a><span id="l14.7067" class="difflineplus">+        if test -z &quot;$BUILD_STATIC_LIBS&quot; -a -z &quot;$MOZ_ENABLE_LIBXUL&quot;; then</span>
<a href="#l14.7068"></a><span id="l14.7068" class="difflineplus">+            LCMS_CFLAGS=-DLCMS_DLL</span>
<a href="#l14.7069"></a><span id="l14.7069" class="difflineplus">+        fi</span>
<a href="#l14.7070"></a><span id="l14.7070" class="difflineplus">+        LCMS_LIBS='$(LIBXUL_DIST)/lib/mozlcms.lib'</span>
<a href="#l14.7071"></a><span id="l14.7071" class="difflineplus">+    else</span>
<a href="#l14.7072"></a><span id="l14.7072" class="difflineplus">+        LCMS_LIBS='-L$(LIBXUL_DIST)/bin -lmozlcms'</span>
<a href="#l14.7073"></a><span id="l14.7073" class="difflineplus">+    fi</span>
<a href="#l14.7074"></a><span id="l14.7074" class="difflineplus">+else</span>
<a href="#l14.7075"></a><span id="l14.7075" class="difflineplus">+    PKG_CHECK_MODULES(LCMS, lcms &gt;= $LCMS_VERSION)</span>
<a href="#l14.7076"></a><span id="l14.7076" class="difflineplus">+fi</span>
<a href="#l14.7077"></a><span id="l14.7077" class="difflineplus">+</span>
<a href="#l14.7078"></a><span id="l14.7078" class="difflineplus">+AC_SUBST(MOZ_NATIVE_LCMS)</span>
<a href="#l14.7079"></a><span id="l14.7079" class="difflineplus">+AC_SUBST(LCMS_CFLAGS)</span>
<a href="#l14.7080"></a><span id="l14.7080" class="difflineplus">+AC_SUBST(LCMS_LIBS)</span>
<a href="#l14.7081"></a><span id="l14.7081" class="difflineplus">+</span>
<a href="#l14.7082"></a><span id="l14.7082" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7083"></a><span id="l14.7083" class="difflineplus">+dnl disable xul</span>
<a href="#l14.7084"></a><span id="l14.7084" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7085"></a><span id="l14.7085" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(xul,</span>
<a href="#l14.7086"></a><span id="l14.7086" class="difflineplus">+[  --disable-xul           Disable XUL],</span>
<a href="#l14.7087"></a><span id="l14.7087" class="difflineplus">+    MOZ_XUL= )</span>
<a href="#l14.7088"></a><span id="l14.7088" class="difflineplus">+if test &quot;$MOZ_XUL&quot;; then</span>
<a href="#l14.7089"></a><span id="l14.7089" class="difflineplus">+  AC_DEFINE(MOZ_XUL)</span>
<a href="#l14.7090"></a><span id="l14.7090" class="difflineplus">+else</span>
<a href="#l14.7091"></a><span id="l14.7091" class="difflineplus">+  dnl remove extensions that require XUL</span>
<a href="#l14.7092"></a><span id="l14.7092" class="difflineplus">+  MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS | sed -e 's/inspector//' -e 's/venkman//' -e 's/irc//' -e 's/tasks//'`</span>
<a href="#l14.7093"></a><span id="l14.7093" class="difflineplus">+fi</span>
<a href="#l14.7094"></a><span id="l14.7094" class="difflineplus">+</span>
<a href="#l14.7095"></a><span id="l14.7095" class="difflineplus">+AC_SUBST(MOZ_XUL)</span>
<a href="#l14.7096"></a><span id="l14.7096" class="difflineplus">+</span>
<a href="#l14.7097"></a><span id="l14.7097" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7098"></a><span id="l14.7098" class="difflineplus">+dnl Two ways to enable Python support:</span>
<a href="#l14.7099"></a><span id="l14.7099" class="difflineplus">+dnl   --enable-extensions=python # select all available.</span>
<a href="#l14.7100"></a><span id="l14.7100" class="difflineplus">+dnl    (MOZ_PYTHON_EXTENSIONS contains the list of extensions)</span>
<a href="#l14.7101"></a><span id="l14.7101" class="difflineplus">+dnl or:</span>
<a href="#l14.7102"></a><span id="l14.7102" class="difflineplus">+dnl   --enable-extensions=python/xpcom,... # select individual ones</span>
<a href="#l14.7103"></a><span id="l14.7103" class="difflineplus">+dnl</span>
<a href="#l14.7104"></a><span id="l14.7104" class="difflineplus">+dnl If either is used, we locate the Python to use.</span>
<a href="#l14.7105"></a><span id="l14.7105" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7106"></a><span id="l14.7106" class="difflineplus">+dnl</span>
<a href="#l14.7107"></a><span id="l14.7107" class="difflineplus">+dnl If 'python' appears anywhere in the extensions list, go lookin'...</span>
<a href="#l14.7108"></a><span id="l14.7108" class="difflineplus">+if test `echo &quot;$MOZ_EXTENSIONS&quot; | grep -c python` -ne 0; then</span>
<a href="#l14.7109"></a><span id="l14.7109" class="difflineplus">+    dnl Allow PYTHON to point to the Python interpreter to use</span>
<a href="#l14.7110"></a><span id="l14.7110" class="difflineplus">+    dnl (note that it must be the python executable - which we</span>
<a href="#l14.7111"></a><span id="l14.7111" class="difflineplus">+    dnl run to locate the relevant paths etc)</span>
<a href="#l14.7112"></a><span id="l14.7112" class="difflineplus">+    dnl If not set, we use whatever Python we can find.</span>
<a href="#l14.7113"></a><span id="l14.7113" class="difflineplus">+    MOZ_PYTHON=$PYTHON</span>
<a href="#l14.7114"></a><span id="l14.7114" class="difflineplus">+    dnl Ask Python what its version number is</span>
<a href="#l14.7115"></a><span id="l14.7115" class="difflineplus">+    changequote(,)</span>
<a href="#l14.7116"></a><span id="l14.7116" class="difflineplus">+    MOZ_PYTHON_VER=`$PYTHON -c &quot;import sys;print '%d%d' % sys.version_info[0:2]&quot;`</span>
<a href="#l14.7117"></a><span id="l14.7117" class="difflineplus">+    MOZ_PYTHON_VER_DOTTED=`$PYTHON -c &quot;import sys;print '%d.%d' % sys.version_info[0:2]&quot;`</span>
<a href="#l14.7118"></a><span id="l14.7118" class="difflineplus">+    changequote([,])</span>
<a href="#l14.7119"></a><span id="l14.7119" class="difflineplus">+    dnl Ask for the Python &quot;prefix&quot; (ie, home/source dir)</span>
<a href="#l14.7120"></a><span id="l14.7120" class="difflineplus">+    MOZ_PYTHON_PREFIX=`$PYTHON -c &quot;import sys; print sys.prefix&quot;`</span>
<a href="#l14.7121"></a><span id="l14.7121" class="difflineplus">+    dnl Setup the include and library directories.</span>
<a href="#l14.7122"></a><span id="l14.7122" class="difflineplus">+    if test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l14.7123"></a><span id="l14.7123" class="difflineplus">+        MOZ_PYTHON_PREFIX=`$CYGPATH_W $MOZ_PYTHON_PREFIX | $CYGPATH_S`</span>
<a href="#l14.7124"></a><span id="l14.7124" class="difflineplus">+        dnl Source trees have &quot;include&quot; and &quot;PC&quot; for .h, and &quot;PCbuild&quot; for .lib</span>
<a href="#l14.7125"></a><span id="l14.7125" class="difflineplus">+        dnl Binary trees have &quot;include&quot; for .h, and &quot;libs&quot; for .lib</span>
<a href="#l14.7126"></a><span id="l14.7126" class="difflineplus">+        dnl We add 'em both - along with quotes, to handle spaces.</span>
<a href="#l14.7127"></a><span id="l14.7127" class="difflineplus">+        MOZ_PYTHON_DLL_SUFFIX=.pyd</span>
<a href="#l14.7128"></a><span id="l14.7128" class="difflineplus">+        MOZ_PYTHON_INCLUDES=&quot;\&quot;-I$MOZ_PYTHON_PREFIX/include\&quot; \&quot;-I$MOZ_PYTHON_PREFIX/PC\&quot;&quot;</span>
<a href="#l14.7129"></a><span id="l14.7129" class="difflineplus">+        MOZ_PYTHON_LIBS=&quot;\&quot;/libpath:$MOZ_PYTHON_PREFIX/PCBuild\&quot; \&quot;/libpath:$MOZ_PYTHON_PREFIX/libs\&quot;&quot;</span>
<a href="#l14.7130"></a><span id="l14.7130" class="difflineplus">+    else</span>
<a href="#l14.7131"></a><span id="l14.7131" class="difflineplus">+        dnl Non-Windows include and libs</span>
<a href="#l14.7132"></a><span id="l14.7132" class="difflineplus">+        MOZ_PYTHON_DLL_SUFFIX=$DLL_SUFFIX</span>
<a href="#l14.7133"></a><span id="l14.7133" class="difflineplus">+        MOZ_PYTHON_INCLUDES=&quot;-I$MOZ_PYTHON_PREFIX/include/python$MOZ_PYTHON_VER_DOTTED&quot;</span>
<a href="#l14.7134"></a><span id="l14.7134" class="difflineplus">+        dnl Check for dynamic Python lib</span>
<a href="#l14.7135"></a><span id="l14.7135" class="difflineplus">+        dnl - A static Python is no good - multiple dynamic libraries (xpcom</span>
<a href="#l14.7136"></a><span id="l14.7136" class="difflineplus">+        dnl - core, xpcom loader, pydom etc) all need to share Python.</span>
<a href="#l14.7137"></a><span id="l14.7137" class="difflineplus">+        dnl - Python 2.3's std --enable-shared configure option will</span>
<a href="#l14.7138"></a><span id="l14.7138" class="difflineplus">+        dnl   create a libpython2.3.so.1.0. We should first try this</span>
<a href="#l14.7139"></a><span id="l14.7139" class="difflineplus">+        dnl   dotted versioned .so file because this is the one that</span>
<a href="#l14.7140"></a><span id="l14.7140" class="difflineplus">+        dnl   the PyXPCOM build mechanics tries to link to.</span>
<a href="#l14.7141"></a><span id="l14.7141" class="difflineplus">+        dnl   XXX Should find a better way than hardcoding &quot;1.0&quot;.</span>
<a href="#l14.7142"></a><span id="l14.7142" class="difflineplus">+        dnl - Python developement tree dir layouts are NOT allowed here</span>
<a href="#l14.7143"></a><span id="l14.7143" class="difflineplus">+        dnl   because the PyXPCOM build just dies on it later anyway.</span>
<a href="#l14.7144"></a><span id="l14.7144" class="difflineplus">+        dnl - Fixes to the above by Python/*nix knowledgable people welcome!</span>
<a href="#l14.7145"></a><span id="l14.7145" class="difflineplus">+        if test -f &quot;$MOZ_PYTHON_PREFIX/lib/libpython$MOZ_PYTHON_VER_DOTTED.so.1.0&quot;; then</span>
<a href="#l14.7146"></a><span id="l14.7146" class="difflineplus">+            MOZ_PYTHON_LIBS=&quot;-L$MOZ_PYTHON_PREFIX/lib -lpython$MOZ_PYTHON_VER_DOTTED&quot;</span>
<a href="#l14.7147"></a><span id="l14.7147" class="difflineplus">+        elif test -f &quot;$MOZ_PYTHON_PREFIX/lib64/libpython$MOZ_PYTHON_VER_DOTTED.so.1.0&quot;; then</span>
<a href="#l14.7148"></a><span id="l14.7148" class="difflineplus">+            MOZ_PYTHON_LIBS=&quot;-L$MOZ_PYTHON_PREFIX/lib64 -lpython$MOZ_PYTHON_VER_DOTTED&quot;</span>
<a href="#l14.7149"></a><span id="l14.7149" class="difflineplus">+        elif test -f &quot;$MOZ_PYTHON_PREFIX/lib/libpython$MOZ_PYTHON_VER_DOTTED.so&quot;; then</span>
<a href="#l14.7150"></a><span id="l14.7150" class="difflineplus">+            MOZ_PYTHON_LIBS=&quot;-L$MOZ_PYTHON_PREFIX/lib -lpython$MOZ_PYTHON_VER_DOTTED&quot;</span>
<a href="#l14.7151"></a><span id="l14.7151" class="difflineplus">+        elif test -f &quot;$MOZ_PYTHON_PREFIX/libpython$MOZ_PYTHON_VER_DOTTED.so&quot;; then</span>
<a href="#l14.7152"></a><span id="l14.7152" class="difflineplus">+            dnl Don't Python development tree directory layout.</span>
<a href="#l14.7153"></a><span id="l14.7153" class="difflineplus">+            MOZ_PYTHON_LIBS=&quot;-L$MOZ_PYTHON_PREFIX -lpython$MOZ_PYTHON_VER_DOTTED&quot;</span>
<a href="#l14.7154"></a><span id="l14.7154" class="difflineplus">+            AC_MSG_ERROR([The Python at $MOZ_PYTHON_PREFIX looks like a dev tree. The PyXPCOM build cannot handle this yet. You must 'make install' Python and use the installed tree.])</span>
<a href="#l14.7155"></a><span id="l14.7155" class="difflineplus">+        elif test &quot;$OS_ARCH&quot; = &quot;Darwin&quot;; then</span>
<a href="#l14.7156"></a><span id="l14.7156" class="difflineplus">+            dnl We do Darwin last, so if a custom non-framework build of</span>
<a href="#l14.7157"></a><span id="l14.7157" class="difflineplus">+            dnl python is used on OSX, then it will be picked up first by</span>
<a href="#l14.7158"></a><span id="l14.7158" class="difflineplus">+            dnl the logic above.</span>
<a href="#l14.7159"></a><span id="l14.7159" class="difflineplus">+            MOZ_PYTHON_LIBS=&quot;-framework Python&quot;</span>
<a href="#l14.7160"></a><span id="l14.7160" class="difflineplus">+        else</span>
<a href="#l14.7161"></a><span id="l14.7161" class="difflineplus">+            AC_MSG_ERROR([Could not find build shared libraries for Python at $MOZ_PYTHON_PREFIX.  This is required for PyXPCOM.])</span>
<a href="#l14.7162"></a><span id="l14.7162" class="difflineplus">+        fi</span>
<a href="#l14.7163"></a><span id="l14.7163" class="difflineplus">+        if test &quot;$OS_ARCH&quot; = &quot;Linux&quot;; then</span>
<a href="#l14.7164"></a><span id="l14.7164" class="difflineplus">+            MOZ_PYTHON_LIBS=&quot;$MOZ_PYTHON_LIBS -lutil&quot;</span>
<a href="#l14.7165"></a><span id="l14.7165" class="difflineplus">+        fi</span>
<a href="#l14.7166"></a><span id="l14.7166" class="difflineplus">+    fi</span>
<a href="#l14.7167"></a><span id="l14.7167" class="difflineplus">+    dnl Handle &quot;_d&quot; on Windows</span>
<a href="#l14.7168"></a><span id="l14.7168" class="difflineplus">+    if test &quot;$OS_ARCH&quot; = &quot;WINNT&quot; &amp;&amp; test -n &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l14.7169"></a><span id="l14.7169" class="difflineplus">+        MOZ_PYTHON_DEBUG_SUFFIX=&quot;_d&quot;</span>
<a href="#l14.7170"></a><span id="l14.7170" class="difflineplus">+    else</span>
<a href="#l14.7171"></a><span id="l14.7171" class="difflineplus">+        MOZ_PYTHON_DEBUG_SUFFIX=</span>
<a href="#l14.7172"></a><span id="l14.7172" class="difflineplus">+    fi</span>
<a href="#l14.7173"></a><span id="l14.7173" class="difflineplus">+    AC_MSG_RESULT(Building Python extensions using python-$MOZ_PYTHON_VER_DOTTED from $MOZ_PYTHON_PREFIX)</span>
<a href="#l14.7174"></a><span id="l14.7174" class="difflineplus">+fi</span>
<a href="#l14.7175"></a><span id="l14.7175" class="difflineplus">+</span>
<a href="#l14.7176"></a><span id="l14.7176" class="difflineplus">+dnl If the user asks for the 'python' extension, then we add</span>
<a href="#l14.7177"></a><span id="l14.7177" class="difflineplus">+dnl MOZ_PYTHON_EXTENSIONS to MOZ_EXTENSIONS - but with the leading 'python/'</span>
<a href="#l14.7178"></a><span id="l14.7178" class="difflineplus">+dnl Note the careful regex - it must match 'python' followed by anything</span>
<a href="#l14.7179"></a><span id="l14.7179" class="difflineplus">+dnl other than a '/', including the end-of-string.</span>
<a href="#l14.7180"></a><span id="l14.7180" class="difflineplus">+if test `echo &quot;$MOZ_EXTENSIONS&quot; | grep -c 'python\([[^/]]\|$\)'` -ne 0; then</span>
<a href="#l14.7181"></a><span id="l14.7181" class="difflineplus">+    for pyext in $MOZ_PYTHON_EXTENSIONS; do</span>
<a href="#l14.7182"></a><span id="l14.7182" class="difflineplus">+        MOZ_EXTENSIONS=`echo $MOZ_EXTENSIONS python/$pyext`</span>
<a href="#l14.7183"></a><span id="l14.7183" class="difflineplus">+    done</span>
<a href="#l14.7184"></a><span id="l14.7184" class="difflineplus">+fi</span>
<a href="#l14.7185"></a><span id="l14.7185" class="difflineplus">+dnl Later we may allow MOZ_PYTHON_EXTENSIONS to be specified on the</span>
<a href="#l14.7186"></a><span id="l14.7186" class="difflineplus">+dnl command-line, but not yet</span>
<a href="#l14.7187"></a><span id="l14.7187" class="difflineplus">+AC_SUBST(MOZ_PYTHON_EXTENSIONS)</span>
<a href="#l14.7188"></a><span id="l14.7188" class="difflineplus">+AC_SUBST(MOZ_PYTHON)</span>
<a href="#l14.7189"></a><span id="l14.7189" class="difflineplus">+AC_SUBST(MOZ_PYTHON_PREFIX)</span>
<a href="#l14.7190"></a><span id="l14.7190" class="difflineplus">+AC_SUBST(MOZ_PYTHON_INCLUDES)</span>
<a href="#l14.7191"></a><span id="l14.7191" class="difflineplus">+AC_SUBST(MOZ_PYTHON_LIBS)</span>
<a href="#l14.7192"></a><span id="l14.7192" class="difflineplus">+AC_SUBST(MOZ_PYTHON_VER)</span>
<a href="#l14.7193"></a><span id="l14.7193" class="difflineplus">+AC_SUBST(MOZ_PYTHON_VER_DOTTED)</span>
<a href="#l14.7194"></a><span id="l14.7194" class="difflineplus">+AC_SUBST(MOZ_PYTHON_DEBUG_SUFFIX)</span>
<a href="#l14.7195"></a><span id="l14.7195" class="difflineplus">+AC_SUBST(MOZ_PYTHON_DLL_SUFFIX)</span>
<a href="#l14.7196"></a><span id="l14.7196" class="difflineplus">+</span>
<a href="#l14.7197"></a><span id="l14.7197" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7198"></a><span id="l14.7198" class="difflineplus">+dnl disable profile sharing</span>
<a href="#l14.7199"></a><span id="l14.7199" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7200"></a><span id="l14.7200" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(profilesharing,</span>
<a href="#l14.7201"></a><span id="l14.7201" class="difflineplus">+[  --disable-profilesharing           Disable profile sharing],</span>
<a href="#l14.7202"></a><span id="l14.7202" class="difflineplus">+    MOZ_PROFILESHARING=,</span>
<a href="#l14.7203"></a><span id="l14.7203" class="difflineplus">+    MOZ_PROFILESHARING=1 )</span>
<a href="#l14.7204"></a><span id="l14.7204" class="difflineplus">+if test &quot;$MOZ_PROFILESHARING&quot;; then</span>
<a href="#l14.7205"></a><span id="l14.7205" class="difflineplus">+  MOZ_IPCD=1</span>
<a href="#l14.7206"></a><span id="l14.7206" class="difflineplus">+  AC_DEFINE(MOZ_PROFILESHARING)</span>
<a href="#l14.7207"></a><span id="l14.7207" class="difflineplus">+fi</span>
<a href="#l14.7208"></a><span id="l14.7208" class="difflineplus">+</span>
<a href="#l14.7209"></a><span id="l14.7209" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7210"></a><span id="l14.7210" class="difflineplus">+dnl enable ipc/ipcd</span>
<a href="#l14.7211"></a><span id="l14.7211" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7212"></a><span id="l14.7212" class="difflineplus">+MOZ_ARG_ENABLE_BOOL(ipcd,</span>
<a href="#l14.7213"></a><span id="l14.7213" class="difflineplus">+[  --enable-ipcd                      Enable IPC daemon],</span>
<a href="#l14.7214"></a><span id="l14.7214" class="difflineplus">+    MOZ_IPCD=1,</span>
<a href="#l14.7215"></a><span id="l14.7215" class="difflineplus">+    MOZ_IPCD= )</span>
<a href="#l14.7216"></a><span id="l14.7216" class="difflineplus">+</span>
<a href="#l14.7217"></a><span id="l14.7217" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7218"></a><span id="l14.7218" class="difflineplus">+dnl disable profile locking</span>
<a href="#l14.7219"></a><span id="l14.7219" class="difflineplus">+dnl   do no use this in applications that can have more than</span>
<a href="#l14.7220"></a><span id="l14.7220" class="difflineplus">+dnl   one process accessing the profile directory.</span>
<a href="#l14.7221"></a><span id="l14.7221" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7222"></a><span id="l14.7222" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(profilelocking,</span>
<a href="#l14.7223"></a><span id="l14.7223" class="difflineplus">+[  --disable-profilelocking           Disable profile locking],</span>
<a href="#l14.7224"></a><span id="l14.7224" class="difflineplus">+    MOZ_PROFILELOCKING=,</span>
<a href="#l14.7225"></a><span id="l14.7225" class="difflineplus">+    MOZ_PROFILELOCKING=1 )</span>
<a href="#l14.7226"></a><span id="l14.7226" class="difflineplus">+if test &quot;$MOZ_PROFILELOCKING&quot;; then</span>
<a href="#l14.7227"></a><span id="l14.7227" class="difflineplus">+  AC_DEFINE(MOZ_PROFILELOCKING)</span>
<a href="#l14.7228"></a><span id="l14.7228" class="difflineplus">+fi</span>
<a href="#l14.7229"></a><span id="l14.7229" class="difflineplus">+</span>
<a href="#l14.7230"></a><span id="l14.7230" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7231"></a><span id="l14.7231" class="difflineplus">+dnl disable rdf services</span>
<a href="#l14.7232"></a><span id="l14.7232" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7233"></a><span id="l14.7233" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(rdf,</span>
<a href="#l14.7234"></a><span id="l14.7234" class="difflineplus">+[  --disable-rdf           Disable RDF],</span>
<a href="#l14.7235"></a><span id="l14.7235" class="difflineplus">+    MOZ_RDF= )</span>
<a href="#l14.7236"></a><span id="l14.7236" class="difflineplus">+if test &quot;$MOZ_RDF&quot;; then</span>
<a href="#l14.7237"></a><span id="l14.7237" class="difflineplus">+  AC_DEFINE(MOZ_RDF)</span>
<a href="#l14.7238"></a><span id="l14.7238" class="difflineplus">+fi</span>
<a href="#l14.7239"></a><span id="l14.7239" class="difflineplus">+</span>
<a href="#l14.7240"></a><span id="l14.7240" class="difflineplus">+AC_SUBST(MOZ_RDF)</span>
<a href="#l14.7241"></a><span id="l14.7241" class="difflineplus">+</span>
<a href="#l14.7242"></a><span id="l14.7242" class="difflineplus">+</span>
<a href="#l14.7243"></a><span id="l14.7243" class="difflineplus">+dnl</span>
<a href="#l14.7244"></a><span id="l14.7244" class="difflineplus">+dnl option to disable cookies</span>
<a href="#l14.7245"></a><span id="l14.7245" class="difflineplus">+dnl</span>
<a href="#l14.7246"></a><span id="l14.7246" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(cookies,</span>
<a href="#l14.7247"></a><span id="l14.7247" class="difflineplus">+[  --disable-cookies       Disable cookie support],</span>
<a href="#l14.7248"></a><span id="l14.7248" class="difflineplus">+    NECKO_COOKIES=,</span>
<a href="#l14.7249"></a><span id="l14.7249" class="difflineplus">+    NECKO_COOKIES=1)</span>
<a href="#l14.7250"></a><span id="l14.7250" class="difflineplus">+AC_SUBST(NECKO_COOKIES)</span>
<a href="#l14.7251"></a><span id="l14.7251" class="difflineplus">+if test &quot;$NECKO_COOKIES&quot;; then</span>
<a href="#l14.7252"></a><span id="l14.7252" class="difflineplus">+    AC_DEFINE(NECKO_COOKIES)</span>
<a href="#l14.7253"></a><span id="l14.7253" class="difflineplus">+fi</span>
<a href="#l14.7254"></a><span id="l14.7254" class="difflineplus">+</span>
<a href="#l14.7255"></a><span id="l14.7255" class="difflineplus">+dnl NECKO_ configuration options are not global</span>
<a href="#l14.7256"></a><span id="l14.7256" class="difflineplus">+_NON_GLOBAL_ACDEFINES=&quot;$_NON_GLOBAL_ACDEFINES NECKO_&quot;</span>
<a href="#l14.7257"></a><span id="l14.7257" class="difflineplus">+</span>
<a href="#l14.7258"></a><span id="l14.7258" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7259"></a><span id="l14.7259" class="difflineplus">+dnl string api compatibility</span>
<a href="#l14.7260"></a><span id="l14.7260" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7261"></a><span id="l14.7261" class="difflineplus">+MOZ_ARG_DISABLE_BOOL(v1-string-abi,</span>
<a href="#l14.7262"></a><span id="l14.7262" class="difflineplus">+[  --disable-v1-string-abi   Disable binary compatibility layer for strings],</span>
<a href="#l14.7263"></a><span id="l14.7263" class="difflineplus">+    MOZ_V1_STRING_ABI=,</span>
<a href="#l14.7264"></a><span id="l14.7264" class="difflineplus">+    MOZ_V1_STRING_ABI=1)</span>
<a href="#l14.7265"></a><span id="l14.7265" class="difflineplus">+AC_SUBST(MOZ_V1_STRING_ABI)</span>
<a href="#l14.7266"></a><span id="l14.7266" class="difflineplus">+if test &quot;$MOZ_V1_STRING_ABI&quot;; then</span>
<a href="#l14.7267"></a><span id="l14.7267" class="difflineplus">+    AC_DEFINE(MOZ_V1_STRING_ABI)</span>
<a href="#l14.7268"></a><span id="l14.7268" class="difflineplus">+fi</span>
<a href="#l14.7269"></a><span id="l14.7269" class="difflineplus">+</span>
<a href="#l14.7270"></a><span id="l14.7270" class="difflineplus">+dnl Only build Mork if it's required</span>
<a href="#l14.7271"></a><span id="l14.7271" class="difflineplus">+AC_SUBST(MOZ_MORK)</span>
<a href="#l14.7272"></a><span id="l14.7272" class="difflineplus">+if test &quot;$MOZ_MORK&quot;; then</span>
<a href="#l14.7273"></a><span id="l14.7273" class="difflineplus">+  AC_DEFINE(MOZ_MORK)</span>
<a href="#l14.7274"></a><span id="l14.7274" class="difflineplus">+fi</span>
<a href="#l14.7275"></a><span id="l14.7275" class="difflineplus">+</span>
<a href="#l14.7276"></a><span id="l14.7276" class="difflineplus">+dnl Build the lightweight Mork reader if required</span>
<a href="#l14.7277"></a><span id="l14.7277" class="difflineplus">+AC_SUBST(MOZ_MORKREADER)</span>
<a href="#l14.7278"></a><span id="l14.7278" class="difflineplus">+if test &quot;$MOZ_MORKREADER&quot;; then</span>
<a href="#l14.7279"></a><span id="l14.7279" class="difflineplus">+  AC_DEFINE(MOZ_MORKREADER)</span>
<a href="#l14.7280"></a><span id="l14.7280" class="difflineplus">+fi</span>
<a href="#l14.7281"></a><span id="l14.7281" class="difflineplus">+</span>
<a href="#l14.7282"></a><span id="l14.7282" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7283"></a><span id="l14.7283" class="difflineplus">+if test &quot;$MOZ_DEBUG&quot; || test &quot;$NS_TRACE_MALLOC&quot;; then</span>
<a href="#l14.7284"></a><span id="l14.7284" class="difflineplus">+    MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS=</span>
<a href="#l14.7285"></a><span id="l14.7285" class="difflineplus">+fi</span>
<a href="#l14.7286"></a><span id="l14.7286" class="difflineplus">+</span>
<a href="#l14.7287"></a><span id="l14.7287" class="difflineplus">+if test &quot;$MOZ_LDAP_XPCOM&quot;; then</span>
<a href="#l14.7288"></a><span id="l14.7288" class="difflineplus">+    LDAP_CFLAGS='-I${DIST}/public/ldap'</span>
<a href="#l14.7289"></a><span id="l14.7289" class="difflineplus">+    if test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l14.7290"></a><span id="l14.7290" class="difflineplus">+        if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l14.7291"></a><span id="l14.7291" class="difflineplus">+            LDAP_LIBS='-L$(DIST)/lib -lnsldap32v60 -lnsldappr32v60 -lnsldif32v60'</span>
<a href="#l14.7292"></a><span id="l14.7292" class="difflineplus">+        else</span>
<a href="#l14.7293"></a><span id="l14.7293" class="difflineplus">+            LDAP_LIBS='$(DIST)/lib/$(LIB_PREFIX)nsldap32v60.${IMPORT_LIB_SUFFIX} $(DIST)/lib/$(LIB_PREFIX)nsldappr32v60.${IMPORT_LIB_SUFFIX} $(DIST)/lib/$(LIB_PREFIX)nsldif32v60.${IMPORT_LIB_SUFFIX}'</span>
<a href="#l14.7294"></a><span id="l14.7294" class="difflineplus">+        fi</span>
<a href="#l14.7295"></a><span id="l14.7295" class="difflineplus">+    elif test &quot;$OS_ARCH&quot; = &quot;OS2&quot;; then</span>
<a href="#l14.7296"></a><span id="l14.7296" class="difflineplus">+            LDAP_LIBS='$(DIST)/lib/$(LIB_PREFIX)ldap60.${IMPORT_LIB_SUFFIX} $(DIST)/lib/$(LIB_PREFIX)prldap60.${IMPORT_LIB_SUFFIX} $(DIST)/lib/$(LIB_PREFIX)ldif60.${IMPORT_LIB_SUFFIX}'</span>
<a href="#l14.7297"></a><span id="l14.7297" class="difflineplus">+    else</span>
<a href="#l14.7298"></a><span id="l14.7298" class="difflineplus">+        LDAP_LIBS='-L${DIST}/bin -L${DIST}/lib -lldap60 -lprldap60 -lldif60'</span>
<a href="#l14.7299"></a><span id="l14.7299" class="difflineplus">+    fi</span>
<a href="#l14.7300"></a><span id="l14.7300" class="difflineplus">+fi</span>
<a href="#l14.7301"></a><span id="l14.7301" class="difflineplus">+</span>
<a href="#l14.7302"></a><span id="l14.7302" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.7303"></a><span id="l14.7303" class="difflineplus">+if test &quot;$SUNCTL&quot;; then</span>
<a href="#l14.7304"></a><span id="l14.7304" class="difflineplus">+    dnl older versions of glib do not seem to have gmodule which ctl needs</span>
<a href="#l14.7305"></a><span id="l14.7305" class="difflineplus">+    _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.7306"></a><span id="l14.7306" class="difflineplus">+    CFLAGS=&quot;$CFLAGS $GLIB_CFLAGS&quot;</span>
<a href="#l14.7307"></a><span id="l14.7307" class="difflineplus">+    AC_LANG_SAVE</span>
<a href="#l14.7308"></a><span id="l14.7308" class="difflineplus">+    AC_LANG_C</span>
<a href="#l14.7309"></a><span id="l14.7309" class="difflineplus">+    AC_TRY_COMPILE([#include &lt;gmodule.h&gt;],</span>
<a href="#l14.7310"></a><span id="l14.7310" class="difflineplus">+        [ int x = 1; x++; ],,</span>
<a href="#l14.7311"></a><span id="l14.7311" class="difflineplus">+        [AC_MSG_ERROR([Cannot build ctl without gmodule support in glib.])])</span>
<a href="#l14.7312"></a><span id="l14.7312" class="difflineplus">+    AC_LANG_RESTORE</span>
<a href="#l14.7313"></a><span id="l14.7313" class="difflineplus">+    CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l14.7314"></a><span id="l14.7314" class="difflineplus">+    AC_DEFINE(SUNCTL)</span>
<a href="#l14.7315"></a><span id="l14.7315" class="difflineplus">+fi</span>
<a href="#l14.7316"></a><span id="l14.7316" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.7317"></a><span id="l14.7317" class="difflineplus">+</span>
<a href="#l14.7318"></a><span id="l14.7318" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7319"></a><span id="l14.7319" class="difflineplus">+dnl =</span>
<a href="#l14.7320"></a><span id="l14.7320" class="difflineplus">+dnl = Maintainer debug option (no --enable equivalent)</span>
<a href="#l14.7321"></a><span id="l14.7321" class="difflineplus">+dnl =</span>
<a href="#l14.7322"></a><span id="l14.7322" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7323"></a><span id="l14.7323" class="difflineplus">+</span>
<a href="#l14.7324"></a><span id="l14.7324" class="difflineplus">+AC_SUBST(AR)</span>
<a href="#l14.7325"></a><span id="l14.7325" class="difflineplus">+AC_SUBST(AR_FLAGS)</span>
<a href="#l14.7326"></a><span id="l14.7326" class="difflineplus">+AC_SUBST(AR_LIST)</span>
<a href="#l14.7327"></a><span id="l14.7327" class="difflineplus">+AC_SUBST(AR_EXTRACT)</span>
<a href="#l14.7328"></a><span id="l14.7328" class="difflineplus">+AC_SUBST(AR_DELETE)</span>
<a href="#l14.7329"></a><span id="l14.7329" class="difflineplus">+AC_SUBST(AS)</span>
<a href="#l14.7330"></a><span id="l14.7330" class="difflineplus">+AC_SUBST(ASFLAGS)</span>
<a href="#l14.7331"></a><span id="l14.7331" class="difflineplus">+AC_SUBST(AS_DASH_C_FLAG)</span>
<a href="#l14.7332"></a><span id="l14.7332" class="difflineplus">+AC_SUBST(LD)</span>
<a href="#l14.7333"></a><span id="l14.7333" class="difflineplus">+AC_SUBST(RC)</span>
<a href="#l14.7334"></a><span id="l14.7334" class="difflineplus">+AC_SUBST(RCFLAGS)</span>
<a href="#l14.7335"></a><span id="l14.7335" class="difflineplus">+AC_SUBST(WINDRES)</span>
<a href="#l14.7336"></a><span id="l14.7336" class="difflineplus">+AC_SUBST(USE_SHORT_LIBNAME)</span>
<a href="#l14.7337"></a><span id="l14.7337" class="difflineplus">+AC_SUBST(IMPLIB)</span>
<a href="#l14.7338"></a><span id="l14.7338" class="difflineplus">+AC_SUBST(FILTER)</span>
<a href="#l14.7339"></a><span id="l14.7339" class="difflineplus">+AC_SUBST(BIN_FLAGS)</span>
<a href="#l14.7340"></a><span id="l14.7340" class="difflineplus">+AC_SUBST(NS_USE_NATIVE)</span>
<a href="#l14.7341"></a><span id="l14.7341" class="difflineplus">+AC_SUBST(MOZ_WIDGET_TOOLKIT)</span>
<a href="#l14.7342"></a><span id="l14.7342" class="difflineplus">+AC_SUBST(MOZ_GFX_TOOLKIT)</span>
<a href="#l14.7343"></a><span id="l14.7343" class="difflineplus">+AC_SUBST(MOZ_UPDATE_XTERM)</span>
<a href="#l14.7344"></a><span id="l14.7344" class="difflineplus">+AC_SUBST(MINIMO)</span>
<a href="#l14.7345"></a><span id="l14.7345" class="difflineplus">+AC_SUBST(MOZ_AUTH_EXTENSION)</span>
<a href="#l14.7346"></a><span id="l14.7346" class="difflineplus">+AC_SUBST(MOZ_MATHML)</span>
<a href="#l14.7347"></a><span id="l14.7347" class="difflineplus">+AC_SUBST(MOZ_PERMISSIONS)</span>
<a href="#l14.7348"></a><span id="l14.7348" class="difflineplus">+AC_SUBST(MOZ_XTF)</span>
<a href="#l14.7349"></a><span id="l14.7349" class="difflineplus">+AC_SUBST(MOZ_NO_INSPECTOR_APIS)</span>
<a href="#l14.7350"></a><span id="l14.7350" class="difflineplus">+AC_SUBST(MOZ_PREF_EXTENSIONS)</span>
<a href="#l14.7351"></a><span id="l14.7351" class="difflineplus">+AC_SUBST(MOZ_SVG)</span>
<a href="#l14.7352"></a><span id="l14.7352" class="difflineplus">+AC_SUBST(MOZ_SVG_FOREIGNOBJECT)</span>
<a href="#l14.7353"></a><span id="l14.7353" class="difflineplus">+AC_SUBST(MOZ_XSLT_STANDALONE)</span>
<a href="#l14.7354"></a><span id="l14.7354" class="difflineplus">+AC_SUBST(MOZ_JS_LIBS)</span>
<a href="#l14.7355"></a><span id="l14.7355" class="difflineplus">+AC_SUBST(MOZ_PSM)</span>
<a href="#l14.7356"></a><span id="l14.7356" class="difflineplus">+AC_SUBST(MOZ_DEBUG)</span>
<a href="#l14.7357"></a><span id="l14.7357" class="difflineplus">+AC_SUBST(MOZ_DEBUG_MODULES)</span>
<a href="#l14.7358"></a><span id="l14.7358" class="difflineplus">+AC_SUBST(MOZ_PROFILE_MODULES)</span>
<a href="#l14.7359"></a><span id="l14.7359" class="difflineplus">+AC_SUBST(MOZ_DEBUG_ENABLE_DEFS)</span>
<a href="#l14.7360"></a><span id="l14.7360" class="difflineplus">+AC_SUBST(MOZ_DEBUG_DISABLE_DEFS)</span>
<a href="#l14.7361"></a><span id="l14.7361" class="difflineplus">+AC_SUBST(MOZ_DEBUG_FLAGS)</span>
<a href="#l14.7362"></a><span id="l14.7362" class="difflineplus">+AC_SUBST(MOZ_DEBUG_LDFLAGS)</span>
<a href="#l14.7363"></a><span id="l14.7363" class="difflineplus">+AC_SUBST(WARNINGS_AS_ERRORS)</span>
<a href="#l14.7364"></a><span id="l14.7364" class="difflineplus">+AC_SUBST(MOZ_DBGRINFO_MODULES)</span>
<a href="#l14.7365"></a><span id="l14.7365" class="difflineplus">+AC_SUBST(MOZ_EXTENSIONS)</span>
<a href="#l14.7366"></a><span id="l14.7366" class="difflineplus">+AC_SUBST(MOZ_IMG_DECODERS)</span>
<a href="#l14.7367"></a><span id="l14.7367" class="difflineplus">+AC_SUBST(MOZ_IMG_ENCODERS)</span>
<a href="#l14.7368"></a><span id="l14.7368" class="difflineplus">+AC_SUBST(MOZ_JSDEBUGGER)</span>
<a href="#l14.7369"></a><span id="l14.7369" class="difflineplus">+AC_SUBST(MOZ_OJI)</span>
<a href="#l14.7370"></a><span id="l14.7370" class="difflineplus">+AC_SUBST(MOZ_NO_XPCOM_OBSOLETE)</span>
<a href="#l14.7371"></a><span id="l14.7371" class="difflineplus">+AC_SUBST(MOZ_PLUGINS)</span>
<a href="#l14.7372"></a><span id="l14.7372" class="difflineplus">+AC_SUBST(ENABLE_EAZEL_PROFILER)</span>
<a href="#l14.7373"></a><span id="l14.7373" class="difflineplus">+AC_SUBST(EAZEL_PROFILER_CFLAGS)</span>
<a href="#l14.7374"></a><span id="l14.7374" class="difflineplus">+AC_SUBST(EAZEL_PROFILER_LIBS)</span>
<a href="#l14.7375"></a><span id="l14.7375" class="difflineplus">+AC_SUBST(MOZ_PERF_METRICS)</span>
<a href="#l14.7376"></a><span id="l14.7376" class="difflineplus">+AC_SUBST(GC_LEAK_DETECTOR)</span>
<a href="#l14.7377"></a><span id="l14.7377" class="difflineplus">+AC_SUBST(MOZ_LOG_REFCNT)</span>
<a href="#l14.7378"></a><span id="l14.7378" class="difflineplus">+AC_SUBST(MOZ_LEAKY)</span>
<a href="#l14.7379"></a><span id="l14.7379" class="difflineplus">+AC_SUBST(MOZ_JPROF)</span>
<a href="#l14.7380"></a><span id="l14.7380" class="difflineplus">+AC_SUBST(MOZ_SHARK)</span>
<a href="#l14.7381"></a><span id="l14.7381" class="difflineplus">+AC_SUBST(MOZ_XPCTOOLS)</span>
<a href="#l14.7382"></a><span id="l14.7382" class="difflineplus">+AC_SUBST(MOZ_JSLOADER)</span>
<a href="#l14.7383"></a><span id="l14.7383" class="difflineplus">+AC_SUBST(MOZ_USE_NATIVE_UCONV)</span>
<a href="#l14.7384"></a><span id="l14.7384" class="difflineplus">+AC_SUBST(MOZ_INSURE)</span>
<a href="#l14.7385"></a><span id="l14.7385" class="difflineplus">+AC_SUBST(MOZ_INSURE_DIRS)</span>
<a href="#l14.7386"></a><span id="l14.7386" class="difflineplus">+AC_SUBST(MOZ_INSURE_EXCLUDE_DIRS)</span>
<a href="#l14.7387"></a><span id="l14.7387" class="difflineplus">+AC_SUBST(MOZ_QUANTIFY)</span>
<a href="#l14.7388"></a><span id="l14.7388" class="difflineplus">+AC_SUBST(MOZ_INSURIFYING)</span>
<a href="#l14.7389"></a><span id="l14.7389" class="difflineplus">+AC_SUBST(MOZ_LDAP_XPCOM)</span>
<a href="#l14.7390"></a><span id="l14.7390" class="difflineplus">+AC_SUBST(MOZ_LDAP_XPCOM_EXPERIMENTAL)</span>
<a href="#l14.7391"></a><span id="l14.7391" class="difflineplus">+AC_SUBST(LDAP_CFLAGS)</span>
<a href="#l14.7392"></a><span id="l14.7392" class="difflineplus">+AC_SUBST(LDAP_LIBS)</span>
<a href="#l14.7393"></a><span id="l14.7393" class="difflineplus">+AC_SUBST(LIBICONV)</span>
<a href="#l14.7394"></a><span id="l14.7394" class="difflineplus">+AC_SUBST(MOZ_PLACES)</span>
<a href="#l14.7395"></a><span id="l14.7395" class="difflineplus">+AC_SUBST(MOZ_PLACES_BOOKMARKS)</span>
<a href="#l14.7396"></a><span id="l14.7396" class="difflineplus">+AC_SUBST(MOZ_STORAGE)</span>
<a href="#l14.7397"></a><span id="l14.7397" class="difflineplus">+AC_SUBST(MOZ_FEEDS)</span>
<a href="#l14.7398"></a><span id="l14.7398" class="difflineplus">+AC_SUBST(NS_PRINTING)</span>
<a href="#l14.7399"></a><span id="l14.7399" class="difflineplus">+</span>
<a href="#l14.7400"></a><span id="l14.7400" class="difflineplus">+AC_SUBST(MOZ_JAVAXPCOM)</span>
<a href="#l14.7401"></a><span id="l14.7401" class="difflineplus">+AC_SUBST(JAVA_INCLUDE_PATH)</span>
<a href="#l14.7402"></a><span id="l14.7402" class="difflineplus">+AC_SUBST(JAVA)</span>
<a href="#l14.7403"></a><span id="l14.7403" class="difflineplus">+AC_SUBST(JAVAC)</span>
<a href="#l14.7404"></a><span id="l14.7404" class="difflineplus">+AC_SUBST(JAR)</span>
<a href="#l14.7405"></a><span id="l14.7405" class="difflineplus">+</span>
<a href="#l14.7406"></a><span id="l14.7406" class="difflineplus">+AC_SUBST(MOZ_PROFILESHARING)</span>
<a href="#l14.7407"></a><span id="l14.7407" class="difflineplus">+AC_SUBST(MOZ_PROFILELOCKING)</span>
<a href="#l14.7408"></a><span id="l14.7408" class="difflineplus">+</span>
<a href="#l14.7409"></a><span id="l14.7409" class="difflineplus">+AC_SUBST(MOZ_IPCD)</span>
<a href="#l14.7410"></a><span id="l14.7410" class="difflineplus">+</span>
<a href="#l14.7411"></a><span id="l14.7411" class="difflineplus">+AC_SUBST(HAVE_XIE)</span>
<a href="#l14.7412"></a><span id="l14.7412" class="difflineplus">+AC_SUBST(MOZ_XIE_LIBS)</span>
<a href="#l14.7413"></a><span id="l14.7413" class="difflineplus">+AC_SUBST(MOZ_ENABLE_POSTSCRIPT)</span>
<a href="#l14.7414"></a><span id="l14.7414" class="difflineplus">+</span>
<a href="#l14.7415"></a><span id="l14.7415" class="difflineplus">+AC_SUBST(XPCOM_USE_LEA)</span>
<a href="#l14.7416"></a><span id="l14.7416" class="difflineplus">+AC_SUBST(BUILD_STATIC_LIBS)</span>
<a href="#l14.7417"></a><span id="l14.7417" class="difflineplus">+AC_SUBST(MOZ_ENABLE_LIBXUL)</span>
<a href="#l14.7418"></a><span id="l14.7418" class="difflineplus">+AC_SUBST(ENABLE_TESTS)</span>
<a href="#l14.7419"></a><span id="l14.7419" class="difflineplus">+AC_SUBST(IBMBIDI)</span>
<a href="#l14.7420"></a><span id="l14.7420" class="difflineplus">+AC_SUBST(SUNCTL)</span>
<a href="#l14.7421"></a><span id="l14.7421" class="difflineplus">+AC_SUBST(MOZ_UNIVERSALCHARDET)</span>
<a href="#l14.7422"></a><span id="l14.7422" class="difflineplus">+AC_SUBST(ACCESSIBILITY)</span>
<a href="#l14.7423"></a><span id="l14.7423" class="difflineplus">+AC_SUBST(MOZ_XPINSTALL)</span>
<a href="#l14.7424"></a><span id="l14.7424" class="difflineplus">+AC_SUBST(MOZ_VIEW_SOURCE)</span>
<a href="#l14.7425"></a><span id="l14.7425" class="difflineplus">+AC_SUBST(MOZ_SPELLCHECK)</span>
<a href="#l14.7426"></a><span id="l14.7426" class="difflineplus">+AC_SUBST(MOZ_XPFE_COMPONENTS)</span>
<a href="#l14.7427"></a><span id="l14.7427" class="difflineplus">+AC_SUBST(MOZ_USER_DIR)</span>
<a href="#l14.7428"></a><span id="l14.7428" class="difflineplus">+AC_SUBST(MOZ_CRASHREPORTER)</span>
<a href="#l14.7429"></a><span id="l14.7429" class="difflineplus">+AC_SUBST(MOZ_MOCHITEST)</span>
<a href="#l14.7430"></a><span id="l14.7430" class="difflineplus">+</span>
<a href="#l14.7431"></a><span id="l14.7431" class="difflineplus">+AC_SUBST(ENABLE_STRIP)</span>
<a href="#l14.7432"></a><span id="l14.7432" class="difflineplus">+AC_SUBST(PKG_SKIP_STRIP)</span>
<a href="#l14.7433"></a><span id="l14.7433" class="difflineplus">+AC_SUBST(USE_ELF_DYNSTR_GC)</span>
<a href="#l14.7434"></a><span id="l14.7434" class="difflineplus">+AC_SUBST(USE_PREBINDING)</span>
<a href="#l14.7435"></a><span id="l14.7435" class="difflineplus">+AC_SUBST(INCREMENTAL_LINKER)</span>
<a href="#l14.7436"></a><span id="l14.7436" class="difflineplus">+AC_SUBST(MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS)</span>
<a href="#l14.7437"></a><span id="l14.7437" class="difflineplus">+AC_SUBST(MOZ_COMPONENT_NSPR_LIBS)</span>
<a href="#l14.7438"></a><span id="l14.7438" class="difflineplus">+AC_SUBST(MOZ_XPCOM_OBSOLETE_LIBS)</span>
<a href="#l14.7439"></a><span id="l14.7439" class="difflineplus">+</span>
<a href="#l14.7440"></a><span id="l14.7440" class="difflineplus">+AC_SUBST(MOZ_FIX_LINK_PATHS)</span>
<a href="#l14.7441"></a><span id="l14.7441" class="difflineplus">+AC_SUBST(XPCOM_LIBS)</span>
<a href="#l14.7442"></a><span id="l14.7442" class="difflineplus">+AC_SUBST(XPCOM_FROZEN_LDOPTS)</span>
<a href="#l14.7443"></a><span id="l14.7443" class="difflineplus">+AC_SUBST(XPCOM_GLUE_LDOPTS)</span>
<a href="#l14.7444"></a><span id="l14.7444" class="difflineplus">+AC_SUBST(XPCOM_STANDALONE_GLUE_LDOPTS)</span>
<a href="#l14.7445"></a><span id="l14.7445" class="difflineplus">+</span>
<a href="#l14.7446"></a><span id="l14.7446" class="difflineplus">+AC_SUBST(USE_DEPENDENT_LIBS)</span>
<a href="#l14.7447"></a><span id="l14.7447" class="difflineplus">+</span>
<a href="#l14.7448"></a><span id="l14.7448" class="difflineplus">+AC_SUBST(MOZ_BUILD_ROOT)</span>
<a href="#l14.7449"></a><span id="l14.7449" class="difflineplus">+AC_SUBST(MOZ_OS2_TOOLS)</span>
<a href="#l14.7450"></a><span id="l14.7450" class="difflineplus">+AC_SUBST(MOZ_OS2_USE_DECLSPEC)</span>
<a href="#l14.7451"></a><span id="l14.7451" class="difflineplus">+</span>
<a href="#l14.7452"></a><span id="l14.7452" class="difflineplus">+AC_SUBST(MOZ_POST_DSO_LIB_COMMAND)</span>
<a href="#l14.7453"></a><span id="l14.7453" class="difflineplus">+AC_SUBST(MOZ_POST_PROGRAM_COMMAND)</span>
<a href="#l14.7454"></a><span id="l14.7454" class="difflineplus">+AC_SUBST(MOZ_TIMELINE)</span>
<a href="#l14.7455"></a><span id="l14.7455" class="difflineplus">+AC_SUBST(WINCE)</span>
<a href="#l14.7456"></a><span id="l14.7456" class="difflineplus">+AC_SUBST(TARGET_DEVICE)</span>
<a href="#l14.7457"></a><span id="l14.7457" class="difflineplus">+</span>
<a href="#l14.7458"></a><span id="l14.7458" class="difflineplus">+AC_SUBST(MOZ_APP_NAME)</span>
<a href="#l14.7459"></a><span id="l14.7459" class="difflineplus">+AC_SUBST(MOZ_APP_DISPLAYNAME)</span>
<a href="#l14.7460"></a><span id="l14.7460" class="difflineplus">+AC_SUBST(MOZ_APP_VERSION)</span>
<a href="#l14.7461"></a><span id="l14.7461" class="difflineplus">+AC_SUBST(FIREFOX_VERSION)</span>
<a href="#l14.7462"></a><span id="l14.7462" class="difflineplus">+AC_SUBST(THUNDERBIRD_VERSION)</span>
<a href="#l14.7463"></a><span id="l14.7463" class="difflineplus">+AC_SUBST(SUNBIRD_VERSION)</span>
<a href="#l14.7464"></a><span id="l14.7464" class="difflineplus">+AC_SUBST(SEAMONKEY_VERSION)</span>
<a href="#l14.7465"></a><span id="l14.7465" class="difflineplus">+</span>
<a href="#l14.7466"></a><span id="l14.7466" class="difflineplus">+AC_SUBST(MOZ_PKG_SPECIAL)</span>
<a href="#l14.7467"></a><span id="l14.7467" class="difflineplus">+</span>
<a href="#l14.7468"></a><span id="l14.7468" class="difflineplus">+AC_SUBST(MOZILLA_OFFICIAL)</span>
<a href="#l14.7469"></a><span id="l14.7469" class="difflineplus">+AC_SUBST(BUILD_OFFICIAL)</span>
<a href="#l14.7470"></a><span id="l14.7470" class="difflineplus">+AC_SUBST(MOZ_MILESTONE_RELEASE)</span>
<a href="#l14.7471"></a><span id="l14.7471" class="difflineplus">+</span>
<a href="#l14.7472"></a><span id="l14.7472" class="difflineplus">+dnl win32 options</span>
<a href="#l14.7473"></a><span id="l14.7473" class="difflineplus">+AC_SUBST(MOZ_PROFILE)</span>
<a href="#l14.7474"></a><span id="l14.7474" class="difflineplus">+AC_SUBST(MOZ_DEBUG_SYMBOLS)</span>
<a href="#l14.7475"></a><span id="l14.7475" class="difflineplus">+AC_SUBST(MOZ_MAPINFO)</span>
<a href="#l14.7476"></a><span id="l14.7476" class="difflineplus">+AC_SUBST(MOZ_BROWSE_INFO)</span>
<a href="#l14.7477"></a><span id="l14.7477" class="difflineplus">+AC_SUBST(MOZ_TOOLS_DIR)</span>
<a href="#l14.7478"></a><span id="l14.7478" class="difflineplus">+AC_SUBST(CYGWIN_WRAPPER)</span>
<a href="#l14.7479"></a><span id="l14.7479" class="difflineplus">+AC_SUBST(AS_PERL)</span>
<a href="#l14.7480"></a><span id="l14.7480" class="difflineplus">+AC_SUBST(WIN32_REDIST_DIR)</span>
<a href="#l14.7481"></a><span id="l14.7481" class="difflineplus">+AC_SUBST(PYTHON)</span>
<a href="#l14.7482"></a><span id="l14.7482" class="difflineplus">+</span>
<a href="#l14.7483"></a><span id="l14.7483" class="difflineplus">+dnl Echo the CFLAGS to remove extra whitespace.</span>
<a href="#l14.7484"></a><span id="l14.7484" class="difflineplus">+CFLAGS=`echo \</span>
<a href="#l14.7485"></a><span id="l14.7485" class="difflineplus">+	$_WARNINGS_CFLAGS \</span>
<a href="#l14.7486"></a><span id="l14.7486" class="difflineplus">+	$CFLAGS`</span>
<a href="#l14.7487"></a><span id="l14.7487" class="difflineplus">+</span>
<a href="#l14.7488"></a><span id="l14.7488" class="difflineplus">+CXXFLAGS=`echo \</span>
<a href="#l14.7489"></a><span id="l14.7489" class="difflineplus">+	$_MOZ_RTTI_FLAGS \</span>
<a href="#l14.7490"></a><span id="l14.7490" class="difflineplus">+	$_MOZ_EXCEPTIONS_FLAGS \</span>
<a href="#l14.7491"></a><span id="l14.7491" class="difflineplus">+	$_WARNINGS_CXXFLAGS \</span>
<a href="#l14.7492"></a><span id="l14.7492" class="difflineplus">+	$CXXFLAGS`</span>
<a href="#l14.7493"></a><span id="l14.7493" class="difflineplus">+</span>
<a href="#l14.7494"></a><span id="l14.7494" class="difflineplus">+COMPILE_CFLAGS=`echo \</span>
<a href="#l14.7495"></a><span id="l14.7495" class="difflineplus">+    $_DEFINES_CFLAGS \</span>
<a href="#l14.7496"></a><span id="l14.7496" class="difflineplus">+	$_DEPEND_CFLAGS \</span>
<a href="#l14.7497"></a><span id="l14.7497" class="difflineplus">+    $COMPILE_CFLAGS`</span>
<a href="#l14.7498"></a><span id="l14.7498" class="difflineplus">+</span>
<a href="#l14.7499"></a><span id="l14.7499" class="difflineplus">+COMPILE_CXXFLAGS=`echo \</span>
<a href="#l14.7500"></a><span id="l14.7500" class="difflineplus">+    $_DEFINES_CXXFLAGS \</span>
<a href="#l14.7501"></a><span id="l14.7501" class="difflineplus">+	$_DEPEND_CFLAGS \</span>
<a href="#l14.7502"></a><span id="l14.7502" class="difflineplus">+    $COMPILE_CXXFLAGS`</span>
<a href="#l14.7503"></a><span id="l14.7503" class="difflineplus">+</span>
<a href="#l14.7504"></a><span id="l14.7504" class="difflineplus">+AC_SUBST(SYSTEM_MAKEDEPEND)</span>
<a href="#l14.7505"></a><span id="l14.7505" class="difflineplus">+AC_SUBST(SYSTEM_JPEG)</span>
<a href="#l14.7506"></a><span id="l14.7506" class="difflineplus">+AC_SUBST(SYSTEM_PNG)</span>
<a href="#l14.7507"></a><span id="l14.7507" class="difflineplus">+AC_SUBST(SYSTEM_ZLIB)</span>
<a href="#l14.7508"></a><span id="l14.7508" class="difflineplus">+AC_SUBST(SYSTEM_BZ2)</span>
<a href="#l14.7509"></a><span id="l14.7509" class="difflineplus">+</span>
<a href="#l14.7510"></a><span id="l14.7510" class="difflineplus">+AC_SUBST(JPEG_CFLAGS)</span>
<a href="#l14.7511"></a><span id="l14.7511" class="difflineplus">+AC_SUBST(JPEG_LIBS)</span>
<a href="#l14.7512"></a><span id="l14.7512" class="difflineplus">+AC_SUBST(ZLIB_CFLAGS)</span>
<a href="#l14.7513"></a><span id="l14.7513" class="difflineplus">+AC_SUBST(ZLIB_LIBS)</span>
<a href="#l14.7514"></a><span id="l14.7514" class="difflineplus">+AC_SUBST(BZ2_CFLAGS)</span>
<a href="#l14.7515"></a><span id="l14.7515" class="difflineplus">+AC_SUBST(BZ2_LIBS)</span>
<a href="#l14.7516"></a><span id="l14.7516" class="difflineplus">+AC_SUBST(PNG_CFLAGS)</span>
<a href="#l14.7517"></a><span id="l14.7517" class="difflineplus">+AC_SUBST(PNG_LIBS)</span>
<a href="#l14.7518"></a><span id="l14.7518" class="difflineplus">+</span>
<a href="#l14.7519"></a><span id="l14.7519" class="difflineplus">+AC_SUBST(MOZ_JPEG_CFLAGS)</span>
<a href="#l14.7520"></a><span id="l14.7520" class="difflineplus">+AC_SUBST(MOZ_JPEG_LIBS)</span>
<a href="#l14.7521"></a><span id="l14.7521" class="difflineplus">+AC_SUBST(MOZ_ZLIB_CFLAGS)</span>
<a href="#l14.7522"></a><span id="l14.7522" class="difflineplus">+AC_SUBST(MOZ_ZLIB_LIBS)</span>
<a href="#l14.7523"></a><span id="l14.7523" class="difflineplus">+AC_SUBST(MOZ_BZ2_CFLAGS)</span>
<a href="#l14.7524"></a><span id="l14.7524" class="difflineplus">+AC_SUBST(MOZ_BZ2_LIBS)</span>
<a href="#l14.7525"></a><span id="l14.7525" class="difflineplus">+AC_SUBST(MOZ_PNG_CFLAGS)</span>
<a href="#l14.7526"></a><span id="l14.7526" class="difflineplus">+AC_SUBST(MOZ_PNG_LIBS)</span>
<a href="#l14.7527"></a><span id="l14.7527" class="difflineplus">+</span>
<a href="#l14.7528"></a><span id="l14.7528" class="difflineplus">+AC_SUBST(NSPR_CFLAGS)</span>
<a href="#l14.7529"></a><span id="l14.7529" class="difflineplus">+AC_SUBST(NSPR_LIBS)</span>
<a href="#l14.7530"></a><span id="l14.7530" class="difflineplus">+AC_SUBST(MOZ_NATIVE_NSPR)</span>
<a href="#l14.7531"></a><span id="l14.7531" class="difflineplus">+</span>
<a href="#l14.7532"></a><span id="l14.7532" class="difflineplus">+AC_SUBST(NSS_CFLAGS)</span>
<a href="#l14.7533"></a><span id="l14.7533" class="difflineplus">+AC_SUBST(NSS_LIBS)</span>
<a href="#l14.7534"></a><span id="l14.7534" class="difflineplus">+AC_SUBST(NSS_DEP_LIBS)</span>
<a href="#l14.7535"></a><span id="l14.7535" class="difflineplus">+AC_SUBST(MOZ_NATIVE_NSS)</span>
<a href="#l14.7536"></a><span id="l14.7536" class="difflineplus">+</span>
<a href="#l14.7537"></a><span id="l14.7537" class="difflineplus">+AC_SUBST(CFLAGS)</span>
<a href="#l14.7538"></a><span id="l14.7538" class="difflineplus">+AC_SUBST(CXXFLAGS)</span>
<a href="#l14.7539"></a><span id="l14.7539" class="difflineplus">+AC_SUBST(CPPFLAGS)</span>
<a href="#l14.7540"></a><span id="l14.7540" class="difflineplus">+AC_SUBST(COMPILE_CFLAGS)</span>
<a href="#l14.7541"></a><span id="l14.7541" class="difflineplus">+AC_SUBST(COMPILE_CXXFLAGS)</span>
<a href="#l14.7542"></a><span id="l14.7542" class="difflineplus">+AC_SUBST(LDFLAGS)</span>
<a href="#l14.7543"></a><span id="l14.7543" class="difflineplus">+AC_SUBST(LIBS)</span>
<a href="#l14.7544"></a><span id="l14.7544" class="difflineplus">+AC_SUBST(CROSS_COMPILE)</span>
<a href="#l14.7545"></a><span id="l14.7545" class="difflineplus">+</span>
<a href="#l14.7546"></a><span id="l14.7546" class="difflineplus">+AC_SUBST(HOST_CC)</span>
<a href="#l14.7547"></a><span id="l14.7547" class="difflineplus">+AC_SUBST(HOST_CXX)</span>
<a href="#l14.7548"></a><span id="l14.7548" class="difflineplus">+AC_SUBST(HOST_CFLAGS)</span>
<a href="#l14.7549"></a><span id="l14.7549" class="difflineplus">+AC_SUBST(HOST_CXXFLAGS)</span>
<a href="#l14.7550"></a><span id="l14.7550" class="difflineplus">+AC_SUBST(HOST_OPTIMIZE_FLAGS)</span>
<a href="#l14.7551"></a><span id="l14.7551" class="difflineplus">+AC_SUBST(HOST_AR)</span>
<a href="#l14.7552"></a><span id="l14.7552" class="difflineplus">+AC_SUBST(HOST_AR_FLAGS)</span>
<a href="#l14.7553"></a><span id="l14.7553" class="difflineplus">+AC_SUBST(HOST_LD)</span>
<a href="#l14.7554"></a><span id="l14.7554" class="difflineplus">+AC_SUBST(HOST_RANLIB)</span>
<a href="#l14.7555"></a><span id="l14.7555" class="difflineplus">+AC_SUBST(HOST_NSPR_MDCPUCFG)</span>
<a href="#l14.7556"></a><span id="l14.7556" class="difflineplus">+AC_SUBST(HOST_BIN_SUFFIX)</span>
<a href="#l14.7557"></a><span id="l14.7557" class="difflineplus">+AC_SUBST(HOST_OS_ARCH)</span>
<a href="#l14.7558"></a><span id="l14.7558" class="difflineplus">+</span>
<a href="#l14.7559"></a><span id="l14.7559" class="difflineplus">+AC_SUBST(TARGET_CPU)</span>
<a href="#l14.7560"></a><span id="l14.7560" class="difflineplus">+AC_SUBST(TARGET_VENDOR)</span>
<a href="#l14.7561"></a><span id="l14.7561" class="difflineplus">+AC_SUBST(TARGET_OS)</span>
<a href="#l14.7562"></a><span id="l14.7562" class="difflineplus">+AC_SUBST(TARGET_NSPR_MDCPUCFG)</span>
<a href="#l14.7563"></a><span id="l14.7563" class="difflineplus">+AC_SUBST(TARGET_MD_ARCH)</span>
<a href="#l14.7564"></a><span id="l14.7564" class="difflineplus">+AC_SUBST(TARGET_XPCOM_ABI)</span>
<a href="#l14.7565"></a><span id="l14.7565" class="difflineplus">+AC_SUBST(OS_TARGET)</span>
<a href="#l14.7566"></a><span id="l14.7566" class="difflineplus">+AC_SUBST(OS_ARCH)</span>
<a href="#l14.7567"></a><span id="l14.7567" class="difflineplus">+AC_SUBST(OS_RELEASE)</span>
<a href="#l14.7568"></a><span id="l14.7568" class="difflineplus">+AC_SUBST(OS_TEST)</span>
<a href="#l14.7569"></a><span id="l14.7569" class="difflineplus">+</span>
<a href="#l14.7570"></a><span id="l14.7570" class="difflineplus">+AC_SUBST(MOZ_DISABLE_JAR_PACKAGING)</span>
<a href="#l14.7571"></a><span id="l14.7571" class="difflineplus">+AC_SUBST(MOZ_CHROME_FILE_FORMAT)</span>
<a href="#l14.7572"></a><span id="l14.7572" class="difflineplus">+</span>
<a href="#l14.7573"></a><span id="l14.7573" class="difflineplus">+AC_SUBST(WRAP_MALLOC_CFLAGS)</span>
<a href="#l14.7574"></a><span id="l14.7574" class="difflineplus">+AC_SUBST(WRAP_MALLOC_LIB)</span>
<a href="#l14.7575"></a><span id="l14.7575" class="difflineplus">+AC_SUBST(MKSHLIB)</span>
<a href="#l14.7576"></a><span id="l14.7576" class="difflineplus">+AC_SUBST(MKCSHLIB)</span>
<a href="#l14.7577"></a><span id="l14.7577" class="difflineplus">+AC_SUBST(MKSHLIB_FORCE_ALL)</span>
<a href="#l14.7578"></a><span id="l14.7578" class="difflineplus">+AC_SUBST(MKSHLIB_UNFORCE_ALL)</span>
<a href="#l14.7579"></a><span id="l14.7579" class="difflineplus">+AC_SUBST(DSO_CFLAGS)</span>
<a href="#l14.7580"></a><span id="l14.7580" class="difflineplus">+AC_SUBST(DSO_PIC_CFLAGS)</span>
<a href="#l14.7581"></a><span id="l14.7581" class="difflineplus">+AC_SUBST(DSO_LDOPTS)</span>
<a href="#l14.7582"></a><span id="l14.7582" class="difflineplus">+AC_SUBST(LIB_PREFIX)</span>
<a href="#l14.7583"></a><span id="l14.7583" class="difflineplus">+AC_SUBST(DLL_PREFIX)</span>
<a href="#l14.7584"></a><span id="l14.7584" class="difflineplus">+AC_SUBST(DLL_SUFFIX)</span>
<a href="#l14.7585"></a><span id="l14.7585" class="difflineplus">+AC_DEFINE_UNQUOTED(MOZ_DLL_SUFFIX, &quot;$DLL_SUFFIX&quot;)</span>
<a href="#l14.7586"></a><span id="l14.7586" class="difflineplus">+AC_SUBST(LIB_SUFFIX)</span>
<a href="#l14.7587"></a><span id="l14.7587" class="difflineplus">+AC_SUBST(OBJ_SUFFIX)</span>
<a href="#l14.7588"></a><span id="l14.7588" class="difflineplus">+AC_SUBST(BIN_SUFFIX)</span>
<a href="#l14.7589"></a><span id="l14.7589" class="difflineplus">+AC_SUBST(ASM_SUFFIX)</span>
<a href="#l14.7590"></a><span id="l14.7590" class="difflineplus">+AC_SUBST(IMPORT_LIB_SUFFIX)</span>
<a href="#l14.7591"></a><span id="l14.7591" class="difflineplus">+AC_SUBST(USE_N32)</span>
<a href="#l14.7592"></a><span id="l14.7592" class="difflineplus">+AC_SUBST(CC_VERSION)</span>
<a href="#l14.7593"></a><span id="l14.7593" class="difflineplus">+AC_SUBST(CXX_VERSION)</span>
<a href="#l14.7594"></a><span id="l14.7594" class="difflineplus">+AC_SUBST(MSMANIFEST_TOOL)</span>
<a href="#l14.7595"></a><span id="l14.7595" class="difflineplus">+</span>
<a href="#l14.7596"></a><span id="l14.7596" class="difflineplus">+if test &quot;$USING_HCC&quot;; then</span>
<a href="#l14.7597"></a><span id="l14.7597" class="difflineplus">+   CC='${MOZILLA_SRCDIR}/build/hcc'</span>
<a href="#l14.7598"></a><span id="l14.7598" class="difflineplus">+   CC=&quot;$CC '$_OLDCC'&quot;</span>
<a href="#l14.7599"></a><span id="l14.7599" class="difflineplus">+   CXX='${MOZILLA_SRCDIR}/build/hcpp'</span>
<a href="#l14.7600"></a><span id="l14.7600" class="difflineplus">+   CXX=&quot;$CXX '$_OLDCXX'&quot;</span>
<a href="#l14.7601"></a><span id="l14.7601" class="difflineplus">+   AC_SUBST(CC)</span>
<a href="#l14.7602"></a><span id="l14.7602" class="difflineplus">+   AC_SUBST(CXX)</span>
<a href="#l14.7603"></a><span id="l14.7603" class="difflineplus">+fi</span>
<a href="#l14.7604"></a><span id="l14.7604" class="difflineplus">+</span>
<a href="#l14.7605"></a><span id="l14.7605" class="difflineplus">+dnl Check for missing components</span>
<a href="#l14.7606"></a><span id="l14.7606" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.7607"></a><span id="l14.7607" class="difflineplus">+if test &quot;$MOZ_X11&quot;; then</span>
<a href="#l14.7608"></a><span id="l14.7608" class="difflineplus">+    dnl ====================================================</span>
<a href="#l14.7609"></a><span id="l14.7609" class="difflineplus">+    dnl = Check if X headers exist</span>
<a href="#l14.7610"></a><span id="l14.7610" class="difflineplus">+    dnl ====================================================</span>
<a href="#l14.7611"></a><span id="l14.7611" class="difflineplus">+    _SAVE_CFLAGS=$CFLAGS</span>
<a href="#l14.7612"></a><span id="l14.7612" class="difflineplus">+    CFLAGS=&quot;$CFLAGS $XCFLAGS&quot;</span>
<a href="#l14.7613"></a><span id="l14.7613" class="difflineplus">+    AC_TRY_COMPILE([</span>
<a href="#l14.7614"></a><span id="l14.7614" class="difflineplus">+        #include &lt;stdio.h&gt;</span>
<a href="#l14.7615"></a><span id="l14.7615" class="difflineplus">+        #include &lt;stdlib.h&gt;</span>
<a href="#l14.7616"></a><span id="l14.7616" class="difflineplus">+        #include &lt;X11/Xlib.h&gt;</span>
<a href="#l14.7617"></a><span id="l14.7617" class="difflineplus">+        #include &lt;X11/Intrinsic.h&gt;</span>
<a href="#l14.7618"></a><span id="l14.7618" class="difflineplus">+    ],</span>
<a href="#l14.7619"></a><span id="l14.7619" class="difflineplus">+    [</span>
<a href="#l14.7620"></a><span id="l14.7620" class="difflineplus">+        Display *dpy = 0;</span>
<a href="#l14.7621"></a><span id="l14.7621" class="difflineplus">+        if ((dpy = XOpenDisplay(NULL)) == NULL) {</span>
<a href="#l14.7622"></a><span id="l14.7622" class="difflineplus">+            fprintf(stderr, &quot;: can't open %s\n&quot;, XDisplayName(NULL));</span>
<a href="#l14.7623"></a><span id="l14.7623" class="difflineplus">+            exit(1);</span>
<a href="#l14.7624"></a><span id="l14.7624" class="difflineplus">+        }</span>
<a href="#l14.7625"></a><span id="l14.7625" class="difflineplus">+    ], [], </span>
<a href="#l14.7626"></a><span id="l14.7626" class="difflineplus">+    [ AC_MSG_ERROR([Could not compile basic X program.]) ])</span>
<a href="#l14.7627"></a><span id="l14.7627" class="difflineplus">+    CFLAGS=&quot;$_SAVE_CFLAGS&quot;</span>
<a href="#l14.7628"></a><span id="l14.7628" class="difflineplus">+</span>
<a href="#l14.7629"></a><span id="l14.7629" class="difflineplus">+    if test ! -z &quot;$MISSING_X&quot;; then</span>
<a href="#l14.7630"></a><span id="l14.7630" class="difflineplus">+        AC_MSG_ERROR([ Could not find the following X libraries: $MISSING_X ]);</span>
<a href="#l14.7631"></a><span id="l14.7631" class="difflineplus">+    fi</span>
<a href="#l14.7632"></a><span id="l14.7632" class="difflineplus">+</span>
<a href="#l14.7633"></a><span id="l14.7633" class="difflineplus">+fi # MOZ_X11</span>
<a href="#l14.7634"></a><span id="l14.7634" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.7635"></a><span id="l14.7635" class="difflineplus">+</span>
<a href="#l14.7636"></a><span id="l14.7636" class="difflineplus">+dnl Set various defines and substitutions</span>
<a href="#l14.7637"></a><span id="l14.7637" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7638"></a><span id="l14.7638" class="difflineplus">+</span>
<a href="#l14.7639"></a><span id="l14.7639" class="difflineplus">+if test &quot;$OS_ARCH&quot; = &quot;OS2&quot; -a &quot;$VACPP&quot; = &quot;yes&quot;; then</span>
<a href="#l14.7640"></a><span id="l14.7640" class="difflineplus">+      LIBS='so32dll.lib tcp32dll.lib'</span>
<a href="#l14.7641"></a><span id="l14.7641" class="difflineplus">+elif test &quot;$OS_ARCH&quot; = &quot;BeOS&quot;; then</span>
<a href="#l14.7642"></a><span id="l14.7642" class="difflineplus">+  AC_DEFINE(XP_BEOS)</span>
<a href="#l14.7643"></a><span id="l14.7643" class="difflineplus">+  MOZ_MOVEMAIL=1</span>
<a href="#l14.7644"></a><span id="l14.7644" class="difflineplus">+elif test &quot;$OS_ARCH&quot; = &quot;Darwin&quot;; then</span>
<a href="#l14.7645"></a><span id="l14.7645" class="difflineplus">+  AC_DEFINE(XP_UNIX)</span>
<a href="#l14.7646"></a><span id="l14.7646" class="difflineplus">+  AC_DEFINE(UNIX_ASYNC_DNS)</span>
<a href="#l14.7647"></a><span id="l14.7647" class="difflineplus">+  MOZ_MOVEMAIL=1</span>
<a href="#l14.7648"></a><span id="l14.7648" class="difflineplus">+elif test &quot;$OS_ARCH&quot; = &quot;OpenVMS&quot;; then</span>
<a href="#l14.7649"></a><span id="l14.7649" class="difflineplus">+  AC_DEFINE(XP_UNIX)</span>
<a href="#l14.7650"></a><span id="l14.7650" class="difflineplus">+elif test &quot;$OS_ARCH&quot; != &quot;WINNT&quot; -a &quot;$OS_ARCH&quot; != &quot;OS2&quot; -a &quot;$OS_ARCH&quot; != &quot;WINCE&quot;; then</span>
<a href="#l14.7651"></a><span id="l14.7651" class="difflineplus">+  AC_DEFINE(XP_UNIX)</span>
<a href="#l14.7652"></a><span id="l14.7652" class="difflineplus">+  AC_DEFINE(UNIX_ASYNC_DNS)</span>
<a href="#l14.7653"></a><span id="l14.7653" class="difflineplus">+  MOZ_MOVEMAIL=1</span>
<a href="#l14.7654"></a><span id="l14.7654" class="difflineplus">+fi</span>
<a href="#l14.7655"></a><span id="l14.7655" class="difflineplus">+AC_SUBST(MOZ_MOVEMAIL)</span>
<a href="#l14.7656"></a><span id="l14.7656" class="difflineplus">+</span>
<a href="#l14.7657"></a><span id="l14.7657" class="difflineplus">+AC_DEFINE(JS_THREADSAFE)</span>
<a href="#l14.7658"></a><span id="l14.7658" class="difflineplus">+</span>
<a href="#l14.7659"></a><span id="l14.7659" class="difflineplus">+if test &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l14.7660"></a><span id="l14.7660" class="difflineplus">+    AC_DEFINE(MOZ_REFLOW_PERF)</span>
<a href="#l14.7661"></a><span id="l14.7661" class="difflineplus">+    AC_DEFINE(MOZ_REFLOW_PERF_DSP)</span>
<a href="#l14.7662"></a><span id="l14.7662" class="difflineplus">+fi</span>
<a href="#l14.7663"></a><span id="l14.7663" class="difflineplus">+</span>
<a href="#l14.7664"></a><span id="l14.7664" class="difflineplus">+if test &quot;$ACCESSIBILITY&quot; -a &quot;$MOZ_ENABLE_GTK2&quot; ; then</span>
<a href="#l14.7665"></a><span id="l14.7665" class="difflineplus">+    AC_DEFINE(MOZ_ACCESSIBILITY_ATK)</span>
<a href="#l14.7666"></a><span id="l14.7666" class="difflineplus">+    ATK_FULL_VERSION=`$PKG_CONFIG --modversion atk`</span>
<a href="#l14.7667"></a><span id="l14.7667" class="difflineplus">+    ATK_MAJOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $1 }'`</span>
<a href="#l14.7668"></a><span id="l14.7668" class="difflineplus">+    ATK_MINOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $2 }'`</span>
<a href="#l14.7669"></a><span id="l14.7669" class="difflineplus">+    ATK_REV_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $3 }'`</span>
<a href="#l14.7670"></a><span id="l14.7670" class="difflineplus">+    AC_DEFINE_UNQUOTED(ATK_MAJOR_VERSION, $ATK_MAJOR_VERSION)</span>
<a href="#l14.7671"></a><span id="l14.7671" class="difflineplus">+    AC_DEFINE_UNQUOTED(ATK_MINOR_VERSION, $ATK_MINOR_VERSION)</span>
<a href="#l14.7672"></a><span id="l14.7672" class="difflineplus">+    AC_DEFINE_UNQUOTED(ATK_REV_VERSION, $ATK_REV_VERSION)</span>
<a href="#l14.7673"></a><span id="l14.7673" class="difflineplus">+fi</span>
<a href="#l14.7674"></a><span id="l14.7674" class="difflineplus">+</span>
<a href="#l14.7675"></a><span id="l14.7675" class="difflineplus">+# Used for LD_LIBRARY_PATH of run_viewer target</span>
<a href="#l14.7676"></a><span id="l14.7676" class="difflineplus">+LIBS_PATH=</span>
<a href="#l14.7677"></a><span id="l14.7677" class="difflineplus">+for lib_arg in $NSPR_LIBS $TK_LIBS; do</span>
<a href="#l14.7678"></a><span id="l14.7678" class="difflineplus">+  case $lib_arg in</span>
<a href="#l14.7679"></a><span id="l14.7679" class="difflineplus">+    -L* ) LIBS_PATH=&quot;${LIBS_PATH:+$LIBS_PATH:}&quot;`expr $lib_arg : &quot;-L\(.*\)&quot;` ;;</span>
<a href="#l14.7680"></a><span id="l14.7680" class="difflineplus">+      * ) ;;</span>
<a href="#l14.7681"></a><span id="l14.7681" class="difflineplus">+  esac</span>
<a href="#l14.7682"></a><span id="l14.7682" class="difflineplus">+done</span>
<a href="#l14.7683"></a><span id="l14.7683" class="difflineplus">+AC_SUBST(LIBS_PATH)</span>
<a href="#l14.7684"></a><span id="l14.7684" class="difflineplus">+</span>
<a href="#l14.7685"></a><span id="l14.7685" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7686"></a><span id="l14.7686" class="difflineplus">+dnl Use cygwin wrapper for win32 builds, except MSYS/MinGW</span>
<a href="#l14.7687"></a><span id="l14.7687" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7688"></a><span id="l14.7688" class="difflineplus">+case &quot;$host_os&quot; in</span>
<a href="#l14.7689"></a><span id="l14.7689" class="difflineplus">+mingw*)</span>
<a href="#l14.7690"></a><span id="l14.7690" class="difflineplus">+    WIN_TOP_SRC=`cd $srcdir; pwd -W`</span>
<a href="#l14.7691"></a><span id="l14.7691" class="difflineplus">+    ;;</span>
<a href="#l14.7692"></a><span id="l14.7692" class="difflineplus">+cygwin*|msvc*|mks*)</span>
<a href="#l14.7693"></a><span id="l14.7693" class="difflineplus">+    HOST_CC=&quot;\$(CYGWIN_WRAPPER) $HOST_CC&quot;</span>
<a href="#l14.7694"></a><span id="l14.7694" class="difflineplus">+    HOST_CXX=&quot;\$(CYGWIN_WRAPPER) $HOST_CXX&quot;</span>
<a href="#l14.7695"></a><span id="l14.7695" class="difflineplus">+    CC=&quot;\$(CYGWIN_WRAPPER) $CC&quot;</span>
<a href="#l14.7696"></a><span id="l14.7696" class="difflineplus">+    CXX=&quot;\$(CYGWIN_WRAPPER) $CXX&quot;</span>
<a href="#l14.7697"></a><span id="l14.7697" class="difflineplus">+    CPP=&quot;\$(CYGWIN_WRAPPER) $CPP&quot;</span>
<a href="#l14.7698"></a><span id="l14.7698" class="difflineplus">+    LD=&quot;\$(CYGWIN_WRAPPER) $LD&quot;</span>
<a href="#l14.7699"></a><span id="l14.7699" class="difflineplus">+    AS=&quot;\$(CYGWIN_WRAPPER) $AS&quot;</span>
<a href="#l14.7700"></a><span id="l14.7700" class="difflineplus">+    RC=&quot;\$(CYGWIN_WRAPPER) $RC&quot;</span>
<a href="#l14.7701"></a><span id="l14.7701" class="difflineplus">+    MIDL=&quot;\$(CYGWIN_WRAPPER) $MIDL&quot;</span>
<a href="#l14.7702"></a><span id="l14.7702" class="difflineplus">+    CYGDRIVE_MOUNT=`mount -p | awk '{ if (/^\//) { print $1; exit } }'`</span>
<a href="#l14.7703"></a><span id="l14.7703" class="difflineplus">+    WIN_TOP_SRC=`cygpath -a -w $srcdir | sed -e 's|\\\\|/|g'`</span>
<a href="#l14.7704"></a><span id="l14.7704" class="difflineplus">+    ;;</span>
<a href="#l14.7705"></a><span id="l14.7705" class="difflineplus">+esac</span>
<a href="#l14.7706"></a><span id="l14.7706" class="difflineplus">+</span>
<a href="#l14.7707"></a><span id="l14.7707" class="difflineplus">+AC_SUBST(CYGDRIVE_MOUNT)</span>
<a href="#l14.7708"></a><span id="l14.7708" class="difflineplus">+AC_SUBST(WIN_TOP_SRC)</span>
<a href="#l14.7709"></a><span id="l14.7709" class="difflineplus">+</span>
<a href="#l14.7710"></a><span id="l14.7710" class="difflineplus">+AC_SUBST(MOZILLA_VERSION)</span>
<a href="#l14.7711"></a><span id="l14.7711" class="difflineplus">+</span>
<a href="#l14.7712"></a><span id="l14.7712" class="difflineplus">+AC_SUBST(ac_configure_args)</span>
<a href="#l14.7713"></a><span id="l14.7713" class="difflineplus">+</span>
<a href="#l14.7714"></a><span id="l14.7714" class="difflineplus">+dnl Spit out some output</span>
<a href="#l14.7715"></a><span id="l14.7715" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7716"></a><span id="l14.7716" class="difflineplus">+</span>
<a href="#l14.7717"></a><span id="l14.7717" class="difflineplus">+dnl The following defines are used by xpcom</span>
<a href="#l14.7718"></a><span id="l14.7718" class="difflineplus">+_NON_GLOBAL_ACDEFINES=&quot;$_NON_GLOBAL_ACDEFINES</span>
<a href="#l14.7719"></a><span id="l14.7719" class="difflineplus">+CPP_THROW_NEW</span>
<a href="#l14.7720"></a><span id="l14.7720" class="difflineplus">+HAVE_CPP_2BYTE_WCHAR_T</span>
<a href="#l14.7721"></a><span id="l14.7721" class="difflineplus">+HAVE_CPP_ACCESS_CHANGING_USING</span>
<a href="#l14.7722"></a><span id="l14.7722" class="difflineplus">+HAVE_CPP_AMBIGUITY_RESOLVING_USING</span>
<a href="#l14.7723"></a><span id="l14.7723" class="difflineplus">+HAVE_CPP_BOOL</span>
<a href="#l14.7724"></a><span id="l14.7724" class="difflineplus">+HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR</span>
<a href="#l14.7725"></a><span id="l14.7725" class="difflineplus">+HAVE_CPP_EXPLICIT</span>
<a href="#l14.7726"></a><span id="l14.7726" class="difflineplus">+HAVE_CPP_MODERN_SPECIALIZE_TEMPLATE_SYNTAX</span>
<a href="#l14.7727"></a><span id="l14.7727" class="difflineplus">+HAVE_CPP_NAMESPACE_STD</span>
<a href="#l14.7728"></a><span id="l14.7728" class="difflineplus">+HAVE_CPP_NEW_CASTS</span>
<a href="#l14.7729"></a><span id="l14.7729" class="difflineplus">+HAVE_CPP_PARTIAL_SPECIALIZATION</span>
<a href="#l14.7730"></a><span id="l14.7730" class="difflineplus">+HAVE_CPP_TROUBLE_COMPARING_TO_ZERO</span>
<a href="#l14.7731"></a><span id="l14.7731" class="difflineplus">+HAVE_CPP_TYPENAME</span>
<a href="#l14.7732"></a><span id="l14.7732" class="difflineplus">+HAVE_CPP_UNAMBIGUOUS_STD_NOTEQUAL</span>
<a href="#l14.7733"></a><span id="l14.7733" class="difflineplus">+HAVE_STATVFS</span>
<a href="#l14.7734"></a><span id="l14.7734" class="difflineplus">+NEED_CPP_UNUSED_IMPLEMENTATIONS</span>
<a href="#l14.7735"></a><span id="l14.7735" class="difflineplus">+NEW_H</span>
<a href="#l14.7736"></a><span id="l14.7736" class="difflineplus">+HAVE_GETPAGESIZE</span>
<a href="#l14.7737"></a><span id="l14.7737" class="difflineplus">+HAVE_ICONV</span>
<a href="#l14.7738"></a><span id="l14.7738" class="difflineplus">+HAVE_ICONV_WITH_CONST_INPUT</span>
<a href="#l14.7739"></a><span id="l14.7739" class="difflineplus">+HAVE_MBRTOWC</span>
<a href="#l14.7740"></a><span id="l14.7740" class="difflineplus">+HAVE_SYS_MOUNT_H</span>
<a href="#l14.7741"></a><span id="l14.7741" class="difflineplus">+HAVE_SYS_VFS_H</span>
<a href="#l14.7742"></a><span id="l14.7742" class="difflineplus">+HAVE_WCRTOMB</span>
<a href="#l14.7743"></a><span id="l14.7743" class="difflineplus">+MOZ_V1_STRING_ABI</span>
<a href="#l14.7744"></a><span id="l14.7744" class="difflineplus">+&quot;</span>
<a href="#l14.7745"></a><span id="l14.7745" class="difflineplus">+</span>
<a href="#l14.7746"></a><span id="l14.7746" class="difflineplus">+# Save the defines header file before autoconf removes it.</span>
<a href="#l14.7747"></a><span id="l14.7747" class="difflineplus">+# (Do not add AC_DEFINE calls after this line.)</span>
<a href="#l14.7748"></a><span id="l14.7748" class="difflineplus">+  _CONFIG_TMP=confdefs-tmp.h</span>
<a href="#l14.7749"></a><span id="l14.7749" class="difflineplus">+  _CONFIG_DEFS_H=mozilla-config.h</span>
<a href="#l14.7750"></a><span id="l14.7750" class="difflineplus">+</span>
<a href="#l14.7751"></a><span id="l14.7751" class="difflineplus">+  cat &gt; $_CONFIG_TMP &lt;&lt;\EOF</span>
<a href="#l14.7752"></a><span id="l14.7752" class="difflineplus">+/* List of defines generated by configure. Included with preprocessor flag,</span>
<a href="#l14.7753"></a><span id="l14.7753" class="difflineplus">+ * -include, to avoid long list of -D defines on the compile command-line.</span>
<a href="#l14.7754"></a><span id="l14.7754" class="difflineplus">+ * Do not edit.</span>
<a href="#l14.7755"></a><span id="l14.7755" class="difflineplus">+ */</span>
<a href="#l14.7756"></a><span id="l14.7756" class="difflineplus">+</span>
<a href="#l14.7757"></a><span id="l14.7757" class="difflineplus">+#ifndef _MOZILLA_CONFIG_H_</span>
<a href="#l14.7758"></a><span id="l14.7758" class="difflineplus">+#define _MOZILLA_CONFIG_H_</span>
<a href="#l14.7759"></a><span id="l14.7759" class="difflineplus">+EOF</span>
<a href="#l14.7760"></a><span id="l14.7760" class="difflineplus">+</span>
<a href="#l14.7761"></a><span id="l14.7761" class="difflineplus">+_EGREP_PATTERN='^#define ('</span>
<a href="#l14.7762"></a><span id="l14.7762" class="difflineplus">+if test -n &quot;$_NON_GLOBAL_ACDEFINES&quot;; then</span>
<a href="#l14.7763"></a><span id="l14.7763" class="difflineplus">+    for f in $_NON_GLOBAL_ACDEFINES; do</span>
<a href="#l14.7764"></a><span id="l14.7764" class="difflineplus">+        _EGREP_PATTERN=&quot;${_EGREP_PATTERN}$f|&quot;</span>
<a href="#l14.7765"></a><span id="l14.7765" class="difflineplus">+    done</span>
<a href="#l14.7766"></a><span id="l14.7766" class="difflineplus">+fi</span>
<a href="#l14.7767"></a><span id="l14.7767" class="difflineplus">+_EGREP_PATTERN=&quot;${_EGREP_PATTERN}dummy_never_defined)&quot;</span>
<a href="#l14.7768"></a><span id="l14.7768" class="difflineplus">+ </span>
<a href="#l14.7769"></a><span id="l14.7769" class="difflineplus">+  sort confdefs.h | egrep -v &quot;$_EGREP_PATTERN&quot; &gt;&gt; $_CONFIG_TMP</span>
<a href="#l14.7770"></a><span id="l14.7770" class="difflineplus">+</span>
<a href="#l14.7771"></a><span id="l14.7771" class="difflineplus">+  cat &gt;&gt; $_CONFIG_TMP &lt;&lt;\EOF</span>
<a href="#l14.7772"></a><span id="l14.7772" class="difflineplus">+</span>
<a href="#l14.7773"></a><span id="l14.7773" class="difflineplus">+#endif /* _MOZILLA_CONFIG_H_ */</span>
<a href="#l14.7774"></a><span id="l14.7774" class="difflineplus">+</span>
<a href="#l14.7775"></a><span id="l14.7775" class="difflineplus">+EOF</span>
<a href="#l14.7776"></a><span id="l14.7776" class="difflineplus">+</span>
<a href="#l14.7777"></a><span id="l14.7777" class="difflineplus">+  # Only write mozilla-config.h when something changes (or it doesn't exist)</span>
<a href="#l14.7778"></a><span id="l14.7778" class="difflineplus">+  if cmp -s $_CONFIG_TMP $_CONFIG_DEFS_H; then</span>
<a href="#l14.7779"></a><span id="l14.7779" class="difflineplus">+    rm $_CONFIG_TMP</span>
<a href="#l14.7780"></a><span id="l14.7780" class="difflineplus">+  else</span>
<a href="#l14.7781"></a><span id="l14.7781" class="difflineplus">+    AC_MSG_RESULT(&quot;creating $_CONFIG_DEFS_H&quot;)</span>
<a href="#l14.7782"></a><span id="l14.7782" class="difflineplus">+    mv -f $_CONFIG_TMP $_CONFIG_DEFS_H</span>
<a href="#l14.7783"></a><span id="l14.7783" class="difflineplus">+</span>
<a href="#l14.7784"></a><span id="l14.7784" class="difflineplus">+    echo ==== $_CONFIG_DEFS_H =================================</span>
<a href="#l14.7785"></a><span id="l14.7785" class="difflineplus">+    cat $_CONFIG_DEFS_H</span>
<a href="#l14.7786"></a><span id="l14.7786" class="difflineplus">+  fi</span>
<a href="#l14.7787"></a><span id="l14.7787" class="difflineplus">+</span>
<a href="#l14.7788"></a><span id="l14.7788" class="difflineplus">+dnl Probably shouldn't call this manually but we always want the output of DEFS</span>
<a href="#l14.7789"></a><span id="l14.7789" class="difflineplus">+rm -f confdefs.h.save</span>
<a href="#l14.7790"></a><span id="l14.7790" class="difflineplus">+mv confdefs.h confdefs.h.save</span>
<a href="#l14.7791"></a><span id="l14.7791" class="difflineplus">+egrep -v &quot;$_EGREP_PATTERN&quot; confdefs.h.save &gt; confdefs.h</span>
<a href="#l14.7792"></a><span id="l14.7792" class="difflineplus">+AC_OUTPUT_MAKE_DEFS()</span>
<a href="#l14.7793"></a><span id="l14.7793" class="difflineplus">+MOZ_DEFINES=$DEFS</span>
<a href="#l14.7794"></a><span id="l14.7794" class="difflineplus">+AC_SUBST(MOZ_DEFINES)</span>
<a href="#l14.7795"></a><span id="l14.7795" class="difflineplus">+rm -f confdefs.h</span>
<a href="#l14.7796"></a><span id="l14.7796" class="difflineplus">+mv confdefs.h.save confdefs.h</span>
<a href="#l14.7797"></a><span id="l14.7797" class="difflineplus">+</span>
<a href="#l14.7798"></a><span id="l14.7798" class="difflineplus">+dnl Load the list of Makefiles to generate.</span>
<a href="#l14.7799"></a><span id="l14.7799" class="difflineplus">+dnl   To add new Makefiles, edit allmakefiles.sh.</span>
<a href="#l14.7800"></a><span id="l14.7800" class="difflineplus">+dnl   allmakefiles.sh sets the variable, MAKEFILES.</span>
<a href="#l14.7801"></a><span id="l14.7801" class="difflineplus">+. ${srcdir}/allmakefiles.sh</span>
<a href="#l14.7802"></a><span id="l14.7802" class="difflineplus">+dnl </span>
<a href="#l14.7803"></a><span id="l14.7803" class="difflineplus">+dnl Run a perl script to quickly create the makefiles.</span>
<a href="#l14.7804"></a><span id="l14.7804" class="difflineplus">+dnl If it succeeds, it outputs a shell command to set CONFIG_FILES</span>
<a href="#l14.7805"></a><span id="l14.7805" class="difflineplus">+dnl   for the files it cannot handle correctly. This way, config.status</span>
<a href="#l14.7806"></a><span id="l14.7806" class="difflineplus">+dnl   will handle these files.</span>
<a href="#l14.7807"></a><span id="l14.7807" class="difflineplus">+dnl If it fails, nothing is set and config.status will run as usual.</span>
<a href="#l14.7808"></a><span id="l14.7808" class="difflineplus">+dnl</span>
<a href="#l14.7809"></a><span id="l14.7809" class="difflineplus">+dnl This does not change the $MAKEFILES variable.</span>
<a href="#l14.7810"></a><span id="l14.7810" class="difflineplus">+dnl</span>
<a href="#l14.7811"></a><span id="l14.7811" class="difflineplus">+dnl OpenVMS gets a line overflow on the long eval command, so use a temp file.</span>
<a href="#l14.7812"></a><span id="l14.7812" class="difflineplus">+dnl</span>
<a href="#l14.7813"></a><span id="l14.7813" class="difflineplus">+if test -z &quot;${AS_PERL}&quot;; then</span>
<a href="#l14.7814"></a><span id="l14.7814" class="difflineplus">+echo $MAKEFILES | ${PERL} $srcdir/mozilla/build/autoconf/acoutput-fast.pl --srcdir=$srcdir &gt; conftest.sh</span>
<a href="#l14.7815"></a><span id="l14.7815" class="difflineplus">+else</span>
<a href="#l14.7816"></a><span id="l14.7816" class="difflineplus">+echo $MAKEFILES | ${PERL} $srcdir/mozilla/build/autoconf/acoutput-fast.pl -nowrap --cygwin-srcdir=$srcdir &gt; conftest.sh</span>
<a href="#l14.7817"></a><span id="l14.7817" class="difflineplus">+fi</span>
<a href="#l14.7818"></a><span id="l14.7818" class="difflineplus">+. ./conftest.sh</span>
<a href="#l14.7819"></a><span id="l14.7819" class="difflineplus">+rm conftest.sh</span>
<a href="#l14.7820"></a><span id="l14.7820" class="difflineplus">+</span>
<a href="#l14.7821"></a><span id="l14.7821" class="difflineplus">+echo $MAKEFILES &gt; unallmakefiles</span>
<a href="#l14.7822"></a><span id="l14.7822" class="difflineplus">+</span>
<a href="#l14.7823"></a><span id="l14.7823" class="difflineplus">+AC_OUTPUT($MAKEFILES)</span>
<a href="#l14.7824"></a><span id="l14.7824" class="difflineplus">+</span>
<a href="#l14.7825"></a><span id="l14.7825" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7826"></a><span id="l14.7826" class="difflineplus">+dnl = Setup a nice relatively clean build environment for</span>
<a href="#l14.7827"></a><span id="l14.7827" class="difflineplus">+dnl = sub-configures.</span>
<a href="#l14.7828"></a><span id="l14.7828" class="difflineplus">+dnl ========================================================</span>
<a href="#l14.7829"></a><span id="l14.7829" class="difflineplus">+CC=&quot;$_SUBDIR_CC&quot; </span>
<a href="#l14.7830"></a><span id="l14.7830" class="difflineplus">+CXX=&quot;$_SUBDIR_CXX&quot; </span>
<a href="#l14.7831"></a><span id="l14.7831" class="difflineplus">+CFLAGS=&quot;$_SUBDIR_CFLAGS&quot; </span>
<a href="#l14.7832"></a><span id="l14.7832" class="difflineplus">+CPPFLAGS=&quot;$_SUBDIR_CPPFLAGS&quot;</span>
<a href="#l14.7833"></a><span id="l14.7833" class="difflineplus">+CXXFLAGS=&quot;$_SUBDIR_CXXFLAGS&quot;</span>
<a href="#l14.7834"></a><span id="l14.7834" class="difflineplus">+LDFLAGS=&quot;$_SUBDIR_LDFLAGS&quot;</span>
<a href="#l14.7835"></a><span id="l14.7835" class="difflineplus">+HOST_CC=&quot;$_SUBDIR_HOST_CC&quot; </span>
<a href="#l14.7836"></a><span id="l14.7836" class="difflineplus">+HOST_CFLAGS=&quot;$_SUBDIR_HOST_CFLAGS&quot;</span>
<a href="#l14.7837"></a><span id="l14.7837" class="difflineplus">+HOST_LDFLAGS=&quot;$_SUBDIR_HOST_LDFLAGS&quot;</span>
<a href="#l14.7838"></a><span id="l14.7838" class="difflineplus">+RC=</span>
<a href="#l14.7839"></a><span id="l14.7839" class="difflineplus">+</span>
<a href="#l14.7840"></a><span id="l14.7840" class="difflineplus">+unset MAKEFILES</span>
<a href="#l14.7841"></a><span id="l14.7841" class="difflineplus">+unset CONFIG_FILES</span>
<a href="#l14.7842"></a><span id="l14.7842" class="difflineplus">+</span>
<a href="#l14.7843"></a><span id="l14.7843" class="difflineplus">+if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l14.7844"></a><span id="l14.7844" class="difflineplus">+# build Mozilla first</span>
<a href="#l14.7845"></a><span id="l14.7845" class="difflineplus">+#</span>
<a href="#l14.7846"></a><span id="l14.7846" class="difflineplus">+# the subdir may not yet have been created in the build tree.</span>
<a href="#l14.7847"></a><span id="l14.7847" class="difflineplus">+#</span>
<a href="#l14.7848"></a><span id="l14.7848" class="difflineplus">+if test ! -d &quot;mozilla&quot;; then</span>
<a href="#l14.7849"></a><span id="l14.7849" class="difflineplus">+    mkdir &quot;mozilla&quot;</span>
<a href="#l14.7850"></a><span id="l14.7850" class="difflineplus">+fi</span>
<a href="#l14.7851"></a><span id="l14.7851" class="difflineplus">+</span>
<a href="#l14.7852"></a><span id="l14.7852" class="difflineplus">+# --enable-application needs to find confvars.sh, build.mk, etc in the gived dir, so add ../</span>
<a href="#l14.7853"></a><span id="l14.7853" class="difflineplus">+# --disable-official-branding disables all checks for official branding, as we're doing this ourselves in our own repo</span>
<a href="#l14.7854"></a><span id="l14.7854" class="difflineplus">+# --disable-calendar turns off mozilla's configure claiming it's not supported</span>
<a href="#l14.7855"></a><span id="l14.7855" class="difflineplus">+ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --enable-application=../$MOZ_BUILD_APP --disable-official-branding --disable-calendar&quot;</span>
<a href="#l14.7856"></a><span id="l14.7856" class="difflineplus">+if test -z &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l14.7857"></a><span id="l14.7857" class="difflineplus">+    ac_configure_args=&quot;$ac_configure_args --disable-debug&quot;</span>
<a href="#l14.7858"></a><span id="l14.7858" class="difflineplus">+fi</span>
<a href="#l14.7859"></a><span id="l14.7859" class="difflineplus">+if test &quot;$MOZ_OPTIMIZE&quot; = &quot;1&quot;; then</span>
<a href="#l14.7860"></a><span id="l14.7860" class="difflineplus">+    ac_configure_args=&quot;$ac_configure_args --enable-optimize&quot;</span>
<a href="#l14.7861"></a><span id="l14.7861" class="difflineplus">+fi</span>
<a href="#l14.7862"></a><span id="l14.7862" class="difflineplus">+if test -n &quot;$HAVE_64BIT_OS&quot;; then</span>
<a href="#l14.7863"></a><span id="l14.7863" class="difflineplus">+    ac_configure_args=&quot;$ac_configure_args --enable-64bit&quot;</span>
<a href="#l14.7864"></a><span id="l14.7864" class="difflineplus">+fi</span>
<a href="#l14.7865"></a><span id="l14.7865" class="difflineplus">+# for Mac universal builds, we need to call the Mozilla configure with MOZ_BUILD_APP=[ppc|i386]</span>
<a href="#l14.7866"></a><span id="l14.7866" class="difflineplus">+MOZ_BUILD_APP_CACHED=&quot;$MOZ_BUILD_APP&quot;</span>
<a href="#l14.7867"></a><span id="l14.7867" class="difflineplus">+if test -n &quot;$MOZ_CURRENT_PROJECT&quot;; then</span>
<a href="#l14.7868"></a><span id="l14.7868" class="difflineplus">+    export MOZ_BUILD_APP=&quot;$MOZ_CURRENT_PROJECT&quot;</span>
<a href="#l14.7869"></a><span id="l14.7869" class="difflineplus">+fi</span>
<a href="#l14.7870"></a><span id="l14.7870" class="difflineplus">+AC_OUTPUT_SUBDIRS(mozilla)</span>
<a href="#l14.7871"></a><span id="l14.7871" class="difflineplus">+ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS&quot;</span>
<a href="#l14.7872"></a><span id="l14.7872" class="difflineplus">+MOZ_BUILD_APP=&quot;$MOZ_BUILD_APP_CACHED&quot;</span>
<a href="#l14.7873"></a><span id="l14.7873" class="difflineplus">+</span>
<a href="#l14.7874"></a><span id="l14.7874" class="difflineplus">+# if we're building the LDAP XPCOM component, we need to build </span>
<a href="#l14.7875"></a><span id="l14.7875" class="difflineplus">+# the c-sdk first.  </span>
<a href="#l14.7876"></a><span id="l14.7876" class="difflineplus">+#</span>
<a href="#l14.7877"></a><span id="l14.7877" class="difflineplus">+if test &quot;$MOZ_LDAP_XPCOM&quot;; then</span>
<a href="#l14.7878"></a><span id="l14.7878" class="difflineplus">+</span>
<a href="#l14.7879"></a><span id="l14.7879" class="difflineplus">+    # these subdirs may not yet have been created in the build tree.</span>
<a href="#l14.7880"></a><span id="l14.7880" class="difflineplus">+    # don't use the &quot;-p&quot; switch to mkdir, since not all platforms have it</span>
<a href="#l14.7881"></a><span id="l14.7881" class="difflineplus">+    #</span>
<a href="#l14.7882"></a><span id="l14.7882" class="difflineplus">+    if test ! -d &quot;directory&quot;; then</span>
<a href="#l14.7883"></a><span id="l14.7883" class="difflineplus">+        mkdir &quot;directory&quot;</span>
<a href="#l14.7884"></a><span id="l14.7884" class="difflineplus">+    fi</span>
<a href="#l14.7885"></a><span id="l14.7885" class="difflineplus">+    if test ! -d &quot;directory/c-sdk&quot;; then</span>
<a href="#l14.7886"></a><span id="l14.7886" class="difflineplus">+        mkdir &quot;directory/c-sdk&quot;</span>
<a href="#l14.7887"></a><span id="l14.7887" class="difflineplus">+    fi</span>
<a href="#l14.7888"></a><span id="l14.7888" class="difflineplus">+    if test ! -d &quot;directory/c-sdk/ldap&quot;; then</span>
<a href="#l14.7889"></a><span id="l14.7889" class="difflineplus">+        mkdir &quot;directory/c-sdk/ldap&quot;</span>
<a href="#l14.7890"></a><span id="l14.7890" class="difflineplus">+    fi</span>
<a href="#l14.7891"></a><span id="l14.7891" class="difflineplus">+</span>
<a href="#l14.7892"></a><span id="l14.7892" class="difflineplus">+    ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS --prefix=$MOZ_BUILD_ROOT/mozilla/dist --with-dist-prefix=$MOZ_BUILD_ROOT/mozilla/dist --without-nss --with-mozilla&quot;</span>
<a href="#l14.7893"></a><span id="l14.7893" class="difflineplus">+    if test -z &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l14.7894"></a><span id="l14.7894" class="difflineplus">+        ac_configure_args=&quot;$ac_configure_args --disable-debug&quot;</span>
<a href="#l14.7895"></a><span id="l14.7895" class="difflineplus">+    fi</span>
<a href="#l14.7896"></a><span id="l14.7896" class="difflineplus">+    if test &quot;$MOZ_OPTIMIZE&quot; = &quot;1&quot;; then</span>
<a href="#l14.7897"></a><span id="l14.7897" class="difflineplus">+        ac_configure_args=&quot;$ac_configure_args --enable-optimize&quot;</span>
<a href="#l14.7898"></a><span id="l14.7898" class="difflineplus">+    fi</span>
<a href="#l14.7899"></a><span id="l14.7899" class="difflineplus">+    if test -n &quot;$HAVE_64BIT_OS&quot;; then</span>
<a href="#l14.7900"></a><span id="l14.7900" class="difflineplus">+        ac_configure_args=&quot;$ac_configure_args --enable-64bit&quot;</span>
<a href="#l14.7901"></a><span id="l14.7901" class="difflineplus">+    fi</span>
<a href="#l14.7902"></a><span id="l14.7902" class="difflineplus">+    AC_OUTPUT_SUBDIRS(directory/c-sdk)</span>
<a href="#l14.7903"></a><span id="l14.7903" class="difflineplus">+    ac_configure_args=&quot;$_SUBDIR_CONFIG_ARGS&quot;</span>
<a href="#l14.7904"></a><span id="l14.7904" class="difflineplus">+fi</span>
<a href="#l14.7905"></a><span id="l14.7905" class="difflineplus">+fi # COMPILE_ENVIRONMENT</span>
<a href="#l14.7906"></a><span id="l14.7906" class="difflineplus">+</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

