<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 2717:3c87898162a34e135e16d06ed8057249bc7a702e</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 3c87898162a34e135e16d06ed8057249bc7a702e" />
<meta property="og:url" content="/comm-central/rev/3c87898162a34e135e16d06ed8057249bc7a702e" />
<meta property="og:description" content="Bug 454829 Summary page for collapsed threads and multiple selections. r=bienvenu" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 3c87898162a34e135e16d06ed8057249bc7a702e 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/3c87898162a34e135e16d06ed8057249bc7a702e">shortlog</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/3c87898162a34e135e16d06ed8057249bc7a702e">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e">files</a> |
changeset |
<a href="/comm-central/raw-rev/3c87898162a34e135e16d06ed8057249bc7a702e">raw</a>  | <a href="/comm-central/archive/3c87898162a34e135e16d06ed8057249bc7a702e.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=454829">Bug 454829</a> Summary page for collapsed threads and multiple selections. r=bienvenu
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#68;&#97;&#118;&#105;&#100;&#32;&#65;&#115;&#99;&#104;&#101;&#114;&#32;&#60;&#100;&#97;&#118;&#105;&#100;&#46;&#97;&#115;&#99;&#104;&#101;&#114;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Thu, 28 May 2009 08:48:37 +0100</td></tr>

<tr>
 <td>changeset 2717</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/3c87898162a34e135e16d06ed8057249bc7a702e">3c87898162a34e135e16d06ed8057249bc7a702e</a></td>
</tr>



<tr>
<td>parent 2716</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/afd0a576e7962a2df2b2453ae72a575247df8011">afd0a576e7962a2df2b2453ae72a575247df8011</a>
</td>
</tr>

<tr>
<td>child 2718</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/2457fbd6cc1f35e2624e8517b076c828cfbe6085">2457fbd6cc1f35e2624e8517b076c828cfbe6085</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=3c87898162a34e135e16d06ed8057249bc7a702e">2205</a></td></tr>
<tr><td>push user</td><td>bugzilla@standard8.plus.com</td></tr>
<tr><td>push date</td><td class="date age">Thu, 28 May 2009 08:42:46 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@3c87898162a3 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3c87898162a34e135e16d06ed8057249bc7a702e">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3c87898162a34e135e16d06ed8057249bc7a702e&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3c87898162a34e135e16d06ed8057249bc7a702e&newProject=comm-central&newRevision=3c87898162a34e135e16d06ed8057249bc7a702e&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3c87898162a34e135e16d06ed8057249bc7a702e&newProject=comm-central&newRevision=3c87898162a34e135e16d06ed8057249bc7a702e&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3c87898162a34e135e16d06ed8057249bc7a702e&newProject=comm-central&newRevision=3c87898162a34e135e16d06ed8057249bc7a702e&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bienvenu%29&revcount=50">bienvenu</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=454829">454829</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=454829">Bug 454829</a> Summary page for collapsed threads and multiple selections. r=bienvenu</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/SearchDialog.js">mail/base/content/SearchDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/SearchDialog.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/SearchDialog.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/SearchDialog.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/SearchDialog.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/SearchDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/mailWindow.js">mail/base/content/mailWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/mailWindow.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/mailWindow.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/mailWindow.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/mailWindow.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/mailWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.js">mail/base/content/messageWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.xul">mail/base/content/messageWindow.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.xul">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.xul">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.xul">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.xul">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messageWindow.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messenger.xul">mail/base/content/messenger.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messenger.xul">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messenger.xul">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messenger.xul">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messenger.xul">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/messenger.xul">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.css">mail/base/content/multimessageview.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.css">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.css">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.css">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.css">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.xhtml">mail/base/content/multimessageview.xhtml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.xhtml">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.xhtml">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.xhtml">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.xhtml">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/multimessageview.xhtml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/selectionsummaries.js">mail/base/content/selectionsummaries.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/selectionsummaries.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/selectionsummaries.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/selectionsummaries.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/selectionsummaries.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/selectionsummaries.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/threadPane.js">mail/base/content/threadPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/threadPane.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/threadPane.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/threadPane.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/threadPane.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/content/threadPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/jar.mn">mail/base/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/jar.mn">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/jar.mn">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/jar.mn">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/jar.mn">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/base/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/messenger.properties">mail/locales/en-US/chrome/messenger/messenger.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/messenger.properties">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/messenger.properties">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/messenger.properties">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/messenger.properties">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/messenger.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.dtd">mail/locales/en-US/chrome/messenger/multimessageview.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.dtd">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.dtd">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.dtd">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.dtd">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.dtd">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.properties">mail/locales/en-US/chrome/messenger/multimessageview.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.properties">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.properties">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.properties">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.properties">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/en-US/chrome/messenger/multimessageview.properties">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/jar.mn">mail/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/jar.mn">mail/themes/gnomestripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/jar.mn">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/jar.mn">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/mail/multimessageview.css">mail/themes/gnomestripe/mail/multimessageview.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/mail/multimessageview.css">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/mail/multimessageview.css">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/mail/multimessageview.css">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/mail/multimessageview.css">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/gnomestripe/mail/multimessageview.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/jar.mn">mail/themes/pinstripe/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/jar.mn">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/jar.mn">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/jar.mn">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/jar.mn">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/mail/multimessageview.css">mail/themes/pinstripe/mail/multimessageview.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/mail/multimessageview.css">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/mail/multimessageview.css">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/mail/multimessageview.css">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/mail/multimessageview.css">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/pinstripe/mail/multimessageview.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/jar.mn">mail/themes/qute/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/jar.mn">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/jar.mn">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/jar.mn">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/jar.mn">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/mail/multimessageview.css">mail/themes/qute/mail/multimessageview.css</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/mail/multimessageview.css">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/mail/multimessageview.css">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/mail/multimessageview.css">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/mail/multimessageview.css">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mail/themes/qute/mail/multimessageview.css">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgDBView.idl">mailnews/base/public/nsIMsgDBView.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgDBView.idl">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgDBView.idl">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgDBView.idl">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgDBView.idl">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgDBView.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgWindow.idl">mailnews/base/public/nsIMsgWindow.idl</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgWindow.idl">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgWindow.idl">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgWindow.idl">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgWindow.idl">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/public/nsIMsgWindow.idl">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/src/nsMsgDBView.cpp">mailnews/base/src/nsMsgDBView.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/src/nsMsgDBView.cpp">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/src/nsMsgDBView.cpp">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/src/nsMsgDBView.cpp">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/src/nsMsgDBView.cpp">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/mailnews/base/src/nsMsgDBView.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/messageWindow.js">suite/mailnews/messageWindow.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/messageWindow.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/messageWindow.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/messageWindow.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/messageWindow.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/messageWindow.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/search/SearchDialog.js">suite/mailnews/search/SearchDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/search/SearchDialog.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/search/SearchDialog.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/search/SearchDialog.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/search/SearchDialog.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/search/SearchDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/threadPane.js">suite/mailnews/threadPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/threadPane.js">file</a> |
<a href="/comm-central/annotate/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/threadPane.js">annotate</a> |
<a href="/comm-central/diff/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/threadPane.js">diff</a> |
<a href="/comm-central/comparison/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/threadPane.js">comparison</a> |
<a href="/comm-central/log/3c87898162a34e135e16d06ed8057249bc7a702e/suite/mailnews/threadPane.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/SearchDialog.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/SearchDialog.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -522,16 +522,18 @@ nsMsgSearchCommandUpdater.prototype =</span>
<a href="#l1.4"></a><span id="l1.4">   {</span>
<a href="#l1.5"></a><span id="l1.5">   },</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7">   updateNextMessageAfterDelete : function()</span>
<a href="#l1.8"></a><span id="l1.8">   {</span>
<a href="#l1.9"></a><span id="l1.9">     SetNextMessageAfterDelete();</span>
<a href="#l1.10"></a><span id="l1.10">   },</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+  summarizeSelection : function() {},</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+</span>
<a href="#l1.14"></a><span id="l1.14">   QueryInterface : function(iid)</span>
<a href="#l1.15"></a><span id="l1.15">   {</span>
<a href="#l1.16"></a><span id="l1.16">     if (iid.equals(Components.interfaces.nsIMsgDBViewCommandUpdater) ||</span>
<a href="#l1.17"></a><span id="l1.17">         iid.equals(Components.interfaces.nsISupports))</span>
<a href="#l1.18"></a><span id="l1.18">       return this;</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20">     throw Components.results.NS_NOINTERFACE;</span>
<a href="#l1.21"></a><span id="l1.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/mailWindow.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/mailWindow.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -47,20 +47,23 @@ var statusFeedback;</span>
<a href="#l2.4"></a><span id="l2.4"> var msgWindow;</span>
<a href="#l2.5"></a><span id="l2.5"> </span>
<a href="#l2.6"></a><span id="l2.6"> var msgComposeService;</span>
<a href="#l2.7"></a><span id="l2.7"> var accountManager;</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> var gMessengerBundle;</span>
<a href="#l2.10"></a><span id="l2.10"> var gBrandBundle;</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-var gContextMenu;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+Components.utils.import(&quot;resource://app/modules/gloda/log4moz.js&quot;);</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15" class="difflineplus">+var gContextMenu;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineplus">+var gMailWindowLog = Log4Moz.getConfiguredLogger(&quot;mailWindow&quot;, Log4Moz.Level.Debug, Log4Moz.Level.Debug, Log4Moz.Level.Debug);</span>
<a href="#l2.17"></a><span id="l2.17"> var gAccountCentralLoaded = true;</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+</span>
<a href="#l2.20"></a><span id="l2.20"> function OnMailWindowUnload()</span>
<a href="#l2.21"></a><span id="l2.21"> {</span>
<a href="#l2.22"></a><span id="l2.22">   MailOfflineMgr.uninit();</span>
<a href="#l2.23"></a><span id="l2.23">   ClearPendingReadTimer();</span>
<a href="#l2.24"></a><span id="l2.24"> </span>
<a href="#l2.25"></a><span id="l2.25">   var searchSession = GetSearchSession();</span>
<a href="#l2.26"></a><span id="l2.26">   if (searchSession)</span>
<a href="#l2.27"></a><span id="l2.27">   {</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineat">@@ -310,16 +313,17 @@ nsMsgStatusFeedback.prototype =</span>
<a href="#l2.29"></a><span id="l2.29">     if (this._meteorsSpinning) {</span>
<a href="#l2.30"></a><span id="l2.30">       // In this function, we expect that the maximum for each progress is 100,</span>
<a href="#l2.31"></a><span id="l2.31">       // i.e. we are dealing with percentages. Hence we can combine several</span>
<a href="#l2.32"></a><span id="l2.32">       // processes running at the same time.</span>
<a href="#l2.33"></a><span id="l2.33">       let currentProgress = 0;</span>
<a href="#l2.34"></a><span id="l2.34">       let progressCount = 0;</span>
<a href="#l2.35"></a><span id="l2.35"> </span>
<a href="#l2.36"></a><span id="l2.36">       // For each activity that is in progress, get its status.</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineplus">+</span>
<a href="#l2.38"></a><span id="l2.38">       this._activeProcesses.forEach(function (element) {</span>
<a href="#l2.39"></a><span id="l2.39">           if (element.state ==</span>
<a href="#l2.40"></a><span id="l2.40">               Components.interfaces.nsIActivityProcess.STATE_INPROGRESS &amp;&amp;</span>
<a href="#l2.41"></a><span id="l2.41">               element.percentComplete != -1) {</span>
<a href="#l2.42"></a><span id="l2.42">             currentProgress += element.percentComplete;</span>
<a href="#l2.43"></a><span id="l2.43">             ++progressCount;</span>
<a href="#l2.44"></a><span id="l2.44">           }</span>
<a href="#l2.45"></a><span id="l2.45">         });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/messageWindow.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/messageWindow.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -180,16 +180,18 @@ nsMsgDBViewCommandUpdater.prototype =</span>
<a href="#l3.4"></a><span id="l3.4">     goUpdateCommand(&quot;button_goForward&quot;);</span>
<a href="#l3.5"></a><span id="l3.5">   },</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">   updateNextMessageAfterDelete : function()</span>
<a href="#l3.8"></a><span id="l3.8">   {</span>
<a href="#l3.9"></a><span id="l3.9">     SetNextMessageAfterDelete();</span>
<a href="#l3.10"></a><span id="l3.10">   },</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+  summarizeSelection : function() {},</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+</span>
<a href="#l3.14"></a><span id="l3.14">   QueryInterface : function(iid)</span>
<a href="#l3.15"></a><span id="l3.15">   {</span>
<a href="#l3.16"></a><span id="l3.16">     if (iid.equals(Components.interfaces.nsIMsgDBViewCommandUpdater) ||</span>
<a href="#l3.17"></a><span id="l3.17">         iid.equals(Components.interfaces.nsISupports))</span>
<a href="#l3.18"></a><span id="l3.18">       return this;</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20">     throw Components.results.NS_NOINTERFACE;</span>
<a href="#l3.21"></a><span id="l3.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/messageWindow.xul</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/messageWindow.xul</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -171,16 +171,22 @@</span>
<a href="#l4.4"></a><span id="l4.4">     &lt;deck id=&quot;msgNotificationBar&quot;/&gt;</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">     &lt;!-- message view --&gt;</span>
<a href="#l4.7"></a><span id="l4.7">     &lt;browser id=&quot;messagepane&quot; context=&quot;mailContext&quot; tooltip=&quot;aHTMLTooltip&quot;</span>
<a href="#l4.8"></a><span id="l4.8">              style=&quot;height: 0px; min-height: 1px&quot; flex=&quot;1&quot; name=&quot;messagepane&quot;</span>
<a href="#l4.9"></a><span id="l4.9">              disablesecurity=&quot;true&quot; disablehistory=&quot;true&quot; type=&quot;content-primary&quot;</span>
<a href="#l4.10"></a><span id="l4.10">              onresize=&quot;return messagePaneOnResize(event);&quot; autofind=&quot;false&quot;</span>
<a href="#l4.11"></a><span id="l4.11">              src=&quot;about:blank&quot; onclick=&quot;return contentAreaClick(event);&quot; /&gt;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineplus">+    &lt;iframe id=&quot;htmlpane&quot;</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+             style=&quot;height: 0px; min-height: 1px&quot; flex=&quot;1&quot; name=&quot;htmlpane&quot;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+             hidden=&quot;true&quot;</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+             disablesecurity=&quot;true&quot; disablehistory=&quot;true&quot;</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+             onresize=&quot;return htmlPaneOnResize(event);&quot; autofind=&quot;false&quot;</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+             src=&quot;about:blank&quot;/&gt;</span>
<a href="#l4.18"></a><span id="l4.18">     &lt;splitter id=&quot;attachment-splitter&quot; collapse=&quot;after&quot; resizebefore=&quot;closest&quot; resizeafter=&quot;closest&quot; collapsed=&quot;true&quot;/&gt;</span>
<a href="#l4.19"></a><span id="l4.19">     &lt;hbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l4.20"></a><span id="l4.20">     &lt;findbar id=&quot;FindToolbar&quot; browserid=&quot;messagepane&quot;/&gt;</span>
<a href="#l4.21"></a><span id="l4.21">   &lt;/vbox&gt;</span>
<a href="#l4.22"></a><span id="l4.22">   &lt;panel id=&quot;customizeToolbarSheetPopup&quot; noautohide=&quot;true&quot;&gt;</span>
<a href="#l4.23"></a><span id="l4.23">     &lt;iframe id=&quot;customizeToolbarSheetIFrame&quot;</span>
<a href="#l4.24"></a><span id="l4.24">             style=&quot;&amp;dialog.style;&quot;</span>
<a href="#l4.25"></a><span id="l4.25"> #ifdef MOZILLA_1_9_1_BRANCH</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/messenger.xul</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/messenger.xul</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -67,24 +67,26 @@</span>
<a href="#l5.4"></a><span id="l5.4">         onunload=&quot;OnUnloadMessenger()&quot;</span>
<a href="#l5.5"></a><span id="l5.5">         screenX=&quot;10&quot; screenY=&quot;10&quot;</span>
<a href="#l5.6"></a><span id="l5.6">         persist=&quot;width height screenX screenY sizemode&quot;</span>
<a href="#l5.7"></a><span id="l5.7">         windowtype=&quot;mail:3pane&quot;&gt;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9"> &lt;stringbundleset id=&quot;stringbundleset&quot;&gt;</span>
<a href="#l5.10"></a><span id="l5.10">   &lt;stringbundle id=&quot;bundle_brand&quot; src=&quot;chrome://branding/locale/brand.properties&quot;/&gt;</span>
<a href="#l5.11"></a><span id="l5.11">   &lt;stringbundle id=&quot;bundle_search&quot; src=&quot;chrome://messenger/locale/search.properties&quot;/&gt;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+  &lt;stringbundle id=&quot;bundle_multimessages&quot; src=&quot;chrome://messenger/locale/multimessageview.properties&quot;/&gt;</span>
<a href="#l5.13"></a><span id="l5.13"> &lt;/stringbundleset&gt;</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15"> &lt;script type=&quot;application/javascript&quot; src=&quot;chrome://global/content/globalOverlay.js&quot;/&gt;</span>
<a href="#l5.16"></a><span id="l5.16"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/widgetglue.js&quot;/&gt;</span>
<a href="#l5.17"></a><span id="l5.17"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/commandglue.js&quot;/&gt;</span>
<a href="#l5.18"></a><span id="l5.18"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/shareglue.js&quot;/&gt;</span>
<a href="#l5.19"></a><span id="l5.19"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/msgViewNavigation.js&quot;/&gt;</span>
<a href="#l5.20"></a><span id="l5.20"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/mailWindow.js&quot;/&gt;</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineplus">+&lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/selectionsummaries.js&quot;/&gt;</span>
<a href="#l5.22"></a><span id="l5.22"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/msgMail3PaneWindow.js&quot;/&gt;</span>
<a href="#l5.23"></a><span id="l5.23"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/specialTabs.js&quot;/&gt;</span>
<a href="#l5.24"></a><span id="l5.24"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/mail3PaneWindowCommands.js&quot;/&gt;</span>
<a href="#l5.25"></a><span id="l5.25"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://global/content/contentAreaUtils.js&quot;/&gt;</span>
<a href="#l5.26"></a><span id="l5.26"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://communicator/content/nsContextMenu.js&quot;/&gt;</span>
<a href="#l5.27"></a><span id="l5.27"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/mailContextMenus.js&quot;/&gt;</span>
<a href="#l5.28"></a><span id="l5.28"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/accountUtils.js&quot;/&gt;</span>
<a href="#l5.29"></a><span id="l5.29"> &lt;script type=&quot;application/x-javascript&quot; src=&quot;chrome://messenger/content/searchBar.js&quot;/&gt;</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineat">@@ -325,28 +327,39 @@</span>
<a href="#l5.31"></a><span id="l5.31">                 &lt;/deck&gt; &lt;!-- displayDeck --&gt;</span>
<a href="#l5.32"></a><span id="l5.32"> </span>
<a href="#l5.33"></a><span id="l5.33">                 &lt;!-- if you change this id, please change GetThreadAndMessagePaneSplitter() and MsgToggleMessagePane() --&gt;</span>
<a href="#l5.34"></a><span id="l5.34">                 &lt;splitter id=&quot;threadpane-splitter&quot; collapse=&quot;after&quot; persist=&quot;state&quot; collapsed=&quot;true&quot;</span>
<a href="#l5.35"></a><span id="l5.35">                           onmouseup=&quot;OnMouseUpThreadAndMessagePaneSplitter()&quot;/&gt;</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37">                 &lt;vbox id=&quot;messagepanebox&quot; flex=&quot;2&quot; minheight=&quot;100&quot; height=&quot;200&quot;</span>
<a href="#l5.38"></a><span id="l5.38">                       minwidth=&quot;100&quot; width=&quot;200&quot; persist=&quot;height width&quot;&gt;</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">-</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-                  &lt;hbox id=&quot;msgHeaderView&quot;/&gt;</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-                  &lt;hbox id=&quot;editMessageBox&quot;/&gt;</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-                  &lt;deck id=&quot;msgNotificationBar&quot;/&gt;</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineminus">-                  &lt;browser id=&quot;messagepane&quot; context=&quot;mailContext&quot; autofind=&quot;false&quot;</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineminus">-                           minheight=&quot;1&quot; flex=&quot;1&quot; name=&quot;messagepane&quot; tooltip=&quot;aHTMLTooltip&quot;</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineminus">-                           disablehistory=&quot;true&quot; type=&quot;content-primary&quot; src=&quot;about:blank&quot;</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineminus">-                           onresize=&quot;return messagePaneOnResize(event);&quot;</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-                           disablesecurity=&quot;true&quot; onclick=&quot;return contentAreaClick(event);&quot;/&gt;</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-                  &lt;splitter id=&quot;attachment-splitter&quot; collapse=&quot;after&quot; resizebefore=&quot;closest&quot; resizeafter=&quot;closest&quot; collapsed=&quot;true&quot;/&gt;</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-                  &lt;hbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-                  &lt;findbar id=&quot;FindToolbar&quot; browserid=&quot;messagepane&quot;/&gt;</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+                  </span>
<a href="#l5.52"></a><span id="l5.52" class="difflineplus">+                  &lt;!-- This next iframe is used to display summaries of --&gt;</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineplus">+                  &lt;!-- multiple selected messages or collapsed threads --&gt;</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineplus">+                  &lt;iframe id=&quot;multimessage&quot;</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineplus">+                           style=&quot;height: 0px; min-height: 1px&quot;</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineplus">+                           flex=&quot;1&quot; name=&quot;multimessage&quot;</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineplus">+                           hidden=&quot;true&quot;</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineplus">+                           disablesecurity=&quot;true&quot; disablehistory=&quot;true&quot;</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineplus">+                           src=&quot;chrome://messenger/content/multimessageview.xhtml&quot;</span>
<a href="#l5.60"></a><span id="l5.60" class="difflineplus">+                           autofind=&quot;false&quot;/&gt;</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineplus">+                  &lt;vbox id=&quot;singlemessage&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineplus">+                    &lt;hbox id=&quot;msgHeaderView&quot;/&gt;</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineplus">+                    &lt;hbox id=&quot;editMessageBox&quot;/&gt;</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineplus">+                    &lt;deck id=&quot;msgNotificationBar&quot;/&gt;</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineplus">+                    &lt;browser id=&quot;messagepane&quot; context=&quot;mailContext&quot; autofind=&quot;false&quot;</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineplus">+                             minheight=&quot;1&quot; flex=&quot;1&quot; name=&quot;messagepane&quot; tooltip=&quot;aHTMLTooltip&quot;</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineplus">+                             disablehistory=&quot;true&quot; type=&quot;content-primary&quot; src=&quot;about:blank&quot;</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineplus">+                             onresize=&quot;return messagePaneOnResize(event);&quot;</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineplus">+                             disablesecurity=&quot;true&quot; onclick=&quot;return contentAreaClick(event);&quot;/&gt;</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+                    &lt;splitter id=&quot;attachment-splitter&quot; collapse=&quot;after&quot; resizebefore=&quot;closest&quot; resizeafter=&quot;closest&quot; collapsed=&quot;true&quot;/&gt;</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineplus">+                    &lt;hbox id=&quot;attachmentView&quot;/&gt;</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineplus">+                    &lt;findbar id=&quot;FindToolbar&quot; browserid=&quot;messagepane&quot;/&gt;</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineplus">+                  &lt;/vbox&gt;</span>
<a href="#l5.74"></a><span id="l5.74">                 &lt;/vbox&gt;</span>
<a href="#l5.75"></a><span id="l5.75">               &lt;/box&gt;</span>
<a href="#l5.76"></a><span id="l5.76">             &lt;/vbox&gt;</span>
<a href="#l5.77"></a><span id="l5.77">           &lt;/box&gt;</span>
<a href="#l5.78"></a><span id="l5.78">         &lt;/box&gt; &lt;!-- end of mailContent --&gt;</span>
<a href="#l5.79"></a><span id="l5.79">       &lt;/tabpanels&gt;</span>
<a href="#l5.80"></a><span id="l5.80">     &lt;/tabmail&gt;</span>
<a href="#l5.81"></a><span id="l5.81">   &lt;/hbox&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/mail/base/content/multimessageview.css</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,301 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+/* Generic (cross-platform) multimessage view CSS.  Some bits will be overriden</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+  by theme specific files */</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+body {</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+  font-family: sans-serif;</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+  margin: 0px;</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+  padding: 1ex 1em;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+}</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+.star {</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+  width: 16px;</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineplus">+  height: 16px;</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineplus">+  display: inline-block;</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+  margin-left: 1ex;</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+}</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineplus">+</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineplus">+#markButton {</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineplus">+  width: 5em;</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineplus">+}</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineplus">+</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineplus">+#multimessageview {</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineplus">+  font-size: small;</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineplus">+}</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineplus">+</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineplus">+#messages {</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineplus">+  -moz-border-radius: 0.4ex;</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineplus">+  border: 1px solid ThreeDShadow;</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineplus">+  padding: 1ex 1em;</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineplus">+  margin: 0px;</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineplus">+  font-size: small;</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineplus">+}</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineplus">+</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineplus">+#messagelist {</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineplus">+  width: 100%;</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineplus">+  display: table;</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineplus">+}</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineplus">+</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineplus">+.message {</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineplus">+  display: table-row;</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineplus">+}</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineplus">+</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineplus">+.message &gt; .header {</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineplus">+  display: table-cell;</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineplus">+  padding: 0.6ex 0px;</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineplus">+}</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineplus">+</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineplus">+.subject {</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineplus">+  display: inline-block;</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineplus">+}</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineplus">+</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineplus">+.sender {</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineplus">+  display: inline-block;</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineplus">+}</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineplus">+</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineplus">+.author {</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineplus">+  display: inline;</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineplus">+  color: grey;</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineplus">+}</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineplus">+</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineplus">+.count, .date {</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineplus">+  display: table-cell;</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineplus">+  padding: 0px 1em;</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineplus">+  white-space: nowrap;</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineplus">+  text-align: right;</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineplus">+  color: InactiveCaptionText;</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineplus">+}</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineplus">+</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineplus">+.wrappedsender, .wrappedsubject {</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineplus">+  padding-right: 18px;</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineplus">+  padding-top: 6px;</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineplus">+}</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineplus">+</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineplus">+.message.unread &gt; .header &gt; .wrappedsubject &gt; .subject,</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineplus">+.unread  .subject_and_author,</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineplus">+.message.unread &gt; .header &gt; .wrappedsender &gt; .sender  {</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineplus">+  font-weight: bold;</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineplus">+}</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineplus">+</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineplus">+.message &gt; .header &gt; .wrappedsender &gt; .sender:hover,</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineplus">+.message &gt; .header &gt; .wrappedsubject &gt; .subject:hover {</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineplus">+  text-decoration: underline;</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineplus">+  cursor: pointer;</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineplus">+}</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineplus">+</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineplus">+.message &gt; .header &gt; .snippet, .message .tags {</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineplus">+  margin-left: 2em;</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineplus">+}</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineplus">+</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineplus">+.message &gt; .header &gt; .snippet {</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineplus">+  color: GrayText;</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineplus">+}</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineplus">+</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineplus">+.message &gt; .header &gt; .senders {</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineplus">+  color: GrayText;</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineplus">+}</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineplus">+</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineplus">+.info {</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineplus">+  font-size: small;</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineplus">+}</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineplus">+</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineplus">+.heading.info {</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineplus">+  font-size: medium;</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineplus">+  font-weight: normal;</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineplus">+}</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineplus">+</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineplus">+.tags {</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineplus">+  padding-top: 2px;</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineplus">+}</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineplus">+</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineplus">+.tag {</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineplus">+  padding: 0.2ex 0.2em;</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineplus">+  margin-right: 0.5em;</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineplus">+  -moz-margin-start: 0px;</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineplus">+  background-image: url(&quot;chrome://messenger/skin/tagbg.png&quot;);</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineplus">+  color: InfoText;</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineplus">+  -moz-border-radius: 2px;</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineplus">+}</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineplus">+</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineplus">+</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineplus">+#buttonbox {</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineplus">+  display: table-cell;</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineplus">+  text-align: right;</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineplus">+  padding-bottom: 1ex;</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineplus">+  font-size: 11px;</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineplus">+  font-family: Lucida Grande;</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineplus">+  border: 1px solid transparent; </span>
<a href="#l6.131"></a><span id="l6.131" class="difflineplus">+}</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineplus">+</span>
<a href="#l6.133"></a><span id="l6.133" class="difflineplus">+#headingwrappertable {</span>
<a href="#l6.134"></a><span id="l6.134" class="difflineplus">+  display: table;</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineplus">+  width: 100%;</span>
<a href="#l6.136"></a><span id="l6.136" class="difflineplus">+}</span>
<a href="#l6.137"></a><span id="l6.137" class="difflineplus">+</span>
<a href="#l6.138"></a><span id="l6.138" class="difflineplus">+#headingwrapper {</span>
<a href="#l6.139"></a><span id="l6.139" class="difflineplus">+  display: table-row;</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineplus">+  margin-bottom: 1em;</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineplus">+  border: 1px solid transparent; </span>
<a href="#l6.142"></a><span id="l6.142" class="difflineplus">+}</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineplus">+</span>
<a href="#l6.144"></a><span id="l6.144" class="difflineplus">+.heading {</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineplus">+  display: table-cell;</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineplus">+  font-weight: bold;</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineplus">+  font-size: medium;</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineplus">+  margin: 0.5em;</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineplus">+  border: 1px solid transparent;</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineplus">+  padding-right: 1em;</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineplus">+}</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineplus">+</span>
<a href="#l6.153"></a><span id="l6.153" class="difflineplus">+</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineplus">+.button {</span>
<a href="#l6.155"></a><span id="l6.155" class="difflineplus">+  display: inline;</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineplus">+}</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineplus">+</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineplus">+#trash {</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineplus">+  min-height: 16px !important;</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineplus">+  min-width: 21px !important;</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineplus">+  padding: 0px;</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineplus">+}</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineplus">+</span>
<a href="#l6.164"></a><span id="l6.164" class="difflineplus">+.hidden {</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineplus">+  display: none;</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineplus">+}</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineplus">+</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineplus">+</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineplus">+#column {</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineplus">+  float: right;</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineplus">+  right: 1em;</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineplus">+  top: 1em;</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineplus">+}</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineplus">+</span>
<a href="#l6.175"></a><span id="l6.175" class="difflineplus">+#foldericon {</span>
<a href="#l6.176"></a><span id="l6.176" class="difflineplus">+  z-index: -1;</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineplus">+  min-width: 128px;</span>
<a href="#l6.178"></a><span id="l6.178" class="difflineplus">+  min-height: 128px;</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineplus">+  background-image: url(&quot;chrome://messenger/skin/icons/largefolder.jpg&quot;); </span>
<a href="#l6.180"></a><span id="l6.180" class="difflineplus">+  background-repeat: no-repeat;</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineplus">+}</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineplus">+</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineplus">+#tagpie {</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineplus">+    display: block;</span>
<a href="#l6.185"></a><span id="l6.185" class="difflineplus">+}</span>
<a href="#l6.186"></a><span id="l6.186" class="difflineplus">+</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineplus">+#tagdots {</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineplus">+    display: block;</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineplus">+    text-align: center;</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineplus">+    padding: 1em;</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineplus">+}</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineplus">+</span>
<a href="#l6.193"></a><span id="l6.193" class="difflineplus">+ .section_heading {</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineplus">+  font-weight: bold;</span>
<a href="#l6.195"></a><span id="l6.195" class="difflineplus">+  padding-bottom: .5em;</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineplus">+  color: #555;</span>
<a href="#l6.197"></a><span id="l6.197" class="difflineplus">+}</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineplus">+</span>
<a href="#l6.199"></a><span id="l6.199" class="difflineplus">+#header {</span>
<a href="#l6.200"></a><span id="l6.200" class="difflineplus">+  border: 1px solid transparent;</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineplus">+}</span>
<a href="#l6.202"></a><span id="l6.202" class="difflineplus">+</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineplus">+.stats {</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineplus">+  padding: 1em;</span>
<a href="#l6.205"></a><span id="l6.205" class="difflineplus">+  padding-top: 3em;</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineplus">+  text-align: center;</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineplus">+  font-size: small;</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineplus">+}</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineplus">+</span>
<a href="#l6.210"></a><span id="l6.210" class="difflineplus">+#mozupdate {</span>
<a href="#l6.211"></a><span id="l6.211" class="difflineplus">+  clear: both;</span>
<a href="#l6.212"></a><span id="l6.212" class="difflineplus">+  -moz-border-radius: 0.4ex;</span>
<a href="#l6.213"></a><span id="l6.213" class="difflineplus">+  border: 1px solid #FFD8B9;</span>
<a href="#l6.214"></a><span id="l6.214" class="difflineplus">+  left: 1em;</span>
<a href="#l6.215"></a><span id="l6.215" class="difflineplus">+  right: 1em;</span>
<a href="#l6.216"></a><span id="l6.216" class="difflineplus">+  padding: 0.5em;</span>
<a href="#l6.217"></a><span id="l6.217" class="difflineplus">+}</span>
<a href="#l6.218"></a><span id="l6.218" class="difflineplus">+</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineplus">+a {</span>
<a href="#l6.220"></a><span id="l6.220" class="difflineplus">+  color: darkblue;</span>
<a href="#l6.221"></a><span id="l6.221" class="difflineplus">+  font-weight: bold;</span>
<a href="#l6.222"></a><span id="l6.222" class="difflineplus">+}</span>
<a href="#l6.223"></a><span id="l6.223" class="difflineplus">+</span>
<a href="#l6.224"></a><span id="l6.224" class="difflineplus">+a:hover {</span>
<a href="#l6.225"></a><span id="l6.225" class="difflineplus">+  text-decoration: underline; </span>
<a href="#l6.226"></a><span id="l6.226" class="difflineplus">+}</span>
<a href="#l6.227"></a><span id="l6.227" class="difflineplus">+</span>
<a href="#l6.228"></a><span id="l6.228" class="difflineplus">+#unread, #authors, #threads, #last_selected_wrapper {</span>
<a href="#l6.229"></a><span id="l6.229" class="difflineplus">+  display: inline-block; </span>
<a href="#l6.230"></a><span id="l6.230" class="difflineplus">+  padding: 1ex 1em;</span>
<a href="#l6.231"></a><span id="l6.231" class="difflineplus">+  margin: 0px;</span>
<a href="#l6.232"></a><span id="l6.232" class="difflineplus">+  margin-right: 1em;</span>
<a href="#l6.233"></a><span id="l6.233" class="difflineplus">+  margin-bottom: 1em;</span>
<a href="#l6.234"></a><span id="l6.234" class="difflineplus">+  font-size: small;</span>
<a href="#l6.235"></a><span id="l6.235" class="difflineplus">+  -moz-border-radius: 0.4ex;</span>
<a href="#l6.236"></a><span id="l6.236" class="difflineplus">+  border: 1px solid ThreeDShadow;</span>
<a href="#l6.237"></a><span id="l6.237" class="difflineplus">+}</span>
<a href="#l6.238"></a><span id="l6.238" class="difflineplus">+</span>
<a href="#l6.239"></a><span id="l6.239" class="difflineplus">+#last_selected_wrapper, #unread {</span>
<a href="#l6.240"></a><span id="l6.240" class="difflineplus">+  min-width: 40em;</span>
<a href="#l6.241"></a><span id="l6.241" class="difflineplus">+}</span>
<a href="#l6.242"></a><span id="l6.242" class="difflineplus">+</span>
<a href="#l6.243"></a><span id="l6.243" class="difflineplus">+#authors, #threads {</span>
<a href="#l6.244"></a><span id="l6.244" class="difflineplus">+  vertical-align: top;</span>
<a href="#l6.245"></a><span id="l6.245" class="difflineplus">+}</span>
<a href="#l6.246"></a><span id="l6.246" class="difflineplus">+</span>
<a href="#l6.247"></a><span id="l6.247" class="difflineplus">+#topten {</span>
<a href="#l6.248"></a><span id="l6.248" class="difflineplus">+  vertical-align: top;</span>
<a href="#l6.249"></a><span id="l6.249" class="difflineplus">+}</span>
<a href="#l6.250"></a><span id="l6.250" class="difflineplus">+</span>
<a href="#l6.251"></a><span id="l6.251" class="difflineplus">+#remotecontent {</span>
<a href="#l6.252"></a><span id="l6.252" class="difflineplus">+  -moz-border-radius: 0.4ex;</span>
<a href="#l6.253"></a><span id="l6.253" class="difflineplus">+  border: 1px solid ThreeDShadow;</span>
<a href="#l6.254"></a><span id="l6.254" class="difflineplus">+  background-color: #fafafa;</span>
<a href="#l6.255"></a><span id="l6.255" class="difflineplus">+  padding: 1ex 1em;</span>
<a href="#l6.256"></a><span id="l6.256" class="difflineplus">+  margin: 0px;</span>
<a href="#l6.257"></a><span id="l6.257" class="difflineplus">+  font-size: smaller;</span>
<a href="#l6.258"></a><span id="l6.258" class="difflineplus">+}</span>
<a href="#l6.259"></a><span id="l6.259" class="difflineplus">+</span>
<a href="#l6.260"></a><span id="l6.260" class="difflineplus">+.messagecount {</span>
<a href="#l6.261"></a><span id="l6.261" class="difflineplus">+  display: inline-block;</span>
<a href="#l6.262"></a><span id="l6.262" class="difflineplus">+  white-space: nowrap;</span>
<a href="#l6.263"></a><span id="l6.263" class="difflineplus">+  overflow: hidden;</span>
<a href="#l6.264"></a><span id="l6.264" class="difflineplus">+}</span>
<a href="#l6.265"></a><span id="l6.265" class="difflineplus">+</span>
<a href="#l6.266"></a><span id="l6.266" class="difflineplus">+.author, .subject {</span>
<a href="#l6.267"></a><span id="l6.267" class="difflineplus">+  display: inline;</span>
<a href="#l6.268"></a><span id="l6.268" class="difflineplus">+  overflow: hidden;</span>
<a href="#l6.269"></a><span id="l6.269" class="difflineplus">+  margin-right: 1em;</span>
<a href="#l6.270"></a><span id="l6.270" class="difflineplus">+}</span>
<a href="#l6.271"></a><span id="l6.271" class="difflineplus">+</span>
<a href="#l6.272"></a><span id="l6.272" class="difflineplus">+.subject_and_author {</span>
<a href="#l6.273"></a><span id="l6.273" class="difflineplus">+  white-space: nowrap;</span>
<a href="#l6.274"></a><span id="l6.274" class="difflineplus">+  overflow: hidden;</span>
<a href="#l6.275"></a><span id="l6.275" class="difflineplus">+  width: 38em;</span>
<a href="#l6.276"></a><span id="l6.276" class="difflineplus">+  margin-right: 1em;</span>
<a href="#l6.277"></a><span id="l6.277" class="difflineplus">+}</span>
<a href="#l6.278"></a><span id="l6.278" class="difflineplus">+</span>
<a href="#l6.279"></a><span id="l6.279" class="difflineplus">+.link:hover {</span>
<a href="#l6.280"></a><span id="l6.280" class="difflineplus">+  text-decoration: underline;</span>
<a href="#l6.281"></a><span id="l6.281" class="difflineplus">+  cursor: pointer;</span>
<a href="#l6.282"></a><span id="l6.282" class="difflineplus">+}</span>
<a href="#l6.283"></a><span id="l6.283" class="difflineplus">+</span>
<a href="#l6.284"></a><span id="l6.284" class="difflineplus">+.sparkline {</span>
<a href="#l6.285"></a><span id="l6.285" class="difflineplus">+  margin-left: .5em;</span>
<a href="#l6.286"></a><span id="l6.286" class="difflineplus">+}</span>
<a href="#l6.287"></a><span id="l6.287" class="difflineplus">+</span>
<a href="#l6.288"></a><span id="l6.288" class="difflineplus">+#last_selected_wrapper {</span>
<a href="#l6.289"></a><span id="l6.289" class="difflineplus">+  border: 1px solid orange;</span>
<a href="#l6.290"></a><span id="l6.290" class="difflineplus">+}</span>
<a href="#l6.291"></a><span id="l6.291" class="difflineplus">+</span>
<a href="#l6.292"></a><span id="l6.292" class="difflineplus">+.last_selected {</span>
<a href="#l6.293"></a><span id="l6.293" class="difflineplus">+  font-weight: normal;</span>
<a href="#l6.294"></a><span id="l6.294" class="difflineplus">+  display: inline;</span>
<a href="#l6.295"></a><span id="l6.295" class="difflineplus">+}</span>
<a href="#l6.296"></a><span id="l6.296" class="difflineplus">+</span>
<a href="#l6.297"></a><span id="l6.297" class="difflineplus">+.hidden {</span>
<a href="#l6.298"></a><span id="l6.298" class="difflineplus">+  visibility: hidden;</span>
<a href="#l6.299"></a><span id="l6.299" class="difflineplus">+  display: none !important; </span>
<a href="#l6.300"></a><span id="l6.300" class="difflineplus">+}</span>
<a href="#l6.301"></a><span id="l6.301" class="difflineplus">+</span>
<a href="#l6.302"></a><span id="l6.302" class="difflineplus">+.histogram {</span>
<a href="#l6.303"></a><span id="l6.303" class="difflineplus">+  display: inline;</span>
<a href="#l6.304"></a><span id="l6.304" class="difflineplus">+  padding-left: 1em;</span>
<a href="#l6.305"></a><span id="l6.305" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">new file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- /dev/null</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ b/mail/base/content/multimessageview.xhtml</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -0,0 +1,90 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineplus">+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineplus">+&lt;?xml-stylesheet href=&quot;chrome://global/skin/&quot; type=&quot;text/css&quot;?&gt;</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineplus">+</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineplus">+&lt;!-- ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineplus">+   - Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineplus">+   -</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineplus">+   - The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+   - 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+   - the License. You may obtain a copy of the License at</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+   - http://www.mozilla.org/MPL/</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+   -</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineplus">+   - Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineplus">+   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+   - for the specific language governing rights and limitations under the</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineplus">+   - License.</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineplus">+   -</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+   - The Original Code is Thunderbird multiple message summary pane.</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+   -</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineplus">+   - The Initial Developer of the Original Code is</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineplus">+   - Mozilla Messaging.</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineplus">+   - Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+   - the Initial Developer. All Rights Reserved.</span>
<a href="#l7.27"></a><span id="l7.27" class="difflineplus">+   -</span>
<a href="#l7.28"></a><span id="l7.28" class="difflineplus">+   - Contributor(s):</span>
<a href="#l7.29"></a><span id="l7.29" class="difflineplus">+   -   David Ascher &lt;dascher@mozillamessaging.com&gt;</span>
<a href="#l7.30"></a><span id="l7.30" class="difflineplus">+   -</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineplus">+   - Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+   - either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineplus">+   - the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineplus">+   - in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineplus">+   - of those above. If you wish to allow use of your version of this file only</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineplus">+   - under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+   - use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+   - decision by deleting the provisions above and replace them with the notice</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+   - and other provisions required by the LGPL or the GPL. If you do not delete</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+   - the provisions above, a recipient may use your version of this file under</span>
<a href="#l7.41"></a><span id="l7.41" class="difflineplus">+   - the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l7.42"></a><span id="l7.42" class="difflineplus">+   -</span>
<a href="#l7.43"></a><span id="l7.43" class="difflineplus">+   - ***** END LICENSE BLOCK ***** --&gt;</span>
<a href="#l7.44"></a><span id="l7.44" class="difflineplus">+</span>
<a href="#l7.45"></a><span id="l7.45" class="difflineplus">+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot;</span>
<a href="#l7.46"></a><span id="l7.46" class="difflineplus">+                      &quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>
<a href="#l7.47"></a><span id="l7.47" class="difflineplus">+  [</span>
<a href="#l7.48"></a><span id="l7.48" class="difflineplus">+  &lt;!ENTITY % brandDTD SYSTEM &quot;chrome://branding/locale/brand.dtd&quot;&gt;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineplus">+  %brandDTD;</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineplus">+  &lt;!ENTITY % globalDTD SYSTEM &quot;chrome://global/locale/global.dtd&quot;&gt;</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+  %globalDTD;</span>
<a href="#l7.52"></a><span id="l7.52" class="difflineplus">+  &lt;!ENTITY % startDTD SYSTEM &quot;chrome://messenger/locale/multimessageview.dtd&quot;&gt;</span>
<a href="#l7.53"></a><span id="l7.53" class="difflineplus">+  %startDTD;</span>
<a href="#l7.54"></a><span id="l7.54" class="difflineplus">+  ]&gt;</span>
<a href="#l7.55"></a><span id="l7.55" class="difflineplus">+</span>
<a href="#l7.56"></a><span id="l7.56" class="difflineplus">+&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l7.57"></a><span id="l7.57" class="difflineplus">+      xmlns:xul=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineplus">+    &lt;head&gt;</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineplus">+        &lt;link rel=&quot;stylesheet&quot; media=&quot;screen&quot; type=&quot;text/css&quot;</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+              href=&quot;chrome://messenger/skin/messageHeader.css&quot;/&gt;</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+        &lt;link rel=&quot;stylesheet&quot; media=&quot;screen&quot; type=&quot;text/css&quot;</span>
<a href="#l7.62"></a><span id="l7.62" class="difflineplus">+              href=&quot;chrome://messenger/skin/multimessageview.css&quot;/&gt;</span>
<a href="#l7.63"></a><span id="l7.63" class="difflineplus">+        &lt;link rel=&quot;stylesheet&quot; media=&quot;screen&quot; type=&quot;text/css&quot;</span>
<a href="#l7.64"></a><span id="l7.64" class="difflineplus">+              href=&quot;chrome://messenger/skin/tagColors.css&quot;/&gt;</span>
<a href="#l7.65"></a><span id="l7.65" class="difflineplus">+        &lt;script type=&quot;application/x-javascript&quot;</span>
<a href="#l7.66"></a><span id="l7.66" class="difflineplus">+                src=&quot;chrome://messenger/content/multimessageview.js&quot;&gt;&lt;/script&gt;</span>
<a href="#l7.67"></a><span id="l7.67" class="difflineplus">+        &lt;title&gt;&amp;window.title;&lt;/title&gt;</span>
<a href="#l7.68"></a><span id="l7.68" class="difflineplus">+    &lt;/head&gt;</span>
<a href="#l7.69"></a><span id="l7.69" class="difflineplus">+&lt;body&gt;</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineplus">+    &lt;div id=&quot;multimessageview&quot;&gt;</span>
<a href="#l7.71"></a><span id="l7.71" class="difflineplus">+        &lt;div id=&quot;headingwrappertable&quot;&gt;</span>
<a href="#l7.72"></a><span id="l7.72" class="difflineplus">+            &lt;div id=&quot;headingwrapper&quot;&gt;</span>
<a href="#l7.73"></a><span id="l7.73" class="difflineplus">+                &lt;div class=&quot;heading&quot; id=&quot;heading&quot;&gt;&amp;selectedmessages.label;&lt;/div&gt;</span>
<a href="#l7.74"></a><span id="l7.74" class="difflineplus">+                &lt;div id=&quot;buttonbox&quot;</span>
<a href="#l7.75"></a><span id="l7.75" class="difflineplus">+                     xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;</span>
<a href="#l7.76"></a><span id="l7.76" class="difflineplus">+                     xmlns=&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;&gt;</span>
<a href="#l7.77"></a><span id="l7.77" class="difflineplus">+                    &lt;hbox id=&quot;buttonhbox&quot; align=&quot;start&quot;&gt;</span>
<a href="#l7.78"></a><span id="l7.78" class="difflineplus">+                        &lt;button id=&quot;archive&quot; class=&quot;multimessage button&quot;</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineplus">+                                onclick=&quot;window.top.MsgArchiveSelectedMessages(null)&quot;&gt;&amp;archive.label;&lt;/button&gt;</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+                        &lt;button id=&quot;trash&quot; class=&quot;multimessage button trashButton&quot;</span>
<a href="#l7.81"></a><span id="l7.81" class="difflineplus">+                                onclick=&quot;window.top.DefaultController.doCommand('cmd_delete');&quot;/&gt;</span>
<a href="#l7.82"></a><span id="l7.82" class="difflineplus">+                    &lt;/hbox&gt;</span>
<a href="#l7.83"></a><span id="l7.83" class="difflineplus">+                &lt;/div&gt;</span>
<a href="#l7.84"></a><span id="l7.84" class="difflineplus">+            &lt;/div&gt;</span>
<a href="#l7.85"></a><span id="l7.85" class="difflineplus">+        &lt;/div&gt;</span>
<a href="#l7.86"></a><span id="l7.86" class="difflineplus">+        &lt;div id=&quot;messages&quot;&gt;</span>
<a href="#l7.87"></a><span id="l7.87" class="difflineplus">+            &lt;div id=&quot;messagelist&quot;/&gt;</span>
<a href="#l7.88"></a><span id="l7.88" class="difflineplus">+            &lt;p&gt;</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineplus">+                &lt;span class=&quot;info&quot; id=&quot;size&quot;&gt;&lt;/span&gt; &lt;span class=&quot;info&quot; id=&quot;notice&quot;&gt;&lt;/span&gt;</span>
<a href="#l7.90"></a><span id="l7.90" class="difflineplus">+            &lt;/p&gt;</span>
<a href="#l7.91"></a><span id="l7.91" class="difflineplus">+        &lt;/div&gt;</span>
<a href="#l7.92"></a><span id="l7.92" class="difflineplus">+    &lt;/div&gt;</span>
<a href="#l7.93"></a><span id="l7.93" class="difflineplus">+&lt;/body&gt;</span>
<a href="#l7.94"></a><span id="l7.94" class="difflineplus">+&lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">new file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- /dev/null</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ b/mail/base/content/selectionsummaries.js</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -0,0 +1,759 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineplus">+ *</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineplus">+ *</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineplus">+ * License.</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineplus">+ *</span>
<a href="#l8.18"></a><span id="l8.18" class="difflineplus">+ * The Original Code is multiple message preview pane</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineplus">+ *</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+ *   Mozilla Messaging</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2009</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineplus">+ *</span>
<a href="#l8.25"></a><span id="l8.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineplus">+ *   David Ascher &lt;dascher@mozillamessaging.com&gt;</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineplus">+ *</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l8.38"></a><span id="l8.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l8.39"></a><span id="l8.39" class="difflineplus">+ *</span>
<a href="#l8.40"></a><span id="l8.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineplus">+</span>
<a href="#l8.42"></a><span id="l8.42" class="difflineplus">+</span>
<a href="#l8.43"></a><span id="l8.43" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/DownloadUtils.jsm&quot;);</span>
<a href="#l8.44"></a><span id="l8.44" class="difflineplus">+Components.utils.import(&quot;resource://gre/modules/PluralForm.jsm&quot;);</span>
<a href="#l8.45"></a><span id="l8.45" class="difflineplus">+Components.utils.import(&quot;resource://app/modules/gloda/mimemsg.js&quot;);</span>
<a href="#l8.46"></a><span id="l8.46" class="difflineplus">+</span>
<a href="#l8.47"></a><span id="l8.47" class="difflineplus">+let gSelectionSummaryStrings = {</span>
<a href="#l8.48"></a><span id="l8.48" class="difflineplus">+  selectedNMessages: &quot;selectedNMessages&quot;,</span>
<a href="#l8.49"></a><span id="l8.49" class="difflineplus">+  acrossNThreads: &quot;acrossNThreads&quot;,</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineplus">+  numMsgs: &quot;numMsgs&quot;,</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+  countUnread: &quot;countUnread&quot;,</span>
<a href="#l8.52"></a><span id="l8.52" class="difflineplus">+  Nmessages: &quot;Nmessages&quot;,</span>
<a href="#l8.53"></a><span id="l8.53" class="difflineplus">+  messagesSize: &quot;messagesSize&quot;,</span>
<a href="#l8.54"></a><span id="l8.54" class="difflineplus">+  yesterday: &quot;yesterday&quot;,</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineplus">+  noticeText: &quot;noticeText&quot;,</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineplus">+  noSubject: &quot;noSubject&quot;,</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineplus">+}</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+/**</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+ * loadSelectionSummaryStrings does the routine localization of non-pluralized</span>
<a href="#l8.61"></a><span id="l8.61" class="difflineplus">+ * strings, populating the gSelectionSummaryStrings array based on the current</span>
<a href="#l8.62"></a><span id="l8.62" class="difflineplus">+ * locale.</span>
<a href="#l8.63"></a><span id="l8.63" class="difflineplus">+ */</span>
<a href="#l8.64"></a><span id="l8.64" class="difflineplus">+function loadSelectionSummaryStrings()</span>
<a href="#l8.65"></a><span id="l8.65" class="difflineplus">+{</span>
<a href="#l8.66"></a><span id="l8.66" class="difflineplus">+  // convert strings to those in the string bundle</span>
<a href="#l8.67"></a><span id="l8.67" class="difflineplus">+  let getStr = function(string) document.getElementById(&quot;bundle_multimessages&quot;).getString(string);</span>
<a href="#l8.68"></a><span id="l8.68" class="difflineplus">+  var strBundleService = Components.classes[&quot;@mozilla.org/intl/stringbundle;1&quot;].getService();</span>
<a href="#l8.69"></a><span id="l8.69" class="difflineplus">+  strBundleService = strBundleService.QueryInterface(Components.interfaces.nsIStringBundleService);</span>
<a href="#l8.70"></a><span id="l8.70" class="difflineplus">+    for (let [name, value] in Iterator(gSelectionSummaryStrings))</span>
<a href="#l8.71"></a><span id="l8.71" class="difflineplus">+      gSelectionSummaryStrings[name] = typeof value == &quot;string&quot; ?</span>
<a href="#l8.72"></a><span id="l8.72" class="difflineplus">+        getStr(value) : value.map(gSelectionSummaryStrings);</span>
<a href="#l8.73"></a><span id="l8.73" class="difflineplus">+}</span>
<a href="#l8.74"></a><span id="l8.74" class="difflineplus">+</span>
<a href="#l8.75"></a><span id="l8.75" class="difflineplus">+loadSelectionSummaryStrings();</span>
<a href="#l8.76"></a><span id="l8.76" class="difflineplus">+</span>
<a href="#l8.77"></a><span id="l8.77" class="difflineplus">+/**</span>
<a href="#l8.78"></a><span id="l8.78" class="difflineplus">+ * pickMessagePane is the toggle to figure out whether to use the standard</span>
<a href="#l8.79"></a><span id="l8.79" class="difflineplus">+ * message pane used to display message bodies (&amp; headers), or whether to</span>
<a href="#l8.80"></a><span id="l8.80" class="difflineplus">+ * display an HTML iframe used for the multiple message summaries.</span>
<a href="#l8.81"></a><span id="l8.81" class="difflineplus">+ *</span>
<a href="#l8.82"></a><span id="l8.82" class="difflineplus">+ * @param visiblePaneId</span>
<a href="#l8.83"></a><span id="l8.83" class="difflineplus">+ *        the ID of the pane that we want to make be the visible one.</span>
<a href="#l8.84"></a><span id="l8.84" class="difflineplus">+ * @return the DOM element corresponding to the selected pane.</span>
<a href="#l8.85"></a><span id="l8.85" class="difflineplus">+ *</span>
<a href="#l8.86"></a><span id="l8.86" class="difflineplus">+ */</span>
<a href="#l8.87"></a><span id="l8.87" class="difflineplus">+function pickMessagePane(visiblePaneId)</span>
<a href="#l8.88"></a><span id="l8.88" class="difflineplus">+{</span>
<a href="#l8.89"></a><span id="l8.89" class="difflineplus">+  var paneIds = ['singlemessage', 'multimessage'];</span>
<a href="#l8.90"></a><span id="l8.90" class="difflineplus">+  // when we want to do folder and account summaries, we just need to add</span>
<a href="#l8.91"></a><span id="l8.91" class="difflineplus">+  // XUL elements for them, and add them to this list.</span>
<a href="#l8.92"></a><span id="l8.92" class="difflineplus">+  //               'foldersummary', 'accountsummary'];</span>
<a href="#l8.93"></a><span id="l8.93" class="difflineplus">+  for (let [,paneId] in Iterator(paneIds))</span>
<a href="#l8.94"></a><span id="l8.94" class="difflineplus">+    document.getElementById(paneId).hidden = paneId != visiblePaneId;</span>
<a href="#l8.95"></a><span id="l8.95" class="difflineplus">+</span>
<a href="#l8.96"></a><span id="l8.96" class="difflineplus">+  return document.getElementById(visiblePaneId);</span>
<a href="#l8.97"></a><span id="l8.97" class="difflineplus">+}</span>
<a href="#l8.98"></a><span id="l8.98" class="difflineplus">+</span>
<a href="#l8.99"></a><span id="l8.99" class="difflineplus">+// Ah, wouldn't it be nice if there was platform code to do the following...</span>
<a href="#l8.100"></a><span id="l8.100" class="difflineplus">+</span>
<a href="#l8.101"></a><span id="l8.101" class="difflineplus">+/**</span>
<a href="#l8.102"></a><span id="l8.102" class="difflineplus">+ * the equivalent of jQuery's addClass.  Avoids duplicates, nothing fancy.</span>
<a href="#l8.103"></a><span id="l8.103" class="difflineplus">+ *</span>
<a href="#l8.104"></a><span id="l8.104" class="difflineplus">+ * @param node</span>
<a href="#l8.105"></a><span id="l8.105" class="difflineplus">+ *        any old DOM node</span>
<a href="#l8.106"></a><span id="l8.106" class="difflineplus">+ * @param classname</span>
<a href="#l8.107"></a><span id="l8.107" class="difflineplus">+ *        a string, which will be added as a CSS class</span>
<a href="#l8.108"></a><span id="l8.108" class="difflineplus">+ */</span>
<a href="#l8.109"></a><span id="l8.109" class="difflineplus">+function _mm_addClass(node, classname)</span>
<a href="#l8.110"></a><span id="l8.110" class="difflineplus">+{</span>
<a href="#l8.111"></a><span id="l8.111" class="difflineplus">+  let classes = [];</span>
<a href="#l8.112"></a><span id="l8.112" class="difflineplus">+  if (node.hasAttribute('class'))</span>
<a href="#l8.113"></a><span id="l8.113" class="difflineplus">+    classes = node.getAttribute('class').split(' ');</span>
<a href="#l8.114"></a><span id="l8.114" class="difflineplus">+</span>
<a href="#l8.115"></a><span id="l8.115" class="difflineplus">+  for each (klass in classes) {</span>
<a href="#l8.116"></a><span id="l8.116" class="difflineplus">+    if (klass == classname) // already have it</span>
<a href="#l8.117"></a><span id="l8.117" class="difflineplus">+      return;</span>
<a href="#l8.118"></a><span id="l8.118" class="difflineplus">+  }</span>
<a href="#l8.119"></a><span id="l8.119" class="difflineplus">+  classes.push(classname);</span>
<a href="#l8.120"></a><span id="l8.120" class="difflineplus">+  node.setAttribute('class', classes.join(' '));</span>
<a href="#l8.121"></a><span id="l8.121" class="difflineplus">+}</span>
<a href="#l8.122"></a><span id="l8.122" class="difflineplus">+</span>
<a href="#l8.123"></a><span id="l8.123" class="difflineplus">+/**</span>
<a href="#l8.124"></a><span id="l8.124" class="difflineplus">+ * the equivalent of jQuery's removeClass.  Doesn't freak if the class name</span>
<a href="#l8.125"></a><span id="l8.125" class="difflineplus">+ * isn't in the class attribute.</span>
<a href="#l8.126"></a><span id="l8.126" class="difflineplus">+ *</span>
<a href="#l8.127"></a><span id="l8.127" class="difflineplus">+ * @param node</span>
<a href="#l8.128"></a><span id="l8.128" class="difflineplus">+ *        any old DOM node</span>
<a href="#l8.129"></a><span id="l8.129" class="difflineplus">+ * @param classname</span>
<a href="#l8.130"></a><span id="l8.130" class="difflineplus">+ *        a string, which will be removed from the class set.</span>
<a href="#l8.131"></a><span id="l8.131" class="difflineplus">+ */</span>
<a href="#l8.132"></a><span id="l8.132" class="difflineplus">+function _mm_removeClass(node, classname)</span>
<a href="#l8.133"></a><span id="l8.133" class="difflineplus">+{</span>
<a href="#l8.134"></a><span id="l8.134" class="difflineplus">+  if (! node.hasAttribute('class'))</span>
<a href="#l8.135"></a><span id="l8.135" class="difflineplus">+    return;</span>
<a href="#l8.136"></a><span id="l8.136" class="difflineplus">+  let classes = node.getAttribute('class').split(' ');</span>
<a href="#l8.137"></a><span id="l8.137" class="difflineplus">+  let newclasses = [];</span>
<a href="#l8.138"></a><span id="l8.138" class="difflineplus">+  for each (klass in classes) {</span>
<a href="#l8.139"></a><span id="l8.139" class="difflineplus">+    if (klass != classname)</span>
<a href="#l8.140"></a><span id="l8.140" class="difflineplus">+      newclasses.push(klass);</span>
<a href="#l8.141"></a><span id="l8.141" class="difflineplus">+  }</span>
<a href="#l8.142"></a><span id="l8.142" class="difflineplus">+  node.setAttribute('class', newclasses.join(' '));</span>
<a href="#l8.143"></a><span id="l8.143" class="difflineplus">+}</span>
<a href="#l8.144"></a><span id="l8.144" class="difflineplus">+</span>
<a href="#l8.145"></a><span id="l8.145" class="difflineplus">+</span>
<a href="#l8.146"></a><span id="l8.146" class="difflineplus">+/**</span>
<a href="#l8.147"></a><span id="l8.147" class="difflineplus">+ * the MultiMessageSummary class is responsible for populating the message pane</span>
<a href="#l8.148"></a><span id="l8.148" class="difflineplus">+ * with a reasonable summary of a set of messages that span more than one</span>
<a href="#l8.149"></a><span id="l8.149" class="difflineplus">+ * thread.</span>
<a href="#l8.150"></a><span id="l8.150" class="difflineplus">+ *</span>
<a href="#l8.151"></a><span id="l8.151" class="difflineplus">+ * It uses the same multimessage iframe as ThreadSummary, so both it</span>
<a href="#l8.152"></a><span id="l8.152" class="difflineplus">+ * and ThreadSummary should be careful to clean up the other's work</span>
<a href="#l8.153"></a><span id="l8.153" class="difflineplus">+ * before inserting their DOM nodes into the frame.</span>
<a href="#l8.154"></a><span id="l8.154" class="difflineplus">+ *</span>
<a href="#l8.155"></a><span id="l8.155" class="difflineplus">+ * There's a two phase process: build the framework based on what's available</span>
<a href="#l8.156"></a><span id="l8.156" class="difflineplus">+ * from the msgHdr itself, and then spawn an aysnc Gloda query which will</span>
<a href="#l8.157"></a><span id="l8.157" class="difflineplus">+ * fetch the snippets, tags, etc.</span>
<a href="#l8.158"></a><span id="l8.158" class="difflineplus">+ *</span>
<a href="#l8.159"></a><span id="l8.159" class="difflineplus">+ * @param msgURIs</span>
<a href="#l8.160"></a><span id="l8.160" class="difflineplus">+ *        array of message URIs</span>
<a href="#l8.161"></a><span id="l8.161" class="difflineplus">+ */</span>
<a href="#l8.162"></a><span id="l8.162" class="difflineplus">+</span>
<a href="#l8.163"></a><span id="l8.163" class="difflineplus">+function MultiMessageSummary(msgURIs) {</span>
<a href="#l8.164"></a><span id="l8.164" class="difflineplus">+  this._msgURIs = msgURIs;</span>
<a href="#l8.165"></a><span id="l8.165" class="difflineplus">+}</span>
<a href="#l8.166"></a><span id="l8.166" class="difflineplus">+</span>
<a href="#l8.167"></a><span id="l8.167" class="difflineplus">+MultiMessageSummary.prototype = {</span>
<a href="#l8.168"></a><span id="l8.168" class="difflineplus">+  init: function() {</span>
<a href="#l8.169"></a><span id="l8.169" class="difflineplus">+    this._msgHdrs = new Array();</span>
<a href="#l8.170"></a><span id="l8.170" class="difflineplus">+    this._glodaQueries = [];</span>
<a href="#l8.171"></a><span id="l8.171" class="difflineplus">+    this._headerNodes = {};</span>
<a href="#l8.172"></a><span id="l8.172" class="difflineplus">+    this._snippetNodes = {};</span>
<a href="#l8.173"></a><span id="l8.173" class="difflineplus">+    this._tagsNodes = {};</span>
<a href="#l8.174"></a><span id="l8.174" class="difflineplus">+    for (var i = 0; i &lt; this._msgURIs.length; ++i)</span>
<a href="#l8.175"></a><span id="l8.175" class="difflineplus">+      this._msgHdrs.push(messenger.msgHdrFromURI(this._msgURIs[i]));</span>
<a href="#l8.176"></a><span id="l8.176" class="difflineplus">+</span>
<a href="#l8.177"></a><span id="l8.177" class="difflineplus">+    this.summarize();</span>
<a href="#l8.178"></a><span id="l8.178" class="difflineplus">+  },</span>
<a href="#l8.179"></a><span id="l8.179" class="difflineplus">+</span>
<a href="#l8.180"></a><span id="l8.180" class="difflineplus">+  /**</span>
<a href="#l8.181"></a><span id="l8.181" class="difflineplus">+   * Given a name (as one sees in email headers), strip eventual</span>
<a href="#l8.182"></a><span id="l8.182" class="difflineplus">+   * leading/trailing quotes (both single and double).</span>
<a href="#l8.183"></a><span id="l8.183" class="difflineplus">+   *</span>
<a href="#l8.184"></a><span id="l8.184" class="difflineplus">+   * @param senderName</span>
<a href="#l8.185"></a><span id="l8.185" class="difflineplus">+   *     name which might be quoted</span>
<a href="#l8.186"></a><span id="l8.186" class="difflineplus">+   * @return</span>
<a href="#l8.187"></a><span id="l8.187" class="difflineplus">+   *     name without quotes</span>
<a href="#l8.188"></a><span id="l8.188" class="difflineplus">+   **/</span>
<a href="#l8.189"></a><span id="l8.189" class="difflineplus">+  stripQuotes: function(senderName) {</span>
<a href="#l8.190"></a><span id="l8.190" class="difflineplus">+    if ((senderName[0] == &quot;'&quot; &amp;&amp; senderName[senderName.length-1] == &quot;'&quot;) ||</span>
<a href="#l8.191"></a><span id="l8.191" class="difflineplus">+        (senderName[0] == '&quot;' &amp;&amp; senderName[senderName.length-1] == '&quot;'))</span>
<a href="#l8.192"></a><span id="l8.192" class="difflineplus">+      senderName = senderName.slice(1, -1);</span>
<a href="#l8.193"></a><span id="l8.193" class="difflineplus">+    return senderName;</span>
<a href="#l8.194"></a><span id="l8.194" class="difflineplus">+  },</span>
<a href="#l8.195"></a><span id="l8.195" class="difflineplus">+</span>
<a href="#l8.196"></a><span id="l8.196" class="difflineplus">+  /**</span>
<a href="#l8.197"></a><span id="l8.197" class="difflineplus">+   * Fill in the summary pane describing the selected messages</span>
<a href="#l8.198"></a><span id="l8.198" class="difflineplus">+   **/</span>
<a href="#l8.199"></a><span id="l8.199" class="difflineplus">+  summarize: function() {</span>
<a href="#l8.200"></a><span id="l8.200" class="difflineplus">+    let htmlpane = pickMessagePane('multimessage');</span>
<a href="#l8.201"></a><span id="l8.201" class="difflineplus">+    // First, we group the messages in threads.</span>
<a href="#l8.202"></a><span id="l8.202" class="difflineplus">+    // count threads</span>
<a href="#l8.203"></a><span id="l8.203" class="difflineplus">+    let threads = {};</span>
<a href="#l8.204"></a><span id="l8.204" class="difflineplus">+    let numThreads = 0;</span>
<a href="#l8.205"></a><span id="l8.205" class="difflineplus">+    for (let [,msgHdr] in Iterator(this._msgHdrs))</span>
<a href="#l8.206"></a><span id="l8.206" class="difflineplus">+    {</span>
<a href="#l8.207"></a><span id="l8.207" class="difflineplus">+      if (! threads[msgHdr.threadId]) {</span>
<a href="#l8.208"></a><span id="l8.208" class="difflineplus">+        threads[msgHdr.threadId] = [msgHdr];</span>
<a href="#l8.209"></a><span id="l8.209" class="difflineplus">+        numThreads += 1;</span>
<a href="#l8.210"></a><span id="l8.210" class="difflineplus">+      }</span>
<a href="#l8.211"></a><span id="l8.211" class="difflineplus">+      else</span>
<a href="#l8.212"></a><span id="l8.212" class="difflineplus">+      {</span>
<a href="#l8.213"></a><span id="l8.213" class="difflineplus">+        threads[msgHdr.threadId].push(msgHdr);</span>
<a href="#l8.214"></a><span id="l8.214" class="difflineplus">+      }</span>
<a href="#l8.215"></a><span id="l8.215" class="difflineplus">+    }</span>
<a href="#l8.216"></a><span id="l8.216" class="difflineplus">+</span>
<a href="#l8.217"></a><span id="l8.217" class="difflineplus">+    // set the heading based on the number of messages &amp; threads</span>
<a href="#l8.218"></a><span id="l8.218" class="difflineplus">+    let heading = htmlpane.contentDocument.getElementById('heading');</span>
<a href="#l8.219"></a><span id="l8.219" class="difflineplus">+    _mm_addClass(heading, &quot;heading&quot;);</span>
<a href="#l8.220"></a><span id="l8.220" class="difflineplus">+    _mm_addClass(heading, &quot;info&quot;);</span>
<a href="#l8.221"></a><span id="l8.221" class="difflineplus">+</span>
<a href="#l8.222"></a><span id="l8.222" class="difflineplus">+    let numMessages = this._msgURIs.length;</span>
<a href="#l8.223"></a><span id="l8.223" class="difflineplus">+    let messagesTitle = PluralForm.get(numMessages, gSelectionSummaryStrings[&quot;selectedNMessages&quot;]).replace('#1', numMessages);</span>
<a href="#l8.224"></a><span id="l8.224" class="difflineplus">+    messagesTitle +=  PluralForm.get(numThreads, gSelectionSummaryStrings[&quot;acrossNThreads&quot;]).replace('#1', numThreads);</span>
<a href="#l8.225"></a><span id="l8.225" class="difflineplus">+</span>
<a href="#l8.226"></a><span id="l8.226" class="difflineplus">+    heading.innerHTML = messagesTitle;</span>
<a href="#l8.227"></a><span id="l8.227" class="difflineplus">+</span>
<a href="#l8.228"></a><span id="l8.228" class="difflineplus">+    // clear the messages list</span>
<a href="#l8.229"></a><span id="l8.229" class="difflineplus">+    let messagesElt = htmlpane.contentDocument.getElementById('messagelist');</span>
<a href="#l8.230"></a><span id="l8.230" class="difflineplus">+    while (messagesElt.firstChild)</span>
<a href="#l8.231"></a><span id="l8.231" class="difflineplus">+      messagesElt.removeChild(messagesElt.firstChild);</span>
<a href="#l8.232"></a><span id="l8.232" class="difflineplus">+</span>
<a href="#l8.233"></a><span id="l8.233" class="difflineplus">+    let MAXCOUNT = 100;</span>
<a href="#l8.234"></a><span id="l8.234" class="difflineplus">+    let count = 0;</span>
<a href="#l8.235"></a><span id="l8.235" class="difflineplus">+    let maxCountExceeded = false;</span>
<a href="#l8.236"></a><span id="l8.236" class="difflineplus">+    // we could consider sorting differently someday</span>
<a href="#l8.237"></a><span id="l8.237" class="difflineplus">+    for (let [thread,msgs] in Iterator(threads))</span>
<a href="#l8.238"></a><span id="l8.238" class="difflineplus">+    {</span>
<a href="#l8.239"></a><span id="l8.239" class="difflineplus">+      count += 1;</span>
<a href="#l8.240"></a><span id="l8.240" class="difflineplus">+      if (count &gt; MAXCOUNT) {</span>
<a href="#l8.241"></a><span id="l8.241" class="difflineplus">+        maxCountExceeded = true;</span>
<a href="#l8.242"></a><span id="l8.242" class="difflineplus">+        break;</span>
<a href="#l8.243"></a><span id="l8.243" class="difflineplus">+      }</span>
<a href="#l8.244"></a><span id="l8.244" class="difflineplus">+      let countUnread = 0;</span>
<a href="#l8.245"></a><span id="l8.245" class="difflineplus">+      let countStarred = 0;</span>
<a href="#l8.246"></a><span id="l8.246" class="difflineplus">+      let header, subject, tags, countNode;</span>
<a href="#l8.247"></a><span id="l8.247" class="difflineplus">+      let msg = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.248"></a><span id="l8.248" class="difflineplus">+      _mm_addClass(msg, &quot;message&quot;);</span>
<a href="#l8.249"></a><span id="l8.249" class="difflineplus">+      // we'll mark the thread unread if any messages in it are unread</span>
<a href="#l8.250"></a><span id="l8.250" class="difflineplus">+</span>
<a href="#l8.251"></a><span id="l8.251" class="difflineplus">+      for (let [, msgHdr] in Iterator(msgs)) {</span>
<a href="#l8.252"></a><span id="l8.252" class="difflineplus">+        if (! msgHdr.isRead)</span>
<a href="#l8.253"></a><span id="l8.253" class="difflineplus">+          countUnread += 1;</span>
<a href="#l8.254"></a><span id="l8.254" class="difflineplus">+        if (msgHdr.isFlagged)</span>
<a href="#l8.255"></a><span id="l8.255" class="difflineplus">+          countStarred += 1;</span>
<a href="#l8.256"></a><span id="l8.256" class="difflineplus">+      }</span>
<a href="#l8.257"></a><span id="l8.257" class="difflineplus">+</span>
<a href="#l8.258"></a><span id="l8.258" class="difflineplus">+      if (countUnread)</span>
<a href="#l8.259"></a><span id="l8.259" class="difflineplus">+        _mm_addClass(msg, 'unread');</span>
<a href="#l8.260"></a><span id="l8.260" class="difflineplus">+</span>
<a href="#l8.261"></a><span id="l8.261" class="difflineplus">+      header = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.262"></a><span id="l8.262" class="difflineplus">+      _mm_addClass(header, &quot;header&quot;);</span>
<a href="#l8.263"></a><span id="l8.263" class="difflineplus">+</span>
<a href="#l8.264"></a><span id="l8.264" class="difflineplus">+      if (countStarred) {</span>
<a href="#l8.265"></a><span id="l8.265" class="difflineplus">+        _mm_addClass(msg, &quot;starred&quot;);</span>
<a href="#l8.266"></a><span id="l8.266" class="difflineplus">+      }</span>
<a href="#l8.267"></a><span id="l8.267" class="difflineplus">+</span>
<a href="#l8.268"></a><span id="l8.268" class="difflineplus">+      let subjectText = msgs[0].mime2DecodedSubject || gSelectionSummaryStrings['noSubject'];</span>
<a href="#l8.269"></a><span id="l8.269" class="difflineplus">+      // Someday, we might want to handle multi-subject threads</span>
<a href="#l8.270"></a><span id="l8.270" class="difflineplus">+      subject = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.271"></a><span id="l8.271" class="difflineplus">+      _mm_addClass(subject, &quot;subject&quot;);</span>
<a href="#l8.272"></a><span id="l8.272" class="difflineplus">+      subject.innerHTML = escapeXMLchars(subjectText);</span>
<a href="#l8.273"></a><span id="l8.273" class="difflineplus">+</span>
<a href="#l8.274"></a><span id="l8.274" class="difflineplus">+</span>
<a href="#l8.275"></a><span id="l8.275" class="difflineplus">+      let authorText = &quot; &quot; + msgs[0].mime2DecodedAuthor;</span>
<a href="#l8.276"></a><span id="l8.276" class="difflineplus">+      // Someday, we might want to handle multi-subject threads</span>
<a href="#l8.277"></a><span id="l8.277" class="difflineplus">+      let author = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.278"></a><span id="l8.278" class="difflineplus">+      _mm_addClass(author, &quot;author&quot;);</span>
<a href="#l8.279"></a><span id="l8.279" class="difflineplus">+      author.innerHTML = escapeXMLchars(authorText);</span>
<a href="#l8.280"></a><span id="l8.280" class="difflineplus">+</span>
<a href="#l8.281"></a><span id="l8.281" class="difflineplus">+      let wrappedsubject = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.282"></a><span id="l8.282" class="difflineplus">+      _mm_addClass(wrappedsubject, 'wrappedsubject');</span>
<a href="#l8.283"></a><span id="l8.283" class="difflineplus">+      let star = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.284"></a><span id="l8.284" class="difflineplus">+      _mm_addClass(star, &quot;star&quot;);</span>
<a href="#l8.285"></a><span id="l8.285" class="difflineplus">+      wrappedsubject.appendChild(subject);</span>
<a href="#l8.286"></a><span id="l8.286" class="difflineplus">+      wrappedsubject.appendChild(author);</span>
<a href="#l8.287"></a><span id="l8.287" class="difflineplus">+</span>
<a href="#l8.288"></a><span id="l8.288" class="difflineplus">+      header.appendChild(wrappedsubject);</span>
<a href="#l8.289"></a><span id="l8.289" class="difflineplus">+</span>
<a href="#l8.290"></a><span id="l8.290" class="difflineplus">+      // this feels ugly -- is there a better way to pass in data?</span>
<a href="#l8.291"></a><span id="l8.291" class="difflineplus">+      subject.msgs = msgs;</span>
<a href="#l8.292"></a><span id="l8.292" class="difflineplus">+      subject.addEventListener(&quot;click&quot;, function() {</span>
<a href="#l8.293"></a><span id="l8.293" class="difflineplus">+        selectMultipleMessagesByMsgHdr(this.msgs)</span>
<a href="#l8.294"></a><span id="l8.294" class="difflineplus">+      }, true);</span>
<a href="#l8.295"></a><span id="l8.295" class="difflineplus">+      _mm_addClass(subject, &quot;link&quot;);</span>
<a href="#l8.296"></a><span id="l8.296" class="difflineplus">+</span>
<a href="#l8.297"></a><span id="l8.297" class="difflineplus">+      msg.appendChild(header);</span>
<a href="#l8.298"></a><span id="l8.298" class="difflineplus">+</span>
<a href="#l8.299"></a><span id="l8.299" class="difflineplus">+      let snippet = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.300"></a><span id="l8.300" class="difflineplus">+      _mm_addClass(snippet, &quot;snippet&quot;);</span>
<a href="#l8.301"></a><span id="l8.301" class="difflineplus">+      header.appendChild(snippet);</span>
<a href="#l8.302"></a><span id="l8.302" class="difflineplus">+</span>
<a href="#l8.303"></a><span id="l8.303" class="difflineplus">+      tags = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.304"></a><span id="l8.304" class="difflineplus">+      _mm_addClass(tags, &quot;tags&quot;);</span>
<a href="#l8.305"></a><span id="l8.305" class="difflineplus">+      header.appendChild(tags);</span>
<a href="#l8.306"></a><span id="l8.306" class="difflineplus">+</span>
<a href="#l8.307"></a><span id="l8.307" class="difflineplus">+      // use the first msgHdr in the thread for key purposes for snippets</span>
<a href="#l8.308"></a><span id="l8.308" class="difflineplus">+      this._snippetNodes[msgs[0].messageKey + msgs[0].folder.URI] = snippet;</span>
<a href="#l8.309"></a><span id="l8.309" class="difflineplus">+      // for tags, stars, and read/unread status, we want to map</span>
<a href="#l8.310"></a><span id="l8.310" class="difflineplus">+      // from all messages to one node</span>
<a href="#l8.311"></a><span id="l8.311" class="difflineplus">+      for each (msgHdr in msgs) {</span>
<a href="#l8.312"></a><span id="l8.312" class="difflineplus">+        this._headerNodes[msgHdr.messageKey + msgHdr.folder.URI] = header;</span>
<a href="#l8.313"></a><span id="l8.313" class="difflineplus">+        this._tagsNodes[msgHdr.messageKey + msgHdr.folder.URI] = tags;</span>
<a href="#l8.314"></a><span id="l8.314" class="difflineplus">+      }</span>
<a href="#l8.315"></a><span id="l8.315" class="difflineplus">+</span>
<a href="#l8.316"></a><span id="l8.316" class="difflineplus">+      let numMsgs = msgs.length;</span>
<a href="#l8.317"></a><span id="l8.317" class="difflineplus">+      countNode = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.318"></a><span id="l8.318" class="difflineplus">+      _mm_addClass(countNode, 'count');</span>
<a href="#l8.319"></a><span id="l8.319" class="difflineplus">+      if (numMsgs &gt; 1) {</span>
<a href="#l8.320"></a><span id="l8.320" class="difflineplus">+        let label = &quot;(&quot;;</span>
<a href="#l8.321"></a><span id="l8.321" class="difflineplus">+        label += PluralForm.get(numMsgs, gSelectionSummaryStrings[&quot;numMsgs&quot;]).replace('#1', numMsgs);</span>
<a href="#l8.322"></a><span id="l8.322" class="difflineplus">+        if (countUnread)</span>
<a href="#l8.323"></a><span id="l8.323" class="difflineplus">+          label += PluralForm.get(numMsgs, gSelectionSummaryStrings[&quot;countUnread&quot;]).replace('#1', countUnread);</span>
<a href="#l8.324"></a><span id="l8.324" class="difflineplus">+        label += &quot;)&quot;;</span>
<a href="#l8.325"></a><span id="l8.325" class="difflineplus">+        countNode.innerHTML = label;</span>
<a href="#l8.326"></a><span id="l8.326" class="difflineplus">+      }</span>
<a href="#l8.327"></a><span id="l8.327" class="difflineplus">+      msg.appendChild(countNode);</span>
<a href="#l8.328"></a><span id="l8.328" class="difflineplus">+      countNode.appendChild(star);</span>
<a href="#l8.329"></a><span id="l8.329" class="difflineplus">+      messagesElt.appendChild(msg);</span>
<a href="#l8.330"></a><span id="l8.330" class="difflineplus">+    }</span>
<a href="#l8.331"></a><span id="l8.331" class="difflineplus">+    this.computeSize();</span>
<a href="#l8.332"></a><span id="l8.332" class="difflineplus">+    this.notifyMaxCountExceeded(numMessages, MAXCOUNT);</span>
<a href="#l8.333"></a><span id="l8.333" class="difflineplus">+</span>
<a href="#l8.334"></a><span id="l8.334" class="difflineplus">+    this._glodaQueries.push(Gloda.getMessageCollectionForHeaders(this._msgHdrs, this));</span>
<a href="#l8.335"></a><span id="l8.335" class="difflineplus">+  },</span>
<a href="#l8.336"></a><span id="l8.336" class="difflineplus">+</span>
<a href="#l8.337"></a><span id="l8.337" class="difflineplus">+  /**</span>
<a href="#l8.338"></a><span id="l8.338" class="difflineplus">+   * compute the size of the messages in the selection and display it</span>
<a href="#l8.339"></a><span id="l8.339" class="difflineplus">+   * in the element of id &quot;size&quot;</span>
<a href="#l8.340"></a><span id="l8.340" class="difflineplus">+  **/</span>
<a href="#l8.341"></a><span id="l8.341" class="difflineplus">+  computeSize: function() {</span>
<a href="#l8.342"></a><span id="l8.342" class="difflineplus">+    let htmlpane = pickMessagePane('multimessage');</span>
<a href="#l8.343"></a><span id="l8.343" class="difflineplus">+    let numThreads = 0;</span>
<a href="#l8.344"></a><span id="l8.344" class="difflineplus">+    let numBytes = 0;</span>
<a href="#l8.345"></a><span id="l8.345" class="difflineplus">+</span>
<a href="#l8.346"></a><span id="l8.346" class="difflineplus">+    for (let [,msgHdr] in Iterator(this._msgHdrs))</span>
<a href="#l8.347"></a><span id="l8.347" class="difflineplus">+      numBytes += msgHdr.messageSize; // XXX do something about news?</span>
<a href="#l8.348"></a><span id="l8.348" class="difflineplus">+    let [size, unit] = DownloadUtils.convertByteUnits(numBytes);</span>
<a href="#l8.349"></a><span id="l8.349" class="difflineplus">+    let sizeText = replaceInsert(gSelectionSummaryStrings.messagesSize, 1, size);</span>
<a href="#l8.350"></a><span id="l8.350" class="difflineplus">+    sizeText = replaceInsert(sizeText, 2, unit);</span>
<a href="#l8.351"></a><span id="l8.351" class="difflineplus">+    htmlpane.contentDocument.getElementById('size').innerHTML = sizeText;</span>
<a href="#l8.352"></a><span id="l8.352" class="difflineplus">+  },</span>
<a href="#l8.353"></a><span id="l8.353" class="difflineplus">+</span>
<a href="#l8.354"></a><span id="l8.354" class="difflineplus">+  /** compute the size of the messages in the selection and display it</span>
<a href="#l8.355"></a><span id="l8.355" class="difflineplus">+   * in the element of id &quot;size&quot;</span>
<a href="#l8.356"></a><span id="l8.356" class="difflineplus">+  **/</span>
<a href="#l8.357"></a><span id="l8.357" class="difflineplus">+  notifyMaxCountExceeded: function(numMessages, maxCount) {</span>
<a href="#l8.358"></a><span id="l8.358" class="difflineplus">+    let htmlpane = pickMessagePane('multimessage');</span>
<a href="#l8.359"></a><span id="l8.359" class="difflineplus">+    let notice = htmlpane.contentDocument.getElementById('notice');</span>
<a href="#l8.360"></a><span id="l8.360" class="difflineplus">+    if (numMessages &gt; maxCount)</span>
<a href="#l8.361"></a><span id="l8.361" class="difflineplus">+    {</span>
<a href="#l8.362"></a><span id="l8.362" class="difflineplus">+      let noticeText = gSelectionSummaryStrings.noticeText;</span>
<a href="#l8.363"></a><span id="l8.363" class="difflineplus">+      noticeText = replaceInsert(noticeText, 1, numMessages);</span>
<a href="#l8.364"></a><span id="l8.364" class="difflineplus">+      noticeText = replaceInsert(noticeText, 2, maxCount);</span>
<a href="#l8.365"></a><span id="l8.365" class="difflineplus">+      notice.innerHTML = noticeText;</span>
<a href="#l8.366"></a><span id="l8.366" class="difflineplus">+      _mm_removeClass(notice, 'hidden');</span>
<a href="#l8.367"></a><span id="l8.367" class="difflineplus">+    } else {</span>
<a href="#l8.368"></a><span id="l8.368" class="difflineplus">+      _mm_addClass(notice, 'hidden');</span>
<a href="#l8.369"></a><span id="l8.369" class="difflineplus">+    }</span>
<a href="#l8.370"></a><span id="l8.370" class="difflineplus">+  },</span>
<a href="#l8.371"></a><span id="l8.371" class="difflineplus">+</span>
<a href="#l8.372"></a><span id="l8.372" class="difflineplus">+  // these are listeners for the gloda collections.</span>
<a href="#l8.373"></a><span id="l8.373" class="difflineplus">+  onItemsAdded: function(aItems) {</span>
<a href="#l8.374"></a><span id="l8.374" class="difflineplus">+  },</span>
<a href="#l8.375"></a><span id="l8.375" class="difflineplus">+  onItemsModified: function(aItems) {</span>
<a href="#l8.376"></a><span id="l8.376" class="difflineplus">+    this.processItems(aItems);</span>
<a href="#l8.377"></a><span id="l8.377" class="difflineplus">+  },</span>
<a href="#l8.378"></a><span id="l8.378" class="difflineplus">+  onItemsRemoved: function(aItems) {</span>
<a href="#l8.379"></a><span id="l8.379" class="difflineplus">+  },</span>
<a href="#l8.380"></a><span id="l8.380" class="difflineplus">+</span>
<a href="#l8.381"></a><span id="l8.381" class="difflineplus">+  /**</span>
<a href="#l8.382"></a><span id="l8.382" class="difflineplus">+   * Given a set of items from a gloda collection, process them and update</span>
<a href="#l8.383"></a><span id="l8.383" class="difflineplus">+   * the display accordingly.</span>
<a href="#l8.384"></a><span id="l8.384" class="difflineplus">+   *</span>
<a href="#l8.385"></a><span id="l8.385" class="difflineplus">+   * @param aItems</span>
<a href="#l8.386"></a><span id="l8.386" class="difflineplus">+   *        contents of a gloda collection</span>
<a href="#l8.387"></a><span id="l8.387" class="difflineplus">+  **/</span>
<a href="#l8.388"></a><span id="l8.388" class="difflineplus">+  processItems: function(aItems) {</span>
<a href="#l8.389"></a><span id="l8.389" class="difflineplus">+    var tagService = Components.classes[&quot;@mozilla.org/messenger/tagservice;1&quot;]</span>
<a href="#l8.390"></a><span id="l8.390" class="difflineplus">+                     .getService(Components.interfaces.nsIMsgTagService);</span>
<a href="#l8.391"></a><span id="l8.391" class="difflineplus">+</span>
<a href="#l8.392"></a><span id="l8.392" class="difflineplus">+    let seenTagNode = {};</span>
<a href="#l8.393"></a><span id="l8.393" class="difflineplus">+    for (let [,glodaMsg] in Iterator(aItems)) {</span>
<a href="#l8.394"></a><span id="l8.394" class="difflineplus">+      let messageKey = glodaMsg.messageKey;</span>
<a href="#l8.395"></a><span id="l8.395" class="difflineplus">+      let domkey = messageKey + glodaMsg.folder.uri;</span>
<a href="#l8.396"></a><span id="l8.396" class="difflineplus">+</span>
<a href="#l8.397"></a><span id="l8.397" class="difflineplus">+      if (this._headerNodes) {</span>
<a href="#l8.398"></a><span id="l8.398" class="difflineplus">+        let headerNode = this._headerNodes[domkey];</span>
<a href="#l8.399"></a><span id="l8.399" class="difflineplus">+        // unread and starred will get set if any of the messages in a</span>
<a href="#l8.400"></a><span id="l8.400" class="difflineplus">+        // collapsed thread qualify</span>
<a href="#l8.401"></a><span id="l8.401" class="difflineplus">+        if (headerNode) {</span>
<a href="#l8.402"></a><span id="l8.402" class="difflineplus">+          if (! glodaMsg.read)</span>
<a href="#l8.403"></a><span id="l8.403" class="difflineplus">+            _mm_addClass(headerNode, &quot;unread&quot;);</span>
<a href="#l8.404"></a><span id="l8.404" class="difflineplus">+          else</span>
<a href="#l8.405"></a><span id="l8.405" class="difflineplus">+            _mm_removeClass(headerNode, &quot;unread&quot;);</span>
<a href="#l8.406"></a><span id="l8.406" class="difflineplus">+          if (glodaMsg.starred)</span>
<a href="#l8.407"></a><span id="l8.407" class="difflineplus">+            _mm_addClass(headerNode, &quot;starred&quot;);</span>
<a href="#l8.408"></a><span id="l8.408" class="difflineplus">+          else</span>
<a href="#l8.409"></a><span id="l8.409" class="difflineplus">+            _mm_removeClass(headerNode, &quot;starred&quot;);</span>
<a href="#l8.410"></a><span id="l8.410" class="difflineplus">+        }</span>
<a href="#l8.411"></a><span id="l8.411" class="difflineplus">+      }</span>
<a href="#l8.412"></a><span id="l8.412" class="difflineplus">+      if (this._snippetNodes) {</span>
<a href="#l8.413"></a><span id="l8.413" class="difflineplus">+        let snippetNode = this._snippetNodes[domkey];</span>
<a href="#l8.414"></a><span id="l8.414" class="difflineplus">+</span>
<a href="#l8.415"></a><span id="l8.415" class="difflineplus">+        MsgHdrToMimeMessage(glodaMsg.folderMessage, null, function(aMsgHdr, aMimeMsg) {</span>
<a href="#l8.416"></a><span id="l8.416" class="difflineplus">+          if (aMimeMsg == null)</span>
<a href="#l8.417"></a><span id="l8.417" class="difflineplus">+            return;</span>
<a href="#l8.418"></a><span id="l8.418" class="difflineplus">+</span>
<a href="#l8.419"></a><span id="l8.419" class="difflineplus">+          let text = Gloda.getMessageContent(glodaMsg, aMimeMsg).getContentSnippet(101);</span>
<a href="#l8.420"></a><span id="l8.420" class="difflineplus">+          if (snippetNode &amp;&amp; text)</span>
<a href="#l8.421"></a><span id="l8.421" class="difflineplus">+          {</span>
<a href="#l8.422"></a><span id="l8.422" class="difflineplus">+            let kSnippetLength = 100;</span>
<a href="#l8.423"></a><span id="l8.423" class="difflineplus">+            if (text.length &gt; kSnippetLength)</span>
<a href="#l8.424"></a><span id="l8.424" class="difflineplus">+              text = text.substring(0, kSnippetLength) + &quot;\u2026&quot;; // ellipsis</span>
<a href="#l8.425"></a><span id="l8.425" class="difflineplus">+            snippetNode.innerHTML = escapeXMLchars(text);</span>
<a href="#l8.426"></a><span id="l8.426" class="difflineplus">+          }</span>
<a href="#l8.427"></a><span id="l8.427" class="difflineplus">+        });</span>
<a href="#l8.428"></a><span id="l8.428" class="difflineplus">+</span>
<a href="#l8.429"></a><span id="l8.429" class="difflineplus">+      }</span>
<a href="#l8.430"></a><span id="l8.430" class="difflineplus">+      if (this._tagsNodes) {</span>
<a href="#l8.431"></a><span id="l8.431" class="difflineplus">+        // for tags, we need to do some fancy stuff, to figure out the set</span>
<a href="#l8.432"></a><span id="l8.432" class="difflineplus">+        // of tags that correspond to all of the messages in a collapsed</span>
<a href="#l8.433"></a><span id="l8.433" class="difflineplus">+        // thread.</span>
<a href="#l8.434"></a><span id="l8.434" class="difflineplus">+        let key = messageKey + glodaMsg.folder.uri;</span>
<a href="#l8.435"></a><span id="l8.435" class="difflineplus">+        let tagsNode = this._tagsNodes[key];</span>
<a href="#l8.436"></a><span id="l8.436" class="difflineplus">+        if (tagsNode) {</span>
<a href="#l8.437"></a><span id="l8.437" class="difflineplus">+          if (! seenTagNode[tagsNode]) {</span>
<a href="#l8.438"></a><span id="l8.438" class="difflineplus">+            // We haven't processed a message from this thread before</span>
<a href="#l8.439"></a><span id="l8.439" class="difflineplus">+            while (tagsNode.childNodes.length) {</span>
<a href="#l8.440"></a><span id="l8.440" class="difflineplus">+              // get rid of all tags</span>
<a href="#l8.441"></a><span id="l8.441" class="difflineplus">+              tagsNode.removeChild(tagsNode.firstChild);</span>
<a href="#l8.442"></a><span id="l8.442" class="difflineplus">+            }</span>
<a href="#l8.443"></a><span id="l8.443" class="difflineplus">+            seenTagNode[tagsNode] = {};</span>
<a href="#l8.444"></a><span id="l8.444" class="difflineplus">+          }</span>
<a href="#l8.445"></a><span id="l8.445" class="difflineplus">+          for each (let [,tag] in Iterator(glodaMsg.tags)) {</span>
<a href="#l8.446"></a><span id="l8.446" class="difflineplus">+            // have we already added this tag to the thread?</span>
<a href="#l8.447"></a><span id="l8.447" class="difflineplus">+            if (!(seenTagNode[tagsNode][tag.tag])) {</span>
<a href="#l8.448"></a><span id="l8.448" class="difflineplus">+              let tagNode = tagsNode.ownerDocument.createElement('span');</span>
<a href="#l8.449"></a><span id="l8.449" class="difflineplus">+              // see tagColors.css</span>
<a href="#l8.450"></a><span id="l8.450" class="difflineplus">+              let colorClass = &quot;blc-&quot; + tagService.getColorForKey(tag.key).substr(1);</span>
<a href="#l8.451"></a><span id="l8.451" class="difflineplus">+              _mm_addClass(tagNode, &quot;tag &quot; + tag.tag + &quot; &quot; + colorClass);</span>
<a href="#l8.452"></a><span id="l8.452" class="difflineplus">+              tagNode.innerHTML = tag.tag;</span>
<a href="#l8.453"></a><span id="l8.453" class="difflineplus">+              tagsNode.appendChild(tagNode);</span>
<a href="#l8.454"></a><span id="l8.454" class="difflineplus">+              seenTagNode[tagsNode][tag.tag] = true;</span>
<a href="#l8.455"></a><span id="l8.455" class="difflineplus">+            }</span>
<a href="#l8.456"></a><span id="l8.456" class="difflineplus">+          }</span>
<a href="#l8.457"></a><span id="l8.457" class="difflineplus">+        }</span>
<a href="#l8.458"></a><span id="l8.458" class="difflineplus">+      }</span>
<a href="#l8.459"></a><span id="l8.459" class="difflineplus">+    }</span>
<a href="#l8.460"></a><span id="l8.460" class="difflineplus">+  },</span>
<a href="#l8.461"></a><span id="l8.461" class="difflineplus">+</span>
<a href="#l8.462"></a><span id="l8.462" class="difflineplus">+  onQueryCompleted: function(aCollection) {</span>
<a href="#l8.463"></a><span id="l8.463" class="difflineplus">+    if (aCollection.items.length) {</span>
<a href="#l8.464"></a><span id="l8.464" class="difflineplus">+      this.processItems(aCollection.items);</span>
<a href="#l8.465"></a><span id="l8.465" class="difflineplus">+    }</span>
<a href="#l8.466"></a><span id="l8.466" class="difflineplus">+  }</span>
<a href="#l8.467"></a><span id="l8.467" class="difflineplus">+}</span>
<a href="#l8.468"></a><span id="l8.468" class="difflineplus">+</span>
<a href="#l8.469"></a><span id="l8.469" class="difflineplus">+</span>
<a href="#l8.470"></a><span id="l8.470" class="difflineplus">+/**</span>
<a href="#l8.471"></a><span id="l8.471" class="difflineplus">+ * the ThreadSummary class is responsible for populating the message pane</span>
<a href="#l8.472"></a><span id="l8.472" class="difflineplus">+ * with a reasonable summary of a set of messages that are are in a single</span>
<a href="#l8.473"></a><span id="l8.473" class="difflineplus">+ * thread.</span>
<a href="#l8.474"></a><span id="l8.474" class="difflineplus">+ *</span>
<a href="#l8.475"></a><span id="l8.475" class="difflineplus">+ * It uses the same multimessage iframe as MultiMessageSummary, so both it</span>
<a href="#l8.476"></a><span id="l8.476" class="difflineplus">+ * and MultiMessageSummary should be careful to clean up the other's work</span>
<a href="#l8.477"></a><span id="l8.477" class="difflineplus">+ * before inserting their DOM nodes into the frame.</span>
<a href="#l8.478"></a><span id="l8.478" class="difflineplus">+ *</span>
<a href="#l8.479"></a><span id="l8.479" class="difflineplus">+ * There's a two phase process: build the framework based on what's available</span>
<a href="#l8.480"></a><span id="l8.480" class="difflineplus">+ * from the msgHdr itself, and then spawn an aysnc Gloda query which will</span>
<a href="#l8.481"></a><span id="l8.481" class="difflineplus">+ * fetch the snippets, tags, etc.</span>
<a href="#l8.482"></a><span id="l8.482" class="difflineplus">+ *</span>
<a href="#l8.483"></a><span id="l8.483" class="difflineplus">+ * @param msgURIs</span>
<a href="#l8.484"></a><span id="l8.484" class="difflineplus">+ *        array of message URIs</span>
<a href="#l8.485"></a><span id="l8.485" class="difflineplus">+ */</span>
<a href="#l8.486"></a><span id="l8.486" class="difflineplus">+</span>
<a href="#l8.487"></a><span id="l8.487" class="difflineplus">+function ThreadSummary(msgURIs)</span>
<a href="#l8.488"></a><span id="l8.488" class="difflineplus">+{</span>
<a href="#l8.489"></a><span id="l8.489" class="difflineplus">+  this._msgURIs = msgURIs;</span>
<a href="#l8.490"></a><span id="l8.490" class="difflineplus">+}</span>
<a href="#l8.491"></a><span id="l8.491" class="difflineplus">+</span>
<a href="#l8.492"></a><span id="l8.492" class="difflineplus">+ThreadSummary.prototype = {</span>
<a href="#l8.493"></a><span id="l8.493" class="difflineplus">+  __proto__: MultiMessageSummary.prototype,</span>
<a href="#l8.494"></a><span id="l8.494" class="difflineplus">+</span>
<a href="#l8.495"></a><span id="l8.495" class="difflineplus">+  summarize: function() {</span>
<a href="#l8.496"></a><span id="l8.496" class="difflineplus">+    this._headerNodes = {};</span>
<a href="#l8.497"></a><span id="l8.497" class="difflineplus">+    this._snippetNodes = {};</span>
<a href="#l8.498"></a><span id="l8.498" class="difflineplus">+</span>
<a href="#l8.499"></a><span id="l8.499" class="difflineplus">+    let htmlpane = pickMessagePane('multimessage');</span>
<a href="#l8.500"></a><span id="l8.500" class="difflineplus">+</span>
<a href="#l8.501"></a><span id="l8.501" class="difflineplus">+    let firstMsgHdr = messenger.msgHdrFromURI(this._msgURIs[0]);</span>
<a href="#l8.502"></a><span id="l8.502" class="difflineplus">+    let numMessages = this._msgURIs.length;</span>
<a href="#l8.503"></a><span id="l8.503" class="difflineplus">+    let subject = (firstMsgHdr.mime2DecodedSubject || gSelectionSummaryStrings[&quot;noSubject&quot;])</span>
<a href="#l8.504"></a><span id="l8.504" class="difflineplus">+       + &quot; &quot;</span>
<a href="#l8.505"></a><span id="l8.505" class="difflineplus">+       + PluralForm.get(numMessages, gSelectionSummaryStrings[&quot;Nmessages&quot;]).replace('#1', numMessages);</span>
<a href="#l8.506"></a><span id="l8.506" class="difflineplus">+    let heading = htmlpane.contentDocument.getElementById('heading');</span>
<a href="#l8.507"></a><span id="l8.507" class="difflineplus">+    heading.setAttribute(&quot;class&quot;, &quot;heading&quot;);</span>
<a href="#l8.508"></a><span id="l8.508" class="difflineplus">+    heading.innerHTML = escapeXMLchars(subject);</span>
<a href="#l8.509"></a><span id="l8.509" class="difflineplus">+</span>
<a href="#l8.510"></a><span id="l8.510" class="difflineplus">+    let messagesElt = htmlpane.contentDocument.getElementById('messagelist');</span>
<a href="#l8.511"></a><span id="l8.511" class="difflineplus">+    while (messagesElt.firstChild)</span>
<a href="#l8.512"></a><span id="l8.512" class="difflineplus">+      messagesElt.removeChild(messagesElt.firstChild);</span>
<a href="#l8.513"></a><span id="l8.513" class="difflineplus">+</span>
<a href="#l8.514"></a><span id="l8.514" class="difflineplus">+    let headerParser = Components.classes[&quot;@mozilla.org/messenger/headerparser;1&quot;]</span>
<a href="#l8.515"></a><span id="l8.515" class="difflineplus">+                                    .getService(Components.interfaces.nsIMsgHeaderParser);</span>
<a href="#l8.516"></a><span id="l8.516" class="difflineplus">+    let msgHdrs = new Array();</span>
<a href="#l8.517"></a><span id="l8.517" class="difflineplus">+    let count = 0;</span>
<a href="#l8.518"></a><span id="l8.518" class="difflineplus">+    const MAXCOUNT = 100;</span>
<a href="#l8.519"></a><span id="l8.519" class="difflineplus">+    let maxCountExceeded = false;</span>
<a href="#l8.520"></a><span id="l8.520" class="difflineplus">+    for (var i = 0; i &lt; this._msgURIs.length; ++i)</span>
<a href="#l8.521"></a><span id="l8.521" class="difflineplus">+    {</span>
<a href="#l8.522"></a><span id="l8.522" class="difflineplus">+      count += 1;</span>
<a href="#l8.523"></a><span id="l8.523" class="difflineplus">+      if (count &gt; MAXCOUNT) {</span>
<a href="#l8.524"></a><span id="l8.524" class="difflineplus">+        maxCountExceeded = true;</span>
<a href="#l8.525"></a><span id="l8.525" class="difflineplus">+        break;</span>
<a href="#l8.526"></a><span id="l8.526" class="difflineplus">+      }</span>
<a href="#l8.527"></a><span id="l8.527" class="difflineplus">+      let msgHdr, msg, header, sender, snippet, tags;</span>
<a href="#l8.528"></a><span id="l8.528" class="difflineplus">+      msgHdr = messenger.msgHdrFromURI(this._msgURIs[i]);</span>
<a href="#l8.529"></a><span id="l8.529" class="difflineplus">+      msgHdrs.push(msgHdr);</span>
<a href="#l8.530"></a><span id="l8.530" class="difflineplus">+      msg = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.531"></a><span id="l8.531" class="difflineplus">+      let key = msgHdr.messageKey + msgHdr.folder.URI;</span>
<a href="#l8.532"></a><span id="l8.532" class="difflineplus">+</span>
<a href="#l8.533"></a><span id="l8.533" class="difflineplus">+      _mm_addClass(msg, &quot;message&quot;);</span>
<a href="#l8.534"></a><span id="l8.534" class="difflineplus">+</span>
<a href="#l8.535"></a><span id="l8.535" class="difflineplus">+      if (! msgHdr.isRead)</span>
<a href="#l8.536"></a><span id="l8.536" class="difflineplus">+        _mm_addClass(msg, &quot;unread&quot;);</span>
<a href="#l8.537"></a><span id="l8.537" class="difflineplus">+</span>
<a href="#l8.538"></a><span id="l8.538" class="difflineplus">+      header = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.539"></a><span id="l8.539" class="difflineplus">+      _mm_addClass(header, &quot;header&quot;);</span>
<a href="#l8.540"></a><span id="l8.540" class="difflineplus">+      if (msgHdr.isFlagged)</span>
<a href="#l8.541"></a><span id="l8.541" class="difflineplus">+        _mm_addClass(msg, &quot;starred&quot;);</span>
<a href="#l8.542"></a><span id="l8.542" class="difflineplus">+</span>
<a href="#l8.543"></a><span id="l8.543" class="difflineplus">+      let senderName = headerParser.extractHeaderAddressNames(msgHdr.mime2DecodedAuthor);</span>
<a href="#l8.544"></a><span id="l8.544" class="difflineplus">+      senderName = this.stripQuotes(senderName);</span>
<a href="#l8.545"></a><span id="l8.545" class="difflineplus">+      sender = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.546"></a><span id="l8.546" class="difflineplus">+      sender.msgHdr = msgHdr;</span>
<a href="#l8.547"></a><span id="l8.547" class="difflineplus">+      _mm_addClass(sender, &quot;sender&quot;);</span>
<a href="#l8.548"></a><span id="l8.548" class="difflineplus">+      sender.addEventListener(&quot;click&quot;, function(e) {</span>
<a href="#l8.549"></a><span id="l8.549" class="difflineplus">+        // if the msg is the first message in a collapsed thread, we need to</span>
<a href="#l8.550"></a><span id="l8.550" class="difflineplus">+        // uncollapse it.</span>
<a href="#l8.551"></a><span id="l8.551" class="difflineplus">+        let origRowCount = gDBView.rowCount;</span>
<a href="#l8.552"></a><span id="l8.552" class="difflineplus">+        let viewIndex = gDBView.findIndexOfMsgHdr(e.target.msgHdr, true);</span>
<a href="#l8.553"></a><span id="l8.553" class="difflineplus">+        gDBView.selectFolderMsgByKey(this.folder, this.msgKey);</span>
<a href="#l8.554"></a><span id="l8.554" class="difflineplus">+        if (gDBView.rowCount != origRowCount)</span>
<a href="#l8.555"></a><span id="l8.555" class="difflineplus">+          gDBView.selectionChanged();</span>
<a href="#l8.556"></a><span id="l8.556" class="difflineplus">+      }, true);</span>
<a href="#l8.557"></a><span id="l8.557" class="difflineplus">+      _mm_addClass(sender, &quot;link&quot;);</span>
<a href="#l8.558"></a><span id="l8.558" class="difflineplus">+      sender.innerHTML = escapeXMLchars(senderName); // escape?</span>
<a href="#l8.559"></a><span id="l8.559" class="difflineplus">+      sender.folder = msgHdr.folder;</span>
<a href="#l8.560"></a><span id="l8.560" class="difflineplus">+      sender.msgKey = msgHdr.messageKey;</span>
<a href="#l8.561"></a><span id="l8.561" class="difflineplus">+</span>
<a href="#l8.562"></a><span id="l8.562" class="difflineplus">+      let wrappedsender = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.563"></a><span id="l8.563" class="difflineplus">+      _mm_addClass(wrappedsender, &quot;wrappedsender&quot;);</span>
<a href="#l8.564"></a><span id="l8.564" class="difflineplus">+      let star = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.565"></a><span id="l8.565" class="difflineplus">+      _mm_addClass(star, &quot;star&quot;);</span>
<a href="#l8.566"></a><span id="l8.566" class="difflineplus">+      wrappedsender.appendChild(sender);</span>
<a href="#l8.567"></a><span id="l8.567" class="difflineplus">+</span>
<a href="#l8.568"></a><span id="l8.568" class="difflineplus">+      header.appendChild(wrappedsender);</span>
<a href="#l8.569"></a><span id="l8.569" class="difflineplus">+</span>
<a href="#l8.570"></a><span id="l8.570" class="difflineplus">+      snippet = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.571"></a><span id="l8.571" class="difflineplus">+      _mm_addClass(snippet, &quot;snippet&quot;);</span>
<a href="#l8.572"></a><span id="l8.572" class="difflineplus">+      header.appendChild(snippet);</span>
<a href="#l8.573"></a><span id="l8.573" class="difflineplus">+</span>
<a href="#l8.574"></a><span id="l8.574" class="difflineplus">+      tags = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.575"></a><span id="l8.575" class="difflineplus">+      _mm_addClass(tags, &quot;tags&quot;);</span>
<a href="#l8.576"></a><span id="l8.576" class="difflineplus">+      header.appendChild(tags);</span>
<a href="#l8.577"></a><span id="l8.577" class="difflineplus">+</span>
<a href="#l8.578"></a><span id="l8.578" class="difflineplus">+      this._headerNodes[key] = msg;</span>
<a href="#l8.579"></a><span id="l8.579" class="difflineplus">+      this._snippetNodes[key] = snippet;</span>
<a href="#l8.580"></a><span id="l8.580" class="difflineplus">+      this._tagsNodes[key] = tags;</span>
<a href="#l8.581"></a><span id="l8.581" class="difflineplus">+</span>
<a href="#l8.582"></a><span id="l8.582" class="difflineplus">+      msg.appendChild(header);</span>
<a href="#l8.583"></a><span id="l8.583" class="difflineplus">+      let dateNode = htmlpane.contentDocument.createElement(&quot;div&quot;);</span>
<a href="#l8.584"></a><span id="l8.584" class="difflineplus">+      dateNode.innerHTML = makeFriendlyDateAgo(new Date(msgHdr.date/1000));</span>
<a href="#l8.585"></a><span id="l8.585" class="difflineplus">+      dateNode.appendChild(star);</span>
<a href="#l8.586"></a><span id="l8.586" class="difflineplus">+      _mm_addClass(dateNode, &quot;date&quot;);</span>
<a href="#l8.587"></a><span id="l8.587" class="difflineplus">+      msg.appendChild(dateNode);</span>
<a href="#l8.588"></a><span id="l8.588" class="difflineplus">+      messagesElt.appendChild(msg);</span>
<a href="#l8.589"></a><span id="l8.589" class="difflineplus">+    }</span>
<a href="#l8.590"></a><span id="l8.590" class="difflineplus">+    // stash somewhere so it doesn't get GC'ed</span>
<a href="#l8.591"></a><span id="l8.591" class="difflineplus">+    this._glodaQueries.push(Gloda.getMessageCollectionForHeaders(msgHdrs, this));</span>
<a href="#l8.592"></a><span id="l8.592" class="difflineplus">+    this.notifyMaxCountExceeded(numMessages, MAXCOUNT);</span>
<a href="#l8.593"></a><span id="l8.593" class="difflineplus">+</span>
<a href="#l8.594"></a><span id="l8.594" class="difflineplus">+    this.computeSize();</span>
<a href="#l8.595"></a><span id="l8.595" class="difflineplus">+  }</span>
<a href="#l8.596"></a><span id="l8.596" class="difflineplus">+}</span>
<a href="#l8.597"></a><span id="l8.597" class="difflineplus">+</span>
<a href="#l8.598"></a><span id="l8.598" class="difflineplus">+// We use a global to prevent GC of gloda collection (and we reuse it to prevent</span>
<a href="#l8.599"></a><span id="l8.599" class="difflineplus">+// leaks).  Without a global, the GC is aggressive enough that the gloda query</span>
<a href="#l8.600"></a><span id="l8.600" class="difflineplus">+// is gone before it returns.</span>
<a href="#l8.601"></a><span id="l8.601" class="difflineplus">+var gSummary;</span>
<a href="#l8.602"></a><span id="l8.602" class="difflineplus">+</span>
<a href="#l8.603"></a><span id="l8.603" class="difflineplus">+</span>
<a href="#l8.604"></a><span id="l8.604" class="difflineplus">+/**</span>
<a href="#l8.605"></a><span id="l8.605" class="difflineplus">+ * Given an array of message URIs which are all in the</span>
<a href="#l8.606"></a><span id="l8.606" class="difflineplus">+ * same thread, summarize them.</span>
<a href="#l8.607"></a><span id="l8.607" class="difflineplus">+ *</span>
<a href="#l8.608"></a><span id="l8.608" class="difflineplus">+ * @param selectedMsgUris</span>
<a href="#l8.609"></a><span id="l8.609" class="difflineplus">+ *        array of message URIs</span>
<a href="#l8.610"></a><span id="l8.610" class="difflineplus">+ */</span>
<a href="#l8.611"></a><span id="l8.611" class="difflineplus">+function summarizeThread(selectedMsgUris)</span>
<a href="#l8.612"></a><span id="l8.612" class="difflineplus">+{</span>
<a href="#l8.613"></a><span id="l8.613" class="difflineplus">+  if (selectedMsgUris.length == 0)</span>
<a href="#l8.614"></a><span id="l8.614" class="difflineplus">+    return;</span>
<a href="#l8.615"></a><span id="l8.615" class="difflineplus">+</span>
<a href="#l8.616"></a><span id="l8.616" class="difflineplus">+  gSummary = new ThreadSummary(selectedMsgUris);</span>
<a href="#l8.617"></a><span id="l8.617" class="difflineplus">+  gSummary.init();</span>
<a href="#l8.618"></a><span id="l8.618" class="difflineplus">+}</span>
<a href="#l8.619"></a><span id="l8.619" class="difflineplus">+</span>
<a href="#l8.620"></a><span id="l8.620" class="difflineplus">+/**</span>
<a href="#l8.621"></a><span id="l8.621" class="difflineplus">+ * Given an array of message URIs, cause the message pane</span>
<a href="#l8.622"></a><span id="l8.622" class="difflineplus">+ * to display a summary of them.</span>
<a href="#l8.623"></a><span id="l8.623" class="difflineplus">+ *</span>
<a href="#l8.624"></a><span id="l8.624" class="difflineplus">+ * @param selectedMsgUris</span>
<a href="#l8.625"></a><span id="l8.625" class="difflineplus">+ *        array of message URIs</span>
<a href="#l8.626"></a><span id="l8.626" class="difflineplus">+ */</span>
<a href="#l8.627"></a><span id="l8.627" class="difflineplus">+function summarizeMultipleSelection(selectedMsgUris)</span>
<a href="#l8.628"></a><span id="l8.628" class="difflineplus">+{</span>
<a href="#l8.629"></a><span id="l8.629" class="difflineplus">+  if (selectedMsgUris.length == 0)</span>
<a href="#l8.630"></a><span id="l8.630" class="difflineplus">+    return;</span>
<a href="#l8.631"></a><span id="l8.631" class="difflineplus">+</span>
<a href="#l8.632"></a><span id="l8.632" class="difflineplus">+  gSummary = new MultiMessageSummary(selectedMsgUris);</span>
<a href="#l8.633"></a><span id="l8.633" class="difflineplus">+  gSummary.init();</span>
<a href="#l8.634"></a><span id="l8.634" class="difflineplus">+}</span>
<a href="#l8.635"></a><span id="l8.635" class="difflineplus">+</span>
<a href="#l8.636"></a><span id="l8.636" class="difflineplus">+/**</span>
<a href="#l8.637"></a><span id="l8.637" class="difflineplus">+ * Given an array of nsMsgHdrs, select all of them.  This will uncollapse</span>
<a href="#l8.638"></a><span id="l8.638" class="difflineplus">+ * threads that are collapsed as necessary.</span>
<a href="#l8.639"></a><span id="l8.639" class="difflineplus">+ *</span>
<a href="#l8.640"></a><span id="l8.640" class="difflineplus">+ * @param msgHdrs</span>
<a href="#l8.641"></a><span id="l8.641" class="difflineplus">+ *        array of msgHdr's</span>
<a href="#l8.642"></a><span id="l8.642" class="difflineplus">+ */</span>
<a href="#l8.643"></a><span id="l8.643" class="difflineplus">+function selectMultipleMessagesByMsgHdr(msgHdrs)</span>
<a href="#l8.644"></a><span id="l8.644" class="difflineplus">+{</span>
<a href="#l8.645"></a><span id="l8.645" class="difflineplus">+  let treeView = gDBView.QueryInterface(Components.interfaces.nsITreeView);</span>
<a href="#l8.646"></a><span id="l8.646" class="difflineplus">+  if (msgHdrs.length == 1) {</span>
<a href="#l8.647"></a><span id="l8.647" class="difflineplus">+    gDBView.selectFolderMsgByKey(msgHdrs[0].folder, msgHdrs[0].messageKey);</span>
<a href="#l8.648"></a><span id="l8.648" class="difflineplus">+  } else {</span>
<a href="#l8.649"></a><span id="l8.649" class="difflineplus">+    let treeSelection = treeView.selection;</span>
<a href="#l8.650"></a><span id="l8.650" class="difflineplus">+    treeSelection.clearSelection();</span>
<a href="#l8.651"></a><span id="l8.651" class="difflineplus">+    for (let [, msgHdr] in Iterator(msgHdrs))</span>
<a href="#l8.652"></a><span id="l8.652" class="difflineplus">+    {</span>
<a href="#l8.653"></a><span id="l8.653" class="difflineplus">+      let viewIndex = gDBView.findIndexOfMsgHdr(msgHdr, false);</span>
<a href="#l8.654"></a><span id="l8.654" class="difflineplus">+      let thread = gDBView.getThreadContainingIndex(viewIndex);</span>
<a href="#l8.655"></a><span id="l8.655" class="difflineplus">+      let flags = gDBView.getFlagsAt(viewIndex);</span>
<a href="#l8.656"></a><span id="l8.656" class="difflineplus">+</span>
<a href="#l8.657"></a><span id="l8.657" class="difflineplus">+      if (flags &amp; Components.interfaces.nsMsgMessageFlags.Elided)</span>
<a href="#l8.658"></a><span id="l8.658" class="difflineplus">+        treeView.toggleOpenState(viewIndex);</span>
<a href="#l8.659"></a><span id="l8.659" class="difflineplus">+</span>
<a href="#l8.660"></a><span id="l8.660" class="difflineplus">+      treeSelection.rangedSelect(viewIndex, viewIndex, true);</span>
<a href="#l8.661"></a><span id="l8.661" class="difflineplus">+    }</span>
<a href="#l8.662"></a><span id="l8.662" class="difflineplus">+  }</span>
<a href="#l8.663"></a><span id="l8.663" class="difflineplus">+}</span>
<a href="#l8.664"></a><span id="l8.664" class="difflineplus">+</span>
<a href="#l8.665"></a><span id="l8.665" class="difflineplus">+/**</span>
<a href="#l8.666"></a><span id="l8.666" class="difflineplus">+ * Helper function to generate a localized &quot;friendly&quot; representation of</span>
<a href="#l8.667"></a><span id="l8.667" class="difflineplus">+ * time relative to the present.  If the time input is &quot;today&quot;, it returns</span>
<a href="#l8.668"></a><span id="l8.668" class="difflineplus">+ * a string corresponding to just the time.  If it's yesterday, it returns</span>
<a href="#l8.669"></a><span id="l8.669" class="difflineplus">+ * &quot;yesterday&quot; (localized).  If it's in the last week, it returns the day</span>
<a href="#l8.670"></a><span id="l8.670" class="difflineplus">+ * of the week. If it's before that, it returns the date.</span>
<a href="#l8.671"></a><span id="l8.671" class="difflineplus">+ *</span>
<a href="#l8.672"></a><span id="l8.672" class="difflineplus">+ * @param time</span>
<a href="#l8.673"></a><span id="l8.673" class="difflineplus">+ *        the time (better be in the past!)</span>
<a href="#l8.674"></a><span id="l8.674" class="difflineplus">+ * @return The string with a &quot;human-friendly&quot; representation of that time</span>
<a href="#l8.675"></a><span id="l8.675" class="difflineplus">+ *        relative to now.</span>
<a href="#l8.676"></a><span id="l8.676" class="difflineplus">+ */</span>
<a href="#l8.677"></a><span id="l8.677" class="difflineplus">+function makeFriendlyDateAgo(time)</span>
<a href="#l8.678"></a><span id="l8.678" class="difflineplus">+{</span>
<a href="#l8.679"></a><span id="l8.679" class="difflineplus">+  let dts = Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l8.680"></a><span id="l8.680" class="difflineplus">+                      .getService(Components.interfaces.nsIScriptableDateFormat);</span>
<a href="#l8.681"></a><span id="l8.681" class="difflineplus">+</span>
<a href="#l8.682"></a><span id="l8.682" class="difflineplus">+  // Figure out when today begins</span>
<a href="#l8.683"></a><span id="l8.683" class="difflineplus">+  let now = new Date();</span>
<a href="#l8.684"></a><span id="l8.684" class="difflineplus">+  let today = new Date(now.getFullYear(), now.getMonth(),</span>
<a href="#l8.685"></a><span id="l8.685" class="difflineplus">+                       now.getDate());</span>
<a href="#l8.686"></a><span id="l8.686" class="difflineplus">+</span>
<a href="#l8.687"></a><span id="l8.687" class="difflineplus">+  // Get the end time to display</span>
<a href="#l8.688"></a><span id="l8.688" class="difflineplus">+  let end = time;</span>
<a href="#l8.689"></a><span id="l8.689" class="difflineplus">+</span>
<a href="#l8.690"></a><span id="l8.690" class="difflineplus">+  // Figure out if the end time is from today, yesterday,</span>
<a href="#l8.691"></a><span id="l8.691" class="difflineplus">+  // this week, etc.</span>
<a href="#l8.692"></a><span id="l8.692" class="difflineplus">+  let dateTime;</span>
<a href="#l8.693"></a><span id="l8.693" class="difflineplus">+  let kDayInMsecs = 24 * 60 * 60 * 1000;</span>
<a href="#l8.694"></a><span id="l8.694" class="difflineplus">+  let k6DaysInMsecs = 6 * kDayInMsecs;</span>
<a href="#l8.695"></a><span id="l8.695" class="difflineplus">+  if (end &gt;= today) {</span>
<a href="#l8.696"></a><span id="l8.696" class="difflineplus">+    // activity finished after today started, show the time</span>
<a href="#l8.697"></a><span id="l8.697" class="difflineplus">+    dateTime = dts.FormatTime(&quot;&quot;, dts.timeFormatNoSeconds,</span>
<a href="#l8.698"></a><span id="l8.698" class="difflineplus">+                                  end.getHours(), end.getMinutes(),0);</span>
<a href="#l8.699"></a><span id="l8.699" class="difflineplus">+  } else if (today - end &lt; kDayInMsecs) {</span>
<a href="#l8.700"></a><span id="l8.700" class="difflineplus">+    // activity finished after yesterday started, show yesterday</span>
<a href="#l8.701"></a><span id="l8.701" class="difflineplus">+    dateTime = gSelectionSummaryStrings.yesterday;</span>
<a href="#l8.702"></a><span id="l8.702" class="difflineplus">+  } else if (today - end &lt; k6DaysInMsecs) {</span>
<a href="#l8.703"></a><span id="l8.703" class="difflineplus">+    // activity finished after last week started, show day of week</span>
<a href="#l8.704"></a><span id="l8.704" class="difflineplus">+    dateTime = end.toLocaleFormat(&quot;%A&quot;);</span>
<a href="#l8.705"></a><span id="l8.705" class="difflineplus">+  } else if (now.getFullYear() == end.getFullYear()) {</span>
<a href="#l8.706"></a><span id="l8.706" class="difflineplus">+    // activity must have been from some time ago.. show month/day</span>
<a href="#l8.707"></a><span id="l8.707" class="difflineplus">+    let month = end.toLocaleFormat(&quot;%B&quot;);</span>
<a href="#l8.708"></a><span id="l8.708" class="difflineplus">+    // Remove leading 0 by converting the date string to a number</span>
<a href="#l8.709"></a><span id="l8.709" class="difflineplus">+    let date = Number(end.toLocaleFormat(&quot;%d&quot;));</span>
<a href="#l8.710"></a><span id="l8.710" class="difflineplus">+    //dateTime = replaceInsert(this.text.monthDate, 1, month);</span>
<a href="#l8.711"></a><span id="l8.711" class="difflineplus">+    dateTime = replaceInsert(&quot;#1 #2&quot;, 1, month);</span>
<a href="#l8.712"></a><span id="l8.712" class="difflineplus">+    dateTime = replaceInsert(dateTime, 2, date);</span>
<a href="#l8.713"></a><span id="l8.713" class="difflineplus">+  } else {</span>
<a href="#l8.714"></a><span id="l8.714" class="difflineplus">+    // not this year, so show year as wel</span>
<a href="#l8.715"></a><span id="l8.715" class="difflineplus">+    let month = end.toLocaleFormat(&quot;%B&quot;);</span>
<a href="#l8.716"></a><span id="l8.716" class="difflineplus">+    let year = end.toLocaleFormat(&quot;%Y&quot;);</span>
<a href="#l8.717"></a><span id="l8.717" class="difflineplus">+    // Remove leading 0 by converting the date string to a number</span>
<a href="#l8.718"></a><span id="l8.718" class="difflineplus">+    let date = Number(end.toLocaleFormat(&quot;%d&quot;));</span>
<a href="#l8.719"></a><span id="l8.719" class="difflineplus">+    //dateTime = replaceInsert(this.text.monthDate, 1, month);</span>
<a href="#l8.720"></a><span id="l8.720" class="difflineplus">+    dateTime = replaceInsert(&quot;#1 #2 #3&quot;, 1, month);</span>
<a href="#l8.721"></a><span id="l8.721" class="difflineplus">+    dateTime = replaceInsert(dateTime, 2, date);</span>
<a href="#l8.722"></a><span id="l8.722" class="difflineplus">+    dateTime = replaceInsert(dateTime, 3, year);</span>
<a href="#l8.723"></a><span id="l8.723" class="difflineplus">+  }</span>
<a href="#l8.724"></a><span id="l8.724" class="difflineplus">+  return dateTime;</span>
<a href="#l8.725"></a><span id="l8.725" class="difflineplus">+}</span>
<a href="#l8.726"></a><span id="l8.726" class="difflineplus">+</span>
<a href="#l8.727"></a><span id="l8.727" class="difflineplus">+/**</span>
<a href="#l8.728"></a><span id="l8.728" class="difflineplus">+ * Helper function to replace a placeholder string with a real string</span>
<a href="#l8.729"></a><span id="l8.729" class="difflineplus">+ *</span>
<a href="#l8.730"></a><span id="l8.730" class="difflineplus">+ * @param aText</span>
<a href="#l8.731"></a><span id="l8.731" class="difflineplus">+ *        Source text containing placeholder (e.g., #1)</span>
<a href="#l8.732"></a><span id="l8.732" class="difflineplus">+ * @param aIndex</span>
<a href="#l8.733"></a><span id="l8.733" class="difflineplus">+ *        Index number of placeholder to replace</span>
<a href="#l8.734"></a><span id="l8.734" class="difflineplus">+ * @param aValue</span>
<a href="#l8.735"></a><span id="l8.735" class="difflineplus">+ *        New string to put in place of placeholder</span>
<a href="#l8.736"></a><span id="l8.736" class="difflineplus">+ * @return The string with placeholder replaced with the new string</span>
<a href="#l8.737"></a><span id="l8.737" class="difflineplus">+ */</span>
<a href="#l8.738"></a><span id="l8.738" class="difflineplus">+function replaceInsert(aText, aIndex, aValue)</span>
<a href="#l8.739"></a><span id="l8.739" class="difflineplus">+{</span>
<a href="#l8.740"></a><span id="l8.740" class="difflineplus">+  return aText.replace(&quot;#&quot; + aIndex, aValue);</span>
<a href="#l8.741"></a><span id="l8.741" class="difflineplus">+}</span>
<a href="#l8.742"></a><span id="l8.742" class="difflineplus">+</span>
<a href="#l8.743"></a><span id="l8.743" class="difflineplus">+/**</span>
<a href="#l8.744"></a><span id="l8.744" class="difflineplus">+ * Helper function to escape some XML chars, so they display properly in</span>
<a href="#l8.745"></a><span id="l8.745" class="difflineplus">+ * innerHTML.</span>
<a href="#l8.746"></a><span id="l8.746" class="difflineplus">+ *</span>
<a href="#l8.747"></a><span id="l8.747" class="difflineplus">+ * @param s</span>
<a href="#l8.748"></a><span id="l8.748" class="difflineplus">+ *        input text</span>
<a href="#l8.749"></a><span id="l8.749" class="difflineplus">+ * @return The string with &lt;, &gt;, and &amp; replaced by the corresponding entities.</span>
<a href="#l8.750"></a><span id="l8.750" class="difflineplus">+ */</span>
<a href="#l8.751"></a><span id="l8.751" class="difflineplus">+function escapeXMLchars(s)</span>
<a href="#l8.752"></a><span id="l8.752" class="difflineplus">+{</span>
<a href="#l8.753"></a><span id="l8.753" class="difflineplus">+    return s.replace(/[&lt;&gt;&amp;]/g, function(s) {</span>
<a href="#l8.754"></a><span id="l8.754" class="difflineplus">+        switch (s) {</span>
<a href="#l8.755"></a><span id="l8.755" class="difflineplus">+            case &quot;&lt;&quot;: return &quot;&amp;lt;&quot;;</span>
<a href="#l8.756"></a><span id="l8.756" class="difflineplus">+            case &quot;&gt;&quot;: return &quot;&amp;gt;&quot;;</span>
<a href="#l8.757"></a><span id="l8.757" class="difflineplus">+            case &quot;&amp;&quot;: return &quot;&amp;amp;&quot;;</span>
<a href="#l8.758"></a><span id="l8.758" class="difflineplus">+            default: throw Error(&quot;Unexpected match&quot;);</span>
<a href="#l8.759"></a><span id="l8.759" class="difflineplus">+            }</span>
<a href="#l8.760"></a><span id="l8.760" class="difflineplus">+        }</span>
<a href="#l8.761"></a><span id="l8.761" class="difflineplus">+    );</span>
<a href="#l8.762"></a><span id="l8.762" class="difflineplus">+}</span>
<a href="#l8.763"></a><span id="l8.763" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/content/threadPane.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/content/threadPane.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -111,22 +111,46 @@ nsMsgDBViewCommandUpdater.prototype =</span>
<a href="#l9.4"></a><span id="l9.4">     goUpdateCommand(&quot;button_junk&quot;);</span>
<a href="#l9.5"></a><span id="l9.5">   },</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7">   updateNextMessageAfterDelete : function()</span>
<a href="#l9.8"></a><span id="l9.8">   {</span>
<a href="#l9.9"></a><span id="l9.9">     SetNextMessageAfterDelete();</span>
<a href="#l9.10"></a><span id="l9.10">   },</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+  summarizeSelection: function()</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+  {</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+    let selectedMsgUris = GetSelectedMessages();</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+    if (!selectedMsgUris || (selectedMsgUris.length == 1)) {</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+      pickMessagePane(&quot;singlemessage&quot;);</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+      return;</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+    }</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+    if (! gPrefBranch.getBoolPref(&quot;mail.operate_on_msgs_in_collapsed_threads&quot;)) {</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+      ClearMessagePane();</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineplus">+      return;</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineplus">+    }</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineplus">+</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineplus">+    let firstThreadId = messenger.msgHdrFromURI(selectedMsgUris[0]).threadId;</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineplus">+    for (let i = 1; i &lt; selectedMsgUris.length; ++i)</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineplus">+    {</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineplus">+      let msgHdr = messenger.msgHdrFromURI(selectedMsgUris[i]);</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineplus">+      if (msgHdr.threadId != firstThreadId) // at least more than one thread</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineplus">+        return summarizeMultipleSelection(selectedMsgUris);</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+    }</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+    // must be just one thread.</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+    summarizeThread(selectedMsgUris);</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineplus">+  },</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineplus">+</span>
<a href="#l9.36"></a><span id="l9.36">   QueryInterface : function(iid)</span>
<a href="#l9.37"></a><span id="l9.37">    {</span>
<a href="#l9.38"></a><span id="l9.38">      if (iid.equals(Components.interfaces.nsIMsgDBViewCommandUpdater) ||</span>
<a href="#l9.39"></a><span id="l9.39">          iid.equals(Components.interfaces.nsISupports))</span>
<a href="#l9.40"></a><span id="l9.40">        return this;</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-	  </span>
<a href="#l9.42"></a><span id="l9.42" class="difflineplus">+</span>
<a href="#l9.43"></a><span id="l9.43">      throw Components.results.NS_NOINTERFACE;</span>
<a href="#l9.44"></a><span id="l9.44">     }</span>
<a href="#l9.45"></a><span id="l9.45"> }</span>
<a href="#l9.46"></a><span id="l9.46"> </span>
<a href="#l9.47"></a><span id="l9.47"> function HandleColumnClick(columnID)</span>
<a href="#l9.48"></a><span id="l9.48"> {</span>
<a href="#l9.49"></a><span id="l9.49">   const columnMap = {dateCol: 'byDate',</span>
<a href="#l9.50"></a><span id="l9.50">                      receivedCol: 'byReceived',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/base/jar.mn</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/base/jar.mn</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -69,15 +69,18 @@ messenger.jar:</span>
<a href="#l10.4"></a><span id="l10.4"> *   content/messenger/viewSourceOverlay.xul         (content/viewSourceOverlay.xul)</span>
<a href="#l10.5"></a><span id="l10.5"> *   content/messenger/configEditorOverlay.xul       (content/configEditorOverlay.xul)</span>
<a href="#l10.6"></a><span id="l10.6">     content/messenger/composerOverlay.css           (content/composerOverlay.css)</span>
<a href="#l10.7"></a><span id="l10.7">     content/messenger/threadPane.js                 (content/threadPane.js)</span>
<a href="#l10.8"></a><span id="l10.8"> #ifdef XP_MACOSX</span>
<a href="#l10.9"></a><span id="l10.9">     content/messenger/macMenuOverlay.xul            (content/macMenuOverlay.xul)</span>
<a href="#l10.10"></a><span id="l10.10"> #endif</span>
<a href="#l10.11"></a><span id="l10.11"> *   content/messenger/baseMenuOverlay.xul           (content/baseMenuOverlay.xul)</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+    content/messenger/selectionsummaries.js         (content/selectionsummaries.js)</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+    content/messenger/multimessageview.css          (content/multimessageview.css)</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+    content/messenger/multimessageview.xhtml        (content/multimessageview.xhtml)</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16"> comm.jar:</span>
<a href="#l10.17"></a><span id="l10.17"> % content communicator %content/communicator/ xpcnativewrappers=yes</span>
<a href="#l10.18"></a><span id="l10.18"> *  content/communicator/contentAreaClick.js         (content/contentAreaClick.js)</span>
<a href="#l10.19"></a><span id="l10.19"> *  content/communicator/utilityOverlay.xul          (content/utilityOverlay.xul)</span>
<a href="#l10.20"></a><span id="l10.20"> *  content/communicator/utilityOverlay.js           (content/utilityOverlay.js)</span>
<a href="#l10.21"></a><span id="l10.21"> *  content/communicator/nsContextMenu.js            (content/nsContextMenu.js)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/locales/en-US/chrome/messenger/messenger.properties</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/messenger.properties</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -169,17 +169,16 @@ inboxFolderName=Inbox</span>
<a href="#l11.4"></a><span id="l11.4"> trashFolderName=Trash</span>
<a href="#l11.5"></a><span id="l11.5"> sentFolderName=Sent</span>
<a href="#l11.6"></a><span id="l11.6"> draftsFolderName=Drafts</span>
<a href="#l11.7"></a><span id="l11.7"> templatesFolderName=Templates</span>
<a href="#l11.8"></a><span id="l11.8"> outboxFolderName=Outbox</span>
<a href="#l11.9"></a><span id="l11.9"> junkFolderName=Junk</span>
<a href="#l11.10"></a><span id="l11.10"> archivesFolderName=Archives</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-</span>
<a href="#l11.13"></a><span id="l11.13"> # Error message for special folder deletion on imap accounts</span>
<a href="#l11.14"></a><span id="l11.14"> # LOCALIZATION NOTE (specialFolderDeletionErr): Do not translate &quot;IMAP&quot; in the line below</span>
<a href="#l11.15"></a><span id="l11.15"> specialFolderDeletionErr=Deletion of special folder %S is not allowed for IMAP accounts.</span>
<a href="#l11.16"></a><span id="l11.16"> specialFolderDeletionErrTitle=Special Folder Deletion</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18"> # &quot;Normal&quot; priority is often blank,</span>
<a href="#l11.19"></a><span id="l11.19"> # depending on the consumers of these strings</span>
<a href="#l11.20"></a><span id="l11.20"> priorityLowest=Lowest</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- /dev/null</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/multimessageview.dtd</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineplus">+&lt;!ENTITY window.title             &quot;Message Summary&quot;&gt;</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineplus">+&lt;!ENTITY selectedmessages.label   &quot;Selected Messages&quot;&gt;</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineplus">+&lt;!ENTITY archive.label            &quot;archive&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- /dev/null</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ b/mail/locales/en-US/chrome/messenger/multimessageview.properties</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -0,0 +1,19 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineplus">+# LOCALIZATION NOTE (selectedNMessages, acrossNThreads): Semi-colon list of plural forms.</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineplus">+# See: http://developer.mozilla.org/en/docs/Localization_and_Plurals</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineplus">+# #1 number of messages</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineplus">+# example: Selected: 23 messages</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineplus">+selectedNMessages=Selected: #1 message;Selected: #1 messages</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineplus">+# #1 number of threads</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineplus">+# example: across 3 threads</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineplus">+acrossNThreads= across #1 thread; across #1 threads</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineplus">+numMsgs=#1 message;#1 messages</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineplus">+countUnread=, #1 unread;, #1 unread</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineplus">+Nmessages=(#1 message);(#1 messages)</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineplus">+</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineplus">+noSubject=(no subject)</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineplus">+# thread and multiple message selection summaries</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineplus">+messagesSize=These messages take up: #1 #2.</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineplus">+yesterday=yesterday</span>
<a href="#l13.23"></a><span id="l13.23" class="difflineplus">+noticeText= (Note: #1 messages are selected, the first #2 are shown)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/locales/jar.mn</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/locales/jar.mn</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1,21 +1,24 @@</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineplus">+</span>
<a href="#l14.5"></a><span id="l14.5"> #filter substitution</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7"> @AB_CD@.jar:</span>
<a href="#l14.8"></a><span id="l14.8"> % locale messenger @AB_CD@ %locale/@AB_CD@/messenger/</span>
<a href="#l14.9"></a><span id="l14.9"> % override chrome://mozapps/locale/downloads/settingsChange.dtd chrome://messenger/locale/downloads/settingsChange.dtd</span>
<a href="#l14.10"></a><span id="l14.10"> % override chrome://global/locale/netError.dtd chrome://messenger/locale/netError.dtd</span>
<a href="#l14.11"></a><span id="l14.11">   locale/@AB_CD@/messenger/credits.dtd                                  (%chrome/messenger/credits.dtd)</span>
<a href="#l14.12"></a><span id="l14.12">   locale/@AB_CD@/messenger/aboutDialog.dtd                              (%chrome/messenger/aboutDialog.dtd)</span>
<a href="#l14.13"></a><span id="l14.13">   locale/@AB_CD@/messenger/aboutRights.dtd                              (%chrome/messenger/aboutRights.dtd)</span>
<a href="#l14.14"></a><span id="l14.14">   locale/@AB_CD@/messenger/aboutRights.properties                       (%chrome/messenger/aboutRights.properties)</span>
<a href="#l14.15"></a><span id="l14.15">   locale/@AB_CD@/messenger/systemIntegrationDialog.dtd                  (%chrome/messenger/systemIntegrationDialog.dtd)  </span>
<a href="#l14.16"></a><span id="l14.16">   locale/@AB_CD@/messenger/virtualFolderProperties.dtd                  (%chrome/messenger/virtualFolderProperties.dtd)</span>
<a href="#l14.17"></a><span id="l14.17">   locale/@AB_CD@/messenger/virtualFolderListDialog.dtd                  (%chrome/messenger/virtualFolderListDialog.dtd)</span>
<a href="#l14.18"></a><span id="l14.18" class="difflineplus">+  locale/@AB_CD@/messenger/multimessageview.properties                  (%chrome/messenger/multimessageview.properties)</span>
<a href="#l14.19"></a><span id="l14.19" class="difflineplus">+  locale/@AB_CD@/messenger/multimessageview.dtd                         (%chrome/messenger/multimessageview.dtd)</span>
<a href="#l14.20"></a><span id="l14.20">   locale/@AB_CD@/messenger/mailOverlay.dtd                              (%chrome/messenger/mailOverlay.dtd)</span>
<a href="#l14.21"></a><span id="l14.21">   locale/@AB_CD@/messenger/messenger.dtd                                (%chrome/messenger/messenger.dtd)</span>
<a href="#l14.22"></a><span id="l14.22">   locale/@AB_CD@/messenger/baseMenuOverlay.dtd                          (%chrome/messenger/baseMenuOverlay.dtd)</span>
<a href="#l14.23"></a><span id="l14.23">   locale/@AB_CD@/messenger/tabmail.dtd                                  (%chrome/messenger/tabmail.dtd)</span>
<a href="#l14.24"></a><span id="l14.24">   locale/@AB_CD@/messenger/msgAccountCentral.dtd                        (%chrome/messenger/msgAccountCentral.dtd)</span>
<a href="#l14.25"></a><span id="l14.25">   locale/@AB_CD@/messenger/SearchDialog.dtd                             (%chrome/messenger/SearchDialog.dtd)</span>
<a href="#l14.26"></a><span id="l14.26">   locale/@AB_CD@/messenger/AccountManager.dtd                           (%chrome/messenger/AccountManager.dtd)</span>
<a href="#l14.27"></a><span id="l14.27">   locale/@AB_CD@/messenger/AccountWizard.dtd                            (%chrome/messenger/AccountWizard.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/themes/gnomestripe/jar.mn</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/themes/gnomestripe/jar.mn</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -20,16 +20,17 @@ classic.jar:</span>
<a href="#l15.4"></a><span id="l15.4">   skin/classic/messenger/junkMail.css                         (mail/junkMail.css)</span>
<a href="#l15.5"></a><span id="l15.5">   skin/classic/messenger/folderMenus.css                      (mail/folderMenus.css)</span>
<a href="#l15.6"></a><span id="l15.6">   skin/classic/messenger/folderPane.css                       (mail/folderPane.css)</span>
<a href="#l15.7"></a><span id="l15.7">   skin/classic/messenger/subscribe.css                        (mail/subscribe.css)</span>
<a href="#l15.8"></a><span id="l15.8">   skin/classic/messenger/virtualFolderListDialog.css          (mail/virtualFolderListDialog.css)</span>
<a href="#l15.9"></a><span id="l15.9">   skin/classic/messenger/searchDialog.css                     (mail/searchDialog.css)</span>
<a href="#l15.10"></a><span id="l15.10">   skin/classic/messenger/msgSelectOffline.css                 (mail/msgSelectOffline.css)</span>
<a href="#l15.11"></a><span id="l15.11">   skin/classic/messenger/filterDialog.css                     (mail/filterDialog.css)</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineplus">+  skin/classic/messenger/multimessageview.css                 (mail/multimessageview.css)</span>
<a href="#l15.13"></a><span id="l15.13">   skin/classic/messenger/dialogs.css                          (mail/dialogs.css)</span>
<a href="#l15.14"></a><span id="l15.14">   skin/classic/messenger/newmailalert.css                     (mail/newmailalert.css)</span>
<a href="#l15.15"></a><span id="l15.15"> * skin/classic/messenger/tabmailBindings.xml                  (mail/tabmailBindings.xml)</span>
<a href="#l15.16"></a><span id="l15.16">   skin/classic/messenger/tabmail.css                          (mail/tabmail.css)</span>
<a href="#l15.17"></a><span id="l15.17">   skin/classic/messenger/editContactOverlay.css               (mail/editContactOverlay.css)</span>
<a href="#l15.18"></a><span id="l15.18">   skin/classic/messenger/starred48.png                        (mail/starred48.png)</span>
<a href="#l15.19"></a><span id="l15.19">   skin/classic/messenger/contactStarred.png                   (mail/contactStarred.png)</span>
<a href="#l15.20"></a><span id="l15.20">   skin/classic/messenger/starContact.png                      (mail/starContact.png)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">new file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- /dev/null</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ b/mail/themes/gnomestripe/mail/multimessageview.css</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -0,0 +1,61 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineplus">+@import url(&quot;chrome://messenger/content/multimessageview.css&quot;);</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineplus">+</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineplus">+/* gnomestripe-specific overrides for multimessageview.css*/</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineplus">+</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineplus">+/* mostly it's about CSS colors not being reliable */</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineplus">+</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineplus">+body {</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineplus">+  background-color: white;</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+}</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineplus">+</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineplus">+.heading.info {</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineplus">+  color: CaptionText;</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineplus">+}</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineplus">+</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineplus">+.count, .date {</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineplus">+  color: InactiveCaptionText;</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineplus">+}</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineplus">+</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineplus">+.info,</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineplus">+.message &gt; .header &gt; .snippet,</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineplus">+.message &gt; .header &gt; .senders {</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineplus">+  color: GrayText;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineplus">+}</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineplus">+</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineplus">+</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineplus">+/* buttons are always tricky */</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineplus">+</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineplus">+</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineplus">+.button {</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineplus">+  -moz-appearance: button;</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineplus">+  font: message-box;</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineplus">+  min-width: 32px !important;</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineplus">+  margin-bottom: 2em;</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineplus">+}</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineplus">+</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineplus">+/* and every trash is different */</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineplus">+</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineplus">+#trash {</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineplus">+  min-height: 28px !important;</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineplus">+  min-width: 32px !important;</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineplus">+  padding: 0px;</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineplus">+}</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineplus">+</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineplus">+.trashButton {</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineplus">+  padding: 2px;</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineplus">+  list-style-image: url(&quot;moz-icon://stock/gtk-delete?size=menu&quot;);</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineplus">+  min-height: 16px !important;</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineplus">+  min-width: 16px !important;</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineplus">+  width: 16px;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineplus">+  height: 16px;</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineplus">+}</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineplus">+</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineplus">+.star {</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineplus">+  width: 12px;</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineplus">+  height: 12px;</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineplus">+  margin-right: 0.5em;</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineplus">+}</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineplus">+</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineplus">+.starred .star {</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineplus">+  background-image: url(&quot;chrome://messenger/skin/icons/flag-col.png&quot;);</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/themes/pinstripe/jar.mn</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/themes/pinstripe/jar.mn</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -1,10 +1,11 @@</span>
<a href="#l17.4"></a><span id="l17.4"> classic.jar:</span>
<a href="#l17.5"></a><span id="l17.5"> % skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineplus">+  skin/classic/messenger/multimessageview.css                    (mail/multimessageview.css)</span>
<a href="#l17.7"></a><span id="l17.7">   skin/classic/messenger/dialogs.css                             (mail/dialogs.css)</span>
<a href="#l17.8"></a><span id="l17.8">   skin/classic/messenger/messenger.css                           (mail/messenger.css)</span>
<a href="#l17.9"></a><span id="l17.9">   skin/classic/messenger/primaryToolbar.css                      (mail/primaryToolbar.css)</span>
<a href="#l17.10"></a><span id="l17.10">   skin/classic/messenger/accountCentral.css                      (mail/accountCentral.css)</span>
<a href="#l17.11"></a><span id="l17.11">   skin/classic/messenger/accountCreation.css                     (mail/accountCreation.css)</span>
<a href="#l17.12"></a><span id="l17.12">   skin/classic/messenger/accountManage.css                       (mail/accountManage.css)</span>
<a href="#l17.13"></a><span id="l17.13">   skin/classic/messenger/accountWizard.css                       (mail/accountWizard.css)</span>
<a href="#l17.14"></a><span id="l17.14">   skin/classic/messenger/messageHeader.css                       (mail/messageHeader.css)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">new file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- /dev/null</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ b/mail/themes/pinstripe/mail/multimessageview.css</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -0,0 +1,72 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineplus">+@import url(&quot;chrome://messenger/content/multimessageview.css&quot;);</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineplus">+</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineplus">+/* pinstripe-specific overrides for multimessageview.css*/</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineplus">+</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineplus">+.button {</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineplus">+  vertical-align: middle;</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineplus">+  margin: 0px 2px;</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineplus">+  -moz-margin-start: 0px;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  -moz-margin-end: 5px;</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+  border: 1px solid #5F5F5F;</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineplus">+  -moz-border-radius: 4px;</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineplus">+  background: url(chrome://global/skin/icons/white-gray-gradient.gif) #A09E9D repeat-x top center;</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineplus">+  min-height: 0;</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineplus">+  min-width: 0;</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineplus">+  padding: 3px;</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineplus">+  min-height: 16px;</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineplus">+}</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineplus">+</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineplus">+.button:hover:active:not([disabled=&quot;true&quot;]) {</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineplus">+   background-image: url(chrome://global/skin/icons/white-gray-gradient-active.gif);</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineplus">+}</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineplus">+</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineplus">+.dualButton { </span>
<a href="#l18.29"></a><span id="l18.29" class="difflineplus">+  -moz-appearance: dualbutton;</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineplus">+}</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineplus">+</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineplus">+.dualButton &gt; .button-menubutton-button {</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineplus">+  -moz-appearance: none;</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineplus">+  padding: 0;</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineplus">+  margin: 0;</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineplus">+  -moz-padding-start: 0px;</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineplus">+  -moz-padding-end: 0px;</span>
<a href="#l18.38"></a><span id="l18.38" class="difflineplus">+  -moz-margin-start: 0px;</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineplus">+  -moz-margin-end: 0px;</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineplus">+  min-width: 1em;</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineplus">+  min-height: 1ex;</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineplus">+}</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineplus">+</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineplus">+.multimessage {</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineplus">+  min-height: 15px;</span>
<a href="#l18.46"></a><span id="l18.46" class="difflineplus">+  margin-top: 3px;</span>
<a href="#l18.47"></a><span id="l18.47" class="difflineplus">+  margin-bottom: 3px;</span>
<a href="#l18.48"></a><span id="l18.48" class="difflineplus">+}</span>
<a href="#l18.49"></a><span id="l18.49" class="difflineplus">+</span>
<a href="#l18.50"></a><span id="l18.50" class="difflineplus">+.starred .star {</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineplus">+  background-image: url(&quot;chrome://messenger/skin/icons/flaggedmail.png&quot;);</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineplus">+}</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineplus">+</span>
<a href="#l18.54"></a><span id="l18.54" class="difflineplus">+.info {</span>
<a href="#l18.55"></a><span id="l18.55" class="difflineplus">+  color: GrayText;</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineplus">+}</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineplus">+</span>
<a href="#l18.58"></a><span id="l18.58" class="difflineplus">+.heading.info {</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineplus">+  color: GrayText;</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineplus">+}</span>
<a href="#l18.61"></a><span id="l18.61" class="difflineplus">+</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineplus">+#trash {</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineplus">+  min-height: 22px !important;</span>
<a href="#l18.64"></a><span id="l18.64" class="difflineplus">+  min-width: 28px !important;</span>
<a href="#l18.65"></a><span id="l18.65" class="difflineplus">+  padding-left: 3px;</span>
<a href="#l18.66"></a><span id="l18.66" class="difflineplus">+}</span>
<a href="#l18.67"></a><span id="l18.67" class="difflineplus">+</span>
<a href="#l18.68"></a><span id="l18.68" class="difflineplus">+.trashButton {</span>
<a href="#l18.69"></a><span id="l18.69" class="difflineplus">+  padding: 2px;</span>
<a href="#l18.70"></a><span id="l18.70" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/folder-trash.png&quot;);</span>
<a href="#l18.71"></a><span id="l18.71" class="difflineplus">+  min-height: 16px !important;</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineplus">+  min-width: 16px !important;</span>
<a href="#l18.73"></a><span id="l18.73" class="difflineplus">+  width: 16px;</span>
<a href="#l18.74"></a><span id="l18.74" class="difflineplus">+  height: 16px;</span>
<a href="#l18.75"></a><span id="l18.75" class="difflineplus">+}</span>
<a href="#l18.76"></a><span id="l18.76" class="difflineplus">+</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/themes/qute/jar.mn</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/themes/qute/jar.mn</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -1,216 +1,217 @@</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineminus">-classic.jar:</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">-+ skin/classic/global/tree.css                                (mail/tree.css)</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">-+ skin/classic/global/tree/sort-asc.gif                       (mail/icons/sort-asc.gif)</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">-+ skin/classic/global/tree/sort-dsc.gif                       (mail/icons/sort-dsc.gif)</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">-  skin/classic/communicator/smileys.css                       (mail/smileys.css)</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">-% skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineminus">-  skin/classic/messenger/primaryToolbar.css                   (mail/primaryToolbar.css)</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineminus">-  skin/classic/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineplus">+classic.jar:</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">++ skin/classic/global/tree.css                                (mail/tree.css)</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">++ skin/classic/global/tree/sort-asc.gif                       (mail/icons/sort-asc.gif)</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineplus">++ skin/classic/global/tree/sort-dsc.gif                       (mail/icons/sort-dsc.gif)</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineplus">+  skin/classic/communicator/smileys.css                       (mail/smileys.css)</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineplus">+% skin messenger classic/1.0 %skin/classic/messenger/</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineplus">+  skin/classic/messenger/primaryToolbar.css                   (mail/primaryToolbar.css)</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineplus">+  skin/classic/messenger/accountCentral.css                   (mail/accountCentral.css)</span>
<a href="#l19.20"></a><span id="l19.20">   skin/classic/messenger/accountCreation.css                  (mail/accountCreation.css)</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-  skin/classic/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineminus">-  skin/classic/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineminus">-  skin/classic/messenger/messageHeader.css                    (mail/messageHeader.css)</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-  skin/classic/messenger/messageBody.css                      (mail/messageBody.css)</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-  skin/classic/messenger/messageQuotes.css                    (mail/messageQuotes.css)</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineminus">-  skin/classic/messenger/messenger.css                        (mail/messenger.css)</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineminus">-  skin/classic/messenger/mailWindow1.css                      (mail/mailWindow1.css)</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineminus">-  skin/classic/messenger/tagColors.css                        (mail/tagColors.css)</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineminus">-  skin/classic/messenger/messageWindow.css                    (mail/messageWindow.css)</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineminus">-  skin/classic/messenger/searchBox.css                        (mail/searchBox.css)</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-  skin/classic/messenger/junkMail.css                         (mail/junkMail.css)</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-  skin/classic/messenger/folderMenus.css                      (mail/folderMenus.css)</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-  skin/classic/messenger/folderPane.css                       (mail/folderPane.css)</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-  skin/classic/messenger/subscribe.css                        (mail/subscribe.css)</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-  skin/classic/messenger/virtualFolderListDialog.css          (mail/virtualFolderListDialog.css)</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineminus">-  skin/classic/messenger/searchDialog.css                     (mail/searchDialog.css)</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineminus">-  skin/classic/messenger/msgSelectOffline.css                 (mail/msgSelectOffline.css)</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-  skin/classic/messenger/filterDialog.css                     (mail/filterDialog.css)</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineminus">-  skin/classic/messenger/dialogs.css                          (mail/dialogs.css)</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineminus">-  skin/classic/messenger/newmailalert.css                     (mail/newmailalert.css)</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineminus">-* skin/classic/messenger/tabmailBindings.xml                  (mail/tabmailBindings.xml)</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineminus">-  skin/classic/messenger/tabmail.css                          (mail/tabmail.css)</span>
<a href="#l19.43"></a><span id="l19.43" class="difflineminus">-  skin/classic/messenger/editContactOverlay.css               (mail/editContactOverlay.css)</span>
<a href="#l19.44"></a><span id="l19.44" class="difflineminus">-  skin/classic/messenger/starred48.png                        (mail/starred48.png)</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineminus">-  skin/classic/messenger/contactStarred.png                   (mail/contactStarred.png)</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineminus">-  skin/classic/messenger/starContact.png                      (mail/starContact.png)</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">-  skin/classic/messenger/activity/activity.css                   (mail/activity/activity.css)</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineminus">-  skin/classic/messenger/activity/buttons.png                    (mail/activity/buttons.png)  </span>
<a href="#l19.49"></a><span id="l19.49" class="difflineminus">-  skin/classic/messenger/activity/defaultProcessIcon.png         (mail/activity/defaultProcessIcon.png)</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineminus">-  skin/classic/messenger/activity/defaultEventIcon.png           (mail/activity/defaultEventIcon.png)</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineminus">-  skin/classic/messenger/activity/defaultWarningIcon.png         (mail/activity/defaultWarningIcon.png)</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineminus">-  skin/classic/messenger/activity/undoIcon.png                   (mail/activity/undoIcon.png)</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineminus">-  skin/classic/messenger/activity/syncMailIcon.png               (mail/activity/syncMailIcon.png)</span>
<a href="#l19.54"></a><span id="l19.54" class="difflineminus">-  skin/classic/messenger/activity/sendMailIcon.png               (mail/activity/sendMailIcon.png)</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineminus">-  skin/classic/messenger/activity/removeItemIcon.png             (mail/activity/removeItemIcon.png)</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineminus">-  skin/classic/messenger/activity/addItemIcon.png                (mail/activity/addItemIcon.png)</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineminus">-  skin/classic/messenger/activity/moveMailIcon.png               (mail/activity/moveMailIcon.png)</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineminus">-  skin/classic/messenger/activity/copyMailIcon.png               (mail/activity/copyMailIcon.png)</span>
<a href="#l19.59"></a><span id="l19.59" class="difflineminus">-  skin/classic/messenger/activity/deleteMailIcon.png             (mail/activity/deleteMailIcon.png)</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineminus">-  skin/classic/messenger/activity/compactMailIcon.png            (mail/activity/compactMailIcon.png)</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineminus">-  skin/classic/messenger/activity/indexMailIcon.png              (mail/activity/indexMailIcon.png)</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineminus">-  skin/classic/messenger/addressbook/addressbook.css          (mail/addrbook/addressbook.css)</span>
<a href="#l19.63"></a><span id="l19.63" class="difflineminus">-  skin/classic/messenger/addressbook/abContactsPanel.css      (mail/addrbook/abContactsPanel.css)</span>
<a href="#l19.64"></a><span id="l19.64" class="difflineminus">-  skin/classic/messenger/addressbook/cardDialog.css           (mail/addrbook/cardDialog.css)</span>
<a href="#l19.65"></a><span id="l19.65" class="difflineminus">-  skin/classic/messenger/addressbook/abResultsPane.css        (mail/addrbook/abResultsPane.css)</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-  skin/classic/messenger/addressbook/icons/abcard.png         (mail/addrbook/abcard.png)</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineminus">-  skin/classic/messenger/addressbook/icons/addrbook.png       (mail/addrbook/addrbook.png)</span>
<a href="#l19.68"></a><span id="l19.68" class="difflineminus">-  skin/classic/messenger/addressbook/icons/ablist.png         (mail/addrbook/ablist.png)</span>
<a href="#l19.69"></a><span id="l19.69" class="difflineminus">-  skin/classic/messenger/addressbook/icons/addressbook-toolbar.png         (mail/addrbook/addressbook-toolbar.png)</span>
<a href="#l19.70"></a><span id="l19.70" class="difflineminus">-  skin/classic/messenger/addressbook/icons/addressbook-toolbar-small.png   (mail/addrbook/addressbook-toolbar-small.png)</span>
<a href="#l19.71"></a><span id="l19.71" class="difflineminus">-  skin/classic/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineminus">-  skin/classic/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l19.73"></a><span id="l19.73" class="difflineminus">-  skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l19.74"></a><span id="l19.74" class="difflineminus">-  skin/classic/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l19.75"></a><span id="l19.75" class="difflineminus">-  skin/classic/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose.css)</span>
<a href="#l19.76"></a><span id="l19.76" class="difflineminus">-  skin/classic/messenger/messengercompose/compose-toolbar.png  (mail/compose/compose-toolbar.png)</span>
<a href="#l19.77"></a><span id="l19.77" class="difflineminus">-  skin/classic/messenger/messengercompose/compose-toolbar-small.png   (mail/compose/compose-toolbar-small.png)</span>
<a href="#l19.78"></a><span id="l19.78" class="difflineminus">-  skin/classic/messenger/messengercompose/format-buttons.png  (mail/compose/format-buttons.png)</span>
<a href="#l19.79"></a><span id="l19.79" class="difflineminus">-% skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l19.80"></a><span id="l19.80" class="difflineminus">-  skin/classic/messenger-newsblog/feed-subscriptions.css      (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l19.81"></a><span id="l19.81" class="difflineminus">-  skin/classic/messenger-newsblog/icons/rss-feed.png          (mail/newsblog/rss-feed.png)</span>
<a href="#l19.82"></a><span id="l19.82" class="difflineminus">-  skin/classic/messenger-newsblog/icons/server-rss.png        (mail/newsblog/server-rss.png)</span>
<a href="#l19.83"></a><span id="l19.83" class="difflineminus">-  skin/classic/messenger/preferences/preferences.css          (mail/preferences/preferences.css)</span>
<a href="#l19.84"></a><span id="l19.84" class="difflineminus">-  skin/classic/messenger/preferences/general.png              (mail/preferences/general.png)</span>
<a href="#l19.85"></a><span id="l19.85" class="difflineminus">-  skin/classic/messenger/preferences/display.png              (mail/preferences/display.png)</span>
<a href="#l19.86"></a><span id="l19.86" class="difflineminus">-  skin/classic/messenger/preferences/composition.png          (mail/preferences/composition.png)</span>
<a href="#l19.87"></a><span id="l19.87" class="difflineminus">-  skin/classic/messenger/preferences/security.png             (mail/preferences/security.png)</span>
<a href="#l19.88"></a><span id="l19.88" class="difflineminus">-  skin/classic/messenger/preferences/attachments.png          (mail/preferences/attachments.png)</span>
<a href="#l19.89"></a><span id="l19.89" class="difflineminus">-  skin/classic/messenger/preferences/advanced.png             (mail/preferences/advanced.png)</span>
<a href="#l19.90"></a><span id="l19.90" class="difflineminus">-  skin/classic/messenger/preferences/background.png           (mail/preferences/background.png)</span>
<a href="#l19.91"></a><span id="l19.91" class="difflineminus">-  skin/classic/messenger/preferences/hover.png                (mail/preferences/hover.png)</span>
<a href="#l19.92"></a><span id="l19.92" class="difflineminus">-  skin/classic/messenger/preferences/selected.png             (mail/preferences/selected.png)</span>
<a href="#l19.93"></a><span id="l19.93" class="difflineminus">-  skin/classic/messenger/smime/msgCompSMIMEOverlay.css        (mail/smime/msgCompSMIMEOverlay.css)</span>
<a href="#l19.94"></a><span id="l19.94" class="difflineminus">-  skin/classic/messenger/smime/msgHdrViewSMIMEOverlay.css     (mail/smime/msgHdrViewSMIMEOverlay.css)</span>
<a href="#l19.95"></a><span id="l19.95" class="difflineminus">-  skin/classic/messenger/smime/msgReadSMIMEOverlay.css        (mail/smime/msgReadSMIMEOverlay.css)</span>
<a href="#l19.96"></a><span id="l19.96" class="difflineminus">-  skin/classic/messenger/smime/msgReadSecurityInfo.css        (mail/smime/msgReadSecurityInfo.css)</span>
<a href="#l19.97"></a><span id="l19.97" class="difflineminus">-  skin/classic/messenger/smime/msgCompSecurityInfo.css        (mail/smime/msgCompSecurityInfo.css)</span>
<a href="#l19.98"></a><span id="l19.98" class="difflineminus">-  skin/classic/messenger/smime/certFetchingStatus.css         (mail/smime/certFetchingStatus.css)</span>
<a href="#l19.99"></a><span id="l19.99" class="difflineminus">-  skin/classic/messenger/smime/icons/hdrCryptoNotOk.png       (mail/smime/hdrCryptoNotOk.png)</span>
<a href="#l19.100"></a><span id="l19.100" class="difflineminus">-  skin/classic/messenger/smime/icons/hdrCryptoOk.png          (mail/smime/hdrCryptoOk.png)</span>
<a href="#l19.101"></a><span id="l19.101" class="difflineminus">-  skin/classic/messenger/smime/icons/hdrSignNotOk.png         (mail/smime/hdrSignNotOk.png)</span>
<a href="#l19.102"></a><span id="l19.102" class="difflineminus">-  skin/classic/messenger/smime/icons/hdrSignOk.png            (mail/smime/hdrSignOk.png)</span>
<a href="#l19.103"></a><span id="l19.103" class="difflineminus">-  skin/classic/messenger/smime/icons/hdrSignUnknown.png       (mail/smime/hdrSignUnknown.png)</span>
<a href="#l19.104"></a><span id="l19.104" class="difflineminus">-  skin/classic/messenger/smime/icons/sbCryptoNotOk.png        (mail/smime/sbCryptoNotOk.png)</span>
<a href="#l19.105"></a><span id="l19.105" class="difflineminus">-  skin/classic/messenger/smime/icons/sbCryptoOk.png           (mail/smime/sbCryptoOk.png)</span>
<a href="#l19.106"></a><span id="l19.106" class="difflineminus">-  skin/classic/messenger/smime/icons/sbSignNotOk.png          (mail/smime/sbSignNotOk.png)</span>
<a href="#l19.107"></a><span id="l19.107" class="difflineminus">-  skin/classic/messenger/smime/icons/sbSignOk.png             (mail/smime/sbSignOk.png)</span>
<a href="#l19.108"></a><span id="l19.108" class="difflineminus">-  skin/classic/messenger/smime/icons/sbSignUnknown.png        (mail/smime/sbSignUnknown.png)</span>
<a href="#l19.109"></a><span id="l19.109" class="difflineminus">-  skin/classic/messenger/icons/new-mail-alert.png             (mail/icons/new-mail-alert.png)</span>
<a href="#l19.110"></a><span id="l19.110" class="difflineminus">-  skin/classic/messenger/icons/readmail.png                   (mail/icons/readmail.png)</span>
<a href="#l19.111"></a><span id="l19.111" class="difflineminus">-  skin/classic/messenger/icons/mail-toolbar.png               (mail/icons/mail-toolbar.png)</span>
<a href="#l19.112"></a><span id="l19.112" class="difflineminus">-  skin/classic/messenger/icons/mail-toolbar-small.png         (mail/icons/mail-toolbar-small.png)</span>
<a href="#l19.113"></a><span id="l19.113" class="difflineminus">-  skin/classic/messenger/icons/folder.png                     (mail/icons/folder.png)</span>
<a href="#l19.114"></a><span id="l19.114" class="difflineminus">-  skin/classic/messenger/icons/message.png                    (mail/icons/message.png)</span>
<a href="#l19.115"></a><span id="l19.115" class="difflineminus">-  skin/classic/messenger/icons/attachment-deleted.png         (mail/icons/attachment-deleted.png)</span>
<a href="#l19.116"></a><span id="l19.116" class="difflineminus">-  skin/classic/messenger/icons/attachment-deleted-large.png   (mail/icons/attachment-deleted-large.png)</span>
<a href="#l19.117"></a><span id="l19.117" class="difflineminus">-  skin/classic/messenger/icons/attachment-col.png             (mail/icons/attachment-col.png)</span>
<a href="#l19.118"></a><span id="l19.118" class="difflineminus">-  skin/classic/messenger/icons/attachment.png                 (mail/icons/attachment.png)</span>
<a href="#l19.119"></a><span id="l19.119" class="difflineminus">-  skin/classic/messenger/icons/junk-col.png                   (mail/icons/junk-col.png)</span>
<a href="#l19.120"></a><span id="l19.120" class="difflineminus">-  skin/classic/messenger/icons/thread-col.png                 (mail/icons/thread-col.png)</span>
<a href="#l19.121"></a><span id="l19.121" class="difflineminus">-  skin/classic/messenger/icons/thread-col-sorta.png           (mail/icons/thread-col-sorta.png)</span>
<a href="#l19.122"></a><span id="l19.122" class="difflineminus">-  skin/classic/messenger/icons/thread-col-sortd.png           (mail/icons/thread-col-sortd.png)</span>
<a href="#l19.123"></a><span id="l19.123" class="difflineminus">-  skin/classic/messenger/icons/thread.png                     (mail/icons/thread.png)</span>
<a href="#l19.124"></a><span id="l19.124" class="difflineminus">-  skin/classic/messenger/icons/thread-ignored.png             (mail/icons/thread-ignored.png)</span>
<a href="#l19.125"></a><span id="l19.125" class="difflineminus">-  skin/classic/messenger/icons/message-ignored.png            (mail/icons/message-ignored.png)</span>
<a href="#l19.126"></a><span id="l19.126" class="difflineminus">-  skin/classic/messenger/icons/thread-watched.png             (mail/icons/thread-watched.png)</span>
<a href="#l19.127"></a><span id="l19.127" class="difflineminus">-  skin/classic/messenger/icons/flag-col.png                   (mail/icons/flag-col.png)</span>
<a href="#l19.128"></a><span id="l19.128" class="difflineminus">-  skin/classic/messenger/icons/flag.png                       (mail/icons/flag.png)</span>
<a href="#l19.129"></a><span id="l19.129" class="difflineminus">-  skin/classic/messenger/icons/flag-empty.png                 (mail/icons/flag-empty.png)</span>
<a href="#l19.130"></a><span id="l19.130" class="difflineminus">-  skin/classic/messenger/icons/server.png                     (mail/icons/server.png)</span>
<a href="#l19.131"></a><span id="l19.131" class="difflineminus">-  skin/classic/messenger/icons/readcol.png                    (mail/icons/readcol.png)</span>
<a href="#l19.132"></a><span id="l19.132" class="difflineminus">-  skin/classic/messenger/icons/unreadmail.png                 (mail/icons/unreadmail.png)</span>
<a href="#l19.133"></a><span id="l19.133" class="difflineminus">-  skin/classic/messenger/icons/Search-bar.png                 (mail/icons/Search-bar.png)</span>
<a href="#l19.134"></a><span id="l19.134" class="difflineminus">-  skin/classic/messenger/icons/search-arrow.gif               (mail/icons/search-arrow.gif)</span>
<a href="#l19.135"></a><span id="l19.135" class="difflineminus">-  skin/classic/messenger/icons/quick-search-clear.png         (mail/icons/quick-search-clear.png)</span>
<a href="#l19.136"></a><span id="l19.136" class="difflineminus">-  skin/classic/messenger/icons/close-button.png               (mail/icons/close-button.png)</span>
<a href="#l19.137"></a><span id="l19.137" class="difflineminus">-  skin/classic/messenger/icons/remote-blocked.png             (mail/icons/remote-blocked.png)</span>
<a href="#l19.138"></a><span id="l19.138" class="difflineminus">-  skin/classic/messenger/icons/phishing.png                   (mail/icons/phishing.png)</span>
<a href="#l19.139"></a><span id="l19.139" class="difflineminus">-  skin/classic/messenger/icons/junk.png                       (mail/icons/junk.png)</span>
<a href="#l19.140"></a><span id="l19.140" class="difflineminus">-  skin/classic/messenger/icons/check.gif                      (mail/icons/check.gif)</span>
<a href="#l19.141"></a><span id="l19.141" class="difflineminus">-  skin/classic/messenger/icons/notchecked.gif                 (mail/icons/notchecked.gif)</span>
<a href="#l19.142"></a><span id="l19.142" class="difflineminus">-  skin/classic/messenger/icons/online.png                     (mail/icons/online.png)</span>
<a href="#l19.143"></a><span id="l19.143" class="difflineminus">-  skin/classic/messenger/icons/offline.png                    (mail/icons/offline.png)</span>
<a href="#l19.144"></a><span id="l19.144" class="difflineminus">-  skin/classic/messenger/icons/row.png                        (mail/icons/row.png)</span>
<a href="#l19.145"></a><span id="l19.145" class="difflineplus">+  skin/classic/messenger/accountManage.css                    (mail/accountManage.css)</span>
<a href="#l19.146"></a><span id="l19.146" class="difflineplus">+  skin/classic/messenger/accountWizard.css                    (mail/accountWizard.css)</span>
<a href="#l19.147"></a><span id="l19.147" class="difflineplus">+  skin/classic/messenger/messageHeader.css                    (mail/messageHeader.css)</span>
<a href="#l19.148"></a><span id="l19.148" class="difflineplus">+  skin/classic/messenger/messageBody.css                      (mail/messageBody.css)</span>
<a href="#l19.149"></a><span id="l19.149" class="difflineplus">+  skin/classic/messenger/messageQuotes.css                    (mail/messageQuotes.css)</span>
<a href="#l19.150"></a><span id="l19.150" class="difflineplus">+  skin/classic/messenger/messenger.css                        (mail/messenger.css)</span>
<a href="#l19.151"></a><span id="l19.151" class="difflineplus">+  skin/classic/messenger/mailWindow1.css                      (mail/mailWindow1.css)</span>
<a href="#l19.152"></a><span id="l19.152" class="difflineplus">+  skin/classic/messenger/tagColors.css                        (mail/tagColors.css)</span>
<a href="#l19.153"></a><span id="l19.153" class="difflineplus">+  skin/classic/messenger/messageWindow.css                    (mail/messageWindow.css)</span>
<a href="#l19.154"></a><span id="l19.154" class="difflineplus">+  skin/classic/messenger/searchBox.css                        (mail/searchBox.css)</span>
<a href="#l19.155"></a><span id="l19.155" class="difflineplus">+  skin/classic/messenger/junkMail.css                         (mail/junkMail.css)</span>
<a href="#l19.156"></a><span id="l19.156" class="difflineplus">+  skin/classic/messenger/folderMenus.css                      (mail/folderMenus.css)</span>
<a href="#l19.157"></a><span id="l19.157" class="difflineplus">+  skin/classic/messenger/folderPane.css                       (mail/folderPane.css)</span>
<a href="#l19.158"></a><span id="l19.158" class="difflineplus">+  skin/classic/messenger/subscribe.css                        (mail/subscribe.css)</span>
<a href="#l19.159"></a><span id="l19.159" class="difflineplus">+  skin/classic/messenger/virtualFolderListDialog.css          (mail/virtualFolderListDialog.css)</span>
<a href="#l19.160"></a><span id="l19.160" class="difflineplus">+  skin/classic/messenger/searchDialog.css                     (mail/searchDialog.css)</span>
<a href="#l19.161"></a><span id="l19.161" class="difflineplus">+  skin/classic/messenger/msgSelectOffline.css                 (mail/msgSelectOffline.css)</span>
<a href="#l19.162"></a><span id="l19.162" class="difflineplus">+  skin/classic/messenger/filterDialog.css                     (mail/filterDialog.css)</span>
<a href="#l19.163"></a><span id="l19.163" class="difflineplus">+  skin/classic/messenger/dialogs.css                          (mail/dialogs.css)</span>
<a href="#l19.164"></a><span id="l19.164" class="difflineplus">+  skin/classic/messenger/multimessageview.css                 (mail/multimessageview.css)</span>
<a href="#l19.165"></a><span id="l19.165" class="difflineplus">+  skin/classic/messenger/newmailalert.css                     (mail/newmailalert.css)</span>
<a href="#l19.166"></a><span id="l19.166" class="difflineplus">+* skin/classic/messenger/tabmailBindings.xml                  (mail/tabmailBindings.xml)</span>
<a href="#l19.167"></a><span id="l19.167" class="difflineplus">+  skin/classic/messenger/tabmail.css                          (mail/tabmail.css)</span>
<a href="#l19.168"></a><span id="l19.168" class="difflineplus">+  skin/classic/messenger/editContactOverlay.css               (mail/editContactOverlay.css)</span>
<a href="#l19.169"></a><span id="l19.169" class="difflineplus">+  skin/classic/messenger/starred48.png                        (mail/starred48.png)</span>
<a href="#l19.170"></a><span id="l19.170" class="difflineplus">+  skin/classic/messenger/contactStarred.png                   (mail/contactStarred.png)</span>
<a href="#l19.171"></a><span id="l19.171" class="difflineplus">+  skin/classic/messenger/starContact.png                      (mail/starContact.png)</span>
<a href="#l19.172"></a><span id="l19.172" class="difflineplus">+  skin/classic/messenger/activity/activity.css                   (mail/activity/activity.css)</span>
<a href="#l19.173"></a><span id="l19.173" class="difflineplus">+  skin/classic/messenger/activity/buttons.png                    (mail/activity/buttons.png)  </span>
<a href="#l19.174"></a><span id="l19.174" class="difflineplus">+  skin/classic/messenger/activity/defaultProcessIcon.png         (mail/activity/defaultProcessIcon.png)</span>
<a href="#l19.175"></a><span id="l19.175" class="difflineplus">+  skin/classic/messenger/activity/defaultEventIcon.png           (mail/activity/defaultEventIcon.png)</span>
<a href="#l19.176"></a><span id="l19.176" class="difflineplus">+  skin/classic/messenger/activity/defaultWarningIcon.png         (mail/activity/defaultWarningIcon.png)</span>
<a href="#l19.177"></a><span id="l19.177" class="difflineplus">+  skin/classic/messenger/activity/undoIcon.png                   (mail/activity/undoIcon.png)</span>
<a href="#l19.178"></a><span id="l19.178" class="difflineplus">+  skin/classic/messenger/activity/syncMailIcon.png               (mail/activity/syncMailIcon.png)</span>
<a href="#l19.179"></a><span id="l19.179" class="difflineplus">+  skin/classic/messenger/activity/sendMailIcon.png               (mail/activity/sendMailIcon.png)</span>
<a href="#l19.180"></a><span id="l19.180" class="difflineplus">+  skin/classic/messenger/activity/removeItemIcon.png             (mail/activity/removeItemIcon.png)</span>
<a href="#l19.181"></a><span id="l19.181" class="difflineplus">+  skin/classic/messenger/activity/addItemIcon.png                (mail/activity/addItemIcon.png)</span>
<a href="#l19.182"></a><span id="l19.182" class="difflineplus">+  skin/classic/messenger/activity/moveMailIcon.png               (mail/activity/moveMailIcon.png)</span>
<a href="#l19.183"></a><span id="l19.183" class="difflineplus">+  skin/classic/messenger/activity/copyMailIcon.png               (mail/activity/copyMailIcon.png)</span>
<a href="#l19.184"></a><span id="l19.184" class="difflineplus">+  skin/classic/messenger/activity/deleteMailIcon.png             (mail/activity/deleteMailIcon.png)</span>
<a href="#l19.185"></a><span id="l19.185" class="difflineplus">+  skin/classic/messenger/activity/compactMailIcon.png            (mail/activity/compactMailIcon.png)</span>
<a href="#l19.186"></a><span id="l19.186" class="difflineplus">+  skin/classic/messenger/activity/indexMailIcon.png              (mail/activity/indexMailIcon.png)</span>
<a href="#l19.187"></a><span id="l19.187" class="difflineplus">+  skin/classic/messenger/addressbook/addressbook.css          (mail/addrbook/addressbook.css)</span>
<a href="#l19.188"></a><span id="l19.188" class="difflineplus">+  skin/classic/messenger/addressbook/abContactsPanel.css      (mail/addrbook/abContactsPanel.css)</span>
<a href="#l19.189"></a><span id="l19.189" class="difflineplus">+  skin/classic/messenger/addressbook/cardDialog.css           (mail/addrbook/cardDialog.css)</span>
<a href="#l19.190"></a><span id="l19.190" class="difflineplus">+  skin/classic/messenger/addressbook/abResultsPane.css        (mail/addrbook/abResultsPane.css)</span>
<a href="#l19.191"></a><span id="l19.191" class="difflineplus">+  skin/classic/messenger/addressbook/icons/abcard.png         (mail/addrbook/abcard.png)</span>
<a href="#l19.192"></a><span id="l19.192" class="difflineplus">+  skin/classic/messenger/addressbook/icons/addrbook.png       (mail/addrbook/addrbook.png)</span>
<a href="#l19.193"></a><span id="l19.193" class="difflineplus">+  skin/classic/messenger/addressbook/icons/ablist.png         (mail/addrbook/ablist.png)</span>
<a href="#l19.194"></a><span id="l19.194" class="difflineplus">+  skin/classic/messenger/addressbook/icons/addressbook-toolbar.png         (mail/addrbook/addressbook-toolbar.png)</span>
<a href="#l19.195"></a><span id="l19.195" class="difflineplus">+  skin/classic/messenger/addressbook/icons/addressbook-toolbar-small.png   (mail/addrbook/addressbook-toolbar-small.png)</span>
<a href="#l19.196"></a><span id="l19.196" class="difflineplus">+  skin/classic/messenger/addressbook/icons/abcard-large.png   (mail/addrbook/abcard-large.png)</span>
<a href="#l19.197"></a><span id="l19.197" class="difflineplus">+  skin/classic/messenger/addressbook/icons/remote-addrbook.png (mail/addrbook/remote-addrbook.png)</span>
<a href="#l19.198"></a><span id="l19.198" class="difflineplus">+  skin/classic/messenger/addressbook/icons/remote-addrbook-error.png      (mail/addrbook/remote-addrbook-error.png)</span>
<a href="#l19.199"></a><span id="l19.199" class="difflineplus">+  skin/classic/messenger/addressbook/icons/secure-remote-addrbook.png     (mail/addrbook/secure-remote-addrbook.png)</span>
<a href="#l19.200"></a><span id="l19.200" class="difflineplus">+  skin/classic/messenger/messengercompose/messengercompose.css (mail/compose/messengercompose.css)</span>
<a href="#l19.201"></a><span id="l19.201" class="difflineplus">+  skin/classic/messenger/messengercompose/compose-toolbar.png  (mail/compose/compose-toolbar.png)</span>
<a href="#l19.202"></a><span id="l19.202" class="difflineplus">+  skin/classic/messenger/messengercompose/compose-toolbar-small.png   (mail/compose/compose-toolbar-small.png)</span>
<a href="#l19.203"></a><span id="l19.203" class="difflineplus">+  skin/classic/messenger/messengercompose/format-buttons.png  (mail/compose/format-buttons.png)</span>
<a href="#l19.204"></a><span id="l19.204" class="difflineplus">+% skin messenger-newsblog classic/1.0 %skin/classic/messenger-newsblog/</span>
<a href="#l19.205"></a><span id="l19.205" class="difflineplus">+  skin/classic/messenger-newsblog/feed-subscriptions.css      (mail/newsblog/feed-subscriptions.css)</span>
<a href="#l19.206"></a><span id="l19.206" class="difflineplus">+  skin/classic/messenger-newsblog/icons/rss-feed.png          (mail/newsblog/rss-feed.png)</span>
<a href="#l19.207"></a><span id="l19.207" class="difflineplus">+  skin/classic/messenger-newsblog/icons/server-rss.png        (mail/newsblog/server-rss.png)</span>
<a href="#l19.208"></a><span id="l19.208" class="difflineplus">+  skin/classic/messenger/preferences/preferences.css          (mail/preferences/preferences.css)</span>
<a href="#l19.209"></a><span id="l19.209" class="difflineplus">+  skin/classic/messenger/preferences/general.png              (mail/preferences/general.png)</span>
<a href="#l19.210"></a><span id="l19.210" class="difflineplus">+  skin/classic/messenger/preferences/display.png              (mail/preferences/display.png)</span>
<a href="#l19.211"></a><span id="l19.211" class="difflineplus">+  skin/classic/messenger/preferences/composition.png          (mail/preferences/composition.png)</span>
<a href="#l19.212"></a><span id="l19.212" class="difflineplus">+  skin/classic/messenger/preferences/security.png             (mail/preferences/security.png)</span>
<a href="#l19.213"></a><span id="l19.213" class="difflineplus">+  skin/classic/messenger/preferences/attachments.png          (mail/preferences/attachments.png)</span>
<a href="#l19.214"></a><span id="l19.214" class="difflineplus">+  skin/classic/messenger/preferences/advanced.png             (mail/preferences/advanced.png)</span>
<a href="#l19.215"></a><span id="l19.215" class="difflineplus">+  skin/classic/messenger/preferences/background.png           (mail/preferences/background.png)</span>
<a href="#l19.216"></a><span id="l19.216" class="difflineplus">+  skin/classic/messenger/preferences/hover.png                (mail/preferences/hover.png)</span>
<a href="#l19.217"></a><span id="l19.217" class="difflineplus">+  skin/classic/messenger/preferences/selected.png             (mail/preferences/selected.png)</span>
<a href="#l19.218"></a><span id="l19.218" class="difflineplus">+  skin/classic/messenger/smime/msgCompSMIMEOverlay.css        (mail/smime/msgCompSMIMEOverlay.css)</span>
<a href="#l19.219"></a><span id="l19.219" class="difflineplus">+  skin/classic/messenger/smime/msgHdrViewSMIMEOverlay.css     (mail/smime/msgHdrViewSMIMEOverlay.css)</span>
<a href="#l19.220"></a><span id="l19.220" class="difflineplus">+  skin/classic/messenger/smime/msgReadSMIMEOverlay.css        (mail/smime/msgReadSMIMEOverlay.css)</span>
<a href="#l19.221"></a><span id="l19.221" class="difflineplus">+  skin/classic/messenger/smime/msgReadSecurityInfo.css        (mail/smime/msgReadSecurityInfo.css)</span>
<a href="#l19.222"></a><span id="l19.222" class="difflineplus">+  skin/classic/messenger/smime/msgCompSecurityInfo.css        (mail/smime/msgCompSecurityInfo.css)</span>
<a href="#l19.223"></a><span id="l19.223" class="difflineplus">+  skin/classic/messenger/smime/certFetchingStatus.css         (mail/smime/certFetchingStatus.css)</span>
<a href="#l19.224"></a><span id="l19.224" class="difflineplus">+  skin/classic/messenger/smime/icons/hdrCryptoNotOk.png       (mail/smime/hdrCryptoNotOk.png)</span>
<a href="#l19.225"></a><span id="l19.225" class="difflineplus">+  skin/classic/messenger/smime/icons/hdrCryptoOk.png          (mail/smime/hdrCryptoOk.png)</span>
<a href="#l19.226"></a><span id="l19.226" class="difflineplus">+  skin/classic/messenger/smime/icons/hdrSignNotOk.png         (mail/smime/hdrSignNotOk.png)</span>
<a href="#l19.227"></a><span id="l19.227" class="difflineplus">+  skin/classic/messenger/smime/icons/hdrSignOk.png            (mail/smime/hdrSignOk.png)</span>
<a href="#l19.228"></a><span id="l19.228" class="difflineplus">+  skin/classic/messenger/smime/icons/hdrSignUnknown.png       (mail/smime/hdrSignUnknown.png)</span>
<a href="#l19.229"></a><span id="l19.229" class="difflineplus">+  skin/classic/messenger/smime/icons/sbCryptoNotOk.png        (mail/smime/sbCryptoNotOk.png)</span>
<a href="#l19.230"></a><span id="l19.230" class="difflineplus">+  skin/classic/messenger/smime/icons/sbCryptoOk.png           (mail/smime/sbCryptoOk.png)</span>
<a href="#l19.231"></a><span id="l19.231" class="difflineplus">+  skin/classic/messenger/smime/icons/sbSignNotOk.png          (mail/smime/sbSignNotOk.png)</span>
<a href="#l19.232"></a><span id="l19.232" class="difflineplus">+  skin/classic/messenger/smime/icons/sbSignOk.png             (mail/smime/sbSignOk.png)</span>
<a href="#l19.233"></a><span id="l19.233" class="difflineplus">+  skin/classic/messenger/smime/icons/sbSignUnknown.png        (mail/smime/sbSignUnknown.png)</span>
<a href="#l19.234"></a><span id="l19.234" class="difflineplus">+  skin/classic/messenger/icons/new-mail-alert.png             (mail/icons/new-mail-alert.png)</span>
<a href="#l19.235"></a><span id="l19.235" class="difflineplus">+  skin/classic/messenger/icons/readmail.png                   (mail/icons/readmail.png)</span>
<a href="#l19.236"></a><span id="l19.236" class="difflineplus">+  skin/classic/messenger/icons/mail-toolbar.png               (mail/icons/mail-toolbar.png)</span>
<a href="#l19.237"></a><span id="l19.237" class="difflineplus">+  skin/classic/messenger/icons/mail-toolbar-small.png         (mail/icons/mail-toolbar-small.png)</span>
<a href="#l19.238"></a><span id="l19.238" class="difflineplus">+  skin/classic/messenger/icons/folder.png                     (mail/icons/folder.png)</span>
<a href="#l19.239"></a><span id="l19.239" class="difflineplus">+  skin/classic/messenger/icons/message.png                    (mail/icons/message.png)</span>
<a href="#l19.240"></a><span id="l19.240" class="difflineplus">+  skin/classic/messenger/icons/attachment-deleted.png         (mail/icons/attachment-deleted.png)</span>
<a href="#l19.241"></a><span id="l19.241" class="difflineplus">+  skin/classic/messenger/icons/attachment-deleted-large.png   (mail/icons/attachment-deleted-large.png)</span>
<a href="#l19.242"></a><span id="l19.242" class="difflineplus">+  skin/classic/messenger/icons/attachment-col.png             (mail/icons/attachment-col.png)</span>
<a href="#l19.243"></a><span id="l19.243" class="difflineplus">+  skin/classic/messenger/icons/attachment.png                 (mail/icons/attachment.png)</span>
<a href="#l19.244"></a><span id="l19.244" class="difflineplus">+  skin/classic/messenger/icons/junk-col.png                   (mail/icons/junk-col.png)</span>
<a href="#l19.245"></a><span id="l19.245" class="difflineplus">+  skin/classic/messenger/icons/thread-col.png                 (mail/icons/thread-col.png)</span>
<a href="#l19.246"></a><span id="l19.246" class="difflineplus">+  skin/classic/messenger/icons/thread-col-sorta.png           (mail/icons/thread-col-sorta.png)</span>
<a href="#l19.247"></a><span id="l19.247" class="difflineplus">+  skin/classic/messenger/icons/thread-col-sortd.png           (mail/icons/thread-col-sortd.png)</span>
<a href="#l19.248"></a><span id="l19.248" class="difflineplus">+  skin/classic/messenger/icons/thread.png                     (mail/icons/thread.png)</span>
<a href="#l19.249"></a><span id="l19.249" class="difflineplus">+  skin/classic/messenger/icons/thread-ignored.png             (mail/icons/thread-ignored.png)</span>
<a href="#l19.250"></a><span id="l19.250" class="difflineplus">+  skin/classic/messenger/icons/message-ignored.png            (mail/icons/message-ignored.png)</span>
<a href="#l19.251"></a><span id="l19.251" class="difflineplus">+  skin/classic/messenger/icons/thread-watched.png             (mail/icons/thread-watched.png)</span>
<a href="#l19.252"></a><span id="l19.252" class="difflineplus">+  skin/classic/messenger/icons/flag-col.png                   (mail/icons/flag-col.png)</span>
<a href="#l19.253"></a><span id="l19.253" class="difflineplus">+  skin/classic/messenger/icons/flag.png                       (mail/icons/flag.png)</span>
<a href="#l19.254"></a><span id="l19.254" class="difflineplus">+  skin/classic/messenger/icons/flag-empty.png                 (mail/icons/flag-empty.png)</span>
<a href="#l19.255"></a><span id="l19.255" class="difflineplus">+  skin/classic/messenger/icons/server.png                     (mail/icons/server.png)</span>
<a href="#l19.256"></a><span id="l19.256" class="difflineplus">+  skin/classic/messenger/icons/readcol.png                    (mail/icons/readcol.png)</span>
<a href="#l19.257"></a><span id="l19.257" class="difflineplus">+  skin/classic/messenger/icons/unreadmail.png                 (mail/icons/unreadmail.png)</span>
<a href="#l19.258"></a><span id="l19.258" class="difflineplus">+  skin/classic/messenger/icons/Search-bar.png                 (mail/icons/Search-bar.png)</span>
<a href="#l19.259"></a><span id="l19.259" class="difflineplus">+  skin/classic/messenger/icons/search-arrow.gif               (mail/icons/search-arrow.gif)</span>
<a href="#l19.260"></a><span id="l19.260" class="difflineplus">+  skin/classic/messenger/icons/quick-search-clear.png         (mail/icons/quick-search-clear.png)</span>
<a href="#l19.261"></a><span id="l19.261" class="difflineplus">+  skin/classic/messenger/icons/close-button.png               (mail/icons/close-button.png)</span>
<a href="#l19.262"></a><span id="l19.262" class="difflineplus">+  skin/classic/messenger/icons/remote-blocked.png             (mail/icons/remote-blocked.png)</span>
<a href="#l19.263"></a><span id="l19.263" class="difflineplus">+  skin/classic/messenger/icons/phishing.png                   (mail/icons/phishing.png)</span>
<a href="#l19.264"></a><span id="l19.264" class="difflineplus">+  skin/classic/messenger/icons/junk.png                       (mail/icons/junk.png)</span>
<a href="#l19.265"></a><span id="l19.265" class="difflineplus">+  skin/classic/messenger/icons/check.gif                      (mail/icons/check.gif)</span>
<a href="#l19.266"></a><span id="l19.266" class="difflineplus">+  skin/classic/messenger/icons/notchecked.gif                 (mail/icons/notchecked.gif)</span>
<a href="#l19.267"></a><span id="l19.267" class="difflineplus">+  skin/classic/messenger/icons/online.png                     (mail/icons/online.png)</span>
<a href="#l19.268"></a><span id="l19.268" class="difflineplus">+  skin/classic/messenger/icons/offline.png                    (mail/icons/offline.png)</span>
<a href="#l19.269"></a><span id="l19.269" class="difflineplus">+  skin/classic/messenger/icons/row.png                        (mail/icons/row.png)</span>
<a href="#l19.270"></a><span id="l19.270">   skin/classic/messenger/icons/secure.png                     (mail/icons/secure.png)</span>
<a href="#l19.271"></a><span id="l19.271">   skin/classic/messenger/icons/insecure.png                   (mail/icons/insecure.png)</span>
<a href="#l19.272"></a><span id="l19.272">   skin/classic/messenger/icons/identity.png                   (mail/icons/identity.png)</span>
<a href="#l19.273"></a><span id="l19.273">   skin/classic/messenger/icons/tick.png                       (mail/icons/tick.png)</span>
<a href="#l19.274"></a><span id="l19.274">   skin/classic/messenger/icons/error.png                      (mail/icons/error.png)</span>
<a href="#l19.275"></a><span id="l19.275">   skin/classic/messenger/icons/cancel.png                     (mail/icons/cancel.png)</span>
<a href="#l19.276"></a><span id="l19.276" class="difflineminus">-  skin/classic/messenger/icons/alltabs-box-overflow-end-bkgnd.png           (mail/icons/alltabs-box-overflow-end-bkgnd.png)</span>
<a href="#l19.277"></a><span id="l19.277" class="difflineminus">-  skin/classic/messenger/icons/alltabs-box-overflow-end-bkgnd-animate.png   (mail/icons/alltabs-box-overflow-end-bkgnd-animate.png)</span>
<a href="#l19.278"></a><span id="l19.278" class="difflineminus">-  skin/classic/messenger/icons/alltabs-box-overflow-end-bkgnd-hover.png     (mail/icons/alltabs-box-overflow-end-bkgnd-hover.png)</span>
<a href="#l19.279"></a><span id="l19.279" class="difflineminus">-  skin/classic/messenger/icons/alltabs-box-overflow-start-bkgnd.png         (mail/icons/alltabs-box-overflow-start-bkgnd.png)</span>
<a href="#l19.280"></a><span id="l19.280" class="difflineminus">-  skin/classic/messenger/icons/alltabs-box-overflow-start-bkgnd-animate.png (mail/icons/alltabs-box-overflow-start-bkgnd-animate.png)</span>
<a href="#l19.281"></a><span id="l19.281" class="difflineminus">-  skin/classic/messenger/icons/alltabs-box-overflow-start-bkgnd-hover.png   (mail/icons/alltabs-box-overflow-start-bkgnd-hover.png)</span>
<a href="#l19.282"></a><span id="l19.282" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-end.png                  (mail/icons/tab-arrow-end.png)</span>
<a href="#l19.283"></a><span id="l19.283" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-end-bkgnd-animate.png    (mail/icons/tab-arrow-end-bkgnd-animate.png)</span>
<a href="#l19.284"></a><span id="l19.284" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-end-bkgnd-disabled.png   (mail/icons/tab-arrow-end-bkgnd-disabled.png)</span>
<a href="#l19.285"></a><span id="l19.285" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-end-bkgnd-enabled.png    (mail/icons/tab-arrow-end-bkgnd-enabled.png)</span>
<a href="#l19.286"></a><span id="l19.286" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-end-bkgnd-hover.png      (mail/icons/tab-arrow-end-bkgnd-hover.png)</span>
<a href="#l19.287"></a><span id="l19.287" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-start.png                (mail/icons/tab-arrow-start.png)</span>
<a href="#l19.288"></a><span id="l19.288" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-start-bkgnd-animate.png  (mail/icons/tab-arrow-start-bkgnd-animate.png)</span>
<a href="#l19.289"></a><span id="l19.289" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-start-bkgnd-disabled.png (mail/icons/tab-arrow-start-bkgnd-disabled.png)</span>
<a href="#l19.290"></a><span id="l19.290" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-start-bkgnd-enabled.png  (mail/icons/tab-arrow-start-bkgnd-enabled.png)</span>
<a href="#l19.291"></a><span id="l19.291" class="difflineminus">-  skin/classic/messenger/icons/tab-arrow-start-bkgnd-hover.png    (mail/icons/tab-arrow-start-bkgnd-hover.png)</span>
<a href="#l19.292"></a><span id="l19.292" class="difflineminus">-  skin/classic/messenger/icons/tabmail-tabs-bkgnd.png             (mail/icons/tabmail-tabs-bkgnd.png)</span>
<a href="#l19.293"></a><span id="l19.293" class="difflineminus">-  skin/classic/messenger/icons/tabDragIndicator.png               (mail/icons/tabDragIndicator.png)</span>
<a href="#l19.294"></a><span id="l19.294" class="difflineminus">-  skin/classic/messenger/icons/tab-left.png                       (mail/icons/tab-left.png)</span>
<a href="#l19.295"></a><span id="l19.295" class="difflineminus">-  skin/classic/messenger/icons/tab-left-bkgnd.png                 (mail/icons/tab-left-bkgnd.png)</span>
<a href="#l19.296"></a><span id="l19.296" class="difflineminus">-  skin/classic/messenger/icons/tab-middle.png                     (mail/icons/tab-middle.png)</span>
<a href="#l19.297"></a><span id="l19.297" class="difflineminus">-  skin/classic/messenger/icons/tab-middle-bkgnd.png               (mail/icons/tab-middle-bkgnd.png)</span>
<a href="#l19.298"></a><span id="l19.298" class="difflineminus">-  skin/classic/messenger/icons/tab-right.png                      (mail/icons/tab-right.png)</span>
<a href="#l19.299"></a><span id="l19.299" class="difflineminus">-  skin/classic/messenger/icons/tab-right-bkgnd.png                (mail/icons/tab-right-bkgnd.png)</span>
<a href="#l19.300"></a><span id="l19.300" class="difflineminus">-  skin/classic/messenger/icons/tabstrip-bottom.png                (mail/icons/tabstrip-bottom.png)</span>
<a href="#l19.301"></a><span id="l19.301" class="difflineminus">-% skin communicator classic/1.0 %skin/classic/communicator/</span>
<a href="#l19.302"></a><span id="l19.302" class="difflineminus">-  skin/classic/communicator/communicator.css                      (mail/communicator.css)</span>
<a href="#l19.303"></a><span id="l19.303" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-smile.png        (mail/icons/smiley-smile.png)</span>
<a href="#l19.304"></a><span id="l19.304" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-frown.png        (mail/icons/smiley-frown.png)</span>
<a href="#l19.305"></a><span id="l19.305" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-wink.png         (mail/icons/smiley-wink.png)</span>
<a href="#l19.306"></a><span id="l19.306" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-tongue-out.png  (mail/icons/smiley-tongue-out.png)</span>
<a href="#l19.307"></a><span id="l19.307" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-laughing.png (mail/icons/smiley-laughing.png)</span>
<a href="#l19.308"></a><span id="l19.308" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-embarassed.png  (mail/icons/smiley-embarassed.png)</span>
<a href="#l19.309"></a><span id="l19.309" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-undecided.png   (mail/icons/smiley-undecided.png)</span>
<a href="#l19.310"></a><span id="l19.310" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-surprised.png   (mail/icons/smiley-surprised.png)</span>
<a href="#l19.311"></a><span id="l19.311" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-kiss.png     (mail/icons/smiley-kiss.png)</span>
<a href="#l19.312"></a><span id="l19.312" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-yell.png     (mail/icons/smiley-yell.png)</span>
<a href="#l19.313"></a><span id="l19.313" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-cool.png     (mail/icons/smiley-cool.png)</span>
<a href="#l19.314"></a><span id="l19.314" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-money-mouth.png (mail/icons/smiley-money-mouth.png)</span>
<a href="#l19.315"></a><span id="l19.315" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-foot-in-mouth.png (mail/icons/smiley-foot-in-mouth.png)</span>
<a href="#l19.316"></a><span id="l19.316" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-innocent.png (mail/icons/smiley-innocent.png)</span>
<a href="#l19.317"></a><span id="l19.317" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-cry.png      (mail/icons/smiley-cry.png)</span>
<a href="#l19.318"></a><span id="l19.318" class="difflineminus">-  skin/classic/communicator/icons/smileys/smiley-sealed.png   (mail/icons/smiley-sealed.png)</span>
<a href="#l19.319"></a><span id="l19.319" class="difflineminus">-  skin/classic/messenger/accountcentral/read-messages.png     (mail/accountcentral/read-messages.png)</span>
<a href="#l19.320"></a><span id="l19.320" class="difflineminus">-  skin/classic/messenger/accountcentral/write-message.png     (mail/accountcentral/write-message.png)</span>
<a href="#l19.321"></a><span id="l19.321" class="difflineminus">-  skin/classic/messenger/accountcentral/create-account.png    (mail/accountcentral/create-account.png)</span>
<a href="#l19.322"></a><span id="l19.322" class="difflineminus">-  skin/classic/messenger/accountcentral/account-settings.png  (mail/accountcentral/account-settings.png)</span>
<a href="#l19.323"></a><span id="l19.323" class="difflineminus">-  skin/classic/messenger/accountcentral/search-messages.png   (mail/accountcentral/search-messages.png)</span>
<a href="#l19.324"></a><span id="l19.324" class="difflineminus">-  skin/classic/messenger/accountcentral/manage-filters.png    (mail/accountcentral/manage-filters.png)</span>
<a href="#l19.325"></a><span id="l19.325" class="difflineminus">-  skin/classic/messenger/accountcentral/offline-settings.png  (mail/accountcentral/offline-settings.png)</span>
<a href="#l19.326"></a><span id="l19.326" class="difflineminus">-  skin/classic/messenger/accountcentral/manage-imap.png       (mail/accountcentral/manage-imap.png)</span>
<a href="#l19.327"></a><span id="l19.327" class="difflineminus">-  skin/classic/messenger/accountcentral/manage-newsgroups.png (mail/accountcentral/manage-newsgroups.png)</span>
<a href="#l19.328"></a><span id="l19.328" class="difflineminus">-  skin/classic/messenger/accountcentral/manage-rss.png        (mail/accountcentral/manage-rss.png)</span>
<a href="#l19.329"></a><span id="l19.329" class="difflineminus">-  skin/classic/messenger/icons/arrow-dn-grey.png              (mail/icons/arrow-dn-grey.png)</span>
<a href="#l19.330"></a><span id="l19.330" class="difflineminus">-  skin/classic/messenger/icons/arrow-dn-black.png             (mail/icons/arrow-dn-black.png)</span>
<a href="#l19.331"></a><span id="l19.331" class="difflineminus">-  skin/classic/messenger/icons/arrow-dn-blue.png              (mail/icons/arrow-dn-blue.png)</span>
<a href="#l19.332"></a><span id="l19.332" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-left.png           (mail/icons/arrow/arrow-left.png)</span>
<a href="#l19.333"></a><span id="l19.333" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-right.png          (mail/icons/arrow/arrow-right.png)</span>
<a href="#l19.334"></a><span id="l19.334" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-up.png             (mail/icons/arrow/arrow-up.png)</span>
<a href="#l19.335"></a><span id="l19.335" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-down.png           (mail/icons/arrow/arrow-down.png)</span>
<a href="#l19.336"></a><span id="l19.336" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-left-dim.png       (mail/icons/arrow/arrow-left-dim.png)</span>
<a href="#l19.337"></a><span id="l19.337" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-right-dim.png      (mail/icons/arrow/arrow-right-dim.png)</span>
<a href="#l19.338"></a><span id="l19.338" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-up-dim.png         (mail/icons/arrow/arrow-up-dim.png)</span>
<a href="#l19.339"></a><span id="l19.339" class="difflineminus">-  skin/classic/messenger/icons/arrow/arrow-down-dim.png       (mail/icons/arrow/arrow-down-dim.png)</span>
<a href="#l19.340"></a><span id="l19.340" class="difflineminus">-  skin/classic/messenger/icons/chevron.png                    (mail/icons/chevron.png)</span>
<a href="#l19.341"></a><span id="l19.341" class="difflineminus">-  skin/classic/messenger/icons/croppedchevron.png             (mail/icons/croppedchevron.png)</span>
<a href="#l19.342"></a><span id="l19.342" class="difflineminus">-  skin/classic/messenger/tagbg.png                            (mail/tagbg.png)</span>
<a href="#l19.343"></a><span id="l19.343" class="difflineminus">-  icon.png                                                    (mail/icon.png)</span>
<a href="#l19.344"></a><span id="l19.344" class="difflineminus">-  preview.png                                                 (mail/preview.png)</span>
<a href="#l19.345"></a><span id="l19.345" class="difflineminus">-% skin editor classic/1.0 %skin/classic/editor/</span>
<a href="#l19.346"></a><span id="l19.346" class="difflineminus">-  skin/classic/editor/editor.css                              (editor/editor.css)</span>
<a href="#l19.347"></a><span id="l19.347" class="difflineminus">-  skin/classic/editor/EditorDialog.css                        (editor/EditorDialog.css)</span>
<a href="#l19.348"></a><span id="l19.348" class="difflineminus">-  skin/classic/editor/icons/img-align-bottom.gif              (editor/img-align-bottom.gif)</span>
<a href="#l19.349"></a><span id="l19.349" class="difflineminus">-  skin/classic/editor/icons/img-align-left.gif                (editor/img-align-left.gif)</span>
<a href="#l19.350"></a><span id="l19.350" class="difflineminus">-  skin/classic/editor/icons/img-align-middle.gif              (editor/img-align-middle.gif)</span>
<a href="#l19.351"></a><span id="l19.351" class="difflineminus">-  skin/classic/editor/icons/img-align-right.gif               (editor/img-align-right.gif)</span>
<a href="#l19.352"></a><span id="l19.352" class="difflineminus">-  skin/classic/editor/icons/img-align-top.gif                 (editor/img-align-top.gif)</span>
<a href="#l19.353"></a><span id="l19.353" class="difflineplus">+  skin/classic/messenger/icons/alltabs-box-overflow-end-bkgnd.png           (mail/icons/alltabs-box-overflow-end-bkgnd.png)</span>
<a href="#l19.354"></a><span id="l19.354" class="difflineplus">+  skin/classic/messenger/icons/alltabs-box-overflow-end-bkgnd-animate.png   (mail/icons/alltabs-box-overflow-end-bkgnd-animate.png)</span>
<a href="#l19.355"></a><span id="l19.355" class="difflineplus">+  skin/classic/messenger/icons/alltabs-box-overflow-end-bkgnd-hover.png     (mail/icons/alltabs-box-overflow-end-bkgnd-hover.png)</span>
<a href="#l19.356"></a><span id="l19.356" class="difflineplus">+  skin/classic/messenger/icons/alltabs-box-overflow-start-bkgnd.png         (mail/icons/alltabs-box-overflow-start-bkgnd.png)</span>
<a href="#l19.357"></a><span id="l19.357" class="difflineplus">+  skin/classic/messenger/icons/alltabs-box-overflow-start-bkgnd-animate.png (mail/icons/alltabs-box-overflow-start-bkgnd-animate.png)</span>
<a href="#l19.358"></a><span id="l19.358" class="difflineplus">+  skin/classic/messenger/icons/alltabs-box-overflow-start-bkgnd-hover.png   (mail/icons/alltabs-box-overflow-start-bkgnd-hover.png)</span>
<a href="#l19.359"></a><span id="l19.359" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-end.png                  (mail/icons/tab-arrow-end.png)</span>
<a href="#l19.360"></a><span id="l19.360" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-end-bkgnd-animate.png    (mail/icons/tab-arrow-end-bkgnd-animate.png)</span>
<a href="#l19.361"></a><span id="l19.361" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-end-bkgnd-disabled.png   (mail/icons/tab-arrow-end-bkgnd-disabled.png)</span>
<a href="#l19.362"></a><span id="l19.362" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-end-bkgnd-enabled.png    (mail/icons/tab-arrow-end-bkgnd-enabled.png)</span>
<a href="#l19.363"></a><span id="l19.363" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-end-bkgnd-hover.png      (mail/icons/tab-arrow-end-bkgnd-hover.png)</span>
<a href="#l19.364"></a><span id="l19.364" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-start.png                (mail/icons/tab-arrow-start.png)</span>
<a href="#l19.365"></a><span id="l19.365" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-start-bkgnd-animate.png  (mail/icons/tab-arrow-start-bkgnd-animate.png)</span>
<a href="#l19.366"></a><span id="l19.366" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-start-bkgnd-disabled.png (mail/icons/tab-arrow-start-bkgnd-disabled.png)</span>
<a href="#l19.367"></a><span id="l19.367" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-start-bkgnd-enabled.png  (mail/icons/tab-arrow-start-bkgnd-enabled.png)</span>
<a href="#l19.368"></a><span id="l19.368" class="difflineplus">+  skin/classic/messenger/icons/tab-arrow-start-bkgnd-hover.png    (mail/icons/tab-arrow-start-bkgnd-hover.png)</span>
<a href="#l19.369"></a><span id="l19.369" class="difflineplus">+  skin/classic/messenger/icons/tabmail-tabs-bkgnd.png             (mail/icons/tabmail-tabs-bkgnd.png)</span>
<a href="#l19.370"></a><span id="l19.370" class="difflineplus">+  skin/classic/messenger/icons/tabDragIndicator.png               (mail/icons/tabDragIndicator.png)</span>
<a href="#l19.371"></a><span id="l19.371" class="difflineplus">+  skin/classic/messenger/icons/tab-left.png                       (mail/icons/tab-left.png)</span>
<a href="#l19.372"></a><span id="l19.372" class="difflineplus">+  skin/classic/messenger/icons/tab-left-bkgnd.png                 (mail/icons/tab-left-bkgnd.png)</span>
<a href="#l19.373"></a><span id="l19.373" class="difflineplus">+  skin/classic/messenger/icons/tab-middle.png                     (mail/icons/tab-middle.png)</span>
<a href="#l19.374"></a><span id="l19.374" class="difflineplus">+  skin/classic/messenger/icons/tab-middle-bkgnd.png               (mail/icons/tab-middle-bkgnd.png)</span>
<a href="#l19.375"></a><span id="l19.375" class="difflineplus">+  skin/classic/messenger/icons/tab-right.png                      (mail/icons/tab-right.png)</span>
<a href="#l19.376"></a><span id="l19.376" class="difflineplus">+  skin/classic/messenger/icons/tab-right-bkgnd.png                (mail/icons/tab-right-bkgnd.png)</span>
<a href="#l19.377"></a><span id="l19.377" class="difflineplus">+  skin/classic/messenger/icons/tabstrip-bottom.png                (mail/icons/tabstrip-bottom.png)</span>
<a href="#l19.378"></a><span id="l19.378" class="difflineplus">+% skin communicator classic/1.0 %skin/classic/communicator/</span>
<a href="#l19.379"></a><span id="l19.379" class="difflineplus">+  skin/classic/communicator/communicator.css                      (mail/communicator.css)</span>
<a href="#l19.380"></a><span id="l19.380" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-smile.png        (mail/icons/smiley-smile.png)</span>
<a href="#l19.381"></a><span id="l19.381" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-frown.png        (mail/icons/smiley-frown.png)</span>
<a href="#l19.382"></a><span id="l19.382" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-wink.png         (mail/icons/smiley-wink.png)</span>
<a href="#l19.383"></a><span id="l19.383" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-tongue-out.png  (mail/icons/smiley-tongue-out.png)</span>
<a href="#l19.384"></a><span id="l19.384" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-laughing.png (mail/icons/smiley-laughing.png)</span>
<a href="#l19.385"></a><span id="l19.385" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-embarassed.png  (mail/icons/smiley-embarassed.png)</span>
<a href="#l19.386"></a><span id="l19.386" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-undecided.png   (mail/icons/smiley-undecided.png)</span>
<a href="#l19.387"></a><span id="l19.387" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-surprised.png   (mail/icons/smiley-surprised.png)</span>
<a href="#l19.388"></a><span id="l19.388" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-kiss.png     (mail/icons/smiley-kiss.png)</span>
<a href="#l19.389"></a><span id="l19.389" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-yell.png     (mail/icons/smiley-yell.png)</span>
<a href="#l19.390"></a><span id="l19.390" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-cool.png     (mail/icons/smiley-cool.png)</span>
<a href="#l19.391"></a><span id="l19.391" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-money-mouth.png (mail/icons/smiley-money-mouth.png)</span>
<a href="#l19.392"></a><span id="l19.392" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-foot-in-mouth.png (mail/icons/smiley-foot-in-mouth.png)</span>
<a href="#l19.393"></a><span id="l19.393" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-innocent.png (mail/icons/smiley-innocent.png)</span>
<a href="#l19.394"></a><span id="l19.394" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-cry.png      (mail/icons/smiley-cry.png)</span>
<a href="#l19.395"></a><span id="l19.395" class="difflineplus">+  skin/classic/communicator/icons/smileys/smiley-sealed.png   (mail/icons/smiley-sealed.png)</span>
<a href="#l19.396"></a><span id="l19.396" class="difflineplus">+  skin/classic/messenger/accountcentral/read-messages.png     (mail/accountcentral/read-messages.png)</span>
<a href="#l19.397"></a><span id="l19.397" class="difflineplus">+  skin/classic/messenger/accountcentral/write-message.png     (mail/accountcentral/write-message.png)</span>
<a href="#l19.398"></a><span id="l19.398" class="difflineplus">+  skin/classic/messenger/accountcentral/create-account.png    (mail/accountcentral/create-account.png)</span>
<a href="#l19.399"></a><span id="l19.399" class="difflineplus">+  skin/classic/messenger/accountcentral/account-settings.png  (mail/accountcentral/account-settings.png)</span>
<a href="#l19.400"></a><span id="l19.400" class="difflineplus">+  skin/classic/messenger/accountcentral/search-messages.png   (mail/accountcentral/search-messages.png)</span>
<a href="#l19.401"></a><span id="l19.401" class="difflineplus">+  skin/classic/messenger/accountcentral/manage-filters.png    (mail/accountcentral/manage-filters.png)</span>
<a href="#l19.402"></a><span id="l19.402" class="difflineplus">+  skin/classic/messenger/accountcentral/offline-settings.png  (mail/accountcentral/offline-settings.png)</span>
<a href="#l19.403"></a><span id="l19.403" class="difflineplus">+  skin/classic/messenger/accountcentral/manage-imap.png       (mail/accountcentral/manage-imap.png)</span>
<a href="#l19.404"></a><span id="l19.404" class="difflineplus">+  skin/classic/messenger/accountcentral/manage-newsgroups.png (mail/accountcentral/manage-newsgroups.png)</span>
<a href="#l19.405"></a><span id="l19.405" class="difflineplus">+  skin/classic/messenger/accountcentral/manage-rss.png        (mail/accountcentral/manage-rss.png)</span>
<a href="#l19.406"></a><span id="l19.406" class="difflineplus">+  skin/classic/messenger/icons/arrow-dn-grey.png              (mail/icons/arrow-dn-grey.png)</span>
<a href="#l19.407"></a><span id="l19.407" class="difflineplus">+  skin/classic/messenger/icons/arrow-dn-black.png             (mail/icons/arrow-dn-black.png)</span>
<a href="#l19.408"></a><span id="l19.408" class="difflineplus">+  skin/classic/messenger/icons/arrow-dn-blue.png              (mail/icons/arrow-dn-blue.png)</span>
<a href="#l19.409"></a><span id="l19.409" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-left.png           (mail/icons/arrow/arrow-left.png)</span>
<a href="#l19.410"></a><span id="l19.410" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-right.png          (mail/icons/arrow/arrow-right.png)</span>
<a href="#l19.411"></a><span id="l19.411" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-up.png             (mail/icons/arrow/arrow-up.png)</span>
<a href="#l19.412"></a><span id="l19.412" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-down.png           (mail/icons/arrow/arrow-down.png)</span>
<a href="#l19.413"></a><span id="l19.413" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-left-dim.png       (mail/icons/arrow/arrow-left-dim.png)</span>
<a href="#l19.414"></a><span id="l19.414" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-right-dim.png      (mail/icons/arrow/arrow-right-dim.png)</span>
<a href="#l19.415"></a><span id="l19.415" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-up-dim.png         (mail/icons/arrow/arrow-up-dim.png)</span>
<a href="#l19.416"></a><span id="l19.416" class="difflineplus">+  skin/classic/messenger/icons/arrow/arrow-down-dim.png       (mail/icons/arrow/arrow-down-dim.png)</span>
<a href="#l19.417"></a><span id="l19.417" class="difflineplus">+  skin/classic/messenger/icons/chevron.png                    (mail/icons/chevron.png)</span>
<a href="#l19.418"></a><span id="l19.418" class="difflineplus">+  skin/classic/messenger/icons/croppedchevron.png             (mail/icons/croppedchevron.png)</span>
<a href="#l19.419"></a><span id="l19.419" class="difflineplus">+  skin/classic/messenger/tagbg.png                            (mail/tagbg.png)</span>
<a href="#l19.420"></a><span id="l19.420" class="difflineplus">+  icon.png                                                    (mail/icon.png)</span>
<a href="#l19.421"></a><span id="l19.421" class="difflineplus">+  preview.png                                                 (mail/preview.png)</span>
<a href="#l19.422"></a><span id="l19.422" class="difflineplus">+% skin editor classic/1.0 %skin/classic/editor/</span>
<a href="#l19.423"></a><span id="l19.423" class="difflineplus">+  skin/classic/editor/editor.css                              (editor/editor.css)</span>
<a href="#l19.424"></a><span id="l19.424" class="difflineplus">+  skin/classic/editor/EditorDialog.css                        (editor/EditorDialog.css)</span>
<a href="#l19.425"></a><span id="l19.425" class="difflineplus">+  skin/classic/editor/icons/img-align-bottom.gif              (editor/img-align-bottom.gif)</span>
<a href="#l19.426"></a><span id="l19.426" class="difflineplus">+  skin/classic/editor/icons/img-align-left.gif                (editor/img-align-left.gif)</span>
<a href="#l19.427"></a><span id="l19.427" class="difflineplus">+  skin/classic/editor/icons/img-align-middle.gif              (editor/img-align-middle.gif)</span>
<a href="#l19.428"></a><span id="l19.428" class="difflineplus">+  skin/classic/editor/icons/img-align-right.gif               (editor/img-align-right.gif)</span>
<a href="#l19.429"></a><span id="l19.429" class="difflineplus">+  skin/classic/editor/icons/img-align-top.gif                 (editor/img-align-top.gif)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">new file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- /dev/null</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ b/mail/themes/qute/mail/multimessageview.css</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -0,0 +1,55 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineplus">+@import url(&quot;chrome://messenger/content/multimessageview.css&quot;);</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineplus">+</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineplus">+/* qute-specific overrides for multimessageview.css*/</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineplus">+</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineplus">+/* mostly it's about CSS colors not being reliable */</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineplus">+</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineplus">+body {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineplus">+  background-color: white;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+}</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineplus">+</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineplus">+.heading.info {</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineplus">+  color: ButtonText;</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineplus">+}</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineplus">+</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineplus">+</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineplus">+.info,</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineplus">+.count, .date,</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineplus">+.message &gt; .header &gt; .snippet,</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineplus">+.message &gt; .header &gt; .senders {</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineplus">+  color: GrayText;</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineplus">+}</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineplus">+</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineplus">+/* buttons aren't reliable either */</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineplus">+</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineplus">+.button {</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineplus">+  -moz-appearance: button;</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineplus">+  font: message-box;</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineplus">+  min-width: 32px !important;</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineplus">+}</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineplus">+</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineplus">+</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineplus">+/* and trash icon URLs aren't either */</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineplus">+</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineplus">+#trash {</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineplus">+  min-height: 28px !important;</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineplus">+  min-width: 32px !important;</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineplus">+  padding: 0px;</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineplus">+}</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineplus">+</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineplus">+.trashButton {</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineplus">+  list-style-image: url(&quot;chrome://messenger/skin/icons/folder.png&quot;) !important;</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineplus">+  -moz-image-region: rect(0px 144px 16px 128px);</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineplus">+  width: 16px;</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineplus">+  height: 16px;</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineplus">+}</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineplus">+</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineplus">+.star {</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineplus">+  width: 12px;</span>
<a href="#l20.53"></a><span id="l20.53" class="difflineplus">+  height: 12px;</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineplus">+  margin-right: 0.5em;</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineplus">+}</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineplus">+</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineplus">+.starred .star {</span>
<a href="#l20.58"></a><span id="l20.58" class="difflineplus">+  background-image: url(&quot;chrome://messenger/skin/icons/flag-col.png&quot;);</span>
<a href="#l20.59"></a><span id="l20.59" class="difflineplus">+}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mailnews/base/public/nsIMsgDBView.idl</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mailnews/base/public/nsIMsgDBView.idl</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -414,17 +414,17 @@ interface nsIMsgDBView : nsISupports</span>
<a href="#l21.4"></a><span id="l21.4">    */</span>
<a href="#l21.5"></a><span id="l21.5">   attribute AString curCustomColumn;</span>
<a href="#l21.6"></a><span id="l21.6"> };</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8"> /* this interface is rapidly morphing from a command updater interface into a more generic</span>
<a href="#l21.9"></a><span id="l21.9">    FE updater interface to handle changes in the view </span>
<a href="#l21.10"></a><span id="l21.10"> */</span>
<a href="#l21.11"></a><span id="l21.11"> </span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-[scriptable, uuid(65FC9AD5-0912-11d5-9901-001083010E9B)]</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+[scriptable, uuid(ce8f52ee-e742-4b31-8bdd-2b3a8168a117)]</span>
<a href="#l21.14"></a><span id="l21.14"> interface nsIMsgDBViewCommandUpdater : nsISupports</span>
<a href="#l21.15"></a><span id="l21.15"> {</span>
<a href="#l21.16"></a><span id="l21.16">   /* Eventually we'll flush this out into some kind of rich interface</span>
<a href="#l21.17"></a><span id="l21.17">   which may take specifc selection changed type notifications like</span>
<a href="#l21.18"></a><span id="l21.18">   no selections, single selection, multi-selection, etc. For starters,</span>
<a href="#l21.19"></a><span id="l21.19">   we are going to keep it generic. The back end will only push an update</span>
<a href="#l21.20"></a><span id="l21.20">   command status when the # of selected items changes.</span>
<a href="#l21.21"></a><span id="l21.21">   */</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -434,9 +434,15 @@ interface nsIMsgDBViewCommandUpdater : n</span>
<a href="#l21.23"></a><span id="l21.23">   /* displayed message has changed */</span>
<a href="#l21.24"></a><span id="l21.24">   void displayMessageChanged(in nsIMsgFolder aFolder, in AString aSubject, in ACString aKeywords);</span>
<a href="#l21.25"></a><span id="l21.25"> </span>
<a href="#l21.26"></a><span id="l21.26">   /**</span>
<a href="#l21.27"></a><span id="l21.27">   * allows the backend to tell the front end to re-determine </span>
<a href="#l21.28"></a><span id="l21.28">   * which message we should selet after a delete or move</span>
<a href="#l21.29"></a><span id="l21.29">   */</span>
<a href="#l21.30"></a><span id="l21.30">   void updateNextMessageAfterDelete();</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+  </span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+  /**</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineplus">+  * tell the front end that the selection has changed, and may need to be</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineplus">+  * resummarized</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineplus">+  */</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineplus">+  void summarizeSelection();</span>
<a href="#l21.37"></a><span id="l21.37"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mailnews/base/public/nsIMsgWindow.idl</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mailnews/base/public/nsIMsgWindow.idl</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -48,17 +48,17 @@ interface nsIInterfaceRequestor;</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5"> [scriptable, uuid(7B8F4A65-CFC4-4b3f-BF5C-152AA8D5CD10)]</span>
<a href="#l22.6"></a><span id="l22.6"> interface nsIMsgWindowCommands : nsISupports {</span>
<a href="#l22.7"></a><span id="l22.7">   void selectFolder(in ACString folderUri);</span>
<a href="#l22.8"></a><span id="l22.8">   void selectMessage(in ACString messageUri);</span>
<a href="#l22.9"></a><span id="l22.9">   void clearMsgPane();</span>
<a href="#l22.10"></a><span id="l22.10"> };</span>
<a href="#l22.11"></a><span id="l22.11"> </span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-[scriptable, uuid(7e8fbaaa-d2f1-4751-af8e-8213fdb60a02)]</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+[scriptable, uuid(7e8fbaaa-d2f1-4751-af8e-8213fdb60a03)]</span>
<a href="#l22.14"></a><span id="l22.14"> interface nsIMsgWindow : nsISupports {</span>
<a href="#l22.15"></a><span id="l22.15">   attribute nsIMsgStatusFeedback statusFeedback;</span>
<a href="#l22.16"></a><span id="l22.16">   attribute nsIMsgWindowCommands windowCommands;</span>
<a href="#l22.17"></a><span id="l22.17">   attribute nsIMsgHeaderSink msgHeaderSink;</span>
<a href="#l22.18"></a><span id="l22.18">   attribute nsITransactionManager transactionManager;</span>
<a href="#l22.19"></a><span id="l22.19">   attribute nsIMsgFolder openFolder;</span>
<a href="#l22.20"></a><span id="l22.20">   </span>
<a href="#l22.21"></a><span id="l22.21">   /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgDBView.cpp</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -1066,26 +1066,22 @@ NS_IMETHODIMP nsMsgDBView::SelectionChan</span>
<a href="#l23.4"></a><span id="l23.4">     else</span>
<a href="#l23.5"></a><span id="l23.5">       numSelected = 0; // selection seems bogus, so set to 0.</span>
<a href="#l23.6"></a><span id="l23.6">   }</span>
<a href="#l23.7"></a><span id="l23.7">   else {</span>
<a href="#l23.8"></a><span id="l23.8">     // if we have zero or multiple items selected, we shouldn't be displaying any message</span>
<a href="#l23.9"></a><span id="l23.9">     m_currentlyDisplayedMsgKey = nsMsgKey_None;</span>
<a href="#l23.10"></a><span id="l23.10">     m_currentlyDisplayedMsgUri.Truncate();</span>
<a href="#l23.11"></a><span id="l23.11">     m_currentlyDisplayedViewIndex = nsMsgViewIndex_None;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-    // if we used to have one item selected, and now we have zero or more than one, we should clear the message pane.</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineminus">-    nsCOMPtr&lt;nsIMsgWindow&gt; msgWindow(do_QueryReferent(mMsgWindowWeak));</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineminus">-    nsCOMPtr &lt;nsIMsgWindowCommands&gt; windowCommands;</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-    if ((mNumSelectedRows == 1) &amp;&amp; (numSelected != 1) &amp;&amp; msgWindow</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineminus">-        &amp;&amp; NS_SUCCEEDED(msgWindow-&gt;GetWindowCommands(getter_AddRefs(windowCommands)))</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineminus">-        &amp;&amp; windowCommands) {</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineminus">-      windowCommands-&gt;ClearMsgPane();</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineminus">-    }</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineminus">-  }</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineplus">+  }</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineplus">+</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineplus">+  // let the front-end adjust the message pane appropriately with either</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineplus">+  // the message body, or a summary of the selection</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineplus">+  if (mCommandUpdater)</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineplus">+    mCommandUpdater-&gt;SummarizeSelection();</span>
<a href="#l23.28"></a><span id="l23.28"> </span>
<a href="#l23.29"></a><span id="l23.29">   // determine if we need to push command update notifications out to the UI or not.</span>
<a href="#l23.30"></a><span id="l23.30"> </span>
<a href="#l23.31"></a><span id="l23.31">   // we need to push a command update notification iff, one of the following conditions are met</span>
<a href="#l23.32"></a><span id="l23.32">   // (1) the selection went from 0 to 1</span>
<a href="#l23.33"></a><span id="l23.33">   // (2) it went from 1 to 0</span>
<a href="#l23.34"></a><span id="l23.34">   // (3) it went from 1 to many</span>
<a href="#l23.35"></a><span id="l23.35">   // (4) it went from many to 1 or 0</span>
<a href="#l23.36"></a><span id="l23.36" class="difflineat">@@ -2186,16 +2182,17 @@ NS_IMETHODIMP nsMsgDBView::GetIndicesFor</span>
<a href="#l23.37"></a><span id="l23.37"> }</span>
<a href="#l23.38"></a><span id="l23.38"> </span>
<a href="#l23.39"></a><span id="l23.39"> NS_IMETHODIMP nsMsgDBView::GetURIsForSelection(PRUint32 *length, char ***uris)</span>
<a href="#l23.40"></a><span id="l23.40"> {</span>
<a href="#l23.41"></a><span id="l23.41">   nsresult rv = NS_OK;</span>
<a href="#l23.42"></a><span id="l23.42"> </span>
<a href="#l23.43"></a><span id="l23.43">   NS_ENSURE_ARG_POINTER(length);</span>
<a href="#l23.44"></a><span id="l23.44">   *length = 0;</span>
<a href="#l23.45"></a><span id="l23.45" class="difflineplus">+  </span>
<a href="#l23.46"></a><span id="l23.46">   NS_ENSURE_ARG_POINTER(uris);</span>
<a href="#l23.47"></a><span id="l23.47">   *uris = nsnull;</span>
<a href="#l23.48"></a><span id="l23.48"> </span>
<a href="#l23.49"></a><span id="l23.49">   nsMsgViewIndexArray selection;</span>
<a href="#l23.50"></a><span id="l23.50">   GetSelectedIndices(selection);</span>
<a href="#l23.51"></a><span id="l23.51">   PRUint32 numIndices = selection.Length();</span>
<a href="#l23.52"></a><span id="l23.52">   if (!numIndices) return NS_OK;</span>
<a href="#l23.53"></a><span id="l23.53"> </span>
<a href="#l23.54"></a><span id="l23.54" class="difflineat">@@ -4482,35 +4479,39 @@ nsresult nsMsgDBView::ExpansionDelta(nsM</span>
<a href="#l23.55"></a><span id="l23.55">   else</span>
<a href="#l23.56"></a><span id="l23.56">     *expansionDelta = - (PRInt32) (numChildren - 1);</span>
<a href="#l23.57"></a><span id="l23.57"> </span>
<a href="#l23.58"></a><span id="l23.58">   return NS_OK;</span>
<a href="#l23.59"></a><span id="l23.59"> }</span>
<a href="#l23.60"></a><span id="l23.60"> </span>
<a href="#l23.61"></a><span id="l23.61"> nsresult nsMsgDBView::ToggleExpansion(nsMsgViewIndex index, PRUint32 *numChanged)</span>
<a href="#l23.62"></a><span id="l23.62"> {</span>
<a href="#l23.63"></a><span id="l23.63" class="difflineplus">+  nsresult rv;</span>
<a href="#l23.64"></a><span id="l23.64">   NS_ENSURE_ARG(numChanged);</span>
<a href="#l23.65"></a><span id="l23.65">   *numChanged = 0;</span>
<a href="#l23.66"></a><span id="l23.66">   nsMsgViewIndex threadIndex = GetThreadIndex(index);</span>
<a href="#l23.67"></a><span id="l23.67">   if (threadIndex == nsMsgViewIndex_None)</span>
<a href="#l23.68"></a><span id="l23.68">   {</span>
<a href="#l23.69"></a><span id="l23.69">     NS_ASSERTION(PR_FALSE, &quot;couldn't find thread&quot;);</span>
<a href="#l23.70"></a><span id="l23.70">     return NS_MSG_MESSAGE_NOT_FOUND;</span>
<a href="#l23.71"></a><span id="l23.71">   }</span>
<a href="#l23.72"></a><span id="l23.72">   PRInt32  flags = m_flags[threadIndex];</span>
<a href="#l23.73"></a><span id="l23.73"> </span>
<a href="#l23.74"></a><span id="l23.74">   // if not a thread, or doesn't have children, no expand/collapse</span>
<a href="#l23.75"></a><span id="l23.75">   // If we add sub-thread expand collapse, this will need to be relaxed</span>
<a href="#l23.76"></a><span id="l23.76">   if (!(flags &amp; MSG_VIEW_FLAG_ISTHREAD) || !(flags &amp; MSG_VIEW_FLAG_HASCHILDREN))</span>
<a href="#l23.77"></a><span id="l23.77">     return NS_MSG_MESSAGE_NOT_FOUND;</span>
<a href="#l23.78"></a><span id="l23.78">   if (flags &amp; nsMsgMessageFlags::Elided)</span>
<a href="#l23.79"></a><span id="l23.79" class="difflineminus">-    return ExpandByIndex(threadIndex, numChanged);</span>
<a href="#l23.80"></a><span id="l23.80" class="difflineplus">+    rv = ExpandByIndex(threadIndex, numChanged);</span>
<a href="#l23.81"></a><span id="l23.81">   else</span>
<a href="#l23.82"></a><span id="l23.82" class="difflineminus">-    return CollapseByIndex(threadIndex, numChanged);</span>
<a href="#l23.83"></a><span id="l23.83" class="difflineminus">-</span>
<a href="#l23.84"></a><span id="l23.84" class="difflineplus">+    rv = CollapseByIndex(threadIndex, numChanged);</span>
<a href="#l23.85"></a><span id="l23.85" class="difflineplus">+    </span>
<a href="#l23.86"></a><span id="l23.86" class="difflineplus">+  // if we collaps/uncollapse a thread, this changes the selected URIs</span>
<a href="#l23.87"></a><span id="l23.87" class="difflineplus">+  SelectionChanged();</span>
<a href="#l23.88"></a><span id="l23.88" class="difflineplus">+  return rv;</span>
<a href="#l23.89"></a><span id="l23.89"> }</span>
<a href="#l23.90"></a><span id="l23.90"> </span>
<a href="#l23.91"></a><span id="l23.91"> nsresult nsMsgDBView::ExpandAndSelectThread()</span>
<a href="#l23.92"></a><span id="l23.92"> {</span>
<a href="#l23.93"></a><span id="l23.93">     nsresult rv;</span>
<a href="#l23.94"></a><span id="l23.94"> </span>
<a href="#l23.95"></a><span id="l23.95">     NS_ASSERTION(mTreeSelection, &quot;no tree selection&quot;);</span>
<a href="#l23.96"></a><span id="l23.96">     if (!mTreeSelection) return NS_ERROR_UNEXPECTED;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/suite/mailnews/messageWindow.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/suite/mailnews/messageWindow.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -179,16 +179,18 @@ nsMsgDBViewCommandUpdater.prototype =</span>
<a href="#l24.4"></a><span id="l24.4">     goUpdateCommand(&quot;button_goForward&quot;);</span>
<a href="#l24.5"></a><span id="l24.5">   },</span>
<a href="#l24.6"></a><span id="l24.6"> </span>
<a href="#l24.7"></a><span id="l24.7">   updateNextMessageAfterDelete : function()</span>
<a href="#l24.8"></a><span id="l24.8">   {</span>
<a href="#l24.9"></a><span id="l24.9">     SetNextMessageAfterDelete();</span>
<a href="#l24.10"></a><span id="l24.10">   },</span>
<a href="#l24.11"></a><span id="l24.11"> </span>
<a href="#l24.12"></a><span id="l24.12" class="difflineplus">+  summarizeSelection: function() {},</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+</span>
<a href="#l24.14"></a><span id="l24.14">   QueryInterface : function(iid)</span>
<a href="#l24.15"></a><span id="l24.15">   {</span>
<a href="#l24.16"></a><span id="l24.16">     if (iid.equals(Components.interfaces.nsIMsgDBViewCommandUpdater) ||</span>
<a href="#l24.17"></a><span id="l24.17">         iid.equals(Components.interfaces.nsISupports))</span>
<a href="#l24.18"></a><span id="l24.18">       return this;</span>
<a href="#l24.19"></a><span id="l24.19"> 	  </span>
<a href="#l24.20"></a><span id="l24.20">     throw Components.results.NS_NOINTERFACE;</span>
<a href="#l24.21"></a><span id="l24.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/suite/mailnews/search/SearchDialog.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/suite/mailnews/search/SearchDialog.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -522,16 +522,18 @@ nsMsgSearchCommandUpdater.prototype =</span>
<a href="#l25.4"></a><span id="l25.4">   {</span>
<a href="#l25.5"></a><span id="l25.5">   },</span>
<a href="#l25.6"></a><span id="l25.6"> </span>
<a href="#l25.7"></a><span id="l25.7">   updateNextMessageAfterDelete : function()</span>
<a href="#l25.8"></a><span id="l25.8">   {</span>
<a href="#l25.9"></a><span id="l25.9">     SetNextMessageAfterDelete();</span>
<a href="#l25.10"></a><span id="l25.10">   },</span>
<a href="#l25.11"></a><span id="l25.11"> </span>
<a href="#l25.12"></a><span id="l25.12" class="difflineplus">+  summarizeSelection: function() {},</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+</span>
<a href="#l25.14"></a><span id="l25.14">   QueryInterface : function(iid)</span>
<a href="#l25.15"></a><span id="l25.15">   {</span>
<a href="#l25.16"></a><span id="l25.16">     if (iid.equals(Components.interfaces.nsIMsgDBViewCommandUpdater) ||</span>
<a href="#l25.17"></a><span id="l25.17">         iid.equals(Components.interfaces.nsISupports))</span>
<a href="#l25.18"></a><span id="l25.18">       return this;</span>
<a href="#l25.19"></a><span id="l25.19"> </span>
<a href="#l25.20"></a><span id="l25.20">     throw Components.results.NS_NOINTERFACE;</span>
<a href="#l25.21"></a><span id="l25.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/suite/mailnews/threadPane.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/suite/mailnews/threadPane.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -111,16 +111,18 @@ nsMsgDBViewCommandUpdater.prototype =</span>
<a href="#l26.4"></a><span id="l26.4">     goUpdateCommand(&quot;button_junk&quot;);</span>
<a href="#l26.5"></a><span id="l26.5">   },</span>
<a href="#l26.6"></a><span id="l26.6"> </span>
<a href="#l26.7"></a><span id="l26.7">   updateNextMessageAfterDelete : function()</span>
<a href="#l26.8"></a><span id="l26.8">   {</span>
<a href="#l26.9"></a><span id="l26.9">     SetNextMessageAfterDelete();</span>
<a href="#l26.10"></a><span id="l26.10">   },</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineplus">+  summarizeSelection: function() {},</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+</span>
<a href="#l26.14"></a><span id="l26.14">   QueryInterface : function(iid)</span>
<a href="#l26.15"></a><span id="l26.15">    {</span>
<a href="#l26.16"></a><span id="l26.16">      if (iid.equals(Components.interfaces.nsIMsgDBViewCommandUpdater) ||</span>
<a href="#l26.17"></a><span id="l26.17">          iid.equals(Components.interfaces.nsISupports))</span>
<a href="#l26.18"></a><span id="l26.18">        return this;</span>
<a href="#l26.19"></a><span id="l26.19"> 	  </span>
<a href="#l26.20"></a><span id="l26.20">      throw Components.results.NS_NOINTERFACE;</span>
<a href="#l26.21"></a><span id="l26.21">     }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

