<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 12086:b9245b4d66d1a50472be82a23929e3204acd9c62</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ b9245b4d66d1a50472be82a23929e3204acd9c62" />
<meta property="og:url" content="/comm-central/rev/b9245b4d66d1a50472be82a23929e3204acd9c62" />
<meta property="og:description" content="Bug 784848 - allow repacking l10n on win64 using mozconfigs, objdirs, and pre-built mar tools - r=Callek" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / b9245b4d66d1a50472be82a23929e3204acd9c62 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/b9245b4d66d1a50472be82a23929e3204acd9c62">shortlog</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/b9245b4d66d1a50472be82a23929e3204acd9c62">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62">files</a> |
changeset |
<a href="/comm-central/raw-rev/b9245b4d66d1a50472be82a23929e3204acd9c62">raw</a>  | <a href="/comm-central/archive/b9245b4d66d1a50472be82a23929e3204acd9c62.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=784848">Bug 784848</a> - allow repacking l10n on win64 using mozconfigs, objdirs, and pre-built mar tools - r=Callek
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#67;&#104;&#114;&#105;&#115;&#32;&#67;&#111;&#111;&#112;&#101;&#114;&#32;&#60;&#99;&#99;&#111;&#111;&#112;&#101;&#114;&#64;&#100;&#101;&#97;&#100;&#115;&#113;&#117;&#105;&#100;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 06 Mar 2013 11:28:39 -0800</td></tr>

<tr>
 <td>changeset 12086</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/b9245b4d66d1a50472be82a23929e3204acd9c62">b9245b4d66d1a50472be82a23929e3204acd9c62</a></td>
</tr>



<tr>
<td>parent 12085</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/949ebc4e6f47f23a79be8cee8d33f155e8dd5394">949ebc4e6f47f23a79be8cee8d33f155e8dd5394</a>
</td>
</tr>

<tr>
<td>child 12087</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9a11f1cc1da9f0b87861569a8bf9c69f9a362f5e">9a11f1cc1da9f0b87861569a8bf9c69f9a362f5e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=b9245b4d66d1a50472be82a23929e3204acd9c62">8971</a></td></tr>
<tr><td>push user</td><td>coop@mozilla.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 06 Mar 2013 19:28:51 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@b9245b4d66d1 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b9245b4d66d1a50472be82a23929e3204acd9c62">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=b9245b4d66d1a50472be82a23929e3204acd9c62&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b9245b4d66d1a50472be82a23929e3204acd9c62&newProject=comm-central&newRevision=b9245b4d66d1a50472be82a23929e3204acd9c62&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b9245b4d66d1a50472be82a23929e3204acd9c62&newProject=comm-central&newRevision=b9245b4d66d1a50472be82a23929e3204acd9c62&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=b9245b4d66d1a50472be82a23929e3204acd9c62&newProject=comm-central&newRevision=b9245b4d66d1a50472be82a23929e3204acd9c62&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Callek%29&revcount=50">Callek</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=784848">784848</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=784848">Bug 784848</a> - allow repacking l10n on win64 using mozconfigs, objdirs, and pre-built mar tools - r=Callek</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/client.mk">client.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/client.mk">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/client.mk">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/client.mk">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/client.mk">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/client.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/config/config.mk">config/config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/config/config.mk">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/config/config.mk">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/config/config.mk">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/config/config.mk">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/config/config.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/config/makefiles/autotargets.mk">config/makefiles/autotargets.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/config/makefiles/autotargets.mk">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/config/makefiles/autotargets.mk">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/config/makefiles/autotargets.mk">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/config/makefiles/autotargets.mk">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/config/makefiles/autotargets.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/configure.in">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/configure.in">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/configure.in">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/configure.in">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/configure.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux32/l10n-mozconfig">mail/config/mozconfigs/linux32/l10n-mozconfig</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux32/l10n-mozconfig">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux32/l10n-mozconfig">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux32/l10n-mozconfig">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux32/l10n-mozconfig">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux32/l10n-mozconfig">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux64/l10n-mozconfig">mail/config/mozconfigs/linux64/l10n-mozconfig</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux64/l10n-mozconfig">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux64/l10n-mozconfig">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux64/l10n-mozconfig">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux64/l10n-mozconfig">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/linux64/l10n-mozconfig">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/macosx-universal/l10n-mozconfig">mail/config/mozconfigs/macosx-universal/l10n-mozconfig</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/macosx-universal/l10n-mozconfig">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/macosx-universal/l10n-mozconfig">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/macosx-universal/l10n-mozconfig">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/macosx-universal/l10n-mozconfig">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/macosx-universal/l10n-mozconfig">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/win32/l10n-mozconfig">mail/config/mozconfigs/win32/l10n-mozconfig</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/win32/l10n-mozconfig">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/win32/l10n-mozconfig">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/win32/l10n-mozconfig">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/win32/l10n-mozconfig">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/config/mozconfigs/win32/l10n-mozconfig">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/locales/Makefile.in">mail/locales/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/locales/Makefile.in">file</a> |
<a href="/comm-central/annotate/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/locales/Makefile.in">annotate</a> |
<a href="/comm-central/diff/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/locales/Makefile.in">diff</a> |
<a href="/comm-central/comparison/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/locales/Makefile.in">comparison</a> |
<a href="/comm-central/log/b9245b4d66d1a50472be82a23929e3204acd9c62/mail/locales/Makefile.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/client.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/client.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -64,17 +64,16 @@ AUTOCONF ?= $(shell which autoconf-2.13 </span>
<a href="#l1.4"></a><span id="l1.4"> ifeq (,$(strip $(AUTOCONF)))</span>
<a href="#l1.5"></a><span id="l1.5"> AUTOCONF = $(shell which fink &gt;/dev/null 2&gt;&amp;1 &amp;&amp; echo `which fink`/../../lib/autoconf2.13/bin/autoconf)</span>
<a href="#l1.6"></a><span id="l1.6"> endif</span>
<a href="#l1.7"></a><span id="l1.7"> </span>
<a href="#l1.8"></a><span id="l1.8"> ifeq (,$(strip $(AUTOCONF)))</span>
<a href="#l1.9"></a><span id="l1.9"> AUTOCONF=$(error Couldn't find autoconf 2.13)</span>
<a href="#l1.10"></a><span id="l1.10"> endif</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-MKDIR := mkdir</span>
<a href="#l1.13"></a><span id="l1.13"> SH := /bin/sh</span>
<a href="#l1.14"></a><span id="l1.14"> ifndef MAKE</span>
<a href="#l1.15"></a><span id="l1.15"> MAKE := gmake</span>
<a href="#l1.16"></a><span id="l1.16"> endif</span>
<a href="#l1.17"></a><span id="l1.17"> PERL ?= perl</span>
<a href="#l1.18"></a><span id="l1.18"> PYTHON ?= python</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> CONFIG_GUESS_SCRIPT := $(wildcard $(TOPSRCDIR)/build/autoconf/config.guess)</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineat">@@ -144,16 +143,20 @@ CONFIGURES += $(TOPSRCDIR)/mozilla/confi</span>
<a href="#l1.22"></a><span id="l1.22"> CONFIGURES += $(TOPSRCDIR)/mozilla/js/src/configure</span>
<a href="#l1.23"></a><span id="l1.23"> </span>
<a href="#l1.24"></a><span id="l1.24"> #######################################################################</span>
<a href="#l1.25"></a><span id="l1.25"> # Rules</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27"> # The default rule is build</span>
<a href="#l1.28"></a><span id="l1.28"> build::</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30" class="difflineplus">+# Define mkdir</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineplus">+include $(TOPSRCDIR)/config/makefiles/makeutils.mk</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+include $(TOPSRCDIR)/config/makefiles/autotargets.mk</span>
<a href="#l1.33"></a><span id="l1.33" class="difflineplus">+</span>
<a href="#l1.34"></a><span id="l1.34"> # These targets are candidates for auto-running client.py</span>
<a href="#l1.35"></a><span id="l1.35"> </span>
<a href="#l1.36"></a><span id="l1.36"> ifeq (01,$(MAKELEVEL)$(if $(ALWAYS_RUN_CLIENT_PY),1,))</span>
<a href="#l1.37"></a><span id="l1.37"> </span>
<a href="#l1.38"></a><span id="l1.38"> build profiledbuild configure:: run_client_py</span>
<a href="#l1.39"></a><span id="l1.39"> 	$(MAKE) -f $(TOPSRCDIR)/client.mk $@</span>
<a href="#l1.40"></a><span id="l1.40"> else</span>
<a href="#l1.41"></a><span id="l1.41"> </span>
<a href="#l1.42"></a><span id="l1.42" class="difflineat">@@ -285,21 +288,23 @@ CONFIGURE_ENV_ARGS += \</span>
<a href="#l1.43"></a><span id="l1.43"> ifeq ($(TOPSRCDIR),$(OBJDIR))</span>
<a href="#l1.44"></a><span id="l1.44">   CONFIGURE = ./configure</span>
<a href="#l1.45"></a><span id="l1.45"> else</span>
<a href="#l1.46"></a><span id="l1.46">   CONFIGURE = $(TOPSRCDIR)/configure</span>
<a href="#l1.47"></a><span id="l1.47"> endif</span>
<a href="#l1.48"></a><span id="l1.48"> </span>
<a href="#l1.49"></a><span id="l1.49"> configure-files: $(CONFIGURES)</span>
<a href="#l1.50"></a><span id="l1.50"> </span>
<a href="#l1.51"></a><span id="l1.51" class="difflineminus">-configure:: configure-files</span>
<a href="#l1.52"></a><span id="l1.52" class="difflineminus">-ifdef MOZ_BUILD_PROJECTS</span>
<a href="#l1.53"></a><span id="l1.53" class="difflineminus">-	@if test ! -d $(MOZ_OBJDIR); then $(MKDIR) $(MOZ_OBJDIR); else true; fi</span>
<a href="#l1.54"></a><span id="l1.54" class="difflineminus">-endif</span>
<a href="#l1.55"></a><span id="l1.55" class="difflineminus">-	@if test ! -d $(OBJDIR); then $(MKDIR) $(OBJDIR); else true; fi</span>
<a href="#l1.56"></a><span id="l1.56" class="difflineplus">+configure-preqs = \</span>
<a href="#l1.57"></a><span id="l1.57" class="difflineplus">+  configure-files \</span>
<a href="#l1.58"></a><span id="l1.58" class="difflineplus">+  $(call mkdir_deps,$(OBJDIR)) \</span>
<a href="#l1.59"></a><span id="l1.59" class="difflineplus">+  $(if $(MOZ_BUILD_PROJECTS),$(call mkdir_deps,$(MOZ_OBJDIR))) \</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineplus">+  $(NULL)</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineplus">+</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineplus">+configure:: $(configure-preqs)</span>
<a href="#l1.63"></a><span id="l1.63"> 	@echo cd $(OBJDIR);</span>
<a href="#l1.64"></a><span id="l1.64"> 	@echo $(CONFIGURE) $(CONFIGURE_ARGS)</span>
<a href="#l1.65"></a><span id="l1.65"> 	@cd $(OBJDIR) &amp;&amp; $(BUILD_PROJECT_ARG) $(CONFIGURE_ENV_ARGS) $(CONFIGURE) $(CONFIGURE_ARGS) \</span>
<a href="#l1.66"></a><span id="l1.66"> 	  || ( echo &quot;*** Fix above errors and then restart with\</span>
<a href="#l1.67"></a><span id="l1.67">                \&quot;$(MAKE) -f client.mk build\&quot;&quot; &amp;&amp; exit 1 )</span>
<a href="#l1.68"></a><span id="l1.68"> 	@touch $(OBJDIR)/Makefile</span>
<a href="#l1.69"></a><span id="l1.69"> </span>
<a href="#l1.70"></a><span id="l1.70"> ifneq (,$(MAKEFILE))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/config/config.mk</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/config/config.mk</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -58,16 +58,17 @@ CHECK_VARS := \</span>
<a href="#l2.4"></a><span id="l2.4"> </span>
<a href="#l2.5"></a><span id="l2.5"> # checks for internal spaces or trailing spaces in the variable</span>
<a href="#l2.6"></a><span id="l2.6"> # named by $x</span>
<a href="#l2.7"></a><span id="l2.7"> check-variable = $(if $(filter-out 0 1,$(words $($(x))z)),$(error Spaces are not allowed in $(x)))</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9"> $(foreach x,$(CHECK_VARS),$(check-variable))</span>
<a href="#l2.10"></a><span id="l2.10"> </span>
<a href="#l2.11"></a><span id="l2.11"> core_abspath = $(if $(findstring :,$(1)),$(1),$(if $(filter /%,$(1)),$(1),$(CURDIR)/$(1)))</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+core_realpath = $(if $(realpath $(1)),$(realpath $(1)),$(call core_abspath,$(1)))</span>
<a href="#l2.13"></a><span id="l2.13"> </span>
<a href="#l2.14"></a><span id="l2.14"> RM = rm -f</span>
<a href="#l2.15"></a><span id="l2.15"> </span>
<a href="#l2.16"></a><span id="l2.16"> core_winabspath = $(firstword $(subst /, ,$(call core_abspath,$(1)))):$(subst $(space),,$(patsubst %,\\%,$(wordlist 2,$(words $(subst /, ,$(call core_abspath,$(1)))), $(strip $(subst /, ,$(call core_abspath,$(1)))))))</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18"> # FINAL_TARGET specifies the location into which we copy end-user-shipped</span>
<a href="#l2.19"></a><span id="l2.19"> # build products (typelibs, components, chrome).</span>
<a href="#l2.20"></a><span id="l2.20"> #</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -312,26 +313,16 @@ TAR_CREATE_FLAGS = -cvhf</span>
<a href="#l2.22"></a><span id="l2.22"> ifeq ($(OS_ARCH),BSD_OS)</span>
<a href="#l2.23"></a><span id="l2.23"> TAR_CREATE_FLAGS = -cvLf</span>
<a href="#l2.24"></a><span id="l2.24"> endif</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26"> ifeq ($(OS_ARCH),OS2)</span>
<a href="#l2.27"></a><span id="l2.27"> TAR_CREATE_FLAGS = -cvf</span>
<a href="#l2.28"></a><span id="l2.28"> endif</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-ifdef LOCALE_MERGEDIR</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-MERGE_FILE = $(firstword \</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-  $(wildcard $(LOCALE_MERGEDIR)/$(subst /locales,,$(relativesrcdir))/$(1)) \</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">-  $(wildcard $(LOCALE_SRCDIR)/$(1)) \</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-  $(srcdir)/en-US/$(1) )</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-else</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-MERGE_FILE = $(LOCALE_SRCDIR)/$(1)</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-endif</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-MERGE_FILES = $(foreach f,$(1),$(call MERGE_FILE,$(f)))</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-</span>
<a href="#l2.40"></a><span id="l2.40"> #</span>
<a href="#l2.41"></a><span id="l2.41"> # Personal makefile customizations go in these optional make include files.</span>
<a href="#l2.42"></a><span id="l2.42"> #</span>
<a href="#l2.43"></a><span id="l2.43"> MY_CONFIG	:= $(DEPTH)/config/myconfig.mk</span>
<a href="#l2.44"></a><span id="l2.44"> MY_RULES	:= $(DEPTH)/config/myrules.mk</span>
<a href="#l2.45"></a><span id="l2.45"> </span>
<a href="#l2.46"></a><span id="l2.46"> #</span>
<a href="#l2.47"></a><span id="l2.47"> # Default command macros; can be overridden in &lt;arch&gt;.mk.</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineat">@@ -647,18 +638,18 @@ png2ico = $(PYTHON) $(MOZILLA_DIR)/confi</span>
<a href="#l2.49"></a><span id="l2.49"> AB_CD = $(MOZ_UI_LOCALE)</span>
<a href="#l2.50"></a><span id="l2.50"> </span>
<a href="#l2.51"></a><span id="l2.51"> ifndef L10NBASEDIR</span>
<a href="#l2.52"></a><span id="l2.52">   L10NBASEDIR = $(error L10NBASEDIR not defined by configure)</span>
<a href="#l2.53"></a><span id="l2.53"> else</span>
<a href="#l2.54"></a><span id="l2.54">   IS_LANGUAGE_REPACK = 1</span>
<a href="#l2.55"></a><span id="l2.55"> endif</span>
<a href="#l2.56"></a><span id="l2.56"> </span>
<a href="#l2.57"></a><span id="l2.57" class="difflineminus">-EXPAND_LOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(topsrcdir)/$(1)/en-US,$(L10NBASEDIR)/$(AB_CD)/$(subst /locales,,$(1)))</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineminus">-EXPAND_MOZLOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(MOZILLA_SRCDIR)/$(1)/en-US,$(L10NBASEDIR)/$(AB_CD)/$(subst /locales,,$(1)))</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineplus">+EXPAND_LOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(topsrcdir)/$(1)/en-US,$(call core_realpath,$(L10NBASEDIR)/$(AB_CD)/$(subst /locales,,$(1))))</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineplus">+EXPAND_MOZLOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(MOZILLA_SRCDIR)/$(1)/en-US,$(call core_realpath,$(L10NBASEDIR)/$(AB_CD)/$(subst /locales,,$(1))))</span>
<a href="#l2.61"></a><span id="l2.61"> </span>
<a href="#l2.62"></a><span id="l2.62"> ifdef relativesrcdir</span>
<a href="#l2.63"></a><span id="l2.63"> LOCALE_SRCDIR = $(call EXPAND_LOCALE_SRCDIR,$(relativesrcdir))</span>
<a href="#l2.64"></a><span id="l2.64"> endif</span>
<a href="#l2.65"></a><span id="l2.65"> </span>
<a href="#l2.66"></a><span id="l2.66"> ifdef relativesrcdir</span>
<a href="#l2.67"></a><span id="l2.67"> MAKE_JARS_FLAGS += --relativesrcdir=$(relativesrcdir)</span>
<a href="#l2.68"></a><span id="l2.68"> ifneq (en-US,$(AB_CD))</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineat">@@ -670,16 +661,26 @@ MAKE_JARS_FLAGS += --l10n-base=$(L10NBAS</span>
<a href="#l2.70"></a><span id="l2.70"> endif</span>
<a href="#l2.71"></a><span id="l2.71"> else</span>
<a href="#l2.72"></a><span id="l2.72"> MAKE_JARS_FLAGS += -c $(LOCALE_SRCDIR)</span>
<a href="#l2.73"></a><span id="l2.73"> endif # en-US</span>
<a href="#l2.74"></a><span id="l2.74"> else</span>
<a href="#l2.75"></a><span id="l2.75"> MAKE_JARS_FLAGS += -c $(LOCALE_SRCDIR)</span>
<a href="#l2.76"></a><span id="l2.76"> endif # ! relativesrcdir</span>
<a href="#l2.77"></a><span id="l2.77"> </span>
<a href="#l2.78"></a><span id="l2.78" class="difflineplus">+ifdef LOCALE_MERGEDIR</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineplus">+MERGE_FILE = $(firstword \</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineplus">+  $(wildcard $(LOCALE_MERGEDIR)/$(subst /locales,,$(relativesrcdir))/$(1)) \</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineplus">+  $(wildcard $(LOCALE_SRCDIR)/$(1)) \</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineplus">+  $(srcdir)/en-US/$(1) )</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineplus">+else</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineplus">+MERGE_FILE = $(LOCALE_SRCDIR)/$(1)</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineplus">+endif</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineplus">+MERGE_FILES = $(foreach f,$(1),$(call MERGE_FILE,$(f)))</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineplus">+</span>
<a href="#l2.88"></a><span id="l2.88"> ifeq (OS2,$(OS_ARCH))</span>
<a href="#l2.89"></a><span id="l2.89"> RUN_TEST_PROGRAM = $(MOZILLA_SRCDIR)/build/os2/test_os2.cmd &quot;$(DIST)&quot;</span>
<a href="#l2.90"></a><span id="l2.90"> else</span>
<a href="#l2.91"></a><span id="l2.91"> ifneq (WINNT,$(OS_ARCH))</span>
<a href="#l2.92"></a><span id="l2.92"> RUN_TEST_PROGRAM = $(DIST)/bin/run-mozilla.sh</span>
<a href="#l2.93"></a><span id="l2.93"> endif # ! WINNT</span>
<a href="#l2.94"></a><span id="l2.94"> endif # ! OS2</span>
<a href="#l2.95"></a><span id="l2.95"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/config/makefiles/autotargets.mk</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,94 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+# -*- makefile -*-</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+# vim:set ts=8 sw=8 sts=8 noet:</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+#</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+# License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+# You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+#</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+ifndef INCLUDED_AUTOTARGETS_MK #{</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+# Conditional does not wrap the entire file so multiple</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+# includes will be able to accumulate dependencies.</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+###########################################################################</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+#      AUTO_DEPS - A list of deps/targets drived from other macros.</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+###########################################################################</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+MKDIR ?= mkdir -p</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+TOUCH ?= touch</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+# declare for local use, rules.mk may not have been loaded</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+space = $(NULL) $(NULL)</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+# Deps will be considered intermediate when used as a pre-requisite for</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+# wildcard targets.  Inhibit their removal, mkdir -p is a standalone op.</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+.PRECIOUS: %/.mkdir.done</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+#########################</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+##---]  FUNCTIONS  [---##</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+#########################</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+# Squeeze can be overzealous, restore root for abspath</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+getPathPrefix =$(if $(filter /%,$(1)),/)</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+# Squeeze '//' from the path, easily created by string functions</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+_slashSqueeze =$(foreach val,$(getargv),$(call getPathPrefix,$(val))$(subst $(space),/,$(strip $(subst /,$(space),$(val)))))</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+# Squeeze extraneous directory slashes from the path</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+#  o protect embedded spaces within the path</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+#  o replace //+ sequences with /</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+slash_strip = \</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+  $(strip \</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+    $(subst &lt;--[**]--&gt;,$(space),\</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+	$(call _slashSqueeze,\</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+    $(subst $(space),&lt;--[**]--&gt;,$(1))\</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+  )))</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+# Extract directory path from a dependency file.</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+mkdir_stem =$(foreach val,$(getargv),$(subst /.mkdir.done,$(NULL),$(val)))</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+## Generate timestamp file for threadsafe directory creation</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+mkdir_deps =$(foreach dir,$(getargv),$(call slash_strip,$(dir)/.mkdir.done))</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+#######################</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+##---]  TARGETS  [---##</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+#######################</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+%/.mkdir.done: # mkdir -p -p =&gt; mkdir -p</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+	$(subst $(space)-p,$(null),$(MKDIR)) -p &quot;$(dir $@)&quot;</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+# Make the timestamp old enough for not being a problem with symbolic links</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+# targets depending on it. Use Jan 3, 1980 to accomodate any timezone where</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+# 198001010000 would translate to something older than FAT epoch.</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+	@$(TOUCH) -t 198001030000 &quot;$@&quot;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+# A handful of makefiles are attempting &quot;mkdir dot&quot;.</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+# tbpl/valgrind builds are using this target</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+# https://bugzilla.mozilla.org/show_bug.cgi?id=837754</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+.mkdir.done:</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+	@echo &quot;WARNING: $(MKDIR) -dot- requested by $(MAKE) -C $(CURDIR) $(MAKECMDGOALS)&quot;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+	@$(TOUCH) -t 198001030000 &quot;$@&quot;</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+INCLUDED_AUTOTARGETS_MK = 1</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+endif #}</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+## Accumulate deps and cleanup</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+ifneq (,$(GENERATED_DIRS))</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+  GENERATED_DIRS := $(strip $(sort $(GENERATED_DIRS)))</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+  tmpauto :=$(call mkdir_deps,GENERATED_DIRS)</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+  GENERATED_DIRS_DEPS +=$(tmpauto)</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+  GARBAGE_DIRS        +=$(GENERATED_DIRS)</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+endif</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+#################################################################</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+# One ring/dep to rule them all:</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+#   config/rules.mk::all target is available by default</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+#   Add $(AUTO_DEPS) as an explicit target dependency when needed.</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+#################################################################</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+AUTO_DEPS +=$(GENERATED_DIRS_DEPS)</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+AUTO_DEPS := $(strip $(sort $(AUTO_DEPS)))</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineplus">+</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+# Complain loudly if deps have not loaded so getargv != $(NULL)</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineplus">+$(call requiredfunction,getargv)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/configure.in</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/configure.in</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1780,18 +1780,19 @@ ia64*-hpux*)</span>
<a href="#l4.4"></a><span id="l4.4">     TARGET_NSPR_MDCPUCFG='\&quot;md/_win95.cfg\&quot;'</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">     dnl set NO_X11 defines here as the general check is skipped on win32</span>
<a href="#l4.7"></a><span id="l4.7">     no_x=yes</span>
<a href="#l4.8"></a><span id="l4.8">     AC_DEFINE(NO_X11)</span>
<a href="#l4.9"></a><span id="l4.9"> </span>
<a href="#l4.10"></a><span id="l4.10">     case &quot;$host&quot; in</span>
<a href="#l4.11"></a><span id="l4.11">     *-mingw*)</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-	MOZ_BUILD_ROOT=`cd $MOZ_BUILD_ROOT &amp;&amp; pwd -W`</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-	;;</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineplus">+        MOZ_BUILD_ROOT=`cd $MOZ_BUILD_ROOT &amp;&amp; pwd -W`</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineplus">+        L10NBASEDIR=`cd $L10NBASEDIR &amp;&amp; pwd -W`</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineplus">+        ;;</span>
<a href="#l4.17"></a><span id="l4.17">     esac</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">     case &quot;$host&quot; in</span>
<a href="#l4.20"></a><span id="l4.20">     *-mingw*)</span>
<a href="#l4.21"></a><span id="l4.21"> </span>
<a href="#l4.22"></a><span id="l4.22">     if test -z &quot;$MOZ_TOOLS&quot;; then</span>
<a href="#l4.23"></a><span id="l4.23">         AC_MSG_ERROR([MOZ_TOOLS is not set])</span>
<a href="#l4.24"></a><span id="l4.24">     fi</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/config/mozconfigs/linux32/l10n-mozconfig</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/config/mozconfigs/linux32/l10n-mozconfig</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -1,13 +1,14 @@</span>
<a href="#l5.4"></a><span id="l5.4"> ac_add_options --enable-application=mail</span>
<a href="#l5.5"></a><span id="l5.5"> ac_add_options --enable-update-channel=${MOZ_UPDATE_CHANNEL}</span>
<a href="#l5.6"></a><span id="l5.6"> ac_add_options --enable-update-packaging</span>
<a href="#l5.7"></a><span id="l5.7"> ac_add_options --enable-codesighs</span>
<a href="#l5.8"></a><span id="l5.8"> ac_add_options --enable-profiling</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineplus">+ac_add_options --with-l10n-base=../../l10n-central</span>
<a href="#l5.10"></a><span id="l5.10"> </span>
<a href="#l5.11"></a><span id="l5.11"> # Temporary options until bug 794378 is fixed</span>
<a href="#l5.12"></a><span id="l5.12"> ac_add_options --enable-gnomevfs</span>
<a href="#l5.13"></a><span id="l5.13"> ac_add_options --disable-gio</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15"> . $topsrcdir/build/unix/mozconfig.linux</span>
<a href="#l5.16"></a><span id="l5.16"> </span>
<a href="#l5.17"></a><span id="l5.17"> # Avoid dependency on libstdc++ 4.5</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/config/mozconfigs/linux64/l10n-mozconfig</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/config/mozconfigs/linux64/l10n-mozconfig</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1,13 +1,14 @@</span>
<a href="#l6.4"></a><span id="l6.4"> ac_add_options --enable-application=mail</span>
<a href="#l6.5"></a><span id="l6.5"> ac_add_options --enable-update-channel=${MOZ_UPDATE_CHANNEL}</span>
<a href="#l6.6"></a><span id="l6.6"> ac_add_options --enable-update-packaging</span>
<a href="#l6.7"></a><span id="l6.7"> ac_add_options --enable-codesighs</span>
<a href="#l6.8"></a><span id="l6.8"> ac_add_options --enable-profiling</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+ac_add_options --with-l10n-base=../../l10n-central</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11"> # Temporary options until bug 794378 is fixed</span>
<a href="#l6.12"></a><span id="l6.12"> ac_add_options --enable-gnomevfs</span>
<a href="#l6.13"></a><span id="l6.13"> ac_add_options --disable-gio</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15"> . $topsrcdir/build/unix/mozconfig.linux</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17"> # Avoid dependency on libstdc++ 4.5</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/config/mozconfigs/macosx-universal/l10n-mozconfig</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/config/mozconfigs/macosx-universal/l10n-mozconfig</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -2,28 +2,29 @@</span>
<a href="#l7.4"></a><span id="l7.4"> # mixed up with host/target CPUs when trying to work out how to do the</span>
<a href="#l7.5"></a><span id="l7.5"> # universal build. When we redo the build system (bug 648979) this will</span>
<a href="#l7.6"></a><span id="l7.6"> # go away.</span>
<a href="#l7.7"></a><span id="l7.7"> if test -e &quot;$topsrcdir/mail/config/version.txt&quot;; then</span>
<a href="#l7.8"></a><span id="l7.8">   unset CC</span>
<a href="#l7.9"></a><span id="l7.9">   unset CXX</span>
<a href="#l7.10"></a><span id="l7.10"> fi</span>
<a href="#l7.11"></a><span id="l7.11"> </span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-. $topsrcdir/build/macosx/universal/mozconfig</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+#. $topsrcdir/build/macosx/universal/mozconfig</span>
<a href="#l7.14"></a><span id="l7.14"> </span>
<a href="#l7.15"></a><span id="l7.15"> # Universal builds override the default of mail (bug 575283 comment 29)</span>
<a href="#l7.16"></a><span id="l7.16"> ac_add_options --enable-application=mail</span>
<a href="#l7.17"></a><span id="l7.17"> ac_add_options --enable-update-channel=${MOZ_UPDATE_CHANNEL}</span>
<a href="#l7.18"></a><span id="l7.18"> ac_add_options --enable-update-packaging</span>
<a href="#l7.19"></a><span id="l7.19"> ac_add_options --enable-codesighs</span>
<a href="#l7.20"></a><span id="l7.20"> ac_add_options --disable-install-strip</span>
<a href="#l7.21"></a><span id="l7.21"> ac_add_options --enable-profiling</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineplus">+ac_add_options --with-l10n-base=../../../l10n-central</span>
<a href="#l7.23"></a><span id="l7.23"> </span>
<a href="#l7.24"></a><span id="l7.24"> # Make sure Lightning is also unified</span>
<a href="#l7.25"></a><span id="l7.25" class="difflineminus">-mk_add_options MOZ_POSTFLIGHT_ALL+=calendar/lightning/build/universal.mk</span>
<a href="#l7.26"></a><span id="l7.26" class="difflineplus">+#mk_add_options MOZ_POSTFLIGHT_ALL+=calendar/lightning/build/universal.mk</span>
<a href="#l7.27"></a><span id="l7.27"> </span>
<a href="#l7.28"></a><span id="l7.28"> # For NSS symbols</span>
<a href="#l7.29"></a><span id="l7.29"> export MOZ_DEBUG_SYMBOLS=1</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31"> # Needed to enable breakpad in application.ini</span>
<a href="#l7.32"></a><span id="l7.32"> export MOZILLA_OFFICIAL=1</span>
<a href="#l7.33"></a><span id="l7.33"> </span>
<a href="#l7.34"></a><span id="l7.34"> # Enable parallel compiling</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/config/mozconfigs/win32/l10n-mozconfig</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/config/mozconfigs/win32/l10n-mozconfig</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1,15 +1,16 @@</span>
<a href="#l8.4"></a><span id="l8.4"> . &quot;$topsrcdir/build/mozconfig.common&quot;</span>
<a href="#l8.5"></a><span id="l8.5"> </span>
<a href="#l8.6"></a><span id="l8.6"> ac_add_options --enable-application=mail</span>
<a href="#l8.7"></a><span id="l8.7"> ac_add_options --enable-update-channel=${MOZ_UPDATE_CHANNEL}</span>
<a href="#l8.8"></a><span id="l8.8"> ac_add_options --enable-update-packaging</span>
<a href="#l8.9"></a><span id="l8.9"> ac_add_options --enable-jemalloc</span>
<a href="#l8.10"></a><span id="l8.10"> ac_add_options --enable-profiling</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineplus">+ac_add_options --with-l10n-base=../../l10n-central</span>
<a href="#l8.12"></a><span id="l8.12"> </span>
<a href="#l8.13"></a><span id="l8.13"> # For NSS symbols</span>
<a href="#l8.14"></a><span id="l8.14"> export MOZ_DEBUG_SYMBOLS=1</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16"> # Needed to enable breakpad in application.ini</span>
<a href="#l8.17"></a><span id="l8.17"> export MOZILLA_OFFICIAL=1</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19"> if test -n &quot;${_PYMAKE}&quot;; then</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/locales/Makefile.in</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/locales/Makefile.in</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -34,18 +34,17 @@ PWD := $(CURDIR)</span>
<a href="#l9.4"></a><span id="l9.4"> # override them when MOZ_PKG_PRETTYNAMES is defined - the defaults will not</span>
<a href="#l9.5"></a><span id="l9.5"> # work in that case.</span>
<a href="#l9.6"></a><span id="l9.6"> ZIP_IN ?= $(_ABS_DIST)/$(PACKAGE)</span>
<a href="#l9.7"></a><span id="l9.7"> WIN32_INSTALLER_IN ?= $(_ABS_DIST)/$(PKG_INST_PATH)$(PKG_INST_BASENAME).exe</span>
<a href="#l9.8"></a><span id="l9.8"> RETRIEVE_WINDOWS_INSTALLER = 1</span>
<a href="#l9.9"></a><span id="l9.9"> </span>
<a href="#l9.10"></a><span id="l9.10"> MOZ_LANGPACK_EID=langpack-$(AB_CD)@thunderbird.mozilla.org</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-PREF_JS_EXPORTS = $(firstword $(wildcard $(LOCALE_SRCDIR)/all-l10n.js) \</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-                       $(srcdir)/en-US/all-l10n.js )</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+PREF_JS_EXPORTS = $(call MERGE_FILE,all-l10n.js)</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16"> ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))</span>
<a href="#l9.17"></a><span id="l9.17"> MOZ_PKG_MAC_DSSTORE=$(_ABS_DIST)/branding/dsstore</span>
<a href="#l9.18"></a><span id="l9.18"> MOZ_PKG_MAC_BACKGROUND=$(_ABS_DIST)/branding/background.png</span>
<a href="#l9.19"></a><span id="l9.19"> MOZ_PKG_MAC_ICON=$(_ABS_DIST)/branding/disk.icns</span>
<a href="#l9.20"></a><span id="l9.20"> MOZ_PKG_MAC_EXTRA=--symlink &quot;/Applications:/ &quot;</span>
<a href="#l9.21"></a><span id="l9.21"> endif</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23" class="difflineat">@@ -132,17 +131,17 @@ langpack: langpack-$(AB_CD)</span>
<a href="#l9.24"></a><span id="l9.24"> # This is a generic target that will make a langpack, repack ZIP (+tarball)</span>
<a href="#l9.25"></a><span id="l9.25"> # builds, and repack and installer if applicable. It is called from the</span>
<a href="#l9.26"></a><span id="l9.26"> # tinderbox scripts. Alter it with caution.</span>
<a href="#l9.27"></a><span id="l9.27"> </span>
<a href="#l9.28"></a><span id="l9.28"> installers-%: clobber-% langpack-% repackage-win32-installer-% repackage-zip-%</span>
<a href="#l9.29"></a><span id="l9.29"> 	@echo &quot;repackaging done&quot;</span>
<a href="#l9.30"></a><span id="l9.30"> </span>
<a href="#l9.31"></a><span id="l9.31"> ifdef MOZ_UPDATER</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-libs:: $(addprefix $(LOCALE_SRCDIR)/,updater/updater.ini)</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineplus">+libs:: $(call MERGE_FILE,updater/updater.ini) $(call mkdir_deps,$(DIST)/bin)</span>
<a href="#l9.34"></a><span id="l9.34"> ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l9.35"></a><span id="l9.35"> 	cat $&lt; $(srcdir)/../installer/windows/nsis/updater_append.ini | \</span>
<a href="#l9.36"></a><span id="l9.36"> 	  sed -e &quot;s/^InfoText=/Info=/&quot; -e &quot;s/^TitleText=/Title=/&quot; | \</span>
<a href="#l9.37"></a><span id="l9.37"> 	  sed -e &quot;s/%MOZ_APP_DISPLAYNAME%/$(MOZ_APP_DISPLAYNAME)/&quot; &gt; \</span>
<a href="#l9.38"></a><span id="l9.38"> 	  $(FINAL_TARGET)/updater.ini</span>
<a href="#l9.39"></a><span id="l9.39"> else</span>
<a href="#l9.40"></a><span id="l9.40"> 	cat $&lt; | \</span>
<a href="#l9.41"></a><span id="l9.41"> 	  sed -e &quot;s/^InfoText=/Info=/&quot; -e &quot;s/^TitleText=/Title=/&quot; | \</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

