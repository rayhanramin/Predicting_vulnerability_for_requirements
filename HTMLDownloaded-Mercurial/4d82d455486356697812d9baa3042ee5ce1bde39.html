<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 18466:4d82d455486356697812d9baa3042ee5ce1bde39</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 4d82d455486356697812d9baa3042ee5ce1bde39" />
<meta property="og:url" content="/comm-central/rev/4d82d455486356697812d9baa3042ee5ce1bde39" />
<meta property="og:description" content="Bug 1202150 - Silence compiler warnings in nsMsgDBView and friends, part 2 mailnews/addrbook|base|compose|db|extensions. r=rkent" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 4d82d455486356697812d9baa3042ee5ce1bde39 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/4d82d455486356697812d9baa3042ee5ce1bde39">shortlog</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/4d82d455486356697812d9baa3042ee5ce1bde39">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39">files</a> |
changeset |
<a href="/comm-central/raw-rev/4d82d455486356697812d9baa3042ee5ce1bde39">raw</a>  | <a href="/comm-central/archive/4d82d455486356697812d9baa3042ee5ce1bde39.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1202150">Bug 1202150</a> - Silence compiler warnings in nsMsgDBView and friends, part 2 mailnews/addrbook|base|compose|db|extensions. r=rkent
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#97;&#108;&#116;&#97;&#56;&#56;</td></tr>
<tr><td></td><td class="date age">Tue, 29 Sep 2015 10:23:25 -0600</td></tr>

<tr>
 <td>changeset 18466</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/4d82d455486356697812d9baa3042ee5ce1bde39">4d82d455486356697812d9baa3042ee5ce1bde39</a></td>
</tr>



<tr>
<td>parent 18465</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/aac9d2367a718976c4789a93ddc4ccce5beb3f54">aac9d2367a718976c4789a93ddc4ccce5beb3f54</a>
</td>
</tr>

<tr>
<td>child 18467</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/553773cf31bde6d107bb2baa03015b472efe1b54">553773cf31bde6d107bb2baa03015b472efe1b54</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=4d82d455486356697812d9baa3042ee5ce1bde39">11304</a></td></tr>
<tr><td>push user</td><td>aleth@instantbird.org</td></tr>
<tr><td>push date</td><td class="date age">Tue, 29 Sep 2015 22:57:33 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@3ddf3a3eaf07 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3ddf3a3eaf07d5e6c1a98bfbe184dab32841ed03">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=3ddf3a3eaf07d5e6c1a98bfbe184dab32841ed03&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3ddf3a3eaf07d5e6c1a98bfbe184dab32841ed03&newProject=comm-central&newRevision=1eee99e7b54c1f720d0bb27b1e9fb1f1ae5048c0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3ddf3a3eaf07d5e6c1a98bfbe184dab32841ed03&newProject=comm-central&newRevision=1eee99e7b54c1f720d0bb27b1e9fb1f1ae5048c0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=3ddf3a3eaf07d5e6c1a98bfbe184dab32841ed03&newProject=comm-central&newRevision=1eee99e7b54c1f720d0bb27b1e9fb1f1ae5048c0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28rkent%29&revcount=50">rkent</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1202150">1202150</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1202150">Bug 1202150</a> - Silence compiler warnings in nsMsgDBView and friends, part 2 mailnews/addrbook|base|compose|db|extensions. r=rkent</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/addrbook/src/nsAbMDBDirectory.cpp">mailnews/addrbook/src/nsAbMDBDirectory.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/addrbook/src/nsAbMDBDirectory.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/addrbook/src/nsAbMDBDirectory.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/addrbook/src/nsAbMDBDirectory.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/addrbook/src/nsAbMDBDirectory.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/addrbook/src/nsAbMDBDirectory.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/search/src/nsMsgSearchSession.cpp">mailnews/base/search/src/nsMsgSearchSession.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/search/src/nsMsgSearchSession.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/search/src/nsMsgSearchSession.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/search/src/nsMsgSearchSession.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/search/src/nsMsgSearchSession.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/search/src/nsMsgSearchSession.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccount.cpp">mailnews/base/src/nsMsgAccount.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccount.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccount.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccount.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccount.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccount.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccountManager.cpp">mailnews/base/src/nsMsgAccountManager.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccountManager.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccountManager.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccountManager.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccountManager.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgAccountManager.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgFolderCache.cpp">mailnews/base/src/nsMsgFolderCache.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgFolderCache.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgFolderCache.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgFolderCache.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgFolderCache.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsMsgFolderCache.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsSubscribableServer.cpp">mailnews/base/src/nsSubscribableServer.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsSubscribableServer.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsSubscribableServer.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsSubscribableServer.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsSubscribableServer.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/base/src/nsSubscribableServer.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsMsgCompUtils.cpp">mailnews/compose/src/nsMsgCompUtils.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsMsgCompUtils.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsMsgCompUtils.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsMsgCompUtils.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsMsgCompUtils.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsMsgCompUtils.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsSmtpProtocol.cpp">mailnews/compose/src/nsSmtpProtocol.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsSmtpProtocol.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsSmtpProtocol.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsSmtpProtocol.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsSmtpProtocol.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/compose/src/nsSmtpProtocol.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/db/msgdb/src/nsMsgThread.cpp">mailnews/db/msgdb/src/nsMsgThread.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/db/msgdb/src/nsMsgThread.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/db/msgdb/src/nsMsgThread.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/db/msgdb/src/nsMsgThread.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/db/msgdb/src/nsMsgThread.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/db/msgdb/src/nsMsgThread.cpp">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">file</a> |
<a href="/comm-central/annotate/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">annotate</a> |
<a href="/comm-central/diff/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">diff</a> |
<a href="/comm-central/comparison/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">comparison</a> |
<a href="/comm-central/log/4d82d455486356697812d9baa3042ee5ce1bde39/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mailnews/addrbook/src/nsAbMDBDirectory.cpp</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mailnews/addrbook/src/nsAbMDBDirectory.cpp</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -23,16 +23,17 @@</span>
<a href="#l1.4"></a><span id="l1.4"> #include &quot;nsIPrefService.h&quot;</span>
<a href="#l1.5"></a><span id="l1.5"> #include &quot;nsAppDirectoryServiceDefs.h&quot;</span>
<a href="#l1.6"></a><span id="l1.6"> #include &quot;nsDirectoryServiceUtils.h&quot;</span>
<a href="#l1.7"></a><span id="l1.7"> #include &quot;nsIFile.h&quot;</span>
<a href="#l1.8"></a><span id="l1.8"> #include &quot;nsComponentManagerUtils.h&quot;</span>
<a href="#l1.9"></a><span id="l1.9"> #include &quot;nsMemory.h&quot;</span>
<a href="#l1.10"></a><span id="l1.10"> #include &quot;nsArrayUtils.h&quot;</span>
<a href="#l1.11"></a><span id="l1.11"> #include &quot;nsUnicharUtils.h&quot;</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+#include &quot;mozilla/DebugOnly.h&quot;</span>
<a href="#l1.13"></a><span id="l1.13"> </span>
<a href="#l1.14"></a><span id="l1.14"> nsAbMDBDirectory::nsAbMDBDirectory(void):</span>
<a href="#l1.15"></a><span id="l1.15">      nsAbMDBDirProperty(),</span>
<a href="#l1.16"></a><span id="l1.16">      mPerformingQuery(false)</span>
<a href="#l1.17"></a><span id="l1.17"> {</span>
<a href="#l1.18"></a><span id="l1.18"> }</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> nsAbMDBDirectory::~nsAbMDBDirectory(void)</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineat">@@ -266,18 +267,17 @@ NS_IMETHODIMP nsAbMDBDirectory::ClearDat</span>
<a href="#l1.22"></a><span id="l1.22"> NS_IMETHODIMP nsAbMDBDirectory::RemoveElementsFromAddressList()</span>
<a href="#l1.23"></a><span id="l1.23"> {</span>
<a href="#l1.24"></a><span id="l1.24">   if (mIsQueryURI)</span>
<a href="#l1.25"></a><span id="l1.25">     return NS_ERROR_NOT_IMPLEMENTED;</span>
<a href="#l1.26"></a><span id="l1.26"> </span>
<a href="#l1.27"></a><span id="l1.27">   if (m_AddressList)</span>
<a href="#l1.28"></a><span id="l1.28">   {</span>
<a href="#l1.29"></a><span id="l1.29">     uint32_t count;</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-    nsresult rv;</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-    rv = m_AddressList-&gt;GetLength(&amp;count);</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+    mozilla::DebugOnly&lt;nsresult&gt; rv = m_AddressList-&gt;GetLength(&amp;count);</span>
<a href="#l1.33"></a><span id="l1.33">     NS_ASSERTION(NS_SUCCEEDED(rv), &quot;Count failed&quot;);</span>
<a href="#l1.34"></a><span id="l1.34">     int32_t i;</span>
<a href="#l1.35"></a><span id="l1.35">     for (i = count - 1; i &gt;= 0; i--)</span>
<a href="#l1.36"></a><span id="l1.36">       m_AddressList-&gt;RemoveElementAt(i);</span>
<a href="#l1.37"></a><span id="l1.37">   }</span>
<a href="#l1.38"></a><span id="l1.38">   m_AddressList = nullptr;</span>
<a href="#l1.39"></a><span id="l1.39">   return NS_OK;</span>
<a href="#l1.40"></a><span id="l1.40"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mailnews/base/search/src/nsMsgSearchSession.cpp</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mailnews/base/search/src/nsMsgSearchSession.cpp</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -115,17 +115,17 @@ NS_IMETHODIMP nsMsgSearchSession::Unregi</span>
<a href="#l2.4"></a><span id="l2.4">   {</span>
<a href="#l2.5"></a><span id="l2.5">     m_listenerList.RemoveElementAt(listenerIndex);</span>
<a href="#l2.6"></a><span id="l2.6">     m_listenerFlagList.RemoveElementAt(listenerIndex);</span>
<a href="#l2.7"></a><span id="l2.7"> </span>
<a href="#l2.8"></a><span id="l2.8">     // Adjust our iterator if it is active.</span>
<a href="#l2.9"></a><span id="l2.9">     // Removal of something at a higher index than the iterator does not affect</span>
<a href="#l2.10"></a><span id="l2.10">     // it; we only care if the the index we were pointing at gets shifted down,</span>
<a href="#l2.11"></a><span id="l2.11">     // in which case we also want to shift down.</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    if (m_iListener != -1 &amp;&amp; listenerIndex &lt;= m_iListener)</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    if (m_iListener != -1 &amp;&amp; (signed)listenerIndex &lt;= m_iListener)</span>
<a href="#l2.14"></a><span id="l2.14">       m_iListener--;</span>
<a href="#l2.15"></a><span id="l2.15">   }</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">   return NS_OK;</span>
<a href="#l2.18"></a><span id="l2.18"> }</span>
<a href="#l2.19"></a><span id="l2.19"> </span>
<a href="#l2.20"></a><span id="l2.20"> NS_IMETHODIMP nsMsgSearchSession::GetNumSearchTerms(uint32_t *aNumSearchTerms)</span>
<a href="#l2.21"></a><span id="l2.21"> {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccount.cpp</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccount.cpp</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -57,17 +57,17 @@ NS_IMETHODIMP</span>
<a href="#l3.4"></a><span id="l3.4"> nsMsgAccount::GetIncomingServer(nsIMsgIncomingServer **aIncomingServer)</span>
<a href="#l3.5"></a><span id="l3.5"> {</span>
<a href="#l3.6"></a><span id="l3.6">   NS_ENSURE_ARG_POINTER(aIncomingServer);</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8">   // create the incoming server lazily</span>
<a href="#l3.9"></a><span id="l3.9">   if (!mTriedToGetServer &amp;&amp; !m_incomingServer) {</span>
<a href="#l3.10"></a><span id="l3.10">     mTriedToGetServer = true;</span>
<a href="#l3.11"></a><span id="l3.11">     // ignore the error (and return null), but it's still bad so warn</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    nsresult rv = createIncomingServer();</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    mozilla::DebugOnly&lt;nsresult&gt; rv = createIncomingServer();</span>
<a href="#l3.14"></a><span id="l3.14">     NS_WARN_IF_FALSE(NS_SUCCEEDED(rv), &quot;couldn't lazily create the server\n&quot;);</span>
<a href="#l3.15"></a><span id="l3.15">   }</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">   NS_IF_ADDREF(*aIncomingServer = m_incomingServer);</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19">   return NS_OK;</span>
<a href="#l3.20"></a><span id="l3.20"> }</span>
<a href="#l3.21"></a><span id="l3.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mailnews/base/src/nsMsgAccountManager.cpp</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgAccountManager.cpp</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -913,17 +913,17 @@ nsMsgAccountManager::hashUnloadServer(ns</span>
<a href="#l4.4"></a><span id="l4.4"> </span>
<a href="#l4.5"></a><span id="l4.5">   return PL_DHASH_NEXT;</span>
<a href="#l4.6"></a><span id="l4.6"> }</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8"> void nsMsgAccountManager::LogoutOfServer(nsIMsgIncomingServer *aServer)</span>
<a href="#l4.9"></a><span id="l4.9"> {</span>
<a href="#l4.10"></a><span id="l4.10">   if (!aServer)</span>
<a href="#l4.11"></a><span id="l4.11">     return;</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  nsresult rv = aServer-&gt;Shutdown();</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  mozilla::DebugOnly&lt;nsresult&gt; rv = aServer-&gt;Shutdown();</span>
<a href="#l4.14"></a><span id="l4.14">   NS_ASSERTION(NS_SUCCEEDED(rv), &quot;Shutdown of server failed&quot;);</span>
<a href="#l4.15"></a><span id="l4.15">   rv = aServer-&gt;ForgetSessionPassword();</span>
<a href="#l4.16"></a><span id="l4.16">   NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to remove the password associated with server&quot;);</span>
<a href="#l4.17"></a><span id="l4.17"> }</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19"> NS_IMETHODIMP nsMsgAccountManager::GetFolderCache(nsIMsgFolderCache* *aFolderCache)</span>
<a href="#l4.20"></a><span id="l4.20"> {</span>
<a href="#l4.21"></a><span id="l4.21">   NS_ENSURE_ARG_POINTER(aFolderCache);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mailnews/base/src/nsMsgFolderCache.cpp</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mailnews/base/src/nsMsgFolderCache.cpp</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -76,20 +76,19 @@ nsresult nsMsgFolderCache::InitMDBInfo()</span>
<a href="#l5.4"></a><span id="l5.4"> // set up empty tables, dbFolderInfo, etc.</span>
<a href="#l5.5"></a><span id="l5.5"> nsresult nsMsgFolderCache::InitNewDB()</span>
<a href="#l5.6"></a><span id="l5.6"> {</span>
<a href="#l5.7"></a><span id="l5.7">   nsresult err = InitMDBInfo();</span>
<a href="#l5.8"></a><span id="l5.8">   if (NS_SUCCEEDED(err))</span>
<a href="#l5.9"></a><span id="l5.9">   {</span>
<a href="#l5.10"></a><span id="l5.10">     nsIMdbStore *store = GetStore();</span>
<a href="#l5.11"></a><span id="l5.11">     // create the unique table for the dbFolderInfo.</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    nsresult mdberr;</span>
<a href="#l5.13"></a><span id="l5.13">     // TODO: this error assignment is suspicious and never checked.</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-    mdberr = store-&gt;NewTable(GetEnv(), m_folderRowScopeToken,</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-    m_folderTableKindToken, false, nullptr, &amp;m_mdbAllFoldersTable);</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineplus">+    (void) store-&gt;NewTable(GetEnv(), m_folderRowScopeToken, m_folderTableKindToken,</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineplus">+                           false, nullptr, &amp;m_mdbAllFoldersTable);</span>
<a href="#l5.18"></a><span id="l5.18">   }</span>
<a href="#l5.19"></a><span id="l5.19">   return err;</span>
<a href="#l5.20"></a><span id="l5.20"> }</span>
<a href="#l5.21"></a><span id="l5.21"> </span>
<a href="#l5.22"></a><span id="l5.22"> nsresult nsMsgFolderCache::InitExistingDB()</span>
<a href="#l5.23"></a><span id="l5.23"> {</span>
<a href="#l5.24"></a><span id="l5.24">   nsresult err = InitMDBInfo();</span>
<a href="#l5.25"></a><span id="l5.25">   if (NS_FAILED(err))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mailnews/base/src/nsSubscribableServer.cpp</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mailnews/base/src/nsSubscribableServer.cpp</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -45,22 +45,18 @@ nsSubscribableServer::Init()</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">     rv = mRDFService-&gt;GetLiteral(MOZ_UTF16(&quot;false&quot;), getter_AddRefs(kFalseLiteral));</span>
<a href="#l6.6"></a><span id="l6.6">     NS_ENSURE_SUCCESS(rv,rv);</span>
<a href="#l6.7"></a><span id="l6.7">     return NS_OK;</span>
<a href="#l6.8"></a><span id="l6.8"> }</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10"> nsSubscribableServer::~nsSubscribableServer(void)</span>
<a href="#l6.11"></a><span id="l6.11"> {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    nsresult rv = NS_OK;</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-#ifdef DEBUG_seth</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-    printf(&quot;free subscribe tree\n&quot;);</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-#endif</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-    rv = FreeSubtree(mTreeRoot);</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-    NS_ASSERTION(NS_SUCCEEDED(rv),&quot;failed to free tree&quot;);</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineplus">+  mozilla::DebugOnly&lt;nsresult&gt; rv = FreeSubtree(mTreeRoot);</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineplus">+  NS_ASSERTION(NS_SUCCEEDED(rv),&quot;failed to free tree&quot;);</span>
<a href="#l6.20"></a><span id="l6.20"> }</span>
<a href="#l6.21"></a><span id="l6.21"> </span>
<a href="#l6.22"></a><span id="l6.22"> NS_IMPL_ISUPPORTS(nsSubscribableServer, nsISubscribableServer)</span>
<a href="#l6.23"></a><span id="l6.23"> </span>
<a href="#l6.24"></a><span id="l6.24"> NS_IMETHODIMP</span>
<a href="#l6.25"></a><span id="l6.25"> nsSubscribableServer::SetIncomingServer(nsIMsgIncomingServer *aServer)</span>
<a href="#l6.26"></a><span id="l6.26"> {</span>
<a href="#l6.27"></a><span id="l6.27">   mIncomingServer = aServer;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mailnews/compose/src/nsMsgCompUtils.cpp</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -739,18 +739,18 @@ mime_generate_attachment_headers (const </span>
<a href="#l7.4"></a><span id="l7.4">     buf.Append(CRLF);</span>
<a href="#l7.5"></a><span id="l7.5">   }</span>
<a href="#l7.6"></a><span id="l7.6"> </span>
<a href="#l7.7"></a><span id="l7.7">   if (encodedRealName &amp;&amp; *encodedRealName) {</span>
<a href="#l7.8"></a><span id="l7.8">     char *period = PL_strrchr(encodedRealName, '.');</span>
<a href="#l7.9"></a><span id="l7.9">     int32_t pref_content_disposition = 0;</span>
<a href="#l7.10"></a><span id="l7.10"> </span>
<a href="#l7.11"></a><span id="l7.11">     if (prefs) {</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      nsresult rv = prefs-&gt;GetIntPref(&quot;mail.content_disposition_type&quot;,</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-                                      &amp;pref_content_disposition);</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+      mozilla::DebugOnly&lt;nsresult&gt; rv = prefs-&gt;GetIntPref(&quot;mail.content_disposition_type&quot;,</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+                                                          &amp;pref_content_disposition);</span>
<a href="#l7.16"></a><span id="l7.16">       NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to get mail.content_disposition_type&quot;);</span>
<a href="#l7.17"></a><span id="l7.17">     }</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19">     buf.Append(&quot;Content-Disposition: &quot;);</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21">     // If this is an attachment which is part of the message body and therefore has a</span>
<a href="#l7.22"></a><span id="l7.22">     // Content-ID (e.g, image in HTML msg), then Content-Disposition has to be inline</span>
<a href="#l7.23"></a><span id="l7.23">     if (content_id &amp;&amp; *content_id)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mailnews/compose/src/nsSmtpProtocol.cpp</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -1645,17 +1645,18 @@ nsresult nsSmtpProtocol::SendRecipientRe</span>
<a href="#l8.4"></a><span id="l8.4">         m_runningURL, errorcode, NS_ConvertUTF8toUTF16(m_responseText).get(),</span>
<a href="#l8.5"></a><span id="l8.5">         NS_ConvertUTF8toUTF16(m_addresses[m_addressesLeft - 1]).get());</span>
<a href="#l8.6"></a><span id="l8.6">     } else {</span>
<a href="#l8.7"></a><span id="l8.7">       rv = nsExplainErrorDetails(m_runningURL, errorcode,</span>
<a href="#l8.8"></a><span id="l8.8">                                  m_responseText.get(),</span>
<a href="#l8.9"></a><span id="l8.9">                                  m_addresses[m_addressesLeft - 1].get());</span>
<a href="#l8.10"></a><span id="l8.10">     }</span>
<a href="#l8.11"></a><span id="l8.11"> </span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to explain SMTP error&quot;);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+    if (!NS_SUCCEEDED(rv))</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineplus">+      NS_ASSERTION(false, &quot;failed to explain SMTP error&quot;);</span>
<a href="#l8.15"></a><span id="l8.15"> </span>
<a href="#l8.16"></a><span id="l8.16">     m_urlErrorState = NS_ERROR_BUT_DONT_SHOW_ALERT;</span>
<a href="#l8.17"></a><span id="l8.17">     return(NS_ERROR_SENDING_RCPT_COMMAND);</span>
<a href="#l8.18"></a><span id="l8.18">   }</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20">   if (--m_addressesLeft &gt; 0)</span>
<a href="#l8.21"></a><span id="l8.21">   {</span>
<a href="#l8.22"></a><span id="l8.22">     // more senders to RCPT to</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineat">@@ -1694,19 +1695,19 @@ nsresult nsSmtpProtocol::SendData(const </span>
<a href="#l8.24"></a><span id="l8.24"> </span>
<a href="#l8.25"></a><span id="l8.25"> nsresult nsSmtpProtocol::SendDataResponse()</span>
<a href="#l8.26"></a><span id="l8.26"> {</span>
<a href="#l8.27"></a><span id="l8.27">   nsresult status = NS_OK;</span>
<a href="#l8.28"></a><span id="l8.28">   char *command = nullptr;</span>
<a href="#l8.29"></a><span id="l8.29"> </span>
<a href="#l8.30"></a><span id="l8.30">   if (m_responseCode != 354)</span>
<a href="#l8.31"></a><span id="l8.31">   {</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-    nsresult rv = nsExplainErrorDetails(m_runningURL,</span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-                                        NS_ERROR_SENDING_DATA_COMMAND,</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-                                        m_responseText.get());</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineplus">+    mozilla::DebugOnly&lt;nsresult&gt; rv = nsExplainErrorDetails(m_runningURL,</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineplus">+                                                            NS_ERROR_SENDING_DATA_COMMAND,</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineplus">+                                                            m_responseText.get());</span>
<a href="#l8.38"></a><span id="l8.38">     NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to explain SMTP error&quot;);</span>
<a href="#l8.39"></a><span id="l8.39"> </span>
<a href="#l8.40"></a><span id="l8.40">     m_urlErrorState = NS_ERROR_BUT_DONT_SHOW_ALERT;</span>
<a href="#l8.41"></a><span id="l8.41">     return(NS_ERROR_SENDING_DATA_COMMAND);</span>
<a href="#l8.42"></a><span id="l8.42">   }</span>
<a href="#l8.43"></a><span id="l8.43"> </span>
<a href="#l8.44"></a><span id="l8.44">   PR_FREEIF(command);</span>
<a href="#l8.45"></a><span id="l8.45"> </span>
<a href="#l8.46"></a><span id="l8.46" class="difflineat">@@ -1767,19 +1768,19 @@ void nsSmtpProtocol::SendPostData()</span>
<a href="#l8.47"></a><span id="l8.47"> }</span>
<a href="#l8.48"></a><span id="l8.48"> </span>
<a href="#l8.49"></a><span id="l8.49"> </span>
<a href="#l8.50"></a><span id="l8.50"> </span>
<a href="#l8.51"></a><span id="l8.51"> nsresult nsSmtpProtocol::SendMessageResponse()</span>
<a href="#l8.52"></a><span id="l8.52"> {</span>
<a href="#l8.53"></a><span id="l8.53">   if((m_responseCode/10 != 25))</span>
<a href="#l8.54"></a><span id="l8.54">   {</span>
<a href="#l8.55"></a><span id="l8.55" class="difflineminus">-    nsresult rv = nsExplainErrorDetails(m_runningURL,</span>
<a href="#l8.56"></a><span id="l8.56" class="difflineminus">-                                        NS_ERROR_SENDING_MESSAGE,</span>
<a href="#l8.57"></a><span id="l8.57" class="difflineminus">-                                        m_responseText.get());</span>
<a href="#l8.58"></a><span id="l8.58" class="difflineplus">+    mozilla::DebugOnly&lt;nsresult&gt; rv = nsExplainErrorDetails(m_runningURL,</span>
<a href="#l8.59"></a><span id="l8.59" class="difflineplus">+                                                            NS_ERROR_SENDING_MESSAGE,</span>
<a href="#l8.60"></a><span id="l8.60" class="difflineplus">+                                                            m_responseText.get());</span>
<a href="#l8.61"></a><span id="l8.61">     NS_ASSERTION(NS_SUCCEEDED(rv), &quot;failed to explain SMTP error&quot;);</span>
<a href="#l8.62"></a><span id="l8.62"> </span>
<a href="#l8.63"></a><span id="l8.63">     m_urlErrorState = NS_ERROR_BUT_DONT_SHOW_ALERT;</span>
<a href="#l8.64"></a><span id="l8.64">     return(NS_ERROR_SENDING_MESSAGE);</span>
<a href="#l8.65"></a><span id="l8.65">   }</span>
<a href="#l8.66"></a><span id="l8.66"> </span>
<a href="#l8.67"></a><span id="l8.67">   UpdateStatus(MOZ_UTF16(&quot;smtpMailSent&quot;));</span>
<a href="#l8.68"></a><span id="l8.68"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mailnews/db/msgdb/src/nsMsgThread.cpp</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mailnews/db/msgdb/src/nsMsgThread.cpp</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -3,16 +3,17 @@</span>
<a href="#l9.4"></a><span id="l9.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.5"></a><span id="l9.5">  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.6"></a><span id="l9.6"> </span>
<a href="#l9.7"></a><span id="l9.7"> #include &quot;msgCore.h&quot;</span>
<a href="#l9.8"></a><span id="l9.8"> #include &quot;nsMsgDatabase.h&quot;</span>
<a href="#l9.9"></a><span id="l9.9"> #include &quot;nsCOMPtr.h&quot;</span>
<a href="#l9.10"></a><span id="l9.10"> #include &quot;nsMsgThread.h&quot;</span>
<a href="#l9.11"></a><span id="l9.11"> #include &quot;MailNewsTypes2.h&quot;</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+#include &quot;mozilla/DebugOnly.h&quot;</span>
<a href="#l9.13"></a><span id="l9.13"> </span>
<a href="#l9.14"></a><span id="l9.14"> NS_IMPL_ISUPPORTS(nsMsgThread, nsIMsgThread)</span>
<a href="#l9.15"></a><span id="l9.15"> </span>
<a href="#l9.16"></a><span id="l9.16"> nsMsgThread::nsMsgThread()</span>
<a href="#l9.17"></a><span id="l9.17"> {</span>
<a href="#l9.18"></a><span id="l9.18">   MOZ_COUNT_CTOR(nsMsgThread);</span>
<a href="#l9.19"></a><span id="l9.19">   Init();</span>
<a href="#l9.20"></a><span id="l9.20"> }</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineat">@@ -48,17 +49,17 @@ void nsMsgThread::Init()</span>
<a href="#l9.22"></a><span id="l9.22">   m_cachedValuesInitialized = false;</span>
<a href="#l9.23"></a><span id="l9.23"> }</span>
<a href="#l9.24"></a><span id="l9.24"> </span>
<a href="#l9.25"></a><span id="l9.25"> nsMsgThread::~nsMsgThread()</span>
<a href="#l9.26"></a><span id="l9.26"> {</span>
<a href="#l9.27"></a><span id="l9.27">   MOZ_COUNT_DTOR(nsMsgThread);</span>
<a href="#l9.28"></a><span id="l9.28">   if (m_mdbDB)</span>
<a href="#l9.29"></a><span id="l9.29">   {</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-    bool found = m_mdbDB-&gt;m_threads.RemoveElement(this);</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineplus">+    mozilla::DebugOnly&lt;bool&gt; found = m_mdbDB-&gt;m_threads.RemoveElement(this);</span>
<a href="#l9.32"></a><span id="l9.32">     NS_ASSERTION(found, &quot;removing thread not in threads array&quot;);</span>
<a href="#l9.33"></a><span id="l9.33">   }</span>
<a href="#l9.34"></a><span id="l9.34">   else // This can happen if db is forced closed</span>
<a href="#l9.35"></a><span id="l9.35">     NS_WARNING(&quot;null db in thread&quot;);</span>
<a href="#l9.36"></a><span id="l9.36">   Clear();</span>
<a href="#l9.37"></a><span id="l9.37"> }</span>
<a href="#l9.38"></a><span id="l9.38"> </span>
<a href="#l9.39"></a><span id="l9.39"> void nsMsgThread::Clear()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mailnews/extensions/bayesian-spam-filter/src/nsBayesianFilter.cpp</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -1521,17 +1521,17 @@ void nsBayesianFilter::classifyMessage(</span>
<a href="#l10.4"></a><span id="l10.4">         else</span>
<a href="#l10.5"></a><span id="l10.5">           prob = (proCount * numAntiMessages[traitIndex]) / denom;</span>
<a href="#l10.6"></a><span id="l10.6"> </span>
<a href="#l10.7"></a><span id="l10.7">         double n = proCount + antiCount;</span>
<a href="#l10.8"></a><span id="l10.8">         prob =  (0.225 + n * prob) / (.45 + n);</span>
<a href="#l10.9"></a><span id="l10.9">         double distance = std::abs(prob - 0.5);</span>
<a href="#l10.10"></a><span id="l10.10">         if (distance &gt;= .1)</span>
<a href="#l10.11"></a><span id="l10.11">         {</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-          nsresult rv = setAnalysis(token, traitIndex, distance, prob);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+          mozilla::DebugOnly&lt;nsresult&gt; rv = setAnalysis(token, traitIndex, distance, prob);</span>
<a href="#l10.14"></a><span id="l10.14">           NS_ASSERTION(NS_SUCCEEDED(rv), &quot;Problem in setAnalysis&quot;);</span>
<a href="#l10.15"></a><span id="l10.15">         }</span>
<a href="#l10.16"></a><span id="l10.16">       }</span>
<a href="#l10.17"></a><span id="l10.17">     }</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">     for (uint32_t traitIndex = 0; traitIndex &lt; traitCount; traitIndex++)</span>
<a href="#l10.20"></a><span id="l10.20">     {</span>
<a href="#l10.21"></a><span id="l10.21">       nsAutoTArray&lt;TraitAnalysis, 1024&gt; traitAnalyses;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mailnews/extensions/mdn/src/nsMsgMdnGenerator.cpp</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -1022,17 +1022,17 @@ NS_IMETHODIMP nsMsgMdnGenerator::Process</span>
<a href="#l11.4"></a><span id="l11.4">     NS_ENSURE_TRUE(key != nsMsgKey_None, NS_ERROR_INVALID_ARG);</span>
<a href="#l11.5"></a><span id="l11.5">     m_disposeType = type;</span>
<a href="#l11.6"></a><span id="l11.6">     m_autoAction = autoAction;</span>
<a href="#l11.7"></a><span id="l11.7">     m_window = aWindow;</span>
<a href="#l11.8"></a><span id="l11.8">     m_folder = folder;</span>
<a href="#l11.9"></a><span id="l11.9">     m_headers = headers;</span>
<a href="#l11.10"></a><span id="l11.10">     m_key = key;</span>
<a href="#l11.11"></a><span id="l11.11"> </span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    nsresult rv = InitAndProcess(_retval);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+    mozilla::DebugOnly&lt;nsresult&gt; rv = InitAndProcess(_retval);</span>
<a href="#l11.14"></a><span id="l11.14">     NS_ASSERTION(NS_SUCCEEDED(rv), &quot;InitAndProcess failed&quot;);</span>
<a href="#l11.15"></a><span id="l11.15">     return NS_OK;</span>
<a href="#l11.16"></a><span id="l11.16"> }</span>
<a href="#l11.17"></a><span id="l11.17"> </span>
<a href="#l11.18"></a><span id="l11.18"> NS_IMETHODIMP nsMsgMdnGenerator::UserAgreed()</span>
<a href="#l11.19"></a><span id="l11.19"> {</span>
<a href="#l11.20"></a><span id="l11.20">   DEBUG_MDN(&quot;nsMsgMdnGenerator::UserAgreed&quot;);</span>
<a href="#l11.21"></a><span id="l11.21">   (void) NoteMDNRequestHandled();</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

