<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 20034:aa60248fbd5094b03a082eca1685cf1062cbbf28</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ aa60248fbd5094b03a082eca1685cf1062cbbf28" />
<meta property="og:url" content="/comm-central/rev/aa60248fbd5094b03a082eca1685cf1062cbbf28" />
<meta property="og:description" content="Bug 1280898 - Set up eslint for calendar files - (almost) enable space-infix-ops rule. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / aa60248fbd5094b03a082eca1685cf1062cbbf28 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/aa60248fbd5094b03a082eca1685cf1062cbbf28">shortlog</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/aa60248fbd5094b03a082eca1685cf1062cbbf28">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28">files</a> |
changeset |
<a href="/comm-central/raw-rev/aa60248fbd5094b03a082eca1685cf1062cbbf28">raw</a>  | <a href="/comm-central/archive/aa60248fbd5094b03a082eca1685cf1062cbbf28.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - (almost) enable space-infix-ops rule. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 08 Jul 2016 11:19:06 +0200</td></tr>

<tr>
 <td>changeset 20034</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/aa60248fbd5094b03a082eca1685cf1062cbbf28">aa60248fbd5094b03a082eca1685cf1062cbbf28</a></td>
</tr>



<tr>
<td>parent 20033</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/bd2023dedb868294992a355e3302f08d5e65ce01">bd2023dedb868294992a355e3302f08d5e65ce01</a>
</td>
</tr>

<tr>
<td>child 20035</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/eb767f75b68dc2b4b605dd456852dacf19ede617">eb767f75b68dc2b4b605dd456852dacf19ede617</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=aa60248fbd5094b03a082eca1685cf1062cbbf28">12292</a></td></tr>
<tr><td>push user</td><td>mozilla@kewis.ch</td></tr>
<tr><td>push date</td><td class="date age">Thu, 15 Sep 2016 23:26:04 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@aa60248fbd50 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=aa60248fbd5094b03a082eca1685cf1062cbbf28">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=aa60248fbd5094b03a082eca1685cf1062cbbf28&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=aa60248fbd5094b03a082eca1685cf1062cbbf28&newProject=comm-central&newRevision=aa60248fbd5094b03a082eca1685cf1062cbbf28&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=aa60248fbd5094b03a082eca1685cf1062cbbf28&newProject=comm-central&newRevision=aa60248fbd5094b03a082eca1685cf1062cbbf28&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=aa60248fbd5094b03a082eca1685cf1062cbbf28&newProject=comm-central&newRevision=aa60248fbd5094b03a082eca1685cf1062cbbf28&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">1280898</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1280898">Bug 1280898</a> - Set up eslint for calendar files - (almost) enable space-infix-ops rule. r=MakeMyDay

MozReview-Commit-ID: AFQU6cqr9BX</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/.eslintrc">calendar/.eslintrc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/.eslintrc">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/.eslintrc">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/.eslintrc">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/.eslintrc">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/.eslintrc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/agenda-listbox.js">calendar/base/content/agenda-listbox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/agenda-listbox.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/agenda-listbox.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/agenda-listbox.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/agenda-listbox.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/agenda-listbox.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-daypicker.xml">calendar/base/content/calendar-daypicker.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-daypicker.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-daypicker.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-daypicker.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-daypicker.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-daypicker.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-extract.js">calendar/base/content/calendar-extract.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-extract.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-extract.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-extract.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-extract.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-extract.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-month-view.xml">calendar/base/content/calendar-month-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-month-view.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-month-view.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-month-view.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-month-view.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-month-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-multiday-view.xml">calendar/base/content/calendar-multiday-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-multiday-view.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-multiday-view.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-multiday-view.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-multiday-view.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-multiday-view.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-ui-utils.js">calendar/base/content/calendar-ui-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-ui-utils.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-ui-utils.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-ui-utils.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-ui-utils.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/calendar-ui-utils.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-dialog-utils.js">calendar/base/content/dialogs/calendar-dialog-utils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-dialog-utils.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-dialog-utils.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-dialog-utils.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-dialog-utils.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-dialog-utils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">calendar/base/content/dialogs/calendar-event-dialog-attendees.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-timezone.js">calendar/base/content/dialogs/calendar-event-dialog-timezone.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-timezone.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-timezone.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-timezone.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-timezone.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/dialogs/calendar-event-dialog-timezone.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/import-export.js">calendar/base/content/import-export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/import-export.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/import-export.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/import-export.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/import-export.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/import-export.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/alarms.js">calendar/base/content/preferences/alarms.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/alarms.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/alarms.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/alarms.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/alarms.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/alarms.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/categories.js">calendar/base/content/preferences/categories.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/categories.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/categories.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/categories.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/categories.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/preferences/categories.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/today-pane.js">calendar/base/content/today-pane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/today-pane.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/today-pane.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/today-pane.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/today-pane.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/today-pane.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-list-tree.xml">calendar/base/content/widgets/calendar-list-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-list-tree.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-list-tree.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-list-tree.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-list-tree.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-list-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-widgets.xml">calendar/base/content/widgets/calendar-widgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-widgets.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-widgets.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-widgets.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-widgets.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/calendar-widgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/minimonth.xml">calendar/base/content/widgets/minimonth.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/minimonth.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/minimonth.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/minimonth.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/minimonth.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/content/widgets/minimonth.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calAuthUtils.jsm">calendar/base/modules/calAuthUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calAuthUtils.jsm">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calAuthUtils.jsm">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calAuthUtils.jsm">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calAuthUtils.jsm">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calAuthUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calExtract.jsm">calendar/base/modules/calExtract.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calExtract.jsm">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calExtract.jsm">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calExtract.jsm">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calExtract.jsm">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calExtract.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calProviderUtils.jsm">calendar/base/modules/calProviderUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calProviderUtils.jsm">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calProviderUtils.jsm">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calProviderUtils.jsm">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calProviderUtils.jsm">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calProviderUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calRecurrenceUtils.jsm">calendar/base/modules/calRecurrenceUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calRecurrenceUtils.jsm">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calRecurrenceUtils.jsm">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calRecurrenceUtils.jsm">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calRecurrenceUtils.jsm">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/modules/calRecurrenceUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCachedCalendar.js">calendar/base/src/calCachedCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCachedCalendar.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCachedCalendar.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCachedCalendar.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCachedCalendar.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCachedCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calIcsParser.js">calendar/base/src/calIcsParser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calIcsParser.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calIcsParser.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calIcsParser.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calIcsParser.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calIcsParser.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calRecurrenceInfo.js">calendar/base/src/calRecurrenceInfo.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calRecurrenceInfo.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calRecurrenceInfo.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calRecurrenceInfo.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calRecurrenceInfo.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calRecurrenceInfo.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calWeekInfoService.js">calendar/base/src/calWeekInfoService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calWeekInfoService.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calWeekInfoService.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calWeekInfoService.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calWeekInfoService.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/base/src/calWeekInfoService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/import-export/calOutlookCSVImportExport.js">calendar/import-export/calOutlookCSVImportExport.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/import-export/calOutlookCSVImportExport.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/import-export/calOutlookCSVImportExport.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/import-export/calOutlookCSVImportExport.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/import-export/calOutlookCSVImportExport.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/import-export/calOutlookCSVImportExport.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavCalendar.js">calendar/providers/caldav/calDavCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavCalendar.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavCalendar.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavCalendar.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavCalendar.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavRequestHandlers.js">calendar/providers/caldav/calDavRequestHandlers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavRequestHandlers.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavRequestHandlers.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavRequestHandlers.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavRequestHandlers.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/caldav/calDavRequestHandlers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/ics/calICSCalendar.js">calendar/providers/ics/calICSCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/ics/calICSCalendar.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/ics/calICSCalendar.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/ics/calICSCalendar.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/ics/calICSCalendar.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/ics/calICSCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageUpgrade.jsm">calendar/providers/storage/calStorageUpgrade.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageUpgrade.jsm">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageUpgrade.jsm">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageUpgrade.jsm">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageUpgrade.jsm">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/storage/calStorageUpgrade.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/wcap/calWcapCalendarItems.js">calendar/providers/wcap/calWcapCalendarItems.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/wcap/calWcapCalendarItems.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/wcap/calWcapCalendarItems.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/wcap/calWcapCalendarItems.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/wcap/calWcapCalendarItems.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/providers/wcap/calWcapCalendarItems.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/datetimepickers/datetimepickers.xml">calendar/resources/content/datetimepickers/datetimepickers.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/datetimepickers/datetimepickers.xml">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/datetimepickers/datetimepickers.xml">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/datetimepickers/datetimepickers.xml">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/datetimepickers/datetimepickers.xml">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/datetimepickers/datetimepickers.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/mouseoverPreviews.js">calendar/resources/content/mouseoverPreviews.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/mouseoverPreviews.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/mouseoverPreviews.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/mouseoverPreviews.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/mouseoverPreviews.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/mouseoverPreviews.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/publish.js">calendar/resources/content/publish.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/publish.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/publish.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/publish.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/publish.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/resources/content/publish.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/eventDialog/testEventDialog.js">calendar/test/mozmill/eventDialog/testEventDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/eventDialog/testEventDialog.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/eventDialog/testEventDialog.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/eventDialog/testEventDialog.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/eventDialog/testEventDialog.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/eventDialog/testEventDialog.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/testTodayPane.js">calendar/test/mozmill/testTodayPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/testTodayPane.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/testTodayPane.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/testTodayPane.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/testTodayPane.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/testTodayPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMonthView.js">calendar/test/mozmill/views/testMonthView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMonthView.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMonthView.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMonthView.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMonthView.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMonthView.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMultiweekView.js">calendar/test/mozmill/views/testMultiweekView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMultiweekView.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMultiweekView.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMultiweekView.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMultiweekView.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/mozmill/views/testMultiweekView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_attendee.js">calendar/test/unit/test_attendee.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_attendee.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_attendee.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_attendee.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_attendee.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_attendee.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_bug1199942.js">calendar/test/unit/test_bug1199942.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_bug1199942.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_bug1199942.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_bug1199942.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_bug1199942.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_bug1199942.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_datetime.js">calendar/test/unit/test_datetime.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_datetime.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_datetime.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_datetime.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_datetime.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_datetime.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_gdata_provider.js">calendar/test/unit/test_gdata_provider.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_gdata_provider.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_gdata_provider.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_gdata_provider.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_gdata_provider.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_gdata_provider.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_ics_service.js">calendar/test/unit/test_ics_service.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_ics_service.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_ics_service.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_ics_service.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_ics_service.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_ics_service.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_recur.js">calendar/test/unit/test_recur.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_recur.js">file</a> |
<a href="/comm-central/annotate/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_recur.js">annotate</a> |
<a href="/comm-central/diff/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_recur.js">diff</a> |
<a href="/comm-central/comparison/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_recur.js">comparison</a> |
<a href="/comm-central/log/aa60248fbd5094b03a082eca1685cf1062cbbf28/calendar/test/unit/test_recur.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/.eslintrc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/.eslintrc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -137,16 +137,20 @@</span>
<a href="#l1.4"></a><span id="l1.4">     // Disallow the use of Boolean literals in conditional expressions.</span>
<a href="#l1.5"></a><span id="l1.5">     &quot;no-unneeded-ternary&quot;: 2,</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7">     // Disallow use of multiple spaces (sometimes used to align const values,</span>
<a href="#l1.8"></a><span id="l1.8">     // array or object items, etc.). It's hard to maintain and doesn't add that</span>
<a href="#l1.9"></a><span id="l1.9">     // much benefit.</span>
<a href="#l1.10"></a><span id="l1.10">     &quot;no-multi-spaces&quot;: 2,</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+    // Require spaces around operators, except for a|0.</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    // Disabled for now given eslint doesn't support default args yet</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    // &quot;space-infix-ops&quot;: [2, {&quot;int32Hint&quot;: true}],</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+</span>
<a href="#l1.16"></a><span id="l1.16">     // Will enable these rules later</span>
<a href="#l1.17"></a><span id="l1.17">     &quot;keyword-spacing&quot;: 0,</span>
<a href="#l1.18"></a><span id="l1.18">     &quot;block-spacing&quot;: 0,</span>
<a href="#l1.19"></a><span id="l1.19">     &quot;no-lonely-if&quot;: 0,</span>
<a href="#l1.20"></a><span id="l1.20">     &quot;space-before-blocks&quot;: 0,</span>
<a href="#l1.21"></a><span id="l1.21">     &quot;computed-property-spacing&quot;: 0,</span>
<a href="#l1.22"></a><span id="l1.22">     &quot;consistent-return&quot;: 0,</span>
<a href="#l1.23"></a><span id="l1.23">     &quot;no-redeclare&quot;: 0,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/agenda-listbox.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/agenda-listbox.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -118,17 +118,17 @@ function removePeriodListItem(aPeriod) {</span>
<a href="#l2.4"></a><span id="l2.4">  * @param event     The DOM event that triggered the checkbox state change.</span>
<a href="#l2.5"></a><span id="l2.5">  */</span>
<a href="#l2.6"></a><span id="l2.6"> agendaListbox.onCheckboxChange =</span>
<a href="#l2.7"></a><span id="l2.7"> function onCheckboxChange(event) {</span>
<a href="#l2.8"></a><span id="l2.8">     var periodCheckbox = event.target;</span>
<a href="#l2.9"></a><span id="l2.9">     var lopen = (periodCheckbox.getAttribute(&quot;checked&quot;) == &quot;true&quot;);</span>
<a href="#l2.10"></a><span id="l2.10">     var listItem = getParentNodeOrThis(periodCheckbox, &quot;agenda-checkbox-richlist-item&quot;);</span>
<a href="#l2.11"></a><span id="l2.11">     var period = listItem.getItem();</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    period.open= lopen;</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    period.open = lopen;</span>
<a href="#l2.14"></a><span id="l2.14">     // as the agenda-checkboxes are only transient we have to set the &quot;checked&quot;</span>
<a href="#l2.15"></a><span id="l2.15">     // attribute at their hidden origins to make that attribute persistent.</span>
<a href="#l2.16"></a><span id="l2.16">     document.getElementById(listItem.id + &quot;-hidden&quot;).setAttribute(&quot;checked&quot;,</span>
<a href="#l2.17"></a><span id="l2.17">                             periodCheckbox.getAttribute(&quot;checked&quot;));</span>
<a href="#l2.18"></a><span id="l2.18">     if (lopen) {</span>
<a href="#l2.19"></a><span id="l2.19">         agendaListbox.refreshCalendarQuery(period.start, period.end);</span>
<a href="#l2.20"></a><span id="l2.20">     } else {</span>
<a href="#l2.21"></a><span id="l2.21">         listItem = listItem.nextSibling;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -662,17 +662,17 @@</span>
<a href="#l3.4"></a><span id="l3.4">             const weekPrefix = &quot;calendar.week.&quot;;</span>
<a href="#l3.5"></a><span id="l3.5">             const prefNames = [&quot;d0sundaysoff&quot;, &quot;d1mondaysoff&quot;, &quot;d2tuesdaysoff&quot;,</span>
<a href="#l3.6"></a><span id="l3.6">                                &quot;d3wednesdaysoff&quot;, &quot;d4thursdaysoff&quot;,</span>
<a href="#l3.7"></a><span id="l3.7">                                &quot;d5fridaysoff&quot;, &quot;d6saturdaysoff&quot;];</span>
<a href="#l3.8"></a><span id="l3.8">             const defaults = [&quot;true&quot;, &quot;false&quot;, &quot;false&quot;, &quot;false&quot;,</span>
<a href="#l3.9"></a><span id="l3.9">                               &quot;false&quot;, &quot;false&quot;, &quot;true&quot;];</span>
<a href="#l3.10"></a><span id="l3.10">             let daysOff = [];</span>
<a href="#l3.11"></a><span id="l3.11">             for (let i in prefNames) {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-                if (Preferences.get(weekPrefix+prefNames[i])) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+                if (Preferences.get(weekPrefix + prefNames[i])) {</span>
<a href="#l3.14"></a><span id="l3.14">                     daysOff.push(Number(i));</span>
<a href="#l3.15"></a><span id="l3.15">                 }</span>
<a href="#l3.16"></a><span id="l3.16">             }</span>
<a href="#l3.17"></a><span id="l3.17">             this.daysOffArray = daysOff;</span>
<a href="#l3.18"></a><span id="l3.18">         ]]&gt;&lt;/body&gt;</span>
<a href="#l3.19"></a><span id="l3.19">       &lt;/method&gt;</span>
<a href="#l3.20"></a><span id="l3.20"> </span>
<a href="#l3.21"></a><span id="l3.21">       &lt;method name=&quot;refreshView&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-daypicker.xml</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-daypicker.xml</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -26,17 +26,17 @@</span>
<a href="#l4.4"></a><span id="l4.4">                    xbl:inherits=&quot;value=label&quot;/&gt;</span>
<a href="#l4.5"></a><span id="l4.5">       &lt;/xul:hbox&gt;</span>
<a href="#l4.6"></a><span id="l4.6">     &lt;/content&gt;</span>
<a href="#l4.7"></a><span id="l4.7">     &lt;implementation&gt;</span>
<a href="#l4.8"></a><span id="l4.8">       &lt;method name=&quot;onmodified&quot;&gt;</span>
<a href="#l4.9"></a><span id="l4.9">         &lt;parameter name=&quot;aEvent&quot;/&gt;</span>
<a href="#l4.10"></a><span id="l4.10">         &lt;body&gt;</span>
<a href="#l4.11"></a><span id="l4.11">           &lt;![CDATA[</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-            if (aEvent.attrName ==&quot;checked&quot;) {</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+            if (aEvent.attrName == &quot;checked&quot;) {</span>
<a href="#l4.14"></a><span id="l4.14">                 var event = document.createEvent('Events');</span>
<a href="#l4.15"></a><span id="l4.15">                 event.initEvent('select', true, true);</span>
<a href="#l4.16"></a><span id="l4.16">                 this.calendar.dispatchEvent(event);</span>
<a href="#l4.17"></a><span id="l4.17">             }</span>
<a href="#l4.18"></a><span id="l4.18">           ]]&gt;</span>
<a href="#l4.19"></a><span id="l4.19">         &lt;/body&gt;</span>
<a href="#l4.20"></a><span id="l4.20">       &lt;/method&gt;</span>
<a href="#l4.21"></a><span id="l4.21">       &lt;constructor&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-extract.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-extract.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -83,17 +83,17 @@ var calendarExtract = {</span>
<a href="#l5.4"></a><span id="l5.4">         let content = folder.getMsgTextFromStream(listener.inputStream,</span>
<a href="#l5.5"></a><span id="l5.5">                                                   message.Charset,</span>
<a href="#l5.6"></a><span id="l5.6">                                                   65536,</span>
<a href="#l5.7"></a><span id="l5.7">                                                   32768,</span>
<a href="#l5.8"></a><span id="l5.8">                                                   false,</span>
<a href="#l5.9"></a><span id="l5.9">                                                   true,</span>
<a href="#l5.10"></a><span id="l5.10">                                                   { });</span>
<a href="#l5.11"></a><span id="l5.11">         cal.LOG(&quot;[calExtract] Original email content: \n&quot; + title + &quot;\r\n&quot; + content);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        let date = new Date(message.date/1000);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        let date = new Date(message.date / 1000);</span>
<a href="#l5.14"></a><span id="l5.14">         let time = (new Date()).getTime();</span>
<a href="#l5.15"></a><span id="l5.15"> </span>
<a href="#l5.16"></a><span id="l5.16">         let locale = Preferences.get(&quot;general.useragent.locale&quot;, &quot;en-US&quot;);</span>
<a href="#l5.17"></a><span id="l5.17">         let dayStart = Preferences.get(&quot;calendar.view.daystarthour&quot;, 6);</span>
<a href="#l5.18"></a><span id="l5.18">         let extractor;</span>
<a href="#l5.19"></a><span id="l5.19"> </span>
<a href="#l5.20"></a><span id="l5.20">         if (fixedLang) {</span>
<a href="#l5.21"></a><span id="l5.21">             extractor = new Extractor(fixedLocale, dayStart);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-month-view.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-month-view.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -214,17 +214,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">           // Set up DOM attributes for custom CSS coloring.</span>
<a href="#l6.5"></a><span id="l6.5">           let weekTitle = cal.getWeekInfoService().getWeekTitle(aDate);</span>
<a href="#l6.6"></a><span id="l6.6">           this.setAttribute(&quot;year&quot;, aDate.year);</span>
<a href="#l6.7"></a><span id="l6.7">           this.setAttribute(&quot;month&quot;, aDate.month + 1);</span>
<a href="#l6.8"></a><span id="l6.8">           this.setAttribute(&quot;week&quot;, weekTitle);</span>
<a href="#l6.9"></a><span id="l6.9">           this.setAttribute(&quot;day&quot;, aDate.day);</span>
<a href="#l6.10"></a><span id="l6.10"> </span>
<a href="#l6.11"></a><span id="l6.11">           if (this.mShowMonthLabel) {</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-             let monthName = calGetString(&quot;dateFormat&quot;, &quot;month.&quot; + (aDate.month+1) + &quot;.Mmm&quot;);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+             let monthName = calGetString(&quot;dateFormat&quot;, &quot;month.&quot; + (aDate.month + 1) + &quot;.Mmm&quot;);</span>
<a href="#l6.14"></a><span id="l6.14">              this.setAttribute(&quot;value&quot;, aDate.day + &quot; &quot; + monthName);</span>
<a href="#l6.15"></a><span id="l6.15">           } else {</span>
<a href="#l6.16"></a><span id="l6.16">              this.setAttribute(&quot;value&quot;, aDate.day);</span>
<a href="#l6.17"></a><span id="l6.17">           }</span>
<a href="#l6.18"></a><span id="l6.18">         ]]&gt;&lt;/body&gt;</span>
<a href="#l6.19"></a><span id="l6.19">       &lt;/method&gt;</span>
<a href="#l6.20"></a><span id="l6.20"> </span>
<a href="#l6.21"></a><span id="l6.21">       &lt;method name=&quot;addItem&quot;&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-multiday-view.xml</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -23,18 +23,18 @@</span>
<a href="#l7.4"></a><span id="l7.4">       &lt;xul:stack anonid=&quot;timebarboxstack&quot; style=&quot;display: block; position: relative&quot; xbl:inherits=&quot;orient,width,height&quot; flex=&quot;1&quot;&gt;</span>
<a href="#l7.5"></a><span id="l7.5">         &lt;xul:box anonid=&quot;topbox&quot; xbl:inherits=&quot;orient,width,height&quot; flex=&quot;1&quot;/&gt;</span>
<a href="#l7.6"></a><span id="l7.6">         &lt;xul:box anonid=&quot;timeIndicatorBoxTimeBar&quot; class=&quot;timeIndicator-timeBar&quot; xbl:inherits=&quot;orient&quot; hidden=&quot;true&quot;/&gt;</span>
<a href="#l7.7"></a><span id="l7.7">       &lt;/xul:stack&gt;</span>
<a href="#l7.8"></a><span id="l7.8">     &lt;/content&gt;</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">     &lt;implementation&gt;</span>
<a href="#l7.11"></a><span id="l7.11">       &lt;field name=&quot;mPixPerMin&quot;&gt;0.6&lt;/field&gt;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-      &lt;field name=&quot;mStartMin&quot;&gt;0*60&lt;/field&gt;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-      &lt;field name=&quot;mEndMin&quot;&gt;24*60&lt;/field&gt;</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineplus">+      &lt;field name=&quot;mStartMin&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineplus">+      &lt;field name=&quot;mEndMin&quot;&gt;24 * 60&lt;/field&gt;</span>
<a href="#l7.16"></a><span id="l7.16">       &lt;field name=&quot;mDayStartHour&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.17"></a><span id="l7.17">       &lt;field name=&quot;mDayEndHour&quot;&gt;24&lt;/field&gt;</span>
<a href="#l7.18"></a><span id="l7.18"> </span>
<a href="#l7.19"></a><span id="l7.19">       &lt;constructor&gt;</span>
<a href="#l7.20"></a><span id="l7.20">         this.relayout();</span>
<a href="#l7.21"></a><span id="l7.21">       &lt;/constructor&gt;</span>
<a href="#l7.22"></a><span id="l7.22"> </span>
<a href="#l7.23"></a><span id="l7.23">       &lt;method name=&quot;setDayStartEndHours&quot;&gt;</span>
<a href="#l7.24"></a><span id="l7.24" class="difflineat">@@ -251,20 +251,20 @@</span>
<a href="#l7.25"></a><span id="l7.25">       &lt;constructor&gt;&lt;![CDATA[</span>
<a href="#l7.26"></a><span id="l7.26">         this.mEventInfos = [];</span>
<a href="#l7.27"></a><span id="l7.27">         this.mTimezone = UTC();</span>
<a href="#l7.28"></a><span id="l7.28">         this.mSelectedItemIds = {};</span>
<a href="#l7.29"></a><span id="l7.29">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l7.30"></a><span id="l7.30"> </span>
<a href="#l7.31"></a><span id="l7.31">       &lt;!-- fields --&gt;</span>
<a href="#l7.32"></a><span id="l7.32">       &lt;field name=&quot;mPixPerMin&quot;&gt;0.6&lt;/field&gt;</span>
<a href="#l7.33"></a><span id="l7.33" class="difflineminus">-      &lt;field name=&quot;mStartMin&quot;&gt;0*60&lt;/field&gt;</span>
<a href="#l7.34"></a><span id="l7.34" class="difflineminus">-      &lt;field name=&quot;mEndMin&quot;&gt;24*60&lt;/field&gt;</span>
<a href="#l7.35"></a><span id="l7.35" class="difflineminus">-      &lt;field name=&quot;mDayStartMin&quot;&gt;8*60&lt;/field&gt;</span>
<a href="#l7.36"></a><span id="l7.36" class="difflineminus">-      &lt;field name=&quot;mDayEndMin&quot;&gt;17*60&lt;/field&gt;</span>
<a href="#l7.37"></a><span id="l7.37" class="difflineplus">+      &lt;field name=&quot;mStartMin&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.38"></a><span id="l7.38" class="difflineplus">+      &lt;field name=&quot;mEndMin&quot;&gt;24 * 60&lt;/field&gt;</span>
<a href="#l7.39"></a><span id="l7.39" class="difflineplus">+      &lt;field name=&quot;mDayStartMin&quot;&gt;8 * 60&lt;/field&gt;</span>
<a href="#l7.40"></a><span id="l7.40" class="difflineplus">+      &lt;field name=&quot;mDayEndMin&quot;&gt;17 * 60&lt;/field&gt;</span>
<a href="#l7.41"></a><span id="l7.41">       &lt;!--an array of objects that contain information about the events that are to be</span>
<a href="#l7.42"></a><span id="l7.42">       displayed. The contained fields are:</span>
<a href="#l7.43"></a><span id="l7.43">       event:        The event that is to be displayed in a 'calendar-event-box'</span>
<a href="#l7.44"></a><span id="l7.44">       layoutStart:  The 'start'-datetime object of the event in the timezone of the view</span>
<a href="#l7.45"></a><span id="l7.45">       layoutEnd:    The 'end'-datetime object of the event in the timezone of the view.</span>
<a href="#l7.46"></a><span id="l7.46">                     The 'layoutEnd' may be different from the real 'end' time of the</span>
<a href="#l7.47"></a><span id="l7.47">                     event because it considers a certain minimum duration of the event</span>
<a href="#l7.48"></a><span id="l7.48">                     that is basically dependent of the font-size of the event-box label --&gt;</span>
<a href="#l7.49"></a><span id="l7.49" class="difflineat">@@ -1017,18 +1017,18 @@</span>
<a href="#l7.50"></a><span id="l7.50">               //       |      |______|      |</span>
<a href="#l7.51"></a><span id="l7.51">               //       |      |      |______|</span>
<a href="#l7.52"></a><span id="l7.52">               //       |      |_____________|</span>
<a href="#l7.53"></a><span id="l7.53">               //       |      |ev2          |</span>
<a href="#l7.54"></a><span id="l7.54">               //       |______|             |&lt;--If our item's start time is</span>
<a href="#l7.55"></a><span id="l7.55">               //       |      |_____________|   here, we can shrink ev2 and jump</span>
<a href="#l7.56"></a><span id="l7.56">               //       |      |      |      |   in column #3</span>
<a href="#l7.57"></a><span id="l7.57">               //</span>
<a href="#l7.58"></a><span id="l7.58" class="difflineminus">-              for (var jj=1; jj&lt;colEndArray.length; ++jj) {</span>
<a href="#l7.59"></a><span id="l7.59" class="difflineminus">-                  if (colEndArray[jj].event.hashId == colEndArray[jj-1].event.hashId) {</span>
<a href="#l7.60"></a><span id="l7.60" class="difflineplus">+              for (var jj = 1; jj &lt; colEndArray.length; ++jj) {</span>
<a href="#l7.61"></a><span id="l7.61" class="difflineplus">+                  if (colEndArray[jj].event.hashId == colEndArray[jj - 1].event.hashId) {</span>
<a href="#l7.62"></a><span id="l7.62">                       // Good we found a item that spanned multiple columns.</span>
<a href="#l7.63"></a><span id="l7.63">                       // Find it in the blob so we can modify its properties</span>
<a href="#l7.64"></a><span id="l7.64">                       for (var kk in currentBlob) {</span>
<a href="#l7.65"></a><span id="l7.65">                           if (currentBlob[kk].itemInfo.event.hashId == colEndArray[jj].event.hashId) {</span>
<a href="#l7.66"></a><span id="l7.66">                               // Take all but the first spot that the item spanned</span>
<a href="#l7.67"></a><span id="l7.67">                               var spanOfShrunkItem = currentBlob[kk].colSpan;</span>
<a href="#l7.68"></a><span id="l7.68">                               currentBlob.push({itemInfo: curItemInfo,</span>
<a href="#l7.69"></a><span id="l7.69">                                                 startCol: Number(currentBlob[kk].startCol) + 1,</span>
<a href="#l7.70"></a><span id="l7.70" class="difflineat">@@ -2017,17 +2017,17 @@</span>
<a href="#l7.71"></a><span id="l7.71"> </span>
<a href="#l7.72"></a><span id="l7.72">           let interval = this.mPixPerMin * ROUND_INTERVAL;</span>
<a href="#l7.73"></a><span id="l7.73">           let pos;</span>
<a href="#l7.74"></a><span id="l7.74">           if (this.getAttribute(&quot;orient&quot;) == &quot;vertical&quot;) {</span>
<a href="#l7.75"></a><span id="l7.75">               pos = event.screenY - this.parentNode.boxObject.screenY;</span>
<a href="#l7.76"></a><span id="l7.76">           } else {</span>
<a href="#l7.77"></a><span id="l7.77">               pos = event.screenX - this.parentNode.boxObject.screenX;</span>
<a href="#l7.78"></a><span id="l7.78">           }</span>
<a href="#l7.79"></a><span id="l7.79" class="difflineminus">-          newStart.minute = (Math.round(pos/interval) * ROUND_INTERVAL) + this.mStartMin;</span>
<a href="#l7.80"></a><span id="l7.80" class="difflineplus">+          newStart.minute = (Math.round(pos / interval) * ROUND_INTERVAL) + this.mStartMin;</span>
<a href="#l7.81"></a><span id="l7.81">           event.stopPropagation();</span>
<a href="#l7.82"></a><span id="l7.82">           return newStart;</span>
<a href="#l7.83"></a><span id="l7.83">         ]]&gt;&lt;/body&gt;</span>
<a href="#l7.84"></a><span id="l7.84">       &lt;/method&gt;</span>
<a href="#l7.85"></a><span id="l7.85">     &lt;/implementation&gt;</span>
<a href="#l7.86"></a><span id="l7.86"> </span>
<a href="#l7.87"></a><span id="l7.87">     &lt;handlers&gt;</span>
<a href="#l7.88"></a><span id="l7.88">       &lt;handler event=&quot;dblclick&quot; button=&quot;0&quot;&gt;&lt;![CDATA[</span>
<a href="#l7.89"></a><span id="l7.89" class="difflineat">@@ -2083,23 +2083,23 @@</span>
<a href="#l7.90"></a><span id="l7.90">         let snapIntMin = (event.shiftKey &amp;&amp;</span>
<a href="#l7.91"></a><span id="l7.91">                           !event.ctrlKey &amp;&amp;</span>
<a href="#l7.92"></a><span id="l7.92">                           !event.altKey &amp;&amp;</span>
<a href="#l7.93"></a><span id="l7.93">                           !event.metaKey) ? 1 : 15;</span>
<a href="#l7.94"></a><span id="l7.94">         let interval = this.mPixPerMin * snapIntMin;</span>
<a href="#l7.95"></a><span id="l7.95"> </span>
<a href="#l7.96"></a><span id="l7.96">         if (this.getAttribute(&quot;orient&quot;) == &quot;vertical&quot;) {</span>
<a href="#l7.97"></a><span id="l7.97">             this.mDragState.origLoc = event.screenY;</span>
<a href="#l7.98"></a><span id="l7.98" class="difflineminus">-            this.mDragState.origMin = Math.floor((event.screenY - this.parentNode.boxObject.screenY)/interval) * snapIntMin;</span>
<a href="#l7.99"></a><span id="l7.99" class="difflineplus">+            this.mDragState.origMin = Math.floor((event.screenY - this.parentNode.boxObject.screenY) / interval) * snapIntMin;</span>
<a href="#l7.100"></a><span id="l7.100">             this.mDragState.limitEndMin = this.mDragState.origMin;</span>
<a href="#l7.101"></a><span id="l7.101">             this.mDragState.limitStartMin = this.mDragState.origMin;</span>
<a href="#l7.102"></a><span id="l7.102">             this.fgboxes.dragspacer.setAttribute(&quot;height&quot;, this.mDragState.origMin * this.mPixPerMin);</span>
<a href="#l7.103"></a><span id="l7.103">         } else {</span>
<a href="#l7.104"></a><span id="l7.104">             this.mDragState.origLoc = event.screenX;</span>
<a href="#l7.105"></a><span id="l7.105" class="difflineminus">-            this.mDragState.origMin = Math.floor((event.screenX - this.parentNode.boxObject.screenX)/interval) * snapIntMin;</span>
<a href="#l7.106"></a><span id="l7.106" class="difflineplus">+            this.mDragState.origMin = Math.floor((event.screenX - this.parentNode.boxObject.screenX) / interval) * snapIntMin;</span>
<a href="#l7.107"></a><span id="l7.107">             this.fgboxes.dragspacer.setAttribute(&quot;width&quot;, this.mDragState.origMin * this.mPixPerMin);</span>
<a href="#l7.108"></a><span id="l7.108">         }</span>
<a href="#l7.109"></a><span id="l7.109"> </span>
<a href="#l7.110"></a><span id="l7.110">         document.calendarEventColumnDragging = this;</span>
<a href="#l7.111"></a><span id="l7.111"> </span>
<a href="#l7.112"></a><span id="l7.112">         window.addEventListener(&quot;mousemove&quot;, this.onEventSweepMouseMove, false);</span>
<a href="#l7.113"></a><span id="l7.113">         window.addEventListener(&quot;mouseup&quot;, this.onEventSweepMouseUp, false);</span>
<a href="#l7.114"></a><span id="l7.114">         window.addEventListener(&quot;keypress&quot;, this.onEventSweepKeypress, false);</span>
<a href="#l7.115"></a><span id="l7.115" class="difflineat">@@ -2404,17 +2404,17 @@</span>
<a href="#l7.116"></a><span id="l7.116">             // Use &lt;description&gt; textContent so it can wrap.</span>
<a href="#l7.117"></a><span id="l7.117">             evl.textContent = item.title;</span>
<a href="#l7.118"></a><span id="l7.118">           } else {</span>
<a href="#l7.119"></a><span id="l7.119">             evl.textContent = calGetString(&quot;calendar&quot;, &quot;eventUntitled&quot;);</span>
<a href="#l7.120"></a><span id="l7.120">           }</span>
<a href="#l7.121"></a><span id="l7.121"> </span>
<a href="#l7.122"></a><span id="l7.122">           var gripbar = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;gripbar1&quot;).boxObject.height;</span>
<a href="#l7.123"></a><span id="l7.123">           var height = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;eventbox&quot;).boxObject.height;</span>
<a href="#l7.124"></a><span id="l7.124" class="difflineminus">-          evl.setAttribute(&quot;style&quot;, &quot;max-height: &quot; + Math.max(0, height-gripbar*2) + &quot;px&quot;);</span>
<a href="#l7.125"></a><span id="l7.125" class="difflineplus">+          evl.setAttribute(&quot;style&quot;, &quot;max-height: &quot; + Math.max(0, height-gripbar * 2) + &quot;px&quot;);</span>
<a href="#l7.126"></a><span id="l7.126">         ]]&gt;&lt;/body&gt;</span>
<a href="#l7.127"></a><span id="l7.127">       &lt;/method&gt;</span>
<a href="#l7.128"></a><span id="l7.128">     &lt;/implementation&gt;</span>
<a href="#l7.129"></a><span id="l7.129"> </span>
<a href="#l7.130"></a><span id="l7.130">     &lt;handlers&gt;</span>
<a href="#l7.131"></a><span id="l7.131">       &lt;handler event=&quot;mousedown&quot; button=&quot;0&quot;&gt;&lt;![CDATA[</span>
<a href="#l7.132"></a><span id="l7.132">         event.stopPropagation();</span>
<a href="#l7.133"></a><span id="l7.133"> </span>
<a href="#l7.134"></a><span id="l7.134" class="difflineat">@@ -2450,17 +2450,17 @@</span>
<a href="#l7.135"></a><span id="l7.135">       &lt;handler event=&quot;mousemove&quot;&gt;&lt;![CDATA[</span>
<a href="#l7.136"></a><span id="l7.136">         if (!this.mInMouseDown) {</span>
<a href="#l7.137"></a><span id="l7.137">             return;</span>
<a href="#l7.138"></a><span id="l7.138">         }</span>
<a href="#l7.139"></a><span id="l7.139"> </span>
<a href="#l7.140"></a><span id="l7.140">         var dx = Math.abs(event.screenX - this.mMouseX);</span>
<a href="#l7.141"></a><span id="l7.141">         var dy = Math.abs(event.screenY - this.mMouseY);</span>
<a href="#l7.142"></a><span id="l7.142">         // more than a 3 pixel move?</span>
<a href="#l7.143"></a><span id="l7.143" class="difflineminus">-        if ((dx*dx + dy*dy) &gt; 9) {</span>
<a href="#l7.144"></a><span id="l7.144" class="difflineplus">+        if ((dx * dx + dy * dy) &gt; 9) {</span>
<a href="#l7.145"></a><span id="l7.145">             if (this.parentColumn) {</span>
<a href="#l7.146"></a><span id="l7.146">                 if (this.editingTimer) {</span>
<a href="#l7.147"></a><span id="l7.147">                     clearTimeout(this.editingTimer);</span>
<a href="#l7.148"></a><span id="l7.148">                     this.editingTimer = null;</span>
<a href="#l7.149"></a><span id="l7.149">                 }</span>
<a href="#l7.150"></a><span id="l7.150"> </span>
<a href="#l7.151"></a><span id="l7.151">                 this.calendarView.setSelectedItems(1, [this.mOccurrence]);</span>
<a href="#l7.152"></a><span id="l7.152"> </span>
<a href="#l7.153"></a><span id="l7.153" class="difflineat">@@ -2743,21 +2743,21 @@</span>
<a href="#l7.154"></a><span id="l7.154">       &lt;!-- mDateList will always be sorted before being set --&gt;</span>
<a href="#l7.155"></a><span id="l7.155">       &lt;field name=&quot;mDateList&quot;&gt;null&lt;/field&gt;</span>
<a href="#l7.156"></a><span id="l7.156">       &lt;!-- array of { date: calIDatetime, column: colbox, header: hdrbox }  --&gt;</span>
<a href="#l7.157"></a><span id="l7.157">       &lt;field name=&quot;mDateColumns&quot;&gt;null&lt;/field&gt;</span>
<a href="#l7.158"></a><span id="l7.158">       &lt;field name=&quot;mPixPerMin&quot;&gt;0.6&lt;/field&gt;</span>
<a href="#l7.159"></a><span id="l7.159">       &lt;field name=&quot;mMinPixelsPerMinute&quot;&gt;0.1&lt;/field&gt;</span>
<a href="#l7.160"></a><span id="l7.160">       &lt;field name=&quot;mSelectedDayCol&quot;&gt;null&lt;/field&gt;</span>
<a href="#l7.161"></a><span id="l7.161">       &lt;field name=&quot;mSelectedDay&quot;&gt;null&lt;/field&gt;</span>
<a href="#l7.162"></a><span id="l7.162" class="difflineminus">-      &lt;field name=&quot;mStartMin&quot;&gt;0*60&lt;/field&gt;</span>
<a href="#l7.163"></a><span id="l7.163" class="difflineminus">-      &lt;field name=&quot;mEndMin&quot;&gt;24*60&lt;/field&gt;</span>
<a href="#l7.164"></a><span id="l7.164" class="difflineplus">+      &lt;field name=&quot;mStartMin&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.165"></a><span id="l7.165" class="difflineplus">+      &lt;field name=&quot;mEndMin&quot;&gt;24 * 60&lt;/field&gt;</span>
<a href="#l7.166"></a><span id="l7.166">       &lt;field name=&quot;mDayStartMin&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.167"></a><span id="l7.167">       &lt;field name=&quot;mDayEndMin&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.168"></a><span id="l7.168" class="difflineminus">-      &lt;field name=&quot;mVisibleMinutes&quot;&gt;9*60&lt;/field&gt;</span>
<a href="#l7.169"></a><span id="l7.169" class="difflineplus">+      &lt;field name=&quot;mVisibleMinutes&quot;&gt;9 * 60&lt;/field&gt;</span>
<a href="#l7.170"></a><span id="l7.170">       &lt;field name=&quot;mClickedTime&quot;&gt;null&lt;/field&gt;</span>
<a href="#l7.171"></a><span id="l7.171">       &lt;field name=&quot;mTimeIndicatorInterval&quot;&gt;15&lt;/field&gt;</span>
<a href="#l7.172"></a><span id="l7.172">       &lt;field name=&quot;mModeHandler&quot;&gt;null&lt;/field&gt;</span>
<a href="#l7.173"></a><span id="l7.173">       &lt;field name=&quot;mTimeIndicatorMinutes&quot;&gt;0&lt;/field&gt;</span>
<a href="#l7.174"></a><span id="l7.174"> </span>
<a href="#l7.175"></a><span id="l7.175">       &lt;method name=&quot;flashAlarm&quot;&gt;</span>
<a href="#l7.176"></a><span id="l7.176">         &lt;parameter name=&quot;aAlarmItem&quot;/&gt;</span>
<a href="#l7.177"></a><span id="l7.177">         &lt;parameter name=&quot;aStop&quot;/&gt;</span>
<a href="#l7.178"></a><span id="l7.178" class="difflineat">@@ -3888,17 +3888,17 @@</span>
<a href="#l7.179"></a><span id="l7.179">         let scrollbox = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;scrollbox&quot;);</span>
<a href="#l7.180"></a><span id="l7.180">         let scrollBoxObject = scrollbox.boxObject;</span>
<a href="#l7.181"></a><span id="l7.181">         if (scrollBoxObject &amp;&amp; scrollbox.scrollHeight &gt; 0) {</span>
<a href="#l7.182"></a><span id="l7.182">             // We need to update the first visible minute, but only if the</span>
<a href="#l7.183"></a><span id="l7.183">             // scrollbox has been sized.</span>
<a href="#l7.184"></a><span id="l7.184">             let x = {}, y = {};</span>
<a href="#l7.185"></a><span id="l7.185">             scrollBoxObject.getPosition(x, y);</span>
<a href="#l7.186"></a><span id="l7.186">             if (scrollbox.getAttribute(&quot;orient&quot;) == &quot;horizontal&quot;) {</span>
<a href="#l7.187"></a><span id="l7.187" class="difflineminus">-                this.mFirstVisibleMinute = Math.round(y.value/this.mPixPerMin);</span>
<a href="#l7.188"></a><span id="l7.188" class="difflineplus">+                this.mFirstVisibleMinute = Math.round(y.value / this.mPixPerMin);</span>
<a href="#l7.189"></a><span id="l7.189">             } else {</span>
<a href="#l7.190"></a><span id="l7.190" class="difflineminus">-                this.mFirstVisibleMinute = Math.round(x.value/this.mPixPerMin);</span>
<a href="#l7.191"></a><span id="l7.191" class="difflineplus">+                this.mFirstVisibleMinute = Math.round(x.value / this.mPixPerMin);</span>
<a href="#l7.192"></a><span id="l7.192">             }</span>
<a href="#l7.193"></a><span id="l7.193">         }</span>
<a href="#l7.194"></a><span id="l7.194">       ]]&gt;&lt;/handler&gt;</span>
<a href="#l7.195"></a><span id="l7.195">     &lt;/handlers&gt;</span>
<a href="#l7.196"></a><span id="l7.196">   &lt;/binding&gt;</span>
<a href="#l7.197"></a><span id="l7.197"> &lt;/bindings&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -188,17 +188,17 @@</span>
<a href="#l8.4"></a><span id="l8.4">           let ordinals = &quot;&quot;;</span>
<a href="#l8.5"></a><span id="l8.5">           let visible = &quot;&quot;;</span>
<a href="#l8.6"></a><span id="l8.6">           let sorted = this.mTreeView.selectedColumn;</span>
<a href="#l8.7"></a><span id="l8.7">           let tree = document.getAnonymousNodes(this)[0];</span>
<a href="#l8.8"></a><span id="l8.8">           let treecols = tree.getElementsByTagNameNS(tree.namespaceURI, &quot;treecol&quot;);</span>
<a href="#l8.9"></a><span id="l8.9">           for (let i = 0; i &lt; treecols.length; i++) {</span>
<a href="#l8.10"></a><span id="l8.10">               if (treecols[i].getAttribute(&quot;hidden&quot;) != &quot;true&quot;) {</span>
<a href="#l8.11"></a><span id="l8.11">                 let content = treecols[i].getAttribute(&quot;itemproperty&quot;);</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-                visible += (visible.length &gt; 0) ? &quot; &quot;+content : content;</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+                visible += (visible.length &gt; 0) ? &quot; &quot; + content : content;</span>
<a href="#l8.14"></a><span id="l8.14">               }</span>
<a href="#l8.15"></a><span id="l8.15">               if (ordinals.length &gt; 0) {</span>
<a href="#l8.16"></a><span id="l8.16">                   ordinals += &quot; &quot;;</span>
<a href="#l8.17"></a><span id="l8.17">               }</span>
<a href="#l8.18"></a><span id="l8.18">               ordinals += treecols[i].ordinal;</span>
<a href="#l8.19"></a><span id="l8.19">               if (widths.length &gt; 0) {</span>
<a href="#l8.20"></a><span id="l8.20">                   widths += &quot; &quot;;</span>
<a href="#l8.21"></a><span id="l8.21">               }</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -1031,17 +1031,17 @@</span>
<a href="#l8.23"></a><span id="l8.23"> </span>
<a href="#l8.24"></a><span id="l8.24">           this.recreateHashTable();</span>
<a href="#l8.25"></a><span id="l8.25">         ]]&gt;&lt;/body&gt;</span>
<a href="#l8.26"></a><span id="l8.26">       &lt;/method&gt;</span>
<a href="#l8.27"></a><span id="l8.27"> </span>
<a href="#l8.28"></a><span id="l8.28">       &lt;method name=&quot;recreateHashTable&quot;&gt;</span>
<a href="#l8.29"></a><span id="l8.29">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l8.30"></a><span id="l8.30">           this.mHash2Index = {};</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-          for (var i=0; i&lt;this.mTaskArray.length; i++) {</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+          for (var i=0; i &lt; this.mTaskArray.length; i++) {</span>
<a href="#l8.33"></a><span id="l8.33">               var item = this.mTaskArray[i];</span>
<a href="#l8.34"></a><span id="l8.34">               this.mHash2Index[item.hashId] = i;</span>
<a href="#l8.35"></a><span id="l8.35">           }</span>
<a href="#l8.36"></a><span id="l8.36">           if (this.mTreeView.treebox) {</span>
<a href="#l8.37"></a><span id="l8.37">             this.mTreeView.treebox.invalidate();</span>
<a href="#l8.38"></a><span id="l8.38">           }</span>
<a href="#l8.39"></a><span id="l8.39">         ]]&gt;&lt;/body&gt;</span>
<a href="#l8.40"></a><span id="l8.40">       &lt;/method&gt;</span>
<a href="#l8.41"></a><span id="l8.41" class="difflineat">@@ -1150,17 +1150,17 @@</span>
<a href="#l8.42"></a><span id="l8.42"> </span>
<a href="#l8.43"></a><span id="l8.43">         // let's build the drag region</span>
<a href="#l8.44"></a><span id="l8.44">         var region = null;</span>
<a href="#l8.45"></a><span id="l8.45">         try {</span>
<a href="#l8.46"></a><span id="l8.46">           region = Components.classes[&quot;@mozilla.org/gfx/region;1&quot;].createInstance(Components.interfaces.nsIScriptableRegion);</span>
<a href="#l8.47"></a><span id="l8.47">           region.init();</span>
<a href="#l8.48"></a><span id="l8.48">           var obo = tree.treeBoxObject;</span>
<a href="#l8.49"></a><span id="l8.49">           var bo = obo.treeBody.boxObject;</span>
<a href="#l8.50"></a><span id="l8.50" class="difflineminus">-          var sel= tree.view.selection;</span>
<a href="#l8.51"></a><span id="l8.51" class="difflineplus">+          var sel = tree.view.selection;</span>
<a href="#l8.52"></a><span id="l8.52"> </span>
<a href="#l8.53"></a><span id="l8.53">           var rowX = bo.x;</span>
<a href="#l8.54"></a><span id="l8.54">           var rowY = bo.y;</span>
<a href="#l8.55"></a><span id="l8.55">           var rowHeight = obo.rowHeight;</span>
<a href="#l8.56"></a><span id="l8.56">           var rowWidth = bo.width;</span>
<a href="#l8.57"></a><span id="l8.57"> </span>
<a href="#l8.58"></a><span id="l8.58">           // add a rectangle for each visible selected row</span>
<a href="#l8.59"></a><span id="l8.59">           for (var i = obo.getFirstVisibleRow(); i &lt;= obo.getLastVisibleRow(); i++) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/calendar-ui-utils.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -481,17 +481,17 @@ function updateMenuLabelsPlural(aLengthF</span>
<a href="#l9.4"></a><span id="l9.4">  * @throws              String error if value not found.</span>
<a href="#l9.5"></a><span id="l9.5">  */</span>
<a href="#l9.6"></a><span id="l9.6"> function menuListSelectItem(menuListId, value) {</span>
<a href="#l9.7"></a><span id="l9.7">     var menuList = document.getElementById(menuListId);</span>
<a href="#l9.8"></a><span id="l9.8">     var index = menuListIndexOf(menuList, value);</span>
<a href="#l9.9"></a><span id="l9.9">     if (index != -1) {</span>
<a href="#l9.10"></a><span id="l9.10">         menuList.selectedIndex = index;</span>
<a href="#l9.11"></a><span id="l9.11">     } else {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-        throw &quot;menuListSelectItem: No such Element: &quot;+value;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+        throw &quot;menuListSelectItem: No such Element: &quot; + value;</span>
<a href="#l9.14"></a><span id="l9.14">     }</span>
<a href="#l9.15"></a><span id="l9.15"> }</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17"> /**</span>
<a href="#l9.18"></a><span id="l9.18">  * Find index of menuitem with the given value, or return -1 if not found.</span>
<a href="#l9.19"></a><span id="l9.19">  *</span>
<a href="#l9.20"></a><span id="l9.20">  * @param menuListId    The XUL menulist node to check.</span>
<a href="#l9.21"></a><span id="l9.21">  * @param value         The value to look for.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-dialog-utils.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -535,18 +535,17 @@ function updateLink() {</span>
<a href="#l10.4"></a><span id="l10.4">             // No protocol handler for the given protocol, or invalid uri</span>
<a href="#l10.5"></a><span id="l10.5">             hideOrShow(false);</span>
<a href="#l10.6"></a><span id="l10.6">             return;</span>
<a href="#l10.7"></a><span id="l10.7">         }</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9">         // Only show if its either an internal protcol handler, or its external</span>
<a href="#l10.10"></a><span id="l10.10">         // and there is an external app for the scheme</span>
<a href="#l10.11"></a><span id="l10.11">         handler = cal.wrapInstance(handler, Components.interfaces.nsIExternalProtocolHandler);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-        hideOrShow(!handler||</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-                   handler.externalAppExistsForScheme(uri.scheme));</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+        hideOrShow(!handler || handler.externalAppExistsForScheme(uri.scheme));</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16">         setTimeout(function() {</span>
<a href="#l10.17"></a><span id="l10.17">           // HACK the url-link doesn't crop when setting the value in onLoad</span>
<a href="#l10.18"></a><span id="l10.18">           setElementValue(&quot;url-link&quot;, itemUrlString);</span>
<a href="#l10.19"></a><span id="l10.19">           setElementValue(&quot;url-link&quot;, itemUrlString, &quot;href&quot;);</span>
<a href="#l10.20"></a><span id="l10.20">         }, 0);</span>
<a href="#l10.21"></a><span id="l10.21">     }</span>
<a href="#l10.22"></a><span id="l10.22"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -88,22 +88,22 @@ function onLoad() {</span>
<a href="#l11.4"></a><span id="l11.4">     // with plain xul and css, at least as far as i know.</span>
<a href="#l11.5"></a><span id="l11.5">     const kStylesheet = &quot;chrome://calendar/skin/calendar-event-dialog.css&quot;;</span>
<a href="#l11.6"></a><span id="l11.6">     for (var stylesheet of document.styleSheets) {</span>
<a href="#l11.7"></a><span id="l11.7">         if (stylesheet.href == kStylesheet) {</span>
<a href="#l11.8"></a><span id="l11.8">             // make the dummy-spacer #1 [top] the same height as the timebar</span>
<a href="#l11.9"></a><span id="l11.9">             var timebar = document.getElementById(&quot;timebar&quot;);</span>
<a href="#l11.10"></a><span id="l11.10">             stylesheet.insertRule(</span>
<a href="#l11.11"></a><span id="l11.11">                 &quot;.attendee-spacer-top { height: &quot;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-                    + timebar.boxObject.height+&quot;px; }&quot;, 0);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+                    + timebar.boxObject.height + &quot;px; }&quot;, 0);</span>
<a href="#l11.14"></a><span id="l11.14">             // make the dummy-spacer #2 [bottom] the same height as the scrollbar</span>
<a href="#l11.15"></a><span id="l11.15">             var scrollbar = document.getElementById(&quot;horizontal-scrollbar&quot;);</span>
<a href="#l11.16"></a><span id="l11.16">             stylesheet.insertRule(</span>
<a href="#l11.17"></a><span id="l11.17">                 &quot;.attendee-spacer-bottom { height: &quot;</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-                    + scrollbar.boxObject.height+&quot;px; }&quot;, 0);</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineplus">+                    + scrollbar.boxObject.height + &quot;px; }&quot;, 0);</span>
<a href="#l11.20"></a><span id="l11.20">             break;</span>
<a href="#l11.21"></a><span id="l11.21">         }</span>
<a href="#l11.22"></a><span id="l11.22">     }</span>
<a href="#l11.23"></a><span id="l11.23"> </span>
<a href="#l11.24"></a><span id="l11.24">     // attach an observer to get notified of changes</span>
<a href="#l11.25"></a><span id="l11.25">     // that are relevant to this dialog.</span>
<a href="#l11.26"></a><span id="l11.26">     var prefObserver = {</span>
<a href="#l11.27"></a><span id="l11.27">         observe: function aD_observe(aSubject, aTopic, aPrefName) {</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineat">@@ -919,17 +919,17 @@ function onAttrModified(event) {</span>
<a href="#l11.29"></a><span id="l11.29">                 if (event.attrName == &quot;curpos&quot;) {</span>
<a href="#l11.30"></a><span id="l11.30">                     let maxpos = scrollbar.getAttribute(&quot;maxpos&quot;);</span>
<a href="#l11.31"></a><span id="l11.31">                     attendees.ratio = event.newValue / maxpos;</span>
<a href="#l11.32"></a><span id="l11.32">                 }</span>
<a href="#l11.33"></a><span id="l11.33">                 grid.firstVisibleRow = attendees.firstVisibleRow;</span>
<a href="#l11.34"></a><span id="l11.34">             } else if (scrollbar.getAttribute(&quot;id&quot;) == &quot;horizontal-scrollbar&quot;) {</span>
<a href="#l11.35"></a><span id="l11.35">                 if (event.attrName == &quot;curpos&quot;) {</span>
<a href="#l11.36"></a><span id="l11.36">                     let maxpos = scrollbar.getAttribute(&quot;maxpos&quot;);</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-                    let ratio = event.newValue/maxpos;</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineplus">+                    let ratio = event.newValue / maxpos;</span>
<a href="#l11.39"></a><span id="l11.39">                     let timebar = document.getElementById(&quot;timebar&quot;);</span>
<a href="#l11.40"></a><span id="l11.40">                     let grid = document.getElementById(&quot;freebusy-grid&quot;);</span>
<a href="#l11.41"></a><span id="l11.41">                     let selectionbar = document.getElementById(&quot;selection-bar&quot;);</span>
<a href="#l11.42"></a><span id="l11.42">                     timebar.scroll = ratio;</span>
<a href="#l11.43"></a><span id="l11.43">                     grid.scroll = ratio;</span>
<a href="#l11.44"></a><span id="l11.44">                     selectionbar.ratio = ratio;</span>
<a href="#l11.45"></a><span id="l11.45">                 }</span>
<a href="#l11.46"></a><span id="l11.46">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.xml</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -608,17 +608,17 @@</span>
<a href="#l12.4"></a><span id="l12.4">                 if (mailingList) {</span>
<a href="#l12.5"></a><span id="l12.5">                     let entries = this._getListEntries(mailingList);</span>
<a href="#l12.6"></a><span id="l12.6">                       if (entries.length &gt; 0) {</span>
<a href="#l12.7"></a><span id="l12.7">                           let currentIndex = parseInt(input.id.substr(13), 10);</span>
<a href="#l12.8"></a><span id="l12.8">                           let template = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;item&quot;);</span>
<a href="#l12.9"></a><span id="l12.9">                           let currentNode = template.parentNode.childNodes[currentIndex];</span>
<a href="#l12.10"></a><span id="l12.10">                           this._fillListItemWithEntry(currentNode, entries[0], currentIndex);</span>
<a href="#l12.11"></a><span id="l12.11">                           entries.shift();</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-                          let nextNode = template.parentNode.childNodes[currentIndex+1];</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+                          let nextNode = template.parentNode.childNodes[currentIndex + 1];</span>
<a href="#l12.14"></a><span id="l12.14">                           currentIndex++;</span>
<a href="#l12.15"></a><span id="l12.15">                           for (let entry of entries) {</span>
<a href="#l12.16"></a><span id="l12.16">                               currentNode = template.cloneNode(true);</span>
<a href="#l12.17"></a><span id="l12.17">                               template.parentNode.insertBefore(currentNode, nextNode);</span>
<a href="#l12.18"></a><span id="l12.18">                               this._fillListItemWithEntry(currentNode, entry, currentIndex);</span>
<a href="#l12.19"></a><span id="l12.19">                               currentIndex++;</span>
<a href="#l12.20"></a><span id="l12.20">                           }</span>
<a href="#l12.21"></a><span id="l12.21">                           this.mMaxAttendees += entries.length;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-recurrence.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -304,17 +304,17 @@ function onSave(item) {</span>
<a href="#l13.4"></a><span id="l13.4">             recRule.setComponent(&quot;BYDAY&quot;, onDays.length, onDays);</span>
<a href="#l13.5"></a><span id="l13.5">         }</span>
<a href="#l13.6"></a><span id="l13.6">         break;</span>
<a href="#l13.7"></a><span id="l13.7">     case 2:</span>
<a href="#l13.8"></a><span id="l13.8">         recRule.type = &quot;MONTHLY&quot;;</span>
<a href="#l13.9"></a><span id="l13.9">         var monthInterval = Number(getElementValue(&quot;monthly-interval&quot;));</span>
<a href="#l13.10"></a><span id="l13.10">         recRule.interval = monthInterval;</span>
<a href="#l13.11"></a><span id="l13.11">         var monthlyGroup = document.getElementById(&quot;monthly-group&quot;);</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        if (monthlyGroup.selectedIndex==0) {</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        if (monthlyGroup.selectedIndex == 0) {</span>
<a href="#l13.14"></a><span id="l13.14">             var ordinal = Number(getElementValue(&quot;monthly-ordinal&quot;));</span>
<a href="#l13.15"></a><span id="l13.15">             var day_of_week = Number(getElementValue(&quot;monthly-weekday&quot;));</span>
<a href="#l13.16"></a><span id="l13.16">             if (day_of_week &lt; 0) {</span>
<a href="#l13.17"></a><span id="l13.17">                 if (ordinal == 0) {</span>
<a href="#l13.18"></a><span id="l13.18">                     // Monthly rule &quot;Every day of the month&quot;.</span>
<a href="#l13.19"></a><span id="l13.19">                     recRule.setComponent(&quot;BYDAY&quot;, 7, ALL_WEEKDAYS);</span>
<a href="#l13.20"></a><span id="l13.20">                 } else {</span>
<a href="#l13.21"></a><span id="l13.21">                     // One of the first five days or the last day of the month.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-timezone.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-timezone.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -67,17 +67,17 @@ function onLoad() {</span>
<a href="#l14.4"></a><span id="l14.4">  *</span>
<a href="#l14.5"></a><span id="l14.5">  * @param timezone      The calITimezone to look for.</span>
<a href="#l14.6"></a><span id="l14.6">  * @return              The index of the childnode below &quot;timezone-menulist&quot;</span>
<a href="#l14.7"></a><span id="l14.7">  */</span>
<a href="#l14.8"></a><span id="l14.8"> function findTimezone(timezone) {</span>
<a href="#l14.9"></a><span id="l14.9">     var tzid = timezone.tzid;</span>
<a href="#l14.10"></a><span id="l14.10">     var menulist = document.getElementById(&quot;timezone-menulist&quot;);</span>
<a href="#l14.11"></a><span id="l14.11">     var numChilds = menulist.childNodes[0].childNodes.length;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    for (var i=0; i&lt;numChilds; i++) {</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+    for (var i = 0; i &lt; numChilds; i++) {</span>
<a href="#l14.14"></a><span id="l14.14">         var menuitem = menulist.childNodes[0].childNodes[i];</span>
<a href="#l14.15"></a><span id="l14.15">         if (menuitem.getAttribute(&quot;value&quot;) == tzid) {</span>
<a href="#l14.16"></a><span id="l14.16">             return i;</span>
<a href="#l14.17"></a><span id="l14.17">         }</span>
<a href="#l14.18"></a><span id="l14.18">     }</span>
<a href="#l14.19"></a><span id="l14.19">     return -1;</span>
<a href="#l14.20"></a><span id="l14.20"> }</span>
<a href="#l14.21"></a><span id="l14.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/content/import-export.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/content/import-export.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -47,17 +47,17 @@ function loadEventsFromFile(aCalendar) {</span>
<a href="#l15.4"></a><span id="l15.4">                                  .getService(Components.interfaces.calIImporter);</span>
<a href="#l15.5"></a><span id="l15.5">         } catch (e) {</span>
<a href="#l15.6"></a><span id="l15.6">             cal.WARN(&quot;Could not initialize importer: &quot; + contractid + &quot;\nError: &quot; + e);</span>
<a href="#l15.7"></a><span id="l15.7">             continue;</span>
<a href="#l15.8"></a><span id="l15.8">         }</span>
<a href="#l15.9"></a><span id="l15.9">         let types = importer.getFileTypes({});</span>
<a href="#l15.10"></a><span id="l15.10">         for (let type of types) {</span>
<a href="#l15.11"></a><span id="l15.11">             fp.appendFilter(type.description, type.extensionFilter);</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-            if (type.extensionFilter==&quot;*.&quot; + fp.defaultExtension) {</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+            if (type.extensionFilter == &quot;*.&quot; + fp.defaultExtension) {</span>
<a href="#l15.14"></a><span id="l15.14">                 fp.filterIndex = currentListLength;</span>
<a href="#l15.15"></a><span id="l15.15">                 defaultCIDIndex = currentListLength;</span>
<a href="#l15.16"></a><span id="l15.16">             }</span>
<a href="#l15.17"></a><span id="l15.17">             contractids.push(contractid);</span>
<a href="#l15.18"></a><span id="l15.18">             currentListLength++;</span>
<a href="#l15.19"></a><span id="l15.19">         }</span>
<a href="#l15.20"></a><span id="l15.20">     }</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22" class="difflineat">@@ -87,17 +87,17 @@ function loadEventsFromFile(aCalendar) {</span>
<a href="#l15.23"></a><span id="l15.23">             inputStream.init( fp.file, MODE_RDONLY, parseInt(&quot;0444&quot;, 8), {});</span>
<a href="#l15.24"></a><span id="l15.24">             items = importer.importFromStream(inputStream, {});</span>
<a href="#l15.25"></a><span id="l15.25">         } catch(ex) {</span>
<a href="#l15.26"></a><span id="l15.26">             switch (ex.result) {</span>
<a href="#l15.27"></a><span id="l15.27">                 case Components.interfaces.calIErrors.INVALID_TIMEZONE:</span>
<a href="#l15.28"></a><span id="l15.28">                     showError(calGetString(&quot;calendar&quot;, &quot;timezoneError&quot;, [filePath]));</span>
<a href="#l15.29"></a><span id="l15.29">                     break;</span>
<a href="#l15.30"></a><span id="l15.30">                 default:</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-                    showError(calGetString(&quot;calendar&quot;, &quot;unableToRead&quot;) + filePath + &quot;\n&quot;+ ex);</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineplus">+                    showError(calGetString(&quot;calendar&quot;, &quot;unableToRead&quot;) + filePath + &quot;\n&quot; + ex);</span>
<a href="#l15.33"></a><span id="l15.33">             }</span>
<a href="#l15.34"></a><span id="l15.34">         } finally {</span>
<a href="#l15.35"></a><span id="l15.35">             inputStream.close();</span>
<a href="#l15.36"></a><span id="l15.36">         }</span>
<a href="#l15.37"></a><span id="l15.37"> </span>
<a href="#l15.38"></a><span id="l15.38">         if (aCalendar) {</span>
<a href="#l15.39"></a><span id="l15.39">             putItemsIntoCal(aCalendar, items);</span>
<a href="#l15.40"></a><span id="l15.40">             return;</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineat">@@ -183,17 +183,17 @@ function putItemsIntoCal(destCal, aItems</span>
<a href="#l15.42"></a><span id="l15.42">             destCal.addItem(item, listener);</span>
<a href="#l15.43"></a><span id="l15.43">         } catch(e) {</span>
<a href="#l15.44"></a><span id="l15.44">             failedCount++;</span>
<a href="#l15.45"></a><span id="l15.45">             lastError = e;</span>
<a href="#l15.46"></a><span id="l15.46">             // Call the listener's operationComplete, to increase the</span>
<a href="#l15.47"></a><span id="l15.47">             // counter and not miss failed items. Otherwise, endBatch might</span>
<a href="#l15.48"></a><span id="l15.48">             // never be called.</span>
<a href="#l15.49"></a><span id="l15.49">             listener.onOperationComplete(null, null, null, null, null);</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineminus">-            Components.utils.reportError(&quot;Import error: &quot;+e);</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineplus">+            Components.utils.reportError(&quot;Import error: &quot; + e);</span>
<a href="#l15.52"></a><span id="l15.52">         }</span>
<a href="#l15.53"></a><span id="l15.53">     }</span>
<a href="#l15.54"></a><span id="l15.54"> </span>
<a href="#l15.55"></a><span id="l15.55">     // End transmgr batch</span>
<a href="#l15.56"></a><span id="l15.56">     endBatchTransaction();</span>
<a href="#l15.57"></a><span id="l15.57"> }</span>
<a href="#l15.58"></a><span id="l15.58"> </span>
<a href="#l15.59"></a><span id="l15.59"> /**</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineat">@@ -245,17 +245,17 @@ function saveEventsToFile(calendarEventA</span>
<a href="#l15.61"></a><span id="l15.61">                                  .getService(Components.interfaces.calIExporter);</span>
<a href="#l15.62"></a><span id="l15.62">         } catch (e) {</span>
<a href="#l15.63"></a><span id="l15.63">             cal.WARN(&quot;Could not initialize exporter: &quot; + contractid + &quot;\nError: &quot; + e);</span>
<a href="#l15.64"></a><span id="l15.64">             continue;</span>
<a href="#l15.65"></a><span id="l15.65">         }</span>
<a href="#l15.66"></a><span id="l15.66">         let types = exporter.getFileTypes({});</span>
<a href="#l15.67"></a><span id="l15.67">         for (let type of types) {</span>
<a href="#l15.68"></a><span id="l15.68">             fp.appendFilter(type.description, type.extensionFilter);</span>
<a href="#l15.69"></a><span id="l15.69" class="difflineminus">-            if (type.extensionFilter==&quot;*.&quot; + fp.defaultExtension) {</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineplus">+            if (type.extensionFilter == &quot;*.&quot; + fp.defaultExtension) {</span>
<a href="#l15.71"></a><span id="l15.71">                 fp.filterIndex = currentListLength;</span>
<a href="#l15.72"></a><span id="l15.72">                 defaultCIDIndex = currentListLength;</span>
<a href="#l15.73"></a><span id="l15.73">             }</span>
<a href="#l15.74"></a><span id="l15.74">             contractids.push(contractid);</span>
<a href="#l15.75"></a><span id="l15.75">             currentListLength++;</span>
<a href="#l15.76"></a><span id="l15.76">         }</span>
<a href="#l15.77"></a><span id="l15.77">     }</span>
<a href="#l15.78"></a><span id="l15.78"> </span>
<a href="#l15.79"></a><span id="l15.79" class="difflineat">@@ -275,17 +275,17 @@ function saveEventsToFile(calendarEventA</span>
<a href="#l15.80"></a><span id="l15.80">             filterIndex = defaultCIDIndex;</span>
<a href="#l15.81"></a><span id="l15.81">         }</span>
<a href="#l15.82"></a><span id="l15.82"> </span>
<a href="#l15.83"></a><span id="l15.83">         let exporter = Components.classes[contractids[filterIndex]]</span>
<a href="#l15.84"></a><span id="l15.84">                                  .getService(Components.interfaces.calIExporter);</span>
<a href="#l15.85"></a><span id="l15.85"> </span>
<a href="#l15.86"></a><span id="l15.86">         let filePath = fp.file.path;</span>
<a href="#l15.87"></a><span id="l15.87">         if (!filePath.includes(&quot;.&quot;)) {</span>
<a href="#l15.88"></a><span id="l15.88" class="difflineminus">-            filePath += &quot;.&quot;+exporter.getFileTypes({})[0].defaultExtension;</span>
<a href="#l15.89"></a><span id="l15.89" class="difflineplus">+            filePath += &quot;.&quot; + exporter.getFileTypes({})[0].defaultExtension;</span>
<a href="#l15.90"></a><span id="l15.90">         }</span>
<a href="#l15.91"></a><span id="l15.91"> </span>
<a href="#l15.92"></a><span id="l15.92">         const nsILocalFile = Components.interfaces.nsILocalFile;</span>
<a href="#l15.93"></a><span id="l15.93">         const nsIFileOutputStream = Components.interfaces.nsIFileOutputStream;</span>
<a href="#l15.94"></a><span id="l15.94"> </span>
<a href="#l15.95"></a><span id="l15.95">         let outputStream;</span>
<a href="#l15.96"></a><span id="l15.96">         let localFileInstance = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l15.97"></a><span id="l15.97">                                           .createInstance(nsILocalFile);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/content/preferences/alarms.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/content/preferences/alarms.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -124,13 +124,13 @@ var gAlarmsPane = {</span>
<a href="#l16.4"></a><span id="l16.4">         var alarmsPlaySoundPref =</span>
<a href="#l16.5"></a><span id="l16.5">             document.getElementById(&quot;calendar.alarms.playsound&quot;);</span>
<a href="#l16.6"></a><span id="l16.6"> </span>
<a href="#l16.7"></a><span id="l16.7">         var items = [document.getElementById(&quot;alarmSoundFileField&quot;),</span>
<a href="#l16.8"></a><span id="l16.8">                      document.getElementById(&quot;calendar.prefs.alarm.sound.useDefault&quot;),</span>
<a href="#l16.9"></a><span id="l16.9">                      document.getElementById(&quot;calendar.prefs.alarm.sound.browse&quot;),</span>
<a href="#l16.10"></a><span id="l16.10">                      document.getElementById(&quot;calendar.prefs.alarm.sound.play&quot;)];</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-        for (var i=0; i &lt; items.length; i++) {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+        for (var i = 0; i &lt; items.length; i++) {</span>
<a href="#l16.14"></a><span id="l16.14">             items[i].disabled = !alarmsPlaySoundPref.value;</span>
<a href="#l16.15"></a><span id="l16.15">         }</span>
<a href="#l16.16"></a><span id="l16.16">     }</span>
<a href="#l16.17"></a><span id="l16.17"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/base/content/preferences/categories.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/base/content/preferences/categories.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -75,27 +75,27 @@ var gCategoriesPane = {</span>
<a href="#l17.4"></a><span id="l17.4">         listbox.clearSelection();</span>
<a href="#l17.5"></a><span id="l17.5">         this.updateButtons();</span>
<a href="#l17.6"></a><span id="l17.6"> </span>
<a href="#l17.7"></a><span id="l17.7"> </span>
<a href="#l17.8"></a><span id="l17.8">         while (listbox.lastChild.id != &quot;categoryColumns&quot;) {</span>
<a href="#l17.9"></a><span id="l17.9">             listbox.lastChild.remove();</span>
<a href="#l17.10"></a><span id="l17.10">         }</span>
<a href="#l17.11"></a><span id="l17.11"> </span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-        for (var i=0; i &lt; gCategoryList.length; i++) {</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+        for (var i = 0; i &lt; gCategoryList.length; i++) {</span>
<a href="#l17.14"></a><span id="l17.14">             var newListItem = document.createElement(&quot;listitem&quot;);</span>
<a href="#l17.15"></a><span id="l17.15">             var categoryName = document.createElement(&quot;listcell&quot;);</span>
<a href="#l17.16"></a><span id="l17.16">             categoryName.setAttribute(&quot;id&quot;, gCategoryList[i]);</span>
<a href="#l17.17"></a><span id="l17.17">             categoryName.setAttribute(&quot;label&quot;, gCategoryList[i]);</span>
<a href="#l17.18"></a><span id="l17.18">             var categoryNameFix = formatStringForCSSRule(gCategoryList[i]);</span>
<a href="#l17.19"></a><span id="l17.19">             var categoryColor = document.createElement(&quot;listcell&quot;);</span>
<a href="#l17.20"></a><span id="l17.20">             try {</span>
<a href="#l17.21"></a><span id="l17.21">                 var colorCode = categoryPrefBranch.getCharPref(categoryNameFix);</span>
<a href="#l17.22"></a><span id="l17.22">                 categoryColor.setAttribute(&quot;id&quot;, colorCode);</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">-                categoryColor.setAttribute(&quot;style&quot;, &quot;background-color: &quot;+colorCode+';');</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineplus">+                categoryColor.setAttribute(&quot;style&quot;, &quot;background-color: &quot; + colorCode + &quot;;&quot;);</span>
<a href="#l17.25"></a><span id="l17.25">             } catch (ex) {</span>
<a href="#l17.26"></a><span id="l17.26">                 categoryColor.setAttribute(&quot;label&quot;, noneLabel);</span>
<a href="#l17.27"></a><span id="l17.27">             }</span>
<a href="#l17.28"></a><span id="l17.28"> </span>
<a href="#l17.29"></a><span id="l17.29">             newListItem.appendChild(categoryName);</span>
<a href="#l17.30"></a><span id="l17.30">             newListItem.appendChild(categoryColor);</span>
<a href="#l17.31"></a><span id="l17.31">             listbox.appendChild(newListItem);</span>
<a href="#l17.32"></a><span id="l17.32">         }</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineat">@@ -184,17 +184,17 @@ var gCategoriesPane = {</span>
<a href="#l17.34"></a><span id="l17.34">      *</span>
<a href="#l17.35"></a><span id="l17.35">      * @param categoryName      The name of the category.</span>
<a href="#l17.36"></a><span id="l17.36">      * @param categoryColor     The color of the category</span>
<a href="#l17.37"></a><span id="l17.37">      */</span>
<a href="#l17.38"></a><span id="l17.38">     saveCategory: function gCP_saveCateogry(categoryName, categoryColor) {</span>
<a href="#l17.39"></a><span id="l17.39">         var list = document.getElementById(&quot;categorieslist&quot;);</span>
<a href="#l17.40"></a><span id="l17.40">         // Check to make sure another category doesn't have the same name</span>
<a href="#l17.41"></a><span id="l17.41">         var toBeDeleted = -1;</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-        for (var i=0; i &lt; gCategoryList.length; i++) {</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineplus">+        for (var i = 0; i &lt; gCategoryList.length; i++) {</span>
<a href="#l17.44"></a><span id="l17.44">             if (i == list.selectedIndex) {</span>
<a href="#l17.45"></a><span id="l17.45">                 continue;</span>
<a href="#l17.46"></a><span id="l17.46">             }</span>
<a href="#l17.47"></a><span id="l17.47"> </span>
<a href="#l17.48"></a><span id="l17.48">             if (categoryName.toLowerCase() == gCategoryList[i].toLowerCase()) {</span>
<a href="#l17.49"></a><span id="l17.49">                 if (Services.prompt.confirm(null, overwriteTitle, overwrite)) {</span>
<a href="#l17.50"></a><span id="l17.50">                     if (list.selectedIndex != -1) {</span>
<a href="#l17.51"></a><span id="l17.51">                         // Don't delete the old category yet. It will mess up indices.</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineat">@@ -265,17 +265,17 @@ var gCategoriesPane = {</span>
<a href="#l17.53"></a><span id="l17.53">         var currentColor;</span>
<a href="#l17.54"></a><span id="l17.54">         try {</span>
<a href="#l17.55"></a><span id="l17.55">             currentColor = categoryPrefBranch.getCharPref(categoryNameFix);</span>
<a href="#l17.56"></a><span id="l17.56">         } catch (ex) {</span>
<a href="#l17.57"></a><span id="l17.57">             dump(&quot;Exception caught in 'backupData': &quot; + ex + &quot;\n&quot;);</span>
<a href="#l17.58"></a><span id="l17.58">             currentColor = &quot;##NEW&quot;;</span>
<a href="#l17.59"></a><span id="l17.59">         }</span>
<a href="#l17.60"></a><span id="l17.60"> </span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-        for (var i=0; i &lt; parent.backupPrefList.length; i++) {</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineplus">+        for (var i = 0; i &lt; parent.backupPrefList.length; i++) {</span>
<a href="#l17.63"></a><span id="l17.63">             if (categoryNameFix == parent.backupPrefList[i].name) {</span>
<a href="#l17.64"></a><span id="l17.64">                 return;</span>
<a href="#l17.65"></a><span id="l17.65">             }</span>
<a href="#l17.66"></a><span id="l17.66">         }</span>
<a href="#l17.67"></a><span id="l17.67">         parent.backupPrefList[parent.backupPrefList.length] =</span>
<a href="#l17.68"></a><span id="l17.68">             { name: categoryNameFix, color: currentColor };</span>
<a href="#l17.69"></a><span id="l17.69">     },</span>
<a href="#l17.70"></a><span id="l17.70"> </span>
<a href="#l17.71"></a><span id="l17.71" class="difflineat">@@ -290,17 +290,17 @@ var gCategoriesPane = {</span>
<a href="#l17.72"></a><span id="l17.72">             this.editCategory();</span>
<a href="#l17.73"></a><span id="l17.73">         }</span>
<a href="#l17.74"></a><span id="l17.74">     },</span>
<a href="#l17.75"></a><span id="l17.75"> </span>
<a href="#l17.76"></a><span id="l17.76">     /**</span>
<a href="#l17.77"></a><span id="l17.77">      * Reverts category preferences in case the cancel button is pressed.</span>
<a href="#l17.78"></a><span id="l17.78">      */</span>
<a href="#l17.79"></a><span id="l17.79">     panelOnCancel: function gCP_panelOnCancel() {</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-        for (var i=0; i &lt; parent.backupPrefList.length; i++) {</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineplus">+        for (var i = 0; i &lt; parent.backupPrefList.length; i++) {</span>
<a href="#l17.82"></a><span id="l17.82">             if (parent.backupPrefList[i].color == &quot;##NEW&quot;) {</span>
<a href="#l17.83"></a><span id="l17.83">                 try {</span>
<a href="#l17.84"></a><span id="l17.84">                    categoryPrefBranch.clearUserPref(parent.backupPrefList[i].name);</span>
<a href="#l17.85"></a><span id="l17.85">                 } catch (ex) {</span>
<a href="#l17.86"></a><span id="l17.86">                     dump(&quot;Exception caught in 'panelOnCancel': &quot; + ex + &quot;\n&quot;);</span>
<a href="#l17.87"></a><span id="l17.87">                 }</span>
<a href="#l17.88"></a><span id="l17.88">             } else {</span>
<a href="#l17.89"></a><span id="l17.89">                 categoryPrefBranch.setCharPref(parent.backupPrefList[i].name,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/base/content/today-pane.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/base/content/today-pane.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -89,18 +89,18 @@ var TodayPane = {</span>
<a href="#l18.4"></a><span id="l18.4">     /**</span>
<a href="#l18.5"></a><span id="l18.5">      * Sets up the miniday display in the today pane.</span>
<a href="#l18.6"></a><span id="l18.6">      */</span>
<a href="#l18.7"></a><span id="l18.7">     initializeMiniday: function initializeMiniday() {</span>
<a href="#l18.8"></a><span id="l18.8">         // initialize the label denoting the current month, year and calendarweek</span>
<a href="#l18.9"></a><span id="l18.9">         // with numbers that are supposed to consume the largest width</span>
<a href="#l18.10"></a><span id="l18.10">         // in order to guarantee that the text will not be cropped when modified</span>
<a href="#l18.11"></a><span id="l18.11">         // during runtime</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        const kYEARINIT= &quot;5555&quot;;</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-        const kCALWEEKINIT= &quot;55&quot;;</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineplus">+        const kYEARINIT = &quot;5555&quot;;</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineplus">+        const kCALWEEKINIT = &quot;55&quot;;</span>
<a href="#l18.16"></a><span id="l18.16">         let monthdisplaydeck = document.getElementById(&quot;monthNameContainer&quot;);</span>
<a href="#l18.17"></a><span id="l18.17">         let childNodes = monthdisplaydeck.childNodes;</span>
<a href="#l18.18"></a><span id="l18.18"> </span>
<a href="#l18.19"></a><span id="l18.19">         for (let i = 0; i &lt; childNodes.length; i++) {</span>
<a href="#l18.20"></a><span id="l18.20">             let monthlabel = childNodes[i];</span>
<a href="#l18.21"></a><span id="l18.21">             this.setMonthDescription(monthlabel, i, kYEARINIT, kCALWEEKINIT);</span>
<a href="#l18.22"></a><span id="l18.22">         }</span>
<a href="#l18.23"></a><span id="l18.23"> </span>
<a href="#l18.24"></a><span id="l18.24" class="difflineat">@@ -166,35 +166,35 @@ var TodayPane = {</span>
<a href="#l18.25"></a><span id="l18.25">      *</span>
<a href="#l18.26"></a><span id="l18.26">      * NOTE: This function is usually called without the correct this pointer.</span>
<a href="#l18.27"></a><span id="l18.27">      */</span>
<a href="#l18.28"></a><span id="l18.28">     onMousemove: function md_onMousemove(aEvent) {</span>
<a href="#l18.29"></a><span id="l18.29">         const MIN_DRAG_DISTANCE_SQ = 49;</span>
<a href="#l18.30"></a><span id="l18.30">         let x = aEvent.clientX - TodayPane.minidayDrag.startX;</span>
<a href="#l18.31"></a><span id="l18.31">         let y = aEvent.clientY - TodayPane.minidayDrag.startY;</span>
<a href="#l18.32"></a><span id="l18.32">         if (TodayPane.minidayDrag.session) {</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineminus">-            if (x*x + y*y &gt;= MIN_DRAG_DISTANCE_SQ) {</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-                let distance = Math.floor(Math.sqrt(x*x + y*y) - Math.sqrt(MIN_DRAG_DISTANCE_SQ));</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineplus">+            if (x * x + y * y &gt;= MIN_DRAG_DISTANCE_SQ) {</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineplus">+                let distance = Math.floor(Math.sqrt(x * x + y * y) - Math.sqrt(MIN_DRAG_DISTANCE_SQ));</span>
<a href="#l18.37"></a><span id="l18.37">                 // Dragging on the left/right side, the day date decrease/increase</span>
<a href="#l18.38"></a><span id="l18.38">                 TodayPane.minidayDrag.distance = (x &gt; 0) ? distance : -distance;</span>
<a href="#l18.39"></a><span id="l18.39">             } else {</span>
<a href="#l18.40"></a><span id="l18.40">                 TodayPane.minidayDrag.distance = 0;</span>
<a href="#l18.41"></a><span id="l18.41">             }</span>
<a href="#l18.42"></a><span id="l18.42">         } else {</span>
<a href="#l18.43"></a><span id="l18.43">             // move the mouse a bit before starting the drag session</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineminus">-            if (x*x + y*y &gt; 9) {</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineplus">+            if (x * x + y * y &gt; 9) {</span>
<a href="#l18.46"></a><span id="l18.46">                 window.addEventListener(&quot;mouseout&quot;, TodayPane.stopSwitching, false);</span>
<a href="#l18.47"></a><span id="l18.47">                 TodayPane.minidayDrag.session = true;</span>
<a href="#l18.48"></a><span id="l18.48">                 let dragCenterImage = document.getElementById(&quot;dragCenter-image&quot;);</span>
<a href="#l18.49"></a><span id="l18.49">                 dragCenterImage.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l18.50"></a><span id="l18.50">                 // Move the starting point in the center so we have a fixed</span>
<a href="#l18.51"></a><span id="l18.51">                 // point where stopping the day switching while still dragging</span>
<a href="#l18.52"></a><span id="l18.52">                 let centerObj = dragCenterImage.boxObject;</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineminus">-                TodayPane.minidayDrag.startX = Math.floor(centerObj.x + centerObj.width/2);</span>
<a href="#l18.54"></a><span id="l18.54" class="difflineminus">-                TodayPane.minidayDrag.startY = Math.floor(centerObj.y + centerObj.height/2);</span>
<a href="#l18.55"></a><span id="l18.55" class="difflineplus">+                TodayPane.minidayDrag.startX = Math.floor(centerObj.x + centerObj.width / 2);</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineplus">+                TodayPane.minidayDrag.startY = Math.floor(centerObj.y + centerObj.height / 2);</span>
<a href="#l18.57"></a><span id="l18.57"> </span>
<a href="#l18.58"></a><span id="l18.58">                 TodayPane.updateAdvanceTimer();</span>
<a href="#l18.59"></a><span id="l18.59">             }</span>
<a href="#l18.60"></a><span id="l18.60">         }</span>
<a href="#l18.61"></a><span id="l18.61">     },</span>
<a href="#l18.62"></a><span id="l18.62"> </span>
<a href="#l18.63"></a><span id="l18.63">     /**</span>
<a href="#l18.64"></a><span id="l18.64">      * Figure out the days switching speed according to the position (when</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-list-tree.xml</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-list-tree.xml</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -952,17 +952,17 @@</span>
<a href="#l19.4"></a><span id="l19.4">       &lt;method name=&quot;cycleCell&quot;&gt;</span>
<a href="#l19.5"></a><span id="l19.5">         &lt;parameter name=&quot;aRow&quot;/&gt;</span>
<a href="#l19.6"></a><span id="l19.6">         &lt;parameter name=&quot;aCol&quot;/&gt;</span>
<a href="#l19.7"></a><span id="l19.7">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l19.8"></a><span id="l19.8">           let calendar = this.getCalendar(aRow);</span>
<a href="#l19.9"></a><span id="l19.9">           if (this.mCycleCalendarFlag[calendar.id]) {</span>
<a href="#l19.10"></a><span id="l19.10">               delete this.mCycleCalendarFlag[calendar.id];</span>
<a href="#l19.11"></a><span id="l19.11">           } else {</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-              this.mCycleCalendarFlag[calendar.id]=calendar;</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+              this.mCycleCalendarFlag[calendar.id] = calendar;</span>
<a href="#l19.14"></a><span id="l19.14">           }</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16">           if (this.mCycleTimer) {</span>
<a href="#l19.17"></a><span id="l19.17">               clearTimeout(this.mCycleTimer);</span>
<a href="#l19.18"></a><span id="l19.18">           }</span>
<a href="#l19.19"></a><span id="l19.19">           this.treebox.invalidateRow(aRow);</span>
<a href="#l19.20"></a><span id="l19.20">           this.mCycleTimer = setTimeout(this.cycleCellCommit.bind(this), 200);</span>
<a href="#l19.21"></a><span id="l19.21">         ]]&gt;&lt;/body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/base/content/widgets/calendar-widgets.xml</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -406,17 +406,17 @@</span>
<a href="#l20.4"></a><span id="l20.4">                         if (this.getAttribute(&quot;collapsedinmodes&quot;) == &quot;,&quot;) {</span>
<a href="#l20.5"></a><span id="l20.5">                             collapsedModes.splice(0, 2);</span>
<a href="#l20.6"></a><span id="l20.6">                         }</span>
<a href="#l20.7"></a><span id="l20.7">                     }</span>
<a href="#l20.8"></a><span id="l20.8">                 } else {</span>
<a href="#l20.9"></a><span id="l20.9">                     if (modeIndex &gt; -1) {</span>
<a href="#l20.10"></a><span id="l20.10">                         collapsedModes.splice(modeIndex, 1);</span>
<a href="#l20.11"></a><span id="l20.11">                         if (collapsedModes.join(&quot;,&quot;) == &quot;&quot;) {</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-                            collapsedModes[0]=&quot;,&quot;;</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+                            collapsedModes[0] = &quot;,&quot;;</span>
<a href="#l20.14"></a><span id="l20.14">                         }</span>
<a href="#l20.15"></a><span id="l20.15">                     }</span>
<a href="#l20.16"></a><span id="l20.16">                 }</span>
<a href="#l20.17"></a><span id="l20.17">                 this.setAttribute(&quot;collapsedinmodes&quot;, collapsedModes.join(&quot;,&quot;));</span>
<a href="#l20.18"></a><span id="l20.18">                 var id = this.getAttribute(&quot;id&quot;);</span>
<a href="#l20.19"></a><span id="l20.19">                 if (id) {</span>
<a href="#l20.20"></a><span id="l20.20">                     document.persist(id, &quot;collapsedinmodes&quot;);</span>
<a href="#l20.21"></a><span id="l20.21">                 }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -1110,17 +1110,17 @@</span>
<a href="#l21.4"></a><span id="l21.4">          ]]&gt;&lt;/body&gt;</span>
<a href="#l21.5"></a><span id="l21.5">       &lt;/method&gt;</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7">       &lt;method name=&quot;_getStartDate&quot;&gt;</span>
<a href="#l21.8"></a><span id="l21.8">         &lt;parameter name=&quot;aMainDate&quot;/&gt;</span>
<a href="#l21.9"></a><span id="l21.9">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l21.10"></a><span id="l21.10">           var date = new Date(aMainDate);</span>
<a href="#l21.11"></a><span id="l21.11">           var firstWeekday = (7 + aMainDate.getDay() - this.weekStart) % 7;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-          date.setDate(date.getDate()-firstWeekday);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+          date.setDate(date.getDate() - firstWeekday);</span>
<a href="#l21.14"></a><span id="l21.14">           return date;</span>
<a href="#l21.15"></a><span id="l21.15">         ]]&gt;&lt;/body&gt;</span>
<a href="#l21.16"></a><span id="l21.16">       &lt;/method&gt;</span>
<a href="#l21.17"></a><span id="l21.17"> </span>
<a href="#l21.18"></a><span id="l21.18">       &lt;method name=&quot;_getEndDate&quot;&gt;</span>
<a href="#l21.19"></a><span id="l21.19">         &lt;parameter name=&quot;aMainDate&quot;/&gt;</span>
<a href="#l21.20"></a><span id="l21.20">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l21.21"></a><span id="l21.21">           var date = this._getStartDate(aMainDate);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/base/modules/calAuthUtils.jsm</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/base/modules/calAuthUtils.jsm</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -181,26 +181,27 @@ cal.auth.Prompt.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">         let logins = Services.logins.findLogins({}, aPasswordRealm.prePath, null, aPasswordRealm.realm);</span>
<a href="#l22.6"></a><span id="l22.6">         if (logins.length) {</span>
<a href="#l22.7"></a><span id="l22.7">             username = logins[0].username;</span>
<a href="#l22.8"></a><span id="l22.8">             password = logins[0].password;</span>
<a href="#l22.9"></a><span id="l22.9">             found = true;</span>
<a href="#l22.10"></a><span id="l22.10">         }</span>
<a href="#l22.11"></a><span id="l22.11">         if (found) {</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-            let keyStr = aPasswordRealm.prePath +&quot;:&quot; + aPasswordRealm.realm;</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+            let keyStr = aPasswordRealm.prePath + &quot;:&quot; + aPasswordRealm.realm;</span>
<a href="#l22.14"></a><span id="l22.14">             let now = new Date();</span>
<a href="#l22.15"></a><span id="l22.15">             // Remove the saved password if it was already returned less</span>
<a href="#l22.16"></a><span id="l22.16">             // than 60 seconds ago. The reason for the timestamp check is that</span>
<a href="#l22.17"></a><span id="l22.17">             // nsIHttpChannel can call the nsIAuthPrompt2 interface</span>
<a href="#l22.18"></a><span id="l22.18">             // again in some situation. ie: When using Digest auth token</span>
<a href="#l22.19"></a><span id="l22.19">             // expires.</span>
<a href="#l22.20"></a><span id="l22.20">             if (this.mReturnedLogins[keyStr] &amp;&amp;</span>
<a href="#l22.21"></a><span id="l22.21">                 now.getTime() - this.mReturnedLogins[keyStr].getTime() &lt; 60000) {</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineminus">-                cal.LOG(&quot;Credentials removed for: user=&quot; + username + &quot;, host=&quot;+aPasswordRealm.prePath+&quot;, realm=&quot;+aPasswordRealm.realm);</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineplus">+                cal.LOG(&quot;Credentials removed for: user=&quot; + username + &quot;, host=&quot; + aPasswordRealm.prePath + &quot;, realm=&quot; + aPasswordRealm.realm)</span>
<a href="#l22.24"></a><span id="l22.24" class="difflineplus">+;</span>
<a href="#l22.25"></a><span id="l22.25">                 delete this.mReturnedLogins[keyStr];</span>
<a href="#l22.26"></a><span id="l22.26">                 cal.auth.passwordManagerRemove(username,</span>
<a href="#l22.27"></a><span id="l22.27">                                                aPasswordRealm.prePath,</span>
<a href="#l22.28"></a><span id="l22.28">                                                aPasswordRealm.realm);</span>
<a href="#l22.29"></a><span id="l22.29">                 return {found: false, username: username};</span>
<a href="#l22.30"></a><span id="l22.30">             }</span>
<a href="#l22.31"></a><span id="l22.31">             else {</span>
<a href="#l22.32"></a><span id="l22.32">                 this.mReturnedLogins[keyStr] = now;</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineat">@@ -279,17 +280,17 @@ cal.auth.Prompt.prototype = {</span>
<a href="#l22.34"></a><span id="l22.34">                                      aCallback,  // nsIAuthPromptCallback</span>
<a href="#l22.35"></a><span id="l22.35">                                      aContext,   // nsISupports</span>
<a href="#l22.36"></a><span id="l22.36">                                      aLevel,     // PRUint32</span>
<a href="#l22.37"></a><span id="l22.37">                                      aAuthInfo   // nsIAuthInformation</span>
<a href="#l22.38"></a><span id="l22.38">                                 ) {</span>
<a href="#l22.39"></a><span id="l22.39">         var self = this;</span>
<a href="#l22.40"></a><span id="l22.40">         let promptlistener = {</span>
<a href="#l22.41"></a><span id="l22.41">             onPromptStart: function() {</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineminus">-                res=self.promptAuth(aChannel, aLevel, aAuthInfo);</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineplus">+                res = self.promptAuth(aChannel, aLevel, aAuthInfo);</span>
<a href="#l22.44"></a><span id="l22.44"> </span>
<a href="#l22.45"></a><span id="l22.45">                 if (res) {</span>
<a href="#l22.46"></a><span id="l22.46">                     gAuthCache.setAuthInfo(hostKey, aAuthInfo);</span>
<a href="#l22.47"></a><span id="l22.47">                     this.onPromptAuthAvailable();</span>
<a href="#l22.48"></a><span id="l22.48">                     return true;</span>
<a href="#l22.49"></a><span id="l22.49">                 }</span>
<a href="#l22.50"></a><span id="l22.50"> </span>
<a href="#l22.51"></a><span id="l22.51">                 this.onPromptCanceled();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/base/modules/calExtract.jsm</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/base/modules/calExtract.jsm</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -102,17 +102,17 @@ Extractor.prototype = {</span>
<a href="#l23.4"></a><span id="l23.4">         for (let i = 0; i &lt; this.email.length; i++) {</span>
<a href="#l23.5"></a><span id="l23.5">             let ch = this.email.charCodeAt(i);</span>
<a href="#l23.6"></a><span id="l23.6">             if (ch &gt; 128) {</span>
<a href="#l23.7"></a><span id="l23.7">                 sum += ch;</span>
<a href="#l23.8"></a><span id="l23.8">                 cnt++;</span>
<a href="#l23.9"></a><span id="l23.9">             }</span>
<a href="#l23.10"></a><span id="l23.10">         }</span>
<a href="#l23.11"></a><span id="l23.11"> </span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-        let nonAscii = sum/cnt || 0;</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+        let nonAscii = sum / cnt || 0;</span>
<a href="#l23.14"></a><span id="l23.14">         cal.LOG(&quot;[calExtract] Average non-ascii charcode: &quot; + nonAscii);</span>
<a href="#l23.15"></a><span id="l23.15">         return nonAscii;</span>
<a href="#l23.16"></a><span id="l23.16">     },</span>
<a href="#l23.17"></a><span id="l23.17"> </span>
<a href="#l23.18"></a><span id="l23.18">     setLanguage: function setLanguage() {</span>
<a href="#l23.19"></a><span id="l23.19">         let path;</span>
<a href="#l23.20"></a><span id="l23.20"> </span>
<a href="#l23.21"></a><span id="l23.21">         if (this.fixedLang == true) {</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -192,17 +192,17 @@ Extractor.prototype = {</span>
<a href="#l23.23"></a><span id="l23.23">                     if (words[word].length &gt;= 2) {</span>
<a href="#l23.24"></a><span id="l23.24">                         total++;</span>
<a href="#l23.25"></a><span id="l23.25">                         if (sp.check(words[word])) {</span>
<a href="#l23.26"></a><span id="l23.26">                             correct++;</span>
<a href="#l23.27"></a><span id="l23.27">                         }</span>
<a href="#l23.28"></a><span id="l23.28">                     }</span>
<a href="#l23.29"></a><span id="l23.29">                 }</span>
<a href="#l23.30"></a><span id="l23.30"> </span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-                let percentage = correct/total * 100.0;</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+                let percentage = correct / total * 100.0;</span>
<a href="#l23.33"></a><span id="l23.33">                 cal.LOG(&quot;[calExtract] &quot; + dicts[dict] + &quot; dictionary matches &quot; +</span>
<a href="#l23.34"></a><span id="l23.34">                         percentage + &quot;% of words&quot;);</span>
<a href="#l23.35"></a><span id="l23.35"> </span>
<a href="#l23.36"></a><span id="l23.36">                 if (percentage &gt; 50.0 &amp;&amp; percentage &gt; most) {</span>
<a href="#l23.37"></a><span id="l23.37">                     mostLocale = patterns;</span>
<a href="#l23.38"></a><span id="l23.38">                     most = percentage;</span>
<a href="#l23.39"></a><span id="l23.39">                 }</span>
<a href="#l23.40"></a><span id="l23.40">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/base/modules/calProviderUtils.jsm</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/base/modules/calProviderUtils.jsm</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -319,17 +319,17 @@ cal.fromRFC3339 = function fromRFC3339(a</span>
<a href="#l24.4"></a><span id="l24.4"> </span>
<a href="#l24.5"></a><span id="l24.5">     var matches = re.exec(aStr);</span>
<a href="#l24.6"></a><span id="l24.6"> </span>
<a href="#l24.7"></a><span id="l24.7">     if (!matches) {</span>
<a href="#l24.8"></a><span id="l24.8">         return null;</span>
<a href="#l24.9"></a><span id="l24.9">     }</span>
<a href="#l24.10"></a><span id="l24.10"> </span>
<a href="#l24.11"></a><span id="l24.11">     // Set usual date components</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    dateTime.isDate = (matches[4]==null);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+    dateTime.isDate = (matches[4] == null);</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15">     dateTime.year = matches[1];</span>
<a href="#l24.16"></a><span id="l24.16">     dateTime.month = matches[2] - 1; // Jan is 0</span>
<a href="#l24.17"></a><span id="l24.17">     dateTime.day = matches[3];</span>
<a href="#l24.18"></a><span id="l24.18"> </span>
<a href="#l24.19"></a><span id="l24.19">     if (!dateTime.isDate) {</span>
<a href="#l24.20"></a><span id="l24.20">         dateTime.hour = matches[5];</span>
<a href="#l24.21"></a><span id="l24.21">         dateTime.minute = matches[6];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/base/modules/calRecurrenceUtils.jsm</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -104,18 +104,18 @@ function recurrenceRule2String(recurrenc</span>
<a href="#l25.4"></a><span id="l25.4">                         if (days.length &gt; 1 &amp;&amp; i == (days.length - 2)) {</span>
<a href="#l25.5"></a><span id="l25.5">                             weekdays += ' ' + getRString(&quot;repeatDetailsAnd&quot;) + ' ';</span>
<a href="#l25.6"></a><span id="l25.6">                         } else if (i &lt; days.length - 1) {</span>
<a href="#l25.7"></a><span id="l25.7">                             weekdays += ', ';</span>
<a href="#l25.8"></a><span id="l25.8">                         }</span>
<a href="#l25.9"></a><span id="l25.9">                     }</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11">                     weeklyString = getRString(weeklyString, [weekdays]);</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-                    ruleString= PluralForm.get(rule.interval, weeklyString)</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-                                          .replace(&quot;#2&quot;, rule.interval);</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineplus">+                    ruleString = PluralForm.get(rule.interval, weeklyString)</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+                                           .replace(&quot;#2&quot;, rule.interval);</span>
<a href="#l25.16"></a><span id="l25.16"> </span>
<a href="#l25.17"></a><span id="l25.17">                 } else {</span>
<a href="#l25.18"></a><span id="l25.18">                     let weeklyString = getRString(&quot;weeklyEveryNth&quot;);</span>
<a href="#l25.19"></a><span id="l25.19">                     ruleString = PluralForm.get(rule.interval, weeklyString)</span>
<a href="#l25.20"></a><span id="l25.20">                                            .replace(&quot;#1&quot;, rule.interval);</span>
<a href="#l25.21"></a><span id="l25.21">                 }</span>
<a href="#l25.22"></a><span id="l25.22">             } else if (rule.type == 'MONTHLY') {</span>
<a href="#l25.23"></a><span id="l25.23">                 if (checkRecurrenceRule(rule, ['BYDAY'])) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/calendar/base/src/calCachedCalendar.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/calendar/base/src/calCachedCalendar.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -320,17 +320,17 @@ calCachedCalendar.prototype = {</span>
<a href="#l26.4"></a><span id="l26.4">         if (this.supportsChangeLog) {</span>
<a href="#l26.5"></a><span id="l26.5">             cal.LOG(&quot;[calCachedCalendar] Doing changelog based sync for calendar &quot; + this.uri.spec);</span>
<a href="#l26.6"></a><span id="l26.6">             var opListener = {</span>
<a href="#l26.7"></a><span id="l26.7">                 onResult: function(op, result) {</span>
<a href="#l26.8"></a><span id="l26.8">                     if (!op || !op.isPending) {</span>
<a href="#l26.9"></a><span id="l26.9">                         var status = (op ? op.status : Components.results.NS_OK);</span>
<a href="#l26.10"></a><span id="l26.10">                         if (!Components.isSuccessCode(status)) {</span>
<a href="#l26.11"></a><span id="l26.11">                             cal.ERROR(&quot;[calCachedCalendar] replay action failed: &quot; +</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-                                      (op ? op.id : &quot;&lt;unknown&gt;&quot;)+&quot;, uri=&quot; +</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+                                      (op ? op.id : &quot;&lt;unknown&gt;&quot;) + &quot;, uri=&quot; +</span>
<a href="#l26.14"></a><span id="l26.14">                                       this_.uri.spec + &quot;, result=&quot; +</span>
<a href="#l26.15"></a><span id="l26.15">                                       result + &quot;, op=&quot; + op);</span>
<a href="#l26.16"></a><span id="l26.16">                         }</span>
<a href="#l26.17"></a><span id="l26.17">                         cal.LOG(&quot;[calCachedCalendar] replayChangesOn finished.&quot;);</span>
<a href="#l26.18"></a><span id="l26.18">                         emptyQueue(status);</span>
<a href="#l26.19"></a><span id="l26.19">                     }</span>
<a href="#l26.20"></a><span id="l26.20">                 }</span>
<a href="#l26.21"></a><span id="l26.21">             };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -925,17 +925,17 @@ calMgrCalendarObserver.prototype = {</span>
<a href="#l27.4"></a><span id="l27.4">             errMsg = props.formatStringFromName(&quot;minorError&quot;, [this.calendar.name], 1);</span>
<a href="#l27.5"></a><span id="l27.5">         } else {</span>
<a href="#l27.6"></a><span id="l27.6">             // The calendar was already in readOnly mode, but still tell the user</span>
<a href="#l27.7"></a><span id="l27.7">             errMsg = props.formatStringFromName(&quot;stillReadOnlyError&quot;, [this.calendar.name], 1);</span>
<a href="#l27.8"></a><span id="l27.8">         }</span>
<a href="#l27.9"></a><span id="l27.9"> </span>
<a href="#l27.10"></a><span id="l27.10">         // When possible, change the error number into its name, to</span>
<a href="#l27.11"></a><span id="l27.11">         // make it slightly more readable.</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-        var errCode = &quot;0x&quot;+aErrNo.toString(16);</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+        var errCode = &quot;0x&quot; + aErrNo.toString(16);</span>
<a href="#l27.14"></a><span id="l27.14">         const calIErrors = Components.interfaces.calIErrors;</span>
<a href="#l27.15"></a><span id="l27.15">         // Check if it is worth enumerating all the error codes.</span>
<a href="#l27.16"></a><span id="l27.16">         if (aErrNo &amp; calIErrors.ERROR_BASE) {</span>
<a href="#l27.17"></a><span id="l27.17">             for (var err in calIErrors) {</span>
<a href="#l27.18"></a><span id="l27.18">                 if (calIErrors[err] == aErrNo) {</span>
<a href="#l27.19"></a><span id="l27.19">                     errCode = err;</span>
<a href="#l27.20"></a><span id="l27.20">                 }</span>
<a href="#l27.21"></a><span id="l27.21">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/calendar/base/src/calIcsParser.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/calendar/base/src/calIcsParser.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -154,17 +154,17 @@ calIcsParser.prototype = {</span>
<a href="#l28.4"></a><span id="l28.4"> </span>
<a href="#l28.5"></a><span id="l28.5">         // Some other apps (most notably, sunbird 0.2) happily splits an UTF8</span>
<a href="#l28.6"></a><span id="l28.6">         // character between the octets, and adds a newline and space between them,</span>
<a href="#l28.7"></a><span id="l28.7">         // for ICS folding. Unfold manually before parsing the file as utf8.This is</span>
<a href="#l28.8"></a><span id="l28.8">         // UTF8 safe, because octets with the first bit 0 are always one-octet</span>
<a href="#l28.9"></a><span id="l28.9">         // characters. So the space or the newline never can be part of a multi-byte</span>
<a href="#l28.10"></a><span id="l28.10">         // char.</span>
<a href="#l28.11"></a><span id="l28.11">         for (let i = octetArray.length - 2; i &gt;= 0; i--) {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-            if (octetArray[i] == &quot;\n&quot; &amp;&amp; octetArray[i+1] == &quot; &quot;) {</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+            if (octetArray[i] == &quot;\n&quot; &amp;&amp; octetArray[i + 1] == &quot; &quot;) {</span>
<a href="#l28.14"></a><span id="l28.14">                 octetArray = octetArray.splice(i, 2);</span>
<a href="#l28.15"></a><span id="l28.15">             }</span>
<a href="#l28.16"></a><span id="l28.16">         }</span>
<a href="#l28.17"></a><span id="l28.17"> </span>
<a href="#l28.18"></a><span id="l28.18">         // Interpret the byte-array as a UTF8-string, and convert into a</span>
<a href="#l28.19"></a><span id="l28.19">         // javascript string.</span>
<a href="#l28.20"></a><span id="l28.20">         let unicodeConverter = Components.classes[&quot;@mozilla.org/intl/scriptableunicodeconverter&quot;]</span>
<a href="#l28.21"></a><span id="l28.21">                                          .createInstance(Components.interfaces.nsIScriptableUnicodeConverter);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/calendar/base/src/calRecurrenceInfo.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -551,17 +551,17 @@ calRecurrenceInfo.prototype = {</span>
<a href="#l29.4"></a><span id="l29.4">                     // As decided in bug 734245, an EXDATE of type DATE shall also match a DTSTART of type DATE-TIME</span>
<a href="#l29.5"></a><span id="l29.5">                     let toRemove = [];</span>
<a href="#l29.6"></a><span id="l29.6">                     for (let occurenceKey in occurrenceMap) {</span>
<a href="#l29.7"></a><span id="l29.7">                         if (occurrenceMap[occurenceKey] &amp;&amp; occurenceKey.substring(0, 8) == dateToRemoveKey) {</span>
<a href="#l29.8"></a><span id="l29.8">                             dates = dates.filter(function (d) { return d.id.compare(dateToRemove) != 0; });</span>
<a href="#l29.9"></a><span id="l29.9">                             toRemove.push(occurenceKey)</span>
<a href="#l29.10"></a><span id="l29.10">                         }</span>
<a href="#l29.11"></a><span id="l29.11">                     }</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-                    for (let i=0; i &lt; toRemove.length; i++) {</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+                    for (let i = 0; i &lt; toRemove.length; i++) {</span>
<a href="#l29.14"></a><span id="l29.14">                         delete occurrenceMap[toRemove[i]];</span>
<a href="#l29.15"></a><span id="l29.15">                     }</span>
<a href="#l29.16"></a><span id="l29.16">                 } else if (occurrenceMap[dateToRemoveKey]) {</span>
<a href="#l29.17"></a><span id="l29.17">                     // TODO PERF Theoretically we could use occurrence map</span>
<a href="#l29.18"></a><span id="l29.18">                     // to construct the array of occurrences. Right now I'm</span>
<a href="#l29.19"></a><span id="l29.19">                     // just using the occurrence map to skip the filter</span>
<a href="#l29.20"></a><span id="l29.20">                     // action if the occurrence isn't there anyway.</span>
<a href="#l29.21"></a><span id="l29.21">                     dates = dates.filter(function (d) { return d.id.compare(dateToRemove) != 0; });</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -308,17 +308,17 @@ function guessSystemTimezone() {</span>
<a href="#l30.4"></a><span id="l30.4">     const offsetRegex = /[+-]\d{4}/;</span>
<a href="#l30.5"></a><span id="l30.5">     const offsetJun = dateJun.match(offsetRegex)[0];</span>
<a href="#l30.6"></a><span id="l30.6">     const offsetDec = dateDec.match(offsetRegex)[0];</span>
<a href="#l30.7"></a><span id="l30.7"> </span>
<a href="#l30.8"></a><span id="l30.8">     const tzSvc = cal.getTimezoneService();</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10">     var continent = &quot;Africa|America|Antarctica|Asia|Australia|Europe&quot;;</span>
<a href="#l30.11"></a><span id="l30.11">     var ocean = &quot;Arctic|Atlantic|Indian|Pacific&quot;;</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    var tzRegex = new RegExp(&quot;.*((?:&quot;+continent+&quot;|&quot;+ocean+&quot;)&quot;+</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    var tzRegex = new RegExp(&quot;.*((?:&quot; + continent + &quot;|&quot; + ocean + &quot;)&quot; +</span>
<a href="#l30.14"></a><span id="l30.14">                              &quot;(?:[/][-A-Z_a-z]+)+)&quot;);</span>
<a href="#l30.15"></a><span id="l30.15"> </span>
<a href="#l30.16"></a><span id="l30.16">     function getIcalString(component, property) {</span>
<a href="#l30.17"></a><span id="l30.17">         var prop = (component &amp;&amp; component.getFirstProperty(property));</span>
<a href="#l30.18"></a><span id="l30.18">         return (prop ? prop.valueAsIcalString : null);</span>
<a href="#l30.19"></a><span id="l30.19">     }</span>
<a href="#l30.20"></a><span id="l30.20"> </span>
<a href="#l30.21"></a><span id="l30.21">     // Check if Olson ZoneInfo timezone matches OS/JSDate timezone properties:</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineat">@@ -415,34 +415,34 @@ function guessSystemTimezone() {</span>
<a href="#l30.23"></a><span id="l30.23">         const afterAutumnShiftJSDate = new Date(autumnShiftJSDate);</span>
<a href="#l30.24"></a><span id="l30.24">         const beforeAutumnShiftJSDate = new Date(autumnShiftJSDate);</span>
<a href="#l30.25"></a><span id="l30.25">         const springShiftJSDate =</span>
<a href="#l30.26"></a><span id="l30.26">             findCurrentTimePeriod(tz, subComp, &quot;DAYLIGHT&quot;, true);</span>
<a href="#l30.27"></a><span id="l30.27">         const beforeSpringShiftJSDate = new Date(springShiftJSDate);</span>
<a href="#l30.28"></a><span id="l30.28">         const afterSpringShiftJSDate = new Date(springShiftJSDate);</span>
<a href="#l30.29"></a><span id="l30.29">         // Try with 6 HOURS fuzz in either direction, since OS and ZoneInfo</span>
<a href="#l30.30"></a><span id="l30.30">         // may disagree on the exact time of shift (midnight, 2am, 4am, etc).</span>
<a href="#l30.31"></a><span id="l30.31" class="difflineminus">-        beforeAutumnShiftJSDate.setHours(autumnShiftJSDate.getHours()-6);</span>
<a href="#l30.32"></a><span id="l30.32" class="difflineminus">-        afterAutumnShiftJSDate.setHours(autumnShiftJSDate.getHours()+6);</span>
<a href="#l30.33"></a><span id="l30.33" class="difflineminus">-        afterSpringShiftJSDate.setHours(afterSpringShiftJSDate.getHours()+6);</span>
<a href="#l30.34"></a><span id="l30.34" class="difflineminus">-        beforeSpringShiftJSDate.setHours(beforeSpringShiftJSDate.getHours()-6);</span>
<a href="#l30.35"></a><span id="l30.35" class="difflineplus">+        beforeAutumnShiftJSDate.setHours(autumnShiftJSDate.getHours() - 6);</span>
<a href="#l30.36"></a><span id="l30.36" class="difflineplus">+        afterAutumnShiftJSDate.setHours(autumnShiftJSDate.getHours() + 6);</span>
<a href="#l30.37"></a><span id="l30.37" class="difflineplus">+        afterSpringShiftJSDate.setHours(afterSpringShiftJSDate.getHours() + 6);</span>
<a href="#l30.38"></a><span id="l30.38" class="difflineplus">+        beforeSpringShiftJSDate.setHours(beforeSpringShiftJSDate.getHours() - 6);</span>
<a href="#l30.39"></a><span id="l30.39">         if ((beforeAutumnShiftJSDate.getTimezoneOffset() &lt;</span>
<a href="#l30.40"></a><span id="l30.40">              afterAutumnShiftJSDate.getTimezoneOffset()) &amp;&amp;</span>
<a href="#l30.41"></a><span id="l30.41">             (beforeSpringShiftJSDate.getTimezoneOffset() &gt;</span>
<a href="#l30.42"></a><span id="l30.42">              afterSpringShiftJSDate.getTimezoneOffset())) {</span>
<a href="#l30.43"></a><span id="l30.43">             return 2;</span>
<a href="#l30.44"></a><span id="l30.44">         }</span>
<a href="#l30.45"></a><span id="l30.45">         // Try with 7 DAYS fuzz in either direction, so if no other tz found,</span>
<a href="#l30.46"></a><span id="l30.46">         // will have a nearby tz that disagrees only on the weekday of shift</span>
<a href="#l30.47"></a><span id="l30.47">         // (sunday vs. friday vs. calendar day), or off by exactly one week,</span>
<a href="#l30.48"></a><span id="l30.48">         // (e.g., needed to guess Africa/Cairo on w2k in 2006).</span>
<a href="#l30.49"></a><span id="l30.49" class="difflineminus">-        beforeAutumnShiftJSDate.setDate(autumnShiftJSDate.getDate()-7);</span>
<a href="#l30.50"></a><span id="l30.50" class="difflineminus">-        afterAutumnShiftJSDate.setDate(autumnShiftJSDate.getDate()+7);</span>
<a href="#l30.51"></a><span id="l30.51" class="difflineminus">-        afterSpringShiftJSDate.setDate(afterSpringShiftJSDate.getDate()+7);</span>
<a href="#l30.52"></a><span id="l30.52" class="difflineminus">-        beforeSpringShiftJSDate.setDate(beforeSpringShiftJSDate.getDate()-7);</span>
<a href="#l30.53"></a><span id="l30.53" class="difflineplus">+        beforeAutumnShiftJSDate.setDate(autumnShiftJSDate.getDate() - 7);</span>
<a href="#l30.54"></a><span id="l30.54" class="difflineplus">+        afterAutumnShiftJSDate.setDate(autumnShiftJSDate.getDate() + 7);</span>
<a href="#l30.55"></a><span id="l30.55" class="difflineplus">+        afterSpringShiftJSDate.setDate(afterSpringShiftJSDate.getDate() + 7);</span>
<a href="#l30.56"></a><span id="l30.56" class="difflineplus">+        beforeSpringShiftJSDate.setDate(beforeSpringShiftJSDate.getDate() - 7);</span>
<a href="#l30.57"></a><span id="l30.57">         if ((beforeAutumnShiftJSDate.getTimezoneOffset() &lt;</span>
<a href="#l30.58"></a><span id="l30.58">              afterAutumnShiftJSDate.getTimezoneOffset()) &amp;&amp;</span>
<a href="#l30.59"></a><span id="l30.59">             (beforeSpringShiftJSDate.getTimezoneOffset() &gt;</span>
<a href="#l30.60"></a><span id="l30.60">              afterSpringShiftJSDate.getTimezoneOffset())) {</span>
<a href="#l30.61"></a><span id="l30.61">             return 1;</span>
<a href="#l30.62"></a><span id="l30.62">         }</span>
<a href="#l30.63"></a><span id="l30.63">         // no match</span>
<a href="#l30.64"></a><span id="l30.64">         return 0;</span>
<a href="#l30.65"></a><span id="l30.65" class="difflineat">@@ -510,32 +510,32 @@ function guessSystemTimezone() {</span>
<a href="#l30.66"></a><span id="l30.66"> </span>
<a href="#l30.67"></a><span id="l30.67">     function environmentVariableValue(varName) {</span>
<a href="#l30.68"></a><span id="l30.68">         let envSvc = Components.classes[&quot;@mozilla.org/process/environment;1&quot;]</span>
<a href="#l30.69"></a><span id="l30.69">                                 .getService(Components.interfaces.nsIEnvironment);</span>
<a href="#l30.70"></a><span id="l30.70">         let value = envSvc.get(varName);</span>
<a href="#l30.71"></a><span id="l30.71">         if (!value || !value.match(tzRegex)) {</span>
<a href="#l30.72"></a><span id="l30.72">             return &quot;&quot;;</span>
<a href="#l30.73"></a><span id="l30.73">         }</span>
<a href="#l30.74"></a><span id="l30.74" class="difflineminus">-        return varName+&quot;=&quot;+value;</span>
<a href="#l30.75"></a><span id="l30.75" class="difflineplus">+        return varName + &quot;=&quot; + value;</span>
<a href="#l30.76"></a><span id="l30.76">     }</span>
<a href="#l30.77"></a><span id="l30.77"> </span>
<a href="#l30.78"></a><span id="l30.78">     function symbolicLinkTarget(filepath) {</span>
<a href="#l30.79"></a><span id="l30.79">         try {</span>
<a href="#l30.80"></a><span id="l30.80">             let file = Components.classes[&quot;@mozilla.org/file/local;1&quot;]</span>
<a href="#l30.81"></a><span id="l30.81">                                  .createInstance(Components.interfaces.nsILocalFile);</span>
<a href="#l30.82"></a><span id="l30.82">             file.initWithPath(filepath);</span>
<a href="#l30.83"></a><span id="l30.83">             file.QueryInterface(Components.interfaces.nsIFile);</span>
<a href="#l30.84"></a><span id="l30.84">             if (!file.exists() || !file.isSymlink() || !file.target.match(tzRegex)) {</span>
<a href="#l30.85"></a><span id="l30.85">                 return &quot;&quot;;</span>
<a href="#l30.86"></a><span id="l30.86">             }</span>
<a href="#l30.87"></a><span id="l30.87"> </span>
<a href="#l30.88"></a><span id="l30.88" class="difflineminus">-            return filepath +&quot; -&gt; &quot;+file.target;</span>
<a href="#l30.89"></a><span id="l30.89" class="difflineplus">+            return filepath + &quot; -&gt; &quot; + file.target;</span>
<a href="#l30.90"></a><span id="l30.90">         } catch (ex) {</span>
<a href="#l30.91"></a><span id="l30.91" class="difflineminus">-            Components.utils.reportError(filepath+&quot;: &quot;+ex);</span>
<a href="#l30.92"></a><span id="l30.92" class="difflineplus">+            Components.utils.reportError(filepath + &quot;: &quot; + ex);</span>
<a href="#l30.93"></a><span id="l30.93">             return &quot;&quot;;</span>
<a href="#l30.94"></a><span id="l30.94">         }</span>
<a href="#l30.95"></a><span id="l30.95">     }</span>
<a href="#l30.96"></a><span id="l30.96"> </span>
<a href="#l30.97"></a><span id="l30.97">     function fileFirstZoneLineString(filepath) {</span>
<a href="#l30.98"></a><span id="l30.98">         // return first line of file that matches tzRegex (ZoneInfo id),</span>
<a href="#l30.99"></a><span id="l30.99">         // or &quot;&quot; if no file or no matching line.</span>
<a href="#l30.100"></a><span id="l30.100">         try {</span>
<a href="#l30.101"></a><span id="l30.101" class="difflineat">@@ -551,25 +551,25 @@ function guessSystemTimezone() {</span>
<a href="#l30.102"></a><span id="l30.102">             const PR_RDONLY = 0x1;</span>
<a href="#l30.103"></a><span id="l30.103">             fileInstream.init(file, PR_RDONLY, 0, 0);</span>
<a href="#l30.104"></a><span id="l30.104">             fileInstream.QueryInterface(Components.interfaces.nsILineInputStream);</span>
<a href="#l30.105"></a><span id="l30.105">             try {</span>
<a href="#l30.106"></a><span id="l30.106">                 let line = {}, hasMore = true, MAXLINES = 10;</span>
<a href="#l30.107"></a><span id="l30.107">                 for (let i = 0; hasMore &amp;&amp; i &lt; MAXLINES; i++) {</span>
<a href="#l30.108"></a><span id="l30.108">                     hasMore = fileInstream.readLine(line);</span>
<a href="#l30.109"></a><span id="l30.109">                     if (line.value &amp;&amp; line.value.match(tzRegex)) {</span>
<a href="#l30.110"></a><span id="l30.110" class="difflineminus">-                        return filepath+&quot;: &quot;+line.value;</span>
<a href="#l30.111"></a><span id="l30.111" class="difflineplus">+                        return filepath + &quot;: &quot; + line.value;</span>
<a href="#l30.112"></a><span id="l30.112">                     }</span>
<a href="#l30.113"></a><span id="l30.113">                 }</span>
<a href="#l30.114"></a><span id="l30.114">                 return &quot;&quot;; // not found</span>
<a href="#l30.115"></a><span id="l30.115">             } finally {</span>
<a href="#l30.116"></a><span id="l30.116">                 fileInstream.close();</span>
<a href="#l30.117"></a><span id="l30.117">             }</span>
<a href="#l30.118"></a><span id="l30.118">         } catch (ex) {</span>
<a href="#l30.119"></a><span id="l30.119" class="difflineminus">-            Components.utils.reportError(filepath+&quot;: &quot;+ex);</span>
<a href="#l30.120"></a><span id="l30.120" class="difflineplus">+            Components.utils.reportError(filepath + &quot;: &quot; + ex);</span>
<a href="#l30.121"></a><span id="l30.121">             return &quot;&quot;;</span>
<a href="#l30.122"></a><span id="l30.122">         }</span>
<a href="#l30.123"></a><span id="l30.123">     }</span>
<a href="#l30.124"></a><span id="l30.124"> </span>
<a href="#l30.125"></a><span id="l30.125">     function weekday(icsDate, tz) {</span>
<a href="#l30.126"></a><span id="l30.126">         let calDate = cal.createDateTime(icsDate);</span>
<a href="#l30.127"></a><span id="l30.127">         calDate.timezone = tz;</span>
<a href="#l30.128"></a><span id="l30.128">         return cal.dateTimeToJsDate(calDate).toLocaleFormat(&quot;%a&quot;);</span>
<a href="#l30.129"></a><span id="l30.129" class="difflineat">@@ -724,17 +724,17 @@ function guessSystemTimezone() {</span>
<a href="#l30.130"></a><span id="l30.130">                     }</span>
<a href="#l30.131"></a><span id="l30.131">                     break;</span>
<a href="#l30.132"></a><span id="l30.132">                 case 3:</span>
<a href="#l30.133"></a><span id="l30.133">                     return tzId;</span>
<a href="#l30.134"></a><span id="l30.134">                 }</span>
<a href="#l30.135"></a><span id="l30.135">             } catch (ex) {</span>
<a href="#l30.136"></a><span id="l30.136">                 let errMsg = calProperties.formatStringFromName(</span>
<a href="#l30.137"></a><span id="l30.137">                     &quot;SkippingLocaleTimezone&quot;, [bareTZId], 1);</span>
<a href="#l30.138"></a><span id="l30.138" class="difflineminus">-                Components.utils.reportError(errMsg+&quot; &quot;+ex);</span>
<a href="#l30.139"></a><span id="l30.139" class="difflineplus">+                Components.utils.reportError(errMsg + &quot; &quot; + ex);</span>
<a href="#l30.140"></a><span id="l30.140">             }</span>
<a href="#l30.141"></a><span id="l30.141">         }</span>
<a href="#l30.142"></a><span id="l30.142">     } catch (ex) { // Oh well, this didn't work, next option...</span>
<a href="#l30.143"></a><span id="l30.143">         Components.utils.reportError(ex);</span>
<a href="#l30.144"></a><span id="l30.144">     }</span>
<a href="#l30.145"></a><span id="l30.145"> </span>
<a href="#l30.146"></a><span id="l30.146">     // Third, try all known timezones.</span>
<a href="#l30.147"></a><span id="l30.147">     const tzIDs = tzSvc.timezoneIds;</span>
<a href="#l30.148"></a><span id="l30.148" class="difflineat">@@ -777,34 +777,34 @@ function guessSystemTimezone() {</span>
<a href="#l30.149"></a><span id="l30.149">             var warningDetail;</span>
<a href="#l30.150"></a><span id="l30.150">             if (probableTZScore == 1) {</span>
<a href="#l30.151"></a><span id="l30.151">                 // score 1 means has daylight time,</span>
<a href="#l30.152"></a><span id="l30.152">                 // but transitions start on different weekday from os timezone.</span>
<a href="#l30.153"></a><span id="l30.153">                 var standardStart = getIcalString(standard, &quot;DTSTART&quot;);</span>
<a href="#l30.154"></a><span id="l30.154">                 var standardStartWeekday = weekday(standardStart, tz);</span>
<a href="#l30.155"></a><span id="l30.155">                 var standardRule = getIcalString(standard, &quot;RRULE&quot;);</span>
<a href="#l30.156"></a><span id="l30.156">                 var standardText =</span>
<a href="#l30.157"></a><span id="l30.157" class="difflineminus">-                    (&quot;  Standard: &quot;+standardStart+&quot; &quot;+standardStartWeekday+&quot;\n&quot;+</span>
<a href="#l30.158"></a><span id="l30.158" class="difflineminus">-                     &quot;            &quot;+standardRule+&quot;\n&quot;);</span>
<a href="#l30.159"></a><span id="l30.159" class="difflineplus">+                    (&quot;  Standard: &quot; + standardStart + &quot; &quot; + standardStartWeekday + &quot;\n&quot; +</span>
<a href="#l30.160"></a><span id="l30.160" class="difflineplus">+                     &quot;            &quot; + standardRule + &quot;\n&quot;);</span>
<a href="#l30.161"></a><span id="l30.161">                 var daylightStart = getIcalString(daylight, &quot;DTSTART&quot;);</span>
<a href="#l30.162"></a><span id="l30.162">                 var daylightStartWeekday = weekday(daylightStart, tz);</span>
<a href="#l30.163"></a><span id="l30.163">                 var daylightRule = getIcalString(daylight, &quot;RRULE&quot;);</span>
<a href="#l30.164"></a><span id="l30.164">                 var daylightText =</span>
<a href="#l30.165"></a><span id="l30.165" class="difflineminus">-                    (&quot;  Daylight: &quot;+daylightStart+&quot; &quot;+daylightStartWeekday+&quot;\n&quot;+</span>
<a href="#l30.166"></a><span id="l30.166" class="difflineminus">-                     &quot;            &quot;+daylightRule+&quot;\n&quot;);</span>
<a href="#l30.167"></a><span id="l30.167" class="difflineplus">+                    (&quot;  Daylight: &quot; + daylightStart + &quot; &quot; + daylightStartWeekday + &quot;\n&quot; +</span>
<a href="#l30.168"></a><span id="l30.168" class="difflineplus">+                     &quot;            &quot; + daylightRule + &quot;\n&quot;);</span>
<a href="#l30.169"></a><span id="l30.169">                 warningDetail =</span>
<a href="#l30.170"></a><span id="l30.170">                     ((standardStart &lt; daylightStart</span>
<a href="#l30.171"></a><span id="l30.171">                       ? standardText + daylightText</span>
<a href="#l30.172"></a><span id="l30.172" class="difflineminus">-                      : daylightText + standardText)+</span>
<a href="#l30.173"></a><span id="l30.173" class="difflineplus">+                      : daylightText + standardText) +</span>
<a href="#l30.174"></a><span id="l30.174">                      (calProperties.GetStringFromName(</span>
<a href="#l30.175"></a><span id="l30.175">                       &quot;TZAlmostMatchesOSDifferAtMostAWeek&quot;)));</span>
<a href="#l30.176"></a><span id="l30.176">             } else {</span>
<a href="#l30.177"></a><span id="l30.177">                 warningDetail = calProperties.GetStringFromName(&quot;TZSeemsToMatchOS&quot;);</span>
<a href="#l30.178"></a><span id="l30.178">             }</span>
<a href="#l30.179"></a><span id="l30.179" class="difflineminus">-            var offsetString = standardTZOffset+</span>
<a href="#l30.180"></a><span id="l30.180" class="difflineplus">+            var offsetString = standardTZOffset +</span>
<a href="#l30.181"></a><span id="l30.181">                                  (!daylightTZOffset ? &quot;&quot; : &quot;/&quot; + daylightTZOffset);</span>
<a href="#l30.182"></a><span id="l30.182">             var warningMsg = calProperties.formatStringFromName(&quot;WarningUsingGuessedTZ&quot;,</span>
<a href="#l30.183"></a><span id="l30.183">                               [tzId, offsetString, warningDetail, probableTZSource], 4);</span>
<a href="#l30.184"></a><span id="l30.184">             cal.WARN(warningMsg);</span>
<a href="#l30.185"></a><span id="l30.185">             break;</span>
<a href="#l30.186"></a><span id="l30.186">         }</span>
<a href="#l30.187"></a><span id="l30.187">     } catch (ex) { // don't abort if error occurs warning user</span>
<a href="#l30.188"></a><span id="l30.188">         Components.utils.reportError(ex);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/calendar/base/src/calWeekInfoService.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/calendar/base/src/calWeekInfoService.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -76,17 +76,17 @@ calWeekInfoService.prototype = {</span>
<a href="#l31.4"></a><span id="l31.4">             var lastYearDate = aDateTime.clone();</span>
<a href="#l31.5"></a><span id="l31.5">             lastYearDate.year -= 1;</span>
<a href="#l31.6"></a><span id="l31.6">             thisWeeksThursday += lastYearDate.endOfYear.yearday;</span>
<a href="#l31.7"></a><span id="l31.7">         } else if (thisWeeksThursday &gt; aDateTime.endOfYear.yearday) {</span>
<a href="#l31.8"></a><span id="l31.8">             // For the last few days of the year, we already are in week 1.</span>
<a href="#l31.9"></a><span id="l31.9">             thisWeeksThursday -= aDateTime.endOfYear.yearday;</span>
<a href="#l31.10"></a><span id="l31.10">         }</span>
<a href="#l31.11"></a><span id="l31.11"> </span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-        var weekNumber = Math.ceil(thisWeeksThursday/7);</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+        var weekNumber = Math.ceil(thisWeeksThursday / 7);</span>
<a href="#l31.14"></a><span id="l31.14">         return weekNumber;</span>
<a href="#l31.15"></a><span id="l31.15">     },</span>
<a href="#l31.16"></a><span id="l31.16"> </span>
<a href="#l31.17"></a><span id="l31.17">     /**</span>
<a href="#l31.18"></a><span id="l31.18">      * gets the first day of a week of a passed day under consideration</span>
<a href="#l31.19"></a><span id="l31.19">      * of the preference setting &quot;calendar.week.start&quot;</span>
<a href="#l31.20"></a><span id="l31.20">      *</span>
<a href="#l31.21"></a><span id="l31.21">      * @param aDate     a date time object</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/calendar/import-export/calOutlookCSVImportExport.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -150,17 +150,17 @@ calOutlookCSVImporter.prototype = {</span>
<a href="#l32.4"></a><span id="l32.4">         let i;</span>
<a href="#l32.5"></a><span id="l32.5">         let knownIndxs;</span>
<a href="#l32.6"></a><span id="l32.6">         for (i in locales) {</span>
<a href="#l32.7"></a><span id="l32.7">             locale = locales[i];</span>
<a href="#l32.8"></a><span id="l32.8">             knownIndxs = 0;</span>
<a href="#l32.9"></a><span id="l32.9">             args.titleIndex = 0;</span>
<a href="#l32.10"></a><span id="l32.10">             args.startDateIndex = 0;</span>
<a href="#l32.11"></a><span id="l32.11">             for (let i = 1; i &lt;= header.length; ++i) {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-                switch( header[i-1] ) {</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+                switch (header[i - 1]) {</span>
<a href="#l32.14"></a><span id="l32.14">                     case locale.headTitle: args.titleIndex = i; knownIndxs++; break;</span>
<a href="#l32.15"></a><span id="l32.15">                     case locale.headStartDate: args.startDateIndex = i; knownIndxs++; break;</span>
<a href="#l32.16"></a><span id="l32.16">                     case locale.headStartTime: args.startTimeIndex = i; knownIndxs++; break;</span>
<a href="#l32.17"></a><span id="l32.17">                     case locale.headEndDate: args.endDateIndex = i; knownIndxs++; break;</span>
<a href="#l32.18"></a><span id="l32.18">                     case locale.headEndTime: args.endTimeIndex = i; knownIndxs++; break;</span>
<a href="#l32.19"></a><span id="l32.19">                     case locale.headAllDayEvent: args.allDayIndex = i; knownIndxs++; break;</span>
<a href="#l32.20"></a><span id="l32.20">                     case locale.headAlarm: args.alarmIndex = i; knownIndxs++; break;</span>
<a href="#l32.21"></a><span id="l32.21">                     case locale.headAlarmDate: args.alarmDateIndex = i; knownIndxs++; break;</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineat">@@ -481,19 +481,19 @@ calOutlookCSVExporter.prototype = {</span>
<a href="#l32.23"></a><span id="l32.23">                 alarmDate = cal.alarms.calculateAlarmDate(item, alarms[0]);</span>
<a href="#l32.24"></a><span id="l32.24">             }</span>
<a href="#l32.25"></a><span id="l32.25">             line.push(alarmDate ? localeEn.valueTrue : localeEn.valueFalse);</span>
<a href="#l32.26"></a><span id="l32.26">             line.push(alarmDate ? dateString(alarmDate) : &quot;&quot;);</span>
<a href="#l32.27"></a><span id="l32.27">             line.push(alarmDate ? timeString(alarmDate) : &quot;&quot;);</span>
<a href="#l32.28"></a><span id="l32.28">             line.push(txtString(cal.categoriesArrayToString(item.getCategories({})))); // xxx todo: what's the correct way to encode ',' in csv?, how are multi-values expressed?</span>
<a href="#l32.29"></a><span id="l32.29">             line.push(txtString(item.getProperty(&quot;DESCRIPTION&quot;)));</span>
<a href="#l32.30"></a><span id="l32.30">             line.push(txtString(item.getProperty(&quot;LOCATION&quot;)));</span>
<a href="#l32.31"></a><span id="l32.31" class="difflineminus">-            line.push((item.privacy==&quot;PRIVATE&quot;) ? localeEn.valueTrue : localeEn.valueFalse);</span>
<a href="#l32.32"></a><span id="l32.32" class="difflineplus">+            line.push((item.privacy == &quot;PRIVATE&quot;) ? localeEn.valueTrue : localeEn.valueFalse);</span>
<a href="#l32.33"></a><span id="l32.33"> </span>
<a href="#l32.34"></a><span id="l32.34">             line = line.map(function(v) {</span>
<a href="#l32.35"></a><span id="l32.35">                 v = String(v).replace(/&quot;/g, '&quot;&quot;');</span>
<a href="#l32.36"></a><span id="l32.36" class="difflineminus">-                return '&quot;'+v+'&quot;';</span>
<a href="#l32.37"></a><span id="l32.37" class="difflineplus">+                return '&quot;' + v + '&quot;';</span>
<a href="#l32.38"></a><span id="l32.38">             })</span>
<a href="#l32.39"></a><span id="l32.39">             str = line.join(',') + exportLineEnding;</span>
<a href="#l32.40"></a><span id="l32.40">             aStream.write(str, str.length);</span>
<a href="#l32.41"></a><span id="l32.41">         }</span>
<a href="#l32.42"></a><span id="l32.42">     }</span>
<a href="#l32.43"></a><span id="l32.43"> };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavCalendar.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -433,29 +433,29 @@ calDavCalendar.prototype = {</span>
<a href="#l33.4"></a><span id="l33.4"> </span>
<a href="#l33.5"></a><span id="l33.5">     get calendarUri() {</span>
<a href="#l33.6"></a><span id="l33.6">         let calUri = this.mUri.clone();</span>
<a href="#l33.7"></a><span id="l33.7">         let parts = calUri.spec.split('?');</span>
<a href="#l33.8"></a><span id="l33.8">         if (parts.length &gt; 1) {</span>
<a href="#l33.9"></a><span id="l33.9">             calUri.spec = parts.shift();</span>
<a href="#l33.10"></a><span id="l33.10">             this.mUriParams = '?' + parts.join('?');</span>
<a href="#l33.11"></a><span id="l33.11">         }</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-        if (calUri.spec.charAt(calUri.spec.length-1) != '/') {</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+        if (calUri.spec.charAt(calUri.spec.length - 1) != '/') {</span>
<a href="#l33.14"></a><span id="l33.14">             calUri.spec += &quot;/&quot;;</span>
<a href="#l33.15"></a><span id="l33.15">         }</span>
<a href="#l33.16"></a><span id="l33.16">         return calUri;</span>
<a href="#l33.17"></a><span id="l33.17">     },</span>
<a href="#l33.18"></a><span id="l33.18"> </span>
<a href="#l33.19"></a><span id="l33.19">     setCalHomeSet: function caldav_setCalHomeSet(removeLastPathSegment) {</span>
<a href="#l33.20"></a><span id="l33.20">         if (removeLastPathSegment) {</span>
<a href="#l33.21"></a><span id="l33.21">             let calUri = this.mUri.clone();</span>
<a href="#l33.22"></a><span id="l33.22">             let split1 = calUri.spec.split('?');</span>
<a href="#l33.23"></a><span id="l33.23">             let baseUrl = split1[0];</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineminus">-            if (baseUrl.charAt(baseUrl.length-1) == '/') {</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineminus">-                baseUrl = baseUrl.substring(0, baseUrl.length-2);</span>
<a href="#l33.26"></a><span id="l33.26" class="difflineplus">+            if (baseUrl.charAt(baseUrl.length - 1) == '/') {</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineplus">+                baseUrl = baseUrl.substring(0, baseUrl.length - 2);</span>
<a href="#l33.28"></a><span id="l33.28">             }</span>
<a href="#l33.29"></a><span id="l33.29">             let split2 = baseUrl.split('/');</span>
<a href="#l33.30"></a><span id="l33.30">             split2.pop();</span>
<a href="#l33.31"></a><span id="l33.31">             calUri.spec = split2.join('/') + '/';</span>
<a href="#l33.32"></a><span id="l33.32">             this.mCalHomeSet = calUri;</span>
<a href="#l33.33"></a><span id="l33.33">         } else {</span>
<a href="#l33.34"></a><span id="l33.34">             this.mCalHomeSet = this.calendarUri;</span>
<a href="#l33.35"></a><span id="l33.35">         }</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineat">@@ -1178,18 +1178,18 @@ calDavCalendar.prototype = {</span>
<a href="#l33.37"></a><span id="l33.37">      * notifying the observers and listeners</span>
<a href="#l33.38"></a><span id="l33.38">      *</span>
<a href="#l33.39"></a><span id="l33.39">      * @param aChangeLogListener    Change log listener</span>
<a href="#l33.40"></a><span id="l33.40">      * @param calendarURI           URI of the calendar whose items just got</span>
<a href="#l33.41"></a><span id="l33.41">      *                              changed</span>
<a href="#l33.42"></a><span id="l33.42">      */</span>
<a href="#l33.43"></a><span id="l33.43">     finalizeUpdatedItems: function calDav_finalizeUpdatedItems(aChangeLogListener, calendarURI) {</span>
<a href="#l33.44"></a><span id="l33.44">         cal.LOG(&quot;aChangeLogListener=&quot; + aChangeLogListener + &quot;\n&quot; +</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-                &quot;calendarURI=&quot; + (calendarURI?calendarURI.spec:&quot;undefined&quot;) + &quot; \n&quot; +</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineminus">-                &quot;iscached=&quot; + this.isCached + &quot;\n&quot;+</span>
<a href="#l33.47"></a><span id="l33.47" class="difflineplus">+                &quot;calendarURI=&quot; + (calendarURI ? calendarURI.spec : &quot;undefined&quot;) + &quot; \n&quot; +</span>
<a href="#l33.48"></a><span id="l33.48" class="difflineplus">+                &quot;iscached=&quot; + this.isCached + &quot;\n&quot; +</span>
<a href="#l33.49"></a><span id="l33.49">                 &quot;this.mQueuedQueries.length=&quot; + this.mQueuedQueries.length);</span>
<a href="#l33.50"></a><span id="l33.50">         if (this.isCached) {</span>
<a href="#l33.51"></a><span id="l33.51">             if (aChangeLogListener) {</span>
<a href="#l33.52"></a><span id="l33.52">                 aChangeLogListener.onResult({ status: Components.results.NS_OK },</span>
<a href="#l33.53"></a><span id="l33.53">                                             Components.results.NS_OK);</span>
<a href="#l33.54"></a><span id="l33.54">             }</span>
<a href="#l33.55"></a><span id="l33.55">         } else {</span>
<a href="#l33.56"></a><span id="l33.56">             this.mObservers.notify(&quot;onLoad&quot;, [this]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/calendar/providers/caldav/calDavRequestHandlers.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/calendar/providers/caldav/calDavRequestHandlers.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -501,20 +501,20 @@ webDavSyncHandler.prototype = {</span>
<a href="#l34.4"></a><span id="l34.4"> </span>
<a href="#l34.5"></a><span id="l34.5">     },</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">     startElement: function wH_startElement(aUri, aLocalName, aQName, aAttributes) {</span>
<a href="#l34.8"></a><span id="l34.8">         switch (aLocalName) {</span>
<a href="#l34.9"></a><span id="l34.9">             case &quot;response&quot;: // WebDAV Sync draft 3</span>
<a href="#l34.10"></a><span id="l34.10">                 this.currentResponse = {};</span>
<a href="#l34.11"></a><span id="l34.11">                 this.tag = null</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-                this.isInPropStat=false;</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+                this.isInPropStat = false;</span>
<a href="#l34.14"></a><span id="l34.14">                 break;</span>
<a href="#l34.15"></a><span id="l34.15">             case &quot;propstat&quot;:</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-                this.isInPropStat=true;</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineplus">+                this.isInPropStat = true;</span>
<a href="#l34.18"></a><span id="l34.18">                 break;</span>
<a href="#l34.19"></a><span id="l34.19">             case &quot;status&quot;:</span>
<a href="#l34.20"></a><span id="l34.20">                 if (this.isInPropStat) {</span>
<a href="#l34.21"></a><span id="l34.21">                     this.tag = &quot;propstat_&quot; + aLocalName;</span>
<a href="#l34.22"></a><span id="l34.22">                 }</span>
<a href="#l34.23"></a><span id="l34.23">                 else {</span>
<a href="#l34.24"></a><span id="l34.24">                     this.tag = aLocalName;</span>
<a href="#l34.25"></a><span id="l34.25">                 }</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineat">@@ -617,17 +617,17 @@ webDavSyncHandler.prototype = {</span>
<a href="#l34.27"></a><span id="l34.27">                 } else {</span>
<a href="#l34.28"></a><span id="l34.28">                     cal.LOG(&quot;CalDAV: Unhandled response element, status: &quot; + r.status + &quot;, href: &quot; + r.href + &quot; contenttype:&quot; + r.getcontenttype);</span>
<a href="#l34.29"></a><span id="l34.29">                 }</span>
<a href="#l34.30"></a><span id="l34.30">                 break;</span>
<a href="#l34.31"></a><span id="l34.31">             case &quot;sync-token&quot;:</span>
<a href="#l34.32"></a><span id="l34.32">                 this.newSyncToken = this.currentResponse[this.tag];</span>
<a href="#l34.33"></a><span id="l34.33">                 break;</span>
<a href="#l34.34"></a><span id="l34.34">             case &quot;propstat&quot;:</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-                this.isInPropStat=false;</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineplus">+                this.isInPropStat = false;</span>
<a href="#l34.37"></a><span id="l34.37">                 break;</span>
<a href="#l34.38"></a><span id="l34.38">         }</span>
<a href="#l34.39"></a><span id="l34.39">         this.tag = null;</span>
<a href="#l34.40"></a><span id="l34.40">         if (this.calendar.verboseLogging()) {</span>
<a href="#l34.41"></a><span id="l34.41">             this.logXML += &quot;&lt;/&quot; + aQName + &quot;&gt;&quot;;</span>
<a href="#l34.42"></a><span id="l34.42">         }</span>
<a href="#l34.43"></a><span id="l34.43">     },</span>
<a href="#l34.44"></a><span id="l34.44"> </span>
<a href="#l34.45"></a><span id="l34.45" class="difflineat">@@ -859,20 +859,20 @@ multigetSyncHandler.prototype = {</span>
<a href="#l34.46"></a><span id="l34.46">         }</span>
<a href="#l34.47"></a><span id="l34.47">     },</span>
<a href="#l34.48"></a><span id="l34.48"> </span>
<a href="#l34.49"></a><span id="l34.49">     startElement: function mg_startElement(aUri, aLocalName, aQName, aAttributes) {</span>
<a href="#l34.50"></a><span id="l34.50">         switch (aLocalName) {</span>
<a href="#l34.51"></a><span id="l34.51">             case &quot;response&quot;:</span>
<a href="#l34.52"></a><span id="l34.52">                 this.currentResponse = {};</span>
<a href="#l34.53"></a><span id="l34.53">                 this.tag = null</span>
<a href="#l34.54"></a><span id="l34.54" class="difflineminus">-                this.isInPropStat=false;</span>
<a href="#l34.55"></a><span id="l34.55" class="difflineplus">+                this.isInPropStat = false;</span>
<a href="#l34.56"></a><span id="l34.56">                 break;</span>
<a href="#l34.57"></a><span id="l34.57">             case &quot;propstat&quot;:</span>
<a href="#l34.58"></a><span id="l34.58" class="difflineminus">-                this.isInPropStat=true;</span>
<a href="#l34.59"></a><span id="l34.59" class="difflineplus">+                this.isInPropStat = true;</span>
<a href="#l34.60"></a><span id="l34.60">                 break;</span>
<a href="#l34.61"></a><span id="l34.61">             case &quot;status&quot;:</span>
<a href="#l34.62"></a><span id="l34.62">                 if (this.isInPropStat) {</span>
<a href="#l34.63"></a><span id="l34.63">                     this.tag = &quot;propstat_&quot; + aLocalName;</span>
<a href="#l34.64"></a><span id="l34.64">                 }</span>
<a href="#l34.65"></a><span id="l34.65">                 else {</span>
<a href="#l34.66"></a><span id="l34.66">                     this.tag = aLocalName;</span>
<a href="#l34.67"></a><span id="l34.67">                 }</span>
<a href="#l34.68"></a><span id="l34.68" class="difflineat">@@ -932,17 +932,17 @@ multigetSyncHandler.prototype = {</span>
<a href="#l34.69"></a><span id="l34.69">                     }</span>
<a href="#l34.70"></a><span id="l34.70">                 } else {</span>
<a href="#l34.71"></a><span id="l34.71">                     cal.WARN(&quot;CalDAV: Unexpected response, status: &quot; +</span>
<a href="#l34.72"></a><span id="l34.72">                              r.status + &quot;, href: &quot; + r.href + &quot; calendar-data:\n&quot; + r.calendardata);</span>
<a href="#l34.73"></a><span id="l34.73">                     this.unhandledErrors++;</span>
<a href="#l34.74"></a><span id="l34.74">                 }</span>
<a href="#l34.75"></a><span id="l34.75">                 break;</span>
<a href="#l34.76"></a><span id="l34.76">             case &quot;propstat&quot;:</span>
<a href="#l34.77"></a><span id="l34.77" class="difflineminus">-                this.isInPropStat=false;</span>
<a href="#l34.78"></a><span id="l34.78" class="difflineplus">+                this.isInPropStat = false;</span>
<a href="#l34.79"></a><span id="l34.79">                 break;</span>
<a href="#l34.80"></a><span id="l34.80">         }</span>
<a href="#l34.81"></a><span id="l34.81">         this.tag = null;</span>
<a href="#l34.82"></a><span id="l34.82">         if (this.calendar.verboseLogging()) {</span>
<a href="#l34.83"></a><span id="l34.83">             this.logXML += &quot;&lt;/&quot; + aQName + &quot;&gt;&quot;;</span>
<a href="#l34.84"></a><span id="l34.84">         }</span>
<a href="#l34.85"></a><span id="l34.85">     },</span>
<a href="#l34.86"></a><span id="l34.86"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/calendar/providers/ics/calICSCalendar.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -276,17 +276,17 @@ calICSCalendar.prototype = {</span>
<a href="#l35.4"></a><span id="l35.4">                 try {</span>
<a href="#l35.5"></a><span id="l35.5">                     for (let item of parser_.getItems({})) {</span>
<a href="#l35.6"></a><span id="l35.6">                         this_.mMemoryCalendar.adoptItem(item, null);</span>
<a href="#l35.7"></a><span id="l35.7">                     }</span>
<a href="#l35.8"></a><span id="l35.8">                     this_.unmappedComponents = parser_.getComponents({});</span>
<a href="#l35.9"></a><span id="l35.9">                     this_.unmappedProperties = parser_.getProperties({});</span>
<a href="#l35.10"></a><span id="l35.10">                     cal.LOG(&quot;[calICSCalendar] Parsing ICS succeeded for &quot; + this_.uri.spec);</span>
<a href="#l35.11"></a><span id="l35.11">                 } catch (exc) {</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-                    cal.LOG(&quot;[calICSCalendar] Parsing ICS failed for &quot; + &quot;\nException: &quot;+ exc);</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+                    cal.LOG(&quot;[calICSCalendar] Parsing ICS failed for \nException: &quot; + exc);</span>
<a href="#l35.14"></a><span id="l35.14">                     this_.mObserver.onError(this_.superCalendar, exc.result, exc.toString());</span>
<a href="#l35.15"></a><span id="l35.15">                     this_.mObserver.onError(this_.superCalendar, calIErrors.READ_FAILED, &quot;&quot;);</span>
<a href="#l35.16"></a><span id="l35.16">                 }</span>
<a href="#l35.17"></a><span id="l35.17">                 this_.mObserver.onEndBatch();</span>
<a href="#l35.18"></a><span id="l35.18">                 this_.mObserver.onLoad(this_);</span>
<a href="#l35.19"></a><span id="l35.19"> </span>
<a href="#l35.20"></a><span id="l35.20">                 // Now that all items have been stuffed into the memory calendar</span>
<a href="#l35.21"></a><span id="l35.21">                 // we should add ourselves as observer. It is important that this</span>
<a href="#l35.22"></a><span id="l35.22" class="difflineat">@@ -437,17 +437,17 @@ calICSCalendar.prototype = {</span>
<a href="#l35.23"></a><span id="l35.23"> </span>
<a href="#l35.24"></a><span id="l35.24">         if ((httpChannel &amp;&amp; !requestSucceeded) ||</span>
<a href="#l35.25"></a><span id="l35.25">             (!httpChannel &amp;&amp; !Components.isSuccessCode(request.status))) {</span>
<a href="#l35.26"></a><span id="l35.26">             ctxt.mObserver.onError(this.superCalendar,</span>
<a href="#l35.27"></a><span id="l35.27">                                    Components.isSuccessCode(request.status)</span>
<a href="#l35.28"></a><span id="l35.28">                                    ? calIErrors.DAV_PUT_ERROR</span>
<a href="#l35.29"></a><span id="l35.29">                                    : request.status,</span>
<a href="#l35.30"></a><span id="l35.30">                                    &quot;Publishing the calendar file failed\n&quot; +</span>
<a href="#l35.31"></a><span id="l35.31" class="difflineminus">-                                       &quot;Status code: &quot;+request.status.toString(16)+&quot;\n&quot;);</span>
<a href="#l35.32"></a><span id="l35.32" class="difflineplus">+                                       &quot;Status code: &quot; + request.status.toString(16) + &quot;\n&quot;);</span>
<a href="#l35.33"></a><span id="l35.33">             ctxt.mObserver.onError(this.superCalendar, calIErrors.MODIFICATION_FAILED, &quot;&quot;);</span>
<a href="#l35.34"></a><span id="l35.34"> </span>
<a href="#l35.35"></a><span id="l35.35">             // the PUT has failed, refresh, and signal error to all modifying operations:</span>
<a href="#l35.36"></a><span id="l35.36">             this.forceRefresh();</span>
<a href="#l35.37"></a><span id="l35.37">             ctxt.unlock(calIErrors.MODIFICATION_FAILED);</span>
<a href="#l35.38"></a><span id="l35.38">             Services.startup.exitLastWindowClosingSurvivalArea();</span>
<a href="#l35.39"></a><span id="l35.39">             return;</span>
<a href="#l35.40"></a><span id="l35.40">         }</span>
<a href="#l35.41"></a><span id="l35.41" class="difflineat">@@ -637,17 +637,17 @@ calICSCalendar.prototype = {</span>
<a href="#l35.42"></a><span id="l35.42">      * @param aCallback</span>
<a href="#l35.43"></a><span id="l35.43">      *           Function that will be calles after the backup is finished.</span>
<a href="#l35.44"></a><span id="l35.44">      *           will be called in the original context in which makeBackup</span>
<a href="#l35.45"></a><span id="l35.45">      *           was called</span>
<a href="#l35.46"></a><span id="l35.46">      */</span>
<a href="#l35.47"></a><span id="l35.47">     makeBackup: function(aCallback) {</span>
<a href="#l35.48"></a><span id="l35.48">         // Uses |pseudoID|, an id of the calendar, defined below</span>
<a href="#l35.49"></a><span id="l35.49">         function makeName(type) {</span>
<a href="#l35.50"></a><span id="l35.50" class="difflineminus">-            return 'calBackupData_'+pseudoID+'_'+type+'.ics';</span>
<a href="#l35.51"></a><span id="l35.51" class="difflineplus">+            return &quot;calBackupData_&quot; + pseudoID + &quot;_&quot; + type + &quot;.ics&quot;;</span>
<a href="#l35.52"></a><span id="l35.52">         }</span>
<a href="#l35.53"></a><span id="l35.53"> </span>
<a href="#l35.54"></a><span id="l35.54">         // This is a bit messy. createUnique creates an empty file,</span>
<a href="#l35.55"></a><span id="l35.55">         // but we don't use that file. All we want is a filename, to be used</span>
<a href="#l35.56"></a><span id="l35.56">         // in the call to copyTo later. So we create a file, get the filename,</span>
<a href="#l35.57"></a><span id="l35.57">         // and never use the file again, but write over it.</span>
<a href="#l35.58"></a><span id="l35.58">         // Using createUnique anyway, because I don't feel like</span>
<a href="#l35.59"></a><span id="l35.59">         // re-implementing it</span>
<a href="#l35.60"></a><span id="l35.60" class="difflineat">@@ -666,17 +666,18 @@ calICSCalendar.prototype = {</span>
<a href="#l35.61"></a><span id="l35.61">             dailyBackupFile = null;</span>
<a href="#l35.62"></a><span id="l35.62"> </span>
<a href="#l35.63"></a><span id="l35.63">             return dailyBackupFileName;</span>
<a href="#l35.64"></a><span id="l35.64">         }</span>
<a href="#l35.65"></a><span id="l35.65"> </span>
<a href="#l35.66"></a><span id="l35.66">         function purgeBackupsByType(files, type) {</span>
<a href="#l35.67"></a><span id="l35.67">             // filter out backups of the type we care about.</span>
<a href="#l35.68"></a><span id="l35.68">             var filteredFiles = files.filter(</span>
<a href="#l35.69"></a><span id="l35.69" class="difflineminus">-                v =&gt; v.name.includes(&quot;calBackupData_&quot;+pseudoID+&quot;_&quot;+type));</span>
<a href="#l35.70"></a><span id="l35.70" class="difflineplus">+                v =&gt; v.name.includes(&quot;calBackupData_&quot; + pseudoID + &quot;_&quot; + type)</span>
<a href="#l35.71"></a><span id="l35.71" class="difflineplus">+            );</span>
<a href="#l35.72"></a><span id="l35.72">             // Sort by lastmodifed</span>
<a href="#l35.73"></a><span id="l35.73">             filteredFiles.sort(</span>
<a href="#l35.74"></a><span id="l35.74">                 function s(a, b) {</span>
<a href="#l35.75"></a><span id="l35.75">                     return (a.lastmodified - b.lastmodified);</span>
<a href="#l35.76"></a><span id="l35.76">                 });</span>
<a href="#l35.77"></a><span id="l35.77">             // And delete the oldest files, and keep the desired number of</span>
<a href="#l35.78"></a><span id="l35.78">             // old backups</span>
<a href="#l35.79"></a><span id="l35.79">             var i;</span>
<a href="#l35.80"></a><span id="l35.80" class="difflineat">@@ -768,17 +769,17 @@ calICSCalendar.prototype = {</span>
<a href="#l35.81"></a><span id="l35.81">         initialBackupFile.append(makeName('initial'));</span>
<a href="#l35.82"></a><span id="l35.82">         if (!initialBackupFile.exists()) {</span>
<a href="#l35.83"></a><span id="l35.83">             doInitialBackup = true;</span>
<a href="#l35.84"></a><span id="l35.84">         }</span>
<a href="#l35.85"></a><span id="l35.85"> </span>
<a href="#l35.86"></a><span id="l35.86">         var doDailyBackup = false;</span>
<a href="#l35.87"></a><span id="l35.87">         var backupTime = this.getProperty('backup-time2');</span>
<a href="#l35.88"></a><span id="l35.88">         if (!backupTime ||</span>
<a href="#l35.89"></a><span id="l35.89" class="difflineminus">-            (new Date().getTime() &gt; backupTime + backupDays*24*60*60*1000)) {</span>
<a href="#l35.90"></a><span id="l35.90" class="difflineplus">+            (new Date().getTime() &gt; backupTime + backupDays * 24 * 60 * 60 * 1000)) {</span>
<a href="#l35.91"></a><span id="l35.91">             // It's time do to a daily backup</span>
<a href="#l35.92"></a><span id="l35.92">             doDailyBackup = true;</span>
<a href="#l35.93"></a><span id="l35.93">             this.setProperty('backup-time2', new Date().getTime());</span>
<a href="#l35.94"></a><span id="l35.94">         }</span>
<a href="#l35.95"></a><span id="l35.95"> </span>
<a href="#l35.96"></a><span id="l35.96">         var dailyBackupFileName;</span>
<a href="#l35.97"></a><span id="l35.97">         if (doDailyBackup) {</span>
<a href="#l35.98"></a><span id="l35.98">             dailyBackupFileName = makeDailyFileName(backupDir);</span>
<a href="#l35.99"></a><span id="l35.99" class="difflineat">@@ -992,17 +993,17 @@ httpHooks.prototype = {</span>
<a href="#l35.100"></a><span id="l35.100">     },</span>
<a href="#l35.101"></a><span id="l35.101"> </span>
<a href="#l35.102"></a><span id="l35.102">     onBeforePut: function(aChannel) {</span>
<a href="#l35.103"></a><span id="l35.103">         if (this.mEtag) {</span>
<a href="#l35.104"></a><span id="l35.104">             var httpchannel = aChannel.QueryInterface(Components.interfaces.nsIHttpChannel);</span>
<a href="#l35.105"></a><span id="l35.105"> </span>
<a href="#l35.106"></a><span id="l35.106">             // Apache doesn't work correctly with if-match on a PUT method,</span>
<a href="#l35.107"></a><span id="l35.107">             // so use the webdav header</span>
<a href="#l35.108"></a><span id="l35.108" class="difflineminus">-            httpchannel.setRequestHeader(&quot;If&quot;, '(['+this.mEtag+'])', false);</span>
<a href="#l35.109"></a><span id="l35.109" class="difflineplus">+            httpchannel.setRequestHeader(&quot;If&quot;, '([' + this.mEtag + '])', false);</span>
<a href="#l35.110"></a><span id="l35.110">         }</span>
<a href="#l35.111"></a><span id="l35.111">         return true;</span>
<a href="#l35.112"></a><span id="l35.112">     },</span>
<a href="#l35.113"></a><span id="l35.113"> </span>
<a href="#l35.114"></a><span id="l35.114">     onAfterPut: function(aChannel, aRespFunc) {</span>
<a href="#l35.115"></a><span id="l35.115">         var httpchannel = aChannel.QueryInterface(Components.interfaces.nsIHttpChannel);</span>
<a href="#l35.116"></a><span id="l35.116">         try {</span>
<a href="#l35.117"></a><span id="l35.117">             this.mEtag = httpchannel.getResponseHeader(&quot;ETag&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -1126,25 +1126,25 @@ calStorageCalendar.prototype = {</span>
<a href="#l36.4"></a><span id="l36.4">             var floatingEventStart = &quot;event_start_tz = 'floating' AND event_start&quot;</span>
<a href="#l36.5"></a><span id="l36.5">             var nonFloatingEventStart = &quot;event_start_tz != 'floating' AND event_start&quot;</span>
<a href="#l36.6"></a><span id="l36.6">             var floatingEventEnd = &quot;event_end_tz = 'floating' AND event_end&quot;</span>
<a href="#l36.7"></a><span id="l36.7">             var nonFloatingEventEnd = &quot;event_end_tz != 'floating' AND event_end&quot;</span>
<a href="#l36.8"></a><span id="l36.8">             // The query needs to take both floating and non floating into account</span>
<a href="#l36.9"></a><span id="l36.9">             this.mSelectNonRecurringEventsByRange = this.mDB.createStatement(</span>
<a href="#l36.10"></a><span id="l36.10">                 &quot;SELECT * FROM cal_events &quot; +</span>
<a href="#l36.11"></a><span id="l36.11">                 &quot;WHERE &quot; +</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-                &quot; ((&quot;+floatingEventEnd+&quot; &gt; :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineminus">-                &quot;  (&quot;+nonFloatingEventEnd+&quot; &gt; :range_start) OR &quot; +</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineminus">-                &quot;  (((&quot;+floatingEventEnd+&quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineminus">-                &quot;    (&quot;+nonFloatingEventEnd+&quot; = :range_start)) AND &quot; +</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineminus">-                &quot;   ((&quot;+floatingEventStart+&quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineminus">-                &quot;    (&quot;+nonFloatingEventStart+&quot; = :range_start)))) &quot; +</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineplus">+                &quot; ((&quot; + floatingEventEnd + &quot; &gt; :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineplus">+                &quot;  (&quot; + nonFloatingEventEnd + &quot; &gt; :range_start) OR &quot; +</span>
<a href="#l36.20"></a><span id="l36.20" class="difflineplus">+                &quot;  (((&quot; + floatingEventEnd + &quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.21"></a><span id="l36.21" class="difflineplus">+                &quot;    (&quot; + nonFloatingEventEnd + &quot; = :range_start)) AND &quot; +</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineplus">+                &quot;   ((&quot; + floatingEventStart + &quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.23"></a><span id="l36.23" class="difflineplus">+                &quot;    (&quot; + nonFloatingEventStart + &quot; = :range_start)))) &quot; +</span>
<a href="#l36.24"></a><span id="l36.24">                 &quot; AND &quot; +</span>
<a href="#l36.25"></a><span id="l36.25" class="difflineminus">-                &quot;  ((&quot;+floatingEventStart+&quot; &lt; :range_end + :end_offset) OR &quot; +</span>
<a href="#l36.26"></a><span id="l36.26" class="difflineminus">-                &quot;   (&quot;+nonFloatingEventStart+&quot; &lt; :range_end)) &quot; +</span>
<a href="#l36.27"></a><span id="l36.27" class="difflineplus">+                &quot;  ((&quot;+ floatingEventStart + &quot; &lt; :range_end + :end_offset) OR &quot; +</span>
<a href="#l36.28"></a><span id="l36.28" class="difflineplus">+                &quot;   (&quot;+ nonFloatingEventStart + &quot; &lt; :range_end)) &quot; +</span>
<a href="#l36.29"></a><span id="l36.29">                 &quot; AND cal_id = :cal_id AND flags &amp; 16 == 0 AND recurrence_id IS NULL&quot; +</span>
<a href="#l36.30"></a><span id="l36.30">                 &quot; AND ((:offline_journal IS NULL &quot; +</span>
<a href="#l36.31"></a><span id="l36.31">                 &quot; AND  (offline_journal IS NULL &quot; +</span>
<a href="#l36.32"></a><span id="l36.32">                 &quot;  OR   offline_journal != &quot; + cICL.OFFLINE_FLAG_DELETED_RECORD + &quot;)) &quot; +</span>
<a href="#l36.33"></a><span id="l36.33">                 &quot;  OR (offline_journal == :offline_journal))&quot;</span>
<a href="#l36.34"></a><span id="l36.34">                 );</span>
<a href="#l36.35"></a><span id="l36.35"> </span>
<a href="#l36.36"></a><span id="l36.36">             //</span>
<a href="#l36.37"></a><span id="l36.37" class="difflineat">@@ -1158,34 +1158,34 @@ calStorageCalendar.prototype = {</span>
<a href="#l36.38"></a><span id="l36.38">             var floatingTodoDue = &quot;todo_due_tz = 'floating' AND todo_due&quot;;</span>
<a href="#l36.39"></a><span id="l36.39">             var nonFloatingTodoDue = &quot;todo_due_tz != 'floating' AND todo_due&quot;;</span>
<a href="#l36.40"></a><span id="l36.40">             var floatingCompleted = &quot;todo_completed_tz = 'floating' AND todo_completed&quot;;</span>
<a href="#l36.41"></a><span id="l36.41">             var nonFloatingCompleted = &quot;todo_completed_tz != 'floating' AND todo_completed&quot;;</span>
<a href="#l36.42"></a><span id="l36.42"> </span>
<a href="#l36.43"></a><span id="l36.43">             this.mSelectNonRecurringTodosByRange = this.mDB.createStatement(</span>
<a href="#l36.44"></a><span id="l36.44">                 &quot;SELECT * FROM cal_todos &quot; +</span>
<a href="#l36.45"></a><span id="l36.45">                 &quot;WHERE &quot; +</span>
<a href="#l36.46"></a><span id="l36.46" class="difflineminus">-                &quot;((((&quot;+floatingTodoDue+&quot; &gt; :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.47"></a><span id="l36.47" class="difflineminus">-                &quot;   (&quot;+nonFloatingTodoDue+&quot; &gt; :range_start)) AND &quot; +</span>
<a href="#l36.48"></a><span id="l36.48" class="difflineplus">+                &quot;((((&quot;+ floatingTodoDue + &quot; &gt; :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.49"></a><span id="l36.49" class="difflineplus">+                &quot;   (&quot;+ nonFloatingTodoDue + &quot; &gt; :range_start)) AND &quot; +</span>
<a href="#l36.50"></a><span id="l36.50">                 &quot;  ((todo_entry IS NULL) OR &quot; +</span>
<a href="#l36.51"></a><span id="l36.51" class="difflineminus">-                &quot;   ((&quot;+floatingTodoEntry+&quot; &lt; :range_end + :end_offset) OR &quot; +</span>
<a href="#l36.52"></a><span id="l36.52" class="difflineminus">-                &quot;    (&quot;+nonFloatingTodoEntry+&quot; &lt; :range_end)))) OR &quot; +</span>
<a href="#l36.53"></a><span id="l36.53" class="difflineminus">-                &quot; (((&quot;+floatingTodoDue+&quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.54"></a><span id="l36.54" class="difflineminus">-                &quot;   (&quot;+nonFloatingTodoDue+&quot; = :range_start)) AND &quot; +</span>
<a href="#l36.55"></a><span id="l36.55" class="difflineplus">+                &quot;   ((&quot;+ floatingTodoEntry + &quot; &lt; :range_end + :end_offset) OR &quot; +</span>
<a href="#l36.56"></a><span id="l36.56" class="difflineplus">+                &quot;    (&quot;+ nonFloatingTodoEntry + &quot; &lt; :range_end)))) OR &quot; +</span>
<a href="#l36.57"></a><span id="l36.57" class="difflineplus">+                &quot; (((&quot;+ floatingTodoDue + &quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.58"></a><span id="l36.58" class="difflineplus">+                &quot;   (&quot;+ nonFloatingTodoDue + &quot; = :range_start)) AND &quot; +</span>
<a href="#l36.59"></a><span id="l36.59">                 &quot;  ((todo_entry IS NULL) OR &quot; +</span>
<a href="#l36.60"></a><span id="l36.60" class="difflineminus">-                &quot;   ((&quot;+floatingTodoEntry+&quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.61"></a><span id="l36.61" class="difflineminus">-                &quot;    (&quot;+nonFloatingTodoEntry+&quot; = :range_start)))) OR &quot; +</span>
<a href="#l36.62"></a><span id="l36.62" class="difflineplus">+                &quot;   ((&quot;+ floatingTodoEntry + &quot; = :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.63"></a><span id="l36.63" class="difflineplus">+                &quot;    (&quot;+ nonFloatingTodoEntry + &quot; = :range_start)))) OR &quot; +</span>
<a href="#l36.64"></a><span id="l36.64">                 &quot; ((todo_due IS NULL) AND &quot; +</span>
<a href="#l36.65"></a><span id="l36.65" class="difflineminus">-                &quot;  (((&quot;+floatingTodoEntry+&quot; &gt;= :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.66"></a><span id="l36.66" class="difflineminus">-                &quot;    (&quot;+nonFloatingTodoEntry+&quot; &gt;= :range_start)) AND &quot; +</span>
<a href="#l36.67"></a><span id="l36.67" class="difflineminus">-                &quot;   ((&quot;+floatingTodoEntry+&quot; &lt; :range_end + :end_offset) OR &quot; +</span>
<a href="#l36.68"></a><span id="l36.68" class="difflineminus">-                &quot;    (&quot;+nonFloatingTodoEntry+&quot; &lt; :range_end)))) OR &quot; +</span>
<a href="#l36.69"></a><span id="l36.69" class="difflineplus">+                &quot;  (((&quot;+ floatingTodoEntry +&quot; &gt;= :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.70"></a><span id="l36.70" class="difflineplus">+                &quot;    (&quot;+ nonFloatingTodoEntry +&quot; &gt;= :range_start)) AND &quot; +</span>
<a href="#l36.71"></a><span id="l36.71" class="difflineplus">+                &quot;   ((&quot;+ floatingTodoEntry +&quot; &lt; :range_end + :end_offset) OR &quot; +</span>
<a href="#l36.72"></a><span id="l36.72" class="difflineplus">+                &quot;    (&quot;+ nonFloatingTodoEntry +&quot; &lt; :range_end)))) OR &quot; +</span>
<a href="#l36.73"></a><span id="l36.73">                 &quot; ((todo_entry IS NULL) AND &quot; +</span>
<a href="#l36.74"></a><span id="l36.74" class="difflineminus">-                &quot;  (((&quot;+floatingCompleted+&quot; &gt; :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.75"></a><span id="l36.75" class="difflineminus">-                &quot;    (&quot;+nonFloatingCompleted+&quot; &gt; :range_start)) OR &quot; +</span>
<a href="#l36.76"></a><span id="l36.76" class="difflineplus">+                &quot;  (((&quot;+ floatingCompleted +&quot; &gt; :range_start + :start_offset) OR &quot; +</span>
<a href="#l36.77"></a><span id="l36.77" class="difflineplus">+                &quot;    (&quot;+ nonFloatingCompleted +&quot; &gt; :range_start)) OR &quot; +</span>
<a href="#l36.78"></a><span id="l36.78">                 &quot;   (todo_completed IS NULL)))) &quot; +</span>
<a href="#l36.79"></a><span id="l36.79">                 &quot; AND cal_id = :cal_id AND flags &amp; 16 == 0 AND recurrence_id IS NULL &quot; +</span>
<a href="#l36.80"></a><span id="l36.80">                 &quot; AND ((:offline_journal IS NULL&quot; +</span>
<a href="#l36.81"></a><span id="l36.81">                 &quot; AND  (offline_journal IS NULL&quot; +</span>
<a href="#l36.82"></a><span id="l36.82">                 &quot;  OR   offline_journal != &quot; + cICL.OFFLINE_FLAG_DELETED_RECORD + &quot;)) &quot; +</span>
<a href="#l36.83"></a><span id="l36.83">                 &quot;  OR (offline_journal == :offline_journal))&quot;</span>
<a href="#l36.84"></a><span id="l36.84">                 );</span>
<a href="#l36.85"></a><span id="l36.85"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageUpgrade.jsm</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -367,17 +367,17 @@ function ensureUpdatedTimezones(db) {</span>
<a href="#l37.4"></a><span id="l37.4">         versionComp = Services.vc.compare(tzServiceVersion, version);</span>
<a href="#l37.5"></a><span id="l37.5">     }</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7">     if (versionComp != 0) {</span>
<a href="#l37.8"></a><span id="l37.8">         cal.LOG(&quot;[calStorageCalendar] Timezones have been changed from &quot; + version + &quot; to &quot; + tzServiceVersion + &quot;, updating calendar data.&quot;);</span>
<a href="#l37.9"></a><span id="l37.9"> </span>
<a href="#l37.10"></a><span id="l37.10">         let zonesToUpdate = [];</span>
<a href="#l37.11"></a><span id="l37.11">         let getZones = createStatement(db,</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-            &quot;SELECT DISTINCT(zone) FROM (&quot;+</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+            &quot;SELECT DISTINCT(zone) FROM (&quot; +</span>
<a href="#l37.14"></a><span id="l37.14">             &quot;SELECT recurrence_id_tz AS zone FROM cal_attendees    WHERE recurrence_id_tz IS NOT NULL UNION &quot; +</span>
<a href="#l37.15"></a><span id="l37.15">             &quot;SELECT recurrence_id_tz AS zone FROM cal_events       WHERE recurrence_id_tz IS NOT NULL UNION &quot; +</span>
<a href="#l37.16"></a><span id="l37.16">             &quot;SELECT event_start_tz   AS zone FROM cal_events       WHERE event_start_tz   IS NOT NULL UNION &quot; +</span>
<a href="#l37.17"></a><span id="l37.17">             &quot;SELECT event_end_tz     AS zone FROM cal_events       WHERE event_end_tz     IS NOT NULL UNION &quot; +</span>
<a href="#l37.18"></a><span id="l37.18">             &quot;SELECT recurrence_id_tz AS zone FROM cal_properties   WHERE recurrence_id_tz IS NOT NULL UNION &quot; +</span>
<a href="#l37.19"></a><span id="l37.19">             &quot;SELECT recurrence_id_tz AS zone FROM cal_todos        WHERE recurrence_id_tz IS NOT NULL UNION &quot; +</span>
<a href="#l37.20"></a><span id="l37.20">             &quot;SELECT todo_entry_tz    AS zone FROM cal_todos        WHERE todo_entry_tz    IS NOT NULL UNION &quot; +</span>
<a href="#l37.21"></a><span id="l37.21">             &quot;SELECT todo_due_tz      AS zone FROM cal_todos        WHERE todo_due_tz      IS NOT NULL UNION &quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapCalendarItems.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -1381,17 +1381,17 @@ function calWcapCalendar_replayChangesOn</span>
<a href="#l38.4"></a><span id="l38.4">                         log(&quot;replayChangesOn(): deleted item &quot; + item.id, this_);</span>
<a href="#l38.5"></a><span id="l38.5">                         if (this_.offlineStorage) {</span>
<a href="#l38.6"></a><span id="l38.6">                             this_.offlineStorage.deleteItem(item, writeListener);</span>
<a href="#l38.7"></a><span id="l38.7">                         }</span>
<a href="#l38.8"></a><span id="l38.8">                     } else { // modify parent instead of</span>
<a href="#l38.9"></a><span id="l38.9">                              // straight-forward deleteItem(). WTF.</span>
<a href="#l38.10"></a><span id="l38.10">                         var parent = item.parentItem.clone();</span>
<a href="#l38.11"></a><span id="l38.11">                         parent.recurrenceInfo.removeOccurrenceAt(item.recurrenceId);</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-                        log(&quot;replayChangesOn(): modified parent &quot;+ parent.id, this_);</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+                        log(&quot;replayChangesOn(): modified parent &quot; + parent.id, this_);</span>
<a href="#l38.14"></a><span id="l38.14">                         if (this_.offlineStorage) {</span>
<a href="#l38.15"></a><span id="l38.15">                             this_.offlineStorage.modifyItem(parent, item, writeListener);</span>
<a href="#l38.16"></a><span id="l38.16">                         }</span>
<a href="#l38.17"></a><span id="l38.17">                     }</span>
<a href="#l38.18"></a><span id="l38.18">                 }</span>
<a href="#l38.19"></a><span id="l38.19">             }, &quot;replayChangesOn() netFinishedRespFunc&quot;);</span>
<a href="#l38.20"></a><span id="l38.20">         request_.attachSubRequest(request);</span>
<a href="#l38.21"></a><span id="l38.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/calendar/resources/content/datetimepickers/datetimepickers.xml</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -50,22 +50,22 @@</span>
<a href="#l39.4"></a><span id="l39.4">         goButton.setAttribute(&quot;label&quot;, calGetString(&quot;calendar&quot;, &quot;go&quot;));</span>
<a href="#l39.5"></a><span id="l39.5">         // Load the stuff we're going to use to parse written dates</span>
<a href="#l39.6"></a><span id="l39.6">         this.mRelativeDates = [</span>
<a href="#l39.7"></a><span id="l39.7">             {word: cal.calGetString(&quot;calendar&quot;, &quot;today&quot;).toLowerCase(), offset: 0},</span>
<a href="#l39.8"></a><span id="l39.8">             {word: cal.calGetString(&quot;calendar&quot;, &quot;yesterday&quot;).toLowerCase(), offset: -1},</span>
<a href="#l39.9"></a><span id="l39.9">             {word: cal.calGetString(&quot;calendar&quot;, &quot;tomorrow&quot;).toLowerCase(), offset: 1}];</span>
<a href="#l39.10"></a><span id="l39.10">         var i;</span>
<a href="#l39.11"></a><span id="l39.11">         for (i = 1; i &lt;= 7; i++) {</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-          this.mDayNames.push(calGetString(&quot;dateFormat&quot;, &quot;day.&quot;+i+&quot;.name&quot;).toLowerCase());</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+          this.mDayNames.push(calGetString(&quot;dateFormat&quot;, &quot;day.&quot; + i + &quot;.name&quot;).toLowerCase());</span>
<a href="#l39.14"></a><span id="l39.14">         }</span>
<a href="#l39.15"></a><span id="l39.15"> </span>
<a href="#l39.16"></a><span id="l39.16">         for (i = 1; i &lt;= 12; i++) {</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineminus">-          this.mMonthLongNames.push(calGetString(&quot;dateFormat&quot;, &quot;month.&quot;+i+&quot;.name&quot;).toLowerCase());</span>
<a href="#l39.18"></a><span id="l39.18" class="difflineminus">-          this.mMonthShortNames.push(calGetString(&quot;dateFormat&quot;, &quot;month.&quot;+i+&quot;.Mmm&quot;).toLowerCase());</span>
<a href="#l39.19"></a><span id="l39.19" class="difflineplus">+          this.mMonthLongNames.push(calGetString(&quot;dateFormat&quot;, &quot;month.&quot; + i + &quot;.name&quot;).toLowerCase());</span>
<a href="#l39.20"></a><span id="l39.20" class="difflineplus">+          this.mMonthShortNames.push(calGetString(&quot;dateFormat&quot;, &quot;month.&quot; + i + &quot;.Mmm&quot;).toLowerCase());</span>
<a href="#l39.21"></a><span id="l39.21">         }</span>
<a href="#l39.22"></a><span id="l39.22"> </span>
<a href="#l39.23"></a><span id="l39.23">         // note that some languages have different conjugations of</span>
<a href="#l39.24"></a><span id="l39.24">         // next/last depending on the day</span>
<a href="#l39.25"></a><span id="l39.25">         this.mRelationWords = [</span>
<a href="#l39.26"></a><span id="l39.26">             {word: cal.calGetString(&quot;calendar&quot;, &quot;last1&quot;), offset: -1},</span>
<a href="#l39.27"></a><span id="l39.27">             {word: cal.calGetString(&quot;calendar&quot;, &quot;last2&quot;), offset: -1},</span>
<a href="#l39.28"></a><span id="l39.28">             {word: cal.calGetString(&quot;calendar&quot;, &quot;next1&quot;), offset: 0},</span>
<a href="#l39.29"></a><span id="l39.29" class="difflineat">@@ -123,17 +123,17 @@</span>
<a href="#l39.30"></a><span id="l39.30">            if (!aValue) {</span>
<a href="#l39.31"></a><span id="l39.31">              return null;</span>
<a href="#l39.32"></a><span id="l39.32">            }</span>
<a href="#l39.33"></a><span id="l39.33">            var val = aValue.toLowerCase();</span>
<a href="#l39.34"></a><span id="l39.34">            // Look for the easy ones like today, tomorrow, etc</span>
<a href="#l39.35"></a><span id="l39.35">            for (var rel of this.mRelativeDates) {</span>
<a href="#l39.36"></a><span id="l39.36">              if (val == rel.word) {</span>
<a href="#l39.37"></a><span id="l39.37">                var now = new Date();</span>
<a href="#l39.38"></a><span id="l39.38" class="difflineminus">-               now.setDate(now.getDate()+rel.offset);</span>
<a href="#l39.39"></a><span id="l39.39" class="difflineplus">+               now.setDate(now.getDate() + rel.offset);</span>
<a href="#l39.40"></a><span id="l39.40">                return now;</span>
<a href="#l39.41"></a><span id="l39.41">              }</span>
<a href="#l39.42"></a><span id="l39.42">            }</span>
<a href="#l39.43"></a><span id="l39.43"> </span>
<a href="#l39.44"></a><span id="l39.44">            var parser = this;</span>
<a href="#l39.45"></a><span id="l39.45"> </span>
<a href="#l39.46"></a><span id="l39.46">            // Takes a written day of the week and returns a js-date</span>
<a href="#l39.47"></a><span id="l39.47">            // corresponding to the nearest day in the future that is</span>
<a href="#l39.48"></a><span id="l39.48" class="difflineat">@@ -161,26 +161,26 @@</span>
<a href="#l39.49"></a><span id="l39.49">            if (!val.includes(' ')) {</span>
<a href="#l39.50"></a><span id="l39.50">              // Just a single word, or a single date.</span>
<a href="#l39.51"></a><span id="l39.51">              return getDateForDay(val);</span>
<a href="#l39.52"></a><span id="l39.52">            }</span>
<a href="#l39.53"></a><span id="l39.53"> </span>
<a href="#l39.54"></a><span id="l39.54">            // Replace month names with numbers</span>
<a href="#l39.55"></a><span id="l39.55">            for (let i in this.mMonthLongNames) {</span>
<a href="#l39.56"></a><span id="l39.56">              if (val.includes(this.mMonthLongNames[i])) {</span>
<a href="#l39.57"></a><span id="l39.57" class="difflineminus">-               let newVal = val.replace(this.mMonthLongNames[i], Number(i)+1);</span>
<a href="#l39.58"></a><span id="l39.58" class="difflineplus">+               let newVal = val.replace(this.mMonthLongNames[i], Number(i) + 1);</span>
<a href="#l39.59"></a><span id="l39.59">                newVal = newVal.replace(' ', '/');</span>
<a href="#l39.60"></a><span id="l39.60">                return this.parseDateTime(newVal);</span>
<a href="#l39.61"></a><span id="l39.61">              }</span>
<a href="#l39.62"></a><span id="l39.62">           }</span>
<a href="#l39.63"></a><span id="l39.63"> </span>
<a href="#l39.64"></a><span id="l39.64">           // Same for short month names</span>
<a href="#l39.65"></a><span id="l39.65">            for (let i in this.mMonthShortNames) {</span>
<a href="#l39.66"></a><span id="l39.66">              if (val.includes(this.mMonthShortNames[i])) {</span>
<a href="#l39.67"></a><span id="l39.67" class="difflineminus">-               let newVal = val.replace(this.mMonthShortNames[i], Number(i)+1);</span>
<a href="#l39.68"></a><span id="l39.68" class="difflineplus">+               let newVal = val.replace(this.mMonthShortNames[i], Number(i) + 1);</span>
<a href="#l39.69"></a><span id="l39.69">                newVal = newVal.replace(' ', '/');</span>
<a href="#l39.70"></a><span id="l39.70">                return this.parseDateTime(newVal);</span>
<a href="#l39.71"></a><span id="l39.71">              }</span>
<a href="#l39.72"></a><span id="l39.72">           }</span>
<a href="#l39.73"></a><span id="l39.73"> </span>
<a href="#l39.74"></a><span id="l39.74">           // Now for the cool 'next' and 'last'</span>
<a href="#l39.75"></a><span id="l39.75">           var words = val.split(' ');</span>
<a href="#l39.76"></a><span id="l39.76">           var offset, day;</span>
<a href="#l39.77"></a><span id="l39.77" class="difflineat">@@ -195,17 +195,17 @@</span>
<a href="#l39.78"></a><span id="l39.78">               if (word == this.mDayNames[i]) {</span>
<a href="#l39.79"></a><span id="l39.79">                 day = getDateForDay(word);</span>
<a href="#l39.80"></a><span id="l39.80">                 break;</span>
<a href="#l39.81"></a><span id="l39.81">               }</span>
<a href="#l39.82"></a><span id="l39.82">             }</span>
<a href="#l39.83"></a><span id="l39.83">           }</span>
<a href="#l39.84"></a><span id="l39.84"> </span>
<a href="#l39.85"></a><span id="l39.85">           if (day &amp;&amp; offset != undefined) {</span>
<a href="#l39.86"></a><span id="l39.86" class="difflineminus">-            day.setDate(day.getDate()+(7*offset));</span>
<a href="#l39.87"></a><span id="l39.87" class="difflineplus">+            day.setDate(day.getDate() + (7 * offset));</span>
<a href="#l39.88"></a><span id="l39.88">             return day;</span>
<a href="#l39.89"></a><span id="l39.89">           }</span>
<a href="#l39.90"></a><span id="l39.90">           return null;</span>
<a href="#l39.91"></a><span id="l39.91">         ]]&gt;&lt;/body&gt;</span>
<a href="#l39.92"></a><span id="l39.92">       &lt;/method&gt;</span>
<a href="#l39.93"></a><span id="l39.93">     &lt;/implementation&gt;</span>
<a href="#l39.94"></a><span id="l39.94">   &lt;/binding&gt;</span>
<a href="#l39.95"></a><span id="l39.95"> </span>
<a href="#l39.96"></a><span id="l39.96" class="difflineat">@@ -1176,17 +1176,17 @@</span>
<a href="#l39.97"></a><span id="l39.97">             // switch to five minute view</span>
<a href="#l39.98"></a><span id="l39.98">             this.switchMinuteView( this.kMINUTE_VIEW_FIVE );</span>
<a href="#l39.99"></a><span id="l39.99"> </span>
<a href="#l39.100"></a><span id="l39.100">             // select closest five minute box,</span>
<a href="#l39.101"></a><span id="l39.101">             // BUT leave the selected time at what may NOT be an even five minutes</span>
<a href="#l39.102"></a><span id="l39.102">             // So that If they click more again the proper non-even-five minute</span>
<a href="#l39.103"></a><span id="l39.103">             // box will be selected</span>
<a href="#l39.104"></a><span id="l39.104">             var minutesByFive = this.calcNearestFiveMinutes(this.mSelectedTime);</span>
<a href="#l39.105"></a><span id="l39.105" class="difflineminus">-            var fiveMinuteItemId = &quot;time-picker-five-minute-box-&quot;+minutesByFive;</span>
<a href="#l39.106"></a><span id="l39.106" class="difflineplus">+            var fiveMinuteItemId = &quot;time-picker-five-minute-box-&quot; + minutesByFive;</span>
<a href="#l39.107"></a><span id="l39.107">             var fiveMinuteItem = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, fiveMinuteItemId);</span>
<a href="#l39.108"></a><span id="l39.108">             this.selectMinuteItem(fiveMinuteItem);</span>
<a href="#l39.109"></a><span id="l39.109">           ]]&gt;</span>
<a href="#l39.110"></a><span id="l39.110">         &lt;/body&gt;</span>
<a href="#l39.111"></a><span id="l39.111">       &lt;/method&gt;</span>
<a href="#l39.112"></a><span id="l39.112"> </span>
<a href="#l39.113"></a><span id="l39.113">       &lt;!-- Called when one of the hour boxes is clicked --&gt;</span>
<a href="#l39.114"></a><span id="l39.114">       &lt;method name=&quot;clickHour&quot;&gt;</span>
<a href="#l39.115"></a><span id="l39.115" class="difflineat">@@ -1407,17 +1407,17 @@</span>
<a href="#l39.116"></a><span id="l39.116">             amLabelBox.firstChild.setAttribute(&quot;value&quot;, aAmLabel);</span>
<a href="#l39.117"></a><span id="l39.117">             let pmLabelBox = document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;pmLabelBox&quot;);</span>
<a href="#l39.118"></a><span id="l39.118">             pmLabelBox.removeAttribute(&quot;hidden&quot;);</span>
<a href="#l39.119"></a><span id="l39.119">             pmLabelBox.firstChild.setAttribute(&quot;value&quot;, aPmLabel);</span>
<a href="#l39.120"></a><span id="l39.120">             document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;time-picker-hour-box-0&quot;)</span>
<a href="#l39.121"></a><span id="l39.121">                     .setAttribute(&quot;label&quot;, &quot;12&quot;);</span>
<a href="#l39.122"></a><span id="l39.122">             for (let i = 13; i &lt; 24; i++) {</span>
<a href="#l39.123"></a><span id="l39.123">               document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;time-picker-hour-box-&quot; + i)</span>
<a href="#l39.124"></a><span id="l39.124" class="difflineminus">-                      .setAttribute(&quot;label&quot;, i-12);</span>
<a href="#l39.125"></a><span id="l39.125" class="difflineplus">+                      .setAttribute(&quot;label&quot;, i - 12);</span>
<a href="#l39.126"></a><span id="l39.126">             }</span>
<a href="#l39.127"></a><span id="l39.127">             document.getAnonymousElementByAttribute(this, &quot;anonid&quot;, &quot;time-picker-hour-grid&quot;)</span>
<a href="#l39.128"></a><span id="l39.128">                     .setAttribute(&quot;format12hours&quot;, &quot;true&quot;);</span>
<a href="#l39.129"></a><span id="l39.129">           ]]&gt;</span>
<a href="#l39.130"></a><span id="l39.130">         &lt;/body&gt;</span>
<a href="#l39.131"></a><span id="l39.131">       &lt;/method&gt;</span>
<a href="#l39.132"></a><span id="l39.132">     &lt;/implementation&gt;</span>
<a href="#l39.133"></a><span id="l39.133"> </span>
<a href="#l39.134"></a><span id="l39.134" class="difflineat">@@ -1705,35 +1705,35 @@</span>
<a href="#l39.135"></a><span id="l39.135">               if (aValue.toLowerCase() == midnight.toLowerCase()) {</span>
<a href="#l39.136"></a><span id="l39.136">                 return new Date(0, 0, 0, 0, 0, 0, 0);</span>
<a href="#l39.137"></a><span id="l39.137">               }</span>
<a href="#l39.138"></a><span id="l39.138">             } catch(ex) {</span>
<a href="#l39.139"></a><span id="l39.139">             }</span>
<a href="#l39.140"></a><span id="l39.140"> </span>
<a href="#l39.141"></a><span id="l39.141">             var time = null;</span>
<a href="#l39.142"></a><span id="l39.142">             var timePartsArray = this.parseTimeRegExp.exec(aValue);</span>
<a href="#l39.143"></a><span id="l39.143" class="difflineminus">-            const PRE_INDEX=1, HR_INDEX=2, MIN_INDEX=4, SEC_INDEX=6, POST_INDEX=8;</span>
<a href="#l39.144"></a><span id="l39.144" class="difflineplus">+            const PRE_INDEX = 1, HR_INDEX = 2, MIN_INDEX = 4, SEC_INDEX = 6, POST_INDEX = 8;</span>
<a href="#l39.145"></a><span id="l39.145"> </span>
<a href="#l39.146"></a><span id="l39.146">             if (timePartsArray != null) {</span>
<a href="#l39.147"></a><span id="l39.147">               var hoursString = timePartsArray[HR_INDEX]</span>
<a href="#l39.148"></a><span id="l39.148">               var hours = Number(hoursString);</span>
<a href="#l39.149"></a><span id="l39.149">               var hoursSuffix = timePartsArray[HR_INDEX + 1];</span>
<a href="#l39.150"></a><span id="l39.150">               if (!(hours &gt;= 0 &amp;&amp; hours &lt; 24)) {</span>
<a href="#l39.151"></a><span id="l39.151">                 return null;</span>
<a href="#l39.152"></a><span id="l39.152">               }</span>
<a href="#l39.153"></a><span id="l39.153"> </span>
<a href="#l39.154"></a><span id="l39.154">               var minutesString = timePartsArray[MIN_INDEX];</span>
<a href="#l39.155"></a><span id="l39.155" class="difflineminus">-              var minutes = (minutesString == null? 0 : Number(minutesString));</span>
<a href="#l39.156"></a><span id="l39.156" class="difflineplus">+              var minutes = (minutesString == null ? 0 : Number(minutesString));</span>
<a href="#l39.157"></a><span id="l39.157">               var minutesSuffix = timePartsArray[MIN_INDEX + 1];</span>
<a href="#l39.158"></a><span id="l39.158">               if (!(minutes &gt;= 0 &amp;&amp; minutes &lt; 60)) {</span>
<a href="#l39.159"></a><span id="l39.159">                 return null;</span>
<a href="#l39.160"></a><span id="l39.160">               }</span>
<a href="#l39.161"></a><span id="l39.161"> </span>
<a href="#l39.162"></a><span id="l39.162">               var secondsString = timePartsArray[SEC_INDEX];</span>
<a href="#l39.163"></a><span id="l39.163" class="difflineminus">-              var seconds = (secondsString == null? 0 : Number(secondsString));</span>
<a href="#l39.164"></a><span id="l39.164" class="difflineplus">+              var seconds = (secondsString == null ? 0 : Number(secondsString));</span>
<a href="#l39.165"></a><span id="l39.165">               var secondsSuffix = timePartsArray[SEC_INDEX + 1];</span>
<a href="#l39.166"></a><span id="l39.166">               if (!(seconds &gt;= 0 &amp;&amp; seconds &lt; 60)) {</span>
<a href="#l39.167"></a><span id="l39.167">                 return null;</span>
<a href="#l39.168"></a><span id="l39.168">               }</span>
<a href="#l39.169"></a><span id="l39.169"> </span>
<a href="#l39.170"></a><span id="l39.170">               var ampmCode = null;</span>
<a href="#l39.171"></a><span id="l39.171">               if (timePartsArray[PRE_INDEX] || timePartsArray[POST_INDEX]) {</span>
<a href="#l39.172"></a><span id="l39.172">                 if (this.ampmIndex &amp;&amp; timePartsArray[this.ampmIndex]) {</span>
<a href="#l39.173"></a><span id="l39.173" class="difflineat">@@ -1785,17 +1785,17 @@</span>
<a href="#l39.174"></a><span id="l39.174">             this.alphaMonths = null;</span>
<a href="#l39.175"></a><span id="l39.175">             this.probeSucceeded = false;</span>
<a href="#l39.176"></a><span id="l39.176">             this.mLastDateParseIncludedTime = false;</span>
<a href="#l39.177"></a><span id="l39.177"> </span>
<a href="#l39.178"></a><span id="l39.178">             // SHORT NUMERIC DATE, such as 2002-03-04, 4/3/2002, or CE2002Y03M04D.</span>
<a href="#l39.179"></a><span id="l39.179">             // Made of digits &amp; nonDigits.  (Nondigits may be unicode letters</span>
<a href="#l39.180"></a><span id="l39.180">             // which do not match \w, esp. in CJK locales.)</span>
<a href="#l39.181"></a><span id="l39.181">             this.parseShortDateRegex = /^\D*(\d+)\D+(\d+)\D+(\d+)\D?$/;</span>
<a href="#l39.182"></a><span id="l39.182" class="difflineminus">-            var probeDate = new Date(2002, 3-1, 4); // month is 0-based</span>
<a href="#l39.183"></a><span id="l39.183" class="difflineplus">+            var probeDate = new Date(2002, 2, 4); // month is 0-based</span>
<a href="#l39.184"></a><span id="l39.184">             var probeString = this.formatDate(probeDate);</span>
<a href="#l39.185"></a><span id="l39.185">             var probeArray = this.parseShortDateRegex.exec(probeString);</span>
<a href="#l39.186"></a><span id="l39.186">             if (probeArray != null) {</span>
<a href="#l39.187"></a><span id="l39.187">               // Numeric month format</span>
<a href="#l39.188"></a><span id="l39.188">               for (var i = 1; i &lt;= 3; i++) {</span>
<a href="#l39.189"></a><span id="l39.189">                 switch (Number(probeArray[i])) {</span>
<a href="#l39.190"></a><span id="l39.190">                   case 2: this.twoDigitYear = true; // fall thru</span>
<a href="#l39.191"></a><span id="l39.191">                   case 2002: this.yearIndex = i; break;</span>
<a href="#l39.192"></a><span id="l39.192" class="difflineat">@@ -1838,17 +1838,17 @@</span>
<a href="#l39.193"></a><span id="l39.193">                     } else {</span>
<a href="#l39.194"></a><span id="l39.194">                       this.probeSucceeded = false;</span>
<a href="#l39.195"></a><span id="l39.195">                     }</span>
<a href="#l39.196"></a><span id="l39.196">                   }</span>
<a href="#l39.197"></a><span id="l39.197">                 }</span>
<a href="#l39.198"></a><span id="l39.198">               }</span>
<a href="#l39.199"></a><span id="l39.199">             }</span>
<a href="#l39.200"></a><span id="l39.200">             if (!this.probeSucceeded) {</span>
<a href="#l39.201"></a><span id="l39.201" class="difflineminus">-              dump(&quot;\nOperating system short date format is not recognized: &quot;+probeString+&quot;\n&quot;);</span>
<a href="#l39.202"></a><span id="l39.202" class="difflineplus">+              dump(&quot;\nOperating system short date format is not recognized: &quot; + probeString + &quot;\n&quot;);</span>
<a href="#l39.203"></a><span id="l39.203">             }</span>
<a href="#l39.204"></a><span id="l39.204">           ]]&gt;</span>
<a href="#l39.205"></a><span id="l39.205">         &lt;/body&gt;</span>
<a href="#l39.206"></a><span id="l39.206">       &lt;/method&gt;</span>
<a href="#l39.207"></a><span id="l39.207"> </span>
<a href="#l39.208"></a><span id="l39.208">       &lt;!-- Time format in 24-hour format or 12-hour format with am/pm string.</span>
<a href="#l39.209"></a><span id="l39.209">            Should match formats</span>
<a href="#l39.210"></a><span id="l39.210">                 HH:mm,       H:mm,       HH:mm:ss,       H:mm:ss</span>
<a href="#l39.211"></a><span id="l39.211" class="difflineat">@@ -1869,18 +1869,18 @@</span>
<a href="#l39.212"></a><span id="l39.212">             this.ampmIndex = null;</span>
<a href="#l39.213"></a><span id="l39.213">             // Digits         HR       sep      MIN     sep      SEC     sep</span>
<a href="#l39.214"></a><span id="l39.214">             //   Index:       2        3        4       5        6       7</span>
<a href="#l39.215"></a><span id="l39.215">             var digitsExpr = &quot;(\\d?\\d)(\\D)?(?:(\\d\\d)(\\D)?(?:(\\d\\d)(\\D)?)?)?&quot;;</span>
<a href="#l39.216"></a><span id="l39.216">             // any letters or '.': non-digit alphanumeric, period (a.m.), or space (P M)</span>
<a href="#l39.217"></a><span id="l39.217">             var anyAmPmExpr = &quot;(?:[^\\d\\W]|[. ])+&quot;;</span>
<a href="#l39.218"></a><span id="l39.218">             // digitsExpr has 6 captures, so index of first ampmExpr is 1, of last is 8.</span>
<a href="#l39.219"></a><span id="l39.219">             var probeTimeRegExp =</span>
<a href="#l39.220"></a><span id="l39.220" class="difflineminus">-              new RegExp(&quot;^(&quot;+anyAmPmExpr+&quot;)?\\s?&quot;+digitsExpr+&quot;(&quot;+anyAmPmExpr+&quot;)?\\s*$&quot;);</span>
<a href="#l39.221"></a><span id="l39.221" class="difflineminus">-            const PRE_INDEX=1, HR_INDEX=2, MIN_INDEX=4, SEC_INDEX=6, POST_INDEX=8;</span>
<a href="#l39.222"></a><span id="l39.222" class="difflineplus">+              new RegExp(&quot;^(&quot; + anyAmPmExpr + &quot;)?\\s?&quot; + digitsExpr + &quot;(&quot; + anyAmPmExpr + &quot;)?\\s*$&quot;);</span>
<a href="#l39.223"></a><span id="l39.223" class="difflineplus">+            const PRE_INDEX = 1, HR_INDEX = 2, MIN_INDEX = 4, SEC_INDEX = 6, POST_INDEX = 8;</span>
<a href="#l39.224"></a><span id="l39.224">             var amProbeTime = new Date(2000, 0, 1, 6, 12, 34);</span>
<a href="#l39.225"></a><span id="l39.225">             var amProbeString = amProbeTime.toLocaleFormat(&quot;%X&quot;);</span>
<a href="#l39.226"></a><span id="l39.226">             var pmProbeTime = new Date(2000, 0, 1, 18, 12, 34);</span>
<a href="#l39.227"></a><span id="l39.227">             var pmProbeString = pmProbeTime.toLocaleFormat(&quot;%X&quot;);</span>
<a href="#l39.228"></a><span id="l39.228">             var amFormatExpr = null, pmFormatExpr = null;</span>
<a href="#l39.229"></a><span id="l39.229">             if (amProbeString != pmProbeString) {</span>
<a href="#l39.230"></a><span id="l39.230">               var amProbeArray = probeTimeRegExp.exec(amProbeString);</span>
<a href="#l39.231"></a><span id="l39.231">               var pmProbeArray = probeTimeRegExp.exec(pmProbeString);</span>
<a href="#l39.232"></a><span id="l39.232" class="difflineat">@@ -1914,54 +1914,54 @@</span>
<a href="#l39.233"></a><span id="l39.233">                   }</span>
<a href="#l39.234"></a><span id="l39.234">                 }</span>
<a href="#l39.235"></a><span id="l39.235">                 if (this.ampmIndex) {</span>
<a href="#l39.236"></a><span id="l39.236">                   var makeFormatRegExp = function(string) {</span>
<a href="#l39.237"></a><span id="l39.237">                     // make expr to accept either as provided, lowercased, or uppercased</span>
<a href="#l39.238"></a><span id="l39.238">                     var regExp = string.replace(/(\W)/g, &quot;[$1]&quot;); // escape punctuation</span>
<a href="#l39.239"></a><span id="l39.239">                     var lowercased = string.toLowerCase();</span>
<a href="#l39.240"></a><span id="l39.240">                     if (string != lowercased) {</span>
<a href="#l39.241"></a><span id="l39.241" class="difflineminus">-                      regExp += &quot;|&quot;+lowercased;</span>
<a href="#l39.242"></a><span id="l39.242" class="difflineplus">+                      regExp += &quot;|&quot; + lowercased;</span>
<a href="#l39.243"></a><span id="l39.243">                     }</span>
<a href="#l39.244"></a><span id="l39.244">                     var uppercased = string.toUpperCase();</span>
<a href="#l39.245"></a><span id="l39.245">                     if (string != uppercased) {</span>
<a href="#l39.246"></a><span id="l39.246" class="difflineminus">-                      regExp += &quot;|&quot;+uppercased;</span>
<a href="#l39.247"></a><span id="l39.247" class="difflineplus">+                      regExp += &quot;|&quot; + uppercased;</span>
<a href="#l39.248"></a><span id="l39.248">                     }</span>
<a href="#l39.249"></a><span id="l39.249">                     return regExp;</span>
<a href="#l39.250"></a><span id="l39.250">                   };</span>
<a href="#l39.251"></a><span id="l39.251">                   amFormatExpr = makeFormatRegExp(amProbeArray[this.ampmIndex]);</span>
<a href="#l39.252"></a><span id="l39.252">                   pmFormatExpr = makeFormatRegExp(pmProbeArray[this.ampmIndex]);</span>
<a href="#l39.253"></a><span id="l39.253">                 }</span>
<a href="#l39.254"></a><span id="l39.254">               }</span>
<a href="#l39.255"></a><span id="l39.255">             }</span>
<a href="#l39.256"></a><span id="l39.256">             // International formats ([roman, cyrillic]|arabic|chinese/kanji characters)</span>
<a href="#l39.257"></a><span id="l39.257">             // covering languages of U.N. (en,fr,sp,ru,ar,zh) and G8 (en,fr,de,it,ru,ja).</span>
<a href="#l39.258"></a><span id="l39.258">             // See examples at parseTimeOfDay.</span>
<a href="#l39.259"></a><span id="l39.259">             var amExpr =</span>
<a href="#l39.260"></a><span id="l39.260">               &quot;[Aa\u0410\u0430][. ]?[Mm\u041c\u043c][. ]?|\u0635|\u4e0a\u5348|\u5348\u524d&quot;;</span>
<a href="#l39.261"></a><span id="l39.261">             var pmExpr =</span>
<a href="#l39.262"></a><span id="l39.262">               &quot;[Pp\u0420\u0440][. ]?[Mm\u041c\u043c][. ]?|\u0645|\u4e0b\u5348|\u5348\u5f8c&quot;;</span>
<a href="#l39.263"></a><span id="l39.263">             if (this.ampmIndex){</span>
<a href="#l39.264"></a><span id="l39.264" class="difflineminus">-              amExpr = amFormatExpr+&quot;|&quot;+amExpr;</span>
<a href="#l39.265"></a><span id="l39.265" class="difflineminus">-              pmExpr = pmFormatExpr+&quot;|&quot;+pmExpr;</span>
<a href="#l39.266"></a><span id="l39.266" class="difflineplus">+              amExpr = amFormatExpr + &quot;|&quot; + amExpr;</span>
<a href="#l39.267"></a><span id="l39.267" class="difflineplus">+              pmExpr = pmFormatExpr + &quot;|&quot; + pmExpr;</span>
<a href="#l39.268"></a><span id="l39.268">             }</span>
<a href="#l39.269"></a><span id="l39.269" class="difflineminus">-            var ampmExpr = amExpr+&quot;|&quot;+pmExpr;</span>
<a href="#l39.270"></a><span id="l39.270" class="difflineplus">+            var ampmExpr = amExpr + &quot;|&quot; + pmExpr;</span>
<a href="#l39.271"></a><span id="l39.271">             // Must build am/pm formats into parse time regexp so that it can</span>
<a href="#l39.272"></a><span id="l39.272">             // match them without mistaking the initial char for an optional divider.</span>
<a href="#l39.273"></a><span id="l39.273">             // (For example, want to be able to parse both &quot;12:34pm&quot; and</span>
<a href="#l39.274"></a><span id="l39.274">             // &quot;12H34M56Spm&quot; for any characters H,M,S and any language's &quot;pm&quot;.</span>
<a href="#l39.275"></a><span id="l39.275">             // The character between the last digit and the &quot;pm&quot; is optional.</span>
<a href="#l39.276"></a><span id="l39.276">             // Must recogize &quot;pm&quot; directly, otherwise in &quot;12:34pm&quot; the &quot;S&quot; pattern</span>
<a href="#l39.277"></a><span id="l39.277">             // matches the &quot;p&quot; character so only &quot;m&quot; is matched as ampm suffix.)</span>
<a href="#l39.278"></a><span id="l39.278">             //</span>
<a href="#l39.279"></a><span id="l39.279">             // digitsExpr has 6 captures, so index of first ampmExpr is 1, of last is 8.</span>
<a href="#l39.280"></a><span id="l39.280">             this.parseTimeRegExp =</span>
<a href="#l39.281"></a><span id="l39.281" class="difflineminus">-              new RegExp(&quot;(&quot;+ampmExpr+&quot;)?\\s?&quot;+digitsExpr+&quot;(&quot;+ampmExpr+&quot;)?\\s*$&quot;);</span>
<a href="#l39.282"></a><span id="l39.282" class="difflineminus">-            this.amRegExp = new RegExp(&quot;^(?:&quot;+amExpr+&quot;)$&quot;);</span>
<a href="#l39.283"></a><span id="l39.283" class="difflineminus">-            this.pmRegExp = new RegExp(&quot;^(?:&quot;+pmExpr+&quot;)$&quot;);</span>
<a href="#l39.284"></a><span id="l39.284" class="difflineplus">+              new RegExp(&quot;(&quot; + ampmExpr + &quot;)?\\s?&quot; + digitsExpr + &quot;(&quot; + ampmExpr + &quot;)?\\s*$&quot;);</span>
<a href="#l39.285"></a><span id="l39.285" class="difflineplus">+            this.amRegExp = new RegExp(&quot;^(?:&quot; + amExpr + &quot;)$&quot;);</span>
<a href="#l39.286"></a><span id="l39.286" class="difflineplus">+            this.pmRegExp = new RegExp(&quot;^(?:&quot; + pmExpr + &quot;)$&quot;);</span>
<a href="#l39.287"></a><span id="l39.287">             // build time display format that mimics &quot;%x&quot; format without seconds</span>
<a href="#l39.288"></a><span id="l39.288">             var ampmSep = (pmProbeString.includes(' ') ? &quot; &quot; : &quot;&quot;);</span>
<a href="#l39.289"></a><span id="l39.289">             if (this.ampmIndex == PRE_INDEX) {</span>
<a href="#l39.290"></a><span id="l39.290">               this.kTimeFormatString = &quot;%p&quot; + ampmSep + &quot;%I:%M&quot;;</span>
<a href="#l39.291"></a><span id="l39.291">             } else if (this.ampmIndex == POST_INDEX) {</span>
<a href="#l39.292"></a><span id="l39.292">               this.kTimeFormatString = &quot;%I:%M&quot; + ampmSep + &quot;%p&quot;;</span>
<a href="#l39.293"></a><span id="l39.293">             } else {</span>
<a href="#l39.294"></a><span id="l39.294">               this.kTimeFormatString = &quot;%H:%M&quot;;</span>
<a href="#l39.295"></a><span id="l39.295" class="difflineat">@@ -1979,17 +1979,17 @@</span>
<a href="#l39.296"></a><span id="l39.296">             // if year before 1900 (e.g., typo) on MSWindows (due to MS bug).</span>
<a href="#l39.297"></a><span id="l39.297">             var nsIScriptableDateFormat =</span>
<a href="#l39.298"></a><span id="l39.298">               Components.interfaces.nsIScriptableDateFormat;</span>
<a href="#l39.299"></a><span id="l39.299">             var dateService =</span>
<a href="#l39.300"></a><span id="l39.300">               Components.classes[&quot;@mozilla.org/intl/scriptabledateformat;1&quot;]</span>
<a href="#l39.301"></a><span id="l39.301">                         .getService(nsIScriptableDateFormat);</span>
<a href="#l39.302"></a><span id="l39.302">             return dateService.FormatDate(&quot;&quot;, dateService.dateFormatShort,</span>
<a href="#l39.303"></a><span id="l39.303">                                           aDate.getFullYear(),</span>
<a href="#l39.304"></a><span id="l39.304" class="difflineminus">-                                          aDate.getMonth()+1,</span>
<a href="#l39.305"></a><span id="l39.305" class="difflineplus">+                                          aDate.getMonth() + 1,</span>
<a href="#l39.306"></a><span id="l39.306">                                           aDate.getDate());</span>
<a href="#l39.307"></a><span id="l39.307">           ]]&gt;</span>
<a href="#l39.308"></a><span id="l39.308">         &lt;/body&gt;</span>
<a href="#l39.309"></a><span id="l39.309">       &lt;/method&gt;</span>
<a href="#l39.310"></a><span id="l39.310"> </span>
<a href="#l39.311"></a><span id="l39.311">       &lt;method name=&quot;formatTime&quot;&gt;</span>
<a href="#l39.312"></a><span id="l39.312">         &lt;parameter name=&quot;aValue&quot;/&gt;</span>
<a href="#l39.313"></a><span id="l39.313">         &lt;body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1" class="difflineminus">--- a/calendar/resources/content/mouseoverPreviews.js</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineplus">+++ b/calendar/resources/content/mouseoverPreviews.js</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineat">@@ -115,17 +115,17 @@ function getPreviewForTask( toDoItem )</span>
<a href="#l40.4"></a><span id="l40.4">     {</span>
<a href="#l40.5"></a><span id="l40.5">       var status = getToDoStatusString(toDoItem);</span>
<a href="#l40.6"></a><span id="l40.6">       boxAppendLabeledText(vbox, &quot;tooltipStatus&quot;, status);</span>
<a href="#l40.7"></a><span id="l40.7">       hasHeader = true;</span>
<a href="#l40.8"></a><span id="l40.8">     }</span>
<a href="#l40.9"></a><span id="l40.9"> </span>
<a href="#l40.10"></a><span id="l40.10">     if (toDoItem.status != null &amp;&amp; toDoItem.percentComplete != 0 &amp;&amp; toDoItem.percentComplete != 100)</span>
<a href="#l40.11"></a><span id="l40.11">     {</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-      boxAppendLabeledText(vbox, &quot;tooltipPercent&quot;, String(toDoItem.percentComplete)+&quot;%&quot;);</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineplus">+      boxAppendLabeledText(vbox, &quot;tooltipPercent&quot;, String(toDoItem.percentComplete) + &quot;%&quot;);</span>
<a href="#l40.14"></a><span id="l40.14">       hasHeader = true;</span>
<a href="#l40.15"></a><span id="l40.15">     } else if (toDoItem.percentComplete == 100)</span>
<a href="#l40.16"></a><span id="l40.16">     {</span>
<a href="#l40.17"></a><span id="l40.17">       if (toDoItem.completedDate == null) {</span>
<a href="#l40.18"></a><span id="l40.18">         boxAppendLabeledText(vbox, &quot;tooltipPercent&quot;, &quot;100%&quot;);</span>
<a href="#l40.19"></a><span id="l40.19">       } else {</span>
<a href="#l40.20"></a><span id="l40.20">         boxAppendLabeledDateTime(vbox, &quot;tooltipCompleted&quot;, toDoItem.completedDate);</span>
<a href="#l40.21"></a><span id="l40.21">       }</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineat">@@ -380,12 +380,12 @@ function getCurrentNextOrPreviousRecurre</span>
<a href="#l40.23"></a><span id="l40.23">     // starting duration ago.</span>
<a href="#l40.24"></a><span id="l40.24">     var probeTime = now();</span>
<a href="#l40.25"></a><span id="l40.25">     probeTime.addDuration(dur);</span>
<a href="#l40.26"></a><span id="l40.26"> </span>
<a href="#l40.27"></a><span id="l40.27">     var occ = calendarEvent.recurrenceInfo.getNextOccurrence(probeTime);</span>
<a href="#l40.28"></a><span id="l40.28"> </span>
<a href="#l40.29"></a><span id="l40.29">     if (!occ) {</span>
<a href="#l40.30"></a><span id="l40.30">         var occs = calendarEvent.recurrenceInfo.getOccurrences(calendarEvent.startDate, probeTime, 0, {});</span>
<a href="#l40.31"></a><span id="l40.31" class="difflineminus">-        occ = occs[occs.length -1];</span>
<a href="#l40.32"></a><span id="l40.32" class="difflineplus">+        occ = occs[occs.length - 1];</span>
<a href="#l40.33"></a><span id="l40.33">     }</span>
<a href="#l40.34"></a><span id="l40.34">     return occ;</span>
<a href="#l40.35"></a><span id="l40.35"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1" class="difflineminus">--- a/calendar/resources/content/publish.js</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineplus">+++ b/calendar/resources/content/publish.js</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineat">@@ -102,17 +102,17 @@ function publishEntireCalendarDialogResp</span>
<a href="#l41.4"></a><span id="l41.4">         },</span>
<a href="#l41.5"></a><span id="l41.5">         onGetResult: function(aCalendar, aStatus, aItemType, aDetail, aCount, aItems)</span>
<a href="#l41.6"></a><span id="l41.6">         {</span>
<a href="#l41.7"></a><span id="l41.7">             if (!Components.isSuccessCode(aStatus)) {</span>
<a href="#l41.8"></a><span id="l41.8">                 aborted = true;</span>
<a href="#l41.9"></a><span id="l41.9">                 return;</span>
<a href="#l41.10"></a><span id="l41.10">             }</span>
<a href="#l41.11"></a><span id="l41.11">             if (aCount) {</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-                for (var i=0; i&lt;aCount; ++i) {</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineplus">+                for (var i = 0; i &lt; aCount; ++i) {</span>
<a href="#l41.14"></a><span id="l41.14">                     // Store a (short living) reference to the item.</span>
<a href="#l41.15"></a><span id="l41.15">                     var itemCopy = aItems[i].clone();</span>
<a href="#l41.16"></a><span id="l41.16">                     itemArray.push(itemCopy);</span>
<a href="#l41.17"></a><span id="l41.17">                 }</span>
<a href="#l41.18"></a><span id="l41.18">             }</span>
<a href="#l41.19"></a><span id="l41.19">         }</span>
<a href="#l41.20"></a><span id="l41.20">     };</span>
<a href="#l41.21"></a><span id="l41.21">     aProgressDialog.onStartUpload();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1" class="difflineminus">--- a/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineplus">+++ b/calendar/test/mozmill/eventDialog/testEventDialog.js</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineat">@@ -63,17 +63,17 @@ var testEventDialog = function () {</span>
<a href="#l42.4"></a><span id="l42.4">   controller.mainMenu.click(&quot;#ltnNewEvent&quot;);</span>
<a href="#l42.5"></a><span id="l42.5">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l42.6"></a><span id="l42.6">   let event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l42.7"></a><span id="l42.7"> </span>
<a href="#l42.8"></a><span id="l42.8">   // check that the start time is correct</span>
<a href="#l42.9"></a><span id="l42.9">   // next full hour except last hour hour of the day</span>
<a href="#l42.10"></a><span id="l42.10">   let now = new Date();</span>
<a href="#l42.11"></a><span id="l42.11">   let hour = now.getHours();</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-  let startHour = (hour == 23)? hour : (hour + 1) % 24;</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineplus">+  let startHour = (hour == 23) ? hour : (hour + 1) % 24;</span>
<a href="#l42.14"></a><span id="l42.14">   let ampm = &quot;&quot;;</span>
<a href="#l42.15"></a><span id="l42.15">   if (now.toLocaleTimeString().match(/AM|PM/)) {</span>
<a href="#l42.16"></a><span id="l42.16">     ampm = (hour &gt;= 12 ? &quot; PM&quot; : &quot; AM&quot;)</span>
<a href="#l42.17"></a><span id="l42.17">     startHour = startHour % 12;</span>
<a href="#l42.18"></a><span id="l42.18">     if (startHour == 0) {</span>
<a href="#l42.19"></a><span id="l42.19">       startHour = 12;</span>
<a href="#l42.20"></a><span id="l42.20">     }</span>
<a href="#l42.21"></a><span id="l42.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l43.1"></a><span id="l43.1" class="difflineminus">--- a/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l43.2"></a><span id="l43.2" class="difflineplus">+++ b/calendar/test/mozmill/testTodayPane.js</span>
<a href="#l43.3"></a><span id="l43.3" class="difflineat">@@ -43,17 +43,17 @@ var testTodayPane = function () {</span>
<a href="#l43.4"></a><span id="l43.4">     + 'anon({&quot;anonid&quot;:&quot;minimonth-header&quot;})/anon({&quot;anonid&quot;:&quot;today-button&quot;})'));</span>
<a href="#l43.5"></a><span id="l43.5">   let dayNode = (new elementslib.Lookup(controller.window.document, dayPath)).getNode();</span>
<a href="#l43.6"></a><span id="l43.6">   controller.assertJS(dayNode.mDate.icalString == getIsoDate());</span>
<a href="#l43.7"></a><span id="l43.7"> </span>
<a href="#l43.8"></a><span id="l43.8">   // create event 6 hours from now, if this is tomorrow then at 23 today</span>
<a href="#l43.9"></a><span id="l43.9">   // doubleclick only triggers new event dialog on visible boxes, so scrolling may be needed</span>
<a href="#l43.10"></a><span id="l43.10">   // by default visible time is 08:00 - 17:00, box of 17th hour is out of view</span>
<a href="#l43.11"></a><span id="l43.11">   let hour = (new Date()).getHours();</span>
<a href="#l43.12"></a><span id="l43.12" class="difflineminus">-  let startHour = (hour &lt; 18)? hour + 6 : 23;</span>
<a href="#l43.13"></a><span id="l43.13" class="difflineplus">+  let startHour = (hour &lt; 18) ? hour + 6 : 23;</span>
<a href="#l43.14"></a><span id="l43.14">   let view = (new elementslib.Lookup(controller.window.document, dayView)).getNode();</span>
<a href="#l43.15"></a><span id="l43.15"> </span>
<a href="#l43.16"></a><span id="l43.16">   if (startHour &lt; 8 || startHour &gt; 16) {</span>
<a href="#l43.17"></a><span id="l43.17">     view.scrollToMinute(60 * startHour);</span>
<a href="#l43.18"></a><span id="l43.18">   }</span>
<a href="#l43.19"></a><span id="l43.19"> </span>
<a href="#l43.20"></a><span id="l43.20">   controller.doubleClick(new elementslib.Lookup(controller.window.document, dayView</span>
<a href="#l43.21"></a><span id="l43.21">     + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;scrollbox&quot;})/anon({&quot;anonid&quot;:&quot;daybox&quot;})/'</span>
<a href="#l43.22"></a><span id="l43.22" class="difflineat">@@ -237,17 +237,17 @@ var testTodayPane = function () {</span>
<a href="#l43.23"></a><span id="l43.23"> //    || tomorrow.getAttribute(&quot;checked&quot;) != &quot;true&quot;);</span>
<a href="#l43.24"></a><span id="l43.24">   controller.assertJS(!soon.hasAttribute(&quot;checked&quot;)</span>
<a href="#l43.25"></a><span id="l43.25">     || soon.getAttribute(&quot;checked&quot;) != &quot;true&quot;);</span>
<a href="#l43.26"></a><span id="l43.26"> }</span>
<a href="#l43.27"></a><span id="l43.27"> </span>
<a href="#l43.28"></a><span id="l43.28"> var getIsoDate = function() {</span>
<a href="#l43.29"></a><span id="l43.29">   let date = new Date();</span>
<a href="#l43.30"></a><span id="l43.30">   let year = date.getFullYear();</span>
<a href="#l43.31"></a><span id="l43.31" class="difflineminus">-  let month = (date.getMonth() &lt; 9)? '0' + (date.getMonth() + 1) : (date.getMonth() + 1);</span>
<a href="#l43.32"></a><span id="l43.32" class="difflineminus">-  let day = (date.getDate() &lt; 10)? '0' + date.getDate() : date.getDate();</span>
<a href="#l43.33"></a><span id="l43.33" class="difflineplus">+  let month = (date.getMonth() &lt; 9) ? '0' + (date.getMonth() + 1) : (date.getMonth() + 1);</span>
<a href="#l43.34"></a><span id="l43.34" class="difflineplus">+  let day = (date.getDate() &lt; 10) ? '0' + date.getDate() : date.getDate();</span>
<a href="#l43.35"></a><span id="l43.35">   let isoDate = year + '' + month + '' + day;</span>
<a href="#l43.36"></a><span id="l43.36">   return isoDate;</span>
<a href="#l43.37"></a><span id="l43.37"> }</span>
<a href="#l43.38"></a><span id="l43.38"> </span>
<a href="#l43.39"></a><span id="l43.39"> var teardownTest = function(module) {</span>
<a href="#l43.40"></a><span id="l43.40">   calUtils.deleteCalendars(controller, MOZMILL_CALENDAR);</span>
<a href="#l43.41"></a><span id="l43.41"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l44.1"></a><span id="l44.1" class="difflineminus">--- a/calendar/test/mozmill/views/testMonthView.js</span>
<a href="#l44.2"></a><span id="l44.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testMonthView.js</span>
<a href="#l44.3"></a><span id="l44.3" class="difflineat">@@ -65,17 +65,17 @@ var testMonthView = function () {</span>
<a href="#l44.4"></a><span id="l44.4">   controller.doubleClick(new elementslib.Lookup(controller.window.document, monthView</span>
<a href="#l44.5"></a><span id="l44.5">     + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;monthgrid&quot;})/anon({&quot;anonid&quot;:&quot;monthgridrows&quot;})/'</span>
<a href="#l44.6"></a><span id="l44.6">     + '[0]/{&quot;selected&quot;:&quot;true&quot;}/anon({&quot;anonid&quot;:&quot;day-items&quot;})'));</span>
<a href="#l44.7"></a><span id="l44.7">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l44.8"></a><span id="l44.8">   let event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l44.9"></a><span id="l44.9"> </span>
<a href="#l44.10"></a><span id="l44.10">   // check that the start time is correct</span>
<a href="#l44.11"></a><span id="l44.11">   // next full hour except last hour hour of the day</span>
<a href="#l44.12"></a><span id="l44.12" class="difflineminus">-  let nextHour = (hour == 23)? hour : (hour + 1) % 24;</span>
<a href="#l44.13"></a><span id="l44.13" class="difflineplus">+  let nextHour = (hour == 23) ? hour : (hour + 1) % 24;</span>
<a href="#l44.14"></a><span id="l44.14">   let startTime = nextHour + ':00'; // next full hour</span>
<a href="#l44.15"></a><span id="l44.15">   let startTimeInput = new elementslib.Lookup(event.window.document, eventDialog</span>
<a href="#l44.16"></a><span id="l44.16">     + 'id(&quot;event-grid-startdate-row&quot;)/id(&quot;event-grid-startdate-picker-box&quot;)/'</span>
<a href="#l44.17"></a><span id="l44.17">     + 'id(&quot;event-starttime&quot;)/anon({&quot;anonid&quot;:&quot;hbox&quot;})/anon({&quot;anonid&quot;:&quot;time-picker&quot;})/'</span>
<a href="#l44.18"></a><span id="l44.18">     + 'anon({&quot;class&quot;:&quot;timepicker-box-class&quot;})/anon({&quot;class&quot;:&quot;timepicker-text-class&quot;})/'</span>
<a href="#l44.19"></a><span id="l44.19">     + 'anon({&quot;flex&quot;:&quot;1&quot;})/anon({&quot;anonid&quot;:&quot;input&quot;})');</span>
<a href="#l44.20"></a><span id="l44.20">   event.waitForElement(startTimeInput);</span>
<a href="#l44.21"></a><span id="l44.21">   event.assertValue(startTimeInput, startTime);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l45.1"></a><span id="l45.1" class="difflineminus">--- a/calendar/test/mozmill/views/testMultiweekView.js</span>
<a href="#l45.2"></a><span id="l45.2" class="difflineplus">+++ b/calendar/test/mozmill/views/testMultiweekView.js</span>
<a href="#l45.3"></a><span id="l45.3" class="difflineat">@@ -65,17 +65,17 @@ var testMultiWeekView = function () {</span>
<a href="#l45.4"></a><span id="l45.4">   controller.doubleClick(new elementslib.Lookup(controller.window.document, multiWeekView</span>
<a href="#l45.5"></a><span id="l45.5">     + 'anon({&quot;anonid&quot;:&quot;mainbox&quot;})/anon({&quot;anonid&quot;:&quot;monthgrid&quot;})/anon({&quot;anonid&quot;:&quot;monthgridrows&quot;})/'</span>
<a href="#l45.6"></a><span id="l45.6">     + '[0]/{&quot;selected&quot;:&quot;true&quot;}/anon({&quot;anonid&quot;:&quot;day-items&quot;})'));</span>
<a href="#l45.7"></a><span id="l45.7">   controller.waitFor(function() {return mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;).length &gt; 0}, sleep);</span>
<a href="#l45.8"></a><span id="l45.8">   let event = new mozmill.controller.MozMillController(mozmill.utils.getWindows(&quot;Calendar:EventDialog&quot;)[0]);</span>
<a href="#l45.9"></a><span id="l45.9"> </span>
<a href="#l45.10"></a><span id="l45.10">   // check that the start time is correct</span>
<a href="#l45.11"></a><span id="l45.11">   // next full hour except last hour hour of the day</span>
<a href="#l45.12"></a><span id="l45.12" class="difflineminus">-  let nextHour = (hour == 23)? hour : (hour + 1) % 24;</span>
<a href="#l45.13"></a><span id="l45.13" class="difflineplus">+  let nextHour = (hour == 23) ? hour : (hour + 1) % 24;</span>
<a href="#l45.14"></a><span id="l45.14">   let startTime = nextHour + ':00';</span>
<a href="#l45.15"></a><span id="l45.15">   let startTimeInput = new elementslib.Lookup(event.window.document, eventDialog</span>
<a href="#l45.16"></a><span id="l45.16">     + 'id(&quot;event-grid-startdate-row&quot;)/id(&quot;event-grid-startdate-picker-box&quot;)/'</span>
<a href="#l45.17"></a><span id="l45.17">     + 'id(&quot;event-starttime&quot;)/anon({&quot;anonid&quot;:&quot;hbox&quot;})/anon({&quot;anonid&quot;:&quot;time-picker&quot;})/'</span>
<a href="#l45.18"></a><span id="l45.18">     + 'anon({&quot;class&quot;:&quot;timepicker-box-class&quot;})/anon({&quot;class&quot;:&quot;timepicker-text-class&quot;})/'</span>
<a href="#l45.19"></a><span id="l45.19">     + 'anon({&quot;flex&quot;:&quot;1&quot;})/anon({&quot;anonid&quot;:&quot;input&quot;})');</span>
<a href="#l45.20"></a><span id="l45.20">   event.waitForElement(startTimeInput);</span>
<a href="#l45.21"></a><span id="l45.21">   event.assertValue(startTimeInput, startTime);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l46.1"></a><span id="l46.1" class="difflineminus">--- a/calendar/test/unit/test_attendee.js</span>
<a href="#l46.2"></a><span id="l46.2" class="difflineplus">+++ b/calendar/test/unit/test_attendee.js</span>
<a href="#l46.3"></a><span id="l46.3" class="difflineat">@@ -206,17 +206,17 @@ function test_doubleParameters() {</span>
<a href="#l46.4"></a><span id="l46.4">                 parNames.push(paramName);</span>
<a href="#l46.5"></a><span id="l46.5">                 parValues.push(prop.getParameter(paramName));</span>
<a href="#l46.6"></a><span id="l46.6">             }</span>
<a href="#l46.7"></a><span id="l46.7"> </span>
<a href="#l46.8"></a><span id="l46.8">             // Check the results</span>
<a href="#l46.9"></a><span id="l46.9">             let att_n = attendee.id.substr(7, 9);</span>
<a href="#l46.10"></a><span id="l46.10">             for (let parIndex in parNames) {</span>
<a href="#l46.11"></a><span id="l46.11">                 ok(aExpected[att_n].param.includes(parNames[parIndex]),</span>
<a href="#l46.12"></a><span id="l46.12" class="difflineminus">-                   &quot;Parameter &quot; + parNames[parIndex] + &quot; included in &quot;+ att_n);</span>
<a href="#l46.13"></a><span id="l46.13" class="difflineplus">+                   &quot;Parameter &quot; + parNames[parIndex] + &quot; included in &quot; + att_n);</span>
<a href="#l46.14"></a><span id="l46.14">                 ok(aExpected[att_n].values.includes(parValues[parIndex]),</span>
<a href="#l46.15"></a><span id="l46.15">                    &quot;Value &quot; + parValues[parIndex] + &quot; for parameter &quot; + parNames[parIndex]);</span>
<a href="#l46.16"></a><span id="l46.16">             }</span>
<a href="#l46.17"></a><span id="l46.17">             ok(parNames.length == aExpected[att_n].param.length,</span>
<a href="#l46.18"></a><span id="l46.18">                &quot;Each parameter has been considered for &quot; + att_n);</span>
<a href="#l46.19"></a><span id="l46.19">         }</span>
<a href="#l46.20"></a><span id="l46.20">     }</span>
<a href="#l46.21"></a><span id="l46.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l47.1"></a><span id="l47.1" class="difflineminus">--- a/calendar/test/unit/test_bug1199942.js</span>
<a href="#l47.2"></a><span id="l47.2" class="difflineplus">+++ b/calendar/test/unit/test_bug1199942.js</span>
<a href="#l47.3"></a><span id="l47.3" class="difflineat">@@ -21,35 +21,35 @@ function createAttendee_test() {</span>
<a href="#l47.4"></a><span id="l47.4">         attendee.id = test.input;</span>
<a href="#l47.5"></a><span id="l47.5">         event.addAttendee(attendee);</span>
<a href="#l47.6"></a><span id="l47.6">         let readAttendee = event.getAttendeeById(cal.prependMailTo(test.input));</span>
<a href="#l47.7"></a><span id="l47.7">         equal(readAttendee.id, test.expected);</span>
<a href="#l47.8"></a><span id="l47.8">     }</span>
<a href="#l47.9"></a><span id="l47.9"> }</span>
<a href="#l47.10"></a><span id="l47.10"> </span>
<a href="#l47.11"></a><span id="l47.11"> function serializeEvent_test() {</span>
<a href="#l47.12"></a><span id="l47.12" class="difflineminus">-    let ics= &quot;BEGIN:VCALENDAR\n&quot; +</span>
<a href="#l47.13"></a><span id="l47.13" class="difflineminus">-             &quot;PRODID:-//Mozilla.org/NONSGML Mozilla Calendar V1.1//EN\n&quot; +</span>
<a href="#l47.14"></a><span id="l47.14" class="difflineminus">-             &quot;VERSION:2.0\n&quot; +</span>
<a href="#l47.15"></a><span id="l47.15" class="difflineminus">-             &quot;BEGIN:VEVENT\n&quot; +</span>
<a href="#l47.16"></a><span id="l47.16" class="difflineminus">-             &quot;CREATED:20150801T213509Z\n&quot; +</span>
<a href="#l47.17"></a><span id="l47.17" class="difflineminus">-             &quot;LAST-MODIFIED:20150830T164104Z\n&quot; +</span>
<a href="#l47.18"></a><span id="l47.18" class="difflineminus">-             &quot;DTSTAMP:20150830T164104Z\n&quot; +</span>
<a href="#l47.19"></a><span id="l47.19" class="difflineminus">-             &quot;UID:a84c74d1-cfc6-4ddf-9d60-9e4afd8238cf\n&quot; +</span>
<a href="#l47.20"></a><span id="l47.20" class="difflineminus">-             &quot;SUMMARY:New Event\n&quot; +</span>
<a href="#l47.21"></a><span id="l47.21" class="difflineminus">-             &quot;ORGANIZER;RSVP=TRUE;CN=Tester1;PARTSTAT=ACCEPTED;ROLE=CHAIR:mailto:user1@example.net\n&quot; +</span>
<a href="#l47.22"></a><span id="l47.22" class="difflineminus">-             &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:MAILTO:user2@example.net\n&quot; +</span>
<a href="#l47.23"></a><span id="l47.23" class="difflineminus">-             &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:mailto:user3@example.net\n&quot; +</span>
<a href="#l47.24"></a><span id="l47.24" class="difflineminus">-             &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:user4@example.net\n&quot; +</span>
<a href="#l47.25"></a><span id="l47.25" class="difflineminus">-             &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:urn:uuid:user5\n&quot; +</span>
<a href="#l47.26"></a><span id="l47.26" class="difflineminus">-             &quot;DTSTART:20150729T103000Z\n&quot; +</span>
<a href="#l47.27"></a><span id="l47.27" class="difflineminus">-             &quot;DTEND:20150729T113000Z\n&quot; +</span>
<a href="#l47.28"></a><span id="l47.28" class="difflineminus">-             &quot;TRANSP:OPAQUE\n&quot; +</span>
<a href="#l47.29"></a><span id="l47.29" class="difflineminus">-             &quot;END:VEVENT\n&quot; +</span>
<a href="#l47.30"></a><span id="l47.30" class="difflineminus">-             &quot;END:VCALENDAR\n&quot;;</span>
<a href="#l47.31"></a><span id="l47.31" class="difflineplus">+    let ics = &quot;BEGIN:VCALENDAR\n&quot; +</span>
<a href="#l47.32"></a><span id="l47.32" class="difflineplus">+              &quot;PRODID:-//Mozilla.org/NONSGML Mozilla Calendar V1.1//EN\n&quot; +</span>
<a href="#l47.33"></a><span id="l47.33" class="difflineplus">+              &quot;VERSION:2.0\n&quot; +</span>
<a href="#l47.34"></a><span id="l47.34" class="difflineplus">+              &quot;BEGIN:VEVENT\n&quot; +</span>
<a href="#l47.35"></a><span id="l47.35" class="difflineplus">+              &quot;CREATED:20150801T213509Z\n&quot; +</span>
<a href="#l47.36"></a><span id="l47.36" class="difflineplus">+              &quot;LAST-MODIFIED:20150830T164104Z\n&quot; +</span>
<a href="#l47.37"></a><span id="l47.37" class="difflineplus">+              &quot;DTSTAMP:20150830T164104Z\n&quot; +</span>
<a href="#l47.38"></a><span id="l47.38" class="difflineplus">+              &quot;UID:a84c74d1-cfc6-4ddf-9d60-9e4afd8238cf\n&quot; +</span>
<a href="#l47.39"></a><span id="l47.39" class="difflineplus">+              &quot;SUMMARY:New Event\n&quot; +</span>
<a href="#l47.40"></a><span id="l47.40" class="difflineplus">+              &quot;ORGANIZER;RSVP=TRUE;CN=Tester1;PARTSTAT=ACCEPTED;ROLE=CHAIR:mailto:user1@example.net\n&quot; +</span>
<a href="#l47.41"></a><span id="l47.41" class="difflineplus">+              &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:MAILTO:user2@example.net\n&quot; +</span>
<a href="#l47.42"></a><span id="l47.42" class="difflineplus">+              &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:mailto:user3@example.net\n&quot; +</span>
<a href="#l47.43"></a><span id="l47.43" class="difflineplus">+              &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:user4@example.net\n&quot; +</span>
<a href="#l47.44"></a><span id="l47.44" class="difflineplus">+              &quot;ATTENDEE;RSVP=TRUE;PARTSTAT=NEEDS-ACTION;ROLE=REQ-PARTICIPANT:urn:uuid:user5\n&quot; +</span>
<a href="#l47.45"></a><span id="l47.45" class="difflineplus">+              &quot;DTSTART:20150729T103000Z\n&quot; +</span>
<a href="#l47.46"></a><span id="l47.46" class="difflineplus">+              &quot;DTEND:20150729T113000Z\n&quot; +</span>
<a href="#l47.47"></a><span id="l47.47" class="difflineplus">+              &quot;TRANSP:OPAQUE\n&quot; +</span>
<a href="#l47.48"></a><span id="l47.48" class="difflineplus">+              &quot;END:VEVENT\n&quot; +</span>
<a href="#l47.49"></a><span id="l47.49" class="difflineplus">+              &quot;END:VCALENDAR\n&quot;;</span>
<a href="#l47.50"></a><span id="l47.50"> </span>
<a href="#l47.51"></a><span id="l47.51">     let expectedIds = [&quot;mailto:user2@example.net&quot;,</span>
<a href="#l47.52"></a><span id="l47.52">                        &quot;mailto:user3@example.net&quot;,</span>
<a href="#l47.53"></a><span id="l47.53">                        &quot;mailto:user4@example.net&quot;,</span>
<a href="#l47.54"></a><span id="l47.54">                        &quot;urn:uuid:user5&quot;];</span>
<a href="#l47.55"></a><span id="l47.55">     let event = createEventFromIcalString(ics);</span>
<a href="#l47.56"></a><span id="l47.56">     let attendees = event.getAttendees({});</span>
<a href="#l47.57"></a><span id="l47.57"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l48.1"></a><span id="l48.1" class="difflineminus">--- a/calendar/test/unit/test_datetime.js</span>
<a href="#l48.2"></a><span id="l48.2" class="difflineplus">+++ b/calendar/test/unit/test_datetime.js</span>
<a href="#l48.3"></a><span id="l48.3" class="difflineat">@@ -41,20 +41,20 @@ function really_run_test() {</span>
<a href="#l48.4"></a><span id="l48.4">     equal(cd.nativeTime, cd_allday.nativeTime);</span>
<a href="#l48.5"></a><span id="l48.5"> </span>
<a href="#l48.6"></a><span id="l48.6">     // Daylight savings test</span>
<a href="#l48.7"></a><span id="l48.7">     cd.resetTo(2006, 2, 26,</span>
<a href="#l48.8"></a><span id="l48.8">                1, 0, 0,</span>
<a href="#l48.9"></a><span id="l48.9">                getMozTimezone(&quot;/mozilla.org/20050126_1/Europe/Amsterdam&quot;));</span>
<a href="#l48.10"></a><span id="l48.10"> </span>
<a href="#l48.11"></a><span id="l48.11">     equal(cd.weekday, 0);</span>
<a href="#l48.12"></a><span id="l48.12" class="difflineminus">-    equal(cd.timezoneOffset, 1*3600);</span>
<a href="#l48.13"></a><span id="l48.13" class="difflineplus">+    equal(cd.timezoneOffset, 1 * 3600);</span>
<a href="#l48.14"></a><span id="l48.14"> </span>
<a href="#l48.15"></a><span id="l48.15">     cd.day += 1;</span>
<a href="#l48.16"></a><span id="l48.16" class="difflineminus">-    equal(cd.timezoneOffset, 2*3600);</span>
<a href="#l48.17"></a><span id="l48.17" class="difflineplus">+    equal(cd.timezoneOffset, 2 * 3600);</span>
<a href="#l48.18"></a><span id="l48.18"> </span>
<a href="#l48.19"></a><span id="l48.19">     // Bug 398724 - Problems with floating all-day items</span>
<a href="#l48.20"></a><span id="l48.20">     let event = cal.createEvent(&quot;BEGIN:VEVENT\nUID:45674d53-229f-48c6-9f3b-f2b601e7ae4d\nSUMMARY:New Event\nDTSTART;VALUE=DATE:20071003\nDTEND;VALUE=DATE:20071004\nEND:VEVENT&quot;);</span>
<a href="#l48.21"></a><span id="l48.21">     ok(event.startDate.timezone.isFloating);</span>
<a href="#l48.22"></a><span id="l48.22">     ok(event.endDate.timezone.isFloating);</span>
<a href="#l48.23"></a><span id="l48.23"> </span>
<a href="#l48.24"></a><span id="l48.24">     // Bug 392853 - Same times, different timezones, but subtractDate says times are PT0S apart</span>
<a href="#l48.25"></a><span id="l48.25">     const zeroLength = cal.createDuration();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l49.1"></a><span id="l49.1" class="difflineminus">--- a/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l49.2"></a><span id="l49.2" class="difflineplus">+++ b/calendar/test/unit/test_gdata_provider.js</span>
<a href="#l49.3"></a><span id="l49.3" class="difflineat">@@ -908,17 +908,17 @@ add_task(function* test_basicItems() {</span>
<a href="#l49.4"></a><span id="l49.4">     ];</span>
<a href="#l49.5"></a><span id="l49.5"> </span>
<a href="#l49.6"></a><span id="l49.6">     let client = yield gServer.getClient();</span>
<a href="#l49.7"></a><span id="l49.7">     let pclient = cal.async.promisifyCalendar(client);</span>
<a href="#l49.8"></a><span id="l49.8"> </span>
<a href="#l49.9"></a><span id="l49.9">     let items = yield pclient.getAllItems();</span>
<a href="#l49.10"></a><span id="l49.10">     equal(items.length, 2);</span>
<a href="#l49.11"></a><span id="l49.11"> </span>
<a href="#l49.12"></a><span id="l49.12" class="difflineminus">-    let event = cal.isEvent(items[0]) ? items[0]: items[1];</span>
<a href="#l49.13"></a><span id="l49.13" class="difflineplus">+    let event = cal.isEvent(items[0]) ? items[0] : items[1];</span>
<a href="#l49.14"></a><span id="l49.14">     equal(event.id, &quot;go6ijb0b46hlpbu4eeu92njevo@google.com&quot;);</span>
<a href="#l49.15"></a><span id="l49.15">     equal(event.getProperty(&quot;STATUS&quot;), &quot;CONFIRMED&quot;);</span>
<a href="#l49.16"></a><span id="l49.16">     equal(event.getProperty(&quot;URL&quot;), gServer.baseUri + &quot;/calendar/event?eid=eventhash&quot;);</span>
<a href="#l49.17"></a><span id="l49.17">     equal(event.getProperty(&quot;CREATED&quot;).icalString, &quot;20060608T210452Z&quot;);</span>
<a href="#l49.18"></a><span id="l49.18">     equal(event.getProperty(&quot;LAST-MODIFIED&quot;).icalString, &quot;20060608T210549Z&quot;);</span>
<a href="#l49.19"></a><span id="l49.19">     equal(event.title, &quot;New Event&quot;);</span>
<a href="#l49.20"></a><span id="l49.20">     equal(event.getProperty(&quot;DESCRIPTION&quot;), &quot;description&quot;);</span>
<a href="#l49.21"></a><span id="l49.21">     equal(event.getProperty(&quot;LOCATION&quot;), &quot;Hard Drive&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l50.1"></a><span id="l50.1" class="difflineminus">--- a/calendar/test/unit/test_ics_service.js</span>
<a href="#l50.2"></a><span id="l50.2" class="difflineplus">+++ b/calendar/test/unit/test_ics_service.js</span>
<a href="#l50.3"></a><span id="l50.3" class="difflineat">@@ -223,17 +223,17 @@ function test_param() {</span>
<a href="#l50.4"></a><span id="l50.4"> function test_iterator() {</span>
<a href="#l50.5"></a><span id="l50.5">     let svc = cal.getIcsService();</span>
<a href="#l50.6"></a><span id="l50.6"> </span>
<a href="#l50.7"></a><span id="l50.7">     // Property iterator</span>
<a href="#l50.8"></a><span id="l50.8">     let comp = svc.createIcalComponent(&quot;VEVENT&quot;);</span>
<a href="#l50.9"></a><span id="l50.9">     let propNames = [&quot;X-ONE&quot;, &quot;X-TWO&quot;];</span>
<a href="#l50.10"></a><span id="l50.10">     for (let i = 0; i &lt; propNames.length; i++) {</span>
<a href="#l50.11"></a><span id="l50.11">         let prop = svc.createIcalProperty(propNames[i]);</span>
<a href="#l50.12"></a><span id="l50.12" class="difflineminus">-        prop.value = &quot;&quot; + (i+1);</span>
<a href="#l50.13"></a><span id="l50.13" class="difflineplus">+        prop.value = &quot;&quot; + (i + 1);</span>
<a href="#l50.14"></a><span id="l50.14">         comp.addProperty(prop);</span>
<a href="#l50.15"></a><span id="l50.15">     }</span>
<a href="#l50.16"></a><span id="l50.16"> </span>
<a href="#l50.17"></a><span id="l50.17">     for (let p = comp.getFirstProperty(&quot;ANY&quot;);</span>
<a href="#l50.18"></a><span id="l50.18">          p;</span>
<a href="#l50.19"></a><span id="l50.19">          p = comp.getNextProperty(&quot;ANY&quot;)) {</span>
<a href="#l50.20"></a><span id="l50.20">         equal(p.propertyName, propNames.shift());</span>
<a href="#l50.21"></a><span id="l50.21">         equal(p.parent.toString(), comp.toString());</span>
<a href="#l50.22"></a><span id="l50.22" class="difflineat">@@ -258,17 +258,17 @@ function test_iterator() {</span>
<a href="#l50.23"></a><span id="l50.23">         equal(p.value, propValues.shift());</span>
<a href="#l50.24"></a><span id="l50.24">         equal(p.parent.toString(), comp.toString());</span>
<a href="#l50.25"></a><span id="l50.25">     }</span>
<a href="#l50.26"></a><span id="l50.26"> </span>
<a href="#l50.27"></a><span id="l50.27">     // Param iterator</span>
<a href="#l50.28"></a><span id="l50.28">     let prop = svc.createIcalProperty(&quot;DTSTART&quot;);</span>
<a href="#l50.29"></a><span id="l50.29">     let params = [&quot;X-ONE&quot;, &quot;X-TWO&quot;];</span>
<a href="#l50.30"></a><span id="l50.30">     for (let i = 0; i &lt; params.length; i++) {</span>
<a href="#l50.31"></a><span id="l50.31" class="difflineminus">-        prop.setParameter(params[i], &quot;&quot; + (i+1));</span>
<a href="#l50.32"></a><span id="l50.32" class="difflineplus">+        prop.setParameter(params[i], &quot;&quot; + (i + 1));</span>
<a href="#l50.33"></a><span id="l50.33">     }</span>
<a href="#l50.34"></a><span id="l50.34"> </span>
<a href="#l50.35"></a><span id="l50.35">     for (let p = prop.getFirstParameterName();</span>
<a href="#l50.36"></a><span id="l50.36">          p;</span>
<a href="#l50.37"></a><span id="l50.37">          p = prop.getNextParameterName()) {</span>
<a href="#l50.38"></a><span id="l50.38">         equal(p, params.shift());</span>
<a href="#l50.39"></a><span id="l50.39">     }</span>
<a href="#l50.40"></a><span id="l50.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l51.1"></a><span id="l51.1" class="difflineminus">--- a/calendar/test/unit/test_recur.js</span>
<a href="#l51.2"></a><span id="l51.2" class="difflineplus">+++ b/calendar/test/unit/test_recur.js</span>
<a href="#l51.3"></a><span id="l51.3" class="difflineat">@@ -50,28 +50,28 @@ function test_rules() {</span>
<a href="#l51.4"></a><span id="l51.4">             if (ignoreNextOccCheck) {</span>
<a href="#l51.5"></a><span id="l51.5">                 continue;</span>
<a href="#l51.6"></a><span id="l51.6">             }</span>
<a href="#l51.7"></a><span id="l51.7"> </span>
<a href="#l51.8"></a><span id="l51.8">             // Make sure getNextOccurrence works correctly</span>
<a href="#l51.9"></a><span id="l51.9">             let nextOcc = event.recurrenceInfo.getNextOccurrence(recdates[i]);</span>
<a href="#l51.10"></a><span id="l51.10">             if (expected.length &gt; i + 1) {</span>
<a href="#l51.11"></a><span id="l51.11">                 notEqual(nextOcc, null);</span>
<a href="#l51.12"></a><span id="l51.12" class="difflineminus">-                dump(&quot;Checking next occurrence: &quot; + expected[i+1]+&quot;\n&quot;);</span>
<a href="#l51.13"></a><span id="l51.13" class="difflineplus">+                dump(&quot;Checking next occurrence: &quot; + expected[i + 1] + &quot;\n&quot;);</span>
<a href="#l51.14"></a><span id="l51.14">                 equal(nextOcc.startDate.icalString, expected[i + 1]);</span>
<a href="#l51.15"></a><span id="l51.15">             } else {</span>
<a href="#l51.16"></a><span id="l51.16">                 dump(&quot;Expecting no more occurrences, found &quot; +</span>
<a href="#l51.17"></a><span id="l51.17">                         (nextOcc ? nextOcc.startDate : null) + &quot;\n&quot;);</span>
<a href="#l51.18"></a><span id="l51.18">                 equal(nextOcc, null);</span>
<a href="#l51.19"></a><span id="l51.19">             }</span>
<a href="#l51.20"></a><span id="l51.20"> </span>
<a href="#l51.21"></a><span id="l51.21">             // Make sure getPreviousOccurrence works correctly</span>
<a href="#l51.22"></a><span id="l51.22">             let prevOcc = event.recurrenceInfo.getPreviousOccurrence(recdates[i]);</span>
<a href="#l51.23"></a><span id="l51.23">             if (i &gt; 0) {</span>
<a href="#l51.24"></a><span id="l51.24" class="difflineminus">-                dump(&quot;Checking previous occurrence: &quot; + expected[i-1]+&quot;, found &quot; + (prevOcc ? prevOcc.startDate : prevOcc) + &quot;\n&quot;);</span>
<a href="#l51.25"></a><span id="l51.25" class="difflineplus">+                dump(&quot;Checking previous occurrence: &quot; + expected[i - 1] + &quot;, found &quot; + (prevOcc ? prevOcc.startDate : prevOcc) + &quot;\n&quot;);</span>
<a href="#l51.26"></a><span id="l51.26">                 notEqual(prevOcc, null);</span>
<a href="#l51.27"></a><span id="l51.27">                 equal(prevOcc.startDate.icalString, expected[i - 1]);</span>
<a href="#l51.28"></a><span id="l51.28">             } else {</span>
<a href="#l51.29"></a><span id="l51.29">                 dump(&quot;Expecting no previous occurrences, found &quot; +</span>
<a href="#l51.30"></a><span id="l51.30">                         (prevOcc ? prevOcc.startDate : prevOcc) + &quot;\n&quot;);</span>
<a href="#l51.31"></a><span id="l51.31">                 equal(prevOcc, null);</span>
<a href="#l51.32"></a><span id="l51.32">             }</span>
<a href="#l51.33"></a><span id="l51.33">         }</span>
<a href="#l51.34"></a><span id="l51.34" class="difflineat">@@ -246,17 +246,17 @@ function test_rules() {</span>
<a href="#l51.35"></a><span id="l51.35">                 &quot;20140305T150000Z&quot;, &quot;20140307T150000Z&quot;, &quot;20140312T150000Z&quot;, &quot;20140314T150000Z&quot;,</span>
<a href="#l51.36"></a><span id="l51.36">                 &quot;20140319T150000Z&quot;, &quot;20140321T150000Z&quot;, &quot;20140326T150000Z&quot;, &quot;20140328T150000Z&quot;],</span>
<a href="#l51.37"></a><span id="l51.37">                false);</span>
<a href="#l51.38"></a><span id="l51.38"> </span>
<a href="#l51.39"></a><span id="l51.39">     // Bug 958978 - Check a yearly recurrence every day of January (BYMONTH and more BYDAY).</span>
<a href="#l51.40"></a><span id="l51.40">     // Check for all the occurrences in the first year.</span>
<a href="#l51.41"></a><span id="l51.41">     let expectedDates = [];</span>
<a href="#l51.42"></a><span id="l51.42">     for (let i = 1; i &lt; 32; i++) {</span>
<a href="#l51.43"></a><span id="l51.43" class="difflineminus">-        expectedDates.push(&quot;201401&quot; + (i&lt;10 ? &quot;0&quot;+i : i) + &quot;T150000Z&quot;);</span>
<a href="#l51.44"></a><span id="l51.44" class="difflineplus">+        expectedDates.push(&quot;201401&quot; + (i &lt; 10 ? &quot;0&quot; + i : i) + &quot;T150000Z&quot;);</span>
<a href="#l51.45"></a><span id="l51.45">     }</span>
<a href="#l51.46"></a><span id="l51.46">     check_recur(createEventFromIcalString(&quot;BEGIN:VCALENDAR\nBEGIN:VEVENT\n&quot; +</span>
<a href="#l51.47"></a><span id="l51.47">                                          &quot;DESCRIPTION:Yearly, every day of January (one BYMONTH and more BYDAY)\n&quot; +</span>
<a href="#l51.48"></a><span id="l51.48">                                          &quot;RRULE:FREQ=YEARLY;COUNT=31;BYMONTH=1;BYDAY=SU,MO,TU,WE,TH,FR,SA\n&quot; +</span>
<a href="#l51.49"></a><span id="l51.49">                                          &quot;DTSTART:20140101T150000Z\n&quot; +</span>
<a href="#l51.50"></a><span id="l51.50">                                          &quot;DTEND:20140101T160000Z\n&quot; +</span>
<a href="#l51.51"></a><span id="l51.51">                                          &quot;END:VEVENT\nEND:VCALENDAR\n&quot;),</span>
<a href="#l51.52"></a><span id="l51.52">                 expectedDates,</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

