<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 14562:3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474" />
<meta property="og:url" content="/comm-central/rev/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474" />
<meta property="og:description" content="Bug 954054 - Basic Jump List support on Windows 7, r=florian." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">shortlog</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">files</a> |
changeset |
<a href="/comm-central/raw-rev/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">raw</a>  | <a href="/comm-central/archive/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=954054">Bug 954054</a> - Basic Jump List support on Windows 7, r=florian.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#80;&#97;&#116;&#114;&#105;&#99;&#107;&#32;&#67;&#108;&#111;&#107;&#101;&#32;&#60;&#99;&#108;&#111;&#107;&#101;&#112;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Tue, 31 May 2011 02:36:53 +0200</td></tr>

<tr>
 <td>changeset 14562</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474</a></td>
</tr>



<tr>
<td>parent 14561</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/23c63dae968a177332ddbfd1383c2720a6b23ad7">23c63dae968a177332ddbfd1383c2720a6b23ad7</a>
</td>
</tr>

<tr>
<td>child 14563</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/15ea03e050692d37d2fb525624551a9a092db6ec">15ea03e050692d37d2fb525624551a9a092db6ec</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474">9778</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 12 Jan 2014 18:25:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f81a23bfefcd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28florian%29&revcount=50">florian</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=954054">954054</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=954054">Bug 954054</a> - Basic Jump List support on Windows 7, r=florian.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/app/splash.rc">im/app/splash.rc</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/app/splash.rc">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/app/splash.rc">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/app/splash.rc">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/app/splash.rc">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/app/splash.rc">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/Makefile.in">im/components/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/Makefile.in">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/Makefile.in">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/Makefile.in">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/Makefile.in">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.js">im/components/ibStatusCommandLineHandler.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.js">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.js">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.js">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.js">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.manifest">im/components/ibStatusCommandLineHandler.manifest</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.manifest">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.manifest">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.manifest">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.manifest">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/components/ibStatusCommandLineHandler.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/installer/package-manifest.in">im/installer/package-manifest.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/installer/package-manifest.in">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/installer/package-manifest.in">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/installer/package-manifest.in">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/installer/package-manifest.in">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/installer/package-manifest.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/en-US/chrome/instantbird/winjumplist.properties">im/locales/en-US/chrome/instantbird/winjumplist.properties</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/en-US/chrome/instantbird/winjumplist.properties">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/en-US/chrome/instantbird/winjumplist.properties">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/en-US/chrome/instantbird/winjumplist.properties">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/en-US/chrome/instantbird/winjumplist.properties">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/en-US/chrome/instantbird/winjumplist.properties">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/jar.mn">im/locales/jar.mn</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/jar.mn">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/jar.mn">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/jar.mn">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/jar.mn">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/locales/jar.mn">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/Makefile.in">im/modules/Makefile.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/Makefile.in">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/Makefile.in">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/Makefile.in">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/Makefile.in">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/Makefile.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibCore.jsm">im/modules/ibCore.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibCore.jsm">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibCore.jsm">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibCore.jsm">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibCore.jsm">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibCore.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibWinJumpList.jsm">im/modules/ibWinJumpList.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibWinJumpList.jsm">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibWinJumpList.jsm">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibWinJumpList.jsm">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibWinJumpList.jsm">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/modules/ibWinJumpList.jsm">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/available-16.ico">im/themes/available-16.ico</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/available-16.ico">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/available-16.ico">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/available-16.ico">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/available-16.ico">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/available-16.ico">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/away-16.ico">im/themes/away-16.ico</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/away-16.ico">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/away-16.ico">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/away-16.ico">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/away-16.ico">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/away-16.ico">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/offline-16.ico">im/themes/offline-16.ico</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/offline-16.ico">file</a> |
<a href="/comm-central/annotate/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/offline-16.ico">annotate</a> |
<a href="/comm-central/diff/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/offline-16.ico">diff</a> |
<a href="/comm-central/comparison/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/offline-16.ico">comparison</a> |
<a href="/comm-central/log/3f1bd40bc29f8e5e8e6aaa2bc690f9bd700c9474/im/themes/offline-16.ico">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/im/app/splash.rc</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/im/app/splash.rc</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -16,16 +16,18 @@</span>
<a href="#l1.4"></a><span id="l1.4">  *</span>
<a href="#l1.5"></a><span id="l1.5">  * The Initial Developer of the Original Code is</span>
<a href="#l1.6"></a><span id="l1.6">  * Netscape Communications Corporation.</span>
<a href="#l1.7"></a><span id="l1.7">  * Portions created by the Initial Developer are Copyright (C) 1998</span>
<a href="#l1.8"></a><span id="l1.8">  * the Initial Developer. All Rights Reserved.</span>
<a href="#l1.9"></a><span id="l1.9">  *</span>
<a href="#l1.10"></a><span id="l1.10">  * Contributor(s):</span>
<a href="#l1.11"></a><span id="l1.11">  *   Bill Law       law@netscape.com</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+ *   Florian Quèze &lt;florian@instantbird.org&gt;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+ *   Patrick Cloke &lt;clokep@gmail.com&gt;</span>
<a href="#l1.14"></a><span id="l1.14">  *</span>
<a href="#l1.15"></a><span id="l1.15">  * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l1.16"></a><span id="l1.16">  * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l1.17"></a><span id="l1.17">  * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l1.18"></a><span id="l1.18">  * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l1.19"></a><span id="l1.19">  * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l1.20"></a><span id="l1.20">  * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l1.21"></a><span id="l1.21">  * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -33,26 +35,29 @@</span>
<a href="#l1.23"></a><span id="l1.23">  * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l1.24"></a><span id="l1.24">  * the provisions above, a recipient may use your version of this file under</span>
<a href="#l1.25"></a><span id="l1.25">  * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l1.26"></a><span id="l1.26">  *</span>
<a href="#l1.27"></a><span id="l1.27">  * ***** END LICENSE BLOCK ***** */</span>
<a href="#l1.28"></a><span id="l1.28"> #include &lt;windows.h&gt;</span>
<a href="#l1.29"></a><span id="l1.29"> #include &quot;nsNativeAppSupportWin.h&quot;</span>
<a href="#l1.30"></a><span id="l1.30"> </span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-1 24 &quot;instantbird.exe.manifest&quot; </span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+1 24 &quot;instantbird.exe.manifest&quot;</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34"> #define IDI_APPICON 1</span>
<a href="#l1.35"></a><span id="l1.35"> #define IDI_DOCUMENT 2</span>
<a href="#l1.36"></a><span id="l1.36"> #ifndef IDI_APPLICATION</span>
<a href="#l1.37"></a><span id="l1.37"> #define IDI_APPLICATION 32512</span>
<a href="#l1.38"></a><span id="l1.38"> #endif</span>
<a href="#l1.39"></a><span id="l1.39"> </span>
<a href="#l1.40"></a><span id="l1.40"> // Program icon.</span>
<a href="#l1.41"></a><span id="l1.41"> IDI_APPICON  ICON  INSTANTBIRD_ICO</span>
<a href="#l1.42"></a><span id="l1.42" class="difflineplus">+2  ICON  &quot;../themes/available-16.ico&quot;</span>
<a href="#l1.43"></a><span id="l1.43" class="difflineplus">+3  ICON  &quot;../themes/away-16.ico&quot;</span>
<a href="#l1.44"></a><span id="l1.44" class="difflineplus">+4  ICON  &quot;../themes/offline-16.ico&quot;</span>
<a href="#l1.45"></a><span id="l1.45"> IDI_APPLICATION ICON INSTANTBIRD_ICO</span>
<a href="#l1.46"></a><span id="l1.46"> </span>
<a href="#l1.47"></a><span id="l1.47"> STRINGTABLE DISCARDABLE</span>
<a href="#l1.48"></a><span id="l1.48"> BEGIN</span>
<a href="#l1.49"></a><span id="l1.49"> #ifdef DEBUG</span>
<a href="#l1.50"></a><span id="l1.50">     IDS_STARTMENU_APPNAME,              &quot;@MOZ_APP_DISPLAYNAME@ Debug&quot;</span>
<a href="#l1.51"></a><span id="l1.51"> #else</span>
<a href="#l1.52"></a><span id="l1.52">     IDS_STARTMENU_APPNAME,              &quot;@MOZ_APP_DISPLAYNAME@&quot;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/im/components/Makefile.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/im/components/Makefile.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -14,16 +14,17 @@</span>
<a href="#l2.4"></a><span id="l2.4"> # The Original Code is the Mozilla Browser code.</span>
<a href="#l2.5"></a><span id="l2.5"> #</span>
<a href="#l2.6"></a><span id="l2.6"> # The Initial Developer of the Original Code is</span>
<a href="#l2.7"></a><span id="l2.7"> #   Florian QUEZE &lt;florian@instantbird.org&gt;</span>
<a href="#l2.8"></a><span id="l2.8"> # Portions created by the Initial Developer are Copyright (C) 2008</span>
<a href="#l2.9"></a><span id="l2.9"> # the Initial Developer. All Rights Reserved.</span>
<a href="#l2.10"></a><span id="l2.10"> #</span>
<a href="#l2.11"></a><span id="l2.11"> # Contributor(s):</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+#   Patrick Cloke &lt;clokep@gmail.com&gt;</span>
<a href="#l2.13"></a><span id="l2.13"> #</span>
<a href="#l2.14"></a><span id="l2.14"> # Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l2.15"></a><span id="l2.15"> # either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l2.16"></a><span id="l2.16"> # the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l2.17"></a><span id="l2.17"> # in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l2.18"></a><span id="l2.18"> # of those above. If you wish to allow use of your version of this file only</span>
<a href="#l2.19"></a><span id="l2.19"> # under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l2.20"></a><span id="l2.20"> # use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -46,16 +47,17 @@ DIRS = mintrayr</span>
<a href="#l2.22"></a><span id="l2.22"> endif</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24"> MODULE		= instantbird</span>
<a href="#l2.25"></a><span id="l2.25"> </span>
<a href="#l2.26"></a><span id="l2.26"> XPIDLSRCS	= ibILogger.idl</span>
<a href="#l2.27"></a><span id="l2.27"> </span>
<a href="#l2.28"></a><span id="l2.28"> EXTRA_COMPONENTS = \</span>
<a href="#l2.29"></a><span id="l2.29"> 	ibCommandLineHandler.manifest \</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineplus">+	ibStatusCommandLineHandler.js ibStatusCommandLineHandler.manifest \</span>
<a href="#l2.31"></a><span id="l2.31"> 	logger.manifest \</span>
<a href="#l2.32"></a><span id="l2.32"> 	smileProtocolHandler.js smileProtocolHandler.manifest \</span>
<a href="#l2.33"></a><span id="l2.33"> 	$(NULL)</span>
<a href="#l2.34"></a><span id="l2.34"> </span>
<a href="#l2.35"></a><span id="l2.35"> EXTRA_PP_COMPONENTS = \</span>
<a href="#l2.36"></a><span id="l2.36"> 	ibCommandLineHandler.js \</span>
<a href="#l2.37"></a><span id="l2.37"> 	logger.js \</span>
<a href="#l2.38"></a><span id="l2.38"> 	$(NULL)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1">new file mode 100644</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineminus">--- /dev/null</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineplus">+++ b/im/components/ibStatusCommandLineHandler.js</span>
<a href="#l3.4"></a><span id="l3.4" class="difflineat">@@ -0,0 +1,91 @@</span>
<a href="#l3.5"></a><span id="l3.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l3.6"></a><span id="l3.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l3.7"></a><span id="l3.7" class="difflineplus">+ *</span>
<a href="#l3.8"></a><span id="l3.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l3.9"></a><span id="l3.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l3.10"></a><span id="l3.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l3.11"></a><span id="l3.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+ *</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineplus">+ * License.</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineplus">+ *</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineplus">+ * The Original Code is Instantbird.</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineplus">+ *</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineplus">+ * Benedikt Pfeifer &lt;benediktp@ymail.com&gt;.</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2011</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineplus">+ *</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineplus">+ *   Patrick Cloke &lt;clokep@gmail.com&gt;</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineplus">+ *</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineplus">+ *</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineplus">+</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineplus">+const {interfaces: Ci, utils: Cu} = Components;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineplus">+</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineplus">+Cu.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineplus">+Cu.import(&quot;resource:///modules/imServices.jsm&quot;);</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineplus">+</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineplus">+function StatusCLH() { }</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineplus">+StatusCLH.prototype = {</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineplus">+  classDescription: &quot;Instantbird Status Commandline Handler Component&quot;,</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineplus">+  classID:          Components.ID(&quot;{9da72063-b727-488d-9b3f-cc12e854ab33}&quot;),</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+  contractID:       &quot;@instantbird.org/status/clh;1&quot;,</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineplus">+  QueryInterface:   XPCOMUtils.generateQI([Ci.nsICommandLineHandler]),</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineplus">+</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineplus">+  /** nsICommandLineHandler **/</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineplus">+  handle: function(cmdLine) {</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineplus">+    let statusIndex = cmdLine.findFlag(&quot;status&quot;, false);</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineplus">+    if (statusIndex == -1 || cmdLine.length &lt;= statusIndex + 1)</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineplus">+      return;</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineplus">+</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineplus">+    let requestedStatus;</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineplus">+    let statusParam = cmdLine.getArgument(statusIndex + 1).toLowerCase();</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineplus">+    if (statusParam == &quot;available&quot;)</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineplus">+      requestedStatus = Ci.imIStatusInfo.STATUS_AVAILABLE;</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineplus">+    else if (statusParam == &quot;away&quot;)</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineplus">+      requestedStatus = Ci.imIStatusInfo.STATUS_AWAY;</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineplus">+    else if (statusParam == &quot;offline&quot;)</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineplus">+      requestedStatus = Ci.imIStatusInfo.STATUS_OFFLINE;</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineplus">+    else {</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineplus">+      // Return so other statuses could be handled by an extension.</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+      return;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineplus">+    }</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineplus">+</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineplus">+    // Remove the arguments since they've been handled.</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineplus">+    cmdLine.removeArguments(statusIndex, statusIndex + 1);</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineplus">+</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineplus">+    // We're keeping the old status message here.</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+    Services.core.setStatus(requestedStatus,</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+                            Services.core.currentStatusMessage);</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineplus">+</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineplus">+    // Only perform the default action (i.e. loading the buddy list) if</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineplus">+    // Instantbird is launched with a status flag.</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineplus">+    if (cmdLine.state != Ci.nsICommandLine.STATE_INITIAL_LAUNCH)</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineplus">+      cmdLine.preventDefault = true;</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineplus">+  },</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineplus">+</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineplus">+  // Follow the guidelines in nsICommandLineHandler.idl for the help info</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineplus">+  // specifically, flag descriptions should start at character 24, and lines</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineplus">+  // should be wrapped at 72 characters with embedded newlines, and finally, the</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineplus">+  // string should end with a newline.</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineplus">+  helpInfo: &quot;  -status &lt;status&gt;     Set the online status.\n&quot; +</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineplus">+            &quot;                       &lt;status&gt; can be one of\n&quot; +</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineplus">+            &quot;                       available, away, offline.\n&quot;</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineplus">+};</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineplus">+</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineplus">+var NSGetFactory = XPCOMUtils.generateNSGetFactory([StatusCLH]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">new file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- /dev/null</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ b/im/components/ibStatusCommandLineHandler.manifest</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -0,0 +1,3 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineplus">+component {9da72063-b727-488d-9b3f-cc12e854ab33} ibStatusCommandLineHandler.js</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineplus">+contract @instantbird.org/status/clh;1 {9da72063-b727-488d-9b3f-cc12e854ab33}</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineplus">+category command-line-handler m-status @instantbird.org/status/clh;1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/im/installer/package-manifest.in</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/im/installer/package-manifest.in</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -415,16 +415,18 @@</span>
<a href="#l5.4"></a><span id="l5.4"> #else</span>
<a href="#l5.5"></a><span id="l5.5"> @BINPATH@/components/@DLL_PREFIX@trayToolkit@DLL_SUFFIX@</span>
<a href="#l5.6"></a><span id="l5.6"> @BINPATH@/components/trayToolkit.xpt</span>
<a href="#l5.7"></a><span id="l5.7"> @BINPATH@/components/profileMigrator.js</span>
<a href="#l5.8"></a><span id="l5.8"> @BINPATH@/components/profileMigrator.manifest</span>
<a href="#l5.9"></a><span id="l5.9"> #endif</span>
<a href="#l5.10"></a><span id="l5.10"> @BINPATH@/components/ibCommandLineHandler.js</span>
<a href="#l5.11"></a><span id="l5.11"> @BINPATH@/components/ibCommandLineHandler.manifest</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineplus">+@BINPATH@/components/ibStatusCommandLineHandler.js</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+@BINPATH@/components/ibStatusCommandLineHandler.manifest</span>
<a href="#l5.14"></a><span id="l5.14"> @BINPATH@/components/facebookOverrideProtocol.js</span>
<a href="#l5.15"></a><span id="l5.15"> @BINPATH@/components/gtalkOverrideProtocol.js</span>
<a href="#l5.16"></a><span id="l5.16"> @BINPATH@/components/overrideProtocols.manifest</span>
<a href="#l5.17"></a><span id="l5.17"> @BINPATH@/components/twitter.js</span>
<a href="#l5.18"></a><span id="l5.18"> @BINPATH@/components/twitter.manifest</span>
<a href="#l5.19"></a><span id="l5.19"> @BINPATH@/components/smileProtocolHandler.js</span>
<a href="#l5.20"></a><span id="l5.20"> @BINPATH@/components/smileProtocolHandler.manifest</span>
<a href="#l5.21"></a><span id="l5.21"> @BINPATH@/components/logger.js</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">new file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- /dev/null</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/winjumplist.properties</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -0,0 +1,11 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineplus">+# LOCALIZATION NOTE:</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineplus">+#   These are the labels that show up for the Jump List items.</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineplus">+available.label=Available</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineplus">+away.label=Away</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineplus">+offline.label=Offline</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineplus">+</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineplus">+# LOCALIZATION NOTE:</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineplus">+#   These are descriptions of what each Jump List item will do.</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+available.tooltip=Set status to available.</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineplus">+away.tooltip=Set status to away</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineplus">+offline.tooltip=Set status to offline</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/im/locales/jar.mn</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/im/locales/jar.mn</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -15,21 +15,22 @@</span>
<a href="#l7.4"></a><span id="l7.4"> 	locale/@AB_CD@/instantbird/engineManager.properties (%chrome/instantbird/engineManager.properties)</span>
<a href="#l7.5"></a><span id="l7.5"> 	locale/@AB_CD@/instantbird/extensions.properties (%chrome/instantbird/extensions.properties)</span>
<a href="#l7.6"></a><span id="l7.6"> 	locale/@AB_CD@/instantbird/instantbird.dtd	(%chrome/instantbird/instantbird.dtd)</span>
<a href="#l7.7"></a><span id="l7.7"> 	locale/@AB_CD@/instantbird/instantbird.properties (%chrome/instantbird/instantbird.properties)</span>
<a href="#l7.8"></a><span id="l7.8"> 	locale/@AB_CD@/instantbird/joinChat.dtd		(%chrome/instantbird/joinChat.dtd)</span>
<a href="#l7.9"></a><span id="l7.9"> 	locale/@AB_CD@/instantbird/mintrayr.dtd		(%chrome/instantbird/mintrayr.dtd)</span>
<a href="#l7.10"></a><span id="l7.10"> 	locale/@AB_CD@/instantbird/proxies.dtd		(%chrome/instantbird/proxies.dtd)</span>
<a href="#l7.11"></a><span id="l7.11"> 	locale/@AB_CD@/instantbird/proxies.properties	(%chrome/instantbird/proxies.properties)</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineplus">+	locale/@AB_CD@/instantbird/quitDialog.properties	(%chrome/instantbird/quitDialog.properties)</span>
<a href="#l7.13"></a><span id="l7.13"> 	locale/@AB_CD@/instantbird/region.properties	(%chrome/instantbird/region.properties)</span>
<a href="#l7.14"></a><span id="l7.14"> 	locale/@AB_CD@/instantbird/tabbrowser.dtd	(%chrome/instantbird/tabbrowser.dtd)</span>
<a href="#l7.15"></a><span id="l7.15"> 	locale/@AB_CD@/instantbird/tabbrowser.properties	(%chrome/instantbird/tabbrowser.properties)</span>
<a href="#l7.16"></a><span id="l7.16"> 	locale/@AB_CD@/instantbird/updates.properties	(%chrome/instantbird/updates.properties)</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-	locale/@AB_CD@/instantbird/quitDialog.properties	(%chrome/instantbird/quitDialog.properties)</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineplus">+	locale/@AB_CD@/instantbird/winjumplist.properties	(%chrome/instantbird/winjumplist.properties)</span>
<a href="#l7.19"></a><span id="l7.19"> 	locale/@AB_CD@/instantbird/preferences/advanced.dtd     (%chrome/instantbird/preferences/advanced.dtd)</span>
<a href="#l7.20"></a><span id="l7.20"> 	locale/@AB_CD@/instantbird/preferences/applicationManager.dtd        (%chrome/instantbird/preferences/applicationManager.dtd)</span>
<a href="#l7.21"></a><span id="l7.21"> 	locale/@AB_CD@/instantbird/preferences/applicationManager.properties (%chrome/instantbird/preferences/applicationManager.properties)</span>
<a href="#l7.22"></a><span id="l7.22"> 	locale/@AB_CD@/instantbird/preferences/applications.dtd (%chrome/instantbird/preferences/applications.dtd)</span>
<a href="#l7.23"></a><span id="l7.23"> 	locale/@AB_CD@/instantbird/preferences/colors.dtd       (%chrome/instantbird/preferences/colors.dtd)</span>
<a href="#l7.24"></a><span id="l7.24"> 	locale/@AB_CD@/instantbird/preferences/connection.dtd   (%chrome/instantbird/preferences/connection.dtd)</span>
<a href="#l7.25"></a><span id="l7.25"> 	locale/@AB_CD@/instantbird/preferences/content.dtd      (%chrome/instantbird/preferences/content.dtd)</span>
<a href="#l7.26"></a><span id="l7.26"> 	locale/@AB_CD@/instantbird/preferences/main.dtd         (%chrome/instantbird/preferences/main.dtd)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/im/modules/Makefile.in</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/im/modules/Makefile.in</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -37,24 +37,28 @@</span>
<a href="#l8.4"></a><span id="l8.4"> DEPTH		= ../..</span>
<a href="#l8.5"></a><span id="l8.5"> topsrcdir	= @top_srcdir@</span>
<a href="#l8.6"></a><span id="l8.6"> srcdir		= @srcdir@</span>
<a href="#l8.7"></a><span id="l8.7"> VPATH		= @srcdir@</span>
<a href="#l8.8"></a><span id="l8.8"> </span>
<a href="#l8.9"></a><span id="l8.9"> include $(DEPTH)/config/autoconf.mk</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11"> EXTRA_JS_MODULES = \</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-	ibCore.jsm \</span>
<a href="#l8.13"></a><span id="l8.13"> 	ibNotifications.jsm \</span>
<a href="#l8.14"></a><span id="l8.14"> 	ibSounds.jsm \</span>
<a href="#l8.15"></a><span id="l8.15"> 	imContentSink.jsm \</span>
<a href="#l8.16"></a><span id="l8.16"> 	imServices.jsm \</span>
<a href="#l8.17"></a><span id="l8.17"> 	imSmileys.jsm \</span>
<a href="#l8.18"></a><span id="l8.18"> 	$(NULL)</span>
<a href="#l8.19"></a><span id="l8.19"> </span>
<a href="#l8.20"></a><span id="l8.20"> EXTRA_PP_JS_MODULES = \</span>
<a href="#l8.21"></a><span id="l8.21" class="difflineplus">+	ibCore.jsm \</span>
<a href="#l8.22"></a><span id="l8.22"> 	hiddenWindow.jsm \</span>
<a href="#l8.23"></a><span id="l8.23"> 	imThemes.jsm \</span>
<a href="#l8.24"></a><span id="l8.24"> 	imTextboxUtils.jsm \</span>
<a href="#l8.25"></a><span id="l8.25"> 	imWindows.jsm \</span>
<a href="#l8.26"></a><span id="l8.26"> 	$(NULL)</span>
<a href="#l8.27"></a><span id="l8.27"> </span>
<a href="#l8.28"></a><span id="l8.28" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l8.29"></a><span id="l8.29" class="difflineplus">+EXTRA_JS_MODULES += ibWinJumpList.jsm</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineplus">+endif</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineplus">+</span>
<a href="#l8.32"></a><span id="l8.32"> include $(topsrcdir)/config/rules.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/im/modules/ibCore.jsm</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/im/modules/ibCore.jsm</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -94,16 +94,26 @@ var Core = {</span>
<a href="#l9.4"></a><span id="l9.4">       this.uninitPurpleCore();</span>
<a href="#l9.5"></a><span id="l9.5">       return false;</span>
<a href="#l9.6"></a><span id="l9.6">     }</span>
<a href="#l9.7"></a><span id="l9.7"> </span>
<a href="#l9.8"></a><span id="l9.8">     Services.conversations.initConversations();</span>
<a href="#l9.9"></a><span id="l9.9">     Conversations.init();</span>
<a href="#l9.10"></a><span id="l9.10">     Notifications.init();</span>
<a href="#l9.11"></a><span id="l9.11">     Sounds.init();</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineplus">+#ifdef XP_WIN</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+    // For windows seven, initialize the jump list module.</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineplus">+    const WINTASKBAR_CONTRACTID = &quot;@mozilla.org/windows-taskbar;1&quot;;</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineplus">+    if (WINTASKBAR_CONTRACTID in Cc &amp;&amp;</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineplus">+        Cc[WINTASKBAR_CONTRACTID].getService(Ci.nsIWinTaskbar).available) {</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineplus">+      let temp = {};</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineplus">+      Cu.import(&quot;resource:///modules/ibWinJumpList.jsm&quot;, temp);</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineplus">+      temp.WinJumpList.init();</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineplus">+    }</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineplus">+#endif</span>
<a href="#l9.22"></a><span id="l9.22"> </span>
<a href="#l9.23"></a><span id="l9.23">     this._events.forEach(function (aTopic) {</span>
<a href="#l9.24"></a><span id="l9.24">       Services.obs.addObserver(Core, aTopic, false);</span>
<a href="#l9.25"></a><span id="l9.25">     });</span>
<a href="#l9.26"></a><span id="l9.26"> </span>
<a href="#l9.27"></a><span id="l9.27">     this._showAccountManagerIfNeeded(true);</span>
<a href="#l9.28"></a><span id="l9.28">     return true;</span>
<a href="#l9.29"></a><span id="l9.29">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">new file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- /dev/null</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ b/im/modules/ibWinJumpList.jsm</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -0,0 +1,181 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineplus">+/* ***** BEGIN LICENSE BLOCK *****</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineplus">+ * Version: MPL 1.1/GPL 2.0/LGPL 2.1</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineplus">+ *</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineplus">+ * The contents of this file are subject to the Mozilla Public License Version</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineplus">+ * 1.1 (the &quot;License&quot;); you may not use this file except in compliance with</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineplus">+ * the License. You may obtain a copy of the License at</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineplus">+ * http://www.mozilla.org/MPL/</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineplus">+ *</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+ * Software distributed under the License is distributed on an &quot;AS IS&quot; basis,</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineplus">+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineplus">+ * for the specific language governing rights and limitations under the</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineplus">+ * License.</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineplus">+ *</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineplus">+ * The Original Code is Instantbird.</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineplus">+ *</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineplus">+ * The Initial Developer of the Original Code is</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineplus">+ * Patrick Cloke &lt;clokep@gmail.com&gt;.</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineplus">+ * Portions created by the Initial Developer are Copyright (C) 2011</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineplus">+ * the Initial Developer. All Rights Reserved.</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineplus">+ *</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineplus">+ * Contributor(s):</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineplus">+ *   Benedikt Pfeifer &lt;benediktp@ymail.com&gt;</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineplus">+ *</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineplus">+ * Alternatively, the contents of this file may be used under the terms of</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineplus">+ * either the GNU General Public License Version 2 or later (the &quot;GPL&quot;), or</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineplus">+ * the GNU Lesser General Public License Version 2.1 or later (the &quot;LGPL&quot;),</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineplus">+ * in which case the provisions of the GPL or the LGPL are applicable instead</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineplus">+ * of those above. If you wish to allow use of your version of this file only</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineplus">+ * under the terms of either the GPL or the LGPL, and not to allow others to</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineplus">+ * use your version of this file under the terms of the MPL, indicate your</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineplus">+ * decision by deleting the provisions above and replace them with the notice</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineplus">+ * and other provisions required by the GPL or the LGPL. If you do not delete</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineplus">+ * the provisions above, a recipient may use your version of this file under</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineplus">+ * the terms of any one of the MPL, the GPL or the LGPL.</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineplus">+ *</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineplus">+ * ***** END LICENSE BLOCK ***** */</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineplus">+</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineplus">+const EXPORTED_SYMBOLS = [&quot;WinJumpList&quot;];</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineplus">+</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineplus">+const {classes: Cc, interfaces: Ci, utils: Cu} = Components;</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineplus">+</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineplus">+Cu.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineplus">+Cu.import(&quot;resource:///modules/imServices.jsm&quot;);</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineplus">+</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineplus">+XPCOMUtils.defineLazyGetter(this, &quot;bundle&quot;, function()</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineplus">+  Services.strings.createBundle(&quot;chrome://instantbird/locale/winjumplist.properties&quot;)</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineplus">+);</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineplus">+</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineplus">+var WinJumpList = {</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineplus">+  winJumpListBuilder: null,</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineplus">+</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineplus">+  /*</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineplus">+    Jumplist entries can be of the following 'type' (required attribute):</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineplus">+      type: &quot;shortcut&quot;        // nsIJumpListShortcut</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineplus">+        label: &lt;string&gt;,      //  label shown in the jumplist</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineplus">+        description: &lt;string&gt; //  longer description, shown in a tooltip</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineplus">+        parameter: &lt;string&gt;   //  commandline parameter for this action</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineplus">+        iconIndex: &lt;int&gt;      //  number of icon resource in executable</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineplus">+        id: &lt;string&gt;          //  Only used to identify a certain element</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineplus">+                              //   if an extension wants to insert an</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineplus">+                              //   item at a specific position</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineplus">+     or</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineplus">+      type: &quot;separator&quot;       // nsIJumpListSeparator, no way to customize this</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineplus">+        id: &lt;string&gt;          //  see description of shortcut id</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineplus">+  */</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineplus">+  // Default jumplist entries for changing the status.</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineplus">+  jumplistEntries: [</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineplus">+    { type: &quot;shortcut&quot;,</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineplus">+      id: &quot;status_available&quot;,</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineplus">+      get label() bundle.GetStringFromName(&quot;available.label&quot;),</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineplus">+      get description() bundle.GetStringFromName(&quot;available.tooltip&quot;),</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineplus">+      parameter: &quot;-status available&quot;,</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineplus">+      iconIndex: 1</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineplus">+    },</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineplus">+    { type: &quot;shortcut&quot;,</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineplus">+      id: &quot;status_away&quot;,</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineplus">+      get label() bundle.GetStringFromName(&quot;away.label&quot;),</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineplus">+      get description() bundle.GetStringFromName(&quot;away.tooltip&quot;),</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineplus">+      parameter: &quot;-status away&quot;,</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineplus">+      iconIndex: 2</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineplus">+    },</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineplus">+    { type: &quot;shortcut&quot;,</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineplus">+      id: &quot;status_offline&quot;,</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineplus">+      get label() bundle.GetStringFromName(&quot;offline.label&quot;),</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineplus">+      get description() bundle.GetStringFromName(&quot;offline.tooltip&quot;),</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineplus">+      parameter: &quot;-status offline&quot;,</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineplus">+      iconIndex: 3</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineplus">+    }</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineplus">+  ],</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineplus">+</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineplus">+  // This is called by the Instantbird core and does not need to be re-called by</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineplus">+  // any other code working with jump lists.</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineplus">+  init: function WJL_init() {</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineplus">+    let builder = Cc[&quot;@mozilla.org/windows-taskbar;1&quot;]</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineplus">+                     .getService(Ci.nsIWinTaskbar).createJumpListBuilder();</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineplus">+    if (!builder || !builder.available)</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineplus">+      return;</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineplus">+</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineplus">+    this.winJumpListBuilder = builder;</span>
<a href="#l10.104"></a><span id="l10.104" class="difflineplus">+</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineplus">+    // Set the jump list using the default jumplistEntries.</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineplus">+    this.set();</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineplus">+  },</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineplus">+</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineplus">+  set: function WJL_set() {</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineplus">+    // Return early if winJumpListBuilder doesn't exist.</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineplus">+    if (!this.winJumpListBuilder)</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineplus">+      return;</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineplus">+</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineplus">+    // Remove the current jump list so it can be replaced.</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineplus">+    this.reset();</span>
<a href="#l10.116"></a><span id="l10.116" class="difflineplus">+</span>
<a href="#l10.117"></a><span id="l10.117" class="difflineplus">+    let items = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineplus">+</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineplus">+    for each (let currentItem in this.jumplistEntries) {</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineplus">+      let item;</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineplus">+      if (currentItem.type == &quot;separator&quot;)</span>
<a href="#l10.122"></a><span id="l10.122" class="difflineplus">+        item = this._getSeparatorItem();</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineplus">+      else if (currentItem.type == &quot;shortcut&quot;) {</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineplus">+        item = this._getHandlerAppItem(currentItem.label,</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineplus">+                                       currentItem.description,</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineplus">+                                       currentItem.parameter,</span>
<a href="#l10.127"></a><span id="l10.127" class="difflineplus">+                                       currentItem.iconIndex);</span>
<a href="#l10.128"></a><span id="l10.128" class="difflineplus">+      }</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineplus">+      else if (currentItem.type == &quot;link&quot;)</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineplus">+        item = this._getLinkItem(currentItem.uri, currentItem.uriTitle);</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineplus">+      else</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineplus">+        throw &quot;Unknown jumplist item type: &quot; + currentItem.type;</span>
<a href="#l10.133"></a><span id="l10.133" class="difflineplus">+</span>
<a href="#l10.134"></a><span id="l10.134" class="difflineplus">+      items.appendElement(item, false);</span>
<a href="#l10.135"></a><span id="l10.135" class="difflineplus">+    }</span>
<a href="#l10.136"></a><span id="l10.136" class="difflineplus">+</span>
<a href="#l10.137"></a><span id="l10.137" class="difflineplus">+    try {</span>
<a href="#l10.138"></a><span id="l10.138" class="difflineplus">+      // Initialize the array.</span>
<a href="#l10.139"></a><span id="l10.139" class="difflineplus">+      let items2 = Cc[&quot;@mozilla.org/array;1&quot;].createInstance(Ci.nsIMutableArray);</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineplus">+      this.winJumpListBuilder.initListBuild(items2);</span>
<a href="#l10.141"></a><span id="l10.141" class="difflineplus">+</span>
<a href="#l10.142"></a><span id="l10.142" class="difflineplus">+      this.winJumpListBuilder.addListToBuild(</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineplus">+        Ci.nsIJumpListBuilder.JUMPLIST_CATEGORY_TASKS, items);</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineplus">+</span>
<a href="#l10.145"></a><span id="l10.145" class="difflineplus">+      // Send the list to Windows</span>
<a href="#l10.146"></a><span id="l10.146" class="difflineplus">+      this.winJumpListBuilder.commitListBuild();</span>
<a href="#l10.147"></a><span id="l10.147" class="difflineplus">+    } catch (e) {</span>
<a href="#l10.148"></a><span id="l10.148" class="difflineplus">+      Cu.reportError(e);</span>
<a href="#l10.149"></a><span id="l10.149" class="difflineplus">+    }</span>
<a href="#l10.150"></a><span id="l10.150" class="difflineplus">+  },</span>
<a href="#l10.151"></a><span id="l10.151" class="difflineplus">+</span>
<a href="#l10.152"></a><span id="l10.152" class="difflineplus">+  reset: function WJL_reset() {</span>
<a href="#l10.153"></a><span id="l10.153" class="difflineplus">+    // Remove the jump list.</span>
<a href="#l10.154"></a><span id="l10.154" class="difflineplus">+    if (this.winJumpListBuilder)</span>
<a href="#l10.155"></a><span id="l10.155" class="difflineplus">+      this.winJumpListBuilder.deleteActiveList();</span>
<a href="#l10.156"></a><span id="l10.156" class="difflineplus">+  },</span>
<a href="#l10.157"></a><span id="l10.157" class="difflineplus">+</span>
<a href="#l10.158"></a><span id="l10.158" class="difflineplus">+  _getSeparatorItem: function WJL__getSeparatorItem() {</span>
<a href="#l10.159"></a><span id="l10.159" class="difflineplus">+    return Cc[&quot;@mozilla.org/windows-jumplistseparator;1&quot;]</span>
<a href="#l10.160"></a><span id="l10.160" class="difflineplus">+              .createInstance(Ci.nsIJumpListSeparator);</span>
<a href="#l10.161"></a><span id="l10.161" class="difflineplus">+  },</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineplus">+</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineplus">+  _getHandlerAppItem: function WJL__getHandlerAppItem(aName, aDescription,</span>
<a href="#l10.164"></a><span id="l10.164" class="difflineplus">+                                                      aArgs, aIconIndex) {</span>
<a href="#l10.165"></a><span id="l10.165" class="difflineplus">+    var file = Services.dirsvc.get(&quot;XCurProcD&quot;, Ci.nsILocalFile);</span>
<a href="#l10.166"></a><span id="l10.166" class="difflineplus">+</span>
<a href="#l10.167"></a><span id="l10.167" class="difflineplus">+    // XXX where can we grab this from in the build? Do we need to?</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineplus">+    file.append(&quot;instantbird.exe&quot;);</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineplus">+</span>
<a href="#l10.170"></a><span id="l10.170" class="difflineplus">+    var handlerApp = Cc[&quot;@mozilla.org/uriloader/local-handler-app;1&quot;]</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineplus">+                        .createInstance(Ci.nsILocalHandlerApp);</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineplus">+    handlerApp.executable = file;</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineplus">+    // Handlers default to the leaf name if a name is not specified.</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineplus">+    if (aName &amp;&amp; aName.length != 0)</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineplus">+      handlerApp.name = aName;</span>
<a href="#l10.176"></a><span id="l10.176" class="difflineplus">+    handlerApp.detailedDescription = aDescription;</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineplus">+    handlerApp.appendParameter(aArgs);</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineplus">+</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineplus">+    var item = Cc[&quot;@mozilla.org/windows-jumplistshortcut;1&quot;]</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineplus">+                  .createInstance(Ci.nsIJumpListShortcut);</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineplus">+    item.app = handlerApp;</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineplus">+    item.iconIndex = aIconIndex;</span>
<a href="#l10.183"></a><span id="l10.183" class="difflineplus">+    return item;</span>
<a href="#l10.184"></a><span id="l10.184" class="difflineplus">+  }</span>
<a href="#l10.185"></a><span id="l10.185" class="difflineplus">+};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">new file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..3af15dba5004965d04dc5a04e1be22ae6c315ce6</span>
<a href="#l11.3"></a><span id="l11.3">GIT binary patch
literal 1150
zc$}q_OH5ip6ov-@6Oo6AfgnapG=lL3K~SR+h-gI7C`Nps#AuAhotrMSN#nYU#%{W5
znsm`slP-u&amp;7hScBrjPh)QCo|ZibWBW`Y5(8{@$xzR0v(PbMxO!=AJV%-&lt;f|dAuQ_2
z$RJd^LB=?QNU5HhQpVW`p}x{@LQEWz&amp;;YQmirgeBO4F3wlmZuWUyP~Z&lt;KuECSd*+M
z{}CUe=OT#Sh&gt;-p|9b7jTtOqQRNfM=FlH|_v?((3VS3&gt;z&amp;iJa9O$d+Zu{E!LZq7Z5G
zX&lt;)x(gWMsYW8&gt;Eq%m|&gt;}(4ypP3DjOS^4Ic_yP6C6vK(0-vmja$fj7?s_dS=HV}jvj
zPqCx=RXwWwRnUFYp=_fJMe9W&lt;SSvu@r#vWD6p(tP5HE?rU*IG4RVu@BRx9NbCF+Cq
zs0-AgdaD}xO+7R|4T{%`QTV0slE-t-BUluG^N&gt;UD;Wk}c!&amp;?KI!_8&lt;2Ho&amp;xPLe2LY
z82kokedjzXuPT9u_lyVTjBHyrv`5;}5^h1`ZX?V)X4D31lk#M*WJB^!0_J?}+jevx
zcEcXAqjj$pO`)c1JQbT2DEF0L&lt;B`wFnS8fp!GeL~0rVX9pz}v3+V&lt;OE4O{=pBYPoZ
z_CKw0YcPB=4A)N=`i}b0b&lt;l&lt;O{Y0Khe`SnE@&gt;s&amp;uPsP2(jrIroG4g8!gV8}akDYKF
zIM5O4fNjrq&amp;a-pLQ|c*2%2Y~}@iXlO#eD_FPscI(dlW+_Ly0^gD=a|^i~%ErGeX4s
znD!(+hilh`vD2{_Pw!E0jK}OXLwrx1;NPo0rdf2eI#`#iaE2(3paaG^Bh*jTpnaO`
N{`~9xrT+l`qd)S(Lel^M</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">new file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..f41597c05b1b8c4fccdd803620298b849be56028</span>
<a href="#l12.3"></a><span id="l12.3">GIT binary patch
literal 1150
zc$}q_*-9fp6o$(fw+rbIH7FVgYRD)e1`$C-$1RE&gt;1Vuz~#RbO&amp;HxL)Z5L}QTh#=yH
zPvAvv!rbN^`XQQmfu?hpZ&gt;rUfi7_`b)%;CUea@-#ojO%Q6v@Zo5OR3LFS`&amp;f`SnA}
z@irsmU-K=*PrJw)KvA}Yc=bs|r4mwqK9u;F^L@4d;(K7T#ZykFip!-*88{pU&lt;&gt;eYS
zn~D(elxb7I_qU=X@%wctXl;eYMyRic&gt;T0O0gpv|n#z&lt;n?eqFb!D#_?*nt=i6&gt;4DBp
zXlnzn7u;@SE}$sLT+&amp;vI1B=&amp;gkEcQ*oykcE24Q#@dV8U(3)&lt;VkC#gLisH+2~6Dlfn
zi{-6We!t4f3e3&amp;H)D(n55C}kjKXi9PM+daD&lt;nol3n)P^%n6(XuHFkDjeH|7SV0s$D
zVHg`DkEgl$okvkLtUcP&gt;GdMbe-Cfw&amp;faPVForQ@B7$1kBp?n^&lt;+rZl2lM{nT1dfkk
ze;+nC$&gt;SLrfxf;^9&lt;Mj!pIBYhxV?pF6wc1z@DR4QVQsB2Pg7GS|7akf^6&amp;t$7+hY$
z`8hc}OG_{_lgrc4kg1=qtSp|oxzTxigu6SqzJ`m7!aRe6I&gt;p8B`)Bo!&amp;zI!oCC$?l
z+~1SoIX%tgnV(NnQ}fwB+5KzAh{bfCpZS(&amp;aZ#tXHot$f``Ba&amp;235AUG_I};$zjMf
VHCZ!N_J85?^RMUEyaE14e*t^oenbEO</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">new file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2">index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..135a6d1b2d5696780d83e0cc10f47a576a1e8f79</span>
<a href="#l13.3"></a><span id="l13.3">GIT binary patch
literal 1150
zc$}q_Noyie5XU=^58!Feb8|k%e4M%FC`M)QCWtphLC}DTqKUZS8snD4eT^FTeIYJ*
z^7x;w#vUdv49vWyn#b!`_3Bskf6Xvg&gt;?05`?D)$3xMr9y?CcwB0&amp;az2ztWpwzF#vZ
z1HjdvCK8E+to&gt;xo&amp;D#86?!%h!c&gt;j^_&amp;F$^&amp;UaeNcXf(oVwZd#RL#x$7sZ&gt;HN7Vl}#
z1z)d1p@7flLnsu2-|vUV&lt;AKxZgu~(BVi^nu$mMd--s5vA{`2!QlF1~Vo}Lg6hY&lt;(_
z;Prapa=CDSe-E3@28+eQ$GG8nB@)R#kw_qy%i;C)6{%DTu~-a`kB&lt;ljgIrE-w;K-+
z53t+qxVyXKS-4u6OeWN7HI&amp;O`&lt;nwu?(`hc3cs!11G&lt;udtrBYE2GO8_|^Zx#hx3@P`
zDist81!S{Xyu7@C@;b+(*XzOes9vw5*XyCxYN63+pjxe&gt;SS+6KL?V&amp;jJd^|9-*&amp;r=
z(P)HzzYm%&gt;o6W!S5C^Xf%5y%SV=|dwFc_fI&gt;74LnGMP_2)CXQy6l=9wVX;_XI-O!T
z9HQIpay-O#%tJla&gt;2!Skgff|IPd@AQ8q4Jpv)Swu57mTtN~IFVL-nSf^Li#NXfzt^
zb~|h~8+?3xa6IGj_=JaIkk*cMOq!$^&lt;g?vw&amp;+^dOhrW9+-5+A1{!;&amp;WKjJ0rN~O|^
O_vc^lFZ}`j$9@5VEFlB{</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

