<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 18425:0c9f89670ac89a2bcd4c7653611670a9f2a97af0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 0c9f89670ac89a2bcd4c7653611670a9f2a97af0" />
<meta property="og:url" content="/comm-central/rev/0c9f89670ac89a2bcd4c7653611670a9f2a97af0" />
<meta property="og:description" content="Bug 1207363 - Use Array.includes in mail/ instead of indexOf != / == -1. r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 0c9f89670ac89a2bcd4c7653611670a9f2a97af0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/0c9f89670ac89a2bcd4c7653611670a9f2a97af0">shortlog</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/0c9f89670ac89a2bcd4c7653611670a9f2a97af0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0">files</a> |
changeset |
<a href="/comm-central/raw-rev/0c9f89670ac89a2bcd4c7653611670a9f2a97af0">raw</a>  | <a href="/comm-central/archive/0c9f89670ac89a2bcd4c7653611670a9f2a97af0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1207363">Bug 1207363</a> - Use Array.includes in mail/ instead of indexOf != / == -1. r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 23 Sep 2015 23:38:30 +0200</td></tr>

<tr>
 <td>changeset 18425</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/0c9f89670ac89a2bcd4c7653611670a9f2a97af0">0c9f89670ac89a2bcd4c7653611670a9f2a97af0</a></td>
</tr>



<tr>
<td>parent 18424</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/9f515d59d5f5581d4b380ba4c4f6a7f7cfd5b30d">9f515d59d5f5581d4b380ba4c4f6a7f7cfd5b30d</a>
</td>
</tr>

<tr>
<td>child 18426</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6b0dd3834439cdd74aef606eb9b119bebd1c9dc9">6b0dd3834439cdd74aef606eb9b119bebd1c9dc9</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=0c9f89670ac89a2bcd4c7653611670a9f2a97af0">11284</a></td></tr>
<tr><td>push user</td><td>archaeopteryx@coole-files.de</td></tr>
<tr><td>push date</td><td class="date age">Thu, 24 Sep 2015 12:12:35 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@a54375d27b3f [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a54375d27b3f16590be97be53e55240b74500991">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=a54375d27b3f16590be97be53e55240b74500991&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a54375d27b3f16590be97be53e55240b74500991&newProject=comm-central&newRevision=0c9f89670ac89a2bcd4c7653611670a9f2a97af0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a54375d27b3f16590be97be53e55240b74500991&newProject=comm-central&newRevision=0c9f89670ac89a2bcd4c7653611670a9f2a97af0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=a54375d27b3f16590be97be53e55240b74500991&newProject=comm-central&newRevision=0c9f89670ac89a2bcd4c7653611670a9f2a97af0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1207363">1207363</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1207363">Bug 1207363</a> - Use Array.includes in mail/ instead of indexOf != / == -1. r=mkmelin</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/FilterListDialog.js">mail/base/content/FilterListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/FilterListDialog.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/FilterListDialog.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/FilterListDialog.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/FilterListDialog.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/FilterListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderDisplay.js">mail/base/content/folderDisplay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderDisplay.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderDisplay.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderDisplay.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderDisplay.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderDisplay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderPane.js">mail/base/content/folderPane.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderPane.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderPane.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderPane.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderPane.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/folderPane.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mail3PaneWindowCommands.js">mail/base/content/mail3PaneWindowCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mail3PaneWindowCommands.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mail3PaneWindowCommands.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mail3PaneWindowCommands.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mail3PaneWindowCommands.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mail3PaneWindowCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailCommands.js">mail/base/content/mailCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailCommands.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailCommands.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailCommands.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailCommands.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWidgets.xml">mail/base/content/mailWidgets.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWidgets.xml">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWidgets.xml">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWidgets.xml">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWidgets.xml">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWidgets.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/specialTabs.js">mail/base/content/specialTabs.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/specialTabs.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/specialTabs.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/specialTabs.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/specialTabs.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/specialTabs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/subscribe.js">mail/base/content/subscribe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/subscribe.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/subscribe.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/subscribe.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/subscribe.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/subscribe.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/tabmail.xml">mail/base/content/tabmail.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/tabmail.xml">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/tabmail.xml">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/tabmail.xml">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/tabmail.xml">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/content/tabmail.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/attachmentChecker.js">mail/base/modules/attachmentChecker.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/attachmentChecker.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/attachmentChecker.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/attachmentChecker.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/attachmentChecker.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/attachmentChecker.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/dbViewWrapper.js">mail/base/modules/dbViewWrapper.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/dbViewWrapper.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/dbViewWrapper.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/dbViewWrapper.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/dbViewWrapper.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/dbViewWrapper.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/mailMigrator.js">mail/base/modules/mailMigrator.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/mailMigrator.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/mailMigrator.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/mailMigrator.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/mailMigrator.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/mailMigrator.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/oauth.jsm">mail/base/modules/oauth.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/oauth.jsm">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/oauth.jsm">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/oauth.jsm">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/oauth.jsm">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/modules/oauth.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/test/unit/test_mailGlue_distribution.js">mail/base/test/unit/test_mailGlue_distribution.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/test/unit/test_mailGlue_distribution.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/test/unit/test_mailGlue_distribution.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/test/unit/test_mailGlue_distribution.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/test/unit/test_mailGlue_distribution.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/base/test/unit/test_mailGlue_distribution.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/aboutSupportUnix.js">mail/components/about-support/aboutSupportUnix.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/aboutSupportUnix.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/aboutSupportUnix.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/aboutSupportUnix.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/aboutSupportUnix.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/aboutSupportUnix.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/content/export.js">mail/components/about-support/content/export.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/content/export.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/content/export.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/content/export.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/content/export.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/about-support/content/export.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/cloudfile/cloudFileAccounts.js">mail/components/cloudfile/cloudFileAccounts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/cloudfile/cloudFileAccounts.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/cloudfile/cloudFileAccounts.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/cloudfile/cloudFileAccounts.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/cloudfile/cloudFileAccounts.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/cloudfile/cloudFileAccounts.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/test/unit/test_about_support.js">mail/components/test/unit/test_about_support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/test/unit/test_about_support.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/test/unit/test_about_support.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/test/unit/test_about_support.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/test/unit/test_about_support.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/components/test/unit/test_about_support.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-ab-whitelist.js">mail/test/mozmill/account/test-ab-whitelist.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-ab-whitelist.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-ab-whitelist.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-ab-whitelist.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-ab-whitelist.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-ab-whitelist.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-account-tree.js">mail/test/mozmill/account/test-account-tree.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-account-tree.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-account-tree.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-account-tree.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-account-tree.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/account/test-account-tree.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/addrbook/test-address-book.js">mail/test/mozmill/addrbook/test-address-book.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/addrbook/test-address-book.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/addrbook/test-address-book.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/addrbook/test-address-book.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/addrbook/test-address-book.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/addrbook/test-address-book.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/attachment/test-attachment-events.js">mail/test/mozmill/attachment/test-attachment-events.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/attachment/test-attachment-events.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/attachment/test-attachment-events.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/attachment/test-attachment-events.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/attachment/test-attachment-events.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/attachment/test-attachment-events.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-address-widgets.js">mail/test/mozmill/composition/test-address-widgets.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-address-widgets.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-address-widgets.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-address-widgets.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-address-widgets.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-address-widgets.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-reply-addresses.js">mail/test/mozmill/composition/test-reply-addresses.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-reply-addresses.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-reply-addresses.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-reply-addresses.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-reply-addresses.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/composition/test-reply-addresses.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/content-tabs/test-about-support.js">mail/test/mozmill/content-tabs/test-about-support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/content-tabs/test-about-support.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/content-tabs/test-about-support.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/content-tabs/test-about-support.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/content-tabs/test-about-support.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/content-tabs/test-about-support.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-message-commands.js">mail/test/mozmill/folder-display/test-message-commands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-message-commands.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-message-commands.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-message-commands.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-message-commands.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-message-commands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-pane-focus.js">mail/test/mozmill/folder-display/test-pane-focus.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-pane-focus.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-pane-focus.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-pane-focus.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-pane-focus.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-display/test-pane-focus.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">mail/test/mozmill/folder-tree-modes/test-smart-folders.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/folder-tree-modes/test-smart-folders.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js">mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/pref-window/test-font-chooser.js">mail/test/mozmill/pref-window/test-font-chooser.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/pref-window/test-font-chooser.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/pref-window/test-font-chooser.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/pref-window/test-font-chooser.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/pref-window/test-font-chooser.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/pref-window/test-font-chooser.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">mail/test/mozmill/shared-modules/test-content-tab-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-observer-helpers.js">mail/test/mozmill/shared-modules/test-observer-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-observer-helpers.js">file</a> |
<a href="/comm-central/annotate/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-observer-helpers.js">annotate</a> |
<a href="/comm-central/diff/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-observer-helpers.js">diff</a> |
<a href="/comm-central/comparison/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-observer-helpers.js">comparison</a> |
<a href="/comm-central/log/0c9f89670ac89a2bcd4c7653611670a9f2a97af0/mail/test/mozmill/shared-modules/test-observer-helpers.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/FilterListDialog.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/FilterListDialog.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -641,17 +641,17 @@ function rebuildFilterList()</span>
<a href="#l1.4"></a><span id="l1.4">       listitem.addEventListener(&quot;click&quot;, onFilterClick, true);</span>
<a href="#l1.5"></a><span id="l1.5">       listitem.addEventListener(&quot;dblclick&quot;, onFilterDoubleClick, true);</span>
<a href="#l1.6"></a><span id="l1.6">     }</span>
<a href="#l1.7"></a><span id="l1.7">     // Set the listitem values to represent the current filter.</span>
<a href="#l1.8"></a><span id="l1.8">     nameCell.setAttribute(&quot;label&quot;, filter.filterName);</span>
<a href="#l1.9"></a><span id="l1.9">     enabledCell.setAttribute(&quot;enabled&quot;, filter.enabled);</span>
<a href="#l1.10"></a><span id="l1.10">     listitem._filter = filter;</span>
<a href="#l1.11"></a><span id="l1.11"> </span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    if (selectedNames.indexOf(filter.filterName) != -1)</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    if (selectedNames.includes(filter.filterName))</span>
<a href="#l1.14"></a><span id="l1.14">       gFilterListbox.addItemToSelection(listitem);</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16">     listitemIndex++;</span>
<a href="#l1.17"></a><span id="l1.17">   }</span>
<a href="#l1.18"></a><span id="l1.18">   // Remove any superfluous listitems, if the number of filters shrunk.</span>
<a href="#l1.19"></a><span id="l1.19">   for (let i = listitemCount - 1; i &gt;= listitemIndex; i--) {</span>
<a href="#l1.20"></a><span id="l1.20">     gFilterListbox.lastChild.remove();</span>
<a href="#l1.21"></a><span id="l1.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/folderDisplay.js</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/folderDisplay.js</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -239,24 +239,24 @@ FolderDisplayWidget.prototype = {</span>
<a href="#l2.4"></a><span id="l2.4">    * the single- and multi-message content windows. When changing focus to the</span>
<a href="#l2.5"></a><span id="l2.5">    * message pane, be sure to focus the appropriate content window in addition</span>
<a href="#l2.6"></a><span id="l2.6">    * to the messagepanebox (doing both is required in order to blur the</span>
<a href="#l2.7"></a><span id="l2.7">    * previously-focused chrome element).</span>
<a href="#l2.8"></a><span id="l2.8">    *</span>
<a href="#l2.9"></a><span id="l2.9">    * @return the focused pane</span>
<a href="#l2.10"></a><span id="l2.10">    */</span>
<a href="#l2.11"></a><span id="l2.11">   get focusedPane() {</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-    let panes = [document.getElementById(id) for each (id in [</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+    let panes = [document.getElementById(id) for (id of [</span>
<a href="#l2.14"></a><span id="l2.14">       &quot;threadTree&quot;, &quot;folderTree&quot;, &quot;messagepanebox&quot;</span>
<a href="#l2.15"></a><span id="l2.15">     ])];</span>
<a href="#l2.16"></a><span id="l2.16"> </span>
<a href="#l2.17"></a><span id="l2.17">     let currentNode = top.document.activeElement;</span>
<a href="#l2.18"></a><span id="l2.18"> </span>
<a href="#l2.19"></a><span id="l2.19">     while (currentNode) {</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-      if (panes.indexOf(currentNode) != -1)</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineplus">+      if (panes.includes(currentNode))</span>
<a href="#l2.22"></a><span id="l2.22">         return currentNode;</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24">       currentNode = currentNode.parentNode;</span>
<a href="#l2.25"></a><span id="l2.25">     }</span>
<a href="#l2.26"></a><span id="l2.26">     return null;</span>
<a href="#l2.27"></a><span id="l2.27">   },</span>
<a href="#l2.28"></a><span id="l2.28"> </span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30" class="difflineat">@@ -1533,17 +1533,17 @@ FolderDisplayWidget.prototype = {</span>
<a href="#l2.31"></a><span id="l2.31">    *  probably be reset by the 'big bang' event (new view creation?).</span>
<a href="#l2.32"></a><span id="l2.32">    */</span>
<a href="#l2.33"></a><span id="l2.33">   _notifyWhenActive:</span>
<a href="#l2.34"></a><span id="l2.34">       function FolderDisplayWidget__notifyWhenActive(aNotificationFunc) {</span>
<a href="#l2.35"></a><span id="l2.35">     if (this._active) {</span>
<a href="#l2.36"></a><span id="l2.36">       aNotificationFunc.call(this);</span>
<a href="#l2.37"></a><span id="l2.37">     }</span>
<a href="#l2.38"></a><span id="l2.38">     else {</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-      if (this._notificationsPendingActivation.indexOf(aNotificationFunc) == -1)</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineplus">+      if (!this._notificationsPendingActivation.includes(aNotificationFunc))</span>
<a href="#l2.41"></a><span id="l2.41">         this._notificationsPendingActivation.push(aNotificationFunc);</span>
<a href="#l2.42"></a><span id="l2.42">     }</span>
<a href="#l2.43"></a><span id="l2.43">   },</span>
<a href="#l2.44"></a><span id="l2.44"> </span>
<a href="#l2.45"></a><span id="l2.45">   /**</span>
<a href="#l2.46"></a><span id="l2.46">    * Some notifications cannot run while the FolderDisplayWidget is inactive</span>
<a href="#l2.47"></a><span id="l2.47">    *  (presumbly because it is in a background tab).  We accumulate those in</span>
<a href="#l2.48"></a><span id="l2.48">    *  _notificationsPendingActivation and then this method runs them when we</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/folderPane.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/folderPane.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -1278,17 +1278,17 @@ let gFolderTreeView = {</span>
<a href="#l3.4"></a><span id="l3.4"> </span>
<a href="#l3.5"></a><span id="l3.5">   /**</span>
<a href="#l3.6"></a><span id="l3.6">    * Iterate over the persistent list and open the items (folders) stored in it.</span>
<a href="#l3.7"></a><span id="l3.7">    */</span>
<a href="#l3.8"></a><span id="l3.8">   _restoreOpenStates: function ftv__persistOpenStates() {</span>
<a href="#l3.9"></a><span id="l3.9">     let mode = this.mode;</span>
<a href="#l3.10"></a><span id="l3.10">     // Remove any saved state of modes where open state should not be persisted.</span>
<a href="#l3.11"></a><span id="l3.11">     // This is mostly for migration from older profiles that may have the info stored.</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    if (this._notPersistedModes.indexOf(mode) != -1) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+    if (this._notPersistedModes.includes(mode)) {</span>
<a href="#l3.14"></a><span id="l3.14">       delete this._persistOpenMap[mode];</span>
<a href="#l3.15"></a><span id="l3.15">     }</span>
<a href="#l3.16"></a><span id="l3.16"> </span>
<a href="#l3.17"></a><span id="l3.17">     let curLevel = 0;</span>
<a href="#l3.18"></a><span id="l3.18">     let tree = this;</span>
<a href="#l3.19"></a><span id="l3.19">     let map = tree._persistOpenMap[mode]; // may be undefined</span>
<a href="#l3.20"></a><span id="l3.20">     function openLevel() {</span>
<a href="#l3.21"></a><span id="l3.21">       let goOn = false;</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineat">@@ -1296,17 +1296,17 @@ let gFolderTreeView = {</span>
<a href="#l3.23"></a><span id="l3.23">       // So fallback on old trick of going backwards from the end, which</span>
<a href="#l3.24"></a><span id="l3.24">       // doesn't care when you add things at the end.</span>
<a href="#l3.25"></a><span id="l3.25">       for (let i = tree._rowMap.length - 1; i &gt;= 0; i--) {</span>
<a href="#l3.26"></a><span id="l3.26">         let row = tree._rowMap[i];</span>
<a href="#l3.27"></a><span id="l3.27">         if (row.level != curLevel)</span>
<a href="#l3.28"></a><span id="l3.28">           continue;</span>
<a href="#l3.29"></a><span id="l3.29"> </span>
<a href="#l3.30"></a><span id="l3.30">         // The initial state of all rows is closed, so toggle those we want open.</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-        if (!map || map.indexOf(row.id) != -1) {</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineplus">+        if (!map || map.includes(row.id)) {</span>
<a href="#l3.33"></a><span id="l3.33">           tree._toggleRow(i, false);</span>
<a href="#l3.34"></a><span id="l3.34">           goOn = true;</span>
<a href="#l3.35"></a><span id="l3.35">         }</span>
<a href="#l3.36"></a><span id="l3.36">       }</span>
<a href="#l3.37"></a><span id="l3.37"> </span>
<a href="#l3.38"></a><span id="l3.38">       // If we opened up any new kids, we need to check their level as well.</span>
<a href="#l3.39"></a><span id="l3.39">       curLevel++;</span>
<a href="#l3.40"></a><span id="l3.40">       if (goOn)</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineat">@@ -1318,17 +1318,17 @@ let gFolderTreeView = {</span>
<a href="#l3.42"></a><span id="l3.42">   /**</span>
<a href="#l3.43"></a><span id="l3.43">    * Remove the item from the persistent list, meaning the item should</span>
<a href="#l3.44"></a><span id="l3.44">    * be persisted as closed in the tree.</span>
<a href="#l3.45"></a><span id="l3.45">    *</span>
<a href="#l3.46"></a><span id="l3.46">    * @param aItemId  The URI of the folder item.</span>
<a href="#l3.47"></a><span id="l3.47">    */</span>
<a href="#l3.48"></a><span id="l3.48">   _persistItemClosed: function ftv_unpersistItem(aItemId) {</span>
<a href="#l3.49"></a><span id="l3.49">     let mode = this.mode;</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-    if (this._notPersistedModes.indexOf(mode) != -1)</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineplus">+    if (this._notPersistedModes.includes(mode))</span>
<a href="#l3.52"></a><span id="l3.52">       return;</span>
<a href="#l3.53"></a><span id="l3.53"> </span>
<a href="#l3.54"></a><span id="l3.54">     // If the whole mode is not in the map yet,</span>
<a href="#l3.55"></a><span id="l3.55">     // we can silently ignore the folder removal.</span>
<a href="#l3.56"></a><span id="l3.56">     if (!this._persistOpenMap[mode])</span>
<a href="#l3.57"></a><span id="l3.57">       return;</span>
<a href="#l3.58"></a><span id="l3.58"> </span>
<a href="#l3.59"></a><span id="l3.59">     let persistMapIndex = this._persistOpenMap[mode].indexOf(aItemId);</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineat">@@ -1339,23 +1339,23 @@ let gFolderTreeView = {</span>
<a href="#l3.61"></a><span id="l3.61">   /**</span>
<a href="#l3.62"></a><span id="l3.62">    * Add the item from the persistent list, meaning the item should</span>
<a href="#l3.63"></a><span id="l3.63">    * be persisted as open (expanded) in the tree.</span>
<a href="#l3.64"></a><span id="l3.64">    *</span>
<a href="#l3.65"></a><span id="l3.65">    * @param aItemId  The URI of the folder item.</span>
<a href="#l3.66"></a><span id="l3.66">    */</span>
<a href="#l3.67"></a><span id="l3.67">   _persistItemOpen: function ftv_persistItem(aItemId) {</span>
<a href="#l3.68"></a><span id="l3.68">     let mode = this.mode;</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-    if (this._notPersistedModes.indexOf(mode) != -1)</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineplus">+    if (this._notPersistedModes.includes(mode))</span>
<a href="#l3.71"></a><span id="l3.71">       return;</span>
<a href="#l3.72"></a><span id="l3.72"> </span>
<a href="#l3.73"></a><span id="l3.73">     if (!this._persistOpenMap[mode])</span>
<a href="#l3.74"></a><span id="l3.74">       this._persistOpenMap[mode] = [];</span>
<a href="#l3.75"></a><span id="l3.75"> </span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-    if (this._persistOpenMap[mode].indexOf(aItemId) == -1)</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineplus">+    if (!this._persistOpenMap[mode].includes(aItemId))</span>
<a href="#l3.78"></a><span id="l3.78">       this._persistOpenMap[mode].push(aItemId);</span>
<a href="#l3.79"></a><span id="l3.79">   },</span>
<a href="#l3.80"></a><span id="l3.80"> </span>
<a href="#l3.81"></a><span id="l3.81">   _tree: null,</span>
<a href="#l3.82"></a><span id="l3.82">   selection: null,</span>
<a href="#l3.83"></a><span id="l3.83">   /**</span>
<a href="#l3.84"></a><span id="l3.84">    * An array of ftvItems, where each item corresponds to a row in the tree</span>
<a href="#l3.85"></a><span id="l3.85">    */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/mail3PaneWindowCommands.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/mail3PaneWindowCommands.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -1052,22 +1052,22 @@ function ShowIgnoredMessageNotification(</span>
<a href="#l4.4"></a><span id="l4.4">             msgDb.MarkThreadIgnored(thread, thread.threadKey, false, gDBView);</span>
<a href="#l4.5"></a><span id="l4.5">           }</span>
<a href="#l4.6"></a><span id="l4.6">         });</span>
<a href="#l4.7"></a><span id="l4.7">         return false; // close notification</span>
<a href="#l4.8"></a><span id="l4.8">       }</span>
<a href="#l4.9"></a><span id="l4.9">     }</span>
<a href="#l4.10"></a><span id="l4.10">   ];</span>
<a href="#l4.11"></a><span id="l4.11"> </span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-  let threadIds = [];</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+  let threadIds = new Set();</span>
<a href="#l4.14"></a><span id="l4.14">   aMsgs.forEach(function(msg) {</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-    if (threadIds.indexOf(msg.threadId) == -1)</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-      threadIds.push(msg.threadId);</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineplus">+    if (!threadIds.has(msg.threadId))</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineplus">+      threadIds.add(msg.threadId);</span>
<a href="#l4.19"></a><span id="l4.19">   });</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-  let nbrOfThreads = threadIds.length;</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineplus">+  let nbrOfThreads = threadIds.size;</span>
<a href="#l4.22"></a><span id="l4.22"> </span>
<a href="#l4.23"></a><span id="l4.23">   if (nbrOfThreads == 1) {</span>
<a href="#l4.24"></a><span id="l4.24">     let ignoredThreadText = bundle.get(!aSubthreadOnly ?</span>
<a href="#l4.25"></a><span id="l4.25">       &quot;ignoredThreadFeedback&quot;: &quot;ignoredSubthreadFeedback&quot;);</span>
<a href="#l4.26"></a><span id="l4.26">     let subj = aMsgs[0].mime2DecodedSubject || &quot;&quot;;</span>
<a href="#l4.27"></a><span id="l4.27">     if (subj.length &gt; 45)</span>
<a href="#l4.28"></a><span id="l4.28">       subj = subj.substring(0, 45) + &quot;&quot;;</span>
<a href="#l4.29"></a><span id="l4.29">     let text = ignoredThreadText.replace(&quot;#1&quot;, subj);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/mailCommands.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/mailCommands.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -356,17 +356,17 @@ function SaveAsFile(uris)</span>
<a href="#l5.4"></a><span id="l5.4">     let filenames = [];</span>
<a href="#l5.5"></a><span id="l5.5">     for (let i = 0; i &lt; uris.length; i++) {</span>
<a href="#l5.6"></a><span id="l5.6">       let msgHdr = messenger.messageServiceFromURI(uris[i])</span>
<a href="#l5.7"></a><span id="l5.7">                             .messageURIToMsgHdr(uris[i]);</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">       let name = GenerateFilenameFromMsgHdr(msgHdr);</span>
<a href="#l5.10"></a><span id="l5.10">       name = GenerateValidFilename(name, &quot;.eml&quot;);</span>
<a href="#l5.11"></a><span id="l5.11">       let number = 2;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-      while (filenames.indexOf(name) != -1) { // should be unlikely</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+      while (filenames.includes(name)) { // should be unlikely</span>
<a href="#l5.14"></a><span id="l5.14">         name = name.substring(0, name.length - 4) + &quot;-&quot; + number + &quot;.eml&quot;;</span>
<a href="#l5.15"></a><span id="l5.15">         number++;</span>
<a href="#l5.16"></a><span id="l5.16">       }</span>
<a href="#l5.17"></a><span id="l5.17">       filenames.push(name);</span>
<a href="#l5.18"></a><span id="l5.18">     }</span>
<a href="#l5.19"></a><span id="l5.19">     messenger.saveMessages(uris.length, filenames, uris);</span>
<a href="#l5.20"></a><span id="l5.20">   }</span>
<a href="#l5.21"></a><span id="l5.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/mailWidgets.xml</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/mailWidgets.xml</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -1459,17 +1459,17 @@</span>
<a href="#l6.4"></a><span id="l6.4">               return null;</span>
<a href="#l6.5"></a><span id="l6.5"> </span>
<a href="#l6.6"></a><span id="l6.6">             let menulist = document.getAnonymousNodes(this)[0];</span>
<a href="#l6.7"></a><span id="l6.7">             let isCustom = isNaN(this.value);</span>
<a href="#l6.8"></a><span id="l6.8">             let typedValue = isCustom ? this.value : parseInt(this.value);</span>
<a href="#l6.9"></a><span id="l6.9"> </span>
<a href="#l6.10"></a><span id="l6.10">             // custom attribute to style the unavailable menulist item</span>
<a href="#l6.11"></a><span id="l6.11">             menulist.setAttribute(&quot;unavailable&quot;,</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-              (this.valueIds.indexOf(typedValue) &lt; 0) ? &quot;true&quot; : null);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+              (!this.valueIds.includes(typedValue)) ? &quot;true&quot; : null);</span>
<a href="#l6.14"></a><span id="l6.14"> </span>
<a href="#l6.15"></a><span id="l6.15">             // add a hidden menulist item if value is missing</span>
<a href="#l6.16"></a><span id="l6.16">             let menuitem = menulist.querySelector('[value=&quot;' + this.value + '&quot;]');</span>
<a href="#l6.17"></a><span id="l6.17">             if (!menuitem)</span>
<a href="#l6.18"></a><span id="l6.18">             { // need to add a hidden menuitem</span>
<a href="#l6.19"></a><span id="l6.19">               menuitem = menulist.appendItem(this.valueLabel, this.value);</span>
<a href="#l6.20"></a><span id="l6.20">               menuitem.hidden = true;</span>
<a href="#l6.21"></a><span id="l6.21">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -829,17 +829,17 @@ function ToggleMessageTagKey(keyNumber)</span>
<a href="#l7.4"></a><span id="l7.4">   let tagArray = MailServices.tags.getAllTags({});</span>
<a href="#l7.5"></a><span id="l7.5">   if (keyNumber &gt; tagArray.length)</span>
<a href="#l7.6"></a><span id="l7.6">     return;</span>
<a href="#l7.7"></a><span id="l7.7"> </span>
<a href="#l7.8"></a><span id="l7.8">   let key = tagArray[keyNumber - 1].key;</span>
<a href="#l7.9"></a><span id="l7.9">   let curKeys = msgHdr.getStringProperty(&quot;keywords&quot;).split(&quot; &quot;);</span>
<a href="#l7.10"></a><span id="l7.10">   if (msgHdr.label)</span>
<a href="#l7.11"></a><span id="l7.11">     curKeys.push(&quot;$label&quot; + msgHdr.label);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  let addKey = curKeys.indexOf(key) &lt; 0;</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  let addKey = !curKeys.includes(key);</span>
<a href="#l7.14"></a><span id="l7.14"> </span>
<a href="#l7.15"></a><span id="l7.15">   ToggleMessageTag(key, addKey);</span>
<a href="#l7.16"></a><span id="l7.16"> }</span>
<a href="#l7.17"></a><span id="l7.17"> </span>
<a href="#l7.18"></a><span id="l7.18"> function ToggleMessageTagMenu(target)</span>
<a href="#l7.19"></a><span id="l7.19"> {</span>
<a href="#l7.20"></a><span id="l7.20">   var key    = target.getAttribute(&quot;value&quot;);</span>
<a href="#l7.21"></a><span id="l7.21">   var addKey = target.getAttribute(&quot;checked&quot;) == &quot;true&quot;;</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineat">@@ -2606,17 +2606,17 @@ function SpaceHit(event)</span>
<a href="#l7.23"></a><span id="l7.23">   let focusedElement = document.commandDispatcher.focusedElement;</span>
<a href="#l7.24"></a><span id="l7.24"> </span>
<a href="#l7.25"></a><span id="l7.25">   if (!gMessageDisplay.singleMessageDisplay) {</span>
<a href="#l7.26"></a><span id="l7.26">     contentWindow = document.getElementById(&quot;multimessage&quot;).contentWindow;</span>
<a href="#l7.27"></a><span id="l7.27">   } else if (contentWindow.top == window) {</span>
<a href="#l7.28"></a><span id="l7.28">     // These elements should always take priority over scrolling.</span>
<a href="#l7.29"></a><span id="l7.29">     const importantElements = [&quot;otherActionsButton&quot;, &quot;attachmentToggle&quot;];</span>
<a href="#l7.30"></a><span id="l7.30">     contentWindow = window.content;</span>
<a href="#l7.31"></a><span id="l7.31" class="difflineminus">-    if (focusedElement &amp;&amp; importantElements.indexOf(focusedElement.id) != -1)</span>
<a href="#l7.32"></a><span id="l7.32" class="difflineplus">+    if (focusedElement &amp;&amp; importantElements.includes(focusedElement.id))</span>
<a href="#l7.33"></a><span id="l7.33">       return;</span>
<a href="#l7.34"></a><span id="l7.34">   }</span>
<a href="#l7.35"></a><span id="l7.35">   else if (focusedElement &amp;&amp; !hRefForClickEvent(event))</span>
<a href="#l7.36"></a><span id="l7.36">     return;</span>
<a href="#l7.37"></a><span id="l7.37"> </span>
<a href="#l7.38"></a><span id="l7.38">   if (!contentWindow)</span>
<a href="#l7.39"></a><span id="l7.39">     return;</span>
<a href="#l7.40"></a><span id="l7.40"> </span>
<a href="#l7.41"></a><span id="l7.41" class="difflineat">@@ -3021,17 +3021,17 @@ var gMessageNotificationBar =</span>
<a href="#l7.42"></a><span id="l7.42">         &quot;chrome://messenger/skin/icons/remote-blocked.png&quot;,</span>
<a href="#l7.43"></a><span id="l7.43">         this.msgNotificationBar.PRIORITY_WARNING_MEDIUM,</span>
<a href="#l7.44"></a><span id="l7.44">         buttons);</span>
<a href="#l7.45"></a><span id="l7.45">     }</span>
<a href="#l7.46"></a><span id="l7.46"> </span>
<a href="#l7.47"></a><span id="l7.47">     // The popup value is a space separated list of all the blocked hosts.</span>
<a href="#l7.48"></a><span id="l7.48">     let popup = document.getElementById(&quot;remoteContentOptions&quot;);</span>
<a href="#l7.49"></a><span id="l7.49">     let hosts = popup.value ? popup.value.split(&quot; &quot;) : [];</span>
<a href="#l7.50"></a><span id="l7.50" class="difflineminus">-    if (hosts.indexOf(aContentURI.host) == -1)</span>
<a href="#l7.51"></a><span id="l7.51" class="difflineplus">+    if (!hosts.includes(aContentURI.host))</span>
<a href="#l7.52"></a><span id="l7.52">       hosts.push(aContentURI.host);</span>
<a href="#l7.53"></a><span id="l7.53">     popup.value = hosts.join(&quot; &quot;);</span>
<a href="#l7.54"></a><span id="l7.54">   },</span>
<a href="#l7.55"></a><span id="l7.55"> </span>
<a href="#l7.56"></a><span id="l7.56">   isShowingRemoteContentNotification: function() {</span>
<a href="#l7.57"></a><span id="l7.57">     return !!this.msgNotificationBar.getNotificationWithValue(&quot;remoteContent&quot;);</span>
<a href="#l7.58"></a><span id="l7.58">   },</span>
<a href="#l7.59"></a><span id="l7.59"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -790,17 +790,17 @@ function SetTagHeader()</span>
<a href="#l8.4"></a><span id="l8.4"> </span>
<a href="#l8.5"></a><span id="l8.5">   // extract the tag keys from the msgHdr</span>
<a href="#l8.6"></a><span id="l8.6">   var msgKeyArray = msgHdr.getStringProperty(&quot;keywords&quot;).split(&quot; &quot;);</span>
<a href="#l8.7"></a><span id="l8.7"> </span>
<a href="#l8.8"></a><span id="l8.8">   // attach legacy label to the front if not already there</span>
<a href="#l8.9"></a><span id="l8.9">   var label = msgHdr.label;</span>
<a href="#l8.10"></a><span id="l8.10">   if (label) {</span>
<a href="#l8.11"></a><span id="l8.11">     let labelKey = &quot;$label&quot; + label;</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    if (msgKeyArray.indexOf(labelKey) &lt; 0)</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+    if (!msgKeyArray.includes(labelKey))</span>
<a href="#l8.14"></a><span id="l8.14">       msgKeyArray.unshift(labelKey);</span>
<a href="#l8.15"></a><span id="l8.15">   }</span>
<a href="#l8.16"></a><span id="l8.16"> </span>
<a href="#l8.17"></a><span id="l8.17">   // Rebuild the keywords string with just the keys that are actual tags or</span>
<a href="#l8.18"></a><span id="l8.18">   // legacy labels and not other keywords like Junk and NonJunk.</span>
<a href="#l8.19"></a><span id="l8.19">   // Retain their order, though, with the label as oldest element.</span>
<a href="#l8.20"></a><span id="l8.20">   for (let i = msgKeyArray.length - 1; i &gt;= 0; --i)</span>
<a href="#l8.21"></a><span id="l8.21">     if (!(msgKeyArray[i] in tagKeys))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/content/specialTabs.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/content/specialTabs.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -166,17 +166,17 @@ const DOMLinkHandler = {</span>
<a href="#l9.4"></a><span id="l9.4">     }</span>
<a href="#l9.5"></a><span id="l9.5">   },</span>
<a href="#l9.6"></a><span id="l9.6">   onLinkAdded: function (event) {</span>
<a href="#l9.7"></a><span id="l9.7">     let link = event.originalTarget;</span>
<a href="#l9.8"></a><span id="l9.8">     let rel = link.rel &amp;&amp; link.rel.toLowerCase();</span>
<a href="#l9.9"></a><span id="l9.9">     if (!link || !link.ownerDocument || !rel || !link.href)</span>
<a href="#l9.10"></a><span id="l9.10">       return;</span>
<a href="#l9.11"></a><span id="l9.11"> </span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-    if (rel.split(/\s+/).indexOf(&quot;icon&quot;) != -1) {</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+    if (rel.split(/\s+/).includes(&quot;icon&quot;)) {</span>
<a href="#l9.14"></a><span id="l9.14">       if (!Services.prefs.getBoolPref(&quot;browser.chrome.site_icons&quot;))</span>
<a href="#l9.15"></a><span id="l9.15">         return;</span>
<a href="#l9.16"></a><span id="l9.16"> </span>
<a href="#l9.17"></a><span id="l9.17">       let targetDoc = link.ownerDocument;</span>
<a href="#l9.18"></a><span id="l9.18">       let uri = makeURI(link.href, targetDoc.characterSet);</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20">       // Is this a failed icon?</span>
<a href="#l9.21"></a><span id="l9.21">       if (specialTabs.mFaviconService.isFailedFavicon(uri))</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineat">@@ -291,17 +291,17 @@ var contentTabBaseType = {</span>
<a href="#l9.23"></a><span id="l9.23">     aTab.browser.setAttribute(&quot;type&quot;, &quot;content-primary&quot;);</span>
<a href="#l9.24"></a><span id="l9.24">   },</span>
<a href="#l9.25"></a><span id="l9.25"> </span>
<a href="#l9.26"></a><span id="l9.26">   getBrowser: function getBrowser(aTab) {</span>
<a href="#l9.27"></a><span id="l9.27">     return aTab.browser;</span>
<a href="#l9.28"></a><span id="l9.28">   },</span>
<a href="#l9.29"></a><span id="l9.29"> </span>
<a href="#l9.30"></a><span id="l9.30">   hideChromeForLocation: function hideChromeForLocation(aLocation) {</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-    return this.inContentWhitelist.indexOf(aLocation) != -1;</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineplus">+    return this.inContentWhitelist.includes(aLocation);</span>
<a href="#l9.33"></a><span id="l9.33">   },</span>
<a href="#l9.34"></a><span id="l9.34"> </span>
<a href="#l9.35"></a><span id="l9.35">   /* _setUpLoadListener attaches a load listener to the tab browser that</span>
<a href="#l9.36"></a><span id="l9.36">    * checks the loaded URL to see if it matches the inContentWhitelist.</span>
<a href="#l9.37"></a><span id="l9.37">    * If so, then we apply the disablechrome attribute to the contentTab</span>
<a href="#l9.38"></a><span id="l9.38">    * container.</span>
<a href="#l9.39"></a><span id="l9.39">    */</span>
<a href="#l9.40"></a><span id="l9.40">   _setUpLoadListener: function setUpLoadListener(aTab) {</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineat">@@ -720,17 +720,17 @@ var specialTabs = {</span>
<a href="#l9.42"></a><span id="l9.42">       var update = um.getUpdateAt(0)</span>
<a href="#l9.43"></a><span id="l9.43">                      .QueryInterface(Components.interfaces.nsIPropertyBag);</span>
<a href="#l9.44"></a><span id="l9.44">     } catch (x) {</span>
<a href="#l9.45"></a><span id="l9.45">       Cu.reportError(&quot;Unable to find update: &quot; + x);</span>
<a href="#l9.46"></a><span id="l9.46">       return;</span>
<a href="#l9.47"></a><span id="l9.47">     }</span>
<a href="#l9.48"></a><span id="l9.48"> </span>
<a href="#l9.49"></a><span id="l9.49">     let actions = update.getProperty(&quot;actions&quot;);</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-    if (actions &amp;&amp; actions.indexOf(&quot;silent&quot;) != -1)</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineplus">+    if (actions &amp;&amp; actions.includes(&quot;silent&quot;))</span>
<a href="#l9.52"></a><span id="l9.52">       return;</span>
<a href="#l9.53"></a><span id="l9.53"> </span>
<a href="#l9.54"></a><span id="l9.54">     openWhatsNew();</span>
<a href="#l9.55"></a><span id="l9.55">   },</span>
<a href="#l9.56"></a><span id="l9.56"> </span>
<a href="#l9.57"></a><span id="l9.57">   /**</span>
<a href="#l9.58"></a><span id="l9.58">    * Looks at the existing prefs and determines if we should suggest the user</span>
<a href="#l9.59"></a><span id="l9.59">    * enables telemetry or not.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/base/content/subscribe.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/base/content/subscribe.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -325,17 +325,17 @@ function ReverseStateFromRow(aRow)</span>
<a href="#l10.4"></a><span id="l10.4"> {</span>
<a href="#l10.5"></a><span id="l10.5">   // To determine if the row is subscribed or not,</span>
<a href="#l10.6"></a><span id="l10.6">   // we get the properties for the &quot;subscribedColumn2&quot; cell in the row</span>
<a href="#l10.7"></a><span id="l10.7">   // and look for the &quot;subscribed&quot; property.</span>
<a href="#l10.8"></a><span id="l10.8">   // If the &quot;subscribed&quot; string is in the list of properties</span>
<a href="#l10.9"></a><span id="l10.9">   // we are subscribed.</span>
<a href="#l10.10"></a><span id="l10.10">   let col = gSearchTree.columns[&quot;subscribedColumn2&quot;];</span>
<a href="#l10.11"></a><span id="l10.11">   let properties = gSearchView.getCellProperties(aRow, col);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  let isSubscribed = (properties.split(&quot; &quot;).indexOf(&quot;subscribed&quot;) != -1);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  let isSubscribed = properties.split(&quot; &quot;).includes(&quot;subscribed&quot;);</span>
<a href="#l10.14"></a><span id="l10.14">   SetStateFromRow(aRow, !isSubscribed);</span>
<a href="#l10.15"></a><span id="l10.15"> }</span>
<a href="#l10.16"></a><span id="l10.16"> </span>
<a href="#l10.17"></a><span id="l10.17"> function SetStateFromRow(row, state)</span>
<a href="#l10.18"></a><span id="l10.18"> {</span>
<a href="#l10.19"></a><span id="l10.19">     var col = gSearchTree.columns[&quot;nameColumn2&quot;];</span>
<a href="#l10.20"></a><span id="l10.20">     var name = gSearchView.getCellText(row, col);</span>
<a href="#l10.21"></a><span id="l10.21">     SetState(name, state);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/base/content/tabmail.xml</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/base/content/tabmail.xml</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -370,24 +370,24 @@</span>
<a href="#l11.4"></a><span id="l11.4">             delete this.tabModes[modeName];</span>
<a href="#l11.5"></a><span id="l11.5"> </span>
<a href="#l11.6"></a><span id="l11.6">           delete this.tabTypes[aTabType.name];</span>
<a href="#l11.7"></a><span id="l11.7">         ]]&gt;&lt;/body&gt;</span>
<a href="#l11.8"></a><span id="l11.8">       &lt;/method&gt;</span>
<a href="#l11.9"></a><span id="l11.9">       &lt;method name=&quot;registerTabMonitor&quot;&gt;</span>
<a href="#l11.10"></a><span id="l11.10">         &lt;parameter name=&quot;aTabMonitor&quot;/&gt;</span>
<a href="#l11.11"></a><span id="l11.11">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-          if (this.tabMonitors.indexOf(aTabMonitor) == -1)</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+          if (!this.tabMonitors.includes(aTabMonitor))</span>
<a href="#l11.14"></a><span id="l11.14">             this.tabMonitors.push(aTabMonitor);</span>
<a href="#l11.15"></a><span id="l11.15">         ]]&gt;&lt;/body&gt;</span>
<a href="#l11.16"></a><span id="l11.16">       &lt;/method&gt;</span>
<a href="#l11.17"></a><span id="l11.17">       &lt;method name=&quot;unregisterTabMonitor&quot;&gt;</span>
<a href="#l11.18"></a><span id="l11.18">         &lt;parameter name=&quot;aTabMonitor&quot;/&gt;</span>
<a href="#l11.19"></a><span id="l11.19">         &lt;body&gt;&lt;![CDATA[</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-          if (this.tabMonitors.indexOf(aTabMonitor) &gt;= 0)</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineplus">+          if (this.tabMonitors.includes(aTabMonitor))</span>
<a href="#l11.22"></a><span id="l11.22">             this.tabMonitors.splice(this.tabMonitors.indexOf(aTabMonitor), 1);</span>
<a href="#l11.23"></a><span id="l11.23">         ]]&gt;&lt;/body&gt;</span>
<a href="#l11.24"></a><span id="l11.24">       &lt;/method&gt;</span>
<a href="#l11.25"></a><span id="l11.25">       &lt;!-- Given an index, tab node or tab info object, return a tuple of</span>
<a href="#l11.26"></a><span id="l11.26">            [iTab, tab info dictionary, tab DOM node].  If</span>
<a href="#l11.27"></a><span id="l11.27">            aTabIndexNodeOrInfo is not specified and aDefaultToCurrent is</span>
<a href="#l11.28"></a><span id="l11.28">            true, the current tab will be returned.  Otherwise, an</span>
<a href="#l11.29"></a><span id="l11.29">            exception will be thrown.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/base/modules/attachmentChecker.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/base/modules/attachmentChecker.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -63,17 +63,17 @@ function GetAttachmentKeywords(mailData,</span>
<a href="#l12.4"></a><span id="l12.4">       var matching = mailData.match(re);</span>
<a href="#l12.5"></a><span id="l12.5">       if (matching) {</span>
<a href="#l12.6"></a><span id="l12.6">         for (var j = 0; j &lt; matching.length; j++) {</span>
<a href="#l12.7"></a><span id="l12.7">           // Ignore the match if it was in a URL.</span>
<a href="#l12.8"></a><span id="l12.8">           if (!(/^(https?|ftp):\/\//i.test(matching[j]))) {</span>
<a href="#l12.9"></a><span id="l12.9">             // We can have several *different* matches for one dot-keyword.</span>
<a href="#l12.10"></a><span id="l12.10">             // E.g. foo.pdf and bar.pdf would both match for .pdf.</span>
<a href="#l12.11"></a><span id="l12.11">             var m = matching[j].trim();</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-            if (keywordsFound.indexOf(m) == -1)</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+            if (!keywordsFound.includes(m))</span>
<a href="#l12.14"></a><span id="l12.14">               keywordsFound.push(m);</span>
<a href="#l12.15"></a><span id="l12.15">           }</span>
<a href="#l12.16"></a><span id="l12.16">         }</span>
<a href="#l12.17"></a><span id="l12.17">       }</span>
<a href="#l12.18"></a><span id="l12.18">     }</span>
<a href="#l12.19"></a><span id="l12.19">     else {</span>
<a href="#l12.20"></a><span id="l12.20">       var start = IsCJK(kw.charCodeAt(0)) ? &quot;&quot; : (&quot;((^|\\s)\\S*)&quot;);</span>
<a href="#l12.21"></a><span id="l12.21">       var end = IsCJK(kw.charCodeAt(kw.length - 1)) ? &quot;&quot; : &quot;(&quot; + NOT_W + &quot;|$)&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/base/modules/dbViewWrapper.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/base/modules/dbViewWrapper.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -106,17 +106,17 @@ var FolderNotificationHelper = {</span>
<a href="#l13.4"></a><span id="l13.4">    *</span>
<a href="#l13.5"></a><span id="l13.5">    * @param aFolders The folders.</span>
<a href="#l13.6"></a><span id="l13.6">    * @param aNotherFolder A folder that may or may not be in aFolders.</span>
<a href="#l13.7"></a><span id="l13.7">    * @param aViewWrapper The view wrapper that is up to no good.</span>
<a href="#l13.8"></a><span id="l13.8">    */</span>
<a href="#l13.9"></a><span id="l13.9">   stalkFolders: function FolderNotificationHelper_stalkFolders(</span>
<a href="#l13.10"></a><span id="l13.10">       aFolders, aNotherFolder, aViewWrapper) {</span>
<a href="#l13.11"></a><span id="l13.11">     let folders = aFolders ? aFolders.concat() : [];</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-    if (aNotherFolder &amp;&amp; folders.indexOf(aNotherFolder) == -1)</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+    if (aNotherFolder &amp;&amp; !folders.includes(aNotherFolder))</span>
<a href="#l13.14"></a><span id="l13.14">       folders.push(aNotherFolder);</span>
<a href="#l13.15"></a><span id="l13.15">     for each (let [, folder] in Iterator(folders)) {</span>
<a href="#l13.16"></a><span id="l13.16">       let wrappers = this._interestedWrappers[folder.URI];</span>
<a href="#l13.17"></a><span id="l13.17">       if (wrappers == null)</span>
<a href="#l13.18"></a><span id="l13.18">         wrappers = this._interestedWrappers[folder.URI] = [];</span>
<a href="#l13.19"></a><span id="l13.19">       wrappers.push(aViewWrapper);</span>
<a href="#l13.20"></a><span id="l13.20">     }</span>
<a href="#l13.21"></a><span id="l13.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/base/modules/mailMigrator.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/base/modules/mailMigrator.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -131,55 +131,55 @@ var MailMigrator = {</span>
<a href="#l14.4"></a><span id="l14.4">         }</span>
<a href="#l14.5"></a><span id="l14.5"> </span>
<a href="#l14.6"></a><span id="l14.6">         // We want to remove the throbber from the menubar on Linux and</span>
<a href="#l14.7"></a><span id="l14.7">         // Windows, and from the mail-toolbar on OSX.</span>
<a href="#l14.8"></a><span id="l14.8">         let mailBarId = (Services.appinfo.OS == &quot;Darwin&quot;) ?</span>
<a href="#l14.9"></a><span id="l14.9">           &quot;mail-bar3&quot; : &quot;mail-toolbar-menubar2&quot;;</span>
<a href="#l14.10"></a><span id="l14.10">         let cs = xulStore.getValue(MESSENGER_DOCURL, mailBarId, &quot;currentset&quot;);</span>
<a href="#l14.11"></a><span id="l14.11"> </span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-        if (cs &amp;&amp; cs.indexOf(&quot;throbber-box&quot;) != -1) {</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+        if (cs &amp;&amp; cs.includes(&quot;throbber-box&quot;)) {</span>
<a href="#l14.14"></a><span id="l14.14">           cs = cs.replace(/(^|,)throbber-box($|,)/, &quot;$1$2&quot;);</span>
<a href="#l14.15"></a><span id="l14.15">           xulStore.setValue(MESSENGER_DOCURL, mailBarId, &quot;currentset&quot;, cs);</span>
<a href="#l14.16"></a><span id="l14.16">         }</span>
<a href="#l14.17"></a><span id="l14.17">       }</span>
<a href="#l14.18"></a><span id="l14.18"> </span>
<a href="#l14.19"></a><span id="l14.19">       // In UI version 3, we move the QFB button from the tabbar toolbar to</span>
<a href="#l14.20"></a><span id="l14.20">       // to the mail toolbar.</span>
<a href="#l14.21"></a><span id="l14.21">       if (currentUIVersion &lt; 3) {</span>
<a href="#l14.22"></a><span id="l14.22">         let cs = xulStore.getValue(MESSENGER_DOCURL, &quot;tabbar-toolbar&quot;, &quot;currentset&quot;);</span>
<a href="#l14.23"></a><span id="l14.23" class="difflineminus">-        if (cs &amp;&amp; cs.indexOf(&quot;qfb-show-filter-bar&quot;) != -1) {</span>
<a href="#l14.24"></a><span id="l14.24" class="difflineplus">+        if (cs &amp;&amp; cs.includes(&quot;qfb-show-filter-bar&quot;)) {</span>
<a href="#l14.25"></a><span id="l14.25">           cs = cs.replace(/(^|,)qfb-show-filter-bar($|,)/, &quot;$1$2&quot;);</span>
<a href="#l14.26"></a><span id="l14.26">           xulStore.setValue(MESSENGER_DOCURL, &quot;tabbar-toolbar&quot;, &quot;currentset&quot;, cs);</span>
<a href="#l14.27"></a><span id="l14.27">         }</span>
<a href="#l14.28"></a><span id="l14.28"> </span>
<a href="#l14.29"></a><span id="l14.29">         let cs3 = xulStore.getValue(MESSENGER_DOCURL, &quot;mail-bar3&quot;, &quot;currentset&quot;);</span>
<a href="#l14.30"></a><span id="l14.30" class="difflineminus">-        if (cs3 &amp;&amp; cs3.indexOf(&quot;qfb-show-filter-bar&quot;) == -1) {</span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-          if (cs3.indexOf(&quot;gloda-search&quot;) != -1) {</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+        if (cs3 &amp;&amp; !cs3.includes(&quot;qfb-show-filter-bar&quot;)) {</span>
<a href="#l14.33"></a><span id="l14.33" class="difflineplus">+          if (cs3.includes(&quot;gloda-search&quot;)) {</span>
<a href="#l14.34"></a><span id="l14.34">             // Put the QFB toggle before the gloda-search and any of</span>
<a href="#l14.35"></a><span id="l14.35">             // spring / spacer / separator.</span>
<a href="#l14.36"></a><span id="l14.36">             cs3 = cs3.replace(/(^|,)([spring,|spacer,|separator,]*)gloda-search($|,)/,</span>
<a href="#l14.37"></a><span id="l14.37">                              &quot;$1qfb-show-filter-bar,$2gloda-search$3&quot;);</span>
<a href="#l14.38"></a><span id="l14.38">           } else {</span>
<a href="#l14.39"></a><span id="l14.39">             // If there's no gloda-search, just put the QFB toggle at the end</span>
<a href="#l14.40"></a><span id="l14.40">             cs3 += &quot;,qfb-show-filter-bar&quot;;</span>
<a href="#l14.41"></a><span id="l14.41">           }</span>
<a href="#l14.42"></a><span id="l14.42">           xulStore.setValue(MESSENGER_DOCURL, &quot;mail-bar3&quot;, &quot;currentset&quot;, cs3);</span>
<a href="#l14.43"></a><span id="l14.43">         }</span>
<a href="#l14.44"></a><span id="l14.44">       }</span>
<a href="#l14.45"></a><span id="l14.45"> </span>
<a href="#l14.46"></a><span id="l14.46">       // In UI version 4, we add the chat button to the mail toolbar.</span>
<a href="#l14.47"></a><span id="l14.47">       if (currentUIVersion &lt; 4) {</span>
<a href="#l14.48"></a><span id="l14.48">         let cs = xulStore.getValue(MESSENGER_DOCURL, &quot;mail-bar3&quot;, &quot;currentset&quot;);</span>
<a href="#l14.49"></a><span id="l14.49" class="difflineminus">-        if (cs &amp;&amp; cs.indexOf(&quot;button-chat&quot;) == -1) {</span>
<a href="#l14.50"></a><span id="l14.50" class="difflineminus">-          if (cs.indexOf(&quot;button-newmsg&quot;) != -1) {</span>
<a href="#l14.51"></a><span id="l14.51" class="difflineplus">+        if (cs &amp;&amp; !cs.includes(&quot;button-chat&quot;)) {</span>
<a href="#l14.52"></a><span id="l14.52" class="difflineplus">+          if (cs.includes(&quot;button-newmsg&quot;)) {</span>
<a href="#l14.53"></a><span id="l14.53">             // Put the chat button after the newmsg button.</span>
<a href="#l14.54"></a><span id="l14.54">             cs = cs.replace(/(^|,)button-newmsg($|,)/,</span>
<a href="#l14.55"></a><span id="l14.55">                             &quot;$1button-newmsg,button-chat$2&quot;);</span>
<a href="#l14.56"></a><span id="l14.56" class="difflineminus">-          } else if (cs.indexOf(&quot;button-address&quot;) != -1) {</span>
<a href="#l14.57"></a><span id="l14.57" class="difflineplus">+          } else if (cs.includes(&quot;button-address&quot;)) {</span>
<a href="#l14.58"></a><span id="l14.58">             // If there's no newmsg button, put the chat button before the address book button.</span>
<a href="#l14.59"></a><span id="l14.59">             cs = cs.replace(/(^|,)button-address($|,)/,</span>
<a href="#l14.60"></a><span id="l14.60">                             &quot;$1button-chat,button-address$2&quot;);</span>
<a href="#l14.61"></a><span id="l14.61">           } else {</span>
<a href="#l14.62"></a><span id="l14.62">             // Otherwise, just put the chat button at the end.</span>
<a href="#l14.63"></a><span id="l14.63">             cs += &quot;,button-chat&quot;;</span>
<a href="#l14.64"></a><span id="l14.64">           }</span>
<a href="#l14.65"></a><span id="l14.65">           xulStore.setValue(MESSENGER_DOCURL, &quot;mail-bar3&quot;, &quot;currentset&quot;, cs);</span>
<a href="#l14.66"></a><span id="l14.66" class="difflineat">@@ -197,17 +197,17 @@ var MailMigrator = {</span>
<a href="#l14.67"></a><span id="l14.67">          * Helper function that attempts to add the AppMenu button to the</span>
<a href="#l14.68"></a><span id="l14.68">          * end of a toolbar with ID aToolbarID. Fails silently if this is</span>
<a href="#l14.69"></a><span id="l14.69">          * not possible, as is typical within our UI migration code.</span>
<a href="#l14.70"></a><span id="l14.70">          *</span>
<a href="#l14.71"></a><span id="l14.71">          * @param aToolbarID the ID of the toolbar to add the AppMenu to.</span>
<a href="#l14.72"></a><span id="l14.72">          */</span>
<a href="#l14.73"></a><span id="l14.73">         let addButtonToEnd = function(aToolbarID, aButtonID) {</span>
<a href="#l14.74"></a><span id="l14.74">           let cs = xulStore.getValue(MESSENGER_DOCURL, aToolbarID, &quot;currentset&quot;);</span>
<a href="#l14.75"></a><span id="l14.75" class="difflineminus">-          if (cs &amp;&amp; cs.indexOf(aButtonID) == -1) {</span>
<a href="#l14.76"></a><span id="l14.76" class="difflineplus">+          if (cs &amp;&amp; !cs.includes(aButtonID)) {</span>
<a href="#l14.77"></a><span id="l14.77">             // Put the AppMenu button at the end.</span>
<a href="#l14.78"></a><span id="l14.78">             cs += &quot;,&quot; + aButtonID;</span>
<a href="#l14.79"></a><span id="l14.79">             xulStore.setValue(MESSENGER_DOCURL, aToolbarID, &quot;currentset&quot;, cs);</span>
<a href="#l14.80"></a><span id="l14.80">           }</span>
<a href="#l14.81"></a><span id="l14.81">         }.bind(this);</span>
<a href="#l14.82"></a><span id="l14.82"> </span>
<a href="#l14.83"></a><span id="l14.83">         addButtonToEnd(&quot;mail-bar3&quot;, &quot;button-appmenu&quot;);</span>
<a href="#l14.84"></a><span id="l14.84">         addButtonToEnd(&quot;chat-toobar&quot;, &quot;button-chat-appmenu&quot;);</span>
<a href="#l14.85"></a><span id="l14.85" class="difflineat">@@ -217,17 +217,17 @@ var MailMigrator = {</span>
<a href="#l14.86"></a><span id="l14.86">           xulStore.setValue(MESSENGER_DOCURL, &quot;mail-toolbar-menubar2&quot;, &quot;autohide&quot;, &quot;true&quot;);</span>
<a href="#l14.87"></a><span id="l14.87">         }</span>
<a href="#l14.88"></a><span id="l14.88">       }</span>
<a href="#l14.89"></a><span id="l14.89"> </span>
<a href="#l14.90"></a><span id="l14.90">       // In UI version 6, we move the otherActionsButton button to the</span>
<a href="#l14.91"></a><span id="l14.91">       // header-view-toolbar.</span>
<a href="#l14.92"></a><span id="l14.92">       if (currentUIVersion &lt; 6) {</span>
<a href="#l14.93"></a><span id="l14.93">         let cs = xulStore.getValue(MESSENGER_DOCURL, &quot;header-view-toolbar&quot;, &quot;currentset&quot;);</span>
<a href="#l14.94"></a><span id="l14.94" class="difflineminus">-        if (cs &amp;&amp; cs.indexOf(&quot;otherActionsButton&quot;) == -1) {</span>
<a href="#l14.95"></a><span id="l14.95" class="difflineplus">+        if (cs &amp;&amp; !cs.includes(&quot;otherActionsButton&quot;)) {</span>
<a href="#l14.96"></a><span id="l14.96">           // Put the otherActionsButton button at the end.</span>
<a href="#l14.97"></a><span id="l14.97">           cs = cs + &quot;,&quot; + &quot;otherActionsButton&quot;;</span>
<a href="#l14.98"></a><span id="l14.98">           xulStore.setValue(MESSENGER_DOCURL, &quot;header-view-toolbar&quot;, &quot;currentset&quot;, cs);</span>
<a href="#l14.99"></a><span id="l14.99">         }</span>
<a href="#l14.100"></a><span id="l14.100">       }</span>
<a href="#l14.101"></a><span id="l14.101"> </span>
<a href="#l14.102"></a><span id="l14.102">       // In UI version 7, the three-state doNotTrack setting was reverted back</span>
<a href="#l14.103"></a><span id="l14.103">       // to two-state. This reverts a (no longer supported) setting of &quot;please</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/base/modules/oauth.jsm</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/base/modules/oauth.jsm</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -232,17 +232,17 @@ OAuth.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">             QueryInterface: XPCOMUtils.generateQI([Ci.nsIWebProgressListener,</span>
<a href="#l15.5"></a><span id="l15.5">                                                    Ci.nsISupportsWeakReference]),</span>
<a href="#l15.6"></a><span id="l15.6">             _cleanUp: function() {</span>
<a href="#l15.7"></a><span id="l15.7">               this.webProgress.removeProgressListener(this);</span>
<a href="#l15.8"></a><span id="l15.8">               this.window.close();</span>
<a href="#l15.9"></a><span id="l15.9">               delete this.window;</span>
<a href="#l15.10"></a><span id="l15.10">             },</span>
<a href="#l15.11"></a><span id="l15.11">             _checkForRedirect: function(aURL) {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-              if (aURL.indexOf(this._parent.completionURI) != 0)</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineplus">+              if (!aURL.startsWith(this._parent.completionURI))</span>
<a href="#l15.14"></a><span id="l15.14">                 return;</span>
<a href="#l15.15"></a><span id="l15.15"> </span>
<a href="#l15.16"></a><span id="l15.16">               this._parent.finishAuthorizationRequest();</span>
<a href="#l15.17"></a><span id="l15.17">               this._parent.onAuthorizationReceived(aURL);</span>
<a href="#l15.18"></a><span id="l15.18">             },</span>
<a href="#l15.19"></a><span id="l15.19">             onStateChange: function(aWebProgress, aRequest, aStateFlags, aStatus) {</span>
<a href="#l15.20"></a><span id="l15.20">               const wpl = Ci.nsIWebProgressListener;</span>
<a href="#l15.21"></a><span id="l15.21">               if (aStateFlags &amp; (wpl.STATE_START | wpl.STATE_IS_NETWORK))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/base/test/unit/test_mailGlue_distribution.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/base/test/unit/test_mailGlue_distribution.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -108,17 +108,17 @@ function run_test()</span>
<a href="#l16.4"></a><span id="l16.4"> </span>
<a href="#l16.5"></a><span id="l16.5">   // Test the LocalizablePreferences section</span>
<a href="#l16.6"></a><span id="l16.6">   // Any prefs here that aren't found in overrides are not overriden</span>
<a href="#l16.7"></a><span id="l16.7">   //   by LocalizablePrefs-[locale] and should be tested</span>
<a href="#l16.8"></a><span id="l16.8">   s = &quot;LocalizablePreferences&quot;;</span>
<a href="#l16.9"></a><span id="l16.9">   keys = testIni.getKeys(s);</span>
<a href="#l16.10"></a><span id="l16.10">   while (keys.hasMore()) {</span>
<a href="#l16.11"></a><span id="l16.11">     let key = keys.getNext();</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    if (overrides.indexOf(key) == -1) {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    if (!overrides.includes(key)) {</span>
<a href="#l16.14"></a><span id="l16.14">       let value = eval(testIni.getString(s, key));</span>
<a href="#l16.15"></a><span id="l16.15">       value =  value.replace(/%LOCALE%/g, &quot;en-US&quot;);</span>
<a href="#l16.16"></a><span id="l16.16">       value = &quot;data:text/plain,&quot; + key + &quot;=&quot; + value;</span>
<a href="#l16.17"></a><span id="l16.17">       do_check_eq(value, Services.prefs.getCharPref(key));</span>
<a href="#l16.18"></a><span id="l16.18">     }</span>
<a href="#l16.19"></a><span id="l16.19">   }</span>
<a href="#l16.20"></a><span id="l16.20">   do_test_finished();</span>
<a href="#l16.21"></a><span id="l16.21"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/components/about-support/aboutSupportUnix.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/components/about-support/aboutSupportUnix.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -102,17 +102,17 @@ var AboutSupportPlatform = {</span>
<a href="#l17.4"></a><span id="l17.4">         ctypes.char.ptr, // return type: file system type (do not free)</span>
<a href="#l17.5"></a><span id="l17.5">         GFileInfo.ptr,   // in: info</span>
<a href="#l17.6"></a><span id="l17.6">         ctypes.char.ptr  // in: attribute</span>
<a href="#l17.7"></a><span id="l17.7">       );</span>
<a href="#l17.8"></a><span id="l17.8">       let fsType = g_file_info_get_attribute_string(</span>
<a href="#l17.9"></a><span id="l17.9">         glibFileInfo, G_FILE_ATTRIBUTE_FILESYSTEM_TYPE);</span>
<a href="#l17.10"></a><span id="l17.10">       if (fsType.isNull())</span>
<a href="#l17.11"></a><span id="l17.11">         return &quot;unknown&quot;;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-      else if (kNetworkFilesystems.indexOf(fsType.readString()) != -1)</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+      else if (kNetworkFilesystems.includes(fsType.readString()))</span>
<a href="#l17.14"></a><span id="l17.14">         return &quot;network&quot;;</span>
<a href="#l17.15"></a><span id="l17.15">       else</span>
<a href="#l17.16"></a><span id="l17.16">         return &quot;local&quot;;</span>
<a href="#l17.17"></a><span id="l17.17">     }</span>
<a href="#l17.18"></a><span id="l17.18">     finally {</span>
<a href="#l17.19"></a><span id="l17.19">       if (filePath)</span>
<a href="#l17.20"></a><span id="l17.20">         g_free(filePath);</span>
<a href="#l17.21"></a><span id="l17.21">       if (glibFile &amp;&amp; !glibFile.isNull())</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/components/about-support/content/export.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/components/about-support/content/export.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -170,17 +170,17 @@ function createTextForElement(elem, aHid</span>
<a href="#l18.4"></a><span id="l18.4"> var gElementsToReplace = {</span>
<a href="#l18.5"></a><span id="l18.5">   &quot;accounts-table&quot;: getAccountsText,</span>
<a href="#l18.6"></a><span id="l18.6">   &quot;extensions-table&quot;: getExtensionsText,</span>
<a href="#l18.7"></a><span id="l18.7"> };</span>
<a href="#l18.8"></a><span id="l18.8"> </span>
<a href="#l18.9"></a><span id="l18.9"> function generateTextForElement(elem, aHidePrivateData, indent,</span>
<a href="#l18.10"></a><span id="l18.10">                                 textFragmentAccumulator) {</span>
<a href="#l18.11"></a><span id="l18.11">   // Add a little extra spacing around most elements.</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-  if ([&quot;td&quot;, &quot;th&quot;, &quot;span&quot;, &quot;a&quot;].indexOf(elem.tagName) == -1)</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+  if (![&quot;td&quot;, &quot;th&quot;, &quot;span&quot;, &quot;a&quot;].includes(elem.tagName))</span>
<a href="#l18.14"></a><span id="l18.14">     textFragmentAccumulator.push(&quot;\n&quot;);</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">   // If this element is one of our elements to replace with text, do it.</span>
<a href="#l18.17"></a><span id="l18.17">   if (elem.id in gElementsToReplace) {</span>
<a href="#l18.18"></a><span id="l18.18">     let replaceFn = gElementsToReplace[elem.id];</span>
<a href="#l18.19"></a><span id="l18.19">     textFragmentAccumulator.push(replaceFn(aHidePrivateData, indent + &quot;  &quot;));</span>
<a href="#l18.20"></a><span id="l18.20">     return;</span>
<a href="#l18.21"></a><span id="l18.21">   };</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/components/cloudfile/cloudFileAccounts.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/components/cloudfile/cloudFileAccounts.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -53,17 +53,17 @@ var cloudFileAccounts = {</span>
<a href="#l19.4"></a><span id="l19.4">     return provider;</span>
<a href="#l19.5"></a><span id="l19.5">   },</span>
<a href="#l19.6"></a><span id="l19.6"> </span>
<a href="#l19.7"></a><span id="l19.7">   _createUniqueAccountKey: function() {</span>
<a href="#l19.8"></a><span id="l19.8">     // Pick a unique account key (TODO: this is a dumb way to do it, probably)</span>
<a href="#l19.9"></a><span id="l19.9">     let existingKeys = this._accountKeys;</span>
<a href="#l19.10"></a><span id="l19.10">     for (let n = 1; ; n++) {</span>
<a href="#l19.11"></a><span id="l19.11"> </span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-      if (existingKeys.indexOf(&quot;account&quot; + n) == -1)</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+      if (!existingKeys.includes(&quot;account&quot; + n))</span>
<a href="#l19.14"></a><span id="l19.14">         return &quot;account&quot; + n;</span>
<a href="#l19.15"></a><span id="l19.15">     }</span>
<a href="#l19.16"></a><span id="l19.16">   },</span>
<a href="#l19.17"></a><span id="l19.17"> </span>
<a href="#l19.18"></a><span id="l19.18">   /**</span>
<a href="#l19.19"></a><span id="l19.19">    * Ensure that we have the account key for an account. If we already have the</span>
<a href="#l19.20"></a><span id="l19.20">    * key, just return it. If we have the nsIMsgCloudFileProvider, get the key</span>
<a href="#l19.21"></a><span id="l19.21">    * from it.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -2048,17 +2048,17 @@ function getValidSpellcheckerDictionary(</span>
<a href="#l20.4"></a><span id="l20.4">   let count    = o2.value;</span>
<a href="#l20.5"></a><span id="l20.5"> </span>
<a href="#l20.6"></a><span id="l20.6">   if (count == 0) {</span>
<a href="#l20.7"></a><span id="l20.7">     // If there are no dictionaries, we can't check the value, so return it.</span>
<a href="#l20.8"></a><span id="l20.8">     return prefValue;</span>
<a href="#l20.9"></a><span id="l20.9">   }</span>
<a href="#l20.10"></a><span id="l20.10"> </span>
<a href="#l20.11"></a><span id="l20.11">   // Make sure preference contains a valid value.</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  if (dictList.indexOf(prefValue) &gt;= 0) {</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  if (dictList.includes(prefValue)) {</span>
<a href="#l20.14"></a><span id="l20.14">     return prefValue;</span>
<a href="#l20.15"></a><span id="l20.15">   }</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17">   // Set a valid value, any value will do.</span>
<a href="#l20.18"></a><span id="l20.18">   Services.prefs.setCharPref(&quot;spellchecker.dictionary&quot;, dictList[0]);</span>
<a href="#l20.19"></a><span id="l20.19">   return dictList[0];</span>
<a href="#l20.20"></a><span id="l20.20"> }</span>
<a href="#l20.21"></a><span id="l20.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -314,34 +314,34 @@ HandlerInfoWrapper.prototype = {</span>
<a href="#l21.4"></a><span id="l21.4">   //</span>
<a href="#l21.5"></a><span id="l21.5">   // FIXME: once handler info records are broken up into OS-provided records</span>
<a href="#l21.6"></a><span id="l21.6">   // and user-configured records, stop using this boolean flag and simply</span>
<a href="#l21.7"></a><span id="l21.7">   // check for the presence of a user-configured record to determine whether</span>
<a href="#l21.8"></a><span id="l21.8">   // or not this type is only handled by a plugin.  Filed as bug 395142.</span>
<a href="#l21.9"></a><span id="l21.9">   handledOnlyByPlugin: undefined,</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">   get isDisabledPluginType() {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    return this._getDisabledPluginTypes().indexOf(this.type) != -1;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+    return this._getDisabledPluginTypes().includes(this.type);</span>
<a href="#l21.14"></a><span id="l21.14">   },</span>
<a href="#l21.15"></a><span id="l21.15"> </span>
<a href="#l21.16"></a><span id="l21.16">   _getDisabledPluginTypes: function() {</span>
<a href="#l21.17"></a><span id="l21.17">     var types = &quot;&quot;;</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19">     if (Services.prefs.prefHasUserValue(PREF_DISABLED_PLUGIN_TYPES))</span>
<a href="#l21.20"></a><span id="l21.20">       types = Services.prefs.getCharPref(PREF_DISABLED_PLUGIN_TYPES);</span>
<a href="#l21.21"></a><span id="l21.21"> </span>
<a href="#l21.22"></a><span id="l21.22">     // Only split if the string isn't empty so we don't end up with an array</span>
<a href="#l21.23"></a><span id="l21.23">     // containing a single empty string.</span>
<a href="#l21.24"></a><span id="l21.24">     return types ? types.split(&quot;,&quot;) : [];</span>
<a href="#l21.25"></a><span id="l21.25">   },</span>
<a href="#l21.26"></a><span id="l21.26"> </span>
<a href="#l21.27"></a><span id="l21.27">   disablePluginType: function() {</span>
<a href="#l21.28"></a><span id="l21.28">     var disabledPluginTypes = this._getDisabledPluginTypes();</span>
<a href="#l21.29"></a><span id="l21.29"> </span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-    if (disabledPluginTypes.indexOf(this.type) == -1)</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineplus">+    if (!disabledPluginTypes.includes(this.type))</span>
<a href="#l21.32"></a><span id="l21.32">       disabledPluginTypes.push(this.type);</span>
<a href="#l21.33"></a><span id="l21.33"> </span>
<a href="#l21.34"></a><span id="l21.34">     Services.prefs.setCharPref(PREF_DISABLED_PLUGIN_TYPES,</span>
<a href="#l21.35"></a><span id="l21.35">                                disabledPluginTypes.join(&quot;,&quot;));</span>
<a href="#l21.36"></a><span id="l21.36"> </span>
<a href="#l21.37"></a><span id="l21.37">     // Update the category manager so existing browser windows update.</span>
<a href="#l21.38"></a><span id="l21.38">     this._categoryMgr.deleteCategoryEntry(&quot;Gecko-Content-Viewers&quot;,</span>
<a href="#l21.39"></a><span id="l21.39">                                           this.type,</span>
<a href="#l21.40"></a><span id="l21.40" class="difflineat">@@ -1170,17 +1170,17 @@ var gApplicationsPane = {</span>
<a href="#l21.41"></a><span id="l21.41">    * @return {string} the extensions for the type</span>
<a href="#l21.42"></a><span id="l21.42">    */</span>
<a href="#l21.43"></a><span id="l21.43">   _typeDetails: function(aHandlerInfo) {</span>
<a href="#l21.44"></a><span id="l21.44">     let exts = [];</span>
<a href="#l21.45"></a><span id="l21.45">     if (aHandlerInfo.wrappedHandlerInfo instanceof Components.interfaces.nsIMIMEInfo) {</span>
<a href="#l21.46"></a><span id="l21.46">       let extIter = aHandlerInfo.wrappedHandlerInfo.getFileExtensions();</span>
<a href="#l21.47"></a><span id="l21.47">       while(extIter.hasMore()) {</span>
<a href="#l21.48"></a><span id="l21.48">         let ext = &quot;.&quot;+extIter.getNext();</span>
<a href="#l21.49"></a><span id="l21.49" class="difflineminus">-        if (exts.indexOf(ext) == -1)</span>
<a href="#l21.50"></a><span id="l21.50" class="difflineplus">+        if (!exts.includes(ext))</span>
<a href="#l21.51"></a><span id="l21.51">           exts.push(ext);</span>
<a href="#l21.52"></a><span id="l21.52">       }</span>
<a href="#l21.53"></a><span id="l21.53">     }</span>
<a href="#l21.54"></a><span id="l21.54">     exts.sort();</span>
<a href="#l21.55"></a><span id="l21.55">     exts = exts.join(&quot;, &quot;);</span>
<a href="#l21.56"></a><span id="l21.56">     if (this._visibleTypeDescriptionCount[aHandlerInfo.description] &gt; 0) {</span>
<a href="#l21.57"></a><span id="l21.57">       if (exts)</span>
<a href="#l21.58"></a><span id="l21.58">         return this._prefsBundle.getFormattedString(&quot;typeDetailsWithTypeAndExt&quot;,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/components/test/unit/test_about_support.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/components/test/unit/test_about_support.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -138,17 +138,17 @@ function verify_account_details(aDetails</span>
<a href="#l22.4"></a><span id="l22.4">  */</span>
<a href="#l22.5"></a><span id="l22.5"> function test_get_file_system_type() {</span>
<a href="#l22.6"></a><span id="l22.6">   let fsType = AboutSupport.getFileSystemType(do_get_cwd());</span>
<a href="#l22.7"></a><span id="l22.7">   if (&quot;nsILocalFileMac&quot; in Ci)</span>
<a href="#l22.8"></a><span id="l22.8">     // Mac should return null</span>
<a href="#l22.9"></a><span id="l22.9">     do_check_eq(fsType, null);</span>
<a href="#l22.10"></a><span id="l22.10">   else</span>
<a href="#l22.11"></a><span id="l22.11">     // Windows and Linux should return a string</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-    do_check_true([&quot;local&quot;, &quot;network&quot;, &quot;unknown&quot;].indexOf(fsType) != -1);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+    do_check_true([&quot;local&quot;, &quot;network&quot;, &quot;unknown&quot;].includes(fsType));</span>
<a href="#l22.14"></a><span id="l22.14"> }</span>
<a href="#l22.15"></a><span id="l22.15"> </span>
<a href="#l22.16"></a><span id="l22.16"> /**</span>
<a href="#l22.17"></a><span id="l22.17">  * Test the getAccountDetails function.</span>
<a href="#l22.18"></a><span id="l22.18">  */</span>
<a href="#l22.19"></a><span id="l22.19"> function test_get_account_details() {</span>
<a href="#l22.20"></a><span id="l22.20">   let accountDetails = AboutSupport.getAccountDetails();</span>
<a href="#l22.21"></a><span id="l22.21">   let accountDetailsText = uneval(accountDetails);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/test/mozmill/account/test-ab-whitelist.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-ab-whitelist.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -83,17 +83,17 @@ function subtest_check_whitelist_load_an</span>
<a href="#l23.4"></a><span id="l23.4">   let whiteListURIs = Services.prefs.getCharPref(gKeyString).split(&quot; &quot;);</span>
<a href="#l23.5"></a><span id="l23.5"> </span>
<a href="#l23.6"></a><span id="l23.6">   for (let i = 0; i &lt; list.getRowCount(); i++) {</span>
<a href="#l23.7"></a><span id="l23.7">     let abNode = list.getItemAtIndex(i);</span>
<a href="#l23.8"></a><span id="l23.8">     assert_equals(&quot;true&quot;, abNode.getAttribute(&quot;checked&quot;),</span>
<a href="#l23.9"></a><span id="l23.9">                   &quot;Should have been checked&quot;);</span>
<a href="#l23.10"></a><span id="l23.10">     // Also ensure that the address book URI was properly saved in the</span>
<a href="#l23.11"></a><span id="l23.11">     // prefs</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    assert_not_equals(-1, whiteListURIs.indexOf(abNode.getAttribute(&quot;value&quot;)));</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    assert_true(whiteListURIs.includes(abNode.getAttribute(&quot;value&quot;)));</span>
<a href="#l23.14"></a><span id="l23.14">     // Now un-check that address book</span>
<a href="#l23.15"></a><span id="l23.15">     amc.click(new elib.Elem(abNode));</span>
<a href="#l23.16"></a><span id="l23.16">   }</span>
<a href="#l23.17"></a><span id="l23.17"> </span>
<a href="#l23.18"></a><span id="l23.18">   // And close the dialog</span>
<a href="#l23.19"></a><span id="l23.19">   amc.window.document.getElementById(&quot;accountManager&quot;).acceptDialog();</span>
<a href="#l23.20"></a><span id="l23.20"> }</span>
<a href="#l23.21"></a><span id="l23.21"> </span>
<a href="#l23.22"></a><span id="l23.22" class="difflineat">@@ -118,17 +118,17 @@ function subtest_check_whitelist_load_cl</span>
<a href="#l23.23"></a><span id="l23.23">   }</span>
<a href="#l23.24"></a><span id="l23.24"> </span>
<a href="#l23.25"></a><span id="l23.25">   for (let i = 0; i &lt; list.getRowCount(); i++) {</span>
<a href="#l23.26"></a><span id="l23.26">     let abNode = list.getItemAtIndex(i);</span>
<a href="#l23.27"></a><span id="l23.27">     assert_equals(&quot;false&quot;, abNode.getAttribute(&quot;checked&quot;),</span>
<a href="#l23.28"></a><span id="l23.28">                   &quot;Should not have been checked&quot;);</span>
<a href="#l23.29"></a><span id="l23.29">     // Also ensure that the address book URI was properly cleared in the</span>
<a href="#l23.30"></a><span id="l23.30">     // prefs</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-    assert_equals(-1, whiteListURIs.indexOf(abNode.getAttribute(&quot;value&quot;)));</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineplus">+    assert_false(whiteListURIs.includes(abNode.getAttribute(&quot;value&quot;)));</span>
<a href="#l23.33"></a><span id="l23.33">   }</span>
<a href="#l23.34"></a><span id="l23.34"> </span>
<a href="#l23.35"></a><span id="l23.35">   // And close the dialog</span>
<a href="#l23.36"></a><span id="l23.36">   amc.window.document.getElementById(&quot;accountManager&quot;).acceptDialog();</span>
<a href="#l23.37"></a><span id="l23.37"> }</span>
<a href="#l23.38"></a><span id="l23.38"> </span>
<a href="#l23.39"></a><span id="l23.39"> function test_address_book_whitelist() {</span>
<a href="#l23.40"></a><span id="l23.40">   open_advanced_settings(subtest_check_whitelist_init_and_save);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/test/mozmill/account/test-account-tree.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/test/mozmill/account/test-account-tree.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -115,26 +115,26 @@ function subtest_check_default_account_h</span>
<a href="#l24.4"></a><span id="l24.4">   let cell = accountTree.view.getItemAtIndex(accountRow).firstChild.firstChild;</span>
<a href="#l24.5"></a><span id="l24.5">   assert_equals(cell.tagName, &quot;treecell&quot;);</span>
<a href="#l24.6"></a><span id="l24.6"> </span>
<a href="#l24.7"></a><span id="l24.7">   // We can't read the computed style of the tree cell directly, so at least see</span>
<a href="#l24.8"></a><span id="l24.8">   // if the isDefaultServer-true property is set on it. Hopefully the proper style</span>
<a href="#l24.9"></a><span id="l24.9">   // is attached to this property.</span>
<a href="#l24.10"></a><span id="l24.10">   let propArray = accountTree.view</span>
<a href="#l24.11"></a><span id="l24.11">     .getCellProperties(accountRow, accountTree.columns.getColumnAt(0)).split(&quot; &quot;);</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  assert_not_equals(propArray.indexOf(&quot;isDefaultServer-true&quot;), -1);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  assert_true(propArray.includes(&quot;isDefaultServer-true&quot;));</span>
<a href="#l24.14"></a><span id="l24.14"> </span>
<a href="#l24.15"></a><span id="l24.15">   // Now select another account that is not default.</span>
<a href="#l24.16"></a><span id="l24.16">   accountRow = get_account_tree_row(gPopAccount.key, null, amc);</span>
<a href="#l24.17"></a><span id="l24.17">   click_account_tree_row(amc, accountRow);</span>
<a href="#l24.18"></a><span id="l24.18"> </span>
<a href="#l24.19"></a><span id="l24.19">   // There should isDefaultServer-true on its tree cell.</span>
<a href="#l24.20"></a><span id="l24.20">   propArray = accountTree.view</span>
<a href="#l24.21"></a><span id="l24.21">     .getCellProperties(accountRow, accountTree.columns.getColumnAt(0)).split(&quot; &quot;);</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineminus">-  assert_equals(propArray.indexOf(&quot;isDefaultServer-true&quot;), -1);</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineplus">+  assert_false(propArray.includes(&quot;isDefaultServer-true&quot;));</span>
<a href="#l24.24"></a><span id="l24.24"> }</span>
<a href="#l24.25"></a><span id="l24.25"> /**</span>
<a href="#l24.26"></a><span id="l24.26">  * Bug 58713.</span>
<a href="#l24.27"></a><span id="l24.27">  * Check if after deleting an account the next one is selected.</span>
<a href="#l24.28"></a><span id="l24.28">  *</span>
<a href="#l24.29"></a><span id="l24.29">  * This test should always be the last one as it removes our specially</span>
<a href="#l24.30"></a><span id="l24.30">  * created gPopAccount.</span>
<a href="#l24.31"></a><span id="l24.31">  */</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineat">@@ -156,17 +156,17 @@ function subtest_check_selection_after_a</span>
<a href="#l24.33"></a><span id="l24.33">   click_account_tree_row(amc, accountRow);</span>
<a href="#l24.34"></a><span id="l24.34"> </span>
<a href="#l24.35"></a><span id="l24.35">   let accountList = [];</span>
<a href="#l24.36"></a><span id="l24.36">   let accountTreeNode = amc.e(&quot;account-tree-children&quot;);</span>
<a href="#l24.37"></a><span id="l24.37">   // Build the list of accounts in the account tree (order is important).</span>
<a href="#l24.38"></a><span id="l24.38">   for (let i = 0; i &lt; accountTreeNode.childNodes.length; i++) {</span>
<a href="#l24.39"></a><span id="l24.39">     if (&quot;_account&quot; in accountTreeNode.childNodes[i]) {</span>
<a href="#l24.40"></a><span id="l24.40">       let curAccount = accountTreeNode.childNodes[i]._account;</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-      if (accountList.indexOf(curAccount) == -1)</span>
<a href="#l24.42"></a><span id="l24.42" class="difflineplus">+      if (!accountList.includes(curAccount))</span>
<a href="#l24.43"></a><span id="l24.43">         accountList.push(curAccount);</span>
<a href="#l24.44"></a><span id="l24.44">     }</span>
<a href="#l24.45"></a><span id="l24.45">   }</span>
<a href="#l24.46"></a><span id="l24.46"> </span>
<a href="#l24.47"></a><span id="l24.47">   // Get position of the current account in the account list.</span>
<a href="#l24.48"></a><span id="l24.48">   let accountIndex = accountList.indexOf(gPopAccount);</span>
<a href="#l24.49"></a><span id="l24.49"> </span>
<a href="#l24.50"></a><span id="l24.50">   plan_for_modal_dialog(&quot;commonDialog&quot;, function(cdc) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/test/mozmill/addrbook/test-address-book.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/test/mozmill/addrbook/test-address-book.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -350,13 +350,13 @@ function test_writing_to_mailing_list() </span>
<a href="#l25.4"></a><span id="l25.4">   // window...</span>
<a href="#l25.5"></a><span id="l25.5">   windowHelper.plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l25.6"></a><span id="l25.6">   // ... and click the &quot;Write&quot; button</span>
<a href="#l25.7"></a><span id="l25.7">   abController.click(abController.eid(&quot;button-newmessage&quot;));</span>
<a href="#l25.8"></a><span id="l25.8">   let composeWin = wait_for_compose_window(abController);</span>
<a href="#l25.9"></a><span id="l25.9">   let to = composeWin.window.gMsgCompose.compFields.to;</span>
<a href="#l25.10"></a><span id="l25.10"> </span>
<a href="#l25.11"></a><span id="l25.11">   // Make sure we're writing to all contacts in the mailing list.</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  for each (contact in contacts) {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-    assert_not_equals(-1, to.indexOf(contact.primaryEmail));</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineminus">-    assert_not_equals(-1, to.indexOf(contact.displayName));</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineplus">+  for (let contact of contacts) {</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineplus">+    assert_true(to.includes(contact.primaryEmail));</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineplus">+    assert_true(to.includes(contact.displayName));</span>
<a href="#l25.18"></a><span id="l25.18">   }</span>
<a href="#l25.19"></a><span id="l25.19"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/test/mozmill/attachment/test-attachment-events.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/test/mozmill/attachment/test-attachment-events.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -127,17 +127,17 @@ function test_attachments_added_on_multi</span>
<a href="#l26.4"></a><span id="l26.4">   assert_equals(1, eventCount);</span>
<a href="#l26.5"></a><span id="l26.5"> </span>
<a href="#l26.6"></a><span id="l26.6">   // Now make sure we got passed the right subjects for the event</span>
<a href="#l26.7"></a><span id="l26.7">   let subjects = lastEvent.detail;</span>
<a href="#l26.8"></a><span id="l26.8">   assert_true(subjects instanceof Ci.nsIMutableArray);</span>
<a href="#l26.9"></a><span id="l26.9">   assert_equals(2, subjects.length);</span>
<a href="#l26.10"></a><span id="l26.10"> </span>
<a href="#l26.11"></a><span id="l26.11">   for (let attachment in fixIterator(subjects, Ci.nsIMsgAttachment)) {</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-    assert_true(attachmentUrls.indexOf(attachment.url) != -1);</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+    assert_true(attachmentUrls.includes(attachment.url));</span>
<a href="#l26.14"></a><span id="l26.14">   }</span>
<a href="#l26.15"></a><span id="l26.15"> </span>
<a href="#l26.16"></a><span id="l26.16">   // Close the compose window - let's try again with 3 attachments.</span>
<a href="#l26.17"></a><span id="l26.17">   close_window(cw);</span>
<a href="#l26.18"></a><span id="l26.18"> </span>
<a href="#l26.19"></a><span id="l26.19">   attachmentUrls = [&quot;http://www.example.com/1&quot;,</span>
<a href="#l26.20"></a><span id="l26.20">                     &quot;http://www.example.com/2&quot;,</span>
<a href="#l26.21"></a><span id="l26.21">                     &quot;http://www.example.com/3&quot;];</span>
<a href="#l26.22"></a><span id="l26.22" class="difflineat">@@ -151,17 +151,17 @@ function test_attachments_added_on_multi</span>
<a href="#l26.23"></a><span id="l26.23">   assert_equals(2, eventCount);</span>
<a href="#l26.24"></a><span id="l26.24"> </span>
<a href="#l26.25"></a><span id="l26.25">   // Make sure that we got the right subjects back</span>
<a href="#l26.26"></a><span id="l26.26">   subjects = lastEvent.detail;</span>
<a href="#l26.27"></a><span id="l26.27">   assert_true(subjects instanceof Ci.nsIMutableArray);</span>
<a href="#l26.28"></a><span id="l26.28">   assert_equals(3, subjects.length);</span>
<a href="#l26.29"></a><span id="l26.29"> </span>
<a href="#l26.30"></a><span id="l26.30">   for (let attachment in fixIterator(subjects, Ci.nsIMsgAttachment)) {</span>
<a href="#l26.31"></a><span id="l26.31" class="difflineminus">-    assert_true(attachmentUrls.indexOf(attachment.url) != -1);</span>
<a href="#l26.32"></a><span id="l26.32" class="difflineplus">+    assert_true(attachmentUrls.includes(attachment.url));</span>
<a href="#l26.33"></a><span id="l26.33">   }</span>
<a href="#l26.34"></a><span id="l26.34"> </span>
<a href="#l26.35"></a><span id="l26.35">   // Make sure we don't fire the event again if we try to attach the same</span>
<a href="#l26.36"></a><span id="l26.36">   // files.</span>
<a href="#l26.37"></a><span id="l26.37">   add_attachments(cw, attachmentUrls);</span>
<a href="#l26.38"></a><span id="l26.38">   assert_equals(2, eventCount);</span>
<a href="#l26.39"></a><span id="l26.39"> </span>
<a href="#l26.40"></a><span id="l26.40">   cw.e(&quot;attachmentBucket&quot;).removeEventListener(kAttachmentsAdded, listener,</span>
<a href="#l26.41"></a><span id="l26.41" class="difflineat">@@ -259,17 +259,17 @@ function test_attachments_removed_on_mul</span>
<a href="#l26.42"></a><span id="l26.42"> </span>
<a href="#l26.43"></a><span id="l26.43">   // Now let's make sure we got passed back the right attachment items</span>
<a href="#l26.44"></a><span id="l26.44">   // as the event subject</span>
<a href="#l26.45"></a><span id="l26.45">   let subjects = lastEvent.detail;</span>
<a href="#l26.46"></a><span id="l26.46">   assert_true(subjects instanceof Ci.nsIMutableArray);</span>
<a href="#l26.47"></a><span id="l26.47">   assert_equals(3, subjects.length);</span>
<a href="#l26.48"></a><span id="l26.48"> </span>
<a href="#l26.49"></a><span id="l26.49">   for (let attachment in fixIterator(subjects, Ci.nsIMsgAttachment)) {</span>
<a href="#l26.50"></a><span id="l26.50" class="difflineminus">-    assert_true(removedAttachmentUrls.indexOf(attachment.url) != -1);</span>
<a href="#l26.51"></a><span id="l26.51" class="difflineplus">+    assert_true(removedAttachmentUrls.includes(attachment.url));</span>
<a href="#l26.52"></a><span id="l26.52">   }</span>
<a href="#l26.53"></a><span id="l26.53"> </span>
<a href="#l26.54"></a><span id="l26.54">   // Ok, let's attach and remove some again to ensure that we still see the event.</span>
<a href="#l26.55"></a><span id="l26.55">   add_attachments(cw, [&quot;http://www.example.com/1&quot;,</span>
<a href="#l26.56"></a><span id="l26.56">                        &quot;http://www.example.com/2&quot;]);</span>
<a href="#l26.57"></a><span id="l26.57"> </span>
<a href="#l26.58"></a><span id="l26.58">   select_attachments(cw, 0, 1);</span>
<a href="#l26.59"></a><span id="l26.59">   cw.window.goDoCommand(&quot;cmd_delete&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-address-widgets.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-address-widgets.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -33,17 +33,17 @@ function teardownModule(module) {</span>
<a href="#l27.4"></a><span id="l27.4"> /**</span>
<a href="#l27.5"></a><span id="l27.5">  * Check if the address type items are in the wished state.</span>
<a href="#l27.6"></a><span id="l27.6">  *</span>
<a href="#l27.7"></a><span id="l27.7">  * @param aItemsEnabled  List of item values that should be enabled (uncollapsed).</span>
<a href="#l27.8"></a><span id="l27.8">  */</span>
<a href="#l27.9"></a><span id="l27.9"> function check_address_types_state(aItemsEnabled) {</span>
<a href="#l27.10"></a><span id="l27.10">   let addr_types = cwc.e(&quot;addressingWidget&quot;).querySelectorAll(&quot;menuitem[value]&quot;);</span>
<a href="#l27.11"></a><span id="l27.11">   for (let item of addr_types)</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-    assert_true(item.collapsed == (aItemsEnabled.indexOf(item.getAttribute(&quot;value&quot;)) == -1));</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+    assert_true(item.collapsed != aItemsEnabled.includes(item.getAttribute(&quot;value&quot;)));</span>
<a href="#l27.14"></a><span id="l27.14"> </span>
<a href="#l27.15"></a><span id="l27.15">   // Even if the currently selected type is collaped,</span>
<a href="#l27.16"></a><span id="l27.16">   // the containing menulist should never be collapsed.</span>
<a href="#l27.17"></a><span id="l27.17">   let addr_lists = cwc.e(&quot;addressingWidget&quot;).querySelectorAll(&quot;menulist&quot;);</span>
<a href="#l27.18"></a><span id="l27.18">   for (let list in addr_lists) {</span>
<a href="#l27.19"></a><span id="l27.19">     assert_false(list.collapsed);</span>
<a href="#l27.20"></a><span id="l27.20">     assert_false(list.disabled);</span>
<a href="#l27.21"></a><span id="l27.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-reply-addresses.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-reply-addresses.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -91,17 +91,17 @@ function checkToAddresses(replyWinContro</span>
<a href="#l28.4"></a><span id="l28.4">   }</span>
<a href="#l28.5"></a><span id="l28.5"> </span>
<a href="#l28.6"></a><span id="l28.6">   // Check what we expect is there.</span>
<a href="#l28.7"></a><span id="l28.7">   for (let type in expectedFields) {</span>
<a href="#l28.8"></a><span id="l28.8">     let expected = expectedFields[type];</span>
<a href="#l28.9"></a><span id="l28.9">     let obtained = obtainedFields[type];</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">     for (let i = 0; i &lt; expected.length; i++) {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-      if (!obtained || obtained.indexOf(expected[i]) == -1) {</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+      if (!obtained || !obtained.includes(expected[i])) {</span>
<a href="#l28.14"></a><span id="l28.14">         throw new Error(expected[i] + &quot; is not in &quot; + type + &quot; fields; &quot; +</span>
<a href="#l28.15"></a><span id="l28.15">                         &quot;obtained=&quot; + obtained);</span>
<a href="#l28.16"></a><span id="l28.16">       }</span>
<a href="#l28.17"></a><span id="l28.17">     }</span>
<a href="#l28.18"></a><span id="l28.18">     assert_equals(obtained.length, expected.length,</span>
<a href="#l28.19"></a><span id="l28.19">                   &quot;Unexpected number of fields obtained for type=&quot; + type +</span>
<a href="#l28.20"></a><span id="l28.20">                   &quot;; obtained=&quot; + obtained + &quot;; expected=&quot; + expected);</span>
<a href="#l28.21"></a><span id="l28.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-about-support.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-about-support.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -122,17 +122,17 @@ const UNIQUE_ID = &quot;3a9e1694-7115-4237-8b</span>
<a href="#l29.4"></a><span id="l29.4">  * shows up.</span>
<a href="#l29.5"></a><span id="l29.5">  */</span>
<a href="#l29.6"></a><span id="l29.6"> function test_modified_pref_on_whitelist() {</span>
<a href="#l29.7"></a><span id="l29.7">   const PREFIX = &quot;accessibility.&quot;;</span>
<a href="#l29.8"></a><span id="l29.8">   let prefName = PREFIX + UNIQUE_ID;</span>
<a href="#l29.9"></a><span id="l29.9">   Services.prefs.setBoolPref(prefName, true);</span>
<a href="#l29.10"></a><span id="l29.10">   let tab = open_about_support();</span>
<a href="#l29.11"></a><span id="l29.11">   // Check that the prefix is actually in the whitelist.</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-  if (tab.browser.contentWindow.PREFS_WHITELIST.indexOf(PREFIX) == -1)</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+  if (!tab.browser.contentWindow.PREFS_WHITELIST.includes(PREFIX))</span>
<a href="#l29.14"></a><span id="l29.14">     mark_failure([&quot;The prefs whitelist doesn't contain &quot; + PREFIX]);</span>
<a href="#l29.15"></a><span id="l29.15"> </span>
<a href="#l29.16"></a><span id="l29.16">   assert_content_tab_text_present(tab, prefName);</span>
<a href="#l29.17"></a><span id="l29.17">   close_tab(tab);</span>
<a href="#l29.18"></a><span id="l29.18">   Services.prefs.clearUserPref(prefName);</span>
<a href="#l29.19"></a><span id="l29.19"> }</span>
<a href="#l29.20"></a><span id="l29.20"> </span>
<a href="#l29.21"></a><span id="l29.21"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-message-commands.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-message-commands.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -492,17 +492,17 @@ function test_disabled_archive() {</span>
<a href="#l30.4"></a><span id="l30.4">   archiveBtn = htmlframe.contentDocument.getElementById(&quot;hdrArchiveButton&quot;);</span>
<a href="#l30.5"></a><span id="l30.5">   assert_true(archiveBtn.collapsed,</span>
<a href="#l30.6"></a><span id="l30.6">               &quot;Multi-message archive button should be disabled when &quot; +</span>
<a href="#l30.7"></a><span id="l30.7">               &quot;archiving is disabled!&quot;);</span>
<a href="#l30.8"></a><span id="l30.8"> }</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10"> function check_tag_in_message(message, tag, isSet) {</span>
<a href="#l30.11"></a><span id="l30.11">   let tagSet = message.getStringProperty(&quot;keywords&quot;).split(&quot; &quot;)</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-                      .indexOf(tag.key) != -1;</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+                      .includes(tag.key);</span>
<a href="#l30.14"></a><span id="l30.14">   if (isSet)</span>
<a href="#l30.15"></a><span id="l30.15">     assert_true(tagSet, &quot;Tag '&quot; + tag.name + &quot;' expected on message!&quot;);</span>
<a href="#l30.16"></a><span id="l30.16">   else</span>
<a href="#l30.17"></a><span id="l30.17">     assert_false(tagSet, &quot;Tag '&quot; + tag.name + &quot;' not expected on message!&quot;);</span>
<a href="#l30.18"></a><span id="l30.18"> }</span>
<a href="#l30.19"></a><span id="l30.19"> </span>
<a href="#l30.20"></a><span id="l30.20"> function test_tag_keys() {</span>
<a href="#l30.21"></a><span id="l30.21">   be_in_folder(unreadFolder);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/test/mozmill/folder-display/test-pane-focus.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/test/mozmill/folder-display/test-pane-focus.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -29,24 +29,24 @@ function setupModule(module) {</span>
<a href="#l31.4"></a><span id="l31.4"> </span>
<a href="#l31.5"></a><span id="l31.5"> /**</span>
<a href="#l31.6"></a><span id="l31.6">  * Get the currently-focused pane in the 3pane. One of the folder pane, thread</span>
<a href="#l31.7"></a><span id="l31.7">  * pane, or message pane (single- or multi-message).</span>
<a href="#l31.8"></a><span id="l31.8">  *</span>
<a href="#l31.9"></a><span id="l31.9">  * @return the focused pane</span>
<a href="#l31.10"></a><span id="l31.10">  */</span>
<a href="#l31.11"></a><span id="l31.11"> function get_focused_pane() {</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  let panes = [mc.e(id) for each (id in [</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  let panes = [mc.e(id) for (id of [</span>
<a href="#l31.14"></a><span id="l31.14">     &quot;threadTree&quot;, &quot;folderTree&quot;, &quot;messagepane&quot;, &quot;multimessage&quot;</span>
<a href="#l31.15"></a><span id="l31.15">   ])];</span>
<a href="#l31.16"></a><span id="l31.16"> </span>
<a href="#l31.17"></a><span id="l31.17">   let currentNode = mc.window.top.document.activeElement;</span>
<a href="#l31.18"></a><span id="l31.18"> </span>
<a href="#l31.19"></a><span id="l31.19">   while (currentNode) {</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-    if (panes.indexOf(currentNode) != -1)</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineplus">+    if (panes.includes(currentNode))</span>
<a href="#l31.22"></a><span id="l31.22">       return currentNode;</span>
<a href="#l31.23"></a><span id="l31.23"> </span>
<a href="#l31.24"></a><span id="l31.24">     currentNode = currentNode.parentNode;</span>
<a href="#l31.25"></a><span id="l31.25">   }</span>
<a href="#l31.26"></a><span id="l31.26">   return null;</span>
<a href="#l31.27"></a><span id="l31.27"> }</span>
<a href="#l31.28"></a><span id="l31.28"> </span>
<a href="#l31.29"></a><span id="l31.29"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/test/mozmill/folder-tree-modes/test-smart-folders.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/test/mozmill/folder-tree-modes/test-smart-folders.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -214,23 +214,23 @@ function assert_folder_and_children_not_</span>
<a href="#l32.4"></a><span id="l32.4">   let allDescendants = folder.descendants;</span>
<a href="#l32.5"></a><span id="l32.5">   for (let folder in fixIterator(allDescendants, Ci.nsIMsgFolder)) {</span>
<a href="#l32.6"></a><span id="l32.6">     assert_uri_not_found(folder.URI, searchScope);</span>
<a href="#l32.7"></a><span id="l32.7">   }</span>
<a href="#l32.8"></a><span id="l32.8"> }</span>
<a href="#l32.9"></a><span id="l32.9"> </span>
<a href="#l32.10"></a><span id="l32.10"> function assert_uri_found(folderURI, scopeList)</span>
<a href="#l32.11"></a><span id="l32.11"> {</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-  if (scopeList.indexOf(folderURI) == -1)</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+  if (!scopeList.includes(folderURI))</span>
<a href="#l32.14"></a><span id="l32.14">     throw new Error(&quot;scope &quot; + scopeList + &quot;doesn't contain &quot; + folderURI);</span>
<a href="#l32.15"></a><span id="l32.15"> }</span>
<a href="#l32.16"></a><span id="l32.16"> </span>
<a href="#l32.17"></a><span id="l32.17"> function assert_uri_not_found(folderURI, scopeList)</span>
<a href="#l32.18"></a><span id="l32.18"> {</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineminus">-  if (scopeList.indexOf(folderURI) != -1)</span>
<a href="#l32.20"></a><span id="l32.20" class="difflineplus">+  if (scopeList.includes(folderURI))</span>
<a href="#l32.21"></a><span id="l32.21">     throw new Error(&quot;scope &quot; + scopeList + &quot;contains &quot; + folderURI +</span>
<a href="#l32.22"></a><span id="l32.22">                     &quot; but shouldn't&quot;);</span>
<a href="#l32.23"></a><span id="l32.23"> }</span>
<a href="#l32.24"></a><span id="l32.24"> </span>
<a href="#l32.25"></a><span id="l32.25"> /**</span>
<a href="#l32.26"></a><span id="l32.26">  * Move back to the all folders mode.</span>
<a href="#l32.27"></a><span id="l32.27">  */</span>
<a href="#l32.28"></a><span id="l32.28"> function test_switch_to_all_folders() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/test/mozmill/migration-to-rdf-ui-3/test-migrate-to-rdf-ui-3.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -22,18 +22,18 @@ function setupModule(module) {</span>
<a href="#l33.4"></a><span id="l33.4"> }</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6"> /**</span>
<a href="#l33.7"></a><span id="l33.7">  * Test that the QFB toggle was moved from the tabbar-toolbar to the</span>
<a href="#l33.8"></a><span id="l33.8">  * mail-bar3.</span>
<a href="#l33.9"></a><span id="l33.9">  */</span>
<a href="#l33.10"></a><span id="l33.10"> function test_qfb_button_moved() {</span>
<a href="#l33.11"></a><span id="l33.11">   let currentSet = mc.e(&quot;tabbar-toolbar&quot;).currentSet;</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  assert_equals(-1, currentSet.indexOf(&quot;qfb-show-filter-bar&quot;),</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  assert_false(currentSet.includes(&quot;qfb-show-filter-bar&quot;),</span>
<a href="#l33.14"></a><span id="l33.14">                 &quot;We found the QFB filter toggle where we shouldn't have.&quot;);</span>
<a href="#l33.15"></a><span id="l33.15"> </span>
<a href="#l33.16"></a><span id="l33.16">   // Now make sure that we've got the QFB filter toggle in the mail bar,</span>
<a href="#l33.17"></a><span id="l33.17">   // and that it is placed before the gloda-search and any spring, spacer,</span>
<a href="#l33.18"></a><span id="l33.18">   // or separator items.</span>
<a href="#l33.19"></a><span id="l33.19">   currentSet = mc.e(&quot;mail-bar3&quot;).currentSet;</span>
<a href="#l33.20"></a><span id="l33.20" class="difflineminus">-  assert_not_equals(-1, currentSet.indexOf(&quot;button-tag,qfb-show-filter-bar,spring&quot;),</span>
<a href="#l33.21"></a><span id="l33.21" class="difflineplus">+  assert_true(currentSet.includes(&quot;button-tag,qfb-show-filter-bar,spring&quot;),</span>
<a href="#l33.22"></a><span id="l33.22">                 &quot;We didn't find the QFB filter toggle where we should have.&quot;);</span>
<a href="#l33.23"></a><span id="l33.23"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/test/mozmill/migration-to-rdf-ui-5/test-migrate-to-rdf-ui-5.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -21,17 +21,17 @@ function setupModule(module) {</span>
<a href="#l34.4"></a><span id="l34.4">  * Ensures that the button with ID aButtonID exists at the end of a</span>
<a href="#l34.5"></a><span id="l34.5">  * toolbar with ID aToolbarID.</span>
<a href="#l34.6"></a><span id="l34.6">  *</span>
<a href="#l34.7"></a><span id="l34.7">  * @param aToolbarID the ID of the toolbar to check.</span>
<a href="#l34.8"></a><span id="l34.8">  * @param aButtonID the ID of the button to look for.</span>
<a href="#l34.9"></a><span id="l34.9">  */</span>
<a href="#l34.10"></a><span id="l34.10"> function assert_button_at_end_of_toolbar(aToolbarID, aButtonID) {</span>
<a href="#l34.11"></a><span id="l34.11">   let currentSet = mc.e(aToolbarID).currentSet;</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-  assert_not_equals(-1, currentSet.indexOf(aButtonID),</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  assert_true(currentSet.includes(aButtonID),</span>
<a href="#l34.14"></a><span id="l34.14">                    &quot;We didn't find the button with ID &quot; + aButtonID +</span>
<a href="#l34.15"></a><span id="l34.15">                    &quot;where we should have for the toolbar with ID &quot; +</span>
<a href="#l34.16"></a><span id="l34.16">                    aToolbarID);</span>
<a href="#l34.17"></a><span id="l34.17"> </span>
<a href="#l34.18"></a><span id="l34.18">   let lastChars = currentSet.substring(currentSet.length -</span>
<a href="#l34.19"></a><span id="l34.19">                                        aButtonID.length);</span>
<a href="#l34.20"></a><span id="l34.20">   assert_equals(lastChars, aButtonID,</span>
<a href="#l34.21"></a><span id="l34.21">                 &quot;We didn't find the button with ID &quot; + aButtonID + &quot; at the &quot; +</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/test/mozmill/pref-window/test-font-chooser.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/test/mozmill/pref-window/test-font-chooser.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -149,17 +149,17 @@ function test_font_name_not_present() {</span>
<a href="#l35.4"></a><span id="l35.4">     if (fonts.length != 2)</span>
<a href="#l35.5"></a><span id="l35.5">       throw new Error(listPref + &quot; should have exactly two fonts, but it is &quot; +</span>
<a href="#l35.6"></a><span id="l35.6">                       fontList + &quot;.&quot;);</span>
<a href="#l35.7"></a><span id="l35.7"> </span>
<a href="#l35.8"></a><span id="l35.8">     if (fonts[0] != fakeFont)</span>
<a href="#l35.9"></a><span id="l35.9">       throw new Error(&quot;The first font in &quot; + listPref + &quot; should be &quot; + fakeFont +</span>
<a href="#l35.10"></a><span id="l35.10">                       &quot;, but is actually &quot; + fonts[0] + &quot;.&quot;);</span>
<a href="#l35.11"></a><span id="l35.11"> </span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-    if (gRealFontLists[fontType].indexOf(fonts[1]) == -1)</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+    if (!gRealFontLists[fontType].includes(fonts[1]))</span>
<a href="#l35.14"></a><span id="l35.14">       throw new Error(&quot;The second font in &quot; + listPref + &quot; (&quot; + fonts[1] +</span>
<a href="#l35.15"></a><span id="l35.15">                       &quot;) should be present on this computer, but isn't.&quot;);</span>
<a href="#l35.16"></a><span id="l35.16">     expected[fontType] = fonts[1];</span>
<a href="#l35.17"></a><span id="l35.17"> </span>
<a href="#l35.18"></a><span id="l35.18">     // Set font.name to be the fake font. font.name-list is handled by</span>
<a href="#l35.19"></a><span id="l35.19">     // wrapper.py.</span>
<a href="#l35.20"></a><span id="l35.20">     Services.prefs.setCharPref(&quot;font.name.&quot; + fontType + &quot;.&quot; + kLanguage, fakeFont);</span>
<a href="#l35.21"></a><span id="l35.21">   }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-cloudfile-hightail-helpers.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -261,17 +261,17 @@ MockHightailItemIdRegistry.prototype = {</span>
<a href="#l36.4"></a><span id="l36.4">     return itemId;</span>
<a href="#l36.5"></a><span id="l36.5">   },</span>
<a href="#l36.6"></a><span id="l36.6"> </span>
<a href="#l36.7"></a><span id="l36.7">   setMapping: function setMapping(aItemId, aFilename) {</span>
<a href="#l36.8"></a><span id="l36.8">     let oldItemId = this.lookupItemId(aFilename);</span>
<a href="#l36.9"></a><span id="l36.9">     if (oldItemId)</span>
<a href="#l36.10"></a><span id="l36.10">       delete this._itemIdMap[oldItemId]</span>
<a href="#l36.11"></a><span id="l36.11"> </span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    if (this._itemIds.indexOf(aItemId) != -1) {</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+    if (this._itemIds.includes(aItemId)) {</span>
<a href="#l36.14"></a><span id="l36.14">       this._itemIdMap[aItemId] = aFilename;</span>
<a href="#l36.15"></a><span id="l36.15">     }</span>
<a href="#l36.16"></a><span id="l36.16">   },</span>
<a href="#l36.17"></a><span id="l36.17"> </span>
<a href="#l36.18"></a><span id="l36.18">   lookupFilename: function lookupFilename(aItemId) {</span>
<a href="#l36.19"></a><span id="l36.19">     return this._itemIdMap[aItemId];</span>
<a href="#l36.20"></a><span id="l36.20">   },</span>
<a href="#l36.21"></a><span id="l36.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -101,17 +101,17 @@ let gMockExtProtSvc = {</span>
<a href="#l37.4"></a><span id="l37.4">   loadUrl: function(aURL) {</span>
<a href="#l37.5"></a><span id="l37.5">     this._loadedURLs.push(aURL.spec);</span>
<a href="#l37.6"></a><span id="l37.6">   },</span>
<a href="#l37.7"></a><span id="l37.7"> </span>
<a href="#l37.8"></a><span id="l37.8">   setProtocolHandlerDefaults: function(aHandlerInfo, aOSHandlerExists) {</span>
<a href="#l37.9"></a><span id="l37.9">   },</span>
<a href="#l37.10"></a><span id="l37.10"> </span>
<a href="#l37.11"></a><span id="l37.11">   urlLoaded: function(aURL) {</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-    return this._loadedURLs.indexOf(aURL) != -1;</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+    return this._loadedURLs.includes(aURL);</span>
<a href="#l37.14"></a><span id="l37.14">   },</span>
<a href="#l37.15"></a><span id="l37.15"> }</span>
<a href="#l37.16"></a><span id="l37.16"> </span>
<a href="#l37.17"></a><span id="l37.17"> function MockExtProtConstructor() {</span>
<a href="#l37.18"></a><span id="l37.18">   return gMockExtProtSvc;</span>
<a href="#l37.19"></a><span id="l37.19"> }</span>
<a href="#l37.20"></a><span id="l37.20"> </span>
<a href="#l37.21"></a><span id="l37.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -1682,17 +1682,17 @@ var FolderListener = {</span>
<a href="#l38.4"></a><span id="l38.4">       mark_failure([&quot;Timeout waiting for events:&quot;, this.watchingFor]);</span>
<a href="#l38.5"></a><span id="l38.5">     }</span>
<a href="#l38.6"></a><span id="l38.6">   },</span>
<a href="#l38.7"></a><span id="l38.7"> </span>
<a href="#l38.8"></a><span id="l38.8">   OnItemEvent: function FolderNotificationHelper_OnItemEvent(</span>
<a href="#l38.9"></a><span id="l38.9">       aFolder, aEvent) {</span>
<a href="#l38.10"></a><span id="l38.10">     if (!this.watchingFor)</span>
<a href="#l38.11"></a><span id="l38.11">       return;</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-    if (this.watchingFor.indexOf(aEvent.toString()) != -1) {</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+    if (this.watchingFor.includes(aEvent.toString())) {</span>
<a href="#l38.14"></a><span id="l38.14">       this.watchingFor = null;</span>
<a href="#l38.15"></a><span id="l38.15">       this.sawEvents = true;</span>
<a href="#l38.16"></a><span id="l38.16">     }</span>
<a href="#l38.17"></a><span id="l38.17">   },</span>
<a href="#l38.18"></a><span id="l38.18"> };</span>
<a href="#l38.19"></a><span id="l38.19"> </span>
<a href="#l38.20"></a><span id="l38.20"> /**</span>
<a href="#l38.21"></a><span id="l38.21">  * Plan to wait for an nsIFolderListener.OnItemEvent matching one of the</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineat">@@ -2224,17 +2224,17 @@ function assert_expanded() {</span>
<a href="#l38.23"></a><span id="l38.23">  *     present the element is off floating in DOM limbo.  (The toolbar widget</span>
<a href="#l38.24"></a><span id="l38.24">  *     calls removeChild on the palette.)</span>
<a href="#l38.25"></a><span id="l38.25">  */</span>
<a href="#l38.26"></a><span id="l38.26"> function add_to_toolbar(aToolbarElement, aElementId) {</span>
<a href="#l38.27"></a><span id="l38.27">   mark_action(&quot;fdh&quot;, &quot;add_to_toolbar&quot;,</span>
<a href="#l38.28"></a><span id="l38.28">               [&quot;adding&quot;, aElementId,</span>
<a href="#l38.29"></a><span id="l38.29">                &quot;current set&quot;, aToolbarElement.currentSet]);</span>
<a href="#l38.30"></a><span id="l38.30">   let currentSet = aToolbarElement.currentSet.split(&quot;,&quot;);</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-  if (currentSet.indexOf(aElementId) == -1) {</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineplus">+  if (!currentSet.includes(aElementId)) {</span>
<a href="#l38.33"></a><span id="l38.33">     currentSet.unshift(aElementId);</span>
<a href="#l38.34"></a><span id="l38.34">     aToolbarElement.currentSet = currentSet.join(&quot;,&quot;);</span>
<a href="#l38.35"></a><span id="l38.35">   }</span>
<a href="#l38.36"></a><span id="l38.36"> }</span>
<a href="#l38.37"></a><span id="l38.37"> </span>
<a href="#l38.38"></a><span id="l38.38"> /**</span>
<a href="#l38.39"></a><span id="l38.39">  * Remove the widget with the given id from the toolbar if it is present.  Use</span>
<a href="#l38.40"></a><span id="l38.40">  *  |add_to_toolbar| to add the item in the first place.</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineat">@@ -2244,17 +2244,17 @@ function add_to_toolbar(aToolbarElement,</span>
<a href="#l38.42"></a><span id="l38.42">  * @param aElementId The id attribute of the item you want removed to the</span>
<a href="#l38.43"></a><span id="l38.43">  *     toolbar.</span>
<a href="#l38.44"></a><span id="l38.44">  */</span>
<a href="#l38.45"></a><span id="l38.45"> function remove_from_toolbar(aToolbarElement, aElementId) {</span>
<a href="#l38.46"></a><span id="l38.46">   mark_action(&quot;fdh&quot;, &quot;remove_from_toolbar&quot;,</span>
<a href="#l38.47"></a><span id="l38.47">               [&quot;removing&quot;, aElementId,</span>
<a href="#l38.48"></a><span id="l38.48">                &quot;current set&quot;, aToolbarElement.currentSet]);</span>
<a href="#l38.49"></a><span id="l38.49">   let currentSet = aToolbarElement.currentSet.split(&quot;,&quot;);</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-  if (currentSet.indexOf(aElementId) != -1) {</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineplus">+  if (currentSet.includes(aElementId)) {</span>
<a href="#l38.52"></a><span id="l38.52">     currentSet.splice(currentSet.indexOf(aElementId), 1);</span>
<a href="#l38.53"></a><span id="l38.53">     aToolbarElement.currentSet = currentSet.join(&quot;,&quot;);</span>
<a href="#l38.54"></a><span id="l38.54">   }</span>
<a href="#l38.55"></a><span id="l38.55"> }</span>
<a href="#l38.56"></a><span id="l38.56"> </span>
<a href="#l38.57"></a><span id="l38.57"> var RECOGNIZED_WINDOWS = [&quot;messagepane&quot;, &quot;multimessage&quot;];</span>
<a href="#l38.58"></a><span id="l38.58"> var RECOGNIZED_ELEMENTS = [&quot;folderTree&quot;, &quot;threadTree&quot;, &quot;attachmentList&quot;];</span>
<a href="#l38.59"></a><span id="l38.59"> </span>
<a href="#l38.60"></a><span id="l38.60" class="difflineat">@@ -2322,17 +2322,17 @@ function _get_currently_focused_thing() </span>
<a href="#l38.61"></a><span id="l38.61">   // If an element is focused, it is necessary for the main window to be</span>
<a href="#l38.62"></a><span id="l38.62">   // focused.</span>
<a href="#l38.63"></a><span id="l38.63">   if (focusedWindow != mc.window)</span>
<a href="#l38.64"></a><span id="l38.64">     return null;</span>
<a href="#l38.65"></a><span id="l38.65"> </span>
<a href="#l38.66"></a><span id="l38.66">   let focusedElement = mc.window.document.commandDispatcher.focusedElement;</span>
<a href="#l38.67"></a><span id="l38.67">   let elementsToMatch = [mc.e(elem)</span>
<a href="#l38.68"></a><span id="l38.68">                          for each ([, elem] in Iterator(RECOGNIZED_ELEMENTS))];</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineminus">-  while (focusedElement &amp;&amp; elementsToMatch.indexOf(focusedElement) == -1)</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineplus">+  while (focusedElement &amp;&amp; !elementsToMatch.includes(focusedElement))</span>
<a href="#l38.71"></a><span id="l38.71">     focusedElement = focusedElement.parentNode;</span>
<a href="#l38.72"></a><span id="l38.72"> </span>
<a href="#l38.73"></a><span id="l38.73">   return focusedElement ? focusedElement.id : null;</span>
<a href="#l38.74"></a><span id="l38.74"> }</span>
<a href="#l38.75"></a><span id="l38.75"> </span>
<a href="#l38.76"></a><span id="l38.76"> function _assert_thing_focused(aThing) {</span>
<a href="#l38.77"></a><span id="l38.77">   let focusedThing = _get_currently_focused_thing();</span>
<a href="#l38.78"></a><span id="l38.78">   if (focusedThing != aThing)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-observer-helpers.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-observer-helpers.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -16,17 +16,17 @@ function ObservationRecorder() {</span>
<a href="#l39.4"></a><span id="l39.4">   this.reset();</span>
<a href="#l39.5"></a><span id="l39.5"> }</span>
<a href="#l39.6"></a><span id="l39.6"> </span>
<a href="#l39.7"></a><span id="l39.7"> ObservationRecorder.prototype = {</span>
<a href="#l39.8"></a><span id="l39.8">   /**</span>
<a href="#l39.9"></a><span id="l39.9">    * Called by the Observer Service when an event is fired.</span>
<a href="#l39.10"></a><span id="l39.10">    */</span>
<a href="#l39.11"></a><span id="l39.11">   observe: function OR_observe(aSubject, aTopic, aData) {</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    if (this._topics.indexOf(aTopic) != -1) {</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+    if (this._topics.includes(aTopic)) {</span>
<a href="#l39.14"></a><span id="l39.14">       if (!(aTopic in this.saw))</span>
<a href="#l39.15"></a><span id="l39.15">         this.saw[aTopic] = 0;</span>
<a href="#l39.16"></a><span id="l39.16"> </span>
<a href="#l39.17"></a><span id="l39.17">       this.saw[aTopic] += 1;</span>
<a href="#l39.18"></a><span id="l39.18"> </span>
<a href="#l39.19"></a><span id="l39.19">       if (!(aTopic in this.subject))</span>
<a href="#l39.20"></a><span id="l39.20">         this.subject[aTopic] = [];</span>
<a href="#l39.21"></a><span id="l39.21"> </span>
<a href="#l39.22"></a><span id="l39.22" class="difflineat">@@ -104,17 +104,17 @@ ObservationRecorder.prototype = {</span>
<a href="#l39.23"></a><span id="l39.23">    * Example:  obs.stopNoticing(&quot;topic&quot;);</span>
<a href="#l39.24"></a><span id="l39.24">    *           obs.stopNoticing([&quot;topic1&quot;, &quot;topic2&quot;]);</span>
<a href="#l39.25"></a><span id="l39.25">    */</span>
<a href="#l39.26"></a><span id="l39.26">   stopNoticing: function OR_stopNoticing(aTopics) {</span>
<a href="#l39.27"></a><span id="l39.27">     if (!Array.isArray(aTopics))</span>
<a href="#l39.28"></a><span id="l39.28">       aTopics = [aTopics];</span>
<a href="#l39.29"></a><span id="l39.29"> </span>
<a href="#l39.30"></a><span id="l39.30">     this._topics = this._topics.filter(</span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-      topic =&gt; aTopics.indexOf(topic) == -1</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineplus">+      topic =&gt; !aTopics.includes(topic)</span>
<a href="#l39.33"></a><span id="l39.33">     );</span>
<a href="#l39.34"></a><span id="l39.34">   },</span>
<a href="#l39.35"></a><span id="l39.35"> </span>
<a href="#l39.36"></a><span id="l39.36"> </span>
<a href="#l39.37"></a><span id="l39.37">   /**</span>
<a href="#l39.38"></a><span id="l39.38">    * Returns true of a particular topic was observed at least once.</span>
<a href="#l39.39"></a><span id="l39.39">    *</span>
<a href="#l39.40"></a><span id="l39.40">    * @param aTopic the topic to check if the ObservationRecorder saw.</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

