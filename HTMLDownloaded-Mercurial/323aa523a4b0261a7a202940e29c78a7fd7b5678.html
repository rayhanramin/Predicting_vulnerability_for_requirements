<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 22308:323aa523a4b0261a7a202940e29c78a7fd7b5678</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 323aa523a4b0261a7a202940e29c78a7fd7b5678" />
<meta property="og:url" content="/comm-central/rev/323aa523a4b0261a7a202940e29c78a7fd7b5678" />
<meta property="og:description" content="Bug 1346797 - Fix calendar eslint issues - Fix mozilla/no-useless-parameters issues. r=MakeMyDay" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 323aa523a4b0261a7a202940e29c78a7fd7b5678 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/323aa523a4b0261a7a202940e29c78a7fd7b5678">shortlog</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/323aa523a4b0261a7a202940e29c78a7fd7b5678">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678">files</a> |
changeset |
<a href="/comm-central/raw-rev/323aa523a4b0261a7a202940e29c78a7fd7b5678">raw</a>  | <a href="/comm-central/archive/323aa523a4b0261a7a202940e29c78a7fd7b5678.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1346797">Bug 1346797</a> - Fix calendar eslint issues - Fix mozilla/no-useless-parameters issues. r=MakeMyDay
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#101;&#115;&#108;&#105;&#110;&#116;&#32;&#60;&#101;&#115;&#108;&#105;&#110;&#116;&#64;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#46;&#107;&#101;&#119;&#105;&#115;&#46;&#99;&#104;&#62;</td></tr>
<tr><td></td><td class="date age">Sun, 30 Jul 2017 13:57:12 +0200</td></tr>

<tr>
 <td>changeset 22308</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/323aa523a4b0261a7a202940e29c78a7fd7b5678">323aa523a4b0261a7a202940e29c78a7fd7b5678</a></td>
</tr>



<tr>
<td>parent 22307</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/ec5ea6aa64c26875a3081384415ef59d47c06193">ec5ea6aa64c26875a3081384415ef59d47c06193</a>
</td>
</tr>

<tr>
<td>child 22309</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/96bcae4b9bbcc33ce8fab8210152087c08c9e862">96bcae4b9bbcc33ce8fab8210152087c08c9e862</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=323aa523a4b0261a7a202940e29c78a7fd7b5678">13598</a></td></tr>
<tr><td>push user</td><td>mozilla@jorgk.com</td></tr>
<tr><td>push date</td><td class="date age">Sun, 08 Oct 2017 20:54:24 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@86066f04ca11 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=86066f04ca118895773fe5787d8cf7e569f4c393">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=86066f04ca118895773fe5787d8cf7e569f4c393&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=86066f04ca118895773fe5787d8cf7e569f4c393&newProject=comm-central&newRevision=076da1348bcce4fc0b579531505709fb0601b790&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=86066f04ca118895773fe5787d8cf7e569f4c393&newProject=comm-central&newRevision=076da1348bcce4fc0b579531505709fb0601b790&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=86066f04ca118895773fe5787d8cf7e569f4c393&newProject=comm-central&newRevision=076da1348bcce4fc0b579531505709fb0601b790&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28MakeMyDay%29&revcount=50">MakeMyDay</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1346797">1346797</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1346797">Bug 1346797</a> - Fix calendar eslint issues - Fix mozilla/no-useless-parameters issues. r=MakeMyDay

MozReview-Commit-ID: 4AGzcWZyewS</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/agenda-listbox.js">calendar/base/content/agenda-listbox.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/agenda-listbox.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/agenda-listbox.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/agenda-listbox.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/agenda-listbox.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/agenda-listbox.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-base-view.xml">calendar/base/content/calendar-base-view.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-base-view.xml">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-base-view.xml">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-base-view.xml">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-base-view.xml">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-base-view.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-chrome-startup.js">calendar/base/content/calendar-chrome-startup.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-chrome-startup.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-chrome-startup.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-chrome-startup.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-chrome-startup.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-chrome-startup.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-management.js">calendar/base/content/calendar-management.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-management.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-management.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-management.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-management.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-management.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-tree.xml">calendar/base/content/calendar-task-tree.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-tree.xml">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-tree.xml">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-tree.xml">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-tree.xml">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-tree.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-view.js">calendar/base/content/calendar-task-view.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-view.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-view.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-view.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-view.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-task-view.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-unifinder.js">calendar/base/content/calendar-unifinder.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-unifinder.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-unifinder.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-unifinder.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-unifinder.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-unifinder.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-views.js">calendar/base/content/calendar-views.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-views.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-views.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-views.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-views.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/calendar-views.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">calendar/base/content/dialogs/calendar-event-dialog-attendees.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/dialogs/calendar-event-dialog-attendees.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/widgets/minimonth.xml">calendar/base/content/widgets/minimonth.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/widgets/minimonth.xml">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/widgets/minimonth.xml">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/widgets/minimonth.xml">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/widgets/minimonth.xml">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/content/widgets/minimonth.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/modules/calUtils.jsm">calendar/base/modules/calUtils.jsm</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/modules/calUtils.jsm">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/modules/calUtils.jsm">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/modules/calUtils.jsm">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/modules/calUtils.jsm">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/modules/calUtils.jsm">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calAlarmService.js">calendar/base/src/calAlarmService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calAlarmService.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calAlarmService.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calAlarmService.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calAlarmService.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calAlarmService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calCalendarManager.js">calendar/base/src/calCalendarManager.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calCalendarManager.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calCalendarManager.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calCalendarManager.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calCalendarManager.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calCalendarManager.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calSleepMonitor.js">calendar/base/src/calSleepMonitor.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calSleepMonitor.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calSleepMonitor.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calSleepMonitor.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calSleepMonitor.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calSleepMonitor.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calStartupService.js">calendar/base/src/calStartupService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calStartupService.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calStartupService.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calStartupService.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calStartupService.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calStartupService.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calTimezoneService.js">calendar/base/src/calTimezoneService.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calTimezoneService.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calTimezoneService.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calTimezoneService.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calTimezoneService.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/base/src/calTimezoneService.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/components/lightningTextCalendarConverter.js">calendar/lightning/components/lightningTextCalendarConverter.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/components/lightningTextCalendarConverter.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/components/lightningTextCalendarConverter.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/components/lightningTextCalendarConverter.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/components/lightningTextCalendarConverter.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/components/lightningTextCalendarConverter.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/imip-bar.js">calendar/lightning/content/imip-bar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/imip-bar.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/imip-bar.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/imip-bar.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/imip-bar.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/imip-bar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/lightning-item-iframe.js">calendar/lightning/content/lightning-item-iframe.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/lightning-item-iframe.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/lightning-item-iframe.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/lightning-item-iframe.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/lightning-item-iframe.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/lightning-item-iframe.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/messenger-overlay-sidebar.js">calendar/lightning/content/messenger-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/messenger-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/messenger-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/messenger-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/messenger-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/messenger-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/suite-overlay-sidebar.js">calendar/lightning/content/suite-overlay-sidebar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/suite-overlay-sidebar.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/suite-overlay-sidebar.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/suite-overlay-sidebar.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/suite-overlay-sidebar.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/lightning/content/suite-overlay-sidebar.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/storage/calStorageCalendar.js">calendar/providers/storage/calStorageCalendar.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/storage/calStorageCalendar.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/storage/calStorageCalendar.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/storage/calStorageCalendar.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/storage/calStorageCalendar.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/storage/calStorageCalendar.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapSession.js">calendar/providers/wcap/calWcapSession.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapSession.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapSession.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapSession.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapSession.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapSession.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapUtils.js">calendar/providers/wcap/calWcapUtils.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapUtils.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapUtils.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapUtils.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapUtils.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/providers/wcap/calWcapUtils.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/test/unit/head_consts.js">calendar/test/unit/head_consts.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/test/unit/head_consts.js">file</a> |
<a href="/comm-central/annotate/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/test/unit/head_consts.js">annotate</a> |
<a href="/comm-central/diff/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/test/unit/head_consts.js">diff</a> |
<a href="/comm-central/comparison/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/test/unit/head_consts.js">comparison</a> |
<a href="/comm-central/log/323aa523a4b0261a7a202940e29c78a7fd7b5678/calendar/test/unit/head_consts.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/calendar/base/content/agenda-listbox.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/calendar/base/content/agenda-listbox.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -44,17 +44,17 @@ agendaListbox.init = function() {</span>
<a href="#l1.4"></a><span id="l1.4">             switch (aPrefName) {</span>
<a href="#l1.5"></a><span id="l1.5">                 case &quot;calendar.agendaListbox.soondays&quot;:</span>
<a href="#l1.6"></a><span id="l1.6">                     agendaListbox.soonDays = getSoondaysPreference();</span>
<a href="#l1.7"></a><span id="l1.7">                     agendaListbox.updateSoonSection();</span>
<a href="#l1.8"></a><span id="l1.8">                     break;</span>
<a href="#l1.9"></a><span id="l1.9">             }</span>
<a href="#l1.10"></a><span id="l1.10">         }</span>
<a href="#l1.11"></a><span id="l1.11">     };</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    Services.prefs.addObserver(&quot;calendar.agendaListbox&quot;, prefObserver, false);</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    Services.prefs.addObserver(&quot;calendar.agendaListbox&quot;, prefObserver);</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15">     // Make sure the agenda listbox is unloaded</span>
<a href="#l1.16"></a><span id="l1.16">     window.addEventListener(&quot;unload&quot;, () =&gt; {</span>
<a href="#l1.17"></a><span id="l1.17">         Services.prefs.removeObserver(&quot;calendar.agendaListbox&quot;, prefObserver);</span>
<a href="#l1.18"></a><span id="l1.18">         this.uninit();</span>
<a href="#l1.19"></a><span id="l1.19">     });</span>
<a href="#l1.20"></a><span id="l1.20"> };</span>
<a href="#l1.21"></a><span id="l1.21"> </span>
<a href="#l1.22"></a><span id="l1.22" class="difflineat">@@ -1092,17 +1092,17 @@ function scheduleNextCurrentEventUpdate(</span>
<a href="#l1.23"></a><span id="l1.23">         let wakeObserver = {</span>
<a href="#l1.24"></a><span id="l1.24">             observe: function(aSubject, aTopic, aData) {</span>
<a href="#l1.25"></a><span id="l1.25">                 if (aTopic == &quot;wake_notification&quot;) {</span>
<a href="#l1.26"></a><span id="l1.26">                     aRefreshCallback();</span>
<a href="#l1.27"></a><span id="l1.27">                 }</span>
<a href="#l1.28"></a><span id="l1.28">             }</span>
<a href="#l1.29"></a><span id="l1.29">         };</span>
<a href="#l1.30"></a><span id="l1.30">         // Add observer</span>
<a href="#l1.31"></a><span id="l1.31" class="difflineminus">-        Services.obs.addObserver(wakeObserver, &quot;wake_notification&quot;, false);</span>
<a href="#l1.32"></a><span id="l1.32" class="difflineplus">+        Services.obs.addObserver(wakeObserver, &quot;wake_notification&quot;);</span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34">         // Remove observer on unload</span>
<a href="#l1.35"></a><span id="l1.35">         window.addEventListener(&quot;unload&quot;, () =&gt; {</span>
<a href="#l1.36"></a><span id="l1.36">             Services.obs.removeObserver(wakeObserver, &quot;wake_notification&quot;);</span>
<a href="#l1.37"></a><span id="l1.37">         });</span>
<a href="#l1.38"></a><span id="l1.38"> </span>
<a href="#l1.39"></a><span id="l1.39">         gEventTimer = Components.classes[&quot;@mozilla.org/timer;1&quot;]</span>
<a href="#l1.40"></a><span id="l1.40">                                    .createInstance(Components.interfaces.nsITimer);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/calendar/base/content/calendar-base-view.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/calendar/base/content/calendar-base-view.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -246,17 +246,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">                                      .getService(Components.interfaces.calIAlarmService);</span>
<a href="#l2.5"></a><span id="l2.5">         alarmService.addObserver(this.mObserver);</span>
<a href="#l2.6"></a><span id="l2.6">         this.setAttribute(&quot;type&quot;, this.type);</span>
<a href="#l2.7"></a><span id="l2.7">         this.mResizeHandler = () =&gt; {</span>
<a href="#l2.8"></a><span id="l2.8">             this.onResize(this);</span>
<a href="#l2.9"></a><span id="l2.9">         };</span>
<a href="#l2.10"></a><span id="l2.10">         this.viewBroadcaster.addEventListener(this.getAttribute(&quot;type&quot;) + &quot;viewresized&quot;, this.mResizeHandler, true);</span>
<a href="#l2.11"></a><span id="l2.11">         // add a preference observer to monitor changes</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-        Services.prefs.addObserver(&quot;calendar.&quot;, this.mPrefObserver, false);</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+        Services.prefs.addObserver(&quot;calendar.&quot;, this.mPrefObserver);</span>
<a href="#l2.14"></a><span id="l2.14">         this.weekStartOffset = Preferences.get(&quot;calendar.week.start&quot;, 0);</span>
<a href="#l2.15"></a><span id="l2.15">         this.updateDaysOffPrefs();</span>
<a href="#l2.16"></a><span id="l2.16">         this.mPendingRefreshJobs = new Map();</span>
<a href="#l2.17"></a><span id="l2.17">         this.mLog = Log4Moz.getConfiguredLogger(&quot;calBaseView&quot;);</span>
<a href="#l2.18"></a><span id="l2.18">         this.mFlashingEvents = {};</span>
<a href="#l2.19"></a><span id="l2.19">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21">       &lt;destructor&gt;&lt;![CDATA[</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/calendar/base/content/calendar-chrome-startup.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -111,17 +111,17 @@ function onCalendarViewResize(aEvent) {</span>
<a href="#l3.4"></a><span id="l3.4">  */</span>
<a href="#l3.5"></a><span id="l3.5"> var calendarWindowPrefs = {</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7">     /** nsISupports QueryInterface */</span>
<a href="#l3.8"></a><span id="l3.8">     QueryInterface: XPCOMUtils.generateQI([Components.interfaces.nsIObserver]),</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10">     /** Initialize the preference observers */</span>
<a href="#l3.11"></a><span id="l3.11">     init: function() {</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-        Services.prefs.addObserver(&quot;calendar.view.useSystemColors&quot;, this, false);</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+        Services.prefs.addObserver(&quot;calendar.view.useSystemColors&quot;, this);</span>
<a href="#l3.14"></a><span id="l3.14">         Services.ww.registerNotification(this);</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16">         // Trigger setting pref on all open windows</span>
<a href="#l3.17"></a><span id="l3.17">         this.observe(null, &quot;nsPref:changed&quot;, &quot;calendar.view.useSystemColors&quot;);</span>
<a href="#l3.18"></a><span id="l3.18">     },</span>
<a href="#l3.19"></a><span id="l3.19"> </span>
<a href="#l3.20"></a><span id="l3.20">     /**  Cleanup the preference observers */</span>
<a href="#l3.21"></a><span id="l3.21">     cleanup: function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/calendar/base/content/calendar-management.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/calendar/base/content/calendar-management.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -407,17 +407,17 @@ function openCalendarSubscriptionsDialog</span>
<a href="#l4.4"></a><span id="l4.4">  */</span>
<a href="#l4.5"></a><span id="l4.5"> var calendarOfflineManager = {</span>
<a href="#l4.6"></a><span id="l4.6">     QueryInterface: XPCOMUtils.generateQI([Components.interfaces.nsIObserver]),</span>
<a href="#l4.7"></a><span id="l4.7"> </span>
<a href="#l4.8"></a><span id="l4.8">     init: function() {</span>
<a href="#l4.9"></a><span id="l4.9">         if (this.initialized) {</span>
<a href="#l4.10"></a><span id="l4.10">             throw Components.results.NS_ERROR_ALREADY_INITIALIZED;</span>
<a href="#l4.11"></a><span id="l4.11">         }</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-        Services.obs.addObserver(this, &quot;network:offline-status-changed&quot;, false);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+        Services.obs.addObserver(this, &quot;network:offline-status-changed&quot;);</span>
<a href="#l4.14"></a><span id="l4.14"> </span>
<a href="#l4.15"></a><span id="l4.15">         this.updateOfflineUI(!this.isOnline());</span>
<a href="#l4.16"></a><span id="l4.16">         this.initialized = true;</span>
<a href="#l4.17"></a><span id="l4.17">     },</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">     uninit: function() {</span>
<a href="#l4.20"></a><span id="l4.20">         if (!this.initialized) {</span>
<a href="#l4.21"></a><span id="l4.21">             throw Components.results.NS_ERROR_NOT_INITIALIZED;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-tree.xml</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -129,17 +129,17 @@</span>
<a href="#l5.4"></a><span id="l5.4">         tree.view = this.mTreeView;</span>
<a href="#l5.5"></a><span id="l5.5"> </span>
<a href="#l5.6"></a><span id="l5.6">         // set up our calendar event observer</span>
<a href="#l5.7"></a><span id="l5.7">         let composite = cal.getCompositeCalendar(window);</span>
<a href="#l5.8"></a><span id="l5.8">         composite.addObserver(this.mTaskTreeObserver);</span>
<a href="#l5.9"></a><span id="l5.9"> </span>
<a href="#l5.10"></a><span id="l5.10">         // set up the preference observer</span>
<a href="#l5.11"></a><span id="l5.11">         let branch = Services.prefs.getBranch(&quot;&quot;);</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-        branch.addObserver(&quot;calendar.&quot;, this, false);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineplus">+        branch.addObserver(&quot;calendar.&quot;, this);</span>
<a href="#l5.14"></a><span id="l5.14"> </span>
<a href="#l5.15"></a><span id="l5.15"> </span>
<a href="#l5.16"></a><span id="l5.16">         // we want to make several attributes on the column</span>
<a href="#l5.17"></a><span id="l5.17">         // elements persistent, but unfortunately there's no</span>
<a href="#l5.18"></a><span id="l5.18">         // relyable way with the 'persist' feature.</span>
<a href="#l5.19"></a><span id="l5.19">         // that's why we need to store the necessary bits and</span>
<a href="#l5.20"></a><span id="l5.20">         // pieces at the element this binding is attached to.</span>
<a href="#l5.21"></a><span id="l5.21">         let names = this.getAttribute(&quot;visible-columns&quot;).split(&quot; &quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/calendar/base/content/calendar-task-view.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/calendar/base/content/calendar-task-view.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -276,17 +276,17 @@ function taskViewOnLoad() {</span>
<a href="#l6.4"></a><span id="l6.4">     let toolbox = document.getElementById(&quot;task-actions-toolbox&quot;);</span>
<a href="#l6.5"></a><span id="l6.5">     toolbox.customizeDone = function(aEvent) {</span>
<a href="#l6.6"></a><span id="l6.6">         MailToolboxCustomizeDone(aEvent, &quot;CustomizeTaskActionsToolbar&quot;);</span>
<a href="#l6.7"></a><span id="l6.7">     };</span>
<a href="#l6.8"></a><span id="l6.8"> </span>
<a href="#l6.9"></a><span id="l6.9">     let toolbarset = document.getElementById(&quot;customToolbars&quot;);</span>
<a href="#l6.10"></a><span id="l6.10">     toolbox.toolbarset = toolbarset;</span>
<a href="#l6.11"></a><span id="l6.11"> </span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    Services.obs.notifyObservers(window, &quot;calendar-taskview-startup-done&quot;, false);</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+    Services.obs.notifyObservers(window, &quot;calendar-taskview-startup-done&quot;);</span>
<a href="#l6.14"></a><span id="l6.14"> }</span>
<a href="#l6.15"></a><span id="l6.15"> </span>
<a href="#l6.16"></a><span id="l6.16"> /**</span>
<a href="#l6.17"></a><span id="l6.17">  * Copy the value of the given link node to the clipboard</span>
<a href="#l6.18"></a><span id="l6.18">  *</span>
<a href="#l6.19"></a><span id="l6.19">  * @param linkNode      The node containing the value to copy to the clipboard</span>
<a href="#l6.20"></a><span id="l6.20">  */</span>
<a href="#l6.21"></a><span id="l6.21"> function taskViewCopyLink(linkNode) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/calendar/base/content/calendar-unifinder.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/calendar/base/content/calendar-unifinder.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -185,17 +185,17 @@ var unifinderObserver = {</span>
<a href="#l7.4"></a><span id="l7.4">  */</span>
<a href="#l7.5"></a><span id="l7.5"> function prepareCalendarUnifinder() {</span>
<a href="#l7.6"></a><span id="l7.6">     // Only load once</span>
<a href="#l7.7"></a><span id="l7.7">     window.removeEventListener(&quot;load&quot;, prepareCalendarUnifinder);</span>
<a href="#l7.8"></a><span id="l7.8">     let unifinderTree = document.getElementById(&quot;unifinder-search-results-tree&quot;);</span>
<a href="#l7.9"></a><span id="l7.9"> </span>
<a href="#l7.10"></a><span id="l7.10">     // Add pref observer</span>
<a href="#l7.11"></a><span id="l7.11">     let branch = Services.prefs.getBranch(&quot;&quot;);</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    branch.addObserver(&quot;calendar.&quot;, unifinderObserver, false);</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+    branch.addObserver(&quot;calendar.&quot;, unifinderObserver);</span>
<a href="#l7.14"></a><span id="l7.14"> </span>
<a href="#l7.15"></a><span id="l7.15">     // Check if this is not the hidden window, which has no UI elements</span>
<a href="#l7.16"></a><span id="l7.16">     if (unifinderTree) {</span>
<a href="#l7.17"></a><span id="l7.17">         // set up our calendar event observer</span>
<a href="#l7.18"></a><span id="l7.18">         let ccalendar = cal.getCompositeCalendar(window);</span>
<a href="#l7.19"></a><span id="l7.19">         ccalendar.addObserver(unifinderObserver);</span>
<a href="#l7.20"></a><span id="l7.20"> </span>
<a href="#l7.21"></a><span id="l7.21">         kDefaultTimezone = cal.calendarDefaultTimezone();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/calendar/base/content/calendar-views.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/calendar/base/content/calendar-views.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -336,17 +336,17 @@ function scheduleMidnightUpdate(aRefresh</span>
<a href="#l8.4"></a><span id="l8.4">                     }</span>
<a href="#l8.5"></a><span id="l8.5">                     this.mTimer.initWithCallback(udCallback, 10 * 1000,</span>
<a href="#l8.6"></a><span id="l8.6">                                                  Components.interfaces.nsITimer.TYPE_ONE_SHOT);</span>
<a href="#l8.7"></a><span id="l8.7">                 }</span>
<a href="#l8.8"></a><span id="l8.8">             }</span>
<a href="#l8.9"></a><span id="l8.9">         };</span>
<a href="#l8.10"></a><span id="l8.10"> </span>
<a href="#l8.11"></a><span id="l8.11">         // Add observer</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-        Services.obs.addObserver(wakeObserver, &quot;wake_notification&quot;, false);</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+        Services.obs.addObserver(wakeObserver, &quot;wake_notification&quot;);</span>
<a href="#l8.14"></a><span id="l8.14"> </span>
<a href="#l8.15"></a><span id="l8.15">         // Remove observer on unload</span>
<a href="#l8.16"></a><span id="l8.16">         window.addEventListener(&quot;unload&quot;, () =&gt; {</span>
<a href="#l8.17"></a><span id="l8.17">             Services.obs.removeObserver(wakeObserver, &quot;wake_notification&quot;);</span>
<a href="#l8.18"></a><span id="l8.18">         });</span>
<a href="#l8.19"></a><span id="l8.19">         gMidnightTimer = Components.classes[&quot;@mozilla.org/timer;1&quot;]</span>
<a href="#l8.20"></a><span id="l8.20">                                    .createInstance(Components.interfaces.nsITimer);</span>
<a href="#l8.21"></a><span id="l8.21">     }</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineat">@@ -428,17 +428,17 @@ var categoryManagement = {</span>
<a href="#l8.23"></a><span id="l8.23">                     categories[i] = categoryFix;  // replace illegal name</span>
<a href="#l8.24"></a><span id="l8.24">                 }</span>
<a href="#l8.25"></a><span id="l8.25">             }</span>
<a href="#l8.26"></a><span id="l8.26">         }</span>
<a href="#l8.27"></a><span id="l8.27"> </span>
<a href="#l8.28"></a><span id="l8.28">         // Add color information to the stylesheets.</span>
<a href="#l8.29"></a><span id="l8.29">         categories.forEach(categoryManagement.updateStyleSheetForCategory,</span>
<a href="#l8.30"></a><span id="l8.30">                            categoryManagement);</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-        categoryPrefBranch.addObserver(&quot;&quot;, categoryManagement, false);</span>
<a href="#l8.32"></a><span id="l8.32" class="difflineplus">+        categoryPrefBranch.addObserver(&quot;&quot;, categoryManagement);</span>
<a href="#l8.33"></a><span id="l8.33">     },</span>
<a href="#l8.34"></a><span id="l8.34"> </span>
<a href="#l8.35"></a><span id="l8.35">     cleanupCategories: function() {</span>
<a href="#l8.36"></a><span id="l8.36">         categoryPrefBranch = Services.prefs.getBranch(&quot;calendar.category.color.&quot;);</span>
<a href="#l8.37"></a><span id="l8.37">         categoryPrefBranch.removeObserver(&quot;&quot;, categoryManagement);</span>
<a href="#l8.38"></a><span id="l8.38">     },</span>
<a href="#l8.39"></a><span id="l8.39"> </span>
<a href="#l8.40"></a><span id="l8.40">     observe: function(aSubject, aTopic, aPrefName) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/calendar/base/content/dialogs/calendar-event-dialog-attendees.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/calendar/base/content/dialogs/calendar-event-dialog-attendees.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -114,17 +114,17 @@ function onLoad() {</span>
<a href="#l9.4"></a><span id="l9.4">                 case &quot;calendar.view.daystarthour&quot;:</span>
<a href="#l9.5"></a><span id="l9.5">                 case &quot;calendar.view.dayendhour&quot;:</span>
<a href="#l9.6"></a><span id="l9.6">                     initTimeRange();</span>
<a href="#l9.7"></a><span id="l9.7">                     propagateDateTime();</span>
<a href="#l9.8"></a><span id="l9.8">                     break;</span>
<a href="#l9.9"></a><span id="l9.9">             }</span>
<a href="#l9.10"></a><span id="l9.10">         }</span>
<a href="#l9.11"></a><span id="l9.11">     };</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-    Services.prefs.addObserver(&quot;calendar.&quot;, prefObserver, false);</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+    Services.prefs.addObserver(&quot;calendar.&quot;, prefObserver);</span>
<a href="#l9.14"></a><span id="l9.14">     window.addEventListener(&quot;unload&quot;, () =&gt; {</span>
<a href="#l9.15"></a><span id="l9.15">         Services.prefs.removeObserver(&quot;calendar.&quot;, prefObserver);</span>
<a href="#l9.16"></a><span id="l9.16">     });</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18">     opener.setCursor(&quot;auto&quot;);</span>
<a href="#l9.19"></a><span id="l9.19">     self.focus();</span>
<a href="#l9.20"></a><span id="l9.20"> }</span>
<a href="#l9.21"></a><span id="l9.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/calendar/base/content/widgets/minimonth.xml</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -455,17 +455,17 @@</span>
<a href="#l10.4"></a><span id="l10.4">         this.refreshDisplay();</span>
<a href="#l10.5"></a><span id="l10.5">         if (this.hasAttribute(&quot;freebusy&quot;)) {</span>
<a href="#l10.6"></a><span id="l10.6">             this._setFreeBusy(this.getAttribute(&quot;freebusy&quot;) == &quot;true&quot;);</span>
<a href="#l10.7"></a><span id="l10.7">         }</span>
<a href="#l10.8"></a><span id="l10.8">         this.mShowWeekNumber = Preferences.get(&quot;calendar.view-minimonth.showWeekNumber&quot;, true);</span>
<a href="#l10.9"></a><span id="l10.9"> </span>
<a href="#l10.10"></a><span id="l10.10">         // Add pref observer</span>
<a href="#l10.11"></a><span id="l10.11">         let branch = Services.prefs.getBranch(&quot;&quot;);</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-        branch.addObserver(&quot;calendar.&quot;, this, false);</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+        branch.addObserver(&quot;calendar.&quot;, this);</span>
<a href="#l10.14"></a><span id="l10.14">       ]]&gt;&lt;/constructor&gt;</span>
<a href="#l10.15"></a><span id="l10.15"> </span>
<a href="#l10.16"></a><span id="l10.16">       &lt;destructor&gt;&lt;![CDATA[</span>
<a href="#l10.17"></a><span id="l10.17">         Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l10.18"></a><span id="l10.18"> </span>
<a href="#l10.19"></a><span id="l10.19">         if (this.mObservesComposite == true) {</span>
<a href="#l10.20"></a><span id="l10.20">             cal.getCompositeCalendar(window).removeObserver(this);</span>
<a href="#l10.21"></a><span id="l10.21">         }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/calendar/base/modules/calUtils.jsm</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/calendar/base/modules/calUtils.jsm</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -954,17 +954,17 @@ var cal = {</span>
<a href="#l11.4"></a><span id="l11.4">                 if (topic == topic_) {</span>
<a href="#l11.5"></a><span id="l11.5">                     if (oneTime) {</span>
<a href="#l11.6"></a><span id="l11.6">                         Services.obs.removeObserver(this, topic);</span>
<a href="#l11.7"></a><span id="l11.7">                     }</span>
<a href="#l11.8"></a><span id="l11.8">                     func(subject, topic, data);</span>
<a href="#l11.9"></a><span id="l11.9">                 }</span>
<a href="#l11.10"></a><span id="l11.10">             }</span>
<a href="#l11.11"></a><span id="l11.11">         };</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-        Services.obs.addObserver(observer, topic, false /* don't hold weakly */);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+        Services.obs.addObserver(observer, topic);</span>
<a href="#l11.14"></a><span id="l11.14">     },</span>
<a href="#l11.15"></a><span id="l11.15"> </span>
<a href="#l11.16"></a><span id="l11.16">     /**</span>
<a href="#l11.17"></a><span id="l11.17">      * Wraps an instance, making sure the xpcom wrapped object is used.</span>
<a href="#l11.18"></a><span id="l11.18">      *</span>
<a href="#l11.19"></a><span id="l11.19">      * @param aObj the object under consideration</span>
<a href="#l11.20"></a><span id="l11.20">      * @param aInterface the interface to be wrapped</span>
<a href="#l11.21"></a><span id="l11.21">      *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/calendar/base/src/calAlarmService.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/calendar/base/src/calAlarmService.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -205,19 +205,19 @@ calAlarmService.prototype = {</span>
<a href="#l12.4"></a><span id="l12.4">         this.mObservers.remove(aObserver);</span>
<a href="#l12.5"></a><span id="l12.5">     },</span>
<a href="#l12.6"></a><span id="l12.6"> </span>
<a href="#l12.7"></a><span id="l12.7">     startup: function() {</span>
<a href="#l12.8"></a><span id="l12.8">         if (this.mStarted) {</span>
<a href="#l12.9"></a><span id="l12.9">             return;</span>
<a href="#l12.10"></a><span id="l12.10">         }</span>
<a href="#l12.11"></a><span id="l12.11"> </span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-        Services.obs.addObserver(this, &quot;profile-after-change&quot;, false);</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-        Services.obs.addObserver(this, &quot;xpcom-shutdown&quot;, false);</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-        Services.obs.addObserver(this, &quot;wake_notification&quot;, false);</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineplus">+        Services.obs.addObserver(this, &quot;profile-after-change&quot;);</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineplus">+        Services.obs.addObserver(this, &quot;xpcom-shutdown&quot;);</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineplus">+        Services.obs.addObserver(this, &quot;wake_notification&quot;);</span>
<a href="#l12.18"></a><span id="l12.18"> </span>
<a href="#l12.19"></a><span id="l12.19">         /* Tell people that we're alive so they can start monitoring alarms.</span>
<a href="#l12.20"></a><span id="l12.20">          */</span>
<a href="#l12.21"></a><span id="l12.21">         let notifier = Components.classes[&quot;@mozilla.org/embedcomp/appstartup-notifier;1&quot;]</span>
<a href="#l12.22"></a><span id="l12.22">                                  .getService(Components.interfaces.nsIObserver);</span>
<a href="#l12.23"></a><span id="l12.23">         notifier.observe(null, &quot;alarm-service-startup&quot;, null);</span>
<a href="#l12.24"></a><span id="l12.24"> </span>
<a href="#l12.25"></a><span id="l12.25">         cal.getCalendarManager().addObserver(this.calendarManagerObserver);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/calendar/base/src/calCalendarManager.js</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/calendar/base/src/calCalendarManager.js</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -47,22 +47,22 @@ calCalendarManager.prototype = {</span>
<a href="#l13.4"></a><span id="l13.4">         this.mCache = null;</span>
<a href="#l13.5"></a><span id="l13.5">         this.mCalObservers = null;</span>
<a href="#l13.6"></a><span id="l13.6">         this.mRefreshTimer = {};</span>
<a href="#l13.7"></a><span id="l13.7">         this.setupOfflineObservers();</span>
<a href="#l13.8"></a><span id="l13.8">         this.mNetworkCalendarCount = 0;</span>
<a href="#l13.9"></a><span id="l13.9">         this.mReadonlyCalendarCount = 0;</span>
<a href="#l13.10"></a><span id="l13.10">         this.mCalendarCount = 0;</span>
<a href="#l13.11"></a><span id="l13.11"> </span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-        Services.obs.addObserver(this, &quot;http-on-modify-request&quot;, false);</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+        Services.obs.addObserver(this, &quot;http-on-modify-request&quot;);</span>
<a href="#l13.14"></a><span id="l13.14"> </span>
<a href="#l13.15"></a><span id="l13.15">         // We only add the observer if the pref is set and only check for the</span>
<a href="#l13.16"></a><span id="l13.16">         // pref on startup to avoid checking for every http request</span>
<a href="#l13.17"></a><span id="l13.17">         if (Preferences.get(&quot;calendar.network.multirealm&quot;, false)) {</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-            Services.obs.addObserver(this, &quot;http-on-examine-response&quot;, false);</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineplus">+            Services.obs.addObserver(this, &quot;http-on-examine-response&quot;);</span>
<a href="#l13.20"></a><span id="l13.20">         }</span>
<a href="#l13.21"></a><span id="l13.21"> </span>
<a href="#l13.22"></a><span id="l13.22">         aCompleteListener.onResult(null, Components.results.NS_OK);</span>
<a href="#l13.23"></a><span id="l13.23">     },</span>
<a href="#l13.24"></a><span id="l13.24"> </span>
<a href="#l13.25"></a><span id="l13.25">     shutdown: function(aCompleteListener) {</span>
<a href="#l13.26"></a><span id="l13.26">         for (let id in this.mCache) {</span>
<a href="#l13.27"></a><span id="l13.27">             let calendar = this.mCache[id];</span>
<a href="#l13.28"></a><span id="l13.28" class="difflineat">@@ -82,17 +82,17 @@ calCalendarManager.prototype = {</span>
<a href="#l13.29"></a><span id="l13.29">             Services.obs.removeObserver(this, &quot;http-on-examine-response&quot;);</span>
<a href="#l13.30"></a><span id="l13.30">         }</span>
<a href="#l13.31"></a><span id="l13.31"> </span>
<a href="#l13.32"></a><span id="l13.32">         aCompleteListener.onResult(null, Components.results.NS_OK);</span>
<a href="#l13.33"></a><span id="l13.33">     },</span>
<a href="#l13.34"></a><span id="l13.34"> </span>
<a href="#l13.35"></a><span id="l13.35"> </span>
<a href="#l13.36"></a><span id="l13.36">     setupOfflineObservers: function() {</span>
<a href="#l13.37"></a><span id="l13.37" class="difflineminus">-        Services.obs.addObserver(this, &quot;network:offline-status-changed&quot;, false);</span>
<a href="#l13.38"></a><span id="l13.38" class="difflineplus">+        Services.obs.addObserver(this, &quot;network:offline-status-changed&quot;);</span>
<a href="#l13.39"></a><span id="l13.39">     },</span>
<a href="#l13.40"></a><span id="l13.40"> </span>
<a href="#l13.41"></a><span id="l13.41">     cleanupOfflineObservers: function() {</span>
<a href="#l13.42"></a><span id="l13.42">         Services.obs.removeObserver(this, &quot;network:offline-status-changed&quot;);</span>
<a href="#l13.43"></a><span id="l13.43">     },</span>
<a href="#l13.44"></a><span id="l13.44"> </span>
<a href="#l13.45"></a><span id="l13.45">     observe: function(aSubject, aTopic, aData) {</span>
<a href="#l13.46"></a><span id="l13.46">         switch (aTopic) {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/calendar/base/src/calSleepMonitor.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/calendar/base/src/calSleepMonitor.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -27,17 +27,17 @@ calSleepMonitor.prototype = {</span>
<a href="#l14.4"></a><span id="l14.4">     timer: null,</span>
<a href="#l14.5"></a><span id="l14.5">     expected: null,</span>
<a href="#l14.6"></a><span id="l14.6">     tolerance: 1000,</span>
<a href="#l14.7"></a><span id="l14.7"> </span>
<a href="#l14.8"></a><span id="l14.8">     callback: function() {</span>
<a href="#l14.9"></a><span id="l14.9">         let now = Date.now();</span>
<a href="#l14.10"></a><span id="l14.10">         if (now - this.expected &gt; this.tolerance) {</span>
<a href="#l14.11"></a><span id="l14.11">             cal.LOG(&quot;[calSleepMonitor] Sleep cycle detected, notifying observers.&quot;);</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-            Services.obs.notifyObservers(null, &quot;wake_notification&quot;, null);</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineplus">+            Services.obs.notifyObservers(null, &quot;wake_notification&quot;);</span>
<a href="#l14.14"></a><span id="l14.14">         }</span>
<a href="#l14.15"></a><span id="l14.15">         this.expected = now + this.interval;</span>
<a href="#l14.16"></a><span id="l14.16">     },</span>
<a href="#l14.17"></a><span id="l14.17">     start: function() {</span>
<a href="#l14.18"></a><span id="l14.18">         this.stop();</span>
<a href="#l14.19"></a><span id="l14.19">         this.expected = Date.now() + this.interval;</span>
<a href="#l14.20"></a><span id="l14.20">         this.timer = Components.classes[&quot;@mozilla.org/timer;1&quot;].createInstance(Components.interfaces.nsITimer);</span>
<a href="#l14.21"></a><span id="l14.21">         this.timer.initWithCallback(this.callback.bind(this), this.interval, Components.interfaces.nsITimer.TYPE_REPEATING_PRECISE);</span>
<a href="#l14.22"></a><span id="l14.22" class="difflineat">@@ -55,17 +55,17 @@ calSleepMonitor.prototype = {</span>
<a href="#l14.23"></a><span id="l14.23">         if (Services.appinfo.OS == &quot;WINNT&quot; || Services.appinfo.OS == &quot;Darwin&quot;) {</span>
<a href="#l14.24"></a><span id="l14.24">             return;</span>
<a href="#l14.25"></a><span id="l14.25">         }</span>
<a href="#l14.26"></a><span id="l14.26"> </span>
<a href="#l14.27"></a><span id="l14.27">         if (aTopic == &quot;profile-after-change&quot;) {</span>
<a href="#l14.28"></a><span id="l14.28">             cal.LOG(&quot;[calSleepMonitor] Starting sleep monitor.&quot;);</span>
<a href="#l14.29"></a><span id="l14.29">             this.start();</span>
<a href="#l14.30"></a><span id="l14.30"> </span>
<a href="#l14.31"></a><span id="l14.31" class="difflineminus">-            Services.obs.addObserver(this, &quot;quit-application&quot;, false);</span>
<a href="#l14.32"></a><span id="l14.32" class="difflineplus">+            Services.obs.addObserver(this, &quot;quit-application&quot;);</span>
<a href="#l14.33"></a><span id="l14.33">         } else if (aTopic == &quot;quit-application&quot;) {</span>
<a href="#l14.34"></a><span id="l14.34">             cal.LOG(&quot;[calSleepMonitor] Stopping sleep monitor.&quot;);</span>
<a href="#l14.35"></a><span id="l14.35">             this.stop();</span>
<a href="#l14.36"></a><span id="l14.36">         }</span>
<a href="#l14.37"></a><span id="l14.37">     }</span>
<a href="#l14.38"></a><span id="l14.38"> };</span>
<a href="#l14.39"></a><span id="l14.39"> </span>
<a href="#l14.40"></a><span id="l14.40"> this.NSGetFactory = XPCOMUtils.generateNSGetFactory([calSleepMonitor]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/calendar/base/src/calStartupService.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/calendar/base/src/calStartupService.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -44,19 +44,19 @@ calStartupService.prototype = {</span>
<a href="#l15.4"></a><span id="l15.4">     }),</span>
<a href="#l15.5"></a><span id="l15.5"> </span>
<a href="#l15.6"></a><span id="l15.6">     // Startup Service Methods</span>
<a href="#l15.7"></a><span id="l15.7"> </span>
<a href="#l15.8"></a><span id="l15.8">     /**</span>
<a href="#l15.9"></a><span id="l15.9">      * Sets up the needed observers for noticing startup/shutdown</span>
<a href="#l15.10"></a><span id="l15.10">      */</span>
<a href="#l15.11"></a><span id="l15.11">     setupObservers: function() {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-        Services.obs.addObserver(this, &quot;profile-after-change&quot;, false);</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-        Services.obs.addObserver(this, &quot;profile-before-change&quot;, false);</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-        Services.obs.addObserver(this, &quot;xpcom-shutdown&quot;, false);</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+        Services.obs.addObserver(this, &quot;profile-after-change&quot;);</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+        Services.obs.addObserver(this, &quot;profile-before-change&quot;);</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+        Services.obs.addObserver(this, &quot;xpcom-shutdown&quot;);</span>
<a href="#l15.18"></a><span id="l15.18">     },</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20">     started: false,</span>
<a href="#l15.21"></a><span id="l15.21"> </span>
<a href="#l15.22"></a><span id="l15.22">     /**</span>
<a href="#l15.23"></a><span id="l15.23">      * Gets the startup order of services. This is an array of service objects</span>
<a href="#l15.24"></a><span id="l15.24">      * that should be called in order at startup.</span>
<a href="#l15.25"></a><span id="l15.25">      *</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineat">@@ -68,17 +68,17 @@ calStartupService.prototype = {</span>
<a href="#l15.27"></a><span id="l15.27">                                   .getService(Components.interfaces.calITimezoneService);</span>
<a href="#l15.28"></a><span id="l15.28">         let calMgr = Components.classes[&quot;@mozilla.org/calendar/manager;1&quot;]</span>
<a href="#l15.29"></a><span id="l15.29">                                .getService(Components.interfaces.calICalendarManager);</span>
<a href="#l15.30"></a><span id="l15.30"> </span>
<a href="#l15.31"></a><span id="l15.31">         // Notification object</span>
<a href="#l15.32"></a><span id="l15.32">         let notify = {</span>
<a href="#l15.33"></a><span id="l15.33">             startup: function(aCompleteListener) {</span>
<a href="#l15.34"></a><span id="l15.34">                 self.started = true;</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineminus">-                Services.obs.notifyObservers(null, &quot;calendar-startup-done&quot;, null);</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineplus">+                Services.obs.notifyObservers(null, &quot;calendar-startup-done&quot;);</span>
<a href="#l15.37"></a><span id="l15.37">                 aCompleteListener.onResult(null, Components.results.NS_OK);</span>
<a href="#l15.38"></a><span id="l15.38">             },</span>
<a href="#l15.39"></a><span id="l15.39">             shutdown: function(aCompleteListener) {</span>
<a href="#l15.40"></a><span id="l15.40">                 // Argh, it would have all been so pretty! Since we just reverse</span>
<a href="#l15.41"></a><span id="l15.41">                 // the array, the shutdown notification would happen before the</span>
<a href="#l15.42"></a><span id="l15.42">                 // other shutdown calls. For lack of pretty code, I'm</span>
<a href="#l15.43"></a><span id="l15.43">                 // leaving this out! Users can still listen to xpcom-shutdown.</span>
<a href="#l15.44"></a><span id="l15.44">                 self.started = false;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/calendar/base/src/calTimezoneService.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/calendar/base/src/calTimezoneService.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -267,17 +267,17 @@ calTimezoneService.prototype = {</span>
<a href="#l16.4"></a><span id="l16.4">             this.setupObservers();</span>
<a href="#l16.5"></a><span id="l16.5">         }</span>
<a href="#l16.6"></a><span id="l16.6">         return this.mDefaultTimezone;</span>
<a href="#l16.7"></a><span id="l16.7">     },</span>
<a href="#l16.8"></a><span id="l16.8"> </span>
<a href="#l16.9"></a><span id="l16.9">     setupObservers: function() {</span>
<a href="#l16.10"></a><span id="l16.10">         if (!this.mHasSetupObservers) {</span>
<a href="#l16.11"></a><span id="l16.11">             // Now set up the observer</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-            Services.prefs.addObserver(&quot;calendar.timezone.local&quot;, this, false);</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+            Services.prefs.addObserver(&quot;calendar.timezone.local&quot;, this);</span>
<a href="#l16.14"></a><span id="l16.14">             this.mHasSetupObservers = true;</span>
<a href="#l16.15"></a><span id="l16.15">         }</span>
<a href="#l16.16"></a><span id="l16.16">     },</span>
<a href="#l16.17"></a><span id="l16.17"> </span>
<a href="#l16.18"></a><span id="l16.18">     observe: function(aSubject, aTopic, aData) {</span>
<a href="#l16.19"></a><span id="l16.19">         if (aTopic == &quot;nsPref:changed&quot; &amp;&amp; aData == &quot;calendar.timezone.local&quot;) {</span>
<a href="#l16.20"></a><span id="l16.20">             // Unsetting the default timezone will make the next call to the</span>
<a href="#l16.21"></a><span id="l16.21">             // default timezone getter set up the correct timezone again.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/calendar/lightning/components/lightningTextCalendarConverter.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/calendar/lightning/components/lightningTextCalendarConverter.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -78,15 +78,15 @@ ltnMimeConverter.prototype = {</span>
<a href="#l17.4"></a><span id="l17.4">         msgOverlay = cal.xml.serializeDOM(dom);</span>
<a href="#l17.5"></a><span id="l17.5"> </span>
<a href="#l17.6"></a><span id="l17.6">         if (msgWindow) {</span>
<a href="#l17.7"></a><span id="l17.7">             let sinkProps = msgWindow.msgHeaderSink.properties;</span>
<a href="#l17.8"></a><span id="l17.8">             sinkProps.setPropertyAsInterface(&quot;itipItem&quot;, itipItem);</span>
<a href="#l17.9"></a><span id="l17.9">             sinkProps.setPropertyAsAUTF8String(&quot;msgOverlay&quot;, msgOverlay);</span>
<a href="#l17.10"></a><span id="l17.10"> </span>
<a href="#l17.11"></a><span id="l17.11">             // Notify the observer that the itipItem is available</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-            Services.obs.notifyObservers(null, &quot;onItipItemCreation&quot;, 0);</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+            Services.obs.notifyObservers(null, &quot;onItipItemCreation&quot;);</span>
<a href="#l17.14"></a><span id="l17.14">         }</span>
<a href="#l17.15"></a><span id="l17.15">         return msgOverlay;</span>
<a href="#l17.16"></a><span id="l17.16">     }</span>
<a href="#l17.17"></a><span id="l17.17"> };</span>
<a href="#l17.18"></a><span id="l17.18"> </span>
<a href="#l17.19"></a><span id="l17.19"> this.NSGetFactory = XPCOMUtils.generateNSGetFactory([ltnMimeConverter]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/calendar/lightning/content/imip-bar.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/calendar/lightning/content/imip-bar.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -47,17 +47,17 @@ var ltnImipBar = {</span>
<a href="#l18.4"></a><span id="l18.4">         // changing folders.</span>
<a href="#l18.5"></a><span id="l18.5">         ltnImipBar.tbHideMessageHeaderPane = HideMessageHeaderPane;</span>
<a href="#l18.6"></a><span id="l18.6">         HideMessageHeaderPane = function() {</span>
<a href="#l18.7"></a><span id="l18.7">             ltnImipBar.resetBar();</span>
<a href="#l18.8"></a><span id="l18.8">             ltnImipBar.tbHideMessageHeaderPane.apply(null, arguments);</span>
<a href="#l18.9"></a><span id="l18.9">         };</span>
<a href="#l18.10"></a><span id="l18.10"> </span>
<a href="#l18.11"></a><span id="l18.11">         // Set up our observers</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-        Services.obs.addObserver(ltnImipBar, &quot;onItipItemCreation&quot;, false);</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+        Services.obs.addObserver(ltnImipBar, &quot;onItipItemCreation&quot;);</span>
<a href="#l18.14"></a><span id="l18.14">     },</span>
<a href="#l18.15"></a><span id="l18.15"> </span>
<a href="#l18.16"></a><span id="l18.16">     /**</span>
<a href="#l18.17"></a><span id="l18.17">      * Unload handler to clean up after the imip bar</span>
<a href="#l18.18"></a><span id="l18.18">      * NOTE: This function is called without a valid this-context!</span>
<a href="#l18.19"></a><span id="l18.19">      */</span>
<a href="#l18.20"></a><span id="l18.20">     unload: function() {</span>
<a href="#l18.21"></a><span id="l18.21">         removeEventListener(&quot;messagepane-loaded&quot;, ltnImipBar.load, true);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/calendar/lightning/content/lightning-item-iframe.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -385,18 +385,17 @@ function onLoad() {</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5">     if (!gNewItemUI) {</span>
<a href="#l19.6"></a><span id="l19.6">         document.getElementById(&quot;item-title&quot;).focus();</span>
<a href="#l19.7"></a><span id="l19.7">         document.getElementById(&quot;item-title&quot;).select();</span>
<a href="#l19.8"></a><span id="l19.8">     }</span>
<a href="#l19.9"></a><span id="l19.9"> </span>
<a href="#l19.10"></a><span id="l19.10">     // This causes the app to ask if the window should be closed when the</span>
<a href="#l19.11"></a><span id="l19.11">     // application is closed.</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-    Services.obs.addObserver(eventDialogQuitObserver,</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-                             &quot;quit-application-requested&quot;, false);</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineplus">+    Services.obs.addObserver(eventDialogQuitObserver, &quot;quit-application-requested&quot;);</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16">     // Normally, Enter closes a &lt;dialog&gt;. We want this to rather on Ctrl+Enter.</span>
<a href="#l19.17"></a><span id="l19.17">     // Stopping event propagation doesn't seem to work, so just overwrite the</span>
<a href="#l19.18"></a><span id="l19.18">     // function that does this.</span>
<a href="#l19.19"></a><span id="l19.19">     if (!gInTab) {</span>
<a href="#l19.20"></a><span id="l19.20">         document.documentElement._hitEnter = function() {};</span>
<a href="#l19.21"></a><span id="l19.21">     }</span>
<a href="#l19.22"></a><span id="l19.22"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/calendar/lightning/content/messenger-overlay-sidebar.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -394,17 +394,17 @@ function ltnOnLoad(event) {</span>
<a href="#l20.4"></a><span id="l20.4">     };</span>
<a href="#l20.5"></a><span id="l20.5">     toolbox = document.getElementById(&quot;task-toolbox&quot;);</span>
<a href="#l20.6"></a><span id="l20.6">     toolbox.customizeDone = function(aEvent) {</span>
<a href="#l20.7"></a><span id="l20.7">         MailToolboxCustomizeDone(aEvent, &quot;CustomizeTaskToolbar&quot;);</span>
<a href="#l20.8"></a><span id="l20.8">     };</span>
<a href="#l20.9"></a><span id="l20.9"> </span>
<a href="#l20.10"></a><span id="l20.10">     ltnIntegrationCheck();</span>
<a href="#l20.11"></a><span id="l20.11"> </span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-    Services.obs.notifyObservers(window, &quot;lightning-startup-done&quot;, false);</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+    Services.obs.notifyObservers(window, &quot;lightning-startup-done&quot;);</span>
<a href="#l20.14"></a><span id="l20.14"> }</span>
<a href="#l20.15"></a><span id="l20.15"> </span>
<a href="#l20.16"></a><span id="l20.16"> /**</span>
<a href="#l20.17"></a><span id="l20.17">  * Displays the Lightning integration notification bar</span>
<a href="#l20.18"></a><span id="l20.18">  */</span>
<a href="#l20.19"></a><span id="l20.19"> function ltnIntegrationNotification() {</span>
<a href="#l20.20"></a><span id="l20.20">     const kOptOut = &quot;mail.calendar-integration.opt-out&quot;; // default: false</span>
<a href="#l20.21"></a><span id="l20.21">     const kNotify = &quot;calendar.integration.notify&quot;; // default: true</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/calendar/lightning/content/suite-overlay-sidebar.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/calendar/lightning/content/suite-overlay-sidebar.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -2,19 +2,18 @@</span>
<a href="#l21.4"></a><span id="l21.4">  * License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l21.5"></a><span id="l21.5">  * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l21.6"></a><span id="l21.6"> </span>
<a href="#l21.7"></a><span id="l21.7"> Components.utils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l21.8"></a><span id="l21.8"> </span>
<a href="#l21.9"></a><span id="l21.9"> var ltnSuiteUtils = {</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">     addStartupObserver: function() {</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-        Services.obs.addObserver(this.startupObserver, &quot;lightning-startup-done&quot;, false);</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-        Services.obs.addObserver(this.startupObserver, &quot;calendar-taskview-startup-done&quot;,</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-                        false);</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineplus">+        Services.obs.addObserver(this.startupObserver, &quot;lightning-startup-done&quot;);</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineplus">+        Services.obs.addObserver(this.startupObserver, &quot;calendar-taskview-startup-done&quot;);</span>
<a href="#l21.17"></a><span id="l21.17">     },</span>
<a href="#l21.18"></a><span id="l21.18"> </span>
<a href="#l21.19"></a><span id="l21.19">     startupObserver: {</span>
<a href="#l21.20"></a><span id="l21.20">         observe: function(subject, topic, state) {</span>
<a href="#l21.21"></a><span id="l21.21">             if (topic != &quot;lightning-startup-done&quot; &amp;&amp;</span>
<a href="#l21.22"></a><span id="l21.22">                 topic != &quot;calendar-taskview-startup-done&quot;) {</span>
<a href="#l21.23"></a><span id="l21.23">                 return;</span>
<a href="#l21.24"></a><span id="l21.24">             }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/calendar/providers/storage/calStorageCalendar.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -353,17 +353,17 @@ calStorageCalendar.prototype = {</span>
<a href="#l22.4"></a><span id="l22.4"> </span>
<a href="#l22.5"></a><span id="l22.5">             this.mDB = Services.storage.openDatabase(localDB);</span>
<a href="#l22.6"></a><span id="l22.6">             upgradeDB(this.mDB);</span>
<a href="#l22.7"></a><span id="l22.7">         } else {</span>
<a href="#l22.8"></a><span id="l22.8">             throw new Components.Exception(&quot;Invalid Scheme &quot; + this.uri.spec);</span>
<a href="#l22.9"></a><span id="l22.9">         }</span>
<a href="#l22.10"></a><span id="l22.10"> </span>
<a href="#l22.11"></a><span id="l22.11">         this.initDB();</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-        Services.obs.addObserver(this, &quot;profile-before-change&quot;, false);</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+        Services.obs.addObserver(this, &quot;profile-before-change&quot;);</span>
<a href="#l22.14"></a><span id="l22.14">     },</span>
<a href="#l22.15"></a><span id="l22.15"> </span>
<a href="#l22.16"></a><span id="l22.16">     observe: function(aSubject, aTopic, aData) {</span>
<a href="#l22.17"></a><span id="l22.17">         if (aTopic == &quot;profile-before-change&quot;) {</span>
<a href="#l22.18"></a><span id="l22.18">             Services.obs.removeObserver(this, &quot;profile-before-change&quot;);</span>
<a href="#l22.19"></a><span id="l22.19">             this.shutdownDB();</span>
<a href="#l22.20"></a><span id="l22.20">         }</span>
<a href="#l22.21"></a><span id="l22.21">     },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapSession.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapSession.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -97,17 +97,17 @@ function getWcapSessionFor(calendar, uri</span>
<a href="#l23.4"></a><span id="l23.4"> }</span>
<a href="#l23.5"></a><span id="l23.5"> </span>
<a href="#l23.6"></a><span id="l23.6"> function calWcapSession(contextId) {</span>
<a href="#l23.7"></a><span id="l23.7">     this.wrappedJSObject = this;</span>
<a href="#l23.8"></a><span id="l23.8">     this.m_contextId = contextId;</span>
<a href="#l23.9"></a><span id="l23.9">     this.m_loginQueue = [];</span>
<a href="#l23.10"></a><span id="l23.10"> </span>
<a href="#l23.11"></a><span id="l23.11">     // listen for shutdown, being logged out:</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    Services.obs.addObserver(this, &quot;quit-application&quot;, false /* don't hold weakly */);</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+    Services.obs.addObserver(this, &quot;quit-application&quot;);</span>
<a href="#l23.14"></a><span id="l23.14">     cal.getCalendarManager().addObserver(this);</span>
<a href="#l23.15"></a><span id="l23.15"> }</span>
<a href="#l23.16"></a><span id="l23.16"> var calWcapSessionClassID = Components.ID(&quot;{cbf803fd-4469-4999-ae39-367af1c7b077}&quot;);</span>
<a href="#l23.17"></a><span id="l23.17"> var calWcapSessionInterfaces = [</span>
<a href="#l23.18"></a><span id="l23.18">     calIWcapSession,</span>
<a href="#l23.19"></a><span id="l23.19">     calIFreeBusyProvider,</span>
<a href="#l23.20"></a><span id="l23.20">     calICalendarSearchProvider,</span>
<a href="#l23.21"></a><span id="l23.21">     Components.interfaces.calITimezoneProvider,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/calendar/providers/wcap/calWcapUtils.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/calendar/providers/wcap/calWcapUtils.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -65,28 +65,28 @@ function initLogging() {</span>
<a href="#l24.4"></a><span id="l24.4">                         case &quot;calendar.wcap.log_file&quot;:</span>
<a href="#l24.5"></a><span id="l24.5">                         case &quot;calendar.debug.log&quot;:</span>
<a href="#l24.6"></a><span id="l24.6">                             initLogging();</span>
<a href="#l24.7"></a><span id="l24.7">                             break;</span>
<a href="#l24.8"></a><span id="l24.8">                     }</span>
<a href="#l24.9"></a><span id="l24.9">                 }</span>
<a href="#l24.10"></a><span id="l24.10">             }</span>
<a href="#l24.11"></a><span id="l24.11">         };</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-        Services.prefs.addObserver(&quot;calendar.wcap.log_level&quot;, initLogging.mLogPrefObserver, false);</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-        Services.prefs.addObserver(&quot;calendar.wcap.log_file&quot;, initLogging.mLogPrefObserver, false);</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-        Services.prefs.addObserver(&quot;calendar.debug.log&quot;, initLogging.mLogPrefObserver, false);</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineplus">+        Services.prefs.addObserver(&quot;calendar.wcap.log_level&quot;, initLogging.mLogPrefObserver);</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineplus">+        Services.prefs.addObserver(&quot;calendar.wcap.log_file&quot;, initLogging.mLogPrefObserver);</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+        Services.prefs.addObserver(&quot;calendar.debug.log&quot;, initLogging.mLogPrefObserver);</span>
<a href="#l24.18"></a><span id="l24.18"> </span>
<a href="#l24.19"></a><span id="l24.19">         let appObserver = { // nsIObserver:</span>
<a href="#l24.20"></a><span id="l24.20">             observe: function(subject, topic, data) {</span>
<a href="#l24.21"></a><span id="l24.21">                 if (topic == &quot;quit-application&quot;) {</span>
<a href="#l24.22"></a><span id="l24.22">                     Services.prefs.removeObserver(&quot;calendar.&quot;, initLogging.mLogPrefObserver);</span>
<a href="#l24.23"></a><span id="l24.23">                 }</span>
<a href="#l24.24"></a><span id="l24.24">             }</span>
<a href="#l24.25"></a><span id="l24.25">         };</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineminus">-        Services.obs.addObserver(appObserver, &quot;quit-application&quot;, false);</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineplus">+        Services.obs.addObserver(appObserver, &quot;quit-application&quot;);</span>
<a href="#l24.28"></a><span id="l24.28">     }</span>
<a href="#l24.29"></a><span id="l24.29"> }</span>
<a href="#l24.30"></a><span id="l24.30"> </span>
<a href="#l24.31"></a><span id="l24.31"> function log(msg, context, bForce) {</span>
<a href="#l24.32"></a><span id="l24.32">     if (bForce || LOG_LEVEL &gt; 0) {</span>
<a href="#l24.33"></a><span id="l24.33">         let ret = &quot;&quot;;</span>
<a href="#l24.34"></a><span id="l24.34">         if (context) {</span>
<a href="#l24.35"></a><span id="l24.35">             ret += &quot;[&quot; + context + &quot;]&quot;;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/calendar/test/unit/head_consts.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/calendar/test/unit/head_consts.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -237,16 +237,16 @@ function do_calendar_startup(callback) {</span>
<a href="#l25.4"></a><span id="l25.4"> </span>
<a href="#l25.5"></a><span id="l25.5">     let startupService = Components.classes[&quot;@mozilla.org/calendar/startup-service;1&quot;]</span>
<a href="#l25.6"></a><span id="l25.6">                                    .getService(Components.interfaces.nsISupports).wrappedJSObject;</span>
<a href="#l25.7"></a><span id="l25.7"> </span>
<a href="#l25.8"></a><span id="l25.8">     if (startupService.started) {</span>
<a href="#l25.9"></a><span id="l25.9">         callback();</span>
<a href="#l25.10"></a><span id="l25.10">     } else {</span>
<a href="#l25.11"></a><span id="l25.11">         do_test_pending();</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-        Services.obs.addObserver(obs, &quot;calendar-startup-done&quot;, false);</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+        Services.obs.addObserver(obs, &quot;calendar-startup-done&quot;);</span>
<a href="#l25.14"></a><span id="l25.14">         if (_profileInitialized) {</span>
<a href="#l25.15"></a><span id="l25.15">             Services.obs.notifyObservers(null, &quot;profile-after-change&quot;, &quot;xpcshell-do-get-profile&quot;);</span>
<a href="#l25.16"></a><span id="l25.16">         } else {</span>
<a href="#l25.17"></a><span id="l25.17">             do_get_profile(true);</span>
<a href="#l25.18"></a><span id="l25.18">         }</span>
<a href="#l25.19"></a><span id="l25.19">     }</span>
<a href="#l25.20"></a><span id="l25.20"> }</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

