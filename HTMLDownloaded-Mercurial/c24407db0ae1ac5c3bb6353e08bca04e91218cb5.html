<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 4210:c24407db0ae1ac5c3bb6353e08bca04e91218cb5</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c24407db0ae1ac5c3bb6353e08bca04e91218cb5" />
<meta property="og:url" content="/comm-central/rev/c24407db0ae1ac5c3bb6353e08bca04e91218cb5" />
<meta property="og:description" content="Bug 519215 - [faceted search] Can't get &quot;not involving&quot; filter criteria back into the search by clicking on them. Bypass jQuery and poke the labels' DOM nodes directly, because jQuery has problems with the XML namespace that we use for them. r=asuth, ui-r=pending, a=blocking-tb3+" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c24407db0ae1ac5c3bb6353e08bca04e91218cb5 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c24407db0ae1ac5c3bb6353e08bca04e91218cb5">shortlog</a> |
<a href="/comm-central/log/c24407db0ae1ac5c3bb6353e08bca04e91218cb5">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c24407db0ae1ac5c3bb6353e08bca04e91218cb5">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c24407db0ae1ac5c3bb6353e08bca04e91218cb5">files</a> |
changeset |
<a href="/comm-central/raw-rev/c24407db0ae1ac5c3bb6353e08bca04e91218cb5">raw</a>  | <a href="/comm-central/archive/c24407db0ae1ac5c3bb6353e08bca04e91218cb5.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=519215">Bug 519215</a> - [faceted search] Can't get &quot;not involving&quot; filter criteria back into the search by clicking on them. Bypass jQuery and poke the labels' DOM nodes directly, because jQuery has problems with the XML namespace that we use for them. r=asuth, ui-r=pending, a=blocking-tb3+
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#105;&#100;&#100;&#104;&#97;&#114;&#116;&#104;&#32;&#65;&#103;&#97;&#114;&#119;&#97;&#108;&#32;&#60;&#115;&#105;&#100;&#46;&#98;&#117;&#103;&#122;&#105;&#108;&#108;&#97;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 21 Oct 2009 20:30:28 +0530</td></tr>

<tr>
 <td>changeset 4210</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c24407db0ae1ac5c3bb6353e08bca04e91218cb5">c24407db0ae1ac5c3bb6353e08bca04e91218cb5</a></td>
</tr>



<tr>
<td>parent 4209</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/810cd547ef753c1f4c68838c6708c7f1f052340a">810cd547ef753c1f4c68838c6708c7f1f052340a</a>
</td>
</tr>

<tr>
<td>child 4211</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/83e8ff7342e8e960dbb13b1d9f19b4e671eb6fa8">83e8ff7342e8e960dbb13b1d9f19b4e671eb6fa8</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c24407db0ae1ac5c3bb6353e08bca04e91218cb5">3289</a></td></tr>
<tr><td>push user</td><td>sid.bugzilla@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Wed, 21 Oct 2009 15:00:54 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@c24407db0ae1 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&newProject=comm-central&newRevision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&newProject=comm-central&newRevision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&newProject=comm-central&newRevision=c24407db0ae1ac5c3bb6353e08bca04e91218cb5&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28asuth%29&revcount=50">asuth</a>, <a href="/comm-central/log?rev=reviewer%28pending%29&revcount=50">pending</a>, <a href="/comm-central/log?rev=reviewer%28blocking-tb3%29&revcount=50">blocking-tb3</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=519215">519215</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=519215">Bug 519215</a> - [faceted search] Can't get &quot;not involving&quot; filter criteria back into the search by clicking on them. Bypass jQuery and poke the labels' DOM nodes directly, because jQuery has problems with the XML namespace that we use for them. r=asuth, ui-r=pending, a=blocking-tb3+</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c24407db0ae1ac5c3bb6353e08bca04e91218cb5/mail/base/content/glodaFacetBindings.xml">mail/base/content/glodaFacetBindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c24407db0ae1ac5c3bb6353e08bca04e91218cb5/mail/base/content/glodaFacetBindings.xml">file</a> |
<a href="/comm-central/annotate/c24407db0ae1ac5c3bb6353e08bca04e91218cb5/mail/base/content/glodaFacetBindings.xml">annotate</a> |
<a href="/comm-central/diff/c24407db0ae1ac5c3bb6353e08bca04e91218cb5/mail/base/content/glodaFacetBindings.xml">diff</a> |
<a href="/comm-central/comparison/c24407db0ae1ac5c3bb6353e08bca04e91218cb5/mail/base/content/glodaFacetBindings.xml">comparison</a> |
<a href="/comm-central/log/c24407db0ae1ac5c3bb6353e08bca04e91218cb5/mail/base/content/glodaFacetBindings.xml">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/glodaFacetBindings.xml</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/glodaFacetBindings.xml</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -952,23 +952,29 @@</span>
<a href="#l1.4"></a><span id="l1.4">         }</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">         let remListVisible =</span>
<a href="#l1.7"></a><span id="l1.7">           this.remainderLabel.getAttribute(&quot;needed&quot;) == &quot;true&quot;;</span>
<a href="#l1.8"></a><span id="l1.8">         let remListShouldBeVisible =</span>
<a href="#l1.9"></a><span id="l1.9">           this.remainderList.childElementCount &gt; 1;</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">         labelNode.setAttribute(&quot;state&quot;, &quot;some&quot;);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineplus">+</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+        // We used to use jQuery here, but it turns out that it has issues with</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+        // XML namespaces and stringification, so we now resort to poking the</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+        // nodes directly.</span>
<a href="#l1.16"></a><span id="l1.16">         if (remListVisible != remListShouldBeVisible)</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineminus">-          showNodes = $([labelNode, this.remainderLabel]);</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+          showNodes = [labelNode, this.remainderLabel];</span>
<a href="#l1.19"></a><span id="l1.19">         else</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineminus">-          showNodes = $(labelNode);</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineminus">-        showNodes</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineminus">-          .hide()</span>
<a href="#l1.23"></a><span id="l1.23" class="difflineminus">-          .slideDown(&quot;fast&quot;, aCallback);</span>
<a href="#l1.24"></a><span id="l1.24" class="difflineplus">+          showNodes = [labelNode];</span>
<a href="#l1.25"></a><span id="l1.25" class="difflineplus">+</span>
<a href="#l1.26"></a><span id="l1.26" class="difflineplus">+        for each (let [, node] in Iterator(showNodes))</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineplus">+          node.style.display = &quot;block&quot;;</span>
<a href="#l1.28"></a><span id="l1.28" class="difflineplus">+</span>
<a href="#l1.29"></a><span id="l1.29" class="difflineplus">+        aCallback();</span>
<a href="#l1.30"></a><span id="l1.30">       ]]&gt;&lt;/body&gt;</span>
<a href="#l1.31"></a><span id="l1.31">     &lt;/method&gt;</span>
<a href="#l1.32"></a><span id="l1.32">     &lt;method name=&quot;_flyBarAway&quot;&gt;</span>
<a href="#l1.33"></a><span id="l1.33">       &lt;parameter name=&quot;aBarNode&quot; /&gt;</span>
<a href="#l1.34"></a><span id="l1.34">       &lt;parameter name=&quot;aVariety&quot; /&gt;</span>
<a href="#l1.35"></a><span id="l1.35">       &lt;parameter name=&quot;aCallback&quot; /&gt;</span>
<a href="#l1.36"></a><span id="l1.36">       &lt;body&gt;&lt;![CDATA[</span>
<a href="#l1.37"></a><span id="l1.37">         // figure out our origin location prior to adding the target or it</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

