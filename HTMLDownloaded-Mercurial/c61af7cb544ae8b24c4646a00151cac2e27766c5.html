<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 17892:c61af7cb544ae8b24c4646a00151cac2e27766c5</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ c61af7cb544ae8b24c4646a00151cac2e27766c5" />
<meta property="og:url" content="/comm-central/rev/c61af7cb544ae8b24c4646a00151cac2e27766c5" />
<meta property="og:description" content="Bug 1110166 - Port bug 1102219 - Rename String.prototype.contains to String.prototype.includes: mail. r=mkmelin" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / c61af7cb544ae8b24c4646a00151cac2e27766c5 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/c61af7cb544ae8b24c4646a00151cac2e27766c5">shortlog</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/c61af7cb544ae8b24c4646a00151cac2e27766c5">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5">files</a> |
changeset |
<a href="/comm-central/raw-rev/c61af7cb544ae8b24c4646a00151cac2e27766c5">raw</a>  | <a href="/comm-central/archive/c61af7cb544ae8b24c4646a00151cac2e27766c5.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1110166">Bug 1110166</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1102219">bug 1102219</a> - Rename String.prototype.contains to String.prototype.includes: mail. r=mkmelin
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#83;&#101;&#98;&#97;&#115;&#116;&#105;&#97;&#110;&#32;&#72;&#101;&#110;&#103;&#115;&#116;&#32;&#60;&#97;&#114;&#99;&#104;&#97;&#101;&#111;&#112;&#116;&#101;&#114;&#121;&#120;&#64;&#99;&#111;&#111;&#108;&#101;&#45;&#102;&#105;&#108;&#101;&#115;&#46;&#100;&#101;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 01 May 2015 21:56:08 +0200</td></tr>

<tr>
 <td>changeset 17892</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/c61af7cb544ae8b24c4646a00151cac2e27766c5">c61af7cb544ae8b24c4646a00151cac2e27766c5</a></td>
</tr>



<tr>
<td>parent 17891</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/6edc706e70ca2e91345fae4e90ac3d5c43cacfe4">6edc706e70ca2e91345fae4e90ac3d5c43cacfe4</a>
</td>
</tr>

<tr>
<td>child 17893</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1cf79e3da57ab8d9b835e5d9201210eb984563ac">1cf79e3da57ab8d9b835e5d9201210eb984563ac</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=c61af7cb544ae8b24c4646a00151cac2e27766c5">10995</a></td></tr>
<tr><td>push user</td><td>archaeopteryx@coole-files.de</td></tr>
<tr><td>push date</td><td class="date age">Fri, 01 May 2015 20:21:44 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@1f6cefb73596 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=1f6cefb73596947b175691ec0baeb239fdba6f52">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=1f6cefb73596947b175691ec0baeb239fdba6f52&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1f6cefb73596947b175691ec0baeb239fdba6f52&newProject=comm-central&newRevision=037c8b33c0fa61af697383f063bf35a22bed65a7&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1f6cefb73596947b175691ec0baeb239fdba6f52&newProject=comm-central&newRevision=037c8b33c0fa61af697383f063bf35a22bed65a7&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=1f6cefb73596947b175691ec0baeb239fdba6f52&newProject=comm-central&newRevision=037c8b33c0fa61af697383f063bf35a22bed65a7&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28mkmelin%29&revcount=50">mkmelin</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1110166">1110166</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1102219">1102219</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1110166">Bug 1110166</a> - Port <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1102219">bug 1102219</a> - Rename String.prototype.contains to String.prototype.includes: mail. r=mkmelin</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/FilterListDialog.js">mail/base/content/FilterListDialog.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/FilterListDialog.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/FilterListDialog.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/FilterListDialog.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/FilterListDialog.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/FilterListDialog.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetBindings.xml">mail/base/content/glodaFacetBindings.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetBindings.xml">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetBindings.xml">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetBindings.xml">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetBindings.xml">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetBindings.xml">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetView.js">mail/base/content/glodaFacetView.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetView.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetView.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetView.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetView.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/glodaFacetView.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailCommands.js">mail/base/content/mailCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailCommands.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailCommands.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailCommands.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailCommands.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailCommands.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailWindowOverlay.js">mail/base/content/mailWindowOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailWindowOverlay.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailWindowOverlay.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailWindowOverlay.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailWindowOverlay.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/mailWindowOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/msgHdrViewOverlay.js">mail/base/content/msgHdrViewOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/msgHdrViewOverlay.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/msgHdrViewOverlay.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/msgHdrViewOverlay.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/msgHdrViewOverlay.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/msgHdrViewOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/utilityOverlay.js">mail/base/content/utilityOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/utilityOverlay.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/utilityOverlay.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/utilityOverlay.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/utilityOverlay.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/content/utilityOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/modules/mailInstrumentation.js">mail/base/modules/mailInstrumentation.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/modules/mailInstrumentation.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/modules/mailInstrumentation.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/modules/mailInstrumentation.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/modules/mailInstrumentation.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/modules/mailInstrumentation.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js">mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/addrbook/content/abCardOverlay.js">mail/components/addrbook/content/abCardOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/addrbook/content/abCardOverlay.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/addrbook/content/abCardOverlay.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/addrbook/content/abCardOverlay.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/addrbook/content/abCardOverlay.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/addrbook/content/abCardOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/MsgComposeCommands.js">mail/components/compose/content/MsgComposeCommands.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/MsgComposeCommands.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/MsgComposeCommands.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/MsgComposeCommands.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/MsgComposeCommands.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/MsgComposeCommands.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/addressingWidgetOverlay.js">mail/components/compose/content/addressingWidgetOverlay.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/addressingWidgetOverlay.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/addressingWidgetOverlay.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/addressingWidgetOverlay.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/addressingWidgetOverlay.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/compose/content/addressingWidgetOverlay.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/im/content/imconversation.xml">mail/components/im/content/imconversation.xml</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/im/content/imconversation.xml">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/im/content/imconversation.xml">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/im/content/imconversation.xml">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/im/content/imconversation.xml">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/im/content/imconversation.xml">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/applications.js">mail/components/preferences/applications.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/applications.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/applications.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/applications.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/applications.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/applications.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/cookies.js">mail/components/preferences/cookies.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/cookies.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/cookies.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/cookies.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/cookies.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/cookies.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/general.js">mail/components/preferences/general.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/general.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/general.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/general.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/general.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/general.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/permissions.js">mail/components/preferences/permissions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/permissions.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/permissions.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/permissions.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/permissions.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/preferences/permissions.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/test/unit/test_about_support.js">mail/components/test/unit/test_about_support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/test/unit/test_about_support.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/test/unit/test_about_support.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/test/unit/test_about_support.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/test/unit/test_about_support.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/components/test/unit/test_about_support.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/attachment/test-attachment-events.js">mail/test/mozmill/attachment/test-attachment-events.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/attachment/test-attachment-events.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/attachment/test-attachment-events.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/attachment/test-attachment-events.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/attachment/test-attachment-events.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/attachment/test-attachment-events.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-edit.js">mail/test/mozmill/composition/test-charset-edit.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-edit.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-edit.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-edit.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-edit.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-edit.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-upgrade.js">mail/test/mozmill/composition/test-charset-upgrade.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-upgrade.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-upgrade.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-upgrade.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-upgrade.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-charset-upgrade.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-eml-actions.js">mail/test/mozmill/composition/test-eml-actions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-eml-actions.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-eml-actions.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-eml-actions.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-eml-actions.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-eml-actions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-content.js">mail/test/mozmill/composition/test-forwarded-content.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-content.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-content.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-content.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-content.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-content.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-eml-actions.js">mail/test/mozmill/composition/test-forwarded-eml-actions.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-eml-actions.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-eml-actions.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-eml-actions.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-eml-actions.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-forwarded-eml-actions.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-multipart-related.js">mail/test/mozmill/composition/test-multipart-related.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-multipart-related.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-multipart-related.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-multipart-related.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-multipart-related.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-multipart-related.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-reply-signature.js">mail/test/mozmill/composition/test-reply-signature.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-reply-signature.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-reply-signature.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-reply-signature.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-reply-signature.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/composition/test-reply-signature.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-policy/test-view-source.js">mail/test/mozmill/content-policy/test-view-source.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-policy/test-view-source.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-policy/test-view-source.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-policy/test-view-source.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-policy/test-view-source.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-policy/test-view-source.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-about-support.js">mail/test/mozmill/content-tabs/test-about-support.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-about-support.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-about-support.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-about-support.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-about-support.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-about-support.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-plugin-crashing.js">mail/test/mozmill/content-tabs/test-plugin-crashing.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-plugin-crashing.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-plugin-crashing.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-plugin-crashing.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-plugin-crashing.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/content-tabs/test-plugin-crashing.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-message-header.js">mail/test/mozmill/message-header/test-message-header.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-message-header.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-message-header.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-message-header.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-message-header.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-message-header.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-identity.js">mail/test/mozmill/message-header/test-reply-identity.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-identity.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-identity.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-identity.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-identity.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-identity.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-return-receipt.js">mail/test/mozmill/message-header/test-return-receipt.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-return-receipt.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-return-receipt.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-return-receipt.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-return-receipt.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/message-header/test-return-receipt.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js">mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/newmailaccount/test-newmailaccount.js">mail/test/mozmill/newmailaccount/test-newmailaccount.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/newmailaccount/test-newmailaccount.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/newmailaccount/test-newmailaccount.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/newmailaccount/test-newmailaccount.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/newmailaccount/test-newmailaccount.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/newmailaccount/test-newmailaccount.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/notification/test-notification.js">mail/test/mozmill/notification/test-notification.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/notification/test-notification.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/notification/test-notification.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/notification/test-notification.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/notification/test-notification.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/notification/test-notification.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">mail/test/mozmill/shared-modules/test-content-tab-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-content-tab-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">mail/test/mozmill/shared-modules/test-folder-display-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-folder-display-helpers.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">file</a> |
<a href="/comm-central/annotate/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">annotate</a> |
<a href="/comm-central/diff/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">diff</a> |
<a href="/comm-central/comparison/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">comparison</a> |
<a href="/comm-central/log/c61af7cb544ae8b24c4646a00151cac2e27766c5/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/base/content/FilterListDialog.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/base/content/FilterListDialog.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -875,17 +875,17 @@ function getFirstFolder(msgFolder)</span>
<a href="#l1.4"></a><span id="l1.4">  * @param  aKeyword  the string to find in the filter name</span>
<a href="#l1.5"></a><span id="l1.5">  *</span>
<a href="#l1.6"></a><span id="l1.6">  * @return  True if the filter name contains the searched keyword.</span>
<a href="#l1.7"></a><span id="l1.7">             Otherwise false. In the future this may be extended to match</span>
<a href="#l1.8"></a><span id="l1.8">             other filter attributes.</span>
<a href="#l1.9"></a><span id="l1.9">  */</span>
<a href="#l1.10"></a><span id="l1.10"> function filterSearchMatch(aFilter, aKeyword)</span>
<a href="#l1.11"></a><span id="l1.11"> {</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  return (aFilter.filterName.toLocaleLowerCase().contains(aKeyword))</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  return (aFilter.filterName.toLocaleLowerCase().includes(aKeyword))</span>
<a href="#l1.14"></a><span id="l1.14"> }</span>
<a href="#l1.15"></a><span id="l1.15"> </span>
<a href="#l1.16"></a><span id="l1.16"> /**</span>
<a href="#l1.17"></a><span id="l1.17">  * Called from rebuildFilterList when the list needs to be redrawn.</span>
<a href="#l1.18"></a><span id="l1.18">  * @return  Uses the search term in search box, to produce an array of</span>
<a href="#l1.19"></a><span id="l1.19">  *          row (filter) numbers (indexes) that match the search term.</span>
<a href="#l1.20"></a><span id="l1.20">  */</span>
<a href="#l1.21"></a><span id="l1.21"> function onFindFilter()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/base/content/glodaFacetBindings.xml</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/base/content/glodaFacetBindings.xml</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -490,17 +490,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">       &lt;parameter name=&quot;stringName&quot;/&gt;</span>
<a href="#l2.5"></a><span id="l2.5">       &lt;body&gt;&lt;![CDATA[</span>
<a href="#l2.6"></a><span id="l2.6">         let label, labelFormat;</span>
<a href="#l2.7"></a><span id="l2.7">         if (stringName in facetDef.strings)</span>
<a href="#l2.8"></a><span id="l2.8">           labelFormat = facetDef.strings[stringName];</span>
<a href="#l2.9"></a><span id="l2.9">         else</span>
<a href="#l2.10"></a><span id="l2.10">           labelFormat = glodaFacetStrings.get(</span>
<a href="#l2.11"></a><span id="l2.11">               &quot;glodaFacetView.facets.&quot;+stringName+&quot;.fallbackLabel&quot;);</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-        if (!labelFormat.contains(&quot;#1&quot;))</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineplus">+        if (!labelFormat.includes(&quot;#1&quot;))</span>
<a href="#l2.14"></a><span id="l2.14">           return labelFormat;</span>
<a href="#l2.15"></a><span id="l2.15">         else</span>
<a href="#l2.16"></a><span id="l2.16">           return labelFormat.replace(&quot;#1&quot;, facetValue);</span>
<a href="#l2.17"></a><span id="l2.17">       ]]&gt;&lt;/body&gt;</span>
<a href="#l2.18"></a><span id="l2.18">     &lt;/method&gt;</span>
<a href="#l2.19"></a><span id="l2.19">     &lt;method name=&quot;build&quot;&gt;</span>
<a href="#l2.20"></a><span id="l2.20">       &lt;parameter name=&quot;facetDef&quot;/&gt;</span>
<a href="#l2.21"></a><span id="l2.21">       &lt;parameter name=&quot;facetValue&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/base/content/glodaFacetView.js</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/base/content/glodaFacetView.js</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -457,17 +457,17 @@ var FacetContext = {</span>
<a href="#l3.4"></a><span id="l3.4">           explicitBinding.explicit = true;</span>
<a href="#l3.5"></a><span id="l3.5">           explicitBinding.faceter = faceter;</span>
<a href="#l3.6"></a><span id="l3.6">           explicitBinding.attrDef = faceter.attrDef;</span>
<a href="#l3.7"></a><span id="l3.7">           explicitBinding.facetDef = faceter.facetDef;</span>
<a href="#l3.8"></a><span id="l3.8">           explicitBinding.nounDef = faceter.attrDef.objectNounDef;</span>
<a href="#l3.9"></a><span id="l3.9">           explicitBinding.orderedGroups = faceter.orderedGroups;</span>
<a href="#l3.10"></a><span id="l3.10">           // explicit booleans should always be displayed for consistency</span>
<a href="#l3.11"></a><span id="l3.11">           if (faceter.groupCount &gt;= 1 ||</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-              (explicitBinding.getAttribute(&quot;type&quot;).contains(&quot;boolean&quot;))) {</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineplus">+              (explicitBinding.getAttribute(&quot;type&quot;).includes(&quot;boolean&quot;))) {</span>
<a href="#l3.14"></a><span id="l3.14">             try {</span>
<a href="#l3.15"></a><span id="l3.15">               explicitBinding.build(true);</span>
<a href="#l3.16"></a><span id="l3.16">             } catch (e) {</span>
<a href="#l3.17"></a><span id="l3.17">               logObject(explicitBinding);</span>
<a href="#l3.18"></a><span id="l3.18">               logException(e);</span>
<a href="#l3.19"></a><span id="l3.19">             }</span>
<a href="#l3.20"></a><span id="l3.20">             explicitBinding.removeAttribute(&quot;uninitialized&quot;);</span>
<a href="#l3.21"></a><span id="l3.21">           }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1" class="difflineminus">--- a/mail/base/content/mailCommands.js</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineplus">+++ b/mail/base/content/mailCommands.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineat">@@ -25,17 +25,17 @@ function getBestIdentity(identities, opt</span>
<a href="#l4.4"></a><span id="l4.4">     let hints = optionalHint.toLowerCase().split(&quot;,&quot;);</span>
<a href="#l4.5"></a><span id="l4.5"> </span>
<a href="#l4.6"></a><span id="l4.6">     for (let i = 0 ; i &lt; hints.length; i++) {</span>
<a href="#l4.7"></a><span id="l4.7">       for (let identity in fixIterator(identities,</span>
<a href="#l4.8"></a><span id="l4.8">                                        Components.interfaces.nsIMsgIdentity)) {</span>
<a href="#l4.9"></a><span id="l4.9">         if (!identity.email)</span>
<a href="#l4.10"></a><span id="l4.10">           continue;</span>
<a href="#l4.11"></a><span id="l4.11">         if (hints[i].trim() == identity.email.toLowerCase() ||</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-            hints[i].contains(&quot;&lt;&quot; + identity.email.toLowerCase() + &quot;&gt;&quot;))</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineplus">+            hints[i].includes(&quot;&lt;&quot; + identity.email.toLowerCase() + &quot;&gt;&quot;))</span>
<a href="#l4.14"></a><span id="l4.14">           return identity;</span>
<a href="#l4.15"></a><span id="l4.15">       }</span>
<a href="#l4.16"></a><span id="l4.16">     }</span>
<a href="#l4.17"></a><span id="l4.17">   }</span>
<a href="#l4.18"></a><span id="l4.18"> </span>
<a href="#l4.19"></a><span id="l4.19">   // Still no matches? Give up and pick the first one.</span>
<a href="#l4.20"></a><span id="l4.20">   return identities.queryElementAt(0, Components.interfaces.nsIMsgIdentity);</span>
<a href="#l4.21"></a><span id="l4.21"> }</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineat">@@ -75,17 +75,17 @@ function getIdentityForHeader(hdr, type)</span>
<a href="#l4.23"></a><span id="l4.23"> </span>
<a href="#l4.24"></a><span id="l4.24">     for (let i = 0; i &lt; deliveredTos.length; i++) {</span>
<a href="#l4.25"></a><span id="l4.25">       for (let identity in fixIterator(accountManager.allIdentities,</span>
<a href="#l4.26"></a><span id="l4.26">                                        Components.interfaces.nsIMsgIdentity)) {</span>
<a href="#l4.27"></a><span id="l4.27">         if (!identity.email)</span>
<a href="#l4.28"></a><span id="l4.28">           continue;</span>
<a href="#l4.29"></a><span id="l4.29">         // If the deliver-to header contains the defined identity, that's it.</span>
<a href="#l4.30"></a><span id="l4.30">         if (deliveredTos[i] == identity.email.toLowerCase() ||</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-            deliveredTos[i].contains(&quot;&lt;&quot; + identity.email.toLowerCase() + &quot;&gt;&quot;))</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineplus">+            deliveredTos[i].includes(&quot;&lt;&quot; + identity.email.toLowerCase() + &quot;&gt;&quot;))</span>
<a href="#l4.33"></a><span id="l4.33">           return identity.email;</span>
<a href="#l4.34"></a><span id="l4.34">       }</span>
<a href="#l4.35"></a><span id="l4.35">     }</span>
<a href="#l4.36"></a><span id="l4.36">     return &quot;&quot;;</span>
<a href="#l4.37"></a><span id="l4.37">   }</span>
<a href="#l4.38"></a><span id="l4.38"> </span>
<a href="#l4.39"></a><span id="l4.39">   let server = null;</span>
<a href="#l4.40"></a><span id="l4.40">   let identity = null;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1" class="difflineminus">--- a/mail/base/content/mailWindowOverlay.js</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineplus">+++ b/mail/base/content/mailWindowOverlay.js</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineat">@@ -951,18 +951,18 @@ function InitMessageTags(menuPopup)</span>
<a href="#l5.4"></a><span id="l5.4">   var msgHdr = gFolderDisplay.selectedMessage;</span>
<a href="#l5.5"></a><span id="l5.5">   var curKeys = msgHdr.getStringProperty(&quot;keywords&quot;);</span>
<a href="#l5.6"></a><span id="l5.6">   if (msgHdr.label)</span>
<a href="#l5.7"></a><span id="l5.7">     curKeys += &quot; $label&quot; + msgHdr.label;</span>
<a href="#l5.8"></a><span id="l5.8"> </span>
<a href="#l5.9"></a><span id="l5.9">   for (var i = 0; i &lt; tagCount; ++i)</span>
<a href="#l5.10"></a><span id="l5.10">   {</span>
<a href="#l5.11"></a><span id="l5.11">     var taginfo = tagArray[i];</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-    let removeKey = (&quot; &quot; + curKeys + &quot; &quot;).contains(&quot; &quot; + taginfo.key + &quot; &quot;);</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-    if (taginfo.ordinal.contains(&quot;~AUTOTAG&quot;) &amp;&amp; !removeKey)</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineplus">+    let removeKey = (&quot; &quot; + curKeys + &quot; &quot;).includes(&quot; &quot; + taginfo.key + &quot; &quot;);</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineplus">+    if (taginfo.ordinal.includes(&quot;~AUTOTAG&quot;) &amp;&amp; !removeKey)</span>
<a href="#l5.16"></a><span id="l5.16">       continue;</span>
<a href="#l5.17"></a><span id="l5.17"> </span>
<a href="#l5.18"></a><span id="l5.18">     // TODO we want to either remove or &quot;check&quot; the tags that already exist</span>
<a href="#l5.19"></a><span id="l5.19">     var newMenuItem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l5.20"></a><span id="l5.20">     SetMessageTagLabel(newMenuItem, i + 1, taginfo.tag);</span>
<a href="#l5.21"></a><span id="l5.21">     newMenuItem.setAttribute(&quot;value&quot;, taginfo.key);</span>
<a href="#l5.22"></a><span id="l5.22">     newMenuItem.setAttribute(&quot;type&quot;, &quot;checkbox&quot;);</span>
<a href="#l5.23"></a><span id="l5.23">     newMenuItem.setAttribute('checked', removeKey);</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineat">@@ -1183,33 +1183,33 @@ function IsReplyAllEnabled()</span>
<a href="#l5.25"></a><span id="l5.25">   // If we've got any BCCed addresses (because we sent the message), add</span>
<a href="#l5.26"></a><span id="l5.26">   // them as well.</span>
<a href="#l5.27"></a><span id="l5.27">   if (&quot;bcc&quot; in currentHeaderData)</span>
<a href="#l5.28"></a><span id="l5.28">     addresses += currentHeaderData.bcc.headerValue;</span>
<a href="#l5.29"></a><span id="l5.29"> </span>
<a href="#l5.30"></a><span id="l5.30">   // Check to see if my email address is in the list of addresses.</span>
<a href="#l5.31"></a><span id="l5.31">   let myEmail = getIdentityForHeader(msgHdr).email;</span>
<a href="#l5.32"></a><span id="l5.32">   // We aren't guaranteed to have an email address, so guard against that.</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-  let imInAddresses = myEmail &amp;&amp; (addresses.toLowerCase().contains(</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineplus">+  let imInAddresses = myEmail &amp;&amp; (addresses.toLowerCase().includes(</span>
<a href="#l5.35"></a><span id="l5.35">                                     myEmail.toLowerCase()));</span>
<a href="#l5.36"></a><span id="l5.36"> </span>
<a href="#l5.37"></a><span id="l5.37">   // Now, let's get the number of unique addresses.</span>
<a href="#l5.38"></a><span id="l5.38">   let uniqueAddresses = MailServices.headerParser.removeDuplicateAddresses(addresses, &quot;&quot;);</span>
<a href="#l5.39"></a><span id="l5.39">   let emailAddresses = {};</span>
<a href="#l5.40"></a><span id="l5.40">   let numAddresses = MailServices.headerParser.parseHeadersWithArray(uniqueAddresses,</span>
<a href="#l5.41"></a><span id="l5.41">                                                                      emailAddresses, {}, {});</span>
<a href="#l5.42"></a><span id="l5.42"> </span>
<a href="#l5.43"></a><span id="l5.43">   // XXX: This should be handled by the nsIMsgHeaderParser.  See Bug 498480.</span>
<a href="#l5.44"></a><span id="l5.44">   // Remove addresses that look like email groups, because we don't support</span>
<a href="#l5.45"></a><span id="l5.45">   // those yet.  (Any address with a : in it will be an empty email group,</span>
<a href="#l5.46"></a><span id="l5.46">   // or the colon and the groupname would be set as the first name, and not</span>
<a href="#l5.47"></a><span id="l5.47">   // show up in the address at all.)</span>
<a href="#l5.48"></a><span id="l5.48">   for (var i in emailAddresses.value)</span>
<a href="#l5.49"></a><span id="l5.49">   {</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-    if (emailAddresses.value[i].contains(&quot;:&quot;))</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineplus">+    if (emailAddresses.value[i].includes(&quot;:&quot;))</span>
<a href="#l5.52"></a><span id="l5.52">       numAddresses--;</span>
<a href="#l5.53"></a><span id="l5.53">   }</span>
<a href="#l5.54"></a><span id="l5.54"> </span>
<a href="#l5.55"></a><span id="l5.55">   // I don't want to count my address in the number of addresses to reply</span>
<a href="#l5.56"></a><span id="l5.56">   // to, since I won't be emailing myself.</span>
<a href="#l5.57"></a><span id="l5.57">   if (imInAddresses)</span>
<a href="#l5.58"></a><span id="l5.58">     numAddresses--;</span>
<a href="#l5.59"></a><span id="l5.59"> </span>
<a href="#l5.60"></a><span id="l5.60" class="difflineat">@@ -3174,17 +3174,17 @@ function onRemoteContentOptionsShowing(a</span>
<a href="#l5.61"></a><span id="l5.61">   for (let i = childNodes.length - 1; i &gt;= 0; i--) {</span>
<a href="#l5.62"></a><span id="l5.62">     if (childNodes[i].getAttribute(&quot;class&quot;) == &quot;allow-remote-uri&quot;)</span>
<a href="#l5.63"></a><span id="l5.63">       childNodes[i].remove();</span>
<a href="#l5.64"></a><span id="l5.64">   }</span>
<a href="#l5.65"></a><span id="l5.65"> </span>
<a href="#l5.66"></a><span id="l5.66">   // ... and in with the new.</span>
<a href="#l5.67"></a><span id="l5.67">   for (let host of hosts) {</span>
<a href="#l5.68"></a><span id="l5.68">     let uri = Services.io.newURI(</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-      host.contains(&quot;@&quot;) ? &quot;mailto:&quot; + host : &quot;http://&quot; + host, null, null);</span>
<a href="#l5.70"></a><span id="l5.70" class="difflineplus">+      host.includes(&quot;@&quot;) ? &quot;mailto:&quot; + host : &quot;http://&quot; + host, null, null);</span>
<a href="#l5.71"></a><span id="l5.71"> </span>
<a href="#l5.72"></a><span id="l5.72">     let menuitem = document.createElement(&quot;menuitem&quot;);</span>
<a href="#l5.73"></a><span id="l5.73">     menuitem.setAttribute(&quot;label&quot;,</span>
<a href="#l5.74"></a><span id="l5.74">       messengerBundle.getFormattedString(&quot;remoteAllow&quot;, [host]));</span>
<a href="#l5.75"></a><span id="l5.75">     menuitem.setAttribute(&quot;value&quot;, uri.spec);</span>
<a href="#l5.76"></a><span id="l5.76">     menuitem.setAttribute(&quot;class&quot;, &quot;allow-remote-uri&quot;);</span>
<a href="#l5.77"></a><span id="l5.77">     menuitem.setAttribute(&quot;oncommand&quot;, &quot;allowRemoteContentForURI(this.value);&quot;);</span>
<a href="#l5.78"></a><span id="l5.78">     aEvent.target.appendChild(menuitem);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1" class="difflineminus">--- a/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineplus">+++ b/mail/base/content/msgHdrViewOverlay.js</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineat">@@ -534,17 +534,17 @@ var messageHeaderSink = {</span>
<a href="#l6.4"></a><span id="l6.4"> </span>
<a href="#l6.5"></a><span id="l6.5">       if ((&quot;from&quot; in currentHeaderData) &amp;&amp; (&quot;sender&quot; in currentHeaderData)) {</span>
<a href="#l6.6"></a><span id="l6.6">         var senderMailbox = kMailboxSeparator +</span>
<a href="#l6.7"></a><span id="l6.7">           MailServices.headerParser.extractHeaderAddressMailboxes(</span>
<a href="#l6.8"></a><span id="l6.8">             currentHeaderData.sender.headerValue) + kMailboxSeparator;</span>
<a href="#l6.9"></a><span id="l6.9">         var fromMailboxes = kMailboxSeparator +</span>
<a href="#l6.10"></a><span id="l6.10">           MailServices.headerParser.extractHeaderAddressMailboxes(</span>
<a href="#l6.11"></a><span id="l6.11">             currentHeaderData.from.headerValue) + kMailboxSeparator;</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-        if (fromMailboxes.contains(senderMailbox))</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineplus">+        if (fromMailboxes.includes(senderMailbox))</span>
<a href="#l6.14"></a><span id="l6.14">           delete currentHeaderData.sender;</span>
<a href="#l6.15"></a><span id="l6.15">       }</span>
<a href="#l6.16"></a><span id="l6.16"> </span>
<a href="#l6.17"></a><span id="l6.17">       // We don't need to show the reply-to header if its value is either</span>
<a href="#l6.18"></a><span id="l6.18">       // the From field (totally pointless) or the To field (common for</span>
<a href="#l6.19"></a><span id="l6.19">       // mailing lists, but not that useful).</span>
<a href="#l6.20"></a><span id="l6.20">       if ((&quot;from&quot; in currentHeaderData) &amp;&amp;</span>
<a href="#l6.21"></a><span id="l6.21">           (&quot;to&quot; in currentHeaderData) &amp;&amp;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1" class="difflineminus">--- a/mail/base/content/utilityOverlay.js</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineplus">+++ b/mail/base/content/utilityOverlay.js</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineat">@@ -113,24 +113,24 @@ function GenerateValidFilename(filename,</span>
<a href="#l7.4"></a><span id="l7.4">       return filename + extension;</span>
<a href="#l7.5"></a><span id="l7.5">   }</span>
<a href="#l7.6"></a><span id="l7.6">   return null;</span>
<a href="#l7.7"></a><span id="l7.7"> }</span>
<a href="#l7.8"></a><span id="l7.8"> </span>
<a href="#l7.9"></a><span id="l7.9"> function validateFileName(aFileName)</span>
<a href="#l7.10"></a><span id="l7.10"> {</span>
<a href="#l7.11"></a><span id="l7.11">   var re = /[\/]+/g;</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-  if (navigator.appVersion.contains(&quot;Windows&quot;)) {</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineplus">+  if (navigator.appVersion.includes(&quot;Windows&quot;)) {</span>
<a href="#l7.14"></a><span id="l7.14">     re = /[\\\/\|]+/g;</span>
<a href="#l7.15"></a><span id="l7.15">     aFileName = aFileName.replace(/[\&quot;]+/g, &quot;'&quot;);</span>
<a href="#l7.16"></a><span id="l7.16">     aFileName = aFileName.replace(/[\*\:\?]+/g, &quot; &quot;);</span>
<a href="#l7.17"></a><span id="l7.17">     aFileName = aFileName.replace(/[\&lt;]+/g, &quot;(&quot;);</span>
<a href="#l7.18"></a><span id="l7.18">     aFileName = aFileName.replace(/[\&gt;]+/g, &quot;)&quot;);</span>
<a href="#l7.19"></a><span id="l7.19">   }</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-  else if (navigator.appVersion.contains(&quot;Macintosh&quot;))</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineplus">+  else if (navigator.appVersion.includes(&quot;Macintosh&quot;))</span>
<a href="#l7.22"></a><span id="l7.22">     re = /[\:\/]+/g;</span>
<a href="#l7.23"></a><span id="l7.23"> </span>
<a href="#l7.24"></a><span id="l7.24">   if (Services.prefs.getBoolPref(&quot;mail.save_msg_filename_underscores_for_space&quot;))</span>
<a href="#l7.25"></a><span id="l7.25">     aFileName = aFileName.replace(/ /g, &quot;_&quot;);</span>
<a href="#l7.26"></a><span id="l7.26"> </span>
<a href="#l7.27"></a><span id="l7.27">   return aFileName.replace(re, &quot;_&quot;);</span>
<a href="#l7.28"></a><span id="l7.28"> }</span>
<a href="#l7.29"></a><span id="l7.29"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1" class="difflineminus">--- a/mail/base/modules/mailInstrumentation.js</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineplus">+++ b/mail/base/modules/mailInstrumentation.js</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineat">@@ -49,17 +49,17 @@ var mailInstrumentationManager =</span>
<a href="#l8.4"></a><span id="l8.4">   msgAdded: function (aMsg) {</span>
<a href="#l8.5"></a><span id="l8.5">     MailServices.mfn.removeListener(this);</span>
<a href="#l8.6"></a><span id="l8.6">     this._mfnListener = false;</span>
<a href="#l8.7"></a><span id="l8.7">     mailInstrumentationManager.addEvent(&quot;msgDownloaded&quot;, true);</span>
<a href="#l8.8"></a><span id="l8.8">   },</span>
<a href="#l8.9"></a><span id="l8.9"> </span>
<a href="#l8.10"></a><span id="l8.10">   _accountsChanged: function() {</span>
<a href="#l8.11"></a><span id="l8.11">     // check if there are at least two accounts - one is local folders account</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-    if (Services.prefs.getCharPref(&quot;mail.accountmanager.accounts&quot;).contains(',', 1)) {</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineplus">+    if (Services.prefs.getCharPref(&quot;mail.accountmanager.accounts&quot;).includes(',', 1)) {</span>
<a href="#l8.14"></a><span id="l8.14">       mailInstrumentationManager.addEvent(&quot;accountAdded&quot;, true);</span>
<a href="#l8.15"></a><span id="l8.15">       mailInstrumentationManager._removeObserver(</span>
<a href="#l8.16"></a><span id="l8.16">         &quot;mail.accountmanager.accounts&quot;,</span>
<a href="#l8.17"></a><span id="l8.17">         mailInstrumentationManager._accountsChanged);</span>
<a href="#l8.18"></a><span id="l8.18"> </span>
<a href="#l8.19"></a><span id="l8.19">     }</span>
<a href="#l8.20"></a><span id="l8.20">   },</span>
<a href="#l8.21"></a><span id="l8.21">   _smtpServerAdded: function() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1" class="difflineminus">--- a/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineplus">+++ b/mail/base/test/unit/test_viewWrapper_virtualFolderCustomTerm.js</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineat">@@ -32,17 +32,17 @@ var gCustomSearchTermSubject = {</span>
<a href="#l9.4"></a><span id="l9.4">   getAvailable: function subject_getAvailable(scope, op) {</span>
<a href="#l9.5"></a><span id="l9.5">     return true;</span>
<a href="#l9.6"></a><span id="l9.6">   },</span>
<a href="#l9.7"></a><span id="l9.7">   getAvailableOperators: function subject_getAvailableOperators(scope, length) {</span>
<a href="#l9.8"></a><span id="l9.8">     length.value = 1;</span>
<a href="#l9.9"></a><span id="l9.9">     return [Components.interfaces.nsMsgSearchOp.Contains];</span>
<a href="#l9.10"></a><span id="l9.10">   },</span>
<a href="#l9.11"></a><span id="l9.11">   match: function subject_match(aMsgHdr, aSearchValue, aSearchOp) {</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-    return (aMsgHdr.subject.contains(aSearchValue));</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineplus">+    return (aMsgHdr.subject.includes(aSearchValue));</span>
<a href="#l9.14"></a><span id="l9.14">   },</span>
<a href="#l9.15"></a><span id="l9.15">   needsBody: false,</span>
<a href="#l9.16"></a><span id="l9.16"> };</span>
<a href="#l9.17"></a><span id="l9.17"> </span>
<a href="#l9.18"></a><span id="l9.18"> MailServices.filters.addCustomTerm(gCustomSearchTermSubject);</span>
<a href="#l9.19"></a><span id="l9.19"> </span>
<a href="#l9.20"></a><span id="l9.20"> /**</span>
<a href="#l9.21"></a><span id="l9.21">  * Make sure we open a virtual folder backed by a single underlying folder</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1" class="difflineminus">--- a/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineplus">+++ b/mail/components/addrbook/content/abCardOverlay.js</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineat">@@ -577,17 +577,17 @@ function CheckAndSetCardValues(cardprope</span>
<a href="#l10.4"></a><span id="l10.4">   savePhoto(cardproperty);</span>
<a href="#l10.5"></a><span id="l10.5"> </span>
<a href="#l10.6"></a><span id="l10.6">   return true;</span>
<a href="#l10.7"></a><span id="l10.7"> }</span>
<a href="#l10.8"></a><span id="l10.8"> </span>
<a href="#l10.9"></a><span id="l10.9"> function CleanUpWebPage(webPage)</span>
<a href="#l10.10"></a><span id="l10.10"> {</span>
<a href="#l10.11"></a><span id="l10.11">   // no :// yet so we should add something</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-  if (webPage.length &amp;&amp; !webPage.contains(&quot;://&quot;))</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineplus">+  if (webPage.length &amp;&amp; !webPage.includes(&quot;://&quot;))</span>
<a href="#l10.14"></a><span id="l10.14">   {</span>
<a href="#l10.15"></a><span id="l10.15">     // check for missing / on http://</span>
<a href="#l10.16"></a><span id="l10.16">     if (webPage.startsWith(&quot;http:/&quot;))</span>
<a href="#l10.17"></a><span id="l10.17">       return(&quot;http://&quot; + webPage.substr(6));</span>
<a href="#l10.18"></a><span id="l10.18">     else</span>
<a href="#l10.19"></a><span id="l10.19">       return(&quot;http://&quot; + webPage);</span>
<a href="#l10.20"></a><span id="l10.20">   }</span>
<a href="#l10.21"></a><span id="l10.21">   else</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1" class="difflineminus">--- a/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineplus">+++ b/mail/components/compose/content/MsgComposeCommands.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineat">@@ -2729,17 +2729,17 @@ function CheckValidEmailAddress(aMsgComp</span>
<a href="#l11.4"></a><span id="l11.4">     return false;</span>
<a href="#l11.5"></a><span id="l11.5">   }</span>
<a href="#l11.6"></a><span id="l11.6"> </span>
<a href="#l11.7"></a><span id="l11.7">   let invalidStr;</span>
<a href="#l11.8"></a><span id="l11.8">    // Crude check that the to, cc, and bcc fields contain at least one '@'.</span>
<a href="#l11.9"></a><span id="l11.9">    // We could parse each address, but that might be overkill.</span>
<a href="#l11.10"></a><span id="l11.10">   function isInvalidAddress(aAddress) {</span>
<a href="#l11.11"></a><span id="l11.11">     return (aAddress.length &gt; 0 &amp;&amp;</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-            ((!aAddress.contains(&quot;@&quot;, 1) &amp;&amp; aAddress.toLowerCase() != &quot;postmaster&quot;) ||</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineplus">+            ((!aAddress.includes(&quot;@&quot;, 1) &amp;&amp; aAddress.toLowerCase() != &quot;postmaster&quot;) ||</span>
<a href="#l11.14"></a><span id="l11.14">               aAddress.endsWith(&quot;@&quot;)));</span>
<a href="#l11.15"></a><span id="l11.15">   }</span>
<a href="#l11.16"></a><span id="l11.16">   if (isInvalidAddress(aMsgCompFields.to))</span>
<a href="#l11.17"></a><span id="l11.17">     invalidStr = aMsgCompFields.to;</span>
<a href="#l11.18"></a><span id="l11.18">   else if (isInvalidAddress(aMsgCompFields.cc))</span>
<a href="#l11.19"></a><span id="l11.19">     invalidStr = aMsgCompFields.cc;</span>
<a href="#l11.20"></a><span id="l11.20">   else if (isInvalidAddress(aMsgCompFields.bcc))</span>
<a href="#l11.21"></a><span id="l11.21">     invalidStr = aMsgCompFields.bcc;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1" class="difflineminus">--- a/mail/components/compose/content/addressingWidgetOverlay.js</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineplus">+++ b/mail/components/compose/content/addressingWidgetOverlay.js</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineat">@@ -789,17 +789,17 @@ function awRecipientTextCommand(enterEve</span>
<a href="#l12.4"></a><span id="l12.4"> }</span>
<a href="#l12.5"></a><span id="l12.5"> </span>
<a href="#l12.6"></a><span id="l12.6"> function awRecipientKeyPress(event, element)</span>
<a href="#l12.7"></a><span id="l12.7"> {</span>
<a href="#l12.8"></a><span id="l12.8">   switch(event.keyCode) {</span>
<a href="#l12.9"></a><span id="l12.9">   case KeyEvent.DOM_VK_RETURN:</span>
<a href="#l12.10"></a><span id="l12.10">   case KeyEvent.DOM_VK_TAB:</span>
<a href="#l12.11"></a><span id="l12.11">     // if the user text contains a comma or a line return, ignore</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-    if (element.value.contains(','))</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineplus">+    if (element.value.includes(','))</span>
<a href="#l12.14"></a><span id="l12.14">     {</span>
<a href="#l12.15"></a><span id="l12.15">       var addresses = element.value;</span>
<a href="#l12.16"></a><span id="l12.16">       element.value = &quot;&quot;; // clear out the current line so we don't try to autocomplete it..</span>
<a href="#l12.17"></a><span id="l12.17">       parseAndAddAddresses(addresses, awGetPopupElement(awGetRowByInputElement(element)).selectedItem.getAttribute(&quot;value&quot;));</span>
<a href="#l12.18"></a><span id="l12.18">     }</span>
<a href="#l12.19"></a><span id="l12.19">     else if (event.keyCode == KeyEvent.DOM_VK_TAB)</span>
<a href="#l12.20"></a><span id="l12.20">       awTabFromRecipient(element, event);</span>
<a href="#l12.21"></a><span id="l12.21"> </span>
<a href="#l12.22"></a><span id="l12.22" class="difflineat">@@ -1029,17 +1029,17 @@ AutomatedAutoCompleteHandler.prototype =</span>
<a href="#l12.23"></a><span id="l12.23">     this.numSessionsToSearch = 0;</span>
<a href="#l12.24"></a><span id="l12.24">     this.numSessionsSearched = 0;</span>
<a href="#l12.25"></a><span id="l12.25">     this.searchResults = new Array;</span>
<a href="#l12.26"></a><span id="l12.26"> </span>
<a href="#l12.27"></a><span id="l12.27">     if (this.indexIntoNames &lt; this.numNamesToComplete &amp;&amp; this.namesToComplete[this.indexIntoNames])</span>
<a href="#l12.28"></a><span id="l12.28">     {</span>
<a href="#l12.29"></a><span id="l12.29">       /* XXX This is used to work, until switching to the new toolkit broke it</span>
<a href="#l12.30"></a><span id="l12.30">          We should fix it see bug 456550.</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-      if (!this.namesToComplete[this.indexIntoNames].contains('@')) // don't autocomplete if address has an @ sign in it</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineplus">+      if (!this.namesToComplete[this.indexIntoNames].includes('@')) // don't autocomplete if address has an @ sign in it</span>
<a href="#l12.33"></a><span id="l12.33">       {</span>
<a href="#l12.34"></a><span id="l12.34">         // make sure total session count is updated before we kick off ANY actual searches</span>
<a href="#l12.35"></a><span id="l12.35">         if (gAutocompleteSession)</span>
<a href="#l12.36"></a><span id="l12.36">           this.numSessionsToSearch++;</span>
<a href="#l12.37"></a><span id="l12.37"> </span>
<a href="#l12.38"></a><span id="l12.38">         if (gLDAPSession &amp;&amp; gCurrentAutocompleteDirectory)</span>
<a href="#l12.39"></a><span id="l12.39">           this.numSessionsToSearch++;</span>
<a href="#l12.40"></a><span id="l12.40"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1" class="difflineminus">--- a/mail/components/im/content/imconversation.xml</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineplus">+++ b/mail/components/im/content/imconversation.xml</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineat">@@ -963,17 +963,17 @@</span>
<a href="#l13.4"></a><span id="l13.4">           modifiers |= masks.SHIFT_MASK;</span>
<a href="#l13.5"></a><span id="l13.5">         if (event.ctrlKey)</span>
<a href="#l13.6"></a><span id="l13.6">           modifiers |= masks.CONTROL_MASK;</span>
<a href="#l13.7"></a><span id="l13.7">         if (event.altKey)</span>
<a href="#l13.8"></a><span id="l13.8">           modifiers |= masks.ALT_MASK;</span>
<a href="#l13.9"></a><span id="l13.9">         if (event.metaKey)</span>
<a href="#l13.10"></a><span id="l13.10">           modifiers |= masks.META_MASK;</span>
<a href="#l13.11"></a><span id="l13.11">         if (event.accelKey)</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-          modifiers |= (navigator.platform.contains(&quot;Mac&quot;)) ? masks.META_MASK</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineplus">+          modifiers |= (navigator.platform.includes(&quot;Mac&quot;)) ? masks.META_MASK</span>
<a href="#l13.14"></a><span id="l13.14">                                                             : masks.CONTROL_MASK;</span>
<a href="#l13.15"></a><span id="l13.15"> </span>
<a href="#l13.16"></a><span id="l13.16">         // resend the event</span>
<a href="#l13.17"></a><span id="l13.17">         window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)</span>
<a href="#l13.18"></a><span id="l13.18">               .getInterface(Components.interfaces.nsIDOMWindowUtils)</span>
<a href="#l13.19"></a><span id="l13.19">               .sendKeyEvent(event.type, event.keyCode, event.charCode, modifiers);</span>
<a href="#l13.20"></a><span id="l13.20">       ]]&gt;</span>
<a href="#l13.21"></a><span id="l13.21">       &lt;/body&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1" class="difflineminus">--- a/mail/components/preferences/applications.js</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineplus">+++ b/mail/components/preferences/applications.js</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineat">@@ -1133,18 +1133,18 @@ var gApplicationsPane = {</span>
<a href="#l14.4"></a><span id="l14.4">       this._list.appendChild(item);</span>
<a href="#l14.5"></a><span id="l14.5">     }</span>
<a href="#l14.6"></a><span id="l14.6"> </span>
<a href="#l14.7"></a><span id="l14.7">     this._selectLastSelectedType();</span>
<a href="#l14.8"></a><span id="l14.8">   },</span>
<a href="#l14.9"></a><span id="l14.9"> </span>
<a href="#l14.10"></a><span id="l14.10">   _matchesFilter: function(aType) {</span>
<a href="#l14.11"></a><span id="l14.11">     var filterValue = this._filter.value.toLowerCase();</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-    return this._describeType(aType).toLowerCase().contains(filterValue) ||</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-           this._describePreferredAction(aType).toLowerCase().contains(filterValue);</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineplus">+    return this._describeType(aType).toLowerCase().includes(filterValue) ||</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineplus">+           this._describePreferredAction(aType).toLowerCase().includes(filterValue);</span>
<a href="#l14.16"></a><span id="l14.16">   },</span>
<a href="#l14.17"></a><span id="l14.17"> </span>
<a href="#l14.18"></a><span id="l14.18">   /**</span>
<a href="#l14.19"></a><span id="l14.19">    * Describe, in a human-readable fashion, the type represented by the given</span>
<a href="#l14.20"></a><span id="l14.20">    * handler info object.  Normally this is just the description provided by</span>
<a href="#l14.21"></a><span id="l14.21">    * the info object, but if more than one object presents the same description,</span>
<a href="#l14.22"></a><span id="l14.22">    * then we annotate the duplicate descriptions with the type itself to help</span>
<a href="#l14.23"></a><span id="l14.23">    * users distinguish between those types.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1" class="difflineminus">--- a/mail/components/preferences/cookies.js</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineplus">+++ b/mail/components/preferences/cookies.js</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineat">@@ -808,19 +808,19 @@ var gCookiesWindow = {</span>
<a href="#l15.4"></a><span id="l15.4">     }</span>
<a href="#l15.5"></a><span id="l15.5">     this._lastSelectedRanges = [];</span>
<a href="#l15.6"></a><span id="l15.6"> </span>
<a href="#l15.7"></a><span id="l15.7">     document.getElementById(&quot;cookiesIntro&quot;).value = this._bundle.getString(&quot;cookiesAll&quot;);</span>
<a href="#l15.8"></a><span id="l15.8">   },</span>
<a href="#l15.9"></a><span id="l15.9"> </span>
<a href="#l15.10"></a><span id="l15.10">   _cookieMatchesFilter: function (aCookie)</span>
<a href="#l15.11"></a><span id="l15.11">   {</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    return aCookie.rawHost.contains(this._view._filterValue) ||</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-           aCookie.name.contains(this._view._filterValue) ||</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-           aCookie.value.contains(this._view._filterValue);</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineplus">+    return aCookie.rawHost.includes(this._view._filterValue) ||</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineplus">+           aCookie.name.includes(this._view._filterValue) ||</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineplus">+           aCookie.value.includes(this._view._filterValue);</span>
<a href="#l15.18"></a><span id="l15.18">   },</span>
<a href="#l15.19"></a><span id="l15.19"> </span>
<a href="#l15.20"></a><span id="l15.20">   _filterCookies: function (aFilterValue)</span>
<a href="#l15.21"></a><span id="l15.21">   {</span>
<a href="#l15.22"></a><span id="l15.22">     this._view._filterValue = aFilterValue;</span>
<a href="#l15.23"></a><span id="l15.23">     var cookies = [];</span>
<a href="#l15.24"></a><span id="l15.24">     for (var i = 0; i &lt; gCookiesWindow._hostOrder.length; ++i) { //var host in gCookiesWindow._hosts) {</span>
<a href="#l15.25"></a><span id="l15.25">       var currHost = gCookiesWindow._hosts[gCookiesWindow._hostOrder[i]]; // gCookiesWindow._hosts[host];</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1" class="difflineminus">--- a/mail/components/preferences/general.js</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineplus">+++ b/mail/components/preferences/general.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineat">@@ -107,17 +107,17 @@ var gGeneralPane = {</span>
<a href="#l16.4"></a><span id="l16.4">   previewSound: function ()</span>
<a href="#l16.5"></a><span id="l16.5">   {</span>
<a href="#l16.6"></a><span id="l16.6">     let sound = Components.classes[&quot;@mozilla.org/sound;1&quot;].createInstance(Components.interfaces.nsISound);</span>
<a href="#l16.7"></a><span id="l16.7"> </span>
<a href="#l16.8"></a><span id="l16.8">     var soundLocation;</span>
<a href="#l16.9"></a><span id="l16.9">     soundLocation = document.getElementById('soundType').value == 1 ?</span>
<a href="#l16.10"></a><span id="l16.10">                     document.getElementById('soundUrlLocation').value : &quot;&quot;;</span>
<a href="#l16.11"></a><span id="l16.11"> </span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-    if (!soundLocation.contains(&quot;file://&quot;)) {</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineplus">+    if (!soundLocation.includes(&quot;file://&quot;)) {</span>
<a href="#l16.14"></a><span id="l16.14">       if (Services.appinfo.OS == &quot;Darwin&quot;) // OS X</span>
<a href="#l16.15"></a><span id="l16.15">         sound.beep();</span>
<a href="#l16.16"></a><span id="l16.16">       else</span>
<a href="#l16.17"></a><span id="l16.17">         sound.playEventSound(Components.interfaces.nsISound.EVENT_NEW_MAIL_RECEIVED);</span>
<a href="#l16.18"></a><span id="l16.18">     } else {</span>
<a href="#l16.19"></a><span id="l16.19">       sound.play(Services.io.newURI(soundLocation, null, null));</span>
<a href="#l16.20"></a><span id="l16.20">     }</span>
<a href="#l16.21"></a><span id="l16.21">   },</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1" class="difflineminus">--- a/mail/components/preferences/permissions.js</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineplus">+++ b/mail/components/preferences/permissions.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineat">@@ -67,17 +67,17 @@ var gPermissionManager = {</span>
<a href="#l17.4"></a><span id="l17.4">       break;</span>
<a href="#l17.5"></a><span id="l17.5">     }</span>
<a href="#l17.6"></a><span id="l17.6">     return this._bundle.getString(stringKey);</span>
<a href="#l17.7"></a><span id="l17.7">   },</span>
<a href="#l17.8"></a><span id="l17.8"> </span>
<a href="#l17.9"></a><span id="l17.9">   addPermission: function (aCapability)</span>
<a href="#l17.10"></a><span id="l17.10">   {</span>
<a href="#l17.11"></a><span id="l17.11">     var textbox = document.getElementById(&quot;url&quot;);</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-    let scheme = textbox.value.contains(&quot;@&quot;) ? &quot;mailto:&quot; : &quot;http://&quot;;</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineplus">+    let scheme = textbox.value.includes(&quot;@&quot;) ? &quot;mailto:&quot; : &quot;http://&quot;;</span>
<a href="#l17.14"></a><span id="l17.14">     let host = textbox.value.replace(/^\s*([-\w]*:\/*)?/, &quot;&quot;); // trim any leading space and scheme</span>
<a href="#l17.15"></a><span id="l17.15">     try {</span>
<a href="#l17.16"></a><span id="l17.16">       let uri = Services.io.newURI(scheme + host, null, null);</span>
<a href="#l17.17"></a><span id="l17.17">       host = uri.spec.startsWith(&quot;mailto:&quot;) ? uri.spec : uri.host;</span>
<a href="#l17.18"></a><span id="l17.18">     } catch(ex) {</span>
<a href="#l17.19"></a><span id="l17.19">       var message = this._bundle.getString(&quot;invalidURI&quot;);</span>
<a href="#l17.20"></a><span id="l17.20">       var title = this._bundle.getString(&quot;invalidURITitle&quot;);</span>
<a href="#l17.21"></a><span id="l17.21">       Services.prompt.alert(window, title, message);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1" class="difflineminus">--- a/mail/components/test/unit/test_about_support.js</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineplus">+++ b/mail/components/test/unit/test_about_support.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineat">@@ -152,17 +152,17 @@ function test_get_file_system_type() {</span>
<a href="#l18.4"></a><span id="l18.4"> function test_get_account_details() {</span>
<a href="#l18.5"></a><span id="l18.5">   let accountDetails = AboutSupport.getAccountDetails();</span>
<a href="#l18.6"></a><span id="l18.6">   let accountDetailsText = uneval(accountDetails);</span>
<a href="#l18.7"></a><span id="l18.7">   // The list of accounts we are looking for</span>
<a href="#l18.8"></a><span id="l18.8">   let accountsToSee = [key for (key in Iterator(gAccountMap, true))];</span>
<a href="#l18.9"></a><span id="l18.9"> </span>
<a href="#l18.10"></a><span id="l18.10">   // Our first check is to see that no sensitive data has crept in</span>
<a href="#l18.11"></a><span id="l18.11">   for (let [, data] in Iterator(gSensitiveData))</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-    do_check_false(accountDetailsText.contains(data));</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineplus">+    do_check_false(accountDetailsText.includes(data));</span>
<a href="#l18.14"></a><span id="l18.14"> </span>
<a href="#l18.15"></a><span id="l18.15">   for (let [, details] in Iterator(accountDetails)) {</span>
<a href="#l18.16"></a><span id="l18.16">     // We're going to make one exception: for the local folders server. We don't</span>
<a href="#l18.17"></a><span id="l18.17">     // care too much about its details.</span>
<a href="#l18.18"></a><span id="l18.18">     if (details.key == localAccountUtils.msgAccount.key)</span>
<a href="#l18.19"></a><span id="l18.19">       continue;</span>
<a href="#l18.20"></a><span id="l18.20"> </span>
<a href="#l18.21"></a><span id="l18.21">     // Check that we're expecting to see this server</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1" class="difflineminus">--- a/mail/test/mozmill/attachment/test-attachment-events.js</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineplus">+++ b/mail/test/mozmill/attachment/test-attachment-events.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineat">@@ -351,33 +351,33 @@ function test_attachment_renamed() {</span>
<a href="#l19.4"></a><span id="l19.4"> </span>
<a href="#l19.5"></a><span id="l19.5">   // Ensure that we saw the attachment-renamed event</span>
<a href="#l19.6"></a><span id="l19.6">   assert_equals(1, eventCount);</span>
<a href="#l19.7"></a><span id="l19.7">   // Ensure that the event mentions the right attachment</span>
<a href="#l19.8"></a><span id="l19.8">   let renamedAttachment1 = lastEvent.target.attachment;</span>
<a href="#l19.9"></a><span id="l19.9">   let originalName1 = lastEvent.detail;</span>
<a href="#l19.10"></a><span id="l19.10">   assert_true(renamedAttachment1 instanceof Ci.nsIMsgAttachment);</span>
<a href="#l19.11"></a><span id="l19.11">   assert_equals(kRenameTo1, renamedAttachment1.name);</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-  assert_true(renamedAttachment1.url.contains(&quot;http://www.example.com/1&quot;));</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineplus">+  assert_true(renamedAttachment1.url.includes(&quot;http://www.example.com/1&quot;));</span>
<a href="#l19.14"></a><span id="l19.14">   assert_equals(&quot;www.example.com/1&quot;, originalName1);</span>
<a href="#l19.15"></a><span id="l19.15"> </span>
<a href="#l19.16"></a><span id="l19.16">   // Ok, let's try renaming the same attachment.</span>
<a href="#l19.17"></a><span id="l19.17">   gMockPromptService.reset();</span>
<a href="#l19.18"></a><span id="l19.18">   gMockPromptService.inoutValue = kRenameTo2;</span>
<a href="#l19.19"></a><span id="l19.19">   gMockPromptService.returnValue = true;</span>
<a href="#l19.20"></a><span id="l19.20"> </span>
<a href="#l19.21"></a><span id="l19.21">   select_attachments(cw, 0);</span>
<a href="#l19.22"></a><span id="l19.22">   cw.window.goDoCommand(&quot;cmd_renameAttachment&quot;);</span>
<a href="#l19.23"></a><span id="l19.23"> </span>
<a href="#l19.24"></a><span id="l19.24">   assert_equals(2, eventCount);</span>
<a href="#l19.25"></a><span id="l19.25">   let renamedAttachment2 = lastEvent.target.attachment;</span>
<a href="#l19.26"></a><span id="l19.26">   let originalName2 = lastEvent.detail;</span>
<a href="#l19.27"></a><span id="l19.27">   assert_true(renamedAttachment2 instanceof Ci.nsIMsgAttachment);</span>
<a href="#l19.28"></a><span id="l19.28">   assert_equals(kRenameTo2, renamedAttachment2.name);</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineminus">-  assert_true(renamedAttachment2.url.contains(&quot;http://www.example.com/1&quot;));</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineplus">+  assert_true(renamedAttachment2.url.includes(&quot;http://www.example.com/1&quot;));</span>
<a href="#l19.31"></a><span id="l19.31">   assert_equals(kRenameTo1, originalName2);</span>
<a href="#l19.32"></a><span id="l19.32"> </span>
<a href="#l19.33"></a><span id="l19.33">   // Ok, let's rename another attachment</span>
<a href="#l19.34"></a><span id="l19.34">   gMockPromptService.reset();</span>
<a href="#l19.35"></a><span id="l19.35">   gMockPromptService.inoutValue = kRenameTo3;</span>
<a href="#l19.36"></a><span id="l19.36">   gMockPromptService.returnValue = true;</span>
<a href="#l19.37"></a><span id="l19.37"> </span>
<a href="#l19.38"></a><span id="l19.38">   // We'll select the second attachment this time.</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineat">@@ -386,17 +386,17 @@ function test_attachment_renamed() {</span>
<a href="#l19.40"></a><span id="l19.40"> </span>
<a href="#l19.41"></a><span id="l19.41">   // Ensure we saw the attachment-renamed event</span>
<a href="#l19.42"></a><span id="l19.42">   assert_equals(3, eventCount);</span>
<a href="#l19.43"></a><span id="l19.43">   // Ensure that the event mentions the right attachment</span>
<a href="#l19.44"></a><span id="l19.44">   let renamedAttachment3 = lastEvent.target.attachment;</span>
<a href="#l19.45"></a><span id="l19.45">   let originalName3 = lastEvent.detail;</span>
<a href="#l19.46"></a><span id="l19.46">   assert_true(renamedAttachment3 instanceof Ci.nsIMsgAttachment);</span>
<a href="#l19.47"></a><span id="l19.47">   assert_equals(kRenameTo3, renamedAttachment3.name);</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineminus">-  assert_true(renamedAttachment3.url.contains(&quot;http://www.example.com/2&quot;));</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineplus">+  assert_true(renamedAttachment3.url.includes(&quot;http://www.example.com/2&quot;));</span>
<a href="#l19.50"></a><span id="l19.50">   assert_equals(&quot;www.example.com/2&quot;, originalName3);</span>
<a href="#l19.51"></a><span id="l19.51"> </span>
<a href="#l19.52"></a><span id="l19.52">   // Unregister the Mock Prompt service, and remove our observer.</span>
<a href="#l19.53"></a><span id="l19.53">   gMockPromptService.unregister();</span>
<a href="#l19.54"></a><span id="l19.54">   cw.e(&quot;attachmentBucket&quot;).addEventListener(kAttachmentRenamed, listener,</span>
<a href="#l19.55"></a><span id="l19.55">                                             false);</span>
<a href="#l19.56"></a><span id="l19.56"> }</span>
<a href="#l19.57"></a><span id="l19.57"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-charset-edit.js</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-charset-edit.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineat">@@ -144,17 +144,17 @@ function test_no_mojibake() {</span>
<a href="#l20.4"></a><span id="l20.4">   let rwc = open_compose_with_reply();</span>
<a href="#l20.5"></a><span id="l20.5">   // Ctrl+S = save as draft.</span>
<a href="#l20.6"></a><span id="l20.6">   rwc.keypress(null, &quot;s&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l20.7"></a><span id="l20.7">   close_compose_window(rwc);</span>
<a href="#l20.8"></a><span id="l20.8"> </span>
<a href="#l20.9"></a><span id="l20.9">   let draftMsg = select_click_row(1);</span>
<a href="#l20.10"></a><span id="l20.10">   assert_equals(getMsgHeaders(draftMsg).get(&quot;&quot;).charset, &quot;UTF-8&quot;);</span>
<a href="#l20.11"></a><span id="l20.11">   let text = getMsgHeaders(draftMsg, true).get(&quot;&quot;);</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-  if (!text.contains(nonASCII))</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineplus">+  if (!text.includes(nonASCII))</span>
<a href="#l20.14"></a><span id="l20.14">     throw new Error(&quot;Expected to find &quot; + nonASCII + &quot; in &quot; + text);</span>
<a href="#l20.15"></a><span id="l20.15">   press_delete(mc); // Delete message</span>
<a href="#l20.16"></a><span id="l20.16"> </span>
<a href="#l20.17"></a><span id="l20.17">   // Edit the original message. Charset should be UTF-8 now.</span>
<a href="#l20.18"></a><span id="l20.18">   msg = select_click_row(0);</span>
<a href="#l20.19"></a><span id="l20.19">   plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l20.20"></a><span id="l20.20">   mc.click(mc.eid(&quot;menu_editMsgAsNew&quot;));</span>
<a href="#l20.21"></a><span id="l20.21">   rwc = wait_for_compose_window();</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-charset-upgrade.js</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-charset-upgrade.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineat">@@ -111,17 +111,17 @@ function test_encoding_upgrade_html_comp</span>
<a href="#l21.4"></a><span id="l21.4"> </span>
<a href="#l21.5"></a><span id="l21.5">   be_in_folder(draftsFolder);</span>
<a href="#l21.6"></a><span id="l21.6">   let draftMsg = select_click_row(0);</span>
<a href="#l21.7"></a><span id="l21.7"> </span>
<a href="#l21.8"></a><span id="l21.8">   // Charset should still be the default.</span>
<a href="#l21.9"></a><span id="l21.9">   assert_equals(draftMsg.Charset, &quot;windows-1252&quot;);</span>
<a href="#l21.10"></a><span id="l21.10"> </span>
<a href="#l21.11"></a><span id="l21.11">   let draftMsgContent = getMsgSource(draftMsg);</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-  if (!draftMsgContent.contains('content=&quot;text/html; charset=windows-1252&quot;'))</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineplus">+  if (!draftMsgContent.includes('content=&quot;text/html; charset=windows-1252&quot;'))</span>
<a href="#l21.14"></a><span id="l21.14">     throw new Error(&quot;Expected content type not in msg; draftMsgContent=&quot; +</span>
<a href="#l21.15"></a><span id="l21.15">                     draftMsgContent);</span>
<a href="#l21.16"></a><span id="l21.16"> </span>
<a href="#l21.17"></a><span id="l21.17">   const CHINESE = &quot;&quot;;</span>
<a href="#l21.18"></a><span id="l21.18">   compWin.type(compWin.eid(&quot;content-frame&quot;),</span>
<a href="#l21.19"></a><span id="l21.19">     &quot;but now, we enter some chinese: &quot; + CHINESE +&quot;\n&quot;);</span>
<a href="#l21.20"></a><span id="l21.20"> </span>
<a href="#l21.21"></a><span id="l21.21">   // Ctrl+U = Underline (so we can check multipart/alternative gets right,</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineat">@@ -135,45 +135,45 @@ function test_encoding_upgrade_html_comp</span>
<a href="#l21.23"></a><span id="l21.23">   compWin.keypress(null, &quot;s&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l21.24"></a><span id="l21.24"> </span>
<a href="#l21.25"></a><span id="l21.25">   be_in_folder(draftsFolder);</span>
<a href="#l21.26"></a><span id="l21.26">   let draftMsg2 = select_click_row(0);</span>
<a href="#l21.27"></a><span id="l21.27">   // Charset should have be upgraded to UTF-8.</span>
<a href="#l21.28"></a><span id="l21.28">   assert_equals(draftMsg2.Charset, &quot;UTF-8&quot;);</span>
<a href="#l21.29"></a><span id="l21.29"> </span>
<a href="#l21.30"></a><span id="l21.30">   let draftMsg2Content = getMsgSource(draftMsg2);</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-  if (!draftMsg2Content.contains('content=&quot;text/html; charset=UTF-8&quot;'))</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineplus">+  if (!draftMsg2Content.includes('content=&quot;text/html; charset=UTF-8&quot;'))</span>
<a href="#l21.33"></a><span id="l21.33">     throw new Error(&quot;Expected content type not in msg; draftMsg2Content=&quot; +</span>
<a href="#l21.34"></a><span id="l21.34">                     draftMsg2Content);</span>
<a href="#l21.35"></a><span id="l21.35"> </span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-  if (!draftMsg2Content.contains(CHINESE))</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineplus">+  if (!draftMsg2Content.includes(CHINESE))</span>
<a href="#l21.38"></a><span id="l21.38">     throw new Error(&quot;Chinese text not in msg; CHINESE=&quot; + CHINESE +</span>
<a href="#l21.39"></a><span id="l21.39">                     &quot;, draftMsg2Content=&quot; + draftMsg2Content);</span>
<a href="#l21.40"></a><span id="l21.40"> </span>
<a href="#l21.41"></a><span id="l21.41">   // Ctrl+Shift+Return = Send Later</span>
<a href="#l21.42"></a><span id="l21.42">   compWin.keypress(null, &quot;VK_RETURN&quot;, {shiftKey: true, accelKey: true});</span>
<a href="#l21.43"></a><span id="l21.43"> </span>
<a href="#l21.44"></a><span id="l21.44">   be_in_folder(outboxFolder);</span>
<a href="#l21.45"></a><span id="l21.45">   let outMsg = select_click_row(0);</span>
<a href="#l21.46"></a><span id="l21.46">   let outMsgContent = getMsgSource(outMsg);</span>
<a href="#l21.47"></a><span id="l21.47"> </span>
<a href="#l21.48"></a><span id="l21.48">   // This message should be multipart/alternative.</span>
<a href="#l21.49"></a><span id="l21.49" class="difflineminus">-  if (!outMsgContent.contains(&quot;Content-Type: multipart/alternative&quot;))</span>
<a href="#l21.50"></a><span id="l21.50" class="difflineplus">+  if (!outMsgContent.includes(&quot;Content-Type: multipart/alternative&quot;))</span>
<a href="#l21.51"></a><span id="l21.51">     throw new Error(&quot;Expected multipart/alternative; content=&quot; + outMsgContent);</span>
<a href="#l21.52"></a><span id="l21.52"> </span>
<a href="#l21.53"></a><span id="l21.53">   let chinesePlainIdx = outMsgContent.indexOf(CHINESE);</span>
<a href="#l21.54"></a><span id="l21.54">   assert_true(chinesePlainIdx &gt; 0, &quot;chinesePlainIdx=&quot; + chinesePlainIdx +</span>
<a href="#l21.55"></a><span id="l21.55">                                    &quot;, outMsgContent=&quot; + outMsgContent);</span>
<a href="#l21.56"></a><span id="l21.56"> </span>
<a href="#l21.57"></a><span id="l21.57">   let chineseHTMLIdx = outMsgContent.indexOf(CHINESE, chinesePlainIdx);</span>
<a href="#l21.58"></a><span id="l21.58">   assert_true(chineseHTMLIdx &gt; 0, &quot;chineseHTMLIdx=&quot; + chineseHTMLIdx +</span>
<a href="#l21.59"></a><span id="l21.59">                                   &quot;, outMsgContent=&quot; + outMsgContent);</span>
<a href="#l21.60"></a><span id="l21.60"> </span>
<a href="#l21.61"></a><span id="l21.61">   // Make sure the actual html also got the content type set correctly.</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineminus">-  if (!outMsgContent.contains('content=&quot;text/html; charset=UTF-8&quot;'))</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineplus">+  if (!outMsgContent.includes('content=&quot;text/html; charset=UTF-8&quot;'))</span>
<a href="#l21.64"></a><span id="l21.64">     throw new Error(&quot;Expected content type not in html; outMsgContent=&quot; +</span>
<a href="#l21.65"></a><span id="l21.65">                     outMsgContent);</span>
<a href="#l21.66"></a><span id="l21.66"> </span>
<a href="#l21.67"></a><span id="l21.67">   press_delete(); // Delete the msg from Outbox.</span>
<a href="#l21.68"></a><span id="l21.68"> }</span>
<a href="#l21.69"></a><span id="l21.69"> </span>
<a href="#l21.70"></a><span id="l21.70"> /**</span>
<a href="#l21.71"></a><span id="l21.71">  * Test that if all characters don't fit the current charset selection,</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineat">@@ -208,36 +208,36 @@ function test_encoding_upgrade_plaintext</span>
<a href="#l21.73"></a><span id="l21.73">   compWin.keypress(null, &quot;s&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l21.74"></a><span id="l21.74"> </span>
<a href="#l21.75"></a><span id="l21.75">   be_in_folder(draftsFolder);</span>
<a href="#l21.76"></a><span id="l21.76">   let draftMsg2 = select_click_row(0);</span>
<a href="#l21.77"></a><span id="l21.77">   // Charset should have be upgraded to UTF-8.</span>
<a href="#l21.78"></a><span id="l21.78">   assert_equals(draftMsg2.Charset, &quot;UTF-8&quot;);</span>
<a href="#l21.79"></a><span id="l21.79"> </span>
<a href="#l21.80"></a><span id="l21.80">   let draftMsg2Content = getMsgSource(draftMsg2);</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineminus">-  if (draftMsg2Content.contains(&quot;&lt;html&gt;&quot;))</span>
<a href="#l21.82"></a><span id="l21.82" class="difflineplus">+  if (draftMsg2Content.includes(&quot;&lt;html&gt;&quot;))</span>
<a href="#l21.83"></a><span id="l21.83">     throw new Error(&quot;Plaintext draft contained &lt;html&gt;; &quot;+</span>
<a href="#l21.84"></a><span id="l21.84">                     &quot;draftMsg2Content=&quot; + draftMsg2Content);</span>
<a href="#l21.85"></a><span id="l21.85"> </span>
<a href="#l21.86"></a><span id="l21.86" class="difflineminus">-  if (!draftMsg2Content.contains(CHINESE))</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineplus">+  if (!draftMsg2Content.includes(CHINESE))</span>
<a href="#l21.88"></a><span id="l21.88">     throw new Error(&quot;Chinese text not in msg; CHINESE=&quot; + CHINESE +</span>
<a href="#l21.89"></a><span id="l21.89">                     &quot;, draftMsg2Content=&quot; + draftMsg2Content);</span>
<a href="#l21.90"></a><span id="l21.90"> </span>
<a href="#l21.91"></a><span id="l21.91">   // Ctrl+Shift+Return = Send Later.</span>
<a href="#l21.92"></a><span id="l21.92">   compWin.keypress(null, &quot;VK_RETURN&quot;, {shiftKey: true, accelKey: true});</span>
<a href="#l21.93"></a><span id="l21.93"> </span>
<a href="#l21.94"></a><span id="l21.94">   be_in_folder(outboxFolder);</span>
<a href="#l21.95"></a><span id="l21.95">   let outMsg = select_click_row(0);</span>
<a href="#l21.96"></a><span id="l21.96">   let outMsgContent = getMsgSource(outMsg);</span>
<a href="#l21.97"></a><span id="l21.97"> </span>
<a href="#l21.98"></a><span id="l21.98">   // This message should be text/plain;</span>
<a href="#l21.99"></a><span id="l21.99" class="difflineminus">-  if (!outMsgContent.contains(&quot;Content-Type: text/plain&quot;))</span>
<a href="#l21.100"></a><span id="l21.100" class="difflineplus">+  if (!outMsgContent.includes(&quot;Content-Type: text/plain&quot;))</span>
<a href="#l21.101"></a><span id="l21.101">     throw new Error(&quot;Expected text/plain; content=&quot; + outMsgContent);</span>
<a href="#l21.102"></a><span id="l21.102"> </span>
<a href="#l21.103"></a><span id="l21.103" class="difflineminus">-  if (!outMsgContent.contains(CHINESE))</span>
<a href="#l21.104"></a><span id="l21.104" class="difflineplus">+  if (!outMsgContent.includes(CHINESE))</span>
<a href="#l21.105"></a><span id="l21.105">     throw new Error(&quot;Chinese text not in msg; CHINESE=&quot; + CHINESE +</span>
<a href="#l21.106"></a><span id="l21.106">                     &quot;, outMsgContent=&quot; + outMsgContent);</span>
<a href="#l21.107"></a><span id="l21.107"> </span>
<a href="#l21.108"></a><span id="l21.108">   press_delete(); // Delete the msg from Outbox.</span>
<a href="#l21.109"></a><span id="l21.109"> }</span>
<a href="#l21.110"></a><span id="l21.110"> </span>
<a href="#l21.111"></a><span id="l21.111"> function teardownModule(module) {</span>
<a href="#l21.112"></a><span id="l21.112">   Services.prefs.clearUserPref(&quot;mailnews.send_default_charset&quot;);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-eml-actions.js</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-eml-actions.js</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineat">@@ -107,17 +107,17 @@ function test_reply_to_base64_eml() {</span>
<a href="#l22.4"></a><span id="l22.4">   let msgc = open_message_from_file(file);</span>
<a href="#l22.5"></a><span id="l22.5"> </span>
<a href="#l22.6"></a><span id="l22.6">   let compWin = open_compose_with_reply(msgc);</span>
<a href="#l22.7"></a><span id="l22.7"> </span>
<a href="#l22.8"></a><span id="l22.8">   let bodyText = compWin.e(&quot;content-frame&quot;).contentDocument</span>
<a href="#l22.9"></a><span id="l22.9">                         .querySelector(&quot;body&quot;).textContent;</span>
<a href="#l22.10"></a><span id="l22.10"> </span>
<a href="#l22.11"></a><span id="l22.11">   const message = &quot;You have decoded this text from base64.&quot;;</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-  if (!bodyText.contains(message))</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineplus">+  if (!bodyText.includes(message))</span>
<a href="#l22.14"></a><span id="l22.14">     throw new Error(&quot;body text didn't contain the decoded text; message=&quot; +</span>
<a href="#l22.15"></a><span id="l22.15">                     message + &quot;, bodyText=&quot; + bodyText);</span>
<a href="#l22.16"></a><span id="l22.16"> </span>
<a href="#l22.17"></a><span id="l22.17">   close_compose_window(compWin);</span>
<a href="#l22.18"></a><span id="l22.18">   close_window(msgc);</span>
<a href="#l22.19"></a><span id="l22.19"> }</span>
<a href="#l22.20"></a><span id="l22.20"> </span>
<a href="#l22.21"></a><span id="l22.21"> /**</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineat">@@ -130,15 +130,15 @@ function test_forward_base64_eml() {</span>
<a href="#l22.23"></a><span id="l22.23">   let msgc = open_message_from_file(file);</span>
<a href="#l22.24"></a><span id="l22.24"> </span>
<a href="#l22.25"></a><span id="l22.25">   let compWin = open_compose_with_forward(msgc);</span>
<a href="#l22.26"></a><span id="l22.26"> </span>
<a href="#l22.27"></a><span id="l22.27">   let bodyText = compWin.e(&quot;content-frame&quot;).contentDocument</span>
<a href="#l22.28"></a><span id="l22.28">                         .querySelector(&quot;body&quot;).textContent;</span>
<a href="#l22.29"></a><span id="l22.29"> </span>
<a href="#l22.30"></a><span id="l22.30">   const message = &quot;You have decoded this text from base64.&quot;;</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-  if (!bodyText.contains(message))</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineplus">+  if (!bodyText.includes(message))</span>
<a href="#l22.33"></a><span id="l22.33">     throw new Error(&quot;body text didn't contain the decoded text; message=&quot; +</span>
<a href="#l22.34"></a><span id="l22.34">                     message + &quot;, bodyText=&quot; + bodyText);</span>
<a href="#l22.35"></a><span id="l22.35"> </span>
<a href="#l22.36"></a><span id="l22.36">   close_compose_window(compWin);</span>
<a href="#l22.37"></a><span id="l22.37">   close_window(msgc);</span>
<a href="#l22.38"></a><span id="l22.38"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-forwarded-content.js</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-forwarded-content.js</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineat">@@ -45,16 +45,16 @@ function test_forwarded_subj() {</span>
<a href="#l23.4"></a><span id="l23.4"> </span>
<a href="#l23.5"></a><span id="l23.5">   let msg = select_click_row(0);</span>
<a href="#l23.6"></a><span id="l23.6">   assert_selected_and_displayed(mc, msg);</span>
<a href="#l23.7"></a><span id="l23.7"> </span>
<a href="#l23.8"></a><span id="l23.8">   let fwdWin = open_compose_with_forward();</span>
<a href="#l23.9"></a><span id="l23.9"> </span>
<a href="#l23.10"></a><span id="l23.10">   let headerTableText  = fwdWin.e(&quot;content-frame&quot;).contentDocument</span>
<a href="#l23.11"></a><span id="l23.11">                           .querySelector(&quot;table&quot;).textContent;</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-  if (!headerTableText.contains(msg.mime2DecodedSubject)) {</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineplus">+  if (!headerTableText.includes(msg.mime2DecodedSubject)) {</span>
<a href="#l23.14"></a><span id="l23.14">     throw new Error(&quot;Subject not set correctly in header table: subject=&quot; +</span>
<a href="#l23.15"></a><span id="l23.15">                     msg.mime2DecodedSubject + &quot;, header table text=&quot; +</span>
<a href="#l23.16"></a><span id="l23.16">                     headerTableText);</span>
<a href="#l23.17"></a><span id="l23.17">   }</span>
<a href="#l23.18"></a><span id="l23.18">   close_compose_window(fwdWin);</span>
<a href="#l23.19"></a><span id="l23.19"> }</span>
<a href="#l23.20"></a><span id="l23.20"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-forwarded-eml-actions.js</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-forwarded-eml-actions.js</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineat">@@ -98,25 +98,25 @@ function setupWindowAndTest(hotkeyToHit,</span>
<a href="#l24.4"></a><span id="l24.4">   wait_for_message_display_completion(msgWin, false);</span>
<a href="#l24.5"></a><span id="l24.5"> </span>
<a href="#l24.6"></a><span id="l24.6">   plan_for_new_window(&quot;msgcompose&quot;);</span>
<a href="#l24.7"></a><span id="l24.7">   msgWin.keypress(null, hotkeyToHit, hotkeyModifiers);</span>
<a href="#l24.8"></a><span id="l24.8">   let compWin = wait_for_compose_window(msgWin);</span>
<a href="#l24.9"></a><span id="l24.9"> </span>
<a href="#l24.10"></a><span id="l24.10">   let bodyText= compWin.e(&quot;content-frame&quot;).contentDocument</span>
<a href="#l24.11"></a><span id="l24.11">                        .querySelector(&quot;body&quot;).textContent;</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-  if (bodyText.contains(&quot;html&quot;))</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineplus">+  if (bodyText.includes(&quot;html&quot;))</span>
<a href="#l24.14"></a><span id="l24.14">     throw new Error(&quot;body text contains raw html; bodyText=&quot; + bodyText);</span>
<a href="#l24.15"></a><span id="l24.15"> </span>
<a href="#l24.16"></a><span id="l24.16" class="difflineminus">-  if (!bodyText.contains(msgbodyA))</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineplus">+  if (!bodyText.includes(msgbodyA))</span>
<a href="#l24.18"></a><span id="l24.18">     throw new Error(&quot;body text didn't contain the body text; msgbodyA=&quot; +</span>
<a href="#l24.19"></a><span id="l24.19">                     msgbodyB + &quot;, bodyText=&quot; + bodyText);</span>
<a href="#l24.20"></a><span id="l24.20"> </span>
<a href="#l24.21"></a><span id="l24.21">   let subjectText = compWin.e(&quot;msgSubject&quot;).value;</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineminus">-  if (!subjectText.contains(msgsubject))</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineplus">+  if (!subjectText.includes(msgsubject))</span>
<a href="#l24.24"></a><span id="l24.24">     throw new Error(&quot;subject text didn't contain the original subject; &quot; +</span>
<a href="#l24.25"></a><span id="l24.25">                     &quot;msgsubject=&quot; +  msgsubject + &quot;, subjectText=&quot; + subjectText);</span>
<a href="#l24.26"></a><span id="l24.26"> </span>
<a href="#l24.27"></a><span id="l24.27">   close_compose_window(compWin, false);</span>
<a href="#l24.28"></a><span id="l24.28">   close_window(msgWin);</span>
<a href="#l24.29"></a><span id="l24.29"> }</span>
<a href="#l24.30"></a><span id="l24.30"> </span>
<a href="#l24.31"></a><span id="l24.31"> /**</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-multipart-related.js</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-multipart-related.js</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineat">@@ -109,17 +109,17 @@ function test_basic_multipart_related() </span>
<a href="#l25.4"></a><span id="l25.4">   let {headers, text} = getMsgHeaders(draftMsg, true);</span>
<a href="#l25.5"></a><span id="l25.5">   assert_equals(headers.get(&quot;&quot;).contentType.type, &quot;multipart/related&quot;);</span>
<a href="#l25.6"></a><span id="l25.6">   assert_equals(headers.get(&quot;1&quot;).contentType.type, &quot;text/html&quot;);</span>
<a href="#l25.7"></a><span id="l25.7">   assert_equals(headers.get(&quot;2&quot;).contentType.type, &quot;image/gif&quot;);</span>
<a href="#l25.8"></a><span id="l25.8">   assert_equals(headers.get(&quot;2&quot;).get(&quot;Content-Transfer-Encoding&quot;), &quot;base64&quot;);</span>
<a href="#l25.9"></a><span id="l25.9">   assert_equals(headers.get(&quot;2&quot;).getRawHeader(&quot;Content-Disposition&quot;)[0],</span>
<a href="#l25.10"></a><span id="l25.10">     &quot;inline; filename=\&quot;arrow-dn.gif\&quot;&quot;);</span>
<a href="#l25.11"></a><span id="l25.11">   let cid = headers.get(&quot;2&quot;).getRawHeader(&quot;Content-ID&quot;)[0].slice(1, -1);</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-  if (!text.get(&quot;1&quot;).contains(&quot;src=\&quot;cid:&quot; + cid + '&quot;')) {</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineplus">+  if (!text.get(&quot;1&quot;).includes(&quot;src=\&quot;cid:&quot; + cid + '&quot;')) {</span>
<a href="#l25.14"></a><span id="l25.14">     throw new Error(&quot;Expected HTML to refer to cid &quot; + cid);</span>
<a href="#l25.15"></a><span id="l25.15">   }</span>
<a href="#l25.16"></a><span id="l25.16">   press_delete(mc); // Delete message</span>
<a href="#l25.17"></a><span id="l25.17"> }</span>
<a href="#l25.18"></a><span id="l25.18"> </span>
<a href="#l25.19"></a><span id="l25.19"> function teardownModule(module) {</span>
<a href="#l25.20"></a><span id="l25.20">   MailServices.accounts.localFoldersServer.rootFolder</span>
<a href="#l25.21"></a><span id="l25.21">               .propagateDelete(draftsFolder, true, null);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1" class="difflineminus">--- a/mail/test/mozmill/composition/test-reply-signature.js</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineplus">+++ b/mail/test/mozmill/composition/test-reply-signature.js</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineat">@@ -89,18 +89,18 @@ function test_sig_strip_false_nonff() {</span>
<a href="#l26.4"></a><span id="l26.4"> function check_sig_strip_works(aRow, aShouldStrip) {</span>
<a href="#l26.5"></a><span id="l26.5">   be_in_folder(folder);</span>
<a href="#l26.6"></a><span id="l26.6">   let msg = select_click_row(aRow);</span>
<a href="#l26.7"></a><span id="l26.7">   assert_selected_and_displayed(mc, msg);</span>
<a href="#l26.8"></a><span id="l26.8"> </span>
<a href="#l26.9"></a><span id="l26.9">   let rwc = open_compose_with_reply();</span>
<a href="#l26.10"></a><span id="l26.10">   let body = get_compose_body(rwc);</span>
<a href="#l26.11"></a><span id="l26.11"> </span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-  if (aShouldStrip &amp;&amp; body.textContent.contains(sig)) {</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineplus">+  if (aShouldStrip &amp;&amp; body.textContent.includes(sig)) {</span>
<a href="#l26.14"></a><span id="l26.14">     throw new Error(&quot;signature was not stripped; body=&quot; + body.textContent);</span>
<a href="#l26.15"></a><span id="l26.15">   }</span>
<a href="#l26.16"></a><span id="l26.16" class="difflineminus">-  else if (!aShouldStrip &amp;&amp; !body.textContent.contains(sig)) {</span>
<a href="#l26.17"></a><span id="l26.17" class="difflineplus">+  else if (!aShouldStrip &amp;&amp; !body.textContent.includes(sig)) {</span>
<a href="#l26.18"></a><span id="l26.18">     throw new Error(&quot;signature stripped; body=&quot; + body.textContent);</span>
<a href="#l26.19"></a><span id="l26.19">   }</span>
<a href="#l26.20"></a><span id="l26.20">   close_compose_window(rwc);</span>
<a href="#l26.21"></a><span id="l26.21"> }</span>
<a href="#l26.22"></a><span id="l26.22"> </span>
<a href="#l26.23"></a><span id="l26.23"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1" class="difflineminus">--- a/mail/test/mozmill/content-policy/test-view-source.js</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineplus">+++ b/mail/test/mozmill/content-policy/test-view-source.js</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineat">@@ -77,29 +77,29 @@ function test_view_source_reload() {</span>
<a href="#l27.4"></a><span id="l27.4">   plan_for_new_window(&quot;navigator:view-source&quot;);</span>
<a href="#l27.5"></a><span id="l27.5">   mc.keypress(null, &quot;U&quot;, {shiftKey: false, accelKey: true});</span>
<a href="#l27.6"></a><span id="l27.6">   let vsc = wait_for_new_window(&quot;navigator:view-source&quot;);</span>
<a href="#l27.7"></a><span id="l27.7"> </span>
<a href="#l27.8"></a><span id="l27.8">   vsc.waitFor(function() vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l27.9"></a><span id="l27.9">               &quot;Timeout waiting for the latin1 view-source document to load.&quot;);</span>
<a href="#l27.10"></a><span id="l27.10"> </span>
<a href="#l27.11"></a><span id="l27.11">   let source = vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;).textContent;</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-  if (!source.contains(contentLatin1))</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineplus">+  if (!source.includes(contentLatin1))</span>
<a href="#l27.14"></a><span id="l27.14">     throw new Error(&quot;View source didn't contain the latin1 text;\n&quot; +</span>
<a href="#l27.15"></a><span id="l27.15">                     contentLatin1 + &quot;\n&quot; + source);</span>
<a href="#l27.16"></a><span id="l27.16"> </span>
<a href="#l27.17"></a><span id="l27.17">   let doc = vsc.e(&quot;content&quot;).contentDocument; // keep a ref to the latin1 doc</span>
<a href="#l27.18"></a><span id="l27.18"> </span>
<a href="#l27.19"></a><span id="l27.19">   vsc.click_menus_in_sequence(vsc.e(&quot;viewmenu-popup&quot;),</span>
<a href="#l27.20"></a><span id="l27.20">     [{id: &quot;charsetMenu&quot;}, {label: &quot;Unicode (UTF-8)&quot;}]);</span>
<a href="#l27.21"></a><span id="l27.21"> </span>
<a href="#l27.22"></a><span id="l27.22">   vsc.waitFor(function() vsc.e(&quot;content&quot;).contentDocument != doc &amp;&amp;</span>
<a href="#l27.23"></a><span id="l27.23">                          vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;) != null,</span>
<a href="#l27.24"></a><span id="l27.24">               &quot;Timeout waiting utf-8 encoded view-source document to load.&quot;);</span>
<a href="#l27.25"></a><span id="l27.25"> </span>
<a href="#l27.26"></a><span id="l27.26">   source = vsc.e(&quot;content&quot;).contentDocument.querySelector(&quot;pre&quot;).textContent;</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineminus">-  if (!source.contains(contentUTF8))</span>
<a href="#l27.28"></a><span id="l27.28" class="difflineplus">+  if (!source.includes(contentUTF8))</span>
<a href="#l27.29"></a><span id="l27.29">     throw new Error(&quot;View source didn't contain the utf-8 text;\n&quot; +</span>
<a href="#l27.30"></a><span id="l27.30">                     contentUTF8 + &quot;\n&quot; + source);</span>
<a href="#l27.31"></a><span id="l27.31"> </span>
<a href="#l27.32"></a><span id="l27.32">   close_window(vsc);</span>
<a href="#l27.33"></a><span id="l27.33"> }</span>
<a href="#l27.34"></a><span id="l27.34"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-about-support.js</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-about-support.js</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineat">@@ -196,28 +196,28 @@ function test_copy_to_clipboard_public()</span>
<a href="#l28.4"></a><span id="l28.4">   // actually copying to it, we just retrieve what would have been copied to it</span>
<a href="#l28.5"></a><span id="l28.5">   let transferable = tab.browser.contentWindow.getClipboardTransferable();</span>
<a href="#l28.6"></a><span id="l28.6">   for (let [, flavor] in Iterator([&quot;text/html&quot;, &quot;text/unicode&quot;])) {</span>
<a href="#l28.7"></a><span id="l28.7">     let data = {};</span>
<a href="#l28.8"></a><span id="l28.8">     transferable.getTransferData(flavor, data, {});</span>
<a href="#l28.9"></a><span id="l28.9">     let text = data.value.QueryInterface(Ci.nsISupportsString).data;</span>
<a href="#l28.10"></a><span id="l28.10"> </span>
<a href="#l28.11"></a><span id="l28.11">     for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-      if (!text.contains(str))</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineplus">+      if (!text.includes(str))</span>
<a href="#l28.14"></a><span id="l28.14">         mark_failure([&quot;Unable to find \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.15"></a><span id="l28.15">     }</span>
<a href="#l28.16"></a><span id="l28.16"> </span>
<a href="#l28.17"></a><span id="l28.17">     for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineminus">-      if (text.contains(str))</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineplus">+      if (text.includes(str))</span>
<a href="#l28.20"></a><span id="l28.20">         mark_failure([&quot;Found \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.21"></a><span id="l28.21">     }</span>
<a href="#l28.22"></a><span id="l28.22"> </span>
<a href="#l28.23"></a><span id="l28.23">     // Check that private data (profile directory) isn't in the output.</span>
<a href="#l28.24"></a><span id="l28.24">     let profD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile).path;</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineminus">-    if (text.contains(profD))</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineplus">+    if (text.includes(profD))</span>
<a href="#l28.27"></a><span id="l28.27">       mark_failure([&quot;Found profile directory in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.28"></a><span id="l28.28">   }</span>
<a href="#l28.29"></a><span id="l28.29">   close_tab(tab);</span>
<a href="#l28.30"></a><span id="l28.30"> }</span>
<a href="#l28.31"></a><span id="l28.31"> </span>
<a href="#l28.32"></a><span id="l28.32"> /**</span>
<a href="#l28.33"></a><span id="l28.33">  * Test (well, sort of) the copy to clipboard function with private data.</span>
<a href="#l28.34"></a><span id="l28.34">  */</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineat">@@ -237,60 +237,60 @@ function test_copy_to_clipboard_private(</span>
<a href="#l28.36"></a><span id="l28.36">   // actually copying to it, we just retrieve what would have been copied to it</span>
<a href="#l28.37"></a><span id="l28.37">   let transferable = tab.browser.contentWindow.getClipboardTransferable();</span>
<a href="#l28.38"></a><span id="l28.38">   for (let [, flavor] in Iterator([&quot;text/html&quot;, &quot;text/unicode&quot;])) {</span>
<a href="#l28.39"></a><span id="l28.39">     let data = {};</span>
<a href="#l28.40"></a><span id="l28.40">     transferable.getTransferData(flavor, data, {});</span>
<a href="#l28.41"></a><span id="l28.41">     let text = data.value.QueryInterface(Ci.nsISupportsString).data;</span>
<a href="#l28.42"></a><span id="l28.42"> </span>
<a href="#l28.43"></a><span id="l28.43">     for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineminus">-      if (!text.contains(str))</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineplus">+      if (!text.includes(str))</span>
<a href="#l28.46"></a><span id="l28.46">         mark_failure([&quot;Unable to find \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.47"></a><span id="l28.47">     }</span>
<a href="#l28.48"></a><span id="l28.48"> </span>
<a href="#l28.49"></a><span id="l28.49">     for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineminus">-      if (text.contains(str))</span>
<a href="#l28.51"></a><span id="l28.51" class="difflineplus">+      if (text.includes(str))</span>
<a href="#l28.52"></a><span id="l28.52">         mark_failure([&quot;Found \&quot;&quot; + str + &quot;\&quot; in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.53"></a><span id="l28.53">     }</span>
<a href="#l28.54"></a><span id="l28.54"> </span>
<a href="#l28.55"></a><span id="l28.55">     // Check that private data (profile directory) is in the output.</span>
<a href="#l28.56"></a><span id="l28.56">     let profD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile).path;</span>
<a href="#l28.57"></a><span id="l28.57" class="difflineminus">-    if (!text.contains(profD))</span>
<a href="#l28.58"></a><span id="l28.58" class="difflineplus">+    if (!text.includes(profD))</span>
<a href="#l28.59"></a><span id="l28.59">       mark_failure([&quot;Unable to find profile directory in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.60"></a><span id="l28.60"> </span>
<a href="#l28.61"></a><span id="l28.61">     // Check that the warning text is in the output.</span>
<a href="#l28.62"></a><span id="l28.62" class="difflineminus">-    if (!text.contains(warningText))</span>
<a href="#l28.63"></a><span id="l28.63" class="difflineplus">+    if (!text.includes(warningText))</span>
<a href="#l28.64"></a><span id="l28.64">       mark_failure([&quot;Unable to find warning text in flavor \&quot;&quot; + flavor + &quot;\&quot;&quot;]);</span>
<a href="#l28.65"></a><span id="l28.65">   }</span>
<a href="#l28.66"></a><span id="l28.66">   close_tab(tab);</span>
<a href="#l28.67"></a><span id="l28.67"> }</span>
<a href="#l28.68"></a><span id="l28.68"> </span>
<a href="#l28.69"></a><span id="l28.69"> /**</span>
<a href="#l28.70"></a><span id="l28.70">  * Test opening the compose window with public data.</span>
<a href="#l28.71"></a><span id="l28.71">  */</span>
<a href="#l28.72"></a><span id="l28.72"> function test_send_via_email_public() {</span>
<a href="#l28.73"></a><span id="l28.73">   let tab = open_about_support();</span>
<a href="#l28.74"></a><span id="l28.74">   let cwc = open_send_via_email(tab);</span>
<a href="#l28.75"></a><span id="l28.75"> </span>
<a href="#l28.76"></a><span id="l28.76">   let contentFrame = cwc.e(&quot;content-frame&quot;);</span>
<a href="#l28.77"></a><span id="l28.77">   let text = contentFrame.contentDocument.body.innerHTML;</span>
<a href="#l28.78"></a><span id="l28.78"> </span>
<a href="#l28.79"></a><span id="l28.79">   for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l28.80"></a><span id="l28.80" class="difflineminus">-    if (!text.contains(str))</span>
<a href="#l28.81"></a><span id="l28.81" class="difflineplus">+    if (!text.includes(str))</span>
<a href="#l28.82"></a><span id="l28.82">       mark_failure([&quot;Unable to find \&quot;&quot; + str + &quot;\&quot; in compose window&quot;]);</span>
<a href="#l28.83"></a><span id="l28.83">   }</span>
<a href="#l28.84"></a><span id="l28.84"> </span>
<a href="#l28.85"></a><span id="l28.85">   for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l28.86"></a><span id="l28.86" class="difflineminus">-    if (text.contains(str))</span>
<a href="#l28.87"></a><span id="l28.87" class="difflineplus">+    if (text.includes(str))</span>
<a href="#l28.88"></a><span id="l28.88">       mark_failure([&quot;Found \&quot;&quot; + str + &quot;\&quot; in compose window&quot;]);</span>
<a href="#l28.89"></a><span id="l28.89">   }</span>
<a href="#l28.90"></a><span id="l28.90"> </span>
<a href="#l28.91"></a><span id="l28.91">   // Check that private data (profile directory) isn't in the output.</span>
<a href="#l28.92"></a><span id="l28.92">   let profD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile).path;</span>
<a href="#l28.93"></a><span id="l28.93" class="difflineminus">-  if (text.contains(profD))</span>
<a href="#l28.94"></a><span id="l28.94" class="difflineplus">+  if (text.includes(profD))</span>
<a href="#l28.95"></a><span id="l28.95">     mark_failure([&quot;Found profile directory in compose window&quot;]);</span>
<a href="#l28.96"></a><span id="l28.96"> </span>
<a href="#l28.97"></a><span id="l28.97">   close_compose_window(cwc);</span>
<a href="#l28.98"></a><span id="l28.98">   close_tab(tab);</span>
<a href="#l28.99"></a><span id="l28.99"> }</span>
<a href="#l28.100"></a><span id="l28.100"> </span>
<a href="#l28.101"></a><span id="l28.101"> /**</span>
<a href="#l28.102"></a><span id="l28.102">  * Test opening the compose window with private data.</span>
<a href="#l28.103"></a><span id="l28.103" class="difflineat">@@ -308,29 +308,29 @@ function test_send_via_email_private() {</span>
<a href="#l28.104"></a><span id="l28.104">   wait_for_content_tab_element_display_value(tab, privateElem, &quot;inline&quot;);</span>
<a href="#l28.105"></a><span id="l28.105"> </span>
<a href="#l28.106"></a><span id="l28.106">   let cwc = open_send_via_email(tab);</span>
<a href="#l28.107"></a><span id="l28.107"> </span>
<a href="#l28.108"></a><span id="l28.108">   let contentFrame = cwc.e(&quot;content-frame&quot;);</span>
<a href="#l28.109"></a><span id="l28.109">   let text = contentFrame.contentDocument.body.innerHTML;</span>
<a href="#l28.110"></a><span id="l28.110"> </span>
<a href="#l28.111"></a><span id="l28.111">   for (let [, str] in Iterator(ABOUT_SUPPORT_STRINGS)) {</span>
<a href="#l28.112"></a><span id="l28.112" class="difflineminus">-    if (!text.contains(str))</span>
<a href="#l28.113"></a><span id="l28.113" class="difflineplus">+    if (!text.includes(str))</span>
<a href="#l28.114"></a><span id="l28.114">       mark_failure([&quot;Unable to find \&quot;&quot; + str + &quot;\&quot; in compose window&quot;]);</span>
<a href="#l28.115"></a><span id="l28.115">   }</span>
<a href="#l28.116"></a><span id="l28.116"> </span>
<a href="#l28.117"></a><span id="l28.117">   for (let [, str] in Iterator(ABOUT_SUPPORT_ERROR_STRINGS)) {</span>
<a href="#l28.118"></a><span id="l28.118" class="difflineminus">-    if (text.contains(str))</span>
<a href="#l28.119"></a><span id="l28.119" class="difflineplus">+    if (text.includes(str))</span>
<a href="#l28.120"></a><span id="l28.120">       mark_failure([&quot;Found \&quot;&quot; + str + &quot;\&quot; in compose window&quot;]);</span>
<a href="#l28.121"></a><span id="l28.121">   }</span>
<a href="#l28.122"></a><span id="l28.122"> </span>
<a href="#l28.123"></a><span id="l28.123">   // Check that private data (profile directory) is in the output.</span>
<a href="#l28.124"></a><span id="l28.124">   let profD = Services.dirsvc.get(&quot;ProfD&quot;, Ci.nsIFile).path;</span>
<a href="#l28.125"></a><span id="l28.125" class="difflineminus">-  if (!text.contains(profD))</span>
<a href="#l28.126"></a><span id="l28.126" class="difflineplus">+  if (!text.includes(profD))</span>
<a href="#l28.127"></a><span id="l28.127">     mark_failure([&quot;Unable to find profile directory in compose window&quot;]);</span>
<a href="#l28.128"></a><span id="l28.128"> </span>
<a href="#l28.129"></a><span id="l28.129">   // Check that the warning text is in the output.</span>
<a href="#l28.130"></a><span id="l28.130" class="difflineminus">-  if (!text.contains(warningText))</span>
<a href="#l28.131"></a><span id="l28.131" class="difflineplus">+  if (!text.includes(warningText))</span>
<a href="#l28.132"></a><span id="l28.132">     mark_failure([&quot;Unable to find warning text in compose window&quot;]);</span>
<a href="#l28.133"></a><span id="l28.133"> </span>
<a href="#l28.134"></a><span id="l28.134">   close_compose_window(cwc);</span>
<a href="#l28.135"></a><span id="l28.135">   close_tab(tab);</span>
<a href="#l28.136"></a><span id="l28.136"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1" class="difflineminus">--- a/mail/test/mozmill/content-tabs/test-plugin-crashing.js</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineplus">+++ b/mail/test/mozmill/content-tabs/test-plugin-crashing.js</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineat">@@ -54,17 +54,17 @@ function setupModule(module) {</span>
<a href="#l29.4"></a><span id="l29.4">     // Crashreporter is not working.</span>
<a href="#l29.5"></a><span id="l29.5">   }</span>
<a href="#l29.6"></a><span id="l29.6"> </span>
<a href="#l29.7"></a><span id="l29.7"> </span>
<a href="#l29.8"></a><span id="l29.8">   /* Bug 689580 - these crash tests fail randomly on 64-bit OSX.  We'll</span>
<a href="#l29.9"></a><span id="l29.9">    * disable them for now, until we can figure out what's going on.</span>
<a href="#l29.10"></a><span id="l29.10">    */</span>
<a href="#l29.11"></a><span id="l29.11">   let is64BitOSX = (mc.mozmillModule.isMac &amp;&amp;</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-                    Services.appinfo.XPCOMABI.contains(&quot;x86_64-&quot;));</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineplus">+                    Services.appinfo.XPCOMABI.includes(&quot;x86_64-&quot;));</span>
<a href="#l29.14"></a><span id="l29.14"> </span>
<a href="#l29.15"></a><span id="l29.15">   // These tests are no good if the crash reporter is disabled, or if</span>
<a href="#l29.16"></a><span id="l29.16">   // we don't have out-of-process plugins enabled.</span>
<a href="#l29.17"></a><span id="l29.17">   if (is64BitOSX ||  // XXX Remove once Bug 689580 is resolved</span>
<a href="#l29.18"></a><span id="l29.18">       !plugins_run_in_separate_processes(mc) || !crashReporter ||</span>
<a href="#l29.19"></a><span id="l29.19">       !crashReporter.enabled) {</span>
<a href="#l29.20"></a><span id="l29.20">     let funcsToSkip = [test_can_crash_plugin,</span>
<a href="#l29.21"></a><span id="l29.21">                        test_crashed_plugin_notification_bar,</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-message-header.js</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineat">@@ -870,17 +870,17 @@ function subtest_addresses_in_tooltip_te</span>
<a href="#l30.4"></a><span id="l30.4">   let headerBoxElement = mc.e(aHeaderBox);</span>
<a href="#l30.5"></a><span id="l30.5">   let moreIndicator = headerBoxElement.more;</span>
<a href="#l30.6"></a><span id="l30.6">   let tooltipText = moreIndicator.getAttribute(&quot;tooltiptext&quot;);</span>
<a href="#l30.7"></a><span id="l30.7">   let maxTooltipAddrsNum = headerBoxElement.maxAddressesInMoreTooltipValue;</span>
<a href="#l30.8"></a><span id="l30.8">   let addrsNumInTooltip = 0;</span>
<a href="#l30.9"></a><span id="l30.9"> </span>
<a href="#l30.10"></a><span id="l30.10">   for (let i = aShownAddrsNum; (i &lt; numAddresses) &amp;&amp;</span>
<a href="#l30.11"></a><span id="l30.11">                                (i &lt; maxTooltipAddrsNum + aShownAddrsNum); i++) {</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-    assert_true(tooltipText.contains(fullNames.value[i]), fullNames.value[i]);</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineplus">+    assert_true(tooltipText.includes(fullNames.value[i]), fullNames.value[i]);</span>
<a href="#l30.14"></a><span id="l30.14">     addrsNumInTooltip += 1;</span>
<a href="#l30.15"></a><span id="l30.15">   }</span>
<a href="#l30.16"></a><span id="l30.16"> </span>
<a href="#l30.17"></a><span id="l30.17">   if (aHiddenAddrsNum &lt; maxTooltipAddrsNum) {</span>
<a href="#l30.18"></a><span id="l30.18">     assert_equals(aHiddenAddrsNum, addrsNumInTooltip);</span>
<a href="#l30.19"></a><span id="l30.19">   }</span>
<a href="#l30.20"></a><span id="l30.20">   else {</span>
<a href="#l30.21"></a><span id="l30.21">     assert_equals(maxTooltipAddrsNum, addrsNumInTooltip);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-reply-identity.js</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-reply-identity.js</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineat">@@ -90,17 +90,17 @@ var addIdentitiesAndFolder = function() </span>
<a href="#l31.4"></a><span id="l31.4">   let account = MailServices.accounts.createAccount();</span>
<a href="#l31.5"></a><span id="l31.5">   account.incomingServer = server;</span>
<a href="#l31.6"></a><span id="l31.6">   account.addIdentity(identity);</span>
<a href="#l31.7"></a><span id="l31.7">   account.addIdentity(identity2);</span>
<a href="#l31.8"></a><span id="l31.8"> }</span>
<a href="#l31.9"></a><span id="l31.9"> </span>
<a href="#l31.10"></a><span id="l31.10"> var checkReply = function (replyWin, expectedFromEmail) {</span>
<a href="#l31.11"></a><span id="l31.11">   let identityList = replyWin.e(&quot;msgIdentity&quot;);</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-  if (!identityList.selectedItem.label.contains(expectedFromEmail))</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineplus">+  if (!identityList.selectedItem.label.includes(expectedFromEmail))</span>
<a href="#l31.14"></a><span id="l31.14">     throw new Error(&quot;The From address is not correctly selected! Expected: &quot; +</span>
<a href="#l31.15"></a><span id="l31.15">                     expectedFromEmail + &quot;; Actual: &quot;  +</span>
<a href="#l31.16"></a><span id="l31.16">                     identityList.selectedItem.label);</span>
<a href="#l31.17"></a><span id="l31.17"> }</span>
<a href="#l31.18"></a><span id="l31.18"> </span>
<a href="#l31.19"></a><span id="l31.19"> function test_reply_no_matching_identity() {</span>
<a href="#l31.20"></a><span id="l31.20">   be_in_folder(testFolder);</span>
<a href="#l31.21"></a><span id="l31.21"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-reply-to-list-from-address-selection.js</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineat">@@ -94,14 +94,14 @@ function test_Reply_To_List_From_Address</span>
<a href="#l32.4"></a><span id="l32.4">   let curMessage = select_click_row(0);</span>
<a href="#l32.5"></a><span id="l32.5">   assert_selected_and_displayed(mc, curMessage);</span>
<a href="#l32.6"></a><span id="l32.6"> </span>
<a href="#l32.7"></a><span id="l32.7">   replyToListWindow = composeHelper.open_compose_with_reply_to_list();</span>
<a href="#l32.8"></a><span id="l32.8"> </span>
<a href="#l32.9"></a><span id="l32.9">   var identityList = replyToListWindow.e(&quot;msgIdentity&quot;);</span>
<a href="#l32.10"></a><span id="l32.10"> </span>
<a href="#l32.11"></a><span id="l32.11">   // see if it's the correct identity selected</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-  if (!identityList.selectedItem.label.contains(identityString1))</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineplus">+  if (!identityList.selectedItem.label.includes(identityString1))</span>
<a href="#l32.14"></a><span id="l32.14">     throw new Error(&quot;The From address is not correctly selected! Expected: &quot;+</span>
<a href="#l32.15"></a><span id="l32.15">                     identityString1 + &quot;; Actual: &quot;  +</span>
<a href="#l32.16"></a><span id="l32.16">                     identityList.selectedItem.label);</span>
<a href="#l32.17"></a><span id="l32.17"> }</span>
<a href="#l32.18"></a><span id="l32.18"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1" class="difflineminus">--- a/mail/test/mozmill/message-header/test-return-receipt.js</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineplus">+++ b/mail/test/mozmill/message-header/test-return-receipt.js</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineat">@@ -91,20 +91,20 @@ function assert_mdn_shown(shouldShow) {</span>
<a href="#l33.4"></a><span id="l33.4"> }</span>
<a href="#l33.5"></a><span id="l33.5"> </span>
<a href="#l33.6"></a><span id="l33.6"> /**</span>
<a href="#l33.7"></a><span id="l33.7">  * Utility function to make sure the notification contains a certain text.</span>
<a href="#l33.8"></a><span id="l33.8">  */</span>
<a href="#l33.9"></a><span id="l33.9"> function assert_mdn_text_contains(text, shouldContain) {</span>
<a href="#l33.10"></a><span id="l33.10">   let nb = mc.window.document.getElementById(kBoxId);</span>
<a href="#l33.11"></a><span id="l33.11">   let notificationText = nb.currentNotification.label;</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-  if (shouldContain &amp;&amp; !notificationText.contains(text))</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineplus">+  if (shouldContain &amp;&amp; !notificationText.includes(text))</span>
<a href="#l33.14"></a><span id="l33.14">     throw new Error(&quot;mdnBar should contain text=&quot; + text +</span>
<a href="#l33.15"></a><span id="l33.15">                     &quot;; notificationText=&quot; + notificationText);</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineminus">-  if (!shouldContain &amp;&amp; notificationText.contains(text))</span>
<a href="#l33.17"></a><span id="l33.17" class="difflineplus">+  if (!shouldContain &amp;&amp; notificationText.includes(text))</span>
<a href="#l33.18"></a><span id="l33.18">     throw new Error(&quot;mdnBar shouldn't contain text=&quot; + text +</span>
<a href="#l33.19"></a><span id="l33.19">                     &quot;; notificationText=&quot; + notificationText);</span>
<a href="#l33.20"></a><span id="l33.20"> }</span>
<a href="#l33.21"></a><span id="l33.21"> </span>
<a href="#l33.22"></a><span id="l33.22"> /**</span>
<a href="#l33.23"></a><span id="l33.23">  * Test that return receipts are not shown when Disposition-Notification-To</span>
<a href="#l33.24"></a><span id="l33.24">  * and Return-Receipt-To isn't set.</span>
<a href="#l33.25"></a><span id="l33.25">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1" class="difflineminus">--- a/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineplus">+++ b/mail/test/mozmill/migration-to-rdf-ui-2/test-migrate-to-rdf-ui-2.js</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineat">@@ -57,11 +57,11 @@ function test_width_persisted() {</span>
<a href="#l34.4"></a><span id="l34.4"> function test_throbber_removed() {</span>
<a href="#l34.5"></a><span id="l34.5">   let currentSet;</span>
<a href="#l34.6"></a><span id="l34.6"> </span>
<a href="#l34.7"></a><span id="l34.7">   if (mc.mozmillModule.isMac)</span>
<a href="#l34.8"></a><span id="l34.8">     currentSet = mc.e(&quot;mail-bar3&quot;).getAttribute(&quot;currentset&quot;);</span>
<a href="#l34.9"></a><span id="l34.9">   else</span>
<a href="#l34.10"></a><span id="l34.10">     currentSet = mc.e(&quot;mail-toolbar-menubar2&quot;).getAttribute(&quot;currentset&quot;);</span>
<a href="#l34.11"></a><span id="l34.11"> </span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-  assert_false(currentSet.contains(&quot;throbber-box&quot;),</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineplus">+  assert_false(currentSet.includes(&quot;throbber-box&quot;),</span>
<a href="#l34.14"></a><span id="l34.14">                &quot;We found a throbber-box where we shouldn't have.&quot;);</span>
<a href="#l34.15"></a><span id="l34.15"> }</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1" class="difflineminus">--- a/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineplus">+++ b/mail/test/mozmill/newmailaccount/test-newmailaccount.js</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineat">@@ -447,21 +447,21 @@ function subtest_html_characters_and_amp</span>
<a href="#l35.4"></a><span id="l35.4">   wait_for_search_results(w);</span>
<a href="#l35.5"></a><span id="l35.5"> </span>
<a href="#l35.6"></a><span id="l35.6">   let displayedName = w.e(&quot;FirstAndLastName&quot;).innerHTML;</span>
<a href="#l35.7"></a><span id="l35.7"> </span>
<a href="#l35.8"></a><span id="l35.8">   assert_not_equals(CLEVER_STRING, displayedName);</span>
<a href="#l35.9"></a><span id="l35.9">   // &amp; should have been replaced with &amp;amp;, and the</span>
<a href="#l35.10"></a><span id="l35.10">   // greater than / less than characters with &amp;gt; and</span>
<a href="#l35.11"></a><span id="l35.11">   // &amp;lt; respectively.</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-  assert_true(displayedName.contains(&quot;&amp;amp;&quot;),</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineplus">+  assert_true(displayedName.includes(&quot;&amp;amp;&quot;),</span>
<a href="#l35.14"></a><span id="l35.14">               &quot;Should have eliminated ampersands&quot;);</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineminus">-  assert_true(displayedName.contains(&quot;&amp;gt;&quot;),</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineplus">+  assert_true(displayedName.includes(&quot;&amp;gt;&quot;),</span>
<a href="#l35.17"></a><span id="l35.17">               &quot;Should have eliminated greater-than signs&quot;);</span>
<a href="#l35.18"></a><span id="l35.18" class="difflineminus">-  assert_true(displayedName.contains(&quot;&amp;lt;&quot;),</span>
<a href="#l35.19"></a><span id="l35.19" class="difflineplus">+  assert_true(displayedName.includes(&quot;&amp;lt;&quot;),</span>
<a href="#l35.20"></a><span id="l35.20">               &quot;Should have eliminated less-than signs&quot;);</span>
<a href="#l35.21"></a><span id="l35.21"> }</span>
<a href="#l35.22"></a><span id="l35.22"> </span>
<a href="#l35.23"></a><span id="l35.23"> /**</span>
<a href="#l35.24"></a><span id="l35.24">  * Test that only the terms of service and privacy links for selected</span>
<a href="#l35.25"></a><span id="l35.25">  * providers are shown in the disclaimer.</span>
<a href="#l35.26"></a><span id="l35.26">  */</span>
<a href="#l35.27"></a><span id="l35.27"> function test_show_tos_privacy_links_for_selected_providers() {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1" class="difflineminus">--- a/mail/test/mozmill/notification/test-notification.js</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineplus">+++ b/mail/test/mozmill/notification/test-notification.js</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineat">@@ -226,30 +226,30 @@ test_new_mail_received_causes_notificati</span>
<a href="#l36.4"></a><span id="l36.4">  */</span>
<a href="#l36.5"></a><span id="l36.5"> function test_show_oldest_new_unread_since_last_notification() {</span>
<a href="#l36.6"></a><span id="l36.6">   let notifyFirst = &quot;This should notify first&quot;;</span>
<a href="#l36.7"></a><span id="l36.7">   assert_false(gMockAlertsService._didNotify, &quot;Should not have notified yet.&quot;);</span>
<a href="#l36.8"></a><span id="l36.8">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.9"></a><span id="l36.9">                                       [{count: 1,</span>
<a href="#l36.10"></a><span id="l36.10">                                         body: {body: notifyFirst}}])</span>
<a href="#l36.11"></a><span id="l36.11">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified.&quot;);</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(notifyFirst, 1),</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(notifyFirst, 1),</span>
<a href="#l36.14"></a><span id="l36.14">               &quot;Should have notified for the first message&quot;);</span>
<a href="#l36.15"></a><span id="l36.15"> </span>
<a href="#l36.16"></a><span id="l36.16">   be_in_folder(gFolder);</span>
<a href="#l36.17"></a><span id="l36.17">   gFolder.biffState = Ci.nsIMsgFolder.nsMsgBiffState_NoMail;</span>
<a href="#l36.18"></a><span id="l36.18">   gMockAlertsService._reset();</span>
<a href="#l36.19"></a><span id="l36.19"> </span>
<a href="#l36.20"></a><span id="l36.20">   let notifySecond = &quot;This should notify second&quot;;</span>
<a href="#l36.21"></a><span id="l36.21">   assert_false(gMockAlertsService._didNotify, &quot;Should not have notified yet.&quot;);</span>
<a href="#l36.22"></a><span id="l36.22">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.23"></a><span id="l36.23">                                       [{count: 1,</span>
<a href="#l36.24"></a><span id="l36.24">                                         body: {body: notifySecond}}]);</span>
<a href="#l36.25"></a><span id="l36.25">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified.&quot;);</span>
<a href="#l36.26"></a><span id="l36.26" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(notifySecond, 1),</span>
<a href="#l36.27"></a><span id="l36.27" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(notifySecond, 1),</span>
<a href="#l36.28"></a><span id="l36.28">               &quot;Should have notified for the second message&quot;);</span>
<a href="#l36.29"></a><span id="l36.29"> }</span>
<a href="#l36.30"></a><span id="l36.30"> test_show_oldest_new_unread_since_last_notification.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.31"></a><span id="l36.31"> </span>
<a href="#l36.32"></a><span id="l36.32"> /**</span>
<a href="#l36.33"></a><span id="l36.33">  * Test that notifications work across different accounts.</span>
<a href="#l36.34"></a><span id="l36.34">  */</span>
<a href="#l36.35"></a><span id="l36.35"> function test_notification_works_across_accounts() {</span>
<a href="#l36.36"></a><span id="l36.36" class="difflineat">@@ -297,33 +297,33 @@ test_notifications_independent_across_ac</span>
<a href="#l36.37"></a><span id="l36.37">  */</span>
<a href="#l36.38"></a><span id="l36.38"> function test_show_subject() {</span>
<a href="#l36.39"></a><span id="l36.39">   let subject = &quot;This should be displayed&quot;;</span>
<a href="#l36.40"></a><span id="l36.40">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.41"></a><span id="l36.41">                                       [{count: 1,</span>
<a href="#l36.42"></a><span id="l36.42">                                         subject: subject</span>
<a href="#l36.43"></a><span id="l36.43">                                        }]);</span>
<a href="#l36.44"></a><span id="l36.44">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.45"></a><span id="l36.45" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(subject),</span>
<a href="#l36.46"></a><span id="l36.46" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(subject),</span>
<a href="#l36.47"></a><span id="l36.47">               &quot;Should have displayed the subject&quot;);</span>
<a href="#l36.48"></a><span id="l36.48"> }</span>
<a href="#l36.49"></a><span id="l36.49"> test_show_subject.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.50"></a><span id="l36.50"> </span>
<a href="#l36.51"></a><span id="l36.51"> /**</span>
<a href="#l36.52"></a><span id="l36.52">  * Test that we can hide the message subject in the notification.</span>
<a href="#l36.53"></a><span id="l36.53">  */</span>
<a href="#l36.54"></a><span id="l36.54"> function test_hide_subject() {</span>
<a href="#l36.55"></a><span id="l36.55">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_subject&quot;, false);</span>
<a href="#l36.56"></a><span id="l36.56">   let subject = &quot;This should not be displayed&quot;;</span>
<a href="#l36.57"></a><span id="l36.57">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.58"></a><span id="l36.58">                                       [{count: 1,</span>
<a href="#l36.59"></a><span id="l36.59">                                         subject: subject</span>
<a href="#l36.60"></a><span id="l36.60">                                        }]);</span>
<a href="#l36.61"></a><span id="l36.61">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.62"></a><span id="l36.62" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(subject),</span>
<a href="#l36.63"></a><span id="l36.63" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(subject),</span>
<a href="#l36.64"></a><span id="l36.64">                 &quot;Should not have displayed the subject&quot;);</span>
<a href="#l36.65"></a><span id="l36.65"> }</span>
<a href="#l36.66"></a><span id="l36.66"> test_hide_subject.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.67"></a><span id="l36.67"> </span>
<a href="#l36.68"></a><span id="l36.68"> /**</span>
<a href="#l36.69"></a><span id="l36.69">  * Test that we can show just the message sender in the notification.</span>
<a href="#l36.70"></a><span id="l36.70">  */</span>
<a href="#l36.71"></a><span id="l36.71"> function test_show_only_subject() {</span>
<a href="#l36.72"></a><span id="l36.72" class="difflineat">@@ -336,52 +336,52 @@ function test_show_only_subject() {</span>
<a href="#l36.73"></a><span id="l36.73">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l36.74"></a><span id="l36.74"> </span>
<a href="#l36.75"></a><span id="l36.75">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.76"></a><span id="l36.76">                                       [{count: 1,</span>
<a href="#l36.77"></a><span id="l36.77">                                         from: sender,</span>
<a href="#l36.78"></a><span id="l36.78">                                         subject: subject,</span>
<a href="#l36.79"></a><span id="l36.79">                                         body: {body: messageBody}}]);</span>
<a href="#l36.80"></a><span id="l36.80">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.81"></a><span id="l36.81" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(subject),</span>
<a href="#l36.82"></a><span id="l36.82" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(subject),</span>
<a href="#l36.83"></a><span id="l36.83">               &quot;Should have displayed the subject&quot;);</span>
<a href="#l36.84"></a><span id="l36.84" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(messageBody),</span>
<a href="#l36.85"></a><span id="l36.85" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(messageBody),</span>
<a href="#l36.86"></a><span id="l36.86">                 &quot;Should not have displayed the preview&quot;);</span>
<a href="#l36.87"></a><span id="l36.87" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(sender[0]),</span>
<a href="#l36.88"></a><span id="l36.88" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(sender[0]),</span>
<a href="#l36.89"></a><span id="l36.89">                 &quot;Should not have displayed the sender&quot;);</span>
<a href="#l36.90"></a><span id="l36.90"> </span>
<a href="#l36.91"></a><span id="l36.91"> }</span>
<a href="#l36.92"></a><span id="l36.92"> test_show_only_subject.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.93"></a><span id="l36.93"> </span>
<a href="#l36.94"></a><span id="l36.94"> </span>
<a href="#l36.95"></a><span id="l36.95"> /**</span>
<a href="#l36.96"></a><span id="l36.96">  * Test that we can show the message sender in the notification.</span>
<a href="#l36.97"></a><span id="l36.97">  */</span>
<a href="#l36.98"></a><span id="l36.98"> function test_show_sender() {</span>
<a href="#l36.99"></a><span id="l36.99">   let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l36.100"></a><span id="l36.100">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.101"></a><span id="l36.101">                                       [{count: 1,</span>
<a href="#l36.102"></a><span id="l36.102">                                         from: sender}]);</span>
<a href="#l36.103"></a><span id="l36.103">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.104"></a><span id="l36.104" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(sender[0]),</span>
<a href="#l36.105"></a><span id="l36.105" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(sender[0]),</span>
<a href="#l36.106"></a><span id="l36.106">               &quot;Should have displayed the sender&quot;);</span>
<a href="#l36.107"></a><span id="l36.107"> }</span>
<a href="#l36.108"></a><span id="l36.108"> test_show_sender.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.109"></a><span id="l36.109"> </span>
<a href="#l36.110"></a><span id="l36.110"> /**</span>
<a href="#l36.111"></a><span id="l36.111">  * Test that we can hide the message sender in the notification.</span>
<a href="#l36.112"></a><span id="l36.112">  */</span>
<a href="#l36.113"></a><span id="l36.113"> function test_hide_sender() {</span>
<a href="#l36.114"></a><span id="l36.114">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_sender&quot;, false);</span>
<a href="#l36.115"></a><span id="l36.115">   let sender = [&quot;John Cleese&quot;, &quot;john@cleese.invalid&quot;];</span>
<a href="#l36.116"></a><span id="l36.116">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.117"></a><span id="l36.117">                                       [{count: 1,</span>
<a href="#l36.118"></a><span id="l36.118">                                         from: sender}]);</span>
<a href="#l36.119"></a><span id="l36.119">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.120"></a><span id="l36.120" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(sender[0]),</span>
<a href="#l36.121"></a><span id="l36.121" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(sender[0]),</span>
<a href="#l36.122"></a><span id="l36.122">                 &quot;Should not have displayed the sender&quot;);</span>
<a href="#l36.123"></a><span id="l36.123"> }</span>
<a href="#l36.124"></a><span id="l36.124"> test_hide_sender.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.125"></a><span id="l36.125"> </span>
<a href="#l36.126"></a><span id="l36.126"> /**</span>
<a href="#l36.127"></a><span id="l36.127">  * Test that we can show just the message sender in the notification.</span>
<a href="#l36.128"></a><span id="l36.128">  */</span>
<a href="#l36.129"></a><span id="l36.129"> function test_show_only_sender() {</span>
<a href="#l36.130"></a><span id="l36.130" class="difflineat">@@ -394,52 +394,52 @@ function test_show_only_sender() {</span>
<a href="#l36.131"></a><span id="l36.131">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l36.132"></a><span id="l36.132"> </span>
<a href="#l36.133"></a><span id="l36.133">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.134"></a><span id="l36.134">                                       [{count: 1,</span>
<a href="#l36.135"></a><span id="l36.135">                                         from: sender,</span>
<a href="#l36.136"></a><span id="l36.136">                                         subject: subject,</span>
<a href="#l36.137"></a><span id="l36.137">                                         body: {body: messageBody}}]);</span>
<a href="#l36.138"></a><span id="l36.138">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.139"></a><span id="l36.139" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(sender[0]),</span>
<a href="#l36.140"></a><span id="l36.140" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(sender[0]),</span>
<a href="#l36.141"></a><span id="l36.141">               &quot;Should have displayed the sender&quot;);</span>
<a href="#l36.142"></a><span id="l36.142" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(messageBody),</span>
<a href="#l36.143"></a><span id="l36.143" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(messageBody),</span>
<a href="#l36.144"></a><span id="l36.144">                 &quot;Should not have displayed the preview&quot;);</span>
<a href="#l36.145"></a><span id="l36.145" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(subject),</span>
<a href="#l36.146"></a><span id="l36.146" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(subject),</span>
<a href="#l36.147"></a><span id="l36.147">                 &quot;Should not have displayed the subject&quot;);</span>
<a href="#l36.148"></a><span id="l36.148"> </span>
<a href="#l36.149"></a><span id="l36.149"> }</span>
<a href="#l36.150"></a><span id="l36.150"> test_show_only_sender.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.151"></a><span id="l36.151"> </span>
<a href="#l36.152"></a><span id="l36.152"> /**</span>
<a href="#l36.153"></a><span id="l36.153">  * Test that we can show the message preview in the notification.</span>
<a href="#l36.154"></a><span id="l36.154">  */</span>
<a href="#l36.155"></a><span id="l36.155"> function test_show_preview() {</span>
<a href="#l36.156"></a><span id="l36.156">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_preview&quot;, true);</span>
<a href="#l36.157"></a><span id="l36.157">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l36.158"></a><span id="l36.158">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.159"></a><span id="l36.159">                                       [{count: 1,</span>
<a href="#l36.160"></a><span id="l36.160">                                         body: {body: messageBody}}]);</span>
<a href="#l36.161"></a><span id="l36.161">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.162"></a><span id="l36.162" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(messageBody),</span>
<a href="#l36.163"></a><span id="l36.163" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(messageBody),</span>
<a href="#l36.164"></a><span id="l36.164">               &quot;Should have displayed the preview&quot;);</span>
<a href="#l36.165"></a><span id="l36.165"> }</span>
<a href="#l36.166"></a><span id="l36.166"> test_show_preview.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.167"></a><span id="l36.167"> </span>
<a href="#l36.168"></a><span id="l36.168"> /**</span>
<a href="#l36.169"></a><span id="l36.169">  * Test that we can hide the message preview in the notification.</span>
<a href="#l36.170"></a><span id="l36.170">  */</span>
<a href="#l36.171"></a><span id="l36.171"> function test_hide_preview() {</span>
<a href="#l36.172"></a><span id="l36.172">   Services.prefs.setBoolPref(&quot;mail.biff.alert.show_preview&quot;, false);</span>
<a href="#l36.173"></a><span id="l36.173">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l36.174"></a><span id="l36.174">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.175"></a><span id="l36.175">                                       [{count: 1,</span>
<a href="#l36.176"></a><span id="l36.176">                                         body: {body: messageBody}}]);</span>
<a href="#l36.177"></a><span id="l36.177">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.178"></a><span id="l36.178" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(messageBody),</span>
<a href="#l36.179"></a><span id="l36.179" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(messageBody),</span>
<a href="#l36.180"></a><span id="l36.180">                 &quot;Should not have displayed the preview&quot;);</span>
<a href="#l36.181"></a><span id="l36.181"> }</span>
<a href="#l36.182"></a><span id="l36.182"> test_hide_preview.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.183"></a><span id="l36.183"> </span>
<a href="#l36.184"></a><span id="l36.184"> /**</span>
<a href="#l36.185"></a><span id="l36.185">  * Test that we can show justthe message preview in the notification.</span>
<a href="#l36.186"></a><span id="l36.186">  */</span>
<a href="#l36.187"></a><span id="l36.187"> function test_show_only_preview() {</span>
<a href="#l36.188"></a><span id="l36.188" class="difflineat">@@ -451,21 +451,21 @@ function test_show_only_preview() {</span>
<a href="#l36.189"></a><span id="l36.189">   let subject = &quot;This should not be displayed&quot;;</span>
<a href="#l36.190"></a><span id="l36.190">   let messageBody = &quot;My message preview&quot;;</span>
<a href="#l36.191"></a><span id="l36.191">   make_gradually_newer_sets_in_folder(gFolder,</span>
<a href="#l36.192"></a><span id="l36.192">                                       [{count: 1,</span>
<a href="#l36.193"></a><span id="l36.193">                                         from: sender,</span>
<a href="#l36.194"></a><span id="l36.194">                                         subject: subject,</span>
<a href="#l36.195"></a><span id="l36.195">                                         body: {body: messageBody}}]);</span>
<a href="#l36.196"></a><span id="l36.196">   assert_true(gMockAlertsService._didNotify, &quot;Should have notified&quot;);</span>
<a href="#l36.197"></a><span id="l36.197" class="difflineminus">-  assert_true(gMockAlertsService._text.contains(messageBody),</span>
<a href="#l36.198"></a><span id="l36.198" class="difflineplus">+  assert_true(gMockAlertsService._text.includes(messageBody),</span>
<a href="#l36.199"></a><span id="l36.199">               &quot;Should have displayed the preview: &quot; + gMockAlertsService._text);</span>
<a href="#l36.200"></a><span id="l36.200" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(sender[0]),</span>
<a href="#l36.201"></a><span id="l36.201" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(sender[0]),</span>
<a href="#l36.202"></a><span id="l36.202">                 &quot;Should not have displayed the sender&quot;);</span>
<a href="#l36.203"></a><span id="l36.203" class="difflineminus">-  assert_true(!gMockAlertsService._text.contains(subject),</span>
<a href="#l36.204"></a><span id="l36.204" class="difflineplus">+  assert_true(!gMockAlertsService._text.includes(subject),</span>
<a href="#l36.205"></a><span id="l36.205">                 &quot;Should not have displayed the subject&quot;);</span>
<a href="#l36.206"></a><span id="l36.206"> }</span>
<a href="#l36.207"></a><span id="l36.207"> test_show_only_preview.EXCLUDED_PLATFORMS = ['winnt', 'darwin'];</span>
<a href="#l36.208"></a><span id="l36.208"> </span>
<a href="#l36.209"></a><span id="l36.209"> /**</span>
<a href="#l36.210"></a><span id="l36.210">  * Test that we can receive notifications even when the biff state of</span>
<a href="#l36.211"></a><span id="l36.211">  * the folder has not been changed.</span>
<a href="#l36.212"></a><span id="l36.212">  */</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-content-tab-helpers.js</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineat">@@ -337,27 +337,27 @@ function wait_for_content_tab_element_di</span>
<a href="#l37.4"></a><span id="l37.4">   }</span>
<a href="#l37.5"></a><span id="l37.5"> }</span>
<a href="#l37.6"></a><span id="l37.6"> </span>
<a href="#l37.7"></a><span id="l37.7"> /**</span>
<a href="#l37.8"></a><span id="l37.8">  * Asserts that the given text is present on the content tab's page.</span>
<a href="#l37.9"></a><span id="l37.9">  */</span>
<a href="#l37.10"></a><span id="l37.10"> function assert_content_tab_text_present(aTab, aText) {</span>
<a href="#l37.11"></a><span id="l37.11">   let html = aTab.browser.contentDocument.documentElement.innerHTML;</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-  if (!html.contains(aText)) {</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineplus">+  if (!html.includes(aText)) {</span>
<a href="#l37.14"></a><span id="l37.14">     mark_failure([&quot;Unable to find string \&quot;&quot; + aText + &quot;\&quot; on the content tab's page&quot;]);</span>
<a href="#l37.15"></a><span id="l37.15">   }</span>
<a href="#l37.16"></a><span id="l37.16"> }</span>
<a href="#l37.17"></a><span id="l37.17"> </span>
<a href="#l37.18"></a><span id="l37.18"> /**</span>
<a href="#l37.19"></a><span id="l37.19">  * Asserts that the given text is absent on the content tab's page.</span>
<a href="#l37.20"></a><span id="l37.20">  */</span>
<a href="#l37.21"></a><span id="l37.21"> function assert_content_tab_text_absent(aTab, aText) {</span>
<a href="#l37.22"></a><span id="l37.22">   let html = aTab.browser.contentDocument.documentElement.innerHTML;</span>
<a href="#l37.23"></a><span id="l37.23" class="difflineminus">-  if (html.contains(aText)) {</span>
<a href="#l37.24"></a><span id="l37.24" class="difflineplus">+  if (html.includes(aText)) {</span>
<a href="#l37.25"></a><span id="l37.25">     mark_failure([&quot;Found string \&quot;&quot; + aText + &quot;\&quot; on the content tab's page&quot;]);</span>
<a href="#l37.26"></a><span id="l37.26">   }</span>
<a href="#l37.27"></a><span id="l37.27"> }</span>
<a href="#l37.28"></a><span id="l37.28"> </span>
<a href="#l37.29"></a><span id="l37.29"> /**</span>
<a href="#l37.30"></a><span id="l37.30">  * Returns the notification bar for a tab if one is currently visible,</span>
<a href="#l37.31"></a><span id="l37.31">  * null if otherwise.</span>
<a href="#l37.32"></a><span id="l37.32">  */</span>
<a href="#l37.33"></a><span id="l37.33" class="difflineat">@@ -387,24 +387,24 @@ function get_test_plugin() {</span>
<a href="#l37.34"></a><span id="l37.34"> </span>
<a href="#l37.35"></a><span id="l37.35"> /* Returns true if we're currently set up to run plugins in seperate</span>
<a href="#l37.36"></a><span id="l37.36">  * processes, false otherwise.</span>
<a href="#l37.37"></a><span id="l37.37">  */</span>
<a href="#l37.38"></a><span id="l37.38"> function plugins_run_in_separate_processes(aController) {</span>
<a href="#l37.39"></a><span id="l37.39">   let supportsOOPP = false;</span>
<a href="#l37.40"></a><span id="l37.40"> </span>
<a href="#l37.41"></a><span id="l37.41">   if (aController.mozmillModule.isMac) {</span>
<a href="#l37.42"></a><span id="l37.42" class="difflineminus">-    if (Services.appinfo.XPCOMABI.contains(&quot;x86-&quot;)) {</span>
<a href="#l37.43"></a><span id="l37.43" class="difflineplus">+    if (Services.appinfo.XPCOMABI.includes(&quot;x86-&quot;)) {</span>
<a href="#l37.44"></a><span id="l37.44">       try {</span>
<a href="#l37.45"></a><span id="l37.45">         supportsOOPP = Services.prefs.getBoolPref(&quot;dom.ipc.plugins.enabled.i386.test.plugin&quot;);</span>
<a href="#l37.46"></a><span id="l37.46">       } catch(e) {</span>
<a href="#l37.47"></a><span id="l37.47">         supportsOOPP = Services.prefs.getBoolPref(&quot;dom.ipc.plugins.enabled.i386&quot;);</span>
<a href="#l37.48"></a><span id="l37.48">       }</span>
<a href="#l37.49"></a><span id="l37.49">     }</span>
<a href="#l37.50"></a><span id="l37.50" class="difflineminus">-    else if (Services.appinfo.XPCOMABI.contains(&quot;x86_64-&quot;)) {</span>
<a href="#l37.51"></a><span id="l37.51" class="difflineplus">+    else if (Services.appinfo.XPCOMABI.includes(&quot;x86_64-&quot;)) {</span>
<a href="#l37.52"></a><span id="l37.52">       try {</span>
<a href="#l37.53"></a><span id="l37.53">         supportsOOPP = Services.prefs.getBoolPref(&quot;dom.ipc.plugins.enabled.x86_64.test.plugin&quot;);</span>
<a href="#l37.54"></a><span id="l37.54">       } catch(e) {</span>
<a href="#l37.55"></a><span id="l37.55">         supportsOOPP = Services.prefs.getBoolPref(&quot;dom.ipc.plugins.enabled.x86_64&quot;);</span>
<a href="#l37.56"></a><span id="l37.56">       }</span>
<a href="#l37.57"></a><span id="l37.57">     }</span>
<a href="#l37.58"></a><span id="l37.58">   }</span>
<a href="#l37.59"></a><span id="l37.59">   else {</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-folder-display-helpers.js</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineat">@@ -775,17 +775,17 @@ function assert_number_of_tabs_open(aNum</span>
<a href="#l38.4"></a><span id="l38.4">  */</span>
<a href="#l38.5"></a><span id="l38.5"> function assert_tab_titled_from(aTab, aWhat) {</span>
<a href="#l38.6"></a><span id="l38.6">   let text;</span>
<a href="#l38.7"></a><span id="l38.7">   if (aWhat instanceof Ci.nsIMsgFolder)</span>
<a href="#l38.8"></a><span id="l38.8">     text = aWhat.prettiestName;</span>
<a href="#l38.9"></a><span id="l38.9">   else if (aWhat instanceof Ci.nsIMsgDBHdr)</span>
<a href="#l38.10"></a><span id="l38.10">     text = aWhat.mime2DecodedSubject;</span>
<a href="#l38.11"></a><span id="l38.11"> </span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-  if (!aTab.title.contains(text))</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineplus">+  if (!aTab.title.includes(text))</span>
<a href="#l38.14"></a><span id="l38.14">     mark_failure([&quot;Tab title of tab&quot;, aTab,</span>
<a href="#l38.15"></a><span id="l38.15">                   &quot;should include '&quot; + text + &quot;' but does not.&quot; +</span>
<a href="#l38.16"></a><span id="l38.16">                   &quot; (Current title: '&quot; + aTab.title + &quot;')&quot;]);</span>
<a href="#l38.17"></a><span id="l38.17"> }</span>
<a href="#l38.18"></a><span id="l38.18"> </span>
<a href="#l38.19"></a><span id="l38.19"> /**</span>
<a href="#l38.20"></a><span id="l38.20">  * Assert that the given tab's title is what is given.</span>
<a href="#l38.21"></a><span id="l38.21">  *</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1" class="difflineminus">--- a/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineplus">+++ b/mail/test/mozmill/shared-modules/test-newmailaccount-helpers.js</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineat">@@ -193,17 +193,17 @@ var gConsoleListener = {</span>
<a href="#l39.4"></a><span id="l39.4">   QueryInterface: XPCOMUtils.generateQI([Ci.nsIConsoleListener]),</span>
<a href="#l39.5"></a><span id="l39.5">   _msg: null,</span>
<a href="#l39.6"></a><span id="l39.6">   _sawMsg: false,</span>
<a href="#l39.7"></a><span id="l39.7"> </span>
<a href="#l39.8"></a><span id="l39.8">   observe: function(aMsg) {</span>
<a href="#l39.9"></a><span id="l39.9">     if (!this._msg)</span>
<a href="#l39.10"></a><span id="l39.10">       return;</span>
<a href="#l39.11"></a><span id="l39.11"> </span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    this._sawMsg |= (aMsg.message.contains(this._msg));</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineplus">+    this._sawMsg |= (aMsg.message.includes(this._msg));</span>
<a href="#l39.14"></a><span id="l39.14">   },</span>
<a href="#l39.15"></a><span id="l39.15"> </span>
<a href="#l39.16"></a><span id="l39.16">   listenFor: function(aMsg) {</span>
<a href="#l39.17"></a><span id="l39.17">     this._msg = aMsg;</span>
<a href="#l39.18"></a><span id="l39.18">   },</span>
<a href="#l39.19"></a><span id="l39.19"> </span>
<a href="#l39.20"></a><span id="l39.20">   reset: function() {</span>
<a href="#l39.21"></a><span id="l39.21">     this._msg = null;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

