<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 17452:b8f7415c632cae0ecb7405f8d5b6a08eb31151a0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ b8f7415c632cae0ecb7405f8d5b6a08eb31151a0" />
<meta property="og:url" content="/comm-central/rev/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0" />
<meta property="og:description" content="Bug 1121107, part 2: Stop using simplejson in mozmill, r=Callek" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / b8f7415c632cae0ecb7405f8d5b6a08eb31151a0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">shortlog</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">files</a> |
changeset |
<a href="/comm-central/raw-rev/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">raw</a>  | <a href="/comm-central/archive/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1121107">Bug 1121107</a>, part 2: Stop using simplejson in mozmill, r=Callek
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#115;&#104;&#117;&#97;&#32;&#67;&#114;&#97;&#110;&#109;&#101;&#114;&#32;&#60;&#80;&#105;&#100;&#103;&#101;&#111;&#116;&#49;&#56;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 06 Feb 2015 17:33:24 -0600</td></tr>

<tr>
 <td>changeset 17452</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">b8f7415c632cae0ecb7405f8d5b6a08eb31151a0</a></td>
</tr>



<tr>
<td>parent 17451</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/241f8377859e682d46c61ca06163fbe48bdc0ca2">241f8377859e682d46c61ca06163fbe48bdc0ca2</a>
</td>
</tr>

<tr>
<td>child 17453</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/e665f5e1b7465f6d79f7b72f2d7ce0907e53c152">e665f5e1b7465f6d79f7b72f2d7ce0907e53c152</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=b8f7415c632cae0ecb7405f8d5b6a08eb31151a0">10752</a></td></tr>
<tr><td>push user</td><td>Pidgeot18@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 06 Feb 2015 23:34:02 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@e665f5e1b746 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e665f5e1b7465f6d79f7b72f2d7ce0907e53c152">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=e665f5e1b7465f6d79f7b72f2d7ce0907e53c152&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e665f5e1b7465f6d79f7b72f2d7ce0907e53c152&newProject=comm-central&newRevision=241f8377859e682d46c61ca06163fbe48bdc0ca2&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e665f5e1b7465f6d79f7b72f2d7ce0907e53c152&newProject=comm-central&newRevision=241f8377859e682d46c61ca06163fbe48bdc0ca2&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=e665f5e1b7465f6d79f7b72f2d7ce0907e53c152&newProject=comm-central&newRevision=241f8377859e682d46c61ca06163fbe48bdc0ca2&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28Callek%29&revcount=50">Callek</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1121107">1121107</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1121107">Bug 1121107</a>, part 2: Stop using simplejson in mozmill, r=Callek</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/installmozmill.py">mail/test/resources/installmozmill.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/installmozmill.py">file</a> |
<a href="/comm-central/annotate/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/installmozmill.py">annotate</a> |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/installmozmill.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/installmozmill.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/installmozmill.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/jsbridge/network.py">mail/test/resources/jsbridge/jsbridge/network.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/jsbridge/network.py">file</a> |
<a href="/comm-central/annotate/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/jsbridge/network.py">annotate</a> |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/jsbridge/network.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/jsbridge/network.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/jsbridge/network.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/setup.py">mail/test/resources/jsbridge/setup.py</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/setup.py">file</a> |
<a href="/comm-central/annotate/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/setup.py">annotate</a> |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/setup.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/setup.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/jsbridge/setup.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitignore">mail/test/resources/simplejson-2.1.6/.gitignore</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitignore">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitignore">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitignore">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitmodules">mail/test/resources/simplejson-2.1.6/.gitmodules</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitmodules">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitmodules">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/.gitmodules">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/CHANGES.txt">mail/test/resources/simplejson-2.1.6/CHANGES.txt</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/CHANGES.txt">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/CHANGES.txt">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/CHANGES.txt">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/LICENSE.txt">mail/test/resources/simplejson-2.1.6/LICENSE.txt</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/LICENSE.txt">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/LICENSE.txt">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/LICENSE.txt">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/PKG-INFO">mail/test/resources/simplejson-2.1.6/PKG-INFO</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/PKG-INFO">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/PKG-INFO">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/PKG-INFO">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/README.rst">mail/test/resources/simplejson-2.1.6/README.rst</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/README.rst">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/README.rst">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/README.rst">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/conf.py">mail/test/resources/simplejson-2.1.6/conf.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/conf.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/conf.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/conf.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/ez_setup.py">mail/test/resources/simplejson-2.1.6/ez_setup.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/ez_setup.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/ez_setup.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/ez_setup.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/index.rst">mail/test/resources/simplejson-2.1.6/index.rst</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/index.rst">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/index.rst">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/index.rst">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/scripts/make_docs.py">mail/test/resources/simplejson-2.1.6/scripts/make_docs.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/scripts/make_docs.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/scripts/make_docs.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/scripts/make_docs.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.cfg">mail/test/resources/simplejson-2.1.6/setup.cfg</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.cfg">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.cfg">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.cfg">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.py">mail/test/resources/simplejson-2.1.6/setup.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/setup.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/__init__.py">mail/test/resources/simplejson-2.1.6/simplejson/__init__.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/__init__.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/__init__.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/__init__.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/_speedups.c">mail/test/resources/simplejson-2.1.6/simplejson/_speedups.c</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/_speedups.c">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/_speedups.c">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/_speedups.c">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/decoder.py">mail/test/resources/simplejson-2.1.6/simplejson/decoder.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/decoder.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/decoder.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/decoder.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/encoder.py">mail/test/resources/simplejson-2.1.6/simplejson/encoder.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/encoder.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/encoder.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/encoder.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/ordered_dict.py">mail/test/resources/simplejson-2.1.6/simplejson/ordered_dict.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/ordered_dict.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/ordered_dict.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/ordered_dict.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/scanner.py">mail/test/resources/simplejson-2.1.6/simplejson/scanner.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/scanner.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/scanner.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/scanner.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/__init__.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/__init__.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/__init__.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/__init__.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/__init__.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_check_circular.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_check_circular.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_check_circular.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_check_circular.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_check_circular.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decimal.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decimal.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decimal.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decimal.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decimal.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decode.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decode.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decode.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decode.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decode.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_default.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_default.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_default.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_default.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_default.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_dump.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_dump.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_dump.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_dump.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_dump.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_basestring_ascii.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_basestring_ascii.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_basestring_ascii.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_basestring_ascii.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_basestring_ascii.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_for_html.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_for_html.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_for_html.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_for_html.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_for_html.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_errors.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_errors.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_errors.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_errors.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_errors.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_fail.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_fail.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_fail.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_fail.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_fail.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_float.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_float.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_float.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_float.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_float.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_indent.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_indent.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_indent.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_indent.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_indent.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass1.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass1.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass1.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass1.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass1.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass2.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass2.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass2.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass2.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass2.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass3.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass3.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass3.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass3.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass3.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_recursion.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_recursion.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_recursion.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_recursion.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_recursion.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_scanstring.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_scanstring.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_scanstring.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_scanstring.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_scanstring.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_separators.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_separators.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_separators.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_separators.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_separators.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_speedups.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_speedups.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_speedups.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_speedups.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_speedups.py">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_unicode.py">mail/test/resources/simplejson-2.1.6/simplejson/tests/test_unicode.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_unicode.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_unicode.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_unicode.py">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tool.py">mail/test/resources/simplejson-2.1.6/simplejson/tool.py</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tool.py">diff</a> |
<a href="/comm-central/comparison/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tool.py">comparison</a> |
<a href="/comm-central/log/b8f7415c632cae0ecb7405f8d5b6a08eb31151a0/mail/test/resources/simplejson-2.1.6/simplejson/tool.py">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/mail/test/resources/installmozmill.py</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/mail/test/resources/installmozmill.py</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -66,17 +66,17 @@ def main(args=None):</span>
<a href="#l1.4"></a><span id="l1.4">   os.chdir(source)</span>
<a href="#l1.5"></a><span id="l1.5"> </span>
<a href="#l1.6"></a><span id="l1.6">   # check for existence of necessary files</span>
<a href="#l1.7"></a><span id="l1.7">   if not os.path.exists('virtualenv'):</span>
<a href="#l1.8"></a><span id="l1.8">     print &quot;File not found: virtualenv&quot;</span>
<a href="#l1.9"></a><span id="l1.9">     sys.exit(1)</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11">   # packages to install in dependency order</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-  packages = [&quot;simplejson-2.1.6&quot;, &quot;mozrunner&quot;, &quot;jsbridge&quot;, &quot;mozmill&quot;]</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+  packages = [&quot;mozrunner&quot;, &quot;jsbridge&quot;, &quot;mozmill&quot;]</span>
<a href="#l1.14"></a><span id="l1.14"> </span>
<a href="#l1.15"></a><span id="l1.15">   # create the virtualenv and install packages</span>
<a href="#l1.16"></a><span id="l1.16">   env = os.environ.copy()</span>
<a href="#l1.17"></a><span id="l1.17">   env.pop('PYTHONHOME', None)</span>
<a href="#l1.18"></a><span id="l1.18">   # The --no-site-packages is because of https://github.com/pypa/virtualenv/issues/165</span>
<a href="#l1.19"></a><span id="l1.19">   returncode = call([sys.executable, os.path.join('virtualenv', 'virtualenv.py'),</span>
<a href="#l1.20"></a><span id="l1.20">                      destination], env=env)</span>
<a href="#l1.21"></a><span id="l1.21">   if returncode:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/mail/test/resources/jsbridge/jsbridge/network.py</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/jsbridge/network.py</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -38,22 +38,18 @@</span>
<a href="#l2.4"></a><span id="l2.4"> import asyncore</span>
<a href="#l2.5"></a><span id="l2.5"> import socket</span>
<a href="#l2.6"></a><span id="l2.6"> import select</span>
<a href="#l2.7"></a><span id="l2.7"> import logging</span>
<a href="#l2.8"></a><span id="l2.8"> import uuid</span>
<a href="#l2.9"></a><span id="l2.9"> from time import sleep</span>
<a href="#l2.10"></a><span id="l2.10"> from threading import Thread</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-try:</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-    import json as simplejson</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-    from json.encoder import encode_basestring_ascii, encode_basestring</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-except ImportError:</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-    import simplejson</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-    from simplejson.encoder import encode_basestring_ascii, encode_basestring</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineplus">+import json</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineplus">+from json.encoder import encode_basestring_ascii, encode_basestring</span>
<a href="#l2.20"></a><span id="l2.20"> </span>
<a href="#l2.21"></a><span id="l2.21"> logger = logging.getLogger(__name__)</span>
<a href="#l2.22"></a><span id="l2.22"> </span>
<a href="#l2.23"></a><span id="l2.23"> class JavaScriptException(Exception): pass</span>
<a href="#l2.24"></a><span id="l2.24"> </span>
<a href="#l2.25"></a><span id="l2.25"> class Telnet(asyncore.dispatcher):</span>
<a href="#l2.26"></a><span id="l2.26">     def __init__(self, host, port):</span>
<a href="#l2.27"></a><span id="l2.27">         self.host, self.port = host, port</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineat">@@ -92,27 +88,27 @@ class Telnet(asyncore.dispatcher):</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30">     def handle_read(self):</span>
<a href="#l2.31"></a><span id="l2.31">         self.data = self.read_all()</span>
<a href="#l2.32"></a><span id="l2.32">         self.process_read(self.data)</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34">         </span>
<a href="#l2.35"></a><span id="l2.35">     read_callback = lambda self, data: None</span>
<a href="#l2.36"></a><span id="l2.36"> </span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-decoder = simplejson.JSONDecoder()</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineplus">+decoder = json.JSONDecoder()</span>
<a href="#l2.39"></a><span id="l2.39"> </span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-class JSObjectEncoder(simplejson.JSONEncoder):</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineplus">+class JSObjectEncoder(json.JSONEncoder):</span>
<a href="#l2.42"></a><span id="l2.42">     &quot;&quot;&quot;Encoder that supports jsobject references by name.&quot;&quot;&quot;</span>
<a href="#l2.43"></a><span id="l2.43"> </span>
<a href="#l2.44"></a><span id="l2.44">     def encode(self, o):</span>
<a href="#l2.45"></a><span id="l2.45">         import jsobjects</span>
<a href="#l2.46"></a><span id="l2.46">         if isinstance(o, jsobjects.JSObject):</span>
<a href="#l2.47"></a><span id="l2.47">             return o._name_</span>
<a href="#l2.48"></a><span id="l2.48">         else:</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-            return simplejson.JSONEncoder.encode(self, o)</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineplus">+            return json.JSONEncoder.encode(self, o)</span>
<a href="#l2.51"></a><span id="l2.51"> </span>
<a href="#l2.52"></a><span id="l2.52">     def _iterencode(self, o, markers=None):</span>
<a href="#l2.53"></a><span id="l2.53">         import jsobjects</span>
<a href="#l2.54"></a><span id="l2.54">         if isinstance(o, jsobjects.JSObject):</span>
<a href="#l2.55"></a><span id="l2.55">             yield o._name_</span>
<a href="#l2.56"></a><span id="l2.56">         elif isinstance(o, basestring):</span>
<a href="#l2.57"></a><span id="l2.57">             if self.ensure_ascii:</span>
<a href="#l2.58"></a><span id="l2.58">                 encoder = encode_basestring_ascii</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineat">@@ -127,17 +123,17 @@ class JSObjectEncoder(simplejson.JSONEnc</span>
<a href="#l2.60"></a><span id="l2.60">             yield 'null'</span>
<a href="#l2.61"></a><span id="l2.61">         elif o is True:</span>
<a href="#l2.62"></a><span id="l2.62">             yield 'true'</span>
<a href="#l2.63"></a><span id="l2.63">         elif o is False:</span>
<a href="#l2.64"></a><span id="l2.64">             yield 'false'</span>
<a href="#l2.65"></a><span id="l2.65">         elif isinstance(o, (int, long)):</span>
<a href="#l2.66"></a><span id="l2.66">             yield str(o)</span>
<a href="#l2.67"></a><span id="l2.67">         elif isinstance(o, float):</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-            yield getattr(simplejson.encoder, 'floatstr', simplejson.encoder._floatstr)(o, self.allow_nan)</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineplus">+            yield getattr(json.encoder, 'floatstr', json.encoder._floatstr)(o, self.allow_nan)</span>
<a href="#l2.70"></a><span id="l2.70">         elif isinstance(o, (list, tuple)):</span>
<a href="#l2.71"></a><span id="l2.71">             for chunk in self._iterencode_list(o, markers):</span>
<a href="#l2.72"></a><span id="l2.72">                 yield chunk</span>
<a href="#l2.73"></a><span id="l2.73">         elif isinstance(o, dict):</span>
<a href="#l2.74"></a><span id="l2.74">             for chunk in self._iterencode_dict(o, markers):</span>
<a href="#l2.75"></a><span id="l2.75">                 yield chunk</span>
<a href="#l2.76"></a><span id="l2.76">         else:</span>
<a href="#l2.77"></a><span id="l2.77">             if markers is not None:</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/mail/test/resources/jsbridge/setup.py</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/mail/test/resources/jsbridge/setup.py</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -41,19 +41,16 @@ from setuptools import setup, find_packa</span>
<a href="#l3.4"></a><span id="l3.4"> desc = &quot;&quot;&quot;Python to JavaScript bridge interface.&quot;&quot;&quot;</span>
<a href="#l3.5"></a><span id="l3.5"> summ = &quot;&quot;&quot;A powerful and extensible Python to JavaScript bridge interface.&quot;&quot;&quot;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> PACKAGE_NAME = &quot;jsbridge&quot;</span>
<a href="#l3.8"></a><span id="l3.8"> PACKAGE_VERSION = &quot;2.4.14&quot;</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> requires = ['mozrunner == 2.5.13']</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-if not sys.version.startswith('2.6'):</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-    requires.append('simplejson')</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-</span>
<a href="#l3.15"></a><span id="l3.15"> setup(name=PACKAGE_NAME,</span>
<a href="#l3.16"></a><span id="l3.16">       version=PACKAGE_VERSION,</span>
<a href="#l3.17"></a><span id="l3.17">       description=desc,</span>
<a href="#l3.18"></a><span id="l3.18">       long_description=summ,</span>
<a href="#l3.19"></a><span id="l3.19">       author='Mikeal Rogers, Mozilla',</span>
<a href="#l3.20"></a><span id="l3.20">       author_email='mikeal.rogers@gmail.com',</span>
<a href="#l3.21"></a><span id="l3.21">       url='http://github.com/mozautomation/mozmill',</span>
<a href="#l3.22"></a><span id="l3.22">       license='http://www.apache.org/licenses/LICENSE-2.0',</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/.gitignore</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,6 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">-*.egg-info</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">-*.egg</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">-*.pyc</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">-*.so</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">-/build</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineminus">-/dist</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/.gitmodules</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,3 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-[submodule &quot;docs&quot;]</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">-	path = docs</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">-	url = git@github.com:simplejson/simplejson.git</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/CHANGES.txt</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,218 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-Version 2.1.6 released 2011-05-08</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">-</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">-* Prevent segfaults with deeply nested JSON documents</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-  https://github.com/simplejson/simplejson/issues/11</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-* Fix compatibility with Python 2.5</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-  https://github.com/simplejson/simplejson/issues/5</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-Version 2.1.5 released 2011-04-17</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-* Built sdist tarball with setuptools_git installed. Argh.</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-Version 2.1.4 released 2011-04-17</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-* Does not try to build the extension when using PyPy</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-* Trailing whitespace after commas no longer emitted when indent is used</span>
<a href="#l6.20"></a><span id="l6.20" class="difflineminus">-* Migrated to github http://github.com/simplejson/simplejson</span>
<a href="#l6.21"></a><span id="l6.21" class="difflineminus">-</span>
<a href="#l6.22"></a><span id="l6.22" class="difflineminus">-Version 2.1.3 released 2011-01-17</span>
<a href="#l6.23"></a><span id="l6.23" class="difflineminus">-</span>
<a href="#l6.24"></a><span id="l6.24" class="difflineminus">-* Support the sort_keys option in C encoding speedups</span>
<a href="#l6.25"></a><span id="l6.25" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=86</span>
<a href="#l6.26"></a><span id="l6.26" class="difflineminus">-* Allow use_decimal to work with dump()</span>
<a href="#l6.27"></a><span id="l6.27" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=87</span>
<a href="#l6.28"></a><span id="l6.28" class="difflineminus">-</span>
<a href="#l6.29"></a><span id="l6.29" class="difflineminus">-Version 2.1.2 released 2010-11-01</span>
<a href="#l6.30"></a><span id="l6.30" class="difflineminus">-</span>
<a href="#l6.31"></a><span id="l6.31" class="difflineminus">-* Correct wrong end when object_pairs_hook is used</span>
<a href="#l6.32"></a><span id="l6.32" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=85</span>
<a href="#l6.33"></a><span id="l6.33" class="difflineminus">-* Correct output for indent=0</span>
<a href="#l6.34"></a><span id="l6.34" class="difflineminus">-  http://bugs.python.org/issue10019</span>
<a href="#l6.35"></a><span id="l6.35" class="difflineminus">-* Correctly raise TypeError when non-string keys are used with speedups</span>
<a href="#l6.36"></a><span id="l6.36" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=82</span>
<a href="#l6.37"></a><span id="l6.37" class="difflineminus">-* Fix the endlineno, endcolno attributes of the JSONDecodeError exception.</span>
<a href="#l6.38"></a><span id="l6.38" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=81</span>
<a href="#l6.39"></a><span id="l6.39" class="difflineminus">-</span>
<a href="#l6.40"></a><span id="l6.40" class="difflineminus">-Version 2.1.1 released 2010-03-31</span>
<a href="#l6.41"></a><span id="l6.41" class="difflineminus">-</span>
<a href="#l6.42"></a><span id="l6.42" class="difflineminus">-* Change how setup.py imports ez_setup.py to try and workaround old versions</span>
<a href="#l6.43"></a><span id="l6.43" class="difflineminus">-  of setuptools.</span>
<a href="#l6.44"></a><span id="l6.44" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=75</span>
<a href="#l6.45"></a><span id="l6.45" class="difflineminus">-* Fix compilation on Windows platform (and other platforms with very</span>
<a href="#l6.46"></a><span id="l6.46" class="difflineminus">-  picky compilers)</span>
<a href="#l6.47"></a><span id="l6.47" class="difflineminus">-* Corrected simplejson.__version__ and other minor doc changes.</span>
<a href="#l6.48"></a><span id="l6.48" class="difflineminus">-* Do not fail speedups tests if speedups could not be built.</span>
<a href="#l6.49"></a><span id="l6.49" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=73</span>
<a href="#l6.50"></a><span id="l6.50" class="difflineminus">-</span>
<a href="#l6.51"></a><span id="l6.51" class="difflineminus">-Version 2.1.0 released 2010-03-10</span>
<a href="#l6.52"></a><span id="l6.52" class="difflineminus">-</span>
<a href="#l6.53"></a><span id="l6.53" class="difflineminus">-* Decimal serialization officially supported for encoding with</span>
<a href="#l6.54"></a><span id="l6.54" class="difflineminus">-  use_decimal=True. For encoding this encodes Decimal objects and</span>
<a href="#l6.55"></a><span id="l6.55" class="difflineminus">-  for decoding it implies parse_float=Decimal</span>
<a href="#l6.56"></a><span id="l6.56" class="difflineminus">-* Python 2.4 no longer supported (may still work, but no longer tested)</span>
<a href="#l6.57"></a><span id="l6.57" class="difflineminus">-* Decoding performance and memory utilization enhancements</span>
<a href="#l6.58"></a><span id="l6.58" class="difflineminus">-  http://bugs.python.org/issue7451</span>
<a href="#l6.59"></a><span id="l6.59" class="difflineminus">-* JSONEncoderForHTML class for escaping &amp;, &lt;, &gt;</span>
<a href="#l6.60"></a><span id="l6.60" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=66</span>
<a href="#l6.61"></a><span id="l6.61" class="difflineminus">-* Memoization of object keys during encoding (when using speedups)</span>
<a href="#l6.62"></a><span id="l6.62" class="difflineminus">-* Encoder changed to use PyIter_Next for list iteration to avoid</span>
<a href="#l6.63"></a><span id="l6.63" class="difflineminus">-  potential threading issues</span>
<a href="#l6.64"></a><span id="l6.64" class="difflineminus">-* Encoder changed to use iteritems rather than PyDict_Next in order to</span>
<a href="#l6.65"></a><span id="l6.65" class="difflineminus">-  support dict subclasses that have a well defined ordering</span>
<a href="#l6.66"></a><span id="l6.66" class="difflineminus">-  http://bugs.python.org/issue6105</span>
<a href="#l6.67"></a><span id="l6.67" class="difflineminus">-* indent encoding parameter changed to be a string rather than an integer</span>
<a href="#l6.68"></a><span id="l6.68" class="difflineminus">-  (integer use still supported for backwards compatibility)</span>
<a href="#l6.69"></a><span id="l6.69" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=56</span>
<a href="#l6.70"></a><span id="l6.70" class="difflineminus">-* Test suite (python setup.py test) now automatically runs with and without</span>
<a href="#l6.71"></a><span id="l6.71" class="difflineminus">-  speedups</span>
<a href="#l6.72"></a><span id="l6.72" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=55</span>
<a href="#l6.73"></a><span id="l6.73" class="difflineminus">-* Fixed support for older versions of easy_install (e.g. stock Mac OS X config)</span>
<a href="#l6.74"></a><span id="l6.74" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=54</span>
<a href="#l6.75"></a><span id="l6.75" class="difflineminus">-* Fixed str/unicode mismatches when using ensure_ascii=False</span>
<a href="#l6.76"></a><span id="l6.76" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=48</span>
<a href="#l6.77"></a><span id="l6.77" class="difflineminus">-* Fixed error message when parsing an array with trailing comma with speedups</span>
<a href="#l6.78"></a><span id="l6.78" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=46</span>
<a href="#l6.79"></a><span id="l6.79" class="difflineminus">-* Refactor decoder errors to raise JSONDecodeError instead of ValueError</span>
<a href="#l6.80"></a><span id="l6.80" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=45</span>
<a href="#l6.81"></a><span id="l6.81" class="difflineminus">-* New ordered_pairs_hook feature in decoder which makes it possible to</span>
<a href="#l6.82"></a><span id="l6.82" class="difflineminus">-  preserve key order. http://bugs.python.org/issue5381</span>
<a href="#l6.83"></a><span id="l6.83" class="difflineminus">-* Fixed containerless unicode float decoding (same bug as 2.0.4, oops!)</span>
<a href="#l6.84"></a><span id="l6.84" class="difflineminus">-  http://code.google.com/p/simplejson/issues/detail?id=43</span>
<a href="#l6.85"></a><span id="l6.85" class="difflineminus">-* Share PosInf definition between encoder and decoder</span>
<a href="#l6.86"></a><span id="l6.86" class="difflineminus">-* Minor reformatting to make it easier to backport simplejson changes</span>
<a href="#l6.87"></a><span id="l6.87" class="difflineminus">-  to Python 2.7/3.1 json module</span>
<a href="#l6.88"></a><span id="l6.88" class="difflineminus">-</span>
<a href="#l6.89"></a><span id="l6.89" class="difflineminus">-Version 2.0.9 released 2009-02-18</span>
<a href="#l6.90"></a><span id="l6.90" class="difflineminus">-</span>
<a href="#l6.91"></a><span id="l6.91" class="difflineminus">-* Adds cyclic GC to the Encoder and Scanner speedups, which could've</span>
<a href="#l6.92"></a><span id="l6.92" class="difflineminus">-  caused uncollectible cycles in some cases when using custom parser</span>
<a href="#l6.93"></a><span id="l6.93" class="difflineminus">-  or encoder functions</span>
<a href="#l6.94"></a><span id="l6.94" class="difflineminus">-</span>
<a href="#l6.95"></a><span id="l6.95" class="difflineminus">-Version 2.0.8 released 2009-02-15</span>
<a href="#l6.96"></a><span id="l6.96" class="difflineminus">-</span>
<a href="#l6.97"></a><span id="l6.97" class="difflineminus">-* Documentation fixes</span>
<a href="#l6.98"></a><span id="l6.98" class="difflineminus">-* Fixes encoding True and False as keys</span>
<a href="#l6.99"></a><span id="l6.99" class="difflineminus">-* Fixes checking for True and False by identity for several parameters</span>
<a href="#l6.100"></a><span id="l6.100" class="difflineminus">-</span>
<a href="#l6.101"></a><span id="l6.101" class="difflineminus">-Version 2.0.7 released 2009-01-04</span>
<a href="#l6.102"></a><span id="l6.102" class="difflineminus">-</span>
<a href="#l6.103"></a><span id="l6.103" class="difflineminus">-* Documentation fixes</span>
<a href="#l6.104"></a><span id="l6.104" class="difflineminus">-* C extension now always returns unicode strings when the input string is</span>
<a href="#l6.105"></a><span id="l6.105" class="difflineminus">-  unicode, even for empty strings</span>
<a href="#l6.106"></a><span id="l6.106" class="difflineminus">-</span>
<a href="#l6.107"></a><span id="l6.107" class="difflineminus">-Version 2.0.6 released 2008-12-19</span>
<a href="#l6.108"></a><span id="l6.108" class="difflineminus">-</span>
<a href="#l6.109"></a><span id="l6.109" class="difflineminus">-* Windows build fixes</span>
<a href="#l6.110"></a><span id="l6.110" class="difflineminus">-</span>
<a href="#l6.111"></a><span id="l6.111" class="difflineminus">-Version 2.0.5 released 2008-11-23</span>
<a href="#l6.112"></a><span id="l6.112" class="difflineminus">-</span>
<a href="#l6.113"></a><span id="l6.113" class="difflineminus">-* Fixes a segfault in the C extension when using check_circular=False and</span>
<a href="#l6.114"></a><span id="l6.114" class="difflineminus">-  encoding an invalid document</span>
<a href="#l6.115"></a><span id="l6.115" class="difflineminus">-</span>
<a href="#l6.116"></a><span id="l6.116" class="difflineminus">-Version 2.0.4 released 2008-10-24</span>
<a href="#l6.117"></a><span id="l6.117" class="difflineminus">-</span>
<a href="#l6.118"></a><span id="l6.118" class="difflineminus">-* Fixes a parsing error in the C extension when the JSON document is (only)</span>
<a href="#l6.119"></a><span id="l6.119" class="difflineminus">-  a floating point number. It would consume one too few characters in that</span>
<a href="#l6.120"></a><span id="l6.120" class="difflineminus">-  case, and claim the document invalid.</span>
<a href="#l6.121"></a><span id="l6.121" class="difflineminus">-</span>
<a href="#l6.122"></a><span id="l6.122" class="difflineminus">-Version 2.0.3 released 2008-10-11</span>
<a href="#l6.123"></a><span id="l6.123" class="difflineminus">-</span>
<a href="#l6.124"></a><span id="l6.124" class="difflineminus">-* Fixes reference leaks in the encoding speedups (sorry about that!)</span>
<a href="#l6.125"></a><span id="l6.125" class="difflineminus">-* Fixes doctest suite for Python 2.6</span>
<a href="#l6.126"></a><span id="l6.126" class="difflineminus">-* More optimizations for the decoder</span>
<a href="#l6.127"></a><span id="l6.127" class="difflineminus">-</span>
<a href="#l6.128"></a><span id="l6.128" class="difflineminus">-Version 2.0.2 released 2008-10-06</span>
<a href="#l6.129"></a><span id="l6.129" class="difflineminus">-</span>
<a href="#l6.130"></a><span id="l6.130" class="difflineminus">-* Fixes MSVC2003 build regression</span>
<a href="#l6.131"></a><span id="l6.131" class="difflineminus">-* Fixes Python 2.4 compatibility in _speedups.c</span>
<a href="#l6.132"></a><span id="l6.132" class="difflineminus">-</span>
<a href="#l6.133"></a><span id="l6.133" class="difflineminus">-Version 2.0.1 released 2008-09-29</span>
<a href="#l6.134"></a><span id="l6.134" class="difflineminus">-</span>
<a href="#l6.135"></a><span id="l6.135" class="difflineminus">-* Fixes long encoding regression introduced in 2.0.0</span>
<a href="#l6.136"></a><span id="l6.136" class="difflineminus">-* Fixes MinGW build regression introduced in 2.0.0</span>
<a href="#l6.137"></a><span id="l6.137" class="difflineminus">-</span>
<a href="#l6.138"></a><span id="l6.138" class="difflineminus">-Version 2.0.0 released 2008-09-27</span>
<a href="#l6.139"></a><span id="l6.139" class="difflineminus">-</span>
<a href="#l6.140"></a><span id="l6.140" class="difflineminus">-* optimized Python encoding path</span>
<a href="#l6.141"></a><span id="l6.141" class="difflineminus">-* optimized Python decoding path</span>
<a href="#l6.142"></a><span id="l6.142" class="difflineminus">-* optimized C encoding path</span>
<a href="#l6.143"></a><span id="l6.143" class="difflineminus">-* optimized C decoding path</span>
<a href="#l6.144"></a><span id="l6.144" class="difflineminus">-* switched to sphinx docs (nearly the same as the json module in python 2.6)</span>
<a href="#l6.145"></a><span id="l6.145" class="difflineminus">-</span>
<a href="#l6.146"></a><span id="l6.146" class="difflineminus">-Version 1.9.3 released 2008-09-23</span>
<a href="#l6.147"></a><span id="l6.147" class="difflineminus">-</span>
<a href="#l6.148"></a><span id="l6.148" class="difflineminus">-* Decoding is significantly faster (for our internal benchmarks)</span>
<a href="#l6.149"></a><span id="l6.149" class="difflineminus">-* Pretty-printing tool changed from simplejson to simplejson.tool for better</span>
<a href="#l6.150"></a><span id="l6.150" class="difflineminus">-  Python 2.6 comaptibility</span>
<a href="#l6.151"></a><span id="l6.151" class="difflineminus">-* Misc. bug fixes</span>
<a href="#l6.152"></a><span id="l6.152" class="difflineminus">-</span>
<a href="#l6.153"></a><span id="l6.153" class="difflineminus">-Version 1.9 released 2008-05-03</span>
<a href="#l6.154"></a><span id="l6.154" class="difflineminus">-</span>
<a href="#l6.155"></a><span id="l6.155" class="difflineminus">-* Rewrote test suite with unittest and doctest (no more nosetest dependency)</span>
<a href="#l6.156"></a><span id="l6.156" class="difflineminus">-* Better PEP 7 and PEP 8 source compliance</span>
<a href="#l6.157"></a><span id="l6.157" class="difflineminus">-* Removed simplejson.jsonfilter demo module</span>
<a href="#l6.158"></a><span id="l6.158" class="difflineminus">-* simplejson.jsonfilter is no longer included</span>
<a href="#l6.159"></a><span id="l6.159" class="difflineminus">-</span>
<a href="#l6.160"></a><span id="l6.160" class="difflineminus">-Version 1.8.1 released 2008-03-24</span>
<a href="#l6.161"></a><span id="l6.161" class="difflineminus">-</span>
<a href="#l6.162"></a><span id="l6.162" class="difflineminus">-* Optional C extension for accelerating the decoding of JSON strings</span>
<a href="#l6.163"></a><span id="l6.163" class="difflineminus">-* Command line interface for pretty-printing JSON (via python -msimplejson)</span>
<a href="#l6.164"></a><span id="l6.164" class="difflineminus">-* Decoding of integers and floats is now extensible (e.g. to use Decimal) via</span>
<a href="#l6.165"></a><span id="l6.165" class="difflineminus">-  parse_int, parse_float options.</span>
<a href="#l6.166"></a><span id="l6.166" class="difflineminus">-* Subversion and issue tracker moved to google code:</span>
<a href="#l6.167"></a><span id="l6.167" class="difflineminus">-  http://code.google.com/p/simplejson/</span>
<a href="#l6.168"></a><span id="l6.168" class="difflineminus">-* &quot;/&quot; is no longer escaped, so if you're embedding JSON directly in HTML</span>
<a href="#l6.169"></a><span id="l6.169" class="difflineminus">-  you'll want to use .replace(&quot;/&quot;, &quot;\\/&quot;) to prevent a close-tag attack.</span>
<a href="#l6.170"></a><span id="l6.170" class="difflineminus">-</span>
<a href="#l6.171"></a><span id="l6.171" class="difflineminus">-Version 1.7 released 2007-03-18</span>
<a href="#l6.172"></a><span id="l6.172" class="difflineminus">-</span>
<a href="#l6.173"></a><span id="l6.173" class="difflineminus">-* Improves encoding performance with an optional C extension to speed up</span>
<a href="#l6.174"></a><span id="l6.174" class="difflineminus">-  str/unicode encoding (by 10-150x or so), which yields an overall speed</span>
<a href="#l6.175"></a><span id="l6.175" class="difflineminus">-  boost of 2x+ (JSON is string-heavy).</span>
<a href="#l6.176"></a><span id="l6.176" class="difflineminus">-* Support for encoding unicode code points outside the BMP to UTF-16</span>
<a href="#l6.177"></a><span id="l6.177" class="difflineminus">-  surrogate code pairs (specified by the Strings section of RFC 4627).</span>
<a href="#l6.178"></a><span id="l6.178" class="difflineminus">-</span>
<a href="#l6.179"></a><span id="l6.179" class="difflineminus">-Version 1.6 released 2007-03-03</span>
<a href="#l6.180"></a><span id="l6.180" class="difflineminus">-</span>
<a href="#l6.181"></a><span id="l6.181" class="difflineminus">-* Improved str support for encoding. Previous versions of simplejson</span>
<a href="#l6.182"></a><span id="l6.182" class="difflineminus">-  integrated strings directly into the output stream, this version ensures</span>
<a href="#l6.183"></a><span id="l6.183" class="difflineminus">-  they're of a particular encoding (default is UTF-8) so that the output</span>
<a href="#l6.184"></a><span id="l6.184" class="difflineminus">-  stream is valid.</span>
<a href="#l6.185"></a><span id="l6.185" class="difflineminus">-</span>
<a href="#l6.186"></a><span id="l6.186" class="difflineminus">-Version 1.5 released 2007-01-18</span>
<a href="#l6.187"></a><span id="l6.187" class="difflineminus">-</span>
<a href="#l6.188"></a><span id="l6.188" class="difflineminus">-* Better Python 2.5 compatibility</span>
<a href="#l6.189"></a><span id="l6.189" class="difflineminus">-* Better Windows compatibility</span>
<a href="#l6.190"></a><span id="l6.190" class="difflineminus">-* indent encoding parameter for pretty printing</span>
<a href="#l6.191"></a><span id="l6.191" class="difflineminus">-* separators encoding parameter for generating optimally compact JSON</span>
<a href="#l6.192"></a><span id="l6.192" class="difflineminus">-</span>
<a href="#l6.193"></a><span id="l6.193" class="difflineminus">-Version 1.3 released 2006-04-01</span>
<a href="#l6.194"></a><span id="l6.194" class="difflineminus">-</span>
<a href="#l6.195"></a><span id="l6.195" class="difflineminus">-* The optional object_hook function is called upon decoding of any JSON</span>
<a href="#l6.196"></a><span id="l6.196" class="difflineminus">-  object literal, and its return value is used instead of the dict that</span>
<a href="#l6.197"></a><span id="l6.197" class="difflineminus">-  would normally be used. This can be used to efficiently implement</span>
<a href="#l6.198"></a><span id="l6.198" class="difflineminus">-  features such as JSON-RPC class hinting, or other custom decodings of</span>
<a href="#l6.199"></a><span id="l6.199" class="difflineminus">-  JSON. See the documentation for more information.</span>
<a href="#l6.200"></a><span id="l6.200" class="difflineminus">-</span>
<a href="#l6.201"></a><span id="l6.201" class="difflineminus">-Version 1.1 released 2005-12-31</span>
<a href="#l6.202"></a><span id="l6.202" class="difflineminus">-</span>
<a href="#l6.203"></a><span id="l6.203" class="difflineminus">-* Renamed from simple_json to simplejson to comply with PEP 8 module naming</span>
<a href="#l6.204"></a><span id="l6.204" class="difflineminus">-  guidelines</span>
<a href="#l6.205"></a><span id="l6.205" class="difflineminus">-* Full set of documentation</span>
<a href="#l6.206"></a><span id="l6.206" class="difflineminus">-* More tests</span>
<a href="#l6.207"></a><span id="l6.207" class="difflineminus">-* The encoder and decoder have been extended to understand NaN, Infinity, and</span>
<a href="#l6.208"></a><span id="l6.208" class="difflineminus">-  -Infinity (but this can be turned off via allow_nan=False for strict JSON</span>
<a href="#l6.209"></a><span id="l6.209" class="difflineminus">-  compliance)</span>
<a href="#l6.210"></a><span id="l6.210" class="difflineminus">-* The decoder's scanner has been fixed so that it no longer accepts invalid</span>
<a href="#l6.211"></a><span id="l6.211" class="difflineminus">-  JSON documents</span>
<a href="#l6.212"></a><span id="l6.212" class="difflineminus">-* The decoder now reports line and column information as well as character</span>
<a href="#l6.213"></a><span id="l6.213" class="difflineminus">-  numbers for easier debugging</span>
<a href="#l6.214"></a><span id="l6.214" class="difflineminus">-* The encoder now has a circular reference checker, which can be optionally</span>
<a href="#l6.215"></a><span id="l6.215" class="difflineminus">-  disabled with check_circular=False</span>
<a href="#l6.216"></a><span id="l6.216" class="difflineminus">-* dump, dumps, load, loads now accept an optional cls kwarg to use an</span>
<a href="#l6.217"></a><span id="l6.217" class="difflineminus">-  alternate JSONEncoder or JSONDecoder class for convenience.</span>
<a href="#l6.218"></a><span id="l6.218" class="difflineminus">-* The read/write compatibility shim for json-py now have deprecation warnings</span>
<a href="#l6.219"></a><span id="l6.219" class="difflineminus">- </span>
<a href="#l6.220"></a><span id="l6.220" class="difflineminus">-Version 1.0 released 2005-12-25</span>
<a href="#l6.221"></a><span id="l6.221" class="difflineminus">-</span>
<a href="#l6.222"></a><span id="l6.222" class="difflineminus">- * Initial release</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/LICENSE.txt</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,19 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-Copyright (c) 2006 Bob Ippolito</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">-</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">-Permission is hereby granted, free of charge, to any person obtaining a copy of</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-this software and associated documentation files (the &quot;Software&quot;), to deal in</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-the Software without restriction, including without limitation the rights to</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-of the Software, and to permit persons to whom the Software is furnished to do</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-so, subject to the following conditions:</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-The above copyright notice and this permission notice shall be included in all</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-copies or substantial portions of the Software.</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-</span>
<a href="#l7.17"></a><span id="l7.17" class="difflineminus">-THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<a href="#l7.18"></a><span id="l7.18" class="difflineminus">-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<a href="#l7.19"></a><span id="l7.19" class="difflineminus">-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<a href="#l7.20"></a><span id="l7.20" class="difflineminus">-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<a href="#l7.21"></a><span id="l7.21" class="difflineminus">-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<a href="#l7.22"></a><span id="l7.22" class="difflineminus">-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<a href="#l7.23"></a><span id="l7.23" class="difflineminus">-SOFTWARE.</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/PKG-INFO</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,33 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-Metadata-Version: 1.0</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-Name: simplejson</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">-Version: 2.1.6</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">-Summary: Simple, fast, extensible JSON encoder/decoder for Python</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-Home-page: http://github.com/simplejson/simplejson</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-Author: Bob Ippolito</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-Author-email: bob@redivi.com</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-License: MIT License</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-Description: simplejson is a simple, fast, complete, correct and extensible</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-        JSON &lt;http://json.org&gt; encoder and decoder for Python 2.5+.  It is</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-        pure Python code with no dependencies, but includes an optional C</span>
<a href="#l8.16"></a><span id="l8.16" class="difflineminus">-        extension for a serious speed boost.</span>
<a href="#l8.17"></a><span id="l8.17" class="difflineminus">-        </span>
<a href="#l8.18"></a><span id="l8.18" class="difflineminus">-        The latest documentation for simplejson can be read online here:</span>
<a href="#l8.19"></a><span id="l8.19" class="difflineminus">-        http://simplejson.github.com/simplejson/</span>
<a href="#l8.20"></a><span id="l8.20" class="difflineminus">-        </span>
<a href="#l8.21"></a><span id="l8.21" class="difflineminus">-        simplejson is the externally maintained development version of the</span>
<a href="#l8.22"></a><span id="l8.22" class="difflineminus">-        json library included with Python 2.6 and Python 3.0, but maintains</span>
<a href="#l8.23"></a><span id="l8.23" class="difflineminus">-        backwards compatibility with Python 2.5.</span>
<a href="#l8.24"></a><span id="l8.24" class="difflineminus">-        </span>
<a href="#l8.25"></a><span id="l8.25" class="difflineminus">-        The encoder may be subclassed to provide serialization in any kind of</span>
<a href="#l8.26"></a><span id="l8.26" class="difflineminus">-        situation, without any special support by the objects to be serialized</span>
<a href="#l8.27"></a><span id="l8.27" class="difflineminus">-        (somewhat like pickle).</span>
<a href="#l8.28"></a><span id="l8.28" class="difflineminus">-        </span>
<a href="#l8.29"></a><span id="l8.29" class="difflineminus">-        The decoder can handle incoming JSON strings of any specified encoding</span>
<a href="#l8.30"></a><span id="l8.30" class="difflineminus">-        (UTF-8 by default).</span>
<a href="#l8.31"></a><span id="l8.31" class="difflineminus">-        </span>
<a href="#l8.32"></a><span id="l8.32" class="difflineminus">-        </span>
<a href="#l8.33"></a><span id="l8.33" class="difflineminus">-Platform: any</span>
<a href="#l8.34"></a><span id="l8.34" class="difflineminus">-Classifier: Intended Audience :: Developers</span>
<a href="#l8.35"></a><span id="l8.35" class="difflineminus">-Classifier: License :: OSI Approved :: MIT License</span>
<a href="#l8.36"></a><span id="l8.36" class="difflineminus">-Classifier: Programming Language :: Python</span>
<a href="#l8.37"></a><span id="l8.37" class="difflineminus">-Classifier: Topic :: Software Development :: Libraries :: Python Modules</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/README.rst</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,19 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-simplejson is a simple, fast, complete, correct and extensible</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">-JSON &lt;http://json.org&gt; encoder and decoder for Python 2.5+.  It is</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">-pure Python code with no dependencies, but includes an optional C</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-extension for a serious speed boost.</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">-The latest documentation for simplejson can be read online here:</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">-http://simplejson.github.com/simplejson/</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-simplejson is the externally maintained development version of the</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-json library included with Python 2.6 and Python 3.0, but maintains</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-backwards compatibility with Python 2.5.</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-The encoder may be subclassed to provide serialization in any kind of</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-situation, without any special support by the objects to be serialized</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-(somewhat like pickle).</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">-</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">-The decoder can handle incoming JSON strings of any specified encoding</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">-(UTF-8 by default).</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">deleted file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/conf.py</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ /dev/null</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -1,179 +0,0 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineminus">-# -*- coding: utf-8 -*-</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">-#</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">-# simplejson documentation build configuration file, created by</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-# sphinx-quickstart on Fri Sep 26 18:58:30 2008.</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-#</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-# This file is execfile()d with the current directory set to its containing dir.</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineminus">-#</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-# The contents of this file are pickled, so don't put values in the namespace</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-# that aren't pickleable (module imports are okay, they're removed automatically).</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-#</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-# All configuration values have a default value; values that are commented out</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-# serve to show the default value.</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-</span>
<a href="#l10.18"></a><span id="l10.18" class="difflineminus">-import sys, os</span>
<a href="#l10.19"></a><span id="l10.19" class="difflineminus">-</span>
<a href="#l10.20"></a><span id="l10.20" class="difflineminus">-# If your extensions are in another directory, add it here. If the directory</span>
<a href="#l10.21"></a><span id="l10.21" class="difflineminus">-# is relative to the documentation root, use os.path.abspath to make it</span>
<a href="#l10.22"></a><span id="l10.22" class="difflineminus">-# absolute, like shown here.</span>
<a href="#l10.23"></a><span id="l10.23" class="difflineminus">-#sys.path.append(os.path.abspath('some/directory'))</span>
<a href="#l10.24"></a><span id="l10.24" class="difflineminus">-</span>
<a href="#l10.25"></a><span id="l10.25" class="difflineminus">-# General configuration</span>
<a href="#l10.26"></a><span id="l10.26" class="difflineminus">-# ---------------------</span>
<a href="#l10.27"></a><span id="l10.27" class="difflineminus">-</span>
<a href="#l10.28"></a><span id="l10.28" class="difflineminus">-# Add any Sphinx extension module names here, as strings. They can be extensions</span>
<a href="#l10.29"></a><span id="l10.29" class="difflineminus">-# coming with Sphinx (named 'sphinx.ext.*') or your custom ones.</span>
<a href="#l10.30"></a><span id="l10.30" class="difflineminus">-extensions = []</span>
<a href="#l10.31"></a><span id="l10.31" class="difflineminus">-</span>
<a href="#l10.32"></a><span id="l10.32" class="difflineminus">-# Add any paths that contain templates here, relative to this directory.</span>
<a href="#l10.33"></a><span id="l10.33" class="difflineminus">-templates_path = ['_templates']</span>
<a href="#l10.34"></a><span id="l10.34" class="difflineminus">-</span>
<a href="#l10.35"></a><span id="l10.35" class="difflineminus">-# The suffix of source filenames.</span>
<a href="#l10.36"></a><span id="l10.36" class="difflineminus">-source_suffix = '.rst'</span>
<a href="#l10.37"></a><span id="l10.37" class="difflineminus">-</span>
<a href="#l10.38"></a><span id="l10.38" class="difflineminus">-# The master toctree document.</span>
<a href="#l10.39"></a><span id="l10.39" class="difflineminus">-master_doc = 'index'</span>
<a href="#l10.40"></a><span id="l10.40" class="difflineminus">-</span>
<a href="#l10.41"></a><span id="l10.41" class="difflineminus">-# General substitutions.</span>
<a href="#l10.42"></a><span id="l10.42" class="difflineminus">-project = 'simplejson'</span>
<a href="#l10.43"></a><span id="l10.43" class="difflineminus">-copyright = '2011, Bob Ippolito'</span>
<a href="#l10.44"></a><span id="l10.44" class="difflineminus">-</span>
<a href="#l10.45"></a><span id="l10.45" class="difflineminus">-# The default replacements for |version| and |release|, also used in various</span>
<a href="#l10.46"></a><span id="l10.46" class="difflineminus">-# other places throughout the built documents.</span>
<a href="#l10.47"></a><span id="l10.47" class="difflineminus">-#</span>
<a href="#l10.48"></a><span id="l10.48" class="difflineminus">-# The short X.Y version.</span>
<a href="#l10.49"></a><span id="l10.49" class="difflineminus">-version = '2.1'</span>
<a href="#l10.50"></a><span id="l10.50" class="difflineminus">-# The full version, including alpha/beta/rc tags.</span>
<a href="#l10.51"></a><span id="l10.51" class="difflineminus">-release = '2.1.6'</span>
<a href="#l10.52"></a><span id="l10.52" class="difflineminus">-</span>
<a href="#l10.53"></a><span id="l10.53" class="difflineminus">-# There are two options for replacing |today|: either, you set today to some</span>
<a href="#l10.54"></a><span id="l10.54" class="difflineminus">-# non-false value, then it is used:</span>
<a href="#l10.55"></a><span id="l10.55" class="difflineminus">-#today = ''</span>
<a href="#l10.56"></a><span id="l10.56" class="difflineminus">-# Else, today_fmt is used as the format for a strftime call.</span>
<a href="#l10.57"></a><span id="l10.57" class="difflineminus">-today_fmt = '%B %d, %Y'</span>
<a href="#l10.58"></a><span id="l10.58" class="difflineminus">-</span>
<a href="#l10.59"></a><span id="l10.59" class="difflineminus">-# List of documents that shouldn't be included in the build.</span>
<a href="#l10.60"></a><span id="l10.60" class="difflineminus">-#unused_docs = []</span>
<a href="#l10.61"></a><span id="l10.61" class="difflineminus">-</span>
<a href="#l10.62"></a><span id="l10.62" class="difflineminus">-# List of directories, relative to source directories, that shouldn't be searched</span>
<a href="#l10.63"></a><span id="l10.63" class="difflineminus">-# for source files.</span>
<a href="#l10.64"></a><span id="l10.64" class="difflineminus">-#exclude_dirs = []</span>
<a href="#l10.65"></a><span id="l10.65" class="difflineminus">-</span>
<a href="#l10.66"></a><span id="l10.66" class="difflineminus">-# The reST default role (used for this markup: `text`) to use for all documents.</span>
<a href="#l10.67"></a><span id="l10.67" class="difflineminus">-#default_role = None</span>
<a href="#l10.68"></a><span id="l10.68" class="difflineminus">-</span>
<a href="#l10.69"></a><span id="l10.69" class="difflineminus">-# If true, '()' will be appended to :func: etc. cross-reference text.</span>
<a href="#l10.70"></a><span id="l10.70" class="difflineminus">-#add_function_parentheses = True</span>
<a href="#l10.71"></a><span id="l10.71" class="difflineminus">-</span>
<a href="#l10.72"></a><span id="l10.72" class="difflineminus">-# If true, the current module name will be prepended to all description</span>
<a href="#l10.73"></a><span id="l10.73" class="difflineminus">-# unit titles (such as .. function::).</span>
<a href="#l10.74"></a><span id="l10.74" class="difflineminus">-#add_module_names = True</span>
<a href="#l10.75"></a><span id="l10.75" class="difflineminus">-</span>
<a href="#l10.76"></a><span id="l10.76" class="difflineminus">-# If true, sectionauthor and moduleauthor directives will be shown in the</span>
<a href="#l10.77"></a><span id="l10.77" class="difflineminus">-# output. They are ignored by default.</span>
<a href="#l10.78"></a><span id="l10.78" class="difflineminus">-#show_authors = False</span>
<a href="#l10.79"></a><span id="l10.79" class="difflineminus">-</span>
<a href="#l10.80"></a><span id="l10.80" class="difflineminus">-# The name of the Pygments (syntax highlighting) style to use.</span>
<a href="#l10.81"></a><span id="l10.81" class="difflineminus">-pygments_style = 'sphinx'</span>
<a href="#l10.82"></a><span id="l10.82" class="difflineminus">-</span>
<a href="#l10.83"></a><span id="l10.83" class="difflineminus">-</span>
<a href="#l10.84"></a><span id="l10.84" class="difflineminus">-# Options for HTML output</span>
<a href="#l10.85"></a><span id="l10.85" class="difflineminus">-# -----------------------</span>
<a href="#l10.86"></a><span id="l10.86" class="difflineminus">-</span>
<a href="#l10.87"></a><span id="l10.87" class="difflineminus">-# The style sheet to use for HTML and HTML Help pages. A file of that name</span>
<a href="#l10.88"></a><span id="l10.88" class="difflineminus">-# must exist either in Sphinx' static/ path, or in one of the custom paths</span>
<a href="#l10.89"></a><span id="l10.89" class="difflineminus">-# given in html_static_path.</span>
<a href="#l10.90"></a><span id="l10.90" class="difflineminus">-html_style = 'default.css'</span>
<a href="#l10.91"></a><span id="l10.91" class="difflineminus">-</span>
<a href="#l10.92"></a><span id="l10.92" class="difflineminus">-# The name for this set of Sphinx documents.  If None, it defaults to</span>
<a href="#l10.93"></a><span id="l10.93" class="difflineminus">-# &quot;&lt;project&gt; v&lt;release&gt; documentation&quot;.</span>
<a href="#l10.94"></a><span id="l10.94" class="difflineminus">-#html_title = None</span>
<a href="#l10.95"></a><span id="l10.95" class="difflineminus">-</span>
<a href="#l10.96"></a><span id="l10.96" class="difflineminus">-# A shorter title for the navigation bar.  Default is the same as html_title.</span>
<a href="#l10.97"></a><span id="l10.97" class="difflineminus">-#html_short_title = None</span>
<a href="#l10.98"></a><span id="l10.98" class="difflineminus">-</span>
<a href="#l10.99"></a><span id="l10.99" class="difflineminus">-# The name of an image file (within the static path) to place at the top of</span>
<a href="#l10.100"></a><span id="l10.100" class="difflineminus">-# the sidebar.</span>
<a href="#l10.101"></a><span id="l10.101" class="difflineminus">-#html_logo = None</span>
<a href="#l10.102"></a><span id="l10.102" class="difflineminus">-</span>
<a href="#l10.103"></a><span id="l10.103" class="difflineminus">-# The name of an image file (within the static path) to use as favicon of the</span>
<a href="#l10.104"></a><span id="l10.104" class="difflineminus">-# docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32</span>
<a href="#l10.105"></a><span id="l10.105" class="difflineminus">-# pixels large.</span>
<a href="#l10.106"></a><span id="l10.106" class="difflineminus">-#html_favicon = None</span>
<a href="#l10.107"></a><span id="l10.107" class="difflineminus">-</span>
<a href="#l10.108"></a><span id="l10.108" class="difflineminus">-# Add any paths that contain custom static files (such as style sheets) here,</span>
<a href="#l10.109"></a><span id="l10.109" class="difflineminus">-# relative to this directory. They are copied after the builtin static files,</span>
<a href="#l10.110"></a><span id="l10.110" class="difflineminus">-# so a file named &quot;default.css&quot; will overwrite the builtin &quot;default.css&quot;.</span>
<a href="#l10.111"></a><span id="l10.111" class="difflineminus">-html_static_path = ['_static']</span>
<a href="#l10.112"></a><span id="l10.112" class="difflineminus">-</span>
<a href="#l10.113"></a><span id="l10.113" class="difflineminus">-# If not '', a 'Last updated on:' timestamp is inserted at every page bottom,</span>
<a href="#l10.114"></a><span id="l10.114" class="difflineminus">-# using the given strftime format.</span>
<a href="#l10.115"></a><span id="l10.115" class="difflineminus">-html_last_updated_fmt = '%b %d, %Y'</span>
<a href="#l10.116"></a><span id="l10.116" class="difflineminus">-</span>
<a href="#l10.117"></a><span id="l10.117" class="difflineminus">-# If true, SmartyPants will be used to convert quotes and dashes to</span>
<a href="#l10.118"></a><span id="l10.118" class="difflineminus">-# typographically correct entities.</span>
<a href="#l10.119"></a><span id="l10.119" class="difflineminus">-#html_use_smartypants = True</span>
<a href="#l10.120"></a><span id="l10.120" class="difflineminus">-</span>
<a href="#l10.121"></a><span id="l10.121" class="difflineminus">-# Custom sidebar templates, maps document names to template names.</span>
<a href="#l10.122"></a><span id="l10.122" class="difflineminus">-#html_sidebars = {}</span>
<a href="#l10.123"></a><span id="l10.123" class="difflineminus">-</span>
<a href="#l10.124"></a><span id="l10.124" class="difflineminus">-# Additional templates that should be rendered to pages, maps page names to</span>
<a href="#l10.125"></a><span id="l10.125" class="difflineminus">-# template names.</span>
<a href="#l10.126"></a><span id="l10.126" class="difflineminus">-#html_additional_pages = {}</span>
<a href="#l10.127"></a><span id="l10.127" class="difflineminus">-</span>
<a href="#l10.128"></a><span id="l10.128" class="difflineminus">-# If false, no module index is generated.</span>
<a href="#l10.129"></a><span id="l10.129" class="difflineminus">-html_use_modindex = False</span>
<a href="#l10.130"></a><span id="l10.130" class="difflineminus">-</span>
<a href="#l10.131"></a><span id="l10.131" class="difflineminus">-# If false, no index is generated.</span>
<a href="#l10.132"></a><span id="l10.132" class="difflineminus">-#html_use_index = True</span>
<a href="#l10.133"></a><span id="l10.133" class="difflineminus">-</span>
<a href="#l10.134"></a><span id="l10.134" class="difflineminus">-# If true, the index is split into individual pages for each letter.</span>
<a href="#l10.135"></a><span id="l10.135" class="difflineminus">-#html_split_index = False</span>
<a href="#l10.136"></a><span id="l10.136" class="difflineminus">-</span>
<a href="#l10.137"></a><span id="l10.137" class="difflineminus">-# If true, the reST sources are included in the HTML build as _sources/&lt;name&gt;.</span>
<a href="#l10.138"></a><span id="l10.138" class="difflineminus">-#html_copy_source = True</span>
<a href="#l10.139"></a><span id="l10.139" class="difflineminus">-</span>
<a href="#l10.140"></a><span id="l10.140" class="difflineminus">-# If true, an OpenSearch description file will be output, and all pages will</span>
<a href="#l10.141"></a><span id="l10.141" class="difflineminus">-# contain a &lt;link&gt; tag referring to it.  The value of this option must be the</span>
<a href="#l10.142"></a><span id="l10.142" class="difflineminus">-# base URL from which the finished HTML is served.</span>
<a href="#l10.143"></a><span id="l10.143" class="difflineminus">-#html_use_opensearch = ''</span>
<a href="#l10.144"></a><span id="l10.144" class="difflineminus">-</span>
<a href="#l10.145"></a><span id="l10.145" class="difflineminus">-# If nonempty, this is the file name suffix for HTML files (e.g. &quot;.xhtml&quot;).</span>
<a href="#l10.146"></a><span id="l10.146" class="difflineminus">-html_file_suffix = '.html'</span>
<a href="#l10.147"></a><span id="l10.147" class="difflineminus">-</span>
<a href="#l10.148"></a><span id="l10.148" class="difflineminus">-# Output file base name for HTML help builder.</span>
<a href="#l10.149"></a><span id="l10.149" class="difflineminus">-htmlhelp_basename = 'simplejsondoc'</span>
<a href="#l10.150"></a><span id="l10.150" class="difflineminus">-</span>
<a href="#l10.151"></a><span id="l10.151" class="difflineminus">-</span>
<a href="#l10.152"></a><span id="l10.152" class="difflineminus">-# Options for LaTeX output</span>
<a href="#l10.153"></a><span id="l10.153" class="difflineminus">-# ------------------------</span>
<a href="#l10.154"></a><span id="l10.154" class="difflineminus">-</span>
<a href="#l10.155"></a><span id="l10.155" class="difflineminus">-# The paper size ('letter' or 'a4').</span>
<a href="#l10.156"></a><span id="l10.156" class="difflineminus">-#latex_paper_size = 'letter'</span>
<a href="#l10.157"></a><span id="l10.157" class="difflineminus">-</span>
<a href="#l10.158"></a><span id="l10.158" class="difflineminus">-# The font size ('10pt', '11pt' or '12pt').</span>
<a href="#l10.159"></a><span id="l10.159" class="difflineminus">-#latex_font_size = '10pt'</span>
<a href="#l10.160"></a><span id="l10.160" class="difflineminus">-</span>
<a href="#l10.161"></a><span id="l10.161" class="difflineminus">-# Grouping the document tree into LaTeX files. List of tuples</span>
<a href="#l10.162"></a><span id="l10.162" class="difflineminus">-# (source start file, target name, title, author, document class [howto/manual]).</span>
<a href="#l10.163"></a><span id="l10.163" class="difflineminus">-latex_documents = [</span>
<a href="#l10.164"></a><span id="l10.164" class="difflineminus">-  ('index', 'simplejson.tex', 'simplejson Documentation',</span>
<a href="#l10.165"></a><span id="l10.165" class="difflineminus">-   'Bob Ippolito', 'manual'),</span>
<a href="#l10.166"></a><span id="l10.166" class="difflineminus">-]</span>
<a href="#l10.167"></a><span id="l10.167" class="difflineminus">-</span>
<a href="#l10.168"></a><span id="l10.168" class="difflineminus">-# The name of an image file (relative to this directory) to place at the top of</span>
<a href="#l10.169"></a><span id="l10.169" class="difflineminus">-# the title page.</span>
<a href="#l10.170"></a><span id="l10.170" class="difflineminus">-#latex_logo = None</span>
<a href="#l10.171"></a><span id="l10.171" class="difflineminus">-</span>
<a href="#l10.172"></a><span id="l10.172" class="difflineminus">-# For &quot;manual&quot; documents, if this is true, then toplevel headings are parts,</span>
<a href="#l10.173"></a><span id="l10.173" class="difflineminus">-# not chapters.</span>
<a href="#l10.174"></a><span id="l10.174" class="difflineminus">-#latex_use_parts = False</span>
<a href="#l10.175"></a><span id="l10.175" class="difflineminus">-</span>
<a href="#l10.176"></a><span id="l10.176" class="difflineminus">-# Additional stuff for the LaTeX preamble.</span>
<a href="#l10.177"></a><span id="l10.177" class="difflineminus">-#latex_preamble = ''</span>
<a href="#l10.178"></a><span id="l10.178" class="difflineminus">-</span>
<a href="#l10.179"></a><span id="l10.179" class="difflineminus">-# Documents to append as an appendix to all manuals.</span>
<a href="#l10.180"></a><span id="l10.180" class="difflineminus">-#latex_appendices = []</span>
<a href="#l10.181"></a><span id="l10.181" class="difflineminus">-</span>
<a href="#l10.182"></a><span id="l10.182" class="difflineminus">-# If false, no module index is generated.</span>
<a href="#l10.183"></a><span id="l10.183" class="difflineminus">-#latex_use_modindex = True</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/ez_setup.py</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,284 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-#!python</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">-&quot;&quot;&quot;Bootstrap setuptools installation</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">-</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-If you want to use setuptools in your package's setup.py, just include this</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-file in the same directory with it, and add this to the top of your setup.py::</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-    from ez_setup import use_setuptools</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-    use_setuptools()</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-If you want to require a specific version of setuptools, set a download</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-mirror, or use an alternate download directory, you can do so by supplying</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-the appropriate options to ``use_setuptools()``.</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-This file can also be run as a script to install or upgrade setuptools.</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-import sys</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-DEFAULT_VERSION = &quot;0.6c11&quot;</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-DEFAULT_URL     = &quot;http://pypi.python.org/packages/%s/s/setuptools/&quot; % sys.version[:3]</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineminus">-</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-md5_data = {</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-    'setuptools-0.6b1-py2.3.egg': '8822caf901250d848b996b7f25c6e6ca',</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-    'setuptools-0.6b1-py2.4.egg': 'b79a8a403e4502fbb85ee3f1941735cb',</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineminus">-    'setuptools-0.6b2-py2.3.egg': '5657759d8a6d8fc44070a9d07272d99b',</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-    'setuptools-0.6b2-py2.4.egg': '4996a8d169d2be661fa32a6e52e4f82a',</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-    'setuptools-0.6b3-py2.3.egg': 'bb31c0fc7399a63579975cad9f5a0618',</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-    'setuptools-0.6b3-py2.4.egg': '38a8c6b3d6ecd22247f179f7da669fac',</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-    'setuptools-0.6b4-py2.3.egg': '62045a24ed4e1ebc77fe039aa4e6f7e5',</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-    'setuptools-0.6b4-py2.4.egg': '4cb2a185d228dacffb2d17f103b3b1c4',</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-    'setuptools-0.6c1-py2.3.egg': 'b3f2b5539d65cb7f74ad79127f1a908c',</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-    'setuptools-0.6c1-py2.4.egg': 'b45adeda0667d2d2ffe14009364f2a4b',</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-    'setuptools-0.6c10-py2.3.egg': 'ce1e2ab5d3a0256456d9fc13800a7090',</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-    'setuptools-0.6c10-py2.4.egg': '57d6d9d6e9b80772c59a53a8433a5dd4',</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-    'setuptools-0.6c10-py2.5.egg': 'de46ac8b1c97c895572e5e8596aeb8c7',</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineminus">-    'setuptools-0.6c10-py2.6.egg': '58ea40aef06da02ce641495523a0b7f5',</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineminus">-    'setuptools-0.6c11-py2.3.egg': '2baeac6e13d414a9d28e7ba5b5a596de',</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineminus">-    'setuptools-0.6c11-py2.4.egg': 'bd639f9b0eac4c42497034dec2ec0c2b',</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineminus">-    'setuptools-0.6c11-py2.5.egg': '64c94f3bf7a72a13ec83e0b24f2749b2',</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-    'setuptools-0.6c11-py2.6.egg': 'bfa92100bd772d5a213eedd356d64086',</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-    'setuptools-0.6c2-py2.3.egg': 'f0064bf6aa2b7d0f3ba0b43f20817c27',</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-    'setuptools-0.6c2-py2.4.egg': '616192eec35f47e8ea16cd6a122b7277',</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-    'setuptools-0.6c3-py2.3.egg': 'f181fa125dfe85a259c9cd6f1d7b78fa',</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineminus">-    'setuptools-0.6c3-py2.4.egg': 'e0ed74682c998bfb73bf803a50e7b71e',</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-    'setuptools-0.6c3-py2.5.egg': 'abef16fdd61955514841c7c6bd98965e',</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineminus">-    'setuptools-0.6c4-py2.3.egg': 'b0b9131acab32022bfac7f44c5d7971f',</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-    'setuptools-0.6c4-py2.4.egg': '2a1f9656d4fbf3c97bf946c0a124e6e2',</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-    'setuptools-0.6c4-py2.5.egg': '8f5a052e32cdb9c72bcf4b5526f28afc',</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-    'setuptools-0.6c5-py2.3.egg': 'ee9fd80965da04f2f3e6b3576e9d8167',</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineminus">-    'setuptools-0.6c5-py2.4.egg': 'afe2adf1c01701ee841761f5bcd8aa64',</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineminus">-    'setuptools-0.6c5-py2.5.egg': 'a8d3f61494ccaa8714dfed37bccd3d5d',</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineminus">-    'setuptools-0.6c6-py2.3.egg': '35686b78116a668847237b69d549ec20',</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineminus">-    'setuptools-0.6c6-py2.4.egg': '3c56af57be3225019260a644430065ab',</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineminus">-    'setuptools-0.6c6-py2.5.egg': 'b2f8a7520709a5b34f80946de5f02f53',</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineminus">-    'setuptools-0.6c7-py2.3.egg': '209fdf9adc3a615e5115b725658e13e2',</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineminus">-    'setuptools-0.6c7-py2.4.egg': '5a8f954807d46a0fb67cf1f26c55a82e',</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineminus">-    'setuptools-0.6c7-py2.5.egg': '45d2ad28f9750e7434111fde831e8372',</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-    'setuptools-0.6c8-py2.3.egg': '50759d29b349db8cfd807ba8303f1902',</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">-    'setuptools-0.6c8-py2.4.egg': 'cba38d74f7d483c06e9daa6070cce6de',</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-    'setuptools-0.6c8-py2.5.egg': '1721747ee329dc150590a58b3e1ac95b',</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-    'setuptools-0.6c9-py2.3.egg': 'a83c4020414807b496e4cfbe08507c03',</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-    'setuptools-0.6c9-py2.4.egg': '260a2be2e5388d66bdaee06abec6342a',</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">-    'setuptools-0.6c9-py2.5.egg': 'fe67c3e5a17b12c0e7c541b7ea43a8e6',</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-    'setuptools-0.6c9-py2.6.egg': 'ca37b1ff16fa2ede6e19383e7b59245a',</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineminus">-}</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineminus">-</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-import sys, os</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-try: from hashlib import md5</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineminus">-except ImportError: from md5 import md5</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-def _validate_md5(egg_name, data):</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-    if egg_name in md5_data:</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineminus">-        digest = md5(data).hexdigest()</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineminus">-        if digest != md5_data[egg_name]:</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineminus">-            print &gt;&gt;sys.stderr, (</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineminus">-                &quot;md5 validation of %s failed!  (Possible download problem?)&quot;</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineminus">-                % egg_name</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineminus">-            )</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineminus">-            sys.exit(2)</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineminus">-    return data</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineminus">-</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineminus">-def use_setuptools(</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineminus">-    version=DEFAULT_VERSION, download_base=DEFAULT_URL, to_dir=os.curdir,</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineminus">-    download_delay=15</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineminus">-):</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineminus">-    &quot;&quot;&quot;Automatically find/download setuptools and make it available on sys.path</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineminus">-</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineminus">-    `version` should be a valid setuptools version number that is available</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-    as an egg for download under the `download_base` URL (which should end with</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-    a '/').  `to_dir` is the directory where setuptools will be downloaded, if</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineminus">-    it is not already available.  If `download_delay` is specified, it should</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineminus">-    be the number of seconds that will be paused before initiating a download,</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineminus">-    should one be required.  If an older version of setuptools is installed,</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineminus">-    this routine will print a message to ``sys.stderr`` and raise SystemExit in</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineminus">-    an attempt to abort the calling script.</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineminus">-    was_imported = 'pkg_resources' in sys.modules or 'setuptools' in sys.modules</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineminus">-    def do_download():</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineminus">-        egg = download_setuptools(version, download_base, to_dir, download_delay)</span>
<a href="#l11.102"></a><span id="l11.102" class="difflineminus">-        sys.path.insert(0, egg)</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineminus">-        import setuptools; setuptools.bootstrap_install_from = egg</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineminus">-    try:</span>
<a href="#l11.105"></a><span id="l11.105" class="difflineminus">-        import pkg_resources</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineminus">-    except ImportError:</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineminus">-        return do_download()       </span>
<a href="#l11.108"></a><span id="l11.108" class="difflineminus">-    try:</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineminus">-        pkg_resources.require(&quot;setuptools&gt;=&quot;+version); return</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineminus">-    except pkg_resources.VersionConflict, e:</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineminus">-        if was_imported:</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineminus">-            print &gt;&gt;sys.stderr, (</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineminus">-            &quot;The required version of setuptools (&gt;=%s) is not available, and\n&quot;</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineminus">-            &quot;can't be installed while this script is running. Please install\n&quot;</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineminus">-            &quot; a more recent version first, using 'easy_install -U setuptools'.&quot;</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineminus">-            &quot;\n\n(Currently using %r)&quot;</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineminus">-            ) % (version, e.args[0])</span>
<a href="#l11.118"></a><span id="l11.118" class="difflineminus">-            sys.exit(2)</span>
<a href="#l11.119"></a><span id="l11.119" class="difflineminus">-        else:</span>
<a href="#l11.120"></a><span id="l11.120" class="difflineminus">-            del pkg_resources, sys.modules['pkg_resources']    # reload ok</span>
<a href="#l11.121"></a><span id="l11.121" class="difflineminus">-            return do_download()</span>
<a href="#l11.122"></a><span id="l11.122" class="difflineminus">-    except pkg_resources.DistributionNotFound:</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineminus">-        return do_download()</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineminus">-</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineminus">-def download_setuptools(</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineminus">-    version=DEFAULT_VERSION, download_base=DEFAULT_URL, to_dir=os.curdir,</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineminus">-    delay = 15</span>
<a href="#l11.128"></a><span id="l11.128" class="difflineminus">-):</span>
<a href="#l11.129"></a><span id="l11.129" class="difflineminus">-    &quot;&quot;&quot;Download setuptools from a specified location and return its filename</span>
<a href="#l11.130"></a><span id="l11.130" class="difflineminus">-</span>
<a href="#l11.131"></a><span id="l11.131" class="difflineminus">-    `version` should be a valid setuptools version number that is available</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineminus">-    as an egg for download under the `download_base` URL (which should end</span>
<a href="#l11.133"></a><span id="l11.133" class="difflineminus">-    with a '/'). `to_dir` is the directory where the egg will be downloaded.</span>
<a href="#l11.134"></a><span id="l11.134" class="difflineminus">-    `delay` is the number of seconds to pause before an actual download attempt.</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineminus">-    import urllib2, shutil</span>
<a href="#l11.137"></a><span id="l11.137" class="difflineminus">-    egg_name = &quot;setuptools-%s-py%s.egg&quot; % (version,sys.version[:3])</span>
<a href="#l11.138"></a><span id="l11.138" class="difflineminus">-    url = download_base + egg_name</span>
<a href="#l11.139"></a><span id="l11.139" class="difflineminus">-    saveto = os.path.join(to_dir, egg_name)</span>
<a href="#l11.140"></a><span id="l11.140" class="difflineminus">-    src = dst = None</span>
<a href="#l11.141"></a><span id="l11.141" class="difflineminus">-    if not os.path.exists(saveto):  # Avoid repeated downloads</span>
<a href="#l11.142"></a><span id="l11.142" class="difflineminus">-        try:</span>
<a href="#l11.143"></a><span id="l11.143" class="difflineminus">-            from distutils import log</span>
<a href="#l11.144"></a><span id="l11.144" class="difflineminus">-            if delay:</span>
<a href="#l11.145"></a><span id="l11.145" class="difflineminus">-                log.warn(&quot;&quot;&quot;</span>
<a href="#l11.146"></a><span id="l11.146" class="difflineminus">----------------------------------------------------------------------------</span>
<a href="#l11.147"></a><span id="l11.147" class="difflineminus">-This script requires setuptools version %s to run (even to display</span>
<a href="#l11.148"></a><span id="l11.148" class="difflineminus">-help).  I will attempt to download it for you (from</span>
<a href="#l11.149"></a><span id="l11.149" class="difflineminus">-%s), but</span>
<a href="#l11.150"></a><span id="l11.150" class="difflineminus">-you may need to enable firewall access for this script first.</span>
<a href="#l11.151"></a><span id="l11.151" class="difflineminus">-I will start the download in %d seconds.</span>
<a href="#l11.152"></a><span id="l11.152" class="difflineminus">-</span>
<a href="#l11.153"></a><span id="l11.153" class="difflineminus">-(Note: if this machine does not have network access, please obtain the file</span>
<a href="#l11.154"></a><span id="l11.154" class="difflineminus">-</span>
<a href="#l11.155"></a><span id="l11.155" class="difflineminus">-   %s</span>
<a href="#l11.156"></a><span id="l11.156" class="difflineminus">-</span>
<a href="#l11.157"></a><span id="l11.157" class="difflineminus">-and place it in this directory before rerunning this script.)</span>
<a href="#l11.158"></a><span id="l11.158" class="difflineminus">----------------------------------------------------------------------------&quot;&quot;&quot;,</span>
<a href="#l11.159"></a><span id="l11.159" class="difflineminus">-                    version, download_base, delay, url</span>
<a href="#l11.160"></a><span id="l11.160" class="difflineminus">-                ); from time import sleep; sleep(delay)</span>
<a href="#l11.161"></a><span id="l11.161" class="difflineminus">-            log.warn(&quot;Downloading %s&quot;, url)</span>
<a href="#l11.162"></a><span id="l11.162" class="difflineminus">-            src = urllib2.urlopen(url)</span>
<a href="#l11.163"></a><span id="l11.163" class="difflineminus">-            # Read/write all in one block, so we don't create a corrupt file</span>
<a href="#l11.164"></a><span id="l11.164" class="difflineminus">-            # if the download is interrupted.</span>
<a href="#l11.165"></a><span id="l11.165" class="difflineminus">-            data = _validate_md5(egg_name, src.read())</span>
<a href="#l11.166"></a><span id="l11.166" class="difflineminus">-            dst = open(saveto,&quot;wb&quot;); dst.write(data)</span>
<a href="#l11.167"></a><span id="l11.167" class="difflineminus">-        finally:</span>
<a href="#l11.168"></a><span id="l11.168" class="difflineminus">-            if src: src.close()</span>
<a href="#l11.169"></a><span id="l11.169" class="difflineminus">-            if dst: dst.close()</span>
<a href="#l11.170"></a><span id="l11.170" class="difflineminus">-    return os.path.realpath(saveto)</span>
<a href="#l11.171"></a><span id="l11.171" class="difflineminus">-</span>
<a href="#l11.172"></a><span id="l11.172" class="difflineminus">-</span>
<a href="#l11.173"></a><span id="l11.173" class="difflineminus">-</span>
<a href="#l11.174"></a><span id="l11.174" class="difflineminus">-</span>
<a href="#l11.175"></a><span id="l11.175" class="difflineminus">-</span>
<a href="#l11.176"></a><span id="l11.176" class="difflineminus">-</span>
<a href="#l11.177"></a><span id="l11.177" class="difflineminus">-</span>
<a href="#l11.178"></a><span id="l11.178" class="difflineminus">-</span>
<a href="#l11.179"></a><span id="l11.179" class="difflineminus">-</span>
<a href="#l11.180"></a><span id="l11.180" class="difflineminus">-</span>
<a href="#l11.181"></a><span id="l11.181" class="difflineminus">-</span>
<a href="#l11.182"></a><span id="l11.182" class="difflineminus">-</span>
<a href="#l11.183"></a><span id="l11.183" class="difflineminus">-</span>
<a href="#l11.184"></a><span id="l11.184" class="difflineminus">-</span>
<a href="#l11.185"></a><span id="l11.185" class="difflineminus">-</span>
<a href="#l11.186"></a><span id="l11.186" class="difflineminus">-</span>
<a href="#l11.187"></a><span id="l11.187" class="difflineminus">-</span>
<a href="#l11.188"></a><span id="l11.188" class="difflineminus">-</span>
<a href="#l11.189"></a><span id="l11.189" class="difflineminus">-</span>
<a href="#l11.190"></a><span id="l11.190" class="difflineminus">-</span>
<a href="#l11.191"></a><span id="l11.191" class="difflineminus">-</span>
<a href="#l11.192"></a><span id="l11.192" class="difflineminus">-</span>
<a href="#l11.193"></a><span id="l11.193" class="difflineminus">-</span>
<a href="#l11.194"></a><span id="l11.194" class="difflineminus">-</span>
<a href="#l11.195"></a><span id="l11.195" class="difflineminus">-</span>
<a href="#l11.196"></a><span id="l11.196" class="difflineminus">-</span>
<a href="#l11.197"></a><span id="l11.197" class="difflineminus">-</span>
<a href="#l11.198"></a><span id="l11.198" class="difflineminus">-</span>
<a href="#l11.199"></a><span id="l11.199" class="difflineminus">-</span>
<a href="#l11.200"></a><span id="l11.200" class="difflineminus">-</span>
<a href="#l11.201"></a><span id="l11.201" class="difflineminus">-</span>
<a href="#l11.202"></a><span id="l11.202" class="difflineminus">-</span>
<a href="#l11.203"></a><span id="l11.203" class="difflineminus">-</span>
<a href="#l11.204"></a><span id="l11.204" class="difflineminus">-</span>
<a href="#l11.205"></a><span id="l11.205" class="difflineminus">-</span>
<a href="#l11.206"></a><span id="l11.206" class="difflineminus">-</span>
<a href="#l11.207"></a><span id="l11.207" class="difflineminus">-def main(argv, version=DEFAULT_VERSION):</span>
<a href="#l11.208"></a><span id="l11.208" class="difflineminus">-    &quot;&quot;&quot;Install or upgrade setuptools and EasyInstall&quot;&quot;&quot;</span>
<a href="#l11.209"></a><span id="l11.209" class="difflineminus">-    try:</span>
<a href="#l11.210"></a><span id="l11.210" class="difflineminus">-        import setuptools</span>
<a href="#l11.211"></a><span id="l11.211" class="difflineminus">-    except ImportError:</span>
<a href="#l11.212"></a><span id="l11.212" class="difflineminus">-        egg = None</span>
<a href="#l11.213"></a><span id="l11.213" class="difflineminus">-        try:</span>
<a href="#l11.214"></a><span id="l11.214" class="difflineminus">-            egg = download_setuptools(version, delay=0)</span>
<a href="#l11.215"></a><span id="l11.215" class="difflineminus">-            sys.path.insert(0,egg)</span>
<a href="#l11.216"></a><span id="l11.216" class="difflineminus">-            from setuptools.command.easy_install import main</span>
<a href="#l11.217"></a><span id="l11.217" class="difflineminus">-            return main(list(argv)+[egg])   # we're done here</span>
<a href="#l11.218"></a><span id="l11.218" class="difflineminus">-        finally:</span>
<a href="#l11.219"></a><span id="l11.219" class="difflineminus">-            if egg and os.path.exists(egg):</span>
<a href="#l11.220"></a><span id="l11.220" class="difflineminus">-                os.unlink(egg)</span>
<a href="#l11.221"></a><span id="l11.221" class="difflineminus">-    else:</span>
<a href="#l11.222"></a><span id="l11.222" class="difflineminus">-        if setuptools.__version__ == '0.0.1':</span>
<a href="#l11.223"></a><span id="l11.223" class="difflineminus">-            print &gt;&gt;sys.stderr, (</span>
<a href="#l11.224"></a><span id="l11.224" class="difflineminus">-            &quot;You have an obsolete version of setuptools installed.  Please\n&quot;</span>
<a href="#l11.225"></a><span id="l11.225" class="difflineminus">-            &quot;remove it from your system entirely before rerunning this script.&quot;</span>
<a href="#l11.226"></a><span id="l11.226" class="difflineminus">-            )</span>
<a href="#l11.227"></a><span id="l11.227" class="difflineminus">-            sys.exit(2)</span>
<a href="#l11.228"></a><span id="l11.228" class="difflineminus">-</span>
<a href="#l11.229"></a><span id="l11.229" class="difflineminus">-    req = &quot;setuptools&gt;=&quot;+version</span>
<a href="#l11.230"></a><span id="l11.230" class="difflineminus">-    import pkg_resources</span>
<a href="#l11.231"></a><span id="l11.231" class="difflineminus">-    try:</span>
<a href="#l11.232"></a><span id="l11.232" class="difflineminus">-        pkg_resources.require(req)</span>
<a href="#l11.233"></a><span id="l11.233" class="difflineminus">-    except pkg_resources.VersionConflict:</span>
<a href="#l11.234"></a><span id="l11.234" class="difflineminus">-        try:</span>
<a href="#l11.235"></a><span id="l11.235" class="difflineminus">-            from setuptools.command.easy_install import main</span>
<a href="#l11.236"></a><span id="l11.236" class="difflineminus">-        except ImportError:</span>
<a href="#l11.237"></a><span id="l11.237" class="difflineminus">-            from easy_install import main</span>
<a href="#l11.238"></a><span id="l11.238" class="difflineminus">-        main(list(argv)+[download_setuptools(delay=0)])</span>
<a href="#l11.239"></a><span id="l11.239" class="difflineminus">-        sys.exit(0) # try to force an exit</span>
<a href="#l11.240"></a><span id="l11.240" class="difflineminus">-    else:</span>
<a href="#l11.241"></a><span id="l11.241" class="difflineminus">-        if argv:</span>
<a href="#l11.242"></a><span id="l11.242" class="difflineminus">-            from setuptools.command.easy_install import main</span>
<a href="#l11.243"></a><span id="l11.243" class="difflineminus">-            main(argv)</span>
<a href="#l11.244"></a><span id="l11.244" class="difflineminus">-        else:</span>
<a href="#l11.245"></a><span id="l11.245" class="difflineminus">-            print &quot;Setuptools version&quot;,version,&quot;or greater has been installed.&quot;</span>
<a href="#l11.246"></a><span id="l11.246" class="difflineminus">-            print '(Run &quot;ez_setup.py -U setuptools&quot; to reinstall or upgrade.)'</span>
<a href="#l11.247"></a><span id="l11.247" class="difflineminus">-</span>
<a href="#l11.248"></a><span id="l11.248" class="difflineminus">-def update_md5(filenames):</span>
<a href="#l11.249"></a><span id="l11.249" class="difflineminus">-    &quot;&quot;&quot;Update our built-in md5 registry&quot;&quot;&quot;</span>
<a href="#l11.250"></a><span id="l11.250" class="difflineminus">-</span>
<a href="#l11.251"></a><span id="l11.251" class="difflineminus">-    import re</span>
<a href="#l11.252"></a><span id="l11.252" class="difflineminus">-</span>
<a href="#l11.253"></a><span id="l11.253" class="difflineminus">-    for name in filenames:</span>
<a href="#l11.254"></a><span id="l11.254" class="difflineminus">-        base = os.path.basename(name)</span>
<a href="#l11.255"></a><span id="l11.255" class="difflineminus">-        f = open(name,'rb')</span>
<a href="#l11.256"></a><span id="l11.256" class="difflineminus">-        md5_data[base] = md5(f.read()).hexdigest()</span>
<a href="#l11.257"></a><span id="l11.257" class="difflineminus">-        f.close()</span>
<a href="#l11.258"></a><span id="l11.258" class="difflineminus">-</span>
<a href="#l11.259"></a><span id="l11.259" class="difflineminus">-    data = [&quot;    %r: %r,\n&quot; % it for it in md5_data.items()]</span>
<a href="#l11.260"></a><span id="l11.260" class="difflineminus">-    data.sort()</span>
<a href="#l11.261"></a><span id="l11.261" class="difflineminus">-    repl = &quot;&quot;.join(data)</span>
<a href="#l11.262"></a><span id="l11.262" class="difflineminus">-</span>
<a href="#l11.263"></a><span id="l11.263" class="difflineminus">-    import inspect</span>
<a href="#l11.264"></a><span id="l11.264" class="difflineminus">-    srcfile = inspect.getsourcefile(sys.modules[__name__])</span>
<a href="#l11.265"></a><span id="l11.265" class="difflineminus">-    f = open(srcfile, 'rb'); src = f.read(); f.close()</span>
<a href="#l11.266"></a><span id="l11.266" class="difflineminus">-</span>
<a href="#l11.267"></a><span id="l11.267" class="difflineminus">-    match = re.search(&quot;\nmd5_data = {\n([^}]+)}&quot;, src)</span>
<a href="#l11.268"></a><span id="l11.268" class="difflineminus">-    if not match:</span>
<a href="#l11.269"></a><span id="l11.269" class="difflineminus">-        print &gt;&gt;sys.stderr, &quot;Internal error!&quot;</span>
<a href="#l11.270"></a><span id="l11.270" class="difflineminus">-        sys.exit(2)</span>
<a href="#l11.271"></a><span id="l11.271" class="difflineminus">-</span>
<a href="#l11.272"></a><span id="l11.272" class="difflineminus">-    src = src[:match.start(1)] + repl + src[match.end(1):]</span>
<a href="#l11.273"></a><span id="l11.273" class="difflineminus">-    f = open(srcfile,'w')</span>
<a href="#l11.274"></a><span id="l11.274" class="difflineminus">-    f.write(src)</span>
<a href="#l11.275"></a><span id="l11.275" class="difflineminus">-    f.close()</span>
<a href="#l11.276"></a><span id="l11.276" class="difflineminus">-</span>
<a href="#l11.277"></a><span id="l11.277" class="difflineminus">-</span>
<a href="#l11.278"></a><span id="l11.278" class="difflineminus">-if __name__=='__main__':</span>
<a href="#l11.279"></a><span id="l11.279" class="difflineminus">-    if len(sys.argv)&gt;2 and sys.argv[1]=='--md5update':</span>
<a href="#l11.280"></a><span id="l11.280" class="difflineminus">-        update_md5(sys.argv[2:])</span>
<a href="#l11.281"></a><span id="l11.281" class="difflineminus">-    else:</span>
<a href="#l11.282"></a><span id="l11.282" class="difflineminus">-        main(sys.argv[1:])</span>
<a href="#l11.283"></a><span id="l11.283" class="difflineminus">-</span>
<a href="#l11.284"></a><span id="l11.284" class="difflineminus">-</span>
<a href="#l11.285"></a><span id="l11.285" class="difflineminus">-</span>
<a href="#l11.286"></a><span id="l11.286" class="difflineminus">-</span>
<a href="#l11.287"></a><span id="l11.287" class="difflineminus">-</span>
<a href="#l11.288"></a><span id="l11.288" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">deleted file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/index.rst</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ /dev/null</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -1,506 +0,0 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">-:mod:`simplejson` --- JSON encoder and decoder</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">-==============================================</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">-</span>
<a href="#l12.8"></a><span id="l12.8" class="difflineminus">-.. module:: simplejson</span>
<a href="#l12.9"></a><span id="l12.9" class="difflineminus">-   :synopsis: Encode and decode the JSON format.</span>
<a href="#l12.10"></a><span id="l12.10" class="difflineminus">-.. moduleauthor:: Bob Ippolito &lt;bob@redivi.com&gt;</span>
<a href="#l12.11"></a><span id="l12.11" class="difflineminus">-.. sectionauthor:: Bob Ippolito &lt;bob@redivi.com&gt;</span>
<a href="#l12.12"></a><span id="l12.12" class="difflineminus">-</span>
<a href="#l12.13"></a><span id="l12.13" class="difflineminus">-JSON (JavaScript Object Notation) &lt;http://json.org&gt; is a subset of JavaScript</span>
<a href="#l12.14"></a><span id="l12.14" class="difflineminus">-syntax (ECMA-262 3rd edition) used as a lightweight data interchange format.</span>
<a href="#l12.15"></a><span id="l12.15" class="difflineminus">-</span>
<a href="#l12.16"></a><span id="l12.16" class="difflineminus">-:mod:`simplejson` exposes an API familiar to users of the standard library</span>
<a href="#l12.17"></a><span id="l12.17" class="difflineminus">-:mod:`marshal` and :mod:`pickle` modules. It is the externally maintained</span>
<a href="#l12.18"></a><span id="l12.18" class="difflineminus">-version of the :mod:`json` library contained in Python 2.6, but maintains</span>
<a href="#l12.19"></a><span id="l12.19" class="difflineminus">-compatibility with Python 2.5 and (currently) has</span>
<a href="#l12.20"></a><span id="l12.20" class="difflineminus">-significant performance advantages, even without using the optional C</span>
<a href="#l12.21"></a><span id="l12.21" class="difflineminus">-extension for speedups.</span>
<a href="#l12.22"></a><span id="l12.22" class="difflineminus">-</span>
<a href="#l12.23"></a><span id="l12.23" class="difflineminus">-Development of simplejson happens on Github:</span>
<a href="#l12.24"></a><span id="l12.24" class="difflineminus">-http://github.com/simplejson/simplejson</span>
<a href="#l12.25"></a><span id="l12.25" class="difflineminus">-</span>
<a href="#l12.26"></a><span id="l12.26" class="difflineminus">-Encoding basic Python object hierarchies::</span>
<a href="#l12.27"></a><span id="l12.27" class="difflineminus">-</span>
<a href="#l12.28"></a><span id="l12.28" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.29"></a><span id="l12.29" class="difflineminus">-    &gt;&gt;&gt; json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}])</span>
<a href="#l12.30"></a><span id="l12.30" class="difflineminus">-    '[&quot;foo&quot;, {&quot;bar&quot;: [&quot;baz&quot;, null, 1.0, 2]}]'</span>
<a href="#l12.31"></a><span id="l12.31" class="difflineminus">-    &gt;&gt;&gt; print json.dumps(&quot;\&quot;foo\bar&quot;)</span>
<a href="#l12.32"></a><span id="l12.32" class="difflineminus">-    &quot;\&quot;foo\bar&quot;</span>
<a href="#l12.33"></a><span id="l12.33" class="difflineminus">-    &gt;&gt;&gt; print json.dumps(u'\u1234')</span>
<a href="#l12.34"></a><span id="l12.34" class="difflineminus">-    &quot;\u1234&quot;</span>
<a href="#l12.35"></a><span id="l12.35" class="difflineminus">-    &gt;&gt;&gt; print json.dumps('\\')</span>
<a href="#l12.36"></a><span id="l12.36" class="difflineminus">-    &quot;\\&quot;</span>
<a href="#l12.37"></a><span id="l12.37" class="difflineminus">-    &gt;&gt;&gt; print json.dumps({&quot;c&quot;: 0, &quot;b&quot;: 0, &quot;a&quot;: 0}, sort_keys=True)</span>
<a href="#l12.38"></a><span id="l12.38" class="difflineminus">-    {&quot;a&quot;: 0, &quot;b&quot;: 0, &quot;c&quot;: 0}</span>
<a href="#l12.39"></a><span id="l12.39" class="difflineminus">-    &gt;&gt;&gt; from StringIO import StringIO</span>
<a href="#l12.40"></a><span id="l12.40" class="difflineminus">-    &gt;&gt;&gt; io = StringIO()</span>
<a href="#l12.41"></a><span id="l12.41" class="difflineminus">-    &gt;&gt;&gt; json.dump(['streaming API'], io)</span>
<a href="#l12.42"></a><span id="l12.42" class="difflineminus">-    &gt;&gt;&gt; io.getvalue()</span>
<a href="#l12.43"></a><span id="l12.43" class="difflineminus">-    '[&quot;streaming API&quot;]'</span>
<a href="#l12.44"></a><span id="l12.44" class="difflineminus">-</span>
<a href="#l12.45"></a><span id="l12.45" class="difflineminus">-Compact encoding::</span>
<a href="#l12.46"></a><span id="l12.46" class="difflineminus">-</span>
<a href="#l12.47"></a><span id="l12.47" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.48"></a><span id="l12.48" class="difflineminus">-    &gt;&gt;&gt; json.dumps([1,2,3,{'4': 5, '6': 7}], separators=(',',':'))</span>
<a href="#l12.49"></a><span id="l12.49" class="difflineminus">-    '[1,2,3,{&quot;4&quot;:5,&quot;6&quot;:7}]'</span>
<a href="#l12.50"></a><span id="l12.50" class="difflineminus">-</span>
<a href="#l12.51"></a><span id="l12.51" class="difflineminus">-Pretty printing::</span>
<a href="#l12.52"></a><span id="l12.52" class="difflineminus">-</span>
<a href="#l12.53"></a><span id="l12.53" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.54"></a><span id="l12.54" class="difflineminus">-    &gt;&gt;&gt; s = json.dumps({'4': 5, '6': 7}, sort_keys=True, indent=4 * ' ')</span>
<a href="#l12.55"></a><span id="l12.55" class="difflineminus">-    &gt;&gt;&gt; print '\n'.join([l.rstrip() for l in  s.splitlines()])</span>
<a href="#l12.56"></a><span id="l12.56" class="difflineminus">-    {</span>
<a href="#l12.57"></a><span id="l12.57" class="difflineminus">-        &quot;4&quot;: 5,</span>
<a href="#l12.58"></a><span id="l12.58" class="difflineminus">-        &quot;6&quot;: 7</span>
<a href="#l12.59"></a><span id="l12.59" class="difflineminus">-    }</span>
<a href="#l12.60"></a><span id="l12.60" class="difflineminus">-</span>
<a href="#l12.61"></a><span id="l12.61" class="difflineminus">-Decoding JSON::</span>
<a href="#l12.62"></a><span id="l12.62" class="difflineminus">-</span>
<a href="#l12.63"></a><span id="l12.63" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.64"></a><span id="l12.64" class="difflineminus">-    &gt;&gt;&gt; obj = [u'foo', {u'bar': [u'baz', None, 1.0, 2]}]</span>
<a href="#l12.65"></a><span id="l12.65" class="difflineminus">-    &gt;&gt;&gt; json.loads('[&quot;foo&quot;, {&quot;bar&quot;:[&quot;baz&quot;, null, 1.0, 2]}]') == obj</span>
<a href="#l12.66"></a><span id="l12.66" class="difflineminus">-    True</span>
<a href="#l12.67"></a><span id="l12.67" class="difflineminus">-    &gt;&gt;&gt; json.loads('&quot;\\&quot;foo\\bar&quot;') == u'&quot;foo\x08ar'</span>
<a href="#l12.68"></a><span id="l12.68" class="difflineminus">-    True</span>
<a href="#l12.69"></a><span id="l12.69" class="difflineminus">-    &gt;&gt;&gt; from StringIO import StringIO</span>
<a href="#l12.70"></a><span id="l12.70" class="difflineminus">-    &gt;&gt;&gt; io = StringIO('[&quot;streaming API&quot;]')</span>
<a href="#l12.71"></a><span id="l12.71" class="difflineminus">-    &gt;&gt;&gt; json.load(io)[0] == 'streaming API'</span>
<a href="#l12.72"></a><span id="l12.72" class="difflineminus">-    True</span>
<a href="#l12.73"></a><span id="l12.73" class="difflineminus">-</span>
<a href="#l12.74"></a><span id="l12.74" class="difflineminus">-Using Decimal instead of float::</span>
<a href="#l12.75"></a><span id="l12.75" class="difflineminus">-</span>
<a href="#l12.76"></a><span id="l12.76" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.77"></a><span id="l12.77" class="difflineminus">-    &gt;&gt;&gt; from decimal import Decimal</span>
<a href="#l12.78"></a><span id="l12.78" class="difflineminus">-    &gt;&gt;&gt; json.loads('1.1', use_decimal=True) == Decimal('1.1')</span>
<a href="#l12.79"></a><span id="l12.79" class="difflineminus">-    True</span>
<a href="#l12.80"></a><span id="l12.80" class="difflineminus">-    &gt;&gt;&gt; json.dumps(Decimal('1.1'), use_decimal=True) == '1.1'</span>
<a href="#l12.81"></a><span id="l12.81" class="difflineminus">-    True</span>
<a href="#l12.82"></a><span id="l12.82" class="difflineminus">-</span>
<a href="#l12.83"></a><span id="l12.83" class="difflineminus">-Specializing JSON object decoding::</span>
<a href="#l12.84"></a><span id="l12.84" class="difflineminus">-</span>
<a href="#l12.85"></a><span id="l12.85" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.86"></a><span id="l12.86" class="difflineminus">-    &gt;&gt;&gt; def as_complex(dct):</span>
<a href="#l12.87"></a><span id="l12.87" class="difflineminus">-    ...     if '__complex__' in dct:</span>
<a href="#l12.88"></a><span id="l12.88" class="difflineminus">-    ...         return complex(dct['real'], dct['imag'])</span>
<a href="#l12.89"></a><span id="l12.89" class="difflineminus">-    ...     return dct</span>
<a href="#l12.90"></a><span id="l12.90" class="difflineminus">-    ...</span>
<a href="#l12.91"></a><span id="l12.91" class="difflineminus">-    &gt;&gt;&gt; json.loads('{&quot;__complex__&quot;: true, &quot;real&quot;: 1, &quot;imag&quot;: 2}',</span>
<a href="#l12.92"></a><span id="l12.92" class="difflineminus">-    ...     object_hook=as_complex)</span>
<a href="#l12.93"></a><span id="l12.93" class="difflineminus">-    (1+2j)</span>
<a href="#l12.94"></a><span id="l12.94" class="difflineminus">-    &gt;&gt;&gt; import decimal</span>
<a href="#l12.95"></a><span id="l12.95" class="difflineminus">-    &gt;&gt;&gt; json.loads('1.1', parse_float=decimal.Decimal) == decimal.Decimal('1.1')</span>
<a href="#l12.96"></a><span id="l12.96" class="difflineminus">-    True</span>
<a href="#l12.97"></a><span id="l12.97" class="difflineminus">-</span>
<a href="#l12.98"></a><span id="l12.98" class="difflineminus">-Specializing JSON object encoding::</span>
<a href="#l12.99"></a><span id="l12.99" class="difflineminus">-</span>
<a href="#l12.100"></a><span id="l12.100" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.101"></a><span id="l12.101" class="difflineminus">-    &gt;&gt;&gt; def encode_complex(obj):</span>
<a href="#l12.102"></a><span id="l12.102" class="difflineminus">-    ...     if isinstance(obj, complex):</span>
<a href="#l12.103"></a><span id="l12.103" class="difflineminus">-    ...         return [obj.real, obj.imag]</span>
<a href="#l12.104"></a><span id="l12.104" class="difflineminus">-    ...     raise TypeError(repr(o) + &quot; is not JSON serializable&quot;)</span>
<a href="#l12.105"></a><span id="l12.105" class="difflineminus">-    ...</span>
<a href="#l12.106"></a><span id="l12.106" class="difflineminus">-    &gt;&gt;&gt; json.dumps(2 + 1j, default=encode_complex)</span>
<a href="#l12.107"></a><span id="l12.107" class="difflineminus">-    '[2.0, 1.0]'</span>
<a href="#l12.108"></a><span id="l12.108" class="difflineminus">-    &gt;&gt;&gt; json.JSONEncoder(default=encode_complex).encode(2 + 1j)</span>
<a href="#l12.109"></a><span id="l12.109" class="difflineminus">-    '[2.0, 1.0]'</span>
<a href="#l12.110"></a><span id="l12.110" class="difflineminus">-    &gt;&gt;&gt; ''.join(json.JSONEncoder(default=encode_complex).iterencode(2 + 1j))</span>
<a href="#l12.111"></a><span id="l12.111" class="difflineminus">-    '[2.0, 1.0]'</span>
<a href="#l12.112"></a><span id="l12.112" class="difflineminus">-</span>
<a href="#l12.113"></a><span id="l12.113" class="difflineminus">-</span>
<a href="#l12.114"></a><span id="l12.114" class="difflineminus">-.. highlight:: none</span>
<a href="#l12.115"></a><span id="l12.115" class="difflineminus">-</span>
<a href="#l12.116"></a><span id="l12.116" class="difflineminus">-Using :mod:`simplejson.tool` from the shell to validate and pretty-print::</span>
<a href="#l12.117"></a><span id="l12.117" class="difflineminus">-</span>
<a href="#l12.118"></a><span id="l12.118" class="difflineminus">-    $ echo '{&quot;json&quot;:&quot;obj&quot;}' | python -m simplejson.tool</span>
<a href="#l12.119"></a><span id="l12.119" class="difflineminus">-    {</span>
<a href="#l12.120"></a><span id="l12.120" class="difflineminus">-        &quot;json&quot;: &quot;obj&quot;</span>
<a href="#l12.121"></a><span id="l12.121" class="difflineminus">-    }</span>
<a href="#l12.122"></a><span id="l12.122" class="difflineminus">-    $ echo '{ 1.2:3.4}' | python -m simplejson.tool</span>
<a href="#l12.123"></a><span id="l12.123" class="difflineminus">-    Expecting property name: line 1 column 2 (char 2)</span>
<a href="#l12.124"></a><span id="l12.124" class="difflineminus">-</span>
<a href="#l12.125"></a><span id="l12.125" class="difflineminus">-.. highlight:: python</span>
<a href="#l12.126"></a><span id="l12.126" class="difflineminus">-</span>
<a href="#l12.127"></a><span id="l12.127" class="difflineminus">-.. note::</span>
<a href="#l12.128"></a><span id="l12.128" class="difflineminus">-</span>
<a href="#l12.129"></a><span id="l12.129" class="difflineminus">-   The JSON produced by this module's default settings is a subset of</span>
<a href="#l12.130"></a><span id="l12.130" class="difflineminus">-   YAML, so it may be used as a serializer for that as well.</span>
<a href="#l12.131"></a><span id="l12.131" class="difflineminus">-</span>
<a href="#l12.132"></a><span id="l12.132" class="difflineminus">-</span>
<a href="#l12.133"></a><span id="l12.133" class="difflineminus">-Basic Usage</span>
<a href="#l12.134"></a><span id="l12.134" class="difflineminus">------------</span>
<a href="#l12.135"></a><span id="l12.135" class="difflineminus">-</span>
<a href="#l12.136"></a><span id="l12.136" class="difflineminus">-.. function:: dump(obj, fp[, skipkeys[, ensure_ascii[, check_circular[, allow_nan[, cls[, indent[, separators[, encoding[, default[, use_decimal[, **kw]]]]]]]]]]])</span>
<a href="#l12.137"></a><span id="l12.137" class="difflineminus">-</span>
<a href="#l12.138"></a><span id="l12.138" class="difflineminus">-   Serialize *obj* as a JSON formatted stream to *fp* (a ``.write()``-supporting</span>
<a href="#l12.139"></a><span id="l12.139" class="difflineminus">-   file-like object).</span>
<a href="#l12.140"></a><span id="l12.140" class="difflineminus">-</span>
<a href="#l12.141"></a><span id="l12.141" class="difflineminus">-   If *skipkeys* is true (default: ``False``), then dict keys that are not</span>
<a href="#l12.142"></a><span id="l12.142" class="difflineminus">-   of a basic type (:class:`str`, :class:`unicode`, :class:`int`, :class:`long`,</span>
<a href="#l12.143"></a><span id="l12.143" class="difflineminus">-   :class:`float`, :class:`bool`, ``None``) will be skipped instead of raising a</span>
<a href="#l12.144"></a><span id="l12.144" class="difflineminus">-   :exc:`TypeError`.</span>
<a href="#l12.145"></a><span id="l12.145" class="difflineminus">-</span>
<a href="#l12.146"></a><span id="l12.146" class="difflineminus">-   If *ensure_ascii* is false (default: ``True``), then some chunks written</span>
<a href="#l12.147"></a><span id="l12.147" class="difflineminus">-   to *fp* may be :class:`unicode` instances, subject to normal Python</span>
<a href="#l12.148"></a><span id="l12.148" class="difflineminus">-   :class:`str` to :class:`unicode` coercion rules.  Unless ``fp.write()``</span>
<a href="#l12.149"></a><span id="l12.149" class="difflineminus">-   explicitly understands :class:`unicode` (as in :func:`codecs.getwriter`) this</span>
<a href="#l12.150"></a><span id="l12.150" class="difflineminus">-   is likely to cause an error. It's best to leave the default settings, because</span>
<a href="#l12.151"></a><span id="l12.151" class="difflineminus">-   they are safe and it is highly optimized.</span>
<a href="#l12.152"></a><span id="l12.152" class="difflineminus">-</span>
<a href="#l12.153"></a><span id="l12.153" class="difflineminus">-   If *check_circular* is false (default: ``True``), then the circular</span>
<a href="#l12.154"></a><span id="l12.154" class="difflineminus">-   reference check for container types will be skipped and a circular reference</span>
<a href="#l12.155"></a><span id="l12.155" class="difflineminus">-   will result in an :exc:`OverflowError` (or worse).</span>
<a href="#l12.156"></a><span id="l12.156" class="difflineminus">-</span>
<a href="#l12.157"></a><span id="l12.157" class="difflineminus">-   If *allow_nan* is false (default: ``True``), then it will be a</span>
<a href="#l12.158"></a><span id="l12.158" class="difflineminus">-   :exc:`ValueError` to serialize out of range :class:`float` values (``nan``,</span>
<a href="#l12.159"></a><span id="l12.159" class="difflineminus">-   ``inf``, ``-inf``) in strict compliance of the JSON specification.</span>
<a href="#l12.160"></a><span id="l12.160" class="difflineminus">-   If *allow_nan* is true, their JavaScript equivalents will be used</span>
<a href="#l12.161"></a><span id="l12.161" class="difflineminus">-   (``NaN``, ``Infinity``, ``-Infinity``).</span>
<a href="#l12.162"></a><span id="l12.162" class="difflineminus">-</span>
<a href="#l12.163"></a><span id="l12.163" class="difflineminus">-   If *indent* is a string, then JSON array elements and object members</span>
<a href="#l12.164"></a><span id="l12.164" class="difflineminus">-   will be pretty-printed with a newline followed by that string repeated</span>
<a href="#l12.165"></a><span id="l12.165" class="difflineminus">-   for each level of nesting. ``None`` (the default) selects the most compact</span>
<a href="#l12.166"></a><span id="l12.166" class="difflineminus">-   representation without any newlines. For backwards compatibility with</span>
<a href="#l12.167"></a><span id="l12.167" class="difflineminus">-   versions of simplejson earlier than 2.1.0, an integer is also accepted</span>
<a href="#l12.168"></a><span id="l12.168" class="difflineminus">-   and is converted to a string with that many spaces.</span>
<a href="#l12.169"></a><span id="l12.169" class="difflineminus">-</span>
<a href="#l12.170"></a><span id="l12.170" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.171"></a><span id="l12.171" class="difflineminus">-      Changed *indent* from an integer number of spaces to a string.</span>
<a href="#l12.172"></a><span id="l12.172" class="difflineminus">-</span>
<a href="#l12.173"></a><span id="l12.173" class="difflineminus">-   If specified, *separators* should be an ``(item_separator, dict_separator)``</span>
<a href="#l12.174"></a><span id="l12.174" class="difflineminus">-   tuple.  By default, ``(', ', ': ')`` are used.  To get the most compact JSON</span>
<a href="#l12.175"></a><span id="l12.175" class="difflineminus">-   representation, you should specify ``(',', ':')`` to eliminate whitespace.</span>
<a href="#l12.176"></a><span id="l12.176" class="difflineminus">-</span>
<a href="#l12.177"></a><span id="l12.177" class="difflineminus">-   *encoding* is the character encoding for str instances, default is</span>
<a href="#l12.178"></a><span id="l12.178" class="difflineminus">-   ``'utf-8'``.</span>
<a href="#l12.179"></a><span id="l12.179" class="difflineminus">-</span>
<a href="#l12.180"></a><span id="l12.180" class="difflineminus">-   *default(obj)* is a function that should return a serializable version of</span>
<a href="#l12.181"></a><span id="l12.181" class="difflineminus">-   *obj* or raise :exc:`TypeError`.  The default simply raises :exc:`TypeError`.</span>
<a href="#l12.182"></a><span id="l12.182" class="difflineminus">-</span>
<a href="#l12.183"></a><span id="l12.183" class="difflineminus">-   To use a custom :class:`JSONEncoder` subclass (e.g. one that overrides the</span>
<a href="#l12.184"></a><span id="l12.184" class="difflineminus">-   :meth:`default` method to serialize additional types), specify it with the</span>
<a href="#l12.185"></a><span id="l12.185" class="difflineminus">-   *cls* kwarg.</span>
<a href="#l12.186"></a><span id="l12.186" class="difflineminus">-   </span>
<a href="#l12.187"></a><span id="l12.187" class="difflineminus">-   If *use_decimal* is true (default: ``False``) then :class:`decimal.Decimal`</span>
<a href="#l12.188"></a><span id="l12.188" class="difflineminus">-   will be natively serialized to JSON with full precision.</span>
<a href="#l12.189"></a><span id="l12.189" class="difflineminus">-   </span>
<a href="#l12.190"></a><span id="l12.190" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.191"></a><span id="l12.191" class="difflineminus">-      *use_decimal* is new in 2.1.0.</span>
<a href="#l12.192"></a><span id="l12.192" class="difflineminus">-</span>
<a href="#l12.193"></a><span id="l12.193" class="difflineminus">-    .. note::</span>
<a href="#l12.194"></a><span id="l12.194" class="difflineminus">-</span>
<a href="#l12.195"></a><span id="l12.195" class="difflineminus">-        JSON is not a framed protocol so unlike :mod:`pickle` or :mod:`marshal` it</span>
<a href="#l12.196"></a><span id="l12.196" class="difflineminus">-        does not make sense to serialize more than one JSON document without some</span>
<a href="#l12.197"></a><span id="l12.197" class="difflineminus">-        container protocol to delimit them.</span>
<a href="#l12.198"></a><span id="l12.198" class="difflineminus">-</span>
<a href="#l12.199"></a><span id="l12.199" class="difflineminus">-</span>
<a href="#l12.200"></a><span id="l12.200" class="difflineminus">-.. function:: dumps(obj[, skipkeys[, ensure_ascii[, check_circular[, allow_nan[, cls[, indent[, separators[, encoding[, default[, use_decimal[, **kw]]]]]]]]]]])</span>
<a href="#l12.201"></a><span id="l12.201" class="difflineminus">-</span>
<a href="#l12.202"></a><span id="l12.202" class="difflineminus">-   Serialize *obj* to a JSON formatted :class:`str`.</span>
<a href="#l12.203"></a><span id="l12.203" class="difflineminus">-</span>
<a href="#l12.204"></a><span id="l12.204" class="difflineminus">-   If *ensure_ascii* is false, then the return value will be a</span>
<a href="#l12.205"></a><span id="l12.205" class="difflineminus">-   :class:`unicode` instance.  The other arguments have the same meaning as in</span>
<a href="#l12.206"></a><span id="l12.206" class="difflineminus">-   :func:`dump`. Note that the default *ensure_ascii* setting has much</span>
<a href="#l12.207"></a><span id="l12.207" class="difflineminus">-   better performance.</span>
<a href="#l12.208"></a><span id="l12.208" class="difflineminus">-</span>
<a href="#l12.209"></a><span id="l12.209" class="difflineminus">-</span>
<a href="#l12.210"></a><span id="l12.210" class="difflineminus">-.. function:: load(fp[, encoding[, cls[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, use_decimal[, **kw]]]]]]]]])</span>
<a href="#l12.211"></a><span id="l12.211" class="difflineminus">-</span>
<a href="#l12.212"></a><span id="l12.212" class="difflineminus">-   Deserialize *fp* (a ``.read()``-supporting file-like object containing a JSON</span>
<a href="#l12.213"></a><span id="l12.213" class="difflineminus">-   document) to a Python object.</span>
<a href="#l12.214"></a><span id="l12.214" class="difflineminus">-</span>
<a href="#l12.215"></a><span id="l12.215" class="difflineminus">-   If the contents of *fp* are encoded with an ASCII based encoding other than</span>
<a href="#l12.216"></a><span id="l12.216" class="difflineminus">-   UTF-8 (e.g. latin-1), then an appropriate *encoding* name must be specified.</span>
<a href="#l12.217"></a><span id="l12.217" class="difflineminus">-   Encodings that are not ASCII based (such as UCS-2) are not allowed, and</span>
<a href="#l12.218"></a><span id="l12.218" class="difflineminus">-   should be wrapped with ``codecs.getreader(fp)(encoding)``, or simply decoded</span>
<a href="#l12.219"></a><span id="l12.219" class="difflineminus">-   to a :class:`unicode` object and passed to :func:`loads`. The default</span>
<a href="#l12.220"></a><span id="l12.220" class="difflineminus">-   setting of ``'utf-8'`` is fastest and should be using whenever possible.</span>
<a href="#l12.221"></a><span id="l12.221" class="difflineminus">-</span>
<a href="#l12.222"></a><span id="l12.222" class="difflineminus">-   If *fp.read()* returns :class:`str` then decoded JSON strings that contain</span>
<a href="#l12.223"></a><span id="l12.223" class="difflineminus">-   only ASCII characters may be parsed as :class:`str` for performance and</span>
<a href="#l12.224"></a><span id="l12.224" class="difflineminus">-   memory reasons. If your code expects only :class:`unicode` the appropriate</span>
<a href="#l12.225"></a><span id="l12.225" class="difflineminus">-   solution is to wrap fp with a reader as demonstrated above.</span>
<a href="#l12.226"></a><span id="l12.226" class="difflineminus">-</span>
<a href="#l12.227"></a><span id="l12.227" class="difflineminus">-   *object_hook* is an optional function that will be called with the result of</span>
<a href="#l12.228"></a><span id="l12.228" class="difflineminus">-   any object literal decode (a :class:`dict`).  The return value of</span>
<a href="#l12.229"></a><span id="l12.229" class="difflineminus">-   *object_hook* will be used instead of the :class:`dict`.  This feature can be used</span>
<a href="#l12.230"></a><span id="l12.230" class="difflineminus">-   to implement custom decoders (e.g. JSON-RPC class hinting).</span>
<a href="#l12.231"></a><span id="l12.231" class="difflineminus">-</span>
<a href="#l12.232"></a><span id="l12.232" class="difflineminus">-   *object_pairs_hook* is an optional function that will be called with the</span>
<a href="#l12.233"></a><span id="l12.233" class="difflineminus">-   result of any object literal decode with an ordered list of pairs.  The</span>
<a href="#l12.234"></a><span id="l12.234" class="difflineminus">-   return value of *object_pairs_hook* will be used instead of the</span>
<a href="#l12.235"></a><span id="l12.235" class="difflineminus">-   :class:`dict`.  This feature can be used to implement custom decoders that</span>
<a href="#l12.236"></a><span id="l12.236" class="difflineminus">-   rely on the order that the key and value pairs are decoded (for example,</span>
<a href="#l12.237"></a><span id="l12.237" class="difflineminus">-   :class:`collections.OrderedDict` will remember the order of insertion). If</span>
<a href="#l12.238"></a><span id="l12.238" class="difflineminus">-   *object_hook* is also defined, the *object_pairs_hook* takes priority.</span>
<a href="#l12.239"></a><span id="l12.239" class="difflineminus">-</span>
<a href="#l12.240"></a><span id="l12.240" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.241"></a><span id="l12.241" class="difflineminus">-      Added support for *object_pairs_hook*.</span>
<a href="#l12.242"></a><span id="l12.242" class="difflineminus">-</span>
<a href="#l12.243"></a><span id="l12.243" class="difflineminus">-   *parse_float*, if specified, will be called with the string of every JSON</span>
<a href="#l12.244"></a><span id="l12.244" class="difflineminus">-   float to be decoded.  By default, this is equivalent to ``float(num_str)``.</span>
<a href="#l12.245"></a><span id="l12.245" class="difflineminus">-   This can be used to use another datatype or parser for JSON floats</span>
<a href="#l12.246"></a><span id="l12.246" class="difflineminus">-   (e.g. :class:`decimal.Decimal`).</span>
<a href="#l12.247"></a><span id="l12.247" class="difflineminus">-</span>
<a href="#l12.248"></a><span id="l12.248" class="difflineminus">-   *parse_int*, if specified, will be called with the string of every JSON int</span>
<a href="#l12.249"></a><span id="l12.249" class="difflineminus">-   to be decoded.  By default, this is equivalent to ``int(num_str)``.  This can</span>
<a href="#l12.250"></a><span id="l12.250" class="difflineminus">-   be used to use another datatype or parser for JSON integers</span>
<a href="#l12.251"></a><span id="l12.251" class="difflineminus">-   (e.g. :class:`float`).</span>
<a href="#l12.252"></a><span id="l12.252" class="difflineminus">-</span>
<a href="#l12.253"></a><span id="l12.253" class="difflineminus">-   *parse_constant*, if specified, will be called with one of the following</span>
<a href="#l12.254"></a><span id="l12.254" class="difflineminus">-   strings: ``'-Infinity'``, ``'Infinity'``, ``'NaN'``.  This can be used to</span>
<a href="#l12.255"></a><span id="l12.255" class="difflineminus">-   raise an exception if invalid JSON numbers are encountered.</span>
<a href="#l12.256"></a><span id="l12.256" class="difflineminus">-</span>
<a href="#l12.257"></a><span id="l12.257" class="difflineminus">-   If *use_decimal* is true (default: ``False``) then *parse_float* is set to</span>
<a href="#l12.258"></a><span id="l12.258" class="difflineminus">-   :class:`decimal.Decimal`. This is a convenience for parity with the</span>
<a href="#l12.259"></a><span id="l12.259" class="difflineminus">-   :func:`dump` parameter.</span>
<a href="#l12.260"></a><span id="l12.260" class="difflineminus">-   </span>
<a href="#l12.261"></a><span id="l12.261" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.262"></a><span id="l12.262" class="difflineminus">-      *use_decimal* is new in 2.1.0.</span>
<a href="#l12.263"></a><span id="l12.263" class="difflineminus">-</span>
<a href="#l12.264"></a><span id="l12.264" class="difflineminus">-   To use a custom :class:`JSONDecoder` subclass, specify it with the ``cls``</span>
<a href="#l12.265"></a><span id="l12.265" class="difflineminus">-   kwarg.  Additional keyword arguments will be passed to the constructor of the</span>
<a href="#l12.266"></a><span id="l12.266" class="difflineminus">-   class.</span>
<a href="#l12.267"></a><span id="l12.267" class="difflineminus">-</span>
<a href="#l12.268"></a><span id="l12.268" class="difflineminus">-    .. note::</span>
<a href="#l12.269"></a><span id="l12.269" class="difflineminus">-</span>
<a href="#l12.270"></a><span id="l12.270" class="difflineminus">-        :func:`load` will read the rest of the file-like object as a string and</span>
<a href="#l12.271"></a><span id="l12.271" class="difflineminus">-        then call :func:`loads`. It does not stop at the end of the first valid</span>
<a href="#l12.272"></a><span id="l12.272" class="difflineminus">-        JSON document it finds and it will raise an error if there is anything</span>
<a href="#l12.273"></a><span id="l12.273" class="difflineminus">-        other than whitespace after the document. Except for files containing</span>
<a href="#l12.274"></a><span id="l12.274" class="difflineminus">-        only one JSON document, it is recommended to use :func:`loads`.</span>
<a href="#l12.275"></a><span id="l12.275" class="difflineminus">-</span>
<a href="#l12.276"></a><span id="l12.276" class="difflineminus">-</span>
<a href="#l12.277"></a><span id="l12.277" class="difflineminus">-.. function:: loads(s[, encoding[, cls[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, use_decimal[, **kw]]]]]]]]])</span>
<a href="#l12.278"></a><span id="l12.278" class="difflineminus">-</span>
<a href="#l12.279"></a><span id="l12.279" class="difflineminus">-   Deserialize *s* (a :class:`str` or :class:`unicode` instance containing a JSON</span>
<a href="#l12.280"></a><span id="l12.280" class="difflineminus">-   document) to a Python object.</span>
<a href="#l12.281"></a><span id="l12.281" class="difflineminus">-</span>
<a href="#l12.282"></a><span id="l12.282" class="difflineminus">-   If *s* is a :class:`str` instance and is encoded with an ASCII based encoding</span>
<a href="#l12.283"></a><span id="l12.283" class="difflineminus">-   other than UTF-8 (e.g. latin-1), then an appropriate *encoding* name must be</span>
<a href="#l12.284"></a><span id="l12.284" class="difflineminus">-   specified.  Encodings that are not ASCII based (such as UCS-2) are not</span>
<a href="#l12.285"></a><span id="l12.285" class="difflineminus">-   allowed and should be decoded to :class:`unicode` first.</span>
<a href="#l12.286"></a><span id="l12.286" class="difflineminus">-</span>
<a href="#l12.287"></a><span id="l12.287" class="difflineminus">-   If *s* is a :class:`str` then decoded JSON strings that contain</span>
<a href="#l12.288"></a><span id="l12.288" class="difflineminus">-   only ASCII characters may be parsed as :class:`str` for performance and</span>
<a href="#l12.289"></a><span id="l12.289" class="difflineminus">-   memory reasons. If your code expects only :class:`unicode` the appropriate</span>
<a href="#l12.290"></a><span id="l12.290" class="difflineminus">-   solution is decode *s* to :class:`unicode` prior to calling loads.</span>
<a href="#l12.291"></a><span id="l12.291" class="difflineminus">-</span>
<a href="#l12.292"></a><span id="l12.292" class="difflineminus">-   The other arguments have the same meaning as in :func:`load`.</span>
<a href="#l12.293"></a><span id="l12.293" class="difflineminus">-</span>
<a href="#l12.294"></a><span id="l12.294" class="difflineminus">-</span>
<a href="#l12.295"></a><span id="l12.295" class="difflineminus">-Encoders and decoders</span>
<a href="#l12.296"></a><span id="l12.296" class="difflineminus">----------------------</span>
<a href="#l12.297"></a><span id="l12.297" class="difflineminus">-</span>
<a href="#l12.298"></a><span id="l12.298" class="difflineminus">-.. class:: JSONDecoder([encoding[, object_hook[, parse_float[, parse_int[, parse_constant[, object_pairs_hook[, strict]]]]]]])</span>
<a href="#l12.299"></a><span id="l12.299" class="difflineminus">-</span>
<a href="#l12.300"></a><span id="l12.300" class="difflineminus">-   Simple JSON decoder.</span>
<a href="#l12.301"></a><span id="l12.301" class="difflineminus">-</span>
<a href="#l12.302"></a><span id="l12.302" class="difflineminus">-   Performs the following translations in decoding by default:</span>
<a href="#l12.303"></a><span id="l12.303" class="difflineminus">-</span>
<a href="#l12.304"></a><span id="l12.304" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.305"></a><span id="l12.305" class="difflineminus">-   | JSON          | Python            |</span>
<a href="#l12.306"></a><span id="l12.306" class="difflineminus">-   +===============+===================+</span>
<a href="#l12.307"></a><span id="l12.307" class="difflineminus">-   | object        | dict              |</span>
<a href="#l12.308"></a><span id="l12.308" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.309"></a><span id="l12.309" class="difflineminus">-   | array         | list              |</span>
<a href="#l12.310"></a><span id="l12.310" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.311"></a><span id="l12.311" class="difflineminus">-   | string        | unicode           |</span>
<a href="#l12.312"></a><span id="l12.312" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.313"></a><span id="l12.313" class="difflineminus">-   | number (int)  | int, long         |</span>
<a href="#l12.314"></a><span id="l12.314" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.315"></a><span id="l12.315" class="difflineminus">-   | number (real) | float             |</span>
<a href="#l12.316"></a><span id="l12.316" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.317"></a><span id="l12.317" class="difflineminus">-   | true          | True              |</span>
<a href="#l12.318"></a><span id="l12.318" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.319"></a><span id="l12.319" class="difflineminus">-   | false         | False             |</span>
<a href="#l12.320"></a><span id="l12.320" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.321"></a><span id="l12.321" class="difflineminus">-   | null          | None              |</span>
<a href="#l12.322"></a><span id="l12.322" class="difflineminus">-   +---------------+-------------------+</span>
<a href="#l12.323"></a><span id="l12.323" class="difflineminus">-</span>
<a href="#l12.324"></a><span id="l12.324" class="difflineminus">-   It also understands ``NaN``, ``Infinity``, and ``-Infinity`` as their</span>
<a href="#l12.325"></a><span id="l12.325" class="difflineminus">-   corresponding ``float`` values, which is outside the JSON spec.</span>
<a href="#l12.326"></a><span id="l12.326" class="difflineminus">-</span>
<a href="#l12.327"></a><span id="l12.327" class="difflineminus">-   *encoding* determines the encoding used to interpret any :class:`str` objects</span>
<a href="#l12.328"></a><span id="l12.328" class="difflineminus">-   decoded by this instance (``'utf-8'`` by default).  It has no effect when decoding</span>
<a href="#l12.329"></a><span id="l12.329" class="difflineminus">-   :class:`unicode` objects.</span>
<a href="#l12.330"></a><span id="l12.330" class="difflineminus">-</span>
<a href="#l12.331"></a><span id="l12.331" class="difflineminus">-   Note that currently only encodings that are a superset of ASCII work, strings</span>
<a href="#l12.332"></a><span id="l12.332" class="difflineminus">-   of other encodings should be passed in as :class:`unicode`.</span>
<a href="#l12.333"></a><span id="l12.333" class="difflineminus">-</span>
<a href="#l12.334"></a><span id="l12.334" class="difflineminus">-   *object_hook* is an optional function that will be called with the result of</span>
<a href="#l12.335"></a><span id="l12.335" class="difflineminus">-   every JSON object decoded and its return value will be used in place of the</span>
<a href="#l12.336"></a><span id="l12.336" class="difflineminus">-   given :class:`dict`.  This can be used to provide custom deserializations</span>
<a href="#l12.337"></a><span id="l12.337" class="difflineminus">-   (e.g. to support JSON-RPC class hinting).</span>
<a href="#l12.338"></a><span id="l12.338" class="difflineminus">-</span>
<a href="#l12.339"></a><span id="l12.339" class="difflineminus">-   *object_pairs_hook* is an optional function that will be called with the</span>
<a href="#l12.340"></a><span id="l12.340" class="difflineminus">-   result of any object literal decode with an ordered list of pairs.  The</span>
<a href="#l12.341"></a><span id="l12.341" class="difflineminus">-   return value of *object_pairs_hook* will be used instead of the</span>
<a href="#l12.342"></a><span id="l12.342" class="difflineminus">-   :class:`dict`.  This feature can be used to implement custom decoders that</span>
<a href="#l12.343"></a><span id="l12.343" class="difflineminus">-   rely on the order that the key and value pairs are decoded (for example,</span>
<a href="#l12.344"></a><span id="l12.344" class="difflineminus">-   :class:`collections.OrderedDict` will remember the order of insertion). If</span>
<a href="#l12.345"></a><span id="l12.345" class="difflineminus">-   *object_hook* is also defined, the *object_pairs_hook* takes priority.</span>
<a href="#l12.346"></a><span id="l12.346" class="difflineminus">-</span>
<a href="#l12.347"></a><span id="l12.347" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.348"></a><span id="l12.348" class="difflineminus">-      Added support for *object_pairs_hook*.</span>
<a href="#l12.349"></a><span id="l12.349" class="difflineminus">-</span>
<a href="#l12.350"></a><span id="l12.350" class="difflineminus">-   *parse_float*, if specified, will be called with the string of every JSON</span>
<a href="#l12.351"></a><span id="l12.351" class="difflineminus">-   float to be decoded.  By default, this is equivalent to ``float(num_str)``.</span>
<a href="#l12.352"></a><span id="l12.352" class="difflineminus">-   This can be used to use another datatype or parser for JSON floats</span>
<a href="#l12.353"></a><span id="l12.353" class="difflineminus">-   (e.g. :class:`decimal.Decimal`).</span>
<a href="#l12.354"></a><span id="l12.354" class="difflineminus">-</span>
<a href="#l12.355"></a><span id="l12.355" class="difflineminus">-   *parse_int*, if specified, will be called with the string of every JSON int</span>
<a href="#l12.356"></a><span id="l12.356" class="difflineminus">-   to be decoded.  By default, this is equivalent to ``int(num_str)``.  This can</span>
<a href="#l12.357"></a><span id="l12.357" class="difflineminus">-   be used to use another datatype or parser for JSON integers</span>
<a href="#l12.358"></a><span id="l12.358" class="difflineminus">-   (e.g. :class:`float`).</span>
<a href="#l12.359"></a><span id="l12.359" class="difflineminus">-</span>
<a href="#l12.360"></a><span id="l12.360" class="difflineminus">-   *parse_constant*, if specified, will be called with one of the following</span>
<a href="#l12.361"></a><span id="l12.361" class="difflineminus">-   strings: ``'-Infinity'``, ``'Infinity'``, ``'NaN'``.  This can be used to</span>
<a href="#l12.362"></a><span id="l12.362" class="difflineminus">-   raise an exception if invalid JSON numbers are encountered.</span>
<a href="#l12.363"></a><span id="l12.363" class="difflineminus">-</span>
<a href="#l12.364"></a><span id="l12.364" class="difflineminus">-   *strict* controls the parser's behavior when it encounters an invalid</span>
<a href="#l12.365"></a><span id="l12.365" class="difflineminus">-   control character in a string. The default setting of ``True`` means that</span>
<a href="#l12.366"></a><span id="l12.366" class="difflineminus">-   unescaped control characters are parse errors, if ``False`` then control</span>
<a href="#l12.367"></a><span id="l12.367" class="difflineminus">-   characters will be allowed in strings.</span>
<a href="#l12.368"></a><span id="l12.368" class="difflineminus">-</span>
<a href="#l12.369"></a><span id="l12.369" class="difflineminus">-   .. method:: decode(s)</span>
<a href="#l12.370"></a><span id="l12.370" class="difflineminus">-</span>
<a href="#l12.371"></a><span id="l12.371" class="difflineminus">-      Return the Python representation of *s* (a :class:`str` or</span>
<a href="#l12.372"></a><span id="l12.372" class="difflineminus">-      :class:`unicode` instance containing a JSON document)</span>
<a href="#l12.373"></a><span id="l12.373" class="difflineminus">-</span>
<a href="#l12.374"></a><span id="l12.374" class="difflineminus">-      If *s* is a :class:`str` then decoded JSON strings that contain</span>
<a href="#l12.375"></a><span id="l12.375" class="difflineminus">-      only ASCII characters may be parsed as :class:`str` for performance and</span>
<a href="#l12.376"></a><span id="l12.376" class="difflineminus">-      memory reasons. If your code expects only :class:`unicode` the</span>
<a href="#l12.377"></a><span id="l12.377" class="difflineminus">-      appropriate solution is decode *s* to :class:`unicode` prior to calling</span>
<a href="#l12.378"></a><span id="l12.378" class="difflineminus">-      decode.</span>
<a href="#l12.379"></a><span id="l12.379" class="difflineminus">-</span>
<a href="#l12.380"></a><span id="l12.380" class="difflineminus">-   .. method:: raw_decode(s)</span>
<a href="#l12.381"></a><span id="l12.381" class="difflineminus">-</span>
<a href="#l12.382"></a><span id="l12.382" class="difflineminus">-      Decode a JSON document from *s* (a :class:`str` or :class:`unicode`</span>
<a href="#l12.383"></a><span id="l12.383" class="difflineminus">-      beginning with a JSON document) and return a 2-tuple of the Python</span>
<a href="#l12.384"></a><span id="l12.384" class="difflineminus">-      representation and the index in *s* where the document ended.</span>
<a href="#l12.385"></a><span id="l12.385" class="difflineminus">-</span>
<a href="#l12.386"></a><span id="l12.386" class="difflineminus">-      This can be used to decode a JSON document from a string that may have</span>
<a href="#l12.387"></a><span id="l12.387" class="difflineminus">-      extraneous data at the end.</span>
<a href="#l12.388"></a><span id="l12.388" class="difflineminus">-</span>
<a href="#l12.389"></a><span id="l12.389" class="difflineminus">-</span>
<a href="#l12.390"></a><span id="l12.390" class="difflineminus">-.. class:: JSONEncoder([skipkeys[, ensure_ascii[, check_circular[, allow_nan[, sort_keys[, indent[, separators[, encoding[, default]]]]]]]]])</span>
<a href="#l12.391"></a><span id="l12.391" class="difflineminus">-</span>
<a href="#l12.392"></a><span id="l12.392" class="difflineminus">-   Extensible JSON encoder for Python data structures.</span>
<a href="#l12.393"></a><span id="l12.393" class="difflineminus">-</span>
<a href="#l12.394"></a><span id="l12.394" class="difflineminus">-   Supports the following objects and types by default:</span>
<a href="#l12.395"></a><span id="l12.395" class="difflineminus">-</span>
<a href="#l12.396"></a><span id="l12.396" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.397"></a><span id="l12.397" class="difflineminus">-   | Python            | JSON          |</span>
<a href="#l12.398"></a><span id="l12.398" class="difflineminus">-   +===================+===============+</span>
<a href="#l12.399"></a><span id="l12.399" class="difflineminus">-   | dict              | object        |</span>
<a href="#l12.400"></a><span id="l12.400" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.401"></a><span id="l12.401" class="difflineminus">-   | list, tuple       | array         |</span>
<a href="#l12.402"></a><span id="l12.402" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.403"></a><span id="l12.403" class="difflineminus">-   | str, unicode      | string        |</span>
<a href="#l12.404"></a><span id="l12.404" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.405"></a><span id="l12.405" class="difflineminus">-   | int, long, float  | number        |</span>
<a href="#l12.406"></a><span id="l12.406" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.407"></a><span id="l12.407" class="difflineminus">-   | True              | true          |</span>
<a href="#l12.408"></a><span id="l12.408" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.409"></a><span id="l12.409" class="difflineminus">-   | False             | false         |</span>
<a href="#l12.410"></a><span id="l12.410" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.411"></a><span id="l12.411" class="difflineminus">-   | None              | null          |</span>
<a href="#l12.412"></a><span id="l12.412" class="difflineminus">-   +-------------------+---------------+</span>
<a href="#l12.413"></a><span id="l12.413" class="difflineminus">-</span>
<a href="#l12.414"></a><span id="l12.414" class="difflineminus">-   To extend this to recognize other objects, subclass and implement a</span>
<a href="#l12.415"></a><span id="l12.415" class="difflineminus">-   :meth:`default` method with another method that returns a serializable object</span>
<a href="#l12.416"></a><span id="l12.416" class="difflineminus">-   for ``o`` if possible, otherwise it should call the superclass implementation</span>
<a href="#l12.417"></a><span id="l12.417" class="difflineminus">-   (to raise :exc:`TypeError`).</span>
<a href="#l12.418"></a><span id="l12.418" class="difflineminus">-</span>
<a href="#l12.419"></a><span id="l12.419" class="difflineminus">-   If *skipkeys* is false (the default), then it is a :exc:`TypeError` to</span>
<a href="#l12.420"></a><span id="l12.420" class="difflineminus">-   attempt encoding of keys that are not str, int, long, float or None.  If</span>
<a href="#l12.421"></a><span id="l12.421" class="difflineminus">-   *skipkeys* is true, such items are simply skipped.</span>
<a href="#l12.422"></a><span id="l12.422" class="difflineminus">-</span>
<a href="#l12.423"></a><span id="l12.423" class="difflineminus">-   If *ensure_ascii* is true (the default), the output is guaranteed to be</span>
<a href="#l12.424"></a><span id="l12.424" class="difflineminus">-   :class:`str` objects with all incoming unicode characters escaped.  If</span>
<a href="#l12.425"></a><span id="l12.425" class="difflineminus">-   *ensure_ascii* is false, the output will be a unicode object.</span>
<a href="#l12.426"></a><span id="l12.426" class="difflineminus">-</span>
<a href="#l12.427"></a><span id="l12.427" class="difflineminus">-   If *check_circular* is false (the default), then lists, dicts, and custom</span>
<a href="#l12.428"></a><span id="l12.428" class="difflineminus">-   encoded objects will be checked for circular references during encoding to</span>
<a href="#l12.429"></a><span id="l12.429" class="difflineminus">-   prevent an infinite recursion (which would cause an :exc:`OverflowError`).</span>
<a href="#l12.430"></a><span id="l12.430" class="difflineminus">-   Otherwise, no such check takes place.</span>
<a href="#l12.431"></a><span id="l12.431" class="difflineminus">-</span>
<a href="#l12.432"></a><span id="l12.432" class="difflineminus">-   If *allow_nan* is true (the default), then ``NaN``, ``Infinity``, and</span>
<a href="#l12.433"></a><span id="l12.433" class="difflineminus">-   ``-Infinity`` will be encoded as such.  This behavior is not JSON</span>
<a href="#l12.434"></a><span id="l12.434" class="difflineminus">-   specification compliant, but is consistent with most JavaScript based</span>
<a href="#l12.435"></a><span id="l12.435" class="difflineminus">-   encoders and decoders.  Otherwise, it will be a :exc:`ValueError` to encode</span>
<a href="#l12.436"></a><span id="l12.436" class="difflineminus">-   such floats.</span>
<a href="#l12.437"></a><span id="l12.437" class="difflineminus">-</span>
<a href="#l12.438"></a><span id="l12.438" class="difflineminus">-   If *sort_keys* is true (not the default), then the output of dictionaries</span>
<a href="#l12.439"></a><span id="l12.439" class="difflineminus">-   will be sorted by key; this is useful for regression tests to ensure that</span>
<a href="#l12.440"></a><span id="l12.440" class="difflineminus">-   JSON serializations can be compared on a day-to-day basis.</span>
<a href="#l12.441"></a><span id="l12.441" class="difflineminus">-</span>
<a href="#l12.442"></a><span id="l12.442" class="difflineminus">-   If *indent* is a string, then JSON array elements and object members</span>
<a href="#l12.443"></a><span id="l12.443" class="difflineminus">-   will be pretty-printed with a newline followed by that string repeated</span>
<a href="#l12.444"></a><span id="l12.444" class="difflineminus">-   for each level of nesting. ``None`` (the default) selects the most compact</span>
<a href="#l12.445"></a><span id="l12.445" class="difflineminus">-   representation without any newlines. For backwards compatibility with</span>
<a href="#l12.446"></a><span id="l12.446" class="difflineminus">-   versions of simplejson earlier than 2.1.0, an integer is also accepted</span>
<a href="#l12.447"></a><span id="l12.447" class="difflineminus">-   and is converted to a string with that many spaces.</span>
<a href="#l12.448"></a><span id="l12.448" class="difflineminus">-</span>
<a href="#l12.449"></a><span id="l12.449" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.450"></a><span id="l12.450" class="difflineminus">-      Changed *indent* from an integer number of spaces to a string.</span>
<a href="#l12.451"></a><span id="l12.451" class="difflineminus">-</span>
<a href="#l12.452"></a><span id="l12.452" class="difflineminus">-   If specified, *separators* should be an ``(item_separator, key_separator)``</span>
<a href="#l12.453"></a><span id="l12.453" class="difflineminus">-   tuple.  By default, ``(', ', ': ')`` are used.  To get the most compact JSON</span>
<a href="#l12.454"></a><span id="l12.454" class="difflineminus">-   representation, you should specify ``(',', ':')`` to eliminate whitespace.</span>
<a href="#l12.455"></a><span id="l12.455" class="difflineminus">-</span>
<a href="#l12.456"></a><span id="l12.456" class="difflineminus">-   If specified, *default* should be a function that gets called for objects</span>
<a href="#l12.457"></a><span id="l12.457" class="difflineminus">-   that can't otherwise be serialized.  It should return a JSON encodable</span>
<a href="#l12.458"></a><span id="l12.458" class="difflineminus">-   version of the object or raise a :exc:`TypeError`.</span>
<a href="#l12.459"></a><span id="l12.459" class="difflineminus">-</span>
<a href="#l12.460"></a><span id="l12.460" class="difflineminus">-   If *encoding* is not ``None``, then all input strings will be transformed</span>
<a href="#l12.461"></a><span id="l12.461" class="difflineminus">-   into unicode using that encoding prior to JSON-encoding.  The default is</span>
<a href="#l12.462"></a><span id="l12.462" class="difflineminus">-   ``'utf-8'``.</span>
<a href="#l12.463"></a><span id="l12.463" class="difflineminus">-</span>
<a href="#l12.464"></a><span id="l12.464" class="difflineminus">-</span>
<a href="#l12.465"></a><span id="l12.465" class="difflineminus">-   .. method:: default(o)</span>
<a href="#l12.466"></a><span id="l12.466" class="difflineminus">-</span>
<a href="#l12.467"></a><span id="l12.467" class="difflineminus">-      Implement this method in a subclass such that it returns a serializable</span>
<a href="#l12.468"></a><span id="l12.468" class="difflineminus">-      object for *o*, or calls the base implementation (to raise a</span>
<a href="#l12.469"></a><span id="l12.469" class="difflineminus">-      :exc:`TypeError`).</span>
<a href="#l12.470"></a><span id="l12.470" class="difflineminus">-</span>
<a href="#l12.471"></a><span id="l12.471" class="difflineminus">-      For example, to support arbitrary iterators, you could implement default</span>
<a href="#l12.472"></a><span id="l12.472" class="difflineminus">-      like this::</span>
<a href="#l12.473"></a><span id="l12.473" class="difflineminus">-</span>
<a href="#l12.474"></a><span id="l12.474" class="difflineminus">-         def default(self, o):</span>
<a href="#l12.475"></a><span id="l12.475" class="difflineminus">-            try:</span>
<a href="#l12.476"></a><span id="l12.476" class="difflineminus">-                iterable = iter(o)</span>
<a href="#l12.477"></a><span id="l12.477" class="difflineminus">-            except TypeError:</span>
<a href="#l12.478"></a><span id="l12.478" class="difflineminus">-                pass</span>
<a href="#l12.479"></a><span id="l12.479" class="difflineminus">-            else:</span>
<a href="#l12.480"></a><span id="l12.480" class="difflineminus">-                return list(iterable)</span>
<a href="#l12.481"></a><span id="l12.481" class="difflineminus">-            return JSONEncoder.default(self, o)</span>
<a href="#l12.482"></a><span id="l12.482" class="difflineminus">-</span>
<a href="#l12.483"></a><span id="l12.483" class="difflineminus">-</span>
<a href="#l12.484"></a><span id="l12.484" class="difflineminus">-   .. method:: encode(o)</span>
<a href="#l12.485"></a><span id="l12.485" class="difflineminus">-</span>
<a href="#l12.486"></a><span id="l12.486" class="difflineminus">-      Return a JSON string representation of a Python data structure, *o*.  For</span>
<a href="#l12.487"></a><span id="l12.487" class="difflineminus">-      example::</span>
<a href="#l12.488"></a><span id="l12.488" class="difflineminus">-</span>
<a href="#l12.489"></a><span id="l12.489" class="difflineminus">-        &gt;&gt;&gt; import simplejson as json</span>
<a href="#l12.490"></a><span id="l12.490" class="difflineminus">-        &gt;&gt;&gt; json.JSONEncoder().encode({&quot;foo&quot;: [&quot;bar&quot;, &quot;baz&quot;]})</span>
<a href="#l12.491"></a><span id="l12.491" class="difflineminus">-        '{&quot;foo&quot;: [&quot;bar&quot;, &quot;baz&quot;]}'</span>
<a href="#l12.492"></a><span id="l12.492" class="difflineminus">-</span>
<a href="#l12.493"></a><span id="l12.493" class="difflineminus">-</span>
<a href="#l12.494"></a><span id="l12.494" class="difflineminus">-   .. method:: iterencode(o)</span>
<a href="#l12.495"></a><span id="l12.495" class="difflineminus">-</span>
<a href="#l12.496"></a><span id="l12.496" class="difflineminus">-      Encode the given object, *o*, and yield each string representation as</span>
<a href="#l12.497"></a><span id="l12.497" class="difflineminus">-      available.  For example::</span>
<a href="#l12.498"></a><span id="l12.498" class="difflineminus">-</span>
<a href="#l12.499"></a><span id="l12.499" class="difflineminus">-            for chunk in JSONEncoder().iterencode(bigobject):</span>
<a href="#l12.500"></a><span id="l12.500" class="difflineminus">-                mysocket.write(chunk)</span>
<a href="#l12.501"></a><span id="l12.501" class="difflineminus">-</span>
<a href="#l12.502"></a><span id="l12.502" class="difflineminus">-      Note that :meth:`encode` has much better performance than</span>
<a href="#l12.503"></a><span id="l12.503" class="difflineminus">-      :meth:`iterencode`.</span>
<a href="#l12.504"></a><span id="l12.504" class="difflineminus">-</span>
<a href="#l12.505"></a><span id="l12.505" class="difflineminus">-.. class:: JSONEncoderForHTML([skipkeys[, ensure_ascii[, check_circular[, allow_nan[, sort_keys[, indent[, separators[, encoding[, default]]]]]]]]])</span>
<a href="#l12.506"></a><span id="l12.506" class="difflineminus">-</span>
<a href="#l12.507"></a><span id="l12.507" class="difflineminus">-   Subclass of :class:`JSONEncoder` that escapes &amp;, &lt;, and &gt; for embedding in HTML.</span>
<a href="#l12.508"></a><span id="l12.508" class="difflineminus">-</span>
<a href="#l12.509"></a><span id="l12.509" class="difflineminus">-   .. versionchanged:: 2.1.0</span>
<a href="#l12.510"></a><span id="l12.510" class="difflineminus">-      New in 2.1.0</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/scripts/make_docs.py</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,18 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-import os</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">-import subprocess</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-import shutil</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-SPHINX_BUILD = 'sphinx-build'</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-DOCTREES_DIR = 'build/doctrees'</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-HTML_DIR = 'docs'</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-for dirname in DOCTREES_DIR, HTML_DIR:</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-    if not os.path.exists(dirname):</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-        os.makedirs(dirname)</span>
<a href="#l13.17"></a><span id="l13.17" class="difflineminus">-</span>
<a href="#l13.18"></a><span id="l13.18" class="difflineminus">-open(os.path.join(HTML_DIR, '.nojekyll'), 'w').close()</span>
<a href="#l13.19"></a><span id="l13.19" class="difflineminus">-res = subprocess.call([</span>
<a href="#l13.20"></a><span id="l13.20" class="difflineminus">-    SPHINX_BUILD, '-d', DOCTREES_DIR, '-b', 'html', '.', 'docs',</span>
<a href="#l13.21"></a><span id="l13.21" class="difflineminus">-])</span>
<a href="#l13.22"></a><span id="l13.22" class="difflineminus">-raise SystemExit(res)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">deleted file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/setup.cfg</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ /dev/null</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -1,5 +0,0 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">-[egg_info]</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">-tag_build = </span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">-tag_date = 0</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">-tag_svn_revision = 0</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/setup.py</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,102 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-#!/usr/bin/env python</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-import sys</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-try:</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-    import setuptools</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-except ImportError:</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">-    from ez_setup import use_setuptools</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-    use_setuptools()</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-from setuptools import setup, find_packages, Extension, Feature</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-from distutils.command.build_ext import build_ext</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-from distutils.errors import CCompilerError, DistutilsExecError, \</span>
<a href="#l15.17"></a><span id="l15.17" class="difflineminus">-    DistutilsPlatformError</span>
<a href="#l15.18"></a><span id="l15.18" class="difflineminus">-</span>
<a href="#l15.19"></a><span id="l15.19" class="difflineminus">-IS_PYPY = hasattr(sys, 'pypy_translation_info')</span>
<a href="#l15.20"></a><span id="l15.20" class="difflineminus">-VERSION = '2.1.6'</span>
<a href="#l15.21"></a><span id="l15.21" class="difflineminus">-DESCRIPTION = &quot;Simple, fast, extensible JSON encoder/decoder for Python&quot;</span>
<a href="#l15.22"></a><span id="l15.22" class="difflineminus">-LONG_DESCRIPTION = open('README.rst', 'r').read()</span>
<a href="#l15.23"></a><span id="l15.23" class="difflineminus">-</span>
<a href="#l15.24"></a><span id="l15.24" class="difflineminus">-CLASSIFIERS = filter(None, map(str.strip,</span>
<a href="#l15.25"></a><span id="l15.25" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l15.26"></a><span id="l15.26" class="difflineminus">-Intended Audience :: Developers</span>
<a href="#l15.27"></a><span id="l15.27" class="difflineminus">-License :: OSI Approved :: MIT License</span>
<a href="#l15.28"></a><span id="l15.28" class="difflineminus">-Programming Language :: Python</span>
<a href="#l15.29"></a><span id="l15.29" class="difflineminus">-Topic :: Software Development :: Libraries :: Python Modules</span>
<a href="#l15.30"></a><span id="l15.30" class="difflineminus">-&quot;&quot;&quot;.splitlines()))</span>
<a href="#l15.31"></a><span id="l15.31" class="difflineminus">-</span>
<a href="#l15.32"></a><span id="l15.32" class="difflineminus">-</span>
<a href="#l15.33"></a><span id="l15.33" class="difflineminus">-speedups = Feature(</span>
<a href="#l15.34"></a><span id="l15.34" class="difflineminus">-    &quot;optional C speed-enhancement module&quot;,</span>
<a href="#l15.35"></a><span id="l15.35" class="difflineminus">-    standard=True,</span>
<a href="#l15.36"></a><span id="l15.36" class="difflineminus">-    ext_modules = [</span>
<a href="#l15.37"></a><span id="l15.37" class="difflineminus">-        Extension(&quot;simplejson._speedups&quot;, [&quot;simplejson/_speedups.c&quot;]),</span>
<a href="#l15.38"></a><span id="l15.38" class="difflineminus">-    ],</span>
<a href="#l15.39"></a><span id="l15.39" class="difflineminus">-)</span>
<a href="#l15.40"></a><span id="l15.40" class="difflineminus">-</span>
<a href="#l15.41"></a><span id="l15.41" class="difflineminus">-if sys.platform == 'win32' and sys.version_info &gt; (2, 6):</span>
<a href="#l15.42"></a><span id="l15.42" class="difflineminus">-   # 2.6's distutils.msvc9compiler can raise an IOError when failing to</span>
<a href="#l15.43"></a><span id="l15.43" class="difflineminus">-   # find the compiler</span>
<a href="#l15.44"></a><span id="l15.44" class="difflineminus">-   ext_errors = (CCompilerError, DistutilsExecError, DistutilsPlatformError,</span>
<a href="#l15.45"></a><span id="l15.45" class="difflineminus">-                 IOError)</span>
<a href="#l15.46"></a><span id="l15.46" class="difflineminus">-else:</span>
<a href="#l15.47"></a><span id="l15.47" class="difflineminus">-   ext_errors = (CCompilerError, DistutilsExecError, DistutilsPlatformError)</span>
<a href="#l15.48"></a><span id="l15.48" class="difflineminus">-</span>
<a href="#l15.49"></a><span id="l15.49" class="difflineminus">-class BuildFailed(Exception):</span>
<a href="#l15.50"></a><span id="l15.50" class="difflineminus">-    pass</span>
<a href="#l15.51"></a><span id="l15.51" class="difflineminus">-</span>
<a href="#l15.52"></a><span id="l15.52" class="difflineminus">-class ve_build_ext(build_ext):</span>
<a href="#l15.53"></a><span id="l15.53" class="difflineminus">-    # This class allows C extension building to fail.</span>
<a href="#l15.54"></a><span id="l15.54" class="difflineminus">-</span>
<a href="#l15.55"></a><span id="l15.55" class="difflineminus">-    def run(self):</span>
<a href="#l15.56"></a><span id="l15.56" class="difflineminus">-        try:</span>
<a href="#l15.57"></a><span id="l15.57" class="difflineminus">-            build_ext.run(self)</span>
<a href="#l15.58"></a><span id="l15.58" class="difflineminus">-        except DistutilsPlatformError, x:</span>
<a href="#l15.59"></a><span id="l15.59" class="difflineminus">-            raise BuildFailed()</span>
<a href="#l15.60"></a><span id="l15.60" class="difflineminus">-</span>
<a href="#l15.61"></a><span id="l15.61" class="difflineminus">-    def build_extension(self, ext):</span>
<a href="#l15.62"></a><span id="l15.62" class="difflineminus">-        try:</span>
<a href="#l15.63"></a><span id="l15.63" class="difflineminus">-            build_ext.build_extension(self, ext)</span>
<a href="#l15.64"></a><span id="l15.64" class="difflineminus">-        except ext_errors, x:</span>
<a href="#l15.65"></a><span id="l15.65" class="difflineminus">-            raise BuildFailed()</span>
<a href="#l15.66"></a><span id="l15.66" class="difflineminus">-</span>
<a href="#l15.67"></a><span id="l15.67" class="difflineminus">-def run_setup(with_binary):</span>
<a href="#l15.68"></a><span id="l15.68" class="difflineminus">-    if with_binary:</span>
<a href="#l15.69"></a><span id="l15.69" class="difflineminus">-        features = {'speedups': speedups}</span>
<a href="#l15.70"></a><span id="l15.70" class="difflineminus">-    else:</span>
<a href="#l15.71"></a><span id="l15.71" class="difflineminus">-        features = {}</span>
<a href="#l15.72"></a><span id="l15.72" class="difflineminus">-</span>
<a href="#l15.73"></a><span id="l15.73" class="difflineminus">-    setup(</span>
<a href="#l15.74"></a><span id="l15.74" class="difflineminus">-        name=&quot;simplejson&quot;,</span>
<a href="#l15.75"></a><span id="l15.75" class="difflineminus">-        version=VERSION,</span>
<a href="#l15.76"></a><span id="l15.76" class="difflineminus">-        description=DESCRIPTION,</span>
<a href="#l15.77"></a><span id="l15.77" class="difflineminus">-        long_description=LONG_DESCRIPTION,</span>
<a href="#l15.78"></a><span id="l15.78" class="difflineminus">-        classifiers=CLASSIFIERS,</span>
<a href="#l15.79"></a><span id="l15.79" class="difflineminus">-        author=&quot;Bob Ippolito&quot;,</span>
<a href="#l15.80"></a><span id="l15.80" class="difflineminus">-        author_email=&quot;bob@redivi.com&quot;,</span>
<a href="#l15.81"></a><span id="l15.81" class="difflineminus">-        url=&quot;http://github.com/simplejson/simplejson&quot;,</span>
<a href="#l15.82"></a><span id="l15.82" class="difflineminus">-        license=&quot;MIT License&quot;,</span>
<a href="#l15.83"></a><span id="l15.83" class="difflineminus">-        packages=find_packages(exclude=['ez_setup']),</span>
<a href="#l15.84"></a><span id="l15.84" class="difflineminus">-        platforms=['any'],</span>
<a href="#l15.85"></a><span id="l15.85" class="difflineminus">-        test_suite=&quot;simplejson.tests.all_tests_suite&quot;,</span>
<a href="#l15.86"></a><span id="l15.86" class="difflineminus">-        zip_safe=True,</span>
<a href="#l15.87"></a><span id="l15.87" class="difflineminus">-        features=features,</span>
<a href="#l15.88"></a><span id="l15.88" class="difflineminus">-        cmdclass={'build_ext': ve_build_ext},</span>
<a href="#l15.89"></a><span id="l15.89" class="difflineminus">-    )</span>
<a href="#l15.90"></a><span id="l15.90" class="difflineminus">-</span>
<a href="#l15.91"></a><span id="l15.91" class="difflineminus">-try:</span>
<a href="#l15.92"></a><span id="l15.92" class="difflineminus">-    run_setup(not IS_PYPY)</span>
<a href="#l15.93"></a><span id="l15.93" class="difflineminus">-except BuildFailed:</span>
<a href="#l15.94"></a><span id="l15.94" class="difflineminus">-    BUILD_EXT_WARNING = &quot;WARNING: The C extension could not be compiled, speedups are not enabled.&quot;</span>
<a href="#l15.95"></a><span id="l15.95" class="difflineminus">-    print '*' * 75</span>
<a href="#l15.96"></a><span id="l15.96" class="difflineminus">-    print BUILD_EXT_WARNING</span>
<a href="#l15.97"></a><span id="l15.97" class="difflineminus">-    print &quot;Failure information, if any, is above.&quot;</span>
<a href="#l15.98"></a><span id="l15.98" class="difflineminus">-    print &quot;I'm retrying the build without the C extension now.&quot;</span>
<a href="#l15.99"></a><span id="l15.99" class="difflineminus">-    print '*' * 75</span>
<a href="#l15.100"></a><span id="l15.100" class="difflineminus">-</span>
<a href="#l15.101"></a><span id="l15.101" class="difflineminus">-    run_setup(False)</span>
<a href="#l15.102"></a><span id="l15.102" class="difflineminus">-</span>
<a href="#l15.103"></a><span id="l15.103" class="difflineminus">-    print '*' * 75</span>
<a href="#l15.104"></a><span id="l15.104" class="difflineminus">-    print BUILD_EXT_WARNING</span>
<a href="#l15.105"></a><span id="l15.105" class="difflineminus">-    print &quot;Plain-Python installation succeeded.&quot;</span>
<a href="#l15.106"></a><span id="l15.106" class="difflineminus">-    print '*' * 75</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/__init__.py</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,438 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-r&quot;&quot;&quot;JSON (JavaScript Object Notation) &lt;http://json.org&gt; is a subset of</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-JavaScript syntax (ECMA-262 3rd edition) used as a lightweight data</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">-interchange format.</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-:mod:`simplejson` exposes an API familiar to users of the standard library</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-:mod:`marshal` and :mod:`pickle` modules. It is the externally maintained</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-version of the :mod:`json` library contained in Python 2.6, but maintains</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-compatibility with Python 2.4 and Python 2.5 and (currently) has</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-significant performance advantages, even without using the optional C</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-extension for speedups.</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-Encoding basic Python object hierarchies::</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-    &gt;&gt;&gt; json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}])</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-    '[&quot;foo&quot;, {&quot;bar&quot;: [&quot;baz&quot;, null, 1.0, 2]}]'</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-    &gt;&gt;&gt; print json.dumps(&quot;\&quot;foo\bar&quot;)</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-    &quot;\&quot;foo\bar&quot;</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-    &gt;&gt;&gt; print json.dumps(u'\u1234')</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-    &quot;\u1234&quot;</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-    &gt;&gt;&gt; print json.dumps('\\')</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-    &quot;\\&quot;</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-    &gt;&gt;&gt; print json.dumps({&quot;c&quot;: 0, &quot;b&quot;: 0, &quot;a&quot;: 0}, sort_keys=True)</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-    {&quot;a&quot;: 0, &quot;b&quot;: 0, &quot;c&quot;: 0}</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-    &gt;&gt;&gt; from StringIO import StringIO</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-    &gt;&gt;&gt; io = StringIO()</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-    &gt;&gt;&gt; json.dump(['streaming API'], io)</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-    &gt;&gt;&gt; io.getvalue()</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-    '[&quot;streaming API&quot;]'</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-Compact encoding::</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineminus">-</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-    &gt;&gt;&gt; json.dumps([1,2,3,{'4': 5, '6': 7}], separators=(',',':'))</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-    '[1,2,3,{&quot;4&quot;:5,&quot;6&quot;:7}]'</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineminus">-</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-Pretty printing::</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineminus">-</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-    &gt;&gt;&gt; s = json.dumps({'4': 5, '6': 7}, sort_keys=True, indent='    ')</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineminus">-    &gt;&gt;&gt; print '\n'.join([l.rstrip() for l in  s.splitlines()])</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineminus">-    {</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">-        &quot;4&quot;: 5,</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineminus">-        &quot;6&quot;: 7</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-    }</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineminus">-Decoding JSON::</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-    &gt;&gt;&gt; obj = [u'foo', {u'bar': [u'baz', None, 1.0, 2]}]</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineminus">-    &gt;&gt;&gt; json.loads('[&quot;foo&quot;, {&quot;bar&quot;:[&quot;baz&quot;, null, 1.0, 2]}]') == obj</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineminus">-    True</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineminus">-    &gt;&gt;&gt; json.loads('&quot;\\&quot;foo\\bar&quot;') == u'&quot;foo\x08ar'</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineminus">-    True</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineminus">-    &gt;&gt;&gt; from StringIO import StringIO</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineminus">-    &gt;&gt;&gt; io = StringIO('[&quot;streaming API&quot;]')</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineminus">-    &gt;&gt;&gt; json.load(io)[0] == 'streaming API'</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineminus">-    True</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineminus">-</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineminus">-Specializing JSON object decoding::</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineminus">-</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineminus">-    &gt;&gt;&gt; def as_complex(dct):</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineminus">-    ...     if '__complex__' in dct:</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineminus">-    ...         return complex(dct['real'], dct['imag'])</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineminus">-    ...     return dct</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineminus">-    ...</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineminus">-    &gt;&gt;&gt; json.loads('{&quot;__complex__&quot;: true, &quot;real&quot;: 1, &quot;imag&quot;: 2}',</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineminus">-    ...     object_hook=as_complex)</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineminus">-    (1+2j)</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineminus">-    &gt;&gt;&gt; from decimal import Decimal</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineminus">-    &gt;&gt;&gt; json.loads('1.1', parse_float=Decimal) == Decimal('1.1')</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineminus">-    True</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineminus">-</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineminus">-Specializing JSON object encoding::</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineminus">-</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineminus">-    &gt;&gt;&gt; import simplejson as json</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineminus">-    &gt;&gt;&gt; def encode_complex(obj):</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineminus">-    ...     if isinstance(obj, complex):</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineminus">-    ...         return [obj.real, obj.imag]</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineminus">-    ...     raise TypeError(repr(o) + &quot; is not JSON serializable&quot;)</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineminus">-    ...</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineminus">-    &gt;&gt;&gt; json.dumps(2 + 1j, default=encode_complex)</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineminus">-    '[2.0, 1.0]'</span>
<a href="#l16.89"></a><span id="l16.89" class="difflineminus">-    &gt;&gt;&gt; json.JSONEncoder(default=encode_complex).encode(2 + 1j)</span>
<a href="#l16.90"></a><span id="l16.90" class="difflineminus">-    '[2.0, 1.0]'</span>
<a href="#l16.91"></a><span id="l16.91" class="difflineminus">-    &gt;&gt;&gt; ''.join(json.JSONEncoder(default=encode_complex).iterencode(2 + 1j))</span>
<a href="#l16.92"></a><span id="l16.92" class="difflineminus">-    '[2.0, 1.0]'</span>
<a href="#l16.93"></a><span id="l16.93" class="difflineminus">-</span>
<a href="#l16.94"></a><span id="l16.94" class="difflineminus">-</span>
<a href="#l16.95"></a><span id="l16.95" class="difflineminus">-Using simplejson.tool from the shell to validate and pretty-print::</span>
<a href="#l16.96"></a><span id="l16.96" class="difflineminus">-</span>
<a href="#l16.97"></a><span id="l16.97" class="difflineminus">-    $ echo '{&quot;json&quot;:&quot;obj&quot;}' | python -m simplejson.tool</span>
<a href="#l16.98"></a><span id="l16.98" class="difflineminus">-    {</span>
<a href="#l16.99"></a><span id="l16.99" class="difflineminus">-        &quot;json&quot;: &quot;obj&quot;</span>
<a href="#l16.100"></a><span id="l16.100" class="difflineminus">-    }</span>
<a href="#l16.101"></a><span id="l16.101" class="difflineminus">-    $ echo '{ 1.2:3.4}' | python -m simplejson.tool</span>
<a href="#l16.102"></a><span id="l16.102" class="difflineminus">-    Expecting property name: line 1 column 2 (char 2)</span>
<a href="#l16.103"></a><span id="l16.103" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l16.104"></a><span id="l16.104" class="difflineminus">-__version__ = '2.1.6'</span>
<a href="#l16.105"></a><span id="l16.105" class="difflineminus">-__all__ = [</span>
<a href="#l16.106"></a><span id="l16.106" class="difflineminus">-    'dump', 'dumps', 'load', 'loads',</span>
<a href="#l16.107"></a><span id="l16.107" class="difflineminus">-    'JSONDecoder', 'JSONDecodeError', 'JSONEncoder',</span>
<a href="#l16.108"></a><span id="l16.108" class="difflineminus">-    'OrderedDict',</span>
<a href="#l16.109"></a><span id="l16.109" class="difflineminus">-]</span>
<a href="#l16.110"></a><span id="l16.110" class="difflineminus">-</span>
<a href="#l16.111"></a><span id="l16.111" class="difflineminus">-__author__ = 'Bob Ippolito &lt;bob@redivi.com&gt;'</span>
<a href="#l16.112"></a><span id="l16.112" class="difflineminus">-</span>
<a href="#l16.113"></a><span id="l16.113" class="difflineminus">-from decimal import Decimal</span>
<a href="#l16.114"></a><span id="l16.114" class="difflineminus">-</span>
<a href="#l16.115"></a><span id="l16.115" class="difflineminus">-from decoder import JSONDecoder, JSONDecodeError</span>
<a href="#l16.116"></a><span id="l16.116" class="difflineminus">-from encoder import JSONEncoder</span>
<a href="#l16.117"></a><span id="l16.117" class="difflineminus">-def _import_OrderedDict():</span>
<a href="#l16.118"></a><span id="l16.118" class="difflineminus">-    import collections</span>
<a href="#l16.119"></a><span id="l16.119" class="difflineminus">-    try:</span>
<a href="#l16.120"></a><span id="l16.120" class="difflineminus">-        return collections.OrderedDict</span>
<a href="#l16.121"></a><span id="l16.121" class="difflineminus">-    except AttributeError:</span>
<a href="#l16.122"></a><span id="l16.122" class="difflineminus">-        import ordered_dict</span>
<a href="#l16.123"></a><span id="l16.123" class="difflineminus">-        return ordered_dict.OrderedDict</span>
<a href="#l16.124"></a><span id="l16.124" class="difflineminus">-OrderedDict = _import_OrderedDict()</span>
<a href="#l16.125"></a><span id="l16.125" class="difflineminus">-</span>
<a href="#l16.126"></a><span id="l16.126" class="difflineminus">-def _import_c_make_encoder():</span>
<a href="#l16.127"></a><span id="l16.127" class="difflineminus">-    try:</span>
<a href="#l16.128"></a><span id="l16.128" class="difflineminus">-        from simplejson._speedups import make_encoder</span>
<a href="#l16.129"></a><span id="l16.129" class="difflineminus">-        return make_encoder</span>
<a href="#l16.130"></a><span id="l16.130" class="difflineminus">-    except ImportError:</span>
<a href="#l16.131"></a><span id="l16.131" class="difflineminus">-        return None</span>
<a href="#l16.132"></a><span id="l16.132" class="difflineminus">-</span>
<a href="#l16.133"></a><span id="l16.133" class="difflineminus">-_default_encoder = JSONEncoder(</span>
<a href="#l16.134"></a><span id="l16.134" class="difflineminus">-    skipkeys=False,</span>
<a href="#l16.135"></a><span id="l16.135" class="difflineminus">-    ensure_ascii=True,</span>
<a href="#l16.136"></a><span id="l16.136" class="difflineminus">-    check_circular=True,</span>
<a href="#l16.137"></a><span id="l16.137" class="difflineminus">-    allow_nan=True,</span>
<a href="#l16.138"></a><span id="l16.138" class="difflineminus">-    indent=None,</span>
<a href="#l16.139"></a><span id="l16.139" class="difflineminus">-    separators=None,</span>
<a href="#l16.140"></a><span id="l16.140" class="difflineminus">-    encoding='utf-8',</span>
<a href="#l16.141"></a><span id="l16.141" class="difflineminus">-    default=None,</span>
<a href="#l16.142"></a><span id="l16.142" class="difflineminus">-    use_decimal=False,</span>
<a href="#l16.143"></a><span id="l16.143" class="difflineminus">-)</span>
<a href="#l16.144"></a><span id="l16.144" class="difflineminus">-</span>
<a href="#l16.145"></a><span id="l16.145" class="difflineminus">-def dump(obj, fp, skipkeys=False, ensure_ascii=True, check_circular=True,</span>
<a href="#l16.146"></a><span id="l16.146" class="difflineminus">-        allow_nan=True, cls=None, indent=None, separators=None,</span>
<a href="#l16.147"></a><span id="l16.147" class="difflineminus">-        encoding='utf-8', default=None, use_decimal=False, **kw):</span>
<a href="#l16.148"></a><span id="l16.148" class="difflineminus">-    &quot;&quot;&quot;Serialize ``obj`` as a JSON formatted stream to ``fp`` (a</span>
<a href="#l16.149"></a><span id="l16.149" class="difflineminus">-    ``.write()``-supporting file-like object).</span>
<a href="#l16.150"></a><span id="l16.150" class="difflineminus">-</span>
<a href="#l16.151"></a><span id="l16.151" class="difflineminus">-    If ``skipkeys`` is true then ``dict`` keys that are not basic types</span>
<a href="#l16.152"></a><span id="l16.152" class="difflineminus">-    (``str``, ``unicode``, ``int``, ``long``, ``float``, ``bool``, ``None``)</span>
<a href="#l16.153"></a><span id="l16.153" class="difflineminus">-    will be skipped instead of raising a ``TypeError``.</span>
<a href="#l16.154"></a><span id="l16.154" class="difflineminus">-</span>
<a href="#l16.155"></a><span id="l16.155" class="difflineminus">-    If ``ensure_ascii`` is false, then the some chunks written to ``fp``</span>
<a href="#l16.156"></a><span id="l16.156" class="difflineminus">-    may be ``unicode`` instances, subject to normal Python ``str`` to</span>
<a href="#l16.157"></a><span id="l16.157" class="difflineminus">-    ``unicode`` coercion rules. Unless ``fp.write()`` explicitly</span>
<a href="#l16.158"></a><span id="l16.158" class="difflineminus">-    understands ``unicode`` (as in ``codecs.getwriter()``) this is likely</span>
<a href="#l16.159"></a><span id="l16.159" class="difflineminus">-    to cause an error.</span>
<a href="#l16.160"></a><span id="l16.160" class="difflineminus">-</span>
<a href="#l16.161"></a><span id="l16.161" class="difflineminus">-    If ``check_circular`` is false, then the circular reference check</span>
<a href="#l16.162"></a><span id="l16.162" class="difflineminus">-    for container types will be skipped and a circular reference will</span>
<a href="#l16.163"></a><span id="l16.163" class="difflineminus">-    result in an ``OverflowError`` (or worse).</span>
<a href="#l16.164"></a><span id="l16.164" class="difflineminus">-</span>
<a href="#l16.165"></a><span id="l16.165" class="difflineminus">-    If ``allow_nan`` is false, then it will be a ``ValueError`` to</span>
<a href="#l16.166"></a><span id="l16.166" class="difflineminus">-    serialize out of range ``float`` values (``nan``, ``inf``, ``-inf``)</span>
<a href="#l16.167"></a><span id="l16.167" class="difflineminus">-    in strict compliance of the JSON specification, instead of using the</span>
<a href="#l16.168"></a><span id="l16.168" class="difflineminus">-    JavaScript equivalents (``NaN``, ``Infinity``, ``-Infinity``).</span>
<a href="#l16.169"></a><span id="l16.169" class="difflineminus">-</span>
<a href="#l16.170"></a><span id="l16.170" class="difflineminus">-    If *indent* is a string, then JSON array elements and object members</span>
<a href="#l16.171"></a><span id="l16.171" class="difflineminus">-    will be pretty-printed with a newline followed by that string repeated</span>
<a href="#l16.172"></a><span id="l16.172" class="difflineminus">-    for each level of nesting. ``None`` (the default) selects the most compact</span>
<a href="#l16.173"></a><span id="l16.173" class="difflineminus">-    representation without any newlines. For backwards compatibility with</span>
<a href="#l16.174"></a><span id="l16.174" class="difflineminus">-    versions of simplejson earlier than 2.1.0, an integer is also accepted</span>
<a href="#l16.175"></a><span id="l16.175" class="difflineminus">-    and is converted to a string with that many spaces.</span>
<a href="#l16.176"></a><span id="l16.176" class="difflineminus">-</span>
<a href="#l16.177"></a><span id="l16.177" class="difflineminus">-    If ``separators`` is an ``(item_separator, dict_separator)`` tuple</span>
<a href="#l16.178"></a><span id="l16.178" class="difflineminus">-    then it will be used instead of the default ``(', ', ': ')`` separators.</span>
<a href="#l16.179"></a><span id="l16.179" class="difflineminus">-    ``(',', ':')`` is the most compact JSON representation.</span>
<a href="#l16.180"></a><span id="l16.180" class="difflineminus">-</span>
<a href="#l16.181"></a><span id="l16.181" class="difflineminus">-    ``encoding`` is the character encoding for str instances, default is UTF-8.</span>
<a href="#l16.182"></a><span id="l16.182" class="difflineminus">-</span>
<a href="#l16.183"></a><span id="l16.183" class="difflineminus">-    ``default(obj)`` is a function that should return a serializable version</span>
<a href="#l16.184"></a><span id="l16.184" class="difflineminus">-    of obj or raise TypeError. The default simply raises TypeError.</span>
<a href="#l16.185"></a><span id="l16.185" class="difflineminus">-</span>
<a href="#l16.186"></a><span id="l16.186" class="difflineminus">-    If *use_decimal* is true (default: ``False``) then decimal.Decimal</span>
<a href="#l16.187"></a><span id="l16.187" class="difflineminus">-    will be natively serialized to JSON with full precision.</span>
<a href="#l16.188"></a><span id="l16.188" class="difflineminus">-</span>
<a href="#l16.189"></a><span id="l16.189" class="difflineminus">-    To use a custom ``JSONEncoder`` subclass (e.g. one that overrides the</span>
<a href="#l16.190"></a><span id="l16.190" class="difflineminus">-    ``.default()`` method to serialize additional types), specify it with</span>
<a href="#l16.191"></a><span id="l16.191" class="difflineminus">-    the ``cls`` kwarg.</span>
<a href="#l16.192"></a><span id="l16.192" class="difflineminus">-</span>
<a href="#l16.193"></a><span id="l16.193" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l16.194"></a><span id="l16.194" class="difflineminus">-    # cached encoder</span>
<a href="#l16.195"></a><span id="l16.195" class="difflineminus">-    if (not skipkeys and ensure_ascii and</span>
<a href="#l16.196"></a><span id="l16.196" class="difflineminus">-        check_circular and allow_nan and</span>
<a href="#l16.197"></a><span id="l16.197" class="difflineminus">-        cls is None and indent is None and separators is None and</span>
<a href="#l16.198"></a><span id="l16.198" class="difflineminus">-        encoding == 'utf-8' and default is None and not use_decimal</span>
<a href="#l16.199"></a><span id="l16.199" class="difflineminus">-        and not kw):</span>
<a href="#l16.200"></a><span id="l16.200" class="difflineminus">-        iterable = _default_encoder.iterencode(obj)</span>
<a href="#l16.201"></a><span id="l16.201" class="difflineminus">-    else:</span>
<a href="#l16.202"></a><span id="l16.202" class="difflineminus">-        if cls is None:</span>
<a href="#l16.203"></a><span id="l16.203" class="difflineminus">-            cls = JSONEncoder</span>
<a href="#l16.204"></a><span id="l16.204" class="difflineminus">-        iterable = cls(skipkeys=skipkeys, ensure_ascii=ensure_ascii,</span>
<a href="#l16.205"></a><span id="l16.205" class="difflineminus">-            check_circular=check_circular, allow_nan=allow_nan, indent=indent,</span>
<a href="#l16.206"></a><span id="l16.206" class="difflineminus">-            separators=separators, encoding=encoding,</span>
<a href="#l16.207"></a><span id="l16.207" class="difflineminus">-            default=default, use_decimal=use_decimal, **kw).iterencode(obj)</span>
<a href="#l16.208"></a><span id="l16.208" class="difflineminus">-    # could accelerate with writelines in some versions of Python, at</span>
<a href="#l16.209"></a><span id="l16.209" class="difflineminus">-    # a debuggability cost</span>
<a href="#l16.210"></a><span id="l16.210" class="difflineminus">-    for chunk in iterable:</span>
<a href="#l16.211"></a><span id="l16.211" class="difflineminus">-        fp.write(chunk)</span>
<a href="#l16.212"></a><span id="l16.212" class="difflineminus">-</span>
<a href="#l16.213"></a><span id="l16.213" class="difflineminus">-</span>
<a href="#l16.214"></a><span id="l16.214" class="difflineminus">-def dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True,</span>
<a href="#l16.215"></a><span id="l16.215" class="difflineminus">-        allow_nan=True, cls=None, indent=None, separators=None,</span>
<a href="#l16.216"></a><span id="l16.216" class="difflineminus">-        encoding='utf-8', default=None, use_decimal=False, **kw):</span>
<a href="#l16.217"></a><span id="l16.217" class="difflineminus">-    &quot;&quot;&quot;Serialize ``obj`` to a JSON formatted ``str``.</span>
<a href="#l16.218"></a><span id="l16.218" class="difflineminus">-</span>
<a href="#l16.219"></a><span id="l16.219" class="difflineminus">-    If ``skipkeys`` is false then ``dict`` keys that are not basic types</span>
<a href="#l16.220"></a><span id="l16.220" class="difflineminus">-    (``str``, ``unicode``, ``int``, ``long``, ``float``, ``bool``, ``None``)</span>
<a href="#l16.221"></a><span id="l16.221" class="difflineminus">-    will be skipped instead of raising a ``TypeError``.</span>
<a href="#l16.222"></a><span id="l16.222" class="difflineminus">-</span>
<a href="#l16.223"></a><span id="l16.223" class="difflineminus">-    If ``ensure_ascii`` is false, then the return value will be a</span>
<a href="#l16.224"></a><span id="l16.224" class="difflineminus">-    ``unicode`` instance subject to normal Python ``str`` to ``unicode``</span>
<a href="#l16.225"></a><span id="l16.225" class="difflineminus">-    coercion rules instead of being escaped to an ASCII ``str``.</span>
<a href="#l16.226"></a><span id="l16.226" class="difflineminus">-</span>
<a href="#l16.227"></a><span id="l16.227" class="difflineminus">-    If ``check_circular`` is false, then the circular reference check</span>
<a href="#l16.228"></a><span id="l16.228" class="difflineminus">-    for container types will be skipped and a circular reference will</span>
<a href="#l16.229"></a><span id="l16.229" class="difflineminus">-    result in an ``OverflowError`` (or worse).</span>
<a href="#l16.230"></a><span id="l16.230" class="difflineminus">-</span>
<a href="#l16.231"></a><span id="l16.231" class="difflineminus">-    If ``allow_nan`` is false, then it will be a ``ValueError`` to</span>
<a href="#l16.232"></a><span id="l16.232" class="difflineminus">-    serialize out of range ``float`` values (``nan``, ``inf``, ``-inf``) in</span>
<a href="#l16.233"></a><span id="l16.233" class="difflineminus">-    strict compliance of the JSON specification, instead of using the</span>
<a href="#l16.234"></a><span id="l16.234" class="difflineminus">-    JavaScript equivalents (``NaN``, ``Infinity``, ``-Infinity``).</span>
<a href="#l16.235"></a><span id="l16.235" class="difflineminus">-</span>
<a href="#l16.236"></a><span id="l16.236" class="difflineminus">-    If ``indent`` is a string, then JSON array elements and object members</span>
<a href="#l16.237"></a><span id="l16.237" class="difflineminus">-    will be pretty-printed with a newline followed by that string repeated</span>
<a href="#l16.238"></a><span id="l16.238" class="difflineminus">-    for each level of nesting. ``None`` (the default) selects the most compact</span>
<a href="#l16.239"></a><span id="l16.239" class="difflineminus">-    representation without any newlines. For backwards compatibility with</span>
<a href="#l16.240"></a><span id="l16.240" class="difflineminus">-    versions of simplejson earlier than 2.1.0, an integer is also accepted</span>
<a href="#l16.241"></a><span id="l16.241" class="difflineminus">-    and is converted to a string with that many spaces.</span>
<a href="#l16.242"></a><span id="l16.242" class="difflineminus">-</span>
<a href="#l16.243"></a><span id="l16.243" class="difflineminus">-    If ``separators`` is an ``(item_separator, dict_separator)`` tuple</span>
<a href="#l16.244"></a><span id="l16.244" class="difflineminus">-    then it will be used instead of the default ``(', ', ': ')`` separators.</span>
<a href="#l16.245"></a><span id="l16.245" class="difflineminus">-    ``(',', ':')`` is the most compact JSON representation.</span>
<a href="#l16.246"></a><span id="l16.246" class="difflineminus">-</span>
<a href="#l16.247"></a><span id="l16.247" class="difflineminus">-    ``encoding`` is the character encoding for str instances, default is UTF-8.</span>
<a href="#l16.248"></a><span id="l16.248" class="difflineminus">-</span>
<a href="#l16.249"></a><span id="l16.249" class="difflineminus">-    ``default(obj)`` is a function that should return a serializable version</span>
<a href="#l16.250"></a><span id="l16.250" class="difflineminus">-    of obj or raise TypeError. The default simply raises TypeError.</span>
<a href="#l16.251"></a><span id="l16.251" class="difflineminus">-</span>
<a href="#l16.252"></a><span id="l16.252" class="difflineminus">-    If *use_decimal* is true (default: ``False``) then decimal.Decimal</span>
<a href="#l16.253"></a><span id="l16.253" class="difflineminus">-    will be natively serialized to JSON with full precision.</span>
<a href="#l16.254"></a><span id="l16.254" class="difflineminus">-</span>
<a href="#l16.255"></a><span id="l16.255" class="difflineminus">-    To use a custom ``JSONEncoder`` subclass (e.g. one that overrides the</span>
<a href="#l16.256"></a><span id="l16.256" class="difflineminus">-    ``.default()`` method to serialize additional types), specify it with</span>
<a href="#l16.257"></a><span id="l16.257" class="difflineminus">-    the ``cls`` kwarg.</span>
<a href="#l16.258"></a><span id="l16.258" class="difflineminus">-</span>
<a href="#l16.259"></a><span id="l16.259" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l16.260"></a><span id="l16.260" class="difflineminus">-    # cached encoder</span>
<a href="#l16.261"></a><span id="l16.261" class="difflineminus">-    if (not skipkeys and ensure_ascii and</span>
<a href="#l16.262"></a><span id="l16.262" class="difflineminus">-        check_circular and allow_nan and</span>
<a href="#l16.263"></a><span id="l16.263" class="difflineminus">-        cls is None and indent is None and separators is None and</span>
<a href="#l16.264"></a><span id="l16.264" class="difflineminus">-        encoding == 'utf-8' and default is None and not use_decimal</span>
<a href="#l16.265"></a><span id="l16.265" class="difflineminus">-        and not kw):</span>
<a href="#l16.266"></a><span id="l16.266" class="difflineminus">-        return _default_encoder.encode(obj)</span>
<a href="#l16.267"></a><span id="l16.267" class="difflineminus">-    if cls is None:</span>
<a href="#l16.268"></a><span id="l16.268" class="difflineminus">-        cls = JSONEncoder</span>
<a href="#l16.269"></a><span id="l16.269" class="difflineminus">-    return cls(</span>
<a href="#l16.270"></a><span id="l16.270" class="difflineminus">-        skipkeys=skipkeys, ensure_ascii=ensure_ascii,</span>
<a href="#l16.271"></a><span id="l16.271" class="difflineminus">-        check_circular=check_circular, allow_nan=allow_nan, indent=indent,</span>
<a href="#l16.272"></a><span id="l16.272" class="difflineminus">-        separators=separators, encoding=encoding, default=default,</span>
<a href="#l16.273"></a><span id="l16.273" class="difflineminus">-        use_decimal=use_decimal, **kw).encode(obj)</span>
<a href="#l16.274"></a><span id="l16.274" class="difflineminus">-</span>
<a href="#l16.275"></a><span id="l16.275" class="difflineminus">-</span>
<a href="#l16.276"></a><span id="l16.276" class="difflineminus">-_default_decoder = JSONDecoder(encoding=None, object_hook=None,</span>
<a href="#l16.277"></a><span id="l16.277" class="difflineminus">-                               object_pairs_hook=None)</span>
<a href="#l16.278"></a><span id="l16.278" class="difflineminus">-</span>
<a href="#l16.279"></a><span id="l16.279" class="difflineminus">-</span>
<a href="#l16.280"></a><span id="l16.280" class="difflineminus">-def load(fp, encoding=None, cls=None, object_hook=None, parse_float=None,</span>
<a href="#l16.281"></a><span id="l16.281" class="difflineminus">-        parse_int=None, parse_constant=None, object_pairs_hook=None,</span>
<a href="#l16.282"></a><span id="l16.282" class="difflineminus">-        use_decimal=False, **kw):</span>
<a href="#l16.283"></a><span id="l16.283" class="difflineminus">-    &quot;&quot;&quot;Deserialize ``fp`` (a ``.read()``-supporting file-like object containing</span>
<a href="#l16.284"></a><span id="l16.284" class="difflineminus">-    a JSON document) to a Python object.</span>
<a href="#l16.285"></a><span id="l16.285" class="difflineminus">-</span>
<a href="#l16.286"></a><span id="l16.286" class="difflineminus">-    *encoding* determines the encoding used to interpret any</span>
<a href="#l16.287"></a><span id="l16.287" class="difflineminus">-    :class:`str` objects decoded by this instance (``'utf-8'`` by</span>
<a href="#l16.288"></a><span id="l16.288" class="difflineminus">-    default).  It has no effect when decoding :class:`unicode` objects.</span>
<a href="#l16.289"></a><span id="l16.289" class="difflineminus">-</span>
<a href="#l16.290"></a><span id="l16.290" class="difflineminus">-    Note that currently only encodings that are a superset of ASCII work,</span>
<a href="#l16.291"></a><span id="l16.291" class="difflineminus">-    strings of other encodings should be passed in as :class:`unicode`.</span>
<a href="#l16.292"></a><span id="l16.292" class="difflineminus">-</span>
<a href="#l16.293"></a><span id="l16.293" class="difflineminus">-    *object_hook*, if specified, will be called with the result of every</span>
<a href="#l16.294"></a><span id="l16.294" class="difflineminus">-    JSON object decoded and its return value will be used in place of the</span>
<a href="#l16.295"></a><span id="l16.295" class="difflineminus">-    given :class:`dict`.  This can be used to provide custom</span>
<a href="#l16.296"></a><span id="l16.296" class="difflineminus">-    deserializations (e.g. to support JSON-RPC class hinting).</span>
<a href="#l16.297"></a><span id="l16.297" class="difflineminus">-</span>
<a href="#l16.298"></a><span id="l16.298" class="difflineminus">-    *object_pairs_hook* is an optional function that will be called with</span>
<a href="#l16.299"></a><span id="l16.299" class="difflineminus">-    the result of any object literal decode with an ordered list of pairs.</span>
<a href="#l16.300"></a><span id="l16.300" class="difflineminus">-    The return value of *object_pairs_hook* will be used instead of the</span>
<a href="#l16.301"></a><span id="l16.301" class="difflineminus">-    :class:`dict`.  This feature can be used to implement custom decoders</span>
<a href="#l16.302"></a><span id="l16.302" class="difflineminus">-    that rely on the order that the key and value pairs are decoded (for</span>
<a href="#l16.303"></a><span id="l16.303" class="difflineminus">-    example, :func:`collections.OrderedDict` will remember the order of</span>
<a href="#l16.304"></a><span id="l16.304" class="difflineminus">-    insertion). If *object_hook* is also defined, the *object_pairs_hook*</span>
<a href="#l16.305"></a><span id="l16.305" class="difflineminus">-    takes priority.</span>
<a href="#l16.306"></a><span id="l16.306" class="difflineminus">-</span>
<a href="#l16.307"></a><span id="l16.307" class="difflineminus">-    *parse_float*, if specified, will be called with the string of every</span>
<a href="#l16.308"></a><span id="l16.308" class="difflineminus">-    JSON float to be decoded.  By default, this is equivalent to</span>
<a href="#l16.309"></a><span id="l16.309" class="difflineminus">-    ``float(num_str)``. This can be used to use another datatype or parser</span>
<a href="#l16.310"></a><span id="l16.310" class="difflineminus">-    for JSON floats (e.g. :class:`decimal.Decimal`).</span>
<a href="#l16.311"></a><span id="l16.311" class="difflineminus">-</span>
<a href="#l16.312"></a><span id="l16.312" class="difflineminus">-    *parse_int*, if specified, will be called with the string of every</span>
<a href="#l16.313"></a><span id="l16.313" class="difflineminus">-    JSON int to be decoded.  By default, this is equivalent to</span>
<a href="#l16.314"></a><span id="l16.314" class="difflineminus">-    ``int(num_str)``.  This can be used to use another datatype or parser</span>
<a href="#l16.315"></a><span id="l16.315" class="difflineminus">-    for JSON integers (e.g. :class:`float`).</span>
<a href="#l16.316"></a><span id="l16.316" class="difflineminus">-</span>
<a href="#l16.317"></a><span id="l16.317" class="difflineminus">-    *parse_constant*, if specified, will be called with one of the</span>
<a href="#l16.318"></a><span id="l16.318" class="difflineminus">-    following strings: ``'-Infinity'``, ``'Infinity'``, ``'NaN'``.  This</span>
<a href="#l16.319"></a><span id="l16.319" class="difflineminus">-    can be used to raise an exception if invalid JSON numbers are</span>
<a href="#l16.320"></a><span id="l16.320" class="difflineminus">-    encountered.</span>
<a href="#l16.321"></a><span id="l16.321" class="difflineminus">-</span>
<a href="#l16.322"></a><span id="l16.322" class="difflineminus">-    If *use_decimal* is true (default: ``False``) then it implies</span>
<a href="#l16.323"></a><span id="l16.323" class="difflineminus">-    parse_float=decimal.Decimal for parity with ``dump``.</span>
<a href="#l16.324"></a><span id="l16.324" class="difflineminus">-</span>
<a href="#l16.325"></a><span id="l16.325" class="difflineminus">-    To use a custom ``JSONDecoder`` subclass, specify it with the ``cls``</span>
<a href="#l16.326"></a><span id="l16.326" class="difflineminus">-    kwarg.</span>
<a href="#l16.327"></a><span id="l16.327" class="difflineminus">-</span>
<a href="#l16.328"></a><span id="l16.328" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l16.329"></a><span id="l16.329" class="difflineminus">-    return loads(fp.read(),</span>
<a href="#l16.330"></a><span id="l16.330" class="difflineminus">-        encoding=encoding, cls=cls, object_hook=object_hook,</span>
<a href="#l16.331"></a><span id="l16.331" class="difflineminus">-        parse_float=parse_float, parse_int=parse_int,</span>
<a href="#l16.332"></a><span id="l16.332" class="difflineminus">-        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook,</span>
<a href="#l16.333"></a><span id="l16.333" class="difflineminus">-        use_decimal=use_decimal, **kw)</span>
<a href="#l16.334"></a><span id="l16.334" class="difflineminus">-</span>
<a href="#l16.335"></a><span id="l16.335" class="difflineminus">-</span>
<a href="#l16.336"></a><span id="l16.336" class="difflineminus">-def loads(s, encoding=None, cls=None, object_hook=None, parse_float=None,</span>
<a href="#l16.337"></a><span id="l16.337" class="difflineminus">-        parse_int=None, parse_constant=None, object_pairs_hook=None,</span>
<a href="#l16.338"></a><span id="l16.338" class="difflineminus">-        use_decimal=False, **kw):</span>
<a href="#l16.339"></a><span id="l16.339" class="difflineminus">-    &quot;&quot;&quot;Deserialize ``s`` (a ``str`` or ``unicode`` instance containing a JSON</span>
<a href="#l16.340"></a><span id="l16.340" class="difflineminus">-    document) to a Python object.</span>
<a href="#l16.341"></a><span id="l16.341" class="difflineminus">-</span>
<a href="#l16.342"></a><span id="l16.342" class="difflineminus">-    *encoding* determines the encoding used to interpret any</span>
<a href="#l16.343"></a><span id="l16.343" class="difflineminus">-    :class:`str` objects decoded by this instance (``'utf-8'`` by</span>
<a href="#l16.344"></a><span id="l16.344" class="difflineminus">-    default).  It has no effect when decoding :class:`unicode` objects.</span>
<a href="#l16.345"></a><span id="l16.345" class="difflineminus">-</span>
<a href="#l16.346"></a><span id="l16.346" class="difflineminus">-    Note that currently only encodings that are a superset of ASCII work,</span>
<a href="#l16.347"></a><span id="l16.347" class="difflineminus">-    strings of other encodings should be passed in as :class:`unicode`.</span>
<a href="#l16.348"></a><span id="l16.348" class="difflineminus">-</span>
<a href="#l16.349"></a><span id="l16.349" class="difflineminus">-    *object_hook*, if specified, will be called with the result of every</span>
<a href="#l16.350"></a><span id="l16.350" class="difflineminus">-    JSON object decoded and its return value will be used in place of the</span>
<a href="#l16.351"></a><span id="l16.351" class="difflineminus">-    given :class:`dict`.  This can be used to provide custom</span>
<a href="#l16.352"></a><span id="l16.352" class="difflineminus">-    deserializations (e.g. to support JSON-RPC class hinting).</span>
<a href="#l16.353"></a><span id="l16.353" class="difflineminus">-</span>
<a href="#l16.354"></a><span id="l16.354" class="difflineminus">-    *object_pairs_hook* is an optional function that will be called with</span>
<a href="#l16.355"></a><span id="l16.355" class="difflineminus">-    the result of any object literal decode with an ordered list of pairs.</span>
<a href="#l16.356"></a><span id="l16.356" class="difflineminus">-    The return value of *object_pairs_hook* will be used instead of the</span>
<a href="#l16.357"></a><span id="l16.357" class="difflineminus">-    :class:`dict`.  This feature can be used to implement custom decoders</span>
<a href="#l16.358"></a><span id="l16.358" class="difflineminus">-    that rely on the order that the key and value pairs are decoded (for</span>
<a href="#l16.359"></a><span id="l16.359" class="difflineminus">-    example, :func:`collections.OrderedDict` will remember the order of</span>
<a href="#l16.360"></a><span id="l16.360" class="difflineminus">-    insertion). If *object_hook* is also defined, the *object_pairs_hook*</span>
<a href="#l16.361"></a><span id="l16.361" class="difflineminus">-    takes priority.</span>
<a href="#l16.362"></a><span id="l16.362" class="difflineminus">-</span>
<a href="#l16.363"></a><span id="l16.363" class="difflineminus">-    *parse_float*, if specified, will be called with the string of every</span>
<a href="#l16.364"></a><span id="l16.364" class="difflineminus">-    JSON float to be decoded.  By default, this is equivalent to</span>
<a href="#l16.365"></a><span id="l16.365" class="difflineminus">-    ``float(num_str)``. This can be used to use another datatype or parser</span>
<a href="#l16.366"></a><span id="l16.366" class="difflineminus">-    for JSON floats (e.g. :class:`decimal.Decimal`).</span>
<a href="#l16.367"></a><span id="l16.367" class="difflineminus">-</span>
<a href="#l16.368"></a><span id="l16.368" class="difflineminus">-    *parse_int*, if specified, will be called with the string of every</span>
<a href="#l16.369"></a><span id="l16.369" class="difflineminus">-    JSON int to be decoded.  By default, this is equivalent to</span>
<a href="#l16.370"></a><span id="l16.370" class="difflineminus">-    ``int(num_str)``.  This can be used to use another datatype or parser</span>
<a href="#l16.371"></a><span id="l16.371" class="difflineminus">-    for JSON integers (e.g. :class:`float`).</span>
<a href="#l16.372"></a><span id="l16.372" class="difflineminus">-</span>
<a href="#l16.373"></a><span id="l16.373" class="difflineminus">-    *parse_constant*, if specified, will be called with one of the</span>
<a href="#l16.374"></a><span id="l16.374" class="difflineminus">-    following strings: ``'-Infinity'``, ``'Infinity'``, ``'NaN'``.  This</span>
<a href="#l16.375"></a><span id="l16.375" class="difflineminus">-    can be used to raise an exception if invalid JSON numbers are</span>
<a href="#l16.376"></a><span id="l16.376" class="difflineminus">-    encountered.</span>
<a href="#l16.377"></a><span id="l16.377" class="difflineminus">-</span>
<a href="#l16.378"></a><span id="l16.378" class="difflineminus">-    If *use_decimal* is true (default: ``False``) then it implies</span>
<a href="#l16.379"></a><span id="l16.379" class="difflineminus">-    parse_float=decimal.Decimal for parity with ``dump``.</span>
<a href="#l16.380"></a><span id="l16.380" class="difflineminus">-</span>
<a href="#l16.381"></a><span id="l16.381" class="difflineminus">-    To use a custom ``JSONDecoder`` subclass, specify it with the ``cls``</span>
<a href="#l16.382"></a><span id="l16.382" class="difflineminus">-    kwarg.</span>
<a href="#l16.383"></a><span id="l16.383" class="difflineminus">-</span>
<a href="#l16.384"></a><span id="l16.384" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l16.385"></a><span id="l16.385" class="difflineminus">-    if (cls is None and encoding is None and object_hook is None and</span>
<a href="#l16.386"></a><span id="l16.386" class="difflineminus">-            parse_int is None and parse_float is None and</span>
<a href="#l16.387"></a><span id="l16.387" class="difflineminus">-            parse_constant is None and object_pairs_hook is None</span>
<a href="#l16.388"></a><span id="l16.388" class="difflineminus">-            and not use_decimal and not kw):</span>
<a href="#l16.389"></a><span id="l16.389" class="difflineminus">-        return _default_decoder.decode(s)</span>
<a href="#l16.390"></a><span id="l16.390" class="difflineminus">-    if cls is None:</span>
<a href="#l16.391"></a><span id="l16.391" class="difflineminus">-        cls = JSONDecoder</span>
<a href="#l16.392"></a><span id="l16.392" class="difflineminus">-    if object_hook is not None:</span>
<a href="#l16.393"></a><span id="l16.393" class="difflineminus">-        kw['object_hook'] = object_hook</span>
<a href="#l16.394"></a><span id="l16.394" class="difflineminus">-    if object_pairs_hook is not None:</span>
<a href="#l16.395"></a><span id="l16.395" class="difflineminus">-        kw['object_pairs_hook'] = object_pairs_hook</span>
<a href="#l16.396"></a><span id="l16.396" class="difflineminus">-    if parse_float is not None:</span>
<a href="#l16.397"></a><span id="l16.397" class="difflineminus">-        kw['parse_float'] = parse_float</span>
<a href="#l16.398"></a><span id="l16.398" class="difflineminus">-    if parse_int is not None:</span>
<a href="#l16.399"></a><span id="l16.399" class="difflineminus">-        kw['parse_int'] = parse_int</span>
<a href="#l16.400"></a><span id="l16.400" class="difflineminus">-    if parse_constant is not None:</span>
<a href="#l16.401"></a><span id="l16.401" class="difflineminus">-        kw['parse_constant'] = parse_constant</span>
<a href="#l16.402"></a><span id="l16.402" class="difflineminus">-    if use_decimal:</span>
<a href="#l16.403"></a><span id="l16.403" class="difflineminus">-        if parse_float is not None:</span>
<a href="#l16.404"></a><span id="l16.404" class="difflineminus">-            raise TypeError(&quot;use_decimal=True implies parse_float=Decimal&quot;)</span>
<a href="#l16.405"></a><span id="l16.405" class="difflineminus">-        kw['parse_float'] = Decimal</span>
<a href="#l16.406"></a><span id="l16.406" class="difflineminus">-    return cls(encoding=encoding, **kw).decode(s)</span>
<a href="#l16.407"></a><span id="l16.407" class="difflineminus">-</span>
<a href="#l16.408"></a><span id="l16.408" class="difflineminus">-</span>
<a href="#l16.409"></a><span id="l16.409" class="difflineminus">-def _toggle_speedups(enabled):</span>
<a href="#l16.410"></a><span id="l16.410" class="difflineminus">-    import simplejson.decoder as dec</span>
<a href="#l16.411"></a><span id="l16.411" class="difflineminus">-    import simplejson.encoder as enc</span>
<a href="#l16.412"></a><span id="l16.412" class="difflineminus">-    import simplejson.scanner as scan</span>
<a href="#l16.413"></a><span id="l16.413" class="difflineminus">-    c_make_encoder = _import_c_make_encoder()</span>
<a href="#l16.414"></a><span id="l16.414" class="difflineminus">-    if enabled:</span>
<a href="#l16.415"></a><span id="l16.415" class="difflineminus">-        dec.scanstring = dec.c_scanstring or dec.py_scanstring</span>
<a href="#l16.416"></a><span id="l16.416" class="difflineminus">-        enc.c_make_encoder = c_make_encoder</span>
<a href="#l16.417"></a><span id="l16.417" class="difflineminus">-        enc.encode_basestring_ascii = (enc.c_encode_basestring_ascii or </span>
<a href="#l16.418"></a><span id="l16.418" class="difflineminus">-            enc.py_encode_basestring_ascii)</span>
<a href="#l16.419"></a><span id="l16.419" class="difflineminus">-        scan.make_scanner = scan.c_make_scanner or scan.py_make_scanner</span>
<a href="#l16.420"></a><span id="l16.420" class="difflineminus">-    else:</span>
<a href="#l16.421"></a><span id="l16.421" class="difflineminus">-        dec.scanstring = dec.py_scanstring</span>
<a href="#l16.422"></a><span id="l16.422" class="difflineminus">-        enc.c_make_encoder = None</span>
<a href="#l16.423"></a><span id="l16.423" class="difflineminus">-        enc.encode_basestring_ascii = enc.py_encode_basestring_ascii</span>
<a href="#l16.424"></a><span id="l16.424" class="difflineminus">-        scan.make_scanner = scan.py_make_scanner</span>
<a href="#l16.425"></a><span id="l16.425" class="difflineminus">-    dec.make_scanner = scan.make_scanner</span>
<a href="#l16.426"></a><span id="l16.426" class="difflineminus">-    global _default_decoder</span>
<a href="#l16.427"></a><span id="l16.427" class="difflineminus">-    _default_decoder = JSONDecoder(</span>
<a href="#l16.428"></a><span id="l16.428" class="difflineminus">-        encoding=None,</span>
<a href="#l16.429"></a><span id="l16.429" class="difflineminus">-        object_hook=None,</span>
<a href="#l16.430"></a><span id="l16.430" class="difflineminus">-        object_pairs_hook=None,</span>
<a href="#l16.431"></a><span id="l16.431" class="difflineminus">-    )</span>
<a href="#l16.432"></a><span id="l16.432" class="difflineminus">-    global _default_encoder</span>
<a href="#l16.433"></a><span id="l16.433" class="difflineminus">-    _default_encoder = JSONEncoder(</span>
<a href="#l16.434"></a><span id="l16.434" class="difflineminus">-       skipkeys=False,</span>
<a href="#l16.435"></a><span id="l16.435" class="difflineminus">-       ensure_ascii=True,</span>
<a href="#l16.436"></a><span id="l16.436" class="difflineminus">-       check_circular=True,</span>
<a href="#l16.437"></a><span id="l16.437" class="difflineminus">-       allow_nan=True,</span>
<a href="#l16.438"></a><span id="l16.438" class="difflineminus">-       indent=None,</span>
<a href="#l16.439"></a><span id="l16.439" class="difflineminus">-       separators=None,</span>
<a href="#l16.440"></a><span id="l16.440" class="difflineminus">-       encoding='utf-8',</span>
<a href="#l16.441"></a><span id="l16.441" class="difflineminus">-       default=None,</span>
<a href="#l16.442"></a><span id="l16.442" class="difflineminus">-   )</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/_speedups.c</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,2652 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-#include &quot;Python.h&quot;</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">-#include &quot;structmember.h&quot;</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">-#if PY_VERSION_HEX &lt; 0x02070000 &amp;&amp; !defined(PyOS_string_to_double)</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">-#define PyOS_string_to_double json_PyOS_string_to_double</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">-static double</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-json_PyOS_string_to_double(const char *s, char **endptr, PyObject *overflow_exception);</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-static double</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-json_PyOS_string_to_double(const char *s, char **endptr, PyObject *overflow_exception) {</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-    double x;</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-    assert(endptr == NULL);</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-    assert(overflow_exception == NULL);</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-    PyFPE_START_PROTECT(&quot;json_PyOS_string_to_double&quot;, return -1.0;)</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">-    x = PyOS_ascii_atof(s);</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineminus">-    PyFPE_END_PROTECT(x)</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineminus">-    return x;</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineminus">-}</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">-#endif</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineminus">-#if PY_VERSION_HEX &lt; 0x02060000 &amp;&amp; !defined(Py_TYPE)</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">-#define Py_TYPE(ob)     (((PyObject*)(ob))-&gt;ob_type)</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineminus">-#endif</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">-#if PY_VERSION_HEX &lt; 0x02060000 &amp;&amp; !defined(Py_SIZE)</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-#define Py_SIZE(ob)     (((PyVarObject*)(ob))-&gt;ob_size)</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">-#endif</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineminus">-#if PY_VERSION_HEX &lt; 0x02050000 &amp;&amp; !defined(PY_SSIZE_T_MIN)</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineminus">-typedef int Py_ssize_t;</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">-#define PY_SSIZE_T_MAX INT_MAX</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-#define PY_SSIZE_T_MIN INT_MIN</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineminus">-#define PyInt_FromSsize_t PyInt_FromLong</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-#define PyInt_AsSsize_t PyInt_AsLong</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-#endif</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-#ifndef Py_IS_FINITE</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-#define Py_IS_FINITE(X) (!Py_IS_INFINITY(X) &amp;&amp; !Py_IS_NAN(X))</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">-#endif</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineminus">-</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">-#ifdef __GNUC__</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-#define UNUSED __attribute__((__unused__))</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-#else</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-#define UNUSED</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">-#endif</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineminus">-</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-#define DEFAULT_ENCODING &quot;utf-8&quot;</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-#define PyScanner_Check(op) PyObject_TypeCheck(op, &amp;PyScannerType)</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">-#define PyScanner_CheckExact(op) (Py_TYPE(op) == &amp;PyScannerType)</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">-#define PyEncoder_Check(op) PyObject_TypeCheck(op, &amp;PyEncoderType)</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-#define PyEncoder_CheckExact(op) (Py_TYPE(op) == &amp;PyEncoderType)</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-#define Decimal_Check(op) (PyObject_TypeCheck(op, DecimalTypePtr))</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">-</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">-static PyTypeObject PyScannerType;</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">-static PyTypeObject PyEncoderType;</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-static PyTypeObject *DecimalTypePtr;</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineminus">-</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-typedef struct _PyScannerObject {</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-    PyObject_HEAD</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineminus">-    PyObject *encoding;</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-    PyObject *strict;</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-    PyObject *object_hook;</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-    PyObject *pairs_hook;</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-    PyObject *parse_float;</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-    PyObject *parse_int;</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-    PyObject *parse_constant;</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-    PyObject *memo;</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineminus">-} PyScannerObject;</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineminus">-</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineminus">-static PyMemberDef scanner_members[] = {</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-    {&quot;encoding&quot;, T_OBJECT, offsetof(PyScannerObject, encoding), READONLY, &quot;encoding&quot;},</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-    {&quot;strict&quot;, T_OBJECT, offsetof(PyScannerObject, strict), READONLY, &quot;strict&quot;},</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineminus">-    {&quot;object_hook&quot;, T_OBJECT, offsetof(PyScannerObject, object_hook), READONLY, &quot;object_hook&quot;},</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineminus">-    {&quot;object_pairs_hook&quot;, T_OBJECT, offsetof(PyScannerObject, pairs_hook), READONLY, &quot;object_pairs_hook&quot;},</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-    {&quot;parse_float&quot;, T_OBJECT, offsetof(PyScannerObject, parse_float), READONLY, &quot;parse_float&quot;},</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-    {&quot;parse_int&quot;, T_OBJECT, offsetof(PyScannerObject, parse_int), READONLY, &quot;parse_int&quot;},</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-    {&quot;parse_constant&quot;, T_OBJECT, offsetof(PyScannerObject, parse_constant), READONLY, &quot;parse_constant&quot;},</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-    {NULL}</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-};</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineminus">-</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-typedef struct _PyEncoderObject {</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineminus">-    PyObject_HEAD</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineminus">-    PyObject *markers;</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-    PyObject *defaultfn;</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineminus">-    PyObject *encoder;</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">-    PyObject *indent;</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineminus">-    PyObject *key_separator;</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineminus">-    PyObject *item_separator;</span>
<a href="#l17.88"></a><span id="l17.88" class="difflineminus">-    PyObject *sort_keys;</span>
<a href="#l17.89"></a><span id="l17.89" class="difflineminus">-    PyObject *skipkeys;</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineminus">-    PyObject *key_memo;</span>
<a href="#l17.91"></a><span id="l17.91" class="difflineminus">-    int fast_encode;</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineminus">-    int allow_nan;</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineminus">-    int use_decimal;</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineminus">-} PyEncoderObject;</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineminus">-</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineminus">-static PyMemberDef encoder_members[] = {</span>
<a href="#l17.97"></a><span id="l17.97" class="difflineminus">-    {&quot;markers&quot;, T_OBJECT, offsetof(PyEncoderObject, markers), READONLY, &quot;markers&quot;},</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineminus">-    {&quot;default&quot;, T_OBJECT, offsetof(PyEncoderObject, defaultfn), READONLY, &quot;default&quot;},</span>
<a href="#l17.99"></a><span id="l17.99" class="difflineminus">-    {&quot;encoder&quot;, T_OBJECT, offsetof(PyEncoderObject, encoder), READONLY, &quot;encoder&quot;},</span>
<a href="#l17.100"></a><span id="l17.100" class="difflineminus">-    {&quot;indent&quot;, T_OBJECT, offsetof(PyEncoderObject, indent), READONLY, &quot;indent&quot;},</span>
<a href="#l17.101"></a><span id="l17.101" class="difflineminus">-    {&quot;key_separator&quot;, T_OBJECT, offsetof(PyEncoderObject, key_separator), READONLY, &quot;key_separator&quot;},</span>
<a href="#l17.102"></a><span id="l17.102" class="difflineminus">-    {&quot;item_separator&quot;, T_OBJECT, offsetof(PyEncoderObject, item_separator), READONLY, &quot;item_separator&quot;},</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineminus">-    {&quot;sort_keys&quot;, T_OBJECT, offsetof(PyEncoderObject, sort_keys), READONLY, &quot;sort_keys&quot;},</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-    {&quot;skipkeys&quot;, T_OBJECT, offsetof(PyEncoderObject, skipkeys), READONLY, &quot;skipkeys&quot;},</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineminus">-    {&quot;key_memo&quot;, T_OBJECT, offsetof(PyEncoderObject, key_memo), READONLY, &quot;key_memo&quot;},</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineminus">-    {NULL}</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">-};</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineminus">-</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineminus">-static Py_ssize_t</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineminus">-ascii_escape_char(Py_UNICODE c, char *output, Py_ssize_t chars);</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineminus">-static PyObject *</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineminus">-ascii_escape_unicode(PyObject *pystr);</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineminus">-static PyObject *</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineminus">-ascii_escape_str(PyObject *pystr);</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineminus">-static PyObject *</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineminus">-py_encode_basestring_ascii(PyObject* self UNUSED, PyObject *pystr);</span>
<a href="#l17.117"></a><span id="l17.117" class="difflineminus">-void init_speedups(void);</span>
<a href="#l17.118"></a><span id="l17.118" class="difflineminus">-static PyObject *</span>
<a href="#l17.119"></a><span id="l17.119" class="difflineminus">-scan_once_str(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr);</span>
<a href="#l17.120"></a><span id="l17.120" class="difflineminus">-static PyObject *</span>
<a href="#l17.121"></a><span id="l17.121" class="difflineminus">-scan_once_unicode(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr);</span>
<a href="#l17.122"></a><span id="l17.122" class="difflineminus">-static PyObject *</span>
<a href="#l17.123"></a><span id="l17.123" class="difflineminus">-_build_rval_index_tuple(PyObject *rval, Py_ssize_t idx);</span>
<a href="#l17.124"></a><span id="l17.124" class="difflineminus">-static PyObject *</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineminus">-scanner_new(PyTypeObject *type, PyObject *args, PyObject *kwds);</span>
<a href="#l17.126"></a><span id="l17.126" class="difflineminus">-static int</span>
<a href="#l17.127"></a><span id="l17.127" class="difflineminus">-scanner_init(PyObject *self, PyObject *args, PyObject *kwds);</span>
<a href="#l17.128"></a><span id="l17.128" class="difflineminus">-static void</span>
<a href="#l17.129"></a><span id="l17.129" class="difflineminus">-scanner_dealloc(PyObject *self);</span>
<a href="#l17.130"></a><span id="l17.130" class="difflineminus">-static int</span>
<a href="#l17.131"></a><span id="l17.131" class="difflineminus">-scanner_clear(PyObject *self);</span>
<a href="#l17.132"></a><span id="l17.132" class="difflineminus">-static PyObject *</span>
<a href="#l17.133"></a><span id="l17.133" class="difflineminus">-encoder_new(PyTypeObject *type, PyObject *args, PyObject *kwds);</span>
<a href="#l17.134"></a><span id="l17.134" class="difflineminus">-static int</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineminus">-encoder_init(PyObject *self, PyObject *args, PyObject *kwds);</span>
<a href="#l17.136"></a><span id="l17.136" class="difflineminus">-static void</span>
<a href="#l17.137"></a><span id="l17.137" class="difflineminus">-encoder_dealloc(PyObject *self);</span>
<a href="#l17.138"></a><span id="l17.138" class="difflineminus">-static int</span>
<a href="#l17.139"></a><span id="l17.139" class="difflineminus">-encoder_clear(PyObject *self);</span>
<a href="#l17.140"></a><span id="l17.140" class="difflineminus">-static int</span>
<a href="#l17.141"></a><span id="l17.141" class="difflineminus">-encoder_listencode_list(PyEncoderObject *s, PyObject *rval, PyObject *seq, Py_ssize_t indent_level);</span>
<a href="#l17.142"></a><span id="l17.142" class="difflineminus">-static int</span>
<a href="#l17.143"></a><span id="l17.143" class="difflineminus">-encoder_listencode_obj(PyEncoderObject *s, PyObject *rval, PyObject *obj, Py_ssize_t indent_level);</span>
<a href="#l17.144"></a><span id="l17.144" class="difflineminus">-static int</span>
<a href="#l17.145"></a><span id="l17.145" class="difflineminus">-encoder_listencode_dict(PyEncoderObject *s, PyObject *rval, PyObject *dct, Py_ssize_t indent_level);</span>
<a href="#l17.146"></a><span id="l17.146" class="difflineminus">-static PyObject *</span>
<a href="#l17.147"></a><span id="l17.147" class="difflineminus">-_encoded_const(PyObject *obj);</span>
<a href="#l17.148"></a><span id="l17.148" class="difflineminus">-static void</span>
<a href="#l17.149"></a><span id="l17.149" class="difflineminus">-raise_errmsg(char *msg, PyObject *s, Py_ssize_t end);</span>
<a href="#l17.150"></a><span id="l17.150" class="difflineminus">-static PyObject *</span>
<a href="#l17.151"></a><span id="l17.151" class="difflineminus">-encoder_encode_string(PyEncoderObject *s, PyObject *obj);</span>
<a href="#l17.152"></a><span id="l17.152" class="difflineminus">-static int</span>
<a href="#l17.153"></a><span id="l17.153" class="difflineminus">-_convertPyInt_AsSsize_t(PyObject *o, Py_ssize_t *size_ptr);</span>
<a href="#l17.154"></a><span id="l17.154" class="difflineminus">-static PyObject *</span>
<a href="#l17.155"></a><span id="l17.155" class="difflineminus">-_convertPyInt_FromSsize_t(Py_ssize_t *size_ptr);</span>
<a href="#l17.156"></a><span id="l17.156" class="difflineminus">-static PyObject *</span>
<a href="#l17.157"></a><span id="l17.157" class="difflineminus">-encoder_encode_float(PyEncoderObject *s, PyObject *obj);</span>
<a href="#l17.158"></a><span id="l17.158" class="difflineminus">-</span>
<a href="#l17.159"></a><span id="l17.159" class="difflineminus">-#define S_CHAR(c) (c &gt;= ' ' &amp;&amp; c &lt;= '~' &amp;&amp; c != '\\' &amp;&amp; c != '&quot;')</span>
<a href="#l17.160"></a><span id="l17.160" class="difflineminus">-#define IS_WHITESPACE(c) (((c) == ' ') || ((c) == '\t') || ((c) == '\n') || ((c) == '\r'))</span>
<a href="#l17.161"></a><span id="l17.161" class="difflineminus">-</span>
<a href="#l17.162"></a><span id="l17.162" class="difflineminus">-#define MIN_EXPANSION 6</span>
<a href="#l17.163"></a><span id="l17.163" class="difflineminus">-#ifdef Py_UNICODE_WIDE</span>
<a href="#l17.164"></a><span id="l17.164" class="difflineminus">-#define MAX_EXPANSION (2 * MIN_EXPANSION)</span>
<a href="#l17.165"></a><span id="l17.165" class="difflineminus">-#else</span>
<a href="#l17.166"></a><span id="l17.166" class="difflineminus">-#define MAX_EXPANSION MIN_EXPANSION</span>
<a href="#l17.167"></a><span id="l17.167" class="difflineminus">-#endif</span>
<a href="#l17.168"></a><span id="l17.168" class="difflineminus">-</span>
<a href="#l17.169"></a><span id="l17.169" class="difflineminus">-static int</span>
<a href="#l17.170"></a><span id="l17.170" class="difflineminus">-_convertPyInt_AsSsize_t(PyObject *o, Py_ssize_t *size_ptr)</span>
<a href="#l17.171"></a><span id="l17.171" class="difflineminus">-{</span>
<a href="#l17.172"></a><span id="l17.172" class="difflineminus">-    /* PyObject to Py_ssize_t converter */</span>
<a href="#l17.173"></a><span id="l17.173" class="difflineminus">-    *size_ptr = PyInt_AsSsize_t(o);</span>
<a href="#l17.174"></a><span id="l17.174" class="difflineminus">-    if (*size_ptr == -1 &amp;&amp; PyErr_Occurred())</span>
<a href="#l17.175"></a><span id="l17.175" class="difflineminus">-        return 0;</span>
<a href="#l17.176"></a><span id="l17.176" class="difflineminus">-    return 1;</span>
<a href="#l17.177"></a><span id="l17.177" class="difflineminus">-}</span>
<a href="#l17.178"></a><span id="l17.178" class="difflineminus">-</span>
<a href="#l17.179"></a><span id="l17.179" class="difflineminus">-static PyObject *</span>
<a href="#l17.180"></a><span id="l17.180" class="difflineminus">-_convertPyInt_FromSsize_t(Py_ssize_t *size_ptr)</span>
<a href="#l17.181"></a><span id="l17.181" class="difflineminus">-{</span>
<a href="#l17.182"></a><span id="l17.182" class="difflineminus">-    /* Py_ssize_t to PyObject converter */</span>
<a href="#l17.183"></a><span id="l17.183" class="difflineminus">-    return PyInt_FromSsize_t(*size_ptr);</span>
<a href="#l17.184"></a><span id="l17.184" class="difflineminus">-}</span>
<a href="#l17.185"></a><span id="l17.185" class="difflineminus">-</span>
<a href="#l17.186"></a><span id="l17.186" class="difflineminus">-static Py_ssize_t</span>
<a href="#l17.187"></a><span id="l17.187" class="difflineminus">-ascii_escape_char(Py_UNICODE c, char *output, Py_ssize_t chars)</span>
<a href="#l17.188"></a><span id="l17.188" class="difflineminus">-{</span>
<a href="#l17.189"></a><span id="l17.189" class="difflineminus">-    /* Escape unicode code point c to ASCII escape sequences</span>
<a href="#l17.190"></a><span id="l17.190" class="difflineminus">-    in char *output. output must have at least 12 bytes unused to</span>
<a href="#l17.191"></a><span id="l17.191" class="difflineminus">-    accommodate an escaped surrogate pair &quot;\uXXXX\uXXXX&quot; */</span>
<a href="#l17.192"></a><span id="l17.192" class="difflineminus">-    output[chars++] = '\\';</span>
<a href="#l17.193"></a><span id="l17.193" class="difflineminus">-    switch (c) {</span>
<a href="#l17.194"></a><span id="l17.194" class="difflineminus">-        case '\\': output[chars++] = (char)c; break;</span>
<a href="#l17.195"></a><span id="l17.195" class="difflineminus">-        case '&quot;': output[chars++] = (char)c; break;</span>
<a href="#l17.196"></a><span id="l17.196" class="difflineminus">-        case '\b': output[chars++] = 'b'; break;</span>
<a href="#l17.197"></a><span id="l17.197" class="difflineminus">-        case '\f': output[chars++] = 'f'; break;</span>
<a href="#l17.198"></a><span id="l17.198" class="difflineminus">-        case '\n': output[chars++] = 'n'; break;</span>
<a href="#l17.199"></a><span id="l17.199" class="difflineminus">-        case '\r': output[chars++] = 'r'; break;</span>
<a href="#l17.200"></a><span id="l17.200" class="difflineminus">-        case '\t': output[chars++] = 't'; break;</span>
<a href="#l17.201"></a><span id="l17.201" class="difflineminus">-        default:</span>
<a href="#l17.202"></a><span id="l17.202" class="difflineminus">-#ifdef Py_UNICODE_WIDE</span>
<a href="#l17.203"></a><span id="l17.203" class="difflineminus">-            if (c &gt;= 0x10000) {</span>
<a href="#l17.204"></a><span id="l17.204" class="difflineminus">-                /* UTF-16 surrogate pair */</span>
<a href="#l17.205"></a><span id="l17.205" class="difflineminus">-                Py_UNICODE v = c - 0x10000;</span>
<a href="#l17.206"></a><span id="l17.206" class="difflineminus">-                c = 0xd800 | ((v &gt;&gt; 10) &amp; 0x3ff);</span>
<a href="#l17.207"></a><span id="l17.207" class="difflineminus">-                output[chars++] = 'u';</span>
<a href="#l17.208"></a><span id="l17.208" class="difflineminus">-                output[chars++] = &quot;0123456789abcdef&quot;[(c &gt;&gt; 12) &amp; 0xf];</span>
<a href="#l17.209"></a><span id="l17.209" class="difflineminus">-                output[chars++] = &quot;0123456789abcdef&quot;[(c &gt;&gt;  8) &amp; 0xf];</span>
<a href="#l17.210"></a><span id="l17.210" class="difflineminus">-                output[chars++] = &quot;0123456789abcdef&quot;[(c &gt;&gt;  4) &amp; 0xf];</span>
<a href="#l17.211"></a><span id="l17.211" class="difflineminus">-                output[chars++] = &quot;0123456789abcdef&quot;[(c      ) &amp; 0xf];</span>
<a href="#l17.212"></a><span id="l17.212" class="difflineminus">-                c = 0xdc00 | (v &amp; 0x3ff);</span>
<a href="#l17.213"></a><span id="l17.213" class="difflineminus">-                output[chars++] = '\\';</span>
<a href="#l17.214"></a><span id="l17.214" class="difflineminus">-            }</span>
<a href="#l17.215"></a><span id="l17.215" class="difflineminus">-#endif</span>
<a href="#l17.216"></a><span id="l17.216" class="difflineminus">-            output[chars++] = 'u';</span>
<a href="#l17.217"></a><span id="l17.217" class="difflineminus">-            output[chars++] = &quot;0123456789abcdef&quot;[(c &gt;&gt; 12) &amp; 0xf];</span>
<a href="#l17.218"></a><span id="l17.218" class="difflineminus">-            output[chars++] = &quot;0123456789abcdef&quot;[(c &gt;&gt;  8) &amp; 0xf];</span>
<a href="#l17.219"></a><span id="l17.219" class="difflineminus">-            output[chars++] = &quot;0123456789abcdef&quot;[(c &gt;&gt;  4) &amp; 0xf];</span>
<a href="#l17.220"></a><span id="l17.220" class="difflineminus">-            output[chars++] = &quot;0123456789abcdef&quot;[(c      ) &amp; 0xf];</span>
<a href="#l17.221"></a><span id="l17.221" class="difflineminus">-    }</span>
<a href="#l17.222"></a><span id="l17.222" class="difflineminus">-    return chars;</span>
<a href="#l17.223"></a><span id="l17.223" class="difflineminus">-}</span>
<a href="#l17.224"></a><span id="l17.224" class="difflineminus">-</span>
<a href="#l17.225"></a><span id="l17.225" class="difflineminus">-static PyObject *</span>
<a href="#l17.226"></a><span id="l17.226" class="difflineminus">-ascii_escape_unicode(PyObject *pystr)</span>
<a href="#l17.227"></a><span id="l17.227" class="difflineminus">-{</span>
<a href="#l17.228"></a><span id="l17.228" class="difflineminus">-    /* Take a PyUnicode pystr and return a new ASCII-only escaped PyString */</span>
<a href="#l17.229"></a><span id="l17.229" class="difflineminus">-    Py_ssize_t i;</span>
<a href="#l17.230"></a><span id="l17.230" class="difflineminus">-    Py_ssize_t input_chars;</span>
<a href="#l17.231"></a><span id="l17.231" class="difflineminus">-    Py_ssize_t output_size;</span>
<a href="#l17.232"></a><span id="l17.232" class="difflineminus">-    Py_ssize_t max_output_size;</span>
<a href="#l17.233"></a><span id="l17.233" class="difflineminus">-    Py_ssize_t chars;</span>
<a href="#l17.234"></a><span id="l17.234" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.235"></a><span id="l17.235" class="difflineminus">-    char *output;</span>
<a href="#l17.236"></a><span id="l17.236" class="difflineminus">-    Py_UNICODE *input_unicode;</span>
<a href="#l17.237"></a><span id="l17.237" class="difflineminus">-</span>
<a href="#l17.238"></a><span id="l17.238" class="difflineminus">-    input_chars = PyUnicode_GET_SIZE(pystr);</span>
<a href="#l17.239"></a><span id="l17.239" class="difflineminus">-    input_unicode = PyUnicode_AS_UNICODE(pystr);</span>
<a href="#l17.240"></a><span id="l17.240" class="difflineminus">-</span>
<a href="#l17.241"></a><span id="l17.241" class="difflineminus">-    /* One char input can be up to 6 chars output, estimate 4 of these */</span>
<a href="#l17.242"></a><span id="l17.242" class="difflineminus">-    output_size = 2 + (MIN_EXPANSION * 4) + input_chars;</span>
<a href="#l17.243"></a><span id="l17.243" class="difflineminus">-    max_output_size = 2 + (input_chars * MAX_EXPANSION);</span>
<a href="#l17.244"></a><span id="l17.244" class="difflineminus">-    rval = PyString_FromStringAndSize(NULL, output_size);</span>
<a href="#l17.245"></a><span id="l17.245" class="difflineminus">-    if (rval == NULL) {</span>
<a href="#l17.246"></a><span id="l17.246" class="difflineminus">-        return NULL;</span>
<a href="#l17.247"></a><span id="l17.247" class="difflineminus">-    }</span>
<a href="#l17.248"></a><span id="l17.248" class="difflineminus">-    output = PyString_AS_STRING(rval);</span>
<a href="#l17.249"></a><span id="l17.249" class="difflineminus">-    chars = 0;</span>
<a href="#l17.250"></a><span id="l17.250" class="difflineminus">-    output[chars++] = '&quot;';</span>
<a href="#l17.251"></a><span id="l17.251" class="difflineminus">-    for (i = 0; i &lt; input_chars; i++) {</span>
<a href="#l17.252"></a><span id="l17.252" class="difflineminus">-        Py_UNICODE c = input_unicode[i];</span>
<a href="#l17.253"></a><span id="l17.253" class="difflineminus">-        if (S_CHAR(c)) {</span>
<a href="#l17.254"></a><span id="l17.254" class="difflineminus">-            output[chars++] = (char)c;</span>
<a href="#l17.255"></a><span id="l17.255" class="difflineminus">-        }</span>
<a href="#l17.256"></a><span id="l17.256" class="difflineminus">-        else {</span>
<a href="#l17.257"></a><span id="l17.257" class="difflineminus">-            chars = ascii_escape_char(c, output, chars);</span>
<a href="#l17.258"></a><span id="l17.258" class="difflineminus">-        }</span>
<a href="#l17.259"></a><span id="l17.259" class="difflineminus">-        if (output_size - chars &lt; (1 + MAX_EXPANSION)) {</span>
<a href="#l17.260"></a><span id="l17.260" class="difflineminus">-            /* There's more than four, so let's resize by a lot */</span>
<a href="#l17.261"></a><span id="l17.261" class="difflineminus">-            Py_ssize_t new_output_size = output_size * 2;</span>
<a href="#l17.262"></a><span id="l17.262" class="difflineminus">-            /* This is an upper bound */</span>
<a href="#l17.263"></a><span id="l17.263" class="difflineminus">-            if (new_output_size &gt; max_output_size) {</span>
<a href="#l17.264"></a><span id="l17.264" class="difflineminus">-                new_output_size = max_output_size;</span>
<a href="#l17.265"></a><span id="l17.265" class="difflineminus">-            }</span>
<a href="#l17.266"></a><span id="l17.266" class="difflineminus">-            /* Make sure that the output size changed before resizing */</span>
<a href="#l17.267"></a><span id="l17.267" class="difflineminus">-            if (new_output_size != output_size) {</span>
<a href="#l17.268"></a><span id="l17.268" class="difflineminus">-                output_size = new_output_size;</span>
<a href="#l17.269"></a><span id="l17.269" class="difflineminus">-                if (_PyString_Resize(&amp;rval, output_size) == -1) {</span>
<a href="#l17.270"></a><span id="l17.270" class="difflineminus">-                    return NULL;</span>
<a href="#l17.271"></a><span id="l17.271" class="difflineminus">-                }</span>
<a href="#l17.272"></a><span id="l17.272" class="difflineminus">-                output = PyString_AS_STRING(rval);</span>
<a href="#l17.273"></a><span id="l17.273" class="difflineminus">-            }</span>
<a href="#l17.274"></a><span id="l17.274" class="difflineminus">-        }</span>
<a href="#l17.275"></a><span id="l17.275" class="difflineminus">-    }</span>
<a href="#l17.276"></a><span id="l17.276" class="difflineminus">-    output[chars++] = '&quot;';</span>
<a href="#l17.277"></a><span id="l17.277" class="difflineminus">-    if (_PyString_Resize(&amp;rval, chars) == -1) {</span>
<a href="#l17.278"></a><span id="l17.278" class="difflineminus">-        return NULL;</span>
<a href="#l17.279"></a><span id="l17.279" class="difflineminus">-    }</span>
<a href="#l17.280"></a><span id="l17.280" class="difflineminus">-    return rval;</span>
<a href="#l17.281"></a><span id="l17.281" class="difflineminus">-}</span>
<a href="#l17.282"></a><span id="l17.282" class="difflineminus">-</span>
<a href="#l17.283"></a><span id="l17.283" class="difflineminus">-static PyObject *</span>
<a href="#l17.284"></a><span id="l17.284" class="difflineminus">-ascii_escape_str(PyObject *pystr)</span>
<a href="#l17.285"></a><span id="l17.285" class="difflineminus">-{</span>
<a href="#l17.286"></a><span id="l17.286" class="difflineminus">-    /* Take a PyString pystr and return a new ASCII-only escaped PyString */</span>
<a href="#l17.287"></a><span id="l17.287" class="difflineminus">-    Py_ssize_t i;</span>
<a href="#l17.288"></a><span id="l17.288" class="difflineminus">-    Py_ssize_t input_chars;</span>
<a href="#l17.289"></a><span id="l17.289" class="difflineminus">-    Py_ssize_t output_size;</span>
<a href="#l17.290"></a><span id="l17.290" class="difflineminus">-    Py_ssize_t chars;</span>
<a href="#l17.291"></a><span id="l17.291" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.292"></a><span id="l17.292" class="difflineminus">-    char *output;</span>
<a href="#l17.293"></a><span id="l17.293" class="difflineminus">-    char *input_str;</span>
<a href="#l17.294"></a><span id="l17.294" class="difflineminus">-</span>
<a href="#l17.295"></a><span id="l17.295" class="difflineminus">-    input_chars = PyString_GET_SIZE(pystr);</span>
<a href="#l17.296"></a><span id="l17.296" class="difflineminus">-    input_str = PyString_AS_STRING(pystr);</span>
<a href="#l17.297"></a><span id="l17.297" class="difflineminus">-</span>
<a href="#l17.298"></a><span id="l17.298" class="difflineminus">-    /* Fast path for a string that's already ASCII */</span>
<a href="#l17.299"></a><span id="l17.299" class="difflineminus">-    for (i = 0; i &lt; input_chars; i++) {</span>
<a href="#l17.300"></a><span id="l17.300" class="difflineminus">-        Py_UNICODE c = (Py_UNICODE)(unsigned char)input_str[i];</span>
<a href="#l17.301"></a><span id="l17.301" class="difflineminus">-        if (!S_CHAR(c)) {</span>
<a href="#l17.302"></a><span id="l17.302" class="difflineminus">-            /* If we have to escape something, scan the string for unicode */</span>
<a href="#l17.303"></a><span id="l17.303" class="difflineminus">-            Py_ssize_t j;</span>
<a href="#l17.304"></a><span id="l17.304" class="difflineminus">-            for (j = i; j &lt; input_chars; j++) {</span>
<a href="#l17.305"></a><span id="l17.305" class="difflineminus">-                c = (Py_UNICODE)(unsigned char)input_str[j];</span>
<a href="#l17.306"></a><span id="l17.306" class="difflineminus">-                if (c &gt; 0x7f) {</span>
<a href="#l17.307"></a><span id="l17.307" class="difflineminus">-                    /* We hit a non-ASCII character, bail to unicode mode */</span>
<a href="#l17.308"></a><span id="l17.308" class="difflineminus">-                    PyObject *uni;</span>
<a href="#l17.309"></a><span id="l17.309" class="difflineminus">-                    uni = PyUnicode_DecodeUTF8(input_str, input_chars, &quot;strict&quot;);</span>
<a href="#l17.310"></a><span id="l17.310" class="difflineminus">-                    if (uni == NULL) {</span>
<a href="#l17.311"></a><span id="l17.311" class="difflineminus">-                        return NULL;</span>
<a href="#l17.312"></a><span id="l17.312" class="difflineminus">-                    }</span>
<a href="#l17.313"></a><span id="l17.313" class="difflineminus">-                    rval = ascii_escape_unicode(uni);</span>
<a href="#l17.314"></a><span id="l17.314" class="difflineminus">-                    Py_DECREF(uni);</span>
<a href="#l17.315"></a><span id="l17.315" class="difflineminus">-                    return rval;</span>
<a href="#l17.316"></a><span id="l17.316" class="difflineminus">-                }</span>
<a href="#l17.317"></a><span id="l17.317" class="difflineminus">-            }</span>
<a href="#l17.318"></a><span id="l17.318" class="difflineminus">-            break;</span>
<a href="#l17.319"></a><span id="l17.319" class="difflineminus">-        }</span>
<a href="#l17.320"></a><span id="l17.320" class="difflineminus">-    }</span>
<a href="#l17.321"></a><span id="l17.321" class="difflineminus">-</span>
<a href="#l17.322"></a><span id="l17.322" class="difflineminus">-    if (i == input_chars) {</span>
<a href="#l17.323"></a><span id="l17.323" class="difflineminus">-        /* Input is already ASCII */</span>
<a href="#l17.324"></a><span id="l17.324" class="difflineminus">-        output_size = 2 + input_chars;</span>
<a href="#l17.325"></a><span id="l17.325" class="difflineminus">-    }</span>
<a href="#l17.326"></a><span id="l17.326" class="difflineminus">-    else {</span>
<a href="#l17.327"></a><span id="l17.327" class="difflineminus">-        /* One char input can be up to 6 chars output, estimate 4 of these */</span>
<a href="#l17.328"></a><span id="l17.328" class="difflineminus">-        output_size = 2 + (MIN_EXPANSION * 4) + input_chars;</span>
<a href="#l17.329"></a><span id="l17.329" class="difflineminus">-    }</span>
<a href="#l17.330"></a><span id="l17.330" class="difflineminus">-    rval = PyString_FromStringAndSize(NULL, output_size);</span>
<a href="#l17.331"></a><span id="l17.331" class="difflineminus">-    if (rval == NULL) {</span>
<a href="#l17.332"></a><span id="l17.332" class="difflineminus">-        return NULL;</span>
<a href="#l17.333"></a><span id="l17.333" class="difflineminus">-    }</span>
<a href="#l17.334"></a><span id="l17.334" class="difflineminus">-    output = PyString_AS_STRING(rval);</span>
<a href="#l17.335"></a><span id="l17.335" class="difflineminus">-    output[0] = '&quot;';</span>
<a href="#l17.336"></a><span id="l17.336" class="difflineminus">-</span>
<a href="#l17.337"></a><span id="l17.337" class="difflineminus">-    /* We know that everything up to i is ASCII already */</span>
<a href="#l17.338"></a><span id="l17.338" class="difflineminus">-    chars = i + 1;</span>
<a href="#l17.339"></a><span id="l17.339" class="difflineminus">-    memcpy(&amp;output[1], input_str, i);</span>
<a href="#l17.340"></a><span id="l17.340" class="difflineminus">-</span>
<a href="#l17.341"></a><span id="l17.341" class="difflineminus">-    for (; i &lt; input_chars; i++) {</span>
<a href="#l17.342"></a><span id="l17.342" class="difflineminus">-        Py_UNICODE c = (Py_UNICODE)(unsigned char)input_str[i];</span>
<a href="#l17.343"></a><span id="l17.343" class="difflineminus">-        if (S_CHAR(c)) {</span>
<a href="#l17.344"></a><span id="l17.344" class="difflineminus">-            output[chars++] = (char)c;</span>
<a href="#l17.345"></a><span id="l17.345" class="difflineminus">-        }</span>
<a href="#l17.346"></a><span id="l17.346" class="difflineminus">-        else {</span>
<a href="#l17.347"></a><span id="l17.347" class="difflineminus">-            chars = ascii_escape_char(c, output, chars);</span>
<a href="#l17.348"></a><span id="l17.348" class="difflineminus">-        }</span>
<a href="#l17.349"></a><span id="l17.349" class="difflineminus">-        /* An ASCII char can't possibly expand to a surrogate! */</span>
<a href="#l17.350"></a><span id="l17.350" class="difflineminus">-        if (output_size - chars &lt; (1 + MIN_EXPANSION)) {</span>
<a href="#l17.351"></a><span id="l17.351" class="difflineminus">-            /* There's more than four, so let's resize by a lot */</span>
<a href="#l17.352"></a><span id="l17.352" class="difflineminus">-            output_size *= 2;</span>
<a href="#l17.353"></a><span id="l17.353" class="difflineminus">-            if (output_size &gt; 2 + (input_chars * MIN_EXPANSION)) {</span>
<a href="#l17.354"></a><span id="l17.354" class="difflineminus">-                output_size = 2 + (input_chars * MIN_EXPANSION);</span>
<a href="#l17.355"></a><span id="l17.355" class="difflineminus">-            }</span>
<a href="#l17.356"></a><span id="l17.356" class="difflineminus">-            if (_PyString_Resize(&amp;rval, output_size) == -1) {</span>
<a href="#l17.357"></a><span id="l17.357" class="difflineminus">-                return NULL;</span>
<a href="#l17.358"></a><span id="l17.358" class="difflineminus">-            }</span>
<a href="#l17.359"></a><span id="l17.359" class="difflineminus">-            output = PyString_AS_STRING(rval);</span>
<a href="#l17.360"></a><span id="l17.360" class="difflineminus">-        }</span>
<a href="#l17.361"></a><span id="l17.361" class="difflineminus">-    }</span>
<a href="#l17.362"></a><span id="l17.362" class="difflineminus">-    output[chars++] = '&quot;';</span>
<a href="#l17.363"></a><span id="l17.363" class="difflineminus">-    if (_PyString_Resize(&amp;rval, chars) == -1) {</span>
<a href="#l17.364"></a><span id="l17.364" class="difflineminus">-        return NULL;</span>
<a href="#l17.365"></a><span id="l17.365" class="difflineminus">-    }</span>
<a href="#l17.366"></a><span id="l17.366" class="difflineminus">-    return rval;</span>
<a href="#l17.367"></a><span id="l17.367" class="difflineminus">-}</span>
<a href="#l17.368"></a><span id="l17.368" class="difflineminus">-</span>
<a href="#l17.369"></a><span id="l17.369" class="difflineminus">-static void</span>
<a href="#l17.370"></a><span id="l17.370" class="difflineminus">-raise_errmsg(char *msg, PyObject *s, Py_ssize_t end)</span>
<a href="#l17.371"></a><span id="l17.371" class="difflineminus">-{</span>
<a href="#l17.372"></a><span id="l17.372" class="difflineminus">-    /* Use the Python function simplejson.decoder.errmsg to raise a nice</span>
<a href="#l17.373"></a><span id="l17.373" class="difflineminus">-    looking ValueError exception */</span>
<a href="#l17.374"></a><span id="l17.374" class="difflineminus">-    static PyObject *JSONDecodeError = NULL;</span>
<a href="#l17.375"></a><span id="l17.375" class="difflineminus">-    PyObject *exc;</span>
<a href="#l17.376"></a><span id="l17.376" class="difflineminus">-    if (JSONDecodeError == NULL) {</span>
<a href="#l17.377"></a><span id="l17.377" class="difflineminus">-        PyObject *decoder = PyImport_ImportModule(&quot;simplejson.decoder&quot;);</span>
<a href="#l17.378"></a><span id="l17.378" class="difflineminus">-        if (decoder == NULL)</span>
<a href="#l17.379"></a><span id="l17.379" class="difflineminus">-            return;</span>
<a href="#l17.380"></a><span id="l17.380" class="difflineminus">-        JSONDecodeError = PyObject_GetAttrString(decoder, &quot;JSONDecodeError&quot;);</span>
<a href="#l17.381"></a><span id="l17.381" class="difflineminus">-        Py_DECREF(decoder);</span>
<a href="#l17.382"></a><span id="l17.382" class="difflineminus">-        if (JSONDecodeError == NULL)</span>
<a href="#l17.383"></a><span id="l17.383" class="difflineminus">-            return;</span>
<a href="#l17.384"></a><span id="l17.384" class="difflineminus">-    }</span>
<a href="#l17.385"></a><span id="l17.385" class="difflineminus">-    exc = PyObject_CallFunction(JSONDecodeError, &quot;(zOO&amp;)&quot;, msg, s, _convertPyInt_FromSsize_t, &amp;end);</span>
<a href="#l17.386"></a><span id="l17.386" class="difflineminus">-    if (exc) {</span>
<a href="#l17.387"></a><span id="l17.387" class="difflineminus">-        PyErr_SetObject(JSONDecodeError, exc);</span>
<a href="#l17.388"></a><span id="l17.388" class="difflineminus">-        Py_DECREF(exc);</span>
<a href="#l17.389"></a><span id="l17.389" class="difflineminus">-    }</span>
<a href="#l17.390"></a><span id="l17.390" class="difflineminus">-}</span>
<a href="#l17.391"></a><span id="l17.391" class="difflineminus">-</span>
<a href="#l17.392"></a><span id="l17.392" class="difflineminus">-static PyObject *</span>
<a href="#l17.393"></a><span id="l17.393" class="difflineminus">-join_list_unicode(PyObject *lst)</span>
<a href="#l17.394"></a><span id="l17.394" class="difflineminus">-{</span>
<a href="#l17.395"></a><span id="l17.395" class="difflineminus">-    /* return u''.join(lst) */</span>
<a href="#l17.396"></a><span id="l17.396" class="difflineminus">-    static PyObject *joinfn = NULL;</span>
<a href="#l17.397"></a><span id="l17.397" class="difflineminus">-    if (joinfn == NULL) {</span>
<a href="#l17.398"></a><span id="l17.398" class="difflineminus">-        PyObject *ustr = PyUnicode_FromUnicode(NULL, 0);</span>
<a href="#l17.399"></a><span id="l17.399" class="difflineminus">-        if (ustr == NULL)</span>
<a href="#l17.400"></a><span id="l17.400" class="difflineminus">-            return NULL;</span>
<a href="#l17.401"></a><span id="l17.401" class="difflineminus">-</span>
<a href="#l17.402"></a><span id="l17.402" class="difflineminus">-        joinfn = PyObject_GetAttrString(ustr, &quot;join&quot;);</span>
<a href="#l17.403"></a><span id="l17.403" class="difflineminus">-        Py_DECREF(ustr);</span>
<a href="#l17.404"></a><span id="l17.404" class="difflineminus">-        if (joinfn == NULL)</span>
<a href="#l17.405"></a><span id="l17.405" class="difflineminus">-            return NULL;</span>
<a href="#l17.406"></a><span id="l17.406" class="difflineminus">-    }</span>
<a href="#l17.407"></a><span id="l17.407" class="difflineminus">-    return PyObject_CallFunctionObjArgs(joinfn, lst, NULL);</span>
<a href="#l17.408"></a><span id="l17.408" class="difflineminus">-}</span>
<a href="#l17.409"></a><span id="l17.409" class="difflineminus">-</span>
<a href="#l17.410"></a><span id="l17.410" class="difflineminus">-static PyObject *</span>
<a href="#l17.411"></a><span id="l17.411" class="difflineminus">-join_list_string(PyObject *lst)</span>
<a href="#l17.412"></a><span id="l17.412" class="difflineminus">-{</span>
<a href="#l17.413"></a><span id="l17.413" class="difflineminus">-    /* return ''.join(lst) */</span>
<a href="#l17.414"></a><span id="l17.414" class="difflineminus">-    static PyObject *joinfn = NULL;</span>
<a href="#l17.415"></a><span id="l17.415" class="difflineminus">-    if (joinfn == NULL) {</span>
<a href="#l17.416"></a><span id="l17.416" class="difflineminus">-        PyObject *ustr = PyString_FromStringAndSize(NULL, 0);</span>
<a href="#l17.417"></a><span id="l17.417" class="difflineminus">-        if (ustr == NULL)</span>
<a href="#l17.418"></a><span id="l17.418" class="difflineminus">-            return NULL;</span>
<a href="#l17.419"></a><span id="l17.419" class="difflineminus">-</span>
<a href="#l17.420"></a><span id="l17.420" class="difflineminus">-        joinfn = PyObject_GetAttrString(ustr, &quot;join&quot;);</span>
<a href="#l17.421"></a><span id="l17.421" class="difflineminus">-        Py_DECREF(ustr);</span>
<a href="#l17.422"></a><span id="l17.422" class="difflineminus">-        if (joinfn == NULL)</span>
<a href="#l17.423"></a><span id="l17.423" class="difflineminus">-            return NULL;</span>
<a href="#l17.424"></a><span id="l17.424" class="difflineminus">-    }</span>
<a href="#l17.425"></a><span id="l17.425" class="difflineminus">-    return PyObject_CallFunctionObjArgs(joinfn, lst, NULL);</span>
<a href="#l17.426"></a><span id="l17.426" class="difflineminus">-}</span>
<a href="#l17.427"></a><span id="l17.427" class="difflineminus">-</span>
<a href="#l17.428"></a><span id="l17.428" class="difflineminus">-static PyObject *</span>
<a href="#l17.429"></a><span id="l17.429" class="difflineminus">-_build_rval_index_tuple(PyObject *rval, Py_ssize_t idx) {</span>
<a href="#l17.430"></a><span id="l17.430" class="difflineminus">-    /* return (rval, idx) tuple, stealing reference to rval */</span>
<a href="#l17.431"></a><span id="l17.431" class="difflineminus">-    PyObject *tpl;</span>
<a href="#l17.432"></a><span id="l17.432" class="difflineminus">-    PyObject *pyidx;</span>
<a href="#l17.433"></a><span id="l17.433" class="difflineminus">-    /*</span>
<a href="#l17.434"></a><span id="l17.434" class="difflineminus">-    steal a reference to rval, returns (rval, idx)</span>
<a href="#l17.435"></a><span id="l17.435" class="difflineminus">-    */</span>
<a href="#l17.436"></a><span id="l17.436" class="difflineminus">-    if (rval == NULL) {</span>
<a href="#l17.437"></a><span id="l17.437" class="difflineminus">-        return NULL;</span>
<a href="#l17.438"></a><span id="l17.438" class="difflineminus">-    }</span>
<a href="#l17.439"></a><span id="l17.439" class="difflineminus">-    pyidx = PyInt_FromSsize_t(idx);</span>
<a href="#l17.440"></a><span id="l17.440" class="difflineminus">-    if (pyidx == NULL) {</span>
<a href="#l17.441"></a><span id="l17.441" class="difflineminus">-        Py_DECREF(rval);</span>
<a href="#l17.442"></a><span id="l17.442" class="difflineminus">-        return NULL;</span>
<a href="#l17.443"></a><span id="l17.443" class="difflineminus">-    }</span>
<a href="#l17.444"></a><span id="l17.444" class="difflineminus">-    tpl = PyTuple_New(2);</span>
<a href="#l17.445"></a><span id="l17.445" class="difflineminus">-    if (tpl == NULL) {</span>
<a href="#l17.446"></a><span id="l17.446" class="difflineminus">-        Py_DECREF(pyidx);</span>
<a href="#l17.447"></a><span id="l17.447" class="difflineminus">-        Py_DECREF(rval);</span>
<a href="#l17.448"></a><span id="l17.448" class="difflineminus">-        return NULL;</span>
<a href="#l17.449"></a><span id="l17.449" class="difflineminus">-    }</span>
<a href="#l17.450"></a><span id="l17.450" class="difflineminus">-    PyTuple_SET_ITEM(tpl, 0, rval);</span>
<a href="#l17.451"></a><span id="l17.451" class="difflineminus">-    PyTuple_SET_ITEM(tpl, 1, pyidx);</span>
<a href="#l17.452"></a><span id="l17.452" class="difflineminus">-    return tpl;</span>
<a href="#l17.453"></a><span id="l17.453" class="difflineminus">-}</span>
<a href="#l17.454"></a><span id="l17.454" class="difflineminus">-</span>
<a href="#l17.455"></a><span id="l17.455" class="difflineminus">-#define APPEND_OLD_CHUNK \</span>
<a href="#l17.456"></a><span id="l17.456" class="difflineminus">-    if (chunk != NULL) { \</span>
<a href="#l17.457"></a><span id="l17.457" class="difflineminus">-        if (chunks == NULL) { \</span>
<a href="#l17.458"></a><span id="l17.458" class="difflineminus">-            chunks = PyList_New(0); \</span>
<a href="#l17.459"></a><span id="l17.459" class="difflineminus">-            if (chunks == NULL) { \</span>
<a href="#l17.460"></a><span id="l17.460" class="difflineminus">-                goto bail; \</span>
<a href="#l17.461"></a><span id="l17.461" class="difflineminus">-            } \</span>
<a href="#l17.462"></a><span id="l17.462" class="difflineminus">-        } \</span>
<a href="#l17.463"></a><span id="l17.463" class="difflineminus">-        if (PyList_Append(chunks, chunk)) { \</span>
<a href="#l17.464"></a><span id="l17.464" class="difflineminus">-            goto bail; \</span>
<a href="#l17.465"></a><span id="l17.465" class="difflineminus">-        } \</span>
<a href="#l17.466"></a><span id="l17.466" class="difflineminus">-        Py_CLEAR(chunk); \</span>
<a href="#l17.467"></a><span id="l17.467" class="difflineminus">-    }</span>
<a href="#l17.468"></a><span id="l17.468" class="difflineminus">-</span>
<a href="#l17.469"></a><span id="l17.469" class="difflineminus">-static PyObject *</span>
<a href="#l17.470"></a><span id="l17.470" class="difflineminus">-scanstring_str(PyObject *pystr, Py_ssize_t end, char *encoding, int strict, Py_ssize_t *next_end_ptr)</span>
<a href="#l17.471"></a><span id="l17.471" class="difflineminus">-{</span>
<a href="#l17.472"></a><span id="l17.472" class="difflineminus">-    /* Read the JSON string from PyString pystr.</span>
<a href="#l17.473"></a><span id="l17.473" class="difflineminus">-    end is the index of the first character after the quote.</span>
<a href="#l17.474"></a><span id="l17.474" class="difflineminus">-    encoding is the encoding of pystr (must be an ASCII superset)</span>
<a href="#l17.475"></a><span id="l17.475" class="difflineminus">-    if strict is zero then literal control characters are allowed</span>
<a href="#l17.476"></a><span id="l17.476" class="difflineminus">-    *next_end_ptr is a return-by-reference index of the character</span>
<a href="#l17.477"></a><span id="l17.477" class="difflineminus">-        after the end quote</span>
<a href="#l17.478"></a><span id="l17.478" class="difflineminus">-</span>
<a href="#l17.479"></a><span id="l17.479" class="difflineminus">-    Return value is a new PyString (if ASCII-only) or PyUnicode</span>
<a href="#l17.480"></a><span id="l17.480" class="difflineminus">-    */</span>
<a href="#l17.481"></a><span id="l17.481" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.482"></a><span id="l17.482" class="difflineminus">-    Py_ssize_t len = PyString_GET_SIZE(pystr);</span>
<a href="#l17.483"></a><span id="l17.483" class="difflineminus">-    Py_ssize_t begin = end - 1;</span>
<a href="#l17.484"></a><span id="l17.484" class="difflineminus">-    Py_ssize_t next = begin;</span>
<a href="#l17.485"></a><span id="l17.485" class="difflineminus">-    int has_unicode = 0;</span>
<a href="#l17.486"></a><span id="l17.486" class="difflineminus">-    char *buf = PyString_AS_STRING(pystr);</span>
<a href="#l17.487"></a><span id="l17.487" class="difflineminus">-    PyObject *chunks = NULL;</span>
<a href="#l17.488"></a><span id="l17.488" class="difflineminus">-    PyObject *chunk = NULL;</span>
<a href="#l17.489"></a><span id="l17.489" class="difflineminus">-</span>
<a href="#l17.490"></a><span id="l17.490" class="difflineminus">-    if (end &lt; 0 || len &lt;= end) {</span>
<a href="#l17.491"></a><span id="l17.491" class="difflineminus">-        PyErr_SetString(PyExc_ValueError, &quot;end is out of bounds&quot;);</span>
<a href="#l17.492"></a><span id="l17.492" class="difflineminus">-        goto bail;</span>
<a href="#l17.493"></a><span id="l17.493" class="difflineminus">-    }</span>
<a href="#l17.494"></a><span id="l17.494" class="difflineminus">-    while (1) {</span>
<a href="#l17.495"></a><span id="l17.495" class="difflineminus">-        /* Find the end of the string or the next escape */</span>
<a href="#l17.496"></a><span id="l17.496" class="difflineminus">-        Py_UNICODE c = 0;</span>
<a href="#l17.497"></a><span id="l17.497" class="difflineminus">-        for (next = end; next &lt; len; next++) {</span>
<a href="#l17.498"></a><span id="l17.498" class="difflineminus">-            c = (unsigned char)buf[next];</span>
<a href="#l17.499"></a><span id="l17.499" class="difflineminus">-            if (c == '&quot;' || c == '\\') {</span>
<a href="#l17.500"></a><span id="l17.500" class="difflineminus">-                break;</span>
<a href="#l17.501"></a><span id="l17.501" class="difflineminus">-            }</span>
<a href="#l17.502"></a><span id="l17.502" class="difflineminus">-            else if (strict &amp;&amp; c &lt;= 0x1f) {</span>
<a href="#l17.503"></a><span id="l17.503" class="difflineminus">-                raise_errmsg(&quot;Invalid control character at&quot;, pystr, next);</span>
<a href="#l17.504"></a><span id="l17.504" class="difflineminus">-                goto bail;</span>
<a href="#l17.505"></a><span id="l17.505" class="difflineminus">-            }</span>
<a href="#l17.506"></a><span id="l17.506" class="difflineminus">-            else if (c &gt; 0x7f) {</span>
<a href="#l17.507"></a><span id="l17.507" class="difflineminus">-                has_unicode = 1;</span>
<a href="#l17.508"></a><span id="l17.508" class="difflineminus">-            }</span>
<a href="#l17.509"></a><span id="l17.509" class="difflineminus">-        }</span>
<a href="#l17.510"></a><span id="l17.510" class="difflineminus">-        if (!(c == '&quot;' || c == '\\')) {</span>
<a href="#l17.511"></a><span id="l17.511" class="difflineminus">-            raise_errmsg(&quot;Unterminated string starting at&quot;, pystr, begin);</span>
<a href="#l17.512"></a><span id="l17.512" class="difflineminus">-            goto bail;</span>
<a href="#l17.513"></a><span id="l17.513" class="difflineminus">-        }</span>
<a href="#l17.514"></a><span id="l17.514" class="difflineminus">-        /* Pick up this chunk if it's not zero length */</span>
<a href="#l17.515"></a><span id="l17.515" class="difflineminus">-        if (next != end) {</span>
<a href="#l17.516"></a><span id="l17.516" class="difflineminus">-            PyObject *strchunk;</span>
<a href="#l17.517"></a><span id="l17.517" class="difflineminus">-            APPEND_OLD_CHUNK</span>
<a href="#l17.518"></a><span id="l17.518" class="difflineminus">-            strchunk = PyString_FromStringAndSize(&amp;buf[end], next - end);</span>
<a href="#l17.519"></a><span id="l17.519" class="difflineminus">-            if (strchunk == NULL) {</span>
<a href="#l17.520"></a><span id="l17.520" class="difflineminus">-                goto bail;</span>
<a href="#l17.521"></a><span id="l17.521" class="difflineminus">-            }</span>
<a href="#l17.522"></a><span id="l17.522" class="difflineminus">-            if (has_unicode) {</span>
<a href="#l17.523"></a><span id="l17.523" class="difflineminus">-                chunk = PyUnicode_FromEncodedObject(strchunk, encoding, NULL);</span>
<a href="#l17.524"></a><span id="l17.524" class="difflineminus">-                Py_DECREF(strchunk);</span>
<a href="#l17.525"></a><span id="l17.525" class="difflineminus">-                if (chunk == NULL) {</span>
<a href="#l17.526"></a><span id="l17.526" class="difflineminus">-                    goto bail;</span>
<a href="#l17.527"></a><span id="l17.527" class="difflineminus">-                }</span>
<a href="#l17.528"></a><span id="l17.528" class="difflineminus">-            }</span>
<a href="#l17.529"></a><span id="l17.529" class="difflineminus">-            else {</span>
<a href="#l17.530"></a><span id="l17.530" class="difflineminus">-                chunk = strchunk;</span>
<a href="#l17.531"></a><span id="l17.531" class="difflineminus">-            }</span>
<a href="#l17.532"></a><span id="l17.532" class="difflineminus">-        }</span>
<a href="#l17.533"></a><span id="l17.533" class="difflineminus">-        next++;</span>
<a href="#l17.534"></a><span id="l17.534" class="difflineminus">-        if (c == '&quot;') {</span>
<a href="#l17.535"></a><span id="l17.535" class="difflineminus">-            end = next;</span>
<a href="#l17.536"></a><span id="l17.536" class="difflineminus">-            break;</span>
<a href="#l17.537"></a><span id="l17.537" class="difflineminus">-        }</span>
<a href="#l17.538"></a><span id="l17.538" class="difflineminus">-        if (next == len) {</span>
<a href="#l17.539"></a><span id="l17.539" class="difflineminus">-            raise_errmsg(&quot;Unterminated string starting at&quot;, pystr, begin);</span>
<a href="#l17.540"></a><span id="l17.540" class="difflineminus">-            goto bail;</span>
<a href="#l17.541"></a><span id="l17.541" class="difflineminus">-        }</span>
<a href="#l17.542"></a><span id="l17.542" class="difflineminus">-        c = buf[next];</span>
<a href="#l17.543"></a><span id="l17.543" class="difflineminus">-        if (c != 'u') {</span>
<a href="#l17.544"></a><span id="l17.544" class="difflineminus">-            /* Non-unicode backslash escapes */</span>
<a href="#l17.545"></a><span id="l17.545" class="difflineminus">-            end = next + 1;</span>
<a href="#l17.546"></a><span id="l17.546" class="difflineminus">-            switch (c) {</span>
<a href="#l17.547"></a><span id="l17.547" class="difflineminus">-                case '&quot;': break;</span>
<a href="#l17.548"></a><span id="l17.548" class="difflineminus">-                case '\\': break;</span>
<a href="#l17.549"></a><span id="l17.549" class="difflineminus">-                case '/': break;</span>
<a href="#l17.550"></a><span id="l17.550" class="difflineminus">-                case 'b': c = '\b'; break;</span>
<a href="#l17.551"></a><span id="l17.551" class="difflineminus">-                case 'f': c = '\f'; break;</span>
<a href="#l17.552"></a><span id="l17.552" class="difflineminus">-                case 'n': c = '\n'; break;</span>
<a href="#l17.553"></a><span id="l17.553" class="difflineminus">-                case 'r': c = '\r'; break;</span>
<a href="#l17.554"></a><span id="l17.554" class="difflineminus">-                case 't': c = '\t'; break;</span>
<a href="#l17.555"></a><span id="l17.555" class="difflineminus">-                default: c = 0;</span>
<a href="#l17.556"></a><span id="l17.556" class="difflineminus">-            }</span>
<a href="#l17.557"></a><span id="l17.557" class="difflineminus">-            if (c == 0) {</span>
<a href="#l17.558"></a><span id="l17.558" class="difflineminus">-                raise_errmsg(&quot;Invalid \\escape&quot;, pystr, end - 2);</span>
<a href="#l17.559"></a><span id="l17.559" class="difflineminus">-                goto bail;</span>
<a href="#l17.560"></a><span id="l17.560" class="difflineminus">-            }</span>
<a href="#l17.561"></a><span id="l17.561" class="difflineminus">-        }</span>
<a href="#l17.562"></a><span id="l17.562" class="difflineminus">-        else {</span>
<a href="#l17.563"></a><span id="l17.563" class="difflineminus">-            c = 0;</span>
<a href="#l17.564"></a><span id="l17.564" class="difflineminus">-            next++;</span>
<a href="#l17.565"></a><span id="l17.565" class="difflineminus">-            end = next + 4;</span>
<a href="#l17.566"></a><span id="l17.566" class="difflineminus">-            if (end &gt;= len) {</span>
<a href="#l17.567"></a><span id="l17.567" class="difflineminus">-                raise_errmsg(&quot;Invalid \\uXXXX escape&quot;, pystr, next - 1);</span>
<a href="#l17.568"></a><span id="l17.568" class="difflineminus">-                goto bail;</span>
<a href="#l17.569"></a><span id="l17.569" class="difflineminus">-            }</span>
<a href="#l17.570"></a><span id="l17.570" class="difflineminus">-            /* Decode 4 hex digits */</span>
<a href="#l17.571"></a><span id="l17.571" class="difflineminus">-            for (; next &lt; end; next++) {</span>
<a href="#l17.572"></a><span id="l17.572" class="difflineminus">-                Py_UNICODE digit = buf[next];</span>
<a href="#l17.573"></a><span id="l17.573" class="difflineminus">-                c &lt;&lt;= 4;</span>
<a href="#l17.574"></a><span id="l17.574" class="difflineminus">-                switch (digit) {</span>
<a href="#l17.575"></a><span id="l17.575" class="difflineminus">-                    case '0': case '1': case '2': case '3': case '4':</span>
<a href="#l17.576"></a><span id="l17.576" class="difflineminus">-                    case '5': case '6': case '7': case '8': case '9':</span>
<a href="#l17.577"></a><span id="l17.577" class="difflineminus">-                        c |= (digit - '0'); break;</span>
<a href="#l17.578"></a><span id="l17.578" class="difflineminus">-                    case 'a': case 'b': case 'c': case 'd': case 'e':</span>
<a href="#l17.579"></a><span id="l17.579" class="difflineminus">-                    case 'f':</span>
<a href="#l17.580"></a><span id="l17.580" class="difflineminus">-                        c |= (digit - 'a' + 10); break;</span>
<a href="#l17.581"></a><span id="l17.581" class="difflineminus">-                    case 'A': case 'B': case 'C': case 'D': case 'E':</span>
<a href="#l17.582"></a><span id="l17.582" class="difflineminus">-                    case 'F':</span>
<a href="#l17.583"></a><span id="l17.583" class="difflineminus">-                        c |= (digit - 'A' + 10); break;</span>
<a href="#l17.584"></a><span id="l17.584" class="difflineminus">-                    default:</span>
<a href="#l17.585"></a><span id="l17.585" class="difflineminus">-                        raise_errmsg(&quot;Invalid \\uXXXX escape&quot;, pystr, end - 5);</span>
<a href="#l17.586"></a><span id="l17.586" class="difflineminus">-                        goto bail;</span>
<a href="#l17.587"></a><span id="l17.587" class="difflineminus">-                }</span>
<a href="#l17.588"></a><span id="l17.588" class="difflineminus">-            }</span>
<a href="#l17.589"></a><span id="l17.589" class="difflineminus">-#ifdef Py_UNICODE_WIDE</span>
<a href="#l17.590"></a><span id="l17.590" class="difflineminus">-            /* Surrogate pair */</span>
<a href="#l17.591"></a><span id="l17.591" class="difflineminus">-            if ((c &amp; 0xfc00) == 0xd800) {</span>
<a href="#l17.592"></a><span id="l17.592" class="difflineminus">-                Py_UNICODE c2 = 0;</span>
<a href="#l17.593"></a><span id="l17.593" class="difflineminus">-                if (end + 6 &gt;= len) {</span>
<a href="#l17.594"></a><span id="l17.594" class="difflineminus">-                    raise_errmsg(&quot;Unpaired high surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.595"></a><span id="l17.595" class="difflineminus">-                    goto bail;</span>
<a href="#l17.596"></a><span id="l17.596" class="difflineminus">-                }</span>
<a href="#l17.597"></a><span id="l17.597" class="difflineminus">-                if (buf[next++] != '\\' || buf[next++] != 'u') {</span>
<a href="#l17.598"></a><span id="l17.598" class="difflineminus">-                    raise_errmsg(&quot;Unpaired high surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.599"></a><span id="l17.599" class="difflineminus">-                    goto bail;</span>
<a href="#l17.600"></a><span id="l17.600" class="difflineminus">-                }</span>
<a href="#l17.601"></a><span id="l17.601" class="difflineminus">-                end += 6;</span>
<a href="#l17.602"></a><span id="l17.602" class="difflineminus">-                /* Decode 4 hex digits */</span>
<a href="#l17.603"></a><span id="l17.603" class="difflineminus">-                for (; next &lt; end; next++) {</span>
<a href="#l17.604"></a><span id="l17.604" class="difflineminus">-                    c2 &lt;&lt;= 4;</span>
<a href="#l17.605"></a><span id="l17.605" class="difflineminus">-                    Py_UNICODE digit = buf[next];</span>
<a href="#l17.606"></a><span id="l17.606" class="difflineminus">-                    switch (digit) {</span>
<a href="#l17.607"></a><span id="l17.607" class="difflineminus">-                        case '0': case '1': case '2': case '3': case '4':</span>
<a href="#l17.608"></a><span id="l17.608" class="difflineminus">-                        case '5': case '6': case '7': case '8': case '9':</span>
<a href="#l17.609"></a><span id="l17.609" class="difflineminus">-                            c2 |= (digit - '0'); break;</span>
<a href="#l17.610"></a><span id="l17.610" class="difflineminus">-                        case 'a': case 'b': case 'c': case 'd': case 'e':</span>
<a href="#l17.611"></a><span id="l17.611" class="difflineminus">-                        case 'f':</span>
<a href="#l17.612"></a><span id="l17.612" class="difflineminus">-                            c2 |= (digit - 'a' + 10); break;</span>
<a href="#l17.613"></a><span id="l17.613" class="difflineminus">-                        case 'A': case 'B': case 'C': case 'D': case 'E':</span>
<a href="#l17.614"></a><span id="l17.614" class="difflineminus">-                        case 'F':</span>
<a href="#l17.615"></a><span id="l17.615" class="difflineminus">-                            c2 |= (digit - 'A' + 10); break;</span>
<a href="#l17.616"></a><span id="l17.616" class="difflineminus">-                        default:</span>
<a href="#l17.617"></a><span id="l17.617" class="difflineminus">-                            raise_errmsg(&quot;Invalid \\uXXXX escape&quot;, pystr, end - 5);</span>
<a href="#l17.618"></a><span id="l17.618" class="difflineminus">-                            goto bail;</span>
<a href="#l17.619"></a><span id="l17.619" class="difflineminus">-                    }</span>
<a href="#l17.620"></a><span id="l17.620" class="difflineminus">-                }</span>
<a href="#l17.621"></a><span id="l17.621" class="difflineminus">-                if ((c2 &amp; 0xfc00) != 0xdc00) {</span>
<a href="#l17.622"></a><span id="l17.622" class="difflineminus">-                    raise_errmsg(&quot;Unpaired high surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.623"></a><span id="l17.623" class="difflineminus">-                    goto bail;</span>
<a href="#l17.624"></a><span id="l17.624" class="difflineminus">-                }</span>
<a href="#l17.625"></a><span id="l17.625" class="difflineminus">-                c = 0x10000 + (((c - 0xd800) &lt;&lt; 10) | (c2 - 0xdc00));</span>
<a href="#l17.626"></a><span id="l17.626" class="difflineminus">-            }</span>
<a href="#l17.627"></a><span id="l17.627" class="difflineminus">-            else if ((c &amp; 0xfc00) == 0xdc00) {</span>
<a href="#l17.628"></a><span id="l17.628" class="difflineminus">-                raise_errmsg(&quot;Unpaired low surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.629"></a><span id="l17.629" class="difflineminus">-                goto bail;</span>
<a href="#l17.630"></a><span id="l17.630" class="difflineminus">-            }</span>
<a href="#l17.631"></a><span id="l17.631" class="difflineminus">-#endif</span>
<a href="#l17.632"></a><span id="l17.632" class="difflineminus">-        }</span>
<a href="#l17.633"></a><span id="l17.633" class="difflineminus">-        if (c &gt; 0x7f) {</span>
<a href="#l17.634"></a><span id="l17.634" class="difflineminus">-            has_unicode = 1;</span>
<a href="#l17.635"></a><span id="l17.635" class="difflineminus">-        }</span>
<a href="#l17.636"></a><span id="l17.636" class="difflineminus">-        APPEND_OLD_CHUNK</span>
<a href="#l17.637"></a><span id="l17.637" class="difflineminus">-        if (has_unicode) {</span>
<a href="#l17.638"></a><span id="l17.638" class="difflineminus">-            chunk = PyUnicode_FromUnicode(&amp;c, 1);</span>
<a href="#l17.639"></a><span id="l17.639" class="difflineminus">-            if (chunk == NULL) {</span>
<a href="#l17.640"></a><span id="l17.640" class="difflineminus">-                goto bail;</span>
<a href="#l17.641"></a><span id="l17.641" class="difflineminus">-            }</span>
<a href="#l17.642"></a><span id="l17.642" class="difflineminus">-        }</span>
<a href="#l17.643"></a><span id="l17.643" class="difflineminus">-        else {</span>
<a href="#l17.644"></a><span id="l17.644" class="difflineminus">-            char c_char = Py_CHARMASK(c);</span>
<a href="#l17.645"></a><span id="l17.645" class="difflineminus">-            chunk = PyString_FromStringAndSize(&amp;c_char, 1);</span>
<a href="#l17.646"></a><span id="l17.646" class="difflineminus">-            if (chunk == NULL) {</span>
<a href="#l17.647"></a><span id="l17.647" class="difflineminus">-                goto bail;</span>
<a href="#l17.648"></a><span id="l17.648" class="difflineminus">-            }</span>
<a href="#l17.649"></a><span id="l17.649" class="difflineminus">-        }</span>
<a href="#l17.650"></a><span id="l17.650" class="difflineminus">-    }</span>
<a href="#l17.651"></a><span id="l17.651" class="difflineminus">-</span>
<a href="#l17.652"></a><span id="l17.652" class="difflineminus">-    if (chunks == NULL) {</span>
<a href="#l17.653"></a><span id="l17.653" class="difflineminus">-        if (chunk != NULL)</span>
<a href="#l17.654"></a><span id="l17.654" class="difflineminus">-            rval = chunk;</span>
<a href="#l17.655"></a><span id="l17.655" class="difflineminus">-        else</span>
<a href="#l17.656"></a><span id="l17.656" class="difflineminus">-            rval = PyString_FromStringAndSize(&quot;&quot;, 0);</span>
<a href="#l17.657"></a><span id="l17.657" class="difflineminus">-    }</span>
<a href="#l17.658"></a><span id="l17.658" class="difflineminus">-    else {</span>
<a href="#l17.659"></a><span id="l17.659" class="difflineminus">-        APPEND_OLD_CHUNK</span>
<a href="#l17.660"></a><span id="l17.660" class="difflineminus">-        rval = join_list_string(chunks);</span>
<a href="#l17.661"></a><span id="l17.661" class="difflineminus">-        if (rval == NULL) {</span>
<a href="#l17.662"></a><span id="l17.662" class="difflineminus">-            goto bail;</span>
<a href="#l17.663"></a><span id="l17.663" class="difflineminus">-        }</span>
<a href="#l17.664"></a><span id="l17.664" class="difflineminus">-        Py_CLEAR(chunks);</span>
<a href="#l17.665"></a><span id="l17.665" class="difflineminus">-    }</span>
<a href="#l17.666"></a><span id="l17.666" class="difflineminus">-</span>
<a href="#l17.667"></a><span id="l17.667" class="difflineminus">-    *next_end_ptr = end;</span>
<a href="#l17.668"></a><span id="l17.668" class="difflineminus">-    return rval;</span>
<a href="#l17.669"></a><span id="l17.669" class="difflineminus">-bail:</span>
<a href="#l17.670"></a><span id="l17.670" class="difflineminus">-    *next_end_ptr = -1;</span>
<a href="#l17.671"></a><span id="l17.671" class="difflineminus">-    Py_XDECREF(chunk);</span>
<a href="#l17.672"></a><span id="l17.672" class="difflineminus">-    Py_XDECREF(chunks);</span>
<a href="#l17.673"></a><span id="l17.673" class="difflineminus">-    return NULL;</span>
<a href="#l17.674"></a><span id="l17.674" class="difflineminus">-}</span>
<a href="#l17.675"></a><span id="l17.675" class="difflineminus">-</span>
<a href="#l17.676"></a><span id="l17.676" class="difflineminus">-</span>
<a href="#l17.677"></a><span id="l17.677" class="difflineminus">-static PyObject *</span>
<a href="#l17.678"></a><span id="l17.678" class="difflineminus">-scanstring_unicode(PyObject *pystr, Py_ssize_t end, int strict, Py_ssize_t *next_end_ptr)</span>
<a href="#l17.679"></a><span id="l17.679" class="difflineminus">-{</span>
<a href="#l17.680"></a><span id="l17.680" class="difflineminus">-    /* Read the JSON string from PyUnicode pystr.</span>
<a href="#l17.681"></a><span id="l17.681" class="difflineminus">-    end is the index of the first character after the quote.</span>
<a href="#l17.682"></a><span id="l17.682" class="difflineminus">-    if strict is zero then literal control characters are allowed</span>
<a href="#l17.683"></a><span id="l17.683" class="difflineminus">-    *next_end_ptr is a return-by-reference index of the character</span>
<a href="#l17.684"></a><span id="l17.684" class="difflineminus">-        after the end quote</span>
<a href="#l17.685"></a><span id="l17.685" class="difflineminus">-</span>
<a href="#l17.686"></a><span id="l17.686" class="difflineminus">-    Return value is a new PyUnicode</span>
<a href="#l17.687"></a><span id="l17.687" class="difflineminus">-    */</span>
<a href="#l17.688"></a><span id="l17.688" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.689"></a><span id="l17.689" class="difflineminus">-    Py_ssize_t len = PyUnicode_GET_SIZE(pystr);</span>
<a href="#l17.690"></a><span id="l17.690" class="difflineminus">-    Py_ssize_t begin = end - 1;</span>
<a href="#l17.691"></a><span id="l17.691" class="difflineminus">-    Py_ssize_t next = begin;</span>
<a href="#l17.692"></a><span id="l17.692" class="difflineminus">-    const Py_UNICODE *buf = PyUnicode_AS_UNICODE(pystr);</span>
<a href="#l17.693"></a><span id="l17.693" class="difflineminus">-    PyObject *chunks = NULL;</span>
<a href="#l17.694"></a><span id="l17.694" class="difflineminus">-    PyObject *chunk = NULL;</span>
<a href="#l17.695"></a><span id="l17.695" class="difflineminus">-</span>
<a href="#l17.696"></a><span id="l17.696" class="difflineminus">-    if (end &lt; 0 || len &lt;= end) {</span>
<a href="#l17.697"></a><span id="l17.697" class="difflineminus">-        PyErr_SetString(PyExc_ValueError, &quot;end is out of bounds&quot;);</span>
<a href="#l17.698"></a><span id="l17.698" class="difflineminus">-        goto bail;</span>
<a href="#l17.699"></a><span id="l17.699" class="difflineminus">-    }</span>
<a href="#l17.700"></a><span id="l17.700" class="difflineminus">-    while (1) {</span>
<a href="#l17.701"></a><span id="l17.701" class="difflineminus">-        /* Find the end of the string or the next escape */</span>
<a href="#l17.702"></a><span id="l17.702" class="difflineminus">-        Py_UNICODE c = 0;</span>
<a href="#l17.703"></a><span id="l17.703" class="difflineminus">-        for (next = end; next &lt; len; next++) {</span>
<a href="#l17.704"></a><span id="l17.704" class="difflineminus">-            c = buf[next];</span>
<a href="#l17.705"></a><span id="l17.705" class="difflineminus">-            if (c == '&quot;' || c == '\\') {</span>
<a href="#l17.706"></a><span id="l17.706" class="difflineminus">-                break;</span>
<a href="#l17.707"></a><span id="l17.707" class="difflineminus">-            }</span>
<a href="#l17.708"></a><span id="l17.708" class="difflineminus">-            else if (strict &amp;&amp; c &lt;= 0x1f) {</span>
<a href="#l17.709"></a><span id="l17.709" class="difflineminus">-                raise_errmsg(&quot;Invalid control character at&quot;, pystr, next);</span>
<a href="#l17.710"></a><span id="l17.710" class="difflineminus">-                goto bail;</span>
<a href="#l17.711"></a><span id="l17.711" class="difflineminus">-            }</span>
<a href="#l17.712"></a><span id="l17.712" class="difflineminus">-        }</span>
<a href="#l17.713"></a><span id="l17.713" class="difflineminus">-        if (!(c == '&quot;' || c == '\\')) {</span>
<a href="#l17.714"></a><span id="l17.714" class="difflineminus">-            raise_errmsg(&quot;Unterminated string starting at&quot;, pystr, begin);</span>
<a href="#l17.715"></a><span id="l17.715" class="difflineminus">-            goto bail;</span>
<a href="#l17.716"></a><span id="l17.716" class="difflineminus">-        }</span>
<a href="#l17.717"></a><span id="l17.717" class="difflineminus">-        /* Pick up this chunk if it's not zero length */</span>
<a href="#l17.718"></a><span id="l17.718" class="difflineminus">-        if (next != end) {</span>
<a href="#l17.719"></a><span id="l17.719" class="difflineminus">-            APPEND_OLD_CHUNK</span>
<a href="#l17.720"></a><span id="l17.720" class="difflineminus">-            chunk = PyUnicode_FromUnicode(&amp;buf[end], next - end);</span>
<a href="#l17.721"></a><span id="l17.721" class="difflineminus">-            if (chunk == NULL) {</span>
<a href="#l17.722"></a><span id="l17.722" class="difflineminus">-                goto bail;</span>
<a href="#l17.723"></a><span id="l17.723" class="difflineminus">-            }</span>
<a href="#l17.724"></a><span id="l17.724" class="difflineminus">-        }</span>
<a href="#l17.725"></a><span id="l17.725" class="difflineminus">-        next++;</span>
<a href="#l17.726"></a><span id="l17.726" class="difflineminus">-        if (c == '&quot;') {</span>
<a href="#l17.727"></a><span id="l17.727" class="difflineminus">-            end = next;</span>
<a href="#l17.728"></a><span id="l17.728" class="difflineminus">-            break;</span>
<a href="#l17.729"></a><span id="l17.729" class="difflineminus">-        }</span>
<a href="#l17.730"></a><span id="l17.730" class="difflineminus">-        if (next == len) {</span>
<a href="#l17.731"></a><span id="l17.731" class="difflineminus">-            raise_errmsg(&quot;Unterminated string starting at&quot;, pystr, begin);</span>
<a href="#l17.732"></a><span id="l17.732" class="difflineminus">-            goto bail;</span>
<a href="#l17.733"></a><span id="l17.733" class="difflineminus">-        }</span>
<a href="#l17.734"></a><span id="l17.734" class="difflineminus">-        c = buf[next];</span>
<a href="#l17.735"></a><span id="l17.735" class="difflineminus">-        if (c != 'u') {</span>
<a href="#l17.736"></a><span id="l17.736" class="difflineminus">-            /* Non-unicode backslash escapes */</span>
<a href="#l17.737"></a><span id="l17.737" class="difflineminus">-            end = next + 1;</span>
<a href="#l17.738"></a><span id="l17.738" class="difflineminus">-            switch (c) {</span>
<a href="#l17.739"></a><span id="l17.739" class="difflineminus">-                case '&quot;': break;</span>
<a href="#l17.740"></a><span id="l17.740" class="difflineminus">-                case '\\': break;</span>
<a href="#l17.741"></a><span id="l17.741" class="difflineminus">-                case '/': break;</span>
<a href="#l17.742"></a><span id="l17.742" class="difflineminus">-                case 'b': c = '\b'; break;</span>
<a href="#l17.743"></a><span id="l17.743" class="difflineminus">-                case 'f': c = '\f'; break;</span>
<a href="#l17.744"></a><span id="l17.744" class="difflineminus">-                case 'n': c = '\n'; break;</span>
<a href="#l17.745"></a><span id="l17.745" class="difflineminus">-                case 'r': c = '\r'; break;</span>
<a href="#l17.746"></a><span id="l17.746" class="difflineminus">-                case 't': c = '\t'; break;</span>
<a href="#l17.747"></a><span id="l17.747" class="difflineminus">-                default: c = 0;</span>
<a href="#l17.748"></a><span id="l17.748" class="difflineminus">-            }</span>
<a href="#l17.749"></a><span id="l17.749" class="difflineminus">-            if (c == 0) {</span>
<a href="#l17.750"></a><span id="l17.750" class="difflineminus">-                raise_errmsg(&quot;Invalid \\escape&quot;, pystr, end - 2);</span>
<a href="#l17.751"></a><span id="l17.751" class="difflineminus">-                goto bail;</span>
<a href="#l17.752"></a><span id="l17.752" class="difflineminus">-            }</span>
<a href="#l17.753"></a><span id="l17.753" class="difflineminus">-        }</span>
<a href="#l17.754"></a><span id="l17.754" class="difflineminus">-        else {</span>
<a href="#l17.755"></a><span id="l17.755" class="difflineminus">-            c = 0;</span>
<a href="#l17.756"></a><span id="l17.756" class="difflineminus">-            next++;</span>
<a href="#l17.757"></a><span id="l17.757" class="difflineminus">-            end = next + 4;</span>
<a href="#l17.758"></a><span id="l17.758" class="difflineminus">-            if (end &gt;= len) {</span>
<a href="#l17.759"></a><span id="l17.759" class="difflineminus">-                raise_errmsg(&quot;Invalid \\uXXXX escape&quot;, pystr, next - 1);</span>
<a href="#l17.760"></a><span id="l17.760" class="difflineminus">-                goto bail;</span>
<a href="#l17.761"></a><span id="l17.761" class="difflineminus">-            }</span>
<a href="#l17.762"></a><span id="l17.762" class="difflineminus">-            /* Decode 4 hex digits */</span>
<a href="#l17.763"></a><span id="l17.763" class="difflineminus">-            for (; next &lt; end; next++) {</span>
<a href="#l17.764"></a><span id="l17.764" class="difflineminus">-                Py_UNICODE digit = buf[next];</span>
<a href="#l17.765"></a><span id="l17.765" class="difflineminus">-                c &lt;&lt;= 4;</span>
<a href="#l17.766"></a><span id="l17.766" class="difflineminus">-                switch (digit) {</span>
<a href="#l17.767"></a><span id="l17.767" class="difflineminus">-                    case '0': case '1': case '2': case '3': case '4':</span>
<a href="#l17.768"></a><span id="l17.768" class="difflineminus">-                    case '5': case '6': case '7': case '8': case '9':</span>
<a href="#l17.769"></a><span id="l17.769" class="difflineminus">-                        c |= (digit - '0'); break;</span>
<a href="#l17.770"></a><span id="l17.770" class="difflineminus">-                    case 'a': case 'b': case 'c': case 'd': case 'e':</span>
<a href="#l17.771"></a><span id="l17.771" class="difflineminus">-                    case 'f':</span>
<a href="#l17.772"></a><span id="l17.772" class="difflineminus">-                        c |= (digit - 'a' + 10); break;</span>
<a href="#l17.773"></a><span id="l17.773" class="difflineminus">-                    case 'A': case 'B': case 'C': case 'D': case 'E':</span>
<a href="#l17.774"></a><span id="l17.774" class="difflineminus">-                    case 'F':</span>
<a href="#l17.775"></a><span id="l17.775" class="difflineminus">-                        c |= (digit - 'A' + 10); break;</span>
<a href="#l17.776"></a><span id="l17.776" class="difflineminus">-                    default:</span>
<a href="#l17.777"></a><span id="l17.777" class="difflineminus">-                        raise_errmsg(&quot;Invalid \\uXXXX escape&quot;, pystr, end - 5);</span>
<a href="#l17.778"></a><span id="l17.778" class="difflineminus">-                        goto bail;</span>
<a href="#l17.779"></a><span id="l17.779" class="difflineminus">-                }</span>
<a href="#l17.780"></a><span id="l17.780" class="difflineminus">-            }</span>
<a href="#l17.781"></a><span id="l17.781" class="difflineminus">-#ifdef Py_UNICODE_WIDE</span>
<a href="#l17.782"></a><span id="l17.782" class="difflineminus">-            /* Surrogate pair */</span>
<a href="#l17.783"></a><span id="l17.783" class="difflineminus">-            if ((c &amp; 0xfc00) == 0xd800) {</span>
<a href="#l17.784"></a><span id="l17.784" class="difflineminus">-                Py_UNICODE c2 = 0;</span>
<a href="#l17.785"></a><span id="l17.785" class="difflineminus">-                if (end + 6 &gt;= len) {</span>
<a href="#l17.786"></a><span id="l17.786" class="difflineminus">-                    raise_errmsg(&quot;Unpaired high surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.787"></a><span id="l17.787" class="difflineminus">-                    goto bail;</span>
<a href="#l17.788"></a><span id="l17.788" class="difflineminus">-                }</span>
<a href="#l17.789"></a><span id="l17.789" class="difflineminus">-                if (buf[next++] != '\\' || buf[next++] != 'u') {</span>
<a href="#l17.790"></a><span id="l17.790" class="difflineminus">-                    raise_errmsg(&quot;Unpaired high surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.791"></a><span id="l17.791" class="difflineminus">-                    goto bail;</span>
<a href="#l17.792"></a><span id="l17.792" class="difflineminus">-                }</span>
<a href="#l17.793"></a><span id="l17.793" class="difflineminus">-                end += 6;</span>
<a href="#l17.794"></a><span id="l17.794" class="difflineminus">-                /* Decode 4 hex digits */</span>
<a href="#l17.795"></a><span id="l17.795" class="difflineminus">-                for (; next &lt; end; next++) {</span>
<a href="#l17.796"></a><span id="l17.796" class="difflineminus">-                    c2 &lt;&lt;= 4;</span>
<a href="#l17.797"></a><span id="l17.797" class="difflineminus">-                    Py_UNICODE digit = buf[next];</span>
<a href="#l17.798"></a><span id="l17.798" class="difflineminus">-                    switch (digit) {</span>
<a href="#l17.799"></a><span id="l17.799" class="difflineminus">-                        case '0': case '1': case '2': case '3': case '4':</span>
<a href="#l17.800"></a><span id="l17.800" class="difflineminus">-                        case '5': case '6': case '7': case '8': case '9':</span>
<a href="#l17.801"></a><span id="l17.801" class="difflineminus">-                            c2 |= (digit - '0'); break;</span>
<a href="#l17.802"></a><span id="l17.802" class="difflineminus">-                        case 'a': case 'b': case 'c': case 'd': case 'e':</span>
<a href="#l17.803"></a><span id="l17.803" class="difflineminus">-                        case 'f':</span>
<a href="#l17.804"></a><span id="l17.804" class="difflineminus">-                            c2 |= (digit - 'a' + 10); break;</span>
<a href="#l17.805"></a><span id="l17.805" class="difflineminus">-                        case 'A': case 'B': case 'C': case 'D': case 'E':</span>
<a href="#l17.806"></a><span id="l17.806" class="difflineminus">-                        case 'F':</span>
<a href="#l17.807"></a><span id="l17.807" class="difflineminus">-                            c2 |= (digit - 'A' + 10); break;</span>
<a href="#l17.808"></a><span id="l17.808" class="difflineminus">-                        default:</span>
<a href="#l17.809"></a><span id="l17.809" class="difflineminus">-                            raise_errmsg(&quot;Invalid \\uXXXX escape&quot;, pystr, end - 5);</span>
<a href="#l17.810"></a><span id="l17.810" class="difflineminus">-                            goto bail;</span>
<a href="#l17.811"></a><span id="l17.811" class="difflineminus">-                    }</span>
<a href="#l17.812"></a><span id="l17.812" class="difflineminus">-                }</span>
<a href="#l17.813"></a><span id="l17.813" class="difflineminus">-                if ((c2 &amp; 0xfc00) != 0xdc00) {</span>
<a href="#l17.814"></a><span id="l17.814" class="difflineminus">-                    raise_errmsg(&quot;Unpaired high surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.815"></a><span id="l17.815" class="difflineminus">-                    goto bail;</span>
<a href="#l17.816"></a><span id="l17.816" class="difflineminus">-                }</span>
<a href="#l17.817"></a><span id="l17.817" class="difflineminus">-                c = 0x10000 + (((c - 0xd800) &lt;&lt; 10) | (c2 - 0xdc00));</span>
<a href="#l17.818"></a><span id="l17.818" class="difflineminus">-            }</span>
<a href="#l17.819"></a><span id="l17.819" class="difflineminus">-            else if ((c &amp; 0xfc00) == 0xdc00) {</span>
<a href="#l17.820"></a><span id="l17.820" class="difflineminus">-                raise_errmsg(&quot;Unpaired low surrogate&quot;, pystr, end - 5);</span>
<a href="#l17.821"></a><span id="l17.821" class="difflineminus">-                goto bail;</span>
<a href="#l17.822"></a><span id="l17.822" class="difflineminus">-            }</span>
<a href="#l17.823"></a><span id="l17.823" class="difflineminus">-#endif</span>
<a href="#l17.824"></a><span id="l17.824" class="difflineminus">-        }</span>
<a href="#l17.825"></a><span id="l17.825" class="difflineminus">-        APPEND_OLD_CHUNK</span>
<a href="#l17.826"></a><span id="l17.826" class="difflineminus">-        chunk = PyUnicode_FromUnicode(&amp;c, 1);</span>
<a href="#l17.827"></a><span id="l17.827" class="difflineminus">-        if (chunk == NULL) {</span>
<a href="#l17.828"></a><span id="l17.828" class="difflineminus">-            goto bail;</span>
<a href="#l17.829"></a><span id="l17.829" class="difflineminus">-        }</span>
<a href="#l17.830"></a><span id="l17.830" class="difflineminus">-    }</span>
<a href="#l17.831"></a><span id="l17.831" class="difflineminus">-</span>
<a href="#l17.832"></a><span id="l17.832" class="difflineminus">-    if (chunks == NULL) {</span>
<a href="#l17.833"></a><span id="l17.833" class="difflineminus">-        if (chunk != NULL)</span>
<a href="#l17.834"></a><span id="l17.834" class="difflineminus">-            rval = chunk;</span>
<a href="#l17.835"></a><span id="l17.835" class="difflineminus">-        else</span>
<a href="#l17.836"></a><span id="l17.836" class="difflineminus">-            rval = PyUnicode_FromUnicode(NULL, 0);</span>
<a href="#l17.837"></a><span id="l17.837" class="difflineminus">-    }</span>
<a href="#l17.838"></a><span id="l17.838" class="difflineminus">-    else {</span>
<a href="#l17.839"></a><span id="l17.839" class="difflineminus">-        APPEND_OLD_CHUNK</span>
<a href="#l17.840"></a><span id="l17.840" class="difflineminus">-        rval = join_list_unicode(chunks);</span>
<a href="#l17.841"></a><span id="l17.841" class="difflineminus">-        if (rval == NULL) {</span>
<a href="#l17.842"></a><span id="l17.842" class="difflineminus">-            goto bail;</span>
<a href="#l17.843"></a><span id="l17.843" class="difflineminus">-        }</span>
<a href="#l17.844"></a><span id="l17.844" class="difflineminus">-        Py_CLEAR(chunks);</span>
<a href="#l17.845"></a><span id="l17.845" class="difflineminus">-    }</span>
<a href="#l17.846"></a><span id="l17.846" class="difflineminus">-    *next_end_ptr = end;</span>
<a href="#l17.847"></a><span id="l17.847" class="difflineminus">-    return rval;</span>
<a href="#l17.848"></a><span id="l17.848" class="difflineminus">-bail:</span>
<a href="#l17.849"></a><span id="l17.849" class="difflineminus">-    *next_end_ptr = -1;</span>
<a href="#l17.850"></a><span id="l17.850" class="difflineminus">-    Py_XDECREF(chunk);</span>
<a href="#l17.851"></a><span id="l17.851" class="difflineminus">-    Py_XDECREF(chunks);</span>
<a href="#l17.852"></a><span id="l17.852" class="difflineminus">-    return NULL;</span>
<a href="#l17.853"></a><span id="l17.853" class="difflineminus">-}</span>
<a href="#l17.854"></a><span id="l17.854" class="difflineminus">-</span>
<a href="#l17.855"></a><span id="l17.855" class="difflineminus">-PyDoc_STRVAR(pydoc_scanstring,</span>
<a href="#l17.856"></a><span id="l17.856" class="difflineminus">-    &quot;scanstring(basestring, end, encoding, strict=True) -&gt; (str, end)\n&quot;</span>
<a href="#l17.857"></a><span id="l17.857" class="difflineminus">-    &quot;\n&quot;</span>
<a href="#l17.858"></a><span id="l17.858" class="difflineminus">-    &quot;Scan the string s for a JSON string. End is the index of the\n&quot;</span>
<a href="#l17.859"></a><span id="l17.859" class="difflineminus">-    &quot;character in s after the quote that started the JSON string.\n&quot;</span>
<a href="#l17.860"></a><span id="l17.860" class="difflineminus">-    &quot;Unescapes all valid JSON string escape sequences and raises ValueError\n&quot;</span>
<a href="#l17.861"></a><span id="l17.861" class="difflineminus">-    &quot;on attempt to decode an invalid string. If strict is False then literal\n&quot;</span>
<a href="#l17.862"></a><span id="l17.862" class="difflineminus">-    &quot;control characters are allowed in the string.\n&quot;</span>
<a href="#l17.863"></a><span id="l17.863" class="difflineminus">-    &quot;\n&quot;</span>
<a href="#l17.864"></a><span id="l17.864" class="difflineminus">-    &quot;Returns a tuple of the decoded string and the index of the character in s\n&quot;</span>
<a href="#l17.865"></a><span id="l17.865" class="difflineminus">-    &quot;after the end quote.&quot;</span>
<a href="#l17.866"></a><span id="l17.866" class="difflineminus">-);</span>
<a href="#l17.867"></a><span id="l17.867" class="difflineminus">-</span>
<a href="#l17.868"></a><span id="l17.868" class="difflineminus">-static PyObject *</span>
<a href="#l17.869"></a><span id="l17.869" class="difflineminus">-py_scanstring(PyObject* self UNUSED, PyObject *args)</span>
<a href="#l17.870"></a><span id="l17.870" class="difflineminus">-{</span>
<a href="#l17.871"></a><span id="l17.871" class="difflineminus">-    PyObject *pystr;</span>
<a href="#l17.872"></a><span id="l17.872" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.873"></a><span id="l17.873" class="difflineminus">-    Py_ssize_t end;</span>
<a href="#l17.874"></a><span id="l17.874" class="difflineminus">-    Py_ssize_t next_end = -1;</span>
<a href="#l17.875"></a><span id="l17.875" class="difflineminus">-    char *encoding = NULL;</span>
<a href="#l17.876"></a><span id="l17.876" class="difflineminus">-    int strict = 1;</span>
<a href="#l17.877"></a><span id="l17.877" class="difflineminus">-    if (!PyArg_ParseTuple(args, &quot;OO&amp;|zi:scanstring&quot;, &amp;pystr, _convertPyInt_AsSsize_t, &amp;end, &amp;encoding, &amp;strict)) {</span>
<a href="#l17.878"></a><span id="l17.878" class="difflineminus">-        return NULL;</span>
<a href="#l17.879"></a><span id="l17.879" class="difflineminus">-    }</span>
<a href="#l17.880"></a><span id="l17.880" class="difflineminus">-    if (encoding == NULL) {</span>
<a href="#l17.881"></a><span id="l17.881" class="difflineminus">-        encoding = DEFAULT_ENCODING;</span>
<a href="#l17.882"></a><span id="l17.882" class="difflineminus">-    }</span>
<a href="#l17.883"></a><span id="l17.883" class="difflineminus">-    if (PyString_Check(pystr)) {</span>
<a href="#l17.884"></a><span id="l17.884" class="difflineminus">-        rval = scanstring_str(pystr, end, encoding, strict, &amp;next_end);</span>
<a href="#l17.885"></a><span id="l17.885" class="difflineminus">-    }</span>
<a href="#l17.886"></a><span id="l17.886" class="difflineminus">-    else if (PyUnicode_Check(pystr)) {</span>
<a href="#l17.887"></a><span id="l17.887" class="difflineminus">-        rval = scanstring_unicode(pystr, end, strict, &amp;next_end);</span>
<a href="#l17.888"></a><span id="l17.888" class="difflineminus">-    }</span>
<a href="#l17.889"></a><span id="l17.889" class="difflineminus">-    else {</span>
<a href="#l17.890"></a><span id="l17.890" class="difflineminus">-        PyErr_Format(PyExc_TypeError,</span>
<a href="#l17.891"></a><span id="l17.891" class="difflineminus">-                     &quot;first argument must be a string, not %.80s&quot;,</span>
<a href="#l17.892"></a><span id="l17.892" class="difflineminus">-                     Py_TYPE(pystr)-&gt;tp_name);</span>
<a href="#l17.893"></a><span id="l17.893" class="difflineminus">-        return NULL;</span>
<a href="#l17.894"></a><span id="l17.894" class="difflineminus">-    }</span>
<a href="#l17.895"></a><span id="l17.895" class="difflineminus">-    return _build_rval_index_tuple(rval, next_end);</span>
<a href="#l17.896"></a><span id="l17.896" class="difflineminus">-}</span>
<a href="#l17.897"></a><span id="l17.897" class="difflineminus">-</span>
<a href="#l17.898"></a><span id="l17.898" class="difflineminus">-PyDoc_STRVAR(pydoc_encode_basestring_ascii,</span>
<a href="#l17.899"></a><span id="l17.899" class="difflineminus">-    &quot;encode_basestring_ascii(basestring) -&gt; str\n&quot;</span>
<a href="#l17.900"></a><span id="l17.900" class="difflineminus">-    &quot;\n&quot;</span>
<a href="#l17.901"></a><span id="l17.901" class="difflineminus">-    &quot;Return an ASCII-only JSON representation of a Python string&quot;</span>
<a href="#l17.902"></a><span id="l17.902" class="difflineminus">-);</span>
<a href="#l17.903"></a><span id="l17.903" class="difflineminus">-</span>
<a href="#l17.904"></a><span id="l17.904" class="difflineminus">-static PyObject *</span>
<a href="#l17.905"></a><span id="l17.905" class="difflineminus">-py_encode_basestring_ascii(PyObject* self UNUSED, PyObject *pystr)</span>
<a href="#l17.906"></a><span id="l17.906" class="difflineminus">-{</span>
<a href="#l17.907"></a><span id="l17.907" class="difflineminus">-    /* Return an ASCII-only JSON representation of a Python string */</span>
<a href="#l17.908"></a><span id="l17.908" class="difflineminus">-    /* METH_O */</span>
<a href="#l17.909"></a><span id="l17.909" class="difflineminus">-    if (PyString_Check(pystr)) {</span>
<a href="#l17.910"></a><span id="l17.910" class="difflineminus">-        return ascii_escape_str(pystr);</span>
<a href="#l17.911"></a><span id="l17.911" class="difflineminus">-    }</span>
<a href="#l17.912"></a><span id="l17.912" class="difflineminus">-    else if (PyUnicode_Check(pystr)) {</span>
<a href="#l17.913"></a><span id="l17.913" class="difflineminus">-        return ascii_escape_unicode(pystr);</span>
<a href="#l17.914"></a><span id="l17.914" class="difflineminus">-    }</span>
<a href="#l17.915"></a><span id="l17.915" class="difflineminus">-    else {</span>
<a href="#l17.916"></a><span id="l17.916" class="difflineminus">-        PyErr_Format(PyExc_TypeError,</span>
<a href="#l17.917"></a><span id="l17.917" class="difflineminus">-                     &quot;first argument must be a string, not %.80s&quot;,</span>
<a href="#l17.918"></a><span id="l17.918" class="difflineminus">-                     Py_TYPE(pystr)-&gt;tp_name);</span>
<a href="#l17.919"></a><span id="l17.919" class="difflineminus">-        return NULL;</span>
<a href="#l17.920"></a><span id="l17.920" class="difflineminus">-    }</span>
<a href="#l17.921"></a><span id="l17.921" class="difflineminus">-}</span>
<a href="#l17.922"></a><span id="l17.922" class="difflineminus">-</span>
<a href="#l17.923"></a><span id="l17.923" class="difflineminus">-static void</span>
<a href="#l17.924"></a><span id="l17.924" class="difflineminus">-scanner_dealloc(PyObject *self)</span>
<a href="#l17.925"></a><span id="l17.925" class="difflineminus">-{</span>
<a href="#l17.926"></a><span id="l17.926" class="difflineminus">-    /* Deallocate scanner object */</span>
<a href="#l17.927"></a><span id="l17.927" class="difflineminus">-    scanner_clear(self);</span>
<a href="#l17.928"></a><span id="l17.928" class="difflineminus">-    Py_TYPE(self)-&gt;tp_free(self);</span>
<a href="#l17.929"></a><span id="l17.929" class="difflineminus">-}</span>
<a href="#l17.930"></a><span id="l17.930" class="difflineminus">-</span>
<a href="#l17.931"></a><span id="l17.931" class="difflineminus">-static int</span>
<a href="#l17.932"></a><span id="l17.932" class="difflineminus">-scanner_traverse(PyObject *self, visitproc visit, void *arg)</span>
<a href="#l17.933"></a><span id="l17.933" class="difflineminus">-{</span>
<a href="#l17.934"></a><span id="l17.934" class="difflineminus">-    PyScannerObject *s;</span>
<a href="#l17.935"></a><span id="l17.935" class="difflineminus">-    assert(PyScanner_Check(self));</span>
<a href="#l17.936"></a><span id="l17.936" class="difflineminus">-    s = (PyScannerObject *)self;</span>
<a href="#l17.937"></a><span id="l17.937" class="difflineminus">-    Py_VISIT(s-&gt;encoding);</span>
<a href="#l17.938"></a><span id="l17.938" class="difflineminus">-    Py_VISIT(s-&gt;strict);</span>
<a href="#l17.939"></a><span id="l17.939" class="difflineminus">-    Py_VISIT(s-&gt;object_hook);</span>
<a href="#l17.940"></a><span id="l17.940" class="difflineminus">-    Py_VISIT(s-&gt;pairs_hook);</span>
<a href="#l17.941"></a><span id="l17.941" class="difflineminus">-    Py_VISIT(s-&gt;parse_float);</span>
<a href="#l17.942"></a><span id="l17.942" class="difflineminus">-    Py_VISIT(s-&gt;parse_int);</span>
<a href="#l17.943"></a><span id="l17.943" class="difflineminus">-    Py_VISIT(s-&gt;parse_constant);</span>
<a href="#l17.944"></a><span id="l17.944" class="difflineminus">-    Py_VISIT(s-&gt;memo);</span>
<a href="#l17.945"></a><span id="l17.945" class="difflineminus">-    return 0;</span>
<a href="#l17.946"></a><span id="l17.946" class="difflineminus">-}</span>
<a href="#l17.947"></a><span id="l17.947" class="difflineminus">-</span>
<a href="#l17.948"></a><span id="l17.948" class="difflineminus">-static int</span>
<a href="#l17.949"></a><span id="l17.949" class="difflineminus">-scanner_clear(PyObject *self)</span>
<a href="#l17.950"></a><span id="l17.950" class="difflineminus">-{</span>
<a href="#l17.951"></a><span id="l17.951" class="difflineminus">-    PyScannerObject *s;</span>
<a href="#l17.952"></a><span id="l17.952" class="difflineminus">-    assert(PyScanner_Check(self));</span>
<a href="#l17.953"></a><span id="l17.953" class="difflineminus">-    s = (PyScannerObject *)self;</span>
<a href="#l17.954"></a><span id="l17.954" class="difflineminus">-    Py_CLEAR(s-&gt;encoding);</span>
<a href="#l17.955"></a><span id="l17.955" class="difflineminus">-    Py_CLEAR(s-&gt;strict);</span>
<a href="#l17.956"></a><span id="l17.956" class="difflineminus">-    Py_CLEAR(s-&gt;object_hook);</span>
<a href="#l17.957"></a><span id="l17.957" class="difflineminus">-    Py_CLEAR(s-&gt;pairs_hook);</span>
<a href="#l17.958"></a><span id="l17.958" class="difflineminus">-    Py_CLEAR(s-&gt;parse_float);</span>
<a href="#l17.959"></a><span id="l17.959" class="difflineminus">-    Py_CLEAR(s-&gt;parse_int);</span>
<a href="#l17.960"></a><span id="l17.960" class="difflineminus">-    Py_CLEAR(s-&gt;parse_constant);</span>
<a href="#l17.961"></a><span id="l17.961" class="difflineminus">-    Py_CLEAR(s-&gt;memo);</span>
<a href="#l17.962"></a><span id="l17.962" class="difflineminus">-    return 0;</span>
<a href="#l17.963"></a><span id="l17.963" class="difflineminus">-}</span>
<a href="#l17.964"></a><span id="l17.964" class="difflineminus">-</span>
<a href="#l17.965"></a><span id="l17.965" class="difflineminus">-static PyObject *</span>
<a href="#l17.966"></a><span id="l17.966" class="difflineminus">-_parse_object_str(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.967"></a><span id="l17.967" class="difflineminus">-    /* Read a JSON object from PyString pystr.</span>
<a href="#l17.968"></a><span id="l17.968" class="difflineminus">-    idx is the index of the first character after the opening curly brace.</span>
<a href="#l17.969"></a><span id="l17.969" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.970"></a><span id="l17.970" class="difflineminus">-        the closing curly brace.</span>
<a href="#l17.971"></a><span id="l17.971" class="difflineminus">-</span>
<a href="#l17.972"></a><span id="l17.972" class="difflineminus">-    Returns a new PyObject (usually a dict, but object_hook or</span>
<a href="#l17.973"></a><span id="l17.973" class="difflineminus">-    object_pairs_hook can change that)</span>
<a href="#l17.974"></a><span id="l17.974" class="difflineminus">-    */</span>
<a href="#l17.975"></a><span id="l17.975" class="difflineminus">-    char *str = PyString_AS_STRING(pystr);</span>
<a href="#l17.976"></a><span id="l17.976" class="difflineminus">-    Py_ssize_t end_idx = PyString_GET_SIZE(pystr) - 1;</span>
<a href="#l17.977"></a><span id="l17.977" class="difflineminus">-    PyObject *rval = NULL;</span>
<a href="#l17.978"></a><span id="l17.978" class="difflineminus">-    PyObject *pairs = NULL;</span>
<a href="#l17.979"></a><span id="l17.979" class="difflineminus">-    PyObject *item;</span>
<a href="#l17.980"></a><span id="l17.980" class="difflineminus">-    PyObject *key = NULL;</span>
<a href="#l17.981"></a><span id="l17.981" class="difflineminus">-    PyObject *val = NULL;</span>
<a href="#l17.982"></a><span id="l17.982" class="difflineminus">-    char *encoding = PyString_AS_STRING(s-&gt;encoding);</span>
<a href="#l17.983"></a><span id="l17.983" class="difflineminus">-    int strict = PyObject_IsTrue(s-&gt;strict);</span>
<a href="#l17.984"></a><span id="l17.984" class="difflineminus">-    int has_pairs_hook = (s-&gt;pairs_hook != Py_None);</span>
<a href="#l17.985"></a><span id="l17.985" class="difflineminus">-    Py_ssize_t next_idx;</span>
<a href="#l17.986"></a><span id="l17.986" class="difflineminus">-    if (has_pairs_hook) {</span>
<a href="#l17.987"></a><span id="l17.987" class="difflineminus">-        pairs = PyList_New(0);</span>
<a href="#l17.988"></a><span id="l17.988" class="difflineminus">-        if (pairs == NULL)</span>
<a href="#l17.989"></a><span id="l17.989" class="difflineminus">-            return NULL;</span>
<a href="#l17.990"></a><span id="l17.990" class="difflineminus">-    }</span>
<a href="#l17.991"></a><span id="l17.991" class="difflineminus">-    else {</span>
<a href="#l17.992"></a><span id="l17.992" class="difflineminus">-        rval = PyDict_New();</span>
<a href="#l17.993"></a><span id="l17.993" class="difflineminus">-        if (rval == NULL)</span>
<a href="#l17.994"></a><span id="l17.994" class="difflineminus">-            return NULL;</span>
<a href="#l17.995"></a><span id="l17.995" class="difflineminus">-    }</span>
<a href="#l17.996"></a><span id="l17.996" class="difflineminus">-</span>
<a href="#l17.997"></a><span id="l17.997" class="difflineminus">-    /* skip whitespace after { */</span>
<a href="#l17.998"></a><span id="l17.998" class="difflineminus">-    while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.999"></a><span id="l17.999" class="difflineminus">-</span>
<a href="#l17.1000"></a><span id="l17.1000" class="difflineminus">-    /* only loop if the object is non-empty */</span>
<a href="#l17.1001"></a><span id="l17.1001" class="difflineminus">-    if (idx &lt;= end_idx &amp;&amp; str[idx] != '}') {</span>
<a href="#l17.1002"></a><span id="l17.1002" class="difflineminus">-        while (idx &lt;= end_idx) {</span>
<a href="#l17.1003"></a><span id="l17.1003" class="difflineminus">-            PyObject *memokey;</span>
<a href="#l17.1004"></a><span id="l17.1004" class="difflineminus">-</span>
<a href="#l17.1005"></a><span id="l17.1005" class="difflineminus">-            /* read key */</span>
<a href="#l17.1006"></a><span id="l17.1006" class="difflineminus">-            if (str[idx] != '&quot;') {</span>
<a href="#l17.1007"></a><span id="l17.1007" class="difflineminus">-                raise_errmsg(&quot;Expecting property name&quot;, pystr, idx);</span>
<a href="#l17.1008"></a><span id="l17.1008" class="difflineminus">-                goto bail;</span>
<a href="#l17.1009"></a><span id="l17.1009" class="difflineminus">-            }</span>
<a href="#l17.1010"></a><span id="l17.1010" class="difflineminus">-            key = scanstring_str(pystr, idx + 1, encoding, strict, &amp;next_idx);</span>
<a href="#l17.1011"></a><span id="l17.1011" class="difflineminus">-            if (key == NULL)</span>
<a href="#l17.1012"></a><span id="l17.1012" class="difflineminus">-                goto bail;</span>
<a href="#l17.1013"></a><span id="l17.1013" class="difflineminus">-            memokey = PyDict_GetItem(s-&gt;memo, key);</span>
<a href="#l17.1014"></a><span id="l17.1014" class="difflineminus">-            if (memokey != NULL) {</span>
<a href="#l17.1015"></a><span id="l17.1015" class="difflineminus">-                Py_INCREF(memokey);</span>
<a href="#l17.1016"></a><span id="l17.1016" class="difflineminus">-                Py_DECREF(key);</span>
<a href="#l17.1017"></a><span id="l17.1017" class="difflineminus">-                key = memokey;</span>
<a href="#l17.1018"></a><span id="l17.1018" class="difflineminus">-            }</span>
<a href="#l17.1019"></a><span id="l17.1019" class="difflineminus">-            else {</span>
<a href="#l17.1020"></a><span id="l17.1020" class="difflineminus">-                if (PyDict_SetItem(s-&gt;memo, key, key) &lt; 0)</span>
<a href="#l17.1021"></a><span id="l17.1021" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1022"></a><span id="l17.1022" class="difflineminus">-            }</span>
<a href="#l17.1023"></a><span id="l17.1023" class="difflineminus">-            idx = next_idx;</span>
<a href="#l17.1024"></a><span id="l17.1024" class="difflineminus">-</span>
<a href="#l17.1025"></a><span id="l17.1025" class="difflineminus">-            /* skip whitespace between key and : delimiter, read :, skip whitespace */</span>
<a href="#l17.1026"></a><span id="l17.1026" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1027"></a><span id="l17.1027" class="difflineminus">-            if (idx &gt; end_idx || str[idx] != ':') {</span>
<a href="#l17.1028"></a><span id="l17.1028" class="difflineminus">-                raise_errmsg(&quot;Expecting : delimiter&quot;, pystr, idx);</span>
<a href="#l17.1029"></a><span id="l17.1029" class="difflineminus">-                goto bail;</span>
<a href="#l17.1030"></a><span id="l17.1030" class="difflineminus">-            }</span>
<a href="#l17.1031"></a><span id="l17.1031" class="difflineminus">-            idx++;</span>
<a href="#l17.1032"></a><span id="l17.1032" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1033"></a><span id="l17.1033" class="difflineminus">-</span>
<a href="#l17.1034"></a><span id="l17.1034" class="difflineminus">-            /* read any JSON data type */</span>
<a href="#l17.1035"></a><span id="l17.1035" class="difflineminus">-            val = scan_once_str(s, pystr, idx, &amp;next_idx);</span>
<a href="#l17.1036"></a><span id="l17.1036" class="difflineminus">-            if (val == NULL)</span>
<a href="#l17.1037"></a><span id="l17.1037" class="difflineminus">-                goto bail;</span>
<a href="#l17.1038"></a><span id="l17.1038" class="difflineminus">-</span>
<a href="#l17.1039"></a><span id="l17.1039" class="difflineminus">-            if (has_pairs_hook) {</span>
<a href="#l17.1040"></a><span id="l17.1040" class="difflineminus">-                item = PyTuple_Pack(2, key, val);</span>
<a href="#l17.1041"></a><span id="l17.1041" class="difflineminus">-                if (item == NULL)</span>
<a href="#l17.1042"></a><span id="l17.1042" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1043"></a><span id="l17.1043" class="difflineminus">-                Py_CLEAR(key);</span>
<a href="#l17.1044"></a><span id="l17.1044" class="difflineminus">-                Py_CLEAR(val);</span>
<a href="#l17.1045"></a><span id="l17.1045" class="difflineminus">-                if (PyList_Append(pairs, item) == -1) {</span>
<a href="#l17.1046"></a><span id="l17.1046" class="difflineminus">-                    Py_DECREF(item);</span>
<a href="#l17.1047"></a><span id="l17.1047" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1048"></a><span id="l17.1048" class="difflineminus">-                }</span>
<a href="#l17.1049"></a><span id="l17.1049" class="difflineminus">-                Py_DECREF(item);</span>
<a href="#l17.1050"></a><span id="l17.1050" class="difflineminus">-            }</span>
<a href="#l17.1051"></a><span id="l17.1051" class="difflineminus">-            else {</span>
<a href="#l17.1052"></a><span id="l17.1052" class="difflineminus">-                if (PyDict_SetItem(rval, key, val) &lt; 0)</span>
<a href="#l17.1053"></a><span id="l17.1053" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1054"></a><span id="l17.1054" class="difflineminus">-                Py_CLEAR(key);</span>
<a href="#l17.1055"></a><span id="l17.1055" class="difflineminus">-                Py_CLEAR(val);</span>
<a href="#l17.1056"></a><span id="l17.1056" class="difflineminus">-            }</span>
<a href="#l17.1057"></a><span id="l17.1057" class="difflineminus">-            idx = next_idx;</span>
<a href="#l17.1058"></a><span id="l17.1058" class="difflineminus">-</span>
<a href="#l17.1059"></a><span id="l17.1059" class="difflineminus">-            /* skip whitespace before } or , */</span>
<a href="#l17.1060"></a><span id="l17.1060" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1061"></a><span id="l17.1061" class="difflineminus">-</span>
<a href="#l17.1062"></a><span id="l17.1062" class="difflineminus">-            /* bail if the object is closed or we didn't get the , delimiter */</span>
<a href="#l17.1063"></a><span id="l17.1063" class="difflineminus">-            if (idx &gt; end_idx) break;</span>
<a href="#l17.1064"></a><span id="l17.1064" class="difflineminus">-            if (str[idx] == '}') {</span>
<a href="#l17.1065"></a><span id="l17.1065" class="difflineminus">-                break;</span>
<a href="#l17.1066"></a><span id="l17.1066" class="difflineminus">-            }</span>
<a href="#l17.1067"></a><span id="l17.1067" class="difflineminus">-            else if (str[idx] != ',') {</span>
<a href="#l17.1068"></a><span id="l17.1068" class="difflineminus">-                raise_errmsg(&quot;Expecting , delimiter&quot;, pystr, idx);</span>
<a href="#l17.1069"></a><span id="l17.1069" class="difflineminus">-                goto bail;</span>
<a href="#l17.1070"></a><span id="l17.1070" class="difflineminus">-            }</span>
<a href="#l17.1071"></a><span id="l17.1071" class="difflineminus">-            idx++;</span>
<a href="#l17.1072"></a><span id="l17.1072" class="difflineminus">-</span>
<a href="#l17.1073"></a><span id="l17.1073" class="difflineminus">-            /* skip whitespace after , delimiter */</span>
<a href="#l17.1074"></a><span id="l17.1074" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1075"></a><span id="l17.1075" class="difflineminus">-        }</span>
<a href="#l17.1076"></a><span id="l17.1076" class="difflineminus">-    }</span>
<a href="#l17.1077"></a><span id="l17.1077" class="difflineminus">-    /* verify that idx &lt; end_idx, str[idx] should be '}' */</span>
<a href="#l17.1078"></a><span id="l17.1078" class="difflineminus">-    if (idx &gt; end_idx || str[idx] != '}') {</span>
<a href="#l17.1079"></a><span id="l17.1079" class="difflineminus">-        raise_errmsg(&quot;Expecting object&quot;, pystr, end_idx);</span>
<a href="#l17.1080"></a><span id="l17.1080" class="difflineminus">-        goto bail;</span>
<a href="#l17.1081"></a><span id="l17.1081" class="difflineminus">-    }</span>
<a href="#l17.1082"></a><span id="l17.1082" class="difflineminus">-</span>
<a href="#l17.1083"></a><span id="l17.1083" class="difflineminus">-    /* if pairs_hook is not None: rval = object_pairs_hook(pairs) */</span>
<a href="#l17.1084"></a><span id="l17.1084" class="difflineminus">-    if (s-&gt;pairs_hook != Py_None) {</span>
<a href="#l17.1085"></a><span id="l17.1085" class="difflineminus">-        val = PyObject_CallFunctionObjArgs(s-&gt;pairs_hook, pairs, NULL);</span>
<a href="#l17.1086"></a><span id="l17.1086" class="difflineminus">-        if (val == NULL)</span>
<a href="#l17.1087"></a><span id="l17.1087" class="difflineminus">-            goto bail;</span>
<a href="#l17.1088"></a><span id="l17.1088" class="difflineminus">-        Py_DECREF(pairs);</span>
<a href="#l17.1089"></a><span id="l17.1089" class="difflineminus">-        *next_idx_ptr = idx + 1;</span>
<a href="#l17.1090"></a><span id="l17.1090" class="difflineminus">-        return val;</span>
<a href="#l17.1091"></a><span id="l17.1091" class="difflineminus">-    }</span>
<a href="#l17.1092"></a><span id="l17.1092" class="difflineminus">-</span>
<a href="#l17.1093"></a><span id="l17.1093" class="difflineminus">-    /* if object_hook is not None: rval = object_hook(rval) */</span>
<a href="#l17.1094"></a><span id="l17.1094" class="difflineminus">-    if (s-&gt;object_hook != Py_None) {</span>
<a href="#l17.1095"></a><span id="l17.1095" class="difflineminus">-        val = PyObject_CallFunctionObjArgs(s-&gt;object_hook, rval, NULL);</span>
<a href="#l17.1096"></a><span id="l17.1096" class="difflineminus">-        if (val == NULL)</span>
<a href="#l17.1097"></a><span id="l17.1097" class="difflineminus">-            goto bail;</span>
<a href="#l17.1098"></a><span id="l17.1098" class="difflineminus">-        Py_DECREF(rval);</span>
<a href="#l17.1099"></a><span id="l17.1099" class="difflineminus">-        rval = val;</span>
<a href="#l17.1100"></a><span id="l17.1100" class="difflineminus">-        val = NULL;</span>
<a href="#l17.1101"></a><span id="l17.1101" class="difflineminus">-    }</span>
<a href="#l17.1102"></a><span id="l17.1102" class="difflineminus">-    *next_idx_ptr = idx + 1;</span>
<a href="#l17.1103"></a><span id="l17.1103" class="difflineminus">-    return rval;</span>
<a href="#l17.1104"></a><span id="l17.1104" class="difflineminus">-bail:</span>
<a href="#l17.1105"></a><span id="l17.1105" class="difflineminus">-    Py_XDECREF(rval);</span>
<a href="#l17.1106"></a><span id="l17.1106" class="difflineminus">-    Py_XDECREF(key);</span>
<a href="#l17.1107"></a><span id="l17.1107" class="difflineminus">-    Py_XDECREF(val);</span>
<a href="#l17.1108"></a><span id="l17.1108" class="difflineminus">-    Py_XDECREF(pairs);</span>
<a href="#l17.1109"></a><span id="l17.1109" class="difflineminus">-    return NULL;</span>
<a href="#l17.1110"></a><span id="l17.1110" class="difflineminus">-}</span>
<a href="#l17.1111"></a><span id="l17.1111" class="difflineminus">-</span>
<a href="#l17.1112"></a><span id="l17.1112" class="difflineminus">-static PyObject *</span>
<a href="#l17.1113"></a><span id="l17.1113" class="difflineminus">-_parse_object_unicode(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.1114"></a><span id="l17.1114" class="difflineminus">-    /* Read a JSON object from PyUnicode pystr.</span>
<a href="#l17.1115"></a><span id="l17.1115" class="difflineminus">-    idx is the index of the first character after the opening curly brace.</span>
<a href="#l17.1116"></a><span id="l17.1116" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1117"></a><span id="l17.1117" class="difflineminus">-        the closing curly brace.</span>
<a href="#l17.1118"></a><span id="l17.1118" class="difflineminus">-</span>
<a href="#l17.1119"></a><span id="l17.1119" class="difflineminus">-    Returns a new PyObject (usually a dict, but object_hook can change that)</span>
<a href="#l17.1120"></a><span id="l17.1120" class="difflineminus">-    */</span>
<a href="#l17.1121"></a><span id="l17.1121" class="difflineminus">-    Py_UNICODE *str = PyUnicode_AS_UNICODE(pystr);</span>
<a href="#l17.1122"></a><span id="l17.1122" class="difflineminus">-    Py_ssize_t end_idx = PyUnicode_GET_SIZE(pystr) - 1;</span>
<a href="#l17.1123"></a><span id="l17.1123" class="difflineminus">-    PyObject *rval = NULL;</span>
<a href="#l17.1124"></a><span id="l17.1124" class="difflineminus">-    PyObject *pairs = NULL;</span>
<a href="#l17.1125"></a><span id="l17.1125" class="difflineminus">-    PyObject *item;</span>
<a href="#l17.1126"></a><span id="l17.1126" class="difflineminus">-    PyObject *key = NULL;</span>
<a href="#l17.1127"></a><span id="l17.1127" class="difflineminus">-    PyObject *val = NULL;</span>
<a href="#l17.1128"></a><span id="l17.1128" class="difflineminus">-    int strict = PyObject_IsTrue(s-&gt;strict);</span>
<a href="#l17.1129"></a><span id="l17.1129" class="difflineminus">-    int has_pairs_hook = (s-&gt;pairs_hook != Py_None);</span>
<a href="#l17.1130"></a><span id="l17.1130" class="difflineminus">-    Py_ssize_t next_idx;</span>
<a href="#l17.1131"></a><span id="l17.1131" class="difflineminus">-</span>
<a href="#l17.1132"></a><span id="l17.1132" class="difflineminus">-    if (has_pairs_hook) {</span>
<a href="#l17.1133"></a><span id="l17.1133" class="difflineminus">-        pairs = PyList_New(0);</span>
<a href="#l17.1134"></a><span id="l17.1134" class="difflineminus">-        if (pairs == NULL)</span>
<a href="#l17.1135"></a><span id="l17.1135" class="difflineminus">-            return NULL;</span>
<a href="#l17.1136"></a><span id="l17.1136" class="difflineminus">-    }</span>
<a href="#l17.1137"></a><span id="l17.1137" class="difflineminus">-    else {</span>
<a href="#l17.1138"></a><span id="l17.1138" class="difflineminus">-        rval = PyDict_New();</span>
<a href="#l17.1139"></a><span id="l17.1139" class="difflineminus">-        if (rval == NULL)</span>
<a href="#l17.1140"></a><span id="l17.1140" class="difflineminus">-            return NULL;</span>
<a href="#l17.1141"></a><span id="l17.1141" class="difflineminus">-    }</span>
<a href="#l17.1142"></a><span id="l17.1142" class="difflineminus">-    </span>
<a href="#l17.1143"></a><span id="l17.1143" class="difflineminus">-    /* skip whitespace after { */</span>
<a href="#l17.1144"></a><span id="l17.1144" class="difflineminus">-    while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1145"></a><span id="l17.1145" class="difflineminus">-</span>
<a href="#l17.1146"></a><span id="l17.1146" class="difflineminus">-    /* only loop if the object is non-empty */</span>
<a href="#l17.1147"></a><span id="l17.1147" class="difflineminus">-    if (idx &lt;= end_idx &amp;&amp; str[idx] != '}') {</span>
<a href="#l17.1148"></a><span id="l17.1148" class="difflineminus">-        while (idx &lt;= end_idx) {</span>
<a href="#l17.1149"></a><span id="l17.1149" class="difflineminus">-            PyObject *memokey;</span>
<a href="#l17.1150"></a><span id="l17.1150" class="difflineminus">-</span>
<a href="#l17.1151"></a><span id="l17.1151" class="difflineminus">-            /* read key */</span>
<a href="#l17.1152"></a><span id="l17.1152" class="difflineminus">-            if (str[idx] != '&quot;') {</span>
<a href="#l17.1153"></a><span id="l17.1153" class="difflineminus">-                raise_errmsg(&quot;Expecting property name&quot;, pystr, idx);</span>
<a href="#l17.1154"></a><span id="l17.1154" class="difflineminus">-                goto bail;</span>
<a href="#l17.1155"></a><span id="l17.1155" class="difflineminus">-            }</span>
<a href="#l17.1156"></a><span id="l17.1156" class="difflineminus">-            key = scanstring_unicode(pystr, idx + 1, strict, &amp;next_idx);</span>
<a href="#l17.1157"></a><span id="l17.1157" class="difflineminus">-            if (key == NULL)</span>
<a href="#l17.1158"></a><span id="l17.1158" class="difflineminus">-                goto bail;</span>
<a href="#l17.1159"></a><span id="l17.1159" class="difflineminus">-            memokey = PyDict_GetItem(s-&gt;memo, key);</span>
<a href="#l17.1160"></a><span id="l17.1160" class="difflineminus">-            if (memokey != NULL) {</span>
<a href="#l17.1161"></a><span id="l17.1161" class="difflineminus">-                Py_INCREF(memokey);</span>
<a href="#l17.1162"></a><span id="l17.1162" class="difflineminus">-                Py_DECREF(key);</span>
<a href="#l17.1163"></a><span id="l17.1163" class="difflineminus">-                key = memokey;</span>
<a href="#l17.1164"></a><span id="l17.1164" class="difflineminus">-            }</span>
<a href="#l17.1165"></a><span id="l17.1165" class="difflineminus">-            else {</span>
<a href="#l17.1166"></a><span id="l17.1166" class="difflineminus">-                if (PyDict_SetItem(s-&gt;memo, key, key) &lt; 0)</span>
<a href="#l17.1167"></a><span id="l17.1167" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1168"></a><span id="l17.1168" class="difflineminus">-            }</span>
<a href="#l17.1169"></a><span id="l17.1169" class="difflineminus">-            idx = next_idx;</span>
<a href="#l17.1170"></a><span id="l17.1170" class="difflineminus">-</span>
<a href="#l17.1171"></a><span id="l17.1171" class="difflineminus">-            /* skip whitespace between key and : delimiter, read :, skip whitespace */</span>
<a href="#l17.1172"></a><span id="l17.1172" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1173"></a><span id="l17.1173" class="difflineminus">-            if (idx &gt; end_idx || str[idx] != ':') {</span>
<a href="#l17.1174"></a><span id="l17.1174" class="difflineminus">-                raise_errmsg(&quot;Expecting : delimiter&quot;, pystr, idx);</span>
<a href="#l17.1175"></a><span id="l17.1175" class="difflineminus">-                goto bail;</span>
<a href="#l17.1176"></a><span id="l17.1176" class="difflineminus">-            }</span>
<a href="#l17.1177"></a><span id="l17.1177" class="difflineminus">-            idx++;</span>
<a href="#l17.1178"></a><span id="l17.1178" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1179"></a><span id="l17.1179" class="difflineminus">-</span>
<a href="#l17.1180"></a><span id="l17.1180" class="difflineminus">-            /* read any JSON term */</span>
<a href="#l17.1181"></a><span id="l17.1181" class="difflineminus">-            val = scan_once_unicode(s, pystr, idx, &amp;next_idx);</span>
<a href="#l17.1182"></a><span id="l17.1182" class="difflineminus">-            if (val == NULL)</span>
<a href="#l17.1183"></a><span id="l17.1183" class="difflineminus">-                goto bail;</span>
<a href="#l17.1184"></a><span id="l17.1184" class="difflineminus">-</span>
<a href="#l17.1185"></a><span id="l17.1185" class="difflineminus">-            if (has_pairs_hook) {</span>
<a href="#l17.1186"></a><span id="l17.1186" class="difflineminus">-                item = PyTuple_Pack(2, key, val);</span>
<a href="#l17.1187"></a><span id="l17.1187" class="difflineminus">-                if (item == NULL)</span>
<a href="#l17.1188"></a><span id="l17.1188" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1189"></a><span id="l17.1189" class="difflineminus">-                Py_CLEAR(key);</span>
<a href="#l17.1190"></a><span id="l17.1190" class="difflineminus">-                Py_CLEAR(val);</span>
<a href="#l17.1191"></a><span id="l17.1191" class="difflineminus">-                if (PyList_Append(pairs, item) == -1) {</span>
<a href="#l17.1192"></a><span id="l17.1192" class="difflineminus">-                    Py_DECREF(item);</span>
<a href="#l17.1193"></a><span id="l17.1193" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1194"></a><span id="l17.1194" class="difflineminus">-                }</span>
<a href="#l17.1195"></a><span id="l17.1195" class="difflineminus">-                Py_DECREF(item);</span>
<a href="#l17.1196"></a><span id="l17.1196" class="difflineminus">-            }</span>
<a href="#l17.1197"></a><span id="l17.1197" class="difflineminus">-            else {</span>
<a href="#l17.1198"></a><span id="l17.1198" class="difflineminus">-                if (PyDict_SetItem(rval, key, val) &lt; 0)</span>
<a href="#l17.1199"></a><span id="l17.1199" class="difflineminus">-                    goto bail;</span>
<a href="#l17.1200"></a><span id="l17.1200" class="difflineminus">-                Py_CLEAR(key);</span>
<a href="#l17.1201"></a><span id="l17.1201" class="difflineminus">-                Py_CLEAR(val);</span>
<a href="#l17.1202"></a><span id="l17.1202" class="difflineminus">-            }</span>
<a href="#l17.1203"></a><span id="l17.1203" class="difflineminus">-            idx = next_idx;</span>
<a href="#l17.1204"></a><span id="l17.1204" class="difflineminus">-</span>
<a href="#l17.1205"></a><span id="l17.1205" class="difflineminus">-            /* skip whitespace before } or , */</span>
<a href="#l17.1206"></a><span id="l17.1206" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1207"></a><span id="l17.1207" class="difflineminus">-</span>
<a href="#l17.1208"></a><span id="l17.1208" class="difflineminus">-            /* bail if the object is closed or we didn't get the , delimiter */</span>
<a href="#l17.1209"></a><span id="l17.1209" class="difflineminus">-            if (idx &gt; end_idx) break;</span>
<a href="#l17.1210"></a><span id="l17.1210" class="difflineminus">-            if (str[idx] == '}') {</span>
<a href="#l17.1211"></a><span id="l17.1211" class="difflineminus">-                break;</span>
<a href="#l17.1212"></a><span id="l17.1212" class="difflineminus">-            }</span>
<a href="#l17.1213"></a><span id="l17.1213" class="difflineminus">-            else if (str[idx] != ',') {</span>
<a href="#l17.1214"></a><span id="l17.1214" class="difflineminus">-                raise_errmsg(&quot;Expecting , delimiter&quot;, pystr, idx);</span>
<a href="#l17.1215"></a><span id="l17.1215" class="difflineminus">-                goto bail;</span>
<a href="#l17.1216"></a><span id="l17.1216" class="difflineminus">-            }</span>
<a href="#l17.1217"></a><span id="l17.1217" class="difflineminus">-            idx++;</span>
<a href="#l17.1218"></a><span id="l17.1218" class="difflineminus">-</span>
<a href="#l17.1219"></a><span id="l17.1219" class="difflineminus">-            /* skip whitespace after , delimiter */</span>
<a href="#l17.1220"></a><span id="l17.1220" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1221"></a><span id="l17.1221" class="difflineminus">-        }</span>
<a href="#l17.1222"></a><span id="l17.1222" class="difflineminus">-    }</span>
<a href="#l17.1223"></a><span id="l17.1223" class="difflineminus">-</span>
<a href="#l17.1224"></a><span id="l17.1224" class="difflineminus">-    /* verify that idx &lt; end_idx, str[idx] should be '}' */</span>
<a href="#l17.1225"></a><span id="l17.1225" class="difflineminus">-    if (idx &gt; end_idx || str[idx] != '}') {</span>
<a href="#l17.1226"></a><span id="l17.1226" class="difflineminus">-        raise_errmsg(&quot;Expecting object&quot;, pystr, end_idx);</span>
<a href="#l17.1227"></a><span id="l17.1227" class="difflineminus">-        goto bail;</span>
<a href="#l17.1228"></a><span id="l17.1228" class="difflineminus">-    }</span>
<a href="#l17.1229"></a><span id="l17.1229" class="difflineminus">-</span>
<a href="#l17.1230"></a><span id="l17.1230" class="difflineminus">-    /* if pairs_hook is not None: rval = object_pairs_hook(pairs) */</span>
<a href="#l17.1231"></a><span id="l17.1231" class="difflineminus">-    if (s-&gt;pairs_hook != Py_None) {</span>
<a href="#l17.1232"></a><span id="l17.1232" class="difflineminus">-        val = PyObject_CallFunctionObjArgs(s-&gt;pairs_hook, pairs, NULL);</span>
<a href="#l17.1233"></a><span id="l17.1233" class="difflineminus">-        if (val == NULL)</span>
<a href="#l17.1234"></a><span id="l17.1234" class="difflineminus">-            goto bail;</span>
<a href="#l17.1235"></a><span id="l17.1235" class="difflineminus">-        Py_DECREF(pairs);</span>
<a href="#l17.1236"></a><span id="l17.1236" class="difflineminus">-        *next_idx_ptr = idx + 1;</span>
<a href="#l17.1237"></a><span id="l17.1237" class="difflineminus">-        return val;</span>
<a href="#l17.1238"></a><span id="l17.1238" class="difflineminus">-    }</span>
<a href="#l17.1239"></a><span id="l17.1239" class="difflineminus">-</span>
<a href="#l17.1240"></a><span id="l17.1240" class="difflineminus">-    /* if object_hook is not None: rval = object_hook(rval) */</span>
<a href="#l17.1241"></a><span id="l17.1241" class="difflineminus">-    if (s-&gt;object_hook != Py_None) {</span>
<a href="#l17.1242"></a><span id="l17.1242" class="difflineminus">-        val = PyObject_CallFunctionObjArgs(s-&gt;object_hook, rval, NULL);</span>
<a href="#l17.1243"></a><span id="l17.1243" class="difflineminus">-        if (val == NULL)</span>
<a href="#l17.1244"></a><span id="l17.1244" class="difflineminus">-            goto bail;</span>
<a href="#l17.1245"></a><span id="l17.1245" class="difflineminus">-        Py_DECREF(rval);</span>
<a href="#l17.1246"></a><span id="l17.1246" class="difflineminus">-        rval = val;</span>
<a href="#l17.1247"></a><span id="l17.1247" class="difflineminus">-        val = NULL;</span>
<a href="#l17.1248"></a><span id="l17.1248" class="difflineminus">-    }</span>
<a href="#l17.1249"></a><span id="l17.1249" class="difflineminus">-    *next_idx_ptr = idx + 1;</span>
<a href="#l17.1250"></a><span id="l17.1250" class="difflineminus">-    return rval;</span>
<a href="#l17.1251"></a><span id="l17.1251" class="difflineminus">-bail:</span>
<a href="#l17.1252"></a><span id="l17.1252" class="difflineminus">-    Py_XDECREF(rval);</span>
<a href="#l17.1253"></a><span id="l17.1253" class="difflineminus">-    Py_XDECREF(key);</span>
<a href="#l17.1254"></a><span id="l17.1254" class="difflineminus">-    Py_XDECREF(val);</span>
<a href="#l17.1255"></a><span id="l17.1255" class="difflineminus">-    Py_XDECREF(pairs);</span>
<a href="#l17.1256"></a><span id="l17.1256" class="difflineminus">-    return NULL;</span>
<a href="#l17.1257"></a><span id="l17.1257" class="difflineminus">-}</span>
<a href="#l17.1258"></a><span id="l17.1258" class="difflineminus">-</span>
<a href="#l17.1259"></a><span id="l17.1259" class="difflineminus">-static PyObject *</span>
<a href="#l17.1260"></a><span id="l17.1260" class="difflineminus">-_parse_array_str(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.1261"></a><span id="l17.1261" class="difflineminus">-    /* Read a JSON array from PyString pystr.</span>
<a href="#l17.1262"></a><span id="l17.1262" class="difflineminus">-    idx is the index of the first character after the opening brace.</span>
<a href="#l17.1263"></a><span id="l17.1263" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1264"></a><span id="l17.1264" class="difflineminus">-        the closing brace.</span>
<a href="#l17.1265"></a><span id="l17.1265" class="difflineminus">-</span>
<a href="#l17.1266"></a><span id="l17.1266" class="difflineminus">-    Returns a new PyList</span>
<a href="#l17.1267"></a><span id="l17.1267" class="difflineminus">-    */</span>
<a href="#l17.1268"></a><span id="l17.1268" class="difflineminus">-    char *str = PyString_AS_STRING(pystr);</span>
<a href="#l17.1269"></a><span id="l17.1269" class="difflineminus">-    Py_ssize_t end_idx = PyString_GET_SIZE(pystr) - 1;</span>
<a href="#l17.1270"></a><span id="l17.1270" class="difflineminus">-    PyObject *val = NULL;</span>
<a href="#l17.1271"></a><span id="l17.1271" class="difflineminus">-    PyObject *rval = PyList_New(0);</span>
<a href="#l17.1272"></a><span id="l17.1272" class="difflineminus">-    Py_ssize_t next_idx;</span>
<a href="#l17.1273"></a><span id="l17.1273" class="difflineminus">-    if (rval == NULL)</span>
<a href="#l17.1274"></a><span id="l17.1274" class="difflineminus">-        return NULL;</span>
<a href="#l17.1275"></a><span id="l17.1275" class="difflineminus">-</span>
<a href="#l17.1276"></a><span id="l17.1276" class="difflineminus">-    /* skip whitespace after [ */</span>
<a href="#l17.1277"></a><span id="l17.1277" class="difflineminus">-    while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1278"></a><span id="l17.1278" class="difflineminus">-</span>
<a href="#l17.1279"></a><span id="l17.1279" class="difflineminus">-    /* only loop if the array is non-empty */</span>
<a href="#l17.1280"></a><span id="l17.1280" class="difflineminus">-    if (idx &lt;= end_idx &amp;&amp; str[idx] != ']') {</span>
<a href="#l17.1281"></a><span id="l17.1281" class="difflineminus">-        while (idx &lt;= end_idx) {</span>
<a href="#l17.1282"></a><span id="l17.1282" class="difflineminus">-</span>
<a href="#l17.1283"></a><span id="l17.1283" class="difflineminus">-            /* read any JSON term and de-tuplefy the (rval, idx) */</span>
<a href="#l17.1284"></a><span id="l17.1284" class="difflineminus">-            val = scan_once_str(s, pystr, idx, &amp;next_idx);</span>
<a href="#l17.1285"></a><span id="l17.1285" class="difflineminus">-            if (val == NULL) {</span>
<a href="#l17.1286"></a><span id="l17.1286" class="difflineminus">-                if (PyErr_ExceptionMatches(PyExc_StopIteration)) {</span>
<a href="#l17.1287"></a><span id="l17.1287" class="difflineminus">-                    PyErr_Clear();</span>
<a href="#l17.1288"></a><span id="l17.1288" class="difflineminus">-                    raise_errmsg(&quot;Expecting object&quot;, pystr, idx);</span>
<a href="#l17.1289"></a><span id="l17.1289" class="difflineminus">-                }</span>
<a href="#l17.1290"></a><span id="l17.1290" class="difflineminus">-                goto bail;</span>
<a href="#l17.1291"></a><span id="l17.1291" class="difflineminus">-            }</span>
<a href="#l17.1292"></a><span id="l17.1292" class="difflineminus">-</span>
<a href="#l17.1293"></a><span id="l17.1293" class="difflineminus">-            if (PyList_Append(rval, val) == -1)</span>
<a href="#l17.1294"></a><span id="l17.1294" class="difflineminus">-                goto bail;</span>
<a href="#l17.1295"></a><span id="l17.1295" class="difflineminus">-</span>
<a href="#l17.1296"></a><span id="l17.1296" class="difflineminus">-            Py_CLEAR(val);</span>
<a href="#l17.1297"></a><span id="l17.1297" class="difflineminus">-            idx = next_idx;</span>
<a href="#l17.1298"></a><span id="l17.1298" class="difflineminus">-</span>
<a href="#l17.1299"></a><span id="l17.1299" class="difflineminus">-            /* skip whitespace between term and , */</span>
<a href="#l17.1300"></a><span id="l17.1300" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1301"></a><span id="l17.1301" class="difflineminus">-</span>
<a href="#l17.1302"></a><span id="l17.1302" class="difflineminus">-            /* bail if the array is closed or we didn't get the , delimiter */</span>
<a href="#l17.1303"></a><span id="l17.1303" class="difflineminus">-            if (idx &gt; end_idx) break;</span>
<a href="#l17.1304"></a><span id="l17.1304" class="difflineminus">-            if (str[idx] == ']') {</span>
<a href="#l17.1305"></a><span id="l17.1305" class="difflineminus">-                break;</span>
<a href="#l17.1306"></a><span id="l17.1306" class="difflineminus">-            }</span>
<a href="#l17.1307"></a><span id="l17.1307" class="difflineminus">-            else if (str[idx] != ',') {</span>
<a href="#l17.1308"></a><span id="l17.1308" class="difflineminus">-                raise_errmsg(&quot;Expecting , delimiter&quot;, pystr, idx);</span>
<a href="#l17.1309"></a><span id="l17.1309" class="difflineminus">-                goto bail;</span>
<a href="#l17.1310"></a><span id="l17.1310" class="difflineminus">-            }</span>
<a href="#l17.1311"></a><span id="l17.1311" class="difflineminus">-            idx++;</span>
<a href="#l17.1312"></a><span id="l17.1312" class="difflineminus">-</span>
<a href="#l17.1313"></a><span id="l17.1313" class="difflineminus">-            /* skip whitespace after , */</span>
<a href="#l17.1314"></a><span id="l17.1314" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1315"></a><span id="l17.1315" class="difflineminus">-        }</span>
<a href="#l17.1316"></a><span id="l17.1316" class="difflineminus">-    }</span>
<a href="#l17.1317"></a><span id="l17.1317" class="difflineminus">-</span>
<a href="#l17.1318"></a><span id="l17.1318" class="difflineminus">-    /* verify that idx &lt; end_idx, str[idx] should be ']' */</span>
<a href="#l17.1319"></a><span id="l17.1319" class="difflineminus">-    if (idx &gt; end_idx || str[idx] != ']') {</span>
<a href="#l17.1320"></a><span id="l17.1320" class="difflineminus">-        raise_errmsg(&quot;Expecting object&quot;, pystr, end_idx);</span>
<a href="#l17.1321"></a><span id="l17.1321" class="difflineminus">-        goto bail;</span>
<a href="#l17.1322"></a><span id="l17.1322" class="difflineminus">-    }</span>
<a href="#l17.1323"></a><span id="l17.1323" class="difflineminus">-    *next_idx_ptr = idx + 1;</span>
<a href="#l17.1324"></a><span id="l17.1324" class="difflineminus">-    return rval;</span>
<a href="#l17.1325"></a><span id="l17.1325" class="difflineminus">-bail:</span>
<a href="#l17.1326"></a><span id="l17.1326" class="difflineminus">-    Py_XDECREF(val);</span>
<a href="#l17.1327"></a><span id="l17.1327" class="difflineminus">-    Py_DECREF(rval);</span>
<a href="#l17.1328"></a><span id="l17.1328" class="difflineminus">-    return NULL;</span>
<a href="#l17.1329"></a><span id="l17.1329" class="difflineminus">-}</span>
<a href="#l17.1330"></a><span id="l17.1330" class="difflineminus">-</span>
<a href="#l17.1331"></a><span id="l17.1331" class="difflineminus">-static PyObject *</span>
<a href="#l17.1332"></a><span id="l17.1332" class="difflineminus">-_parse_array_unicode(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.1333"></a><span id="l17.1333" class="difflineminus">-    /* Read a JSON array from PyString pystr.</span>
<a href="#l17.1334"></a><span id="l17.1334" class="difflineminus">-    idx is the index of the first character after the opening brace.</span>
<a href="#l17.1335"></a><span id="l17.1335" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1336"></a><span id="l17.1336" class="difflineminus">-        the closing brace.</span>
<a href="#l17.1337"></a><span id="l17.1337" class="difflineminus">-</span>
<a href="#l17.1338"></a><span id="l17.1338" class="difflineminus">-    Returns a new PyList</span>
<a href="#l17.1339"></a><span id="l17.1339" class="difflineminus">-    */</span>
<a href="#l17.1340"></a><span id="l17.1340" class="difflineminus">-    Py_UNICODE *str = PyUnicode_AS_UNICODE(pystr);</span>
<a href="#l17.1341"></a><span id="l17.1341" class="difflineminus">-    Py_ssize_t end_idx = PyUnicode_GET_SIZE(pystr) - 1;</span>
<a href="#l17.1342"></a><span id="l17.1342" class="difflineminus">-    PyObject *val = NULL;</span>
<a href="#l17.1343"></a><span id="l17.1343" class="difflineminus">-    PyObject *rval = PyList_New(0);</span>
<a href="#l17.1344"></a><span id="l17.1344" class="difflineminus">-    Py_ssize_t next_idx;</span>
<a href="#l17.1345"></a><span id="l17.1345" class="difflineminus">-    if (rval == NULL)</span>
<a href="#l17.1346"></a><span id="l17.1346" class="difflineminus">-        return NULL;</span>
<a href="#l17.1347"></a><span id="l17.1347" class="difflineminus">-</span>
<a href="#l17.1348"></a><span id="l17.1348" class="difflineminus">-    /* skip whitespace after [ */</span>
<a href="#l17.1349"></a><span id="l17.1349" class="difflineminus">-    while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1350"></a><span id="l17.1350" class="difflineminus">-</span>
<a href="#l17.1351"></a><span id="l17.1351" class="difflineminus">-    /* only loop if the array is non-empty */</span>
<a href="#l17.1352"></a><span id="l17.1352" class="difflineminus">-    if (idx &lt;= end_idx &amp;&amp; str[idx] != ']') {</span>
<a href="#l17.1353"></a><span id="l17.1353" class="difflineminus">-        while (idx &lt;= end_idx) {</span>
<a href="#l17.1354"></a><span id="l17.1354" class="difflineminus">-</span>
<a href="#l17.1355"></a><span id="l17.1355" class="difflineminus">-            /* read any JSON term  */</span>
<a href="#l17.1356"></a><span id="l17.1356" class="difflineminus">-            val = scan_once_unicode(s, pystr, idx, &amp;next_idx);</span>
<a href="#l17.1357"></a><span id="l17.1357" class="difflineminus">-            if (val == NULL) {</span>
<a href="#l17.1358"></a><span id="l17.1358" class="difflineminus">-                if (PyErr_ExceptionMatches(PyExc_StopIteration)) {</span>
<a href="#l17.1359"></a><span id="l17.1359" class="difflineminus">-                    PyErr_Clear();</span>
<a href="#l17.1360"></a><span id="l17.1360" class="difflineminus">-                    raise_errmsg(&quot;Expecting object&quot;, pystr, idx);</span>
<a href="#l17.1361"></a><span id="l17.1361" class="difflineminus">-                }</span>
<a href="#l17.1362"></a><span id="l17.1362" class="difflineminus">-                goto bail;</span>
<a href="#l17.1363"></a><span id="l17.1363" class="difflineminus">-            }</span>
<a href="#l17.1364"></a><span id="l17.1364" class="difflineminus">-</span>
<a href="#l17.1365"></a><span id="l17.1365" class="difflineminus">-            if (PyList_Append(rval, val) == -1)</span>
<a href="#l17.1366"></a><span id="l17.1366" class="difflineminus">-                goto bail;</span>
<a href="#l17.1367"></a><span id="l17.1367" class="difflineminus">-</span>
<a href="#l17.1368"></a><span id="l17.1368" class="difflineminus">-            Py_CLEAR(val);</span>
<a href="#l17.1369"></a><span id="l17.1369" class="difflineminus">-            idx = next_idx;</span>
<a href="#l17.1370"></a><span id="l17.1370" class="difflineminus">-</span>
<a href="#l17.1371"></a><span id="l17.1371" class="difflineminus">-            /* skip whitespace between term and , */</span>
<a href="#l17.1372"></a><span id="l17.1372" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1373"></a><span id="l17.1373" class="difflineminus">-</span>
<a href="#l17.1374"></a><span id="l17.1374" class="difflineminus">-            /* bail if the array is closed or we didn't get the , delimiter */</span>
<a href="#l17.1375"></a><span id="l17.1375" class="difflineminus">-            if (idx &gt; end_idx) break;</span>
<a href="#l17.1376"></a><span id="l17.1376" class="difflineminus">-            if (str[idx] == ']') {</span>
<a href="#l17.1377"></a><span id="l17.1377" class="difflineminus">-                break;</span>
<a href="#l17.1378"></a><span id="l17.1378" class="difflineminus">-            }</span>
<a href="#l17.1379"></a><span id="l17.1379" class="difflineminus">-            else if (str[idx] != ',') {</span>
<a href="#l17.1380"></a><span id="l17.1380" class="difflineminus">-                raise_errmsg(&quot;Expecting , delimiter&quot;, pystr, idx);</span>
<a href="#l17.1381"></a><span id="l17.1381" class="difflineminus">-                goto bail;</span>
<a href="#l17.1382"></a><span id="l17.1382" class="difflineminus">-            }</span>
<a href="#l17.1383"></a><span id="l17.1383" class="difflineminus">-            idx++;</span>
<a href="#l17.1384"></a><span id="l17.1384" class="difflineminus">-</span>
<a href="#l17.1385"></a><span id="l17.1385" class="difflineminus">-            /* skip whitespace after , */</span>
<a href="#l17.1386"></a><span id="l17.1386" class="difflineminus">-            while (idx &lt;= end_idx &amp;&amp; IS_WHITESPACE(str[idx])) idx++;</span>
<a href="#l17.1387"></a><span id="l17.1387" class="difflineminus">-        }</span>
<a href="#l17.1388"></a><span id="l17.1388" class="difflineminus">-    }</span>
<a href="#l17.1389"></a><span id="l17.1389" class="difflineminus">-</span>
<a href="#l17.1390"></a><span id="l17.1390" class="difflineminus">-    /* verify that idx &lt; end_idx, str[idx] should be ']' */</span>
<a href="#l17.1391"></a><span id="l17.1391" class="difflineminus">-    if (idx &gt; end_idx || str[idx] != ']') {</span>
<a href="#l17.1392"></a><span id="l17.1392" class="difflineminus">-        raise_errmsg(&quot;Expecting object&quot;, pystr, end_idx);</span>
<a href="#l17.1393"></a><span id="l17.1393" class="difflineminus">-        goto bail;</span>
<a href="#l17.1394"></a><span id="l17.1394" class="difflineminus">-    }</span>
<a href="#l17.1395"></a><span id="l17.1395" class="difflineminus">-    *next_idx_ptr = idx + 1;</span>
<a href="#l17.1396"></a><span id="l17.1396" class="difflineminus">-    return rval;</span>
<a href="#l17.1397"></a><span id="l17.1397" class="difflineminus">-bail:</span>
<a href="#l17.1398"></a><span id="l17.1398" class="difflineminus">-    Py_XDECREF(val);</span>
<a href="#l17.1399"></a><span id="l17.1399" class="difflineminus">-    Py_DECREF(rval);</span>
<a href="#l17.1400"></a><span id="l17.1400" class="difflineminus">-    return NULL;</span>
<a href="#l17.1401"></a><span id="l17.1401" class="difflineminus">-}</span>
<a href="#l17.1402"></a><span id="l17.1402" class="difflineminus">-</span>
<a href="#l17.1403"></a><span id="l17.1403" class="difflineminus">-static PyObject *</span>
<a href="#l17.1404"></a><span id="l17.1404" class="difflineminus">-_parse_constant(PyScannerObject *s, char *constant, Py_ssize_t idx, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.1405"></a><span id="l17.1405" class="difflineminus">-    /* Read a JSON constant from PyString pystr.</span>
<a href="#l17.1406"></a><span id="l17.1406" class="difflineminus">-    constant is the constant string that was found</span>
<a href="#l17.1407"></a><span id="l17.1407" class="difflineminus">-        (&quot;NaN&quot;, &quot;Infinity&quot;, &quot;-Infinity&quot;).</span>
<a href="#l17.1408"></a><span id="l17.1408" class="difflineminus">-    idx is the index of the first character of the constant</span>
<a href="#l17.1409"></a><span id="l17.1409" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1410"></a><span id="l17.1410" class="difflineminus">-        the constant.</span>
<a href="#l17.1411"></a><span id="l17.1411" class="difflineminus">-</span>
<a href="#l17.1412"></a><span id="l17.1412" class="difflineminus">-    Returns the result of parse_constant</span>
<a href="#l17.1413"></a><span id="l17.1413" class="difflineminus">-    */</span>
<a href="#l17.1414"></a><span id="l17.1414" class="difflineminus">-    PyObject *cstr;</span>
<a href="#l17.1415"></a><span id="l17.1415" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.1416"></a><span id="l17.1416" class="difflineminus">-    /* constant is &quot;NaN&quot;, &quot;Infinity&quot;, or &quot;-Infinity&quot; */</span>
<a href="#l17.1417"></a><span id="l17.1417" class="difflineminus">-    cstr = PyString_InternFromString(constant);</span>
<a href="#l17.1418"></a><span id="l17.1418" class="difflineminus">-    if (cstr == NULL)</span>
<a href="#l17.1419"></a><span id="l17.1419" class="difflineminus">-        return NULL;</span>
<a href="#l17.1420"></a><span id="l17.1420" class="difflineminus">-</span>
<a href="#l17.1421"></a><span id="l17.1421" class="difflineminus">-    /* rval = parse_constant(constant) */</span>
<a href="#l17.1422"></a><span id="l17.1422" class="difflineminus">-    rval = PyObject_CallFunctionObjArgs(s-&gt;parse_constant, cstr, NULL);</span>
<a href="#l17.1423"></a><span id="l17.1423" class="difflineminus">-    idx += PyString_GET_SIZE(cstr);</span>
<a href="#l17.1424"></a><span id="l17.1424" class="difflineminus">-    Py_DECREF(cstr);</span>
<a href="#l17.1425"></a><span id="l17.1425" class="difflineminus">-    *next_idx_ptr = idx;</span>
<a href="#l17.1426"></a><span id="l17.1426" class="difflineminus">-    return rval;</span>
<a href="#l17.1427"></a><span id="l17.1427" class="difflineminus">-}</span>
<a href="#l17.1428"></a><span id="l17.1428" class="difflineminus">-</span>
<a href="#l17.1429"></a><span id="l17.1429" class="difflineminus">-static PyObject *</span>
<a href="#l17.1430"></a><span id="l17.1430" class="difflineminus">-_match_number_str(PyScannerObject *s, PyObject *pystr, Py_ssize_t start, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.1431"></a><span id="l17.1431" class="difflineminus">-    /* Read a JSON number from PyString pystr.</span>
<a href="#l17.1432"></a><span id="l17.1432" class="difflineminus">-    idx is the index of the first character of the number</span>
<a href="#l17.1433"></a><span id="l17.1433" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1434"></a><span id="l17.1434" class="difflineminus">-        the number.</span>
<a href="#l17.1435"></a><span id="l17.1435" class="difflineminus">-</span>
<a href="#l17.1436"></a><span id="l17.1436" class="difflineminus">-    Returns a new PyObject representation of that number:</span>
<a href="#l17.1437"></a><span id="l17.1437" class="difflineminus">-        PyInt, PyLong, or PyFloat.</span>
<a href="#l17.1438"></a><span id="l17.1438" class="difflineminus">-        May return other types if parse_int or parse_float are set</span>
<a href="#l17.1439"></a><span id="l17.1439" class="difflineminus">-    */</span>
<a href="#l17.1440"></a><span id="l17.1440" class="difflineminus">-    char *str = PyString_AS_STRING(pystr);</span>
<a href="#l17.1441"></a><span id="l17.1441" class="difflineminus">-    Py_ssize_t end_idx = PyString_GET_SIZE(pystr) - 1;</span>
<a href="#l17.1442"></a><span id="l17.1442" class="difflineminus">-    Py_ssize_t idx = start;</span>
<a href="#l17.1443"></a><span id="l17.1443" class="difflineminus">-    int is_float = 0;</span>
<a href="#l17.1444"></a><span id="l17.1444" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.1445"></a><span id="l17.1445" class="difflineminus">-    PyObject *numstr;</span>
<a href="#l17.1446"></a><span id="l17.1446" class="difflineminus">-</span>
<a href="#l17.1447"></a><span id="l17.1447" class="difflineminus">-    /* read a sign if it's there, make sure it's not the end of the string */</span>
<a href="#l17.1448"></a><span id="l17.1448" class="difflineminus">-    if (str[idx] == '-') {</span>
<a href="#l17.1449"></a><span id="l17.1449" class="difflineminus">-        idx++;</span>
<a href="#l17.1450"></a><span id="l17.1450" class="difflineminus">-        if (idx &gt; end_idx) {</span>
<a href="#l17.1451"></a><span id="l17.1451" class="difflineminus">-            PyErr_SetNone(PyExc_StopIteration);</span>
<a href="#l17.1452"></a><span id="l17.1452" class="difflineminus">-            return NULL;</span>
<a href="#l17.1453"></a><span id="l17.1453" class="difflineminus">-        }</span>
<a href="#l17.1454"></a><span id="l17.1454" class="difflineminus">-    }</span>
<a href="#l17.1455"></a><span id="l17.1455" class="difflineminus">-</span>
<a href="#l17.1456"></a><span id="l17.1456" class="difflineminus">-    /* read as many integer digits as we find as long as it doesn't start with 0 */</span>
<a href="#l17.1457"></a><span id="l17.1457" class="difflineminus">-    if (str[idx] &gt;= '1' &amp;&amp; str[idx] &lt;= '9') {</span>
<a href="#l17.1458"></a><span id="l17.1458" class="difflineminus">-        idx++;</span>
<a href="#l17.1459"></a><span id="l17.1459" class="difflineminus">-        while (idx &lt;= end_idx &amp;&amp; str[idx] &gt;= '0' &amp;&amp; str[idx] &lt;= '9') idx++;</span>
<a href="#l17.1460"></a><span id="l17.1460" class="difflineminus">-    }</span>
<a href="#l17.1461"></a><span id="l17.1461" class="difflineminus">-    /* if it starts with 0 we only expect one integer digit */</span>
<a href="#l17.1462"></a><span id="l17.1462" class="difflineminus">-    else if (str[idx] == '0') {</span>
<a href="#l17.1463"></a><span id="l17.1463" class="difflineminus">-        idx++;</span>
<a href="#l17.1464"></a><span id="l17.1464" class="difflineminus">-    }</span>
<a href="#l17.1465"></a><span id="l17.1465" class="difflineminus">-    /* no integer digits, error */</span>
<a href="#l17.1466"></a><span id="l17.1466" class="difflineminus">-    else {</span>
<a href="#l17.1467"></a><span id="l17.1467" class="difflineminus">-        PyErr_SetNone(PyExc_StopIteration);</span>
<a href="#l17.1468"></a><span id="l17.1468" class="difflineminus">-        return NULL;</span>
<a href="#l17.1469"></a><span id="l17.1469" class="difflineminus">-    }</span>
<a href="#l17.1470"></a><span id="l17.1470" class="difflineminus">-</span>
<a href="#l17.1471"></a><span id="l17.1471" class="difflineminus">-    /* if the next char is '.' followed by a digit then read all float digits */</span>
<a href="#l17.1472"></a><span id="l17.1472" class="difflineminus">-    if (idx &lt; end_idx &amp;&amp; str[idx] == '.' &amp;&amp; str[idx + 1] &gt;= '0' &amp;&amp; str[idx + 1] &lt;= '9') {</span>
<a href="#l17.1473"></a><span id="l17.1473" class="difflineminus">-        is_float = 1;</span>
<a href="#l17.1474"></a><span id="l17.1474" class="difflineminus">-        idx += 2;</span>
<a href="#l17.1475"></a><span id="l17.1475" class="difflineminus">-        while (idx &lt;= end_idx &amp;&amp; str[idx] &gt;= '0' &amp;&amp; str[idx] &lt;= '9') idx++;</span>
<a href="#l17.1476"></a><span id="l17.1476" class="difflineminus">-    }</span>
<a href="#l17.1477"></a><span id="l17.1477" class="difflineminus">-</span>
<a href="#l17.1478"></a><span id="l17.1478" class="difflineminus">-    /* if the next char is 'e' or 'E' then maybe read the exponent (or backtrack) */</span>
<a href="#l17.1479"></a><span id="l17.1479" class="difflineminus">-    if (idx &lt; end_idx &amp;&amp; (str[idx] == 'e' || str[idx] == 'E')) {</span>
<a href="#l17.1480"></a><span id="l17.1480" class="difflineminus">-</span>
<a href="#l17.1481"></a><span id="l17.1481" class="difflineminus">-        /* save the index of the 'e' or 'E' just in case we need to backtrack */</span>
<a href="#l17.1482"></a><span id="l17.1482" class="difflineminus">-        Py_ssize_t e_start = idx;</span>
<a href="#l17.1483"></a><span id="l17.1483" class="difflineminus">-        idx++;</span>
<a href="#l17.1484"></a><span id="l17.1484" class="difflineminus">-</span>
<a href="#l17.1485"></a><span id="l17.1485" class="difflineminus">-        /* read an exponent sign if present */</span>
<a href="#l17.1486"></a><span id="l17.1486" class="difflineminus">-        if (idx &lt; end_idx &amp;&amp; (str[idx] == '-' || str[idx] == '+')) idx++;</span>
<a href="#l17.1487"></a><span id="l17.1487" class="difflineminus">-</span>
<a href="#l17.1488"></a><span id="l17.1488" class="difflineminus">-        /* read all digits */</span>
<a href="#l17.1489"></a><span id="l17.1489" class="difflineminus">-        while (idx &lt;= end_idx &amp;&amp; str[idx] &gt;= '0' &amp;&amp; str[idx] &lt;= '9') idx++;</span>
<a href="#l17.1490"></a><span id="l17.1490" class="difflineminus">-</span>
<a href="#l17.1491"></a><span id="l17.1491" class="difflineminus">-        /* if we got a digit, then parse as float. if not, backtrack */</span>
<a href="#l17.1492"></a><span id="l17.1492" class="difflineminus">-        if (str[idx - 1] &gt;= '0' &amp;&amp; str[idx - 1] &lt;= '9') {</span>
<a href="#l17.1493"></a><span id="l17.1493" class="difflineminus">-            is_float = 1;</span>
<a href="#l17.1494"></a><span id="l17.1494" class="difflineminus">-        }</span>
<a href="#l17.1495"></a><span id="l17.1495" class="difflineminus">-        else {</span>
<a href="#l17.1496"></a><span id="l17.1496" class="difflineminus">-            idx = e_start;</span>
<a href="#l17.1497"></a><span id="l17.1497" class="difflineminus">-        }</span>
<a href="#l17.1498"></a><span id="l17.1498" class="difflineminus">-    }</span>
<a href="#l17.1499"></a><span id="l17.1499" class="difflineminus">-</span>
<a href="#l17.1500"></a><span id="l17.1500" class="difflineminus">-    /* copy the section we determined to be a number */</span>
<a href="#l17.1501"></a><span id="l17.1501" class="difflineminus">-    numstr = PyString_FromStringAndSize(&amp;str[start], idx - start);</span>
<a href="#l17.1502"></a><span id="l17.1502" class="difflineminus">-    if (numstr == NULL)</span>
<a href="#l17.1503"></a><span id="l17.1503" class="difflineminus">-        return NULL;</span>
<a href="#l17.1504"></a><span id="l17.1504" class="difflineminus">-    if (is_float) {</span>
<a href="#l17.1505"></a><span id="l17.1505" class="difflineminus">-        /* parse as a float using a fast path if available, otherwise call user defined method */</span>
<a href="#l17.1506"></a><span id="l17.1506" class="difflineminus">-        if (s-&gt;parse_float != (PyObject *)&amp;PyFloat_Type) {</span>
<a href="#l17.1507"></a><span id="l17.1507" class="difflineminus">-            rval = PyObject_CallFunctionObjArgs(s-&gt;parse_float, numstr, NULL);</span>
<a href="#l17.1508"></a><span id="l17.1508" class="difflineminus">-        }</span>
<a href="#l17.1509"></a><span id="l17.1509" class="difflineminus">-        else {</span>
<a href="#l17.1510"></a><span id="l17.1510" class="difflineminus">-            /* rval = PyFloat_FromDouble(PyOS_ascii_atof(PyString_AS_STRING(numstr))); */</span>
<a href="#l17.1511"></a><span id="l17.1511" class="difflineminus">-            double d = PyOS_string_to_double(PyString_AS_STRING(numstr),</span>
<a href="#l17.1512"></a><span id="l17.1512" class="difflineminus">-                                             NULL, NULL);</span>
<a href="#l17.1513"></a><span id="l17.1513" class="difflineminus">-            if (d == -1.0 &amp;&amp; PyErr_Occurred())</span>
<a href="#l17.1514"></a><span id="l17.1514" class="difflineminus">-                return NULL;</span>
<a href="#l17.1515"></a><span id="l17.1515" class="difflineminus">-            rval = PyFloat_FromDouble(d);</span>
<a href="#l17.1516"></a><span id="l17.1516" class="difflineminus">-        }</span>
<a href="#l17.1517"></a><span id="l17.1517" class="difflineminus">-    }</span>
<a href="#l17.1518"></a><span id="l17.1518" class="difflineminus">-    else {</span>
<a href="#l17.1519"></a><span id="l17.1519" class="difflineminus">-        /* parse as an int using a fast path if available, otherwise call user defined method */</span>
<a href="#l17.1520"></a><span id="l17.1520" class="difflineminus">-        if (s-&gt;parse_int != (PyObject *)&amp;PyInt_Type) {</span>
<a href="#l17.1521"></a><span id="l17.1521" class="difflineminus">-            rval = PyObject_CallFunctionObjArgs(s-&gt;parse_int, numstr, NULL);</span>
<a href="#l17.1522"></a><span id="l17.1522" class="difflineminus">-        }</span>
<a href="#l17.1523"></a><span id="l17.1523" class="difflineminus">-        else {</span>
<a href="#l17.1524"></a><span id="l17.1524" class="difflineminus">-            rval = PyInt_FromString(PyString_AS_STRING(numstr), NULL, 10);</span>
<a href="#l17.1525"></a><span id="l17.1525" class="difflineminus">-        }</span>
<a href="#l17.1526"></a><span id="l17.1526" class="difflineminus">-    }</span>
<a href="#l17.1527"></a><span id="l17.1527" class="difflineminus">-    Py_DECREF(numstr);</span>
<a href="#l17.1528"></a><span id="l17.1528" class="difflineminus">-    *next_idx_ptr = idx;</span>
<a href="#l17.1529"></a><span id="l17.1529" class="difflineminus">-    return rval;</span>
<a href="#l17.1530"></a><span id="l17.1530" class="difflineminus">-}</span>
<a href="#l17.1531"></a><span id="l17.1531" class="difflineminus">-</span>
<a href="#l17.1532"></a><span id="l17.1532" class="difflineminus">-static PyObject *</span>
<a href="#l17.1533"></a><span id="l17.1533" class="difflineminus">-_match_number_unicode(PyScannerObject *s, PyObject *pystr, Py_ssize_t start, Py_ssize_t *next_idx_ptr) {</span>
<a href="#l17.1534"></a><span id="l17.1534" class="difflineminus">-    /* Read a JSON number from PyUnicode pystr.</span>
<a href="#l17.1535"></a><span id="l17.1535" class="difflineminus">-    idx is the index of the first character of the number</span>
<a href="#l17.1536"></a><span id="l17.1536" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1537"></a><span id="l17.1537" class="difflineminus">-        the number.</span>
<a href="#l17.1538"></a><span id="l17.1538" class="difflineminus">-</span>
<a href="#l17.1539"></a><span id="l17.1539" class="difflineminus">-    Returns a new PyObject representation of that number:</span>
<a href="#l17.1540"></a><span id="l17.1540" class="difflineminus">-        PyInt, PyLong, or PyFloat.</span>
<a href="#l17.1541"></a><span id="l17.1541" class="difflineminus">-        May return other types if parse_int or parse_float are set</span>
<a href="#l17.1542"></a><span id="l17.1542" class="difflineminus">-    */</span>
<a href="#l17.1543"></a><span id="l17.1543" class="difflineminus">-    Py_UNICODE *str = PyUnicode_AS_UNICODE(pystr);</span>
<a href="#l17.1544"></a><span id="l17.1544" class="difflineminus">-    Py_ssize_t end_idx = PyUnicode_GET_SIZE(pystr) - 1;</span>
<a href="#l17.1545"></a><span id="l17.1545" class="difflineminus">-    Py_ssize_t idx = start;</span>
<a href="#l17.1546"></a><span id="l17.1546" class="difflineminus">-    int is_float = 0;</span>
<a href="#l17.1547"></a><span id="l17.1547" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.1548"></a><span id="l17.1548" class="difflineminus">-    PyObject *numstr;</span>
<a href="#l17.1549"></a><span id="l17.1549" class="difflineminus">-</span>
<a href="#l17.1550"></a><span id="l17.1550" class="difflineminus">-    /* read a sign if it's there, make sure it's not the end of the string */</span>
<a href="#l17.1551"></a><span id="l17.1551" class="difflineminus">-    if (str[idx] == '-') {</span>
<a href="#l17.1552"></a><span id="l17.1552" class="difflineminus">-        idx++;</span>
<a href="#l17.1553"></a><span id="l17.1553" class="difflineminus">-        if (idx &gt; end_idx) {</span>
<a href="#l17.1554"></a><span id="l17.1554" class="difflineminus">-            PyErr_SetNone(PyExc_StopIteration);</span>
<a href="#l17.1555"></a><span id="l17.1555" class="difflineminus">-            return NULL;</span>
<a href="#l17.1556"></a><span id="l17.1556" class="difflineminus">-        }</span>
<a href="#l17.1557"></a><span id="l17.1557" class="difflineminus">-    }</span>
<a href="#l17.1558"></a><span id="l17.1558" class="difflineminus">-</span>
<a href="#l17.1559"></a><span id="l17.1559" class="difflineminus">-    /* read as many integer digits as we find as long as it doesn't start with 0 */</span>
<a href="#l17.1560"></a><span id="l17.1560" class="difflineminus">-    if (str[idx] &gt;= '1' &amp;&amp; str[idx] &lt;= '9') {</span>
<a href="#l17.1561"></a><span id="l17.1561" class="difflineminus">-        idx++;</span>
<a href="#l17.1562"></a><span id="l17.1562" class="difflineminus">-        while (idx &lt;= end_idx &amp;&amp; str[idx] &gt;= '0' &amp;&amp; str[idx] &lt;= '9') idx++;</span>
<a href="#l17.1563"></a><span id="l17.1563" class="difflineminus">-    }</span>
<a href="#l17.1564"></a><span id="l17.1564" class="difflineminus">-    /* if it starts with 0 we only expect one integer digit */</span>
<a href="#l17.1565"></a><span id="l17.1565" class="difflineminus">-    else if (str[idx] == '0') {</span>
<a href="#l17.1566"></a><span id="l17.1566" class="difflineminus">-        idx++;</span>
<a href="#l17.1567"></a><span id="l17.1567" class="difflineminus">-    }</span>
<a href="#l17.1568"></a><span id="l17.1568" class="difflineminus">-    /* no integer digits, error */</span>
<a href="#l17.1569"></a><span id="l17.1569" class="difflineminus">-    else {</span>
<a href="#l17.1570"></a><span id="l17.1570" class="difflineminus">-        PyErr_SetNone(PyExc_StopIteration);</span>
<a href="#l17.1571"></a><span id="l17.1571" class="difflineminus">-        return NULL;</span>
<a href="#l17.1572"></a><span id="l17.1572" class="difflineminus">-    }</span>
<a href="#l17.1573"></a><span id="l17.1573" class="difflineminus">-</span>
<a href="#l17.1574"></a><span id="l17.1574" class="difflineminus">-    /* if the next char is '.' followed by a digit then read all float digits */</span>
<a href="#l17.1575"></a><span id="l17.1575" class="difflineminus">-    if (idx &lt; end_idx &amp;&amp; str[idx] == '.' &amp;&amp; str[idx + 1] &gt;= '0' &amp;&amp; str[idx + 1] &lt;= '9') {</span>
<a href="#l17.1576"></a><span id="l17.1576" class="difflineminus">-        is_float = 1;</span>
<a href="#l17.1577"></a><span id="l17.1577" class="difflineminus">-        idx += 2;</span>
<a href="#l17.1578"></a><span id="l17.1578" class="difflineminus">-        while (idx &lt;= end_idx &amp;&amp; str[idx] &gt;= '0' &amp;&amp; str[idx] &lt;= '9') idx++;</span>
<a href="#l17.1579"></a><span id="l17.1579" class="difflineminus">-    }</span>
<a href="#l17.1580"></a><span id="l17.1580" class="difflineminus">-</span>
<a href="#l17.1581"></a><span id="l17.1581" class="difflineminus">-    /* if the next char is 'e' or 'E' then maybe read the exponent (or backtrack) */</span>
<a href="#l17.1582"></a><span id="l17.1582" class="difflineminus">-    if (idx &lt; end_idx &amp;&amp; (str[idx] == 'e' || str[idx] == 'E')) {</span>
<a href="#l17.1583"></a><span id="l17.1583" class="difflineminus">-        Py_ssize_t e_start = idx;</span>
<a href="#l17.1584"></a><span id="l17.1584" class="difflineminus">-        idx++;</span>
<a href="#l17.1585"></a><span id="l17.1585" class="difflineminus">-</span>
<a href="#l17.1586"></a><span id="l17.1586" class="difflineminus">-        /* read an exponent sign if present */</span>
<a href="#l17.1587"></a><span id="l17.1587" class="difflineminus">-        if (idx &lt; end_idx &amp;&amp; (str[idx] == '-' || str[idx] == '+')) idx++;</span>
<a href="#l17.1588"></a><span id="l17.1588" class="difflineminus">-</span>
<a href="#l17.1589"></a><span id="l17.1589" class="difflineminus">-        /* read all digits */</span>
<a href="#l17.1590"></a><span id="l17.1590" class="difflineminus">-        while (idx &lt;= end_idx &amp;&amp; str[idx] &gt;= '0' &amp;&amp; str[idx] &lt;= '9') idx++;</span>
<a href="#l17.1591"></a><span id="l17.1591" class="difflineminus">-</span>
<a href="#l17.1592"></a><span id="l17.1592" class="difflineminus">-        /* if we got a digit, then parse as float. if not, backtrack */</span>
<a href="#l17.1593"></a><span id="l17.1593" class="difflineminus">-        if (str[idx - 1] &gt;= '0' &amp;&amp; str[idx - 1] &lt;= '9') {</span>
<a href="#l17.1594"></a><span id="l17.1594" class="difflineminus">-            is_float = 1;</span>
<a href="#l17.1595"></a><span id="l17.1595" class="difflineminus">-        }</span>
<a href="#l17.1596"></a><span id="l17.1596" class="difflineminus">-        else {</span>
<a href="#l17.1597"></a><span id="l17.1597" class="difflineminus">-            idx = e_start;</span>
<a href="#l17.1598"></a><span id="l17.1598" class="difflineminus">-        }</span>
<a href="#l17.1599"></a><span id="l17.1599" class="difflineminus">-    }</span>
<a href="#l17.1600"></a><span id="l17.1600" class="difflineminus">-</span>
<a href="#l17.1601"></a><span id="l17.1601" class="difflineminus">-    /* copy the section we determined to be a number */</span>
<a href="#l17.1602"></a><span id="l17.1602" class="difflineminus">-    numstr = PyUnicode_FromUnicode(&amp;str[start], idx - start);</span>
<a href="#l17.1603"></a><span id="l17.1603" class="difflineminus">-    if (numstr == NULL)</span>
<a href="#l17.1604"></a><span id="l17.1604" class="difflineminus">-        return NULL;</span>
<a href="#l17.1605"></a><span id="l17.1605" class="difflineminus">-    if (is_float) {</span>
<a href="#l17.1606"></a><span id="l17.1606" class="difflineminus">-        /* parse as a float using a fast path if available, otherwise call user defined method */</span>
<a href="#l17.1607"></a><span id="l17.1607" class="difflineminus">-        if (s-&gt;parse_float != (PyObject *)&amp;PyFloat_Type) {</span>
<a href="#l17.1608"></a><span id="l17.1608" class="difflineminus">-            rval = PyObject_CallFunctionObjArgs(s-&gt;parse_float, numstr, NULL);</span>
<a href="#l17.1609"></a><span id="l17.1609" class="difflineminus">-        }</span>
<a href="#l17.1610"></a><span id="l17.1610" class="difflineminus">-        else {</span>
<a href="#l17.1611"></a><span id="l17.1611" class="difflineminus">-            rval = PyFloat_FromString(numstr, NULL);</span>
<a href="#l17.1612"></a><span id="l17.1612" class="difflineminus">-        }</span>
<a href="#l17.1613"></a><span id="l17.1613" class="difflineminus">-    }</span>
<a href="#l17.1614"></a><span id="l17.1614" class="difflineminus">-    else {</span>
<a href="#l17.1615"></a><span id="l17.1615" class="difflineminus">-        /* no fast path for unicode -&gt; int, just call */</span>
<a href="#l17.1616"></a><span id="l17.1616" class="difflineminus">-        rval = PyObject_CallFunctionObjArgs(s-&gt;parse_int, numstr, NULL);</span>
<a href="#l17.1617"></a><span id="l17.1617" class="difflineminus">-    }</span>
<a href="#l17.1618"></a><span id="l17.1618" class="difflineminus">-    Py_DECREF(numstr);</span>
<a href="#l17.1619"></a><span id="l17.1619" class="difflineminus">-    *next_idx_ptr = idx;</span>
<a href="#l17.1620"></a><span id="l17.1620" class="difflineminus">-    return rval;</span>
<a href="#l17.1621"></a><span id="l17.1621" class="difflineminus">-}</span>
<a href="#l17.1622"></a><span id="l17.1622" class="difflineminus">-</span>
<a href="#l17.1623"></a><span id="l17.1623" class="difflineminus">-static PyObject *</span>
<a href="#l17.1624"></a><span id="l17.1624" class="difflineminus">-scan_once_str(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr)</span>
<a href="#l17.1625"></a><span id="l17.1625" class="difflineminus">-{</span>
<a href="#l17.1626"></a><span id="l17.1626" class="difflineminus">-    /* Read one JSON term (of any kind) from PyString pystr.</span>
<a href="#l17.1627"></a><span id="l17.1627" class="difflineminus">-    idx is the index of the first character of the term</span>
<a href="#l17.1628"></a><span id="l17.1628" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1629"></a><span id="l17.1629" class="difflineminus">-        the number.</span>
<a href="#l17.1630"></a><span id="l17.1630" class="difflineminus">-</span>
<a href="#l17.1631"></a><span id="l17.1631" class="difflineminus">-    Returns a new PyObject representation of the term.</span>
<a href="#l17.1632"></a><span id="l17.1632" class="difflineminus">-    */</span>
<a href="#l17.1633"></a><span id="l17.1633" class="difflineminus">-    char *str = PyString_AS_STRING(pystr);</span>
<a href="#l17.1634"></a><span id="l17.1634" class="difflineminus">-    Py_ssize_t length = PyString_GET_SIZE(pystr);</span>
<a href="#l17.1635"></a><span id="l17.1635" class="difflineminus">-    PyObject *rval = NULL;</span>
<a href="#l17.1636"></a><span id="l17.1636" class="difflineminus">-    int fallthrough = 0;</span>
<a href="#l17.1637"></a><span id="l17.1637" class="difflineminus">-    if (idx &gt;= length) {</span>
<a href="#l17.1638"></a><span id="l17.1638" class="difflineminus">-        PyErr_SetNone(PyExc_StopIteration);</span>
<a href="#l17.1639"></a><span id="l17.1639" class="difflineminus">-        return NULL;</span>
<a href="#l17.1640"></a><span id="l17.1640" class="difflineminus">-    }</span>
<a href="#l17.1641"></a><span id="l17.1641" class="difflineminus">-    if (Py_EnterRecursiveCall(&quot; while decoding a JSON document&quot;))</span>
<a href="#l17.1642"></a><span id="l17.1642" class="difflineminus">-        return NULL;</span>
<a href="#l17.1643"></a><span id="l17.1643" class="difflineminus">-    switch (str[idx]) {</span>
<a href="#l17.1644"></a><span id="l17.1644" class="difflineminus">-        case '&quot;':</span>
<a href="#l17.1645"></a><span id="l17.1645" class="difflineminus">-            /* string */</span>
<a href="#l17.1646"></a><span id="l17.1646" class="difflineminus">-            rval = scanstring_str(pystr, idx + 1,</span>
<a href="#l17.1647"></a><span id="l17.1647" class="difflineminus">-                PyString_AS_STRING(s-&gt;encoding),</span>
<a href="#l17.1648"></a><span id="l17.1648" class="difflineminus">-                PyObject_IsTrue(s-&gt;strict),</span>
<a href="#l17.1649"></a><span id="l17.1649" class="difflineminus">-                next_idx_ptr);</span>
<a href="#l17.1650"></a><span id="l17.1650" class="difflineminus">-            break;</span>
<a href="#l17.1651"></a><span id="l17.1651" class="difflineminus">-        case '{':</span>
<a href="#l17.1652"></a><span id="l17.1652" class="difflineminus">-            /* object */</span>
<a href="#l17.1653"></a><span id="l17.1653" class="difflineminus">-            rval = _parse_object_str(s, pystr, idx + 1, next_idx_ptr);</span>
<a href="#l17.1654"></a><span id="l17.1654" class="difflineminus">-            break;</span>
<a href="#l17.1655"></a><span id="l17.1655" class="difflineminus">-        case '[':</span>
<a href="#l17.1656"></a><span id="l17.1656" class="difflineminus">-            /* array */</span>
<a href="#l17.1657"></a><span id="l17.1657" class="difflineminus">-            rval = _parse_array_str(s, pystr, idx + 1, next_idx_ptr);</span>
<a href="#l17.1658"></a><span id="l17.1658" class="difflineminus">-            break;</span>
<a href="#l17.1659"></a><span id="l17.1659" class="difflineminus">-        case 'n':</span>
<a href="#l17.1660"></a><span id="l17.1660" class="difflineminus">-            /* null */</span>
<a href="#l17.1661"></a><span id="l17.1661" class="difflineminus">-            if ((idx + 3 &lt; length) &amp;&amp; str[idx + 1] == 'u' &amp;&amp; str[idx + 2] == 'l' &amp;&amp; str[idx + 3] == 'l') {</span>
<a href="#l17.1662"></a><span id="l17.1662" class="difflineminus">-                Py_INCREF(Py_None);</span>
<a href="#l17.1663"></a><span id="l17.1663" class="difflineminus">-                *next_idx_ptr = idx + 4;</span>
<a href="#l17.1664"></a><span id="l17.1664" class="difflineminus">-                rval = Py_None;</span>
<a href="#l17.1665"></a><span id="l17.1665" class="difflineminus">-            }</span>
<a href="#l17.1666"></a><span id="l17.1666" class="difflineminus">-            else</span>
<a href="#l17.1667"></a><span id="l17.1667" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1668"></a><span id="l17.1668" class="difflineminus">-            break;</span>
<a href="#l17.1669"></a><span id="l17.1669" class="difflineminus">-        case 't':</span>
<a href="#l17.1670"></a><span id="l17.1670" class="difflineminus">-            /* true */</span>
<a href="#l17.1671"></a><span id="l17.1671" class="difflineminus">-            if ((idx + 3 &lt; length) &amp;&amp; str[idx + 1] == 'r' &amp;&amp; str[idx + 2] == 'u' &amp;&amp; str[idx + 3] == 'e') {</span>
<a href="#l17.1672"></a><span id="l17.1672" class="difflineminus">-                Py_INCREF(Py_True);</span>
<a href="#l17.1673"></a><span id="l17.1673" class="difflineminus">-                *next_idx_ptr = idx + 4;</span>
<a href="#l17.1674"></a><span id="l17.1674" class="difflineminus">-                rval = Py_True;</span>
<a href="#l17.1675"></a><span id="l17.1675" class="difflineminus">-            }</span>
<a href="#l17.1676"></a><span id="l17.1676" class="difflineminus">-            else</span>
<a href="#l17.1677"></a><span id="l17.1677" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1678"></a><span id="l17.1678" class="difflineminus">-            break;</span>
<a href="#l17.1679"></a><span id="l17.1679" class="difflineminus">-        case 'f':</span>
<a href="#l17.1680"></a><span id="l17.1680" class="difflineminus">-            /* false */</span>
<a href="#l17.1681"></a><span id="l17.1681" class="difflineminus">-            if ((idx + 4 &lt; length) &amp;&amp; str[idx + 1] == 'a' &amp;&amp; str[idx + 2] == 'l' &amp;&amp; str[idx + 3] == 's' &amp;&amp; str[idx + 4] == 'e') {</span>
<a href="#l17.1682"></a><span id="l17.1682" class="difflineminus">-                Py_INCREF(Py_False);</span>
<a href="#l17.1683"></a><span id="l17.1683" class="difflineminus">-                *next_idx_ptr = idx + 5;</span>
<a href="#l17.1684"></a><span id="l17.1684" class="difflineminus">-                rval = Py_False;</span>
<a href="#l17.1685"></a><span id="l17.1685" class="difflineminus">-            }</span>
<a href="#l17.1686"></a><span id="l17.1686" class="difflineminus">-            else</span>
<a href="#l17.1687"></a><span id="l17.1687" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1688"></a><span id="l17.1688" class="difflineminus">-            break;</span>
<a href="#l17.1689"></a><span id="l17.1689" class="difflineminus">-        case 'N':</span>
<a href="#l17.1690"></a><span id="l17.1690" class="difflineminus">-            /* NaN */</span>
<a href="#l17.1691"></a><span id="l17.1691" class="difflineminus">-            if ((idx + 2 &lt; length) &amp;&amp; str[idx + 1] == 'a' &amp;&amp; str[idx + 2] == 'N') {</span>
<a href="#l17.1692"></a><span id="l17.1692" class="difflineminus">-                rval = _parse_constant(s, &quot;NaN&quot;, idx, next_idx_ptr);</span>
<a href="#l17.1693"></a><span id="l17.1693" class="difflineminus">-            }</span>
<a href="#l17.1694"></a><span id="l17.1694" class="difflineminus">-            else</span>
<a href="#l17.1695"></a><span id="l17.1695" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1696"></a><span id="l17.1696" class="difflineminus">-            break;</span>
<a href="#l17.1697"></a><span id="l17.1697" class="difflineminus">-        case 'I':</span>
<a href="#l17.1698"></a><span id="l17.1698" class="difflineminus">-            /* Infinity */</span>
<a href="#l17.1699"></a><span id="l17.1699" class="difflineminus">-            if ((idx + 7 &lt; length) &amp;&amp; str[idx + 1] == 'n' &amp;&amp; str[idx + 2] == 'f' &amp;&amp; str[idx + 3] == 'i' &amp;&amp; str[idx + 4] == 'n' &amp;&amp; str[idx + 5] == 'i' &amp;&amp; str[idx + 6] == 't' &amp;&amp; str[idx + 7] == 'y') {</span>
<a href="#l17.1700"></a><span id="l17.1700" class="difflineminus">-                rval = _parse_constant(s, &quot;Infinity&quot;, idx, next_idx_ptr);</span>
<a href="#l17.1701"></a><span id="l17.1701" class="difflineminus">-            }</span>
<a href="#l17.1702"></a><span id="l17.1702" class="difflineminus">-            else</span>
<a href="#l17.1703"></a><span id="l17.1703" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1704"></a><span id="l17.1704" class="difflineminus">-            break;</span>
<a href="#l17.1705"></a><span id="l17.1705" class="difflineminus">-        case '-':</span>
<a href="#l17.1706"></a><span id="l17.1706" class="difflineminus">-            /* -Infinity */</span>
<a href="#l17.1707"></a><span id="l17.1707" class="difflineminus">-            if ((idx + 8 &lt; length) &amp;&amp; str[idx + 1] == 'I' &amp;&amp; str[idx + 2] == 'n' &amp;&amp; str[idx + 3] == 'f' &amp;&amp; str[idx + 4] == 'i' &amp;&amp; str[idx + 5] == 'n' &amp;&amp; str[idx + 6] == 'i' &amp;&amp; str[idx + 7] == 't' &amp;&amp; str[idx + 8] == 'y') {</span>
<a href="#l17.1708"></a><span id="l17.1708" class="difflineminus">-                rval = _parse_constant(s, &quot;-Infinity&quot;, idx, next_idx_ptr);</span>
<a href="#l17.1709"></a><span id="l17.1709" class="difflineminus">-            }</span>
<a href="#l17.1710"></a><span id="l17.1710" class="difflineminus">-            else</span>
<a href="#l17.1711"></a><span id="l17.1711" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1712"></a><span id="l17.1712" class="difflineminus">-            break;</span>
<a href="#l17.1713"></a><span id="l17.1713" class="difflineminus">-        default:</span>
<a href="#l17.1714"></a><span id="l17.1714" class="difflineminus">-            fallthrough = 1;</span>
<a href="#l17.1715"></a><span id="l17.1715" class="difflineminus">-    }</span>
<a href="#l17.1716"></a><span id="l17.1716" class="difflineminus">-    /* Didn't find a string, object, array, or named constant. Look for a number. */</span>
<a href="#l17.1717"></a><span id="l17.1717" class="difflineminus">-    if (fallthrough)</span>
<a href="#l17.1718"></a><span id="l17.1718" class="difflineminus">-        rval = _match_number_str(s, pystr, idx, next_idx_ptr);</span>
<a href="#l17.1719"></a><span id="l17.1719" class="difflineminus">-    Py_LeaveRecursiveCall();</span>
<a href="#l17.1720"></a><span id="l17.1720" class="difflineminus">-    return rval;</span>
<a href="#l17.1721"></a><span id="l17.1721" class="difflineminus">-}</span>
<a href="#l17.1722"></a><span id="l17.1722" class="difflineminus">-</span>
<a href="#l17.1723"></a><span id="l17.1723" class="difflineminus">-static PyObject *</span>
<a href="#l17.1724"></a><span id="l17.1724" class="difflineminus">-scan_once_unicode(PyScannerObject *s, PyObject *pystr, Py_ssize_t idx, Py_ssize_t *next_idx_ptr)</span>
<a href="#l17.1725"></a><span id="l17.1725" class="difflineminus">-{</span>
<a href="#l17.1726"></a><span id="l17.1726" class="difflineminus">-    /* Read one JSON term (of any kind) from PyUnicode pystr.</span>
<a href="#l17.1727"></a><span id="l17.1727" class="difflineminus">-    idx is the index of the first character of the term</span>
<a href="#l17.1728"></a><span id="l17.1728" class="difflineminus">-    *next_idx_ptr is a return-by-reference index to the first character after</span>
<a href="#l17.1729"></a><span id="l17.1729" class="difflineminus">-        the number.</span>
<a href="#l17.1730"></a><span id="l17.1730" class="difflineminus">-</span>
<a href="#l17.1731"></a><span id="l17.1731" class="difflineminus">-    Returns a new PyObject representation of the term.</span>
<a href="#l17.1732"></a><span id="l17.1732" class="difflineminus">-    */</span>
<a href="#l17.1733"></a><span id="l17.1733" class="difflineminus">-    Py_UNICODE *str = PyUnicode_AS_UNICODE(pystr);</span>
<a href="#l17.1734"></a><span id="l17.1734" class="difflineminus">-    Py_ssize_t length = PyUnicode_GET_SIZE(pystr);</span>
<a href="#l17.1735"></a><span id="l17.1735" class="difflineminus">-    PyObject *rval = NULL;</span>
<a href="#l17.1736"></a><span id="l17.1736" class="difflineminus">-    int fallthrough = 0;</span>
<a href="#l17.1737"></a><span id="l17.1737" class="difflineminus">-    if (idx &gt;= length) {</span>
<a href="#l17.1738"></a><span id="l17.1738" class="difflineminus">-        PyErr_SetNone(PyExc_StopIteration);</span>
<a href="#l17.1739"></a><span id="l17.1739" class="difflineminus">-        return NULL;</span>
<a href="#l17.1740"></a><span id="l17.1740" class="difflineminus">-    }</span>
<a href="#l17.1741"></a><span id="l17.1741" class="difflineminus">-    if (Py_EnterRecursiveCall(&quot; while decoding a JSON document&quot;))</span>
<a href="#l17.1742"></a><span id="l17.1742" class="difflineminus">-        return NULL;</span>
<a href="#l17.1743"></a><span id="l17.1743" class="difflineminus">-    switch (str[idx]) {</span>
<a href="#l17.1744"></a><span id="l17.1744" class="difflineminus">-        case '&quot;':</span>
<a href="#l17.1745"></a><span id="l17.1745" class="difflineminus">-            /* string */</span>
<a href="#l17.1746"></a><span id="l17.1746" class="difflineminus">-            rval = scanstring_unicode(pystr, idx + 1,</span>
<a href="#l17.1747"></a><span id="l17.1747" class="difflineminus">-                PyObject_IsTrue(s-&gt;strict),</span>
<a href="#l17.1748"></a><span id="l17.1748" class="difflineminus">-                next_idx_ptr);</span>
<a href="#l17.1749"></a><span id="l17.1749" class="difflineminus">-            break;</span>
<a href="#l17.1750"></a><span id="l17.1750" class="difflineminus">-        case '{':</span>
<a href="#l17.1751"></a><span id="l17.1751" class="difflineminus">-            /* object */</span>
<a href="#l17.1752"></a><span id="l17.1752" class="difflineminus">-            rval = _parse_object_unicode(s, pystr, idx + 1, next_idx_ptr);</span>
<a href="#l17.1753"></a><span id="l17.1753" class="difflineminus">-            break;</span>
<a href="#l17.1754"></a><span id="l17.1754" class="difflineminus">-        case '[':</span>
<a href="#l17.1755"></a><span id="l17.1755" class="difflineminus">-            /* array */</span>
<a href="#l17.1756"></a><span id="l17.1756" class="difflineminus">-            rval = _parse_array_unicode(s, pystr, idx + 1, next_idx_ptr);</span>
<a href="#l17.1757"></a><span id="l17.1757" class="difflineminus">-            break;</span>
<a href="#l17.1758"></a><span id="l17.1758" class="difflineminus">-        case 'n':</span>
<a href="#l17.1759"></a><span id="l17.1759" class="difflineminus">-            /* null */</span>
<a href="#l17.1760"></a><span id="l17.1760" class="difflineminus">-            if ((idx + 3 &lt; length) &amp;&amp; str[idx + 1] == 'u' &amp;&amp; str[idx + 2] == 'l' &amp;&amp; str[idx + 3] == 'l') {</span>
<a href="#l17.1761"></a><span id="l17.1761" class="difflineminus">-                Py_INCREF(Py_None);</span>
<a href="#l17.1762"></a><span id="l17.1762" class="difflineminus">-                *next_idx_ptr = idx + 4;</span>
<a href="#l17.1763"></a><span id="l17.1763" class="difflineminus">-                rval = Py_None;</span>
<a href="#l17.1764"></a><span id="l17.1764" class="difflineminus">-            }</span>
<a href="#l17.1765"></a><span id="l17.1765" class="difflineminus">-            else</span>
<a href="#l17.1766"></a><span id="l17.1766" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1767"></a><span id="l17.1767" class="difflineminus">-            break;</span>
<a href="#l17.1768"></a><span id="l17.1768" class="difflineminus">-        case 't':</span>
<a href="#l17.1769"></a><span id="l17.1769" class="difflineminus">-            /* true */</span>
<a href="#l17.1770"></a><span id="l17.1770" class="difflineminus">-            if ((idx + 3 &lt; length) &amp;&amp; str[idx + 1] == 'r' &amp;&amp; str[idx + 2] == 'u' &amp;&amp; str[idx + 3] == 'e') {</span>
<a href="#l17.1771"></a><span id="l17.1771" class="difflineminus">-                Py_INCREF(Py_True);</span>
<a href="#l17.1772"></a><span id="l17.1772" class="difflineminus">-                *next_idx_ptr = idx + 4;</span>
<a href="#l17.1773"></a><span id="l17.1773" class="difflineminus">-                rval = Py_True;</span>
<a href="#l17.1774"></a><span id="l17.1774" class="difflineminus">-            }</span>
<a href="#l17.1775"></a><span id="l17.1775" class="difflineminus">-            else</span>
<a href="#l17.1776"></a><span id="l17.1776" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1777"></a><span id="l17.1777" class="difflineminus">-            break;</span>
<a href="#l17.1778"></a><span id="l17.1778" class="difflineminus">-        case 'f':</span>
<a href="#l17.1779"></a><span id="l17.1779" class="difflineminus">-            /* false */</span>
<a href="#l17.1780"></a><span id="l17.1780" class="difflineminus">-            if ((idx + 4 &lt; length) &amp;&amp; str[idx + 1] == 'a' &amp;&amp; str[idx + 2] == 'l' &amp;&amp; str[idx + 3] == 's' &amp;&amp; str[idx + 4] == 'e') {</span>
<a href="#l17.1781"></a><span id="l17.1781" class="difflineminus">-                Py_INCREF(Py_False);</span>
<a href="#l17.1782"></a><span id="l17.1782" class="difflineminus">-                *next_idx_ptr = idx + 5;</span>
<a href="#l17.1783"></a><span id="l17.1783" class="difflineminus">-                rval = Py_False;</span>
<a href="#l17.1784"></a><span id="l17.1784" class="difflineminus">-            }</span>
<a href="#l17.1785"></a><span id="l17.1785" class="difflineminus">-            else</span>
<a href="#l17.1786"></a><span id="l17.1786" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1787"></a><span id="l17.1787" class="difflineminus">-            break;</span>
<a href="#l17.1788"></a><span id="l17.1788" class="difflineminus">-        case 'N':</span>
<a href="#l17.1789"></a><span id="l17.1789" class="difflineminus">-            /* NaN */</span>
<a href="#l17.1790"></a><span id="l17.1790" class="difflineminus">-            if ((idx + 2 &lt; length) &amp;&amp; str[idx + 1] == 'a' &amp;&amp; str[idx + 2] == 'N') {</span>
<a href="#l17.1791"></a><span id="l17.1791" class="difflineminus">-                rval = _parse_constant(s, &quot;NaN&quot;, idx, next_idx_ptr);</span>
<a href="#l17.1792"></a><span id="l17.1792" class="difflineminus">-            }</span>
<a href="#l17.1793"></a><span id="l17.1793" class="difflineminus">-            else</span>
<a href="#l17.1794"></a><span id="l17.1794" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1795"></a><span id="l17.1795" class="difflineminus">-            break;</span>
<a href="#l17.1796"></a><span id="l17.1796" class="difflineminus">-        case 'I':</span>
<a href="#l17.1797"></a><span id="l17.1797" class="difflineminus">-            /* Infinity */</span>
<a href="#l17.1798"></a><span id="l17.1798" class="difflineminus">-            if ((idx + 7 &lt; length) &amp;&amp; str[idx + 1] == 'n' &amp;&amp; str[idx + 2] == 'f' &amp;&amp; str[idx + 3] == 'i' &amp;&amp; str[idx + 4] == 'n' &amp;&amp; str[idx + 5] == 'i' &amp;&amp; str[idx + 6] == 't' &amp;&amp; str[idx + 7] == 'y') {</span>
<a href="#l17.1799"></a><span id="l17.1799" class="difflineminus">-                rval = _parse_constant(s, &quot;Infinity&quot;, idx, next_idx_ptr);</span>
<a href="#l17.1800"></a><span id="l17.1800" class="difflineminus">-            }</span>
<a href="#l17.1801"></a><span id="l17.1801" class="difflineminus">-            else</span>
<a href="#l17.1802"></a><span id="l17.1802" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1803"></a><span id="l17.1803" class="difflineminus">-            break;</span>
<a href="#l17.1804"></a><span id="l17.1804" class="difflineminus">-        case '-':</span>
<a href="#l17.1805"></a><span id="l17.1805" class="difflineminus">-            /* -Infinity */</span>
<a href="#l17.1806"></a><span id="l17.1806" class="difflineminus">-            if ((idx + 8 &lt; length) &amp;&amp; str[idx + 1] == 'I' &amp;&amp; str[idx + 2] == 'n' &amp;&amp; str[idx + 3] == 'f' &amp;&amp; str[idx + 4] == 'i' &amp;&amp; str[idx + 5] == 'n' &amp;&amp; str[idx + 6] == 'i' &amp;&amp; str[idx + 7] == 't' &amp;&amp; str[idx + 8] == 'y') {</span>
<a href="#l17.1807"></a><span id="l17.1807" class="difflineminus">-                rval = _parse_constant(s, &quot;-Infinity&quot;, idx, next_idx_ptr);</span>
<a href="#l17.1808"></a><span id="l17.1808" class="difflineminus">-            }</span>
<a href="#l17.1809"></a><span id="l17.1809" class="difflineminus">-            else</span>
<a href="#l17.1810"></a><span id="l17.1810" class="difflineminus">-                fallthrough = 1;</span>
<a href="#l17.1811"></a><span id="l17.1811" class="difflineminus">-            break;</span>
<a href="#l17.1812"></a><span id="l17.1812" class="difflineminus">-        default:</span>
<a href="#l17.1813"></a><span id="l17.1813" class="difflineminus">-            fallthrough = 1;</span>
<a href="#l17.1814"></a><span id="l17.1814" class="difflineminus">-    }</span>
<a href="#l17.1815"></a><span id="l17.1815" class="difflineminus">-    /* Didn't find a string, object, array, or named constant. Look for a number. */</span>
<a href="#l17.1816"></a><span id="l17.1816" class="difflineminus">-    if (fallthrough)</span>
<a href="#l17.1817"></a><span id="l17.1817" class="difflineminus">-        rval = _match_number_unicode(s, pystr, idx, next_idx_ptr);</span>
<a href="#l17.1818"></a><span id="l17.1818" class="difflineminus">-    Py_LeaveRecursiveCall();</span>
<a href="#l17.1819"></a><span id="l17.1819" class="difflineminus">-    return rval;</span>
<a href="#l17.1820"></a><span id="l17.1820" class="difflineminus">-}</span>
<a href="#l17.1821"></a><span id="l17.1821" class="difflineminus">-</span>
<a href="#l17.1822"></a><span id="l17.1822" class="difflineminus">-static PyObject *</span>
<a href="#l17.1823"></a><span id="l17.1823" class="difflineminus">-scanner_call(PyObject *self, PyObject *args, PyObject *kwds)</span>
<a href="#l17.1824"></a><span id="l17.1824" class="difflineminus">-{</span>
<a href="#l17.1825"></a><span id="l17.1825" class="difflineminus">-    /* Python callable interface to scan_once_{str,unicode} */</span>
<a href="#l17.1826"></a><span id="l17.1826" class="difflineminus">-    PyObject *pystr;</span>
<a href="#l17.1827"></a><span id="l17.1827" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.1828"></a><span id="l17.1828" class="difflineminus">-    Py_ssize_t idx;</span>
<a href="#l17.1829"></a><span id="l17.1829" class="difflineminus">-    Py_ssize_t next_idx = -1;</span>
<a href="#l17.1830"></a><span id="l17.1830" class="difflineminus">-    static char *kwlist[] = {&quot;string&quot;, &quot;idx&quot;, NULL};</span>
<a href="#l17.1831"></a><span id="l17.1831" class="difflineminus">-    PyScannerObject *s;</span>
<a href="#l17.1832"></a><span id="l17.1832" class="difflineminus">-    assert(PyScanner_Check(self));</span>
<a href="#l17.1833"></a><span id="l17.1833" class="difflineminus">-    s = (PyScannerObject *)self;</span>
<a href="#l17.1834"></a><span id="l17.1834" class="difflineminus">-    if (!PyArg_ParseTupleAndKeywords(args, kwds, &quot;OO&amp;:scan_once&quot;, kwlist, &amp;pystr, _convertPyInt_AsSsize_t, &amp;idx))</span>
<a href="#l17.1835"></a><span id="l17.1835" class="difflineminus">-        return NULL;</span>
<a href="#l17.1836"></a><span id="l17.1836" class="difflineminus">-</span>
<a href="#l17.1837"></a><span id="l17.1837" class="difflineminus">-    if (PyString_Check(pystr)) {</span>
<a href="#l17.1838"></a><span id="l17.1838" class="difflineminus">-        rval = scan_once_str(s, pystr, idx, &amp;next_idx);</span>
<a href="#l17.1839"></a><span id="l17.1839" class="difflineminus">-    }</span>
<a href="#l17.1840"></a><span id="l17.1840" class="difflineminus">-    else if (PyUnicode_Check(pystr)) {</span>
<a href="#l17.1841"></a><span id="l17.1841" class="difflineminus">-        rval = scan_once_unicode(s, pystr, idx, &amp;next_idx);</span>
<a href="#l17.1842"></a><span id="l17.1842" class="difflineminus">-    }</span>
<a href="#l17.1843"></a><span id="l17.1843" class="difflineminus">-    else {</span>
<a href="#l17.1844"></a><span id="l17.1844" class="difflineminus">-        PyErr_Format(PyExc_TypeError,</span>
<a href="#l17.1845"></a><span id="l17.1845" class="difflineminus">-                 &quot;first argument must be a string, not %.80s&quot;,</span>
<a href="#l17.1846"></a><span id="l17.1846" class="difflineminus">-                 Py_TYPE(pystr)-&gt;tp_name);</span>
<a href="#l17.1847"></a><span id="l17.1847" class="difflineminus">-        return NULL;</span>
<a href="#l17.1848"></a><span id="l17.1848" class="difflineminus">-    }</span>
<a href="#l17.1849"></a><span id="l17.1849" class="difflineminus">-    PyDict_Clear(s-&gt;memo);</span>
<a href="#l17.1850"></a><span id="l17.1850" class="difflineminus">-    return _build_rval_index_tuple(rval, next_idx);</span>
<a href="#l17.1851"></a><span id="l17.1851" class="difflineminus">-}</span>
<a href="#l17.1852"></a><span id="l17.1852" class="difflineminus">-</span>
<a href="#l17.1853"></a><span id="l17.1853" class="difflineminus">-static PyObject *</span>
<a href="#l17.1854"></a><span id="l17.1854" class="difflineminus">-scanner_new(PyTypeObject *type, PyObject *args, PyObject *kwds)</span>
<a href="#l17.1855"></a><span id="l17.1855" class="difflineminus">-{</span>
<a href="#l17.1856"></a><span id="l17.1856" class="difflineminus">-    PyScannerObject *s;</span>
<a href="#l17.1857"></a><span id="l17.1857" class="difflineminus">-    s = (PyScannerObject *)type-&gt;tp_alloc(type, 0);</span>
<a href="#l17.1858"></a><span id="l17.1858" class="difflineminus">-    if (s != NULL) {</span>
<a href="#l17.1859"></a><span id="l17.1859" class="difflineminus">-        s-&gt;encoding = NULL;</span>
<a href="#l17.1860"></a><span id="l17.1860" class="difflineminus">-        s-&gt;strict = NULL;</span>
<a href="#l17.1861"></a><span id="l17.1861" class="difflineminus">-        s-&gt;object_hook = NULL;</span>
<a href="#l17.1862"></a><span id="l17.1862" class="difflineminus">-        s-&gt;pairs_hook = NULL;</span>
<a href="#l17.1863"></a><span id="l17.1863" class="difflineminus">-        s-&gt;parse_float = NULL;</span>
<a href="#l17.1864"></a><span id="l17.1864" class="difflineminus">-        s-&gt;parse_int = NULL;</span>
<a href="#l17.1865"></a><span id="l17.1865" class="difflineminus">-        s-&gt;parse_constant = NULL;</span>
<a href="#l17.1866"></a><span id="l17.1866" class="difflineminus">-    }</span>
<a href="#l17.1867"></a><span id="l17.1867" class="difflineminus">-    return (PyObject *)s;</span>
<a href="#l17.1868"></a><span id="l17.1868" class="difflineminus">-}</span>
<a href="#l17.1869"></a><span id="l17.1869" class="difflineminus">-</span>
<a href="#l17.1870"></a><span id="l17.1870" class="difflineminus">-static int</span>
<a href="#l17.1871"></a><span id="l17.1871" class="difflineminus">-scanner_init(PyObject *self, PyObject *args, PyObject *kwds)</span>
<a href="#l17.1872"></a><span id="l17.1872" class="difflineminus">-{</span>
<a href="#l17.1873"></a><span id="l17.1873" class="difflineminus">-    /* Initialize Scanner object */</span>
<a href="#l17.1874"></a><span id="l17.1874" class="difflineminus">-    PyObject *ctx;</span>
<a href="#l17.1875"></a><span id="l17.1875" class="difflineminus">-    static char *kwlist[] = {&quot;context&quot;, NULL};</span>
<a href="#l17.1876"></a><span id="l17.1876" class="difflineminus">-    PyScannerObject *s;</span>
<a href="#l17.1877"></a><span id="l17.1877" class="difflineminus">-</span>
<a href="#l17.1878"></a><span id="l17.1878" class="difflineminus">-    assert(PyScanner_Check(self));</span>
<a href="#l17.1879"></a><span id="l17.1879" class="difflineminus">-    s = (PyScannerObject *)self;</span>
<a href="#l17.1880"></a><span id="l17.1880" class="difflineminus">-</span>
<a href="#l17.1881"></a><span id="l17.1881" class="difflineminus">-    if (!PyArg_ParseTupleAndKeywords(args, kwds, &quot;O:make_scanner&quot;, kwlist, &amp;ctx))</span>
<a href="#l17.1882"></a><span id="l17.1882" class="difflineminus">-        return -1;</span>
<a href="#l17.1883"></a><span id="l17.1883" class="difflineminus">-    </span>
<a href="#l17.1884"></a><span id="l17.1884" class="difflineminus">-    if (s-&gt;memo == NULL) {</span>
<a href="#l17.1885"></a><span id="l17.1885" class="difflineminus">-        s-&gt;memo = PyDict_New();</span>
<a href="#l17.1886"></a><span id="l17.1886" class="difflineminus">-        if (s-&gt;memo == NULL)</span>
<a href="#l17.1887"></a><span id="l17.1887" class="difflineminus">-            goto bail;</span>
<a href="#l17.1888"></a><span id="l17.1888" class="difflineminus">-    }</span>
<a href="#l17.1889"></a><span id="l17.1889" class="difflineminus">-</span>
<a href="#l17.1890"></a><span id="l17.1890" class="difflineminus">-    /* PyString_AS_STRING is used on encoding */</span>
<a href="#l17.1891"></a><span id="l17.1891" class="difflineminus">-    s-&gt;encoding = PyObject_GetAttrString(ctx, &quot;encoding&quot;);</span>
<a href="#l17.1892"></a><span id="l17.1892" class="difflineminus">-    if (s-&gt;encoding == NULL)</span>
<a href="#l17.1893"></a><span id="l17.1893" class="difflineminus">-        goto bail;</span>
<a href="#l17.1894"></a><span id="l17.1894" class="difflineminus">-    if (s-&gt;encoding == Py_None) {</span>
<a href="#l17.1895"></a><span id="l17.1895" class="difflineminus">-        Py_DECREF(Py_None);</span>
<a href="#l17.1896"></a><span id="l17.1896" class="difflineminus">-        s-&gt;encoding = PyString_InternFromString(DEFAULT_ENCODING);</span>
<a href="#l17.1897"></a><span id="l17.1897" class="difflineminus">-    }</span>
<a href="#l17.1898"></a><span id="l17.1898" class="difflineminus">-    else if (PyUnicode_Check(s-&gt;encoding)) {</span>
<a href="#l17.1899"></a><span id="l17.1899" class="difflineminus">-        PyObject *tmp = PyUnicode_AsEncodedString(s-&gt;encoding, NULL, NULL);</span>
<a href="#l17.1900"></a><span id="l17.1900" class="difflineminus">-        Py_DECREF(s-&gt;encoding);</span>
<a href="#l17.1901"></a><span id="l17.1901" class="difflineminus">-        s-&gt;encoding = tmp;</span>
<a href="#l17.1902"></a><span id="l17.1902" class="difflineminus">-    }</span>
<a href="#l17.1903"></a><span id="l17.1903" class="difflineminus">-    if (s-&gt;encoding == NULL || !PyString_Check(s-&gt;encoding))</span>
<a href="#l17.1904"></a><span id="l17.1904" class="difflineminus">-        goto bail;</span>
<a href="#l17.1905"></a><span id="l17.1905" class="difflineminus">-</span>
<a href="#l17.1906"></a><span id="l17.1906" class="difflineminus">-    /* All of these will fail &quot;gracefully&quot; so we don't need to verify them */</span>
<a href="#l17.1907"></a><span id="l17.1907" class="difflineminus">-    s-&gt;strict = PyObject_GetAttrString(ctx, &quot;strict&quot;);</span>
<a href="#l17.1908"></a><span id="l17.1908" class="difflineminus">-    if (s-&gt;strict == NULL)</span>
<a href="#l17.1909"></a><span id="l17.1909" class="difflineminus">-        goto bail;</span>
<a href="#l17.1910"></a><span id="l17.1910" class="difflineminus">-    s-&gt;object_hook = PyObject_GetAttrString(ctx, &quot;object_hook&quot;);</span>
<a href="#l17.1911"></a><span id="l17.1911" class="difflineminus">-    if (s-&gt;object_hook == NULL)</span>
<a href="#l17.1912"></a><span id="l17.1912" class="difflineminus">-        goto bail;</span>
<a href="#l17.1913"></a><span id="l17.1913" class="difflineminus">-    s-&gt;pairs_hook = PyObject_GetAttrString(ctx, &quot;object_pairs_hook&quot;);</span>
<a href="#l17.1914"></a><span id="l17.1914" class="difflineminus">-    if (s-&gt;pairs_hook == NULL)</span>
<a href="#l17.1915"></a><span id="l17.1915" class="difflineminus">-        goto bail;</span>
<a href="#l17.1916"></a><span id="l17.1916" class="difflineminus">-    s-&gt;parse_float = PyObject_GetAttrString(ctx, &quot;parse_float&quot;);</span>
<a href="#l17.1917"></a><span id="l17.1917" class="difflineminus">-    if (s-&gt;parse_float == NULL)</span>
<a href="#l17.1918"></a><span id="l17.1918" class="difflineminus">-        goto bail;</span>
<a href="#l17.1919"></a><span id="l17.1919" class="difflineminus">-    s-&gt;parse_int = PyObject_GetAttrString(ctx, &quot;parse_int&quot;);</span>
<a href="#l17.1920"></a><span id="l17.1920" class="difflineminus">-    if (s-&gt;parse_int == NULL)</span>
<a href="#l17.1921"></a><span id="l17.1921" class="difflineminus">-        goto bail;</span>
<a href="#l17.1922"></a><span id="l17.1922" class="difflineminus">-    s-&gt;parse_constant = PyObject_GetAttrString(ctx, &quot;parse_constant&quot;);</span>
<a href="#l17.1923"></a><span id="l17.1923" class="difflineminus">-    if (s-&gt;parse_constant == NULL)</span>
<a href="#l17.1924"></a><span id="l17.1924" class="difflineminus">-        goto bail;</span>
<a href="#l17.1925"></a><span id="l17.1925" class="difflineminus">-</span>
<a href="#l17.1926"></a><span id="l17.1926" class="difflineminus">-    return 0;</span>
<a href="#l17.1927"></a><span id="l17.1927" class="difflineminus">-</span>
<a href="#l17.1928"></a><span id="l17.1928" class="difflineminus">-bail:</span>
<a href="#l17.1929"></a><span id="l17.1929" class="difflineminus">-    Py_CLEAR(s-&gt;encoding);</span>
<a href="#l17.1930"></a><span id="l17.1930" class="difflineminus">-    Py_CLEAR(s-&gt;strict);</span>
<a href="#l17.1931"></a><span id="l17.1931" class="difflineminus">-    Py_CLEAR(s-&gt;object_hook);</span>
<a href="#l17.1932"></a><span id="l17.1932" class="difflineminus">-    Py_CLEAR(s-&gt;pairs_hook);</span>
<a href="#l17.1933"></a><span id="l17.1933" class="difflineminus">-    Py_CLEAR(s-&gt;parse_float);</span>
<a href="#l17.1934"></a><span id="l17.1934" class="difflineminus">-    Py_CLEAR(s-&gt;parse_int);</span>
<a href="#l17.1935"></a><span id="l17.1935" class="difflineminus">-    Py_CLEAR(s-&gt;parse_constant);</span>
<a href="#l17.1936"></a><span id="l17.1936" class="difflineminus">-    return -1;</span>
<a href="#l17.1937"></a><span id="l17.1937" class="difflineminus">-}</span>
<a href="#l17.1938"></a><span id="l17.1938" class="difflineminus">-</span>
<a href="#l17.1939"></a><span id="l17.1939" class="difflineminus">-PyDoc_STRVAR(scanner_doc, &quot;JSON scanner object&quot;);</span>
<a href="#l17.1940"></a><span id="l17.1940" class="difflineminus">-</span>
<a href="#l17.1941"></a><span id="l17.1941" class="difflineminus">-static</span>
<a href="#l17.1942"></a><span id="l17.1942" class="difflineminus">-PyTypeObject PyScannerType = {</span>
<a href="#l17.1943"></a><span id="l17.1943" class="difflineminus">-    PyObject_HEAD_INIT(NULL)</span>
<a href="#l17.1944"></a><span id="l17.1944" class="difflineminus">-    0,                    /* tp_internal */</span>
<a href="#l17.1945"></a><span id="l17.1945" class="difflineminus">-    &quot;simplejson._speedups.Scanner&quot;,       /* tp_name */</span>
<a href="#l17.1946"></a><span id="l17.1946" class="difflineminus">-    sizeof(PyScannerObject), /* tp_basicsize */</span>
<a href="#l17.1947"></a><span id="l17.1947" class="difflineminus">-    0,                    /* tp_itemsize */</span>
<a href="#l17.1948"></a><span id="l17.1948" class="difflineminus">-    scanner_dealloc, /* tp_dealloc */</span>
<a href="#l17.1949"></a><span id="l17.1949" class="difflineminus">-    0,                    /* tp_print */</span>
<a href="#l17.1950"></a><span id="l17.1950" class="difflineminus">-    0,                    /* tp_getattr */</span>
<a href="#l17.1951"></a><span id="l17.1951" class="difflineminus">-    0,                    /* tp_setattr */</span>
<a href="#l17.1952"></a><span id="l17.1952" class="difflineminus">-    0,                    /* tp_compare */</span>
<a href="#l17.1953"></a><span id="l17.1953" class="difflineminus">-    0,                    /* tp_repr */</span>
<a href="#l17.1954"></a><span id="l17.1954" class="difflineminus">-    0,                    /* tp_as_number */</span>
<a href="#l17.1955"></a><span id="l17.1955" class="difflineminus">-    0,                    /* tp_as_sequence */</span>
<a href="#l17.1956"></a><span id="l17.1956" class="difflineminus">-    0,                    /* tp_as_mapping */</span>
<a href="#l17.1957"></a><span id="l17.1957" class="difflineminus">-    0,                    /* tp_hash */</span>
<a href="#l17.1958"></a><span id="l17.1958" class="difflineminus">-    scanner_call,         /* tp_call */</span>
<a href="#l17.1959"></a><span id="l17.1959" class="difflineminus">-    0,                    /* tp_str */</span>
<a href="#l17.1960"></a><span id="l17.1960" class="difflineminus">-    0,/* PyObject_GenericGetAttr, */                    /* tp_getattro */</span>
<a href="#l17.1961"></a><span id="l17.1961" class="difflineminus">-    0,/* PyObject_GenericSetAttr, */                    /* tp_setattro */</span>
<a href="#l17.1962"></a><span id="l17.1962" class="difflineminus">-    0,                    /* tp_as_buffer */</span>
<a href="#l17.1963"></a><span id="l17.1963" class="difflineminus">-    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,   /* tp_flags */</span>
<a href="#l17.1964"></a><span id="l17.1964" class="difflineminus">-    scanner_doc,          /* tp_doc */</span>
<a href="#l17.1965"></a><span id="l17.1965" class="difflineminus">-    scanner_traverse,                    /* tp_traverse */</span>
<a href="#l17.1966"></a><span id="l17.1966" class="difflineminus">-    scanner_clear,                    /* tp_clear */</span>
<a href="#l17.1967"></a><span id="l17.1967" class="difflineminus">-    0,                    /* tp_richcompare */</span>
<a href="#l17.1968"></a><span id="l17.1968" class="difflineminus">-    0,                    /* tp_weaklistoffset */</span>
<a href="#l17.1969"></a><span id="l17.1969" class="difflineminus">-    0,                    /* tp_iter */</span>
<a href="#l17.1970"></a><span id="l17.1970" class="difflineminus">-    0,                    /* tp_iternext */</span>
<a href="#l17.1971"></a><span id="l17.1971" class="difflineminus">-    0,                    /* tp_methods */</span>
<a href="#l17.1972"></a><span id="l17.1972" class="difflineminus">-    scanner_members,                    /* tp_members */</span>
<a href="#l17.1973"></a><span id="l17.1973" class="difflineminus">-    0,                    /* tp_getset */</span>
<a href="#l17.1974"></a><span id="l17.1974" class="difflineminus">-    0,                    /* tp_base */</span>
<a href="#l17.1975"></a><span id="l17.1975" class="difflineminus">-    0,                    /* tp_dict */</span>
<a href="#l17.1976"></a><span id="l17.1976" class="difflineminus">-    0,                    /* tp_descr_get */</span>
<a href="#l17.1977"></a><span id="l17.1977" class="difflineminus">-    0,                    /* tp_descr_set */</span>
<a href="#l17.1978"></a><span id="l17.1978" class="difflineminus">-    0,                    /* tp_dictoffset */</span>
<a href="#l17.1979"></a><span id="l17.1979" class="difflineminus">-    scanner_init,                    /* tp_init */</span>
<a href="#l17.1980"></a><span id="l17.1980" class="difflineminus">-    0,/* PyType_GenericAlloc, */        /* tp_alloc */</span>
<a href="#l17.1981"></a><span id="l17.1981" class="difflineminus">-    scanner_new,          /* tp_new */</span>
<a href="#l17.1982"></a><span id="l17.1982" class="difflineminus">-    0,/* PyObject_GC_Del, */              /* tp_free */</span>
<a href="#l17.1983"></a><span id="l17.1983" class="difflineminus">-};</span>
<a href="#l17.1984"></a><span id="l17.1984" class="difflineminus">-</span>
<a href="#l17.1985"></a><span id="l17.1985" class="difflineminus">-static PyObject *</span>
<a href="#l17.1986"></a><span id="l17.1986" class="difflineminus">-encoder_new(PyTypeObject *type, PyObject *args, PyObject *kwds)</span>
<a href="#l17.1987"></a><span id="l17.1987" class="difflineminus">-{</span>
<a href="#l17.1988"></a><span id="l17.1988" class="difflineminus">-    PyEncoderObject *s;</span>
<a href="#l17.1989"></a><span id="l17.1989" class="difflineminus">-    s = (PyEncoderObject *)type-&gt;tp_alloc(type, 0);</span>
<a href="#l17.1990"></a><span id="l17.1990" class="difflineminus">-    if (s != NULL) {</span>
<a href="#l17.1991"></a><span id="l17.1991" class="difflineminus">-        s-&gt;markers = NULL;</span>
<a href="#l17.1992"></a><span id="l17.1992" class="difflineminus">-        s-&gt;defaultfn = NULL;</span>
<a href="#l17.1993"></a><span id="l17.1993" class="difflineminus">-        s-&gt;encoder = NULL;</span>
<a href="#l17.1994"></a><span id="l17.1994" class="difflineminus">-        s-&gt;indent = NULL;</span>
<a href="#l17.1995"></a><span id="l17.1995" class="difflineminus">-        s-&gt;key_separator = NULL;</span>
<a href="#l17.1996"></a><span id="l17.1996" class="difflineminus">-        s-&gt;item_separator = NULL;</span>
<a href="#l17.1997"></a><span id="l17.1997" class="difflineminus">-        s-&gt;sort_keys = NULL;</span>
<a href="#l17.1998"></a><span id="l17.1998" class="difflineminus">-        s-&gt;skipkeys = NULL;</span>
<a href="#l17.1999"></a><span id="l17.1999" class="difflineminus">-        s-&gt;key_memo = NULL;</span>
<a href="#l17.2000"></a><span id="l17.2000" class="difflineminus">-    }</span>
<a href="#l17.2001"></a><span id="l17.2001" class="difflineminus">-    return (PyObject *)s;</span>
<a href="#l17.2002"></a><span id="l17.2002" class="difflineminus">-}</span>
<a href="#l17.2003"></a><span id="l17.2003" class="difflineminus">-</span>
<a href="#l17.2004"></a><span id="l17.2004" class="difflineminus">-static int</span>
<a href="#l17.2005"></a><span id="l17.2005" class="difflineminus">-encoder_init(PyObject *self, PyObject *args, PyObject *kwds)</span>
<a href="#l17.2006"></a><span id="l17.2006" class="difflineminus">-{</span>
<a href="#l17.2007"></a><span id="l17.2007" class="difflineminus">-    /* initialize Encoder object */</span>
<a href="#l17.2008"></a><span id="l17.2008" class="difflineminus">-    static char *kwlist[] = {&quot;markers&quot;, &quot;default&quot;, &quot;encoder&quot;, &quot;indent&quot;, &quot;key_separator&quot;, &quot;item_separator&quot;, &quot;sort_keys&quot;, &quot;skipkeys&quot;, &quot;allow_nan&quot;, &quot;key_memo&quot;, &quot;use_decimal&quot;, NULL};</span>
<a href="#l17.2009"></a><span id="l17.2009" class="difflineminus">-</span>
<a href="#l17.2010"></a><span id="l17.2010" class="difflineminus">-    PyEncoderObject *s;</span>
<a href="#l17.2011"></a><span id="l17.2011" class="difflineminus">-    PyObject *markers, *defaultfn, *encoder, *indent, *key_separator;</span>
<a href="#l17.2012"></a><span id="l17.2012" class="difflineminus">-    PyObject *item_separator, *sort_keys, *skipkeys, *allow_nan, *key_memo, *use_decimal;</span>
<a href="#l17.2013"></a><span id="l17.2013" class="difflineminus">-</span>
<a href="#l17.2014"></a><span id="l17.2014" class="difflineminus">-    assert(PyEncoder_Check(self));</span>
<a href="#l17.2015"></a><span id="l17.2015" class="difflineminus">-    s = (PyEncoderObject *)self;</span>
<a href="#l17.2016"></a><span id="l17.2016" class="difflineminus">-</span>
<a href="#l17.2017"></a><span id="l17.2017" class="difflineminus">-    if (!PyArg_ParseTupleAndKeywords(args, kwds, &quot;OOOOOOOOOOO:make_encoder&quot;, kwlist,</span>
<a href="#l17.2018"></a><span id="l17.2018" class="difflineminus">-        &amp;markers, &amp;defaultfn, &amp;encoder, &amp;indent, &amp;key_separator, &amp;item_separator,</span>
<a href="#l17.2019"></a><span id="l17.2019" class="difflineminus">-        &amp;sort_keys, &amp;skipkeys, &amp;allow_nan, &amp;key_memo, &amp;use_decimal))</span>
<a href="#l17.2020"></a><span id="l17.2020" class="difflineminus">-        return -1;</span>
<a href="#l17.2021"></a><span id="l17.2021" class="difflineminus">-</span>
<a href="#l17.2022"></a><span id="l17.2022" class="difflineminus">-    s-&gt;markers = markers;</span>
<a href="#l17.2023"></a><span id="l17.2023" class="difflineminus">-    s-&gt;defaultfn = defaultfn;</span>
<a href="#l17.2024"></a><span id="l17.2024" class="difflineminus">-    s-&gt;encoder = encoder;</span>
<a href="#l17.2025"></a><span id="l17.2025" class="difflineminus">-    s-&gt;indent = indent;</span>
<a href="#l17.2026"></a><span id="l17.2026" class="difflineminus">-    s-&gt;key_separator = key_separator;</span>
<a href="#l17.2027"></a><span id="l17.2027" class="difflineminus">-    s-&gt;item_separator = item_separator;</span>
<a href="#l17.2028"></a><span id="l17.2028" class="difflineminus">-    s-&gt;sort_keys = sort_keys;</span>
<a href="#l17.2029"></a><span id="l17.2029" class="difflineminus">-    s-&gt;skipkeys = skipkeys;</span>
<a href="#l17.2030"></a><span id="l17.2030" class="difflineminus">-    s-&gt;key_memo = key_memo;</span>
<a href="#l17.2031"></a><span id="l17.2031" class="difflineminus">-    s-&gt;fast_encode = (PyCFunction_Check(s-&gt;encoder) &amp;&amp; PyCFunction_GetFunction(s-&gt;encoder) == (PyCFunction)py_encode_basestring_ascii);</span>
<a href="#l17.2032"></a><span id="l17.2032" class="difflineminus">-    s-&gt;allow_nan = PyObject_IsTrue(allow_nan);</span>
<a href="#l17.2033"></a><span id="l17.2033" class="difflineminus">-    s-&gt;use_decimal = PyObject_IsTrue(use_decimal);</span>
<a href="#l17.2034"></a><span id="l17.2034" class="difflineminus">-</span>
<a href="#l17.2035"></a><span id="l17.2035" class="difflineminus">-    Py_INCREF(s-&gt;markers);</span>
<a href="#l17.2036"></a><span id="l17.2036" class="difflineminus">-    Py_INCREF(s-&gt;defaultfn);</span>
<a href="#l17.2037"></a><span id="l17.2037" class="difflineminus">-    Py_INCREF(s-&gt;encoder);</span>
<a href="#l17.2038"></a><span id="l17.2038" class="difflineminus">-    Py_INCREF(s-&gt;indent);</span>
<a href="#l17.2039"></a><span id="l17.2039" class="difflineminus">-    Py_INCREF(s-&gt;key_separator);</span>
<a href="#l17.2040"></a><span id="l17.2040" class="difflineminus">-    Py_INCREF(s-&gt;item_separator);</span>
<a href="#l17.2041"></a><span id="l17.2041" class="difflineminus">-    Py_INCREF(s-&gt;sort_keys);</span>
<a href="#l17.2042"></a><span id="l17.2042" class="difflineminus">-    Py_INCREF(s-&gt;skipkeys);</span>
<a href="#l17.2043"></a><span id="l17.2043" class="difflineminus">-    Py_INCREF(s-&gt;key_memo);</span>
<a href="#l17.2044"></a><span id="l17.2044" class="difflineminus">-    return 0;</span>
<a href="#l17.2045"></a><span id="l17.2045" class="difflineminus">-}</span>
<a href="#l17.2046"></a><span id="l17.2046" class="difflineminus">-</span>
<a href="#l17.2047"></a><span id="l17.2047" class="difflineminus">-static PyObject *</span>
<a href="#l17.2048"></a><span id="l17.2048" class="difflineminus">-encoder_call(PyObject *self, PyObject *args, PyObject *kwds)</span>
<a href="#l17.2049"></a><span id="l17.2049" class="difflineminus">-{</span>
<a href="#l17.2050"></a><span id="l17.2050" class="difflineminus">-    /* Python callable interface to encode_listencode_obj */</span>
<a href="#l17.2051"></a><span id="l17.2051" class="difflineminus">-    static char *kwlist[] = {&quot;obj&quot;, &quot;_current_indent_level&quot;, NULL};</span>
<a href="#l17.2052"></a><span id="l17.2052" class="difflineminus">-    PyObject *obj;</span>
<a href="#l17.2053"></a><span id="l17.2053" class="difflineminus">-    PyObject *rval;</span>
<a href="#l17.2054"></a><span id="l17.2054" class="difflineminus">-    Py_ssize_t indent_level;</span>
<a href="#l17.2055"></a><span id="l17.2055" class="difflineminus">-    PyEncoderObject *s;</span>
<a href="#l17.2056"></a><span id="l17.2056" class="difflineminus">-    assert(PyEncoder_Check(self));</span>
<a href="#l17.2057"></a><span id="l17.2057" class="difflineminus">-    s = (PyEncoderObject *)self;</span>
<a href="#l17.2058"></a><span id="l17.2058" class="difflineminus">-    if (!PyArg_ParseTupleAndKeywords(args, kwds, &quot;OO&amp;:_iterencode&quot;, kwlist,</span>
<a href="#l17.2059"></a><span id="l17.2059" class="difflineminus">-        &amp;obj, _convertPyInt_AsSsize_t, &amp;indent_level))</span>
<a href="#l17.2060"></a><span id="l17.2060" class="difflineminus">-        return NULL;</span>
<a href="#l17.2061"></a><span id="l17.2061" class="difflineminus">-    rval = PyList_New(0);</span>
<a href="#l17.2062"></a><span id="l17.2062" class="difflineminus">-    if (rval == NULL)</span>
<a href="#l17.2063"></a><span id="l17.2063" class="difflineminus">-        return NULL;</span>
<a href="#l17.2064"></a><span id="l17.2064" class="difflineminus">-    if (encoder_listencode_obj(s, rval, obj, indent_level)) {</span>
<a href="#l17.2065"></a><span id="l17.2065" class="difflineminus">-        Py_DECREF(rval);</span>
<a href="#l17.2066"></a><span id="l17.2066" class="difflineminus">-        return NULL;</span>
<a href="#l17.2067"></a><span id="l17.2067" class="difflineminus">-    }</span>
<a href="#l17.2068"></a><span id="l17.2068" class="difflineminus">-    return rval;</span>
<a href="#l17.2069"></a><span id="l17.2069" class="difflineminus">-}</span>
<a href="#l17.2070"></a><span id="l17.2070" class="difflineminus">-</span>
<a href="#l17.2071"></a><span id="l17.2071" class="difflineminus">-static PyObject *</span>
<a href="#l17.2072"></a><span id="l17.2072" class="difflineminus">-_encoded_const(PyObject *obj)</span>
<a href="#l17.2073"></a><span id="l17.2073" class="difflineminus">-{</span>
<a href="#l17.2074"></a><span id="l17.2074" class="difflineminus">-    /* Return the JSON string representation of None, True, False */</span>
<a href="#l17.2075"></a><span id="l17.2075" class="difflineminus">-    if (obj == Py_None) {</span>
<a href="#l17.2076"></a><span id="l17.2076" class="difflineminus">-        static PyObject *s_null = NULL;</span>
<a href="#l17.2077"></a><span id="l17.2077" class="difflineminus">-        if (s_null == NULL) {</span>
<a href="#l17.2078"></a><span id="l17.2078" class="difflineminus">-            s_null = PyString_InternFromString(&quot;null&quot;);</span>
<a href="#l17.2079"></a><span id="l17.2079" class="difflineminus">-        }</span>
<a href="#l17.2080"></a><span id="l17.2080" class="difflineminus">-        Py_INCREF(s_null);</span>
<a href="#l17.2081"></a><span id="l17.2081" class="difflineminus">-        return s_null;</span>
<a href="#l17.2082"></a><span id="l17.2082" class="difflineminus">-    }</span>
<a href="#l17.2083"></a><span id="l17.2083" class="difflineminus">-    else if (obj == Py_True) {</span>
<a href="#l17.2084"></a><span id="l17.2084" class="difflineminus">-        static PyObject *s_true = NULL;</span>
<a href="#l17.2085"></a><span id="l17.2085" class="difflineminus">-        if (s_true == NULL) {</span>
<a href="#l17.2086"></a><span id="l17.2086" class="difflineminus">-            s_true = PyString_InternFromString(&quot;true&quot;);</span>
<a href="#l17.2087"></a><span id="l17.2087" class="difflineminus">-        }</span>
<a href="#l17.2088"></a><span id="l17.2088" class="difflineminus">-        Py_INCREF(s_true);</span>
<a href="#l17.2089"></a><span id="l17.2089" class="difflineminus">-        return s_true;</span>
<a href="#l17.2090"></a><span id="l17.2090" class="difflineminus">-    }</span>
<a href="#l17.2091"></a><span id="l17.2091" class="difflineminus">-    else if (obj == Py_False) {</span>
<a href="#l17.2092"></a><span id="l17.2092" class="difflineminus">-        static PyObject *s_false = NULL;</span>
<a href="#l17.2093"></a><span id="l17.2093" class="difflineminus">-        if (s_false == NULL) {</span>
<a href="#l17.2094"></a><span id="l17.2094" class="difflineminus">-            s_false = PyString_InternFromString(&quot;false&quot;);</span>
<a href="#l17.2095"></a><span id="l17.2095" class="difflineminus">-        }</span>
<a href="#l17.2096"></a><span id="l17.2096" class="difflineminus">-        Py_INCREF(s_false);</span>
<a href="#l17.2097"></a><span id="l17.2097" class="difflineminus">-        return s_false;</span>
<a href="#l17.2098"></a><span id="l17.2098" class="difflineminus">-    }</span>
<a href="#l17.2099"></a><span id="l17.2099" class="difflineminus">-    else {</span>
<a href="#l17.2100"></a><span id="l17.2100" class="difflineminus">-        PyErr_SetString(PyExc_ValueError, &quot;not a const&quot;);</span>
<a href="#l17.2101"></a><span id="l17.2101" class="difflineminus">-        return NULL;</span>
<a href="#l17.2102"></a><span id="l17.2102" class="difflineminus">-    }</span>
<a href="#l17.2103"></a><span id="l17.2103" class="difflineminus">-}</span>
<a href="#l17.2104"></a><span id="l17.2104" class="difflineminus">-</span>
<a href="#l17.2105"></a><span id="l17.2105" class="difflineminus">-static PyObject *</span>
<a href="#l17.2106"></a><span id="l17.2106" class="difflineminus">-encoder_encode_float(PyEncoderObject *s, PyObject *obj)</span>
<a href="#l17.2107"></a><span id="l17.2107" class="difflineminus">-{</span>
<a href="#l17.2108"></a><span id="l17.2108" class="difflineminus">-    /* Return the JSON representation of a PyFloat */</span>
<a href="#l17.2109"></a><span id="l17.2109" class="difflineminus">-    double i = PyFloat_AS_DOUBLE(obj);</span>
<a href="#l17.2110"></a><span id="l17.2110" class="difflineminus">-    if (!Py_IS_FINITE(i)) {</span>
<a href="#l17.2111"></a><span id="l17.2111" class="difflineminus">-        if (!s-&gt;allow_nan) {</span>
<a href="#l17.2112"></a><span id="l17.2112" class="difflineminus">-            PyErr_SetString(PyExc_ValueError, &quot;Out of range float values are not JSON compliant&quot;);</span>
<a href="#l17.2113"></a><span id="l17.2113" class="difflineminus">-            return NULL;</span>
<a href="#l17.2114"></a><span id="l17.2114" class="difflineminus">-        }</span>
<a href="#l17.2115"></a><span id="l17.2115" class="difflineminus">-        if (i &gt; 0) {</span>
<a href="#l17.2116"></a><span id="l17.2116" class="difflineminus">-            return PyString_FromString(&quot;Infinity&quot;);</span>
<a href="#l17.2117"></a><span id="l17.2117" class="difflineminus">-        }</span>
<a href="#l17.2118"></a><span id="l17.2118" class="difflineminus">-        else if (i &lt; 0) {</span>
<a href="#l17.2119"></a><span id="l17.2119" class="difflineminus">-            return PyString_FromString(&quot;-Infinity&quot;);</span>
<a href="#l17.2120"></a><span id="l17.2120" class="difflineminus">-        }</span>
<a href="#l17.2121"></a><span id="l17.2121" class="difflineminus">-        else {</span>
<a href="#l17.2122"></a><span id="l17.2122" class="difflineminus">-            return PyString_FromString(&quot;NaN&quot;);</span>
<a href="#l17.2123"></a><span id="l17.2123" class="difflineminus">-        }</span>
<a href="#l17.2124"></a><span id="l17.2124" class="difflineminus">-    }</span>
<a href="#l17.2125"></a><span id="l17.2125" class="difflineminus">-    /* Use a better float format here? */</span>
<a href="#l17.2126"></a><span id="l17.2126" class="difflineminus">-    return PyObject_Repr(obj);</span>
<a href="#l17.2127"></a><span id="l17.2127" class="difflineminus">-}</span>
<a href="#l17.2128"></a><span id="l17.2128" class="difflineminus">-</span>
<a href="#l17.2129"></a><span id="l17.2129" class="difflineminus">-static PyObject *</span>
<a href="#l17.2130"></a><span id="l17.2130" class="difflineminus">-encoder_encode_string(PyEncoderObject *s, PyObject *obj)</span>
<a href="#l17.2131"></a><span id="l17.2131" class="difflineminus">-{</span>
<a href="#l17.2132"></a><span id="l17.2132" class="difflineminus">-    /* Return the JSON representation of a string */</span>
<a href="#l17.2133"></a><span id="l17.2133" class="difflineminus">-    if (s-&gt;fast_encode)</span>
<a href="#l17.2134"></a><span id="l17.2134" class="difflineminus">-        return py_encode_basestring_ascii(NULL, obj);</span>
<a href="#l17.2135"></a><span id="l17.2135" class="difflineminus">-    else</span>
<a href="#l17.2136"></a><span id="l17.2136" class="difflineminus">-        return PyObject_CallFunctionObjArgs(s-&gt;encoder, obj, NULL);</span>
<a href="#l17.2137"></a><span id="l17.2137" class="difflineminus">-}</span>
<a href="#l17.2138"></a><span id="l17.2138" class="difflineminus">-</span>
<a href="#l17.2139"></a><span id="l17.2139" class="difflineminus">-static int</span>
<a href="#l17.2140"></a><span id="l17.2140" class="difflineminus">-_steal_list_append(PyObject *lst, PyObject *stolen)</span>
<a href="#l17.2141"></a><span id="l17.2141" class="difflineminus">-{</span>
<a href="#l17.2142"></a><span id="l17.2142" class="difflineminus">-    /* Append stolen and then decrement its reference count */</span>
<a href="#l17.2143"></a><span id="l17.2143" class="difflineminus">-    int rval = PyList_Append(lst, stolen);</span>
<a href="#l17.2144"></a><span id="l17.2144" class="difflineminus">-    Py_DECREF(stolen);</span>
<a href="#l17.2145"></a><span id="l17.2145" class="difflineminus">-    return rval;</span>
<a href="#l17.2146"></a><span id="l17.2146" class="difflineminus">-}</span>
<a href="#l17.2147"></a><span id="l17.2147" class="difflineminus">-</span>
<a href="#l17.2148"></a><span id="l17.2148" class="difflineminus">-static int</span>
<a href="#l17.2149"></a><span id="l17.2149" class="difflineminus">-encoder_listencode_obj(PyEncoderObject *s, PyObject *rval, PyObject *obj, Py_ssize_t indent_level)</span>
<a href="#l17.2150"></a><span id="l17.2150" class="difflineminus">-{</span>
<a href="#l17.2151"></a><span id="l17.2151" class="difflineminus">-    /* Encode Python object obj to a JSON term, rval is a PyList */</span>
<a href="#l17.2152"></a><span id="l17.2152" class="difflineminus">-    int rv = -1;</span>
<a href="#l17.2153"></a><span id="l17.2153" class="difflineminus">-    if (Py_EnterRecursiveCall(&quot; while encoding a JSON document&quot;))</span>
<a href="#l17.2154"></a><span id="l17.2154" class="difflineminus">-        return rv;</span>
<a href="#l17.2155"></a><span id="l17.2155" class="difflineminus">-    do {</span>
<a href="#l17.2156"></a><span id="l17.2156" class="difflineminus">-        if (obj == Py_None || obj == Py_True || obj == Py_False) {</span>
<a href="#l17.2157"></a><span id="l17.2157" class="difflineminus">-            PyObject *cstr = _encoded_const(obj);</span>
<a href="#l17.2158"></a><span id="l17.2158" class="difflineminus">-            if (cstr != NULL)</span>
<a href="#l17.2159"></a><span id="l17.2159" class="difflineminus">-                rv = _steal_list_append(rval, cstr);</span>
<a href="#l17.2160"></a><span id="l17.2160" class="difflineminus">-        }</span>
<a href="#l17.2161"></a><span id="l17.2161" class="difflineminus">-        else if (PyString_Check(obj) || PyUnicode_Check(obj))</span>
<a href="#l17.2162"></a><span id="l17.2162" class="difflineminus">-        {</span>
<a href="#l17.2163"></a><span id="l17.2163" class="difflineminus">-            PyObject *encoded = encoder_encode_string(s, obj);</span>
<a href="#l17.2164"></a><span id="l17.2164" class="difflineminus">-            if (encoded != NULL)</span>
<a href="#l17.2165"></a><span id="l17.2165" class="difflineminus">-                rv = _steal_list_append(rval, encoded);</span>
<a href="#l17.2166"></a><span id="l17.2166" class="difflineminus">-        }</span>
<a href="#l17.2167"></a><span id="l17.2167" class="difflineminus">-        else if (PyInt_Check(obj) || PyLong_Check(obj)) {</span>
<a href="#l17.2168"></a><span id="l17.2168" class="difflineminus">-            PyObject *encoded = PyObject_Str(obj);</span>
<a href="#l17.2169"></a><span id="l17.2169" class="difflineminus">-            if (encoded != NULL)</span>
<a href="#l17.2170"></a><span id="l17.2170" class="difflineminus">-                rv = _steal_list_append(rval, encoded);</span>
<a href="#l17.2171"></a><span id="l17.2171" class="difflineminus">-        }</span>
<a href="#l17.2172"></a><span id="l17.2172" class="difflineminus">-        else if (PyFloat_Check(obj)) {</span>
<a href="#l17.2173"></a><span id="l17.2173" class="difflineminus">-            PyObject *encoded = encoder_encode_float(s, obj);</span>
<a href="#l17.2174"></a><span id="l17.2174" class="difflineminus">-            if (encoded != NULL)</span>
<a href="#l17.2175"></a><span id="l17.2175" class="difflineminus">-                rv = _steal_list_append(rval, encoded);</span>
<a href="#l17.2176"></a><span id="l17.2176" class="difflineminus">-        }</span>
<a href="#l17.2177"></a><span id="l17.2177" class="difflineminus">-        else if (PyList_Check(obj) || PyTuple_Check(obj)) {</span>
<a href="#l17.2178"></a><span id="l17.2178" class="difflineminus">-            rv = encoder_listencode_list(s, rval, obj, indent_level);</span>
<a href="#l17.2179"></a><span id="l17.2179" class="difflineminus">-        }</span>
<a href="#l17.2180"></a><span id="l17.2180" class="difflineminus">-        else if (PyDict_Check(obj)) {</span>
<a href="#l17.2181"></a><span id="l17.2181" class="difflineminus">-            rv = encoder_listencode_dict(s, rval, obj, indent_level);</span>
<a href="#l17.2182"></a><span id="l17.2182" class="difflineminus">-        }</span>
<a href="#l17.2183"></a><span id="l17.2183" class="difflineminus">-        else if (s-&gt;use_decimal &amp;&amp; Decimal_Check(obj)) {</span>
<a href="#l17.2184"></a><span id="l17.2184" class="difflineminus">-            PyObject *encoded = PyObject_Str(obj);</span>
<a href="#l17.2185"></a><span id="l17.2185" class="difflineminus">-            if (encoded != NULL)</span>
<a href="#l17.2186"></a><span id="l17.2186" class="difflineminus">-                rv = _steal_list_append(rval, encoded);</span>
<a href="#l17.2187"></a><span id="l17.2187" class="difflineminus">-        }</span>
<a href="#l17.2188"></a><span id="l17.2188" class="difflineminus">-        else {</span>
<a href="#l17.2189"></a><span id="l17.2189" class="difflineminus">-            PyObject *ident = NULL;</span>
<a href="#l17.2190"></a><span id="l17.2190" class="difflineminus">-            PyObject *newobj;</span>
<a href="#l17.2191"></a><span id="l17.2191" class="difflineminus">-            if (s-&gt;markers != Py_None) {</span>
<a href="#l17.2192"></a><span id="l17.2192" class="difflineminus">-                int has_key;</span>
<a href="#l17.2193"></a><span id="l17.2193" class="difflineminus">-                ident = PyLong_FromVoidPtr(obj);</span>
<a href="#l17.2194"></a><span id="l17.2194" class="difflineminus">-                if (ident == NULL)</span>
<a href="#l17.2195"></a><span id="l17.2195" class="difflineminus">-                    break;</span>
<a href="#l17.2196"></a><span id="l17.2196" class="difflineminus">-                has_key = PyDict_Contains(s-&gt;markers, ident);</span>
<a href="#l17.2197"></a><span id="l17.2197" class="difflineminus">-                if (has_key) {</span>
<a href="#l17.2198"></a><span id="l17.2198" class="difflineminus">-                    if (has_key != -1)</span>
<a href="#l17.2199"></a><span id="l17.2199" class="difflineminus">-                        PyErr_SetString(PyExc_ValueError, &quot;Circular reference detected&quot;);</span>
<a href="#l17.2200"></a><span id="l17.2200" class="difflineminus">-                    Py_DECREF(ident);</span>
<a href="#l17.2201"></a><span id="l17.2201" class="difflineminus">-                    break;</span>
<a href="#l17.2202"></a><span id="l17.2202" class="difflineminus">-                }</span>
<a href="#l17.2203"></a><span id="l17.2203" class="difflineminus">-                if (PyDict_SetItem(s-&gt;markers, ident, obj)) {</span>
<a href="#l17.2204"></a><span id="l17.2204" class="difflineminus">-                    Py_DECREF(ident);</span>
<a href="#l17.2205"></a><span id="l17.2205" class="difflineminus">-                    break;</span>
<a href="#l17.2206"></a><span id="l17.2206" class="difflineminus">-                }</span>
<a href="#l17.2207"></a><span id="l17.2207" class="difflineminus">-            }</span>
<a href="#l17.2208"></a><span id="l17.2208" class="difflineminus">-            newobj = PyObject_CallFunctionObjArgs(s-&gt;defaultfn, obj, NULL);</span>
<a href="#l17.2209"></a><span id="l17.2209" class="difflineminus">-            if (newobj == NULL) {</span>
<a href="#l17.2210"></a><span id="l17.2210" class="difflineminus">-                Py_XDECREF(ident);</span>
<a href="#l17.2211"></a><span id="l17.2211" class="difflineminus">-                break;</span>
<a href="#l17.2212"></a><span id="l17.2212" class="difflineminus">-            }</span>
<a href="#l17.2213"></a><span id="l17.2213" class="difflineminus">-            rv = encoder_listencode_obj(s, rval, newobj, indent_level);</span>
<a href="#l17.2214"></a><span id="l17.2214" class="difflineminus">-            Py_DECREF(newobj);</span>
<a href="#l17.2215"></a><span id="l17.2215" class="difflineminus">-            if (rv) {</span>
<a href="#l17.2216"></a><span id="l17.2216" class="difflineminus">-                Py_XDECREF(ident);</span>
<a href="#l17.2217"></a><span id="l17.2217" class="difflineminus">-                rv = -1;</span>
<a href="#l17.2218"></a><span id="l17.2218" class="difflineminus">-            }</span>
<a href="#l17.2219"></a><span id="l17.2219" class="difflineminus">-            else if (ident != NULL) {</span>
<a href="#l17.2220"></a><span id="l17.2220" class="difflineminus">-                if (PyDict_DelItem(s-&gt;markers, ident)) {</span>
<a href="#l17.2221"></a><span id="l17.2221" class="difflineminus">-                    Py_XDECREF(ident);</span>
<a href="#l17.2222"></a><span id="l17.2222" class="difflineminus">-                    rv = -1;</span>
<a href="#l17.2223"></a><span id="l17.2223" class="difflineminus">-                }</span>
<a href="#l17.2224"></a><span id="l17.2224" class="difflineminus">-                Py_XDECREF(ident);</span>
<a href="#l17.2225"></a><span id="l17.2225" class="difflineminus">-            }</span>
<a href="#l17.2226"></a><span id="l17.2226" class="difflineminus">-        }</span>
<a href="#l17.2227"></a><span id="l17.2227" class="difflineminus">-    } while (0);</span>
<a href="#l17.2228"></a><span id="l17.2228" class="difflineminus">-    Py_LeaveRecursiveCall();</span>
<a href="#l17.2229"></a><span id="l17.2229" class="difflineminus">-    return rv;</span>
<a href="#l17.2230"></a><span id="l17.2230" class="difflineminus">-}</span>
<a href="#l17.2231"></a><span id="l17.2231" class="difflineminus">-</span>
<a href="#l17.2232"></a><span id="l17.2232" class="difflineminus">-static int</span>
<a href="#l17.2233"></a><span id="l17.2233" class="difflineminus">-encoder_listencode_dict(PyEncoderObject *s, PyObject *rval, PyObject *dct, Py_ssize_t indent_level)</span>
<a href="#l17.2234"></a><span id="l17.2234" class="difflineminus">-{</span>
<a href="#l17.2235"></a><span id="l17.2235" class="difflineminus">-    /* Encode Python dict dct a JSON term, rval is a PyList */</span>
<a href="#l17.2236"></a><span id="l17.2236" class="difflineminus">-    static PyObject *open_dict = NULL;</span>
<a href="#l17.2237"></a><span id="l17.2237" class="difflineminus">-    static PyObject *close_dict = NULL;</span>
<a href="#l17.2238"></a><span id="l17.2238" class="difflineminus">-    static PyObject *empty_dict = NULL;</span>
<a href="#l17.2239"></a><span id="l17.2239" class="difflineminus">-    static PyObject *iteritems = NULL;</span>
<a href="#l17.2240"></a><span id="l17.2240" class="difflineminus">-    PyObject *kstr = NULL;</span>
<a href="#l17.2241"></a><span id="l17.2241" class="difflineminus">-    PyObject *ident = NULL;</span>
<a href="#l17.2242"></a><span id="l17.2242" class="difflineminus">-    PyObject *iter = NULL;</span>
<a href="#l17.2243"></a><span id="l17.2243" class="difflineminus">-    PyObject *item = NULL;</span>
<a href="#l17.2244"></a><span id="l17.2244" class="difflineminus">-    PyObject *items = NULL;</span>
<a href="#l17.2245"></a><span id="l17.2245" class="difflineminus">-    PyObject *encoded = NULL;</span>
<a href="#l17.2246"></a><span id="l17.2246" class="difflineminus">-    int skipkeys;</span>
<a href="#l17.2247"></a><span id="l17.2247" class="difflineminus">-    Py_ssize_t idx;</span>
<a href="#l17.2248"></a><span id="l17.2248" class="difflineminus">-</span>
<a href="#l17.2249"></a><span id="l17.2249" class="difflineminus">-    if (open_dict == NULL || close_dict == NULL || empty_dict == NULL || iteritems == NULL) {</span>
<a href="#l17.2250"></a><span id="l17.2250" class="difflineminus">-        open_dict = PyString_InternFromString(&quot;{&quot;);</span>
<a href="#l17.2251"></a><span id="l17.2251" class="difflineminus">-        close_dict = PyString_InternFromString(&quot;}&quot;);</span>
<a href="#l17.2252"></a><span id="l17.2252" class="difflineminus">-        empty_dict = PyString_InternFromString(&quot;{}&quot;);</span>
<a href="#l17.2253"></a><span id="l17.2253" class="difflineminus">-        iteritems = PyString_InternFromString(&quot;iteritems&quot;);</span>
<a href="#l17.2254"></a><span id="l17.2254" class="difflineminus">-        if (open_dict == NULL || close_dict == NULL || empty_dict == NULL || iteritems == NULL)</span>
<a href="#l17.2255"></a><span id="l17.2255" class="difflineminus">-            return -1;</span>
<a href="#l17.2256"></a><span id="l17.2256" class="difflineminus">-    }</span>
<a href="#l17.2257"></a><span id="l17.2257" class="difflineminus">-    if (PyDict_Size(dct) == 0)</span>
<a href="#l17.2258"></a><span id="l17.2258" class="difflineminus">-        return PyList_Append(rval, empty_dict);</span>
<a href="#l17.2259"></a><span id="l17.2259" class="difflineminus">-</span>
<a href="#l17.2260"></a><span id="l17.2260" class="difflineminus">-    if (s-&gt;markers != Py_None) {</span>
<a href="#l17.2261"></a><span id="l17.2261" class="difflineminus">-        int has_key;</span>
<a href="#l17.2262"></a><span id="l17.2262" class="difflineminus">-        ident = PyLong_FromVoidPtr(dct);</span>
<a href="#l17.2263"></a><span id="l17.2263" class="difflineminus">-        if (ident == NULL)</span>
<a href="#l17.2264"></a><span id="l17.2264" class="difflineminus">-            goto bail;</span>
<a href="#l17.2265"></a><span id="l17.2265" class="difflineminus">-        has_key = PyDict_Contains(s-&gt;markers, ident);</span>
<a href="#l17.2266"></a><span id="l17.2266" class="difflineminus">-        if (has_key) {</span>
<a href="#l17.2267"></a><span id="l17.2267" class="difflineminus">-            if (has_key != -1)</span>
<a href="#l17.2268"></a><span id="l17.2268" class="difflineminus">-                PyErr_SetString(PyExc_ValueError, &quot;Circular reference detected&quot;);</span>
<a href="#l17.2269"></a><span id="l17.2269" class="difflineminus">-            goto bail;</span>
<a href="#l17.2270"></a><span id="l17.2270" class="difflineminus">-        }</span>
<a href="#l17.2271"></a><span id="l17.2271" class="difflineminus">-        if (PyDict_SetItem(s-&gt;markers, ident, dct)) {</span>
<a href="#l17.2272"></a><span id="l17.2272" class="difflineminus">-            goto bail;</span>
<a href="#l17.2273"></a><span id="l17.2273" class="difflineminus">-        }</span>
<a href="#l17.2274"></a><span id="l17.2274" class="difflineminus">-    }</span>
<a href="#l17.2275"></a><span id="l17.2275" class="difflineminus">-</span>
<a href="#l17.2276"></a><span id="l17.2276" class="difflineminus">-    if (PyList_Append(rval, open_dict))</span>
<a href="#l17.2277"></a><span id="l17.2277" class="difflineminus">-        goto bail;</span>
<a href="#l17.2278"></a><span id="l17.2278" class="difflineminus">-</span>
<a href="#l17.2279"></a><span id="l17.2279" class="difflineminus">-    if (s-&gt;indent != Py_None) {</span>
<a href="#l17.2280"></a><span id="l17.2280" class="difflineminus">-        /* TODO: DOES NOT RUN */</span>
<a href="#l17.2281"></a><span id="l17.2281" class="difflineminus">-        indent_level += 1;</span>
<a href="#l17.2282"></a><span id="l17.2282" class="difflineminus">-        /*</span>
<a href="#l17.2283"></a><span id="l17.2283" class="difflineminus">-            newline_indent = '\n' + (_indent * _current_indent_level)</span>
<a href="#l17.2284"></a><span id="l17.2284" class="difflineminus">-            separator = _item_separator + newline_indent</span>
<a href="#l17.2285"></a><span id="l17.2285" class="difflineminus">-            buf += newline_indent</span>
<a href="#l17.2286"></a><span id="l17.2286" class="difflineminus">-        */</span>
<a href="#l17.2287"></a><span id="l17.2287" class="difflineminus">-    }</span>
<a href="#l17.2288"></a><span id="l17.2288" class="difflineminus">-</span>
<a href="#l17.2289"></a><span id="l17.2289" class="difflineminus">-    if (PyObject_IsTrue(s-&gt;sort_keys)) {</span>
<a href="#l17.2290"></a><span id="l17.2290" class="difflineminus">-        /* First sort the keys then replace them with (key, value) tuples. */</span>
<a href="#l17.2291"></a><span id="l17.2291" class="difflineminus">-        Py_ssize_t i, nitems;</span>
<a href="#l17.2292"></a><span id="l17.2292" class="difflineminus">-        if (PyDict_CheckExact(dct))</span>
<a href="#l17.2293"></a><span id="l17.2293" class="difflineminus">-            items = PyDict_Keys(dct);</span>
<a href="#l17.2294"></a><span id="l17.2294" class="difflineminus">-        else</span>
<a href="#l17.2295"></a><span id="l17.2295" class="difflineminus">-            items = PyMapping_Keys(dct);</span>
<a href="#l17.2296"></a><span id="l17.2296" class="difflineminus">-        if (items == NULL)</span>
<a href="#l17.2297"></a><span id="l17.2297" class="difflineminus">-            goto bail;</span>
<a href="#l17.2298"></a><span id="l17.2298" class="difflineminus">-        if (!PyList_Check(items)) {</span>
<a href="#l17.2299"></a><span id="l17.2299" class="difflineminus">-            PyErr_SetString(PyExc_ValueError, &quot;keys must return list&quot;);</span>
<a href="#l17.2300"></a><span id="l17.2300" class="difflineminus">-            goto bail;</span>
<a href="#l17.2301"></a><span id="l17.2301" class="difflineminus">-        }</span>
<a href="#l17.2302"></a><span id="l17.2302" class="difflineminus">-        if (PyList_Sort(items) &lt; 0)</span>
<a href="#l17.2303"></a><span id="l17.2303" class="difflineminus">-            goto bail;</span>
<a href="#l17.2304"></a><span id="l17.2304" class="difflineminus">-        nitems = PyList_GET_SIZE(items);</span>
<a href="#l17.2305"></a><span id="l17.2305" class="difflineminus">-        for (i = 0; i &lt; nitems; i++) {</span>
<a href="#l17.2306"></a><span id="l17.2306" class="difflineminus">-            PyObject *key, *value;</span>
<a href="#l17.2307"></a><span id="l17.2307" class="difflineminus">-            key = PyList_GET_ITEM(items, i);</span>
<a href="#l17.2308"></a><span id="l17.2308" class="difflineminus">-            value = PyDict_GetItem(dct, key);</span>
<a href="#l17.2309"></a><span id="l17.2309" class="difflineminus">-            item = PyTuple_Pack(2, key, value);</span>
<a href="#l17.2310"></a><span id="l17.2310" class="difflineminus">-            if (item == NULL)</span>
<a href="#l17.2311"></a><span id="l17.2311" class="difflineminus">-                goto bail;</span>
<a href="#l17.2312"></a><span id="l17.2312" class="difflineminus">-            PyList_SET_ITEM(items, i, item);</span>
<a href="#l17.2313"></a><span id="l17.2313" class="difflineminus">-            Py_DECREF(key);</span>
<a href="#l17.2314"></a><span id="l17.2314" class="difflineminus">-        }</span>
<a href="#l17.2315"></a><span id="l17.2315" class="difflineminus">-    }</span>
<a href="#l17.2316"></a><span id="l17.2316" class="difflineminus">-    else {</span>
<a href="#l17.2317"></a><span id="l17.2317" class="difflineminus">-        if (PyDict_CheckExact(dct))</span>
<a href="#l17.2318"></a><span id="l17.2318" class="difflineminus">-            items = PyDict_Items(dct);</span>
<a href="#l17.2319"></a><span id="l17.2319" class="difflineminus">-        else</span>
<a href="#l17.2320"></a><span id="l17.2320" class="difflineminus">-            items = PyMapping_Items(dct);</span>
<a href="#l17.2321"></a><span id="l17.2321" class="difflineminus">-    }</span>
<a href="#l17.2322"></a><span id="l17.2322" class="difflineminus">-    if (items == NULL)</span>
<a href="#l17.2323"></a><span id="l17.2323" class="difflineminus">-        goto bail;</span>
<a href="#l17.2324"></a><span id="l17.2324" class="difflineminus">-    iter = PyObject_GetIter(items);</span>
<a href="#l17.2325"></a><span id="l17.2325" class="difflineminus">-    Py_DECREF(items);</span>
<a href="#l17.2326"></a><span id="l17.2326" class="difflineminus">-    if (iter == NULL)</span>
<a href="#l17.2327"></a><span id="l17.2327" class="difflineminus">-        goto bail;</span>
<a href="#l17.2328"></a><span id="l17.2328" class="difflineminus">-</span>
<a href="#l17.2329"></a><span id="l17.2329" class="difflineminus">-    skipkeys = PyObject_IsTrue(s-&gt;skipkeys);</span>
<a href="#l17.2330"></a><span id="l17.2330" class="difflineminus">-    idx = 0;</span>
<a href="#l17.2331"></a><span id="l17.2331" class="difflineminus">-    while ((item = PyIter_Next(iter))) {</span>
<a href="#l17.2332"></a><span id="l17.2332" class="difflineminus">-        PyObject *encoded, *key, *value;</span>
<a href="#l17.2333"></a><span id="l17.2333" class="difflineminus">-        if (!PyTuple_Check(item) || Py_SIZE(item) != 2) {</span>
<a href="#l17.2334"></a><span id="l17.2334" class="difflineminus">-            PyErr_SetString(PyExc_ValueError, &quot;items must return 2-tuples&quot;);</span>
<a href="#l17.2335"></a><span id="l17.2335" class="difflineminus">-            goto bail;</span>
<a href="#l17.2336"></a><span id="l17.2336" class="difflineminus">-        }</span>
<a href="#l17.2337"></a><span id="l17.2337" class="difflineminus">-        key = PyTuple_GET_ITEM(item, 0);</span>
<a href="#l17.2338"></a><span id="l17.2338" class="difflineminus">-        if (key == NULL)</span>
<a href="#l17.2339"></a><span id="l17.2339" class="difflineminus">-            goto bail;</span>
<a href="#l17.2340"></a><span id="l17.2340" class="difflineminus">-        value = PyTuple_GET_ITEM(item, 1);</span>
<a href="#l17.2341"></a><span id="l17.2341" class="difflineminus">-        if (value == NULL)</span>
<a href="#l17.2342"></a><span id="l17.2342" class="difflineminus">-            goto bail;</span>
<a href="#l17.2343"></a><span id="l17.2343" class="difflineminus">-</span>
<a href="#l17.2344"></a><span id="l17.2344" class="difflineminus">-        encoded = PyDict_GetItem(s-&gt;key_memo, key);</span>
<a href="#l17.2345"></a><span id="l17.2345" class="difflineminus">-        if (encoded != NULL) {</span>
<a href="#l17.2346"></a><span id="l17.2346" class="difflineminus">-            Py_INCREF(encoded);</span>
<a href="#l17.2347"></a><span id="l17.2347" class="difflineminus">-        }</span>
<a href="#l17.2348"></a><span id="l17.2348" class="difflineminus">-        else if (PyString_Check(key) || PyUnicode_Check(key)) {</span>
<a href="#l17.2349"></a><span id="l17.2349" class="difflineminus">-            Py_INCREF(key);</span>
<a href="#l17.2350"></a><span id="l17.2350" class="difflineminus">-            kstr = key;</span>
<a href="#l17.2351"></a><span id="l17.2351" class="difflineminus">-        }</span>
<a href="#l17.2352"></a><span id="l17.2352" class="difflineminus">-        else if (PyFloat_Check(key)) {</span>
<a href="#l17.2353"></a><span id="l17.2353" class="difflineminus">-            kstr = encoder_encode_float(s, key);</span>
<a href="#l17.2354"></a><span id="l17.2354" class="difflineminus">-            if (kstr == NULL)</span>
<a href="#l17.2355"></a><span id="l17.2355" class="difflineminus">-                goto bail;</span>
<a href="#l17.2356"></a><span id="l17.2356" class="difflineminus">-        }</span>
<a href="#l17.2357"></a><span id="l17.2357" class="difflineminus">-        else if (key == Py_True || key == Py_False || key == Py_None) {</span>
<a href="#l17.2358"></a><span id="l17.2358" class="difflineminus">-            /* This must come before the PyInt_Check because</span>
<a href="#l17.2359"></a><span id="l17.2359" class="difflineminus">-               True and False are also 1 and 0.*/</span>
<a href="#l17.2360"></a><span id="l17.2360" class="difflineminus">-            kstr = _encoded_const(key);</span>
<a href="#l17.2361"></a><span id="l17.2361" class="difflineminus">-            if (kstr == NULL)</span>
<a href="#l17.2362"></a><span id="l17.2362" class="difflineminus">-                goto bail;</span>
<a href="#l17.2363"></a><span id="l17.2363" class="difflineminus">-        }</span>
<a href="#l17.2364"></a><span id="l17.2364" class="difflineminus">-        else if (PyInt_Check(key) || PyLong_Check(key)) {</span>
<a href="#l17.2365"></a><span id="l17.2365" class="difflineminus">-            kstr = PyObject_Str(key);</span>
<a href="#l17.2366"></a><span id="l17.2366" class="difflineminus">-            if (kstr == NULL)</span>
<a href="#l17.2367"></a><span id="l17.2367" class="difflineminus">-                goto bail;</span>
<a href="#l17.2368"></a><span id="l17.2368" class="difflineminus">-        }</span>
<a href="#l17.2369"></a><span id="l17.2369" class="difflineminus">-        else if (skipkeys) {</span>
<a href="#l17.2370"></a><span id="l17.2370" class="difflineminus">-            Py_DECREF(item);</span>
<a href="#l17.2371"></a><span id="l17.2371" class="difflineminus">-            continue;</span>
<a href="#l17.2372"></a><span id="l17.2372" class="difflineminus">-        }</span>
<a href="#l17.2373"></a><span id="l17.2373" class="difflineminus">-        else {</span>
<a href="#l17.2374"></a><span id="l17.2374" class="difflineminus">-            /* TODO: include repr of key */</span>
<a href="#l17.2375"></a><span id="l17.2375" class="difflineminus">-            PyErr_SetString(PyExc_TypeError, &quot;keys must be a string&quot;);</span>
<a href="#l17.2376"></a><span id="l17.2376" class="difflineminus">-            goto bail;</span>
<a href="#l17.2377"></a><span id="l17.2377" class="difflineminus">-        }</span>
<a href="#l17.2378"></a><span id="l17.2378" class="difflineminus">-</span>
<a href="#l17.2379"></a><span id="l17.2379" class="difflineminus">-        if (idx) {</span>
<a href="#l17.2380"></a><span id="l17.2380" class="difflineminus">-            if (PyList_Append(rval, s-&gt;item_separator))</span>
<a href="#l17.2381"></a><span id="l17.2381" class="difflineminus">-                goto bail;</span>
<a href="#l17.2382"></a><span id="l17.2382" class="difflineminus">-        }</span>
<a href="#l17.2383"></a><span id="l17.2383" class="difflineminus">-</span>
<a href="#l17.2384"></a><span id="l17.2384" class="difflineminus">-        if (encoded == NULL) {</span>
<a href="#l17.2385"></a><span id="l17.2385" class="difflineminus">-            encoded = encoder_encode_string(s, kstr);</span>
<a href="#l17.2386"></a><span id="l17.2386" class="difflineminus">-            Py_CLEAR(kstr);</span>
<a href="#l17.2387"></a><span id="l17.2387" class="difflineminus">-            if (encoded == NULL)</span>
<a href="#l17.2388"></a><span id="l17.2388" class="difflineminus">-                goto bail;</span>
<a href="#l17.2389"></a><span id="l17.2389" class="difflineminus">-            if (PyDict_SetItem(s-&gt;key_memo, key, encoded))</span>
<a href="#l17.2390"></a><span id="l17.2390" class="difflineminus">-                goto bail;</span>
<a href="#l17.2391"></a><span id="l17.2391" class="difflineminus">-        }</span>
<a href="#l17.2392"></a><span id="l17.2392" class="difflineminus">-        if (PyList_Append(rval, encoded)) {</span>
<a href="#l17.2393"></a><span id="l17.2393" class="difflineminus">-            goto bail;</span>
<a href="#l17.2394"></a><span id="l17.2394" class="difflineminus">-        }</span>
<a href="#l17.2395"></a><span id="l17.2395" class="difflineminus">-        Py_CLEAR(encoded);</span>
<a href="#l17.2396"></a><span id="l17.2396" class="difflineminus">-        if (PyList_Append(rval, s-&gt;key_separator))</span>
<a href="#l17.2397"></a><span id="l17.2397" class="difflineminus">-            goto bail;</span>
<a href="#l17.2398"></a><span id="l17.2398" class="difflineminus">-        if (encoder_listencode_obj(s, rval, value, indent_level))</span>
<a href="#l17.2399"></a><span id="l17.2399" class="difflineminus">-            goto bail;</span>
<a href="#l17.2400"></a><span id="l17.2400" class="difflineminus">-        Py_CLEAR(item);</span>
<a href="#l17.2401"></a><span id="l17.2401" class="difflineminus">-        idx += 1;</span>
<a href="#l17.2402"></a><span id="l17.2402" class="difflineminus">-    }</span>
<a href="#l17.2403"></a><span id="l17.2403" class="difflineminus">-    Py_CLEAR(iter);</span>
<a href="#l17.2404"></a><span id="l17.2404" class="difflineminus">-    if (PyErr_Occurred())</span>
<a href="#l17.2405"></a><span id="l17.2405" class="difflineminus">-        goto bail;</span>
<a href="#l17.2406"></a><span id="l17.2406" class="difflineminus">-    if (ident != NULL) {</span>
<a href="#l17.2407"></a><span id="l17.2407" class="difflineminus">-        if (PyDict_DelItem(s-&gt;markers, ident))</span>
<a href="#l17.2408"></a><span id="l17.2408" class="difflineminus">-            goto bail;</span>
<a href="#l17.2409"></a><span id="l17.2409" class="difflineminus">-        Py_CLEAR(ident);</span>
<a href="#l17.2410"></a><span id="l17.2410" class="difflineminus">-    }</span>
<a href="#l17.2411"></a><span id="l17.2411" class="difflineminus">-    if (s-&gt;indent != Py_None) {</span>
<a href="#l17.2412"></a><span id="l17.2412" class="difflineminus">-        /* TODO: DOES NOT RUN */</span>
<a href="#l17.2413"></a><span id="l17.2413" class="difflineminus">-        indent_level -= 1;</span>
<a href="#l17.2414"></a><span id="l17.2414" class="difflineminus">-        /*</span>
<a href="#l17.2415"></a><span id="l17.2415" class="difflineminus">-            yield '\n' + (_indent * _current_indent_level)</span>
<a href="#l17.2416"></a><span id="l17.2416" class="difflineminus">-        */</span>
<a href="#l17.2417"></a><span id="l17.2417" class="difflineminus">-    }</span>
<a href="#l17.2418"></a><span id="l17.2418" class="difflineminus">-    if (PyList_Append(rval, close_dict))</span>
<a href="#l17.2419"></a><span id="l17.2419" class="difflineminus">-        goto bail;</span>
<a href="#l17.2420"></a><span id="l17.2420" class="difflineminus">-    return 0;</span>
<a href="#l17.2421"></a><span id="l17.2421" class="difflineminus">-</span>
<a href="#l17.2422"></a><span id="l17.2422" class="difflineminus">-bail:</span>
<a href="#l17.2423"></a><span id="l17.2423" class="difflineminus">-    Py_XDECREF(encoded);</span>
<a href="#l17.2424"></a><span id="l17.2424" class="difflineminus">-    Py_XDECREF(items);</span>
<a href="#l17.2425"></a><span id="l17.2425" class="difflineminus">-    Py_XDECREF(iter);</span>
<a href="#l17.2426"></a><span id="l17.2426" class="difflineminus">-    Py_XDECREF(kstr);</span>
<a href="#l17.2427"></a><span id="l17.2427" class="difflineminus">-    Py_XDECREF(ident);</span>
<a href="#l17.2428"></a><span id="l17.2428" class="difflineminus">-    return -1;</span>
<a href="#l17.2429"></a><span id="l17.2429" class="difflineminus">-}</span>
<a href="#l17.2430"></a><span id="l17.2430" class="difflineminus">-</span>
<a href="#l17.2431"></a><span id="l17.2431" class="difflineminus">-</span>
<a href="#l17.2432"></a><span id="l17.2432" class="difflineminus">-static int</span>
<a href="#l17.2433"></a><span id="l17.2433" class="difflineminus">-encoder_listencode_list(PyEncoderObject *s, PyObject *rval, PyObject *seq, Py_ssize_t indent_level)</span>
<a href="#l17.2434"></a><span id="l17.2434" class="difflineminus">-{</span>
<a href="#l17.2435"></a><span id="l17.2435" class="difflineminus">-    /* Encode Python list seq to a JSON term, rval is a PyList */</span>
<a href="#l17.2436"></a><span id="l17.2436" class="difflineminus">-    static PyObject *open_array = NULL;</span>
<a href="#l17.2437"></a><span id="l17.2437" class="difflineminus">-    static PyObject *close_array = NULL;</span>
<a href="#l17.2438"></a><span id="l17.2438" class="difflineminus">-    static PyObject *empty_array = NULL;</span>
<a href="#l17.2439"></a><span id="l17.2439" class="difflineminus">-    PyObject *ident = NULL;</span>
<a href="#l17.2440"></a><span id="l17.2440" class="difflineminus">-    PyObject *iter = NULL;</span>
<a href="#l17.2441"></a><span id="l17.2441" class="difflineminus">-    PyObject *obj = NULL;</span>
<a href="#l17.2442"></a><span id="l17.2442" class="difflineminus">-    int is_true;</span>
<a href="#l17.2443"></a><span id="l17.2443" class="difflineminus">-    int i = 0;</span>
<a href="#l17.2444"></a><span id="l17.2444" class="difflineminus">-</span>
<a href="#l17.2445"></a><span id="l17.2445" class="difflineminus">-    if (open_array == NULL || close_array == NULL || empty_array == NULL) {</span>
<a href="#l17.2446"></a><span id="l17.2446" class="difflineminus">-        open_array = PyString_InternFromString(&quot;[&quot;);</span>
<a href="#l17.2447"></a><span id="l17.2447" class="difflineminus">-        close_array = PyString_InternFromString(&quot;]&quot;);</span>
<a href="#l17.2448"></a><span id="l17.2448" class="difflineminus">-        empty_array = PyString_InternFromString(&quot;[]&quot;);</span>
<a href="#l17.2449"></a><span id="l17.2449" class="difflineminus">-        if (open_array == NULL || close_array == NULL || empty_array == NULL)</span>
<a href="#l17.2450"></a><span id="l17.2450" class="difflineminus">-            return -1;</span>
<a href="#l17.2451"></a><span id="l17.2451" class="difflineminus">-    }</span>
<a href="#l17.2452"></a><span id="l17.2452" class="difflineminus">-    ident = NULL;</span>
<a href="#l17.2453"></a><span id="l17.2453" class="difflineminus">-    is_true = PyObject_IsTrue(seq);</span>
<a href="#l17.2454"></a><span id="l17.2454" class="difflineminus">-    if (is_true == -1)</span>
<a href="#l17.2455"></a><span id="l17.2455" class="difflineminus">-        return -1;</span>
<a href="#l17.2456"></a><span id="l17.2456" class="difflineminus">-    else if (is_true == 0)</span>
<a href="#l17.2457"></a><span id="l17.2457" class="difflineminus">-        return PyList_Append(rval, empty_array);</span>
<a href="#l17.2458"></a><span id="l17.2458" class="difflineminus">-</span>
<a href="#l17.2459"></a><span id="l17.2459" class="difflineminus">-    if (s-&gt;markers != Py_None) {</span>
<a href="#l17.2460"></a><span id="l17.2460" class="difflineminus">-        int has_key;</span>
<a href="#l17.2461"></a><span id="l17.2461" class="difflineminus">-        ident = PyLong_FromVoidPtr(seq);</span>
<a href="#l17.2462"></a><span id="l17.2462" class="difflineminus">-        if (ident == NULL)</span>
<a href="#l17.2463"></a><span id="l17.2463" class="difflineminus">-            goto bail;</span>
<a href="#l17.2464"></a><span id="l17.2464" class="difflineminus">-        has_key = PyDict_Contains(s-&gt;markers, ident);</span>
<a href="#l17.2465"></a><span id="l17.2465" class="difflineminus">-        if (has_key) {</span>
<a href="#l17.2466"></a><span id="l17.2466" class="difflineminus">-            if (has_key != -1)</span>
<a href="#l17.2467"></a><span id="l17.2467" class="difflineminus">-                PyErr_SetString(PyExc_ValueError, &quot;Circular reference detected&quot;);</span>
<a href="#l17.2468"></a><span id="l17.2468" class="difflineminus">-            goto bail;</span>
<a href="#l17.2469"></a><span id="l17.2469" class="difflineminus">-        }</span>
<a href="#l17.2470"></a><span id="l17.2470" class="difflineminus">-        if (PyDict_SetItem(s-&gt;markers, ident, seq)) {</span>
<a href="#l17.2471"></a><span id="l17.2471" class="difflineminus">-            goto bail;</span>
<a href="#l17.2472"></a><span id="l17.2472" class="difflineminus">-        }</span>
<a href="#l17.2473"></a><span id="l17.2473" class="difflineminus">-    }</span>
<a href="#l17.2474"></a><span id="l17.2474" class="difflineminus">-</span>
<a href="#l17.2475"></a><span id="l17.2475" class="difflineminus">-    iter = PyObject_GetIter(seq);</span>
<a href="#l17.2476"></a><span id="l17.2476" class="difflineminus">-    if (iter == NULL)</span>
<a href="#l17.2477"></a><span id="l17.2477" class="difflineminus">-        goto bail;</span>
<a href="#l17.2478"></a><span id="l17.2478" class="difflineminus">-</span>
<a href="#l17.2479"></a><span id="l17.2479" class="difflineminus">-    if (PyList_Append(rval, open_array))</span>
<a href="#l17.2480"></a><span id="l17.2480" class="difflineminus">-        goto bail;</span>
<a href="#l17.2481"></a><span id="l17.2481" class="difflineminus">-    if (s-&gt;indent != Py_None) {</span>
<a href="#l17.2482"></a><span id="l17.2482" class="difflineminus">-        /* TODO: DOES NOT RUN */</span>
<a href="#l17.2483"></a><span id="l17.2483" class="difflineminus">-        indent_level += 1;</span>
<a href="#l17.2484"></a><span id="l17.2484" class="difflineminus">-        /*</span>
<a href="#l17.2485"></a><span id="l17.2485" class="difflineminus">-            newline_indent = '\n' + (_indent * _current_indent_level)</span>
<a href="#l17.2486"></a><span id="l17.2486" class="difflineminus">-            separator = _item_separator + newline_indent</span>
<a href="#l17.2487"></a><span id="l17.2487" class="difflineminus">-            buf += newline_indent</span>
<a href="#l17.2488"></a><span id="l17.2488" class="difflineminus">-        */</span>
<a href="#l17.2489"></a><span id="l17.2489" class="difflineminus">-    }</span>
<a href="#l17.2490"></a><span id="l17.2490" class="difflineminus">-    while ((obj = PyIter_Next(iter))) {</span>
<a href="#l17.2491"></a><span id="l17.2491" class="difflineminus">-        if (i) {</span>
<a href="#l17.2492"></a><span id="l17.2492" class="difflineminus">-            if (PyList_Append(rval, s-&gt;item_separator))</span>
<a href="#l17.2493"></a><span id="l17.2493" class="difflineminus">-                goto bail;</span>
<a href="#l17.2494"></a><span id="l17.2494" class="difflineminus">-        }</span>
<a href="#l17.2495"></a><span id="l17.2495" class="difflineminus">-        if (encoder_listencode_obj(s, rval, obj, indent_level))</span>
<a href="#l17.2496"></a><span id="l17.2496" class="difflineminus">-            goto bail;</span>
<a href="#l17.2497"></a><span id="l17.2497" class="difflineminus">-        i++;</span>
<a href="#l17.2498"></a><span id="l17.2498" class="difflineminus">-        Py_CLEAR(obj);</span>
<a href="#l17.2499"></a><span id="l17.2499" class="difflineminus">-    }</span>
<a href="#l17.2500"></a><span id="l17.2500" class="difflineminus">-    Py_CLEAR(iter);</span>
<a href="#l17.2501"></a><span id="l17.2501" class="difflineminus">-    if (PyErr_Occurred())</span>
<a href="#l17.2502"></a><span id="l17.2502" class="difflineminus">-        goto bail;</span>
<a href="#l17.2503"></a><span id="l17.2503" class="difflineminus">-    if (ident != NULL) {</span>
<a href="#l17.2504"></a><span id="l17.2504" class="difflineminus">-        if (PyDict_DelItem(s-&gt;markers, ident))</span>
<a href="#l17.2505"></a><span id="l17.2505" class="difflineminus">-            goto bail;</span>
<a href="#l17.2506"></a><span id="l17.2506" class="difflineminus">-        Py_CLEAR(ident);</span>
<a href="#l17.2507"></a><span id="l17.2507" class="difflineminus">-    }</span>
<a href="#l17.2508"></a><span id="l17.2508" class="difflineminus">-    if (s-&gt;indent != Py_None) {</span>
<a href="#l17.2509"></a><span id="l17.2509" class="difflineminus">-        /* TODO: DOES NOT RUN */</span>
<a href="#l17.2510"></a><span id="l17.2510" class="difflineminus">-        indent_level -= 1;</span>
<a href="#l17.2511"></a><span id="l17.2511" class="difflineminus">-        /*</span>
<a href="#l17.2512"></a><span id="l17.2512" class="difflineminus">-            yield '\n' + (_indent * _current_indent_level)</span>
<a href="#l17.2513"></a><span id="l17.2513" class="difflineminus">-        */</span>
<a href="#l17.2514"></a><span id="l17.2514" class="difflineminus">-    }</span>
<a href="#l17.2515"></a><span id="l17.2515" class="difflineminus">-    if (PyList_Append(rval, close_array))</span>
<a href="#l17.2516"></a><span id="l17.2516" class="difflineminus">-        goto bail;</span>
<a href="#l17.2517"></a><span id="l17.2517" class="difflineminus">-    return 0;</span>
<a href="#l17.2518"></a><span id="l17.2518" class="difflineminus">-</span>
<a href="#l17.2519"></a><span id="l17.2519" class="difflineminus">-bail:</span>
<a href="#l17.2520"></a><span id="l17.2520" class="difflineminus">-    Py_XDECREF(obj);</span>
<a href="#l17.2521"></a><span id="l17.2521" class="difflineminus">-    Py_XDECREF(iter);</span>
<a href="#l17.2522"></a><span id="l17.2522" class="difflineminus">-    Py_XDECREF(ident);</span>
<a href="#l17.2523"></a><span id="l17.2523" class="difflineminus">-    return -1;</span>
<a href="#l17.2524"></a><span id="l17.2524" class="difflineminus">-}</span>
<a href="#l17.2525"></a><span id="l17.2525" class="difflineminus">-</span>
<a href="#l17.2526"></a><span id="l17.2526" class="difflineminus">-static void</span>
<a href="#l17.2527"></a><span id="l17.2527" class="difflineminus">-encoder_dealloc(PyObject *self)</span>
<a href="#l17.2528"></a><span id="l17.2528" class="difflineminus">-{</span>
<a href="#l17.2529"></a><span id="l17.2529" class="difflineminus">-    /* Deallocate Encoder */</span>
<a href="#l17.2530"></a><span id="l17.2530" class="difflineminus">-    encoder_clear(self);</span>
<a href="#l17.2531"></a><span id="l17.2531" class="difflineminus">-    Py_TYPE(self)-&gt;tp_free(self);</span>
<a href="#l17.2532"></a><span id="l17.2532" class="difflineminus">-}</span>
<a href="#l17.2533"></a><span id="l17.2533" class="difflineminus">-</span>
<a href="#l17.2534"></a><span id="l17.2534" class="difflineminus">-static int</span>
<a href="#l17.2535"></a><span id="l17.2535" class="difflineminus">-encoder_traverse(PyObject *self, visitproc visit, void *arg)</span>
<a href="#l17.2536"></a><span id="l17.2536" class="difflineminus">-{</span>
<a href="#l17.2537"></a><span id="l17.2537" class="difflineminus">-    PyEncoderObject *s;</span>
<a href="#l17.2538"></a><span id="l17.2538" class="difflineminus">-    assert(PyEncoder_Check(self));</span>
<a href="#l17.2539"></a><span id="l17.2539" class="difflineminus">-    s = (PyEncoderObject *)self;</span>
<a href="#l17.2540"></a><span id="l17.2540" class="difflineminus">-    Py_VISIT(s-&gt;markers);</span>
<a href="#l17.2541"></a><span id="l17.2541" class="difflineminus">-    Py_VISIT(s-&gt;defaultfn);</span>
<a href="#l17.2542"></a><span id="l17.2542" class="difflineminus">-    Py_VISIT(s-&gt;encoder);</span>
<a href="#l17.2543"></a><span id="l17.2543" class="difflineminus">-    Py_VISIT(s-&gt;indent);</span>
<a href="#l17.2544"></a><span id="l17.2544" class="difflineminus">-    Py_VISIT(s-&gt;key_separator);</span>
<a href="#l17.2545"></a><span id="l17.2545" class="difflineminus">-    Py_VISIT(s-&gt;item_separator);</span>
<a href="#l17.2546"></a><span id="l17.2546" class="difflineminus">-    Py_VISIT(s-&gt;sort_keys);</span>
<a href="#l17.2547"></a><span id="l17.2547" class="difflineminus">-    Py_VISIT(s-&gt;skipkeys);</span>
<a href="#l17.2548"></a><span id="l17.2548" class="difflineminus">-    Py_VISIT(s-&gt;key_memo);</span>
<a href="#l17.2549"></a><span id="l17.2549" class="difflineminus">-    return 0;</span>
<a href="#l17.2550"></a><span id="l17.2550" class="difflineminus">-}</span>
<a href="#l17.2551"></a><span id="l17.2551" class="difflineminus">-</span>
<a href="#l17.2552"></a><span id="l17.2552" class="difflineminus">-static int</span>
<a href="#l17.2553"></a><span id="l17.2553" class="difflineminus">-encoder_clear(PyObject *self)</span>
<a href="#l17.2554"></a><span id="l17.2554" class="difflineminus">-{</span>
<a href="#l17.2555"></a><span id="l17.2555" class="difflineminus">-    /* Deallocate Encoder */</span>
<a href="#l17.2556"></a><span id="l17.2556" class="difflineminus">-    PyEncoderObject *s;</span>
<a href="#l17.2557"></a><span id="l17.2557" class="difflineminus">-    assert(PyEncoder_Check(self));</span>
<a href="#l17.2558"></a><span id="l17.2558" class="difflineminus">-    s = (PyEncoderObject *)self;</span>
<a href="#l17.2559"></a><span id="l17.2559" class="difflineminus">-    Py_CLEAR(s-&gt;markers);</span>
<a href="#l17.2560"></a><span id="l17.2560" class="difflineminus">-    Py_CLEAR(s-&gt;defaultfn);</span>
<a href="#l17.2561"></a><span id="l17.2561" class="difflineminus">-    Py_CLEAR(s-&gt;encoder);</span>
<a href="#l17.2562"></a><span id="l17.2562" class="difflineminus">-    Py_CLEAR(s-&gt;indent);</span>
<a href="#l17.2563"></a><span id="l17.2563" class="difflineminus">-    Py_CLEAR(s-&gt;key_separator);</span>
<a href="#l17.2564"></a><span id="l17.2564" class="difflineminus">-    Py_CLEAR(s-&gt;item_separator);</span>
<a href="#l17.2565"></a><span id="l17.2565" class="difflineminus">-    Py_CLEAR(s-&gt;sort_keys);</span>
<a href="#l17.2566"></a><span id="l17.2566" class="difflineminus">-    Py_CLEAR(s-&gt;skipkeys);</span>
<a href="#l17.2567"></a><span id="l17.2567" class="difflineminus">-    Py_CLEAR(s-&gt;key_memo);</span>
<a href="#l17.2568"></a><span id="l17.2568" class="difflineminus">-    return 0;</span>
<a href="#l17.2569"></a><span id="l17.2569" class="difflineminus">-}</span>
<a href="#l17.2570"></a><span id="l17.2570" class="difflineminus">-</span>
<a href="#l17.2571"></a><span id="l17.2571" class="difflineminus">-PyDoc_STRVAR(encoder_doc, &quot;_iterencode(obj, _current_indent_level) -&gt; iterable&quot;);</span>
<a href="#l17.2572"></a><span id="l17.2572" class="difflineminus">-</span>
<a href="#l17.2573"></a><span id="l17.2573" class="difflineminus">-static</span>
<a href="#l17.2574"></a><span id="l17.2574" class="difflineminus">-PyTypeObject PyEncoderType = {</span>
<a href="#l17.2575"></a><span id="l17.2575" class="difflineminus">-    PyObject_HEAD_INIT(NULL)</span>
<a href="#l17.2576"></a><span id="l17.2576" class="difflineminus">-    0,                    /* tp_internal */</span>
<a href="#l17.2577"></a><span id="l17.2577" class="difflineminus">-    &quot;simplejson._speedups.Encoder&quot;,       /* tp_name */</span>
<a href="#l17.2578"></a><span id="l17.2578" class="difflineminus">-    sizeof(PyEncoderObject), /* tp_basicsize */</span>
<a href="#l17.2579"></a><span id="l17.2579" class="difflineminus">-    0,                    /* tp_itemsize */</span>
<a href="#l17.2580"></a><span id="l17.2580" class="difflineminus">-    encoder_dealloc, /* tp_dealloc */</span>
<a href="#l17.2581"></a><span id="l17.2581" class="difflineminus">-    0,                    /* tp_print */</span>
<a href="#l17.2582"></a><span id="l17.2582" class="difflineminus">-    0,                    /* tp_getattr */</span>
<a href="#l17.2583"></a><span id="l17.2583" class="difflineminus">-    0,                    /* tp_setattr */</span>
<a href="#l17.2584"></a><span id="l17.2584" class="difflineminus">-    0,                    /* tp_compare */</span>
<a href="#l17.2585"></a><span id="l17.2585" class="difflineminus">-    0,                    /* tp_repr */</span>
<a href="#l17.2586"></a><span id="l17.2586" class="difflineminus">-    0,                    /* tp_as_number */</span>
<a href="#l17.2587"></a><span id="l17.2587" class="difflineminus">-    0,                    /* tp_as_sequence */</span>
<a href="#l17.2588"></a><span id="l17.2588" class="difflineminus">-    0,                    /* tp_as_mapping */</span>
<a href="#l17.2589"></a><span id="l17.2589" class="difflineminus">-    0,                    /* tp_hash */</span>
<a href="#l17.2590"></a><span id="l17.2590" class="difflineminus">-    encoder_call,         /* tp_call */</span>
<a href="#l17.2591"></a><span id="l17.2591" class="difflineminus">-    0,                    /* tp_str */</span>
<a href="#l17.2592"></a><span id="l17.2592" class="difflineminus">-    0,                    /* tp_getattro */</span>
<a href="#l17.2593"></a><span id="l17.2593" class="difflineminus">-    0,                    /* tp_setattro */</span>
<a href="#l17.2594"></a><span id="l17.2594" class="difflineminus">-    0,                    /* tp_as_buffer */</span>
<a href="#l17.2595"></a><span id="l17.2595" class="difflineminus">-    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,   /* tp_flags */</span>
<a href="#l17.2596"></a><span id="l17.2596" class="difflineminus">-    encoder_doc,          /* tp_doc */</span>
<a href="#l17.2597"></a><span id="l17.2597" class="difflineminus">-    encoder_traverse,     /* tp_traverse */</span>
<a href="#l17.2598"></a><span id="l17.2598" class="difflineminus">-    encoder_clear,        /* tp_clear */</span>
<a href="#l17.2599"></a><span id="l17.2599" class="difflineminus">-    0,                    /* tp_richcompare */</span>
<a href="#l17.2600"></a><span id="l17.2600" class="difflineminus">-    0,                    /* tp_weaklistoffset */</span>
<a href="#l17.2601"></a><span id="l17.2601" class="difflineminus">-    0,                    /* tp_iter */</span>
<a href="#l17.2602"></a><span id="l17.2602" class="difflineminus">-    0,                    /* tp_iternext */</span>
<a href="#l17.2603"></a><span id="l17.2603" class="difflineminus">-    0,                    /* tp_methods */</span>
<a href="#l17.2604"></a><span id="l17.2604" class="difflineminus">-    encoder_members,      /* tp_members */</span>
<a href="#l17.2605"></a><span id="l17.2605" class="difflineminus">-    0,                    /* tp_getset */</span>
<a href="#l17.2606"></a><span id="l17.2606" class="difflineminus">-    0,                    /* tp_base */</span>
<a href="#l17.2607"></a><span id="l17.2607" class="difflineminus">-    0,                    /* tp_dict */</span>
<a href="#l17.2608"></a><span id="l17.2608" class="difflineminus">-    0,                    /* tp_descr_get */</span>
<a href="#l17.2609"></a><span id="l17.2609" class="difflineminus">-    0,                    /* tp_descr_set */</span>
<a href="#l17.2610"></a><span id="l17.2610" class="difflineminus">-    0,                    /* tp_dictoffset */</span>
<a href="#l17.2611"></a><span id="l17.2611" class="difflineminus">-    encoder_init,         /* tp_init */</span>
<a href="#l17.2612"></a><span id="l17.2612" class="difflineminus">-    0,                    /* tp_alloc */</span>
<a href="#l17.2613"></a><span id="l17.2613" class="difflineminus">-    encoder_new,          /* tp_new */</span>
<a href="#l17.2614"></a><span id="l17.2614" class="difflineminus">-    0,                    /* tp_free */</span>
<a href="#l17.2615"></a><span id="l17.2615" class="difflineminus">-};</span>
<a href="#l17.2616"></a><span id="l17.2616" class="difflineminus">-</span>
<a href="#l17.2617"></a><span id="l17.2617" class="difflineminus">-static PyMethodDef speedups_methods[] = {</span>
<a href="#l17.2618"></a><span id="l17.2618" class="difflineminus">-    {&quot;encode_basestring_ascii&quot;,</span>
<a href="#l17.2619"></a><span id="l17.2619" class="difflineminus">-        (PyCFunction)py_encode_basestring_ascii,</span>
<a href="#l17.2620"></a><span id="l17.2620" class="difflineminus">-        METH_O,</span>
<a href="#l17.2621"></a><span id="l17.2621" class="difflineminus">-        pydoc_encode_basestring_ascii},</span>
<a href="#l17.2622"></a><span id="l17.2622" class="difflineminus">-    {&quot;scanstring&quot;,</span>
<a href="#l17.2623"></a><span id="l17.2623" class="difflineminus">-        (PyCFunction)py_scanstring,</span>
<a href="#l17.2624"></a><span id="l17.2624" class="difflineminus">-        METH_VARARGS,</span>
<a href="#l17.2625"></a><span id="l17.2625" class="difflineminus">-        pydoc_scanstring},</span>
<a href="#l17.2626"></a><span id="l17.2626" class="difflineminus">-    {NULL, NULL, 0, NULL}</span>
<a href="#l17.2627"></a><span id="l17.2627" class="difflineminus">-};</span>
<a href="#l17.2628"></a><span id="l17.2628" class="difflineminus">-</span>
<a href="#l17.2629"></a><span id="l17.2629" class="difflineminus">-PyDoc_STRVAR(module_doc,</span>
<a href="#l17.2630"></a><span id="l17.2630" class="difflineminus">-&quot;simplejson speedups\n&quot;);</span>
<a href="#l17.2631"></a><span id="l17.2631" class="difflineminus">-</span>
<a href="#l17.2632"></a><span id="l17.2632" class="difflineminus">-void</span>
<a href="#l17.2633"></a><span id="l17.2633" class="difflineminus">-init_speedups(void)</span>
<a href="#l17.2634"></a><span id="l17.2634" class="difflineminus">-{</span>
<a href="#l17.2635"></a><span id="l17.2635" class="difflineminus">-    PyObject *m, *decimal;</span>
<a href="#l17.2636"></a><span id="l17.2636" class="difflineminus">-    PyScannerType.tp_new = PyType_GenericNew;</span>
<a href="#l17.2637"></a><span id="l17.2637" class="difflineminus">-    if (PyType_Ready(&amp;PyScannerType) &lt; 0)</span>
<a href="#l17.2638"></a><span id="l17.2638" class="difflineminus">-        return;</span>
<a href="#l17.2639"></a><span id="l17.2639" class="difflineminus">-    PyEncoderType.tp_new = PyType_GenericNew;</span>
<a href="#l17.2640"></a><span id="l17.2640" class="difflineminus">-    if (PyType_Ready(&amp;PyEncoderType) &lt; 0)</span>
<a href="#l17.2641"></a><span id="l17.2641" class="difflineminus">-        return;</span>
<a href="#l17.2642"></a><span id="l17.2642" class="difflineminus">-</span>
<a href="#l17.2643"></a><span id="l17.2643" class="difflineminus">-    decimal = PyImport_ImportModule(&quot;decimal&quot;);</span>
<a href="#l17.2644"></a><span id="l17.2644" class="difflineminus">-    if (decimal == NULL)</span>
<a href="#l17.2645"></a><span id="l17.2645" class="difflineminus">-        return;</span>
<a href="#l17.2646"></a><span id="l17.2646" class="difflineminus">-    DecimalTypePtr = (PyTypeObject*)PyObject_GetAttrString(decimal, &quot;Decimal&quot;);</span>
<a href="#l17.2647"></a><span id="l17.2647" class="difflineminus">-    Py_DECREF(decimal);</span>
<a href="#l17.2648"></a><span id="l17.2648" class="difflineminus">-    if (DecimalTypePtr == NULL)</span>
<a href="#l17.2649"></a><span id="l17.2649" class="difflineminus">-        return;</span>
<a href="#l17.2650"></a><span id="l17.2650" class="difflineminus">-</span>
<a href="#l17.2651"></a><span id="l17.2651" class="difflineminus">-    m = Py_InitModule3(&quot;_speedups&quot;, speedups_methods, module_doc);</span>
<a href="#l17.2652"></a><span id="l17.2652" class="difflineminus">-    Py_INCREF((PyObject*)&amp;PyScannerType);</span>
<a href="#l17.2653"></a><span id="l17.2653" class="difflineminus">-    PyModule_AddObject(m, &quot;make_scanner&quot;, (PyObject*)&amp;PyScannerType);</span>
<a href="#l17.2654"></a><span id="l17.2654" class="difflineminus">-    Py_INCREF((PyObject*)&amp;PyEncoderType);</span>
<a href="#l17.2655"></a><span id="l17.2655" class="difflineminus">-    PyModule_AddObject(m, &quot;make_encoder&quot;, (PyObject*)&amp;PyEncoderType);</span>
<a href="#l17.2656"></a><span id="l17.2656" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">deleted file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/decoder.py</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ /dev/null</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -1,421 +0,0 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineminus">-&quot;&quot;&quot;Implementation of JSONDecoder</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">-import re</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">-import sys</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">-import struct</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineminus">-</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineminus">-from simplejson.scanner import make_scanner</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-def _import_c_scanstring():</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-    try:</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-        from simplejson._speedups import scanstring</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-        return scanstring</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-    except ImportError:</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-        return None</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-c_scanstring = _import_c_scanstring()</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-__all__ = ['JSONDecoder']</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-</span>
<a href="#l18.22"></a><span id="l18.22" class="difflineminus">-FLAGS = re.VERBOSE | re.MULTILINE | re.DOTALL</span>
<a href="#l18.23"></a><span id="l18.23" class="difflineminus">-</span>
<a href="#l18.24"></a><span id="l18.24" class="difflineminus">-def _floatconstants():</span>
<a href="#l18.25"></a><span id="l18.25" class="difflineminus">-    _BYTES = '7FF80000000000007FF0000000000000'.decode('hex')</span>
<a href="#l18.26"></a><span id="l18.26" class="difflineminus">-    # The struct module in Python 2.4 would get frexp() out of range here</span>
<a href="#l18.27"></a><span id="l18.27" class="difflineminus">-    # when an endian is specified in the format string. Fixed in Python 2.5+</span>
<a href="#l18.28"></a><span id="l18.28" class="difflineminus">-    if sys.byteorder != 'big':</span>
<a href="#l18.29"></a><span id="l18.29" class="difflineminus">-        _BYTES = _BYTES[:8][::-1] + _BYTES[8:][::-1]</span>
<a href="#l18.30"></a><span id="l18.30" class="difflineminus">-    nan, inf = struct.unpack('dd', _BYTES)</span>
<a href="#l18.31"></a><span id="l18.31" class="difflineminus">-    return nan, inf, -inf</span>
<a href="#l18.32"></a><span id="l18.32" class="difflineminus">-</span>
<a href="#l18.33"></a><span id="l18.33" class="difflineminus">-NaN, PosInf, NegInf = _floatconstants()</span>
<a href="#l18.34"></a><span id="l18.34" class="difflineminus">-</span>
<a href="#l18.35"></a><span id="l18.35" class="difflineminus">-</span>
<a href="#l18.36"></a><span id="l18.36" class="difflineminus">-class JSONDecodeError(ValueError):</span>
<a href="#l18.37"></a><span id="l18.37" class="difflineminus">-    &quot;&quot;&quot;Subclass of ValueError with the following additional properties:</span>
<a href="#l18.38"></a><span id="l18.38" class="difflineminus">-</span>
<a href="#l18.39"></a><span id="l18.39" class="difflineminus">-    msg: The unformatted error message</span>
<a href="#l18.40"></a><span id="l18.40" class="difflineminus">-    doc: The JSON document being parsed</span>
<a href="#l18.41"></a><span id="l18.41" class="difflineminus">-    pos: The start index of doc where parsing failed</span>
<a href="#l18.42"></a><span id="l18.42" class="difflineminus">-    end: The end index of doc where parsing failed (may be None)</span>
<a href="#l18.43"></a><span id="l18.43" class="difflineminus">-    lineno: The line corresponding to pos</span>
<a href="#l18.44"></a><span id="l18.44" class="difflineminus">-    colno: The column corresponding to pos</span>
<a href="#l18.45"></a><span id="l18.45" class="difflineminus">-    endlineno: The line corresponding to end (may be None)</span>
<a href="#l18.46"></a><span id="l18.46" class="difflineminus">-    endcolno: The column corresponding to end (may be None)</span>
<a href="#l18.47"></a><span id="l18.47" class="difflineminus">-</span>
<a href="#l18.48"></a><span id="l18.48" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l18.49"></a><span id="l18.49" class="difflineminus">-    def __init__(self, msg, doc, pos, end=None):</span>
<a href="#l18.50"></a><span id="l18.50" class="difflineminus">-        ValueError.__init__(self, errmsg(msg, doc, pos, end=end))</span>
<a href="#l18.51"></a><span id="l18.51" class="difflineminus">-        self.msg = msg</span>
<a href="#l18.52"></a><span id="l18.52" class="difflineminus">-        self.doc = doc</span>
<a href="#l18.53"></a><span id="l18.53" class="difflineminus">-        self.pos = pos</span>
<a href="#l18.54"></a><span id="l18.54" class="difflineminus">-        self.end = end</span>
<a href="#l18.55"></a><span id="l18.55" class="difflineminus">-        self.lineno, self.colno = linecol(doc, pos)</span>
<a href="#l18.56"></a><span id="l18.56" class="difflineminus">-        if end is not None:</span>
<a href="#l18.57"></a><span id="l18.57" class="difflineminus">-            self.endlineno, self.endcolno = linecol(doc, end)</span>
<a href="#l18.58"></a><span id="l18.58" class="difflineminus">-        else:</span>
<a href="#l18.59"></a><span id="l18.59" class="difflineminus">-            self.endlineno, self.endcolno = None, None</span>
<a href="#l18.60"></a><span id="l18.60" class="difflineminus">-</span>
<a href="#l18.61"></a><span id="l18.61" class="difflineminus">-</span>
<a href="#l18.62"></a><span id="l18.62" class="difflineminus">-def linecol(doc, pos):</span>
<a href="#l18.63"></a><span id="l18.63" class="difflineminus">-    lineno = doc.count('\n', 0, pos) + 1</span>
<a href="#l18.64"></a><span id="l18.64" class="difflineminus">-    if lineno == 1:</span>
<a href="#l18.65"></a><span id="l18.65" class="difflineminus">-        colno = pos</span>
<a href="#l18.66"></a><span id="l18.66" class="difflineminus">-    else:</span>
<a href="#l18.67"></a><span id="l18.67" class="difflineminus">-        colno = pos - doc.rindex('\n', 0, pos)</span>
<a href="#l18.68"></a><span id="l18.68" class="difflineminus">-    return lineno, colno</span>
<a href="#l18.69"></a><span id="l18.69" class="difflineminus">-</span>
<a href="#l18.70"></a><span id="l18.70" class="difflineminus">-</span>
<a href="#l18.71"></a><span id="l18.71" class="difflineminus">-def errmsg(msg, doc, pos, end=None):</span>
<a href="#l18.72"></a><span id="l18.72" class="difflineminus">-    # Note that this function is called from _speedups</span>
<a href="#l18.73"></a><span id="l18.73" class="difflineminus">-    lineno, colno = linecol(doc, pos)</span>
<a href="#l18.74"></a><span id="l18.74" class="difflineminus">-    if end is None:</span>
<a href="#l18.75"></a><span id="l18.75" class="difflineminus">-        #fmt = '{0}: line {1} column {2} (char {3})'</span>
<a href="#l18.76"></a><span id="l18.76" class="difflineminus">-        #return fmt.format(msg, lineno, colno, pos)</span>
<a href="#l18.77"></a><span id="l18.77" class="difflineminus">-        fmt = '%s: line %d column %d (char %d)'</span>
<a href="#l18.78"></a><span id="l18.78" class="difflineminus">-        return fmt % (msg, lineno, colno, pos)</span>
<a href="#l18.79"></a><span id="l18.79" class="difflineminus">-    endlineno, endcolno = linecol(doc, end)</span>
<a href="#l18.80"></a><span id="l18.80" class="difflineminus">-    #fmt = '{0}: line {1} column {2} - line {3} column {4} (char {5} - {6})'</span>
<a href="#l18.81"></a><span id="l18.81" class="difflineminus">-    #return fmt.format(msg, lineno, colno, endlineno, endcolno, pos, end)</span>
<a href="#l18.82"></a><span id="l18.82" class="difflineminus">-    fmt = '%s: line %d column %d - line %d column %d (char %d - %d)'</span>
<a href="#l18.83"></a><span id="l18.83" class="difflineminus">-    return fmt % (msg, lineno, colno, endlineno, endcolno, pos, end)</span>
<a href="#l18.84"></a><span id="l18.84" class="difflineminus">-</span>
<a href="#l18.85"></a><span id="l18.85" class="difflineminus">-</span>
<a href="#l18.86"></a><span id="l18.86" class="difflineminus">-_CONSTANTS = {</span>
<a href="#l18.87"></a><span id="l18.87" class="difflineminus">-    '-Infinity': NegInf,</span>
<a href="#l18.88"></a><span id="l18.88" class="difflineminus">-    'Infinity': PosInf,</span>
<a href="#l18.89"></a><span id="l18.89" class="difflineminus">-    'NaN': NaN,</span>
<a href="#l18.90"></a><span id="l18.90" class="difflineminus">-}</span>
<a href="#l18.91"></a><span id="l18.91" class="difflineminus">-</span>
<a href="#l18.92"></a><span id="l18.92" class="difflineminus">-STRINGCHUNK = re.compile(r'(.*?)([&quot;\\\x00-\x1f])', FLAGS)</span>
<a href="#l18.93"></a><span id="l18.93" class="difflineminus">-BACKSLASH = {</span>
<a href="#l18.94"></a><span id="l18.94" class="difflineminus">-    '&quot;': u'&quot;', '\\': u'\\', '/': u'/',</span>
<a href="#l18.95"></a><span id="l18.95" class="difflineminus">-    'b': u'\b', 'f': u'\f', 'n': u'\n', 'r': u'\r', 't': u'\t',</span>
<a href="#l18.96"></a><span id="l18.96" class="difflineminus">-}</span>
<a href="#l18.97"></a><span id="l18.97" class="difflineminus">-</span>
<a href="#l18.98"></a><span id="l18.98" class="difflineminus">-DEFAULT_ENCODING = &quot;utf-8&quot;</span>
<a href="#l18.99"></a><span id="l18.99" class="difflineminus">-</span>
<a href="#l18.100"></a><span id="l18.100" class="difflineminus">-def py_scanstring(s, end, encoding=None, strict=True,</span>
<a href="#l18.101"></a><span id="l18.101" class="difflineminus">-        _b=BACKSLASH, _m=STRINGCHUNK.match):</span>
<a href="#l18.102"></a><span id="l18.102" class="difflineminus">-    &quot;&quot;&quot;Scan the string s for a JSON string. End is the index of the</span>
<a href="#l18.103"></a><span id="l18.103" class="difflineminus">-    character in s after the quote that started the JSON string.</span>
<a href="#l18.104"></a><span id="l18.104" class="difflineminus">-    Unescapes all valid JSON string escape sequences and raises ValueError</span>
<a href="#l18.105"></a><span id="l18.105" class="difflineminus">-    on attempt to decode an invalid string. If strict is False then literal</span>
<a href="#l18.106"></a><span id="l18.106" class="difflineminus">-    control characters are allowed in the string.</span>
<a href="#l18.107"></a><span id="l18.107" class="difflineminus">-</span>
<a href="#l18.108"></a><span id="l18.108" class="difflineminus">-    Returns a tuple of the decoded string and the index of the character in s</span>
<a href="#l18.109"></a><span id="l18.109" class="difflineminus">-    after the end quote.&quot;&quot;&quot;</span>
<a href="#l18.110"></a><span id="l18.110" class="difflineminus">-    if encoding is None:</span>
<a href="#l18.111"></a><span id="l18.111" class="difflineminus">-        encoding = DEFAULT_ENCODING</span>
<a href="#l18.112"></a><span id="l18.112" class="difflineminus">-    chunks = []</span>
<a href="#l18.113"></a><span id="l18.113" class="difflineminus">-    _append = chunks.append</span>
<a href="#l18.114"></a><span id="l18.114" class="difflineminus">-    begin = end - 1</span>
<a href="#l18.115"></a><span id="l18.115" class="difflineminus">-    while 1:</span>
<a href="#l18.116"></a><span id="l18.116" class="difflineminus">-        chunk = _m(s, end)</span>
<a href="#l18.117"></a><span id="l18.117" class="difflineminus">-        if chunk is None:</span>
<a href="#l18.118"></a><span id="l18.118" class="difflineminus">-            raise JSONDecodeError(</span>
<a href="#l18.119"></a><span id="l18.119" class="difflineminus">-                &quot;Unterminated string starting at&quot;, s, begin)</span>
<a href="#l18.120"></a><span id="l18.120" class="difflineminus">-        end = chunk.end()</span>
<a href="#l18.121"></a><span id="l18.121" class="difflineminus">-        content, terminator = chunk.groups()</span>
<a href="#l18.122"></a><span id="l18.122" class="difflineminus">-        # Content is contains zero or more unescaped string characters</span>
<a href="#l18.123"></a><span id="l18.123" class="difflineminus">-        if content:</span>
<a href="#l18.124"></a><span id="l18.124" class="difflineminus">-            if not isinstance(content, unicode):</span>
<a href="#l18.125"></a><span id="l18.125" class="difflineminus">-                content = unicode(content, encoding)</span>
<a href="#l18.126"></a><span id="l18.126" class="difflineminus">-            _append(content)</span>
<a href="#l18.127"></a><span id="l18.127" class="difflineminus">-        # Terminator is the end of string, a literal control character,</span>
<a href="#l18.128"></a><span id="l18.128" class="difflineminus">-        # or a backslash denoting that an escape sequence follows</span>
<a href="#l18.129"></a><span id="l18.129" class="difflineminus">-        if terminator == '&quot;':</span>
<a href="#l18.130"></a><span id="l18.130" class="difflineminus">-            break</span>
<a href="#l18.131"></a><span id="l18.131" class="difflineminus">-        elif terminator != '\\':</span>
<a href="#l18.132"></a><span id="l18.132" class="difflineminus">-            if strict:</span>
<a href="#l18.133"></a><span id="l18.133" class="difflineminus">-                msg = &quot;Invalid control character %r at&quot; % (terminator,)</span>
<a href="#l18.134"></a><span id="l18.134" class="difflineminus">-                #msg = &quot;Invalid control character {0!r} at&quot;.format(terminator)</span>
<a href="#l18.135"></a><span id="l18.135" class="difflineminus">-                raise JSONDecodeError(msg, s, end)</span>
<a href="#l18.136"></a><span id="l18.136" class="difflineminus">-            else:</span>
<a href="#l18.137"></a><span id="l18.137" class="difflineminus">-                _append(terminator)</span>
<a href="#l18.138"></a><span id="l18.138" class="difflineminus">-                continue</span>
<a href="#l18.139"></a><span id="l18.139" class="difflineminus">-        try:</span>
<a href="#l18.140"></a><span id="l18.140" class="difflineminus">-            esc = s[end]</span>
<a href="#l18.141"></a><span id="l18.141" class="difflineminus">-        except IndexError:</span>
<a href="#l18.142"></a><span id="l18.142" class="difflineminus">-            raise JSONDecodeError(</span>
<a href="#l18.143"></a><span id="l18.143" class="difflineminus">-                &quot;Unterminated string starting at&quot;, s, begin)</span>
<a href="#l18.144"></a><span id="l18.144" class="difflineminus">-        # If not a unicode escape sequence, must be in the lookup table</span>
<a href="#l18.145"></a><span id="l18.145" class="difflineminus">-        if esc != 'u':</span>
<a href="#l18.146"></a><span id="l18.146" class="difflineminus">-            try:</span>
<a href="#l18.147"></a><span id="l18.147" class="difflineminus">-                char = _b[esc]</span>
<a href="#l18.148"></a><span id="l18.148" class="difflineminus">-            except KeyError:</span>
<a href="#l18.149"></a><span id="l18.149" class="difflineminus">-                msg = &quot;Invalid \\escape: &quot; + repr(esc)</span>
<a href="#l18.150"></a><span id="l18.150" class="difflineminus">-                raise JSONDecodeError(msg, s, end)</span>
<a href="#l18.151"></a><span id="l18.151" class="difflineminus">-            end += 1</span>
<a href="#l18.152"></a><span id="l18.152" class="difflineminus">-        else:</span>
<a href="#l18.153"></a><span id="l18.153" class="difflineminus">-            # Unicode escape sequence</span>
<a href="#l18.154"></a><span id="l18.154" class="difflineminus">-            esc = s[end + 1:end + 5]</span>
<a href="#l18.155"></a><span id="l18.155" class="difflineminus">-            next_end = end + 5</span>
<a href="#l18.156"></a><span id="l18.156" class="difflineminus">-            if len(esc) != 4:</span>
<a href="#l18.157"></a><span id="l18.157" class="difflineminus">-                msg = &quot;Invalid \\uXXXX escape&quot;</span>
<a href="#l18.158"></a><span id="l18.158" class="difflineminus">-                raise JSONDecodeError(msg, s, end)</span>
<a href="#l18.159"></a><span id="l18.159" class="difflineminus">-            uni = int(esc, 16)</span>
<a href="#l18.160"></a><span id="l18.160" class="difflineminus">-            # Check for surrogate pair on UCS-4 systems</span>
<a href="#l18.161"></a><span id="l18.161" class="difflineminus">-            if 0xd800 &lt;= uni &lt;= 0xdbff and sys.maxunicode &gt; 65535:</span>
<a href="#l18.162"></a><span id="l18.162" class="difflineminus">-                msg = &quot;Invalid \\uXXXX\\uXXXX surrogate pair&quot;</span>
<a href="#l18.163"></a><span id="l18.163" class="difflineminus">-                if not s[end + 5:end + 7] == '\\u':</span>
<a href="#l18.164"></a><span id="l18.164" class="difflineminus">-                    raise JSONDecodeError(msg, s, end)</span>
<a href="#l18.165"></a><span id="l18.165" class="difflineminus">-                esc2 = s[end + 7:end + 11]</span>
<a href="#l18.166"></a><span id="l18.166" class="difflineminus">-                if len(esc2) != 4:</span>
<a href="#l18.167"></a><span id="l18.167" class="difflineminus">-                    raise JSONDecodeError(msg, s, end)</span>
<a href="#l18.168"></a><span id="l18.168" class="difflineminus">-                uni2 = int(esc2, 16)</span>
<a href="#l18.169"></a><span id="l18.169" class="difflineminus">-                uni = 0x10000 + (((uni - 0xd800) &lt;&lt; 10) | (uni2 - 0xdc00))</span>
<a href="#l18.170"></a><span id="l18.170" class="difflineminus">-                next_end += 6</span>
<a href="#l18.171"></a><span id="l18.171" class="difflineminus">-            char = unichr(uni)</span>
<a href="#l18.172"></a><span id="l18.172" class="difflineminus">-            end = next_end</span>
<a href="#l18.173"></a><span id="l18.173" class="difflineminus">-        # Append the unescaped character</span>
<a href="#l18.174"></a><span id="l18.174" class="difflineminus">-        _append(char)</span>
<a href="#l18.175"></a><span id="l18.175" class="difflineminus">-    return u''.join(chunks), end</span>
<a href="#l18.176"></a><span id="l18.176" class="difflineminus">-</span>
<a href="#l18.177"></a><span id="l18.177" class="difflineminus">-</span>
<a href="#l18.178"></a><span id="l18.178" class="difflineminus">-# Use speedup if available</span>
<a href="#l18.179"></a><span id="l18.179" class="difflineminus">-scanstring = c_scanstring or py_scanstring</span>
<a href="#l18.180"></a><span id="l18.180" class="difflineminus">-</span>
<a href="#l18.181"></a><span id="l18.181" class="difflineminus">-WHITESPACE = re.compile(r'[ \t\n\r]*', FLAGS)</span>
<a href="#l18.182"></a><span id="l18.182" class="difflineminus">-WHITESPACE_STR = ' \t\n\r'</span>
<a href="#l18.183"></a><span id="l18.183" class="difflineminus">-</span>
<a href="#l18.184"></a><span id="l18.184" class="difflineminus">-def JSONObject((s, end), encoding, strict, scan_once, object_hook,</span>
<a href="#l18.185"></a><span id="l18.185" class="difflineminus">-        object_pairs_hook, memo=None,</span>
<a href="#l18.186"></a><span id="l18.186" class="difflineminus">-        _w=WHITESPACE.match, _ws=WHITESPACE_STR):</span>
<a href="#l18.187"></a><span id="l18.187" class="difflineminus">-    # Backwards compatibility</span>
<a href="#l18.188"></a><span id="l18.188" class="difflineminus">-    if memo is None:</span>
<a href="#l18.189"></a><span id="l18.189" class="difflineminus">-        memo = {}</span>
<a href="#l18.190"></a><span id="l18.190" class="difflineminus">-    memo_get = memo.setdefault</span>
<a href="#l18.191"></a><span id="l18.191" class="difflineminus">-    pairs = []</span>
<a href="#l18.192"></a><span id="l18.192" class="difflineminus">-    # Use a slice to prevent IndexError from being raised, the following</span>
<a href="#l18.193"></a><span id="l18.193" class="difflineminus">-    # check will raise a more specific ValueError if the string is empty</span>
<a href="#l18.194"></a><span id="l18.194" class="difflineminus">-    nextchar = s[end:end + 1]</span>
<a href="#l18.195"></a><span id="l18.195" class="difflineminus">-    # Normally we expect nextchar == '&quot;'</span>
<a href="#l18.196"></a><span id="l18.196" class="difflineminus">-    if nextchar != '&quot;':</span>
<a href="#l18.197"></a><span id="l18.197" class="difflineminus">-        if nextchar in _ws:</span>
<a href="#l18.198"></a><span id="l18.198" class="difflineminus">-            end = _w(s, end).end()</span>
<a href="#l18.199"></a><span id="l18.199" class="difflineminus">-            nextchar = s[end:end + 1]</span>
<a href="#l18.200"></a><span id="l18.200" class="difflineminus">-        # Trivial empty object</span>
<a href="#l18.201"></a><span id="l18.201" class="difflineminus">-        if nextchar == '}':</span>
<a href="#l18.202"></a><span id="l18.202" class="difflineminus">-            if object_pairs_hook is not None:</span>
<a href="#l18.203"></a><span id="l18.203" class="difflineminus">-                result = object_pairs_hook(pairs)</span>
<a href="#l18.204"></a><span id="l18.204" class="difflineminus">-                return result, end + 1</span>
<a href="#l18.205"></a><span id="l18.205" class="difflineminus">-            pairs = {}</span>
<a href="#l18.206"></a><span id="l18.206" class="difflineminus">-            if object_hook is not None:</span>
<a href="#l18.207"></a><span id="l18.207" class="difflineminus">-                pairs = object_hook(pairs)</span>
<a href="#l18.208"></a><span id="l18.208" class="difflineminus">-            return pairs, end + 1</span>
<a href="#l18.209"></a><span id="l18.209" class="difflineminus">-        elif nextchar != '&quot;':</span>
<a href="#l18.210"></a><span id="l18.210" class="difflineminus">-            raise JSONDecodeError(&quot;Expecting property name&quot;, s, end)</span>
<a href="#l18.211"></a><span id="l18.211" class="difflineminus">-    end += 1</span>
<a href="#l18.212"></a><span id="l18.212" class="difflineminus">-    while True:</span>
<a href="#l18.213"></a><span id="l18.213" class="difflineminus">-        key, end = scanstring(s, end, encoding, strict)</span>
<a href="#l18.214"></a><span id="l18.214" class="difflineminus">-        key = memo_get(key, key)</span>
<a href="#l18.215"></a><span id="l18.215" class="difflineminus">-</span>
<a href="#l18.216"></a><span id="l18.216" class="difflineminus">-        # To skip some function call overhead we optimize the fast paths where</span>
<a href="#l18.217"></a><span id="l18.217" class="difflineminus">-        # the JSON key separator is &quot;: &quot; or just &quot;:&quot;.</span>
<a href="#l18.218"></a><span id="l18.218" class="difflineminus">-        if s[end:end + 1] != ':':</span>
<a href="#l18.219"></a><span id="l18.219" class="difflineminus">-            end = _w(s, end).end()</span>
<a href="#l18.220"></a><span id="l18.220" class="difflineminus">-            if s[end:end + 1] != ':':</span>
<a href="#l18.221"></a><span id="l18.221" class="difflineminus">-                raise JSONDecodeError(&quot;Expecting : delimiter&quot;, s, end)</span>
<a href="#l18.222"></a><span id="l18.222" class="difflineminus">-</span>
<a href="#l18.223"></a><span id="l18.223" class="difflineminus">-        end += 1</span>
<a href="#l18.224"></a><span id="l18.224" class="difflineminus">-</span>
<a href="#l18.225"></a><span id="l18.225" class="difflineminus">-        try:</span>
<a href="#l18.226"></a><span id="l18.226" class="difflineminus">-            if s[end] in _ws:</span>
<a href="#l18.227"></a><span id="l18.227" class="difflineminus">-                end += 1</span>
<a href="#l18.228"></a><span id="l18.228" class="difflineminus">-                if s[end] in _ws:</span>
<a href="#l18.229"></a><span id="l18.229" class="difflineminus">-                    end = _w(s, end + 1).end()</span>
<a href="#l18.230"></a><span id="l18.230" class="difflineminus">-        except IndexError:</span>
<a href="#l18.231"></a><span id="l18.231" class="difflineminus">-            pass</span>
<a href="#l18.232"></a><span id="l18.232" class="difflineminus">-</span>
<a href="#l18.233"></a><span id="l18.233" class="difflineminus">-        try:</span>
<a href="#l18.234"></a><span id="l18.234" class="difflineminus">-            value, end = scan_once(s, end)</span>
<a href="#l18.235"></a><span id="l18.235" class="difflineminus">-        except StopIteration:</span>
<a href="#l18.236"></a><span id="l18.236" class="difflineminus">-            raise JSONDecodeError(&quot;Expecting object&quot;, s, end)</span>
<a href="#l18.237"></a><span id="l18.237" class="difflineminus">-        pairs.append((key, value))</span>
<a href="#l18.238"></a><span id="l18.238" class="difflineminus">-</span>
<a href="#l18.239"></a><span id="l18.239" class="difflineminus">-        try:</span>
<a href="#l18.240"></a><span id="l18.240" class="difflineminus">-            nextchar = s[end]</span>
<a href="#l18.241"></a><span id="l18.241" class="difflineminus">-            if nextchar in _ws:</span>
<a href="#l18.242"></a><span id="l18.242" class="difflineminus">-                end = _w(s, end + 1).end()</span>
<a href="#l18.243"></a><span id="l18.243" class="difflineminus">-                nextchar = s[end]</span>
<a href="#l18.244"></a><span id="l18.244" class="difflineminus">-        except IndexError:</span>
<a href="#l18.245"></a><span id="l18.245" class="difflineminus">-            nextchar = ''</span>
<a href="#l18.246"></a><span id="l18.246" class="difflineminus">-        end += 1</span>
<a href="#l18.247"></a><span id="l18.247" class="difflineminus">-</span>
<a href="#l18.248"></a><span id="l18.248" class="difflineminus">-        if nextchar == '}':</span>
<a href="#l18.249"></a><span id="l18.249" class="difflineminus">-            break</span>
<a href="#l18.250"></a><span id="l18.250" class="difflineminus">-        elif nextchar != ',':</span>
<a href="#l18.251"></a><span id="l18.251" class="difflineminus">-            raise JSONDecodeError(&quot;Expecting , delimiter&quot;, s, end - 1)</span>
<a href="#l18.252"></a><span id="l18.252" class="difflineminus">-</span>
<a href="#l18.253"></a><span id="l18.253" class="difflineminus">-        try:</span>
<a href="#l18.254"></a><span id="l18.254" class="difflineminus">-            nextchar = s[end]</span>
<a href="#l18.255"></a><span id="l18.255" class="difflineminus">-            if nextchar in _ws:</span>
<a href="#l18.256"></a><span id="l18.256" class="difflineminus">-                end += 1</span>
<a href="#l18.257"></a><span id="l18.257" class="difflineminus">-                nextchar = s[end]</span>
<a href="#l18.258"></a><span id="l18.258" class="difflineminus">-                if nextchar in _ws:</span>
<a href="#l18.259"></a><span id="l18.259" class="difflineminus">-                    end = _w(s, end + 1).end()</span>
<a href="#l18.260"></a><span id="l18.260" class="difflineminus">-                    nextchar = s[end]</span>
<a href="#l18.261"></a><span id="l18.261" class="difflineminus">-        except IndexError:</span>
<a href="#l18.262"></a><span id="l18.262" class="difflineminus">-            nextchar = ''</span>
<a href="#l18.263"></a><span id="l18.263" class="difflineminus">-</span>
<a href="#l18.264"></a><span id="l18.264" class="difflineminus">-        end += 1</span>
<a href="#l18.265"></a><span id="l18.265" class="difflineminus">-        if nextchar != '&quot;':</span>
<a href="#l18.266"></a><span id="l18.266" class="difflineminus">-            raise JSONDecodeError(&quot;Expecting property name&quot;, s, end - 1)</span>
<a href="#l18.267"></a><span id="l18.267" class="difflineminus">-</span>
<a href="#l18.268"></a><span id="l18.268" class="difflineminus">-    if object_pairs_hook is not None:</span>
<a href="#l18.269"></a><span id="l18.269" class="difflineminus">-        result = object_pairs_hook(pairs)</span>
<a href="#l18.270"></a><span id="l18.270" class="difflineminus">-        return result, end</span>
<a href="#l18.271"></a><span id="l18.271" class="difflineminus">-    pairs = dict(pairs)</span>
<a href="#l18.272"></a><span id="l18.272" class="difflineminus">-    if object_hook is not None:</span>
<a href="#l18.273"></a><span id="l18.273" class="difflineminus">-        pairs = object_hook(pairs)</span>
<a href="#l18.274"></a><span id="l18.274" class="difflineminus">-    return pairs, end</span>
<a href="#l18.275"></a><span id="l18.275" class="difflineminus">-</span>
<a href="#l18.276"></a><span id="l18.276" class="difflineminus">-def JSONArray((s, end), scan_once, _w=WHITESPACE.match, _ws=WHITESPACE_STR):</span>
<a href="#l18.277"></a><span id="l18.277" class="difflineminus">-    values = []</span>
<a href="#l18.278"></a><span id="l18.278" class="difflineminus">-    nextchar = s[end:end + 1]</span>
<a href="#l18.279"></a><span id="l18.279" class="difflineminus">-    if nextchar in _ws:</span>
<a href="#l18.280"></a><span id="l18.280" class="difflineminus">-        end = _w(s, end + 1).end()</span>
<a href="#l18.281"></a><span id="l18.281" class="difflineminus">-        nextchar = s[end:end + 1]</span>
<a href="#l18.282"></a><span id="l18.282" class="difflineminus">-    # Look-ahead for trivial empty array</span>
<a href="#l18.283"></a><span id="l18.283" class="difflineminus">-    if nextchar == ']':</span>
<a href="#l18.284"></a><span id="l18.284" class="difflineminus">-        return values, end + 1</span>
<a href="#l18.285"></a><span id="l18.285" class="difflineminus">-    _append = values.append</span>
<a href="#l18.286"></a><span id="l18.286" class="difflineminus">-    while True:</span>
<a href="#l18.287"></a><span id="l18.287" class="difflineminus">-        try:</span>
<a href="#l18.288"></a><span id="l18.288" class="difflineminus">-            value, end = scan_once(s, end)</span>
<a href="#l18.289"></a><span id="l18.289" class="difflineminus">-        except StopIteration:</span>
<a href="#l18.290"></a><span id="l18.290" class="difflineminus">-            raise JSONDecodeError(&quot;Expecting object&quot;, s, end)</span>
<a href="#l18.291"></a><span id="l18.291" class="difflineminus">-        _append(value)</span>
<a href="#l18.292"></a><span id="l18.292" class="difflineminus">-        nextchar = s[end:end + 1]</span>
<a href="#l18.293"></a><span id="l18.293" class="difflineminus">-        if nextchar in _ws:</span>
<a href="#l18.294"></a><span id="l18.294" class="difflineminus">-            end = _w(s, end + 1).end()</span>
<a href="#l18.295"></a><span id="l18.295" class="difflineminus">-            nextchar = s[end:end + 1]</span>
<a href="#l18.296"></a><span id="l18.296" class="difflineminus">-        end += 1</span>
<a href="#l18.297"></a><span id="l18.297" class="difflineminus">-        if nextchar == ']':</span>
<a href="#l18.298"></a><span id="l18.298" class="difflineminus">-            break</span>
<a href="#l18.299"></a><span id="l18.299" class="difflineminus">-        elif nextchar != ',':</span>
<a href="#l18.300"></a><span id="l18.300" class="difflineminus">-            raise JSONDecodeError(&quot;Expecting , delimiter&quot;, s, end)</span>
<a href="#l18.301"></a><span id="l18.301" class="difflineminus">-</span>
<a href="#l18.302"></a><span id="l18.302" class="difflineminus">-        try:</span>
<a href="#l18.303"></a><span id="l18.303" class="difflineminus">-            if s[end] in _ws:</span>
<a href="#l18.304"></a><span id="l18.304" class="difflineminus">-                end += 1</span>
<a href="#l18.305"></a><span id="l18.305" class="difflineminus">-                if s[end] in _ws:</span>
<a href="#l18.306"></a><span id="l18.306" class="difflineminus">-                    end = _w(s, end + 1).end()</span>
<a href="#l18.307"></a><span id="l18.307" class="difflineminus">-        except IndexError:</span>
<a href="#l18.308"></a><span id="l18.308" class="difflineminus">-            pass</span>
<a href="#l18.309"></a><span id="l18.309" class="difflineminus">-</span>
<a href="#l18.310"></a><span id="l18.310" class="difflineminus">-    return values, end</span>
<a href="#l18.311"></a><span id="l18.311" class="difflineminus">-</span>
<a href="#l18.312"></a><span id="l18.312" class="difflineminus">-class JSONDecoder(object):</span>
<a href="#l18.313"></a><span id="l18.313" class="difflineminus">-    &quot;&quot;&quot;Simple JSON &lt;http://json.org&gt; decoder</span>
<a href="#l18.314"></a><span id="l18.314" class="difflineminus">-</span>
<a href="#l18.315"></a><span id="l18.315" class="difflineminus">-    Performs the following translations in decoding by default:</span>
<a href="#l18.316"></a><span id="l18.316" class="difflineminus">-</span>
<a href="#l18.317"></a><span id="l18.317" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.318"></a><span id="l18.318" class="difflineminus">-    | JSON          | Python            |</span>
<a href="#l18.319"></a><span id="l18.319" class="difflineminus">-    +===============+===================+</span>
<a href="#l18.320"></a><span id="l18.320" class="difflineminus">-    | object        | dict              |</span>
<a href="#l18.321"></a><span id="l18.321" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.322"></a><span id="l18.322" class="difflineminus">-    | array         | list              |</span>
<a href="#l18.323"></a><span id="l18.323" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.324"></a><span id="l18.324" class="difflineminus">-    | string        | unicode           |</span>
<a href="#l18.325"></a><span id="l18.325" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.326"></a><span id="l18.326" class="difflineminus">-    | number (int)  | int, long         |</span>
<a href="#l18.327"></a><span id="l18.327" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.328"></a><span id="l18.328" class="difflineminus">-    | number (real) | float             |</span>
<a href="#l18.329"></a><span id="l18.329" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.330"></a><span id="l18.330" class="difflineminus">-    | true          | True              |</span>
<a href="#l18.331"></a><span id="l18.331" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.332"></a><span id="l18.332" class="difflineminus">-    | false         | False             |</span>
<a href="#l18.333"></a><span id="l18.333" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.334"></a><span id="l18.334" class="difflineminus">-    | null          | None              |</span>
<a href="#l18.335"></a><span id="l18.335" class="difflineminus">-    +---------------+-------------------+</span>
<a href="#l18.336"></a><span id="l18.336" class="difflineminus">-</span>
<a href="#l18.337"></a><span id="l18.337" class="difflineminus">-    It also understands ``NaN``, ``Infinity``, and ``-Infinity`` as</span>
<a href="#l18.338"></a><span id="l18.338" class="difflineminus">-    their corresponding ``float`` values, which is outside the JSON spec.</span>
<a href="#l18.339"></a><span id="l18.339" class="difflineminus">-</span>
<a href="#l18.340"></a><span id="l18.340" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l18.341"></a><span id="l18.341" class="difflineminus">-</span>
<a href="#l18.342"></a><span id="l18.342" class="difflineminus">-    def __init__(self, encoding=None, object_hook=None, parse_float=None,</span>
<a href="#l18.343"></a><span id="l18.343" class="difflineminus">-            parse_int=None, parse_constant=None, strict=True,</span>
<a href="#l18.344"></a><span id="l18.344" class="difflineminus">-            object_pairs_hook=None):</span>
<a href="#l18.345"></a><span id="l18.345" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l18.346"></a><span id="l18.346" class="difflineminus">-        *encoding* determines the encoding used to interpret any</span>
<a href="#l18.347"></a><span id="l18.347" class="difflineminus">-        :class:`str` objects decoded by this instance (``'utf-8'`` by</span>
<a href="#l18.348"></a><span id="l18.348" class="difflineminus">-        default).  It has no effect when decoding :class:`unicode` objects.</span>
<a href="#l18.349"></a><span id="l18.349" class="difflineminus">-</span>
<a href="#l18.350"></a><span id="l18.350" class="difflineminus">-        Note that currently only encodings that are a superset of ASCII work,</span>
<a href="#l18.351"></a><span id="l18.351" class="difflineminus">-        strings of other encodings should be passed in as :class:`unicode`.</span>
<a href="#l18.352"></a><span id="l18.352" class="difflineminus">-</span>
<a href="#l18.353"></a><span id="l18.353" class="difflineminus">-        *object_hook*, if specified, will be called with the result of every</span>
<a href="#l18.354"></a><span id="l18.354" class="difflineminus">-        JSON object decoded and its return value will be used in place of the</span>
<a href="#l18.355"></a><span id="l18.355" class="difflineminus">-        given :class:`dict`.  This can be used to provide custom</span>
<a href="#l18.356"></a><span id="l18.356" class="difflineminus">-        deserializations (e.g. to support JSON-RPC class hinting).</span>
<a href="#l18.357"></a><span id="l18.357" class="difflineminus">-</span>
<a href="#l18.358"></a><span id="l18.358" class="difflineminus">-        *object_pairs_hook* is an optional function that will be called with</span>
<a href="#l18.359"></a><span id="l18.359" class="difflineminus">-        the result of any object literal decode with an ordered list of pairs.</span>
<a href="#l18.360"></a><span id="l18.360" class="difflineminus">-        The return value of *object_pairs_hook* will be used instead of the</span>
<a href="#l18.361"></a><span id="l18.361" class="difflineminus">-        :class:`dict`.  This feature can be used to implement custom decoders</span>
<a href="#l18.362"></a><span id="l18.362" class="difflineminus">-        that rely on the order that the key and value pairs are decoded (for</span>
<a href="#l18.363"></a><span id="l18.363" class="difflineminus">-        example, :func:`collections.OrderedDict` will remember the order of</span>
<a href="#l18.364"></a><span id="l18.364" class="difflineminus">-        insertion). If *object_hook* is also defined, the *object_pairs_hook*</span>
<a href="#l18.365"></a><span id="l18.365" class="difflineminus">-        takes priority.</span>
<a href="#l18.366"></a><span id="l18.366" class="difflineminus">-</span>
<a href="#l18.367"></a><span id="l18.367" class="difflineminus">-        *parse_float*, if specified, will be called with the string of every</span>
<a href="#l18.368"></a><span id="l18.368" class="difflineminus">-        JSON float to be decoded.  By default, this is equivalent to</span>
<a href="#l18.369"></a><span id="l18.369" class="difflineminus">-        ``float(num_str)``. This can be used to use another datatype or parser</span>
<a href="#l18.370"></a><span id="l18.370" class="difflineminus">-        for JSON floats (e.g. :class:`decimal.Decimal`).</span>
<a href="#l18.371"></a><span id="l18.371" class="difflineminus">-</span>
<a href="#l18.372"></a><span id="l18.372" class="difflineminus">-        *parse_int*, if specified, will be called with the string of every</span>
<a href="#l18.373"></a><span id="l18.373" class="difflineminus">-        JSON int to be decoded.  By default, this is equivalent to</span>
<a href="#l18.374"></a><span id="l18.374" class="difflineminus">-        ``int(num_str)``.  This can be used to use another datatype or parser</span>
<a href="#l18.375"></a><span id="l18.375" class="difflineminus">-        for JSON integers (e.g. :class:`float`).</span>
<a href="#l18.376"></a><span id="l18.376" class="difflineminus">-</span>
<a href="#l18.377"></a><span id="l18.377" class="difflineminus">-        *parse_constant*, if specified, will be called with one of the</span>
<a href="#l18.378"></a><span id="l18.378" class="difflineminus">-        following strings: ``'-Infinity'``, ``'Infinity'``, ``'NaN'``.  This</span>
<a href="#l18.379"></a><span id="l18.379" class="difflineminus">-        can be used to raise an exception if invalid JSON numbers are</span>
<a href="#l18.380"></a><span id="l18.380" class="difflineminus">-        encountered.</span>
<a href="#l18.381"></a><span id="l18.381" class="difflineminus">-</span>
<a href="#l18.382"></a><span id="l18.382" class="difflineminus">-        *strict* controls the parser's behavior when it encounters an</span>
<a href="#l18.383"></a><span id="l18.383" class="difflineminus">-        invalid control character in a string. The default setting of</span>
<a href="#l18.384"></a><span id="l18.384" class="difflineminus">-        ``True`` means that unescaped control characters are parse errors, if</span>
<a href="#l18.385"></a><span id="l18.385" class="difflineminus">-        ``False`` then control characters will be allowed in strings.</span>
<a href="#l18.386"></a><span id="l18.386" class="difflineminus">-</span>
<a href="#l18.387"></a><span id="l18.387" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l18.388"></a><span id="l18.388" class="difflineminus">-        self.encoding = encoding</span>
<a href="#l18.389"></a><span id="l18.389" class="difflineminus">-        self.object_hook = object_hook</span>
<a href="#l18.390"></a><span id="l18.390" class="difflineminus">-        self.object_pairs_hook = object_pairs_hook</span>
<a href="#l18.391"></a><span id="l18.391" class="difflineminus">-        self.parse_float = parse_float or float</span>
<a href="#l18.392"></a><span id="l18.392" class="difflineminus">-        self.parse_int = parse_int or int</span>
<a href="#l18.393"></a><span id="l18.393" class="difflineminus">-        self.parse_constant = parse_constant or _CONSTANTS.__getitem__</span>
<a href="#l18.394"></a><span id="l18.394" class="difflineminus">-        self.strict = strict</span>
<a href="#l18.395"></a><span id="l18.395" class="difflineminus">-        self.parse_object = JSONObject</span>
<a href="#l18.396"></a><span id="l18.396" class="difflineminus">-        self.parse_array = JSONArray</span>
<a href="#l18.397"></a><span id="l18.397" class="difflineminus">-        self.parse_string = scanstring</span>
<a href="#l18.398"></a><span id="l18.398" class="difflineminus">-        self.memo = {}</span>
<a href="#l18.399"></a><span id="l18.399" class="difflineminus">-        self.scan_once = make_scanner(self)</span>
<a href="#l18.400"></a><span id="l18.400" class="difflineminus">-</span>
<a href="#l18.401"></a><span id="l18.401" class="difflineminus">-    def decode(self, s, _w=WHITESPACE.match):</span>
<a href="#l18.402"></a><span id="l18.402" class="difflineminus">-        &quot;&quot;&quot;Return the Python representation of ``s`` (a ``str`` or ``unicode``</span>
<a href="#l18.403"></a><span id="l18.403" class="difflineminus">-        instance containing a JSON document)</span>
<a href="#l18.404"></a><span id="l18.404" class="difflineminus">-</span>
<a href="#l18.405"></a><span id="l18.405" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l18.406"></a><span id="l18.406" class="difflineminus">-        obj, end = self.raw_decode(s, idx=_w(s, 0).end())</span>
<a href="#l18.407"></a><span id="l18.407" class="difflineminus">-        end = _w(s, end).end()</span>
<a href="#l18.408"></a><span id="l18.408" class="difflineminus">-        if end != len(s):</span>
<a href="#l18.409"></a><span id="l18.409" class="difflineminus">-            raise JSONDecodeError(&quot;Extra data&quot;, s, end, len(s))</span>
<a href="#l18.410"></a><span id="l18.410" class="difflineminus">-        return obj</span>
<a href="#l18.411"></a><span id="l18.411" class="difflineminus">-</span>
<a href="#l18.412"></a><span id="l18.412" class="difflineminus">-    def raw_decode(self, s, idx=0):</span>
<a href="#l18.413"></a><span id="l18.413" class="difflineminus">-        &quot;&quot;&quot;Decode a JSON document from ``s`` (a ``str`` or ``unicode``</span>
<a href="#l18.414"></a><span id="l18.414" class="difflineminus">-        beginning with a JSON document) and return a 2-tuple of the Python</span>
<a href="#l18.415"></a><span id="l18.415" class="difflineminus">-        representation and the index in ``s`` where the document ended.</span>
<a href="#l18.416"></a><span id="l18.416" class="difflineminus">-</span>
<a href="#l18.417"></a><span id="l18.417" class="difflineminus">-        This can be used to decode a JSON document from a string that may</span>
<a href="#l18.418"></a><span id="l18.418" class="difflineminus">-        have extraneous data at the end.</span>
<a href="#l18.419"></a><span id="l18.419" class="difflineminus">-</span>
<a href="#l18.420"></a><span id="l18.420" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l18.421"></a><span id="l18.421" class="difflineminus">-        try:</span>
<a href="#l18.422"></a><span id="l18.422" class="difflineminus">-            obj, end = self.scan_once(s, idx)</span>
<a href="#l18.423"></a><span id="l18.423" class="difflineminus">-        except StopIteration:</span>
<a href="#l18.424"></a><span id="l18.424" class="difflineminus">-            raise JSONDecodeError(&quot;No JSON object could be decoded&quot;, s, idx)</span>
<a href="#l18.425"></a><span id="l18.425" class="difflineminus">-        return obj, end</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">deleted file mode 100644</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/encoder.py</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineplus">+++ /dev/null</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineat">@@ -1,503 +0,0 @@</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">-&quot;&quot;&quot;Implementation of JSONEncoder</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">-import re</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">-from decimal import Decimal</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">-</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineminus">-def _import_speedups():</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineminus">-    try:</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-        from simplejson import _speedups</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-        return _speedups.encode_basestring_ascii, _speedups.make_encoder</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineminus">-    except ImportError:</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-        return None, None</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-c_encode_basestring_ascii, c_make_encoder = _import_speedups()</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-from simplejson.decoder import PosInf</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-ESCAPE = re.compile(r'[\x00-\x1f\\&quot;\b\f\n\r\t]')</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-ESCAPE_ASCII = re.compile(r'([\\&quot;]|[^\ -~])')</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineminus">-HAS_UTF8 = re.compile(r'[\x80-\xff]')</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineminus">-ESCAPE_DCT = {</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-    '\\': '\\\\',</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-    '&quot;': '\\&quot;',</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineminus">-    '\b': '\\b',</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineminus">-    '\f': '\\f',</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineminus">-    '\n': '\\n',</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineminus">-    '\r': '\\r',</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineminus">-    '\t': '\\t',</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-}</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-for i in range(0x20):</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-    #ESCAPE_DCT.setdefault(chr(i), '\\u{0:04x}'.format(i))</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-    ESCAPE_DCT.setdefault(chr(i), '\\u%04x' % (i,))</span>
<a href="#l19.35"></a><span id="l19.35" class="difflineminus">-</span>
<a href="#l19.36"></a><span id="l19.36" class="difflineminus">-FLOAT_REPR = repr</span>
<a href="#l19.37"></a><span id="l19.37" class="difflineminus">-</span>
<a href="#l19.38"></a><span id="l19.38" class="difflineminus">-def encode_basestring(s):</span>
<a href="#l19.39"></a><span id="l19.39" class="difflineminus">-    &quot;&quot;&quot;Return a JSON representation of a Python string</span>
<a href="#l19.40"></a><span id="l19.40" class="difflineminus">-</span>
<a href="#l19.41"></a><span id="l19.41" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l19.42"></a><span id="l19.42" class="difflineminus">-    if isinstance(s, str) and HAS_UTF8.search(s) is not None:</span>
<a href="#l19.43"></a><span id="l19.43" class="difflineminus">-        s = s.decode('utf-8')</span>
<a href="#l19.44"></a><span id="l19.44" class="difflineminus">-    def replace(match):</span>
<a href="#l19.45"></a><span id="l19.45" class="difflineminus">-        return ESCAPE_DCT[match.group(0)]</span>
<a href="#l19.46"></a><span id="l19.46" class="difflineminus">-    return u'&quot;' + ESCAPE.sub(replace, s) + u'&quot;'</span>
<a href="#l19.47"></a><span id="l19.47" class="difflineminus">-</span>
<a href="#l19.48"></a><span id="l19.48" class="difflineminus">-</span>
<a href="#l19.49"></a><span id="l19.49" class="difflineminus">-def py_encode_basestring_ascii(s):</span>
<a href="#l19.50"></a><span id="l19.50" class="difflineminus">-    &quot;&quot;&quot;Return an ASCII-only JSON representation of a Python string</span>
<a href="#l19.51"></a><span id="l19.51" class="difflineminus">-</span>
<a href="#l19.52"></a><span id="l19.52" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l19.53"></a><span id="l19.53" class="difflineminus">-    if isinstance(s, str) and HAS_UTF8.search(s) is not None:</span>
<a href="#l19.54"></a><span id="l19.54" class="difflineminus">-        s = s.decode('utf-8')</span>
<a href="#l19.55"></a><span id="l19.55" class="difflineminus">-    def replace(match):</span>
<a href="#l19.56"></a><span id="l19.56" class="difflineminus">-        s = match.group(0)</span>
<a href="#l19.57"></a><span id="l19.57" class="difflineminus">-        try:</span>
<a href="#l19.58"></a><span id="l19.58" class="difflineminus">-            return ESCAPE_DCT[s]</span>
<a href="#l19.59"></a><span id="l19.59" class="difflineminus">-        except KeyError:</span>
<a href="#l19.60"></a><span id="l19.60" class="difflineminus">-            n = ord(s)</span>
<a href="#l19.61"></a><span id="l19.61" class="difflineminus">-            if n &lt; 0x10000:</span>
<a href="#l19.62"></a><span id="l19.62" class="difflineminus">-                #return '\\u{0:04x}'.format(n)</span>
<a href="#l19.63"></a><span id="l19.63" class="difflineminus">-                return '\\u%04x' % (n,)</span>
<a href="#l19.64"></a><span id="l19.64" class="difflineminus">-            else:</span>
<a href="#l19.65"></a><span id="l19.65" class="difflineminus">-                # surrogate pair</span>
<a href="#l19.66"></a><span id="l19.66" class="difflineminus">-                n -= 0x10000</span>
<a href="#l19.67"></a><span id="l19.67" class="difflineminus">-                s1 = 0xd800 | ((n &gt;&gt; 10) &amp; 0x3ff)</span>
<a href="#l19.68"></a><span id="l19.68" class="difflineminus">-                s2 = 0xdc00 | (n &amp; 0x3ff)</span>
<a href="#l19.69"></a><span id="l19.69" class="difflineminus">-                #return '\\u{0:04x}\\u{1:04x}'.format(s1, s2)</span>
<a href="#l19.70"></a><span id="l19.70" class="difflineminus">-                return '\\u%04x\\u%04x' % (s1, s2)</span>
<a href="#l19.71"></a><span id="l19.71" class="difflineminus">-    return '&quot;' + str(ESCAPE_ASCII.sub(replace, s)) + '&quot;'</span>
<a href="#l19.72"></a><span id="l19.72" class="difflineminus">-</span>
<a href="#l19.73"></a><span id="l19.73" class="difflineminus">-</span>
<a href="#l19.74"></a><span id="l19.74" class="difflineminus">-encode_basestring_ascii = (</span>
<a href="#l19.75"></a><span id="l19.75" class="difflineminus">-    c_encode_basestring_ascii or py_encode_basestring_ascii)</span>
<a href="#l19.76"></a><span id="l19.76" class="difflineminus">-</span>
<a href="#l19.77"></a><span id="l19.77" class="difflineminus">-class JSONEncoder(object):</span>
<a href="#l19.78"></a><span id="l19.78" class="difflineminus">-    &quot;&quot;&quot;Extensible JSON &lt;http://json.org&gt; encoder for Python data structures.</span>
<a href="#l19.79"></a><span id="l19.79" class="difflineminus">-</span>
<a href="#l19.80"></a><span id="l19.80" class="difflineminus">-    Supports the following objects and types by default:</span>
<a href="#l19.81"></a><span id="l19.81" class="difflineminus">-</span>
<a href="#l19.82"></a><span id="l19.82" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.83"></a><span id="l19.83" class="difflineminus">-    | Python            | JSON          |</span>
<a href="#l19.84"></a><span id="l19.84" class="difflineminus">-    +===================+===============+</span>
<a href="#l19.85"></a><span id="l19.85" class="difflineminus">-    | dict              | object        |</span>
<a href="#l19.86"></a><span id="l19.86" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.87"></a><span id="l19.87" class="difflineminus">-    | list, tuple       | array         |</span>
<a href="#l19.88"></a><span id="l19.88" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.89"></a><span id="l19.89" class="difflineminus">-    | str, unicode      | string        |</span>
<a href="#l19.90"></a><span id="l19.90" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.91"></a><span id="l19.91" class="difflineminus">-    | int, long, float  | number        |</span>
<a href="#l19.92"></a><span id="l19.92" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.93"></a><span id="l19.93" class="difflineminus">-    | True              | true          |</span>
<a href="#l19.94"></a><span id="l19.94" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.95"></a><span id="l19.95" class="difflineminus">-    | False             | false         |</span>
<a href="#l19.96"></a><span id="l19.96" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.97"></a><span id="l19.97" class="difflineminus">-    | None              | null          |</span>
<a href="#l19.98"></a><span id="l19.98" class="difflineminus">-    +-------------------+---------------+</span>
<a href="#l19.99"></a><span id="l19.99" class="difflineminus">-</span>
<a href="#l19.100"></a><span id="l19.100" class="difflineminus">-    To extend this to recognize other objects, subclass and implement a</span>
<a href="#l19.101"></a><span id="l19.101" class="difflineminus">-    ``.default()`` method with another method that returns a serializable</span>
<a href="#l19.102"></a><span id="l19.102" class="difflineminus">-    object for ``o`` if possible, otherwise it should call the superclass</span>
<a href="#l19.103"></a><span id="l19.103" class="difflineminus">-    implementation (to raise ``TypeError``).</span>
<a href="#l19.104"></a><span id="l19.104" class="difflineminus">-</span>
<a href="#l19.105"></a><span id="l19.105" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l19.106"></a><span id="l19.106" class="difflineminus">-    item_separator = ', '</span>
<a href="#l19.107"></a><span id="l19.107" class="difflineminus">-    key_separator = ': '</span>
<a href="#l19.108"></a><span id="l19.108" class="difflineminus">-    def __init__(self, skipkeys=False, ensure_ascii=True,</span>
<a href="#l19.109"></a><span id="l19.109" class="difflineminus">-            check_circular=True, allow_nan=True, sort_keys=False,</span>
<a href="#l19.110"></a><span id="l19.110" class="difflineminus">-            indent=None, separators=None, encoding='utf-8', default=None,</span>
<a href="#l19.111"></a><span id="l19.111" class="difflineminus">-            use_decimal=False):</span>
<a href="#l19.112"></a><span id="l19.112" class="difflineminus">-        &quot;&quot;&quot;Constructor for JSONEncoder, with sensible defaults.</span>
<a href="#l19.113"></a><span id="l19.113" class="difflineminus">-</span>
<a href="#l19.114"></a><span id="l19.114" class="difflineminus">-        If skipkeys is false, then it is a TypeError to attempt</span>
<a href="#l19.115"></a><span id="l19.115" class="difflineminus">-        encoding of keys that are not str, int, long, float or None.  If</span>
<a href="#l19.116"></a><span id="l19.116" class="difflineminus">-        skipkeys is True, such items are simply skipped.</span>
<a href="#l19.117"></a><span id="l19.117" class="difflineminus">-</span>
<a href="#l19.118"></a><span id="l19.118" class="difflineminus">-        If ensure_ascii is true, the output is guaranteed to be str</span>
<a href="#l19.119"></a><span id="l19.119" class="difflineminus">-        objects with all incoming unicode characters escaped.  If</span>
<a href="#l19.120"></a><span id="l19.120" class="difflineminus">-        ensure_ascii is false, the output will be unicode object.</span>
<a href="#l19.121"></a><span id="l19.121" class="difflineminus">-</span>
<a href="#l19.122"></a><span id="l19.122" class="difflineminus">-        If check_circular is true, then lists, dicts, and custom encoded</span>
<a href="#l19.123"></a><span id="l19.123" class="difflineminus">-        objects will be checked for circular references during encoding to</span>
<a href="#l19.124"></a><span id="l19.124" class="difflineminus">-        prevent an infinite recursion (which would cause an OverflowError).</span>
<a href="#l19.125"></a><span id="l19.125" class="difflineminus">-        Otherwise, no such check takes place.</span>
<a href="#l19.126"></a><span id="l19.126" class="difflineminus">-</span>
<a href="#l19.127"></a><span id="l19.127" class="difflineminus">-        If allow_nan is true, then NaN, Infinity, and -Infinity will be</span>
<a href="#l19.128"></a><span id="l19.128" class="difflineminus">-        encoded as such.  This behavior is not JSON specification compliant,</span>
<a href="#l19.129"></a><span id="l19.129" class="difflineminus">-        but is consistent with most JavaScript based encoders and decoders.</span>
<a href="#l19.130"></a><span id="l19.130" class="difflineminus">-        Otherwise, it will be a ValueError to encode such floats.</span>
<a href="#l19.131"></a><span id="l19.131" class="difflineminus">-</span>
<a href="#l19.132"></a><span id="l19.132" class="difflineminus">-        If sort_keys is true, then the output of dictionaries will be</span>
<a href="#l19.133"></a><span id="l19.133" class="difflineminus">-        sorted by key; this is useful for regression tests to ensure</span>
<a href="#l19.134"></a><span id="l19.134" class="difflineminus">-        that JSON serializations can be compared on a day-to-day basis.</span>
<a href="#l19.135"></a><span id="l19.135" class="difflineminus">-</span>
<a href="#l19.136"></a><span id="l19.136" class="difflineminus">-        If indent is a string, then JSON array elements and object members</span>
<a href="#l19.137"></a><span id="l19.137" class="difflineminus">-        will be pretty-printed with a newline followed by that string repeated</span>
<a href="#l19.138"></a><span id="l19.138" class="difflineminus">-        for each level of nesting. ``None`` (the default) selects the most compact</span>
<a href="#l19.139"></a><span id="l19.139" class="difflineminus">-        representation without any newlines. For backwards compatibility with</span>
<a href="#l19.140"></a><span id="l19.140" class="difflineminus">-        versions of simplejson earlier than 2.1.0, an integer is also accepted</span>
<a href="#l19.141"></a><span id="l19.141" class="difflineminus">-        and is converted to a string with that many spaces.</span>
<a href="#l19.142"></a><span id="l19.142" class="difflineminus">-</span>
<a href="#l19.143"></a><span id="l19.143" class="difflineminus">-        If specified, separators should be a (item_separator, key_separator)</span>
<a href="#l19.144"></a><span id="l19.144" class="difflineminus">-        tuple.  The default is (', ', ': ').  To get the most compact JSON</span>
<a href="#l19.145"></a><span id="l19.145" class="difflineminus">-        representation you should specify (',', ':') to eliminate whitespace.</span>
<a href="#l19.146"></a><span id="l19.146" class="difflineminus">-</span>
<a href="#l19.147"></a><span id="l19.147" class="difflineminus">-        If specified, default is a function that gets called for objects</span>
<a href="#l19.148"></a><span id="l19.148" class="difflineminus">-        that can't otherwise be serialized.  It should return a JSON encodable</span>
<a href="#l19.149"></a><span id="l19.149" class="difflineminus">-        version of the object or raise a ``TypeError``.</span>
<a href="#l19.150"></a><span id="l19.150" class="difflineminus">-</span>
<a href="#l19.151"></a><span id="l19.151" class="difflineminus">-        If encoding is not None, then all input strings will be</span>
<a href="#l19.152"></a><span id="l19.152" class="difflineminus">-        transformed into unicode using that encoding prior to JSON-encoding.</span>
<a href="#l19.153"></a><span id="l19.153" class="difflineminus">-        The default is UTF-8.</span>
<a href="#l19.154"></a><span id="l19.154" class="difflineminus">-</span>
<a href="#l19.155"></a><span id="l19.155" class="difflineminus">-        If use_decimal is true (not the default), ``decimal.Decimal`` will</span>
<a href="#l19.156"></a><span id="l19.156" class="difflineminus">-        be supported directly by the encoder. For the inverse, decode JSON</span>
<a href="#l19.157"></a><span id="l19.157" class="difflineminus">-        with ``parse_float=decimal.Decimal``.</span>
<a href="#l19.158"></a><span id="l19.158" class="difflineminus">-</span>
<a href="#l19.159"></a><span id="l19.159" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l19.160"></a><span id="l19.160" class="difflineminus">-</span>
<a href="#l19.161"></a><span id="l19.161" class="difflineminus">-        self.skipkeys = skipkeys</span>
<a href="#l19.162"></a><span id="l19.162" class="difflineminus">-        self.ensure_ascii = ensure_ascii</span>
<a href="#l19.163"></a><span id="l19.163" class="difflineminus">-        self.check_circular = check_circular</span>
<a href="#l19.164"></a><span id="l19.164" class="difflineminus">-        self.allow_nan = allow_nan</span>
<a href="#l19.165"></a><span id="l19.165" class="difflineminus">-        self.sort_keys = sort_keys</span>
<a href="#l19.166"></a><span id="l19.166" class="difflineminus">-        self.use_decimal = use_decimal</span>
<a href="#l19.167"></a><span id="l19.167" class="difflineminus">-        if isinstance(indent, (int, long)):</span>
<a href="#l19.168"></a><span id="l19.168" class="difflineminus">-            indent = ' ' * indent</span>
<a href="#l19.169"></a><span id="l19.169" class="difflineminus">-        self.indent = indent</span>
<a href="#l19.170"></a><span id="l19.170" class="difflineminus">-        if separators is not None:</span>
<a href="#l19.171"></a><span id="l19.171" class="difflineminus">-            self.item_separator, self.key_separator = separators</span>
<a href="#l19.172"></a><span id="l19.172" class="difflineminus">-        elif indent is not None:</span>
<a href="#l19.173"></a><span id="l19.173" class="difflineminus">-            self.item_separator = ','</span>
<a href="#l19.174"></a><span id="l19.174" class="difflineminus">-        if default is not None:</span>
<a href="#l19.175"></a><span id="l19.175" class="difflineminus">-            self.default = default</span>
<a href="#l19.176"></a><span id="l19.176" class="difflineminus">-        self.encoding = encoding</span>
<a href="#l19.177"></a><span id="l19.177" class="difflineminus">-</span>
<a href="#l19.178"></a><span id="l19.178" class="difflineminus">-    def default(self, o):</span>
<a href="#l19.179"></a><span id="l19.179" class="difflineminus">-        &quot;&quot;&quot;Implement this method in a subclass such that it returns</span>
<a href="#l19.180"></a><span id="l19.180" class="difflineminus">-        a serializable object for ``o``, or calls the base implementation</span>
<a href="#l19.181"></a><span id="l19.181" class="difflineminus">-        (to raise a ``TypeError``).</span>
<a href="#l19.182"></a><span id="l19.182" class="difflineminus">-</span>
<a href="#l19.183"></a><span id="l19.183" class="difflineminus">-        For example, to support arbitrary iterators, you could</span>
<a href="#l19.184"></a><span id="l19.184" class="difflineminus">-        implement default like this::</span>
<a href="#l19.185"></a><span id="l19.185" class="difflineminus">-</span>
<a href="#l19.186"></a><span id="l19.186" class="difflineminus">-            def default(self, o):</span>
<a href="#l19.187"></a><span id="l19.187" class="difflineminus">-                try:</span>
<a href="#l19.188"></a><span id="l19.188" class="difflineminus">-                    iterable = iter(o)</span>
<a href="#l19.189"></a><span id="l19.189" class="difflineminus">-                except TypeError:</span>
<a href="#l19.190"></a><span id="l19.190" class="difflineminus">-                    pass</span>
<a href="#l19.191"></a><span id="l19.191" class="difflineminus">-                else:</span>
<a href="#l19.192"></a><span id="l19.192" class="difflineminus">-                    return list(iterable)</span>
<a href="#l19.193"></a><span id="l19.193" class="difflineminus">-                return JSONEncoder.default(self, o)</span>
<a href="#l19.194"></a><span id="l19.194" class="difflineminus">-</span>
<a href="#l19.195"></a><span id="l19.195" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l19.196"></a><span id="l19.196" class="difflineminus">-        raise TypeError(repr(o) + &quot; is not JSON serializable&quot;)</span>
<a href="#l19.197"></a><span id="l19.197" class="difflineminus">-</span>
<a href="#l19.198"></a><span id="l19.198" class="difflineminus">-    def encode(self, o):</span>
<a href="#l19.199"></a><span id="l19.199" class="difflineminus">-        &quot;&quot;&quot;Return a JSON string representation of a Python data structure.</span>
<a href="#l19.200"></a><span id="l19.200" class="difflineminus">-</span>
<a href="#l19.201"></a><span id="l19.201" class="difflineminus">-        &gt;&gt;&gt; from simplejson import JSONEncoder</span>
<a href="#l19.202"></a><span id="l19.202" class="difflineminus">-        &gt;&gt;&gt; JSONEncoder().encode({&quot;foo&quot;: [&quot;bar&quot;, &quot;baz&quot;]})</span>
<a href="#l19.203"></a><span id="l19.203" class="difflineminus">-        '{&quot;foo&quot;: [&quot;bar&quot;, &quot;baz&quot;]}'</span>
<a href="#l19.204"></a><span id="l19.204" class="difflineminus">-</span>
<a href="#l19.205"></a><span id="l19.205" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l19.206"></a><span id="l19.206" class="difflineminus">-        # This is for extremely simple cases and benchmarks.</span>
<a href="#l19.207"></a><span id="l19.207" class="difflineminus">-        if isinstance(o, basestring):</span>
<a href="#l19.208"></a><span id="l19.208" class="difflineminus">-            if isinstance(o, str):</span>
<a href="#l19.209"></a><span id="l19.209" class="difflineminus">-                _encoding = self.encoding</span>
<a href="#l19.210"></a><span id="l19.210" class="difflineminus">-                if (_encoding is not None</span>
<a href="#l19.211"></a><span id="l19.211" class="difflineminus">-                        and not (_encoding == 'utf-8')):</span>
<a href="#l19.212"></a><span id="l19.212" class="difflineminus">-                    o = o.decode(_encoding)</span>
<a href="#l19.213"></a><span id="l19.213" class="difflineminus">-            if self.ensure_ascii:</span>
<a href="#l19.214"></a><span id="l19.214" class="difflineminus">-                return encode_basestring_ascii(o)</span>
<a href="#l19.215"></a><span id="l19.215" class="difflineminus">-            else:</span>
<a href="#l19.216"></a><span id="l19.216" class="difflineminus">-                return encode_basestring(o)</span>
<a href="#l19.217"></a><span id="l19.217" class="difflineminus">-        # This doesn't pass the iterator directly to ''.join() because the</span>
<a href="#l19.218"></a><span id="l19.218" class="difflineminus">-        # exceptions aren't as detailed.  The list call should be roughly</span>
<a href="#l19.219"></a><span id="l19.219" class="difflineminus">-        # equivalent to the PySequence_Fast that ''.join() would do.</span>
<a href="#l19.220"></a><span id="l19.220" class="difflineminus">-        chunks = self.iterencode(o, _one_shot=True)</span>
<a href="#l19.221"></a><span id="l19.221" class="difflineminus">-        if not isinstance(chunks, (list, tuple)):</span>
<a href="#l19.222"></a><span id="l19.222" class="difflineminus">-            chunks = list(chunks)</span>
<a href="#l19.223"></a><span id="l19.223" class="difflineminus">-        if self.ensure_ascii:</span>
<a href="#l19.224"></a><span id="l19.224" class="difflineminus">-            return ''.join(chunks)</span>
<a href="#l19.225"></a><span id="l19.225" class="difflineminus">-        else:</span>
<a href="#l19.226"></a><span id="l19.226" class="difflineminus">-            return u''.join(chunks)</span>
<a href="#l19.227"></a><span id="l19.227" class="difflineminus">-</span>
<a href="#l19.228"></a><span id="l19.228" class="difflineminus">-    def iterencode(self, o, _one_shot=False):</span>
<a href="#l19.229"></a><span id="l19.229" class="difflineminus">-        &quot;&quot;&quot;Encode the given object and yield each string</span>
<a href="#l19.230"></a><span id="l19.230" class="difflineminus">-        representation as available.</span>
<a href="#l19.231"></a><span id="l19.231" class="difflineminus">-</span>
<a href="#l19.232"></a><span id="l19.232" class="difflineminus">-        For example::</span>
<a href="#l19.233"></a><span id="l19.233" class="difflineminus">-</span>
<a href="#l19.234"></a><span id="l19.234" class="difflineminus">-            for chunk in JSONEncoder().iterencode(bigobject):</span>
<a href="#l19.235"></a><span id="l19.235" class="difflineminus">-                mysocket.write(chunk)</span>
<a href="#l19.236"></a><span id="l19.236" class="difflineminus">-</span>
<a href="#l19.237"></a><span id="l19.237" class="difflineminus">-        &quot;&quot;&quot;</span>
<a href="#l19.238"></a><span id="l19.238" class="difflineminus">-        if self.check_circular:</span>
<a href="#l19.239"></a><span id="l19.239" class="difflineminus">-            markers = {}</span>
<a href="#l19.240"></a><span id="l19.240" class="difflineminus">-        else:</span>
<a href="#l19.241"></a><span id="l19.241" class="difflineminus">-            markers = None</span>
<a href="#l19.242"></a><span id="l19.242" class="difflineminus">-        if self.ensure_ascii:</span>
<a href="#l19.243"></a><span id="l19.243" class="difflineminus">-            _encoder = encode_basestring_ascii</span>
<a href="#l19.244"></a><span id="l19.244" class="difflineminus">-        else:</span>
<a href="#l19.245"></a><span id="l19.245" class="difflineminus">-            _encoder = encode_basestring</span>
<a href="#l19.246"></a><span id="l19.246" class="difflineminus">-        if self.encoding != 'utf-8':</span>
<a href="#l19.247"></a><span id="l19.247" class="difflineminus">-            def _encoder(o, _orig_encoder=_encoder, _encoding=self.encoding):</span>
<a href="#l19.248"></a><span id="l19.248" class="difflineminus">-                if isinstance(o, str):</span>
<a href="#l19.249"></a><span id="l19.249" class="difflineminus">-                    o = o.decode(_encoding)</span>
<a href="#l19.250"></a><span id="l19.250" class="difflineminus">-                return _orig_encoder(o)</span>
<a href="#l19.251"></a><span id="l19.251" class="difflineminus">-</span>
<a href="#l19.252"></a><span id="l19.252" class="difflineminus">-        def floatstr(o, allow_nan=self.allow_nan,</span>
<a href="#l19.253"></a><span id="l19.253" class="difflineminus">-                _repr=FLOAT_REPR, _inf=PosInf, _neginf=-PosInf):</span>
<a href="#l19.254"></a><span id="l19.254" class="difflineminus">-            # Check for specials. Note that this type of test is processor</span>
<a href="#l19.255"></a><span id="l19.255" class="difflineminus">-            # and/or platform-specific, so do tests which don't depend on</span>
<a href="#l19.256"></a><span id="l19.256" class="difflineminus">-            # the internals.</span>
<a href="#l19.257"></a><span id="l19.257" class="difflineminus">-</span>
<a href="#l19.258"></a><span id="l19.258" class="difflineminus">-            if o != o:</span>
<a href="#l19.259"></a><span id="l19.259" class="difflineminus">-                text = 'NaN'</span>
<a href="#l19.260"></a><span id="l19.260" class="difflineminus">-            elif o == _inf:</span>
<a href="#l19.261"></a><span id="l19.261" class="difflineminus">-                text = 'Infinity'</span>
<a href="#l19.262"></a><span id="l19.262" class="difflineminus">-            elif o == _neginf:</span>
<a href="#l19.263"></a><span id="l19.263" class="difflineminus">-                text = '-Infinity'</span>
<a href="#l19.264"></a><span id="l19.264" class="difflineminus">-            else:</span>
<a href="#l19.265"></a><span id="l19.265" class="difflineminus">-                return _repr(o)</span>
<a href="#l19.266"></a><span id="l19.266" class="difflineminus">-</span>
<a href="#l19.267"></a><span id="l19.267" class="difflineminus">-            if not allow_nan:</span>
<a href="#l19.268"></a><span id="l19.268" class="difflineminus">-                raise ValueError(</span>
<a href="#l19.269"></a><span id="l19.269" class="difflineminus">-                    &quot;Out of range float values are not JSON compliant: &quot; +</span>
<a href="#l19.270"></a><span id="l19.270" class="difflineminus">-                    repr(o))</span>
<a href="#l19.271"></a><span id="l19.271" class="difflineminus">-</span>
<a href="#l19.272"></a><span id="l19.272" class="difflineminus">-            return text</span>
<a href="#l19.273"></a><span id="l19.273" class="difflineminus">-</span>
<a href="#l19.274"></a><span id="l19.274" class="difflineminus">-</span>
<a href="#l19.275"></a><span id="l19.275" class="difflineminus">-        key_memo = {}</span>
<a href="#l19.276"></a><span id="l19.276" class="difflineminus">-        if (_one_shot and c_make_encoder is not None</span>
<a href="#l19.277"></a><span id="l19.277" class="difflineminus">-                and self.indent is None):</span>
<a href="#l19.278"></a><span id="l19.278" class="difflineminus">-            _iterencode = c_make_encoder(</span>
<a href="#l19.279"></a><span id="l19.279" class="difflineminus">-                markers, self.default, _encoder, self.indent,</span>
<a href="#l19.280"></a><span id="l19.280" class="difflineminus">-                self.key_separator, self.item_separator, self.sort_keys,</span>
<a href="#l19.281"></a><span id="l19.281" class="difflineminus">-                self.skipkeys, self.allow_nan, key_memo, self.use_decimal)</span>
<a href="#l19.282"></a><span id="l19.282" class="difflineminus">-        else:</span>
<a href="#l19.283"></a><span id="l19.283" class="difflineminus">-            _iterencode = _make_iterencode(</span>
<a href="#l19.284"></a><span id="l19.284" class="difflineminus">-                markers, self.default, _encoder, self.indent, floatstr,</span>
<a href="#l19.285"></a><span id="l19.285" class="difflineminus">-                self.key_separator, self.item_separator, self.sort_keys,</span>
<a href="#l19.286"></a><span id="l19.286" class="difflineminus">-                self.skipkeys, _one_shot, self.use_decimal)</span>
<a href="#l19.287"></a><span id="l19.287" class="difflineminus">-        try:</span>
<a href="#l19.288"></a><span id="l19.288" class="difflineminus">-            return _iterencode(o, 0)</span>
<a href="#l19.289"></a><span id="l19.289" class="difflineminus">-        finally:</span>
<a href="#l19.290"></a><span id="l19.290" class="difflineminus">-            key_memo.clear()</span>
<a href="#l19.291"></a><span id="l19.291" class="difflineminus">-</span>
<a href="#l19.292"></a><span id="l19.292" class="difflineminus">-</span>
<a href="#l19.293"></a><span id="l19.293" class="difflineminus">-class JSONEncoderForHTML(JSONEncoder):</span>
<a href="#l19.294"></a><span id="l19.294" class="difflineminus">-    &quot;&quot;&quot;An encoder that produces JSON safe to embed in HTML.</span>
<a href="#l19.295"></a><span id="l19.295" class="difflineminus">-</span>
<a href="#l19.296"></a><span id="l19.296" class="difflineminus">-    To embed JSON content in, say, a script tag on a web page, the</span>
<a href="#l19.297"></a><span id="l19.297" class="difflineminus">-    characters &amp;, &lt; and &gt; should be escaped. They cannot be escaped</span>
<a href="#l19.298"></a><span id="l19.298" class="difflineminus">-    with the usual entities (e.g. &amp;amp;) because they are not expanded</span>
<a href="#l19.299"></a><span id="l19.299" class="difflineminus">-    within &lt;script&gt; tags.</span>
<a href="#l19.300"></a><span id="l19.300" class="difflineminus">-    &quot;&quot;&quot;</span>
<a href="#l19.301"></a><span id="l19.301" class="difflineminus">-</span>
<a href="#l19.302"></a><span id="l19.302" class="difflineminus">-    def encode(self, o):</span>
<a href="#l19.303"></a><span id="l19.303" class="difflineminus">-        # Override JSONEncoder.encode because it has hacks for</span>
<a href="#l19.304"></a><span id="l19.304" class="difflineminus">-        # performance that make things more complicated.</span>
<a href="#l19.305"></a><span id="l19.305" class="difflineminus">-        chunks = self.iterencode(o, True)</span>
<a href="#l19.306"></a><span id="l19.306" class="difflineminus">-        if self.ensure_ascii:</span>
<a href="#l19.307"></a><span id="l19.307" class="difflineminus">-            return ''.join(chunks)</span>
<a href="#l19.308"></a><span id="l19.308" class="difflineminus">-        else:</span>
<a href="#l19.309"></a><span id="l19.309" class="difflineminus">-            return u''.join(chunks)</span>
<a href="#l19.310"></a><span id="l19.310" class="difflineminus">-</span>
<a href="#l19.311"></a><span id="l19.311" class="difflineminus">-    def iterencode(self, o, _one_shot=False):</span>
<a href="#l19.312"></a><span id="l19.312" class="difflineminus">-        chunks = super(JSONEncoderForHTML, self).iterencode(o, _one_shot)</span>
<a href="#l19.313"></a><span id="l19.313" class="difflineminus">-        for chunk in chunks:</span>
<a href="#l19.314"></a><span id="l19.314" class="difflineminus">-            chunk = chunk.replace('&amp;', '\\u0026')</span>
<a href="#l19.315"></a><span id="l19.315" class="difflineminus">-            chunk = chunk.replace('&lt;', '\\u003c')</span>
<a href="#l19.316"></a><span id="l19.316" class="difflineminus">-            chunk = chunk.replace('&gt;', '\\u003e')</span>
<a href="#l19.317"></a><span id="l19.317" class="difflineminus">-            yield chunk</span>
<a href="#l19.318"></a><span id="l19.318" class="difflineminus">-</span>
<a href="#l19.319"></a><span id="l19.319" class="difflineminus">-</span>
<a href="#l19.320"></a><span id="l19.320" class="difflineminus">-def _make_iterencode(markers, _default, _encoder, _indent, _floatstr,</span>
<a href="#l19.321"></a><span id="l19.321" class="difflineminus">-        _key_separator, _item_separator, _sort_keys, _skipkeys, _one_shot,</span>
<a href="#l19.322"></a><span id="l19.322" class="difflineminus">-        _use_decimal,</span>
<a href="#l19.323"></a><span id="l19.323" class="difflineminus">-        ## HACK: hand-optimized bytecode; turn globals into locals</span>
<a href="#l19.324"></a><span id="l19.324" class="difflineminus">-        False=False,</span>
<a href="#l19.325"></a><span id="l19.325" class="difflineminus">-        True=True,</span>
<a href="#l19.326"></a><span id="l19.326" class="difflineminus">-        ValueError=ValueError,</span>
<a href="#l19.327"></a><span id="l19.327" class="difflineminus">-        basestring=basestring,</span>
<a href="#l19.328"></a><span id="l19.328" class="difflineminus">-        Decimal=Decimal,</span>
<a href="#l19.329"></a><span id="l19.329" class="difflineminus">-        dict=dict,</span>
<a href="#l19.330"></a><span id="l19.330" class="difflineminus">-        float=float,</span>
<a href="#l19.331"></a><span id="l19.331" class="difflineminus">-        id=id,</span>
<a href="#l19.332"></a><span id="l19.332" class="difflineminus">-        int=int,</span>
<a href="#l19.333"></a><span id="l19.333" class="difflineminus">-        isinstance=isinstance,</span>
<a href="#l19.334"></a><span id="l19.334" class="difflineminus">-        list=list,</span>
<a href="#l19.335"></a><span id="l19.335" class="difflineminus">-        long=long,</span>
<a href="#l19.336"></a><span id="l19.336" class="difflineminus">-        str=str,</span>
<a href="#l19.337"></a><span id="l19.337" class="difflineminus">-        tuple=tuple,</span>
<a href="#l19.338"></a><span id="l19.338" class="difflineminus">-    ):</span>
<a href="#l19.339"></a><span id="l19.339" class="difflineminus">-</span>
<a href="#l19.340"></a><span id="l19.340" class="difflineminus">-    def _iterencode_list(lst, _current_indent_level):</span>
<a href="#l19.341"></a><span id="l19.341" class="difflineminus">-        if not lst:</span>
<a href="#l19.342"></a><span id="l19.342" class="difflineminus">-            yield '[]'</span>
<a href="#l19.343"></a><span id="l19.343" class="difflineminus">-            return</span>
<a href="#l19.344"></a><span id="l19.344" class="difflineminus">-        if markers is not None:</span>
<a href="#l19.345"></a><span id="l19.345" class="difflineminus">-            markerid = id(lst)</span>
<a href="#l19.346"></a><span id="l19.346" class="difflineminus">-            if markerid in markers:</span>
<a href="#l19.347"></a><span id="l19.347" class="difflineminus">-                raise ValueError(&quot;Circular reference detected&quot;)</span>
<a href="#l19.348"></a><span id="l19.348" class="difflineminus">-            markers[markerid] = lst</span>
<a href="#l19.349"></a><span id="l19.349" class="difflineminus">-        buf = '['</span>
<a href="#l19.350"></a><span id="l19.350" class="difflineminus">-        if _indent is not None:</span>
<a href="#l19.351"></a><span id="l19.351" class="difflineminus">-            _current_indent_level += 1</span>
<a href="#l19.352"></a><span id="l19.352" class="difflineminus">-            newline_indent = '\n' + (_indent * _current_indent_level)</span>
<a href="#l19.353"></a><span id="l19.353" class="difflineminus">-            separator = _item_separator + newline_indent</span>
<a href="#l19.354"></a><span id="l19.354" class="difflineminus">-            buf += newline_indent</span>
<a href="#l19.355"></a><span id="l19.355" class="difflineminus">-        else:</span>
<a href="#l19.356"></a><span id="l19.356" class="difflineminus">-            newline_indent = None</span>
<a href="#l19.357"></a><span id="l19.357" class="difflineminus">-            separator = _item_separator</span>
<a href="#l19.358"></a><span id="l19.358" class="difflineminus">-        first = True</span>
<a href="#l19.359"></a><span id="l19.359" class="difflineminus">-        for value in lst:</span>
<a href="#l19.360"></a><span id="l19.360" class="difflineminus">-            if first:</span>
<a href="#l19.361"></a><span id="l19.361" class="difflineminus">-                first = False</span>
<a href="#l19.362"></a><span id="l19.362" class="difflineminus">-            else:</span>
<a href="#l19.363"></a><span id="l19.363" class="difflineminus">-                buf = separator</span>
<a href="#l19.364"></a><span id="l19.364" class="difflineminus">-            if isinstance(value, basestring):</span>
<a href="#l19.365"></a><span id="l19.365" class="difflineminus">-                yield buf + _encoder(value)</span>
<a href="#l19.366"></a><span id="l19.366" class="difflineminus">-            elif value is None:</span>
<a href="#l19.367"></a><span id="l19.367" class="difflineminus">-                yield buf + 'null'</span>
<a href="#l19.368"></a><span id="l19.368" class="difflineminus">-            elif value is True:</span>
<a href="#l19.369"></a><span id="l19.369" class="difflineminus">-                yield buf + 'true'</span>
<a href="#l19.370"></a><span id="l19.370" class="difflineminus">-            elif value is False:</span>
<a href="#l19.371"></a><span id="l19.371" class="difflineminus">-                yield buf + 'false'</span>
<a href="#l19.372"></a><span id="l19.372" class="difflineminus">-            elif isinstance(value, (int, long)):</span>
<a href="#l19.373"></a><span id="l19.373" class="difflineminus">-                yield buf + str(value)</span>
<a href="#l19.374"></a><span id="l19.374" class="difflineminus">-            elif isinstance(value, float):</span>
<a href="#l19.375"></a><span id="l19.375" class="difflineminus">-                yield buf + _floatstr(value)</span>
<a href="#l19.376"></a><span id="l19.376" class="difflineminus">-            elif _use_decimal and isinstance(value, Decimal):</span>
<a href="#l19.377"></a><span id="l19.377" class="difflineminus">-                yield buf + str(value)</span>
<a href="#l19.378"></a><span id="l19.378" class="difflineminus">-            else:</span>
<a href="#l19.379"></a><span id="l19.379" class="difflineminus">-                yield buf</span>
<a href="#l19.380"></a><span id="l19.380" class="difflineminus">-                if isinstance(value, (list, tuple)):</span>
<a href="#l19.381"></a><span id="l19.381" class="difflineminus">-                    chunks = _iterencode_list(value, _current_indent_level)</span>
<a href="#l19.382"></a><span id="l19.382" class="difflineminus">-                elif isinstance(value, dict):</span>
<a href="#l19.383"></a><span id="l19.383" class="difflineminus">-                    chunks = _iterencode_dict(value, _current_indent_level)</span>
<a href="#l19.384"></a><span id="l19.384" class="difflineminus">-                else:</span>
<a href="#l19.385"></a><span id="l19.385" class="difflineminus">-                    chunks = _iterencode(value, _current_indent_level)</span>
<a href="#l19.386"></a><span id="l19.386" class="difflineminus">-                for chunk in chunks:</span>
<a href="#l19.387"></a><span id="l19.387" class="difflineminus">-                    yield chunk</span>
<a href="#l19.388"></a><span id="l19.388" class="difflineminus">-        if newline_indent is not None:</span>
<a href="#l19.389"></a><span id="l19.389" class="difflineminus">-            _current_indent_level -= 1</span>
<a href="#l19.390"></a><span id="l19.390" class="difflineminus">-            yield '\n' + (_indent * _current_indent_level)</span>
<a href="#l19.391"></a><span id="l19.391" class="difflineminus">-        yield ']'</span>
<a href="#l19.392"></a><span id="l19.392" class="difflineminus">-        if markers is not None:</span>
<a href="#l19.393"></a><span id="l19.393" class="difflineminus">-            del markers[markerid]</span>
<a href="#l19.394"></a><span id="l19.394" class="difflineminus">-</span>
<a href="#l19.395"></a><span id="l19.395" class="difflineminus">-    def _iterencode_dict(dct, _current_indent_level):</span>
<a href="#l19.396"></a><span id="l19.396" class="difflineminus">-        if not dct:</span>
<a href="#l19.397"></a><span id="l19.397" class="difflineminus">-            yield '{}'</span>
<a href="#l19.398"></a><span id="l19.398" class="difflineminus">-            return</span>
<a href="#l19.399"></a><span id="l19.399" class="difflineminus">-        if markers is not None:</span>
<a href="#l19.400"></a><span id="l19.400" class="difflineminus">-            markerid = id(dct)</span>
<a href="#l19.401"></a><span id="l19.401" class="difflineminus">-            if markerid in markers:</span>
<a href="#l19.402"></a><span id="l19.402" class="difflineminus">-                raise ValueError(&quot;Circular reference detected&quot;)</span>
<a href="#l19.403"></a><span id="l19.403" class="difflineminus">-            markers[markerid] = dct</span>
<a href="#l19.404"></a><span id="l19.404" class="difflineminus">-        yield '{'</span>
<a href="#l19.405"></a><span id="l19.405" class="difflineminus">-        if _indent is not None:</span>
<a href="#l19.406"></a><span id="l19.406" class="difflineminus">-            _current_indent_level += 1</span>
<a href="#l19.407"></a><span id="l19.407" class="difflineminus">-            newline_indent = '\n' + (_indent * _current_indent_level)</span>
<a href="#l19.408"></a><span id="l19.408" class="difflineminus">-            item_separator = _item_separator + newline_indent</span>
<a href="#l19.409"></a><span id="l19.409" class="difflineminus">-            yield newline_indent</span>
<a href="#l19.410"></a><span id="l19.410" class="difflineminus">-        else:</span>
<a href="#l19.411"></a><span id="l19.411" class="difflineminus">-            newline_indent = None</span>
<a href="#l19.412"></a><span id="l19.412" class="difflineminus">-            item_separator = _item_separator</span>
<a href="#l19.413"></a><span id="l19.413" class="difflineminus">-        first = True</span>
<a href="#l19.414"></a><span id="l19.414" class="difflineminus">-        if _sort_keys:</span>
<a href="#l19.415"></a><span id="l19.415" class="difflineminus">-            items = dct.items()</span>
<a href="#l19.416"></a><span id="l19.416" class="difflineminus">-            items.sort(key=lambda kv: kv[0])</span>
<a href="#l19.417"></a><span id="l19.417" class="difflineminus">-        else:</span>
<a href="#l19.418"></a><span id="l19.418" class="difflineminus">-            items = dct.iteritems()</span>
<a href="#l19.419"></a><span id="l19.419" class="difflineminus">-        for key, value in items:</span>
<a href="#l19.420"></a><span id="l19.420" class="difflineminus">-            if isinstance(key, basestring):</span>
<a href="#l19.421"></a><span id="l19.421" class="difflineminus">-                pass</span>
<a href="#l19.422"></a><span id="l19.422" class="difflineminus">-            # JavaScript is weakly typed for these, so it makes sense to</span>
<a href="#l19.423"></a><span id="l19.423" class="difflineminus">-            # also allow them.  Many encoders seem to do something like this.</span>
<a href="#l19.424"></a><span id="l19.424" class="difflineminus">-            elif isinstance(key, float):</span>
<a href="#l19.425"></a><span id="l19.425" class="difflineminus">-                key = _floatstr(key)</span>
<a href="#l19.426"></a><span id="l19.426" class="difflineminus">-            elif key is True:</span>
<a href="#l19.427"></a><span id="l19.427" class="difflineminus">-                key = 'true'</span>
<a href="#l19.428"></a><span id="l19.428" class="difflineminus">-            elif key is False:</span>
<a href="#l19.429"></a><span id="l19.429" class="difflineminus">-                key = 'false'</span>
<a href="#l19.430"></a><span id="l19.430" class="difflineminus">-            elif key is None:</span>
<a href="#l19.431"></a><span id="l19.431" class="difflineminus">-                key = 'null'</span>
<a href="#l19.432"></a><span id="l19.432" class="difflineminus">-            elif isinstance(key, (int, long)):</span>
<a href="#l19.433"></a><span id="l19.433" class="difflineminus">-                key = str(key)</span>
<a href="#l19.434"></a><span id="l19.434" class="difflineminus">-            elif _skipkeys:</span>
<a href="#l19.435"></a><span id="l19.435" class="difflineminus">-                continue</span>
<a href="#l19.436"></a><span id="l19.436" class="difflineminus">-            else:</span>
<a href="#l19.437"></a><span id="l19.437" class="difflineminus">-                raise TypeError(&quot;key &quot; + repr(key) + &quot; is not a string&quot;)</span>
<a href="#l19.438"></a><span id="l19.438" class="difflineminus">-            if first:</span>
<a href="#l19.439"></a><span id="l19.439" class="difflineminus">-                first = False</span>
<a href="#l19.440"></a><span id="l19.440" class="difflineminus">-            else:</span>
<a href="#l19.441"></a><span id="l19.441" class="difflineminus">-                yield item_separator</span>
<a href="#l19.442"></a><span id="l19.442" class="difflineminus">-            yield _encoder(key)</span>
<a href="#l19.443"></a><span id="l19.443" class="difflineminus">-            yield _key_separator</span>
<a href="#l19.444"></a><span id="l19.444" class="difflineminus">-            if isinstance(value, basestring):</span>
<a href="#l19.445"></a><span id="l19.445" class="difflineminus">-                yield _encoder(value)</span>
<a href="#l19.446"></a><span id="l19.446" class="difflineminus">-            elif value is None:</span>
<a href="#l19.447"></a><span id="l19.447" class="difflineminus">-                yield 'null'</span>
<a href="#l19.448"></a><span id="l19.448" class="difflineminus">-            elif value is True:</span>
<a href="#l19.449"></a><span id="l19.449" class="difflineminus">-                yield 'true'</span>
<a href="#l19.450"></a><span id="l19.450" class="difflineminus">-            elif value is False:</span>
<a href="#l19.451"></a><span id="l19.451" class="difflineminus">-                yield 'false'</span>
<a href="#l19.452"></a><span id="l19.452" class="difflineminus">-            elif isinstance(value, (int, long)):</span>
<a href="#l19.453"></a><span id="l19.453" class="difflineminus">-                yield str(value)</span>
<a href="#l19.454"></a><span id="l19.454" class="difflineminus">-            elif isinstance(value, float):</span>
<a href="#l19.455"></a><span id="l19.455" class="difflineminus">-                yield _floatstr(value)</span>
<a href="#l19.456"></a><span id="l19.456" class="difflineminus">-            elif _use_decimal and isinstance(value, Decimal):</span>
<a href="#l19.457"></a><span id="l19.457" class="difflineminus">-                yield str(value)</span>
<a href="#l19.458"></a><span id="l19.458" class="difflineminus">-            else:</span>
<a href="#l19.459"></a><span id="l19.459" class="difflineminus">-                if isinstance(value, (list, tuple)):</span>
<a href="#l19.460"></a><span id="l19.460" class="difflineminus">-                    chunks = _iterencode_list(value, _current_indent_level)</span>
<a href="#l19.461"></a><span id="l19.461" class="difflineminus">-                elif isinstance(value, dict):</span>
<a href="#l19.462"></a><span id="l19.462" class="difflineminus">-                    chunks = _iterencode_dict(value, _current_indent_level)</span>
<a href="#l19.463"></a><span id="l19.463" class="difflineminus">-                else:</span>
<a href="#l19.464"></a><span id="l19.464" class="difflineminus">-                    chunks = _iterencode(value, _current_indent_level)</span>
<a href="#l19.465"></a><span id="l19.465" class="difflineminus">-                for chunk in chunks:</span>
<a href="#l19.466"></a><span id="l19.466" class="difflineminus">-                    yield chunk</span>
<a href="#l19.467"></a><span id="l19.467" class="difflineminus">-        if newline_indent is not None:</span>
<a href="#l19.468"></a><span id="l19.468" class="difflineminus">-            _current_indent_level -= 1</span>
<a href="#l19.469"></a><span id="l19.469" class="difflineminus">-            yield '\n' + (_indent * _current_indent_level)</span>
<a href="#l19.470"></a><span id="l19.470" class="difflineminus">-        yield '}'</span>
<a href="#l19.471"></a><span id="l19.471" class="difflineminus">-        if markers is not None:</span>
<a href="#l19.472"></a><span id="l19.472" class="difflineminus">-            del markers[markerid]</span>
<a href="#l19.473"></a><span id="l19.473" class="difflineminus">-</span>
<a href="#l19.474"></a><span id="l19.474" class="difflineminus">-    def _iterencode(o, _current_indent_level):</span>
<a href="#l19.475"></a><span id="l19.475" class="difflineminus">-        if isinstance(o, basestring):</span>
<a href="#l19.476"></a><span id="l19.476" class="difflineminus">-            yield _encoder(o)</span>
<a href="#l19.477"></a><span id="l19.477" class="difflineminus">-        elif o is None:</span>
<a href="#l19.478"></a><span id="l19.478" class="difflineminus">-            yield 'null'</span>
<a href="#l19.479"></a><span id="l19.479" class="difflineminus">-        elif o is True:</span>
<a href="#l19.480"></a><span id="l19.480" class="difflineminus">-            yield 'true'</span>
<a href="#l19.481"></a><span id="l19.481" class="difflineminus">-        elif o is False:</span>
<a href="#l19.482"></a><span id="l19.482" class="difflineminus">-            yield 'false'</span>
<a href="#l19.483"></a><span id="l19.483" class="difflineminus">-        elif isinstance(o, (int, long)):</span>
<a href="#l19.484"></a><span id="l19.484" class="difflineminus">-            yield str(o)</span>
<a href="#l19.485"></a><span id="l19.485" class="difflineminus">-        elif isinstance(o, float):</span>
<a href="#l19.486"></a><span id="l19.486" class="difflineminus">-            yield _floatstr(o)</span>
<a href="#l19.487"></a><span id="l19.487" class="difflineminus">-        elif isinstance(o, (list, tuple)):</span>
<a href="#l19.488"></a><span id="l19.488" class="difflineminus">-            for chunk in _iterencode_list(o, _current_indent_level):</span>
<a href="#l19.489"></a><span id="l19.489" class="difflineminus">-                yield chunk</span>
<a href="#l19.490"></a><span id="l19.490" class="difflineminus">-        elif isinstance(o, dict):</span>
<a href="#l19.491"></a><span id="l19.491" class="difflineminus">-            for chunk in _iterencode_dict(o, _current_indent_level):</span>
<a href="#l19.492"></a><span id="l19.492" class="difflineminus">-                yield chunk</span>
<a href="#l19.493"></a><span id="l19.493" class="difflineminus">-        elif _use_decimal and isinstance(o, Decimal):</span>
<a href="#l19.494"></a><span id="l19.494" class="difflineminus">-            yield str(o)</span>
<a href="#l19.495"></a><span id="l19.495" class="difflineminus">-        else:</span>
<a href="#l19.496"></a><span id="l19.496" class="difflineminus">-            if markers is not None:</span>
<a href="#l19.497"></a><span id="l19.497" class="difflineminus">-                markerid = id(o)</span>
<a href="#l19.498"></a><span id="l19.498" class="difflineminus">-                if markerid in markers:</span>
<a href="#l19.499"></a><span id="l19.499" class="difflineminus">-                    raise ValueError(&quot;Circular reference detected&quot;)</span>
<a href="#l19.500"></a><span id="l19.500" class="difflineminus">-                markers[markerid] = o</span>
<a href="#l19.501"></a><span id="l19.501" class="difflineminus">-            o = _default(o)</span>
<a href="#l19.502"></a><span id="l19.502" class="difflineminus">-            for chunk in _iterencode(o, _current_indent_level):</span>
<a href="#l19.503"></a><span id="l19.503" class="difflineminus">-                yield chunk</span>
<a href="#l19.504"></a><span id="l19.504" class="difflineminus">-            if markers is not None:</span>
<a href="#l19.505"></a><span id="l19.505" class="difflineminus">-                del markers[markerid]</span>
<a href="#l19.506"></a><span id="l19.506" class="difflineminus">-</span>
<a href="#l19.507"></a><span id="l19.507" class="difflineminus">-    return _iterencode</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/ordered_dict.py</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,119 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-&quot;&quot;&quot;Drop-in replacement for collections.OrderedDict by Raymond Hettinger</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">-</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">-http://code.activestate.com/recipes/576693/</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-from UserDict import DictMixin</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineminus">-</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-# Modified from original to support Python 2.4, see</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-# http://code.google.com/p/simplejson/issues/detail?id=53</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-try:</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-    all</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-except NameError:</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-    def all(seq):</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-        for elem in seq:</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-            if not elem:</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineminus">-                return False</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">-        return True</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-class OrderedDict(dict, DictMixin):</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-    def __init__(self, *args, **kwds):</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-        if len(args) &gt; 1:</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-            raise TypeError('expected at most 1 arguments, got %d' % len(args))</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-        try:</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-            self.__end</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-        except AttributeError:</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-            self.clear()</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-        self.update(*args, **kwds)</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-    def clear(self):</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-        self.__end = end = []</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-        end += [None, end, end]         # sentinel node for doubly linked list</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-        self.__map = {}                 # key --&gt; [key, prev, next]</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineminus">-        dict.clear(self)</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-    def __setitem__(self, key, value):</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">-        if key not in self:</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineminus">-            end = self.__end</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineminus">-            curr = end[1]</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineminus">-            curr[2] = end[1] = self.__map[key] = [key, curr, end]</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineminus">-        dict.__setitem__(self, key, value)</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineminus">-</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineminus">-    def __delitem__(self, key):</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineminus">-        dict.__delitem__(self, key)</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineminus">-        key, prev, next = self.__map.pop(key)</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-        prev[2] = next</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineminus">-        next[1] = prev</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineminus">-</span>
<a href="#l20.53"></a><span id="l20.53" class="difflineminus">-    def __iter__(self):</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineminus">-        end = self.__end</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineminus">-        curr = end[2]</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineminus">-        while curr is not end:</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineminus">-            yield curr[0]</span>
<a href="#l20.58"></a><span id="l20.58" class="difflineminus">-            curr = curr[2]</span>
<a href="#l20.59"></a><span id="l20.59" class="difflineminus">-</span>
<a href="#l20.60"></a><span id="l20.60" class="difflineminus">-    def __reversed__(self):</span>
<a href="#l20.61"></a><span id="l20.61" class="difflineminus">-        end = self.__end</span>
<a href="#l20.62"></a><span id="l20.62" class="difflineminus">-        curr = end[1]</span>
<a href="#l20.63"></a><span id="l20.63" class="difflineminus">-        while curr is not end:</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineminus">-            yield curr[0]</span>
<a href="#l20.65"></a><span id="l20.65" class="difflineminus">-            curr = curr[1]</span>
<a href="#l20.66"></a><span id="l20.66" class="difflineminus">-</span>
<a href="#l20.67"></a><span id="l20.67" class="difflineminus">-    def popitem(self, last=True):</span>
<a href="#l20.68"></a><span id="l20.68" class="difflineminus">-        if not self:</span>
<a href="#l20.69"></a><span id="l20.69" class="difflineminus">-            raise KeyError('dictionary is empty')</span>
<a href="#l20.70"></a><span id="l20.70" class="difflineminus">-        # Modified from original to support Python 2.4, see</span>
<a href="#l20.71"></a><span id="l20.71" class="difflineminus">-        # http://code.google.com/p/simplejson/issues/detail?id=53</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineminus">-        if last:</span>
<a href="#l20.73"></a><span id="l20.73" class="difflineminus">-            key = reversed(self).next()</span>
<a href="#l20.74"></a><span id="l20.74" class="difflineminus">-        else:</span>
<a href="#l20.75"></a><span id="l20.75" class="difflineminus">-            key = iter(self).next()</span>
<a href="#l20.76"></a><span id="l20.76" class="difflineminus">-        value = self.pop(key)</span>
<a href="#l20.77"></a><span id="l20.77" class="difflineminus">-        return key, value</span>
<a href="#l20.78"></a><span id="l20.78" class="difflineminus">-</span>
<a href="#l20.79"></a><span id="l20.79" class="difflineminus">-    def __reduce__(self):</span>
<a href="#l20.80"></a><span id="l20.80" class="difflineminus">-        items = [[k, self[k]] for k in self]</span>
<a href="#l20.81"></a><span id="l20.81" class="difflineminus">-        tmp = self.__map, self.__end</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineminus">-        del self.__map, self.__end</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineminus">-        inst_dict = vars(self).copy()</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineminus">-        self.__map, self.__end = tmp</span>
<a href="#l20.85"></a><span id="l20.85" class="difflineminus">-        if inst_dict:</span>
<a href="#l20.86"></a><span id="l20.86" class="difflineminus">-            return (self.__class__, (items,), inst_dict)</span>
<a href="#l20.87"></a><span id="l20.87" class="difflineminus">-        return self.__class__, (items,)</span>
<a href="#l20.88"></a><span id="l20.88" class="difflineminus">-</span>
<a href="#l20.89"></a><span id="l20.89" class="difflineminus">-    def keys(self):</span>
<a href="#l20.90"></a><span id="l20.90" class="difflineminus">-        return list(self)</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineminus">-</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineminus">-    setdefault = DictMixin.setdefault</span>
<a href="#l20.93"></a><span id="l20.93" class="difflineminus">-    update = DictMixin.update</span>
<a href="#l20.94"></a><span id="l20.94" class="difflineminus">-    pop = DictMixin.pop</span>
<a href="#l20.95"></a><span id="l20.95" class="difflineminus">-    values = DictMixin.values</span>
<a href="#l20.96"></a><span id="l20.96" class="difflineminus">-    items = DictMixin.items</span>
<a href="#l20.97"></a><span id="l20.97" class="difflineminus">-    iterkeys = DictMixin.iterkeys</span>
<a href="#l20.98"></a><span id="l20.98" class="difflineminus">-    itervalues = DictMixin.itervalues</span>
<a href="#l20.99"></a><span id="l20.99" class="difflineminus">-    iteritems = DictMixin.iteritems</span>
<a href="#l20.100"></a><span id="l20.100" class="difflineminus">-</span>
<a href="#l20.101"></a><span id="l20.101" class="difflineminus">-    def __repr__(self):</span>
<a href="#l20.102"></a><span id="l20.102" class="difflineminus">-        if not self:</span>
<a href="#l20.103"></a><span id="l20.103" class="difflineminus">-            return '%s()' % (self.__class__.__name__,)</span>
<a href="#l20.104"></a><span id="l20.104" class="difflineminus">-        return '%s(%r)' % (self.__class__.__name__, self.items())</span>
<a href="#l20.105"></a><span id="l20.105" class="difflineminus">-</span>
<a href="#l20.106"></a><span id="l20.106" class="difflineminus">-    def copy(self):</span>
<a href="#l20.107"></a><span id="l20.107" class="difflineminus">-        return self.__class__(self)</span>
<a href="#l20.108"></a><span id="l20.108" class="difflineminus">-</span>
<a href="#l20.109"></a><span id="l20.109" class="difflineminus">-    @classmethod</span>
<a href="#l20.110"></a><span id="l20.110" class="difflineminus">-    def fromkeys(cls, iterable, value=None):</span>
<a href="#l20.111"></a><span id="l20.111" class="difflineminus">-        d = cls()</span>
<a href="#l20.112"></a><span id="l20.112" class="difflineminus">-        for key in iterable:</span>
<a href="#l20.113"></a><span id="l20.113" class="difflineminus">-            d[key] = value</span>
<a href="#l20.114"></a><span id="l20.114" class="difflineminus">-        return d</span>
<a href="#l20.115"></a><span id="l20.115" class="difflineminus">-</span>
<a href="#l20.116"></a><span id="l20.116" class="difflineminus">-    def __eq__(self, other):</span>
<a href="#l20.117"></a><span id="l20.117" class="difflineminus">-        if isinstance(other, OrderedDict):</span>
<a href="#l20.118"></a><span id="l20.118" class="difflineminus">-            return len(self)==len(other) and \</span>
<a href="#l20.119"></a><span id="l20.119" class="difflineminus">-                   all(p==q for p, q in  zip(self.items(), other.items()))</span>
<a href="#l20.120"></a><span id="l20.120" class="difflineminus">-        return dict.__eq__(self, other)</span>
<a href="#l20.121"></a><span id="l20.121" class="difflineminus">-</span>
<a href="#l20.122"></a><span id="l20.122" class="difflineminus">-    def __ne__(self, other):</span>
<a href="#l20.123"></a><span id="l20.123" class="difflineminus">-        return not self == other</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">deleted file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/scanner.py</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ /dev/null</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -1,77 +0,0 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineminus">-&quot;&quot;&quot;JSON token scanner</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">-import re</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineminus">-def _import_c_make_scanner():</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">-    try:</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineminus">-        from simplejson._speedups import make_scanner</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">-        return make_scanner</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-    except ImportError:</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-        return None</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-c_make_scanner = _import_c_make_scanner()</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-__all__ = ['make_scanner']</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-NUMBER_RE = re.compile(</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-    r'(-?(?:0|[1-9]\d*))(\.\d+)?([eE][-+]?\d+)?',</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-    (re.VERBOSE | re.MULTILINE | re.DOTALL))</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">-</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineminus">-def py_make_scanner(context):</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineminus">-    parse_object = context.parse_object</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineminus">-    parse_array = context.parse_array</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineminus">-    parse_string = context.parse_string</span>
<a href="#l21.26"></a><span id="l21.26" class="difflineminus">-    match_number = NUMBER_RE.match</span>
<a href="#l21.27"></a><span id="l21.27" class="difflineminus">-    encoding = context.encoding</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineminus">-    strict = context.strict</span>
<a href="#l21.29"></a><span id="l21.29" class="difflineminus">-    parse_float = context.parse_float</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-    parse_int = context.parse_int</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-    parse_constant = context.parse_constant</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineminus">-    object_hook = context.object_hook</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineminus">-    object_pairs_hook = context.object_pairs_hook</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">-    memo = context.memo</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineminus">-</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-    def _scan_once(string, idx):</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineminus">-        try:</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineminus">-            nextchar = string[idx]</span>
<a href="#l21.39"></a><span id="l21.39" class="difflineminus">-        except IndexError:</span>
<a href="#l21.40"></a><span id="l21.40" class="difflineminus">-            raise StopIteration</span>
<a href="#l21.41"></a><span id="l21.41" class="difflineminus">-</span>
<a href="#l21.42"></a><span id="l21.42" class="difflineminus">-        if nextchar == '&quot;':</span>
<a href="#l21.43"></a><span id="l21.43" class="difflineminus">-            return parse_string(string, idx + 1, encoding, strict)</span>
<a href="#l21.44"></a><span id="l21.44" class="difflineminus">-        elif nextchar == '{':</span>
<a href="#l21.45"></a><span id="l21.45" class="difflineminus">-            return parse_object((string, idx + 1), encoding, strict,</span>
<a href="#l21.46"></a><span id="l21.46" class="difflineminus">-                _scan_once, object_hook, object_pairs_hook, memo)</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineminus">-        elif nextchar == '[':</span>
<a href="#l21.48"></a><span id="l21.48" class="difflineminus">-            return parse_array((string, idx + 1), _scan_once)</span>
<a href="#l21.49"></a><span id="l21.49" class="difflineminus">-        elif nextchar == 'n' and string[idx:idx + 4] == 'null':</span>
<a href="#l21.50"></a><span id="l21.50" class="difflineminus">-            return None, idx + 4</span>
<a href="#l21.51"></a><span id="l21.51" class="difflineminus">-        elif nextchar == 't' and string[idx:idx + 4] == 'true':</span>
<a href="#l21.52"></a><span id="l21.52" class="difflineminus">-            return True, idx + 4</span>
<a href="#l21.53"></a><span id="l21.53" class="difflineminus">-        elif nextchar == 'f' and string[idx:idx + 5] == 'false':</span>
<a href="#l21.54"></a><span id="l21.54" class="difflineminus">-            return False, idx + 5</span>
<a href="#l21.55"></a><span id="l21.55" class="difflineminus">-</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineminus">-        m = match_number(string, idx)</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineminus">-        if m is not None:</span>
<a href="#l21.58"></a><span id="l21.58" class="difflineminus">-            integer, frac, exp = m.groups()</span>
<a href="#l21.59"></a><span id="l21.59" class="difflineminus">-            if frac or exp:</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineminus">-                res = parse_float(integer + (frac or '') + (exp or ''))</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineminus">-            else:</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineminus">-                res = parse_int(integer)</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineminus">-            return res, m.end()</span>
<a href="#l21.64"></a><span id="l21.64" class="difflineminus">-        elif nextchar == 'N' and string[idx:idx + 3] == 'NaN':</span>
<a href="#l21.65"></a><span id="l21.65" class="difflineminus">-            return parse_constant('NaN'), idx + 3</span>
<a href="#l21.66"></a><span id="l21.66" class="difflineminus">-        elif nextchar == 'I' and string[idx:idx + 8] == 'Infinity':</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineminus">-            return parse_constant('Infinity'), idx + 8</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineminus">-        elif nextchar == '-' and string[idx:idx + 9] == '-Infinity':</span>
<a href="#l21.69"></a><span id="l21.69" class="difflineminus">-            return parse_constant('-Infinity'), idx + 9</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineminus">-        else:</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineminus">-            raise StopIteration</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineminus">-</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineminus">-    def scan_once(string, idx):</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineminus">-        try:</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineminus">-            return _scan_once(string, idx)</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineminus">-        finally:</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineminus">-            memo.clear()</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineminus">-</span>
<a href="#l21.79"></a><span id="l21.79" class="difflineminus">-    return scan_once</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineminus">-</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineminus">-make_scanner = c_make_scanner or py_make_scanner</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">deleted file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/__init__.py</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineplus">+++ /dev/null</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineat">@@ -1,64 +0,0 @@</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineminus">-import unittest</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineminus">-import doctest</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineminus">-</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineminus">-</span>
<a href="#l22.9"></a><span id="l22.9" class="difflineminus">-class OptionalExtensionTestSuite(unittest.TestSuite):</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineminus">-    def run(self, result):</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineminus">-        import simplejson</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-        run = unittest.TestSuite.run</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-        run(self, result)</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-        simplejson._toggle_speedups(False)</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-        run(self, result)</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-        simplejson._toggle_speedups(True)</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineminus">-        return result</span>
<a href="#l22.18"></a><span id="l22.18" class="difflineminus">-</span>
<a href="#l22.19"></a><span id="l22.19" class="difflineminus">-</span>
<a href="#l22.20"></a><span id="l22.20" class="difflineminus">-def additional_tests(suite=None):</span>
<a href="#l22.21"></a><span id="l22.21" class="difflineminus">-    import simplejson</span>
<a href="#l22.22"></a><span id="l22.22" class="difflineminus">-    import simplejson.encoder</span>
<a href="#l22.23"></a><span id="l22.23" class="difflineminus">-    import simplejson.decoder</span>
<a href="#l22.24"></a><span id="l22.24" class="difflineminus">-    if suite is None:</span>
<a href="#l22.25"></a><span id="l22.25" class="difflineminus">-        suite = unittest.TestSuite()</span>
<a href="#l22.26"></a><span id="l22.26" class="difflineminus">-    for mod in (simplejson, simplejson.encoder, simplejson.decoder):</span>
<a href="#l22.27"></a><span id="l22.27" class="difflineminus">-        suite.addTest(doctest.DocTestSuite(mod))</span>
<a href="#l22.28"></a><span id="l22.28" class="difflineminus">-    suite.addTest(doctest.DocFileSuite('../../index.rst'))</span>
<a href="#l22.29"></a><span id="l22.29" class="difflineminus">-    return suite</span>
<a href="#l22.30"></a><span id="l22.30" class="difflineminus">-</span>
<a href="#l22.31"></a><span id="l22.31" class="difflineminus">-</span>
<a href="#l22.32"></a><span id="l22.32" class="difflineminus">-def all_tests_suite():</span>
<a href="#l22.33"></a><span id="l22.33" class="difflineminus">-    suite = unittest.TestLoader().loadTestsFromNames([</span>
<a href="#l22.34"></a><span id="l22.34" class="difflineminus">-        'simplejson.tests.test_check_circular',</span>
<a href="#l22.35"></a><span id="l22.35" class="difflineminus">-        'simplejson.tests.test_decode',</span>
<a href="#l22.36"></a><span id="l22.36" class="difflineminus">-        'simplejson.tests.test_default',</span>
<a href="#l22.37"></a><span id="l22.37" class="difflineminus">-        'simplejson.tests.test_dump',</span>
<a href="#l22.38"></a><span id="l22.38" class="difflineminus">-        'simplejson.tests.test_encode_basestring_ascii',</span>
<a href="#l22.39"></a><span id="l22.39" class="difflineminus">-        'simplejson.tests.test_encode_for_html',</span>
<a href="#l22.40"></a><span id="l22.40" class="difflineminus">-        'simplejson.tests.test_errors',</span>
<a href="#l22.41"></a><span id="l22.41" class="difflineminus">-        'simplejson.tests.test_fail',</span>
<a href="#l22.42"></a><span id="l22.42" class="difflineminus">-        'simplejson.tests.test_float',</span>
<a href="#l22.43"></a><span id="l22.43" class="difflineminus">-        'simplejson.tests.test_indent',</span>
<a href="#l22.44"></a><span id="l22.44" class="difflineminus">-        'simplejson.tests.test_pass1',</span>
<a href="#l22.45"></a><span id="l22.45" class="difflineminus">-        'simplejson.tests.test_pass2',</span>
<a href="#l22.46"></a><span id="l22.46" class="difflineminus">-        'simplejson.tests.test_pass3',</span>
<a href="#l22.47"></a><span id="l22.47" class="difflineminus">-        'simplejson.tests.test_recursion',</span>
<a href="#l22.48"></a><span id="l22.48" class="difflineminus">-        'simplejson.tests.test_scanstring',</span>
<a href="#l22.49"></a><span id="l22.49" class="difflineminus">-        'simplejson.tests.test_separators',</span>
<a href="#l22.50"></a><span id="l22.50" class="difflineminus">-        'simplejson.tests.test_speedups',</span>
<a href="#l22.51"></a><span id="l22.51" class="difflineminus">-        'simplejson.tests.test_unicode',</span>
<a href="#l22.52"></a><span id="l22.52" class="difflineminus">-        'simplejson.tests.test_decimal',</span>
<a href="#l22.53"></a><span id="l22.53" class="difflineminus">-    ])</span>
<a href="#l22.54"></a><span id="l22.54" class="difflineminus">-    suite = additional_tests(suite)</span>
<a href="#l22.55"></a><span id="l22.55" class="difflineminus">-    return OptionalExtensionTestSuite([suite])</span>
<a href="#l22.56"></a><span id="l22.56" class="difflineminus">-</span>
<a href="#l22.57"></a><span id="l22.57" class="difflineminus">-</span>
<a href="#l22.58"></a><span id="l22.58" class="difflineminus">-def main():</span>
<a href="#l22.59"></a><span id="l22.59" class="difflineminus">-    runner = unittest.TextTestRunner()</span>
<a href="#l22.60"></a><span id="l22.60" class="difflineminus">-    suite = all_tests_suite()</span>
<a href="#l22.61"></a><span id="l22.61" class="difflineminus">-    runner.run(suite)</span>
<a href="#l22.62"></a><span id="l22.62" class="difflineminus">-</span>
<a href="#l22.63"></a><span id="l22.63" class="difflineminus">-</span>
<a href="#l22.64"></a><span id="l22.64" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l22.65"></a><span id="l22.65" class="difflineminus">-    import os</span>
<a href="#l22.66"></a><span id="l22.66" class="difflineminus">-    import sys</span>
<a href="#l22.67"></a><span id="l22.67" class="difflineminus">-    sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__)))))</span>
<a href="#l22.68"></a><span id="l22.68" class="difflineminus">-    main()</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l23.1"></a><span id="l23.1">deleted file mode 100644</span>
<a href="#l23.2"></a><span id="l23.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_check_circular.py</span>
<a href="#l23.3"></a><span id="l23.3" class="difflineplus">+++ /dev/null</span>
<a href="#l23.4"></a><span id="l23.4" class="difflineat">@@ -1,30 +0,0 @@</span>
<a href="#l23.5"></a><span id="l23.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l23.6"></a><span id="l23.6" class="difflineminus">-import simplejson as json</span>
<a href="#l23.7"></a><span id="l23.7" class="difflineminus">-</span>
<a href="#l23.8"></a><span id="l23.8" class="difflineminus">-def default_iterable(obj):</span>
<a href="#l23.9"></a><span id="l23.9" class="difflineminus">-    return list(obj)</span>
<a href="#l23.10"></a><span id="l23.10" class="difflineminus">-</span>
<a href="#l23.11"></a><span id="l23.11" class="difflineminus">-class TestCheckCircular(TestCase):</span>
<a href="#l23.12"></a><span id="l23.12" class="difflineminus">-    def test_circular_dict(self):</span>
<a href="#l23.13"></a><span id="l23.13" class="difflineminus">-        dct = {}</span>
<a href="#l23.14"></a><span id="l23.14" class="difflineminus">-        dct['a'] = dct</span>
<a href="#l23.15"></a><span id="l23.15" class="difflineminus">-        self.assertRaises(ValueError, json.dumps, dct)</span>
<a href="#l23.16"></a><span id="l23.16" class="difflineminus">-</span>
<a href="#l23.17"></a><span id="l23.17" class="difflineminus">-    def test_circular_list(self):</span>
<a href="#l23.18"></a><span id="l23.18" class="difflineminus">-        lst = []</span>
<a href="#l23.19"></a><span id="l23.19" class="difflineminus">-        lst.append(lst)</span>
<a href="#l23.20"></a><span id="l23.20" class="difflineminus">-        self.assertRaises(ValueError, json.dumps, lst)</span>
<a href="#l23.21"></a><span id="l23.21" class="difflineminus">-</span>
<a href="#l23.22"></a><span id="l23.22" class="difflineminus">-    def test_circular_composite(self):</span>
<a href="#l23.23"></a><span id="l23.23" class="difflineminus">-        dct2 = {}</span>
<a href="#l23.24"></a><span id="l23.24" class="difflineminus">-        dct2['a'] = []</span>
<a href="#l23.25"></a><span id="l23.25" class="difflineminus">-        dct2['a'].append(dct2)</span>
<a href="#l23.26"></a><span id="l23.26" class="difflineminus">-        self.assertRaises(ValueError, json.dumps, dct2)</span>
<a href="#l23.27"></a><span id="l23.27" class="difflineminus">-</span>
<a href="#l23.28"></a><span id="l23.28" class="difflineminus">-    def test_circular_default(self):</span>
<a href="#l23.29"></a><span id="l23.29" class="difflineminus">-        json.dumps([set()], default=default_iterable)</span>
<a href="#l23.30"></a><span id="l23.30" class="difflineminus">-        self.assertRaises(TypeError, json.dumps, [set()])</span>
<a href="#l23.31"></a><span id="l23.31" class="difflineminus">-</span>
<a href="#l23.32"></a><span id="l23.32" class="difflineminus">-    def test_circular_off_default(self):</span>
<a href="#l23.33"></a><span id="l23.33" class="difflineminus">-        json.dumps([set()], default=default_iterable, check_circular=False)</span>
<a href="#l23.34"></a><span id="l23.34" class="difflineminus">-        self.assertRaises(TypeError, json.dumps, [set()], check_circular=False)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l24.1"></a><span id="l24.1">deleted file mode 100644</span>
<a href="#l24.2"></a><span id="l24.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decimal.py</span>
<a href="#l24.3"></a><span id="l24.3" class="difflineplus">+++ /dev/null</span>
<a href="#l24.4"></a><span id="l24.4" class="difflineat">@@ -1,50 +0,0 @@</span>
<a href="#l24.5"></a><span id="l24.5" class="difflineminus">-from decimal import Decimal</span>
<a href="#l24.6"></a><span id="l24.6" class="difflineminus">-from unittest import TestCase</span>
<a href="#l24.7"></a><span id="l24.7" class="difflineminus">-from StringIO import StringIO</span>
<a href="#l24.8"></a><span id="l24.8" class="difflineminus">-</span>
<a href="#l24.9"></a><span id="l24.9" class="difflineminus">-import simplejson as json</span>
<a href="#l24.10"></a><span id="l24.10" class="difflineminus">-</span>
<a href="#l24.11"></a><span id="l24.11" class="difflineminus">-class TestDecimal(TestCase):</span>
<a href="#l24.12"></a><span id="l24.12" class="difflineminus">-    NUMS = &quot;1.0&quot;, &quot;10.00&quot;, &quot;1.1&quot;, &quot;1234567890.1234567890&quot;, &quot;500&quot;</span>
<a href="#l24.13"></a><span id="l24.13" class="difflineminus">-    def dumps(self, obj, **kw):</span>
<a href="#l24.14"></a><span id="l24.14" class="difflineminus">-        sio = StringIO()</span>
<a href="#l24.15"></a><span id="l24.15" class="difflineminus">-        json.dump(obj, sio, **kw)</span>
<a href="#l24.16"></a><span id="l24.16" class="difflineminus">-        res = json.dumps(obj, **kw)</span>
<a href="#l24.17"></a><span id="l24.17" class="difflineminus">-        self.assertEquals(res, sio.getvalue())</span>
<a href="#l24.18"></a><span id="l24.18" class="difflineminus">-        return res</span>
<a href="#l24.19"></a><span id="l24.19" class="difflineminus">-</span>
<a href="#l24.20"></a><span id="l24.20" class="difflineminus">-    def loads(self, s, **kw):</span>
<a href="#l24.21"></a><span id="l24.21" class="difflineminus">-        sio = StringIO(s)</span>
<a href="#l24.22"></a><span id="l24.22" class="difflineminus">-        res = json.loads(s, **kw)</span>
<a href="#l24.23"></a><span id="l24.23" class="difflineminus">-        self.assertEquals(res, json.load(sio, **kw))</span>
<a href="#l24.24"></a><span id="l24.24" class="difflineminus">-        return res</span>
<a href="#l24.25"></a><span id="l24.25" class="difflineminus">-</span>
<a href="#l24.26"></a><span id="l24.26" class="difflineminus">-    def test_decimal_encode(self):</span>
<a href="#l24.27"></a><span id="l24.27" class="difflineminus">-        for d in map(Decimal, self.NUMS):</span>
<a href="#l24.28"></a><span id="l24.28" class="difflineminus">-            self.assertEquals(self.dumps(d, use_decimal=True), str(d))</span>
<a href="#l24.29"></a><span id="l24.29" class="difflineminus">-    </span>
<a href="#l24.30"></a><span id="l24.30" class="difflineminus">-    def test_decimal_decode(self):</span>
<a href="#l24.31"></a><span id="l24.31" class="difflineminus">-        for s in self.NUMS:</span>
<a href="#l24.32"></a><span id="l24.32" class="difflineminus">-            self.assertEquals(self.loads(s, parse_float=Decimal), Decimal(s))</span>
<a href="#l24.33"></a><span id="l24.33" class="difflineminus">-    </span>
<a href="#l24.34"></a><span id="l24.34" class="difflineminus">-    def test_decimal_roundtrip(self):</span>
<a href="#l24.35"></a><span id="l24.35" class="difflineminus">-        for d in map(Decimal, self.NUMS):</span>
<a href="#l24.36"></a><span id="l24.36" class="difflineminus">-            # The type might not be the same (int and Decimal) but they</span>
<a href="#l24.37"></a><span id="l24.37" class="difflineminus">-            # should still compare equal.</span>
<a href="#l24.38"></a><span id="l24.38" class="difflineminus">-            self.assertEquals(</span>
<a href="#l24.39"></a><span id="l24.39" class="difflineminus">-                self.loads(</span>
<a href="#l24.40"></a><span id="l24.40" class="difflineminus">-                    self.dumps(d, use_decimal=True), parse_float=Decimal),</span>
<a href="#l24.41"></a><span id="l24.41" class="difflineminus">-                d)</span>
<a href="#l24.42"></a><span id="l24.42" class="difflineminus">-            self.assertEquals(</span>
<a href="#l24.43"></a><span id="l24.43" class="difflineminus">-                self.loads(</span>
<a href="#l24.44"></a><span id="l24.44" class="difflineminus">-                    self.dumps([d], use_decimal=True), parse_float=Decimal),</span>
<a href="#l24.45"></a><span id="l24.45" class="difflineminus">-                [d])</span>
<a href="#l24.46"></a><span id="l24.46" class="difflineminus">-</span>
<a href="#l24.47"></a><span id="l24.47" class="difflineminus">-    def test_decimal_defaults(self):</span>
<a href="#l24.48"></a><span id="l24.48" class="difflineminus">-        d = Decimal(1)</span>
<a href="#l24.49"></a><span id="l24.49" class="difflineminus">-        sio = StringIO()</span>
<a href="#l24.50"></a><span id="l24.50" class="difflineminus">-        # use_decimal=False is the default</span>
<a href="#l24.51"></a><span id="l24.51" class="difflineminus">-        self.assertRaises(TypeError, json.dumps, d, use_decimal=False)</span>
<a href="#l24.52"></a><span id="l24.52" class="difflineminus">-        self.assertRaises(TypeError, json.dumps, d)</span>
<a href="#l24.53"></a><span id="l24.53" class="difflineminus">-        self.assertRaises(TypeError, json.dump, d, sio, use_decimal=False)</span>
<a href="#l24.54"></a><span id="l24.54" class="difflineminus">-        self.assertRaises(TypeError, json.dump, d, sio)</span>
<a href="#l24.55"></a><span id="l24.55">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l25.1"></a><span id="l25.1">deleted file mode 100644</span>
<a href="#l25.2"></a><span id="l25.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_decode.py</span>
<a href="#l25.3"></a><span id="l25.3" class="difflineplus">+++ /dev/null</span>
<a href="#l25.4"></a><span id="l25.4" class="difflineat">@@ -1,83 +0,0 @@</span>
<a href="#l25.5"></a><span id="l25.5" class="difflineminus">-import decimal</span>
<a href="#l25.6"></a><span id="l25.6" class="difflineminus">-from unittest import TestCase</span>
<a href="#l25.7"></a><span id="l25.7" class="difflineminus">-from StringIO import StringIO</span>
<a href="#l25.8"></a><span id="l25.8" class="difflineminus">-</span>
<a href="#l25.9"></a><span id="l25.9" class="difflineminus">-import simplejson as json</span>
<a href="#l25.10"></a><span id="l25.10" class="difflineminus">-from simplejson import OrderedDict</span>
<a href="#l25.11"></a><span id="l25.11" class="difflineminus">-</span>
<a href="#l25.12"></a><span id="l25.12" class="difflineminus">-class TestDecode(TestCase):</span>
<a href="#l25.13"></a><span id="l25.13" class="difflineminus">-    if not hasattr(TestCase, 'assertIs'):</span>
<a href="#l25.14"></a><span id="l25.14" class="difflineminus">-        def assertIs(self, a, b):</span>
<a href="#l25.15"></a><span id="l25.15" class="difflineminus">-            self.assertTrue(a is b, '%r is %r' % (a, b))</span>
<a href="#l25.16"></a><span id="l25.16" class="difflineminus">-</span>
<a href="#l25.17"></a><span id="l25.17" class="difflineminus">-    def test_decimal(self):</span>
<a href="#l25.18"></a><span id="l25.18" class="difflineminus">-        rval = json.loads('1.1', parse_float=decimal.Decimal)</span>
<a href="#l25.19"></a><span id="l25.19" class="difflineminus">-        self.assertTrue(isinstance(rval, decimal.Decimal))</span>
<a href="#l25.20"></a><span id="l25.20" class="difflineminus">-        self.assertEquals(rval, decimal.Decimal('1.1'))</span>
<a href="#l25.21"></a><span id="l25.21" class="difflineminus">-</span>
<a href="#l25.22"></a><span id="l25.22" class="difflineminus">-    def test_float(self):</span>
<a href="#l25.23"></a><span id="l25.23" class="difflineminus">-        rval = json.loads('1', parse_int=float)</span>
<a href="#l25.24"></a><span id="l25.24" class="difflineminus">-        self.assertTrue(isinstance(rval, float))</span>
<a href="#l25.25"></a><span id="l25.25" class="difflineminus">-        self.assertEquals(rval, 1.0)</span>
<a href="#l25.26"></a><span id="l25.26" class="difflineminus">-</span>
<a href="#l25.27"></a><span id="l25.27" class="difflineminus">-    def test_decoder_optimizations(self):</span>
<a href="#l25.28"></a><span id="l25.28" class="difflineminus">-        # Several optimizations were made that skip over calls to</span>
<a href="#l25.29"></a><span id="l25.29" class="difflineminus">-        # the whitespace regex, so this test is designed to try and</span>
<a href="#l25.30"></a><span id="l25.30" class="difflineminus">-        # exercise the uncommon cases. The array cases are already covered.</span>
<a href="#l25.31"></a><span id="l25.31" class="difflineminus">-        rval = json.loads('{   &quot;key&quot;    :    &quot;value&quot;    ,  &quot;k&quot;:&quot;v&quot;    }')</span>
<a href="#l25.32"></a><span id="l25.32" class="difflineminus">-        self.assertEquals(rval, {&quot;key&quot;:&quot;value&quot;, &quot;k&quot;:&quot;v&quot;})</span>
<a href="#l25.33"></a><span id="l25.33" class="difflineminus">-</span>
<a href="#l25.34"></a><span id="l25.34" class="difflineminus">-    def test_empty_objects(self):</span>
<a href="#l25.35"></a><span id="l25.35" class="difflineminus">-        s = '{}'</span>
<a href="#l25.36"></a><span id="l25.36" class="difflineminus">-        self.assertEqual(json.loads(s), eval(s))</span>
<a href="#l25.37"></a><span id="l25.37" class="difflineminus">-        s = '[]'</span>
<a href="#l25.38"></a><span id="l25.38" class="difflineminus">-        self.assertEqual(json.loads(s), eval(s))</span>
<a href="#l25.39"></a><span id="l25.39" class="difflineminus">-        s = '&quot;&quot;'</span>
<a href="#l25.40"></a><span id="l25.40" class="difflineminus">-        self.assertEqual(json.loads(s), eval(s))</span>
<a href="#l25.41"></a><span id="l25.41" class="difflineminus">-</span>
<a href="#l25.42"></a><span id="l25.42" class="difflineminus">-    def test_object_pairs_hook(self):</span>
<a href="#l25.43"></a><span id="l25.43" class="difflineminus">-        s = '{&quot;xkd&quot;:1, &quot;kcw&quot;:2, &quot;art&quot;:3, &quot;hxm&quot;:4, &quot;qrt&quot;:5, &quot;pad&quot;:6, &quot;hoy&quot;:7}'</span>
<a href="#l25.44"></a><span id="l25.44" class="difflineminus">-        p = [(&quot;xkd&quot;, 1), (&quot;kcw&quot;, 2), (&quot;art&quot;, 3), (&quot;hxm&quot;, 4),</span>
<a href="#l25.45"></a><span id="l25.45" class="difflineminus">-             (&quot;qrt&quot;, 5), (&quot;pad&quot;, 6), (&quot;hoy&quot;, 7)]</span>
<a href="#l25.46"></a><span id="l25.46" class="difflineminus">-        self.assertEqual(json.loads(s), eval(s))</span>
<a href="#l25.47"></a><span id="l25.47" class="difflineminus">-        self.assertEqual(json.loads(s, object_pairs_hook=lambda x: x), p)</span>
<a href="#l25.48"></a><span id="l25.48" class="difflineminus">-        self.assertEqual(json.load(StringIO(s),</span>
<a href="#l25.49"></a><span id="l25.49" class="difflineminus">-                                   object_pairs_hook=lambda x: x), p)</span>
<a href="#l25.50"></a><span id="l25.50" class="difflineminus">-        od = json.loads(s, object_pairs_hook=OrderedDict)</span>
<a href="#l25.51"></a><span id="l25.51" class="difflineminus">-        self.assertEqual(od, OrderedDict(p))</span>
<a href="#l25.52"></a><span id="l25.52" class="difflineminus">-        self.assertEqual(type(od), OrderedDict)</span>
<a href="#l25.53"></a><span id="l25.53" class="difflineminus">-        # the object_pairs_hook takes priority over the object_hook</span>
<a href="#l25.54"></a><span id="l25.54" class="difflineminus">-        self.assertEqual(json.loads(s,</span>
<a href="#l25.55"></a><span id="l25.55" class="difflineminus">-                                    object_pairs_hook=OrderedDict,</span>
<a href="#l25.56"></a><span id="l25.56" class="difflineminus">-                                    object_hook=lambda x: None),</span>
<a href="#l25.57"></a><span id="l25.57" class="difflineminus">-                         OrderedDict(p))</span>
<a href="#l25.58"></a><span id="l25.58" class="difflineminus">-</span>
<a href="#l25.59"></a><span id="l25.59" class="difflineminus">-    def check_keys_reuse(self, source, loads):</span>
<a href="#l25.60"></a><span id="l25.60" class="difflineminus">-        rval = loads(source)</span>
<a href="#l25.61"></a><span id="l25.61" class="difflineminus">-        (a, b), (c, d) = sorted(rval[0]), sorted(rval[1])</span>
<a href="#l25.62"></a><span id="l25.62" class="difflineminus">-        self.assertIs(a, c)</span>
<a href="#l25.63"></a><span id="l25.63" class="difflineminus">-        self.assertIs(b, d)</span>
<a href="#l25.64"></a><span id="l25.64" class="difflineminus">-</span>
<a href="#l25.65"></a><span id="l25.65" class="difflineminus">-    def test_keys_reuse_str(self):</span>
<a href="#l25.66"></a><span id="l25.66" class="difflineminus">-        s = u'[{&quot;a_key&quot;: 1, &quot;b_\xe9&quot;: 2}, {&quot;a_key&quot;: 3, &quot;b_\xe9&quot;: 4}]'.encode('utf8')</span>
<a href="#l25.67"></a><span id="l25.67" class="difflineminus">-        self.check_keys_reuse(s, json.loads)</span>
<a href="#l25.68"></a><span id="l25.68" class="difflineminus">-</span>
<a href="#l25.69"></a><span id="l25.69" class="difflineminus">-    def test_keys_reuse_unicode(self):</span>
<a href="#l25.70"></a><span id="l25.70" class="difflineminus">-        s = u'[{&quot;a_key&quot;: 1, &quot;b_\xe9&quot;: 2}, {&quot;a_key&quot;: 3, &quot;b_\xe9&quot;: 4}]'</span>
<a href="#l25.71"></a><span id="l25.71" class="difflineminus">-        self.check_keys_reuse(s, json.loads)</span>
<a href="#l25.72"></a><span id="l25.72" class="difflineminus">-</span>
<a href="#l25.73"></a><span id="l25.73" class="difflineminus">-    def test_empty_strings(self):</span>
<a href="#l25.74"></a><span id="l25.74" class="difflineminus">-        self.assertEqual(json.loads('&quot;&quot;'), &quot;&quot;)</span>
<a href="#l25.75"></a><span id="l25.75" class="difflineminus">-        self.assertEqual(json.loads(u'&quot;&quot;'), u&quot;&quot;)</span>
<a href="#l25.76"></a><span id="l25.76" class="difflineminus">-        self.assertEqual(json.loads('[&quot;&quot;]'), [&quot;&quot;])</span>
<a href="#l25.77"></a><span id="l25.77" class="difflineminus">-        self.assertEqual(json.loads(u'[&quot;&quot;]'), [u&quot;&quot;])</span>
<a href="#l25.78"></a><span id="l25.78" class="difflineminus">-</span>
<a href="#l25.79"></a><span id="l25.79" class="difflineminus">-    def test_raw_decode(self):</span>
<a href="#l25.80"></a><span id="l25.80" class="difflineminus">-        cls = json.decoder.JSONDecoder</span>
<a href="#l25.81"></a><span id="l25.81" class="difflineminus">-        self.assertEqual(</span>
<a href="#l25.82"></a><span id="l25.82" class="difflineminus">-            ({'a': {}}, 9),</span>
<a href="#l25.83"></a><span id="l25.83" class="difflineminus">-            cls().raw_decode(&quot;{\&quot;a\&quot;: {}}&quot;))</span>
<a href="#l25.84"></a><span id="l25.84" class="difflineminus">-        # http://code.google.com/p/simplejson/issues/detail?id=85</span>
<a href="#l25.85"></a><span id="l25.85" class="difflineminus">-        self.assertEqual(</span>
<a href="#l25.86"></a><span id="l25.86" class="difflineminus">-            ({'a': {}}, 9),</span>
<a href="#l25.87"></a><span id="l25.87" class="difflineminus">-            cls(object_pairs_hook=dict).raw_decode(&quot;{\&quot;a\&quot;: {}}&quot;))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l26.1"></a><span id="l26.1">deleted file mode 100644</span>
<a href="#l26.2"></a><span id="l26.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_default.py</span>
<a href="#l26.3"></a><span id="l26.3" class="difflineplus">+++ /dev/null</span>
<a href="#l26.4"></a><span id="l26.4" class="difflineat">@@ -1,9 +0,0 @@</span>
<a href="#l26.5"></a><span id="l26.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l26.6"></a><span id="l26.6" class="difflineminus">-</span>
<a href="#l26.7"></a><span id="l26.7" class="difflineminus">-import simplejson as json</span>
<a href="#l26.8"></a><span id="l26.8" class="difflineminus">-</span>
<a href="#l26.9"></a><span id="l26.9" class="difflineminus">-class TestDefault(TestCase):</span>
<a href="#l26.10"></a><span id="l26.10" class="difflineminus">-    def test_default(self):</span>
<a href="#l26.11"></a><span id="l26.11" class="difflineminus">-        self.assertEquals(</span>
<a href="#l26.12"></a><span id="l26.12" class="difflineminus">-            json.dumps(type, default=repr),</span>
<a href="#l26.13"></a><span id="l26.13" class="difflineminus">-            json.dumps(repr(type)))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l27.1"></a><span id="l27.1">deleted file mode 100644</span>
<a href="#l27.2"></a><span id="l27.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_dump.py</span>
<a href="#l27.3"></a><span id="l27.3" class="difflineplus">+++ /dev/null</span>
<a href="#l27.4"></a><span id="l27.4" class="difflineat">@@ -1,27 +0,0 @@</span>
<a href="#l27.5"></a><span id="l27.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l27.6"></a><span id="l27.6" class="difflineminus">-from cStringIO import StringIO</span>
<a href="#l27.7"></a><span id="l27.7" class="difflineminus">-</span>
<a href="#l27.8"></a><span id="l27.8" class="difflineminus">-import simplejson as json</span>
<a href="#l27.9"></a><span id="l27.9" class="difflineminus">-</span>
<a href="#l27.10"></a><span id="l27.10" class="difflineminus">-class TestDump(TestCase):</span>
<a href="#l27.11"></a><span id="l27.11" class="difflineminus">-    def test_dump(self):</span>
<a href="#l27.12"></a><span id="l27.12" class="difflineminus">-        sio = StringIO()</span>
<a href="#l27.13"></a><span id="l27.13" class="difflineminus">-        json.dump({}, sio)</span>
<a href="#l27.14"></a><span id="l27.14" class="difflineminus">-        self.assertEquals(sio.getvalue(), '{}')</span>
<a href="#l27.15"></a><span id="l27.15" class="difflineminus">-</span>
<a href="#l27.16"></a><span id="l27.16" class="difflineminus">-    def test_dumps(self):</span>
<a href="#l27.17"></a><span id="l27.17" class="difflineminus">-        self.assertEquals(json.dumps({}), '{}')</span>
<a href="#l27.18"></a><span id="l27.18" class="difflineminus">-</span>
<a href="#l27.19"></a><span id="l27.19" class="difflineminus">-    def test_encode_truefalse(self):</span>
<a href="#l27.20"></a><span id="l27.20" class="difflineminus">-        self.assertEquals(json.dumps(</span>
<a href="#l27.21"></a><span id="l27.21" class="difflineminus">-                 {True: False, False: True}, sort_keys=True),</span>
<a href="#l27.22"></a><span id="l27.22" class="difflineminus">-                 '{&quot;false&quot;: true, &quot;true&quot;: false}')</span>
<a href="#l27.23"></a><span id="l27.23" class="difflineminus">-        self.assertEquals(json.dumps(</span>
<a href="#l27.24"></a><span id="l27.24" class="difflineminus">-                {2: 3.0, 4.0: 5L, False: 1, 6L: True, &quot;7&quot;: 0}, sort_keys=True),</span>
<a href="#l27.25"></a><span id="l27.25" class="difflineminus">-                '{&quot;false&quot;: 1, &quot;2&quot;: 3.0, &quot;4.0&quot;: 5, &quot;6&quot;: true, &quot;7&quot;: 0}')</span>
<a href="#l27.26"></a><span id="l27.26" class="difflineminus">-</span>
<a href="#l27.27"></a><span id="l27.27" class="difflineminus">-    def test_ordered_dict(self):</span>
<a href="#l27.28"></a><span id="l27.28" class="difflineminus">-        # http://bugs.python.org/issue6105</span>
<a href="#l27.29"></a><span id="l27.29" class="difflineminus">-        items = [('one', 1), ('two', 2), ('three', 3), ('four', 4), ('five', 5)]</span>
<a href="#l27.30"></a><span id="l27.30" class="difflineminus">-        s = json.dumps(json.OrderedDict(items))</span>
<a href="#l27.31"></a><span id="l27.31" class="difflineminus">-        self.assertEqual(s, '{&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3, &quot;four&quot;: 4, &quot;five&quot;: 5}')</span>
<a href="#l27.32"></a><span id="l27.32">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l28.1"></a><span id="l28.1">deleted file mode 100644</span>
<a href="#l28.2"></a><span id="l28.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_basestring_ascii.py</span>
<a href="#l28.3"></a><span id="l28.3" class="difflineplus">+++ /dev/null</span>
<a href="#l28.4"></a><span id="l28.4" class="difflineat">@@ -1,46 +0,0 @@</span>
<a href="#l28.5"></a><span id="l28.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l28.6"></a><span id="l28.6" class="difflineminus">-</span>
<a href="#l28.7"></a><span id="l28.7" class="difflineminus">-import simplejson.encoder</span>
<a href="#l28.8"></a><span id="l28.8" class="difflineminus">-</span>
<a href="#l28.9"></a><span id="l28.9" class="difflineminus">-CASES = [</span>
<a href="#l28.10"></a><span id="l28.10" class="difflineminus">-    (u'/\\&quot;\ucafe\ubabe\uab98\ufcde\ubcda\uef4a\x08\x0c\n\r\t`1~!@#$%^&amp;*()_+-=[]{}|;:\',./&lt;&gt;?', '&quot;/\\\\\\&quot;\\ucafe\\ubabe\\uab98\\ufcde\\ubcda\\uef4a\\b\\f\\n\\r\\t`1~!@#$%^&amp;*()_+-=[]{}|;:\',./&lt;&gt;?&quot;'),</span>
<a href="#l28.11"></a><span id="l28.11" class="difflineminus">-    (u'\u0123\u4567\u89ab\ucdef\uabcd\uef4a', '&quot;\\u0123\\u4567\\u89ab\\ucdef\\uabcd\\uef4a&quot;'),</span>
<a href="#l28.12"></a><span id="l28.12" class="difflineminus">-    (u'controls', '&quot;controls&quot;'),</span>
<a href="#l28.13"></a><span id="l28.13" class="difflineminus">-    (u'\x08\x0c\n\r\t', '&quot;\\b\\f\\n\\r\\t&quot;'),</span>
<a href="#l28.14"></a><span id="l28.14" class="difflineminus">-    (u'{&quot;object with 1 member&quot;:[&quot;array with 1 element&quot;]}', '&quot;{\\&quot;object with 1 member\\&quot;:[\\&quot;array with 1 element\\&quot;]}&quot;'),</span>
<a href="#l28.15"></a><span id="l28.15" class="difflineminus">-    (u' s p a c e d ', '&quot; s p a c e d &quot;'),</span>
<a href="#l28.16"></a><span id="l28.16" class="difflineminus">-    (u'\U0001d120', '&quot;\\ud834\\udd20&quot;'),</span>
<a href="#l28.17"></a><span id="l28.17" class="difflineminus">-    (u'\u03b1\u03a9', '&quot;\\u03b1\\u03a9&quot;'),</span>
<a href="#l28.18"></a><span id="l28.18" class="difflineminus">-    ('\xce\xb1\xce\xa9', '&quot;\\u03b1\\u03a9&quot;'),</span>
<a href="#l28.19"></a><span id="l28.19" class="difflineminus">-    (u'\u03b1\u03a9', '&quot;\\u03b1\\u03a9&quot;'),</span>
<a href="#l28.20"></a><span id="l28.20" class="difflineminus">-    ('\xce\xb1\xce\xa9', '&quot;\\u03b1\\u03a9&quot;'),</span>
<a href="#l28.21"></a><span id="l28.21" class="difflineminus">-    (u'\u03b1\u03a9', '&quot;\\u03b1\\u03a9&quot;'),</span>
<a href="#l28.22"></a><span id="l28.22" class="difflineminus">-    (u'\u03b1\u03a9', '&quot;\\u03b1\\u03a9&quot;'),</span>
<a href="#l28.23"></a><span id="l28.23" class="difflineminus">-    (u&quot;`1~!@#$%^&amp;*()_+-={':[,]}|;.&lt;/&gt;?&quot;, '&quot;`1~!@#$%^&amp;*()_+-={\':[,]}|;.&lt;/&gt;?&quot;'),</span>
<a href="#l28.24"></a><span id="l28.24" class="difflineminus">-    (u'\x08\x0c\n\r\t', '&quot;\\b\\f\\n\\r\\t&quot;'),</span>
<a href="#l28.25"></a><span id="l28.25" class="difflineminus">-    (u'\u0123\u4567\u89ab\ucdef\uabcd\uef4a', '&quot;\\u0123\\u4567\\u89ab\\ucdef\\uabcd\\uef4a&quot;'),</span>
<a href="#l28.26"></a><span id="l28.26" class="difflineminus">-]</span>
<a href="#l28.27"></a><span id="l28.27" class="difflineminus">-</span>
<a href="#l28.28"></a><span id="l28.28" class="difflineminus">-class TestEncodeBaseStringAscii(TestCase):</span>
<a href="#l28.29"></a><span id="l28.29" class="difflineminus">-    def test_py_encode_basestring_ascii(self):</span>
<a href="#l28.30"></a><span id="l28.30" class="difflineminus">-        self._test_encode_basestring_ascii(simplejson.encoder.py_encode_basestring_ascii)</span>
<a href="#l28.31"></a><span id="l28.31" class="difflineminus">-</span>
<a href="#l28.32"></a><span id="l28.32" class="difflineminus">-    def test_c_encode_basestring_ascii(self):</span>
<a href="#l28.33"></a><span id="l28.33" class="difflineminus">-        if not simplejson.encoder.c_encode_basestring_ascii:</span>
<a href="#l28.34"></a><span id="l28.34" class="difflineminus">-            return</span>
<a href="#l28.35"></a><span id="l28.35" class="difflineminus">-        self._test_encode_basestring_ascii(simplejson.encoder.c_encode_basestring_ascii)</span>
<a href="#l28.36"></a><span id="l28.36" class="difflineminus">-</span>
<a href="#l28.37"></a><span id="l28.37" class="difflineminus">-    def _test_encode_basestring_ascii(self, encode_basestring_ascii):</span>
<a href="#l28.38"></a><span id="l28.38" class="difflineminus">-        fname = encode_basestring_ascii.__name__</span>
<a href="#l28.39"></a><span id="l28.39" class="difflineminus">-        for input_string, expect in CASES:</span>
<a href="#l28.40"></a><span id="l28.40" class="difflineminus">-            result = encode_basestring_ascii(input_string)</span>
<a href="#l28.41"></a><span id="l28.41" class="difflineminus">-            #self.assertEquals(result, expect,</span>
<a href="#l28.42"></a><span id="l28.42" class="difflineminus">-            #    '{0!r} != {1!r} for {2}({3!r})'.format(</span>
<a href="#l28.43"></a><span id="l28.43" class="difflineminus">-            #        result, expect, fname, input_string))</span>
<a href="#l28.44"></a><span id="l28.44" class="difflineminus">-            self.assertEquals(result, expect,</span>
<a href="#l28.45"></a><span id="l28.45" class="difflineminus">-                '%r != %r for %s(%r)' % (result, expect, fname, input_string))</span>
<a href="#l28.46"></a><span id="l28.46" class="difflineminus">-</span>
<a href="#l28.47"></a><span id="l28.47" class="difflineminus">-    def test_sorted_dict(self):</span>
<a href="#l28.48"></a><span id="l28.48" class="difflineminus">-        items = [('one', 1), ('two', 2), ('three', 3), ('four', 4), ('five', 5)]</span>
<a href="#l28.49"></a><span id="l28.49" class="difflineminus">-        s = simplejson.dumps(dict(items), sort_keys=True)</span>
<a href="#l28.50"></a><span id="l28.50" class="difflineminus">-        self.assertEqual(s, '{&quot;five&quot;: 5, &quot;four&quot;: 4, &quot;one&quot;: 1, &quot;three&quot;: 3, &quot;two&quot;: 2}')</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l29.1"></a><span id="l29.1">deleted file mode 100644</span>
<a href="#l29.2"></a><span id="l29.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_encode_for_html.py</span>
<a href="#l29.3"></a><span id="l29.3" class="difflineplus">+++ /dev/null</span>
<a href="#l29.4"></a><span id="l29.4" class="difflineat">@@ -1,32 +0,0 @@</span>
<a href="#l29.5"></a><span id="l29.5" class="difflineminus">-import unittest</span>
<a href="#l29.6"></a><span id="l29.6" class="difflineminus">-</span>
<a href="#l29.7"></a><span id="l29.7" class="difflineminus">-import simplejson.decoder</span>
<a href="#l29.8"></a><span id="l29.8" class="difflineminus">-import simplejson.encoder</span>
<a href="#l29.9"></a><span id="l29.9" class="difflineminus">-</span>
<a href="#l29.10"></a><span id="l29.10" class="difflineminus">-</span>
<a href="#l29.11"></a><span id="l29.11" class="difflineminus">-class TestEncodeForHTML(unittest.TestCase):</span>
<a href="#l29.12"></a><span id="l29.12" class="difflineminus">-</span>
<a href="#l29.13"></a><span id="l29.13" class="difflineminus">-    def setUp(self):</span>
<a href="#l29.14"></a><span id="l29.14" class="difflineminus">-        self.decoder = simplejson.decoder.JSONDecoder()</span>
<a href="#l29.15"></a><span id="l29.15" class="difflineminus">-        self.encoder = simplejson.encoder.JSONEncoderForHTML()</span>
<a href="#l29.16"></a><span id="l29.16" class="difflineminus">-</span>
<a href="#l29.17"></a><span id="l29.17" class="difflineminus">-    def test_basic_encode(self):</span>
<a href="#l29.18"></a><span id="l29.18" class="difflineminus">-        self.assertEqual(r'&quot;\u0026&quot;', self.encoder.encode('&amp;'))</span>
<a href="#l29.19"></a><span id="l29.19" class="difflineminus">-        self.assertEqual(r'&quot;\u003c&quot;', self.encoder.encode('&lt;'))</span>
<a href="#l29.20"></a><span id="l29.20" class="difflineminus">-        self.assertEqual(r'&quot;\u003e&quot;', self.encoder.encode('&gt;'))</span>
<a href="#l29.21"></a><span id="l29.21" class="difflineminus">-</span>
<a href="#l29.22"></a><span id="l29.22" class="difflineminus">-    def test_basic_roundtrip(self):</span>
<a href="#l29.23"></a><span id="l29.23" class="difflineminus">-        for char in '&amp;&lt;&gt;':</span>
<a href="#l29.24"></a><span id="l29.24" class="difflineminus">-            self.assertEqual(</span>
<a href="#l29.25"></a><span id="l29.25" class="difflineminus">-                char, self.decoder.decode(</span>
<a href="#l29.26"></a><span id="l29.26" class="difflineminus">-                    self.encoder.encode(char)))</span>
<a href="#l29.27"></a><span id="l29.27" class="difflineminus">-</span>
<a href="#l29.28"></a><span id="l29.28" class="difflineminus">-    def test_prevent_script_breakout(self):</span>
<a href="#l29.29"></a><span id="l29.29" class="difflineminus">-        bad_string = '&lt;/script&gt;&lt;script&gt;alert(&quot;gotcha&quot;)&lt;/script&gt;'</span>
<a href="#l29.30"></a><span id="l29.30" class="difflineminus">-        self.assertEqual(</span>
<a href="#l29.31"></a><span id="l29.31" class="difflineminus">-            r'&quot;\u003c/script\u003e\u003cscript\u003e'</span>
<a href="#l29.32"></a><span id="l29.32" class="difflineminus">-            r'alert(\&quot;gotcha\&quot;)\u003c/script\u003e&quot;',</span>
<a href="#l29.33"></a><span id="l29.33" class="difflineminus">-            self.encoder.encode(bad_string))</span>
<a href="#l29.34"></a><span id="l29.34" class="difflineminus">-        self.assertEqual(</span>
<a href="#l29.35"></a><span id="l29.35" class="difflineminus">-            bad_string, self.decoder.decode(</span>
<a href="#l29.36"></a><span id="l29.36" class="difflineminus">-                self.encoder.encode(bad_string)))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l30.1"></a><span id="l30.1">deleted file mode 100644</span>
<a href="#l30.2"></a><span id="l30.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_errors.py</span>
<a href="#l30.3"></a><span id="l30.3" class="difflineplus">+++ /dev/null</span>
<a href="#l30.4"></a><span id="l30.4" class="difflineat">@@ -1,21 +0,0 @@</span>
<a href="#l30.5"></a><span id="l30.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l30.6"></a><span id="l30.6" class="difflineminus">-</span>
<a href="#l30.7"></a><span id="l30.7" class="difflineminus">-import simplejson as json</span>
<a href="#l30.8"></a><span id="l30.8" class="difflineminus">-</span>
<a href="#l30.9"></a><span id="l30.9" class="difflineminus">-class TestErrors(TestCase):</span>
<a href="#l30.10"></a><span id="l30.10" class="difflineminus">-    def test_string_keys_error(self):</span>
<a href="#l30.11"></a><span id="l30.11" class="difflineminus">-        data = [{'a': 'A', 'b': (2, 4), 'c': 3.0, ('d',): 'D tuple'}]</span>
<a href="#l30.12"></a><span id="l30.12" class="difflineminus">-        self.assertRaises(TypeError, json.dumps, data)</span>
<a href="#l30.13"></a><span id="l30.13" class="difflineminus">-</span>
<a href="#l30.14"></a><span id="l30.14" class="difflineminus">-    def test_decode_error(self):</span>
<a href="#l30.15"></a><span id="l30.15" class="difflineminus">-        err = None</span>
<a href="#l30.16"></a><span id="l30.16" class="difflineminus">-        try:</span>
<a href="#l30.17"></a><span id="l30.17" class="difflineminus">-            json.loads('{}\na\nb')</span>
<a href="#l30.18"></a><span id="l30.18" class="difflineminus">-        except json.JSONDecodeError, e:</span>
<a href="#l30.19"></a><span id="l30.19" class="difflineminus">-            err = e</span>
<a href="#l30.20"></a><span id="l30.20" class="difflineminus">-        else:</span>
<a href="#l30.21"></a><span id="l30.21" class="difflineminus">-            self.fail('Expected JSONDecodeError')</span>
<a href="#l30.22"></a><span id="l30.22" class="difflineminus">-        self.assertEquals(err.lineno, 2)</span>
<a href="#l30.23"></a><span id="l30.23" class="difflineminus">-        self.assertEquals(err.colno, 1)</span>
<a href="#l30.24"></a><span id="l30.24" class="difflineminus">-        self.assertEquals(err.endlineno, 3)</span>
<a href="#l30.25"></a><span id="l30.25" class="difflineminus">-        self.assertEquals(err.endcolno, 2)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l31.1"></a><span id="l31.1">deleted file mode 100644</span>
<a href="#l31.2"></a><span id="l31.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_fail.py</span>
<a href="#l31.3"></a><span id="l31.3" class="difflineplus">+++ /dev/null</span>
<a href="#l31.4"></a><span id="l31.4" class="difflineat">@@ -1,91 +0,0 @@</span>
<a href="#l31.5"></a><span id="l31.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l31.6"></a><span id="l31.6" class="difflineminus">-</span>
<a href="#l31.7"></a><span id="l31.7" class="difflineminus">-import simplejson as json</span>
<a href="#l31.8"></a><span id="l31.8" class="difflineminus">-</span>
<a href="#l31.9"></a><span id="l31.9" class="difflineminus">-# Fri Dec 30 18:57:26 2005</span>
<a href="#l31.10"></a><span id="l31.10" class="difflineminus">-JSONDOCS = [</span>
<a href="#l31.11"></a><span id="l31.11" class="difflineminus">-    # http://json.org/JSON_checker/test/fail1.json</span>
<a href="#l31.12"></a><span id="l31.12" class="difflineminus">-    '&quot;A JSON payload should be an object or array, not a string.&quot;',</span>
<a href="#l31.13"></a><span id="l31.13" class="difflineminus">-    # http://json.org/JSON_checker/test/fail2.json</span>
<a href="#l31.14"></a><span id="l31.14" class="difflineminus">-    '[&quot;Unclosed array&quot;',</span>
<a href="#l31.15"></a><span id="l31.15" class="difflineminus">-    # http://json.org/JSON_checker/test/fail3.json</span>
<a href="#l31.16"></a><span id="l31.16" class="difflineminus">-    '{unquoted_key: &quot;keys must be quoted}',</span>
<a href="#l31.17"></a><span id="l31.17" class="difflineminus">-    # http://json.org/JSON_checker/test/fail4.json</span>
<a href="#l31.18"></a><span id="l31.18" class="difflineminus">-    '[&quot;extra comma&quot;,]',</span>
<a href="#l31.19"></a><span id="l31.19" class="difflineminus">-    # http://json.org/JSON_checker/test/fail5.json</span>
<a href="#l31.20"></a><span id="l31.20" class="difflineminus">-    '[&quot;double extra comma&quot;,,]',</span>
<a href="#l31.21"></a><span id="l31.21" class="difflineminus">-    # http://json.org/JSON_checker/test/fail6.json</span>
<a href="#l31.22"></a><span id="l31.22" class="difflineminus">-    '[   , &quot;&lt;-- missing value&quot;]',</span>
<a href="#l31.23"></a><span id="l31.23" class="difflineminus">-    # http://json.org/JSON_checker/test/fail7.json</span>
<a href="#l31.24"></a><span id="l31.24" class="difflineminus">-    '[&quot;Comma after the close&quot;],',</span>
<a href="#l31.25"></a><span id="l31.25" class="difflineminus">-    # http://json.org/JSON_checker/test/fail8.json</span>
<a href="#l31.26"></a><span id="l31.26" class="difflineminus">-    '[&quot;Extra close&quot;]]',</span>
<a href="#l31.27"></a><span id="l31.27" class="difflineminus">-    # http://json.org/JSON_checker/test/fail9.json</span>
<a href="#l31.28"></a><span id="l31.28" class="difflineminus">-    '{&quot;Extra comma&quot;: true,}',</span>
<a href="#l31.29"></a><span id="l31.29" class="difflineminus">-    # http://json.org/JSON_checker/test/fail10.json</span>
<a href="#l31.30"></a><span id="l31.30" class="difflineminus">-    '{&quot;Extra value after close&quot;: true} &quot;misplaced quoted value&quot;',</span>
<a href="#l31.31"></a><span id="l31.31" class="difflineminus">-    # http://json.org/JSON_checker/test/fail11.json</span>
<a href="#l31.32"></a><span id="l31.32" class="difflineminus">-    '{&quot;Illegal expression&quot;: 1 + 2}',</span>
<a href="#l31.33"></a><span id="l31.33" class="difflineminus">-    # http://json.org/JSON_checker/test/fail12.json</span>
<a href="#l31.34"></a><span id="l31.34" class="difflineminus">-    '{&quot;Illegal invocation&quot;: alert()}',</span>
<a href="#l31.35"></a><span id="l31.35" class="difflineminus">-    # http://json.org/JSON_checker/test/fail13.json</span>
<a href="#l31.36"></a><span id="l31.36" class="difflineminus">-    '{&quot;Numbers cannot have leading zeroes&quot;: 013}',</span>
<a href="#l31.37"></a><span id="l31.37" class="difflineminus">-    # http://json.org/JSON_checker/test/fail14.json</span>
<a href="#l31.38"></a><span id="l31.38" class="difflineminus">-    '{&quot;Numbers cannot be hex&quot;: 0x14}',</span>
<a href="#l31.39"></a><span id="l31.39" class="difflineminus">-    # http://json.org/JSON_checker/test/fail15.json</span>
<a href="#l31.40"></a><span id="l31.40" class="difflineminus">-    '[&quot;Illegal backslash escape: \\x15&quot;]',</span>
<a href="#l31.41"></a><span id="l31.41" class="difflineminus">-    # http://json.org/JSON_checker/test/fail16.json</span>
<a href="#l31.42"></a><span id="l31.42" class="difflineminus">-    '[&quot;Illegal backslash escape: \\\'&quot;]',</span>
<a href="#l31.43"></a><span id="l31.43" class="difflineminus">-    # http://json.org/JSON_checker/test/fail17.json</span>
<a href="#l31.44"></a><span id="l31.44" class="difflineminus">-    '[&quot;Illegal backslash escape: \\017&quot;]',</span>
<a href="#l31.45"></a><span id="l31.45" class="difflineminus">-    # http://json.org/JSON_checker/test/fail18.json</span>
<a href="#l31.46"></a><span id="l31.46" class="difflineminus">-    '[[[[[[[[[[[[[[[[[[[[&quot;Too deep&quot;]]]]]]]]]]]]]]]]]]]]',</span>
<a href="#l31.47"></a><span id="l31.47" class="difflineminus">-    # http://json.org/JSON_checker/test/fail19.json</span>
<a href="#l31.48"></a><span id="l31.48" class="difflineminus">-    '{&quot;Missing colon&quot; null}',</span>
<a href="#l31.49"></a><span id="l31.49" class="difflineminus">-    # http://json.org/JSON_checker/test/fail20.json</span>
<a href="#l31.50"></a><span id="l31.50" class="difflineminus">-    '{&quot;Double colon&quot;:: null}',</span>
<a href="#l31.51"></a><span id="l31.51" class="difflineminus">-    # http://json.org/JSON_checker/test/fail21.json</span>
<a href="#l31.52"></a><span id="l31.52" class="difflineminus">-    '{&quot;Comma instead of colon&quot;, null}',</span>
<a href="#l31.53"></a><span id="l31.53" class="difflineminus">-    # http://json.org/JSON_checker/test/fail22.json</span>
<a href="#l31.54"></a><span id="l31.54" class="difflineminus">-    '[&quot;Colon instead of comma&quot;: false]',</span>
<a href="#l31.55"></a><span id="l31.55" class="difflineminus">-    # http://json.org/JSON_checker/test/fail23.json</span>
<a href="#l31.56"></a><span id="l31.56" class="difflineminus">-    '[&quot;Bad value&quot;, truth]',</span>
<a href="#l31.57"></a><span id="l31.57" class="difflineminus">-    # http://json.org/JSON_checker/test/fail24.json</span>
<a href="#l31.58"></a><span id="l31.58" class="difflineminus">-    &quot;['single quote']&quot;,</span>
<a href="#l31.59"></a><span id="l31.59" class="difflineminus">-    # http://code.google.com/p/simplejson/issues/detail?id=3</span>
<a href="#l31.60"></a><span id="l31.60" class="difflineminus">-    u'[&quot;A\u001FZ control characters in string&quot;]',</span>
<a href="#l31.61"></a><span id="l31.61" class="difflineminus">-]</span>
<a href="#l31.62"></a><span id="l31.62" class="difflineminus">-</span>
<a href="#l31.63"></a><span id="l31.63" class="difflineminus">-SKIPS = {</span>
<a href="#l31.64"></a><span id="l31.64" class="difflineminus">-    1: &quot;why not have a string payload?&quot;,</span>
<a href="#l31.65"></a><span id="l31.65" class="difflineminus">-    18: &quot;spec doesn't specify any nesting limitations&quot;,</span>
<a href="#l31.66"></a><span id="l31.66" class="difflineminus">-}</span>
<a href="#l31.67"></a><span id="l31.67" class="difflineminus">-</span>
<a href="#l31.68"></a><span id="l31.68" class="difflineminus">-class TestFail(TestCase):</span>
<a href="#l31.69"></a><span id="l31.69" class="difflineminus">-    def test_failures(self):</span>
<a href="#l31.70"></a><span id="l31.70" class="difflineminus">-        for idx, doc in enumerate(JSONDOCS):</span>
<a href="#l31.71"></a><span id="l31.71" class="difflineminus">-            idx = idx + 1</span>
<a href="#l31.72"></a><span id="l31.72" class="difflineminus">-            if idx in SKIPS:</span>
<a href="#l31.73"></a><span id="l31.73" class="difflineminus">-                json.loads(doc)</span>
<a href="#l31.74"></a><span id="l31.74" class="difflineminus">-                continue</span>
<a href="#l31.75"></a><span id="l31.75" class="difflineminus">-            try:</span>
<a href="#l31.76"></a><span id="l31.76" class="difflineminus">-                json.loads(doc)</span>
<a href="#l31.77"></a><span id="l31.77" class="difflineminus">-            except json.JSONDecodeError:</span>
<a href="#l31.78"></a><span id="l31.78" class="difflineminus">-                pass</span>
<a href="#l31.79"></a><span id="l31.79" class="difflineminus">-            else:</span>
<a href="#l31.80"></a><span id="l31.80" class="difflineminus">-                #self.fail(&quot;Expected failure for fail{0}.json: {1!r}&quot;.format(idx, doc))</span>
<a href="#l31.81"></a><span id="l31.81" class="difflineminus">-                self.fail(&quot;Expected failure for fail%d.json: %r&quot; % (idx, doc))</span>
<a href="#l31.82"></a><span id="l31.82" class="difflineminus">-</span>
<a href="#l31.83"></a><span id="l31.83" class="difflineminus">-    def test_array_decoder_issue46(self):</span>
<a href="#l31.84"></a><span id="l31.84" class="difflineminus">-        # http://code.google.com/p/simplejson/issues/detail?id=46</span>
<a href="#l31.85"></a><span id="l31.85" class="difflineminus">-        for doc in [u'[,]', '[,]']:</span>
<a href="#l31.86"></a><span id="l31.86" class="difflineminus">-            try:</span>
<a href="#l31.87"></a><span id="l31.87" class="difflineminus">-                json.loads(doc)</span>
<a href="#l31.88"></a><span id="l31.88" class="difflineminus">-            except json.JSONDecodeError, e:</span>
<a href="#l31.89"></a><span id="l31.89" class="difflineminus">-                self.assertEquals(e.pos, 1)</span>
<a href="#l31.90"></a><span id="l31.90" class="difflineminus">-                self.assertEquals(e.lineno, 1)</span>
<a href="#l31.91"></a><span id="l31.91" class="difflineminus">-                self.assertEquals(e.colno, 1)</span>
<a href="#l31.92"></a><span id="l31.92" class="difflineminus">-            except Exception, e:</span>
<a href="#l31.93"></a><span id="l31.93" class="difflineminus">-                self.fail(&quot;Unexpected exception raised %r %s&quot; % (e, e))</span>
<a href="#l31.94"></a><span id="l31.94" class="difflineminus">-            else:</span>
<a href="#l31.95"></a><span id="l31.95" class="difflineminus">-                self.fail(&quot;Unexpected success parsing '[,]'&quot;)</span>
<a href="#l31.96"></a><span id="l31.96">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l32.1"></a><span id="l32.1">deleted file mode 100644</span>
<a href="#l32.2"></a><span id="l32.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_float.py</span>
<a href="#l32.3"></a><span id="l32.3" class="difflineplus">+++ /dev/null</span>
<a href="#l32.4"></a><span id="l32.4" class="difflineat">@@ -1,19 +0,0 @@</span>
<a href="#l32.5"></a><span id="l32.5" class="difflineminus">-import math</span>
<a href="#l32.6"></a><span id="l32.6" class="difflineminus">-from unittest import TestCase</span>
<a href="#l32.7"></a><span id="l32.7" class="difflineminus">-</span>
<a href="#l32.8"></a><span id="l32.8" class="difflineminus">-import simplejson as json</span>
<a href="#l32.9"></a><span id="l32.9" class="difflineminus">-</span>
<a href="#l32.10"></a><span id="l32.10" class="difflineminus">-class TestFloat(TestCase):</span>
<a href="#l32.11"></a><span id="l32.11" class="difflineminus">-    def test_floats(self):</span>
<a href="#l32.12"></a><span id="l32.12" class="difflineminus">-        for num in [1617161771.7650001, math.pi, math.pi**100,</span>
<a href="#l32.13"></a><span id="l32.13" class="difflineminus">-                    math.pi**-100, 3.1]:</span>
<a href="#l32.14"></a><span id="l32.14" class="difflineminus">-            self.assertEquals(float(json.dumps(num)), num)</span>
<a href="#l32.15"></a><span id="l32.15" class="difflineminus">-            self.assertEquals(json.loads(json.dumps(num)), num)</span>
<a href="#l32.16"></a><span id="l32.16" class="difflineminus">-            self.assertEquals(json.loads(unicode(json.dumps(num))), num)</span>
<a href="#l32.17"></a><span id="l32.17" class="difflineminus">-</span>
<a href="#l32.18"></a><span id="l32.18" class="difflineminus">-    def test_ints(self):</span>
<a href="#l32.19"></a><span id="l32.19" class="difflineminus">-        for num in [1, 1L, 1&lt;&lt;32, 1&lt;&lt;64]:</span>
<a href="#l32.20"></a><span id="l32.20" class="difflineminus">-            self.assertEquals(json.dumps(num), str(num))</span>
<a href="#l32.21"></a><span id="l32.21" class="difflineminus">-            self.assertEquals(int(json.dumps(num)), num)</span>
<a href="#l32.22"></a><span id="l32.22" class="difflineminus">-            self.assertEquals(json.loads(json.dumps(num)), num)</span>
<a href="#l32.23"></a><span id="l32.23" class="difflineminus">-            self.assertEquals(json.loads(unicode(json.dumps(num))), num)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l33.1"></a><span id="l33.1">deleted file mode 100644</span>
<a href="#l33.2"></a><span id="l33.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_indent.py</span>
<a href="#l33.3"></a><span id="l33.3" class="difflineplus">+++ /dev/null</span>
<a href="#l33.4"></a><span id="l33.4" class="difflineat">@@ -1,86 +0,0 @@</span>
<a href="#l33.5"></a><span id="l33.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l33.6"></a><span id="l33.6" class="difflineminus">-</span>
<a href="#l33.7"></a><span id="l33.7" class="difflineminus">-import simplejson as json</span>
<a href="#l33.8"></a><span id="l33.8" class="difflineminus">-import textwrap</span>
<a href="#l33.9"></a><span id="l33.9" class="difflineminus">-from StringIO import StringIO</span>
<a href="#l33.10"></a><span id="l33.10" class="difflineminus">-</span>
<a href="#l33.11"></a><span id="l33.11" class="difflineminus">-class TestIndent(TestCase):</span>
<a href="#l33.12"></a><span id="l33.12" class="difflineminus">-    def test_indent(self):</span>
<a href="#l33.13"></a><span id="l33.13" class="difflineminus">-        h = [['blorpie'], ['whoops'], [], 'd-shtaeou', 'd-nthiouh',</span>
<a href="#l33.14"></a><span id="l33.14" class="difflineminus">-             'i-vhbjkhnth',</span>
<a href="#l33.15"></a><span id="l33.15" class="difflineminus">-             {'nifty': 87}, {'field': 'yes', 'morefield': False} ]</span>
<a href="#l33.16"></a><span id="l33.16" class="difflineminus">-</span>
<a href="#l33.17"></a><span id="l33.17" class="difflineminus">-        expect = textwrap.dedent(&quot;&quot;&quot;\</span>
<a href="#l33.18"></a><span id="l33.18" class="difflineminus">-        [</span>
<a href="#l33.19"></a><span id="l33.19" class="difflineminus">-        \t[</span>
<a href="#l33.20"></a><span id="l33.20" class="difflineminus">-        \t\t&quot;blorpie&quot;</span>
<a href="#l33.21"></a><span id="l33.21" class="difflineminus">-        \t],</span>
<a href="#l33.22"></a><span id="l33.22" class="difflineminus">-        \t[</span>
<a href="#l33.23"></a><span id="l33.23" class="difflineminus">-        \t\t&quot;whoops&quot;</span>
<a href="#l33.24"></a><span id="l33.24" class="difflineminus">-        \t],</span>
<a href="#l33.25"></a><span id="l33.25" class="difflineminus">-        \t[],</span>
<a href="#l33.26"></a><span id="l33.26" class="difflineminus">-        \t&quot;d-shtaeou&quot;,</span>
<a href="#l33.27"></a><span id="l33.27" class="difflineminus">-        \t&quot;d-nthiouh&quot;,</span>
<a href="#l33.28"></a><span id="l33.28" class="difflineminus">-        \t&quot;i-vhbjkhnth&quot;,</span>
<a href="#l33.29"></a><span id="l33.29" class="difflineminus">-        \t{</span>
<a href="#l33.30"></a><span id="l33.30" class="difflineminus">-        \t\t&quot;nifty&quot;: 87</span>
<a href="#l33.31"></a><span id="l33.31" class="difflineminus">-        \t},</span>
<a href="#l33.32"></a><span id="l33.32" class="difflineminus">-        \t{</span>
<a href="#l33.33"></a><span id="l33.33" class="difflineminus">-        \t\t&quot;field&quot;: &quot;yes&quot;,</span>
<a href="#l33.34"></a><span id="l33.34" class="difflineminus">-        \t\t&quot;morefield&quot;: false</span>
<a href="#l33.35"></a><span id="l33.35" class="difflineminus">-        \t}</span>
<a href="#l33.36"></a><span id="l33.36" class="difflineminus">-        ]&quot;&quot;&quot;)</span>
<a href="#l33.37"></a><span id="l33.37" class="difflineminus">-</span>
<a href="#l33.38"></a><span id="l33.38" class="difflineminus">-</span>
<a href="#l33.39"></a><span id="l33.39" class="difflineminus">-        d1 = json.dumps(h)</span>
<a href="#l33.40"></a><span id="l33.40" class="difflineminus">-        d2 = json.dumps(h, indent='\t', sort_keys=True, separators=(',', ': '))</span>
<a href="#l33.41"></a><span id="l33.41" class="difflineminus">-        d3 = json.dumps(h, indent='  ', sort_keys=True, separators=(',', ': '))</span>
<a href="#l33.42"></a><span id="l33.42" class="difflineminus">-        d4 = json.dumps(h, indent=2, sort_keys=True, separators=(',', ': '))</span>
<a href="#l33.43"></a><span id="l33.43" class="difflineminus">-</span>
<a href="#l33.44"></a><span id="l33.44" class="difflineminus">-        h1 = json.loads(d1)</span>
<a href="#l33.45"></a><span id="l33.45" class="difflineminus">-        h2 = json.loads(d2)</span>
<a href="#l33.46"></a><span id="l33.46" class="difflineminus">-        h3 = json.loads(d3)</span>
<a href="#l33.47"></a><span id="l33.47" class="difflineminus">-        h4 = json.loads(d4)</span>
<a href="#l33.48"></a><span id="l33.48" class="difflineminus">-</span>
<a href="#l33.49"></a><span id="l33.49" class="difflineminus">-        self.assertEquals(h1, h)</span>
<a href="#l33.50"></a><span id="l33.50" class="difflineminus">-        self.assertEquals(h2, h)</span>
<a href="#l33.51"></a><span id="l33.51" class="difflineminus">-        self.assertEquals(h3, h)</span>
<a href="#l33.52"></a><span id="l33.52" class="difflineminus">-        self.assertEquals(h4, h)</span>
<a href="#l33.53"></a><span id="l33.53" class="difflineminus">-        self.assertEquals(d3, expect.replace('\t', '  '))</span>
<a href="#l33.54"></a><span id="l33.54" class="difflineminus">-        self.assertEquals(d4, expect.replace('\t', '  '))</span>
<a href="#l33.55"></a><span id="l33.55" class="difflineminus">-        # NOTE: Python 2.4 textwrap.dedent converts tabs to spaces,</span>
<a href="#l33.56"></a><span id="l33.56" class="difflineminus">-        #       so the following is expected to fail. Python 2.4 is not a</span>
<a href="#l33.57"></a><span id="l33.57" class="difflineminus">-        #       supported platform in simplejson 2.1.0+.</span>
<a href="#l33.58"></a><span id="l33.58" class="difflineminus">-        self.assertEquals(d2, expect)</span>
<a href="#l33.59"></a><span id="l33.59" class="difflineminus">-</span>
<a href="#l33.60"></a><span id="l33.60" class="difflineminus">-    def test_indent0(self):</span>
<a href="#l33.61"></a><span id="l33.61" class="difflineminus">-        h = {3: 1}</span>
<a href="#l33.62"></a><span id="l33.62" class="difflineminus">-        def check(indent, expected):</span>
<a href="#l33.63"></a><span id="l33.63" class="difflineminus">-            d1 = json.dumps(h, indent=indent)</span>
<a href="#l33.64"></a><span id="l33.64" class="difflineminus">-            self.assertEquals(d1, expected)</span>
<a href="#l33.65"></a><span id="l33.65" class="difflineminus">-</span>
<a href="#l33.66"></a><span id="l33.66" class="difflineminus">-            sio = StringIO()</span>
<a href="#l33.67"></a><span id="l33.67" class="difflineminus">-            json.dump(h, sio, indent=indent)</span>
<a href="#l33.68"></a><span id="l33.68" class="difflineminus">-            self.assertEquals(sio.getvalue(), expected)</span>
<a href="#l33.69"></a><span id="l33.69" class="difflineminus">-</span>
<a href="#l33.70"></a><span id="l33.70" class="difflineminus">-        # indent=0 should emit newlines</span>
<a href="#l33.71"></a><span id="l33.71" class="difflineminus">-        check(0, '{\n&quot;3&quot;: 1\n}')</span>
<a href="#l33.72"></a><span id="l33.72" class="difflineminus">-        # indent=None is more compact</span>
<a href="#l33.73"></a><span id="l33.73" class="difflineminus">-        check(None, '{&quot;3&quot;: 1}')</span>
<a href="#l33.74"></a><span id="l33.74" class="difflineminus">-</span>
<a href="#l33.75"></a><span id="l33.75" class="difflineminus">-    def test_separators(self):</span>
<a href="#l33.76"></a><span id="l33.76" class="difflineminus">-        lst = [1,2,3,4]</span>
<a href="#l33.77"></a><span id="l33.77" class="difflineminus">-        expect = '[\n1,\n2,\n3,\n4\n]'</span>
<a href="#l33.78"></a><span id="l33.78" class="difflineminus">-        expect_spaces = '[\n1, \n2, \n3, \n4\n]'</span>
<a href="#l33.79"></a><span id="l33.79" class="difflineminus">-        # Ensure that separators still works</span>
<a href="#l33.80"></a><span id="l33.80" class="difflineminus">-        self.assertEquals(</span>
<a href="#l33.81"></a><span id="l33.81" class="difflineminus">-            expect_spaces,</span>
<a href="#l33.82"></a><span id="l33.82" class="difflineminus">-            json.dumps(lst, indent=0, separators=(', ', ': ')))</span>
<a href="#l33.83"></a><span id="l33.83" class="difflineminus">-        # Force the new defaults</span>
<a href="#l33.84"></a><span id="l33.84" class="difflineminus">-        self.assertEquals(</span>
<a href="#l33.85"></a><span id="l33.85" class="difflineminus">-            expect,</span>
<a href="#l33.86"></a><span id="l33.86" class="difflineminus">-            json.dumps(lst, indent=0, separators=(',', ': ')))</span>
<a href="#l33.87"></a><span id="l33.87" class="difflineminus">-        # Added in 2.1.4</span>
<a href="#l33.88"></a><span id="l33.88" class="difflineminus">-        self.assertEquals(</span>
<a href="#l33.89"></a><span id="l33.89" class="difflineminus">-            expect,</span>
<a href="#l33.90"></a><span id="l33.90" class="difflineminus">-            json.dumps(lst, indent=0))</span>
<a href="#l33.91"></a><span id="l33.91">\ No newline at end of file</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l34.1"></a><span id="l34.1">deleted file mode 100644</span>
<a href="#l34.2"></a><span id="l34.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass1.py</span>
<a href="#l34.3"></a><span id="l34.3" class="difflineplus">+++ /dev/null</span>
<a href="#l34.4"></a><span id="l34.4" class="difflineat">@@ -1,76 +0,0 @@</span>
<a href="#l34.5"></a><span id="l34.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l34.6"></a><span id="l34.6" class="difflineminus">-</span>
<a href="#l34.7"></a><span id="l34.7" class="difflineminus">-import simplejson as json</span>
<a href="#l34.8"></a><span id="l34.8" class="difflineminus">-</span>
<a href="#l34.9"></a><span id="l34.9" class="difflineminus">-# from http://json.org/JSON_checker/test/pass1.json</span>
<a href="#l34.10"></a><span id="l34.10" class="difflineminus">-JSON = r'''</span>
<a href="#l34.11"></a><span id="l34.11" class="difflineminus">-[</span>
<a href="#l34.12"></a><span id="l34.12" class="difflineminus">-    &quot;JSON Test Pattern pass1&quot;,</span>
<a href="#l34.13"></a><span id="l34.13" class="difflineminus">-    {&quot;object with 1 member&quot;:[&quot;array with 1 element&quot;]},</span>
<a href="#l34.14"></a><span id="l34.14" class="difflineminus">-    {},</span>
<a href="#l34.15"></a><span id="l34.15" class="difflineminus">-    [],</span>
<a href="#l34.16"></a><span id="l34.16" class="difflineminus">-    -42,</span>
<a href="#l34.17"></a><span id="l34.17" class="difflineminus">-    true,</span>
<a href="#l34.18"></a><span id="l34.18" class="difflineminus">-    false,</span>
<a href="#l34.19"></a><span id="l34.19" class="difflineminus">-    null,</span>
<a href="#l34.20"></a><span id="l34.20" class="difflineminus">-    {</span>
<a href="#l34.21"></a><span id="l34.21" class="difflineminus">-        &quot;integer&quot;: 1234567890,</span>
<a href="#l34.22"></a><span id="l34.22" class="difflineminus">-        &quot;real&quot;: -9876.543210,</span>
<a href="#l34.23"></a><span id="l34.23" class="difflineminus">-        &quot;e&quot;: 0.123456789e-12,</span>
<a href="#l34.24"></a><span id="l34.24" class="difflineminus">-        &quot;E&quot;: 1.234567890E+34,</span>
<a href="#l34.25"></a><span id="l34.25" class="difflineminus">-        &quot;&quot;:  23456789012E666,</span>
<a href="#l34.26"></a><span id="l34.26" class="difflineminus">-        &quot;zero&quot;: 0,</span>
<a href="#l34.27"></a><span id="l34.27" class="difflineminus">-        &quot;one&quot;: 1,</span>
<a href="#l34.28"></a><span id="l34.28" class="difflineminus">-        &quot;space&quot;: &quot; &quot;,</span>
<a href="#l34.29"></a><span id="l34.29" class="difflineminus">-        &quot;quote&quot;: &quot;\&quot;&quot;,</span>
<a href="#l34.30"></a><span id="l34.30" class="difflineminus">-        &quot;backslash&quot;: &quot;\\&quot;,</span>
<a href="#l34.31"></a><span id="l34.31" class="difflineminus">-        &quot;controls&quot;: &quot;\b\f\n\r\t&quot;,</span>
<a href="#l34.32"></a><span id="l34.32" class="difflineminus">-        &quot;slash&quot;: &quot;/ &amp; \/&quot;,</span>
<a href="#l34.33"></a><span id="l34.33" class="difflineminus">-        &quot;alpha&quot;: &quot;abcdefghijklmnopqrstuvwyz&quot;,</span>
<a href="#l34.34"></a><span id="l34.34" class="difflineminus">-        &quot;ALPHA&quot;: &quot;ABCDEFGHIJKLMNOPQRSTUVWYZ&quot;,</span>
<a href="#l34.35"></a><span id="l34.35" class="difflineminus">-        &quot;digit&quot;: &quot;0123456789&quot;,</span>
<a href="#l34.36"></a><span id="l34.36" class="difflineminus">-        &quot;special&quot;: &quot;`1~!@#$%^&amp;*()_+-={':[,]}|;.&lt;/&gt;?&quot;,</span>
<a href="#l34.37"></a><span id="l34.37" class="difflineminus">-        &quot;hex&quot;: &quot;\u0123\u4567\u89AB\uCDEF\uabcd\uef4A&quot;,</span>
<a href="#l34.38"></a><span id="l34.38" class="difflineminus">-        &quot;true&quot;: true,</span>
<a href="#l34.39"></a><span id="l34.39" class="difflineminus">-        &quot;false&quot;: false,</span>
<a href="#l34.40"></a><span id="l34.40" class="difflineminus">-        &quot;null&quot;: null,</span>
<a href="#l34.41"></a><span id="l34.41" class="difflineminus">-        &quot;array&quot;:[  ],</span>
<a href="#l34.42"></a><span id="l34.42" class="difflineminus">-        &quot;object&quot;:{  },</span>
<a href="#l34.43"></a><span id="l34.43" class="difflineminus">-        &quot;address&quot;: &quot;50 St. James Street&quot;,</span>
<a href="#l34.44"></a><span id="l34.44" class="difflineminus">-        &quot;url&quot;: &quot;http://www.JSON.org/&quot;,</span>
<a href="#l34.45"></a><span id="l34.45" class="difflineminus">-        &quot;comment&quot;: &quot;// /* &lt;!-- --&quot;,</span>
<a href="#l34.46"></a><span id="l34.46" class="difflineminus">-        &quot;# -- --&gt; */&quot;: &quot; &quot;,</span>
<a href="#l34.47"></a><span id="l34.47" class="difflineminus">-        &quot; s p a c e d &quot; :[1,2 , 3</span>
<a href="#l34.48"></a><span id="l34.48" class="difflineminus">-</span>
<a href="#l34.49"></a><span id="l34.49" class="difflineminus">-,</span>
<a href="#l34.50"></a><span id="l34.50" class="difflineminus">-</span>
<a href="#l34.51"></a><span id="l34.51" class="difflineminus">-4 , 5        ,          6           ,7        ],</span>
<a href="#l34.52"></a><span id="l34.52" class="difflineminus">-        &quot;compact&quot;: [1,2,3,4,5,6,7],</span>
<a href="#l34.53"></a><span id="l34.53" class="difflineminus">-        &quot;jsontext&quot;: &quot;{\&quot;object with 1 member\&quot;:[\&quot;array with 1 element\&quot;]}&quot;,</span>
<a href="#l34.54"></a><span id="l34.54" class="difflineminus">-        &quot;quotes&quot;: &quot;&amp;#34; \u0022 %22 0x22 034 &amp;#x22;&quot;,</span>
<a href="#l34.55"></a><span id="l34.55" class="difflineminus">-        &quot;\/\\\&quot;\uCAFE\uBABE\uAB98\uFCDE\ubcda\uef4A\b\f\n\r\t`1~!@#$%^&amp;*()_+-=[]{}|;:',./&lt;&gt;?&quot;</span>
<a href="#l34.56"></a><span id="l34.56" class="difflineminus">-: &quot;A key can be any string&quot;</span>
<a href="#l34.57"></a><span id="l34.57" class="difflineminus">-    },</span>
<a href="#l34.58"></a><span id="l34.58" class="difflineminus">-    0.5 ,98.6</span>
<a href="#l34.59"></a><span id="l34.59" class="difflineminus">-,</span>
<a href="#l34.60"></a><span id="l34.60" class="difflineminus">-99.44</span>
<a href="#l34.61"></a><span id="l34.61" class="difflineminus">-,</span>
<a href="#l34.62"></a><span id="l34.62" class="difflineminus">-</span>
<a href="#l34.63"></a><span id="l34.63" class="difflineminus">-1066</span>
<a href="#l34.64"></a><span id="l34.64" class="difflineminus">-</span>
<a href="#l34.65"></a><span id="l34.65" class="difflineminus">-</span>
<a href="#l34.66"></a><span id="l34.66" class="difflineminus">-,&quot;rosebud&quot;]</span>
<a href="#l34.67"></a><span id="l34.67" class="difflineminus">-'''</span>
<a href="#l34.68"></a><span id="l34.68" class="difflineminus">-</span>
<a href="#l34.69"></a><span id="l34.69" class="difflineminus">-class TestPass1(TestCase):</span>
<a href="#l34.70"></a><span id="l34.70" class="difflineminus">-    def test_parse(self):</span>
<a href="#l34.71"></a><span id="l34.71" class="difflineminus">-        # test in/out equivalence and parsing</span>
<a href="#l34.72"></a><span id="l34.72" class="difflineminus">-        res = json.loads(JSON)</span>
<a href="#l34.73"></a><span id="l34.73" class="difflineminus">-        out = json.dumps(res)</span>
<a href="#l34.74"></a><span id="l34.74" class="difflineminus">-        self.assertEquals(res, json.loads(out))</span>
<a href="#l34.75"></a><span id="l34.75" class="difflineminus">-        try:</span>
<a href="#l34.76"></a><span id="l34.76" class="difflineminus">-            json.dumps(res, allow_nan=False)</span>
<a href="#l34.77"></a><span id="l34.77" class="difflineminus">-        except ValueError:</span>
<a href="#l34.78"></a><span id="l34.78" class="difflineminus">-            pass</span>
<a href="#l34.79"></a><span id="l34.79" class="difflineminus">-        else:</span>
<a href="#l34.80"></a><span id="l34.80" class="difflineminus">-            self.fail(&quot;23456789012E666 should be out of range&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l35.1"></a><span id="l35.1">deleted file mode 100644</span>
<a href="#l35.2"></a><span id="l35.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass2.py</span>
<a href="#l35.3"></a><span id="l35.3" class="difflineplus">+++ /dev/null</span>
<a href="#l35.4"></a><span id="l35.4" class="difflineat">@@ -1,14 +0,0 @@</span>
<a href="#l35.5"></a><span id="l35.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l35.6"></a><span id="l35.6" class="difflineminus">-import simplejson as json</span>
<a href="#l35.7"></a><span id="l35.7" class="difflineminus">-</span>
<a href="#l35.8"></a><span id="l35.8" class="difflineminus">-# from http://json.org/JSON_checker/test/pass2.json</span>
<a href="#l35.9"></a><span id="l35.9" class="difflineminus">-JSON = r'''</span>
<a href="#l35.10"></a><span id="l35.10" class="difflineminus">-[[[[[[[[[[[[[[[[[[[&quot;Not too deep&quot;]]]]]]]]]]]]]]]]]]]</span>
<a href="#l35.11"></a><span id="l35.11" class="difflineminus">-'''</span>
<a href="#l35.12"></a><span id="l35.12" class="difflineminus">-</span>
<a href="#l35.13"></a><span id="l35.13" class="difflineminus">-class TestPass2(TestCase):</span>
<a href="#l35.14"></a><span id="l35.14" class="difflineminus">-    def test_parse(self):</span>
<a href="#l35.15"></a><span id="l35.15" class="difflineminus">-        # test in/out equivalence and parsing</span>
<a href="#l35.16"></a><span id="l35.16" class="difflineminus">-        res = json.loads(JSON)</span>
<a href="#l35.17"></a><span id="l35.17" class="difflineminus">-        out = json.dumps(res)</span>
<a href="#l35.18"></a><span id="l35.18" class="difflineminus">-        self.assertEquals(res, json.loads(out))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l36.1"></a><span id="l36.1">deleted file mode 100644</span>
<a href="#l36.2"></a><span id="l36.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_pass3.py</span>
<a href="#l36.3"></a><span id="l36.3" class="difflineplus">+++ /dev/null</span>
<a href="#l36.4"></a><span id="l36.4" class="difflineat">@@ -1,20 +0,0 @@</span>
<a href="#l36.5"></a><span id="l36.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l36.6"></a><span id="l36.6" class="difflineminus">-</span>
<a href="#l36.7"></a><span id="l36.7" class="difflineminus">-import simplejson as json</span>
<a href="#l36.8"></a><span id="l36.8" class="difflineminus">-</span>
<a href="#l36.9"></a><span id="l36.9" class="difflineminus">-# from http://json.org/JSON_checker/test/pass3.json</span>
<a href="#l36.10"></a><span id="l36.10" class="difflineminus">-JSON = r'''</span>
<a href="#l36.11"></a><span id="l36.11" class="difflineminus">-{</span>
<a href="#l36.12"></a><span id="l36.12" class="difflineminus">-    &quot;JSON Test Pattern pass3&quot;: {</span>
<a href="#l36.13"></a><span id="l36.13" class="difflineminus">-        &quot;The outermost value&quot;: &quot;must be an object or array.&quot;,</span>
<a href="#l36.14"></a><span id="l36.14" class="difflineminus">-        &quot;In this test&quot;: &quot;It is an object.&quot;</span>
<a href="#l36.15"></a><span id="l36.15" class="difflineminus">-    }</span>
<a href="#l36.16"></a><span id="l36.16" class="difflineminus">-}</span>
<a href="#l36.17"></a><span id="l36.17" class="difflineminus">-'''</span>
<a href="#l36.18"></a><span id="l36.18" class="difflineminus">-</span>
<a href="#l36.19"></a><span id="l36.19" class="difflineminus">-class TestPass3(TestCase):</span>
<a href="#l36.20"></a><span id="l36.20" class="difflineminus">-    def test_parse(self):</span>
<a href="#l36.21"></a><span id="l36.21" class="difflineminus">-        # test in/out equivalence and parsing</span>
<a href="#l36.22"></a><span id="l36.22" class="difflineminus">-        res = json.loads(JSON)</span>
<a href="#l36.23"></a><span id="l36.23" class="difflineminus">-        out = json.dumps(res)</span>
<a href="#l36.24"></a><span id="l36.24" class="difflineminus">-        self.assertEquals(res, json.loads(out))</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l37.1"></a><span id="l37.1">deleted file mode 100644</span>
<a href="#l37.2"></a><span id="l37.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_recursion.py</span>
<a href="#l37.3"></a><span id="l37.3" class="difflineplus">+++ /dev/null</span>
<a href="#l37.4"></a><span id="l37.4" class="difflineat">@@ -1,67 +0,0 @@</span>
<a href="#l37.5"></a><span id="l37.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l37.6"></a><span id="l37.6" class="difflineminus">-</span>
<a href="#l37.7"></a><span id="l37.7" class="difflineminus">-import simplejson as json</span>
<a href="#l37.8"></a><span id="l37.8" class="difflineminus">-</span>
<a href="#l37.9"></a><span id="l37.9" class="difflineminus">-class JSONTestObject:</span>
<a href="#l37.10"></a><span id="l37.10" class="difflineminus">-    pass</span>
<a href="#l37.11"></a><span id="l37.11" class="difflineminus">-</span>
<a href="#l37.12"></a><span id="l37.12" class="difflineminus">-</span>
<a href="#l37.13"></a><span id="l37.13" class="difflineminus">-class RecursiveJSONEncoder(json.JSONEncoder):</span>
<a href="#l37.14"></a><span id="l37.14" class="difflineminus">-    recurse = False</span>
<a href="#l37.15"></a><span id="l37.15" class="difflineminus">-    def default(self, o):</span>
<a href="#l37.16"></a><span id="l37.16" class="difflineminus">-        if o is JSONTestObject:</span>
<a href="#l37.17"></a><span id="l37.17" class="difflineminus">-            if self.recurse:</span>
<a href="#l37.18"></a><span id="l37.18" class="difflineminus">-                return [JSONTestObject]</span>
<a href="#l37.19"></a><span id="l37.19" class="difflineminus">-            else:</span>
<a href="#l37.20"></a><span id="l37.20" class="difflineminus">-                return 'JSONTestObject'</span>
<a href="#l37.21"></a><span id="l37.21" class="difflineminus">-        return json.JSONEncoder.default(o)</span>
<a href="#l37.22"></a><span id="l37.22" class="difflineminus">-</span>
<a href="#l37.23"></a><span id="l37.23" class="difflineminus">-</span>
<a href="#l37.24"></a><span id="l37.24" class="difflineminus">-class TestRecursion(TestCase):</span>
<a href="#l37.25"></a><span id="l37.25" class="difflineminus">-    def test_listrecursion(self):</span>
<a href="#l37.26"></a><span id="l37.26" class="difflineminus">-        x = []</span>
<a href="#l37.27"></a><span id="l37.27" class="difflineminus">-        x.append(x)</span>
<a href="#l37.28"></a><span id="l37.28" class="difflineminus">-        try:</span>
<a href="#l37.29"></a><span id="l37.29" class="difflineminus">-            json.dumps(x)</span>
<a href="#l37.30"></a><span id="l37.30" class="difflineminus">-        except ValueError:</span>
<a href="#l37.31"></a><span id="l37.31" class="difflineminus">-            pass</span>
<a href="#l37.32"></a><span id="l37.32" class="difflineminus">-        else:</span>
<a href="#l37.33"></a><span id="l37.33" class="difflineminus">-            self.fail(&quot;didn't raise ValueError on list recursion&quot;)</span>
<a href="#l37.34"></a><span id="l37.34" class="difflineminus">-        x = []</span>
<a href="#l37.35"></a><span id="l37.35" class="difflineminus">-        y = [x]</span>
<a href="#l37.36"></a><span id="l37.36" class="difflineminus">-        x.append(y)</span>
<a href="#l37.37"></a><span id="l37.37" class="difflineminus">-        try:</span>
<a href="#l37.38"></a><span id="l37.38" class="difflineminus">-            json.dumps(x)</span>
<a href="#l37.39"></a><span id="l37.39" class="difflineminus">-        except ValueError:</span>
<a href="#l37.40"></a><span id="l37.40" class="difflineminus">-            pass</span>
<a href="#l37.41"></a><span id="l37.41" class="difflineminus">-        else:</span>
<a href="#l37.42"></a><span id="l37.42" class="difflineminus">-            self.fail(&quot;didn't raise ValueError on alternating list recursion&quot;)</span>
<a href="#l37.43"></a><span id="l37.43" class="difflineminus">-        y = []</span>
<a href="#l37.44"></a><span id="l37.44" class="difflineminus">-        x = [y, y]</span>
<a href="#l37.45"></a><span id="l37.45" class="difflineminus">-        # ensure that the marker is cleared</span>
<a href="#l37.46"></a><span id="l37.46" class="difflineminus">-        json.dumps(x)</span>
<a href="#l37.47"></a><span id="l37.47" class="difflineminus">-</span>
<a href="#l37.48"></a><span id="l37.48" class="difflineminus">-    def test_dictrecursion(self):</span>
<a href="#l37.49"></a><span id="l37.49" class="difflineminus">-        x = {}</span>
<a href="#l37.50"></a><span id="l37.50" class="difflineminus">-        x[&quot;test&quot;] = x</span>
<a href="#l37.51"></a><span id="l37.51" class="difflineminus">-        try:</span>
<a href="#l37.52"></a><span id="l37.52" class="difflineminus">-            json.dumps(x)</span>
<a href="#l37.53"></a><span id="l37.53" class="difflineminus">-        except ValueError:</span>
<a href="#l37.54"></a><span id="l37.54" class="difflineminus">-            pass</span>
<a href="#l37.55"></a><span id="l37.55" class="difflineminus">-        else:</span>
<a href="#l37.56"></a><span id="l37.56" class="difflineminus">-            self.fail(&quot;didn't raise ValueError on dict recursion&quot;)</span>
<a href="#l37.57"></a><span id="l37.57" class="difflineminus">-        x = {}</span>
<a href="#l37.58"></a><span id="l37.58" class="difflineminus">-        y = {&quot;a&quot;: x, &quot;b&quot;: x}</span>
<a href="#l37.59"></a><span id="l37.59" class="difflineminus">-        # ensure that the marker is cleared</span>
<a href="#l37.60"></a><span id="l37.60" class="difflineminus">-        json.dumps(y)</span>
<a href="#l37.61"></a><span id="l37.61" class="difflineminus">-</span>
<a href="#l37.62"></a><span id="l37.62" class="difflineminus">-    def test_defaultrecursion(self):</span>
<a href="#l37.63"></a><span id="l37.63" class="difflineminus">-        enc = RecursiveJSONEncoder()</span>
<a href="#l37.64"></a><span id="l37.64" class="difflineminus">-        self.assertEquals(enc.encode(JSONTestObject), '&quot;JSONTestObject&quot;')</span>
<a href="#l37.65"></a><span id="l37.65" class="difflineminus">-        enc.recurse = True</span>
<a href="#l37.66"></a><span id="l37.66" class="difflineminus">-        try:</span>
<a href="#l37.67"></a><span id="l37.67" class="difflineminus">-            enc.encode(JSONTestObject)</span>
<a href="#l37.68"></a><span id="l37.68" class="difflineminus">-        except ValueError:</span>
<a href="#l37.69"></a><span id="l37.69" class="difflineminus">-            pass</span>
<a href="#l37.70"></a><span id="l37.70" class="difflineminus">-        else:</span>
<a href="#l37.71"></a><span id="l37.71" class="difflineminus">-            self.fail(&quot;didn't raise ValueError on default recursion&quot;)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l38.1"></a><span id="l38.1">deleted file mode 100644</span>
<a href="#l38.2"></a><span id="l38.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_scanstring.py</span>
<a href="#l38.3"></a><span id="l38.3" class="difflineplus">+++ /dev/null</span>
<a href="#l38.4"></a><span id="l38.4" class="difflineat">@@ -1,117 +0,0 @@</span>
<a href="#l38.5"></a><span id="l38.5" class="difflineminus">-import sys</span>
<a href="#l38.6"></a><span id="l38.6" class="difflineminus">-from unittest import TestCase</span>
<a href="#l38.7"></a><span id="l38.7" class="difflineminus">-</span>
<a href="#l38.8"></a><span id="l38.8" class="difflineminus">-import simplejson as json</span>
<a href="#l38.9"></a><span id="l38.9" class="difflineminus">-import simplejson.decoder</span>
<a href="#l38.10"></a><span id="l38.10" class="difflineminus">-</span>
<a href="#l38.11"></a><span id="l38.11" class="difflineminus">-class TestScanString(TestCase):</span>
<a href="#l38.12"></a><span id="l38.12" class="difflineminus">-    def test_py_scanstring(self):</span>
<a href="#l38.13"></a><span id="l38.13" class="difflineminus">-        self._test_scanstring(simplejson.decoder.py_scanstring)</span>
<a href="#l38.14"></a><span id="l38.14" class="difflineminus">-</span>
<a href="#l38.15"></a><span id="l38.15" class="difflineminus">-    def test_c_scanstring(self):</span>
<a href="#l38.16"></a><span id="l38.16" class="difflineminus">-        if not simplejson.decoder.c_scanstring:</span>
<a href="#l38.17"></a><span id="l38.17" class="difflineminus">-            return</span>
<a href="#l38.18"></a><span id="l38.18" class="difflineminus">-        self._test_scanstring(simplejson.decoder.c_scanstring)</span>
<a href="#l38.19"></a><span id="l38.19" class="difflineminus">-</span>
<a href="#l38.20"></a><span id="l38.20" class="difflineminus">-    def _test_scanstring(self, scanstring):</span>
<a href="#l38.21"></a><span id="l38.21" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.22"></a><span id="l38.22" class="difflineminus">-            scanstring('&quot;z\\ud834\\udd20x&quot;', 1, None, True),</span>
<a href="#l38.23"></a><span id="l38.23" class="difflineminus">-            (u'z\U0001d120x', 16))</span>
<a href="#l38.24"></a><span id="l38.24" class="difflineminus">-</span>
<a href="#l38.25"></a><span id="l38.25" class="difflineminus">-        if sys.maxunicode == 65535:</span>
<a href="#l38.26"></a><span id="l38.26" class="difflineminus">-            self.assertEquals(</span>
<a href="#l38.27"></a><span id="l38.27" class="difflineminus">-                scanstring(u'&quot;z\U0001d120x&quot;', 1, None, True),</span>
<a href="#l38.28"></a><span id="l38.28" class="difflineminus">-                (u'z\U0001d120x', 6))</span>
<a href="#l38.29"></a><span id="l38.29" class="difflineminus">-        else:</span>
<a href="#l38.30"></a><span id="l38.30" class="difflineminus">-            self.assertEquals(</span>
<a href="#l38.31"></a><span id="l38.31" class="difflineminus">-                scanstring(u'&quot;z\U0001d120x&quot;', 1, None, True),</span>
<a href="#l38.32"></a><span id="l38.32" class="difflineminus">-                (u'z\U0001d120x', 5))</span>
<a href="#l38.33"></a><span id="l38.33" class="difflineminus">-</span>
<a href="#l38.34"></a><span id="l38.34" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.35"></a><span id="l38.35" class="difflineminus">-            scanstring('&quot;\\u007b&quot;', 1, None, True),</span>
<a href="#l38.36"></a><span id="l38.36" class="difflineminus">-            (u'{', 8))</span>
<a href="#l38.37"></a><span id="l38.37" class="difflineminus">-</span>
<a href="#l38.38"></a><span id="l38.38" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.39"></a><span id="l38.39" class="difflineminus">-            scanstring('&quot;A JSON payload should be an object or array, not a string.&quot;', 1, None, True),</span>
<a href="#l38.40"></a><span id="l38.40" class="difflineminus">-            (u'A JSON payload should be an object or array, not a string.', 60))</span>
<a href="#l38.41"></a><span id="l38.41" class="difflineminus">-</span>
<a href="#l38.42"></a><span id="l38.42" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.43"></a><span id="l38.43" class="difflineminus">-            scanstring('[&quot;Unclosed array&quot;', 2, None, True),</span>
<a href="#l38.44"></a><span id="l38.44" class="difflineminus">-            (u'Unclosed array', 17))</span>
<a href="#l38.45"></a><span id="l38.45" class="difflineminus">-</span>
<a href="#l38.46"></a><span id="l38.46" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.47"></a><span id="l38.47" class="difflineminus">-            scanstring('[&quot;extra comma&quot;,]', 2, None, True),</span>
<a href="#l38.48"></a><span id="l38.48" class="difflineminus">-            (u'extra comma', 14))</span>
<a href="#l38.49"></a><span id="l38.49" class="difflineminus">-</span>
<a href="#l38.50"></a><span id="l38.50" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.51"></a><span id="l38.51" class="difflineminus">-            scanstring('[&quot;double extra comma&quot;,,]', 2, None, True),</span>
<a href="#l38.52"></a><span id="l38.52" class="difflineminus">-            (u'double extra comma', 21))</span>
<a href="#l38.53"></a><span id="l38.53" class="difflineminus">-</span>
<a href="#l38.54"></a><span id="l38.54" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.55"></a><span id="l38.55" class="difflineminus">-            scanstring('[&quot;Comma after the close&quot;],', 2, None, True),</span>
<a href="#l38.56"></a><span id="l38.56" class="difflineminus">-            (u'Comma after the close', 24))</span>
<a href="#l38.57"></a><span id="l38.57" class="difflineminus">-</span>
<a href="#l38.58"></a><span id="l38.58" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.59"></a><span id="l38.59" class="difflineminus">-            scanstring('[&quot;Extra close&quot;]]', 2, None, True),</span>
<a href="#l38.60"></a><span id="l38.60" class="difflineminus">-            (u'Extra close', 14))</span>
<a href="#l38.61"></a><span id="l38.61" class="difflineminus">-</span>
<a href="#l38.62"></a><span id="l38.62" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.63"></a><span id="l38.63" class="difflineminus">-            scanstring('{&quot;Extra comma&quot;: true,}', 2, None, True),</span>
<a href="#l38.64"></a><span id="l38.64" class="difflineminus">-            (u'Extra comma', 14))</span>
<a href="#l38.65"></a><span id="l38.65" class="difflineminus">-</span>
<a href="#l38.66"></a><span id="l38.66" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.67"></a><span id="l38.67" class="difflineminus">-            scanstring('{&quot;Extra value after close&quot;: true} &quot;misplaced quoted value&quot;', 2, None, True),</span>
<a href="#l38.68"></a><span id="l38.68" class="difflineminus">-            (u'Extra value after close', 26))</span>
<a href="#l38.69"></a><span id="l38.69" class="difflineminus">-</span>
<a href="#l38.70"></a><span id="l38.70" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.71"></a><span id="l38.71" class="difflineminus">-            scanstring('{&quot;Illegal expression&quot;: 1 + 2}', 2, None, True),</span>
<a href="#l38.72"></a><span id="l38.72" class="difflineminus">-            (u'Illegal expression', 21))</span>
<a href="#l38.73"></a><span id="l38.73" class="difflineminus">-</span>
<a href="#l38.74"></a><span id="l38.74" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.75"></a><span id="l38.75" class="difflineminus">-            scanstring('{&quot;Illegal invocation&quot;: alert()}', 2, None, True),</span>
<a href="#l38.76"></a><span id="l38.76" class="difflineminus">-            (u'Illegal invocation', 21))</span>
<a href="#l38.77"></a><span id="l38.77" class="difflineminus">-</span>
<a href="#l38.78"></a><span id="l38.78" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.79"></a><span id="l38.79" class="difflineminus">-            scanstring('{&quot;Numbers cannot have leading zeroes&quot;: 013}', 2, None, True),</span>
<a href="#l38.80"></a><span id="l38.80" class="difflineminus">-            (u'Numbers cannot have leading zeroes', 37))</span>
<a href="#l38.81"></a><span id="l38.81" class="difflineminus">-</span>
<a href="#l38.82"></a><span id="l38.82" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.83"></a><span id="l38.83" class="difflineminus">-            scanstring('{&quot;Numbers cannot be hex&quot;: 0x14}', 2, None, True),</span>
<a href="#l38.84"></a><span id="l38.84" class="difflineminus">-            (u'Numbers cannot be hex', 24))</span>
<a href="#l38.85"></a><span id="l38.85" class="difflineminus">-</span>
<a href="#l38.86"></a><span id="l38.86" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.87"></a><span id="l38.87" class="difflineminus">-            scanstring('[[[[[[[[[[[[[[[[[[[[&quot;Too deep&quot;]]]]]]]]]]]]]]]]]]]]', 21, None, True),</span>
<a href="#l38.88"></a><span id="l38.88" class="difflineminus">-            (u'Too deep', 30))</span>
<a href="#l38.89"></a><span id="l38.89" class="difflineminus">-</span>
<a href="#l38.90"></a><span id="l38.90" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.91"></a><span id="l38.91" class="difflineminus">-            scanstring('{&quot;Missing colon&quot; null}', 2, None, True),</span>
<a href="#l38.92"></a><span id="l38.92" class="difflineminus">-            (u'Missing colon', 16))</span>
<a href="#l38.93"></a><span id="l38.93" class="difflineminus">-</span>
<a href="#l38.94"></a><span id="l38.94" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.95"></a><span id="l38.95" class="difflineminus">-            scanstring('{&quot;Double colon&quot;:: null}', 2, None, True),</span>
<a href="#l38.96"></a><span id="l38.96" class="difflineminus">-            (u'Double colon', 15))</span>
<a href="#l38.97"></a><span id="l38.97" class="difflineminus">-</span>
<a href="#l38.98"></a><span id="l38.98" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.99"></a><span id="l38.99" class="difflineminus">-            scanstring('{&quot;Comma instead of colon&quot;, null}', 2, None, True),</span>
<a href="#l38.100"></a><span id="l38.100" class="difflineminus">-            (u'Comma instead of colon', 25))</span>
<a href="#l38.101"></a><span id="l38.101" class="difflineminus">-</span>
<a href="#l38.102"></a><span id="l38.102" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.103"></a><span id="l38.103" class="difflineminus">-            scanstring('[&quot;Colon instead of comma&quot;: false]', 2, None, True),</span>
<a href="#l38.104"></a><span id="l38.104" class="difflineminus">-            (u'Colon instead of comma', 25))</span>
<a href="#l38.105"></a><span id="l38.105" class="difflineminus">-</span>
<a href="#l38.106"></a><span id="l38.106" class="difflineminus">-        self.assertEquals(</span>
<a href="#l38.107"></a><span id="l38.107" class="difflineminus">-            scanstring('[&quot;Bad value&quot;, truth]', 2, None, True),</span>
<a href="#l38.108"></a><span id="l38.108" class="difflineminus">-            (u'Bad value', 12))</span>
<a href="#l38.109"></a><span id="l38.109" class="difflineminus">-</span>
<a href="#l38.110"></a><span id="l38.110" class="difflineminus">-    def test_issue3623(self):</span>
<a href="#l38.111"></a><span id="l38.111" class="difflineminus">-        self.assertRaises(ValueError, json.decoder.scanstring, &quot;xxx&quot;, 1,</span>
<a href="#l38.112"></a><span id="l38.112" class="difflineminus">-                          &quot;xxx&quot;)</span>
<a href="#l38.113"></a><span id="l38.113" class="difflineminus">-        self.assertRaises(UnicodeDecodeError,</span>
<a href="#l38.114"></a><span id="l38.114" class="difflineminus">-                          json.encoder.encode_basestring_ascii, &quot;xx\xff&quot;)</span>
<a href="#l38.115"></a><span id="l38.115" class="difflineminus">-</span>
<a href="#l38.116"></a><span id="l38.116" class="difflineminus">-    def test_overflow(self):</span>
<a href="#l38.117"></a><span id="l38.117" class="difflineminus">-        # Python 2.5 does not have maxsize</span>
<a href="#l38.118"></a><span id="l38.118" class="difflineminus">-        maxsize = getattr(sys, 'maxsize', sys.maxint)</span>
<a href="#l38.119"></a><span id="l38.119" class="difflineminus">-        self.assertRaises(OverflowError, json.decoder.scanstring, &quot;xxx&quot;,</span>
<a href="#l38.120"></a><span id="l38.120" class="difflineminus">-                          maxsize + 1)</span>
<a href="#l38.121"></a><span id="l38.121" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l39.1"></a><span id="l39.1">deleted file mode 100644</span>
<a href="#l39.2"></a><span id="l39.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_separators.py</span>
<a href="#l39.3"></a><span id="l39.3" class="difflineplus">+++ /dev/null</span>
<a href="#l39.4"></a><span id="l39.4" class="difflineat">@@ -1,42 +0,0 @@</span>
<a href="#l39.5"></a><span id="l39.5" class="difflineminus">-import textwrap</span>
<a href="#l39.6"></a><span id="l39.6" class="difflineminus">-from unittest import TestCase</span>
<a href="#l39.7"></a><span id="l39.7" class="difflineminus">-</span>
<a href="#l39.8"></a><span id="l39.8" class="difflineminus">-import simplejson as json</span>
<a href="#l39.9"></a><span id="l39.9" class="difflineminus">-</span>
<a href="#l39.10"></a><span id="l39.10" class="difflineminus">-</span>
<a href="#l39.11"></a><span id="l39.11" class="difflineminus">-class TestSeparators(TestCase):</span>
<a href="#l39.12"></a><span id="l39.12" class="difflineminus">-    def test_separators(self):</span>
<a href="#l39.13"></a><span id="l39.13" class="difflineminus">-        h = [['blorpie'], ['whoops'], [], 'd-shtaeou', 'd-nthiouh', 'i-vhbjkhnth',</span>
<a href="#l39.14"></a><span id="l39.14" class="difflineminus">-             {'nifty': 87}, {'field': 'yes', 'morefield': False} ]</span>
<a href="#l39.15"></a><span id="l39.15" class="difflineminus">-</span>
<a href="#l39.16"></a><span id="l39.16" class="difflineminus">-        expect = textwrap.dedent(&quot;&quot;&quot;\</span>
<a href="#l39.17"></a><span id="l39.17" class="difflineminus">-        [</span>
<a href="#l39.18"></a><span id="l39.18" class="difflineminus">-          [</span>
<a href="#l39.19"></a><span id="l39.19" class="difflineminus">-            &quot;blorpie&quot;</span>
<a href="#l39.20"></a><span id="l39.20" class="difflineminus">-          ] ,</span>
<a href="#l39.21"></a><span id="l39.21" class="difflineminus">-          [</span>
<a href="#l39.22"></a><span id="l39.22" class="difflineminus">-            &quot;whoops&quot;</span>
<a href="#l39.23"></a><span id="l39.23" class="difflineminus">-          ] ,</span>
<a href="#l39.24"></a><span id="l39.24" class="difflineminus">-          [] ,</span>
<a href="#l39.25"></a><span id="l39.25" class="difflineminus">-          &quot;d-shtaeou&quot; ,</span>
<a href="#l39.26"></a><span id="l39.26" class="difflineminus">-          &quot;d-nthiouh&quot; ,</span>
<a href="#l39.27"></a><span id="l39.27" class="difflineminus">-          &quot;i-vhbjkhnth&quot; ,</span>
<a href="#l39.28"></a><span id="l39.28" class="difflineminus">-          {</span>
<a href="#l39.29"></a><span id="l39.29" class="difflineminus">-            &quot;nifty&quot; : 87</span>
<a href="#l39.30"></a><span id="l39.30" class="difflineminus">-          } ,</span>
<a href="#l39.31"></a><span id="l39.31" class="difflineminus">-          {</span>
<a href="#l39.32"></a><span id="l39.32" class="difflineminus">-            &quot;field&quot; : &quot;yes&quot; ,</span>
<a href="#l39.33"></a><span id="l39.33" class="difflineminus">-            &quot;morefield&quot; : false</span>
<a href="#l39.34"></a><span id="l39.34" class="difflineminus">-          }</span>
<a href="#l39.35"></a><span id="l39.35" class="difflineminus">-        ]&quot;&quot;&quot;)</span>
<a href="#l39.36"></a><span id="l39.36" class="difflineminus">-</span>
<a href="#l39.37"></a><span id="l39.37" class="difflineminus">-</span>
<a href="#l39.38"></a><span id="l39.38" class="difflineminus">-        d1 = json.dumps(h)</span>
<a href="#l39.39"></a><span id="l39.39" class="difflineminus">-        d2 = json.dumps(h, indent='  ', sort_keys=True, separators=(' ,', ' : '))</span>
<a href="#l39.40"></a><span id="l39.40" class="difflineminus">-</span>
<a href="#l39.41"></a><span id="l39.41" class="difflineminus">-        h1 = json.loads(d1)</span>
<a href="#l39.42"></a><span id="l39.42" class="difflineminus">-        h2 = json.loads(d2)</span>
<a href="#l39.43"></a><span id="l39.43" class="difflineminus">-</span>
<a href="#l39.44"></a><span id="l39.44" class="difflineminus">-        self.assertEquals(h1, h)</span>
<a href="#l39.45"></a><span id="l39.45" class="difflineminus">-        self.assertEquals(h2, h)</span>
<a href="#l39.46"></a><span id="l39.46" class="difflineminus">-        self.assertEquals(d2, expect)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l40.1"></a><span id="l40.1">deleted file mode 100644</span>
<a href="#l40.2"></a><span id="l40.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_speedups.py</span>
<a href="#l40.3"></a><span id="l40.3" class="difflineplus">+++ /dev/null</span>
<a href="#l40.4"></a><span id="l40.4" class="difflineat">@@ -1,20 +0,0 @@</span>
<a href="#l40.5"></a><span id="l40.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l40.6"></a><span id="l40.6" class="difflineminus">-</span>
<a href="#l40.7"></a><span id="l40.7" class="difflineminus">-from simplejson import encoder, scanner</span>
<a href="#l40.8"></a><span id="l40.8" class="difflineminus">-</span>
<a href="#l40.9"></a><span id="l40.9" class="difflineminus">-def has_speedups():</span>
<a href="#l40.10"></a><span id="l40.10" class="difflineminus">-    return encoder.c_make_encoder is not None</span>
<a href="#l40.11"></a><span id="l40.11" class="difflineminus">-</span>
<a href="#l40.12"></a><span id="l40.12" class="difflineminus">-class TestDecode(TestCase):</span>
<a href="#l40.13"></a><span id="l40.13" class="difflineminus">-    def test_make_scanner(self):</span>
<a href="#l40.14"></a><span id="l40.14" class="difflineminus">-        if not has_speedups():</span>
<a href="#l40.15"></a><span id="l40.15" class="difflineminus">-            return</span>
<a href="#l40.16"></a><span id="l40.16" class="difflineminus">-        self.assertRaises(AttributeError, scanner.c_make_scanner, 1)</span>
<a href="#l40.17"></a><span id="l40.17" class="difflineminus">-</span>
<a href="#l40.18"></a><span id="l40.18" class="difflineminus">-    def test_make_encoder(self):</span>
<a href="#l40.19"></a><span id="l40.19" class="difflineminus">-        if not has_speedups():</span>
<a href="#l40.20"></a><span id="l40.20" class="difflineminus">-            return</span>
<a href="#l40.21"></a><span id="l40.21" class="difflineminus">-        self.assertRaises(TypeError, encoder.c_make_encoder,</span>
<a href="#l40.22"></a><span id="l40.22" class="difflineminus">-            None,</span>
<a href="#l40.23"></a><span id="l40.23" class="difflineminus">-            &quot;\xCD\x7D\x3D\x4E\x12\x4C\xF9\x79\xD7\x52\xBA\x82\xF2\x27\x4A\x7D\xA0\xCA\x75&quot;,</span>
<a href="#l40.24"></a><span id="l40.24" class="difflineminus">-            None)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l41.1"></a><span id="l41.1">deleted file mode 100644</span>
<a href="#l41.2"></a><span id="l41.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tests/test_unicode.py</span>
<a href="#l41.3"></a><span id="l41.3" class="difflineplus">+++ /dev/null</span>
<a href="#l41.4"></a><span id="l41.4" class="difflineat">@@ -1,99 +0,0 @@</span>
<a href="#l41.5"></a><span id="l41.5" class="difflineminus">-from unittest import TestCase</span>
<a href="#l41.6"></a><span id="l41.6" class="difflineminus">-</span>
<a href="#l41.7"></a><span id="l41.7" class="difflineminus">-import simplejson as json</span>
<a href="#l41.8"></a><span id="l41.8" class="difflineminus">-</span>
<a href="#l41.9"></a><span id="l41.9" class="difflineminus">-class TestUnicode(TestCase):</span>
<a href="#l41.10"></a><span id="l41.10" class="difflineminus">-    def test_encoding1(self):</span>
<a href="#l41.11"></a><span id="l41.11" class="difflineminus">-        encoder = json.JSONEncoder(encoding='utf-8')</span>
<a href="#l41.12"></a><span id="l41.12" class="difflineminus">-        u = u'\N{GREEK SMALL LETTER ALPHA}\N{GREEK CAPITAL LETTER OMEGA}'</span>
<a href="#l41.13"></a><span id="l41.13" class="difflineminus">-        s = u.encode('utf-8')</span>
<a href="#l41.14"></a><span id="l41.14" class="difflineminus">-        ju = encoder.encode(u)</span>
<a href="#l41.15"></a><span id="l41.15" class="difflineminus">-        js = encoder.encode(s)</span>
<a href="#l41.16"></a><span id="l41.16" class="difflineminus">-        self.assertEquals(ju, js)</span>
<a href="#l41.17"></a><span id="l41.17" class="difflineminus">-</span>
<a href="#l41.18"></a><span id="l41.18" class="difflineminus">-    def test_encoding2(self):</span>
<a href="#l41.19"></a><span id="l41.19" class="difflineminus">-        u = u'\N{GREEK SMALL LETTER ALPHA}\N{GREEK CAPITAL LETTER OMEGA}'</span>
<a href="#l41.20"></a><span id="l41.20" class="difflineminus">-        s = u.encode('utf-8')</span>
<a href="#l41.21"></a><span id="l41.21" class="difflineminus">-        ju = json.dumps(u, encoding='utf-8')</span>
<a href="#l41.22"></a><span id="l41.22" class="difflineminus">-        js = json.dumps(s, encoding='utf-8')</span>
<a href="#l41.23"></a><span id="l41.23" class="difflineminus">-        self.assertEquals(ju, js)</span>
<a href="#l41.24"></a><span id="l41.24" class="difflineminus">-</span>
<a href="#l41.25"></a><span id="l41.25" class="difflineminus">-    def test_encoding3(self):</span>
<a href="#l41.26"></a><span id="l41.26" class="difflineminus">-        u = u'\N{GREEK SMALL LETTER ALPHA}\N{GREEK CAPITAL LETTER OMEGA}'</span>
<a href="#l41.27"></a><span id="l41.27" class="difflineminus">-        j = json.dumps(u)</span>
<a href="#l41.28"></a><span id="l41.28" class="difflineminus">-        self.assertEquals(j, '&quot;\\u03b1\\u03a9&quot;')</span>
<a href="#l41.29"></a><span id="l41.29" class="difflineminus">-</span>
<a href="#l41.30"></a><span id="l41.30" class="difflineminus">-    def test_encoding4(self):</span>
<a href="#l41.31"></a><span id="l41.31" class="difflineminus">-        u = u'\N{GREEK SMALL LETTER ALPHA}\N{GREEK CAPITAL LETTER OMEGA}'</span>
<a href="#l41.32"></a><span id="l41.32" class="difflineminus">-        j = json.dumps([u])</span>
<a href="#l41.33"></a><span id="l41.33" class="difflineminus">-        self.assertEquals(j, '[&quot;\\u03b1\\u03a9&quot;]')</span>
<a href="#l41.34"></a><span id="l41.34" class="difflineminus">-</span>
<a href="#l41.35"></a><span id="l41.35" class="difflineminus">-    def test_encoding5(self):</span>
<a href="#l41.36"></a><span id="l41.36" class="difflineminus">-        u = u'\N{GREEK SMALL LETTER ALPHA}\N{GREEK CAPITAL LETTER OMEGA}'</span>
<a href="#l41.37"></a><span id="l41.37" class="difflineminus">-        j = json.dumps(u, ensure_ascii=False)</span>
<a href="#l41.38"></a><span id="l41.38" class="difflineminus">-        self.assertEquals(j, u'&quot;' + u + u'&quot;')</span>
<a href="#l41.39"></a><span id="l41.39" class="difflineminus">-</span>
<a href="#l41.40"></a><span id="l41.40" class="difflineminus">-    def test_encoding6(self):</span>
<a href="#l41.41"></a><span id="l41.41" class="difflineminus">-        u = u'\N{GREEK SMALL LETTER ALPHA}\N{GREEK CAPITAL LETTER OMEGA}'</span>
<a href="#l41.42"></a><span id="l41.42" class="difflineminus">-        j = json.dumps([u], ensure_ascii=False)</span>
<a href="#l41.43"></a><span id="l41.43" class="difflineminus">-        self.assertEquals(j, u'[&quot;' + u + u'&quot;]')</span>
<a href="#l41.44"></a><span id="l41.44" class="difflineminus">-</span>
<a href="#l41.45"></a><span id="l41.45" class="difflineminus">-    def test_big_unicode_encode(self):</span>
<a href="#l41.46"></a><span id="l41.46" class="difflineminus">-        u = u'\U0001d120'</span>
<a href="#l41.47"></a><span id="l41.47" class="difflineminus">-        self.assertEquals(json.dumps(u), '&quot;\\ud834\\udd20&quot;')</span>
<a href="#l41.48"></a><span id="l41.48" class="difflineminus">-        self.assertEquals(json.dumps(u, ensure_ascii=False), u'&quot;\U0001d120&quot;')</span>
<a href="#l41.49"></a><span id="l41.49" class="difflineminus">-</span>
<a href="#l41.50"></a><span id="l41.50" class="difflineminus">-    def test_big_unicode_decode(self):</span>
<a href="#l41.51"></a><span id="l41.51" class="difflineminus">-        u = u'z\U0001d120x'</span>
<a href="#l41.52"></a><span id="l41.52" class="difflineminus">-        self.assertEquals(json.loads('&quot;' + u + '&quot;'), u)</span>
<a href="#l41.53"></a><span id="l41.53" class="difflineminus">-        self.assertEquals(json.loads('&quot;z\\ud834\\udd20x&quot;'), u)</span>
<a href="#l41.54"></a><span id="l41.54" class="difflineminus">-</span>
<a href="#l41.55"></a><span id="l41.55" class="difflineminus">-    def test_unicode_decode(self):</span>
<a href="#l41.56"></a><span id="l41.56" class="difflineminus">-        for i in range(0, 0xd7ff):</span>
<a href="#l41.57"></a><span id="l41.57" class="difflineminus">-            u = unichr(i)</span>
<a href="#l41.58"></a><span id="l41.58" class="difflineminus">-            #s = '&quot;\\u{0:04x}&quot;'.format(i)</span>
<a href="#l41.59"></a><span id="l41.59" class="difflineminus">-            s = '&quot;\\u%04x&quot;' % (i,)</span>
<a href="#l41.60"></a><span id="l41.60" class="difflineminus">-            self.assertEquals(json.loads(s), u)</span>
<a href="#l41.61"></a><span id="l41.61" class="difflineminus">-</span>
<a href="#l41.62"></a><span id="l41.62" class="difflineminus">-    def test_object_pairs_hook_with_unicode(self):</span>
<a href="#l41.63"></a><span id="l41.63" class="difflineminus">-        s = u'{&quot;xkd&quot;:1, &quot;kcw&quot;:2, &quot;art&quot;:3, &quot;hxm&quot;:4, &quot;qrt&quot;:5, &quot;pad&quot;:6, &quot;hoy&quot;:7}'</span>
<a href="#l41.64"></a><span id="l41.64" class="difflineminus">-        p = [(u&quot;xkd&quot;, 1), (u&quot;kcw&quot;, 2), (u&quot;art&quot;, 3), (u&quot;hxm&quot;, 4),</span>
<a href="#l41.65"></a><span id="l41.65" class="difflineminus">-             (u&quot;qrt&quot;, 5), (u&quot;pad&quot;, 6), (u&quot;hoy&quot;, 7)]</span>
<a href="#l41.66"></a><span id="l41.66" class="difflineminus">-        self.assertEqual(json.loads(s), eval(s))</span>
<a href="#l41.67"></a><span id="l41.67" class="difflineminus">-        self.assertEqual(json.loads(s, object_pairs_hook=lambda x: x), p)</span>
<a href="#l41.68"></a><span id="l41.68" class="difflineminus">-        od = json.loads(s, object_pairs_hook=json.OrderedDict)</span>
<a href="#l41.69"></a><span id="l41.69" class="difflineminus">-        self.assertEqual(od, json.OrderedDict(p))</span>
<a href="#l41.70"></a><span id="l41.70" class="difflineminus">-        self.assertEqual(type(od), json.OrderedDict)</span>
<a href="#l41.71"></a><span id="l41.71" class="difflineminus">-        # the object_pairs_hook takes priority over the object_hook</span>
<a href="#l41.72"></a><span id="l41.72" class="difflineminus">-        self.assertEqual(json.loads(s,</span>
<a href="#l41.73"></a><span id="l41.73" class="difflineminus">-                                    object_pairs_hook=json.OrderedDict,</span>
<a href="#l41.74"></a><span id="l41.74" class="difflineminus">-                                    object_hook=lambda x: None),</span>
<a href="#l41.75"></a><span id="l41.75" class="difflineminus">-                         json.OrderedDict(p))</span>
<a href="#l41.76"></a><span id="l41.76" class="difflineminus">-</span>
<a href="#l41.77"></a><span id="l41.77" class="difflineminus">-</span>
<a href="#l41.78"></a><span id="l41.78" class="difflineminus">-    def test_default_encoding(self):</span>
<a href="#l41.79"></a><span id="l41.79" class="difflineminus">-        self.assertEquals(json.loads(u'{&quot;a&quot;: &quot;\xe9&quot;}'.encode('utf-8')),</span>
<a href="#l41.80"></a><span id="l41.80" class="difflineminus">-            {'a': u'\xe9'})</span>
<a href="#l41.81"></a><span id="l41.81" class="difflineminus">-</span>
<a href="#l41.82"></a><span id="l41.82" class="difflineminus">-    def test_unicode_preservation(self):</span>
<a href="#l41.83"></a><span id="l41.83" class="difflineminus">-        self.assertEquals(type(json.loads(u'&quot;&quot;')), unicode)</span>
<a href="#l41.84"></a><span id="l41.84" class="difflineminus">-        self.assertEquals(type(json.loads(u'&quot;a&quot;')), unicode)</span>
<a href="#l41.85"></a><span id="l41.85" class="difflineminus">-        self.assertEquals(type(json.loads(u'[&quot;a&quot;]')[0]), unicode)</span>
<a href="#l41.86"></a><span id="l41.86" class="difflineminus">-</span>
<a href="#l41.87"></a><span id="l41.87" class="difflineminus">-    def test_ensure_ascii_false_returns_unicode(self):</span>
<a href="#l41.88"></a><span id="l41.88" class="difflineminus">-        # http://code.google.com/p/simplejson/issues/detail?id=48</span>
<a href="#l41.89"></a><span id="l41.89" class="difflineminus">-        self.assertEquals(type(json.dumps([], ensure_ascii=False)), unicode)</span>
<a href="#l41.90"></a><span id="l41.90" class="difflineminus">-        self.assertEquals(type(json.dumps(0, ensure_ascii=False)), unicode)</span>
<a href="#l41.91"></a><span id="l41.91" class="difflineminus">-        self.assertEquals(type(json.dumps({}, ensure_ascii=False)), unicode)</span>
<a href="#l41.92"></a><span id="l41.92" class="difflineminus">-        self.assertEquals(type(json.dumps(&quot;&quot;, ensure_ascii=False)), unicode)</span>
<a href="#l41.93"></a><span id="l41.93" class="difflineminus">-</span>
<a href="#l41.94"></a><span id="l41.94" class="difflineminus">-    def test_ensure_ascii_false_bytestring_encoding(self):</span>
<a href="#l41.95"></a><span id="l41.95" class="difflineminus">-        # http://code.google.com/p/simplejson/issues/detail?id=48</span>
<a href="#l41.96"></a><span id="l41.96" class="difflineminus">-        doc1 = {u'quux': 'Arr\xc3\xaat sur images'}</span>
<a href="#l41.97"></a><span id="l41.97" class="difflineminus">-        doc2 = {u'quux': u'Arr\xeat sur images'}</span>
<a href="#l41.98"></a><span id="l41.98" class="difflineminus">-        doc_ascii = '{&quot;quux&quot;: &quot;Arr\\u00eat sur images&quot;}'</span>
<a href="#l41.99"></a><span id="l41.99" class="difflineminus">-        doc_unicode = u'{&quot;quux&quot;: &quot;Arr\xeat sur images&quot;}'</span>
<a href="#l41.100"></a><span id="l41.100" class="difflineminus">-        self.assertEquals(json.dumps(doc1), doc_ascii)</span>
<a href="#l41.101"></a><span id="l41.101" class="difflineminus">-        self.assertEquals(json.dumps(doc2), doc_ascii)</span>
<a href="#l41.102"></a><span id="l41.102" class="difflineminus">-        self.assertEquals(json.dumps(doc1, ensure_ascii=False), doc_unicode)</span>
<a href="#l41.103"></a><span id="l41.103" class="difflineminus">-        self.assertEquals(json.dumps(doc2, ensure_ascii=False), doc_unicode)</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l42.1"></a><span id="l42.1">deleted file mode 100644</span>
<a href="#l42.2"></a><span id="l42.2" class="difflineminus">--- a/mail/test/resources/simplejson-2.1.6/simplejson/tool.py</span>
<a href="#l42.3"></a><span id="l42.3" class="difflineplus">+++ /dev/null</span>
<a href="#l42.4"></a><span id="l42.4" class="difflineat">@@ -1,39 +0,0 @@</span>
<a href="#l42.5"></a><span id="l42.5" class="difflineminus">-r&quot;&quot;&quot;Command-line tool to validate and pretty-print JSON</span>
<a href="#l42.6"></a><span id="l42.6" class="difflineminus">-</span>
<a href="#l42.7"></a><span id="l42.7" class="difflineminus">-Usage::</span>
<a href="#l42.8"></a><span id="l42.8" class="difflineminus">-</span>
<a href="#l42.9"></a><span id="l42.9" class="difflineminus">-    $ echo '{&quot;json&quot;:&quot;obj&quot;}' | python -m simplejson.tool</span>
<a href="#l42.10"></a><span id="l42.10" class="difflineminus">-    {</span>
<a href="#l42.11"></a><span id="l42.11" class="difflineminus">-        &quot;json&quot;: &quot;obj&quot;</span>
<a href="#l42.12"></a><span id="l42.12" class="difflineminus">-    }</span>
<a href="#l42.13"></a><span id="l42.13" class="difflineminus">-    $ echo '{ 1.2:3.4}' | python -m simplejson.tool</span>
<a href="#l42.14"></a><span id="l42.14" class="difflineminus">-    Expecting property name: line 1 column 2 (char 2)</span>
<a href="#l42.15"></a><span id="l42.15" class="difflineminus">-</span>
<a href="#l42.16"></a><span id="l42.16" class="difflineminus">-&quot;&quot;&quot;</span>
<a href="#l42.17"></a><span id="l42.17" class="difflineminus">-import sys</span>
<a href="#l42.18"></a><span id="l42.18" class="difflineminus">-import simplejson as json</span>
<a href="#l42.19"></a><span id="l42.19" class="difflineminus">-</span>
<a href="#l42.20"></a><span id="l42.20" class="difflineminus">-def main():</span>
<a href="#l42.21"></a><span id="l42.21" class="difflineminus">-    if len(sys.argv) == 1:</span>
<a href="#l42.22"></a><span id="l42.22" class="difflineminus">-        infile = sys.stdin</span>
<a href="#l42.23"></a><span id="l42.23" class="difflineminus">-        outfile = sys.stdout</span>
<a href="#l42.24"></a><span id="l42.24" class="difflineminus">-    elif len(sys.argv) == 2:</span>
<a href="#l42.25"></a><span id="l42.25" class="difflineminus">-        infile = open(sys.argv[1], 'rb')</span>
<a href="#l42.26"></a><span id="l42.26" class="difflineminus">-        outfile = sys.stdout</span>
<a href="#l42.27"></a><span id="l42.27" class="difflineminus">-    elif len(sys.argv) == 3:</span>
<a href="#l42.28"></a><span id="l42.28" class="difflineminus">-        infile = open(sys.argv[1], 'rb')</span>
<a href="#l42.29"></a><span id="l42.29" class="difflineminus">-        outfile = open(sys.argv[2], 'wb')</span>
<a href="#l42.30"></a><span id="l42.30" class="difflineminus">-    else:</span>
<a href="#l42.31"></a><span id="l42.31" class="difflineminus">-        raise SystemExit(sys.argv[0] + &quot; [infile [outfile]]&quot;)</span>
<a href="#l42.32"></a><span id="l42.32" class="difflineminus">-    try:</span>
<a href="#l42.33"></a><span id="l42.33" class="difflineminus">-        obj = json.load(infile,</span>
<a href="#l42.34"></a><span id="l42.34" class="difflineminus">-                        object_pairs_hook=json.OrderedDict,</span>
<a href="#l42.35"></a><span id="l42.35" class="difflineminus">-                        use_decimal=True)</span>
<a href="#l42.36"></a><span id="l42.36" class="difflineminus">-    except ValueError, e:</span>
<a href="#l42.37"></a><span id="l42.37" class="difflineminus">-        raise SystemExit(e)</span>
<a href="#l42.38"></a><span id="l42.38" class="difflineminus">-    json.dump(obj, outfile, sort_keys=True, indent='    ', use_decimal=True)</span>
<a href="#l42.39"></a><span id="l42.39" class="difflineminus">-    outfile.write('\n')</span>
<a href="#l42.40"></a><span id="l42.40" class="difflineminus">-</span>
<a href="#l42.41"></a><span id="l42.41" class="difflineminus">-</span>
<a href="#l42.42"></a><span id="l42.42" class="difflineminus">-if __name__ == '__main__':</span>
<a href="#l42.43"></a><span id="l42.43" class="difflineminus">-    main()</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

