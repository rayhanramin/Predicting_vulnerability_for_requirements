<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 17171:7254179a9d7d8fcb6b6847e31f82847fc309c69c</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 7254179a9d7d8fcb6b6847e31f82847fc309c69c" />
<meta property="og:url" content="/comm-central/rev/7254179a9d7d8fcb6b6847e31f82847fc309c69c" />
<meta property="og:description" content="Bug 1099430, part 1: Proxy the config/* makefiles to mozilla-central, r=glandium." />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 7254179a9d7d8fcb6b6847e31f82847fc309c69c 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/7254179a9d7d8fcb6b6847e31f82847fc309c69c">shortlog</a> |
<a href="/comm-central/log/7254179a9d7d8fcb6b6847e31f82847fc309c69c">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/7254179a9d7d8fcb6b6847e31f82847fc309c69c">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/7254179a9d7d8fcb6b6847e31f82847fc309c69c">files</a> |
changeset |
<a href="/comm-central/raw-rev/7254179a9d7d8fcb6b6847e31f82847fc309c69c">raw</a>  | <a href="/comm-central/archive/7254179a9d7d8fcb6b6847e31f82847fc309c69c.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1099430">Bug 1099430</a>, part 1: Proxy the config/* makefiles to mozilla-central, r=glandium.
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#74;&#111;&#115;&#104;&#117;&#97;&#32;&#67;&#114;&#97;&#110;&#109;&#101;&#114;&#32;&#60;&#80;&#105;&#100;&#103;&#101;&#111;&#116;&#49;&#56;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;&#62;</td></tr>
<tr><td></td><td class="date age">Fri, 05 Dec 2014 11:38:29 -0600</td></tr>

<tr>
 <td>changeset 17171</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/7254179a9d7d8fcb6b6847e31f82847fc309c69c">7254179a9d7d8fcb6b6847e31f82847fc309c69c</a></td>
</tr>



<tr>
<td>parent 17170</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/cd681dd9d73d06eb687aefa8230575c5fd7ff96c">cd681dd9d73d06eb687aefa8230575c5fd7ff96c</a>
</td>
</tr>

<tr>
<td>child 17172</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be">67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=7254179a9d7d8fcb6b6847e31f82847fc309c69c">10625</a></td></tr>
<tr><td>push user</td><td>Pidgeot18@gmail.com</td></tr>
<tr><td>push date</td><td class="date age">Fri, 05 Dec 2014 17:40:22 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@67fbc8c9e40a [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be&newProject=comm-central&newRevision=cd681dd9d73d06eb687aefa8230575c5fd7ff96c&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be&newProject=comm-central&newRevision=cd681dd9d73d06eb687aefa8230575c5fd7ff96c&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=67fbc8c9e40a0504a92ec5c712b0afbf3dd9f6be&newProject=comm-central&newRevision=cd681dd9d73d06eb687aefa8230575c5fd7ff96c&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28glandium%29&revcount=50">glandium</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1099430">1099430</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1099430">Bug 1099430</a>, part 1: Proxy the config/* makefiles to mozilla-central, r=glandium.

To avoid screwing up the WIN_TOP_SRC changes (see part äºŒ), we need to drop this
text from comm-central. We cannot eliminate these files altogether, since the
initial import needs to include $(topsrcdir) instead of $(MOZILLA_DIR) to grab
the MOZILLA_DIR declaration in baseconfig.mk.</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/baseconfig.mk">config/baseconfig.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/baseconfig.mk">file</a> |
<a href="/comm-central/annotate/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/baseconfig.mk">annotate</a> |
<a href="/comm-central/diff/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/baseconfig.mk">diff</a> |
<a href="/comm-central/comparison/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/baseconfig.mk">comparison</a> |
<a href="/comm-central/log/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/baseconfig.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/config.mk">config/config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/config.mk">file</a> |
<a href="/comm-central/annotate/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/config.mk">annotate</a> |
<a href="/comm-central/diff/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/config.mk">diff</a> |
<a href="/comm-central/comparison/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/config.mk">comparison</a> |
<a href="/comm-central/log/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/config.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/rules.mk">config/rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/rules.mk">file</a> |
<a href="/comm-central/annotate/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/rules.mk">annotate</a> |
<a href="/comm-central/diff/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/rules.mk">diff</a> |
<a href="/comm-central/comparison/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/rules.mk">comparison</a> |
<a href="/comm-central/log/7254179a9d7d8fcb6b6847e31f82847fc309c69c/config/rules.mk">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/baseconfig.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/baseconfig.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -9,13 +9,8 @@</span>
<a href="#l1.4"></a><span id="l1.4"> # parent of that directory therefore gets us the topsrcdir of comm-central,</span>
<a href="#l1.5"></a><span id="l1.5"> # whence we get the mozilla directory to run the &quot;real&quot; baseconfig.mk logic.</span>
<a href="#l1.6"></a><span id="l1.6"> ifndef INCLUDED_AUTOCONF_MK</span>
<a href="#l1.7"></a><span id="l1.7"> topsrcdir := $(dir $(firstword $(MAKEFILE_LIST)))..</span>
<a href="#l1.8"></a><span id="l1.8"> endif</span>
<a href="#l1.9"></a><span id="l1.9"> </span>
<a href="#l1.10"></a><span id="l1.10"> MOZILLA_SRCDIR = $(topsrcdir)/mozilla</span>
<a href="#l1.11"></a><span id="l1.11"> include $(MOZILLA_SRCDIR)/config/baseconfig.mk</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineminus">-# WIN_TOP_SRC is converted by config.mk to mozilla-central, but this needs to be comm-central.</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineminus">-ifdef WIN_TOP_SRC</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineminus">-WIN_TOP_SRC := $(patsubst %/mozilla,%,$(WIN_TOP_SRC))</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineminus">-endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/config/config.mk</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/config/config.mk</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -1,714 +1,7 @@</span>
<a href="#l2.4"></a><span id="l2.4"> #</span>
<a href="#l2.5"></a><span id="l2.5"> # This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l2.6"></a><span id="l2.6"> # License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l2.7"></a><span id="l2.7"> # file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l2.8"></a><span id="l2.8"> </span>
<a href="#l2.9"></a><span id="l2.9" class="difflineminus">-#</span>
<a href="#l2.10"></a><span id="l2.10" class="difflineminus">-# config.mk</span>
<a href="#l2.11"></a><span id="l2.11" class="difflineminus">-#</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-# Determines the platform and builds the macros needed to load the</span>
<a href="#l2.13"></a><span id="l2.13" class="difflineminus">-# appropriate platform-specific .mk file, then defines all (most?)</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-# of the generic macros.</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-#</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-</span>
<a href="#l2.17"></a><span id="l2.17" class="difflineminus">-# Define an include-at-most-once flag</span>
<a href="#l2.18"></a><span id="l2.18" class="difflineminus">-ifdef INCLUDED_CONFIG_MK</span>
<a href="#l2.19"></a><span id="l2.19" class="difflineminus">-$(error Do not include config.mk twice!)</span>
<a href="#l2.20"></a><span id="l2.20" class="difflineminus">-endif</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineminus">-INCLUDED_CONFIG_MK = 1</span>
<a href="#l2.22"></a><span id="l2.22" class="difflineminus">-</span>
<a href="#l2.23"></a><span id="l2.23" class="difflineminus">-EXIT_ON_ERROR = set -e; # Shell loops continue past errors without this.</span>
<a href="#l2.24"></a><span id="l2.24" class="difflineminus">-</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineminus">-ifndef topsrcdir</span>
<a href="#l2.26"></a><span id="l2.26" class="difflineminus">-topsrcdir	= $(DEPTH)</span>
<a href="#l2.27"></a><span id="l2.27" class="difflineminus">-endif</span>
<a href="#l2.28"></a><span id="l2.28" class="difflineminus">-</span>
<a href="#l2.29"></a><span id="l2.29" class="difflineminus">-ifndef INCLUDED_AUTOCONF_MK</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-include $(DEPTH)/config/autoconf.mk</span>
<a href="#l2.31"></a><span id="l2.31" class="difflineminus">-endif</span>
<a href="#l2.32"></a><span id="l2.32" class="difflineminus">-</span>
<a href="#l2.33"></a><span id="l2.33" class="difflineminus">--include $(DEPTH)/.mozconfig.mk</span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineminus">-ifndef EXTERNALLY_MANAGED_MAKE_FILE</span>
<a href="#l2.36"></a><span id="l2.36" class="difflineminus">-# Using $(firstword) may not be perfect. But it should be good enough for most</span>
<a href="#l2.37"></a><span id="l2.37" class="difflineminus">-# scenarios.</span>
<a href="#l2.38"></a><span id="l2.38" class="difflineminus">-_current_makefile = $(CURDIR)/$(firstword $(MAKEFILE_LIST))</span>
<a href="#l2.39"></a><span id="l2.39" class="difflineminus">-</span>
<a href="#l2.40"></a><span id="l2.40" class="difflineminus">-# Import the automatically generated backend file. If this file doesn't exist,</span>
<a href="#l2.41"></a><span id="l2.41" class="difflineminus">-# the backend hasn't been properly configured. We want this to be a fatal</span>
<a href="#l2.42"></a><span id="l2.42" class="difflineminus">-# error, hence not using &quot;-include&quot;.</span>
<a href="#l2.43"></a><span id="l2.43" class="difflineminus">-ifndef STANDALONE_MAKEFILE</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineminus">-GLOBAL_DEPS += backend.mk</span>
<a href="#l2.45"></a><span id="l2.45" class="difflineminus">-include backend.mk</span>
<a href="#l2.46"></a><span id="l2.46" class="difflineminus">-endif</span>
<a href="#l2.47"></a><span id="l2.47" class="difflineminus">-</span>
<a href="#l2.48"></a><span id="l2.48" class="difflineminus">-# Freeze the values specified by moz.build to catch them if they fail.</span>
<a href="#l2.49"></a><span id="l2.49" class="difflineminus">-</span>
<a href="#l2.50"></a><span id="l2.50" class="difflineminus">-$(foreach var,$(_MOZBUILD_EXTERNAL_VARIABLES),$(eval $(var)_FROZEN := '$($(var))'))</span>
<a href="#l2.51"></a><span id="l2.51" class="difflineminus">-$(foreach var,$(_DEPRECATED_VARIABLES),$(eval $(var)_FROZEN := '$($(var))'))</span>
<a href="#l2.52"></a><span id="l2.52" class="difflineminus">-</span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-CHECK_MOZBUILD_VARIABLES = $(foreach var,$(_MOZBUILD_EXTERNAL_VARIABLES), \</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineminus">-  $(if $(subst $($(var)_FROZEN),,'$($(var))'), \</span>
<a href="#l2.55"></a><span id="l2.55" class="difflineminus">-	  $(error Variable $(var) is defined in $(_current_makefile). It should only be defined in moz.build files),\</span>
<a href="#l2.56"></a><span id="l2.56" class="difflineminus">-  )) $(foreach var,$(_DEPRECATED_VARIABLES), \</span>
<a href="#l2.57"></a><span id="l2.57" class="difflineminus">-	$(if $(subst $($(var)_FROZEN),,'$($(var))'), \</span>
<a href="#l2.58"></a><span id="l2.58" class="difflineminus">-    $(error Variable $(var) is defined in $(_current_makefile). This variable has been deprecated. It does nothing. It must be removed in order to build),\</span>
<a href="#l2.59"></a><span id="l2.59" class="difflineminus">-    ))</span>
<a href="#l2.60"></a><span id="l2.60" class="difflineminus">-</span>
<a href="#l2.61"></a><span id="l2.61" class="difflineminus">-endif</span>
<a href="#l2.62"></a><span id="l2.62" class="difflineminus">-</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineminus">-space = $(NULL) $(NULL)</span>
<a href="#l2.64"></a><span id="l2.64" class="difflineminus">-</span>
<a href="#l2.65"></a><span id="l2.65" class="difflineminus">-# Include defs.mk files that can be found in $(srcdir)/$(DEPTH),</span>
<a href="#l2.66"></a><span id="l2.66" class="difflineminus">-# $(srcdir)/$(DEPTH-1), $(srcdir)/$(DEPTH-2), etc., and $(srcdir)</span>
<a href="#l2.67"></a><span id="l2.67" class="difflineminus">-# where $(DEPTH-1) is one level less of depth, $(DEPTH-2), two, etc.</span>
<a href="#l2.68"></a><span id="l2.68" class="difflineminus">-# i.e. for DEPTH=../../.., DEPTH-1 is ../.. and DEPTH-2 is ..</span>
<a href="#l2.69"></a><span id="l2.69" class="difflineminus">-# These defs.mk files are used to define variables in a directory</span>
<a href="#l2.70"></a><span id="l2.70" class="difflineminus">-# and all its subdirectories, recursively.</span>
<a href="#l2.71"></a><span id="l2.71" class="difflineminus">-__depth := $(subst /, ,$(DEPTH))</span>
<a href="#l2.72"></a><span id="l2.72" class="difflineminus">-ifeq (.,$(__depth))</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineminus">-__depth :=</span>
<a href="#l2.74"></a><span id="l2.74" class="difflineminus">-endif</span>
<a href="#l2.75"></a><span id="l2.75" class="difflineminus">-$(foreach __d,$(__depth) .,$(eval __depth = $(wordlist 2,$(words $(__depth)),$(__depth))$(eval -include $(subst $(space),/,$(strip $(srcdir) $(__depth) defs.mk)))))</span>
<a href="#l2.76"></a><span id="l2.76" class="difflineminus">-</span>
<a href="#l2.77"></a><span id="l2.77" class="difflineminus">-COMMA = ,</span>
<a href="#l2.78"></a><span id="l2.78" class="difflineminus">-</span>
<a href="#l2.79"></a><span id="l2.79" class="difflineminus">-# Sanity check some variables</span>
<a href="#l2.80"></a><span id="l2.80" class="difflineminus">-CHECK_VARS := \</span>
<a href="#l2.81"></a><span id="l2.81" class="difflineminus">- XPI_NAME \</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineminus">- LIBRARY_NAME \</span>
<a href="#l2.83"></a><span id="l2.83" class="difflineminus">- MODULE \</span>
<a href="#l2.84"></a><span id="l2.84" class="difflineminus">- DEPTH \</span>
<a href="#l2.85"></a><span id="l2.85" class="difflineminus">- SHORT_LIBNAME \</span>
<a href="#l2.86"></a><span id="l2.86" class="difflineminus">- XPI_PKGNAME \</span>
<a href="#l2.87"></a><span id="l2.87" class="difflineminus">- INSTALL_EXTENSION_ID \</span>
<a href="#l2.88"></a><span id="l2.88" class="difflineminus">- SHARED_LIBRARY_NAME \</span>
<a href="#l2.89"></a><span id="l2.89" class="difflineminus">- STATIC_LIBRARY_NAME \</span>
<a href="#l2.90"></a><span id="l2.90" class="difflineminus">- $(NULL)</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineminus">-# checks for internal spaces or trailing spaces in the variable</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-# named by $x</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-check-variable = $(if $(filter-out 0 1,$(words $($(x))z)),$(error Spaces are not allowed in $(x)))</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-$(foreach x,$(CHECK_VARS),$(check-variable))</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineminus">-</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineminus">-RM = rm -f</span>
<a href="#l2.99"></a><span id="l2.99" class="difflineminus">-</span>
<a href="#l2.100"></a><span id="l2.100" class="difflineminus">-ifndef INCLUDED_FUNCTIONS_MK</span>
<a href="#l2.101"></a><span id="l2.101" class="difflineminus">-include $(MOZILLA_SRCDIR)/config/makefiles/functions.mk</span>
<a href="#l2.102"></a><span id="l2.102" class="difflineminus">-endif</span>
<a href="#l2.103"></a><span id="l2.103" class="difflineminus">-</span>
<a href="#l2.104"></a><span id="l2.104" class="difflineminus">-# FINAL_TARGET specifies the location into which we copy end-user-shipped</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineminus">-# build products (typelibs, components, chrome). It may already be specified by</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineminus">-# a moz.build file.</span>
<a href="#l2.107"></a><span id="l2.107" class="difflineminus">-#</span>
<a href="#l2.108"></a><span id="l2.108" class="difflineminus">-# If XPI_NAME is set, the files will be shipped to $(DIST)/xpi-stage/$(XPI_NAME)</span>
<a href="#l2.109"></a><span id="l2.109" class="difflineminus">-# instead of $(DIST)/bin. In both cases, if DIST_SUBDIR is set, the files will be</span>
<a href="#l2.110"></a><span id="l2.110" class="difflineminus">-# shipped to a $(DIST_SUBDIR) subdirectory.</span>
<a href="#l2.111"></a><span id="l2.111" class="difflineminus">-FINAL_TARGET ?= $(if $(XPI_NAME),$(DIST)/xpi-stage/$(XPI_NAME),$(DIST)/bin)$(DIST_SUBDIR:%=/%)</span>
<a href="#l2.112"></a><span id="l2.112" class="difflineminus">-# Override the stored value for the check to make sure that the variable is not</span>
<a href="#l2.113"></a><span id="l2.113" class="difflineminus">-# redefined in the Makefile.in value.</span>
<a href="#l2.114"></a><span id="l2.114" class="difflineminus">-FINAL_TARGET_FROZEN := '$(FINAL_TARGET)'</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineminus">-</span>
<a href="#l2.116"></a><span id="l2.116" class="difflineminus">-ifdef XPI_NAME</span>
<a href="#l2.117"></a><span id="l2.117" class="difflineminus">-DEFINES += -DXPI_NAME=$(XPI_NAME)</span>
<a href="#l2.118"></a><span id="l2.118" class="difflineminus">-endif</span>
<a href="#l2.119"></a><span id="l2.119" class="difflineminus">-</span>
<a href="#l2.120"></a><span id="l2.120" class="difflineminus">-# The VERSION_NUMBER is suffixed onto the end of the DLLs we ship.</span>
<a href="#l2.121"></a><span id="l2.121" class="difflineminus">-VERSION_NUMBER		= 50</span>
<a href="#l2.122"></a><span id="l2.122" class="difflineminus">-</span>
<a href="#l2.123"></a><span id="l2.123" class="difflineminus">-ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l2.124"></a><span id="l2.124" class="difflineminus">-win_srcdir      := $(subst $(topsrcdir),$(WIN_TOP_SRC),$(srcdir))</span>
<a href="#l2.125"></a><span id="l2.125" class="difflineminus">-BUILD_TOOLS     = $(WIN_TOP_SRC)/mozilla/build/unix</span>
<a href="#l2.126"></a><span id="l2.126" class="difflineminus">-else</span>
<a href="#l2.127"></a><span id="l2.127" class="difflineminus">-win_srcdir      := $(srcdir)</span>
<a href="#l2.128"></a><span id="l2.128" class="difflineminus">-BUILD_TOOLS     = $(MOZILLA_SRCDIR)/build/unix</span>
<a href="#l2.129"></a><span id="l2.129" class="difflineminus">-endif</span>
<a href="#l2.130"></a><span id="l2.130" class="difflineminus">-</span>
<a href="#l2.131"></a><span id="l2.131" class="difflineminus">-CONFIG_TOOLS	= $(MOZ_BUILD_ROOT)/config</span>
<a href="#l2.132"></a><span id="l2.132" class="difflineminus">-AUTOCONF_TOOLS	= $(MOZILLA_SRCDIR)/build/autoconf</span>
<a href="#l2.133"></a><span id="l2.133" class="difflineminus">-</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineminus">-#</span>
<a href="#l2.135"></a><span id="l2.135" class="difflineminus">-# Strip off the excessively long version numbers on these platforms,</span>
<a href="#l2.136"></a><span id="l2.136" class="difflineminus">-# but save the version to allow multiple versions of the same base</span>
<a href="#l2.137"></a><span id="l2.137" class="difflineminus">-# platform to be built in the same tree.</span>
<a href="#l2.138"></a><span id="l2.138" class="difflineminus">-#</span>
<a href="#l2.139"></a><span id="l2.139" class="difflineminus">-ifneq (,$(filter FreeBSD HP-UX Linux NetBSD OpenBSD SunOS,$(OS_ARCH)))</span>
<a href="#l2.140"></a><span id="l2.140" class="difflineminus">-OS_RELEASE	:= $(basename $(OS_RELEASE))</span>
<a href="#l2.141"></a><span id="l2.141" class="difflineminus">-</span>
<a href="#l2.142"></a><span id="l2.142" class="difflineminus">-# Allow the user to ignore the OS_VERSION, which is usually irrelevant.</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineminus">-ifdef WANT_MOZILLA_CONFIG_OS_VERSION</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineminus">-OS_VERS		:= $(suffix $(OS_RELEASE))</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineminus">-OS_VERSION	:= $(shell echo $(OS_VERS) | sed 's/-.*//')</span>
<a href="#l2.146"></a><span id="l2.146" class="difflineminus">-endif</span>
<a href="#l2.147"></a><span id="l2.147" class="difflineminus">-</span>
<a href="#l2.148"></a><span id="l2.148" class="difflineminus">-endif</span>
<a href="#l2.149"></a><span id="l2.149" class="difflineminus">-</span>
<a href="#l2.150"></a><span id="l2.150" class="difflineminus">-OS_CONFIG	:= $(OS_ARCH)$(OS_RELEASE)</span>
<a href="#l2.151"></a><span id="l2.151" class="difflineminus">-</span>
<a href="#l2.152"></a><span id="l2.152" class="difflineminus">-FINAL_LINK_LIBS = $(DEPTH)/config/final-link-libs</span>
<a href="#l2.153"></a><span id="l2.153" class="difflineminus">-FINAL_LINK_COMPS = $(DEPTH)/config/final-link-comps</span>
<a href="#l2.154"></a><span id="l2.154" class="difflineminus">-FINAL_LINK_COMP_NAMES = $(DEPTH)/config/final-link-comp-names</span>
<a href="#l2.155"></a><span id="l2.155" class="difflineminus">-</span>
<a href="#l2.156"></a><span id="l2.156" class="difflineminus">-ifdef _MSC_VER</span>
<a href="#l2.157"></a><span id="l2.157" class="difflineminus">-CC_WRAPPER ?= $(call py_action,cl)</span>
<a href="#l2.158"></a><span id="l2.158" class="difflineminus">-CXX_WRAPPER ?= $(call py_action,cl)</span>
<a href="#l2.159"></a><span id="l2.159" class="difflineminus">-endif # _MSC_VER</span>
<a href="#l2.160"></a><span id="l2.160" class="difflineminus">-</span>
<a href="#l2.161"></a><span id="l2.161" class="difflineminus">-CC := $(CC_WRAPPER) $(CC)</span>
<a href="#l2.162"></a><span id="l2.162" class="difflineminus">-CXX := $(CXX_WRAPPER) $(CXX)</span>
<a href="#l2.163"></a><span id="l2.163" class="difflineminus">-MKDIR ?= mkdir</span>
<a href="#l2.164"></a><span id="l2.164" class="difflineminus">-SLEEP ?= sleep</span>
<a href="#l2.165"></a><span id="l2.165" class="difflineminus">-TOUCH ?= touch</span>
<a href="#l2.166"></a><span id="l2.166" class="difflineminus">-</span>
<a href="#l2.167"></a><span id="l2.167" class="difflineminus">-ifdef .PYMAKE</span>
<a href="#l2.168"></a><span id="l2.168" class="difflineminus">-PYCOMMANDPATH += $(PYTHON_SITE_PACKAGES)</span>
<a href="#l2.169"></a><span id="l2.169" class="difflineminus">-endif</span>
<a href="#l2.170"></a><span id="l2.170" class="difflineminus">-</span>
<a href="#l2.171"></a><span id="l2.171" class="difflineminus">-# determine debug-related options</span>
<a href="#l2.172"></a><span id="l2.172" class="difflineminus">-_DEBUG_CFLAGS :=</span>
<a href="#l2.173"></a><span id="l2.173" class="difflineminus">-_DEBUG_LDFLAGS :=</span>
<a href="#l2.174"></a><span id="l2.174" class="difflineminus">-</span>
<a href="#l2.175"></a><span id="l2.175" class="difflineminus">-ifdef MOZ_DEBUG</span>
<a href="#l2.176"></a><span id="l2.176" class="difflineminus">-  _DEBUG_CFLAGS += $(MOZ_DEBUG_ENABLE_DEFS) $(MOZ_DEBUG_FLAGS)</span>
<a href="#l2.177"></a><span id="l2.177" class="difflineminus">-  _DEBUG_LDFLAGS += $(MOZ_DEBUG_LDFLAGS)</span>
<a href="#l2.178"></a><span id="l2.178" class="difflineminus">-  XULPPFLAGS += $(MOZ_DEBUG_ENABLE_DEFS)</span>
<a href="#l2.179"></a><span id="l2.179" class="difflineminus">-else</span>
<a href="#l2.180"></a><span id="l2.180" class="difflineminus">-  _DEBUG_CFLAGS += $(MOZ_DEBUG_DISABLE_DEFS)</span>
<a href="#l2.181"></a><span id="l2.181" class="difflineminus">-  XULPPFLAGS += $(MOZ_DEBUG_DISABLE_DEFS)</span>
<a href="#l2.182"></a><span id="l2.182" class="difflineminus">-  ifdef MOZ_DEBUG_SYMBOLS</span>
<a href="#l2.183"></a><span id="l2.183" class="difflineminus">-    _DEBUG_CFLAGS += $(MOZ_DEBUG_FLAGS)</span>
<a href="#l2.184"></a><span id="l2.184" class="difflineminus">-    _DEBUG_LDFLAGS += $(MOZ_DEBUG_LDFLAGS)</span>
<a href="#l2.185"></a><span id="l2.185" class="difflineminus">-  endif</span>
<a href="#l2.186"></a><span id="l2.186" class="difflineminus">-endif</span>
<a href="#l2.187"></a><span id="l2.187" class="difflineminus">-</span>
<a href="#l2.188"></a><span id="l2.188" class="difflineminus">-OS_CFLAGS += $(_DEBUG_CFLAGS)</span>
<a href="#l2.189"></a><span id="l2.189" class="difflineminus">-OS_CXXFLAGS += $(_DEBUG_CFLAGS)</span>
<a href="#l2.190"></a><span id="l2.190" class="difflineminus">-OS_LDFLAGS += $(_DEBUG_LDFLAGS)</span>
<a href="#l2.191"></a><span id="l2.191" class="difflineminus">-</span>
<a href="#l2.192"></a><span id="l2.192" class="difflineminus">-# XXX: What does this? Bug 482434 filed for better explanation.</span>
<a href="#l2.193"></a><span id="l2.193" class="difflineminus">-ifeq ($(OS_ARCH)_$(GNU_CC),WINNT_)</span>
<a href="#l2.194"></a><span id="l2.194" class="difflineminus">-ifdef MOZ_DEBUG</span>
<a href="#l2.195"></a><span id="l2.195" class="difflineminus">-ifneq (,$(MOZ_BROWSE_INFO)$(MOZ_BSCFILE))</span>
<a href="#l2.196"></a><span id="l2.196" class="difflineminus">-OS_CFLAGS += -FR</span>
<a href="#l2.197"></a><span id="l2.197" class="difflineminus">-OS_CXXFLAGS += -FR</span>
<a href="#l2.198"></a><span id="l2.198" class="difflineminus">-endif</span>
<a href="#l2.199"></a><span id="l2.199" class="difflineminus">-else # ! MOZ_DEBUG</span>
<a href="#l2.200"></a><span id="l2.200" class="difflineminus">-</span>
<a href="#l2.201"></a><span id="l2.201" class="difflineminus">-# MOZ_DEBUG_SYMBOLS generates debug symbols in separate PDB files.</span>
<a href="#l2.202"></a><span id="l2.202" class="difflineminus">-# Used for generating an optimized build with debugging symbols.</span>
<a href="#l2.203"></a><span id="l2.203" class="difflineminus">-# Used in the Windows nightlies to generate symbols for crash reporting.</span>
<a href="#l2.204"></a><span id="l2.204" class="difflineminus">-ifdef MOZ_DEBUG_SYMBOLS</span>
<a href="#l2.205"></a><span id="l2.205" class="difflineminus">-OS_CXXFLAGS += -Zi -UDEBUG -DNDEBUG</span>
<a href="#l2.206"></a><span id="l2.206" class="difflineminus">-OS_CFLAGS += -Zi -UDEBUG -DNDEBUG</span>
<a href="#l2.207"></a><span id="l2.207" class="difflineminus">-OS_LDFLAGS += -DEBUG -OPT:REF</span>
<a href="#l2.208"></a><span id="l2.208" class="difflineminus">-endif # MOZ_DEBUG_SYMBOLS</span>
<a href="#l2.209"></a><span id="l2.209" class="difflineminus">-</span>
<a href="#l2.210"></a><span id="l2.210" class="difflineminus">-#</span>
<a href="#l2.211"></a><span id="l2.211" class="difflineminus">-# Handle trace-malloc in optimized builds.</span>
<a href="#l2.212"></a><span id="l2.212" class="difflineminus">-# No opt to give sane callstacks.</span>
<a href="#l2.213"></a><span id="l2.213" class="difflineminus">-#</span>
<a href="#l2.214"></a><span id="l2.214" class="difflineminus">-ifdef NS_TRACE_MALLOC</span>
<a href="#l2.215"></a><span id="l2.215" class="difflineminus">-MOZ_OPTIMIZE_FLAGS=-Zi -Od -UDEBUG -DNDEBUG</span>
<a href="#l2.216"></a><span id="l2.216" class="difflineminus">-OS_LDFLAGS = -DEBUG -PDB:NONE -OPT:REF -OPT:nowin98</span>
<a href="#l2.217"></a><span id="l2.217" class="difflineminus">-endif # NS_TRACE_MALLOC</span>
<a href="#l2.218"></a><span id="l2.218" class="difflineminus">-</span>
<a href="#l2.219"></a><span id="l2.219" class="difflineminus">-endif # MOZ_DEBUG</span>
<a href="#l2.220"></a><span id="l2.220" class="difflineminus">-</span>
<a href="#l2.221"></a><span id="l2.221" class="difflineminus">-endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l2.222"></a><span id="l2.222" class="difflineminus">-</span>
<a href="#l2.223"></a><span id="l2.223" class="difflineminus">-ifdef MOZ_GLUE_IN_PROGRAM</span>
<a href="#l2.224"></a><span id="l2.224" class="difflineminus">-DEFINES += -DMOZ_GLUE_IN_PROGRAM</span>
<a href="#l2.225"></a><span id="l2.225" class="difflineminus">-endif</span>
<a href="#l2.226"></a><span id="l2.226" class="difflineminus">-</span>
<a href="#l2.227"></a><span id="l2.227" class="difflineminus">-# Determine if module being compiled is destined </span>
<a href="#l2.228"></a><span id="l2.228" class="difflineminus">-# to be merged into libxul</span>
<a href="#l2.229"></a><span id="l2.229" class="difflineminus">-</span>
<a href="#l2.230"></a><span id="l2.230" class="difflineminus">-ifeq ($(FINAL_LIBRARY),xul)</span>
<a href="#l2.231"></a><span id="l2.231" class="difflineminus">-  ifdef LIBXUL_LIBRARY</span>
<a href="#l2.232"></a><span id="l2.232" class="difflineminus">-    $(error FINAL_LIBRARY is &quot;xul&quot;, LIBXUL_LIBRARY is implied)</span>
<a href="#l2.233"></a><span id="l2.233" class="difflineminus">-  endif</span>
<a href="#l2.234"></a><span id="l2.234" class="difflineminus">-  LIBXUL_LIBRARY := 1</span>
<a href="#l2.235"></a><span id="l2.235" class="difflineminus">-endif</span>
<a href="#l2.236"></a><span id="l2.236" class="difflineminus">-</span>
<a href="#l2.237"></a><span id="l2.237" class="difflineminus">-ifdef LIBXUL_LIBRARY</span>
<a href="#l2.238"></a><span id="l2.238" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l2.239"></a><span id="l2.239" class="difflineminus">-$(error IS_COMPONENT is set, but is not compatible with LIBXUL_LIBRARY)</span>
<a href="#l2.240"></a><span id="l2.240" class="difflineminus">-endif</span>
<a href="#l2.241"></a><span id="l2.241" class="difflineminus">-SHORT_LIBNAME=</span>
<a href="#l2.242"></a><span id="l2.242" class="difflineminus">-endif</span>
<a href="#l2.243"></a><span id="l2.243" class="difflineminus">-</span>
<a href="#l2.244"></a><span id="l2.244" class="difflineminus">-# No sense in profiling tools</span>
<a href="#l2.245"></a><span id="l2.245" class="difflineminus">-ifdef INTERNAL_TOOLS</span>
<a href="#l2.246"></a><span id="l2.246" class="difflineminus">-NO_PROFILE_GUIDED_OPTIMIZE = 1</span>
<a href="#l2.247"></a><span id="l2.247" class="difflineminus">-endif</span>
<a href="#l2.248"></a><span id="l2.248" class="difflineminus">-</span>
<a href="#l2.249"></a><span id="l2.249" class="difflineminus">-# Don't build SIMPLE_PROGRAMS with PGO, since they don't need it anyway,</span>
<a href="#l2.250"></a><span id="l2.250" class="difflineminus">-# and we don't have the same build logic to re-link them in the second pass.</span>
<a href="#l2.251"></a><span id="l2.251" class="difflineminus">-ifdef SIMPLE_PROGRAMS</span>
<a href="#l2.252"></a><span id="l2.252" class="difflineminus">-NO_PROFILE_GUIDED_OPTIMIZE = 1</span>
<a href="#l2.253"></a><span id="l2.253" class="difflineminus">-endif</span>
<a href="#l2.254"></a><span id="l2.254" class="difflineminus">-</span>
<a href="#l2.255"></a><span id="l2.255" class="difflineminus">-# No sense in profiling unit tests</span>
<a href="#l2.256"></a><span id="l2.256" class="difflineminus">-ifdef CPP_UNIT_TESTS</span>
<a href="#l2.257"></a><span id="l2.257" class="difflineminus">-NO_PROFILE_GUIDED_OPTIMIZE = 1</span>
<a href="#l2.258"></a><span id="l2.258" class="difflineminus">-endif</span>
<a href="#l2.259"></a><span id="l2.259" class="difflineminus">-</span>
<a href="#l2.260"></a><span id="l2.260" class="difflineminus">-# Enable profile-based feedback</span>
<a href="#l2.261"></a><span id="l2.261" class="difflineminus">-ifneq (1,$(NO_PROFILE_GUIDED_OPTIMIZE))</span>
<a href="#l2.262"></a><span id="l2.262" class="difflineminus">-ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l2.263"></a><span id="l2.263" class="difflineminus">-OS_CFLAGS += $(if $(filter $(notdir $&lt;),$(notdir $(NO_PROFILE_GUIDED_OPTIMIZE))),,$(PROFILE_GEN_CFLAGS))</span>
<a href="#l2.264"></a><span id="l2.264" class="difflineminus">-OS_CXXFLAGS += $(if $(filter $(notdir $&lt;),$(notdir $(NO_PROFILE_GUIDED_OPTIMIZE))),,$(PROFILE_GEN_CFLAGS))</span>
<a href="#l2.265"></a><span id="l2.265" class="difflineminus">-OS_LDFLAGS += $(PROFILE_GEN_LDFLAGS)</span>
<a href="#l2.266"></a><span id="l2.266" class="difflineminus">-ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l2.267"></a><span id="l2.267" class="difflineminus">-AR_FLAGS += -LTCG</span>
<a href="#l2.268"></a><span id="l2.268" class="difflineminus">-endif</span>
<a href="#l2.269"></a><span id="l2.269" class="difflineminus">-endif # MOZ_PROFILE_GENERATE</span>
<a href="#l2.270"></a><span id="l2.270" class="difflineminus">-</span>
<a href="#l2.271"></a><span id="l2.271" class="difflineminus">-ifdef MOZ_PROFILE_USE</span>
<a href="#l2.272"></a><span id="l2.272" class="difflineminus">-OS_CFLAGS += $(if $(filter $(notdir $&lt;),$(notdir $(NO_PROFILE_GUIDED_OPTIMIZE))),,$(PROFILE_USE_CFLAGS))</span>
<a href="#l2.273"></a><span id="l2.273" class="difflineminus">-OS_CXXFLAGS += $(if $(filter $(notdir $&lt;),$(notdir $(NO_PROFILE_GUIDED_OPTIMIZE))),,$(PROFILE_USE_CFLAGS))</span>
<a href="#l2.274"></a><span id="l2.274" class="difflineminus">-OS_LDFLAGS += $(PROFILE_USE_LDFLAGS)</span>
<a href="#l2.275"></a><span id="l2.275" class="difflineminus">-ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l2.276"></a><span id="l2.276" class="difflineminus">-AR_FLAGS += -LTCG</span>
<a href="#l2.277"></a><span id="l2.277" class="difflineminus">-endif</span>
<a href="#l2.278"></a><span id="l2.278" class="difflineminus">-endif # MOZ_PROFILE_USE</span>
<a href="#l2.279"></a><span id="l2.279" class="difflineminus">-endif # NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l2.280"></a><span id="l2.280" class="difflineminus">-</span>
<a href="#l2.281"></a><span id="l2.281" class="difflineminus">-# Does the makefile specifies the internal XPCOM API linkage?</span>
<a href="#l2.282"></a><span id="l2.282" class="difflineminus">-ifneq (,$(MOZILLA_INTERNAL_API)$(LIBXUL_LIBRARY))</span>
<a href="#l2.283"></a><span id="l2.283" class="difflineminus">-DEFINES += -DMOZILLA_INTERNAL_API</span>
<a href="#l2.284"></a><span id="l2.284" class="difflineminus">-endif</span>
<a href="#l2.285"></a><span id="l2.285" class="difflineminus">-</span>
<a href="#l2.286"></a><span id="l2.286" class="difflineminus">-# Force XPCOM/widget/gfx methods to be _declspec(dllexport) when we're</span>
<a href="#l2.287"></a><span id="l2.287" class="difflineminus">-# building libxul libraries</span>
<a href="#l2.288"></a><span id="l2.288" class="difflineminus">-ifdef LIBXUL_LIBRARY</span>
<a href="#l2.289"></a><span id="l2.289" class="difflineminus">-DEFINES += \</span>
<a href="#l2.290"></a><span id="l2.290" class="difflineminus">-		-D_IMPL_NS_COM \</span>
<a href="#l2.291"></a><span id="l2.291" class="difflineminus">-		-DEXPORT_XPT_API \</span>
<a href="#l2.292"></a><span id="l2.292" class="difflineminus">-		-DEXPORT_XPTC_API \</span>
<a href="#l2.293"></a><span id="l2.293" class="difflineminus">-		-D_IMPL_NS_GFX \</span>
<a href="#l2.294"></a><span id="l2.294" class="difflineminus">-		-D_IMPL_NS_WIDGET \</span>
<a href="#l2.295"></a><span id="l2.295" class="difflineminus">-		-DIMPL_XREAPI \</span>
<a href="#l2.296"></a><span id="l2.296" class="difflineminus">-		-DIMPL_NS_NET \</span>
<a href="#l2.297"></a><span id="l2.297" class="difflineminus">-		-DIMPL_THEBES \</span>
<a href="#l2.298"></a><span id="l2.298" class="difflineminus">-		$(NULL)</span>
<a href="#l2.299"></a><span id="l2.299" class="difflineminus">-</span>
<a href="#l2.300"></a><span id="l2.300" class="difflineminus">-ifndef MOZ_NATIVE_ZLIB</span>
<a href="#l2.301"></a><span id="l2.301" class="difflineminus">-DEFINES += -DZLIB_INTERNAL</span>
<a href="#l2.302"></a><span id="l2.302" class="difflineminus">-endif</span>
<a href="#l2.303"></a><span id="l2.303" class="difflineminus">-endif</span>
<a href="#l2.304"></a><span id="l2.304" class="difflineminus">-</span>
<a href="#l2.305"></a><span id="l2.305" class="difflineminus">-MAKE_JARS_FLAGS = \</span>
<a href="#l2.306"></a><span id="l2.306" class="difflineminus">-	-t $(topsrcdir) \</span>
<a href="#l2.307"></a><span id="l2.307" class="difflineminus">-	-f $(MOZ_CHROME_FILE_FORMAT) \</span>
<a href="#l2.308"></a><span id="l2.308" class="difflineminus">-	$(NULL)</span>
<a href="#l2.309"></a><span id="l2.309" class="difflineminus">-</span>
<a href="#l2.310"></a><span id="l2.310" class="difflineminus">-ifdef USE_EXTENSION_MANIFEST</span>
<a href="#l2.311"></a><span id="l2.311" class="difflineminus">-MAKE_JARS_FLAGS += -e</span>
<a href="#l2.312"></a><span id="l2.312" class="difflineminus">-endif</span>
<a href="#l2.313"></a><span id="l2.313" class="difflineminus">-</span>
<a href="#l2.314"></a><span id="l2.314" class="difflineminus">-ifdef BOTH_MANIFESTS</span>
<a href="#l2.315"></a><span id="l2.315" class="difflineminus">-MAKE_JARS_FLAGS += --both-manifests</span>
<a href="#l2.316"></a><span id="l2.316" class="difflineminus">-endif</span>
<a href="#l2.317"></a><span id="l2.317" class="difflineminus">-</span>
<a href="#l2.318"></a><span id="l2.318" class="difflineminus">-TAR_CREATE_FLAGS = -chf</span>
<a href="#l2.319"></a><span id="l2.319" class="difflineminus">-</span>
<a href="#l2.320"></a><span id="l2.320" class="difflineminus">-#</span>
<a href="#l2.321"></a><span id="l2.321" class="difflineminus">-# Personal makefile customizations go in these optional make include files.</span>
<a href="#l2.322"></a><span id="l2.322" class="difflineminus">-#</span>
<a href="#l2.323"></a><span id="l2.323" class="difflineminus">-MY_CONFIG	:= $(DEPTH)/config/myconfig.mk</span>
<a href="#l2.324"></a><span id="l2.324" class="difflineminus">-MY_RULES	:= $(DEPTH)/config/myrules.mk</span>
<a href="#l2.325"></a><span id="l2.325" class="difflineminus">-</span>
<a href="#l2.326"></a><span id="l2.326" class="difflineminus">-#</span>
<a href="#l2.327"></a><span id="l2.327" class="difflineminus">-# Default command macros; can be overridden in &lt;arch&gt;.mk.</span>
<a href="#l2.328"></a><span id="l2.328" class="difflineminus">-#</span>
<a href="#l2.329"></a><span id="l2.329" class="difflineminus">-CCC		= $(CXX)</span>
<a href="#l2.330"></a><span id="l2.330" class="difflineminus">-</span>
<a href="#l2.331"></a><span id="l2.331" class="difflineminus">-OS_INCLUDES += $(MOZ_JPEG_CFLAGS) $(MOZ_PNG_CFLAGS) $(MOZ_ZLIB_CFLAGS) $(MOZ_PIXMAN_CFLAGS)</span>
<a href="#l2.332"></a><span id="l2.332" class="difflineminus">-</span>
<a href="#l2.333"></a><span id="l2.333" class="difflineminus">-# NSPR_CFLAGS and NSS_CFLAGS must appear ahead of OS_INCLUDES to avoid Linux</span>
<a href="#l2.334"></a><span id="l2.334" class="difflineminus">-# builds wrongly picking up system NSPR/NSS header files.</span>
<a href="#l2.335"></a><span id="l2.335" class="difflineminus">-</span>
<a href="#l2.336"></a><span id="l2.336" class="difflineminus">-INCLUDES = \</span>
<a href="#l2.337"></a><span id="l2.337" class="difflineminus">-  -I$(srcdir) \</span>
<a href="#l2.338"></a><span id="l2.338" class="difflineminus">-  -I. \</span>
<a href="#l2.339"></a><span id="l2.339" class="difflineminus">-  $(LOCAL_INCLUDES) \</span>
<a href="#l2.340"></a><span id="l2.340" class="difflineminus">-  -I$(DIST)/include \</span>
<a href="#l2.341"></a><span id="l2.341" class="difflineminus">-  $(if $(LIBXUL_SDK),-I$(LIBXUL_SDK)/include) \</span>
<a href="#l2.342"></a><span id="l2.342" class="difflineminus">-  $(NSPR_CFLAGS) $(NSS_CFLAGS) \</span>
<a href="#l2.343"></a><span id="l2.343" class="difflineminus">-  $(OS_INCLUDES) \</span>
<a href="#l2.344"></a><span id="l2.344" class="difflineminus">-  $(NULL)</span>
<a href="#l2.345"></a><span id="l2.345" class="difflineminus">-</span>
<a href="#l2.346"></a><span id="l2.346" class="difflineminus">-include $(topsrcdir)/config/static-checking-config.mk</span>
<a href="#l2.347"></a><span id="l2.347" class="difflineminus">-</span>
<a href="#l2.348"></a><span id="l2.348" class="difflineminus">-CFLAGS		= $(OS_CPPFLAGS) $(OS_CFLAGS)</span>
<a href="#l2.349"></a><span id="l2.349" class="difflineminus">-CXXFLAGS	= $(OS_CPPFLAGS) $(OS_CXXFLAGS)</span>
<a href="#l2.350"></a><span id="l2.350" class="difflineminus">-LDFLAGS		= $(OS_LDFLAGS) $(MOZBUILD_LDFLAGS) $(MOZ_FIX_LINK_PATHS)</span>
<a href="#l2.351"></a><span id="l2.351" class="difflineminus">-</span>
<a href="#l2.352"></a><span id="l2.352" class="difflineminus">-# Allow each module to override the *default* optimization settings</span>
<a href="#l2.353"></a><span id="l2.353" class="difflineminus">-# by setting MODULE_OPTIMIZE_FLAGS if the developer has not given</span>
<a href="#l2.354"></a><span id="l2.354" class="difflineminus">-# arguments to --enable-optimize</span>
<a href="#l2.355"></a><span id="l2.355" class="difflineminus">-ifdef MOZ_OPTIMIZE</span>
<a href="#l2.356"></a><span id="l2.356" class="difflineminus">-ifeq (1,$(MOZ_OPTIMIZE))</span>
<a href="#l2.357"></a><span id="l2.357" class="difflineminus">-ifdef MODULE_OPTIMIZE_FLAGS</span>
<a href="#l2.358"></a><span id="l2.358" class="difflineminus">-CFLAGS		+= $(MODULE_OPTIMIZE_FLAGS)</span>
<a href="#l2.359"></a><span id="l2.359" class="difflineminus">-CXXFLAGS	+= $(MODULE_OPTIMIZE_FLAGS)</span>
<a href="#l2.360"></a><span id="l2.360" class="difflineminus">-else</span>
<a href="#l2.361"></a><span id="l2.361" class="difflineminus">-ifneq (,$(if $(MOZ_PROFILE_GENERATE)$(MOZ_PROFILE_USE),$(MOZ_PGO_OPTIMIZE_FLAGS)))</span>
<a href="#l2.362"></a><span id="l2.362" class="difflineminus">-CFLAGS		+= $(MOZ_PGO_OPTIMIZE_FLAGS)</span>
<a href="#l2.363"></a><span id="l2.363" class="difflineminus">-CXXFLAGS	+= $(MOZ_PGO_OPTIMIZE_FLAGS)</span>
<a href="#l2.364"></a><span id="l2.364" class="difflineminus">-else</span>
<a href="#l2.365"></a><span id="l2.365" class="difflineminus">-CFLAGS		+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l2.366"></a><span id="l2.366" class="difflineminus">-CXXFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l2.367"></a><span id="l2.367" class="difflineminus">-endif # neq (,$(MOZ_PROFILE_GENERATE)$(MOZ_PROFILE_USE))</span>
<a href="#l2.368"></a><span id="l2.368" class="difflineminus">-endif # MODULE_OPTIMIZE_FLAGS</span>
<a href="#l2.369"></a><span id="l2.369" class="difflineminus">-else</span>
<a href="#l2.370"></a><span id="l2.370" class="difflineminus">-CFLAGS		+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l2.371"></a><span id="l2.371" class="difflineminus">-CXXFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l2.372"></a><span id="l2.372" class="difflineminus">-endif # MOZ_OPTIMIZE == 1</span>
<a href="#l2.373"></a><span id="l2.373" class="difflineminus">-LDFLAGS		+= $(MOZ_OPTIMIZE_LDFLAGS)</span>
<a href="#l2.374"></a><span id="l2.374" class="difflineminus">-endif # MOZ_OPTIMIZE</span>
<a href="#l2.375"></a><span id="l2.375" class="difflineminus">-</span>
<a href="#l2.376"></a><span id="l2.376" class="difflineminus">-ifdef CROSS_COMPILE</span>
<a href="#l2.377"></a><span id="l2.377" class="difflineminus">-HOST_CFLAGS	+= $(HOST_OPTIMIZE_FLAGS)</span>
<a href="#l2.378"></a><span id="l2.378" class="difflineminus">-else</span>
<a href="#l2.379"></a><span id="l2.379" class="difflineminus">-ifdef MOZ_OPTIMIZE</span>
<a href="#l2.380"></a><span id="l2.380" class="difflineminus">-ifeq (1,$(MOZ_OPTIMIZE))</span>
<a href="#l2.381"></a><span id="l2.381" class="difflineminus">-ifdef MODULE_OPTIMIZE_FLAGS</span>
<a href="#l2.382"></a><span id="l2.382" class="difflineminus">-HOST_CFLAGS	+= $(MODULE_OPTIMIZE_FLAGS)</span>
<a href="#l2.383"></a><span id="l2.383" class="difflineminus">-else</span>
<a href="#l2.384"></a><span id="l2.384" class="difflineminus">-HOST_CFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l2.385"></a><span id="l2.385" class="difflineminus">-endif # MODULE_OPTIMIZE_FLAGS</span>
<a href="#l2.386"></a><span id="l2.386" class="difflineminus">-else</span>
<a href="#l2.387"></a><span id="l2.387" class="difflineminus">-HOST_CFLAGS	+= $(MOZ_OPTIMIZE_FLAGS)</span>
<a href="#l2.388"></a><span id="l2.388" class="difflineminus">-endif # MOZ_OPTIMIZE == 1</span>
<a href="#l2.389"></a><span id="l2.389" class="difflineminus">-endif # MOZ_OPTIMIZE</span>
<a href="#l2.390"></a><span id="l2.390" class="difflineminus">-endif # CROSS_COMPILE</span>
<a href="#l2.391"></a><span id="l2.391" class="difflineminus">-</span>
<a href="#l2.392"></a><span id="l2.392" class="difflineminus">-CFLAGS += $(MOZ_FRAMEPTR_FLAGS)</span>
<a href="#l2.393"></a><span id="l2.393" class="difflineminus">-CXXFLAGS += $(MOZ_FRAMEPTR_FLAGS)</span>
<a href="#l2.394"></a><span id="l2.394" class="difflineminus">-</span>
<a href="#l2.395"></a><span id="l2.395" class="difflineminus">-ifeq ($(OS_ARCH)_$(GNU_CC),WINNT_)</span>
<a href="#l2.396"></a><span id="l2.396" class="difflineminus">-#// Currently, unless USE_STATIC_LIBS is defined, the multithreaded</span>
<a href="#l2.397"></a><span id="l2.397" class="difflineminus">-#// DLL version of the RTL is used...</span>
<a href="#l2.398"></a><span id="l2.398" class="difflineminus">-#//</span>
<a href="#l2.399"></a><span id="l2.399" class="difflineminus">-#//------------------------------------------------------------------------</span>
<a href="#l2.400"></a><span id="l2.400" class="difflineminus">-ifdef USE_STATIC_LIBS</span>
<a href="#l2.401"></a><span id="l2.401" class="difflineminus">-RTL_FLAGS=-MT          # Statically linked multithreaded RTL</span>
<a href="#l2.402"></a><span id="l2.402" class="difflineminus">-ifneq (,$(MOZ_DEBUG)$(NS_TRACE_MALLOC))</span>
<a href="#l2.403"></a><span id="l2.403" class="difflineminus">-ifndef MOZ_NO_DEBUG_RTL</span>
<a href="#l2.404"></a><span id="l2.404" class="difflineminus">-RTL_FLAGS=-MTd         # Statically linked multithreaded MSVC4.0 debug RTL</span>
<a href="#l2.405"></a><span id="l2.405" class="difflineminus">-endif</span>
<a href="#l2.406"></a><span id="l2.406" class="difflineminus">-endif # MOZ_DEBUG || NS_TRACE_MALLOC</span>
<a href="#l2.407"></a><span id="l2.407" class="difflineminus">-</span>
<a href="#l2.408"></a><span id="l2.408" class="difflineminus">-else # !USE_STATIC_LIBS</span>
<a href="#l2.409"></a><span id="l2.409" class="difflineminus">-</span>
<a href="#l2.410"></a><span id="l2.410" class="difflineminus">-RTL_FLAGS=-MD          # Dynamically linked, multithreaded RTL</span>
<a href="#l2.411"></a><span id="l2.411" class="difflineminus">-ifneq (,$(MOZ_DEBUG)$(NS_TRACE_MALLOC))</span>
<a href="#l2.412"></a><span id="l2.412" class="difflineminus">-ifndef MOZ_NO_DEBUG_RTL</span>
<a href="#l2.413"></a><span id="l2.413" class="difflineminus">-RTL_FLAGS=-MDd         # Dynamically linked, multithreaded MSVC4.0 debug RTL</span>
<a href="#l2.414"></a><span id="l2.414" class="difflineminus">-endif</span>
<a href="#l2.415"></a><span id="l2.415" class="difflineminus">-endif # MOZ_DEBUG || NS_TRACE_MALLOC</span>
<a href="#l2.416"></a><span id="l2.416" class="difflineminus">-endif # USE_STATIC_LIBS</span>
<a href="#l2.417"></a><span id="l2.417" class="difflineminus">-endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l2.418"></a><span id="l2.418" class="difflineminus">-</span>
<a href="#l2.419"></a><span id="l2.419" class="difflineminus">-ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l2.420"></a><span id="l2.420" class="difflineminus">-# Compiling ObjC requires an Apple compiler anyway, so it's ok to set</span>
<a href="#l2.421"></a><span id="l2.421" class="difflineminus">-# host CMFLAGS here.</span>
<a href="#l2.422"></a><span id="l2.422" class="difflineminus">-HOST_CMFLAGS += -fobjc-exceptions</span>
<a href="#l2.423"></a><span id="l2.423" class="difflineminus">-HOST_CMMFLAGS += -fobjc-exceptions</span>
<a href="#l2.424"></a><span id="l2.424" class="difflineminus">-OS_COMPILE_CMFLAGS += -fobjc-exceptions</span>
<a href="#l2.425"></a><span id="l2.425" class="difflineminus">-OS_COMPILE_CMMFLAGS += -fobjc-exceptions</span>
<a href="#l2.426"></a><span id="l2.426" class="difflineminus">-ifeq ($(MOZ_WIDGET_TOOLKIT),uikit)</span>
<a href="#l2.427"></a><span id="l2.427" class="difflineminus">-OS_COMPILE_CMFLAGS += -fobjc-abi-version=2 -fobjc-legacy-dispatch</span>
<a href="#l2.428"></a><span id="l2.428" class="difflineminus">-OS_COMPILE_CMMFLAGS += -fobjc-abi-version=2 -fobjc-legacy-dispatch</span>
<a href="#l2.429"></a><span id="l2.429" class="difflineminus">-endif</span>
<a href="#l2.430"></a><span id="l2.430" class="difflineminus">-endif</span>
<a href="#l2.431"></a><span id="l2.431" class="difflineminus">-</span>
<a href="#l2.432"></a><span id="l2.432" class="difflineminus">-COMPILE_CFLAGS = $(VISIBILITY_FLAGS) $(DEFINES) $(INCLUDES) $(DSO_CFLAGS) $(DSO_PIC_CFLAGS) $(RTL_FLAGS) $(OS_CPPFLAGS) $(OS_COMPILE_CFLAGS) $(CFLAGS) $(MOZBUILD_CFLAGS) $(EXTRA_COMPILE_FLAGS)</span>
<a href="#l2.433"></a><span id="l2.433" class="difflineminus">-COMPILE_CXXFLAGS = $(if $(DISABLE_STL_WRAPPING),,$(STL_FLAGS)) $(VISIBILITY_FLAGS) $(DEFINES) $(INCLUDES) $(DSO_CFLAGS) $(DSO_PIC_CFLAGS) $(RTL_FLAGS) $(OS_CPPFLAGS) $(OS_COMPILE_CXXFLAGS) $(CXXFLAGS) $(MOZBUILD_CXXFLAGS) $(EXTRA_COMPILE_FLAGS)</span>
<a href="#l2.434"></a><span id="l2.434" class="difflineminus">-COMPILE_CMFLAGS = $(OS_COMPILE_CMFLAGS) $(MOZBUILD_CMFLAGS) $(EXTRA_COMPILE_FLAGS)</span>
<a href="#l2.435"></a><span id="l2.435" class="difflineminus">-COMPILE_CMMFLAGS = $(OS_COMPILE_CMMFLAGS) $(MOZBUILD_CMMFLAGS) $(EXTRA_COMPILE_FLAGS)</span>
<a href="#l2.436"></a><span id="l2.436" class="difflineminus">-ASFLAGS += $(EXTRA_ASSEMBLER_FLAGS)</span>
<a href="#l2.437"></a><span id="l2.437" class="difflineminus">-</span>
<a href="#l2.438"></a><span id="l2.438" class="difflineminus">-ifndef CROSS_COMPILE</span>
<a href="#l2.439"></a><span id="l2.439" class="difflineminus">-HOST_CFLAGS += $(RTL_FLAGS)</span>
<a href="#l2.440"></a><span id="l2.440" class="difflineminus">-endif</span>
<a href="#l2.441"></a><span id="l2.441" class="difflineminus">-</span>
<a href="#l2.442"></a><span id="l2.442" class="difflineminus">-#</span>
<a href="#l2.443"></a><span id="l2.443" class="difflineminus">-# Name of the binary code directories</span>
<a href="#l2.444"></a><span id="l2.444" class="difflineminus">-#</span>
<a href="#l2.445"></a><span id="l2.445" class="difflineminus">-# Override defaults</span>
<a href="#l2.446"></a><span id="l2.446" class="difflineminus">-</span>
<a href="#l2.447"></a><span id="l2.447" class="difflineminus">-# Default location of include files</span>
<a href="#l2.448"></a><span id="l2.448" class="difflineminus">-IDL_PARSER_DIR = $(topsrcdir)/xpcom/idl-parser</span>
<a href="#l2.449"></a><span id="l2.449" class="difflineminus">-IDL_PARSER_CACHE_DIR = $(DEPTH)/xpcom/idl-parser</span>
<a href="#l2.450"></a><span id="l2.450" class="difflineminus">-</span>
<a href="#l2.451"></a><span id="l2.451" class="difflineminus">-SDK_LIB_DIR = $(DIST)/sdk/lib</span>
<a href="#l2.452"></a><span id="l2.452" class="difflineminus">-SDK_BIN_DIR = $(DIST)/sdk/bin</span>
<a href="#l2.453"></a><span id="l2.453" class="difflineminus">-</span>
<a href="#l2.454"></a><span id="l2.454" class="difflineminus">-DEPENDENCIES	= .md</span>
<a href="#l2.455"></a><span id="l2.455" class="difflineminus">-</span>
<a href="#l2.456"></a><span id="l2.456" class="difflineminus">-ifeq (xpconnect, $(findstring xpconnect, $(BUILD_MODULES)))</span>
<a href="#l2.457"></a><span id="l2.457" class="difflineminus">-DEFINES +=  -DXPCONNECT_STANDALONE</span>
<a href="#l2.458"></a><span id="l2.458" class="difflineminus">-endif</span>
<a href="#l2.459"></a><span id="l2.459" class="difflineminus">-</span>
<a href="#l2.460"></a><span id="l2.460" class="difflineminus">-ELF_DYNSTR_GC	= :</span>
<a href="#l2.461"></a><span id="l2.461" class="difflineminus">-</span>
<a href="#l2.462"></a><span id="l2.462" class="difflineminus">-ifeq ($(MOZ_WIDGET_TOOLKIT),qt)</span>
<a href="#l2.463"></a><span id="l2.463" class="difflineminus">-OS_LIBS += $(MOZ_QT_LIBS)</span>
<a href="#l2.464"></a><span id="l2.464" class="difflineminus">-endif</span>
<a href="#l2.465"></a><span id="l2.465" class="difflineminus">-</span>
<a href="#l2.466"></a><span id="l2.466" class="difflineminus">-ifndef CROSS_COMPILE</span>
<a href="#l2.467"></a><span id="l2.467" class="difflineminus">-ifdef USE_ELF_DYNSTR_GC</span>
<a href="#l2.468"></a><span id="l2.468" class="difflineminus">-ifdef MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS</span>
<a href="#l2.469"></a><span id="l2.469" class="difflineminus">-ELF_DYNSTR_GC 	= $(DEPTH)/config/elf-dynstr-gc</span>
<a href="#l2.470"></a><span id="l2.470" class="difflineminus">-endif</span>
<a href="#l2.471"></a><span id="l2.471" class="difflineminus">-endif</span>
<a href="#l2.472"></a><span id="l2.472" class="difflineminus">-endif</span>
<a href="#l2.473"></a><span id="l2.473" class="difflineminus">-</span>
<a href="#l2.474"></a><span id="l2.474" class="difflineminus">-ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l2.475"></a><span id="l2.475" class="difflineminus">-ifdef NEXT_ROOT</span>
<a href="#l2.476"></a><span id="l2.476" class="difflineminus">-export NEXT_ROOT</span>
<a href="#l2.477"></a><span id="l2.477" class="difflineminus">-PBBUILD = NEXT_ROOT= $(PBBUILD_BIN)</span>
<a href="#l2.478"></a><span id="l2.478" class="difflineminus">-else # NEXT_ROOT</span>
<a href="#l2.479"></a><span id="l2.479" class="difflineminus">-PBBUILD = $(PBBUILD_BIN)</span>
<a href="#l2.480"></a><span id="l2.480" class="difflineminus">-endif # NEXT_ROOT</span>
<a href="#l2.481"></a><span id="l2.481" class="difflineminus">-PBBUILD_SETTINGS = GCC_VERSION=&quot;$(GCC_VERSION)&quot; SYMROOT=build ARCHS=&quot;$(OS_TEST)&quot;</span>
<a href="#l2.482"></a><span id="l2.482" class="difflineminus">-ifdef MACOS_SDK_DIR</span>
<a href="#l2.483"></a><span id="l2.483" class="difflineminus">-PBBUILD_SETTINGS += SDKROOT=&quot;$(MACOS_SDK_DIR)&quot;</span>
<a href="#l2.484"></a><span id="l2.484" class="difflineminus">-endif # MACOS_SDK_DIR</span>
<a href="#l2.485"></a><span id="l2.485" class="difflineminus">-ifdef MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l2.486"></a><span id="l2.486" class="difflineminus">-export MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l2.487"></a><span id="l2.487" class="difflineminus">-PBBUILD_SETTINGS += MACOSX_DEPLOYMENT_TARGET=&quot;$(MACOSX_DEPLOYMENT_TARGET)&quot;</span>
<a href="#l2.488"></a><span id="l2.488" class="difflineminus">-endif # MACOSX_DEPLOYMENT_TARGET</span>
<a href="#l2.489"></a><span id="l2.489" class="difflineminus">-</span>
<a href="#l2.490"></a><span id="l2.490" class="difflineminus">-ifdef MOZ_USING_CCACHE</span>
<a href="#l2.491"></a><span id="l2.491" class="difflineminus">-ifdef CLANG_CXX</span>
<a href="#l2.492"></a><span id="l2.492" class="difflineminus">-export CCACHE_CPP2=1</span>
<a href="#l2.493"></a><span id="l2.493" class="difflineminus">-endif</span>
<a href="#l2.494"></a><span id="l2.494" class="difflineminus">-endif</span>
<a href="#l2.495"></a><span id="l2.495" class="difflineminus">-</span>
<a href="#l2.496"></a><span id="l2.496" class="difflineminus">-ifdef MOZ_OPTIMIZE</span>
<a href="#l2.497"></a><span id="l2.497" class="difflineminus">-ifeq (2,$(MOZ_OPTIMIZE))</span>
<a href="#l2.498"></a><span id="l2.498" class="difflineminus">-# Only override project defaults if the config specified explicit settings</span>
<a href="#l2.499"></a><span id="l2.499" class="difflineminus">-PBBUILD_SETTINGS += GCC_MODEL_TUNING= OPTIMIZATION_CFLAGS=&quot;$(MOZ_OPTIMIZE_FLAGS)&quot;</span>
<a href="#l2.500"></a><span id="l2.500" class="difflineminus">-endif # MOZ_OPTIMIZE=2</span>
<a href="#l2.501"></a><span id="l2.501" class="difflineminus">-endif # MOZ_OPTIMIZE</span>
<a href="#l2.502"></a><span id="l2.502" class="difflineminus">-endif # OS_ARCH=Darwin</span>
<a href="#l2.503"></a><span id="l2.503" class="difflineminus">-</span>
<a href="#l2.504"></a><span id="l2.504" class="difflineminus">-# Set link flags according to whether we want a console.</span>
<a href="#l2.505"></a><span id="l2.505" class="difflineminus">-ifdef MOZ_WINCONSOLE</span>
<a href="#l2.506"></a><span id="l2.506" class="difflineminus">-ifeq ($(MOZ_WINCONSOLE),1)</span>
<a href="#l2.507"></a><span id="l2.507" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l2.508"></a><span id="l2.508" class="difflineminus">-ifdef GNU_CC</span>
<a href="#l2.509"></a><span id="l2.509" class="difflineminus">-WIN32_EXE_LDFLAGS	+= -mconsole</span>
<a href="#l2.510"></a><span id="l2.510" class="difflineminus">-else</span>
<a href="#l2.511"></a><span id="l2.511" class="difflineminus">-WIN32_EXE_LDFLAGS	+= -SUBSYSTEM:CONSOLE</span>
<a href="#l2.512"></a><span id="l2.512" class="difflineminus">-endif</span>
<a href="#l2.513"></a><span id="l2.513" class="difflineminus">-endif</span>
<a href="#l2.514"></a><span id="l2.514" class="difflineminus">-else # MOZ_WINCONSOLE</span>
<a href="#l2.515"></a><span id="l2.515" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l2.516"></a><span id="l2.516" class="difflineminus">-ifdef GNU_CC</span>
<a href="#l2.517"></a><span id="l2.517" class="difflineminus">-WIN32_EXE_LDFLAGS	+= -mwindows</span>
<a href="#l2.518"></a><span id="l2.518" class="difflineminus">-else</span>
<a href="#l2.519"></a><span id="l2.519" class="difflineminus">-WIN32_EXE_LDFLAGS	+= -SUBSYSTEM:WINDOWS</span>
<a href="#l2.520"></a><span id="l2.520" class="difflineminus">-endif</span>
<a href="#l2.521"></a><span id="l2.521" class="difflineminus">-endif</span>
<a href="#l2.522"></a><span id="l2.522" class="difflineminus">-endif</span>
<a href="#l2.523"></a><span id="l2.523" class="difflineminus">-endif</span>
<a href="#l2.524"></a><span id="l2.524" class="difflineminus">-</span>
<a href="#l2.525"></a><span id="l2.525" class="difflineminus">-ifdef _MSC_VER</span>
<a href="#l2.526"></a><span id="l2.526" class="difflineminus">-ifeq ($(CPU_ARCH),x86_64)</span>
<a href="#l2.527"></a><span id="l2.527" class="difflineminus">-# set stack to 2MB on x64 build.  See bug 582910</span>
<a href="#l2.528"></a><span id="l2.528" class="difflineminus">-WIN32_EXE_LDFLAGS	+= -STACK:2097152</span>
<a href="#l2.529"></a><span id="l2.529" class="difflineminus">-endif</span>
<a href="#l2.530"></a><span id="l2.530" class="difflineminus">-endif</span>
<a href="#l2.531"></a><span id="l2.531" class="difflineminus">-</span>
<a href="#l2.532"></a><span id="l2.532" class="difflineminus">-# If we're building a component on MSVC, we don't want to generate an</span>
<a href="#l2.533"></a><span id="l2.533" class="difflineminus">-# import lib, because that import lib will collide with the name of a</span>
<a href="#l2.534"></a><span id="l2.534" class="difflineminus">-# static version of the same library.</span>
<a href="#l2.535"></a><span id="l2.535" class="difflineminus">-ifeq ($(GNU_LD)$(OS_ARCH),WINNT)</span>
<a href="#l2.536"></a><span id="l2.536" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l2.537"></a><span id="l2.537" class="difflineminus">-LDFLAGS += -IMPLIB:fake.lib</span>
<a href="#l2.538"></a><span id="l2.538" class="difflineminus">-DELETE_AFTER_LINK = fake.lib fake.exp</span>
<a href="#l2.539"></a><span id="l2.539" class="difflineminus">-endif</span>
<a href="#l2.540"></a><span id="l2.540" class="difflineminus">-endif</span>
<a href="#l2.541"></a><span id="l2.541" class="difflineminus">-</span>
<a href="#l2.542"></a><span id="l2.542" class="difflineminus">-#</span>
<a href="#l2.543"></a><span id="l2.543" class="difflineminus">-# Include any personal overrides the user might think are needed.</span>
<a href="#l2.544"></a><span id="l2.544" class="difflineminus">-#</span>
<a href="#l2.545"></a><span id="l2.545" class="difflineminus">--include $(topsrcdir)/$(MOZ_BUILD_APP)/app-config.mk</span>
<a href="#l2.546"></a><span id="l2.546" class="difflineminus">--include $(MY_CONFIG)</span>
<a href="#l2.547"></a><span id="l2.547" class="difflineminus">-</span>
<a href="#l2.548"></a><span id="l2.548" class="difflineminus">-######################################################################</span>
<a href="#l2.549"></a><span id="l2.549" class="difflineminus">-# Now test variables that might have been set or overridden by $(MY_CONFIG).</span>
<a href="#l2.550"></a><span id="l2.550" class="difflineminus">-</span>
<a href="#l2.551"></a><span id="l2.551" class="difflineminus">-DEFINES		+= -DOSTYPE=\&quot;$(OS_CONFIG)\&quot;</span>
<a href="#l2.552"></a><span id="l2.552" class="difflineminus">-DEFINES		+= -DOSARCH=$(OS_ARCH)</span>
<a href="#l2.553"></a><span id="l2.553" class="difflineminus">-</span>
<a href="#l2.554"></a><span id="l2.554" class="difflineminus">-######################################################################</span>
<a href="#l2.555"></a><span id="l2.555" class="difflineminus">-</span>
<a href="#l2.556"></a><span id="l2.556" class="difflineminus">-GARBAGE		+= $(DEPENDENCIES) core $(wildcard core.[0-9]*) $(wildcard *.err) $(wildcard *.pure) $(wildcard *_pure_*.o) Templates.DB</span>
<a href="#l2.557"></a><span id="l2.557" class="difflineminus">-</span>
<a href="#l2.558"></a><span id="l2.558" class="difflineminus">-ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l2.559"></a><span id="l2.559" class="difflineminus">-ifndef NSDISTMODE</span>
<a href="#l2.560"></a><span id="l2.560" class="difflineminus">-NSDISTMODE=absolute_symlink</span>
<a href="#l2.561"></a><span id="l2.561" class="difflineminus">-endif</span>
<a href="#l2.562"></a><span id="l2.562" class="difflineminus">-PWD := $(CURDIR)</span>
<a href="#l2.563"></a><span id="l2.563" class="difflineminus">-endif</span>
<a href="#l2.564"></a><span id="l2.564" class="difflineminus">-</span>
<a href="#l2.565"></a><span id="l2.565" class="difflineminus">-NSINSTALL_PY := $(PYTHON) $(abspath $(MOZILLA_SRCDIR)/config/nsinstall.py)</span>
<a href="#l2.566"></a><span id="l2.566" class="difflineminus">-# For Pymake, whereever we use nsinstall.py we're also going to try to make it</span>
<a href="#l2.567"></a><span id="l2.567" class="difflineminus">-# a native command where possible. Since native commands can't be used outside</span>
<a href="#l2.568"></a><span id="l2.568" class="difflineminus">-# of single-line commands, we continue to provide INSTALL for general use.</span>
<a href="#l2.569"></a><span id="l2.569" class="difflineminus">-# Single-line commands should be switched over to install_cmd.</span>
<a href="#l2.570"></a><span id="l2.570" class="difflineminus">-NSINSTALL_NATIVECMD := %nsinstall nsinstall</span>
<a href="#l2.571"></a><span id="l2.571" class="difflineminus">-</span>
<a href="#l2.572"></a><span id="l2.572" class="difflineminus">-ifdef NSINSTALL_BIN</span>
<a href="#l2.573"></a><span id="l2.573" class="difflineminus">-NSINSTALL = $(NSINSTALL_BIN)</span>
<a href="#l2.574"></a><span id="l2.574" class="difflineminus">-else</span>
<a href="#l2.575"></a><span id="l2.575" class="difflineminus">-ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l2.576"></a><span id="l2.576" class="difflineminus">-NSINSTALL = $(NSINSTALL_PY)</span>
<a href="#l2.577"></a><span id="l2.577" class="difflineminus">-else</span>
<a href="#l2.578"></a><span id="l2.578" class="difflineminus">-NSINSTALL = $(CONFIG_TOOLS)/nsinstall$(HOST_BIN_SUFFIX)</span>
<a href="#l2.579"></a><span id="l2.579" class="difflineminus">-endif # WINNT</span>
<a href="#l2.580"></a><span id="l2.580" class="difflineminus">-endif # NSINSTALL_BIN</span>
<a href="#l2.581"></a><span id="l2.581" class="difflineminus">-</span>
<a href="#l2.582"></a><span id="l2.582" class="difflineminus">-</span>
<a href="#l2.583"></a><span id="l2.583" class="difflineminus">-ifeq (,$(CROSS_COMPILE)$(filter-out WINNT, $(OS_ARCH)))</span>
<a href="#l2.584"></a><span id="l2.584" class="difflineminus">-INSTALL = $(NSINSTALL) -t</span>
<a href="#l2.585"></a><span id="l2.585" class="difflineminus">-ifdef .PYMAKE</span>
<a href="#l2.586"></a><span id="l2.586" class="difflineminus">-install_cmd = $(NSINSTALL_NATIVECMD) -t $(1)</span>
<a href="#l2.587"></a><span id="l2.587" class="difflineminus">-endif # .PYMAKE</span>
<a href="#l2.588"></a><span id="l2.588" class="difflineminus">-</span>
<a href="#l2.589"></a><span id="l2.589" class="difflineminus">-else</span>
<a href="#l2.590"></a><span id="l2.590" class="difflineminus">-</span>
<a href="#l2.591"></a><span id="l2.591" class="difflineminus">-# This isn't laid out as conditional directives so that NSDISTMODE can be</span>
<a href="#l2.592"></a><span id="l2.592" class="difflineminus">-# target-specific.</span>
<a href="#l2.593"></a><span id="l2.593" class="difflineminus">-INSTALL         = $(if $(filter copy, $(NSDISTMODE)), $(NSINSTALL) -t, $(if $(filter absolute_symlink, $(NSDISTMODE)), $(NSINSTALL) -L $(PWD), $(NSINSTALL) -R))</span>
<a href="#l2.594"></a><span id="l2.594" class="difflineminus">-</span>
<a href="#l2.595"></a><span id="l2.595" class="difflineminus">-endif # WINNT</span>
<a href="#l2.596"></a><span id="l2.596" class="difflineminus">-</span>
<a href="#l2.597"></a><span id="l2.597" class="difflineminus">-# The default for install_cmd is simply INSTALL</span>
<a href="#l2.598"></a><span id="l2.598" class="difflineminus">-install_cmd ?= $(INSTALL) $(1)</span>
<a href="#l2.599"></a><span id="l2.599" class="difflineminus">-</span>
<a href="#l2.600"></a><span id="l2.600" class="difflineminus">-# Use nsinstall in copy mode to install files on the system</span>
<a href="#l2.601"></a><span id="l2.601" class="difflineminus">-SYSINSTALL  = $(NSINSTALL) -t</span>
<a href="#l2.602"></a><span id="l2.602" class="difflineminus">-# This isn't necessarily true, just here</span>
<a href="#l2.603"></a><span id="l2.603" class="difflineminus">-sysinstall_cmd = install_cmd</span>
<a href="#l2.604"></a><span id="l2.604" class="difflineminus">-</span>
<a href="#l2.605"></a><span id="l2.605" class="difflineminus">-# Directory nsinstall.</span>
<a href="#l2.606"></a><span id="l2.606" class="difflineminus">-DIR_INSTALL = $(INSTALL)</span>
<a href="#l2.607"></a><span id="l2.607" class="difflineminus">-dir_install_cmd = install_cmd</span>
<a href="#l2.608"></a><span id="l2.608" class="difflineminus">-</span>
<a href="#l2.609"></a><span id="l2.609" class="difflineminus">-#</span>
<a href="#l2.610"></a><span id="l2.610" class="difflineminus">-# Localization build automation</span>
<a href="#l2.611"></a><span id="l2.611" class="difflineminus">-#</span>
<a href="#l2.612"></a><span id="l2.612" class="difflineminus">-</span>
<a href="#l2.613"></a><span id="l2.613" class="difflineminus">-# Because you might wish to &quot;make locales AB_CD=ab-CD&quot;, we don't hardcode</span>
<a href="#l2.614"></a><span id="l2.614" class="difflineminus">-# MOZ_UI_LOCALE directly, but use an intermediate variable that can be</span>
<a href="#l2.615"></a><span id="l2.615" class="difflineminus">-# overridden by the command line. (Besides, AB_CD is prettier).</span>
<a href="#l2.616"></a><span id="l2.616" class="difflineminus">-AB_CD = $(MOZ_UI_LOCALE)</span>
<a href="#l2.617"></a><span id="l2.617" class="difflineminus">-</span>
<a href="#l2.618"></a><span id="l2.618" class="difflineminus">-ifndef L10NBASEDIR</span>
<a href="#l2.619"></a><span id="l2.619" class="difflineminus">-  L10NBASEDIR = $(error L10NBASEDIR not defined by configure)</span>
<a href="#l2.620"></a><span id="l2.620" class="difflineminus">-else</span>
<a href="#l2.621"></a><span id="l2.621" class="difflineminus">-  IS_LANGUAGE_REPACK = 1</span>
<a href="#l2.622"></a><span id="l2.622" class="difflineminus">-endif</span>
<a href="#l2.623"></a><span id="l2.623" class="difflineminus">-</span>
<a href="#l2.624"></a><span id="l2.624" class="difflineminus">-EXPAND_LOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(topsrcdir)/$(1)/en-US,$(or $(realpath $(L10NBASEDIR)),$(abspath $(L10NBASEDIR)))/$(AB_CD)/$(subst /locales,,$(1)))</span>
<a href="#l2.625"></a><span id="l2.625" class="difflineminus">-EXPAND_MOZLOCALE_SRCDIR = $(if $(filter en-US,$(AB_CD)),$(MOZILLA_SRCDIR)/$(1)/en-US,$(or $(realpath $(L10NBASEDIR)),$(abspath $(L10NBASEDIR)))/$(AB_CD)/$(subst /locales,,$(1)))</span>
<a href="#l2.626"></a><span id="l2.626" class="difflineminus">-</span>
<a href="#l2.627"></a><span id="l2.627" class="difflineminus">-ifdef relativesrcdir</span>
<a href="#l2.628"></a><span id="l2.628" class="difflineminus">-LOCALE_SRCDIR = $(call EXPAND_LOCALE_SRCDIR,$(relativesrcdir))</span>
<a href="#l2.629"></a><span id="l2.629" class="difflineminus">-endif</span>
<a href="#l2.630"></a><span id="l2.630" class="difflineminus">-</span>
<a href="#l2.631"></a><span id="l2.631" class="difflineminus">-ifdef relativesrcdir</span>
<a href="#l2.632"></a><span id="l2.632" class="difflineminus">-MAKE_JARS_FLAGS += --relativesrcdir=$(relativesrcdir)</span>
<a href="#l2.633"></a><span id="l2.633" class="difflineminus">-ifneq (en-US,$(AB_CD))</span>
<a href="#l2.634"></a><span id="l2.634" class="difflineminus">-ifdef LOCALE_MERGEDIR</span>
<a href="#l2.635"></a><span id="l2.635" class="difflineminus">-MAKE_JARS_FLAGS += --locale-mergedir=$(LOCALE_MERGEDIR)</span>
<a href="#l2.636"></a><span id="l2.636" class="difflineminus">-endif</span>
<a href="#l2.637"></a><span id="l2.637" class="difflineminus">-ifdef IS_LANGUAGE_REPACK</span>
<a href="#l2.638"></a><span id="l2.638" class="difflineminus">-MAKE_JARS_FLAGS += --l10n-base=$(L10NBASEDIR)/$(AB_CD)</span>
<a href="#l2.639"></a><span id="l2.639" class="difflineminus">-endif</span>
<a href="#l2.640"></a><span id="l2.640" class="difflineminus">-else</span>
<a href="#l2.641"></a><span id="l2.641" class="difflineminus">-MAKE_JARS_FLAGS += -c $(LOCALE_SRCDIR)</span>
<a href="#l2.642"></a><span id="l2.642" class="difflineminus">-endif # en-US</span>
<a href="#l2.643"></a><span id="l2.643" class="difflineminus">-else</span>
<a href="#l2.644"></a><span id="l2.644" class="difflineminus">-MAKE_JARS_FLAGS += -c $(LOCALE_SRCDIR)</span>
<a href="#l2.645"></a><span id="l2.645" class="difflineminus">-endif # ! relativesrcdir</span>
<a href="#l2.646"></a><span id="l2.646" class="difflineminus">-</span>
<a href="#l2.647"></a><span id="l2.647" class="difflineminus">-ifdef LOCALE_MERGEDIR</span>
<a href="#l2.648"></a><span id="l2.648" class="difflineminus">-MERGE_FILE = $(firstword \</span>
<a href="#l2.649"></a><span id="l2.649" class="difflineminus">-  $(wildcard $(LOCALE_MERGEDIR)/$(subst /locales,,$(relativesrcdir))/$(1)) \</span>
<a href="#l2.650"></a><span id="l2.650" class="difflineminus">-  $(wildcard $(LOCALE_SRCDIR)/$(1)) \</span>
<a href="#l2.651"></a><span id="l2.651" class="difflineminus">-  $(srcdir)/en-US/$(1) )</span>
<a href="#l2.652"></a><span id="l2.652" class="difflineminus">-else</span>
<a href="#l2.653"></a><span id="l2.653" class="difflineminus">-MERGE_FILE = $(LOCALE_SRCDIR)/$(1)</span>
<a href="#l2.654"></a><span id="l2.654" class="difflineminus">-endif</span>
<a href="#l2.655"></a><span id="l2.655" class="difflineminus">-MERGE_FILES = $(foreach f,$(1),$(call MERGE_FILE,$(f)))</span>
<a href="#l2.656"></a><span id="l2.656" class="difflineminus">-</span>
<a href="#l2.657"></a><span id="l2.657" class="difflineminus">-ifneq (WINNT,$(OS_ARCH))</span>
<a href="#l2.658"></a><span id="l2.658" class="difflineminus">-RUN_TEST_PROGRAM = $(DIST)/bin/run-mozilla.sh</span>
<a href="#l2.659"></a><span id="l2.659" class="difflineminus">-endif # ! WINNT</span>
<a href="#l2.660"></a><span id="l2.660" class="difflineminus">-</span>
<a href="#l2.661"></a><span id="l2.661" class="difflineminus">-CREATE_PRECOMPLETE_CMD = $(PYTHON) $(abspath $(MOZILLA_SRCDIR)/config/createprecomplete.py)</span>
<a href="#l2.662"></a><span id="l2.662" class="difflineminus">-</span>
<a href="#l2.663"></a><span id="l2.663" class="difflineminus">-# MDDEPDIR is the subdirectory where dependency files are stored</span>
<a href="#l2.664"></a><span id="l2.664" class="difflineminus">-MDDEPDIR := .deps</span>
<a href="#l2.665"></a><span id="l2.665" class="difflineminus">-</span>
<a href="#l2.666"></a><span id="l2.666" class="difflineminus">-EXPAND_LIBS_EXEC = $(PYTHON) $(MOZILLA_SRCDIR)/config/expandlibs_exec.py</span>
<a href="#l2.667"></a><span id="l2.667" class="difflineminus">-EXPAND_LIBS_GEN = $(PYTHON) $(MOZILLA_SRCDIR)/config/expandlibs_gen.py</span>
<a href="#l2.668"></a><span id="l2.668" class="difflineminus">-EXPAND_AR = $(EXPAND_LIBS_EXEC) --extract -- $(AR)</span>
<a href="#l2.669"></a><span id="l2.669" class="difflineminus">-EXPAND_CC = $(EXPAND_LIBS_EXEC) --uselist -- $(CC)</span>
<a href="#l2.670"></a><span id="l2.670" class="difflineminus">-EXPAND_CCC = $(EXPAND_LIBS_EXEC) --uselist -- $(CCC)</span>
<a href="#l2.671"></a><span id="l2.671" class="difflineminus">-EXPAND_LD = $(EXPAND_LIBS_EXEC) --uselist -- $(LD)</span>
<a href="#l2.672"></a><span id="l2.672" class="difflineminus">-EXPAND_MKSHLIB_ARGS = --uselist</span>
<a href="#l2.673"></a><span id="l2.673" class="difflineminus">-ifdef SYMBOL_ORDER</span>
<a href="#l2.674"></a><span id="l2.674" class="difflineminus">-EXPAND_MKSHLIB_ARGS += --symbol-order $(SYMBOL_ORDER)</span>
<a href="#l2.675"></a><span id="l2.675" class="difflineminus">-endif</span>
<a href="#l2.676"></a><span id="l2.676" class="difflineminus">-EXPAND_MKSHLIB = $(EXPAND_LIBS_EXEC) $(EXPAND_MKSHLIB_ARGS) -- $(MKSHLIB)</span>
<a href="#l2.677"></a><span id="l2.677" class="difflineminus">-</span>
<a href="#l2.678"></a><span id="l2.678" class="difflineminus">-# Include internal ply only if needed</span>
<a href="#l2.679"></a><span id="l2.679" class="difflineminus">-ifndef MOZ_SYSTEM_PLY</span>
<a href="#l2.680"></a><span id="l2.680" class="difflineminus">-PLY_INCLUDE = -I$(MOZILLA_DIR)/other-licenses/ply</span>
<a href="#l2.681"></a><span id="l2.681" class="difflineminus">-endif</span>
<a href="#l2.682"></a><span id="l2.682" class="difflineminus">- </span>
<a href="#l2.683"></a><span id="l2.683" class="difflineminus">-export CL_INCLUDES_PREFIX</span>
<a href="#l2.684"></a><span id="l2.684" class="difflineminus">-</span>
<a href="#l2.685"></a><span id="l2.685" class="difflineminus">-ifneq (,$(MOZ_LIBSTDCXX_TARGET_VERSION)$(MOZ_LIBSTDCXX_HOST_VERSION))</span>
<a href="#l2.686"></a><span id="l2.686" class="difflineminus">-endif</span>
<a href="#l2.687"></a><span id="l2.687" class="difflineminus">-</span>
<a href="#l2.688"></a><span id="l2.688" class="difflineminus">-# autoconf.mk sets OBJ_SUFFIX to an error to avoid use before including</span>
<a href="#l2.689"></a><span id="l2.689" class="difflineminus">-# this file</span>
<a href="#l2.690"></a><span id="l2.690" class="difflineminus">-OBJ_SUFFIX := $(_OBJ_SUFFIX)</span>
<a href="#l2.691"></a><span id="l2.691" class="difflineminus">-</span>
<a href="#l2.692"></a><span id="l2.692" class="difflineminus">-DEFINES += -DNO_NSPR_10_SUPPORT</span>
<a href="#l2.693"></a><span id="l2.693" class="difflineminus">-</span>
<a href="#l2.694"></a><span id="l2.694" class="difflineminus">-ifdef IS_GYP_DIR</span>
<a href="#l2.695"></a><span id="l2.695" class="difflineminus">-LOCAL_INCLUDES += \</span>
<a href="#l2.696"></a><span id="l2.696" class="difflineminus">-  -I$(topsrcdir)/ipc/chromium/src \</span>
<a href="#l2.697"></a><span id="l2.697" class="difflineminus">-  -I$(topsrcdir)/ipc/glue \</span>
<a href="#l2.698"></a><span id="l2.698" class="difflineminus">-  -I$(DEPTH)/ipc/ipdl/_ipdlheaders \</span>
<a href="#l2.699"></a><span id="l2.699" class="difflineminus">-  $(NULL)</span>
<a href="#l2.700"></a><span id="l2.700" class="difflineminus">-</span>
<a href="#l2.701"></a><span id="l2.701" class="difflineminus">-ifeq (WINNT,$(OS_TARGET))</span>
<a href="#l2.702"></a><span id="l2.702" class="difflineminus">-# These get set via VC project file settings for normal GYP builds.</span>
<a href="#l2.703"></a><span id="l2.703" class="difflineminus">-DEFINES += -DUNICODE -D_UNICODE</span>
<a href="#l2.704"></a><span id="l2.704" class="difflineminus">-endif</span>
<a href="#l2.705"></a><span id="l2.705" class="difflineminus">-</span>
<a href="#l2.706"></a><span id="l2.706" class="difflineminus">-DISABLE_STL_WRAPPING := 1</span>
<a href="#l2.707"></a><span id="l2.707" class="difflineminus">-# Skip most Mozilla-specific include locations.</span>
<a href="#l2.708"></a><span id="l2.708" class="difflineminus">-INCLUDES = -I. $(LOCAL_INCLUDES) -I$(DEPTH)/dist/include</span>
<a href="#l2.709"></a><span id="l2.709" class="difflineminus">-endif</span>
<a href="#l2.710"></a><span id="l2.710" class="difflineminus">-</span>
<a href="#l2.711"></a><span id="l2.711" class="difflineminus">-# Run a named Python build action. The first argument is the name of the build</span>
<a href="#l2.712"></a><span id="l2.712" class="difflineminus">-# action. The second argument are the arguments to pass to the action (space</span>
<a href="#l2.713"></a><span id="l2.713" class="difflineminus">-# delimited arguments). e.g.</span>
<a href="#l2.714"></a><span id="l2.714" class="difflineminus">-#</span>
<a href="#l2.715"></a><span id="l2.715" class="difflineminus">-#   libs::</span>
<a href="#l2.716"></a><span id="l2.716" class="difflineminus">-#       $(call py_action,purge_manifests,_build_manifests/purge/foo.manifest)</span>
<a href="#l2.717"></a><span id="l2.717" class="difflineminus">-py_action = $(PYTHON) -m mozbuild.action.$(1) $(2)</span>
<a href="#l2.718"></a><span id="l2.718" class="difflineplus">+# Just use mozilla-central's copy of config.mk now.</span>
<a href="#l2.719"></a><span id="l2.719" class="difflineplus">+include $(MOZILLA_DIR)/config/config.mk</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/config/rules.mk</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/config/rules.mk</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -4,1684 +4,10 @@</span>
<a href="#l3.4"></a><span id="l3.4"> # License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a href="#l3.5"></a><span id="l3.5"> # You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l3.6"></a><span id="l3.6"> #</span>
<a href="#l3.7"></a><span id="l3.7"> </span>
<a href="#l3.8"></a><span id="l3.8"> ifndef topsrcdir</span>
<a href="#l3.9"></a><span id="l3.9"> $(error topsrcdir was not set))</span>
<a href="#l3.10"></a><span id="l3.10"> endif</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-# Define an include-at-most-once flag</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-ifdef INCLUDED_RULES_MK</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-$(error Do not include rules.mk twice!)</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-endif</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-INCLUDED_RULES_MK = 1</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-# Make sure that anything that needs to be defined in moz.build wasn't</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-# overwritten.</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-_eval_for_side_effects := $(CHECK_MOZBUILD_VARIABLES)</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-ifndef MOZILLA_DIR</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-MOZILLA_DIR = $(MOZILLA_SRCDIR)</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-endif</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-ifndef INCLUDED_CONFIG_MK</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineminus">-include $(topsrcdir)/config/config.mk</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineminus">-endif</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineminus">-</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-ifndef INCLUDED_VERSION_MK</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-include $(topsrcdir)/config/version.mk</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-endif</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-USE_AUTOTARGETS_MK = 1</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-include $(topsrcdir)/config/makefiles/makeutils.mk</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-REPORT_BUILD = $(info $(notdir $&lt;))</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-EXEC			= exec</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-# ELOG prints out failed command when building silently (gmake -s). Pymake</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-# prints out failed commands anyway, so ELOG just makes things worse by</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-# forcing shell invocations.</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-ifndef .PYMAKE</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-ifneq (,$(findstring s, $(filter-out --%, $(MAKEFLAGS))))</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-  ELOG := $(EXEC) sh $(BUILD_TOOLS)/print-failed-commands.sh</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-else</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-  ELOG :=</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-endif # -s</span>
<a href="#l3.50"></a><span id="l3.50" class="difflineminus">-else</span>
<a href="#l3.51"></a><span id="l3.51" class="difflineminus">-  ELOG :=</span>
<a href="#l3.52"></a><span id="l3.52" class="difflineminus">-endif # ifndef .PYMAKE</span>
<a href="#l3.53"></a><span id="l3.53" class="difflineminus">-</span>
<a href="#l3.54"></a><span id="l3.54" class="difflineminus">-_VPATH_SRCS = $(abspath $&lt;)</span>
<a href="#l3.55"></a><span id="l3.55" class="difflineminus">-</span>
<a href="#l3.56"></a><span id="l3.56" class="difflineminus">-################################################################################</span>
<a href="#l3.57"></a><span id="l3.57" class="difflineminus">-# Testing frameworks support</span>
<a href="#l3.58"></a><span id="l3.58" class="difflineminus">-################################################################################</span>
<a href="#l3.59"></a><span id="l3.59" class="difflineminus">-</span>
<a href="#l3.60"></a><span id="l3.60" class="difflineminus">-ifdef ENABLE_TESTS</span>
<a href="#l3.61"></a><span id="l3.61" class="difflineminus">-</span>
<a href="#l3.62"></a><span id="l3.62" class="difflineminus">-# Add test directories to the regular directories list. TEST_DIRS should</span>
<a href="#l3.63"></a><span id="l3.63" class="difflineminus">-# arguably have the same status as other *_DIRS variables. It is coded this way</span>
<a href="#l3.64"></a><span id="l3.64" class="difflineminus">-# until Makefiles stop using the &quot;ifdef ENABLE_TESTS; DIRS +=&quot; convention.</span>
<a href="#l3.65"></a><span id="l3.65" class="difflineminus">-#</span>
<a href="#l3.66"></a><span id="l3.66" class="difflineminus">-# The current developer workflow expects tests to be updated when processing</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-# the default target. If we ever change this implementation, the behavior</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-# should be preserved or the change should be widely communicated. A</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-# consequence of not processing test dir targets during the default target is</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineminus">-# that changes to tests may not be updated and code could assume to pass</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-# locally against non-current test code.</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineminus">-DIRS += $(TEST_DIRS)</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineminus">-</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineminus">-ifdef CPP_UNIT_TESTS</span>
<a href="#l3.75"></a><span id="l3.75" class="difflineminus">-ifdef COMPILE_ENVIRONMENT</span>
<a href="#l3.76"></a><span id="l3.76" class="difflineminus">-</span>
<a href="#l3.77"></a><span id="l3.77" class="difflineminus">-# Compile the tests to $(DIST)/bin.  Make lots of niceties available by default</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineminus">-# through TestHarness.h, by modifying the list of includes and the libs against</span>
<a href="#l3.79"></a><span id="l3.79" class="difflineminus">-# which stuff links.</span>
<a href="#l3.80"></a><span id="l3.80" class="difflineminus">-SIMPLE_PROGRAMS += $(CPP_UNIT_TESTS)</span>
<a href="#l3.81"></a><span id="l3.81" class="difflineminus">-INCLUDES += -I$(DIST)/include/testing</span>
<a href="#l3.82"></a><span id="l3.82" class="difflineminus">-</span>
<a href="#l3.83"></a><span id="l3.83" class="difflineminus">-ifndef MOZ_PROFILE_GENERATE</span>
<a href="#l3.84"></a><span id="l3.84" class="difflineminus">-CPP_UNIT_TESTS_FILES = $(CPP_UNIT_TESTS)</span>
<a href="#l3.85"></a><span id="l3.85" class="difflineminus">-CPP_UNIT_TESTS_DEST = $(DIST)/cppunittests</span>
<a href="#l3.86"></a><span id="l3.86" class="difflineminus">-CPP_UNIT_TESTS_TARGET = target</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineminus">-INSTALL_TARGETS += CPP_UNIT_TESTS</span>
<a href="#l3.88"></a><span id="l3.88" class="difflineminus">-endif</span>
<a href="#l3.89"></a><span id="l3.89" class="difflineminus">-</span>
<a href="#l3.90"></a><span id="l3.90" class="difflineminus">-run-cppunittests::</span>
<a href="#l3.91"></a><span id="l3.91" class="difflineminus">-	@$(PYTHON) $(topsrcdir)/testing/runcppunittests.py --xre-path=$(DIST)/bin --symbols-path=$(DIST)/crashreporter-symbols $(CPP_UNIT_TESTS)</span>
<a href="#l3.92"></a><span id="l3.92" class="difflineminus">-</span>
<a href="#l3.93"></a><span id="l3.93" class="difflineminus">-endif # COMPILE_ENVIRONMENT</span>
<a href="#l3.94"></a><span id="l3.94" class="difflineminus">-endif # CPP_UNIT_TESTS</span>
<a href="#l3.95"></a><span id="l3.95" class="difflineminus">-</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineminus">-.PHONY: check xpcshell-tests check-interactive check-one</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineminus">-</span>
<a href="#l3.98"></a><span id="l3.98" class="difflineminus">-endif # ENABLE_TESTS</span>
<a href="#l3.99"></a><span id="l3.99" class="difflineminus">-</span>
<a href="#l3.100"></a><span id="l3.100" class="difflineminus">-</span>
<a href="#l3.101"></a><span id="l3.101" class="difflineminus">-#</span>
<a href="#l3.102"></a><span id="l3.102" class="difflineminus">-# Library rules</span>
<a href="#l3.103"></a><span id="l3.103" class="difflineminus">-#</span>
<a href="#l3.104"></a><span id="l3.104" class="difflineminus">-# If FORCE_STATIC_LIB is set, build a static library.</span>
<a href="#l3.105"></a><span id="l3.105" class="difflineminus">-# Otherwise, build a shared library.</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineminus">-#</span>
<a href="#l3.107"></a><span id="l3.107" class="difflineminus">-</span>
<a href="#l3.108"></a><span id="l3.108" class="difflineminus">-ifndef LIBRARY</span>
<a href="#l3.109"></a><span id="l3.109" class="difflineminus">-ifdef REAL_LIBRARY</span>
<a href="#l3.110"></a><span id="l3.110" class="difflineminus">-# Don't build actual static library if a shared library is also built</span>
<a href="#l3.111"></a><span id="l3.111" class="difflineminus">-ifdef FORCE_SHARED_LIB</span>
<a href="#l3.112"></a><span id="l3.112" class="difflineminus">-# ... except when we really want one</span>
<a href="#l3.113"></a><span id="l3.113" class="difflineminus">-ifdef NO_EXPAND_LIBS</span>
<a href="#l3.114"></a><span id="l3.114" class="difflineminus">-LIBRARY			:= $(REAL_LIBRARY)</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineminus">-else</span>
<a href="#l3.116"></a><span id="l3.116" class="difflineminus">-LIBRARY			:= $(REAL_LIBRARY).$(LIBS_DESC_SUFFIX)</span>
<a href="#l3.117"></a><span id="l3.117" class="difflineminus">-endif</span>
<a href="#l3.118"></a><span id="l3.118" class="difflineminus">-else</span>
<a href="#l3.119"></a><span id="l3.119" class="difflineminus">-# Only build actual library if it is installed in DIST/lib or SDK</span>
<a href="#l3.120"></a><span id="l3.120" class="difflineminus">-ifeq (,$(SDK_LIBRARY)$(DIST_INSTALL)$(NO_EXPAND_LIBS))</span>
<a href="#l3.121"></a><span id="l3.121" class="difflineminus">-LIBRARY			:= $(REAL_LIBRARY).$(LIBS_DESC_SUFFIX)</span>
<a href="#l3.122"></a><span id="l3.122" class="difflineminus">-else</span>
<a href="#l3.123"></a><span id="l3.123" class="difflineminus">-ifdef NO_EXPAND_LIBS</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineminus">-LIBRARY                 := $(REAL_LIBRARY)</span>
<a href="#l3.125"></a><span id="l3.125" class="difflineminus">-else</span>
<a href="#l3.126"></a><span id="l3.126" class="difflineminus">-LIBRARY			:= $(REAL_LIBRARY) $(REAL_LIBRARY).$(LIBS_DESC_SUFFIX)</span>
<a href="#l3.127"></a><span id="l3.127" class="difflineminus">-endif</span>
<a href="#l3.128"></a><span id="l3.128" class="difflineminus">-endif</span>
<a href="#l3.129"></a><span id="l3.129" class="difflineminus">-endif</span>
<a href="#l3.130"></a><span id="l3.130" class="difflineminus">-endif # REAL_LIBRARY</span>
<a href="#l3.131"></a><span id="l3.131" class="difflineminus">-endif # LIBRARY</span>
<a href="#l3.132"></a><span id="l3.132" class="difflineminus">-</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineminus">-ifndef HOST_LIBRARY</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineminus">-ifdef HOST_LIBRARY_NAME</span>
<a href="#l3.135"></a><span id="l3.135" class="difflineminus">-HOST_LIBRARY		:= $(LIB_PREFIX)$(HOST_LIBRARY_NAME).$(LIB_SUFFIX)</span>
<a href="#l3.136"></a><span id="l3.136" class="difflineminus">-endif</span>
<a href="#l3.137"></a><span id="l3.137" class="difflineminus">-endif</span>
<a href="#l3.138"></a><span id="l3.138" class="difflineminus">-</span>
<a href="#l3.139"></a><span id="l3.139" class="difflineminus">-ifdef LIBRARY</span>
<a href="#l3.140"></a><span id="l3.140" class="difflineminus">-ifdef FORCE_SHARED_LIB</span>
<a href="#l3.141"></a><span id="l3.141" class="difflineminus">-ifdef MKSHLIB</span>
<a href="#l3.142"></a><span id="l3.142" class="difflineminus">-</span>
<a href="#l3.143"></a><span id="l3.143" class="difflineminus">-ifdef LIB_IS_C_ONLY</span>
<a href="#l3.144"></a><span id="l3.144" class="difflineminus">-MKSHLIB			= $(MKCSHLIB)</span>
<a href="#l3.145"></a><span id="l3.145" class="difflineminus">-endif</span>
<a href="#l3.146"></a><span id="l3.146" class="difflineminus">-</span>
<a href="#l3.147"></a><span id="l3.147" class="difflineminus">-EMBED_MANIFEST_AT=2</span>
<a href="#l3.148"></a><span id="l3.148" class="difflineminus">-</span>
<a href="#l3.149"></a><span id="l3.149" class="difflineminus">-endif # MKSHLIB</span>
<a href="#l3.150"></a><span id="l3.150" class="difflineminus">-endif # FORCE_SHARED_LIB</span>
<a href="#l3.151"></a><span id="l3.151" class="difflineminus">-endif # LIBRARY</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineminus">-</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l3.154"></a><span id="l3.154" class="difflineminus">-ifndef GNU_CC</span>
<a href="#l3.155"></a><span id="l3.155" class="difflineminus">-</span>
<a href="#l3.156"></a><span id="l3.156" class="difflineminus">-#</span>
<a href="#l3.157"></a><span id="l3.157" class="difflineminus">-# Unless we're building SIMPLE_PROGRAMS, all C++ files share a PDB file per</span>
<a href="#l3.158"></a><span id="l3.158" class="difflineminus">-# directory. For parallel builds, this PDB file is shared and locked by</span>
<a href="#l3.159"></a><span id="l3.159" class="difflineminus">-# MSPDBSRV.EXE, starting with MSVC8 SP1. If you're using MSVC 7.1 or MSVC8</span>
<a href="#l3.160"></a><span id="l3.160" class="difflineminus">-# without SP1, don't do parallel builds.</span>
<a href="#l3.161"></a><span id="l3.161" class="difflineminus">-#</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineminus">-# The final PDB for libraries and programs is created by the linker and uses</span>
<a href="#l3.163"></a><span id="l3.163" class="difflineminus">-# a different name from the single PDB file created by the compiler. See</span>
<a href="#l3.164"></a><span id="l3.164" class="difflineminus">-# bug 462740.</span>
<a href="#l3.165"></a><span id="l3.165" class="difflineminus">-#</span>
<a href="#l3.166"></a><span id="l3.166" class="difflineminus">-</span>
<a href="#l3.167"></a><span id="l3.167" class="difflineminus">-ifdef SIMPLE_PROGRAMS</span>
<a href="#l3.168"></a><span id="l3.168" class="difflineminus">-COMPILE_PDB_FLAG ?= -Fd$(basename $(@F)).pdb</span>
<a href="#l3.169"></a><span id="l3.169" class="difflineminus">-else</span>
<a href="#l3.170"></a><span id="l3.170" class="difflineminus">-COMPILE_PDB_FLAG ?= -Fdgenerated.pdb</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineminus">-endif</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineminus">-COMPILE_CFLAGS += $(COMPILE_PDB_FLAG)</span>
<a href="#l3.173"></a><span id="l3.173" class="difflineminus">-COMPILE_CXXFLAGS += $(COMPILE_PDB_FLAG)</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineminus">-</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineminus">-LINK_PDBFILE ?= $(basename $(@F)).pdb</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineminus">-ifdef MOZ_DEBUG</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineminus">-CODFILE=$(basename $(@F)).cod</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineminus">-endif</span>
<a href="#l3.179"></a><span id="l3.179" class="difflineminus">-</span>
<a href="#l3.180"></a><span id="l3.180" class="difflineminus">-ifdef DEFFILE</span>
<a href="#l3.181"></a><span id="l3.181" class="difflineminus">-OS_LDFLAGS += -DEF:$(call normalizepath,$(DEFFILE))</span>
<a href="#l3.182"></a><span id="l3.182" class="difflineminus">-EXTRA_DEPS += $(DEFFILE)</span>
<a href="#l3.183"></a><span id="l3.183" class="difflineminus">-endif</span>
<a href="#l3.184"></a><span id="l3.184" class="difflineminus">-</span>
<a href="#l3.185"></a><span id="l3.185" class="difflineminus">-else #!GNU_CC</span>
<a href="#l3.186"></a><span id="l3.186" class="difflineminus">-</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineminus">-ifdef DEFFILE</span>
<a href="#l3.188"></a><span id="l3.188" class="difflineminus">-OS_LDFLAGS += $(call normalizepath,$(DEFFILE))</span>
<a href="#l3.189"></a><span id="l3.189" class="difflineminus">-EXTRA_DEPS += $(DEFFILE)</span>
<a href="#l3.190"></a><span id="l3.190" class="difflineminus">-endif</span>
<a href="#l3.191"></a><span id="l3.191" class="difflineminus">-</span>
<a href="#l3.192"></a><span id="l3.192" class="difflineminus">-endif # !GNU_CC</span>
<a href="#l3.193"></a><span id="l3.193" class="difflineminus">-</span>
<a href="#l3.194"></a><span id="l3.194" class="difflineminus">-endif # WINNT</span>
<a href="#l3.195"></a><span id="l3.195" class="difflineminus">-</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineminus">-ifeq ($(SOLARIS_SUNPRO_CXX),1)</span>
<a href="#l3.197"></a><span id="l3.197" class="difflineminus">-ifeq (86,$(findstring 86,$(OS_TEST)))</span>
<a href="#l3.198"></a><span id="l3.198" class="difflineminus">-OS_LDFLAGS += -M $(MOZILLA_DIR)/config/solaris_ia32.map</span>
<a href="#l3.199"></a><span id="l3.199" class="difflineminus">-endif # x86</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineminus">-endif # Solaris Sun Studio C++</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineminus">-</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineminus">-ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l3.203"></a><span id="l3.203" class="difflineminus">-HOST_PDBFILE=$(basename $(@F)).pdb</span>
<a href="#l3.204"></a><span id="l3.204" class="difflineminus">-HOST_PDB_FLAG ?= -Fd$(HOST_PDBFILE)</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineminus">-HOST_CFLAGS += $(HOST_PDB_FLAG)</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineminus">-HOST_CXXFLAGS += $(HOST_PDB_FLAG)</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineminus">-endif</span>
<a href="#l3.208"></a><span id="l3.208" class="difflineminus">-</span>
<a href="#l3.209"></a><span id="l3.209" class="difflineminus">-# Don't build SIMPLE_PROGRAMS during the MOZ_PROFILE_GENERATE pass</span>
<a href="#l3.210"></a><span id="l3.210" class="difflineminus">-ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l3.211"></a><span id="l3.211" class="difflineminus">-SIMPLE_PROGRAMS :=</span>
<a href="#l3.212"></a><span id="l3.212" class="difflineminus">-endif</span>
<a href="#l3.213"></a><span id="l3.213" class="difflineminus">-</span>
<a href="#l3.214"></a><span id="l3.214" class="difflineminus">-ifdef COMPILE_ENVIRONMENT</span>
<a href="#l3.215"></a><span id="l3.215" class="difflineminus">-ifndef TARGETS</span>
<a href="#l3.216"></a><span id="l3.216" class="difflineminus">-TARGETS			= $(LIBRARY) $(SHARED_LIBRARY) $(PROGRAM) $(SIMPLE_PROGRAMS) $(HOST_LIBRARY) $(HOST_PROGRAM) $(HOST_SIMPLE_PROGRAMS)</span>
<a href="#l3.217"></a><span id="l3.217" class="difflineminus">-endif</span>
<a href="#l3.218"></a><span id="l3.218" class="difflineminus">-</span>
<a href="#l3.219"></a><span id="l3.219" class="difflineminus">-COBJS = $(notdir $(CSRCS:.c=.$(OBJ_SUFFIX)))</span>
<a href="#l3.220"></a><span id="l3.220" class="difflineminus">-SOBJS = $(notdir $(SSRCS:.S=.$(OBJ_SUFFIX)))</span>
<a href="#l3.221"></a><span id="l3.221" class="difflineminus">-# CPPSRCS can have different extensions (eg: .cpp, .cc)</span>
<a href="#l3.222"></a><span id="l3.222" class="difflineminus">-CPPOBJS = $(notdir $(addsuffix .$(OBJ_SUFFIX),$(basename $(CPPSRCS))))</span>
<a href="#l3.223"></a><span id="l3.223" class="difflineminus">-CMOBJS = $(notdir $(CMSRCS:.m=.$(OBJ_SUFFIX)))</span>
<a href="#l3.224"></a><span id="l3.224" class="difflineminus">-CMMOBJS = $(notdir $(CMMSRCS:.mm=.$(OBJ_SUFFIX)))</span>
<a href="#l3.225"></a><span id="l3.225" class="difflineminus">-ASOBJS = $(notdir $(ASFILES:.$(ASM_SUFFIX)=.$(OBJ_SUFFIX)))</span>
<a href="#l3.226"></a><span id="l3.226" class="difflineminus">-ifndef OBJS</span>
<a href="#l3.227"></a><span id="l3.227" class="difflineminus">-_OBJS = $(COBJS) $(SOBJS) $(CPPOBJS) $(CMOBJS) $(CMMOBJS) $(ASOBJS)</span>
<a href="#l3.228"></a><span id="l3.228" class="difflineminus">-OBJS = $(strip $(_OBJS))</span>
<a href="#l3.229"></a><span id="l3.229" class="difflineminus">-endif</span>
<a href="#l3.230"></a><span id="l3.230" class="difflineminus">-</span>
<a href="#l3.231"></a><span id="l3.231" class="difflineminus">-HOST_COBJS = $(addprefix host_,$(notdir $(HOST_CSRCS:.c=.$(OBJ_SUFFIX))))</span>
<a href="#l3.232"></a><span id="l3.232" class="difflineminus">-# HOST_CPPOBJS can have different extensions (eg: .cpp, .cc)</span>
<a href="#l3.233"></a><span id="l3.233" class="difflineminus">-HOST_CPPOBJS = $(addprefix host_,$(notdir $(addsuffix .$(OBJ_SUFFIX),$(basename $(HOST_CPPSRCS)))))</span>
<a href="#l3.234"></a><span id="l3.234" class="difflineminus">-HOST_CMOBJS = $(addprefix host_,$(notdir $(HOST_CMSRCS:.m=.$(OBJ_SUFFIX))))</span>
<a href="#l3.235"></a><span id="l3.235" class="difflineminus">-HOST_CMMOBJS = $(addprefix host_,$(notdir $(HOST_CMMSRCS:.mm=.$(OBJ_SUFFIX))))</span>
<a href="#l3.236"></a><span id="l3.236" class="difflineminus">-ifndef HOST_OBJS</span>
<a href="#l3.237"></a><span id="l3.237" class="difflineminus">-_HOST_OBJS = $(HOST_COBJS) $(HOST_CPPOBJS) $(HOST_CMOBJS) $(HOST_CMMOBJS)</span>
<a href="#l3.238"></a><span id="l3.238" class="difflineminus">-HOST_OBJS = $(strip $(_HOST_OBJS))</span>
<a href="#l3.239"></a><span id="l3.239" class="difflineminus">-endif</span>
<a href="#l3.240"></a><span id="l3.240" class="difflineminus">-else</span>
<a href="#l3.241"></a><span id="l3.241" class="difflineminus">-LIBRARY :=</span>
<a href="#l3.242"></a><span id="l3.242" class="difflineminus">-SHARED_LIBRARY :=</span>
<a href="#l3.243"></a><span id="l3.243" class="difflineminus">-IMPORT_LIBRARY :=</span>
<a href="#l3.244"></a><span id="l3.244" class="difflineminus">-REAL_LIBRARY :=</span>
<a href="#l3.245"></a><span id="l3.245" class="difflineminus">-PROGRAM :=</span>
<a href="#l3.246"></a><span id="l3.246" class="difflineminus">-SIMPLE_PROGRAMS :=</span>
<a href="#l3.247"></a><span id="l3.247" class="difflineminus">-HOST_LIBRARY :=</span>
<a href="#l3.248"></a><span id="l3.248" class="difflineminus">-HOST_PROGRAM :=</span>
<a href="#l3.249"></a><span id="l3.249" class="difflineminus">-HOST_SIMPLE_PROGRAMS :=</span>
<a href="#l3.250"></a><span id="l3.250" class="difflineminus">-SDK_BINARY := $(filter %.py,$(SDK_BINARY))</span>
<a href="#l3.251"></a><span id="l3.251" class="difflineminus">-SDK_LIBRARY :=</span>
<a href="#l3.252"></a><span id="l3.252" class="difflineminus">-endif</span>
<a href="#l3.253"></a><span id="l3.253" class="difflineminus">-</span>
<a href="#l3.254"></a><span id="l3.254" class="difflineminus">-ALL_TRASH = \</span>
<a href="#l3.255"></a><span id="l3.255" class="difflineminus">-	$(GARBAGE) $(TARGETS) $(OBJS) $(PROGOBJS) LOGS TAGS a.out \</span>
<a href="#l3.256"></a><span id="l3.256" class="difflineminus">-	$(filter-out $(ASFILES),$(OBJS:.$(OBJ_SUFFIX)=.s)) $(OBJS:.$(OBJ_SUFFIX)=.ii) \</span>
<a href="#l3.257"></a><span id="l3.257" class="difflineminus">-	$(OBJS:.$(OBJ_SUFFIX)=.i) $(OBJS:.$(OBJ_SUFFIX)=.i_o) \</span>
<a href="#l3.258"></a><span id="l3.258" class="difflineminus">-	$(HOST_PROGOBJS) $(HOST_OBJS) $(IMPORT_LIBRARY) \</span>
<a href="#l3.259"></a><span id="l3.259" class="difflineminus">-	$(EXE_DEF_FILE) so_locations _gen _stubs $(wildcard *.res) $(wildcard *.RES) \</span>
<a href="#l3.260"></a><span id="l3.260" class="difflineminus">-	$(wildcard *.pdb) $(CODFILE) $(IMPORT_LIBRARY) \</span>
<a href="#l3.261"></a><span id="l3.261" class="difflineminus">-	$(SHARED_LIBRARY:$(DLL_SUFFIX)=.exp) $(wildcard *.ilk) \</span>
<a href="#l3.262"></a><span id="l3.262" class="difflineminus">-	$(PROGRAM:$(BIN_SUFFIX)=.exp) $(SIMPLE_PROGRAMS:$(BIN_SUFFIX)=.exp) \</span>
<a href="#l3.263"></a><span id="l3.263" class="difflineminus">-	$(PROGRAM:$(BIN_SUFFIX)=.lib) $(SIMPLE_PROGRAMS:$(BIN_SUFFIX)=.lib) \</span>
<a href="#l3.264"></a><span id="l3.264" class="difflineminus">-	$(SIMPLE_PROGRAMS:$(BIN_SUFFIX)=.$(OBJ_SUFFIX)) \</span>
<a href="#l3.265"></a><span id="l3.265" class="difflineminus">-	$(wildcard gts_tmp_*) $(LIBRARY:%.a=.%.timestamp)</span>
<a href="#l3.266"></a><span id="l3.266" class="difflineminus">-ALL_TRASH_DIRS = \</span>
<a href="#l3.267"></a><span id="l3.267" class="difflineminus">-	$(GARBAGE_DIRS) /no-such-file</span>
<a href="#l3.268"></a><span id="l3.268" class="difflineminus">-</span>
<a href="#l3.269"></a><span id="l3.269" class="difflineminus">-ifdef SIMPLE_PROGRAMS</span>
<a href="#l3.270"></a><span id="l3.270" class="difflineminus">-GARBAGE			+= $(SIMPLE_PROGRAMS:%=%.$(OBJ_SUFFIX))</span>
<a href="#l3.271"></a><span id="l3.271" class="difflineminus">-endif</span>
<a href="#l3.272"></a><span id="l3.272" class="difflineminus">-</span>
<a href="#l3.273"></a><span id="l3.273" class="difflineminus">-ifdef HOST_SIMPLE_PROGRAMS</span>
<a href="#l3.274"></a><span id="l3.274" class="difflineminus">-GARBAGE			+= $(HOST_SIMPLE_PROGRAMS:%=%.$(OBJ_SUFFIX))</span>
<a href="#l3.275"></a><span id="l3.275" class="difflineminus">-endif</span>
<a href="#l3.276"></a><span id="l3.276" class="difflineminus">-</span>
<a href="#l3.277"></a><span id="l3.277" class="difflineminus">-#</span>
<a href="#l3.278"></a><span id="l3.278" class="difflineminus">-# the Solaris WorkShop template repository cache.  it occasionally can get</span>
<a href="#l3.279"></a><span id="l3.279" class="difflineminus">-# out of sync, so targets like clobber should kill it.</span>
<a href="#l3.280"></a><span id="l3.280" class="difflineminus">-#</span>
<a href="#l3.281"></a><span id="l3.281" class="difflineminus">-ifeq ($(SOLARIS_SUNPRO_CXX),1)</span>
<a href="#l3.282"></a><span id="l3.282" class="difflineminus">-GARBAGE_DIRS += SunWS_cache</span>
<a href="#l3.283"></a><span id="l3.283" class="difflineminus">-endif</span>
<a href="#l3.284"></a><span id="l3.284" class="difflineminus">-</span>
<a href="#l3.285"></a><span id="l3.285" class="difflineminus">-ifdef MOZ_UPDATE_XTERM</span>
<a href="#l3.286"></a><span id="l3.286" class="difflineminus">-# Its good not to have a newline at the end of the titlebar string because it</span>
<a href="#l3.287"></a><span id="l3.287" class="difflineminus">-# makes the make -s output easier to read.  Echo -n does not work on all</span>
<a href="#l3.288"></a><span id="l3.288" class="difflineminus">-# platforms, but we can trick printf into doing it.</span>
<a href="#l3.289"></a><span id="l3.289" class="difflineminus">-ifeq (.,$(relativesrcdir))</span>
<a href="#l3.290"></a><span id="l3.290" class="difflineminus">-UPDATE_TITLE = printf '\033]0;%s in %s\007' $(1) $(2) ;</span>
<a href="#l3.291"></a><span id="l3.291" class="difflineminus">-else</span>
<a href="#l3.292"></a><span id="l3.292" class="difflineminus">-UPDATE_TITLE = printf '\033]0;%s in %s\007' $(1) $(relativesrcdir)/$(2) ;</span>
<a href="#l3.293"></a><span id="l3.293" class="difflineminus">-endif</span>
<a href="#l3.294"></a><span id="l3.294" class="difflineminus">-endif</span>
<a href="#l3.295"></a><span id="l3.295" class="difflineminus">-</span>
<a href="#l3.296"></a><span id="l3.296" class="difflineminus">-ifdef MACH</span>
<a href="#l3.297"></a><span id="l3.297" class="difflineminus">-ifndef NO_BUILDSTATUS_MESSAGES</span>
<a href="#l3.298"></a><span id="l3.298" class="difflineminus">-define BUILDSTATUS</span>
<a href="#l3.299"></a><span id="l3.299" class="difflineminus">-@echo 'BUILDSTATUS $1'</span>
<a href="#l3.300"></a><span id="l3.300" class="difflineminus">-</span>
<a href="#l3.301"></a><span id="l3.301" class="difflineminus">-endef</span>
<a href="#l3.302"></a><span id="l3.302" class="difflineminus">-endif</span>
<a href="#l3.303"></a><span id="l3.303" class="difflineminus">-endif</span>
<a href="#l3.304"></a><span id="l3.304" class="difflineminus">-</span>
<a href="#l3.305"></a><span id="l3.305" class="difflineminus">-define SUBMAKE # $(call SUBMAKE,target,directory,static)</span>
<a href="#l3.306"></a><span id="l3.306" class="difflineminus">-+@$(UPDATE_TITLE)</span>
<a href="#l3.307"></a><span id="l3.307" class="difflineminus">-+@$(MAKE) $(if $(2),-C $(2)) $(1)</span>
<a href="#l3.308"></a><span id="l3.308" class="difflineminus">-</span>
<a href="#l3.309"></a><span id="l3.309" class="difflineminus">-endef # The extra line is important here! don't delete it</span>
<a href="#l3.310"></a><span id="l3.310" class="difflineminus">-</span>
<a href="#l3.311"></a><span id="l3.311" class="difflineminus">-define TIER_DIR_SUBMAKE</span>
<a href="#l3.312"></a><span id="l3.312" class="difflineminus">-$(call SUBMAKE,$(4),$(3),$(5))</span>
<a href="#l3.313"></a><span id="l3.313" class="difflineminus">-</span>
<a href="#l3.314"></a><span id="l3.314" class="difflineminus">-endef # Ths empty line is important.</span>
<a href="#l3.315"></a><span id="l3.315" class="difflineminus">-</span>
<a href="#l3.316"></a><span id="l3.316" class="difflineminus">-ifneq (,$(strip $(DIRS)))</span>
<a href="#l3.317"></a><span id="l3.317" class="difflineminus">-LOOP_OVER_DIRS = \</span>
<a href="#l3.318"></a><span id="l3.318" class="difflineminus">-  $(foreach dir,$(DIRS),$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l3.319"></a><span id="l3.319" class="difflineminus">-endif</span>
<a href="#l3.320"></a><span id="l3.320" class="difflineminus">-</span>
<a href="#l3.321"></a><span id="l3.321" class="difflineminus">-#</span>
<a href="#l3.322"></a><span id="l3.322" class="difflineminus">-# Now we can differentiate between objects used to build a library, and</span>
<a href="#l3.323"></a><span id="l3.323" class="difflineminus">-# objects used to build an executable in the same directory.</span>
<a href="#l3.324"></a><span id="l3.324" class="difflineminus">-#</span>
<a href="#l3.325"></a><span id="l3.325" class="difflineminus">-ifndef PROGOBJS</span>
<a href="#l3.326"></a><span id="l3.326" class="difflineminus">-PROGOBJS		= $(OBJS)</span>
<a href="#l3.327"></a><span id="l3.327" class="difflineminus">-endif</span>
<a href="#l3.328"></a><span id="l3.328" class="difflineminus">-</span>
<a href="#l3.329"></a><span id="l3.329" class="difflineminus">-ifndef HOST_PROGOBJS</span>
<a href="#l3.330"></a><span id="l3.330" class="difflineminus">-HOST_PROGOBJS		= $(HOST_OBJS)</span>
<a href="#l3.331"></a><span id="l3.331" class="difflineminus">-endif</span>
<a href="#l3.332"></a><span id="l3.332" class="difflineminus">-</span>
<a href="#l3.333"></a><span id="l3.333" class="difflineminus">-GARBAGE_DIRS    += $(wildcard $(CURDIR)/$(MDDEPDIR))</span>
<a href="#l3.334"></a><span id="l3.334" class="difflineminus">-</span>
<a href="#l3.335"></a><span id="l3.335" class="difflineminus">-#</span>
<a href="#l3.336"></a><span id="l3.336" class="difflineminus">-# Tags: emacs (etags), vi (ctags)</span>
<a href="#l3.337"></a><span id="l3.337" class="difflineminus">-# TAG_PROGRAM := ctags -L -</span>
<a href="#l3.338"></a><span id="l3.338" class="difflineminus">-#</span>
<a href="#l3.339"></a><span id="l3.339" class="difflineminus">-TAG_PROGRAM		= xargs etags -a</span>
<a href="#l3.340"></a><span id="l3.340" class="difflineminus">-</span>
<a href="#l3.341"></a><span id="l3.341" class="difflineminus">-#</span>
<a href="#l3.342"></a><span id="l3.342" class="difflineminus">-# Turn on C++ linking if we have any .cpp or .mm files</span>
<a href="#l3.343"></a><span id="l3.343" class="difflineminus">-# (moved this from config.mk so that config.mk can be included</span>
<a href="#l3.344"></a><span id="l3.344" class="difflineminus">-#  before the CPPSRCS are defined)</span>
<a href="#l3.345"></a><span id="l3.345" class="difflineminus">-#</span>
<a href="#l3.346"></a><span id="l3.346" class="difflineminus">-ifneq ($(HOST_CPPSRCS)$(HOST_CMMSRCS),)</span>
<a href="#l3.347"></a><span id="l3.347" class="difflineminus">-HOST_CPP_PROG_LINK	= 1</span>
<a href="#l3.348"></a><span id="l3.348" class="difflineminus">-endif</span>
<a href="#l3.349"></a><span id="l3.349" class="difflineminus">-</span>
<a href="#l3.350"></a><span id="l3.350" class="difflineminus">-#</span>
<a href="#l3.351"></a><span id="l3.351" class="difflineminus">-# This will strip out symbols that the component should not be</span>
<a href="#l3.352"></a><span id="l3.352" class="difflineminus">-# exporting from the .dynsym section.</span>
<a href="#l3.353"></a><span id="l3.353" class="difflineminus">-#</span>
<a href="#l3.354"></a><span id="l3.354" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.355"></a><span id="l3.355" class="difflineminus">-EXTRA_DSO_LDOPTS += $(MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS)</span>
<a href="#l3.356"></a><span id="l3.356" class="difflineminus">-endif # IS_COMPONENT</span>
<a href="#l3.357"></a><span id="l3.357" class="difflineminus">-</span>
<a href="#l3.358"></a><span id="l3.358" class="difflineminus">-#</span>
<a href="#l3.359"></a><span id="l3.359" class="difflineminus">-# MacOS X specific stuff</span>
<a href="#l3.360"></a><span id="l3.360" class="difflineminus">-#</span>
<a href="#l3.361"></a><span id="l3.361" class="difflineminus">-</span>
<a href="#l3.362"></a><span id="l3.362" class="difflineminus">-ifeq ($(OS_ARCH),Darwin)</span>
<a href="#l3.363"></a><span id="l3.363" class="difflineminus">-ifdef SHARED_LIBRARY</span>
<a href="#l3.364"></a><span id="l3.364" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.365"></a><span id="l3.365" class="difflineminus">-EXTRA_DSO_LDOPTS	+= -bundle</span>
<a href="#l3.366"></a><span id="l3.366" class="difflineminus">-else</span>
<a href="#l3.367"></a><span id="l3.367" class="difflineminus">-EXTRA_DSO_LDOPTS	+= -dynamiclib -install_name @executable_path/$(SHARED_LIBRARY) -compatibility_version 1 -current_version 1 -single_module</span>
<a href="#l3.368"></a><span id="l3.368" class="difflineminus">-endif</span>
<a href="#l3.369"></a><span id="l3.369" class="difflineminus">-endif</span>
<a href="#l3.370"></a><span id="l3.370" class="difflineminus">-endif</span>
<a href="#l3.371"></a><span id="l3.371" class="difflineminus">-</span>
<a href="#l3.372"></a><span id="l3.372" class="difflineminus">-#</span>
<a href="#l3.373"></a><span id="l3.373" class="difflineminus">-# On NetBSD a.out systems, use -Bsymbolic.  This fixes what would otherwise be</span>
<a href="#l3.374"></a><span id="l3.374" class="difflineminus">-# fatal symbol name clashes between components.</span>
<a href="#l3.375"></a><span id="l3.375" class="difflineminus">-#</span>
<a href="#l3.376"></a><span id="l3.376" class="difflineminus">-ifeq ($(OS_ARCH),NetBSD)</span>
<a href="#l3.377"></a><span id="l3.377" class="difflineminus">-ifeq ($(DLL_SUFFIX),.so.1.0)</span>
<a href="#l3.378"></a><span id="l3.378" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.379"></a><span id="l3.379" class="difflineminus">-EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l3.380"></a><span id="l3.380" class="difflineminus">-endif</span>
<a href="#l3.381"></a><span id="l3.381" class="difflineminus">-endif</span>
<a href="#l3.382"></a><span id="l3.382" class="difflineminus">-endif</span>
<a href="#l3.383"></a><span id="l3.383" class="difflineminus">-</span>
<a href="#l3.384"></a><span id="l3.384" class="difflineminus">-ifeq ($(OS_ARCH),FreeBSD)</span>
<a href="#l3.385"></a><span id="l3.385" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.386"></a><span id="l3.386" class="difflineminus">-EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l3.387"></a><span id="l3.387" class="difflineminus">-endif</span>
<a href="#l3.388"></a><span id="l3.388" class="difflineminus">-endif</span>
<a href="#l3.389"></a><span id="l3.389" class="difflineminus">-</span>
<a href="#l3.390"></a><span id="l3.390" class="difflineminus">-ifeq ($(OS_ARCH),NetBSD)</span>
<a href="#l3.391"></a><span id="l3.391" class="difflineminus">-ifneq (,$(filter arc cobalt hpcmips mipsco newsmips pmax sgimips,$(OS_TEST)))</span>
<a href="#l3.392"></a><span id="l3.392" class="difflineminus">-ifneq (,$(filter layout/%,$(relativesrcdir)))</span>
<a href="#l3.393"></a><span id="l3.393" class="difflineminus">-OS_CFLAGS += -Wa,-xgot</span>
<a href="#l3.394"></a><span id="l3.394" class="difflineminus">-OS_CXXFLAGS += -Wa,-xgot</span>
<a href="#l3.395"></a><span id="l3.395" class="difflineminus">-endif</span>
<a href="#l3.396"></a><span id="l3.396" class="difflineminus">-endif</span>
<a href="#l3.397"></a><span id="l3.397" class="difflineminus">-endif</span>
<a href="#l3.398"></a><span id="l3.398" class="difflineminus">-</span>
<a href="#l3.399"></a><span id="l3.399" class="difflineminus">-#</span>
<a href="#l3.400"></a><span id="l3.400" class="difflineminus">-# HP-UXBeOS specific section: for COMPONENTS only, add -Bsymbolic flag</span>
<a href="#l3.401"></a><span id="l3.401" class="difflineminus">-# which uses internal symbols first</span>
<a href="#l3.402"></a><span id="l3.402" class="difflineminus">-#</span>
<a href="#l3.403"></a><span id="l3.403" class="difflineminus">-ifeq ($(OS_ARCH),HP-UX)</span>
<a href="#l3.404"></a><span id="l3.404" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.405"></a><span id="l3.405" class="difflineminus">-ifeq ($(GNU_CC)$(GNU_CXX),)</span>
<a href="#l3.406"></a><span id="l3.406" class="difflineminus">-EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l3.407"></a><span id="l3.407" class="difflineminus">-ifneq ($(HAS_EXTRAEXPORTS),1)</span>
<a href="#l3.408"></a><span id="l3.408" class="difflineminus">-MKSHLIB  += -Wl,+eNSGetModule -Wl,+eerrno</span>
<a href="#l3.409"></a><span id="l3.409" class="difflineminus">-MKCSHLIB += +eNSGetModule +eerrno</span>
<a href="#l3.410"></a><span id="l3.410" class="difflineminus">-ifneq ($(OS_TEST),ia64)</span>
<a href="#l3.411"></a><span id="l3.411" class="difflineminus">-MKSHLIB  += -Wl,+e_shlInit</span>
<a href="#l3.412"></a><span id="l3.412" class="difflineminus">-MKCSHLIB += +e_shlInit</span>
<a href="#l3.413"></a><span id="l3.413" class="difflineminus">-endif # !ia64</span>
<a href="#l3.414"></a><span id="l3.414" class="difflineminus">-endif # !HAS_EXTRAEXPORTS</span>
<a href="#l3.415"></a><span id="l3.415" class="difflineminus">-endif # non-gnu compilers</span>
<a href="#l3.416"></a><span id="l3.416" class="difflineminus">-endif # IS_COMPONENT</span>
<a href="#l3.417"></a><span id="l3.417" class="difflineminus">-endif # HP-UX</span>
<a href="#l3.418"></a><span id="l3.418" class="difflineminus">-</span>
<a href="#l3.419"></a><span id="l3.419" class="difflineminus">-ifeq ($(OS_ARCH),AIX)</span>
<a href="#l3.420"></a><span id="l3.420" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.421"></a><span id="l3.421" class="difflineminus">-ifneq ($(HAS_EXTRAEXPORTS),1)</span>
<a href="#l3.422"></a><span id="l3.422" class="difflineminus">-MKSHLIB += -bE:$(MOZILLA_DIR)/build/unix/aix.exp -bnoexpall</span>
<a href="#l3.423"></a><span id="l3.423" class="difflineminus">-MKCSHLIB += -bE:$(MOZILLA_DIR)/build/unix/aix.exp -bnoexpall</span>
<a href="#l3.424"></a><span id="l3.424" class="difflineminus">-endif # HAS_EXTRAEXPORTS</span>
<a href="#l3.425"></a><span id="l3.425" class="difflineminus">-endif # IS_COMPONENT</span>
<a href="#l3.426"></a><span id="l3.426" class="difflineminus">-endif # AIX</span>
<a href="#l3.427"></a><span id="l3.427" class="difflineminus">-</span>
<a href="#l3.428"></a><span id="l3.428" class="difflineminus">-#</span>
<a href="#l3.429"></a><span id="l3.429" class="difflineminus">-# Linux: add -Bsymbolic flag for components</span>
<a href="#l3.430"></a><span id="l3.430" class="difflineminus">-#</span>
<a href="#l3.431"></a><span id="l3.431" class="difflineminus">-ifeq ($(OS_ARCH),Linux)</span>
<a href="#l3.432"></a><span id="l3.432" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.433"></a><span id="l3.433" class="difflineminus">-EXTRA_DSO_LDOPTS += -Wl,-Bsymbolic</span>
<a href="#l3.434"></a><span id="l3.434" class="difflineminus">-endif</span>
<a href="#l3.435"></a><span id="l3.435" class="difflineminus">-ifdef LD_VERSION_SCRIPT</span>
<a href="#l3.436"></a><span id="l3.436" class="difflineminus">-EXTRA_DSO_LDOPTS += -Wl,--version-script,$(LD_VERSION_SCRIPT)</span>
<a href="#l3.437"></a><span id="l3.437" class="difflineminus">-EXTRA_DEPS += $(LD_VERSION_SCRIPT)</span>
<a href="#l3.438"></a><span id="l3.438" class="difflineminus">-endif</span>
<a href="#l3.439"></a><span id="l3.439" class="difflineminus">-endif</span>
<a href="#l3.440"></a><span id="l3.440" class="difflineminus">-</span>
<a href="#l3.441"></a><span id="l3.441" class="difflineminus">-#</span>
<a href="#l3.442"></a><span id="l3.442" class="difflineminus">-# GNU doesn't have path length limitation</span>
<a href="#l3.443"></a><span id="l3.443" class="difflineminus">-#</span>
<a href="#l3.444"></a><span id="l3.444" class="difflineminus">-</span>
<a href="#l3.445"></a><span id="l3.445" class="difflineminus">-ifeq ($(OS_ARCH),GNU)</span>
<a href="#l3.446"></a><span id="l3.446" class="difflineminus">-OS_CPPFLAGS += -DPATH_MAX=1024 -DMAXPATHLEN=1024</span>
<a href="#l3.447"></a><span id="l3.447" class="difflineminus">-endif</span>
<a href="#l3.448"></a><span id="l3.448" class="difflineminus">-</span>
<a href="#l3.449"></a><span id="l3.449" class="difflineminus">-#</span>
<a href="#l3.450"></a><span id="l3.450" class="difflineminus">-# MINGW32</span>
<a href="#l3.451"></a><span id="l3.451" class="difflineminus">-#</span>
<a href="#l3.452"></a><span id="l3.452" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l3.453"></a><span id="l3.453" class="difflineminus">-ifdef GNU_CC</span>
<a href="#l3.454"></a><span id="l3.454" class="difflineminus">-ifndef IS_COMPONENT</span>
<a href="#l3.455"></a><span id="l3.455" class="difflineminus">-DSO_LDOPTS += -Wl,--out-implib -Wl,$(IMPORT_LIBRARY)</span>
<a href="#l3.456"></a><span id="l3.456" class="difflineminus">-endif</span>
<a href="#l3.457"></a><span id="l3.457" class="difflineminus">-endif</span>
<a href="#l3.458"></a><span id="l3.458" class="difflineminus">-endif</span>
<a href="#l3.459"></a><span id="l3.459" class="difflineminus">-</span>
<a href="#l3.460"></a><span id="l3.460" class="difflineminus">-ifeq ($(USE_TVFS),1)</span>
<a href="#l3.461"></a><span id="l3.461" class="difflineminus">-IFLAGS1 = -rb</span>
<a href="#l3.462"></a><span id="l3.462" class="difflineminus">-IFLAGS2 = -rb</span>
<a href="#l3.463"></a><span id="l3.463" class="difflineminus">-else</span>
<a href="#l3.464"></a><span id="l3.464" class="difflineminus">-IFLAGS1 = -m 644</span>
<a href="#l3.465"></a><span id="l3.465" class="difflineminus">-IFLAGS2 = -m 755</span>
<a href="#l3.466"></a><span id="l3.466" class="difflineminus">-endif</span>
<a href="#l3.467"></a><span id="l3.467" class="difflineminus">-</span>
<a href="#l3.468"></a><span id="l3.468" class="difflineminus">-ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l3.469"></a><span id="l3.469" class="difflineminus">-OUTOPTION = -Fo# eol</span>
<a href="#l3.470"></a><span id="l3.470" class="difflineminus">-PREPROCESS_OPTION = -P -Fi# eol</span>
<a href="#l3.471"></a><span id="l3.471" class="difflineminus">-else</span>
<a href="#l3.472"></a><span id="l3.472" class="difflineminus">-OUTOPTION = -o # eol</span>
<a href="#l3.473"></a><span id="l3.473" class="difflineminus">-PREPROCESS_OPTION = -E -o #eol</span>
<a href="#l3.474"></a><span id="l3.474" class="difflineminus">-endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l3.475"></a><span id="l3.475" class="difflineminus">-</span>
<a href="#l3.476"></a><span id="l3.476" class="difflineminus">-ifneq (,$(filter ml%,$(AS)))</span>
<a href="#l3.477"></a><span id="l3.477" class="difflineminus">-ASOUTOPTION = -Fo# eol</span>
<a href="#l3.478"></a><span id="l3.478" class="difflineminus">-else</span>
<a href="#l3.479"></a><span id="l3.479" class="difflineminus">-ASOUTOPTION = -o # eol</span>
<a href="#l3.480"></a><span id="l3.480" class="difflineminus">-endif</span>
<a href="#l3.481"></a><span id="l3.481" class="difflineminus">-</span>
<a href="#l3.482"></a><span id="l3.482" class="difflineminus">-ifeq (,$(CROSS_COMPILE))</span>
<a href="#l3.483"></a><span id="l3.483" class="difflineminus">-HOST_OUTOPTION = $(OUTOPTION)</span>
<a href="#l3.484"></a><span id="l3.484" class="difflineminus">-else</span>
<a href="#l3.485"></a><span id="l3.485" class="difflineminus">-HOST_OUTOPTION = -o # eol</span>
<a href="#l3.486"></a><span id="l3.486" class="difflineminus">-endif</span>
<a href="#l3.487"></a><span id="l3.487" class="difflineminus">-################################################################################</span>
<a href="#l3.488"></a><span id="l3.488" class="difflineminus">-</span>
<a href="#l3.489"></a><span id="l3.489" class="difflineminus">-default all::</span>
<a href="#l3.490"></a><span id="l3.490" class="difflineminus">-	$(foreach tier,$(TIERS),$(call SUBMAKE,$(tier)))</span>
<a href="#l3.491"></a><span id="l3.491" class="difflineminus">-</span>
<a href="#l3.492"></a><span id="l3.492" class="difflineminus">-ifeq ($(findstring s,$(filter-out --%, $(MAKEFLAGS))),)</span>
<a href="#l3.493"></a><span id="l3.493" class="difflineminus">-ECHO := echo</span>
<a href="#l3.494"></a><span id="l3.494" class="difflineminus">-QUIET :=</span>
<a href="#l3.495"></a><span id="l3.495" class="difflineminus">-else</span>
<a href="#l3.496"></a><span id="l3.496" class="difflineminus">-ECHO := true</span>
<a href="#l3.497"></a><span id="l3.497" class="difflineminus">-QUIET := -q</span>
<a href="#l3.498"></a><span id="l3.498" class="difflineminus">-endif</span>
<a href="#l3.499"></a><span id="l3.499" class="difflineminus">-</span>
<a href="#l3.500"></a><span id="l3.500" class="difflineminus">-# Do everything from scratch</span>
<a href="#l3.501"></a><span id="l3.501" class="difflineminus">-everything::</span>
<a href="#l3.502"></a><span id="l3.502" class="difflineminus">-	$(MAKE) clean</span>
<a href="#l3.503"></a><span id="l3.503" class="difflineminus">-	$(MAKE) all</span>
<a href="#l3.504"></a><span id="l3.504" class="difflineminus">-</span>
<a href="#l3.505"></a><span id="l3.505" class="difflineminus">-STATIC_LIB_DEP = $(if $(wildcard $(1).$(LIBS_DESC_SUFFIX)),$(1).$(LIBS_DESC_SUFFIX),$(1))</span>
<a href="#l3.506"></a><span id="l3.506" class="difflineminus">-STATIC_LIBS_DEPS := $(foreach l,$(STATIC_LIBS),$(call STATIC_LIB_DEP,$(l)))</span>
<a href="#l3.507"></a><span id="l3.507" class="difflineminus">-</span>
<a href="#l3.508"></a><span id="l3.508" class="difflineminus">-# Dependencies which, if modified, should cause everything to rebuild</span>
<a href="#l3.509"></a><span id="l3.509" class="difflineminus">-GLOBAL_DEPS += Makefile $(DEPTH)/config/autoconf.mk $(topsrcdir)/config/config.mk</span>
<a href="#l3.510"></a><span id="l3.510" class="difflineminus">-</span>
<a href="#l3.511"></a><span id="l3.511" class="difflineminus">-##############################################</span>
<a href="#l3.512"></a><span id="l3.512" class="difflineminus">-ifdef COMPILE_ENVIRONMENT</span>
<a href="#l3.513"></a><span id="l3.513" class="difflineminus">-OBJ_TARGETS = $(OBJS) $(PROGOBJS) $(HOST_OBJS) $(HOST_PROGOBJS)</span>
<a href="#l3.514"></a><span id="l3.514" class="difflineminus">-</span>
<a href="#l3.515"></a><span id="l3.515" class="difflineminus">-compile:: host target</span>
<a href="#l3.516"></a><span id="l3.516" class="difflineminus">-</span>
<a href="#l3.517"></a><span id="l3.517" class="difflineminus">-host:: $(HOST_LIBRARY) $(HOST_PROGRAM) $(HOST_SIMPLE_PROGRAMS)</span>
<a href="#l3.518"></a><span id="l3.518" class="difflineminus">-</span>
<a href="#l3.519"></a><span id="l3.519" class="difflineminus">-target:: $(LIBRARY) $(SHARED_LIBRARY) $(PROGRAM) $(SIMPLE_PROGRAMS)</span>
<a href="#l3.520"></a><span id="l3.520" class="difflineminus">-</span>
<a href="#l3.521"></a><span id="l3.521" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.522"></a><span id="l3.522" class="difflineminus">-ifdef SHARED_LIBRARY</span>
<a href="#l3.523"></a><span id="l3.523" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.524"></a><span id="l3.524" class="difflineminus">-target:: $(SUBMAKEFILES) $(SHARED_LIBRARY)</span>
<a href="#l3.525"></a><span id="l3.525" class="difflineminus">-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(FINAL_TARGET)/components</span>
<a href="#l3.526"></a><span id="l3.526" class="difflineminus">-ifndef NO_COMPONENTS_MANIFEST</span>
<a href="#l3.527"></a><span id="l3.527" class="difflineminus">-	$(call py_action,buildlist,$(FINAL_TARGET)/chrome.manifest 'manifest components/components.manifest')</span>
<a href="#l3.528"></a><span id="l3.528" class="difflineminus">-	$(call py_action,buildlist,$(FINAL_TARGET)/components/components.manifest 'binary-component $(SHARED_LIBRARY)')</span>
<a href="#l3.529"></a><span id="l3.529" class="difflineminus">-endif</span>
<a href="#l3.530"></a><span id="l3.530" class="difflineminus">-endif # IS_COMPONENT</span>
<a href="#l3.531"></a><span id="l3.531" class="difflineminus">-endif # SHARED_LIBRARY</span>
<a href="#l3.532"></a><span id="l3.532" class="difflineminus">-endif # !NO_DIST_INSTALL</span>
<a href="#l3.533"></a><span id="l3.533" class="difflineminus">-</span>
<a href="#l3.534"></a><span id="l3.534" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.535"></a><span id="l3.535" class="difflineminus">-</span>
<a href="#l3.536"></a><span id="l3.536" class="difflineminus">-ifneq (,$(strip $(PROGRAM)$(SIMPLE_PROGRAMS)))</span>
<a href="#l3.537"></a><span id="l3.537" class="difflineminus">-PROGRAMS_EXECUTABLES = $(SIMPLE_PROGRAMS) $(PROGRAM)</span>
<a href="#l3.538"></a><span id="l3.538" class="difflineminus">-PROGRAMS_DEST ?= $(FINAL_TARGET)</span>
<a href="#l3.539"></a><span id="l3.539" class="difflineminus">-PROGRAMS_TARGET := target</span>
<a href="#l3.540"></a><span id="l3.540" class="difflineminus">-INSTALL_TARGETS += PROGRAMS</span>
<a href="#l3.541"></a><span id="l3.541" class="difflineminus">-endif</span>
<a href="#l3.542"></a><span id="l3.542" class="difflineminus">-</span>
<a href="#l3.543"></a><span id="l3.543" class="difflineminus">-ifdef LIBRARY</span>
<a href="#l3.544"></a><span id="l3.544" class="difflineminus">-ifdef DIST_INSTALL</span>
<a href="#l3.545"></a><span id="l3.545" class="difflineminus">-ifdef IS_COMPONENT</span>
<a href="#l3.546"></a><span id="l3.546" class="difflineminus">-        $(error Shipping static component libs makes no sense.)</span>
<a href="#l3.547"></a><span id="l3.547" class="difflineminus">-else</span>
<a href="#l3.548"></a><span id="l3.548" class="difflineminus">-DIST_LIBRARY_FILES = $(LIBRARY)</span>
<a href="#l3.549"></a><span id="l3.549" class="difflineminus">-DIST_LIBRARY_DEST ?= $(DIST)/lib</span>
<a href="#l3.550"></a><span id="l3.550" class="difflineminus">-DIST_LIBRARY_TARGET = target</span>
<a href="#l3.551"></a><span id="l3.551" class="difflineminus">-INSTALL_TARGETS += DIST_LIBRARY</span>
<a href="#l3.552"></a><span id="l3.552" class="difflineminus">-endif</span>
<a href="#l3.553"></a><span id="l3.553" class="difflineminus">-endif # DIST_INSTALL</span>
<a href="#l3.554"></a><span id="l3.554" class="difflineminus">-endif # LIBRARY</span>
<a href="#l3.555"></a><span id="l3.555" class="difflineminus">-</span>
<a href="#l3.556"></a><span id="l3.556" class="difflineminus">-</span>
<a href="#l3.557"></a><span id="l3.557" class="difflineminus">-ifdef SHARED_LIBRARY</span>
<a href="#l3.558"></a><span id="l3.558" class="difflineminus">-ifndef IS_COMPONENT</span>
<a href="#l3.559"></a><span id="l3.559" class="difflineminus">-SHARED_LIBRARY_FILES = $(SHARED_LIBRARY)</span>
<a href="#l3.560"></a><span id="l3.560" class="difflineminus">-SHARED_LIBRARY_DEST ?= $(FINAL_TARGET)</span>
<a href="#l3.561"></a><span id="l3.561" class="difflineminus">-SHARED_LIBRARY_TARGET = target</span>
<a href="#l3.562"></a><span id="l3.562" class="difflineminus">-INSTALL_TARGETS += SHARED_LIBRARY</span>
<a href="#l3.563"></a><span id="l3.563" class="difflineminus">-</span>
<a href="#l3.564"></a><span id="l3.564" class="difflineminus">-ifneq (,$(filter WINNT,$(OS_ARCH)))</span>
<a href="#l3.565"></a><span id="l3.565" class="difflineminus">-ifndef NO_INSTALL_IMPORT_LIBRARY</span>
<a href="#l3.566"></a><span id="l3.566" class="difflineminus">-IMPORT_LIB_FILES = $(IMPORT_LIBRARY)</span>
<a href="#l3.567"></a><span id="l3.567" class="difflineminus">-endif # NO_INSTALL_IMPORT_LIBRARY</span>
<a href="#l3.568"></a><span id="l3.568" class="difflineminus">-else</span>
<a href="#l3.569"></a><span id="l3.569" class="difflineminus">-IMPORT_LIB_FILES = $(SHARED_LIBRARY)</span>
<a href="#l3.570"></a><span id="l3.570" class="difflineminus">-endif</span>
<a href="#l3.571"></a><span id="l3.571" class="difflineminus">-</span>
<a href="#l3.572"></a><span id="l3.572" class="difflineminus">-IMPORT_LIB_DEST ?= $(DIST)/lib</span>
<a href="#l3.573"></a><span id="l3.573" class="difflineminus">-IMPORT_LIB_TARGET = target</span>
<a href="#l3.574"></a><span id="l3.574" class="difflineminus">-ifdef IMPORT_LIB_FILES</span>
<a href="#l3.575"></a><span id="l3.575" class="difflineminus">-INSTALL_TARGETS += IMPORT_LIB</span>
<a href="#l3.576"></a><span id="l3.576" class="difflineminus">-endif</span>
<a href="#l3.577"></a><span id="l3.577" class="difflineminus">-</span>
<a href="#l3.578"></a><span id="l3.578" class="difflineminus">-endif # ! IS_COMPONENT</span>
<a href="#l3.579"></a><span id="l3.579" class="difflineminus">-endif # SHARED_LIBRARY</span>
<a href="#l3.580"></a><span id="l3.580" class="difflineminus">-</span>
<a href="#l3.581"></a><span id="l3.581" class="difflineminus">-ifneq (,$(strip $(HOST_SIMPLE_PROGRAMS)$(HOST_PROGRAM)))</span>
<a href="#l3.582"></a><span id="l3.582" class="difflineminus">-HOST_PROGRAMS_EXECUTABLES = $(HOST_SIMPLE_PROGRAMS) $(HOST_PROGRAM)</span>
<a href="#l3.583"></a><span id="l3.583" class="difflineminus">-HOST_PROGRAMS_DEST ?= $(DIST)/host/bin</span>
<a href="#l3.584"></a><span id="l3.584" class="difflineminus">-HOST_PROGRAMS_TARGET = host</span>
<a href="#l3.585"></a><span id="l3.585" class="difflineminus">-INSTALL_TARGETS += HOST_PROGRAMS</span>
<a href="#l3.586"></a><span id="l3.586" class="difflineminus">-endif</span>
<a href="#l3.587"></a><span id="l3.587" class="difflineminus">-</span>
<a href="#l3.588"></a><span id="l3.588" class="difflineminus">-ifdef HOST_LIBRARY</span>
<a href="#l3.589"></a><span id="l3.589" class="difflineminus">-HOST_LIBRARY_FILES = $(HOST_LIBRARY)</span>
<a href="#l3.590"></a><span id="l3.590" class="difflineminus">-HOST_LIBRARY_DEST ?= $(DIST)/host/lib</span>
<a href="#l3.591"></a><span id="l3.591" class="difflineminus">-HOST_LIBRARY_TARGET = host</span>
<a href="#l3.592"></a><span id="l3.592" class="difflineminus">-INSTALL_TARGETS += HOST_LIBRARY</span>
<a href="#l3.593"></a><span id="l3.593" class="difflineminus">-endif</span>
<a href="#l3.594"></a><span id="l3.594" class="difflineminus">-</span>
<a href="#l3.595"></a><span id="l3.595" class="difflineminus">-endif # !NO_DIST_INSTALL</span>
<a href="#l3.596"></a><span id="l3.596" class="difflineminus">-</span>
<a href="#l3.597"></a><span id="l3.597" class="difflineminus">-endif</span>
<a href="#l3.598"></a><span id="l3.598" class="difflineminus">-</span>
<a href="#l3.599"></a><span id="l3.599" class="difflineminus">-##############################################</span>
<a href="#l3.600"></a><span id="l3.600" class="difflineminus">-ifneq (1,$(NO_PROFILE_GUIDED_OPTIMIZE))</span>
<a href="#l3.601"></a><span id="l3.601" class="difflineminus">-ifdef MOZ_PROFILE_USE</span>
<a href="#l3.602"></a><span id="l3.602" class="difflineminus">-ifeq ($(OS_ARCH)_$(GNU_CC), WINNT_)</span>
<a href="#l3.603"></a><span id="l3.603" class="difflineminus">-# When building with PGO, we have to make sure to re-link</span>
<a href="#l3.604"></a><span id="l3.604" class="difflineminus">-# in the MOZ_PROFILE_USE phase if we linked in the</span>
<a href="#l3.605"></a><span id="l3.605" class="difflineminus">-# MOZ_PROFILE_GENERATE phase. We'll touch this pgo.relink</span>
<a href="#l3.606"></a><span id="l3.606" class="difflineminus">-# file in the link rule in the GENERATE phase to indicate</span>
<a href="#l3.607"></a><span id="l3.607" class="difflineminus">-# that we need a relink.</span>
<a href="#l3.608"></a><span id="l3.608" class="difflineminus">-ifdef SHARED_LIBRARY</span>
<a href="#l3.609"></a><span id="l3.609" class="difflineminus">-$(SHARED_LIBRARY): pgo.relink</span>
<a href="#l3.610"></a><span id="l3.610" class="difflineminus">-endif</span>
<a href="#l3.611"></a><span id="l3.611" class="difflineminus">-ifdef PROGRAM</span>
<a href="#l3.612"></a><span id="l3.612" class="difflineminus">-$(PROGRAM): pgo.relink</span>
<a href="#l3.613"></a><span id="l3.613" class="difflineminus">-endif</span>
<a href="#l3.614"></a><span id="l3.614" class="difflineminus">-</span>
<a href="#l3.615"></a><span id="l3.615" class="difflineminus">-# In the second pass, we need to merge the pgc files into the pgd file.</span>
<a href="#l3.616"></a><span id="l3.616" class="difflineminus">-# The compiler would do this for us automatically if they were in the right</span>
<a href="#l3.617"></a><span id="l3.617" class="difflineminus">-# place, but they're in dist/bin.</span>
<a href="#l3.618"></a><span id="l3.618" class="difflineminus">-ifneq (,$(SHARED_LIBRARY)$(PROGRAM))</span>
<a href="#l3.619"></a><span id="l3.619" class="difflineminus">-export::</span>
<a href="#l3.620"></a><span id="l3.620" class="difflineminus">-ifdef PROGRAM</span>
<a href="#l3.621"></a><span id="l3.621" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/build/win32/pgomerge.py \</span>
<a href="#l3.622"></a><span id="l3.622" class="difflineminus">-	  $(PROGRAM:$(BIN_SUFFIX)=) $(DIST)/bin</span>
<a href="#l3.623"></a><span id="l3.623" class="difflineminus">-endif</span>
<a href="#l3.624"></a><span id="l3.624" class="difflineminus">-ifdef SHARED_LIBRARY</span>
<a href="#l3.625"></a><span id="l3.625" class="difflineminus">-	$(PYTHON) $(MOZILLA_SRCDIR)/build/win32/pgomerge.py \</span>
<a href="#l3.626"></a><span id="l3.626" class="difflineminus">-	  $(patsubst $(DLL_PREFIX)%$(DLL_SUFFIX),%,$(SHARED_LIBRARY)) $(DIST)/bin</span>
<a href="#l3.627"></a><span id="l3.627" class="difflineminus">-endif</span>
<a href="#l3.628"></a><span id="l3.628" class="difflineminus">-endif # SHARED_LIBRARY || PROGRAM</span>
<a href="#l3.629"></a><span id="l3.629" class="difflineminus">-endif # WINNT_</span>
<a href="#l3.630"></a><span id="l3.630" class="difflineminus">-endif # MOZ_PROFILE_USE</span>
<a href="#l3.631"></a><span id="l3.631" class="difflineminus">-ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l3.632"></a><span id="l3.632" class="difflineminus">-# Clean up profiling data during PROFILE_GENERATE phase</span>
<a href="#l3.633"></a><span id="l3.633" class="difflineminus">-export::</span>
<a href="#l3.634"></a><span id="l3.634" class="difflineminus">-ifeq ($(OS_ARCH)_$(GNU_CC), WINNT_)</span>
<a href="#l3.635"></a><span id="l3.635" class="difflineminus">-	$(foreach pgd,$(wildcard *.pgd),pgomgr -clear $(pgd);)</span>
<a href="#l3.636"></a><span id="l3.636" class="difflineminus">-else</span>
<a href="#l3.637"></a><span id="l3.637" class="difflineminus">-ifdef GNU_CC</span>
<a href="#l3.638"></a><span id="l3.638" class="difflineminus">-	-$(RM) *.gcda</span>
<a href="#l3.639"></a><span id="l3.639" class="difflineminus">-endif</span>
<a href="#l3.640"></a><span id="l3.640" class="difflineminus">-endif</span>
<a href="#l3.641"></a><span id="l3.641" class="difflineminus">-endif</span>
<a href="#l3.642"></a><span id="l3.642" class="difflineminus">-</span>
<a href="#l3.643"></a><span id="l3.643" class="difflineminus">-ifneq (,$(MOZ_PROFILE_GENERATE)$(MOZ_PROFILE_USE))</span>
<a href="#l3.644"></a><span id="l3.644" class="difflineminus">-ifdef GNU_CC</span>
<a href="#l3.645"></a><span id="l3.645" class="difflineminus">-# Force rebuilding libraries and programs in both passes because each</span>
<a href="#l3.646"></a><span id="l3.646" class="difflineminus">-# pass uses different object files.</span>
<a href="#l3.647"></a><span id="l3.647" class="difflineminus">-$(PROGRAM) $(SHARED_LIBRARY) $(LIBRARY): FORCE</span>
<a href="#l3.648"></a><span id="l3.648" class="difflineminus">-endif</span>
<a href="#l3.649"></a><span id="l3.649" class="difflineminus">-endif</span>
<a href="#l3.650"></a><span id="l3.650" class="difflineminus">-</span>
<a href="#l3.651"></a><span id="l3.651" class="difflineminus">-endif # NO_PROFILE_GUIDED_OPTIMIZE</span>
<a href="#l3.652"></a><span id="l3.652" class="difflineminus">-</span>
<a href="#l3.653"></a><span id="l3.653" class="difflineminus">-##############################################</span>
<a href="#l3.654"></a><span id="l3.654" class="difflineminus">-</span>
<a href="#l3.655"></a><span id="l3.655" class="difflineminus">-checkout:</span>
<a href="#l3.656"></a><span id="l3.656" class="difflineminus">-	$(PYTHON) $(topsrcdir)/client.py checkout</span>
<a href="#l3.657"></a><span id="l3.657" class="difflineminus">-</span>
<a href="#l3.658"></a><span id="l3.658" class="difflineminus">-clean clobber realclean clobber_all::</span>
<a href="#l3.659"></a><span id="l3.659" class="difflineminus">-	-$(RM) $(ALL_TRASH)</span>
<a href="#l3.660"></a><span id="l3.660" class="difflineminus">-	-$(RM) -r $(ALL_TRASH_DIRS)</span>
<a href="#l3.661"></a><span id="l3.661" class="difflineminus">-</span>
<a href="#l3.662"></a><span id="l3.662" class="difflineminus">-ifdef TIERS</span>
<a href="#l3.663"></a><span id="l3.663" class="difflineminus">-clean clobber realclean clobber_all distclean::</span>
<a href="#l3.664"></a><span id="l3.664" class="difflineminus">-	$(foreach dir, \</span>
<a href="#l3.665"></a><span id="l3.665" class="difflineminus">-		$(foreach tier, $(TIERS), $(tier_$(tier)_staticdirs) $(tier_$(tier)_dirs)), \</span>
<a href="#l3.666"></a><span id="l3.666" class="difflineminus">-		-$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l3.667"></a><span id="l3.667" class="difflineminus">-else</span>
<a href="#l3.668"></a><span id="l3.668" class="difflineminus">-clean clobber realclean clobber_all distclean::</span>
<a href="#l3.669"></a><span id="l3.669" class="difflineminus">-	$(foreach dir,$(DIRS),-$(call SUBMAKE,$@,$(dir)))</span>
<a href="#l3.670"></a><span id="l3.670" class="difflineminus">-endif</span>
<a href="#l3.671"></a><span id="l3.671" class="difflineminus">-</span>
<a href="#l3.672"></a><span id="l3.672" class="difflineminus">-distclean::</span>
<a href="#l3.673"></a><span id="l3.673" class="difflineminus">-	-$(RM) -r $(ALL_TRASH_DIRS)</span>
<a href="#l3.674"></a><span id="l3.674" class="difflineminus">-	-$(RM) $(ALL_TRASH)  \</span>
<a href="#l3.675"></a><span id="l3.675" class="difflineminus">-	Makefile .HSancillary \</span>
<a href="#l3.676"></a><span id="l3.676" class="difflineminus">-	$(wildcard *.$(OBJ_SUFFIX)) $(wildcard *.ho) $(wildcard host_*.o*) \</span>
<a href="#l3.677"></a><span id="l3.677" class="difflineminus">-	$(wildcard *.$(LIB_SUFFIX)) $(wildcard *$(DLL_SUFFIX)) \</span>
<a href="#l3.678"></a><span id="l3.678" class="difflineminus">-	$(wildcard *.$(IMPORT_LIB_SUFFIX))</span>
<a href="#l3.679"></a><span id="l3.679" class="difflineminus">-</span>
<a href="#l3.680"></a><span id="l3.680" class="difflineminus">-alltags:</span>
<a href="#l3.681"></a><span id="l3.681" class="difflineminus">-	$(RM) TAGS</span>
<a href="#l3.682"></a><span id="l3.682" class="difflineminus">-	find $(topsrcdir) -name dist -prune -o \( -name '*.[hc]' -o -name '*.cp' -o -name '*.cpp' -o -name '*.idl' \) -print | $(TAG_PROGRAM)</span>
<a href="#l3.683"></a><span id="l3.683" class="difflineminus">-</span>
<a href="#l3.684"></a><span id="l3.684" class="difflineminus">-#</span>
<a href="#l3.685"></a><span id="l3.685" class="difflineminus">-# PROGRAM = Foo</span>
<a href="#l3.686"></a><span id="l3.686" class="difflineminus">-# creates OBJS, links with LIBS to create Foo</span>
<a href="#l3.687"></a><span id="l3.687" class="difflineminus">-#</span>
<a href="#l3.688"></a><span id="l3.688" class="difflineminus">-$(PROGRAM): $(PROGOBJS) $(STATIC_LIBS_DEPS) $(EXTRA_DEPS) $(EXE_DEF_FILE) $(RESFILE) $(GLOBAL_DEPS)</span>
<a href="#l3.689"></a><span id="l3.689" class="difflineminus">-	@$(RM) $@.manifest</span>
<a href="#l3.690"></a><span id="l3.690" class="difflineminus">-ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l3.691"></a><span id="l3.691" class="difflineminus">-	$(EXPAND_LD) -NOLOGO -OUT:$@ -PDB:$(LINK_PDBFILE) $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_PROGRAM_LDFLAGS) $(PROGOBJS) $(RESFILE) $(STATIC_LIBS) $(SHARED_LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l3.692"></a><span id="l3.692" class="difflineminus">-ifdef MSMANIFEST_TOOL</span>
<a href="#l3.693"></a><span id="l3.693" class="difflineminus">-	@if test -f $@.manifest; then \</span>
<a href="#l3.694"></a><span id="l3.694" class="difflineminus">-		if test -f '$(srcdir)/$@.manifest'; then \</span>
<a href="#l3.695"></a><span id="l3.695" class="difflineminus">-			echo 'Embedding manifest from $(srcdir)/$@.manifest and $@.manifest'; \</span>
<a href="#l3.696"></a><span id="l3.696" class="difflineminus">-			mt.exe -NOLOGO -MANIFEST '$(win_srcdir)/$@.manifest' $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.697"></a><span id="l3.697" class="difflineminus">-		else \</span>
<a href="#l3.698"></a><span id="l3.698" class="difflineminus">-			echo 'Embedding manifest from $@.manifest'; \</span>
<a href="#l3.699"></a><span id="l3.699" class="difflineminus">-			mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.700"></a><span id="l3.700" class="difflineminus">-		fi; \</span>
<a href="#l3.701"></a><span id="l3.701" class="difflineminus">-	elif test -f '$(srcdir)/$@.manifest'; then \</span>
<a href="#l3.702"></a><span id="l3.702" class="difflineminus">-		echo 'Embedding manifest from $(srcdir)/$@.manifest'; \</span>
<a href="#l3.703"></a><span id="l3.703" class="difflineminus">-		mt.exe -NOLOGO -MANIFEST '$(win_srcdir)/$@.manifest' -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.704"></a><span id="l3.704" class="difflineminus">-	fi</span>
<a href="#l3.705"></a><span id="l3.705" class="difflineminus">-endif	# MSVC with manifest tool</span>
<a href="#l3.706"></a><span id="l3.706" class="difflineminus">-ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l3.707"></a><span id="l3.707" class="difflineminus">-# touch it a few seconds into the future to work around FAT's</span>
<a href="#l3.708"></a><span id="l3.708" class="difflineminus">-# 2-second granularity</span>
<a href="#l3.709"></a><span id="l3.709" class="difflineminus">-	touch -t `date +%Y%m%d%H%M.%S -d 'now+5seconds'` pgo.relink</span>
<a href="#l3.710"></a><span id="l3.710" class="difflineminus">-endif</span>
<a href="#l3.711"></a><span id="l3.711" class="difflineminus">-else # !WINNT || GNU_CC</span>
<a href="#l3.712"></a><span id="l3.712" class="difflineminus">-	$(EXPAND_CCC) -o $@ $(CXXFLAGS) $(PROGOBJS) $(RESFILE) $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(WRAP_LDFLAGS) $(STATIC_LIBS) $(MOZ_PROGRAM_LDFLAGS) $(SHARED_LIBS) $(EXTRA_LIBS) $(OS_LIBS) $(BIN_FLAGS) $(EXE_DEF_FILE) $(STLPORT_LIBS)</span>
<a href="#l3.713"></a><span id="l3.713" class="difflineminus">-endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l3.714"></a><span id="l3.714" class="difflineminus">-</span>
<a href="#l3.715"></a><span id="l3.715" class="difflineminus">-ifdef ENABLE_STRIP</span>
<a href="#l3.716"></a><span id="l3.716" class="difflineminus">-	$(STRIP) $(STRIP_FLAGS) $@</span>
<a href="#l3.717"></a><span id="l3.717" class="difflineminus">-endif</span>
<a href="#l3.718"></a><span id="l3.718" class="difflineminus">-ifdef MOZ_POST_PROGRAM_COMMAND</span>
<a href="#l3.719"></a><span id="l3.719" class="difflineminus">-	$(MOZ_POST_PROGRAM_COMMAND) $@</span>
<a href="#l3.720"></a><span id="l3.720" class="difflineminus">-endif</span>
<a href="#l3.721"></a><span id="l3.721" class="difflineminus">-</span>
<a href="#l3.722"></a><span id="l3.722" class="difflineminus">-$(HOST_PROGRAM): $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l3.723"></a><span id="l3.723" class="difflineminus">-ifeq (_WINNT,$(GNU_CC)_$(HOST_OS_ARCH))</span>
<a href="#l3.724"></a><span id="l3.724" class="difflineminus">-	$(EXPAND_LIBS_EXEC) -- $(HOST_LD) -NOLOGO -OUT:$@ -PDB:$(HOST_PDBFILE) $(HOST_OBJS) $(WIN32_EXE_LDFLAGS) $(HOST_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l3.725"></a><span id="l3.725" class="difflineminus">-ifdef MSMANIFEST_TOOL</span>
<a href="#l3.726"></a><span id="l3.726" class="difflineminus">-	@if test -f $@.manifest; then \</span>
<a href="#l3.727"></a><span id="l3.727" class="difflineminus">-		if test -f '$(srcdir)/$@.manifest'; then \</span>
<a href="#l3.728"></a><span id="l3.728" class="difflineminus">-			echo 'Embedding manifest from $(srcdir)/$@.manifest and $@.manifest'; \</span>
<a href="#l3.729"></a><span id="l3.729" class="difflineminus">-			mt.exe -NOLOGO -MANIFEST '$(win_srcdir)/$@.manifest' $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.730"></a><span id="l3.730" class="difflineminus">-		else \</span>
<a href="#l3.731"></a><span id="l3.731" class="difflineminus">-			echo 'Embedding manifest from $@.manifest'; \</span>
<a href="#l3.732"></a><span id="l3.732" class="difflineminus">-			mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.733"></a><span id="l3.733" class="difflineminus">-		fi; \</span>
<a href="#l3.734"></a><span id="l3.734" class="difflineminus">-	elif test -f '$(srcdir)/$@.manifest'; then \</span>
<a href="#l3.735"></a><span id="l3.735" class="difflineminus">-		echo 'Embedding manifest from $(srcdir)/$@.manifest'; \</span>
<a href="#l3.736"></a><span id="l3.736" class="difflineminus">-		mt.exe -NOLOGO -MANIFEST '$(win_srcdir)/$@.manifest' -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.737"></a><span id="l3.737" class="difflineminus">-	fi</span>
<a href="#l3.738"></a><span id="l3.738" class="difflineminus">-endif	# MSVC with manifest tool</span>
<a href="#l3.739"></a><span id="l3.739" class="difflineminus">-else</span>
<a href="#l3.740"></a><span id="l3.740" class="difflineminus">-ifeq ($(HOST_CPP_PROG_LINK),1)</span>
<a href="#l3.741"></a><span id="l3.741" class="difflineminus">-	$(EXPAND_LIBS_EXEC) -- $(HOST_CXX) -o $@ $(HOST_CXXFLAGS) $(HOST_LDFLAGS) $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l3.742"></a><span id="l3.742" class="difflineminus">-else</span>
<a href="#l3.743"></a><span id="l3.743" class="difflineminus">-	$(EXPAND_LIBS_EXEC) -- $(HOST_CC) -o $@ $(HOST_CFLAGS) $(HOST_LDFLAGS) $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l3.744"></a><span id="l3.744" class="difflineminus">-endif # HOST_CPP_PROG_LINK</span>
<a href="#l3.745"></a><span id="l3.745" class="difflineminus">-endif</span>
<a href="#l3.746"></a><span id="l3.746" class="difflineminus">-</span>
<a href="#l3.747"></a><span id="l3.747" class="difflineminus">-#</span>
<a href="#l3.748"></a><span id="l3.748" class="difflineminus">-# This is an attempt to support generation of multiple binaries</span>
<a href="#l3.749"></a><span id="l3.749" class="difflineminus">-# in one directory, it assumes everything to compile Foo is in</span>
<a href="#l3.750"></a><span id="l3.750" class="difflineminus">-# Foo.o (from either Foo.c or Foo.cpp).</span>
<a href="#l3.751"></a><span id="l3.751" class="difflineminus">-#</span>
<a href="#l3.752"></a><span id="l3.752" class="difflineminus">-# SIMPLE_PROGRAMS = Foo Bar</span>
<a href="#l3.753"></a><span id="l3.753" class="difflineminus">-# creates Foo.o Bar.o, links with LIBS to create Foo, Bar.</span>
<a href="#l3.754"></a><span id="l3.754" class="difflineminus">-#</span>
<a href="#l3.755"></a><span id="l3.755" class="difflineminus">-$(SIMPLE_PROGRAMS): %$(BIN_SUFFIX): %.$(OBJ_SUFFIX) $(STATIC_LIBS_DEPS) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l3.756"></a><span id="l3.756" class="difflineminus">-ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l3.757"></a><span id="l3.757" class="difflineminus">-	$(EXPAND_LD) -nologo -out:$@ -pdb:$(LINK_PDBFILE) $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_PROGRAM_LDFLAGS) $(STATIC_LIBS) $(SHARED_LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l3.758"></a><span id="l3.758" class="difflineminus">-ifdef MSMANIFEST_TOOL</span>
<a href="#l3.759"></a><span id="l3.759" class="difflineminus">-	@if test -f $@.manifest; then \</span>
<a href="#l3.760"></a><span id="l3.760" class="difflineminus">-		mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l3.761"></a><span id="l3.761" class="difflineminus">-		rm -f $@.manifest; \</span>
<a href="#l3.762"></a><span id="l3.762" class="difflineminus">-	fi</span>
<a href="#l3.763"></a><span id="l3.763" class="difflineminus">-endif	# MSVC with manifest tool</span>
<a href="#l3.764"></a><span id="l3.764" class="difflineminus">-else</span>
<a href="#l3.765"></a><span id="l3.765" class="difflineminus">-	$(EXPAND_CCC) $(CXXFLAGS) -o $@ $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(WRAP_LDFLAGS) $(STATIC_LIBS) $(MOZ_PROGRAM_LDFLAGS) $(SHARED_LIBS) $(EXTRA_LIBS) $(OS_LIBS) $(BIN_FLAGS) $(STLPORT_LIBS)</span>
<a href="#l3.766"></a><span id="l3.766" class="difflineminus">-endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l3.767"></a><span id="l3.767" class="difflineminus">-</span>
<a href="#l3.768"></a><span id="l3.768" class="difflineminus">-ifdef ENABLE_STRIP</span>
<a href="#l3.769"></a><span id="l3.769" class="difflineminus">-	$(STRIP) $(STRIP_FLAGS) $@</span>
<a href="#l3.770"></a><span id="l3.770" class="difflineminus">-endif</span>
<a href="#l3.771"></a><span id="l3.771" class="difflineminus">-ifdef MOZ_POST_PROGRAM_COMMAND</span>
<a href="#l3.772"></a><span id="l3.772" class="difflineminus">-	$(MOZ_POST_PROGRAM_COMMAND) $@</span>
<a href="#l3.773"></a><span id="l3.773" class="difflineminus">-endif</span>
<a href="#l3.774"></a><span id="l3.774" class="difflineminus">-</span>
<a href="#l3.775"></a><span id="l3.775" class="difflineminus">-$(HOST_SIMPLE_PROGRAMS): host_%$(HOST_BIN_SUFFIX): host_%.$(OBJ_SUFFIX) $(HOST_LIBS) $(HOST_EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l3.776"></a><span id="l3.776" class="difflineminus">-ifeq (WINNT_,$(HOST_OS_ARCH)_$(GNU_CC))</span>
<a href="#l3.777"></a><span id="l3.777" class="difflineminus">-	$(EXPAND_LIBS_EXEC) -- $(HOST_LD) -NOLOGO -OUT:$@ -PDB:$(HOST_PDBFILE) $&lt; $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l3.778"></a><span id="l3.778" class="difflineminus">-else</span>
<a href="#l3.779"></a><span id="l3.779" class="difflineminus">-ifneq (,$(HOST_CPPSRCS)$(USE_HOST_CXX))</span>
<a href="#l3.780"></a><span id="l3.780" class="difflineminus">-	$(EXPAND_LIBS_EXEC) -- $(HOST_CXX) $(HOST_OUTOPTION)$@ $(HOST_CXXFLAGS) $(INCLUDES) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l3.781"></a><span id="l3.781" class="difflineminus">-else</span>
<a href="#l3.782"></a><span id="l3.782" class="difflineminus">-	$(EXPAND_LIBS_EXEC) -- $(HOST_CC) $(HOST_OUTOPTION)$@ $(HOST_CFLAGS) $(INCLUDES) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l3.783"></a><span id="l3.783" class="difflineminus">-endif</span>
<a href="#l3.784"></a><span id="l3.784" class="difflineminus">-endif</span>
<a href="#l3.785"></a><span id="l3.785" class="difflineminus">-</span>
<a href="#l3.786"></a><span id="l3.786" class="difflineminus">-ifdef DTRACE_PROBE_OBJ</span>
<a href="#l3.787"></a><span id="l3.787" class="difflineminus">-EXTRA_DEPS += $(DTRACE_PROBE_OBJ)</span>
<a href="#l3.788"></a><span id="l3.788" class="difflineminus">-OBJS += $(DTRACE_PROBE_OBJ)</span>
<a href="#l3.789"></a><span id="l3.789" class="difflineminus">-endif</span>
<a href="#l3.790"></a><span id="l3.790" class="difflineminus">-</span>
<a href="#l3.791"></a><span id="l3.791" class="difflineminus">-$(filter %.$(LIB_SUFFIX),$(LIBRARY)): $(OBJS) $(STATIC_LIBS_DEPS) $(filter %.$(LIB_SUFFIX),$(EXTRA_LIBS)) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l3.792"></a><span id="l3.792" class="difflineminus">-# Always remove both library and library descriptor</span>
<a href="#l3.793"></a><span id="l3.793" class="difflineminus">-	$(RM) $(REAL_LIBRARY) $(REAL_LIBRARY).$(LIBS_DESC_SUFFIX)</span>
<a href="#l3.794"></a><span id="l3.794" class="difflineminus">-	$(EXPAND_AR) $(AR_FLAGS) $(OBJS) $(STATIC_LIBS) $(filter %.$(LIB_SUFFIX),$(EXTRA_LIBS))</span>
<a href="#l3.795"></a><span id="l3.795" class="difflineminus">-	$(RANLIB) $@</span>
<a href="#l3.796"></a><span id="l3.796" class="difflineminus">-</span>
<a href="#l3.797"></a><span id="l3.797" class="difflineminus">-$(filter-out %.$(LIB_SUFFIX),$(LIBRARY)): $(filter %.$(LIB_SUFFIX),$(LIBRARY)) $(OBJS) $(STATIC_LIBS_DEPS) $(filter %.$(LIB_SUFFIX),$(EXTRA_LIBS)) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l3.798"></a><span id="l3.798" class="difflineminus">-# When we only build a library descriptor, blow out any existing library</span>
<a href="#l3.799"></a><span id="l3.799" class="difflineminus">-	$(if $(filter %.$(LIB_SUFFIX),$(LIBRARY)),,$(RM) $(REAL_LIBRARY))</span>
<a href="#l3.800"></a><span id="l3.800" class="difflineminus">-	$(EXPAND_LIBS_GEN) -o $@ $(OBJS) $(STATIC_LIBS) $(filter %.$(LIB_SUFFIX),$(EXTRA_LIBS))</span>
<a href="#l3.801"></a><span id="l3.801" class="difflineminus">-</span>
<a href="#l3.802"></a><span id="l3.802" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l3.803"></a><span id="l3.803" class="difflineminus">-# Import libraries are created by the rules creating shared libraries.</span>
<a href="#l3.804"></a><span id="l3.804" class="difflineminus">-# The rules to copy them to $(DIST)/lib depend on $(IMPORT_LIBRARY),</span>
<a href="#l3.805"></a><span id="l3.805" class="difflineminus">-# but make will happily consider the import library before it is refreshed</span>
<a href="#l3.806"></a><span id="l3.806" class="difflineminus">-# when rebuilding the corresponding shared library. Defining an empty recipe</span>
<a href="#l3.807"></a><span id="l3.807" class="difflineminus">-# for import libraries forces make to wait for the shared library recipe to</span>
<a href="#l3.808"></a><span id="l3.808" class="difflineminus">-# have run before considering other targets that depend on the import library.</span>
<a href="#l3.809"></a><span id="l3.809" class="difflineminus">-# See bug 795204.</span>
<a href="#l3.810"></a><span id="l3.810" class="difflineminus">-$(IMPORT_LIBRARY): $(SHARED_LIBRARY) ;</span>
<a href="#l3.811"></a><span id="l3.811" class="difflineminus">-endif</span>
<a href="#l3.812"></a><span id="l3.812" class="difflineminus">-</span>
<a href="#l3.813"></a><span id="l3.813" class="difflineminus">-$(HOST_LIBRARY): $(HOST_OBJS) Makefile</span>
<a href="#l3.814"></a><span id="l3.814" class="difflineminus">-	$(RM) $@</span>
<a href="#l3.815"></a><span id="l3.815" class="difflineminus">-	$(EXPAND_LIBS_EXEC) --extract -- $(HOST_AR) $(HOST_AR_FLAGS) $(HOST_OBJS)</span>
<a href="#l3.816"></a><span id="l3.816" class="difflineminus">-	$(HOST_RANLIB) $@</span>
<a href="#l3.817"></a><span id="l3.817" class="difflineminus">-</span>
<a href="#l3.818"></a><span id="l3.818" class="difflineminus">-ifdef HAVE_DTRACE</span>
<a href="#l3.819"></a><span id="l3.819" class="difflineminus">-ifndef XP_MACOSX</span>
<a href="#l3.820"></a><span id="l3.820" class="difflineminus">-ifdef DTRACE_PROBE_OBJ</span>
<a href="#l3.821"></a><span id="l3.821" class="difflineminus">-ifndef DTRACE_LIB_DEPENDENT</span>
<a href="#l3.822"></a><span id="l3.822" class="difflineminus">-NON_DTRACE_OBJS := $(filter-out $(DTRACE_PROBE_OBJ),$(OBJS))</span>
<a href="#l3.823"></a><span id="l3.823" class="difflineminus">-$(DTRACE_PROBE_OBJ): $(NON_DTRACE_OBJS)</span>
<a href="#l3.824"></a><span id="l3.824" class="difflineminus">-	dtrace -G -C -s $(MOZILLA_DTRACE_SRC) -o $(DTRACE_PROBE_OBJ) $(NON_DTRACE_OBJS)</span>
<a href="#l3.825"></a><span id="l3.825" class="difflineminus">-endif</span>
<a href="#l3.826"></a><span id="l3.826" class="difflineminus">-endif</span>
<a href="#l3.827"></a><span id="l3.827" class="difflineminus">-endif</span>
<a href="#l3.828"></a><span id="l3.828" class="difflineminus">-endif</span>
<a href="#l3.829"></a><span id="l3.829" class="difflineminus">-</span>
<a href="#l3.830"></a><span id="l3.830" class="difflineminus">-# On Darwin (Mac OS X), dwarf2 debugging uses debug info left in .o files,</span>
<a href="#l3.831"></a><span id="l3.831" class="difflineminus">-# so instead of deleting .o files after repacking them into a dylib, we make</span>
<a href="#l3.832"></a><span id="l3.832" class="difflineminus">-# symlinks back to the originals. The symlinks are a no-op for stabs debugging,</span>
<a href="#l3.833"></a><span id="l3.833" class="difflineminus">-# so no need to conditionalize on OS version or debugging format.</span>
<a href="#l3.834"></a><span id="l3.834" class="difflineminus">-</span>
<a href="#l3.835"></a><span id="l3.835" class="difflineminus">-$(SHARED_LIBRARY): $(OBJS) $(RESFILE) $(STATIC_LIBS_DEPS) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l3.836"></a><span id="l3.836" class="difflineminus">-ifndef INCREMENTAL_LINKER</span>
<a href="#l3.837"></a><span id="l3.837" class="difflineminus">-	$(RM) $@</span>
<a href="#l3.838"></a><span id="l3.838" class="difflineminus">-endif</span>
<a href="#l3.839"></a><span id="l3.839" class="difflineminus">-ifdef DTRACE_LIB_DEPENDENT</span>
<a href="#l3.840"></a><span id="l3.840" class="difflineminus">-ifndef XP_MACOSX</span>
<a href="#l3.841"></a><span id="l3.841" class="difflineminus">-	dtrace -G -C -s $(MOZILLA_DTRACE_SRC) -o  $(DTRACE_PROBE_OBJ) $(shell $(EXPAND_LIBS) $(MOZILLA_PROBE_LIBS))</span>
<a href="#l3.842"></a><span id="l3.842" class="difflineminus">-endif</span>
<a href="#l3.843"></a><span id="l3.843" class="difflineminus">-	$(EXPAND_MKSHLIB) $(SHLIB_LDSTARTFILE) $(OBJS) $(SUB_SHLOBJS) $(DTRACE_PROBE_OBJ) $(MOZILLA_PROBE_LIBS) $(RESFILE) $(LDFLAGS) $(WRAP_LDFLAGS) $(STATIC_LIBS) $(SHARED_LIBS) $(EXTRA_DSO_LDOPTS) $(MOZ_GLUE_LDFLAGS) $(EXTRA_LIBS) $(OS_LIBS) $(SHLIB_LDENDFILE) $(if $(LIB_IS_C_ONLY),,$(STLPORT_LIBS))</span>
<a href="#l3.844"></a><span id="l3.844" class="difflineminus">-	@$(RM) $(DTRACE_PROBE_OBJ)</span>
<a href="#l3.845"></a><span id="l3.845" class="difflineminus">-else # ! DTRACE_LIB_DEPENDENT</span>
<a href="#l3.846"></a><span id="l3.846" class="difflineminus">-	$(EXPAND_MKSHLIB) $(SHLIB_LDSTARTFILE) $(OBJS) $(SUB_SHLOBJS) $(RESFILE) $(LDFLAGS) $(WRAP_LDFLAGS) $(STATIC_LIBS) $(SHARED_LIBS) $(EXTRA_DSO_LDOPTS) $(MOZ_GLUE_LDFLAGS) $(EXTRA_LIBS) $(OS_LIBS) $(SHLIB_LDENDFILE) $(if $(LIB_IS_C_ONLY),,$(STLPORT_LIBS))</span>
<a href="#l3.847"></a><span id="l3.847" class="difflineminus">-endif # DTRACE_LIB_DEPENDENT</span>
<a href="#l3.848"></a><span id="l3.848" class="difflineminus">-</span>
<a href="#l3.849"></a><span id="l3.849" class="difflineminus">-ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l3.850"></a><span id="l3.850" class="difflineminus">-ifdef MSMANIFEST_TOOL</span>
<a href="#l3.851"></a><span id="l3.851" class="difflineminus">-ifdef EMBED_MANIFEST_AT</span>
<a href="#l3.852"></a><span id="l3.852" class="difflineminus">-	@if test -f $@.manifest; then \</span>
<a href="#l3.853"></a><span id="l3.853" class="difflineminus">-		mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;$(EMBED_MANIFEST_AT); \</span>
<a href="#l3.854"></a><span id="l3.854" class="difflineminus">-		rm -f $@.manifest; \</span>
<a href="#l3.855"></a><span id="l3.855" class="difflineminus">-	fi</span>
<a href="#l3.856"></a><span id="l3.856" class="difflineminus">-endif   # EMBED_MANIFEST_AT</span>
<a href="#l3.857"></a><span id="l3.857" class="difflineminus">-endif	# MSVC with manifest tool</span>
<a href="#l3.858"></a><span id="l3.858" class="difflineminus">-ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l3.859"></a><span id="l3.859" class="difflineminus">-	touch -t `date +%Y%m%d%H%M.%S -d 'now+5seconds'` pgo.relink</span>
<a href="#l3.860"></a><span id="l3.860" class="difflineminus">-endif</span>
<a href="#l3.861"></a><span id="l3.861" class="difflineminus">-endif	# WINNT &amp;&amp; !GCC</span>
<a href="#l3.862"></a><span id="l3.862" class="difflineminus">-	@$(RM) foodummyfilefoo $(DELETE_AFTER_LINK)</span>
<a href="#l3.863"></a><span id="l3.863" class="difflineminus">-	chmod +x $@</span>
<a href="#l3.864"></a><span id="l3.864" class="difflineminus">-ifdef ENABLE_STRIP</span>
<a href="#l3.865"></a><span id="l3.865" class="difflineminus">-	$(STRIP) $(STRIP_FLAGS) $@</span>
<a href="#l3.866"></a><span id="l3.866" class="difflineminus">-endif</span>
<a href="#l3.867"></a><span id="l3.867" class="difflineminus">-ifdef MOZ_POST_DSO_LIB_COMMAND</span>
<a href="#l3.868"></a><span id="l3.868" class="difflineminus">-	$(MOZ_POST_DSO_LIB_COMMAND) $@</span>
<a href="#l3.869"></a><span id="l3.869" class="difflineminus">-endif</span>
<a href="#l3.870"></a><span id="l3.870" class="difflineminus">-</span>
<a href="#l3.871"></a><span id="l3.871" class="difflineminus">-ifeq ($(SOLARIS_SUNPRO_CC),1)</span>
<a href="#l3.872"></a><span id="l3.872" class="difflineminus">-_MDDEPFILE = $(MDDEPDIR)/$(@F).pp</span>
<a href="#l3.873"></a><span id="l3.873" class="difflineminus">-</span>
<a href="#l3.874"></a><span id="l3.874" class="difflineminus">-define MAKE_DEPS_AUTO_CC</span>
<a href="#l3.875"></a><span id="l3.875" class="difflineminus">-if test -d $(@D); then \</span>
<a href="#l3.876"></a><span id="l3.876" class="difflineminus">-	echo 'Building deps for $&lt; using Sun Studio cc'; \</span>
<a href="#l3.877"></a><span id="l3.877" class="difflineminus">-	$(CC) $(COMPILE_CFLAGS) -xM  $&lt; &gt;$(_MDDEPFILE) ; \</span>
<a href="#l3.878"></a><span id="l3.878" class="difflineminus">-	$(PYTHON) $(MOZILLA_DIR)/build/unix/add_phony_targets.py $(_MDDEPFILE) ; \</span>
<a href="#l3.879"></a><span id="l3.879" class="difflineminus">-fi</span>
<a href="#l3.880"></a><span id="l3.880" class="difflineminus">-endef</span>
<a href="#l3.881"></a><span id="l3.881" class="difflineminus">-define MAKE_DEPS_AUTO_CXX</span>
<a href="#l3.882"></a><span id="l3.882" class="difflineminus">-if test -d $(@D); then \</span>
<a href="#l3.883"></a><span id="l3.883" class="difflineminus">-	echo 'Building deps for $&lt; using Sun Studio CC'; \</span>
<a href="#l3.884"></a><span id="l3.884" class="difflineminus">-	$(CXX) $(COMPILE_CXXFLAGS) -xM $&lt; &gt;$(_MDDEPFILE) ; \</span>
<a href="#l3.885"></a><span id="l3.885" class="difflineminus">-	$(PYTHON) $(MOZILLA_DIR)/build/unix/add_phony_targets.py $(_MDDEPFILE) ; \</span>
<a href="#l3.886"></a><span id="l3.886" class="difflineminus">-fi</span>
<a href="#l3.887"></a><span id="l3.887" class="difflineminus">-endef</span>
<a href="#l3.888"></a><span id="l3.888" class="difflineminus">-endif # Sun Studio on Solaris</span>
<a href="#l3.889"></a><span id="l3.889" class="difflineminus">-</span>
<a href="#l3.890"></a><span id="l3.890" class="difflineminus">-# The object file is in the current directory, and the source file can be any</span>
<a href="#l3.891"></a><span id="l3.891" class="difflineminus">-# relative path. This macro adds the dependency obj: src for each source file.</span>
<a href="#l3.892"></a><span id="l3.892" class="difflineminus">-# This dependency must be first for the $&lt; flag to work correctly, and the</span>
<a href="#l3.893"></a><span id="l3.893" class="difflineminus">-# rules that have commands for these targets must not list any other</span>
<a href="#l3.894"></a><span id="l3.894" class="difflineminus">-# prerequisites, or they will override the $&lt; variable.</span>
<a href="#l3.895"></a><span id="l3.895" class="difflineminus">-define src_objdep</span>
<a href="#l3.896"></a><span id="l3.896" class="difflineminus">-$(basename $2$(notdir $1)).$(OBJ_SUFFIX): $1 $$(call mkdir_deps,$$(MDDEPDIR))</span>
<a href="#l3.897"></a><span id="l3.897" class="difflineminus">-endef</span>
<a href="#l3.898"></a><span id="l3.898" class="difflineminus">-$(foreach f,$(CSRCS) $(SSRCS) $(CPPSRCS) $(CMSRCS) $(CMMSRCS) $(ASFILES),$(eval $(call src_objdep,$(f))))</span>
<a href="#l3.899"></a><span id="l3.899" class="difflineminus">-$(foreach f,$(HOST_CSRCS) $(HOST_CPPSRCS) $(HOST_CMSRCS) $(HOST_CMMSRCS),$(eval $(call src_objdep,$(f),host_)))</span>
<a href="#l3.900"></a><span id="l3.900" class="difflineminus">-</span>
<a href="#l3.901"></a><span id="l3.901" class="difflineminus">-$(OBJS) $(HOST_OBJS) $(PROGOBJS) $(HOST_PROGOBJS): $(GLOBAL_DEPS)</span>
<a href="#l3.902"></a><span id="l3.902" class="difflineminus">-</span>
<a href="#l3.903"></a><span id="l3.903" class="difflineminus">-# Rules for building native targets must come first because of the host_ prefix</span>
<a href="#l3.904"></a><span id="l3.904" class="difflineminus">-$(HOST_COBJS):</span>
<a href="#l3.905"></a><span id="l3.905" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.906"></a><span id="l3.906" class="difflineminus">-	$(ELOG) $(HOST_CC) $(HOST_OUTOPTION)$@ -c $(HOST_CFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l3.907"></a><span id="l3.907" class="difflineminus">-</span>
<a href="#l3.908"></a><span id="l3.908" class="difflineminus">-$(HOST_CPPOBJS):</span>
<a href="#l3.909"></a><span id="l3.909" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.910"></a><span id="l3.910" class="difflineminus">-	$(ELOG) $(HOST_CXX) $(HOST_OUTOPTION)$@ -c $(HOST_CXXFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l3.911"></a><span id="l3.911" class="difflineminus">-</span>
<a href="#l3.912"></a><span id="l3.912" class="difflineminus">-$(HOST_CMOBJS):</span>
<a href="#l3.913"></a><span id="l3.913" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.914"></a><span id="l3.914" class="difflineminus">-	$(ELOG) $(HOST_CC) $(HOST_OUTOPTION)$@ -c $(HOST_CFLAGS) $(HOST_CMFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l3.915"></a><span id="l3.915" class="difflineminus">-</span>
<a href="#l3.916"></a><span id="l3.916" class="difflineminus">-$(HOST_CMMOBJS):</span>
<a href="#l3.917"></a><span id="l3.917" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.918"></a><span id="l3.918" class="difflineminus">-	$(ELOG) $(HOST_CXX) $(HOST_OUTOPTION)$@ -c $(HOST_CXXFLAGS) $(HOST_CMMFLAGS) $(INCLUDES) $(NSPR_CFLAGS) $(_VPATH_SRCS)</span>
<a href="#l3.919"></a><span id="l3.919" class="difflineminus">-</span>
<a href="#l3.920"></a><span id="l3.920" class="difflineminus">-$(COBJS):</span>
<a href="#l3.921"></a><span id="l3.921" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.922"></a><span id="l3.922" class="difflineminus">-	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l3.923"></a><span id="l3.923" class="difflineminus">-	$(ELOG) $(CC) $(OUTOPTION)$@ -c $(COMPILE_CFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.924"></a><span id="l3.924" class="difflineminus">-</span>
<a href="#l3.925"></a><span id="l3.925" class="difflineminus">-# DEFINES and ACDEFINES are needed here to enable conditional compilation of Q_OBJECTs:</span>
<a href="#l3.926"></a><span id="l3.926" class="difflineminus">-# 'moc' only knows about #defines it gets on the command line (-D...), not in</span>
<a href="#l3.927"></a><span id="l3.927" class="difflineminus">-# included headers like mozilla-config.h</span>
<a href="#l3.928"></a><span id="l3.928" class="difflineminus">-$(filter moc_%.cpp,$(CPPSRCS)): moc_%.cpp: %.h</span>
<a href="#l3.929"></a><span id="l3.929" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.930"></a><span id="l3.930" class="difflineminus">-	$(ELOG) $(MOC) $(DEFINES) $(ACDEFINES) $&lt; $(OUTOPTION)$@</span>
<a href="#l3.931"></a><span id="l3.931" class="difflineminus">-</span>
<a href="#l3.932"></a><span id="l3.932" class="difflineminus">-$(filter moc_%.cc,$(CPPSRCS)): moc_%.cc: %.cc</span>
<a href="#l3.933"></a><span id="l3.933" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.934"></a><span id="l3.934" class="difflineminus">-	$(ELOG) $(MOC) $(DEFINES) $(ACDEFINES) $(_VPATH_SRCS:.cc=.h) $(OUTOPTION)$@</span>
<a href="#l3.935"></a><span id="l3.935" class="difflineminus">-</span>
<a href="#l3.936"></a><span id="l3.936" class="difflineminus">-$(filter qrc_%.cpp,$(CPPSRCS)): qrc_%.cpp: %.qrc</span>
<a href="#l3.937"></a><span id="l3.937" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.938"></a><span id="l3.938" class="difflineminus">-	$(ELOG) $(RCC) -name $* $&lt; $(OUTOPTION)$@</span>
<a href="#l3.939"></a><span id="l3.939" class="difflineminus">-</span>
<a href="#l3.940"></a><span id="l3.940" class="difflineminus">-ifdef ASFILES</span>
<a href="#l3.941"></a><span id="l3.941" class="difflineminus">-# The AS_DASH_C_FLAG is needed cause not all assemblers (Solaris) accept</span>
<a href="#l3.942"></a><span id="l3.942" class="difflineminus">-# a '-c' flag.</span>
<a href="#l3.943"></a><span id="l3.943" class="difflineminus">-$(ASOBJS):</span>
<a href="#l3.944"></a><span id="l3.944" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.945"></a><span id="l3.945" class="difflineminus">-	$(AS) $(ASOUTOPTION)$@ $(ASFLAGS) $($(notdir $&lt;)_FLAGS) $(AS_DASH_C_FLAG) $(_VPATH_SRCS)</span>
<a href="#l3.946"></a><span id="l3.946" class="difflineminus">-endif</span>
<a href="#l3.947"></a><span id="l3.947" class="difflineminus">-</span>
<a href="#l3.948"></a><span id="l3.948" class="difflineminus">-$(SOBJS):</span>
<a href="#l3.949"></a><span id="l3.949" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.950"></a><span id="l3.950" class="difflineminus">-	$(AS) -o $@ $(ASFLAGS) $($(notdir $&lt;)_FLAGS) $(LOCAL_INCLUDES) $(TARGET_LOCAL_INCLUDES) -c $&lt;</span>
<a href="#l3.951"></a><span id="l3.951" class="difflineminus">-</span>
<a href="#l3.952"></a><span id="l3.952" class="difflineminus">-$(CPPOBJS):</span>
<a href="#l3.953"></a><span id="l3.953" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.954"></a><span id="l3.954" class="difflineminus">-	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l3.955"></a><span id="l3.955" class="difflineminus">-	$(ELOG) $(CCC) $(OUTOPTION)$@ -c $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.956"></a><span id="l3.956" class="difflineminus">-</span>
<a href="#l3.957"></a><span id="l3.957" class="difflineminus">-$(CMMOBJS):</span>
<a href="#l3.958"></a><span id="l3.958" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.959"></a><span id="l3.959" class="difflineminus">-	@$(MAKE_DEPS_AUTO_CXX)</span>
<a href="#l3.960"></a><span id="l3.960" class="difflineminus">-	$(ELOG) $(CCC) -o $@ -c $(COMPILE_CXXFLAGS) $(COMPILE_CMMFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.961"></a><span id="l3.961" class="difflineminus">-</span>
<a href="#l3.962"></a><span id="l3.962" class="difflineminus">-$(CMOBJS):</span>
<a href="#l3.963"></a><span id="l3.963" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.964"></a><span id="l3.964" class="difflineminus">-	@$(MAKE_DEPS_AUTO_CC)</span>
<a href="#l3.965"></a><span id="l3.965" class="difflineminus">-	$(ELOG) $(CC) -o $@ -c $(COMPILE_CFLAGS) $(COMPILE_CMFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.966"></a><span id="l3.966" class="difflineminus">-</span>
<a href="#l3.967"></a><span id="l3.967" class="difflineminus">-$(filter %.s,$(CPPSRCS:%.cpp=%.s)): %.s: %.cpp $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.968"></a><span id="l3.968" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.969"></a><span id="l3.969" class="difflineminus">-	$(CCC) -S $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.970"></a><span id="l3.970" class="difflineminus">-</span>
<a href="#l3.971"></a><span id="l3.971" class="difflineminus">-$(filter %.s,$(CPPSRCS:%.cc=%.s)): %.s: %.cc $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.972"></a><span id="l3.972" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.973"></a><span id="l3.973" class="difflineminus">-	$(CCC) -S $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.974"></a><span id="l3.974" class="difflineminus">-</span>
<a href="#l3.975"></a><span id="l3.975" class="difflineminus">-$(filter %.s,$(CPPSRCS:%.cxx=%.s)): %.s: %.cpp $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.976"></a><span id="l3.976" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.977"></a><span id="l3.977" class="difflineminus">-	$(CCC) -S $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.978"></a><span id="l3.978" class="difflineminus">-</span>
<a href="#l3.979"></a><span id="l3.979" class="difflineminus">-$(filter %.s,$(CSRCS:%.c=%.s)): %.s: %.c $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.980"></a><span id="l3.980" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.981"></a><span id="l3.981" class="difflineminus">-	$(CC) -S $(COMPILE_CFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.982"></a><span id="l3.982" class="difflineminus">-</span>
<a href="#l3.983"></a><span id="l3.983" class="difflineminus">-ifneq (,$(filter %.i,$(MAKECMDGOALS)))</span>
<a href="#l3.984"></a><span id="l3.984" class="difflineminus">-# Call as $(call _group_srcs,extension,$(SRCS)) - this will create a list</span>
<a href="#l3.985"></a><span id="l3.985" class="difflineminus">-# of the full sources, as well as the $(notdir) version. So:</span>
<a href="#l3.986"></a><span id="l3.986" class="difflineminus">-#   foo.cpp sub/bar.cpp</span>
<a href="#l3.987"></a><span id="l3.987" class="difflineminus">-# becomes:</span>
<a href="#l3.988"></a><span id="l3.988" class="difflineminus">-#   foo.cpp sub/bar.cpp bar.cpp</span>
<a href="#l3.989"></a><span id="l3.989" class="difflineminus">-#</span>
<a href="#l3.990"></a><span id="l3.990" class="difflineminus">-# This way we can match both 'make sub/bar.i' and 'make bar.i'</span>
<a href="#l3.991"></a><span id="l3.991" class="difflineminus">-_group_srcs = $(sort $(patsubst %.$1,%.i,$(filter %.$1,$2 $(notdir $2))))</span>
<a href="#l3.992"></a><span id="l3.992" class="difflineminus">-_PREPROCESSED_CPP_FILES := $(call _group_srcs,cpp,$(CPPSRCS))</span>
<a href="#l3.993"></a><span id="l3.993" class="difflineminus">-_PREPROCESSED_CC_FILES := $(call _group_srcs,cc,$(CPPSRCS))</span>
<a href="#l3.994"></a><span id="l3.994" class="difflineminus">-_PREPROCESSED_CXX_FILES := $(call _group_srcs,cxx,$(CPPSRCS))</span>
<a href="#l3.995"></a><span id="l3.995" class="difflineminus">-_PREPROCESSED_C_FILES := $(call _group_srcs,c,$(CSRCS))</span>
<a href="#l3.996"></a><span id="l3.996" class="difflineminus">-_PREPROCESSED_CMM_FILES := $(call _group_srcs,mm,$(CMMSRCS))</span>
<a href="#l3.997"></a><span id="l3.997" class="difflineminus">-</span>
<a href="#l3.998"></a><span id="l3.998" class="difflineminus">-# Hack up VPATH so we can reach the sources. Eg: 'make Parser.i' may need to</span>
<a href="#l3.999"></a><span id="l3.999" class="difflineminus">-# reach $(srcdir)/frontend/Parser.i</span>
<a href="#l3.1000"></a><span id="l3.1000" class="difflineminus">-VPATH += $(addprefix $(srcdir)/,$(sort $(dir $(CPPSRCS) $(CSRCS) $(CMMSRCS))))</span>
<a href="#l3.1001"></a><span id="l3.1001" class="difflineminus">-</span>
<a href="#l3.1002"></a><span id="l3.1002" class="difflineminus">-# Make preprocessed files PHONY so they are always executed, since they are</span>
<a href="#l3.1003"></a><span id="l3.1003" class="difflineminus">-# manual targets and we don't necessarily write to $@.</span>
<a href="#l3.1004"></a><span id="l3.1004" class="difflineminus">-.PHONY: $(_PREPROCESSED_CPP_FILES) $(_PREPROCESSED_CC_FILES) $(_PREPROCESSED_CXX_FILES) $(_PREPROCESSED_C_FILES) $(_PREPROCESSED_CMM_FILES)</span>
<a href="#l3.1005"></a><span id="l3.1005" class="difflineminus">-</span>
<a href="#l3.1006"></a><span id="l3.1006" class="difflineminus">-$(_PREPROCESSED_CPP_FILES): %.i: %.cpp $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.1007"></a><span id="l3.1007" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.1008"></a><span id="l3.1008" class="difflineminus">-	$(addprefix $(MKDIR) -p ,$(filter-out .,$(@D)))</span>
<a href="#l3.1009"></a><span id="l3.1009" class="difflineminus">-	$(CCC) -C $(PREPROCESS_OPTION)$@ $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.1010"></a><span id="l3.1010" class="difflineminus">-</span>
<a href="#l3.1011"></a><span id="l3.1011" class="difflineminus">-$(_PREPROCESSED_CC_FILES): %.i: %.cc $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.1012"></a><span id="l3.1012" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.1013"></a><span id="l3.1013" class="difflineminus">-	$(addprefix $(MKDIR) -p ,$(filter-out .,$(@D)))</span>
<a href="#l3.1014"></a><span id="l3.1014" class="difflineminus">-	$(CCC) -C $(PREPROCESS_OPTION)$@ $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.1015"></a><span id="l3.1015" class="difflineminus">-</span>
<a href="#l3.1016"></a><span id="l3.1016" class="difflineminus">-$(_PREPROCESSED_CXX_FILES): %.i: %.cxx $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.1017"></a><span id="l3.1017" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.1018"></a><span id="l3.1018" class="difflineminus">-	$(addprefix $(MKDIR) -p ,$(filter-out .,$(@D)))</span>
<a href="#l3.1019"></a><span id="l3.1019" class="difflineminus">-	$(CCC) -C $(PREPROCESS_OPTION)$@ $(COMPILE_CXXFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.1020"></a><span id="l3.1020" class="difflineminus">-</span>
<a href="#l3.1021"></a><span id="l3.1021" class="difflineminus">-$(_PREPROCESSED_C_FILES): %.i: %.c $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.1022"></a><span id="l3.1022" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.1023"></a><span id="l3.1023" class="difflineminus">-	$(addprefix $(MKDIR) -p ,$(filter-out .,$(@D)))</span>
<a href="#l3.1024"></a><span id="l3.1024" class="difflineminus">-	$(CC) -C $(PREPROCESS_OPTION)$@ $(COMPILE_CFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.1025"></a><span id="l3.1025" class="difflineminus">-</span>
<a href="#l3.1026"></a><span id="l3.1026" class="difflineminus">-$(_PREPROCESSED_CMM_FILES): %.i: %.mm $(call mkdir_deps,$(MDDEPDIR))</span>
<a href="#l3.1027"></a><span id="l3.1027" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.1028"></a><span id="l3.1028" class="difflineminus">-	$(addprefix $(MKDIR) -p ,$(filter-out .,$(@D)))</span>
<a href="#l3.1029"></a><span id="l3.1029" class="difflineminus">-	$(CCC) -C $(PREPROCESS_OPTION)$@ $(COMPILE_CXXFLAGS) $(COMPILE_CMMFLAGS) $($(notdir $&lt;)_FLAGS) $(TARGET_LOCAL_INCLUDES) $(_VPATH_SRCS)</span>
<a href="#l3.1030"></a><span id="l3.1030" class="difflineminus">-</span>
<a href="#l3.1031"></a><span id="l3.1031" class="difflineminus">-# Default to pre-processing the actual unified file. This can be overridden</span>
<a href="#l3.1032"></a><span id="l3.1032" class="difflineminus">-# at the command-line to pre-process only the individual source file.</span>
<a href="#l3.1033"></a><span id="l3.1033" class="difflineminus">-PP_UNIFIED ?= 1</span>
<a href="#l3.1034"></a><span id="l3.1034" class="difflineminus">-</span>
<a href="#l3.1035"></a><span id="l3.1035" class="difflineminus">-# PP_REINVOKE gets set on the sub-make to prevent us from going in an</span>
<a href="#l3.1036"></a><span id="l3.1036" class="difflineminus">-# infinite loop if the filename doesn't exist in the unified source files.</span>
<a href="#l3.1037"></a><span id="l3.1037" class="difflineminus">-ifndef PP_REINVOKE</span>
<a href="#l3.1038"></a><span id="l3.1038" class="difflineminus">-</span>
<a href="#l3.1039"></a><span id="l3.1039" class="difflineminus">-MATCH_cpp = \(cpp\|cc|cxx\)</span>
<a href="#l3.1040"></a><span id="l3.1040" class="difflineminus">-UPPER_c = C</span>
<a href="#l3.1041"></a><span id="l3.1041" class="difflineminus">-UPPER_cpp = CPP</span>
<a href="#l3.1042"></a><span id="l3.1042" class="difflineminus">-UPPER_mm = CMM</span>
<a href="#l3.1043"></a><span id="l3.1043" class="difflineminus">-</span>
<a href="#l3.1044"></a><span id="l3.1044" class="difflineminus">-# When building with PP_UNIFIED=0, we also have to look in the Unified files to</span>
<a href="#l3.1045"></a><span id="l3.1045" class="difflineminus">-# find a matching pathname.</span>
<a href="#l3.1046"></a><span id="l3.1046" class="difflineminus">-_get_all_sources = $1 $(if $(filter Unified%,$1),$(shell sed -n 's/\#include &quot;\(.*\)&quot;$$/\1/p' $(filter Unified%,$1)))</span>
<a href="#l3.1047"></a><span id="l3.1047" class="difflineminus">-all_cpp_sources := $(call _get_all_sources,$(CPPSRCS))</span>
<a href="#l3.1048"></a><span id="l3.1048" class="difflineminus">-all_mm_sources := $(call _get_all_sources,$(CMMSRCS))</span>
<a href="#l3.1049"></a><span id="l3.1049" class="difflineminus">-all_c_sources := $(call _get_all_sources,$(CSRCS))</span>
<a href="#l3.1050"></a><span id="l3.1050" class="difflineminus">-all_sources := $(all_cpp_sources) $(all_cmm_sources) $(all_c_sources)</span>
<a href="#l3.1051"></a><span id="l3.1051" class="difflineminus">-</span>
<a href="#l3.1052"></a><span id="l3.1052" class="difflineminus">-# The catch-all %.i rule runs when we pass in a .i filename that doesn't match</span>
<a href="#l3.1053"></a><span id="l3.1053" class="difflineminus">-# one of the *SRCS variables. The two code paths depend on whether or not</span>
<a href="#l3.1054"></a><span id="l3.1054" class="difflineminus">-# we are requesting a unified file (PP_UNIFIED=1, the default) or not:</span>
<a href="#l3.1055"></a><span id="l3.1055" class="difflineminus">-#</span>
<a href="#l3.1056"></a><span id="l3.1056" class="difflineminus">-# PP_UNIFIED=1:</span>
<a href="#l3.1057"></a><span id="l3.1057" class="difflineminus">-#  - Look for it in any of the Unified files, and re-exec make with</span>
<a href="#l3.1058"></a><span id="l3.1058" class="difflineminus">-#    Unified_foo0.i as the target. This gets us the full unified preprocessed</span>
<a href="#l3.1059"></a><span id="l3.1059" class="difflineminus">-#    file.</span>
<a href="#l3.1060"></a><span id="l3.1060" class="difflineminus">-#</span>
<a href="#l3.1061"></a><span id="l3.1061" class="difflineminus">-# PP_UNIFIED=0:</span>
<a href="#l3.1062"></a><span id="l3.1062" class="difflineminus">-#  - If the .i filename is in *SRCS, or in a Unified filename, then we re-exec</span>
<a href="#l3.1063"></a><span id="l3.1063" class="difflineminus">-#    make with that filename as the target. The *SRCS variables are modified</span>
<a href="#l3.1064"></a><span id="l3.1064" class="difflineminus">-#    to have the Unified sources appended to them so that the static pattern</span>
<a href="#l3.1065"></a><span id="l3.1065" class="difflineminus">-#    rules will match.</span>
<a href="#l3.1066"></a><span id="l3.1066" class="difflineminus">-%.i: FORCE</span>
<a href="#l3.1067"></a><span id="l3.1067" class="difflineminus">-ifeq ($(PP_UNIFIED),1)</span>
<a href="#l3.1068"></a><span id="l3.1068" class="difflineminus">-	@$(MAKE) PP_REINVOKE=1 \</span>
<a href="#l3.1069"></a><span id="l3.1069" class="difflineminus">-	    $(or $(addsuffix .i, \</span>
<a href="#l3.1070"></a><span id="l3.1070" class="difflineminus">-              $(foreach type,c cpp mm, \</span>
<a href="#l3.1071"></a><span id="l3.1071" class="difflineminus">-	        $(if $(filter Unified%,$($(UPPER_$(type))SRCS)), \</span>
<a href="#l3.1072"></a><span id="l3.1072" class="difflineminus">-	          $(shell grep -l '#include &quot;\(.*/\)\?$(basename $@).$(or $(MATCH_$(type)),$(type))&quot;' Unified*.$(type) | sed 's/\.$(type)$$//') \</span>
<a href="#l3.1073"></a><span id="l3.1073" class="difflineminus">-            ))),$(error &quot;File not found for preprocessing: $@&quot;))</span>
<a href="#l3.1074"></a><span id="l3.1074" class="difflineminus">-else</span>
<a href="#l3.1075"></a><span id="l3.1075" class="difflineminus">-	@$(MAKE) PP_REINVOKE=1 $@ \</span>
<a href="#l3.1076"></a><span id="l3.1076" class="difflineminus">-	    $(foreach type,c cpp mm,$(UPPER_$(type))SRCS=&quot;$(all_$(type)_sources)&quot;)</span>
<a href="#l3.1077"></a><span id="l3.1077" class="difflineminus">-endif</span>
<a href="#l3.1078"></a><span id="l3.1078" class="difflineminus">-</span>
<a href="#l3.1079"></a><span id="l3.1079" class="difflineminus">-endif</span>
<a href="#l3.1080"></a><span id="l3.1080" class="difflineminus">-</span>
<a href="#l3.1081"></a><span id="l3.1081" class="difflineminus">-endif</span>
<a href="#l3.1082"></a><span id="l3.1082" class="difflineminus">-</span>
<a href="#l3.1083"></a><span id="l3.1083" class="difflineminus">-$(RESFILE): %.res: %.rc</span>
<a href="#l3.1084"></a><span id="l3.1084" class="difflineminus">-	$(REPORT_BUILD)</span>
<a href="#l3.1085"></a><span id="l3.1085" class="difflineminus">-	@echo Creating Resource file: $@</span>
<a href="#l3.1086"></a><span id="l3.1086" class="difflineminus">-ifdef GNU_CC</span>
<a href="#l3.1087"></a><span id="l3.1087" class="difflineminus">-	$(RC) $(RCFLAGS) $(filter-out -U%,$(DEFINES)) $(INCLUDES:-I%=--include-dir %) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l3.1088"></a><span id="l3.1088" class="difflineminus">-else</span>
<a href="#l3.1089"></a><span id="l3.1089" class="difflineminus">-	$(RC) $(RCFLAGS) -r $(DEFINES) $(INCLUDES) $(OUTOPTION)$@ $(_VPATH_SRCS)</span>
<a href="#l3.1090"></a><span id="l3.1090" class="difflineminus">-endif</span>
<a href="#l3.1091"></a><span id="l3.1091" class="difflineminus">-</span>
<a href="#l3.1092"></a><span id="l3.1092" class="difflineminus">-# Cancel GNU make built-in implicit rules</span>
<a href="#l3.1093"></a><span id="l3.1093" class="difflineminus">-MAKEFLAGS += -r</span>
<a href="#l3.1094"></a><span id="l3.1094" class="difflineminus">-</span>
<a href="#l3.1095"></a><span id="l3.1095" class="difflineminus">-ifneq (,$(filter WINNT,$(OS_ARCH)))</span>
<a href="#l3.1096"></a><span id="l3.1096" class="difflineminus">-SEP := ;</span>
<a href="#l3.1097"></a><span id="l3.1097" class="difflineminus">-else</span>
<a href="#l3.1098"></a><span id="l3.1098" class="difflineminus">-SEP := :</span>
<a href="#l3.1099"></a><span id="l3.1099" class="difflineminus">-endif</span>
<a href="#l3.1100"></a><span id="l3.1100" class="difflineminus">-</span>
<a href="#l3.1101"></a><span id="l3.1101" class="difflineminus">-EMPTY :=</span>
<a href="#l3.1102"></a><span id="l3.1102" class="difflineminus">-SPACE := $(EMPTY) $(EMPTY)</span>
<a href="#l3.1103"></a><span id="l3.1103" class="difflineminus">-</span>
<a href="#l3.1104"></a><span id="l3.1104" class="difflineminus">-# MSYS has its own special path form, but javac expects the source and class</span>
<a href="#l3.1105"></a><span id="l3.1105" class="difflineminus">-# paths to be in the DOS form (i.e. e:/builds/...).  This function does the</span>
<a href="#l3.1106"></a><span id="l3.1106" class="difflineminus">-# appropriate conversion on Windows, but is a noop on other systems.</span>
<a href="#l3.1107"></a><span id="l3.1107" class="difflineminus">-ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l3.1108"></a><span id="l3.1108" class="difflineminus">-#  We use 'pwd -W' to get DOS form of the path.  However, since the given path</span>
<a href="#l3.1109"></a><span id="l3.1109" class="difflineminus">-#  could be a file or a non-existent path, we cannot call 'pwd -W' directly</span>
<a href="#l3.1110"></a><span id="l3.1110" class="difflineminus">-#  on the path.  Instead, we extract the root path (i.e. &quot;c:/&quot;), call 'pwd -W'</span>
<a href="#l3.1111"></a><span id="l3.1111" class="difflineminus">-#  on it, then merge with the rest of the path.</span>
<a href="#l3.1112"></a><span id="l3.1112" class="difflineminus">-root-path = $(shell echo $(1) | sed -e 's|\(/[^/]*\)/\?\(.*\)|\1|')</span>
<a href="#l3.1113"></a><span id="l3.1113" class="difflineminus">-non-root-path = $(shell echo $(1) | sed -e 's|\(/[^/]*\)/\?\(.*\)|\2|')</span>
<a href="#l3.1114"></a><span id="l3.1114" class="difflineminus">-normalizepath = $(foreach p,$(1),$(if $(filter /%,$(1)),$(patsubst %/,%,$(shell cd $(call root-path,$(1)) &amp;&amp; pwd -W))/$(call non-root-path,$(1)),$(1)))</span>
<a href="#l3.1115"></a><span id="l3.1115" class="difflineminus">-else</span>
<a href="#l3.1116"></a><span id="l3.1116" class="difflineminus">-normalizepath = $(1)</span>
<a href="#l3.1117"></a><span id="l3.1117" class="difflineminus">-endif</span>
<a href="#l3.1118"></a><span id="l3.1118" class="difflineminus">-</span>
<a href="#l3.1119"></a><span id="l3.1119" class="difflineminus">-###############################################################################</span>
<a href="#l3.1120"></a><span id="l3.1120" class="difflineminus">-# Update Files Managed by Build Backend</span>
<a href="#l3.1121"></a><span id="l3.1121" class="difflineminus">-###############################################################################</span>
<a href="#l3.1122"></a><span id="l3.1122" class="difflineminus">-</span>
<a href="#l3.1123"></a><span id="l3.1123" class="difflineminus">-ifdef MOZBUILD_DERIVED</span>
<a href="#l3.1124"></a><span id="l3.1124" class="difflineminus">-</span>
<a href="#l3.1125"></a><span id="l3.1125" class="difflineminus">-# If this Makefile is derived from moz.build files, substitution for all .in</span>
<a href="#l3.1126"></a><span id="l3.1126" class="difflineminus">-# files is handled by SUBSTITUTE_FILES. This includes Makefile.in.</span>
<a href="#l3.1127"></a><span id="l3.1127" class="difflineminus">-ifneq ($(SUBSTITUTE_FILES),,)</span>
<a href="#l3.1128"></a><span id="l3.1128" class="difflineminus">-$(SUBSTITUTE_FILES): % : $(srcdir)/%.in $(DEPTH)/config/autoconf.mk</span>
<a href="#l3.1129"></a><span id="l3.1129" class="difflineminus">-	@$(PYTHON) $(DEPTH)/config.status -n --file=$@</span>
<a href="#l3.1130"></a><span id="l3.1130" class="difflineminus">-	@$(TOUCH) $@</span>
<a href="#l3.1131"></a><span id="l3.1131" class="difflineminus">-endif</span>
<a href="#l3.1132"></a><span id="l3.1132" class="difflineminus">-</span>
<a href="#l3.1133"></a><span id="l3.1133" class="difflineminus">-# Detect when the backend.mk needs rebuilt. This will cause a full scan and</span>
<a href="#l3.1134"></a><span id="l3.1134" class="difflineminus">-# rebuild. While relatively expensive, it should only occur once per recursion.</span>
<a href="#l3.1135"></a><span id="l3.1135" class="difflineminus">-ifneq ($(BACKEND_INPUT_FILES),,)</span>
<a href="#l3.1136"></a><span id="l3.1136" class="difflineminus">-backend.mk: $(BACKEND_INPUT_FILES)</span>
<a href="#l3.1137"></a><span id="l3.1137" class="difflineminus">-	@$(PYTHON) $(DEPTH)/config.status -n</span>
<a href="#l3.1138"></a><span id="l3.1138" class="difflineminus">-	@$(TOUCH) $@</span>
<a href="#l3.1139"></a><span id="l3.1139" class="difflineminus">-endif</span>
<a href="#l3.1140"></a><span id="l3.1140" class="difflineminus">-</span>
<a href="#l3.1141"></a><span id="l3.1141" class="difflineminus">-endif # MOZBUILD_DERIVED</span>
<a href="#l3.1142"></a><span id="l3.1142" class="difflineminus">-</span>
<a href="#l3.1143"></a><span id="l3.1143" class="difflineminus">-###############################################################################</span>
<a href="#l3.1144"></a><span id="l3.1144" class="difflineminus">-# Bunch of things that extend the 'export' rule (in order):</span>
<a href="#l3.1145"></a><span id="l3.1145" class="difflineminus">-###############################################################################</span>
<a href="#l3.1146"></a><span id="l3.1146" class="difflineminus">-</span>
<a href="#l3.1147"></a><span id="l3.1147" class="difflineminus">-ifneq ($(XPI_NAME),)</span>
<a href="#l3.1148"></a><span id="l3.1148" class="difflineminus">-$(FINAL_TARGET):</span>
<a href="#l3.1149"></a><span id="l3.1149" class="difflineminus">-	$(NSINSTALL) -D $@</span>
<a href="#l3.1150"></a><span id="l3.1150" class="difflineminus">-</span>
<a href="#l3.1151"></a><span id="l3.1151" class="difflineminus">-export:: $(FINAL_TARGET)</span>
<a href="#l3.1152"></a><span id="l3.1152" class="difflineminus">-endif</span>
<a href="#l3.1153"></a><span id="l3.1153" class="difflineminus">-</span>
<a href="#l3.1154"></a><span id="l3.1154" class="difflineminus">-################################################################################</span>
<a href="#l3.1155"></a><span id="l3.1155" class="difflineminus">-# Copy each element of PREF_JS_EXPORTS</span>
<a href="#l3.1156"></a><span id="l3.1156" class="difflineminus">-</span>
<a href="#l3.1157"></a><span id="l3.1157" class="difflineminus">-# The default location for PREF_JS_EXPORTS is the gre prefs directory.</span>
<a href="#l3.1158"></a><span id="l3.1158" class="difflineminus">-PREF_DIR = defaults/pref</span>
<a href="#l3.1159"></a><span id="l3.1159" class="difflineminus">-</span>
<a href="#l3.1160"></a><span id="l3.1160" class="difflineminus">-# If DIST_SUBDIR is defined it indicates that app and gre dirs are</span>
<a href="#l3.1161"></a><span id="l3.1161" class="difflineminus">-# different and that we are building app related resources. Hence,</span>
<a href="#l3.1162"></a><span id="l3.1162" class="difflineminus">-# PREF_DIR should point to the app prefs location.</span>
<a href="#l3.1163"></a><span id="l3.1163" class="difflineminus">-ifneq (,$(DIST_SUBDIR)$(XPI_NAME)$(LIBXUL_SDK))</span>
<a href="#l3.1164"></a><span id="l3.1164" class="difflineminus">-PREF_DIR = defaults/preferences</span>
<a href="#l3.1165"></a><span id="l3.1165" class="difflineminus">-endif</span>
<a href="#l3.1166"></a><span id="l3.1166" class="difflineminus">-</span>
<a href="#l3.1167"></a><span id="l3.1167" class="difflineminus">-# on win32, pref files need CRLF line endings... see bug 206029</span>
<a href="#l3.1168"></a><span id="l3.1168" class="difflineminus">-ifeq (WINNT,$(OS_ARCH))</span>
<a href="#l3.1169"></a><span id="l3.1169" class="difflineminus">-PREF_PPFLAGS += --line-endings=crlf</span>
<a href="#l3.1170"></a><span id="l3.1170" class="difflineminus">-endif</span>
<a href="#l3.1171"></a><span id="l3.1171" class="difflineminus">-</span>
<a href="#l3.1172"></a><span id="l3.1172" class="difflineminus">-ifneq ($(PREF_JS_EXPORTS),)</span>
<a href="#l3.1173"></a><span id="l3.1173" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1174"></a><span id="l3.1174" class="difflineminus">-PREF_JS_EXPORTS_PATH := $(FINAL_TARGET)/$(PREF_DIR)</span>
<a href="#l3.1175"></a><span id="l3.1175" class="difflineminus">-PREF_JS_EXPORTS_FLAGS := $(PREF_PPFLAGS)</span>
<a href="#l3.1176"></a><span id="l3.1176" class="difflineminus">-PP_TARGETS += PREF_JS_EXPORTS</span>
<a href="#l3.1177"></a><span id="l3.1177" class="difflineminus">-endif</span>
<a href="#l3.1178"></a><span id="l3.1178" class="difflineminus">-endif</span>
<a href="#l3.1179"></a><span id="l3.1179" class="difflineminus">-</span>
<a href="#l3.1180"></a><span id="l3.1180" class="difflineminus">-################################################################################</span>
<a href="#l3.1181"></a><span id="l3.1181" class="difflineminus">-# Copy each element of AUTOCFG_JS_EXPORTS to $(FINAL_TARGET)/defaults/autoconfig</span>
<a href="#l3.1182"></a><span id="l3.1182" class="difflineminus">-</span>
<a href="#l3.1183"></a><span id="l3.1183" class="difflineminus">-ifneq ($(AUTOCFG_JS_EXPORTS),)</span>
<a href="#l3.1184"></a><span id="l3.1184" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1185"></a><span id="l3.1185" class="difflineminus">-AUTOCFG_JS_EXPORTS_FILES := $(AUTOCFG_JS_EXPORTS)</span>
<a href="#l3.1186"></a><span id="l3.1186" class="difflineminus">-AUTOCFG_JS_EXPORTS_DEST := $(FINAL_TARGET)/defaults/autoconfig</span>
<a href="#l3.1187"></a><span id="l3.1187" class="difflineminus">-AUTOCFG_JS_EXPORTS_TARGET := export</span>
<a href="#l3.1188"></a><span id="l3.1188" class="difflineminus">-INSTALL_TARGETS += AUTOCFG_JS_EXPORTS</span>
<a href="#l3.1189"></a><span id="l3.1189" class="difflineminus">-endif</span>
<a href="#l3.1190"></a><span id="l3.1190" class="difflineminus">-endif</span>
<a href="#l3.1191"></a><span id="l3.1191" class="difflineminus">-</span>
<a href="#l3.1192"></a><span id="l3.1192" class="difflineminus">-################################################################################</span>
<a href="#l3.1193"></a><span id="l3.1193" class="difflineminus">-# Install a linked .xpt into the appropriate place.</span>
<a href="#l3.1194"></a><span id="l3.1194" class="difflineminus">-# This should ideally be performed by the non-recursive idl make file. Some day.</span>
<a href="#l3.1195"></a><span id="l3.1195" class="difflineminus">-ifdef XPT_NAME #{</span>
<a href="#l3.1196"></a><span id="l3.1196" class="difflineminus">-</span>
<a href="#l3.1197"></a><span id="l3.1197" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1198"></a><span id="l3.1198" class="difflineminus">-_XPT_NAME_FILES := $(DEPTH)/config/makefiles/xpidl/xpt/$(XPT_NAME)</span>
<a href="#l3.1199"></a><span id="l3.1199" class="difflineminus">-_XPT_NAME_DEST := $(FINAL_TARGET)/components</span>
<a href="#l3.1200"></a><span id="l3.1200" class="difflineminus">-_XPT_NAME_TARGET := misc</span>
<a href="#l3.1201"></a><span id="l3.1201" class="difflineminus">-INSTALL_TARGETS += _XPT_NAME</span>
<a href="#l3.1202"></a><span id="l3.1202" class="difflineminus">-</span>
<a href="#l3.1203"></a><span id="l3.1203" class="difflineminus">-ifndef NO_INTERFACES_MANIFEST</span>
<a href="#l3.1204"></a><span id="l3.1204" class="difflineminus">-misc:: $(call mkdir_deps,$(FINAL_TARGET)/components)</span>
<a href="#l3.1205"></a><span id="l3.1205" class="difflineminus">-	$(call py_action,buildlist,$(FINAL_TARGET)/components/interfaces.manifest 'interfaces $(XPT_NAME)')</span>
<a href="#l3.1206"></a><span id="l3.1206" class="difflineminus">-	$(call py_action,buildlist,$(FINAL_TARGET)/chrome.manifest 'manifest components/interfaces.manifest')</span>
<a href="#l3.1207"></a><span id="l3.1207" class="difflineminus">-endif</span>
<a href="#l3.1208"></a><span id="l3.1208" class="difflineminus">-endif</span>
<a href="#l3.1209"></a><span id="l3.1209" class="difflineminus">-</span>
<a href="#l3.1210"></a><span id="l3.1210" class="difflineminus">-endif #} XPT_NAME</span>
<a href="#l3.1211"></a><span id="l3.1211" class="difflineminus">-</span>
<a href="#l3.1212"></a><span id="l3.1212" class="difflineminus">-################################################################################</span>
<a href="#l3.1213"></a><span id="l3.1213" class="difflineminus">-# Copy each element of EXTRA_COMPONENTS to $(FINAL_TARGET)/components</span>
<a href="#l3.1214"></a><span id="l3.1214" class="difflineminus">-ifneq (,$(filter %.js,$(EXTRA_COMPONENTS) $(EXTRA_PP_COMPONENTS)))</span>
<a href="#l3.1215"></a><span id="l3.1215" class="difflineminus">-ifeq (,$(filter %.manifest,$(EXTRA_COMPONENTS) $(EXTRA_PP_COMPONENTS)))</span>
<a href="#l3.1216"></a><span id="l3.1216" class="difflineminus">-ifndef NO_JS_MANIFEST</span>
<a href="#l3.1217"></a><span id="l3.1217" class="difflineminus">-$(error .js component without matching .manifest. See https://developer.mozilla.org/en/XPCOM/XPCOM_changes_in_Gecko_2.0)</span>
<a href="#l3.1218"></a><span id="l3.1218" class="difflineminus">-endif</span>
<a href="#l3.1219"></a><span id="l3.1219" class="difflineminus">-endif</span>
<a href="#l3.1220"></a><span id="l3.1220" class="difflineminus">-endif</span>
<a href="#l3.1221"></a><span id="l3.1221" class="difflineminus">-</span>
<a href="#l3.1222"></a><span id="l3.1222" class="difflineminus">-ifdef EXTRA_COMPONENTS</span>
<a href="#l3.1223"></a><span id="l3.1223" class="difflineminus">-misc:: $(EXTRA_COMPONENTS)</span>
<a href="#l3.1224"></a><span id="l3.1224" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1225"></a><span id="l3.1225" class="difflineminus">-EXTRA_COMPONENTS_FILES := $(EXTRA_COMPONENTS)</span>
<a href="#l3.1226"></a><span id="l3.1226" class="difflineminus">-EXTRA_COMPONENTS_DEST := $(FINAL_TARGET)/components</span>
<a href="#l3.1227"></a><span id="l3.1227" class="difflineminus">-EXTRA_COMPONENTS_TARGET := misc</span>
<a href="#l3.1228"></a><span id="l3.1228" class="difflineminus">-INSTALL_TARGETS += EXTRA_COMPONENTS</span>
<a href="#l3.1229"></a><span id="l3.1229" class="difflineminus">-endif</span>
<a href="#l3.1230"></a><span id="l3.1230" class="difflineminus">-endif</span>
<a href="#l3.1231"></a><span id="l3.1231" class="difflineminus">-</span>
<a href="#l3.1232"></a><span id="l3.1232" class="difflineminus">-ifdef EXTRA_PP_COMPONENTS</span>
<a href="#l3.1233"></a><span id="l3.1233" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1234"></a><span id="l3.1234" class="difflineminus">-EXTRA_PP_COMPONENTS_PATH := $(FINAL_TARGET)/components</span>
<a href="#l3.1235"></a><span id="l3.1235" class="difflineminus">-EXTRA_PP_COMPONENTS_TARGET := misc</span>
<a href="#l3.1236"></a><span id="l3.1236" class="difflineminus">-PP_TARGETS += EXTRA_PP_COMPONENTS</span>
<a href="#l3.1237"></a><span id="l3.1237" class="difflineminus">-endif</span>
<a href="#l3.1238"></a><span id="l3.1238" class="difflineminus">-endif</span>
<a href="#l3.1239"></a><span id="l3.1239" class="difflineminus">-</span>
<a href="#l3.1240"></a><span id="l3.1240" class="difflineminus">-EXTRA_MANIFESTS = $(filter %.manifest,$(EXTRA_COMPONENTS) $(EXTRA_PP_COMPONENTS))</span>
<a href="#l3.1241"></a><span id="l3.1241" class="difflineminus">-ifneq (,$(EXTRA_MANIFESTS))</span>
<a href="#l3.1242"></a><span id="l3.1242" class="difflineminus">-misc:: $(call mkdir_deps,$(FINAL_TARGET))</span>
<a href="#l3.1243"></a><span id="l3.1243" class="difflineminus">-	$(call py_action,buildlist,$(FINAL_TARGET)/chrome.manifest $(patsubst %,'manifest components/%',$(notdir $(EXTRA_MANIFESTS))))</span>
<a href="#l3.1244"></a><span id="l3.1244" class="difflineminus">-endif</span>
<a href="#l3.1245"></a><span id="l3.1245" class="difflineminus">-</span>
<a href="#l3.1246"></a><span id="l3.1246" class="difflineminus">-################################################################################</span>
<a href="#l3.1247"></a><span id="l3.1247" class="difflineminus">-# Copy each element of EXTRA_JS_MODULES to</span>
<a href="#l3.1248"></a><span id="l3.1248" class="difflineminus">-# $(FINAL_TARGET)/modules</span>
<a href="#l3.1249"></a><span id="l3.1249" class="difflineminus">-FINAL_JS_MODULES_PATH := $(FINAL_TARGET)/modules</span>
<a href="#l3.1250"></a><span id="l3.1250" class="difflineminus">-</span>
<a href="#l3.1251"></a><span id="l3.1251" class="difflineminus">-ifdef EXTRA_JS_MODULES</span>
<a href="#l3.1252"></a><span id="l3.1252" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1253"></a><span id="l3.1253" class="difflineminus">-EXTRA_JS_MODULES_FILES := $(EXTRA_JS_MODULES)</span>
<a href="#l3.1254"></a><span id="l3.1254" class="difflineminus">-EXTRA_JS_MODULES_DEST := $(FINAL_JS_MODULES_PATH)</span>
<a href="#l3.1255"></a><span id="l3.1255" class="difflineminus">-INSTALL_TARGETS += EXTRA_JS_MODULES</span>
<a href="#l3.1256"></a><span id="l3.1256" class="difflineminus">-endif</span>
<a href="#l3.1257"></a><span id="l3.1257" class="difflineminus">-endif</span>
<a href="#l3.1258"></a><span id="l3.1258" class="difflineminus">-</span>
<a href="#l3.1259"></a><span id="l3.1259" class="difflineminus">-ifdef EXTRA_PP_JS_MODULES</span>
<a href="#l3.1260"></a><span id="l3.1260" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1261"></a><span id="l3.1261" class="difflineminus">-EXTRA_PP_JS_MODULES_PATH := $(FINAL_JS_MODULES_PATH)</span>
<a href="#l3.1262"></a><span id="l3.1262" class="difflineminus">-PP_TARGETS += EXTRA_PP_JS_MODULES</span>
<a href="#l3.1263"></a><span id="l3.1263" class="difflineminus">-endif</span>
<a href="#l3.1264"></a><span id="l3.1264" class="difflineminus">-endif</span>
<a href="#l3.1265"></a><span id="l3.1265" class="difflineminus">-</span>
<a href="#l3.1266"></a><span id="l3.1266" class="difflineminus">-################################################################################</span>
<a href="#l3.1267"></a><span id="l3.1267" class="difflineminus">-# SDK</span>
<a href="#l3.1268"></a><span id="l3.1268" class="difflineminus">-</span>
<a href="#l3.1269"></a><span id="l3.1269" class="difflineminus">-ifneq (,$(SDK_LIBRARY))</span>
<a href="#l3.1270"></a><span id="l3.1270" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1271"></a><span id="l3.1271" class="difflineminus">-SDK_LIBRARY_FILES := $(SDK_LIBRARY)</span>
<a href="#l3.1272"></a><span id="l3.1272" class="difflineminus">-SDK_LIBRARY_DEST := $(SDK_LIB_DIR)</span>
<a href="#l3.1273"></a><span id="l3.1273" class="difflineminus">-SDK_LIBRARY_TARGET := target</span>
<a href="#l3.1274"></a><span id="l3.1274" class="difflineminus">-INSTALL_TARGETS += SDK_LIBRARY</span>
<a href="#l3.1275"></a><span id="l3.1275" class="difflineminus">-endif</span>
<a href="#l3.1276"></a><span id="l3.1276" class="difflineminus">-endif # SDK_LIBRARY</span>
<a href="#l3.1277"></a><span id="l3.1277" class="difflineminus">-</span>
<a href="#l3.1278"></a><span id="l3.1278" class="difflineminus">-# SDK_BINARY is still used in various makefiles for non-products of the</span>
<a href="#l3.1279"></a><span id="l3.1279" class="difflineminus">-# compilation, so we need to keep that running on the libs tier.</span>
<a href="#l3.1280"></a><span id="l3.1280" class="difflineminus">-ifneq (,$(strip $(SDK_BINARY)))</span>
<a href="#l3.1281"></a><span id="l3.1281" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1282"></a><span id="l3.1282" class="difflineminus">-SDK_BINARY_FILES := $(SDK_BINARY)</span>
<a href="#l3.1283"></a><span id="l3.1283" class="difflineminus">-SDK_BINARY_DEST := $(SDK_BIN_DIR)</span>
<a href="#l3.1284"></a><span id="l3.1284" class="difflineminus">-# SDK_BINARY_TARGET is set in xpcom/idl-parser/Makefile.in</span>
<a href="#l3.1285"></a><span id="l3.1285" class="difflineminus">-SDK_BINARY_TARGET ?= libs target</span>
<a href="#l3.1286"></a><span id="l3.1286" class="difflineminus">-INSTALL_TARGETS += SDK_BINARY</span>
<a href="#l3.1287"></a><span id="l3.1287" class="difflineminus">-endif</span>
<a href="#l3.1288"></a><span id="l3.1288" class="difflineminus">-endif # SDK_BINARY</span>
<a href="#l3.1289"></a><span id="l3.1289" class="difflineminus">-</span>
<a href="#l3.1290"></a><span id="l3.1290" class="difflineminus">-################################################################################</span>
<a href="#l3.1291"></a><span id="l3.1291" class="difflineminus">-# CHROME PACKAGING</span>
<a href="#l3.1292"></a><span id="l3.1292" class="difflineminus">-</span>
<a href="#l3.1293"></a><span id="l3.1293" class="difflineminus">-chrome::</span>
<a href="#l3.1294"></a><span id="l3.1294" class="difflineminus">-	$(MAKE) realchrome</span>
<a href="#l3.1295"></a><span id="l3.1295" class="difflineminus">-	$(LOOP_OVER_DIRS)</span>
<a href="#l3.1296"></a><span id="l3.1296" class="difflineminus">-</span>
<a href="#l3.1297"></a><span id="l3.1297" class="difflineminus">-$(FINAL_TARGET)/chrome: $(call mkdir_deps,$(FINAL_TARGET)/chrome)</span>
<a href="#l3.1298"></a><span id="l3.1298" class="difflineminus">-</span>
<a href="#l3.1299"></a><span id="l3.1299" class="difflineminus">-ifneq (,$(JAR_MANIFEST))</span>
<a href="#l3.1300"></a><span id="l3.1300" class="difflineminus">-ifndef NO_DIST_INSTALL</span>
<a href="#l3.1301"></a><span id="l3.1301" class="difflineminus">-libs realchrome:: $(FINAL_TARGET)/chrome</span>
<a href="#l3.1302"></a><span id="l3.1302" class="difflineminus">-	$(call py_action,jar_maker,\</span>
<a href="#l3.1303"></a><span id="l3.1303" class="difflineminus">-	  $(QUIET) -j $(FINAL_TARGET)/chrome \</span>
<a href="#l3.1304"></a><span id="l3.1304" class="difflineminus">-	  $(MAKE_JARS_FLAGS) $(XULPPFLAGS) $(DEFINES) $(ACDEFINES) \</span>
<a href="#l3.1305"></a><span id="l3.1305" class="difflineminus">-	  $(JAR_MANIFEST))</span>
<a href="#l3.1306"></a><span id="l3.1306" class="difflineminus">-endif</span>
<a href="#l3.1307"></a><span id="l3.1307" class="difflineminus">-</span>
<a href="#l3.1308"></a><span id="l3.1308" class="difflineminus">-# This is a temporary check to ensure patches relying on the old behavior</span>
<a href="#l3.1309"></a><span id="l3.1309" class="difflineminus">-# of silently picking up jar.mn files continue to work.</span>
<a href="#l3.1310"></a><span id="l3.1310" class="difflineminus">-else # No JAR_MANIFEST</span>
<a href="#l3.1311"></a><span id="l3.1311" class="difflineminus">-ifneq (,$(wildcard $(srcdir)/jar.mn))</span>
<a href="#l3.1312"></a><span id="l3.1312" class="difflineminus">-$(error $(srcdir) contains a jar.mn file but this file is not declared in a JAR_MANIFESTS variable in a moz.build file)</span>
<a href="#l3.1313"></a><span id="l3.1313" class="difflineminus">-endif</span>
<a href="#l3.1314"></a><span id="l3.1314" class="difflineminus">-endif</span>
<a href="#l3.1315"></a><span id="l3.1315" class="difflineminus">-</span>
<a href="#l3.1316"></a><span id="l3.1316" class="difflineminus">-ifneq ($(DIST_FILES),)</span>
<a href="#l3.1317"></a><span id="l3.1317" class="difflineminus">-DIST_FILES_PATH := $(FINAL_TARGET)</span>
<a href="#l3.1318"></a><span id="l3.1318" class="difflineminus">-DIST_FILES_FLAGS := $(XULAPP_DEFINES)</span>
<a href="#l3.1319"></a><span id="l3.1319" class="difflineminus">-PP_TARGETS += DIST_FILES</span>
<a href="#l3.1320"></a><span id="l3.1320" class="difflineminus">-endif</span>
<a href="#l3.1321"></a><span id="l3.1321" class="difflineminus">-</span>
<a href="#l3.1322"></a><span id="l3.1322" class="difflineminus">-# When you move this out of the tools tier, please remove the corresponding</span>
<a href="#l3.1323"></a><span id="l3.1323" class="difflineminus">-# hacks in recursivemake.py that check if Makefile.in sets the variable.</span>
<a href="#l3.1324"></a><span id="l3.1324" class="difflineminus">-ifneq ($(XPI_PKGNAME),)</span>
<a href="#l3.1325"></a><span id="l3.1325" class="difflineminus">-tools realchrome::</span>
<a href="#l3.1326"></a><span id="l3.1326" class="difflineminus">-ifdef STRIP_XPI</span>
<a href="#l3.1327"></a><span id="l3.1327" class="difflineminus">-ifndef MOZ_DEBUG</span>
<a href="#l3.1328"></a><span id="l3.1328" class="difflineminus">-	@echo 'Stripping $(XPI_PKGNAME) package directory...'</span>
<a href="#l3.1329"></a><span id="l3.1329" class="difflineminus">-	@echo $(FINAL_TARGET)</span>
<a href="#l3.1330"></a><span id="l3.1330" class="difflineminus">-	@cd $(FINAL_TARGET) &amp;&amp; find . ! -type d \</span>
<a href="#l3.1331"></a><span id="l3.1331" class="difflineminus">-			! -name '*.js' \</span>
<a href="#l3.1332"></a><span id="l3.1332" class="difflineminus">-			! -name '*.xpt' \</span>
<a href="#l3.1333"></a><span id="l3.1333" class="difflineminus">-			! -name '*.gif' \</span>
<a href="#l3.1334"></a><span id="l3.1334" class="difflineminus">-			! -name '*.jpg' \</span>
<a href="#l3.1335"></a><span id="l3.1335" class="difflineminus">-			! -name '*.png' \</span>
<a href="#l3.1336"></a><span id="l3.1336" class="difflineminus">-			! -name '*.xpm' \</span>
<a href="#l3.1337"></a><span id="l3.1337" class="difflineminus">-			! -name '*.txt' \</span>
<a href="#l3.1338"></a><span id="l3.1338" class="difflineminus">-			! -name '*.rdf' \</span>
<a href="#l3.1339"></a><span id="l3.1339" class="difflineminus">-			! -name '*.sh' \</span>
<a href="#l3.1340"></a><span id="l3.1340" class="difflineminus">-			! -name '*.properties' \</span>
<a href="#l3.1341"></a><span id="l3.1341" class="difflineminus">-			! -name '*.dtd' \</span>
<a href="#l3.1342"></a><span id="l3.1342" class="difflineminus">-			! -name '*.html' \</span>
<a href="#l3.1343"></a><span id="l3.1343" class="difflineminus">-			! -name '*.xul' \</span>
<a href="#l3.1344"></a><span id="l3.1344" class="difflineminus">-			! -name '*.css' \</span>
<a href="#l3.1345"></a><span id="l3.1345" class="difflineminus">-			! -name '*.xml' \</span>
<a href="#l3.1346"></a><span id="l3.1346" class="difflineminus">-			! -name '*.jar' \</span>
<a href="#l3.1347"></a><span id="l3.1347" class="difflineminus">-			! -name '*.dat' \</span>
<a href="#l3.1348"></a><span id="l3.1348" class="difflineminus">-			! -name '*.tbl' \</span>
<a href="#l3.1349"></a><span id="l3.1349" class="difflineminus">-			! -name '*.src' \</span>
<a href="#l3.1350"></a><span id="l3.1350" class="difflineminus">-			! -name '*.reg' \</span>
<a href="#l3.1351"></a><span id="l3.1351" class="difflineminus">-			$(PLATFORM_EXCLUDE_LIST) \</span>
<a href="#l3.1352"></a><span id="l3.1352" class="difflineminus">-			-exec $(STRIP) $(STRIP_FLAGS) {} &gt;/dev/null 2&gt;&amp;1 \;</span>
<a href="#l3.1353"></a><span id="l3.1353" class="difflineminus">-endif</span>
<a href="#l3.1354"></a><span id="l3.1354" class="difflineminus">-endif</span>
<a href="#l3.1355"></a><span id="l3.1355" class="difflineminus">-	@echo 'Packaging $(XPI_PKGNAME).xpi...'</span>
<a href="#l3.1356"></a><span id="l3.1356" class="difflineminus">-	cd $(FINAL_TARGET) &amp;&amp; $(ZIP) -qr ../$(XPI_PKGNAME).xpi *</span>
<a href="#l3.1357"></a><span id="l3.1357" class="difflineminus">-endif</span>
<a href="#l3.1358"></a><span id="l3.1358" class="difflineminus">-</span>
<a href="#l3.1359"></a><span id="l3.1359" class="difflineminus">-# See comment above about moving this out of the tools tier.</span>
<a href="#l3.1360"></a><span id="l3.1360" class="difflineminus">-ifdef INSTALL_EXTENSION_ID</span>
<a href="#l3.1361"></a><span id="l3.1361" class="difflineminus">-ifndef XPI_NAME</span>
<a href="#l3.1362"></a><span id="l3.1362" class="difflineminus">-$(error XPI_NAME must be set for INSTALL_EXTENSION_ID)</span>
<a href="#l3.1363"></a><span id="l3.1363" class="difflineminus">-endif</span>
<a href="#l3.1364"></a><span id="l3.1364" class="difflineminus">-</span>
<a href="#l3.1365"></a><span id="l3.1365" class="difflineminus">-tools::</span>
<a href="#l3.1366"></a><span id="l3.1366" class="difflineminus">-	$(RM) -r '$(DIST)/bin/distribution$(DIST_SUBDIR:%=/%)/extensions/$(INSTALL_EXTENSION_ID)'</span>
<a href="#l3.1367"></a><span id="l3.1367" class="difflineminus">-	$(NSINSTALL) -D '$(DIST)/bin/distribution$(DIST_SUBDIR:%=/%)/extensions/$(INSTALL_EXTENSION_ID)'</span>
<a href="#l3.1368"></a><span id="l3.1368" class="difflineminus">-	$(call copy_dir,$(FINAL_TARGET),$(DIST)/bin/distribution$(DIST_SUBDIR:%=/%)/extensions/$(INSTALL_EXTENSION_ID))</span>
<a href="#l3.1369"></a><span id="l3.1369" class="difflineminus">-</span>
<a href="#l3.1370"></a><span id="l3.1370" class="difflineminus">-endif</span>
<a href="#l3.1371"></a><span id="l3.1371" class="difflineminus">-</span>
<a href="#l3.1372"></a><span id="l3.1372" class="difflineminus">-#############################################################################</span>
<a href="#l3.1373"></a><span id="l3.1373" class="difflineminus">-# MDDEPDIR is the subdirectory where all the dependency files are placed.</span>
<a href="#l3.1374"></a><span id="l3.1374" class="difflineminus">-#   This uses a make rule (instead of a macro) to support parallel</span>
<a href="#l3.1375"></a><span id="l3.1375" class="difflineminus">-#   builds (-jN). If this were done in the LOOP_OVER_DIRS macro, two</span>
<a href="#l3.1376"></a><span id="l3.1376" class="difflineminus">-#   processes could simultaneously try to create the same directory.</span>
<a href="#l3.1377"></a><span id="l3.1377" class="difflineminus">-#</span>
<a href="#l3.1378"></a><span id="l3.1378" class="difflineminus">-#   We use $(CURDIR) in the rule's target to ensure that we don't find</span>
<a href="#l3.1379"></a><span id="l3.1379" class="difflineminus">-#   a dependency directory in the source tree via VPATH (perhaps from</span>
<a href="#l3.1380"></a><span id="l3.1380" class="difflineminus">-#   a previous build in the source tree) and thus neglect to create a</span>
<a href="#l3.1381"></a><span id="l3.1381" class="difflineminus">-#   dependency directory in the object directory, where we really need</span>
<a href="#l3.1382"></a><span id="l3.1382" class="difflineminus">-#   it.</span>
<a href="#l3.1383"></a><span id="l3.1383" class="difflineminus">-</span>
<a href="#l3.1384"></a><span id="l3.1384" class="difflineminus">-ifneq (,$(filter-out all chrome default export realchrome clean clobber clobber_all distclean realclean,$(MAKECMDGOALS)))</span>
<a href="#l3.1385"></a><span id="l3.1385" class="difflineminus">-MDDEPEND_FILES		:= $(strip $(wildcard $(addprefix $(MDDEPDIR)/,$(EXTRA_MDDEPEND_FILES) $(addsuffix .pp,$(notdir $(sort $(OBJS) $(PROGOBJS) $(HOST_OBJS) $(HOST_PROGOBJS)))))))</span>
<a href="#l3.1386"></a><span id="l3.1386" class="difflineminus">-</span>
<a href="#l3.1387"></a><span id="l3.1387" class="difflineminus">-ifneq (,$(MDDEPEND_FILES))</span>
<a href="#l3.1388"></a><span id="l3.1388" class="difflineminus">-$(call include_deps,$(MDDEPEND_FILES))</span>
<a href="#l3.1389"></a><span id="l3.1389" class="difflineminus">-endif</span>
<a href="#l3.1390"></a><span id="l3.1390" class="difflineminus">-</span>
<a href="#l3.1391"></a><span id="l3.1391" class="difflineminus">-endif</span>
<a href="#l3.1392"></a><span id="l3.1392" class="difflineminus">-</span>
<a href="#l3.1393"></a><span id="l3.1393" class="difflineminus">-</span>
<a href="#l3.1394"></a><span id="l3.1394" class="difflineminus">-ifneq (,$(filter export,$(MAKECMDGOALS)))</span>
<a href="#l3.1395"></a><span id="l3.1395" class="difflineminus">-MDDEPEND_FILES		:= $(strip $(wildcard $(addprefix $(MDDEPDIR)/,$(EXTRA_EXPORT_MDDEPEND_FILES))))</span>
<a href="#l3.1396"></a><span id="l3.1396" class="difflineminus">-</span>
<a href="#l3.1397"></a><span id="l3.1397" class="difflineminus">-ifneq (,$(MDDEPEND_FILES))</span>
<a href="#l3.1398"></a><span id="l3.1398" class="difflineminus">-$(call include_deps,$(MDDEPEND_FILES))</span>
<a href="#l3.1399"></a><span id="l3.1399" class="difflineminus">-endif</span>
<a href="#l3.1400"></a><span id="l3.1400" class="difflineminus">-</span>
<a href="#l3.1401"></a><span id="l3.1401" class="difflineminus">-endif</span>
<a href="#l3.1402"></a><span id="l3.1402" class="difflineminus">-</span>
<a href="#l3.1403"></a><span id="l3.1403" class="difflineminus">-#############################################################################</span>
<a href="#l3.1404"></a><span id="l3.1404" class="difflineminus">-</span>
<a href="#l3.1405"></a><span id="l3.1405" class="difflineminus">--include $(topsrcdir)/$(MOZ_BUILD_APP)/app-rules.mk</span>
<a href="#l3.1406"></a><span id="l3.1406" class="difflineminus">--include $(MY_RULES)</span>
<a href="#l3.1407"></a><span id="l3.1407" class="difflineminus">-</span>
<a href="#l3.1408"></a><span id="l3.1408" class="difflineminus">-#</span>
<a href="#l3.1409"></a><span id="l3.1409" class="difflineminus">-# Generate Emacs tags in a file named TAGS if ETAGS was set in $(MY_CONFIG)</span>
<a href="#l3.1410"></a><span id="l3.1410" class="difflineminus">-# or in $(MY_RULES)</span>
<a href="#l3.1411"></a><span id="l3.1411" class="difflineminus">-#</span>
<a href="#l3.1412"></a><span id="l3.1412" class="difflineminus">-ifdef ETAGS</span>
<a href="#l3.1413"></a><span id="l3.1413" class="difflineminus">-ifneq ($(CSRCS)$(CPPSRCS)$(HEADERS),)</span>
<a href="#l3.1414"></a><span id="l3.1414" class="difflineminus">-all:: TAGS</span>
<a href="#l3.1415"></a><span id="l3.1415" class="difflineminus">-TAGS:: $(CSRCS) $(CPPSRCS) $(HEADERS)</span>
<a href="#l3.1416"></a><span id="l3.1416" class="difflineminus">-	$(ETAGS) $(CSRCS) $(CPPSRCS) $(HEADERS)</span>
<a href="#l3.1417"></a><span id="l3.1417" class="difflineminus">-endif</span>
<a href="#l3.1418"></a><span id="l3.1418" class="difflineminus">-endif</span>
<a href="#l3.1419"></a><span id="l3.1419" class="difflineminus">-</span>
<a href="#l3.1420"></a><span id="l3.1420" class="difflineminus">-################################################################################</span>
<a href="#l3.1421"></a><span id="l3.1421" class="difflineminus">-# Install/copy rules</span>
<a href="#l3.1422"></a><span id="l3.1422" class="difflineminus">-#</span>
<a href="#l3.1423"></a><span id="l3.1423" class="difflineminus">-# The INSTALL_TARGETS variable contains a list of all install target</span>
<a href="#l3.1424"></a><span id="l3.1424" class="difflineminus">-# categories. Each category defines a list of files and executables, and an</span>
<a href="#l3.1425"></a><span id="l3.1425" class="difflineminus">-# install destination,</span>
<a href="#l3.1426"></a><span id="l3.1426" class="difflineminus">-#</span>
<a href="#l3.1427"></a><span id="l3.1427" class="difflineminus">-# FOO_FILES := foo bar</span>
<a href="#l3.1428"></a><span id="l3.1428" class="difflineminus">-# FOO_EXECUTABLES := baz</span>
<a href="#l3.1429"></a><span id="l3.1429" class="difflineminus">-# FOO_DEST := target_path</span>
<a href="#l3.1430"></a><span id="l3.1430" class="difflineminus">-# INSTALL_TARGETS += FOO</span>
<a href="#l3.1431"></a><span id="l3.1431" class="difflineminus">-#</span>
<a href="#l3.1432"></a><span id="l3.1432" class="difflineminus">-# Additionally, a FOO_TARGET variable may be added to indicate the target for</span>
<a href="#l3.1433"></a><span id="l3.1433" class="difflineminus">-# which the files and executables are installed. Default is &quot;libs&quot;.</span>
<a href="#l3.1434"></a><span id="l3.1434" class="difflineminus">-#</span>
<a href="#l3.1435"></a><span id="l3.1435" class="difflineminus">-# Finally, a FOO_KEEP_PATH variable may be set to 1 to indicate the paths given</span>
<a href="#l3.1436"></a><span id="l3.1436" class="difflineminus">-# in FOO_FILES/FOO_EXECUTABLES are to be kept at the destination. That is,</span>
<a href="#l3.1437"></a><span id="l3.1437" class="difflineminus">-# if FOO_FILES is bar/baz/qux.h, and FOO_DEST is $(DIST)/include, the installed</span>
<a href="#l3.1438"></a><span id="l3.1438" class="difflineminus">-# file would be $(DIST)/include/bar/baz/qux.h instead of $(DIST)/include/qux.h</span>
<a href="#l3.1439"></a><span id="l3.1439" class="difflineminus">-</span>
<a href="#l3.1440"></a><span id="l3.1440" class="difflineminus">-# If we're using binary nsinstall and it's not built yet, fallback to python nsinstall.</span>
<a href="#l3.1441"></a><span id="l3.1441" class="difflineminus">-ifneq (,$(filter $(DIST)/bin/nsinstall$(HOST_BIN_SUFFIX),$(install_cmd)))</span>
<a href="#l3.1442"></a><span id="l3.1442" class="difflineminus">-ifeq (,$(wildcard $(DIST)/bin/nsinstall$(HOST_BIN_SUFFIX)))</span>
<a href="#l3.1443"></a><span id="l3.1443" class="difflineminus">-nsinstall_is_usable = $(if $(wildcard $(DIST)/bin/nsinstall$(HOST_BIN_SUFFIX)),yes)</span>
<a href="#l3.1444"></a><span id="l3.1444" class="difflineminus">-</span>
<a href="#l3.1445"></a><span id="l3.1445" class="difflineminus">-define install_cmd_override</span>
<a href="#l3.1446"></a><span id="l3.1446" class="difflineminus">-$(1): install_cmd = $$(if $$(nsinstall_is_usable),$$(INSTALL),$$(NSINSTALL_PY) -t) $$(1)</span>
<a href="#l3.1447"></a><span id="l3.1447" class="difflineminus">-endef</span>
<a href="#l3.1448"></a><span id="l3.1448" class="difflineminus">-endif</span>
<a href="#l3.1449"></a><span id="l3.1449" class="difflineminus">-endif</span>
<a href="#l3.1450"></a><span id="l3.1450" class="difflineminus">-</span>
<a href="#l3.1451"></a><span id="l3.1451" class="difflineminus">-install_target_tier = $(or $($(1)_TARGET),libs)</span>
<a href="#l3.1452"></a><span id="l3.1452" class="difflineminus">-INSTALL_TARGETS_TIERS := $(sort $(foreach category,$(INSTALL_TARGETS),$(call install_target_tier,$(category))))</span>
<a href="#l3.1453"></a><span id="l3.1453" class="difflineminus">-</span>
<a href="#l3.1454"></a><span id="l3.1454" class="difflineminus">-install_target_result = $($(1)_DEST:%/=%)/$(if $($(1)_KEEP_PATH),$(2),$(notdir $(2)))</span>
<a href="#l3.1455"></a><span id="l3.1455" class="difflineminus">-install_target_files = $(foreach file,$($(1)_FILES),$(call install_target_result,$(category),$(file)))</span>
<a href="#l3.1456"></a><span id="l3.1456" class="difflineminus">-install_target_executables = $(foreach file,$($(1)_EXECUTABLES),$(call install_target_result,$(category),$(file)))</span>
<a href="#l3.1457"></a><span id="l3.1457" class="difflineminus">-</span>
<a href="#l3.1458"></a><span id="l3.1458" class="difflineminus">-# Work around a GNU make 3.81 bug where it gives $&lt; the wrong value.</span>
<a href="#l3.1459"></a><span id="l3.1459" class="difflineminus">-# See details in bug 934864.</span>
<a href="#l3.1460"></a><span id="l3.1460" class="difflineminus">-define create_dependency</span>
<a href="#l3.1461"></a><span id="l3.1461" class="difflineminus">-$(1): $(2)</span>
<a href="#l3.1462"></a><span id="l3.1462" class="difflineminus">-$(1): $(2)</span>
<a href="#l3.1463"></a><span id="l3.1463" class="difflineminus">-endef</span>
<a href="#l3.1464"></a><span id="l3.1464" class="difflineminus">-</span>
<a href="#l3.1465"></a><span id="l3.1465" class="difflineminus">-define install_target_template</span>
<a href="#l3.1466"></a><span id="l3.1466" class="difflineminus">-$(call install_cmd_override,$(2))</span>
<a href="#l3.1467"></a><span id="l3.1467" class="difflineminus">-$(call create_dependency,$(2),$(1))</span>
<a href="#l3.1468"></a><span id="l3.1468" class="difflineminus">-endef</span>
<a href="#l3.1469"></a><span id="l3.1469" class="difflineminus">-</span>
<a href="#l3.1470"></a><span id="l3.1470" class="difflineminus">-$(foreach category,$(INSTALL_TARGETS),\</span>
<a href="#l3.1471"></a><span id="l3.1471" class="difflineminus">-  $(if $($(category)_DEST),,$(error Missing $(category)_DEST)) \</span>
<a href="#l3.1472"></a><span id="l3.1472" class="difflineminus">-  $(foreach tier,$(call install_target_tier,$(category)),\</span>
<a href="#l3.1473"></a><span id="l3.1473" class="difflineminus">-    $(eval INSTALL_TARGETS_FILES_$(tier) += $(call install_target_files,$(category))) \</span>
<a href="#l3.1474"></a><span id="l3.1474" class="difflineminus">-    $(eval INSTALL_TARGETS_EXECUTABLES_$(tier) += $(call install_target_executables,$(category))) \</span>
<a href="#l3.1475"></a><span id="l3.1475" class="difflineminus">-  ) \</span>
<a href="#l3.1476"></a><span id="l3.1476" class="difflineminus">-  $(foreach file,$($(category)_FILES) $($(category)_EXECUTABLES), \</span>
<a href="#l3.1477"></a><span id="l3.1477" class="difflineminus">-    $(eval $(call install_target_template,$(file),$(call install_target_result,$(category),$(file)))) \</span>
<a href="#l3.1478"></a><span id="l3.1478" class="difflineminus">-  ) \</span>
<a href="#l3.1479"></a><span id="l3.1479" class="difflineminus">-)</span>
<a href="#l3.1480"></a><span id="l3.1480" class="difflineminus">-</span>
<a href="#l3.1481"></a><span id="l3.1481" class="difflineminus">-$(foreach tier,$(INSTALL_TARGETS_TIERS), \</span>
<a href="#l3.1482"></a><span id="l3.1482" class="difflineminus">-  $(eval $(tier):: $(INSTALL_TARGETS_FILES_$(tier)) $(INSTALL_TARGETS_EXECUTABLES_$(tier))) \</span>
<a href="#l3.1483"></a><span id="l3.1483" class="difflineminus">-)</span>
<a href="#l3.1484"></a><span id="l3.1484" class="difflineminus">-</span>
<a href="#l3.1485"></a><span id="l3.1485" class="difflineminus">-install_targets_sanity = $(if $(filter-out $(notdir $@),$(notdir $(&lt;))),$(error Looks like $@ has an unexpected dependency on $&lt; which breaks INSTALL_TARGETS))</span>
<a href="#l3.1486"></a><span id="l3.1486" class="difflineminus">-</span>
<a href="#l3.1487"></a><span id="l3.1487" class="difflineminus">-$(sort $(foreach tier,$(INSTALL_TARGETS_TIERS),$(INSTALL_TARGETS_FILES_$(tier)))):</span>
<a href="#l3.1488"></a><span id="l3.1488" class="difflineminus">-	$(install_targets_sanity)</span>
<a href="#l3.1489"></a><span id="l3.1489" class="difflineminus">-	$(call install_cmd,$(IFLAGS1) '$&lt;' '$(@D)')</span>
<a href="#l3.1490"></a><span id="l3.1490" class="difflineminus">-</span>
<a href="#l3.1491"></a><span id="l3.1491" class="difflineminus">-$(sort $(foreach tier,$(INSTALL_TARGETS_TIERS),$(INSTALL_TARGETS_EXECUTABLES_$(tier)))):</span>
<a href="#l3.1492"></a><span id="l3.1492" class="difflineminus">-	$(install_targets_sanity)</span>
<a href="#l3.1493"></a><span id="l3.1493" class="difflineminus">-	$(call install_cmd,$(IFLAGS2) '$&lt;' '$(@D)')</span>
<a href="#l3.1494"></a><span id="l3.1494" class="difflineminus">-</span>
<a href="#l3.1495"></a><span id="l3.1495" class="difflineminus">-################################################################################</span>
<a href="#l3.1496"></a><span id="l3.1496" class="difflineminus">-# Preprocessing rules</span>
<a href="#l3.1497"></a><span id="l3.1497" class="difflineminus">-#</span>
<a href="#l3.1498"></a><span id="l3.1498" class="difflineminus">-# The PP_TARGETS variable contains a list of all preprocessing target</span>
<a href="#l3.1499"></a><span id="l3.1499" class="difflineminus">-# categories. Each category has associated variables listing input files, the</span>
<a href="#l3.1500"></a><span id="l3.1500" class="difflineminus">-# output directory, extra preprocessor flags, and so on. For example:</span>
<a href="#l3.1501"></a><span id="l3.1501" class="difflineminus">-#</span>
<a href="#l3.1502"></a><span id="l3.1502" class="difflineminus">-#   FOO := input-file</span>
<a href="#l3.1503"></a><span id="l3.1503" class="difflineminus">-#   FOO_PATH := target-directory</span>
<a href="#l3.1504"></a><span id="l3.1504" class="difflineminus">-#   FOO_FLAGS := -Dsome_flag</span>
<a href="#l3.1505"></a><span id="l3.1505" class="difflineminus">-#   PP_TARGETS += FOO</span>
<a href="#l3.1506"></a><span id="l3.1506" class="difflineminus">-#</span>
<a href="#l3.1507"></a><span id="l3.1507" class="difflineminus">-# If PP_TARGETS lists a category name &lt;C&gt; (like FOO, above), then we consult the</span>
<a href="#l3.1508"></a><span id="l3.1508" class="difflineminus">-# following make variables to see what to do:</span>
<a href="#l3.1509"></a><span id="l3.1509" class="difflineminus">-#</span>
<a href="#l3.1510"></a><span id="l3.1510" class="difflineminus">-# - &lt;C&gt; lists input files to be preprocessed with mozbuild.action.preprocessor.</span>
<a href="#l3.1511"></a><span id="l3.1511" class="difflineminus">-#   We search VPATH for the names given here. If an input file name ends in</span>
<a href="#l3.1512"></a><span id="l3.1512" class="difflineminus">-#   '.in', that suffix is omitted from the output file name.</span>
<a href="#l3.1513"></a><span id="l3.1513" class="difflineminus">-#</span>
<a href="#l3.1514"></a><span id="l3.1514" class="difflineminus">-# - &lt;C&gt;_PATH names the directory in which to place the preprocessed output</span>
<a href="#l3.1515"></a><span id="l3.1515" class="difflineminus">-#   files. We create this directory if it does not already exist. Setting</span>
<a href="#l3.1516"></a><span id="l3.1516" class="difflineminus">-#   this variable is optional; if unset, we install the files in $(CURDIR).</span>
<a href="#l3.1517"></a><span id="l3.1517" class="difflineminus">-#</span>
<a href="#l3.1518"></a><span id="l3.1518" class="difflineminus">-# - &lt;C&gt;_FLAGS lists flags to pass to mozbuild.action.preprocessor, in addition</span>
<a href="#l3.1519"></a><span id="l3.1519" class="difflineminus">-#   to the usual bunch. Setting this variable is optional.</span>
<a href="#l3.1520"></a><span id="l3.1520" class="difflineminus">-#</span>
<a href="#l3.1521"></a><span id="l3.1521" class="difflineminus">-# - &lt;C&gt;_TARGET names the 'make' target that should depend on creating the output</span>
<a href="#l3.1522"></a><span id="l3.1522" class="difflineminus">-#   files. Setting this variable is optional; if unset, we preprocess the</span>
<a href="#l3.1523"></a><span id="l3.1523" class="difflineminus">-#   files for the 'libs' target.</span>
<a href="#l3.1524"></a><span id="l3.1524" class="difflineminus">-#</span>
<a href="#l3.1525"></a><span id="l3.1525" class="difflineminus">-# - &lt;C&gt;_KEEP_PATH may be set to 1 to indicate the paths given in &lt;C&gt; are to be</span>
<a href="#l3.1526"></a><span id="l3.1526" class="difflineminus">-#   kept under &lt;C&gt;_PATH. That is, if &lt;C&gt; is bar/baz/qux.h.in and &lt;C&gt;_PATH is</span>
<a href="#l3.1527"></a><span id="l3.1527" class="difflineminus">-#   $(DIST)/include, the preprocessed file would be $(DIST)/include/bar/baz/qux.h</span>
<a href="#l3.1528"></a><span id="l3.1528" class="difflineminus">-#   instead of $(DIST)/include/qux.h.</span>
<a href="#l3.1529"></a><span id="l3.1529" class="difflineminus">-</span>
<a href="#l3.1530"></a><span id="l3.1530" class="difflineminus">-pp_target_tier = $(or $($(1)_TARGET),libs)</span>
<a href="#l3.1531"></a><span id="l3.1531" class="difflineminus">-PP_TARGETS_TIERS := $(sort $(foreach category,$(PP_TARGETS),$(call pp_target_tier,$(category))))</span>
<a href="#l3.1532"></a><span id="l3.1532" class="difflineminus">-</span>
<a href="#l3.1533"></a><span id="l3.1533" class="difflineminus">-pp_target_result = $(or $($(1)_PATH:%/=%),$(CURDIR))/$(if $($(1)_KEEP_PATH),$(2:.in=),$(notdir $(2:.in=)))</span>
<a href="#l3.1534"></a><span id="l3.1534" class="difflineminus">-pp_target_results = $(foreach file,$($(1)),$(call pp_target_result,$(category),$(file)))</span>
<a href="#l3.1535"></a><span id="l3.1535" class="difflineminus">-</span>
<a href="#l3.1536"></a><span id="l3.1536" class="difflineminus">-$(foreach category,$(PP_TARGETS), \</span>
<a href="#l3.1537"></a><span id="l3.1537" class="difflineminus">-  $(foreach tier,$(call pp_target_tier,$(category)), \</span>
<a href="#l3.1538"></a><span id="l3.1538" class="difflineminus">-    $(eval PP_TARGETS_RESULTS_$(tier) += $(call pp_target_results,$(category))) \</span>
<a href="#l3.1539"></a><span id="l3.1539" class="difflineminus">-  ) \</span>
<a href="#l3.1540"></a><span id="l3.1540" class="difflineminus">-  $(foreach file,$($(category)), \</span>
<a href="#l3.1541"></a><span id="l3.1541" class="difflineminus">-    $(eval $(call create_dependency,$(call pp_target_result,$(category),$(file)), \</span>
<a href="#l3.1542"></a><span id="l3.1542" class="difflineminus">-                                    $(file) $(GLOBAL_DEPS))) \</span>
<a href="#l3.1543"></a><span id="l3.1543" class="difflineminus">-  ) \</span>
<a href="#l3.1544"></a><span id="l3.1544" class="difflineminus">-  $(eval $(call pp_target_results,$(category)): PP_TARGET_FLAGS=$($(category)_FLAGS)) \</span>
<a href="#l3.1545"></a><span id="l3.1545" class="difflineminus">-)</span>
<a href="#l3.1546"></a><span id="l3.1546" class="difflineminus">-</span>
<a href="#l3.1547"></a><span id="l3.1547" class="difflineminus">-$(foreach tier,$(PP_TARGETS_TIERS), \</span>
<a href="#l3.1548"></a><span id="l3.1548" class="difflineminus">-  $(eval $(tier):: $(PP_TARGETS_RESULTS_$(tier))) \</span>
<a href="#l3.1549"></a><span id="l3.1549" class="difflineminus">-)</span>
<a href="#l3.1550"></a><span id="l3.1550" class="difflineminus">-</span>
<a href="#l3.1551"></a><span id="l3.1551" class="difflineminus">-PP_TARGETS_ALL_RESULTS := $(sort $(foreach tier,$(PP_TARGETS_TIERS),$(PP_TARGETS_RESULTS_$(tier))))</span>
<a href="#l3.1552"></a><span id="l3.1552" class="difflineminus">-$(PP_TARGETS_ALL_RESULTS):</span>
<a href="#l3.1553"></a><span id="l3.1553" class="difflineminus">-	$(if $(filter-out $(notdir $@),$(notdir $(&lt;:.in=))),$(error Looks like $@ has an unexpected dependency on $&lt; which breaks PP_TARGETS))</span>
<a href="#l3.1554"></a><span id="l3.1554" class="difflineminus">-	$(RM) '$@'</span>
<a href="#l3.1555"></a><span id="l3.1555" class="difflineminus">-	$(call py_action,preprocessor,--depend $(MDDEPDIR)/$(@F).pp $(PP_TARGET_FLAGS) $(DEFINES) $(ACDEFINES) $(XULPPFLAGS) '$&lt;' -o '$@')</span>
<a href="#l3.1556"></a><span id="l3.1556" class="difflineminus">-</span>
<a href="#l3.1557"></a><span id="l3.1557" class="difflineminus">-# The depfile is based on the filename, and we don't want conflicts. So check</span>
<a href="#l3.1558"></a><span id="l3.1558" class="difflineminus">-# there's only one occurrence of any given filename in PP_TARGETS_ALL_RESULTS.</span>
<a href="#l3.1559"></a><span id="l3.1559" class="difflineminus">-PP_TARGETS_ALL_RESULT_NAMES := $(notdir $(PP_TARGETS_ALL_RESULTS))</span>
<a href="#l3.1560"></a><span id="l3.1560" class="difflineminus">-$(foreach file,$(sort $(PP_TARGETS_ALL_RESULT_NAMES)), \</span>
<a href="#l3.1561"></a><span id="l3.1561" class="difflineminus">-  $(if $(filter-out 1,$(words $(filter $(file),$(PP_TARGETS_ALL_RESULT_NAMES)))), \</span>
<a href="#l3.1562"></a><span id="l3.1562" class="difflineminus">-    $(error Multiple preprocessing rules are creating a $(file) file) \</span>
<a href="#l3.1563"></a><span id="l3.1563" class="difflineminus">-  ) \</span>
<a href="#l3.1564"></a><span id="l3.1564" class="difflineminus">-)</span>
<a href="#l3.1565"></a><span id="l3.1565" class="difflineminus">-</span>
<a href="#l3.1566"></a><span id="l3.1566" class="difflineminus">-ifneq (,$(filter $(PP_TARGETS_TIERS) $(PP_TARGETS_ALL_RESULTS),$(MAKECMDGOALS)))</span>
<a href="#l3.1567"></a><span id="l3.1567" class="difflineminus">-# If the depfile for a preprocessed file doesn't exist, add a dep to force</span>
<a href="#l3.1568"></a><span id="l3.1568" class="difflineminus">-# re-preprocessing.</span>
<a href="#l3.1569"></a><span id="l3.1569" class="difflineminus">-$(foreach file,$(PP_TARGETS_ALL_RESULTS), \</span>
<a href="#l3.1570"></a><span id="l3.1570" class="difflineminus">-  $(if $(wildcard $(MDDEPDIR)/$(notdir $(file)).pp), \</span>
<a href="#l3.1571"></a><span id="l3.1571" class="difflineminus">-    , \</span>
<a href="#l3.1572"></a><span id="l3.1572" class="difflineminus">-    $(eval $(file): FORCE) \</span>
<a href="#l3.1573"></a><span id="l3.1573" class="difflineminus">-  ) \</span>
<a href="#l3.1574"></a><span id="l3.1574" class="difflineminus">-)</span>
<a href="#l3.1575"></a><span id="l3.1575" class="difflineminus">-</span>
<a href="#l3.1576"></a><span id="l3.1576" class="difflineminus">-MDDEPEND_FILES := $(strip $(wildcard $(addprefix $(MDDEPDIR)/,$(addsuffix .pp,$(notdir $(PP_TARGETS_ALL_RESULTS))))))</span>
<a href="#l3.1577"></a><span id="l3.1577" class="difflineminus">-</span>
<a href="#l3.1578"></a><span id="l3.1578" class="difflineminus">-ifneq (,$(MDDEPEND_FILES))</span>
<a href="#l3.1579"></a><span id="l3.1579" class="difflineminus">-$(call include_deps,$(MDDEPEND_FILES))</span>
<a href="#l3.1580"></a><span id="l3.1580" class="difflineminus">-endif</span>
<a href="#l3.1581"></a><span id="l3.1581" class="difflineminus">-</span>
<a href="#l3.1582"></a><span id="l3.1582" class="difflineminus">-endif</span>
<a href="#l3.1583"></a><span id="l3.1583" class="difflineminus">-</span>
<a href="#l3.1584"></a><span id="l3.1584" class="difflineminus">-# Pull in non-recursive targets if this is a partial tree build.</span>
<a href="#l3.1585"></a><span id="l3.1585" class="difflineminus">-ifndef TOPLEVEL_BUILD</span>
<a href="#l3.1586"></a><span id="l3.1586" class="difflineminus">-include $(MOZILLA_SRCDIR)/config/makefiles/nonrecursive.mk</span>
<a href="#l3.1587"></a><span id="l3.1587" class="difflineminus">-endif</span>
<a href="#l3.1588"></a><span id="l3.1588" class="difflineminus">-</span>
<a href="#l3.1589"></a><span id="l3.1589" class="difflineminus">-################################################################################</span>
<a href="#l3.1590"></a><span id="l3.1590" class="difflineminus">-# Special gmake rules.</span>
<a href="#l3.1591"></a><span id="l3.1591" class="difflineminus">-################################################################################</span>
<a href="#l3.1592"></a><span id="l3.1592" class="difflineminus">-</span>
<a href="#l3.1593"></a><span id="l3.1593" class="difflineminus">-</span>
<a href="#l3.1594"></a><span id="l3.1594" class="difflineminus">-#</span>
<a href="#l3.1595"></a><span id="l3.1595" class="difflineminus">-# Re-define the list of default suffixes, so gmake won't have to churn through</span>
<a href="#l3.1596"></a><span id="l3.1596" class="difflineminus">-# hundreds of built-in suffix rules for stuff we don't need.</span>
<a href="#l3.1597"></a><span id="l3.1597" class="difflineminus">-#</span>
<a href="#l3.1598"></a><span id="l3.1598" class="difflineminus">-.SUFFIXES:</span>
<a href="#l3.1599"></a><span id="l3.1599" class="difflineminus">-</span>
<a href="#l3.1600"></a><span id="l3.1600" class="difflineminus">-#</span>
<a href="#l3.1601"></a><span id="l3.1601" class="difflineminus">-# Fake targets.  Always run these rules, even if a file/directory with that</span>
<a href="#l3.1602"></a><span id="l3.1602" class="difflineminus">-# name already exists.</span>
<a href="#l3.1603"></a><span id="l3.1603" class="difflineminus">-#</span>
<a href="#l3.1604"></a><span id="l3.1604" class="difflineminus">-.PHONY: all alltags boot checkout chrome realchrome clean clobber clobber_all export install libs makefiles realclean run_apprunner tools $(DIRS) FORCE</span>
<a href="#l3.1605"></a><span id="l3.1605" class="difflineminus">-</span>
<a href="#l3.1606"></a><span id="l3.1606" class="difflineminus">-# Used as a dependency to force targets to rebuild</span>
<a href="#l3.1607"></a><span id="l3.1607" class="difflineminus">-FORCE:</span>
<a href="#l3.1608"></a><span id="l3.1608" class="difflineminus">-</span>
<a href="#l3.1609"></a><span id="l3.1609" class="difflineminus">-# Delete target if error occurs when building target</span>
<a href="#l3.1610"></a><span id="l3.1610" class="difflineminus">-.DELETE_ON_ERROR:</span>
<a href="#l3.1611"></a><span id="l3.1611" class="difflineminus">-</span>
<a href="#l3.1612"></a><span id="l3.1612" class="difflineminus">-tags: TAGS</span>
<a href="#l3.1613"></a><span id="l3.1613" class="difflineminus">-</span>
<a href="#l3.1614"></a><span id="l3.1614" class="difflineminus">-TAGS: $(CSRCS) $(CPPSRCS) $(wildcard *.h)</span>
<a href="#l3.1615"></a><span id="l3.1615" class="difflineminus">-	-etags $(CSRCS) $(CPPSRCS) $(wildcard *.h)</span>
<a href="#l3.1616"></a><span id="l3.1616" class="difflineminus">-	$(LOOP_OVER_DIRS)</span>
<a href="#l3.1617"></a><span id="l3.1617" class="difflineminus">-</span>
<a href="#l3.1618"></a><span id="l3.1618" class="difflineminus">-ifndef INCLUDED_DEBUGMAKE_MK #{</span>
<a href="#l3.1619"></a><span id="l3.1619" class="difflineminus">-  ## Only parse when an echo* or show* target is requested</span>
<a href="#l3.1620"></a><span id="l3.1620" class="difflineminus">-  ifneq (,$(call isTargetStem,echo,show))</span>
<a href="#l3.1621"></a><span id="l3.1621" class="difflineminus">-    include $(MOZILLA_SRCDIR)/config/makefiles/debugmake.mk</span>
<a href="#l3.1622"></a><span id="l3.1622" class="difflineminus">-  endif #}</span>
<a href="#l3.1623"></a><span id="l3.1623" class="difflineminus">-endif #}</span>
<a href="#l3.1624"></a><span id="l3.1624" class="difflineminus">-</span>
<a href="#l3.1625"></a><span id="l3.1625" class="difflineminus">-documentation:</span>
<a href="#l3.1626"></a><span id="l3.1626" class="difflineminus">-	@cd $(DEPTH)</span>
<a href="#l3.1627"></a><span id="l3.1627" class="difflineminus">-	$(DOXYGEN) $(DEPTH)/config/doxygen.cfg</span>
<a href="#l3.1628"></a><span id="l3.1628" class="difflineminus">-</span>
<a href="#l3.1629"></a><span id="l3.1629" class="difflineminus">-ifdef ENABLE_TESTS</span>
<a href="#l3.1630"></a><span id="l3.1630" class="difflineminus">-check::</span>
<a href="#l3.1631"></a><span id="l3.1631" class="difflineminus">-	$(LOOP_OVER_DIRS)</span>
<a href="#l3.1632"></a><span id="l3.1632" class="difflineminus">-endif</span>
<a href="#l3.1633"></a><span id="l3.1633" class="difflineminus">-</span>
<a href="#l3.1634"></a><span id="l3.1634" class="difflineminus">-</span>
<a href="#l3.1635"></a><span id="l3.1635" class="difflineminus">-FREEZE_VARIABLES = \</span>
<a href="#l3.1636"></a><span id="l3.1636" class="difflineminus">-  CSRCS \</span>
<a href="#l3.1637"></a><span id="l3.1637" class="difflineminus">-  CPPSRCS \</span>
<a href="#l3.1638"></a><span id="l3.1638" class="difflineminus">-  EXPORTS \</span>
<a href="#l3.1639"></a><span id="l3.1639" class="difflineminus">-  DIRS \</span>
<a href="#l3.1640"></a><span id="l3.1640" class="difflineminus">-  LIBRARY \</span>
<a href="#l3.1641"></a><span id="l3.1641" class="difflineminus">-  MODULE \</span>
<a href="#l3.1642"></a><span id="l3.1642" class="difflineminus">-  SHORT_LIBNAME \</span>
<a href="#l3.1643"></a><span id="l3.1643" class="difflineminus">-  TIERS \</span>
<a href="#l3.1644"></a><span id="l3.1644" class="difflineminus">-  EXTRA_COMPONENTS \</span>
<a href="#l3.1645"></a><span id="l3.1645" class="difflineminus">-  EXTRA_PP_COMPONENTS \</span>
<a href="#l3.1646"></a><span id="l3.1646" class="difflineminus">-  $(NULL)</span>
<a href="#l3.1647"></a><span id="l3.1647" class="difflineminus">-</span>
<a href="#l3.1648"></a><span id="l3.1648" class="difflineminus">-$(foreach var,$(FREEZE_VARIABLES),$(eval $(var)_FROZEN := '$($(var))'))</span>
<a href="#l3.1649"></a><span id="l3.1649" class="difflineminus">-</span>
<a href="#l3.1650"></a><span id="l3.1650" class="difflineminus">-CHECK_FROZEN_VARIABLES = $(foreach var,$(FREEZE_VARIABLES), \</span>
<a href="#l3.1651"></a><span id="l3.1651" class="difflineminus">-  $(if $(subst $($(var)_FROZEN),,'$($(var))'),$(error Makefile variable '$(var)' changed value after including rules.mk. Was $($(var)_FROZEN), now $($(var)).)))</span>
<a href="#l3.1652"></a><span id="l3.1652" class="difflineminus">-</span>
<a href="#l3.1653"></a><span id="l3.1653" class="difflineminus">-libs export::</span>
<a href="#l3.1654"></a><span id="l3.1654" class="difflineminus">-	$(CHECK_FROZEN_VARIABLES)</span>
<a href="#l3.1655"></a><span id="l3.1655" class="difflineminus">-</span>
<a href="#l3.1656"></a><span id="l3.1656" class="difflineminus">-PURGECACHES_DIRS ?= $(DIST)/bin</span>
<a href="#l3.1657"></a><span id="l3.1657" class="difflineminus">-ifdef MOZ_WEBAPP_RUNTIME</span>
<a href="#l3.1658"></a><span id="l3.1658" class="difflineminus">-PURGECACHES_DIRS += $(DIST)/bin/webapprt</span>
<a href="#l3.1659"></a><span id="l3.1659" class="difflineminus">-endif</span>
<a href="#l3.1660"></a><span id="l3.1660" class="difflineminus">-</span>
<a href="#l3.1661"></a><span id="l3.1661" class="difflineminus">-PURGECACHES_FILES = $(addsuffix /.purgecaches,$(PURGECACHES_DIRS))</span>
<a href="#l3.1662"></a><span id="l3.1662" class="difflineminus">-</span>
<a href="#l3.1663"></a><span id="l3.1663" class="difflineminus">-default all:: $(PURGECACHES_FILES)</span>
<a href="#l3.1664"></a><span id="l3.1664" class="difflineminus">-</span>
<a href="#l3.1665"></a><span id="l3.1665" class="difflineminus">-$(PURGECACHES_FILES):</span>
<a href="#l3.1666"></a><span id="l3.1666" class="difflineminus">-	if test -d $(@D) ; then touch $@ ; fi</span>
<a href="#l3.1667"></a><span id="l3.1667" class="difflineminus">-</span>
<a href="#l3.1668"></a><span id="l3.1668" class="difflineminus">-.DEFAULT_GOAL := $(or $(OVERRIDE_DEFAULT_GOAL),default)</span>
<a href="#l3.1669"></a><span id="l3.1669" class="difflineminus">-</span>
<a href="#l3.1670"></a><span id="l3.1670" class="difflineminus">-#############################################################################</span>
<a href="#l3.1671"></a><span id="l3.1671" class="difflineminus">-# Derived targets and dependencies</span>
<a href="#l3.1672"></a><span id="l3.1672" class="difflineminus">-</span>
<a href="#l3.1673"></a><span id="l3.1673" class="difflineminus">-include $(topsrcdir)/config/makefiles/autotargets.mk</span>
<a href="#l3.1674"></a><span id="l3.1674" class="difflineminus">-ifneq ($(NULL),$(AUTO_DEPS))</span>
<a href="#l3.1675"></a><span id="l3.1675" class="difflineminus">-  default all libs tools export:: $(AUTO_DEPS)</span>
<a href="#l3.1676"></a><span id="l3.1676" class="difflineminus">-endif</span>
<a href="#l3.1677"></a><span id="l3.1677" class="difflineminus">-</span>
<a href="#l3.1678"></a><span id="l3.1678" class="difflineminus">-export:: $(GENERATED_FILES)</span>
<a href="#l3.1679"></a><span id="l3.1679" class="difflineminus">-</span>
<a href="#l3.1680"></a><span id="l3.1680" class="difflineminus">-GARBAGE += $(GENERATED_FILES)</span>
<a href="#l3.1681"></a><span id="l3.1681" class="difflineminus">-</span>
<a href="#l3.1682"></a><span id="l3.1682" class="difflineminus">-# We may have modified &quot;frozen&quot; variables in rules.mk (we do that), but we don't</span>
<a href="#l3.1683"></a><span id="l3.1683" class="difflineminus">-# want Makefile.in doing that, so collect the possibly modified variables here,</span>
<a href="#l3.1684"></a><span id="l3.1684" class="difflineminus">-# and check them again in recurse.mk, which is always included after Makefile.in</span>
<a href="#l3.1685"></a><span id="l3.1685" class="difflineminus">-# contents.</span>
<a href="#l3.1686"></a><span id="l3.1686" class="difflineminus">-$(foreach var,$(_MOZBUILD_EXTERNAL_VARIABLES),$(eval $(var)_FROZEN := '$($(var))'))</span>
<a href="#l3.1687"></a><span id="l3.1687" class="difflineminus">-$(foreach var,$(_DEPRECATED_VARIABLES),$(eval $(var)_FROZEN := '$($(var))'))</span>
<a href="#l3.1688"></a><span id="l3.1688" class="difflineplus">+# Use mozilla-central's copy of rules.mk.</span>
<a href="#l3.1689"></a><span id="l3.1689" class="difflineplus">+include $(topsrcdir)/mozilla/config/rules.mk</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

