<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 11012:efe3697a56488e464a7e941c157e7afe9a0331e0</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ efe3697a56488e464a7e941c157e7afe9a0331e0" />
<meta property="og:url" content="/comm-central/rev/efe3697a56488e464a7e941c157e7afe9a0331e0" />
<meta property="og:description" content="Bug 764266 - Remove WINCE support from comm-central. r=standard8" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / efe3697a56488e464a7e941c157e7afe9a0331e0 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/efe3697a56488e464a7e941c157e7afe9a0331e0">shortlog</a> |
<a href="/comm-central/log/efe3697a56488e464a7e941c157e7afe9a0331e0">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/efe3697a56488e464a7e941c157e7afe9a0331e0">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/efe3697a56488e464a7e941c157e7afe9a0331e0">files</a> |
changeset |
<a href="/comm-central/raw-rev/efe3697a56488e464a7e941c157e7afe9a0331e0">raw</a>  | <a href="/comm-central/archive/efe3697a56488e464a7e941c157e7afe9a0331e0.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=764266">Bug 764266</a> - Remove WINCE support from comm-central. r=standard8
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#77;&#97;&#107;&#111;&#116;&#111;&#32;&#75;&#97;&#116;&#111;&#32;&#60;&#109;&#95;&#107;&#97;&#116;&#111;&#64;&#103;&#97;&#50;&#46;&#115;&#111;&#45;&#110;&#101;&#116;&#46;&#110;&#101;&#46;&#106;&#112;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 03 Sep 2012 10:19:59 +0900</td></tr>

<tr>
 <td>changeset 11012</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/efe3697a56488e464a7e941c157e7afe9a0331e0">efe3697a56488e464a7e941c157e7afe9a0331e0</a></td>
</tr>



<tr>
<td>parent 11011</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/1915fa3c4e7369124bc161a871a0b9f2ea867b43">1915fa3c4e7369124bc161a871a0b9f2ea867b43</a>
</td>
</tr>

<tr>
<td>child 11013</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/2d62b93d17cf91bb72b79f5e58b1f2b818f38108">2d62b93d17cf91bb72b79f5e58b1f2b818f38108</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=efe3697a56488e464a7e941c157e7afe9a0331e0">8260</a></td></tr>
<tr><td>push user</td><td>m_kato@ga2.so-net.ne.jp</td></tr>
<tr><td>push date</td><td class="date age">Mon, 03 Sep 2012 01:21:51 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@efe3697a5648 [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=efe3697a56488e464a7e941c157e7afe9a0331e0">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=efe3697a56488e464a7e941c157e7afe9a0331e0&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=efe3697a56488e464a7e941c157e7afe9a0331e0&newProject=comm-central&newRevision=efe3697a56488e464a7e941c157e7afe9a0331e0&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=efe3697a56488e464a7e941c157e7afe9a0331e0&newProject=comm-central&newRevision=efe3697a56488e464a7e941c157e7afe9a0331e0&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=efe3697a56488e464a7e941c157e7afe9a0331e0&newProject=comm-central&newRevision=efe3697a56488e464a7e941c157e7afe9a0331e0&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28standard8%29&revcount=50">standard8</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=764266">764266</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=764266">Bug 764266</a> - Remove WINCE support from comm-central. r=standard8</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/efe3697a56488e464a7e941c157e7afe9a0331e0/config/config.mk">config/config.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/efe3697a56488e464a7e941c157e7afe9a0331e0/config/config.mk">file</a> |
<a href="/comm-central/annotate/efe3697a56488e464a7e941c157e7afe9a0331e0/config/config.mk">annotate</a> |
<a href="/comm-central/diff/efe3697a56488e464a7e941c157e7afe9a0331e0/config/config.mk">diff</a> |
<a href="/comm-central/comparison/efe3697a56488e464a7e941c157e7afe9a0331e0/config/config.mk">comparison</a> |
<a href="/comm-central/log/efe3697a56488e464a7e941c157e7afe9a0331e0/config/config.mk">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/efe3697a56488e464a7e941c157e7afe9a0331e0/config/rules.mk">config/rules.mk</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/efe3697a56488e464a7e941c157e7afe9a0331e0/config/rules.mk">file</a> |
<a href="/comm-central/annotate/efe3697a56488e464a7e941c157e7afe9a0331e0/config/rules.mk">annotate</a> |
<a href="/comm-central/diff/efe3697a56488e464a7e941c157e7afe9a0331e0/config/rules.mk">diff</a> |
<a href="/comm-central/comparison/efe3697a56488e464a7e941c157e7afe9a0331e0/config/rules.mk">comparison</a> |
<a href="/comm-central/log/efe3697a56488e464a7e941c157e7afe9a0331e0/config/rules.mk">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/efe3697a56488e464a7e941c157e7afe9a0331e0/configure.in">configure.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/efe3697a56488e464a7e941c157e7afe9a0331e0/configure.in">file</a> |
<a href="/comm-central/annotate/efe3697a56488e464a7e941c157e7afe9a0331e0/configure.in">annotate</a> |
<a href="/comm-central/diff/efe3697a56488e464a7e941c157e7afe9a0331e0/configure.in">diff</a> |
<a href="/comm-central/comparison/efe3697a56488e464a7e941c157e7afe9a0331e0/configure.in">comparison</a> |
<a href="/comm-central/log/efe3697a56488e464a7e941c157e7afe9a0331e0/configure.in">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/config/config.mk</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/config/config.mk</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -437,23 +437,21 @@ endif</span>
<a href="#l1.4"></a><span id="l1.4"> #</span>
<a href="#l1.5"></a><span id="l1.5"> # Override defaults</span>
<a href="#l1.6"></a><span id="l1.6"> </span>
<a href="#l1.7"></a><span id="l1.7"> # We need to know where to find the libraries we</span>
<a href="#l1.8"></a><span id="l1.8"> # put on the link line for binaries, and should</span>
<a href="#l1.9"></a><span id="l1.9"> # we link statically or dynamic?  Assuming dynamic for now.</span>
<a href="#l1.10"></a><span id="l1.10"> </span>
<a href="#l1.11"></a><span id="l1.11"> ifneq (WINNT_,$(OS_ARCH)_$(GNU_CC))</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-ifneq (,$(filter-out WINCE,$(OS_ARCH)))</span>
<a href="#l1.13"></a><span id="l1.13"> LIBS_DIR	= -L$(DIST)/bin -L$(DIST)/lib</span>
<a href="#l1.14"></a><span id="l1.14"> ifdef LIBXUL_SDK</span>
<a href="#l1.15"></a><span id="l1.15"> LIBS_DIR	+= -L$(LIBXUL_SDK)/bin -L$(LIBXUL_SDK)/lib</span>
<a href="#l1.16"></a><span id="l1.16"> endif</span>
<a href="#l1.17"></a><span id="l1.17"> endif</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineminus">-endif</span>
<a href="#l1.19"></a><span id="l1.19"> </span>
<a href="#l1.20"></a><span id="l1.20"> # Default location of include files</span>
<a href="#l1.21"></a><span id="l1.21"> IDL_DIR		= $(DIST)/idl</span>
<a href="#l1.22"></a><span id="l1.22"> </span>
<a href="#l1.23"></a><span id="l1.23"> XPIDL_FLAGS = -I$(srcdir) -I$(IDL_DIR)</span>
<a href="#l1.24"></a><span id="l1.24"> ifdef LIBXUL_SDK</span>
<a href="#l1.25"></a><span id="l1.25"> XPIDL_FLAGS += -I$(LIBXUL_SDK)/idl</span>
<a href="#l1.26"></a><span id="l1.26"> endif</span>
<a href="#l1.27"></a><span id="l1.27" class="difflineat">@@ -515,20 +513,20 @@ ifeq (2,$(MOZ_OPTIMIZE))</span>
<a href="#l1.28"></a><span id="l1.28"> PBBUILD_SETTINGS += GCC_MODEL_TUNING= OPTIMIZATION_CFLAGS=&quot;$(MOZ_OPTIMIZE_FLAGS)&quot;</span>
<a href="#l1.29"></a><span id="l1.29"> endif # MOZ_OPTIMIZE=2</span>
<a href="#l1.30"></a><span id="l1.30"> endif # MOZ_OPTIMIZE</span>
<a href="#l1.31"></a><span id="l1.31"> endif # OS_ARCH=Darwin</span>
<a href="#l1.32"></a><span id="l1.32"> </span>
<a href="#l1.33"></a><span id="l1.33"> </span>
<a href="#l1.34"></a><span id="l1.34"> ifdef MOZ_NATIVE_MAKEDEPEND</span>
<a href="#l1.35"></a><span id="l1.35"> MKDEPEND_DIR	=</span>
<a href="#l1.36"></a><span id="l1.36" class="difflineminus">-MKDEPEND	= $(CYGWIN_WRAPPER) $(MOZ_NATIVE_MAKEDEPEND)</span>
<a href="#l1.37"></a><span id="l1.37" class="difflineplus">+MKDEPEND	= $(MOZ_NATIVE_MAKEDEPEND)</span>
<a href="#l1.38"></a><span id="l1.38"> else</span>
<a href="#l1.39"></a><span id="l1.39"> MKDEPEND_DIR	= $(CONFIG_TOOLS)/mkdepend</span>
<a href="#l1.40"></a><span id="l1.40" class="difflineminus">-MKDEPEND	= $(CYGWIN_WRAPPER) $(MKDEPEND_DIR)/mkdepend$(BIN_SUFFIX)</span>
<a href="#l1.41"></a><span id="l1.41" class="difflineplus">+MKDEPEND	= $(MKDEPEND_DIR)/mkdepend$(BIN_SUFFIX)</span>
<a href="#l1.42"></a><span id="l1.42"> endif</span>
<a href="#l1.43"></a><span id="l1.43"> </span>
<a href="#l1.44"></a><span id="l1.44"> # Set link flags according to whether we want a console.</span>
<a href="#l1.45"></a><span id="l1.45"> ifdef MOZ_WINCONSOLE</span>
<a href="#l1.46"></a><span id="l1.46"> ifeq ($(MOZ_WINCONSOLE),1)</span>
<a href="#l1.47"></a><span id="l1.47"> ifeq ($(OS_ARCH),OS2)</span>
<a href="#l1.48"></a><span id="l1.48"> BIN_FLAGS	+= -Zlinker -PM:VIO</span>
<a href="#l1.49"></a><span id="l1.49"> endif</span>
<a href="#l1.50"></a><span id="l1.50" class="difflineat">@@ -629,22 +627,16 @@ install_cmd ?= $(INSTALL) $(1)</span>
<a href="#l1.51"></a><span id="l1.51"> SYSINSTALL  = $(NSINSTALL) -t</span>
<a href="#l1.52"></a><span id="l1.52"> # This isn't necessarily true, just here</span>
<a href="#l1.53"></a><span id="l1.53"> sysinstall_cmd = install_cmd</span>
<a href="#l1.54"></a><span id="l1.54"> </span>
<a href="#l1.55"></a><span id="l1.55"> # Directory nsinstall.</span>
<a href="#l1.56"></a><span id="l1.56"> DIR_INSTALL = $(INSTALL)</span>
<a href="#l1.57"></a><span id="l1.57"> dir_install_cmd = install_cmd</span>
<a href="#l1.58"></a><span id="l1.58"> </span>
<a href="#l1.59"></a><span id="l1.59" class="difflineminus">-ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l1.60"></a><span id="l1.60" class="difflineminus">-ifneq (,$(CYGDRIVE_MOUNT))</span>
<a href="#l1.61"></a><span id="l1.61" class="difflineminus">-export CYGDRIVE_MOUNT</span>
<a href="#l1.62"></a><span id="l1.62" class="difflineminus">-endif</span>
<a href="#l1.63"></a><span id="l1.63" class="difflineminus">-endif</span>
<a href="#l1.64"></a><span id="l1.64" class="difflineminus">-</span>
<a href="#l1.65"></a><span id="l1.65"> # png to ico converter. The function takes 5 arguments, in order: source png</span>
<a href="#l1.66"></a><span id="l1.66"> # file, left, top, size, output ico file.</span>
<a href="#l1.67"></a><span id="l1.67"> png2ico = $(PYTHON) $(MOZILLA_DIR)/config/pythonpath.py \</span>
<a href="#l1.68"></a><span id="l1.68">   -I$(topsrcdir)/build/pypng $(topsrcdir)/build/png2ico.py $(1) $(2) $(3) $(4) $(5)</span>
<a href="#l1.69"></a><span id="l1.69"> </span>
<a href="#l1.70"></a><span id="l1.70"> #</span>
<a href="#l1.71"></a><span id="l1.71"> # Localization build automation</span>
<a href="#l1.72"></a><span id="l1.72"> #</span>
<a href="#l1.73"></a><span id="l1.73" class="difflineat">@@ -672,27 +664,23 @@ ifdef LOCALE_MERGEDIR</span>
<a href="#l1.74"></a><span id="l1.74"> MAKE_JARS_FLAGS += -c $(LOCALE_MERGEDIR)/$(subst /locales,,$(relativesrcdir))</span>
<a href="#l1.75"></a><span id="l1.75"> endif</span>
<a href="#l1.76"></a><span id="l1.76"> MAKE_JARS_FLAGS += -c $(LOCALE_SRCDIR)</span>
<a href="#l1.77"></a><span id="l1.77"> ifdef LOCALE_MERGEDIR</span>
<a href="#l1.78"></a><span id="l1.78"> MAKE_JARS_FLAGS += -c $(topsrcdir)/$(relativesrcdir)/en-US</span>
<a href="#l1.79"></a><span id="l1.79"> endif</span>
<a href="#l1.80"></a><span id="l1.80"> endif</span>
<a href="#l1.81"></a><span id="l1.81"> </span>
<a href="#l1.82"></a><span id="l1.82" class="difflineminus">-ifdef WINCE</span>
<a href="#l1.83"></a><span id="l1.83" class="difflineminus">-RUN_TEST_PROGRAM = $(PYTHON) $(MOZILLA_SRCDIR)/build/mobile/devicemanager-run-test.py</span>
<a href="#l1.84"></a><span id="l1.84" class="difflineminus">-else</span>
<a href="#l1.85"></a><span id="l1.85"> ifeq (OS2,$(OS_ARCH))</span>
<a href="#l1.86"></a><span id="l1.86"> RUN_TEST_PROGRAM = $(MOZILLA_SRCDIR)/build/os2/test_os2.cmd &quot;$(DIST)&quot;</span>
<a href="#l1.87"></a><span id="l1.87"> else</span>
<a href="#l1.88"></a><span id="l1.88"> ifneq (WINNT,$(OS_ARCH))</span>
<a href="#l1.89"></a><span id="l1.89"> RUN_TEST_PROGRAM = $(DIST)/bin/run-mozilla.sh</span>
<a href="#l1.90"></a><span id="l1.90"> endif # ! WINNT</span>
<a href="#l1.91"></a><span id="l1.91"> endif # ! OS2</span>
<a href="#l1.92"></a><span id="l1.92" class="difflineminus">-endif # ! WINCE</span>
<a href="#l1.93"></a><span id="l1.93"> </span>
<a href="#l1.94"></a><span id="l1.94"> ifdef TIERS</span>
<a href="#l1.95"></a><span id="l1.95"> DIRS += $(foreach tier,$(TIERS),$(tier_$(tier)_dirs))</span>
<a href="#l1.96"></a><span id="l1.96"> STATIC_DIRS += $(foreach tier,$(TIERS),$(tier_$(tier)_staticdirs))</span>
<a href="#l1.97"></a><span id="l1.97"> endif</span>
<a href="#l1.98"></a><span id="l1.98"> </span>
<a href="#l1.99"></a><span id="l1.99"> OPTIMIZE_JARS_CMD = $(PYTHON) $(call core_abspath,$(MOZILLA_SRCDIR)/config/optimizejars.py)</span>
<a href="#l1.100"></a><span id="l1.100"> </span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/config/rules.mk</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/config/rules.mk</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -49,21 +49,17 @@ ifneq (,$(findstring s, $(filter-out --%</span>
<a href="#l2.4"></a><span id="l2.4">   ELOG := $(EXEC) sh $(BUILD_TOOLS)/print-failed-commands.sh</span>
<a href="#l2.5"></a><span id="l2.5"> else</span>
<a href="#l2.6"></a><span id="l2.6">   ELOG :=</span>
<a href="#l2.7"></a><span id="l2.7"> endif # -s</span>
<a href="#l2.8"></a><span id="l2.8"> else</span>
<a href="#l2.9"></a><span id="l2.9">   ELOG :=</span>
<a href="#l2.10"></a><span id="l2.10"> endif # ifndef .PYMAKE</span>
<a href="#l2.11"></a><span id="l2.11"> </span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-ifeq (,$(filter-out WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l2.13"></a><span id="l2.13"> _VPATH_SRCS = $(abspath $&lt;)</span>
<a href="#l2.14"></a><span id="l2.14" class="difflineminus">-else</span>
<a href="#l2.15"></a><span id="l2.15" class="difflineminus">-_VPATH_SRCS = $&lt;</span>
<a href="#l2.16"></a><span id="l2.16" class="difflineminus">-endif</span>
<a href="#l2.17"></a><span id="l2.17"> </span>
<a href="#l2.18"></a><span id="l2.18"> # Add $(DIST)/lib to VPATH so that -lfoo dependencies are followed</span>
<a href="#l2.19"></a><span id="l2.19"> VPATH += $(DIST)/lib</span>
<a href="#l2.20"></a><span id="l2.20"> ifdef LIBXUL_SDK</span>
<a href="#l2.21"></a><span id="l2.21"> VPATH += $(LIBXUL_SDK)/lib</span>
<a href="#l2.22"></a><span id="l2.22"> endif</span>
<a href="#l2.23"></a><span id="l2.23"> </span>
<a href="#l2.24"></a><span id="l2.24"> ifdef EXTRA_DSO_LIBS</span>
<a href="#l2.25"></a><span id="l2.25" class="difflineat">@@ -197,17 +193,17 @@ endif</span>
<a href="#l2.26"></a><span id="l2.26"> ifdef LIBRARY</span>
<a href="#l2.27"></a><span id="l2.27"> ifdef FORCE_SHARED_LIB</span>
<a href="#l2.28"></a><span id="l2.28"> ifdef MKSHLIB</span>
<a href="#l2.29"></a><span id="l2.29"> </span>
<a href="#l2.30"></a><span id="l2.30"> ifdef LIB_IS_C_ONLY</span>
<a href="#l2.31"></a><span id="l2.31"> MKSHLIB			= $(MKCSHLIB)</span>
<a href="#l2.32"></a><span id="l2.32"> endif</span>
<a href="#l2.33"></a><span id="l2.33"> </span>
<a href="#l2.34"></a><span id="l2.34" class="difflineminus">-ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l2.35"></a><span id="l2.35" class="difflineplus">+ifneq (,$(filter OS2 WINNT,$(OS_ARCH)))</span>
<a href="#l2.36"></a><span id="l2.36"> IMPORT_LIBRARY		:= $(LIB_PREFIX)$(SHARED_LIBRARY_NAME).$(IMPORT_LIB_SUFFIX)</span>
<a href="#l2.37"></a><span id="l2.37"> endif</span>
<a href="#l2.38"></a><span id="l2.38"> </span>
<a href="#l2.39"></a><span id="l2.39"> ifeq (OS2,$(OS_ARCH))</span>
<a href="#l2.40"></a><span id="l2.40"> ifdef SHORT_LIBNAME</span>
<a href="#l2.41"></a><span id="l2.41"> SHARED_LIBRARY_NAME	:= $(SHORT_LIBNAME)</span>
<a href="#l2.42"></a><span id="l2.42"> endif</span>
<a href="#l2.43"></a><span id="l2.43"> endif</span>
<a href="#l2.44"></a><span id="l2.44" class="difflineat">@@ -237,17 +233,17 @@ endif</span>
<a href="#l2.45"></a><span id="l2.45"> endif</span>
<a href="#l2.46"></a><span id="l2.46"> </span>
<a href="#l2.47"></a><span id="l2.47"> ifdef FORCE_SHARED_LIB</span>
<a href="#l2.48"></a><span id="l2.48"> ifndef FORCE_STATIC_LIB</span>
<a href="#l2.49"></a><span id="l2.49"> LIBRARY := $(NULL)</span>
<a href="#l2.50"></a><span id="l2.50"> endif</span>
<a href="#l2.51"></a><span id="l2.51"> endif</span>
<a href="#l2.52"></a><span id="l2.52"> </span>
<a href="#l2.53"></a><span id="l2.53" class="difflineminus">-ifeq (,$(filter-out WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l2.54"></a><span id="l2.54" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l2.55"></a><span id="l2.55"> ifndef GNU_CC</span>
<a href="#l2.56"></a><span id="l2.56"> </span>
<a href="#l2.57"></a><span id="l2.57"> #</span>
<a href="#l2.58"></a><span id="l2.58"> # Unless we're building SIMPLE_PROGRAMS, all C++ files share a PDB file per</span>
<a href="#l2.59"></a><span id="l2.59"> # directory. For parallel builds, this PDB file is shared and locked by</span>
<a href="#l2.60"></a><span id="l2.60"> # MSPDBSRV.EXE, starting with MSVC8 SP1. If you're using MSVC 7.1 or MSVC8</span>
<a href="#l2.61"></a><span id="l2.61"> # without SP1, don't do parallel builds.</span>
<a href="#l2.62"></a><span id="l2.62"> #</span>
<a href="#l2.63"></a><span id="l2.63" class="difflineat">@@ -289,17 +285,17 @@ endif # !GNU_CC</span>
<a href="#l2.64"></a><span id="l2.64"> endif # WINNT</span>
<a href="#l2.65"></a><span id="l2.65"> </span>
<a href="#l2.66"></a><span id="l2.66"> ifeq ($(SOLARIS_SUNPRO_CXX),1)</span>
<a href="#l2.67"></a><span id="l2.67"> ifeq (86,$(findstring 86,$(OS_TEST)))</span>
<a href="#l2.68"></a><span id="l2.68"> OS_LDFLAGS += -M $(MOZILLA_DIR)/config/solaris_ia32.map</span>
<a href="#l2.69"></a><span id="l2.69"> endif # x86</span>
<a href="#l2.70"></a><span id="l2.70"> endif # Solaris Sun Studio C++</span>
<a href="#l2.71"></a><span id="l2.71"> </span>
<a href="#l2.72"></a><span id="l2.72" class="difflineminus">-ifeq (,$(filter-out WINNT WINCE,$(HOST_OS_ARCH)))</span>
<a href="#l2.73"></a><span id="l2.73" class="difflineplus">+ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l2.74"></a><span id="l2.74"> HOST_PDBFILE=$(basename $(@F)).pdb</span>
<a href="#l2.75"></a><span id="l2.75"> endif</span>
<a href="#l2.76"></a><span id="l2.76"> </span>
<a href="#l2.77"></a><span id="l2.77"> ifndef TARGETS</span>
<a href="#l2.78"></a><span id="l2.78"> TARGETS			= $(LIBRARY) $(SHARED_LIBRARY) $(PROGRAM) $(SIMPLE_PROGRAMS) $(HOST_LIBRARY) $(HOST_PROGRAM) $(HOST_SIMPLE_PROGRAMS)</span>
<a href="#l2.79"></a><span id="l2.79"> endif</span>
<a href="#l2.80"></a><span id="l2.80"> </span>
<a href="#l2.81"></a><span id="l2.81"> ifndef OBJS</span>
<a href="#l2.82"></a><span id="l2.82" class="difflineat">@@ -603,32 +599,22 @@ IFLAGS1 = -m 644</span>
<a href="#l2.83"></a><span id="l2.83"> IFLAGS2 = -m 755</span>
<a href="#l2.84"></a><span id="l2.84"> endif</span>
<a href="#l2.85"></a><span id="l2.85"> </span>
<a href="#l2.86"></a><span id="l2.86"> ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l2.87"></a><span id="l2.87"> OUTOPTION = -Fo# eol</span>
<a href="#l2.88"></a><span id="l2.88"> else</span>
<a href="#l2.89"></a><span id="l2.89"> OUTOPTION = -o # eol</span>
<a href="#l2.90"></a><span id="l2.90"> endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l2.91"></a><span id="l2.91" class="difflineminus">-ifneq (,$(filter WINCE,$(OS_ARCH)))</span>
<a href="#l2.92"></a><span id="l2.92" class="difflineminus">-OUTOPTION = -Fo# eol</span>
<a href="#l2.93"></a><span id="l2.93" class="difflineminus">-endif</span>
<a href="#l2.94"></a><span id="l2.94" class="difflineminus">-</span>
<a href="#l2.95"></a><span id="l2.95" class="difflineminus">-ifeq ($(OS_ARCH), WINCE)</span>
<a href="#l2.96"></a><span id="l2.96" class="difflineminus">-OUTOPTION = -Fo# eol</span>
<a href="#l2.97"></a><span id="l2.97" class="difflineminus">-HOST_OUTOPTION = -Fo# eol</span>
<a href="#l2.98"></a><span id="l2.98" class="difflineminus">-else</span>
<a href="#l2.99"></a><span id="l2.99"> </span>
<a href="#l2.100"></a><span id="l2.100"> ifeq (,$(CROSS_COMPILE))</span>
<a href="#l2.101"></a><span id="l2.101"> HOST_OUTOPTION = $(OUTOPTION)</span>
<a href="#l2.102"></a><span id="l2.102"> else</span>
<a href="#l2.103"></a><span id="l2.103"> HOST_OUTOPTION = -o # eol</span>
<a href="#l2.104"></a><span id="l2.104"> endif</span>
<a href="#l2.105"></a><span id="l2.105" class="difflineminus">-</span>
<a href="#l2.106"></a><span id="l2.106" class="difflineminus">-endif</span>
<a href="#l2.107"></a><span id="l2.107"> ################################################################################</span>
<a href="#l2.108"></a><span id="l2.108"> </span>
<a href="#l2.109"></a><span id="l2.109"> # SUBMAKEFILES: List of Makefiles for next level down.</span>
<a href="#l2.110"></a><span id="l2.110"> #   This is used to update or create the Makefiles before invoking them.</span>
<a href="#l2.111"></a><span id="l2.111"> SUBMAKEFILES += $(addsuffix /Makefile, $(DIRS) $(TOOL_DIRS) $(PARALLEL_DIRS))</span>
<a href="#l2.112"></a><span id="l2.112"> </span>
<a href="#l2.113"></a><span id="l2.113"> # The root makefile doesn't want to do a plain export/libs, because</span>
<a href="#l2.114"></a><span id="l2.114"> # of the tiers and because of libxul. Suppress the default rules in favor</span>
<a href="#l2.115"></a><span id="l2.115" class="difflineat">@@ -793,17 +779,17 @@ ifdef IS_COMPONENT</span>
<a href="#l2.116"></a><span id="l2.116"> ifndef NO_COMPONENTS_MANIFEST</span>
<a href="#l2.117"></a><span id="l2.117"> 	@$(PYTHON) $(MOZILLA_DIR)/config/buildlist.py $(FINAL_TARGET)/chrome.manifest &quot;manifest components/components.manifest&quot;</span>
<a href="#l2.118"></a><span id="l2.118"> 	@$(PYTHON) $(MOZILLA_DIR)/config/buildlist.py $(FINAL_TARGET)/components/components.manifest &quot;binary-component $(SHARED_LIBRARY)&quot;</span>
<a href="#l2.119"></a><span id="l2.119"> endif</span>
<a href="#l2.120"></a><span id="l2.120"> ifdef BEOS_ADDON_WORKAROUND</span>
<a href="#l2.121"></a><span id="l2.121"> 	( cd $(FINAL_TARGET)/components &amp;&amp; $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )</span>
<a href="#l2.122"></a><span id="l2.122"> endif</span>
<a href="#l2.123"></a><span id="l2.123"> else # ! IS_COMPONENT</span>
<a href="#l2.124"></a><span id="l2.124" class="difflineminus">-ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))</span>
<a href="#l2.125"></a><span id="l2.125" class="difflineplus">+ifneq (,$(filter OS2 WINNT,$(OS_ARCH)))</span>
<a href="#l2.126"></a><span id="l2.126"> ifndef NO_INSTALL_IMPORT_LIBRARY</span>
<a href="#l2.127"></a><span id="l2.127"> 	$(call install_cmd,$(IFLAGS2) $(IMPORT_LIBRARY) $(DIST)/lib)</span>
<a href="#l2.128"></a><span id="l2.128"> endif</span>
<a href="#l2.129"></a><span id="l2.129"> else</span>
<a href="#l2.130"></a><span id="l2.130"> 	$(call install_cmd,$(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/lib)</span>
<a href="#l2.131"></a><span id="l2.131"> endif</span>
<a href="#l2.132"></a><span id="l2.132"> 	$(call install_cmd,$(IFLAGS2) $(SHARED_LIBRARY) $(FINAL_TARGET))</span>
<a href="#l2.133"></a><span id="l2.133"> ifdef BEOS_ADDON_WORKAROUND</span>
<a href="#l2.134"></a><span id="l2.134" class="difflineat">@@ -891,19 +877,16 @@ alltags:</span>
<a href="#l2.135"></a><span id="l2.135"> 	find $(topsrcdir) -name dist -prune -o \( -name '*.[hc]' -o -name '*.cp' -o -name '*.cpp' -o -name '*.idl' \) -print | $(TAG_PROGRAM)</span>
<a href="#l2.136"></a><span id="l2.136"> </span>
<a href="#l2.137"></a><span id="l2.137"> #</span>
<a href="#l2.138"></a><span id="l2.138"> # PROGRAM = Foo</span>
<a href="#l2.139"></a><span id="l2.139"> # creates OBJS, links with LIBS to create Foo</span>
<a href="#l2.140"></a><span id="l2.140"> #</span>
<a href="#l2.141"></a><span id="l2.141"> $(PROGRAM): $(PROGOBJS) $(EXTRA_DEPS) $(EXE_DEF_FILE) $(RESFILE) $(GLOBAL_DEPS)</span>
<a href="#l2.142"></a><span id="l2.142"> 	@$(RM) $@.manifest</span>
<a href="#l2.143"></a><span id="l2.143" class="difflineminus">-ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l2.144"></a><span id="l2.144" class="difflineminus">-	$(EXPAND_LD) -NOLOGO -OUT:$@ $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_GLUE_PROGRAM_LDFLAGS) $(PROGOBJS) $(RESFILE) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l2.145"></a><span id="l2.145" class="difflineminus">-else</span>
<a href="#l2.146"></a><span id="l2.146"> ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l2.147"></a><span id="l2.147"> 	$(EXPAND_LD) -NOLOGO -OUT:$@ -PDB:$(LINK_PDBFILE) $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_GLUE_PROGRAM_LDFLAGS) $(PROGOBJS) $(RESFILE) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l2.148"></a><span id="l2.148"> ifdef MSMANIFEST_TOOL</span>
<a href="#l2.149"></a><span id="l2.149"> 	@if test -f $@.manifest; then \</span>
<a href="#l2.150"></a><span id="l2.150"> 		if test -f &quot;$(srcdir)/$@.manifest&quot;; then \</span>
<a href="#l2.151"></a><span id="l2.151"> 			echo &quot;Embedding manifest from $(srcdir)/$@.manifest and $@.manifest&quot;; \</span>
<a href="#l2.152"></a><span id="l2.152"> 			mt.exe -NOLOGO -MANIFEST &quot;$(win_srcdir)/$@.manifest&quot; $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l2.153"></a><span id="l2.153"> 		else \</span>
<a href="#l2.154"></a><span id="l2.154" class="difflineat">@@ -918,35 +901,31 @@ endif	# MSVC with manifest tool</span>
<a href="#l2.155"></a><span id="l2.155"> ifdef MOZ_PROFILE_GENERATE</span>
<a href="#l2.156"></a><span id="l2.156"> # touch it a few seconds into the future to work around FAT's</span>
<a href="#l2.157"></a><span id="l2.157"> # 2-second granularity</span>
<a href="#l2.158"></a><span id="l2.158"> 	touch -t `date +%Y%m%d%H%M.%S -d &quot;now+5seconds&quot;` pgo.relink</span>
<a href="#l2.159"></a><span id="l2.159"> endif</span>
<a href="#l2.160"></a><span id="l2.160"> else # !WINNT || GNU_CC</span>
<a href="#l2.161"></a><span id="l2.161"> 	$(EXPAND_CCC) -o $@ $(CXXFLAGS) $(PROGOBJS) $(RESFILE) $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(WRAP_LDFLAGS) $(MOZ_GLUE_PROGRAM_LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(BIN_FLAGS) $(EXE_DEF_FILE)</span>
<a href="#l2.162"></a><span id="l2.162"> endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l2.163"></a><span id="l2.163" class="difflineminus">-endif # WINCE</span>
<a href="#l2.164"></a><span id="l2.164"> </span>
<a href="#l2.165"></a><span id="l2.165"> ifdef ENABLE_STRIP</span>
<a href="#l2.166"></a><span id="l2.166"> 	$(STRIP) $@</span>
<a href="#l2.167"></a><span id="l2.167"> endif</span>
<a href="#l2.168"></a><span id="l2.168"> ifdef MOZ_POST_PROGRAM_COMMAND</span>
<a href="#l2.169"></a><span id="l2.169"> 	$(MOZ_POST_PROGRAM_COMMAND) $@</span>
<a href="#l2.170"></a><span id="l2.170"> endif</span>
<a href="#l2.171"></a><span id="l2.171"> ifeq ($(OS_ARCH),BeOS)</span>
<a href="#l2.172"></a><span id="l2.172"> ifdef BEOS_PROGRAM_RESOURCE</span>
<a href="#l2.173"></a><span id="l2.173"> 	xres -o $@ $(BEOS_PROGRAM_RESOURCE)</span>
<a href="#l2.174"></a><span id="l2.174"> 	mimeset $@</span>
<a href="#l2.175"></a><span id="l2.175"> endif</span>
<a href="#l2.176"></a><span id="l2.176"> endif # BeOS</span>
<a href="#l2.177"></a><span id="l2.177"> </span>
<a href="#l2.178"></a><span id="l2.178"> $(HOST_PROGRAM): $(HOST_PROGOBJS) $(HOST_LIBS_DEPS) $(HOST_EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l2.179"></a><span id="l2.179" class="difflineminus">-ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l2.180"></a><span id="l2.180" class="difflineminus">-	$(HOST_LD) -NOLOGO -OUT:$@ $(HOST_OBJS) $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.181"></a><span id="l2.181" class="difflineminus">-else</span>
<a href="#l2.182"></a><span id="l2.182"> ifeq (_WINNT,$(GNU_CC)_$(HOST_OS_ARCH))</span>
<a href="#l2.183"></a><span id="l2.183"> 	$(HOST_LD) -NOLOGO -OUT:$@ -PDB:$(HOST_PDBFILE) $(HOST_OBJS) $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.184"></a><span id="l2.184"> ifdef MSMANIFEST_TOOL</span>
<a href="#l2.185"></a><span id="l2.185"> 	@if test -f $@.manifest; then \</span>
<a href="#l2.186"></a><span id="l2.186"> 		if test -f &quot;$(srcdir)/$@.manifest&quot;; then \</span>
<a href="#l2.187"></a><span id="l2.187"> 			echo &quot;Embedding manifest from $(srcdir)/$@.manifest and $@.manifest&quot;; \</span>
<a href="#l2.188"></a><span id="l2.188"> 			mt.exe -NOLOGO -MANIFEST &quot;$(win_srcdir)/$@.manifest&quot; $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l2.189"></a><span id="l2.189"> 		else \</span>
<a href="#l2.190"></a><span id="l2.190" class="difflineat">@@ -960,80 +939,71 @@ ifdef MSMANIFEST_TOOL</span>
<a href="#l2.191"></a><span id="l2.191"> endif	# MSVC with manifest tool</span>
<a href="#l2.192"></a><span id="l2.192"> else</span>
<a href="#l2.193"></a><span id="l2.193"> ifeq ($(HOST_CPP_PROG_LINK),1)</span>
<a href="#l2.194"></a><span id="l2.194"> 	$(HOST_CXX) -o $@ $(HOST_CXXFLAGS) $(HOST_LDFLAGS) $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.195"></a><span id="l2.195"> else</span>
<a href="#l2.196"></a><span id="l2.196"> 	$(HOST_CC) -o $@ $(HOST_CFLAGS) $(HOST_LDFLAGS) $(HOST_PROGOBJS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.197"></a><span id="l2.197"> endif # HOST_CPP_PROG_LINK</span>
<a href="#l2.198"></a><span id="l2.198"> endif</span>
<a href="#l2.199"></a><span id="l2.199" class="difflineminus">-endif</span>
<a href="#l2.200"></a><span id="l2.200"> </span>
<a href="#l2.201"></a><span id="l2.201"> #</span>
<a href="#l2.202"></a><span id="l2.202"> # This is an attempt to support generation of multiple binaries</span>
<a href="#l2.203"></a><span id="l2.203"> # in one directory, it assumes everything to compile Foo is in</span>
<a href="#l2.204"></a><span id="l2.204"> # Foo.o (from either Foo.c or Foo.cpp).</span>
<a href="#l2.205"></a><span id="l2.205"> #</span>
<a href="#l2.206"></a><span id="l2.206"> # SIMPLE_PROGRAMS = Foo Bar</span>
<a href="#l2.207"></a><span id="l2.207"> # creates Foo.o Bar.o, links with LIBS to create Foo, Bar.</span>
<a href="#l2.208"></a><span id="l2.208"> #</span>
<a href="#l2.209"></a><span id="l2.209"> $(SIMPLE_PROGRAMS): %$(BIN_SUFFIX): %.$(OBJ_SUFFIX) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l2.210"></a><span id="l2.210" class="difflineminus">-ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l2.211"></a><span id="l2.211" class="difflineminus">-	$(EXPAND_LD) -nologo  -entry:mainACRTStartup -out:$@ $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_GLUE_PROGRAM_LDFLAGS) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l2.212"></a><span id="l2.212" class="difflineminus">-else</span>
<a href="#l2.213"></a><span id="l2.213"> ifeq (_WINNT,$(GNU_CC)_$(OS_ARCH))</span>
<a href="#l2.214"></a><span id="l2.214"> 	$(EXPAND_LD) -nologo -out:$@ -pdb:$(LINK_PDBFILE) $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_GLUE_PROGRAM_LDFLAGS) $(LIBS) $(EXTRA_LIBS) $(OS_LIBS)</span>
<a href="#l2.215"></a><span id="l2.215"> ifdef MSMANIFEST_TOOL</span>
<a href="#l2.216"></a><span id="l2.216"> 	@if test -f $@.manifest; then \</span>
<a href="#l2.217"></a><span id="l2.217"> 		mt.exe -NOLOGO -MANIFEST $@.manifest -OUTPUTRESOURCE:$@\;1; \</span>
<a href="#l2.218"></a><span id="l2.218"> 		rm -f $@.manifest; \</span>
<a href="#l2.219"></a><span id="l2.219"> 	fi</span>
<a href="#l2.220"></a><span id="l2.220"> endif	# MSVC with manifest tool</span>
<a href="#l2.221"></a><span id="l2.221"> else</span>
<a href="#l2.222"></a><span id="l2.222"> 	$(EXPAND_CCC) $(CXXFLAGS) -o $@ $&lt; $(WIN32_EXE_LDFLAGS) $(LDFLAGS) $(MOZ_GLUE_PROGRAM_LDFLAGS) $(WRAP_LDFLAGS) $(LIBS_DIR) $(LIBS) $(OS_LIBS) $(EXTRA_LIBS) $(BIN_FLAGS)</span>
<a href="#l2.223"></a><span id="l2.223"> endif # WINNT &amp;&amp; !GNU_CC</span>
<a href="#l2.224"></a><span id="l2.224" class="difflineminus">-endif # WINCE</span>
<a href="#l2.225"></a><span id="l2.225"> </span>
<a href="#l2.226"></a><span id="l2.226"> ifdef ENABLE_STRIP</span>
<a href="#l2.227"></a><span id="l2.227"> 	$(STRIP) $@</span>
<a href="#l2.228"></a><span id="l2.228"> endif</span>
<a href="#l2.229"></a><span id="l2.229"> ifdef MOZ_POST_PROGRAM_COMMAND</span>
<a href="#l2.230"></a><span id="l2.230"> 	$(MOZ_POST_PROGRAM_COMMAND) $@</span>
<a href="#l2.231"></a><span id="l2.231"> endif</span>
<a href="#l2.232"></a><span id="l2.232"> </span>
<a href="#l2.233"></a><span id="l2.233"> $(HOST_SIMPLE_PROGRAMS): host_%$(HOST_BIN_SUFFIX): host_%.$(OBJ_SUFFIX) $(HOST_LIBS_DEPS) $(HOST_EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l2.234"></a><span id="l2.234" class="difflineminus">-ifeq (WINCE,$(OS_ARCH))</span>
<a href="#l2.235"></a><span id="l2.235" class="difflineminus">-	$(HOST_LD) -NOLOGO -OUT:$@ $(WIN32_EXE_LDFLAGS) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.236"></a><span id="l2.236" class="difflineminus">-else</span>
<a href="#l2.237"></a><span id="l2.237"> ifeq (WINNT_,$(HOST_OS_ARCH)_$(GNU_CC))</span>
<a href="#l2.238"></a><span id="l2.238"> 	$(HOST_LD) -NOLOGO -OUT:$@ -PDB:$(HOST_PDBFILE) $&lt; $(WIN32_EXE_LDFLAGS) $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.239"></a><span id="l2.239"> else</span>
<a href="#l2.240"></a><span id="l2.240"> ifneq (,$(HOST_CPPSRCS)$(USE_HOST_CXX))</span>
<a href="#l2.241"></a><span id="l2.241"> 	$(HOST_CXX) $(HOST_OUTOPTION)$@ $(HOST_CXXFLAGS) $(INCLUDES) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.242"></a><span id="l2.242"> else</span>
<a href="#l2.243"></a><span id="l2.243"> 	$(HOST_CC) $(HOST_OUTOPTION)$@ $(HOST_CFLAGS) $(INCLUDES) $&lt; $(HOST_LIBS) $(HOST_EXTRA_LIBS)</span>
<a href="#l2.244"></a><span id="l2.244"> endif</span>
<a href="#l2.245"></a><span id="l2.245"> endif</span>
<a href="#l2.246"></a><span id="l2.246" class="difflineminus">-endif</span>
<a href="#l2.247"></a><span id="l2.247"> </span>
<a href="#l2.248"></a><span id="l2.248"> ifdef DTRACE_PROBE_OBJ</span>
<a href="#l2.249"></a><span id="l2.249"> EXTRA_DEPS += $(DTRACE_PROBE_OBJ)</span>
<a href="#l2.250"></a><span id="l2.250"> endif</span>
<a href="#l2.251"></a><span id="l2.251"> </span>
<a href="#l2.252"></a><span id="l2.252"> $(filter %.$(LIB_SUFFIX),$(LIBRARY)): $(OBJS) $(LOBJS) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l2.253"></a><span id="l2.253"> 	$(RM) $(LIBRARY)</span>
<a href="#l2.254"></a><span id="l2.254"> 	$(EXPAND_AR) $(AR_FLAGS) $(OBJS) $(LOBJS) $(SHARED_LIBRARY_LIBS)</span>
<a href="#l2.255"></a><span id="l2.255"> 	$(RANLIB) $@</span>
<a href="#l2.256"></a><span id="l2.256"> </span>
<a href="#l2.257"></a><span id="l2.257"> $(filter-out %.$(LIB_SUFFIX),$(LIBRARY)): $(filter %.$(LIB_SUFFIX),$(LIBRARY)) $(OBJS) $(LOBJS) $(EXTRA_DEPS) $(GLOBAL_DEPS)</span>
<a href="#l2.258"></a><span id="l2.258"> # When we only build a library descriptor, blow out any existing library</span>
<a href="#l2.259"></a><span id="l2.259"> 	$(if $(filter %.$(LIB_SUFFIX),$(LIBRARY)),,$(RM) $(REAL_LIBRARY) $(EXPORT_LIBRARY:%=%/$(REAL_LIBRARY)))</span>
<a href="#l2.260"></a><span id="l2.260"> 	$(EXPAND_LIBS_GEN) -o $@ $(OBJS) $(LOBJS) $(SHARED_LIBRARY_LIBS)</span>
<a href="#l2.261"></a><span id="l2.261"> </span>
<a href="#l2.262"></a><span id="l2.262" class="difflineminus">-ifeq (,$(filter-out WINNT WINCE, $(OS_ARCH)))</span>
<a href="#l2.263"></a><span id="l2.263" class="difflineplus">+ifeq ($(OS_ARCH),WINNT)</span>
<a href="#l2.264"></a><span id="l2.264"> $(IMPORT_LIBRARY): $(SHARED_LIBRARY)</span>
<a href="#l2.265"></a><span id="l2.265"> endif</span>
<a href="#l2.266"></a><span id="l2.266"> </span>
<a href="#l2.267"></a><span id="l2.267"> ifeq ($(OS_ARCH),OS2)</span>
<a href="#l2.268"></a><span id="l2.268"> $(DEF_FILE): $(OBJS) $(SHARED_LIBRARY_LIBS)</span>
<a href="#l2.269"></a><span id="l2.269"> 	$(RM) $@</span>
<a href="#l2.270"></a><span id="l2.270"> 	echo LIBRARY $(SHARED_LIBRARY_NAME) INITINSTANCE TERMINSTANCE &gt; $@</span>
<a href="#l2.271"></a><span id="l2.271"> 	echo PROTMODE &gt;&gt; $@</span>
<a href="#l2.272"></a><span id="l2.272" class="difflineat">@@ -1284,46 +1254,36 @@ endif</span>
<a href="#l2.273"></a><span id="l2.273"> %: %,v</span>
<a href="#l2.274"></a><span id="l2.274"> </span>
<a href="#l2.275"></a><span id="l2.275"> %: RCS/%,v</span>
<a href="#l2.276"></a><span id="l2.276"> </span>
<a href="#l2.277"></a><span id="l2.277"> %: s.%</span>
<a href="#l2.278"></a><span id="l2.278"> </span>
<a href="#l2.279"></a><span id="l2.279"> %: SCCS/s.%</span>
<a href="#l2.280"></a><span id="l2.280"> </span>
<a href="#l2.281"></a><span id="l2.281" class="difflineminus">-# Cygwin and MSYS have their own special path form, but javac expects the source</span>
<a href="#l2.282"></a><span id="l2.282" class="difflineminus">-# and class paths to be in the DOS form (i.e. e:/builds/...).  This function</span>
<a href="#l2.283"></a><span id="l2.283" class="difflineminus">-# does the appropriate conversion on Windows, but is a noop on other systems.</span>
<a href="#l2.284"></a><span id="l2.284" class="difflineminus">-ifeq (,$(filter-out WINNT WINCE, $(HOST_OS_ARCH)))</span>
<a href="#l2.285"></a><span id="l2.285" class="difflineminus">-ifdef CYGWIN_WRAPPER</span>
<a href="#l2.286"></a><span id="l2.286" class="difflineminus">-normalizepath = $(foreach p,$(1),$(shell cygpath -m $(p)))</span>
<a href="#l2.287"></a><span id="l2.287" class="difflineminus">-else</span>
<a href="#l2.288"></a><span id="l2.288" class="difflineplus">+# MSYS has its own special path form, but javac expects the source and class</span>
<a href="#l2.289"></a><span id="l2.289" class="difflineplus">+# paths to be in the DOS form (i.e. e:/builds/...).  This function does the</span>
<a href="#l2.290"></a><span id="l2.290" class="difflineplus">+# appropriate conversion on Windows, but is a noop on other systems.</span>
<a href="#l2.291"></a><span id="l2.291" class="difflineplus">+ifeq ($(HOST_OS_ARCH),WINNT)</span>
<a href="#l2.292"></a><span id="l2.292"> # assume MSYS</span>
<a href="#l2.293"></a><span id="l2.293"> #  We use 'pwd -W' to get DOS form of the path.  However, since the given path</span>
<a href="#l2.294"></a><span id="l2.294"> #  could be a file or a non-existent path, we cannot call 'pwd -W' directly</span>
<a href="#l2.295"></a><span id="l2.295"> #  on the path.  Instead, we extract the root path (i.e. &quot;c:/&quot;), call 'pwd -W'</span>
<a href="#l2.296"></a><span id="l2.296"> #  on it, then merge with the rest of the path.</span>
<a href="#l2.297"></a><span id="l2.297"> root-path = $(shell echo $(1) | sed -e &quot;s|\(/[^/]*\)/\?\(.*\)|\1|&quot;)</span>
<a href="#l2.298"></a><span id="l2.298"> non-root-path = $(shell echo $(1) | sed -e &quot;s|\(/[^/]*\)/\?\(.*\)|\2|&quot;)</span>
<a href="#l2.299"></a><span id="l2.299"> normalizepath = $(foreach p,$(1),$(if $(filter /%,$(1)),$(patsubst %/,%,$(shell cd $(call root-path,$(1)) &amp;&amp; pwd -W))/$(call non-root-path,$(1)),$(1)))</span>
<a href="#l2.300"></a><span id="l2.300" class="difflineminus">-endif</span>
<a href="#l2.301"></a><span id="l2.301"> else</span>
<a href="#l2.302"></a><span id="l2.302"> normalizepath = $(1)</span>
<a href="#l2.303"></a><span id="l2.303"> endif</span>
<a href="#l2.304"></a><span id="l2.304"> </span>
<a href="#l2.305"></a><span id="l2.305"> ###############################################################################</span>
<a href="#l2.306"></a><span id="l2.306"> # Update Makefiles</span>
<a href="#l2.307"></a><span id="l2.307"> ###############################################################################</span>
<a href="#l2.308"></a><span id="l2.308"> </span>
<a href="#l2.309"></a><span id="l2.309" class="difflineminus">-# In GNU make 3.80, makefiles must use the /cygdrive syntax, even if we're</span>
<a href="#l2.310"></a><span id="l2.310" class="difflineminus">-# processing them with AS perl. See bug 232003</span>
<a href="#l2.311"></a><span id="l2.311" class="difflineminus">-ifdef AS_PERL</span>
<a href="#l2.312"></a><span id="l2.312" class="difflineminus">-CYGWIN_TOPSRCDIR = -nowrap -p $(topsrcdir) -wrap</span>
<a href="#l2.313"></a><span id="l2.313" class="difflineminus">-endif</span>
<a href="#l2.314"></a><span id="l2.314" class="difflineminus">-</span>
<a href="#l2.315"></a><span id="l2.315"> Makefile: Makefile.in</span>
<a href="#l2.316"></a><span id="l2.316"> 	@$(PYTHON) $(DEPTH)/config.status -n --file=Makefile</span>
<a href="#l2.317"></a><span id="l2.317"> 	@$(TOUCH) $@</span>
<a href="#l2.318"></a><span id="l2.318"> </span>
<a href="#l2.319"></a><span id="l2.319"> ifdef SUBMAKEFILES</span>
<a href="#l2.320"></a><span id="l2.320"> # VPATH does not work on some machines in this case, so add $(srcdir)</span>
<a href="#l2.321"></a><span id="l2.321"> $(SUBMAKEFILES): % : $(srcdir)/%.in</span>
<a href="#l2.322"></a><span id="l2.322"> 	$(PYTHON) $(DEPTH)/config.status -n --file=$@</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/configure.in</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/configure.in</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -173,54 +173,16 @@ dnl Set CROSS_COMPILE in the environment</span>
<a href="#l3.4"></a><span id="l3.4"> dnl to use the cross-compile setup for now</span>
<a href="#l3.5"></a><span id="l3.5"> dnl ========================================================</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> dnl AR_FLAGS set here so HOST_AR_FLAGS can be set correctly (see bug 538269)</span>
<a href="#l3.8"></a><span id="l3.8"> AR_FLAGS='cr $@'</span>
<a href="#l3.9"></a><span id="l3.9"> </span>
<a href="#l3.10"></a><span id="l3.10"> if test &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l3.11"></a><span id="l3.11"> </span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-dnl Do some special WinCE toolchain stuff</span>
<a href="#l3.13"></a><span id="l3.13" class="difflineminus">-case &quot;$target&quot; in</span>
<a href="#l3.14"></a><span id="l3.14" class="difflineminus">-*wince|*winmo)</span>
<a href="#l3.15"></a><span id="l3.15" class="difflineminus">-</span>
<a href="#l3.16"></a><span id="l3.16" class="difflineminus">-    MOZ_ARG_WITH_STRING(wince-sdk,</span>
<a href="#l3.17"></a><span id="l3.17" class="difflineminus">-    [  --with-wince-sdk=WINCE_SDK_DIR</span>
<a href="#l3.18"></a><span id="l3.18" class="difflineminus">-                        The path to the Windows CE SDK],</span>
<a href="#l3.19"></a><span id="l3.19" class="difflineminus">-    WINCE_SDK_DIR=$withval)</span>
<a href="#l3.20"></a><span id="l3.20" class="difflineminus">-</span>
<a href="#l3.21"></a><span id="l3.21" class="difflineminus">-    AC_DEFINE(WINCE)</span>
<a href="#l3.22"></a><span id="l3.22" class="difflineminus">-</span>
<a href="#l3.23"></a><span id="l3.23" class="difflineminus">-    export WINCE=1</span>
<a href="#l3.24"></a><span id="l3.24" class="difflineminus">-</span>
<a href="#l3.25"></a><span id="l3.25" class="difflineminus">-    echo -----------------------------------------------------------------------------</span>
<a href="#l3.26"></a><span id="l3.26" class="difflineminus">-    echo Building Windows CE Shunt Library and Tool Chain</span>
<a href="#l3.27"></a><span id="l3.27" class="difflineminus">-    echo Using SDK in:</span>
<a href="#l3.28"></a><span id="l3.28" class="difflineminus">-    echo $WINCE_SDK_DIR</span>
<a href="#l3.29"></a><span id="l3.29" class="difflineminus">-</span>
<a href="#l3.30"></a><span id="l3.30" class="difflineminus">-    ac_exeext=.exe</span>
<a href="#l3.31"></a><span id="l3.31" class="difflineminus">-</span>
<a href="#l3.32"></a><span id="l3.32" class="difflineminus">-    _pwd=`pwd -W`/mozilla</span>
<a href="#l3.33"></a><span id="l3.33" class="difflineminus">-    _topsrcdirwin=`cd \`dirname $0\`; pwd -W`/mozilla</span>
<a href="#l3.34"></a><span id="l3.34" class="difflineminus">-    make WINCE_SDK_DIR=&quot;$WINCE_SDK_DIR&quot; \</span>
<a href="#l3.35"></a><span id="l3.35" class="difflineminus">-         TOPSRCDIR=&quot;$_topsrcdirwin&quot; OBJDIR=&quot;$_pwd&quot; target=&quot;$target&quot; \</span>
<a href="#l3.36"></a><span id="l3.36" class="difflineminus">-         -C $srcdir/mozilla/build/wince/tools</span>
<a href="#l3.37"></a><span id="l3.37" class="difflineminus">-</span>
<a href="#l3.38"></a><span id="l3.38" class="difflineminus">-    CC=&quot;$_pwd/dist/sdk/bin/$target-gcc.exe&quot;</span>
<a href="#l3.39"></a><span id="l3.39" class="difflineminus">-    CXX=&quot;$_pwd/dist/sdk/bin/$target-gcc.exe&quot;</span>
<a href="#l3.40"></a><span id="l3.40" class="difflineminus">-    CPP=&quot;$_pwd/dist/sdk/bin/$target-gcc.exe -E -nologo&quot;</span>
<a href="#l3.41"></a><span id="l3.41" class="difflineminus">-    CXXCPP=&quot;$_pwd/dist/sdk/bin/$target-gcc.exe -TP -E -nologo&quot;</span>
<a href="#l3.42"></a><span id="l3.42" class="difflineminus">-    LD=&quot;$_pwd/dist/sdk/bin/$target-link.exe&quot;</span>
<a href="#l3.43"></a><span id="l3.43" class="difflineminus">-    AR=&quot;$_pwd/dist/sdk/bin/$target-lib.exe&quot;</span>
<a href="#l3.44"></a><span id="l3.44" class="difflineminus">-    AS=&quot;$_pwd/dist/sdk/bin/$target-as.exe&quot;</span>
<a href="#l3.45"></a><span id="l3.45" class="difflineminus">-    RC=&quot;$_pwd/dist/sdk/bin/$target-res.exe&quot;</span>
<a href="#l3.46"></a><span id="l3.46" class="difflineminus">-    echo -----------------------------------------------------------------------------</span>
<a href="#l3.47"></a><span id="l3.47" class="difflineminus">-    ;;</span>
<a href="#l3.48"></a><span id="l3.48" class="difflineminus">-esac</span>
<a href="#l3.49"></a><span id="l3.49" class="difflineminus">-</span>
<a href="#l3.50"></a><span id="l3.50"> if test -n &quot;$CROSS_COMPILE&quot; &amp;&amp; test &quot;$target&quot; != &quot;$host&quot;; then</span>
<a href="#l3.51"></a><span id="l3.51">     echo &quot;cross compiling from $host to $target&quot;</span>
<a href="#l3.52"></a><span id="l3.52">     cross_compiling=yes</span>
<a href="#l3.53"></a><span id="l3.53"> </span>
<a href="#l3.54"></a><span id="l3.54">     _SAVE_CC=&quot;$CC&quot;</span>
<a href="#l3.55"></a><span id="l3.55">     _SAVE_CFLAGS=&quot;$CFLAGS&quot;</span>
<a href="#l3.56"></a><span id="l3.56">     _SAVE_LDFLAGS=&quot;$LDFLAGS&quot;</span>
<a href="#l3.57"></a><span id="l3.57"> </span>
<a href="#l3.58"></a><span id="l3.58" class="difflineat">@@ -349,27 +311,20 @@ else</span>
<a href="#l3.59"></a><span id="l3.59">         HOST_AR_FLAGS='$AR_FLAGS'</span>
<a href="#l3.60"></a><span id="l3.60">     fi</span>
<a href="#l3.61"></a><span id="l3.61"> fi</span>
<a href="#l3.62"></a><span id="l3.62"> </span>
<a href="#l3.63"></a><span id="l3.63"> MOZ_TOOL_VARIABLES</span>
<a href="#l3.64"></a><span id="l3.64"> </span>
<a href="#l3.65"></a><span id="l3.65"> dnl Special win32 checks</span>
<a href="#l3.66"></a><span id="l3.66"> dnl ========================================================</span>
<a href="#l3.67"></a><span id="l3.67" class="difflineminus">-case &quot;$target&quot; in</span>
<a href="#l3.68"></a><span id="l3.68" class="difflineminus">-*-wince|*-winmo)</span>
<a href="#l3.69"></a><span id="l3.69" class="difflineminus">-    WINVER=500</span>
<a href="#l3.70"></a><span id="l3.70" class="difflineminus">-    ;;</span>
<a href="#l3.71"></a><span id="l3.71" class="difflineminus">-*)</span>
<a href="#l3.72"></a><span id="l3.72" class="difflineminus">-    WINVER=502</span>
<a href="#l3.73"></a><span id="l3.73" class="difflineminus">-    ;;</span>
<a href="#l3.74"></a><span id="l3.74" class="difflineminus">-esac</span>
<a href="#l3.75"></a><span id="l3.75"> </span>
<a href="#l3.76"></a><span id="l3.76"> dnl Target the Windows 7 SDK by default</span>
<a href="#l3.77"></a><span id="l3.77"> WINSDK_TARGETVER=601</span>
<a href="#l3.78"></a><span id="l3.78" class="difflineplus">+WINVER=502</span>
<a href="#l3.79"></a><span id="l3.79"> </span>
<a href="#l3.80"></a><span id="l3.80"> MOZ_ARG_WITH_STRING(windows-version,</span>
<a href="#l3.81"></a><span id="l3.81"> [  --with-windows-version=WINSDK_TARGETVER</span>
<a href="#l3.82"></a><span id="l3.82">                           Highest Windows version to target using this SDK</span>
<a href="#l3.83"></a><span id="l3.83">                               601: Windows 7],</span>
<a href="#l3.84"></a><span id="l3.84">   WINSDK_TARGETVER=$withval)</span>
<a href="#l3.85"></a><span id="l3.85"> </span>
<a href="#l3.86"></a><span id="l3.86"> case &quot;$WINSDK_TARGETVER&quot; in</span>
<a href="#l3.87"></a><span id="l3.87" class="difflineat">@@ -379,17 +334,17 @@ 601)</span>
<a href="#l3.88"></a><span id="l3.88"> </span>
<a href="#l3.89"></a><span id="l3.89"> *)</span>
<a href="#l3.90"></a><span id="l3.90">     AC_MSG_ERROR([Invalid value for --with-windows-version ($WINSDK_TARGETVER), must be 601]);</span>
<a href="#l3.91"></a><span id="l3.91">     ;;</span>
<a href="#l3.92"></a><span id="l3.92"> </span>
<a href="#l3.93"></a><span id="l3.93"> esac</span>
<a href="#l3.94"></a><span id="l3.94"> </span>
<a href="#l3.95"></a><span id="l3.95"> case &quot;$target&quot; in</span>
<a href="#l3.96"></a><span id="l3.96" class="difflineminus">-*-cygwin*|*-mingw*|*-msvc*|*-mks*|*-wince|*-winmo)</span>
<a href="#l3.97"></a><span id="l3.97" class="difflineplus">+*-mingw*)</span>
<a href="#l3.98"></a><span id="l3.98">     if test &quot;$GCC&quot; != &quot;yes&quot;; then</span>
<a href="#l3.99"></a><span id="l3.99">         # Check to see if we are really running in a msvc environemnt</span>
<a href="#l3.100"></a><span id="l3.100">         _WIN32_MSVC=1</span>
<a href="#l3.101"></a><span id="l3.101">         AC_CHECK_PROGS(MIDL, midl)</span>
<a href="#l3.102"></a><span id="l3.102"> </span>
<a href="#l3.103"></a><span id="l3.103">         # Make sure compilers are valid</span>
<a href="#l3.104"></a><span id="l3.104">         CFLAGS=&quot;$CFLAGS -TC -nologo&quot;</span>
<a href="#l3.105"></a><span id="l3.105">         CXXFLAGS=&quot;$CXXFLAGS -TP -nologo&quot;</span>
<a href="#l3.106"></a><span id="l3.106" class="difflineat">@@ -938,17 +893,16 @@ DLL_PREFIX=lib</span>
<a href="#l3.107"></a><span id="l3.107"> LIB_PREFIX=lib</span>
<a href="#l3.108"></a><span id="l3.108"> DLL_SUFFIX=.so</span>
<a href="#l3.109"></a><span id="l3.109"> OBJ_SUFFIX=o</span>
<a href="#l3.110"></a><span id="l3.110"> LIB_SUFFIX=a</span>
<a href="#l3.111"></a><span id="l3.111"> ASM_SUFFIX=s</span>
<a href="#l3.112"></a><span id="l3.112"> IMPORT_LIB_SUFFIX=</span>
<a href="#l3.113"></a><span id="l3.113"> TARGET_MD_ARCH=unix</span>
<a href="#l3.114"></a><span id="l3.114"> DIRENT_INO=d_ino</span>
<a href="#l3.115"></a><span id="l3.115" class="difflineminus">-CYGWIN_WRAPPER=</span>
<a href="#l3.116"></a><span id="l3.116"> MOZ_USER_DIR=&quot;.mozilla&quot;</span>
<a href="#l3.117"></a><span id="l3.117"> </span>
<a href="#l3.118"></a><span id="l3.118"> MOZ_JPEG_CFLAGS=</span>
<a href="#l3.119"></a><span id="l3.119"> MOZ_JPEG_LIBS='$(call EXPAND_LIBNAME_PATH,mozjpeg,$(DEPTH)/mozilla/jpeg)'</span>
<a href="#l3.120"></a><span id="l3.120"> MOZ_ZLIB_CFLAGS=</span>
<a href="#l3.121"></a><span id="l3.121"> MOZ_ZLIB_LIBS='$(call EXPAND_LIBNAME_PATH,mozz,$(DEPTH)/mozilla/modules/zlib/src)'</span>
<a href="#l3.122"></a><span id="l3.122"> MOZ_BZ2_CFLAGS=</span>
<a href="#l3.123"></a><span id="l3.123"> MOZ_BZ2_LIBS='$(call EXPAND_LIBNAME_PATH,bz2,$(DEPTH)/mozilla/modules/libbz2/src)'</span>
<a href="#l3.124"></a><span id="l3.124" class="difflineat">@@ -987,18 +941,16 @@ if test -n &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l3.125"></a><span id="l3.125">     OS_TARGET=&quot;${target_os}&quot;</span>
<a href="#l3.126"></a><span id="l3.126">     OS_ARCH=`echo $target_os | sed -e 's|/|_|g'`</span>
<a href="#l3.127"></a><span id="l3.127">     OS_RELEASE=</span>
<a href="#l3.128"></a><span id="l3.128">     case &quot;${target_os}&quot; in</span>
<a href="#l3.129"></a><span id="l3.129">         linux*)       OS_ARCH=Linux OS_TARGET=Linux ;;</span>
<a href="#l3.130"></a><span id="l3.130">         kfreebsd*-gnu) OS_ARCH=GNU_kFreeBSD OS_TARGET=GNU_kFreeBSD ;;</span>
<a href="#l3.131"></a><span id="l3.131">         solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;</span>
<a href="#l3.132"></a><span id="l3.132">         mingw*)       OS_ARCH=WINNT ;;</span>
<a href="#l3.133"></a><span id="l3.133" class="difflineminus">-        wince*)       OS_ARCH=WINCE ;;</span>
<a href="#l3.134"></a><span id="l3.134" class="difflineminus">-        winmo*)       OS_ARCH=WINCE ;;</span>
<a href="#l3.135"></a><span id="l3.135">         darwin*)      OS_ARCH=Darwin OS_TARGET=Darwin ;;</span>
<a href="#l3.136"></a><span id="l3.136">     esac</span>
<a href="#l3.137"></a><span id="l3.137"> else</span>
<a href="#l3.138"></a><span id="l3.138">     OS_TARGET=`uname -s`</span>
<a href="#l3.139"></a><span id="l3.139">     OS_ARCH=`uname -s | sed -e 's|/|_|g'`</span>
<a href="#l3.140"></a><span id="l3.140">     OS_RELEASE=`uname -r`</span>
<a href="#l3.141"></a><span id="l3.141"> fi</span>
<a href="#l3.142"></a><span id="l3.142"> </span>
<a href="#l3.143"></a><span id="l3.143" class="difflineat">@@ -1023,17 +975,17 @@ HOST_OS_ARCH=`echo $host_os | sed -e 's|</span>
<a href="#l3.144"></a><span id="l3.144"> # OS_ARCH</span>
<a href="#l3.145"></a><span id="l3.145"> # OS_TEST</span>
<a href="#l3.146"></a><span id="l3.146"> # OS_TARGET</span>
<a href="#l3.147"></a><span id="l3.147"> # OS_RELEASE</span>
<a href="#l3.148"></a><span id="l3.148"> # OS_MINOR_RELEASE</span>
<a href="#l3.149"></a><span id="l3.149"> #</span>
<a href="#l3.150"></a><span id="l3.150"> </span>
<a href="#l3.151"></a><span id="l3.151"> case &quot;$HOST_OS_ARCH&quot; in</span>
<a href="#l3.152"></a><span id="l3.152" class="difflineminus">-cygwin*|mingw*|mks*|msvc*)</span>
<a href="#l3.153"></a><span id="l3.153" class="difflineplus">+mingw*)</span>
<a href="#l3.154"></a><span id="l3.154">     HOST_OS_ARCH=WINNT</span>
<a href="#l3.155"></a><span id="l3.155">     ;;</span>
<a href="#l3.156"></a><span id="l3.156"> darwin*)</span>
<a href="#l3.157"></a><span id="l3.157">     HOST_OS_ARCH=Darwin</span>
<a href="#l3.158"></a><span id="l3.158">     ;;</span>
<a href="#l3.159"></a><span id="l3.159"> linux*)</span>
<a href="#l3.160"></a><span id="l3.160">     HOST_OS_ARCH=Linux</span>
<a href="#l3.161"></a><span id="l3.161">     ;;</span>
<a href="#l3.162"></a><span id="l3.162" class="difflineat">@@ -1116,23 +1068,18 @@ Windows_NT)</span>
<a href="#l3.163"></a><span id="l3.163">     OS_ARCH=WINNT</span>
<a href="#l3.164"></a><span id="l3.164">     OS_TARGET=WINNT</span>
<a href="#l3.165"></a><span id="l3.165">     OS_MINOR_RELEASE=`uname -v`</span>
<a href="#l3.166"></a><span id="l3.166">     if test &quot;$OS_MINOR_RELEASE&quot; = &quot;00&quot;; then</span>
<a href="#l3.167"></a><span id="l3.167">         OS_MINOR_RELEASE=0</span>
<a href="#l3.168"></a><span id="l3.168">     fi</span>
<a href="#l3.169"></a><span id="l3.169">     OS_RELEASE=&quot;${OS_RELEASE}.${OS_MINOR_RELEASE}&quot;</span>
<a href="#l3.170"></a><span id="l3.170">     ;;</span>
<a href="#l3.171"></a><span id="l3.171" class="difflineminus">-CYGWIN32_NT|CYGWIN_NT*|MINGW*_NT*)</span>
<a href="#l3.172"></a><span id="l3.172" class="difflineplus">+MINGW*_NT*)</span>
<a href="#l3.173"></a><span id="l3.173"> #</span>
<a href="#l3.174"></a><span id="l3.174" class="difflineminus">-# If uname -s returns &quot;CYGWIN_NT-4.0&quot;, we assume that we are using</span>
<a href="#l3.175"></a><span id="l3.175" class="difflineminus">-# the uname.exe in the Cygwin tools.</span>
<a href="#l3.176"></a><span id="l3.176" class="difflineminus">-# Prior to the Beta 20 release, Cygwin was called GNU-Win32.</span>
<a href="#l3.177"></a><span id="l3.177" class="difflineminus">-# If uname -s returns &quot;CYGWIN32/NT&quot;, we assume that we are using</span>
<a href="#l3.178"></a><span id="l3.178" class="difflineminus">-# the uname.exe in the GNU-Win32 tools.</span>
<a href="#l3.179"></a><span id="l3.179"> # If uname -s returns MINGW32_NT-5.1, we assume that we are using</span>
<a href="#l3.180"></a><span id="l3.180"> # the uname.exe in the MSYS tools.</span>
<a href="#l3.181"></a><span id="l3.181"> #</span>
<a href="#l3.182"></a><span id="l3.182">     OS_RELEASE=`expr $OS_ARCH : '.*NT-\(.*\)'`</span>
<a href="#l3.183"></a><span id="l3.183">     OS_ARCH=WINNT</span>
<a href="#l3.184"></a><span id="l3.184">     OS_TARGET=WINNT</span>
<a href="#l3.185"></a><span id="l3.185">     ;;</span>
<a href="#l3.186"></a><span id="l3.186"> AIX)</span>
<a href="#l3.187"></a><span id="l3.187" class="difflineat">@@ -1200,29 +1147,16 @@ SCO_SV)</span>
<a href="#l3.188"></a><span id="l3.188"> SINIX-N | SINIX-Y | SINIX-Z |ReliantUNIX-M)</span>
<a href="#l3.189"></a><span id="l3.189">     OS_ARCH=SINIX</span>
<a href="#l3.190"></a><span id="l3.190">     OS_TEST=`uname -p`</span>
<a href="#l3.191"></a><span id="l3.191">     ;;</span>
<a href="#l3.192"></a><span id="l3.192"> UnixWare)</span>
<a href="#l3.193"></a><span id="l3.193">     OS_ARCH=UNIXWARE</span>
<a href="#l3.194"></a><span id="l3.194">     OS_RELEASE=`uname -v`</span>
<a href="#l3.195"></a><span id="l3.195">     ;;</span>
<a href="#l3.196"></a><span id="l3.196" class="difflineminus">-WINCE)</span>
<a href="#l3.197"></a><span id="l3.197" class="difflineminus">-    OS_ARCH=WINCE</span>
<a href="#l3.198"></a><span id="l3.198" class="difflineminus">-    case &quot;${target_os}&quot; in</span>
<a href="#l3.199"></a><span id="l3.199" class="difflineminus">-    *winmo)</span>
<a href="#l3.200"></a><span id="l3.200" class="difflineminus">-        OS_TARGET=WINMO</span>
<a href="#l3.201"></a><span id="l3.201" class="difflineminus">-        WINCE_WINDOWS_MOBILE=1</span>
<a href="#l3.202"></a><span id="l3.202" class="difflineminus">-        AC_DEFINE(WINCE_WINDOWS_MOBILE)</span>
<a href="#l3.203"></a><span id="l3.203" class="difflineminus">-        ;;</span>
<a href="#l3.204"></a><span id="l3.204" class="difflineminus">-    *)</span>
<a href="#l3.205"></a><span id="l3.205" class="difflineminus">-        OS_TARGET=WINCE</span>
<a href="#l3.206"></a><span id="l3.206" class="difflineminus">-        ;;</span>
<a href="#l3.207"></a><span id="l3.207" class="difflineminus">-    esac</span>
<a href="#l3.208"></a><span id="l3.208" class="difflineminus">-    ;;</span>
<a href="#l3.209"></a><span id="l3.209"> Darwin)</span>
<a href="#l3.210"></a><span id="l3.210">     case &quot;${target_cpu}&quot; in</span>
<a href="#l3.211"></a><span id="l3.211">     powerpc*)</span>
<a href="#l3.212"></a><span id="l3.212">         OS_TEST=ppc</span>
<a href="#l3.213"></a><span id="l3.213">         ;;</span>
<a href="#l3.214"></a><span id="l3.214">     i*86*)</span>
<a href="#l3.215"></a><span id="l3.215">         OS_TEST=i386 </span>
<a href="#l3.216"></a><span id="l3.216">         ;;</span>
<a href="#l3.217"></a><span id="l3.217" class="difflineat">@@ -1278,21 +1212,18 @@ hppa* | parisc)</span>
<a href="#l3.218"></a><span id="l3.218"> sun4u | sparc*)</span>
<a href="#l3.219"></a><span id="l3.219">     CPU_ARCH=sparc</span>
<a href="#l3.220"></a><span id="l3.220">     ;;</span>
<a href="#l3.221"></a><span id="l3.221"> </span>
<a href="#l3.222"></a><span id="l3.222"> x86_64 | ia64)</span>
<a href="#l3.223"></a><span id="l3.223">     CPU_ARCH=&quot;$OS_TEST&quot;</span>
<a href="#l3.224"></a><span id="l3.224">     ;;</span>
<a href="#l3.225"></a><span id="l3.225"> </span>
<a href="#l3.226"></a><span id="l3.226" class="difflineminus">-arm)</span>
<a href="#l3.227"></a><span id="l3.227" class="difflineminus">-    if test &quot;$OS_TARGET&quot; = &quot;WINCE&quot;; then</span>
<a href="#l3.228"></a><span id="l3.228" class="difflineminus">-        CPU_ARCH=&quot;$OS_TEST&quot;</span>
<a href="#l3.229"></a><span id="l3.229" class="difflineminus">-    fi</span>
<a href="#l3.230"></a><span id="l3.230" class="difflineminus">-    ;;</span>
<a href="#l3.231"></a><span id="l3.231" class="difflineplus">+arm*)</span>
<a href="#l3.232"></a><span id="l3.232" class="difflineplus">+    CPU_ARCH=arm</span>
<a href="#l3.233"></a><span id="l3.233"> esac</span>
<a href="#l3.234"></a><span id="l3.234"> </span>
<a href="#l3.235"></a><span id="l3.235"> if test -z &quot;$OS_TARGET&quot;; then</span>
<a href="#l3.236"></a><span id="l3.236">     OS_TARGET=$OS_ARCH</span>
<a href="#l3.237"></a><span id="l3.237"> fi</span>
<a href="#l3.238"></a><span id="l3.238"> OS_CONFIG=&quot;${OS_TARGET}${OS_RELEASE}&quot;</span>
<a href="#l3.239"></a><span id="l3.239"> </span>
<a href="#l3.240"></a><span id="l3.240"> dnl Set INTEL_ARCHITECTURE if we're compiling for x86-32 or x86-64.</span>
<a href="#l3.241"></a><span id="l3.241" class="difflineat">@@ -1567,49 +1498,33 @@ dnl System overrides of the defaults for</span>
<a href="#l3.242"></a><span id="l3.242"> dnl ========================================================</span>
<a href="#l3.243"></a><span id="l3.243"> case &quot;$host&quot; in</span>
<a href="#l3.244"></a><span id="l3.244"> *-beos*)</span>
<a href="#l3.245"></a><span id="l3.245">     HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_BEOS -DBeOS -DBEOS -D_POSIX_SOURCE -DNO_X11&quot;</span>
<a href="#l3.246"></a><span id="l3.246">     HOST_NSPR_MDCPUCFG='\&quot;md/_beos.cfg\&quot;'</span>
<a href="#l3.247"></a><span id="l3.247">     HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O3}&quot;</span>
<a href="#l3.248"></a><span id="l3.248">     ;;</span>
<a href="#l3.249"></a><span id="l3.249"> </span>
<a href="#l3.250"></a><span id="l3.250" class="difflineminus">-*cygwin*|*mingw*|*mks*|*msvc*|*wince|*winmo)</span>
<a href="#l3.251"></a><span id="l3.251" class="difflineplus">+*mingw*)</span>
<a href="#l3.252"></a><span id="l3.252">     if test -n &quot;$_WIN32_MSVC&quot;; then</span>
<a href="#l3.253"></a><span id="l3.253">         HOST_AR=lib</span>
<a href="#l3.254"></a><span id="l3.254">         HOST_AR_FLAGS='-NOLOGO -OUT:&quot;$@&quot;'</span>
<a href="#l3.255"></a><span id="l3.255">         HOST_CFLAGS=&quot;$HOST_CFLAGS -TC -nologo -Fd\$(HOST_PDBFILE)&quot;</span>
<a href="#l3.256"></a><span id="l3.256">         HOST_RANLIB='echo ranlib'</span>
<a href="#l3.257"></a><span id="l3.257">     else</span>
<a href="#l3.258"></a><span id="l3.258">         HOST_CFLAGS=&quot;$HOST_CFLAGS -mno-cygwin&quot;</span>
<a href="#l3.259"></a><span id="l3.259">     fi</span>
<a href="#l3.260"></a><span id="l3.260">     HOST_CFLAGS=&quot;$HOST_CFLAGS -DXP_WIN32 -DXP_WIN -DWIN32 -D_WIN32 -DNO_X11&quot;</span>
<a href="#l3.261"></a><span id="l3.261">     HOST_NSPR_MDCPUCFG='\&quot;md/_winnt.cfg\&quot;'</span>
<a href="#l3.262"></a><span id="l3.262">     HOST_OPTIMIZE_FLAGS=&quot;${HOST_OPTIMIZE_FLAGS=-O2}&quot;</span>
<a href="#l3.263"></a><span id="l3.263">     HOST_BIN_SUFFIX=.exe</span>
<a href="#l3.264"></a><span id="l3.264">     case &quot;$host&quot; in</span>
<a href="#l3.265"></a><span id="l3.265">     *mingw*)</span>
<a href="#l3.266"></a><span id="l3.266" class="difflineminus">-    dnl MinGW/MSYS does not need CYGWIN_WRAPPER</span>
<a href="#l3.267"></a><span id="l3.267">         PERL=&quot;/bin/sh ${_topsrcdir}/mozilla/build/msys-perl-wrapper&quot;</span>
<a href="#l3.268"></a><span id="l3.268">         ;;</span>
<a href="#l3.269"></a><span id="l3.269" class="difflineminus">-    *)</span>
<a href="#l3.270"></a><span id="l3.270" class="difflineminus">-        CYGWIN_WRAPPER=&quot;${srcdir}/build/cygwin-wrapper&quot;</span>
<a href="#l3.271"></a><span id="l3.271" class="difflineminus">-        if test &quot;`echo ${srcdir} | grep -c ^/ 2&gt;/dev/null`&quot; = 0; then</span>
<a href="#l3.272"></a><span id="l3.272" class="difflineminus">-            _pwd=`pwd`</span>
<a href="#l3.273"></a><span id="l3.273" class="difflineminus">-            CYGWIN_WRAPPER=&quot;${_pwd}/${srcdir}/build/cygwin-wrapper&quot;</span>
<a href="#l3.274"></a><span id="l3.274" class="difflineminus">-        fi</span>
<a href="#l3.275"></a><span id="l3.275" class="difflineminus">-        if test &quot;`${PERL} -v | grep -c cygwin  2&gt;/dev/null`&quot; = 0; then</span>
<a href="#l3.276"></a><span id="l3.276" class="difflineminus">-            AS_PERL=1</span>
<a href="#l3.277"></a><span id="l3.277" class="difflineminus">-            PERL=&quot;${CYGWIN_WRAPPER} $PERL&quot;</span>
<a href="#l3.278"></a><span id="l3.278" class="difflineminus">-        fi</span>
<a href="#l3.279"></a><span id="l3.279" class="difflineminus">-</span>
<a href="#l3.280"></a><span id="l3.280" class="difflineminus">-        if test &quot;`${PYTHON} -c 'import sys; print sys.platform;'`&quot; != &quot;cygwin&quot;; then</span>
<a href="#l3.281"></a><span id="l3.281" class="difflineminus">-            PYTHON=&quot;${CYGWIN_WRAPPER} $PYTHON&quot;</span>
<a href="#l3.282"></a><span id="l3.282" class="difflineminus">-        fi</span>
<a href="#l3.283"></a><span id="l3.283" class="difflineminus">-        ;;</span>
<a href="#l3.284"></a><span id="l3.284">     esac</span>
<a href="#l3.285"></a><span id="l3.285"> </span>
<a href="#l3.286"></a><span id="l3.286">     case &quot;${host_cpu}&quot; in</span>
<a href="#l3.287"></a><span id="l3.287">     x86_64)</span>
<a href="#l3.288"></a><span id="l3.288">         HOST_CFLAGS=&quot;$HOST_CFLAGS -D_AMD64_&quot;</span>
<a href="#l3.289"></a><span id="l3.289">         ;;</span>
<a href="#l3.290"></a><span id="l3.290">     esac</span>
<a href="#l3.291"></a><span id="l3.291">     ;;</span>
<a href="#l3.292"></a><span id="l3.292" class="difflineat">@@ -1940,113 +1855,17 @@ ia64*-hpux*)</span>
<a href="#l3.293"></a><span id="l3.293">     	USE_ELF_DYNSTR_GC=1</span>
<a href="#l3.294"></a><span id="l3.294">     ;;</span>
<a href="#l3.295"></a><span id="l3.295">     mips*)</span>
<a href="#l3.296"></a><span id="l3.296">         MOZ_DEBUG_FLAGS=&quot;-g&quot; # We want inlining</span>
<a href="#l3.297"></a><span id="l3.297">     ;;</span>
<a href="#l3.298"></a><span id="l3.298">     esac</span>
<a href="#l3.299"></a><span id="l3.299">     ;;</span>
<a href="#l3.300"></a><span id="l3.300"> </span>
<a href="#l3.301"></a><span id="l3.301" class="difflineminus">-*-wince*|*-winmo*)</span>
<a href="#l3.302"></a><span id="l3.302" class="difflineminus">-    TARGET_COMPILER_ABI=msvc</span>
<a href="#l3.303"></a><span id="l3.303" class="difflineminus">-    MOZ_TOOLS_DIR=`cd $MOZ_TOOLS &amp;&amp; pwd -W`</span>
<a href="#l3.304"></a><span id="l3.304" class="difflineminus">-    MOZ_BUILD_ROOT=`cd $MOZ_BUILD_ROOT &amp;&amp; pwd -W`</span>
<a href="#l3.305"></a><span id="l3.305" class="difflineminus">-    AR_LIST=&quot;$AR -list&quot;</span>
<a href="#l3.306"></a><span id="l3.306" class="difflineminus">-    AR_EXTRACT=</span>
<a href="#l3.307"></a><span id="l3.307" class="difflineminus">-    AR_DELETE=&quot;$AR d&quot;</span>
<a href="#l3.308"></a><span id="l3.308" class="difflineminus">-    AR_FLAGS='-OUT:&quot;$@&quot;'</span>
<a href="#l3.309"></a><span id="l3.309" class="difflineminus">-</span>
<a href="#l3.310"></a><span id="l3.310" class="difflineminus">-    if test &quot;$AS_BIN&quot;; then</span>
<a href="#l3.311"></a><span id="l3.311" class="difflineminus">-        AS=&quot;$AS_BIN&quot;</span>
<a href="#l3.312"></a><span id="l3.312" class="difflineminus">-    fi</span>
<a href="#l3.313"></a><span id="l3.313" class="difflineminus">-    DSO_CFLAGS=</span>
<a href="#l3.314"></a><span id="l3.314" class="difflineminus">-    DSO_PIC_CFLAGS=</span>
<a href="#l3.315"></a><span id="l3.315" class="difflineminus">-    DLL_SUFFIX=.dll</span>
<a href="#l3.316"></a><span id="l3.316" class="difflineminus">-    BIN_SUFFIX='.exe'</span>
<a href="#l3.317"></a><span id="l3.317" class="difflineminus">-    if test -z &quot;$RC&quot;; then</span>
<a href="#l3.318"></a><span id="l3.318" class="difflineminus">-        RC=rc.exe</span>
<a href="#l3.319"></a><span id="l3.319" class="difflineminus">-    fi</span>
<a href="#l3.320"></a><span id="l3.320" class="difflineminus">-    # certain versions of cygwin's makedepend barf on the </span>
<a href="#l3.321"></a><span id="l3.321" class="difflineminus">-    # #include &lt;string&gt; vs -I./dist/include/string issue so don't use it</span>
<a href="#l3.322"></a><span id="l3.322" class="difflineminus">-    MOZ_NATIVE_MAKEDEPEND=</span>
<a href="#l3.323"></a><span id="l3.323" class="difflineminus">-</span>
<a href="#l3.324"></a><span id="l3.324" class="difflineminus">-    HOST_CC=cl</span>
<a href="#l3.325"></a><span id="l3.325" class="difflineminus">-    HOST_CXX=cl</span>
<a href="#l3.326"></a><span id="l3.326" class="difflineminus">-    HOST_LD=link</span>
<a href="#l3.327"></a><span id="l3.327" class="difflineminus">-    HOST_AR='lib'</span>
<a href="#l3.328"></a><span id="l3.328" class="difflineminus">-    HOST_AR_FLAGS='-OUT:$@'</span>
<a href="#l3.329"></a><span id="l3.329" class="difflineminus">-    HOST_RANLIB='echo ranlib'</span>
<a href="#l3.330"></a><span id="l3.330" class="difflineminus">-    HOST_CFLAGS=&quot;$HOST_CFLAGS -D_X86_&quot;</span>
<a href="#l3.331"></a><span id="l3.331" class="difflineminus">-        </span>
<a href="#l3.332"></a><span id="l3.332" class="difflineminus">-        </span>
<a href="#l3.333"></a><span id="l3.333" class="difflineminus">-    WARNINGS_AS_ERRORS='-WX'</span>
<a href="#l3.334"></a><span id="l3.334" class="difflineminus">-    MOZ_OPTIMIZE_FLAGS='-Ox'</span>
<a href="#l3.335"></a><span id="l3.335" class="difflineminus">-    AR_FLAGS='-NOLOGO -OUT:&quot;$@&quot;'</span>
<a href="#l3.336"></a><span id="l3.336" class="difflineminus">-    ASM_SUFFIX=asm</span>
<a href="#l3.337"></a><span id="l3.337" class="difflineminus">-    CFLAGS=&quot;$CFLAGS -W3 -Gy -Fd\$(COMPILE_PDBFILE)&quot;</span>
<a href="#l3.338"></a><span id="l3.338" class="difflineminus">-    CXXFLAGS=&quot;$CXXFLAGS -W3 -Gy -Fd\$(COMPILE_PDBFILE)&quot;</span>
<a href="#l3.339"></a><span id="l3.339" class="difflineminus">-    DLL_PREFIX=</span>
<a href="#l3.340"></a><span id="l3.340" class="difflineminus">-    DOXYGEN=:</span>
<a href="#l3.341"></a><span id="l3.341" class="difflineminus">-    DSO_LDOPTS=-SUBSYSTEM:WINDOWSCE</span>
<a href="#l3.342"></a><span id="l3.342" class="difflineminus">-    DYNAMIC_XPCOM_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcom_core.lib $(LIBXUL_DIST)/lib/mozalloc.lib'</span>
<a href="#l3.343"></a><span id="l3.343" class="difflineminus">-    GARBAGE=</span>
<a href="#l3.344"></a><span id="l3.344" class="difflineminus">-    IMPORT_LIB_SUFFIX=lib</span>
<a href="#l3.345"></a><span id="l3.345" class="difflineminus">-    dnl Need to force-link against mozalloc because it's used in the shunt</span>
<a href="#l3.346"></a><span id="l3.346" class="difflineminus">-    LIBS=&quot;$LIBS \$(LIBXUL_DIST)/lib/mozalloc.lib&quot;</span>
<a href="#l3.347"></a><span id="l3.347" class="difflineminus">-    LIBXUL_LIBS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xul.lib $(LIBXUL_DIST)/lib/mozalloc.lib'</span>
<a href="#l3.348"></a><span id="l3.348" class="difflineminus">-    LIB_PREFIX=</span>
<a href="#l3.349"></a><span id="l3.349" class="difflineminus">-    LIB_SUFFIX=lib </span>
<a href="#l3.350"></a><span id="l3.350" class="difflineminus">-    MKCSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ $(DSO_LDOPTS)'</span>
<a href="#l3.351"></a><span id="l3.351" class="difflineminus">-    MKSHLIB='$(LD) -NOLOGO -DLL -OUT:$@ $(DSO_LDOPTS)'</span>
<a href="#l3.352"></a><span id="l3.352" class="difflineminus">-    MKSHLIB_FORCE_ALL=</span>
<a href="#l3.353"></a><span id="l3.353" class="difflineminus">-    MKSHLIB_UNFORCE_ALL=</span>
<a href="#l3.354"></a><span id="l3.354" class="difflineminus">-    MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'</span>
<a href="#l3.355"></a><span id="l3.355" class="difflineminus">-    MOZ_COMPONENT_NSPR_LIBS='$(NSPR_LIBS)'</span>
<a href="#l3.356"></a><span id="l3.356" class="difflineminus">-    MOZ_DEBUG_FLAGS='-Zi'</span>
<a href="#l3.357"></a><span id="l3.357" class="difflineminus">-    MOZ_DEBUG_LDFLAGS='-DEBUG -DEBUGTYPE:CV'</span>
<a href="#l3.358"></a><span id="l3.358" class="difflineminus">-    MOZ_FIX_LINK_PATHS=</span>
<a href="#l3.359"></a><span id="l3.359" class="difflineminus">-    MOZ_JS_STATIC_LIBS='$(LIBXUL_DIST)/lib/js_static.lib'</span>
<a href="#l3.360"></a><span id="l3.360" class="difflineminus">-    MOZ_JS_SHARED_LIBS='$(LIBXUL_DIST)/lib/mozjs.lib'</span>
<a href="#l3.361"></a><span id="l3.361" class="difflineminus">-    OBJ_SUFFIX=obj</span>
<a href="#l3.362"></a><span id="l3.362" class="difflineminus">-    RANLIB='echo not_ranlib'</span>
<a href="#l3.363"></a><span id="l3.363" class="difflineminus">-    STRIP='echo not_strip'</span>
<a href="#l3.364"></a><span id="l3.364" class="difflineminus">-    TARGET_NSPR_MDCPUCFG='\&quot;md/_wince.cfg\&quot;'</span>
<a href="#l3.365"></a><span id="l3.365" class="difflineminus">-    UNZIP=unzip</span>
<a href="#l3.366"></a><span id="l3.366" class="difflineminus">-    XARGS=xargs</span>
<a href="#l3.367"></a><span id="l3.367" class="difflineminus">-    XPCOM_FROZEN_LDOPTS='$(LIBXUL_DIST)/lib/xpcom.lib $(LIBXUL_DIST)/lib/xpcom.lib'</span>
<a href="#l3.368"></a><span id="l3.368" class="difflineminus">-    ZIP=zip</span>
<a href="#l3.369"></a><span id="l3.369" class="difflineminus">-    MOZ_TREE_FREETYPE=1</span>
<a href="#l3.370"></a><span id="l3.370" class="difflineminus">-</span>
<a href="#l3.371"></a><span id="l3.371" class="difflineminus">-    AC_DEFINE(HAVE_SNPRINTF)</span>
<a href="#l3.372"></a><span id="l3.372" class="difflineminus">-    AC_DEFINE(_WINDOWS)</span>
<a href="#l3.373"></a><span id="l3.373" class="difflineminus">-    AC_DEFINE(WIN32)</span>
<a href="#l3.374"></a><span id="l3.374" class="difflineminus">-    AC_DEFINE(XP_WIN)</span>
<a href="#l3.375"></a><span id="l3.375" class="difflineminus">-    AC_DEFINE(XP_WIN32)</span>
<a href="#l3.376"></a><span id="l3.376" class="difflineminus">-    AC_DEFINE(HW_THREADS)</span>
<a href="#l3.377"></a><span id="l3.377" class="difflineminus">-    AC_DEFINE(STDC_HEADERS)</span>
<a href="#l3.378"></a><span id="l3.378" class="difflineminus">-    AC_DEFINE(NEW_H, &lt;new&gt;)</span>
<a href="#l3.379"></a><span id="l3.379" class="difflineminus">-    AC_DEFINE(WIN32_LEAN_AND_MEAN)</span>
<a href="#l3.380"></a><span id="l3.380" class="difflineminus">-</span>
<a href="#l3.381"></a><span id="l3.381" class="difflineminus">-    TARGET_MD_ARCH=win32</span>
<a href="#l3.382"></a><span id="l3.382" class="difflineminus">-    _PLATFORM_DEFAULT_TOOLKIT='cairo-windows'</span>
<a href="#l3.383"></a><span id="l3.383" class="difflineminus">-    BIN_SUFFIX='.exe'</span>
<a href="#l3.384"></a><span id="l3.384" class="difflineminus">-    MOZ_USER_DIR=&quot;Mozilla&quot;</span>
<a href="#l3.385"></a><span id="l3.385" class="difflineminus">-</span>
<a href="#l3.386"></a><span id="l3.386" class="difflineminus">-    MOZ_GFX_OPTIMIZE_MOBILE=1</span>
<a href="#l3.387"></a><span id="l3.387" class="difflineminus">-</span>
<a href="#l3.388"></a><span id="l3.388" class="difflineminus">-    # Sanity check for WINCE_WINDOWS_MOBILE</span>
<a href="#l3.389"></a><span id="l3.389" class="difflineminus">-    # XXX disabled until we can fix the mobile tinderbox</span>
<a href="#l3.390"></a><span id="l3.390" class="difflineminus">-    ##if test &quot;$WINCE_WINDOWS_MOBILE&quot;; then</span>
<a href="#l3.391"></a><span id="l3.391" class="difflineminus">-    ##   AC_CHECK_HEADER(tpcshell.h, [],</span>
<a href="#l3.392"></a><span id="l3.392" class="difflineminus">-    ##        AC_MSG_ERROR([Can't find tpcshell.h in your SDK; are you sure you don't need --disable-windows-mobile-components?]))</span>
<a href="#l3.393"></a><span id="l3.393" class="difflineminus">-    ##fi</span>
<a href="#l3.394"></a><span id="l3.394" class="difflineminus">-;;</span>
<a href="#l3.395"></a><span id="l3.395" class="difflineminus">-</span>
<a href="#l3.396"></a><span id="l3.396" class="difflineminus">-</span>
<a href="#l3.397"></a><span id="l3.397" class="difflineminus">-*-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l3.398"></a><span id="l3.398" class="difflineplus">+*-mingw*)</span>
<a href="#l3.399"></a><span id="l3.399">     DSO_CFLAGS=</span>
<a href="#l3.400"></a><span id="l3.400">     DSO_PIC_CFLAGS=</span>
<a href="#l3.401"></a><span id="l3.401">     DLL_SUFFIX=.dll</span>
<a href="#l3.402"></a><span id="l3.402">     RC=rc.exe</span>
<a href="#l3.403"></a><span id="l3.403">     # certain versions of cygwin's makedepend barf on the </span>
<a href="#l3.404"></a><span id="l3.404">     # #include &lt;string&gt; vs -I./dist/include/string issue so don't use it</span>
<a href="#l3.405"></a><span id="l3.405">     MOZ_NATIVE_MAKEDEPEND=</span>
<a href="#l3.406"></a><span id="l3.406">     if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l3.407"></a><span id="l3.407" class="difflineat">@@ -2152,52 +1971,44 @@ ia64*-hpux*)</span>
<a href="#l3.408"></a><span id="l3.408"> </span>
<a href="#l3.409"></a><span id="l3.409">     dnl Hardcode to win95 for now - cls</span>
<a href="#l3.410"></a><span id="l3.410">     TARGET_NSPR_MDCPUCFG='\&quot;md/_win95.cfg\&quot;'</span>
<a href="#l3.411"></a><span id="l3.411"> </span>
<a href="#l3.412"></a><span id="l3.412">     dnl set NO_X11 defines here as the general check is skipped on win32</span>
<a href="#l3.413"></a><span id="l3.413">     no_x=yes</span>
<a href="#l3.414"></a><span id="l3.414">     AC_DEFINE(NO_X11)</span>
<a href="#l3.415"></a><span id="l3.415"> </span>
<a href="#l3.416"></a><span id="l3.416" class="difflineminus">-    dnl MinGW/MSYS doesn't provide or need cygpath</span>
<a href="#l3.417"></a><span id="l3.417">     case &quot;$host&quot; in</span>
<a href="#l3.418"></a><span id="l3.418">     *-mingw*)</span>
<a href="#l3.419"></a><span id="l3.419" class="difflineminus">-	CYGPATH_W=echo</span>
<a href="#l3.420"></a><span id="l3.420" class="difflineminus">-	CYGPATH_S=cat</span>
<a href="#l3.421"></a><span id="l3.421"> 	MOZ_BUILD_ROOT=`cd $MOZ_BUILD_ROOT &amp;&amp; pwd -W`</span>
<a href="#l3.422"></a><span id="l3.422"> 	;;</span>
<a href="#l3.423"></a><span id="l3.423" class="difflineminus">-    *-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l3.424"></a><span id="l3.424" class="difflineminus">-	CYGPATH_W=&quot;cygpath -a -w&quot;</span>
<a href="#l3.425"></a><span id="l3.425" class="difflineminus">-	CYGPATH_S=&quot;sed -e s|\\\\|/|g&quot;</span>
<a href="#l3.426"></a><span id="l3.426" class="difflineminus">-	MOZ_BUILD_ROOT=`$CYGPATH_W $MOZ_BUILD_ROOT | $CYGPATH_S`</span>
<a href="#l3.427"></a><span id="l3.427" class="difflineminus">-	;;</span>
<a href="#l3.428"></a><span id="l3.428">     esac</span>
<a href="#l3.429"></a><span id="l3.429" class="difflineplus">+</span>
<a href="#l3.430"></a><span id="l3.430">     case &quot;$host&quot; in</span>
<a href="#l3.431"></a><span id="l3.431" class="difflineminus">-    *-mingw*|*-cygwin*|*-msvc*|*-mks*)</span>
<a href="#l3.432"></a><span id="l3.432" class="difflineplus">+    *-mingw*)</span>
<a href="#l3.433"></a><span id="l3.433"> </span>
<a href="#l3.434"></a><span id="l3.434">     if test -z &quot;$MOZ_TOOLS&quot;; then</span>
<a href="#l3.435"></a><span id="l3.435">         AC_MSG_ERROR([MOZ_TOOLS is not set])</span>
<a href="#l3.436"></a><span id="l3.436">     fi</span>
<a href="#l3.437"></a><span id="l3.437"> </span>
<a href="#l3.438"></a><span id="l3.438">     MOZ_TOOLS_DIR=`cd $MOZ_TOOLS &amp;&amp; pwd -W`</span>
<a href="#l3.439"></a><span id="l3.439">     if test &quot;$?&quot; != &quot;0&quot; -o -z &quot;$MOZ_TOOLS_DIR&quot;; then</span>
<a href="#l3.440"></a><span id="l3.440">         AC_MSG_ERROR([cd \$MOZ_TOOLS failed. MOZ_TOOLS ==? $MOZ_TOOLS])</span>
<a href="#l3.441"></a><span id="l3.441">     fi</span>
<a href="#l3.442"></a><span id="l3.442">     MOZ_TOOLS_BIN_DIR=&quot;$(cd &quot;$MOZ_TOOLS_DIR/bin&quot; &amp;&amp; pwd)&quot;</span>
<a href="#l3.443"></a><span id="l3.443">     if test `echo ${PATH}: | grep -ic &quot;$MOZ_TOOLS_BINDIR:&quot;` = 0; then</span>
<a href="#l3.444"></a><span id="l3.444">         AC_MSG_ERROR([\$MOZ_TOOLS\\bin must be in your path.])</span>
<a href="#l3.445"></a><span id="l3.445">     fi</span>
<a href="#l3.446"></a><span id="l3.446" class="difflineminus">-    MOZ_TOOLS_DIR=`$CYGPATH_W $MOZ_TOOLS_DIR | $CYGPATH_S`</span>
<a href="#l3.447"></a><span id="l3.447">     ;;</span>
<a href="#l3.448"></a><span id="l3.448">     esac </span>
<a href="#l3.449"></a><span id="l3.449"> </span>
<a href="#l3.450"></a><span id="l3.450"> </span>
<a href="#l3.451"></a><span id="l3.451">     case &quot;$host_os&quot; in</span>
<a href="#l3.452"></a><span id="l3.452">     cygwin*|msvc*|mks*)</span>
<a href="#l3.453"></a><span id="l3.453" class="difflineminus">-        AC_MSG_WARN([Using a cygwin build environment is unsupported. Configure cannot check for the presence of necessary headers. Please upgrade to MozillaBuild; see https://developer.mozilla.org/en/Windows_Build_Prerequisites.])</span>
<a href="#l3.454"></a><span id="l3.454" class="difflineplus">+        AC_MSG_ERROR([Using a cygwin build environment is unsupported. Configure cannot check for presence of necessary headers. Please upgrade to MozillaBuild; see https://developer.mozilla.org/en/Windows_Build_Prerequisites.])</span>
<a href="#l3.455"></a><span id="l3.455">         ;;</span>
<a href="#l3.456"></a><span id="l3.456">     esac</span>
<a href="#l3.457"></a><span id="l3.457"> </span>
<a href="#l3.458"></a><span id="l3.458">     case &quot;$target&quot; in</span>
<a href="#l3.459"></a><span id="l3.459">     i*86-*)</span>
<a href="#l3.460"></a><span id="l3.460">         if test &quot;$HAVE_64BIT_OS&quot;; then</span>
<a href="#l3.461"></a><span id="l3.461">             AC_MSG_ERROR([You are targeting i386 but using the 64-bit compiler.])</span>
<a href="#l3.462"></a><span id="l3.462">         fi</span>
<a href="#l3.463"></a><span id="l3.463" class="difflineat">@@ -2558,17 +2369,17 @@ case &quot;$target&quot; in</span>
<a href="#l3.464"></a><span id="l3.464">     NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l3.465"></a><span id="l3.465">     ;;</span>
<a href="#l3.466"></a><span id="l3.466"> *-aix4.3*|*-aix5*)</span>
<a href="#l3.467"></a><span id="l3.467">     NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l3.468"></a><span id="l3.468">     ;;</span>
<a href="#l3.469"></a><span id="l3.469"> *-openvms*)</span>
<a href="#l3.470"></a><span id="l3.470">     NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l3.471"></a><span id="l3.471">     ;;</span>
<a href="#l3.472"></a><span id="l3.472" class="difflineminus">-*-msvc*|*-mks*|*-mingw*|*-cygwin*|*-wince|*-winmo)</span>
<a href="#l3.473"></a><span id="l3.473" class="difflineplus">+*-mingw*)</span>
<a href="#l3.474"></a><span id="l3.474">     if test -z &quot;$GNU_CC&quot;; then</span>
<a href="#l3.475"></a><span id="l3.475">         NO_LD_ARCHIVE_FLAGS=</span>
<a href="#l3.476"></a><span id="l3.476">     fi</span>
<a href="#l3.477"></a><span id="l3.477">     ;;</span>
<a href="#l3.478"></a><span id="l3.478"> esac</span>
<a href="#l3.479"></a><span id="l3.479"> AC_SUBST(NO_LD_ARCHIVE_FLAGS)</span>
<a href="#l3.480"></a><span id="l3.480"> </span>
<a href="#l3.481"></a><span id="l3.481"> dnl ========================================================</span>
<a href="#l3.482"></a><span id="l3.482" class="difflineat">@@ -2590,17 +2401,17 @@ case &quot;$target&quot; in</span>
<a href="#l3.483"></a><span id="l3.483">         fi</span>
<a href="#l3.484"></a><span id="l3.484">         ;;</span>
<a href="#l3.485"></a><span id="l3.485">     *-nto*) </span>
<a href="#l3.486"></a><span id="l3.486">         MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'</span>
<a href="#l3.487"></a><span id="l3.487">         ;;</span>
<a href="#l3.488"></a><span id="l3.488">     *-darwin*)</span>
<a href="#l3.489"></a><span id="l3.489">         MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,-exported_symbols_list -Wl,$(BUILD_TOOLS)/gnu-ld-scripts/components-export-list'</span>
<a href="#l3.490"></a><span id="l3.490">         ;;</span>
<a href="#l3.491"></a><span id="l3.491" class="difflineminus">-    *-cygwin*|*-mingw*|*-mks*|*-msvc|*-wince|*-winmo)</span>
<a href="#l3.492"></a><span id="l3.492" class="difflineplus">+    *-mingw*)</span>
<a href="#l3.493"></a><span id="l3.493">         if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l3.494"></a><span id="l3.494">            MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS='-Wl,--version-script,$(BUILD_TOOLS)/gnu-ld-scripts/components-version-script'</span>
<a href="#l3.495"></a><span id="l3.495">         fi</span>
<a href="#l3.496"></a><span id="l3.496">         ;;</span>
<a href="#l3.497"></a><span id="l3.497"> esac</span>
<a href="#l3.498"></a><span id="l3.498"> </span>
<a href="#l3.499"></a><span id="l3.499"> if test -z &quot;$COMPILE_ENVIRONMENT&quot;; then</span>
<a href="#l3.500"></a><span id="l3.500">     SKIP_COMPILER_CHECKS=1</span>
<a href="#l3.501"></a><span id="l3.501" class="difflineat">@@ -3372,17 +3183,17 @@ AC_CACHE_CHECK(</span>
<a href="#l3.502"></a><span id="l3.502">         )]</span>
<a href="#l3.503"></a><span id="l3.503">     )</span>
<a href="#l3.504"></a><span id="l3.504"> </span>
<a href="#l3.505"></a><span id="l3.505"> if test &quot;$ac_cv_func_gnu_get_libc_version&quot; = &quot;yes&quot;; then</span>
<a href="#l3.506"></a><span id="l3.506">     AC_DEFINE(HAVE_GNU_GET_LIBC_VERSION)</span>
<a href="#l3.507"></a><span id="l3.507"> fi</span>
<a href="#l3.508"></a><span id="l3.508"> </span>
<a href="#l3.509"></a><span id="l3.509"> case $target_os in</span>
<a href="#l3.510"></a><span id="l3.510" class="difflineminus">-    os2*|msvc*|mks*|cygwin*|mingw*|darwin*|wince*|winmo*|beos*)</span>
<a href="#l3.511"></a><span id="l3.511" class="difflineplus">+    os2*|mingw*|darwin*|beos*)</span>
<a href="#l3.512"></a><span id="l3.512">         ;;</span>
<a href="#l3.513"></a><span id="l3.513">     *)</span>
<a href="#l3.514"></a><span id="l3.514">     </span>
<a href="#l3.515"></a><span id="l3.515"> AC_CHECK_LIB(c, iconv, [_ICONV_LIBS=&quot;$_ICONV_LIBS&quot;],</span>
<a href="#l3.516"></a><span id="l3.516">     AC_CHECK_LIB(iconv, iconv, [_ICONV_LIBS=&quot;$_ICONV_LIBS -liconv&quot;],</span>
<a href="#l3.517"></a><span id="l3.517">         AC_CHECK_LIB(iconv, libiconv, [_ICONV_LIBS=&quot;$_ICONV_LIBS -liconv&quot;])))</span>
<a href="#l3.518"></a><span id="l3.518"> _SAVE_LIBS=$LIBS</span>
<a href="#l3.519"></a><span id="l3.519"> LIBS=&quot;$LIBS $_ICONV_LIBS&quot;</span>
<a href="#l3.520"></a><span id="l3.520" class="difflineat">@@ -4080,20 +3891,17 @@ if test -n &quot;$MOZ_NATIVE_NSPR&quot;; then</span>
<a href="#l3.521"></a><span id="l3.521">     AC_TRY_COMPILE([#include &quot;prlog.h&quot;],</span>
<a href="#l3.522"></a><span id="l3.522">                 [#ifndef PR_STATIC_ASSERT</span>
<a href="#l3.523"></a><span id="l3.523">                  #error PR_STATIC_ASSERT not defined</span>
<a href="#l3.524"></a><span id="l3.524">                  #endif],</span>
<a href="#l3.525"></a><span id="l3.525">                 [MOZ_NATIVE_NSPR=1],</span>
<a href="#l3.526"></a><span id="l3.526">                 AC_MSG_ERROR([system NSPR does not support PR_STATIC_ASSERT]))</span>
<a href="#l3.527"></a><span id="l3.527">     CFLAGS=$_SAVE_CFLAGS</span>
<a href="#l3.528"></a><span id="l3.528"> else</span>
<a href="#l3.529"></a><span id="l3.529" class="difflineminus">-    if test &quot;$OS_ARCH&quot; = &quot;WINCE&quot;; then</span>
<a href="#l3.530"></a><span id="l3.530" class="difflineminus">-        NSPR_CFLAGS=&quot;-I${LIBXUL_DIST}/include/nspr&quot;</span>
<a href="#l3.531"></a><span id="l3.531" class="difflineminus">-        NSPR_LIBS=&quot;${LIBXUL_DIST}/lib/nspr${NSPR_VERSION}.lib ${LIBXUL_DIST}/lib/plc${NSPR_VERSION}.lib ${LIBXUL_DIST}/lib/plds${NSPR_VERSION}.lib &quot;</span>
<a href="#l3.532"></a><span id="l3.532" class="difflineminus">-    elif test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l3.533"></a><span id="l3.533" class="difflineplus">+    if test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l3.534"></a><span id="l3.534">         NSPR_CFLAGS=&quot;-I${LIBXUL_DIST}/include/nspr&quot;</span>
<a href="#l3.535"></a><span id="l3.535">         if test -n &quot;$GNU_CC&quot;; then</span>
<a href="#l3.536"></a><span id="l3.536">             NSPR_LIBS=&quot;-L${LIBXUL_DIST}/lib -lnspr${NSPR_VERSION} -lplc${NSPR_VERSION} -lplds${NSPR_VERSION}&quot;</span>
<a href="#l3.537"></a><span id="l3.537">         else</span>
<a href="#l3.538"></a><span id="l3.538">             NSPR_LIBS=&quot;${LIBXUL_DIST}/lib/nspr${NSPR_VERSION}.lib ${LIBXUL_DIST}/lib/plc${NSPR_VERSION}.lib ${LIBXUL_DIST}/lib/plds${NSPR_VERSION}.lib &quot;</span>
<a href="#l3.539"></a><span id="l3.539">         fi</span>
<a href="#l3.540"></a><span id="l3.540">     else</span>
<a href="#l3.541"></a><span id="l3.541">         NSPR_CFLAGS='`$(LIBXUL_DIST)/sdk/bin/nspr-config --prefix='${LIBXUL_DIST}' --includedir='${LIBXUL_DIST}'/include/nspr --cflags`'</span>
<a href="#l3.542"></a><span id="l3.542" class="difflineat">@@ -4120,17 +3928,17 @@ else</span>
<a href="#l3.543"></a><span id="l3.543">    NSS_CFLAGS='-I$(LIBXUL_DIST)/include/nss'</span>
<a href="#l3.544"></a><span id="l3.544">    NSS_DEP_LIBS=&quot;\</span>
<a href="#l3.545"></a><span id="l3.545">         \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)crmf.\$(LIB_SUFFIX) \</span>
<a href="#l3.546"></a><span id="l3.546">         \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)smime$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l3.547"></a><span id="l3.547">         \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)ssl$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l3.548"></a><span id="l3.548">         \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)nss$NSS_VERSION\$(DLL_SUFFIX) \</span>
<a href="#l3.549"></a><span id="l3.549">         \$(LIBXUL_DIST)/lib/\$(DLL_PREFIX)nssutil$NSS_VERSION\$(DLL_SUFFIX)&quot;</span>
<a href="#l3.550"></a><span id="l3.550"> </span>
<a href="#l3.551"></a><span id="l3.551" class="difflineminus">-   if test -z &quot;$GNU_CC&quot; -a &quot;$OS_ARCH&quot; = &quot;WINNT&quot; -o &quot;$OS_ARCH&quot; = &quot;WINCE&quot; -o &quot;$OS_ARCH&quot; = &quot;OS2&quot;; then</span>
<a href="#l3.552"></a><span id="l3.552" class="difflineplus">+   if test -z &quot;$GNU_CC&quot; -a &quot;$OS_ARCH&quot; = &quot;WINNT&quot; -o &quot;$OS_ARCH&quot; = &quot;OS2&quot;; then</span>
<a href="#l3.553"></a><span id="l3.553">        NSS_LIBS=&quot;\</span>
<a href="#l3.554"></a><span id="l3.554">         \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)crmf.\$(LIB_SUFFIX) \</span>
<a href="#l3.555"></a><span id="l3.555">         \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)smime$NSS_VERSION.\$(LIB_SUFFIX) \</span>
<a href="#l3.556"></a><span id="l3.556">         \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)ssl$NSS_VERSION.\$(LIB_SUFFIX) \</span>
<a href="#l3.557"></a><span id="l3.557">         \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)nss$NSS_VERSION.\$(LIB_SUFFIX) \</span>
<a href="#l3.558"></a><span id="l3.558">         \$(LIBXUL_DIST)/lib/\$(LIB_PREFIX)nssutil$NSS_VERSION.\$(LIB_SUFFIX)&quot;</span>
<a href="#l3.559"></a><span id="l3.559">    else</span>
<a href="#l3.560"></a><span id="l3.560">        NSS_LIBS='$(LIBS_DIR)'&quot; -lcrmf -lsmime$NSS_VERSION -lssl$NSS_VERSION -lnss$NSS_VERSION -lnssutil$NSS_VERSION&quot;</span>
<a href="#l3.561"></a><span id="l3.561" class="difflineat">@@ -4318,17 +4126,16 @@ MOZ_BRANDING_DIRECTORY=</span>
<a href="#l3.562"></a><span id="l3.562"> MOZ_OFFICIAL_BRANDING=</span>
<a href="#l3.563"></a><span id="l3.563"> MOZ_CALENDAR=</span>
<a href="#l3.564"></a><span id="l3.564"> MOZ_FEEDS=1</span>
<a href="#l3.565"></a><span id="l3.565"> MOZ_JSDEBUGGER=1</span>
<a href="#l3.566"></a><span id="l3.566"> MOZ_LDAP_XPCOM=</span>
<a href="#l3.567"></a><span id="l3.567"> MOZ_MORK=</span>
<a href="#l3.568"></a><span id="l3.568"> MOZ_MORKREADER=1</span>
<a href="#l3.569"></a><span id="l3.569"> MOZ_AUTH_EXTENSION=1</span>
<a href="#l3.570"></a><span id="l3.570" class="difflineminus">-MOZ_NO_ACTIVEX_SUPPORT=1</span>
<a href="#l3.571"></a><span id="l3.571"> MOZ_NO_FAST_LOAD=</span>
<a href="#l3.572"></a><span id="l3.572"> MOZ_OGG=1</span>
<a href="#l3.573"></a><span id="l3.573"> MOZ_SYDNEYAUDIO=</span>
<a href="#l3.574"></a><span id="l3.574"> MOZ_WAVE=1</span>
<a href="#l3.575"></a><span id="l3.575"> MOZ_PANGO=1</span>
<a href="#l3.576"></a><span id="l3.576"> MOZ_PERMISSIONS=1</span>
<a href="#l3.577"></a><span id="l3.577"> MOZ_PLACES=1</span>
<a href="#l3.578"></a><span id="l3.578"> MOZ_PLAINTEXT_EDITOR_ONLY=</span>
<a href="#l3.579"></a><span id="l3.579" class="difflineat">@@ -4359,24 +4166,16 @@ case &quot;$target_os&quot; in</span>
<a href="#l3.580"></a><span id="l3.580"> darwin*)</span>
<a href="#l3.581"></a><span id="l3.581">     ACCESSIBILITY=</span>
<a href="#l3.582"></a><span id="l3.582">     ;;</span>
<a href="#l3.583"></a><span id="l3.583"> *)</span>
<a href="#l3.584"></a><span id="l3.584">     ACCESSIBILITY=1</span>
<a href="#l3.585"></a><span id="l3.585">     ;;</span>
<a href="#l3.586"></a><span id="l3.586"> esac</span>
<a href="#l3.587"></a><span id="l3.587"> </span>
<a href="#l3.588"></a><span id="l3.588" class="difflineminus">-case &quot;$target_os&quot; in</span>
<a href="#l3.589"></a><span id="l3.589" class="difflineminus">-    msvc*|mks*|cygwin*|mingw*)</span>
<a href="#l3.590"></a><span id="l3.590" class="difflineminus">-        if test -z &quot;$GNU_CC&quot;; then </span>
<a href="#l3.591"></a><span id="l3.591" class="difflineminus">-            MOZ_NO_ACTIVEX_SUPPORT=</span>
<a href="#l3.592"></a><span id="l3.592" class="difflineminus">-        fi</span>
<a href="#l3.593"></a><span id="l3.593" class="difflineminus">-        ;;</span>
<a href="#l3.594"></a><span id="l3.594" class="difflineminus">-esac</span>
<a href="#l3.595"></a><span id="l3.595" class="difflineminus">-</span>
<a href="#l3.596"></a><span id="l3.596"> MOZ_ARG_ENABLE_STRING(application,</span>
<a href="#l3.597"></a><span id="l3.597"> [  --enable-application=APP</span>
<a href="#l3.598"></a><span id="l3.598">                           Options include:</span>
<a href="#l3.599"></a><span id="l3.599">                             suite (SeaMonkey)</span>
<a href="#l3.600"></a><span id="l3.600">                             mail (Thunderbird)</span>
<a href="#l3.601"></a><span id="l3.601">                             calendar (Sunbird)],</span>
<a href="#l3.602"></a><span id="l3.602"> [ MOZ_BUILD_APP=$enableval ] )</span>
<a href="#l3.603"></a><span id="l3.603"> </span>
<a href="#l3.604"></a><span id="l3.604" class="difflineat">@@ -5206,40 +5005,48 @@ MOZ_ARG_ENABLE_BOOL(tree-freetype,</span>
<a href="#l3.605"></a><span id="l3.605"> if test -n &quot;$MOZ_TREE_FREETYPE&quot;; then</span>
<a href="#l3.606"></a><span id="l3.606">    CAIRO_FT_LIBS='$(call EXPAND_LIBNAME_PATH,freetype2,$(LIBXUL_DIST)/lib)'</span>
<a href="#l3.607"></a><span id="l3.607"> fi</span>
<a href="#l3.608"></a><span id="l3.608"> </span>
<a href="#l3.609"></a><span id="l3.609"> dnl ========================================================</span>
<a href="#l3.610"></a><span id="l3.610"> dnl Installer</span>
<a href="#l3.611"></a><span id="l3.611"> dnl ========================================================</span>
<a href="#l3.612"></a><span id="l3.612"> dnl Abort Windows build if the required major version and</span>
<a href="#l3.613"></a><span id="l3.613" class="difflineminus">-dnl minimum minor version of Unicode NSIS isn't in the path.</span>
<a href="#l3.614"></a><span id="l3.614" class="difflineplus">+dnl minimum minor version of Unicode NSIS isn't in the path</span>
<a href="#l3.615"></a><span id="l3.615" class="difflineplus">+dnl (unless in case of cross compiling, for which Unicode</span>
<a href="#l3.616"></a><span id="l3.616" class="difflineplus">+dnl is not yet sufficient).</span>
<a href="#l3.617"></a><span id="l3.617"> if test &quot;$OS_ARCH&quot; = &quot;WINNT&quot;; then</span>
<a href="#l3.618"></a><span id="l3.618">     REQ_NSIS_MAJOR_VER=2</span>
<a href="#l3.619"></a><span id="l3.619">     MIN_NSIS_MINOR_VER=33</span>
<a href="#l3.620"></a><span id="l3.620">     MOZ_PATH_PROGS(MAKENSISU, $MAKENSISU makensisu-2.46 makensisu makensis)</span>
<a href="#l3.621"></a><span id="l3.621" class="difflineminus">-    if test -z &quot;$MAKENSISU&quot; -o &quot;$MAKENSISU&quot; = &quot;:&quot;; then</span>
<a href="#l3.622"></a><span id="l3.622" class="difflineplus">+    if test -n &quot;$MAKENSISU&quot; -o &quot;$MAKENSISU&quot; = &quot;:&quot;; then</span>
<a href="#l3.623"></a><span id="l3.623" class="difflineplus">+        AC_MSG_RESULT([yes])</span>
<a href="#l3.624"></a><span id="l3.624" class="difflineplus">+        changequote(,)</span>
<a href="#l3.625"></a><span id="l3.625" class="difflineplus">+        MAKENSISU_VER=`&quot;$MAKENSISU&quot; -version 2&gt;/dev/null | sed -e '/-Unicode/!s/.*//g' -e 's/^v\([0-9]\+\.[0-9]\+\)\-Unicode$/\1/g'`</span>
<a href="#l3.626"></a><span id="l3.626" class="difflineplus">+        changequote([,])</span>
<a href="#l3.627"></a><span id="l3.627" class="difflineplus">+        if test ! &quot;$MAKENSISU_VER&quot; = &quot;&quot;; then</span>
<a href="#l3.628"></a><span id="l3.628" class="difflineplus">+            MAKENSISU_MAJOR_VER=`echo $MAKENSISU_VER | $AWK -F\. '{ print $1 }'`</span>
<a href="#l3.629"></a><span id="l3.629" class="difflineplus">+            MAKENSISU_MINOR_VER=`echo $MAKENSISU_VER | $AWK -F\. '{ print $2 }'`</span>
<a href="#l3.630"></a><span id="l3.630" class="difflineplus">+        fi</span>
<a href="#l3.631"></a><span id="l3.631" class="difflineplus">+        AC_MSG_CHECKING([for Unicode NSIS with major version == $REQ_NSIS_MAJOR_VER and minor version &gt;= $MIN_NSIS_MINOR_VER])</span>
<a href="#l3.632"></a><span id="l3.632" class="difflineplus">+        if test &quot;$MAKENSISU_VER&quot; = &quot;&quot; ||</span>
<a href="#l3.633"></a><span id="l3.633" class="difflineplus">+            test ! &quot;$MAKENSISU_MAJOR_VER&quot; = &quot;$REQ_NSIS_MAJOR_VER&quot; -o \</span>
<a href="#l3.634"></a><span id="l3.634" class="difflineplus">+                 ! &quot;$MAKENSISU_MINOR_VER&quot; -ge $MIN_NSIS_MINOR_VER; then</span>
<a href="#l3.635"></a><span id="l3.635" class="difflineplus">+            AC_MSG_RESULT([no])</span>
<a href="#l3.636"></a><span id="l3.636" class="difflineplus">+            if test -z &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l3.637"></a><span id="l3.637" class="difflineplus">+                AC_MSG_ERROR([To build the installer you must have the latest MozillaBuild or Unicode NSIS with a major version of $REQ_NSIS_MAJOR_VER and a minimum minor version of $MIN_NSIS_MINOR_VER in your path.])</span>
<a href="#l3.638"></a><span id="l3.638" class="difflineplus">+            else</span>
<a href="#l3.639"></a><span id="l3.639" class="difflineplus">+                MAKENSISU=</span>
<a href="#l3.640"></a><span id="l3.640" class="difflineplus">+            fi</span>
<a href="#l3.641"></a><span id="l3.641" class="difflineplus">+        fi</span>
<a href="#l3.642"></a><span id="l3.642" class="difflineplus">+    elif test -z &quot;$CROSS_COMPILE&quot;; then</span>
<a href="#l3.643"></a><span id="l3.643">         AC_MSG_ERROR([To build the installer you must have the latest MozillaBuild or Unicode NSIS with a major version of $REQ_NSIS_MAJOR_VER and a minimum minor version of $MIN_NSIS_MINOR_VER in your path.])</span>
<a href="#l3.644"></a><span id="l3.644" class="difflineminus">-    fi</span>
<a href="#l3.645"></a><span id="l3.645" class="difflineminus">-    changequote(,)</span>
<a href="#l3.646"></a><span id="l3.646" class="difflineminus">-    MAKENSISU_VER=`&quot;$MAKENSISU&quot; -version 2&gt;/dev/null | sed -e '/-Unicode/!s/.*//g' -e 's/^v\([0-9]\+\.[0-9]\+\)\-Unicode$/\1/g'`</span>
<a href="#l3.647"></a><span id="l3.647" class="difflineminus">-    changequote([,])</span>
<a href="#l3.648"></a><span id="l3.648" class="difflineminus">-    if test ! &quot;$MAKENSISU_VER&quot; = &quot;&quot;; then</span>
<a href="#l3.649"></a><span id="l3.649" class="difflineminus">-        MAKENSISU_MAJOR_VER=`echo $MAKENSISU_VER | $AWK -F\. '{ print $1 }'`</span>
<a href="#l3.650"></a><span id="l3.650" class="difflineminus">-        MAKENSISU_MINOR_VER=`echo $MAKENSISU_VER | $AWK -F\. '{ print $2 }'`</span>
<a href="#l3.651"></a><span id="l3.651" class="difflineplus">+    else</span>
<a href="#l3.652"></a><span id="l3.652" class="difflineplus">+        MAKENSISU=</span>
<a href="#l3.653"></a><span id="l3.653">     fi</span>
<a href="#l3.654"></a><span id="l3.654" class="difflineminus">-    AC_MSG_CHECKING([for Unicode NSIS with major version == $REQ_NSIS_MAJOR_VER and minor version &gt;= $MIN_NSIS_MINOR_VER])</span>
<a href="#l3.655"></a><span id="l3.655" class="difflineminus">-    if test &quot;$MAKENSISU_VER&quot; = &quot;&quot; ||</span>
<a href="#l3.656"></a><span id="l3.656" class="difflineminus">-       test ! &quot;$MAKENSISU_MAJOR_VER&quot; = &quot;$REQ_NSIS_MAJOR_VER&quot; -o \</span>
<a href="#l3.657"></a><span id="l3.657" class="difflineminus">-            ! &quot;$MAKENSISU_MINOR_VER&quot; -ge $MIN_NSIS_MINOR_VER; then</span>
<a href="#l3.658"></a><span id="l3.658" class="difflineminus">-        AC_MSG_RESULT([no])</span>
<a href="#l3.659"></a><span id="l3.659" class="difflineminus">-        AC_MSG_ERROR([To build the installer you must have the latest MozillaBuild or Unicode NSIS with a major version of $REQ_NSIS_MAJOR_VER and a minimum minor version of $MIN_NSIS_MINOR_VER in your path.])</span>
<a href="#l3.660"></a><span id="l3.660" class="difflineminus">-    fi</span>
<a href="#l3.661"></a><span id="l3.661" class="difflineminus">-    AC_MSG_RESULT([yes])</span>
<a href="#l3.662"></a><span id="l3.662" class="difflineminus">-    MAKENSISU=&quot;${CYGWIN_WRAPPER} $MAKENSISU&quot;</span>
<a href="#l3.663"></a><span id="l3.663"> fi</span>
<a href="#l3.664"></a><span id="l3.664"> </span>
<a href="#l3.665"></a><span id="l3.665"> AC_MSG_CHECKING([for tar archiver])</span>
<a href="#l3.666"></a><span id="l3.666"> AC_CHECK_PROGS(TAR, gnutar gtar tar, &quot;&quot;)</span>
<a href="#l3.667"></a><span id="l3.667"> if test -z &quot;$TAR&quot;; then</span>
<a href="#l3.668"></a><span id="l3.668">     AC_MSG_ERROR([no tar archiver found in \$PATH])</span>
<a href="#l3.669"></a><span id="l3.669"> fi</span>
<a href="#l3.670"></a><span id="l3.670"> AC_MSG_RESULT([$TAR])</span>
<a href="#l3.671"></a><span id="l3.671" class="difflineat">@@ -5310,26 +5117,16 @@ AC_SUBST(MOZ_UPDATE_CHANNEL)</span>
<a href="#l3.672"></a><span id="l3.672"> MOZ_ARG_ENABLE_BOOL(update-packaging,</span>
<a href="#l3.673"></a><span id="l3.673"> [  --enable-update-packaging</span>
<a href="#l3.674"></a><span id="l3.674">                            Enable tools/update-packaging],</span>
<a href="#l3.675"></a><span id="l3.675">     MOZ_UPDATE_PACKAGING=1,</span>
<a href="#l3.676"></a><span id="l3.676">     MOZ_UPDATE_PACKAGING= )</span>
<a href="#l3.677"></a><span id="l3.677"> AC_SUBST(MOZ_UPDATE_PACKAGING)</span>
<a href="#l3.678"></a><span id="l3.678"> </span>
<a href="#l3.679"></a><span id="l3.679"> dnl ========================================================</span>
<a href="#l3.680"></a><span id="l3.680" class="difflineminus">-dnl ActiveX</span>
<a href="#l3.681"></a><span id="l3.681" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.682"></a><span id="l3.682" class="difflineminus">-</span>
<a href="#l3.683"></a><span id="l3.683" class="difflineminus">-MOZ_ARG_DISABLE_BOOL(activex,</span>
<a href="#l3.684"></a><span id="l3.684" class="difflineminus">-[  --disable-activex       Disable building of ActiveX control (win32 only)],</span>
<a href="#l3.685"></a><span id="l3.685" class="difflineminus">-    MOZ_NO_ACTIVEX_SUPPORT=1,</span>
<a href="#l3.686"></a><span id="l3.686" class="difflineminus">-    MOZ_NO_ACTIVEX_SUPPORT= )</span>
<a href="#l3.687"></a><span id="l3.687" class="difflineminus">-AC_SUBST(MOZ_NO_ACTIVEX_SUPPORT)</span>
<a href="#l3.688"></a><span id="l3.688" class="difflineminus">-</span>
<a href="#l3.689"></a><span id="l3.689" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.690"></a><span id="l3.690"> dnl build the tests by default</span>
<a href="#l3.691"></a><span id="l3.691"> dnl ========================================================</span>
<a href="#l3.692"></a><span id="l3.692"> MOZ_ARG_DISABLE_BOOL(tests,</span>
<a href="#l3.693"></a><span id="l3.693"> [  --disable-tests         Do not build test libraries &amp; programs],</span>
<a href="#l3.694"></a><span id="l3.694">     ENABLE_TESTS=,</span>
<a href="#l3.695"></a><span id="l3.695">     ENABLE_TESTS=1 )</span>
<a href="#l3.696"></a><span id="l3.696"> </span>
<a href="#l3.697"></a><span id="l3.697"> dnl ========================================================</span>
<a href="#l3.698"></a><span id="l3.698" class="difflineat">@@ -5725,17 +5522,17 @@ if test &quot;$MOZ_MEMORY&quot;; then</span>
<a href="#l3.699"></a><span id="l3.699">     AC_DEFINE(MOZ_MEMORY_LINUX)</span>
<a href="#l3.700"></a><span id="l3.700">     ;;</span>
<a href="#l3.701"></a><span id="l3.701">   *-netbsd*)</span>
<a href="#l3.702"></a><span id="l3.702">     AC_DEFINE(MOZ_MEMORY_BSD)</span>
<a href="#l3.703"></a><span id="l3.703">     ;;</span>
<a href="#l3.704"></a><span id="l3.704">   *-solaris*)</span>
<a href="#l3.705"></a><span id="l3.705">     AC_DEFINE(MOZ_MEMORY_SOLARIS)</span>
<a href="#l3.706"></a><span id="l3.706">     ;;</span>
<a href="#l3.707"></a><span id="l3.707" class="difflineminus">-  *-msvc*|*-mks*|*-mingw*)</span>
<a href="#l3.708"></a><span id="l3.708" class="difflineplus">+  *-mingw*)</span>
<a href="#l3.709"></a><span id="l3.709">     AC_DEFINE(MOZ_MEMORY_WINDOWS)</span>
<a href="#l3.710"></a><span id="l3.710">     if test -z &quot;$MOZ_DEBUG&quot;; then</span>
<a href="#l3.711"></a><span id="l3.711">       WIN32_CRT_LIBS=&quot;msvcrt.lib msvcprt.lib&quot;</span>
<a href="#l3.712"></a><span id="l3.712">     else</span>
<a href="#l3.713"></a><span id="l3.713">       WIN32_CRT_LIBS=&quot;msvcrtd.lib msvcprtd.lib&quot;</span>
<a href="#l3.714"></a><span id="l3.714">     fi</span>
<a href="#l3.715"></a><span id="l3.715">     dnl Look for a broken crtdll.obj</span>
<a href="#l3.716"></a><span id="l3.716">     WIN32_CRTDLL_FULLPATH=`lib -nologo -list $WIN32_CRT_LIBS | grep crtdll\\.obj`</span>
<a href="#l3.717"></a><span id="l3.717" class="difflineat">@@ -6291,17 +6088,17 @@ dnl ====================================</span>
<a href="#l3.718"></a><span id="l3.718"> dnl = Use mkdepend instead of $CC -MD for dependency generation</span>
<a href="#l3.719"></a><span id="l3.719"> dnl ========================================================</span>
<a href="#l3.720"></a><span id="l3.720"> _cpp_md_flag=</span>
<a href="#l3.721"></a><span id="l3.721"> MOZ_ARG_DISABLE_BOOL(md,</span>
<a href="#l3.722"></a><span id="l3.722"> [  --disable-md            Do not use compiler-based dependencies ],</span>
<a href="#l3.723"></a><span id="l3.723">   [_cpp_md_flag=],</span>
<a href="#l3.724"></a><span id="l3.724">   [_cpp_md_flag=1],</span>
<a href="#l3.725"></a><span id="l3.725">   [dnl Default is to turn on -MD if using GNU-compatible compilers</span>
<a href="#l3.726"></a><span id="l3.726" class="difflineminus">-   if test &quot;$GNU_CC&quot; -a &quot;$GNU_CXX&quot; -a &quot;$OS_ARCH&quot; != &quot;WINNT&quot; -a &quot;$OS_ARCH&quot; != &quot;WINCE&quot;; then</span>
<a href="#l3.727"></a><span id="l3.727" class="difflineplus">+   if test &quot;$GNU_CC&quot; -a &quot;$GNU_CXX&quot;; then</span>
<a href="#l3.728"></a><span id="l3.728">      _cpp_md_flag=1</span>
<a href="#l3.729"></a><span id="l3.729">    fi</span>
<a href="#l3.730"></a><span id="l3.730">   dnl Default is to use -xM if using Sun Studio on Solaris</span>
<a href="#l3.731"></a><span id="l3.731">    if test &quot;$SOLARIS_SUNPRO_CC&quot;; then</span>
<a href="#l3.732"></a><span id="l3.732">      _cpp_md_flag=1</span>
<a href="#l3.733"></a><span id="l3.733">    fi])</span>
<a href="#l3.734"></a><span id="l3.734"> if test &quot;$_cpp_md_flag&quot;; then</span>
<a href="#l3.735"></a><span id="l3.735">   COMPILER_DEPEND=1</span>
<a href="#l3.736"></a><span id="l3.736" class="difflineat">@@ -6522,22 +6319,17 @@ dnl</span>
<a href="#l3.737"></a><span id="l3.737"> dnl Build jsctypes on the platforms we can, unless it's explicitly disabled.</span>
<a href="#l3.738"></a><span id="l3.738"> dnl</span>
<a href="#l3.739"></a><span id="l3.739"> MOZ_ARG_DISABLE_BOOL(ctypes,</span>
<a href="#l3.740"></a><span id="l3.740"> [  --disable-ctypes        Disable js-ctypes],</span>
<a href="#l3.741"></a><span id="l3.741">     BUILD_CTYPES=,</span>
<a href="#l3.742"></a><span id="l3.742">     BUILD_CTYPES=1)</span>
<a href="#l3.743"></a><span id="l3.743"> AC_SUBST(BUILD_CTYPES)</span>
<a href="#l3.744"></a><span id="l3.744"> if test &quot;$BUILD_CTYPES&quot;; then</span>
<a href="#l3.745"></a><span id="l3.745" class="difflineminus">-  if test &quot;$OS_ARCH&quot; = &quot;WINCE&quot; -a `echo $OS_TEST | grep -ic arm` = 1; then</span>
<a href="#l3.746"></a><span id="l3.746" class="difflineminus">-    # Disable ctypes for arm/wince.</span>
<a href="#l3.747"></a><span id="l3.747" class="difflineminus">-    BUILD_CTYPES=</span>
<a href="#l3.748"></a><span id="l3.748" class="difflineminus">-  else</span>
<a href="#l3.749"></a><span id="l3.749">     AC_DEFINE(BUILD_CTYPES)</span>
<a href="#l3.750"></a><span id="l3.750" class="difflineminus">-  fi</span>
<a href="#l3.751"></a><span id="l3.751"> fi</span>
<a href="#l3.752"></a><span id="l3.752"> </span>
<a href="#l3.753"></a><span id="l3.753"> dnl Only build Mork if it's required</span>
<a href="#l3.754"></a><span id="l3.754"> AC_SUBST(MOZ_MORK)</span>
<a href="#l3.755"></a><span id="l3.755"> if test &quot;$MOZ_MORK&quot;; then</span>
<a href="#l3.756"></a><span id="l3.756">   AC_DEFINE(MOZ_MORK)</span>
<a href="#l3.757"></a><span id="l3.757">   MORK_COMPONENT=mork</span>
<a href="#l3.758"></a><span id="l3.758">   export MORK_COMPONENT</span>
<a href="#l3.759"></a><span id="l3.759" class="difflineat">@@ -6760,24 +6552,19 @@ AC_SUBST(MOZ_PKG_SPECIAL)</span>
<a href="#l3.760"></a><span id="l3.760"> AC_SUBST(MAIL_PKG_SHARED)</span>
<a href="#l3.761"></a><span id="l3.761"> </span>
<a href="#l3.762"></a><span id="l3.762"> AC_SUBST(MOZILLA_OFFICIAL)</span>
<a href="#l3.763"></a><span id="l3.763"> </span>
<a href="#l3.764"></a><span id="l3.764"> dnl win32 options</span>
<a href="#l3.765"></a><span id="l3.765"> AC_SUBST(MOZ_MAPINFO)</span>
<a href="#l3.766"></a><span id="l3.766"> AC_SUBST(MOZ_BROWSE_INFO)</span>
<a href="#l3.767"></a><span id="l3.767"> AC_SUBST(MOZ_TOOLS_DIR)</span>
<a href="#l3.768"></a><span id="l3.768" class="difflineminus">-AC_SUBST(CYGWIN_WRAPPER)</span>
<a href="#l3.769"></a><span id="l3.769" class="difflineminus">-AC_SUBST(AS_PERL)</span>
<a href="#l3.770"></a><span id="l3.770"> AC_SUBST(PYTHON)</span>
<a href="#l3.771"></a><span id="l3.771"> AC_SUBST(MAKENSISU)</span>
<a href="#l3.772"></a><span id="l3.772"> </span>
<a href="#l3.773"></a><span id="l3.773" class="difflineminus">-AC_SUBST(WINCE)</span>
<a href="#l3.774"></a><span id="l3.774" class="difflineminus">-AC_SUBST(WINCE_WINDOWS_MOBILE)</span>
<a href="#l3.775"></a><span id="l3.775" class="difflineminus">-</span>
<a href="#l3.776"></a><span id="l3.776"> dnl Echo the CFLAGS to remove extra whitespace.</span>
<a href="#l3.777"></a><span id="l3.777"> CFLAGS=`echo \</span>
<a href="#l3.778"></a><span id="l3.778"> 	$_WARNINGS_CFLAGS \</span>
<a href="#l3.779"></a><span id="l3.779"> 	$CFLAGS`</span>
<a href="#l3.780"></a><span id="l3.780"> </span>
<a href="#l3.781"></a><span id="l3.781"> CXXFLAGS=`echo \</span>
<a href="#l3.782"></a><span id="l3.782"> 	$_WARNINGS_CXXFLAGS \</span>
<a href="#l3.783"></a><span id="l3.783"> 	$CXXFLAGS`</span>
<a href="#l3.784"></a><span id="l3.784" class="difflineat">@@ -6929,17 +6716,17 @@ if test &quot;$OS_ARCH&quot; = &quot;BeOS&quot;; then</span>
<a href="#l3.785"></a><span id="l3.785">   AC_DEFINE(XP_BEOS)</span>
<a href="#l3.786"></a><span id="l3.786">   MOZ_MOVEMAIL=1</span>
<a href="#l3.787"></a><span id="l3.787"> elif test &quot;$OS_ARCH&quot; = &quot;Darwin&quot;; then</span>
<a href="#l3.788"></a><span id="l3.788">   AC_DEFINE(XP_UNIX)</span>
<a href="#l3.789"></a><span id="l3.789">   AC_DEFINE(UNIX_ASYNC_DNS)</span>
<a href="#l3.790"></a><span id="l3.790">   MOZ_MOVEMAIL=1</span>
<a href="#l3.791"></a><span id="l3.791"> elif test &quot;$OS_ARCH&quot; = &quot;OpenVMS&quot;; then</span>
<a href="#l3.792"></a><span id="l3.792">   AC_DEFINE(XP_UNIX)</span>
<a href="#l3.793"></a><span id="l3.793" class="difflineminus">-elif test &quot;$OS_ARCH&quot; != &quot;WINNT&quot; -a &quot;$OS_ARCH&quot; != &quot;OS2&quot; -a &quot;$OS_ARCH&quot; != &quot;WINCE&quot;; then</span>
<a href="#l3.794"></a><span id="l3.794" class="difflineplus">+elif test &quot;$OS_ARCH&quot; != &quot;WINNT&quot; -a &quot;$OS_ARCH&quot; != &quot;OS2&quot;; then</span>
<a href="#l3.795"></a><span id="l3.795">   AC_DEFINE(XP_UNIX)</span>
<a href="#l3.796"></a><span id="l3.796">   AC_DEFINE(UNIX_ASYNC_DNS)</span>
<a href="#l3.797"></a><span id="l3.797">   MOZ_MOVEMAIL=1</span>
<a href="#l3.798"></a><span id="l3.798"> fi</span>
<a href="#l3.799"></a><span id="l3.799"> AC_SUBST(MOZ_MOVEMAIL)</span>
<a href="#l3.800"></a><span id="l3.800"> </span>
<a href="#l3.801"></a><span id="l3.801"> if test &quot;$ACCESSIBILITY&quot; -a &quot;$MOZ_ENABLE_GTK2&quot; ; then</span>
<a href="#l3.802"></a><span id="l3.802">     AC_DEFINE(MOZ_ACCESSIBILITY_ATK)</span>
<a href="#l3.803"></a><span id="l3.803" class="difflineat">@@ -6947,39 +6734,22 @@ if test &quot;$ACCESSIBILITY&quot; -a &quot;$MOZ_ENABLE</span>
<a href="#l3.804"></a><span id="l3.804">     ATK_MAJOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $1 }'`</span>
<a href="#l3.805"></a><span id="l3.805">     ATK_MINOR_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $2 }'`</span>
<a href="#l3.806"></a><span id="l3.806">     ATK_REV_VERSION=`echo ${ATK_FULL_VERSION} | $AWK -F\. '{ print $3 }'`</span>
<a href="#l3.807"></a><span id="l3.807">     AC_DEFINE_UNQUOTED(ATK_MAJOR_VERSION, $ATK_MAJOR_VERSION)</span>
<a href="#l3.808"></a><span id="l3.808">     AC_DEFINE_UNQUOTED(ATK_MINOR_VERSION, $ATK_MINOR_VERSION)</span>
<a href="#l3.809"></a><span id="l3.809">     AC_DEFINE_UNQUOTED(ATK_REV_VERSION, $ATK_REV_VERSION)</span>
<a href="#l3.810"></a><span id="l3.810"> fi</span>
<a href="#l3.811"></a><span id="l3.811"> </span>
<a href="#l3.812"></a><span id="l3.812" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.813"></a><span id="l3.813" class="difflineminus">-dnl Use cygwin wrapper for win32 builds, except MSYS/MinGW</span>
<a href="#l3.814"></a><span id="l3.814" class="difflineminus">-dnl ========================================================</span>
<a href="#l3.815"></a><span id="l3.815"> case &quot;$host_os&quot; in</span>
<a href="#l3.816"></a><span id="l3.816"> mingw*)</span>
<a href="#l3.817"></a><span id="l3.817">     WIN_TOP_SRC=`cd $srcdir; pwd -W`</span>
<a href="#l3.818"></a><span id="l3.818">     ;;</span>
<a href="#l3.819"></a><span id="l3.819" class="difflineminus">-cygwin*|msvc*|mks*)</span>
<a href="#l3.820"></a><span id="l3.820" class="difflineminus">-    HOST_CC=&quot;\$(CYGWIN_WRAPPER) $HOST_CC&quot;</span>
<a href="#l3.821"></a><span id="l3.821" class="difflineminus">-    HOST_CXX=&quot;\$(CYGWIN_WRAPPER) $HOST_CXX&quot;</span>
<a href="#l3.822"></a><span id="l3.822" class="difflineminus">-    CC=&quot;\$(CYGWIN_WRAPPER) $CC&quot;</span>
<a href="#l3.823"></a><span id="l3.823" class="difflineminus">-    CXX=&quot;\$(CYGWIN_WRAPPER) $CXX&quot;</span>
<a href="#l3.824"></a><span id="l3.824" class="difflineminus">-    CPP=&quot;\$(CYGWIN_WRAPPER) $CPP&quot;</span>
<a href="#l3.825"></a><span id="l3.825" class="difflineminus">-    LD=&quot;\$(CYGWIN_WRAPPER) $LD&quot;</span>
<a href="#l3.826"></a><span id="l3.826" class="difflineminus">-    AS=&quot;\$(CYGWIN_WRAPPER) $AS&quot;</span>
<a href="#l3.827"></a><span id="l3.827" class="difflineminus">-    RC=&quot;\$(CYGWIN_WRAPPER) $RC&quot;</span>
<a href="#l3.828"></a><span id="l3.828" class="difflineminus">-    MIDL=&quot;\$(CYGWIN_WRAPPER) $MIDL&quot;</span>
<a href="#l3.829"></a><span id="l3.829" class="difflineminus">-    CYGDRIVE_MOUNT=`mount -p | awk '{ if (/^\//) { print $1; exit } }'`</span>
<a href="#l3.830"></a><span id="l3.830" class="difflineminus">-    WIN_TOP_SRC=`cygpath -a -w $srcdir | sed -e 's|\\\\|/|g'`</span>
<a href="#l3.831"></a><span id="l3.831" class="difflineminus">-    ;;</span>
<a href="#l3.832"></a><span id="l3.832"> esac</span>
<a href="#l3.833"></a><span id="l3.833"> </span>
<a href="#l3.834"></a><span id="l3.834" class="difflineminus">-AC_SUBST(CYGDRIVE_MOUNT)</span>
<a href="#l3.835"></a><span id="l3.835"> AC_SUBST(WIN_TOP_SRC)</span>
<a href="#l3.836"></a><span id="l3.836"> </span>
<a href="#l3.837"></a><span id="l3.837"> AC_SUBST(MOZILLA_VERSION)</span>
<a href="#l3.838"></a><span id="l3.838"> </span>
<a href="#l3.839"></a><span id="l3.839"> AC_SUBST(ac_configure_args)</span>
<a href="#l3.840"></a><span id="l3.840"> </span>
<a href="#l3.841"></a><span id="l3.841"> dnl Spit out some output</span>
<a href="#l3.842"></a><span id="l3.842"> dnl ========================================================</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

