<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 23251:629b9e240c8d042c3e0adb2403695caf0c3da5fb</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ 629b9e240c8d042c3e0adb2403695caf0c3da5fb" />
<meta property="og:url" content="/comm-central/rev/629b9e240c8d042c3e0adb2403695caf0c3da5fb" />
<meta property="og:description" content="Bug 1435621 - Remove SMILE module from SeaMonkey. rs=bustage-fix" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / 629b9e240c8d042c3e0adb2403695caf0c3da5fb 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/629b9e240c8d042c3e0adb2403695caf0c3da5fb">shortlog</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/629b9e240c8d042c3e0adb2403695caf0c3da5fb">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/629b9e240c8d042c3e0adb2403695caf0c3da5fb">files</a> |
changeset |
<a href="/comm-central/raw-rev/629b9e240c8d042c3e0adb2403695caf0c3da5fb">raw</a>  | <a href="/comm-central/archive/629b9e240c8d042c3e0adb2403695caf0c3da5fb.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1435621">Bug 1435621</a> - Remove SMILE module from SeaMonkey. rs=bustage-fix
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#114;&#97;&#110;&#107;&#45;&#82;&#97;&#105;&#110;&#101;&#114;&#32;&#71;&#114;&#97;&#104;&#108;&#32;&#60;&#102;&#114;&#103;&#114;&#97;&#104;&#108;&#64;&#103;&#109;&#120;&#46;&#110;&#101;&#116;&#62;</td></tr>
<tr><td></td><td class="date age">Mon, 05 Feb 2018 10:01:15 +0100</td></tr>

<tr>
 <td>changeset 23251</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/629b9e240c8d042c3e0adb2403695caf0c3da5fb">629b9e240c8d042c3e0adb2403695caf0c3da5fb</a></td>
</tr>



<tr>
<td>parent 23250</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/87ca394913b168cc6141189cb440b9fb0ed200e7">87ca394913b168cc6141189cb440b9fb0ed200e7</a>
</td>
</tr>

<tr>
<td>child 23252</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/63f09d10244cd7100cb5955a17993160fa180937">63f09d10244cd7100cb5955a17993160fa180937</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=629b9e240c8d042c3e0adb2403695caf0c3da5fb">14052</a></td></tr>
<tr><td>push user</td><td>frgrahl@gmx.net</td></tr>
<tr><td>push date</td><td class="date age">Mon, 05 Feb 2018 09:11:35 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@629b9e240c8d [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=629b9e240c8d042c3e0adb2403695caf0c3da5fb">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=629b9e240c8d042c3e0adb2403695caf0c3da5fb&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=629b9e240c8d042c3e0adb2403695caf0c3da5fb&newProject=comm-central&newRevision=87ca394913b168cc6141189cb440b9fb0ed200e7&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=629b9e240c8d042c3e0adb2403695caf0c3da5fb&newProject=comm-central&newRevision=87ca394913b168cc6141189cb440b9fb0ed200e7&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=629b9e240c8d042c3e0adb2403695caf0c3da5fb&newProject=comm-central&newRevision=87ca394913b168cc6141189cb440b9fb0ed200e7&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>
<tr><td>reviewers</td><td><a href="/comm-central/log?rev=reviewer%28bustage-fix%29&revcount=50">bustage-fix</a></td></tr>
<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1435621">1435621</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1435621">Bug 1435621</a> - Remove SMILE module from SeaMonkey. rs=bustage-fix</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/package-manifest.in">suite/installer/package-manifest.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/package-manifest.in">file</a> |
<a href="/comm-central/annotate/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/package-manifest.in">annotate</a> |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/package-manifest.in">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/package-manifest.in">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/package-manifest.in">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/removed-files.in">suite/installer/removed-files.in</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/removed-files.in">file</a> |
<a href="/comm-central/annotate/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/removed-files.in">annotate</a> |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/removed-files.in">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/removed-files.in">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/installer/removed-files.in">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/moz.build">suite/moz.build</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/moz.build">file</a> |
<a href="/comm-central/annotate/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/moz.build">annotate</a> |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/moz.build">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/moz.build">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extApplication.js">suite/smile/exthelper/extApplication.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extApplication.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extApplication.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extApplication.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extIApplication.idl">suite/smile/exthelper/extIApplication.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extIApplication.idl">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extIApplication.idl">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/extIApplication.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/moz.build">suite/smile/exthelper/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/moz.build">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/moz.build">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/exthelper/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/moz.build">suite/smile/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/moz.build">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/moz.build">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/moz.build">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/moz.build">suite/smile/public/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/moz.build">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/moz.build">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/smileIApplication.idl">suite/smile/public/smileIApplication.idl</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/smileIApplication.idl">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/smileIApplication.idl">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/public/smileIApplication.idl">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/moz.build">suite/smile/src/moz.build</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/moz.build">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/moz.build">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/moz.build">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.js">suite/smile/src/smileApplication.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.manifest">suite/smile/src/smileApplication.manifest</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.manifest">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.manifest">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/src/smileApplication.manifest">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentA.html">suite/smile/test/ContentA.html</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentA.html">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentA.html">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentA.html">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentB.html">suite/smile/test/ContentB.html</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentB.html">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentB.html">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentB.html">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentWithFrames.html">suite/smile/test/ContentWithFrames.html</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentWithFrames.html">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentWithFrames.html">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/ContentWithFrames.html">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Application.js">suite/smile/test/browser_Application.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Application.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Application.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Application.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationPrefs.js">suite/smile/test/browser_ApplicationPrefs.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationPrefs.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationPrefs.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationPrefs.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationQuitting.js">suite/smile/test/browser_ApplicationQuitting.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationQuitting.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationQuitting.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationQuitting.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationStorage.js">suite/smile/test/browser_ApplicationStorage.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationStorage.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationStorage.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_ApplicationStorage.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Bookmarks.js">suite/smile/test/browser_Bookmarks.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Bookmarks.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Bookmarks.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Bookmarks.js">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Browser.js">suite/smile/test/browser_Browser.js</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Browser.js">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Browser.js">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/browser_Browser.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/smile.ini">suite/smile/test/smile.ini</a></td>
<td></td>
<td class="link">
file |
annotate |
<a href="/comm-central/diff/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/smile.ini">diff</a> |
<a href="/comm-central/comparison/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/smile.ini">comparison</a> |
<a href="/comm-central/log/629b9e240c8d042c3e0adb2403695caf0c3da5fb/suite/smile/test/smile.ini">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/suite/installer/package-manifest.in</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/suite/installer/package-manifest.in</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -224,17 +224,16 @@</span>
<a href="#l1.4"></a><span id="l1.4"> @RESPATH@/components/dom_xhr.xpt</span>
<a href="#l1.5"></a><span id="l1.5"> @RESPATH@/components/dom_xpath.xpt</span>
<a href="#l1.6"></a><span id="l1.6"> @RESPATH@/components/dom_xul.xpt</span>
<a href="#l1.7"></a><span id="l1.7"> @RESPATH@/components/downloads.xpt</span>
<a href="#l1.8"></a><span id="l1.8"> @RESPATH@/components/editor.xpt</span>
<a href="#l1.9"></a><span id="l1.9"> @RESPATH@/components/extensions.xpt</span>
<a href="#l1.10"></a><span id="l1.10"> @RESPATH@/components/extensions.manifest</span>
<a href="#l1.11"></a><span id="l1.11"> @RESPATH@/components/exthandler.xpt</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-@RESPATH@/components/exthelper.xpt</span>
<a href="#l1.13"></a><span id="l1.13"> @RESPATH@/components/fastfind.xpt</span>
<a href="#l1.14"></a><span id="l1.14"> @RESPATH@/components/feeds.xpt</span>
<a href="#l1.15"></a><span id="l1.15"> @RESPATH@/components/gfx.xpt</span>
<a href="#l1.16"></a><span id="l1.16"> @RESPATH@/components/html5.xpt</span>
<a href="#l1.17"></a><span id="l1.17"> @RESPATH@/components/htmlparser.xpt</span>
<a href="#l1.18"></a><span id="l1.18"> @RESPATH@/components/imglib2.xpt</span>
<a href="#l1.19"></a><span id="l1.19"> @RESPATH@/components/inspector.xpt</span>
<a href="#l1.20"></a><span id="l1.20"> @RESPATH@/components/intl.xpt</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineat">@@ -288,17 +287,16 @@</span>
<a href="#l1.22"></a><span id="l1.22"> @RESPATH@/components/rdf.xpt</span>
<a href="#l1.23"></a><span id="l1.23"> @RESPATH@/components/reputationservice.xpt</span>
<a href="#l1.24"></a><span id="l1.24"> @RESPATH@/components/satchel.xpt</span>
<a href="#l1.25"></a><span id="l1.25"> @RESPATH@/components/satchel.manifest</span>
<a href="#l1.26"></a><span id="l1.26"> @RESPATH@/components/saxparser.xpt</span>
<a href="#l1.27"></a><span id="l1.27"> @RESPATH@/components/services-crypto-component.xpt</span>
<a href="#l1.28"></a><span id="l1.28"> @RESPATH@/components/shellservice.xpt</span>
<a href="#l1.29"></a><span id="l1.29"> @RESPATH@/components/shistory.xpt</span>
<a href="#l1.30"></a><span id="l1.30" class="difflineminus">-@RESPATH@/components/smile.xpt</span>
<a href="#l1.31"></a><span id="l1.31"> @RESPATH@/components/spellchecker.xpt</span>
<a href="#l1.32"></a><span id="l1.32"> @RESPATH@/components/storage.xpt</span>
<a href="#l1.33"></a><span id="l1.33"> @RESPATH@/components/SuiteBrowser.manifest</span>
<a href="#l1.34"></a><span id="l1.34"> @RESPATH@/components/suitecommon.xpt</span>
<a href="#l1.35"></a><span id="l1.35"> @RESPATH@/components/SuiteCommon.manifest</span>
<a href="#l1.36"></a><span id="l1.36"> @RESPATH@/components/suitefeeds.xpt</span>
<a href="#l1.37"></a><span id="l1.37"> @RESPATH@/components/SuiteFeeds.manifest</span>
<a href="#l1.38"></a><span id="l1.38"> @RESPATH@/components/suitemigration.xpt</span>
<a href="#l1.39"></a><span id="l1.39" class="difflineat">@@ -484,18 +482,16 @@</span>
<a href="#l1.40"></a><span id="l1.40"> @RESPATH@/components/PushComponents.js</span>
<a href="#l1.41"></a><span id="l1.41"> @RESPATH@/components/recording-cmdline.js</span>
<a href="#l1.42"></a><span id="l1.42"> @RESPATH@/components/recording-cmdline.manifest</span>
<a href="#l1.43"></a><span id="l1.43"> @RESPATH@/components/servicesComponents.manifest</span>
<a href="#l1.44"></a><span id="l1.44"> @RESPATH@/components/ProcessSelector.js</span>
<a href="#l1.45"></a><span id="l1.45"> @RESPATH@/components/ProcessSelector.manifest</span>
<a href="#l1.46"></a><span id="l1.46"> @RESPATH@/components/SlowScriptDebug.js</span>
<a href="#l1.47"></a><span id="l1.47"> @RESPATH@/components/SlowScriptDebug.manifest</span>
<a href="#l1.48"></a><span id="l1.48" class="difflineminus">-@RESPATH@/components/smileApplication.js</span>
<a href="#l1.49"></a><span id="l1.49" class="difflineminus">-@RESPATH@/components/smileApplication.manifest</span>
<a href="#l1.50"></a><span id="l1.50"> @RESPATH@/components/storage-json.js</span>
<a href="#l1.51"></a><span id="l1.51"> @RESPATH@/components/SuiteProfileMigrator.js</span>
<a href="#l1.52"></a><span id="l1.52"> @RESPATH@/components/SuiteProfileMigrator.manifest</span>
<a href="#l1.53"></a><span id="l1.53"> #if defined(ENABLE_TESTS) &amp;&amp; defined(MOZ_DEBUG)</span>
<a href="#l1.54"></a><span id="l1.54"> @RESPATH@/components/TestInterfaceJS.js</span>
<a href="#l1.55"></a><span id="l1.55"> @RESPATH@/components/TestInterfaceJS.manifest</span>
<a href="#l1.56"></a><span id="l1.56"> @RESPATH@/components/TestInterfaceJSMaplike.js</span>
<a href="#l1.57"></a><span id="l1.57"> #endif</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/suite/installer/removed-files.in</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/suite/installer/removed-files.in</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -696,17 +696,16 @@ Throbber-small.gif</span>
<a href="#l2.4"></a><span id="l2.4">   @DIR_MACOS@components/nsUpdateServiceStub.js</span>
<a href="#l2.5"></a><span id="l2.5">   @DIR_MACOS@components/nsUpdateTimerManager.js</span>
<a href="#l2.6"></a><span id="l2.6">   @DIR_MACOS@components/nsURLFormatter.js</span>
<a href="#l2.7"></a><span id="l2.7">   @DIR_MACOS@components/nsWebHandlerApp.js</span>
<a href="#l2.8"></a><span id="l2.8">   @DIR_MACOS@components/offlineStartup.js</span>
<a href="#l2.9"></a><span id="l2.9">   @DIR_MACOS@components/PlacesCategoriesStarter.js</span>
<a href="#l2.10"></a><span id="l2.10">   @DIR_MACOS@components/SettingsManager.js</span>
<a href="#l2.11"></a><span id="l2.11">   @DIR_MACOS@components/SiteSpecificUserAgent.js</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineminus">-  @DIR_MACOS@components/smileApplication.js</span>
<a href="#l2.13"></a><span id="l2.13">   @DIR_MACOS@components/smime-service.js</span>
<a href="#l2.14"></a><span id="l2.14">   @DIR_MACOS@components/storage-Legacy.js</span>
<a href="#l2.15"></a><span id="l2.15">   @DIR_MACOS@components/storage-mozStorage.js</span>
<a href="#l2.16"></a><span id="l2.16">   @DIR_MACOS@components/TCPSocket.js</span>
<a href="#l2.17"></a><span id="l2.17">   @DIR_MACOS@components/txEXSLTRegExFunctions.js</span>
<a href="#l2.18"></a><span id="l2.18">   @DIR_MACOS@components/Weave.js</span>
<a href="#l2.19"></a><span id="l2.19">   @DIR_MACOS@components/WebContentConverter.js</span>
<a href="#l2.20"></a><span id="l2.20">   @DIR_MACOS@components/browser.xpt</span>
<a href="#l2.21"></a><span id="l2.21" class="difflineat">@@ -1348,17 +1347,16 @@ components/xpautoc.dll</span>
<a href="#l2.22"></a><span id="l2.22"> @DIR_MACOS@components/profile.xpt</span>
<a href="#l2.23"></a><span id="l2.23"> @DIR_MACOS@components/proxyObjInst.xpt</span>
<a href="#l2.24"></a><span id="l2.24"> @DIR_MACOS@components/proxyObject.xpt</span>
<a href="#l2.25"></a><span id="l2.25"> @DIR_MACOS@components/rdf.xpt</span>
<a href="#l2.26"></a><span id="l2.26"> @DIR_MACOS@components/satchel.xpt</span>
<a href="#l2.27"></a><span id="l2.27"> @DIR_MACOS@components/saxparser.xpt</span>
<a href="#l2.28"></a><span id="l2.28"> @DIR_MACOS@components/shellservice.xpt</span>
<a href="#l2.29"></a><span id="l2.29"> @DIR_MACOS@components/shistory.xpt</span>
<a href="#l2.30"></a><span id="l2.30" class="difflineminus">-@DIR_MACOS@components/smile.xpt</span>
<a href="#l2.31"></a><span id="l2.31"> @DIR_MACOS@components/spellchecker.xpt</span>
<a href="#l2.32"></a><span id="l2.32"> @DIR_MACOS@components/storage.xpt</span>
<a href="#l2.33"></a><span id="l2.33"> @DIR_MACOS@components/suitebrowser.xpt</span>
<a href="#l2.34"></a><span id="l2.34"> @DIR_MACOS@components/suitecommon.xpt</span>
<a href="#l2.35"></a><span id="l2.35"> @DIR_MACOS@components/suitefeeds.xpt</span>
<a href="#l2.36"></a><span id="l2.36"> @DIR_MACOS@components/suitemigration.xpt</span>
<a href="#l2.37"></a><span id="l2.37"> @DIR_MACOS@components/toolkitprofile.xpt</span>
<a href="#l2.38"></a><span id="l2.38"> @DIR_MACOS@components/txmgr.xpt</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/suite/moz.build</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/suite/moz.build</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -15,17 +15,16 @@ DIRS += [</span>
<a href="#l3.4"></a><span id="l3.4">     'mailnews',</span>
<a href="#l3.5"></a><span id="l3.5">     'modules',</span>
<a href="#l3.6"></a><span id="l3.6">     'themes/classic',</span>
<a href="#l3.7"></a><span id="l3.7">     'themes/modern',</span>
<a href="#l3.8"></a><span id="l3.8">     'profile',</span>
<a href="#l3.9"></a><span id="l3.9">     'security',</span>
<a href="#l3.10"></a><span id="l3.10">     'shell/public',</span>
<a href="#l3.11"></a><span id="l3.11">     'shell/src',</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineminus">-    'smile',</span>
<a href="#l3.13"></a><span id="l3.13">     '../common/src',</span>
<a href="#l3.14"></a><span id="l3.14"> ]</span>
<a href="#l3.15"></a><span id="l3.15"> </span>
<a href="#l3.16"></a><span id="l3.16"> if CONFIG['MAKENSISU']:</span>
<a href="#l3.17"></a><span id="l3.17">     DIRS += ['installer/windows']</span>
<a href="#l3.18"></a><span id="l3.18"> </span>
<a href="#l3.19"></a><span id="l3.19"> if CONFIG['MOZ_BUNDLED_FONTS']:</span>
<a href="#l3.20"></a><span id="l3.20">     DIRS += ['/%s/browser/fonts' % CONFIG['mozreltopsrcdir']]</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l4.1"></a><span id="l4.1">deleted file mode 100644</span>
<a href="#l4.2"></a><span id="l4.2" class="difflineminus">--- a/suite/smile/exthelper/extApplication.js</span>
<a href="#l4.3"></a><span id="l4.3" class="difflineplus">+++ /dev/null</span>
<a href="#l4.4"></a><span id="l4.4" class="difflineat">@@ -1,713 +0,0 @@</span>
<a href="#l4.5"></a><span id="l4.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l4.6"></a><span id="l4.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l4.7"></a><span id="l4.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l4.8"></a><span id="l4.8" class="difflineminus">-</span>
<a href="#l4.9"></a><span id="l4.9" class="difflineminus">-// This file expects these globals to be declared before it is included.</span>
<a href="#l4.10"></a><span id="l4.10" class="difflineminus">-/* global Ci, Cc */</span>
<a href="#l4.11"></a><span id="l4.11" class="difflineminus">-</span>
<a href="#l4.12"></a><span id="l4.12" class="difflineminus">-ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l4.13"></a><span id="l4.13" class="difflineminus">-ChromeUtils.import(&quot;resource://gre/modules/AddonManager.jsm&quot;);</span>
<a href="#l4.14"></a><span id="l4.14" class="difflineminus">-ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l4.15"></a><span id="l4.15" class="difflineminus">-</span>
<a href="#l4.16"></a><span id="l4.16" class="difflineminus">-// =================================================</span>
<a href="#l4.17"></a><span id="l4.17" class="difflineminus">-// Console constructor</span>
<a href="#l4.18"></a><span id="l4.18" class="difflineminus">-function Console() {</span>
<a href="#l4.19"></a><span id="l4.19" class="difflineminus">-  this._console = Components.classes[&quot;@mozilla.org/consoleservice;1&quot;]</span>
<a href="#l4.20"></a><span id="l4.20" class="difflineminus">-                            .getService(Ci.nsIConsoleService);</span>
<a href="#l4.21"></a><span id="l4.21" class="difflineminus">-}</span>
<a href="#l4.22"></a><span id="l4.22" class="difflineminus">-</span>
<a href="#l4.23"></a><span id="l4.23" class="difflineminus">-// =================================================</span>
<a href="#l4.24"></a><span id="l4.24" class="difflineminus">-// Console implementation</span>
<a href="#l4.25"></a><span id="l4.25" class="difflineminus">-Console.prototype = {</span>
<a href="#l4.26"></a><span id="l4.26" class="difflineminus">-  log: function cs_log(aMsg) {</span>
<a href="#l4.27"></a><span id="l4.27" class="difflineminus">-    this._console.logStringMessage(aMsg);</span>
<a href="#l4.28"></a><span id="l4.28" class="difflineminus">-  },</span>
<a href="#l4.29"></a><span id="l4.29" class="difflineminus">-</span>
<a href="#l4.30"></a><span id="l4.30" class="difflineminus">-  open: function cs_open() {</span>
<a href="#l4.31"></a><span id="l4.31" class="difflineminus">-    var console = Services.wm.getMostRecentWindow(&quot;global:console&quot;);</span>
<a href="#l4.32"></a><span id="l4.32" class="difflineminus">-    if (!console) {</span>
<a href="#l4.33"></a><span id="l4.33" class="difflineminus">-      Services.ww.openWindow(null, &quot;chrome://global/content/console.xul&quot;,</span>
<a href="#l4.34"></a><span id="l4.34" class="difflineminus">-                             &quot;_blank&quot;, &quot;chrome,dialog=no,all&quot;, null);</span>
<a href="#l4.35"></a><span id="l4.35" class="difflineminus">-    } else {</span>
<a href="#l4.36"></a><span id="l4.36" class="difflineminus">-      // console was already open</span>
<a href="#l4.37"></a><span id="l4.37" class="difflineminus">-      console.focus();</span>
<a href="#l4.38"></a><span id="l4.38" class="difflineminus">-    }</span>
<a href="#l4.39"></a><span id="l4.39" class="difflineminus">-  },</span>
<a href="#l4.40"></a><span id="l4.40" class="difflineminus">-</span>
<a href="#l4.41"></a><span id="l4.41" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIConsole])</span>
<a href="#l4.42"></a><span id="l4.42" class="difflineminus">-};</span>
<a href="#l4.43"></a><span id="l4.43" class="difflineminus">-</span>
<a href="#l4.44"></a><span id="l4.44" class="difflineminus">-</span>
<a href="#l4.45"></a><span id="l4.45" class="difflineminus">-// =================================================</span>
<a href="#l4.46"></a><span id="l4.46" class="difflineminus">-// EventItem constructor</span>
<a href="#l4.47"></a><span id="l4.47" class="difflineminus">-function EventItem(aType, aData) {</span>
<a href="#l4.48"></a><span id="l4.48" class="difflineminus">-  this._type = aType;</span>
<a href="#l4.49"></a><span id="l4.49" class="difflineminus">-  this._data = aData;</span>
<a href="#l4.50"></a><span id="l4.50" class="difflineminus">-}</span>
<a href="#l4.51"></a><span id="l4.51" class="difflineminus">-</span>
<a href="#l4.52"></a><span id="l4.52" class="difflineminus">-// =================================================</span>
<a href="#l4.53"></a><span id="l4.53" class="difflineminus">-// EventItem implementation</span>
<a href="#l4.54"></a><span id="l4.54" class="difflineminus">-EventItem.prototype = {</span>
<a href="#l4.55"></a><span id="l4.55" class="difflineminus">-  _cancel: false,</span>
<a href="#l4.56"></a><span id="l4.56" class="difflineminus">-</span>
<a href="#l4.57"></a><span id="l4.57" class="difflineminus">-  get type() {</span>
<a href="#l4.58"></a><span id="l4.58" class="difflineminus">-    return this._type;</span>
<a href="#l4.59"></a><span id="l4.59" class="difflineminus">-  },</span>
<a href="#l4.60"></a><span id="l4.60" class="difflineminus">-</span>
<a href="#l4.61"></a><span id="l4.61" class="difflineminus">-  get data() {</span>
<a href="#l4.62"></a><span id="l4.62" class="difflineminus">-    return this._data;</span>
<a href="#l4.63"></a><span id="l4.63" class="difflineminus">-  },</span>
<a href="#l4.64"></a><span id="l4.64" class="difflineminus">-</span>
<a href="#l4.65"></a><span id="l4.65" class="difflineminus">-  preventDefault: function ei_pd() {</span>
<a href="#l4.66"></a><span id="l4.66" class="difflineminus">-    this._cancel = true;</span>
<a href="#l4.67"></a><span id="l4.67" class="difflineminus">-  },</span>
<a href="#l4.68"></a><span id="l4.68" class="difflineminus">-</span>
<a href="#l4.69"></a><span id="l4.69" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIEventItem])</span>
<a href="#l4.70"></a><span id="l4.70" class="difflineminus">-};</span>
<a href="#l4.71"></a><span id="l4.71" class="difflineminus">-</span>
<a href="#l4.72"></a><span id="l4.72" class="difflineminus">-</span>
<a href="#l4.73"></a><span id="l4.73" class="difflineminus">-// =================================================</span>
<a href="#l4.74"></a><span id="l4.74" class="difflineminus">-// Events constructor</span>
<a href="#l4.75"></a><span id="l4.75" class="difflineminus">-function Events(notifier) {</span>
<a href="#l4.76"></a><span id="l4.76" class="difflineminus">-  this._listeners = [];</span>
<a href="#l4.77"></a><span id="l4.77" class="difflineminus">-  this._notifier = notifier;</span>
<a href="#l4.78"></a><span id="l4.78" class="difflineminus">-}</span>
<a href="#l4.79"></a><span id="l4.79" class="difflineminus">-</span>
<a href="#l4.80"></a><span id="l4.80" class="difflineminus">-// =================================================</span>
<a href="#l4.81"></a><span id="l4.81" class="difflineminus">-// Events implementation</span>
<a href="#l4.82"></a><span id="l4.82" class="difflineminus">-Events.prototype = {</span>
<a href="#l4.83"></a><span id="l4.83" class="difflineminus">-  addListener: function evts_al(aEvent, aListener) {</span>
<a href="#l4.84"></a><span id="l4.84" class="difflineminus">-    function hasFilter(element) {</span>
<a href="#l4.85"></a><span id="l4.85" class="difflineminus">-      return element.event == aEvent &amp;&amp; element.listener == aListener;</span>
<a href="#l4.86"></a><span id="l4.86" class="difflineminus">-    }</span>
<a href="#l4.87"></a><span id="l4.87" class="difflineminus">-</span>
<a href="#l4.88"></a><span id="l4.88" class="difflineminus">-    if (this._listeners.some(hasFilter))</span>
<a href="#l4.89"></a><span id="l4.89" class="difflineminus">-      return;</span>
<a href="#l4.90"></a><span id="l4.90" class="difflineminus">-</span>
<a href="#l4.91"></a><span id="l4.91" class="difflineminus">-    this._listeners.push({</span>
<a href="#l4.92"></a><span id="l4.92" class="difflineminus">-      event: aEvent,</span>
<a href="#l4.93"></a><span id="l4.93" class="difflineminus">-      listener: aListener</span>
<a href="#l4.94"></a><span id="l4.94" class="difflineminus">-    });</span>
<a href="#l4.95"></a><span id="l4.95" class="difflineminus">-</span>
<a href="#l4.96"></a><span id="l4.96" class="difflineminus">-    if (this._notifier) {</span>
<a href="#l4.97"></a><span id="l4.97" class="difflineminus">-      this._notifier(aEvent, aListener);</span>
<a href="#l4.98"></a><span id="l4.98" class="difflineminus">-    }</span>
<a href="#l4.99"></a><span id="l4.99" class="difflineminus">-  },</span>
<a href="#l4.100"></a><span id="l4.100" class="difflineminus">-</span>
<a href="#l4.101"></a><span id="l4.101" class="difflineminus">-  removeListener: function evts_rl(aEvent, aListener) {</span>
<a href="#l4.102"></a><span id="l4.102" class="difflineminus">-    function hasFilter(element) {</span>
<a href="#l4.103"></a><span id="l4.103" class="difflineminus">-      return (element.event != aEvent) || (element.listener != aListener);</span>
<a href="#l4.104"></a><span id="l4.104" class="difflineminus">-    }</span>
<a href="#l4.105"></a><span id="l4.105" class="difflineminus">-</span>
<a href="#l4.106"></a><span id="l4.106" class="difflineminus">-    this._listeners = this._listeners.filter(hasFilter);</span>
<a href="#l4.107"></a><span id="l4.107" class="difflineminus">-  },</span>
<a href="#l4.108"></a><span id="l4.108" class="difflineminus">-</span>
<a href="#l4.109"></a><span id="l4.109" class="difflineminus">-  dispatch: function evts_dispatch(aEvent, aEventItem) {</span>
<a href="#l4.110"></a><span id="l4.110" class="difflineminus">-    var eventItem = new EventItem(aEvent, aEventItem);</span>
<a href="#l4.111"></a><span id="l4.111" class="difflineminus">-</span>
<a href="#l4.112"></a><span id="l4.112" class="difflineminus">-    this._listeners.forEach(function(key) {</span>
<a href="#l4.113"></a><span id="l4.113" class="difflineminus">-      if (key.event == aEvent) {</span>
<a href="#l4.114"></a><span id="l4.114" class="difflineminus">-        key.listener.handleEvent ?</span>
<a href="#l4.115"></a><span id="l4.115" class="difflineminus">-          key.listener.handleEvent(eventItem) :</span>
<a href="#l4.116"></a><span id="l4.116" class="difflineminus">-          key.listener(eventItem);</span>
<a href="#l4.117"></a><span id="l4.117" class="difflineminus">-      }</span>
<a href="#l4.118"></a><span id="l4.118" class="difflineminus">-    });</span>
<a href="#l4.119"></a><span id="l4.119" class="difflineminus">-</span>
<a href="#l4.120"></a><span id="l4.120" class="difflineminus">-    return !eventItem._cancel;</span>
<a href="#l4.121"></a><span id="l4.121" class="difflineminus">-  },</span>
<a href="#l4.122"></a><span id="l4.122" class="difflineminus">-</span>
<a href="#l4.123"></a><span id="l4.123" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIEvents])</span>
<a href="#l4.124"></a><span id="l4.124" class="difflineminus">-};</span>
<a href="#l4.125"></a><span id="l4.125" class="difflineminus">-</span>
<a href="#l4.126"></a><span id="l4.126" class="difflineminus">-// =================================================</span>
<a href="#l4.127"></a><span id="l4.127" class="difflineminus">-// PreferenceObserver (internal class)</span>
<a href="#l4.128"></a><span id="l4.128" class="difflineminus">-//</span>
<a href="#l4.129"></a><span id="l4.129" class="difflineminus">-// PreferenceObserver is a global singleton which watches the browser's</span>
<a href="#l4.130"></a><span id="l4.130" class="difflineminus">-// preferences and sends you events when things change.</span>
<a href="#l4.131"></a><span id="l4.131" class="difflineminus">-</span>
<a href="#l4.132"></a><span id="l4.132" class="difflineminus">-function PreferenceObserver() {</span>
<a href="#l4.133"></a><span id="l4.133" class="difflineminus">-  this._observersDict = {};</span>
<a href="#l4.134"></a><span id="l4.134" class="difflineminus">-}</span>
<a href="#l4.135"></a><span id="l4.135" class="difflineminus">-</span>
<a href="#l4.136"></a><span id="l4.136" class="difflineminus">-PreferenceObserver.prototype = {</span>
<a href="#l4.137"></a><span id="l4.137" class="difflineminus">-  /**</span>
<a href="#l4.138"></a><span id="l4.138" class="difflineminus">-   * Add a preference observer.</span>
<a href="#l4.139"></a><span id="l4.139" class="difflineminus">-   *</span>
<a href="#l4.140"></a><span id="l4.140" class="difflineminus">-   * @param aPrefs the nsIPrefBranch onto which we'll install our listener.</span>
<a href="#l4.141"></a><span id="l4.141" class="difflineminus">-   * @param aDomain the domain our listener will watch (a string).</span>
<a href="#l4.142"></a><span id="l4.142" class="difflineminus">-   * @param aEvent the event to listen to (you probably want &quot;change&quot;).</span>
<a href="#l4.143"></a><span id="l4.143" class="difflineminus">-   * @param aListener the function to call back when the event fires.  This</span>
<a href="#l4.144"></a><span id="l4.144" class="difflineminus">-   *                  function will receive an EventData argument.</span>
<a href="#l4.145"></a><span id="l4.145" class="difflineminus">-   */</span>
<a href="#l4.146"></a><span id="l4.146" class="difflineminus">-  addListener: function po_al(aPrefs, aDomain, aEvent, aListener) {</span>
<a href="#l4.147"></a><span id="l4.147" class="difflineminus">-    var root = aPrefs.root;</span>
<a href="#l4.148"></a><span id="l4.148" class="difflineminus">-    if (!this._observersDict[root]) {</span>
<a href="#l4.149"></a><span id="l4.149" class="difflineminus">-      this._observersDict[root] = {};</span>
<a href="#l4.150"></a><span id="l4.150" class="difflineminus">-    }</span>
<a href="#l4.151"></a><span id="l4.151" class="difflineminus">-    var observer = this._observersDict[root][aDomain];</span>
<a href="#l4.152"></a><span id="l4.152" class="difflineminus">-</span>
<a href="#l4.153"></a><span id="l4.153" class="difflineminus">-    if (!observer) {</span>
<a href="#l4.154"></a><span id="l4.154" class="difflineminus">-      observer = {</span>
<a href="#l4.155"></a><span id="l4.155" class="difflineminus">-        events: new Events(),</span>
<a href="#l4.156"></a><span id="l4.156" class="difflineminus">-        observe: function po_observer_obs(aSubject, aTopic, aData) {</span>
<a href="#l4.157"></a><span id="l4.157" class="difflineminus">-          this.events.dispatch(&quot;change&quot;, aData);</span>
<a href="#l4.158"></a><span id="l4.158" class="difflineminus">-        },</span>
<a href="#l4.159"></a><span id="l4.159" class="difflineminus">-        QueryInterface: XPCOMUtils.generateQI([Ci.nsIObserver,</span>
<a href="#l4.160"></a><span id="l4.160" class="difflineminus">-                                               Ci.nsISupportsWeakReference])</span>
<a href="#l4.161"></a><span id="l4.161" class="difflineminus">-      };</span>
<a href="#l4.162"></a><span id="l4.162" class="difflineminus">-      observer.prefBranch = aPrefs;</span>
<a href="#l4.163"></a><span id="l4.163" class="difflineminus">-      observer.prefBranch.addObserver(aDomain, observer, /* ownsWeak = */ true);</span>
<a href="#l4.164"></a><span id="l4.164" class="difflineminus">-</span>
<a href="#l4.165"></a><span id="l4.165" class="difflineminus">-      // Notice that the prefBranch keeps a weak reference to the observer;</span>
<a href="#l4.166"></a><span id="l4.166" class="difflineminus">-      // it's this._observersDict which keeps the observer alive.</span>
<a href="#l4.167"></a><span id="l4.167" class="difflineminus">-      this._observersDict[root][aDomain] = observer;</span>
<a href="#l4.168"></a><span id="l4.168" class="difflineminus">-    }</span>
<a href="#l4.169"></a><span id="l4.169" class="difflineminus">-    observer.events.addListener(aEvent, aListener);</span>
<a href="#l4.170"></a><span id="l4.170" class="difflineminus">-  },</span>
<a href="#l4.171"></a><span id="l4.171" class="difflineminus">-</span>
<a href="#l4.172"></a><span id="l4.172" class="difflineminus">-  /**</span>
<a href="#l4.173"></a><span id="l4.173" class="difflineminus">-   * Remove a preference observer.</span>
<a href="#l4.174"></a><span id="l4.174" class="difflineminus">-   *</span>
<a href="#l4.175"></a><span id="l4.175" class="difflineminus">-   * This function's parameters are identical to addListener's.</span>
<a href="#l4.176"></a><span id="l4.176" class="difflineminus">-   */</span>
<a href="#l4.177"></a><span id="l4.177" class="difflineminus">-  removeListener: function po_rl(aPrefs, aDomain, aEvent, aListener) {</span>
<a href="#l4.178"></a><span id="l4.178" class="difflineminus">-    var root = aPrefs.root;</span>
<a href="#l4.179"></a><span id="l4.179" class="difflineminus">-    if (!this._observersDict[root] ||</span>
<a href="#l4.180"></a><span id="l4.180" class="difflineminus">-        !this._observersDict[root][aDomain]) {</span>
<a href="#l4.181"></a><span id="l4.181" class="difflineminus">-      return;</span>
<a href="#l4.182"></a><span id="l4.182" class="difflineminus">-    }</span>
<a href="#l4.183"></a><span id="l4.183" class="difflineminus">-    var observer = this._observersDict[root][aDomain];</span>
<a href="#l4.184"></a><span id="l4.184" class="difflineminus">-    observer.events.removeListener(aEvent, aListener);</span>
<a href="#l4.185"></a><span id="l4.185" class="difflineminus">-</span>
<a href="#l4.186"></a><span id="l4.186" class="difflineminus">-    if (observer.events._listeners.length == 0) {</span>
<a href="#l4.187"></a><span id="l4.187" class="difflineminus">-      // nsIPrefBranch objects are not singletons -- we can have two</span>
<a href="#l4.188"></a><span id="l4.188" class="difflineminus">-      // nsIPrefBranch'es for the same branch.  There's no guarantee that</span>
<a href="#l4.189"></a><span id="l4.189" class="difflineminus">-      // aPrefs is the same object as observer.prefBranch, so we have to call</span>
<a href="#l4.190"></a><span id="l4.190" class="difflineminus">-      // removeObserver on observer.prefBranch.</span>
<a href="#l4.191"></a><span id="l4.191" class="difflineminus">-      observer.prefBranch.removeObserver(aDomain, observer);</span>
<a href="#l4.192"></a><span id="l4.192" class="difflineminus">-      delete this._observersDict[root][aDomain];</span>
<a href="#l4.193"></a><span id="l4.193" class="difflineminus">-      if (Object.keys(this._observersDict[root]).length == 0) {</span>
<a href="#l4.194"></a><span id="l4.194" class="difflineminus">-        delete this._observersDict[root];</span>
<a href="#l4.195"></a><span id="l4.195" class="difflineminus">-      }</span>
<a href="#l4.196"></a><span id="l4.196" class="difflineminus">-    }</span>
<a href="#l4.197"></a><span id="l4.197" class="difflineminus">-  }</span>
<a href="#l4.198"></a><span id="l4.198" class="difflineminus">-};</span>
<a href="#l4.199"></a><span id="l4.199" class="difflineminus">-</span>
<a href="#l4.200"></a><span id="l4.200" class="difflineminus">-// =================================================</span>
<a href="#l4.201"></a><span id="l4.201" class="difflineminus">-// PreferenceBranch constructor</span>
<a href="#l4.202"></a><span id="l4.202" class="difflineminus">-function PreferenceBranch(aBranch) {</span>
<a href="#l4.203"></a><span id="l4.203" class="difflineminus">-  if (!aBranch)</span>
<a href="#l4.204"></a><span id="l4.204" class="difflineminus">-    aBranch = &quot;&quot;;</span>
<a href="#l4.205"></a><span id="l4.205" class="difflineminus">-</span>
<a href="#l4.206"></a><span id="l4.206" class="difflineminus">-  this._root = aBranch;</span>
<a href="#l4.207"></a><span id="l4.207" class="difflineminus">-  this._prefs = Components.classes[&quot;@mozilla.org/preferences-service;1&quot;]</span>
<a href="#l4.208"></a><span id="l4.208" class="difflineminus">-                          .getService(Ci.nsIPrefService)</span>
<a href="#l4.209"></a><span id="l4.209" class="difflineminus">-                          .QueryInterface(Ci.nsIPrefBranch);</span>
<a href="#l4.210"></a><span id="l4.210" class="difflineminus">-</span>
<a href="#l4.211"></a><span id="l4.211" class="difflineminus">-  if (aBranch)</span>
<a href="#l4.212"></a><span id="l4.212" class="difflineminus">-    this._prefs = this._prefs.getBranch(aBranch);</span>
<a href="#l4.213"></a><span id="l4.213" class="difflineminus">-</span>
<a href="#l4.214"></a><span id="l4.214" class="difflineminus">-  let prefs = this._prefs;</span>
<a href="#l4.215"></a><span id="l4.215" class="difflineminus">-  this._events = {</span>
<a href="#l4.216"></a><span id="l4.216" class="difflineminus">-    addListener: function pb_al(aEvent, aListener) {</span>
<a href="#l4.217"></a><span id="l4.217" class="difflineminus">-      gPreferenceObserver.addListener(prefs, &quot;&quot;, aEvent, aListener);</span>
<a href="#l4.218"></a><span id="l4.218" class="difflineminus">-    },</span>
<a href="#l4.219"></a><span id="l4.219" class="difflineminus">-    removeListener: function pb_rl(aEvent, aListener) {</span>
<a href="#l4.220"></a><span id="l4.220" class="difflineminus">-      gPreferenceObserver.removeListener(prefs, &quot;&quot;, aEvent, aListener);</span>
<a href="#l4.221"></a><span id="l4.221" class="difflineminus">-    },</span>
<a href="#l4.222"></a><span id="l4.222" class="difflineminus">-    QueryInterface: XPCOMUtils.generateQI([Ci.extIEvents])</span>
<a href="#l4.223"></a><span id="l4.223" class="difflineminus">-  };</span>
<a href="#l4.224"></a><span id="l4.224" class="difflineminus">-}</span>
<a href="#l4.225"></a><span id="l4.225" class="difflineminus">-</span>
<a href="#l4.226"></a><span id="l4.226" class="difflineminus">-// =================================================</span>
<a href="#l4.227"></a><span id="l4.227" class="difflineminus">-// PreferenceBranch implementation</span>
<a href="#l4.228"></a><span id="l4.228" class="difflineminus">-PreferenceBranch.prototype = {</span>
<a href="#l4.229"></a><span id="l4.229" class="difflineminus">-  get root() {</span>
<a href="#l4.230"></a><span id="l4.230" class="difflineminus">-    return this._root;</span>
<a href="#l4.231"></a><span id="l4.231" class="difflineminus">-  },</span>
<a href="#l4.232"></a><span id="l4.232" class="difflineminus">-</span>
<a href="#l4.233"></a><span id="l4.233" class="difflineminus">-  get all() {</span>
<a href="#l4.234"></a><span id="l4.234" class="difflineminus">-    return this.find({});</span>
<a href="#l4.235"></a><span id="l4.235" class="difflineminus">-  },</span>
<a href="#l4.236"></a><span id="l4.236" class="difflineminus">-</span>
<a href="#l4.237"></a><span id="l4.237" class="difflineminus">-  get events() {</span>
<a href="#l4.238"></a><span id="l4.238" class="difflineminus">-    return this._events;</span>
<a href="#l4.239"></a><span id="l4.239" class="difflineminus">-  },</span>
<a href="#l4.240"></a><span id="l4.240" class="difflineminus">-</span>
<a href="#l4.241"></a><span id="l4.241" class="difflineminus">-  // XXX: Disabled until we can figure out the wrapped object issues</span>
<a href="#l4.242"></a><span id="l4.242" class="difflineminus">-  // name: &quot;name&quot; or /name/</span>
<a href="#l4.243"></a><span id="l4.243" class="difflineminus">-  // path: &quot;foo.bar.&quot; or &quot;&quot; or /fo+\.bar/</span>
<a href="#l4.244"></a><span id="l4.244" class="difflineminus">-  // type: Boolean, Number, String (getPrefType)</span>
<a href="#l4.245"></a><span id="l4.245" class="difflineminus">-  // locked: true, false (prefIsLocked)</span>
<a href="#l4.246"></a><span id="l4.246" class="difflineminus">-  // modified: true, false (prefHasUserValue)</span>
<a href="#l4.247"></a><span id="l4.247" class="difflineminus">-  find: function prefs_find(aOptions) {</span>
<a href="#l4.248"></a><span id="l4.248" class="difflineminus">-    var retVal = [];</span>
<a href="#l4.249"></a><span id="l4.249" class="difflineminus">-    var items = this._prefs.getChildList(&quot;&quot;);</span>
<a href="#l4.250"></a><span id="l4.250" class="difflineminus">-</span>
<a href="#l4.251"></a><span id="l4.251" class="difflineminus">-    for (var i = 0; i &lt; items.length; i++) {</span>
<a href="#l4.252"></a><span id="l4.252" class="difflineminus">-      retVal.push(new Preference(items[i], this));</span>
<a href="#l4.253"></a><span id="l4.253" class="difflineminus">-    }</span>
<a href="#l4.254"></a><span id="l4.254" class="difflineminus">-</span>
<a href="#l4.255"></a><span id="l4.255" class="difflineminus">-    return retVal;</span>
<a href="#l4.256"></a><span id="l4.256" class="difflineminus">-  },</span>
<a href="#l4.257"></a><span id="l4.257" class="difflineminus">-</span>
<a href="#l4.258"></a><span id="l4.258" class="difflineminus">-  has: function prefs_has(aName) {</span>
<a href="#l4.259"></a><span id="l4.259" class="difflineminus">-    return (this._prefs.getPrefType(aName) != Ci.nsIPrefBranch.PREF_INVALID);</span>
<a href="#l4.260"></a><span id="l4.260" class="difflineminus">-  },</span>
<a href="#l4.261"></a><span id="l4.261" class="difflineminus">-</span>
<a href="#l4.262"></a><span id="l4.262" class="difflineminus">-  get: function prefs_get(aName) {</span>
<a href="#l4.263"></a><span id="l4.263" class="difflineminus">-    return this.has(aName) ? new Preference(aName, this) : null;</span>
<a href="#l4.264"></a><span id="l4.264" class="difflineminus">-  },</span>
<a href="#l4.265"></a><span id="l4.265" class="difflineminus">-</span>
<a href="#l4.266"></a><span id="l4.266" class="difflineminus">-  getValue: function prefs_gv(aName, aValue) {</span>
<a href="#l4.267"></a><span id="l4.267" class="difflineminus">-    var type = this._prefs.getPrefType(aName);</span>
<a href="#l4.268"></a><span id="l4.268" class="difflineminus">-</span>
<a href="#l4.269"></a><span id="l4.269" class="difflineminus">-    switch (type) {</span>
<a href="#l4.270"></a><span id="l4.270" class="difflineminus">-      case Ci.nsIPrefBranch.PREF_STRING:</span>
<a href="#l4.271"></a><span id="l4.271" class="difflineminus">-        aValue = this._prefs.getStringPref(aName);</span>
<a href="#l4.272"></a><span id="l4.272" class="difflineminus">-        break;</span>
<a href="#l4.273"></a><span id="l4.273" class="difflineminus">-      case Ci.nsIPrefBranch.PREF_BOOL:</span>
<a href="#l4.274"></a><span id="l4.274" class="difflineminus">-        aValue = this._prefs.getBoolPref(aName);</span>
<a href="#l4.275"></a><span id="l4.275" class="difflineminus">-        break;</span>
<a href="#l4.276"></a><span id="l4.276" class="difflineminus">-      case Ci.nsIPrefBranch.PREF_INT:</span>
<a href="#l4.277"></a><span id="l4.277" class="difflineminus">-        aValue = this._prefs.getIntPref(aName);</span>
<a href="#l4.278"></a><span id="l4.278" class="difflineminus">-        break;</span>
<a href="#l4.279"></a><span id="l4.279" class="difflineminus">-    }</span>
<a href="#l4.280"></a><span id="l4.280" class="difflineminus">-</span>
<a href="#l4.281"></a><span id="l4.281" class="difflineminus">-    return aValue;</span>
<a href="#l4.282"></a><span id="l4.282" class="difflineminus">-  },</span>
<a href="#l4.283"></a><span id="l4.283" class="difflineminus">-</span>
<a href="#l4.284"></a><span id="l4.284" class="difflineminus">-  setValue: function prefs_sv(aName, aValue) {</span>
<a href="#l4.285"></a><span id="l4.285" class="difflineminus">-    var type = aValue != null ? aValue.constructor.name : &quot;&quot;;</span>
<a href="#l4.286"></a><span id="l4.286" class="difflineminus">-</span>
<a href="#l4.287"></a><span id="l4.287" class="difflineminus">-    switch (type) {</span>
<a href="#l4.288"></a><span id="l4.288" class="difflineminus">-      case &quot;String&quot;:</span>
<a href="#l4.289"></a><span id="l4.289" class="difflineminus">-        this._prefs.setStringPref(aName, aValue);</span>
<a href="#l4.290"></a><span id="l4.290" class="difflineminus">-        break;</span>
<a href="#l4.291"></a><span id="l4.291" class="difflineminus">-      case &quot;Boolean&quot;:</span>
<a href="#l4.292"></a><span id="l4.292" class="difflineminus">-        this._prefs.setBoolPref(aName, aValue);</span>
<a href="#l4.293"></a><span id="l4.293" class="difflineminus">-        break;</span>
<a href="#l4.294"></a><span id="l4.294" class="difflineminus">-      case &quot;Number&quot;:</span>
<a href="#l4.295"></a><span id="l4.295" class="difflineminus">-        this._prefs.setIntPref(aName, aValue);</span>
<a href="#l4.296"></a><span id="l4.296" class="difflineminus">-        break;</span>
<a href="#l4.297"></a><span id="l4.297" class="difflineminus">-      default:</span>
<a href="#l4.298"></a><span id="l4.298" class="difflineminus">-        throw (&quot;Unknown preference value specified.&quot;);</span>
<a href="#l4.299"></a><span id="l4.299" class="difflineminus">-    }</span>
<a href="#l4.300"></a><span id="l4.300" class="difflineminus">-  },</span>
<a href="#l4.301"></a><span id="l4.301" class="difflineminus">-</span>
<a href="#l4.302"></a><span id="l4.302" class="difflineminus">-  reset: function prefs_reset() {</span>
<a href="#l4.303"></a><span id="l4.303" class="difflineminus">-    this._prefs.resetBranch(&quot;&quot;);</span>
<a href="#l4.304"></a><span id="l4.304" class="difflineminus">-  },</span>
<a href="#l4.305"></a><span id="l4.305" class="difflineminus">-</span>
<a href="#l4.306"></a><span id="l4.306" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIPreferenceBranch])</span>
<a href="#l4.307"></a><span id="l4.307" class="difflineminus">-};</span>
<a href="#l4.308"></a><span id="l4.308" class="difflineminus">-</span>
<a href="#l4.309"></a><span id="l4.309" class="difflineminus">-</span>
<a href="#l4.310"></a><span id="l4.310" class="difflineminus">-// =================================================</span>
<a href="#l4.311"></a><span id="l4.311" class="difflineminus">-// Preference constructor</span>
<a href="#l4.312"></a><span id="l4.312" class="difflineminus">-function Preference(aName, aBranch) {</span>
<a href="#l4.313"></a><span id="l4.313" class="difflineminus">-  this._name = aName;</span>
<a href="#l4.314"></a><span id="l4.314" class="difflineminus">-  this._branch = aBranch;</span>
<a href="#l4.315"></a><span id="l4.315" class="difflineminus">-</span>
<a href="#l4.316"></a><span id="l4.316" class="difflineminus">-  var self = this;</span>
<a href="#l4.317"></a><span id="l4.317" class="difflineminus">-  this._events = {</span>
<a href="#l4.318"></a><span id="l4.318" class="difflineminus">-    addListener: function pref_al(aEvent, aListener) {</span>
<a href="#l4.319"></a><span id="l4.319" class="difflineminus">-      gPreferenceObserver.addListener(self._branch._prefs, self._name, aEvent, aListener);</span>
<a href="#l4.320"></a><span id="l4.320" class="difflineminus">-    },</span>
<a href="#l4.321"></a><span id="l4.321" class="difflineminus">-    removeListener: function pref_rl(aEvent, aListener) {</span>
<a href="#l4.322"></a><span id="l4.322" class="difflineminus">-      gPreferenceObserver.removeListener(self._branch._prefs, self._name, aEvent, aListener);</span>
<a href="#l4.323"></a><span id="l4.323" class="difflineminus">-    },</span>
<a href="#l4.324"></a><span id="l4.324" class="difflineminus">-    QueryInterface: XPCOMUtils.generateQI([Ci.extIEvents])</span>
<a href="#l4.325"></a><span id="l4.325" class="difflineminus">-  };</span>
<a href="#l4.326"></a><span id="l4.326" class="difflineminus">-}</span>
<a href="#l4.327"></a><span id="l4.327" class="difflineminus">-</span>
<a href="#l4.328"></a><span id="l4.328" class="difflineminus">-// =================================================</span>
<a href="#l4.329"></a><span id="l4.329" class="difflineminus">-// Preference implementation</span>
<a href="#l4.330"></a><span id="l4.330" class="difflineminus">-Preference.prototype = {</span>
<a href="#l4.331"></a><span id="l4.331" class="difflineminus">-  get name() {</span>
<a href="#l4.332"></a><span id="l4.332" class="difflineminus">-    return this._name;</span>
<a href="#l4.333"></a><span id="l4.333" class="difflineminus">-  },</span>
<a href="#l4.334"></a><span id="l4.334" class="difflineminus">-</span>
<a href="#l4.335"></a><span id="l4.335" class="difflineminus">-  get type() {</span>
<a href="#l4.336"></a><span id="l4.336" class="difflineminus">-    var value = &quot;&quot;;</span>
<a href="#l4.337"></a><span id="l4.337" class="difflineminus">-    var type = this.branch._prefs.getPrefType(this._name);</span>
<a href="#l4.338"></a><span id="l4.338" class="difflineminus">-</span>
<a href="#l4.339"></a><span id="l4.339" class="difflineminus">-    switch (type) {</span>
<a href="#l4.340"></a><span id="l4.340" class="difflineminus">-      case Ci.nsIPrefBranch.PREF_STRING:</span>
<a href="#l4.341"></a><span id="l4.341" class="difflineminus">-        value = &quot;String&quot;;</span>
<a href="#l4.342"></a><span id="l4.342" class="difflineminus">-        break;</span>
<a href="#l4.343"></a><span id="l4.343" class="difflineminus">-      case Ci.nsIPrefBranch.PREF_BOOL:</span>
<a href="#l4.344"></a><span id="l4.344" class="difflineminus">-        value = &quot;Boolean&quot;;</span>
<a href="#l4.345"></a><span id="l4.345" class="difflineminus">-        break;</span>
<a href="#l4.346"></a><span id="l4.346" class="difflineminus">-      case Ci.nsIPrefBranch.PREF_INT:</span>
<a href="#l4.347"></a><span id="l4.347" class="difflineminus">-        value = &quot;Number&quot;;</span>
<a href="#l4.348"></a><span id="l4.348" class="difflineminus">-        break;</span>
<a href="#l4.349"></a><span id="l4.349" class="difflineminus">-    }</span>
<a href="#l4.350"></a><span id="l4.350" class="difflineminus">-</span>
<a href="#l4.351"></a><span id="l4.351" class="difflineminus">-    return value;</span>
<a href="#l4.352"></a><span id="l4.352" class="difflineminus">-  },</span>
<a href="#l4.353"></a><span id="l4.353" class="difflineminus">-</span>
<a href="#l4.354"></a><span id="l4.354" class="difflineminus">-  get value() {</span>
<a href="#l4.355"></a><span id="l4.355" class="difflineminus">-    return this.branch.getValue(this._name, null);</span>
<a href="#l4.356"></a><span id="l4.356" class="difflineminus">-  },</span>
<a href="#l4.357"></a><span id="l4.357" class="difflineminus">-</span>
<a href="#l4.358"></a><span id="l4.358" class="difflineminus">-  set value(aValue) {</span>
<a href="#l4.359"></a><span id="l4.359" class="difflineminus">-    return this.branch.setValue(this._name, aValue);</span>
<a href="#l4.360"></a><span id="l4.360" class="difflineminus">-  },</span>
<a href="#l4.361"></a><span id="l4.361" class="difflineminus">-</span>
<a href="#l4.362"></a><span id="l4.362" class="difflineminus">-  get locked() {</span>
<a href="#l4.363"></a><span id="l4.363" class="difflineminus">-    return this.branch._prefs.prefIsLocked(this.name);</span>
<a href="#l4.364"></a><span id="l4.364" class="difflineminus">-  },</span>
<a href="#l4.365"></a><span id="l4.365" class="difflineminus">-</span>
<a href="#l4.366"></a><span id="l4.366" class="difflineminus">-  set locked(aValue) {</span>
<a href="#l4.367"></a><span id="l4.367" class="difflineminus">-    this.branch._prefs[aValue ? &quot;lockPref&quot; : &quot;unlockPref&quot;](this.name);</span>
<a href="#l4.368"></a><span id="l4.368" class="difflineminus">-  },</span>
<a href="#l4.369"></a><span id="l4.369" class="difflineminus">-</span>
<a href="#l4.370"></a><span id="l4.370" class="difflineminus">-  get modified() {</span>
<a href="#l4.371"></a><span id="l4.371" class="difflineminus">-    return this.branch._prefs.prefHasUserValue(this.name);</span>
<a href="#l4.372"></a><span id="l4.372" class="difflineminus">-  },</span>
<a href="#l4.373"></a><span id="l4.373" class="difflineminus">-</span>
<a href="#l4.374"></a><span id="l4.374" class="difflineminus">-  get branch() {</span>
<a href="#l4.375"></a><span id="l4.375" class="difflineminus">-    return this._branch;</span>
<a href="#l4.376"></a><span id="l4.376" class="difflineminus">-  },</span>
<a href="#l4.377"></a><span id="l4.377" class="difflineminus">-</span>
<a href="#l4.378"></a><span id="l4.378" class="difflineminus">-  get events() {</span>
<a href="#l4.379"></a><span id="l4.379" class="difflineminus">-    return this._events;</span>
<a href="#l4.380"></a><span id="l4.380" class="difflineminus">-  },</span>
<a href="#l4.381"></a><span id="l4.381" class="difflineminus">-</span>
<a href="#l4.382"></a><span id="l4.382" class="difflineminus">-  reset: function pref_reset() {</span>
<a href="#l4.383"></a><span id="l4.383" class="difflineminus">-    this.branch._prefs.clearUserPref(this.name);</span>
<a href="#l4.384"></a><span id="l4.384" class="difflineminus">-  },</span>
<a href="#l4.385"></a><span id="l4.385" class="difflineminus">-</span>
<a href="#l4.386"></a><span id="l4.386" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIPreference])</span>
<a href="#l4.387"></a><span id="l4.387" class="difflineminus">-};</span>
<a href="#l4.388"></a><span id="l4.388" class="difflineminus">-</span>
<a href="#l4.389"></a><span id="l4.389" class="difflineminus">-</span>
<a href="#l4.390"></a><span id="l4.390" class="difflineminus">-// =================================================</span>
<a href="#l4.391"></a><span id="l4.391" class="difflineminus">-// SessionStorage constructor</span>
<a href="#l4.392"></a><span id="l4.392" class="difflineminus">-function SessionStorage() {</span>
<a href="#l4.393"></a><span id="l4.393" class="difflineminus">-  this._storage = {};</span>
<a href="#l4.394"></a><span id="l4.394" class="difflineminus">-  this._events = new Events();</span>
<a href="#l4.395"></a><span id="l4.395" class="difflineminus">-}</span>
<a href="#l4.396"></a><span id="l4.396" class="difflineminus">-</span>
<a href="#l4.397"></a><span id="l4.397" class="difflineminus">-// =================================================</span>
<a href="#l4.398"></a><span id="l4.398" class="difflineminus">-// SessionStorage implementation</span>
<a href="#l4.399"></a><span id="l4.399" class="difflineminus">-SessionStorage.prototype = {</span>
<a href="#l4.400"></a><span id="l4.400" class="difflineminus">-  get events() {</span>
<a href="#l4.401"></a><span id="l4.401" class="difflineminus">-    return this._events;</span>
<a href="#l4.402"></a><span id="l4.402" class="difflineminus">-  },</span>
<a href="#l4.403"></a><span id="l4.403" class="difflineminus">-</span>
<a href="#l4.404"></a><span id="l4.404" class="difflineminus">-  has: function ss_has(aName) {</span>
<a href="#l4.405"></a><span id="l4.405" class="difflineminus">-    return this._storage.hasOwnProperty(aName);</span>
<a href="#l4.406"></a><span id="l4.406" class="difflineminus">-  },</span>
<a href="#l4.407"></a><span id="l4.407" class="difflineminus">-</span>
<a href="#l4.408"></a><span id="l4.408" class="difflineminus">-  set: function ss_set(aName, aValue) {</span>
<a href="#l4.409"></a><span id="l4.409" class="difflineminus">-    this._storage[aName] = aValue;</span>
<a href="#l4.410"></a><span id="l4.410" class="difflineminus">-    this._events.dispatch(&quot;change&quot;, aName);</span>
<a href="#l4.411"></a><span id="l4.411" class="difflineminus">-  },</span>
<a href="#l4.412"></a><span id="l4.412" class="difflineminus">-</span>
<a href="#l4.413"></a><span id="l4.413" class="difflineminus">-  get: function ss_get(aName, aDefaultValue) {</span>
<a href="#l4.414"></a><span id="l4.414" class="difflineminus">-    return this.has(aName) ? this._storage[aName] : aDefaultValue;</span>
<a href="#l4.415"></a><span id="l4.415" class="difflineminus">-  },</span>
<a href="#l4.416"></a><span id="l4.416" class="difflineminus">-</span>
<a href="#l4.417"></a><span id="l4.417" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extISessionStorage])</span>
<a href="#l4.418"></a><span id="l4.418" class="difflineminus">-};</span>
<a href="#l4.419"></a><span id="l4.419" class="difflineminus">-</span>
<a href="#l4.420"></a><span id="l4.420" class="difflineminus">-// =================================================</span>
<a href="#l4.421"></a><span id="l4.421" class="difflineminus">-// ExtensionObserver constructor (internal class)</span>
<a href="#l4.422"></a><span id="l4.422" class="difflineminus">-//</span>
<a href="#l4.423"></a><span id="l4.423" class="difflineminus">-// ExtensionObserver is a global singleton which watches the browser's</span>
<a href="#l4.424"></a><span id="l4.424" class="difflineminus">-// extensions and sends you events when things change.</span>
<a href="#l4.425"></a><span id="l4.425" class="difflineminus">-</span>
<a href="#l4.426"></a><span id="l4.426" class="difflineminus">-function ExtensionObserver() {</span>
<a href="#l4.427"></a><span id="l4.427" class="difflineminus">-  this._eventsDict = {};</span>
<a href="#l4.428"></a><span id="l4.428" class="difflineminus">-</span>
<a href="#l4.429"></a><span id="l4.429" class="difflineminus">-  AddonManager.addAddonListener(this);</span>
<a href="#l4.430"></a><span id="l4.430" class="difflineminus">-  AddonManager.addInstallListener(this);</span>
<a href="#l4.431"></a><span id="l4.431" class="difflineminus">-}</span>
<a href="#l4.432"></a><span id="l4.432" class="difflineminus">-</span>
<a href="#l4.433"></a><span id="l4.433" class="difflineminus">-// =================================================</span>
<a href="#l4.434"></a><span id="l4.434" class="difflineminus">-// ExtensionObserver implementation (internal class)</span>
<a href="#l4.435"></a><span id="l4.435" class="difflineminus">-ExtensionObserver.prototype = {</span>
<a href="#l4.436"></a><span id="l4.436" class="difflineminus">-  onDisabling: function eo_onDisabling(addon, needsRestart) {</span>
<a href="#l4.437"></a><span id="l4.437" class="difflineminus">-    this._dispatchEvent(addon.id, &quot;disable&quot;);</span>
<a href="#l4.438"></a><span id="l4.438" class="difflineminus">-  },</span>
<a href="#l4.439"></a><span id="l4.439" class="difflineminus">-</span>
<a href="#l4.440"></a><span id="l4.440" class="difflineminus">-  onEnabling: function eo_onEnabling(addon, needsRestart) {</span>
<a href="#l4.441"></a><span id="l4.441" class="difflineminus">-    this._dispatchEvent(addon.id, &quot;enable&quot;);</span>
<a href="#l4.442"></a><span id="l4.442" class="difflineminus">-  },</span>
<a href="#l4.443"></a><span id="l4.443" class="difflineminus">-</span>
<a href="#l4.444"></a><span id="l4.444" class="difflineminus">-  onUninstalling: function eo_onUninstalling(addon, needsRestart) {</span>
<a href="#l4.445"></a><span id="l4.445" class="difflineminus">-    this._dispatchEvent(addon.id, &quot;uninstall&quot;);</span>
<a href="#l4.446"></a><span id="l4.446" class="difflineminus">-  },</span>
<a href="#l4.447"></a><span id="l4.447" class="difflineminus">-</span>
<a href="#l4.448"></a><span id="l4.448" class="difflineminus">-  onOperationCancelled: function eo_onOperationCancelled(addon) {</span>
<a href="#l4.449"></a><span id="l4.449" class="difflineminus">-    this._dispatchEvent(addon.id, &quot;cancel&quot;);</span>
<a href="#l4.450"></a><span id="l4.450" class="difflineminus">-  },</span>
<a href="#l4.451"></a><span id="l4.451" class="difflineminus">-</span>
<a href="#l4.452"></a><span id="l4.452" class="difflineminus">-  onInstallEnded: function eo_onInstallEnded(install, addon) {</span>
<a href="#l4.453"></a><span id="l4.453" class="difflineminus">-    this._dispatchEvent(addon.id, &quot;upgrade&quot;);</span>
<a href="#l4.454"></a><span id="l4.454" class="difflineminus">-  },</span>
<a href="#l4.455"></a><span id="l4.455" class="difflineminus">-</span>
<a href="#l4.456"></a><span id="l4.456" class="difflineminus">-  addListener: function eo_al(aId, aEvent, aListener) {</span>
<a href="#l4.457"></a><span id="l4.457" class="difflineminus">-    var events = this._eventsDict[aId];</span>
<a href="#l4.458"></a><span id="l4.458" class="difflineminus">-    if (!events) {</span>
<a href="#l4.459"></a><span id="l4.459" class="difflineminus">-      events = new Events();</span>
<a href="#l4.460"></a><span id="l4.460" class="difflineminus">-      this._eventsDict[aId] = events;</span>
<a href="#l4.461"></a><span id="l4.461" class="difflineminus">-    }</span>
<a href="#l4.462"></a><span id="l4.462" class="difflineminus">-    events.addListener(aEvent, aListener);</span>
<a href="#l4.463"></a><span id="l4.463" class="difflineminus">-  },</span>
<a href="#l4.464"></a><span id="l4.464" class="difflineminus">-</span>
<a href="#l4.465"></a><span id="l4.465" class="difflineminus">-  removeListener: function eo_rl(aId, aEvent, aListener) {</span>
<a href="#l4.466"></a><span id="l4.466" class="difflineminus">-    var events = this._eventsDict[aId];</span>
<a href="#l4.467"></a><span id="l4.467" class="difflineminus">-    if (!events) {</span>
<a href="#l4.468"></a><span id="l4.468" class="difflineminus">-      return;</span>
<a href="#l4.469"></a><span id="l4.469" class="difflineminus">-    }</span>
<a href="#l4.470"></a><span id="l4.470" class="difflineminus">-    events.removeListener(aEvent, aListener);</span>
<a href="#l4.471"></a><span id="l4.471" class="difflineminus">-    if (events._listeners.length == 0) {</span>
<a href="#l4.472"></a><span id="l4.472" class="difflineminus">-      delete this._eventsDict[aId];</span>
<a href="#l4.473"></a><span id="l4.473" class="difflineminus">-    }</span>
<a href="#l4.474"></a><span id="l4.474" class="difflineminus">-  },</span>
<a href="#l4.475"></a><span id="l4.475" class="difflineminus">-</span>
<a href="#l4.476"></a><span id="l4.476" class="difflineminus">-  _dispatchEvent: function eo_dispatchEvent(aId, aEvent) {</span>
<a href="#l4.477"></a><span id="l4.477" class="difflineminus">-    var events = this._eventsDict[aId];</span>
<a href="#l4.478"></a><span id="l4.478" class="difflineminus">-    if (events) {</span>
<a href="#l4.479"></a><span id="l4.479" class="difflineminus">-      events.dispatch(aEvent, aId);</span>
<a href="#l4.480"></a><span id="l4.480" class="difflineminus">-    }</span>
<a href="#l4.481"></a><span id="l4.481" class="difflineminus">-  }</span>
<a href="#l4.482"></a><span id="l4.482" class="difflineminus">-};</span>
<a href="#l4.483"></a><span id="l4.483" class="difflineminus">-</span>
<a href="#l4.484"></a><span id="l4.484" class="difflineminus">-// =================================================</span>
<a href="#l4.485"></a><span id="l4.485" class="difflineminus">-// Extension constructor</span>
<a href="#l4.486"></a><span id="l4.486" class="difflineminus">-function Extension(aItem) {</span>
<a href="#l4.487"></a><span id="l4.487" class="difflineminus">-  this._item = aItem;</span>
<a href="#l4.488"></a><span id="l4.488" class="difflineminus">-  this._firstRun = false;</span>
<a href="#l4.489"></a><span id="l4.489" class="difflineminus">-  this._prefs = new PreferenceBranch(&quot;extensions.&quot; + this.id + &quot;.&quot;);</span>
<a href="#l4.490"></a><span id="l4.490" class="difflineminus">-  this._storage = new SessionStorage();</span>
<a href="#l4.491"></a><span id="l4.491" class="difflineminus">-</span>
<a href="#l4.492"></a><span id="l4.492" class="difflineminus">-  let id = this.id;</span>
<a href="#l4.493"></a><span id="l4.493" class="difflineminus">-  this._events = {</span>
<a href="#l4.494"></a><span id="l4.494" class="difflineminus">-    addListener: function ext_events_al(aEvent, aListener) {</span>
<a href="#l4.495"></a><span id="l4.495" class="difflineminus">-      gExtensionObserver.addListener(id, aEvent, aListener);</span>
<a href="#l4.496"></a><span id="l4.496" class="difflineminus">-    },</span>
<a href="#l4.497"></a><span id="l4.497" class="difflineminus">-    removeListener: function ext_events_rl(aEvent, aListener) {</span>
<a href="#l4.498"></a><span id="l4.498" class="difflineminus">-      gExtensionObserver.addListener(id, aEvent, aListener);</span>
<a href="#l4.499"></a><span id="l4.499" class="difflineminus">-    },</span>
<a href="#l4.500"></a><span id="l4.500" class="difflineminus">-    QueryInterface: XPCOMUtils.generateQI([Ci.extIEvents])</span>
<a href="#l4.501"></a><span id="l4.501" class="difflineminus">-  };</span>
<a href="#l4.502"></a><span id="l4.502" class="difflineminus">-</span>
<a href="#l4.503"></a><span id="l4.503" class="difflineminus">-  var installPref = &quot;install-event-fired&quot;;</span>
<a href="#l4.504"></a><span id="l4.504" class="difflineminus">-  if (!this._prefs.has(installPref)) {</span>
<a href="#l4.505"></a><span id="l4.505" class="difflineminus">-    this._prefs.setValue(installPref, true);</span>
<a href="#l4.506"></a><span id="l4.506" class="difflineminus">-    this._firstRun = true;</span>
<a href="#l4.507"></a><span id="l4.507" class="difflineminus">-  }</span>
<a href="#l4.508"></a><span id="l4.508" class="difflineminus">-}</span>
<a href="#l4.509"></a><span id="l4.509" class="difflineminus">-</span>
<a href="#l4.510"></a><span id="l4.510" class="difflineminus">-// =================================================</span>
<a href="#l4.511"></a><span id="l4.511" class="difflineminus">-// Extension implementation</span>
<a href="#l4.512"></a><span id="l4.512" class="difflineminus">-Extension.prototype = {</span>
<a href="#l4.513"></a><span id="l4.513" class="difflineminus">-  get id() {</span>
<a href="#l4.514"></a><span id="l4.514" class="difflineminus">-    return this._item.id;</span>
<a href="#l4.515"></a><span id="l4.515" class="difflineminus">-  },</span>
<a href="#l4.516"></a><span id="l4.516" class="difflineminus">-</span>
<a href="#l4.517"></a><span id="l4.517" class="difflineminus">-  get name() {</span>
<a href="#l4.518"></a><span id="l4.518" class="difflineminus">-    return this._item.name;</span>
<a href="#l4.519"></a><span id="l4.519" class="difflineminus">-  },</span>
<a href="#l4.520"></a><span id="l4.520" class="difflineminus">-</span>
<a href="#l4.521"></a><span id="l4.521" class="difflineminus">-  get enabled() {</span>
<a href="#l4.522"></a><span id="l4.522" class="difflineminus">-    return this._item.isActive;</span>
<a href="#l4.523"></a><span id="l4.523" class="difflineminus">-  },</span>
<a href="#l4.524"></a><span id="l4.524" class="difflineminus">-</span>
<a href="#l4.525"></a><span id="l4.525" class="difflineminus">-  get version() {</span>
<a href="#l4.526"></a><span id="l4.526" class="difflineminus">-    return this._item.version;</span>
<a href="#l4.527"></a><span id="l4.527" class="difflineminus">-  },</span>
<a href="#l4.528"></a><span id="l4.528" class="difflineminus">-</span>
<a href="#l4.529"></a><span id="l4.529" class="difflineminus">-  get firstRun() {</span>
<a href="#l4.530"></a><span id="l4.530" class="difflineminus">-    return this._firstRun;</span>
<a href="#l4.531"></a><span id="l4.531" class="difflineminus">-  },</span>
<a href="#l4.532"></a><span id="l4.532" class="difflineminus">-</span>
<a href="#l4.533"></a><span id="l4.533" class="difflineminus">-  get storage() {</span>
<a href="#l4.534"></a><span id="l4.534" class="difflineminus">-    return this._storage;</span>
<a href="#l4.535"></a><span id="l4.535" class="difflineminus">-  },</span>
<a href="#l4.536"></a><span id="l4.536" class="difflineminus">-</span>
<a href="#l4.537"></a><span id="l4.537" class="difflineminus">-  get prefs() {</span>
<a href="#l4.538"></a><span id="l4.538" class="difflineminus">-    return this._prefs;</span>
<a href="#l4.539"></a><span id="l4.539" class="difflineminus">-  },</span>
<a href="#l4.540"></a><span id="l4.540" class="difflineminus">-</span>
<a href="#l4.541"></a><span id="l4.541" class="difflineminus">-  get events() {</span>
<a href="#l4.542"></a><span id="l4.542" class="difflineminus">-    return this._events;</span>
<a href="#l4.543"></a><span id="l4.543" class="difflineminus">-  },</span>
<a href="#l4.544"></a><span id="l4.544" class="difflineminus">-</span>
<a href="#l4.545"></a><span id="l4.545" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIExtension])</span>
<a href="#l4.546"></a><span id="l4.546" class="difflineminus">-};</span>
<a href="#l4.547"></a><span id="l4.547" class="difflineminus">-</span>
<a href="#l4.548"></a><span id="l4.548" class="difflineminus">-</span>
<a href="#l4.549"></a><span id="l4.549" class="difflineminus">-// =================================================</span>
<a href="#l4.550"></a><span id="l4.550" class="difflineminus">-// Extensions constructor</span>
<a href="#l4.551"></a><span id="l4.551" class="difflineminus">-function Extensions(addons) {</span>
<a href="#l4.552"></a><span id="l4.552" class="difflineminus">-  this._cache = {};</span>
<a href="#l4.553"></a><span id="l4.553" class="difflineminus">-</span>
<a href="#l4.554"></a><span id="l4.554" class="difflineminus">-  addons.forEach(function(addon) {</span>
<a href="#l4.555"></a><span id="l4.555" class="difflineminus">-    this._cache[addon.id] = new Extension(addon);</span>
<a href="#l4.556"></a><span id="l4.556" class="difflineminus">-  }, this);</span>
<a href="#l4.557"></a><span id="l4.557" class="difflineminus">-}</span>
<a href="#l4.558"></a><span id="l4.558" class="difflineminus">-</span>
<a href="#l4.559"></a><span id="l4.559" class="difflineminus">-// =================================================</span>
<a href="#l4.560"></a><span id="l4.560" class="difflineminus">-// Extensions implementation</span>
<a href="#l4.561"></a><span id="l4.561" class="difflineminus">-Extensions.prototype = {</span>
<a href="#l4.562"></a><span id="l4.562" class="difflineminus">-  get all() {</span>
<a href="#l4.563"></a><span id="l4.563" class="difflineminus">-    return this.find({});</span>
<a href="#l4.564"></a><span id="l4.564" class="difflineminus">-  },</span>
<a href="#l4.565"></a><span id="l4.565" class="difflineminus">-</span>
<a href="#l4.566"></a><span id="l4.566" class="difflineminus">-  // XXX: Disabled until we can figure out the wrapped object issues</span>
<a href="#l4.567"></a><span id="l4.567" class="difflineminus">-  // id: &quot;some@id&quot; or /id/</span>
<a href="#l4.568"></a><span id="l4.568" class="difflineminus">-  // name: &quot;name&quot; or /name/</span>
<a href="#l4.569"></a><span id="l4.569" class="difflineminus">-  // version: &quot;1.0.1&quot;</span>
<a href="#l4.570"></a><span id="l4.570" class="difflineminus">-  // minVersion: &quot;1.0&quot;</span>
<a href="#l4.571"></a><span id="l4.571" class="difflineminus">-  // maxVersion: &quot;2.0&quot;</span>
<a href="#l4.572"></a><span id="l4.572" class="difflineminus">-  find: function exts_find(aOptions) {</span>
<a href="#l4.573"></a><span id="l4.573" class="difflineminus">-    return Object.keys(this._cache).map(id =&gt; this._cache[id]);</span>
<a href="#l4.574"></a><span id="l4.574" class="difflineminus">-  },</span>
<a href="#l4.575"></a><span id="l4.575" class="difflineminus">-</span>
<a href="#l4.576"></a><span id="l4.576" class="difflineminus">-  has: function exts_has(aId) {</span>
<a href="#l4.577"></a><span id="l4.577" class="difflineminus">-    return aId in this._cache;</span>
<a href="#l4.578"></a><span id="l4.578" class="difflineminus">-  },</span>
<a href="#l4.579"></a><span id="l4.579" class="difflineminus">-</span>
<a href="#l4.580"></a><span id="l4.580" class="difflineminus">-  get: function exts_get(aId) {</span>
<a href="#l4.581"></a><span id="l4.581" class="difflineminus">-    return this.has(aId) ? this._cache[aId] : null;</span>
<a href="#l4.582"></a><span id="l4.582" class="difflineminus">-  },</span>
<a href="#l4.583"></a><span id="l4.583" class="difflineminus">-</span>
<a href="#l4.584"></a><span id="l4.584" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIExtensions])</span>
<a href="#l4.585"></a><span id="l4.585" class="difflineminus">-};</span>
<a href="#l4.586"></a><span id="l4.586" class="difflineminus">-</span>
<a href="#l4.587"></a><span id="l4.587" class="difflineminus">-// =================================================</span>
<a href="#l4.588"></a><span id="l4.588" class="difflineminus">-// Application globals</span>
<a href="#l4.589"></a><span id="l4.589" class="difflineminus">-</span>
<a href="#l4.590"></a><span id="l4.590" class="difflineminus">-var gExtensionObserver = new ExtensionObserver();</span>
<a href="#l4.591"></a><span id="l4.591" class="difflineminus">-var gPreferenceObserver = new PreferenceObserver();</span>
<a href="#l4.592"></a><span id="l4.592" class="difflineminus">-</span>
<a href="#l4.593"></a><span id="l4.593" class="difflineminus">-// =================================================</span>
<a href="#l4.594"></a><span id="l4.594" class="difflineminus">-// extApplication constructor</span>
<a href="#l4.595"></a><span id="l4.595" class="difflineminus">-function extApplication() {</span>
<a href="#l4.596"></a><span id="l4.596" class="difflineminus">-}</span>
<a href="#l4.597"></a><span id="l4.597" class="difflineminus">-</span>
<a href="#l4.598"></a><span id="l4.598" class="difflineminus">-// =================================================</span>
<a href="#l4.599"></a><span id="l4.599" class="difflineminus">-// extApplication implementation</span>
<a href="#l4.600"></a><span id="l4.600" class="difflineminus">-extApplication.prototype = {</span>
<a href="#l4.601"></a><span id="l4.601" class="difflineminus">-  initToolkitHelpers: function extApp_initToolkitHelpers() {</span>
<a href="#l4.602"></a><span id="l4.602" class="difflineminus">-    XPCOMUtils.defineLazyServiceGetter(this, &quot;_info&quot;,</span>
<a href="#l4.603"></a><span id="l4.603" class="difflineminus">-                                       &quot;@mozilla.org/xre/app-info;1&quot;,</span>
<a href="#l4.604"></a><span id="l4.604" class="difflineminus">-                                       &quot;nsIXULAppInfo&quot;);</span>
<a href="#l4.605"></a><span id="l4.605" class="difflineminus">-</span>
<a href="#l4.606"></a><span id="l4.606" class="difflineminus">-    this._obs = Cc[&quot;@mozilla.org/observer-service;1&quot;].</span>
<a href="#l4.607"></a><span id="l4.607" class="difflineminus">-                getService(Ci.nsIObserverService);</span>
<a href="#l4.608"></a><span id="l4.608" class="difflineminus">-    this._obs.addObserver(this, &quot;xpcom-shutdown&quot;, /* ownsWeak = */ true);</span>
<a href="#l4.609"></a><span id="l4.609" class="difflineminus">-    this._registered = {&quot;unload&quot;: true};</span>
<a href="#l4.610"></a><span id="l4.610" class="difflineminus">-  },</span>
<a href="#l4.611"></a><span id="l4.611" class="difflineminus">-</span>
<a href="#l4.612"></a><span id="l4.612" class="difflineminus">-  classInfo: XPCOMUtils.generateCI({interfaces: [Ci.extIApplication,</span>
<a href="#l4.613"></a><span id="l4.613" class="difflineminus">-                                                 Ci.nsIObserver],</span>
<a href="#l4.614"></a><span id="l4.614" class="difflineminus">-                                    flags: Ci.nsIClassInfo.SINGLETON}),</span>
<a href="#l4.615"></a><span id="l4.615" class="difflineminus">-</span>
<a href="#l4.616"></a><span id="l4.616" class="difflineminus">-  // extIApplication</span>
<a href="#l4.617"></a><span id="l4.617" class="difflineminus">-  get id() {</span>
<a href="#l4.618"></a><span id="l4.618" class="difflineminus">-    return this._info.ID;</span>
<a href="#l4.619"></a><span id="l4.619" class="difflineminus">-  },</span>
<a href="#l4.620"></a><span id="l4.620" class="difflineminus">-</span>
<a href="#l4.621"></a><span id="l4.621" class="difflineminus">-  get name() {</span>
<a href="#l4.622"></a><span id="l4.622" class="difflineminus">-    return this._info.name;</span>
<a href="#l4.623"></a><span id="l4.623" class="difflineminus">-  },</span>
<a href="#l4.624"></a><span id="l4.624" class="difflineminus">-</span>
<a href="#l4.625"></a><span id="l4.625" class="difflineminus">-  get version() {</span>
<a href="#l4.626"></a><span id="l4.626" class="difflineminus">-    return this._info.version;</span>
<a href="#l4.627"></a><span id="l4.627" class="difflineminus">-  },</span>
<a href="#l4.628"></a><span id="l4.628" class="difflineminus">-</span>
<a href="#l4.629"></a><span id="l4.629" class="difflineminus">-  // for nsIObserver</span>
<a href="#l4.630"></a><span id="l4.630" class="difflineminus">-  observe: function app_observe(aSubject, aTopic, aData) {</span>
<a href="#l4.631"></a><span id="l4.631" class="difflineminus">-    if (aTopic == &quot;app-startup&quot;) {</span>
<a href="#l4.632"></a><span id="l4.632" class="difflineminus">-      this.events.dispatch(&quot;load&quot;, &quot;application&quot;);</span>
<a href="#l4.633"></a><span id="l4.633" class="difflineminus">-    } else if (aTopic == &quot;final-ui-startup&quot;) {</span>
<a href="#l4.634"></a><span id="l4.634" class="difflineminus">-      this.events.dispatch(&quot;ready&quot;, &quot;application&quot;);</span>
<a href="#l4.635"></a><span id="l4.635" class="difflineminus">-    } else if (aTopic == &quot;quit-application-requested&quot;) {</span>
<a href="#l4.636"></a><span id="l4.636" class="difflineminus">-      // we can stop the quit by checking the return value</span>
<a href="#l4.637"></a><span id="l4.637" class="difflineminus">-      if (this.events.dispatch(&quot;quit&quot;, &quot;application&quot;) == false)</span>
<a href="#l4.638"></a><span id="l4.638" class="difflineminus">-        aSubject.data = true;</span>
<a href="#l4.639"></a><span id="l4.639" class="difflineminus">-    } else if (aTopic == &quot;xpcom-shutdown&quot;) {</span>
<a href="#l4.640"></a><span id="l4.640" class="difflineminus">-      this.events.dispatch(&quot;unload&quot;, &quot;application&quot;);</span>
<a href="#l4.641"></a><span id="l4.641" class="difflineminus">-      gExtensionObserver = null;</span>
<a href="#l4.642"></a><span id="l4.642" class="difflineminus">-      gPreferenceObserver = null;</span>
<a href="#l4.643"></a><span id="l4.643" class="difflineminus">-    }</span>
<a href="#l4.644"></a><span id="l4.644" class="difflineminus">-  },</span>
<a href="#l4.645"></a><span id="l4.645" class="difflineminus">-</span>
<a href="#l4.646"></a><span id="l4.646" class="difflineminus">-  get console() {</span>
<a href="#l4.647"></a><span id="l4.647" class="difflineminus">-    let console = new Console();</span>
<a href="#l4.648"></a><span id="l4.648" class="difflineminus">-    this.__defineGetter__(&quot;console&quot;, () =&gt; console);</span>
<a href="#l4.649"></a><span id="l4.649" class="difflineminus">-    return this.console;</span>
<a href="#l4.650"></a><span id="l4.650" class="difflineminus">-  },</span>
<a href="#l4.651"></a><span id="l4.651" class="difflineminus">-</span>
<a href="#l4.652"></a><span id="l4.652" class="difflineminus">-  get storage() {</span>
<a href="#l4.653"></a><span id="l4.653" class="difflineminus">-    let storage = new SessionStorage();</span>
<a href="#l4.654"></a><span id="l4.654" class="difflineminus">-    this.__defineGetter__(&quot;storage&quot;, () =&gt; storage);</span>
<a href="#l4.655"></a><span id="l4.655" class="difflineminus">-    return this.storage;</span>
<a href="#l4.656"></a><span id="l4.656" class="difflineminus">-  },</span>
<a href="#l4.657"></a><span id="l4.657" class="difflineminus">-</span>
<a href="#l4.658"></a><span id="l4.658" class="difflineminus">-  get prefs() {</span>
<a href="#l4.659"></a><span id="l4.659" class="difflineminus">-    let prefs = new PreferenceBranch(&quot;&quot;);</span>
<a href="#l4.660"></a><span id="l4.660" class="difflineminus">-    this.__defineGetter__(&quot;prefs&quot;, () =&gt; prefs);</span>
<a href="#l4.661"></a><span id="l4.661" class="difflineminus">-    return this.prefs;</span>
<a href="#l4.662"></a><span id="l4.662" class="difflineminus">-  },</span>
<a href="#l4.663"></a><span id="l4.663" class="difflineminus">-</span>
<a href="#l4.664"></a><span id="l4.664" class="difflineminus">-  getExtensions(callback) {</span>
<a href="#l4.665"></a><span id="l4.665" class="difflineminus">-    AddonManager.getAddonsByTypes([&quot;extension&quot;], function(addons) {</span>
<a href="#l4.666"></a><span id="l4.666" class="difflineminus">-      callback.callback(new Extensions(addons));</span>
<a href="#l4.667"></a><span id="l4.667" class="difflineminus">-    });</span>
<a href="#l4.668"></a><span id="l4.668" class="difflineminus">-  },</span>
<a href="#l4.669"></a><span id="l4.669" class="difflineminus">-</span>
<a href="#l4.670"></a><span id="l4.670" class="difflineminus">-  get events() {</span>
<a href="#l4.671"></a><span id="l4.671" class="difflineminus">-</span>
<a href="#l4.672"></a><span id="l4.672" class="difflineminus">-    // This ensures that FUEL only registers for notifications as needed</span>
<a href="#l4.673"></a><span id="l4.673" class="difflineminus">-    // by callers. Note that the unload (xpcom-shutdown) event is listened</span>
<a href="#l4.674"></a><span id="l4.674" class="difflineminus">-    // for by default, as it's needed for cleanup purposes.</span>
<a href="#l4.675"></a><span id="l4.675" class="difflineminus">-    var self = this;</span>
<a href="#l4.676"></a><span id="l4.676" class="difflineminus">-    function registerCheck(aEvent) {</span>
<a href="#l4.677"></a><span id="l4.677" class="difflineminus">-      var rmap = { &quot;load&quot;: &quot;app-startup&quot;,</span>
<a href="#l4.678"></a><span id="l4.678" class="difflineminus">-                   &quot;ready&quot;: &quot;final-ui-startup&quot;,</span>
<a href="#l4.679"></a><span id="l4.679" class="difflineminus">-                   &quot;quit&quot;: &quot;quit-application-requested&quot;};</span>
<a href="#l4.680"></a><span id="l4.680" class="difflineminus">-      if (!(aEvent in rmap) || aEvent in self._registered)</span>
<a href="#l4.681"></a><span id="l4.681" class="difflineminus">-        return;</span>
<a href="#l4.682"></a><span id="l4.682" class="difflineminus">-</span>
<a href="#l4.683"></a><span id="l4.683" class="difflineminus">-      self._obs.addObserver(self, rmap[aEvent], /* ownsWeak = */ true);</span>
<a href="#l4.684"></a><span id="l4.684" class="difflineminus">-      self._registered[aEvent] = true;</span>
<a href="#l4.685"></a><span id="l4.685" class="difflineminus">-    }</span>
<a href="#l4.686"></a><span id="l4.686" class="difflineminus">-</span>
<a href="#l4.687"></a><span id="l4.687" class="difflineminus">-    let events = new Events(registerCheck);</span>
<a href="#l4.688"></a><span id="l4.688" class="difflineminus">-    this.__defineGetter__(&quot;events&quot;, () =&gt; events);</span>
<a href="#l4.689"></a><span id="l4.689" class="difflineminus">-    return this.events;</span>
<a href="#l4.690"></a><span id="l4.690" class="difflineminus">-  },</span>
<a href="#l4.691"></a><span id="l4.691" class="difflineminus">-</span>
<a href="#l4.692"></a><span id="l4.692" class="difflineminus">-  // helper method for correct quitting/restarting</span>
<a href="#l4.693"></a><span id="l4.693" class="difflineminus">-  _quitWithFlags: function app__quitWithFlags(aFlags) {</span>
<a href="#l4.694"></a><span id="l4.694" class="difflineminus">-    let cancelQuit = Components.classes[&quot;@mozilla.org/supports-PRBool;1&quot;]</span>
<a href="#l4.695"></a><span id="l4.695" class="difflineminus">-                               .createInstance(Components.interfaces.nsISupportsPRBool);</span>
<a href="#l4.696"></a><span id="l4.696" class="difflineminus">-    let quitType = aFlags &amp; Components.interfaces.nsIAppStartup.eRestart ? &quot;restart&quot; : null;</span>
<a href="#l4.697"></a><span id="l4.697" class="difflineminus">-    this._obs.notifyObservers(cancelQuit, &quot;quit-application-requested&quot;, quitType);</span>
<a href="#l4.698"></a><span id="l4.698" class="difflineminus">-    if (cancelQuit.data)</span>
<a href="#l4.699"></a><span id="l4.699" class="difflineminus">-      return false; // somebody canceled our quit request</span>
<a href="#l4.700"></a><span id="l4.700" class="difflineminus">-</span>
<a href="#l4.701"></a><span id="l4.701" class="difflineminus">-    let appStartup = Components.classes[&quot;@mozilla.org/toolkit/app-startup;1&quot;]</span>
<a href="#l4.702"></a><span id="l4.702" class="difflineminus">-                               .getService(Components.interfaces.nsIAppStartup);</span>
<a href="#l4.703"></a><span id="l4.703" class="difflineminus">-    appStartup.quit(aFlags);</span>
<a href="#l4.704"></a><span id="l4.704" class="difflineminus">-    return true;</span>
<a href="#l4.705"></a><span id="l4.705" class="difflineminus">-  },</span>
<a href="#l4.706"></a><span id="l4.706" class="difflineminus">-</span>
<a href="#l4.707"></a><span id="l4.707" class="difflineminus">-  quit: function app_quit() {</span>
<a href="#l4.708"></a><span id="l4.708" class="difflineminus">-    return this._quitWithFlags(Components.interfaces.nsIAppStartup.eAttemptQuit);</span>
<a href="#l4.709"></a><span id="l4.709" class="difflineminus">-  },</span>
<a href="#l4.710"></a><span id="l4.710" class="difflineminus">-</span>
<a href="#l4.711"></a><span id="l4.711" class="difflineminus">-  restart: function app_restart() {</span>
<a href="#l4.712"></a><span id="l4.712" class="difflineminus">-    return this._quitWithFlags(Components.interfaces.nsIAppStartup.eAttemptQuit |</span>
<a href="#l4.713"></a><span id="l4.713" class="difflineminus">-                               Components.interfaces.nsIAppStartup.eRestart);</span>
<a href="#l4.714"></a><span id="l4.714" class="difflineminus">-  },</span>
<a href="#l4.715"></a><span id="l4.715" class="difflineminus">-</span>
<a href="#l4.716"></a><span id="l4.716" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.extIApplication, Ci.nsISupportsWeakReference])</span>
<a href="#l4.717"></a><span id="l4.717" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l5.1"></a><span id="l5.1">deleted file mode 100644</span>
<a href="#l5.2"></a><span id="l5.2" class="difflineminus">--- a/suite/smile/exthelper/extIApplication.idl</span>
<a href="#l5.3"></a><span id="l5.3" class="difflineplus">+++ /dev/null</span>
<a href="#l5.4"></a><span id="l5.4" class="difflineat">@@ -1,416 +0,0 @@</span>
<a href="#l5.5"></a><span id="l5.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l5.6"></a><span id="l5.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l5.7"></a><span id="l5.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l5.8"></a><span id="l5.8" class="difflineminus">-</span>
<a href="#l5.9"></a><span id="l5.9" class="difflineminus">-#include &quot;nsISupports.idl&quot;</span>
<a href="#l5.10"></a><span id="l5.10" class="difflineminus">-</span>
<a href="#l5.11"></a><span id="l5.11" class="difflineminus">-interface nsIVariant;</span>
<a href="#l5.12"></a><span id="l5.12" class="difflineminus">-interface extIPreference;</span>
<a href="#l5.13"></a><span id="l5.13" class="difflineminus">-interface extISessionStorage;</span>
<a href="#l5.14"></a><span id="l5.14" class="difflineminus">-</span>
<a href="#l5.15"></a><span id="l5.15" class="difflineminus">-</span>
<a href="#l5.16"></a><span id="l5.16" class="difflineminus">-/**</span>
<a href="#l5.17"></a><span id="l5.17" class="difflineminus">- * Interface that gives simplified access to the console</span>
<a href="#l5.18"></a><span id="l5.18" class="difflineminus">- */</span>
<a href="#l5.19"></a><span id="l5.19" class="difflineminus">-[scriptable, uuid(ae8482e0-aa5a-11db-abbd-0800200c9a66)]</span>
<a href="#l5.20"></a><span id="l5.20" class="difflineminus">-interface extIConsole : nsISupports</span>
<a href="#l5.21"></a><span id="l5.21" class="difflineminus">-{</span>
<a href="#l5.22"></a><span id="l5.22" class="difflineminus">-  /**</span>
<a href="#l5.23"></a><span id="l5.23" class="difflineminus">-   * Sends a given string to the console.</span>
<a href="#l5.24"></a><span id="l5.24" class="difflineminus">-   * @param   aMsg</span>
<a href="#l5.25"></a><span id="l5.25" class="difflineminus">-   *          The text to send to the console</span>
<a href="#l5.26"></a><span id="l5.26" class="difflineminus">-   */</span>
<a href="#l5.27"></a><span id="l5.27" class="difflineminus">-  void log(in AString aMsg);</span>
<a href="#l5.28"></a><span id="l5.28" class="difflineminus">-</span>
<a href="#l5.29"></a><span id="l5.29" class="difflineminus">-  /**</span>
<a href="#l5.30"></a><span id="l5.30" class="difflineminus">-   * Opens the error console window. The console window</span>
<a href="#l5.31"></a><span id="l5.31" class="difflineminus">-   * is focused if already open.</span>
<a href="#l5.32"></a><span id="l5.32" class="difflineminus">-   */</span>
<a href="#l5.33"></a><span id="l5.33" class="difflineminus">-  void open();</span>
<a href="#l5.34"></a><span id="l5.34" class="difflineminus">-};</span>
<a href="#l5.35"></a><span id="l5.35" class="difflineminus">-</span>
<a href="#l5.36"></a><span id="l5.36" class="difflineminus">-</span>
<a href="#l5.37"></a><span id="l5.37" class="difflineminus">-/**</span>
<a href="#l5.38"></a><span id="l5.38" class="difflineminus">- * Interface holds information about an event.</span>
<a href="#l5.39"></a><span id="l5.39" class="difflineminus">- */</span>
<a href="#l5.40"></a><span id="l5.40" class="difflineminus">-[scriptable, function, uuid(05281820-ab62-11db-abbd-0800200c9a66)]</span>
<a href="#l5.41"></a><span id="l5.41" class="difflineminus">-interface extIEventItem : nsISupports</span>
<a href="#l5.42"></a><span id="l5.42" class="difflineminus">-{</span>
<a href="#l5.43"></a><span id="l5.43" class="difflineminus">-  /**</span>
<a href="#l5.44"></a><span id="l5.44" class="difflineminus">-   * The name of the event</span>
<a href="#l5.45"></a><span id="l5.45" class="difflineminus">-   */</span>
<a href="#l5.46"></a><span id="l5.46" class="difflineminus">-  readonly attribute AString type;</span>
<a href="#l5.47"></a><span id="l5.47" class="difflineminus">-</span>
<a href="#l5.48"></a><span id="l5.48" class="difflineminus">-  /**</span>
<a href="#l5.49"></a><span id="l5.49" class="difflineminus">-   * Can hold extra details and data associated with the event. This</span>
<a href="#l5.50"></a><span id="l5.50" class="difflineminus">-   * is optional and event specific. If the event does not send extra</span>
<a href="#l5.51"></a><span id="l5.51" class="difflineminus">-   * details, this is null.</span>
<a href="#l5.52"></a><span id="l5.52" class="difflineminus">-   */</span>
<a href="#l5.53"></a><span id="l5.53" class="difflineminus">-  readonly attribute nsIVariant data;</span>
<a href="#l5.54"></a><span id="l5.54" class="difflineminus">-</span>
<a href="#l5.55"></a><span id="l5.55" class="difflineminus">-  /**</span>
<a href="#l5.56"></a><span id="l5.56" class="difflineminus">-   * Cancels the event if it is cancelable.</span>
<a href="#l5.57"></a><span id="l5.57" class="difflineminus">-   */</span>
<a href="#l5.58"></a><span id="l5.58" class="difflineminus">-  void preventDefault();</span>
<a href="#l5.59"></a><span id="l5.59" class="difflineminus">-}; </span>
<a href="#l5.60"></a><span id="l5.60" class="difflineminus">-</span>
<a href="#l5.61"></a><span id="l5.61" class="difflineminus">-</span>
<a href="#l5.62"></a><span id="l5.62" class="difflineminus">-/**</span>
<a href="#l5.63"></a><span id="l5.63" class="difflineminus">- * Interface used as a callback for listening to events.</span>
<a href="#l5.64"></a><span id="l5.64" class="difflineminus">- */</span>
<a href="#l5.65"></a><span id="l5.65" class="difflineminus">-[scriptable, function, uuid(2dfe3a50-ab2f-11db-abbd-0800200c9a66)]</span>
<a href="#l5.66"></a><span id="l5.66" class="difflineminus">-interface extIEventListener : nsISupports</span>
<a href="#l5.67"></a><span id="l5.67" class="difflineminus">-{</span>
<a href="#l5.68"></a><span id="l5.68" class="difflineminus">-  /**</span>
<a href="#l5.69"></a><span id="l5.69" class="difflineminus">-   * This method is called whenever an event occurs of the type for which </span>
<a href="#l5.70"></a><span id="l5.70" class="difflineminus">-   * the extIEventListener interface was registered.</span>
<a href="#l5.71"></a><span id="l5.71" class="difflineminus">-   *</span>
<a href="#l5.72"></a><span id="l5.72" class="difflineminus">-   * @param   aEvent</span>
<a href="#l5.73"></a><span id="l5.73" class="difflineminus">-   *          The extIEventItem associated with the event.</span>
<a href="#l5.74"></a><span id="l5.74" class="difflineminus">-   */</span>
<a href="#l5.75"></a><span id="l5.75" class="difflineminus">-  void handleEvent(in extIEventItem aEvent);</span>
<a href="#l5.76"></a><span id="l5.76" class="difflineminus">-}; </span>
<a href="#l5.77"></a><span id="l5.77" class="difflineminus">-</span>
<a href="#l5.78"></a><span id="l5.78" class="difflineminus">-</span>
<a href="#l5.79"></a><span id="l5.79" class="difflineminus">-/**</span>
<a href="#l5.80"></a><span id="l5.80" class="difflineminus">- * Interface for supporting custom events.</span>
<a href="#l5.81"></a><span id="l5.81" class="difflineminus">- */</span>
<a href="#l5.82"></a><span id="l5.82" class="difflineminus">-[scriptable, uuid(3a8ec9d0-ab19-11db-abbd-0800200c9a66)]</span>
<a href="#l5.83"></a><span id="l5.83" class="difflineminus">-interface extIEvents : nsISupports</span>
<a href="#l5.84"></a><span id="l5.84" class="difflineminus">-{</span>
<a href="#l5.85"></a><span id="l5.85" class="difflineminus">-  /**</span>
<a href="#l5.86"></a><span id="l5.86" class="difflineminus">-   * Adds an event listener to the list. If multiple identical event listeners</span>
<a href="#l5.87"></a><span id="l5.87" class="difflineminus">-   * are registered on the same event target with the same parameters the</span>
<a href="#l5.88"></a><span id="l5.88" class="difflineminus">-   * duplicate instances are discarded. They do not cause the EventListener</span>
<a href="#l5.89"></a><span id="l5.89" class="difflineminus">-   * to be called twice and since they are discarded they do not need to be</span>
<a href="#l5.90"></a><span id="l5.90" class="difflineminus">-   * removed with the removeListener method.</span>
<a href="#l5.91"></a><span id="l5.91" class="difflineminus">-   *</span>
<a href="#l5.92"></a><span id="l5.92" class="difflineminus">-   * @param   aEvent</span>
<a href="#l5.93"></a><span id="l5.93" class="difflineminus">-   *          The name of an event</span>
<a href="#l5.94"></a><span id="l5.94" class="difflineminus">-   * @param   aListener</span>
<a href="#l5.95"></a><span id="l5.95" class="difflineminus">-   *          The reference to a listener</span>
<a href="#l5.96"></a><span id="l5.96" class="difflineminus">-   */</span>
<a href="#l5.97"></a><span id="l5.97" class="difflineminus">-  void addListener(in AString aEvent, in extIEventListener aListener);</span>
<a href="#l5.98"></a><span id="l5.98" class="difflineminus">-</span>
<a href="#l5.99"></a><span id="l5.99" class="difflineminus">-  /**</span>
<a href="#l5.100"></a><span id="l5.100" class="difflineminus">-   * Removes an event listener from the list. Calling remove</span>
<a href="#l5.101"></a><span id="l5.101" class="difflineminus">-   * with arguments which do not identify any currently registered</span>
<a href="#l5.102"></a><span id="l5.102" class="difflineminus">-   * event listener has no effect.</span>
<a href="#l5.103"></a><span id="l5.103" class="difflineminus">-   * @param   aEvent</span>
<a href="#l5.104"></a><span id="l5.104" class="difflineminus">-   *          The name of an event</span>
<a href="#l5.105"></a><span id="l5.105" class="difflineminus">-   * @param   aListener</span>
<a href="#l5.106"></a><span id="l5.106" class="difflineminus">-   *          The reference to a listener</span>
<a href="#l5.107"></a><span id="l5.107" class="difflineminus">-   */</span>
<a href="#l5.108"></a><span id="l5.108" class="difflineminus">-  void removeListener(in AString aEvent, in extIEventListener aListener);</span>
<a href="#l5.109"></a><span id="l5.109" class="difflineminus">-}; </span>
<a href="#l5.110"></a><span id="l5.110" class="difflineminus">-</span>
<a href="#l5.111"></a><span id="l5.111" class="difflineminus">-</span>
<a href="#l5.112"></a><span id="l5.112" class="difflineminus">-/**</span>
<a href="#l5.113"></a><span id="l5.113" class="difflineminus">- * Interface for simplified access to preferences. The interface has a</span>
<a href="#l5.114"></a><span id="l5.114" class="difflineminus">- * predefined root preference branch. The root branch is set based on the</span>
<a href="#l5.115"></a><span id="l5.115" class="difflineminus">- * context of the owner. For example, an extension's preferences have a root</span>
<a href="#l5.116"></a><span id="l5.116" class="difflineminus">- * of &quot;extensions.&lt;extensionid&gt;.&quot;, while the application level preferences</span>
<a href="#l5.117"></a><span id="l5.117" class="difflineminus">- * have an empty root. All preference &quot;aName&quot; parameters used in this interface</span>
<a href="#l5.118"></a><span id="l5.118" class="difflineminus">- * are relative to the root branch.</span>
<a href="#l5.119"></a><span id="l5.119" class="difflineminus">- */</span>
<a href="#l5.120"></a><span id="l5.120" class="difflineminus">-[scriptable, uuid(ce697d40-aa5a-11db-abbd-0800200c9a66)]</span>
<a href="#l5.121"></a><span id="l5.121" class="difflineminus">-interface extIPreferenceBranch : nsISupports</span>
<a href="#l5.122"></a><span id="l5.122" class="difflineminus">-{</span>
<a href="#l5.123"></a><span id="l5.123" class="difflineminus">-  /**</span>
<a href="#l5.124"></a><span id="l5.124" class="difflineminus">-   * The name of the branch root.</span>
<a href="#l5.125"></a><span id="l5.125" class="difflineminus">-   */</span>
<a href="#l5.126"></a><span id="l5.126" class="difflineminus">-  readonly attribute AString root;</span>
<a href="#l5.127"></a><span id="l5.127" class="difflineminus">-  </span>
<a href="#l5.128"></a><span id="l5.128" class="difflineminus">-  /**</span>
<a href="#l5.129"></a><span id="l5.129" class="difflineminus">-   * Array of extIPreference listing all preferences in this branch.</span>
<a href="#l5.130"></a><span id="l5.130" class="difflineminus">-   */</span>
<a href="#l5.131"></a><span id="l5.131" class="difflineminus">-  readonly attribute nsIVariant all;</span>
<a href="#l5.132"></a><span id="l5.132" class="difflineminus">-  </span>
<a href="#l5.133"></a><span id="l5.133" class="difflineminus">-  /**</span>
<a href="#l5.134"></a><span id="l5.134" class="difflineminus">-   * The events object for the preferences</span>
<a href="#l5.135"></a><span id="l5.135" class="difflineminus">-   * supports: &quot;change&quot;</span>
<a href="#l5.136"></a><span id="l5.136" class="difflineminus">-   */</span>
<a href="#l5.137"></a><span id="l5.137" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l5.138"></a><span id="l5.138" class="difflineminus">-  </span>
<a href="#l5.139"></a><span id="l5.139" class="difflineminus">-  /**</span>
<a href="#l5.140"></a><span id="l5.140" class="difflineminus">-   * Check to see if a preference exists.</span>
<a href="#l5.141"></a><span id="l5.141" class="difflineminus">-   * @param   aName</span>
<a href="#l5.142"></a><span id="l5.142" class="difflineminus">-   *          The name of preference</span>
<a href="#l5.143"></a><span id="l5.143" class="difflineminus">-   * @returns true if the preference exists, false if not</span>
<a href="#l5.144"></a><span id="l5.144" class="difflineminus">-   */</span>
<a href="#l5.145"></a><span id="l5.145" class="difflineminus">-  boolean has(in AString aName);</span>
<a href="#l5.146"></a><span id="l5.146" class="difflineminus">-  </span>
<a href="#l5.147"></a><span id="l5.147" class="difflineminus">-  /**</span>
<a href="#l5.148"></a><span id="l5.148" class="difflineminus">-   * Gets an object representing a preference</span>
<a href="#l5.149"></a><span id="l5.149" class="difflineminus">-   * @param   aName</span>
<a href="#l5.150"></a><span id="l5.150" class="difflineminus">-   *          The name of preference</span>
<a href="#l5.151"></a><span id="l5.151" class="difflineminus">-   * @returns a preference object, or null if the preference does not exist</span>
<a href="#l5.152"></a><span id="l5.152" class="difflineminus">-   */</span>
<a href="#l5.153"></a><span id="l5.153" class="difflineminus">-  extIPreference get(in AString aName);</span>
<a href="#l5.154"></a><span id="l5.154" class="difflineminus">-  </span>
<a href="#l5.155"></a><span id="l5.155" class="difflineminus">-  /**</span>
<a href="#l5.156"></a><span id="l5.156" class="difflineminus">-   * Gets the value of a preference. Returns a default value if</span>
<a href="#l5.157"></a><span id="l5.157" class="difflineminus">-   * the preference does not exist.</span>
<a href="#l5.158"></a><span id="l5.158" class="difflineminus">-   * @param   aName</span>
<a href="#l5.159"></a><span id="l5.159" class="difflineminus">-   *          The name of preference</span>
<a href="#l5.160"></a><span id="l5.160" class="difflineminus">-   * @param   aDefaultValue</span>
<a href="#l5.161"></a><span id="l5.161" class="difflineminus">-   *          The value to return if preference does not exist</span>
<a href="#l5.162"></a><span id="l5.162" class="difflineminus">-   * @returns value of the preference or the given default value if preference</span>
<a href="#l5.163"></a><span id="l5.163" class="difflineminus">-   *          does not exists.</span>
<a href="#l5.164"></a><span id="l5.164" class="difflineminus">-   */</span>
<a href="#l5.165"></a><span id="l5.165" class="difflineminus">-  nsIVariant getValue(in AString aName, in nsIVariant aDefaultValue);</span>
<a href="#l5.166"></a><span id="l5.166" class="difflineminus">-</span>
<a href="#l5.167"></a><span id="l5.167" class="difflineminus">-  /**</span>
<a href="#l5.168"></a><span id="l5.168" class="difflineminus">-   * Sets the value of a storage item with the given name.</span>
<a href="#l5.169"></a><span id="l5.169" class="difflineminus">-   * @param   aName</span>
<a href="#l5.170"></a><span id="l5.170" class="difflineminus">-   *          The name of an item</span>
<a href="#l5.171"></a><span id="l5.171" class="difflineminus">-   * @param   aValue</span>
<a href="#l5.172"></a><span id="l5.172" class="difflineminus">-   *          The value to assign to the item</span>
<a href="#l5.173"></a><span id="l5.173" class="difflineminus">-   */</span>
<a href="#l5.174"></a><span id="l5.174" class="difflineminus">-  void setValue(in AString aName, in nsIVariant aValue);</span>
<a href="#l5.175"></a><span id="l5.175" class="difflineminus">-</span>
<a href="#l5.176"></a><span id="l5.176" class="difflineminus">-  /**</span>
<a href="#l5.177"></a><span id="l5.177" class="difflineminus">-   * Resets all preferences in a branch back to their default values.</span>
<a href="#l5.178"></a><span id="l5.178" class="difflineminus">-   */</span>
<a href="#l5.179"></a><span id="l5.179" class="difflineminus">-  void reset();</span>
<a href="#l5.180"></a><span id="l5.180" class="difflineminus">-};</span>
<a href="#l5.181"></a><span id="l5.181" class="difflineminus">-</span>
<a href="#l5.182"></a><span id="l5.182" class="difflineminus">-/**</span>
<a href="#l5.183"></a><span id="l5.183" class="difflineminus">- * Interface for accessing a single preference. The data is not cached.</span>
<a href="#l5.184"></a><span id="l5.184" class="difflineminus">- * All reads access the current state of the preference.</span>
<a href="#l5.185"></a><span id="l5.185" class="difflineminus">- */</span>
<a href="#l5.186"></a><span id="l5.186" class="difflineminus">-[scriptable, uuid(2C7462E2-72C2-4473-9007-0E6AE71E23CA)]</span>
<a href="#l5.187"></a><span id="l5.187" class="difflineminus">-interface extIPreference : nsISupports</span>
<a href="#l5.188"></a><span id="l5.188" class="difflineminus">-{</span>
<a href="#l5.189"></a><span id="l5.189" class="difflineminus">-  /**</span>
<a href="#l5.190"></a><span id="l5.190" class="difflineminus">-   * The name of the preference.</span>
<a href="#l5.191"></a><span id="l5.191" class="difflineminus">-   */</span>
<a href="#l5.192"></a><span id="l5.192" class="difflineminus">-  readonly attribute AString name;</span>
<a href="#l5.193"></a><span id="l5.193" class="difflineminus">-  </span>
<a href="#l5.194"></a><span id="l5.194" class="difflineminus">-  /**</span>
<a href="#l5.195"></a><span id="l5.195" class="difflineminus">-   * A string representing the type of preference (String, Boolean, or Number).</span>
<a href="#l5.196"></a><span id="l5.196" class="difflineminus">-   */</span>
<a href="#l5.197"></a><span id="l5.197" class="difflineminus">-  readonly attribute AString type;</span>
<a href="#l5.198"></a><span id="l5.198" class="difflineminus">-  </span>
<a href="#l5.199"></a><span id="l5.199" class="difflineminus">-  /**</span>
<a href="#l5.200"></a><span id="l5.200" class="difflineminus">-   * Get/Set the value of the preference.</span>
<a href="#l5.201"></a><span id="l5.201" class="difflineminus">-   */</span>
<a href="#l5.202"></a><span id="l5.202" class="difflineminus">-  attribute nsIVariant value;</span>
<a href="#l5.203"></a><span id="l5.203" class="difflineminus">-  </span>
<a href="#l5.204"></a><span id="l5.204" class="difflineminus">-  /**</span>
<a href="#l5.205"></a><span id="l5.205" class="difflineminus">-   * Get the locked state of the preference. Set to a boolean value to (un)lock it.</span>
<a href="#l5.206"></a><span id="l5.206" class="difflineminus">-   */</span>
<a href="#l5.207"></a><span id="l5.207" class="difflineminus">-  attribute boolean locked;</span>
<a href="#l5.208"></a><span id="l5.208" class="difflineminus">-  </span>
<a href="#l5.209"></a><span id="l5.209" class="difflineminus">-  /**</span>
<a href="#l5.210"></a><span id="l5.210" class="difflineminus">-   * Check if a preference has been modified by the user, or not.</span>
<a href="#l5.211"></a><span id="l5.211" class="difflineminus">-   */</span>
<a href="#l5.212"></a><span id="l5.212" class="difflineminus">-  readonly attribute boolean modified;</span>
<a href="#l5.213"></a><span id="l5.213" class="difflineminus">-  </span>
<a href="#l5.214"></a><span id="l5.214" class="difflineminus">-  /**</span>
<a href="#l5.215"></a><span id="l5.215" class="difflineminus">-   * The preference branch that contains this preference.</span>
<a href="#l5.216"></a><span id="l5.216" class="difflineminus">-   */</span>
<a href="#l5.217"></a><span id="l5.217" class="difflineminus">-  readonly attribute extIPreferenceBranch branch;</span>
<a href="#l5.218"></a><span id="l5.218" class="difflineminus">-  </span>
<a href="#l5.219"></a><span id="l5.219" class="difflineminus">-  /**</span>
<a href="#l5.220"></a><span id="l5.220" class="difflineminus">-   * The events object for this preference.</span>
<a href="#l5.221"></a><span id="l5.221" class="difflineminus">-   * supports: &quot;change&quot;</span>
<a href="#l5.222"></a><span id="l5.222" class="difflineminus">-   */</span>
<a href="#l5.223"></a><span id="l5.223" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l5.224"></a><span id="l5.224" class="difflineminus">-  </span>
<a href="#l5.225"></a><span id="l5.225" class="difflineminus">-  /**</span>
<a href="#l5.226"></a><span id="l5.226" class="difflineminus">-   * Resets a preference back to its default values.</span>
<a href="#l5.227"></a><span id="l5.227" class="difflineminus">-   */</span>
<a href="#l5.228"></a><span id="l5.228" class="difflineminus">-  void reset();</span>
<a href="#l5.229"></a><span id="l5.229" class="difflineminus">-};</span>
<a href="#l5.230"></a><span id="l5.230" class="difflineminus">-</span>
<a href="#l5.231"></a><span id="l5.231" class="difflineminus">-</span>
<a href="#l5.232"></a><span id="l5.232" class="difflineminus">-/**</span>
<a href="#l5.233"></a><span id="l5.233" class="difflineminus">- * Interface representing an extension</span>
<a href="#l5.234"></a><span id="l5.234" class="difflineminus">- */</span>
<a href="#l5.235"></a><span id="l5.235" class="difflineminus">-[scriptable, uuid(10cee02c-f6e0-4d61-ab27-c16572b18c46)]</span>
<a href="#l5.236"></a><span id="l5.236" class="difflineminus">-interface extIExtension : nsISupports</span>
<a href="#l5.237"></a><span id="l5.237" class="difflineminus">-{</span>
<a href="#l5.238"></a><span id="l5.238" class="difflineminus">-  /**</span>
<a href="#l5.239"></a><span id="l5.239" class="difflineminus">-   * The id of the extension.</span>
<a href="#l5.240"></a><span id="l5.240" class="difflineminus">-   */</span>
<a href="#l5.241"></a><span id="l5.241" class="difflineminus">-  readonly attribute AString id;</span>
<a href="#l5.242"></a><span id="l5.242" class="difflineminus">-</span>
<a href="#l5.243"></a><span id="l5.243" class="difflineminus">-  /**</span>
<a href="#l5.244"></a><span id="l5.244" class="difflineminus">-   * The name of the extension.</span>
<a href="#l5.245"></a><span id="l5.245" class="difflineminus">-   */</span>
<a href="#l5.246"></a><span id="l5.246" class="difflineminus">-  readonly attribute AString name;</span>
<a href="#l5.247"></a><span id="l5.247" class="difflineminus">-  </span>
<a href="#l5.248"></a><span id="l5.248" class="difflineminus">-  /**</span>
<a href="#l5.249"></a><span id="l5.249" class="difflineminus">-   * Check if the extension is currently enabled, or not.</span>
<a href="#l5.250"></a><span id="l5.250" class="difflineminus">-   */</span>
<a href="#l5.251"></a><span id="l5.251" class="difflineminus">-  readonly attribute boolean enabled;</span>
<a href="#l5.252"></a><span id="l5.252" class="difflineminus">-  </span>
<a href="#l5.253"></a><span id="l5.253" class="difflineminus">-  /**</span>
<a href="#l5.254"></a><span id="l5.254" class="difflineminus">-   * The version number of the extension.</span>
<a href="#l5.255"></a><span id="l5.255" class="difflineminus">-   */</span>
<a href="#l5.256"></a><span id="l5.256" class="difflineminus">-  readonly attribute AString version;</span>
<a href="#l5.257"></a><span id="l5.257" class="difflineminus">-</span>
<a href="#l5.258"></a><span id="l5.258" class="difflineminus">-  /**</span>
<a href="#l5.259"></a><span id="l5.259" class="difflineminus">-   * Indicates whether this is the extension's first run after install</span>
<a href="#l5.260"></a><span id="l5.260" class="difflineminus">-   */</span>
<a href="#l5.261"></a><span id="l5.261" class="difflineminus">-  readonly attribute boolean firstRun;</span>
<a href="#l5.262"></a><span id="l5.262" class="difflineminus">-</span>
<a href="#l5.263"></a><span id="l5.263" class="difflineminus">-  /**</span>
<a href="#l5.264"></a><span id="l5.264" class="difflineminus">-   * The preferences object for the extension. Defaults to the</span>
<a href="#l5.265"></a><span id="l5.265" class="difflineminus">-   * &quot;extensions.&lt;extensionid&gt;.&quot; branch.</span>
<a href="#l5.266"></a><span id="l5.266" class="difflineminus">-   */</span>
<a href="#l5.267"></a><span id="l5.267" class="difflineminus">-  readonly attribute extIPreferenceBranch prefs;</span>
<a href="#l5.268"></a><span id="l5.268" class="difflineminus">-</span>
<a href="#l5.269"></a><span id="l5.269" class="difflineminus">-  /**</span>
<a href="#l5.270"></a><span id="l5.270" class="difflineminus">-   * The storage object for the extension.</span>
<a href="#l5.271"></a><span id="l5.271" class="difflineminus">-   */</span>
<a href="#l5.272"></a><span id="l5.272" class="difflineminus">-  readonly attribute extISessionStorage storage;</span>
<a href="#l5.273"></a><span id="l5.273" class="difflineminus">-</span>
<a href="#l5.274"></a><span id="l5.274" class="difflineminus">-  /**</span>
<a href="#l5.275"></a><span id="l5.275" class="difflineminus">-   * The events object for the extension.</span>
<a href="#l5.276"></a><span id="l5.276" class="difflineminus">-   * supports: &quot;uninstall&quot;</span>
<a href="#l5.277"></a><span id="l5.277" class="difflineminus">-   */</span>
<a href="#l5.278"></a><span id="l5.278" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l5.279"></a><span id="l5.279" class="difflineminus">-}; </span>
<a href="#l5.280"></a><span id="l5.280" class="difflineminus">-</span>
<a href="#l5.281"></a><span id="l5.281" class="difflineminus">-/**</span>
<a href="#l5.282"></a><span id="l5.282" class="difflineminus">- * Interface representing a list of all installed extensions</span>
<a href="#l5.283"></a><span id="l5.283" class="difflineminus">- */</span>
<a href="#l5.284"></a><span id="l5.284" class="difflineminus">-[scriptable, uuid(de281930-aa5a-11db-abbd-0800200c9a66)]</span>
<a href="#l5.285"></a><span id="l5.285" class="difflineminus">-interface extIExtensions : nsISupports</span>
<a href="#l5.286"></a><span id="l5.286" class="difflineminus">-{</span>
<a href="#l5.287"></a><span id="l5.287" class="difflineminus">-  /**</span>
<a href="#l5.288"></a><span id="l5.288" class="difflineminus">-   * Array of extIExtension listing all extensions in the application.</span>
<a href="#l5.289"></a><span id="l5.289" class="difflineminus">-   */</span>
<a href="#l5.290"></a><span id="l5.290" class="difflineminus">-  readonly attribute nsIVariant all;</span>
<a href="#l5.291"></a><span id="l5.291" class="difflineminus">-</span>
<a href="#l5.292"></a><span id="l5.292" class="difflineminus">-  /**</span>
<a href="#l5.293"></a><span id="l5.293" class="difflineminus">-   * Determines if an extension exists with the given id.</span>
<a href="#l5.294"></a><span id="l5.294" class="difflineminus">-   * @param   aId</span>
<a href="#l5.295"></a><span id="l5.295" class="difflineminus">-   *          The id of an extension</span>
<a href="#l5.296"></a><span id="l5.296" class="difflineminus">-   * @returns true if an extension exists with the given id,</span>
<a href="#l5.297"></a><span id="l5.297" class="difflineminus">-   *          false otherwise.</span>
<a href="#l5.298"></a><span id="l5.298" class="difflineminus">-   */</span>
<a href="#l5.299"></a><span id="l5.299" class="difflineminus">-  boolean has(in AString aId);</span>
<a href="#l5.300"></a><span id="l5.300" class="difflineminus">-</span>
<a href="#l5.301"></a><span id="l5.301" class="difflineminus">-  /**</span>
<a href="#l5.302"></a><span id="l5.302" class="difflineminus">-   * Gets a extIExtension object for an extension.</span>
<a href="#l5.303"></a><span id="l5.303" class="difflineminus">-   * @param   aId</span>
<a href="#l5.304"></a><span id="l5.304" class="difflineminus">-   *          The id of an extension</span>
<a href="#l5.305"></a><span id="l5.305" class="difflineminus">-   * @returns An extension object or null if no extension exists</span>
<a href="#l5.306"></a><span id="l5.306" class="difflineminus">-   *          with the given id.</span>
<a href="#l5.307"></a><span id="l5.307" class="difflineminus">-   */</span>
<a href="#l5.308"></a><span id="l5.308" class="difflineminus">-  extIExtension get(in AString aId);</span>
<a href="#l5.309"></a><span id="l5.309" class="difflineminus">-}; </span>
<a href="#l5.310"></a><span id="l5.310" class="difflineminus">-</span>
<a href="#l5.311"></a><span id="l5.311" class="difflineminus">-/**</span>
<a href="#l5.312"></a><span id="l5.312" class="difflineminus">- * Interface representing a callback that receives an array of extIExtensions</span>
<a href="#l5.313"></a><span id="l5.313" class="difflineminus">- */</span>
<a href="#l5.314"></a><span id="l5.314" class="difflineminus">-[scriptable, function, uuid(2571cbb5-550d-4400-8038-75df9b553f98)]</span>
<a href="#l5.315"></a><span id="l5.315" class="difflineminus">-interface extIExtensionsCallback : nsISupports</span>
<a href="#l5.316"></a><span id="l5.316" class="difflineminus">-{</span>
<a href="#l5.317"></a><span id="l5.317" class="difflineminus">-  void callback(in nsIVariant extensions);</span>
<a href="#l5.318"></a><span id="l5.318" class="difflineminus">-};</span>
<a href="#l5.319"></a><span id="l5.319" class="difflineminus">-</span>
<a href="#l5.320"></a><span id="l5.320" class="difflineminus">-/**</span>
<a href="#l5.321"></a><span id="l5.321" class="difflineminus">- * Interface representing a simple storage system</span>
<a href="#l5.322"></a><span id="l5.322" class="difflineminus">- */</span>
<a href="#l5.323"></a><span id="l5.323" class="difflineminus">-[scriptable, uuid(0787ac44-29b9-4889-b97f-13573aec6971)]</span>
<a href="#l5.324"></a><span id="l5.324" class="difflineminus">-interface extISessionStorage : nsISupports</span>
<a href="#l5.325"></a><span id="l5.325" class="difflineminus">-{</span>
<a href="#l5.326"></a><span id="l5.326" class="difflineminus">-  /**</span>
<a href="#l5.327"></a><span id="l5.327" class="difflineminus">-   * The events object for the storage</span>
<a href="#l5.328"></a><span id="l5.328" class="difflineminus">-   * supports: &quot;change&quot;</span>
<a href="#l5.329"></a><span id="l5.329" class="difflineminus">-   */</span>
<a href="#l5.330"></a><span id="l5.330" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l5.331"></a><span id="l5.331" class="difflineminus">-</span>
<a href="#l5.332"></a><span id="l5.332" class="difflineminus">-  /**</span>
<a href="#l5.333"></a><span id="l5.333" class="difflineminus">-   * Determines if a storage item exists with the given name.</span>
<a href="#l5.334"></a><span id="l5.334" class="difflineminus">-   * @param   aName</span>
<a href="#l5.335"></a><span id="l5.335" class="difflineminus">-   *          The name of an item</span>
<a href="#l5.336"></a><span id="l5.336" class="difflineminus">-   * @returns true if an item exists with the given name,</span>
<a href="#l5.337"></a><span id="l5.337" class="difflineminus">-   *          false otherwise.</span>
<a href="#l5.338"></a><span id="l5.338" class="difflineminus">-   */</span>
<a href="#l5.339"></a><span id="l5.339" class="difflineminus">-  boolean has(in AString aName);</span>
<a href="#l5.340"></a><span id="l5.340" class="difflineminus">-</span>
<a href="#l5.341"></a><span id="l5.341" class="difflineminus">-  /**</span>
<a href="#l5.342"></a><span id="l5.342" class="difflineminus">-   * Sets the value of a storage item with the given name.</span>
<a href="#l5.343"></a><span id="l5.343" class="difflineminus">-   * @param   aName</span>
<a href="#l5.344"></a><span id="l5.344" class="difflineminus">-   *          The name of an item</span>
<a href="#l5.345"></a><span id="l5.345" class="difflineminus">-   * @param   aValue</span>
<a href="#l5.346"></a><span id="l5.346" class="difflineminus">-   *          The value to assign to the item</span>
<a href="#l5.347"></a><span id="l5.347" class="difflineminus">-   */</span>
<a href="#l5.348"></a><span id="l5.348" class="difflineminus">-  void set(in AString aName, in nsIVariant aValue);</span>
<a href="#l5.349"></a><span id="l5.349" class="difflineminus">-</span>
<a href="#l5.350"></a><span id="l5.350" class="difflineminus">-  /**</span>
<a href="#l5.351"></a><span id="l5.351" class="difflineminus">-   * Gets the value of a storage item with the given name. Returns a</span>
<a href="#l5.352"></a><span id="l5.352" class="difflineminus">-   * default value if the item does not exist.</span>
<a href="#l5.353"></a><span id="l5.353" class="difflineminus">-   * @param   aName</span>
<a href="#l5.354"></a><span id="l5.354" class="difflineminus">-   *          The name of an item</span>
<a href="#l5.355"></a><span id="l5.355" class="difflineminus">-   * @param   aDefaultValue</span>
<a href="#l5.356"></a><span id="l5.356" class="difflineminus">-   *          The value to return if no item exists with the given name</span>
<a href="#l5.357"></a><span id="l5.357" class="difflineminus">-   * @returns value of the item or the given default value if no item</span>
<a href="#l5.358"></a><span id="l5.358" class="difflineminus">-   *          exists with the given name.</span>
<a href="#l5.359"></a><span id="l5.359" class="difflineminus">-   */</span>
<a href="#l5.360"></a><span id="l5.360" class="difflineminus">-  nsIVariant get(in AString aName, in nsIVariant aDefaultValue);</span>
<a href="#l5.361"></a><span id="l5.361" class="difflineminus">-}; </span>
<a href="#l5.362"></a><span id="l5.362" class="difflineminus">-</span>
<a href="#l5.363"></a><span id="l5.363" class="difflineminus">-[scriptable, uuid(2be87909-0817-4292-acfa-fc39be53be3f)]</span>
<a href="#l5.364"></a><span id="l5.364" class="difflineminus">-interface extIApplication : nsISupports</span>
<a href="#l5.365"></a><span id="l5.365" class="difflineminus">-{</span>
<a href="#l5.366"></a><span id="l5.366" class="difflineminus">-  /**</span>
<a href="#l5.367"></a><span id="l5.367" class="difflineminus">-   * The id of the application.</span>
<a href="#l5.368"></a><span id="l5.368" class="difflineminus">-   */</span>
<a href="#l5.369"></a><span id="l5.369" class="difflineminus">-  readonly attribute AString id;</span>
<a href="#l5.370"></a><span id="l5.370" class="difflineminus">-</span>
<a href="#l5.371"></a><span id="l5.371" class="difflineminus">-  /**</span>
<a href="#l5.372"></a><span id="l5.372" class="difflineminus">-   * The name of the application.</span>
<a href="#l5.373"></a><span id="l5.373" class="difflineminus">-   */</span>
<a href="#l5.374"></a><span id="l5.374" class="difflineminus">-  readonly attribute AString name;</span>
<a href="#l5.375"></a><span id="l5.375" class="difflineminus">-  </span>
<a href="#l5.376"></a><span id="l5.376" class="difflineminus">-  /**</span>
<a href="#l5.377"></a><span id="l5.377" class="difflineminus">-   * The version number of the application.</span>
<a href="#l5.378"></a><span id="l5.378" class="difflineminus">-   */</span>
<a href="#l5.379"></a><span id="l5.379" class="difflineminus">-  readonly attribute AString version;</span>
<a href="#l5.380"></a><span id="l5.380" class="difflineminus">-  </span>
<a href="#l5.381"></a><span id="l5.381" class="difflineminus">-  /**</span>
<a href="#l5.382"></a><span id="l5.382" class="difflineminus">-   * The console object for the application.</span>
<a href="#l5.383"></a><span id="l5.383" class="difflineminus">-   */</span>
<a href="#l5.384"></a><span id="l5.384" class="difflineminus">-  readonly attribute extIConsole console;</span>
<a href="#l5.385"></a><span id="l5.385" class="difflineminus">-</span>
<a href="#l5.386"></a><span id="l5.386" class="difflineminus">-  /**</span>
<a href="#l5.387"></a><span id="l5.387" class="difflineminus">-   * The extensions object for the application. Contains a list</span>
<a href="#l5.388"></a><span id="l5.388" class="difflineminus">-   * of all installed extensions.</span>
<a href="#l5.389"></a><span id="l5.389" class="difflineminus">-   */</span>
<a href="#l5.390"></a><span id="l5.390" class="difflineminus">-  void getExtensions(in extIExtensionsCallback aCallback);</span>
<a href="#l5.391"></a><span id="l5.391" class="difflineminus">-</span>
<a href="#l5.392"></a><span id="l5.392" class="difflineminus">-  /**</span>
<a href="#l5.393"></a><span id="l5.393" class="difflineminus">-   * The preferences object for the application. Defaults to an empty</span>
<a href="#l5.394"></a><span id="l5.394" class="difflineminus">-   * root branch.</span>
<a href="#l5.395"></a><span id="l5.395" class="difflineminus">-   */</span>
<a href="#l5.396"></a><span id="l5.396" class="difflineminus">-  readonly attribute extIPreferenceBranch prefs;</span>
<a href="#l5.397"></a><span id="l5.397" class="difflineminus">-</span>
<a href="#l5.398"></a><span id="l5.398" class="difflineminus">-  /**</span>
<a href="#l5.399"></a><span id="l5.399" class="difflineminus">-   * The storage object for the application.</span>
<a href="#l5.400"></a><span id="l5.400" class="difflineminus">-   */</span>
<a href="#l5.401"></a><span id="l5.401" class="difflineminus">-  readonly attribute extISessionStorage storage;</span>
<a href="#l5.402"></a><span id="l5.402" class="difflineminus">-</span>
<a href="#l5.403"></a><span id="l5.403" class="difflineminus">-  /**</span>
<a href="#l5.404"></a><span id="l5.404" class="difflineminus">-   * The events object for the application.</span>
<a href="#l5.405"></a><span id="l5.405" class="difflineminus">-   * supports: &quot;load&quot;, &quot;ready&quot;, &quot;quit&quot;, &quot;unload&quot;</span>
<a href="#l5.406"></a><span id="l5.406" class="difflineminus">-   */</span>
<a href="#l5.407"></a><span id="l5.407" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l5.408"></a><span id="l5.408" class="difflineminus">-</span>
<a href="#l5.409"></a><span id="l5.409" class="difflineminus">-  /**</span>
<a href="#l5.410"></a><span id="l5.410" class="difflineminus">-   * Quits the application (if nobody objects to quit-application-requested).</span>
<a href="#l5.411"></a><span id="l5.411" class="difflineminus">-   * @returns whether quitting will proceed</span>
<a href="#l5.412"></a><span id="l5.412" class="difflineminus">-   */</span>
<a href="#l5.413"></a><span id="l5.413" class="difflineminus">-  boolean quit();</span>
<a href="#l5.414"></a><span id="l5.414" class="difflineminus">-</span>
<a href="#l5.415"></a><span id="l5.415" class="difflineminus">-  /**</span>
<a href="#l5.416"></a><span id="l5.416" class="difflineminus">-   * Restarts the application (if nobody objects to quit-application-requested).</span>
<a href="#l5.417"></a><span id="l5.417" class="difflineminus">-   * @returns whether restarting will proceed</span>
<a href="#l5.418"></a><span id="l5.418" class="difflineminus">-   */</span>
<a href="#l5.419"></a><span id="l5.419" class="difflineminus">-  boolean restart();</span>
<a href="#l5.420"></a><span id="l5.420" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l6.1"></a><span id="l6.1">deleted file mode 100644</span>
<a href="#l6.2"></a><span id="l6.2" class="difflineminus">--- a/suite/smile/exthelper/moz.build</span>
<a href="#l6.3"></a><span id="l6.3" class="difflineplus">+++ /dev/null</span>
<a href="#l6.4"></a><span id="l6.4" class="difflineat">@@ -1,15 +0,0 @@</span>
<a href="#l6.5"></a><span id="l6.5" class="difflineminus">-# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-</span>
<a href="#l6.6"></a><span id="l6.6" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l6.7"></a><span id="l6.7" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l6.8"></a><span id="l6.8" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l6.9"></a><span id="l6.9" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l6.10"></a><span id="l6.10" class="difflineminus">-</span>
<a href="#l6.11"></a><span id="l6.11" class="difflineminus">-with Files('**'):</span>
<a href="#l6.12"></a><span id="l6.12" class="difflineminus">-    BUG_COMPONENT = ('SeaMonkey', 'General')</span>
<a href="#l6.13"></a><span id="l6.13" class="difflineminus">-</span>
<a href="#l6.14"></a><span id="l6.14" class="difflineminus">-XPIDL_SOURCES += [</span>
<a href="#l6.15"></a><span id="l6.15" class="difflineminus">-    'extIApplication.idl',</span>
<a href="#l6.16"></a><span id="l6.16" class="difflineminus">-]</span>
<a href="#l6.17"></a><span id="l6.17" class="difflineminus">-</span>
<a href="#l6.18"></a><span id="l6.18" class="difflineminus">-XPIDL_MODULE = 'exthelper'</span>
<a href="#l6.19"></a><span id="l6.19" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l7.1"></a><span id="l7.1">deleted file mode 100644</span>
<a href="#l7.2"></a><span id="l7.2" class="difflineminus">--- a/suite/smile/moz.build</span>
<a href="#l7.3"></a><span id="l7.3" class="difflineplus">+++ /dev/null</span>
<a href="#l7.4"></a><span id="l7.4" class="difflineat">@@ -1,12 +0,0 @@</span>
<a href="#l7.5"></a><span id="l7.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l7.6"></a><span id="l7.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l7.7"></a><span id="l7.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l7.8"></a><span id="l7.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l7.9"></a><span id="l7.9" class="difflineminus">-</span>
<a href="#l7.10"></a><span id="l7.10" class="difflineminus">-DIRS += [</span>
<a href="#l7.11"></a><span id="l7.11" class="difflineminus">-    'exthelper',</span>
<a href="#l7.12"></a><span id="l7.12" class="difflineminus">-    'public',</span>
<a href="#l7.13"></a><span id="l7.13" class="difflineminus">-    'src',</span>
<a href="#l7.14"></a><span id="l7.14" class="difflineminus">-]</span>
<a href="#l7.15"></a><span id="l7.15" class="difflineminus">-</span>
<a href="#l7.16"></a><span id="l7.16" class="difflineminus">-BROWSER_CHROME_MANIFESTS += ['test/smile.ini']</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l8.1"></a><span id="l8.1">deleted file mode 100644</span>
<a href="#l8.2"></a><span id="l8.2" class="difflineminus">--- a/suite/smile/public/moz.build</span>
<a href="#l8.3"></a><span id="l8.3" class="difflineplus">+++ /dev/null</span>
<a href="#l8.4"></a><span id="l8.4" class="difflineat">@@ -1,11 +0,0 @@</span>
<a href="#l8.5"></a><span id="l8.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l8.6"></a><span id="l8.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l8.7"></a><span id="l8.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l8.8"></a><span id="l8.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l8.9"></a><span id="l8.9" class="difflineminus">-</span>
<a href="#l8.10"></a><span id="l8.10" class="difflineminus">-XPIDL_SOURCES += [</span>
<a href="#l8.11"></a><span id="l8.11" class="difflineminus">-    'smileIApplication.idl',</span>
<a href="#l8.12"></a><span id="l8.12" class="difflineminus">-]</span>
<a href="#l8.13"></a><span id="l8.13" class="difflineminus">-</span>
<a href="#l8.14"></a><span id="l8.14" class="difflineminus">-XPIDL_MODULE = 'smile'</span>
<a href="#l8.15"></a><span id="l8.15" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l9.1"></a><span id="l9.1">deleted file mode 100644</span>
<a href="#l9.2"></a><span id="l9.2" class="difflineminus">--- a/suite/smile/public/smileIApplication.idl</span>
<a href="#l9.3"></a><span id="l9.3" class="difflineplus">+++ /dev/null</span>
<a href="#l9.4"></a><span id="l9.4" class="difflineat">@@ -1,356 +0,0 @@</span>
<a href="#l9.5"></a><span id="l9.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l9.6"></a><span id="l9.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l9.7"></a><span id="l9.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l9.8"></a><span id="l9.8" class="difflineminus">-</span>
<a href="#l9.9"></a><span id="l9.9" class="difflineminus">-#include &quot;nsISupports.idl&quot;</span>
<a href="#l9.10"></a><span id="l9.10" class="difflineminus">-#include &quot;extIApplication.idl&quot;</span>
<a href="#l9.11"></a><span id="l9.11" class="difflineminus">-</span>
<a href="#l9.12"></a><span id="l9.12" class="difflineminus">-interface nsIVariant;</span>
<a href="#l9.13"></a><span id="l9.13" class="difflineminus">-interface nsIURI;</span>
<a href="#l9.14"></a><span id="l9.14" class="difflineminus">-interface nsIDOMHTMLDocument;</span>
<a href="#l9.15"></a><span id="l9.15" class="difflineminus">-</span>
<a href="#l9.16"></a><span id="l9.16" class="difflineminus">-interface smileIBookmarkFolder;</span>
<a href="#l9.17"></a><span id="l9.17" class="difflineminus">-interface smileIBrowserTab;</span>
<a href="#l9.18"></a><span id="l9.18" class="difflineminus">-</span>
<a href="#l9.19"></a><span id="l9.19" class="difflineminus">-/**</span>
<a href="#l9.20"></a><span id="l9.20" class="difflineminus">- * Interface representing a collection of annotations associated</span>
<a href="#l9.21"></a><span id="l9.21" class="difflineminus">- * with a bookmark or bookmark folder.</span>
<a href="#l9.22"></a><span id="l9.22" class="difflineminus">- */</span>
<a href="#l9.23"></a><span id="l9.23" class="difflineminus">-[scriptable, uuid(335c9292-91a1-4ca0-ad0b-07d5f63ed6cd)]</span>
<a href="#l9.24"></a><span id="l9.24" class="difflineminus">-interface smileIAnnotations : nsISupports</span>
<a href="#l9.25"></a><span id="l9.25" class="difflineminus">-{</span>
<a href="#l9.26"></a><span id="l9.26" class="difflineminus">-  /**</span>
<a href="#l9.27"></a><span id="l9.27" class="difflineminus">-   * Array of the annotation names associated with the owning item</span>
<a href="#l9.28"></a><span id="l9.28" class="difflineminus">-   */</span>
<a href="#l9.29"></a><span id="l9.29" class="difflineminus">-  readonly attribute nsIVariant names;</span>
<a href="#l9.30"></a><span id="l9.30" class="difflineminus">-</span>
<a href="#l9.31"></a><span id="l9.31" class="difflineminus">-  /**</span>
<a href="#l9.32"></a><span id="l9.32" class="difflineminus">-   * Determines if an annotation exists with the given name.</span>
<a href="#l9.33"></a><span id="l9.33" class="difflineminus">-   * @param   aName</span>
<a href="#l9.34"></a><span id="l9.34" class="difflineminus">-   *          The name of the annotation</span>
<a href="#l9.35"></a><span id="l9.35" class="difflineminus">-   * @returns true if an annotation exists with the given name,</span>
<a href="#l9.36"></a><span id="l9.36" class="difflineminus">-   *          false otherwise.</span>
<a href="#l9.37"></a><span id="l9.37" class="difflineminus">-   */</span>
<a href="#l9.38"></a><span id="l9.38" class="difflineminus">-  boolean has(in AString aName);</span>
<a href="#l9.39"></a><span id="l9.39" class="difflineminus">-</span>
<a href="#l9.40"></a><span id="l9.40" class="difflineminus">-  /**</span>
<a href="#l9.41"></a><span id="l9.41" class="difflineminus">-   * Gets the value of an annotation with the given name.</span>
<a href="#l9.42"></a><span id="l9.42" class="difflineminus">-   * @param   aName</span>
<a href="#l9.43"></a><span id="l9.43" class="difflineminus">-   *          The name of the annotation</span>
<a href="#l9.44"></a><span id="l9.44" class="difflineminus">-   * @returns A variant containing the value of the annotation. Supports</span>
<a href="#l9.45"></a><span id="l9.45" class="difflineminus">-   *          string, boolean and number.</span>
<a href="#l9.46"></a><span id="l9.46" class="difflineminus">-   */</span>
<a href="#l9.47"></a><span id="l9.47" class="difflineminus">-  nsIVariant get(in AString aName);</span>
<a href="#l9.48"></a><span id="l9.48" class="difflineminus">-</span>
<a href="#l9.49"></a><span id="l9.49" class="difflineminus">-  /**</span>
<a href="#l9.50"></a><span id="l9.50" class="difflineminus">-   * Sets the value of an annotation with the given name.</span>
<a href="#l9.51"></a><span id="l9.51" class="difflineminus">-   * @param   aName</span>
<a href="#l9.52"></a><span id="l9.52" class="difflineminus">-   *          The name of the annotation</span>
<a href="#l9.53"></a><span id="l9.53" class="difflineminus">-   * @param   aValue</span>
<a href="#l9.54"></a><span id="l9.54" class="difflineminus">-   *          The new value of the annotation. Supports string, boolean</span>
<a href="#l9.55"></a><span id="l9.55" class="difflineminus">-   *          and number</span>
<a href="#l9.56"></a><span id="l9.56" class="difflineminus">-   * @param   aExpiration</span>
<a href="#l9.57"></a><span id="l9.57" class="difflineminus">-   *          The expiration policy for the annotation.</span>
<a href="#l9.58"></a><span id="l9.58" class="difflineminus">-   *          See nsIAnnotationService.</span>
<a href="#l9.59"></a><span id="l9.59" class="difflineminus">-   */</span>
<a href="#l9.60"></a><span id="l9.60" class="difflineminus">-  void set(in AString aName, in nsIVariant aValue, in int32_t aExpiration);</span>
<a href="#l9.61"></a><span id="l9.61" class="difflineminus">-</span>
<a href="#l9.62"></a><span id="l9.62" class="difflineminus">-  /**</span>
<a href="#l9.63"></a><span id="l9.63" class="difflineminus">-   * Removes the named annotation from the owner item.</span>
<a href="#l9.64"></a><span id="l9.64" class="difflineminus">-   * @param   aName</span>
<a href="#l9.65"></a><span id="l9.65" class="difflineminus">-   *          The name of annotation.</span>
<a href="#l9.66"></a><span id="l9.66" class="difflineminus">-   */</span>
<a href="#l9.67"></a><span id="l9.67" class="difflineminus">-  void remove(in AString aName);</span>
<a href="#l9.68"></a><span id="l9.68" class="difflineminus">-};</span>
<a href="#l9.69"></a><span id="l9.69" class="difflineminus">-</span>
<a href="#l9.70"></a><span id="l9.70" class="difflineminus">-</span>
<a href="#l9.71"></a><span id="l9.71" class="difflineminus">-/**</span>
<a href="#l9.72"></a><span id="l9.72" class="difflineminus">- * Interface representing a bookmark item.</span>
<a href="#l9.73"></a><span id="l9.73" class="difflineminus">- */</span>
<a href="#l9.74"></a><span id="l9.74" class="difflineminus">-[scriptable, uuid(a27f8945-9333-45d3-8ee1-24cbcb3366f9)]</span>
<a href="#l9.75"></a><span id="l9.75" class="difflineminus">-interface smileIBookmark : nsISupports</span>
<a href="#l9.76"></a><span id="l9.76" class="difflineminus">-{</span>
<a href="#l9.77"></a><span id="l9.77" class="difflineminus">-  /**</span>
<a href="#l9.78"></a><span id="l9.78" class="difflineminus">-   * The id of the bookmark.</span>
<a href="#l9.79"></a><span id="l9.79" class="difflineminus">-   */</span>
<a href="#l9.80"></a><span id="l9.80" class="difflineminus">-  readonly attribute long long id;</span>
<a href="#l9.81"></a><span id="l9.81" class="difflineminus">-</span>
<a href="#l9.82"></a><span id="l9.82" class="difflineminus">-  /**</span>
<a href="#l9.83"></a><span id="l9.83" class="difflineminus">-   * The title of the bookmark.</span>
<a href="#l9.84"></a><span id="l9.84" class="difflineminus">-   */</span>
<a href="#l9.85"></a><span id="l9.85" class="difflineminus">-  attribute AString title;</span>
<a href="#l9.86"></a><span id="l9.86" class="difflineminus">-</span>
<a href="#l9.87"></a><span id="l9.87" class="difflineminus">-  /**</span>
<a href="#l9.88"></a><span id="l9.88" class="difflineminus">-   * The uri of the bookmark.</span>
<a href="#l9.89"></a><span id="l9.89" class="difflineminus">-   */</span>
<a href="#l9.90"></a><span id="l9.90" class="difflineminus">-  attribute nsIURI uri;</span>
<a href="#l9.91"></a><span id="l9.91" class="difflineminus">-</span>
<a href="#l9.92"></a><span id="l9.92" class="difflineminus">-  /**</span>
<a href="#l9.93"></a><span id="l9.93" class="difflineminus">-   * The description of the bookmark.</span>
<a href="#l9.94"></a><span id="l9.94" class="difflineminus">-   */</span>
<a href="#l9.95"></a><span id="l9.95" class="difflineminus">-  attribute AString description;</span>
<a href="#l9.96"></a><span id="l9.96" class="difflineminus">-</span>
<a href="#l9.97"></a><span id="l9.97" class="difflineminus">-  /**</span>
<a href="#l9.98"></a><span id="l9.98" class="difflineminus">-   * The keyword associated with the bookmark.</span>
<a href="#l9.99"></a><span id="l9.99" class="difflineminus">-   */</span>
<a href="#l9.100"></a><span id="l9.100" class="difflineminus">-  attribute AString keyword;</span>
<a href="#l9.101"></a><span id="l9.101" class="difflineminus">-</span>
<a href="#l9.102"></a><span id="l9.102" class="difflineminus">-  /**</span>
<a href="#l9.103"></a><span id="l9.103" class="difflineminus">-   * The type of the bookmark.</span>
<a href="#l9.104"></a><span id="l9.104" class="difflineminus">-   * values: &quot;bookmark&quot;, &quot;separator&quot;</span>
<a href="#l9.105"></a><span id="l9.105" class="difflineminus">-   */</span>
<a href="#l9.106"></a><span id="l9.106" class="difflineminus">-  readonly attribute AString type;</span>
<a href="#l9.107"></a><span id="l9.107" class="difflineminus">-</span>
<a href="#l9.108"></a><span id="l9.108" class="difflineminus">-  /**</span>
<a href="#l9.109"></a><span id="l9.109" class="difflineminus">-   * The parent folder of the bookmark.</span>
<a href="#l9.110"></a><span id="l9.110" class="difflineminus">-   */</span>
<a href="#l9.111"></a><span id="l9.111" class="difflineminus">-  attribute smileIBookmarkFolder parent;</span>
<a href="#l9.112"></a><span id="l9.112" class="difflineminus">-</span>
<a href="#l9.113"></a><span id="l9.113" class="difflineminus">-  /**</span>
<a href="#l9.114"></a><span id="l9.114" class="difflineminus">-   * The annotations object for the bookmark.</span>
<a href="#l9.115"></a><span id="l9.115" class="difflineminus">-   */</span>
<a href="#l9.116"></a><span id="l9.116" class="difflineminus">-  readonly attribute smileIAnnotations annotations;</span>
<a href="#l9.117"></a><span id="l9.117" class="difflineminus">-</span>
<a href="#l9.118"></a><span id="l9.118" class="difflineminus">-  /**</span>
<a href="#l9.119"></a><span id="l9.119" class="difflineminus">-   * The events object for the bookmark.</span>
<a href="#l9.120"></a><span id="l9.120" class="difflineminus">-   * supports: &quot;remove&quot;, &quot;change&quot;, &quot;visit&quot;, &quot;move&quot;</span>
<a href="#l9.121"></a><span id="l9.121" class="difflineminus">-   */</span>
<a href="#l9.122"></a><span id="l9.122" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l9.123"></a><span id="l9.123" class="difflineminus">-</span>
<a href="#l9.124"></a><span id="l9.124" class="difflineminus">-  /**</span>
<a href="#l9.125"></a><span id="l9.125" class="difflineminus">-   * Removes the item from the parent folder. Used to</span>
<a href="#l9.126"></a><span id="l9.126" class="difflineminus">-   * delete a bookmark or separator</span>
<a href="#l9.127"></a><span id="l9.127" class="difflineminus">-   */</span>
<a href="#l9.128"></a><span id="l9.128" class="difflineminus">-  void remove();</span>
<a href="#l9.129"></a><span id="l9.129" class="difflineminus">-};</span>
<a href="#l9.130"></a><span id="l9.130" class="difflineminus">-</span>
<a href="#l9.131"></a><span id="l9.131" class="difflineminus">-</span>
<a href="#l9.132"></a><span id="l9.132" class="difflineminus">-/**</span>
<a href="#l9.133"></a><span id="l9.133" class="difflineminus">- * Interface representing a bookmark folder. Folders</span>
<a href="#l9.134"></a><span id="l9.134" class="difflineminus">- * can hold bookmarks, separators and other folders.</span>
<a href="#l9.135"></a><span id="l9.135" class="difflineminus">- */</span>
<a href="#l9.136"></a><span id="l9.136" class="difflineminus">-[scriptable, uuid(03227226-d6eb-4654-9578-710c2222eb81)]</span>
<a href="#l9.137"></a><span id="l9.137" class="difflineminus">-interface smileIBookmarkFolder : nsISupports</span>
<a href="#l9.138"></a><span id="l9.138" class="difflineminus">-{</span>
<a href="#l9.139"></a><span id="l9.139" class="difflineminus">-  /**</span>
<a href="#l9.140"></a><span id="l9.140" class="difflineminus">-   * The id of the folder.</span>
<a href="#l9.141"></a><span id="l9.141" class="difflineminus">-   */</span>
<a href="#l9.142"></a><span id="l9.142" class="difflineminus">-  readonly attribute long long id;</span>
<a href="#l9.143"></a><span id="l9.143" class="difflineminus">-</span>
<a href="#l9.144"></a><span id="l9.144" class="difflineminus">-  /**</span>
<a href="#l9.145"></a><span id="l9.145" class="difflineminus">-   * The title of the folder.</span>
<a href="#l9.146"></a><span id="l9.146" class="difflineminus">-   */</span>
<a href="#l9.147"></a><span id="l9.147" class="difflineminus">-  attribute AString title;</span>
<a href="#l9.148"></a><span id="l9.148" class="difflineminus">-</span>
<a href="#l9.149"></a><span id="l9.149" class="difflineminus">-  /**</span>
<a href="#l9.150"></a><span id="l9.150" class="difflineminus">-   * The description of the folder.</span>
<a href="#l9.151"></a><span id="l9.151" class="difflineminus">-   */</span>
<a href="#l9.152"></a><span id="l9.152" class="difflineminus">-  attribute AString description;</span>
<a href="#l9.153"></a><span id="l9.153" class="difflineminus">-</span>
<a href="#l9.154"></a><span id="l9.154" class="difflineminus">-  /**</span>
<a href="#l9.155"></a><span id="l9.155" class="difflineminus">-   * The type of the folder.</span>
<a href="#l9.156"></a><span id="l9.156" class="difflineminus">-   * values: &quot;folder&quot;</span>
<a href="#l9.157"></a><span id="l9.157" class="difflineminus">-   */</span>
<a href="#l9.158"></a><span id="l9.158" class="difflineminus">-  readonly attribute AString type;</span>
<a href="#l9.159"></a><span id="l9.159" class="difflineminus">-</span>
<a href="#l9.160"></a><span id="l9.160" class="difflineminus">-  /**</span>
<a href="#l9.161"></a><span id="l9.161" class="difflineminus">-   * The parent folder of the folder.</span>
<a href="#l9.162"></a><span id="l9.162" class="difflineminus">-   */</span>
<a href="#l9.163"></a><span id="l9.163" class="difflineminus">-  attribute smileIBookmarkFolder parent;</span>
<a href="#l9.164"></a><span id="l9.164" class="difflineminus">-</span>
<a href="#l9.165"></a><span id="l9.165" class="difflineminus">-  /**</span>
<a href="#l9.166"></a><span id="l9.166" class="difflineminus">-   * The annotations object for the folder.</span>
<a href="#l9.167"></a><span id="l9.167" class="difflineminus">-   */</span>
<a href="#l9.168"></a><span id="l9.168" class="difflineminus">-  readonly attribute smileIAnnotations annotations;</span>
<a href="#l9.169"></a><span id="l9.169" class="difflineminus">-</span>
<a href="#l9.170"></a><span id="l9.170" class="difflineminus">-  /**</span>
<a href="#l9.171"></a><span id="l9.171" class="difflineminus">-   * The events object for the folder.</span>
<a href="#l9.172"></a><span id="l9.172" class="difflineminus">-   * supports: &quot;add&quot;, &quot;addchild&quot;, &quot;remove&quot;, &quot;removechild&quot;, &quot;change&quot;, &quot;move&quot;</span>
<a href="#l9.173"></a><span id="l9.173" class="difflineminus">-   */</span>
<a href="#l9.174"></a><span id="l9.174" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l9.175"></a><span id="l9.175" class="difflineminus">-</span>
<a href="#l9.176"></a><span id="l9.176" class="difflineminus">-  /**</span>
<a href="#l9.177"></a><span id="l9.177" class="difflineminus">-   * Array of all bookmarks, separators and folders contained</span>
<a href="#l9.178"></a><span id="l9.178" class="difflineminus">-   * in this folder.</span>
<a href="#l9.179"></a><span id="l9.179" class="difflineminus">-   */</span>
<a href="#l9.180"></a><span id="l9.180" class="difflineminus">-  readonly attribute nsIVariant children;</span>
<a href="#l9.181"></a><span id="l9.181" class="difflineminus">-</span>
<a href="#l9.182"></a><span id="l9.182" class="difflineminus">-  /**</span>
<a href="#l9.183"></a><span id="l9.183" class="difflineminus">-   * Adds a new child bookmark to this folder.</span>
<a href="#l9.184"></a><span id="l9.184" class="difflineminus">-   * @param   aTitle</span>
<a href="#l9.185"></a><span id="l9.185" class="difflineminus">-   *          The title of bookmark.</span>
<a href="#l9.186"></a><span id="l9.186" class="difflineminus">-   * @param   aURI</span>
<a href="#l9.187"></a><span id="l9.187" class="difflineminus">-   *          The uri of bookmark.</span>
<a href="#l9.188"></a><span id="l9.188" class="difflineminus">-   */</span>
<a href="#l9.189"></a><span id="l9.189" class="difflineminus">-  smileIBookmark addBookmark(in AString aTitle, in nsIURI aURI);</span>
<a href="#l9.190"></a><span id="l9.190" class="difflineminus">-</span>
<a href="#l9.191"></a><span id="l9.191" class="difflineminus">-  /**</span>
<a href="#l9.192"></a><span id="l9.192" class="difflineminus">-   * Adds a new child separator to this folder.</span>
<a href="#l9.193"></a><span id="l9.193" class="difflineminus">-   */</span>
<a href="#l9.194"></a><span id="l9.194" class="difflineminus">-  smileIBookmark addSeparator();</span>
<a href="#l9.195"></a><span id="l9.195" class="difflineminus">-</span>
<a href="#l9.196"></a><span id="l9.196" class="difflineminus">-  /**</span>
<a href="#l9.197"></a><span id="l9.197" class="difflineminus">-   * Adds a new child folder to this folder.</span>
<a href="#l9.198"></a><span id="l9.198" class="difflineminus">-   * @param   aTitle</span>
<a href="#l9.199"></a><span id="l9.199" class="difflineminus">-   *          The title of folder.</span>
<a href="#l9.200"></a><span id="l9.200" class="difflineminus">-   */</span>
<a href="#l9.201"></a><span id="l9.201" class="difflineminus">-  smileIBookmarkFolder addFolder(in AString aTitle);</span>
<a href="#l9.202"></a><span id="l9.202" class="difflineminus">-</span>
<a href="#l9.203"></a><span id="l9.203" class="difflineminus">-  /**</span>
<a href="#l9.204"></a><span id="l9.204" class="difflineminus">-   * Removes the folder from the parent folder.</span>
<a href="#l9.205"></a><span id="l9.205" class="difflineminus">-   */</span>
<a href="#l9.206"></a><span id="l9.206" class="difflineminus">-  void remove();</span>
<a href="#l9.207"></a><span id="l9.207" class="difflineminus">-};</span>
<a href="#l9.208"></a><span id="l9.208" class="difflineminus">-</span>
<a href="#l9.209"></a><span id="l9.209" class="difflineminus">-/**</span>
<a href="#l9.210"></a><span id="l9.210" class="difflineminus">- * Interface representing a container for bookmark roots. Roots</span>
<a href="#l9.211"></a><span id="l9.211" class="difflineminus">- * are the top level parents for the various types of bookmarks in the system.</span>
<a href="#l9.212"></a><span id="l9.212" class="difflineminus">- */</span>
<a href="#l9.213"></a><span id="l9.213" class="difflineminus">-[scriptable, uuid(1102eec4-f66b-4082-abad-c967ad7d5f76)]</span>
<a href="#l9.214"></a><span id="l9.214" class="difflineminus">-interface smileIBookmarkRoots : nsISupports</span>
<a href="#l9.215"></a><span id="l9.215" class="difflineminus">-{</span>
<a href="#l9.216"></a><span id="l9.216" class="difflineminus">-  /**</span>
<a href="#l9.217"></a><span id="l9.217" class="difflineminus">-   * The folder for the 'bookmarks menu' root.</span>
<a href="#l9.218"></a><span id="l9.218" class="difflineminus">-   */</span>
<a href="#l9.219"></a><span id="l9.219" class="difflineminus">-  readonly attribute smileIBookmarkFolder menu;</span>
<a href="#l9.220"></a><span id="l9.220" class="difflineminus">-</span>
<a href="#l9.221"></a><span id="l9.221" class="difflineminus">-  /**</span>
<a href="#l9.222"></a><span id="l9.222" class="difflineminus">-   * The folder for the 'personal toolbar' root.</span>
<a href="#l9.223"></a><span id="l9.223" class="difflineminus">-   */</span>
<a href="#l9.224"></a><span id="l9.224" class="difflineminus">-  readonly attribute smileIBookmarkFolder toolbar;</span>
<a href="#l9.225"></a><span id="l9.225" class="difflineminus">-</span>
<a href="#l9.226"></a><span id="l9.226" class="difflineminus">-  /**</span>
<a href="#l9.227"></a><span id="l9.227" class="difflineminus">-   * The folder for the 'tags' root.</span>
<a href="#l9.228"></a><span id="l9.228" class="difflineminus">-   */</span>
<a href="#l9.229"></a><span id="l9.229" class="difflineminus">-  readonly attribute smileIBookmarkFolder tags;</span>
<a href="#l9.230"></a><span id="l9.230" class="difflineminus">-</span>
<a href="#l9.231"></a><span id="l9.231" class="difflineminus">-  /**</span>
<a href="#l9.232"></a><span id="l9.232" class="difflineminus">-   * The folder for the 'unfiled bookmarks' root.</span>
<a href="#l9.233"></a><span id="l9.233" class="difflineminus">-   */</span>
<a href="#l9.234"></a><span id="l9.234" class="difflineminus">-  readonly attribute smileIBookmarkFolder unfiled;</span>
<a href="#l9.235"></a><span id="l9.235" class="difflineminus">-};</span>
<a href="#l9.236"></a><span id="l9.236" class="difflineminus">-</span>
<a href="#l9.237"></a><span id="l9.237" class="difflineminus">-</span>
<a href="#l9.238"></a><span id="l9.238" class="difflineminus">-/**</span>
<a href="#l9.239"></a><span id="l9.239" class="difflineminus">- * Interface representing a browser window.</span>
<a href="#l9.240"></a><span id="l9.240" class="difflineminus">- */</span>
<a href="#l9.241"></a><span id="l9.241" class="difflineminus">-[scriptable, uuid(1c3002ec-5aaf-4232-ab7d-835a348133fd)]</span>
<a href="#l9.242"></a><span id="l9.242" class="difflineminus">-interface smileIWindow : nsISupports</span>
<a href="#l9.243"></a><span id="l9.243" class="difflineminus">-{</span>
<a href="#l9.244"></a><span id="l9.244" class="difflineminus">-  /**</span>
<a href="#l9.245"></a><span id="l9.245" class="difflineminus">-   * A collection of browser tabs within the browser window.</span>
<a href="#l9.246"></a><span id="l9.246" class="difflineminus">-   */</span>
<a href="#l9.247"></a><span id="l9.247" class="difflineminus">-  readonly attribute nsIVariant tabs;</span>
<a href="#l9.248"></a><span id="l9.248" class="difflineminus">-</span>
<a href="#l9.249"></a><span id="l9.249" class="difflineminus">-  /**</span>
<a href="#l9.250"></a><span id="l9.250" class="difflineminus">-   * The currently-active tab within the browser window.</span>
<a href="#l9.251"></a><span id="l9.251" class="difflineminus">-   */</span>
<a href="#l9.252"></a><span id="l9.252" class="difflineminus">-  readonly attribute smileIBrowserTab activeTab;</span>
<a href="#l9.253"></a><span id="l9.253" class="difflineminus">-</span>
<a href="#l9.254"></a><span id="l9.254" class="difflineminus">-  /**</span>
<a href="#l9.255"></a><span id="l9.255" class="difflineminus">-   * Open a new browser tab, pointing to the specified URI.</span>
<a href="#l9.256"></a><span id="l9.256" class="difflineminus">-   * @param   aURI</span>
<a href="#l9.257"></a><span id="l9.257" class="difflineminus">-   *          The uri to open the browser tab to</span>
<a href="#l9.258"></a><span id="l9.258" class="difflineminus">-   */</span>
<a href="#l9.259"></a><span id="l9.259" class="difflineminus">-  smileIBrowserTab open(in nsIURI aURI);</span>
<a href="#l9.260"></a><span id="l9.260" class="difflineminus">-</span>
<a href="#l9.261"></a><span id="l9.261" class="difflineminus">-  /**</span>
<a href="#l9.262"></a><span id="l9.262" class="difflineminus">-   * The events object for the browser window.</span>
<a href="#l9.263"></a><span id="l9.263" class="difflineminus">-   * supports: &quot;TabOpen&quot;, &quot;TabClose&quot;, &quot;TabMove&quot;, &quot;TabSelect&quot;</span>
<a href="#l9.264"></a><span id="l9.264" class="difflineminus">-   */</span>
<a href="#l9.265"></a><span id="l9.265" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l9.266"></a><span id="l9.266" class="difflineminus">-};</span>
<a href="#l9.267"></a><span id="l9.267" class="difflineminus">-</span>
<a href="#l9.268"></a><span id="l9.268" class="difflineminus">-/**</span>
<a href="#l9.269"></a><span id="l9.269" class="difflineminus">- * Interface representing a browser tab.</span>
<a href="#l9.270"></a><span id="l9.270" class="difflineminus">- */</span>
<a href="#l9.271"></a><span id="l9.271" class="difflineminus">-[scriptable, uuid(9b06c55e-5377-4c71-8bda-8e8750c5a02a)]</span>
<a href="#l9.272"></a><span id="l9.272" class="difflineminus">-interface smileIBrowserTab : nsISupports</span>
<a href="#l9.273"></a><span id="l9.273" class="difflineminus">-{</span>
<a href="#l9.274"></a><span id="l9.274" class="difflineminus">-  /**</span>
<a href="#l9.275"></a><span id="l9.275" class="difflineminus">-   * The current uri of this tab.</span>
<a href="#l9.276"></a><span id="l9.276" class="difflineminus">-   */</span>
<a href="#l9.277"></a><span id="l9.277" class="difflineminus">-  readonly attribute nsIURI uri;</span>
<a href="#l9.278"></a><span id="l9.278" class="difflineminus">-</span>
<a href="#l9.279"></a><span id="l9.279" class="difflineminus">-  /**</span>
<a href="#l9.280"></a><span id="l9.280" class="difflineminus">-   * The current index of this tab in the browser window.</span>
<a href="#l9.281"></a><span id="l9.281" class="difflineminus">-   */</span>
<a href="#l9.282"></a><span id="l9.282" class="difflineminus">-  readonly attribute int32_t index;</span>
<a href="#l9.283"></a><span id="l9.283" class="difflineminus">-</span>
<a href="#l9.284"></a><span id="l9.284" class="difflineminus">-  /**</span>
<a href="#l9.285"></a><span id="l9.285" class="difflineminus">-   * The browser window that is holding the tab.</span>
<a href="#l9.286"></a><span id="l9.286" class="difflineminus">-   */</span>
<a href="#l9.287"></a><span id="l9.287" class="difflineminus">-  readonly attribute smileIWindow window;</span>
<a href="#l9.288"></a><span id="l9.288" class="difflineminus">-</span>
<a href="#l9.289"></a><span id="l9.289" class="difflineminus">-  /**</span>
<a href="#l9.290"></a><span id="l9.290" class="difflineminus">-   * The content document of the browser tab.</span>
<a href="#l9.291"></a><span id="l9.291" class="difflineminus">-   */</span>
<a href="#l9.292"></a><span id="l9.292" class="difflineminus">-  readonly attribute nsIDOMHTMLDocument document;</span>
<a href="#l9.293"></a><span id="l9.293" class="difflineminus">-</span>
<a href="#l9.294"></a><span id="l9.294" class="difflineminus">-  /**</span>
<a href="#l9.295"></a><span id="l9.295" class="difflineminus">-   * The events object for the browser tab.</span>
<a href="#l9.296"></a><span id="l9.296" class="difflineminus">-   * supports: &quot;load&quot;</span>
<a href="#l9.297"></a><span id="l9.297" class="difflineminus">-   */</span>
<a href="#l9.298"></a><span id="l9.298" class="difflineminus">-  readonly attribute extIEvents events;</span>
<a href="#l9.299"></a><span id="l9.299" class="difflineminus">-</span>
<a href="#l9.300"></a><span id="l9.300" class="difflineminus">-  /**</span>
<a href="#l9.301"></a><span id="l9.301" class="difflineminus">-   * Load a new URI into this browser tab.</span>
<a href="#l9.302"></a><span id="l9.302" class="difflineminus">-   * @param   aURI</span>
<a href="#l9.303"></a><span id="l9.303" class="difflineminus">-   *          The uri to load into the browser tab</span>
<a href="#l9.304"></a><span id="l9.304" class="difflineminus">-   */</span>
<a href="#l9.305"></a><span id="l9.305" class="difflineminus">-  void load(in nsIURI aURI);</span>
<a href="#l9.306"></a><span id="l9.306" class="difflineminus">-</span>
<a href="#l9.307"></a><span id="l9.307" class="difflineminus">-  /**</span>
<a href="#l9.308"></a><span id="l9.308" class="difflineminus">-   * Give focus to this browser tab, and bring it to the front.</span>
<a href="#l9.309"></a><span id="l9.309" class="difflineminus">-   */</span>
<a href="#l9.310"></a><span id="l9.310" class="difflineminus">-  void focus();</span>
<a href="#l9.311"></a><span id="l9.311" class="difflineminus">-</span>
<a href="#l9.312"></a><span id="l9.312" class="difflineminus">-  /**</span>
<a href="#l9.313"></a><span id="l9.313" class="difflineminus">-   * Close the browser tab. This may not actually close the tab</span>
<a href="#l9.314"></a><span id="l9.314" class="difflineminus">-   * as script may abort the close operation.</span>
<a href="#l9.315"></a><span id="l9.315" class="difflineminus">-   */</span>
<a href="#l9.316"></a><span id="l9.316" class="difflineminus">-  void close();</span>
<a href="#l9.317"></a><span id="l9.317" class="difflineminus">-</span>
<a href="#l9.318"></a><span id="l9.318" class="difflineminus">-  /**</span>
<a href="#l9.319"></a><span id="l9.319" class="difflineminus">-   * Moves this browser tab before another browser tab within the window.</span>
<a href="#l9.320"></a><span id="l9.320" class="difflineminus">-   * @param   aBefore</span>
<a href="#l9.321"></a><span id="l9.321" class="difflineminus">-   *          The tab before which the target tab will be moved</span>
<a href="#l9.322"></a><span id="l9.322" class="difflineminus">-   */</span>
<a href="#l9.323"></a><span id="l9.323" class="difflineminus">-  void moveBefore(in smileIBrowserTab aBefore);</span>
<a href="#l9.324"></a><span id="l9.324" class="difflineminus">-</span>
<a href="#l9.325"></a><span id="l9.325" class="difflineminus">-  /**</span>
<a href="#l9.326"></a><span id="l9.326" class="difflineminus">-   * Move this browser tab to the last tab within the window.</span>
<a href="#l9.327"></a><span id="l9.327" class="difflineminus">-   */</span>
<a href="#l9.328"></a><span id="l9.328" class="difflineminus">-  void moveToEnd();</span>
<a href="#l9.329"></a><span id="l9.329" class="difflineminus">-};</span>
<a href="#l9.330"></a><span id="l9.330" class="difflineminus">-</span>
<a href="#l9.331"></a><span id="l9.331" class="difflineminus">-/**</span>
<a href="#l9.332"></a><span id="l9.332" class="difflineminus">- * Interface for managing and accessing the applications systems</span>
<a href="#l9.333"></a><span id="l9.333" class="difflineminus">- */</span>
<a href="#l9.334"></a><span id="l9.334" class="difflineminus">-[scriptable, uuid(0b8e2ed6-70d9-45a0-a745-a2b874d6b5fd)]</span>
<a href="#l9.335"></a><span id="l9.335" class="difflineminus">-interface smileIApplication : extIApplication</span>
<a href="#l9.336"></a><span id="l9.336" class="difflineminus">-{</span>
<a href="#l9.337"></a><span id="l9.337" class="difflineminus">-  /**</span>
<a href="#l9.338"></a><span id="l9.338" class="difflineminus">-   * The root bookmarks object for the application.</span>
<a href="#l9.339"></a><span id="l9.339" class="difflineminus">-   * Contains all the bookmark roots in the system.</span>
<a href="#l9.340"></a><span id="l9.340" class="difflineminus">-   */</span>
<a href="#l9.341"></a><span id="l9.341" class="difflineminus">-  readonly attribute smileIBookmarkRoots bookmarks;</span>
<a href="#l9.342"></a><span id="l9.342" class="difflineminus">-</span>
<a href="#l9.343"></a><span id="l9.343" class="difflineminus">-  /**</span>
<a href="#l9.344"></a><span id="l9.344" class="difflineminus">-   * An array of browser windows within the application.</span>
<a href="#l9.345"></a><span id="l9.345" class="difflineminus">-   */</span>
<a href="#l9.346"></a><span id="l9.346" class="difflineminus">-  readonly attribute nsIVariant windows;</span>
<a href="#l9.347"></a><span id="l9.347" class="difflineminus">-</span>
<a href="#l9.348"></a><span id="l9.348" class="difflineminus">-  /**</span>
<a href="#l9.349"></a><span id="l9.349" class="difflineminus">-   * The currently active browser window.</span>
<a href="#l9.350"></a><span id="l9.350" class="difflineminus">-   */</span>
<a href="#l9.351"></a><span id="l9.351" class="difflineminus">-  readonly attribute smileIWindow activeWindow;</span>
<a href="#l9.352"></a><span id="l9.352" class="difflineminus">-</span>
<a href="#l9.353"></a><span id="l9.353" class="difflineminus">-  /**</span>
<a href="#l9.354"></a><span id="l9.354" class="difflineminus">-   * Returns true if the application is running on a Mac OS X. This is intended</span>
<a href="#l9.355"></a><span id="l9.355" class="difflineminus">-   * for situations where Mac does things differently, e.g. The application</span>
<a href="#l9.356"></a><span id="l9.356" class="difflineminus">-   * doesn't support print preview on Mac because Mac provides a preview option</span>
<a href="#l9.357"></a><span id="l9.357" class="difflineminus">-   * in the print dialog.</span>
<a href="#l9.358"></a><span id="l9.358" class="difflineminus">-   */</span>
<a href="#l9.359"></a><span id="l9.359" class="difflineminus">-  readonly attribute boolean platformIsMac;</span>
<a href="#l9.360"></a><span id="l9.360" class="difflineminus">-};</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l10.1"></a><span id="l10.1">deleted file mode 100644</span>
<a href="#l10.2"></a><span id="l10.2" class="difflineminus">--- a/suite/smile/src/moz.build</span>
<a href="#l10.3"></a><span id="l10.3" class="difflineplus">+++ /dev/null</span>
<a href="#l10.4"></a><span id="l10.4" class="difflineat">@@ -1,13 +0,0 @@</span>
<a href="#l10.5"></a><span id="l10.5" class="difflineminus">-# vim: set filetype=python:</span>
<a href="#l10.6"></a><span id="l10.6" class="difflineminus">-# This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l10.7"></a><span id="l10.7" class="difflineminus">-# License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l10.8"></a><span id="l10.8" class="difflineminus">-# file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a href="#l10.9"></a><span id="l10.9" class="difflineminus">-</span>
<a href="#l10.10"></a><span id="l10.10" class="difflineminus">-EXTRA_COMPONENTS += [</span>
<a href="#l10.11"></a><span id="l10.11" class="difflineminus">-    'smileApplication.manifest',</span>
<a href="#l10.12"></a><span id="l10.12" class="difflineminus">-]</span>
<a href="#l10.13"></a><span id="l10.13" class="difflineminus">-</span>
<a href="#l10.14"></a><span id="l10.14" class="difflineminus">-EXTRA_PP_COMPONENTS += [</span>
<a href="#l10.15"></a><span id="l10.15" class="difflineminus">-    'smileApplication.js',</span>
<a href="#l10.16"></a><span id="l10.16" class="difflineminus">-]</span>
<a href="#l10.17"></a><span id="l10.17" class="difflineminus">-</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l11.1"></a><span id="l11.1">deleted file mode 100644</span>
<a href="#l11.2"></a><span id="l11.2" class="difflineminus">--- a/suite/smile/src/smileApplication.js</span>
<a href="#l11.3"></a><span id="l11.3" class="difflineplus">+++ /dev/null</span>
<a href="#l11.4"></a><span id="l11.4" class="difflineat">@@ -1,800 +0,0 @@</span>
<a href="#l11.5"></a><span id="l11.5" class="difflineminus">-/* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a href="#l11.6"></a><span id="l11.6" class="difflineminus">- * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a href="#l11.7"></a><span id="l11.7" class="difflineminus">- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a href="#l11.8"></a><span id="l11.8" class="difflineminus">-</span>
<a href="#l11.9"></a><span id="l11.9" class="difflineminus">-const Ci = Components.interfaces;</span>
<a href="#l11.10"></a><span id="l11.10" class="difflineminus">-const Cc = Components.classes;</span>
<a href="#l11.11"></a><span id="l11.11" class="difflineminus">-</span>
<a href="#l11.12"></a><span id="l11.12" class="difflineminus">-ChromeUtils.import(&quot;resource://gre/modules/XPCOMUtils.jsm&quot;);</span>
<a href="#l11.13"></a><span id="l11.13" class="difflineminus">-ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l11.14"></a><span id="l11.14" class="difflineminus">-</span>
<a href="#l11.15"></a><span id="l11.15" class="difflineminus">-const APPLICATION_CID = Components.ID(&quot;{c9ba8f65-c936-4ac6-a859-8936832b0c12}&quot;);</span>
<a href="#l11.16"></a><span id="l11.16" class="difflineminus">-const APPLICATION_CONTRACTID = &quot;@mozilla.org/smile/application;1&quot;;</span>
<a href="#l11.17"></a><span id="l11.17" class="difflineminus">-</span>
<a href="#l11.18"></a><span id="l11.18" class="difflineminus">-//=================================================</span>
<a href="#l11.19"></a><span id="l11.19" class="difflineminus">-// Singleton that holds services and utilities</span>
<a href="#l11.20"></a><span id="l11.20" class="difflineminus">-var Utilities = {</span>
<a href="#l11.21"></a><span id="l11.21" class="difflineminus">-  get bookmarks() {</span>
<a href="#l11.22"></a><span id="l11.22" class="difflineminus">-    let bookmarks =</span>
<a href="#l11.23"></a><span id="l11.23" class="difflineminus">-      Components.classes[&quot;@mozilla.org/browser/nav-bookmarks-service;1&quot;]</span>
<a href="#l11.24"></a><span id="l11.24" class="difflineminus">-                .getService(Components.interfaces.nsINavBookmarksService);</span>
<a href="#l11.25"></a><span id="l11.25" class="difflineminus">-    this.__defineGetter__(&quot;bookmarks&quot;, () =&gt; bookmarks);</span>
<a href="#l11.26"></a><span id="l11.26" class="difflineminus">-    return this.bookmarks;</span>
<a href="#l11.27"></a><span id="l11.27" class="difflineminus">-  },</span>
<a href="#l11.28"></a><span id="l11.28" class="difflineminus">-</span>
<a href="#l11.29"></a><span id="l11.29" class="difflineminus">-  get bookmarksObserver() {</span>
<a href="#l11.30"></a><span id="l11.30" class="difflineminus">-    let bookmarksObserver = new BookmarksObserver();</span>
<a href="#l11.31"></a><span id="l11.31" class="difflineminus">-    this.__defineGetter__(&quot;bookmarksObserver&quot;, () =&gt; bookmarksObserver);</span>
<a href="#l11.32"></a><span id="l11.32" class="difflineminus">-    return this.bookmarksObserver;</span>
<a href="#l11.33"></a><span id="l11.33" class="difflineminus">-  },</span>
<a href="#l11.34"></a><span id="l11.34" class="difflineminus">-</span>
<a href="#l11.35"></a><span id="l11.35" class="difflineminus">-  get annotations() {</span>
<a href="#l11.36"></a><span id="l11.36" class="difflineminus">-    let annotations =</span>
<a href="#l11.37"></a><span id="l11.37" class="difflineminus">-      Components.classes[&quot;@mozilla.org/browser/annotation-service;1&quot;]</span>
<a href="#l11.38"></a><span id="l11.38" class="difflineminus">-                .getService(Components.interfaces.nsIAnnotationService);</span>
<a href="#l11.39"></a><span id="l11.39" class="difflineminus">-    this.__defineGetter__(&quot;annotations&quot;, () =&gt; annotations);</span>
<a href="#l11.40"></a><span id="l11.40" class="difflineminus">-    return this.annotations;</span>
<a href="#l11.41"></a><span id="l11.41" class="difflineminus">-  },</span>
<a href="#l11.42"></a><span id="l11.42" class="difflineminus">-</span>
<a href="#l11.43"></a><span id="l11.43" class="difflineminus">-  get history() {</span>
<a href="#l11.44"></a><span id="l11.44" class="difflineminus">-    let history =</span>
<a href="#l11.45"></a><span id="l11.45" class="difflineminus">-      Components.classes[&quot;@mozilla.org/browser/nav-history-service;1&quot;]</span>
<a href="#l11.46"></a><span id="l11.46" class="difflineminus">-                .getService(Components.interfaces.nsINavHistoryService);</span>
<a href="#l11.47"></a><span id="l11.47" class="difflineminus">-    this.__defineGetter__(&quot;history&quot;, () =&gt; history);</span>
<a href="#l11.48"></a><span id="l11.48" class="difflineminus">-    return this.history;</span>
<a href="#l11.49"></a><span id="l11.49" class="difflineminus">-  },</span>
<a href="#l11.50"></a><span id="l11.50" class="difflineminus">-</span>
<a href="#l11.51"></a><span id="l11.51" class="difflineminus">-  get windowMediator() {</span>
<a href="#l11.52"></a><span id="l11.52" class="difflineminus">-    let windowMediator = Services.wm;</span>
<a href="#l11.53"></a><span id="l11.53" class="difflineminus">-    this.__defineGetter__(&quot;windowMediator&quot;, () =&gt; windowMediator);</span>
<a href="#l11.54"></a><span id="l11.54" class="difflineminus">-    return this.windowMediator;</span>
<a href="#l11.55"></a><span id="l11.55" class="difflineminus">-  },</span>
<a href="#l11.56"></a><span id="l11.56" class="difflineminus">-</span>
<a href="#l11.57"></a><span id="l11.57" class="difflineminus">-  makeURI: function smileutil_makeURI(aSpec) {</span>
<a href="#l11.58"></a><span id="l11.58" class="difflineminus">-    if (!aSpec)</span>
<a href="#l11.59"></a><span id="l11.59" class="difflineminus">-      return null;</span>
<a href="#l11.60"></a><span id="l11.60" class="difflineminus">-    var ios = Components.classes[&quot;@mozilla.org/network/io-service;1&quot;]</span>
<a href="#l11.61"></a><span id="l11.61" class="difflineminus">-                        .getService(Components.interfaces.nsIIOService);</span>
<a href="#l11.62"></a><span id="l11.62" class="difflineminus">-    return ios.newURI(aSpec);</span>
<a href="#l11.63"></a><span id="l11.63" class="difflineminus">-  },</span>
<a href="#l11.64"></a><span id="l11.64" class="difflineminus">-</span>
<a href="#l11.65"></a><span id="l11.65" class="difflineminus">-  free: function smileutil_free() {</span>
<a href="#l11.66"></a><span id="l11.66" class="difflineminus">-    delete this.bookmarks;</span>
<a href="#l11.67"></a><span id="l11.67" class="difflineminus">-    delete this.bookmarksObserver;</span>
<a href="#l11.68"></a><span id="l11.68" class="difflineminus">-    delete this.annotations;</span>
<a href="#l11.69"></a><span id="l11.69" class="difflineminus">-    delete this.history;</span>
<a href="#l11.70"></a><span id="l11.70" class="difflineminus">-    delete this.windowMediator;</span>
<a href="#l11.71"></a><span id="l11.71" class="difflineminus">-  }</span>
<a href="#l11.72"></a><span id="l11.72" class="difflineminus">-};</span>
<a href="#l11.73"></a><span id="l11.73" class="difflineminus">-</span>
<a href="#l11.74"></a><span id="l11.74" class="difflineminus">-</span>
<a href="#l11.75"></a><span id="l11.75" class="difflineminus">-//=================================================</span>
<a href="#l11.76"></a><span id="l11.76" class="difflineminus">-// Window implementation</span>
<a href="#l11.77"></a><span id="l11.77" class="difflineminus">-</span>
<a href="#l11.78"></a><span id="l11.78" class="difflineminus">-var smileWindowMap = new WeakMap();</span>
<a href="#l11.79"></a><span id="l11.79" class="difflineminus">-</span>
<a href="#l11.80"></a><span id="l11.80" class="difflineminus">-function getWindow(aWindow) {</span>
<a href="#l11.81"></a><span id="l11.81" class="difflineminus">-  let smileWindow = smileWindowMap.get(aWindow);</span>
<a href="#l11.82"></a><span id="l11.82" class="difflineminus">-  if (!smileWindow) {</span>
<a href="#l11.83"></a><span id="l11.83" class="difflineminus">-    smileWindow = new Window(aWindow);</span>
<a href="#l11.84"></a><span id="l11.84" class="difflineminus">-    smileWindowMap.set(aWindow, smileWindow);</span>
<a href="#l11.85"></a><span id="l11.85" class="difflineminus">-  }</span>
<a href="#l11.86"></a><span id="l11.86" class="difflineminus">-  return smileWindow;</span>
<a href="#l11.87"></a><span id="l11.87" class="difflineminus">-}</span>
<a href="#l11.88"></a><span id="l11.88" class="difflineminus">-</span>
<a href="#l11.89"></a><span id="l11.89" class="difflineminus">-// Don't call new Window() directly; use getWindow instead.</span>
<a href="#l11.90"></a><span id="l11.90" class="difflineminus">-function Window(aWindow) {</span>
<a href="#l11.91"></a><span id="l11.91" class="difflineminus">-  this._window = aWindow;</span>
<a href="#l11.92"></a><span id="l11.92" class="difflineminus">-  this._events = new Events();</span>
<a href="#l11.93"></a><span id="l11.93" class="difflineminus">-</span>
<a href="#l11.94"></a><span id="l11.94" class="difflineminus">-  this._watch(&quot;TabOpen&quot;);</span>
<a href="#l11.95"></a><span id="l11.95" class="difflineminus">-  this._watch(&quot;TabMove&quot;);</span>
<a href="#l11.96"></a><span id="l11.96" class="difflineminus">-  this._watch(&quot;TabClose&quot;);</span>
<a href="#l11.97"></a><span id="l11.97" class="difflineminus">-  this._watch(&quot;TabSelect&quot;);</span>
<a href="#l11.98"></a><span id="l11.98" class="difflineminus">-}</span>
<a href="#l11.99"></a><span id="l11.99" class="difflineminus">-</span>
<a href="#l11.100"></a><span id="l11.100" class="difflineminus">-Window.prototype = {</span>
<a href="#l11.101"></a><span id="l11.101" class="difflineminus">-  get events() {</span>
<a href="#l11.102"></a><span id="l11.102" class="difflineminus">-    return this._events;</span>
<a href="#l11.103"></a><span id="l11.103" class="difflineminus">-  },</span>
<a href="#l11.104"></a><span id="l11.104" class="difflineminus">-</span>
<a href="#l11.105"></a><span id="l11.105" class="difflineminus">-  get _tabbrowser() {</span>
<a href="#l11.106"></a><span id="l11.106" class="difflineminus">-    return this._window.getBrowser();</span>
<a href="#l11.107"></a><span id="l11.107" class="difflineminus">-  },</span>
<a href="#l11.108"></a><span id="l11.108" class="difflineminus">-</span>
<a href="#l11.109"></a><span id="l11.109" class="difflineminus">-  /*</span>
<a href="#l11.110"></a><span id="l11.110" class="difflineminus">-   * Helper used to setup event handlers on the XBL element. Note that the events</span>
<a href="#l11.111"></a><span id="l11.111" class="difflineminus">-   * are actually dispatched to tabs, so we capture them.</span>
<a href="#l11.112"></a><span id="l11.112" class="difflineminus">-   */</span>
<a href="#l11.113"></a><span id="l11.113" class="difflineminus">-  _watch: function win_watch(aType) {</span>
<a href="#l11.114"></a><span id="l11.114" class="difflineminus">-    this._tabbrowser.addEventListener(aType, this, true);</span>
<a href="#l11.115"></a><span id="l11.115" class="difflineminus">-  },</span>
<a href="#l11.116"></a><span id="l11.116" class="difflineminus">-</span>
<a href="#l11.117"></a><span id="l11.117" class="difflineminus">-  handleEvent: function win_handleEvent(aEvent) {</span>
<a href="#l11.118"></a><span id="l11.118" class="difflineminus">-    this._events.dispatch(aEvent.type, getBrowserTab(this, aEvent.originalTarget));</span>
<a href="#l11.119"></a><span id="l11.119" class="difflineminus">-  },</span>
<a href="#l11.120"></a><span id="l11.120" class="difflineminus">-</span>
<a href="#l11.121"></a><span id="l11.121" class="difflineminus">-  get tabs() {</span>
<a href="#l11.122"></a><span id="l11.122" class="difflineminus">-    var tabs = [];</span>
<a href="#l11.123"></a><span id="l11.123" class="difflineminus">-    var tabNodes = this._tabbrowser.tabs;</span>
<a href="#l11.124"></a><span id="l11.124" class="difflineminus">-    for (var i = 0; i &lt; tabNodes.length; i++)</span>
<a href="#l11.125"></a><span id="l11.125" class="difflineminus">-      tabs.push(getBrowserTab(this, tabNodes[i]));</span>
<a href="#l11.126"></a><span id="l11.126" class="difflineminus">-    return tabs;</span>
<a href="#l11.127"></a><span id="l11.127" class="difflineminus">-  },</span>
<a href="#l11.128"></a><span id="l11.128" class="difflineminus">-</span>
<a href="#l11.129"></a><span id="l11.129" class="difflineminus">-  get activeTab() {</span>
<a href="#l11.130"></a><span id="l11.130" class="difflineminus">-    return getBrowserTab(this, this._tabbrowser.selectedTab);</span>
<a href="#l11.131"></a><span id="l11.131" class="difflineminus">-  },</span>
<a href="#l11.132"></a><span id="l11.132" class="difflineminus">-</span>
<a href="#l11.133"></a><span id="l11.133" class="difflineminus">-  open: function win_open(aURI) {</span>
<a href="#l11.134"></a><span id="l11.134" class="difflineminus">-    return getBrowserTab(this, this._tabbrowser.addTab(aURI.spec));</span>
<a href="#l11.135"></a><span id="l11.135" class="difflineminus">-  },</span>
<a href="#l11.136"></a><span id="l11.136" class="difflineminus">-</span>
<a href="#l11.137"></a><span id="l11.137" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Components.interfaces.smileIWindow])</span>
<a href="#l11.138"></a><span id="l11.138" class="difflineminus">-};</span>
<a href="#l11.139"></a><span id="l11.139" class="difflineminus">-</span>
<a href="#l11.140"></a><span id="l11.140" class="difflineminus">-</span>
<a href="#l11.141"></a><span id="l11.141" class="difflineminus">-//=================================================</span>
<a href="#l11.142"></a><span id="l11.142" class="difflineminus">-// BrowserTab implementation</span>
<a href="#l11.143"></a><span id="l11.143" class="difflineminus">-// SMILE deals with tabs whereas FUEL deals with browsers.</span>
<a href="#l11.144"></a><span id="l11.144" class="difflineminus">-</span>
<a href="#l11.145"></a><span id="l11.145" class="difflineminus">-var smileBrowserTabMap = new WeakMap();</span>
<a href="#l11.146"></a><span id="l11.146" class="difflineminus">-</span>
<a href="#l11.147"></a><span id="l11.147" class="difflineminus">-function getBrowserTab(aSMILEWindow, aTab) {</span>
<a href="#l11.148"></a><span id="l11.148" class="difflineminus">-  let smileBrowserTab = smileBrowserTabMap.get(aTab);</span>
<a href="#l11.149"></a><span id="l11.149" class="difflineminus">-  if (!smileBrowserTab) {</span>
<a href="#l11.150"></a><span id="l11.150" class="difflineminus">-    smileBrowserTab = new BrowserTab(aSMILEWindow, aTab);</span>
<a href="#l11.151"></a><span id="l11.151" class="difflineminus">-    smileBrowserTabMap.set(aTab, smileBrowserTab);</span>
<a href="#l11.152"></a><span id="l11.152" class="difflineminus">-  }</span>
<a href="#l11.153"></a><span id="l11.153" class="difflineminus">-  return smileBrowserTab;</span>
<a href="#l11.154"></a><span id="l11.154" class="difflineminus">-}</span>
<a href="#l11.155"></a><span id="l11.155" class="difflineminus">-</span>
<a href="#l11.156"></a><span id="l11.156" class="difflineminus">-// Don't call new BrowserTab() directly; call getBrowserTab instead.</span>
<a href="#l11.157"></a><span id="l11.157" class="difflineminus">-function BrowserTab(aSMILEWindow, aTab) {</span>
<a href="#l11.158"></a><span id="l11.158" class="difflineminus">-  this._window = aSMILEWindow;</span>
<a href="#l11.159"></a><span id="l11.159" class="difflineminus">-  this._browser = aTab.linkedBrowser;</span>
<a href="#l11.160"></a><span id="l11.160" class="difflineminus">-  this._tab = aTab;</span>
<a href="#l11.161"></a><span id="l11.161" class="difflineminus">-  this._events = new Events();</span>
<a href="#l11.162"></a><span id="l11.162" class="difflineminus">-</span>
<a href="#l11.163"></a><span id="l11.163" class="difflineminus">-  this._watch(&quot;load&quot;);</span>
<a href="#l11.164"></a><span id="l11.164" class="difflineminus">-}</span>
<a href="#l11.165"></a><span id="l11.165" class="difflineminus">-</span>
<a href="#l11.166"></a><span id="l11.166" class="difflineminus">-BrowserTab.prototype = {</span>
<a href="#l11.167"></a><span id="l11.167" class="difflineminus">-  get _tabbrowser() {</span>
<a href="#l11.168"></a><span id="l11.168" class="difflineminus">-    return this._window._tabbrowser;</span>
<a href="#l11.169"></a><span id="l11.169" class="difflineminus">-  },</span>
<a href="#l11.170"></a><span id="l11.170" class="difflineminus">-</span>
<a href="#l11.171"></a><span id="l11.171" class="difflineminus">-  get uri() {</span>
<a href="#l11.172"></a><span id="l11.172" class="difflineminus">-    return this._browser.currentURI;</span>
<a href="#l11.173"></a><span id="l11.173" class="difflineminus">-  },</span>
<a href="#l11.174"></a><span id="l11.174" class="difflineminus">-</span>
<a href="#l11.175"></a><span id="l11.175" class="difflineminus">-  get index() {</span>
<a href="#l11.176"></a><span id="l11.176" class="difflineminus">-    try {</span>
<a href="#l11.177"></a><span id="l11.177" class="difflineminus">-      return this._tabbrowser.getTabIndex(this._tab);</span>
<a href="#l11.178"></a><span id="l11.178" class="difflineminus">-    }</span>
<a href="#l11.179"></a><span id="l11.179" class="difflineminus">-    catch (e) {</span>
<a href="#l11.180"></a><span id="l11.180" class="difflineminus">-      return -1;</span>
<a href="#l11.181"></a><span id="l11.181" class="difflineminus">-    }</span>
<a href="#l11.182"></a><span id="l11.182" class="difflineminus">-  },</span>
<a href="#l11.183"></a><span id="l11.183" class="difflineminus">-</span>
<a href="#l11.184"></a><span id="l11.184" class="difflineminus">-  get events() {</span>
<a href="#l11.185"></a><span id="l11.185" class="difflineminus">-    return this._events;</span>
<a href="#l11.186"></a><span id="l11.186" class="difflineminus">-  },</span>
<a href="#l11.187"></a><span id="l11.187" class="difflineminus">-</span>
<a href="#l11.188"></a><span id="l11.188" class="difflineminus">-  get window() {</span>
<a href="#l11.189"></a><span id="l11.189" class="difflineminus">-    return this._window;</span>
<a href="#l11.190"></a><span id="l11.190" class="difflineminus">-  },</span>
<a href="#l11.191"></a><span id="l11.191" class="difflineminus">-</span>
<a href="#l11.192"></a><span id="l11.192" class="difflineminus">-  get document() {</span>
<a href="#l11.193"></a><span id="l11.193" class="difflineminus">-    return this._browser.contentDocument;</span>
<a href="#l11.194"></a><span id="l11.194" class="difflineminus">-  },</span>
<a href="#l11.195"></a><span id="l11.195" class="difflineminus">-</span>
<a href="#l11.196"></a><span id="l11.196" class="difflineminus">-  /*</span>
<a href="#l11.197"></a><span id="l11.197" class="difflineminus">-   * Helper used to setup event handlers on the XBL element</span>
<a href="#l11.198"></a><span id="l11.198" class="difflineminus">-   */</span>
<a href="#l11.199"></a><span id="l11.199" class="difflineminus">-  _watch: function bt_watch(aType) {</span>
<a href="#l11.200"></a><span id="l11.200" class="difflineminus">-    this._browser.addEventListener(aType, this, true);</span>
<a href="#l11.201"></a><span id="l11.201" class="difflineminus">-  },</span>
<a href="#l11.202"></a><span id="l11.202" class="difflineminus">-</span>
<a href="#l11.203"></a><span id="l11.203" class="difflineminus">-  handleEvent: function bt_handleEvent(aEvent) {</span>
<a href="#l11.204"></a><span id="l11.204" class="difflineminus">-    if (aEvent.type == &quot;load&quot;) {</span>
<a href="#l11.205"></a><span id="l11.205" class="difflineminus">-      if (!(aEvent.originalTarget instanceof Components.interfaces.nsIDOMDocument))</span>
<a href="#l11.206"></a><span id="l11.206" class="difflineminus">-        return;</span>
<a href="#l11.207"></a><span id="l11.207" class="difflineminus">-</span>
<a href="#l11.208"></a><span id="l11.208" class="difflineminus">-      if (aEvent.originalTarget.defaultView instanceof Components.interfaces.nsIDOMWindow &amp;&amp;</span>
<a href="#l11.209"></a><span id="l11.209" class="difflineminus">-          aEvent.originalTarget.defaultView.frameElement)</span>
<a href="#l11.210"></a><span id="l11.210" class="difflineminus">-        return;</span>
<a href="#l11.211"></a><span id="l11.211" class="difflineminus">-    }</span>
<a href="#l11.212"></a><span id="l11.212" class="difflineminus">-</span>
<a href="#l11.213"></a><span id="l11.213" class="difflineminus">-    this._events.dispatch(aEvent.type, this);</span>
<a href="#l11.214"></a><span id="l11.214" class="difflineminus">-  },</span>
<a href="#l11.215"></a><span id="l11.215" class="difflineminus">-</span>
<a href="#l11.216"></a><span id="l11.216" class="difflineminus">-  load: function bt_load(aURI) {</span>
<a href="#l11.217"></a><span id="l11.217" class="difflineminus">-    this._browser.loadURI(aURI.spec, null, null);</span>
<a href="#l11.218"></a><span id="l11.218" class="difflineminus">-  },</span>
<a href="#l11.219"></a><span id="l11.219" class="difflineminus">-</span>
<a href="#l11.220"></a><span id="l11.220" class="difflineminus">-  focus: function bt_focus() {</span>
<a href="#l11.221"></a><span id="l11.221" class="difflineminus">-    this._tabbrowser.selectedTab = this._tab;</span>
<a href="#l11.222"></a><span id="l11.222" class="difflineminus">-    this._tabbrowser.focus();</span>
<a href="#l11.223"></a><span id="l11.223" class="difflineminus">-  },</span>
<a href="#l11.224"></a><span id="l11.224" class="difflineminus">-</span>
<a href="#l11.225"></a><span id="l11.225" class="difflineminus">-  close: function bt_close() {</span>
<a href="#l11.226"></a><span id="l11.226" class="difflineminus">-    this._tabbrowser.removeTab(this._tab);</span>
<a href="#l11.227"></a><span id="l11.227" class="difflineminus">-  },</span>
<a href="#l11.228"></a><span id="l11.228" class="difflineminus">-</span>
<a href="#l11.229"></a><span id="l11.229" class="difflineminus">-  moveBefore: function bt_movebefore(aBefore) {</span>
<a href="#l11.230"></a><span id="l11.230" class="difflineminus">-    this._tabbrowser.moveTabTo(this._tab, aBefore.index);</span>
<a href="#l11.231"></a><span id="l11.231" class="difflineminus">-  },</span>
<a href="#l11.232"></a><span id="l11.232" class="difflineminus">-</span>
<a href="#l11.233"></a><span id="l11.233" class="difflineminus">-  moveToEnd: function bt_moveend() {</span>
<a href="#l11.234"></a><span id="l11.234" class="difflineminus">-    this._tabbrowser.moveTabTo(this._tab, this._tabbrowser.browsers.length);</span>
<a href="#l11.235"></a><span id="l11.235" class="difflineminus">-  },</span>
<a href="#l11.236"></a><span id="l11.236" class="difflineminus">-</span>
<a href="#l11.237"></a><span id="l11.237" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Components.interfaces.smileIBrowserTab])</span>
<a href="#l11.238"></a><span id="l11.238" class="difflineminus">-};</span>
<a href="#l11.239"></a><span id="l11.239" class="difflineminus">-</span>
<a href="#l11.240"></a><span id="l11.240" class="difflineminus">-</span>
<a href="#l11.241"></a><span id="l11.241" class="difflineminus">-//=================================================</span>
<a href="#l11.242"></a><span id="l11.242" class="difflineminus">-// Annotations implementation</span>
<a href="#l11.243"></a><span id="l11.243" class="difflineminus">-function Annotations(aId) {</span>
<a href="#l11.244"></a><span id="l11.244" class="difflineminus">-  this._id = aId;</span>
<a href="#l11.245"></a><span id="l11.245" class="difflineminus">-}</span>
<a href="#l11.246"></a><span id="l11.246" class="difflineminus">-</span>
<a href="#l11.247"></a><span id="l11.247" class="difflineminus">-Annotations.prototype = {</span>
<a href="#l11.248"></a><span id="l11.248" class="difflineminus">-  get names() {</span>
<a href="#l11.249"></a><span id="l11.249" class="difflineminus">-    return Utilities.annotations.getItemAnnotationNames(this._id);</span>
<a href="#l11.250"></a><span id="l11.250" class="difflineminus">-  },</span>
<a href="#l11.251"></a><span id="l11.251" class="difflineminus">-</span>
<a href="#l11.252"></a><span id="l11.252" class="difflineminus">-  has: function ann_has(aName) {</span>
<a href="#l11.253"></a><span id="l11.253" class="difflineminus">-    return Utilities.annotations.itemHasAnnotation(this._id, aName);</span>
<a href="#l11.254"></a><span id="l11.254" class="difflineminus">-  },</span>
<a href="#l11.255"></a><span id="l11.255" class="difflineminus">-</span>
<a href="#l11.256"></a><span id="l11.256" class="difflineminus">-  get: function ann_get(aName) {</span>
<a href="#l11.257"></a><span id="l11.257" class="difflineminus">-    if (this.has(aName))</span>
<a href="#l11.258"></a><span id="l11.258" class="difflineminus">-      return Utilities.annotations.getItemAnnotation(this._id, aName);</span>
<a href="#l11.259"></a><span id="l11.259" class="difflineminus">-</span>
<a href="#l11.260"></a><span id="l11.260" class="difflineminus">-    return null;</span>
<a href="#l11.261"></a><span id="l11.261" class="difflineminus">-  },</span>
<a href="#l11.262"></a><span id="l11.262" class="difflineminus">-</span>
<a href="#l11.263"></a><span id="l11.263" class="difflineminus">-  set: function ann_set(aName, aValue, aExpiration) {</span>
<a href="#l11.264"></a><span id="l11.264" class="difflineminus">-    Utilities.annotations.setItemAnnotation(this._id, aName, aValue, 0, aExpiration);</span>
<a href="#l11.265"></a><span id="l11.265" class="difflineminus">-  },</span>
<a href="#l11.266"></a><span id="l11.266" class="difflineminus">-</span>
<a href="#l11.267"></a><span id="l11.267" class="difflineminus">-  remove: function ann_remove(aName) {</span>
<a href="#l11.268"></a><span id="l11.268" class="difflineminus">-    if (aName)</span>
<a href="#l11.269"></a><span id="l11.269" class="difflineminus">-      Utilities.annotations.removeItemAnnotation(this._id, aName);</span>
<a href="#l11.270"></a><span id="l11.270" class="difflineminus">-  },</span>
<a href="#l11.271"></a><span id="l11.271" class="difflineminus">-</span>
<a href="#l11.272"></a><span id="l11.272" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Components.interfaces.smileIAnnotations])</span>
<a href="#l11.273"></a><span id="l11.273" class="difflineminus">-};</span>
<a href="#l11.274"></a><span id="l11.274" class="difflineminus">-</span>
<a href="#l11.275"></a><span id="l11.275" class="difflineminus">-</span>
<a href="#l11.276"></a><span id="l11.276" class="difflineminus">-//=================================================</span>
<a href="#l11.277"></a><span id="l11.277" class="difflineminus">-// BookmarksObserver implementation (internal class)</span>
<a href="#l11.278"></a><span id="l11.278" class="difflineminus">-//</span>
<a href="#l11.279"></a><span id="l11.279" class="difflineminus">-// BookmarksObserver is a global singleton which watches the browser's</span>
<a href="#l11.280"></a><span id="l11.280" class="difflineminus">-// bookmarks and sends you events when things change.</span>
<a href="#l11.281"></a><span id="l11.281" class="difflineminus">-//</span>
<a href="#l11.282"></a><span id="l11.282" class="difflineminus">-// You can register three different kinds of event listeners on</span>
<a href="#l11.283"></a><span id="l11.283" class="difflineminus">-// BookmarksObserver, using addListener, addFolderListener, and</span>
<a href="#l11.284"></a><span id="l11.284" class="difflineminus">-// addRootlistener.</span>
<a href="#l11.285"></a><span id="l11.285" class="difflineminus">-//</span>
<a href="#l11.286"></a><span id="l11.286" class="difflineminus">-//  - addListener(aId, aEvent, aListener) lets you listen to a specific</span>
<a href="#l11.287"></a><span id="l11.287" class="difflineminus">-//    bookmark.  You can listen to the &quot;change&quot;, &quot;move&quot;, and &quot;remove&quot; events.</span>
<a href="#l11.288"></a><span id="l11.288" class="difflineminus">-//</span>
<a href="#l11.289"></a><span id="l11.289" class="difflineminus">-//  - addFolderListener(aId, aEvent, aListener) lets you listen to a specific</span>
<a href="#l11.290"></a><span id="l11.290" class="difflineminus">-//    bookmark folder.  You can listen to &quot;addchild&quot; and &quot;removechild&quot;.</span>
<a href="#l11.291"></a><span id="l11.291" class="difflineminus">-//</span>
<a href="#l11.292"></a><span id="l11.292" class="difflineminus">-//  - addRootListener(aEvent, aListener) lets you listen to the root bookmark</span>
<a href="#l11.293"></a><span id="l11.293" class="difflineminus">-//    node.  This lets you hear &quot;add&quot;, &quot;remove&quot;, and &quot;change&quot; events on all</span>
<a href="#l11.294"></a><span id="l11.294" class="difflineminus">-//    bookmarks.</span>
<a href="#l11.295"></a><span id="l11.295" class="difflineminus">-//</span>
<a href="#l11.296"></a><span id="l11.296" class="difflineminus">-</span>
<a href="#l11.297"></a><span id="l11.297" class="difflineminus">-function BookmarksObserver() {</span>
<a href="#l11.298"></a><span id="l11.298" class="difflineminus">-  this._eventsDict = {};</span>
<a href="#l11.299"></a><span id="l11.299" class="difflineminus">-  this._folderEventsDict = {};</span>
<a href="#l11.300"></a><span id="l11.300" class="difflineminus">-  this._rootEvents = new Events();</span>
<a href="#l11.301"></a><span id="l11.301" class="difflineminus">-  Utilities.bookmarks.addObserver(this, /* ownsWeak = */ true);</span>
<a href="#l11.302"></a><span id="l11.302" class="difflineminus">-}</span>
<a href="#l11.303"></a><span id="l11.303" class="difflineminus">-</span>
<a href="#l11.304"></a><span id="l11.304" class="difflineminus">-BookmarksObserver.prototype = {</span>
<a href="#l11.305"></a><span id="l11.305" class="difflineminus">-  onBeginUpdateBatch: function () {},</span>
<a href="#l11.306"></a><span id="l11.306" class="difflineminus">-  onEndUpdateBatch: function () {},</span>
<a href="#l11.307"></a><span id="l11.307" class="difflineminus">-  onItemVisited: function () {},</span>
<a href="#l11.308"></a><span id="l11.308" class="difflineminus">-</span>
<a href="#l11.309"></a><span id="l11.309" class="difflineminus">-  onItemAdded: function bo_onItemAdded(aId, aFolder, aIndex, aItemType, aURI) {</span>
<a href="#l11.310"></a><span id="l11.310" class="difflineminus">-    this._rootEvents.dispatch(&quot;add&quot;, aId);</span>
<a href="#l11.311"></a><span id="l11.311" class="difflineminus">-    this._dispatchToEvents(&quot;addchild&quot;, aId, this._folderEventsDict[aFolder]);</span>
<a href="#l11.312"></a><span id="l11.312" class="difflineminus">-  },</span>
<a href="#l11.313"></a><span id="l11.313" class="difflineminus">-</span>
<a href="#l11.314"></a><span id="l11.314" class="difflineminus">-  onItemRemoved: function bo_onItemRemoved(aId, aFolder, aIndex) {</span>
<a href="#l11.315"></a><span id="l11.315" class="difflineminus">-    this._rootEvents.dispatch(&quot;remove&quot;, aId);</span>
<a href="#l11.316"></a><span id="l11.316" class="difflineminus">-    this._dispatchToEvents(&quot;remove&quot;, aId, this._eventsDict[aId]);</span>
<a href="#l11.317"></a><span id="l11.317" class="difflineminus">-    this._dispatchToEvents(&quot;removechild&quot;, aId, this._folderEventsDict[aFolder]);</span>
<a href="#l11.318"></a><span id="l11.318" class="difflineminus">-  },</span>
<a href="#l11.319"></a><span id="l11.319" class="difflineminus">-</span>
<a href="#l11.320"></a><span id="l11.320" class="difflineminus">-  onItemChanged: function bo_onItemChanged(aId, aProperty, aIsAnnotationProperty, aValue) {</span>
<a href="#l11.321"></a><span id="l11.321" class="difflineminus">-    this._rootEvents.dispatch(&quot;change&quot;, aProperty);</span>
<a href="#l11.322"></a><span id="l11.322" class="difflineminus">-    this._dispatchToEvents(&quot;change&quot;, aProperty, this._eventsDict[aId]);</span>
<a href="#l11.323"></a><span id="l11.323" class="difflineminus">-  },</span>
<a href="#l11.324"></a><span id="l11.324" class="difflineminus">-</span>
<a href="#l11.325"></a><span id="l11.325" class="difflineminus">-  onItemMoved: function bo_onItemMoved(aId, aOldParent, aOldIndex, aNewParent, aNewIndex) {</span>
<a href="#l11.326"></a><span id="l11.326" class="difflineminus">-    this._dispatchToEvents(&quot;move&quot;, aId, this._eventsDict[aId]);</span>
<a href="#l11.327"></a><span id="l11.327" class="difflineminus">-  },</span>
<a href="#l11.328"></a><span id="l11.328" class="difflineminus">-</span>
<a href="#l11.329"></a><span id="l11.329" class="difflineminus">-  _dispatchToEvents: function bo_dispatchToEvents(aEvent, aData, aEvents) {</span>
<a href="#l11.330"></a><span id="l11.330" class="difflineminus">-    if (aEvents) {</span>
<a href="#l11.331"></a><span id="l11.331" class="difflineminus">-      aEvents.dispatch(aEvent, aData);</span>
<a href="#l11.332"></a><span id="l11.332" class="difflineminus">-    }</span>
<a href="#l11.333"></a><span id="l11.333" class="difflineminus">-  },</span>
<a href="#l11.334"></a><span id="l11.334" class="difflineminus">-</span>
<a href="#l11.335"></a><span id="l11.335" class="difflineminus">-  _addListenerToDict: function bo_addListenerToDict(aId, aEvent, aListener, aDict) {</span>
<a href="#l11.336"></a><span id="l11.336" class="difflineminus">-    var events = aDict[aId];</span>
<a href="#l11.337"></a><span id="l11.337" class="difflineminus">-    if (!events) {</span>
<a href="#l11.338"></a><span id="l11.338" class="difflineminus">-      events = new Events();</span>
<a href="#l11.339"></a><span id="l11.339" class="difflineminus">-      aDict[aId] = events;</span>
<a href="#l11.340"></a><span id="l11.340" class="difflineminus">-    }</span>
<a href="#l11.341"></a><span id="l11.341" class="difflineminus">-    events.addListener(aEvent, aListener);</span>
<a href="#l11.342"></a><span id="l11.342" class="difflineminus">-  },</span>
<a href="#l11.343"></a><span id="l11.343" class="difflineminus">-</span>
<a href="#l11.344"></a><span id="l11.344" class="difflineminus">-  _removeListenerFromDict: function bo_removeListenerFromDict(aId, aEvent, aListener, aDict) {</span>
<a href="#l11.345"></a><span id="l11.345" class="difflineminus">-    var events = aDict[aId];</span>
<a href="#l11.346"></a><span id="l11.346" class="difflineminus">-    if (!events) {</span>
<a href="#l11.347"></a><span id="l11.347" class="difflineminus">-      return;</span>
<a href="#l11.348"></a><span id="l11.348" class="difflineminus">-    }</span>
<a href="#l11.349"></a><span id="l11.349" class="difflineminus">-</span>
<a href="#l11.350"></a><span id="l11.350" class="difflineminus">-    events.removeListener(aEvent, aListener);</span>
<a href="#l11.351"></a><span id="l11.351" class="difflineminus">-    if (events._listeners.length == 0) {</span>
<a href="#l11.352"></a><span id="l11.352" class="difflineminus">-      delete aDict[aId];</span>
<a href="#l11.353"></a><span id="l11.353" class="difflineminus">-    }</span>
<a href="#l11.354"></a><span id="l11.354" class="difflineminus">-  },</span>
<a href="#l11.355"></a><span id="l11.355" class="difflineminus">-</span>
<a href="#l11.356"></a><span id="l11.356" class="difflineminus">-  addListener: function bo_addListener(aId, aEvent, aListener) {</span>
<a href="#l11.357"></a><span id="l11.357" class="difflineminus">-    this._addListenerToDict(aId, aEvent, aListener, this._eventsDict);</span>
<a href="#l11.358"></a><span id="l11.358" class="difflineminus">-  },</span>
<a href="#l11.359"></a><span id="l11.359" class="difflineminus">-</span>
<a href="#l11.360"></a><span id="l11.360" class="difflineminus">-  removeListener: function bo_removeListener(aId, aEvent, aListener) {</span>
<a href="#l11.361"></a><span id="l11.361" class="difflineminus">-    this._removeListenerFromDict(aId, aEvent, aListener, this._eventsDict);</span>
<a href="#l11.362"></a><span id="l11.362" class="difflineminus">-  },</span>
<a href="#l11.363"></a><span id="l11.363" class="difflineminus">-</span>
<a href="#l11.364"></a><span id="l11.364" class="difflineminus">-  addFolderListener: function bo_addFolderListener(aId, aEvent, aListener) {</span>
<a href="#l11.365"></a><span id="l11.365" class="difflineminus">-    this._addListenerToDict(aId, aEvent, aListener, this._folderEventsDict);</span>
<a href="#l11.366"></a><span id="l11.366" class="difflineminus">-  },</span>
<a href="#l11.367"></a><span id="l11.367" class="difflineminus">-</span>
<a href="#l11.368"></a><span id="l11.368" class="difflineminus">-  removeFolderListener: function bo_removeFolderListener(aId, aEvent, aListener) {</span>
<a href="#l11.369"></a><span id="l11.369" class="difflineminus">-    this._removeListenerFromDict(aId, aEvent, aListener, this._folderEventsDict);</span>
<a href="#l11.370"></a><span id="l11.370" class="difflineminus">-  },</span>
<a href="#l11.371"></a><span id="l11.371" class="difflineminus">-</span>
<a href="#l11.372"></a><span id="l11.372" class="difflineminus">-  addRootListener: function bo_addRootListener(aEvent, aListener) {</span>
<a href="#l11.373"></a><span id="l11.373" class="difflineminus">-    this._rootEvents.addListener(aEvent, aListener);</span>
<a href="#l11.374"></a><span id="l11.374" class="difflineminus">-  },</span>
<a href="#l11.375"></a><span id="l11.375" class="difflineminus">-</span>
<a href="#l11.376"></a><span id="l11.376" class="difflineminus">-  removeRootListener: function bo_removeRootListener(aEvent, aListener) {</span>
<a href="#l11.377"></a><span id="l11.377" class="difflineminus">-    this._rootEvents.removeListener(aEvent, aListener);</span>
<a href="#l11.378"></a><span id="l11.378" class="difflineminus">-  },</span>
<a href="#l11.379"></a><span id="l11.379" class="difflineminus">-</span>
<a href="#l11.380"></a><span id="l11.380" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.nsINavBookmarksObserver,</span>
<a href="#l11.381"></a><span id="l11.381" class="difflineminus">-                                         Ci.nsISupportsWeakReference])</span>
<a href="#l11.382"></a><span id="l11.382" class="difflineminus">-};</span>
<a href="#l11.383"></a><span id="l11.383" class="difflineminus">-</span>
<a href="#l11.384"></a><span id="l11.384" class="difflineminus">-//=================================================</span>
<a href="#l11.385"></a><span id="l11.385" class="difflineminus">-// Bookmark implementation</span>
<a href="#l11.386"></a><span id="l11.386" class="difflineminus">-//</span>
<a href="#l11.387"></a><span id="l11.387" class="difflineminus">-// Bookmark event listeners are stored in BookmarksObserver, not in the</span>
<a href="#l11.388"></a><span id="l11.388" class="difflineminus">-// Bookmark objects themselves.  Thus, you don't have to hold on to a Bookmark</span>
<a href="#l11.389"></a><span id="l11.389" class="difflineminus">-// object in order for your event listener to stay valid, and Bookmark objects</span>
<a href="#l11.390"></a><span id="l11.390" class="difflineminus">-// not kept alive by the extension can be GC'ed.</span>
<a href="#l11.391"></a><span id="l11.391" class="difflineminus">-//</span>
<a href="#l11.392"></a><span id="l11.392" class="difflineminus">-// A consequence of this is that if you have two different Bookmark objects x</span>
<a href="#l11.393"></a><span id="l11.393" class="difflineminus">-// and y for the same bookmark (i.e., x != y but x.id == y.id), and you do</span>
<a href="#l11.394"></a><span id="l11.394" class="difflineminus">-//</span>
<a href="#l11.395"></a><span id="l11.395" class="difflineminus">-//   x.addListener(&quot;foo&quot;, fun);</span>
<a href="#l11.396"></a><span id="l11.396" class="difflineminus">-//   y.removeListener(&quot;foo&quot;, fun);</span>
<a href="#l11.397"></a><span id="l11.397" class="difflineminus">-//</span>
<a href="#l11.398"></a><span id="l11.398" class="difflineminus">-// the second line will in fact remove the listener added in the first line.</span>
<a href="#l11.399"></a><span id="l11.399" class="difflineminus">-//</span>
<a href="#l11.400"></a><span id="l11.400" class="difflineminus">-</span>
<a href="#l11.401"></a><span id="l11.401" class="difflineminus">-function Bookmark(aId, aParent, aType) {</span>
<a href="#l11.402"></a><span id="l11.402" class="difflineminus">-  this._id = aId;</span>
<a href="#l11.403"></a><span id="l11.403" class="difflineminus">-  this._parent = aParent;</span>
<a href="#l11.404"></a><span id="l11.404" class="difflineminus">-  this._type = aType || &quot;bookmark&quot;;</span>
<a href="#l11.405"></a><span id="l11.405" class="difflineminus">-  this._annotations = new Annotations(this._id);</span>
<a href="#l11.406"></a><span id="l11.406" class="difflineminus">-</span>
<a href="#l11.407"></a><span id="l11.407" class="difflineminus">-  // Our _events object forwards to bookmarksObserver.</span>
<a href="#l11.408"></a><span id="l11.408" class="difflineminus">-  var self = this;</span>
<a href="#l11.409"></a><span id="l11.409" class="difflineminus">-  this._events = {</span>
<a href="#l11.410"></a><span id="l11.410" class="difflineminus">-    addListener: function bookmarkevents_al(aEvent, aListener) {</span>
<a href="#l11.411"></a><span id="l11.411" class="difflineminus">-      Utilities.bookmarksObserver.addListener(self._id, aEvent, aListener);</span>
<a href="#l11.412"></a><span id="l11.412" class="difflineminus">-    },</span>
<a href="#l11.413"></a><span id="l11.413" class="difflineminus">-</span>
<a href="#l11.414"></a><span id="l11.414" class="difflineminus">-    removeListener: function bookmarkevents_rl(aEvent, aListener) {</span>
<a href="#l11.415"></a><span id="l11.415" class="difflineminus">-      Utilities.bookmarksObserver.removeListener(self._id, aEvent, aListener);</span>
<a href="#l11.416"></a><span id="l11.416" class="difflineminus">-    },</span>
<a href="#l11.417"></a><span id="l11.417" class="difflineminus">-</span>
<a href="#l11.418"></a><span id="l11.418" class="difflineminus">-    QueryInterface: XPCOMUtils.generateQI([Ci.extIEvents])</span>
<a href="#l11.419"></a><span id="l11.419" class="difflineminus">-  };</span>
<a href="#l11.420"></a><span id="l11.420" class="difflineminus">-</span>
<a href="#l11.421"></a><span id="l11.421" class="difflineminus">-  // For our onItemMoved listener, which updates this._parent.</span>
<a href="#l11.422"></a><span id="l11.422" class="difflineminus">-  Utilities.bookmarks.addObserver(this, /* ownsWeak = */ true);</span>
<a href="#l11.423"></a><span id="l11.423" class="difflineminus">-}</span>
<a href="#l11.424"></a><span id="l11.424" class="difflineminus">-</span>
<a href="#l11.425"></a><span id="l11.425" class="difflineminus">-Bookmark.prototype = {</span>
<a href="#l11.426"></a><span id="l11.426" class="difflineminus">-  get id() {</span>
<a href="#l11.427"></a><span id="l11.427" class="difflineminus">-    return this._id;</span>
<a href="#l11.428"></a><span id="l11.428" class="difflineminus">-  },</span>
<a href="#l11.429"></a><span id="l11.429" class="difflineminus">-</span>
<a href="#l11.430"></a><span id="l11.430" class="difflineminus">-  get title() {</span>
<a href="#l11.431"></a><span id="l11.431" class="difflineminus">-    return Utilities.bookmarks.getItemTitle(this._id);</span>
<a href="#l11.432"></a><span id="l11.432" class="difflineminus">-  },</span>
<a href="#l11.433"></a><span id="l11.433" class="difflineminus">-</span>
<a href="#l11.434"></a><span id="l11.434" class="difflineminus">-  set title(aTitle) {</span>
<a href="#l11.435"></a><span id="l11.435" class="difflineminus">-    Utilities.bookmarks.setItemTitle(this._id, aTitle);</span>
<a href="#l11.436"></a><span id="l11.436" class="difflineminus">-  },</span>
<a href="#l11.437"></a><span id="l11.437" class="difflineminus">-</span>
<a href="#l11.438"></a><span id="l11.438" class="difflineminus">-  get uri() {</span>
<a href="#l11.439"></a><span id="l11.439" class="difflineminus">-    return Utilities.bookmarks.getBookmarkURI(this._id);</span>
<a href="#l11.440"></a><span id="l11.440" class="difflineminus">-  },</span>
<a href="#l11.441"></a><span id="l11.441" class="difflineminus">-</span>
<a href="#l11.442"></a><span id="l11.442" class="difflineminus">-  set uri(aURI) {</span>
<a href="#l11.443"></a><span id="l11.443" class="difflineminus">-    return Utilities.bookmarks.changeBookmarkURI(this._id, aURI);</span>
<a href="#l11.444"></a><span id="l11.444" class="difflineminus">-  },</span>
<a href="#l11.445"></a><span id="l11.445" class="difflineminus">-</span>
<a href="#l11.446"></a><span id="l11.446" class="difflineminus">-  get description() {</span>
<a href="#l11.447"></a><span id="l11.447" class="difflineminus">-    return this._annotations.get(&quot;bookmarkProperties/description&quot;);</span>
<a href="#l11.448"></a><span id="l11.448" class="difflineminus">-  },</span>
<a href="#l11.449"></a><span id="l11.449" class="difflineminus">-</span>
<a href="#l11.450"></a><span id="l11.450" class="difflineminus">-  set description(aDesc) {</span>
<a href="#l11.451"></a><span id="l11.451" class="difflineminus">-    this._annotations.set(&quot;bookmarkProperties/description&quot;, aDesc, Components.interfaces.nsIAnnotationService.EXPIRE_NEVER);</span>
<a href="#l11.452"></a><span id="l11.452" class="difflineminus">-  },</span>
<a href="#l11.453"></a><span id="l11.453" class="difflineminus">-</span>
<a href="#l11.454"></a><span id="l11.454" class="difflineminus">-  get keyword() {</span>
<a href="#l11.455"></a><span id="l11.455" class="difflineminus">-    return Utilities.bookmarks.getKeywordForBookmark(this._id);</span>
<a href="#l11.456"></a><span id="l11.456" class="difflineminus">-  },</span>
<a href="#l11.457"></a><span id="l11.457" class="difflineminus">-</span>
<a href="#l11.458"></a><span id="l11.458" class="difflineminus">-  set keyword(aKeyword) {</span>
<a href="#l11.459"></a><span id="l11.459" class="difflineminus">-    Utilities.bookmarks.setKeywordForBookmark(this._id, aKeyword);</span>
<a href="#l11.460"></a><span id="l11.460" class="difflineminus">-  },</span>
<a href="#l11.461"></a><span id="l11.461" class="difflineminus">-</span>
<a href="#l11.462"></a><span id="l11.462" class="difflineminus">-  get type() {</span>
<a href="#l11.463"></a><span id="l11.463" class="difflineminus">-    return this._type;</span>
<a href="#l11.464"></a><span id="l11.464" class="difflineminus">-  },</span>
<a href="#l11.465"></a><span id="l11.465" class="difflineminus">-</span>
<a href="#l11.466"></a><span id="l11.466" class="difflineminus">-  get parent() {</span>
<a href="#l11.467"></a><span id="l11.467" class="difflineminus">-    return this._parent;</span>
<a href="#l11.468"></a><span id="l11.468" class="difflineminus">-  },</span>
<a href="#l11.469"></a><span id="l11.469" class="difflineminus">-</span>
<a href="#l11.470"></a><span id="l11.470" class="difflineminus">-  set parent(aFolder) {</span>
<a href="#l11.471"></a><span id="l11.471" class="difflineminus">-    Utilities.bookmarks.moveItem(this._id, aFolder.id, Utilities.bookmarks.DEFAULT_INDEX);</span>
<a href="#l11.472"></a><span id="l11.472" class="difflineminus">-    // this._parent is updated in onItemMoved</span>
<a href="#l11.473"></a><span id="l11.473" class="difflineminus">-  },</span>
<a href="#l11.474"></a><span id="l11.474" class="difflineminus">-</span>
<a href="#l11.475"></a><span id="l11.475" class="difflineminus">-  get annotations() {</span>
<a href="#l11.476"></a><span id="l11.476" class="difflineminus">-    return this._annotations;</span>
<a href="#l11.477"></a><span id="l11.477" class="difflineminus">-  },</span>
<a href="#l11.478"></a><span id="l11.478" class="difflineminus">-</span>
<a href="#l11.479"></a><span id="l11.479" class="difflineminus">-  get events() {</span>
<a href="#l11.480"></a><span id="l11.480" class="difflineminus">-    return this._events;</span>
<a href="#l11.481"></a><span id="l11.481" class="difflineminus">-  },</span>
<a href="#l11.482"></a><span id="l11.482" class="difflineminus">-</span>
<a href="#l11.483"></a><span id="l11.483" class="difflineminus">-  remove: function bm_remove() {</span>
<a href="#l11.484"></a><span id="l11.484" class="difflineminus">-    Utilities.bookmarks.removeItem(this._id);</span>
<a href="#l11.485"></a><span id="l11.485" class="difflineminus">-  },</span>
<a href="#l11.486"></a><span id="l11.486" class="difflineminus">-</span>
<a href="#l11.487"></a><span id="l11.487" class="difflineminus">-  onBeginUpdateBatch: function () {},</span>
<a href="#l11.488"></a><span id="l11.488" class="difflineminus">-  onEndUpdateBatch: function () {},</span>
<a href="#l11.489"></a><span id="l11.489" class="difflineminus">-  onItemAdded: function () {},</span>
<a href="#l11.490"></a><span id="l11.490" class="difflineminus">-  onItemVisited: function () {},</span>
<a href="#l11.491"></a><span id="l11.491" class="difflineminus">-  onItemRemoved: function () {},</span>
<a href="#l11.492"></a><span id="l11.492" class="difflineminus">-  onItemChanged: function () {},</span>
<a href="#l11.493"></a><span id="l11.493" class="difflineminus">-</span>
<a href="#l11.494"></a><span id="l11.494" class="difflineminus">-  onItemMoved: function bm_onItemMoved(aId, aOldParent, aOldIndex, aNewParent, aNewIndex) {</span>
<a href="#l11.495"></a><span id="l11.495" class="difflineminus">-    if (aId == this._id) {</span>
<a href="#l11.496"></a><span id="l11.496" class="difflineminus">-      this._parent = new BookmarkFolder(aNewParent, Utilities.bookmarks.getFolderIdForItem(aNewParent));</span>
<a href="#l11.497"></a><span id="l11.497" class="difflineminus">-    }</span>
<a href="#l11.498"></a><span id="l11.498" class="difflineminus">-  },</span>
<a href="#l11.499"></a><span id="l11.499" class="difflineminus">-</span>
<a href="#l11.500"></a><span id="l11.500" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.smileIBookmark,</span>
<a href="#l11.501"></a><span id="l11.501" class="difflineminus">-                                         Ci.nsINavBookmarksObserver,</span>
<a href="#l11.502"></a><span id="l11.502" class="difflineminus">-                                         Ci.nsISupportsWeakReference])</span>
<a href="#l11.503"></a><span id="l11.503" class="difflineminus">-};</span>
<a href="#l11.504"></a><span id="l11.504" class="difflineminus">-</span>
<a href="#l11.505"></a><span id="l11.505" class="difflineminus">-</span>
<a href="#l11.506"></a><span id="l11.506" class="difflineminus">-//=================================================</span>
<a href="#l11.507"></a><span id="l11.507" class="difflineminus">-// BookmarkFolder implementation</span>
<a href="#l11.508"></a><span id="l11.508" class="difflineminus">-//</span>
<a href="#l11.509"></a><span id="l11.509" class="difflineminus">-// As with Bookmark, events on BookmarkFolder are handled by the</span>
<a href="#l11.510"></a><span id="l11.510" class="difflineminus">-// BookmarksObserver singleton.</span>
<a href="#l11.511"></a><span id="l11.511" class="difflineminus">-//</span>
<a href="#l11.512"></a><span id="l11.512" class="difflineminus">-</span>
<a href="#l11.513"></a><span id="l11.513" class="difflineminus">-function BookmarkFolder(aId, aParent) {</span>
<a href="#l11.514"></a><span id="l11.514" class="difflineminus">-  this._id = aId;</span>
<a href="#l11.515"></a><span id="l11.515" class="difflineminus">-  this._parent = aParent;</span>
<a href="#l11.516"></a><span id="l11.516" class="difflineminus">-  this._annotations = new Annotations(this._id);</span>
<a href="#l11.517"></a><span id="l11.517" class="difflineminus">-</span>
<a href="#l11.518"></a><span id="l11.518" class="difflineminus">-  // Our event listeners are handled by the BookmarksObserver singleton.  This</span>
<a href="#l11.519"></a><span id="l11.519" class="difflineminus">-  // is a bit complicated because there are three different kinds of events we</span>
<a href="#l11.520"></a><span id="l11.520" class="difflineminus">-  // might want to listen to here:</span>
<a href="#l11.521"></a><span id="l11.521" class="difflineminus">-  //</span>
<a href="#l11.522"></a><span id="l11.522" class="difflineminus">-  //  - If this._parent is null, we're the root bookmark folder, and all our</span>
<a href="#l11.523"></a><span id="l11.523" class="difflineminus">-  //    listeners should be root listeners.</span>
<a href="#l11.524"></a><span id="l11.524" class="difflineminus">-  //</span>
<a href="#l11.525"></a><span id="l11.525" class="difflineminus">-  //  - Otherwise, events ending with &quot;child&quot; (addchild, removechild) are</span>
<a href="#l11.526"></a><span id="l11.526" class="difflineminus">-  //    handled by a folder listener.</span>
<a href="#l11.527"></a><span id="l11.527" class="difflineminus">-  //</span>
<a href="#l11.528"></a><span id="l11.528" class="difflineminus">-  //  - Other events are handled by a vanilla bookmark listener.</span>
<a href="#l11.529"></a><span id="l11.529" class="difflineminus">-</span>
<a href="#l11.530"></a><span id="l11.530" class="difflineminus">-  var self = this;</span>
<a href="#l11.531"></a><span id="l11.531" class="difflineminus">-  this._events = {</span>
<a href="#l11.532"></a><span id="l11.532" class="difflineminus">-    addListener: function bmfevents_al(aEvent, aListener) {</span>
<a href="#l11.533"></a><span id="l11.533" class="difflineminus">-      if (self._parent) {</span>
<a href="#l11.534"></a><span id="l11.534" class="difflineminus">-        if (/child$/.test(aEvent)) {</span>
<a href="#l11.535"></a><span id="l11.535" class="difflineminus">-          Utilities.bookmarksObserver.addFolderListener(self._id, aEvent, aListener);</span>
<a href="#l11.536"></a><span id="l11.536" class="difflineminus">-        } else {</span>
<a href="#l11.537"></a><span id="l11.537" class="difflineminus">-          Utilities.bookmarksObserver.addListener(self._id, aEvent, aListener);</span>
<a href="#l11.538"></a><span id="l11.538" class="difflineminus">-        }</span>
<a href="#l11.539"></a><span id="l11.539" class="difflineminus">-      } else {</span>
<a href="#l11.540"></a><span id="l11.540" class="difflineminus">-        Utilities.bookmarksObserver.addRootListener(aEvent, aListener);</span>
<a href="#l11.541"></a><span id="l11.541" class="difflineminus">-      }</span>
<a href="#l11.542"></a><span id="l11.542" class="difflineminus">-    },</span>
<a href="#l11.543"></a><span id="l11.543" class="difflineminus">-</span>
<a href="#l11.544"></a><span id="l11.544" class="difflineminus">-    removeListener: function bmfevents_rl(aEvent, aListener) {</span>
<a href="#l11.545"></a><span id="l11.545" class="difflineminus">-      if (self._parent) {</span>
<a href="#l11.546"></a><span id="l11.546" class="difflineminus">-        if (/child$/.test(aEvent)) {</span>
<a href="#l11.547"></a><span id="l11.547" class="difflineminus">-          Utilities.bookmarksObserver.removeFolderListener(self._id, aEvent, aListener);</span>
<a href="#l11.548"></a><span id="l11.548" class="difflineminus">-        } else {</span>
<a href="#l11.549"></a><span id="l11.549" class="difflineminus">-          Utilities.bookmarksObserver.removeListener(self._id, aEvent, aListener);</span>
<a href="#l11.550"></a><span id="l11.550" class="difflineminus">-        }</span>
<a href="#l11.551"></a><span id="l11.551" class="difflineminus">-      } else {</span>
<a href="#l11.552"></a><span id="l11.552" class="difflineminus">-        Utilities.bookmarksObserver.removeRootListener(aEvent, aListener);</span>
<a href="#l11.553"></a><span id="l11.553" class="difflineminus">-      }</span>
<a href="#l11.554"></a><span id="l11.554" class="difflineminus">-    },</span>
<a href="#l11.555"></a><span id="l11.555" class="difflineminus">-</span>
<a href="#l11.556"></a><span id="l11.556" class="difflineminus">-    QueryInterface: XPCOMUtils.generateQI([Ci.extIEvents])</span>
<a href="#l11.557"></a><span id="l11.557" class="difflineminus">-  };</span>
<a href="#l11.558"></a><span id="l11.558" class="difflineminus">-</span>
<a href="#l11.559"></a><span id="l11.559" class="difflineminus">-  // For our onItemMoved listener, which updates this._parent.</span>
<a href="#l11.560"></a><span id="l11.560" class="difflineminus">-  Utilities.bookmarks.addObserver(this, /* ownsWeak = */ true);</span>
<a href="#l11.561"></a><span id="l11.561" class="difflineminus">-}</span>
<a href="#l11.562"></a><span id="l11.562" class="difflineminus">-</span>
<a href="#l11.563"></a><span id="l11.563" class="difflineminus">-BookmarkFolder.prototype = {</span>
<a href="#l11.564"></a><span id="l11.564" class="difflineminus">-  get id() {</span>
<a href="#l11.565"></a><span id="l11.565" class="difflineminus">-    return this._id;</span>
<a href="#l11.566"></a><span id="l11.566" class="difflineminus">-  },</span>
<a href="#l11.567"></a><span id="l11.567" class="difflineminus">-</span>
<a href="#l11.568"></a><span id="l11.568" class="difflineminus">-  get title() {</span>
<a href="#l11.569"></a><span id="l11.569" class="difflineminus">-    return Utilities.bookmarks.getItemTitle(this._id);</span>
<a href="#l11.570"></a><span id="l11.570" class="difflineminus">-  },</span>
<a href="#l11.571"></a><span id="l11.571" class="difflineminus">-</span>
<a href="#l11.572"></a><span id="l11.572" class="difflineminus">-  set title(aTitle) {</span>
<a href="#l11.573"></a><span id="l11.573" class="difflineminus">-    Utilities.bookmarks.setItemTitle(this._id, aTitle);</span>
<a href="#l11.574"></a><span id="l11.574" class="difflineminus">-  },</span>
<a href="#l11.575"></a><span id="l11.575" class="difflineminus">-</span>
<a href="#l11.576"></a><span id="l11.576" class="difflineminus">-  get description() {</span>
<a href="#l11.577"></a><span id="l11.577" class="difflineminus">-    return this._annotations.get(&quot;bookmarkProperties/description&quot;);</span>
<a href="#l11.578"></a><span id="l11.578" class="difflineminus">-  },</span>
<a href="#l11.579"></a><span id="l11.579" class="difflineminus">-</span>
<a href="#l11.580"></a><span id="l11.580" class="difflineminus">-  set description(aDesc) {</span>
<a href="#l11.581"></a><span id="l11.581" class="difflineminus">-    this._annotations.set(&quot;bookmarkProperties/description&quot;, aDesc, Components.interfaces.nsIAnnotationService.EXPIRE_NEVER);</span>
<a href="#l11.582"></a><span id="l11.582" class="difflineminus">-  },</span>
<a href="#l11.583"></a><span id="l11.583" class="difflineminus">-</span>
<a href="#l11.584"></a><span id="l11.584" class="difflineminus">-  get type() {</span>
<a href="#l11.585"></a><span id="l11.585" class="difflineminus">-    return &quot;folder&quot;;</span>
<a href="#l11.586"></a><span id="l11.586" class="difflineminus">-  },</span>
<a href="#l11.587"></a><span id="l11.587" class="difflineminus">-</span>
<a href="#l11.588"></a><span id="l11.588" class="difflineminus">-  get parent() {</span>
<a href="#l11.589"></a><span id="l11.589" class="difflineminus">-    return this._parent;</span>
<a href="#l11.590"></a><span id="l11.590" class="difflineminus">-  },</span>
<a href="#l11.591"></a><span id="l11.591" class="difflineminus">-</span>
<a href="#l11.592"></a><span id="l11.592" class="difflineminus">-  set parent(aFolder) {</span>
<a href="#l11.593"></a><span id="l11.593" class="difflineminus">-    Utilities.bookmarks.moveItem(this._id, aFolder.id, Utilities.bookmarks.DEFAULT_INDEX);</span>
<a href="#l11.594"></a><span id="l11.594" class="difflineminus">-    // this._parent is updated in onItemMoved</span>
<a href="#l11.595"></a><span id="l11.595" class="difflineminus">-  },</span>
<a href="#l11.596"></a><span id="l11.596" class="difflineminus">-</span>
<a href="#l11.597"></a><span id="l11.597" class="difflineminus">-  get annotations() {</span>
<a href="#l11.598"></a><span id="l11.598" class="difflineminus">-    return this._annotations;</span>
<a href="#l11.599"></a><span id="l11.599" class="difflineminus">-  },</span>
<a href="#l11.600"></a><span id="l11.600" class="difflineminus">-</span>
<a href="#l11.601"></a><span id="l11.601" class="difflineminus">-  get events() {</span>
<a href="#l11.602"></a><span id="l11.602" class="difflineminus">-    return this._events;</span>
<a href="#l11.603"></a><span id="l11.603" class="difflineminus">-  },</span>
<a href="#l11.604"></a><span id="l11.604" class="difflineminus">-</span>
<a href="#l11.605"></a><span id="l11.605" class="difflineminus">-  get children() {</span>
<a href="#l11.606"></a><span id="l11.606" class="difflineminus">-    var items = [];</span>
<a href="#l11.607"></a><span id="l11.607" class="difflineminus">-</span>
<a href="#l11.608"></a><span id="l11.608" class="difflineminus">-    var options = Utilities.history.getNewQueryOptions();</span>
<a href="#l11.609"></a><span id="l11.609" class="difflineminus">-    var query = Utilities.history.getNewQuery();</span>
<a href="#l11.610"></a><span id="l11.610" class="difflineminus">-    query.setFolders([this._id], 1);</span>
<a href="#l11.611"></a><span id="l11.611" class="difflineminus">-    var result = Utilities.history.executeQuery(query, options);</span>
<a href="#l11.612"></a><span id="l11.612" class="difflineminus">-    var rootNode = result.root;</span>
<a href="#l11.613"></a><span id="l11.613" class="difflineminus">-    rootNode.containerOpen = true;</span>
<a href="#l11.614"></a><span id="l11.614" class="difflineminus">-    var cc = rootNode.childCount;</span>
<a href="#l11.615"></a><span id="l11.615" class="difflineminus">-    for (var i = 0; i &lt; cc; ++i) {</span>
<a href="#l11.616"></a><span id="l11.616" class="difflineminus">-      var node = rootNode.getChild(i);</span>
<a href="#l11.617"></a><span id="l11.617" class="difflineminus">-      if (node.type == node.RESULT_TYPE_FOLDER) {</span>
<a href="#l11.618"></a><span id="l11.618" class="difflineminus">-        var folder = new BookmarkFolder(node.itemId, this._id);</span>
<a href="#l11.619"></a><span id="l11.619" class="difflineminus">-        items.push(folder);</span>
<a href="#l11.620"></a><span id="l11.620" class="difflineminus">-      }</span>
<a href="#l11.621"></a><span id="l11.621" class="difflineminus">-      else if (node.type == node.RESULT_TYPE_SEPARATOR) {</span>
<a href="#l11.622"></a><span id="l11.622" class="difflineminus">-        var separator = new Bookmark(node.itemId, this._id, &quot;separator&quot;);</span>
<a href="#l11.623"></a><span id="l11.623" class="difflineminus">-        items.push(separator);</span>
<a href="#l11.624"></a><span id="l11.624" class="difflineminus">-      }</span>
<a href="#l11.625"></a><span id="l11.625" class="difflineminus">-      else {</span>
<a href="#l11.626"></a><span id="l11.626" class="difflineminus">-        var bookmark = new Bookmark(node.itemId, this._id, &quot;bookmark&quot;);</span>
<a href="#l11.627"></a><span id="l11.627" class="difflineminus">-        items.push(bookmark);</span>
<a href="#l11.628"></a><span id="l11.628" class="difflineminus">-      }</span>
<a href="#l11.629"></a><span id="l11.629" class="difflineminus">-    }</span>
<a href="#l11.630"></a><span id="l11.630" class="difflineminus">-    rootNode.containerOpen = false;</span>
<a href="#l11.631"></a><span id="l11.631" class="difflineminus">-</span>
<a href="#l11.632"></a><span id="l11.632" class="difflineminus">-    return items;</span>
<a href="#l11.633"></a><span id="l11.633" class="difflineminus">-  },</span>
<a href="#l11.634"></a><span id="l11.634" class="difflineminus">-</span>
<a href="#l11.635"></a><span id="l11.635" class="difflineminus">-  addBookmark: function bmf_addbm(aTitle, aUri) {</span>
<a href="#l11.636"></a><span id="l11.636" class="difflineminus">-    var newBookmarkID = Utilities.bookmarks.insertBookmark(this._id, aUri, Utilities.bookmarks.DEFAULT_INDEX, aTitle);</span>
<a href="#l11.637"></a><span id="l11.637" class="difflineminus">-    var newBookmark = new Bookmark(newBookmarkID, this, &quot;bookmark&quot;);</span>
<a href="#l11.638"></a><span id="l11.638" class="difflineminus">-    return newBookmark;</span>
<a href="#l11.639"></a><span id="l11.639" class="difflineminus">-  },</span>
<a href="#l11.640"></a><span id="l11.640" class="difflineminus">-</span>
<a href="#l11.641"></a><span id="l11.641" class="difflineminus">-  addSeparator: function bmf_addsep() {</span>
<a href="#l11.642"></a><span id="l11.642" class="difflineminus">-    var newBookmarkID = Utilities.bookmarks.insertSeparator(this._id, Utilities.bookmarks.DEFAULT_INDEX);</span>
<a href="#l11.643"></a><span id="l11.643" class="difflineminus">-    var newBookmark = new Bookmark(newBookmarkID, this, &quot;separator&quot;);</span>
<a href="#l11.644"></a><span id="l11.644" class="difflineminus">-    return newBookmark;</span>
<a href="#l11.645"></a><span id="l11.645" class="difflineminus">-  },</span>
<a href="#l11.646"></a><span id="l11.646" class="difflineminus">-</span>
<a href="#l11.647"></a><span id="l11.647" class="difflineminus">-  addFolder: function bmf_addfolder(aTitle) {</span>
<a href="#l11.648"></a><span id="l11.648" class="difflineminus">-    var newFolderID = Utilities.bookmarks.createFolder(this._id, aTitle, Utilities.bookmarks.DEFAULT_INDEX);</span>
<a href="#l11.649"></a><span id="l11.649" class="difflineminus">-    var newFolder = new BookmarkFolder(newFolderID, this);</span>
<a href="#l11.650"></a><span id="l11.650" class="difflineminus">-    return newFolder;</span>
<a href="#l11.651"></a><span id="l11.651" class="difflineminus">-  },</span>
<a href="#l11.652"></a><span id="l11.652" class="difflineminus">-</span>
<a href="#l11.653"></a><span id="l11.653" class="difflineminus">-  remove: function bmf_remove() {</span>
<a href="#l11.654"></a><span id="l11.654" class="difflineminus">-    Utilities.bookmarks.removeItem(this._id);</span>
<a href="#l11.655"></a><span id="l11.655" class="difflineminus">-  },</span>
<a href="#l11.656"></a><span id="l11.656" class="difflineminus">-</span>
<a href="#l11.657"></a><span id="l11.657" class="difflineminus">-  // observer</span>
<a href="#l11.658"></a><span id="l11.658" class="difflineminus">-  onBeginUpdateBatch: function () {},</span>
<a href="#l11.659"></a><span id="l11.659" class="difflineminus">-  onEndUpdateBatch: function () {},</span>
<a href="#l11.660"></a><span id="l11.660" class="difflineminus">-  onItemAdded: function () {},</span>
<a href="#l11.661"></a><span id="l11.661" class="difflineminus">-  onItemRemoved: function () {},</span>
<a href="#l11.662"></a><span id="l11.662" class="difflineminus">-  onItemChanged: function () {},</span>
<a href="#l11.663"></a><span id="l11.663" class="difflineminus">-</span>
<a href="#l11.664"></a><span id="l11.664" class="difflineminus">-  onItemMoved: function bf_onItemMoved(aId, aOldParent, aOldIndex, aNewParent, aNewIndex) {</span>
<a href="#l11.665"></a><span id="l11.665" class="difflineminus">-    if (this._id == aId) {</span>
<a href="#l11.666"></a><span id="l11.666" class="difflineminus">-      this._parent = new BookmarkFolder(aNewParent, Utilities.bookmarks.getFolderIdForItem(aNewParent));</span>
<a href="#l11.667"></a><span id="l11.667" class="difflineminus">-    }</span>
<a href="#l11.668"></a><span id="l11.668" class="difflineminus">-  },</span>
<a href="#l11.669"></a><span id="l11.669" class="difflineminus">-</span>
<a href="#l11.670"></a><span id="l11.670" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Ci.smileIBookmarkFolder,</span>
<a href="#l11.671"></a><span id="l11.671" class="difflineminus">-                                         Ci.nsINavBookmarksObserver,</span>
<a href="#l11.672"></a><span id="l11.672" class="difflineminus">-                                         Ci.nsISupportsWeakReference])</span>
<a href="#l11.673"></a><span id="l11.673" class="difflineminus">-};</span>
<a href="#l11.674"></a><span id="l11.674" class="difflineminus">-</span>
<a href="#l11.675"></a><span id="l11.675" class="difflineminus">-</span>
<a href="#l11.676"></a><span id="l11.676" class="difflineminus">-//=================================================</span>
<a href="#l11.677"></a><span id="l11.677" class="difflineminus">-// BookmarkRoots implementation</span>
<a href="#l11.678"></a><span id="l11.678" class="difflineminus">-function BookmarkRoots() {</span>
<a href="#l11.679"></a><span id="l11.679" class="difflineminus">-}</span>
<a href="#l11.680"></a><span id="l11.680" class="difflineminus">-</span>
<a href="#l11.681"></a><span id="l11.681" class="difflineminus">-BookmarkRoots.prototype = {</span>
<a href="#l11.682"></a><span id="l11.682" class="difflineminus">-  get menu() {</span>
<a href="#l11.683"></a><span id="l11.683" class="difflineminus">-    if (!this._menu)</span>
<a href="#l11.684"></a><span id="l11.684" class="difflineminus">-      this._menu = new BookmarkFolder(Utilities.bookmarks.bookmarksMenuFolder, null);</span>
<a href="#l11.685"></a><span id="l11.685" class="difflineminus">-</span>
<a href="#l11.686"></a><span id="l11.686" class="difflineminus">-    return this._menu;</span>
<a href="#l11.687"></a><span id="l11.687" class="difflineminus">-  },</span>
<a href="#l11.688"></a><span id="l11.688" class="difflineminus">-</span>
<a href="#l11.689"></a><span id="l11.689" class="difflineminus">-  get toolbar() {</span>
<a href="#l11.690"></a><span id="l11.690" class="difflineminus">-    if (!this._toolbar)</span>
<a href="#l11.691"></a><span id="l11.691" class="difflineminus">-      this._toolbar = new BookmarkFolder(Utilities.bookmarks.toolbarFolder, null);</span>
<a href="#l11.692"></a><span id="l11.692" class="difflineminus">-</span>
<a href="#l11.693"></a><span id="l11.693" class="difflineminus">-    return this._toolbar;</span>
<a href="#l11.694"></a><span id="l11.694" class="difflineminus">-  },</span>
<a href="#l11.695"></a><span id="l11.695" class="difflineminus">-</span>
<a href="#l11.696"></a><span id="l11.696" class="difflineminus">-  get tags() {</span>
<a href="#l11.697"></a><span id="l11.697" class="difflineminus">-    if (!this._tags)</span>
<a href="#l11.698"></a><span id="l11.698" class="difflineminus">-      this._tags = new BookmarkFolder(Utilities.bookmarks.tagsFolder, null);</span>
<a href="#l11.699"></a><span id="l11.699" class="difflineminus">-</span>
<a href="#l11.700"></a><span id="l11.700" class="difflineminus">-    return this._tags;</span>
<a href="#l11.701"></a><span id="l11.701" class="difflineminus">-  },</span>
<a href="#l11.702"></a><span id="l11.702" class="difflineminus">-</span>
<a href="#l11.703"></a><span id="l11.703" class="difflineminus">-  get unfiled() {</span>
<a href="#l11.704"></a><span id="l11.704" class="difflineminus">-    if (!this._unfiled)</span>
<a href="#l11.705"></a><span id="l11.705" class="difflineminus">-      this._unfiled = new BookmarkFolder(Utilities.bookmarks.unfiledBookmarksFolder, null);</span>
<a href="#l11.706"></a><span id="l11.706" class="difflineminus">-</span>
<a href="#l11.707"></a><span id="l11.707" class="difflineminus">-    return this._unfiled;</span>
<a href="#l11.708"></a><span id="l11.708" class="difflineminus">-  },</span>
<a href="#l11.709"></a><span id="l11.709" class="difflineminus">-</span>
<a href="#l11.710"></a><span id="l11.710" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI([Components.interfaces.smileIBookmarkRoots])</span>
<a href="#l11.711"></a><span id="l11.711" class="difflineminus">-};</span>
<a href="#l11.712"></a><span id="l11.712" class="difflineminus">-</span>
<a href="#l11.713"></a><span id="l11.713" class="difflineminus">-</span>
<a href="#l11.714"></a><span id="l11.714" class="difflineminus">-//=================================================</span>
<a href="#l11.715"></a><span id="l11.715" class="difflineminus">-// Factory - Treat Application as a singleton</span>
<a href="#l11.716"></a><span id="l11.716" class="difflineminus">-// XXX This is required, because we're registered for the 'JavaScript global</span>
<a href="#l11.717"></a><span id="l11.717" class="difflineminus">-// privileged property' category, whose handler always calls createInstance.</span>
<a href="#l11.718"></a><span id="l11.718" class="difflineminus">-// See bug 386535.</span>
<a href="#l11.719"></a><span id="l11.719" class="difflineminus">-var gSingleton = null;</span>
<a href="#l11.720"></a><span id="l11.720" class="difflineminus">-var ApplicationFactory = {</span>
<a href="#l11.721"></a><span id="l11.721" class="difflineminus">-  createInstance: function af_ci(aOuter, aIID) {</span>
<a href="#l11.722"></a><span id="l11.722" class="difflineminus">-    if (aOuter != null)</span>
<a href="#l11.723"></a><span id="l11.723" class="difflineminus">-      throw Components.results.NS_ERROR_NO_AGGREGATION;</span>
<a href="#l11.724"></a><span id="l11.724" class="difflineminus">-</span>
<a href="#l11.725"></a><span id="l11.725" class="difflineminus">-    if (gSingleton == null) {</span>
<a href="#l11.726"></a><span id="l11.726" class="difflineminus">-      gSingleton = new Application();</span>
<a href="#l11.727"></a><span id="l11.727" class="difflineminus">-    }</span>
<a href="#l11.728"></a><span id="l11.728" class="difflineminus">-</span>
<a href="#l11.729"></a><span id="l11.729" class="difflineminus">-    return gSingleton.QueryInterface(aIID);</span>
<a href="#l11.730"></a><span id="l11.730" class="difflineminus">-  }</span>
<a href="#l11.731"></a><span id="l11.731" class="difflineminus">-};</span>
<a href="#l11.732"></a><span id="l11.732" class="difflineminus">-</span>
<a href="#l11.733"></a><span id="l11.733" class="difflineminus">-#include ../exthelper/extApplication.js</span>
<a href="#l11.734"></a><span id="l11.734" class="difflineminus">-</span>
<a href="#l11.735"></a><span id="l11.735" class="difflineminus">-//=================================================</span>
<a href="#l11.736"></a><span id="l11.736" class="difflineminus">-// Application constructor</span>
<a href="#l11.737"></a><span id="l11.737" class="difflineminus">-function Application() {</span>
<a href="#l11.738"></a><span id="l11.738" class="difflineminus">-  this.initToolkitHelpers();</span>
<a href="#l11.739"></a><span id="l11.739" class="difflineminus">-}</span>
<a href="#l11.740"></a><span id="l11.740" class="difflineminus">-</span>
<a href="#l11.741"></a><span id="l11.741" class="difflineminus">-//=================================================</span>
<a href="#l11.742"></a><span id="l11.742" class="difflineminus">-// Application implementation</span>
<a href="#l11.743"></a><span id="l11.743" class="difflineminus">-Application.prototype = {</span>
<a href="#l11.744"></a><span id="l11.744" class="difflineminus">-  // set the proto, defined in extApplication.js</span>
<a href="#l11.745"></a><span id="l11.745" class="difflineminus">-  __proto__: extApplication.prototype,</span>
<a href="#l11.746"></a><span id="l11.746" class="difflineminus">-</span>
<a href="#l11.747"></a><span id="l11.747" class="difflineminus">-  // for XPCOMUtils</span>
<a href="#l11.748"></a><span id="l11.748" class="difflineminus">-  classID: APPLICATION_CID,</span>
<a href="#l11.749"></a><span id="l11.749" class="difflineminus">-</span>
<a href="#l11.750"></a><span id="l11.750" class="difflineminus">-  // redefine the default factory for XPCOMUtils</span>
<a href="#l11.751"></a><span id="l11.751" class="difflineminus">-  _xpcom_factory: ApplicationFactory,</span>
<a href="#l11.752"></a><span id="l11.752" class="difflineminus">-</span>
<a href="#l11.753"></a><span id="l11.753" class="difflineminus">-  // for nsISupports</span>
<a href="#l11.754"></a><span id="l11.754" class="difflineminus">-  QueryInterface: XPCOMUtils.generateQI(</span>
<a href="#l11.755"></a><span id="l11.755" class="difflineminus">-                    [Components.interfaces.smileIApplication,</span>
<a href="#l11.756"></a><span id="l11.756" class="difflineminus">-                     Components.interfaces.extIApplication,</span>
<a href="#l11.757"></a><span id="l11.757" class="difflineminus">-                     Components.interfaces.nsIObserver,</span>
<a href="#l11.758"></a><span id="l11.758" class="difflineminus">-                     Components.interfaces.nsISupportsWeakReference]),</span>
<a href="#l11.759"></a><span id="l11.759" class="difflineminus">-</span>
<a href="#l11.760"></a><span id="l11.760" class="difflineminus">-  // for nsIClassInfo</span>
<a href="#l11.761"></a><span id="l11.761" class="difflineminus">-  classInfo: XPCOMUtils.generateCI({</span>
<a href="#l11.762"></a><span id="l11.762" class="difflineminus">-    classID: APPLICATION_CID,</span>
<a href="#l11.763"></a><span id="l11.763" class="difflineminus">-    contractID: APPLICATION_CONTRACTID,</span>
<a href="#l11.764"></a><span id="l11.764" class="difflineminus">-    interfaces: [Components.interfaces.smileIApplication,</span>
<a href="#l11.765"></a><span id="l11.765" class="difflineminus">-                 Components.interfaces.extIApplication,</span>
<a href="#l11.766"></a><span id="l11.766" class="difflineminus">-                 Components.interfaces.nsIObserver],</span>
<a href="#l11.767"></a><span id="l11.767" class="difflineminus">-    flags: Components.interfaces.nsIClassInfo.SINGLETON}),</span>
<a href="#l11.768"></a><span id="l11.768" class="difflineminus">-</span>
<a href="#l11.769"></a><span id="l11.769" class="difflineminus">-  // for nsIObserver</span>
<a href="#l11.770"></a><span id="l11.770" class="difflineminus">-  observe: function app_observe(aSubject, aTopic, aData) {</span>
<a href="#l11.771"></a><span id="l11.771" class="difflineminus">-    // Call the extApplication version of this function first</span>
<a href="#l11.772"></a><span id="l11.772" class="difflineminus">-    this.__proto__.__proto__.observe.call(this, aSubject, aTopic, aData);</span>
<a href="#l11.773"></a><span id="l11.773" class="difflineminus">-    if (aTopic == &quot;xpcom-shutdown&quot;) {</span>
<a href="#l11.774"></a><span id="l11.774" class="difflineminus">-      this._obs.removeObserver(this, &quot;xpcom-shutdown&quot;);</span>
<a href="#l11.775"></a><span id="l11.775" class="difflineminus">-      delete this.bookmarks;</span>
<a href="#l11.776"></a><span id="l11.776" class="difflineminus">-      Utilities.free();</span>
<a href="#l11.777"></a><span id="l11.777" class="difflineminus">-    }</span>
<a href="#l11.778"></a><span id="l11.778" class="difflineminus">-  },</span>
<a href="#l11.779"></a><span id="l11.779" class="difflineminus">-</span>
<a href="#l11.780"></a><span id="l11.780" class="difflineminus">-  get bookmarks() {</span>
<a href="#l11.781"></a><span id="l11.781" class="difflineminus">-    let bookmarks = new BookmarkRoots();</span>
<a href="#l11.782"></a><span id="l11.782" class="difflineminus">-    this.__defineGetter__(&quot;bookmarks&quot;, () =&gt; bookmarks);</span>
<a href="#l11.783"></a><span id="l11.783" class="difflineminus">-    return this.bookmarks;</span>
<a href="#l11.784"></a><span id="l11.784" class="difflineminus">-  },</span>
<a href="#l11.785"></a><span id="l11.785" class="difflineminus">-</span>
<a href="#l11.786"></a><span id="l11.786" class="difflineminus">-  get windows() {</span>
<a href="#l11.787"></a><span id="l11.787" class="difflineminus">-    var win = [];</span>
<a href="#l11.788"></a><span id="l11.788" class="difflineminus">-    var browserEnum = Services.wm.getEnumerator(&quot;navigator:browser&quot;);</span>
<a href="#l11.789"></a><span id="l11.789" class="difflineminus">-</span>
<a href="#l11.790"></a><span id="l11.790" class="difflineminus">-    while (browserEnum.hasMoreElements())</span>
<a href="#l11.791"></a><span id="l11.791" class="difflineminus">-      win.push(getWindow(browserEnum.getNext()));</span>
<a href="#l11.792"></a><span id="l11.792" class="difflineminus">-</span>
<a href="#l11.793"></a><span id="l11.793" class="difflineminus">-    return win;</span>
<a href="#l11.794"></a><span id="l11.794" class="difflineminus">-  },</span>
<a href="#l11.795"></a><span id="l11.795" class="difflineminus">-</span>
<a href="#l11.796"></a><span id="l11.796" class="difflineminus">-  get activeWindow() {</span>
<a href="#l11.797"></a><span id="l11.797" class="difflineminus">-    return getWindow(Services.wm.getMostRecentWindow(&quot;navigator:browser&quot;));</span>
<a href="#l11.798"></a><span id="l11.798" class="difflineminus">-  },</span>
<a href="#l11.799"></a><span id="l11.799" class="difflineminus">-</span>
<a href="#l11.800"></a><span id="l11.800" class="difflineminus">-  // For steelIApplication compatibility.</span>
<a href="#l11.801"></a><span id="l11.801" class="difflineminus">-  platformIsMac: &quot;nsILocalFileMac&quot; in Components.interfaces</span>
<a href="#l11.802"></a><span id="l11.802" class="difflineminus">-};</span>
<a href="#l11.803"></a><span id="l11.803" class="difflineminus">-</span>
<a href="#l11.804"></a><span id="l11.804" class="difflineminus">-var NSGetFactory = XPCOMUtils.generateNSGetFactory([Application]);</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l12.1"></a><span id="l12.1">deleted file mode 100644</span>
<a href="#l12.2"></a><span id="l12.2" class="difflineminus">--- a/suite/smile/src/smileApplication.manifest</span>
<a href="#l12.3"></a><span id="l12.3" class="difflineplus">+++ /dev/null</span>
<a href="#l12.4"></a><span id="l12.4" class="difflineat">@@ -1,3 +0,0 @@</span>
<a href="#l12.5"></a><span id="l12.5" class="difflineminus">-component {c9ba8f65-c936-4ac6-a859-8936832b0c12} smileApplication.js</span>
<a href="#l12.6"></a><span id="l12.6" class="difflineminus">-contract @mozilla.org/smile/application;1 {c9ba8f65-c936-4ac6-a859-8936832b0c12}</span>
<a href="#l12.7"></a><span id="l12.7" class="difflineminus">-category JavaScript-global-privileged-property Application @mozilla.org/smile/application;1</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l13.1"></a><span id="l13.1">deleted file mode 100644</span>
<a href="#l13.2"></a><span id="l13.2" class="difflineminus">--- a/suite/smile/test/ContentA.html</span>
<a href="#l13.3"></a><span id="l13.3" class="difflineplus">+++ /dev/null</span>
<a href="#l13.4"></a><span id="l13.4" class="difflineat">@@ -1,12 +0,0 @@</span>
<a href="#l13.5"></a><span id="l13.5" class="difflineminus">-&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<a href="#l13.6"></a><span id="l13.6" class="difflineminus">-&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; &gt;</span>
<a href="#l13.7"></a><span id="l13.7" class="difflineminus">-&lt;head&gt;</span>
<a href="#l13.8"></a><span id="l13.8" class="difflineminus">-    &lt;title&gt;Content Page A&lt;/title&gt;</span>
<a href="#l13.9"></a><span id="l13.9" class="difflineminus">-&lt;/head&gt;</span>
<a href="#l13.10"></a><span id="l13.10" class="difflineminus">-&lt;body&gt;</span>
<a href="#l13.11"></a><span id="l13.11" class="difflineminus">-&lt;h1&gt;Content Page A&lt;/h1&gt;</span>
<a href="#l13.12"></a><span id="l13.12" class="difflineminus">-&lt;div id=&quot;desc&quot;&gt;This is a simple content page used for testing SMILE Browser API&lt;/div&gt;</span>
<a href="#l13.13"></a><span id="l13.13" class="difflineminus">-&lt;div id=&quot;test1&quot;&gt;A&lt;/div&gt;</span>
<a href="#l13.14"></a><span id="l13.14" class="difflineminus">-&lt;div id=&quot;test2&quot;&gt;B&lt;/div&gt;</span>
<a href="#l13.15"></a><span id="l13.15" class="difflineminus">-&lt;/body&gt;</span>
<a href="#l13.16"></a><span id="l13.16" class="difflineminus">-&lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l14.1"></a><span id="l14.1">deleted file mode 100644</span>
<a href="#l14.2"></a><span id="l14.2" class="difflineminus">--- a/suite/smile/test/ContentB.html</span>
<a href="#l14.3"></a><span id="l14.3" class="difflineplus">+++ /dev/null</span>
<a href="#l14.4"></a><span id="l14.4" class="difflineat">@@ -1,12 +0,0 @@</span>
<a href="#l14.5"></a><span id="l14.5" class="difflineminus">-&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<a href="#l14.6"></a><span id="l14.6" class="difflineminus">-&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; &gt;</span>
<a href="#l14.7"></a><span id="l14.7" class="difflineminus">-&lt;head&gt;</span>
<a href="#l14.8"></a><span id="l14.8" class="difflineminus">-    &lt;title&gt;Content Page B&lt;/title&gt;</span>
<a href="#l14.9"></a><span id="l14.9" class="difflineminus">-&lt;/head&gt;</span>
<a href="#l14.10"></a><span id="l14.10" class="difflineminus">-&lt;body&gt;</span>
<a href="#l14.11"></a><span id="l14.11" class="difflineminus">-&lt;h1&gt;Content Page B&lt;/h1&gt;</span>
<a href="#l14.12"></a><span id="l14.12" class="difflineminus">-&lt;div id=&quot;desc&quot;&gt;This is a simple content page used for testing SMILE Browser API&lt;/div&gt;</span>
<a href="#l14.13"></a><span id="l14.13" class="difflineminus">-&lt;div id=&quot;test1&quot;&gt;1&lt;/div&gt;</span>
<a href="#l14.14"></a><span id="l14.14" class="difflineminus">-&lt;div id=&quot;test2&quot;&gt;2&lt;/div&gt;</span>
<a href="#l14.15"></a><span id="l14.15" class="difflineminus">-&lt;/body&gt;</span>
<a href="#l14.16"></a><span id="l14.16" class="difflineminus">-&lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l15.1"></a><span id="l15.1">deleted file mode 100644</span>
<a href="#l15.2"></a><span id="l15.2" class="difflineminus">--- a/suite/smile/test/ContentWithFrames.html</span>
<a href="#l15.3"></a><span id="l15.3" class="difflineplus">+++ /dev/null</span>
<a href="#l15.4"></a><span id="l15.4" class="difflineat">@@ -1,12 +0,0 @@</span>
<a href="#l15.5"></a><span id="l15.5" class="difflineminus">-&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span>
<a href="#l15.6"></a><span id="l15.6" class="difflineminus">-&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; &gt;</span>
<a href="#l15.7"></a><span id="l15.7" class="difflineminus">-&lt;head&gt;</span>
<a href="#l15.8"></a><span id="l15.8" class="difflineminus">-    &lt;title&gt;Content Page with Frames&lt;/title&gt;</span>
<a href="#l15.9"></a><span id="l15.9" class="difflineminus">-&lt;/head&gt;</span>
<a href="#l15.10"></a><span id="l15.10" class="difflineminus">-&lt;body&gt;</span>
<a href="#l15.11"></a><span id="l15.11" class="difflineminus">-&lt;h1&gt;Content Page with Frames&lt;/h1&gt;</span>
<a href="#l15.12"></a><span id="l15.12" class="difflineminus">-&lt;div id=&quot;desc&quot;&gt;This is a simple framed content page used for testing SMILE Browser API&lt;/div&gt;</span>
<a href="#l15.13"></a><span id="l15.13" class="difflineminus">-&lt;iframe src=&quot;ContentA.html&quot;&gt;&lt;/iframe&gt;</span>
<a href="#l15.14"></a><span id="l15.14" class="difflineminus">-&lt;iframe src=&quot;ContentB.html&quot;&gt;&lt;/iframe&gt;</span>
<a href="#l15.15"></a><span id="l15.15" class="difflineminus">-&lt;/body&gt;</span>
<a href="#l15.16"></a><span id="l15.16" class="difflineminus">-&lt;/html&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l16.1"></a><span id="l16.1">deleted file mode 100644</span>
<a href="#l16.2"></a><span id="l16.2" class="difflineminus">--- a/suite/smile/test/browser_Application.js</span>
<a href="#l16.3"></a><span id="l16.3" class="difflineplus">+++ /dev/null</span>
<a href="#l16.4"></a><span id="l16.4" class="difflineat">@@ -1,84 +0,0 @@</span>
<a href="#l16.5"></a><span id="l16.5" class="difflineminus">-const Ci = Components.interfaces;</span>
<a href="#l16.6"></a><span id="l16.6" class="difflineminus">-const Cc = Components.classes;</span>
<a href="#l16.7"></a><span id="l16.7" class="difflineminus">-const Cu = Components.utils;</span>
<a href="#l16.8"></a><span id="l16.8" class="difflineminus">-</span>
<a href="#l16.9"></a><span id="l16.9" class="difflineminus">-ChromeUtils.import(&quot;resource://gre/modules/Services.jsm&quot;);</span>
<a href="#l16.10"></a><span id="l16.10" class="difflineminus">-</span>
<a href="#l16.11"></a><span id="l16.11" class="difflineminus">-// This listens for the next opened window and checks it is of the right url.</span>
<a href="#l16.12"></a><span id="l16.12" class="difflineminus">-// opencallback is called when the new window is fully loaded</span>
<a href="#l16.13"></a><span id="l16.13" class="difflineminus">-// closecallback is called when the window is closed</span>
<a href="#l16.14"></a><span id="l16.14" class="difflineminus">-function WindowOpenListener(url, opencallback, closecallback) {</span>
<a href="#l16.15"></a><span id="l16.15" class="difflineminus">-  this.url = url;</span>
<a href="#l16.16"></a><span id="l16.16" class="difflineminus">-  this.opencallback = opencallback;</span>
<a href="#l16.17"></a><span id="l16.17" class="difflineminus">-  this.closecallback = closecallback;</span>
<a href="#l16.18"></a><span id="l16.18" class="difflineminus">-</span>
<a href="#l16.19"></a><span id="l16.19" class="difflineminus">-  Services.wm.addListener(this);</span>
<a href="#l16.20"></a><span id="l16.20" class="difflineminus">-}</span>
<a href="#l16.21"></a><span id="l16.21" class="difflineminus">-</span>
<a href="#l16.22"></a><span id="l16.22" class="difflineminus">-WindowOpenListener.prototype = {</span>
<a href="#l16.23"></a><span id="l16.23" class="difflineminus">-  url: null,</span>
<a href="#l16.24"></a><span id="l16.24" class="difflineminus">-  opencallback: null,</span>
<a href="#l16.25"></a><span id="l16.25" class="difflineminus">-  closecallback: null,</span>
<a href="#l16.26"></a><span id="l16.26" class="difflineminus">-  window: null,</span>
<a href="#l16.27"></a><span id="l16.27" class="difflineminus">-  domwindow: null,</span>
<a href="#l16.28"></a><span id="l16.28" class="difflineminus">-</span>
<a href="#l16.29"></a><span id="l16.29" class="difflineminus">-  handleEvent: function(event) {</span>
<a href="#l16.30"></a><span id="l16.30" class="difflineminus">-    is(this.domwindow.document.location.href, this.url, &quot;Should have opened the correct window&quot;);</span>
<a href="#l16.31"></a><span id="l16.31" class="difflineminus">-</span>
<a href="#l16.32"></a><span id="l16.32" class="difflineminus">-    this.domwindow.removeEventListener(&quot;load&quot;, this);</span>
<a href="#l16.33"></a><span id="l16.33" class="difflineminus">-    // Allow any other load handlers to execute</span>
<a href="#l16.34"></a><span id="l16.34" class="difflineminus">-    var self = this;</span>
<a href="#l16.35"></a><span id="l16.35" class="difflineminus">-    executeSoon(function() { self.opencallback(self.domwindow); } );</span>
<a href="#l16.36"></a><span id="l16.36" class="difflineminus">-  },</span>
<a href="#l16.37"></a><span id="l16.37" class="difflineminus">-</span>
<a href="#l16.38"></a><span id="l16.38" class="difflineminus">-  onWindowTitleChange: function(window, title) {</span>
<a href="#l16.39"></a><span id="l16.39" class="difflineminus">-  },</span>
<a href="#l16.40"></a><span id="l16.40" class="difflineminus">-</span>
<a href="#l16.41"></a><span id="l16.41" class="difflineminus">-  onOpenWindow: function(window) {</span>
<a href="#l16.42"></a><span id="l16.42" class="difflineminus">-    if (this.window)</span>
<a href="#l16.43"></a><span id="l16.43" class="difflineminus">-      return;</span>
<a href="#l16.44"></a><span id="l16.44" class="difflineminus">-</span>
<a href="#l16.45"></a><span id="l16.45" class="difflineminus">-    this.window = window;</span>
<a href="#l16.46"></a><span id="l16.46" class="difflineminus">-    this.domwindow = window.QueryInterface(Ci.nsIInterfaceRequestor)</span>
<a href="#l16.47"></a><span id="l16.47" class="difflineminus">-                           .getInterface(Ci.nsIDOMWindow);</span>
<a href="#l16.48"></a><span id="l16.48" class="difflineminus">-    this.domwindow.addEventListener(&quot;load&quot;, this);</span>
<a href="#l16.49"></a><span id="l16.49" class="difflineminus">-  },</span>
<a href="#l16.50"></a><span id="l16.50" class="difflineminus">-</span>
<a href="#l16.51"></a><span id="l16.51" class="difflineminus">-  onCloseWindow: function(window) {</span>
<a href="#l16.52"></a><span id="l16.52" class="difflineminus">-    if (this.window != window)</span>
<a href="#l16.53"></a><span id="l16.53" class="difflineminus">-      return;</span>
<a href="#l16.54"></a><span id="l16.54" class="difflineminus">-</span>
<a href="#l16.55"></a><span id="l16.55" class="difflineminus">-    Services.wm.removeListener(this);</span>
<a href="#l16.56"></a><span id="l16.56" class="difflineminus">-    this.opencallback = null;</span>
<a href="#l16.57"></a><span id="l16.57" class="difflineminus">-    this.window = null;</span>
<a href="#l16.58"></a><span id="l16.58" class="difflineminus">-    this.domwindow = null;</span>
<a href="#l16.59"></a><span id="l16.59" class="difflineminus">-</span>
<a href="#l16.60"></a><span id="l16.60" class="difflineminus">-    // Let the window close complete</span>
<a href="#l16.61"></a><span id="l16.61" class="difflineminus">-    executeSoon(this.closecallback);</span>
<a href="#l16.62"></a><span id="l16.62" class="difflineminus">-    this.closecallback = null;</span>
<a href="#l16.63"></a><span id="l16.63" class="difflineminus">-  }</span>
<a href="#l16.64"></a><span id="l16.64" class="difflineminus">-};</span>
<a href="#l16.65"></a><span id="l16.65" class="difflineminus">-</span>
<a href="#l16.66"></a><span id="l16.66" class="difflineminus">-function test() {</span>
<a href="#l16.67"></a><span id="l16.67" class="difflineminus">-  ok(Application, &quot;Check global access to Application&quot;);</span>
<a href="#l16.68"></a><span id="l16.68" class="difflineminus">-</span>
<a href="#l16.69"></a><span id="l16.69" class="difflineminus">-  // I'd test these against a specific value, but that is bound to flucuate</span>
<a href="#l16.70"></a><span id="l16.70" class="difflineminus">-  ok(Application.id, &quot;Check to see if an ID exists for the Application&quot;);</span>
<a href="#l16.71"></a><span id="l16.71" class="difflineminus">-  ok(Application.name, &quot;Check to see if a name exists for the Application&quot;);</span>
<a href="#l16.72"></a><span id="l16.72" class="difflineminus">-  ok(Application.version, &quot;Check to see if a version exists for the Application&quot;);</span>
<a href="#l16.73"></a><span id="l16.73" class="difflineminus">-</span>
<a href="#l16.74"></a><span id="l16.74" class="difflineminus">-  var console = Services.wm.getMostRecentWindow(&quot;suite:console&quot;);</span>
<a href="#l16.75"></a><span id="l16.75" class="difflineminus">-  waitForExplicitFinish();</span>
<a href="#l16.76"></a><span id="l16.76" class="difflineminus">-  ok(!console, &quot;Console should not already be open&quot;);</span>
<a href="#l16.77"></a><span id="l16.77" class="difflineminus">-</span>
<a href="#l16.78"></a><span id="l16.78" class="difflineminus">-  new WindowOpenListener(&quot;chrome://communicator/content/console/console.xul&quot;, consoleOpened, consoleClosed);</span>
<a href="#l16.79"></a><span id="l16.79" class="difflineminus">-  Application.console.open();</span>
<a href="#l16.80"></a><span id="l16.80" class="difflineminus">-}</span>
<a href="#l16.81"></a><span id="l16.81" class="difflineminus">-</span>
<a href="#l16.82"></a><span id="l16.82" class="difflineminus">-function consoleOpened(win) {</span>
<a href="#l16.83"></a><span id="l16.83" class="difflineminus">-  win.close();</span>
<a href="#l16.84"></a><span id="l16.84" class="difflineminus">-}</span>
<a href="#l16.85"></a><span id="l16.85" class="difflineminus">-</span>
<a href="#l16.86"></a><span id="l16.86" class="difflineminus">-function consoleClosed() {</span>
<a href="#l16.87"></a><span id="l16.87" class="difflineminus">-  finish();</span>
<a href="#l16.88"></a><span id="l16.88" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l17.1"></a><span id="l17.1">deleted file mode 100644</span>
<a href="#l17.2"></a><span id="l17.2" class="difflineminus">--- a/suite/smile/test/browser_ApplicationPrefs.js</span>
<a href="#l17.3"></a><span id="l17.3" class="difflineplus">+++ /dev/null</span>
<a href="#l17.4"></a><span id="l17.4" class="difflineat">@@ -1,179 +0,0 @@</span>
<a href="#l17.5"></a><span id="l17.5" class="difflineminus">-// The various properties that we'll be testing</span>
<a href="#l17.6"></a><span id="l17.6" class="difflineminus">-var testdata = {</span>
<a href="#l17.7"></a><span id="l17.7" class="difflineminus">-  missing: &quot;smile.smile-test-missing&quot;,</span>
<a href="#l17.8"></a><span id="l17.8" class="difflineminus">-  dummy: &quot;smile.smile-test&quot;,</span>
<a href="#l17.9"></a><span id="l17.9" class="difflineminus">-  string: &quot;browser.active_color&quot;,</span>
<a href="#l17.10"></a><span id="l17.10" class="difflineminus">-  integer: &quot;permissions.default.image&quot;,</span>
<a href="#l17.11"></a><span id="l17.11" class="difflineminus">-  boolean: &quot;browser.underline_anchors&quot;</span>
<a href="#l17.12"></a><span id="l17.12" class="difflineminus">-};</span>
<a href="#l17.13"></a><span id="l17.13" class="difflineminus">-</span>
<a href="#l17.14"></a><span id="l17.14" class="difflineminus">-function test() {</span>
<a href="#l17.15"></a><span id="l17.15" class="difflineminus">-  // test getting nonexistent values</span>
<a href="#l17.16"></a><span id="l17.16" class="difflineminus">-  var itemValue = Application.prefs.getValue(testdata.missing, &quot;default&quot;);</span>
<a href="#l17.17"></a><span id="l17.17" class="difflineminus">-  is(itemValue, &quot;default&quot;, &quot;Check 'Application.prefs.getValue' for nonexistent item&quot;);</span>
<a href="#l17.18"></a><span id="l17.18" class="difflineminus">-</span>
<a href="#l17.19"></a><span id="l17.19" class="difflineminus">-  is(Application.prefs.get(testdata.missing), null, &quot;Check 'Application.prefs.get' for nonexistent item&quot;);</span>
<a href="#l17.20"></a><span id="l17.20" class="difflineminus">-</span>
<a href="#l17.21"></a><span id="l17.21" class="difflineminus">-  // test setting and getting a value</span>
<a href="#l17.22"></a><span id="l17.22" class="difflineminus">-  Application.prefs.setValue(testdata.dummy, &quot;dummy&quot;);</span>
<a href="#l17.23"></a><span id="l17.23" class="difflineminus">-  itemValue = Application.prefs.getValue(testdata.dummy, &quot;default&quot;);</span>
<a href="#l17.24"></a><span id="l17.24" class="difflineminus">-  is(itemValue, &quot;dummy&quot;, &quot;Check 'Application.prefs.getValue' for existing item&quot;);</span>
<a href="#l17.25"></a><span id="l17.25" class="difflineminus">-</span>
<a href="#l17.26"></a><span id="l17.26" class="difflineminus">-  // test for overwriting an existing value</span>
<a href="#l17.27"></a><span id="l17.27" class="difflineminus">-  Application.prefs.setValue(testdata.dummy, &quot;smarty&quot;);</span>
<a href="#l17.28"></a><span id="l17.28" class="difflineminus">-  itemValue = Application.prefs.getValue(testdata.dummy, &quot;default&quot;);</span>
<a href="#l17.29"></a><span id="l17.29" class="difflineminus">-  is(itemValue, &quot;smarty&quot;, &quot;Check 'Application.prefs.getValue' for overwritten item&quot;);</span>
<a href="#l17.30"></a><span id="l17.30" class="difflineminus">-</span>
<a href="#l17.31"></a><span id="l17.31" class="difflineminus">-  // test setting and getting a value</span>
<a href="#l17.32"></a><span id="l17.32" class="difflineminus">-  Application.prefs.get(testdata.dummy).value = &quot;dummy2&quot;;</span>
<a href="#l17.33"></a><span id="l17.33" class="difflineminus">-  itemValue = Application.prefs.get(testdata.dummy).value;</span>
<a href="#l17.34"></a><span id="l17.34" class="difflineminus">-  is(itemValue, &quot;dummy2&quot;, &quot;Check 'Application.prefs.get().value' for existing item&quot;);</span>
<a href="#l17.35"></a><span id="l17.35" class="difflineminus">-</span>
<a href="#l17.36"></a><span id="l17.36" class="difflineminus">-  // test resetting a pref [since there is no default value, the pref should disappear]</span>
<a href="#l17.37"></a><span id="l17.37" class="difflineminus">-  Application.prefs.get(testdata.dummy).reset();</span>
<a href="#l17.38"></a><span id="l17.38" class="difflineminus">-  itemValue = Application.prefs.getValue(testdata.dummy, &quot;default&quot;);</span>
<a href="#l17.39"></a><span id="l17.39" class="difflineminus">-  is(itemValue, &quot;default&quot;, &quot;Check 'Application.prefs.getValue' for reset pref&quot;);</span>
<a href="#l17.40"></a><span id="l17.40" class="difflineminus">-</span>
<a href="#l17.41"></a><span id="l17.41" class="difflineminus">-  // test to see if a non-existant property exists</span>
<a href="#l17.42"></a><span id="l17.42" class="difflineminus">-  ok(!Application.prefs.has(testdata.dummy), &quot;Check non-existant property for existence&quot;);</span>
<a href="#l17.43"></a><span id="l17.43" class="difflineminus">-</span>
<a href="#l17.44"></a><span id="l17.44" class="difflineminus">-  // PREF: string browser.active_color == #EE0000</span>
<a href="#l17.45"></a><span id="l17.45" class="difflineminus">-</span>
<a href="#l17.46"></a><span id="l17.46" class="difflineminus">-  // test to see if an existing string property exists</span>
<a href="#l17.47"></a><span id="l17.47" class="difflineminus">-  ok(Application.prefs.has(testdata.string), &quot;Check existing string property for existence&quot;);</span>
<a href="#l17.48"></a><span id="l17.48" class="difflineminus">-</span>
<a href="#l17.49"></a><span id="l17.49" class="difflineminus">-  // test accessing a non-existant string property</span>
<a href="#l17.50"></a><span id="l17.50" class="difflineminus">-  var val = Application.prefs.getValue(testdata.dummy, &quot;default&quot;);</span>
<a href="#l17.51"></a><span id="l17.51" class="difflineminus">-  is(val, &quot;default&quot;, &quot;Check non-existant string property for expected value&quot;);</span>
<a href="#l17.52"></a><span id="l17.52" class="difflineminus">-</span>
<a href="#l17.53"></a><span id="l17.53" class="difflineminus">-  // test accessing an existing string property</span>
<a href="#l17.54"></a><span id="l17.54" class="difflineminus">-  var val = Application.prefs.getValue(testdata.string, &quot;default&quot;);</span>
<a href="#l17.55"></a><span id="l17.55" class="difflineminus">-  is(val, &quot;#EE0000&quot;, &quot;Check existing string property for expected value&quot;);</span>
<a href="#l17.56"></a><span id="l17.56" class="difflineminus">-</span>
<a href="#l17.57"></a><span id="l17.57" class="difflineminus">-  // test manipulating an existing string property</span>
<a href="#l17.58"></a><span id="l17.58" class="difflineminus">-  Application.prefs.setValue(testdata.string, &quot;#EF0000&quot;);</span>
<a href="#l17.59"></a><span id="l17.59" class="difflineminus">-  var val = Application.prefs.getValue(testdata.string, &quot;default&quot;);</span>
<a href="#l17.60"></a><span id="l17.60" class="difflineminus">-  is(val, &quot;#EF0000&quot;, &quot;Set existing string property&quot;);</span>
<a href="#l17.61"></a><span id="l17.61" class="difflineminus">-</span>
<a href="#l17.62"></a><span id="l17.62" class="difflineminus">-  // test getting the type of an existing string property</span>
<a href="#l17.63"></a><span id="l17.63" class="difflineminus">-  var type = Application.prefs.get(testdata.string).type;</span>
<a href="#l17.64"></a><span id="l17.64" class="difflineminus">-  is(type, &quot;String&quot;, &quot;Check 'Application.prefs.get().type' for string pref&quot;);</span>
<a href="#l17.65"></a><span id="l17.65" class="difflineminus">-</span>
<a href="#l17.66"></a><span id="l17.66" class="difflineminus">-  // test resetting an existing string property</span>
<a href="#l17.67"></a><span id="l17.67" class="difflineminus">-  Application.prefs.get(testdata.string).reset();</span>
<a href="#l17.68"></a><span id="l17.68" class="difflineminus">-  var val = Application.prefs.getValue(testdata.string, &quot;default&quot;);</span>
<a href="#l17.69"></a><span id="l17.69" class="difflineminus">-  is(val, &quot;#EE0000&quot;, &quot;Reset existing string property&quot;);</span>
<a href="#l17.70"></a><span id="l17.70" class="difflineminus">-</span>
<a href="#l17.71"></a><span id="l17.71" class="difflineminus">-  // PREF: integer permissions.default.image == 1</span>
<a href="#l17.72"></a><span id="l17.72" class="difflineminus">-</span>
<a href="#l17.73"></a><span id="l17.73" class="difflineminus">-  // test to see if an existing integer property exists</span>
<a href="#l17.74"></a><span id="l17.74" class="difflineminus">-  ok(Application.prefs.has(testdata.integer), &quot;Check existing integer property for existence&quot;);</span>
<a href="#l17.75"></a><span id="l17.75" class="difflineminus">-</span>
<a href="#l17.76"></a><span id="l17.76" class="difflineminus">-  // test accessing a non-existant integer property</span>
<a href="#l17.77"></a><span id="l17.77" class="difflineminus">-  var val = Application.prefs.getValue(testdata.dummy, 0);</span>
<a href="#l17.78"></a><span id="l17.78" class="difflineminus">-  is(val, 0, &quot;Check non-existant integer property for expected value&quot;);</span>
<a href="#l17.79"></a><span id="l17.79" class="difflineminus">-</span>
<a href="#l17.80"></a><span id="l17.80" class="difflineminus">-  // test accessing an existing integer property</span>
<a href="#l17.81"></a><span id="l17.81" class="difflineminus">-  var val = Application.prefs.getValue(testdata.integer, 0);</span>
<a href="#l17.82"></a><span id="l17.82" class="difflineminus">-  is(val, 1, &quot;Check existing integer property for expected value&quot;);</span>
<a href="#l17.83"></a><span id="l17.83" class="difflineminus">-</span>
<a href="#l17.84"></a><span id="l17.84" class="difflineminus">-  // test manipulating an existing integer property</span>
<a href="#l17.85"></a><span id="l17.85" class="difflineminus">-  Application.prefs.setValue(testdata.integer, 0);</span>
<a href="#l17.86"></a><span id="l17.86" class="difflineminus">-  var val = Application.prefs.getValue(testdata.integer, 1);</span>
<a href="#l17.87"></a><span id="l17.87" class="difflineminus">-  is(val, 0, &quot;Set existing integer property&quot;);</span>
<a href="#l17.88"></a><span id="l17.88" class="difflineminus">-</span>
<a href="#l17.89"></a><span id="l17.89" class="difflineminus">-  // test getting the type of an existing integer property</span>
<a href="#l17.90"></a><span id="l17.90" class="difflineminus">-  var type = Application.prefs.get(testdata.integer).type;</span>
<a href="#l17.91"></a><span id="l17.91" class="difflineminus">-  is(type, &quot;Number&quot;, &quot;Check 'Application.prefs.get().type' for integer pref&quot;);</span>
<a href="#l17.92"></a><span id="l17.92" class="difflineminus">-</span>
<a href="#l17.93"></a><span id="l17.93" class="difflineminus">-  // test resetting an existing integer property</span>
<a href="#l17.94"></a><span id="l17.94" class="difflineminus">-  Application.prefs.get(testdata.integer).reset();</span>
<a href="#l17.95"></a><span id="l17.95" class="difflineminus">-  var val = Application.prefs.getValue(testdata.integer, 0);</span>
<a href="#l17.96"></a><span id="l17.96" class="difflineminus">-  is(val, 1, &quot;Reset existing integer property&quot;);</span>
<a href="#l17.97"></a><span id="l17.97" class="difflineminus">-</span>
<a href="#l17.98"></a><span id="l17.98" class="difflineminus">-  // PREF: boolean browser.underline_anchors == true</span>
<a href="#l17.99"></a><span id="l17.99" class="difflineminus">-</span>
<a href="#l17.100"></a><span id="l17.100" class="difflineminus">-  // test to see if an existing boolean property exists</span>
<a href="#l17.101"></a><span id="l17.101" class="difflineminus">-  ok(Application.prefs.has(testdata.boolean), &quot;Check existing boolean property for existence&quot;);</span>
<a href="#l17.102"></a><span id="l17.102" class="difflineminus">-</span>
<a href="#l17.103"></a><span id="l17.103" class="difflineminus">-  // test accessing a non-existant boolean property</span>
<a href="#l17.104"></a><span id="l17.104" class="difflineminus">-  var val = Application.prefs.getValue(testdata.dummy, true);</span>
<a href="#l17.105"></a><span id="l17.105" class="difflineminus">-  ok(val, &quot;Check non-existant boolean property for expected value&quot;);</span>
<a href="#l17.106"></a><span id="l17.106" class="difflineminus">-</span>
<a href="#l17.107"></a><span id="l17.107" class="difflineminus">-  // test accessing an existing boolean property</span>
<a href="#l17.108"></a><span id="l17.108" class="difflineminus">-  var val = Application.prefs.getValue(testdata.boolean, false);</span>
<a href="#l17.109"></a><span id="l17.109" class="difflineminus">-  ok(val, &quot;Check existing boolean property for expected value&quot;);</span>
<a href="#l17.110"></a><span id="l17.110" class="difflineminus">-</span>
<a href="#l17.111"></a><span id="l17.111" class="difflineminus">-  // test manipulating an existing boolean property</span>
<a href="#l17.112"></a><span id="l17.112" class="difflineminus">-  Application.prefs.setValue(testdata.boolean, false);</span>
<a href="#l17.113"></a><span id="l17.113" class="difflineminus">-  var val = Application.prefs.getValue(testdata.boolean, true);</span>
<a href="#l17.114"></a><span id="l17.114" class="difflineminus">-  ok(!val, &quot;Set existing boolean property&quot;);</span>
<a href="#l17.115"></a><span id="l17.115" class="difflineminus">-</span>
<a href="#l17.116"></a><span id="l17.116" class="difflineminus">-  // test getting the type of an existing boolean property</span>
<a href="#l17.117"></a><span id="l17.117" class="difflineminus">-  var type = Application.prefs.get(testdata.boolean).type;</span>
<a href="#l17.118"></a><span id="l17.118" class="difflineminus">-  is(type, &quot;Boolean&quot;, &quot;Check 'Application.prefs.get().type' for boolean pref&quot;);</span>
<a href="#l17.119"></a><span id="l17.119" class="difflineminus">-</span>
<a href="#l17.120"></a><span id="l17.120" class="difflineminus">-  // test resetting an existing boolean property</span>
<a href="#l17.121"></a><span id="l17.121" class="difflineminus">-  Application.prefs.get(testdata.boolean).reset();</span>
<a href="#l17.122"></a><span id="l17.122" class="difflineminus">-  var val = Application.prefs.getValue(testdata.boolean, false);</span>
<a href="#l17.123"></a><span id="l17.123" class="difflineminus">-  ok(val, &quot;Reset existing string property for expected value&quot;);</span>
<a href="#l17.124"></a><span id="l17.124" class="difflineminus">-</span>
<a href="#l17.125"></a><span id="l17.125" class="difflineminus">-  // test getting all preferences</span>
<a href="#l17.126"></a><span id="l17.126" class="difflineminus">-  var allPrefs = Application.prefs.all;</span>
<a href="#l17.127"></a><span id="l17.127" class="difflineminus">-  ok(allPrefs.length &gt;= 800, &quot;Check 'Application.prefs.all' for the right number of preferences&quot;);</span>
<a href="#l17.128"></a><span id="l17.128" class="difflineminus">-  ok(allPrefs[0].name.length &gt; 0, &quot;Check 'Application.prefs.all' for a valid name in the starting preference&quot;);</span>
<a href="#l17.129"></a><span id="l17.129" class="difflineminus">-</span>
<a href="#l17.130"></a><span id="l17.130" class="difflineminus">-  // test the value of the preference root</span>
<a href="#l17.131"></a><span id="l17.131" class="difflineminus">-  is(Application.prefs.root, &quot;&quot;, &quot;Check the Application preference root&quot;);</span>
<a href="#l17.132"></a><span id="l17.132" class="difflineminus">-</span>
<a href="#l17.133"></a><span id="l17.133" class="difflineminus">-  // test for user changed preferences</span>
<a href="#l17.134"></a><span id="l17.134" class="difflineminus">-  ok(Application.prefs.get(&quot;browser.shell.checkDefaultBrowser&quot;).modified, &quot;A single preference is marked as modified.&quot;);</span>
<a href="#l17.135"></a><span id="l17.135" class="difflineminus">-  ok(!Application.prefs.get(testdata.string).modified, &quot;A single preference is marked as not modified.&quot;);</span>
<a href="#l17.136"></a><span id="l17.136" class="difflineminus">-</span>
<a href="#l17.137"></a><span id="l17.137" class="difflineminus">-  // test for a locked preference</span>
<a href="#l17.138"></a><span id="l17.138" class="difflineminus">-  var pref = Application.prefs.get(testdata.string);</span>
<a href="#l17.139"></a><span id="l17.139" class="difflineminus">-  ok(!pref.locked, &quot;A single preference should not be locked.&quot;);</span>
<a href="#l17.140"></a><span id="l17.140" class="difflineminus">-</span>
<a href="#l17.141"></a><span id="l17.141" class="difflineminus">-  pref.locked = true;</span>
<a href="#l17.142"></a><span id="l17.142" class="difflineminus">-  ok(pref.locked, &quot;A single preference should be locked.&quot;);</span>
<a href="#l17.143"></a><span id="l17.143" class="difflineminus">-</span>
<a href="#l17.144"></a><span id="l17.144" class="difflineminus">-  try {</span>
<a href="#l17.145"></a><span id="l17.145" class="difflineminus">-    prev.value = &quot;test value&quot;;</span>
<a href="#l17.146"></a><span id="l17.146" class="difflineminus">-</span>
<a href="#l17.147"></a><span id="l17.147" class="difflineminus">-    ok(false, &quot;A locked preference could be modified.&quot;);</span>
<a href="#l17.148"></a><span id="l17.148" class="difflineminus">-  } catch(e){</span>
<a href="#l17.149"></a><span id="l17.149" class="difflineminus">-    ok(true, &quot;A locked preference should not be able to be modified.&quot;);</span>
<a href="#l17.150"></a><span id="l17.150" class="difflineminus">-  }</span>
<a href="#l17.151"></a><span id="l17.151" class="difflineminus">-</span>
<a href="#l17.152"></a><span id="l17.152" class="difflineminus">-  pref.locked = false;</span>
<a href="#l17.153"></a><span id="l17.153" class="difflineminus">-  ok(!pref.locked, &quot;A single preference is unlocked.&quot;);</span>
<a href="#l17.154"></a><span id="l17.154" class="difflineminus">-</span>
<a href="#l17.155"></a><span id="l17.155" class="difflineminus">-  // check for change event when setting a value</span>
<a href="#l17.156"></a><span id="l17.156" class="difflineminus">-  waitForExplicitFinish();</span>
<a href="#l17.157"></a><span id="l17.157" class="difflineminus">-  Application.prefs.events.addListener(&quot;change&quot;, onPrefChange);</span>
<a href="#l17.158"></a><span id="l17.158" class="difflineminus">-  Application.prefs.setValue(&quot;smile.smile-test&quot;, &quot;change event&quot;);</span>
<a href="#l17.159"></a><span id="l17.159" class="difflineminus">-}</span>
<a href="#l17.160"></a><span id="l17.160" class="difflineminus">-</span>
<a href="#l17.161"></a><span id="l17.161" class="difflineminus">-function onPrefChange(evt) {</span>
<a href="#l17.162"></a><span id="l17.162" class="difflineminus">-  is(evt.data, testdata.dummy, &quot;Check 'Application.prefs.setValue' fired a change event&quot;);</span>
<a href="#l17.163"></a><span id="l17.163" class="difflineminus">-  Application.prefs.events.removeListener(&quot;change&quot;, onPrefChange);</span>
<a href="#l17.164"></a><span id="l17.164" class="difflineminus">-</span>
<a href="#l17.165"></a><span id="l17.165" class="difflineminus">-  // We are removing the old listener after adding the new listener so we can test that</span>
<a href="#l17.166"></a><span id="l17.166" class="difflineminus">-  // removing a listener does not remove all listeners</span>
<a href="#l17.167"></a><span id="l17.167" class="difflineminus">-  Application.prefs.get(&quot;smile.smile-test&quot;).events.addListener(&quot;change&quot;, onPrefChangeDummy);</span>
<a href="#l17.168"></a><span id="l17.168" class="difflineminus">-  Application.prefs.get(&quot;smile.smile-test&quot;).events.addListener(&quot;change&quot;, onPrefChange2);</span>
<a href="#l17.169"></a><span id="l17.169" class="difflineminus">-  Application.prefs.get(&quot;smile.smile-test&quot;).events.removeListener(&quot;change&quot;, onPrefChangeDummy);</span>
<a href="#l17.170"></a><span id="l17.170" class="difflineminus">-</span>
<a href="#l17.171"></a><span id="l17.171" class="difflineminus">-  Application.prefs.setValue(&quot;smile.smile-test&quot;, &quot;change event2&quot;);</span>
<a href="#l17.172"></a><span id="l17.172" class="difflineminus">-}</span>
<a href="#l17.173"></a><span id="l17.173" class="difflineminus">-</span>
<a href="#l17.174"></a><span id="l17.174" class="difflineminus">-function onPrefChange2(evt) {</span>
<a href="#l17.175"></a><span id="l17.175" class="difflineminus">-  is(evt.data, testdata.dummy, &quot;Check 'Application.prefs.setValue' fired a change event for a single preference&quot;);</span>
<a href="#l17.176"></a><span id="l17.176" class="difflineminus">-  Application.prefs.events.removeListener(&quot;change&quot;, onPrefChange2);</span>
<a href="#l17.177"></a><span id="l17.177" class="difflineminus">-</span>
<a href="#l17.178"></a><span id="l17.178" class="difflineminus">-  finish();</span>
<a href="#l17.179"></a><span id="l17.179" class="difflineminus">-}</span>
<a href="#l17.180"></a><span id="l17.180" class="difflineminus">-</span>
<a href="#l17.181"></a><span id="l17.181" class="difflineminus">-function onPrefChangeDummy(evt) {</span>
<a href="#l17.182"></a><span id="l17.182" class="difflineminus">-  ok(false, &quot;onPrefChangeDummy shouldn't be invoked!&quot;);</span>
<a href="#l17.183"></a><span id="l17.183" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l18.1"></a><span id="l18.1">deleted file mode 100644</span>
<a href="#l18.2"></a><span id="l18.2" class="difflineminus">--- a/suite/smile/test/browser_ApplicationQuitting.js</span>
<a href="#l18.3"></a><span id="l18.3" class="difflineplus">+++ /dev/null</span>
<a href="#l18.4"></a><span id="l18.4" class="difflineat">@@ -1,17 +0,0 @@</span>
<a href="#l18.5"></a><span id="l18.5" class="difflineminus">-function test() {</span>
<a href="#l18.6"></a><span id="l18.6" class="difflineminus">-  function quitRequestObserver(aSubject, aTopic, aData) {</span>
<a href="#l18.7"></a><span id="l18.7" class="difflineminus">-    ok(aTopic == &quot;quit-application-requested&quot; &amp;&amp;</span>
<a href="#l18.8"></a><span id="l18.8" class="difflineminus">-       aSubject instanceof Components.interfaces.nsISupportsPRBool,</span>
<a href="#l18.9"></a><span id="l18.9" class="difflineminus">-       &quot;Received a quit request we're going to deny&quot;);</span>
<a href="#l18.10"></a><span id="l18.10" class="difflineminus">-    aSubject.data = true;</span>
<a href="#l18.11"></a><span id="l18.11" class="difflineminus">-  }</span>
<a href="#l18.12"></a><span id="l18.12" class="difflineminus">-</span>
<a href="#l18.13"></a><span id="l18.13" class="difflineminus">-  // ensure that we don't accidentally quit</span>
<a href="#l18.14"></a><span id="l18.14" class="difflineminus">-  Services.obs.addObserver(quitRequestObserver, &quot;quit-application-requested&quot;);</span>
<a href="#l18.15"></a><span id="l18.15" class="difflineminus">-</span>
<a href="#l18.16"></a><span id="l18.16" class="difflineminus">-  ok(!Application.quit(),    &quot;Tried to quit - and didn't succeed&quot;);</span>
<a href="#l18.17"></a><span id="l18.17" class="difflineminus">-  ok(!Application.restart(), &quot;Tried to restart - and didn't succeed&quot;);</span>
<a href="#l18.18"></a><span id="l18.18" class="difflineminus">-</span>
<a href="#l18.19"></a><span id="l18.19" class="difflineminus">-  // clean up</span>
<a href="#l18.20"></a><span id="l18.20" class="difflineminus">-  Services.obs.removeObserver(quitRequestObserver, &quot;quit-application-requested&quot;, false);</span>
<a href="#l18.21"></a><span id="l18.21" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l19.1"></a><span id="l19.1">deleted file mode 100644</span>
<a href="#l19.2"></a><span id="l19.2" class="difflineminus">--- a/suite/smile/test/browser_ApplicationStorage.js</span>
<a href="#l19.3"></a><span id="l19.3" class="difflineplus">+++ /dev/null</span>
<a href="#l19.4"></a><span id="l19.4" class="difflineat">@@ -1,30 +0,0 @@</span>
<a href="#l19.5"></a><span id="l19.5" class="difflineminus">-function test() {</span>
<a href="#l19.6"></a><span id="l19.6" class="difflineminus">-  // test for existence of values</span>
<a href="#l19.7"></a><span id="l19.7" class="difflineminus">-  var hasItem = Application.storage.has(&quot;smile-test-missing&quot;);</span>
<a href="#l19.8"></a><span id="l19.8" class="difflineminus">-  is(hasItem, false, &quot;Check 'Application.storage.has' for nonexistent item&quot;);</span>
<a href="#l19.9"></a><span id="l19.9" class="difflineminus">-  Application.storage.set(&quot;smile-test&quot;, &quot;dummy&quot;);</span>
<a href="#l19.10"></a><span id="l19.10" class="difflineminus">-  hasItem = Application.storage.has(&quot;smile-test&quot;);</span>
<a href="#l19.11"></a><span id="l19.11" class="difflineminus">-  is(hasItem, true, &quot;Check 'Application.storage.has' for existing item&quot;);</span>
<a href="#l19.12"></a><span id="l19.12" class="difflineminus">-</span>
<a href="#l19.13"></a><span id="l19.13" class="difflineminus">-  // test getting nonexistent and existing values</span>
<a href="#l19.14"></a><span id="l19.14" class="difflineminus">-  var itemValue = Application.storage.get(&quot;smile-test-missing&quot;, &quot;default&quot;);</span>
<a href="#l19.15"></a><span id="l19.15" class="difflineminus">-  is(itemValue, &quot;default&quot;, &quot;Check 'Application.storage.get' for nonexistent item&quot;);</span>
<a href="#l19.16"></a><span id="l19.16" class="difflineminus">-  itemValue = Application.storage.get(&quot;smile-test&quot;, &quot;default&quot;);</span>
<a href="#l19.17"></a><span id="l19.17" class="difflineminus">-  is(itemValue, &quot;dummy&quot;, &quot;Check 'Application.storage.get' for existing item&quot;);</span>
<a href="#l19.18"></a><span id="l19.18" class="difflineminus">-</span>
<a href="#l19.19"></a><span id="l19.19" class="difflineminus">-  // test for overwriting an existing value</span>
<a href="#l19.20"></a><span id="l19.20" class="difflineminus">-  Application.storage.set(&quot;smile-test&quot;, &quot;smarty&quot;);</span>
<a href="#l19.21"></a><span id="l19.21" class="difflineminus">-  itemValue = Application.storage.get(&quot;smile-test&quot;, &quot;default&quot;);</span>
<a href="#l19.22"></a><span id="l19.22" class="difflineminus">-  is(itemValue, &quot;smarty&quot;, &quot;Check 'Application.storage.get' for overwritten item&quot;);</span>
<a href="#l19.23"></a><span id="l19.23" class="difflineminus">-</span>
<a href="#l19.24"></a><span id="l19.24" class="difflineminus">-  // check for change event when setting a value</span>
<a href="#l19.25"></a><span id="l19.25" class="difflineminus">-  waitForExplicitFinish();</span>
<a href="#l19.26"></a><span id="l19.26" class="difflineminus">-  Application.storage.events.addListener(&quot;change&quot;, onStorageChange);</span>
<a href="#l19.27"></a><span id="l19.27" class="difflineminus">-  Application.storage.set(&quot;smile-test&quot;, &quot;change event&quot;);</span>
<a href="#l19.28"></a><span id="l19.28" class="difflineminus">-}</span>
<a href="#l19.29"></a><span id="l19.29" class="difflineminus">-</span>
<a href="#l19.30"></a><span id="l19.30" class="difflineminus">-function onStorageChange(evt) {</span>
<a href="#l19.31"></a><span id="l19.31" class="difflineminus">-  is(evt.data, &quot;smile-test&quot;, &quot;Check 'Application.storage.set' fired a change event&quot;);</span>
<a href="#l19.32"></a><span id="l19.32" class="difflineminus">-  Application.storage.events.removeListener(&quot;change&quot;, onStorageChange);</span>
<a href="#l19.33"></a><span id="l19.33" class="difflineminus">-  finish();</span>
<a href="#l19.34"></a><span id="l19.34" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l20.1"></a><span id="l20.1">deleted file mode 100644</span>
<a href="#l20.2"></a><span id="l20.2" class="difflineminus">--- a/suite/smile/test/browser_Bookmarks.js</span>
<a href="#l20.3"></a><span id="l20.3" class="difflineplus">+++ /dev/null</span>
<a href="#l20.4"></a><span id="l20.4" class="difflineat">@@ -1,253 +0,0 @@</span>
<a href="#l20.5"></a><span id="l20.5" class="difflineminus">-var gLastFolderAction = &quot;&quot;;</span>
<a href="#l20.6"></a><span id="l20.6" class="difflineminus">-var gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l20.7"></a><span id="l20.7" class="difflineminus">-var gLastRootAction = &quot;&quot;;</span>
<a href="#l20.8"></a><span id="l20.8" class="difflineminus">-</span>
<a href="#l20.9"></a><span id="l20.9" class="difflineminus">-function url(spec) {</span>
<a href="#l20.10"></a><span id="l20.10" class="difflineminus">-  return Services.io.newURI(spec);</span>
<a href="#l20.11"></a><span id="l20.11" class="difflineminus">-}</span>
<a href="#l20.12"></a><span id="l20.12" class="difflineminus">-</span>
<a href="#l20.13"></a><span id="l20.13" class="difflineminus">-function test() {</span>
<a href="#l20.14"></a><span id="l20.14" class="difflineminus">-  // Some very basic tests on the tags root</span>
<a href="#l20.15"></a><span id="l20.15" class="difflineminus">-  var tags = Application.bookmarks.tags;</span>
<a href="#l20.16"></a><span id="l20.16" class="difflineminus">-  ok(tags, &quot;Check access to bookmark tags root&quot;);</span>
<a href="#l20.17"></a><span id="l20.17" class="difflineminus">-  ok(!tags.parent, &quot;Check tags parent (should be null)&quot;);</span>
<a href="#l20.18"></a><span id="l20.18" class="difflineminus">-</span>
<a href="#l20.19"></a><span id="l20.19" class="difflineminus">-  //----------------------------------------------</span>
<a href="#l20.20"></a><span id="l20.20" class="difflineminus">-</span>
<a href="#l20.21"></a><span id="l20.21" class="difflineminus">-  // Some very basic tests on the unfiled root</span>
<a href="#l20.22"></a><span id="l20.22" class="difflineminus">-  var unfiled = Application.bookmarks.unfiled;</span>
<a href="#l20.23"></a><span id="l20.23" class="difflineminus">-  ok(unfiled, &quot;Check access to bookmark unfiled root&quot;);</span>
<a href="#l20.24"></a><span id="l20.24" class="difflineminus">-  ok(!unfiled.parent, &quot;Check unfiled parent (should be null)&quot;);</span>
<a href="#l20.25"></a><span id="l20.25" class="difflineminus">-</span>
<a href="#l20.26"></a><span id="l20.26" class="difflineminus">-  //----------------------------------------------</span>
<a href="#l20.27"></a><span id="l20.27" class="difflineminus">-</span>
<a href="#l20.28"></a><span id="l20.28" class="difflineminus">-  // Some basic tests on the toolbar root</span>
<a href="#l20.29"></a><span id="l20.29" class="difflineminus">-  var toolbar = Application.bookmarks.toolbar;</span>
<a href="#l20.30"></a><span id="l20.30" class="difflineminus">-  ok(toolbar, &quot;Check access to bookmark toolbar root&quot;);</span>
<a href="#l20.31"></a><span id="l20.31" class="difflineminus">-  ok(!toolbar.parent, &quot;Check toolbar parent (should be null)&quot;);</span>
<a href="#l20.32"></a><span id="l20.32" class="difflineminus">-</span>
<a href="#l20.33"></a><span id="l20.33" class="difflineminus">-  var toolbarKidCount = toolbar.children.length;</span>
<a href="#l20.34"></a><span id="l20.34" class="difflineminus">-</span>
<a href="#l20.35"></a><span id="l20.35" class="difflineminus">-  // test adding folders</span>
<a href="#l20.36"></a><span id="l20.36" class="difflineminus">-  var testFolderToolbar = toolbar.addFolder(&quot;SMILE in Toolbar&quot;);</span>
<a href="#l20.37"></a><span id="l20.37" class="difflineminus">-  ok(testFolderToolbar, &quot;Check folder creation&quot;);</span>
<a href="#l20.38"></a><span id="l20.38" class="difflineminus">-  is(testFolderToolbar.type, &quot;folder&quot;, &quot;Check 'folder.type' after creation&quot;);</span>
<a href="#l20.39"></a><span id="l20.39" class="difflineminus">-  ok(testFolderToolbar.parent, &quot;Check parent after folder creation&quot;);</span>
<a href="#l20.40"></a><span id="l20.40" class="difflineminus">-</span>
<a href="#l20.41"></a><span id="l20.41" class="difflineminus">-  toolbarKidCount++;</span>
<a href="#l20.42"></a><span id="l20.42" class="difflineminus">-  is(toolbar.children.length, toolbarKidCount, &quot;Check toolbar folder child count after adding a child folder&quot;);</span>
<a href="#l20.43"></a><span id="l20.43" class="difflineminus">-</span>
<a href="#l20.44"></a><span id="l20.44" class="difflineminus">-  //----------------------------------------------</span>
<a href="#l20.45"></a><span id="l20.45" class="difflineminus">-</span>
<a href="#l20.46"></a><span id="l20.46" class="difflineminus">-  // Main testing is done on the bookmarks menu root</span>
<a href="#l20.47"></a><span id="l20.47" class="difflineminus">-  var root = Application.bookmarks.menu;</span>
<a href="#l20.48"></a><span id="l20.48" class="difflineminus">-  ok(root, &quot;Check access to bookmark root&quot;);</span>
<a href="#l20.49"></a><span id="l20.49" class="difflineminus">-  ok(!root.parent, &quot;Check root parent (should be null)&quot;);</span>
<a href="#l20.50"></a><span id="l20.50" class="difflineminus">-</span>
<a href="#l20.51"></a><span id="l20.51" class="difflineminus">-  var rootKidCount = root.children.length;</span>
<a href="#l20.52"></a><span id="l20.52" class="difflineminus">-</span>
<a href="#l20.53"></a><span id="l20.53" class="difflineminus">-  // test adding folders</span>
<a href="#l20.54"></a><span id="l20.54" class="difflineminus">-  var testFolder = root.addFolder(&quot;SMILE&quot;);</span>
<a href="#l20.55"></a><span id="l20.55" class="difflineminus">-  ok(testFolder, &quot;Check folder creation&quot;);</span>
<a href="#l20.56"></a><span id="l20.56" class="difflineminus">-  is(testFolder.type, &quot;folder&quot;, &quot;Check 'folder.type' after creation&quot;);</span>
<a href="#l20.57"></a><span id="l20.57" class="difflineminus">-  ok(testFolder.parent, &quot;Check parent after folder creation&quot;);</span>
<a href="#l20.58"></a><span id="l20.58" class="difflineminus">-</span>
<a href="#l20.59"></a><span id="l20.59" class="difflineminus">-  rootKidCount++;</span>
<a href="#l20.60"></a><span id="l20.60" class="difflineminus">-  is(root.children.length, rootKidCount, &quot;Check root folder child count after adding a child folder&quot;);</span>
<a href="#l20.61"></a><span id="l20.61" class="difflineminus">-</span>
<a href="#l20.62"></a><span id="l20.62" class="difflineminus">-  // test modifying a folder</span>
<a href="#l20.63"></a><span id="l20.63" class="difflineminus">-  testFolder.events.addListener(&quot;change&quot;, onFolderChange);</span>
<a href="#l20.64"></a><span id="l20.64" class="difflineminus">-  testFolder.description = &quot;SMILE folder&quot;;</span>
<a href="#l20.65"></a><span id="l20.65" class="difflineminus">-  is(testFolder.description, &quot;SMILE folder&quot;, &quot;Check setting 'folder.description'&quot;);</span>
<a href="#l20.66"></a><span id="l20.66" class="difflineminus">-  is(gLastFolderAction, &quot;bookmarkProperties/description&quot;, &quot;Check event handler for setting 'folder.description'&quot;);</span>
<a href="#l20.67"></a><span id="l20.67" class="difflineminus">-</span>
<a href="#l20.68"></a><span id="l20.68" class="difflineminus">-  testFolder.title = &quot;smile-is-cool&quot;;</span>
<a href="#l20.69"></a><span id="l20.69" class="difflineminus">-  is(testFolder.title, &quot;smile-is-cool&quot;, &quot;Check setting 'folder.title'&quot;);</span>
<a href="#l20.70"></a><span id="l20.70" class="difflineminus">-  is(gLastFolderAction, &quot;title&quot;, &quot;Check event handler for setting 'folder.title'&quot;);</span>
<a href="#l20.71"></a><span id="l20.71" class="difflineminus">-</span>
<a href="#l20.72"></a><span id="l20.72" class="difflineminus">-  testFolder.annotations.set(&quot;testing/folder&quot;, &quot;annotate-this&quot;, 0);</span>
<a href="#l20.73"></a><span id="l20.73" class="difflineminus">-  ok(testFolder.annotations.has(&quot;testing/folder&quot;), &quot;Checking existence of added annotation&quot;);</span>
<a href="#l20.74"></a><span id="l20.74" class="difflineminus">-  is(gLastFolderAction, &quot;testing/folder&quot;, &quot;Check event handler for setting annotation&quot;);</span>
<a href="#l20.75"></a><span id="l20.75" class="difflineminus">-  gLastFolderAction = &quot;&quot;;</span>
<a href="#l20.76"></a><span id="l20.76" class="difflineminus">-  is(testFolder.annotations.get(&quot;testing/folder&quot;), &quot;annotate-this&quot;, &quot;Checking existence of added annotation&quot;);</span>
<a href="#l20.77"></a><span id="l20.77" class="difflineminus">-  testFolder.annotations.remove(&quot;testing/folder&quot;);</span>
<a href="#l20.78"></a><span id="l20.78" class="difflineminus">-  ok(!testFolder.annotations.has(&quot;testing/folder&quot;), &quot;Checking existence of removed annotation&quot;);</span>
<a href="#l20.79"></a><span id="l20.79" class="difflineminus">-  is(gLastFolderAction, &quot;testing/folder&quot;, &quot;Check event handler for removing annotation&quot;);</span>
<a href="#l20.80"></a><span id="l20.80" class="difflineminus">-</span>
<a href="#l20.81"></a><span id="l20.81" class="difflineminus">-  testFolder.events.addListener(&quot;addchild&quot;, onFolderAddChild);</span>
<a href="#l20.82"></a><span id="l20.82" class="difflineminus">-  testFolder.events.addListener(&quot;removechild&quot;, onFolderRemoveChild);</span>
<a href="#l20.83"></a><span id="l20.83" class="difflineminus">-</span>
<a href="#l20.84"></a><span id="l20.84" class="difflineminus">-  // test adding a bookmark</span>
<a href="#l20.85"></a><span id="l20.85" class="difflineminus">-  var testBookmark = testFolder.addBookmark(&quot;Mozilla&quot;, url(&quot;http://www.mozilla.com/&quot;));</span>
<a href="#l20.86"></a><span id="l20.86" class="difflineminus">-  ok(testBookmark, &quot;Check bookmark creation&quot;);</span>
<a href="#l20.87"></a><span id="l20.87" class="difflineminus">-  ok(testBookmark.parent, &quot;Check parent after bookmark creation&quot;);</span>
<a href="#l20.88"></a><span id="l20.88" class="difflineminus">-  is(gLastFolderAction, &quot;addchild&quot;, &quot;Check event handler for adding a child to a folder&quot;);</span>
<a href="#l20.89"></a><span id="l20.89" class="difflineminus">-  is(testBookmark.type, &quot;bookmark&quot;, &quot;Check 'bookmark.type' after creation&quot;);</span>
<a href="#l20.90"></a><span id="l20.90" class="difflineminus">-  is(testBookmark.title, &quot;Mozilla&quot;, &quot;Check 'bookmark.title' after creation&quot;);</span>
<a href="#l20.91"></a><span id="l20.91" class="difflineminus">-  is(testBookmark.uri.spec, &quot;http://www.mozilla.com/&quot;, &quot;Check 'bookmark.uri' after creation&quot;);</span>
<a href="#l20.92"></a><span id="l20.92" class="difflineminus">-</span>
<a href="#l20.93"></a><span id="l20.93" class="difflineminus">-  is(testFolder.children.length, 1, &quot;Check test folder child count after adding a child bookmark&quot;);</span>
<a href="#l20.94"></a><span id="l20.94" class="difflineminus">-</span>
<a href="#l20.95"></a><span id="l20.95" class="difflineminus">-  // test modifying a bookmark</span>
<a href="#l20.96"></a><span id="l20.96" class="difflineminus">-  testBookmark.events.addListener(&quot;change&quot;, onBookmarkChange);</span>
<a href="#l20.97"></a><span id="l20.97" class="difflineminus">-  testBookmark.description = &quot;mozcorp&quot;;</span>
<a href="#l20.98"></a><span id="l20.98" class="difflineminus">-  is(testBookmark.description, &quot;mozcorp&quot;, &quot;Check setting 'bookmark.description'&quot;);</span>
<a href="#l20.99"></a><span id="l20.99" class="difflineminus">-  is(gLastBookmarkAction, &quot;bookmarkProperties/description&quot;, &quot;Check event handler for setting 'bookmark.description'&quot;);</span>
<a href="#l20.100"></a><span id="l20.100" class="difflineminus">-</span>
<a href="#l20.101"></a><span id="l20.101" class="difflineminus">-  testBookmark.keyword = &quot;moz&quot;</span>
<a href="#l20.102"></a><span id="l20.102" class="difflineminus">-  is(testBookmark.keyword, &quot;moz&quot;, &quot;Check setting 'bookmark.keyword'&quot;);</span>
<a href="#l20.103"></a><span id="l20.103" class="difflineminus">-  is(gLastBookmarkAction, &quot;keyword&quot;, &quot;Check event handler for setting 'bookmark.keyword'&quot;);</span>
<a href="#l20.104"></a><span id="l20.104" class="difflineminus">-</span>
<a href="#l20.105"></a><span id="l20.105" class="difflineminus">-  testBookmark.title = &quot;MozCorp&quot;</span>
<a href="#l20.106"></a><span id="l20.106" class="difflineminus">-  is(testBookmark.title, &quot;MozCorp&quot;, &quot;Check setting 'bookmark.title'&quot;);</span>
<a href="#l20.107"></a><span id="l20.107" class="difflineminus">-  is(gLastBookmarkAction, &quot;title&quot;, &quot;Check event handler for setting 'bookmark.title'&quot;);</span>
<a href="#l20.108"></a><span id="l20.108" class="difflineminus">-</span>
<a href="#l20.109"></a><span id="l20.109" class="difflineminus">-  testBookmark.uri = url(&quot;http://www.mozilla.org/&quot;);</span>
<a href="#l20.110"></a><span id="l20.110" class="difflineminus">-  is(testBookmark.uri.spec, &quot;http://www.mozilla.org/&quot;, &quot;Check setting 'bookmark.uri'&quot;);</span>
<a href="#l20.111"></a><span id="l20.111" class="difflineminus">-  is(gLastBookmarkAction, &quot;uri&quot;, &quot;Check event handler for setting 'bookmark.uri'&quot;);</span>
<a href="#l20.112"></a><span id="l20.112" class="difflineminus">-</span>
<a href="#l20.113"></a><span id="l20.113" class="difflineminus">-  // test adding and removing a bookmark annotation</span>
<a href="#l20.114"></a><span id="l20.114" class="difflineminus">-  testBookmark.annotations.set(&quot;testing/bookmark&quot;, &quot;annotate-this&quot;, 0);</span>
<a href="#l20.115"></a><span id="l20.115" class="difflineminus">-  ok(testBookmark.annotations.has(&quot;testing/bookmark&quot;), &quot;Checking existence of added annotation&quot;);</span>
<a href="#l20.116"></a><span id="l20.116" class="difflineminus">-  is(gLastBookmarkAction, &quot;testing/bookmark&quot;, &quot;Check event handler for setting annotation&quot;);</span>
<a href="#l20.117"></a><span id="l20.117" class="difflineminus">-  gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l20.118"></a><span id="l20.118" class="difflineminus">-  is(testBookmark.annotations.get(&quot;testing/bookmark&quot;), &quot;annotate-this&quot;, &quot;Checking existence of added annotation&quot;);</span>
<a href="#l20.119"></a><span id="l20.119" class="difflineminus">-  testBookmark.annotations.remove(&quot;testing/bookmark&quot;);</span>
<a href="#l20.120"></a><span id="l20.120" class="difflineminus">-  ok(!testBookmark.annotations.has(&quot;testing/bookmark&quot;), &quot;Checking existence of removed annotation&quot;);</span>
<a href="#l20.121"></a><span id="l20.121" class="difflineminus">-  is(gLastBookmarkAction, &quot;testing/bookmark&quot;, &quot;Check event handler for removing annotation&quot;);</span>
<a href="#l20.122"></a><span id="l20.122" class="difflineminus">-  is(testBookmark.annotations.get(&quot;testing/bookmark&quot;), null, &quot;Check existence of a missing annotation&quot;);</span>
<a href="#l20.123"></a><span id="l20.123" class="difflineminus">-</span>
<a href="#l20.124"></a><span id="l20.124" class="difflineminus">-  // quick annotation type tests</span>
<a href="#l20.125"></a><span id="l20.125" class="difflineminus">-  testBookmark.annotations.set(&quot;testing/bookmark/string&quot;, &quot;annotate-this&quot;, 0);</span>
<a href="#l20.126"></a><span id="l20.126" class="difflineminus">-  ok(testBookmark.annotations.has(&quot;testing/bookmark/string&quot;), &quot;Checking existence of added string annotation&quot;);</span>
<a href="#l20.127"></a><span id="l20.127" class="difflineminus">-  is(testBookmark.annotations.get(&quot;testing/bookmark/string&quot;), &quot;annotate-this&quot;, &quot;Checking value of added string annotation&quot;);</span>
<a href="#l20.128"></a><span id="l20.128" class="difflineminus">-  is(gLastBookmarkAction, &quot;testing/bookmark/string&quot;, &quot;Check event handler for setting annotation&quot;);</span>
<a href="#l20.129"></a><span id="l20.129" class="difflineminus">-  gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l20.130"></a><span id="l20.130" class="difflineminus">-  testBookmark.annotations.set(&quot;testing/bookmark/int&quot;, 100, 0);</span>
<a href="#l20.131"></a><span id="l20.131" class="difflineminus">-  ok(testBookmark.annotations.has(&quot;testing/bookmark/int&quot;), &quot;Checking existence of added integer annotation&quot;);</span>
<a href="#l20.132"></a><span id="l20.132" class="difflineminus">-  is(testBookmark.annotations.get(&quot;testing/bookmark/int&quot;), 100, &quot;Checking value of added integer annotation&quot;);</span>
<a href="#l20.133"></a><span id="l20.133" class="difflineminus">-  is(gLastBookmarkAction, &quot;testing/bookmark/int&quot;, &quot;Check event handler for setting annotation&quot;);</span>
<a href="#l20.134"></a><span id="l20.134" class="difflineminus">-  gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l20.135"></a><span id="l20.135" class="difflineminus">-  testBookmark.annotations.set(&quot;testing/bookmark/double&quot;, 3.333, 0);</span>
<a href="#l20.136"></a><span id="l20.136" class="difflineminus">-  ok(testBookmark.annotations.has(&quot;testing/bookmark/double&quot;), &quot;Checking existence of added double annotation&quot;);</span>
<a href="#l20.137"></a><span id="l20.137" class="difflineminus">-  is(testBookmark.annotations.get(&quot;testing/bookmark/double&quot;), 3.333, &quot;Checking value of added double annotation&quot;);</span>
<a href="#l20.138"></a><span id="l20.138" class="difflineminus">-  is(gLastBookmarkAction, &quot;testing/bookmark/double&quot;, &quot;Check event handler for setting annotation&quot;);</span>
<a href="#l20.139"></a><span id="l20.139" class="difflineminus">-  gLastBookmarkAction = &quot;&quot;;</span>
<a href="#l20.140"></a><span id="l20.140" class="difflineminus">-</span>
<a href="#l20.141"></a><span id="l20.141" class="difflineminus">-  // test names array - NOTE: &quot;bookmarkProperties/description&quot; is an annotation too</span>
<a href="#l20.142"></a><span id="l20.142" class="difflineminus">-  var names = testBookmark.annotations.names;</span>
<a href="#l20.143"></a><span id="l20.143" class="difflineminus">-  ok(names.some(f =&gt; f == &quot;bookmarkProperties/description&quot;), &quot;Checking for description annotation&quot;);</span>
<a href="#l20.144"></a><span id="l20.144" class="difflineminus">-  ok(names.some(f =&gt; f == &quot;testing/bookmark/string&quot;), &quot;Checking for string test annotation&quot;);</span>
<a href="#l20.145"></a><span id="l20.145" class="difflineminus">-  ok(names.some(f =&gt; f == &quot;testing/bookmark/int&quot;), &quot;Checking for int test annotation&quot;);</span>
<a href="#l20.146"></a><span id="l20.146" class="difflineminus">-  ok(names.some(f =&gt; f == &quot;testing/bookmark/double&quot;), &quot;Checking for double test annotation&quot;);</span>
<a href="#l20.147"></a><span id="l20.147" class="difflineminus">-</span>
<a href="#l20.148"></a><span id="l20.148" class="difflineminus">-  // test adding a separator</span>
<a href="#l20.149"></a><span id="l20.149" class="difflineminus">-  var testSeparator = testFolder.addSeparator();</span>
<a href="#l20.150"></a><span id="l20.150" class="difflineminus">-  ok(testSeparator, &quot;Check bookmark creation&quot;);</span>
<a href="#l20.151"></a><span id="l20.151" class="difflineminus">-  ok(testSeparator.parent, &quot;Check parent after separator creation&quot;);</span>
<a href="#l20.152"></a><span id="l20.152" class="difflineminus">-  is(gLastFolderAction, &quot;addchild&quot;, &quot;Check event handler for adding a child separator to a folder&quot;);</span>
<a href="#l20.153"></a><span id="l20.153" class="difflineminus">-  is(testSeparator.type, &quot;separator&quot;, &quot;Check 'bookmark.type' after separator creation&quot;);</span>
<a href="#l20.154"></a><span id="l20.154" class="difflineminus">-</span>
<a href="#l20.155"></a><span id="l20.155" class="difflineminus">-  is(testFolder.children.length, 2, &quot;Check test folder child count after adding a child separator&quot;);</span>
<a href="#l20.156"></a><span id="l20.156" class="difflineminus">-</span>
<a href="#l20.157"></a><span id="l20.157" class="difflineminus">-  // test removing separator</span>
<a href="#l20.158"></a><span id="l20.158" class="difflineminus">-  testSeparator.events.addListener(&quot;remove&quot;, onBookmarkRemove);</span>
<a href="#l20.159"></a><span id="l20.159" class="difflineminus">-  testSeparator.remove();</span>
<a href="#l20.160"></a><span id="l20.160" class="difflineminus">-  is(gLastBookmarkAction, &quot;remove&quot;, &quot;Check event handler for removing separator&quot;);</span>
<a href="#l20.161"></a><span id="l20.161" class="difflineminus">-  is(gLastFolderAction, &quot;removechild&quot;, &quot;Check event handler for removing a child separator from a folder&quot;);</span>
<a href="#l20.162"></a><span id="l20.162" class="difflineminus">-  is(testFolder.children.length, 1, &quot;Check test folder child count after removing a child separator&quot;);</span>
<a href="#l20.163"></a><span id="l20.163" class="difflineminus">-</span>
<a href="#l20.164"></a><span id="l20.164" class="difflineminus">-  // test removing bookmark</span>
<a href="#l20.165"></a><span id="l20.165" class="difflineminus">-  testBookmark.events.addListener(&quot;remove&quot;, onBookmarkRemove);</span>
<a href="#l20.166"></a><span id="l20.166" class="difflineminus">-  testBookmark.remove();</span>
<a href="#l20.167"></a><span id="l20.167" class="difflineminus">-  is(gLastBookmarkAction, &quot;remove&quot;, &quot;Check event handler for removing bookmark&quot;);</span>
<a href="#l20.168"></a><span id="l20.168" class="difflineminus">-  is(gLastFolderAction, &quot;removechild&quot;, &quot;Check event handler for removing a child from a folder&quot;);</span>
<a href="#l20.169"></a><span id="l20.169" class="difflineminus">-  is(testFolder.children.length, 0, &quot;Check test folder child count after removing a child bookmark&quot;);</span>
<a href="#l20.170"></a><span id="l20.170" class="difflineminus">-</span>
<a href="#l20.171"></a><span id="l20.171" class="difflineminus">-  // test removing a folder</span>
<a href="#l20.172"></a><span id="l20.172" class="difflineminus">-  testFolder.events.addListener(&quot;remove&quot;, onFolderRemove);</span>
<a href="#l20.173"></a><span id="l20.173" class="difflineminus">-  testFolder.remove();</span>
<a href="#l20.174"></a><span id="l20.174" class="difflineminus">-  is(gLastFolderAction, &quot;remove&quot;, &quot;Check event handler for removing child folder&quot;);</span>
<a href="#l20.175"></a><span id="l20.175" class="difflineminus">-  rootKidCount--;</span>
<a href="#l20.176"></a><span id="l20.176" class="difflineminus">-  is(root.children.length, rootKidCount, &quot;Check root folder child count after removing a child folder&quot;);</span>
<a href="#l20.177"></a><span id="l20.177" class="difflineminus">-</span>
<a href="#l20.178"></a><span id="l20.178" class="difflineminus">-  // test moving between folders</span>
<a href="#l20.179"></a><span id="l20.179" class="difflineminus">-  var testFolderA = root.addFolder(&quot;folder-a&quot;);</span>
<a href="#l20.180"></a><span id="l20.180" class="difflineminus">-  var testFolderB = root.addFolder(&quot;folder-b&quot;);</span>
<a href="#l20.181"></a><span id="l20.181" class="difflineminus">-</span>
<a href="#l20.182"></a><span id="l20.182" class="difflineminus">-  var testMove = testFolderA.addBookmark(&quot;Mozilla&quot;, url(&quot;http://www.mozilla.com/&quot;));</span>
<a href="#l20.183"></a><span id="l20.183" class="difflineminus">-  testMove.events.addListener(&quot;move&quot;, onBookmarkMove);</span>
<a href="#l20.184"></a><span id="l20.184" class="difflineminus">-  is(testMove.parent.title, &quot;folder-a&quot;, &quot;Checking for new parent before moving bookmark&quot;);</span>
<a href="#l20.185"></a><span id="l20.185" class="difflineminus">-</span>
<a href="#l20.186"></a><span id="l20.186" class="difflineminus">-  testMove.parent = testFolderB;</span>
<a href="#l20.187"></a><span id="l20.187" class="difflineminus">-  is(testMove.parent.title, &quot;folder-b&quot;, &quot;Checking for new parent after moving bookmark&quot;);</span>
<a href="#l20.188"></a><span id="l20.188" class="difflineminus">-  is(gLastBookmarkAction, &quot;move&quot;, &quot;Checking for event handler after moving bookmark&quot;);</span>
<a href="#l20.189"></a><span id="l20.189" class="difflineminus">-</span>
<a href="#l20.190"></a><span id="l20.190" class="difflineminus">-  // test moving a folder</span>
<a href="#l20.191"></a><span id="l20.191" class="difflineminus">-  testFolderA.events.addListener(&quot;move&quot;, onFolderMove);</span>
<a href="#l20.192"></a><span id="l20.192" class="difflineminus">-  testFolderA.parent = testFolderB;</span>
<a href="#l20.193"></a><span id="l20.193" class="difflineminus">-  is(testFolderA.parent.title, &quot;folder-b&quot;, &quot;Checking for new parent after moving folder&quot;);</span>
<a href="#l20.194"></a><span id="l20.194" class="difflineminus">-  is(gLastFolderAction, &quot;move&quot;, &quot;Checking for event handler after moving folder&quot;);</span>
<a href="#l20.195"></a><span id="l20.195" class="difflineminus">-</span>
<a href="#l20.196"></a><span id="l20.196" class="difflineminus">-  // test events on the root</span>
<a href="#l20.197"></a><span id="l20.197" class="difflineminus">-  root.events.addListener(&quot;add&quot;, onRootAdd);</span>
<a href="#l20.198"></a><span id="l20.198" class="difflineminus">-  root.events.addListener(&quot;remove&quot;, onRootRemove);</span>
<a href="#l20.199"></a><span id="l20.199" class="difflineminus">-  root.events.addListener(&quot;change&quot;, onRootChange);</span>
<a href="#l20.200"></a><span id="l20.200" class="difflineminus">-  var testFolderC = root.addFolder(&quot;folder-c&quot;);</span>
<a href="#l20.201"></a><span id="l20.201" class="difflineminus">-  is(gLastRootAction, &quot;add&quot;);</span>
<a href="#l20.202"></a><span id="l20.202" class="difflineminus">-</span>
<a href="#l20.203"></a><span id="l20.203" class="difflineminus">-  root.events.removeListener(&quot;add&quot;, onRootAdd);</span>
<a href="#l20.204"></a><span id="l20.204" class="difflineminus">-  gLastRootAction = &quot;&quot;;</span>
<a href="#l20.205"></a><span id="l20.205" class="difflineminus">-  var testFolderD = root.addFolder(&quot;folder-d&quot;);</span>
<a href="#l20.206"></a><span id="l20.206" class="difflineminus">-  is(gLastRootAction, &quot;&quot;);</span>
<a href="#l20.207"></a><span id="l20.207" class="difflineminus">-</span>
<a href="#l20.208"></a><span id="l20.208" class="difflineminus">-  testFolderC.remove();</span>
<a href="#l20.209"></a><span id="l20.209" class="difflineminus">-  is(gLastRootAction, &quot;remove&quot;);</span>
<a href="#l20.210"></a><span id="l20.210" class="difflineminus">-</span>
<a href="#l20.211"></a><span id="l20.211" class="difflineminus">-  testFolderD.description = &quot;Foo&quot;;</span>
<a href="#l20.212"></a><span id="l20.212" class="difflineminus">-  is(gLastRootAction, &quot;bookmarkProperties/description&quot;);</span>
<a href="#l20.213"></a><span id="l20.213" class="difflineminus">-}</span>
<a href="#l20.214"></a><span id="l20.214" class="difflineminus">-</span>
<a href="#l20.215"></a><span id="l20.215" class="difflineminus">-function onFolderChange(evt) {</span>
<a href="#l20.216"></a><span id="l20.216" class="difflineminus">-  gLastFolderAction = evt.data;</span>
<a href="#l20.217"></a><span id="l20.217" class="difflineminus">-}</span>
<a href="#l20.218"></a><span id="l20.218" class="difflineminus">-</span>
<a href="#l20.219"></a><span id="l20.219" class="difflineminus">-function onFolderRemove(evt) {</span>
<a href="#l20.220"></a><span id="l20.220" class="difflineminus">-  gLastFolderAction = evt.type;</span>
<a href="#l20.221"></a><span id="l20.221" class="difflineminus">-}</span>
<a href="#l20.222"></a><span id="l20.222" class="difflineminus">-</span>
<a href="#l20.223"></a><span id="l20.223" class="difflineminus">-function onFolderAddChild(evt) {</span>
<a href="#l20.224"></a><span id="l20.224" class="difflineminus">-  gLastFolderAction = evt.type;</span>
<a href="#l20.225"></a><span id="l20.225" class="difflineminus">-}</span>
<a href="#l20.226"></a><span id="l20.226" class="difflineminus">-</span>
<a href="#l20.227"></a><span id="l20.227" class="difflineminus">-function onFolderRemoveChild(evt) {</span>
<a href="#l20.228"></a><span id="l20.228" class="difflineminus">-  gLastFolderAction = evt.type;</span>
<a href="#l20.229"></a><span id="l20.229" class="difflineminus">-}</span>
<a href="#l20.230"></a><span id="l20.230" class="difflineminus">-</span>
<a href="#l20.231"></a><span id="l20.231" class="difflineminus">-function onFolderMove(evt) {</span>
<a href="#l20.232"></a><span id="l20.232" class="difflineminus">-  gLastFolderAction = evt.type;</span>
<a href="#l20.233"></a><span id="l20.233" class="difflineminus">-}</span>
<a href="#l20.234"></a><span id="l20.234" class="difflineminus">-</span>
<a href="#l20.235"></a><span id="l20.235" class="difflineminus">-function onBookmarkChange(evt) {</span>
<a href="#l20.236"></a><span id="l20.236" class="difflineminus">-  gLastBookmarkAction = evt.data;</span>
<a href="#l20.237"></a><span id="l20.237" class="difflineminus">-}</span>
<a href="#l20.238"></a><span id="l20.238" class="difflineminus">-</span>
<a href="#l20.239"></a><span id="l20.239" class="difflineminus">-function onBookmarkRemove(evt) {</span>
<a href="#l20.240"></a><span id="l20.240" class="difflineminus">-  gLastBookmarkAction = evt.type;</span>
<a href="#l20.241"></a><span id="l20.241" class="difflineminus">-}</span>
<a href="#l20.242"></a><span id="l20.242" class="difflineminus">-</span>
<a href="#l20.243"></a><span id="l20.243" class="difflineminus">-function onBookmarkMove(evt) {</span>
<a href="#l20.244"></a><span id="l20.244" class="difflineminus">-  gLastBookmarkAction = evt.type;</span>
<a href="#l20.245"></a><span id="l20.245" class="difflineminus">-}</span>
<a href="#l20.246"></a><span id="l20.246" class="difflineminus">-</span>
<a href="#l20.247"></a><span id="l20.247" class="difflineminus">-function onRootAdd(evt) {</span>
<a href="#l20.248"></a><span id="l20.248" class="difflineminus">-  gLastRootAction = evt.type;</span>
<a href="#l20.249"></a><span id="l20.249" class="difflineminus">-}</span>
<a href="#l20.250"></a><span id="l20.250" class="difflineminus">-</span>
<a href="#l20.251"></a><span id="l20.251" class="difflineminus">-function onRootRemove(evt) {</span>
<a href="#l20.252"></a><span id="l20.252" class="difflineminus">-  gLastRootAction = evt.type;</span>
<a href="#l20.253"></a><span id="l20.253" class="difflineminus">-}</span>
<a href="#l20.254"></a><span id="l20.254" class="difflineminus">-</span>
<a href="#l20.255"></a><span id="l20.255" class="difflineminus">-function onRootChange(evt) {</span>
<a href="#l20.256"></a><span id="l20.256" class="difflineminus">-  gLastRootAction = evt.data;</span>
<a href="#l20.257"></a><span id="l20.257" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l21.1"></a><span id="l21.1">deleted file mode 100644</span>
<a href="#l21.2"></a><span id="l21.2" class="difflineminus">--- a/suite/smile/test/browser_Browser.js</span>
<a href="#l21.3"></a><span id="l21.3" class="difflineplus">+++ /dev/null</span>
<a href="#l21.4"></a><span id="l21.4" class="difflineat">@@ -1,149 +0,0 @@</span>
<a href="#l21.5"></a><span id="l21.5" class="difflineminus">-const CHROMEROOT = getRootDirectory(gTestPath);</span>
<a href="#l21.6"></a><span id="l21.6" class="difflineminus">-</span>
<a href="#l21.7"></a><span id="l21.7" class="difflineminus">-var gPageA = null;</span>
<a href="#l21.8"></a><span id="l21.8" class="difflineminus">-var gPageB = null;</span>
<a href="#l21.9"></a><span id="l21.9" class="difflineminus">-</span>
<a href="#l21.10"></a><span id="l21.10" class="difflineminus">-// cached data from events</span>
<a href="#l21.11"></a><span id="l21.11" class="difflineminus">-var gTabOpenPageA = null;</span>
<a href="#l21.12"></a><span id="l21.12" class="difflineminus">-var gTabOpenPageB = null;</span>
<a href="#l21.13"></a><span id="l21.13" class="difflineminus">-var gTabOpenCount = 0;</span>
<a href="#l21.14"></a><span id="l21.14" class="difflineminus">-var gTabCloseCount = 0;</span>
<a href="#l21.15"></a><span id="l21.15" class="difflineminus">-var gTabMoveCount = 0;</span>
<a href="#l21.16"></a><span id="l21.16" class="difflineminus">-var gPageLoadCount = 0;</span>
<a href="#l21.17"></a><span id="l21.17" class="difflineminus">-</span>
<a href="#l21.18"></a><span id="l21.18" class="difflineminus">-function test() {</span>
<a href="#l21.19"></a><span id="l21.19" class="difflineminus">-  waitForExplicitFinish();</span>
<a href="#l21.20"></a><span id="l21.20" class="difflineminus">-</span>
<a href="#l21.21"></a><span id="l21.21" class="difflineminus">-  var windows = Application.windows;</span>
<a href="#l21.22"></a><span id="l21.22" class="difflineminus">-  ok(windows, &quot;Check access to browser windows&quot;);</span>
<a href="#l21.23"></a><span id="l21.23" class="difflineminus">-  is(windows.length, 1, &quot;There should be one browser window open&quot;);</span>
<a href="#l21.24"></a><span id="l21.24" class="difflineminus">-</span>
<a href="#l21.25"></a><span id="l21.25" class="difflineminus">-  var activeWin = Application.activeWindow;</span>
<a href="#l21.26"></a><span id="l21.26" class="difflineminus">-  activeWin.events.addListener(&quot;TabOpen&quot;, onTabOpen);</span>
<a href="#l21.27"></a><span id="l21.27" class="difflineminus">-  activeWin.events.addListener(&quot;TabClose&quot;, onTabClose);</span>
<a href="#l21.28"></a><span id="l21.28" class="difflineminus">-  activeWin.events.addListener(&quot;TabMove&quot;, onTabMove);</span>
<a href="#l21.29"></a><span id="l21.29" class="difflineminus">-</span>
<a href="#l21.30"></a><span id="l21.30" class="difflineminus">-  gPageA = activeWin.open(makeURI(CHROMEROOT + &quot;ContentA.html&quot;));</span>
<a href="#l21.31"></a><span id="l21.31" class="difflineminus">-  gPageA.events.addListener(&quot;load&quot;, onPageAFirstLoad);</span>
<a href="#l21.32"></a><span id="l21.32" class="difflineminus">-</span>
<a href="#l21.33"></a><span id="l21.33" class="difflineminus">-  is(activeWin.tabs.length, 2, &quot;Checking length of 'Browser.tabs' after opening 1 additional tab&quot;);</span>
<a href="#l21.34"></a><span id="l21.34" class="difflineminus">-</span>
<a href="#l21.35"></a><span id="l21.35" class="difflineminus">-  function onPageAFirstLoad(event) {</span>
<a href="#l21.36"></a><span id="l21.36" class="difflineminus">-    gPageA.events.removeListener(&quot;load&quot;, onPageAFirstLoad);</span>
<a href="#l21.37"></a><span id="l21.37" class="difflineminus">-    is(gPageA.uri.spec, event.data.uri.spec, &quot;Checking event browser tab is equal to page A&quot;);</span>
<a href="#l21.38"></a><span id="l21.38" class="difflineminus">-</span>
<a href="#l21.39"></a><span id="l21.39" class="difflineminus">-    gPageB = activeWin.open(makeURI(CHROMEROOT + &quot;ContentB.html&quot;));</span>
<a href="#l21.40"></a><span id="l21.40" class="difflineminus">-    gPageB.events.addListener(&quot;load&quot;, delayAfterOpen);</span>
<a href="#l21.41"></a><span id="l21.41" class="difflineminus">-    gPageB.focus();</span>
<a href="#l21.42"></a><span id="l21.42" class="difflineminus">-</span>
<a href="#l21.43"></a><span id="l21.43" class="difflineminus">-    is(activeWin.tabs.length, 3, &quot;Checking length of 'Browser.tabs' after opening a second additional tab&quot;);</span>
<a href="#l21.44"></a><span id="l21.44" class="difflineminus">-    is(activeWin.activeTab.index, gPageB.index, &quot;Checking 'Browser.activeTab' after setting focus&quot;);</span>
<a href="#l21.45"></a><span id="l21.45" class="difflineminus">-  }</span>
<a href="#l21.46"></a><span id="l21.46" class="difflineminus">-</span>
<a href="#l21.47"></a><span id="l21.47" class="difflineminus">-  function delayAfterOpen() {</span>
<a href="#l21.48"></a><span id="l21.48" class="difflineminus">-    executeSoon(afterOpen);</span>
<a href="#l21.49"></a><span id="l21.49" class="difflineminus">-  }</span>
<a href="#l21.50"></a><span id="l21.50" class="difflineminus">-</span>
<a href="#l21.51"></a><span id="l21.51" class="difflineminus">-  // need to wait for the url's to be refreshed during the load</span>
<a href="#l21.52"></a><span id="l21.52" class="difflineminus">-  function afterOpen(event) {</span>
<a href="#l21.53"></a><span id="l21.53" class="difflineminus">-    gPageB.events.removeListener(&quot;load&quot;, delayAfterOpen);</span>
<a href="#l21.54"></a><span id="l21.54" class="difflineminus">-    // check actuals</span>
<a href="#l21.55"></a><span id="l21.55" class="difflineminus">-    is(gPageA.uri.spec, CHROMEROOT + &quot;ContentA.html&quot;, &quot;Checking 'BrowserTab.uri' after opening&quot;);</span>
<a href="#l21.56"></a><span id="l21.56" class="difflineminus">-    is(gPageB.uri.spec, CHROMEROOT + &quot;ContentB.html&quot;, &quot;Checking 'BrowserTab.uri' after opening&quot;);</span>
<a href="#l21.57"></a><span id="l21.57" class="difflineminus">-</span>
<a href="#l21.58"></a><span id="l21.58" class="difflineminus">-    // check event</span>
<a href="#l21.59"></a><span id="l21.59" class="difflineminus">-    is(gTabOpenCount, 2, &quot;Checking event handler for tab open&quot;);</span>
<a href="#l21.60"></a><span id="l21.60" class="difflineminus">-    // check cached values from TabOpen event</span>
<a href="#l21.61"></a><span id="l21.61" class="difflineminus">-    is(gPageA.uri.spec, gTabOpenPageA.uri.spec, &quot;Checking first browser tab open is equal to page A&quot;);</span>
<a href="#l21.62"></a><span id="l21.62" class="difflineminus">-    is(gPageB.uri.spec, gTabOpenPageB.uri.spec, &quot;Checking second browser tab open is equal to page B&quot;);</span>
<a href="#l21.63"></a><span id="l21.63" class="difflineminus">-</span>
<a href="#l21.64"></a><span id="l21.64" class="difflineminus">-    // test document access</span>
<a href="#l21.65"></a><span id="l21.65" class="difflineminus">-    var test1 = gPageA.document.getElementById(&quot;test1&quot;);</span>
<a href="#l21.66"></a><span id="l21.66" class="difflineminus">-    ok(test1, &quot;Checking existence of element in content DOM&quot;);</span>
<a href="#l21.67"></a><span id="l21.67" class="difflineminus">-    is(test1.innerHTML, &quot;A&quot;, &quot;Checking content of element in content DOM&quot;);</span>
<a href="#l21.68"></a><span id="l21.68" class="difflineminus">-</span>
<a href="#l21.69"></a><span id="l21.69" class="difflineminus">-    // test moving tab</span>
<a href="#l21.70"></a><span id="l21.70" class="difflineminus">-    is(gTabMoveCount, 0, &quot;Checking initial tab move count&quot;);</span>
<a href="#l21.71"></a><span id="l21.71" class="difflineminus">-</span>
<a href="#l21.72"></a><span id="l21.72" class="difflineminus">-    // move the tab</span>
<a href="#l21.73"></a><span id="l21.73" class="difflineminus">-    gPageA.moveToEnd();</span>
<a href="#l21.74"></a><span id="l21.74" class="difflineminus">-    is(gPageA.index, 2, &quot;Checking index after moving tab&quot;);</span>
<a href="#l21.75"></a><span id="l21.75" class="difflineminus">-</span>
<a href="#l21.76"></a><span id="l21.76" class="difflineminus">-    // check event</span>
<a href="#l21.77"></a><span id="l21.77" class="difflineminus">-    is(gTabMoveCount, 1, &quot;Checking event handler for tab move&quot;);</span>
<a href="#l21.78"></a><span id="l21.78" class="difflineminus">-</span>
<a href="#l21.79"></a><span id="l21.79" class="difflineminus">-    gBrowser.addProgressListener({</span>
<a href="#l21.80"></a><span id="l21.80" class="difflineminus">-      onStateChange: function (webProgress, request, stateFlags, status) {</span>
<a href="#l21.81"></a><span id="l21.81" class="difflineminus">-        info(&quot;onStateChange: &quot; + stateFlags);</span>
<a href="#l21.82"></a><span id="l21.82" class="difflineminus">-</span>
<a href="#l21.83"></a><span id="l21.83" class="difflineminus">-        const complete = Ci.nsIWebProgressListener.STATE_IS_WINDOW +</span>
<a href="#l21.84"></a><span id="l21.84" class="difflineminus">-                         Ci.nsIWebProgressListener.STATE_IS_NETWORK +</span>
<a href="#l21.85"></a><span id="l21.85" class="difflineminus">-                         Ci.nsIWebProgressListener.STATE_STOP;</span>
<a href="#l21.86"></a><span id="l21.86" class="difflineminus">-        if ((stateFlags &amp; complete) == complete) {</span>
<a href="#l21.87"></a><span id="l21.87" class="difflineminus">-          gBrowser.removeProgressListener(this);</span>
<a href="#l21.88"></a><span id="l21.88" class="difflineminus">-          onPageBLoadComplete();</span>
<a href="#l21.89"></a><span id="l21.89" class="difflineminus">-        }</span>
<a href="#l21.90"></a><span id="l21.90" class="difflineminus">-      },</span>
<a href="#l21.91"></a><span id="l21.91" class="difflineminus">-      onLocationChange: function() {},</span>
<a href="#l21.92"></a><span id="l21.92" class="difflineminus">-      onProgressChange: function() {},</span>
<a href="#l21.93"></a><span id="l21.93" class="difflineminus">-      onStatusChange: function() {},</span>
<a href="#l21.94"></a><span id="l21.94" class="difflineminus">-      onSecurityChange: function() {}</span>
<a href="#l21.95"></a><span id="l21.95" class="difflineminus">-    });</span>
<a href="#l21.96"></a><span id="l21.96" class="difflineminus">-</span>
<a href="#l21.97"></a><span id="l21.97" class="difflineminus">-    // test loading new content with a frame into a tab</span>
<a href="#l21.98"></a><span id="l21.98" class="difflineminus">-    // the event will be checked in onPageBLoadComplete</span>
<a href="#l21.99"></a><span id="l21.99" class="difflineminus">-    gPageB.events.addListener(&quot;load&quot;, onPageBLoadWithFrames);</span>
<a href="#l21.100"></a><span id="l21.100" class="difflineminus">-    gPageB.load(makeURI(CHROMEROOT + &quot;ContentWithFrames.html&quot;));</span>
<a href="#l21.101"></a><span id="l21.101" class="difflineminus">-  }</span>
<a href="#l21.102"></a><span id="l21.102" class="difflineminus">-</span>
<a href="#l21.103"></a><span id="l21.103" class="difflineminus">-  function onPageBLoadWithFrames(event) {</span>
<a href="#l21.104"></a><span id="l21.104" class="difflineminus">-    gPageLoadCount++;</span>
<a href="#l21.105"></a><span id="l21.105" class="difflineminus">-    info(&quot;onPageBLoadWithFrames: &quot; + gPageLoadCount);</span>
<a href="#l21.106"></a><span id="l21.106" class="difflineminus">-  }</span>
<a href="#l21.107"></a><span id="l21.107" class="difflineminus">-</span>
<a href="#l21.108"></a><span id="l21.108" class="difflineminus">-  function onPageBLoadComplete() {</span>
<a href="#l21.109"></a><span id="l21.109" class="difflineminus">-    gPageB.events.removeListener(&quot;load&quot;, onPageBLoadWithFrames);</span>
<a href="#l21.110"></a><span id="l21.110" class="difflineminus">-    // check page load with frame event</span>
<a href="#l21.111"></a><span id="l21.111" class="difflineminus">-    is(gPageLoadCount, 1, &quot;Checking load count after loading new content with a frame&quot;);</span>
<a href="#l21.112"></a><span id="l21.112" class="difflineminus">-</span>
<a href="#l21.113"></a><span id="l21.113" class="difflineminus">-    // test loading new content into a tab</span>
<a href="#l21.114"></a><span id="l21.114" class="difflineminus">-    // the event will be checked in onPageASecondLoad</span>
<a href="#l21.115"></a><span id="l21.115" class="difflineminus">-    gPageA.events.addListener(&quot;load&quot;, onPageASecondLoad);</span>
<a href="#l21.116"></a><span id="l21.116" class="difflineminus">-    gPageA.load(makeURI(CHROMEROOT + &quot;ContentB.html&quot;));</span>
<a href="#l21.117"></a><span id="l21.117" class="difflineminus">-  }</span>
<a href="#l21.118"></a><span id="l21.118" class="difflineminus">-</span>
<a href="#l21.119"></a><span id="l21.119" class="difflineminus">-  function onPageASecondLoad(event) {</span>
<a href="#l21.120"></a><span id="l21.120" class="difflineminus">-    gPageA.events.removeListener(&quot;load&quot;, onPageASecondLoad);</span>
<a href="#l21.121"></a><span id="l21.121" class="difflineminus">-    is(gPageA.uri.spec, CHROMEROOT + &quot;ContentB.html&quot;, &quot;Checking 'BrowserTab.uri' after loading new content&quot;);</span>
<a href="#l21.122"></a><span id="l21.122" class="difflineminus">-</span>
<a href="#l21.123"></a><span id="l21.123" class="difflineminus">-    // start testing closing tabs</span>
<a href="#l21.124"></a><span id="l21.124" class="difflineminus">-    // the event will be checked in afterClose</span>
<a href="#l21.125"></a><span id="l21.125" class="difflineminus">-    // use executeSoon so the onPageASecondLoad</span>
<a href="#l21.126"></a><span id="l21.126" class="difflineminus">-    // has a chance to finish first</span>
<a href="#l21.127"></a><span id="l21.127" class="difflineminus">-    gPageA.close();</span>
<a href="#l21.128"></a><span id="l21.128" class="difflineminus">-    gPageB.close();</span>
<a href="#l21.129"></a><span id="l21.129" class="difflineminus">-</span>
<a href="#l21.130"></a><span id="l21.130" class="difflineminus">-    is(gTabCloseCount, 2, &quot;Checking that tabs closed&quot;);</span>
<a href="#l21.131"></a><span id="l21.131" class="difflineminus">-    is(activeWin.tabs.length, 1, &quot;Checking length of 'Browser.tabs' after closing 2 tabs&quot;);</span>
<a href="#l21.132"></a><span id="l21.132" class="difflineminus">-    finish();</span>
<a href="#l21.133"></a><span id="l21.133" class="difflineminus">-  }</span>
<a href="#l21.134"></a><span id="l21.134" class="difflineminus">-}</span>
<a href="#l21.135"></a><span id="l21.135" class="difflineminus">-</span>
<a href="#l21.136"></a><span id="l21.136" class="difflineminus">-function onTabOpen(event) {</span>
<a href="#l21.137"></a><span id="l21.137" class="difflineminus">-  gTabOpenCount++;</span>
<a href="#l21.138"></a><span id="l21.138" class="difflineminus">-</span>
<a href="#l21.139"></a><span id="l21.139" class="difflineminus">-  // cache these values so we can check them later (after loading completes)</span>
<a href="#l21.140"></a><span id="l21.140" class="difflineminus">-  if (gTabOpenCount == 1)</span>
<a href="#l21.141"></a><span id="l21.141" class="difflineminus">-    gTabOpenPageA = event.data;</span>
<a href="#l21.142"></a><span id="l21.142" class="difflineminus">-</span>
<a href="#l21.143"></a><span id="l21.143" class="difflineminus">-  if (gTabOpenCount == 2)</span>
<a href="#l21.144"></a><span id="l21.144" class="difflineminus">-    gTabOpenPageB = event.data;</span>
<a href="#l21.145"></a><span id="l21.145" class="difflineminus">-}</span>
<a href="#l21.146"></a><span id="l21.146" class="difflineminus">-</span>
<a href="#l21.147"></a><span id="l21.147" class="difflineminus">-function onTabClose(event) {</span>
<a href="#l21.148"></a><span id="l21.148" class="difflineminus">-  gTabCloseCount++;</span>
<a href="#l21.149"></a><span id="l21.149" class="difflineminus">-}</span>
<a href="#l21.150"></a><span id="l21.150" class="difflineminus">-</span>
<a href="#l21.151"></a><span id="l21.151" class="difflineminus">-function onTabMove(event) {</span>
<a href="#l21.152"></a><span id="l21.152" class="difflineminus">-  gTabMoveCount++;</span>
<a href="#l21.153"></a><span id="l21.153" class="difflineminus">-}</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l22.1"></a><span id="l22.1">deleted file mode 100644</span>
<a href="#l22.2"></a><span id="l22.2" class="difflineminus">--- a/suite/smile/test/smile.ini</span>
<a href="#l22.3"></a><span id="l22.3" class="difflineplus">+++ /dev/null</span>
<a href="#l22.4"></a><span id="l22.4" class="difflineat">@@ -1,13 +0,0 @@</span>
<a href="#l22.5"></a><span id="l22.5" class="difflineminus">-[DEFAULT]</span>
<a href="#l22.6"></a><span id="l22.6" class="difflineminus">-</span>
<a href="#l22.7"></a><span id="l22.7" class="difflineminus">-support-files =</span>
<a href="#l22.8"></a><span id="l22.8" class="difflineminus">-  ContentA.html</span>
<a href="#l22.9"></a><span id="l22.9" class="difflineminus">-  ContentB.html</span>
<a href="#l22.10"></a><span id="l22.10" class="difflineminus">-  ContentWithFrames.html</span>
<a href="#l22.11"></a><span id="l22.11" class="difflineminus">-</span>
<a href="#l22.12"></a><span id="l22.12" class="difflineminus">-[browser_Application.js]</span>
<a href="#l22.13"></a><span id="l22.13" class="difflineminus">-[browser_ApplicationPrefs.js]</span>
<a href="#l22.14"></a><span id="l22.14" class="difflineminus">-[browser_ApplicationQuitting.js]</span>
<a href="#l22.15"></a><span id="l22.15" class="difflineminus">-[browser_ApplicationStorage.js]</span>
<a href="#l22.16"></a><span id="l22.16" class="difflineminus">-[browser_Bookmarks.js]</span>
<a href="#l22.17"></a><span id="l22.17" class="difflineminus">-[browser_Browser.js]</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

