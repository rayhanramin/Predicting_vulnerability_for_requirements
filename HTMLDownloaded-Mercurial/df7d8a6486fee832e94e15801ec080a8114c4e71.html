<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<link rel="icon" href="/static/35f393d6769a/hgicon.png" type="image/png" />
<meta name="robots" content="index, nofollow"/>
<link rel="stylesheet" href="/static/35f393d6769a/style-gitweb.css" type="text/css" />

<style type="text/css">
div.feed {
  float: right;
}
a img {
  border-width: 0px;
}
div.log_link {
  width: 80px;
  background-color: white;
}

div.log_body {
  padding-left: 96px;
}
</style>
<script type="text/javascript" src="/static/35f393d6769a/mercurial.js"></script>

<meta property="og:image" content="/static/35f393d6769a/moz-logo-bw-rgb.svg"/>
<meta property="og:type" content="website"/>

<title>comm-central: changeset 13735:df7d8a6486fee832e94e15801ec080a8114c4e71</title>
<link rel="alternate" type="application/atom+xml"
   href="/comm-central/atom-log" title="Atom feed for comm-central"/>
<link rel="alternate" type="application/rss+xml"
   href="/comm-central/rss-log" title="RSS feed for comm-central"/>

<meta property="og:title" content="comm-central @ df7d8a6486fee832e94e15801ec080a8114c4e71" />
<meta property="og:url" content="/comm-central/rev/df7d8a6486fee832e94e15801ec080a8114c4e71" />
<meta property="og:description" content="Bug 953497 - Make sure the account wizard won't try to create duplicate accounts" />

</head>
<body>

<div class="page_header">
<div class="logo">
    <a href="https://developer.mozilla.org/en/docs/Mercurial">
        <img src="/static/35f393d6769a/moz-logo-bw-rgb.svg" alt="mercurial" />
    </a>
</div>
<a href="/">Mercurial</a> &gt; <a href="/comm-central">comm-central</a>  / changeset / df7d8a6486fee832e94e15801ec080a8114c4e71 
</div>

<div class="page_nav">
<div>
<a href="/comm-central/summary">summary</a> |
<a href="/comm-central/shortlog/df7d8a6486fee832e94e15801ec080a8114c4e71">shortlog</a> |
<a href="/comm-central/log/df7d8a6486fee832e94e15801ec080a8114c4e71">changelog</a> |
<a href="/comm-central/pushloghtml">pushlog</a> |
<a href="/comm-central/graph/df7d8a6486fee832e94e15801ec080a8114c4e71">graph</a> |
<a href="/comm-central/tags">tags</a> |
<a href="/comm-central/bookmarks">bookmarks</a> |
<a href="/comm-central/branches">branches</a> |
<a href="/comm-central/file/df7d8a6486fee832e94e15801ec080a8114c4e71">files</a> |
changeset |
<a href="/comm-central/raw-rev/df7d8a6486fee832e94e15801ec080a8114c4e71">raw</a>  | <a href="/comm-central/archive/df7d8a6486fee832e94e15801ec080a8114c4e71.zip">zip</a>  |
<a href="/comm-central/help">help</a>
</div>

<div class="search">
<form id="searchform" action="/comm-central/log">

<input name="rev" type="text" value="" size="40" />
<div id="hint">Find changesets by keywords (author, files, the commit message), revision
number or hash, or <a href="/comm-central/help/revsets">revset expression</a>.</div>
</form>
</div>
</div>

<div class="title">
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953497">Bug 953497</a> - Make sure the account wizard won't try to create duplicate accounts
<span class="logtags"></span>
</div>
<div class="title_text">
<table cellspacing="0">

<tr><td>author</td><td>&#70;&#108;&#111;&#114;&#105;&#97;&#110;&#32;&#81;&#117;&#232;&#122;&#101;&#32;&#60;&#102;&#108;&#111;&#114;&#105;&#97;&#110;&#64;&#105;&#110;&#115;&#116;&#97;&#110;&#116;&#98;&#105;&#114;&#100;&#46;&#111;&#114;&#103;&#62;</td></tr>
<tr><td></td><td class="date age">Wed, 23 Jul 2008 23:34:55 +0200</td></tr>

<tr>
 <td>changeset 13735</td>
 <td style="font-family:monospace"><a class="list" href="/comm-central/rev/df7d8a6486fee832e94e15801ec080a8114c4e71">df7d8a6486fee832e94e15801ec080a8114c4e71</a></td>
</tr>



<tr>
<td>parent 13734</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/c793d384f630c751602db41b121122f1377e1acd">c793d384f630c751602db41b121122f1377e1acd</a>
</td>
</tr>

<tr>
<td>child 13736</td>
<td style="font-family:monospace">
<a class="list" href="/comm-central/rev/3a02364b044f1e9da6b25718a2483641dd420a1e">3a02364b044f1e9da6b25718a2483641dd420a1e</a>
</td>
</tr>
<tr><td>push id</td><td><a href="/comm-central/pushloghtml?changeset=df7d8a6486fee832e94e15801ec080a8114c4e71">9778</a></td></tr>
<tr><td>push user</td><td>florian@queze.net</td></tr>
<tr><td>push date</td><td class="date age">Sun, 12 Jan 2014 18:25:45 +0000</td></tr>

<tr><td>treeherder</td><td>comm-central@f81a23bfefcd [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1">default view</a>] [<a href="https://treeherder.mozilla.org/#/jobs?repo=comm-central&revision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&filter-resultStatus=testfailed&filter-resultStatus=busted&filter-resultStatus=exception">failures only]</td></tr>
<tr><td>perfherder</td><td>[<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=1" target="_blank">talos</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=2" target="_blank">build metrics</a>] [<a href="https://treeherder.mozilla.org/perf.html#/compare?originalProject=comm-central&originalRevision=f81a23bfefcd0f6ec6215fbde12f8af2bc7749f1&newProject=comm-central&newRevision=279a7aa9624ffb41326b021ff7d8bc68b9b89551&framework=6" target="_blank">platform microbench</a>] (compared to previous push)</td></tr>

<tr><td>bugs</td><td><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953497">953497</a></td></tr>




</table></div>

<div class="page_body description"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=953497">Bug 953497</a> - Make sure the account wizard won't try to create duplicate accounts</div>
<div class="list_head"></div>
<div class="title_text">
<table cellspacing="0">

<tr class="parity0">
<td><a class="list" href="/comm-central/diff/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.js">im/base/content/instantbird/accountWizard.js</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.js">file</a> |
<a href="/comm-central/annotate/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.js">annotate</a> |
<a href="/comm-central/diff/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.js">diff</a> |
<a href="/comm-central/comparison/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.js">comparison</a> |
<a href="/comm-central/log/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.js">revisions</a>
</td>
</tr>
<tr class="parity1">
<td><a class="list" href="/comm-central/diff/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.xul">im/base/content/instantbird/accountWizard.xul</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.xul">file</a> |
<a href="/comm-central/annotate/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.xul">annotate</a> |
<a href="/comm-central/diff/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.xul">diff</a> |
<a href="/comm-central/comparison/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.xul">comparison</a> |
<a href="/comm-central/log/df7d8a6486fee832e94e15801ec080a8114c4e71/im/base/content/instantbird/accountWizard.xul">revisions</a>
</td>
</tr>
<tr class="parity0">
<td><a class="list" href="/comm-central/diff/df7d8a6486fee832e94e15801ec080a8114c4e71/im/locales/en-US/chrome/instantbird/accountWizard.dtd">im/locales/en-US/chrome/instantbird/accountWizard.dtd</a></td>
<td></td>
<td class="link">
<a href="/comm-central/file/df7d8a6486fee832e94e15801ec080a8114c4e71/im/locales/en-US/chrome/instantbird/accountWizard.dtd">file</a> |
<a href="/comm-central/annotate/df7d8a6486fee832e94e15801ec080a8114c4e71/im/locales/en-US/chrome/instantbird/accountWizard.dtd">annotate</a> |
<a href="/comm-central/diff/df7d8a6486fee832e94e15801ec080a8114c4e71/im/locales/en-US/chrome/instantbird/accountWizard.dtd">diff</a> |
<a href="/comm-central/comparison/df7d8a6486fee832e94e15801ec080a8114c4e71/im/locales/en-US/chrome/instantbird/accountWizard.dtd">comparison</a> |
<a href="/comm-central/log/df7d8a6486fee832e94e15801ec080a8114c4e71/im/locales/en-US/chrome/instantbird/accountWizard.dtd">revisions</a>
</td>
</tr>
</table></div>

<div class="page_body diffblocks"><div class="diffblock"><pre class="sourcelines">
<a href="#l1.1"></a><span id="l1.1" class="difflineminus">--- a/im/base/content/instantbird/accountWizard.js</span>
<a href="#l1.2"></a><span id="l1.2" class="difflineplus">+++ b/im/base/content/instantbird/accountWizard.js</span>
<a href="#l1.3"></a><span id="l1.3" class="difflineat">@@ -51,17 +51,26 @@ var accountWizard = {</span>
<a href="#l1.4"></a><span id="l1.4">     setTimeout(function() {</span>
<a href="#l1.5"></a><span id="l1.5">       protoList.selectedIndex = 0;</span>
<a href="#l1.6"></a><span id="l1.6">     }, 0);</span>
<a href="#l1.7"></a><span id="l1.7">   },</span>
<a href="#l1.8"></a><span id="l1.8"> </span>
<a href="#l1.9"></a><span id="l1.9">   checkUsername: function aw_checkUsername() {</span>
<a href="#l1.10"></a><span id="l1.10">     var wizard = document.getElementById(&quot;accountWizard&quot;);</span>
<a href="#l1.11"></a><span id="l1.11">     var input = document.getElementById(&quot;name&quot;);</span>
<a href="#l1.12"></a><span id="l1.12" class="difflineminus">-    wizard.canAdvance = input.value.length &gt; 0;</span>
<a href="#l1.13"></a><span id="l1.13" class="difflineplus">+    var duplicateWarning = document.getElementById(&quot;duplicateAccount&quot;);</span>
<a href="#l1.14"></a><span id="l1.14" class="difflineplus">+    if (!input.value) {</span>
<a href="#l1.15"></a><span id="l1.15" class="difflineplus">+      wizard.canAdvance = false;</span>
<a href="#l1.16"></a><span id="l1.16" class="difflineplus">+      duplicateWarning.hidden = true;</span>
<a href="#l1.17"></a><span id="l1.17" class="difflineplus">+      return;</span>
<a href="#l1.18"></a><span id="l1.18" class="difflineplus">+    }</span>
<a href="#l1.19"></a><span id="l1.19" class="difflineplus">+</span>
<a href="#l1.20"></a><span id="l1.20" class="difflineplus">+    var exists = this.proto.accountExists(input.value);</span>
<a href="#l1.21"></a><span id="l1.21" class="difflineplus">+    wizard.canAdvance = !exists;</span>
<a href="#l1.22"></a><span id="l1.22" class="difflineplus">+    duplicateWarning.hidden = !exists;</span>
<a href="#l1.23"></a><span id="l1.23">   },</span>
<a href="#l1.24"></a><span id="l1.24"> </span>
<a href="#l1.25"></a><span id="l1.25">   selectProtocol: function aw_selectProtocol() {</span>
<a href="#l1.26"></a><span id="l1.26">     var protoList = document.getElementById(&quot;protolist&quot;);</span>
<a href="#l1.27"></a><span id="l1.27">     var id = protoList.selectedItem.value;</span>
<a href="#l1.28"></a><span id="l1.28">     this.proto = this.pcs.getProtocolById(id);</span>
<a href="#l1.29"></a><span id="l1.29"> </span>
<a href="#l1.30"></a><span id="l1.30">     return true;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l2.1"></a><span id="l2.1" class="difflineminus">--- a/im/base/content/instantbird/accountWizard.xul</span>
<a href="#l2.2"></a><span id="l2.2" class="difflineplus">+++ b/im/base/content/instantbird/accountWizard.xul</span>
<a href="#l2.3"></a><span id="l2.3" class="difflineat">@@ -75,16 +75,17 @@</span>
<a href="#l2.4"></a><span id="l2.4">     &lt;separator/&gt;</span>
<a href="#l2.5"></a><span id="l2.5">     &lt;hbox id=&quot;nameBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l2.6"></a><span id="l2.6">       &lt;label value=&quot;&amp;accountUsernameField.label;&quot; control=&quot;name&quot; id=&quot;nameLabel&quot;/&gt;</span>
<a href="#l2.7"></a><span id="l2.7">       &lt;textbox id=&quot;name&quot; oninput=&quot;accountWizard.checkUsername();&quot;/&gt;</span>
<a href="#l2.8"></a><span id="l2.8">     &lt;/hbox&gt;</span>
<a href="#l2.9"></a><span id="l2.9">     &lt;separator/&gt;</span>
<a href="#l2.10"></a><span id="l2.10">     &lt;description id=&quot;jabberusername&quot; hidden=&quot;true&quot;&gt;&amp;accountUsernameJabberInfo.label;&lt;/description&gt;</span>
<a href="#l2.11"></a><span id="l2.11">     &lt;description id=&quot;ircusername&quot; hidden=&quot;true&quot;&gt;&amp;accountUsernameIrcInfo.label;&lt;/description&gt;</span>
<a href="#l2.12"></a><span id="l2.12" class="difflineplus">+    &lt;description id=&quot;duplicateAccount&quot; hidden=&quot;true&quot;&gt;&amp;accountUsernameDuplicate.label;&lt;/description&gt;</span>
<a href="#l2.13"></a><span id="l2.13">   &lt;/wizardpage&gt;</span>
<a href="#l2.14"></a><span id="l2.14"> </span>
<a href="#l2.15"></a><span id="l2.15">   &lt;wizardpage id=&quot;accountpassword&quot; pageid=&quot;accountpassword&quot; next=&quot;accountalias&quot;</span>
<a href="#l2.16"></a><span id="l2.16">               label=&quot;&amp;accountPasswordTitle.label;&quot;&gt;</span>
<a href="#l2.17"></a><span id="l2.17">     &lt;description&gt;&amp;accountPasswordInfo.label;&lt;/description&gt;</span>
<a href="#l2.18"></a><span id="l2.18">     &lt;separator/&gt;</span>
<a href="#l2.19"></a><span id="l2.19">     &lt;hbox id=&quot;passwordBox&quot; align=&quot;baseline&quot;&gt;</span>
<a href="#l2.20"></a><span id="l2.20">       &lt;label value=&quot;&amp;accountPasswordField.label;&quot; control=&quot;password&quot; id=&quot;passwordLabel&quot;/&gt;</span></pre></div><div class="diffblock"><pre class="sourcelines">
<a href="#l3.1"></a><span id="l3.1" class="difflineminus">--- a/im/locales/en-US/chrome/instantbird/accountWizard.dtd</span>
<a href="#l3.2"></a><span id="l3.2" class="difflineplus">+++ b/im/locales/en-US/chrome/instantbird/accountWizard.dtd</span>
<a href="#l3.3"></a><span id="l3.3" class="difflineat">@@ -7,16 +7,17 @@</span>
<a href="#l3.4"></a><span id="l3.4"> &lt;!ENTITY accountProtocolInfo.label    &quot;Please choose the protocol of your IM account in the following list.&quot;&gt;</span>
<a href="#l3.5"></a><span id="l3.5"> &lt;!ENTITY accountProtocolField.label   &quot;Protocol:&quot;&gt;</span>
<a href="#l3.6"></a><span id="l3.6"> </span>
<a href="#l3.7"></a><span id="l3.7"> &lt;!ENTITY accountUsernameTitle.label   &quot;Username&quot;&gt;</span>
<a href="#l3.8"></a><span id="l3.8"> &lt;!ENTITY accountUsernameInfo.label    &quot;Please enter the username to use in order to connect your account.&quot;&gt;</span>
<a href="#l3.9"></a><span id="l3.9"> &lt;!ENTITY accountUsernameField.label   &quot;Username:&quot;&gt;</span>
<a href="#l3.10"></a><span id="l3.10"> &lt;!ENTITY accountUsernameJabberInfo.label &quot;For Jabber username, please use the form login@server/location. For example instantbird@gmail.com/Instantbird.&quot;&gt;</span>
<a href="#l3.11"></a><span id="l3.11"> &lt;!ENTITY accountUsernameIrcInfo.label &quot;For IRC username, please use the form nick@server. For example instantbird@irc.freenode.net.&quot;&gt;</span>
<a href="#l3.12"></a><span id="l3.12" class="difflineplus">+&lt;!ENTITY accountUsernameDuplicate.label &quot;This account is already configured!&quot;&gt;</span>
<a href="#l3.13"></a><span id="l3.13"> </span>
<a href="#l3.14"></a><span id="l3.14"> &lt;!ENTITY accountPasswordTitle.label   &quot;Password&quot;&gt;</span>
<a href="#l3.15"></a><span id="l3.15"> &lt;!ENTITY accountPasswordInfo.label    &quot;Please enter your password in the box below.&quot;&gt;</span>
<a href="#l3.16"></a><span id="l3.16"> &lt;!ENTITY accountPasswordField.label   &quot;Password:&quot;&gt;</span>
<a href="#l3.17"></a><span id="l3.17"> </span>
<a href="#l3.18"></a><span id="l3.18"> &lt;!ENTITY accountAliasTitle.label      &quot;Alias&quot;&gt;</span>
<a href="#l3.19"></a><span id="l3.19"> &lt;!ENTITY accountAliasInfo.label       &quot;You can now enter the local alias that you want to use for this accounts. This will only be displayed in your conversations when you talk. Remote users won't see it. You can leave this field blank and skip this step if you wish.&quot;&gt;</span>
<a href="#l3.20"></a><span id="l3.20"> &lt;!ENTITY accountAliasField.label      &quot;Alias:&quot;&gt;</span></pre></div></div>

<div class="page_footer">
<div class="page_footer_text">comm-central</div>
<div class="page_footer_text" style="padding-left: 10px">Deployed from <a href="https://hg.mozilla.org/hgcustom/version-control-tools/rev/35f393d6769a">35f393d6769a</a> at 2020-07-16T17:23:43Z.</div>
<div class="rss_logo">
<a href="/comm-central/rss-log">RSS</a>
<a href="/comm-central/atom-log">Atom</a>
</div>
<br />

</div>
</body>
</html>

